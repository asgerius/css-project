[{"tags": ["c++"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 1, "creation_date": 1492040329, "post_id": 43381276, "comment_id": 73824647, "body": "Can you show a bit more of the code you are describing? It is hard to understand your issue based on text descriptions rather than code snippets"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1492040335, "post_id": 43381276, "comment_id": 73824655, "body": "<code>Node foo = new Node;</code> does not compile.  Do not confuse pointers and objects, and don&#39;t use <code>new</code> without a reason.  <code>Node.Next</code> is invalid since <code>Node</code> is a type, not an object."}, {"owner": {"reputation": 41213, "user_id": 215568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b05685e6c3945f4bd23bf1f967861aeb?s=128&d=identicon&r=PG", "display_name": "Donnie", "link": "https://stackoverflow.com/users/215568/donnie"}, "edited": false, "score": 0, "creation_date": 1492040837, "post_id": 43381276, "comment_id": 73824788, "body": "Please provide a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, complete example</a> that shows your problem."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1492040916, "post_id": 43381276, "comment_id": 73824804, "body": "<code>protected</code> is effectively <code>private</code> to everyone except subclasses. If <code>Queue</code> is a subclass of <code>Node</code> it is time for a rethink."}, {"owner": {"reputation": 209, "user_id": 4851451, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/67e4cebc76482c220373105ecb44bc02?s=128&d=identicon&r=PG&f=1", "display_name": "Murph_Fish", "link": "https://stackoverflow.com/users/4851451/murph-fish"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1492041190, "post_id": 43381276, "comment_id": 73824878, "body": "@user4581301 I&#39;m not trying to make Queue a subclass, Queue is just a class that handles operations on Nodes such as enqueue, dequeue, removeFront, etc."}, {"owner": {"reputation": 209, "user_id": 4851451, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/67e4cebc76482c220373105ecb44bc02?s=128&d=identicon&r=PG&f=1", "display_name": "Murph_Fish", "link": "https://stackoverflow.com/users/4851451/murph-fish"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1492041248, "post_id": 43381276, "comment_id": 73824891, "body": "@CoryKramer Added more context to the post"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1492041285, "post_id": 43381276, "comment_id": 73824900, "body": "Right, that&#39;s the way it should be. But that means that <code>Queue</code> cannot see <code>Node</code>&#39;s <code>protected</code> members. Off topic, it looks like ClinicNode.h includes itself. Harmless, but odd."}, {"owner": {"reputation": 209, "user_id": 4851451, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/67e4cebc76482c220373105ecb44bc02?s=128&d=identicon&r=PG&f=1", "display_name": "Murph_Fish", "link": "https://stackoverflow.com/users/4851451/murph-fish"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1492041399, "post_id": 43381276, "comment_id": 73824932, "body": "@user4581301 If Queue can&#39;t see it how come I can declare a new instance outside of a method at the top and access that instances variables. What I want to do works outside of Queues methods but not in them."}, {"owner": {"reputation": 209, "user_id": 4851451, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/67e4cebc76482c220373105ecb44bc02?s=128&d=identicon&r=PG&f=1", "display_name": "Murph_Fish", "link": "https://stackoverflow.com/users/4851451/murph-fish"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1492042059, "post_id": 43381276, "comment_id": 73825094, "body": "@user4581301 I updated my post with as much information I could provide for the problem at hand"}], "owner": {"reputation": 209, "user_id": 4851451, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/67e4cebc76482c220373105ecb44bc02?s=128&d=identicon&r=PG&f=1", "display_name": "Murph_Fish", "link": "https://stackoverflow.com/users/4851451/murph-fish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1492042028, "creation_date": 1492040160, "last_edit_date": 1492042028, "question_id": 43381276, "link": "https://stackoverflow.com/questions/43381276/unable-to-access-protected-class-variables-from-instance-in-another-class", "title": "Unable to access protected class variables from instance in another class?", "body": "<p>I'm making a queue from scratch and I have a <strong>Node class</strong> and a <strong>Queue class</strong>. My <strong>Node class</strong> has two protected variables (Info,Next) and I want to access these variables from my <strong>Queue class</strong> when I create a new Node instance, In my <strong>Queue class</strong> for my Enqueue method, I need to create a new Node instance and access these variables so I Naturally do....</p>\n\n<pre><code>Node foo = new Node;\n</code></pre>\n\n<p>The problem is, when I go to do something like....</p>\n\n<pre><code>Node.Next = Rear;\n</code></pre>\n\n<p>I get an error of unable to resolve identifier Next or Info.\nHowever, if I declare a new instance outside of my methods in my <strong>Queue class</strong> and try and access Node's variables, I can. It is only when I am inside a method in another class that I can't. I am newer to c++ and come from a java background. Is there a specific c++ rule I am overlooking here? Thanks in advance!</p>\n\n<p>for more context as requested here is the header file for Node</p>\n\n<pre><code>#ifndef CLINICNODE_H\n#define CLINICNODE_H\n\n#include \"ClinicPatient.h\"\n\nclass ClinicNode {\npublic:\n    ClinicNode();\n    void Modify(ClinicNode ThisNode);\n    void InputData(int x);\n    virtual string toString();\nprotected:\n    ClinicPatient Info;\n    ClinicNode Next;\n};\n\n#endif /* CLINICNODE_H */\n</code></pre>\n\n<p>Here is my constructor for ClinicNode</p>\n\n<pre><code>#include \"ClinicNode.h\"\n\nClinicNode::ClinicNode() {\n    Info = ClinicPatient();\n    Next = NULL;\n}\n</code></pre>\n\n<p>here is my ClinicQueue Header</p>\n\n<pre><code>#ifndef CLINICQUEUE_H\n#define CLINICQUEUE_H\n\n#include \"ClinicNode.h\"\n\nclass ClinicQueue {\npublic:\n    ClinicQueue();\n    void addRear(ClinicPatient ThisPatient);\n    ClinicPatient removeFront();\n    void Modify(int Position, ClinicPatient ThisPatient);\n    void clearQueue();\n    ClinicPatient getInfo(int Position);\n    ClinicNode getNode(int Position);\n    int getSize();\n    bool isEmpty();\n   // ClinicPatient[] toArray();\nprotected:\n    ClinicNode Front;\n    ClinicNode Rear;\n    int Length;\n};\n\n#endif /* CLINICQUEUE_H */\n</code></pre>\n\n<p>Here is a snippet from ClinicQueue.cpp</p>\n\n<pre><code>#include \"ClinicQueue.h\"\n\nClinicQueue::ClinicQueue() {\n    Front = NULL;\n    Rear = NULL;\n    Length = 0;\n}\n\nvoid ClinicQueue::addRear(ClinicPatient ThisPatient) {\n    ClinicNode newNode = new ClinicNode;\n    newNode.Info.Modify(ThisPatient);\n    newNode.Next = Rear;\n    Rear = newNode;\n    Length++;\n    if(Length == 1) {\n        Front = Rear;\n    }\n}\n</code></pre>\n\n<p>Where in this example, I try and create a ClinicNode called newNode. From there I try and access newNode's variables Info and Next, however the compiler points out that Info and Next are unresolved identifiers.</p>\n"}, {"tags": ["c++", "binaryfiles", "bitset"], "comments": [{"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 0, "creation_date": 1492040333, "post_id": 43381239, "comment_id": 73824651, "body": "what kind of error? You should be more clear and provide some additional details"}, {"owner": {"reputation": 11, "user_id": 7859161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd1c3422ed70a4e7591bffca54bd8b5d?s=128&d=identicon&r=PG&f=1", "display_name": "jack", "link": "https://stackoverflow.com/users/7859161/jack"}, "reply_to_user": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 0, "creation_date": 1492040459, "post_id": 43381239, "comment_id": 73824683, "body": "no operator &quot;=&quot; matches these operands operand types are: std::string = std::bitset&lt;12U&gt; this error"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1492040517, "post_id": 43381239, "comment_id": 73824700, "body": "<a href=\"http://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">why <code>while (!f.eof())</code> is wrong</a>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1492040542, "post_id": 43381239, "comment_id": 73824708, "body": "You can&#39;t assign to <code>str.c_str()</code>."}, {"owner": {"reputation": 11, "user_id": 7859161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd1c3422ed70a4e7591bffca54bd8b5d?s=128&d=identicon&r=PG&f=1", "display_name": "jack", "link": "https://stackoverflow.com/users/7859161/jack"}, "edited": false, "score": 0, "creation_date": 1492040624, "post_id": 43381239, "comment_id": 73824733, "body": "I changed it but still has same error"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1492040630, "post_id": 43381239, "comment_id": 73824734, "body": "What are you trying to do in the line <code>str.c_str() = string</code>? You&#39;ve never assigned anything to <code>string</code>, so why are you trying to assign that to <code>str.c_str()</code>?"}, {"owner": {"reputation": 11, "user_id": 7859161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd1c3422ed70a4e7591bffca54bd8b5d?s=128&d=identicon&r=PG&f=1", "display_name": "jack", "link": "https://stackoverflow.com/users/7859161/jack"}, "edited": false, "score": 0, "creation_date": 1492040688, "post_id": 43381239, "comment_id": 73824746, "body": "I just want to get a data from file and convert into binary and save into bitset&lt;12&gt; string"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1492040714, "post_id": 43381239, "comment_id": 73824751, "body": "So you need to loop through the contents of <code>str</code> and assign to the elements of <code>string</code>."}, {"owner": {"reputation": 11, "user_id": 7859161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd1c3422ed70a4e7591bffca54bd8b5d?s=128&d=identicon&r=PG&f=1", "display_name": "jack", "link": "https://stackoverflow.com/users/7859161/jack"}, "edited": false, "score": 0, "creation_date": 1492040764, "post_id": 43381239, "comment_id": 73824767, "body": "Yes!!That&#39;s what I want"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1492040849, "post_id": 43381239, "comment_id": 73824791, "body": "It&#39;s still unclear what you mean by converting to binary. Why are you using <code>bitset&lt;12&gt;</code>? Bytes are 8 bits, while Unicode characters can be multiple bytes. Why 12 bits in your bitset?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1492040889, "post_id": 43381239, "comment_id": 73824796, "body": "Does this help? <a href=\"http://stackoverflow.com/questions/23142363/convert-char-or-string-to-bitset-in-c\" title=\"convert char or string to bitset in c\">stackoverflow.com/questions/23142363/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 7859161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd1c3422ed70a4e7591bffca54bd8b5d?s=128&d=identicon&r=PG&f=1", "display_name": "jack", "link": "https://stackoverflow.com/users/7859161/jack"}, "edited": false, "score": 0, "creation_date": 1492040911, "post_id": 43381239, "comment_id": 73824801, "body": "Because my data must be &#39;000000000000&#39; in this form"}, {"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "edited": false, "score": 0, "creation_date": 1492043299, "post_id": 43381239, "comment_id": 73825393, "body": "That&#39;s why you should give meaningful names to your variables. Why do you have <code>str</code> and <code>string</code>? Call the bitset <code>bits</code> or something and then it becomes more clear - you&#39;re assigning the wrong way around and if you&#39;re trying to read a bitset then you&#39;ll need to use something like <code>bits = bitset&lt;12&gt;(str);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7859161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd1c3422ed70a4e7591bffca54bd8b5d?s=128&d=identicon&r=PG&f=1", "display_name": "jack", "link": "https://stackoverflow.com/users/7859161/jack"}, "edited": false, "score": 0, "creation_date": 1492080915, "post_id": 43381786, "comment_id": 73841415, "body": "Thanks! but  this line has some error std::bitset&lt;12&gt; bin_str[str.size()]; IntelliSense: function call must have a constant value in a constant expression How can fix this error?"}, {"owner": {"reputation": 11, "user_id": 7859161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd1c3422ed70a4e7591bffca54bd8b5d?s=128&d=identicon&r=PG&f=1", "display_name": "jack", "link": "https://stackoverflow.com/users/7859161/jack"}, "edited": false, "score": 0, "creation_date": 1492083550, "post_id": 43381786, "comment_id": 73843318, "body": "I also has this error when I run the code Unhandled exception at 0x0021BDBE in binaryFile.exe: 0xC0000005: Access violation reading location 0x000000B0."}, {"owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "reply_to_user": {"reputation": 11, "user_id": 7859161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd1c3422ed70a4e7591bffca54bd8b5d?s=128&d=identicon&r=PG&f=1", "display_name": "jack", "link": "https://stackoverflow.com/users/7859161/jack"}, "edited": false, "score": 0, "creation_date": 1492090126, "post_id": 43381786, "comment_id": 73848277, "body": "IntelliSense is probably just throwing a fit because std::bitset is a template so it thinks you&#39;re not making  an array but rather trying to use the birder like <code>std::birder&lt;variables_cant_be_in_templates&gt;</code> but the code works regardless and if you&#39;re getting an access violation that means that somewhere in the code something is trying to access restricted memory which means a pointer somewhere wasn&#39;t initialized or something like that. Do you mind compiling with &#39;-g&#39; and debugging the whole thing until you find the exact line that causes the problem"}, {"owner": {"reputation": 11, "user_id": 7859161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd1c3422ed70a4e7591bffca54bd8b5d?s=128&d=identicon&r=PG&f=1", "display_name": "jack", "link": "https://stackoverflow.com/users/7859161/jack"}, "edited": false, "score": 0, "creation_date": 1492097332, "post_id": 43381786, "comment_id": 73853520, "body": "Thanks again! I changed the code in my question but I can&#39;t get the proper result I think I&#39;m doing wrong in for loop but I don&#39;t know what is wrong. I&#39;d like to get the result for full word For example, fruit.txt has {apple, orange} so I want to get the binary for apple so it&#39;ll be bin_s[0] , bin_s[1] but the result of bin_s[0] and bin_s[1] is same.."}, {"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 1, "creation_date": 1492097839, "post_id": 43381786, "comment_id": 73853790, "body": "<code>std::bitset&lt;12&gt; bin_str[str.size()];</code> is using variable length arrays which is a C-language feature that&#39;s not supported by all C++ compilers. Something that you can do with standard C++ is <code>std::vector&lt;std::bitset&lt;12&gt;&gt; bin_str(str.size());</code>"}, {"owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "edited": false, "score": 0, "creation_date": 1492098642, "post_id": 43381786, "comment_id": 73854288, "body": "My bad, you&#39;re right, you could however make it a pointer and use new couldn&#39;t you."}, {"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 1, "creation_date": 1492099149, "post_id": 43381786, "comment_id": 73854592, "body": "yes <code>std::bitset&lt;12&gt;* bin_str = new std::bitset&lt;12&gt;[str.size()];</code> would be possible, but since you&#39;d have to manually delete that, I would prefer just the vector. But if you&#39;re hell-bend on the array but still want RAII you could also do <code>std::unique_ptr&lt;bitset&lt;12&gt;[]&gt; str_ptr (new bitset&lt;12&gt;[str.size()]);</code>"}, {"owner": {"reputation": 11, "user_id": 7859161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd1c3422ed70a4e7591bffca54bd8b5d?s=128&d=identicon&r=PG&f=1", "display_name": "jack", "link": "https://stackoverflow.com/users/7859161/jack"}, "edited": false, "score": 0, "creation_date": 1492172538, "post_id": 43381786, "comment_id": 73881636, "body": "I delete[] bin_str  but it has triggered a breakpoint. I put std::bitset&lt;12&gt;* bin_str= new std::bitset&lt;12&gt;[str.size()+1]; and bin_str[str.size()] = &#39;\\0&#39;;"}, {"owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "edited": false, "score": 0, "creation_date": 1492173085, "post_id": 43381786, "comment_id": 73881926, "body": "I don&#39;t think you need to null terminate it"}, {"owner": {"reputation": 11, "user_id": 7859161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd1c3422ed70a4e7591bffca54bd8b5d?s=128&d=identicon&r=PG&f=1", "display_name": "jack", "link": "https://stackoverflow.com/users/7859161/jack"}, "edited": false, "score": 0, "creation_date": 1492173326, "post_id": 43381786, "comment_id": 73882035, "body": "So, do you mean I do not use bin_set[str.size()]=&#39;\\0&#39;?"}, {"owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "edited": false, "score": 0, "creation_date": 1492173451, "post_id": 43381786, "comment_id": 73882077, "body": "Yeah since it&#39;s not a c-string or anything like that you don&#39;t necessarily need to null terminate it"}, {"owner": {"reputation": 11, "user_id": 7859161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd1c3422ed70a4e7591bffca54bd8b5d?s=128&d=identicon&r=PG&f=1", "display_name": "jack", "link": "https://stackoverflow.com/users/7859161/jack"}, "edited": false, "score": 0, "creation_date": 1492173662, "post_id": 43381786, "comment_id": 73882185, "body": "I&#39;ve get a error Unhandled exception at 0x000EDB35 in myprogram.exe: 0xC0000005: Access violation writing location 0xB1514C80. It was because of the memory allocation, but I have no idea."}, {"owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "edited": false, "score": 0, "creation_date": 1492173920, "post_id": 43381786, "comment_id": 73882322, "body": "Perhaps you could show me all of the code you have written so I can more understand how you&#39;re getting this error, preferably as an edit to the question"}, {"owner": {"reputation": 11, "user_id": 7859161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd1c3422ed70a4e7591bffca54bd8b5d?s=128&d=identicon&r=PG&f=1", "display_name": "jack", "link": "https://stackoverflow.com/users/7859161/jack"}, "edited": false, "score": 0, "creation_date": 1492174992, "post_id": 43381786, "comment_id": 73882839, "body": "I changed it on my question"}, {"owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "edited": false, "score": 0, "creation_date": 1492176533, "post_id": 43381786, "comment_id": 73883662, "body": "You&#39;re not accessing the bitset array correctly and you&#39;re not accessing temp_hash correctly either, they&#39;re arrays so everything in the square brackets is an index so if you put in 0 then you get the first element in it. Also I don&#39;t think you really want to make an array of 3000 bitsets, I suggest you rewrite all of that code, remember bitset takes a integer (or character) as input and turns that into binary, so if you want to turn a number into binary you only need one bitset"}, {"owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "reply_to_user": {"reputation": 11, "user_id": 7859161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd1c3422ed70a4e7591bffca54bd8b5d?s=128&d=identicon&r=PG&f=1", "display_name": "jack", "link": "https://stackoverflow.com/users/7859161/jack"}, "edited": false, "score": 0, "creation_date": 1492177132, "post_id": 43381786, "comment_id": 73884042, "body": "@jack Also I think you probably don&#39;t want to hash your strings, when you hash something you can&#39;t reverse that. If you&#39;re trying to write the string out to a file in a binary format follow my answer, if you&#39;re trying to do something else please explain"}], "tags": [], "owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "is_accepted": false, "score": 1, "last_activity_date": 1492099691, "last_edit_date": 1492099691, "creation_date": 1492044145, "answer_id": 43381786, "question_id": 43381239, "link": "https://stackoverflow.com/questions/43381239/read-string-from-file-and-turn-into-bitset12/43381786#43381786", "title": "read string from file and turn into bitset&lt;12&gt;", "body": "<p>Here is some code that I wrote that turns the input file <code>\"file.txt\"</code> into binary. It does this by taking the ascii value of each character and representing that number as a binary value, although I'm not sure how to write <code>bin_str</code> to a file here.</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;streambuf&gt;\n#include &lt;bitset&gt;\n#include &lt;iostream&gt;\n\nint main(){\n    std::ifstream f(\"file.txt\");\n    std::string str((std::istreambuf_iterator&lt;char&gt;(f)),\n                    std::istreambuf_iterator&lt;char&gt;());  // Load the file into the string\n    std::bitset&lt;12&gt; bin_str[str.size()]; // Create an array of std::bitset that is the size of the string\n\n    for (int i = 0; i &lt; str.size(); i++) {\n        bin_str[i] = std::bitset&lt;12&gt;((int) str[i]); // load the array\n        std::cout &lt;&lt; bin_str[i] &lt;&lt; std::endl; // print for checking\n    }\n}\n</code></pre>\n\n<h3>SIDE NOTE:</h3>\n\n<p><code>std::bitset&lt;12&gt;</code> may not be what you want, if you look at ascii characters the highest number you can have is 127 and in binary that's only 7 digits so I'd assume you'd want something more like <code>std::bitset&lt;7&gt;</code> or <code>std::bitset&lt;8&gt;</code></p>\n\nEDIT:\n\n<p>If you want to write it to a file you'll need to open a file with <code>std::ios::binary</code> and then loop through the array of bitsets and write their unsigned long representative, given from <code>to_ulong()</code>, as a const char pointer (<code>(const char*)&amp;ulong_bin</code>). Now when you open the file with a binary editor you will see the difference between the binary write and the regular write, but you'll notice that programs like <code>cat</code> can still decipher the binary you've written as simple ascii letters.</p>\n\n<pre><code>std::ofstream out(\"file.bin\", std::ios::binary);\nfor (int i = 0; i &lt; str.size(); i++) {\n    unsigned long ulong_bin = bin_str[i].to_ulong();\n    out.write((const char*)&amp;ulong_bin, sizeof(ulong_bin));\n}\n</code></pre>\n\n<p><strong>EDIT</strong>: Credit to @PeterT</p>\n\n<p>It has come to my attention that VLAs, variable length arrays, are not supported in C++11 and up so the line <code>std::bitset&lt;12&gt; bin_str[str.size()];</code> should be changed to one of the following:</p>\n\n<pre><code>std::bitset&lt;12&gt; *bin_str = new std::bitset&lt;12&gt;[str.size()]; // make sure you delete it later\n// OR\nstd::vector&lt;std::bitset&lt;12&gt;&gt; bin_str(str.size());\n// OR\nstd::unique_ptr&lt;std::bitset&lt;12&gt;[]&gt; str_ptr (new std::bitset&lt;12&gt;[str.size()]);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7859161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd1c3422ed70a4e7591bffca54bd8b5d?s=128&d=identicon&r=PG&f=1", "display_name": "jack", "link": "https://stackoverflow.com/users/7859161/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 853, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492174968, "creation_date": 1492039950, "last_edit_date": 1492174968, "question_id": 43381239, "link": "https://stackoverflow.com/questions/43381239/read-string-from-file-and-turn-into-bitset12", "title": "read string from file and turn into bitset&lt;12&gt;", "body": "<p>Hi I'm trying to read string from txt file and transform it into binary file which is bitset&lt;12> string form.</p>\n\n<pre><code>int main()\n{\nusing namespace std;\n\nstd::ifstream f(\"fruit.txt\");\nstd::ofstream out(\"result.txt\");\n\nstd::hash&lt;std::string&gt;hash_fn;\n\nint words_in_file = 0;\nstd::string str;\nwhile (f &gt;&gt; str){\n    ++words_in_file;\n    std::bitset&lt;12&gt;* bin_str = new std::bitset&lt;12&gt;[3000];\n    int temp_hash[sizeof(f)];\n    std::size_t str_hash = hash_fn(str);\n    temp_hash[words_in_file] = (unsigned int)str_hash;\n    bin_str[words_in_file] = std::bitset&lt;12&gt;((unsigned int)temp_hash[words_in_file]);\n    out &lt;&lt; bin_str[words_in_file] &lt;&lt; endl;\n    delete[] bin_str;\n}\nout.close();\n}\n</code></pre>\n\n<p>but there is error. How can I change it?</p>\n"}, {"tags": ["c++", "sdl", "sdl-2"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7814385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3IhqGWYMXv8/AAAAAAAAAAI/AAAAAAAAAFQ/ppGpCUxBvhc/photo.jpg?sz=128", "display_name": "Slynch", "link": "https://stackoverflow.com/users/7814385/slynch"}, "is_accepted": true, "score": 0, "last_activity_date": 1494074341, "creation_date": 1494074341, "answer_id": 43820568, "question_id": 43381037, "link": "https://stackoverflow.com/questions/43381037/animated-transition-wipe-using-sdl2-and-black-white-mask/43820568#43820568", "title": "Animated transition/wipe using SDL2 and black/white mask?", "body": "<p>Arbitrarily came up with a solution. It's expensive, but works. By iterating through every pixel in the image and mapping the colour like so:</p>\n\n<pre><code>int tempAlpha = (int)alpha + (speed * 5) - (int)color;\nint tempColor = (int)color - speed;\n*pixel = SDL_MapRGBA(fmt,\n                (Uint8)tempColor,\n                (Uint8)tempColor,\n                (Uint8)tempColor,\n                (Uint8)tempAlpha\n            );\n</code></pre>\n\n<p>Where alpha is the current alpha of the pixel, speed is the parameterised speed of the animation, and color is the current color of the pixel. fmt is the SDL_PixelFormat of the image. This is for fading to black, the following is for fading in from black:</p>\n\n<pre><code>if ((255 - counter) &gt; origColor)\n                continue;\nint tempAlpha = alpha - speed*5;\n*pixel = SDL_MapRGBA(fmt,\n                (Uint8)0,\n                (Uint8)0,\n                (Uint8)0,\n                (Uint8)tempAlpha\n            );\n</code></pre>\n\n<p>Where origColor is the color of the pixel in the original grayscale image.</p>\n\n<p>I made a quick API to do all of this, so feel free to check it out: <a href=\"https://github.com/Slynchy/SDL-AlphaMaskWipes\" rel=\"nofollow noreferrer\">https://github.com/Slynchy/SDL-AlphaMaskWipes</a></p>\n"}], "owner": {"reputation": 1, "user_id": 7814385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3IhqGWYMXv8/AAAAAAAAAAI/AAAAAAAAAFQ/ppGpCUxBvhc/photo.jpg?sz=128", "display_name": "Slynch", "link": "https://stackoverflow.com/users/7814385/slynch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 546, "favorite_count": 0, "accepted_answer_id": 43820568, "answer_count": 1, "score": 0, "last_activity_date": 1494074341, "creation_date": 1492038560, "last_edit_date": 1492049948, "question_id": 43381037, "link": "https://stackoverflow.com/questions/43381037/animated-transition-wipe-using-sdl2-and-black-white-mask", "title": "Animated transition/wipe using SDL2 and black/white mask?", "body": "<p>I've been tearing my hair out over how to do this simple effect. I've got an image (see below), and when this image is used in a game, it produces a clockwise transition to black effect. I have been trying to recreate this effect in SDL(2) but to no avail. I know it's got something to do with masking but I've no idea how to do that in code.</p>\n\n<p>The closest I could get was by using \"SDL_SetColorKey\" and incrementing the RGB values so it would <em>not</em> draw the \"wiping\" part of the animation. </p>\n\n<pre><code>Uint32 colorkey = SDL_MapRGBA(blitSurf-&gt;format, \n    0xFF - counter, \n    0xFF - counter, \n    0xFF - counter, \n    0\n);\nSDL_SetColorKey(blitSurf, SDL_TRUE, colorkey);\n\n// Yes, I'm turning the surface into a texture every frame!\nSDL_DestroyTexture(streamTexture);\nstreamTexture = SDL_CreateTextureFromSurface(RENDERER, blitSurf);\n\nSDL_RenderCopy(RENDERER, streamTexture, NULL, NULL);\n</code></pre>\n\n<p>I've searched all over and am now just desperate for an answer for my own curiosity- and sanity! I guess this question isn't exactly specific to SDL; I just need to know how to think about this!</p>\n\n<p><img src=\"https://i.stack.imgur.com/PfTTo.png\" width=\"400\"/></p>\n"}, {"tags": ["c++", "memcpy", "shift"], "comments": [{"owner": {"reputation": 1015, "user_id": 7691497, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-46wzsjmiSDg/AAAAAAAAAAI/AAAAAAAAAAk/qjgRQMlHINA/photo.jpg?sz=128", "display_name": "Ben Steffan", "link": "https://stackoverflow.com/users/7691497/ben-steffan"}, "edited": false, "score": 0, "creation_date": 1492038668, "post_id": 43381034, "comment_id": 73824158, "body": "Did you consider the fact that <code>memcpy</code> is part of the standard library and probably not inlined? That means it&#39;s actual code is hidden away and doesn&#39;t affect your measured code size."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "reply_to_user": {"reputation": 1015, "user_id": 7691497, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-46wzsjmiSDg/AAAAAAAAAAI/AAAAAAAAAAk/qjgRQMlHINA/photo.jpg?sz=128", "display_name": "Ben Steffan", "link": "https://stackoverflow.com/users/7691497/ben-steffan"}, "edited": false, "score": 2, "creation_date": 1492038714, "post_id": 43381034, "comment_id": 73824166, "body": "@BenSteffan - On the contrary, it may be a compiler intrinsic and lead to heavily optimised code."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1492038983, "post_id": 43381034, "comment_id": 73824248, "body": "I&#39;d imagine that the use of a compiler intrinsic (<code>__builtin_bswap32</code>) is definitely helping here..."}, {"owner": {"reputation": 1015, "user_id": 7691497, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-46wzsjmiSDg/AAAAAAAAAAI/AAAAAAAAAAk/qjgRQMlHINA/photo.jpg?sz=128", "display_name": "Ben Steffan", "link": "https://stackoverflow.com/users/7691497/ben-steffan"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1492039188, "post_id": 43381034, "comment_id": 73824305, "body": "@OliverCharlesworth May, or may not. Until we know what compiler and what flags OP used, it&#39;s really anyone&#39;s guess."}, {"owner": {"reputation": 475, "user_id": 361190, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/Alc9X.jpg?s=128&g=1", "display_name": "MGH", "link": "https://stackoverflow.com/users/361190/mgh"}, "reply_to_user": {"reputation": 1015, "user_id": 7691497, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-46wzsjmiSDg/AAAAAAAAAAI/AAAAAAAAAAk/qjgRQMlHINA/photo.jpg?sz=128", "display_name": "Ben Steffan", "link": "https://stackoverflow.com/users/7691497/ben-steffan"}, "edited": false, "score": 0, "creation_date": 1492040414, "post_id": 43381034, "comment_id": 73824672, "body": "@Ben Steffan the <code>memcpy</code> is inlined. It reduces to just one instruction for a 4byte access a single <code>movl</code>. __builtin_bswap32 is just one instruction <code>bswap</code>. This is with g++ 4.9 on 64bit intel (sandy bridge) with <code>O2</code> optimization"}, {"owner": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "edited": false, "score": 0, "creation_date": 1492040445, "post_id": 43381034, "comment_id": 73824680, "body": "See what happens when you make <code>ExtractValue::get</code> static in the base specialization."}, {"owner": {"reputation": 475, "user_id": 361190, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/Alc9X.jpg?s=128&g=1", "display_name": "MGH", "link": "https://stackoverflow.com/users/361190/mgh"}, "reply_to_user": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "edited": false, "score": 0, "creation_date": 1492040799, "post_id": 43381034, "comment_id": 73824776, "body": "@Christopher Oicles It was actually a <code>static</code>. copy paste error corrected it."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1492041164, "post_id": 43381034, "comment_id": 73824872, "body": "These do different things depending on what T is , so you can&#39;t really compare them"}, {"owner": {"reputation": 1563, "user_id": 4556696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47b77fa3f6e3e71da089a1dead131a3a?s=128&d=identicon&r=PG&f=1", "display_name": "dimm", "link": "https://stackoverflow.com/users/4556696/dimm"}, "edited": false, "score": 0, "creation_date": 1492042618, "post_id": 43381034, "comment_id": 73825238, "body": "From what I see you want to read the byte sequence as big endian integer. The second version assumes that the integer <code>T t</code> is little endian, which is not true for some platforms."}, {"owner": {"reputation": 475, "user_id": 361190, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/Alc9X.jpg?s=128&g=1", "display_name": "MGH", "link": "https://stackoverflow.com/users/361190/mgh"}, "reply_to_user": {"reputation": 1563, "user_id": 4556696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47b77fa3f6e3e71da089a1dead131a3a?s=128&d=identicon&r=PG&f=1", "display_name": "dimm", "link": "https://stackoverflow.com/users/4556696/dimm"}, "edited": false, "score": 0, "creation_date": 1492065506, "post_id": 43381034, "comment_id": 73831812, "body": "@dimm yeah for big endian processors , we can hide the bswap behind a macro."}], "owner": {"reputation": 475, "user_id": 361190, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/Alc9X.jpg?s=128&g=1", "display_name": "MGH", "link": "https://stackoverflow.com/users/361190/mgh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1492040687, "creation_date": 1492038526, "last_edit_date": 1492040687, "question_id": 43381034, "link": "https://stackoverflow.com/questions/43381034/unaligned-read-memcpy-generates-better-code-than-shift", "title": "Unaligned read : memcpy generates better code than shift", "body": "<p>I was writing some function to read 2,4,8 bytes from a unaligned byte array:</p>\n\n<p>I had 2 versions.</p>\n\n<p>1: access byte by byte and then shift</p>\n\n<pre><code>template &lt;typename T, size_t val = sizeof(T)&gt;\nstruct ExtractValue {\n    // for non pointer types\n    static T get (const uint8_t  *p)\n    {\n        return (ExtractValue&lt;T, val - 1&gt;::get(p) &lt;&lt; 8) |\n                static_cast&lt;T&gt;(p[val - 1]);\n    }\n};\n\n// ignore, Just to terminate the above template recursion\ntemplate &lt;typename T&gt;\nstruct ExtractValue&lt;T, 0&gt; {\n    static T get (const uint8_t *p)\n    {\n        return 0;\n    }\n};\n</code></pre>\n\n<p>version 2: use memcpy:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct ExtractValueI&lt;T, 4&gt; {\n    static T get (const uint8_t *p)\n    {\n        T t;\n        memcpy(&amp;t, p, sizeof(T));\n        return __builtin_bswap32(t);\n    }\n};\n</code></pre>\n\n<p>Looking at the assembly code generated. Actually the memcpy version has much less instructions - 40% less instruction than the shift version. The memcpy seems to faster? So is the second approach the best always?</p>\n"}, {"tags": ["c++", "casablanca", "cpprest-sdk"], "comments": [{"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1492040724, "post_id": 43381023, "comment_id": 73824758, "body": "The <a href=\"http://microsoft.github.io/cpprestsdk/classweb_1_1http_1_1client_1_1http__client.html\" rel=\"nofollow noreferrer\">number of overloads</a> of <code>client::request</code> is bewildering, but at a guess, you need to pass a path before the json data. What did you pass to the <code>http_client</code> when you created it? perhaps you need to split the path out of that, just leaving the host name and pass the path to <code>client::request</code>?"}, {"owner": {"reputation": 21, "user_id": 7346937, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CL9JDyBKLxo/AAAAAAAAAAI/AAAAAAAAABY/ilSyaECiM1s/photo.jpg?sz=128", "display_name": "Mohammad Alhowaidi", "link": "https://stackoverflow.com/users/7346937/mohammad-alhowaidi"}, "reply_to_user": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1492103748, "post_id": 43381023, "comment_id": 73857105, "body": "@PaulRooney I created the client as following: http_client client(U(&quot;<a href=\"http://l0.71.103.63:34568&quot;\" rel=\"nofollow noreferrer\">l0.71.103.63:34568&quot;</a>));"}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1492132836, "post_id": 43381023, "comment_id": 73868411, "body": "What is the resource you are trying to post to? Can you do it with curl or with any other languages (e.g. Python requests)?  You could try a resource of <code>&quot;&#47;&quot;</code> but that seems weird."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6418134"}, "is_accepted": false, "score": 0, "last_activity_date": 1492592413, "creation_date": 1492592413, "answer_id": 43491039, "question_id": 43381023, "link": "https://stackoverflow.com/questions/43381023/sending-post-using-cpprest/43491039#43491039", "title": "Sending POST using cpprest", "body": "<p>You are wrong (I do think) in your request, should look like that:</p>\n\n<blockquote>\n  <p>auto response = client.request(methods::POST, U(\"\\\"), postData).get();</p>\n</blockquote>\n\n<p>The second argument in the request is the URL complement, and you are passing your json in string, hence the error you have. <BR>\nbasically the syntax you want is this <a href=\"http://microsoft.github.io/cpprestsdk/classweb_1_1http_1_1client_1_1http__client.html#abbdc23648483780a7cc898bbdd306211\" rel=\"nofollow noreferrer\">one</a>:</p>\n\n<blockquote>\n  <p>pplx::task web::http::client::http_client::request     (\n    const method &amp;      mtd,        const utility::string_t &amp; \n    path_query_fragment,        const json::value &amp;     body_data,      const\n  pplx::cancellation_token &amp;    token = pplx::cancellation_token::none() \n    )</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 6583, "user_id": 2015023, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b436c40d6ac76cd76ce05aadb9fbebcf?s=128&d=identicon&r=PG", "display_name": "Mobile Ben", "link": "https://stackoverflow.com/users/2015023/mobile-ben"}, "is_accepted": false, "score": 3, "last_activity_date": 1493582921, "creation_date": 1493582921, "answer_id": 43710830, "question_id": 43381023, "link": "https://stackoverflow.com/questions/43381023/sending-post-using-cpprest/43710830#43710830", "title": "Sending POST using cpprest", "body": "<p>I think the problem is your IP address. It looks like your IP address is wrong? You have \"<a href=\"http://l0\" rel=\"nofollow noreferrer\">http://l0</a>.\" where the \"<strong>1</strong>0\" is \"<strong>l</strong>0\" (lowercase L).</p>\n\n<p>Hence the web:uri_exception.</p>\n"}], "owner": {"reputation": 21, "user_id": 7346937, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CL9JDyBKLxo/AAAAAAAAAAI/AAAAAAAAABY/ilSyaECiM1s/photo.jpg?sz=128", "display_name": "Mohammad Alhowaidi", "link": "https://stackoverflow.com/users/7346937/mohammad-alhowaidi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3612, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1493582921, "creation_date": 1492038465, "last_edit_date": 1492103920, "question_id": 43381023, "link": "https://stackoverflow.com/questions/43381023/sending-post-using-cpprest", "title": "Sending POST using cpprest", "body": "<p>I have the following code to send POST, but I am getting an error with that even it compile correctly </p>\n\n<pre><code>http_client client(U(\"http://l0.71.103.63:34568\"));\njson::value postData;\npostData[\"name\"] = json::value::string(U(\"Mohammad\"));\n\nhttp_response response = client.request(methods::POST,postData.to_string().c_str()).get();\n\nif(response.status_code() == status_codes::OK)\n{\n  auto body = response.extract_string();\n  std::wcout &lt;&lt; L\"Added new Id: \" &lt;&lt; body.get().c_str() &lt;&lt; std::endl;\n\n  return std::stoi(body.get().c_str());\n}\n</code></pre>\n\n<p>But I am getting the following error when try to run the program</p>\n\n<pre><code>terminate called after throwing an instance of 'web::uri_exception'\nwhat():  provided uri is invalid: {\"name\":\"Mohammad\"}\nAborted (core dumped)\n</code></pre>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 3, "creation_date": 1492038145, "post_id": 43380933, "comment_id": 73824012, "body": "<code>&quot;\\\\t&quot;</code> is the two characters backslash and t.  <code>&quot;\\t&quot;</code> is the single character horizontal tab."}], "answers": [{"tags": [], "owner": {"reputation": 602, "user_id": 7072727, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9636cb05bd2854648fe5b1e6d069bbd0?s=128&d=identicon&r=PG&f=1", "display_name": "Dustin Nieffenegger", "link": "https://stackoverflow.com/users/7072727/dustin-nieffenegger"}, "is_accepted": false, "score": 0, "last_activity_date": 1492041516, "last_edit_date": 1492041516, "creation_date": 1492040850, "answer_id": 43381370, "question_id": 43380933, "link": "https://stackoverflow.com/questions/43380933/c-separating-a-char-with-t-delimiter/43381370#43381370", "title": "C++: Separating a char* with &#39;\\t&#39; delimiter", "body": "<p>I would try to make things a little simpler by sticking to <code>std::</code> functions. (p.s. you never use this: <code>std::string ss;</code>)</p>\n\n<p>Why not do something like this?</p>\n\n<p>Method 1: <code>std::istringstream</code></p>\n\n<pre><code>std::istringstream ss(read_msg_.data());\nstd::string line;\nwhile( std::getline(ss,line,ss.widen('\\t')) )\n    std::cout &lt;&lt; line &lt;&lt; std::endl;\n</code></pre>\n\n<p>Method 2: <code>std::string::substr</code> (my preferred method as it is lighter)</p>\n\n<pre><code>std::string data(read_msg_.data());\nstd::size_t SPLITSTART(0); // signifies the start of the cell\nstd::size_t SPLITEND(0);   // signifies the end of the cell\nwhile( SPLITEND != std::string::npos ) {\n    SPLITEND = data.find('\\t',SPLITSTART);\n    // SPLITEND-SPLITSTART signifies the size of the string\n    std::cout &lt;&lt; data.substr(SPLITSTART,SPLITEND-SPLITSTART) &lt;&lt; std::endl;\n    SPLITSTART = SPLITEND+1;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7859085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad8a60cc119b7e53298ff6e545258042?s=128&d=identicon&r=PG&f=1", "display_name": "Boscodo", "link": "https://stackoverflow.com/users/7859085/boscodo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492041516, "creation_date": 1492037935, "question_id": 43380933, "link": "https://stackoverflow.com/questions/43380933/c-separating-a-char-with-t-delimiter", "title": "C++: Separating a char* with &#39;\\t&#39; delimiter", "body": "<p>I've been fighting this problem for a while now, and can't seem to find a simple solution that doesn't involve parsing a char * by hand. I need to split my char* variable by '\\t', and I've tried the following ways:</p>\n\n<p>Method 1:</p>\n\n<pre><code>  char *splitentry;\n  std::string ss;\n\n  splitentry = strtok(read_msg_.data(), \"\\\\t\");\n  while(splitentry != NULL)\n  {\n    std::cout &lt;&lt; splitentry &lt;&lt; std::endl;\n    splitentry = strtok(NULL, \"\\\\t\");\n  }\n</code></pre>\n\n<p>Using the input '\\tthis\\tis\\ta\\ttest'\nresults in this output:</p>\n\n<pre><code>his\nis\na\nes\n</code></pre>\n\n<p>Method 2:</p>\n\n<pre><code>std::string s(read_msg_.data());\n\nboost::algorithm::split(strs, s, boost::is_any_of(\"\\\\t\");\nfor (int i = 0; i &lt; strs.size(); i++)\n  std::cout &lt;&lt; strs.at(i) &lt;&lt; std::endl;\n</code></pre>\n\n<p>Which creates an identical output.\nI've tried using boost::split_regex and used \"\\\\t\" as my regex value, but nothing gets split. Will I have to split it on my own, or am I going about this incorrectly? </p>\n"}, {"tags": ["c++", "c++11", "visual-c++", "hash", "std-pair"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1492038005, "post_id": 43380910, "comment_id": 73823979, "body": "Did you <code>#include &lt;vector&gt;</code>, <code>&lt;forward_list&gt;</code>, <code>&lt;utility&gt;</code>, and <code>&lt;string&gt;</code>?"}, {"owner": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "edited": false, "score": 0, "creation_date": 1492038150, "post_id": 43380910, "comment_id": 73824016, "body": "Cannot reproduce, works for me in GCC locally and on <a href=\"https://godbolt.org/g/gyADCu\" rel=\"nofollow noreferrer\">godbolt.org/g/gyADCu</a>"}, {"owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "edited": false, "score": 0, "creation_date": 1492038252, "post_id": 43380910, "comment_id": 73824048, "body": "I did; except that I used <code>#include &lt;tuple&gt;</code> instead of <code>#include &lt;utility&gt;</code>, which contains the std::pair library That being said, I changed it to &lt;utility&gt;, but get the same error."}, {"owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "edited": false, "score": 0, "creation_date": 1492038400, "post_id": 43380910, "comment_id": 73824096, "body": "I will post the whole program"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1492038699, "post_id": 43380910, "comment_id": 73824163, "body": "&quot;entire program&quot; &quot;full program&quot; no, post your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. You should know this by now"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1492040332, "post_id": 43380910, "comment_id": 73824650, "body": "Same issue as <a href=\"http://stackoverflow.com/questions/42856445/in-class-non-static-member-initialization-via-stdis-convertible-fails-in-gcc\" title=\"in class non static member initialization via stdis convertible fails in gcc\">stackoverflow.com/questions/42856445/&hellip;</a>. Default member initializers are tricky to parse when they have angle brackets and commas in them. Workaround is to parenthesize the whole expression."}], "answers": [{"tags": [], "owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "is_accepted": false, "score": 0, "last_activity_date": 1492039483, "creation_date": 1492039483, "answer_id": 43381180, "question_id": 43380910, "link": "https://stackoverflow.com/questions/43380910/error-from-gnu-compiler-when-creating-vector-of-linked-lists-of-pairs-invalid-u/43381180#43381180", "title": "Error from Gnu compiler when creating vector of linked lists of pairs: invalid use of &#39;::&#39;", "body": "<p>Aargh, I got it.</p>\n\n<p>In the line posted, I inadvertently assigned a value in the Class definition. It needs to be done in the constructor, when the object is created, like so: specifically:</p>\n\n<pre><code>HashTable() {\n    table_ = std::vector&lt;std::forward_list&lt;std::pair&lt;int, std::string&gt;&gt;&gt;(HASHSIZE);\n}\n</code></pre>\n"}], "owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492039483, "creation_date": 1492037746, "last_edit_date": 1492038992, "question_id": 43380910, "link": "https://stackoverflow.com/questions/43380910/error-from-gnu-compiler-when-creating-vector-of-linked-lists-of-pairs-invalid-u", "title": "Error from Gnu compiler when creating vector of linked lists of pairs: invalid use of &#39;::&#39;", "body": "<p>I'm creating a hash table, setting up an <code>array</code> of <code>forward lists</code> of <code>pairs</code> to hold the data.</p>\n\n<p>In C++ terms declaring an <code>std::vector</code> of <code>std::forward_list</code> of <code>std::pair</code>, as follows:</p>\n\n<pre><code>std::vector&lt;std::forward_list&lt;std::pair&lt;int, std::string&gt;&gt;&gt; table_ = std::vector&lt;std::forward_list&lt;std::pair&lt;int, std::string&gt;&gt;&gt;(HASHSIZE);\n</code></pre>\n\n<p>(EDIT: Complete example posted below)</p>\n\n<p>The line above compiles in both Visual Studio and Xcode, but the Gnu compiler throws the following error. Any ideas? Thx. Keith  :^)</p>\n\n<pre><code>[~/pickledEgg] $ g++ -std=c++11 main.cpp -o hash\nmain.cpp:39:122: error: invalid use of \u2018::\u2019\n   std::vector&lt;std::forward_list&lt;std::pair&lt;int, std::string&gt;&gt;&gt; table_ = std::vector&lt;std::forward_list&lt;std::pair&lt;int, std::string&gt;&gt;&gt;(HASHSIZE);\n                                                                                                                          ^\nmain.cpp:39:122: error: expected \u2018;\u2019 at end of member declaration\nmain.cpp:39:128: error: expected unqualified-id before \u2018&gt;&gt;\u2019 token\n   std::vector&lt;std::forward_list&lt;std::pair&lt;int, std::string&gt;&gt;&gt; table_ = std::vector&lt;std::forward_list&lt;std::pair&lt;int, std::string&gt;&gt;&gt;(HASHSIZE);\n                                                                                                                                ^\nmain.cpp:39:112: error: wrong number of template arguments (1, should be 2)\n   std::vector&lt;std::forward_list&lt;std::pair&lt;int, std::string&gt;&gt;&gt; table_ = std::vector&lt;std::forward_list&lt;std::pair&lt;int, std::string&gt;&gt;&gt;(HASHSIZE);\n                                                                                                                ^\nIn file included from /usr/include/c++/4.8.2/bits/stl_algobase.h:64:0,\n                 from /usr/include/c++/4.8.2/bits/char_traits.h:39,\n                 from /usr/include/c++/4.8.2/ios:40,\n                 from /usr/include/c++/4.8.2/ostream:38,\n                 from /usr/include/c++/4.8.2/iostream:39,\n                 from main.cpp:1:\n/usr/include/c++/4.8.2/bits/stl_pair.h:96:12: error: provided for \u2018template&lt;class _T1, class _T2&gt; struct std::pair\u2019\n     struct pair\n            ^\nmain.cpp:39:107: error: template argument 1 is invalid\n   std::vector&lt;std::forward_list&lt;std::pair&lt;int, std::string&gt;&gt;&gt; table_ = std::vector&lt;std::forward_list&lt;std::pair&lt;int, std::string&gt;&gt;&gt;(HASHSIZE);\n                                                                                                           ^\nmain.cpp:39:107: error: template argument 2 is invalid\nmain.cpp:39:89: error: template argument 1 is invalid\n   std::vector&lt;std::forward_list&lt;std::pair&lt;int, std::string&gt;&gt;&gt; table_ = std::vector&lt;std::forward_list&lt;std::pair&lt;int, std::string&gt;&gt;&gt;(HASHSIZE);\n                                                                                         ^\nmain.cpp:39:89: error: template argument 2 is invalid\n[~/QuickBase] $ \n</code></pre>\n\n<p><strong>COMPLETE EXAMPLE</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;forward_list&gt;\n#include &lt;utility&gt;\n#include &lt;chrono&gt;\n\nnamespace qb {\n\n    const int HASHSIZE{ 7 };\n\n    class HashTable {\n    public:\n        bool insert(int key, std::string value) {\n            if (get(key) == \"\") { // Duplicate handling: ignore if exists\n                std::pair&lt;int, std::string&gt; myPair(key, value);\n                int hashedKey = hash_(key);\n                it_ = table_[hashedKey].before_begin();\n                table_[hashedKey].emplace_after(it_, myPair);\n            }\n            return true;\n        }\n        std::string get(int key) {\n            for (it_ = table_[hash_(key)].begin(); it_ != table_[hash_(key)].end(); ++it_)\n                if (it_-&gt;first == key)\n                    return it_-&gt;second;\n            return \"\";\n        };\n        void print() {\n            for (int i = 0; i &lt; HASHSIZE; ++i) {\n                std::cout &lt;&lt; \"BUCKET \" &lt;&lt; i &lt;&lt; \": \";\n                for (it_ = table_[i].begin(); it_ != table_[i].end(); ++it_)\n                    std::cout &lt;&lt; \"[\" &lt;&lt; it_-&gt;first &lt;&lt; \", \" &lt;&lt; it_-&gt;second &lt;&lt; \"]\" &lt;&lt; \" --&gt; \";\n                std::cout &lt;&lt; \"NULL\" &lt;&lt; std::endl;\n            }\n        }\n    private:\n        std::vector&lt;std::forward_list&lt;std::pair&lt;int, std::string&gt;&gt;&gt; table_ = std::vector&lt;std::forward_list&lt;std::pair&lt;int, std::string&gt;&gt;&gt;(HASHSIZE);\n        std::forward_list&lt;std::pair&lt;int, std::string&gt;&gt;::iterator it_;\n\n        // Hashing function\n        int hash_(int key) {\n            return (key % HASHSIZE);\n        }\n    };\n}\n\nint main() {\n    qb::HashTable h;\n\n    std::cout &lt;&lt; \"Buckets: \" &lt;&lt; qb::HASHSIZE &lt;&lt; std::endl &lt;&lt; std::endl;\n\n    // Insertion\n    std::wcout &lt;&lt; \"INSERTION\" &lt;&lt; std::endl &lt;&lt; std::endl;\n    h.insert(42, \"beta\");\n    h.insert(0, \"gamma\");\n    h.insert(32767, \"delta\");\n    h.insert(29, \"epsilon\");\n    h.insert(123, \"zeta\");\n    h.insert(74, \"heta\");\n    h.insert(1, \"theta\");\n    h.insert(42, \"iota\");\n    h.insert(33, \"kappa\");\n    h.insert(947, \"lambda\");\n    h.insert(10225, \"mu\");\n    h.print();\n    std::cout &lt;&lt; std::endl;\n\n    // Retrieval\n    std::wcout &lt;&lt; \"RETRIEVAL\" &lt;&lt; std::endl &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Get 29: \" &lt;&lt; h.get(29) &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Get 34: \" &lt;&lt; h.get(34) &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Get 10225: \" &lt;&lt; h.get(10225) &lt;&lt; std::endl;\n    std::cout &lt;&lt; std::endl;\n\n    std::cout &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Enter 'e' and press Enter to end: \";\n    std::cin.get();\n    std::cout &lt;&lt; \"\\n\\n\";\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1492037845, "post_id": 43380907, "comment_id": 73823937, "body": "You&#39;re trying to print the result of calling the function."}], "answers": [{"tags": [], "owner": {"reputation": 70803, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "is_accepted": false, "score": 3, "last_activity_date": 1492038414, "last_edit_date": 1492038414, "creation_date": 1492037957, "answer_id": 43380943, "question_id": 43380907, "link": "https://stackoverflow.com/questions/43380907/c-void-function-exercise-error/43380943#43380943", "title": "C++ void function exercise error", "body": "<p>A void function cannot directly return a value.  Most people would use a non-void function to implement squaring, like this:</p>\n\n<pre><code>int square(int x)\n{\n  return x * x;\n}\n</code></pre>\n\n<p>I see that your <code>square</code> function writes the squared value to <code>std::cout</code> itself.  That is odd, but if you really want to do it that way, you should replace the last line of the <code>main</code> function with:</p>\n\n<pre><code>cout &lt;&lt; x &lt;&lt; 't';\nsquare(x);\n</code></pre>\n\n<p>You cannot typically use the result of a void function in an expression, which is the problem with your original code.</p>\n"}, {"tags": [], "owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "is_accepted": false, "score": 0, "last_activity_date": 1492038013, "creation_date": 1492038013, "answer_id": 43380952, "question_id": 43380907, "link": "https://stackoverflow.com/questions/43380907/c-void-function-exercise-error/43380952#43380952", "title": "C++ void function exercise error", "body": "<p><code>square()</code> is void - i.e. it does not return anything.</p>\n\n<p><code>cout &lt;&lt; x &lt;&lt; 't' &lt;&lt; square(x);</code> tries to print the return value of <code>square()</code> (which we've already said doesn't exist). This makes no sense so the compiler complains.</p>\n\n<p>What you want to do is make <code>square</code> return an int rather than print it.</p>\n\n<pre><code>int square(int x)\n{\n    return  x*x;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 7859047, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wlr6d.jpg?s=128&g=1", "display_name": "Alto", "link": "https://stackoverflow.com/users/7859047/alto"}, "is_accepted": false, "score": 0, "last_activity_date": 1492038505, "creation_date": 1492038505, "answer_id": 43381030, "question_id": 43380907, "link": "https://stackoverflow.com/questions/43380907/c-void-function-exercise-error/43381030#43381030", "title": "C++ void function exercise error", "body": "<p>I guess changing the return type will make the error vanish. The compiler error is because of no overloaded version of &lt;&lt; which takes in void as a parameter,as your function is (erroneously) telling the compiler.</p>\n"}], "owner": {"reputation": 61, "user_id": 7644360, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3e2c8ac87e67fb16e199dc658be5336b?s=128&d=identicon&r=PG&f=1", "display_name": "KDX", "link": "https://stackoverflow.com/users/7644360/kdx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1492055100, "creation_date": 1492037714, "last_edit_date": 1492055100, "question_id": 43380907, "link": "https://stackoverflow.com/questions/43380907/c-void-function-exercise-error", "title": "C++ void function exercise error", "body": "<p>I'm new to C++ and I am currently learning void functions.\nI am trying to write a function that squares a number, using a void function. Here is my code. </p>\n\n<pre><code>#include \"std_lib_facilities.h\"\n\nvoid square(int);\n\nint main()\n{\nint x = 0;\ncout &lt;&lt; \"Please enter a number. It will be squared.\";\ncin &gt;&gt; x;\ncout &lt;&lt; x &lt;&lt; 't' &lt;&lt; square(x);\n}\n\nvoid square(int x)\n{\nint y = x*x;\ncout &lt;&lt; y;\n}\n</code></pre>\n\n<p>The error the IDE gives me is: </p>\n\n<pre><code> no match for 'operator&lt;&lt;' (operand types that are 'std::basic_ostream&lt;char&gt;' \nand 'void')\n</code></pre>\n\n<p>Speaking from experience, many people will ask about the header file <code>std_lib_facilities.h</code>, that is not the problem. I am able to say that because I did many exercises using this header file and they all worked.</p>\n\n<p>Thank you for your help in advance!</p>\n"}, {"tags": ["c++", "utf-8", "character-encoding"], "comments": [{"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 2, "creation_date": 1492037030, "post_id": 43380761, "comment_id": 73823705, "body": "Uhh, <code>wchar_t</code> doesn&#39;t magically convert anything.  It&#39;s not even standard -- it&#39;s a hack.  Use properly sized character types, e.g. <code>char16_t</code> or <code>char32_t</code> if you&#39;re decoding UTF-8 into wider characters.  As for your question, you haven&#39;t said what is not working, and you don&#39;t show what datatype <code>c</code> is.  Did you mean to be testing the value of <code>in</code> (which you read in the loop) instead of <code>c</code>?  Have you tried stepping through your code with a debugger?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1492037121, "post_id": 43380761, "comment_id": 73823738, "body": "Can you be more clear about what you are encoding/decoding <code>UTF-8</code> into/from?"}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1492037337, "post_id": 43380761, "comment_id": 73823801, "body": "Also, since you are wishing to reimplement rather than use standard functions, you&#39;d better <a href=\"http://www.unicode.org/versions/Unicode9.0.0/UnicodeStandard-9.0.pdf\" rel=\"nofollow noreferrer\">read the Unicode Standard</a>.  Version 9.0.0 is only 1036 pages.  Enjoy!"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1492037449, "post_id": 43380761, "comment_id": 73823831, "body": "Btw, C++14 allows binary literals like <code>0b11000000</code> in the code directly. It also allows <code>0b1100&#39;0000</code> to separate digits."}, {"owner": {"reputation": 3, "user_id": 7858945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daa380ee5cdaba1d880184b6f2b02388?s=128&d=identicon&r=PG&f=1", "display_name": "Desky", "link": "https://stackoverflow.com/users/7858945/desky"}, "edited": false, "score": 0, "creation_date": 1492040729, "post_id": 43380761, "comment_id": 73824760, "body": "Yes, sorry c is in and length is sz  I&#39;ve edited the OP to reflect."}, {"owner": {"reputation": 3, "user_id": 7858945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daa380ee5cdaba1d880184b6f2b02388?s=128&d=identicon&r=PG&f=1", "display_name": "Desky", "link": "https://stackoverflow.com/users/7858945/desky"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1492041399, "post_id": 43380761, "comment_id": 73824933, "body": "@Galik - I am trying to translate UTF-8 bytes to a single int"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1492041997, "post_id": 43380761, "comment_id": 73825081, "body": "@Desky So <code>UTF-32</code> in a <code>char32_t</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "is_accepted": true, "score": 0, "last_activity_date": 1492038897, "creation_date": 1492038897, "answer_id": 43381086, "question_id": 43380761, "link": "https://stackoverflow.com/questions/43380761/how-to-decode-encode-a-utf-8-char-in-c-without-wchar-t/43381086#43381086", "title": "How to decode/encode a UTF-8 char in c++ without wchar_t", "body": "<p>It appears that you're testing the wrong value.  Your loop is reading into the value <code>in</code>, but you are testing against some value named <code>c</code>.</p>\n\n<p>When you read in additional characters, you're also going about it wrong.  You're using some value <code>length</code> instead of presumably <code>sz</code>.  And you're adding characters to an integer (which is not necessarily 32-bits by the way) instead of shifting and combining with bitwise OR.</p>\n\n<p>Those are weird mistakes.  Perhaps you didn't paste your <em>real</em> code in the question, or you actually have these values lying around in scope of your function.</p>\n\n<p>I would also suggest rearranging your branching, which is a bit obtuse.  The rule, according to your code is:</p>\n\n<pre><code>mask     |   sz\n---------+-------\n0xxxxxxx | 1\n10xxxxxx | 1\n110xxxxx | 2\n1110xxxx | 3\n1111xxxx | 4\n</code></pre>\n\n<p>You could define a simple table to select a size based on the upper 4 bits.</p>\n\n<pre><code>int sizes[16];\nstd::fill( sizes, sizes+16, 1 );\nsizes[0xc] = 2;\nsizes[0xd] = 2;\nsizes[0xe] = 3;\nsizes[0xf] = 4;\n</code></pre>\n\n<p>In your loop, let's fix the <code>c</code> and <code>length</code> things, use the size table to avoid silly branching, use <code>istream::get</code> instead of the stream input operator (<code>&gt;&gt;</code>), and combine the characters into a single value in a more normal way.</p>\n\n<pre><code>for( char c; ifs.get(c); )\n{\n    // Select correct character size (bytes)\n    int sz = sizes[static_cast&lt;unsigned char&gt;(c) &gt;&gt; 4];\n\n    // Construct character\n    char32_t val = c;\n    while( --sz &gt; 0 &amp;&amp; ifs.get(c) )\n    {\n        val = (val &lt;&lt; 8) | (static_cast&lt;char32_t&gt;(c) &amp; 0xff);\n    }\n\n    // Output character value in hex, unless error.\n    if( ifs )\n    {\n        std::cout &lt;&lt; std::hex &lt;&lt; std::fill('0') &lt;&lt; std::setw(8) &lt;&lt; val &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>Now, this last part concatenates the bytes in big-endian order.  I don't know if this is correct, as I haven't read the standard.  But it's much more correct than just adding values together.  It also uses a guaranteed 32-bit datatype, unlike the <code>unsigned int</code> you used.</p>\n"}], "owner": {"reputation": 3, "user_id": 7858945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daa380ee5cdaba1d880184b6f2b02388?s=128&d=identicon&r=PG&f=1", "display_name": "Desky", "link": "https://stackoverflow.com/users/7858945/desky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1333, "favorite_count": 0, "accepted_answer_id": 43381086, "answer_count": 1, "score": 0, "last_activity_date": 1492041061, "creation_date": 1492036781, "last_edit_date": 1492041061, "question_id": 43380761, "link": "https://stackoverflow.com/questions/43380761/how-to-decode-encode-a-utf-8-char-in-c-without-wchar-t", "title": "How to decode/encode a UTF-8 char in c++ without wchar_t", "body": "<p>As the title states, I am attempting to decode/encode UTF-8 characters to a char, but I want to do it without using wchar_t or the like. I want to do the leg work myself. This way I know that I understand it, which I obviously don't or it would be working. I've spent about a week toying with it and am just not making progress. </p>\n\n<p>I have tried several ways, yet always seem to produce incorrect results. My latest attempt:</p>\n\n<pre><code>ifstream ifs(FILENAME);\n    if(!ifs) {\n        cerr &lt;&lt; \"Open: \" &lt;&lt; FILENAME &lt;&lt; \"\\n\";\n        exit(1);\n    }\n\n    char in;\n\n    while (ifs &gt;&gt; std::noskipws &gt;&gt; in) {\n        int sz = 1;\n        if ((in &amp; 0xc0) == 0xc0) //0xc0 = 0b11000000\n        {\n                sz++;\n                if((in &amp; 0xE0) == 0xE0) //0xE0 = 0b11100000\n                {\n                    sz++;   \n                    if((in &amp; 0xF0) == 0xF0) //0xF0 = 0b11110000\n                        sz++;   \n                }\n        }\n        cout &lt;&lt; sz &lt;&lt; endl;\n\nunsigned int a = in;\n    for(int i = 1; i &lt; sz; i++) {\n        ifs &gt;&gt; in;\n        a += in;\n    }\n</code></pre>\n\n<p>Why do this code not work? I simply do not understand.  </p>\n\n<p>EDIT: Copy+Paste spaghetti...two different var names </p>\n"}, {"tags": ["c++", "voice-recognition", "ros", "pocketsphinx", "festival"], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 2127691, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5c0b0054d825ad4ed9ab1e916fa4588f?s=128&d=identicon&r=PG", "display_name": "Marco Neves", "link": "https://stackoverflow.com/users/2127691/marco-neves"}, "edited": false, "score": 0, "creation_date": 1492118681, "post_id": 43400984, "comment_id": 73864450, "body": "Um, having a bit of a hard time understanding your answer.. cast what exactly, as a &quot;fedback control problem&quot; ?"}, {"owner": {"reputation": 1, "user_id": 7864224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba271e4ec0539d97598f5c06e1e3e553?s=128&d=identicon&r=PG", "display_name": "Mohamed-Amine Labiadh", "link": "https://stackoverflow.com/users/7864224/mohamed-amine-labiadh"}, "reply_to_user": {"reputation": 131, "user_id": 2127691, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5c0b0054d825ad4ed9ab1e916fa4588f?s=128&d=identicon&r=PG", "display_name": "Marco Neves", "link": "https://stackoverflow.com/users/2127691/marco-neves"}, "edited": false, "score": 0, "creation_date": 1492125067, "post_id": 43400984, "comment_id": 73866655, "body": "feedback refers to acoustic coupling of the loudspeaker to the microphone. to make the listening node ignore what the robot says jut filter it out, this is what feedback control do."}, {"owner": {"reputation": 1, "user_id": 7864224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba271e4ec0539d97598f5c06e1e3e553?s=128&d=identicon&r=PG", "display_name": "Mohamed-Amine Labiadh", "link": "https://stackoverflow.com/users/7864224/mohamed-amine-labiadh"}, "reply_to_user": {"reputation": 131, "user_id": 2127691, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5c0b0054d825ad4ed9ab1e916fa4588f?s=128&d=identicon&r=PG", "display_name": "Marco Neves", "link": "https://stackoverflow.com/users/2127691/marco-neves"}, "edited": false, "score": 0, "creation_date": 1492125461, "post_id": 43400984, "comment_id": 73866761, "body": "check this link : <a href=\"ftp://ftp.esat.kuleuven.be/sista/spriet/reports/06-153.pdf\" rel=\"nofollow noreferrer\">ftp.esat.kuleuven.be/sista/spriet/reports/06-153.pdf</a>"}], "tags": [], "owner": {"reputation": 1, "user_id": 7864224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba271e4ec0539d97598f5c06e1e3e553?s=128&d=identicon&r=PG", "display_name": "Mohamed-Amine Labiadh", "link": "https://stackoverflow.com/users/7864224/mohamed-amine-labiadh"}, "is_accepted": false, "score": 0, "last_activity_date": 1492505238, "last_edit_date": 1492505238, "creation_date": 1492114438, "answer_id": 43400984, "question_id": 43380650, "link": "https://stackoverflow.com/questions/43380650/ros-voice-recognition/43400984#43400984", "title": "ROS Voice recognition", "body": "<p>you can cast it as a feedback control problem.\ngiven that :</p>\n\n<ul>\n<li>u is the user speech signal</li>\n<li>r is the output signal of the robot speaker,</li>\n<li>h the feedback path function,</li>\n<li>s=h*r the feedback signal; * refers to convolution</li>\n<li>y = s + u = h*r + u the input signal of the microphone</li>\n</ul>\n\n<p>the problem is to estimate \u0125 and therefore \u015d (r is already known),\nso an estimation of the user speech signal is given by \u00fb =  y - \u015d = y - \u0125 * r</p>\n"}], "owner": {"reputation": 131, "user_id": 2127691, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5c0b0054d825ad4ed9ab1e916fa4588f?s=128&d=identicon&r=PG", "display_name": "Marco Neves", "link": "https://stackoverflow.com/users/2127691/marco-neves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 285, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492505238, "creation_date": 1492036173, "question_id": 43380650, "link": "https://stackoverflow.com/questions/43380650/ros-voice-recognition", "title": "ROS Voice recognition", "body": "<p>Short summary of what I tried to do and what it's actually doing. </p>\n\n<p>In my project I have two simple nodes: one for listening and publishing, and another for speaking and subscribing. I named them listeningNode and speakingNode, respectively.</p>\n\n<p>The task I wanted to achieve was pretty simple, I would have the user say \"remember me\" which would be recognized as a keyword and be published to <code>voiceCommandCallback</code> method in the speaking node so my robot could say \"Okay, please say your name\". Then, back at the listening node, on top of publishing that keyphrase it will also call the method <code>recognize_from_mic_with_dict()</code> which as you can guess will run using a dictionary of names. </p>\n\n<p>This <code>recognize_from_mic_with_dict()</code> method will be listening for a name and will attempt to publish that name to <code>namesCallback()</code> in the listening node and this is where I check if what got published was an actual name or if it was just gibberish, in which case I would kindly ask the user to repeat his/her name and subscribe once again to <code>recognize_from_mic_with_dict()</code> so it could listen once more.</p>\n\n<p>This sounds more complicated that it probably has to be but it's the only way I could think of achieving this \"mode switching\". The problem is that if it hears gibberish it will say \"I'm sorry, I did not quite hear that. Please repeat that!\" and I would like to know if there is a way to make the listening node ignore anything that the robot says because it's attempting to recognize names from its own sentence.</p>\n"}, {"tags": ["c++", "cgal", "quadratic-programming"], "owner": {"reputation": 51, "user_id": 7851155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3672bacc8a13643741f9f3d3b332f185?s=128&d=identicon&r=PG&f=1", "display_name": "TheCoder21", "link": "https://stackoverflow.com/users/7851155/thecoder21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1492035636, "creation_date": 1492035636, "question_id": 43380565, "link": "https://stackoverflow.com/questions/43380565/give-an-initial-guess-to-the-quadratic-programming-solver-of-cgal", "title": "Give an initial guess to the quadratic programming solver of CGAL", "body": "<p>I want to solve an overdetermined system of the form Ax=b and in the same time bound the x vector. \nFor this I\u2019ve used the quadratic programming library of CGAL, however, I wonder if there is a way to give to the solver\nan initial guess <code>x0</code> for the solution, since I have a working set and I want to optimize it.</p>\n"}, {"tags": ["c++", "c++14", "language-lawyer", "variadic-templates"], "comments": [{"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1492035728, "post_id": 43380550, "comment_id": 73823260, "body": "I suggest you to add the tag <code>language-lawyer</code> to this question, since it&#39;s about compiler conformance to the standard"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1492035811, "post_id": 43380550, "comment_id": 73823289, "body": "@GuillaumeRacicot so done. thank you."}, {"owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "edited": false, "score": 0, "creation_date": 1492036023, "post_id": 43380550, "comment_id": 73823357, "body": "Well I&#39;d guess that Clang is right because the code compiles and works as expected and since gcc is throwing compiler errors it must not have been implemented or fixed in the current version."}, {"owner": {"reputation": 76, "user_id": 5370848, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8h9bI9stCzc/AAAAAAAAAAI/AAAAAAAADoI/A4w8erD-hmo/photo.jpg?sz=128", "display_name": "Walther", "link": "https://stackoverflow.com/users/5370848/walther"}, "edited": false, "score": 0, "creation_date": 1492077577, "post_id": 43380550, "comment_id": 73839267, "body": "Slightly of topic, but you don&#39;t need to create the static callers. Maybe you did this to expose the bug, but you could have just called\u200b f inside the with method."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 76, "user_id": 5370848, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8h9bI9stCzc/AAAAAAAAAAI/AAAAAAAADoI/A4w8erD-hmo/photo.jpg?sz=128", "display_name": "Walther", "link": "https://stackoverflow.com/users/5370848/walther"}, "edited": false, "score": 0, "creation_date": 1492078288, "post_id": 43380550, "comment_id": 73839735, "body": "@Walther I&#39;m getting old and my brain works better in single steps. I did notice that removing <code>static const</code> and replacing with <code>constexpr</code> increases efficiency while still maintaining clarity (for me). In fact, clang is epic at inlining constexpr jump tables. gcc less so."}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 14, "last_activity_date": 1492036266, "creation_date": 1492036266, "answer_id": 43380663, "question_id": 43380550, "link": "https://stackoverflow.com/questions/43380550/which-compiler-if-any-has-a-bug-in-parameter-pack-expansion/43380663#43380663", "title": "Which compiler, if any has a bug in parameter pack expansion?", "body": "<p>This is <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=47226\" rel=\"noreferrer\">gcc bug 47226</a>. gcc simply does not allow producing a pack expansions of lambdas like that. The bug is still present in 7.0.</p>\n\n<hr />\n\n<p>In this case, you don't really need the lambda and can just create a function template:</p>\n\n<pre><code>template &lt;size_t I, class F, class Tuple&gt;\nvoid lambda(F&amp; f, Tuple&amp; tuple) {\n    f(std::get&lt;I&gt;(tuple));\n}\n\nstatic std::array&lt;void (*) (F&amp;, Tuple&amp;), sizeof...(Is)&gt; x = \n{\n    lambda&lt;Is,F,Tuple&gt;...\n};   \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 4, "last_activity_date": 1492074425, "last_edit_date": 1492074425, "creation_date": 1492039953, "answer_id": 43381240, "question_id": 43380550, "link": "https://stackoverflow.com/questions/43380550/which-compiler-if-any-has-a-bug-in-parameter-pack-expansion/43381240#43381240", "title": "Which compiler, if any has a bug in parameter pack expansion?", "body": "<p>clang is right.</p>\n\n<p>Parameter packs must be expanded, but gcc seems to think that unexpanded parameter packs at the end of a statement are errors.  This is understandable, but lambdas permit statements to be just a small part of other statements.  There is no requirement that parameter packs be expanded before the end of every statement they are in.</p>\n\n<p>Here is an inline workaround:</p>\n\n<pre><code>template&lt;std::size_t I&gt;\nusing index_t=std::integral_constant&lt;std::size_t, I&gt;\ntemplate&lt;std::size_t I&gt;\nconstexpr index_t&lt;I&gt; index{};\n</code></pre>\n\n<p>then inside the function:</p>\n\n<pre><code>  auto lamb = [](auto I){\n    using I_t=decltype(I);\n    return [](F&amp; f, Tuple&amp; tuple) { f(std::get&lt;I_t::value&gt;(tuple)); };\n  };\n  static std::array&lt;void (*) (F&amp;, Tuple&amp;), sizeof...(Is)&gt; x =\n  {\n    +(lamb(index_k&lt;Is&gt;))...\n  };\n</code></pre>\n\n<p>which moves the lambda body outside of the <code>...</code>.  We pass the constant by value.  You can even pass types that way.</p>\n\n<p>Another pattern is:</p>\n\n<pre><code>template&lt;std::size_t...Is&gt;\nauto index_over(std::index_sequence&lt;Is...&gt;){\n  return [](auto&amp;&amp;f)-&gt;decltype(auto){\n    return decltype(f)(f)( index_k&lt;Is&gt;... );\n  };\n}\ntemplate&lt;std::size_t N&gt;\nauto index_upto(index_t&lt;N&gt;={}){\n  return index_over(std::make_index_sequence&lt;N&gt;{});\n}\ntemplate&lt;class F&gt;\nauto array_maker(F f){\n  return [f=std::move(f)](auto...Is)-&gt;std::array&lt;decltype(f(index_k&lt;0&gt;),sizeof...(Is)&gt;{\n    return {{f(Is...}};\n  };\n}\n</code></pre>\n\n<p>this lets you dodge your problem entirely, and kills impl:</p>\n\n<pre><code>template&lt;class F, class Tuple&gt;\nauto make_callers() -&gt; decltype(auto)\n{\n  auto size=index_k&lt;std::tuple_size&lt;std::decay_t&lt;Tuple&gt;&gt;{}&gt;;\n  auto indexer=index_upto(size);\n  auto make_array=array_maker([](auto I){\n    return +[](F&amp; f, Tuple&amp; tuple) { f(std::get&lt;decltype(I)::value&gt;(tuple)); };\n  });\n  return indexer(make_array);\n}\n</code></pre>\n\n<p>which admittedly is rather over lambdad.</p>\n"}], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 897, "favorite_count": 2, "accepted_answer_id": 43380663, "answer_count": 2, "score": 11, "last_activity_date": 1492074425, "creation_date": 1492035557, "last_edit_date": 1492035794, "question_id": 43380550, "link": "https://stackoverflow.com/questions/43380550/which-compiler-if-any-has-a-bug-in-parameter-pack-expansion", "title": "Which compiler, if any has a bug in parameter pack expansion?", "body": "<p>When experimenting with convenient ways to access tuples as containers, I wrote a test program.</p>\n\n<p>on clang (3.9.1, and apple clang) it compiles as expected, producing the expected output:</p>\n\n<pre><code>1.1\nfoo\n2\n</code></pre>\n\n<p>on gcc (5.4, 6.3), it fails to compile:</p>\n\n<pre><code>&lt;source&gt;: In lambda function:\n&lt;source&gt;:14:61: error: parameter packs not expanded with '...':\n             +[](F&amp; f, Tuple&amp; tuple) { f(std::get&lt;Is&gt;(tuple)); }...\n                                                             ^\n&lt;source&gt;:14:61: note:         'Is'\n&lt;source&gt;: In function 'decltype(auto) notstd::make_callers_impl(std::index_sequence&lt;Is ...&gt;)':\n&lt;source&gt;:14:64: error: expansion pattern '+&lt;lambda&gt;' contains no argument packs\n             +[](F&amp; f, Tuple&amp; tuple) { f(std::get&lt;Is&gt;(tuple)); }...\n                                                                ^~~\nCompiler exited with result code 1\n</code></pre>\n\n<p>Question: who is right? Can it be fixed?</p>\n\n<p>Program:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;array&gt;\n#include &lt;tuple&gt;\n\nnamespace notstd {\n\n    template&lt;class F, class Tuple, std::size_t...Is&gt;\n    auto make_callers_impl(std::index_sequence&lt;Is...&gt;) -&gt; decltype(auto)\n    {\n        static std::array&lt;void (*) (F&amp;, Tuple&amp;), sizeof...(Is)&gt; x =\n        {\n            +[](F&amp; f, Tuple&amp; tuple) { f(std::get&lt;Is&gt;(tuple)); }...\n        };\n        return x;\n    };\n\n    template&lt;class F, class Tuple&gt;\n    auto make_callers() -&gt; decltype(auto)\n    {\n        return make_callers_impl&lt;F, Tuple&gt;(std::make_index_sequence&lt;std::tuple_size&lt;std::decay_t&lt;Tuple&gt;&gt;::value&gt;());\n    };\n\n    template&lt;class Tuple, std::size_t N = std::tuple_size&lt;std::decay_t&lt;Tuple&gt;&gt;::value &gt;\n    struct tuple_iterator {\n        static constexpr auto size = N;\n\n        constexpr tuple_iterator(Tuple&amp; tuple, std::size_t i = 0) : tuple(tuple), i(i) {}\n\n        template&lt;class F&gt;\n        void with(F&amp;&amp; f) const {\n            static const auto&amp; callers = make_callers&lt;F, Tuple&gt;();\n            callers[i](f, tuple);\n        }\n\n        constexpr bool operator!=(tuple_iterator const&amp; r) const {\n            return i != r.i;\n        }\n\n        constexpr auto operator++() -&gt; tuple_iterator&amp; {\n            ++i;\n            return *this;\n        }\n\n\n        Tuple&amp; tuple;\n        std::size_t i;\n    };\n\n    template&lt;class Tuple&gt;\n    auto begin(Tuple&amp;&amp; tuple)\n    {\n        return tuple_iterator&lt;Tuple&gt;(std::forward&lt;Tuple&gt;(tuple));\n    }\n\n    template&lt;class Tuple&gt;\n    auto end(Tuple&amp;&amp; tuple)\n    {\n        using tuple_type = std::decay_t&lt;Tuple&gt;;\n        static constexpr auto size = std::tuple_size&lt;tuple_type&gt;::value;\n        return tuple_iterator&lt;Tuple&gt;(std::forward&lt;Tuple&gt;(tuple), size);\n    }\n\n}\n\ntemplate&lt;class T&gt; void emit(const T&amp;);\n\nint main() {\n    auto a = std::make_tuple(1.1, \"foo\", 2);\n    auto i = notstd::begin(a);\n    while(i != notstd::end(a))\n    {\n        i.with([](auto&amp;&amp; val) { std::cout &lt;&lt; val &lt;&lt; std::endl; });\n        ++i;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "assembly", "macros"], "comments": [{"owner": {"reputation": 666, "user_id": 5339180, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ec7a87ded73862f4599d86c43da80327?s=128&d=identicon&r=PG&f=1", "display_name": "V. Panchenko", "link": "https://stackoverflow.com/users/5339180/v-panchenko"}, "edited": false, "score": 0, "creation_date": 1492034175, "post_id": 43380207, "comment_id": 73822653, "body": "Where do you assign value to P2 ? I think you reminder is <code>-858993460</code>, because some variable isn&#39;t initialized before using."}, {"owner": {"reputation": 21, "user_id": 7823657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5903864173e0918680051d794cbc133?s=128&d=identicon&r=PG", "display_name": "Jaquai", "link": "https://stackoverflow.com/users/7823657/jaquai"}, "reply_to_user": {"reputation": 666, "user_id": 5339180, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ec7a87ded73862f4599d86c43da80327?s=128&d=identicon&r=PG&f=1", "display_name": "V. Panchenko", "link": "https://stackoverflow.com/users/5339180/v-panchenko"}, "edited": false, "score": 0, "creation_date": 1492041698, "post_id": 43380207, "comment_id": 73825002, "body": "@V.Panchenko P2 was assigned for M3 and M4."}, {"owner": {"reputation": 21, "user_id": 7823657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5903864173e0918680051d794cbc133?s=128&d=identicon&r=PG", "display_name": "Jaquai", "link": "https://stackoverflow.com/users/7823657/jaquai"}, "reply_to_user": {"reputation": 666, "user_id": 5339180, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ec7a87ded73862f4599d86c43da80327?s=128&d=identicon&r=PG&f=1", "display_name": "V. Panchenko", "link": "https://stackoverflow.com/users/5339180/v-panchenko"}, "edited": false, "score": 0, "creation_date": 1492044559, "post_id": 43380207, "comment_id": 73825681, "body": "I tried to bring P2 into the division proc, but nothing good came of it. I don&#39;t think they belong there."}, {"owner": {"reputation": 546, "user_id": 7105203, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rSO29.jpg?s=128&g=1", "display_name": "nopasara", "link": "https://stackoverflow.com/users/7105203/nopasara"}, "edited": false, "score": 1, "creation_date": 1492059340, "post_id": 43380207, "comment_id": 73829306, "body": "Your M2 macro issues <code>ret</code> instruction. Calling M5 after M2 is meaningless in your _divide proc. All <code>ret</code> instructions after M2 are meaningless. Also as your M2 pops only <code>ebp</code>, there is no need to pass it in a parameter. Your M5 should call procedure and you&#39;re passing registers as parameters..."}], "owner": {"reputation": 21, "user_id": 7823657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5903864173e0918680051d794cbc133?s=128&d=identicon&r=PG", "display_name": "Jaquai", "link": "https://stackoverflow.com/users/7823657/jaquai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1492033770, "creation_date": 1492033770, "question_id": 43380207, "link": "https://stackoverflow.com/questions/43380207/adding-macros-to-parameters-param1-param2-etc-in-assembly", "title": "Adding Macros to Parameters (Param1, Param2, etc.) in Assembly", "body": "<p>I'm having issues finishing an assignment that involves adding macros. After pushing and calling Param1 and Param2 into the M5 (fifth macro) for the dividing function, I ran into an incorrect result and remainder after running it: \"The result is 4, and the remainder is -858993460.\" Other than what I have done so far, I don't know what other steps to do in order to complete the program.</p>\n\n<p>Here are the instructions I was given for the assignment: \n\"Modify lab seven such that you will create a macro for each call. The parameters for the macro will be: the function name, parameter1, parameter2, etc. The macro will allow up to five parameters but will use fewer if that is all that are passed to it. Also create macros for the startup of each function (that is a macro to do the push ebp and the mov ebp,esp statements) and for the return from each function (the pop ebp and ret statements).\"</p>\n\n<p>Here is the Main.cpp code (it doesn't need to be messed with):</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nenum ResultCode { ShowSquare, ShowMultiply, ShowDivide, ShowRemainder, ShowDivideFailure };\nenum SuccessCode { Failure, Success };\n\nextern \"C\" SuccessCode Divide(long, long, long &amp;, long &amp;);\nextern \"C\" long Multiply(long, long);\nextern \"C\" void PrintResult(ResultCode, long);\nextern \"C\" long Square(long);\n\nvoid main()\n{\n    long Num1;\n    long Num2;\n    long Result;\n    long Remainder;\n    do\n    {\n        cout &lt;&lt; \"Enter Number to Square. \" &lt;&lt; endl;\n        cin &gt;&gt; Num1;\n        Result = Square(Num1);\n        cout &lt;&lt; \"Square is: \" &lt;&lt; Result &lt;&lt; endl;\n        cout &lt;&lt; \"Enter two numbers to multiply. \" &lt;&lt; endl;\n        cin &gt;&gt; Num1 &gt;&gt; Num2;\n        Result = Multiply(Num1, Num2);\n        cout &lt;&lt; \"Result of multiply is: \" &lt;&lt; Result &lt;&lt; endl;\n        cout &lt;&lt; \"Enter a mumber to divide into, then a number to divide by. \" &lt;&lt; endl;\n        cin &gt;&gt; Num1 &gt;&gt; Num2;\n        if (Divide(Num1, Num2, Result, Remainder) == Success)\n            cout &lt;&lt; \"The result is \" &lt;&lt; Result &lt;&lt; \", and the remainder is \" &lt;&lt; Remainder &lt;&lt; \".\" &lt;&lt; endl;\n        else\n            cout &lt;&lt; \"Attempted division by zero. \";\n    } while (Result &gt; 0);\n}\nvoid PrintResult(ResultCode PrintCode, long Value)\n{\n    switch (PrintCode)\n    {\n    case ShowSquare:\n        cout &lt;&lt; \"Display of square is: \" &lt;&lt; Value &lt;&lt; endl;\n        break;\n    case ShowMultiply:\n        cout &lt;&lt; \"Display of multiply is: \" &lt;&lt; Value &lt;&lt; endl;\n        break;\n    case ShowDivide:\n        cout &lt;&lt; \"Display of divide is: \" &lt;&lt; Value &lt;&lt; endl;\n        break;\n    case ShowRemainder:\n        cout &lt;&lt; \"Display of remainder is: \" &lt;&lt; Value &lt;&lt; endl;\n        break;\n    case ShowDivideFailure:\n        cout &lt;&lt; \"Display of Division by zero\" &lt;&lt; endl;\n        break;\n    default:\n        cout &lt;&lt; \"Error in assembly routines. \" &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>Here is the Asm.asm file:</p>\n\n<pre><code>.386\n\n.model flat\n\npublic _Square\npublic _Multiply\npublic _Divide\nextern  _PrintResult:proc\n\nParam1 = 4          ; creates a named constant, only works with whole numbers\n\nParam1 = 8          ; names can be redefined\nParam2 = 16\nParam3 = 24\nParam4 = 32\nParam5 = 40\n\nM1      macro\n        push    ebp\n        mov     ebp, esp\n        endm\n\nM2      macro   P1\n        pop     P1\n        ret\n        endm\n\nM3      macro   P1:REQ, P2          ;; :REQ means the parameter is required\nIFB &lt;P2&gt;\nP1      BYTE    0, 1, 2, 3, 4, 5\nELSE\nP1      P2      0, 1, 2, 3, 4, 5\nENDIF\n        endm\n\nM4      macro   P1, P2\nLOCAL   L1, L2\n        cmp     P1, P2\n        jl      L1\n        inc     P1\n        jmp     L2\nL1:     inc     P2\nL2:\n        endm\n\nM5      macro   Param1, Param2\n        push [Param1]\n        push [Param2]\n    ;   push [Param3]\n    ;   push [Param4]\n    ;   push [Param5]\n        Call    Param1\n        Call    Param2\n    ;   Call    Param3\n    ;   Call    Param4\n    ;   Call    Param5\n        add ebp, 8\n        endm\n\n.code\n\n_Square proc\n       M1\n       finit\n       mov eax, [ebp + 8]\n       imul eax\n       M2 ebp\n       ret\n_Square endp\n\n_Multiply proc\n       M1\n       finit\n       mov eax, [ebp + 8]\n       mov ebx, [ebp + 12]\n       imul ebx\n       M2 ebp\n       ret\n_Multiply endp\n\n_Divide proc\n       M1\n       finit\n       mov eax, [ebp + 8]\n       mov ebx, [ebp + 12]\n       mov ecx, [ebp + 16]\n       mov edx, 0\n       idiv ebx\n       mov ecx, eax\n       mov ebx, [ebp + 20]\n       mov ebx, edx\n    ;   M5 ebp, esp\n    ;   Call    _PrintResult\n    ;   add ebp, 8\n       M2 ebp\n       M5 ebp, esp\n       ret\n_Divide endp\n\n.data\n\ndb  255\n\nend\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1492032681, "post_id": 43379953, "comment_id": 73822042, "body": "Your code doesn&#39;t contain any rvalue references."}, {"owner": {"reputation": 111, "user_id": 7673962, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ffd82714b9275f7a814c3f7f221e6c37?s=128&d=identicon&r=PG&f=1", "display_name": "vanta mula", "link": "https://stackoverflow.com/users/7673962/vanta-mula"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1492032755, "post_id": 43379953, "comment_id": 73822073, "body": "@KerrekSB isn&#39;t <code>*this r-value reference</code>?"}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1492032825, "post_id": 43379953, "comment_id": 73822100, "body": "What do you want this code (<code>a(*this)</code>) to do?"}, {"owner": {"reputation": 111, "user_id": 7673962, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ffd82714b9275f7a814c3f7f221e6c37?s=128&d=identicon&r=PG&f=1", "display_name": "vanta mula", "link": "https://stackoverflow.com/users/7673962/vanta-mula"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1492033008, "post_id": 43379953, "comment_id": 73822167, "body": "@OliverCharlesworth I wanted A class to have instance to B so that I could call B&#39;s method from A."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1492033061, "post_id": 43379953, "comment_id": 73822183, "body": "@vantamula - But there is no instance of <code>A</code> - <code>a</code> is a reference."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1492033158, "post_id": 43379953, "comment_id": 73822214, "body": "@vantamula: Why and how? The result of the <code>*</code>-operator is and has always been an lvalue."}, {"owner": {"reputation": 111, "user_id": 7673962, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ffd82714b9275f7a814c3f7f221e6c37?s=128&d=identicon&r=PG&f=1", "display_name": "vanta mula", "link": "https://stackoverflow.com/users/7673962/vanta-mula"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1492033296, "post_id": 43379953, "comment_id": 73822285, "body": "@OliverCharlesworth you are right, removing A&#39;s reference from class B fixed the problem."}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 7673962, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ffd82714b9275f7a814c3f7f221e6c37?s=128&d=identicon&r=PG&f=1", "display_name": "vanta mula", "link": "https://stackoverflow.com/users/7673962/vanta-mula"}, "edited": false, "score": 0, "creation_date": 1492033503, "post_id": 43380096, "comment_id": 73822377, "body": "ok so u mean <code>a(*this) </code> is rvalue and I am assigning it to lvalue?"}, {"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "reply_to_user": {"reputation": 111, "user_id": 7673962, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ffd82714b9275f7a814c3f7f221e6c37?s=128&d=identicon&r=PG&f=1", "display_name": "vanta mula", "link": "https://stackoverflow.com/users/7673962/vanta-mula"}, "edited": false, "score": 0, "creation_date": 1492033933, "post_id": 43380096, "comment_id": 73822564, "body": "I hope I&#39;ve explained."}, {"owner": {"reputation": 111, "user_id": 7673962, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ffd82714b9275f7a814c3f7f221e6c37?s=128&d=identicon&r=PG&f=1", "display_name": "vanta mula", "link": "https://stackoverflow.com/users/7673962/vanta-mula"}, "edited": false, "score": 0, "creation_date": 1492034406, "post_id": 43380096, "comment_id": 73822725, "body": "Thank you for the detailed answer and yes now it makes more sense"}], "tags": [], "owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "is_accepted": true, "score": 3, "last_activity_date": 1492033823, "last_edit_date": 1492033823, "creation_date": 1492033201, "answer_id": 43380096, "question_id": 43379953, "link": "https://stackoverflow.com/questions/43379953/how-to-handle-non-const-lvalue-reference-to-type-a-cannot-bind-to-a-value-of-u/43380096#43380096", "title": "How to handle non-const lvalue reference to type &#39;A&#39; cannot bind to a value of unrelated type &#39;B&#39; for this pointer?", "body": "<p>You're not building any A object. You're trying to set <code>a</code> (a lvalue reference) to the temporary A object built using the <code>A(B &amp;b)</code> constructor. </p>\n\n<p>In the <code>a(*this)</code> expression in the <code>B(int)</code> constructor's initialization list, <code>*this</code> yields a <code>B&amp;</code>, which as-is cannot bind to a <code>A&amp;</code> as the two classes are not related. </p>\n\n<p>So, implicit conversions are tried. There's a way to get an <code>A</code> out of a <code>B&amp;</code>: apply the <code>A(B &amp;)</code> constructor to get a temporary <code>A</code> object. However, now you've got a <em>temporary</em> <code>A</code>, and that cannot bind to <code>a</code>, which is a non-const lvalue reference. A temporary can only bind to const lvalue references, or rvalue references.</p>\n\n<p>And this is precisely what the compiler is telling you:</p>\n\n<pre><code>&lt;source&gt;: In constructor 'B::B(int)':\n&lt;source&gt;:16:23: error: invalid initialization of non-const reference of type 'A&amp;' from an rvalue of type 'A'\n     B(int _x):x(_x),a(*this){}\n                       ^~~~~\n&lt;source&gt;:6:5: note:   after user-defined conversion: A::A(B&amp;)\n     A(B&amp; _b):b(_b){}\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 7673962, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ffd82714b9275f7a814c3f7f221e6c37?s=128&d=identicon&r=PG&f=1", "display_name": "vanta mula", "link": "https://stackoverflow.com/users/7673962/vanta-mula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3970, "favorite_count": 0, "accepted_answer_id": 43380096, "answer_count": 1, "score": 1, "last_activity_date": 1492035222, "creation_date": 1492032541, "last_edit_date": 1495535453, "question_id": 43379953, "link": "https://stackoverflow.com/questions/43379953/how-to-handle-non-const-lvalue-reference-to-type-a-cannot-bind-to-a-value-of-u", "title": "How to handle non-const lvalue reference to type &#39;A&#39; cannot bind to a value of unrelated type &#39;B&#39; for this pointer?", "body": "<p>Currently I am running into catch 22 situation. I have the following code.</p>\n\n<pre><code>#include &lt;iostream&gt;\nclass B;\n\nclass A{\npublic:\n    A(B&amp; _b):b(_b){}\n\nprivate:\n    B&amp; b;\n};\n\n\nclass B{\n\npublic:\n    B(int _x):x(_x),a(*this){}\n\nprivate:\n    A&amp; a;\n    int x;\n\n};\n\nint main(){\n\n  B b(1);\n\n}\n</code></pre>\n\n<p>I use forward declaration here to pass object of class B as parameter in class A. Then I use <code>rvalue reference</code> of class B's <code>this pointer</code> to pass it to A's constructor. So I know why the compiler is complaining (because of trying to bind rvalue to lvalue reference -- at least this is what I think is happening -- please correct me if I am wrong). </p>\n\n<p>To solve this I try to do</p>\n\n<pre><code>#include &lt;iostream&gt;\nclass B;\n\nclass A{\npublic:\n    A(B _b):b(_b){}\n\nprivate:\n    B b;\n};\n</code></pre>\n\n<p>... </p>\n\n<p>This again gives error saying <code>field has incomplete type 'B'</code> (I used to see this error only when \"xxx.h\" was not included since compiler did not know the class size) but they are in same Translation unit. Why still is the compiler complaining? Is there any solution to this problem of passing <code>rvalue this object</code> or am I falling into bad design?</p>\n\n<p><strong>For future read</strong> : In addition to peppe's answer <a href=\"https://stackoverflow.com/questions/18565167/non-const-lvalue-references\">this link</a> also has good description </p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 1568, "user_id": 5526072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588896494e8fd23bb0092474a5cf958d?s=128&d=identicon&r=PG", "display_name": "jwimberley", "link": "https://stackoverflow.com/users/5526072/jwimberley"}, "edited": false, "score": 0, "creation_date": 1492032534, "post_id": 43379935, "comment_id": 73821993, "body": "Could you provide a MWVE (minimal working verifiable example)? Does your code here contain the line with the error? It doesn&#39;t seems so because you say the error occurs when declaring an instance of the class, but the code here is only the class header."}, {"owner": {"reputation": 1568, "user_id": 5526072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588896494e8fd23bb0092474a5cf958d?s=128&d=identicon&r=PG", "display_name": "jwimberley", "link": "https://stackoverflow.com/users/5526072/jwimberley"}, "edited": false, "score": 0, "creation_date": 1492032683, "post_id": 43379935, "comment_id": 73822044, "body": "Nevermind, I found the line with the error, but it would be easier if you broke your code up into blocks for the separate classes."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1492033082, "post_id": 43379935, "comment_id": 73822189, "body": "What compiler are you using?  Does it support C++11?"}, {"owner": {"reputation": 1568, "user_id": 5526072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588896494e8fd23bb0092474a5cf958d?s=128&d=identicon&r=PG", "display_name": "jwimberley", "link": "https://stackoverflow.com/users/5526072/jwimberley"}, "edited": false, "score": 0, "creation_date": 1492033281, "post_id": 43379935, "comment_id": 73822277, "body": "Could you paste the complete error messages that you receive?"}, {"owner": {"reputation": 666, "user_id": 5339180, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ec7a87ded73862f4599d86c43da80327?s=128&d=identicon&r=PG&f=1", "display_name": "V. Panchenko", "link": "https://stackoverflow.com/users/5339180/v-panchenko"}, "edited": false, "score": 0, "creation_date": 1492033519, "post_id": 43379935, "comment_id": 73822385, "body": "I think it is bad practice to initialize <code>EncodeWindow *CurrentEncodeWindow</code> by this way. Try to do it within constructor of <code>MainWindow()</code>?"}, {"owner": {"reputation": 5, "user_id": 7858826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb90f888001be193c9d5bcdbdcd46e78?s=128&d=identicon&r=PG&f=1", "display_name": "Decsy12", "link": "https://stackoverflow.com/users/7858826/decsy12"}, "edited": false, "score": 0, "creation_date": 1492034141, "post_id": 43379935, "comment_id": 73822640, "body": "My compiler does support C++11, I believe it is the Visual Studio C++ Compiler 14.0"}, {"owner": {"reputation": 5, "user_id": 7858826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb90f888001be193c9d5bcdbdcd46e78?s=128&d=identicon&r=PG&f=1", "display_name": "Decsy12", "link": "https://stackoverflow.com/users/7858826/decsy12"}, "edited": false, "score": 0, "creation_date": 1492034249, "post_id": 43379935, "comment_id": 73822674, "body": "My error messages were: C2143:syntax error: missing &#39;;&#39; before &#39;*&#39;                                                                               C4430:missing type specifier - int assumed.                                                         Note: C++ does not support default-int                                                                C2238:unexpected token(s) preceding &#39;;&#39;"}, {"owner": {"reputation": 7187, "user_id": 2243104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47daacd71b7294e97d5ef36ba029a95c?s=128&d=identicon&r=PG&f=1", "display_name": "Reti43", "link": "https://stackoverflow.com/users/2243104/reti43"}, "edited": false, "score": 0, "creation_date": 1492070358, "post_id": 43379935, "comment_id": 73834617, "body": "If an answer has resolved your issue, you are encouraged to tick the green mark on the left of said answer."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 7858826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb90f888001be193c9d5bcdbdcd46e78?s=128&d=identicon&r=PG&f=1", "display_name": "Decsy12", "link": "https://stackoverflow.com/users/7858826/decsy12"}, "edited": false, "score": 0, "creation_date": 1492035248, "post_id": 43380184, "comment_id": 73823069, "body": "That was it , everything compiling now thanks. I wasn&#39;t aware of &quot;circular includes&quot; being a thing , however I will look into them for preventing this error again."}], "tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": true, "score": 4, "last_activity_date": 1492034202, "last_edit_date": 1492034202, "creation_date": 1492033671, "answer_id": 43380184, "question_id": 43379935, "link": "https://stackoverflow.com/questions/43379935/missing-before-after-instance-declaration/43380184#43380184", "title": "missing &#39;;&#39; before &#39;*&#39; after instance declaration", "body": "<p>You have circular includes.  \"mainwindow.h\" includes \"encodewindow.h\" and \"encodewindow.h\" includes \"mainwindow.h\".  The include guards stop the cycle, but the class definitions for whichever header is included first won't be complete in the second include file, which will result in your errors.</p>\n\n<p>In the snippet above, there's nothing that I see in <code>encodewindow.h</code> that uses anything in <code>mainwindow.h</code>, so just remove the include of mainwindow.h from encodewindow.h.</p>\n"}], "owner": {"reputation": 5, "user_id": 7858826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb90f888001be193c9d5bcdbdcd46e78?s=128&d=identicon&r=PG&f=1", "display_name": "Decsy12", "link": "https://stackoverflow.com/users/7858826/decsy12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 43380184, "answer_count": 1, "score": 0, "last_activity_date": 1492035388, "creation_date": 1492032474, "last_edit_date": 1492035388, "question_id": 43379935, "link": "https://stackoverflow.com/questions/43379935/missing-before-after-instance-declaration", "title": "missing &#39;;&#39; before &#39;*&#39; after instance declaration", "body": "<p>I've encountered an error which I cannot seem to find a solution to anywhere else. </p>\n\n<p>The error occurs when I'm trying to declare an instance of the \"EncodeWindow\" class.The compiler is giving errors C2143,C4430 and C2238. I am simply trying to give the \"MainWindow\" class an instance of \"EncodeWindow\". </p>\n\n<p>File <code>mainWindow.h</code>:</p>\n\n<pre><code>#ifndef MAINWINDOW_H\n#define MAINWINDOW_H\n\n#include &lt;QMainWindow&gt;\n#include &lt;QString&gt;\n#include &lt;QLabel&gt;\n#include \"Image.h\"\n#include \"encodewindow.h\"\n\nnamespace Ui {\nclass MainWindow;\n}\n\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT\n\npublic:\n    MainWindow(QWidget *parent = 0);\n    ~MainWindow();\n\n    /*Check whether a given file path is valid*/\n    bool CheckFilePath(QString);\n\n    /*Sets UI widgets*/\n    void setOriginalImage_Label(const char*);\n    void setEncodedImage_Label(const char*);\n    void setDebug_TextBox(QString);        \n\n    /*Saves all information about current encoding/decoding*/\n    void saveFile();\n\nprivate slots:    \n    void on_Encode_Button_clicked();    \n    void on_Reset_Button_clicked();\n    void on_Save_Button_clicked();    \n    void on_AddEncodeImage_Debug_Button_clicked();\n    void on_AddImage_Button_clicked();\n    void on_pushButton_clicked();\n\nprivate:\n    Ui::MainWindow *ui;\n    EncodeWindow *CurrentEncodeWindow = new EncodeWindow;   //ERROR HERE!! C2143\n    int fileNumber = 0;\n};\n\n#endif // MAINWINDOW_H\n</code></pre>\n\n<p>File <code>encodeWindow.h</code>:</p>\n\n<pre><code>#ifndef ENCODEWINDOW_H\n#define ENCODEWINDOW_H\n\n#include &lt;QMainWindow&gt;\n#include \"mainwindow.h\"\n\nnamespace Ui {\nclass EncodeWindow;\n}\n\nclass EncodeWindow : public QMainWindow\n{\n    Q_OBJECT\n\npublic:\n    explicit EncodeWindow(QWidget *parent = 0);\n    ~EncodeWindow();\n\n    /*Get filepaths from 'result' object (For access to filepaths without 'encode' Window)*/\n    const char* getOriginalFilePath();\n    const char* getEncodeFilePath();\n    const char* getSaveFilePath();\n\n    bool checkUI(const char*,const char*,const char*,bool*);\n    bool CheckFilePath(const char*);\n    std::string readInText(const char*);\n\nprivate slots:\n    void on_RedChannel_CheckBox_clicked(bool);\n    void on_GreenChannel_CheckBox_clicked(bool);\n    void on_BlueChannel_CheckBox_clicked(bool);\n    void on_AlphaChannel_CheckBox_clicked(bool);\n    void on_BitDepth_Slider_sliderMoved(int);\n    void on_BitDepth_SpinBox_valueChanged(int);\n    void on_Encode_Button_clicked();\n\nprivate:\n    Ui::EncodeWindow *ui;\n    Encoded result;         //Enocoded object (child of Image class)\n};\n\n#endif // ENCODEWINDOW_H\n</code></pre>\n\n<p>Any help would be great. The code was done in Qt for an image steganography project. </p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "prototype"], "comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 7, "creation_date": 1492032307, "post_id": 43379880, "comment_id": 73821895, "body": "Well, remind me never to buy <i>that</i> book."}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 4, "creation_date": 1492032362, "post_id": 43379880, "comment_id": 73821921, "body": "A 1994 book? Please burn the book. It&#39;s doing you and this world a disservice... :-(.. The only C++ books you should read from the 90s is those of Scott Meyers."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 3, "creation_date": 1492032375, "post_id": 43379880, "comment_id": 73821927, "body": "Does it say what it means to &quot;prototype a function&quot;?"}, {"owner": {"reputation": 2032, "user_id": 4805357, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/muA8J.jpg?s=128&g=1", "display_name": "SDG", "link": "https://stackoverflow.com/users/4805357/sdg"}, "edited": false, "score": 1, "creation_date": 1492032389, "post_id": 43379880, "comment_id": 73821931, "body": "Haha, please explain people."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1492032436, "post_id": 43379880, "comment_id": 73821946, "body": "They are probably talking about implicit <code>int</code>. Welcome to pre-1999..."}, {"owner": {"reputation": 2032, "user_id": 4805357, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/muA8J.jpg?s=128&g=1", "display_name": "SDG", "link": "https://stackoverflow.com/users/4805357/sdg"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1492032471, "post_id": 43379880, "comment_id": 73821965, "body": "@BaummitAugen they talk about it after 2 paragraphs."}, {"owner": {"reputation": 2032, "user_id": 4805357, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/muA8J.jpg?s=128&g=1", "display_name": "SDG", "link": "https://stackoverflow.com/users/4805357/sdg"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1492032525, "post_id": 43379880, "comment_id": 73821988, "body": "@MooingDuck Apparently the author was responsible for writing the C99 Standard right?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1492032651, "post_id": 43379880, "comment_id": 73822030, "body": "<b>Please</b> do yourself and your potential co-workers a favour and burn the book, grind the askes to dust and send it into the sun!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user719662"}, "edited": false, "score": 2, "creation_date": 1492032689, "post_id": 43379880, "comment_id": 73822047, "body": "@SharanDuggirala <a href=\"http://www.seebs.net/c/c_tcn4e.html\" rel=\"nofollow noreferrer\">seebs.net/c/c_tcn4e.html</a> - Back in 1996, having heard horror stories about Herbert Schildt&#39;s C: The Complete Reference, I decided to check it out. I flipped the book open; I found glaring errors. I paged through it. I found more glaring errors. In short, the book had lived up to the hype; it was awful."}, {"owner": {"reputation": 2032, "user_id": 4805357, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/muA8J.jpg?s=128&g=1", "display_name": "SDG", "link": "https://stackoverflow.com/users/4805357/sdg"}, "edited": false, "score": 2, "creation_date": 1492032777, "post_id": 43379880, "comment_id": 73822078, "body": "Why am I being devoted? This is a genuine question"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1492033290, "post_id": 43379880, "comment_id": 73822283, "body": "Read about valid downvote reasons. One is &quot;no research&quot;."}, {"owner": {"reputation": 2032, "user_id": 4805357, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/muA8J.jpg?s=128&g=1", "display_name": "SDG", "link": "https://stackoverflow.com/users/4805357/sdg"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492033585, "post_id": 43379880, "comment_id": 73822415, "body": "@Olaf I researched this, but couldn&#39;t find anything relevant. So I just defaulted to asking here. I didn&#39;t orthogonally think of checking out the review of the book and it&#39;s errors errata."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1492033690, "post_id": 43379880, "comment_id": 73822461, "body": "Citing a 23 year old, obviously outdated book does not really qualify as research."}, {"owner": {"reputation": 2032, "user_id": 4805357, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/muA8J.jpg?s=128&g=1", "display_name": "SDG", "link": "https://stackoverflow.com/users/4805357/sdg"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492033839, "post_id": 43379880, "comment_id": 73822521, "body": "@Olaf Sufficed to say, lesson learned."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1492035367, "post_id": 43379880, "comment_id": 73823124, "body": "@Olaf: the downvote reason is &quot;no research&quot;, not &quot;I disapprove of the book you chose&quot;. Don&#39;t get me wrong: it is a terrible book--but the OP should be steered toward the <a href=\"http://stackoverflow.com/q/388242/179910\">book list</a>, not punished for making an innocent mistake."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1492048004, "post_id": 43379880, "comment_id": 73826468, "body": "@JerryCoffin: Please read the question. The book raised a question in OP, which he directly passed to us, instead of doing some research on his own first. At least that&#39;s the information given in the question. Sorry if my comment was not clear enough about this."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492050974, "post_id": 43379880, "comment_id": 73827167, "body": "@Olaf: I did read the question. I also read your: &quot;Citing a 23 year old, obviously outdated book does not really qualify as research.&quot; It was specifically with that comment that I was disagreeing. Penalizing him because he didn&#39;t realize that Schildt sucks is unreasonable. As for the book being out of date: what he asked about remains as true today as it was when the book was new (as in: typical BullSchildt, but a newer book probably wouldn&#39;t make a significant difference)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1492056981, "post_id": 43379880, "comment_id": 73828590, "body": "@JerryCoffin: &quot;what he asked about remains as true today&quot; - err - no! It is not true for C since 18 years now (and non-pototype declarators are an obsolecent feature at least since C11, i.e. 6 years). but you missed the point: OP already has doubts about what the book wrote, but did not do any further research. Neither for C nor C++. There are more recent freely available books about both languages."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492032751, "post_id": 43379990, "comment_id": 73822072, "body": "A prototype is a declaration, too."}, {"owner": {"reputation": 2670, "user_id": 346104, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/31duc.jpg?s=128&g=1", "display_name": "franji1", "link": "https://stackoverflow.com/users/346104/franji1"}, "edited": false, "score": 1, "creation_date": 1492032955, "post_id": 43379990, "comment_id": 73822153, "body": "I use functions without declaring/prototyping them, especially static functions within a module.  Note this has nothing to do with class methods.  Hence, C++ does NOT require functions to be declared/prototyped."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 2670, "user_id": 346104, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/31duc.jpg?s=128&g=1", "display_name": "franji1", "link": "https://stackoverflow.com/users/346104/franji1"}, "edited": false, "score": 0, "creation_date": 1492033164, "post_id": 43379990, "comment_id": 73822217, "body": "@franji1: This is very bad practice in both languages and not allowed in C either. You at least have to declare a function before usage with the correct arguments. I&#39;d recommend you instantly leave the 1980ies, a declaration is required in C since 18 years (and strongly recommended since 1989)! But maybe you are just not aware what a <i>declaration</i> actually is. In that case: reading the standard and getting a more recent book would be a good start."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 2670, "user_id": 346104, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/31duc.jpg?s=128&g=1", "display_name": "franji1", "link": "https://stackoverflow.com/users/346104/franji1"}, "edited": false, "score": 5, "creation_date": 1492033352, "post_id": 43379990, "comment_id": 73822313, "body": "@franji1: Sorry, but if your compiler allowed that, it&#39;s thoroughly broken. My guess, however, is that you&#39;re simply mistaken (probably by missing the fact that a function definition also acts as a function declaration)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1492033356, "post_id": 43379990, "comment_id": 73822315, "body": "@JerryCoffin: Point is, C <b>requires</b> a declaration before usage!"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1492033414, "post_id": 43379990, "comment_id": 73822345, "body": "@Olaf: Was there something about: &quot;<b>As C existed decades ago</b>, it allowed you to call a function without declaring it&quot; that wasn&#39;t clear about that?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492033464, "post_id": 43379990, "comment_id": 73822364, "body": "I somehow missed the &quot;but it is required since ...&quot; part. And a declaration can (and should) very well specify the types."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492033859, "post_id": 43379990, "comment_id": 73822533, "body": "@Olaf: Seems like a silly bit of trivia to me. Knowing what (for example) the Magna Carta did, and having some idea of how it changed (at least some) people&#39;s lives is real information. Knowing that it was signed on a Tuesday at around 2 o&#39;clock in the afternoon...not so much. What the C standard calls a declaration cannot specify the number or type of parameters--to do that, you need to use a prototype."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492034044, "post_id": 43379990, "comment_id": 73822603, "body": "@JerryCoffin: To repeat: A prototype <b>is</b> a declartion. And a declaration can be a superset. (and AFAIK the Magna Carta was signed on a Wednesday after tea-time)"}, {"owner": {"reputation": 2670, "user_id": 346104, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/31duc.jpg?s=128&g=1", "display_name": "franji1", "link": "https://stackoverflow.com/users/346104/franji1"}, "edited": false, "score": 0, "creation_date": 1492087816, "post_id": 43379990, "comment_id": 73846485, "body": "@JerryCoffin Yes, that is the case for me (so the compiler is fine).  I did not realize that a definition is ALSO a declaration.  I got confused when I saw that a prototype is also a declaration (misinterpreted it as <i>a declaration is a prototype</i>)."}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 14, "last_activity_date": 1492033270, "last_edit_date": 1492033270, "creation_date": 1492032701, "answer_id": 43379990, "question_id": 43379880, "link": "https://stackoverflow.com/questions/43379880/are-function-prototypes-necessary-for-c/43379990#43379990", "title": "Are function prototypes necessary for C++?", "body": "<p>It has been true of C++ since the beginning (although in C++ it's just called a \"declaration\", not a \"prototype\").</p>\n\n<p>As C existed decades ago, it allowed you to call a function without declaring it. You <em>could</em>, however, declare a function if you wanted to--usually to tell the compiler that it had a return type different from what the compiler would deduce on its own. So, in C a function declaration looks something like this:</p>\n\n<pre><code>long f();\n</code></pre>\n\n<p>Note that empty parens there. That's what separates a function \"declaration\" from a function \"prototype\" (though a prototype is basically a superset of a declaration, so a prototype also declares the function in question). A prototype always has something inside the parens to indicate the number and type of parameters the function accepts, on this general order:</p>\n\n<pre><code>short g(int a, double b);\n</code></pre>\n\n<p>If it doesn't accept any parameters, you have to put in <code>void</code> to indicate that:</p>\n\n<pre><code>int h(void);\n</code></pre>\n\n<p>If you leave the parens empty, that (as noted above) means it's a function declaration instead of a prototype--and that means you're telling the compiler the function's return type, but you're <em>not</em> telling it anything about the number or type of parameters.</p>\n\n<p>C++ (since before it was called C++, if I recall correctly) has only had one concept instead of the two in C. In C++ every function must be declared--and a declaration always includes the number of parameters, and the type of each. This is absolutely necessary to support (for one obvious example) function overloading, where the correct function to call is determined from the number and types of arguments you pass in the call.</p>\n\n<p>A function definition in C++ also acts as a function declaration. Every function must be declared, but the declaration doesn't have to be separate from the definition.</p>\n\n<p>In reasonably modern C, you normally get pretty much the same--that is, a \"new\" (i.e., not ancient) type function definition also acts as a prototype for that function. As C was originally defined, it included a syntax for a function definition that looked like this:</p>\n\n<pre><code>int f(a, b, c) \nint a;\nshort b;\nlong c;\n{\n    // function body here\n}\n</code></pre>\n\n<p>This defines the function, but the compiler treats it only as a function declaration, not a prototype--that is, it tells the compiler the return type, but the number and types of parameters (even though they're specified) are not used by the compiler in the same way they would be with a function prototype. C++ has never used or supported this style of function definition though.</p>\n"}], "owner": {"reputation": 2032, "user_id": 4805357, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/muA8J.jpg?s=128&g=1", "display_name": "SDG", "link": "https://stackoverflow.com/users/4805357/sdg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1942, "favorite_count": 5, "accepted_answer_id": 43379990, "answer_count": 1, "score": 4, "last_activity_date": 1492033270, "creation_date": 1492032220, "last_edit_date": 1492032388, "question_id": 43379880, "link": "https://stackoverflow.com/questions/43379880/are-function-prototypes-necessary-for-c", "title": "Are function prototypes necessary for C++?", "body": "<p>Basically, I am reading through <a href=\"https://rads.stackoverflow.com/amzn/click/com/0078820251\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">this</a> book right here and in <code>Section 1.6: Some Differences between C and C++</code> it is stated: </p>\n\n<blockquote>\n  <p>Another subtle difference between C and C++ is that in a C++ program,\n  all functions must be prototyped.</p>\n</blockquote>\n\n<p>I am sure that this is not true from all the <code>C++</code> programs that I have written. Is this only true for some versions of <code>C++</code>? Is it also true for <code>C</code>?</p>\n"}, {"tags": ["c++", "arrays", "g++"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1492032438, "post_id": 43379865, "comment_id": 73821947, "body": "Alphabet soup naming is a disincentive to debugging."}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 1, "creation_date": 1492033000, "post_id": 43379865, "comment_id": 73822163, "body": "I am guessing, <a href=\"https://www.hackerrank.com/challenges/bitset-1\" rel=\"nofollow noreferrer\">this</a> is the problem you are trying to solve?. If so, you will need to use a bit array, possibly, <code>std::vector&lt;bool&gt;</code>. But there is a further optimization where you do not need to store all the values taking advantage of the fact that repetition will only happen if a previous value is equal to the next."}, {"owner": {"reputation": 632, "user_id": 4238643, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/45eebbdb12f68bec20e0e944157faad4?s=128&d=identicon&r=PG&f=1", "display_name": "Abhijatya Singh", "link": "https://stackoverflow.com/users/4238643/abhijatya-singh"}, "edited": false, "score": 0, "creation_date": 1492034479, "post_id": 43379865, "comment_id": 73822755, "body": "Similar problem is given..."}], "answers": [{"comments": [{"owner": {"reputation": 632, "user_id": 4238643, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/45eebbdb12f68bec20e0e944157faad4?s=128&d=identicon&r=PG&f=1", "display_name": "Abhijatya Singh", "link": "https://stackoverflow.com/users/4238643/abhijatya-singh"}, "edited": false, "score": 0, "creation_date": 1492032727, "post_id": 43379944, "comment_id": 73822065, "body": "When using vector it hangs without any output."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 632, "user_id": 4238643, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/45eebbdb12f68bec20e0e944157faad4?s=128&d=identicon&r=PG&f=1", "display_name": "Abhijatya Singh", "link": "https://stackoverflow.com/users/4238643/abhijatya-singh"}, "edited": false, "score": 0, "creation_date": 1492033333, "post_id": 43379944, "comment_id": 73822304, "body": "@AbhijatyaSingh <code>set&lt;long&gt; result(array.begin(), array.end());</code> is insanely expensive  with a hundred million elements. Wait a while. Actually, rethink your algorithm."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1492033617, "post_id": 43379944, "comment_id": 73822432, "body": "Another small niggle: <code>long mod= pow(2, 31);</code> has room for weirdness and improvement. You should get the same result from <code>long mod= 1 &lt;&lt; 31;</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1492034046, "post_id": 43379944, "comment_id": 73822605, "body": "And stopping to think about that for a second, if long is 32 bits, you&#39;ve wandered into signed overflow."}, {"owner": {"reputation": 632, "user_id": 4238643, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/45eebbdb12f68bec20e0e944157faad4?s=128&d=identicon&r=PG&f=1", "display_name": "Abhijatya Singh", "link": "https://stackoverflow.com/users/4238643/abhijatya-singh"}, "edited": false, "score": 0, "creation_date": 1492034324, "post_id": 43379944, "comment_id": 73822698, "body": "Thats correct ong mod= 1 &lt;&lt; 31; get the same result and same issue as pow(2, 31)."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1492035422, "post_id": 43379944, "comment_id": 73823145, "body": "use <code>1ul &lt;&lt; 31</code>   (1 &lt;&lt; 31 is implementation-defined and likely to be a negative number if 32-bit ints)"}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 2, "last_activity_date": 1492032975, "last_edit_date": 1492032975, "creation_date": 1492032501, "answer_id": 43379944, "question_id": 43379865, "link": "https://stackoverflow.com/questions/43379865/finding-unique-element-in-a-long-array-gives-segmentation-fault/43379944#43379944", "title": "Finding unique element in a long array gives segmentation fault?", "body": "<p><code>long array[n];</code> is not Standard C++. In addition, given a sufficiently large <code>n</code> it will overrun your Automatic storage and make you have a very bad day. Consider using <code>std::vector&lt;long&gt; array(n);</code> instead.</p>\n\n<p>The math: </p>\n\n<p><code>long array[n];</code> with your input resolves to <code>long array[100000000];</code></p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/language/types\" rel=\"nofollow noreferrer\"><code>long</code> is at least 4 bytes</a>  This means you are asking for a minimum of 100000000 * 4 bytes = 400000000 bytes = around 400 MB Automatic Storage. </p>\n\n<p>Typical Automatic data store is a stack of approximately 1-10 MB. </p>\n"}, {"comments": [{"owner": {"reputation": 632, "user_id": 4238643, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/45eebbdb12f68bec20e0e944157faad4?s=128&d=identicon&r=PG&f=1", "display_name": "Abhijatya Singh", "link": "https://stackoverflow.com/users/4238643/abhijatya-singh"}, "edited": false, "score": 0, "creation_date": 1492033252, "post_id": 43380074, "comment_id": 73822263, "body": "This code hangs the execution and terminal goes still"}, {"owner": {"reputation": 871, "user_id": 4791780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28204a34258b379362aa389edf2ad90d?s=128&d=identicon&r=PG&f=1", "display_name": "Agam", "link": "https://stackoverflow.com/users/4791780/agam"}, "reply_to_user": {"reputation": 632, "user_id": 4238643, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/45eebbdb12f68bec20e0e944157faad4?s=128&d=identicon&r=PG&f=1", "display_name": "Abhijatya Singh", "link": "https://stackoverflow.com/users/4238643/abhijatya-singh"}, "edited": false, "score": 0, "creation_date": 1492033710, "post_id": 43380074, "comment_id": 73822467, "body": "This is happening because the size of the vector becomes so large that it can&#39;t be allocated in the stack and thus it hangs. I went to the problem you&#39;re trying to solve and it will need bit array to be implemented with optimizations."}], "tags": [], "owner": {"reputation": 871, "user_id": 4791780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28204a34258b379362aa389edf2ad90d?s=128&d=identicon&r=PG&f=1", "display_name": "Agam", "link": "https://stackoverflow.com/users/4791780/agam"}, "is_accepted": false, "score": 0, "last_activity_date": 1492033095, "creation_date": 1492033095, "answer_id": 43380074, "question_id": 43379865, "link": "https://stackoverflow.com/questions/43379865/finding-unique-element-in-a-long-array-gives-segmentation-fault/43380074#43380074", "title": "Finding unique element in a long array gives segmentation fault?", "body": "<p>How about this:</p>\n\n<pre><code>vector&lt;long&gt;  v;\nv.push_back(s % mod);\nfor (int i = 1; i &lt; n; i++) {\n    long temp = v[i-1] * p + q;\n    v.push_back(temp % mod);\n}\n</code></pre>\n\n<p>This way you will not have to define the size of the vector and let it handle it dynamically.</p>\n"}, {"comments": [{"owner": {"reputation": 632, "user_id": 4238643, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/45eebbdb12f68bec20e0e944157faad4?s=128&d=identicon&r=PG&f=1", "display_name": "Abhijatya Singh", "link": "https://stackoverflow.com/users/4238643/abhijatya-singh"}, "edited": false, "score": 0, "creation_date": 1492034401, "post_id": 43380216, "comment_id": 73822723, "body": "Testing team is created test cases like that."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 632, "user_id": 4238643, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/45eebbdb12f68bec20e0e944157faad4?s=128&d=identicon&r=PG&f=1", "display_name": "Abhijatya Singh", "link": "https://stackoverflow.com/users/4238643/abhijatya-singh"}, "edited": false, "score": 0, "creation_date": 1492034835, "post_id": 43380216, "comment_id": 73822906, "body": "Then wait till it terminates of fix it."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 2, "last_activity_date": 1492033811, "creation_date": 1492033811, "answer_id": 43380216, "question_id": 43379865, "link": "https://stackoverflow.com/questions/43379865/finding-unique-element-in-a-long-array-gives-segmentation-fault/43380216#43380216", "title": "Finding unique element in a long array gives segmentation fault?", "body": "<p>On one side VLA is not legal C++ code, on another you do not need that array at all - you just waste memory:</p>\n\n<pre><code>cin &gt;&gt; n &gt;&gt; s &gt;&gt; p &gt;&gt; q;\n\nset&lt;long&gt; result;\nlong value = 0;\nfor(long i = 0; i &lt; n; i++){\n    value = ( i == 0 ? s : value * p + q ) % mod;\n    result.insert( value );\n}\n\ncout &lt;&lt; result.size() &lt;&lt; endl;\n</code></pre>\n\n<p>To speed up you code consider using <code>std::unordered_set</code> instead of <code>std::set</code></p>\n"}], "owner": {"reputation": 632, "user_id": 4238643, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/45eebbdb12f68bec20e0e944157faad4?s=128&d=identicon&r=PG&f=1", "display_name": "Abhijatya Singh", "link": "https://stackoverflow.com/users/4238643/abhijatya-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1492033811, "creation_date": 1492032132, "question_id": 43379865, "link": "https://stackoverflow.com/questions/43379865/finding-unique-element-in-a-long-array-gives-segmentation-fault", "title": "Finding unique element in a long array gives segmentation fault?", "body": "<p>I was given a problem to find unique elements in a array formed by using modulo operator over a long integers. So I have written code as:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;cmath&gt;\n#include &lt;algorithm&gt;\n#include &lt;set&gt;\n\nusing namespace std;\n\nint main(){\n    long n;\n    long s;\n    long p;\n    long q;\n    long temp;\n    long mod= pow(2, 31);\n\n    cin &gt;&gt; n &gt;&gt; s &gt;&gt; p &gt;&gt; q;\n\n    long array[n];\n\n    array[0] = (s % mod);\n\n    for(long i = 1; i &lt; n; i++){\n        temp = array[i-1]*p+q;\n        array[i] = (temp % mod);\n    }\n\n    set&lt;long&gt; result(array, array + n);\n    cout &lt;&lt; result.size() &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>For smaller input the code runs perfectly fine. When it get tested for input:</p>\n\n<pre><code>100000000 1506922183 1236189611 306853238\n</code></pre>\n\n<p>It is giving the segmentation fault error. \nWhere I am going wrong?\nThanks.</p>\n"}, {"tags": ["c++", "performance", "memory-management", "execution-time"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 1, "creation_date": 1492032198, "post_id": 43379814, "comment_id": 73821851, "body": "You can compare to how benchmarking libraries such as <a href=\"https://nonius.io/\" rel=\"nofollow noreferrer\">nonius</a> do it. Generally you <i>can</i> implement this (minus the memory usage probably), but I don&#39;t see the advantage of making it a class instead of a function."}], "answers": [{"comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1492033061, "post_id": 43380027, "comment_id": 73822184, "body": "Function pointers and <code>std::function</code> and the template version that takes any callable together with a make function or C++17 deduction guides."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 1, "last_activity_date": 1492032894, "creation_date": 1492032894, "answer_id": 43380027, "question_id": 43379814, "link": "https://stackoverflow.com/questions/43379814/invoke-a-function-in-context-of-a-class-instance-or-method-for-performance-analy/43380027#43380027", "title": "Invoke a function in context of a class instance or method for performance analysis", "body": "<p>Maybe you are looking for function pointers, which could be used as shown in the following simplified code:</p>\n\n<pre><code>typedef int(*aFooFunctionType)(void);\n\nclass PerformanceTest {\npublic:\n    PerformanceTest(aFooFunctionType fooFuncPtr) { m_fooFuncPtr = fooFuncPtr; }\n    void test() {\n        int x = m_fooFuncPtr();\n        // do something with x (or not...)\n    };\nprivate:\n    aFooFunctionType m_fooFuncPtr;\n};\n\n\nint fooFunc(void) {\n    return 100;\n}\n\nint main(int argc, char* argv[]) {\n\n    PerformanceTest pTest(fooFunc);\n    pTest.test();\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1492033060, "creation_date": 1492033060, "answer_id": 43380065, "question_id": 43379814, "link": "https://stackoverflow.com/questions/43379814/invoke-a-function-in-context-of-a-class-instance-or-method-for-performance-analy/43380065#43380065", "title": "Invoke a function in context of a class instance or method for performance analysis", "body": "<p>You can wrap almost anything in a <code>std::function</code>. I would suggest use of a <code>std::function</code> in <code>PerfWrapper</code> to get the execution time. I don't have anything for measuring memory usage, though.</p>\n\n<p>Example code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n#include &lt;chrono&gt;\n\nclass PerfWrapper\n{\n   public:\n\n      PerfWrapper(std::function&lt;void()&gt; f) : f_(f), execution_time_{} {}\n\n      void invoke()\n      {\n         auto begin = std::chrono::high_resolution_clock::now();\n         f_();\n         auto end = std::chrono::high_resolution_clock::now();\n         execution_time_ = end-begin;\n      }\n\n      double execution_time()\n      {\n         return execution_time_.count();\n      } \n\n      std::function&lt;void()&gt; f_;\n      std::chrono::duration&lt;double&gt; execution_time_;\n};\n\nunsigned long foo()\n{\n   unsigned long sum{0};\n   for (int i=0; i&lt;10000; ++i)\n      for (int j=0; j&lt;2000; ++j) \n         sum += i * j;\n   return sum;\n}\n\nint main()\n{\n   PerfWrapper pr([](){std::cout &lt;&lt; foo() &lt;&lt; std::endl;});\n   pr.invoke();\n   std::cout &lt;&lt; \"Execution time: \" &lt;&lt; pr.execution_time() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Output on my setup:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>99940005000000\nExecution time: 0.0454077\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "is_accepted": false, "score": 0, "last_activity_date": 1492033381, "creation_date": 1492033381, "answer_id": 43380138, "question_id": 43379814, "link": "https://stackoverflow.com/questions/43379814/invoke-a-function-in-context-of-a-class-instance-or-method-for-performance-analy/43380138#43380138", "title": "Invoke a function in context of a class instance or method for performance analysis", "body": "<p>Consider using a template free function, with a reference parameter to extract the performance data.  This example will:</p>\n\n<ul>\n<li>Accept function pointers and functors (including <code>std::function</code>, which means it can work with methods, too).</li>\n<li>Return the same value the proxied function call returns, so you can use both the measurement data <em>and</em> the call result.</li>\n</ul>\n\n<hr>\n\n<pre><code>struct measurement {\n    double execution_time;\n    double memory_usage;\n};\n\ntemplate &lt;typename FN, typename... T&gt;\ninline auto measure(FN fn, measurement&amp; m, T&amp;&amp;... args) -&gt; decltype(fn(std::forward&lt;T&gt;(args)...))\n{\n    auto&amp;&amp; result = fn(std::forward&lt;T&gt;(args)...);\n\n    m.execution_time = 0; // example\n    m.memory_usage = 0;\n\n    return result;\n}\n</code></pre>\n"}], "owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1492033401, "creation_date": 1492031925, "last_edit_date": 1492033401, "question_id": 43379814, "link": "https://stackoverflow.com/questions/43379814/invoke-a-function-in-context-of-a-class-instance-or-method-for-performance-analy", "title": "Invoke a function in context of a class instance or method for performance analysis", "body": "<p>Performance analysis question: Is there a way to execute a function in context of a class, or a method of a class?</p>\n\n<p>I would like to analyze the performance of a specific segment of logic. What I envision is something like this</p>\n\n<p>(Disclaimer: rough example just to illustrate a point. Will not compile).</p>\n\n<pre><code>const int DEBUG_LEVEL = 7;\n\nclass PerfWrapper {\npublic:\n    PerfWrapper(int f) {} // Constructor: take function as argument\n    void invoke() {} // Invoke the function passed as argument\n    double execution_time() {\n        begin = std::chrono::high_resolution_clock::now();\n        // etc..\n    } \n    double memory_usage() {}\nprivate:\n}\nint foo() {\n    int sum{0}\n    for (int i=0; i&lt;1000; ++i)\n        for (int j=0; j&lt;MAX; ++j) \n            sum += i * j;\n    return sum;\n}\nint main() {\n    if (DEBUG_LEVEL = 7)\n        PerfWrapper p(foo); // Create an instance, passing foo as an argument\n\n        // below foo() is called in context of the performance wrapper\n        int myTime = p.invoke().execution_time(); // Invokes foo in context of p and tracks execution time\n        int myMemory = p.invoke().memory_usage(); // Same, except gathering memory usage info.\n        // etc..\n    }\n}\n</code></pre>\n\n<p>Here we have class PerfWrapper. When instantiated, resulting methods on the object have the ability to accept a function as an argument, and execute a function in context of the class. It will take perf measurements, results of which are accessible through the interface.</p>\n\n<p>Note the \"DEBUG_LEVEL\" setting. If performance profiling is needed then simply set the DEBUG_LEVEL to 7.</p>\n\n<p>Have you seen anything like this? If not, how is the analysis best accomplished? I know that it seems a bit out there, but hopefully not so much. Thx, Keith :^)</p>\n"}, {"tags": ["c++", "assembly", "x86"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1492030458, "post_id": 43379402, "comment_id": 73821073, "body": "You can move from memory to a register, or from a register to memory, but you can&#39;t move directly from memory to memory."}], "answers": [{"tags": [], "owner": {"reputation": 1703, "user_id": 6315982, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b89e76a110d9368e3282db2729f65cf6?s=128&d=identicon&r=PG&f=1", "display_name": "P. Kouvarakis", "link": "https://stackoverflow.com/users/6315982/p-kouvarakis"}, "is_accepted": true, "score": 2, "last_activity_date": 1492030572, "creation_date": 1492030572, "answer_id": 43379504, "question_id": 43379402, "link": "https://stackoverflow.com/questions/43379402/why-does-this-valid-assembly-with-mov-arithmetic-not-compile-when-using-local-va/43379504#43379504", "title": "Why does this valid assembly with mov arithmetic not compile when using local vars?", "body": "<p>x86 instruction set does not have memory to memory move instruction. All instructions involve either two registers or one register and a memory location. The variable <code>localVar</code> is a memory location. Essentially what you are writing is:</p>\n\n<pre><code>movdw [ebp-4], [esp+4]\n</code></pre>\n\n<p>Instead you should have:</p>\n\n<pre><code>mov eax, [esp+4]\nmov localVar, eax\n</code></pre>\n"}], "owner": {"reputation": 4499, "user_id": 3262003, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3c8c191ae7c07779ad884cac900c3247?s=128&d=identicon&r=PG&f=1", "display_name": "noobcoder", "link": "https://stackoverflow.com/users/3262003/noobcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 1, "closed_date": 1492080405, "accepted_answer_id": 43379504, "answer_count": 1, "score": 0, "last_activity_date": 1492030572, "creation_date": 1492030194, "question_id": 43379402, "link": "https://stackoverflow.com/questions/43379402/why-does-this-valid-assembly-with-mov-arithmetic-not-compile-when-using-local-va", "closed_reason": "Duplicate", "title": "Why does this valid assembly with mov arithmetic not compile when using local vars?", "body": "<p>I am using Visual Studio 2017 and compiling for 32-bit.</p>\n\n<p>Say I have the following code snippet. The statements which don't compile give \"invalid operand\" errors.</p>\n\n<pre><code>int localVar = 0;\n__asm {\n    mov eax,      [esp+4]         &lt;----- compiles\n    mov localVar,  esp            &lt;----- compiles\n    mov localVar, [esp]           &lt;----- doesn't compile\n    mov localVar, [esp+4]         &lt;----- doesn't compile\n}\n</code></pre>\n\n<p>I'm aware that the 2nd and 3rd statement aren't equivalent, but I wanted to highlight the following point...</p>\n\n<p>Essentially it appears that if I'm using brackets around the second operand in this manner AND storing the results into a local variable it doesn't work. I was under the impression using brackets like that was valid syntax, as proven by the first statement which stores the result into <code>eax</code>.</p>\n\n<p>I have speculated it might be something to do with my variable type and I have tried to change <code>mov</code> to <code>movl</code> but that doesn't work either.</p>\n\n<p>Basically my ultimate goal is for this to work properly:\n<code>mov localVar, [esp+4]</code>\nHow do i achieve this? The type of <code>localVar</code> doesn't have to be <code>int</code>... I just thought that should work.</p>\n"}, {"tags": ["c++", "unit-testing", "cmake", "googletest"], "answers": [{"tags": [], "owner": {"reputation": 481, "user_id": 7736492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f122a4c8480fd04fc3266a5ed983633b?s=128&d=identicon&r=PG&f=1", "display_name": "guenni_90", "link": "https://stackoverflow.com/users/7736492/guenni-90"}, "is_accepted": true, "score": 2, "last_activity_date": 1492062212, "creation_date": 1492062212, "answer_id": 43384375, "question_id": 43379329, "link": "https://stackoverflow.com/questions/43379329/how-can-i-run-gtest-in-c-code-using-cmake-tests-not-seen/43384375#43384375", "title": "How can I run gtest in C++ code using CMake? (tests not seen)", "body": "<p>In your <strong>tests/CMakeLists.txt</strong> you should substitude <em>add_executable(tests_run gtest.cpp)</em> by <em>add_executable(tests_run ${SOURCE_FILES})</em>. The test you wrote is not getting compiled as you forgot to add it to <em>add_executable</em></p>\n"}], "owner": {"reputation": 3, "user_id": 7858294, "user_type": "registered", "profile_image": "https://graph.facebook.com/1309224645782186/picture?type=large", "display_name": "Anna S", "link": "https://stackoverflow.com/users/7858294/anna-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1682, "favorite_count": 1, "accepted_answer_id": 43384375, "answer_count": 1, "score": 0, "last_activity_date": 1492062212, "creation_date": 1492029874, "question_id": 43379329, "link": "https://stackoverflow.com/questions/43379329/how-can-i-run-gtest-in-c-code-using-cmake-tests-not-seen", "title": "How can I run gtest in C++ code using CMake? (tests not seen)", "body": "<p>I'm working on Windows using CLion on my university C++ project and tried to add some example tests code. I have included latest Google Test framework from GitHub. I have got separate directory for source and tests. The problem is that tests are not seen by compiler. I get info \"Empty test suite.\", although main function is properly invoked.</p>\n\n<p>My directory looks like follows:</p>\n\n<pre><code>- root\n- src\n- tests\n    * tests/components/ColorTest.cpp\n    * gtest.cpp\n    * CMakeLists.txt\n- CMakeLists.txt\n</code></pre>\n\n<p>Below is the code:</p>\n\n<p><strong>CMakeLists.txt</strong></p>\n\n<pre><code>cmake_minimum_required(VERSION 3.7)\nproject(SI_lab_2)\n\nset(CMAKE_CXX_STANDARD 14)\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=gnu++0x\")\n\ninclude_directories(src)\ninclude_directories(tests)\n\nadd_subdirectory(src)\nadd_subdirectory(tests)\n</code></pre>\n\n<p><strong>tests/CMakeLists.txt</strong></p>\n\n<pre><code>cmake_minimum_required(VERSION 3.7)\nproject(tests)\n\nadd_subdirectory(lib/googletest)\n\nenable_testing()\n\ninclude_directories(${gtest_SOURCE_DIR_}/include ${gtest_SOURCE_DIR_})\n\nset(SOURCE_FILES\n        gtest.cpp\n        tests/components/ColorTests.cpp)\n\nadd_executable(tests_run gtest.cpp)\n\ntarget_link_libraries(tests_run gtest gtest_main)\n\nadd_test(eq tests_run)\n</code></pre>\n\n<p><strong>tests/tests/components/ColorTests.cpp</strong></p>\n\n<pre><code>#include &lt;gtest/gtest.h&gt;\n\nTEST(ColorTests, eq)\n{\n    EXPECT_EQ(1, 0);\n}\n\nTEST(ColorTests, noteq)\n{\n    EXPECT_NE(1, 0);\n}\n</code></pre>\n\n<p><strong>tests/gtest.cpp</strong></p>\n\n<pre><code>#include &lt;gtest/gtest.h&gt;\n\nint main(int argc, char* argv[])\n{\n    ::testing::InitGoogleTest(&amp;argc, argv);\n    return RUN_ALL_TESTS();\n}\n</code></pre>\n\n<p>Hope you can help!</p>\n"}, {"tags": ["c++", "visual-studio-2010", "cmake", "itk", "cmake-gui"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1492033124, "post_id": 43379163, "comment_id": 73822197, "body": "Have you checked <a href=\"http://stackoverflow.com/questions/11187157/cmake-says-c-compiler-is-broken\">that question</a> (and answers to it)? It describes similar error."}, {"owner": {"reputation": 2193, "user_id": 1733955, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/BmbmP.png?s=128&g=1", "display_name": "Th. Thielemann", "link": "https://stackoverflow.com/users/1733955/th-thielemann"}, "edited": false, "score": 0, "creation_date": 1492079659, "post_id": 43379163, "comment_id": 73840580, "body": "Is your environment able to compile a simple project using the mentioned compiler? If yes the environment running cmake from is the reason."}, {"owner": {"reputation": 31426, "user_id": 4763489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89773f016f1f4cc2c4e790a6c3f7b004?s=128&d=identicon&r=PG&f=1", "display_name": "Florian", "link": "https://stackoverflow.com/users/4763489/florian"}, "edited": false, "score": 0, "creation_date": 1492085711, "post_id": 43379163, "comment_id": 73844939, "body": "<code>&#47;Fo&quot;cmTryCompileExec1875248370.dir\\Debug\\\\&quot;</code> looks suspicious. Delete your binary output directory, possibly update to a new CMake version and try again."}, {"owner": {"reputation": 61, "user_id": 7556281, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh6.googleusercontent.com/-pJAtIgDJrIs/AAAAAAAAAAI/AAAAAAAAAFo/bh5i1eWiwrI/photo.jpg?sz=128", "display_name": "Khaled", "link": "https://stackoverflow.com/users/7556281/khaled"}, "reply_to_user": {"reputation": 2193, "user_id": 1733955, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/BmbmP.png?s=128&g=1", "display_name": "Th. Thielemann", "link": "https://stackoverflow.com/users/1733955/th-thielemann"}, "edited": false, "score": 0, "creation_date": 1492415464, "post_id": 43379163, "comment_id": 73950624, "body": "@Th.Thielemann yes it works fine with a simple project."}, {"owner": {"reputation": 2193, "user_id": 1733955, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/BmbmP.png?s=128&g=1", "display_name": "Th. Thielemann", "link": "https://stackoverflow.com/users/1733955/th-thielemann"}, "edited": false, "score": 0, "creation_date": 1492496595, "post_id": 43379163, "comment_id": 73985353, "body": "Don&#39;t know how but you must set the right environment for your VS."}, {"owner": {"reputation": 61, "user_id": 7556281, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh6.googleusercontent.com/-pJAtIgDJrIs/AAAAAAAAAAI/AAAAAAAAAFo/bh5i1eWiwrI/photo.jpg?sz=128", "display_name": "Khaled", "link": "https://stackoverflow.com/users/7556281/khaled"}, "edited": false, "score": 0, "creation_date": 1504283211, "post_id": 43379163, "comment_id": 78969769, "body": "Sorry for responding so late. Finally I installed Windows 8.1 and built ITK with the same cmake and compiler version and it worked just fine."}], "owner": {"reputation": 61, "user_id": 7556281, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh6.googleusercontent.com/-pJAtIgDJrIs/AAAAAAAAAAI/AAAAAAAAAFo/bh5i1eWiwrI/photo.jpg?sz=128", "display_name": "Khaled", "link": "https://stackoverflow.com/users/7556281/khaled"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1863, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1492029390, "creation_date": 1492029220, "last_edit_date": 1492029390, "question_id": 43379163, "link": "https://stackoverflow.com/questions/43379163/the-c-compiler-cl-is-not-able-to-compile-a-simple-test-program", "title": "The C compiler &quot;cl&quot; is not able to compile a simple test program", "body": "<p>I am having a trouble building ITK library (InsightToolkit-4.1.0) with cmake-gui (cmake-2.8.8-win32-x86) under Windows 7 using Visual Studio 2010, as mentioned here:\n<a href=\"https://itk.org/Wiki/ITK/Configuring_and_Building/VisualStudio\" rel=\"nofollow noreferrer\">https://itk.org/Wiki/ITK/Configuring_and_Building/VisualStudio</a> . I have done everything step by step but I don't understand what is the problem, I specified the visual studio 10 generator with default native compilers and got these errors. </p>\n\n<pre><code>Check for working C compiler using: Visual Studio 10\nCheck for working C compiler using: Visual Studio 10 -- broken\n**CMake Error at C:/ITK/CMake/share/cmake-2.8/Modules/CMakeTestCCompiler.cmake:52 (MESSAGE):\n  The C compiler \"cl\" is not able to compile a simple test program.\n  It fails with the following output:\n   Change Dir: C:/ITK/Build/CMakeFiles/CMakeTmp\n\n  Run Build Command:C:\\PROGRA~2\\MICROS~2.0\\Common7\\IDE\\devenv.com\n  CMAKE_TRY_COMPILE.sln /build Debug /project cmTryCompileExec1875248370\n\n  Microsoft (R) Visual Studio Version 10.0.30319.1.\n  Copyright (C) Microsoft Corp.  All rights reserved.\n  1&gt;------ Build started: Project: cmTryCompileExec1875248370, Configuration:\n  Debug Win32 ------\n  1&gt; Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 16.00.30319.01\n  for 80x86\n  1&gt; Copyright (C) Microsoft Corporation.  All rights reserved.\n  1&gt; \n  1&gt; cl /c /Zi /W3 /WX- /Od /Ob0 /Oy- /D WIN32 /D _WINDOWS /D _DEBUG /D\n  \"CMAKE_INTDIR=\\\"Debug\\\"\" /D _MBCS /Gm- /RTC1 /MDd /GS /fp:precise\n  /Zc:wchar_t /Zc:forScope /Fo\"cmTryCompileExec1875248370.dir\\Debug\\\\\"\n  /Fd\"C:/ITK/Build/CMakeFiles/CMakeTmp/Debug/cmTryCompileExec1875248370.pdb\"\n  /Gd /TC /analyze- /errorReport:prompt\n  C:\\ITK\\Build\\CMakeFiles\\CMakeTmp\\testCCompiler.c /Zm1000 \n  1&gt; \n  1&gt; testCCompiler.c\n  1&gt;LINK : fatal error LNK1123: failure during conversion to COFF: file\n  invalid or corrupt\n  ========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped\n  ==========\n\n\n  CMake will not be able to correctly generate this project.\nCall Stack (most recent call first):\n  CMakeLists.txt:7 (project)**\n\n\nConfiguring incomplete, errors occurred!\n</code></pre>\n"}, {"tags": ["c++", "linux", "multithreading", "visual-studio-2017"], "comments": [{"owner": {"reputation": 1637, "user_id": 6909048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2db37ccd50ab0fb72ce3532577b50b?s=128&d=identicon&r=PG", "display_name": "Andrey Turkin", "link": "https://stackoverflow.com/users/6909048/andrey-turkin"}, "edited": false, "score": 0, "creation_date": 1492051710, "post_id": 43378910, "comment_id": 73827326, "body": "Even though you are using VS2017 and Windows&#39; Linux subsystem, your program is built and executed on Linux. As such, answer from the linked question (that is, &quot;link with pthread library&quot;) applies to your situation; you just need to figure out how to make VS do that."}, {"owner": {"reputation": 172, "user_id": 2763102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c3a2e5a757d5d3c01b2aab42316992b?s=128&d=identicon&r=PG&f=1", "display_name": "Zeerou", "link": "https://stackoverflow.com/users/2763102/zeerou"}, "reply_to_user": {"reputation": 1637, "user_id": 6909048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2db37ccd50ab0fb72ce3532577b50b?s=128&d=identicon&r=PG", "display_name": "Andrey Turkin", "link": "https://stackoverflow.com/users/6909048/andrey-turkin"}, "edited": false, "score": 0, "creation_date": 1492062344, "post_id": 43378910, "comment_id": 73830379, "body": "That&#39;s why I asked here, I&#39;m aware of that. I followed most of the tutorials how to tell VS to use pthread in compilation, but unsuccessfully."}, {"owner": {"reputation": 1637, "user_id": 6909048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2db37ccd50ab0fb72ce3532577b50b?s=128&d=identicon&r=PG", "display_name": "Andrey Turkin", "link": "https://stackoverflow.com/users/6909048/andrey-turkin"}, "edited": false, "score": 3, "creation_date": 1492064703, "post_id": 43378910, "comment_id": 73831414, "body": "Fair enough, I guess. I&#39;m assuming platform toolset is &quot;Remote_GCC_1_0&quot;; all you need to do is add &quot;-pthread&quot; to compile and link command lines. VS configuration maps most g++ options to specific configuration values, but not this one. Go to project&#39;s configuration, &quot;C/C++ -&gt; All Options&quot;, add &quot;-pthread&quot; to &quot;Additional Options&quot; configuration value. Go to &quot;Linker -&gt; All Options&quot; and do the same."}, {"owner": {"reputation": 172, "user_id": 2763102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c3a2e5a757d5d3c01b2aab42316992b?s=128&d=identicon&r=PG&f=1", "display_name": "Zeerou", "link": "https://stackoverflow.com/users/2763102/zeerou"}, "reply_to_user": {"reputation": 1637, "user_id": 6909048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2db37ccd50ab0fb72ce3532577b50b?s=128&d=identicon&r=PG", "display_name": "Andrey Turkin", "link": "https://stackoverflow.com/users/6909048/andrey-turkin"}, "edited": false, "score": 0, "creation_date": 1492066328, "post_id": 43378910, "comment_id": 73832256, "body": "Finally solved. Thanks. Basically I followed what you said, and I had to add Additional Options for both file settings and project settings."}, {"owner": {"reputation": 1637, "user_id": 6909048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2db37ccd50ab0fb72ce3532577b50b?s=128&d=identicon&r=PG", "display_name": "Andrey Turkin", "link": "https://stackoverflow.com/users/6909048/andrey-turkin"}, "edited": false, "score": 0, "creation_date": 1492083910, "post_id": 43378910, "comment_id": 73843594, "body": "You shouldn&#39;t have to modify file settings - they are supposed to be inherited from project level. Something went wrong there but that&#39;s a separate issue from the thread issue"}, {"owner": {"reputation": 10487, "user_id": 840960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c79d55b76b6994dec3fb96bd1c7803bf?s=128&d=identicon&r=PG", "display_name": "Shlublu", "link": "https://stackoverflow.com/users/840960/shlublu"}, "reply_to_user": {"reputation": 1637, "user_id": 6909048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2db37ccd50ab0fb72ce3532577b50b?s=128&d=identicon&r=PG", "display_name": "Andrey Turkin", "link": "https://stackoverflow.com/users/6909048/andrey-turkin"}, "edited": false, "score": 0, "creation_date": 1500363051, "post_id": 43378910, "comment_id": 77288744, "body": "@AndreyTurkin Thanks Andrey. I had the same problem as I initially defined the <code>-pthread</code> option in C/C++ only, not in Linker. So your answer helped. You should turn it to a plain answer, by the way."}], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 3042865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6915dc67f1bbf0d143dcd843cd506868?s=128&d=identicon&r=PG&f=1", "display_name": "NotSoBrainy", "link": "https://stackoverflow.com/users/3042865/notsobrainy"}, "is_accepted": false, "score": 2, "last_activity_date": 1565210578, "creation_date": 1565210578, "answer_id": 57402059, "question_id": 43378910, "link": "https://stackoverflow.com/questions/43378910/how-to-enable-multithreading-for-linux-app-in-visual-studio-2017/57402059#57402059", "title": "How to enable multithreading for Linux app in Visual Studio 2017", "body": "<p>I know that @Andrey Turkin has already given the answer in the comments. I want to add it as Answer here as not all will read the comments. I have been searching for the same for 2 days now and @Andrey Turkin helped me solve this. Please follow his comment to clear this problem. </p>\n\n<p>Assuming platform toolset is \"Remote_GCC_1_0\"; all you need to do is add \"-pthread\" to compile and link command lines. VS configuration maps most g++ options to specific configuration values, but not this one. Go to project's configuration, \"C/C++ -> All Options\", add \"-pthread\" to \"Additional Options\" configuration value. Go to \"Linker -> All Options\" and do the same.</p>\n"}], "owner": {"reputation": 172, "user_id": 2763102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c3a2e5a757d5d3c01b2aab42316992b?s=128&d=identicon&r=PG&f=1", "display_name": "Zeerou", "link": "https://stackoverflow.com/users/2763102/zeerou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1279, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1565210578, "creation_date": 1492028320, "last_edit_date": 1492055745, "question_id": 43378910, "link": "https://stackoverflow.com/questions/43378910/how-to-enable-multithreading-for-linux-app-in-visual-studio-2017", "title": "How to enable multithreading for Linux app in Visual Studio 2017", "body": "<p>I'm currently developing an multithreaded application for Linux in VS 2017.</p>\n\n<p>As Remote Linux machine I use built-in Ubuntu bash in Windows, which was the part of anniversary update.</p>\n\n<p>Compilation goes fine, the build is succesful. But right after running the program following error occurs.</p>\n\n<pre><code>  terminate called after throwing an instance of 'std::system_error'\n  what():  Enable multithreading to use std::thread: Operation not permitted\n</code></pre>\n\n<p>I tried to fiddle with linking and compilation settings. But I just blew the entire project.</p>\n\n<p>Did anybody encountered and solved this kind of problem? Thanks.</p>\n\n<p>Edit: this thread was flagged as duplicate. Let me explain why I think this is different. I'm developing on Windows host with VS2017, and Im trying to achieve working debugging in VS2017. I cannot edit directly the compilation routine commands as in suggested duplicate thread.</p>\n"}, {"tags": ["c++", "cocos2d-x", "codeblocks"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 7585238, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/ixnul.jpg?s=128&g=1", "display_name": "user7585238", "link": "https://stackoverflow.com/users/7585238/user7585238"}, "edited": false, "score": 0, "creation_date": 1492386470, "post_id": 43381855, "comment_id": 73943421, "body": "<a href=\"http://stackoverflow.com/questions/43431586/errors-while-building-class-cocos2d-x\" title=\"errors while building class cocos2d x\">stackoverflow.com/questions/43431586/&hellip;</a>"}, {"owner": {"reputation": 63, "user_id": 7585238, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/ixnul.jpg?s=128&g=1", "display_name": "user7585238", "link": "https://stackoverflow.com/users/7585238/user7585238"}, "edited": false, "score": 0, "creation_date": 1492386626, "post_id": 43381855, "comment_id": 73943452, "body": "pls i need asistance, im stuck on this"}, {"owner": {"reputation": 1562, "user_id": 1684389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qo2H3.jpg?s=128&g=1", "display_name": "Raydelto Hernandez", "link": "https://stackoverflow.com/users/1684389/raydelto-hernandez"}, "reply_to_user": {"reputation": 63, "user_id": 7585238, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/ixnul.jpg?s=128&g=1", "display_name": "user7585238", "link": "https://stackoverflow.com/users/7585238/user7585238"}, "edited": false, "score": 0, "creation_date": 1492482205, "post_id": 43381855, "comment_id": 73980858, "body": "Yes. How can we help you ?   If you&#39;re having the same error showed at the top of this thread and you&#39;re running ubuntu, you should run the install-deps-linux.sh  before running the <code>cocos run -p linux</code> command"}, {"owner": {"reputation": 63, "user_id": 7585238, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/ixnul.jpg?s=128&g=1", "display_name": "user7585238", "link": "https://stackoverflow.com/users/7585238/user7585238"}, "edited": false, "score": 0, "creation_date": 1492517841, "post_id": 43381855, "comment_id": 73998642, "body": "Actually i have problem with building custom class, here are the details   <a href=\"http://stackoverflow.com/questions/43431586/errors-while-building-class-cocos2d-x\" title=\"errors while building class cocos2d x\">stackoverflow.com/questions/43431586/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1562, "user_id": 1684389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qo2H3.jpg?s=128&g=1", "display_name": "Raydelto Hernandez", "link": "https://stackoverflow.com/users/1684389/raydelto-hernandez"}, "is_accepted": false, "score": 0, "last_activity_date": 1492044766, "creation_date": 1492044766, "answer_id": 43381855, "question_id": 43378854, "link": "https://stackoverflow.com/questions/43378854/error-in-code-blocks-while-building-cocos2d-x-hello-world-app/43381855#43381855", "title": "Error in code blocks while building cocos2d-x &quot;hello world&quot; app", "body": "<p>You should run ./frameworks/cocos2d-x/build/install-deps-linux.sh before building the project\ufeff</p>\n"}], "owner": {"reputation": 63, "user_id": 7585238, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/ixnul.jpg?s=128&g=1", "display_name": "user7585238", "link": "https://stackoverflow.com/users/7585238/user7585238"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 469, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492044766, "creation_date": 1492028127, "question_id": 43378854, "link": "https://stackoverflow.com/questions/43378854/error-in-code-blocks-while-building-cocos2d-x-hello-world-app", "title": "Error in code blocks while building cocos2d-x &quot;hello world&quot; app", "body": "<p>ERRORS: </p>\n\n<ul>\n<li><p>error: \u2018glfwSetWindowMonitor\u2019 was not declared in this scope</p></li>\n<li><p>recipe for target 'cocos2d/cocos/CMakeFiles/cocos2dInternal.dir/platform/desktop/CCGLViewImpl-desktop.cpp.o' failed</p></li>\n<li><p>recipe for target 'cocos2d/cocos/CMakeFiles/cocos2dInternal.dir/all' failed</p></li>\n<li><p>recipe for target 'all' failed\n<a href=\"https://i.stack.imgur.com/T0kKa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/T0kKa.png\" alt=\"enter image description here\"></a></p></li>\n</ul>\n"}, {"tags": ["c++", "r", "sparse-matrix", "eigen", "rcpp"], "comments": [{"owner": {"reputation": 17516, "user_id": 1345455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DrBTs.jpg?s=128&g=1", "display_name": "coatless", "link": "https://stackoverflow.com/users/1345455/coatless"}, "edited": false, "score": 2, "creation_date": 1492030947, "post_id": 43378812, "comment_id": 73821308, "body": "Sparse QR solver usage is detailed here: <a href=\"https://eigen.tuxfamily.org/dox/group__TopicSparseSystems.html\" rel=\"nofollow noreferrer\">eigen.tuxfamily.org/dox/group__TopicSparseSystems.html</a>"}, {"owner": {"reputation": 605, "user_id": 4524755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c625af1191c555ffe2b12039b4d65024?s=128&d=identicon&r=PG", "display_name": "tstev", "link": "https://stackoverflow.com/users/4524755/tstev"}, "reply_to_user": {"reputation": 17516, "user_id": 1345455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DrBTs.jpg?s=128&g=1", "display_name": "coatless", "link": "https://stackoverflow.com/users/1345455/coatless"}, "edited": false, "score": 0, "creation_date": 1492074032, "post_id": 43378812, "comment_id": 73836833, "body": "@coatless I have been through the Eigen documentation -  in all honesty (since I have no formal mathematics or programming education) it&#39;s very hard to read and understand. I really like Armadillo documentation - but from what I understand it currently works best with dense matrices without SuperLU library. Installing SuperLU is currently out of the question."}, {"owner": {"reputation": 6524, "user_id": 1887645, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/066e53489a81a9cbc3e5986c5cd3c39d?s=128&d=identicon&r=PG", "display_name": "Tom Wenseleers", "link": "https://stackoverflow.com/users/1887645/tom-wenseleers"}, "edited": false, "score": 0, "creation_date": 1567505025, "post_id": 43378812, "comment_id": 101973891, "body": "Would some iterative solver like in <a href=\"https://github.com/kisungyou/Rlinsolve\" rel=\"nofollow noreferrer\">github.com/kisungyou/Rlinsolve</a> or <a href=\"https://github.com/styvon/cPCG\" rel=\"nofollow noreferrer\">github.com/styvon/cPCG</a> be an option for this problem?"}, {"owner": {"reputation": 6524, "user_id": 1887645, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/066e53489a81a9cbc3e5986c5cd3c39d?s=128&d=identicon&r=PG", "display_name": "Tom Wenseleers", "link": "https://stackoverflow.com/users/1887645/tom-wenseleers"}, "edited": false, "score": 0, "creation_date": 1567522480, "post_id": 43378812, "comment_id": 101983572, "body": "Or Eigen&#39;s iterative solver, <a href=\"https://eigen.tuxfamily.org/dox/classEigen_1_1LeastSquaresConjugateGradient.html\" rel=\"nofollow noreferrer\">eigen.tuxfamily.org/dox/&hellip;</a> ? SparseM::slm.fit and speedglm::speedlm.fit may also be worth testing - they were the fastest sparse linear solvers for my problems in available R packages (with Intel MKL installed, which you get if you install Microsoft Open R)."}, {"owner": {"reputation": 605, "user_id": 4524755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c625af1191c555ffe2b12039b4d65024?s=128&d=identicon&r=PG", "display_name": "tstev", "link": "https://stackoverflow.com/users/4524755/tstev"}, "edited": false, "score": 0, "creation_date": 1567598969, "post_id": 43378812, "comment_id": 102009489, "body": "Hi Tom, thanks for the comments. Rlinsolve didnt work for my large datasets. Nor did speedglm or SparseM. Eventually I solved it with Eigen PCG solvers. Works like a charm within seconds. cPCG I didnt know about. Thanks will check that out."}], "answers": [{"comments": [{"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 1, "creation_date": 1492047022, "post_id": 43380842, "comment_id": 73826231, "body": "Rcpp Gallery post?"}, {"owner": {"reputation": 605, "user_id": 4524755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c625af1191c555ffe2b12039b4d65024?s=128&d=identicon&r=PG", "display_name": "tstev", "link": "https://stackoverflow.com/users/4524755/tstev"}, "edited": false, "score": 0, "creation_date": 1492074279, "post_id": 43380842, "comment_id": 73836995, "body": "@coatless, awesome! I chose SparseQR exactly for the reasons meantioned on the page you linked, namely; any matrix kind and recommended for large least square problems. I am about to test it on the larger datasets. I will report back asap."}, {"owner": {"reputation": 605, "user_id": 4524755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c625af1191c555ffe2b12039b4d65024?s=128&d=identicon&r=PG", "display_name": "tstev", "link": "https://stackoverflow.com/users/4524755/tstev"}, "edited": false, "score": 0, "creation_date": 1492074514, "post_id": 43380842, "comment_id": 73837133, "body": "@coatless, one question pure out of curiosity as I have never programmed in c++; is there a reason why you don&#39;t use <code>using namespace Eigen</code> etc, or <code>typedef [whatever]</code> or <code>using Eigen::[blah]</code>? In many examples you see this. I figured it was to reduce amount of typing. Do you have different motivation besides preference?"}, {"owner": {"reputation": 17516, "user_id": 1345455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DrBTs.jpg?s=128&g=1", "display_name": "coatless", "link": "https://stackoverflow.com/users/1345455/coatless"}, "edited": false, "score": 1, "creation_date": 1492091867, "post_id": 43380842, "comment_id": 73849498, "body": "Never ever fully load in a <code>namespace</code> (e.g. <code>using namespace Eigen;</code>) as multiple libraries may have the <i>same</i> function name leading to ambiguity between function calls. Regarding dropping the <code>typedef</code>, this was to try to simplify matters by directly referring to <code>Eigen</code> classes instead of pseudo referring to a class by a highly customized user specific name."}, {"owner": {"reputation": 605, "user_id": 4524755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c625af1191c555ffe2b12039b4d65024?s=128&d=identicon&r=PG", "display_name": "tstev", "link": "https://stackoverflow.com/users/4524755/tstev"}, "edited": false, "score": 0, "creation_date": 1492169269, "post_id": 43380842, "comment_id": 73879970, "body": "@coatless - I have tested it on my full dataset (N = ~900,000, M = ~6000) and it is still running. Seems like this is not an option for me unfortunately. It was kind of my last hope :( thanks for everything though. I learned something new."}], "tags": [], "owner": {"reputation": 17516, "user_id": 1345455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DrBTs.jpg?s=128&g=1", "display_name": "coatless", "link": "https://stackoverflow.com/users/1345455/coatless"}, "is_accepted": true, "score": 4, "last_activity_date": 1492037279, "creation_date": 1492037279, "answer_id": 43380842, "question_id": 43378812, "link": "https://stackoverflow.com/questions/43378812/sparseqr-for-least-squares/43380842#43380842", "title": "SparseQR for Least Squares", "body": "<p>How to write a sparse solver with <a href=\"http://eigen.tuxfamily.org/index.php?title=Main_Page\" rel=\"nofollow noreferrer\">Eigen</a> is a bit generic. This is mainly because the sparse solver classes are designed superbly well. They provide a <a href=\"https://eigen.tuxfamily.org/dox/group__TopicSparseSystems.html\" rel=\"nofollow noreferrer\">guide explaining their sparse solver classes</a>. Since the question focuses on <a href=\"https://eigen.tuxfamily.org/dox/classEigen_1_1SparseQR.html\" rel=\"nofollow noreferrer\">SparseQR</a>, the documentation indicates that there are two parameters required to initialize the solver: SparseMatrix class type and <a href=\"https://eigen.tuxfamily.org/dox/group__OrderingMethods__Module.html\" rel=\"nofollow noreferrer\">OrderingMethods</a> class that dictates the supported fill-reducing ordering method. </p>\n\n<p>With this in mind, we can whip up the following:</p>\n\n<pre><code>// [[Rcpp::depends(RcppEigen)]]\n#include &lt;RcppEigen.h&gt;\n#include &lt;Eigen/SparseQR&gt;\n\n// [[Rcpp::export]]\nRcpp::List sparseLm_eigen(const Eigen::MappedSparseMatrix&lt;double&gt; A, \n                          const Eigen::Map&lt;Eigen::VectorXd&gt; b){\n\n  Eigen::SparseQR &lt;Eigen::MappedSparseMatrix&lt;double&gt;, Eigen::COLAMDOrdering&lt;int&gt; &gt; solver;\n  solver.compute(A);\n  if(solver.info() != Eigen::Success) {\n    // decomposition failed\n    return Rcpp::List::create(Rcpp::Named(\"status\") = false);\n  }\n  Eigen::VectorXd x = solver.solve(b);\n  if(solver.info() != Eigen::Success) {\n    // solving failed\n    return Rcpp::List::create(Rcpp::Named(\"status\") = false);\n  }\n\n  return Rcpp::List::create(Rcpp::Named(\"status\") = true,\n                            Rcpp::Named(\"betahat\") = x);\n}\n</code></pre>\n\n<p>Note: Here we create a list that always passes a named <code>status</code> variable that should be checked <em>first</em>. This indicates whether convergence happens in two areas: decomposition and solving. If all checks out, then we pass the <code>betahat</code> coefficient.</p>\n\n<hr>\n\n<p>Test Script:</p>\n\n<pre><code>library(Matrix)\nlibrary(speedglm)\nRcpp::sourceCpp(\"sparseLm_eigen.cpp\")\n\ndata(\"data1\")\ndata1$fat1 &lt;- factor(data1$fat1)\nmm &lt;- model.matrix(formula(\"y ~ fat1 + x1 + x2\"), dat = data1)\n\nsp_mm &lt;- as(mm, \"dgCMatrix\")\ny &lt;- data1$y\n\nres1 &lt;- sparseLm_eigen(sp_mm, y)\nif(res1$status != TRUE){\n    stop(\"convergence issue\")\n}\nres1_coef = res1$betahat\nres2_coef &lt;- unname(coefficients(lm.fit(mm, y)))\n\ncbind(res1_coef, res2_coef)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>        res1_coef    res2_coef\n[1,]  1.027742926  1.027742926\n[2,]  0.142334262  0.142334262\n[3,]  0.044327457  0.044327457\n[4,]  0.338274783  0.338274783\n[5,] -0.001740012 -0.001740012\n[6,]  0.046558506  0.046558506\n</code></pre>\n"}], "owner": {"reputation": 605, "user_id": 4524755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c625af1191c555ffe2b12039b4d65024?s=128&d=identicon&r=PG", "display_name": "tstev", "link": "https://stackoverflow.com/users/4524755/tstev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2176, "favorite_count": 2, "accepted_answer_id": 43380842, "answer_count": 1, "score": 1, "last_activity_date": 1492082352, "creation_date": 1492027961, "last_edit_date": 1495540018, "question_id": 43378812, "link": "https://stackoverflow.com/questions/43378812/sparseqr-for-least-squares", "title": "SparseQR for Least Squares", "body": "<p>For an application I am building I need to run linear regression on large datasets in order to obtain residuals. For example, one dataset is more than 1 million x 20k in dimension. For the smaller datasets I was using <code>fastLm</code> from the <code>RcppArmadillo</code> package - which works great for those - currently. With time those datasets will also grow beyond 1 million rows.</p>\n\n<p>My solution was to use sparse matrices and Eigen. I was unable to find a good example for using SparseQR in RcppEigen. Based on many hours of reading (e.g. <a href=\"http://gallery.rcpp.org/articles/sparse-iterators/\" rel=\"nofollow noreferrer\">rcpp-gallery</a>, <a href=\"https://stackoverflow.com/questions/26160815/mappedsparsematrix-in-rcppeigen\">stackoverflow</a>, <a href=\"http://lists.r-forge.r-project.org/pipermail/rcpp-devel/2015-June/008777.html\" rel=\"nofollow noreferrer\">rcpp-dev mailinglist</a>, <a href=\"http://eigen.tuxfamily.org/dox/group__SparseQuickRefPage.html\" rel=\"nofollow noreferrer\">eigen docs</a>, <a href=\"http://gallery.rcpp.org/articles/eigen-eigenvalues/\" rel=\"nofollow noreferrer\">rcpp-gallery</a>, <a href=\"https://stackoverflow.com/questions/26694446/rcppeigen-sparse-matrix-insert-operation-gives-invalid-class-dgcmatrix-error\">stackoverflow</a> and many more that I have forgotten but sure have read) I wrote the following piece of code; </p>\n\n<p>(NB: my first c++ program - please be nice :) - any advice to improve is welcomed)</p>\n\n<pre><code>// [[Rcpp::depends(RcppEigen)]]\n#include &lt;RcppEigen.h&gt;\nusing namespace Rcpp;\nusing namespace Eigen;\n\nusing Eigen::Map;\nusing Eigen::SparseMatrix;\nusing Eigen::MappedSparseMatrix;\nusing Eigen::VectorXd;\nusing Eigen::SimplicialCholesky;\n\n\n// [[Rcpp::export]]\nList sparseLm_eigen(const SEXP Xr, \n                    const NumericVector yr){\n\n  typedef SparseMatrix&lt;double&gt;        sp_mat;\n  typedef MappedSparseMatrix&lt;double&gt;  sp_matM;\n  typedef Map&lt;VectorXd&gt;               vecM;\n  typedef SimplicialCholesky&lt;sp_mat&gt;  solver;\n\n  const sp_mat Xt(Rcpp::as&lt;sp_matM&gt;(Xr).adjoint());\n  const VectorXd Xty(Xt * Rcpp::as&lt;vecM&gt;(yr));\n  const solver Ch(Xt * Xt.adjoint());\n\n  if(Ch.info() != Eigen::Success) return \"failed\";\n\n  return List::create(Named(\"betahat\") = Ch.solve(Xty));\n}\n</code></pre>\n\n<p>This works for example for;</p>\n\n<pre><code>library(Matrix)\nlibrary(speedglm)\nRcpp::sourceCpp(\"sparseLm_eigen.cpp\")\n\ndata(\"data1\")\ndata1$fat1 &lt;- factor(data1$fat1)\nmm &lt;- model.matrix(formula(\"y ~ fat1 + x1 + x2\"), dat = data1)\n\nsp_mm &lt;- as(mm, \"dgCMatrix\")\ny &lt;- data1$y\n\nres1 &lt;- sparseLm_eigen(sp_mm, y)$betahat\nres2 &lt;- unname(coefficients(lm.fit(mm, y)))\n\nabs(res1 - res2)\n</code></pre>\n\n<p>It fails however for my large datasets (as I kind of expected). My initial intention was to use the <code>SparseQR</code> as a solver but I don't know how to implement that. </p>\n\n<p>So my question - can someone help me to implement QR decomposition for sparse matrices with RcppEigen?</p>\n"}, {"tags": ["c++", "qt", "paintevent", "qframe"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1492028474, "post_id": 43378795, "comment_id": 73820003, "body": "bling guess: add a <code>if (anythinghasChanged){...}</code> to your <code>paintEvent()</code>"}, {"owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1492028784, "post_id": 43378795, "comment_id": 73820173, "body": "@tobi303 I already tried it but it doesn&#39;t work, I think the <code>QFrame</code> is erased (automatically) and it is not repainted again."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1492028892, "post_id": 43378795, "comment_id": 73820232, "body": "how much is too much CPU? maybe you should find out why it is repainting constantly if this is really the case"}, {"owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1492029093, "post_id": 43378795, "comment_id": 73820352, "body": "As I can see in the Windows Task Manager it is using about 40% of the CPU just for the repaint process."}], "answers": [{"comments": [{"owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "edited": false, "score": 0, "creation_date": 1492029455, "post_id": 43379135, "comment_id": 73820543, "body": "The widgets are only repainted when some data has changed? Then I will need to take a look closely to find out if some data has being changed. I will try to provide a self-contained example. Thanks."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "edited": false, "score": 1, "creation_date": 1492029565, "post_id": 43379135, "comment_id": 73820606, "body": "The widgets should be painted only when Qt has requested a repaint by invoking <code>paintEvent</code>. You should <b>request</b> a repaint from Qt by calling <code>update()</code> only when the data used to paint has changed. Look at your <code>paintEvent</code> and identify what non-constnat data you use in painting. Then make sure that at all points where this data is changed, <code>update()</code> is invoked. Qt will take care of the rest. Never call <code>repaint()</code>."}, {"owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "edited": false, "score": 0, "creation_date": 1492029692, "post_id": 43379135, "comment_id": 73820675, "body": "Thanks @Kuba Ober, I will look into my <code>paintEvent</code> function."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1492029659, "last_edit_date": 1492029659, "creation_date": 1492029147, "answer_id": 43379135, "question_id": 43378795, "link": "https://stackoverflow.com/questions/43378795/how-to-avoid-repaint-on-qframe/43379135#43379135", "title": "How to avoid repaint on QFrame?", "body": "<p>Widgets are repainted whenever Qt needs to repaint them. You have no control over any of that, generally speaking. You can only add repaint requests when needed, not reduce them.</p>\n\n<p>You should never need to call the <code>repaint</code> method. Instead, whenever the data used for painting changes, you should <code>update()</code> the widget. The update events are fused to improve performance. The calls to <code>update()</code> should be in the widget's setter methods, or should be connected to the <code>dataChanged()</code> and equivalent signals of the data model used to feed the widget.</p>\n\n<p>Most likely you're doing something else wrong. You'd need to provide a self-contained example to demonstrate the problem.</p>\n"}, {"comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1492546643, "post_id": 43479773, "comment_id": 74018698, "body": "<code>paintEvent</code> should never do anything but paint."}], "tags": [], "owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "is_accepted": true, "score": 0, "last_activity_date": 1492540569, "creation_date": 1492540569, "answer_id": 43479773, "question_id": 43378795, "link": "https://stackoverflow.com/questions/43378795/how-to-avoid-repaint-on-qframe/43479773#43479773", "title": "How to avoid repaint on QFrame?", "body": "<p>I finally found the problem. I was setting the style sheet inside the <code>paintEvent</code> function and I think it was being repainted because of that.</p>\n\n<p>I was doing something like this:</p>\n\n<pre><code>MyFrameBar::MyFrameBar(QWidget *parent) : QFrame(parent)\n{\n    color = QColor(50, 50, 50, 200);\n}\n\nvoid MyFrameBar::paintEvent(QPaintEvent *)\n{\n    QString style = \"border: 1px solid rgba(%1, %2, %3, %4);\";\n    style = style.arg(color.red()).arg(color.green()).arg(color.blue()).arg(color.alpha());\n    setStyleSheet(style);\n    ...\n}\n</code></pre>\n\n<p>I just changed the place where I was setting the style sheet and everything is working fine.</p>\n\n<p>The new code looks like this:</p>\n\n<pre><code>MyFrameBar::MyFrameBar(QWidget *parent) : QFrame(parent)\n{\n    setColor(QColor(50, 50, 50, 200));\n}\n\nvoid MyFrameBar::paintEvent(QPaintEvent *)\n{\n    ...\n}\n\nvoid MyFrameBar::setColor(const QColor &amp;color)\n{\n    this-&gt;color = color;\n\n    QString style = \"border: 1px solid rgba(%1, %2, %3, %4);\";\n    style = style.arg(color.red()).arg(color.green()).arg(color.blue()).arg(color.alpha());\n    setStyleSheet(style);\n}\n</code></pre>\n"}], "owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 454, "favorite_count": 0, "accepted_answer_id": 43479773, "answer_count": 2, "score": 0, "last_activity_date": 1492540569, "creation_date": 1492027901, "question_id": 43378795, "link": "https://stackoverflow.com/questions/43378795/how-to-avoid-repaint-on-qframe", "title": "How to avoid repaint on QFrame?", "body": "<p>I have a <code>QFrame</code> that is used to paint some rectangles to represent some periods of the day, for example, the period when the user was sleeping.</p>\n\n<p>To do so I overwrite the <code>paintEvent(QPaintEvent *)</code> function and I'm using a <code>QPainter</code> to paint the rectangles.</p>\n\n<p>It is working fine, the problem is that the <code>paintEvent(QPaintEvent *)</code> function is automatically called multiple times by <strong>Qt</strong> to repaint the <code>QFrame</code> and it is consuming too much <strong>CPU</strong>. Actually, I just need to repaint a few times (by manually calling the repaint function).</p>\n\n<p>There is some way that I can avoid the <code>QFrame</code> to automatically repaint itself?</p>\n\n<p>Thanks in advance</p>\n\n<p>I'm using Qt 5.3</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 6, "creation_date": 1492027676, "post_id": 43378727, "comment_id": 73819522, "body": "What does your debugger offer in the way of insight? If you&#39;re new to C++ try to avoid getting in the bad habit of <code>using namespace std</code>. The <code>std::</code> prefix is deliberate, it helps avoid collisions with names in your own code."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1492027744, "post_id": 43378727, "comment_id": 73819557, "body": "Not shown here is what <code>Investment</code> is. Any number of things could be going on in there. Is there any reason why the header file is in ALL CAPS?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1492027766, "post_id": 43378727, "comment_id": 73819567, "body": "In your <code>for</code> loop, you are using a <i>dynamic array</i>, which is not supported by the C++ standard."}, {"owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "edited": false, "score": 0, "creation_date": 1492027855, "post_id": 43378727, "comment_id": 73819628, "body": "Why are you doing <code>vector&lt;int&gt;</code>"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 2, "creation_date": 1492027903, "post_id": 43378727, "comment_id": 73819661, "body": "<code>Investment InvestVector[i]</code> in the loop is not valid C++.  It is a compiler extension that does not do what your comment suggests."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1492027905, "post_id": 43378727, "comment_id": 73819662, "body": "The <code>InvestVector</code> defined in your <code>for</code> loop is a different variable than the <code>InvestVector</code> declared before the loop."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1492027952, "post_id": 43378727, "comment_id": 73819691, "body": "BTW, all the variables declared inside the <code>for</code> loop disappear when execution leaves the loop."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1492027990, "post_id": 43378727, "comment_id": 73819713, "body": "@ThomasMatthews: It&#39;s called a &quot;variable-length array&quot; and you&#39;re right it&#39;s totally nonstandard, but supported through a gcc extension."}], "answers": [{"tags": [], "owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "is_accepted": false, "score": 0, "last_activity_date": 1492028341, "creation_date": 1492028341, "answer_id": 43378918, "question_id": 43378727, "link": "https://stackoverflow.com/questions/43378727/executable-has-error-during-runtime/43378918#43378918", "title": "Executable has error during runtime", "body": "<p>Assuming you are using a C++ compiler with variable-length arrays, which is not standard C++, then this line:</p>\n\n<pre><code>Investment InvestVector[i];\n</code></pre>\n\n<p>creates an array with \"i\" places, numbered from 0 to i-1. Then these two lines:</p>\n\n<pre><code>InvestVector[i].setSymbol(sHolder);\ncout &lt;&lt; InvestVector[i].getSymbol();\n</code></pre>\n\n<p>will try to work with position number \"i\" of the array, that is, one past the end of the array.</p>\n"}], "owner": {"reputation": 1, "user_id": 7847536, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212881242855286/picture?type=large", "display_name": "Jeff C", "link": "https://stackoverflow.com/users/7847536/jeff-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492028341, "creation_date": 1492027628, "question_id": 43378727, "link": "https://stackoverflow.com/questions/43378727/executable-has-error-during-runtime", "title": "Executable has error during runtime", "body": "<p>I have the following code which compiles properly:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include \"INVESTMENT.h\"\n#include &lt;vector&gt;\nusing namespace std;\n\n\nint main()\n{\n\n\n    ifstream inputFile(\"jroth.csv\");\n    string sHolder; //used as placeholder for string\n    float fHolder; //used as placeholder for float\n    double dHolder; ///used as placeholder for double\n\n//  while (inputFile.good())\n    vector&lt;int&gt; InvestVector;  //will hold class (Investment) which contains string, double, and float\n    for (int i=0; i &lt;= 7; i++)\n    {\n        Investment InvestVector[i]; //create new class for each line being pulled from .csv file\n        getline(inputFile, sHolder, ',');  //pull in investment symbol as string\n        InvestVector[i].setSymbol(sHolder); //store string in the class\n        cout &lt;&lt; InvestVector[i].getSymbol(); //verify string store properly\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>As soon as the program runs, the executable crashes.  Any thoughts on why?</p>\n"}, {"tags": ["c++", "curl"], "comments": [{"owner": {"reputation": 1121, "user_id": 4005852, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/w5vp4.jpg?s=128&g=1", "display_name": "Cong Ma", "link": "https://stackoverflow.com/users/4005852/cong-ma"}, "edited": false, "score": 1, "creation_date": 1492027637, "post_id": 43378657, "comment_id": 73819497, "body": "Have you linked you program to curl? For gcc, -l should be in your command line."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1492027803, "post_id": 43378657, "comment_id": 73819598, "body": "You need to link in <code>libcurl</code>."}, {"owner": {"reputation": 73, "user_id": 7858526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fbcf5f3e20cce17f6460f5b36964ca1?s=128&d=identicon&r=PG&f=1", "display_name": "Jaroxa", "link": "https://stackoverflow.com/users/7858526/jaroxa"}, "edited": false, "score": 0, "creation_date": 1492103789, "post_id": 43378657, "comment_id": 73857138, "body": "how and what should I  link in libcurl?"}, {"owner": {"reputation": 73, "user_id": 7858526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fbcf5f3e20cce17f6460f5b36964ca1?s=128&d=identicon&r=PG&f=1", "display_name": "Jaroxa", "link": "https://stackoverflow.com/users/7858526/jaroxa"}, "edited": false, "score": 0, "creation_date": 1492107610, "post_id": 43378657, "comment_id": 73859029, "body": "I use -lcurl in terminal it&#39;s working, thx."}, {"owner": {"reputation": 73, "user_id": 7858526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fbcf5f3e20cce17f6460f5b36964ca1?s=128&d=identicon&r=PG&f=1", "display_name": "Jaroxa", "link": "https://stackoverflow.com/users/7858526/jaroxa"}, "edited": false, "score": 0, "creation_date": 1492107678, "post_id": 43378657, "comment_id": 73859065, "body": "But how can I compile without using -lcurl everytime?"}], "owner": {"reputation": 73, "user_id": 7858526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fbcf5f3e20cce17f6460f5b36964ca1?s=128&d=identicon&r=PG&f=1", "display_name": "Jaroxa", "link": "https://stackoverflow.com/users/7858526/jaroxa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1492027406, "creation_date": 1492027406, "question_id": 43378657, "link": "https://stackoverflow.com/questions/43378657/c-curl-compile-errors", "title": "c++ =&gt; curl compile errors", "body": "<p>I have problems with the compilation of curl, it would be great if \nsb could help me with that.</p>\n\n<p>I used an example code from curl:</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n#include &lt;curl/curl.h&gt; \n\n\n\nint main(int argc, char **argv){\n    CURL *curl;\n  CURLcode res;\n\n  /* In windows, this will init the winsock stuff */\n  //curl_global_init(CURL_GLOBAL_ALL);\n\n  /* get a curl handle */\n  curl = curl_easy_init();\n  if(curl) {\n    /* First set the URL that is about to receive our POST. This URL can\n       just as well be a https:// URL if that is what should receive the\n       data. */\n    curl_easy_setopt(curl, CURLOPT_URL, \"http://postit.example.com/moo.cgi\");\n    /* Now specify the POST data */\n    curl_easy_setopt(curl, CURLOPT_POSTFIELDS, \"name=daniel&amp;project=curl\");\n\n    /* Perform the request, res will get the return code */\n    res = curl_easy_perform(curl);\n    /* Check for errors */\n    if(res != CURLE_OK)\n      fprintf(stderr, \"curl_easy_perform() failed: %s\\n\",\n              curl_easy_strerror(res));\n\n    /* always cleanup */\n    curl_easy_cleanup(curl);\n  }\n  curl_global_cleanup();\n  return 0;\n    printf(\"Hello World\\n\");\n}\n</code></pre>\n\n<p>But getting this compiler error:</p>\n\n<pre><code>main.cpp:(.text+0x10): Nicht definierter Verweis auf `curl_easy_init'\nmain.cpp:(.text+0x36): Nicht definierter Verweis auf `curl_easy_setopt'\nmain.cpp:(.text+0x51): Nicht definierter Verweis auf `curl_easy_setopt'\nmain.cpp:(.text+0x5d): Nicht definierter Verweis auf `curl_easy_perform'\nmain.cpp:(.text+0x70): Nicht definierter Verweis auf `curl_easy_strerror'\nmain.cpp:(.text+0x98): Nicht definierter Verweis auf `curl_easy_cleanup'\nmain.cpp:(.text+0x9d): Nicht definierter Verweis auf `curl_global_cleanup'\n</code></pre>\n\n<p>What means, that the functions are not linked.</p>\n\n<p>Maybe I forgot something to install?\nI show u the process, how I installed curl now:</p>\n\n<pre><code>cd /usr/local/src/\nwget http://curl.haxx.se/download/curl-7.53.1.tar.gz\nsudo wget http://curl.haxx.se/download/curl-7.53.1.tar.gz\ntar -xvzf curl-7.53.1.tar.gz \nsudo tar -xvzf curl-7.53.1.tar.gz \nsudo rm *.gz\ncd curl-7.53.1/\n./configure \nsudo ./configure \nsudo make\nsudo make install\n</code></pre>\n\n<p>No angry google it reacts, pls.\nI already googled it very long.</p>\n"}, {"tags": ["c++", "filesystems"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1492026921, "post_id": 43378457, "comment_id": 73819081, "body": "this isnt the complete error message, is it?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1492026991, "post_id": 43378457, "comment_id": 73819126, "body": "did you include <code>&lt;string&gt;</code> ?"}, {"owner": {"reputation": 43, "user_id": 7555695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/598edb698d6bea5019288806460cb50b?s=128&d=identicon&r=PG&f=1", "display_name": "Meme Lord", "link": "https://stackoverflow.com/users/7555695/meme-lord"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1492027015, "post_id": 43378457, "comment_id": 73819141, "body": "I accidently left off the &quot;Matches argument list&quot; re added it at the top"}, {"owner": {"reputation": 43, "user_id": 7555695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/598edb698d6bea5019288806460cb50b?s=128&d=identicon&r=PG&f=1", "display_name": "Meme Lord", "link": "https://stackoverflow.com/users/7555695/meme-lord"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1492027037, "post_id": 43378457, "comment_id": 73819154, "body": "Yeah I forgot to include &lt;string&gt;"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1492027200, "post_id": 43378457, "comment_id": 73819238, "body": "<code>d-&gt;path().extension()</code> returns a <code>std::filesystem::path</code> not a <code>std::string</code>  source: <a href=\"http://en.cppreference.com/w/cpp/filesystem/path/extension\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/filesystem/path/extension</a>"}, {"owner": {"reputation": 43, "user_id": 7555695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/598edb698d6bea5019288806460cb50b?s=128&d=identicon&r=PG&f=1", "display_name": "Meme Lord", "link": "https://stackoverflow.com/users/7555695/meme-lord"}, "edited": false, "score": 0, "creation_date": 1492027530, "post_id": 43378457, "comment_id": 73819420, "body": "Thanks for the answer. But it clarifies what the issue is but I still have no idea how to fix the issue. Even with the &lt;string&gt; added it still throws more errors"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1492028075, "post_id": 43378457, "comment_id": 73819758, "body": "You declared the map (<code>rscan2</code>) as taking a <code>std::string</code> as the key type, then tried to insert the result of <code>d-&gt;path().extension()</code> as the key.  <code>d-&gt;path().extension()</code> returns a <code>std::filesystem::path</code> not a <code>std::string</code> so the map can&#39;t use it as the key."}, {"owner": {"reputation": 43, "user_id": 7555695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/598edb698d6bea5019288806460cb50b?s=128&d=identicon&r=PG&f=1", "display_name": "Meme Lord", "link": "https://stackoverflow.com/users/7555695/meme-lord"}, "edited": false, "score": 0, "creation_date": 1492028595, "post_id": 43378457, "comment_id": 73820070, "body": "Okay so I went and changed <code>rscan2</code> to <code>map&lt;path,int&gt;</code> and then tried to insert <code>path extension = d-&gt;path().extension(); data.insert&lt;extension,0&gt;;</code> and I get a non-standard syntax need to create a pointer &#39;&amp;&#39;."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1492036302, "post_id": 43379045, "comment_id": 73823457, "body": "Since the map key type is a <code>std::string</code>, why would you use <code>.c_str()</code> instead of <code>.string()</code>? For that matter, I would expect passing the <code>path</code> as-is would work since it has an implicit conversion to <code>std::string</code>."}], "tags": [], "owner": {"reputation": 2916, "user_id": 3646096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KUofm.jpg?s=128&g=1", "display_name": "M&#225;rio Feroldi", "link": "https://stackoverflow.com/users/3646096/m%c3%a1rio-feroldi"}, "is_accepted": true, "score": 1, "last_activity_date": 1492054475, "last_edit_date": 1492054475, "creation_date": 1492028816, "answer_id": 43379045, "question_id": 43378457, "link": "https://stackoverflow.com/questions/43378457/how-to-store-a-file-name-ext-into-a-map-using-the-experimental-c-2017-lib/43379045#43379045", "title": "How to store a file name ext into a map using the experimental c++ 2017 lib", "body": "<p><code>path</code> has many helper methods to convert to strings. Listing a few:</p>\n\n<ul>\n<li><a href=\"http://en.cppreference.com/w/cpp/filesystem/path/string\" rel=\"nofollow noreferrer\">.string()</a></li>\n<li><a href=\"http://en.cppreference.com/w/cpp/filesystem/path/generic_string\" rel=\"nofollow noreferrer\">.generic_string()</a></li>\n<li><a href=\"http://en.cppreference.com/w/cpp/filesystem/path/native\" rel=\"nofollow noreferrer\">.c_str()</a></li>\n<li><a href=\"http://en.cppreference.com/w/cpp/filesystem/path/native\" rel=\"nofollow noreferrer\">operator string_type()</a></li>\n</ul>\n\n<p>But the actual problem is that <code>std::map::insert</code> doesn't receive a key and value as arguments, only values. So you should instead use <code>insert_or_assign</code> (since C++17):</p>\n\n<pre><code>data.insert_or_assign(d-&gt;path().extension(), 15);\n</code></pre>\n\n<p>And the <code>operator string_type()</code> will be called for the returned path, converting it to an actual string.</p>\n"}], "owner": {"reputation": 43, "user_id": 7555695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/598edb698d6bea5019288806460cb50b?s=128&d=identicon&r=PG&f=1", "display_name": "Meme Lord", "link": "https://stackoverflow.com/users/7555695/meme-lord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 43379045, "answer_count": 1, "score": 1, "last_activity_date": 1492054475, "creation_date": 1492026703, "last_edit_date": 1492026977, "question_id": 43378457, "link": "https://stackoverflow.com/questions/43378457/how-to-store-a-file-name-ext-into-a-map-using-the-experimental-c-2017-lib", "title": "How to store a file name ext into a map using the experimental c++ 2017 lib", "body": "<p>So i've got a simple little program that I want to store the file extensions into a map. The error comes when I try and store the <code>d-&gt;path().extension();</code> into my map <code>data.insert(d-&gt;path().extension(),15);</code>. 15 is just a place holder for now I want to store the file ext as the key. I think the error is string is unknown to the std::experimental::filesystem. </p>\n\n<p>This is the current error it throws: \n\"std::map&lt;_Kty, _Ty, _Pr, _Alloc>::insert [with _Kty=std::string, _Ty=int, _Pr=std::less, _Alloc=std::allocator>]\" matches the argument list</p>\n\n<pre><code>#include &lt;map&gt;\n#include &lt;regex&gt;\n#include &lt;locale&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n#include &lt;filesystem&gt;\nusing namespace std::experimental::filesystem;\nmap&lt;string,int&gt; rscan2(path const&amp; f,map&lt;string, int&gt; const&amp; data, unsigned i = 0)\n{\n    //string indet(i, ' ');\n\n    for (recursive_directory_iterator d(f), e; d != e; ++d)\n    {\n    data.insert(d-&gt;path().extension(),15);\n        if (is_directory(d-&gt;status()))\n            rscan2(d-&gt;path(), data, i + 1);\n    }\n    return data;\n}\n\nint main(int argc, char *argv[])\n{\n    map&lt;string, int&gt; holdTheInfo;\n    rscan2(\".\", holdTheInfo);\n}\n</code></pre>\n"}, {"tags": ["c++", "h.264", "specifications", "live555"], "comments": [{"owner": {"reputation": 6027, "user_id": 7738328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84d6eb24cbea7d5c8d4bdab21dd3d232?s=128&d=identicon&r=PG&f=1", "display_name": "JohanL", "link": "https://stackoverflow.com/users/7738328/johanl"}, "edited": false, "score": 0, "creation_date": 1492027058, "post_id": 43378438, "comment_id": 73819168, "body": "There are three types of frames in h.264. I, P and B frames. P and B frames are coded as differences from a previous frame. Thus, by themselves they cannot be displayed. Only I frames are &quot;self contained&quot;. My guess is that the ones that work, happens to start with an I frame."}], "answers": [{"tags": [], "owner": {"reputation": 8777, "user_id": 3102264, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/G69VV.jpg?s=128&g=1", "display_name": "mpromonet", "link": "https://stackoverflow.com/users/3102264/mpromonet"}, "is_accepted": false, "score": 0, "last_activity_date": 1493564649, "creation_date": 1493564649, "answer_id": 43707836, "question_id": 43378438, "link": "https://stackoverflow.com/questions/43378438/write-a-sequence-of-h264-frames-into-several-files/43707836#43707836", "title": "Write a sequence of h264 frames into several files", "body": "<p>In order to be playable (without other information), each file should contains :</p>\n\n<ul>\n<li>SPS (Sequence Parameter Set)</li>\n<li>PPS (Picture Parameter Set)</li>\n<li>I Frame (could be and IDR or a SLICE_I)</li>\n</ul>\n\n<p>Next the decoder can decode other slices type (P, B).</p>\n\n<p>A simple way to do this is to store the incoming SPS &amp; PPS frames and write them (with the 00 00 00 01 start code) before each IDR frame (also with the 00 00 00 01 start code).</p>\n"}], "owner": {"reputation": 11, "user_id": 4722769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de163342ad75eadad2a2e887296cd974?s=128&d=identicon&r=PG&f=1", "display_name": "Stepan", "link": "https://stackoverflow.com/users/4722769/stepan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 466, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1493564649, "creation_date": 1492026650, "question_id": 43378438, "link": "https://stackoverflow.com/questions/43378438/write-a-sequence-of-h264-frames-into-several-files", "title": "Write a sequence of h264 frames into several files", "body": "<p>I have a stream of h264 frames (from RTSP stream, but i think it is irrelevant), I know <em>sequence parameter set</em> bytes and I want to write these frames to disk in several .h264 files (around N frames each). </p>\n\n<p>If I write </p>\n\n<pre><code>sequence parameter set - 0x00 0x00 0x00 0x01 - frame1 - 0x00 0x00 0x00 0x01 - frame2 - 0x00 0x00 0x00 0x01 - frame3 - \n</code></pre>\n\n<p>and so on to a disk (without dashes, just a bunch of bytes) , i will get a correct file (at least, it can be played via vlc)</p>\n\n<p>But if i will write files:</p>\n\n<pre><code>sequence parameter set - 0x00 0x00 0x00 0x01 - frame1 - ...\nsequence parameter set - 0x00 0x00 0x00 0x01 - frameN - ...\nsequence parameter set - 0x00 0x00 0x00 0x01 - frame2N - ...\nsequence parameter set - 0x00 0x00 0x00 0x01 - frame3N - ...\n</code></pre>\n\n<p>when some of them will be correct (in the sence of been playable by vlc), and some of them not (and not only the first file is correct!) \nApparently, not every frame can be at start of an h264 file, but which can? Or which is correct way of storing h264 frames in different files?</p>\n\n<p>Speaking of tools, i'm using c++ with <a href=\"http://www.live555.com\" rel=\"nofollow noreferrer\">live555</a> library, and can get frame types using <a href=\"https://github.com/aizvorski/h264bitstream\" rel=\"nofollow noreferrer\">h264bitstream</a> library, but I guess it does not matter.\nI do not want to use any command line tools (like ffmpeg), but a solution which could be implemented in c++ with some additional libraries. </p>\n"}, {"tags": ["c++", "c++11", "templates", "c++14"], "comments": [{"owner": {"reputation": 10901, "user_id": 578749, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/40231a11da5f1c627fd21d6700edddff?s=128&d=identicon&r=PG", "display_name": "lvella", "link": "https://stackoverflow.com/users/578749/lvella"}, "reply_to_user": {"reputation": 10380, "user_id": 8877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZfOB5.png?s=128&g=1", "display_name": "&#208;\u0430n", "link": "https://stackoverflow.com/users/8877/%c3%90%d0%b0n"}, "edited": false, "score": 0, "creation_date": 1492026352, "post_id": 43378260, "comment_id": 73818734, "body": "<code>FILE*</code> was just an example everyone is acquainted to. This is most useful to interact with C libraries full of <code>create_&lt;type&gt;()</code> and <code>destroy_&lt;type&gt;()</code> functions. Anyway, <code>*</code> and <code>-&gt;</code> are available for plain <code>FILE *</code> pointers, too, and it is no worse inside <code>std::unique_ptr</code>."}, {"owner": {"reputation": 10901, "user_id": 578749, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/40231a11da5f1c627fd21d6700edddff?s=128&d=identicon&r=PG", "display_name": "lvella", "link": "https://stackoverflow.com/users/578749/lvella"}, "reply_to_user": {"reputation": 10380, "user_id": 8877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZfOB5.png?s=128&g=1", "display_name": "&#208;\u0430n", "link": "https://stackoverflow.com/users/8877/%c3%90%d0%b0n"}, "edited": false, "score": 0, "creation_date": 1492026667, "post_id": 43378260, "comment_id": 73818931, "body": "I disagree with this duplication mark, my question is much more specific."}, {"owner": {"reputation": 10901, "user_id": 578749, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/40231a11da5f1c627fd21d6700edddff?s=128&d=identicon&r=PG", "display_name": "lvella", "link": "https://stackoverflow.com/users/578749/lvella"}, "reply_to_user": {"reputation": 10380, "user_id": 8877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZfOB5.png?s=128&g=1", "display_name": "&#208;\u0430n", "link": "https://stackoverflow.com/users/8877/%c3%90%d0%b0n"}, "edited": false, "score": 0, "creation_date": 1492027048, "post_id": 43378260, "comment_id": 73819163, "body": "Most voted answer in this other questions shows usage <code>RAIIFunc&lt;int (int), ::close&gt; f = ::open(&quot;...&quot;);</code>, which, as my solution, also requires the type of the destructor function as the first template argument. My question is specifically how to remove that template argument (if possible)."}, {"owner": {"reputation": 1929, "user_id": 779373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f7364cebc4c87ee3946e32915c4b76?s=128&d=identicon&r=PG", "display_name": "PeterSom", "link": "https://stackoverflow.com/users/779373/petersom"}, "edited": false, "score": 0, "creation_date": 1523284960, "post_id": 43378260, "comment_id": 86485116, "body": "Taking the address of a standard library function is undefined. thus passing fclose as a template argument is undefined behavior (even so it works), because a standard library implementation is free to add additional overlaods or more parameters with default arguments, only the calls are specified to work (with some exceptions) see <a href=\"https://wg21.link/p0551\" rel=\"nofollow noreferrer\">wg21.link/p0551</a> R&gt;=3)"}], "answers": [{"comments": [{"owner": {"reputation": 10901, "user_id": 578749, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/40231a11da5f1c627fd21d6700edddff?s=128&d=identicon&r=PG", "display_name": "lvella", "link": "https://stackoverflow.com/users/578749/lvella"}, "edited": false, "score": 0, "creation_date": 1492027655, "post_id": 43378563, "comment_id": 73819508, "body": "This is what I am currently doing. The drawback, besides the possibly larger structure, is that the return type (that I typedef to something) is not default constructible."}, {"owner": {"reputation": 1929, "user_id": 779373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f7364cebc4c87ee3946e32915c4b76?s=128&d=identicon&r=PG", "display_name": "PeterSom", "link": "https://stackoverflow.com/users/779373/petersom"}, "edited": false, "score": 0, "creation_date": 1523285044, "post_id": 43378563, "comment_id": 86485180, "body": "see above. &amp;fclose is verboten."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "reply_to_user": {"reputation": 1929, "user_id": 779373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f7364cebc4c87ee3946e32915c4b76?s=128&d=identicon&r=PG", "display_name": "PeterSom", "link": "https://stackoverflow.com/users/779373/petersom"}, "edited": false, "score": 0, "creation_date": 1523290669, "post_id": 43378563, "comment_id": 86489004, "body": "@PeterSom What do you want to tell me?"}, {"owner": {"reputation": 1929, "user_id": 779373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f7364cebc4c87ee3946e32915c4b76?s=128&d=identicon&r=PG", "display_name": "PeterSom", "link": "https://stackoverflow.com/users/779373/petersom"}, "edited": false, "score": 0, "creation_date": 1523619755, "post_id": 43378563, "comment_id": 86646602, "body": "It is unspecified to take the address of a standard library function. That includes the functions inherited from the C library, such as fclose. To make this answer correct, fclose must not be given directly as an argument. One workaround would be a lambda calling fclose and passing that."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "reply_to_user": {"reputation": 1929, "user_id": 779373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f7364cebc4c87ee3946e32915c4b76?s=128&d=identicon&r=PG", "display_name": "PeterSom", "link": "https://stackoverflow.com/users/779373/petersom"}, "edited": false, "score": 0, "creation_date": 1523631834, "post_id": 43378563, "comment_id": 86654931, "body": "@PeterSom I see. I will update this answer when I find some time."}], "tags": [], "owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "is_accepted": false, "score": 4, "last_activity_date": 1492027061, "creation_date": 1492027061, "answer_id": 43378563, "question_id": 43378260, "link": "https://stackoverflow.com/questions/43378260/wrapper-to-build-stdunique-ptr-with-plain-function-deleters/43378563#43378563", "title": "Wrapper to build std::unique_ptr with plain function deleters", "body": "<p>Pragmatic approach: Make the deleter a runtime parameter.</p>\n\n<pre><code>template&lt;typename P, typename D&gt;\nauto my_make_unique(P* ptr, D deleter)\n{\n    return std::unique_ptr&lt;P, D&gt;(ptr, deleter);\n}\n\nint main()\n{\n    auto fd = my_make_unique(fopen(\"filename\", \"r\"), fclose);     \n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1929, "user_id": 779373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f7364cebc4c87ee3946e32915c4b76?s=128&d=identicon&r=PG", "display_name": "PeterSom", "link": "https://stackoverflow.com/users/779373/petersom"}, "edited": false, "score": 0, "creation_date": 1523285030, "post_id": 43378781, "comment_id": 86485168, "body": "see my comment to the question, taking the address of fclose is non-portable and not sanctioned by the C++ standard (will be more explicit verboten in C++2a)"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 5, "last_activity_date": 1523289438, "last_edit_date": 1523289438, "creation_date": 1492027860, "answer_id": 43378781, "question_id": 43378260, "link": "https://stackoverflow.com/questions/43378260/wrapper-to-build-stdunique-ptr-with-plain-function-deleters/43378781#43378781", "title": "Wrapper to build std::unique_ptr with plain function deleters", "body": "<blockquote>\n  <p>Is it possible to get rid of <code>decltype(&amp;fclose)</code> template argument in C++11? What about in C++14?</p>\n</blockquote>\n\n<p>No, not until C++17 can you get rid of the type of that parameter. Template non-type parameters <em>need</em> a type, which you can't deduce - because it has to be a template non-type parameter. That's one problem.</p>\n\n<p><em>Additionally</em>, you have the problem that taking the address of functions in the standard library is unspecified. The standard library is always allowed to provide additional overloads, for instance, so <code>&amp;fclose</code> may be invalid. The only truly portable way of doing this is to provide a lambda or write your own wrapper function:</p>\n\n<pre><code>auto my_fclose_lam = [](std::FILE* f) { std::fclose(f); }\nvoid my_fclose_fun(std::FILE* f) { std::fclose(f); }\n</code></pre>\n\n<p>And with either of those, with C++14 at best you can introduce a macro like:</p>\n\n<pre><code>#define DECL(v) decltype(v), v\nauto fd = my_make_unique&lt;DECL(my_fclose_lam)&gt;(fopen(\"filename\", \"r\"));\n</code></pre>\n\n<p>C++17 allows you to at least lift your custom function into a template parameter (though not yet a lambda) via <code>template auto</code>:</p>\n\n<pre><code>template &lt;auto deleter, typename P&gt;\nauto my_make_unique(P* ptr)\n{\n    struct Deleter {\n        void operator()(P* ptr) {\n            deleter(ptr);\n        }\n    };\n    return std::unique_ptr&lt;P, Deleter&gt;(ptr);\n}\n\nmy_make_unique&lt;my_fclose_fun&gt;(fopen(...));\n</code></pre>\n\n<p>C++20 will finally allow you to stick a lambda into there:</p>\n\n<pre><code>my_make_unique&lt;[](std::FILE* f){ std::fclose(f); }&gt;(fopen(...));\n</code></pre>\n\n<hr />\n\n<p>Old incorrect answer:</p>\n\n<p><s>So the best you can do is introduce a macro like:</p>\n\n<pre><code>#define DECL(v) decltype(v), v\nauto fd = my_make_unique&lt;DECL(&amp;fclose)&gt;(fopen(\"filename\", \"r\"));\n</code></pre>\n\n<p>Whether or not you think that's a good idea is probably up to your coworkers. </p>\n\n<hr />\n\n<p>In C++17, with <code>template auto</code>, you could just be able to write <code>my_make_unique&lt;fclose&gt;</code>, which is great:</p>\n\n<pre><code>template &lt;auto deleter, typename P&gt;\nauto my_make_unique(P* ptr)\n{\n    struct Deleter {\n        void operator()(P* ptr) {\n            deleter(ptr);\n        }\n    };\n    return std::unique_ptr&lt;P, Deleter&gt;(ptr);\n}\n</code></pre>\n\n<p></s></p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1492038353, "creation_date": 1492038353, "answer_id": 43381005, "question_id": 43378260, "link": "https://stackoverflow.com/questions/43378260/wrapper-to-build-stdunique-ptr-with-plain-function-deleters/43381005#43381005", "title": "Wrapper to build std::unique_ptr with plain function deleters", "body": "<p>The typical way to create a <code>std::unique_ptr</code> for a <code>FILE*</code> pointer is:</p>\n\n<pre><code>auto fd = std::unique_ptr&lt;FILE, decltype(fclose)&gt;(fopen(...), fclose);\n</code></pre>\n\n<p>You could wrap that in a macro:</p>\n\n<pre><code>#define my_make_unique(ptr, deleter) \\\n    std::unique_ptr&lt;std::remove_pointer&lt;decltype&lt;ptr&gt;&gt;::type, d&gt;(ptr, deleter)\n</code></pre>\n\n<p>And then use it like this:</p>\n\n<pre><code>auto fd = my_make_unique(fopen(...), fclose);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1592, "user_id": 1938348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d57bc31c85d7fcf46229f41d9b1fcbe?s=128&d=identicon&r=PG", "display_name": "Yankes", "link": "https://stackoverflow.com/users/1938348/yankes"}, "is_accepted": false, "score": 2, "last_activity_date": 1492091633, "creation_date": 1492091633, "answer_id": 43394187, "question_id": 43378260, "link": "https://stackoverflow.com/questions/43378260/wrapper-to-build-stdunique-ptr-with-plain-function-deleters/43394187#43394187", "title": "Wrapper to build std::unique_ptr with plain function deleters", "body": "<p>Another workaround is use exactly signature of function:</p>\n\n<pre><code>template&lt;typename T, int (*P)(T*)&gt; //for `fclose`\nauto my_make_unique(T*) { ... }\n\ntemplate&lt;typename T, void (*P)(T*)&gt; //for other function signatures\nauto my_make_unique(T*) { ... }\n\n//etc.\n\nauto uniq = my_make_unique&lt;File, fclose&gt;(fopen(\"filename\", \"r\"));\n</code></pre>\n\n<p>This is not universal solution but in 95% cases will work.</p>\n"}], "owner": {"reputation": 10901, "user_id": 578749, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/40231a11da5f1c627fd21d6700edddff?s=128&d=identicon&r=PG", "display_name": "lvella", "link": "https://stackoverflow.com/users/578749/lvella"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 871, "favorite_count": 1, "accepted_answer_id": 43378781, "answer_count": 4, "score": 6, "last_activity_date": 1523289438, "creation_date": 1492026013, "last_edit_date": 1495542336, "question_id": 43378260, "link": "https://stackoverflow.com/questions/43378260/wrapper-to-build-stdunique-ptr-with-plain-function-deleters", "title": "Wrapper to build std::unique_ptr with plain function deleters", "body": "<p>I was trying to implement an <code>std::unique_ptr</code> factory that I could use like this:</p>\n\n<pre><code>auto fd = my_make_unique&lt;fclose&gt;(fopen(\"filename\", \"r\"));\n</code></pre>\n\n<p>I.e., pass the deleter function as a template argument.</p>\n\n<p>My best attempt in C++11 was:</p>\n\n<pre><code>template&lt;typename D, D deleter, typename P&gt;\nstruct Deleter {\n    void operator()(P* ptr) {\n        deleter(ptr);\n    }\n};\n\ntemplate&lt;typename D, D deleter, typename P&gt;\nstd::unique_ptr&lt;P, Deleter&lt;D, deleter, P&gt;&gt; my_make_unique(P* ptr)\n{\n    return std::unique_ptr&lt;P, Deleter&lt;D, deleter, P&gt;&gt;(ptr);\n}\n</code></pre>\n\n<p>In C++14 it is much cleaner:</p>\n\n<pre><code>template&lt;typename D, D deleter, typename P&gt;\nauto my_make_unique(P* ptr)\n{\n    struct Deleter {\n        void operator()(P* ptr) {\n            deleter(ptr);\n        }\n    };\n    return std::unique_ptr&lt;P, Deleter&gt;(ptr);\n}\n</code></pre>\n\n<p>But both solutuions would require me to pass the type of <code>&amp;fclose</code> before <code>fclose</code> itself as template argument:</p>\n\n<pre><code>auto fd = my_make_unique&lt;decltype(&amp;fclose), fclose&gt;(fopen(\"filename\", \"r\"));\n</code></pre>\n\n<p>Is it possible to get rid of <code>decltype(&amp;fclose)</code> template argument in C++11? What about in C++14?</p>\n\n<p>EDIT: Why this question is not a duplicate of <a href=\"https://stackoverflow.com/questions/395123/raii-and-smart-pointers-in-c\">RAII and smart pointers in C++</a>: referenced question is about general RAII techniques in C++, and one of the answers estates that <code>std::unique_ptr</code> can be used for this purpose. I am already familiar with RAII pattern and how <code>std::unique_ptr</code> is a solution, but I am concerned with present question on how to build an easier to use abstraction to this frequent case I encounter when interacting with C libraries.</p>\n"}, {"tags": ["c++", "opencv", "detection", "object-detection"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 1, "creation_date": 1492026264, "post_id": 43377983, "comment_id": 73818683, "body": "Welcome! Your post in its current form is too broad and not a good fit for Stack Overflow. Please visit the <a href=\"http://stackoverflow.com/help\">help center</a> and read the section <a href=\"http://stackoverflow.com/help/how-to-ask\">how do I ask a good question</a>."}, {"owner": {"reputation": 5326, "user_id": 614065, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f164c6c3b709c97862a0d14f7725830b?s=128&d=identicon&r=PG", "display_name": "Olcay Erta\u015f", "link": "https://stackoverflow.com/users/614065/olcay-erta%c5%9f"}, "edited": false, "score": 0, "creation_date": 1492026518, "post_id": 43377983, "comment_id": 73818823, "body": "Share your code if possible. Tell us about your current approach."}], "owner": {"reputation": 1, "user_id": 7858430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7d157dd22933f16069d705e983fa2de?s=128&d=identicon&r=PG&f=1", "display_name": "H.mati", "link": "https://stackoverflow.com/users/7858430/h-mati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 303, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1597353253, "creation_date": 1492024996, "last_edit_date": 1597353253, "question_id": 43377983, "link": "https://stackoverflow.com/questions/43377983/how-to-separate-objects-which-have-the-same-color-with-opencv", "title": "How to separate objects which have the same color with openCv", "body": "<p>For an internship I need to detect and count some pigs. I can separate them from the background but not separate one from another when they are too close. I'm starting to learn image processing and OpenCv so maybe I'm doing bad. Do you have any advice for me?</p>\n<p>You can see the image without background here:</p>\n<p><a href=\"https://i.stack.imgur.com/npek3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/npek3.png\" alt=\"https://i.stack.imgur.com/npek3.png\" /></a></p>\n"}, {"tags": ["c++", "c", "rsa", "tpm", "trusted-computing"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1492024920, "post_id": 43377862, "comment_id": 73817955, "body": "I use that a lot but every time I succeed they arrest me."}, {"owner": {"reputation": 51, "user_id": 6788777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/061b6931563c6a1647d1e80c1b09a4c5?s=128&d=identicon&r=PG&f=1", "display_name": "Adam S", "link": "https://stackoverflow.com/users/6788777/adam-s"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1492027430, "post_id": 43377862, "comment_id": 73819362, "body": "What do you mean?"}], "owner": {"reputation": 51, "user_id": 6788777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/061b6931563c6a1647d1e80c1b09a4c5?s=128&d=identicon&r=PG&f=1", "display_name": "Adam S", "link": "https://stackoverflow.com/users/6788777/adam-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1492024518, "creation_date": 1492024518, "question_id": 43377862, "link": "https://stackoverflow.com/questions/43377862/binding-unbinding-with-trousers-library", "title": "Binding &amp; Unbinding with TrouSerS library", "body": "<p>I'm using TrouSerS library. I want to write one app which will bind AES key and put this bounded key into file and second app which will decrypt this key from file.</p>\n\n<p>Here is my codes:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/types.h&gt;\n\n#include &lt;tss/tss_error.h&gt;\n#include &lt;tss/platform.h&gt;\n#include &lt;tss/tss_defines.h&gt;\n#include &lt;tss/tss_typedef.h&gt;\n#include &lt;tss/tss_structs.h&gt;\n#include &lt;tss/tspi.h&gt;\n#include &lt;trousers/trousers.h&gt;\n\n#define DBG(message, tResult) printf(\"Line%d, %s) %s returned 0x%08x. %s.\\n\", __LINE__, __func__, message, tResult,(char *)Trspi_Error_String(tResult));\n\n\n\nint main(int argc, char **argv){\n    TSS_HCONTEXT    hContext=0;\n    TSS_HTPM        hTPM=0;\n    TSS_RESULT      result;\n    TSS_HKEY            hSRK=0;\n    TSS_HPOLICY     hSRKPolicy=0;\n    TSS_HPOLICY     hTPMPolicy=0;\n    TSS_UUID        SRK_UUID=TSS_UUID_SRK;\n    BYTE            wks[20]; \n    memset(wks,0,20);  \n\n\nresult=Tspi_Context_Create(&amp;hContext);\nresult=Tspi_Context_Connect(hContext, NULL);\nresult=Tspi_Context_GetTpmObject(hContext, &amp;hTPM);\nresult=Tspi_Context_LoadKeyByUUID(hContext,TSS_PS_TYPE_SYSTEM, SRK_UUID, &amp;hSRK);\nresult=Tspi_GetPolicyObject(hSRK, TSS_POLICY_USAGE, &amp;hSRKPolicy);\nresult=Tspi_Policy_SetSecret(hSRKPolicy, TSS_SECRET_MODE_SHA1,20,wks);\n\nUINT32  ulDataLength;\nBYTE    *rgbBoundData;\nFILE    *fin;\nTSS_HKEY    hBindingKey;\nBYTE        newPubKey[284];\nfin=fopen(\"Bind.pub\",\"r\");\n  read(fileno(fin),newPubKey,284);\nfclose(fin);\n\nTSS_FLAG    initFlags;\ninitFlags=TSS_KEY_TYPE_BIND|TSS_KEY_SIZE_2048|TSS_KEY_AUTHORIZATION|TSS_KEY_NOT_MIGRATABLE;\n\nresult=Tspi_Context_CreateObject(hContext, TSS_OBJECT_TYPE_RSAKEY, initFlags, &amp;hBindingKey);\nDBG(\"\",result);\nresult=Tspi_SetAttribData(hBindingKey, TSS_TSPATTRIB_KEY_BLOB, TSS_TSPATTRIB_KEYBLOB_PUBLIC_KEY, 284, newPubKey);\nDBG(\"\",result);\n\nBYTE    encData[7];\nTSS_HENCDATA hEncData;\nfin=fopen(\"AES.key\",\"rb\");\n  read(fileno(fin),encData,7);\nfclose(fin);\nresult=Tspi_Context_CreateObject(hContext, TSS_OBJECT_TYPE_ENCDATA, TSS_ENCDATA_BIND, &amp;hEncData);\nDBG(\"\",result);\nresult=Tspi_Data_Bind(hEncData, hBindingKey, 7, encData);\nDBG(\"\",result);\nresult=Tspi_GetAttribData(hEncData, TSS_TSPATTRIB_ENCDATA_BLOB, TSS_TSPATTRIB_ENCDATABLOB_BLOB, &amp;ulDataLength, &amp;rgbBoundData);\nDBG(\"\",result);\nFILE *fout;\nfout=fopen(\"Bound.data\",\"wb\");\n  write(fileno(fout),rgbBoundData,ulDataLength);\nfclose(fout);\nTspi_Context_Close(hSRKPolicy);\nDBG(\"\", result);\nTspi_Context_FreeMemory(hContext, NULL);\nDBG(\"\", result);\nTspi_Context_Close(hContext);\nDBG(\"\", result);\nreturn 0;\n}\n</code></pre>\n\n<p>It's executing without any errors.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/types.h&gt;\n\n#include &lt;tss/tss_error.h&gt;\n#include &lt;tss/platform.h&gt;\n#include &lt;tss/tss_defines.h&gt;\n#include &lt;tss/tss_typedef.h&gt;\n#include &lt;tss/tss_structs.h&gt;\n#include &lt;tss/tspi.h&gt;\n#include &lt;trousers/trousers.h&gt;\n\n#define DBG(message, tResult) printf(\"Line%d, %s) %s returned 0x%08x. %s.\\n\", __LINE__, __func__, message, tResult,(char *)Trspi_Error_String(tResult));\n\n\n\nint main(int argc, char **argv){\n    TSS_HCONTEXT    hContext=0;\n    TSS_HTPM        hTPM=0;\n    TSS_RESULT      result;\n    TSS_HKEY            hSRK=0;\n    TSS_HPOLICY     hSRKPolicy=0;\n    TSS_HPOLICY     hTPMPolicy=0;\n    TSS_UUID        SRK_UUID=TSS_UUID_SRK;\n    BYTE            wks[20]; \n    memset(wks,0,20);  \n\nresult=Tspi_Context_Create(&amp;hContext);\nresult=Tspi_Context_Connect(hContext, NULL);\nresult=Tspi_Context_GetTpmObject(hContext, &amp;hTPM);\nresult=Tspi_Context_LoadKeyByUUID(hContext,TSS_PS_TYPE_SYSTEM, SRK_UUID, &amp;hSRK);\nresult=Tspi_GetPolicyObject(hSRK, TSS_POLICY_USAGE, &amp;hSRKPolicy);\nresult=Tspi_Policy_SetSecret(hSRKPolicy, TSS_SECRET_MODE_SHA1,20,wks);\n\nUINT32  encLen=256;\nBYTE    encryptedData[256], *pointer;\nBYTE    *rgbDataunBound;\nUINT32  ulDataLength;\nTSS_UUID MY_UUID={0,0,0,0,0,{0,0,0,2,11}};\nFILE *fin;\nFILE *fout;\nTSS_HKEY    hUnbindKey=0;\nfin=fopen(\"Bound.data\",\"rb\");\nread(fileno(fin),encryptedData,&amp;ulDataLength);\nfclose(fin);\nTSS_HENCDATA hEncData;\nresult=Tspi_Context_CreateObject(hContext, TSS_OBJECT_TYPE_ENCDATA, TSS_ENCDATA_BIND, &amp;hEncData);\nDBG(\"\",result);\nresult=Tspi_SetAttribData(hEncData, TSS_TSPATTRIB_ENCDATA_BLOB,TSS_TSPATTRIB_ENCDATABLOB_BLOB,256,encryptedData);\nDBG(\"\",result);\n\nresult=Tspi_Context_GetKeyByUUID(hContext, TSS_PS_TYPE_SYSTEM, MY_UUID, &amp;hUnbindKey);\nDBG(\"\",result);\nresult=Tspi_Key_LoadKey(hUnbindKey,hSRK);\nDBG(\"\",result);\n\nTSS_HPOLICY hUnbindPolicy;\nresult=Tspi_GetPolicyObject(hUnbindKey, TSS_POLICY_USAGE, &amp;hUnbindPolicy);\nDBG(\"\",result);\nresult=Tspi_Policy_SetSecret(hUnbindPolicy,TSS_SECRET_MODE_PLAIN,3,\"123\");\nDBG(\"\",result);\n\nresult=Tspi_Data_Unbind(hEncData, hUnbindKey, &amp;ulDataLength, &amp;rgbDataunBound);\nDBG(\"\",result);\n\nTspi_Context_Close(hSRKPolicy);\nDBG(\"\", result);\nTspi_Context_FreeMemory(hContext, NULL);\nDBG(\"\", result);\nTspi_Context_Close(hContext);\nDBG(\"\", result);\nreturn 0;\n}\n</code></pre>\n\n<p>And here I'm getting \"0x00000021. Decryption error.\" after Tspi_Data_Unbind function.</p>\n\n<p>Could you help me, please? </p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1492025608, "post_id": 43377857, "comment_id": 73818306, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/3264795/how-to-override-keypressevent-for-an-editable-qcombobox\">How-to override KeyPressEvent for an editable QComboBox?</a>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1492027185, "post_id": 43377857, "comment_id": 73819227, "body": "I have implemented the keyPressEvent method and I had no problems, you could show what you tried."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1492029317, "post_id": 43377857, "comment_id": 73820466, "body": "What exactly are you trying to do? Why do you think you need to reimplement the <code>keyPressEvent</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "edited": false, "score": 0, "creation_date": 1492060090, "post_id": 43379225, "comment_id": 73829547, "body": "I tried installing event filter but its not working."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "edited": false, "score": 0, "creation_date": 1492093044, "post_id": 43379225, "comment_id": 73850406, "body": "That&#39;s not enough information. Please show your work. Edit the question to offer a self-contained <code>main.cpp</code> that demonstrates the issue. Ensure that it is truly minimal. Think 40-50 lines at most. Begin the file with <code>#include &lt;QtWidgets&gt;</code>, end with <code>#include &quot;main.moc&quot;</code>."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1492029467, "creation_date": 1492029467, "answer_id": 43379225, "question_id": 43377857, "link": "https://stackoverflow.com/questions/43377857/how-call-the-keypresseventqkeyevent-of-linedit-of-qcombobox/43379225#43379225", "title": "How Call the KeyPressEvent(QKeyEvent *) of linedit of QCombobox?", "body": "<p>You have two options:</p>\n\n<ol>\n<li><p>Install an event filter on the <code>lineEdit</code> widget.</p></li>\n<li><p>Use <code>setLineEdit</code> to replace the existing widget with your own subclass that reimplements the event handler.</p></li>\n</ol>\n"}], "owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492029467, "creation_date": 1492024498, "last_edit_date": 1492026539, "question_id": 43377857, "link": "https://stackoverflow.com/questions/43377857/how-call-the-keypresseventqkeyevent-of-linedit-of-qcombobox", "title": "How Call the KeyPressEvent(QKeyEvent *) of linedit of QCombobox?", "body": "<p>I have a <code>QComboBox</code>, which is editable, I implemented the <code>keyPressEvent(QKeyEvent *)</code> method, but it does not seem to fire this method.</p>\n\n<p>I can think of the only reason this happens is that <strong>whatever editing that occurs is actually happening in lineEdit object and We should implement keyPressEvent(QKeyEvent *) of line Edit</strong>. How can I achieve this?</p>\n"}, {"tags": ["c++", "linux", "assembly", "x86", "elf"], "comments": [{"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1492022362, "post_id": 43377195, "comment_id": 73816508, "body": "Use the section headers (<code>objdump -h</code>) and adjust by the virtual address offset. Alternatively, just search for a sufficiently long byte sequence."}, {"owner": {"reputation": 7894, "user_id": 1020139, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e6b113d9e9ab23110a4e5b611bcaad61?s=128&d=identicon&r=PG", "display_name": "Shuzheng", "link": "https://stackoverflow.com/users/1020139/shuzheng"}, "reply_to_user": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1492022463, "post_id": 43377195, "comment_id": 73816584, "body": "@Jester - Would you elaborate on your answer?"}], "answers": [{"comments": [{"owner": {"reputation": 7894, "user_id": 1020139, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e6b113d9e9ab23110a4e5b611bcaad61?s=128&d=identicon&r=PG", "display_name": "Shuzheng", "link": "https://stackoverflow.com/users/1020139/shuzheng"}, "edited": false, "score": 0, "creation_date": 1492027552, "post_id": 43377713, "comment_id": 73819437, "body": "Thanks! This is very helpful!"}], "tags": [], "owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "is_accepted": true, "score": 7, "last_activity_date": 1492023964, "creation_date": 1492023964, "answer_id": 43377713, "question_id": 43377195, "link": "https://stackoverflow.com/questions/43377195/how-do-i-get-the-file-offset-in-an-elf-binary-corresponding-to-a-label-outputted/43377713#43377713", "title": "How do I get the file offset in an ELF binary corresponding to a label outputted by objdump?", "body": "<p>You can get <em>OBJDUMP</em> to dump the file offsets by using the <code>-F</code>. From the <a href=\"https://sourceware.org/binutils/docs/binutils/objdump.html\" rel=\"noreferrer\"><em>OBJDUMP</em> documentation</a>:</p>\n\n<blockquote>\n<pre><code>objdump \n         ..snip..\n         [-F|--file-offsets]\n         ..snip..\n</code></pre>\n</blockquote>\n\n<p>Try using <code>objdump -DF prog</code>. You should see each label listed with the file offset with information like:</p>\n\n<pre><code>0000000000400601 &lt;.cstart_c941&gt;: (File Offset: 0xXXXXXXXX)\n</code></pre>\n\n<p><code>0xXXXXXXXX</code> should be the file offset of that label.</p>\n"}], "owner": {"reputation": 7894, "user_id": 1020139, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e6b113d9e9ab23110a4e5b611bcaad61?s=128&d=identicon&r=PG", "display_name": "Shuzheng", "link": "https://stackoverflow.com/users/1020139/shuzheng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 883, "favorite_count": 2, "accepted_answer_id": 43377713, "answer_count": 1, "score": 3, "last_activity_date": 1492023964, "creation_date": 1492022292, "question_id": 43377195, "link": "https://stackoverflow.com/questions/43377195/how-do-i-get-the-file-offset-in-an-elf-binary-corresponding-to-a-label-outputted", "title": "How do I get the file offset in an ELF binary corresponding to a label outputted by objdump?", "body": "<p>Suppose I have an ELF binary <code>prog</code> and suppose <code>objdump -d prog</code> produces output along the following lines [snippet]:</p>\n\n<pre><code>0000000000400601 &lt;.cstart_c941&gt;:\n  400601:   eb 01                   jmp    400604 &lt;.end_c941&gt;\n\n0000000000400603 &lt;.cslot_c941&gt;:\n  400603:   84                      .byte 0x84\n\n0000000000400604 &lt;.end_c941&gt;:\n  400604:   48 81 ec 80 00 00 00    sub    $0x80,%rsp\n  40060b:   50                      push   %rax\n  40060c:   53                      push   %rbx\n  40060d:   56                      push   %rsi\n  40060e:   48 31 c0                xor    %rax,%rax\n  400611:   48 c7 c6 41 06 40 00    mov    $0x400641,%rsi\n</code></pre>\n\n<p>What I need is the file offset corresponding to <code>.cslot_c941</code>, since I need to modify the byte at this position.</p>\n\n<p>How would I accomplish this task?</p>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 3577, "user_id": 2176813, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Nv7lK.jpg?s=128&g=1", "display_name": "tambre", "link": "https://stackoverflow.com/users/2176813/tambre"}, "edited": false, "score": 0, "creation_date": 1492024167, "post_id": 43377182, "comment_id": 73817523, "body": "What OpenGL version are you targeting?"}, {"owner": {"reputation": 13, "user_id": 6380677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25a4dff731575767ba1d1980364d9474?s=128&d=identicon&r=PG&f=1", "display_name": "perrelet", "link": "https://stackoverflow.com/users/6380677/perrelet"}, "reply_to_user": {"reputation": 3577, "user_id": 2176813, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Nv7lK.jpg?s=128&g=1", "display_name": "tambre", "link": "https://stackoverflow.com/users/2176813/tambre"}, "edited": false, "score": 0, "creation_date": 1492076400, "post_id": 43377182, "comment_id": 73838462, "body": "@tambre - Asking more generally the best practice overall. If the answer to this question is version dependent, then which versions &amp; how?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6380677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25a4dff731575767ba1d1980364d9474?s=128&d=identicon&r=PG&f=1", "display_name": "perrelet", "link": "https://stackoverflow.com/users/6380677/perrelet"}, "edited": false, "score": 0, "creation_date": 1492076184, "post_id": 43377937, "comment_id": 73838304, "body": "Very clear and well presented answer - thankyou for the clarity. Indeed -  the example I gave was assuming a program that only makes <code>GL_TEXTURE2D</code> bindings. Further, good idea to simply remove such code for release through a pre-process statement. +1"}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 3, "last_activity_date": 1492024804, "creation_date": 1492024804, "answer_id": 43377937, "question_id": 43377182, "link": "https://stackoverflow.com/questions/43377182/opengl-practice-of-binding-to-default-texture/43377937#43377937", "title": "OpenGL - Practice of binding to default texture?", "body": "<p>This is not necessary for deleting objects. When you delete an object, it is automatically unbound from every binding point. This is only true of the context that issued the <code>glDelete*</code> command; other contexts that share access to that object won't have it unbound. And if the object is attached to another object (such as a texture attached to a framebuffer), then that also won't be unattached.</p>\n\n<p>It is not a bad idea to clean up after yourself, mainly to avoid errors. If a shader tries to access a texture unit that has something bound to it, it may \"work\", thus hiding the error. Whereas if it tries to access a unit that has nothing bound to it, it's a lot more likely to visibly fail.</p>\n\n<p>Of course, this is primarily for debugging, so you can <code>#ifdef</code> around such code to remove it in release builds.</p>\n\n<p>However, the above assumes that you're unbinding the texture essentially after you're done rendering with it. I bring that up because the code you've displayed that unbinds from every texture unit is <em>incorrect</em>. Why?</p>\n\n<p>Because each texture unit has <em>multiple</em> binding points, one for each <em>type</em> of texture. So if you bound a texture to <code>GL_TEXTURE_CUBE_MAP</code>, calling <code>glBindTexture(GL_TEXTURE2D, 0)</code> doesn't do anything to the texture bound to the cube map target.</p>\n\n<p>So if you're going to write code that unbinds textures from every texture unit, you have to call <code>glBindTexture</code> with <a href=\"https://www.khronos.org/opengl/wiki/Texture#Theory\" rel=\"nofollow noreferrer\"><em>every</em> texture target that exists</a>:</p>\n\n<pre><code>void UnbindFromTextureUnit(int unit)\n{\n  static const GLenum allTargets[] = {/*Every texture target that exists*/};\n\n  glActiveTexture(GL_TEXTURE0 + unit);\n  for(auto target : allTargets)\n    glBindTexture(target, 0);\n}\n</code></pre>\n\n<p>Or you could use the <a href=\"https://www.khronos.org/opengl/wiki/Sampler_(GLSL)#Multibind_and_textures\" rel=\"nofollow noreferrer\">multibind <code>glBindTextures</code> from GL 4.4</a>. Or the direct-state-access 4.5 <code>glBindTextureUnit()</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 6380677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25a4dff731575767ba1d1980364d9474?s=128&d=identicon&r=PG&f=1", "display_name": "perrelet", "link": "https://stackoverflow.com/users/6380677/perrelet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 396, "favorite_count": 0, "accepted_answer_id": 43377937, "answer_count": 1, "score": 1, "last_activity_date": 1492024804, "creation_date": 1492022248, "question_id": 43377182, "link": "https://stackoverflow.com/questions/43377182/opengl-practice-of-binding-to-default-texture", "title": "OpenGL - Practice of binding to default texture?", "body": "<p>I've noticed that some choose to bind the default texture to every texture unit they have used during each render loop. Is this common / best practice?</p>\n\n<p>Pseudo Example:</p>\n\n<pre><code>Tick() {\n\n  glUseProgram(someProgram);\n\n  glActiveTexture(GL_TEXTURE0);\n  glBindTexture(GL_TEXTURE_2D, imgTexture1);\n\n  glActiveTexture(GL_TEXTURE1);\n  glBindTexture(GL_TEXTURE_2D, imgTexture2);\n\n  .\n  .\n  .\n\n  //Is the following really necessary: ???\n\n  glUseProgram(0);\n\n  glActiveTexture(GL_TEXTURE0);\n  glBindTexture(GL_TEXTURE_2D, 0);\n\n  glActiveTexture(GL_TEXTURE1);\n  glBindTexture(GL_TEXTURE_2D, 0);\n\n}\n</code></pre>\n\n<p>If it's not required here, then should such calls be made before resources are released?</p>\n"}, {"tags": ["c++", "c++11", "matrix", "operator-overloading"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1492022209, "post_id": 43377117, "comment_id": 73816417, "body": "Not the problem, but <code>operator *=</code> shouldnt return a reference to a local <code>Matrix</code>. If anything you can return <code>*this</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1492022285, "post_id": 43377117, "comment_id": 73816458, "body": "You might want to give this a read to see how to properly overload your operators: <a href=\"http://stackoverflow.com/questions/4421706/operator-overloading\">stackoverflow.com/questions/4421706/operator-overloading</a>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1492022356, "post_id": 43377117, "comment_id": 73816504, "body": "<code>operator*=</code> is expected to modify the value of <code>this</code> and then return a reference to <code>*this</code>."}], "answers": [{"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1492022398, "post_id": 43377183, "comment_id": 73816539, "body": "<code>M</code> is a local variable. You can&#39;t return a reference to it safely."}, {"owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1492022866, "post_id": 43377183, "comment_id": 73816832, "body": "@CoryKramer: of course one should change and return <code>*this</code>"}, {"owner": {"reputation": 3733, "user_id": 2013672, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4010c640f24dec3e17b12eb57226255e?s=128&d=identicon&r=PG&f=1", "display_name": "Sadik", "link": "https://stackoverflow.com/users/2013672/sadik"}, "edited": false, "score": 0, "creation_date": 1492023416, "post_id": 43377183, "comment_id": 73817146, "body": "thanks. I thought I&#39;d understand the error now, but with your fix the error still occurs."}, {"owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "reply_to_user": {"reputation": 3733, "user_id": 2013672, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4010c640f24dec3e17b12eb57226255e?s=128&d=identicon&r=PG&f=1", "display_name": "Sadik", "link": "https://stackoverflow.com/users/2013672/sadik"}, "edited": false, "score": 0, "creation_date": 1492023762, "post_id": 43377183, "comment_id": 73817297, "body": "@Sadik: I&#39;d set the <code>operator-</code> parameters to const-references as well, i.e. <code>operator-(Matrix const&amp; A, Matrix const&amp; B)</code>, but this shouldn&#39;t be the problem. Is it really the same problem, same error message? (Just asking because the code is explicitly doing what the original error message asked for -- provide a (const) reference to <code>Matrix const&amp;</code> ...). Are there other operators involved in your code which are unfixed and might have a similar problem?"}, {"owner": {"reputation": 3733, "user_id": 2013672, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4010c640f24dec3e17b12eb57226255e?s=128&d=identicon&r=PG&f=1", "display_name": "Sadik", "link": "https://stackoverflow.com/users/2013672/sadik"}, "edited": false, "score": 0, "creation_date": 1492024824, "post_id": 43377183, "comment_id": 73817900, "body": "yes, it is exactly the same error message, though it returns <code>*this</code> now. Other operators have the same problem, but the compiler is pointing to the same line."}, {"owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "reply_to_user": {"reputation": 3733, "user_id": 2013672, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4010c640f24dec3e17b12eb57226255e?s=128&d=identicon&r=PG&f=1", "display_name": "Sadik", "link": "https://stackoverflow.com/users/2013672/sadik"}, "edited": false, "score": 0, "creation_date": 1492025833, "post_id": 43377183, "comment_id": 73818421, "body": "@Sadik: Hard to say where the error is without seeing you code, but I think it should work: see <a href=\"http://coliru.stacked-crooked.com/a/faa9392d37c9793d\" rel=\"nofollow noreferrer\">here</a> for a minimal example (which doesn&#39;t do anything a matrix should but correctly captures the types of the function parameters ... without error)."}, {"owner": {"reputation": 3733, "user_id": 2013672, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4010c640f24dec3e17b12eb57226255e?s=128&d=identicon&r=PG&f=1", "display_name": "Sadik", "link": "https://stackoverflow.com/users/2013672/sadik"}, "edited": false, "score": 0, "creation_date": 1492028908, "post_id": 43377183, "comment_id": 73820245, "body": "It&#39;s still completely unclear to me why your minimal example works and my code doesn&#39;t. My code is not long, maybe I should add a few more lines."}, {"owner": {"reputation": 3733, "user_id": 2013672, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4010c640f24dec3e17b12eb57226255e?s=128&d=identicon&r=PG&f=1", "display_name": "Sadik", "link": "https://stackoverflow.com/users/2013672/sadik"}, "edited": false, "score": 0, "creation_date": 1492029582, "post_id": 43377183, "comment_id": 73820616, "body": "@davidhigh <a href=\"http://coliru.stacked-crooked.com/a/0430bc4142c082e0\" rel=\"nofollow noreferrer\">here is my code</a>"}], "tags": [], "owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "is_accepted": true, "score": 4, "last_activity_date": 1492023260, "last_edit_date": 1492023260, "creation_date": 1492022251, "answer_id": 43377183, "question_id": 43377117, "link": "https://stackoverflow.com/questions/43377117/invalid-initialization-of-non-const-reference-of-type-matrix-from-an-rvalue-o/43377183#43377183", "title": "invalid initialization of non-const reference of type &#39;Matrix&amp;&#39; from an rvalue of type &#39;Matrix&#39;", "body": "<p>By the command <code>c - c</code> you generate a new matrix via <code>operator-</code> and return it. Next, <code>operator*=</code> takes a reference to a matrix, and this is where the compiler complains. It does it in order to prevent you from the fact, that the underlying object will be expired by the time you want to use it.</p>\n\n<p>Try changing the <code>Matrix&amp;</code> to <code>Matrix const&amp;</code>. This will extend the lifetime of your object until the end of the function. Plus, it's is also more appropriate from the const-correctness view.</p>\n\n<p>Moreover, you should return <code>*this</code> from your <code>operator*=</code> and also change the contained matrix. (thanks to @CoryKramer for pointing, missed it in the hurry of answering).</p>\n\n<p>So your operator should basically look like (just the basic concept, no optimization at all):</p>\n\n<pre><code>Matrix &amp;Matrix::operator *=(Matrix const&amp; B)\n{\n    Matrix M(rows(), B.cols());\n\n    for (int i = 0; i&lt;rows(); i++)\n    {\n        for (int j=0; j&lt;B.cols(); j++)\n        {\n            for (int k=0; k&lt;cols(); k++)\n            {\n                M(i,j) += (*this)(i,k) * B(k,j);\n            }\n        }\n    }\n\n    //copy -- or better move -- the temporary matrix into *this\n    operator=(std::move(M));\n    return *this;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1492033679, "post_id": 43380043, "comment_id": 73822458, "body": "No, prefer <code>const Matrix&amp;</code> to just <code>Matrix</code> (unless you are going to modify or move the argument)."}, {"owner": {"reputation": 3733, "user_id": 2013672, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4010c640f24dec3e17b12eb57226255e?s=128&d=identicon&r=PG&f=1", "display_name": "Sadik", "link": "https://stackoverflow.com/users/2013672/sadik"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1492034256, "post_id": 43380043, "comment_id": 73822678, "body": "@aschepler Thank you. I followed your advice and now it&#39;s perfectly clean I think. Learned a lot here."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1492034387, "post_id": 43380043, "comment_id": 73822718, "body": "You also need to fix <code>operator*=</code> to operate on <code>*this</code> and not return a local variable by reference as you currently do (the other answer describes this)"}, {"owner": {"reputation": 3733, "user_id": 2013672, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4010c640f24dec3e17b12eb57226255e?s=128&d=identicon&r=PG&f=1", "display_name": "Sadik", "link": "https://stackoverflow.com/users/2013672/sadik"}, "edited": false, "score": 0, "creation_date": 1492034516, "post_id": 43380043, "comment_id": 73822774, "body": "I already mentioned this, right? The fix needs to be applied to all operators in the class. Actually the davidhigh mentioned this fix, but said that this was not the real problem. Turned out it was. I&#39;m going to accept his answer."}], "tags": [], "owner": {"reputation": 3733, "user_id": 2013672, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4010c640f24dec3e17b12eb57226255e?s=128&d=identicon&r=PG&f=1", "display_name": "Sadik", "link": "https://stackoverflow.com/users/2013672/sadik"}, "is_accepted": false, "score": 0, "last_activity_date": 1492034060, "last_edit_date": 1492034060, "creation_date": 1492032985, "answer_id": 43380043, "question_id": 43377117, "link": "https://stackoverflow.com/questions/43377117/invalid-initialization-of-non-const-reference-of-type-matrix-from-an-rvalue-o/43380043#43380043", "title": "invalid initialization of non-const reference of type &#39;Matrix&amp;&#39; from an rvalue of type &#39;Matrix&#39;", "body": "<p>The solution was to change the operator signatures from </p>\n\n<pre><code>Matrix operator -(Matrix &amp;A, Matrix &amp;B);\n</code></pre>\n\n<p>to </p>\n\n<pre><code>Matrix operator -(const Matrix &amp;A, const Matrix &amp;B)\n</code></pre>\n\n<p>for all operators. I also had to add a new operator <code>const double &amp; operator ()(int row, int column) const;</code>, otherwise the statement <code>B(k,j)</code> wouldn't work.\nAdditional to that I did what davidhigh suggested and return *this instead of the temporary Matrix object.</p>\n\n<p>The statement where the error occured was<code>a *= c-c</code>.</p>\n\n<p>At first, <code>c-c</code> will create a <strong>temporary</strong> object. Then this temporary object is <strong>passed by reference</strong> to the <code>*=</code> operator. C++ only allows a temporary to be passed to a const reference, value, or rvalue.</p>\n\n<p>Thank you everybody for helping me out.</p>\n"}], "owner": {"reputation": 3733, "user_id": 2013672, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4010c640f24dec3e17b12eb57226255e?s=128&d=identicon&r=PG&f=1", "display_name": "Sadik", "link": "https://stackoverflow.com/users/2013672/sadik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 419, "favorite_count": 0, "accepted_answer_id": 43377183, "answer_count": 2, "score": 1, "last_activity_date": 1492034060, "creation_date": 1492022009, "question_id": 43377117, "link": "https://stackoverflow.com/questions/43377117/invalid-initialization-of-non-const-reference-of-type-matrix-from-an-rvalue-o", "title": "invalid initialization of non-const reference of type &#39;Matrix&amp;&#39; from an rvalue of type &#39;Matrix&#39;", "body": "<p>I just don't see my mistake. There are so many questions regarding this error message and either the answers don't apply or I just can't see that they apply. Maybe the error message should be improved?</p>\n\n<pre><code>Matrix a = Matrix(3, 4);\n// fill a with values\nMatrix c = Matrix(4, 4);\n// fill c with values\na *= c - c; //this is where the compile error occurs\n</code></pre>\n\n<p>When I change the line to <code>a *= c</code> it works. So I guess there is nothing wrong with the *= operator.</p>\n\n<p>This is the Matrix *= operator:</p>\n\n<pre><code>Matrix &amp;Matrix::operator *=(Matrix &amp;B)\n{\n    Matrix M(rows(), B.cols());\n    for (int i = 0; i&lt;rows(); i++)\n    {\n        for (int j=0; j&lt;B.cols(); j++)\n        {\n            for (int k=0; k&lt;cols(); k++)\n            {\n                M(i,j) = M(i,j) + (*this)(i,k) * B(k,j);\n            }\n        }\n    }\n    return M;\n}\n</code></pre>\n\n<p>And this is the -operator:</p>\n\n<pre><code>Matrix operator -(Matrix &amp;A, Matrix &amp;B)\n{\n    //TODO: Check if matrices have same dimensions, exception else\n    Matrix M(A.rows(), A.cols());\n    for(int i=0; i&lt;A.rows(); i++)\n    {\n        for(int j=0; j&lt;A.cols(); j++)\n        {\n            M(i,j) = A(i,j)-B(i,j);\n        }\n    }\n    return M;\n}\n</code></pre>\n"}, {"tags": ["c++", "makefile"], "comments": [{"owner": {"reputation": 5085, "user_id": 934599, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/9rZQv.jpg?s=128&g=1", "display_name": "uzsolt", "link": "https://stackoverflow.com/users/934599/uzsolt"}, "edited": false, "score": 0, "creation_date": 1492024170, "post_id": 43377115, "comment_id": 73817525, "body": "Which <code>lib_wave.a</code> do you want to use? Do you need <code>..&#47;lib_wave.a</code> or <code>&#47;home&#47;ubuntu&#47;VENTOS&#47;source&#47;libs&#47;lib_wave.a</code>? Why don&#39;t you include the <code>..&#47;lib_wave.a</code>&#39;s generate into <code>Makefile</code>?"}, {"owner": {"reputation": 1597, "user_id": 1131067, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5zIZe.png?s=128&g=1", "display_name": "ManiAm", "link": "https://stackoverflow.com/users/1131067/maniam"}, "reply_to_user": {"reputation": 5085, "user_id": 934599, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/9rZQv.jpg?s=128&g=1", "display_name": "uzsolt", "link": "https://stackoverflow.com/users/934599/uzsolt"}, "edited": false, "score": 0, "creation_date": 1492024715, "post_id": 43377115, "comment_id": 73817846, "body": "@uzsolt: if lib_wave.a file exists in path ../lib_wave.a then I will update LIBWAVE_PATH to ../lib_wave.a. If not then I will use LIBWAVE_PATH = /home/ubuntu/VENTOS/source/libs/lib_wave.a"}], "answers": [{"tags": [], "owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "is_accepted": true, "score": 0, "last_activity_date": 1492036876, "creation_date": 1492036876, "answer_id": 43380780, "question_id": 43377115, "link": "https://stackoverflow.com/questions/43377115/change-variables-value-in-makefile-does-not-have-effect/43380780#43380780", "title": "Change variable&#39;s value in Makefile does not have effect", "body": "<p>Consider a simpler version of this rule:</p>\n\n<pre><code>LIBWAVE_check:\n    LIBWAVE_PATH=../lib_wave.a\n</code></pre>\n\n<p>Each command in a rule executes in its own sub-shell. The command <code>LIBWAVE_PATH=...</code> modifies the <em>shell</em> variable, which then expires when the command terminates, so the change has no effect.</p>\n\n<p>To modify the <em>Make</em> variables in a way that the <code>TSP_OBU</code> rule can use, you have two options. You could modify them within the command that uses them:</p>\n\n<pre><code>TSP_OBU: ...\n    LIBWAVE_PATH=../lib_wave.a; LIBSAEJ2735_PATH=../libsaej2735.a; g++ ...\n</code></pre>\n\n<p>Then for the conditionals you could either use <em>shell</em> conditionals within the command, or <em>Make</em> conditionals surrounding the command, a pain either way.</p>\n\n<p>The other option (which I recommend) is to remove the \"check\" targets and put all of this logic outside the rules:</p>\n\n<pre><code>LIBWAVE_PATH = /home/ubuntu/VENTOS/source/libs/lib_wave.a\nifeq (,$(wildcard ../lib_wave.a))\n  ifeq (,$(wildcard $(LIBWAVE_PATH)))\n    $(error 'lib_wave.a' does not exist in $(LIBWAVE_PATH))\n  endif\nelse\n  LIBWAVE_PATH=../lib_wave.a\nendif\n</code></pre>\n\n<p>...and likewise for <code>LIBSAEJ2735_PATH</code>.</p>\n"}], "owner": {"reputation": 1597, "user_id": 1131067, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5zIZe.png?s=128&g=1", "display_name": "ManiAm", "link": "https://stackoverflow.com/users/1131067/maniam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 0, "accepted_answer_id": 43380780, "answer_count": 1, "score": 0, "last_activity_date": 1492036876, "creation_date": 1492022003, "question_id": 43377115, "link": "https://stackoverflow.com/questions/43377115/change-variables-value-in-makefile-does-not-have-effect", "title": "Change variable&#39;s value in Makefile does not have effect", "body": "<p>I am new to Makefile and I have written a simple Makefile to compile my C++ program. </p>\n\n<p>TSP_OBU target checks if two libraries (lib_wave.a and libsaej2735.a) exists in the parent folder. If yes, the default value of 'LIBWAVE_PATH' and 'LIBSAEJ2735_PATH' variables are changed (in target LIBWAVE_check and LIBSAEJ2735_check). But apparently changing the 'LIBWAVE_PATH' and 'LIBSAEJ2735_PATH' variables do not have any effect and the default value (defined at the top of Makefile) is always used.</p>\n\n<pre><code>LIBWAVE_PATH = /home/ubuntu/VENTOS/source/libs/lib_wave.a\nLIBSAEJ2735_PATH = /home/ubuntu/VENTOS/source/libs/libsaej2735.a\n\nall: TSP_OBU\n\n# link\nTSP_OBU: TSP_OBU.o gps.o wave.o LIBWAVE_check LIBSAEJ2735_check\n    g++ -std=c++11 -g -o TSP_OBU out/TSP_OBU.o out/gps.o out/wave.o -lboost_filesystem -lboost_system -lgps -lm -pthread $(LIBWAVE_PATH) $(LIBSAEJ2735_PATH)\n\n# compile TSP_OBU\nTSP_OBU.o: src/TSP_OBU.cc\n    g++ -std=c++11 -Wall -g -O2 -c -o out/TSP_OBU.o src/TSP_OBU.cc\n\n# compile gps\ngps.o: src/gps.cc\n    g++ -std=c++11 -Wall -g -O2 -c -o out/gps.o src/gps.cc\n\n# compile wave\nwave.o: src/wave.cc\n    g++ -std=c++11 -Wall -g -O2 -c -o out/wave.o src/wave.cc\n\n# check if 'lib_wave.a' exists\nLIBWAVE_check:\nifeq (,$(wildcard ../lib_wave.a))\n    ifeq (,$(wildcard $(LIBWAVE_PATH)))\n        $(error 'lib_wave.a' does not exist in $(LIBWAVE_PATH))\n    endif\nelse\n    LIBWAVE_PATH=../lib_wave.a\nendif\n\n# check if 'libsaej2735.a' exists\nLIBSAEJ2735_check:\nifeq (,$(wildcard ../libsaej2735.a))\n    ifeq (,$(wildcard $(LIBSAEJ2735_PATH)))\n        $(error 'libsaej2735.a' does not exist in $(LIBSAEJ2735_PATH))\n    endif\nelse\n    LIBSAEJ2735_PATH=../libsaej2735.a\nendif\n\n# clean\nclean:\n    rm -rf TSP_OBU\n    rm -rf out/TSP_OBU.o\n    rm -rf out/gps.o\n    rm -rf out/wave.o\n</code></pre>\n"}, {"tags": ["c++", "bits"], "comments": [{"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "edited": false, "score": 0, "creation_date": 1492021909, "post_id": 43377037, "comment_id": 73816263, "body": "Why do you want to combine the two lines in the if body?"}, {"owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "edited": false, "score": 0, "creation_date": 1492021943, "post_id": 43377037, "comment_id": 73816278, "body": "What about a ternary operator"}, {"owner": {"reputation": 43, "user_id": 7858207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1af9210697711a774bea0c1d1ca5ad66?s=128&d=identicon&r=PG&f=1", "display_name": "aleeN1", "link": "https://stackoverflow.com/users/7858207/aleen1"}, "reply_to_user": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "edited": false, "score": 0, "creation_date": 1492022009, "post_id": 43377037, "comment_id": 73816314, "body": "@jpo38 i want it to be as minimal as posible, when it comes to characters."}, {"owner": {"reputation": 43, "user_id": 7858207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1af9210697711a774bea0c1d1ca5ad66?s=128&d=identicon&r=PG&f=1", "display_name": "aleeN1", "link": "https://stackoverflow.com/users/7858207/aleen1"}, "reply_to_user": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "edited": false, "score": 0, "creation_date": 1492022118, "post_id": 43377037, "comment_id": 73816372, "body": "@chbchb55 i know and have used ternary operators, but i can&#39;t figure it out how to use it here, could you help me with the code?"}, {"owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "edited": false, "score": 0, "creation_date": 1492022145, "post_id": 43377037, "comment_id": 73816385, "body": "Chcek out my answer @aleeN1"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1492022261, "post_id": 43377037, "comment_id": 73816446, "body": "Are you allowed to mess with the bit otherwise? For example, can you set the bit to zero in the invalid case?"}, {"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "edited": false, "score": 1, "creation_date": 1492022447, "post_id": 43377037, "comment_id": 73816577, "body": "@aleeN1: ` i want it to be as minimal as possible` Let the compiler do that if needed"}, {"owner": {"reputation": 43, "user_id": 7858207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1af9210697711a774bea0c1d1ca5ad66?s=128&d=identicon&r=PG&f=1", "display_name": "aleeN1", "link": "https://stackoverflow.com/users/7858207/aleen1"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1492022612, "post_id": 43377037, "comment_id": 73816671, "body": "@MadPhysicist in the invalid case i do nothing to the &quot;lines&quot; variable, but i can make it 1 (it is already 1) so i can unite the 2 code lines into 1. hope you understand what i say."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "edited": false, "score": 0, "creation_date": 1492022615, "post_id": 43377037, "comment_id": 73816673, "body": "@jpo38. OP means in terms of character count. Think code golf."}, {"owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "edited": false, "score": 0, "creation_date": 1492022638, "post_id": 43377037, "comment_id": 73816690, "body": "As for the site/calculator, it is entirely unclear what you want, and <code>ex: 3 .. .. = -1.</code> is totally <i>not</i> an example of anything, but to cut a long story short, if <a href=\"https://www.wolframalpha.com/\" rel=\"nofollow noreferrer\">Wolfram|Alpha</a> does not do it, then it is unlikely that anyone else does it."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1492022654, "post_id": 43377037, "comment_id": 73816696, "body": "@aleeN1. I am assuming this is part of a larger code. Can I toggle the bit instead of making it 1?"}, {"owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "edited": false, "score": 0, "creation_date": 1492022700, "post_id": 43377037, "comment_id": 73816729, "body": "If you want to reduce the number of lines of code, the best and easiest way is to delete your linefeeds, thus putting all your statements in one line."}, {"owner": {"reputation": 43, "user_id": 7858207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1af9210697711a774bea0c1d1ca5ad66?s=128&d=identicon&r=PG&f=1", "display_name": "aleeN1", "link": "https://stackoverflow.com/users/7858207/aleen1"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1492022823, "post_id": 43377037, "comment_id": 73816811, "body": "@MadPhysicist it is a very short code, actually those lines are the bigger ones, that&#39;s why i want to shorten them. No, you can&#39;t toggle it, because if it&#39;s 1 it remains 1, for further test cases. If the ith bit is 1, it means the ith stick was used. So i can&#39;t use that stick for the remaining of the program."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1492022835, "post_id": 43377037, "comment_id": 73816815, "body": "the less you type now the harder it will be for you in one month to understand the code. Too much code isnt good but there is a limit where reducing it more mainly hurts readability. Imho you are already far beyond that limit when you have 4 magic numbers in a single line."}, {"owner": {"reputation": 43, "user_id": 7858207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1af9210697711a774bea0c1d1ca5ad66?s=128&d=identicon&r=PG&f=1", "display_name": "aleeN1", "link": "https://stackoverflow.com/users/7858207/aleen1"}, "reply_to_user": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "edited": false, "score": 0, "creation_date": 1492022901, "post_id": 43377037, "comment_id": 73816846, "body": "@MikeNakis spaces/new lines/tabs are not included in the number of characters. it&#39;s just about digits, letters and other signs used in c++."}, {"owner": {"reputation": 43, "user_id": 7858207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1af9210697711a774bea0c1d1ca5ad66?s=128&d=identicon&r=PG&f=1", "display_name": "aleeN1", "link": "https://stackoverflow.com/users/7858207/aleen1"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1492022975, "post_id": 43377037, "comment_id": 73816896, "body": "@tobi303 i know that. this is a contest where the one who makes the program working with the least amount of characters wins. it&#39;s not for production or anything. it&#39;s kinda just 4fun."}, {"owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "edited": false, "score": 0, "creation_date": 1492023187, "post_id": 43377037, "comment_id": 73817026, "body": "What are <code>lines</code>, <code>d</code>, <code>l</code>, and <code>c</code>&#39;s definitions"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1492023320, "post_id": 43377037, "comment_id": 73817096, "body": "@aleeN1. You may want to check out <a href=\"https://codegolf.stackexchange.com/\">codegolf.stackexchange.com</a>"}], "answers": [{"comments": [{"owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "edited": false, "score": 0, "creation_date": 1492022718, "post_id": 43377331, "comment_id": 73816736, "body": "Isn&#39;t this undefined behavior?"}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "reply_to_user": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "edited": false, "score": 1, "creation_date": 1492022757, "post_id": 43377331, "comment_id": 73816758, "body": "@MikeNakis: why should it ?"}, {"owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "edited": false, "score": 1, "creation_date": 1492022778, "post_id": 43377331, "comment_id": 73816772, "body": "because you are both modifying and reading a variable in the same statement."}, {"owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "edited": false, "score": 0, "creation_date": 1492022801, "post_id": 43377331, "comment_id": 73816790, "body": "I am not saying that I know for sure that this is undefined behavior, but I have the feeling that it is."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1492022871, "post_id": 43377331, "comment_id": 73816835, "body": "I think this is pretty well defined, but won&#39;t work because evaluation order is left to right."}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1492022916, "post_id": 43377331, "comment_id": 73816857, "body": "@MadPhysicist: absolutely, my bad."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1492022927, "post_id": 43377331, "comment_id": 73816862, "body": "Basically, lines will always be equal to itself after the assignment. I used <code>^=</code> instead of <code>|=</code> in my answer to get around this."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1492022961, "post_id": 43377331, "comment_id": 73816884, "body": "it is indeed UB."}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1492023032, "post_id": 43377331, "comment_id": 73816925, "body": "@MadPhysicist: <code>^=</code> won&#39;t have the same effect, as it will clear the bit when it was set, whereas the original code leaves it unchanged."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1492023092, "post_id": 43377331, "comment_id": 73816965, "body": "Right. OP just clarified that, so I deleted my answer."}, {"owner": {"reputation": 43, "user_id": 7858207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1af9210697711a774bea0c1d1ca5ad66?s=128&d=identicon&r=PG&f=1", "display_name": "aleeN1", "link": "https://stackoverflow.com/users/7858207/aleen1"}, "edited": false, "score": 0, "creation_date": 1492023301, "post_id": 43377331, "comment_id": 73817085, "body": "It&#39;s perfect. I love you guys ;* ."}, {"owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "reply_to_user": {"reputation": 43, "user_id": 7858207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1af9210697711a774bea0c1d1ca5ad66?s=128&d=identicon&r=PG&f=1", "display_name": "aleeN1", "link": "https://stackoverflow.com/users/7858207/aleen1"}, "edited": false, "score": 1, "creation_date": 1492023419, "post_id": 43377331, "comment_id": 73817150, "body": "@aleeN1 beware: &quot;undefined behavior&quot; means that it may work in a certain way with your compiler, but with a different compiler, or even with a different version of the same compiler, you might get an entirely different thing, like a bowl of petunias."}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "reply_to_user": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "edited": false, "score": 0, "creation_date": 1492023551, "post_id": 43377331, "comment_id": 73817219, "body": "@MikeNakis: in the real world, the only alternative is performing the assignment before the comparison, which will always yield a true result. The standard details the evaluation rules <a href=\"http://en.cppreference.com/w/cpp/language/eval_order\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/eval_order</a>, which I am totally desperate to successfully check here."}], "tags": [], "owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "is_accepted": true, "score": 1, "last_activity_date": 1492022929, "last_edit_date": 1492022929, "creation_date": 1492022696, "answer_id": 43377331, "question_id": 43377037, "link": "https://stackoverflow.com/questions/43377037/bits-tricks-and-magic/43377331#43377331", "title": "Bits tricks and magic", "body": "<pre><code>if (lines == (lines|= mask)) cout &lt;&lt; \"Invalid\";\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 7858207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1af9210697711a774bea0c1d1ca5ad66?s=128&d=identicon&r=PG&f=1", "display_name": "aleeN1", "link": "https://stackoverflow.com/users/7858207/aleen1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 43377331, "answer_count": 1, "score": 1, "last_activity_date": 1492023332, "creation_date": 1492021694, "last_edit_date": 1492022420, "question_id": 43377037, "link": "https://stackoverflow.com/questions/43377037/bits-tricks-and-magic", "title": "Bits tricks and magic", "body": "<p>I'm writing a program in C++, and it has to be as minimal as possible. I need some help with an if/else statement. This is the code: </p>\n\n<pre><code>if (lines &amp; 1 &lt;&lt; ((d &amp; 1) * 30 + 5 * l + c)) {\n    cout &lt;&lt; \"Invalid\";\n} else {\n    lines |= 1 &lt;&lt; ((d &amp; 1) * 30 + 5 * l + c);\n}\n</code></pre>\n\n<p>What i'm doing here is: verifing if a bit is set to 1 and I cout something, and if it's not, i'll set it to 1. Is there any way i can combine the 2 lines where i verify and where i set bit to 1 in the if body?</p>\n\n<pre><code>lines &amp; 1 &lt;&lt; ((d &amp; 1) * 30 + 5 * l + c)\nlines |= 1 &lt;&lt; ((d &amp; 1) * 30 + 5 * l + c)\n</code></pre>\n\n<p>I'm imagining something like:</p>\n\n<pre><code>if (lines |= .... )\n</code></pre>\n\n<p>And what it should do is: verify if bit is 1 and entering the if body, and if it's not(or it is already) make it 1.</p>\n\n<p>Sorry for my poor english and this stupid request, but i can't figure out a way to do it and it drives me crazy. </p>\n\n<p>P.S: Is there any site/calculator that can give me an boolean formula when i enter an equasion? ex: 3 .. .. = -1. and i need the operand and operator here.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 5, "creation_date": 1492020607, "post_id": 43376720, "comment_id": 73815580, "body": "What does your debugger show you?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1492020684, "post_id": 43376720, "comment_id": 73815624, "body": "Print out <code>numv2</code> and make sure it is what you expect."}, {"owner": {"reputation": 2165, "user_id": 2113881, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/SvllB.png?s=128&g=1", "display_name": "Evan Carslake", "link": "https://stackoverflow.com/users/2113881/evan-carslake"}, "edited": false, "score": 1, "creation_date": 1492020785, "post_id": 43376720, "comment_id": 73815675, "body": "Why so many numbers in variable names?"}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 1, "creation_date": 1492021175, "post_id": 43376720, "comment_id": 73815879, "body": "This looks more like C than C++. We&#39;d use iostreams and string in C++, unless we were purposely coding C for some performance reason in a particular spot. You&#39;d probably have a much easier time with your logic using iostreams and string."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1492021456, "post_id": 43376720, "comment_id": 73816027, "body": "You are already printing the value with <code>printf(&quot;%d&quot;, num);</code> what is it printing???"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 2165, "user_id": 2113881, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/SvllB.png?s=128&g=1", "display_name": "Evan Carslake", "link": "https://stackoverflow.com/users/2113881/evan-carslake"}, "edited": false, "score": 0, "creation_date": 1492023388, "post_id": 43376720, "comment_id": 73817129, "body": "@EvanCarslake this is a counting program, is it not? The way I see it, OP has ensured they have 4 digits come hell or high water: <code>d1</code>, <code>d2</code>, <code>d3</code>, and <code>d4</code>. Some of them may not ave been provided by the user, though. Come to think of it, the return value of <code>scanf</code> will at least tell them how many characters were input. <code>isdigit</code> would handle the rest."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1492024869, "post_id": 43376720, "comment_id": 73817919, "body": "<a href=\"http://stackoverflow.com/q/628761/669576\">Convert a character digit to the corresponding integer in C</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1492025472, "post_id": 43376720, "comment_id": 73818242, "body": "Prefer to use <code>fscanf</code> rather than <code>scanf</code>.  Also, check the return value to see how many digits were input."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1492025631, "post_id": 43376720, "comment_id": 73818321, "body": "You could simplify your program by using <code>std::string</code> and <code>std::getline</code>.  Use <code>std::string::length</code> as a first check on the number of digits.  Then use <code>isdigit</code> on each slot on the string to verify that the slot contains a digit."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1492025797, "post_id": 43376720, "comment_id": 73818398, "body": "You can simplify your program by reusing variables.  For example, you could use <code>num</code> instead of creating <code>numv2</code>.  You don&#39;t need to duplicate variables for each new purpose.  Reduce, reuse, recycle."}], "answers": [{"comments": [{"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 1, "creation_date": 1492027055, "post_id": 43378527, "comment_id": 73819167, "body": "<code>int d1v2 = d1 - &quot;0&quot;;</code> should use single quotes."}, {"owner": {"reputation": 128, "user_id": 6083299, "user_type": "registered", "profile_image": "https://graph.facebook.com/1124496990935217/picture?type=large", "display_name": "Krzysiek Przekwas", "link": "https://stackoverflow.com/users/6083299/krzysiek-przekwas"}, "reply_to_user": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1492027387, "post_id": 43378527, "comment_id": 73819339, "body": "@Steve you&#39;re right, sorry for that!"}, {"owner": {"reputation": 13, "user_id": 7428275, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hB0mPbAuXvE/AAAAAAAAAAI/AAAAAAAAAHY/tKbp1s7yLD8/photo.jpg?sz=128", "display_name": "user7428275", "link": "https://stackoverflow.com/users/7428275/user7428275"}, "edited": false, "score": 0, "creation_date": 1492100041, "post_id": 43378527, "comment_id": 73855152, "body": "Thank you for helping me out. I have one more question. Would d4&#39;s value be 0?"}, {"owner": {"reputation": 128, "user_id": 6083299, "user_type": "registered", "profile_image": "https://graph.facebook.com/1124496990935217/picture?type=large", "display_name": "Krzysiek Przekwas", "link": "https://stackoverflow.com/users/6083299/krzysiek-przekwas"}, "edited": false, "score": 0, "creation_date": 1492189042, "post_id": 43378527, "comment_id": 73890447, "body": "Unfortunately, it&#39;s not that easy. When you are entering 3 digit number and then hit enter to invoke scanf, what you get is d1,d2 and d3 as numbers but d4 = &#39;\\n&#39; - what as you know form using this in printf is representation of newline. This may be quite easy to overcome but lets look what will happen if you enter 2 digit number.  d1 and d2 are numbers and d3 will be newline sign, but what about d4? Actually scanf won&#39;t have enough characters and will wait until you provide them (and hit enter). At this point you should realise that it&#39;s not best way to count digits. Maybe scanf whole int? :-)"}, {"owner": {"reputation": 13, "user_id": 7428275, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hB0mPbAuXvE/AAAAAAAAAAI/AAAAAAAAAHY/tKbp1s7yLD8/photo.jpg?sz=128", "display_name": "user7428275", "link": "https://stackoverflow.com/users/7428275/user7428275"}, "edited": false, "score": 0, "creation_date": 1492438349, "post_id": 43378527, "comment_id": 73961599, "body": "Thank you, that fixed everything!"}], "tags": [], "owner": {"reputation": 128, "user_id": 6083299, "user_type": "registered", "profile_image": "https://graph.facebook.com/1124496990935217/picture?type=large", "display_name": "Krzysiek Przekwas", "link": "https://stackoverflow.com/users/6083299/krzysiek-przekwas"}, "is_accepted": true, "score": 1, "last_activity_date": 1492027304, "last_edit_date": 1492027304, "creation_date": 1492026907, "answer_id": 43378527, "question_id": 43376720, "link": "https://stackoverflow.com/questions/43376720/if-statement-being-ignored-c/43378527#43378527", "title": "If statement being ignored (C++)", "body": "<p>Im not sure if you are aware what is happening in this fragment of code:</p>\n\n<pre><code>int d1v2 = d1;\nint d2v2 = d2;\nint d3v2 = d3;\nint d4v2 = d4;\nprintf(\"%c%c%c%c\\n\", d1v2, d2v2, d3v2, d4v2);\nint num = (d1v2 * 1000) + (d2v2 * 100) + (d3v2 * 10) + d4v2;\nprintf(\"%d\", num);\nint numv2 = num;\n</code></pre>\n\n<p>d1, d2, d3 and d4 are char's and when you cast them to int's what you get is ASCII value of given character -> <a href=\"https://en.wikipedia.org/wiki/ASCII\" rel=\"nofollow noreferrer\">wiki</a>.\nTo make this work you can try for example this:</p>\n\n<pre><code>int d1v2 = d1 - '0';\n</code></pre>\n\n<p>Note that there are many other ways to get specific number value.\nThen in your printf change displayed type from char (%c) to int (%i).\nAt this point your conversion from string to int should work, but with one little problem.</p>\n\n<p>You should think a bit more what is happening when somebody enters for example 3 numbers only. Are you aware what is stored in d4 variable after scanf? \nBut this my friend i prefer to leave you as next challange :-)</p>\n"}], "owner": {"reputation": 13, "user_id": 7428275, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hB0mPbAuXvE/AAAAAAAAAAI/AAAAAAAAAHY/tKbp1s7yLD8/photo.jpg?sz=128", "display_name": "user7428275", "link": "https://stackoverflow.com/users/7428275/user7428275"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "closed_date": 1492028027, "accepted_answer_id": 43378527, "answer_count": 1, "score": -1, "last_activity_date": 1492446440, "creation_date": 1492020531, "last_edit_date": 1492446440, "question_id": 43376720, "link": "https://stackoverflow.com/questions/43376720/if-statement-being-ignored-c", "closed_reason": "Not suitable for this site", "title": "If statement being ignored (C++)", "body": "<p>I wrote this code to see how many digits are in a number. I'm assuming that the user uses a number with no more than four digits. For some reason, the code is skipping the if statement. I've checked other questions related to this, but I don't have the same errors. Can you help me?\nHere is the code that I wrote:</p>\n\n<pre><code>#include \"stdafx.h\"\n\nint main()\n{\n    char d1;\n    char d2;\n    char d3;\n    char d4;\n    printf(\"Please enter a number with four or less digits:\");\n    scanf(\"%c%c%c%c\", &amp;d1, &amp;d2, &amp;d3, &amp;d4);\n    printf(\"%c%c%c%c\\n\", d1, d2, d3, d4);\n    int d1v2 = d1;\n    int d2v2 = d2;\n    int d3v2 = d3;\n    int d4v2 = d4;\n    printf(\"%c%c%c%c\\n\", d1v2, d2v2, d3v2, d4v2);\n    int num = (d1v2 * 1000) + (d2v2 * 100) + (d3v2 * 10) + d4v2;\n    printf(\"%d\", num);\n    int numv2 = num;\n\n    if (numv2 &lt; 10) {\n        printf(\"Your number has 1 digit\\n\");\n    }\n    else if (numv2 &gt;= 10 &amp;&amp; numv2 &lt; 100) {\n        printf(\"Your number has 2 digits\\n\");\n    }\n    else if (numv2 &gt;= 100 &amp;&amp; numv2 &lt; 1000) {\n        printf(\"Your number has 3 digits\\n\");\n    }\n    else if (numv2 &gt;= 1000 &amp;&amp; numv2 &lt; 10000) {\n        printf(\"Your number has 4 digits\\n\");\n    }\n} \n</code></pre>\n"}, {"tags": ["c++", "omnet++"], "comments": [{"owner": {"reputation": 881, "user_id": 7468409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab57b2e3e39875d76d335efce70e1129?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Kirsche", "link": "https://stackoverflow.com/users/7468409/michael-kirsche"}, "edited": false, "score": 0, "creation_date": 1492071031, "post_id": 43376551, "comment_id": 73835016, "body": "This code wouldn&#39;t make any sense. Since when does your object sM1 provide the scheduleAt() method? You can only run public methods of said object...  So (for example) send a message from sM2 to sM1 which sM1 then evaluates and afterwards sM1 schedules the message. Or make a public method for sM1/2 that does this message scheduling that you like and call it."}, {"owner": {"reputation": 5, "user_id": 7066539, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-0U5VgggeLiE/AAAAAAAAAAI/AAAAAAAAABI/hR9mgr9aD0k/photo.jpg?sz=128", "display_name": "Hafsa Sedrati", "link": "https://stackoverflow.com/users/7066539/hafsa-sedrati"}, "reply_to_user": {"reputation": 881, "user_id": 7468409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab57b2e3e39875d76d335efce70e1129?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Kirsche", "link": "https://stackoverflow.com/users/7468409/michael-kirsche"}, "edited": false, "score": 0, "creation_date": 1492101759, "post_id": 43376551, "comment_id": 73856076, "body": "I&#39;ll try the method of public function since that i don&#39;t want sM2 send a message to sM1"}], "owner": {"reputation": 5, "user_id": 7066539, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-0U5VgggeLiE/AAAAAAAAAAI/AAAAAAAAABI/hR9mgr9aD0k/photo.jpg?sz=128", "display_name": "Hafsa Sedrati", "link": "https://stackoverflow.com/users/7066539/hafsa-sedrati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1492020004, "creation_date": 1492020004, "question_id": 43376551, "link": "https://stackoverflow.com/questions/43376551/how-to-make-module-send-a-message-from-another-module-omnet", "title": "How to make module send a message from another module OMNet++", "body": "<p>For example I have 2 simple modules sM1 and sM2, and now I want to sM2 make sM1 schedule a message. I tried with that code but it doesn't work</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>// this is the sM2\r\ncSimpleModule *sM1  = check_and_cast&lt;cSimpleModule *&gt; (getModuleByPath(\"network.module.sM1\"));\r\ncMessage *Return = new cMessage(\"BAM\");\r\nsM1-&gt;scheduleAt(simTime(), Return);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>During the simulation OMNet++ tell me about Enter_Method or something like that. How to fix that please?. </p>\n"}, {"tags": ["c++", "drawing", "sfml"], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 5158790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0f05785f41cb20ddde4645a243f6891?s=128&d=identicon&r=PG", "display_name": "Martin", "link": "https://stackoverflow.com/users/5158790/martin"}, "is_accepted": true, "score": 1, "last_activity_date": 1492067276, "creation_date": 1492067276, "answer_id": 43385699, "question_id": 43376541, "link": "https://stackoverflow.com/questions/43376541/segmentation-fault-when-drawing/43385699#43385699", "title": "Segmentation fault when drawing", "body": "<p>You are trying to acces an element on the vector that do not exist.</p>\n\n<p>change this</p>\n\n<pre><code>window.draw(tiles[1]);\n</code></pre>\n\n<p>to this</p>\n\n<pre><code>window.draw(tiles[0]);\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 4724252, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-8sakZ5fdsg8/AAAAAAAAAAI/AAAAAAAAAXU/wOGYAgb8MBk/photo.jpg?sz=128", "display_name": "nelsoncookie 23", "link": "https://stackoverflow.com/users/4724252/nelsoncookie-23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 296, "favorite_count": 0, "accepted_answer_id": 43385699, "answer_count": 1, "score": 1, "last_activity_date": 1492089001, "creation_date": 1492019970, "last_edit_date": 1492089001, "question_id": 43376541, "link": "https://stackoverflow.com/questions/43376541/segmentation-fault-when-drawing", "title": "Segmentation fault when drawing", "body": "<p>My window closes when I draw a sprite.</p>\n\n<p>It's definitely the drawing part of it because when I keep it out of\nmy code, it works fine, except it doesn't draw my sprite of course.</p>\n\n<p>Also I get this error when running: <code>Segmentation fault (core dumped)</code></p>\n\n<p>I don't know what that means :/ .</p>\n\n<p>And here is my code:</p>\n\n<pre><code>#include &lt;SFML/Graphics.hpp&gt;\n#include &lt;SFML/System.hpp&gt;\n#include &lt;SFML/Audio.hpp&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\n//create vars\nsf::Color bgColour(20, 175, 215);\nvector&lt;sf::Sprite&gt; tiles;\n\nvoid CreateTile(string Texture, int x, int y)\n{\n    sf::Vector2f Pos(x, y);\n\n    sf::Texture Ftexture;\n    Ftexture.loadFromFile(Texture);\n    sf::Sprite Tile;\n    Tile.setTexture(Ftexture);\n    Tile.setPosition(Pos);\n\n    tiles.push_back(Tile);\n}\n\nint main()\n{\n    //create window\n    sf::RenderWindow window(sf::VideoMode(800, 600), \"-\\\\\\\\-(Game)-//-\");\n\n    CreateTile(\"Recources/grass.png\", 40, 40);\n\n    //main loop\n    while (window.isOpen()) {\n\n        sf::Event event;\n\n        while (window.pollEvent(event)) {               \n            if (event.type == sf::Event::Closed) {\n                window.close();\n            }            \n        }\n\n        window.clear(bgColour);\n        window.draw(tiles[1]);\n        window.display();\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1492019661, "post_id": 43376386, "comment_id": 73815057, "body": "You need to install the clang development package(s) to get the various tooling headers."}, {"owner": {"reputation": 1568, "user_id": 5526072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588896494e8fd23bb0092474a5cf958d?s=128&d=identicon&r=PG", "display_name": "jwimberley", "link": "https://stackoverflow.com/users/5526072/jwimberley"}, "edited": false, "score": 0, "creation_date": 1492020396, "post_id": 43376386, "comment_id": 73815453, "body": "In particular, installing llvm through homebrew might be necessary (cannot confirm)"}, {"owner": {"reputation": 35121, "user_id": 577455, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2f5b02182d3fa5ca4afeb39c32f09953?s=128&d=identicon&r=PG", "display_name": "Leahcim", "link": "https://stackoverflow.com/users/577455/leahcim"}, "reply_to_user": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1492374668, "post_id": 43376386, "comment_id": 73940481, "body": "@G.M. ok, thank you.   Is it possible to install those packages to work with the clang that comes installed with the Mac O.S. system (or do they need to be installed at the same time as clang?"}, {"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 1, "creation_date": 1492440094, "post_id": 43376386, "comment_id": 73962602, "body": "Have you looked if <code>&#47;usr&#47;include&#47;clang</code> is in your directory?"}, {"owner": {"reputation": 35121, "user_id": 577455, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2f5b02182d3fa5ca4afeb39c32f09953?s=128&d=identicon&r=PG", "display_name": "Leahcim", "link": "https://stackoverflow.com/users/577455/leahcim"}, "reply_to_user": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1492603203, "post_id": 43376386, "comment_id": 74044448, "body": "@Amadeus which directory are you referring to? not sure what you mean when you ask if it is &quot;in your directory&quot;?"}, {"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1492611405, "post_id": 43376386, "comment_id": 74050874, "body": "@Leahcim Asking in another way, do you know where (which directory) <code>clang&#47;Driver&#47;Options.h</code> is installed in your system? If you do not know, you can use <code>find</code> to try to locate it"}, {"owner": {"reputation": 35121, "user_id": 577455, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2f5b02182d3fa5ca4afeb39c32f09953?s=128&d=identicon&r=PG", "display_name": "Leahcim", "link": "https://stackoverflow.com/users/577455/leahcim"}, "reply_to_user": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1492782876, "post_id": 43376386, "comment_id": 74141084, "body": "@Amadeus yes, I found it <code>clang&#47;Driver&#47;Options.h</code> (I did a test install of LLVM in the cloud and found it, but it&#39;s not installed by default on my Mac)"}], "answers": [{"tags": [], "owner": {"reputation": 149, "user_id": 887620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feb48b35eb57194390d00558ace48425?s=128&d=identicon&r=PG", "display_name": "nurmurat", "link": "https://stackoverflow.com/users/887620/nurmurat"}, "is_accepted": false, "score": 3, "last_activity_date": 1492435430, "creation_date": 1492435430, "answer_id": 43452381, "question_id": 43376386, "link": "https://stackoverflow.com/questions/43376386/how-to-install-clang-header-files/43452381#43452381", "title": "How to install clang header files?", "body": "<p>When you use <strong>double quotes</strong> for including the libraries it will search the current directory which your c/cpp file or application resides in. Try with <strong>&lt;</strong> and <strong>></strong>  or compile with the <strong>-I</strong> option</p>\n"}, {"comments": [{"owner": {"reputation": 2688, "user_id": 990142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2c17dc83972d868e5a4a065549967ee2?s=128&d=identicon&r=PG", "display_name": "rwols", "link": "https://stackoverflow.com/users/990142/rwols"}, "edited": false, "score": 0, "creation_date": 1492945528, "post_id": 43561777, "comment_id": 74190296, "body": "Even if you do get the headers, those clang headers depend on static libs not found in a default installation of macOS. So, while you do get clang installed twice by building the LLVM+clang source tree (although I suppose the binary in /usr/local/bin gets overwritten with the newly built clang binary), you also get a bunch of <code>.a</code> files that you need."}], "tags": [], "owner": {"reputation": 35121, "user_id": 577455, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2f5b02182d3fa5ca4afeb39c32f09953?s=128&d=identicon&r=PG", "display_name": "Leahcim", "link": "https://stackoverflow.com/users/577455/leahcim"}, "is_accepted": true, "score": 2, "last_activity_date": 1492879160, "creation_date": 1492879160, "answer_id": 43561777, "question_id": 43376386, "link": "https://stackoverflow.com/questions/43376386/how-to-install-clang-header-files/43561777#43561777", "title": "How to install clang header files?", "body": "<p>The question asked if it was necessary and possible to install the header files on MacOS which comes with clang installed already.  The desired header files weren't installed and in order to install them it is possible to clone the repo and build llvm and clang (as described in the llvm getting started guide <a href=\"http://llvm.org/docs/GettingStarted.html\" rel=\"nofollow noreferrer\">http://llvm.org/docs/GettingStarted.html</a>) , so that it's in effect installed twice on the system.</p>\n"}], "owner": {"reputation": 35121, "user_id": 577455, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2f5b02182d3fa5ca4afeb39c32f09953?s=128&d=identicon&r=PG", "display_name": "Leahcim", "link": "https://stackoverflow.com/users/577455/leahcim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3383, "favorite_count": 0, "accepted_answer_id": 43561777, "answer_count": 2, "score": 9, "last_activity_date": 1492945184, "creation_date": 1492019481, "last_edit_date": 1492945184, "question_id": 43376386, "link": "https://stackoverflow.com/questions/43376386/how-to-install-clang-header-files", "title": "How to install clang header files?", "body": "<p>I have clang installed on my MacOS (in /usr/bin/clang ) which I think comes installed by default on Mac, however, when I try to include clang header files in a script, it says they are not found</p>\n\n<pre><code>Example.cpp:1:10: fatal error: 'clang/Driver/Options.h' file not found\n</code></pre>\n\n<p>Question: is it necessary (and possible, if so, how) to install the header files when clang is already installed and built on the MacOS system (or does clang itself need to be reinstalled at the same time as all the desired development tooling packages and their header files are installed)?</p>\n\n<pre><code>#include \"clang/Driver/Options.h\"\n#include \"clang/AST/AST.h\"\n#include \"clang/AST/ASTContext.h\"\n#include \"clang/AST/ASTConsumer.h\"\n#include \"clang/AST/RecursiveASTVisitor.h\"\n#include \"clang/Frontend/ASTConsumers.h\"\n#include \"clang/Frontend/FrontendActions.h\"\n#include \"clang/Frontend/CompilerInstance.h\"\n#include \"clang/Tooling/CommonOptionsParser.h\"\n#include \"clang/Tooling/Tooling.h\"\n#include \"clang/Rewrite/Core/Rewriter.h\"\n</code></pre>\n"}, {"tags": ["c++", "windows", "winapi", "cpprest-sdk"], "comments": [{"owner": {"reputation": 2104, "user_id": 949044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c84ec01bed6dea2f97aad7cc5d4e495c?s=128&d=identicon&r=PG", "display_name": "Lyth", "link": "https://stackoverflow.com/users/949044/lyth"}, "edited": false, "score": 0, "creation_date": 1501830704, "post_id": 43376322, "comment_id": 77961475, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/38752888/what-is-causing-intermittent-sec-e-buffer-too-small-error-coming-from-winhttpsen\">What is causing intermittent SEC_E_BUFFER_TOO_SMALL error coming from WinHttpSendRequest?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 6747058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d45acc2a25e531fe3091d6b8132ef7d?s=128&d=identicon&r=PG&f=1", "display_name": "Christoph Albert", "link": "https://stackoverflow.com/users/6747058/christoph-albert"}, "is_accepted": false, "score": 2, "last_activity_date": 1501830369, "creation_date": 1501830369, "answer_id": 45500254, "question_id": 43376322, "link": "https://stackoverflow.com/questions/43376322/winhttpsendrequest-2148074273-insufficient-cache/45500254#45500254", "title": "WinHttpSendRequest: 2148074273 insufficient cache", "body": "<p>Does your Web Service use TLS with Diffie-Hellman key exchange? If yes, you are probably seeing a bug in SChannel, which is the SSL implementation of Windows, see <a href=\"https://github.com/dotnet/corefx/issues/7812\" rel=\"nofollow noreferrer\">here for a confirmation</a>. Unfortunately, the only available fix is an update of the Windows version on which your client is running to a recent build of Windows 10.</p>\n"}], "owner": {"reputation": 21, "user_id": 6441274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb842b9cd10dfa9f0f999c7c862242d5?s=128&d=identicon&r=PG&f=1", "display_name": "LavaCharizard", "link": "https://stackoverflow.com/users/6441274/lavacharizard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 534, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1501830369, "creation_date": 1492019234, "last_edit_date": 1492020474, "question_id": 43376322, "link": "https://stackoverflow.com/questions/43376322/winhttpsendrequest-2148074273-insufficient-cache", "title": "WinHttpSendRequest: 2148074273 insufficient cache", "body": "<p>I am building a Rest client with cpprest-sdk to communicate with a web service. The problem is that every once in a while, after sending multiple successful requests (around 50), I get the exception: </p>\n\n<blockquote>\n  <p>WinHttpSendRequest: 2148074273 insufficient cache in function</p>\n</blockquote>\n\n<p>Or sometimes:</p>\n\n<blockquote>\n  <p>ERROR_WINHTTP_SECURE_FAILURE (12175)</p>\n</blockquote>\n\n<p>I tried to look for cache options in cpprest-sdk but did not find anything. Since the exceptions happens inside cpprest-sdk when I call <code>.wait()</code> on my task I am not sure if I can use the WINHTTP_STATUS_CALLBACK to check for more details on this error. How can I investigate deeper to find the cause of this error? </p>\n\n<p>Here is my Rest request:</p>\n\n<pre><code>void MyRestClient::PostKeys(const std::string &amp; sKek, const std::string &amp; sKid, const std::string &amp; sCustomerAuthenticator) {\n    uri_builder oBuilder(U(\"/keys?customerAuthenticator=\") + to_string_t(sCustomerAuthenticator));\n    oBuilder.append_query(KEK, to_string_t(sKek));\n    json::value oBody;\n    oBody[KID] = json::value::string(to_string_t(sKid));\n\n    web::http::http_request oRequest;\n    oRequest.set_method(methods::POST);\n    oRequest.set_request_uri(oBuilder.to_uri());\n    oRequest.set_body(oBody);\n\n    m_oCurrentTask = oClient.request(oRequest).then([this](http_response oResponse) {\n        OnPostResponse(oResponse);\n    });\n }\n</code></pre>\n\n<p>According to <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa383928(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/aa383928(v=vs.85).aspx</a> (4th bullet), Post requests should not be cached so I don't understand why I am getting the first exception. I also tried to disable Https caching as the 6th bullet in the link suggest, but that did not change anything. </p>\n\n<p>Did anyone experienced something similar or have any insight as to what may be happening? Or is this a normal behavior and should I just retry my request when these exceptions happens?</p>\n"}, {"tags": ["c++", "xaml", "canvas", "uwp", "c++-cx"], "comments": [{"owner": {"reputation": 3651, "user_id": 383779, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/363c7fb07b9e121acdb8c40115b94e34?s=128&d=identicon&r=PG", "display_name": "sergiol", "link": "https://stackoverflow.com/users/383779/sergiol"}, "edited": false, "score": 1, "creation_date": 1492020402, "post_id": 43376290, "comment_id": 73815458, "body": "Please make an effort to make clearer what you are asking. At least paste any code containing the things you had already tried. I am in doubt about what technology you are making the question about: is it Visual C++|MFC; or is it WPF|XAML|C#; or is it Managed-C++|C++/CLI?"}, {"owner": {"reputation": 5795, "user_id": 3253896, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fa6d2f73d0c32ee94e11661d94857fc8?s=128&d=identicon&r=PG", "display_name": "\u0428\u0430\u0445", "link": "https://stackoverflow.com/users/3253896/%d0%a8%d0%b0%d1%85"}, "reply_to_user": {"reputation": 3651, "user_id": 383779, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/363c7fb07b9e121acdb8c40115b94e34?s=128&d=identicon&r=PG", "display_name": "sergiol", "link": "https://stackoverflow.com/users/383779/sergiol"}, "edited": false, "score": 0, "creation_date": 1492020810, "post_id": 43376290, "comment_id": 73815686, "body": "I updated my post to make it clearer."}, {"owner": {"reputation": 3651, "user_id": 383779, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/363c7fb07b9e121acdb8c40115b94e34?s=128&d=identicon&r=PG", "display_name": "sergiol", "link": "https://stackoverflow.com/users/383779/sergiol"}, "edited": false, "score": 0, "creation_date": 1492036656, "post_id": 43376290, "comment_id": 73823567, "body": "Adding an image doesn&#39;t clarify more the question. Did you put any code with any code you actually tried? <b>NO</b>. Are people willing to help you having any idea what technology you want to use to solve your problem? <b>NO</b>."}, {"owner": {"reputation": 5795, "user_id": 3253896, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fa6d2f73d0c32ee94e11661d94857fc8?s=128&d=identicon&r=PG", "display_name": "\u0428\u0430\u0445", "link": "https://stackoverflow.com/users/3253896/%d0%a8%d0%b0%d1%85"}, "reply_to_user": {"reputation": 3651, "user_id": 383779, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/363c7fb07b9e121acdb8c40115b94e34?s=128&d=identicon&r=PG", "display_name": "sergiol", "link": "https://stackoverflow.com/users/383779/sergiol"}, "edited": false, "score": 0, "creation_date": 1492038645, "post_id": 43376290, "comment_id": 73824147, "body": "How can I post a code? I don&#39;t know any solution. Although, I found Win2D library now and as I understood it&#39;s a single way. But for me it&#39;s strange, it&#39;s the first platform where I can&#39;t draw radial or canonical gradients"}], "answers": [{"tags": [], "owner": {"reputation": 31339, "user_id": 41942, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9f4153be2cf81e0b6656e2761898ecfa?s=128&d=identicon&r=PG", "display_name": "Filip Skakun", "link": "https://stackoverflow.com/users/41942/filip-skakun"}, "is_accepted": false, "score": 1, "last_activity_date": 1492031788, "creation_date": 1492031788, "answer_id": 43379781, "question_id": 43376290, "link": "https://stackoverflow.com/questions/43376290/how-to-draw-a-circle-with-a-radial-gradient-on-the-canvas/43379781#43379781", "title": "How to draw a circle with a radial gradient on the canvas?", "body": "<p>You can check the <a href=\"https://github.com/xyzzer/WinRTXamlToolkit/blob/master/WinRTXamlToolkit/Imaging/WriteableBitmapColorPickerExtensions.cs\" rel=\"nofollow noreferrer\"><code>RenderColorPickerHueRing()</code></a> method for a sample of how you could do it on a CPU in a <code>WriteableBitmap</code>. It's not super fast (at least in the C# version), but at least it saves you from packaging another image with your app or from using DirectX, which is a bit more tricky to get set up correctly and stabilize.</p>\n"}], "owner": {"reputation": 5795, "user_id": 3253896, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fa6d2f73d0c32ee94e11661d94857fc8?s=128&d=identicon&r=PG", "display_name": "\u0428\u0430\u0445", "link": "https://stackoverflow.com/users/3253896/%d0%a8%d0%b0%d1%85"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1021, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492031788, "creation_date": 1492019093, "last_edit_date": 1492021334, "question_id": 43376290, "link": "https://stackoverflow.com/questions/43376290/how-to-draw-a-circle-with-a-radial-gradient-on-the-canvas", "title": "How to draw a circle with a radial gradient on the canvas?", "body": "<p>I need to draw a circle with a radial gradient on the canvas in my custom control (XAML). But <code>Windows::UI::Xaml::Media</code> contains <code>LinearGradientBrush</code> only. I know about design guids but my control requires so feature to the user can see the color gamma.<br>\nBelow that I need to get:<br>\n<a href=\"https://i.stack.imgur.com/R5t4A.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/R5t4A.png\" alt=\"Gradient\"></a><br>\n<strong>P.S.</strong> I ask how to draw it at least programmaticaly without XAML.<br>\n<strong>P.P.S.</strong> I know that I can draw a picture in some editor with radial gradient and after draw it on the canvas but it seems not good solution for the adaptive design.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1492018898, "post_id": 43376212, "comment_id": 73814645, "body": "It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming.  Further reading: <b><a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a></b>"}, {"owner": {"reputation": 2081, "user_id": 505278, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/lHQJr.jpg?s=128&g=1", "display_name": "cosmoonot", "link": "https://stackoverflow.com/users/505278/cosmoonot"}, "edited": false, "score": 0, "creation_date": 1492019043, "post_id": 43376212, "comment_id": 73814716, "body": "Can you print out the value of X in your lettergrade function before the IF-statements. What is the output?"}, {"owner": {"reputation": 25, "user_id": 7688125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f2ef68f69f4296aaf091e192b172e8a?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/7688125/james"}, "edited": false, "score": 0, "creation_date": 1492019253, "post_id": 43376212, "comment_id": 73814817, "body": "Outputs a 50 after defining"}], "answers": [{"comments": [{"owner": {"reputation": 570, "user_id": 1528104, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5C1MA.jpg?s=128&g=1", "display_name": "Stephan", "link": "https://stackoverflow.com/users/1528104/stephan"}, "edited": false, "score": 0, "creation_date": 1492019333, "post_id": 43376303, "comment_id": 73814853, "body": "To expand, the ASCII character &#39;F&#39; has a decimal code of 70"}, {"owner": {"reputation": 25, "user_id": 7688125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f2ef68f69f4296aaf091e192b172e8a?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/7688125/james"}, "edited": false, "score": 0, "creation_date": 1492019582, "post_id": 43376303, "comment_id": 73815006, "body": "Thanks, simple mistake but i didn&#39;t notice it after many lookovers."}], "tags": [], "owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "is_accepted": true, "score": 2, "last_activity_date": 1492019141, "creation_date": 1492019141, "answer_id": 43376303, "question_id": 43376212, "link": "https://stackoverflow.com/questions/43376212/trouble-outputting-letter-grade/43376303#43376303", "title": "Trouble outputting letter grade", "body": "<p>The <code>output</code> function is defined like this:</p>\n\n<pre><code>void output(/*stuff*/ int lettergrade)\n</code></pre>\n\n<p>Here <code>lettergrade</code> is <em>an integer</em>, but you want it to be a <code>char</code>, so you should change the definition accordingly. </p>\n"}], "owner": {"reputation": 25, "user_id": 7688125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f2ef68f69f4296aaf091e192b172e8a?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/7688125/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 43376303, "answer_count": 1, "score": 1, "last_activity_date": 1492019141, "creation_date": 1492018840, "question_id": 43376212, "link": "https://stackoverflow.com/questions/43376212/trouble-outputting-letter-grade", "title": "Trouble outputting letter grade", "body": "<p>Currently i have achieved all goals for this program except outputting my letter graded average. Right now it always outputs a 70 and not a letter grade. Does anyone see what my issue is? I know currently that its redefining my lettergrade value into a 70 after passing through the lettergrade function.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\nusing namespace std;\n\n\n\n\nint getexams(int count)\n{\n    cout &lt;&lt; \"Number of exams to be entered:\";\n    cin &gt;&gt; count;\n\n    if (count &gt; 1024)\n    {\n        cout &lt;&lt; \"Please enter a number below 1024.\" &lt;&lt; endl;\n        system(\"pause\");\n        return 0;\n    }\n    else\n        return count;\n\n}\n\nint enterexams(int name[],int count, int b)\n{\n\n    int numexams = count;\n    for (int a = 0;a &lt; numexams;a++)\n    {\n        cout &lt;&lt; \"Enter grades: \";\n        cin &gt;&gt; name[a]; \n        b++;\n    }\n    return b;\n\n}\n\n\nchar letter(double average, char lettergrade)\n{\n    int x;\n    x = average;\n    if (x &gt;= 90) {\n        lettergrade = 'A';\n\n    }\n    else if (x &gt;= 80) {\n        lettergrade = 'B';\n\n    }\n    else if (x &gt;= 70) {\n        lettergrade = 'C';\n\n    }\n    else if (x &gt;= 60) {\n        lettergrade = 'D';\n\n    }\n    else {\n        lettergrade = 'F';\n\n    }\n    return lettergrade;\n\n\n}\nvoid output(int count,int name[], double average, int lettergrade)\n{\n    cout &lt;&lt; \"Number of exams: \" &lt;&lt; count &lt;&lt; endl;\n    for (int a = 0;a &lt; count;a++)\n        cout &lt;&lt; \"Exam grades: \" &lt;&lt; name[a] &lt;&lt; endl;\n    cout &lt;&lt; \"Average grade: \" &lt;&lt; average &lt;&lt; endl;\n    cout &lt;&lt; \"Letter grade: \" &lt;&lt; lettergrade &lt;&lt; endl;\n}\nint averagecalc(int average,int count,int name[])\n{\n    int a,sum,x;\n    sum = 0;\n\n    for (a = 0;a &lt; count;a++)\n    {\n        sum += name[a];\n\n    }\n    average = sum / count;\n    return average;\n}\nint main()\n{\n    char lettergrade = 0;\n    int b = 0;\n    int total = 0;\n    double average = 0;\n    int count =0;\n    count = getexams(count);\n    // Number of exams\n\n    int exams = count;\n    const int x = exams;            // Exam Values\n    int name[1024];\n\n    enterexams(name,count,b);\n    average = averagecalc(average,count,name);\n    lettergrade = letter(average, lettergrade);\n    output(count, name, average, lettergrade);\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "c++11", "cygwin"], "answers": [{"comments": [{"owner": {"reputation": 1131, "user_id": 7601529, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tJCew.jpg?s=128&g=1", "display_name": "Patrick Kelly", "link": "https://stackoverflow.com/users/7601529/patrick-kelly"}, "edited": false, "score": 0, "creation_date": 1492020202, "post_id": 43376110, "comment_id": 73815344, "body": "Thanks!  Appreciate the help."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1492018492, "creation_date": 1492018492, "answer_id": 43376110, "question_id": 43376068, "link": "https://stackoverflow.com/questions/43376068/c-thread-error-compile-time-error-with-class-argument/43376110#43376110", "title": "C++ Thread Error - compile-time error with class argument", "body": "<p>To pass references you need to use the <a href=\"http://en.cppreference.com/w/cpp/utility/functional/ref\" rel=\"nofollow noreferrer\"><code>std::ref</code></a> wrapper:</p>\n\n<pre><code>std::thread t3 ( testfunc3, std::ref ( tc ) ) ;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1131, "user_id": 7601529, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tJCew.jpg?s=128&g=1", "display_name": "Patrick Kelly", "link": "https://stackoverflow.com/users/7601529/patrick-kelly"}, "edited": false, "score": 0, "creation_date": 1492020154, "post_id": 43376185, "comment_id": 73815319, "body": "Thank you!  Never would have figured that out on my own.  Much appreciated!"}], "tags": [], "owner": {"reputation": 2916, "user_id": 3646096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KUofm.jpg?s=128&g=1", "display_name": "M&#225;rio Feroldi", "link": "https://stackoverflow.com/users/3646096/m%c3%a1rio-feroldi"}, "is_accepted": true, "score": 2, "last_activity_date": 1492018738, "creation_date": 1492018738, "answer_id": 43376185, "question_id": 43376068, "link": "https://stackoverflow.com/questions/43376068/c-thread-error-compile-time-error-with-class-argument/43376185#43376185", "title": "C++ Thread Error - compile-time error with class argument", "body": "<p>That's because <code>std::thread</code> can't store C++ references, it's similar to how <code>std::vector&lt;T&amp;&gt;</code> can't exist. So, in order to pass references around, there's a <a href=\"http://en.cppreference.com/w/cpp/utility/functional/reference_wrapper\" rel=\"nofollow noreferrer\">reference wrapper</a> in the standard library. It's basically a pointer under the hood, which mimics some of the language-wise reference's behavior. The <code>std::ref</code> and <code>std::cref</code> (for const references) functions are used to create an object of <code>std::reference_wrapper</code> (they're convenient functions, as they have template type deduction and shorter names).</p>\n\n<p>The only thing you have to add in your code is the <code>std::ref</code> function call, like so:</p>\n\n<pre><code>TestClass tc;\nstd::thread t3(testfunc3, std::ref(tc));\n</code></pre>\n"}], "owner": {"reputation": 1131, "user_id": 7601529, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tJCew.jpg?s=128&g=1", "display_name": "Patrick Kelly", "link": "https://stackoverflow.com/users/7601529/patrick-kelly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 602, "favorite_count": 1, "accepted_answer_id": 43376185, "answer_count": 2, "score": 1, "last_activity_date": 1492018738, "creation_date": 1492018335, "last_edit_date": 1495540445, "question_id": 43376068, "link": "https://stackoverflow.com/questions/43376068/c-thread-error-compile-time-error-with-class-argument", "title": "C++ Thread Error - compile-time error with class argument", "body": "<p>I found the page <a href=\"https://stackoverflow.com/questions/40817345/c-thread-error-no-type-named-type\">C++ thread error: no type named type</a>, with a similar error message to the one I am reporting below.  The answer on that page doesn't cover this case, as best I can tell.  Admittedly, there must be something simple that I am simply clueless about here.</p>\n\n<p>I have been trying use threads in a C++ program I am working on.  I had an initial version working with <code>boost::thread</code> without any problems.  This morning, I tried to rewrite my code to use <code>std::thread</code> instead of <code>boost::thread</code>.  That's when I suddenly ran into compile-time errors that I do not understand.  I have reduced the problem to the following piece of code.</p>\n\n<p>The upshot?  As soon as I try to pass a reference to one of my own user-defined classes as a function argument, the program fails to compile.  </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\nclass TestClass { } ;\n\nvoid testfunc1 ( void )           { std::cout &lt;&lt; \"Hello World TF1\" &lt;&lt; std::endl ; }\nvoid testfunc2 ( double val )     { std::cout &lt;&lt; \"Hello World TF2\" &lt;&lt; std::endl ; }\nvoid testfunc3 ( TestClass &amp; tc ) { std::cout &lt;&lt; \"Hello World TF3\" &lt;&lt; std::endl ; }\n\nint main ( int argc, char *argv[] )\n{\n    std::thread t1 ( testfunc1 ) ;\n\n    double tv ;\n    std::thread t2 ( testfunc2, tv ) ;\n\n    TestClass tc ;\n    std::thread t3 ( testfunc3, tc ) ;    //  compiler generates error here\n\n    return 0 ;\n}\n</code></pre>\n\n<p>The code will compile as long as I comment out that last line of code.  When it is present, however, I get the following compile-time error.</p>\n\n<pre><code>$ g++ -std=c++11 test.cpp\nIn file included from /usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/thread:39:0,\n                 from test.cpp:3:\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/functional: In instantiation of \u2018struct std::_Bind_simple&lt;void (*(TestClass))(TestClass&amp;)&gt;\u2019:\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/thread:142:59:   required from \u2018std::thread::thread(_Callable&amp;&amp;, _Args&amp;&amp; ...) [with _Callable = void (&amp;)(TestClass&amp;); _Args = {TestClass&amp;}]\u2019\ntest.cpp:19:33:   required from here\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/functional:1505:61: error: no type named \u2018type\u2019 in \u2018class std::result_of&lt;void (*(TestClass))(TestClass&amp;)&gt;\u2019\n       typedef typename result_of&lt;_Callable(_Args...)&gt;::type result_type;\n                                                             ^\n/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/include/c++/functional:1526:9: error: no type named \u2018type\u2019 in \u2018class std::result_of&lt;void (*(TestClass))(TestClass&amp;)&gt;\u2019\n         _M_invoke(_Index_tuple&lt;_Indices...&gt;)\n</code></pre>\n\n<p>There is clearly some kind of type-related issue, but I can't decipher this error message.  Any idea what the issue is?  (I happen to be using Cygwin on a Windows 10 machine, but I don't think that's relevant to the problem described.)</p>\n"}, {"tags": ["c++", "inheritance", "polymorphism"], "comments": [{"owner": {"reputation": 78442, "user_id": 202009, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/31dcfef154edd75223ae28f2cfd77f71?s=128&d=identicon&r=PG", "display_name": "Andy Thomas", "link": "https://stackoverflow.com/users/202009/andy-thomas"}, "edited": false, "score": 0, "creation_date": 1492018881, "post_id": 43376056, "comment_id": 73814628, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/14189438/why-do-we-need-abstract-classes-in-c\">Why do we need abstract classes in C++?</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1492018975, "post_id": 43376056, "comment_id": 73814685, "body": "You need a deeper example. Say you have functions to perform tasks on enemies. You would not want to write the same function over and over with one for <code>Ninja</code>s, one for <code>Monster</code>s, one for <code>Unicron</code>, etc..."}, {"owner": {"reputation": 43, "user_id": 7804894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fad94dac5afc3064f51ce24429b3f95?s=128&d=identicon&r=PG&f=1", "display_name": "14yearoldprogrammer", "link": "https://stackoverflow.com/users/7804894/14yearoldprogrammer"}, "edited": false, "score": 0, "creation_date": 1492019276, "post_id": 43376056, "comment_id": 73814826, "body": "@AndyThomas...Give me some time. I will understand the concept and if they both seem same, I will delete my question. Thanks."}, {"owner": {"reputation": 78442, "user_id": 202009, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/31dcfef154edd75223ae28f2cfd77f71?s=128&d=identicon&r=PG", "display_name": "Andy Thomas", "link": "https://stackoverflow.com/users/202009/andy-thomas"}, "edited": false, "score": 0, "creation_date": 1492019901, "post_id": 43376056, "comment_id": 73815184, "body": "@14yearoldprogrammer - You don&#39;t need to delete your question. Marking a question a duplicate just stops additional work from being put into a question that already has an answer."}], "answers": [{"comments": [{"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 1, "creation_date": 1492018956, "post_id": 43376159, "comment_id": 73814676, "body": "Note, you can also implement more types of enemies down the road with their own custom behavior, without having to change anything that was written using the common Enemy interface."}], "tags": [], "owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "is_accepted": true, "score": 4, "last_activity_date": 1492018654, "creation_date": 1492018654, "answer_id": 43376159, "question_id": 43376056, "link": "https://stackoverflow.com/questions/43376056/what-is-the-need-of-abstract-classes-why-access-a-derived-classes-method-throu/43376159#43376159", "title": "What is the need of abstract classes ? Why access a derived classes method through its base class ? in C++", "body": "<p>A collection of enemies (<code>std::vector&lt;Enemy*&gt;</code>) can have ninjas and monsters. A collection of ninjas can only contain ninjas, and a collection of monsters can only contain monsters.</p>\n\n<p>An abstract base class provides a common interface for child classes to implement, but where an instance of the abstract base class has no practical meaning (otherwise you would not make the base class abstract).</p>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 0, "last_activity_date": 1492022352, "last_edit_date": 1495540474, "creation_date": 1492022352, "answer_id": 43377212, "question_id": 43376056, "link": "https://stackoverflow.com/questions/43376056/what-is-the-need-of-abstract-classes-why-access-a-derived-classes-method-throu/43377212#43377212", "title": "What is the need of abstract classes ? Why access a derived classes method through its base class ? in C++", "body": "<p>The rest of this has been covered well buy the other answers, but \"Why a pointer?\" has been ignored. </p>\n\n<p>Each of the subclasses have a different contents and likely different sizes.  Without a reference, the program would have to know the exact size to allocate storage. Mandating that all subclasses be the same size is a non-starter as this flies in the face of the C++ ideology of only paying for what you use and would require modification to previously compiled code (a new module adds a new subclass, all existing modules would have to change as well). Further, there is no reasonable way for a base class to know details about its subclasses (And many reasons why it shouldn't) and this includes knowing the size. </p>\n\n<p>With a reference, no one cares about about the size or implementation details. The object is some anonymous blob of memory of unknown size that contains its own access rules and instructions if the object is polymorphic (This is <a href=\"https://stackoverflow.com/questions/99297/how-are-virtual-functions-and-vtable-implemented\">probably a \"v-table\"</a>, but C++ doesn't care what voodoo is used so long as the results meet the Standard).</p>\n"}], "owner": {"reputation": 43, "user_id": 7804894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fad94dac5afc3064f51ce24429b3f95?s=128&d=identicon&r=PG&f=1", "display_name": "14yearoldprogrammer", "link": "https://stackoverflow.com/users/7804894/14yearoldprogrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 43376159, "answer_count": 2, "score": 1, "last_activity_date": 1492022352, "creation_date": 1492018292, "question_id": 43376056, "link": "https://stackoverflow.com/questions/43376056/what-is-the-need-of-abstract-classes-why-access-a-derived-classes-method-throu", "title": "What is the need of abstract classes ? Why access a derived classes method through its base class ? in C++", "body": "<p>I am a beginner in C++ object oriented programming. I was studying \"Abstract Classes\" where the example code is:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass Enemy {\n    public:\n        virtual void attack() = 0;\n};\n\nclass Ninja: public Enemy {\n    public:\n        void attack() {\n            cout &lt;&lt; \"Ninja!\"&lt;&lt;endl;\n        }\n};\n\nclass Monster: public Enemy {\n    public:\n        void attack() {\n            cout &lt;&lt; \"Monster!\"&lt;&lt;endl;\n        }\n};\n\n\nint main()\n{\n    Ninja n;\n    Monster m;\n    Enemy *e1 = &amp;n;\n    Enemy *e2 = &amp;m;\n\n    e1-&gt;attack();\n    e2-&gt;attack();\n\n    return 0;\n}\n</code></pre>\n\n<p>What I want to understand is why can't I just use the objects of derived classes to access directly the derived class members with \".\" operator (It works, but it is not advised why?).</p>\n\n<p>Like this:</p>\n\n<pre><code>int main()\n{\n    Ninja n;\n    Monster m;\n    Enemy *e1 = &amp;n;\n    Enemy *e2 = &amp;m;\n\n    //e1-&gt;attack();\n    //e2-&gt;attack();\n    n.attack();\n    m.attack();\n\n    return 0;\n}\n</code></pre>\n\n<p>I know there will be situations where we need to go through the base class to access the members of derived classes (I think this is the normally used by all the programmers), but I have no idea on real world implementation of that kind of cases (Why can't we go direct, why is through pointers of base class?).</p>\n\n<p>I would be very glad if someone can clarify my doubt. </p>\n"}, {"tags": ["c++", "stack", "fibonacci", "largenumber"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 3, "creation_date": 1492017941, "post_id": 43375870, "comment_id": 73814150, "body": "&quot;I used double type and precision to output correctly&quot; - if you&#39;re trying to get exact results with doubles, you&#39;ve completely misunderstood what a double is. Get an arbitrary-precision arithmetic library."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1492018068, "post_id": 43375870, "comment_id": 73814223, "body": "Your going to need a BigInt library.  The 75th fib number is 1,304,969,544,928,657 where 18,446,744,073,709,551,615 is the most a unsigned 64bit number can hold."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1492018082, "post_id": 43375870, "comment_id": 73814234, "body": "Doubles are based on finite precision and approximation. Almost every operation you can do with doubles involves rounding and discarding precision."}, {"owner": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "edited": false, "score": 1, "creation_date": 1492018108, "post_id": 43375870, "comment_id": 73814248, "body": "<a href=\"https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">What Every Computer Scientist Should Know About Floating-Point Arithmetic</a>"}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1492028289, "post_id": 43375870, "comment_id": 73819894, "body": "The issue is that a double (IEEE) contains a 52 bit mantissa with an assumed leading 1 in front of it. This effectively makes a double the equivalent of a 53 bit unsigned integer (or a 54 bit signed integer), except that it can represent &#177; 2^53 exactly. There&#39;s no way to represent (2^53)+1, the next largest number is (2^53)+2. Assuming fib(0) = 0, then fib(78) == 8944394323791464 is the largest exact double Fibonacci number (it fails for fib(79)). Using a 64 bit unsigned integer would allow up to fib(93) == 12200160415121876738."}], "owner": {"reputation": 45, "user_id": 7643976, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FiHOpt59zmY/AAAAAAAAAAI/AAAAAAAAAFU/6OHQTef0Ar4/photo.jpg?sz=128", "display_name": "Zack Maguffin", "link": "https://stackoverflow.com/users/7643976/zack-maguffin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "closed_date": 1492018107, "answer_count": 0, "score": 0, "last_activity_date": 1492018019, "creation_date": 1492017621, "last_edit_date": 1492018019, "question_id": 43375870, "link": "https://stackoverflow.com/questions/43375870/fibonacci-numbers-start-going-off", "closed_reason": "Duplicate", "title": "Fibonacci Numbers start going off", "body": "<p>My program allows to find fibonacci numbers at a certain position n using stack but when I type in a position after 76, the numbers start to get a single number off and larger from there. Here is my arithmetic:</p>\n\n<pre><code>for (int i = 2; i &lt; nth; i++)\n{\n\n    if (nth == 1)\n        return 1;\n    else if (nth == 2)\n        return 1;\n    else\n    n1 = fibStack.top();\n    fibStack.pop();\n    n2 = fibStack.top();\n    fibStack.pop();\n\n    temp = n1 + n2;\n    fibStack.push(n2);\n    fibStack.push(n1);\n    fibStack.push(temp);\n\n}\n</code></pre>\n\n<p>I used double type and precision to output correctly.\nThe correct output at 83 is: 99194853094755497\nWhat my code outputs is:     99194863094755488</p>\n"}, {"tags": ["c++", "c++11", "constexpr", "static-assert"], "comments": [{"owner": {"reputation": 1283, "user_id": 3897333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d784367ca82572dea0a2c43217770b?s=128&d=identicon&r=PG", "display_name": "Paul Stelian", "link": "https://stackoverflow.com/users/3897333/paul-stelian"}, "edited": false, "score": 0, "creation_date": 1492016812, "post_id": 43375604, "comment_id": 73813575, "body": "Perhaps making get_device take a const?"}, {"owner": {"reputation": 1283, "user_id": 3897333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d784367ca82572dea0a2c43217770b?s=128&d=identicon&r=PG", "display_name": "Paul Stelian", "link": "https://stackoverflow.com/users/3897333/paul-stelian"}, "edited": false, "score": 0, "creation_date": 1492016867, "post_id": 43375604, "comment_id": 73813606, "body": "Plus, static_assert can&#39;t work with the not-constexpr things. I&#39;m surprised that does not give an error by itself."}, {"owner": {"reputation": 14766, "user_id": 483486, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fcf225aa724d9bb05f6693dc8cf8c459?s=128&d=identicon&r=PG", "display_name": "OmnipotentEntity", "link": "https://stackoverflow.com/users/483486/omnipotententity"}, "edited": false, "score": 0, "creation_date": 1492017318, "post_id": 43375604, "comment_id": 73813844, "body": "You might want to have two versions of get_device, one that will <code>failed</code>, and is not constexpr and the other that will <code>static_assert</code> and is.  But I&#39;m not sure if constexpr can be overloaded in this manner."}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "reply_to_user": {"reputation": 14766, "user_id": 483486, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fcf225aa724d9bb05f6693dc8cf8c459?s=128&d=identicon&r=PG", "display_name": "OmnipotentEntity", "link": "https://stackoverflow.com/users/483486/omnipotententity"}, "edited": false, "score": 0, "creation_date": 1492017393, "post_id": 43375604, "comment_id": 73813887, "body": "@OmnipotentEntity: If overloading the same name is not possible, any recommendation for how to write the two functions without duplicating the lookup table?"}, {"owner": {"reputation": 14766, "user_id": 483486, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fcf225aa724d9bb05f6693dc8cf8c459?s=128&d=identicon&r=PG", "display_name": "OmnipotentEntity", "link": "https://stackoverflow.com/users/483486/omnipotententity"}, "edited": false, "score": 0, "creation_date": 1492017465, "post_id": 43375604, "comment_id": 73813924, "body": "Turn the lookup into a constexpr bare array and simply index (with a bounds check.)  Assuming it&#39;s contiguous, which might not be the case."}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "reply_to_user": {"reputation": 14766, "user_id": 483486, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fcf225aa724d9bb05f6693dc8cf8c459?s=128&d=identicon&r=PG", "display_name": "OmnipotentEntity", "link": "https://stackoverflow.com/users/483486/omnipotententity"}, "edited": false, "score": 0, "creation_date": 1492017608, "post_id": 43375604, "comment_id": 73814007, "body": "@OmnipotentEntity: Not contiguous, and in some cases,  not integral ids either"}, {"owner": {"reputation": 14766, "user_id": 483486, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fcf225aa724d9bb05f6693dc8cf8c459?s=128&d=identicon&r=PG", "display_name": "OmnipotentEntity", "link": "https://stackoverflow.com/users/483486/omnipotententity"}, "edited": false, "score": 0, "creation_date": 1492017694, "post_id": 43375604, "comment_id": 73814047, "body": "In that case I would recommend using 3 functions.  One constexpr base implementation that returns an invalid value on failure, and is not visible outside of the translation unit.  One constexpr with a static assert.  One regular with the runtime failure."}, {"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 1, "creation_date": 1492018178, "post_id": 43375604, "comment_id": 73814279, "body": "<a href=\"http://stackoverflow.com/questions/34280729/throw-in-constexpr-function\">Trick with <code>throw</code></a> won&#39;t help here?"}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "reply_to_user": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 0, "creation_date": 1492018832, "post_id": 43375604, "comment_id": 73814612, "body": "@Zereges: See <a href=\"http://stackoverflow.com/q/20461121/102441\">this question</a>. That trick is equivalent to my <code>failed</code> function"}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1492019053, "post_id": 43375604, "comment_id": 73814720, "body": "You are definitely restricted to 11?"}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "reply_to_user": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1492019514, "post_id": 43375604, "comment_id": 73814970, "body": "@NirFriedman: Turns out I can actually compile with <code>-std=gnu++1y</code> at best. I&#39;d still appreciate answers for newer versions"}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1492021832, "post_id": 43375604, "comment_id": 73816217, "body": "@Eric I&#39;m not sure if that actually helps, sorry I was thinking about some changes that had been made. There&#39;s a discussion by Eric Niebler here: <a href=\"http://ericniebler.com/2014/09/27/assert-and-constexpr-in-cxx11/\" rel=\"nofollow noreferrer\">ericniebler.com/2014/09/27/assert-and-constexpr-in-cxx11</a>. I&#39;m actually having trouble understanding why you don&#39;t get the behavior you want with the code you have; it seems like the right hand side should still be considered a constant expression even if it is being assigned to a non constexpr value. Very odd."}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "reply_to_user": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1492022057, "post_id": 43375604, "comment_id": 73816335, "body": "@NirFriedman: The right hand side is not considered a constant expression, because by design <code>failed</code> is not either. I&#39;m exploiting this behaviour in cases 1. and 2., but it comes back to bite me in case 4. That blog shows the same effect as the one I&#39;m seeing"}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1492027622, "post_id": 43375604, "comment_id": 73819491, "body": "Very related: <a href=\"http://stackoverflow.com/q/40409323/102441\">stackoverflow.com/q/40409323/102441</a>"}], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1496085959, "post_id": 43376148, "comment_id": 75506811, "body": "You need a <code>void</code> in there, like <code>static_assert(((void)x, true), &quot;&quot;); return x</code>, because if <code>x</code> overrides <code>constexpr operator,</code> the result could be amusing.  <code>constexpr bool Device::operator,(bool b)const{return false;}</code>"}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1496088058, "post_id": 43376148, "comment_id": 75507626, "body": "@Yakk: Ugh, I forgot that was a thing. Thanks!"}], "tags": [], "owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "is_accepted": false, "score": 2, "last_activity_date": 1496088049, "last_edit_date": 1496088049, "creation_date": 1492018610, "answer_id": 43376148, "question_id": 43375604, "link": "https://stackoverflow.com/questions/43375604/how-can-i-force-a-compilation-error-in-a-constexpr-function-instead-of-letting/43376148#43376148", "title": "How can I force a compilation error in a constexpr function, instead of letting it decay into a non-constexpr context?", "body": "<p>Here's a hack that comes close:</p>\n\n<pre><code>#define _return_constexpr(x) static_assert(((void)x, true), \"\"); return x\ntemplate &lt;uint8_t which&gt;\nconstexpr Device&amp; get_device() {\n    _return_constexpr(get_device(which));\n}\n</code></pre>\n\n<p>Which passes the tests as:</p>\n\n<pre><code>constexpr Device&amp; cD1 = get_device(1);      // 1a. ok\nconstexpr Device&amp; cD1 = get_device&lt;1&gt;();    // 1b. ok\nconstexpr Device&amp; cD10 = get_device(10);    // 2a. compile error\nconstexpr Device&amp; cD10 = get_device&lt;10&gt;();  // 2b. compile error\n\nDevice&amp; cD1 = get_device(1);      // 3a. ok\nDevice&amp; cD1 = get_device&lt;1&gt;();    // 3b. ok\nDevice&amp; cD10 = get_device(10);    // 4a. runtime error (FAIL)\nDevice&amp; cD10 = get_device&lt;10&gt;();  // 4b. compile error (PASS!)\n\nDevice&amp; D1 = get_device(id1);    // 5. ok\nDevice&amp; D10 = get_device(id10);  // 6. ok\n</code></pre>\n\n<p>It seems that <code>static_assert</code> is the unique context which forces constexpr evaluation that:</p>\n\n<ul>\n<li>Works for any type  (a template argument would not accept <code>Device&amp;</code>)</li>\n<li>Works in a constexpr context (array sizes require a declaration)</li>\n</ul>\n\n<p>Is there a tidier way to write this macro?</p>\n\n<hr>\n\n<p>Without the requirement that the result itself work in a <code>constexpr</code> context, we can ditch the macro:</p>\n\n<pre><code>template &lt;uint8_t which&gt;\nDevice&amp; get_device() {\n    constexpr auto&amp; ret = get_device(which);\n    return ret;\n}\n</code></pre>\n"}], "owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 514, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1496088049, "creation_date": 1492016636, "last_edit_date": 1492017020, "question_id": 43375604, "link": "https://stackoverflow.com/questions/43375604/how-can-i-force-a-compilation-error-in-a-constexpr-function-instead-of-letting", "title": "How can I force a compilation error in a constexpr function, instead of letting it decay into a non-constexpr context?", "body": "<p>Here's the code I would like to be able to write:</p>\n\n<pre><code>int id1 = not_const_expr_1();\nint id10 = not_const_expr_10();\n\nconstexpr Device&amp; cD1 = get_device(1);    // 1. ok\nconstexpr Device&amp; cD10 = get_device(10);  // 2. compile error\n\nDevice&amp; cD1 = get_device(1);    // 3. ok\nDevice&amp; cD10 = get_device(10);  // 4. compile error\n\nDevice&amp; D1 = get_device(id1);    // 5. ok\nDevice&amp; D10 = get_device(id10);  // 6. exception, log message, infinite loop, or something\n</code></pre>\n\n<p>Here's what I tried:</p>\n\n<pre><code>template&lt;typename T&gt;\nT failed(const char*) { while(1); }  // could also throw exception\n\nconstexpr Device&amp; dev1 = ...;\nconstexpr Device&amp; dev42 = ...;\n\nconstexpr Device&amp; get_device(uint8_t which) {\n    return which == 1 ? dev1 :\n           which == 42 ? dev42 :\n           // more here, but not important\n           failed&lt;Device&amp;&gt;(\"Device does not exist\");\n           // string argument just to aid with compiler error message\n}\n</code></pre>\n\n<p>This passes all the above testcases except number 4. Unfortunately, the error is not caught at compile-time, as the compiler finds that for the given argument, <code>get_device</code> is not <code>const_expr</code>.</p>\n\n<p>Is there any way I can work a <code>static_assert</code> in here, without breaking things in the non-constexpr context?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 192, "user_id": 7607686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/435f7fca50284f6317909c183bd89a22?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/7607686/john"}, "edited": false, "score": 0, "creation_date": 1492016908, "post_id": 43375603, "comment_id": 73813631, "body": "Hello - you say &quot;no loops&quot; -EDITED (I should think thoroughly before posting) - it&#39;s possible - but you&#39;ll need mods (%) and divs (int (/)) - try it out, let me know if you need the code"}, {"owner": {"reputation": 1, "user_id": 7857768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cc5fe1b6893be8b7aac0b67d0eb93a7?s=128&d=identicon&r=PG&f=1", "display_name": "user7857768", "link": "https://stackoverflow.com/users/7857768/user7857768"}, "reply_to_user": {"reputation": 192, "user_id": 7607686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/435f7fca50284f6317909c183bd89a22?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/7607686/john"}, "edited": false, "score": 0, "creation_date": 1492017000, "post_id": 43375603, "comment_id": 73813672, "body": "Yes, it has to be done with no loops."}, {"owner": {"reputation": 750, "user_id": 7054387, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-6bDjhl9WjJI/AAAAAAAAAAI/AAAAAAAAAA0/HLJVVOTCc1Q/photo.jpg?sz=128", "display_name": "Fatemeh Karimi", "link": "https://stackoverflow.com/users/7054387/fatemeh-karimi"}, "edited": false, "score": 0, "creation_date": 1492017012, "post_id": 43375603, "comment_id": 73813681, "body": "i didn&#39;t understand what is your problem"}, {"owner": {"reputation": 1, "user_id": 7857768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cc5fe1b6893be8b7aac0b67d0eb93a7?s=128&d=identicon&r=PG&f=1", "display_name": "user7857768", "link": "https://stackoverflow.com/users/7857768/user7857768"}, "edited": false, "score": 0, "creation_date": 1492017115, "post_id": 43375603, "comment_id": 73813736, "body": "I had a feeling it would need mods and divs (int). I also maybe thinking constants?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1492017116, "post_id": 43375603, "comment_id": 73813737, "body": "If you dont know how to do it on paper then stop coding and first find out what you want to code"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1492017250, "post_id": 43375603, "comment_id": 73813806, "body": "...what I wanted to say is: This question is not really about coding, maybe maths"}], "answers": [{"comments": [{"owner": {"reputation": 427, "user_id": 4901269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/10303396ec8bbab327d22b73a8e47cdd?s=128&d=identicon&r=PG&f=1", "display_name": "Geoff", "link": "https://stackoverflow.com/users/4901269/geoff"}, "edited": false, "score": 0, "creation_date": 1492017992, "post_id": 43375775, "comment_id": 73814177, "body": "integer division is implemented using a loop, tut tut."}, {"owner": {"reputation": 192, "user_id": 7607686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/435f7fca50284f6317909c183bd89a22?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/7607686/john"}, "reply_to_user": {"reputation": 427, "user_id": 4901269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/10303396ec8bbab327d22b73a8e47cdd?s=128&d=identicon&r=PG&f=1", "display_name": "Geoff", "link": "https://stackoverflow.com/users/4901269/geoff"}, "edited": false, "score": 0, "creation_date": 1492026278, "post_id": 43375775, "comment_id": 73818694, "body": "@Corey - true, but his preclusion seems to be for C++ loops (while/for), not internal asm"}], "tags": [], "owner": {"reputation": 192, "user_id": 7607686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/435f7fca50284f6317909c183bd89a22?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/7607686/john"}, "is_accepted": false, "score": 0, "last_activity_date": 1492017270, "creation_date": 1492017270, "answer_id": 43375775, "question_id": 43375603, "link": "https://stackoverflow.com/questions/43375603/c-beginning-program/43375775#43375775", "title": "C++ Beginning Program", "body": "<p>Here's a function, and a couple of lines... that might help point you in the direction you want</p>\n\n<pre><code>int iQ = coincount( c, 25);\nc = c - (iQ * 25);\n\n----\nint coincount( int iTotal, int iCoin )\n{\n    return ( (int) iTotal / iCoin );\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 7858301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a00b105e1f039e0e1463eadc9de1c2f9?s=128&d=identicon&r=PG", "display_name": "DrewBot", "link": "https://stackoverflow.com/users/7858301/drewbot"}, "is_accepted": false, "score": 0, "last_activity_date": 1492022145, "creation_date": 1492022145, "answer_id": 43377156, "question_id": 43375603, "link": "https://stackoverflow.com/questions/43375603/c-beginning-program/43377156#43377156", "title": "C++ Beginning Program", "body": "<p>As someone in the comments mentioned, this can be solved using a sequence of divisions and mods. The divisions will tell you how many coins of a type you have, and the mods will tell you how much change you have left to distribute to the smaller denominations.</p>\n\n<p>For starters, you will want to declare some <code>int</code>s to store the coin amounts. Styles vary, but something like <code>int NumQuarters</code>, <code>int NumDimes</code>, etc, should suffice. Declare those just after you take the user input.</p>\n\n<p>Then the coin counts are simply <code>c</code> divided by the value of a given coin, starting with the largest denomination:</p>\n\n<p><code>NumQuarters = c / Q;</code></p>\n\n<p>To ensure that you only distribute what's left to the smaller denominations, mod your user's input by that same coin value and store that back into <code>c</code>:</p>\n\n<p><code>c = c % Q;</code></p>\n\n<p>Repeat that same process for all the denominations and you will have your coin counts. Then just insert them into your <code>cout</code>'s and you should be done:</p>\n\n<p><code>cout &lt;&lt; \"Q: \" &lt;&lt; NumQuarters &lt;&lt; \"\\n\";</code></p>\n"}], "owner": {"reputation": 1, "user_id": 7857768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cc5fe1b6893be8b7aac0b67d0eb93a7?s=128&d=identicon&r=PG&f=1", "display_name": "user7857768", "link": "https://stackoverflow.com/users/7857768/user7857768"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1492026258, "creation_date": 1492016631, "last_edit_date": 1492026258, "question_id": 43375603, "link": "https://stackoverflow.com/questions/43375603/c-beginning-program", "title": "C++ Beginning Program", "body": "<p>Write a program using c++ that asks the user for a integer number of cents and outputs how many of each type of coin would represent that amount with the fewest total number of coins. No loops please.</p>\n\n<p>Example output\nEnter cents:\n48\nChange:\nQ:1\nD:2\nN:0\nP:3</p>\n"}, {"tags": ["c++", "graphics", "rendering", "raytracing"], "comments": [{"owner": {"reputation": 1809, "user_id": 770302, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/J6ph2.png?s=128&g=1", "display_name": "Daniel A. Thompson", "link": "https://stackoverflow.com/users/770302/daniel-a-thompson"}, "edited": false, "score": 0, "creation_date": 1493735863, "post_id": 43375452, "comment_id": 74524271, "body": "Can you give us a couple of pictures: what this code currently renders, and what you&#39;d like it to render?"}, {"owner": {"reputation": 1809, "user_id": 770302, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/J6ph2.png?s=128&g=1", "display_name": "Daniel A. Thompson", "link": "https://stackoverflow.com/users/770302/daniel-a-thompson"}, "edited": false, "score": 0, "creation_date": 1493736225, "post_id": 43375452, "comment_id": 74524521, "body": "Also, your code is missing sections, like 1, 2, and 6 - please add those."}], "owner": {"reputation": 131, "user_id": 3358850, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/ae4ac12b59d38f509b9ae01fd08f8407?s=128&d=identicon&r=PG&f=1", "display_name": "user3358850", "link": "https://stackoverflow.com/users/3358850/user3358850"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1493754119, "creation_date": 1492016106, "last_edit_date": 1493754119, "question_id": 43375452, "link": "https://stackoverflow.com/questions/43375452/what-am-i-doing-wrong-with-the-russian-roulette-in-photon-mapping", "title": "what am I doing wrong with the Russian roulette in photon mapping?", "body": "<p>I can't get my object to be transparent , I think something has gone wrong with the russian roulette which is part 4. Find the probability that the photon continues.</p>\n\n<pre><code>    // Trace a ray from the light\n\n   {\n      // 1. Find first object hit by photon.\n      // 2. Store the photon if it has already has a specular reflection and if this is a diffuse surface.\n   }  \n\n   // 3. Stop if at max depth.\n   if (depth == 0) \n      return; \n\n   // 4. Find the probability that the photon continues.\n   vec3 pd = vec3(mat-&gt;ks.x + mat-&gt;kd.x, mat-&gt;ks.y + mat-&gt;kd.y, mat-&gt;ks.z + mat-&gt;kd.z);\n   float prob;\n   if (pd.x &gt; pd.y &amp;&amp; pd.x &gt; pd.z)\n      prob = pd.x;\n   else if (pd.y &gt; pd.x &amp;&amp; pd.y &gt; pd.z) \n      prob = pd.y;\n   else \n      prob = pd.z;\n   float p_s = prob * (mat-&gt;ks.x + mat-&gt;ks.y + mat-&gt;ks.z) / (mat-&gt;ks.x + mat-&gt;ks.y + mat-&gt;ks.z + mat-&gt;kd.x + mat-&gt;kd.y + mat-&gt;kd.z) ;\n   float p_d = prob * (mat-&gt;kd.x + mat-&gt;kd.y + mat-&gt;kd.z) / (mat-&gt;ks.x + mat-&gt;ks.y + mat-&gt;ks.z + mat-&gt;kd.x + mat-&gt;kd.y + mat-&gt;kd.z);\n\n   // 5. Generate random number.  If that shows that the photon dies, return.\n   float rnd = randIn01() ;\n   if (rnd &gt; prob) \n      return;\n   // 6. Probabilistically determine the action (one of diffuse or\n   //      specular reflection for all surfaces, plus refracted\n   //      transmission for non-opaque surfaces).  Based on the action,\n   //      compute the power loss (maybe!) and a direction to follow.\n</code></pre>\n\n<p>}</p>\n\n<p>what I did wrong here?</p>\n"}, {"tags": ["c++", "compiler-errors", "linker", "static-libraries", "static-linking"], "comments": [{"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1492016216, "post_id": 43375399, "comment_id": 73813218, "body": "I think you would most likely have duplicate symbol. And if it compiles, it should be fine at run time. (assume you are not talking about dll/souce code)"}], "answers": [{"tags": [], "owner": {"reputation": 31664, "user_id": 226975, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad744cf47bf63187d6b406f8be7cfa3a?s=128&d=identicon&r=PG", "display_name": "Wyzard", "link": "https://stackoverflow.com/users/226975/wyzard"}, "is_accepted": true, "score": 4, "last_activity_date": 1492017802, "creation_date": 1492017802, "answer_id": 43375928, "question_id": 43375399, "link": "https://stackoverflow.com/questions/43375399/is-it-a-diamond-issue-in-static-libraries-dependency-tree/43375928#43375928", "title": "Is it a diamond issue in static libraries dependency tree?", "body": "<p>The (possible) problem you're describing here isn't that you have a diamond structure in your dependencies, it's that you're using a library (extra-common) that depends on libcommon1.2a, but you're linking against libcommon1.3a instead.  It sounds like you already understand why that might not be safe.</p>\n\n<p>I think the term you're looking for is <a href=\"https://en.wikipedia.org/wiki/Application_binary_interface\" rel=\"nofollow noreferrer\">ABI: application binary interface</a>.  It's the elements of compiled code that have to match up between modules that are linked together, such as calling conventions and structure layouts.  ABI is analogous to <a href=\"https://en.wikipedia.org/wiki/Application_programming_interface\" rel=\"nofollow noreferrer\">API</a>, but it pertains to compatibility of compiled code instead of source code.  The two are independent of each other: you can break API without breaking ABI (e.g. by renaming a field in a structure), and you can break ABI without breaking API (e.g. by changing the size of a data type, or rearranging the fields in a structure).</p>\n\n<p>If libcommon1.3a is not ABI-compatible with libcommon1.2a, you can't safely use your extra-common library with it.  You'll need to recompile the extra-common component using libcommon1.3a headers.  (If 1.3a is not API-compatible either, you'll probably have to make changes in extra-common too.)</p>\n"}], "owner": {"reputation": 496, "user_id": 3023806, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/352eb9937ff8ed2626d32129e1aaecaa?s=128&d=identicon&r=PG", "display_name": "Greg Rynkowski", "link": "https://stackoverflow.com/users/3023806/greg-rynkowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 627, "favorite_count": 0, "accepted_answer_id": 43375928, "answer_count": 1, "score": 4, "last_activity_date": 1492017802, "creation_date": 1492015906, "question_id": 43375399, "link": "https://stackoverflow.com/questions/43375399/is-it-a-diamond-issue-in-static-libraries-dependency-tree", "title": "Is it a diamond issue in static libraries dependency tree?", "body": "<p>I have a problem that bothers me. I think I encountered it in the past, but I can't find information about similar issues on the internet.</p>\n\n<p>Assume that I have:</p>\n\n<ul>\n<li>a 'common' library and two different static libs of it: libcommon1.2.a and libcommon1.3.a.</li>\n<li>an 'extra-common' library that uses libcommon1.2.a and provides a new static lib from it.</li>\n<li>a final app that uses latest 'common' (libcommon1.3.a) and latest 'extra-common' ('common' and 'extra-common' are linked to the app).</li>\n</ul>\n\n<p>If between 'common' v1.3 and v1.2 were added new components only, everything should be fine, right?</p>\n\n<p>If 'common' v1.3 changed the API used by 'extra-common', probably I would get a missing symbol issue while linking 'extra-common' with the rest of app.</p>\n\n<p>If 'common' v1.3 keeps the same API as v1.2, but changes some internals, is it possible to have some crashes in runtime (caused by change in size of objects or maybe by changes of vtable, etc)?</p>\n\n<p>Could you send me some terms that I can google, some scenarios what could cause a runtime crash or some links to articles?  Is such a term like \"diamond problem in libraries dependencies\"?</p>\n\n<p>I would be grateful for anything.</p>\n"}, {"tags": ["c++", "performance", "tcp", "serial-port", "udp"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1492015872, "post_id": 43375340, "comment_id": 73813007, "body": "TCP and UDP are very different protocols that have different processing requirements."}, {"owner": {"reputation": 1902, "user_id": 2946480, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1410130b0742994273f53d17e0fb9360?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142", "link": "https://stackoverflow.com/users/2946480/micha%c5%82"}, "edited": false, "score": 0, "creation_date": 1492015948, "post_id": 43375340, "comment_id": 73813048, "body": "TCP has a significant overhead to ensure in-order delivery. UDP does not ensure in-order or even that a given packet will get delivered. More info - <a href=\"http://www.diffen.com/difference/TCP_vs_UDP\" rel=\"nofollow noreferrer\">diffen.com/difference/TCP_vs_UDP</a>"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1492016077, "post_id": 43375340, "comment_id": 73813134, "body": "See this Q&amp;A: <a href=\"http://stackoverflow.com/q/5970383/335858\">Difference between TCP and UDP</a>"}, {"owner": {"reputation": 53, "user_id": 6257212, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/03641dd7000a4368f1800125b96dd48a?s=128&d=identicon&r=PG&f=1", "display_name": "nt387", "link": "https://stackoverflow.com/users/6257212/nt387"}, "edited": false, "score": 0, "creation_date": 1492016845, "post_id": 43375340, "comment_id": 73813590, "body": "I understand why the TCP and UDP would have different execution times, but I don&#39;t get why that would change the Serial receiving time?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1492018326, "post_id": 43375340, "comment_id": 73814347, "body": "Recommend adding the test code you are using."}, {"owner": {"reputation": 53, "user_id": 6257212, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/03641dd7000a4368f1800125b96dd48a?s=128&d=identicon&r=PG&f=1", "display_name": "nt387", "link": "https://stackoverflow.com/users/6257212/nt387"}, "edited": false, "score": 0, "creation_date": 1492020425, "post_id": 43375340, "comment_id": 73815471, "body": "I&#39;ve added my code in"}, {"owner": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 0, "creation_date": 1492035134, "post_id": 43375340, "comment_id": 73823025, "body": "<i>&quot;I am noticing that the same function ... has different execution times&quot;</i> -- Share those numbers; is the &quot;difference&quot; 10% or 100%?  Your questions are argumentative,  and seem to be based on faulty premises.  <i>&quot;Shouldn&#39;t sending tcp be consistent regardless of the serial port baud rate&quot;</i>  -- Apparently you don&#39;t understand what the baud rate represents."}, {"owner": {"reputation": 53, "user_id": 6257212, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/03641dd7000a4368f1800125b96dd48a?s=128&d=identicon&r=PG&f=1", "display_name": "nt387", "link": "https://stackoverflow.com/users/6257212/nt387"}, "reply_to_user": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 0, "creation_date": 1492116069, "post_id": 43375340, "comment_id": 73863374, "body": "@sawdust I added in stats for some of the tests. Still don&#39;t understand how changing the baud rate of the serial port would affect the transmission time for TCP, while UDP is unchanged."}, {"owner": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 0, "creation_date": 1492132027, "post_id": 43375340, "comment_id": 73868251, "body": "You&#39;re presenting numbers without units.  Is #1 <i>&quot;0.30&quot;</i> seconds or msec?"}, {"owner": {"reputation": 53, "user_id": 6257212, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/03641dd7000a4368f1800125b96dd48a?s=128&d=identicon&r=PG&f=1", "display_name": "nt387", "link": "https://stackoverflow.com/users/6257212/nt387"}, "reply_to_user": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 0, "creation_date": 1492140200, "post_id": 43375340, "comment_id": 73869859, "body": "@sawdust It is ms. I have written the units."}, {"owner": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 0, "creation_date": 1492155946, "post_id": 43375340, "comment_id": 73874140, "body": "<i>&quot;It is ms:</i> -- Then you&#39;re not measuring what you think you&#39;re measuring.  At 9600 baud, a character requires a millisecond of time to be transmitted on the wire.  For measurement #3 <code>serial baud 9600, UDP send: 0.25 +&#47;- 0.11 ms</code>, a quarter millisecond is only the transmission time of a few bits, not a full byte, certainly not a complete message.  IOW you don&#39;t understand what you are measuring."}, {"owner": {"reputation": 53, "user_id": 6257212, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/03641dd7000a4368f1800125b96dd48a?s=128&d=identicon&r=PG&f=1", "display_name": "nt387", "link": "https://stackoverflow.com/users/6257212/nt387"}, "reply_to_user": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 1, "creation_date": 1492175145, "post_id": 43375340, "comment_id": 73882915, "body": "@sawdust Let me clarify that those times were only for the TCP or UDP sending portion of the code. I did not include the time for receiving the character, but I have added it in now. Those serial receiving times also seem to vary depending on the internet protocol which confuses me."}, {"owner": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 0, "creation_date": 1492200751, "post_id": 43375340, "comment_id": 73896182, "body": "I still don&#39;t understand what you&#39;re doing, and I suspect you&#39;re making flawed assumptions.  It looks like you want to measure I/O time, but all you can measure are syscalls, which are not the same thing.  I/O is performed asynchronously by the kernel and independent from user space.  Note that UDP will send data when the datagram is issued.  But TCP will build a packet to send socket data based on its criteria, so UDP will have less latency (i.e. UDP will transmit the data &quot;as soon as possible&quot;, unlike TCP)."}, {"owner": {"reputation": 53, "user_id": 6257212, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/03641dd7000a4368f1800125b96dd48a?s=128&d=identicon&r=PG&f=1", "display_name": "nt387", "link": "https://stackoverflow.com/users/6257212/nt387"}, "reply_to_user": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 1, "creation_date": 1492479693, "post_id": 43375340, "comment_id": 73980243, "body": "@sawdust I have measured round trip times to send one byte from my laptop to the Raspberry Pi and back. Here I am trying to measure the intermediate steps for that process, within the Raspberry PI server. If it isn&#39;t possible to accurately measure the intermediate steps because of the asynchronous processes, then I guess I&#39;ll have to be satisfied with knowing the round trip times."}, {"owner": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 0, "creation_date": 1492562110, "post_id": 43375340, "comment_id": 74024416, "body": "Round-trip time is meaningful because you have identified the correct starting and ending points.  But that&#39;s not the case for the half-leg &quot;measurements&quot;.  For measuring the &quot;send&quot; operation, the start point is easy to identify, but what is the proper end point?  Is it the return from the syscall?  Is the sycall blocking or non-blocking? Is it when the kernel initiates the output?  Is it when the data is received on the other end?  There are similar questions for the &quot;receive&quot; operation.  One method to measure events at two computers is with a logic analyzer, and toggling GPIO pins."}], "owner": {"reputation": 53, "user_id": 6257212, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/03641dd7000a4368f1800125b96dd48a?s=128&d=identicon&r=PG&f=1", "display_name": "nt387", "link": "https://stackoverflow.com/users/6257212/nt387"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1492174921, "creation_date": 1492015762, "last_edit_date": 1492174921, "question_id": 43375340, "link": "https://stackoverflow.com/questions/43375340/why-does-the-same-function-have-different-execution-times", "title": "Why does the same function have different execution times?", "body": "<p>I have a setup where I am sending data (1 byte at a time) to a Raspberry Pi from a Windows laptop via serial or Ethernet connection. The Pi then sends the data back to the laptop via serial or Ethernet, and I log the transmission for the round trip time. The Raspberry Pi server is coded in C++.</p>\n\n<p>Right now I am trying to measure the execution time of receiving and sending on the Raspberry Pi side. However, I am noticing that the same function (receiving on the serial port) has different execution times depending on whether UDP or TCP is used to send back the data. This doesn't make sense to me, I would think that receiving on the serial port will be the same regardless. </p>\n\n<p>I can post the actual code if necessary. Can anyone help explain what's going on here? Is it the inaccuracy of the timer? I am using the chrono library for millisecond timing.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>void send_client_udp( char *s, int mysock, int myport){\nint i;\nfor(i=0;i&lt;BACKLOG;i++){\n\n        if(htons(udparray[i].sin_port) == myport){\n            sendto(mysock,s,1,0,(struct sockaddr*)&amp;udparray[i], sizeof udparray[i]);\n        }\n\n}\n}\n\n void send_message_all_udp(char *s, int mysock){\nint k;\nfor(k=0;k&lt;BACKLOG;k++){\n\n        sendto(mysock,s,1,0,(struct sockaddr*)&amp;udparray[k], sizeof udparray[k]);\n\n}\n}\n void send_client_tcp( char *s, int mysock){\nint i;\nfor(i=0;i&lt;BACKLOG;i++){\n    if(tcparray[i]){\n        if(tcparray[i] == mysock){\n            send(tcparray[i], s, 1,0);\n        }\n    }\n}\n} \n\n/* Send message to all clients */\nvoid send_message_all_tcp(char *s){\nint k;\nfor(k=0;k&lt;BACKLOG;k++){\n    if(tcparray[k]){\n        send(tcparray[k], s, 1,0);\n    }\n}\n}\n\nvoid *sr_es_udp(void *thissock)\n{\n  int mysock = *(int*)thissock;\n int counter = 1;\nint ardint;\nchar ardchar;\nchar *mesg;\nwhile (ardrun)\n\n{\nif (serialDataAvail (serfd) == -1)\n{\n    fprintf(stdout, \"(Serial) No data able to be received: %s\\n\", strerror (errno));\n    exit(EXIT_FAILURE);\n} \nauto recv1 = chrono::high_resolution_clock::now();\nardint = serialGetchar(serfd) ;\nauto recv2 = chrono::high_resolution_clock::now();\n   if (ardint &gt; 0)\n{\n\n ardchar = char(ardint);\n mesg = &amp;ardchar;\n\n send_message_all_udp(mesg, mysock); \n auto sendcli = chrono::high_resolution_clock::now();\n std::chrono::duration&lt;double,std::milli&gt; elapscli = (sendcli - recv2);\n std::chrono::duration&lt;double,std::milli&gt; elapsrecv = (recv2 - recv1);\n outfile &lt;&lt; counter &lt;&lt; \"\\t\" &lt;&lt; elapsrecv.count() &lt;&lt; \"\\t\"&lt;&lt; elapscli.count() &lt;&lt; \"\\t\" &lt;&lt; ardint &lt;&lt; \"\\n\";\n counter++;\n}\n\n}\ncout &lt;&lt; \"exit\" &lt;&lt; endl;\nexitard= true;\n}\n\n\n void *er_es_udp(void *pnewsock)\n{\nint mysock = *(int*)pnewsock;\nchar client_msg[MAXLEN];\nint read_size;\n\nint clientint;\nint myport;\n int counter = 1;  \n while(looprun){\n  auto recv1 = chrono::high_resolution_clock::now();                      \n  read_size = recvfrom(mysock, client_msg, 1, 0, (struct sockaddr*)&amp;their_addr, &amp;size);\n  auto recv2 = chrono::high_resolution_clock::now();\n\n clientint = int(*client_msg);\n\n myport = htons(their_addr.sin_port);\nif (clientint &gt;0)\n{\n\n\n\nserialPuts (serfd, &amp;(*client_msg)) ;\nauto sendser = chrono::high_resolution_clock::now();\n\nsend_client_udp(client_msg,mysock,myport); \nauto sendcli = chrono::high_resolution_clock::now();\nstd::chrono::duration&lt;double,std::milli&gt; elapsrecv = recv2-recv1;\nstd::chrono::duration&lt;double,std::milli&gt; elapscli = sendcli-recv2;\nstd::chrono::duration&lt;double,std::milli&gt; elapsser = sendser-recv2;\n//outfile &lt;&lt; counter &lt;&lt; \"\\t\" &lt;&lt; elapsrecv.count() &lt;&lt; \"\\t\" &lt;&lt; elapsser.count() &lt;&lt; \"\\t\" &lt;&lt; clientint &lt;&lt; \"\\n\";\noutfile &lt;&lt; counter &lt;&lt; \"\\t\" &lt;&lt; elapsrecv.count() &lt;&lt; \"\\t\" &lt;&lt; elapscli.count() &lt;&lt; \"\\t\" &lt;&lt; elapsser.count() &lt;&lt; \"\\t\" &lt;&lt; clientint &lt;&lt; \"\\n\";\ncounter++;\n}\n\n\n}\n cout &lt;&lt; \"exit \" &lt;&lt; endl;\n\n\n}\n\n/* TCP data handling */\nvoid *sr_es_tcp(void *)\n{\n\nint counter = 1;\nint ardint;\nchar ardchar;\nchar *mesg;\nwhile (run)\n\n{\nif (serialDataAvail (serfd) == -1)\n{\n    fprintf(stdout, \"(Serial) No data able to be received: %s\\n\", strerror (errno));\n    exit(EXIT_FAILURE);\n} \n auto recv1 = chrono::high_resolution_clock::now();       \n ardint = serialGetchar (serfd) ;\n auto recv2 = chrono::high_resolution_clock::now();\n if (ardint &gt; 0)\n {\n    ardchar = char(ardint);\n  mesg = &amp;ardchar;\n\n\n send_message_all_tcp(mesg);\nauto sendcli = chrono::high_resolution_clock::now();\nstd::chrono::duration&lt;double,std::milli&gt; elapscli = (sendcli - recv2);\n std::chrono::duration&lt;double,std::milli&gt; elapsrecv = (recv2 - recv1);\n outfile &lt;&lt; counter &lt;&lt; \"\\t\" &lt;&lt; elapsrecv.count() &lt;&lt; \"\\t\"&lt;&lt; elapscli.count() &lt;&lt; \"\\t\" &lt;&lt; ardint &lt;&lt; \"\\n\";\n counter++;\n\n}\n\n}\ncout &lt;&lt; \"exit\" &lt;&lt; endl;\nexitard=true;\n}\n\n/* handle the connections from client */\nvoid *er_es_tcp(void *pnewsock)\n{\nint mysock = *(int*)pnewsock;\n\n\n char client_msg[MAXLEN];\n\n int read_size;\n\n int clientint;\n\n  int myport;\n  int counter = 1;\n\n  while(looprun){   \n\n  read_size = recv(mysock, client_msg, 1, 0);\n\n  auto recv2 = chrono::high_resolution_clock::now();\n   clientint = int(*client_msg);\n\n\n    if (clientint &gt; 0)\n   {\nclient_msg[read_size] = '\\0';\n\n\n serialPuts(serfd, &amp;(*client_msg)) ;\n  auto sendser = chrono::high_resolution_clock::now();\n\n send_client_tcp(client_msg,mysock); //was send_message\n\n auto sendcli = chrono::high_resolution_clock::now();\n\n\n std::chrono::duration&lt;double,std::milli&gt; elapsrecv = recv2-recv1;\nstd::chrono::duration&lt;double,std::milli&gt; elapscli = sendcli-recv2;\nstd::chrono::duration&lt;double,std::milli&gt; elapsser = sendser-recv2;\n\n\n outfile &lt;&lt; counter  &lt;&lt; \"\\t\" &lt;&lt; elapscli.count() &lt;&lt; \"\\t\" &lt;&lt; elapsser.count() &lt;&lt; \"\\t\" &lt;&lt; clientint &lt;&lt; \"\\n\";\n  counter++;\n  }\n\n\n  }\n  cout &lt;&lt; \"exit \" &lt;&lt; endl;\n\n\n\n}\n</code></pre>\n\n<p>For the sr_es functions, the serialGetChar execution time changes depending on whether send_message_all is UDP or TCP. serialGetChar is from WiringPi serial library. Additionally, the send_message_client_tcp in Eth_recv_eth_send() is different for the send_message_all_tcp in Ser_recv_eth_send() for TCP specifically when serialGetChar is receiving at 115200 bps compared to 9600 bps. Why is this the case? There is only one client, so send_message_client_tcp() and send_message_all_tcp() should be the same. Shouldn't sending tcp be consistent regardless of the serial port baud rate, and why would serial receiving time change because of the internet protocol?</p>\n\n<p>Here are the avg stats and standard deviation for a couple different tests (10 trials of 1000 data points each):</p>\n\n<p><strong>Receive/Send via Ethernet</strong></p>\n\n<ol>\n<li>UDP receive: 0.5 +/- 0.37 ms, UDP send: 0.30 +/- 0.17 ms</li>\n<li>TCP receive: 0.44 +/- 0.4 ms, TCP send: 0.39 +/- 0.15 ms</li>\n</ol>\n\n<p><strong>Receive Serially, send via Ethernet</strong></p>\n\n<ol start=\"3\">\n<li>serial baud 9600 receive: 4.3 +/- 0.1 ms, UDP send: 0.25 +/- 0.11 ms</li>\n<li>serial baud 9600 receive: 3.9 +/- 0.1 ms, TCP send: 0.77 +/- 0.19 ms -> interesting point is that the first 30 or so points are at 0.35, after that it shoots up to ~0.75-1 ms</li>\n<li>serial baud 115200 receive: 0.3 +/- 0.09 ms, UDP send: 0.23 +/- 0.11 ms</li>\n<li>serial baud 115200 receive: 1 +/- 0.15 ms, TCP send: 0.34 +/- 0.1 ms</li>\n</ol>\n"}, {"tags": ["c++", "templates", "visual-studio-2015"], "comments": [{"owner": {"reputation": 5508, "user_id": 498424, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ig1qY.jpg?s=128&g=1", "display_name": "Raxvan", "link": "https://stackoverflow.com/users/498424/raxvan"}, "edited": false, "score": 1, "creation_date": 1492015827, "post_id": 43375291, "comment_id": 73812979, "body": "is that specialization legal ? checking with online compilers none of the c++ version (03,11,14) seem to work"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1492015831, "post_id": 43375291, "comment_id": 73812982, "body": "Can you pop open the &quot;Output Window&quot; which has the full text of the error messages? The &quot;Error Window&quot; only has the one line summaries that you posted."}, {"owner": {"reputation": 15189, "user_id": 477771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e1e6012428cc236ed32cf9a13376f0f3?s=128&d=identicon&r=PG", "display_name": "Mark Storer", "link": "https://stackoverflow.com/users/477771/mark-storer"}, "edited": false, "score": 0, "creation_date": 1492015857, "post_id": 43375291, "comment_id": 73812997, "body": "<a href=\"http://webcompiler.cloudapp.net/\" rel=\"nofollow noreferrer\">webcompiler.cloudapp.net</a> issues the same errors, shockingly.  The good news is this rules out the &quot;strange compatibility flag&quot; issue."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1492015941, "post_id": 43375291, "comment_id": 73813047, "body": "The problem is not Visual Studio. This shouldn&#39;t compile anywhere."}, {"owner": {"reputation": 15189, "user_id": 477771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e1e6012428cc236ed32cf9a13376f0f3?s=128&d=identicon&r=PG", "display_name": "Mark Storer", "link": "https://stackoverflow.com/users/477771/mark-storer"}, "edited": false, "score": 0, "creation_date": 1492015968, "post_id": 43375291, "comment_id": 73813064, "body": "That&#39;s were I was taking this from.  The C2995 had some additional info &quot;note: see declaration of <code>TestSpecialization&lt;T&gt;::f</code>"}, {"owner": {"reputation": 15189, "user_id": 477771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e1e6012428cc236ed32cf9a13376f0f3?s=128&d=identicon&r=PG", "display_name": "Mark Storer", "link": "https://stackoverflow.com/users/477771/mark-storer"}, "reply_to_user": {"reputation": 1207, "user_id": 1366591, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3bcb773bbfe3cb82d192072cad1f0b12?s=128&d=identicon&r=PG", "display_name": "ACB", "link": "https://stackoverflow.com/users/1366591/acb"}, "edited": false, "score": 0, "creation_date": 1492016473, "post_id": 43375291, "comment_id": 73813380, "body": "@ACB this is partial specialization, not explicit."}, {"owner": {"reputation": 15189, "user_id": 477771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e1e6012428cc236ed32cf9a13376f0f3?s=128&d=identicon&r=PG", "display_name": "Mark Storer", "link": "https://stackoverflow.com/users/477771/mark-storer"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1492016477, "post_id": 43375291, "comment_id": 73813381, "body": "@AndyG could you be more specific?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 2, "creation_date": 1492016723, "post_id": 43375291, "comment_id": 73813521, "body": "@MarkStorer: Partial specialization only applies to <i>classes</i>. You cannot partially specialize a method."}, {"owner": {"reputation": 15189, "user_id": 477771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e1e6012428cc236ed32cf9a13376f0f3?s=128&d=identicon&r=PG", "display_name": "Mark Storer", "link": "https://stackoverflow.com/users/477771/mark-storer"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1492016865, "post_id": 43375291, "comment_id": 73813604, "body": "@MooingDuck That&#39;s it!  Thank you."}, {"owner": {"reputation": 15189, "user_id": 477771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e1e6012428cc236ed32cf9a13376f0f3?s=128&d=identicon&r=PG", "display_name": "Mark Storer", "link": "https://stackoverflow.com/users/477771/mark-storer"}, "edited": false, "score": 0, "creation_date": 1492017367, "post_id": 43375291, "comment_id": 73813871, "body": "Oh.  The WHOLE class.  That&#39;s less good.  All those helper classes make much more sense now."}], "owner": {"reputation": 15189, "user_id": 477771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e1e6012428cc236ed32cf9a13376f0f3?s=128&d=identicon&r=PG", "display_name": "Mark Storer", "link": "https://stackoverflow.com/users/477771/mark-storer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "closed_date": 1492016612, "answer_count": 0, "score": 0, "last_activity_date": 1492015615, "creation_date": 1492015615, "question_id": 43375291, "link": "https://stackoverflow.com/questions/43375291/vs2015-template-specialization-errors", "closed_reason": "Duplicate", "title": "VS2015 template specialization errors", "body": "<p>The following code produces two compiler errors in vs2015:</p>\n\n<p>C2995: <code>void TestSpecialization&lt;T&gt;::f(void)</code>: function template has already been defined</p>\n\n<p>C3860: template argument list following class template name must list parameters in the order used in template parameter list.</p>\n\n<pre><code>template &lt;typename T&gt;\n\nclass TestSpecialization\n{\npublic:\n    void f() {}\n};\n\ntemplate &lt;typename T&gt;\nvoid TestSpecialization&lt;T*&gt;::f() // C3860, C2995\n{}\n</code></pre>\n\n<p>WRONG ORDER?!  This initially seemed nearly reasonable... the template originally had 3 parameters (in the correct order, btw).  But now it has a single parameter, how in the name of all that links do you manage to get that in the wrong order?!</p>\n\n<p><strong>Thoughts</strong></p>\n\n<p>Methinks the type listed in the error for 2995 is a clue, it lists the original type without the <code>T*</code>.</p>\n\n<p>Just to muddy the waters, <code>std::is_pointer</code> compiles just fine.</p>\n\n<p>It's entirely possible that we're using some strange compatibility flag on the compiler.</p>\n\n<p>No, I can't use <code>if constexpr</code> instead.  Ah... to dream.</p>\n"}, {"tags": ["c++", "graphics", "3d", "raytracing"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1492015685, "post_id": 43375220, "comment_id": 73812897, "body": "It is mathematically not possible for all the statements to be individually true yet logically AND&#39;ing them together is false."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1492015857, "post_id": 43375220, "comment_id": 73812998, "body": "This code doesn&#39;t involve OpenGL in any way so I&#39;ve removed the OpenGL tag.  It looks like a software raytracer."}], "answers": [{"comments": [{"owner": {"reputation": 703, "user_id": 4490045, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/df608bfbe36fb52c6d54de21d7de5345?s=128&d=identicon&r=PG&f=1", "display_name": "Schytheron", "link": "https://stackoverflow.com/users/4490045/schytheron"}, "edited": false, "score": 0, "creation_date": 1492016458, "post_id": 43375350, "comment_id": 73813370, "body": "Ok, that worked. I have some graphical glitches now but before the program refused to draw anything (just showed a black screen). The graphical glitches are likely to be caused by me not checking if the closestIntersection really is the CLOSEST one (I assume the <code>if(closestIntersection.distance &lt; x.t)</code> statement is responsible for checking this in the 2nd code piece). One question remains. What does vec3.t represent? Because I have no idea what the <code>if(closestIntersection.distance &lt; x.t)</code> statement actually does..."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 703, "user_id": 4490045, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/df608bfbe36fb52c6d54de21d7de5345?s=128&d=identicon&r=PG&f=1", "display_name": "Schytheron", "link": "https://stackoverflow.com/users/4490045/schytheron"}, "edited": false, "score": 0, "creation_date": 1492016759, "post_id": 43375350, "comment_id": 73813542, "body": "@Schytheron I don&#39;t know either. You&#39;ll have to ask whomever wrote the original code."}, {"owner": {"reputation": 703, "user_id": 4490045, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/df608bfbe36fb52c6d54de21d7de5345?s=128&d=identicon&r=PG&f=1", "display_name": "Schytheron", "link": "https://stackoverflow.com/users/4490045/schytheron"}, "edited": false, "score": 0, "creation_date": 1492017072, "post_id": 43375350, "comment_id": 73813711, "body": "The vec3 data type is part of the glm library (I think, unless C++ has built in vec3 data types) so its not something that the other guy created himself. I just can&#39;t seem to find any documentation on the vec3.t syntax."}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 2, "last_activity_date": 1492015779, "creation_date": 1492015779, "answer_id": 43375350, "question_id": 43375220, "link": "https://stackoverflow.com/questions/43375220/c-comparing-two-pieces-of-code-one-works-and-one-doesnt-cant-figure-out/43375350#43375350", "title": "(C++) Comparing two pieces of code, one works and one doesn&#39;t, can&#39;t figure out the difference", "body": "<p>The problem is not the <code>if</code> statement. That's a red herring.</p>\n\n<p>The critical difference between the two sets of code is your use of return statements <em>inside the <code>for</code> loop</em>. What's happening is that your code never really loops: it enters the first iteration of the loop, and then immediately returns true or false. So the logical output of your code is that it checks the first triangle for intersection, and returns whether they intersect or not. But based on your code, it looks like what you <em>want</em> is to find out is \"do <em>any</em> triangles intersect, and if so, which one?\".</p>\n\n<p>The simplest solution is to do like the second code set, use a <code>bool</code> to track whether you've found an intersection, and only return that value outside the loop.</p>\n"}], "owner": {"reputation": 703, "user_id": 4490045, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/df608bfbe36fb52c6d54de21d7de5345?s=128&d=identicon&r=PG&f=1", "display_name": "Schytheron", "link": "https://stackoverflow.com/users/4490045/schytheron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 43375350, "answer_count": 1, "score": -1, "last_activity_date": 1492016194, "creation_date": 1492015369, "last_edit_date": 1492016194, "question_id": 43375220, "link": "https://stackoverflow.com/questions/43375220/c-comparing-two-pieces-of-code-one-works-and-one-doesnt-cant-figure-out", "title": "(C++) Comparing two pieces of code, one works and one doesn&#39;t, can&#39;t figure out the difference", "body": "<p>I am currently writing a ray tracer. I have to write a function called ClosestIntersection that checks if a ray intersects with a triangle and it should also return (update to be exact) some information about the closest intersection.</p>\n\n<p>My code:</p>\n\n<pre><code>bool ClosestIntersection(vec3 start, vec3 dir, const vector&lt;Triangle&gt;&amp; triangles, Intersection&amp; closestIntersection)\n{\n    for (int i = 0; i &lt; triangles.size(); i++) {\n        vec3 v0 = triangles[i].v0;\n        vec3 v1 = triangles[i].v1;\n        vec3 v2 = triangles[i].v2;\n        vec3 e1 = v1 - v0;\n        vec3 e2 = v2 - v0;\n        vec3 b = start - v0;\n        mat3 A(-dir, e1, e2);\n        vec3 x = glm::inverse(A) * b;\n\n        if ((x.x &gt;= 0) &amp;&amp; (x.y &gt; 0) &amp;&amp; (x.z &gt; 0) &amp;&amp; ((x.y + x.z) &lt; 1)) {\n            closestIntersection.position = x.x*dir;\n            closestIntersection.distance = x.x;\n            closestIntersection.triangleIndex = i;\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n}\n</code></pre>\n\n<p>I have noticed that the if statement in my code never becomes true (AKA returns false every time), the funny thing is all of the conditions in the statment are all true when tested individually but not when they are put together as multiple conditions.</p>\n\n<p>I did find another piece of code on the internet that looks similar to mine (I would say it looks identical). </p>\n\n<p>Other code:</p>\n\n<pre><code>bool ClosestIntersection(vec3 start,\n    vec3 dir,\n    const vector&lt;Triangle&gt;&amp; triangles,\n    Intersection&amp; closestIntersection ){\n\n    bool exists = false;\n    for(int i=0; i&lt;triangles.size(); i++){\n\n        using glm::vec3;\n        using glm::mat3;\n        vec3 v0 = triangles[i].v0;\n        vec3 v1 = triangles[i].v1;\n        vec3 v2 = triangles[i].v2;\n        vec3 e1 = v1 - v0;\n        vec3 e2 = v2 - v0;\n        vec3 b = start -v0;\n        mat3 A( -dir, e1, e2 );\n        vec3 x = glm::inverse( A ) * b;\n\n        if ( x.x &gt; 0 ){ \n            if (x.y &gt; 0) {  \n                if (x.z &gt; 0) {\n                    if (x.y+x.z &lt; 1){\n                        if (closestIntersection.distance &lt; x.t){\n                            closestIntersection.position = x.x*dir;\n                            closestIntersection.distance = x.x;\n                            closestIntersection.triangleIndex = i;\n                        }\n                    }\n                }\n            }\n            exists = true;\n        }\n\n    }\n    return exists;\n}\n</code></pre>\n\n<p>This 2nd code works just fine but mine doesn't. The only difference between them that I can see is the <code>if(closestIntersection.distance &lt; x.t)</code> statement. I have no idea what this statement does because I have no idea what x.t is supposed to represent or return (new to C++). As far as I know a 3D vectors (vec3) XYZ values can be obtained by writing vec3.x, vec3.y or vec3.z but what value is vec3.t supposed to be?</p>\n\n<p>Basically my 2 questions are:</p>\n\n<ol>\n<li><p>What are the differences between the two code pieces?</p></li>\n<li><p>What does vec3.t return and what does it represent?</p></li>\n</ol>\n\n<p>(if you are still confused as to what I am actually doing or need some more context you can read the chapter \"2.3 Intersection\" in this: <a href=\"https://www.kth.se/social/files/55145c24f276547e50713af4/DH2323%20lab2.pdf\" rel=\"nofollow noreferrer\">https://www.kth.se/social/files/55145c24f276547e50713af4/DH2323%20lab2.pdf</a> PDF. Its a very small amount of text, not long at all)</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 5, "creation_date": 1492015315, "post_id": 43375165, "comment_id": 73812682, "body": "You probably wanted to use <code>std::find_if</code> rather than <code>std::find</code>. Otherwise, your code should work."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1492015382, "post_id": 43375165, "comment_id": 73812734, "body": "is ms_order::getId const qualified? As in void GetStuff() const; ?"}, {"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "reply_to_user": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 0, "creation_date": 1492015382, "post_id": 43375165, "comment_id": 73812737, "body": "@WhiZTiM Please make that an answer so we can vote."}, {"owner": {"reputation": 3990, "user_id": 270589, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/11cd12c93e05654e0857df948183514e?s=128&d=identicon&r=PG", "display_name": "Behrooz Karjoo", "link": "https://stackoverflow.com/users/270589/behrooz-karjoo"}, "reply_to_user": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 0, "creation_date": 1492015519, "post_id": 43375165, "comment_id": 73812818, "body": "@WhiZTiM that was it."}], "answers": [{"tags": [], "owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "is_accepted": true, "score": 5, "last_activity_date": 1492015908, "last_edit_date": 1492015908, "creation_date": 1492015560, "answer_id": 43375277, "question_id": 43375165, "link": "https://stackoverflow.com/questions/43375165/can-i-get-access-to-a-unique-pointer-as-const-reference/43375277#43375277", "title": "can I get access to a unique pointer as const reference?", "body": "<p>You should use <a href=\"http://en.cppreference.com/w/cpp/algorithm/find\" rel=\"nofollow noreferrer\"><code>std::find_if</code></a> rather than <a href=\"http://en.cppreference.com/w/cpp/algorithm/find\" rel=\"nofollow noreferrer\"><code>std::find</code></a>.</p>\n\n<p><code>std::find</code> compares each element in the given iterator range with the <code>value</code>. In your own case, the value you provided was a lambda object which is of an anonymous type that has no equivalence relation (or suitable <code>operator ==</code> ) with the type of the elements in <code>orders</code></p>\n\n<p><code>std::find_if</code> calls your functor on each element, and returns the iterator position if <code>true</code>, else, an end iterator.</p>\n"}], "owner": {"reputation": 3990, "user_id": 270589, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/11cd12c93e05654e0857df948183514e?s=128&d=identicon&r=PG", "display_name": "Behrooz Karjoo", "link": "https://stackoverflow.com/users/270589/behrooz-karjoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 43375277, "answer_count": 1, "score": 2, "last_activity_date": 1492015908, "creation_date": 1492015186, "question_id": 43375165, "link": "https://stackoverflow.com/questions/43375165/can-i-get-access-to-a-unique-pointer-as-const-reference", "title": "can I get access to a unique pointer as const reference?", "body": "<p>I have a collection of unique_ptr objects to ms_order objects: </p>\n\n<pre><code>std::vector&lt;std::unique_ptr&lt;ms_order&gt;&gt; orders;\n</code></pre>\n\n<p>I want to make a private helper function to get ms_order objects: </p>\n\n<pre><code>const std::unique_ptr&lt;ms_order&gt;&amp; ms_order_collection::get_order(const std::string &amp;id) {\n    std::vector&lt;std::unique_ptr&lt;ms_order&gt;&gt;::iterator it =\n            std::find(orders.begin(), orders.end(),\n                      [&amp;id](const std::unique_ptr&lt;ms_order&gt;&amp; op)\n                      { return op-&gt;getId() == id; });\n    return *it;\n}\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>error: no match for 'operator==' (operand types are 'std::unique_ptr&lt;ms_order&gt;' and 'const ms_order_collection::get_order(const string&amp;)::&lt;lambda(const std::unique_ptr&lt;ms_order&gt;&amp;)&gt;')\n  { return *__it == _M_value; }\n           ~~~~~~^~~~~~~~~~~\n</code></pre>\n\n<p>The error makes no sense to me. Is what I'm trying to do even possible? if so what am I doing wrong? </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 838, "user_id": 5391191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-U8c9fH2K_MQ/AAAAAAAAAAI/AAAAAAAAAEo/uSAxoPsAvvs/photo.jpg?sz=128", "display_name": "Jacob H", "link": "https://stackoverflow.com/users/5391191/jacob-h"}, "edited": false, "score": 0, "creation_date": 1492015405, "post_id": 43375120, "comment_id": 73812749, "body": "GetX should be either of type int* or return int. You also don&#39;t have a copy constructor defined. Please make sure to format your question properly in the future, and provide a minimal, complete, and verifiable example."}, {"owner": {"reputation": 10385, "user_id": 4032703, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8imMA.png?s=128&g=1", "display_name": "EJoshuaS - Reinstate Monica", "link": "https://stackoverflow.com/users/4032703/ejoshuas-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1492016499, "post_id": 43375120, "comment_id": 73813400, "body": "&quot;I don&#39;t know how to debug it&quot; - please take a look at <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a> by Eric Lippert, it&#39;s an <i>excellent</i> article on debugging techniques."}], "answers": [{"comments": [{"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 0, "creation_date": 1492015231, "post_id": 43375169, "comment_id": 73812649, "body": "that&#39;s true and yet it doesn&#39;t explain the OP&#39;s claim that the problem is with the assignment line. actually, it isn&#39;t her claim, it&#39;s the claim of whoever wrote the code the OP copied incorrectly, sorry. so actually, you&#39;re right."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1492015280, "post_id": 43375169, "comment_id": 73812667, "body": "Would be helpful to explain how the error message says exactly this."}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": false, "score": 1, "last_activity_date": 1492015410, "last_edit_date": 1492015410, "creation_date": 1492015202, "answer_id": 43375169, "question_id": 43375120, "link": "https://stackoverflow.com/questions/43375120/error-invalid-conversion-from-int-to-int-fpermissive/43375169#43375169", "title": "Error invalid conversion from &#39;int*&#39; to &#39;int&#39; -fpermissive", "body": "<p>This method has the wrong signature</p>\n\n<pre><code>int GetX()\n{\n    return x;\n}\n</code></pre>\n\n<p>it should be</p>\n\n<pre><code>int* GetX()\n{\n    return x;\n}\n</code></pre>\n\n<p>As far as your assignment, you'd need a <em>copy assignment operator</em> to say <code>ob3 = ob1</code> which would look like</p>\n\n<pre><code>CSample&amp; operator=(CSample&amp; other)\n{\n    N = other.N;\n    x = new int[N];\n    std::copy(other.x, other.x + other.N, x);\n    return *this;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7857725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4ff194a5700d064e62375758a2a61?s=128&d=identicon&r=PG&f=1", "display_name": "Cathy", "link": "https://stackoverflow.com/users/7857725/cathy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1724, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1492015410, "creation_date": 1492015033, "last_edit_date": 1492015176, "question_id": 43375120, "link": "https://stackoverflow.com/questions/43375120/error-invalid-conversion-from-int-to-int-fpermissive", "title": "Error invalid conversion from &#39;int*&#39; to &#39;int&#39; -fpermissive", "body": "<p>The below is the code, but I dont know how to debuy it. Can someone help me?</p>\n\n<p><a href=\"https://i.stack.imgur.com/4MmDS.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\n\n\n\nclass CSample\n{\n\n\n\n    int *x;\n    int N;\n\n\n\npublic:\n\n\n\n    //dafualt constructor\n    CSample(): x(NULL)\n    {}          \n    void AllocateX(int N)\n    {\n        this-&gt;N = N;\n        x = new int[this-&gt;N]; \n    }\n    int GetX()\n    {\n        return x;\n    }\n    ~CSample()\n    {\n        delete []x;\n    }\n};\n\nint main()\n{\n    CSample ob1; //Default constructor is called.\n    ob1.AllocateX(10);\n\n    //problem with this line\n    CSample ob2 = ob1; //default copy constructor called.\n\n    CSample ob3; //Default constructor called.\n\n    //problem with this line\n    ob3 = ob1; //default overloaded = operator function called.\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "excel", "xll"], "answers": [{"comments": [{"owner": {"reputation": 2053, "user_id": 1581875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c4820fbcdf16fb5aa890353e3198582?s=128&d=identicon&r=PG&f=1", "display_name": "Olorin", "link": "https://stackoverflow.com/users/1581875/olorin"}, "edited": false, "score": 0, "creation_date": 1492096481, "post_id": 43392716, "comment_id": 73852914, "body": "What do you mean by freeing the allocated array via the <code>xlAutoFree12</code> function ? ..."}, {"owner": {"reputation": 4382, "user_id": 3205529, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/edAtA.jpg?s=128&g=1", "display_name": "Malick", "link": "https://stackoverflow.com/users/3205529/malick"}, "reply_to_user": {"reputation": 2053, "user_id": 1581875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c4820fbcdf16fb5aa890353e3198582?s=128&d=identicon&r=PG&f=1", "display_name": "Olorin", "link": "https://stackoverflow.com/users/1581875/olorin"}, "edited": false, "score": 0, "creation_date": 1492096693, "post_id": 43392716, "comment_id": 73853073, "body": "<code>val.array.lparray</code>  is heap allocated (we use malloc)  so you must free it with <code>::free(reinterpret_cast&lt;void*&gt;(val.array.lparray));</code> inside the <code>xlAutoFree12</code> , cf <a href=\"https://msdn.microsoft.com/en-us/library/bb687922(v=office.15).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/bb687922(v=office.15).aspx</a>. Excel will copy the content of the array and returns the array to the dll via <code>xlAutoFree12</code> in order that the dll can free the portion of the heap that has been allocated by the dll and that Excel can&#39;t free. To know more about it read the chapter about memory management in Dalton&#39;s book."}, {"owner": {"reputation": 2053, "user_id": 1581875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c4820fbcdf16fb5aa890353e3198582?s=128&d=identicon&r=PG&f=1", "display_name": "Olorin", "link": "https://stackoverflow.com/users/1581875/olorin"}, "edited": false, "score": 0, "creation_date": 1492097193, "post_id": 43392716, "comment_id": 73853409, "body": "Ok, thx. Last point, why the <code>reinterpret_cast</code> ? Why the <code>static_cast</code> return ?"}, {"owner": {"reputation": 4382, "user_id": 3205529, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/edAtA.jpg?s=128&g=1", "display_name": "Malick", "link": "https://stackoverflow.com/users/3205529/malick"}, "reply_to_user": {"reputation": 2053, "user_id": 1581875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c4820fbcdf16fb5aa890353e3198582?s=128&d=identicon&r=PG&f=1", "display_name": "Olorin", "link": "https://stackoverflow.com/users/1581875/olorin"}, "edited": false, "score": 0, "creation_date": 1492097921, "post_id": 43392716, "comment_id": 73853853, "body": "<code>malloc</code> returns a <code>void</code> pointer so you need to reinterpret it to be able to store it in <code>lparray</code>. For the <code>static_cast</code> , sorry it is a mistake I just removed it."}, {"owner": {"reputation": 2053, "user_id": 1581875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c4820fbcdf16fb5aa890353e3198582?s=128&d=identicon&r=PG&f=1", "display_name": "Olorin", "link": "https://stackoverflow.com/users/1581875/olorin"}, "edited": false, "score": 0, "creation_date": 1492098633, "post_id": 43392716, "comment_id": 73854277, "body": "Ah ok , thx ! Last point : would I code up a function taking a matrix, modyfing it and returning it, would the type of the parameter of the function still be an <code>LPXLOPER12 </code> ?"}, {"owner": {"reputation": 4382, "user_id": 3205529, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/edAtA.jpg?s=128&g=1", "display_name": "Malick", "link": "https://stackoverflow.com/users/3205529/malick"}, "reply_to_user": {"reputation": 2053, "user_id": 1581875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c4820fbcdf16fb5aa890353e3198582?s=128&d=identicon&r=PG&f=1", "display_name": "Olorin", "link": "https://stackoverflow.com/users/1581875/olorin"}, "edited": false, "score": 0, "creation_date": 1492099229, "post_id": 43392716, "comment_id": 73854634, "body": "Yes, the LPXLOPER12  can returns any variable (matrix, string, num ...)"}, {"owner": {"reputation": 2053, "user_id": 1581875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c4820fbcdf16fb5aa890353e3198582?s=128&d=identicon&r=PG&f=1", "display_name": "Olorin", "link": "https://stackoverflow.com/users/1581875/olorin"}, "edited": false, "score": 0, "creation_date": 1492099625, "post_id": 43392716, "comment_id": 73854888, "body": "This I understood, my question is about having a parameter that is a matrix"}, {"owner": {"reputation": 4382, "user_id": 3205529, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/edAtA.jpg?s=128&g=1", "display_name": "Malick", "link": "https://stackoverflow.com/users/3205529/malick"}, "reply_to_user": {"reputation": 2053, "user_id": 1581875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c4820fbcdf16fb5aa890353e3198582?s=128&d=identicon&r=PG&f=1", "display_name": "Olorin", "link": "https://stackoverflow.com/users/1581875/olorin"}, "edited": false, "score": 0, "creation_date": 1492099789, "post_id": 43392716, "comment_id": 73854989, "body": "Yes the same for input variables."}, {"owner": {"reputation": 2053, "user_id": 1581875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c4820fbcdf16fb5aa890353e3198582?s=128&d=identicon&r=PG&f=1", "display_name": "Olorin", "link": "https://stackoverflow.com/users/1581875/olorin"}, "edited": false, "score": 0, "creation_date": 1492100293, "post_id": 43392716, "comment_id": 73855309, "body": "I tried a <code>arrayin-&gt;val.array.lparray + ((r* cols) + c))-&gt;xltype == xltypeNum</code> where <code>LPXLOPER12 arrayin</code> is my input parameter and had a crash. I am taking a 5*5 matrix from excel, at debug I see it having 19 rows and 20 colums, wth !? Is it maybe because when I receive the <code>LPXLOPER12 arrayin</code> it represents a range, way more complicated than a 5*5 matrix. How to access the 5*5 matrix it contains, then ?"}, {"owner": {"reputation": 4382, "user_id": 3205529, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/edAtA.jpg?s=128&g=1", "display_name": "Malick", "link": "https://stackoverflow.com/users/3205529/malick"}, "reply_to_user": {"reputation": 2053, "user_id": 1581875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c4820fbcdf16fb5aa890353e3198582?s=128&d=identicon&r=PG&f=1", "display_name": "Olorin", "link": "https://stackoverflow.com/users/1581875/olorin"}, "edited": false, "score": 0, "creation_date": 1492100537, "post_id": 43392716, "comment_id": 73855437, "body": "If you have another question post it. It will help others users, comments are not for extended discussions and I believe I have answered to your original question."}, {"owner": {"reputation": 2053, "user_id": 1581875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c4820fbcdf16fb5aa890353e3198582?s=128&d=identicon&r=PG&f=1", "display_name": "Olorin", "link": "https://stackoverflow.com/users/1581875/olorin"}, "edited": false, "score": 0, "creation_date": 1492100590, "post_id": 43392716, "comment_id": 73855464, "body": "And increment your answers counter, but ok, it&#39;s best practice indeed ;-)"}, {"owner": {"reputation": 2053, "user_id": 1581875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c4820fbcdf16fb5aa890353e3198582?s=128&d=identicon&r=PG&f=1", "display_name": "Olorin", "link": "https://stackoverflow.com/users/1581875/olorin"}, "edited": false, "score": 0, "creation_date": 1492100793, "post_id": 43392716, "comment_id": 73855584, "body": "Here you go : <a href=\"http://stackoverflow.com/questions/43397349/receive-a-matrix-from-excel-in-c-xll-modifying-it-and-returning-it\" title=\"receive a matrix from excel in c xll modifying it and returning it\">stackoverflow.com/questions/43397349/&hellip;</a>"}], "tags": [], "owner": {"reputation": 4382, "user_id": 3205529, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/edAtA.jpg?s=128&g=1", "display_name": "Malick", "link": "https://stackoverflow.com/users/3205529/malick"}, "is_accepted": true, "score": 0, "last_activity_date": 1492097888, "last_edit_date": 1492097888, "creation_date": 1492087530, "answer_id": 43392716, "question_id": 43375114, "link": "https://stackoverflow.com/questions/43375114/return-two-dimensional-array-to-excel-from-a-c-xll-the-come-back/43392716#43392716", "title": "Return two dimensional array to excel from a c++ xll, the come back", "body": "<p>A simple example returning a 5*5 matrix. Don't forget to free the allocated array via the <code>xlAutoFree12</code> function.</p>\n\n<pre><code>__declspec(dllexport) LPXLOPER12 WINAPI Get2DArray(void)\n{   \n    static XLOPER12 xlArray;\n    int rows = 5;\n    int cols = 5;\n    xlArray.xltype = xltypeMulti | xlbitDLLFree;\n    xlArray.val.array.rows = rows;\n    xlArray.val.array.columns = cols;\n    xlArray.val.array.lparray = reinterpret_cast&lt;LPXLOPER12&gt;(::malloc(rows * cols * sizeof(XLOPER12)));\n    for (int r=0;r&lt;rows;r++)\n    {\n            for (int c=0;c&lt;cols;c++)\n            {\n                XLOPER12* var = xlArray.val.array.lparray + ((r* cols) + c);\n                var-&gt;xltype = xltypeNum;\n                var-&gt;val.num = r*c;\n            }\n    }\n    return &amp;xlArray;\n}\n</code></pre>\n"}], "owner": {"reputation": 2053, "user_id": 1581875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c4820fbcdf16fb5aa890353e3198582?s=128&d=identicon&r=PG&f=1", "display_name": "Olorin", "link": "https://stackoverflow.com/users/1581875/olorin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "accepted_answer_id": 43392716, "answer_count": 1, "score": 2, "last_activity_date": 1492097888, "creation_date": 1492015005, "last_edit_date": 1495540007, "question_id": 43375114, "link": "https://stackoverflow.com/questions/43375114/return-two-dimensional-array-to-excel-from-a-c-xll-the-come-back", "title": "Return two dimensional array to excel from a c++ xll, the come back", "body": "<p>First of all I know that the question was already asked here :</p>\n\n<p><a href=\"https://stackoverflow.com/questions/30533839/return-multi-dimension-array-to-excel-from-c-xll\">return multi dimension array to excel from c++ xll</a></p>\n\n<p>I have tried to revive the subject, without success. (The OP not being that active lately, never was.) That's why I am asking the question again, sorry in advance.</p>\n\n<p>I coded up a function returning a (row) one dimensional array :</p>\n\n<pre><code>__declspec(dllexport) LPXLOPER12 WINAPI Get1DArray(void)\n{\n    static XLOPER12 xlArray;\n    XLOPER12 xlValues[2];\n    xlValues[0].xltype = xltypeNum;\n    xlValues[1].xltype = xltypeNum;\n    xlValues[0].val.num = 123;\n    xlValues[1].val.num = 456;\n    xlArray.xltype = xltypeMulti | xlbitDLLFree;\n    xlArray.val.array.rows = 1;\n    xlArray.val.array.columns = 2;\n    xlArray.val.array.lparray = &amp;xlValues[0];\n    return static_cast&lt;LPXLOPER12&gt;(&amp;xlArray);\n}\n</code></pre>\n\n<p>that works. I tried the same wrong thing the OP from question I was mentionning above tried (that's how I came across the question of his).</p>\n\n<p>The only doc I have is the msdn for excel sdk, it did not help me. The function I coded, I used an example found on the web. Did not find any for two-dimensional array. I know Steve Dalton's books about xll, did not help.</p>\n\n<p>I suspect multidimensional <code>XLOPER12</code> arrays stock values in one-dimensional arrays, numbering by rows and columns or columns and rows, but did not succeed in exploiting this intuition...</p>\n\n<p>That's why I am here.</p>\n"}, {"tags": ["c++", "sfml", "2d-games"], "comments": [{"owner": {"reputation": 7357, "user_id": 416627, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ff79d2dc195bdd3d342235f21ccbead9?s=128&d=identicon&r=PG", "display_name": "Dave Rager", "link": "https://stackoverflow.com/users/416627/dave-rager"}, "edited": false, "score": 0, "creation_date": 1492014913, "post_id": 43375019, "comment_id": 73812455, "body": "<code>for (int i=0; i &lt; enemies.size(); i++)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 7829380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40371c9c92d08ac0d2928a54d0067326?s=128&d=identicon&r=PG&f=1", "display_name": "facundo rotger", "link": "https://stackoverflow.com/users/7829380/facundo-rotger"}, "edited": false, "score": 0, "creation_date": 1492025499, "post_id": 43375209, "comment_id": 73818254, "body": "ok that was the problem, thank you. but now the thing is that the &quot;enemies&quot; doesnt appear on the window, can you tell me whats wrong?"}, {"owner": {"reputation": 1518, "user_id": 2434628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f694c7757c0085ac1f0ed88d960ff657?s=128&d=identicon&r=PG", "display_name": "AresCaelum", "link": "https://stackoverflow.com/users/2434628/arescaelum"}, "reply_to_user": {"reputation": 55, "user_id": 7829380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40371c9c92d08ac0d2928a54d0067326?s=128&d=identicon&r=PG&f=1", "display_name": "facundo rotger", "link": "https://stackoverflow.com/users/7829380/facundo-rotger"}, "edited": false, "score": 0, "creation_date": 1492086615, "post_id": 43375209, "comment_id": 73845594, "body": "@facundorotger possibly because you call reset every frame?"}], "tags": [], "owner": {"reputation": 1088, "user_id": 4501035, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/90f6fd525f3b6f6f32b1649f24f49857?s=128&d=identicon&r=PG&f=1", "display_name": "Display name", "link": "https://stackoverflow.com/users/4501035/display-name"}, "is_accepted": true, "score": 2, "last_activity_date": 1492015349, "creation_date": 1492015349, "answer_id": 43375209, "question_id": 43375019, "link": "https://stackoverflow.com/questions/43375019/how-to-solve-this-arithmetic-exception/43375209#43375209", "title": "How to solve this &quot;arithmetic exception&quot;?", "body": "<p>Here's the problem. You forgot to use an inequality. enimies.size() will always return true (if there are any). But you really want i &lt; enemies.size().</p>\n\n<pre><code>void Game::reset(){\n   for (int i=0; i &lt; enemies.size(); i++){\n       enemies[i].reset(100.0f);\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 7829380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40371c9c92d08ac0d2928a54d0067326?s=128&d=identicon&r=PG&f=1", "display_name": "facundo rotger", "link": "https://stackoverflow.com/users/7829380/facundo-rotger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 43375209, "answer_count": 1, "score": 1, "last_activity_date": 1492088741, "creation_date": 1492014697, "last_edit_date": 1492088741, "question_id": 43375019, "link": "https://stackoverflow.com/questions/43375019/how-to-solve-this-arithmetic-exception", "title": "How to solve this &quot;arithmetic exception&quot;?", "body": "<p>Hi I am using SFML to develop a game and I am having problems with a function.</p>\n\n<p>this is the code:</p>\n\n<p>enemy.h:</p>\n\n<pre><code>    #ifndef ENEMY_H\n    #define ENEMY_H\n\n    #include&lt;SFML/Graphics.hpp&gt;\n\n    class Enemy {\n    private:\n     sf::Texture texture;\n     sf::Sprite enemySprite;\n\n     float enemySpeed;\n     int maxY, maxX;\n    public:\n     Enemy(int _maxY, int _maxX);\n     void render(sf::RenderWindow *wnd);\n     void update(sf::Time deltaTime);\n     void reset(float speed);\n    };\n\n    #endif\n</code></pre>\n\n<p>Enemy.cpp:</p>\n\n<pre><code>    #include &lt;ctime&gt;\n\n    Enemy::Enemy(int _maxY, int _maxX) {\n    texture.loadFromFile(\"SFML-Game-Development-Book-\n    master/03_World/Media/Textures/Raptor.png\");\n    enemySprite.setTexture(texture);\n    enemySprite.rotate(180);\n\n    maxY = _maxY;\n    maxX = _maxX;\n    }\n\n    void Enemy::render(sf::RenderWindow *wnd){\n    wnd-&gt;draw(enemySprite);\n    }\n\n    void Enemy::reset(float speed){\n    srand(time(NULL));\n    int num = rand();\n\n    enemySpeed = speed;\n\n    enemySprite.setPosition(num%maxX, maxY);\n    }\n\n    void Enemy::update(sf::Time deltaTime){\n    enemySprite.move(0.0f, enemySpeed * deltaTime.asSeconds());\n\n    if (enemySprite.getPosition().y &gt; 600){\n    reset(enemySpeed);\n    }\n    }\n</code></pre>\n\n<p>Game.h:</p>\n\n<pre><code>    class Game {\n    private:\n     sf::RenderWindow *mWindow;\n     Aircraft aircraft;\n     std::vector&lt;Enemy&gt; enemies;\n\n     void reset();\n   private:\n     void proccesEvent();\n     void update(sf::Time deltaTime);\n     void render();\n    public:\n   Game();\n   void run();\n   };\n</code></pre>\n\n<p>Game.cpp:</p>\n\n<pre><code>Game::Game(){\nmWindow = new sf::RenderWindow(sf::VideoMode(800,600), \"ventana SFML\"); \n\n   for (int i=0; i&lt;5; i++){\n       enemies.push_back(Enemy(800, 600));\n   }\n}\n\nvoid Game::proccesEvent(){\nsf::Event event;\n\nwhile(mWindow-&gt;pollEvent(event)){\n    if(event.type == sf::Event::Closed){\n        mWindow-&gt;close();\n    }\n  }\n}\n\nvoid Game::reset(){\n   for (int i=0; enemies.size(); i++){\n       enemies[i].reset(100.0f);\n   }\n}\n\nvoid Game::update(sf::Time deltaTime){\nif (sf::Keyboard::isKeyPressed(sf::Keyboard::W)){\n    aircraft.Up();\n}\nif (sf::Keyboard::isKeyPressed(sf::Keyboard::S)){\n    aircraft.Down();\n}\nif (sf::Keyboard::isKeyPressed(sf::Keyboard::A)){\n    aircraft.Left();\n}\nif (sf::Keyboard::isKeyPressed(sf::Keyboard::D)){\n    aircraft.Right();\n}\n\naircraft.update(deltaTime);\n\nfor (int i=0; i&lt;enemies.size(); i++){\n    enemies[i].update(deltaTime);\n}\n}\n\nvoid Game::render(){\nmWindow-&gt;clear();\naircraft.Render(mWindow);\nfor (int i=0; i&lt;enemies.size(); i++){\n    enemies[i].render(mWindow);\n}\nmWindow-&gt;display();\n}\n\nvoid Game::run(){\nsf::Clock clock;\nwhile(mWindow-&gt;isOpen()){\n    sf::Time deltaTime = clock.restart();\n\n    proccesEvent();\n    reset();\n    update(deltaTime);\n    render();\n}\n}\n</code></pre>\n\n<p>I think the problem is in the function reset that is in the class Enemy, because when I use the debugger it stop in that function.</p>\n\n<p>What is the problem and how can I solve it?</p>\n\n<p>The idea is that Enemy is a ship that moves in the Y-axis always down </p>\n"}, {"tags": ["c++", ".net", "xaml", "uwp"], "answers": [{"tags": [], "owner": {"reputation": 25248, "user_id": 7254781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FsIFV.jpg?s=128&g=1", "display_name": "Nico Zhu - MSFT", "link": "https://stackoverflow.com/users/7254781/nico-zhu-msft"}, "is_accepted": true, "score": 1, "last_activity_date": 1492077356, "creation_date": 1492077356, "answer_id": 43389072, "question_id": 43374918, "link": "https://stackoverflow.com/questions/43374918/cant-refer-to-a-custom-user-control/43389072#43389072", "title": "Can&#39;t refer to a custom user control", "body": "<p><strong>WPF/Silverlight/Windows Phone 8</strong> way: </p>\n\n<p><code>xmlns:controls=\"clr-namespace:MyApp.Controls\"</code> </p>\n\n<p><strong>WinRT/Universal App</strong> way:</p>\n\n<p><code>xmlns:controls=\"using:MyApp.Controls\"</code></p>\n\n<p>Using one platform's syntax will fail to compile on the other and vice versa. \nThere are small difference between \"clr-namespace and using\".This is discussed in greater detail in these two articles. <a href=\"https://msdn.microsoft.com/en-us/library/ms747086(v=vs.110).aspx\" rel=\"nofollow noreferrer\">XAML Namespaces and Namespace Mapping for WPF XAML</a> and <a href=\"https://docs.microsoft.com/en-us/windows/uwp/xaml-platform/xaml-namespaces-and-namespace-mapping\" rel=\"nofollow noreferrer\">XAML namespaces and namespace mapping</a>.</p>\n\n<p>Above all,you could change \"clr-namespace\" to \"using\" and delete any assembly token and semi-colon (the assembly will be inferred). The result looks like this:</p>\n\n<pre><code>  xmlns:cc=\"using:RefCustomControlTest\"\n</code></pre>\n\n<p>I have used the custom usercontrol like the following code and it working pretty well. </p>\n\n<pre><code>&lt;Grid Background=\"{ThemeResource ApplicationPageBackgroundThemeBrush}\"&gt;\n  &lt;cc:ColorPalette x:Name=\"test\" /&gt;\n&lt;/Grid&gt;\n</code></pre>\n"}], "owner": {"reputation": 5795, "user_id": 3253896, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fa6d2f73d0c32ee94e11661d94857fc8?s=128&d=identicon&r=PG", "display_name": "\u0428\u0430\u0445", "link": "https://stackoverflow.com/users/3253896/%d0%a8%d0%b0%d1%85"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 43389072, "answer_count": 1, "score": 0, "last_activity_date": 1492077356, "creation_date": 1492014386, "question_id": 43374918, "link": "https://stackoverflow.com/questions/43374918/cant-refer-to-a-custom-user-control", "title": "Can&#39;t refer to a custom user control", "body": "<p>I have a custom user control and I want to include it in the main page.<br>\n<strong>ColorPalette.xaml.h</strong> (It also includes <code>xaml</code> and <code>xaml.cpp</code> files, just I didn't post them)  </p>\n\n<pre><code>namespace Colibry\n{\n    namespace Views {\n        [Windows::Foundation::Metadata::WebHostHidden]\n        public ref class ColorPalette sealed\n        {\n        public:\n            ColorPalette();\n        };\n    }\n}\n</code></pre>\n\n<p><strong>MainPage.xaml</strong>  </p>\n\n<pre><code>&lt;Page\n    x:Class=\"Colibry.MainPage\"\n    xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"\n    xmlns:x=\"http://schemas.microsoft.com/winfx/2006/xaml\"\n    xmlns:local=\"using:Colibry\"\n    xmlns:d=\"http://schemas.microsoft.com/expression/blend/2008\"\n    xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\"\n    xmlns:cc=\"clr-namespace:Colibry.Views;assembly:Colibry\"\n    mc:Ignorable=\"d\"&gt;\n    &lt;Grid Background=\"{ThemeResource ApplicationPageBackgroundThemeBrush}\"&gt;\n        &lt;cc:ColorPalette&gt;&lt;/cc:ColorPalette&gt;\n    &lt;/Grid&gt;\n&lt;/Page&gt;\n</code></pre>\n\n<p>But <code>xmlns:cc=\"clr-namespace:Colibry.Views;assembly:Colibry\"</code> outputs an error:</p>\n\n<blockquote>\n  <p>\u0423\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0439 \u043a\u043e\u0434 \u0440\u0435\u0441\u0443\u0440\u0441\u0430 (URI) \"clr-namespace:Colibry.Views;assembly:Colibry\" \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u043c \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u043e\u043c \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u0430 \u0438\u043c\u0435\u043d.  Colibry E:\\Projects\\Colibry\\Colibry\\MainPage.xaml</p>\n</blockquote>\n\n<p>For Englishman:  </p>\n\n<blockquote>\n  <p>URI \"clr-namespace:Colibry.Views;assembly:Colibry\" is not available identifier of the name space. Colibry E:\\Projects\\Colibry\\Colibry\\MainPage.xaml</p>\n</blockquote>\n\n<p>How to fix it? Just I learn C++/XAML only.</p>\n"}, {"tags": ["c++", "cuda", "malloc", "free"], "comments": [{"owner": {"reputation": 142, "user_id": 1626024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75cfcbe35d809b8f787593db89c95616?s=128&d=identicon&r=PG", "display_name": "willkill07", "link": "https://stackoverflow.com/users/1626024/willkill07"}, "edited": false, "score": 0, "creation_date": 1492014469, "post_id": 43374883, "comment_id": 73812198, "body": "Can you provide your original code? the example you provide is not legal C++"}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1492014601, "post_id": 43374883, "comment_id": 73812277, "body": "try <code>int *bitmap[5];</code> instead of <code>int bitmap[5];</code>"}, {"owner": {"reputation": 161, "user_id": 4214120, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/26f91eb5796b06910548fd35fcd9b9e1?s=128&d=identicon&r=PG&f=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/4214120/edward"}, "reply_to_user": {"reputation": 142, "user_id": 1626024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75cfcbe35d809b8f787593db89c95616?s=128&d=identicon&r=PG", "display_name": "willkill07", "link": "https://stackoverflow.com/users/1626024/willkill07"}, "edited": false, "score": 0, "creation_date": 1492014618, "post_id": 43374883, "comment_id": 73812289, "body": "@willkill07 sorry for the sloppy code. I edited it and it should be legal C++ now"}, {"owner": {"reputation": 161, "user_id": 4214120, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/26f91eb5796b06910548fd35fcd9b9e1?s=128&d=identicon&r=PG&f=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/4214120/edward"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1492014684, "post_id": 43374883, "comment_id": 73812332, "body": "@RobertCrovella, sorry that was typo."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1492015016, "post_id": 43374883, "comment_id": 73812524, "body": "Please provide a complete code that someone else can compile without having to add anything or change anything.  For example, I don&#39;t know what <code>size</code> is.  Please don&#39;t just tell me what <code>size</code> is.  Please provide a <b>complete</b> code.  Such as a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  If you&#39;re not sure about it, copy the code you have posted, put it into a new empty project without adding anything else, and try to compile it.  When you get it to compile, then provide that code here."}, {"owner": {"reputation": 161, "user_id": 4214120, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/26f91eb5796b06910548fd35fcd9b9e1?s=128&d=identicon&r=PG&f=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/4214120/edward"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1492016041, "post_id": 43374883, "comment_id": 73813110, "body": "@RobertCrovella, the above code is executable now. However, the above code runs without problem. But in my code the problem still exists. I wonder why C++ operations new and delete[] works fine in my code but cuda host operation cause error. Is there any situation that may result in this?"}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1492016493, "post_id": 43374883, "comment_id": 73813394, "body": "I believe your range-based for is returning a temporary.  Try changing <code>auto</code> to <code>auto&amp;&amp;</code> in each range-based for"}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1492016827, "post_id": 43374883, "comment_id": 73813578, "body": "Isn&#39;t this just a scope problem? Trying to call API functions in the destructor of a main scope class when the context has already been destroyed?"}, {"owner": {"reputation": 161, "user_id": 4214120, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/26f91eb5796b06910548fd35fcd9b9e1?s=128&d=identicon&r=PG&f=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/4214120/edward"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1492016893, "post_id": 43374883, "comment_id": 73813624, "body": "@RobertCrovella, apologize one more time for the sloppy code. I was using a for loop and specified bitmap[i] in the original code. And as stated above, i tried to change to 5 variable but not an array but it didn&#39;t work. I added the code in the discription."}, {"owner": {"reputation": 161, "user_id": 4214120, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/26f91eb5796b06910548fd35fcd9b9e1?s=128&d=identicon&r=PG&f=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/4214120/edward"}, "reply_to_user": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1492017078, "post_id": 43374883, "comment_id": 73813713, "body": "@talonmies, when will the context destroy happen? I think I call free before the context destroyed?"}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 3, "creation_date": 1492020534, "post_id": 43374883, "comment_id": 73815534, "body": "I give up.  If I offer any more suggestions, you will tell me that this is not the code you are using and change it again.  I&#39;m not very good at hitting moving targets.  I suggest providing a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>  I can only conclude you have not done that."}, {"owner": {"reputation": 142, "user_id": 1626024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75cfcbe35d809b8f787593db89c95616?s=128&d=identicon&r=PG", "display_name": "willkill07", "link": "https://stackoverflow.com/users/1626024/willkill07"}, "edited": false, "score": 1, "creation_date": 1492028355, "post_id": 43374883, "comment_id": 73819929, "body": "Your example as provided works and is functionally correct. Your problem is somewhere else."}, {"owner": {"reputation": 161, "user_id": 4214120, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/26f91eb5796b06910548fd35fcd9b9e1?s=128&d=identicon&r=PG&f=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/4214120/edward"}, "reply_to_user": {"reputation": 142, "user_id": 1626024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75cfcbe35d809b8f787593db89c95616?s=128&d=identicon&r=PG", "display_name": "willkill07", "link": "https://stackoverflow.com/users/1626024/willkill07"}, "edited": false, "score": 0, "creation_date": 1492029890, "post_id": 43374883, "comment_id": 73820789, "body": "@willkill07 i solved the problem by initialize the pointer to zero at the beginning of for loop. don&#39;t how it works but it does. I did not change other part of the code. Thanks for replying!"}], "answers": [{"comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1492186439, "post_id": 43379313, "comment_id": 73889254, "body": "It&#39;s very unlikely that initializing the pointer is the cause of any problem you&#39;ve had with your code."}, {"owner": {"reputation": 161, "user_id": 4214120, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/26f91eb5796b06910548fd35fcd9b9e1?s=128&d=identicon&r=PG&f=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/4214120/edward"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1492193104, "post_id": 43379313, "comment_id": 73892541, "body": "@einpoklum, I know it sounds weird and cannot be explained. However, i did nothing to the pointer anywhere around the code. As stated in the question, I tried to allocate and deallocate the memory in the same function but there are still errors when i free the memory (no error in other parts of the code). If something else is wrong in the code, i think there should be errors in other parts of the code. The error did not occur if i initialize the pointer to zero,  both on GTX970 and 1080 with cuda 7. I am also eager to know why this happens. Thanks."}], "tags": [], "owner": {"reputation": 161, "user_id": 4214120, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/26f91eb5796b06910548fd35fcd9b9e1?s=128&d=identicon&r=PG&f=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/4214120/edward"}, "is_accepted": false, "score": -2, "last_activity_date": 1492090720, "last_edit_date": 1492090720, "creation_date": 1492029804, "answer_id": 43379313, "question_id": 43374883, "link": "https://stackoverflow.com/questions/43374883/cudafreehost-invalid-arguments-error/43379313#43379313", "title": "cudaFreeHost() invalid arguments error", "body": "<p>The problem is solved by first initialize the point to zero before allocate the memory, i.e. add bitmap[i] = 0 at the beginning of the for loop.\nNot really sure how this effects the result but it works.</p>\n"}], "owner": {"reputation": 161, "user_id": 4214120, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/26f91eb5796b06910548fd35fcd9b9e1?s=128&d=identicon&r=PG&f=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/4214120/edward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 556, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1492090720, "creation_date": 1492014266, "last_edit_date": 1492016963, "question_id": 43374883, "link": "https://stackoverflow.com/questions/43374883/cudafreehost-invalid-arguments-error", "title": "cudaFreeHost() invalid arguments error", "body": "<p>I am using <code>cudaMallocHost()</code> with <code>cudaFreeHost()</code> in a class. An example of my code:</p>\n\n<pre><code>#include \"cuda.h\"\n#include \"cuda_runtime.h\"\n\nclass myClass{\npublic:\n    int* bitmap[5];\n    void Malloc(){\n        for ( int i = 0 ; i &lt; 5 ; i++){\n            cudaMallocHost(&amp;bitmap[i], sizeof(int)*10000);\n            memset(bitmap[i], 0, sizeof(int)*10000);\n        }\n    }\n    void Delete(){\n        for ( int i = 0 ; i &lt; 5; i++){\n            cudaFreeHost(bitmap[i]);\n        }\n    }\n};\nint main(){\n    myClass mc;\n    mc.Malloc();\n    //copy 'bitmap[]' to gpu and call some kernel function\n    cudaDeviceSynchronize();\n    mc.Delete();\n}\n</code></pre>\n\n<p>The above code return error invalid arguments (value 11) when calling <code>cudaFreeHost()</code>, <code>cudaFreeHost</code> returns no error.</p>\n\n<p>I tried to change to array of pointer into different variable but the errors still occur. I even put the <code>cudaFreeHost()</code> right after <code>cudaMallocHost()</code> but there are still errors.</p>\n\n<p>I verified that the error does not occur every time when I call <code>cudaFreeHost()</code>.</p>\n\n<p>The <code>cudaDeviceSynchronize()</code> is added to ensure all the copy operations are done.</p>\n\n<p>If I change all cudaHost opration into normal operation (i.e. new and delete), the program works fine.</p>\n\n<p>I tried to change each variable in bitmap to b1, b2, b3, b4, b5 as following, but same error occurs.</p>\n\n<pre><code>cudaMallocHost(&amp;b1, sizeof(int) * 10000);\ncudaFreeHost(b1);\n</code></pre>\n"}, {"tags": ["c++", "c++14"], "comments": [{"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1492014251, "post_id": 43374729, "comment_id": 73812056, "body": "If B implements the function and C derives from B, then why do you need to override it in C?"}, {"owner": {"reputation": 5508, "user_id": 498424, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ig1qY.jpg?s=128&g=1", "display_name": "Raxvan", "link": "https://stackoverflow.com/users/498424/raxvan"}, "edited": false, "score": 0, "creation_date": 1492014462, "post_id": 43374729, "comment_id": 73812193, "body": "one solution is to add a template parameter to B and inherit from that one. then <code>C</code> becomes <code>class C: public B&lt;A&gt;</code>"}, {"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 0, "creation_date": 1492014665, "post_id": 43374729, "comment_id": 73812318, "body": "Just to clarify, you want to use <code>B</code>&#39;s non-virtual implementations to implement a virtual interface provide by <code>A</code>?"}, {"owner": {"reputation": 1641, "user_id": 799887, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9e6bb5d36fd7a4d6c0f324700fc8cbcb?s=128&d=identicon&r=PG", "display_name": "Grief", "link": "https://stackoverflow.com/users/799887/grief"}, "reply_to_user": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 0, "creation_date": 1492014876, "post_id": 43374729, "comment_id": 73812440, "body": "@MarkB exactly!"}, {"owner": {"reputation": 1641, "user_id": 799887, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9e6bb5d36fd7a4d6c0f324700fc8cbcb?s=128&d=identicon&r=PG", "display_name": "Grief", "link": "https://stackoverflow.com/users/799887/grief"}, "reply_to_user": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1492015451, "post_id": 43374729, "comment_id": 73812776, "body": "@AnonMail to be able to do <code>A* a = new C(); a-&gt;test();</code>"}, {"owner": {"reputation": 1641, "user_id": 799887, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9e6bb5d36fd7a4d6c0f324700fc8cbcb?s=128&d=identicon&r=PG", "display_name": "Grief", "link": "https://stackoverflow.com/users/799887/grief"}, "reply_to_user": {"reputation": 5508, "user_id": 498424, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ig1qY.jpg?s=128&g=1", "display_name": "Raxvan", "link": "https://stackoverflow.com/users/498424/raxvan"}, "edited": false, "score": 0, "creation_date": 1492015489, "post_id": 43374729, "comment_id": 73812796, "body": "@Raxvan I cannot modify <code>B</code>"}, {"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1492016159, "post_id": 43374729, "comment_id": 73813178, "body": "@Grief what is the motivation to do this?"}, {"owner": {"reputation": 1641, "user_id": 799887, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9e6bb5d36fd7a4d6c0f324700fc8cbcb?s=128&d=identicon&r=PG", "display_name": "Grief", "link": "https://stackoverflow.com/users/799887/grief"}, "reply_to_user": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1492016452, "post_id": 43374729, "comment_id": 73813366, "body": "@AnonMail I&#39;ve updated the question with an example of real code."}], "answers": [{"comments": [{"owner": {"reputation": 1641, "user_id": 799887, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9e6bb5d36fd7a4d6c0f324700fc8cbcb?s=128&d=identicon&r=PG", "display_name": "Grief", "link": "https://stackoverflow.com/users/799887/grief"}, "edited": false, "score": 0, "creation_date": 1492047533, "post_id": 43375081, "comment_id": 73826367, "body": "Nice! It took some time for me to understand CRTP but it seems that it perfectly fits. Your answer advances the question: I didn&#39;t see the wood for the trees, while the approach you suggest doesn&#39;t reduce the amount of code mentioned in the question (even increases it a bit), it definitely helps with the more serious problem - classes that are derived from QWidget e.g. QLabel, QMenu etc. I&#39;d prefer to keep template magic in one place, so I&#39;d leave base interface. Now, when I understood how bigger the code duplication could be it looks fine for me - I&#39;ll write some macros."}], "tags": [], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": true, "score": 2, "last_activity_date": 1492020770, "last_edit_date": 1492020770, "creation_date": 1492014876, "answer_id": 43375081, "question_id": 43374729, "link": "https://stackoverflow.com/questions/43374729/how-to-bind-pure-virtual-methods-form-class-a-to-methods-of-class-b-in-child-of/43375081#43375081", "title": "How to bind pure virtual methods form class A to methods of class B in child of both without lots of code?", "body": "<p>Note that as a result of the OP's question update I totally threw away my original answer and replaced it with this one.</p>\n\n<p>I don't see a way to avoid spelling out all the functions in an interface but you <em>can</em> make all the delegation happen once in a CRTP base class rather than delegating from the child upwards. If your code is suitably templated already you can even remove the pure virtual base interface and work only with the CRTP base.</p>\n\n<pre><code>class MyControl\n{\npublic:\n    virtual void show() = 0;\n};\n\ntemplate &lt;typename Child, typename Impl&gt;\nclass MyControlInterposer : public MyControl\n{\n    void show() override { static_cast&lt;Impl*&gt;(static_cast&lt;Child*&gt;(this))-&gt;show(); }\n};\n\nclass QWidget\n{\npublic:\n    void show()\n    {\n        std::cout &lt;&lt; \"QWidget::show()\" &lt;&lt; std::endl;\n    }\n};\n\nclass QAction\n{\n};\n\nclass WidgetControl: public MyControlInterposer&lt;WidgetControl, QWidget&gt;, public QWidget\n{\npublic:\n    WidgetControl(): MyControlInterposer(), QWidget() {}\n};\n\nclass ActionControl: public MyControlInterposer&lt;ActionControl, ActionControl&gt;, public QAction\n{\npublic:\n    ActionControl(): MyControlInterposer(), QAction() {}\npublic:\n    void show() {\n        // do another actions, since QAction cannot show() and hide(). Instead it's possible to remove or add it to parent QMenu\n        std::cout &lt;&lt; \"ActionControl::show()\" &lt;&lt; std::endl;\n    }\n};\n\nint main()\n{\n    MyControl* control1 = new WidgetControl();\n    MyControl* control2 = new ActionControl();\n    control1-&gt;show();\n    control2-&gt;show();\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>QWidget::show()\nActionControl::show()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1641, "user_id": 799887, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9e6bb5d36fd7a4d6c0f324700fc8cbcb?s=128&d=identicon&r=PG", "display_name": "Grief", "link": "https://stackoverflow.com/users/799887/grief"}, "edited": false, "score": 0, "creation_date": 1492047523, "post_id": 43376038, "comment_id": 73826364, "body": "I tried to understand how it works under the hood but for me it looks even darker than Alexandrescu&#39;s black magic. It drives CLion (IDE) crazy, <code>BOOST_TYPE_ERASURE_MEMBER</code> got underlined with red right away. GCC error messages around are unclear and what is probably most important - the type <code>any&lt;has_show&lt;void()&gt; &gt;</code> not only becomes named longer when there are tens of has_members but also is not flexible enough without other boost-templated code. I must admit, it works and it might be useful in some cases, but not in mine, sorry. I&#39;ll upvote yours but accept Mark&#39;s answer."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 2, "last_activity_date": 1492018216, "creation_date": 1492018216, "answer_id": 43376038, "question_id": 43374729, "link": "https://stackoverflow.com/questions/43374729/how-to-bind-pure-virtual-methods-form-class-a-to-methods-of-class-b-in-child-of/43376038#43376038", "title": "How to bind pure virtual methods form class A to methods of class B in child of both without lots of code?", "body": "<p>Instead of using dynamic polymorphism like this:</p>\n\n<pre><code>class MyControl {\npublic:\n    virtual void show() = 0;\n};\n</code></pre>\n\n<p>which requires you to add an extra child off of a lot of other types that already meet the concept you're trying to establish, I would suggest a different approach. Let's try <em>static</em> polymorphism. Basically, instead of using a pointer to polymorphic base class to erase the type, we're going to have an object that erases the type - which would let us use this new \"base\" class with 3rd party libraries that don't conveniently implement our interface using traditional OOP methods.</p>\n\n<p>With <a href=\"http://www.boost.org/doc/libs/1_63_0/doc/html/boost_typeerasure/basic.html\" rel=\"nofollow noreferrer\">Boost.TypeErasure</a>, this would look something like:</p>\n\n<pre><code>BOOST_TYPE_ERASURE_MEMBER((has_show), show, 0)\nusing MyControl = any&lt;has_show&lt;void()&gt;&gt;;\n</code></pre>\n\n<p>This let's me add anything into <code>MyControl</code> that has some member function named <code>show</code> that takes no arguments, like:</p>\n\n<pre><code>MyControl c1 = QWidget();\nc1.show(); // calls QWidget::show()\n</code></pre>\n\n<p><code>c1</code> here owns the <code>QWidget</code>, it has value semantics, although there are ways to do it differently - the library has many many features. </p>\n\n<p>You still have to manually provide a list of signatures into <code>any&lt;&gt;</code>, but at least you don't have to introduce a ton of types solely to meet your polymorphic requirements. </p>\n"}], "owner": {"reputation": 1641, "user_id": 799887, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9e6bb5d36fd7a4d6c0f324700fc8cbcb?s=128&d=identicon&r=PG", "display_name": "Grief", "link": "https://stackoverflow.com/users/799887/grief"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 43375081, "answer_count": 2, "score": 1, "last_activity_date": 1492020770, "creation_date": 1492013789, "last_edit_date": 1492016424, "question_id": 43374729, "link": "https://stackoverflow.com/questions/43374729/how-to-bind-pure-virtual-methods-form-class-a-to-methods-of-class-b-in-child-of", "title": "How to bind pure virtual methods form class A to methods of class B in child of both without lots of code?", "body": "<p>I have several pairs of classes in two separate projects (Qt and another one) and one class in the every pair contains several tens of pure virtual functions while the other class in pair has several tens of methods with exactly the same methods but those methods are not derived because the classes are in different projects. For example:</p>\n\n<pre><code>class A {\npublic:\n    virtual void test() = 0;\n};\n\nclass B {\npublic:\n    void test() {\n        cout &lt;&lt; \"ok\" &lt;&lt; endl;\n    }\n};\n</code></pre>\n\n<p>What I need is a class which can act as A and B at the same time:</p>\n\n<pre><code>class C: public A, public B {\npublic:\n    void test() override { B::test(); }\n};\n</code></pre>\n\n<p>The issue I'd like to solve is that there are hundreds of methods so the code looks like </p>\n\n<pre><code>void test1() override { B::test1(); }\nvoid test_another() override { B::test_another(); }\nvoid foobar(int param1, int param2) override { B::foobar(param1, param2); \n</code></pre>\n\n<p>And I'd like to avoid this redundant code. Of course, I can write a macro but this macro must be still called for every of these methods. Is there any way to achieve shorter code? I cannot modify class <code>B</code> but have an ability to do modifications in <code>A</code>.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Here is some actual code:</p>\n\n<pre><code>class MyControl {\npublic:\n    virtual void show() = 0;\n};\n\nclass WidgetControl: public MyControl, public QWidget {\npublic:\n    WidgetControl(): MyControl(), QWidget() {}\npublic:\n    void show() override {QWidget::show();} //&lt;- there is not only show(), but almost all other methods\n};\n\nclass ActionControl: public MyControl, public QAction {\npublic:\n    ActionControl(): MyControl(), QAction() {}\npublic:\n    void show() override {\n        // do another actions, since QAction cannot show() and hide(). Instead it's possible to remove or add it to parent QMenu\n    }\n};\n\nint main() {\n    MyControl* control1 = new WidgetControl();\n    MyControl* control2 = new ActionControl();\n    control1-&gt;show();\n    control2-&gt;show();\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "crash", "ifstream"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1492014078, "post_id": 43374699, "comment_id": 73811950, "body": "Which line produces the error? Run your project with a debugger to see what happens. Since you are using Visual Studio, go to the Debug menu and click Start Debugging."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1492019086, "post_id": 43374699, "comment_id": 73814734, "body": "Since you seem to be using global variables, you might be suffering from <a href=\"http://stackoverflow.com/questions/3035422/static-initialization-order-fiasco\">the static initialization order fiasco</a>."}, {"owner": {"reputation": 21, "user_id": 5951746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dcbb07ec8a528f56cb8d978d939b3b1?s=128&d=identicon&r=PG&f=1", "display_name": "olivier magana", "link": "https://stackoverflow.com/users/5951746/olivier-magana"}, "edited": false, "score": 0, "creation_date": 1492067887, "post_id": 43374699, "comment_id": 73833175, "body": "Actually I&#39;m using Qt. the class I wrote on visual studio but imported it on Qt. I&#39;m gonna check that link thanks a lot. The thing is I need to create different objects of that class, but I can&#39;t store those objects if the ifstream is set as an attribute, thats why  I used a global variable."}, {"owner": {"reputation": 21, "user_id": 5951746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dcbb07ec8a528f56cb8d978d939b3b1?s=128&d=identicon&r=PG&f=1", "display_name": "olivier magana", "link": "https://stackoverflow.com/users/5951746/olivier-magana"}, "edited": false, "score": 0, "creation_date": 1492069340, "post_id": 43374699, "comment_id": 73834025, "body": "I just tried to put the ifstream in the attributes of the class, since I am not yet to the part where I create objects of that class, and there is the same problem. I tried to debug also, but it craashes before even starting , and I get the following message :&quot;During startup program exited with code 0x0000135&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 5951746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dcbb07ec8a528f56cb8d978d939b3b1?s=128&d=identicon&r=PG&f=1", "display_name": "olivier magana", "link": "https://stackoverflow.com/users/5951746/olivier-magana"}, "is_accepted": true, "score": 0, "last_activity_date": 1492070188, "creation_date": 1492070188, "answer_id": 43386584, "question_id": 43374699, "link": "https://stackoverflow.com/questions/43374699/my-qt-program-compiles-but-crashes-when-i-use-ifstream-in-declarations/43386584#43386584", "title": "My Qt program compiles but crashes when I use ifstream in declarations", "body": "<p>I Found out my problem, even if and don't see how it is related to ifstream. I needed to add the .dll files of openCV in the directory, I forgot to put them back. Therefore it compiled, but crashed at Startup. Hopes this helps !\nAnd thanks for the help anyway :)</p>\n"}], "owner": {"reputation": 21, "user_id": 5951746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dcbb07ec8a528f56cb8d978d939b3b1?s=128&d=identicon&r=PG&f=1", "display_name": "olivier magana", "link": "https://stackoverflow.com/users/5951746/olivier-magana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 43386584, "answer_count": 1, "score": 0, "last_activity_date": 1492070188, "creation_date": 1492013690, "question_id": 43374699, "link": "https://stackoverflow.com/questions/43374699/my-qt-program-compiles-but-crashes-when-i-use-ifstream-in-declarations", "title": "My Qt program compiles but crashes when I use ifstream in declarations", "body": "<p>I am currently trying to create a GUI on Qt for a program I wrote on visual studio. In vs there is no problem when I run the code. </p>\n\n<p>I created a window that works well in Qt, and then I decided just to add a class from visual studio. I added them in the project, and compiled. There are no errors during the compilation. But then when I try to run the program, it crashes before being displayed with the following message : \"The program has unexpectedly finished.\" even though I don't actually call any methods from that class. </p>\n\n<p>It seems that if I take out all the parts of my code that uses the ifstream File, the it doesnt crash.</p>\n\n<p>Here is the full cpp code from that class : </p>\n\n<pre><code>#include \"tableManager.h\"\n\nifstream ifsFile;    // Stream du fichier en lecture\n\ntableManager::tableManager(void)\n{\n    setTypeS();\n}\n\ntableManager::tableManager(string fileN)\n{\n    setTypeS();\n    openFile(fileN);\n}\n\n\ntableManager::~tableManager(void)\n{\n    ifsFile.close();\n}\nstring tableManager::getFileName()\n{\n    return fileName;\n}\n\nint tableManager::getNbrTables()\n{\n    return nbrTables;\n}\n\nint tableManager::getTypeData(int i)\n{\n    return typeData[i];\n}\n\nstring tableManager::getTypeDataS(int i)\n{\n    return typeDataS[typeData[i]];\n}\n\nstring tableManager::getName(int i)\n{\n    return name[i];\n}\n\nint tableManager::getNbrL(int i)\n{\n    return nbrL[i];\n}\n\nint tableManager::getNbrC(int i)\n{\n    return nbrC[i];\n}\n\nint tableManager::openFile(string fileN)\n{\n\n    fileName = fileN;\n    ifsFile.open(fileName, ios::in | ios::binary);\n    if(ifsFile.is_open())\n    {\n        std::cout &lt;&lt; \"Lecture du fichier binaire\" &lt;&lt; endl &lt;&lt; endl;\n        nbrTables = readNbrTables();\n        for(int i = 0; i &lt; nbrTables; i++)\n        {\n            std::cout &lt;&lt; endl;\n            typeData[i] = readTypeData(i);\n            name[i] = readTableName(i);\n            labelP.push_back(name[i]);\n            nbrL[i] = readNbrL(i);\n            nbrC[i] = readNbrC(i);\n\n            if(!readDataOCV(i))\n            {\n                std::cout &lt;&lt; \"Les donnees n'ont pu etre chargees\" &lt;&lt; endl;\n                return 0;\n                break;\n            }\n        }\n    }\n    else\n    {\n        std::cout &lt;&lt; \"Erreur de lecture du fichier binaire\" &lt;&lt; endl;\n        return 0;\n    }\n    std::cout &lt;&lt; endl;\n    return 1;\n}\n\nint tableManager::setTypeS()\n{\n    typeDataS[0] = \"char\";\n    typeDataS[1] = \"unsigned char\";\n    typeDataS[2] = \"short\";\n    typeDataS[3] = \"unsigned short\";\n    typeDataS[4] = \"integer\";\n    typeDataS[5] = \"unsigned integer\";\n    typeDataS[6] = \"float\";\n    typeDataS[7] = \"double\";\n    typeDataS[8] = \"MAC adress\";\n    return 1;\n}\n\nuint32_t tableManager::readNbrTables()\n{\n    uint32_t a;\n    ifsFile.read(reinterpret_cast&lt;char *&gt;(&amp;a), sizeof(a));\n    std::cout &lt;&lt; \"Nbr de tables : \" &lt;&lt; a &lt;&lt; endl;\n    return a;\n}\n\nuint32_t tableManager::readTypeData(int k)\n{\n    uint32_t a;\n    ifsFile.read(reinterpret_cast&lt;char *&gt;(&amp;a), sizeof(a));\n    std::cout &lt;&lt; \"Type de donnees de la \" &lt;&lt; (k+1) &lt;&lt; \"e table : \" &lt;&lt; a - 1 &lt;&lt; \" --&gt; \" &lt;&lt; typeDataS[a - 1] &lt;&lt; endl;\n    return (a - 1);\n}\n\nstring tableManager::readTableName(int i)\n{\n    uint32_t a;\n    ifsFile.read(reinterpret_cast&lt;char *&gt;(&amp;a), sizeof(a));\n    nameLength[i] = a;\n    string nameTmp;\n    char c;\n    for(int l = 0; l &lt; a; l ++)\n    {\n        ifsFile.read(&amp;c, sizeof(c));\n        nameTmp += c;\n    }\n    std::cout &lt;&lt; \"Le nom de la \" &lt;&lt; (i + 1) &lt;&lt; \"e table : \" &lt;&lt; nameTmp &lt;&lt; endl;\n    return nameTmp;\n}\n\nuint32_t tableManager::readNbrL(int j)\n{\n    uint32_t a;\n    ifsFile.read(reinterpret_cast&lt;char *&gt;(&amp;a), sizeof(a));\n    std::cout &lt;&lt; \"Nbr de lignes de la \" &lt;&lt; (j+1) &lt;&lt; \"e table : \" &lt;&lt; a &lt;&lt; endl;\n    return a;\n}\n\nuint32_t tableManager::readNbrC(int l)\n{\n    uint32_t a;\n    ifsFile.read(reinterpret_cast&lt;char *&gt;(&amp;a), sizeof(a));\n    std::cout &lt;&lt; \"Nbr de colonnes de la \" &lt;&lt; (l+1) &lt;&lt; \"e table : \" &lt;&lt; a &lt;&lt; endl;\n    return a;\n}\n\n\nvector&lt;Mat&gt; tableManager::getDataP()\n{\n    return dataP;\n}\nvector&lt;string&gt; tableManager::getLabelP()\n{\n    return labelP;\n}\n\nint tableManager::readDataOCV(int m)\n{\n    int cpt = 0;\n    int total = nbrC[m]*nbrL[m];\n    if(typeData[m]==8) nbrL[m]=6;\n    Mat tmpM(Size(nbrC[m], nbrL[m]), CV_64FC1);\n\n    switch (typeData[m])\n    {\n    case 0:\n        char x0;\n        tmpM.empty();\n        for(int n = 0; n &lt; nbrC[m]; n++)\n        {\n            for(int o = 0; o &lt; nbrL[m]; o++)\n            {\n                ifsFile.read(reinterpret_cast&lt;char *&gt;(&amp;x0), sizeof(x0));\n                tmpM.at&lt;double&gt;(Point(n,o)) = x0;\n                cpt++;\n            }\n        }\n        dataP.push_back(tmpM);\n        std::cout &lt;&lt; \"Les \" &lt;&lt; cpt &lt;&lt; \"/\" &lt;&lt; total &lt;&lt; \" donnees ont ete chargees avec succes\" &lt;&lt; endl;\n        break;\n    case 1:\n        unsigned char x1;\n        tmpM.empty();\n        for(int n = 0; n &lt; nbrC[m]; n++)\n        {\n            for(int o = 0; o &lt; nbrL[m]; o++)\n            {\n                ifsFile.read(reinterpret_cast&lt;char *&gt;(&amp;x1), sizeof(x1));\n                tmpM.at&lt;double&gt;(Point(n,o)) = x1;\n                cpt++;\n            }\n        }\n        dataP.push_back(tmpM);\n        std::cout &lt;&lt; \"Les \" &lt;&lt; cpt &lt;&lt; \"/\" &lt;&lt; total &lt;&lt; \" donnees ont ete chargees avec succes\" &lt;&lt; endl;\n        break;\n    case 2:\n        short x2;\n        tmpM.empty();\n        for(int n = 0; n &lt; nbrC[m]; n++)\n        {\n            for(int o = 0; o &lt; nbrL[m]; o++)\n            {\n                ifsFile.read(reinterpret_cast&lt;char *&gt;(&amp;x2), sizeof(x2));\n                tmpM.at&lt;double&gt;(Point(n,o)) = x2;\n                cpt++;\n            }\n        }\n        dataP.push_back(tmpM);\n        std::cout &lt;&lt; \"Les \" &lt;&lt; cpt &lt;&lt; \"/\" &lt;&lt; total &lt;&lt; \" donnees ont ete chargees avec succes\" &lt;&lt; endl;\n        break;\n    case 3:\n        unsigned short x3;\n        tmpM.empty();\n        for(int n = 0; n &lt; nbrC[m]; n++)\n        {\n            for(int o = 0; o &lt; nbrL[m]; o++)\n            {\n                ifsFile.read(reinterpret_cast&lt;char *&gt;(&amp;x3), sizeof(x3));\n                tmpM.at&lt;double&gt;(Point(n,o)) = x3;\n                cpt++;\n            }\n        }\n        dataP.push_back(tmpM);\n        std::cout &lt;&lt; \"Les \" &lt;&lt; cpt &lt;&lt; \"/\" &lt;&lt; total &lt;&lt; \" donnees ont ete chargees avec succes\" &lt;&lt; endl;\n        break;\n    case 4:\n        int x4;\n        tmpM.empty();\n        for(int n = 0; n &lt; nbrC[m]; n++)\n        {\n            for(int o = 0; o &lt; nbrL[m]; o++)\n            {\n                ifsFile.read(reinterpret_cast&lt;char *&gt;(&amp;x4), sizeof(x4));\n                tmpM.at&lt;double&gt;(Point(n,o)) = x4;\n                cpt++;\n            }\n        }\n        dataP.push_back(tmpM);\n        std::cout &lt;&lt; \"Les \" &lt;&lt; cpt &lt;&lt; \"/\" &lt;&lt; total &lt;&lt; \" donnees ont ete chargees avec succes\" &lt;&lt; endl;\n        break;\n    case 5:\n        unsigned int x5;\n        tmpM.empty();\n        for(int n = 0; n &lt; nbrC[m]; n++)\n        {\n            for(int o = 0; o &lt; nbrL[m]; o++)\n            {\n                ifsFile.read(reinterpret_cast&lt;char *&gt;(&amp;x5), sizeof(x5));\n                tmpM.at&lt;double&gt;(Point(n,o)) = x5;\n                cpt++;\n            }\n        }\n        dataP.push_back(tmpM);\n        std::cout &lt;&lt; \"Les \" &lt;&lt; cpt &lt;&lt; \"/\" &lt;&lt; total &lt;&lt; \" donnees ont ete chargees avec succes\" &lt;&lt; endl;\n        break;\n    case 6:\n        float x6;\n        tmpM.empty();\n        for(int n = 0; n &lt; nbrC[m]; n++)\n        {\n            for(int o = 0; o &lt; nbrL[m]; o++)\n            {\n                //cout &lt;&lt; \"test 1\" &lt;&lt;endl;\n                ifsFile.read(reinterpret_cast&lt;char *&gt;(&amp;x6), sizeof(x6));\n                //cout &lt;&lt; \"test 2\" &lt;&lt; endl;\n                tmpM.at&lt;double&gt;(Point(n,o)) = x6;\n                cpt++;\n                //cout &lt;&lt; \"test 3\" &lt;&lt; endl;\n            }\n        }\n        dataP.push_back(tmpM);\n        std::cout &lt;&lt; \"Les \" &lt;&lt; cpt &lt;&lt; \"/\" &lt;&lt; total &lt;&lt; \" donnees ont ete chargees avec succes\" &lt;&lt; endl;\n        break;\n    case 7:\n        double x7;\n        tmpM.empty();\n        for(int n = 0; n &lt; nbrC[m]; n++)\n        {\n            for(int o = 0; o &lt; nbrL[m]; o++)\n            {\n                ifsFile.read(reinterpret_cast&lt;char *&gt;(&amp;x7), sizeof(x7));\n                tmpM.at&lt;double&gt;(Point(n,o)) = x7;\n                cpt++;\n            }\n        }\n        dataP.push_back(tmpM);\n        std::cout &lt;&lt; \"Les \" &lt;&lt; cpt &lt;&lt; \"/\" &lt;&lt; total &lt;&lt; \" donnees ont ete chargees avec succes\" &lt;&lt; endl;\n        break;\n    case 8:\n        uint8_t x8;\n        tmpM.empty();\n        for(int n = 0; n &lt; nbrC[m]; n++)\n        {\n            for(int o = 0; o &lt; nbrL[m]; o++)\n            {\n                ifsFile.read(reinterpret_cast&lt;char *&gt;(&amp;x8), sizeof(x8));\n                tmpM.at&lt;double&gt;(Point(n,o)) = x8;\n            }\n        }\n        dataP.push_back(tmpM);\n        std::cout &lt;&lt; \"Les \" &lt;&lt; cpt &lt;&lt; \"/\" &lt;&lt; total &lt;&lt; \" donnees ont ete chargees avec succes\" &lt;&lt; endl;\n        break;\n    default:\n        std::cout &lt;&lt; \"Erreur de lecture des donn\ufffdes, type non d\ufffdfini\";\n        return 0;\n        break;\n    }\n    return 1;\n}\n</code></pre>\n\n<p>As I said if I take out the functions that use the ifstream, it runs correctly. And if I don't, it compiles, but crashes at execution.</p>\n\n<p>Thanks a lot for your answers if you find any !</p>\n"}, {"tags": ["c++", "templates", "object", "member", "accessor"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 6, "creation_date": 1492013301, "post_id": 43374441, "comment_id": 73811494, "body": "Actual, <i>real</i>, class declarations for <code>Struct</code>, <code>Obj</code>, and anything containing vectors of said-same, as well as a simple accessor sample of what you&#39;re trying (but not succeeding) in doing, would do <i>wonders</i> in making this question clear."}], "answers": [{"tags": [], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": true, "score": 0, "last_activity_date": 1492013835, "creation_date": 1492013835, "answer_id": 43374748, "question_id": 43374441, "link": "https://stackoverflow.com/questions/43374441/how-to-access-members-of-a-template-class/43374748#43374748", "title": "How to access members of a template class", "body": "<p>So it looks like you have this:</p>\n\n<pre><code>struct Obj\n{\n    int x_;\n};\n\ntemplate &lt;typename T&gt;\nstruct Struct\n{\n    std::vector&lt;T&gt; items_;\n};\n</code></pre>\n\n<p>So to access an element (assuming you added it to the vector):</p>\n\n<pre><code>int main()\n{\n    Struct s;\n    s.items_.resize(10);\n    s.items_[0].x_ = 5; // Access the object memeber of element 0 in the vector.\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7529893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03e71942fa5768189fbdb92564c1c2a0?s=128&d=identicon&r=PG&f=1", "display_name": "Mot", "link": "https://stackoverflow.com/users/7529893/mot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "closed_date": 1492015168, "accepted_answer_id": 43374748, "answer_count": 1, "score": -6, "last_activity_date": 1492014062, "creation_date": 1492012858, "last_edit_date": 1492014062, "question_id": 43374441, "link": "https://stackoverflow.com/questions/43374441/how-to-access-members-of-a-template-class", "closed_reason": "Needs details or clarity", "title": "How to access members of a template class", "body": "<p>In C++, vector works such that if I instantiate a vector, of type Obj for example, I can access the members of an Obj with the dot accessor by specifying the element.  I'm trying to do the same thing with a template <code>&lt;class T&gt; struct</code>.</p>\n\n<p>How can I access the Obj members of a struct, a <code>template &lt;class T&gt; Struct</code> containing a <code>vector&lt;T&gt;</code> for example, instantiated as <code>Struct&lt;Obj&gt;</code>.  </p>\n\n<p>If I'm on the wrong track, what's the alternative?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1492012530, "post_id": 43374294, "comment_id": 73810957, "body": "Don&#39;t forget your <code>break;</code>s or execution will fall through the next <code>case</code>."}, {"owner": {"reputation": 1596, "user_id": 2548287, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mBqgl.png?s=128&g=1", "display_name": "Gizmo", "link": "https://stackoverflow.com/users/2548287/gizmo"}, "edited": false, "score": 0, "creation_date": 1492012562, "post_id": 43374294, "comment_id": 73810984, "body": "Don&#39;t worry about <code>switch</code> performance... If this is not about performance but &#39;nice looking code&#39;, what about using <code>setvisible(condition_here)</code> ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7751065"}, "reply_to_user": {"reputation": 1596, "user_id": 2548287, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mBqgl.png?s=128&g=1", "display_name": "Gizmo", "link": "https://stackoverflow.com/users/2548287/gizmo"}, "edited": false, "score": 0, "creation_date": 1492012834, "post_id": 43374294, "comment_id": 73811168, "body": "@Gizmo: I did not understand."}, {"owner": {"reputation": 1596, "user_id": 2548287, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mBqgl.png?s=128&g=1", "display_name": "Gizmo", "link": "https://stackoverflow.com/users/2548287/gizmo"}, "edited": false, "score": 0, "creation_date": 1492012948, "post_id": 43374294, "comment_id": 73811242, "body": "@vinayrajputh <code>button2-&gt;setvisible(input != 1);</code> for example, no using switch cases. Also look at @Tomaz&#39;s answer."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1492013126, "post_id": 43374294, "comment_id": 73811366, "body": "Are you trying to show the buttons from <code>0</code> to <code>input</code> and hide the rest of the buttons?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7751065"}, "edited": false, "score": 0, "creation_date": 1492013384, "post_id": 43374294, "comment_id": 73811533, "body": "yes, supoose i have three buttons defined using designer, and when user gives an input of one, then i hide two button to show only one button. And as i am using in Qwizard pages i need to use these widget pointers in many functions so i have created statically rather than writing hand written and also has lot of layouts, frames and spacer items."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7751065"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1492019408, "post_id": 43374294, "comment_id": 73814906, "body": "@kubaOber: I think that same code is repeated and with more widgets it is really worse. and next is when this is the case should i go with dynamic creation? Normally in the above case what would be the best way to create a gui?"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1492019463, "post_id": 43374294, "comment_id": 73814932, "body": "<i>it is really worse</i> It&#39;s worse <b>how</b>? Don&#39;t ask about solutions before you clearly state why do you think you have a problem, and what sort of solutions you&#39;re looking for. Otherwise this question is off-topic due to being too broad."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7751065"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1492019979, "post_id": 43374294, "comment_id": 73815236, "body": "@KubaOber:  Worsein the sense repetitive line of codes, as i have started recently, i would want to know the best approach for this kind of application, where there is need of few dynamic multiple widgets depending upon the user input value , so that in future if someone wants to expand the implementation he should not have much problem (in my case he would see static elements on the form and i disable and enable them). so was confused whether to go with dynamic creation and if not how could i implement the visibility enabling and disabling.."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1492028787, "post_id": 43374294, "comment_id": 73820175, "body": "OK, so you&#39;re trying to reduce the amount of code, presumably to make it easier to maintain (otherwise it&#39;d be quite pointless). Please provide a screenshot that demonstrates <b>exactly</b> the setup of the widgets, so that we can infer the tree structure involved."}], "answers": [{"comments": [{"owner": {"reputation": 2045, "user_id": 1077785, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/7131b485716736485a3d7a2e13846786?s=128&d=identicon&r=PG", "display_name": "Tomaz Canabrava", "link": "https://stackoverflow.com/users/1077785/tomaz-canabrava"}, "edited": false, "score": 0, "creation_date": 1492013125, "post_id": 43374415, "comment_id": 73811365, "body": "from his simple example, it looks like it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7751065"}, "edited": false, "score": 0, "creation_date": 1492013193, "post_id": 43374415, "comment_id": 73811421, "body": "I have used the above method too. The problem is i have lot of widgets, somewhere around 25. :( As i have used layouts, frames and spacers, i was wondering should i go for dynamic i.e. coding rather than using designer."}, {"owner": {"reputation": 1999, "user_id": 2356609, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e30be80f5e9d2c0a5fb5e985d7107702?s=128&d=identicon&r=PG&f=1", "display_name": "mrg95", "link": "https://stackoverflow.com/users/2356609/mrg95"}, "edited": false, "score": 0, "creation_date": 1492014692, "post_id": 43374415, "comment_id": 73812337, "body": "@vinayrajputh But in your question the only widgets that change are those three pushbuttons, correct?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7751065"}, "reply_to_user": {"reputation": 1999, "user_id": 2356609, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e30be80f5e9d2c0a5fb5e985d7107702?s=128&d=identicon&r=PG&f=1", "display_name": "mrg95", "link": "https://stackoverflow.com/users/2356609/mrg95"}, "edited": false, "score": 0, "creation_date": 1492017587, "post_id": 43374415, "comment_id": 73813990, "body": "@mrg95 , Yes i have simplified to explain it. But in my code, there are still lot of widgets."}], "tags": [], "owner": {"reputation": 2045, "user_id": 1077785, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/7131b485716736485a3d7a2e13846786?s=128&d=identicon&r=PG", "display_name": "Tomaz Canabrava", "link": "https://stackoverflow.com/users/1077785/tomaz-canabrava"}, "is_accepted": false, "score": 1, "last_activity_date": 1492012787, "creation_date": 1492012787, "answer_id": 43374415, "question_id": 43374294, "link": "https://stackoverflow.com/questions/43374294/efficient-way-of-using-if-loop-or-switch-case-with-qt-widgets/43374415#43374415", "title": "Efficient way of using if loop or switch case with qt widgets", "body": "<p>if you know the number of push buttons that you have, and the input is an integer, then it should be easy:</p>\n\n<pre><code> QList&lt;QPushButton*&gt; buttons = { ui-&gt;btn1, ui-&gt;btn2... } // all your buttons here.\n for(int i = 0; i &lt; input; i++) {\n    buttons[i]-&gt;setVisible(true);\n for(int i = input; i &lt; buttons.size(); i++) \n    buttons[i]-&gt;setVisible(false);\n</code></pre>\n\n<p>first make sure that all buttons untill 'input' are visible, then hide all the buttons from 'input' to the end of the list.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7751065"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1492012873, "creation_date": 1492012439, "last_edit_date": 1492012873, "question_id": 43374294, "link": "https://stackoverflow.com/questions/43374294/efficient-way-of-using-if-loop-or-switch-case-with-qt-widgets", "title": "Efficient way of using if loop or switch case with qt widgets", "body": "<p>I have a form where in a text edit the user gives the input integer with a maximum value of 3, according to this i have to show the number of push buttons. In designer i have created 3 push buttons with layout, and according to the input i used switch case and hide the button. Is there any other efficient way to create the widgets according to the user input. In my form contsrutor:</p>\n\n<pre><code>switch(input)\n{\ncase1:\nbutton2-&gt;setvisible(false);\nbutton3-&gt;setvisible(false); // so only one btn is visible\ncase 2:\nbutton3-&gt;setvisible(false); // so only btn 1 nd 2 are visible\ncase 3:\n// do nothing.\n}\n</code></pre>\n\n<p>The above seems to be simple, but i have few frames, line edits and radio btns, so the code is long and i think it is not efficient. Please suggest me some other alternative. I have used disabling whole frame, this also works but looking for some other options or may be use of if conditions in a better way. \nIs it a better to create them dynamically??Thank you</p>\n"}, {"tags": ["c++", "qt", "qt-creator"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1492016970, "post_id": 43374187, "comment_id": 73813655, "body": "Show your code please"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1492019243, "post_id": 43374187, "comment_id": 73814811, "body": "@eyllanesc This question has to do with Qt Creator IDE. The code is not relevant."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1492019301, "post_id": 43374187, "comment_id": 73814833, "body": "What version of Qt Creator are you using, and how did you obtain it (online download, self-built, etc.)."}, {"owner": {"reputation": 402, "user_id": 6107649, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1b9aa575a0068e4baddf690b30257216?s=128&d=identicon&r=PG&f=1", "display_name": "Senthil Kumar", "link": "https://stackoverflow.com/users/6107649/senthil-kumar"}, "edited": false, "score": 0, "creation_date": 1492076302, "post_id": 43374187, "comment_id": 73838389, "body": "Actually your image has conversion problem using any photo editor.. So you have to convert jpg or png format again and do the repeated steps.. It will supports perfectly i think.."}, {"owner": {"reputation": 1, "user_id": 7633984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/236f22ee66647fc5cb95ecd064cc46c1?s=128&d=identicon&r=PG&f=1", "display_name": "ztono", "link": "https://stackoverflow.com/users/7633984/ztono"}, "edited": false, "score": 0, "creation_date": 1492079880, "post_id": 43374187, "comment_id": 73840729, "body": "I have tried and it appeared the problem I described below , it seems strange and hope your help."}], "answers": [{"tags": [], "owner": {"reputation": 5548, "user_id": 5068056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m53CE.jpg?s=128&g=1", "display_name": "Farhad", "link": "https://stackoverflow.com/users/5068056/farhad"}, "is_accepted": false, "score": 2, "last_activity_date": 1496814518, "creation_date": 1496814518, "answer_id": 44404481, "question_id": 43374187, "link": "https://stackoverflow.com/questions/43374187/qt-open-a-jpg-file-with-warning-image-format-not-supported/44404481#44404481", "title": "qt open a jpg file with warning image format not supported", "body": "<p>This Warning is about PNG formats and Qt, Irrelevant to @ztono code.\nRead more about PNG (Portable Network Graphics) <a href=\"https://en.wikipedia.org/wiki/Portable_Network_Graphics\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Portable_Network_Graphics</a></p>\n\n<p>PNG has many Formats some old, some not standard for Qt. see more <a href=\"https://en.wikipedia.org/wiki/Portable_Network_Graphics#History_and_development\" rel=\"nofollow noreferrer\">History_and_development</a>\nYou need to use Standard format in Qt.</p>\n\n<p>You can convert your image to PNG Standard with Software.</p>\n\n<p>OR</p>\n\n<p>You can use QImage in Qt to convert your PNG pictures.</p>\n\n<pre><code>QImage *image = new QImage();\nimage-&gt;load(\"E:/Qt/TestProject/Images/connect.png\");\nimage-&gt;save(\"E:/Qt/TestProject/Images/connect2.png\");\n</code></pre>\n\n<p>Use new converted png and you will not see the warning.</p>\n"}], "owner": {"reputation": 1, "user_id": 7633984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/236f22ee66647fc5cb95ecd064cc46c1?s=128&d=identicon&r=PG&f=1", "display_name": "ztono", "link": "https://stackoverflow.com/users/7633984/ztono"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6601, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503470555, "creation_date": 1492012074, "last_edit_date": 1503470555, "question_id": 43374187, "link": "https://stackoverflow.com/questions/43374187/qt-open-a-jpg-file-with-warning-image-format-not-supported", "title": "qt open a jpg file with warning image format not supported", "body": "<p><a href=\"https://i.stack.imgur.com/kzyBR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kzyBR.png\" alt=\"screenshot of error\"></a></p>\n\n<p>I open a file of format \"jpg\" in qt creator ,but qt creator returns a warning with \"image format not supported\". I also try other format as \"png\" ,but the waring is same.I hope someone can give me advice on it.I really need help.</p>\n"}, {"tags": ["c++", "struct"], "comments": [{"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 2, "creation_date": 1492011970, "post_id": 43374115, "comment_id": 73810583, "body": "Why are you heap-allocating the object when you could just say <code>flight temp;</code>?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1492011997, "post_id": 43374115, "comment_id": 73810601, "body": "What happens if you get rid of <code>using namespace std;</code>?"}, {"owner": {"reputation": 639, "user_id": 1671661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc8db94e53e65d244d49d87e506907a6?s=128&d=identicon&r=PG", "display_name": "KonstantinL", "link": "https://stackoverflow.com/users/1671661/konstantinl"}, "edited": false, "score": 2, "creation_date": 1492012121, "post_id": 43374115, "comment_id": 73810683, "body": "Try to rename your type <code>time</code> to something like <code>time_type</code>."}, {"owner": {"reputation": 2405, "user_id": 2216129, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/U0xqx.jpg?s=128&g=1", "display_name": "Topological Sort", "link": "https://stackoverflow.com/users/2216129/topological-sort"}, "edited": false, "score": 0, "creation_date": 1492012166, "post_id": 43374115, "comment_id": 73810711, "body": "I had to define <code>date</code> to get it to compile, but then it was OK.  I&#39;m using Visual Studio.  Try defining <code>date</code>?"}, {"owner": {"reputation": 11, "user_id": 3467274, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a19cef619e60339888cef707705899a8?s=128&d=identicon&r=PG&f=1", "display_name": "Leila Saeedy", "link": "https://stackoverflow.com/users/3467274/leila-saeedy"}, "edited": false, "score": 0, "creation_date": 1492012179, "post_id": 43374115, "comment_id": 73810727, "body": "because I want to make a linked list and use dynamic memory allocation"}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 3, "creation_date": 1492012179, "post_id": 43374115, "comment_id": 73810726, "body": "Also, look at the compiler output. You should see some lines like this: <code>error: must use &#39;struct&#39; tag to refer to type &#39;time&#39; in this scope. note: struct &#39;time&#39; is hidden by a non-type declaration of &#39;time&#39; here: extern time_t time (time_t *__timer) __THROW;</code> Probably a bad idea to name your struct the same as a function provided by the environment."}, {"owner": {"reputation": 1596, "user_id": 2548287, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mBqgl.png?s=128&g=1", "display_name": "Gizmo", "link": "https://stackoverflow.com/users/2548287/gizmo"}, "edited": false, "score": 0, "creation_date": 1492012317, "post_id": 43374115, "comment_id": 73810813, "body": "<code>time</code> is actually a <a href=\"http://www.cplusplus.com/reference/ctime/time/\" rel=\"nofollow noreferrer\">function</a>. When trying to compile with GCC on Linux I needed to rename <code>time</code> to something else for it to work."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1492012463, "post_id": 43374115, "comment_id": 73810908, "body": "this is one of the reasons to use names like Date and Time for c++ classes and structs - to prevent collision with existing names"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1492014722, "post_id": 43374115, "comment_id": 73812351, "body": "<a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\" title=\"why is using namespace std considered bad practice\">stackoverflow.com/questions/1452721/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 3, "last_activity_date": 1492013217, "creation_date": 1492013217, "answer_id": 43374559, "question_id": 43374115, "link": "https://stackoverflow.com/questions/43374115/the-compiler-doesnt-recognize-my-struct-members/43374559#43374559", "title": "the compiler doesn&#39;t recognize my struct members", "body": "<p>Don't use <code>time</code> as a global type. It conflicts with the standard library function of the same name.</p>\n\n<p>Change it to <code>my_time</code> or put it in your own namespace. Example:</p>\n\n<pre><code>#include&lt;iostream&gt;\n\nnamespace MyApp\n{\n   struct time\n   {\n      int hour;\n      int min;\n   };\n\n   struct flight\n   {\n      long flight_serial;\n      long plane_serial;\n      char from[30];\n      char to[30];\n      int traveller_num;\n      char pilot_name[30];\n      char pilot_lastnam[30];\n      long total_price;\n      time flight_time;\n      flight * nxt;\n   };\n}\n\nint main()\n{\n   using namespace MyApp;\n   flight* temp=new flight;\n\n   std::cin &gt;&gt;temp-&gt;flight_time.hour;\n\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 3467274, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a19cef619e60339888cef707705899a8?s=128&d=identicon&r=PG&f=1", "display_name": "Leila Saeedy", "link": "https://stackoverflow.com/users/3467274/leila-saeedy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1492013217, "creation_date": 1492011834, "last_edit_date": 1492011928, "question_id": 43374115, "link": "https://stackoverflow.com/questions/43374115/the-compiler-doesnt-recognize-my-struct-members", "title": "the compiler doesn&#39;t recognize my struct members", "body": "<p>I have this code at the beginning :</p>\n\n<pre><code>#include&lt;iostream&gt;\n\nusing namespace std;\n\nstruct mehmandar{\n\n    char name[30];\n    char last_name[30];\n    long national_code;\n    long personal_code;\n    date birthday;\n    date employ_date;\n    mehmandar * nxt;\n};\n\nstruct time{\n\n    int hour;\n    int min;\n};\n\n\nstruct flight{\n\n    long flight_serial;\n    long plane_serial;\n    char from[30];\n    char to[30];\n    int traveller_num;\n    char pilot_name[30];\n    char pilot_lastnam[30];\n    mehmandar* mehmandar_majmue=NULL;\n    long total_price;\n    time flight_time;\n    flight * nxt;\n};\n\nint main() {\n\n    flight* temp=new flight;\n\n    cin &gt;&gt;temp-&gt;flight_time.hour;\n\n    return 0;\n}\n</code></pre>\n\n<p>but then I get the error that struct flight has no member flight_time for main part and time does not name a type in the struct flight part.</p>\n"}, {"tags": ["c++", "parallel-processing", "openmp", "intel"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1492012177, "post_id": 43374107, "comment_id": 73810725, "body": "Not sure if you can do it with openmp but you could also initialize the vector to the full size and then give each thread a segment of the vector to work on.  Yes they would all be working on the same vector but since none of them touch the same element and none of the threads modify the state of the vector it should be thread safe."}, {"owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1492012224, "post_id": 43374107, "comment_id": 73810753, "body": "@NathanOliver Thanks for your answer. This is not possible since there is no way to know <code>key</code> &#39;s size in advance."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1492012268, "post_id": 43374107, "comment_id": 73810786, "body": "&quot;<i>As you can see, here a lot of pointers are copied many times. Is it possible that all these copies result as inefficiency?</i>&quot;\u2014Compared to what, exactly? The only time <code>void foo(T &amp; t)</code> is going to be less efficient than <code>void foo(T t)</code> is if <code>T</code> is a small type like <code>char</code> or maybe even <code>int</code>. In any other situation, the performance of using references should almost always be better."}, {"owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1492012395, "post_id": 43374107, "comment_id": 73810859, "body": "@Xirema In the original version of <code>bar</code> there is no argument, so there is no copy at all. In the new version of <code>bar</code> there is <code>std::vector&lt;float&gt; &amp;local_v</code> as argument, or even 10 arguments as I supposed later in my question. I&#39;m sorry if this was not clear."}, {"owner": {"reputation": 1596, "user_id": 2548287, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mBqgl.png?s=128&g=1", "display_name": "Gizmo", "link": "https://stackoverflow.com/users/2548287/gizmo"}, "edited": false, "score": 0, "creation_date": 1492012853, "post_id": 43374107, "comment_id": 73811177, "body": "You are using the wrong container for the wrong job then. Look at <code>libtbb</code>, more so at <code>concurrent_vector</code>."}, {"owner": {"reputation": 5440, "user_id": 860566, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/7b3c9600bd9d213f52750ac083c1ac28?s=128&d=identicon&r=PG", "display_name": "Thomas Russell", "link": "https://stackoverflow.com/users/860566/thomas-russell"}, "edited": false, "score": 0, "creation_date": 1492012931, "post_id": 43374107, "comment_id": 73811227, "body": "@justHelloWorld If <code>foo</code> is as expensive as you claim, then I imagine that the overhead of passing some additional references will be comparably minimal.  However, you should definitely give serious consideration to your maintainability point!"}, {"owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "reply_to_user": {"reputation": 1596, "user_id": 2548287, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mBqgl.png?s=128&g=1", "display_name": "Gizmo", "link": "https://stackoverflow.com/users/2548287/gizmo"}, "edited": false, "score": 0, "creation_date": 1492012971, "post_id": 43374107, "comment_id": 73811256, "body": "@Gizmo that push_back is called thousand of times.  I have no idea how that container is implemented, but the race condition here would kill the performance, don&#39;t you think?"}, {"owner": {"reputation": 1596, "user_id": 2548287, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mBqgl.png?s=128&g=1", "display_name": "Gizmo", "link": "https://stackoverflow.com/users/2548287/gizmo"}, "edited": false, "score": 1, "creation_date": 1492013000, "post_id": 43374107, "comment_id": 73811274, "body": "@justHelloWorld only profiling will show, don&#39;t underestimate Intel. Also if you don&#39;t want an ugly unmaintainable mess, use the correct tools to archieve your goal. If multithreading makes it slower and maintainable, or faster and unmaintainable, then don&#39;t change anything. Simple as that? I would hope. But <code>libtbb</code> is from Intel, you are using an Intel compiler, probably for code which is going to run on the Intel platform.. are you seriously going to roll your own solution?"}, {"owner": {"reputation": 1596, "user_id": 2548287, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mBqgl.png?s=128&g=1", "display_name": "Gizmo", "link": "https://stackoverflow.com/users/2548287/gizmo"}, "edited": false, "score": 0, "creation_date": 1492014942, "post_id": 43374107, "comment_id": 73812478, "body": "Also, if you have a race condition, you have to worry about alot more than performance. When multithreading and accessing the same (not MT friendly) resources you need sychronization anyway."}], "answers": [{"comments": [{"owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "edited": false, "score": 0, "creation_date": 1492020822, "post_id": 43374572, "comment_id": 73815691, "body": "The point is that, as I explained in my question, this trick is done not only in one case, but with several objects, so it&#39;s not only <code>v</code>, but it&#39;s more about <code>v1, v2, ..., vn</code>. As I said in my first comments, we don&#39;t know the size of <code>v</code>, but I could <code>reserve</code> it with a reasonable amount (thanks, you gave me the idea). I think that the only real solution is implementing both solutions as someone suggested and profile both of them"}, {"owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "edited": false, "score": 0, "creation_date": 1492031248, "post_id": 43374572, "comment_id": 73821457, "body": "What if I &quot;incapsulate&quot; all these arguments into one structure and pass only that as reference? There would be only one copy per calling (the pointer to the structure object), right?"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "edited": false, "score": 0, "creation_date": 1492031409, "post_id": 43374572, "comment_id": 73821518, "body": "@justHelloWorld Yes, but this almost certainly counts as premature optimization. Find out how expensive the original call stack is, how expensive your new call stack is, and find out if you&#39;re actually saving a significant number of CPU cycles with these abstractions. I&#39;d put somewhere around 95% odds that these optimizations don&#39;t actually matter much."}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 1, "last_activity_date": 1492013242, "creation_date": 1492013242, "answer_id": 43374572, "question_id": 43374107, "link": "https://stackoverflow.com/questions/43374107/passing-too-many-arguments-by-reference-could-be-inefficient/43374572#43374572", "title": "Passing too many arguments by reference could be inefficient?", "body": "<p>In a direct comparison between <code>a::Bar()</code> and <code>a::Bar(std::vector&lt;float&gt; &amp; v)</code>, the difference is that the second version will have to increase the size of the stack by an additional 8 bytes over what the original version has to do. In terms of performance, this is a pretty minimal effect: the stack pointer has to be adjusted no matter whether the function contains arguments or not (so the only real difference is a single pointer copy, which might even be optimized away depending on the compiler), and in terms of the actual performance of the function itself, constantly adding elements to a <code>std::vector</code> is going to be a far more expensive operation, especially if the vector ever needs to be reallocated (which will probably happen frequently, depending on how big the vector needs to get), which means that those costs will far exceed the costs of the pointer copy.</p>\n\n<p>So, short version: Go nuts with the references.</p>\n"}], "owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 43374572, "answer_count": 1, "score": 1, "last_activity_date": 1492013242, "creation_date": 1492011812, "last_edit_date": 1495540474, "question_id": 43374107, "link": "https://stackoverflow.com/questions/43374107/passing-too-many-arguments-by-reference-could-be-inefficient", "title": "Passing too many arguments by reference could be inefficient?", "body": "<p><strong>Disclamer:</strong> I'm using Intel Compiler 2017 and if you want to know why I'm doing this, go at the end of the question.</p>\n\n<p>I have this code:</p>\n\n<pre><code>class A{\n  vector&lt;float&gt; v;\n  ...\n  void foo();\n  void bar();\n}\n\nvoid A::foo(){\n  for(int i=0; i&lt;bigNumber;i++){\n    //something very expensive\n    //call bar() many times per cycle;\n  }\n}\n\nvoid A::bar(){\n  //...\n  v.push_back(/*something*/);\n}\n</code></pre>\n\n<p>Now, let's suppose I want to parallelize <code>foo()</code> since it's very expensive. However, I can't simply use <code>#pragma omp parallel for</code> because of <code>v.push_back()</code>.</p>\n\n<p>To my knowledge, there are two alternatives here:</p>\n\n<ol>\n<li>We use <code>#pragma omp critical</code></li>\n<li>We create a local version of <code>v</code> for each thread and then we joint them at the end of the parallel section, more or less as explained <a href=\"https://stackoverflow.com/a/24766612/4480180\">here</a>.</li>\n</ol>\n\n<p>Solution 1. is often considered a bad solution because race-condition creates a consistent overhead. </p>\n\n<p>However, solution 2. requires to modify <code>bar()</code> in this way:</p>\n\n<pre><code>class A{\n  vector&lt;float&gt; v;\n  ...\n  void foo();\n  void bar(std::vector&lt;float&gt; &amp;local_v);\n}\n\nvoid A::foo(){\n  #pragma omp parallel\n  {\n    std::vector&lt;float&gt; local_v;\n    #pragma omp for\n    for(int i=0; i&lt;bigNumber;i++){\n      //something very expensive\n      //call bar(local_v) many times per cycle;\n    }\n    #pragma omp critical\n    {\n      v.insert(v.end(), local_v.begin(), local_v.end());\n    }\n  }\n}\n\nvoid A::bar(std::vector&lt;float&gt; &amp;local_v){\n  //...\n  v.push_back(/*something*/);\n}\n</code></pre>\n\n<p>So far so good. Now, let's suppose that there is not only <code>v</code>, but there are 10 vectors, say <code>v1</code>, <code>v2</code>, ..., <code>v10</code>, or anyway 10 shared variables. And in addition, let's suppose that that <code>bar</code> isn't called directly inside <code>foo()</code> but is called after many nested calls. Something like <code>foo()</code> which calls <code>foo1(std::vector&lt;float&gt; v1, ..., std::vector&lt;float&gt; v10)</code> which calls <code>foo2(std::vector&lt;float&gt; v1, ..., std::vector&lt;float&gt; v10)</code>, repeating this nested calling many other times until finally the last one calls <code>bar(std::vector&lt;float&gt; v1, ..., std::vector&lt;float&gt; v10)</code>.</p>\n\n<p>So, this looks like a nightmare for maintainability (I have to modify all the headers and callings for all the nested functions)...But even more important: we agree that passing by reference is efficient, but it's always a pointer copy. As you can see, here a lot of pointers are copied many times. Is it possible that all these copies result as inefficiency?</p>\n\n<p>Actually what I care most here is performance, so if you tell me \"nah, it's fine because compilers are super intelligent and they do some sorcery so you can copy one trillion of references and there is no drop in performance\" then it will be fine, but I don't know if such a sorcery exists or not.</p>\n\n<p><strong>Why I'm doing this:</strong>\nI'm trying to parallelize <a href=\"https://github.com/perdoch/hesaff\" rel=\"nofollow noreferrer\">this</a> code. In particular, I'm rewriting the <code>while</code> <a href=\"https://github.com/perdoch/hesaff/blob/master/pyramid.cpp\" rel=\"nofollow noreferrer\">here</a> as a <code>for</code> which can be parallelized, but if you follow the code you'll find out that the call-back <code>onAffineShapeFound</code> from <a href=\"https://github.com/perdoch/hesaff/blob/master/hesaff.cpp\" rel=\"nofollow noreferrer\">here</a> is called, which modify the state of the shared object <code>keys</code>. This happens for many others variable, but this is the \"deepest\" case for this code.</p>\n"}, {"tags": ["c++", "class", "friend"], "comments": [{"owner": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "edited": false, "score": 0, "creation_date": 1492011331, "post_id": 43373888, "comment_id": 73810102, "body": "Either make the operator part of your class (<code>callClass::operator&lt;&lt;</code>) or make it a free operator and call <code>Org::isEmpty()</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1492011428, "post_id": 43373888, "comment_id": 73810178, "body": "They need to be invoked on <code>Org</code>."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1492011435, "post_id": 43373888, "comment_id": 73810187, "body": "This isn&#39;t the problem, but don&#39;t use <code>std::endl</code> unless you need the extra stuff that it does. <code>&#39;\\n&#39;</code> ends a line."}], "answers": [{"tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": false, "score": 2, "last_activity_date": 1492011382, "creation_date": 1492011382, "answer_id": 43373952, "question_id": 43373888, "link": "https://stackoverflow.com/questions/43373888/friend-function-not-able-to-access-member-of-class-c/43373952#43373952", "title": "Friend function not able to access member of class C++", "body": "<p>Your <code>operator&lt;&lt;</code> function is a global function and not a member of <code>callClass</code>.  To access those fields, you need to use <code>Org.call_DB</code>, <code>Org.count</code> and <code>Org.isEmpty();</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "is_accepted": false, "score": 2, "last_activity_date": 1492011439, "creation_date": 1492011439, "answer_id": 43373967, "question_id": 43373888, "link": "https://stackoverflow.com/questions/43373888/friend-function-not-able-to-access-member-of-class-c/43373967#43373967", "title": "Friend function not able to access member of class C++", "body": "<p>Because you did not \"qualify\" those members to an instance. You need to write</p>\n\n<pre><code>ostream &amp; operator&lt;&lt;(ostream &amp; out, callClass &amp;Org)\n{\n    if (Org.isEmpty() == 1)\n//      ^^^^^\n</code></pre>\n\n<p>similary <code>Org.count</code> and <code>Org.call_DB</code> etc ..</p>\n\n<p>Remember that your <code>operator&lt;&lt;</code> is a <em>global</em> function, not a <em>member</em> function. Otherwise you wouldn't have the need to declare it as friend in the first place.</p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 0, "last_activity_date": 1492011452, "creation_date": 1492011452, "answer_id": 43373979, "question_id": 43373888, "link": "https://stackoverflow.com/questions/43373888/friend-function-not-able-to-access-member-of-class-c/43373979#43373979", "title": "Friend function not able to access member of class C++", "body": "<blockquote>\n  <p>Why isn't the friend function able to access isEmpty(), count and call_DB[ ] ? </p>\n</blockquote>\n\n<p>Because you do not understand what \"access\" means. It does not mean that friend function becomes a method of the class, so you cannot implicitly use <code>this</code> as you trying to do, you should use <code>Org</code> argument:</p>\n\n<pre><code>out &lt;&lt; setw(10) &lt;&lt; Org.call_DB[i].firstname &lt;&lt; \" \"; \n</code></pre>\n\n<p>same for the rest.</p>\n"}, {"tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": 0, "last_activity_date": 1492011466, "creation_date": 1492011466, "answer_id": 43373985, "question_id": 43373888, "link": "https://stackoverflow.com/questions/43373888/friend-function-not-able-to-access-member-of-class-c/43373985#43373985", "title": "Friend function not able to access member of class C++", "body": "<p>Your friend function is not a member function so there is no 'this' available. Your operator code should looks like:</p>\n\n<pre><code>ostream &amp; operator&lt;&lt;(ostream &amp; out, callClass &amp;Org)\n{\n   for (int i = 0; i &lt; count; i++)\n       {\n           out &lt;&lt; Org.call_DB[i] &lt;&lt; endl;\n       }\n   }\n}\n</code></pre>\n\n<p>and then you must also provide an operator <code>&lt;&lt;</code> for <code>callRecord</code>.</p>\n"}], "owner": {"reputation": 19, "user_id": 7857400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88cd9c8a6b2b52fb6cd80d08e0d03113?s=128&d=identicon&r=PG", "display_name": "cybersoul", "link": "https://stackoverflow.com/users/7857400/cybersoul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 416, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1492011466, "creation_date": 1492011171, "question_id": 43373888, "link": "https://stackoverflow.com/questions/43373888/friend-function-not-able-to-access-member-of-class-c", "title": "Friend function not able to access member of class C++", "body": "<p>I'm trying to overload the operator \u201c&lt;&lt;\u201c as a friend function but for some reason it cannot access members of the class. Why isn't the friend function able to access <strong>isEmpty()</strong>, <strong>count</strong> and <strong>call_DB[ ]</strong> ?\nThis is the code I wrote:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\nclass callRecord\n{\npublic:\n   string firstname;\n   string lastname;\n   string cell_number;\n   int relays;\n   int call_length;\n   double net_cost;\n   double tax_rate;\n   double call_tax;\n   double total_cost;\n};\n\nclass callClass\n{\npublic:\n\n   bool isEmpty();\n   friend ostream &amp; operator&lt;&lt;(ostream &amp; out, callClass &amp;Org);\n\nprivate:\n   int count;\n   int size;\n   callRecord *call_DB;\n};\n\nbool callClass::isEmpty()\n{\n   if (count == 0)\n   {\n       return 1;\n   }\n   else\n   {\n       return 0;\n   }\n}\n\nostream &amp; operator&lt;&lt;(ostream &amp; out, callClass &amp;Org)\n{\n   if (isEmpty() == 1)\n   {\n       cout &lt;&lt; \"The array is empty\" &lt;&lt; endl;\n   }\n   else\n   {\n       out.setf(ios::showpoint);\n       out.setf(ios::fixed);\n       out.precision(2);\n\n   for (int i = 0; i &lt; count; i++)\n       {\n           out &lt;&lt; setw(10) &lt;&lt; call_DB[i].firstname &lt;&lt; \" \";\n           out &lt;&lt; setw(10) &lt;&lt; call_DB[i].lastname &lt;&lt; \" \";\n           out &lt;&lt; call_DB[i].cell_number &lt;&lt; \"\\t\";\n           out &lt;&lt; call_DB[i].relays &lt;&lt; \"\\t\";\n           out &lt;&lt; call_DB[i].call_length &lt;&lt; \"\\t\";\n           out &lt;&lt; call_DB[i].net_cost &lt;&lt; \"\\t\";\n           out &lt;&lt; call_DB[i].tax_rate &lt;&lt; \"\\t\";\n           out &lt;&lt; call_DB[i].call_tax &lt;&lt; \"\\t\";\n           out &lt;&lt; call_DB[i].total_cost &lt;&lt; endl;\n       }\n   }\n}\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "dll", "lua"], "comments": [{"owner": {"reputation": 1035, "user_id": 3895858, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/UxB9m.jpg?s=128&g=1", "display_name": "FinnTheHuman", "link": "https://stackoverflow.com/users/3895858/finnthehuman"}, "edited": false, "score": 0, "creation_date": 1492011810, "post_id": 43373631, "comment_id": 73810466, "body": "Someone removed the C tag for some reason, even though the entirety of the code is written in C..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492012657, "post_id": 43373631, "comment_id": 73811058, "body": "&quot;Someone&quot; is clearly shown in the edit history. If you want to ask something, address the person directly, not a snarky note. The reason I removed the C tag is beecause you clearly ask about a C**++** dll and state it is C++. C++ is not C and <code>extern &quot;C&quot;</code> does not make your code C code! Maybe you first make up your mind which language you use before asking and don&#39;t spam tags."}, {"owner": {"reputation": 1035, "user_id": 3895858, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/UxB9m.jpg?s=128&g=1", "display_name": "FinnTheHuman", "link": "https://stackoverflow.com/users/3895858/finnthehuman"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492013004, "post_id": 43373631, "comment_id": 73811277, "body": "I merely accepted the tags suggested by Stack Overflow engine. The code is C-standard compliant, I think."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492017746, "post_id": 43373631, "comment_id": 73814072, "body": "Identical syntax does not imply identical semantics. And there are no &quot;suggestions&quot;, only matches. Of yurse if you type &quot;c&quot;, there will show up all other tags starting with &quot;c&quot;. That does not mean you shall add tags for different languages. So, if you compile as C++ (which your text suggets), it is <b>not</b> C. They are clearly distinct languages. Whoever told you different does not know at least one of them well enough to write more than a &quot;Hello World&quot;! Apart from that, <code>__declspec</code> is neither standard C nor standard C++."}], "answers": [{"comments": [{"owner": {"reputation": 1035, "user_id": 3895858, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/UxB9m.jpg?s=128&g=1", "display_name": "FinnTheHuman", "link": "https://stackoverflow.com/users/3895858/finnthehuman"}, "edited": false, "score": 0, "creation_date": 1492204980, "post_id": 43419208, "comment_id": 73897888, "body": "I highly suspected that. How do I do that? I&#39;m terrible with the Linker. I&#39;m more of a C# person. I&#39;m ever writing a new question."}], "tags": [], "owner": {"reputation": 2389, "user_id": 2060502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd1fc204e0d848dd1c9720cd37610bf3?s=128&d=identicon&r=PG", "display_name": "Alexander Altshuler", "link": "https://stackoverflow.com/users/2060502/alexander-altshuler"}, "is_accepted": false, "score": 1, "last_activity_date": 1492254456, "last_edit_date": 1492254456, "creation_date": 1492203610, "answer_id": 43419208, "question_id": 43373631, "link": "https://stackoverflow.com/questions/43373631/how-do-i-compile-a-c-dll-to-work-with-lua-im-getting-error-loading-module/43419208#43419208", "title": "How do I compile a C++ dll to work with Lua? (I&#39;m getting Error loading module)", "body": "<p>You shouldn't include Lua source code into your project.\nYou should link with Lua DLL.</p>\n\n<p>Update:</p>\n\n<p>The simplest way to link with Lua DLL, just include this line (fix path and library name of course):</p>\n\n<pre><code>#pragma comment(lib, \"C:\\\\path\\\\to\\\\Lua5.X.lib\")\n</code></pre>\n"}], "owner": {"reputation": 1035, "user_id": 3895858, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/UxB9m.jpg?s=128&g=1", "display_name": "FinnTheHuman", "link": "https://stackoverflow.com/users/3895858/finnthehuman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 565, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1492254456, "creation_date": 1492010427, "last_edit_date": 1492011589, "question_id": 43373631, "link": "https://stackoverflow.com/questions/43373631/how-do-i-compile-a-c-dll-to-work-with-lua-im-getting-error-loading-module", "title": "How do I compile a C++ dll to work with Lua? (I&#39;m getting Error loading module)", "body": "<p>When I type require (\"C:/Path/To/Dll/mylib.dll\") during an interactive Lua session I get this error</p>\n\n<pre><code>error loading module 'C:\\...\\mylib.dll' from file 'C:\\Program Files\\Lua\\5.3.4\\clib\\libgcc_s_dw2-1.dll'\n%1 is not a valid Win32 application\n</code></pre>\n\n<p>When I do:</p>\n\n<pre><code>f = package.loadlib(\"C:/Path/To/Dll/mylib.dll\")\nf()\n</code></pre>\n\n<p>Lua crashes, and if I run the debugger, I can see it crashes here:</p>\n\n<pre><code>l_noret luaG_errormsg (lua_State *L) {\n    if (L-&gt;errfunc != 0) {\n        StkId errfunc = restorestack(L, L-&gt;errfunc);\n        if (!ttisfunction(errfunc)) luaD_throw(L, LUA_ERRERR);//&lt;&lt;&lt; HERE\n        setobjs2s(L, L-&gt;top, L-&gt;top - 1);\n        setobjs2s(L, L-&gt;top - 1, errfunc);\n        L-&gt;top++;\n        luaD_call(L, L-&gt;top - 2, 1, 0);\n    }\n    luaD_throw(L, LUA_ERRRUN);\n}\n</code></pre>\n\n<p>The error originates from here:</p>\n\n<pre><code>LUALIB_API void luaL_checkversion_ (lua_State *L, lua_Number ver) {\n    const lua_Number *v = lua_version(L);\n    if (v != lua_version(NULL))\n        luaL_error(L, \"multiple Lua VMs detected\");//&lt;&lt;&lt; HERE\n    else if (*v != ver)\n        luaL_error(L, \"version mismatch: app. needs %f, Lua core provides %f\", ver, *v);\n    /* check conversions number -&gt; integer types */\n    lua_pushnumber(L, -(lua_Number)0x1234);\n    if (lua_tointeger(L, -1) != -0x1234 ||\n        lua_tounsigned(L, -1) != (lua_Unsigned)-0x1234)\n        luaL_error(L, \"bad conversion number-&gt;int;\"\n              \" must recompile Lua with proper settings\");\n    lua_pop(L, 1);\n</code></pre>\n\n<p>}</p>\n\n<p>I might have done something wrong while installing the binaries. These values are in my PATH: </p>\n\n<pre><code>C:\\Program Files\\Lua\\5.3.4\\\nC:\\Program Files\\Lua\\5.3.4\\clibs\n</code></pre>\n\n<p>I also have these environment variables:</p>\n\n<pre><code>LUA_CPATH: C:\\Program Files\\Lua\\5.3.4\\clib\\libgcc_s_dw2-1.dll\nLUA_DEV: C:\\Program Files\\Lua\\5.3.4\\src\nLUA_PATH: C:\\Program Files\\Lua\\5.3.4\\?.luac\n</code></pre>\n\n<p>To compile my code, I included Lua's source code in my solution (I don't think this is how it's done, so this is probably another issue).</p>\n\n<p>Here's my header file:</p>\n\n<pre><code>#pragma once\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n    #include \"lua.h\"\n    #include \"lualib.h\"\n    #include \"lauxlib.h\"\n\n    int l_cond ( lua_State * L );\n    int l_bor ( lua_State * L );\n    int l_band ( lua_State * L );\n    int l_bxor ( lua_State * L );\n    int l_bnot ( lua_State * L );\n    int l_lshift ( lua_State * L );\n    int l_rshift ( lua_State * L );\n#ifdef __cplusplus\n}\n#endif\n\n#ifndef WIN32_LEAN_AND_MEAN\n#define WIN32_LEAN_AND_MEAN\n#endif\n\n#include &lt;SDKDDKVer.h&gt;\n#include &lt;windows.h&gt;\n</code></pre>\n\n<p>Here's my C++ code:</p>\n\n<pre><code>#include \"mylib.h\"\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\nstatic const luaL_Reg lib[] = {\n    { \"cond\", l_cond },\n    { \"bor\", l_bor },\n    { \"band\", l_band },\n    { \"bxor\", l_bxor },\n    { \"bnot\", l_bnot },\n    { \"lshift\", l_lshift },\n    { \"rshift\", l_rshift },\n    {NULL, NULL}\n};\n\n\n__declspec( dllexport ) int luaopen_mylib ( lua_State *L )\n{\n    luaL_newlib ( L, lib );\n}\n\nstatic int l_cond ( lua_State *L )\n{\n    /*if ( lua_gettop ( L ) &lt; 3 )\n    {\n        return luaL_error ( L, \"l_cond expecting 3 arguments\" );\n    }*/\n\n    lua_toboolean ( L, 1 ) ? lua_pushvalue ( L, 2 ) : lua_pushvalue ( L, 3 );\n    return 1;\n}\n\nstatic int l_bor ( lua_State *L )\n{\n    /*if ( lua_gettop ( L ) &lt; 2 )\n    {\n        return luaL_error ( L, \"l_bor expecting 2 arguments\" );\n    }*/\n\n    lua_Integer a = lua_tointeger ( L, 1 );\n    lua_Integer b = lua_tointeger ( L, 2 );\n\n    lua_pushinteger ( L, a | b );\n    return 1;\n}\n\nstatic int l_band ( lua_State *L )\n{\n    /*if ( lua_gettop ( L ) &lt; 2 )\n    {\n        return luaL_error ( L, \"l_band expecting 2 arguments\" );\n    }*/\n\n    lua_Integer a = lua_tointeger ( L, 1 );\n    lua_Integer b = lua_tointeger ( L, 2 );\n\n    lua_pushinteger ( L, a &amp; b );\n    return 1;\n}\n\nstatic int l_bxor ( lua_State *L )\n{\n    /*if ( lua_gettop ( L ) &lt; 2 )\n    {\n        return luaL_error ( L, \"l_bxor expecting 2 arguments\" );\n    }*/\n\n    lua_Integer a = lua_tointeger ( L, 1 );\n    lua_Integer b = lua_tointeger ( L, 2 );\n\n    lua_pushinteger ( L, a ^ b );\n    return 1;\n}\n\nstatic int l_bnot ( lua_State *L )\n{\n    /*if ( lua_gettop ( L ) &lt; 1 )\n    {\n        return luaL_error ( L, \"l_bxor expecting 1 argument\" );\n    }*/\n\n    lua_Integer a = lua_tointeger ( L, 1 );\n\n    lua_pushinteger ( L, ~a );\n    return 1;\n}\n\nstatic int l_lshift ( lua_State *L )\n{\n    /*if ( lua_gettop ( L ) &lt; 2 )\n    {\n        return luaL_error ( L, \"l_lshift expecting 2 arguments\" );\n    }*/\n\n    lua_Integer value = lua_tointeger ( L, 1 );\n    lua_Integer shift = lua_tointeger ( L, 2 );\n\n    lua_pushinteger ( L, value &lt;&lt; shift );\n    return 1;\n}\n\nstatic int l_rshift ( lua_State *L )\n{\n    /*if ( lua_gettop ( L ) &lt; 2 )\n    {\n        return luaL_error ( L, \"l_rshift expecting 2 arguments\" );\n    }*/\n\n    lua_Integer value = lua_tointeger ( L, 1 );\n    lua_Integer shift = lua_tointeger ( L, 2 );\n\n    lua_pushinteger ( L, value &gt;&gt; shift );\n    return 1;\n}\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n\n<p>besides those two files, as mentioned above, I also included the entirety of Lua's source code in my project. It all compiles, but I get that error when trying to load. This is all very new to me, I'm aware there's probably more than just one thing wrong with my attempt.</p>\n"}, {"tags": ["c++", "vector", "mapping", "qt-creator", "signals-slots"], "comments": [{"owner": {"reputation": 477, "user_id": 2941160, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yKVu7.jpg?s=128&g=1", "display_name": "valleymanbs", "link": "https://stackoverflow.com/users/2941160/valleymanbs"}, "edited": false, "score": 0, "creation_date": 1492014650, "post_id": 43373471, "comment_id": 73812308, "body": "Why on heart are you using Qt 4.2? Qt is currently at version 5.8 ..."}, {"owner": {"reputation": 477, "user_id": 2941160, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yKVu7.jpg?s=128&g=1", "display_name": "valleymanbs", "link": "https://stackoverflow.com/users/2941160/valleymanbs"}, "edited": false, "score": 0, "creation_date": 1492014749, "post_id": 43373471, "comment_id": 73812377, "body": "Maybe is that you are using Qt Creator version 4.2.1? Which Qt library version is your application linked against?"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6455068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55bd931af0cbb8368dfb5c67ba517116?s=128&d=identicon&r=PG&f=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/6455068/nina"}, "edited": false, "score": 0, "creation_date": 1492016353, "post_id": 43375266, "comment_id": 73813313, "body": "I used lambda function, but then realized it&#39;s the syntax for Qt 5x. That&#39;s why I changed to the current method.  I downloaded QT a few years ago, and the version I&#39;m allowed to download for free is 4.2.1. But let me try to update it and use Lambda function. Thank you very much!"}, {"owner": {"reputation": 21, "user_id": 6455068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55bd931af0cbb8368dfb5c67ba517116?s=128&d=identicon&r=PG&f=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/6455068/nina"}, "edited": false, "score": 0, "creation_date": 1492021853, "post_id": 43375266, "comment_id": 73816232, "body": "It works perfectly when I use version 5.8. thank you"}], "tags": [], "owner": {"reputation": 477, "user_id": 2941160, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yKVu7.jpg?s=128&g=1", "display_name": "valleymanbs", "link": "https://stackoverflow.com/users/2941160/valleymanbs"}, "is_accepted": true, "score": 0, "last_activity_date": 1492015544, "last_edit_date": 1495539997, "creation_date": 1492015544, "answer_id": 43375266, "question_id": 43373471, "link": "https://stackoverflow.com/questions/43373471/qt-how-to-connect-2d-array-of-qpushbutton-and-return-the-location/43375266#43375266", "title": "qt how to connect 2D array of QPushButton and return the location", "body": "<p>The answer you are linking is very complete and useful, I think you should stick with that one. Any suggestion about those methods would be just rewriting the original answer. Maybe you can ask something more <strong>specific</strong> about what you can't understand of those options.</p>\n\n<p>Another solution, not cited in that answer, would be implementing a class extending QPushButton, intercept the clicked() signal and re-emit it with the data you want. The same thing can be obtained with lambda functions in Qt5 and C++11: have a look at this: <a href=\"https://stackoverflow.com/questions/34668541/qt-custom-qpushbutton-clicked-signal\">qt-custom-qpushbutton-clicked-signal</a> the two answers to this questions explain how to do this.</p>\n"}], "owner": {"reputation": 21, "user_id": 6455068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55bd931af0cbb8368dfb5c67ba517116?s=128&d=identicon&r=PG&f=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/6455068/nina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 0, "accepted_answer_id": 43375266, "answer_count": 1, "score": 0, "last_activity_date": 1492015544, "creation_date": 1492010030, "question_id": 43373471, "link": "https://stackoverflow.com/questions/43373471/qt-how-to-connect-2d-array-of-qpushbutton-and-return-the-location", "title": "qt how to connect 2D array of QPushButton and return the location", "body": "<p>I'm new to QT Creator GUI and I'm having a hard time with Signals and Slots. I'm using QT 4.2.1 to make a word search puzzle for practicing</p>\n\n<p>Below is a portion of my code, creating a 2D puzzle using vectors. I tried to use array but the size of the puzzle will be decided by the user. I had a lot of compile errors using array. So I decided to use Vector</p>\n\n<p>I tried some options from this post: <a href=\"https://stackoverflow.com/questions/22641306/get-index-of-qpushbutton-on-2d-array-qpushbutton\">Get index of QPushButton on 2D array QPushButton</a> but they all don't work. </p>\n\n<p>Can you help me to see why the signals and slots are not connected? And is there a way to check if the signal is connected?\nI would appreciate any helps and feedback. Thank you!</p>\n\n<pre><code>void MainWindow::displayPuzzle(QVector&lt;QVector&lt;QPushButton*&gt;&gt;&amp; button, QVector&lt;QVector&lt;QChar&gt;&gt; puzzle2D){\n\nwidget1 = new QWidget;\nQGridLayout* l = new QGridLayout;\nQSignalMapper mapper;\n\nfor (int r = 0; r &lt; puzzle2D.size(); r++) {\n    QVector&lt;QPushButton*&gt; vect;\n    for (int c = 0; c &lt; puzzle2D[r].size(); c++) {\n\n        //format the button\n        vect.push_back(new QPushButton);\n        vect.last()-&gt;setText(puzzle2D[r][c]);\n        vect.last()-&gt;setFixedSize(60,60);\n        vect.last()-&gt;show();\n        auto pos = QString{\"%1 %2\"}.arg(r).arg(c);\n\n        //connect with signals and slots\n        mapper.connect(vect.last(), SIGNAL(clicked()), SLOT(map()));\n        mapper.setMapping(vect.last(), pos);\n\n        //add button to layout\n        l-&gt;addWidget(vect.last(), r, c);\n        l-&gt;setSpacing(0);\n        l-&gt;setMargin(0);\n        l-&gt;setContentsMargins(-1,-1,-1,-1);\n\n    }\n    button.push_back(vect);\n}\nconnect(&amp;mapper, SIGNAL(mapped(QString)), SLOT(puzzleClick(QString)));\n\nwidget1-&gt;setLayout(l);\n\n}\n\nvoid MainWindow::puzzleClick(QString text){\n\n    int r = text.split(\" \").at(0).toInt();\n    int c = text.split(\" \").at(1).toInt();\n\n    QMessageBox::information(this, \"click:\", r + \" \" + c );\n\n}\n</code></pre>\n"}, {"tags": ["c++", "performance", "gcc", "computer-vision", "dlib"], "comments": [{"owner": {"reputation": 1624, "user_id": 497313, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/VUTOp.jpg?s=128&g=1", "display_name": "rossb83", "link": "https://stackoverflow.com/users/497313/rossb83"}, "edited": false, "score": 2, "creation_date": 1492012060, "post_id": 43373347, "comment_id": 73810641, "body": "The bottleneck comes from reading off the harddrive. Once you deserialize are you caching the data, or are you deserializing in every iteration of the loop? Make sure you cache your results. If this is the case, there might be some multi-threaded option in DLIB for this. Something else you can do is get a faster harddrive or get a solid state drive. One last thing you can do is store the data from the *.dat file in either an in-memory database such as memcached, or a web service based database such as dynamodb and write your own custom logic to always pull from that database."}], "owner": {"reputation": 119, "user_id": 2578257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000600749144/picture?type=large", "display_name": "ivan.koval", "link": "https://stackoverflow.com/users/2578257/ivan-koval"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 516, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1492011376, "creation_date": 1492009715, "last_edit_date": 1492011376, "question_id": 43373347, "link": "https://stackoverflow.com/questions/43373347/how-to-speed-up-deserialize-function-in-dlib", "title": "How to speed up deserialize function in dlib", "body": "<p>I'm using a c++ version of dlib to extract positions of the facial landmarks in an image. I would like to reduce the execution time. Now it takes around 2.5 seconds to run a complied file and detect landmark on a single image.</p>\n\n<p>After an analysis, I found that the main bottleneck is the deserialize function which takes a path to a shape predictor and loads this file to a shape predictor object. This function takes 1.5 seconds.</p>\n\n<p>The code snippet is below.</p>\n\n<pre><code>shape_predictor sp;\ndeserialize(\"shape_predictor_68_face_landmarks.dat\") &gt;&gt; sp; \n</code></pre>\n\n<p>I wonder if there could be a way to speed up the deserialize function.</p>\n"}, {"tags": ["c++", "arrays", "class", "constructor"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1492009589, "post_id": 43373263, "comment_id": 73808708, "body": "Whenever you think &quot;dynamic array&quot;, your next thought should be <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a>."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 3, "creation_date": 1492009636, "post_id": 43373263, "comment_id": 73808737, "body": "1. don&#39;t use <code>malloc</code> in C++ (except in certain advanced cases) 2. don&#39;t use raw arrays (prefer <code>std::vector</code>)"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1492009640, "post_id": 43373263, "comment_id": 73808740, "body": "And <i>never</i> use <code>malloc</code> to allocate memory in C++. While it works to allocate memory, it doesn&#39;t <i>construct</i> the objects. I.e. in your case the <code>A</code> constructor will never be called. Using <code>std::vector</code> of course solves both the allocation and construction problem."}, {"owner": {"reputation": 489, "user_id": 7684979, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/55dee8eaddd0b1bef61d118334acefb9?s=128&d=identicon&r=PG&f=1", "display_name": "xMutzelx", "link": "https://stackoverflow.com/users/7684979/xmutzelx"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1492010383, "post_id": 43373263, "comment_id": 73809358, "body": "@Someprogrammerdude Thank you for you advices. I choosed malloc, because I have to use a similar function, that only retruns a pointer to some memory. I will try to use the vector. Can you please give me a hint, on how I could call the constructor of A? What do I have to change?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1492012634, "post_id": 43373263, "comment_id": 73811037, "body": "That&#39;s one of the beauties of C++. you don&#39;t call the constructor. The constructor is called for you if you allocate statically or with <code>new</code>."}, {"owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "edited": false, "score": 0, "creation_date": 1492013294, "post_id": 43373263, "comment_id": 73811488, "body": "So you mean you want to create an array of 19 objects of type <i>B</i>, and each object has, as a field of the class, an array of a variable number of <i>A</i> objects?"}, {"owner": {"reputation": 489, "user_id": 7684979, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/55dee8eaddd0b1bef61d118334acefb9?s=128&d=identicon&r=PG&f=1", "display_name": "xMutzelx", "link": "https://stackoverflow.com/users/7684979/xmutzelx"}, "reply_to_user": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "edited": false, "score": 0, "creation_date": 1492077255, "post_id": 43373263, "comment_id": 73839049, "body": "@stackptr Correct, That is what I want to do."}], "answers": [{"tags": [], "owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "is_accepted": true, "score": 0, "last_activity_date": 1492088677, "creation_date": 1492088677, "answer_id": 43393145, "question_id": 43373263, "link": "https://stackoverflow.com/questions/43373263/creating-a-dynamical-array-of-objects-in-the-constructor-of-a-different-class/43393145#43393145", "title": "Creating a dynamical array of objects in the constructor of a different class", "body": "<blockquote>\n  <p>I would like to create an array of 19 B objects, which contains another array of X A objects.</p>\n</blockquote>\n\n<pre><code>class B {\n    std::vector&lt;A&gt; x;\npublic:\n    // your public interface here\n};\n\nB arr[19];\n</code></pre>\n\n<p>The solution becomes very simple when you use good RAII solutions like <code>std::vector</code>, because it does the memory management for you. Memory is allocated automatically, and you can use <a href=\"http://en.cppreference.com/w/cpp/container/vector/reserve\" rel=\"nofollow noreferrer\"><code>std::vector::reserve</code></a> to allocate a certain number of <code>A</code> objects in the vector.</p>\n"}], "owner": {"reputation": 489, "user_id": 7684979, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/55dee8eaddd0b1bef61d118334acefb9?s=128&d=identicon&r=PG&f=1", "display_name": "xMutzelx", "link": "https://stackoverflow.com/users/7684979/xmutzelx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 43393145, "answer_count": 1, "score": -1, "last_activity_date": 1492088677, "creation_date": 1492009467, "question_id": 43373263, "link": "https://stackoverflow.com/questions/43373263/creating-a-dynamical-array-of-objects-in-the-constructor-of-a-different-class", "title": "Creating a dynamical array of objects in the constructor of a different class", "body": "<p>I have a headache. Is the following code snippet right? I would like to create an array of 19 B objects, which contains another array of X A objects. (X is variable, I mean that the As array could vary in length between the B objects) </p>\n\n<p>Later on I would like to say something like <code>B_obj[i].As[j].number = 0;</code> <br>\n(i = [0-18], j = [0 - depends on the object])</p>\n\n<p>Example:</p>\n\n<pre><code>class A\n{\n    public:\n        A();\n\n    private:\n        char *arena;\n        size_t size;\n        int number;\n};\n\nA::A()\n{\n    size = 5;\n\n    arena= (char *) malloc (size);\n\n   ... some code ...\n}\n\nclass B\n{\n    private:\n        int counter;\n        A* As;\n\n    public:\n        B();\n};\n\nB::B()\n{\n    counter = getMyNumber(); /* getMyNumber returns an individual ID */\n    As= (A*) malloc(counter * sizeof(A)));\n}\n\nB B_obj[19];\n</code></pre>\n\n<p>Is the memory correct allocated? Everything have to be setup, I am not allowed to alloc extra memory later on.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 3, "creation_date": 1492009424, "post_id": 43373219, "comment_id": 73808558, "body": "Literals of numbers starting with &#39;0&#39; are in base 8."}, {"owner": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "edited": false, "score": 2, "creation_date": 1492009453, "post_id": 43373219, "comment_id": 73808593, "body": "Base 8, actually."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1492009469, "post_id": 43373219, "comment_id": 73808603, "body": "Right, corrected."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1492009557, "post_id": 43373219, "comment_id": 73808674, "body": "The above comments are correct, see the various <a href=\"http://en.cppreference.com/w/cpp/language/integer_literal\" rel=\"nofollow noreferrer\">integer literals</a> including prefixes and suffixes."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1492009563, "post_id": 43373219, "comment_id": 73808680, "body": "How&#39;s <a href=\"http://ideone.com/VMuZCE\" rel=\"nofollow noreferrer\"><code>13506</code></a> and <code>32302</code> the same number? ;-) ;-) ;-)"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1492009642, "post_id": 43373219, "comment_id": 73808745, "body": "Run <code>cout &lt;&lt; a &lt;&lt; endl;</code> for an explanation."}, {"owner": {"reputation": 1301, "user_id": 5871514, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/637xu.png?s=128&g=1", "display_name": "BOTJr.", "link": "https://stackoverflow.com/users/5871514/botjr"}, "edited": false, "score": 0, "creation_date": 1492009677, "post_id": 43373219, "comment_id": 73808775, "body": "Thanks everyone, got it."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1492009922, "post_id": 43373219, "comment_id": 73808983, "body": "This isn&#39;t the problem, but don&#39;t use <code>std::endl</code> unless you need the extra stuff that it does. <code>&#39;\\n&#39;</code> ends a line."}], "answers": [{"tags": [], "owner": {"reputation": 6027, "user_id": 7738328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84d6eb24cbea7d5c8d4bdab21dd3d232?s=128&d=identicon&r=PG&f=1", "display_name": "JohanL", "link": "https://stackoverflow.com/users/7738328/johanl"}, "is_accepted": true, "score": 3, "last_activity_date": 1492009615, "creation_date": 1492009615, "answer_id": 43373314, "question_id": 43373219, "link": "https://stackoverflow.com/questions/43373219/modulus-of-same-number-returns-different-results/43373314#43373314", "title": "Modulus of same number returns different results", "body": "<p>Starting a numeral with 0 (zero) in c/c++ means it is an octal (base 8) number. Thus 032302 is 13506 in decimal notation. Hence, the last digit is 6 and that is what you get from your modulus operation.</p>\n"}, {"tags": [], "owner": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "is_accepted": false, "score": 1, "last_activity_date": 1492009885, "creation_date": 1492009885, "answer_id": 43373417, "question_id": 43373219, "link": "https://stackoverflow.com/questions/43373219/modulus-of-same-number-returns-different-results/43373417#43373417", "title": "Modulus of same number returns different results", "body": "<p>Considering the fact that </p>\n\n<pre><code>int a = 032302; \n</code></pre>\n\n<p>and </p>\n\n<pre><code>int b = 13506;\n</code></pre>\n\n<p>are holding the same integer value since variable <strong>a</strong> is init as octal literal</p>\n\n<p>then is correct that </p>\n\n<p><strong>a%10</strong> returns 6 same as  <strong>b%10</strong> returns 6</p>\n"}], "owner": {"reputation": 1301, "user_id": 5871514, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/637xu.png?s=128&g=1", "display_name": "BOTJr.", "link": "https://stackoverflow.com/users/5871514/botjr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 43373314, "answer_count": 2, "score": 0, "last_activity_date": 1492009885, "creation_date": 1492009365, "question_id": 43373219, "link": "https://stackoverflow.com/questions/43373219/modulus-of-same-number-returns-different-results", "title": "Modulus of same number returns different results", "body": "<pre><code>int a=032302;\ncout&lt;&lt;a%10&lt;&lt;endl; // output 6\nint b=32302;\ncout&lt;&lt;b%10&lt;&lt;endl;  // output 2\n</code></pre>\n\n<p>I was trying to get the unit's place of a number but while coding i found a weird thing, the first and the second no are technically same, however they both output different results.</p>\n\n<p>The first one returns 6 while the second one 2 , am i missing  something here?</p>\n"}, {"tags": ["c++", "string", "class", "visual-studio-2012", "constants"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 3, "creation_date": 1492009381, "post_id": 43373209, "comment_id": 73808515, "body": "It <i>is</i> initialized. Just implicitly."}, {"owner": {"reputation": 4783, "user_id": 948128, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/788ac757a97bd1fa3ca6fd0d3eeffc1b?s=128&d=identicon&r=PG", "display_name": "piwi", "link": "https://stackoverflow.com/users/948128/piwi"}, "edited": false, "score": 0, "creation_date": 1492009440, "post_id": 43373209, "comment_id": 73808578, "body": "<code>const</code> means the member will not be altered once constructed; in your sample <code>c</code> is initialized using its default constructor."}], "answers": [{"comments": [{"owner": {"reputation": 761, "user_id": 6386155, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh3.googleusercontent.com/-YUFMoRcx3uo/AAAAAAAAAAI/AAAAAAAAAAA/I9gNVrYQpDQ/photo.jpg?sz=128", "display_name": "user6386155", "link": "https://stackoverflow.com/users/6386155/user6386155"}, "edited": false, "score": 0, "creation_date": 1492012720, "post_id": 43373359, "comment_id": 73811097, "body": "@Gaurva Sehgal must have clicked on it accidentally while accepting as answer"}], "tags": [], "owner": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "is_accepted": true, "score": 0, "last_activity_date": 1492009745, "creation_date": 1492009745, "answer_id": 43373359, "question_id": 43373209, "link": "https://stackoverflow.com/questions/43373209/how-do-i-enforce-member-initialization-in-a-class-under-c/43373359#43373359", "title": "How do I enforce member initialization in a class under C++?", "body": "<pre><code>const member must be initialized when declared\n</code></pre>\n\n<p>The above holds true for only built-in and POD types.For Non-POD types, default constructor will be called which will initialize it.\n<code>std::string</code> is a non-POD.</p>\n\n<p>As mentioned in comments by @Dan, try changing <code>const string c;</code> to <code>const int c;</code>,the compiler will complain.</p>\n"}], "owner": {"reputation": 761, "user_id": 6386155, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh3.googleusercontent.com/-YUFMoRcx3uo/AAAAAAAAAAI/AAAAAAAAAAA/I9gNVrYQpDQ/photo.jpg?sz=128", "display_name": "user6386155", "link": "https://stackoverflow.com/users/6386155/user6386155"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 43373359, "answer_count": 1, "score": -1, "last_activity_date": 1501782753, "creation_date": 1492009329, "last_edit_date": 1501782753, "question_id": 43373209, "link": "https://stackoverflow.com/questions/43373209/how-do-i-enforce-member-initialization-in-a-class-under-c", "title": "How do I enforce member initialization in a class under C++?", "body": "<p>I was under the assumption that a <code>const</code> member must be initialized in the class constructor.</p>\n\n<p>Consider following code</p>\n\n<pre><code>class ABC\n {\n  const string a;\n  const string b;\n  const string c;\n  public:\n  ABC( struct input in): a(in.a), b(in.b){}\n};\n</code></pre>\n\n<p>I thought this would trigger a compile time error since explicit initialization for <code>c</code> is missing. However this compiles and gives empty string for <code>c</code> under VS2012. Is this correct behavior? (or special case for <code>string</code>?)</p>\n"}, {"tags": ["c++", "stl"], "comments": [{"owner": {"reputation": 5508, "user_id": 498424, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ig1qY.jpg?s=128&g=1", "display_name": "Raxvan", "link": "https://stackoverflow.com/users/498424/raxvan"}, "edited": false, "score": 0, "creation_date": 1492008298, "post_id": 43372786, "comment_id": 73807588, "body": "<code>std::list</code> <a href=\"http://en.cppreference.com/w/cpp/container/list/erase\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/list/erase</a>"}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 3, "creation_date": 1492008636, "post_id": 43372786, "comment_id": 73807892, "body": "note: still, if you support other operations, consider (measure) <code>vector</code>. double linked lists have a lot of overhead"}, {"owner": {"reputation": 274, "user_id": 5333904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4dbccef000a502b74ba490b8d96caad?s=128&d=identicon&r=PG&f=1", "display_name": "Pandatyr", "link": "https://stackoverflow.com/users/5333904/pandatyr"}, "edited": false, "score": 4, "creation_date": 1492009004, "post_id": 43372786, "comment_id": 73808197, "body": "It&#39;s worth noting that any non-sorted container can swap an element at any position with an element at the end (or the beginning) of the container and then delete the last/first element. This allows deletion in constant time provided swapping the value_type of the container in question can be done in constant time. This technique has been explained in <a href=\"https://youtu.be/oBbGC-sUYVA?t=155\" rel=\"nofollow noreferrer\">this talk</a> at CppCon 2016"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1492009342, "post_id": 43372786, "comment_id": 73808480, "body": "Any of the node-based containers should have constant-time removal."}], "answers": [{"tags": [], "owner": {"reputation": 451, "user_id": 5467603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f67626c063c471ba4bb2d1126e4df95f?s=128&d=identicon&r=PG&f=1", "display_name": "Yuri Dolotkazin", "link": "https://stackoverflow.com/users/5467603/yuri-dolotkazin"}, "is_accepted": false, "score": 2, "last_activity_date": 1492008369, "creation_date": 1492008369, "answer_id": 43372863, "question_id": 43372786, "link": "https://stackoverflow.com/questions/43372786/constant-time-removing-element-in-an-stl-container/43372863#43372863", "title": "Constant time removing element in an stl container", "body": "<p>At least std::list allow to erase element in constant time.</p>\n"}, {"tags": [], "owner": {"reputation": 5508, "user_id": 498424, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ig1qY.jpg?s=128&g=1", "display_name": "Raxvan", "link": "https://stackoverflow.com/users/498424/raxvan"}, "is_accepted": true, "score": 2, "last_activity_date": 1492008766, "last_edit_date": 1492008766, "creation_date": 1492008377, "answer_id": 43372869, "question_id": 43372786, "link": "https://stackoverflow.com/questions/43372786/constant-time-removing-element-in-an-stl-container/43372869#43372869", "title": "Constant time removing element in an stl container", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/container/list\" rel=\"nofollow noreferrer\">std::list</a> has <a href=\"http://en.cppreference.com/w/cpp/container/list/erase\" rel=\"nofollow noreferrer\">erase</a> with complexity:</p>\n\n<blockquote>\n  <p>Complexity</p>\n  \n  <p>1) Constant.</p>\n  \n  <p>2) Linear in the distance between first and last.</p>\n</blockquote>\n\n<p>where for case 2 you use erase for a range of elements.</p>\n\n<p>from the docs, <code>std::list&lt;T&gt;::erase</code> looks like this:</p>\n\n<pre><code>//(1)\niterator erase( iterator pos );\niterator erase( const_iterator pos );\n//(2)   \niterator erase( iterator first, iterator last );\niterator erase( const_iterator first, const_iterator last );\n</code></pre>\n\n<p>another one is <a href=\"http://std::forward_list\" rel=\"nofollow noreferrer\">std::forward_list</a> (not exactly the same because it only has <code>erase_after</code>)</p>\n"}, {"comments": [{"owner": {"reputation": 726, "user_id": 14248283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rWl7x.jpg?s=128&g=1", "display_name": "Aryan Parekh", "link": "https://stackoverflow.com/users/14248283/aryan-parekh"}, "edited": false, "score": 0, "creation_date": 1601626980, "post_id": 47882239, "comment_id": 113470817, "body": "is this as fast as removing an element form a linked list?"}, {"owner": {"reputation": 98, "user_id": 4782442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gv1GL.jpg?s=128&g=1", "display_name": "Enhex", "link": "https://stackoverflow.com/users/4782442/enhex"}, "reply_to_user": {"reputation": 726, "user_id": 14248283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rWl7x.jpg?s=128&g=1", "display_name": "Aryan Parekh", "link": "https://stackoverflow.com/users/14248283/aryan-parekh"}, "edited": false, "score": 0, "creation_date": 1601738456, "post_id": 47882239, "comment_id": 113501716, "body": "@AryanParekh they&#39;re both O(1) and I assume vector will be faster since it&#39;s more cache friendly. You could benchmark it to see if that&#39;s the case for you."}, {"owner": {"reputation": 726, "user_id": 14248283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rWl7x.jpg?s=128&g=1", "display_name": "Aryan Parekh", "link": "https://stackoverflow.com/users/14248283/aryan-parekh"}, "edited": false, "score": 0, "creation_date": 1601739637, "post_id": 47882239, "comment_id": 113502071, "body": "But let&#39;s say I wanna swap <code>vec[vec.size-1]</code> and <code>x</code>. Still gotta find x right?"}, {"owner": {"reputation": 98, "user_id": 4782442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gv1GL.jpg?s=128&g=1", "display_name": "Enhex", "link": "https://stackoverflow.com/users/4782442/enhex"}, "reply_to_user": {"reputation": 726, "user_id": 14248283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rWl7x.jpg?s=128&g=1", "display_name": "Aryan Parekh", "link": "https://stackoverflow.com/users/14248283/aryan-parekh"}, "edited": false, "score": 0, "creation_date": 1601828331, "post_id": 47882239, "comment_id": 113520639, "body": "@AryanParekh if you have to find it first that&#39;s a different problem. The question states there&#39;s already an iterator available so no need for search."}], "tags": [], "owner": {"reputation": 98, "user_id": 4782442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gv1GL.jpg?s=128&g=1", "display_name": "Enhex", "link": "https://stackoverflow.com/users/4782442/enhex"}, "is_accepted": false, "score": 1, "last_activity_date": 1513669866, "creation_date": 1513669866, "answer_id": 47882239, "question_id": 43372786, "link": "https://stackoverflow.com/questions/43372786/constant-time-removing-element-in-an-stl-container/47882239#47882239", "title": "Constant time removing element in an stl container", "body": "<p>If you don't need to maintain the order of the elements you can use <code>std::vector</code> with \"swap and pop\" - you swap the element you want to delete with the last element in the vector, and then pop the new last element.</p>\n"}], "owner": {"reputation": 704, "user_id": 7488960, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9e6e6f85903b38fb8e826f97ede366a8?s=128&d=identicon&r=PG&f=1", "display_name": "Akash", "link": "https://stackoverflow.com/users/7488960/akash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1219, "favorite_count": 0, "accepted_answer_id": 43372869, "answer_count": 3, "score": 1, "last_activity_date": 1513669866, "creation_date": 1492008183, "last_edit_date": 1492008307, "question_id": 43372786, "link": "https://stackoverflow.com/questions/43372786/constant-time-removing-element-in-an-stl-container", "title": "Constant time removing element in an stl container", "body": "<p>Simple question : Is there any STL container that allows me to delete the current iterator position in constant time ?<br>\nThanks in advance !</p>\n"}, {"tags": ["c++", "arrays", "loops", "multidimensional-array", "filestream"], "comments": [{"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 2, "creation_date": 1492008166, "post_id": 43372737, "comment_id": 73807467, "body": "Step through it with a debugger and you will find out what is happening."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1492008240, "post_id": 43372737, "comment_id": 73807530, "body": "When you ask for the <code>row</code> and <code>col</code> input and use those variables, you seem to have forgotten that array indexes are zero-based."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1492008319, "post_id": 43372737, "comment_id": 73807611, "body": "This example works fine, provided you take care not to provide out of bound indices."}], "answers": [{"tags": [], "owner": {"reputation": 302, "user_id": 6690544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQxee.jpg?s=128&g=1", "display_name": "ShahzadIftikhar", "link": "https://stackoverflow.com/users/6690544/shahzadiftikhar"}, "is_accepted": false, "score": 0, "last_activity_date": 1492082814, "creation_date": 1492082814, "answer_id": 43391023, "question_id": 43372737, "link": "https://stackoverflow.com/questions/43372737/md-array-not-updating/43391023#43391023", "title": "MD array not updating", "body": "<p>you need to take care of array indices.</p>\n\n<pre><code>if(seats[row-1][col-1]=='X')\n    cout&lt;&lt;\"Sorry this seat is already taken. Try another.\\n\";\nelse  {       \n    cout&lt;&lt;\"Your seat has been reserved.\";\n    cout&lt;&lt;\" Be sure to check the updated seat chart to confirm your order.\";\n    seats[row-1][col-1]='X';\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7857114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6594706dfed4501d8acbc06166e448d6?s=128&d=identicon&r=PG&f=1", "display_name": "Dom E. ", "link": "https://stackoverflow.com/users/7857114/dom-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492082814, "creation_date": 1492008051, "last_edit_date": 1492010079, "question_id": 43372737, "link": "https://stackoverflow.com/questions/43372737/md-array-not-updating", "title": "MD array not updating", "body": "<p>I am trying to finish up on a homework project for my intro to programming class. We just discussed Multi-Dimensional Arrays.</p>\n\n<p>We are supposed to design a program that essential acts as an system for booking seats on a plane. You pick a seat, and if it's available it is marked with an 'X' character to denote that it has been selected. If you pick a seat that is not available (marked with an 'X') then you are told the seat is unavailable and given the option to try and pick again. After each selection the seating map for the airplane is updated.</p>\n\n<p>The problem I've been running into is that the map is not updating properly. After asking my professor for some help she advised me to change the loop but, I'm not exactly sure how I would change it. Can someone offer me some help? (info below):\nHere's What the seat map looks like: </p>\n\n<ol>\n<li>A B C D</li>\n<li>A B C D</li>\n<li>A B C D</li>\n<li>A B C D</li>\n<li>A B C D</li>\n<li>A B C D</li>\n<li><p>A B C D</p>\n\n<pre><code>int row,  col;\nchar seats[7][5], choice;\n\nifstream input;\ninput.open(\"plane.txt\");\n\nfor(int a = 0; a&lt;7; a++)\n{       cout&lt;&lt;\"\\n\";\n        for(int b = 0; b&lt;5; b++)\n        {       input&gt;&gt;seats[a][b];\n                cout&lt;&lt;seats[a][b]&lt;&lt;\" \";\n        }\n}\n\n\ndo\n{       cout&lt;&lt;\"What row would you like to sit in?\\n\";\n        cin&gt;&gt;row;\n        cout&lt;&lt;\"What seat would you like? (A=1, B=2, C=3, D=5)\";\n        cin&gt;&gt;col;\n        if(seats[row][col]=='X')\n                cout&lt;&lt;\"Sorry this seat is already taken. Try another.\\n\";\n        else\n        {       cout&lt;&lt;\"Your seat has been reserved.\";\n                cout&lt;&lt;\" Be sure to check the updated seat chart to confirm your order.\";\n                seats[row][col]='X';\n        }\n        for(int c = 0; c&lt;7; c++)\n        {       cout&lt;&lt;\"\\n\";\n                for(int d = 0; d&lt;5; d++)\n                {       cout&lt;&lt;seats[c][d]&lt;&lt;\" \";\n                }\n        }\n        cout&lt;&lt;\"\\n\";\n        cout&lt;&lt;\" Would you like to pick another seat? (Y/N)\";\n        cin&gt;&gt;choice;\n}\nwhile((choice=='y')||(choice=='Y'));\nreturn 0;\n</code></pre>\n\n<p>}</p></li>\n</ol>\n"}, {"tags": ["c++", "class", "inheritance", "copy-constructor"], "comments": [{"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1492007287, "post_id": 43372350, "comment_id": 73806705, "body": "constructor is called at <code>new C[len]</code> followed by assignment, no copy."}, {"owner": {"reputation": 155, "user_id": 7533694, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/506f57970de39903f590817d99d46e1a?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Schneider", "link": "https://stackoverflow.com/users/7533694/rob-schneider"}, "reply_to_user": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1492007393, "post_id": 43372350, "comment_id": 73806797, "body": "How would I change this? I am just staring to learn c++."}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1492007514, "post_id": 43372350, "comment_id": 73806907, "body": "You do not need to change anything for this code. (or you should use <code>vector</code>)"}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 0, "last_activity_date": 1492007372, "creation_date": 1492007372, "answer_id": 43372476, "question_id": 43372350, "link": "https://stackoverflow.com/questions/43372350/copy-constructor-inheritance-dynamically-allocated-array/43372476#43372476", "title": "Copy constructor inheritance dynamically allocated array", "body": "<blockquote>\n  <p>How do I fix this?</p>\n</blockquote>\n\n<p>Well, you don't need to.  In this case that is the proper behavior.  Since you need to make a deep copy when you do</p>\n\n<pre><code>array = new C[len];\n</code></pre>\n\n<p>In <code>B</code>'s copy constructor you default construct <code>len</code> number of <code>C</code>'s in the memory location <code>new</code> gives you.  You then call copy assignment operator of <code>C</code> <code>len</code> times in</p>\n\n<pre><code>for(int i=0;i&lt;len;i++)\n{\n    array[i] = other.array[i];\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": true, "score": 0, "last_activity_date": 1492007375, "creation_date": 1492007375, "answer_id": 43372479, "question_id": 43372350, "link": "https://stackoverflow.com/questions/43372350/copy-constructor-inheritance-dynamically-allocated-array/43372479#43372479", "title": "Copy constructor inheritance dynamically allocated array", "body": "<p>This line will call <code>len</code> number of default <code>C</code> constructors</p>\n\n<pre><code>array = new C[len];\n</code></pre>\n\n<p>Then this line should actually call the <em>copy assignment</em> operator</p>\n\n<pre><code>array[i] = other.array[i];\n</code></pre>\n\n<p>Add this line to <code>C</code> and you will see this is a copy assignment</p>\n\n<pre><code>C&amp; operator=(const C&amp;)\n{\n    std::cout &lt;&lt; \"Copy Assignment Operator C\" &lt;&lt; this &lt;&lt; std::endl;\n    /* do actual copying here */\n}\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 7533694, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/506f57970de39903f590817d99d46e1a?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Schneider", "link": "https://stackoverflow.com/users/7533694/rob-schneider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 43372479, "answer_count": 2, "score": 0, "last_activity_date": 1492007375, "creation_date": 1492007040, "question_id": 43372350, "link": "https://stackoverflow.com/questions/43372350/copy-constructor-inheritance-dynamically-allocated-array", "title": "Copy constructor inheritance dynamically allocated array", "body": "<p>I have the following class where I need to make a copy constructor which copies a dynamically allocate array. However, in the code below it uses the constructor of C and not the copy constructor. How do I fix this?</p>\n\n<pre><code>    #ifndef B_HH\n    #define B_HH\n\n    #include &lt;iostream&gt;\n\n    #include \"C.hh\"\n\n    class B {\n    public:\n\n      B() { std::cout &lt;&lt; \"Constructor B\" &lt;&lt; this &lt;&lt; std::endl ;  array = new C[len];}\n      B(const B&amp; other): array(other.array) { std::cout &lt;&lt; \"Copy Constructor B\" &lt;&lt; this &lt;&lt; std::endl ; \n       array = new C[len];\n        for(int i=0;i&lt;len;i++)\n       {\n           array[i] = other.array[i];\n       } \n\n      }\n      ~B() { std::cout &lt;&lt; \"Destructor B\" &lt;&lt; this &lt;&lt; std::endl ; delete[] array;}\n\n    private:\n\n\n       C *array;\n       static const int len = 12;\n\n    } ;\n\n    #endif \n</code></pre>\n\n<p>And my class C looks like this:</p>\n\n<pre><code>    #ifndef C_HH\n    #define C_HH\n\n    #include &lt;iostream&gt;\n\n    class C {\n    public:\n\n      C() { std::cout &lt;&lt; \"Constructor C\" &lt;&lt; this &lt;&lt; std::endl ; }\n      C(const C&amp;) { std::cout &lt;&lt; \"Copy Constructor C\" &lt;&lt; this &lt;&lt; std::endl ; }\n      ~C() { std::cout &lt;&lt; \"Destructor C\" &lt;&lt; this &lt;&lt; std::endl ; }\n\n    private:\n\n    } ;\n\n    #endif \n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1492007147, "post_id": 43372347, "comment_id": 73806578, "body": "Note that you don&#39;t create a single vector of 400 elements, you create an <i>array of 400 vectors!</i> Is that really your purpose? Please see e.g. <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\">this <code>std::vector</code> reference</a> (especially the <a href=\"http://en.cppreference.com/w/cpp/container/vector/vector\" rel=\"nofollow noreferrer\">constructor reference</a>) for more information. Also note that by calling <code>push_back</code> you <i>append</i> to the vector, you do not overwrite existing elements."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1492007309, "post_id": 43372347, "comment_id": 73806723, "body": "And <i>if</i> you want an array of vectors, why not create a vector <i>of vectors</i>? That would make it much more dynamic, and you could have more (or less) than 400."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1492007318, "post_id": 43372347, "comment_id": 73806737, "body": "Lastly please take some time to read <a href=\"http://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">Why is iostream::eof inside a loop condition considered wrong?</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1492011696, "post_id": 43372347, "comment_id": 73810380, "body": "What if you have dis file and not dat file?"}, {"owner": {"reputation": 11, "user_id": 7857032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98e8464f2259b9af4d7bff55f3e3a760?s=128&d=identicon&r=PG&f=1", "display_name": "mccneedle", "link": "https://stackoverflow.com/users/7857032/mccneedle"}, "edited": false, "score": 0, "creation_date": 1492012557, "post_id": 43372347, "comment_id": 73810976, "body": "Thanks! eof is the main problem for my code. Still fixing some minor issue."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1492023154, "post_id": 43372347, "comment_id": 73817003, "body": "I&#39;m wondering why are you using <code>1</code> (an <code>int</code>, BTW, always the same) as the first element of all the vectors. There&#39;s any chance you should use a <code>class</code> (with different members) instead of a vector of <code>double</code>s?"}], "owner": {"reputation": 11, "user_id": 7857032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98e8464f2259b9af4d7bff55f3e3a760?s=128&d=identicon&r=PG&f=1", "display_name": "mccneedle", "link": "https://stackoverflow.com/users/7857032/mccneedle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 589, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1492007029, "creation_date": 1492007029, "question_id": 43372347, "link": "https://stackoverflow.com/questions/43372347/c-reading-dat-file-into-vector", "title": "C++ reading dat.file into vector", "body": "<p>I am trying to read a dat file into a vector\nthe data is 5 in a row and 400 columns\nhowever, it results in cygwin_exception::open_stackdumpfile: Dumping stack trace to ....</p>\n\n<pre><code>#include &lt;iostream&gt; \n#include &lt;stdio.h&gt;\n#include &lt;fstream&gt;\n#include &lt;vector&gt;\nusing namespace std; \n\nint main() { \n\nchar line[40];\nvector&lt;double&gt; vec[400];\n#define DEMENSION 5\nifstream file (\"train.dat\", ios::in);\n\n\n//file.open(\"train.dat\",ios::in);\n\nint i=0,l=1;\ndouble tmp;\n\n while(!file.eof()){\n    //vec.push_back(l);\n    vec[i].push_back(l);\n\n    for(int j = 0; j &lt; DEMENSION; j++) {\n        file &gt;&gt; tmp;\n        vec[i].push_back(tmp);\n    }\n    cout &lt;&lt; vec[i].size()&lt;&lt; endl;\n    i++;\n\n} \ncout&lt;&lt;i&lt;&lt;endl;\n\n//file.close();\nfor(int iy; iy &lt; 400; ++iy){\n    vector&lt;double&gt;:: iterator iter = vec[iy].begin();\n    for(int ix = 0; iter != vec[iy].end(); ++iter, ++ix){\n         cout &lt;&lt; *iter&lt;&lt;\" \" ;\n        }\n        cout&lt;&lt;endl;\n }\n\n\n\n return 0; \n}\n</code></pre>\n\n<p>But if I change the dimension to 6, it works.\nThen the vector results in 7 number in a row(one number is add by me),left only 344 columns,\nwhich is not I want....It supposed to be 6 numbers if the dimension is correctly set at 5,</p>\n"}, {"tags": ["c++", "arrays", "command-line-arguments", "argv"], "comments": [{"owner": {"reputation": 27011, "user_id": 1490355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/296f0478cb1b6724e3f862ace601fa99?s=128&d=identicon&r=PG", "display_name": "SingerOfTheFall", "link": "https://stackoverflow.com/users/1490355/singerofthefall"}, "edited": false, "score": 3, "creation_date": 1492006892, "post_id": 43372267, "comment_id": 73806375, "body": "Why would you want to do it?"}, {"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1492007144, "post_id": 43372267, "comment_id": 73806577, "body": "Have you considered pushing all the values into a <code>std::vector&lt;std::string&gt;</code> or <code>std::vector&lt;std::string_view&gt;</code> and then appending your new value where you want?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1492007181, "post_id": 43372267, "comment_id": 73806618, "body": "Just allocate an array of <code>char *</code> of size <code>argc + 2</code>, copy the original <code>argc</code> strings over from <code>argv[]</code>, then add your extra value and a final <code>NULL</code> in the last two elements."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 3, "creation_date": 1492007925, "post_id": 43372267, "comment_id": 73807268, "body": "Sounds like a &quot;XY problem&quot;, as in your solution doesn&#39;t sound like the correct one to any sensible programming problem. What is the core problem that you are actually trying to solve?"}, {"owner": {"reputation": 460, "user_id": 4517646, "user_type": "registered", "accept_rate": 7, "profile_image": "https://graph.facebook.com/100002821678926/picture?type=large", "display_name": "Nodirbek", "link": "https://stackoverflow.com/users/4517646/nodirbek"}, "edited": false, "score": 0, "creation_date": 1492045745, "post_id": 43372267, "comment_id": 73825907, "body": "Yeah, because at first it&#39;s a bit difficult to figure out concept of arrays in c++"}], "answers": [{"comments": [{"owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "edited": false, "score": 0, "creation_date": 1492007885, "post_id": 43372494, "comment_id": 73807232, "body": "It depends on the use of the program parameters. The use of <code>std::vector&lt;std::string&gt;</code> simplifies the copy but some API&#39;s require the <code>char**</code> (such as the <a href=\"http://doc.qt.io/qt-5/qcoreapplication.html#QCoreApplication\" rel=\"nofollow noreferrer\"><code>QCoreApplication</code></a> in Qt), and which cannot be directly obtained from the vector. If the original <code>char**</code> is not required, yours is a nice approach."}], "tags": [], "owner": {"reputation": 3107, "user_id": 4131673, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100000565112046/picture?type=large", "display_name": "jaskmar", "link": "https://stackoverflow.com/users/4131673/jaskmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1492007413, "creation_date": 1492007413, "answer_id": 43372494, "question_id": 43372267, "link": "https://stackoverflow.com/questions/43372267/how-to-append-a-value-to-the-array-of-command-line-arguments/43372494#43372494", "title": "How to append a value to the array of command line arguments?", "body": "<p>The argv is fixed-size block of memory. You have to copy whole content (all the pointers) to bigger array in order to extend it. Or just use <code>std::vector&lt;std::string&gt; args;</code> and manipulate this variable as it will do it for you.</p>\n\n<p>But to be honest - redesigning your solution could be a good idea - the copying operation might not be necessary. Maybe something like <code>std::vector&lt;std::string&gt; additional_parameters;</code> will meet your needs?</p>\n"}, {"tags": [], "owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "is_accepted": false, "score": 0, "last_activity_date": 1492008869, "last_edit_date": 1492008869, "creation_date": 1492007495, "answer_id": 43372528, "question_id": 43372267, "link": "https://stackoverflow.com/questions/43372267/how-to-append-a-value-to-the-array-of-command-line-arguments/43372528#43372528", "title": "How to append a value to the array of command line arguments?", "body": "<p>You must construct a new array. Here an example:</p>\n\n<pre><code>int new_argc = argc + 2;\nchar** new_argv = new char*[new_argc];\nnew_argv[argc + 1] = nullptr;\nfor (int ii = 0; ii &lt; argc; ++ii) {\n  new_argv[ii] = argv[ii];\n}\nnew_argv[argc] = new char[strlen(\"-app_ver\") + 1]; // extra char for null-terminated string\nstrcpy(new_argv[argc], \"-app_ver\");\n\n// use new_argc and new_argv\n\ndelete[] new_argv[argc];\ndelete[] new_argv; \n</code></pre>\n\n<p>See that I've allocated only the new parameters for the sake of optimization. To create a full copy you'll have to allocate the memory for the previously existing parameters.</p>\n\n<p>Just be careful with those manual memory allocations: delete them when finishing. You only have to delete the ones you've created.</p>\n\n<p>On the other hand, as <code>argv</code> and <code>argc</code> are usually used in the <code>main</code> function it is not a big deal (the memory-leak).</p>\n\n<p><strong>Remarks</strong></p>\n\n<p>As I don't know the future use of these new <em>command line arguments</em>, this solution tries to keep with the original data types of the <code>main</code> function. If it is passed to Boost or Qt, then the <code>char**</code> cannot be obtained from more direct options such as when using <code>std::vector&lt;std::string&gt;</code>. To start with, <code>std::string::c_str()</code> returns a <code>const char*</code>, and those pointers are not consecutive in memory.</p>\n\n<p>A safer option (no manual deletes) can be:</p>\n\n<pre><code>int new_argc = argc + 1;\nstd::vector&lt;std::unique_ptr&lt;char&gt;&gt; new_argv_aux(new_argc); // automatically destroyed\nfor (int ii = 0; ii &lt; argc; ++ii) {\n  new_argv_aux[ii].reset(new char[strlen(argv[ii]) + 1]);\n  strcpy(new_argv_aux[ii].get(), argv[ii]);\n}\nnew_argv_aux[argc].reset(new char[strlen(\"-app_ver\") + 1]);\nstrcpy(new_argv_aux[argc].get(), \"-app_ver\");\n\n// Now the actual double pointer is extracted from here\nstd::vector&lt;char*&gt; new_argv(new_argv_aux.size());\nfor (size_t ii = 0; ii &lt; new_argv_aux.size(); ++ii) {\n  new_argv[ii] = new_argv_aux[ii].get(); // soft-reference\n} // last element is null from std::unique_ptr constructor\n\nuse_here(new_argc, new_argv.data());\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "edited": false, "score": 0, "creation_date": 1492008030, "post_id": 43372674, "comment_id": 73807359, "body": "Right, I tried to keep with the original data types since we don&#39;t know the use. As I mentioned in another comment, some APIs, such as Qt and <a href=\"http://doc.qt.io/qt-5/qcoreapplication.html#QCoreApplication\" rel=\"nofollow noreferrer\"><code>QCoreApplication</code></a> require the <code>char**</code>, which cannot be obtained from the <code>std::vector&lt;std::string&gt;</code> directly. Otherwise, the one described here is a dynamic and safe solution."}], "tags": [], "owner": {"reputation": 1217, "user_id": 2660911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580a3e9a6939226a59fadb456c38912a?s=128&d=identicon&r=PG", "display_name": "baddger964", "link": "https://stackoverflow.com/users/2660911/baddger964"}, "is_accepted": true, "score": 2, "last_activity_date": 1492007864, "creation_date": 1492007864, "answer_id": 43372674, "question_id": 43372267, "link": "https://stackoverflow.com/questions/43372267/how-to-append-a-value-to-the-array-of-command-line-arguments/43372674#43372674", "title": "How to append a value to the array of command line arguments?", "body": "<p>Like cbuchart says, you have to create a new array or maybe a vector.\nUsing vector and string object can be more simple than char* and array.</p>\n\n<p>Exemple :</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main(int argc, char *argv[])\n{\n    vector&lt;string&gt; list;\n    for ( int i = 1 ; i &lt; argc ; i++){\n        string tmp (argv[i]);\n        list.push_back(tmp); // add all arguments to the vector\n    }\n\n    cout &lt;&lt; \"number of given arguments : \" &lt;&lt; list.size() &lt;&lt; endl;\n\n    list.push_back(\"-app_ver\"); // add one string to the vector\n\n    for ( int i = 0 ; i &lt; list.size() ; i++){\n        cout &lt;&lt; list[i] &lt;&lt; endl; // acces data of the vector\n    }\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 142, "user_id": 1626024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75cfcbe35d809b8f787593db89c95616?s=128&d=identicon&r=PG", "display_name": "willkill07", "link": "https://stackoverflow.com/users/1626024/willkill07"}, "edited": false, "score": 0, "creation_date": 1492009124, "post_id": 43373070, "comment_id": 73808290, "body": "This is by far the most expressive and C++-idiomatic way to solve this problem. Minimal allocation that is automatically managed, and it still can be easily used with C APIs."}], "tags": [], "owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "is_accepted": false, "score": 9, "last_activity_date": 1564214569, "last_edit_date": 1564214569, "creation_date": 1492008968, "answer_id": 43373070, "question_id": 43372267, "link": "https://stackoverflow.com/questions/43372267/how-to-append-a-value-to-the-array-of-command-line-arguments/43373070#43373070", "title": "How to append a value to the array of command line arguments?", "body": "<p>To duplicate your <code>argv</code>, you can use a <code>std::vector</code> of pointers to <code>char</code>.</p>\n\n<pre><code>std::vector&lt;const char*&gt; new_argv(argv, argv + argc);\n</code></pre>\n\n<p>Then add the new element to it:</p>\n\n<pre><code>new_argv.push_back(\"-app_ver\");\nnew_argv.push_back(nullptr); // or NULL if you are using an old compiler\n</code></pre>\n\n<p>Then replace <code>argv</code> with the new array:</p>\n\n<pre><code>argv = new_argv.data(); // or &amp;new_argv[0] if you are using an old compiler\nargc = argc + 1;\n</code></pre>\n\n<hr>\n\n<p>Note: at the end of normal arguments, there should be a null pointer. It's rarely used (though it's required by the Standard); if you are sure your further code doesn't use it, and you only want to add one element to your <code>argv</code> array, you can just overwrite the null pointer, and not use any replacement for <code>argv</code>. That is, disregard all the above code, and just do this:</p>\n\n<pre><code>argv[argc++] = \"-app_ver\";\n</code></pre>\n\n<p>However, this is dangerous - it will crash if you ever decide to add one more element, and it might crash if some code requires the presence of a null pointer after the last argument.</p>\n"}], "owner": {"reputation": 460, "user_id": 4517646, "user_type": "registered", "accept_rate": 7, "profile_image": "https://graph.facebook.com/100002821678926/picture?type=large", "display_name": "Nodirbek", "link": "https://stackoverflow.com/users/4517646/nodirbek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3785, "favorite_count": 0, "accepted_answer_id": 43372674, "answer_count": 4, "score": 4, "last_activity_date": 1564214569, "creation_date": 1492006847, "last_edit_date": 1519076924, "question_id": 43372267, "link": "https://stackoverflow.com/questions/43372267/how-to-append-a-value-to-the-array-of-command-line-arguments", "title": "How to append a value to the array of command line arguments?", "body": "<p>My application has entry point</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n\n}\n</code></pre>\n\n<p>I need to extend  <code>*argv</code> array to <code>n+1</code> and append a value. For example, I need to append <code>\"-app_ver\"</code>.</p>\n\n<p>I'm a newcomer in C++ (with Java background). I know that I can't change array size, so I need any solution (any approach copying array, etc.)</p>\n"}, {"tags": ["c++", "sprite", "sfml", "spawn"], "comments": [{"owner": {"reputation": 1551, "user_id": 2361752, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/54TDP.png?s=128&g=1", "display_name": "xhg", "link": "https://stackoverflow.com/users/2361752/xhg"}, "edited": false, "score": 0, "creation_date": 1492028459, "post_id": 43372263, "comment_id": 73819993, "body": "Better get more details or it&#39;s hard to help you."}], "answers": [{"comments": [{"owner": {"reputation": 314, "user_id": 5762900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e129b484f2dacc63e6c7f1caaef58eba?s=128&d=identicon&r=PG&f=1", "display_name": "killer", "link": "https://stackoverflow.com/users/5762900/killer"}, "edited": false, "score": 0, "creation_date": 1492028808, "post_id": 43374962, "comment_id": 73820192, "body": "Thats the whole code compile and run it and youll see what I mean"}, {"owner": {"reputation": 61, "user_id": 7092194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b9386e1ee662b11d0d67b825036231b?s=128&d=identicon&r=PG&f=1", "display_name": "Jenio", "link": "https://stackoverflow.com/users/7092194/jenio"}, "reply_to_user": {"reputation": 314, "user_id": 5762900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e129b484f2dacc63e6c7f1caaef58eba?s=128&d=identicon&r=PG&f=1", "display_name": "killer", "link": "https://stackoverflow.com/users/5762900/killer"}, "edited": false, "score": 0, "creation_date": 1492032071, "post_id": 43374962, "comment_id": 73821800, "body": "I did run your code and with this small correction it works just fine. <a href=\"https://pastebin.com/6LMtdXYZ\" rel=\"nofollow noreferrer\">pastebin.com/6LMtdXYZ</a>"}, {"owner": {"reputation": 314, "user_id": 5762900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e129b484f2dacc63e6c7f1caaef58eba?s=128&d=identicon&r=PG&f=1", "display_name": "killer", "link": "https://stackoverflow.com/users/5762900/killer"}, "edited": false, "score": 0, "creation_date": 1492033562, "post_id": 43374962, "comment_id": 73822402, "body": "Jeno thanks I just got home Imma try it out real quick"}], "tags": [], "owner": {"reputation": 61, "user_id": 7092194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b9386e1ee662b11d0d67b825036231b?s=128&d=identicon&r=PG&f=1", "display_name": "Jenio", "link": "https://stackoverflow.com/users/7092194/jenio"}, "is_accepted": true, "score": 0, "last_activity_date": 1492014525, "creation_date": 1492014525, "answer_id": 43374962, "question_id": 43372263, "link": "https://stackoverflow.com/questions/43372263/sfml-bullet-not-spawning/43374962#43374962", "title": "SFML Bullet not spawning", "body": "<pre><code>sf::Texture texture_fire;\nif (!texture_background.loadFromFile(\"fire_1.png\"))\n</code></pre>\n\n<p>Instead of loading texture to texture_fire you load again to texture_background. It should be:</p>\n\n<pre><code>if (!texture_fire.loadFromFile(\"fire_1.png\"))\n</code></pre>\n"}], "owner": {"reputation": 314, "user_id": 5762900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e129b484f2dacc63e6c7f1caaef58eba?s=128&d=identicon&r=PG&f=1", "display_name": "killer", "link": "https://stackoverflow.com/users/5762900/killer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 43374962, "answer_count": 1, "score": 0, "last_activity_date": 1492014525, "creation_date": 1492006843, "question_id": 43372263, "link": "https://stackoverflow.com/questions/43372263/sfml-bullet-not-spawning", "title": "SFML Bullet not spawning", "body": "<p>So I am using SFML and c++ to create a simple space game. For the life of can't get a bullet to spawn. This is my source... I  am just trying to learn how to go about spawning new sprites into a game. </p>\n\n<p>```</p>\n\n<pre><code>#include &lt;SFML/Graphics.hpp&gt;\n#include &lt;SFML/Window.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n// Create the main window\nsf::RenderWindow app(sf::VideoMode(800, 600), \"SFML window\");\n\n// Load a sprite to display\nsf::Texture texture_sprite;\nif (!texture_sprite.loadFromFile(\"cb.bmp\"))\n    return EXIT_FAILURE;\nsf::Sprite sprite(texture_sprite);\n\nsf::Texture texture_background;\nif (!texture_background.loadFromFile(\"space.png\"))\n    return EXIT_FAILURE;\nsf::Sprite background(texture_background);\n\nsf::Texture texture_fire;\nif (!texture_background.loadFromFile(\"fire_1.png\"))\n    return EXIT_FAILURE;\nsf::Sprite fire_sprite(texture_fire);\nfire_sprite.setScale(4.0f, 1.6f);\n\n\nstd::string direction = \"\";\nbool fire = false;\n\n// Start the game loop\nwhile (app.isOpen())\n{\n    // Process events\n    sf::Event event;\n    while (app.pollEvent(event))\n    {\n        if (event.type == sf::Event::Closed)\n        {\n            app.close();\n        }\n        else if(sf::Keyboard::isKeyPressed(sf::Keyboard::Left) &amp;&amp; sprite.getPosition().x &gt; -20)\n            {\n            sprite.move(-10,0);\n            std::cout &lt;&lt; \"X = \" &lt;&lt; sprite.getPosition().x &lt;&lt; std::endl;\n            std::cout &lt;&lt; \"Y = \" &lt;&lt; sprite.getPosition().y &lt;&lt; std::endl;\n            direction = \"Left\";\n            }\n        else if(sf::Keyboard::isKeyPressed(sf::Keyboard::Right) &amp;&amp; sprite.getPosition().x &lt; 670 )\n            {\n            sprite.move(10,0);\n            std::cout &lt;&lt; \"X = \" &lt;&lt; sprite.getPosition().x &lt;&lt; std::endl;\n            std::cout &lt;&lt; \"Y = \" &lt;&lt; sprite.getPosition().y &lt;&lt; std::endl;\n            direction = \"Right\";\n            }\n        else if(sf::Keyboard::isKeyPressed(sf::Keyboard::Up) &amp;&amp; sprite.getPosition().y &gt; 0)\n            {\n            sprite.move(0,-10);\n            std::cout &lt;&lt; \"X = \" &lt;&lt; sprite.getPosition().x &lt;&lt; std::endl;\n            std::cout &lt;&lt; \"Y = \" &lt;&lt; sprite.getPosition().y &lt;&lt; std::endl;\n            direction = \"Up\";\n            }\n        else if(sf::Keyboard::isKeyPressed(sf::Keyboard::Down) &amp;&amp; sprite.getPosition().y &lt; 480 )\n            {\n            sprite.move(0,10);\n            std::cout &lt;&lt; \"X = \" &lt;&lt; sprite.getPosition().x &lt;&lt; std::endl;\n            std::cout &lt;&lt; \"Y = \" &lt;&lt; sprite.getPosition().y &lt;&lt; std::endl;\n            direction = \"Down\";\n            }\n        else if(sf::Keyboard::isKeyPressed(sf::Keyboard::Space))\n            {\n            fire = true;\n\n            }\n        else if (event.type == sf::Event::KeyReleased &amp;&amp; event.key.code == sf::Keyboard::Space)\n            {\n            fire = false;\n            }\n            if(fire == true)\n    {\n        std::cout &lt;&lt; \"FIRE!!!\" &lt;&lt; std::endl;\n        fire_sprite.setPosition((sprite.getPosition()));\n\n        std::cout &lt;&lt; \"Fire positions is \" &lt;&lt;fire_sprite.getPosition().x &lt;&lt; \" \" &lt;&lt; fire_sprite.getPosition().y &lt;&lt; \"The direction is \" &lt;&lt; direction &lt;&lt;std::endl;\n    }\n\n    }\n\n    app.clear();\n\n    // Draw the sprite\n\n    app.draw(background);\n    app.draw(sprite);\n    app.draw(fire_sprite);\n    // Update the window\n    app.display();\n\n\n}\n\nreturn EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>```</p>\n"}, {"tags": ["c++", "qt", "windows-10-desktop"], "answers": [{"comments": [{"owner": {"reputation": 4633, "user_id": 35250, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d4176f6bb8693964fe2de1a597c74a88?s=128&d=identicon&r=PG", "display_name": "milianw", "link": "https://stackoverflow.com/users/35250/milianw"}, "edited": false, "score": 3, "creation_date": 1492008323, "post_id": 43372340, "comment_id": 73807615, "body": "Yes exactly this is the issue. You are essentially returning (Qt::CheckState)123 for the Qt::CheckStateRole."}], "tags": [], "owner": {"reputation": 885, "user_id": 1758897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hMoc1.png?s=128&g=1", "display_name": "basslo", "link": "https://stackoverflow.com/users/1758897/basslo"}, "is_accepted": true, "score": 3, "last_activity_date": 1492007316, "last_edit_date": 1492007316, "creation_date": 1492007013, "answer_id": 43372340, "question_id": 43372135, "link": "https://stackoverflow.com/questions/43372135/qt-tableview-remove-strange-boxes/43372340#43372340", "title": "Qt TableView remove strange boxes", "body": "<p>you should change your <code>QVariant TVLDataModel::data(const QModelIndex &amp;index, int role) const</code> function to indicate the role you are using. for example Qt::EditRole, Qt::BackgroundRole, etc. </p>\n\n<p>for example : </p>\n\n<pre><code>QVariant TVLDataModel::data(const QModelIndex &amp;index, int role) const\n{\n    switch(role){\n       case Qt::EditRole :\n       case Qt::DisplayRole :    \n           return 123; \n\n       default : break;\n    }\n     return QVariant();\n}\n</code></pre>\n\n<p>Otherwise you would return 123 for every ItemDataRole.</p>\n"}, {"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1492019383, "creation_date": 1492019383, "answer_id": 43376360, "question_id": 43372135, "link": "https://stackoverflow.com/questions/43372135/qt-tableview-remove-strange-boxes/43376360#43376360", "title": "Qt TableView remove strange boxes", "body": "<p>Those \"strange\" boxes are checkboxes. Your model indicates that each item is checkable.</p>\n"}], "owner": {"reputation": 882, "user_id": 3037935, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/9dc64b30f59d9d298375c9a4fedf0436?s=128&d=identicon&r=PG&f=1", "display_name": "fedab", "link": "https://stackoverflow.com/users/3037935/fedab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 43372340, "answer_count": 2, "score": 1, "last_activity_date": 1492019383, "creation_date": 1492006544, "question_id": 43372135, "link": "https://stackoverflow.com/questions/43372135/qt-tableview-remove-strange-boxes", "title": "Qt TableView remove strange boxes", "body": "<p>I want to use a QTableView. This is a result of some tests.</p>\n\n<p><a href=\"https://i.stack.imgur.com/SvLyf.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SvLyf.jpg\" alt=\"TableView with 4 cells, every cell contains a misterious checkbox-like box\"></a></p>\n\n<p>As you can see, there are some boxes in every cell, before the content \"123\". What are these boxes and how can I remove these?</p>\n\n<p>I think I need to change some properties of the QTableView, but I did not found a property related to these misterious boxes.\nHere some code I used:</p>\n\n<pre><code>MainWindow::MainWindow(QWidget *parent) : QMainWindow(parent), ui(new Ui::MainWindow)\n{\n    //...\n\n    TVLDataModel* model = new TVLDataModel();\n    ui-&gt;uxTVLView-&gt;setModel(model);\n}\n</code></pre>\n\n<p>TVLDataModel (inherits QAbstractTableModel)</p>\n\n<pre><code>int TVLDataModel::rowCount(const QModelIndex &amp;parent) const\n{\n    return 2;\n}\n\nint TVLDataModel::columnCount(const QModelIndex &amp;parent) const\n{\n    return 2;\n}\n\nQVariant TVLDataModel::data(const QModelIndex &amp;index, int role) const\n{\n    return 123;\n}\n</code></pre>\n"}, {"tags": ["c++", "codeblocks", "compiler-warnings", "unreachable-code"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1492006677, "post_id": 43372132, "comment_id": 73806194, "body": "Can you think of a reason why you shouldn&#39;t be able to ?"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 1, "creation_date": 1492006755, "post_id": 43372132, "comment_id": 73806265, "body": "<code>why the compiler doesnt warns</code> And your warning level setting is...?"}], "answers": [{"tags": [], "owner": {"reputation": 3936, "user_id": 7571171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zfVoB.png?s=128&g=1", "display_name": "Thomas Flinkow", "link": "https://stackoverflow.com/users/7571171/thomas-flinkow"}, "is_accepted": false, "score": 0, "last_activity_date": 1492006681, "creation_date": 1492006681, "answer_id": 43372179, "question_id": 43372132, "link": "https://stackoverflow.com/questions/43372132/why-can-i-compile-a-code-with-2-returns/43372179#43372179", "title": "Why can I compile a code with 2 returns?", "body": "<p>Because this part </p>\n\n<pre><code>std::cout &lt;&lt; \"Done!!!\" &lt;&lt; std::endl;\nreturn 0;\n</code></pre>\n\n<p>will never be called because of the first <code>return</code> statement, but it is not an error aborting the compilation, rather the compiler might drop a warning, depending on what compiler you are using (e.g. Microsofts VC++ compiler warns you about that).</p>\n"}, {"comments": [{"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1492006928, "post_id": 43372195, "comment_id": 73806398, "body": "Related: Java warns <i>too often</i>, because like said 100% correctness is impossible. Not just for reachability things, but also for things like code paths without initialization etc."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 0, "last_activity_date": 1492006990, "last_edit_date": 1492006990, "creation_date": 1492006724, "answer_id": 43372195, "question_id": 43372132, "link": "https://stackoverflow.com/questions/43372132/why-can-i-compile-a-code-with-2-returns/43372195#43372195", "title": "Why can I compile a code with 2 returns?", "body": "<p>Mainly because more often than not the compiler cannot know for sure. (There have been attempts to do this in Java but there the criteria for defining <em>reachability</em> have been decided upon.)</p>\n\n<p>In this case, indeed, it is obvious.</p>\n\n<p>Some compilers do issue reachability warnings but the C++ standard does not require this.</p>\n\n<p>No answer on reachability is complete without referencing this: <a href=\"https://en.wikipedia.org/wiki/Halting_problem\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Halting_problem</a></p>\n\n<p>As a final remark on Java, consider these two Java snippets:</p>\n\n<pre><code>if (true){\n    return;\n}\n; // this statement is defined to be reachable\n</code></pre>\n\n<p>and</p>\n\n<pre><code>while (true){\n    return;\n}\n; // this statement is defined to be unreachable\n</code></pre>\n\n<p>The worst of both worlds is attained, in my humble opinion.</p>\n"}, {"comments": [{"owner": {"reputation": 113, "user_id": 7679404, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/Ro3u3.png?s=128&g=1", "display_name": "Firewall-Alien", "link": "https://stackoverflow.com/users/7679404/firewall-alien"}, "edited": false, "score": 0, "creation_date": 1492007591, "post_id": 43372240, "comment_id": 73806978, "body": "- wall is checked!"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1492007699, "post_id": 43372240, "comment_id": 73807064, "body": "it needs -Wunreachable-code wich is not included into -Wall"}], "tags": [], "owner": {"reputation": 1217, "user_id": 2660911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580a3e9a6939226a59fadb456c38912a?s=128&d=identicon&r=PG", "display_name": "baddger964", "link": "https://stackoverflow.com/users/2660911/baddger964"}, "is_accepted": false, "score": 0, "last_activity_date": 1492006797, "creation_date": 1492006797, "answer_id": 43372240, "question_id": 43372132, "link": "https://stackoverflow.com/questions/43372132/why-can-i-compile-a-code-with-2-returns/43372240#43372240", "title": "Why can I compile a code with 2 returns?", "body": "<p>Unreachable code is not a compile error in C++, but usually gives a warning, depending on your compiler and flags. </p>\n\n<p>You can try to add -Wall option when you call your compiler. This will\nactive many useful warning.</p>\n"}, {"comments": [{"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1493213207, "post_id": 43372367, "comment_id": 74319281, "body": "<code>C++ has many standards (c++11, c++14, c++17 etc. ) unlike java</code> Not unlike Java. The language Java has versions too, and that&#39;s not equal to the software version."}], "tags": [], "owner": {"reputation": 373, "user_id": 6656473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eac9de95a4a16cbaad58d71f98e7b70?s=128&d=identicon&r=PG&f=1", "display_name": "officialaimm", "link": "https://stackoverflow.com/users/6656473/officialaimm"}, "is_accepted": false, "score": 0, "last_activity_date": 1492008077, "last_edit_date": 1492008077, "creation_date": 1492007078, "answer_id": 43372367, "question_id": 43372132, "link": "https://stackoverflow.com/questions/43372132/why-can-i-compile-a-code-with-2-returns/43372367#43372367", "title": "Why can I compile a code with 2 returns?", "body": "<p>There are two reasons for this:</p>\n\n<ol>\n<li><p>C++ has many standards (c++11, c++14, c++17 etc. ) unlike java (java is very rigid in standard and only thing that matters really with java is the version you are using), so, some compilers might warn you about the unreachable code while others might not.</p></li>\n<li><p>The statements after <code>return 0</code>, though are unreachable logically, do not cause any fatal error like ambiguity, syntax error, etc. and can be compiled easily (if the compiler wills to ;) ).</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "is_accepted": false, "score": 1, "last_activity_date": 1492007109, "creation_date": 1492007109, "answer_id": 43372378, "question_id": 43372132, "link": "https://stackoverflow.com/questions/43372132/why-can-i-compile-a-code-with-2-returns/43372378#43372378", "title": "Why can I compile a code with 2 returns?", "body": "<p>Why shouldn't you be able to compile code that has multiple returns?\nBecause the code is unreachable? Most compilers can issue a warning for that.</p>\n\n<p>However, I often see code like:</p>\n\n<pre><code>   if(a)\n   {\n      // Do stuff\n   }\n   else\n   {\n      // Do other stuff\n\n      if(b)\n      {\n          // Do more stuff\n      }\n      else\n      {\n          // Do other more stuff\n      }\n   }\n</code></pre>\n\n<p>That could be simplified as</p>\n\n<pre><code>   if(a)\n   {\n      // Do stuff\n      return;\n   }\n\n   // Do other stuff\n\n   if(b)\n   {\n      // Do more stuff\n      return;\n   }\n\n   // Do other more stuff\n</code></pre>\n\n<p>About a decade ago, people frowned on having more than one return in a function of method, but there really is no reason to continue frowning on it with modern compilers.</p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 5, "last_activity_date": 1492007932, "last_edit_date": 1592644375, "creation_date": 1492007932, "answer_id": 43372697, "question_id": 43372132, "link": "https://stackoverflow.com/questions/43372132/why-can-i-compile-a-code-with-2-returns/43372697#43372697", "title": "Why can I compile a code with 2 returns?", "body": "<blockquote>\n<p>I wounder why the compiler doesnt warns about unreachable code in something like</p>\n</blockquote>\n<p>It is pretty well explained in gcc <a href=\"https://gcc.gnu.org/onlinedocs/gcc-3.4.4/gcc/Warning-Options.html\" rel=\"noreferrer\">documentaion</a> about warnings:</p>\n<blockquote>\n<p>-Wunreachable-code</p>\n<p>Warn if the compiler detects that code will never be executed. This option is intended to warn when the compiler detects\nthat at least a whole line of source code will never be executed,\nbecause some condition is never satisfied or because it is after a\nprocedure that never returns.</p>\n<p>It is possible for this option to produce a warning even though there\nare circumstances under which part of the affected line can be\nexecuted, so care should be taken when removing apparently-unreachable\ncode.</p>\n<p>For instance, when a function is inlined, a warning may mean that the\nline is unreachable in only one inlined copy of the function.</p>\n<p><strong>This option is not made part of -Wall because in a debugging version\nof a program there is often substantial code which checks correct\nfunctioning of the program and is, hopefully, unreachable because the\nprogram does work. Another common use of unreachable code is to\nprovide behavior which is selectable at compile-time.</strong></p>\n</blockquote>\n<p>Though g++ 5.1.0 does not produce any warnings for this code even with this option enabled.</p>\n"}], "owner": {"reputation": 113, "user_id": 7679404, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/Ro3u3.png?s=128&g=1", "display_name": "Firewall-Alien", "link": "https://stackoverflow.com/users/7679404/firewall-alien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 43372697, "answer_count": 6, "score": 1, "last_activity_date": 1492008077, "creation_date": 1492006538, "question_id": 43372132, "link": "https://stackoverflow.com/questions/43372132/why-can-i-compile-a-code-with-2-returns", "title": "Why can I compile a code with 2 returns?", "body": "<p>Since am comming from a java island, I wounder why the compiler doesnt warns about unreachable code in something like:</p>\n\n<pre><code>int main(int argc, char** argV)\n{\n\n    std::list&lt;int&gt; lst = {1,2,3,4};\n\n    return 0;\n\n\n\n    std::cout &lt;&lt; \"Done!!!\" &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>my question:</p>\n\n<p>Why can I compile a code with 2 returns?</p>\n\n<p>my Compiler is gcc for c++11, on Windows, code block</p>\n"}, {"tags": ["c++", "c++11", "constructor", "shared-ptr", "smart-pointers"], "comments": [{"owner": {"reputation": 5508, "user_id": 498424, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ig1qY.jpg?s=128&g=1", "display_name": "Raxvan", "link": "https://stackoverflow.com/users/498424/raxvan"}, "edited": false, "score": 0, "creation_date": 1492006554, "post_id": 43372073, "comment_id": 73806091, "body": "confused about your <code>shared_ptr</code> and <code>std::shared_ptr</code>. Private members can be accessed in class scope and in friends scope: <a href=\"http://en.cppreference.com/w/cpp/language/friend\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/friend</a>"}, {"owner": {"reputation": 1563, "user_id": 2530921, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/WPszy.jpg?s=128&g=1", "display_name": "VINOTH ENERGETIC", "link": "https://stackoverflow.com/users/2530921/vinoth-energetic"}, "reply_to_user": {"reputation": 5508, "user_id": 498424, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ig1qY.jpg?s=128&g=1", "display_name": "Raxvan", "link": "https://stackoverflow.com/users/498424/raxvan"}, "edited": false, "score": 0, "creation_date": 1492006842, "post_id": 43372073, "comment_id": 73806343, "body": "@Raxvan Yes It can be accessed in class scope. I have two different classes here one is shared_ptr&lt;T&gt;(Which I am going to instantiate) and shared_ptr&lt;U&gt;(which I am passing as argument). Logically it is not same class"}, {"owner": {"reputation": 1563, "user_id": 2530921, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/WPszy.jpg?s=128&g=1", "display_name": "VINOTH ENERGETIC", "link": "https://stackoverflow.com/users/2530921/vinoth-energetic"}, "reply_to_user": {"reputation": 5508, "user_id": 498424, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ig1qY.jpg?s=128&g=1", "display_name": "Raxvan", "link": "https://stackoverflow.com/users/498424/raxvan"}, "edited": false, "score": 0, "creation_date": 1492006931, "post_id": 43372073, "comment_id": 73806402, "body": "@Raxvan How to achieve firend for template class?"}, {"owner": {"reputation": 5508, "user_id": 498424, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ig1qY.jpg?s=128&g=1", "display_name": "Raxvan", "link": "https://stackoverflow.com/users/498424/raxvan"}, "edited": false, "score": 1, "creation_date": 1492007045, "post_id": 43372073, "comment_id": 73806488, "body": "check the link in the comment, <code>template &lt;class&gt; friend class shared_ptr;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 5508, "user_id": 498424, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ig1qY.jpg?s=128&g=1", "display_name": "Raxvan", "link": "https://stackoverflow.com/users/498424/raxvan"}, "edited": false, "score": 1, "creation_date": 1492007285, "post_id": 43372370, "comment_id": 73806703, "body": "<code>Y</code> in <code>&lt;class Y&gt;</code> not really needed, preferably without <code>Y</code> in this case to avoid problem in case you really have <code>Y</code> as another template argument in class declaration"}], "tags": [], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": true, "score": 1, "last_activity_date": 1492007088, "creation_date": 1492007088, "answer_id": 43372370, "question_id": 43372073, "link": "https://stackoverflow.com/questions/43372073/how-to-implement-the-aliasing-constructor-by-own-for-my-own-shared-ptr-implement/43372370#43372370", "title": "How to implement the aliasing constructor by own for my own shared_ptr implementation?", "body": "<p>Boost solves this problem by either using template member friends or making the members public, depending on the value of the define <code>BOOST_NO_MEMBER_TEMPLATE_FRIENDS</code>.</p>\n\n<p>For example the friend declaration looks like this:</p>\n\n<pre><code>template&lt;class Y&gt; friend class shared_ptr;\ntemplate&lt;class Y&gt; friend class weak_ptr;\n</code></pre>\n"}], "owner": {"reputation": 1563, "user_id": 2530921, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/WPszy.jpg?s=128&g=1", "display_name": "VINOTH ENERGETIC", "link": "https://stackoverflow.com/users/2530921/vinoth-energetic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 1, "accepted_answer_id": 43372370, "answer_count": 1, "score": 1, "last_activity_date": 1492007088, "creation_date": 1492006390, "last_edit_date": 1492006969, "question_id": 43372073, "link": "https://stackoverflow.com/questions/43372073/how-to-implement-the-aliasing-constructor-by-own-for-my-own-shared-ptr-implement", "title": "How to implement the aliasing constructor by own for my own shared_ptr implementation?", "body": "<p>I am trying to implement the shared ptr template class by own.</p>\n\n<p>The prototype for aliasing constructor of <code>shared_ptr</code> is </p>\n\n<pre><code>template&lt; class Y &gt;\nshared_ptr( const shared_ptr&lt;Y&gt;&amp; r, element_type *ptr );\n</code></pre>\n\n<p>I have implemented the conversion constructor as follows,</p>\n\n<pre><code>shared_ptr&lt;T&gt;::shared_ptr(const shared_ptr&lt;U&gt; &amp;p_ownershipObj,T* p_managedObjPtr)\n      { \n         if(p_ownershipObj.m_refCountPtr) // Ql\n         {\n            m_managedObjectPtr=p_managedObjPtr;\n            m_refCountPtr = p_ownershipObj.m_refCountPtr;\n            m_refCountPtr-&gt;m_strongReferenceCount++;            \n         }\n      }\n</code></pre>\n\n<p>Q1. How to access the <code>m_refCountPtr</code> of <code>shared_ptr&lt;U&gt;</code>  here?\n<code>m_refCountPtr</code> is private member of <code>shared_ptr</code> template class. I know private member cannot be accessed then how compilers have probably implemented this feature?</p>\n"}, {"tags": ["c++", "protocol-buffers"], "comments": [{"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1492006435, "post_id": 43372047, "comment_id": 73805988, "body": "Not unless they are each 100% contained in their own namespaces."}], "answers": [{"tags": [], "owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "is_accepted": false, "score": 0, "last_activity_date": 1492006892, "creation_date": 1492006892, "answer_id": 43372287, "question_id": 43372047, "link": "https://stackoverflow.com/questions/43372047/link-two-different-version-of-protobuf-library-in-the-same-c-project/43372287#43372287", "title": "Link two different version of protobuf library in the same C++ project", "body": "<p>I'm not familiar with the library but in general no unless each library is 100% contained in it's own unique namespace.  Otherwise there will be a name clashes with each class, function, etc.</p>\n"}, {"tags": [], "owner": {"reputation": 30998, "user_id": 2686899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/StqEe.jpg?s=128&g=1", "display_name": "Kenton Varda", "link": "https://stackoverflow.com/users/2686899/kenton-varda"}, "is_accepted": false, "score": 5, "last_activity_date": 1492227653, "creation_date": 1492227653, "answer_id": 43421948, "question_id": 43372047, "link": "https://stackoverflow.com/questions/43372047/link-two-different-version-of-protobuf-library-in-the-same-c-project/43421948#43421948", "title": "Link two different version of protobuf library in the same C++ project", "body": "<p>You cannot link two different versions of libprotobuf into the same program. (It may be possible on some OS's, but it definitely won't work on Linux, where the declarations with the same names would overwrite each other. It may be possible to make work on Windows or Mac, but it's probably not a good idea to rely on this.)</p>\n\n<p>However, you don't need to do this. libprotobuf 3.x supports both \"proto3\" and \"proto2\" syntax. As long as you can rebuild your code from source (including regenerating the .pb.h and .pb.cc files), you should be able to rebuild everything using version 3.x, even if some of the proto files use proto2-exclusive features.</p>\n"}, {"tags": [], "owner": {"reputation": 2875, "user_id": 1934800, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dd418bfddb2f7d81dc1d9ba06c203cc7?s=128&d=identicon&r=PG", "display_name": "TrentP", "link": "https://stackoverflow.com/users/1934800/trentp"}, "is_accepted": false, "score": 3, "last_activity_date": 1492283799, "creation_date": 1492283799, "answer_id": 43430246, "question_id": 43372047, "link": "https://stackoverflow.com/questions/43372047/link-two-different-version-of-protobuf-library-in-the-same-c-project/43430246#43430246", "title": "Link two different version of protobuf library in the same C++ project", "body": "<p>While C++ might not support the concept of linking multiple versions of the same symbol into a single object, it can still be done.  Executable formats like ELF or PE support many things that are not part of the C++ standard.  Using symbol visibility and partial linking, one can have code that uses two different copies of the same symbols.</p>\n\n<p>I'm guessing you want to link to two different already compiled protobuf shared libraries.  That won't work.  You'll have to statically link at least one protobuf and compile it yourself.</p>\n\n<p>It would look something like this:</p>\n\n<pre><code>// lib1.c\nvoid test(void) { printf(\"test version 1\\n\"); }\n\n// lib2.c\nvoid test(void) { printf(\"test version 2\\n\"); }\n\n// uselib1.c\nvoid test(void);\nvoid usetest(void) { test(); }\n\n// main.c\nvoid test(void);\nvoid usetest(void);\nint main(void) { usetest(); test(); }\n</code></pre>\n\n<p>We want <code>usetest()</code> from uselib1.c to call the version of <code>test()</code> that's in lib1.c, while <code>main()</code> should call the version that's in lib2.c.  If we just link all these together, it doesn't work:</p>\n\n<pre><code>$ gcc uselib1.c lib1.c main.c lib2.c\n/tmp/ccqQhm5c.o: In function `test':\nlib2.c:(.text+0x0): multiple definition of `test'\n</code></pre>\n\n<p>You can't have multiple copies if <code>test()</code>.  But what we can do is partially link just uselib1 and lib1, which works since there is only one <code>test()</code> with just those two objects.  Then the symbols from lib1 are localized so that nothing else using the combined uselib1+lib1 will see the lib1 symbols.</p>\n\n<pre><code>$ gcc -c -fvisibility=hidden lib1.c\n$ gcc -c uselib1.c \n$ ld -r uselib1.o lib1.o -o combined1.o\n$ objcopy --localize-hidden combined1.o \n$ gcc main.c lib2.c combined1.o \n$ ./a.out\ntest version 1\ntest version 2\n</code></pre>\n\n<p>When compiling lib1, I use <code>-fvisibility=hidden</code> to mark all the symbols in lib1 as hidden.  This would make a difference if it were a shared library.  As an object (or static lib) they can still be used by other code, and they are used when \"ld -r\" partially links lib1.o and uselib1.o into combined1.o.  Then objcopy localizes all the hidden symbols.  This has the effect of making the copy of <code>test()</code> inside combined1.o act like it was a <code>static</code> function.  When combined1.o, main.c, and lib2.c are all linked, main.c will use <code>test()</code> from lib2.c like we want.</p>\n\n<p>Of course, using two different versions of the same library in one project is a nightmare to maintain.  You'll constantly be including the wrong version's headers and getting subtle bugs.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user53670"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2617, "favorite_count": 0, "answer_count": 3, "score": 4, "last_activity_date": 1492283799, "creation_date": 1492006326, "question_id": 43372047, "link": "https://stackoverflow.com/questions/43372047/link-two-different-version-of-protobuf-library-in-the-same-c-project", "title": "Link two different version of protobuf library in the same C++ project", "body": "<p>can I use both protobuf 2.6 and 3.0 libs in the same c++ project and link them together?</p>\n"}, {"tags": ["c++", "curl", "lambda"], "comments": [{"owner": {"reputation": 1637, "user_id": 6909048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2db37ccd50ab0fb72ce3532577b50b?s=128&d=identicon&r=PG", "display_name": "Andrey Turkin", "link": "https://stackoverflow.com/users/6909048/andrey-turkin"}, "edited": false, "score": 0, "creation_date": 1492010205, "post_id": 43372031, "comment_id": 73809208, "body": "Where are you setting <code>CURLOPT_MAIL_FROM</code> option? Also see if <code>payload</code> (when inside lambda on different thred) contains what you expect it to contain."}, {"owner": {"reputation": 333, "user_id": 2863527, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/fe9dc5d0e50b50eab8b54a1e0334852b?s=128&d=identicon&r=PG&f=1", "display_name": "trexgris", "link": "https://stackoverflow.com/users/2863527/trexgris"}, "reply_to_user": {"reputation": 1637, "user_id": 6909048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2db37ccd50ab0fb72ce3532577b50b?s=128&d=identicon&r=PG", "display_name": "Andrey Turkin", "link": "https://stackoverflow.com/users/6909048/andrey-turkin"}, "edited": false, "score": 0, "creation_date": 1493393782, "post_id": 43372031, "comment_id": 74413919, "body": "@AndreyTurkin sorry for the extremely late reply. CURLOPT_MAIL_FROM is set in the ctor of my initial object, so totally outside of the thread. and you&#39;re right, the payload doesnt have what it should have when its put in the thread ..."}, {"owner": {"reputation": 1637, "user_id": 6909048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2db37ccd50ab0fb72ce3532577b50b?s=128&d=identicon&r=PG", "display_name": "Andrey Turkin", "link": "https://stackoverflow.com/users/6909048/andrey-turkin"}, "edited": false, "score": 0, "creation_date": 1493400690, "post_id": 43372031, "comment_id": 74417796, "body": "Oh, here you go. So it probably has nothing to do with cURL, you just need to find out why you are not getting right payload. My guess is <code>FormatEmail</code> returns some type which retains some shared state when copied."}], "owner": {"reputation": 333, "user_id": 2863527, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/fe9dc5d0e50b50eab8b54a1e0334852b?s=128&d=identicon&r=PG&f=1", "display_name": "trexgris", "link": "https://stackoverflow.com/users/2863527/trexgris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1492006298, "creation_date": 1492006298, "question_id": 43372031, "link": "https://stackoverflow.com/questions/43372031/curl-instance-not-fully-captured-in-a-lambda", "title": "cURL instance not fully captured in a lambda", "body": "<p>I am trying to send an email in parallel to my main pipeline. \nFor that I am pushing a lambda in a concurrent queue that is executing it independently from the main thread.</p>\n\n<p>I am using cURL to send this email. Everything works fine unless I capture the curl instance in the lambda.</p>\n\n<p>This is how I proceed:</p>\n\n<pre><code>  auto str = FormatEmail(event); // Format the URL\n  auto handle_copy = curl_easy_duphandle(curl_.get()); // copy of the handle\n\n  job::Post([=]() {\n    if (!handle_copy) throw std::runtime_error(\"cURL handle not valid.\");\n\n    std::stringstream payload;\n    payload &lt;&lt; str;\n\n    curl_easy_setopt(handle_copy, CURLOPT_READDATA, &amp;payload);\n\n    FILE* logfile;\n    logfile = fopen(\"dump.txt\", \"wb\");\n    curl_easy_setopt(handle_copy, CURLOPT_VERBOSE, 1L);\n    curl_easy_setopt(handle_copy, CURLOPT_STDERR, logfile);\n\n    CURLcode result;\n    result = curl_easy_perform(handle_copy);\n    std::cerr &lt;&lt; result;\n    if (result == CURLE_OK) log_.Debug(\"Email sent successfully: %0%.\", log.str());\n\n    curl_easy_cleanup(handle_copy);\n    fclose(logfile);\n  });\n</code></pre>\n\n<p>I am formatting the email outside of the lambda, but I could do it inside as well ... The only issue is that the dump I am producing is the following:</p>\n\n<blockquote>\n  <ul>\n  <li>Rebuilt URL to: smtp://aspmx.l.google.com:25/</li>\n  <li>Trying 74.125.71.27...</li>\n  <li><p>Connected to aspmx.l.google.com (74.125.71.27) port 25 (#0) &lt; 220 mx.google.com ESMTP a78si8197651wme.159 - gsmtp</p>\n  \n  <p>EHLO cgross-H81M-DS2V &lt; 250-mx.google.com at your service,\n  [77.95.183.158]</p>\n  \n  <p>250-SIZE 157286400 </p>\n  \n  <p>250-8BITMIME </p>\n  \n  <p>250-STARTTLS </p>\n  \n  <p>250-ENHANCEDSTATUSCODES </p>\n  \n  <p>250-PIPELINING </p>\n  \n  <p>250-CHUNKING </p>\n  \n  <p>250 SMTPUTF8</p>\n  \n  <p>MAIL FROM: &lt; 250 2.1.0 OK a78si8197651wme.159 -\n  gsmtp</p>\n  \n  <p>RCPT TO:&lt; > &lt; 553 5.1.2 The recipient address &lt; > is not a valid\n  RFC-5321 address. a78si8197651wme.159 - gsmtp</p></li>\n  <li><p>RCPT failed: 553</p>\n  \n  <p>QUIT &lt; 221 2.0.0 closing connection a78si8197651wme.159 - gsmtp</p></li>\n  <li><p>Closing connection 0</p></li>\n  </ul>\n</blockquote>\n\n<p>It just seems that not all the data is captured in the copy of my handle ... How could I proceed to execute the sending (/Formatting as well ideally) in parallel for curl?</p>\n"}, {"tags": ["c++", "templates"], "answers": [{"comments": [{"owner": {"reputation": 1706, "user_id": 5302690, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/58f104c7eddb6acb9e94430e931ea36f?s=128&d=identicon&r=PG&f=1", "display_name": "barney", "link": "https://stackoverflow.com/users/5302690/barney"}, "edited": false, "score": 0, "creation_date": 1492006424, "post_id": 43372017, "comment_id": 73805981, "body": "How exactly do you know, that C::const_iterator cannot be known? Is it because its nested to unknown type C ? Then, here&#39;s another example from Meyers: template&lt;typename IterT&gt;  void workWithIterator(IterT iter) {     typename std::iterator_traits&lt;IterT&gt;::value_type temp(*iter); ...  }"}, {"owner": {"reputation": 4783, "user_id": 948128, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/788ac757a97bd1fa3ca6fd0d3eeffc1b?s=128&d=identicon&r=PG", "display_name": "piwi", "link": "https://stackoverflow.com/users/948128/piwi"}, "reply_to_user": {"reputation": 1706, "user_id": 5302690, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/58f104c7eddb6acb9e94430e931ea36f?s=128&d=identicon&r=PG&f=1", "display_name": "barney", "link": "https://stackoverflow.com/users/5302690/barney"}, "edited": false, "score": 0, "creation_date": 1492006906, "post_id": 43372017, "comment_id": 73806385, "body": "@barney Yes, it is because it is nested in <code>C</code>, so the compiler has a hard time deciding at this point what is <code>const_iterator</code>. As mentioned, you could have a <code>static int const_iterator</code> nested in <code>C</code>, which is a static member named <code>const_iterator</code> of type <code>int</code>, not a type. But prefixing with <code>typename</code> in this case means &quot;<code>const_iterator</code> is a type name&quot;. However, <code>std::vector&lt;&gt;</code> is a type (which takes a template parameter), and the compiler knows that, so the compiler figures that without knowing the exact type of <code>C</code>."}, {"owner": {"reputation": 4783, "user_id": 948128, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/788ac757a97bd1fa3ca6fd0d3eeffc1b?s=128&d=identicon&r=PG", "display_name": "piwi", "link": "https://stackoverflow.com/users/948128/piwi"}, "reply_to_user": {"reputation": 1706, "user_id": 5302690, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/58f104c7eddb6acb9e94430e931ea36f?s=128&d=identicon&r=PG&f=1", "display_name": "barney", "link": "https://stackoverflow.com/users/5302690/barney"}, "edited": false, "score": 1, "creation_date": 1492028848, "post_id": 43372017, "comment_id": 73820212, "body": "@barney For the other example you mention (<code>std::iterator_traits&lt;IterT&gt;::value_type</code>): <code>iterator_traits</code> is known as a type, but the compiler does not know what is within the specific <code>iterator_traits&lt;IterT&gt;</code> implementation (because the class could be specialized for the type behind <code>IterT</code>), so you need to use <code>typename</code> to indicate you refer to a type, just like the <code>C::const_iterator</code> example."}], "tags": [], "owner": {"reputation": 4783, "user_id": 948128, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/788ac757a97bd1fa3ca6fd0d3eeffc1b?s=128&d=identicon&r=PG", "display_name": "piwi", "link": "https://stackoverflow.com/users/948128/piwi"}, "is_accepted": false, "score": 2, "last_activity_date": 1492006270, "creation_date": 1492006270, "answer_id": 43372017, "question_id": 43371907, "link": "https://stackoverflow.com/questions/43371907/difference-in-2-template-dependent-typename-kinds/43372017#43372017", "title": "difference in 2 template dependent typename kinds", "body": "<p>In the first example (<code>typename C::const_iterator</code>), <code>const_iterator</code> cannot be known to the compiler firsthand: it could be a static member, for instance. This is why you need to prefix the declaration with <code>typename</code>, to indicate it is a type.</p>\n\n<p>In the second example, the compiler knows <code>std::vector&lt;T&gt;</code> is a type, even without knowing what is <code>T</code>. Which is why <code>typename</code> is not needed in this case.</p>\n"}, {"comments": [{"owner": {"reputation": 1706, "user_id": 5302690, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/58f104c7eddb6acb9e94430e931ea36f?s=128&d=identicon&r=PG&f=1", "display_name": "barney", "link": "https://stackoverflow.com/users/5302690/barney"}, "edited": false, "score": 1, "creation_date": 1492006605, "post_id": 43372071, "comment_id": 73806127, "body": "I&#39;m struggling to get the difference :) So, when compiler sees &quot;C::const_iterator&quot; its unknown before instantiation/ substitution of C for any concrete type, what the &quot;const_iterator&quot; is, right? But the &quot;std::vector&lt;T&gt;&quot; also depends on the exact concrete T, or its not? Just because IT IS the instantiation?"}, {"owner": {"reputation": 1706, "user_id": 5302690, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/58f104c7eddb6acb9e94430e931ea36f?s=128&d=identicon&r=PG&f=1", "display_name": "barney", "link": "https://stackoverflow.com/users/5302690/barney"}, "edited": false, "score": 0, "creation_date": 1492006762, "post_id": 43372071, "comment_id": 73806274, "body": "Another example from Meyers refers to something similar to vector&lt;T&gt; but with &quot;typename&quot; keyword still: template&lt;typename IterT&gt;  void workWithIterator(IterT iter) {    typename std::iterator_traits&lt;IterT&gt;::value_type temp(*iter); ... } why here ? what is the difference of iterator_traits&lt;T&gt; with vector&lt;T&gt; ?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 1706, "user_id": 5302690, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/58f104c7eddb6acb9e94430e931ea36f?s=128&d=identicon&r=PG&f=1", "display_name": "barney", "link": "https://stackoverflow.com/users/5302690/barney"}, "edited": false, "score": 0, "creation_date": 1492006764, "post_id": 43372071, "comment_id": 73806278, "body": "@barney When the compiler sees <code>some_name::some_other_name</code> it does not expect to see a type when <code>some_name</code> is a template type.  So you use <code>typename</code> to tell it is a name and not a non-name like it assumes."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 1, "last_activity_date": 1492006387, "last_edit_date": 1495535458, "creation_date": 1492006387, "answer_id": 43372071, "question_id": 43371907, "link": "https://stackoverflow.com/questions/43371907/difference-in-2-template-dependent-typename-kinds/43372071#43372071", "title": "difference in 2 template dependent typename kinds", "body": "<p>When you have</p>\n\n<pre><code>typename C::const_iterator iter(container.begin()); \n</code></pre>\n\n<p>The <code>const_iterator</code> part is a type that depends on what <code>C</code> is.  So you need <code>typename</code> there to tell the compiler that <code>C::const_iterator</code> is a type.</p>\n\n<p>In</p>\n\n<pre><code>std::vector&lt;T&gt; elems;\n</code></pre>\n\n<p>You are declaring a <code>std::vector</code> whose elements are of type <code>T</code>.  You do not need <code>typename</code> there at all.  Even though <code>vector</code> <em>depends</em> on the type <code>T</code> it is not a name dependent on what <code>T</code> is.</p>\n\n<p>You can read more about when and where <code>typename</code> and <code>template</code> are required at <a href=\"https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords\">Where and why do I have to put the &quot;template&quot; and &quot;typename&quot; keywords?</a></p>\n"}], "owner": {"reputation": 1706, "user_id": 5302690, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/58f104c7eddb6acb9e94430e931ea36f?s=128&d=identicon&r=PG&f=1", "display_name": "barney", "link": "https://stackoverflow.com/users/5302690/barney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 43372071, "answer_count": 2, "score": 1, "last_activity_date": 1492006817, "creation_date": 1492006029, "last_edit_date": 1492006817, "question_id": 43371907, "link": "https://stackoverflow.com/questions/43371907/difference-in-2-template-dependent-typename-kinds", "title": "difference in 2 template dependent typename kinds", "body": "<p>From Scott Meyers's book, names in a template that are dependent on a template parameter are called <strong>dependent names</strong>. \n(When a dependent name is nested inside a class, I call it a nested dependent name)</p>\n\n<p>So its necessary to use \"typename\" keyword before the dependent name, right?</p>\n\n<pre><code>template&lt;typename C&gt;\nvoid print2nd(const C&amp; container) {\ntypename C::const_iterator iter(container.begin()); \n...\n}\n</code></pre>\n\n<p>But why in this code, taken from Josuttis book, std::vector that is another template's instantiation which is obviously dependent on T, they do not use \"typename\" here:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Stack {\n    (?typename?) std::vector&lt;T&gt; elems;\n...\n};\n</code></pre>\n\n<p>It all looks confusing especially with another example from Meyers:</p>\n\n<pre><code>template&lt;typename IterT&gt; \nvoid workWithIterator(IterT iter) {\n    typename std::iterator_traits&lt;IterT&gt;::value_type temp(*iter);\n... }\n</code></pre>\n\n<p>They look all the same to me. How do you differentiate?</p>\n"}, {"tags": ["c++", "algorithm"], "comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 2, "creation_date": 1492006521, "post_id": 43371887, "comment_id": 73806056, "body": "just check the elapsed time in the loop."}, {"owner": {"reputation": 422, "user_id": 3499284, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d0162352240b3b7912e17f5104d05d13?s=128&d=identicon&r=PG&f=1", "display_name": "FrankK", "link": "https://stackoverflow.com/users/3499284/frankk"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1492007142, "post_id": 43371887, "comment_id": 73806574, "body": "@KarolyHorvath ok, but how can i make sure i return the current best value after 5 seconds?"}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1492008681, "post_id": 43371887, "comment_id": 73807934, "body": "what do you mean by &quot;best value&quot;?"}, {"owner": {"reputation": 422, "user_id": 3499284, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d0162352240b3b7912e17f5104d05d13?s=128&d=identicon&r=PG&f=1", "display_name": "FrankK", "link": "https://stackoverflow.com/users/3499284/frankk"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1492008875, "post_id": 43371887, "comment_id": 73808084, "body": "the matter is already solved, thanks though."}], "answers": [{"comments": [{"owner": {"reputation": 422, "user_id": 3499284, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d0162352240b3b7912e17f5104d05d13?s=128&d=identicon&r=PG&f=1", "display_name": "FrankK", "link": "https://stackoverflow.com/users/3499284/frankk"}, "edited": false, "score": 0, "creation_date": 1492007236, "post_id": 43372381, "comment_id": 73806661, "body": "does this also mean that the returned node is the best node it has currently discovered?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 422, "user_id": 3499284, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d0162352240b3b7912e17f5104d05d13?s=128&d=identicon&r=PG&f=1", "display_name": "FrankK", "link": "https://stackoverflow.com/users/3499284/frankk"}, "edited": false, "score": 0, "creation_date": 1492007273, "post_id": 43372381, "comment_id": 73806690, "body": "@user3499284 added one more sentence"}, {"owner": {"reputation": 422, "user_id": 3499284, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d0162352240b3b7912e17f5104d05d13?s=128&d=identicon&r=PG&f=1", "display_name": "FrankK", "link": "https://stackoverflow.com/users/3499284/frankk"}, "edited": false, "score": 0, "creation_date": 1492007424, "post_id": 43372381, "comment_id": 73806824, "body": "amazing, i will try this."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 422, "user_id": 3499284, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d0162352240b3b7912e17f5104d05d13?s=128&d=identicon&r=PG&f=1", "display_name": "FrankK", "link": "https://stackoverflow.com/users/3499284/frankk"}, "edited": false, "score": 0, "creation_date": 1492015448, "post_id": 43372381, "comment_id": 73812773, "body": "@user3499284 btw what is that algorithm good for? Never heard of it before"}, {"owner": {"reputation": 422, "user_id": 3499284, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d0162352240b3b7912e17f5104d05d13?s=128&d=identicon&r=PG&f=1", "display_name": "FrankK", "link": "https://stackoverflow.com/users/3499284/frankk"}, "edited": false, "score": 0, "creation_date": 1492185271, "post_id": 43372381, "comment_id": 73888669, "body": "its an ai  algorithm, used to determine the best move on games like tic tac toe, hex, chess, etc. you can use it in combination with monte carlo to calculate the best move if the game is too complex to calculate all possible options.  The good thing is that this algorithm also looks at the best moves for your opponent."}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": true, "score": 1, "last_activity_date": 1492007252, "last_edit_date": 1492007252, "creation_date": 1492007118, "answer_id": 43372381, "question_id": 43371887, "link": "https://stackoverflow.com/questions/43371887/c-time-limit-for-function/43372381#43372381", "title": "C++ time limit for function", "body": "<p>The only difficulty I can see is the recursion, but thats not really a problem, just call it with the current time and in the beginning of each call check if time elapsed is bigger than 5 seconds:</p>\n\n<pre><code>01 function negamax(node, depth, \u03b1, \u03b2, color, startTime)\n02     if (currentTime - startTime &gt; 5sec) or depth = 0 or node is a terminal node\n03         return color * the heuristic value of node\n</code></pre>\n\n<p>For convenience you can use a wrapper:</p>\n\n<pre><code>function negamaxWrap(node, depth, \u03b1, \u03b2, color)\n    return negamax(node, depth, \u03b1, \u03b2, color, currentTime)\n</code></pre>\n\n<p>How to make sure that you got the best value? When the stack is unwinded the returned value will still pass the test:</p>\n\n<pre><code>bestValue := max( bestValue, v )\n</code></pre>\n\n<p>thus you will get the <code>max</code> of the values found so far.</p>\n"}], "owner": {"reputation": 422, "user_id": 3499284, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d0162352240b3b7912e17f5104d05d13?s=128&d=identicon&r=PG&f=1", "display_name": "FrankK", "link": "https://stackoverflow.com/users/3499284/frankk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 0, "accepted_answer_id": 43372381, "answer_count": 1, "score": 0, "last_activity_date": 1492007252, "creation_date": 1492005978, "question_id": 43371887, "link": "https://stackoverflow.com/questions/43371887/c-time-limit-for-function", "title": "C++ time limit for function", "body": "<p>im trying to implement a time limit for my negamax alpha beta algorithm, but i can't seem to figure it out. what im trying to achieve is: start calculating a move , if the calculations arent done within 5 seconds, return the best move at this point.</p>\n\n<p>how can i do this?\nis it even possible with negamax?</p>\n\n<p>pseudo code for the negamax:</p>\n\n<pre><code>01 function negamax(node, depth, \u03b1, \u03b2, color)\n02     if depth = 0 or node is a terminal node\n03         return color * the heuristic value of node\n\n04     childNodes := GenerateMoves(node)\n05     childNodes := OrderMoves(childNodes)\n06     bestValue := \u2212\u221e\n07     foreach child in childNodes\n08         v := \u2212negamax(child, depth \u2212 1, \u2212\u03b2, \u2212\u03b1, \u2212color)\n09         bestValue := max( bestValue, v )\n10         \u03b1 := max( \u03b1, v )\n11         if \u03b1 \u2265 \u03b2\n12             break\n13     return bestValue\n</code></pre>\n\n<p>if needed i can add my c++ implementation of the negamax algorithm</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 5508, "user_id": 498424, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ig1qY.jpg?s=128&g=1", "display_name": "Raxvan", "link": "https://stackoverflow.com/users/498424/raxvan"}, "edited": false, "score": 1, "creation_date": 1492006254, "post_id": 43371847, "comment_id": 73805837, "body": "add one element (let&#39;s say -1) to <code>lst3</code> before <code>std::copy</code>, then see what happens. <code>inserter(lst3, lst3.begin())</code> will give you <code>1 2 3 4 -1</code> and <code>back_inserter</code> <code>-1 1 2 3 4</code>"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1492006459, "post_id": 43371847, "comment_id": 73806006, "body": "IIUC, the confusion is that it doesn&#39;t insert to <code>lst3.begin()</code> every time. cppreference explains that in the <code>inserter</code> example: <a href=\"http://en.cppreference.com/w/cpp/iterator/inserter\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/iterator/inserter</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11371, "user_id": 481061, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c4876d67fda212cee59d97ac5a676c2d?s=128&d=identicon&r=PG", "display_name": "Felix Dombek", "link": "https://stackoverflow.com/users/481061/felix-dombek"}, "edited": false, "score": 1, "creation_date": 1492009166, "post_id": 43372197, "comment_id": 73808318, "body": "Well, the elements are always inserted in original order, right? OP asks why they aren&#39;t inserted in reverse order, which is never happening."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": -1, "last_activity_date": 1492009509, "last_edit_date": 1492009509, "creation_date": 1492006727, "answer_id": 43372197, "question_id": 43371847, "link": "https://stackoverflow.com/questions/43371847/whats-the-mechanism-of-inserter-in-c/43372197#43372197", "title": "What&#39;s the mechanism of `inserter` in C++?", "body": "<p>The <a href=\"http://en.cppreference.com/w/cpp/iterator/inserter\" rel=\"nofollow noreferrer\"><code>std::inserter</code></a> functions creates a <a href=\"http://en.cppreference.com/w/cpp/iterator/insert_iterator\" rel=\"nofollow noreferrer\"><code>std::insert_iterator</code></a> object from the arguments that are passed to the functions.</p>\n\n<p>The problem you experience is because of two things:</p>\n\n<ul>\n<li>The first is that the iterator is <em>copied</em></li>\n<li>The second is that when a container is empty, its <code>begin</code> iterator is equal to its <code>end</code> iterator.</li>\n</ul>\n\n<p>Therefore the <code>std::insert_iterator</code> object will have a copy of the lists <code>end</code> iterator and therefore insert at the end of the list.</p>\n\n<p>Since you iterate from the beginning of the existing list, and always inserting at the end, the effect will be exactly the same as using <code>std::back_inserter</code> where the elements are inserted in the order they are iterated over.</p>\n"}, {"tags": [], "owner": {"reputation": 4427, "user_id": 193887, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/54a2fc2a8cb81440a442aa45fc0f41a9?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/193887/jeremy"}, "is_accepted": false, "score": 0, "last_activity_date": 1492081450, "creation_date": 1492081450, "answer_id": 43390550, "question_id": 43371847, "link": "https://stackoverflow.com/questions/43371847/whats-the-mechanism-of-inserter-in-c/43390550#43390550", "title": "What&#39;s the mechanism of `inserter` in C++?", "body": "<p>The behaviour you're seeing is correct for <a href=\"http://en.cppreference.com/w/cpp/iterator/inserter\" rel=\"nofollow noreferrer\">std::inserter()</a>.</p>\n\n<p>The behaviour you're expecting  - that is, <em>always</em> inserting at the front - is what you'd get using <a href=\"http://en.cppreference.com/w/cpp/iterator/front_inserter\" rel=\"nofollow noreferrer\">std::front_inserter()</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 1, "last_activity_date": 1492081729, "creation_date": 1492081729, "answer_id": 43390653, "question_id": 43371847, "link": "https://stackoverflow.com/questions/43371847/whats-the-mechanism-of-inserter-in-c/43390653#43390653", "title": "What&#39;s the mechanism of `inserter` in C++?", "body": "<blockquote>\n  <p>new element should be inserted to the location before lst3.begin()</p>\n</blockquote>\n\n<p>You're imagining the equivalent of this:</p>\n\n<pre><code> copy(lst.cbegin()+0, lst.cbegin()+1, inserter(lst3, lst3.begin()));\n copy(lst.cbegin()+1, lst.cbegin()+2, inserter(lst3, lst3.begin()));\n copy(lst.cbegin()+2, lst.cbegin()+3, inserter(lst3, lst3.begin()));\n copy(lst.cbegin()+3, lst.cbegin()+4, inserter(lst3, lst3.begin()));\n</code></pre>\n\n<p><em>(pretending that those <code>+</code> operations would work on list iterators)</em></p>\n\n<p>I can see why you'd think that, but no.</p>\n\n<p>When you provide <code>lst3.begin()</code> to <code>inserter</code>, this iterator isn't stored/cached and repeatedly used &mdash; we know that it can't be, because (thinking about the general case for a moment; lists specifically aren't prone to this) such an iterator might be invalidated by each insertion operation.</p>\n\n<p>Instead, the iterator is incremented after each operation.</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/iterator/inserter\" rel=\"nofollow noreferrer\">cppreference explains this</a>:</p>\n\n<blockquote>\n  <p>when inserting in a sequence container, insertion point advances because each std::insert_iterator::operator= updates the target iterator</p>\n</blockquote>\n\n<p>Indeed, we can see this for ourselves from <a href=\"http://en.cppreference.com/w/cpp/iterator/insert_iterator/operator%3D\" rel=\"nofollow noreferrer\">the cppreference <code>insert_iterator::operator=</code> page</a>.</p>\n\n<p>The end result is that you're actually inserting in a linear, left-to-right sequence, like:</p>\n\n<pre><code> copy(lst.cbegin()+0, lst.cbegin()+1, inserter(lst3, lst3.begin()));\n copy(lst.cbegin()+1, lst.cbegin()+2, inserter(lst3, lst3.begin()+1));\n copy(lst.cbegin()+2, lst.cbegin()+3, inserter(lst3, lst3.begin()+2));\n copy(lst.cbegin()+3, lst.cbegin()+4, inserter(lst3, lst3.begin()+3));\n</code></pre>\n\n<p><em>(pretending that those <code>+</code> operations would work on list iterators)</em></p>\n\n<p>This behaviour is actually more intuitive; the <em>entire</em> source range has been inserted, in its original order, at the position beginning <code>lst3.begin()</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "is_accepted": false, "score": 0, "last_activity_date": 1588907275, "last_edit_date": 1588907275, "creation_date": 1588905888, "answer_id": 61671164, "question_id": 43371847, "link": "https://stackoverflow.com/questions/43371847/whats-the-mechanism-of-inserter-in-c/61671164#61671164", "title": "What&#39;s the mechanism of `inserter` in C++?", "body": "<p>@Lightness Races in Orbit's answer is correct.  </p>\n\n<p>In a nutshell, <code>std::inserter(container, iterator_argument)</code> always bind to that <code>iterator_argument</code> position initially passed in.</p>\n\n<p>For example: </p>\n\n<pre><code>vector&lt;int&gt; vec = {1,2,3,4};\nauto it = std::inserter(vec, vec.begin() + 1);\n</code></pre>\n\n<p>inside state: </p>\n\n<pre><code>1,2,3,4\n  \u2191\n  it\n</code></pre>\n\n<p>insert an element:</p>\n\n<pre><code>*it = 888;\n</code></pre>\n\n<p>inside state: </p>\n\n<pre><code>1,888,2,3,4\n      \u2191\n      it\n</code></pre>\n\n<p>insert an element:    </p>\n\n<pre><code>*it = 999;\n</code></pre>\n\n<p>inside state:   </p>\n\n<pre><code>1,888,999,2,3,4\n          \u2191\n          it\n</code></pre>\n\n<p>So you <strong>don't</strong> get a reverse order sequence.</p>\n\n<p>Btw, for a <code>std::inserter</code>, you just need to keep doing <code>*it = value</code> for inserting. And <code>it++</code> or <code>++it</code> has no effect on <code>std::inserter</code>. The position is bound forever.</p>\n\n<hr>\n\n<p>Also check the doc: </p>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/iterator/insert_iterator/operator=\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/iterator/insert_iterator/operator=</a> </p>\n\n<blockquote>\n  <p>1) Results in <code>iter = container-&gt;insert(iter, value); ++iter;</code></p>\n</blockquote>\n\n<p>So what's value of <code>container-&gt;insert(iter, value);</code>? </p>\n\n<p>It's: </p>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/container/vector/insert\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/container/vector/insert</a></p>\n\n<blockquote>\n  <p>1-2) Iterator pointing to the inserted value</p>\n</blockquote>\n"}], "owner": {"reputation": 651, "user_id": 7677894, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/36f21bdc1b325c9f70e6b85b90659d54?s=128&d=identicon&r=PG&f=1", "display_name": "inkzk", "link": "https://stackoverflow.com/users/7677894/inkzk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "answer_count": 4, "score": 3, "last_activity_date": 1588907275, "creation_date": 1492005870, "question_id": 43371847, "link": "https://stackoverflow.com/questions/43371847/whats-the-mechanism-of-inserter-in-c", "title": "What&#39;s the mechanism of `inserter` in C++?", "body": "<p>I tried the code blow, the <code>inserter</code> and <code>back_inserter</code> make the same <code>lst3</code>,but I think the <code>inserter</code> should produce a list of <code>{4,3,2,1}</code> as new element should be inserted to the location before <code>lst3.begin()</code>. Why do they make the same result?\nThanks!</p>\n\n<pre><code>int main() {\n    list&lt;int&gt; lst = {1,2,3,4};\n    list&lt;int&gt; lst3;\n    // copy(lst.cbegin(), lst.cend(), inserter(lst3, lst3.begin()));\n    copy(lst.cbegin(), lst.cend(), back_inserter(lst3));\n    for_each(lst.cbegin(), lst.cend(), [] (const int i) {cout&lt;&lt;i&lt;&lt;endl;});\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "input", "key"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6536435"}, "edited": false, "score": 0, "creation_date": 1520968925, "post_id": 43371834, "comment_id": 85531958, "body": "Hi Encoder Senjin. I recently encountered this issue and Darien Pardinas\u2019 answer worked for me. If it works for you, you should formally accept it so others can see it. If it doesn\u2019t work, what exactly happens? How did you fix it? Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7789267, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QMacafw_MGA/AAAAAAAAAAI/AAAAAAAABnc/XOexH01D33E/photo.jpg?sz=128", "display_name": "Sagar Mohalkar", "link": "https://stackoverflow.com/users/7789267/sagar-mohalkar"}, "is_accepted": false, "score": 0, "last_activity_date": 1520966155, "last_edit_date": 1520966155, "creation_date": 1492007194, "answer_id": 43372412, "question_id": 43371834, "link": "https://stackoverflow.com/questions/43371834/how-to-check-when-a-user-presses-the-enter-key-without-providing-a-value-in-c/43372412#43372412", "title": "How to check when a user presses the enter key without providing a value in C++", "body": "<pre><code>#include&lt;iostream&gt;\n#include&lt;conio.h&gt;\n#include &lt;string&gt;\nusing namespace std;\nint main()\n{    \n char str[10];\n char a;\n int i=0;\n cout&lt;&lt;\"\\nEnter the input :-\";\n do{\n      a=getche();\n      if(a!=13)\n        {\n         str[i]=a;\n         i++;\n        }\n        else\n          break;\n   }\n   while(a!=13);\n   return 0;\n}   \n</code></pre>\n\n<p>In the above code, getch() is a method that takes a single character input without printing it to the screen. When the input is taken, it is checked with 13, which is the ASCII value for the enter key. If a match is found, it will terminate per your requirements.</p>\n"}, {"tags": [], "owner": {"reputation": 5136, "user_id": 1416294, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/yi6ex.jpg?s=128&g=1", "display_name": "Darien Pardinas", "link": "https://stackoverflow.com/users/1416294/darien-pardinas"}, "is_accepted": false, "score": 0, "last_activity_date": 1492007374, "creation_date": 1492007374, "answer_id": 43372477, "question_id": 43371834, "link": "https://stackoverflow.com/questions/43371834/how-to-check-when-a-user-presses-the-enter-key-without-providing-a-value-in-c/43372477#43372477", "title": "How to check when a user presses the enter key without providing a value in C++", "body": "<p>Here is a complete example. In short, you can use <code>getline</code> from <code>&lt;string&gt;</code> and it will give you empty input as well when you hit the <code>Enter</code> key.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    while(true)\n    {\n        std::string in;\n        getline(std::cin, in);\n\n        if (in.empty())\n        {\n            std::cout &lt;&lt; \"Enter key was pressed with no message\" &lt;&lt; std::endl;\n        }\n        else\n        {\n            std::cout &lt;&lt; \"Enter key was pressed with message\" &lt;&lt; in &lt;&lt; std::endl;\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 69, "user_id": 9877277, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EZaop5SHpMg/AAAAAAAAAAI/AAAAAAAAABE/YNQeQNvK8Lc/photo.jpg?sz=128", "display_name": "Gursewak Dhindsa", "link": "https://stackoverflow.com/users/9877277/gursewak-dhindsa"}, "is_accepted": false, "score": 0, "last_activity_date": 1570382020, "creation_date": 1570382020, "answer_id": 58259564, "question_id": 43371834, "link": "https://stackoverflow.com/questions/43371834/how-to-check-when-a-user-presses-the-enter-key-without-providing-a-value-in-c/58259564#58259564", "title": "How to check when a user presses the enter key without providing a value in C++", "body": "<p>You could get the character using getch() or any other relative and then compare for the enter key using its ANSCI code which is '\\x0D'</p>\n"}], "owner": {"reputation": 1, "user_id": 7856767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9JPPG.gif?s=128&g=1", "display_name": "EnCoder Senjin", "link": "https://stackoverflow.com/users/7856767/encoder-senjin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1747, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1570382020, "creation_date": 1492005850, "last_edit_date": 1520966589, "question_id": 43371834, "link": "https://stackoverflow.com/questions/43371834/how-to-check-when-a-user-presses-the-enter-key-without-providing-a-value-in-c", "title": "How to check when a user presses the enter key without providing a value in C++", "body": "<p>In my code, I want to check whether enter key is pressed when input value is not entered. Because, normally pushing enter key just makes new line until unless input is not entered and ;instead, I want it make a command by detecting enter key is pressed in this case.</p>\n\n<pre><code>   #include &lt;iostream&gt;\n   #include &lt;string&gt;\n   using namespace std;\n\n   int main(){    \n        String str=\"\";\n        while(str!=\"exit\"){\n          cin&gt;&gt;str;\n          if(input is not entered and enter key is pressed)\n             continue;\n          else\n             break;\n        }\n        return 0;\n    }\n</code></pre>\n\n<p>I am open to any suggestions. </p>\n"}, {"tags": ["c++", "ios", "frameworks", "embed"], "comments": [{"owner": {"reputation": 1688, "user_id": 1677656, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d97f63cf7a66792d786bdb7fc6920e9?s=128&d=identicon&r=PG", "display_name": "Rafael Beckel", "link": "https://stackoverflow.com/users/1677656/rafael-beckel"}, "edited": false, "score": 0, "creation_date": 1492116864, "post_id": 43371819, "comment_id": 73863731, "body": "Maybe you should compile Boost as a static library inside your framework"}, {"owner": {"reputation": 11, "user_id": 2743658, "user_type": "registered", "profile_image": "https://graph.facebook.com/1404346689/picture?type=large", "display_name": "George Kastour", "link": "https://stackoverflow.com/users/2743658/george-kastour"}, "reply_to_user": {"reputation": 1688, "user_id": 1677656, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d97f63cf7a66792d786bdb7fc6920e9?s=128&d=identicon&r=PG", "display_name": "Rafael Beckel", "link": "https://stackoverflow.com/users/1677656/rafael-beckel"}, "edited": false, "score": 0, "creation_date": 1492196093, "post_id": 43371819, "comment_id": 73894081, "body": "I compiled it  and set the headers search path to the include folder and linked against the boost.a library file for the framework, but you have to do the same also when you include the framwork in an application"}], "owner": {"reputation": 11, "user_id": 2743658, "user_type": "registered", "profile_image": "https://graph.facebook.com/1404346689/picture?type=large", "display_name": "George Kastour", "link": "https://stackoverflow.com/users/2743658/george-kastour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1492005819, "creation_date": 1492005819, "question_id": 43371819, "link": "https://stackoverflow.com/questions/43371819/cocoa-touch-framework-to-embed-some-native-libraries", "title": "Cocoa touch framework to embed some native libraries", "body": "<p>I'm developing a framework that's using a third party library which is  Boost native, I compiled my framework and called methods from Boost and everything is perfect.</p>\n\n<p>but when I included the framework into another application, the application complaining about the Boost library so I have to add the Boost library to the application</p>\n\n<p>can't I embed the library into my framework, so I can use only the framework in my application without caring about the Boost library??</p>\n\n<p>Thanks Much\n/George</p>\n"}, {"tags": ["c++", "inheritance", "polymorphism"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1492005712, "post_id": 43371691, "comment_id": 73805380, "body": "why do the items inherit from <code>Inventory</code> ?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1492005715, "post_id": 43371691, "comment_id": 73805384, "body": "There seems to be a fundamental problem with this design. The only mechanism for adding an item to an inventory is <code>add()</code> which can only add an item to itself. The concept of a sword being an inventory is strange."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1492005715, "post_id": 43371691, "comment_id": 73805385, "body": "Your class hierarchy is confusing -- how is it that a <code>Sword</code> <i>is an</i> <code>Inventory</code>? And why would an <code>Inventory</code> contain other <code>Inventory</code>&#39;s?"}, {"owner": {"reputation": 1568, "user_id": 5526072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588896494e8fd23bb0092474a5cf958d?s=128&d=identicon&r=PG", "display_name": "jwimberley", "link": "https://stackoverflow.com/users/5526072/jwimberley"}, "edited": false, "score": 0, "creation_date": 1492005762, "post_id": 43371691, "comment_id": 73805424, "body": "Why does your Inventory class contain an array pointers to Inventory? This would make since for a data structure like a list, but your code looks dangerously circular."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1492005981, "post_id": 43371691, "comment_id": 73805617, "body": "you probably want something like <code>InventoryItem</code> as base class and then maybe a simple <code>std::vector&lt;InventoryItem*&gt;</code> will do (or replace <code>*</code> with your favourite smart pointer)"}, {"owner": {"reputation": 2916, "user_id": 3646096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KUofm.jpg?s=128&g=1", "display_name": "M&#225;rio Feroldi", "link": "https://stackoverflow.com/users/3646096/m%c3%a1rio-feroldi"}, "edited": false, "score": 0, "creation_date": 1492010868, "post_id": 43371691, "comment_id": 73809747, "body": "I see you&#39;re new to SO. Don&#39;t forget to vote and mark the question you find most useful as correct."}], "answers": [{"tags": [], "owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "is_accepted": false, "score": 0, "last_activity_date": 1492006252, "last_edit_date": 1492006252, "creation_date": 1492005950, "answer_id": 43371881, "question_id": 43371691, "link": "https://stackoverflow.com/questions/43371691/array-of-inherited-classes/43371881#43371881", "title": "Array of inherited classes", "body": "<p>It seems that you accidentally assigned the same name to two very different classes.</p>\n\n<p>One class is \"Item\" - and \"Sword\" extends it.</p>\n\n<pre><code>class Sword: public Item {...};\n</code></pre>\n\n<p>Another class is \"Inventory\" - it represents a list of items.</p>\n\n<pre><code>class Inventory\n{\n    void add(Item*) {...}\n    ...\n    Item** inventory;\n};\n</code></pre>\n\n<p>Then you should make sure you only have one inventory, not one inventory per item. Adding stuff to this inventory should then be easy.</p>\n\n<pre><code>Inventory* inventory = new Inventory();\nSword* sword = new Sword(1);\ninventory-&gt;add(sword);\n</code></pre>\n\n<hr>\n\n<p>Note: You should avoid using <code>new</code> and <code>delete</code>. Use standard containers (<code>std::vector</code>) where possible. In addition, use smart pointers (<code>std::unique_ptr</code>) where possible. Instead of pointer-to-pointer, use a list of smart pointers:</p>\n\n<pre><code>Item** inventory; // works, but not so good\nstd::vector&lt;std::unique_ptr&lt;Item&gt;&gt;; // better\n</code></pre>\n\n<p>This is a coding-practice advice. It doesn't affect what the code really does, it's only there to reduce confusion (e.g. where to put <code>delete</code>, which corresponds to <code>new</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 2916, "user_id": 3646096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KUofm.jpg?s=128&g=1", "display_name": "M&#225;rio Feroldi", "link": "https://stackoverflow.com/users/3646096/m%c3%a1rio-feroldi"}, "is_accepted": false, "score": 1, "last_activity_date": 1492010164, "creation_date": 1492010164, "answer_id": 43373536, "question_id": 43371691, "link": "https://stackoverflow.com/questions/43371691/array-of-inherited-classes/43373536#43373536", "title": "Array of inherited classes", "body": "<p>Using dynamic polymorphism, we can create an abstract class <code>Item</code>, which describes the functionality an item has in an inventory. It's useful because, with such class, it's possible to manage items we don't know about, we only know that they will behave like one.</p>\n\n<pre><code>class Item\n{\npublic:\n    virtual ~Item() = default;\n    virtual const char* description() const = 0;\n};\n</code></pre>\n\n<p>Going further, all other items (swords, bottles etc) can inherit from this class, thus giving them the characteristic of being an item:</p>\n\n<pre><code>class Sword: public Item\n{\npublic:\n    Sword() = default;\n    virtual ~Sword() = default;\n    const char* description() const override\n    { return \"Sword\"; }\n};\n</code></pre>\n\n<p>In the <code>description</code> method, it's overridden the <code>Item::description</code> abstract one, so whenever you call <code>.description</code> from an instance of <code>Sword</code>, you'll have the <code>\"Sword\"</code> string returned. For example:</p>\n\n<pre><code>Sword sword{};\nItem&amp; item = sword;\nstd::puts(item.description()); // prints the \"Sword\" string.\n</code></pre>\n\n<p>It's now simpler to store items, we just have to use a vector of them: <code>std::vector&lt;std::unique_ptr&lt;Item&gt;&gt;</code>.</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;memory&gt;\n\nstd::vector&lt;std::unique_ptr&lt;Item&gt;&gt; inventory{};\ninventory.emplace_back(std::make_unique&lt;Sword&gt;());\n</code></pre>\n\n<p>But why can't we have an <code>std::vector&lt;Item&gt;</code>? Simply because it's not possible to construct an <code>Item</code> from a <code>Sword</code>. Actually, it's not possible to even construct an <code>Item</code>, because it has abstract methods (i.e. they are there only to describe the method's prototype, not its definition/implementation).</p>\n\n<p><code>std::unique_ptr</code> is one of the few C++ smart pointers, it's there so we don't have to manually handle allocations. Using <code>new</code> and <code>delete</code> in your code can result in memory leaks and disasters because of the programmer's distraction, so a smart pointer makes this problem inexistent.</p>\n\n<p>Finally, in order to have an item back, you may simply down-cast the thing back to a Sword:</p>\n\n<pre><code>const auto&amp; item = inventory[0]; // item is `const std::unique_ptr&lt;Item&gt;&amp;`\nputs(item-&gt;description()); // prints \"Sword\"\nputs(dynamic_cast&lt;Sword*&gt;(item.get())-&gt;description()); // also prints \"Sword\"\n</code></pre>\n\n<p>The latter (using dynamic_cast) will create a transformed pointer to that first item, from <code>item.get()</code> <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr/get\" rel=\"nofollow noreferrer\">method</a>, but in the form of <code>Sword*</code>. You'll want to do this if there is a method or data member from <code>Sword</code> that isn't common to <code>Item</code>. For example, if you had something like \"int sword_power`, you'd do this:</p>\n\n<pre><code>auto sword = dynamic_cast&lt;Sword*&gt;(item.get());\nif (sword != nullptr)\n{\n    std::printf(\"sword power: %d\\n\", sword-&gt;sword_power);\n}\n</code></pre>\n\n<p>Of course, checking if the cast was successful is optional, but doing that prevents your code from performing undefined behavior (in case the cast fails and a null pointer is returned).</p>\n\n<p>There's still another way of doing this system (<strong>not</strong> prior to C++17), using the new library tool <code>std::variant</code>.</p>\n\n<p>Basically, a variant lets you have one of many different types at a time. Different from tuples, that lets you have many different types (like a struct), a variant will only let one value from one type at a time. For better understanding it, here's how it works:</p>\n\n<pre><code>#include &lt;variant&gt; // C++17\n\nstruct Sword {};\nstruct Bottle {};\n\nstd::variant&lt;Sword, Bottle&gt; item = Sword{};\n</code></pre>\n\n<p>Like a <code>std::tuple</code>, a variant will have its possible types in the template parameters as arguments (i.e. the <code>Sword</code> and <code>Bottle</code> types are part of <code>item</code>'s whole type). This way, you can have either a sword OR a bottle at a time, but <strong>never both at the same time</strong>. Let's implement our inventory with that new functionality. First we have to change our classes a bit:</p>\n\n<pre><code>class Sword\n{\npublic:\n    int power;\n\n    Sword() = default;\n    const char* description() const\n    { return \"Sword\"; }\n};\n\nclass Bottle\n{\npublic:\n    bool empty;\n\n    Bottle() = default;\n    const char* description() const\n    { return \"Bottle\"; }\n};\n</code></pre>\n\n<p>We removed the need of virtual methods and dynamic polymorphism, and you'll further see that we won't need dynamic allocation anymore, as <code>std::variant</code> is required to work in the stack (which means program will be faster also (maybe)).</p>\n\n<p>Now, for the <code>Item</code> concept, we make an alias of variant with our classes:</p>\n\n<pre><code>using Item = std::variant&lt;Sword, Bottle&gt;;\n</code></pre>\n\n<p>And we can use this with a vector too:</p>\n\n<pre><code>std::vector&lt;Item&gt; inventory{};\ninventory.emplace_back(Sword{});\ninventory.emplace_back(Bottle{});\n</code></pre>\n\n<p>There are a few ways of interacting with those items in case you need them back. One is to use <code>std::holds_alternative</code>:</p>\n\n<pre><code>auto&amp; item = inventory[0];\n\nif (std::holds_alternative&lt;Sword&gt;(item))\n{\n    auto&amp; sword = std::get&lt;Sword&gt;(item);\n    sword.power = 42;\n    std::printf(\"%s: %d\\n\", sword.description(), sword.power);\n}\n</code></pre>\n\n<p>It checks whether an object of a variant is holding the value of a giving type. In this case, we checked for <code>Sword</code>. Then, if there's a sword in there, we get the value using <code>std::get&lt;&gt;</code>, which returns a reference to our item as a <code>Sword</code>.</p>\n\n<p>Another way of getting access of the real object is by using <a href=\"http://en.cppreference.com/w/cpp/utility/variant/visit\" rel=\"nofollow noreferrer\">std::visit</a>. Simply put: visitors are objects that behave like a function with overloads. You can call a visitor just like a function. In order to make a visitor, we can either use a struct with overloaded <code>operator()</code>s, or lambdas. Here's the first approach:</p>\n\n<pre><code>struct VisitItem\n{\n    void operator() (Sword&amp; sword) const\n    {\n        std::printf(\"%s: %d\\n\", sword.description(), sword.power);\n    }\n\n    void operator() (Bottle&amp; bottle) const\n    {\n        std::printf(\"%s: %s\\n\", bottle.description(),\n                    bottle.empty? \"empty\" : \"full\");\n    }\n};\n\nauto&amp; item = inventory[0];\nstd::visit(VisitItem{}, item); // we give an instance of VisitItem for std::visit, and the item itself.\n</code></pre>\n\n<p>Here, <code>std::visit</code> will call the correct <code>operator()</code> for the current object inside the variant (i.e. the item). If item is holding a Sword, so <code>operator() (Sword&amp;)</code> will be called.</p>\n\n<p>The other approach is to make overloaded lambdas. It's a bit complex yet, as we don't have a library tool for that, but with C++17 it is actually easier to implement it:</p>\n\n<pre><code>template &lt;typename... Ts&gt;\nstruct overload : Ts...\n{\n    using Ts::operator()...;\n    template &lt;typename... TTs&gt;\n    constexpr explicit overload(TTs&amp;&amp;... tts) noexcept\n        : Ts{std::forward&lt;TTs&gt;(tts)}...\n    {\n    }\n};\n\ntemplate &lt;typename... Ts&gt;\nexplicit overload(Ts&amp;&amp;...) -&gt; overload&lt;std::decay_t&lt;Ts&gt;...&gt;;\n</code></pre>\n\n<p>And then use it like so:</p>\n\n<pre><code>auto&amp; item = inventory[0];\nauto visitor = overload(\n    [] (Sword&amp; s) { std::printf(\"power: %d\\n\", s.power); },\n    [] (Bottle&amp; b) { std::printf(\"%s\\n\", b.empty? \"empty\" : \"full\"); }\n);\n\nstd::visit(visitor, item);\n</code></pre>\n\n<p>If you want to understand what's happening in the <code>overload</code> struct, it's inheriting from all lambdas you're giving it, and bringing the <code>operator()</code> overloads into overload lookup (because function overloads from base classes aren't considered as candidates, so you have to <code>using overload</code>). The line after the <code>overload</code> struct is a <a href=\"http://en.cppreference.com/w/cpp/language/class_template_deduction\" rel=\"nofollow noreferrer\">user-defined deduction guide</a>, which means you can change the template arguments of a template struct based on the constructor.</p>\n"}], "owner": {"reputation": 31, "user_id": 7820466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e927ac5e4e9985ee042f2b7b8b4e14e?s=128&d=identicon&r=PG&f=1", "display_name": "c novice", "link": "https://stackoverflow.com/users/7820466/c-novice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 835, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1492010164, "creation_date": 1492005512, "question_id": 43371691, "link": "https://stackoverflow.com/questions/43371691/array-of-inherited-classes", "title": "Array of inherited classes", "body": "<p>I have an Inventory class in which I would like to make an array with objects from the classes Sword, Shield and Potion. </p>\n\n<pre><code>class Inventory {\npublic:\n    Inventory();\n    ~Inventory();\n    virtual void add();\n    Inventory** getinvent();\n    void setinvent(Inventory** new_inventory);\n    int getsize();\n    void setsize(int new_size);\nprivate:\n    Inventory** inventory;\n    int invent_size;\n};\n\nInventory::Inventory() {\n    inventory = new Inventory*[1];\n    invent_size = 1;\n}\n\nclass Sword : public Inventory {\npublic:\n    Sword(int strength);\n    ~Sword();\n    void add();\nprivate:\n    int strength;\n    Sword* sword;\n};\n\nSword::Sword(int strength) {\n    this-&gt;strength = strength;\n    sword = this;\n}\n\nvoid Sword::add() {\n    setsize(getsize() + 1);\n\n    Inventory** new_invent = new Inventory*[getsize()];\n    for (int i = 0; i &lt; getsize() - 1; i++) {\n        new_invent[i] = getinvent()[i];\n    }\n\n    new_invent[getsize() - 1] = sword;\n    setinvent(new_invent);\n}\n</code></pre>\n\n<p>The Shield and Potion classes are similar to the Sword class. If I make the following objects in the implementation:</p>\n\n<pre><code>Inventory* inventory = new Inventory();\nSword* sword = new Sword(1);\n</code></pre>\n\n<p>How do I now add this sword to this specific inventory? I don't think sword->add(); would work, since sword doesn't know it's inherited from inventory. Is this correct?\nI tried to make the add() method virtual, since it has to work for sword, shield and potion objects.</p>\n"}, {"tags": ["c++", "visual-c++", "boolean", "clang++", "bounds"], "comments": [{"owner": {"reputation": 1568, "user_id": 5526072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588896494e8fd23bb0092474a5cf958d?s=128&d=identicon&r=PG", "display_name": "jwimberley", "link": "https://stackoverflow.com/users/5526072/jwimberley"}, "edited": false, "score": 0, "creation_date": 1492006193, "post_id": 43371459, "comment_id": 73805782, "body": "The reinterpret_cast can always create undefined behavior when you do things like this. So, perhaps this behavior is outside the standard?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1492006264, "post_id": 43371459, "comment_id": 73805846, "body": "Agreed. If you want to <i>copy</i> representations, use <code>memcpy</code>."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1492008292, "post_id": 43371459, "comment_id": 73807582, "body": "It is likely traceable to a subtle difference in the code generation strategy. MSVC tends to allow garbage in the high bits of a register when it is returning a <code>bool</code> value, leaving it up to the caller to zero-extend or otherwise use only the applicable low bits of the register. Clang and GCC, on the other hand, are more likely to ensure that the high bits are zeroed on the callee side. Of course, this isn&#39;t a hard-and-fast rule, and it absolutely should not matter which strategy the compiler uses. As the other answers have said, your code is <i>broken</i> because it invokes <i>undefined behavior</i>."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1492008706, "post_id": 43371459, "comment_id": 73807955, "body": "&quot;Should I just ignore this, or is it a bug that only Visual-C++ has?&quot; Neither. You should not write such code."}, {"owner": {"reputation": 136, "user_id": 788979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff1fdd272465e1e4e953c09342927ed3?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/788979/chris"}, "edited": false, "score": 0, "creation_date": 1492014580, "post_id": 43371459, "comment_id": 73812268, "body": "For those who did not understand the purpose of the sample, it was just a showcase to &quot;simulate&quot; a memory corruption or a bug in another part of the code that caused a boolean value to be initialized with something else than true or false, whatever the binary representation of a bool. (I was wondering if I have to proptect my code from improper usage somewhere else using an assert for example, but only if this behavior is not UB)"}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1492072750, "post_id": 43371459, "comment_id": 73836096, "body": "That last comment means the question makes even less sense. You cannot demonstrate anything meaningful with undefined behavior. You aren&#39;t initializing a Boolean value with anything, you&#39;re doing raw memory reinterpretation in such a way that is illegal according to the language specification. You cannot protect your code from improper usage if other programmers are invoking undefined behavior because anything can happen. There&#39;s no assert that would catch it."}, {"owner": {"reputation": 136, "user_id": 788979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff1fdd272465e1e4e953c09342927ed3?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/788979/chris"}, "edited": false, "score": 0, "creation_date": 1492075055, "post_id": 43371459, "comment_id": 73837540, "body": "if (v &lt; std::numeric_limits&lt;bool&gt;::min() || v &gt; std::numeric_limits&lt;bool&gt;::max()) does the job for me, but not consistently accros compilers, that&#39;s why I asked the question (I mean that for some compilers, the if is never triggered because the value is changed upon creation)."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1492076252, "post_id": 43371459, "comment_id": 73838352, "body": "The standard doesn&#39;t define the representation of bool"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1492076600, "post_id": 43371459, "comment_id": 73838591, "body": "Similar question, <a href=\"http://stackoverflow.com/questions/28207856/changing-a-bool-to-a-value-other-than-0-or-1/28208832#28208832\" title=\"changing a bool to a value other than 0 or 1\">stackoverflow.com/questions/28207856/&hellip;</a>"}, {"owner": {"reputation": 136, "user_id": 788979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff1fdd272465e1e4e953c09342927ed3?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/788979/chris"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1492076727, "post_id": 43371459, "comment_id": 73838678, "body": "@M.M Again, I never assumed it did (except I chose &#39;3&#39; as a test value and assumed it was neither true nor false on the compilers I tested, but I could have chosen 666 to be sure). The question was not about the representation of the bool, but if it should be put in the limits defined by std::numeric_limits&lt;bool&gt; upon assignment, which is not the case with VisualStudio."}, {"owner": {"reputation": 136, "user_id": 788979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff1fdd272465e1e4e953c09342927ed3?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/788979/chris"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1492076978, "post_id": 43371459, "comment_id": 73838857, "body": "@M.M Your link question is only similar in the sense of how I manipulate the stored bool value to &quot;fake&quot; a non valid bool (which comes from another code I do not control, from another library coded in C for example). I was asking about bool assignment from a value supposed to be a bool. I think there is no real answer in the standard and will assume it&#39;s just UB :) Thanks all for your inputs."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1492077058, "post_id": 43371459, "comment_id": 73838916, "body": "Huh? Your question is entirely about the representation of bool.  <code>numeric_limits</code> has nothing to do with it. Assignment to a <code>bool</code> converts the argument to <code>true</code> or <code>false</code> and stores it ; the examples in your question both comply with the standard in this respect"}, {"owner": {"reputation": 136, "user_id": 788979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff1fdd272465e1e4e953c09342927ed3?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/788979/chris"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1492077908, "post_id": 43371459, "comment_id": 73839497, "body": "@M.M I updated the question with numeric_limits that was in my whole library code but forgot to include here. And as you can see, the assignment do not convert to true or false in Visual case, it&#39;s out of the numeric_limits (which by the specs says min=false max=true)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1492079442, "post_id": 43371459, "comment_id": 73840431, "body": "@Chris visual studio does convert it to <code>true</code>, you are just misunderstanding the output of your program. Try <code>bool b = 3; cout &lt;&lt; b &lt;&lt; &#39;\\n&#39;;</code>The line <code>*pi = 3;</code> assigns to a <code>uint8_t</code>, not a <code>bool</code>."}, {"owner": {"reputation": 136, "user_id": 788979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff1fdd272465e1e4e953c09342927ed3?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/788979/chris"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1492085920, "post_id": 43371459, "comment_id": 73845075, "body": "@M.M I&#39;m not sure what you mean by &quot;convert it to bool&quot;, since once conversion (assignment in this case) has been made, I thought the standard imposed it still matches numeric_limits min/max, which is not the case here. Putting all the printing aside, which is irrelevant for my actual question. But anyway, I was not trying here to write bad code on purpose, but was wondering if I could protect my code from bad code from others (the ones passing an altered bool value), in case it was NOT UB and throw or assert in such a case. If it&#39;s really UB, then I do nothing."}], "answers": [{"comments": [{"owner": {"reputation": 136, "user_id": 788979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff1fdd272465e1e4e953c09342927ed3?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/788979/chris"}, "edited": false, "score": 0, "creation_date": 1492014882, "post_id": 43372541, "comment_id": 73812442, "body": "Well c++ does not, but the stl does a little bit, since a boolean value has to be comprised btw std::numeric_limits&lt;bool&gt;::min and max"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 136, "user_id": 788979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff1fdd272465e1e4e953c09342927ed3?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/788979/chris"}, "edited": false, "score": 0, "creation_date": 1492067514, "post_id": 43372541, "comment_id": 73832936, "body": "@Chris: I think you mean &quot;Standard Library&quot;. That&#39;s an integral part of C++ so you can&#39;t make a difference there."}, {"owner": {"reputation": 136, "user_id": 788979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff1fdd272465e1e4e953c09342927ed3?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/788979/chris"}, "edited": false, "score": 0, "creation_date": 1492071866, "post_id": 43372541, "comment_id": 73835532, "body": "Sure, but I was not assuming anything about the binary representation of the bool anyway. My point was just to determine if this behavior is a bug or if the spec tells it&#39;s UB. My code do not control the way the bool is created, but I do check if it&#39;s in the range of numeric_limits for other reasons (mainly because it&#39;s a template). So I was wondering if I should throw an error if the value is invalid for some reason (coding error in the code before me) or if it&#39;s UB (in that case I just assert). It&#39;s hard to make a small sample out of a huge library code to showcase the question :)"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 136, "user_id": 788979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff1fdd272465e1e4e953c09342927ed3?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/788979/chris"}, "edited": false, "score": 1, "creation_date": 1492073156, "post_id": 43372541, "comment_id": 73836339, "body": "@Chris: Accessing a value using an expression of another type is only defined for a few special cases.  <code>*pi=3</code> is valid if and only if <code>3</code> happens to be the binary representation of either <code>true</code> or <code>false</code>. Note that you can&#39;t say that <code>false</code> must be 0, that&#39;s how <code>static_cast</code> works. It converts values. <code>reinterpret_cast</code> converts bit patterns."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 3, "last_activity_date": 1492007519, "creation_date": 1492007519, "answer_id": 43372541, "question_id": 43371459, "link": "https://stackoverflow.com/questions/43371459/should-a-boolean-value-be-truncated-to-either-true-or-false-when-assigned/43372541#43372541", "title": "Should a boolean value be truncated to either true or false when assigned?", "body": "<p>\"in the case where the stored value is neither true nor false\"</p>\n\n<p>Why do you think that's the case? C++ does not restrict the binary representation of <code>bool</code>. On some compilers, <code>true</code> could be represented by <code>00000011</code>, and other compilers could choose to represent <code>false</code> as <code>00000011</code>.</p>\n\n<p>But indeed, neither GCC not MSVC use that bit pattern for either <code>bool</code> value. That makes it indeed Undefined Behavior. UB can <em>never</em> be a compiler bug. A bug is where the implementation doesn't work as it should, but UB specifically means that any actual behavior is acceptable.</p>\n"}, {"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1492073260, "post_id": 43372616, "comment_id": 73836409, "body": "&quot;So when you are telling the compiler to reinterpret the address of the boolean as an 8-bit integer &quot; - the actual code interprets it as <i>the address of</i> an 8 bit integer."}], "tags": [], "owner": {"reputation": 1, "user_id": 5140233, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7S2yIrMUV2Y/AAAAAAAAAAI/AAAAAAAAATc/rT7o6HIhZmE/photo.jpg?sz=128", "display_name": "Tyler Roesler", "link": "https://stackoverflow.com/users/5140233/tyler-roesler"}, "is_accepted": false, "score": 0, "last_activity_date": 1492008327, "last_edit_date": 1492008327, "creation_date": 1492007720, "answer_id": 43372616, "question_id": 43371459, "link": "https://stackoverflow.com/questions/43371459/should-a-boolean-value-be-truncated-to-either-true-or-false-when-assigned/43372616#43372616", "title": "Should a boolean value be truncated to either true or false when assigned?", "body": "<p>Not sure if this helps, but g++ exhibits same behavior as Visual-C++.</p>\n\n<p>This is the output I got:</p>\n\n<pre>\nb: 0 pb: 0 pi: 0\nb: 3 pb: 3 pi: 3\nb2: 3 b3: 3\n</pre>\n\n<p>From what I understand (I'm on expert on c++ compilers), <code>reinterpret_cast</code> instructs the compiler to treat the collection of bits as the new type. So when you are telling the compiler to reinterpret the <em>address</em> of the boolean as an 8-bit integer it is essentially converting the original boolean to an 8-bit integer as well (if that makes sense).</p>\n\n<p>So if my interpretation is <s>correct</s> (it isn't), perhaps this is a \"bug\" in clang++, not Visual or g++. <code>reinterpret_cast</code> is not very well supported between compilers, so this behavior is definitely worth noting when deciding which to use, if this is necessary for whatever reason.</p>\n\n<h2>edit:</h2>\n\n<p>I just realized this doesn't explain why b2 and b3 are 3 (non-boolean) as well. I wouldn't imagine it would make sense to treat new booleans as the 8-bit integers as well, regardless of the <code>reinterpret_cast</code>, so take this for what it's worth from a guy with 1 rep :)</p>\n"}, {"comments": [{"owner": {"reputation": 136, "user_id": 788979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff1fdd272465e1e4e953c09342927ed3?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/788979/chris"}, "edited": false, "score": 0, "creation_date": 1492015133, "post_id": 43373204, "comment_id": 73812590, "body": "The iostream was not really a concern, it was just here to print the value, and I was wondering why it&#39;s corrected in clang. But I do like your reference to c++14 concerning the bool (which I didn&#39;t find) and it kind-of makes me think it&#39;s a bug in Visual, since it should be constructed using either true or false, not something else!"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 136, "user_id": 788979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff1fdd272465e1e4e953c09342927ed3?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/788979/chris"}, "edited": false, "score": 0, "creation_date": 1492016238, "post_id": 43373204, "comment_id": 73813236, "body": "@Chris I know, that <code>iostream</code> is not a concern, by itself, but I referenced it, to prove that, in the end, <code>bool</code> gets (or should get) casted to an <code>int</code>, when trying to print it, which should prompt integral conversion rules to kick-in."}, {"owner": {"reputation": 136, "user_id": 788979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff1fdd272465e1e4e953c09342927ed3?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/788979/chris"}, "edited": false, "score": 0, "creation_date": 1492066893, "post_id": 43373204, "comment_id": 73832581, "body": "Exactly :) In fact the whole purpose of my question was to try to find an answer to &quot;gets&quot; (on some compilers) or &quot;should get&quot; (bug if the compiler do not). I&#39;ll flag your post as answer since it seems to be the one closest to what I was looking for, thanks again."}], "tags": [], "owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "is_accepted": false, "score": 1, "last_activity_date": 1492009317, "last_edit_date": 1592644375, "creation_date": 1492009317, "answer_id": 43373204, "question_id": 43371459, "link": "https://stackoverflow.com/questions/43371459/should-a-boolean-value-be-truncated-to-either-true-or-false-when-assigned/43373204#43373204", "title": "Should a boolean value be truncated to either true or false when assigned?", "body": "<p>Since I didn't, really, find information on casts from pointer-to-bool (or equivalent) in C++ standard (if usage of those is defined), I were reluctant to post this as an answer. But, on the second thought, I may as well post it - it may get elaborated upon by other people.</p>\n<p>First of all, The C++14 standard defines <code>bool</code> as:</p>\n<blockquote>\n<p>[basic.fundamental]</p>\n<ol start=\"6\">\n<li>Values of type bool are either true or false. [Note:There are no signed, unsigned, short, or long bool types or values. \u2014 end note] Values of type bool participate in integral promotions (4.5)</li>\n</ol>\n</blockquote>\n<p>Since it participates in integral promotions, the following promotion is defined for it:</p>\n<blockquote>\n<p>[conv.prom]</p>\n<ol start=\"6\">\n<li>A prvalue of type bool can be converted to a prvalue of type int, with false becoming zero and true becoming one.</li>\n</ol>\n</blockquote>\n<p>And, since you are printing with <code>std::ostream::operator&lt;&lt;</code>, for <code>bool</code>, it is defined as follows:</p>\n<blockquote>\n<p>[ostream.inserters.arithmetic]</p>\n<ol>\n<li>The classes num_get&lt;&gt; and num_put&lt;&gt; handle locale-dependent numeric formatting and parsing.</li>\n</ol>\n</blockquote>\n<p>Since it uses <code>num_put&lt;&gt;</code> for actual output, the snippet of it, related to <code>bool</code> output is defined as:</p>\n<blockquote>\n<p>[facet.num.put.virtuals]</p>\n<ol start=\"6\">\n<li>If (str.flags() &amp; ios_base::boolalpha) == 0 returns do_put(out, str, fill, (int)val)</li>\n</ol>\n</blockquote>\n<p>Since you don't use <code>boolalpha</code> in the example you show - typical integral promotion rules (described above) should apply.</p>\n<p>In addition, I still can't explain why <code>std::to_string(*pi)</code> after <code>*pi = 3</code> is still prints <code>3</code> in both cases, but it may, somehow, be related to:</p>\n<blockquote>\n<p>[expr.reinterpret.cast]</p>\n<ol start=\"3\">\n<li>[Note: The mapping performed by reinterpret_cast might, or might not, produce a representation different from the original value.\u2014 end note]</li>\n</ol>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 136, "user_id": 788979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff1fdd272465e1e4e953c09342927ed3?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/788979/chris"}, "edited": false, "score": 0, "creation_date": 1492086236, "post_id": 43390000, "comment_id": 73845301, "body": "That was exactly my question &quot;For VC++, your code causes undefined behaviour on the line bool const b2{ b };&quot;, and I was looking for where the c++ specs tells this is UB (or not)."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 136, "user_id": 788979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff1fdd272465e1e4e953c09342927ed3?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/788979/chris"}, "edited": false, "score": 0, "creation_date": 1492088966, "post_id": 43390000, "comment_id": 73847309, "body": "@Chris I think it is undefined by omission: the standard doesn&#39;t say what happens when a lvalue-to-rvalue conversion encounters a bit pattern not defined to mean any particular value, therefore it is undefined behaviour.  A similar case would be, on common systems, if you set the bits in a <code>float</code> to something not covered by IEEE754"}, {"owner": {"reputation": 136, "user_id": 788979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff1fdd272465e1e4e953c09342927ed3?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/788979/chris"}, "edited": false, "score": 0, "creation_date": 1492089638, "post_id": 43390000, "comment_id": 73847865, "body": "Great thanks for the clarification, exactly what I was looking for."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1492079832, "creation_date": 1492079832, "answer_id": 43390000, "question_id": 43371459, "link": "https://stackoverflow.com/questions/43371459/should-a-boolean-value-be-truncated-to-either-true-or-false-when-assigned/43390000#43390000", "title": "Should a boolean value be truncated to either true or false when assigned?", "body": "<p>The standard doesn't specity what the value representation of <code>bool</code> is . Compilers are free to make their own specification.</p>\n\n<p>Your evidence suggests that VC++ requires <code>true</code> be represented as just the LSB set, whereas clang++ allows any non-zero representation to be <code>true</code>.</p>\n\n<p>For VC++, your code causes undefined behaviour on the line <code>bool const b2{ b };</code>, specifically when it tries to read the value out of <code>b</code>. The bits set in the storage for <code>b</code> do not correspond to a value of <code>b</code>, and the standard doesn't define what happens in this situation, therefore it is undefined behaviour.  </p>\n\n<p>When undefined behaviour happens there are no guarantees whatsoever; all of the output of the program is meaningless. You cannot infer anything based on output statements that appear after this point  (or even before it, actually).</p>\n"}], "owner": {"reputation": 136, "user_id": 788979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff1fdd272465e1e4e953c09342927ed3?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/788979/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 436, "favorite_count": 0, "accepted_answer_id": 43390000, "answer_count": 4, "score": 3, "last_activity_date": 1492079832, "creation_date": 1492004948, "last_edit_date": 1492077745, "question_id": 43371459, "link": "https://stackoverflow.com/questions/43371459/should-a-boolean-value-be-truncated-to-either-true-or-false-when-assigned", "title": "Should a boolean value be truncated to either true or false when assigned?", "body": "<p>I've found a difference in the value stored in a bool variable (btw Visual-C++ and clang++), in the case where the stored value is neither true nor false (if it was corrupted somehow), and I'm not sure if it's a Visual-C++ bug or if it's just UB I should ignore.</p>\n\n<p>Take the following sample:</p>\n\n<pre><code>#include &lt;cstdint&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;limits&gt;\nbool inLimits(bool const v)\n{\n    return (static_cast&lt;std::int32_t&gt;(v) &gt;= static_cast&lt;std::int32_t&gt;(std::numeric_limits&lt;bool&gt;::min()) &amp;&amp; static_cast&lt;std::int32_t&gt;(v) &lt;= static_cast&lt;std::int32_t&gt;(std::numeric_limits&lt;bool&gt;::max()));\n}\nint main()\n{\n    bool b{ false };\n    bool const* const pb = reinterpret_cast&lt;bool const*&gt;(&amp;b);\n    std::uint8_t * const pi = reinterpret_cast&lt;std::uint8_t*&gt;(&amp;b);\n\n    std::cout &lt;&lt; \"b: \" &lt;&lt; b &lt;&lt; \" pb: \" &lt;&lt; (*pb) &lt;&lt; \" pi: \" &lt;&lt; std::to_string(*pi) &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"b is \" &lt;&lt; (inLimits(b) ? \"\" : \"not \") &lt;&lt; \"in numeric limits for a bool\" &lt;&lt; std::endl;\n\n    *pi = 3; // Simulate a bad cast during boolean creation\n    bool const b2{ b };\n    bool const b3{ *pb };\n\n    std::cout &lt;&lt; \"b: \" &lt;&lt; b &lt;&lt; \" pb: \" &lt;&lt; (*pb) &lt;&lt; \" pi: \" &lt;&lt; std::to_string(*pi) &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"b2: \" &lt;&lt; b2 &lt;&lt; \" b3: \" &lt;&lt; b3 &lt;&lt; std::endl;\n\n    std::cout &lt;&lt; \"b is \" &lt;&lt; (inLimits(b) ? \"\" : \"not \") &lt;&lt; \"in numeric limits for a bool\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"b2 is \" &lt;&lt; (inLimits(b2) ? \"\" : \"not \") &lt;&lt; \"in numeric limits for a bool\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"b3 is \" &lt;&lt; (inLimits(b3) ? \"\" : \"not \") &lt;&lt; \"in numeric limits for a bool\" &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>This is the output of Visual-C++</p>\n\n<pre><code>b: 0 pb: 0 pi: 0\nb is in numeric limits for a bool\nb: 3 pb: 3 pi: 3\nb2: 3 b3: 3\nb is not in numeric limits for a bool\nb2 is not in numeric limits for a bool\nb3 is not in numeric limits for a bool\n</code></pre>\n\n<p>and this is the output of clang++</p>\n\n<pre><code>b: 0 pb: 0 pi: 0\nb is in numeric limits for a bool\nb: 1 pb: 1 pi: 3\nb2: 1 b3: 1\nb is in numeric limits for a bool\nb2 is in numeric limits for a bool\nb3 is in numeric limits for a bool\n</code></pre>\n\n<p>It looks like there is a limits check in clang++ when constructing a new boolean by value, as well as when it is used with stream operator.</p>\n\n<p>Should I just ignore this, or is it a bug that only Visual-C++ has?\nThanks!</p>\n\n<p><strong>Edit:</strong>\nFor those who did not understand the purpose of the sample, it was just a showcase to \"simulate\" a memory corruption or a bug in another part of the code that caused a boolean value to be initialized with something else than true or false, whatever the binary representation of a bool.</p>\n\n<p>(I was wondering if I have to protect my code from improper usage somewhere else using an assert for example, but only if this behavior is not UB)</p>\n\n<p><strong>Second edit:</strong>\nAdded numeric_limits code.</p>\n"}, {"tags": ["c++", "fstream"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1492004901, "post_id": 43371299, "comment_id": 73804685, "body": "dont you need to know what instance of you program uses what parameters? I would maybe use one parameterfile for each instance and pass the file name as command line arguement. Or if you insist on a single file then I would make each instance read its parameters from a given line in the file (again passed as command line arguement). Imho having several instances of your program reading and writing to the same file is just unnecessary overcomplication"}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1492007902, "post_id": 43371299, "comment_id": 73807247, "body": "A fundamental problem is that without some additional synchronization you won&#39;t be able to prevent a race condition where multiple instances of the program read the same line before any of them get a change to update the line.  If/when you solve that problem then you have the added benefit of being able to solve your original problem in a cleaner way."}, {"owner": {"reputation": 621, "user_id": 6489803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1010187672400302/picture?type=large", "display_name": "jackscorrow", "link": "https://stackoverflow.com/users/6489803/jackscorrow"}, "reply_to_user": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1492008611, "post_id": 43371299, "comment_id": 73807868, "body": "@MichaelBurr I know that. Of course I&#39;m going to implement some sort of synchronization before actually having multiple threads reading from the same file at once. But I was curious to know if this problem had a simple answer"}], "answers": [{"comments": [{"owner": {"reputation": 621, "user_id": 6489803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1010187672400302/picture?type=large", "display_name": "jackscorrow", "link": "https://stackoverflow.com/users/6489803/jackscorrow"}, "edited": false, "score": 0, "creation_date": 1492005384, "post_id": 43371397, "comment_id": 73805079, "body": "But what I want to do is replace a <code>char</code> with another <code>char</code> that will occupy the same space. Do I still need to write the whole file from scratch?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 621, "user_id": 6489803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1010187672400302/picture?type=large", "display_name": "jackscorrow", "link": "https://stackoverflow.com/users/6489803/jackscorrow"}, "edited": false, "score": 0, "creation_date": 1492005560, "post_id": 43371397, "comment_id": 73805226, "body": "@jackscorrow You have to <i>seek</i> through the file to find the correct positions where to replace the special character. It could actually be more work than the possible methods I told about in my answer. Also, with my proposed possible solutions you don&#39;t have to have the special character, making it easier to read the first number (you don&#39;t have to read it as a string, remove the first character, and the convert the string to an integer value)."}, {"owner": {"reputation": 621, "user_id": 6489803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1010187672400302/picture?type=large", "display_name": "jackscorrow", "link": "https://stackoverflow.com/users/6489803/jackscorrow"}, "edited": false, "score": 0, "creation_date": 1492007528, "post_id": 43371397, "comment_id": 73806920, "body": "Ok. I think I&#39;ll go with this in the end. But you said <i>read it as a string, remove the first character, and the convert the string to an integer value</i>, excuse my ignorance but are there any other ways to read integer or double numbers? Because those are exactly the steps I&#39;m following in order to store this kind of values"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 621, "user_id": 6489803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1010187672400302/picture?type=large", "display_name": "jackscorrow", "link": "https://stackoverflow.com/users/6489803/jackscorrow"}, "edited": false, "score": 0, "creation_date": 1492007807, "post_id": 43371397, "comment_id": 73807162, "body": "@jackscorrow Read directly as an <code>int</code> or <code>double</code> with the <code>&gt;&gt;</code> operator? Like <code>int i; some_stream &gt;&gt; i;</code>?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 621, "user_id": 6489803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1010187672400302/picture?type=large", "display_name": "jackscorrow", "link": "https://stackoverflow.com/users/6489803/jackscorrow"}, "edited": false, "score": 0, "creation_date": 1492008947, "post_id": 43371397, "comment_id": 73808147, "body": "@jackscorrow I don&#39;t mean to sound mean or anything, but it seems you might need to <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">find a good beginners book</a> and start over with how input works."}, {"owner": {"reputation": 621, "user_id": 6489803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1010187672400302/picture?type=large", "display_name": "jackscorrow", "link": "https://stackoverflow.com/users/6489803/jackscorrow"}, "edited": false, "score": 0, "creation_date": 1492091044, "post_id": 43371397, "comment_id": 73848929, "body": "Don&#39;t worry, I understand. My university never taught me this kind of things or how C++ works. I&#39;m trying to learn as much as I can by  myself. Thank you for the advice, I&#39;ll try to read that book if I can"}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 1, "last_activity_date": 1492004774, "creation_date": 1492004774, "answer_id": 43371397, "question_id": 43371299, "link": "https://stackoverflow.com/questions/43371299/c-replacing-one-character-at-beginning-of-line-in-output-stream-with-another/43371397#43371397", "title": "c++ - Replacing one character at beginning of line in output stream with another one", "body": "<p>So you want to modify the file that you're reading? Then you basically have to rewrite it, from scratch.</p>\n\n<p>One common way to do it is by reading the whole file into memory, modify the in-memory buffer, then overwrite the file with the (modified) in-memory buffer.</p>\n\n<p>Another common way, if the file is to big to fit in memory, is to read line by line, modify the line, and write it to a new temporary file. Then when all of the input has been read you rename the temporary file as the actual file, thereby replacing the data in it.</p>\n\n<p>Both of these solutions can be used without you needing any special marker-character like the <code>b</code> at the beginning of the line to be replaced.</p>\n"}], "owner": {"reputation": 621, "user_id": 6489803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1010187672400302/picture?type=large", "display_name": "jackscorrow", "link": "https://stackoverflow.com/users/6489803/jackscorrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 43371397, "answer_count": 1, "score": 0, "last_activity_date": 1492007631, "creation_date": 1492004517, "last_edit_date": 1492007631, "question_id": 43371299, "link": "https://stackoverflow.com/questions/43371299/c-replacing-one-character-at-beginning-of-line-in-output-stream-with-another", "title": "c++ - Replacing one character at beginning of line in output stream with another one", "body": "<p>What I need to do is read some parameters values from an input file in which comments are identified by putting <code>*</code> at the beginning of the line. The values in the \"useful\" lines are separated by semicolons like this:</p>\n\n<pre><code>10; 32541615; 0.18; 0.45; 0.00015; 0.01485; 0.03;\n</code></pre>\n\n<p>and I have multiple lines like this in my input file.</p>\n\n<p>What I would like to do is insert a <code>*</code> at the beginning of each line once I've read it in such a way that if I read the file a second time I will skip that line and go directly to the following one.</p>\n\n<p>I need this because my objective is to have multiple instances of my program running at the same time and accessing the file in sequence in order to get the input parameters they need. So I want that each instance will get different parameters.</p>\n\n<p>What I thought to do is inserting a dummy character at the beginning of each line, like this:</p>\n\n<pre><code>b10; 32541615; 0.18; 0.45; 0.00015; 0.01485; 0.03;\n</code></pre>\n\n<p>and then replace it (<code>b</code> in this example) with <code>*</code> when I read it so that the second time I read the line it would be treated as a comment.</p>\n\n<p>I tried to use <code>put('*')</code> and <code>&lt;&lt; '*'</code> once I read <code>b</code> with a <code>peek()</code> call but the <code>*</code> character is always appended at the end of the file. I've read that although I can't write in the middle of a file I can overwrite in the middle of a file. What can I do? </p>\n\n<p>Here is an example of a possible input file:</p>\n\n<pre><code>* FORMAT:\n* MAX_HEIGHT; SEED; p0; p1; pd; pp; epsilon;\n\nb10; 32541615; 0.18; 0.45; 0.00015; 0.01485; 0.03;\nb40; 32541615; 0.18; 0; 0.00015; 0.01485; 0.03;\n</code></pre>\n"}, {"tags": ["c++", "pointers", "stdvector"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 3, "creation_date": 1492004368, "post_id": 43371192, "comment_id": 73804248, "body": "<code>x</code> is a copy of the triangle you are looping over. Use <code>auto &amp;x</code> to get a reference to the original triangle and get the pointer you want."}, {"owner": {"reputation": 1015, "user_id": 7691497, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-46wzsjmiSDg/AAAAAAAAAAI/AAAAAAAAAAk/qjgRQMlHINA/photo.jpg?sz=128", "display_name": "Ben Steffan", "link": "https://stackoverflow.com/users/7691497/ben-steffan"}, "edited": false, "score": 0, "creation_date": 1492004376, "post_id": 43371192, "comment_id": 73804257, "body": "Please extend you post with a <a href=\"https://stackoverflow.com/help/mcve\">minimal, verifiable and complete example</a>."}, {"owner": {"reputation": 5508, "user_id": 498424, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ig1qY.jpg?s=128&g=1", "display_name": "Raxvan", "link": "https://stackoverflow.com/users/498424/raxvan"}, "edited": false, "score": 0, "creation_date": 1492004380, "post_id": 43371192, "comment_id": 73804260, "body": "<code>auto &amp; x</code> instead of <code>auto x</code> in the ranged for loop"}], "answers": [{"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 6, "last_activity_date": 1492004816, "last_edit_date": 1492004816, "creation_date": 1492004396, "answer_id": 43371253, "question_id": 43371192, "link": "https://stackoverflow.com/questions/43371192/c-loop-through-objects-and-obtain-their-addresses/43371253#43371253", "title": "C++ loop through objects and obtain their addresses", "body": "<p>In this loop:</p>\n\n<pre><code>for (auto x : triangles)\n    triangle_ptrs.push_back(&amp;x);\n</code></pre>\n\n<p>which is logically equal to:</p>\n\n<pre><code>for ( auto it = triangles.begin(), it != triangles.end(); ++it) { \n    auto x  = *it; \n    triangle_ptrs.push_back(&amp;x);\n} \n</code></pre>\n\n<p>you make a copy in each iteration, change your loop to:</p>\n\n<pre><code>for (auto &amp;x : triangles)\n    triangle_ptrs.push_back(&amp;x);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6633, "user_id": 2378300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/852aed09b52c7514ed23f75f2921f6cc?s=128&d=identicon&r=PG", "display_name": "Jonas", "link": "https://stackoverflow.com/users/2378300/jonas"}, "is_accepted": false, "score": 1, "last_activity_date": 1492004442, "creation_date": 1492004442, "answer_id": 43371272, "question_id": 43371192, "link": "https://stackoverflow.com/questions/43371192/c-loop-through-objects-and-obtain-their-addresses/43371272#43371272", "title": "C++ loop through objects and obtain their addresses", "body": "<p>You are getting the address of a local temporary variable, change the type of <code>x</code> to be <code>auto&amp;</code> then you get a reference to the vector elements. </p>\n"}], "owner": {"reputation": 3971, "user_id": 2921343, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e5a6a90bd1c391e3f7aa638134a14481?s=128&d=identicon&r=PG&f=1", "display_name": "Eutherpy", "link": "https://stackoverflow.com/users/2921343/eutherpy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 43371253, "answer_count": 2, "score": 3, "last_activity_date": 1492004816, "creation_date": 1492004258, "question_id": 43371192, "link": "https://stackoverflow.com/questions/43371192/c-loop-through-objects-and-obtain-their-addresses", "title": "C++ loop through objects and obtain their addresses", "body": "<p>I have the following code snippet:</p>\n\n<pre><code>vector&lt;shape*&gt; triangle_ptrs;\nfor (auto x : triangles)\n    triangle_ptrs.push_back(&amp;x);\n</code></pre>\n\n<p><code>triangle</code> is a class derived from <code>shape</code> class, and <code>triangles</code> is an <code>std::vector</code> of triangles:</p>\n\n<pre><code>std::vector&lt;triangle&gt; triangles;\n</code></pre>\n\n<p>I need to save the addresses of the triangles, but as I loop through the collection, their addresses seem to be the same. How do I go around this? </p>\n"}, {"tags": ["c++", "qt", "qml", "loader", "qqmlcomponent"], "comments": [{"owner": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "edited": false, "score": 0, "creation_date": 1492006904, "post_id": 43371159, "comment_id": 73806381, "body": "Should be, with an <code>asyncronous</code> Loader. But this property fails me somehow. While the <code>UI</code> does not freeze as promised (<code>BusyIndicator</code> running) it is still completely unresponsive."}, {"owner": {"reputation": 1051, "user_id": 7192989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1d41f45e6cacfb3d4195a9878880724?s=128&d=identicon&r=PG", "display_name": "Rinat Veliakhmedov", "link": "https://stackoverflow.com/users/7192989/rinat-veliakhmedov"}, "reply_to_user": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "edited": false, "score": 0, "creation_date": 1492008280, "post_id": 43371159, "comment_id": 73807567, "body": "I have <code>asynchronous</code> set, but the problem is it destroys objects in  Loader while they are not finished loading, which causes warnings and errors."}, {"owner": {"reputation": 10381, "user_id": 2981610, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/BYsd3.jpg?s=128&g=1", "display_name": "folibis", "link": "https://stackoverflow.com/users/2981610/folibis"}, "edited": false, "score": 0, "creation_date": 1492008846, "post_id": 43371159, "comment_id": 73808058, "body": "What about setting <code>active</code> to false or setting <code>source</code>/<code>sourceComponent</code> to null?"}, {"owner": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "edited": false, "score": 0, "creation_date": 1492010437, "post_id": 43371159, "comment_id": 73809407, "body": "I don&#39;t know what went wrong earlier, but uppon writing it once again, it works..."}, {"owner": {"reputation": 1051, "user_id": 7192989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1d41f45e6cacfb3d4195a9878880724?s=128&d=identicon&r=PG", "display_name": "Rinat Veliakhmedov", "link": "https://stackoverflow.com/users/7192989/rinat-veliakhmedov"}, "reply_to_user": {"reputation": 10381, "user_id": 2981610, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/BYsd3.jpg?s=128&g=1", "display_name": "folibis", "link": "https://stackoverflow.com/users/2981610/folibis"}, "edited": false, "score": 0, "creation_date": 1492091368, "post_id": 43371159, "comment_id": 73849155, "body": "@folibis then it seems to never delete any objects and eventually runs out of memory."}], "answers": [{"comments": [{"owner": {"reputation": 1051, "user_id": 7192989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1d41f45e6cacfb3d4195a9878880724?s=128&d=identicon&r=PG", "display_name": "Rinat Veliakhmedov", "link": "https://stackoverflow.com/users/7192989/rinat-veliakhmedov"}, "edited": false, "score": 0, "creation_date": 1492091250, "post_id": 43373789, "comment_id": 73849076, "body": "If you keep clicking button very fast, it never frees memory allocated for previous objects and eventually causes bad_alloc."}, {"owner": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "reply_to_user": {"reputation": 1051, "user_id": 7192989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1d41f45e6cacfb3d4195a9878880724?s=128&d=identicon&r=PG", "display_name": "Rinat Veliakhmedov", "link": "https://stackoverflow.com/users/7192989/rinat-veliakhmedov"}, "edited": false, "score": 0, "creation_date": 1492094029, "post_id": 43373789, "comment_id": 73851128, "body": "How often did you click with my <code>ComplexComponent</code>? :D I opted for a timer <i>clicking</i> every 200 or 500 ms, and did that for multiple minutes. But yes, the memory increases over time..."}, {"owner": {"reputation": 1051, "user_id": 7192989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1d41f45e6cacfb3d4195a9878880724?s=128&d=identicon&r=PG", "display_name": "Rinat Veliakhmedov", "link": "https://stackoverflow.com/users/7192989/rinat-veliakhmedov"}, "edited": false, "score": 0, "creation_date": 1492094329, "post_id": 43373789, "comment_id": 73851365, "body": "I set the timer to 200, but increased the number of rows and columns to 200. It grows memory very fast and crashes."}, {"owner": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1492185819, "post_id": 43373789, "comment_id": 73888965, "body": "For 200x200, I do not see any memory increase (constant ~200MB). For smaller size (50x50), I do so see an increase, but this can be avoided by calling <code>gc</code> (i.e. garbage collection) manually after unloading. Except for the first time, <code>button.clicked()</code> takes a lot of time (up to 6s for 200x200), the GUI freezes, and the file is not loaded asynchronously (<code>Loader.Status</code> never becomes <code>Loader.Loading</code>). Tested on Qt 5.8, Ubuntu 16.04."}, {"owner": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "reply_to_user": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1492192942, "post_id": 43373789, "comment_id": 73892451, "body": "@m7913d : Interesting that this happens to you. At the beginning I had exactly the same problem (well, actually the GUI-thread it self seemd to work, so the BusyIndicato if I remember it right, kept spinning, but the <code>Button</code> was indicated as <code>down</code> the whole time, and it was unloaded only after the loading was completed. Then I wanted to post this as an example that <i>does not work</i> when it suddenly worked. Tried it on several machines (Linux and Windows) by now, and it works for me :D"}, {"owner": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1492196115, "post_id": 43373789, "comment_id": 73894089, "body": "The above results were for using <code>QQuickWidget</code>. I switched to <code>QQmlApplicationEngine</code> (which creates a <code>QQmlIncubationController</code> automatically if the scene contains a <code>QQuickWindow</code>) and now <code>asynchronous</code> and aborting works, but memory leaks seem to occur. <code>gc</code> doesn&#39;t work anymore to clean up memory."}, {"owner": {"reputation": 1051, "user_id": 7192989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1d41f45e6cacfb3d4195a9878880724?s=128&d=identicon&r=PG", "display_name": "Rinat Veliakhmedov", "link": "https://stackoverflow.com/users/7192989/rinat-veliakhmedov"}, "reply_to_user": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1492213233, "post_id": 43373789, "comment_id": 73900218, "body": "@m7913d I&#39;m on Windows, calling <code>gc</code> does basically nothing (I use <code>QQmlApplicationEngine</code>)."}, {"owner": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1492244249, "post_id": 43373789, "comment_id": 73906138, "body": "This definitely seems to be a Qt bug. Can I use your example to fill in a bug report?"}, {"owner": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1492253541, "post_id": 43373789, "comment_id": 73908375, "body": "I submitted a <a href=\"https://bugreports.qt.io/browse/QTBUG-60188\" rel=\"nofollow noreferrer\">bugreport</a> including a possible solution."}, {"owner": {"reputation": 1051, "user_id": 7192989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1d41f45e6cacfb3d4195a9878880724?s=128&d=identicon&r=PG", "display_name": "Rinat Veliakhmedov", "link": "https://stackoverflow.com/users/7192989/rinat-veliakhmedov"}, "reply_to_user": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1492259275, "post_id": 43373789, "comment_id": 73910087, "body": "@m7913d I&#39;ll write a support request when I get to my work laptop, maybe it&#39;ll get resolved faster."}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 1, "creation_date": 1492459315, "post_id": 43373789, "comment_id": 73973270, "body": "Check whether calling <code>gc()</code> 3-4 times in a row has an effect on memory  usage. One rarely suffices, but 3-4 seem to squeeze as much garbage out as possible."}, {"owner": {"reputation": 1051, "user_id": 7192989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1d41f45e6cacfb3d4195a9878880724?s=128&d=identicon&r=PG", "display_name": "Rinat Veliakhmedov", "link": "https://stackoverflow.com/users/7192989/rinat-veliakhmedov"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1492519157, "post_id": 43373789, "comment_id": 73999600, "body": "@dtech no effect."}], "tags": [], "owner": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "is_accepted": false, "score": 2, "last_activity_date": 1492018844, "last_edit_date": 1492018844, "creation_date": 1492010882, "answer_id": 43373789, "question_id": 43371159, "link": "https://stackoverflow.com/questions/43371159/how-to-abort-loading-component-in-loader/43373789#43373789", "title": "How to abort loading component in Loader?", "body": "<p>I don't know what your issu is, with those <em>objects that are destroyed before the loader finishs</em>, but maybe the issue is there? If not, this should work:\nIf it does not help, please add some code to your question, that reproduces your problem.</p>\n\n<p><strong>main.qml</strong></p>\n\n<pre><code>import QtQuick 2.7\nimport QtQuick.Controls 2.0\n\nApplicationWindow {\n    id: root\n    visible: true\n    width: 400; height: 450\n\n    Button {\n        text: (complexLoader.active ? 'Loading' : 'Unloading')\n        onClicked: complexLoader.active = !complexLoader.active\n    }\n\n    Loader {\n        id: complexLoader\n        y: 50\n        width: 400\n        height: 400\n        source: 'ComplexComponent.qml'\n        asynchronous: true\n        active: false\n        // visible: status === 1\n    }\n\n    BusyIndicator {\n        anchors.fill: complexLoader\n        running: complexLoader.status === 2\n        visible: running\n    }\n}\n</code></pre>\n\n<p><strong>ComplexComponent.qml</strong></p>\n\n<pre><code>import QtQuick 2.0\n\nRectangle {\n    id: root\n    width: 400\n    height: 400\n    Grid {\n        id: grid\n        anchors.fill: parent\n        rows: 50\n        columns: 50\n        Repeater {\n            model: parent.rows * parent.columns\n            delegate: Rectangle {\n                width: root.width / grid.columns\n                height: root.height / grid.rows\n                color: Qt.rgba(Math.random(index),\n                               Math.random(index),\n                               Math.random(index),\n                               Math.random(index))\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "is_accepted": true, "score": 9, "last_activity_date": 1492335687, "last_edit_date": 1492335687, "creation_date": 1492276339, "answer_id": 43428916, "question_id": 43371159, "link": "https://stackoverflow.com/questions/43371159/how-to-abort-loading-component-in-loader/43428916#43428916", "title": "How to abort loading component in Loader?", "body": "<p><strong>Abort object creation</strong></p>\n\n<p>As documented by Qt, three methods exists to unload/abort an object instantiation:</p>\n\n<ol>\n<li>Set <a href=\"http://doc.qt.io/qt-5/qml-qtquick-loader.html#active-prop\" rel=\"noreferrer\"><code>Loader.active</code></a> to <code>false</code></li>\n<li>Set <a href=\"http://doc.qt.io/qt-5/qml-qtquick-loader.html#source-prop\" rel=\"noreferrer\"><code>Loader.source</code></a> to an empty string</li>\n<li>Set <a href=\"http://doc.qt.io/qt-5/qml-qtquick-loader.html#sourceComponent-prop\" rel=\"noreferrer\"><code>Loader.sourceComponent</code></a> to <code>undefined</code></li>\n</ol>\n\n<p><strong>Asynchronous behaviour</strong></p>\n\n<p>To be able to change these properties during loading, <a href=\"http://doc.qt.io/qt-5/qml-qtquick-loader.html#asynchronous-prop\" rel=\"noreferrer\"><code>Loader.asynchronous</code></a> should be <code>true</code>, otherwise the GUI thread is busy with loading the object. You also need to <a href=\"http://doc.qt.io/qt-5/qqmlincubationcontroller.html\" rel=\"noreferrer\"><code>QQmlIncubationController</code></a> for your <a href=\"http://doc.qt.io/qt-5/qqmlengine.html#setIncubationController\" rel=\"noreferrer\"><code>QQmlEngine</code></a> to control the idle time used for object incubation. Without such a controller <code>Loader.asynchronous</code> does not have any effect. Note that <a href=\"http://doc.qt.io/qt-5/qqmlapplicationengine.html#details\" rel=\"noreferrer\"><code>QQmlApplicationEngine</code></a> automatically installs a default controller if the scene contains a <code>QQuickWindow</code>.</p>\n\n<p><strong>Bugs</strong></p>\n\n<p>Up to the last tested Qt version (Qt 5.8.0, 5.9.0 beta), a severe memory leaks exist when aborting an unfinished object incubation (at least in certain cases, including the example in the answer of derM) resulting in a fast memory usage increase for large components. A <a href=\"https://bugreports.qt.io/browse/QTBUG-60188\" rel=\"noreferrer\">bug report</a> is created including a proposed solution.</p>\n"}], "owner": {"reputation": 1051, "user_id": 7192989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1d41f45e6cacfb3d4195a9878880724?s=128&d=identicon&r=PG", "display_name": "Rinat Veliakhmedov", "link": "https://stackoverflow.com/users/7192989/rinat-veliakhmedov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1417, "favorite_count": 0, "accepted_answer_id": 43428916, "answer_count": 2, "score": 6, "last_activity_date": 1599355243, "creation_date": 1492004179, "last_edit_date": 1599355243, "question_id": 43371159, "link": "https://stackoverflow.com/questions/43371159/how-to-abort-loading-component-in-loader", "title": "How to abort loading component in Loader?", "body": "<p>I have a <code>Loader</code> object that loads some very heavy components. Some event arrives in the middle of the load that requires loading to stop and go back to empty the <code>Loader</code>. Is it possible?</p>\n"}, {"tags": ["c#", "c++", "asp.net-web-api", "thread-safety", "appdomain"], "comments": [{"owner": {"reputation": 1314, "user_id": 2116417, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e7dddd35ccfaca11fc9b138c1fbe272b?s=128&d=identicon&r=PG", "display_name": "McGaz", "link": "https://stackoverflow.com/users/2116417/mcgaz"}, "edited": false, "score": 0, "creation_date": 1492004102, "post_id": 43370809, "comment_id": 73804019, "body": "Is there a chance that something is missing in your logger, e.g. connection string or incorrect permissions. Perhaps this causes an error loop and gives you your stack overflow."}, {"owner": {"reputation": 2949, "user_id": 2892378, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/1DSyh.jpg?s=128&g=1", "display_name": "Bartosz", "link": "https://stackoverflow.com/users/2892378/bartosz"}, "reply_to_user": {"reputation": 1314, "user_id": 2116417, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e7dddd35ccfaca11fc9b138c1fbe272b?s=128&d=identicon&r=PG", "display_name": "McGaz", "link": "https://stackoverflow.com/users/2116417/mcgaz"}, "edited": false, "score": 0, "creation_date": 1492004555, "post_id": 43370809, "comment_id": 73804398, "body": "@McGaz Hello, thanks. I assumie you mean the wrapper, not logger, right? What do you mean by permissions? In any case, I am using exactly the same wrapper both from WebAPI and Console APP, with the same parameters etc."}], "answers": [{"tags": [], "owner": {"reputation": 2949, "user_id": 2892378, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/1DSyh.jpg?s=128&g=1", "display_name": "Bartosz", "link": "https://stackoverflow.com/users/2892378/bartosz"}, "is_accepted": true, "score": 0, "last_activity_date": 1493378197, "creation_date": 1493378197, "answer_id": 43678929, "question_id": 43370809, "link": "https://stackoverflow.com/questions/43370809/stackoverflow-exception-when-running-static-class-from-a-webapi-project-works/43678929#43678929", "title": "StackOverflow exception when running static class from a WebAPI project - works fine when run from a console application", "body": "<p>I have 'solved' it - it turned out that it was a matter of the stack size requirement of the 3rd party app.</p>\n\n<p>When hosted on the w3wp process, the stack available was too small - which is why it worked when hosted as console app.</p>\n\n<p>w3wp.exe stack size is 256kb (it used to be 1MB prior to 2003)</p>\n\n<p><a href=\"https://blogs.msdn.microsoft.com/tom/2008/03/31/stack-sizes-in-iis-affects-asp-net/\" rel=\"nofollow noreferrer\">https://blogs.msdn.microsoft.com/tom/2008/03/31/stack-sizes-in-iis-affects-asp-net/</a></p>\n\n<p>The resolution</p>\n\n<ol>\n<li>In File Explorer, browse to C:\\Windows\\SysWOW64\\inetsrv\\</li>\n<li>Right-click on w3wp.exe and select Properties > Security > Advanced > Owner > Edit > Change owner to > Administrators > OK > Ok > OK</li>\n<li>Give [Admin-User] full permission on w3wp.exe</li>\n<li>Press the Start button on the Windows  toolbar and in Search programs and files, type \u201ccmd\u201d</li>\n<li>Right-click cmd.exe and select \u201cRun as Administrator\u201d</li>\n<li>Type: \"C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\vcvarsall.bat\u201d </li>\n<li>Type:  cd C:\\Windows\\SysWOW64\\inetsrv </li>\n<li>Type:  EDITBIN /STACK:1048576 w3wp.exe </li>\n</ol>\n"}], "owner": {"reputation": 2949, "user_id": 2892378, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/1DSyh.jpg?s=128&g=1", "display_name": "Bartosz", "link": "https://stackoverflow.com/users/2892378/bartosz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 43678929, "answer_count": 1, "score": 0, "last_activity_date": 1493378197, "creation_date": 1492003367, "question_id": 43370809, "link": "https://stackoverflow.com/questions/43370809/stackoverflow-exception-when-running-static-class-from-a-webapi-project-works", "title": "StackOverflow exception when running static class from a WebAPI project - works fine when run from a console application", "body": "<p>I have a 3rd party library that wraps a C++ dll - let's call it <code>LegacyAPI</code>. This wrapping library is a static class with imported methods and is not thread safe.</p>\n\n<p>I have my own wrapper library that wraps around this 3rd party wrapper (to provide logging etc). Let's call it <code>LegacyAPIWrapper</code></p>\n\n<p>So, this is all supposed to be used in a web api - lets call it <code>WebAPI</code></p>\n\n<p>My <code>WebAPI</code> controller action invokes my <code>LegacyAPIWrapper</code>. It goes through some of the methods (including calls to that unsafe <code>LegacyAPI</code>), and fails with StackOverflow exception - always at the same method from the <code>LegacyAPI</code>.</p>\n\n<p>To troubleshoot that, I have created a console application - <code>ConsoleApp</code>. It calls my <code>LegacyAPIWrapper</code> the same way as the <code>WebAPI</code> does - and it works OK!</p>\n\n<p>I have enforced STA Thread on my web api controller methods as described here.\n<a href=\"http://ryanhaugh.com/archive/2014/05/24/supporting-sta-threads-in-web-api/\" rel=\"nofollow noreferrer\">http://ryanhaugh.com/archive/2014/05/24/supporting-sta-threads-in-web-api/</a>\nAlso, the wrapper methods are also attiributed with STAThread attribute.</p>\n\n<p>I have introduced some additional logging logic</p>\n\n<p><code>this.Logger.Debug($\"Apartment state: [{Thread.CurrentThread.GetApartmentState()}]. Thread ID: [{Thread.CurrentThread.ManagedThreadId}]. Thread State: [{Thread.CurrentThread.ThreadState}]\");</code></p>\n\n<p>that shows that right from where the LegacyAPIWrapper is initiallized to where it throws error, we are consistenly within the same Thread, that it is an STA and that it is a running thread.</p>\n\n<p>Apart from that, I have also tried invoking the LegacyAPIWrapper in a separate AppDomain as suggested here</p>\n\n<p><a href=\"https://bitlush.com/blog/executing-code-in-a-separate-application-domain-using-c-sharp\" rel=\"nofollow noreferrer\">https://bitlush.com/blog/executing-code-in-a-separate-application-domain-using-c-sharp</a></p>\n\n<p>But it did not change anything. And, by 'anything', I also mean that we are still on the the same thread (before the Isolated is called and within the Isolated) - so perhaps I'm doing something wrong?</p>\n\n<p>Any hint will be appreciated.</p>\n"}, {"tags": ["c++", "c++-concepts"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 3, "creation_date": 1492003414, "post_id": 43370744, "comment_id": 73803414, "body": "Internal errors are bugs."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1492003810, "post_id": 43370744, "comment_id": 73803744, "body": "I would say that the fact that variable name is same as function name is the origin of the bug."}, {"owner": {"reputation": 3026, "user_id": 3359751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/91b28e94ea506bc9331a489712096b2c?s=128&d=identicon&r=PG&f=1", "display_name": "wimalopaan", "link": "https://stackoverflow.com/users/3359751/wimalopaan"}, "edited": false, "score": 0, "creation_date": 1492003971, "post_id": 43370744, "comment_id": 73803897, "body": "No, I edited the example above. The error remains."}, {"owner": {"reputation": 692, "user_id": 2920698, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/WA5I3.jpg?s=128&g=1", "display_name": "voltento", "link": "https://stackoverflow.com/users/2920698/voltento"}, "edited": false, "score": 0, "creation_date": 1492004115, "post_id": 43370744, "comment_id": 73804036, "body": "What is &#39;concept&#39;?"}, {"owner": {"reputation": 3026, "user_id": 3359751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/91b28e94ea506bc9331a489712096b2c?s=128&d=identicon&r=PG&f=1", "display_name": "wimalopaan", "link": "https://stackoverflow.com/users/3359751/wimalopaan"}, "edited": false, "score": 1, "creation_date": 1492004195, "post_id": 43370744, "comment_id": 73804103, "body": "Its a definition of C++ concept (since g++-6.3 with -fconcepts)"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1492004296, "post_id": 43370744, "comment_id": 73804188, "body": "I&#39;m not sure if the compiler&#39;s just pretty-printing it, but the <code>requires (FCallable&lt;P&gt;)()...</code> in the error message is not valid C++. That would need a fold expression over &amp;&amp; or something, and I can&#39;t repro the ICE when I change the code to match the error, so <i>shrug</i>."}, {"owner": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "edited": false, "score": 1, "creation_date": 1492010910, "post_id": 43370744, "comment_id": 73809790, "body": "This seems to be <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=68372\" rel=\"nofollow noreferrer\">GCC PR 68372</a>."}], "owner": {"reputation": 3026, "user_id": 3359751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/91b28e94ea506bc9331a489712096b2c?s=128&d=identicon&r=PG&f=1", "display_name": "wimalopaan", "link": "https://stackoverflow.com/users/3359751/wimalopaan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1492005041, "creation_date": 1492003213, "last_edit_date": 1492005041, "question_id": 43370744, "link": "https://stackoverflow.com/questions/43370744/simple-constraint-concept-gives-g-internal-error", "title": "Simple constraint (concept) gives g++ internal error", "body": "<p>Following is an simple example that doesn't compile due to an g++ internal error (g++-7.0.1-20170412):</p>\n\n<pre><code>template&lt;typename F&gt;\nconcept bool FCallable() {\n    return requires(F) {\n        F::f();\n    };\n}\nclass Test1 {\npublic:\n    template&lt;FCallable P, FCallable... Pp&gt;\n    static void g() {\n        P::f();\n    }\n};\nclass Test {\npublic:\n    template&lt;FCallable... P&gt;\n    static void g() {\n        (P::f(), ...);\n    }\n};\nclass A {\npublic:\n    static void f() {}\n};\nint main() {\n    Test::template g&lt;A&gt;(); // gives an internal g++ error\n    Test1::template g&lt;A&gt;(); // gives the same error\n}\n</code></pre>\n\n<p>Is this a real error? That is: am I using illegal code or is this a bug in g++?\nBTW: if I omit the constraint FCAllable and use typename... here, all goes well.</p>\n"}, {"tags": ["c++", "xml", "qt"], "comments": [{"owner": {"reputation": 3107, "user_id": 4131673, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100000565112046/picture?type=large", "display_name": "jaskmar", "link": "https://stackoverflow.com/users/4131673/jaskmar"}, "edited": false, "score": 0, "creation_date": 1492003312, "post_id": 43370731, "comment_id": 73803331, "body": "XML is ment to be human-readable data. Why won&#39;t you consider binary data file?"}, {"owner": {"reputation": 575, "user_id": 3229381, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100000448580016/picture?type=large", "display_name": "bauervision", "link": "https://stackoverflow.com/users/3229381/bauervision"}, "reply_to_user": {"reputation": 3107, "user_id": 4131673, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100000565112046/picture?type=large", "display_name": "jaskmar", "link": "https://stackoverflow.com/users/4131673/jaskmar"}, "edited": false, "score": 0, "creation_date": 1492003452, "post_id": 43370731, "comment_id": 73803441, "body": "Hmm, I agree, I guess xml is pointless in this context. The question still remains though, not sure how I output the points."}], "answers": [{"tags": [], "owner": {"reputation": 3107, "user_id": 4131673, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100000565112046/picture?type=large", "display_name": "jaskmar", "link": "https://stackoverflow.com/users/4131673/jaskmar"}, "is_accepted": true, "score": 3, "last_activity_date": 1492006377, "last_edit_date": 1492006377, "creation_date": 1492003897, "answer_id": 43371067, "question_id": 43370731, "link": "https://stackoverflow.com/questions/43370731/write-qpainterpath-to-xml/43371067#43371067", "title": "Write QPainterPath to XML", "body": "<p>You may use binary file:</p>\n\n<pre><code>QPainterPath path;\n// do sth\n{\n  QFile file(\"file.dat\");\n  file.open(QIODevice::WriteOnly);\n  QDataStream out(&amp;file);   // we will serialize the data into the file\n  out &lt;&lt; path;   // serialize a path, fortunately there is apriopriate functionality\n}\n</code></pre>\n\n<p>Deserialization is similar:</p>\n\n<pre><code>QPainterPath path;\n{\n  QFile file(\"file.dat\");\n  file.open(QIODevice::ReadOnly);\n  QDataStream in(&amp;file);   // we will deserialize the data from the file\n  in &gt;&gt; path;\n}\n//do sth\n</code></pre>\n"}], "owner": {"reputation": 575, "user_id": 3229381, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100000448580016/picture?type=large", "display_name": "bauervision", "link": "https://stackoverflow.com/users/3229381/bauervision"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 43371067, "answer_count": 1, "score": 0, "last_activity_date": 1492006377, "creation_date": 1492003160, "question_id": 43370731, "link": "https://stackoverflow.com/questions/43370731/write-qpainterpath-to-xml", "title": "Write QPainterPath to XML", "body": "<p>I have a QPainterPath that is being drawn to my QGraphicsScene and I am storing the points of the path as they are drawn into a QList.  </p>\n\n<p>My question is how do I now save those points out to an xml ( I assume this would work best ) as they are drawn?  My goal is when the app closes, I read that xml, and the path is immediately re-drawn into the scene.</p>\n\n<p>Here is the method I have setup for the writing, which I would call everytime I write a new point to the path.</p>\n\n<pre><code>void writePathToFile(QList pathPoints){\n    QXmlStreamWriter xml;\n\n    QString filename = \"../XML/path.xml\";\n    QFile file(filename);\n    if (!file.open(QFile::WriteOnly | QFile::Text))\n        qDebug() &lt;&lt; \"Error saving XML file.\";\n    xml.setDevice(&amp;file);\n\n    xml.setAutoFormatting(true);\n    xml.writeStartDocument();\n\n    xml.writeStartElement(\"path\");\n    //  --&gt; no clue what to dump here: xml.writeAttribute(\"points\", ? );\n    xml.writeEndElement();\n\n    xml.writeEndDocument();\n}\n</code></pre>\n\n<p>Or maybe this isn't the best way to go about this?</p>\n\n<p>I think I can handle the reading and re-drawing of the path, but this first part is tricking me up.</p>\n"}, {"tags": ["c++", "algorithm", "opencv"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1492012694, "post_id": 43370519, "comment_id": 73811079, "body": "Looks like you are only filtering vertically, not horizontally."}, {"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1492074198, "post_id": 43370519, "comment_id": 73836937, "body": "@CihanKara how do you expect ` Vec3f dx = Vec3f{ pixel_x, 0.0f,0.0f};dx.normalize();` to ever give you something else than either <code>(0,0,0)</code> or <code>(1,0,0)</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 47, "user_id": 7856651, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7603a5a87b504f3916e12ca37ff049d4?s=128&d=identicon&r=PG&f=1", "display_name": "Cihan Kara", "link": "https://stackoverflow.com/users/7856651/cihan-kara"}, "is_accepted": true, "score": 0, "last_activity_date": 1492159993, "creation_date": 1492159993, "answer_id": 43408298, "question_id": 43370519, "link": "https://stackoverflow.com/questions/43370519/height-map-to-normal-map-with-sobel-operator/43408298#43408298", "title": "height map to normal map with sobel operator", "body": "<p>Ok then i have found thr solution in case anyone wants to use same algorithm;</p>\n\n<pre><code>            cv::Mat src = cv::imread(\"C:/Users/Cihan/Desktop/aa.png\");\n            cv::Mat src_gray;\n            cvtColor(src, src_gray, CV_BGR2GRAY);\n\n            cv::Mat grad_x;\n            cv::Mat grad_y;\n            int ddepth = CV_16S;\n            int scale = 1;\n            int delta = 0;\n            cv::Sobel(src_gray, grad_x, ddepth, 1, 0, 3, scale, delta,1);\n\n            //cv::Mat M;\n            //M = src_gray.getRotationMatrix2D((cols / 2, rows / 2), 90, 1)\n\n            cv::Sobel(src_gray, grad_y, ddepth, 0, 1, 3, scale, delta,1);\n\n\n\n            cv::Mat abs_grad_x;\n            cv::Mat abs_grad_y;\n            cv::convertScaleAbs(grad_x, abs_grad_x,0.125,127.5);\n            cv::convertScaleAbs(grad_y, abs_grad_y,0.125,127.5);\n            cv::imwrite(\"C:/Users/Cihan/Desktop/kk.png\", abs_grad_x);\n            cv::imwrite(\"C:/Users/Cihan/Desktop/ll.png\", abs_grad_y);\n\n\n            cv::Mat imgNew(src.size().height, src.size().width, CV_8UC3);\n            for (int y =0; y &lt; src.size().height; ++y) {\n                for (int x=0; x &lt; src.size().width; ++x) {\n\n\n\n                    float pixel_x = ((static_cast&lt;float&gt;\n                  (abs_grad_x.at&lt;uint8_t&gt;(x, y))*2.0f)/255.0f)-1.0f;\n                    float pixel_y = -(((static_cast&lt;float&gt;\n                   (abs_grad_y.at&lt;uint8_t&gt;(x, y))*2.0f)/255.0f)-1.0f);\n\n\n                    Vec3f dx = Vec3f{ 1.0f, 0.0f,pixel_x };\n                    dx.normalize();\n\n\n\n                    Vec3f dy = Vec3f{ 0.0f, 1.0f,pixel_y };\n                    dy.normalize();\n\n\n                    Vec3f nm = dx.cross(dy);\n                    nm.normalize();\n                    nm = (nm * 128.0f) + Vec3f{ 128.0f, 128.0f, 128.0f };\n\n\n\n\n                    auto&amp; imgRGB = imgNew.at&lt;cv::Vec3b&gt;(x, y);\n                    imgRGB[2] = static_cast&lt;uint8_t&gt;(nm.x());\n                    imgRGB[1] = static_cast&lt;uint8_t&gt;(nm.y());\n                    imgRGB[0] = static_cast&lt;uint8_t&gt;(nm.z());\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 7856651, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7603a5a87b504f3916e12ca37ff049d4?s=128&d=identicon&r=PG&f=1", "display_name": "Cihan Kara", "link": "https://stackoverflow.com/users/7856651/cihan-kara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1045, "favorite_count": 0, "accepted_answer_id": 43408298, "answer_count": 1, "score": 0, "last_activity_date": 1492159993, "creation_date": 1492002601, "last_edit_date": 1492012648, "question_id": 43370519, "link": "https://stackoverflow.com/questions/43370519/height-map-to-normal-map-with-sobel-operator", "title": "height map to normal map with sobel operator", "body": "<p>I am trying to convert  a heightmap to normalmap with sobel operator with using some opencv functions here is my codes;</p>\n\n<pre><code>    cv::Mat src = cv::imread(\"C:/Users/Cihan/Desktop/aa.png\");\n    cv::Mat src_gray;\n    GaussianBlur(src, src, cv::Size(3, 3), 0, 0, 4);\n    cvtColor(src, src_gray, CV_BGR2GRAY);\n\n    cv::Mat grad_x;\n    cv::Mat grad_y;\n    int ddepth = CV_16S;\n    int scale = 1;\n    int delta = 0;\n    cv::Sobel(src_gray, grad_x, ddepth, 1, 0, 3, scale, delta, 4);\n    cv::Sobel(src_gray, grad_y, ddepth, 0, 1, 3, scale, delta, 4);\n    //cv::imwrite(\"C:/Users/Cihan/Desktop/kk.png\", grad_x);\n\n    cv::Mat abs_grad_x;\n    cv::Mat abs_grad_y;\n    cv::convertScaleAbs(grad_x, abs_grad_x);\n    cv::convertScaleAbs(grad_y, abs_grad_y);\n\n\n\n    cv::Mat imgNew(src.size().height, src.size().width, CV_8UC3);\n    for (int x = 0; x &lt; src.size().height; ++x) {\n        for (int y = 0; y &lt; src.size().width; ++y) {\n\n            float pixel_x = abs_grad_x.at&lt;uint8_t&gt;(x, y);\n            float pixel_y = abs_grad_y.at&lt;uint8_t&gt;(x, y);\n\n            Vec3f dx = Vec3f{ pixel_x, 0.0f,0.0f};\n            dx.normalize();\n\n\n            Vec3f dy = Vec3f{ 0.0f, pixel_y,0.0f};\n            dy.normalize();\n\n            Vec3f nm = dx.cross(dy);\n            nm.normalize();\n            nm = (nm * 127.5f) + Vec3f{ 128.0f, 128.0f, 128.0f };\n\n\n\n            auto&amp; imgRGB = imgNew.at&lt;cv::Vec3b&gt;(x, y);\n            imgRGB[2] = static_cast&lt;uint8_t&gt;(nm.x());\n            imgRGB[1] = static_cast&lt;uint8_t&gt;(nm.y());\n            imgRGB[0] = static_cast&lt;uint8_t&gt;(nm.z());\n\n    }\n\n}\n\n\ncv::imwrite(\"C:/Users/Cihan/Desktop/tt.png\", imgNew)\n</code></pre>\n\n<p>basically i find x gradient and y gradient of image With Sobel() and then i do cross product of gradients but my result is this;</p>\n\n<p><img src=\"https://i.stack.imgur.com/SYcOK.png\" alt=\"enter image description here\"></p>\n\n<p>from this;</p>\n\n<p><img src=\"https://i.stack.imgur.com/F0VqA.png\" alt=\"enter image description here\"></p>\n"}]