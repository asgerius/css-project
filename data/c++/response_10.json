[{"tags": ["c++", "json", "casablanca"], "answers": [{"owner": {"reputation": 90, "user_id": 4466228, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh5.googleusercontent.com/-7GaPJN_a2TE/AAAAAAAAAAI/AAAAAAAAACk/w2xMkhxt53o/photo.jpg?sz=128", "display_name": "SeargentGen", "link": "https://stackoverflow.com/users/4466228/seargentgen"}, "is_accepted": false, "score": 0, "last_activity_date": 1426732852, "creation_date": 1426732852, "answer_id": 29136316, "question_id": 29134879, "link": "https://stackoverflow.com/questions/29134879/casablanca-assigning-a-variable-to-a-json-table-value/29136316#29136316", "title": "Casablanca: Assigning a Variable to a JSON Table Value", "body": "<p>I was finally able to find a solution to this problem after some searching and creative problem solving. There is little documentation on this issue, however, I did determine that the U is called a macro--in Casablanca it converts (almost) any type of string into a \"utility::string_t\" form. It does this literally, not accepting variables.</p>\n\n<p>In order to solve this problem, I just declared 'password' and 'username' as:</p>\n\n<pre><code> utility::string_t password\n utility::string_t username\n</code></pre>\n\n<p>And then worked with them as normal. Hope this helps anyone with the same issue out!</p>\n"}, {"owner": {"reputation": 96, "user_id": 6302407, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7uWez7c4axA/AAAAAAAAAAI/AAAAAAAAAig/YiZ1UU1pmU0/photo.jpg?sz=128", "display_name": "Victor Gonzalez Chamorro", "link": "https://stackoverflow.com/users/6302407/victor-gonzalez-chamorro"}, "is_accepted": false, "score": 0, "last_activity_date": 1470451043, "last_edit_date": 1470451043, "creation_date": 1470450527, "answer_id": 38800028, "question_id": 29134879, "link": "https://stackoverflow.com/questions/29134879/casablanca-assigning-a-variable-to-a-json-table-value/38800028#38800028", "title": "Casablanca: Assigning a Variable to a JSON Table Value", "body": "<p>I have the same problem that you have. I tried your solution, but I could not make this to work:</p>\n\n<pre><code>utility::string_t text = \"value1\"; //no suitable constructor exists from     const char to basic string\n</code></pre>\n\n<p>So looking for others method I found that this also works:</p>\n\n<pre><code>auto text = U(\"value1\");\n</code></pre>\n\n<p>after that the assignment works too:</p>\n\n<pre><code>answer[L\"key1\"] = web::json::value::string(text);\n</code></pre>\n"}], "owner": {"reputation": 90, "user_id": 4466228, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh5.googleusercontent.com/-7GaPJN_a2TE/AAAAAAAAAAI/AAAAAAAAACk/w2xMkhxt53o/photo.jpg?sz=128", "display_name": "SeargentGen", "link": "https://stackoverflow.com/users/4466228/seargentgen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 211, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1470451043, "creation_date": 1426723064, "last_edit_date": 1426731753, "question_id": 29134879, "link": "https://stackoverflow.com/questions/29134879/casablanca-assigning-a-variable-to-a-json-table-value", "title": "Casablanca: Assigning a Variable to a JSON Table Value", "body": "<p>This is probably a simple question, but I have no idea as to the answer. I've tried googling it, but I don't know what to google. I need to assign a variable to a JSON table value (username string to username table value). I saw an example on MSDN with something like this:</p>\n\n<pre><code> obj2[L\"password\"] = json::value::string(U(\"password\"));\n</code></pre>\n\n<p>However, if I remove the quotations and put in the variable name, it errors. I have a feeling this has to do with the \"U\". However, I honestly have no idea what that \"U\" is called (an iterator?) or how to change it. Could you help me out please?</p>\n"}, {"tags": ["c++", "atl", "mingw-w64"], "comments": [{"owner": {"reputation": 13049, "user_id": 990502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a146d5cbd39e3d21fce1631a35767043?s=128&d=identicon&r=PG", "display_name": "MistyD", "link": "https://stackoverflow.com/users/990502/mistyd"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1426722811, "post_id": 29134802, "comment_id": 46495056, "body": "Yup that did it. Dont know why that was becoming a problem ?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 5, "creation_date": 1426722841, "post_id": 29134802, "comment_id": 46495064, "body": "<code>NULL</code> is not a very good null pointer. That&#39;s why we have <code>nullptr</code>."}, {"owner": {"reputation": 13049, "user_id": 990502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a146d5cbd39e3d21fce1631a35767043?s=128&d=identicon&r=PG", "display_name": "MistyD", "link": "https://stackoverflow.com/users/990502/mistyd"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1426722979, "post_id": 29134802, "comment_id": 46495110, "body": "Could you put that down as an answer so I could close this question."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1426723166, "post_id": 29134802, "comment_id": 46495148, "body": "Shoot, <code>nullptr</code> wouldn&#39;t even help here anyway. It&#39;s the way the class is designed that&#39;s causing ambiguity."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1426723478, "post_id": 29134802, "comment_id": 46495231, "body": "Hmm, I can&#39;t seem to reproduce it <a href=\"http://rextester.com/UHS21835\" rel=\"nofollow noreferrer\">online</a>..."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1426723489, "post_id": 29134802, "comment_id": 46495234, "body": "See if <code>CComBSTR</code> has a member function which indicates if it is an empty string or not.  (BSTR semantics are supposed to be that empty strings and null pointers are interchangeable)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1426723507, "post_id": 29134802, "comment_id": 46495236, "body": "@chris he is using mingw, not vc++"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1426723564, "post_id": 29134802, "comment_id": 46495249, "body": "@MattMcNabb, Oh, I didn&#39;t notice, thanks."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1426723618, "post_id": 29134802, "comment_id": 46495261, "body": "@MistyD can you add a mingw tag"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1426723890, "post_id": 29134802, "comment_id": 46495329, "body": "Well, until later, keep in mind that 0 can be converted to a pointer, <code>CComBSTR</code> takes a pointer in the constructor, and it also has an <code>operator BSTR</code> (which is a pointer)."}, {"owner": {"reputation": 9766, "user_id": 1305891, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bca679c18291b3c88ee8ffae151d81a1?s=128&d=identicon&r=PG", "display_name": "Rajeshwar", "link": "https://stackoverflow.com/users/1305891/rajeshwar"}, "edited": false, "score": 0, "creation_date": 1426729718, "post_id": 29134802, "comment_id": 46496796, "body": "I added a mingw 64 bit tag"}], "answers": [{"owner": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1426849138, "creation_date": 1426849138, "answer_id": 29164938, "question_id": 29134802, "link": "https://stackoverflow.com/questions/29134802/ambiguous-overload-for-operator-issue/29164938#29164938", "title": "ambiguous overload for &#39;operator!=&#39; issue", "body": "<p>Apparently, the problem is in multiple versions of <code>operator !=</code> in <code>CComBSTR</code> class. Most likely your preferred way of fixing/resolving this problem is use of <code>CComBSTR.Length()</code> member function:</p>\n\n<pre><code>if(SUCCEEDED(hr) &amp;&amp; bstrHelpFile.Length())\n{\n    // ...\n</code></pre>\n\n<p>The reason is that <code>NULL</code> is valid value for <code>BSTR</code> and if you want to check if the string is empty, you need to take into consideration the value can be both null pointer and valid pointer to zero length string.</p>\n"}], "owner": {"reputation": 13049, "user_id": 990502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a146d5cbd39e3d21fce1631a35767043?s=128&d=identicon&r=PG", "display_name": "MistyD", "link": "https://stackoverflow.com/users/990502/mistyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 236, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426849138, "creation_date": 1426722588, "last_edit_date": 1426729701, "question_id": 29134802, "link": "https://stackoverflow.com/questions/29134802/ambiguous-overload-for-operator-issue", "title": "ambiguous overload for &#39;operator!=&#39; issue", "body": "<p>I am porting some ATL based headers into Mingw and came across problem with this code</p>\n\n<pre><code>    CComBSTR bstrHelpFile; \n        hr = pTypeLib-&gt;GetDocumentation(-1, NULL, NULL, NULL, &amp;bstrHelpFile);\n\n        if (SUCCEEDED(hr) &amp;&amp; bstrHelpFile != NULL)\n        {\n           ..\n        }\n</code></pre>\n\n<p>The error message that I get is this</p>\n\n<pre><code>C:\\mingw64\\opt\\atlmfc\\include/atlbase.h:5882:37: error: ambiguous overload for 'operator!=' (operand types are 'ATL::CComBSTR' and 'long long int')\n   if (SUCCEEDED(hr) &amp;&amp; bstrHelpFile != NULL)\n                                     ^\nC:\\mingw64\\opt\\atlmfc\\include/atlbase.h:5882:37: note: candidates are:\nC:\\mingw64\\opt\\atlmfc\\include/atlbase.h:5882:37: note: operator!=(BSTR {aka wchar_t*}, BSTR {aka wchar_t*}) &lt;built-in&gt;\n</code></pre>\n\n<p>This is the code from the ATL header <code>atlbase.h</code></p>\n\n<p>Any suggestions on how I could resolve this issue ?</p>\n"}, {"tags": ["c++", "arrays", "list"], "comments": [{"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 2, "creation_date": 1426721317, "post_id": 29134539, "comment_id": 46494602, "body": "It might be helpful if you&#39;re new to c++ <a href=\"http://stackoverflow.com/a/388282/332733\">to read a book first</a> c++ is a bit complicated"}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1426721590, "post_id": 29134539, "comment_id": 46494693, "body": "You are trying to tackle two problems at once: distributing values to elements in an array, and adding values to a linked list. Which one do you need help with?"}, {"owner": {"reputation": 187, "user_id": 4687571, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8d691a9a74d0fd209a45f18893f310b4?s=128&d=identicon&r=PG&f=1", "display_name": "Jaromando", "link": "https://stackoverflow.com/users/4687571/jaromando"}, "edited": false, "score": 0, "creation_date": 1426721804, "post_id": 29134539, "comment_id": 46494759, "body": "Probably distributing values to elements in an array more so"}, {"owner": {"reputation": 63648, "user_id": 97248, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d891ba8bd448f11617333f8642870262?s=128&d=identicon&r=PG", "display_name": "pts", "link": "https://stackoverflow.com/users/97248/pts"}, "edited": false, "score": 0, "creation_date": 1426722122, "post_id": 29134539, "comment_id": 46494854, "body": "Please format your code so that it&#39;s easy to read for the rest of us. Particularly, please fix indentation."}, {"owner": {"reputation": 63648, "user_id": 97248, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d891ba8bd448f11617333f8642870262?s=128&d=identicon&r=PG", "display_name": "pts", "link": "https://stackoverflow.com/users/97248/pts"}, "edited": false, "score": 0, "creation_date": 1426722191, "post_id": 29134539, "comment_id": 46494874, "body": "What is the desired effect of <code>line.substr(0, line.find(&#39; &#39;));</code>? Currently it looks line a no-op, because it doesn&#39;t change <code>line</code>."}, {"owner": {"reputation": 63648, "user_id": 97248, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d891ba8bd448f11617333f8642870262?s=128&d=identicon&r=PG", "display_name": "pts", "link": "https://stackoverflow.com/users/97248/pts"}, "edited": false, "score": 0, "creation_date": 1426722231, "post_id": 29134539, "comment_id": 46494890, "body": "Always check the success all input-reading and parsing function calls. (In this case, <code>atoi</code> and <code>getline</code>.)"}, {"owner": {"reputation": 187, "user_id": 4687571, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8d691a9a74d0fd209a45f18893f310b4?s=128&d=identicon&r=PG&f=1", "display_name": "Jaromando", "link": "https://stackoverflow.com/users/4687571/jaromando"}, "edited": false, "score": 0, "creation_date": 1426722342, "post_id": 29134539, "comment_id": 46494917, "body": "Was looking to parse, but ended up not really using it, I removed it."}, {"owner": {"reputation": 63648, "user_id": 97248, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d891ba8bd448f11617333f8642870262?s=128&d=identicon&r=PG", "display_name": "pts", "link": "https://stackoverflow.com/users/97248/pts"}, "edited": false, "score": 0, "creation_date": 1426722342, "post_id": 29134539, "comment_id": 46494918, "body": "You are changing the value of <code>numTeams</code> after <code>balanceTeams list[numTeams];</code>. Please not that such a change doesn&#39;t unpedate the size of <code>list</code>. Use <code>std::vector</code> instead of an array, and call its <code>.resize</code> method whenever the size needs to be changed."}, {"owner": {"reputation": 187, "user_id": 4687571, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8d691a9a74d0fd209a45f18893f310b4?s=128&d=identicon&r=PG&f=1", "display_name": "Jaromando", "link": "https://stackoverflow.com/users/4687571/jaromando"}, "edited": false, "score": 0, "creation_date": 1426722976, "post_id": 29134539, "comment_id": 46495109, "body": "Changed it to a vector."}], "answers": [{"comments": [{"owner": {"reputation": 187, "user_id": 4687571, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8d691a9a74d0fd209a45f18893f310b4?s=128&d=identicon&r=PG&f=1", "display_name": "Jaromando", "link": "https://stackoverflow.com/users/4687571/jaromando"}, "edited": false, "score": 0, "creation_date": 1426732789, "post_id": 29135145, "comment_id": 46497549, "body": "I&#39;m getting three errors when trying to implement that. I&#39;ll include in my original post so you can see it better."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "reply_to_user": {"reputation": 187, "user_id": 4687571, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8d691a9a74d0fd209a45f18893f310b4?s=128&d=identicon&r=PG&f=1", "display_name": "Jaromando", "link": "https://stackoverflow.com/users/4687571/jaromando"}, "edited": false, "score": 0, "creation_date": 1426808730, "post_id": 29135145, "comment_id": 46534515, "body": "The compilation error is self-explanatory. You declared your class method as taking an int for an argument, while you&#39;re passing a std::string as a parameter. You need to make up your mind whether your link list stores ints, or std::strings, and then change the code accordingly. That&#39;s exactly what the compiler error says. What part of the error text you didn&#39;t understand?"}], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": true, "score": 0, "last_activity_date": 1426724722, "creation_date": 1426724722, "answer_id": 29135145, "question_id": 29134539, "link": "https://stackoverflow.com/questions/29134539/array-of-linked-lists-trouble-c/29135145#29135145", "title": "Array of Linked Lists Trouble C++", "body": "<p>All that seems to be missing from your code is:</p>\n\n<p>1) Some error checking. The number of entered teams must be at least one. If someone enters 0 or a negative value, display an error message, and bail out.</p>\n\n<p>2) Initialize</p>\n\n<pre><code>size_t i=0;\n</code></pre>\n\n<p>before the existing loop.</p>\n\n<p>3) Inside the loop, parse the existing value, then call</p>\n\n<pre><code>vect[i].addUnit(new_value);\n</code></pre>\n\n<p>4) Increment the index at the end of the loop, for the next iterator</p>\n\n<pre><code>i=(i+1) % vect.size();\n</code></pre>\n\n<p>That seems to be it. Each time around the loop, you'll be adding a value to the next vector.</p>\n"}], "owner": {"reputation": 187, "user_id": 4687571, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8d691a9a74d0fd209a45f18893f310b4?s=128&d=identicon&r=PG&f=1", "display_name": "Jaromando", "link": "https://stackoverflow.com/users/4687571/jaromando"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 29135145, "answer_count": 1, "score": 0, "last_activity_date": 1426732997, "creation_date": 1426721039, "last_edit_date": 1426732997, "question_id": 29134539, "link": "https://stackoverflow.com/questions/29134539/array-of-linked-lists-trouble-c", "title": "Array of Linked Lists Trouble C++", "body": "<p>First off, I am very new to C++ and have worked primarily with languages such as Java, JavaScript, C#, and Scala. </p>\n\n<p>I am trying to write a program that will take a number from the console, which will determine the number of teams (in form of linked lists (Ex. numTeams = 5; means 5 linked lists)) and then will take the following input such that the first value will be added to the first linked list, then the second value to the second linked list, and so on until all i values are distributed to all all n teams. Also, when all linked lists are filled with with a an equal amount of values it will start again at the first linked list and go through them again adding the values to each list. </p>\n\n<p>I know I have to make an array of linked lists, but am unsure how to go further than where I am with distributing the values in the fashion I stated. </p>\n\n<p>Any help would be very much appreciated!</p>\n\n<p>Here is what I have so far:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;algorithm&gt;\n#include &lt;iterator&gt;\nusing namespace std;\n\nclass balanceTeams{\n\n    // Struct inside the class LinkedList\n    struct Node {\n\n          int x;\n          Node *next;\n\n     };\n\n\npublic:\n\n  // constructor\n  balanceTeams(){\n\n       head = NULL; // set head to NULL\n\n    }\n\n  // New value at the beginning of the list\n  void addUnit(int val){\n\n        Node *n = new Node();   // create new Node\n        n-&gt;x = val;             // set value\n        n-&gt;next = head;         // make the node point to the next node.\n        //  If the list is empty, this is NULL\n        head = n;               // head point at the new node.\n\n     }\n\n  // returns the first element in the list and deletes the Node.\n  int popUnit(){\n\n          Node *n = head;\n          int ret = n-&gt;x;\n\n          head = head-&gt;next;\n          delete n;\n          return ret;\n\n     }\n\n  //void swapUnit()\n  //void moveUnit()\n\nprivate:\n\n    Node *head; // pointer to the first Node\n\n  };\n\n\nint main() {\n\n\n    string line;\n    int numTeams = 0;\n    int lines = 0;\n    vector&lt;balanceTeams&gt; vect;\n    //int team_size = lines / numTeams;\n\n\n  getline(cin, line);\n      numTeams = atoi (line.c_str());\n      vect.resize(numTeams);\n      cout &lt;&lt; \"Num teams: \" &lt;&lt; numTeams &lt;&lt; endl;\n\n\n  while (getline(cin, line)) {\n\n      cout &lt;&lt; \"Unit \" &lt;&lt; line &lt;&lt; endl;\n\n  }\n\n  return 0;\n\n}\n</code></pre>\n\n<p>Edit: Three Errors:</p>\n\n<pre><code>balanceTeams.cpp: In function \u2018int main()\u2019:\nbalanceTeams.cpp:72:23: error: no matching function for call to  \n  \u2018balanceTeams::addUnit(std::string&amp;)\u2019\n   vect[i].addUnit(line);\n                       ^\nbalanceTeams.cpp:72:23: note: candidate is:\nbalanceTeams.cpp:25:7: note: void balanceTeams::addUnit(int)\n  void addUnit(int val){\n       ^\nbalanceTeams.cpp:25:7: note:   no known conversion for argument 1 from \u2018std::string {aka std::basic_string&lt;char&gt;}\u2019 to \u2018int\u2019\n</code></pre>\n"}, {"tags": ["c++", "compilation", "sizeof"], "comments": [{"owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 0, "creation_date": 1426720958, "post_id": 29134508, "comment_id": 46494470, "body": "do not worry about the performance of sizeof"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1426721010, "post_id": 29134508, "comment_id": 46494495, "body": "<code>sizeof</code> is a compile-time operator."}], "answers": [{"comments": [{"owner": {"reputation": 3558, "user_id": 389833, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fc01b03cab64a85b58f30b70190eafb8?s=128&d=identicon&r=PG", "display_name": "Bukes", "link": "https://stackoverflow.com/users/389833/bukes"}, "edited": false, "score": 0, "creation_date": 1426722241, "post_id": 29134571, "comment_id": 46494891, "body": "I feel as though one must cross one-self anytime <code>sizeof(a++)</code> is uttered...truly hideous."}], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": true, "score": 8, "last_activity_date": 1426721184, "creation_date": 1426721184, "answer_id": 29134571, "question_id": 29134508, "link": "https://stackoverflow.com/questions/29134508/is-sizeof-converted-to-a-constant-number-after-compilation/29134571#29134571", "title": "Is sizeof converted to a constant number after compilation?", "body": "<p>Yes. The compiler knows <code>sizeof(myStruct)</code> at compile-time, and will replace it with the appropriate constant.</p>\n\n<p>This is always true for <code>sizeof</code> expressions in C++.</p>\n\n<p>Note: this means that, for example, <code>sizeof(a++)</code> will <em>not</em> increment <code>a</code>.</p>\n"}], "owner": {"reputation": 2335, "user_id": 3453041, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/024667382dfea30a6c96bed77f8b5c7a?s=128&d=identicon&r=PG&f=1", "display_name": "Water", "link": "https://stackoverflow.com/users/3453041/water"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 29134571, "answer_count": 1, "score": 1, "last_activity_date": 1426724440, "creation_date": 1426720867, "last_edit_date": 1426724440, "question_id": 29134508, "link": "https://stackoverflow.com/questions/29134508/is-sizeof-converted-to-a-constant-number-after-compilation", "title": "Is sizeof converted to a constant number after compilation?", "body": "<p>Are these equal speed-wise?</p>\n\n<pre><code>return someNumber / sizeof(myStruct); // Pretend sizeof returns 88 always.\n</code></pre>\n\n<p>and</p>\n\n<pre><code>return someNumber / 88;\n</code></pre>\n\n<p>I'm unsure if the compiler calculates sizeof every single time or writes a constant (thus making it safe for me to include sizeof() instead of a constant).</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 2, "creation_date": 1426720643, "post_id": 29134443, "comment_id": 46494364, "body": "<code>#define ARRAY_LEN(array) (sizeof(array)&#47;sizeof((array)[0]) - 1);</code> :P"}, {"owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 0, "creation_date": 1426720708, "post_id": 29134443, "comment_id": 46494379, "body": "I was going to say <code>#define STR_LEN(array) (ARRAY_LEN(array) - 1)</code>. LOL."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1426720753, "post_id": 29134443, "comment_id": 46494402, "body": "You shouldn&#39;t be using a macro for this anyway. <a href=\"http://stackoverflow.com/questions/437150/can-someone-explain-this-template-code-that-gives-me-the-size-of-an-array\" title=\"can someone explain this template code that gives me the size of an array\">stackoverflow.com/questions/437150/&hellip;</a>"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1426720873, "post_id": 29134443, "comment_id": 46494439, "body": "Never mind, I didn&#39;t catch the &quot;C solution is preferred&quot;."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1426720921, "post_id": 29134443, "comment_id": 46494458, "body": "@JonathanPotter  Why was that not worth posting as an answer rather then a comment."}, {"owner": {"reputation": 2469, "user_id": 778117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cw2EQ.jpg?s=128&g=1", "display_name": "Fatih BAKIR", "link": "https://stackoverflow.com/users/778117/fatih-bakir"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1426720967, "post_id": 29134443, "comment_id": 46494476, "body": "@Clifford, because he didn&#39;t answer the actual question"}, {"owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1426720992, "post_id": 29134443, "comment_id": 46494487, "body": "@Clifford A lot of times I&#39;ll post short answers in comments to see the OP&#39;s initial reaction before posting a real answer."}, {"owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1426721187, "post_id": 29134443, "comment_id": 46494550, "body": "@JonathanPotter Thanks :). This perfectly answeres the question in a pure logical sense but clearly was not the intention but it made me smile."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 2469, "user_id": 778117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cw2EQ.jpg?s=128&g=1", "display_name": "Fatih BAKIR", "link": "https://stackoverflow.com/users/778117/fatih-bakir"}, "edited": false, "score": 0, "creation_date": 1426721299, "post_id": 29134443, "comment_id": 46494597, "body": "@FatihBAKIR : It may not satisfy <i>&quot;some trick to define a constant string literal without a trailing &#39;\\0&#39;</i>, to which the answer is just no if you exclude the array initialisation syntax; but it does address <i>&quot;So that using ARRAY_LEN(c_seqence) returns the actual sequence length without the &#39;\\0&#39;?&quot;</i>, so is the only useful answer, and it is not a <i>comment</i>.  Moreover the answer appears to be acceptable to the OP, but he cannot <i>accept</i> a comment."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1426721417, "post_id": 29134443, "comment_id": 46494633, "body": "Technically, <code>boost::mpl::string</code> is not C++11 and lets you do four characters at once (<code>&lt;&#39;abcd&#39;, &#39;efgh&#39;&gt;</code>). It has <code>size</code> and <code>c_str</code> metafunctions."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1426721469, "post_id": 29134443, "comment_id": 46494647, "body": "I didn&#39;t think my comment would actually answer the OPs question, which was about modifying the string literal itself."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 1, "creation_date": 1426721603, "post_id": 29134443, "comment_id": 46494695, "body": "@JonathanPotter : If an answer gets harshly down-voted, you can always delete it if such things worry you.  Even if the answer is not accepted by the OP, it may be of interest to someone seeking similar solutions.  The comments are not searchable on SO so are of less community value."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1426722226, "post_id": 29134443, "comment_id": 46494888, "body": "Ok, answered. I better get lots of rep now! :)"}], "answers": [{"comments": [{"owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 0, "creation_date": 1426721316, "post_id": 29134572, "comment_id": 46494601, "body": "if i define a <code>static const char c_a[5] = &quot;12345&quot;;</code> then i get a compiler warning/error: <code>Error\t1\tinitializer-string for array of chars is too long [-fpermissive]\t</code>"}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "reply_to_user": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 0, "creation_date": 1426721477, "post_id": 29134572, "comment_id": 46494650, "body": "@vlad_tepesch Hum, that&#39;s odd. This - <a href=\"http://ideone.com/bcg2zP\" rel=\"nofollow noreferrer\">ideone.com/bcg2zP</a> - compiles without any warning even if I use <code>-Wall</code> in my machine. I&#39;m almost sure this is somewhere in the standard, let me look that up."}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "reply_to_user": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 0, "creation_date": 1426721835, "post_id": 29134572, "comment_id": 46494767, "body": "@vlad_tepesch Please see my updated answer. As I suspected, it&#39;s in the standard, so you shouldn&#39;t get any errors / warnings. What compiler are you using?"}, {"owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 0, "creation_date": 1426721951, "post_id": 29134572, "comment_id": 46494798, "body": "AVR8/GNU C Compiler : 4.8.1"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1426722220, "post_id": 29134572, "comment_id": 46494886, "body": "@FilipeGon&#231;alves, <code>if (x = 2)</code> is also standard, but very commonly gives a warning."}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "reply_to_user": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 4, "creation_date": 1426722265, "post_id": 29134572, "comment_id": 46494903, "body": "@vlad_tepesch Hum, this is different in C and C++. Turns out this is a C-only thing. C++ compilers will give you this error. Great example of why you shouldn&#39;t tag a question with C and C++ :)"}, {"owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 0, "creation_date": 1426722607, "post_id": 29134572, "comment_id": 46495005, "body": "ups right, i renamed the file to cpp to test something ;)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1426723246, "post_id": 29134572, "comment_id": 46495166, "body": "<code>MAKE_STR_LITERAL</code> is a poor name for a macro that makes an array which doesn&#39;t contain a string and isn&#39;t a literal"}], "owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "is_accepted": false, "score": 4, "last_activity_date": 1426722362, "last_edit_date": 1495542135, "creation_date": 1426721186, "answer_id": 29134572, "question_id": 29134443, "link": "https://stackoverflow.com/questions/29134443/constant-string-literal-without-terminating-nul/29134572#29134572", "title": "constant string literal without terminating nul", "body": "<blockquote>\n  <p>Is there some trick to define a constant string literal without a\n  trailing '\\0' character?</p>\n</blockquote>\n\n<p>In C, if you specify the size of a character array to be one less than the size of the string literal initializer, it won't have a trailing null character. You could do it like so:</p>\n\n<pre><code>static const char c_seqence[ARRAY_LEN(\"___----__--_-_\")-1] = \"___----__--_-_\";\n</code></pre>\n\n<p>Of course, to avoid having to indicate the string literal twice in the same line, you might want to define a macro to do it:</p>\n\n<pre><code>#define MAKE_STR_LITERAL(n, l) static const char n[ARRAY_LEN(l)-1] = l\n</code></pre>\n\n<p>You can use it like this:</p>\n\n<pre><code>MAKE_STR_LITERAL(c_seqence, \"___----__--_-_\");\n</code></pre>\n\n<p><strong>Note</strong>:</p>\n\n<p>As stated in <a href=\"https://stackoverflow.com/a/4348188/2793118\">https://stackoverflow.com/a/4348188/2793118</a>, this behavior is in section 6.7.8 of the standard (quoting from that answer):</p>\n\n<blockquote>\n  <p><strong>\u00a7 6.7.8p14</strong></p>\n  \n  <p>An array of character type may be initialized by a character string\n  literal, optionally enclosed in braces. Successive characters of the\n  character string literal (including the terminating null character if\n  there is room or if the array is of unknown size) initialize the\n  elements of the array.</p>\n</blockquote>\n\n<p><strong>Note2</strong>: Turns out this is a C-only thing. In C++ it will not compile. Yet another great example of why people shouldn't tag questions with both C and C++.</p>\n"}, {"comments": [{"owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 0, "creation_date": 1426722871, "post_id": 29134745, "comment_id": 46495075, "body": "obviously this is not the intendet way to solve this. since some kind of <code>ARRAY_LEN</code> macro is a commonly used idiom, its meaning/definition should not be changed."}, {"owner": {"reputation": 26832, "user_id": 432, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c641a026e20b5457fdc69a1d9f256cc5?s=128&d=identicon&r=PG", "display_name": "andrewrk", "link": "https://stackoverflow.com/users/432/andrewrk"}, "edited": false, "score": 1, "creation_date": 1426723035, "post_id": 29134745, "comment_id": 46495117, "body": "#define STRING_LEN(array) (ARRAY_LEN(array) - 1)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1426723390, "post_id": 29134745, "comment_id": 46495206, "body": "I&#39;d suggest calling it something different to <code>ARRAY_LEN</code> which indicates that it doesnt actually give the length of an array"}], "owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "is_accepted": false, "score": 2, "last_activity_date": 1426722175, "creation_date": 1426722175, "answer_id": 29134745, "question_id": 29134443, "link": "https://stackoverflow.com/questions/29134443/constant-string-literal-without-terminating-nul/29134745#29134745", "title": "constant string literal without terminating nul", "body": "<p>The simplest solution is to change your array length macro to ignore the trailing null:</p>\n\n<pre><code>#define ARRAY_LEN(array) (sizeof(array)/sizeof((array)[0]) - 1)\n</code></pre>\n\n<p>(posted under duress :)</p>\n"}, {"comments": [{"owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 0, "creation_date": 1426722936, "post_id": 29134846, "comment_id": 46495097, "body": "may be if c++11 may be used, someone could define its own type prefix. but iam not fully aware of the possibilities and restrictions of such a solution atm"}], "owner": {"reputation": 26832, "user_id": 432, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c641a026e20b5457fdc69a1d9f256cc5?s=128&d=identicon&r=PG", "display_name": "andrewrk", "link": "https://stackoverflow.com/users/432/andrewrk"}, "is_accepted": false, "score": 0, "last_activity_date": 1426722857, "creation_date": 1426722857, "answer_id": 29134846, "question_id": 29134443, "link": "https://stackoverflow.com/questions/29134443/constant-string-literal-without-terminating-nul/29134846#29134846", "title": "constant string literal without terminating nul", "body": "<p>In C++11, without macros:</p>\n\n<pre><code>template &lt;typename T, size_t n&gt;\nconstexpr size_t array_length(const T (&amp;)[n]) {\n    return n;\n}\n\ntemplate &lt;typename T, size_t n&gt;\nconstexpr size_t string_length(const T (&amp;)[n]) {\n    return n - 1;\n}\n</code></pre>\n\n<p>I realize the question explicitly eliminates C++11 but that might not be true about everyone reaching this question from a search engine.</p>\n"}], "owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1426722857, "creation_date": 1426720537, "question_id": 29134443, "link": "https://stackoverflow.com/questions/29134443/constant-string-literal-without-terminating-nul", "title": "constant string literal without terminating nul", "body": "<p>is there some trick to define a constant string literal without a trailing <code>'\\0'</code> character?</p>\n\n<pre><code>#define ARRAY_LEN(array) (sizeof(array)/sizeof((array)[0]))\n\nstatic const char c_seqence[] = \"___----__--_-_\";\n</code></pre>\n\n<p>So that using <code>ARRAY_LEN(c_seqence)</code> returns the actual sequence length without the <code>'\\0'</code>?\nNo runtime ovearhead should be generated.\nObiously the string like representation is preffered to a char array <code>{'_','_',...}</code> initialization because of better readability.</p>\n\n<p>C solution is preffered but may be also some c++ solution may be interesting as long they do not rely on c++11 features.</p>\n"}, {"tags": ["c++", "c++11", "lvalue", "rvalue"], "comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1426720621, "post_id": 29134433, "comment_id": 46494356, "body": "What is &quot;the following&quot;?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1426720764, "post_id": 29134433, "comment_id": 46494407, "body": "When you assign or use the reference, you&#39;re assigning or using the object it refers to. You&#39;ve chosen a tough example though: a <code>const</code> reference can extend the lifetime of a temporary."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1426720961, "post_id": 29134433, "comment_id": 46494472, "body": "Oh and PODs have nothing to do with it. All instances are objects in C++."}, {"owner": {"reputation": 14111, "user_id": 978486, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mEjSr.jpg?s=128&g=1", "display_name": "ManuelSchneid3r", "link": "https://stackoverflow.com/users/978486/manuelschneid3r"}, "edited": false, "score": 0, "creation_date": 1426721406, "post_id": 29134433, "comment_id": 46494629, "body": "Well, learned something. I meant primitive datatypes."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1426721552, "post_id": 29134433, "comment_id": 46494679, "body": "That&#39;s irrelevant too."}, {"owner": {"reputation": 14111, "user_id": 978486, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mEjSr.jpg?s=128&g=1", "display_name": "ManuelSchneid3r", "link": "https://stackoverflow.com/users/978486/manuelschneid3r"}, "edited": false, "score": 0, "creation_date": 1426722551, "post_id": 29134433, "comment_id": 46494991, "body": "I know. The problem is, since I am not a native spreaker, I used the word object. Which is not complete. Now tell me the word which comprises primitves and objects."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1426764402, "post_id": 29134515, "comment_id": 46509655, "body": "It&#39;s nothing to do with safety. Reading and writing a temporary are both safe.  Writing a temporary is usually not very useful however, which is part of the rational Bjarne followed in making this design decision in the &#39;80s."}], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 0, "last_activity_date": 1426720896, "creation_date": 1426720896, "answer_id": 29134515, "question_id": 29134433, "link": "https://stackoverflow.com/questions/29134433/how-do-traditional-prior-c11-lvalue-references-work-in-c/29134515#29134515", "title": "How do (traditional, prior c++11 lvalue-) references work in C++", "body": "<p>You can bind the temporary to <code>rone</code> because the compiler knows you're not going to modify it. Reading a temporary value is safe, writing to it isn't.</p>\n\n<p>If you remove the <code>const</code>, the code will not compile anymore.</p>\n"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 6, "last_activity_date": 1426720978, "creation_date": 1426720978, "answer_id": 29134527, "question_id": 29134433, "link": "https://stackoverflow.com/questions/29134433/how-do-traditional-prior-c11-lvalue-references-work-in-c/29134527#29134527", "title": "How do (traditional, prior c++11 lvalue-) references work in C++", "body": "<p>Another way to think of reference is <em>alias</em>. Binding a reference provides another name for an object.  Before C++11 these two snippets were exactly identical:</p>\n\n<pre><code>int a = 5;\nint &amp;b = a;\n</code></pre>\n\n<p>versus</p>\n\n<pre><code>int b = 5;\nint &amp;a = b;\n</code></pre>\n\n<p>Thereafter, <code>a</code> and <code>b</code> are both names for the same object.   (C++11 introduced an asymmetry in that <code>decltype</code> will include the reference in the type returned).</p>\n\n<p>It's not any different in your first example. You bind <code>rone</code> to be a name for the temporary object, and the language rules say that this makes the temporary object's lifetime be extended too.</p>\n\n<p>In your second example there are no references. The address-of operator is a different language element to the symbol for declaring a reference, despite them having the same spelling. It is illegal because the language definition says that the address-of operator cannot be applied to an expression which creates a temporary object.</p>\n"}, {"owner": {"reputation": 21240, "user_id": 951423, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/UlSg8.png?s=128&g=1", "display_name": "Pixelchemist", "link": "https://stackoverflow.com/users/951423/pixelchemist"}, "is_accepted": false, "score": 0, "last_activity_date": 1426726121, "last_edit_date": 1426726121, "creation_date": 1426725742, "answer_id": 29135301, "question_id": 29134433, "link": "https://stackoverflow.com/questions/29134433/how-do-traditional-prior-c11-lvalue-references-work-in-c/29135301#29135301", "title": "How do (traditional, prior c++11 lvalue-) references work in C++", "body": "<p>Variables (objects) and references are \"names\" (pointers are variables too so the same applies). The programmer uses them to identify certain objects in a program. Note that references do not only reference temporary objects. They may reference any valid object.</p>\n\n<p>Other things (i.e. rvalues) do not have a name and no specified accessible \"location\" Their handling is a compiler job. In example in x86 (depending on the calling convention), small return values are ususally returned via certain processeor registers.</p>\n\n<p>Consider:</p>\n\n<pre><code>int one() { return 1; }\nint main()\n{\n  one();\n  return 0;\n}\n</code></pre>\n\n<p>The return value vanishes here. (The compiler will probably not even call the function at all if it is visible.)\nIf you could take the address of the return value it must be stored somewhere (a location which can be accessed using a valid address).</p>\n\n<p>So in order to be able to take the address of the value returned by <code>one()</code> the value has to be copied from register <em>EAX</em> (where it conventionally resides when cdecl is used) to some location which is \"save\" to be accessed by a c++ program(mer) .</p>\n\n<p>What would happen if you indeed could access the address of a temporary \"directly\"?</p>\n\n<pre><code>int const * p = &amp;one(); // would this return \"EAX\"?\nint c = *(p + 1); // ??\u00b2\n</code></pre>\n\n<p>Would you read register EBX in the second line? Or whatever memory location in L1 or L2 or or ?? There is no point in something like this.</p>\n\n<p>The only accessible locations in c++ are on the stack memory and free store (\"heap\") one of which is used if you create a variable or const reference for a return type.</p>\n\n<pre><code>int main()\n{\n  int const a = one();\n  return 0;\n}\n</code></pre>\n\n<p>Things do not change much from the first example coming here: <code>a</code> has a name and memory assigned, whereas the return value of the function (still) has (and always will have) not. The return value is \"computed\" into EAX and <code>a</code> is initialized using that integer by copying the register value to <code>a</code>'s memory location.</p>\n\n<pre><code>int const &amp; r = one();\n</code></pre>\n\n<p>Not much of a difference here. The return value is stored at a persistent/accessible memory location and now you can take the address of it using i.e. </p>\n\n<pre><code>int const * p = &amp;r;\n</code></pre>\n\n<p><em>Where is this adress pointing to?</em> </p>\n\n<p>I'm not sure but I don't think that standard specifies any location for prolonged temporaries (correct me if I'm wrong). All you need to know is: <code>r</code> refers to a valid object and <code>&amp;r</code> is the address of that object. (You could probably compare the address to some nearby stack variable addresses to find out whether it is likely to be on the stack, too.)</p>\n\n<p>One thing is different between <code>r</code> and <code>a</code> though: The value (stored at the location <code>r</code> refers to) is not necessarily on the stack (although I assume it would end up being on the stack), whereas <code>a</code> from above is definitely on the stack.</p>\n\n<p>Another difference arises when it comes to objects. (At least in theory, although a c++ compiler is allowed to optimize in a way that <code>a</code> and <code>b</code> in the following paragraph aresomehow equivalent).</p>\n\n<pre><code>struct X { /*stuff*/ };\nX foo() { return X{ /*.args.*/ }; }\n// ...\nX const a = foo(); // A\nX const &amp; b = foo(); // B\n</code></pre>\n\n<p>In line <code>B</code>, <code>b</code> is a name for a constant object of type <code>X</code>. (Behind the scenes the compiler will in advance choose some location for the object and return <code>foo</code> directly into that memory in order to avoid copying it.)</p>\n\n<p>In line <code>A</code>, <code>a</code> will be (on the stack and) initialized from the temporary returned by <code>foo</code> via it's copy constructor. (The copy can be elided and an optimizing compiler will most likely construct the temporary directly into a.)</p>\n\n<p>Variable names and references are human identification tokens. A variable / an object is a single instance to which multiple references may exist.</p>\n"}], "owner": {"reputation": 14111, "user_id": 978486, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mEjSr.jpg?s=128&g=1", "display_name": "ManuelSchneid3r", "link": "https://stackoverflow.com/users/978486/manuelschneid3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 29134527, "answer_count": 3, "score": 1, "last_activity_date": 1426727583, "creation_date": 1426720478, "last_edit_date": 1426727583, "question_id": 29134433, "link": "https://stackoverflow.com/questions/29134433/how-do-traditional-prior-c11-lvalue-references-work-in-c", "title": "How do (traditional, prior c++11 lvalue-) references work in C++", "body": "<p>Pointers are easy. There is some memory which holds an address. To get the (meaningful) value dereferencing returns the value contained by the memory the address points to.</p>\n\n<p>References do somehow something similiar: they hold the \"link\" to a temporary object. But what happens when I assign or use the reference?</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint one(){\n    return 1;\n}\nint main()\n{\n    const int &amp;rone = one();\n    cout &lt;&lt; &amp;rone &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>Why does this work? Is this adress the adress of the temporary object?</p>\n\n<pre><code>sh-4.2# g++ -std=c++11 -o main *.cpp\nsh-4.2# main\n0x7fff9d2a4e74\n</code></pre>\n\n<p>Where is this adress pointing to? And if it points to the magic temporary object, why cant I just do the following. (I know well that it is a rvalue and that <code>&amp;</code> accepts only lvalues, but why?)</p>\n\n<pre><code>int main()\n{\n    cout &lt;&lt; &amp;one() &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>My question goes beyond the programming aspect of c++. It is meant more in a techincal direction how C++ works inside. Primarily I try to understand the rvalue references in the context of the move semantics, which require to understand those traditional references (which I hardly ever use).</p>\n"}, {"tags": ["c++", "templates", "arraylist", "linker", "typename"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1426720837, "post_id": 29134413, "comment_id": 46494430, "body": "If you want &quot;prettiness&quot;, then why not use one of the many existing container classes instead of trying to write your own?  Also, your class is seriously broken if <code>T</code> is a non-POD type."}, {"owner": {"reputation": 187, "user_id": 3793527, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a462bbd8a2bccc5b00dedb3e1ed95af4?s=128&d=identicon&r=PG&f=1", "display_name": "Poehli", "link": "https://stackoverflow.com/users/3793527/poehli"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1426721066, "post_id": 29134413, "comment_id": 46494511, "body": "simply because I like to learn more about it ;) I never used templates before, so what exactly is broken?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1426721179, "post_id": 29134413, "comment_id": 46494546, "body": "You&#39;re trying to run a marathon before learning to walk.  There are several issues with the code, &quot;ugliness&quot; or &quot;prettiness&quot; not withstanding.  You failed to implement the &quot;rule of 3&quot;, your class doesn&#39;t work with types such as <code>std::string</code> or any non-POD types, usage of <code>calloc</code> (which is related to the non-POD issue), etc.  I suggest you look at successful implementations (not the STL ones since they are very terse, but ones coded by experienced programmers) and learn from that.  Trying to do this by yourself just willy-nilly never works, believe me."}, {"owner": {"reputation": 187, "user_id": 3793527, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a462bbd8a2bccc5b00dedb3e1ed95af4?s=128&d=identicon&r=PG&f=1", "display_name": "Poehli", "link": "https://stackoverflow.com/users/3793527/poehli"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1426721740, "post_id": 29134413, "comment_id": 46494743, "body": "okay I get that, but what are you referring to, when you say &quot;coded by experienced programmers&quot;? I don&#39;t know where to get such code."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1426722861, "post_id": 29134413, "comment_id": 46495072, "body": "There are plenty of examples right here on SO, where the question is similar to yours, and extensive answers given."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1426723993, "post_id": 29134413, "comment_id": 46495353, "body": "You can start here.  This should be, more or less, a skeleton class that implements the functions that are required for copying, assignment, destruction, and respects that <code>T</code> may be a non-POD type:  <a href=\"http://ideone.com/IstTwE\" rel=\"nofollow noreferrer\">ideone.com/IstTwE</a>"}, {"owner": {"reputation": 187, "user_id": 3793527, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a462bbd8a2bccc5b00dedb3e1ed95af4?s=128&d=identicon&r=PG&f=1", "display_name": "Poehli", "link": "https://stackoverflow.com/users/3793527/poehli"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1426763781, "post_id": 29134413, "comment_id": 46509286, "body": "Thank you, this seems to be a good start!"}], "owner": {"reputation": 187, "user_id": 3793527, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a462bbd8a2bccc5b00dedb3e1ed95af4?s=128&d=identicon&r=PG&f=1", "display_name": "Poehli", "link": "https://stackoverflow.com/users/3793527/poehli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "closed_date": 1426721026, "answer_count": 0, "score": 0, "last_activity_date": 1426720373, "creation_date": 1426720373, "question_id": 29134413, "link": "https://stackoverflow.com/questions/29134413/templates-for-arraylist-in-c", "closed_reason": "Duplicate", "title": "Templates for Arraylist in c++", "body": "<p>I'm trying to write an ArrayList class in c++, but run into the linking problem with templates as described in many places. I don't want to copy all my code into the header file. That would just be ugly. And the vector class probably didn't do that either right? </p>\n\n<p>So how would I include my ArrayList implementation to any cpp file?</p>\n\n<p>Here is my header File: </p>\n\n<pre><code>//ArrayList.h\n#include &lt;stdlib.h&gt;\n\ntemplate &lt;typename T&gt; class ArrayList{\n    public:\n        ArrayList&lt;T&gt;(){\n            array = (T*)calloc(sizeof(T), 1);\n            length = 1;\n            elements = 0;\n        }\n\n        T get(int i);\n        void set(int i, T el);\n        void add(T el);\n        int expand(size_t n);\n        void remove(int i);\n        int size();\n        int reserved();\n        void fix_size();\n\n    private:\n        void copyAll(T arr1[], T arr2[], int len);\n        T *array;\n        int length, elements;\n};\n</code></pre>\n\n<p>And here is part of my .cpp file:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include \"ArrayList.h\"\n\ntemplate &lt;typename T&gt; T ArrayList&lt;T&gt;::get(int i){\n    if (i &gt; this-&gt;elements || i &lt; 0) return (T)0;\n    return this-&gt;array[i];\n}\n\ntemplate &lt;typename T&gt; int ArrayList&lt;T&gt;::size(){\n    return elements;\n}\n\ntemplate &lt;typename T&gt; int ArrayList&lt;T&gt;::reserved(){\n    return length;\n}\n\ntemplate &lt;typename T&gt; int ArrayList&lt;T&gt;::expand(size_t n){\n    // implementation\n}\n\ntemplate &lt;typename T&gt; void ArrayList&lt;T&gt;::set(int i, T el){\n    // implementation\n}\n\ntemplate &lt;typename T&gt; void ArrayList&lt;T&gt;::add(T el){\n    // implementation\n}\n\ntemplate &lt;typename T&gt; void ArrayList&lt;T&gt;::remove(int i){\n    // implementation\n}\n\ntemplate &lt;typename T&gt; void ArrayList&lt;T&gt;::copyAll(T arr1[], T arr2[], int len){\n    // implementation\n}\ntemplate &lt;typename T&gt; void ArrayList&lt;T&gt;::fix_size(){\n    // implementation\n}\n</code></pre>\n"}, {"tags": ["c++", "constructor", "copy-constructor"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1426720418, "post_id": 29134410, "comment_id": 46494285, "body": "Please format your code so that it&#39;s readable.  Thanks."}], "answers": [{"owner": {"reputation": 703, "user_id": 2850608, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100006061862863/picture?type=large", "display_name": "Andreas Vennstr&#246;m", "link": "https://stackoverflow.com/users/2850608/andreas-vennstr%c3%b6m"}, "is_accepted": false, "score": 0, "last_activity_date": 1426720758, "creation_date": 1426720758, "answer_id": 29134490, "question_id": 29134410, "link": "https://stackoverflow.com/questions/29134410/copy-and-assignment-constructor-for-arrays-c-example/29134490#29134490", "title": "Copy and assignment constructor for arrays C++ example", "body": "<p>I am guessing it's because of the way you're initializing <code>table</code>:</p>\n\n<pre><code>table = new C *[TABLE_SIZE](other.table);\nmemcpy(table, other.table, sizeof(C *)* TABLE_SIZE);\n</code></pre>\n\n<p>Try this insead:</p>\n\n<pre><code>table = new C *[TABLE_SIZE];\nmemcpy(table, other.table, sizeof(C *)* TABLE_SIZE);\n</code></pre>\n\n<p>I don't really understand why you would want to initialize the array's values, since that's what your <code>memcpy</code> is for anyway.</p>\n"}], "owner": {"reputation": 41, "user_id": 759913, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/9ad7df99c5a98f79e0559e301a600509?s=128&d=identicon&r=PG", "display_name": "user759913", "link": "https://stackoverflow.com/users/759913/user759913"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1426720758, "creation_date": 1426720356, "question_id": 29134410, "link": "https://stackoverflow.com/questions/29134410/copy-and-assignment-constructor-for-arrays-c-example", "title": "Copy and assignment constructor for arrays C++ example", "body": "<p>Need some help to write the copy and assignment constructors for my code. I get an error \"an array can only be initialized with an initializer-list\". Appreciate your help - thanks!</p>\n\n<pre><code>class B\n{\npublic:\n   C **table;\nB() \n{\n   table = new C *[TABLE_SIZE]();\n}\nB(const B&amp; other)\n{\n   table = new C *[TABLE_SIZE](other.table);\n   memcpy(table, other.table, sizeof(C *)* TABLE_SIZE);\n}\nB&amp; operator = (const B&amp; other)\n{\n  if (this == &amp;other)\n  {\n    return *this;\n  }\n  delete[] table;\n  table = new C *[TABLE_SIZE](other.table);\n  memcpy(table, other.table, sizeof(C *)* TABLE_SIZE);\n  return *this;\n}\n}\n</code></pre>\n"}, {"tags": ["c++", "vector"], "answers": [{"comments": [{"owner": {"reputation": 174, "user_id": 2994763, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9418f28c9ae09be8353871d8b2749c9e?s=128&d=identicon&r=PG&f=1", "display_name": "Owen Tourlamain", "link": "https://stackoverflow.com/users/2994763/owen-tourlamain"}, "edited": false, "score": 0, "creation_date": 1426730888, "post_id": 29134363, "comment_id": 46497075, "body": "I have a vector of objects that all need to read an object their parent holds, that gets updated constantly, so they need a pointer to that object, which is the 2d vector."}], "owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": true, "score": 0, "last_activity_date": 1426720124, "creation_date": 1426720124, "answer_id": 29134363, "question_id": 29134347, "link": "https://stackoverflow.com/questions/29134347/accessing-member-functions-in-a-vector-of-vectors-of-objects/29134363#29134363", "title": "Accessing member functions in a vector of vectors of objects", "body": "<p><code>vec</code> is a pointer, so</p>\n\n<pre><code>(*vec)[x][y].get();\n</code></pre>\n\n<p>or</p>\n\n<pre><code>vec-&gt;operator[](x)[y].get();\n</code></pre>\n\n<p>You have to ask yourself <em>why</em> you have a pointer to a vector.</p>\n"}], "owner": {"reputation": 174, "user_id": 2994763, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9418f28c9ae09be8353871d8b2749c9e?s=128&d=identicon&r=PG&f=1", "display_name": "Owen Tourlamain", "link": "https://stackoverflow.com/users/2994763/owen-tourlamain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 29134363, "answer_count": 1, "score": -1, "last_activity_date": 1426720124, "creation_date": 1426720048, "question_id": 29134347, "link": "https://stackoverflow.com/questions/29134347/accessing-member-functions-in-a-vector-of-vectors-of-objects", "title": "Accessing member functions in a vector of vectors of objects", "body": "<p>I have a pointer to 2d vector of type <code>cell</code>:</p>\n\n<pre><code>&lt;vector&lt;vector&lt;cell&gt; &gt; *vec;\n</code></pre>\n\n<p>How do I access <code>cell</code>'s member functions? I have tried:</p>\n\n<pre><code>vec[x][y].get();\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>vac[x][y]-&gt;get();\n</code></pre>\n\n<p>But neither works, and google isn't helping.</p>\n"}, {"tags": ["c++", "c", "pointers"], "comments": [{"owner": {"reputation": 2469, "user_id": 778117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cw2EQ.jpg?s=128&g=1", "display_name": "Fatih BAKIR", "link": "https://stackoverflow.com/users/778117/fatih-bakir"}, "edited": false, "score": 2, "creation_date": 1426720056, "post_id": 29134313, "comment_id": 46494169, "body": "Can you provide any actual code snippet, instead of hints?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1426721200, "post_id": 29134313, "comment_id": 46494552, "body": "Which language are you using? (C and C++ have different rules about incomplete array types in some cases)."}], "answers": [{"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 1, "last_activity_date": 1426720147, "creation_date": 1426720147, "answer_id": 29134370, "question_id": 29134313, "link": "https://stackoverflow.com/questions/29134313/how-to-initialize-a-variable-which-is-a-pointer-to-array-of-pointers-to-structur/29134370#29134370", "title": "How to initialize a variable which is a pointer to array of pointers to structure?", "body": "<p>If the function requires a <code>StructureName *(*parameterName)[]</code> parameter, then the only way to pass a pointer to a <code>StructureName * MagneticModels[1]</code> array to such function is to use a <code>&amp;</code> operator with an explicit cast</p>\n\n<pre><code>foo((StructureName *(*)[]) &amp;MagneticModels);\n</code></pre>\n\n<p>(It can be made more readable by using a <code>typedef</code> to the array type).</p>\n\n<p>Another loophole is based on the fact that an array can be <em>declared</em> with unknown size and then <em>defined</em> with a specific size. As long as only the \"unknown size\" declaration is known to the compiler at the point of the call, it will allow you to pass it without a cast</p>\n\n<pre><code>extern StructureName * MagneticModels[]; // declaration\n\nvoid foo(StructureName * MagneticModels[]);\n\nint main()\n{\n  foo(&amp;MagneticModels);\n}\n\nStructureName * MagneticModels[1] = { ... }; // definition\n</code></pre>\n\n<p>The applicability of this loophole is, of course, very limited.</p>\n"}, {"comments": [{"owner": {"reputation": 169, "user_id": 4014692, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/gSCix.png?s=128&g=1", "display_name": "Bartek", "link": "https://stackoverflow.com/users/4014692/bartek"}, "edited": false, "score": 0, "creation_date": 1426777259, "post_id": 29134732, "comment_id": 46518357, "body": "Thanks a lot! I thought that C is always compatible with C++. Good to learn something new. And now it works :)"}], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1426722080, "creation_date": 1426722080, "answer_id": 29134732, "question_id": 29134313, "link": "https://stackoverflow.com/questions/29134313/how-to-initialize-a-variable-which-is-a-pointer-to-array-of-pointers-to-structur/29134732#29134732", "title": "How to initialize a variable which is a pointer to array of pointers to structure?", "body": "<p>In C the following code is legal (where <code>T</code> is your structure name or whatever):</p>\n\n<pre><code>void foo( T *(*ptr)[] )\n{ }\n\nint main()\n{\n    T *arr[1];\n    foo( &amp;arr );\n}\n</code></pre>\n\n<p>However that function prototype is illegal in C++ (let alone the call).</p>\n\n<p>If you are trying to write C code then make sure you are invoking the C compiler, not the C++ compiler.</p>\n\n<p>If you are trying to write C++ but call this function (whose header must be written in C and presumably the function was implemented in C also), then you will need to write a stub function which has a legal prototype in C++.</p>\n\n<p>For example:</p>\n\n<pre><code>// stub.h\nvoid foo2( T **ptr );    // preferably use \"extern C\" guards around this\n</code></pre>\n\n<p>and </p>\n\n<pre><code>// stub.c\n#include \"foo.h\"           // the troublesome function \n\nvoid foo2( T **ptr )\n{\n    foo( (T *(*)[]) ptr );\n}\n</code></pre>\n\n<p>This stub will be invoked by passing the address of the first element, rather than the address of the entire array:</p>\n\n<pre><code>T * MagneticModels[1];\nfoo2( MagneticModels );\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 4014692, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/gSCix.png?s=128&g=1", "display_name": "Bartek", "link": "https://stackoverflow.com/users/4014692/bartek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 29134732, "answer_count": 2, "score": -2, "last_activity_date": 1426722080, "creation_date": 1426719789, "last_edit_date": 1426720062, "question_id": 29134313, "link": "https://stackoverflow.com/questions/29134313/how-to-initialize-a-variable-which-is-a-pointer-to-array-of-pointers-to-structur", "title": "How to initialize a variable which is a pointer to array of pointers to structure?", "body": "<p>I need to call a function from a third party source. The function expects a parameter of the following type:</p>\n\n<pre><code>StructureName *(*parameterName)[]\n</code></pre>\n\n<p>In an example it is defined as array of pointers:</p>\n\n<pre><code>StructureName * MagneticModels[1]\n</code></pre>\n\n<p>It is passed to the function with \"&amp;\" operator. Unfortunately in Visual Studio 2013 it fails to compile:</p>\n\n<blockquote>\n  <p><code>Error C2664: (...) cannot convert argument (...) from 'StructureName *(*)[1]' to 'StructureName *(*)[]'</code></p>\n</blockquote>\n\n<p>So to get it to compile I added a new variable and passed it to the function:</p>\n\n<pre><code>StructureName *(*variableName)[];\n</code></pre>\n\n<p>Now it compiles without error but then I get a runtime error that the \"variableName\" is used without being initialized.</p>\n\n<p>I tried many ways to initialize that but I am not a C++ developer so it was real ordeal and after a day I did not get nowhere. Therefore, I would appreciate any help or suggestion.</p>\n"}, {"tags": ["c++", "animation", "design-patterns", "model-view-controller"], "answers": [{"comments": [{"owner": {"reputation": 682, "user_id": 2595546, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3f1ce15f8f7a099a8af69a2a97f58137?s=128&d=identicon&r=PG", "display_name": "Fly", "link": "https://stackoverflow.com/users/2595546/fly"}, "edited": false, "score": 0, "creation_date": 1426788318, "post_id": 29134329, "comment_id": 46525256, "body": "Thanks for the answer! This seems logical. Does it mean, that the animation of bones basically IS logic, and the rendering part really only renders &quot;static&quot; textures dependant on the location of the hitboxes/bones?  I guess so?"}], "owner": {"reputation": 2881, "user_id": 4188393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e91d6e6d88c0a2ae841cc5b70b7c9dda?s=128&d=identicon&r=PG&f=1", "display_name": "chrissukhram", "link": "https://stackoverflow.com/users/4188393/chrissukhram"}, "is_accepted": true, "score": 2, "last_activity_date": 1426719858, "creation_date": 1426719858, "answer_id": 29134329, "question_id": 29134282, "link": "https://stackoverflow.com/questions/29134282/mvc-pattern-in-games-animation/29134329#29134329", "title": "MVC Pattern in Games: Animation?", "body": "<p>Your animations are simply visual renderings of your model. You could have your entity enter a \"jumping\" state which will manipulate its y variable for its hitbox in the model. When you render the model, if your entity is in the jump state display its jump animation or image. </p>\n\n<p>You do not want to manipulate your hitboxes based on the animation but manipulate your animation based on the hitboxes. </p>\n"}], "owner": {"reputation": 682, "user_id": 2595546, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3f1ce15f8f7a099a8af69a2a97f58137?s=128&d=identicon&r=PG", "display_name": "Fly", "link": "https://stackoverflow.com/users/2595546/fly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 0, "accepted_answer_id": 29134329, "answer_count": 1, "score": 2, "last_activity_date": 1426719858, "creation_date": 1426719598, "question_id": 29134282, "link": "https://stackoverflow.com/questions/29134282/mvc-pattern-in-games-animation", "title": "MVC Pattern in Games: Animation?", "body": "<p>Let's say my game has entities, and let's say all of those entities have a collision-hitbox consisting of multiple shapes. Let's also assume skeletal animation is used and each collision-shape corresponds to one bone.\nI implemented the basic MVC pattern by having one data-container, renderer and controller for each Entity type, fE:</p>\n\n<pre><code>class MyEntity:public Entity{\n    public: int x, y, state; vector&lt;hitbox&gt; hitboxArray;\n\nclass MyEntityRenderer:public Renderer{\n    void render(){\n        ...\n    }\n}\nclass MyEntityController:public Controller {\n    update(){}\n    inputstuff(){}\n}\n</code></pre>\n\n<p>How can I now actually implement animations, if I want the hitboxes translations be modified depending on the animation and it's progress?</p>\n\n<p>If I only had an animation I would clearly put the whole stuff in the Renderer, but what now? How can I apply MVC to this problem?</p>\n"}, {"tags": ["c++", "function", "struct", "parameters"], "answers": [{"owner": {"reputation": 4091, "user_id": 26083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c3b4f3460b142d0ba37de98d1b04655?s=128&d=identicon&r=PG", "display_name": "haavee", "link": "https://stackoverflow.com/users/26083/haavee"}, "is_accepted": false, "score": 2, "last_activity_date": 1426719211, "creation_date": 1426719211, "answer_id": 29134205, "question_id": 29134176, "link": "https://stackoverflow.com/questions/29134176/c-simple-issue-to-do-with-structs-and-function-parameters/29134205#29134205", "title": "(C++) Simple issue to do with structs and function parameters", "body": "<p>Change this:</p>\n\n<pre><code>void takeInData(int questionInstance, Advertising aDay)\n</code></pre>\n\n<p>into this:</p>\n\n<pre><code>void takeInData(int questionInstance, Advertising&amp; aDay)\n</code></pre>\n\n<p>and it will work. The reason is that in your version, the paramater <code>aDay</code> is passed-by-value; i.e. a <em>copy</em> of the argument is passed to the function. So anything that <code>takeInData()</code> does to its version of <code>aDay</code> is done in the copy. After <code>takeInData()</code> returns, the copy (and the information therein) is lost.</p>\n\n<p>In the edited version, a reference to <code>aDay</code> is passed to the function. Now it will <em>reference</em> the variable that was passed, i.e. the variable in <code>main()</code>. Now all things <code>takeInData()</code> does, are stored in the value that is actually declared in <code>main()</code>.</p>\n"}], "owner": {"reputation": 101, "user_id": 4687517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e50358c19bc9448f343bce10696056e?s=128&d=identicon&r=PG&f=1", "display_name": "Anton A. Zabirko", "link": "https://stackoverflow.com/users/4687517/anton-a-zabirko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426719211, "creation_date": 1426719062, "question_id": 29134176, "link": "https://stackoverflow.com/questions/29134176/c-simple-issue-to-do-with-structs-and-function-parameters", "title": "(C++) Simple issue to do with structs and function parameters", "body": "<p>Struct Problem 1.cpp</p>\n\n<pre><code>    // Struct Problem 1.cpp : Defines the entry point for the console application.\n//\n\n#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include \"structs.h\"\n\ndouble calculateEarnings(Advertising aDay);\nvoid displayEarnings(int questionInstance, Advertising aDay);\nvoid mainQuestions();\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    mainQuestions();\n    return 0;\n}\n\ndouble calculateEarnings(Advertising aDay)\n{\n    std::cout &lt;&lt; aDay.usersClicked; //debug\n    return aDay.totalAdsShown * aDay.usersClicked * aDay.averagePerAd;\n}\n\nvoid takeInData(int questionInstance, Advertising aDay)\n{\n    if (questionInstance == 0)\n    {\n        std::cin &gt;&gt; aDay.totalAdsShown;\n    }\n    else\n        if (questionInstance == 1)\n        {\n            std::cin &gt;&gt; aDay.usersClicked;\n        }\n        else\n            if (questionInstance == 2)\n            {\n                std::cin &gt;&gt; aDay.averagePerAd;\n            }\n    std::cin;\n}\n\nvoid mainQuestions()\n{\n    static Advertising aToday;\n    aToday.totalAdsShown = 0;\n    aToday.usersClicked = 0.00;\n    aToday.averagePerAd = 00.00;\n\n    std::cout &lt;&lt; \"Welcome! Please input the advertising data for today.\" &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"How many ads were shown today?\" &lt;&lt; \"\\n\";\n    takeInData(0, aToday);\n    std::cout &lt;&lt; \"What percentage of users clicked our ads? (decimal form)\" &lt;&lt; \"\\n\";\n    takeInData(1, aToday);\n    std::cout &lt;&lt; \"What were the average earnings per ad? (ex: 5.15)\" &lt;&lt; \"\\n\";\n    takeInData(2, aToday);\n</code></pre>\n\n<p>structs.h</p>\n\n<pre><code>    #ifndef STRUCTS_H\n#define STRUCTS_H\n\ntypedef double percentage;\ntypedef double USD;\n\nstruct Advertising\n{\n    int totalAdsShown;\n    percentage usersClicked;\n    USD averagePerAd;\n};\n\n#endif\n</code></pre>\n\n<p>Basically, the data is not saved when called by 'cin'. I added a line to print the aDay.usersClicked value and it prints to 0. I am learning c++, so the problem is very basic. I appreciate all tips!</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++", "c-preprocessor", "c++14", "variadic-macros", "variadic-functions"], "comments": [{"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 3, "creation_date": 1426719238, "post_id": 29134152, "comment_id": 46493931, "body": "To me, using two different constructurs behind one macro based on the number of arguments sounds pretty wrong. Unless one class is derived from the other, in which case some kind of overloaded/variadic argument factory or template with variadic argument factory function would be possible."}, {"owner": {"reputation": 8029, "user_id": 3137499, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7acff2bbbdb9c51ea478377a0f6dcb03?s=128&d=identicon&r=PG&f=1", "display_name": "aruisdante", "link": "https://stackoverflow.com/users/3137499/aruisdante"}, "edited": false, "score": 1, "creation_date": 1426719859, "post_id": 29134152, "comment_id": 46494114, "body": "Especially if the two classes are not siblings of each other (from common base class), since then you&#39;d have to know what the return type of the macro is anyway, at which point you could simply call the correct macro. An overloaded factory sounds like a much better option in either case. Macros should really only be used (in C++) where the pre-compile textual replacement part is important for functional correctness."}, {"owner": {"reputation": 1683, "user_id": 1098041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3277172b7213117c165e42611c0749a?s=128&d=identicon&r=PG", "display_name": "F&#233;lix Cantournet", "link": "https://stackoverflow.com/users/1098041/f%c3%a9lix-cantournet"}, "edited": false, "score": 0, "creation_date": 1426722031, "post_id": 29134152, "comment_id": 46494822, "body": "I agree this looks like a bad idea. Why do you want to use macros there ?"}, {"owner": {"reputation": 4644, "user_id": 1347646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cefb658b470900db50f75bb3187c6585?s=128&d=identicon&r=PG", "display_name": "mic_e", "link": "https://stackoverflow.com/users/1347646/mic-e"}, "edited": false, "score": 0, "creation_date": 1426722284, "post_id": 29134152, "comment_id": 46494907, "body": "This is part of a logging system that allows two ways of creating a message: One to be filled with <code>&lt;&lt;</code> and one to be filled by a traditional format string. The <code>&lt;&lt;</code> one requires an internal <code>std::stringstream</code>."}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 1, "creation_date": 1426790810, "post_id": 29134152, "comment_id": 46526567, "body": "Do not have time to write a full answer at the moment, but you check out my implementation here: <a href=\"https://github.com/SuperV1234/SSVUtils/blob/master/include/SSVUtils/Core/Preprocessor/\" rel=\"nofollow noreferrer\">github.com/SuperV1234/SSVUtils/blob/master/include/SSVUtils/&zwnj;&#8203;&hellip;</a>  <code>ArgCount.hpp</code> is a macro that returns the count of its argument. Its implementation is in <code>Generated.hpp</code>"}, {"owner": {"reputation": 4644, "user_id": 1347646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cefb658b470900db50f75bb3187c6585?s=128&d=identicon&r=PG", "display_name": "mic_e", "link": "https://stackoverflow.com/users/1347646/mic-e"}, "reply_to_user": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1426792663, "post_id": 29134152, "comment_id": 46527500, "body": "@VittorioRomeo: Unfortunately your implementation seems to work only up to 128 arguments. In practice, it should be enough..."}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1426793791, "post_id": 29134152, "comment_id": 46528092, "body": "@mic_e: You can generate code for more than 128 arguments, I created this script: <a href=\"https://github.com/SuperV1234/SSVUtils/blob/master/extra/ssvpp_generator.cpp\" rel=\"nofollow noreferrer\">github.com/SuperV1234/SSVUtils/blob/master/extra/&hellip;</a>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1428110034, "post_id": 29134152, "comment_id": 47051554, "body": "Are you really going to use more than 128 arguments? If so, I&#39;m <i>very</i> glad I&#39;m not going to have to work with your code!"}, {"owner": {"reputation": 4644, "user_id": 1347646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cefb658b470900db50f75bb3187c6585?s=128&d=identicon&r=PG", "display_name": "mic_e", "link": "https://stackoverflow.com/users/1347646/mic-e"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1428146676, "post_id": 29134152, "comment_id": 47058627, "body": "@JonathanLeffler: No, with very high certainity I will never have a function with more than 6 arguments - with the possible exception of constructors. However, I would be <i>very</i> glad if I didn&#39;t have to work with code that randomly fails with a near-undebuggable preprocessor error once you use it in a legal, but uncommon way."}], "answers": [{"comments": [{"owner": {"reputation": 4644, "user_id": 1347646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cefb658b470900db50f75bb3187c6585?s=128&d=identicon&r=PG", "display_name": "mic_e", "link": "https://stackoverflow.com/users/1347646/mic-e"}, "edited": false, "score": 0, "creation_date": 1428063524, "post_id": 29356476, "comment_id": 47033502, "body": "Also, <code>M(0,1,2,3,4,5,6,7,&quot;foo&quot;)</code> will result in <code>error: pasting &quot;IS_1_&quot; and &quot;&quot;foo&quot;&quot; does not give a valid preprocessing token</code>"}, {"owner": {"reputation": 15972, "user_id": 375343, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c102cedf3c930e6c4079f52d8d261b8d?s=128&d=identicon&r=PG", "display_name": "Paul Fultz II", "link": "https://stackoverflow.com/users/375343/paul-fultz-ii"}, "reply_to_user": {"reputation": 4644, "user_id": 1347646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cefb658b470900db50f75bb3187c6585?s=128&d=identicon&r=PG", "display_name": "mic_e", "link": "https://stackoverflow.com/users/1347646/mic-e"}, "edited": false, "score": 0, "creation_date": 1428077875, "post_id": 29356476, "comment_id": 47040677, "body": "That is because it has a limit of up to 8 arguments. You need to extend the <code>NARGS_SEQ</code> to handle more(the max is 64)."}, {"owner": {"reputation": 4644, "user_id": 1347646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cefb658b470900db50f75bb3187c6585?s=128&d=identicon&r=PG", "display_name": "mic_e", "link": "https://stackoverflow.com/users/1347646/mic-e"}, "edited": false, "score": 0, "creation_date": 1428146804, "post_id": 29356476, "comment_id": 47058663, "body": "Unfortunately then your solution isn&#39;t much better than the various answers that were given in the comments, or linked in the question :|"}, {"owner": {"reputation": 4644, "user_id": 1347646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cefb658b470900db50f75bb3187c6585?s=128&d=identicon&r=PG", "display_name": "mic_e", "link": "https://stackoverflow.com/users/1347646/mic-e"}, "edited": false, "score": 0, "creation_date": 1428147069, "post_id": 29356476, "comment_id": 47058721, "body": "I&#39;m beginning to suspect that - despite including at least 3 turing-complete languages - C++14 is incapable of this."}, {"owner": {"reputation": 15972, "user_id": 375343, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c102cedf3c930e6c4079f52d8d261b8d?s=128&d=identicon&r=PG", "display_name": "Paul Fultz II", "link": "https://stackoverflow.com/users/375343/paul-fultz-ii"}, "reply_to_user": {"reputation": 4644, "user_id": 1347646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cefb658b470900db50f75bb3187c6585?s=128&d=identicon&r=PG", "display_name": "mic_e", "link": "https://stackoverflow.com/users/1347646/mic-e"}, "edited": false, "score": 0, "creation_date": 1428173279, "post_id": 29356476, "comment_id": 47066289, "body": "Your question noted nothing about needing more than 64 arguments. If you need more than that then you need to use a sequence instead. I&#39;ll update my answer, in a bit."}, {"owner": {"reputation": 4644, "user_id": 1347646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cefb658b470900db50f75bb3187c6585?s=128&d=identicon&r=PG", "display_name": "mic_e", "link": "https://stackoverflow.com/users/1347646/mic-e"}, "edited": false, "score": 0, "creation_date": 1428176074, "post_id": 29356476, "comment_id": 47067070, "body": "My question noted that all other answers only work for a finite number of args."}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 4644, "user_id": 1347646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cefb658b470900db50f75bb3187c6585?s=128&d=identicon&r=PG", "display_name": "mic_e", "link": "https://stackoverflow.com/users/1347646/mic-e"}, "edited": false, "score": 0, "creation_date": 1428176991, "post_id": 29356476, "comment_id": 47067362, "body": "@mic_e: There really is no known way of supporting an infinite number of arguments. Just create a generation script that generates <code>NARGS</code> for a number of arguments you desire. Make it generate preprocessor code for 512 arguments and you&#39;re set for life. <a href=\"https://github.com/SuperV1234/SSVUtils/blob/master/extra/ssvpp_generator.cpp#L109-L133\" rel=\"nofollow noreferrer\">Example.</a>"}, {"owner": {"reputation": 15972, "user_id": 375343, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c102cedf3c930e6c4079f52d8d261b8d?s=128&d=identicon&r=PG", "display_name": "Paul Fultz II", "link": "https://stackoverflow.com/users/375343/paul-fultz-ii"}, "reply_to_user": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1428177530, "post_id": 29356476, "comment_id": 47067510, "body": "@VittorioRomeo C limits the number of arguments to 127, so using over 64 may not be portable. Of course, I have never reached that limit in my code."}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1428177821, "post_id": 29356476, "comment_id": 47067601, "body": "@Paul: Didn&#39;t know about the C 127 argument limit. Does the C++ standard have a similar limitation?"}], "owner": {"reputation": 15972, "user_id": 375343, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c102cedf3c930e6c4079f52d8d261b8d?s=128&d=identicon&r=PG", "display_name": "Paul Fultz II", "link": "https://stackoverflow.com/users/375343/paul-fultz-ii"}, "is_accepted": false, "score": 1, "last_activity_date": 1428177190, "last_edit_date": 1428177190, "creation_date": 1427750250, "answer_id": 29356476, "question_id": 29134152, "link": "https://stackoverflow.com/questions/29134152/overloading-macros-with-variadic-arguments/29356476#29356476", "title": "Overloading macros with variadic arguments", "body": "<p>Simple. We just do a little probing to find out if a token is <code>1</code>:</p>\n\n<pre><code>#define CAT(a, ...) PRIMITIVE_CAT(a, __VA_ARGS__)\n#define PRIMITIVE_CAT(a, ...) a ## __VA_ARGS__\n\n#define CHECK_N(x, n, ...) n\n#define CHECK(...) CHECK_N(__VA_ARGS__, 0,)\n#define PROBE(x) x, 1,\n\n#define IS_1(x) CHECK(PRIMITIVE_CAT(IS_1_, x))\n#define IS_1_1 PROBE(~)\n</code></pre>\n\n<p>So <code>IS_1</code> expands to <code>1</code> if the token is a <code>1</code>, otherwise it expands to <code>0</code>.\nSo next, count the number of arguments(up to 8):</p>\n\n<pre><code>#define NARGS_SEQ(_1,_2,_3,_4,_5,_6,_7,_8,N,...) N\n#define NARGS(...) NARGS_SEQ(__VA_ARGS__, 8, 7, 6, 5, 4, 3, 2, 1)\n</code></pre>\n\n<p>Then overload on whether it's equal to <code>1</code> or not:</p>\n\n<pre><code>#define M_1 f\n#define M_0 g\n\n#define M(...) CAT(M_, IS_1(NARGS(__VA_ARGS__)))(__VA_ARGS__)\n</code></pre>\n\n<p>So then you can call <code>M</code> like this:</p>\n\n<pre><code>M(x) // Expands to f(x)\nM(x, \"%d%d%d\", 1, 2, 3) // Expands to g(x, \"%d%d%d\", 1, 2, 3)\n</code></pre>\n\n<p>Now, you can only count up to 64 arguments(my example counts up to 8), for standard C preprocessor(gcc can count up to 32767 arguments). If you need to have more arguments than it is better to use a sequence, which has no limit. So first write a method to convert the sequence back to arguments using sequence iteration:</p>\n\n<pre><code>#define TO_ARGS(seq) TO_ARGS_END(TO_ARGS_1 seq)\n#define TO_ARGS_END(...) TO_ARGS_END_I(__VA_ARGS__)\n#define TO_ARGS_END_I(...) __VA_ARGS__ ## _END\n#define TO_ARGS_1(x) x TO_ARGS_2  \n#define TO_ARGS_2(x) , x TO_ARGS_3  \n#define TO_ARGS_3(x) , x TO_ARGS_2  \n#define TO_ARGS_1_END\n#define TO_ARGS_2_END\n#define TO_ARGS_3_END\n</code></pre>\n\n<p>Next define the <code>M</code> macro to overload on whether there is one element in the sequence:</p>\n\n<pre><code>#define IS_PAREN(x) CHECK(IS_PAREN_PROBE x)\n#define IS_PAREN_PROBE(...) PROBE(~)\n\n#define EAT(...)\n\n#define M_1(seq) g(TO_ARGS(seq))\n#define M_0(seq) f(TO_ARGS(seq))\n\n#define M(seq) CAT(M_, IS_PAREN(EAT seq))(seq)\n</code></pre>\n\n<p>And then you can call it like this:</p>\n\n<pre><code>M((x)) // Expands to f(x)\nM((x)(\"%d%d%d\")(1)(2)(3)) // Expands to g(x, \"%d%d%d\", 1, 2, 3)\n</code></pre>\n\n<p>Of course in C++14 if you don't need source information then you can use variadiac templates instead:</p>\n\n<pre><code>template&lt;class T&gt;\nauto M(T&amp;&amp; xs) -&gt; decltype(f(std::forward&lt;T&gt;(x)))\n{\n    return f(std::forward&lt;T&gt;(x));\n}\n\ntemplate&lt;class T, class U, class... Ts&gt;\nauto M(T&amp;&amp; x, U&amp;&amp; y, Ts&amp;&amp;... xs) -&gt; decltype(g(std::forward&lt;T&gt;(x), std::forward&lt;U&gt;(y), std::forward&lt;Ts&gt;(xs)...))\n{\n    return g(std::forward&lt;T&gt;(x), std::forward&lt;U&gt;(y),std::forward&lt;Ts&gt;(xs)...);\n}\n</code></pre>\n\n<p>Or for constructors:</p>\n\n<pre><code>class M : f, g\n{\n    template&lt;class T&gt;\n    M(T&amp;&amp; xs) : f(std::forward&lt;T&gt;(x))\n    {}\n\n    template&lt;class T, class U, class... Ts&gt;\n    M(T&amp;&amp; x, U&amp;&amp; y, Ts&amp;&amp;... xs) : g(std::forward&lt;T&gt;(x), std::forward&lt;U&gt;(y), std::forward&lt;Ts&gt;(xs)...)\n    {}\n};\n</code></pre>\n"}], "owner": {"reputation": 4644, "user_id": 1347646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cefb658b470900db50f75bb3187c6585?s=128&d=identicon&r=PG", "display_name": "mic_e", "link": "https://stackoverflow.com/users/1347646/mic-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 498, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1467710547, "creation_date": 1426718939, "last_edit_date": 1495535334, "question_id": 29134152, "link": "https://stackoverflow.com/questions/29134152/overloading-macros-with-variadic-arguments", "title": "Overloading macros with variadic arguments", "body": "<p>I'm trying to build a macro <code>M</code> which will expand to one of two possibilities, depeding on whether it has one, or more than one, arguments:</p>\n\n<pre><code>M(x)\n</code></pre>\n\n<p>should expand to</p>\n\n<pre><code>f(x)\n</code></pre>\n\n<p>While</p>\n\n<pre><code>M(x, \"%d%d%d\", 1, 2, 3)\n</code></pre>\n\n<p>should expand to</p>\n\n<pre><code>g(x, \"%d%d%d\", 1, 2, 3)\n</code></pre>\n\n<p>Where the function signatures are</p>\n\n<pre><code>f(int x);\ng(int x, const char *fmt, ...);\n</code></pre>\n\n<p>There are <a href=\"https://stackoverflow.com/questions/16683146/can-macros-be-overloaded-by-number-of-arguments\">various</a> <a href=\"https://stackoverflow.com/questions/11761703/overloading-macro-on-number-of-arguments\">answers</a> regarding the \"overloading\" of macros if the argument count is known; however their methods of determining the length of <code>__VA_ARGS__</code> all work only to a finite, chosen number.</p>\n\n<p>Is there any trick that might make a similar approach work for my \"one argument / more than 1 arguments\" case?</p>\n\n<p>Note:</p>\n\n<p>Overloading the functions is not an option because in my case they are actually constructors for two different classes.</p>\n"}, {"tags": ["c++", "mingw-w64"], "answers": [{"owner": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "is_accepted": true, "score": 0, "last_activity_date": 1426783391, "creation_date": 1426783391, "answer_id": 29150305, "question_id": 29134150, "link": "https://stackoverflow.com/questions/29134150/variable-not-declared-in-this-scope-mingw-w64/29150305#29150305", "title": "variable not declared in this scope - Mingw w64", "body": "<p>This definition is present in float.h .It seems that mingw64 attempts to look for this definition in float.h  present in <code>C:\\mingw64\\x86_64-w64-mingw32\\include</code> however this definition is present in the file 'C:\\mingw64\\x86_64-w64-mingw32\\include'. In order to resolve this issue I copied the definition to the actual source file.</p>\n"}], "owner": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1163, "favorite_count": 0, "accepted_answer_id": 29150305, "answer_count": 1, "score": 1, "last_activity_date": 1426783391, "creation_date": 1426718907, "last_edit_date": 1426726594, "question_id": 29134150, "link": "https://stackoverflow.com/questions/29134150/variable-not-declared-in-this-scope-mingw-w64", "title": "variable not declared in this scope - Mingw w64", "body": "<p>I am getting this error in Mingw 64 bit</p>\n\n<pre><code> error: '_controlfp' was not declared in this scope\n</code></pre>\n\n<p>I tried including <code>float.h</code> using</p>\n\n<pre><code>#include &lt;float.h&gt;\n</code></pre>\n\n<p>This is my statement</p>\n\n<pre><code> uint32_t old;\n_controlfp_s(&amp;old, _PC_64, _MCW_PC);\n</code></pre>\n\n<p>However I am still getting this issue. Also i added the path to the include directory of mingw as the first path to search. Any suggestions on how to resolve this issue.</p>\n"}, {"tags": ["c++", "c", "cuda", "gpu", "gpgpu"], "answers": [{"comments": [{"owner": {"reputation": 303, "user_id": 1979542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d90d4dccb128966acbe0628f2b65cf1?s=128&d=identicon&r=PG", "display_name": "yidiyidawu", "link": "https://stackoverflow.com/users/1979542/yidiyidawu"}, "edited": false, "score": 0, "creation_date": 1427147263, "post_id": 29146164, "comment_id": 46651038, "body": "So the granularity so far is in page basis(4k) right? if I only want to copy 4 bytes, it will still copy redundant data?"}, {"owner": {"reputation": 4092, "user_id": 655457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffbb6f23243f2e0651b9b653c47e10b5?s=128&d=identicon&r=PG", "display_name": "ArchaeaSoftware", "link": "https://stackoverflow.com/users/655457/archaeasoftware"}, "reply_to_user": {"reputation": 303, "user_id": 1979542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d90d4dccb128966acbe0628f2b65cf1?s=128&d=identicon&r=PG", "display_name": "yidiyidawu", "link": "https://stackoverflow.com/users/1979542/yidiyidawu"}, "edited": false, "score": 0, "creation_date": 1427221102, "post_id": 29146164, "comment_id": 46686184, "body": "Yes, there are two issues in play. One is that the hardware really does not support tracking memory accesses that are finer-grained than a page. The other is that even for a 4K page (as opposed to say 4 bytes), the system spends a miniscule amount of time copying data as opposed to in other overhead operations. For example, for small copies, it often takes the driver longer to compose the hardware commands to do the copy than it takes the hardware to copy the data."}, {"owner": {"reputation": 303, "user_id": 1979542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d90d4dccb128966acbe0628f2b65cf1?s=128&d=identicon&r=PG", "display_name": "yidiyidawu", "link": "https://stackoverflow.com/users/1979542/yidiyidawu"}, "edited": false, "score": 0, "creation_date": 1427331050, "post_id": 29146164, "comment_id": 46739737, "body": "Thanks for sharing your knowledge"}], "owner": {"reputation": 4092, "user_id": 655457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffbb6f23243f2e0651b9b653c47e10b5?s=128&d=identicon&r=PG", "display_name": "ArchaeaSoftware", "link": "https://stackoverflow.com/users/655457/archaeasoftware"}, "is_accepted": true, "score": 1, "last_activity_date": 1426772454, "creation_date": 1426772454, "answer_id": 29146164, "question_id": 29134132, "link": "https://stackoverflow.com/questions/29134132/is-cudamallocmanaged-smart-enough-to-not-copy-data-which-is-not-needed/29146164#29146164", "title": "Is cudamallocmanaged smart enough to not copy data which is not needed?", "body": "<p>The answer to your question is generally Yes, on a page (usually 4K) basis.  For CPU->GPU copies, the driver copies CPU pages lazily by tracking dirty bits.  After a kernel launch, the managed memory is marked nonresident so CPU accesses will fault.  Then after a CPU/GPU sync operation, it is left nonresident and the driver resolves page faults by copying the accessed page back from device memory.  </p>\n\n<p>This is based on a study I did sometime last year, so it may have changed since then.  Given the semantics of managed memory, NVIDIA has many different implementation options and you can expect them to change as NVIDIA optimizes their code.</p>\n\n<p>I measured block GPU->CPU copies of managed memory at 500MB/s, 25x slower than a pinned memcpy would be, so expect changes as NVIDIA figures out how to optimize those code paths.  For example, if they do dirty bit tracking on the GPU side, they could speculatively copy pages written by the GPU back to CPU memory.  That would deliver higher bandwidth, but could cause superfluous copies of data that is never accessed.</p>\n"}], "owner": {"reputation": 303, "user_id": 1979542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d90d4dccb128966acbe0628f2b65cf1?s=128&d=identicon&r=PG", "display_name": "yidiyidawu", "link": "https://stackoverflow.com/users/1979542/yidiyidawu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 474, "favorite_count": 0, "accepted_answer_id": 29146164, "answer_count": 1, "score": 0, "last_activity_date": 1426772454, "creation_date": 1426718820, "question_id": 29134132, "link": "https://stackoverflow.com/questions/29134132/is-cudamallocmanaged-smart-enough-to-not-copy-data-which-is-not-needed", "title": "Is cudamallocmanaged smart enough to not copy data which is not needed?", "body": "<p>The doubt I have about cudamallocmanaged is that if I malloc N numbers, after GPU finish a operation on those numbers(let say a scan operation), I only need the last number in the array and access only this number in the host. Will cudamallocmanaged only copy this number back? </p>\n\n<p>I did a test and my answer is no. So I think in this case cudamalloc/free/copy is faster than cudamallocmanaged. Correct me if I am wrong.</p>\n\n<p>Then this following question is: How does it work to know when and how much to copy back and forth?</p>\n"}, {"tags": ["c++", "linked-list"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 5, "creation_date": 1426718829, "post_id": 29134117, "comment_id": 46493793, "body": "Do you have a question?"}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 1, "creation_date": 1426719862, "post_id": 29134117, "comment_id": 46494115, "body": "Assignment operator returns non-const reference."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1426720330, "post_id": 29134117, "comment_id": 46494259, "body": "In addition to this, you should be implementing the copy constructor and destructor before implementing the assignment operator.  Why?  Because when you leave the assignment operator for last, it is trivial to implement by using the existing copy constructor and destructor."}], "owner": {"reputation": 11, "user_id": 4565278, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-wQhak6VCLOQ/AAAAAAAAAAI/AAAAAAAAAF4/RroFj2XF9Jo/photo.jpg?sz=128", "display_name": "Francis Atienza", "link": "https://stackoverflow.com/users/4565278/francis-atienza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 223, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1426718759, "creation_date": 1426718759, "question_id": 29134117, "link": "https://stackoverflow.com/questions/29134117/linked-list-deep-copy-problems", "title": "Linked List Deep Copy Problems", "body": "<p>I am having trouble with overloading the operator =. </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>template &lt;class T&gt;\r\nclass Node\r\n{\r\npublic:\r\n  T m_data;                  // Data to be stored\r\n  Node&lt;T&gt;* m_next;     // Pointer to the next element in the list\r\n\r\n\r\n  // Purpose: Default constructor\r\n  // Postconditions: next pointer set to NULL\r\n  // ---INLINE---\r\n  Node() : m_next(NULL) {}\r\n\r\n  // Purpose: Auxiliaty constructor, construct from parameters\r\n  // Postconditions: data and next pointer set to parameters\r\n  // ---INLINE---\r\n  Node(const T&amp; x, Node&lt;T&gt;* p) \r\n             : m_data(x), m_next(p) {}\r\n\r\n};\r\n\r\ntemplate &lt;class T&gt;\r\nclass LinkedList\r\n{\r\n \r\npublic:\r\n\r\n  Node&lt;T&gt;* head;     // Pointer to the head of the list\r\n\r\n    // Purpose: Default constructor\r\n    // Postconditions: head pointer set to NULL\r\n    // ---INLINE---\r\n  LinkedList() : head(NULL) {}\r\n\r\n// --------\r\n// ---- Big 3 Member Functions ---\r\n// --------\r\n\r\n// Purpose: Destructor\r\n// IMPORTANT:: For didactic purposes, the destructor is left empty.\r\n// YOU are expected to implement function clear() to de-allocate the list\r\n\t// --INLINE\r\n  ~LinkedList() {}\r\n\r\n// Purpose: performs a deep copy of the data from rhs into this linked list\r\n// Parameters: rhs is linked list to be copied\r\n// Returns: *this\r\n// Postconditions: this list contains same data values (in the same order)\r\n//     as are in rhs; any memory previously used by this list has been\r\n//     deallocated.\r\n  const LinkedList&lt;T&gt;&amp;  operator= (const LinkedList&lt;T&gt;&amp; rhs);\r\n\r\n// Purpose: copy constructor\r\n// Parameters: rhs is the LinkedList that is to be copied\r\n// Postconditions: this list contains same data values (in same order) \r\n//      as in rhs.\r\n  LinkedList(const LinkedList&lt;T&gt;&amp; rhs);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Those are the above given. My current implementation does not provide a deep Copy.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>template&lt;class T&gt;\r\nconst LinkedList&lt;T&gt;&amp; LinkedList&lt;T&gt;::operator =(const LinkedList&lt;T&gt;&amp; rhs)\r\n{\r\n\tif(this != &amp;rhs)\r\n\t{\r\n\t  if(head != NULL)\r\n\t  {\r\n\t    clear();\r\n\t  }\r\n\t  Node&lt;T&gt;* current = rhs.head;\r\n\t  while (current != NULL)\r\n\t  {\r\n\t    insert_front(current -&gt; m_data);\r\n\t    current = current -&gt; m_next;\r\n\t  }\r\n\t  head = current;\r\n\t}  \r\n\treturn(*this);\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["c++", "windows", "nt-native-api"], "comments": [{"owner": {"reputation": 1179, "user_id": 4687466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ce36551a4b92edd40ac7b0c353a4e22?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Makarov", "link": "https://stackoverflow.com/users/4687466/mike-makarov"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1426757444, "post_id": 29134029, "comment_id": 46505523, "body": "I&#39;m using Visual Studio. I have another application (in C#) that uses NtQueryDirectoryInformationFile() \u2014 and there everything works fine, so I didn&#39;t expect any problems with C++ code. Actually I want to use NtOpenFile in that C# app, but I stuck with 0xc000000d response from NtCreateFile, so I decided to play around with it using WDK just to see what I&#39;m doing wrong on managed side."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1426802841, "post_id": 29134029, "comment_id": 46532446, "body": "What is the /SUBSYSTEM option set to?  (Project properties, under Linker, System, Subsystem.)  Also, have you tried using <a href=\"https://msdn.microsoft.com/en-us/library/bb432381%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">ntdll.lib as documented</a> rather than ntoskrnl.lib?"}, {"owner": {"reputation": 1179, "user_id": 4687466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ce36551a4b92edd40ac7b0c353a4e22?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Makarov", "link": "https://stackoverflow.com/users/4687466/mike-makarov"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1426892358, "post_id": 29134029, "comment_id": 46571805, "body": "Yes, this worked. Thank you! As I wrote below, I was confused by general &quot;proxy&quot; page for NtCreateFile redirecting to ZwCreateFile. It seems that where Zw* docs say one must link ntoskrnl.lib, in fact for NT* functions one must link ntdll.lib."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1426910968, "post_id": 29134029, "comment_id": 46575235, "body": "I believe you would link to ntoskrnl.lib for a device driver, and presumably for a native executable as well, but it isn&#39;t intended for use by a Win32 application."}], "answers": [{"comments": [{"owner": {"reputation": 1179, "user_id": 4687466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ce36551a4b92edd40ac7b0c353a4e22?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Makarov", "link": "https://stackoverflow.com/users/4687466/mike-makarov"}, "edited": false, "score": 0, "creation_date": 1426891910, "post_id": 29175967, "comment_id": 46571666, "body": "Thanks, this helped. I was confused by general NtOpenFile page redirecting to <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff567011(v=vs.85).aspx\" rel=\"nofollow noreferrer\">ZwOpenFile</a> which tells to link ntkrnl.lib"}], "owner": {"reputation": 5459, "user_id": 3553031, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b72880023e6290ffd3bf5623ae79bebc?s=128&d=identicon&r=PG&f=1", "display_name": "user3553031", "link": "https://stackoverflow.com/users/3553031/user3553031"}, "is_accepted": true, "score": 2, "last_activity_date": 1426886321, "creation_date": 1426886321, "answer_id": 29175967, "question_id": 29134029, "link": "https://stackoverflow.com/questions/29134029/windows-native-development-debuggee-tries-to-load-werkernel-sys-from-system32/29175967#29175967", "title": "Windows native development: debuggee tries to load werkernel.sys from system32", "body": "<p>Linking <code>ntdll.lib</code> rather than <code>ntoskrnl.lib</code> worked for me when I had a similar problem.</p>\n"}, {"comments": [{"owner": {"reputation": 1179, "user_id": 4687466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ce36551a4b92edd40ac7b0c353a4e22?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Makarov", "link": "https://stackoverflow.com/users/4687466/mike-makarov"}, "edited": false, "score": 0, "creation_date": 1426892215, "post_id": 29176136, "comment_id": 46571763, "body": "This is a pretty old page you&#39;re referring to BTW. Nt/Zw functions are perfectly documented now. And if you want to know the reason to use native functions in this particular case - consider 0.35 sec for 2 calls to NtQueryDirectoryInformationFile() vs 12 sec (yes, twelve seconds!) for FindFirst/FindNext/FindClose. For NtOpenFile() I just hope it&#39;ll make the app even faster :)"}, {"owner": {"reputation": 1836, "user_id": 351861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540239cb3a1089fcb53aae8abea1cfdd?s=128&d=identicon&r=PG&f=1", "display_name": "specializt", "link": "https://stackoverflow.com/users/351861/specializt"}, "reply_to_user": {"reputation": 1179, "user_id": 4687466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ce36551a4b92edd40ac7b0c353a4e22?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Makarov", "link": "https://stackoverflow.com/users/4687466/mike-makarov"}, "edited": false, "score": 0, "creation_date": 1426892719, "post_id": 29176136, "comment_id": 46571915, "body": "using internal APIs does not make your application faster - thats a hugely mislead conclusion. The reason that some internal functions SEEM to be faster is a rather uncomfortable truth : wrong usage of the public API. You will not be able to gain more than a few microseconds for each Nt/Zw-call compared to the standard equivalents, your example pretty much is proof for you using the API in a wrong way. WINAPI is <i>extremely</i> hard to master, only very few actually know how to do it properly. Oh and you&#39;re using the word &quot;native&quot; incorrectly - there are no non-native functions in WINAPI."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1426910900, "post_id": 29176136, "comment_id": 46575223, "body": "Microsoft use the word &quot;native&quot; in at least two different ways.  One of them is the way Mike is using it - to describe functions that are part of the kernel as opposed to being part of a subsystem (such as Win32) or applications that run directly under the kernel rather than within a subsystem.  See, for example, <a href=\"https://msdn.microsoft.com/en-us/library/fcc1zstk.aspx\" rel=\"nofollow noreferrer\">the /SUBSYSTEM option</a>."}, {"owner": {"reputation": 1836, "user_id": 351861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540239cb3a1089fcb53aae8abea1cfdd?s=128&d=identicon&r=PG&f=1", "display_name": "specializt", "link": "https://stackoverflow.com/users/351861/specializt"}, "edited": false, "score": 0, "creation_date": 1426938734, "post_id": 29176136, "comment_id": 46580876, "body": "thats actually somewhat interesting; yet it still is pretty error-prone and useless to call &quot;Native&quot; functions directly - if your app is running slow 99,9999999999999999999999999% of the time it is your own fault. The &quot;Native&quot; API will be removed once they&#39;re able to do so, hence all of your applications will not work anymore in the foreseeable future."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "reply_to_user": {"reputation": 1179, "user_id": 4687466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ce36551a4b92edd40ac7b0c353a4e22?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Makarov", "link": "https://stackoverflow.com/users/4687466/mike-makarov"}, "edited": false, "score": 0, "creation_date": 1426971995, "post_id": 29176136, "comment_id": 46590903, "body": "@Mike: in the particular case of enumerating a directory, you should probably investigate GetFileInformationByHandleEx."}], "owner": {"reputation": 1836, "user_id": 351861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540239cb3a1089fcb53aae8abea1cfdd?s=128&d=identicon&r=PG&f=1", "display_name": "specializt", "link": "https://stackoverflow.com/users/351861/specializt"}, "is_accepted": false, "score": 1, "last_activity_date": 1426887111, "creation_date": 1426887111, "answer_id": 29176136, "question_id": 29134029, "link": "https://stackoverflow.com/questions/29134029/windows-native-development-debuggee-tries-to-load-werkernel-sys-from-system32/29176136#29176136", "title": "Windows native development: debuggee tries to load werkernel.sys from system32", "body": "<p><code>NtOpenFile</code> is what Microsoft calls \"internal API\", it should not be used for productional software, neither should it be used for experimentation or be used <strong>at all</strong>, these functions are subject to change between each SP-release or major windows-version. </p>\n\n<p>If you want to open files in user-mode <em>(WDK and usermode? Does not compute ... unless you're actually writing for UMDF)</em> you are advised to use  <code>OpenFile</code> :\n<br/><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365430(v=vs.85).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/desktop/aa365430(v=vs.85).aspx</a>\n<br/> or in your driver :<br/> <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff567011(v=vs.85).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/hardware/ff567011(v=vs.85).aspx</a>. </p>\n\n<p>tl;dr : dont use these old functions, they arent meant to be used.</p>\n\n<p>Microsoft statement on \"internal\" API : <a href=\"https://msdn.microsoft.com/en-us/library/bb432200(v=vs.85).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/bb432200(v=vs.85).aspx</a></p>\n"}], "owner": {"reputation": 1179, "user_id": 4687466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ce36551a4b92edd40ac7b0c353a4e22?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Makarov", "link": "https://stackoverflow.com/users/4687466/mike-makarov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 427, "favorite_count": 1, "accepted_answer_id": 29175967, "answer_count": 2, "score": 2, "last_activity_date": 1426887111, "creation_date": 1426718282, "last_edit_date": 1426759337, "question_id": 29134029, "link": "https://stackoverflow.com/questions/29134029/windows-native-development-debuggee-tries-to-load-werkernel-sys-from-system32", "title": "Windows native development: debuggee tries to load werkernel.sys from system32", "body": "<p>I'm investigating the Windows Native API now, <code>Nt*/Zw*</code> methods. I downloaded the WDK, installed it and successfully compiled an application (x64, under Win 8.1 x64, VS2013). The only thing it does is a call to <code>NtOpenFile()</code>.</p>\n\n<p>To successfully compile/link it, I had to make the following changes to project properties (template Application For Drivers):</p>\n\n<ul>\n<li>Add includes folder from WDK</li>\n<li>Add Lib folder from WDK</li>\n<li>Tell linker to use ntoskrnl.lib</li>\n</ul>\n\n<p>Unexpectedly, upon running a debugger, I'm presented with error message \"The program can't start because C:\\Windows\\SYSTEM32\\werkernel.sys is missing from your computer. Try reinstalling the program to fix this problem.\"\nThe werkernel.sys obviously exists in system32\\drivers.</p>\n\n<p><strong>EDIT:</strong> To be clear, the mentioned error also occurs when launching the app by doubleclicking the icon.</p>\n\n<p>This load happens before any of my code, I can't find anything anywhere in internet nor in project properties on the file in question. So, to summarize, I have the following questions so far:</p>\n\n<ol>\n<li>Why werkernel.sys is being loaded at all for my application?</li>\n<li>Why is it being loaded from System32?</li>\n</ol>\n\n<p>I understand that it is possible to <code>mklink werkernel.sys drivers\\werkernel.sys</code>, but it feels like I'm doing somethig terribly wrong.</p>\n"}, {"tags": ["c++", "c++11", "gcc", "using-declaration"], "answers": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": true, "score": 2, "last_activity_date": 1426733676, "creation_date": 1426733676, "answer_id": 29136447, "question_id": 29133988, "link": "https://stackoverflow.com/questions/29133988/using-alias-for-reference-to-anonymous-structure-results-in-error/29136447#29136447", "title": "Using alias for reference to anonymous structure results in error", "body": "<p>This looks like a <code>gcc</code> bug, the grammar for an <em>unnamed class</em> is covered in section <code>9</code> <em>[class]</em> and we have the following:</p>\n\n<pre><code>class-specifier:\n    class-head { member-specificationopt}\nclass-head:\n    class-key attribute-specifier-seqopt class-head-name class-virt-specifieropt base-clauseopt\n    class-key attribute-specifier-seqopt base-clauseopt\n</code></pre>\n\n<p>and the following text:</p>\n\n<blockquote>\n  <p>A class-specifier whose class-head omits the class-head-name defines an unnamed class.</p>\n</blockquote>\n\n<p>so an <em>unnamed class</em> is simply a <em>class-specifier</em> without a name and <em>class-specifier</em> is a <em>type-specifier</em> and section <code>7.1.3</code> <em>[dcl.typedef]</em> says:</p>\n\n<blockquote>\n  <p>The typedef specifier shall not be combined in a declspecifier-\n  seq with any other kind of specifier except a type-specifier</p>\n</blockquote>\n\n<p>and does not have any restrictions with respect to <em>unnamed class</em> and only refers to them in this paragraph:</p>\n\n<blockquote>\n  <p>If the typedef declaration defines an unnamed class (or enum), the\n  first typedef-name declared by the declaration to be that class type\n  (or enum type) is used to denote the class type (or enum type) for\n  linkage purposes only (3.5). [ Example:</p>\n\n<pre><code>typedef struct { } *ps, S; // S is the class name for linkage purposes\n</code></pre>\n  \n  <p>\u2014end example ]</p>\n</blockquote>\n"}], "owner": {"reputation": 9246, "user_id": 1594090, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/abcb972aecf3262918ecae1d9a3781d1?s=128&d=identicon&r=PG", "display_name": "template boy", "link": "https://stackoverflow.com/users/1594090/template-boy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 1, "accepted_answer_id": 29136447, "answer_count": 1, "score": 4, "last_activity_date": 1426757449, "creation_date": 1426718107, "last_edit_date": 1426757449, "question_id": 29133988, "link": "https://stackoverflow.com/questions/29133988/using-alias-for-reference-to-anonymous-structure-results-in-error", "title": "Using alias for reference to anonymous structure results in error", "body": "<p>My theory is that gcc has a bug. The following compiles in both clang and gcc:</p>\n\n<pre><code>using type = const struct {}&amp;;\n</code></pre>\n\n<p>But now when I change it to an rvalue reference it compiles with clang but not with gcc:</p>\n\n<pre><code>using type = const struct {}&amp;&amp;;\n\n// main.cpp:8:17: error: expected ';' after struct definition\n//  typedef struct {}&amp;&amp; type;\n//                  ^\n// main.cpp:8:17: error: missing type-name in typedef-declaration\n// main.cpp:8:22: error: expected constructor, destructor, or type conversion before ';' token\n//  typedef const struct {}&amp;&amp; type;\n//                                ^\n</code></pre>\n\n<p>It fails with the <code>typedef</code> version as well with the same error:</p>\n\n<pre><code>typedef const struct {}&amp;&amp; type;\n</code></pre>\n\n<p>Why does this fail to compile in gcc? Is this an issue with the standard or a bug?</p>\n"}, {"tags": ["c++", "debugging"], "comments": [{"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1426720718, "post_id": 29133961, "comment_id": 46494382, "body": "vtables on windows are actually well described, they follow the COM vtable spec."}], "answers": [{"comments": [{"owner": {"reputation": 2631, "user_id": 568447, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b2a093ebd4b8cc5783867897cf69e660?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/568447/ben"}, "edited": false, "score": 0, "creation_date": 1426721266, "post_id": 29134452, "comment_id": 46494581, "body": "Thanks but for complex object this makes it hard to see offset.  is there an obvious order ordering I&#39;m missing?  For example, for me this prints some members before it prints the functions    +0x000 __VFN_table : Ptr32 to 7 entries    +0x004 _aMember      : Ptr32 to class Bar, 23 elements, 0xc bytes    &lt;function&gt; ...     ..* ( void )"}, {"owner": {"reputation": 1921, "user_id": 4645606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e927a684803ef8ad6f7b00684744ef9?s=128&d=identicon&r=PG", "display_name": "pharring", "link": "https://stackoverflow.com/users/4645606/pharring"}, "reply_to_user": {"reputation": 2631, "user_id": 568447, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b2a093ebd4b8cc5783867897cf69e660?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/568447/ben"}, "edited": false, "score": 0, "creation_date": 1426734619, "post_id": 29134452, "comment_id": 46497956, "body": "Could you explain the &#39;theory&#39; you have, then? Maybe there&#39;s another way."}, {"owner": {"reputation": 2631, "user_id": 568447, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b2a093ebd4b8cc5783867897cf69e660?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/568447/ben"}, "edited": false, "score": 0, "creation_date": 1426785351, "post_id": 29134452, "comment_id": 46523599, "body": "I&#39;m getting an access violation when doing pFoo-&gt;VirtualFunction1(). I&#39;m analyzing a dump, and I see pFoo is non-null, and that the near-null-AV is at 0x00000028.  Dumping pFoo shows that all its memory has been zeroed (including the vtable).  I just want to validate that I know what&#39;s going on by verifying that the offset of VirtualFunction1 is 28 which would confirm that the near-null AV comes from vtable+virtualfunction address."}], "owner": {"reputation": 1921, "user_id": 4645606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e927a684803ef8ad6f7b00684744ef9?s=128&d=identicon&r=PG", "display_name": "pharring", "link": "https://stackoverflow.com/users/4645606/pharring"}, "is_accepted": false, "score": 4, "last_activity_date": 1426720558, "creation_date": 1426720558, "answer_id": 29134452, "question_id": 29133961, "link": "https://stackoverflow.com/questions/29133961/dumping-vtable-offsets-on-windows/29134452#29134452", "title": "Dumping VTable Offsets on Windows", "body": "<p>Use the \"-v\" (verbose) option.</p>\n\n<pre><code>dt -v CFoo\n    +0x000 __VFN_table    Ptr32 to 3 entries\n    &lt;function&gt; ~CFoo      void ( void )\n    &lt;function&gt; VirtualFunction1      void ( void )\n    &lt;function&gt; VirtualFunction2      void ( void )\n</code></pre>\n"}], "owner": {"reputation": 2631, "user_id": 568447, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b2a093ebd4b8cc5783867897cf69e660?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/568447/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1577, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1426720558, "creation_date": 1426717983, "question_id": 29133961, "link": "https://stackoverflow.com/questions/29133961/dumping-vtable-offsets-on-windows", "title": "Dumping VTable Offsets on Windows", "body": "<p>In order to validate a theory I have, I'd like to see (preferably via windbg) a dump of the offsets for a given classes vtable.  For example, given a type I can use \"dt Type\" to get a dump of the offsets in the type</p>\n\n<pre><code>dt CFoo\n   +0x000 __VFN_Table : Ptr32\n   +0x004 _dwSomething : Int4B\n</code></pre>\n\n<p>I'm looking for something like</p>\n\n<pre><code>dvtable CFoo\n   +0x000 VirtualFunction1\n   +0x004 VirtualFunction2\n</code></pre>\n\n<p>I am also open to external tools that analyze the symbols if necessary</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4701, "user_id": 1770601, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/pp9hI.jpg?s=128&g=1", "display_name": "ha9u63ar", "link": "https://stackoverflow.com/users/1770601/ha9u63ar"}, "edited": false, "score": 0, "creation_date": 1426717967, "post_id": 29133950, "comment_id": 46493474, "body": "yes you can. Lists of containers is certainly possible."}, {"owner": {"reputation": 8029, "user_id": 3137499, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7acff2bbbdb9c51ea478377a0f6dcb03?s=128&d=identicon&r=PG&f=1", "display_name": "aruisdante", "link": "https://stackoverflow.com/users/3137499/aruisdante"}, "edited": false, "score": 0, "creation_date": 1426718078, "post_id": 29133950, "comment_id": 46493514, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/10750057/c-printing-out-the-contents-of-a-vector\">C++ Printing out the contents of a vector</a>"}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1426718201, "post_id": 29133950, "comment_id": 46493554, "body": "or this <a href=\"http://stackoverflow.com/questions/5470331/traverse-a-list-using-an-iterator\" title=\"traverse a list using an iterator\">stackoverflow.com/questions/5470331/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1325, "user_id": 3754413, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/30dc5eeb93d93c105e2e58d3036bf201?s=128&d=identicon&r=PG&f=1", "display_name": "fonfonx", "link": "https://stackoverflow.com/users/3754413/fonfonx"}, "reply_to_user": {"reputation": 75, "user_id": 4687483, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/85f692513a8ff3d165e0048d4f784831?s=128&d=identicon&r=PG&f=1", "display_name": "LWH", "link": "https://stackoverflow.com/users/4687483/lwh"}, "edited": false, "score": 0, "creation_date": 1426719744, "post_id": 29134050, "comment_id": 46494084, "body": "why? you just have to put some code to print each element of each vectorI think"}, {"owner": {"reputation": 75, "user_id": 4687483, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/85f692513a8ff3d165e0048d4f784831?s=128&d=identicon&r=PG&f=1", "display_name": "LWH", "link": "https://stackoverflow.com/users/4687483/lwh"}, "edited": false, "score": 0, "creation_date": 1426720557, "post_id": 29134050, "comment_id": 46494336, "body": "I am no sure. Maybe the system no overload the list&lt;vector&gt; ? You can try it."}], "owner": {"reputation": 1325, "user_id": 3754413, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/30dc5eeb93d93c105e2e58d3036bf201?s=128&d=identicon&r=PG&f=1", "display_name": "fonfonx", "link": "https://stackoverflow.com/users/3754413/fonfonx"}, "is_accepted": false, "score": 0, "last_activity_date": 1426718373, "creation_date": 1426718373, "answer_id": 29134050, "question_id": 29133950, "link": "https://stackoverflow.com/questions/29133950/can-we-put-vectorstring-to-the-list-in-c/29134050#29134050", "title": "Can we put vector&lt;string&gt; to the list in C++ \uff1f", "body": "<p>of course it is possible.\nYou can use an iterator to print each element of the list, try something like that:</p>\n\n<pre><code>list&lt;vector&lt;string&gt; &gt;::iterator it;\nfor(it=your_list.begin();it!=your_list.end();it++)\n{\n    //your code to print waht you want\n    //it is a pointer to a vector&lt;string&gt;\n    //...\n}\n</code></pre>\n"}, {"owner": {"reputation": 703, "user_id": 2850608, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100006061862863/picture?type=large", "display_name": "Andreas Vennstr&#246;m", "link": "https://stackoverflow.com/users/2850608/andreas-vennstr%c3%b6m"}, "is_accepted": true, "score": 0, "last_activity_date": 1426718770, "creation_date": 1426718770, "answer_id": 29134118, "question_id": 29133950, "link": "https://stackoverflow.com/questions/29133950/can-we-put-vectorstring-to-the-list-in-c/29134118#29134118", "title": "Can we put vector&lt;string&gt; to the list in C++ \uff1f", "body": "<p>If your compiler is up to date with the standard:</p>\n\n<pre><code>std::list&lt;std::vector&lt;std::string&gt;&gt; lst;\nfor ( auto&amp; vec : lst ) // Iterate through all std::vector's\n   for ( auto&amp; str : vec ) // Iterate through all std::string's\n       std::cout &lt;&lt; str &lt;&lt; std::endl; // str is your std::string\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 4687483, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/85f692513a8ff3d165e0048d4f784831?s=128&d=identicon&r=PG&f=1", "display_name": "LWH", "link": "https://stackoverflow.com/users/4687483/lwh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 29134118, "answer_count": 2, "score": -4, "last_activity_date": 1426720404, "creation_date": 1426717912, "last_edit_date": 1426720404, "question_id": 29133950, "link": "https://stackoverflow.com/questions/29133950/can-we-put-vectorstring-to-the-list-in-c", "title": "Can we put vector&lt;string&gt; to the list in C++ \uff1f", "body": "<p>Like this:</p>\n\n<p>list&lt; vector &lt; string > > ? </p>\n\n<p>if the answer is yes,how I use it to print each elements of the list by For Cycle ?</p>\n\n<p>Thanks everyone.I know how to print list&lt; int >,which can be traversed by FOR CYCLE.But in fact, if I use FOR CYCLE and iterator to list&lt; vector &lt; string > >,I will be fail.</p>\n"}, {"tags": ["c++", "qt", "qt5", "qt5.4"], "comments": [{"owner": {"reputation": 2559, "user_id": 4789375, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/LRyDO.png?s=128&g=1", "display_name": "p.i.g.", "link": "https://stackoverflow.com/users/4789375/p-i-g"}, "edited": false, "score": 0, "creation_date": 1431370516, "post_id": 29133949, "comment_id": 48456976, "body": "I&#39;m sorry, I don&#39;t get it. Why don&#39;t you use a QComboBox for this purpose ?"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "reply_to_user": {"reputation": 2559, "user_id": 4789375, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/LRyDO.png?s=128&g=1", "display_name": "p.i.g.", "link": "https://stackoverflow.com/users/4789375/p-i-g"}, "edited": false, "score": 0, "creation_date": 1431371888, "post_id": 29133949, "comment_id": 48457766, "body": "@vizhanyolajos Maybe I could have used a <code>QComboBox</code>, but I&#39;ve made a custom widget that holds the <code>QPushButton</code>s and a <code>QLineEdit</code> and also emits signals when I click these buttons."}, {"owner": {"reputation": 2559, "user_id": 4789375, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/LRyDO.png?s=128&g=1", "display_name": "p.i.g.", "link": "https://stackoverflow.com/users/4789375/p-i-g"}, "edited": false, "score": 0, "creation_date": 1431372500, "post_id": 29133949, "comment_id": 48458109, "body": "Okay, I just wanted to help, but for that, first I should know what&#39;s the point of this task ? Or have you find a good answer ?"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "reply_to_user": {"reputation": 2559, "user_id": 4789375, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/LRyDO.png?s=128&g=1", "display_name": "p.i.g.", "link": "https://stackoverflow.com/users/4789375/p-i-g"}, "edited": false, "score": 0, "creation_date": 1431373339, "post_id": 29133949, "comment_id": 48458575, "body": "@vizhanyolajos I needed a widget for my program - something like the tooltip, where you browse the signatures of the function overloads, when a  cursor is in the argument list (in c++ for example) - but this one is a widget. No, I haven&#39;t found the answer."}], "answers": [{"comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1426775363, "post_id": 29135400, "comment_id": 46516870, "body": "How do I know, whether one of the buttons has been pressed? Sorry, you haven&#39;t told me anything."}, {"owner": {"reputation": 2200, "user_id": 1519323, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zUWVH.png?s=128&g=1", "display_name": "davepmiller", "link": "https://stackoverflow.com/users/1519323/davepmiller"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1426780909, "post_id": 29135400, "comment_id": 46520936, "body": "The documentation page has everything you need. What have you tried?"}, {"owner": {"reputation": 2200, "user_id": 1519323, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zUWVH.png?s=128&g=1", "display_name": "davepmiller", "link": "https://stackoverflow.com/users/1519323/davepmiller"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1426781066, "post_id": 29135400, "comment_id": 46521061, "body": "Is there a reason you&#39;re using QAbstractSpinBox instead of QSpinBox?"}], "owner": {"reputation": 2200, "user_id": 1519323, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zUWVH.png?s=128&g=1", "display_name": "davepmiller", "link": "https://stackoverflow.com/users/1519323/davepmiller"}, "is_accepted": false, "score": 0, "last_activity_date": 1426726775, "last_edit_date": 1426726775, "creation_date": 1426726400, "answer_id": 29135400, "question_id": 29133949, "link": "https://stackoverflow.com/questions/29133949/qabstractspinbox-indexchanged-signal/29135400#29135400", "title": "QAbstractSpinBox - indexChanged signal", "body": "<p>You can override an event method and then get the value in the QLineEdit using lineEdit->getText().</p>\n\n<p>Something like:</p>\n\n<pre><code>#include &lt;QAbstractSpinBox&gt;\n#include &lt;QLineEdit&gt;\n#include &lt;iostream&gt;\n\n\nclass mySpin : public QAbstractSpinBox\n{\n\npublic:\n\n    void changeEvent( QEvent* e ) override\n    {\n        QLineEdit* edit = lineEdit();\n\n        //Do something with the string         \n        std::cout &lt;&lt; edit-&gt;text().toStdString() &lt;&lt; std::endl;\n    }\n};\n</code></pre>\n\n<p>Other events to consider, from the docs found <a href=\"http://qt-project.org/doc/qt-4.8-snapshot/qabstractspinbox.html#signals\" rel=\"nofollow\">here</a>:</p>\n\n<pre><code>virtual void    changeEvent ( QEvent * event )\nvirtual void    closeEvent ( QCloseEvent * event )\nvirtual void    contextMenuEvent ( QContextMenuEvent * event )\nvirtual void    focusInEvent ( QFocusEvent * event )\nvirtual void    focusOutEvent ( QFocusEvent * event )\nvirtual void    hideEvent ( QHideEvent * event )\nvirtual void    keyPressEvent ( QKeyEvent * event )\nvirtual void    keyReleaseEvent ( QKeyEvent * event )\nvirtual void    mouseMoveEvent ( QMouseEvent * event )\nvirtual void    mousePressEvent ( QMouseEvent * event )\nvirtual void    mouseReleaseEvent ( QMouseEvent * event )\nvirtual void    paintEvent ( QPaintEvent * event )\nvirtual void    resizeEvent ( QResizeEvent * event )\nvirtual void    showEvent ( QShowEvent * event )\nvirtual void    timerEvent ( QTimerEvent * event )\nvirtual void    wheelEvent ( QWheelEvent * event )\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2559, "user_id": 4789375, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/LRyDO.png?s=128&g=1", "display_name": "p.i.g.", "link": "https://stackoverflow.com/users/4789375/p-i-g"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1431377404, "post_id": 30177187, "comment_id": 48460702, "body": "I tried it on Windows 8.1 with Qt 5.4.1 and it worked fine. I hope it will be good for you."}], "owner": {"reputation": 2559, "user_id": 4789375, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/LRyDO.png?s=128&g=1", "display_name": "p.i.g.", "link": "https://stackoverflow.com/users/4789375/p-i-g"}, "is_accepted": true, "score": 2, "last_activity_date": 1431376632, "creation_date": 1431376632, "answer_id": 30177187, "question_id": 29133949, "link": "https://stackoverflow.com/questions/29133949/qabstractspinbox-indexchanged-signal/30177187#30177187", "title": "QAbstractSpinBox - indexChanged signal", "body": "<p>Now, after I see what you wanted to do, here is a code for you :).</p>\n\n<p>You needed to override the <code>virtual void stepBy( int aSteps )</code> and the <code>virtual StepEnabled stepEnabled() const</code> function for your purpose.</p>\n\n<pre><code>// Header.\n#pragma once\n\n#include &lt;QAbstractSpinBox&gt;\n\nclass StringSpinBox : public QAbstractSpinBox\n{\n    Q_OBJECT\n\npublic:\n    StringSpinBox( QWidget* aParent = nullptr );\n    ~StringSpinBox();\n\n    void setStrings( const QStringList&amp; aStrings );\n\n    virtual void stepBy( int aSteps ) override;\n\nprotected:\n    virtual StepEnabled stepEnabled() const override;\n\nprivate:\n    QStringList m_Strings;\n    int         m_CurrentIndex;\n};\n\n// Source.\n#include \"StringSpinBox.h\"\n\n#include &lt;QLineEdit&gt;\n\nStringSpinBox::StringSpinBox( QWidget* aParent /*= nullptr*/ )\n    : QAbstractSpinBox( aParent )\n    , m_CurrentIndex( -1 )\n{\n    lineEdit()-&gt;setReadOnly( true );\n}\n\nStringSpinBox::~StringSpinBox()\n{\n}\n\nvoid StringSpinBox::setStrings( const QStringList&amp; aStrings )\n{\n    m_Strings       = aStrings;\n    m_CurrentIndex  = 0;\n\n    lineEdit()-&gt;setText( m_Strings.at( m_CurrentIndex ) );\n}\n\n//  virtual override\nvoid StringSpinBox::stepBy( int aSteps )\n{\n    m_CurrentIndex += aSteps;\n    m_CurrentIndex = qBound( 0, m_CurrentIndex, m_Strings.size() - 1 );\n    lineEdit()-&gt;setText( m_Strings.at( m_CurrentIndex ) );\n}\n\n//  protected virtual override\nQAbstractSpinBox::StepEnabled StringSpinBox::stepEnabled() const\n{\n    StepEnabled enabled = StepUpEnabled | StepDownEnabled;\n    if ( qBound( 0, m_CurrentIndex, m_Strings.size() - 1 ) == 0 )\n    {\n        enabled ^= StepDownEnabled;\n    }\n    if ( qBound( 0, m_CurrentIndex, m_Strings.size() - 1 ) == m_Strings.size() - 1 )\n    {\n        enabled ^= StepUpEnabled;\n    }\n    return enabled;\n}\n\n// For demo purpose.\n#include \"StringSpinBox.h\"\n\n#include &lt;QtWidgets/QApplication&gt;\n\nint main( int argc, char* argv[] )\n{\n    QApplication app( argc, argv );\n\n    StringSpinBox stringSpinBox;\n    stringSpinBox.setStrings( QStringList() &lt;&lt; \"Foo\" &lt;&lt; \"Bar\" &lt;&lt; \"Pig\" );\n    stringSpinBox.show();\n\n    return app.exec();\n}\n</code></pre>\n"}], "owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 30177187, "answer_count": 2, "score": 1, "last_activity_date": 1449923484, "creation_date": 1426717909, "last_edit_date": 1449923484, "question_id": 29133949, "link": "https://stackoverflow.com/questions/29133949/qabstractspinbox-indexchanged-signal", "title": "QAbstractSpinBox - indexChanged signal", "body": "<p>I need to browse <code>QList&lt;QString&gt;</code> with <code>QAbstractSpinBox</code>. I was looking for <code>indexChanged()</code> or similar signal, but didn't find it. It seems I have to hold current index in my derived class. However, I still cannot find the increment/decrement requests, nor the increment/decrement buttons to which I would connect slots. Am I missing something?</p>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["c++", "c", "extern"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 3, "creation_date": 1426717990, "post_id": 29133925, "comment_id": 46493487, "body": "Yes, <code>test.c</code> should see the <code>16</code>. So you need to show us a <a href=\"http://stackoverflow.com/help/mcve\">Minimal Complete Verifiable Example</a>"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1426718075, "post_id": 29133925, "comment_id": 46493513, "body": "By what you have described, the value of <code>variable</code> in <code>test.c</code>, should be 16.  <b><i><a href=\"http://stackoverflow.com/questions/1433204/how-do-i-use-extern-to-share-variables-between-source-files-in-c\">You have described it correctly</a></i></b>:  Create variable with extern scope in header file.  Define same variable in a .c, assigning an initialization value.  Access variable in any other .c file that #includes the .h in which extern variable is created."}, {"owner": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "edited": false, "score": 0, "creation_date": 1426718083, "post_id": 29133925, "comment_id": 46493517, "body": "Make sure that &quot;<code>int variable=16;</code>&quot; statement is outside of all functions, or it won&#39;t be an <code>extern</code>.  If it&#39;s inside a function, that will just be a local variable that no other function can see."}, {"owner": {"reputation": 3141, "user_id": 2468549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b87d95c561b24d120cbfb5a1c5c9867?s=128&d=identicon&r=PG", "display_name": "Frax", "link": "https://stackoverflow.com/users/2468549/frax"}, "edited": false, "score": 0, "creation_date": 1426718827, "post_id": 29133925, "comment_id": 46493792, "body": "It seems to be likely that some other variable with the same name overshadows the global one, in one cpp file or another. Impossible to say without actual source."}, {"owner": {"reputation": 1561, "user_id": 1342288, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/YqpE3.jpg?s=128&g=1", "display_name": "Mike Jablonski", "link": "https://stackoverflow.com/users/1342288/mike-jablonski"}, "edited": false, "score": 1, "creation_date": 1426722904, "post_id": 29133925, "comment_id": 46495083, "body": "<a href=\"http://stackoverflow.com/questions/1433204/how-do-i-use-extern-to-share-variables-between-source-files-in-c/1433387#1433387\">existing answer</a>. Your question may have already been answered here."}], "answers": [{"owner": {"reputation": 1203, "user_id": 3775099, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DRvde.jpg?s=128&g=1", "display_name": "Bhuvanesh", "link": "https://stackoverflow.com/users/3775099/bhuvanesh"}, "is_accepted": false, "score": 1, "last_activity_date": 1426745823, "creation_date": 1426745823, "answer_id": 29138299, "question_id": 29133925, "link": "https://stackoverflow.com/questions/29133925/declaring-an-extern-variable-in-a-header-file/29138299#29138299", "title": "Declaring an extern variable in a header file", "body": "<p>When your Including your <code>main.h</code> header file, the copy of the file will included in the <code>main.c</code> program.</p>\n\n<p>when your alterate into the main.c file , it will not affect the original file.So the value will not affect the original file, and when your are including the file again in the <code>test.c</code> file .</p>\n\n<p>Then the copy of the <code>main.h</code> will added to the test.c file</p>\n"}, {"owner": {"reputation": 718, "user_id": 3775102, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c76df4c37ad5f7bd0ca7fd93777efac?s=128&d=identicon&r=PG&f=1", "display_name": "sharon", "link": "https://stackoverflow.com/users/3775102/sharon"}, "is_accepted": false, "score": 1, "last_activity_date": 1426745979, "creation_date": 1426745979, "answer_id": 29138333, "question_id": 29133925, "link": "https://stackoverflow.com/questions/29133925/declaring-an-extern-variable-in-a-header-file/29138333#29138333", "title": "Declaring an extern variable in a header file", "body": "<p>You are just including the file main.h in the programs.\nWhen you include in main.c the variable will be 16 and the value will be updated in the main.h.\nBut when you compile the test.c the value of variable will be 0 initially.\nSo when you print the value it will be 0.</p>\n\n<p>main.c and test.c will be executed in two separate process, so if the value changes in the main.c it will be not updated in the test.c process.</p>\n\n<p>Only within the single process the value will be updated.</p>\n"}], "owner": {"reputation": 591, "user_id": 2520785, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c5442fc87cc6d5e8cf23f1f89c8a2605?s=128&d=identicon&r=PG&f=1", "display_name": "Pototo", "link": "https://stackoverflow.com/users/2520785/pototo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 1, "closed_date": 1439228098, "answer_count": 2, "score": 1, "last_activity_date": 1426745979, "creation_date": 1426717815, "question_id": 29133925, "link": "https://stackoverflow.com/questions/29133925/declaring-an-extern-variable-in-a-header-file", "closed_reason": "Duplicate", "title": "Declaring an extern variable in a header file", "body": "<p>I have declared an extern <strong>global</strong> variable inside my main.<strong>h</strong> header file like this:</p>\n\n<pre><code>extern int variable;\n</code></pre>\n\n<p>Then, I defined the same global variable inside my main.<strong>c</strong> file like this:</p>\n\n<pre><code>int variable = 16;\n</code></pre>\n\n<p>The thing is that I am using another file called <strong>test.c</strong>, and I have included main.<strong>h</strong> header included inside. But I cannot gain access the the \"<strong>16</strong>\" value that I defined the extern with inside main.<strong>c</strong>. When I call \"variable\" inside <strong>test.c</strong>, the value of \"variable\" is \"<strong>0</strong>\". Should not any .c file that includes my main.<strong>h</strong> header have access to the \"<strong>16</strong>\" value since I have already defined my \"variable\" inside main.<strong>c</strong>???</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "c++11", "namespaces", "ambiguous"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 5, "creation_date": 1426717886, "post_id": 29133909, "comment_id": 46493441, "body": "<i>&quot;Shouldn&#39;t <code>using std::set</code>;&#39;take care of this error?&quot;</i> I&#39;d suspect it&#39;s causing it actually."}, {"owner": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "edited": false, "score": 0, "creation_date": 1426717934, "post_id": 29133909, "comment_id": 46493457, "body": "Is the 3rd party library not using namespaces?"}, {"owner": {"reputation": 57, "user_id": 4639239, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9baf9424056cd49f8def0e38814afbc4?s=128&d=identicon&r=PG&f=1", "display_name": "Unknown", "link": "https://stackoverflow.com/users/4639239/unknown"}, "edited": false, "score": 0, "creation_date": 1426718142, "post_id": 29133909, "comment_id": 46493539, "body": "It does actually. It is a variable defined in boost::xpressive::detail namespace"}, {"owner": {"reputation": 8029, "user_id": 3137499, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7acff2bbbdb9c51ea478377a0f6dcb03?s=128&d=identicon&r=PG&f=1", "display_name": "aruisdante", "link": "https://stackoverflow.com/users/3137499/aruisdante"}, "edited": false, "score": 2, "creation_date": 1426718335, "post_id": 29133909, "comment_id": 46493606, "body": "Then it should be scoped to that namespace, unless you also have <code>using boost::xpressive::detail</code> in your code."}, {"owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 0, "creation_date": 1426718507, "post_id": 29133909, "comment_id": 46493675, "body": "Please show actual code. Then we can say if you should be using <code>using</code>, or not."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1426718931, "post_id": 29133909, "comment_id": 46493829, "body": "This is why you should&#39;ve just written <code>std::set</code> in the first place."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1426719096, "post_id": 29133909, "comment_id": 46493886, "body": "Just do a search-and-replace <code>set&lt;</code> to <code>std::set&lt;</code> and get rid of the <code>using</code> directives?"}, {"owner": {"reputation": 8029, "user_id": 3137499, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7acff2bbbdb9c51ea478377a0f6dcb03?s=128&d=identicon&r=PG&f=1", "display_name": "aruisdante", "link": "https://stackoverflow.com/users/3137499/aruisdante"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1426719512, "post_id": 29133909, "comment_id": 46494020, "body": "@zenith If this is a project with (tens of) thousands of lines of code, where <code>using std::set</code> was common practice, changing that in many, many places could be quite painful and touch a lot of things in a lot of places. It also requires you to get every developer on the project on board with the new coding style. Neither are necessarily trivial things."}, {"owner": {"reputation": 57, "user_id": 4639239, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9baf9424056cd49f8def0e38814afbc4?s=128&d=identicon&r=PG&f=1", "display_name": "Unknown", "link": "https://stackoverflow.com/users/4639239/unknown"}, "reply_to_user": {"reputation": 8029, "user_id": 3137499, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7acff2bbbdb9c51ea478377a0f6dcb03?s=128&d=identicon&r=PG&f=1", "display_name": "aruisdante", "link": "https://stackoverflow.com/users/3137499/aruisdante"}, "edited": false, "score": 0, "creation_date": 1426720545, "post_id": 29133909, "comment_id": 46494329, "body": "@aruisdante thanks for pointing out that I might have an unnecesary <code>using boost::xpressive::detail</code> somewhere. Removing that fixed the issue."}], "owner": {"reputation": 57, "user_id": 4639239, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9baf9424056cd49f8def0e38814afbc4?s=128&d=identicon&r=PG&f=1", "display_name": "Unknown", "link": "https://stackoverflow.com/users/4639239/unknown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 463, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1426718267, "creation_date": 1426717731, "last_edit_date": 1426718267, "question_id": 29133909, "link": "https://stackoverflow.com/questions/29133909/resolving-ambiguous-references", "title": "Resolving ambiguous references", "body": "<p>I have code spread across a number of files using std::set. Each of these files also have an using directive <code>using std::set;</code>. I am now introducing dependency on a 3rd party library which has defined a const named <code>set</code>. Now the compiler fails giving an ambiguous reference error between the <code>std::set</code> and the <code>set</code> variable defined in the 3rd party library. I could fix the issue by explicitly specifying the scope (<code>std::set</code>) wherever I use this type. But doing this across a large number of files is very painful. I have 2 questions:</p>\n\n<ol>\n<li>Shouldn't <code>using std::set</code> take care of this error?</li>\n<li>Is there any way of resolving this ambiguity other than explicitly scoping the type for each instance of the type in every file across the project? </li>\n</ol>\n"}, {"tags": ["c#", "c++"], "comments": [{"owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "edited": false, "score": 0, "creation_date": 1426722914, "post_id": 29133863, "comment_id": 46495089, "body": "Please provide the method signature. How do you know the size of the returned array BTW?"}, {"owner": {"reputation": 88, "user_id": 4687439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f93515f8822974c14d54d8bb006c839?s=128&d=identicon&r=PG&f=1", "display_name": "fbr", "link": "https://stackoverflow.com/users/4687439/fbr"}, "reply_to_user": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "edited": false, "score": 0, "creation_date": 1426728155, "post_id": 29133863, "comment_id": 46496393, "body": "@LucasTrzesniewski the method signature in the .h  looks like these:  extern &quot;C&quot; DLLEXPORT  CvRect* MyClass::MyMethod(char* path, int* lenght);                                      where lenght is the number of CvRect returned."}, {"owner": {"reputation": 1682, "user_id": 2544158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/osuok.jpg?s=128&g=1", "display_name": "Reticulated Spline", "link": "https://stackoverflow.com/users/2544158/reticulated-spline"}, "edited": false, "score": 0, "creation_date": 1426811207, "post_id": 29133863, "comment_id": 46535244, "body": "Please edit your original post to include the method signature so it&#39;s easier to read. Please also include the definition for <code>CvRect</code>."}, {"owner": {"reputation": 88, "user_id": 4687439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f93515f8822974c14d54d8bb006c839?s=128&d=identicon&r=PG&f=1", "display_name": "fbr", "link": "https://stackoverflow.com/users/4687439/fbr"}, "reply_to_user": {"reputation": 1682, "user_id": 2544158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/osuok.jpg?s=128&g=1", "display_name": "Reticulated Spline", "link": "https://stackoverflow.com/users/2544158/reticulated-spline"}, "edited": false, "score": 0, "creation_date": 1426854370, "post_id": 29133863, "comment_id": 46551454, "body": "@ReticulatedSpline the method signature is already included in my original post. CvRect is an struct provided by OpenCv that basically represent a rectangle with properties like width, height and x and y coordinates of the upper left corner. <a href=\"http://devel.iri.upc.edu/docs/roswiki/docs/diamondback/api/opencv2/html/c++/structCvRect.html\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 1682, "user_id": 2544158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/osuok.jpg?s=128&g=1", "display_name": "Reticulated Spline", "link": "https://stackoverflow.com/users/2544158/reticulated-spline"}, "edited": false, "score": 0, "creation_date": 1426902864, "post_id": 29133863, "comment_id": 46574061, "body": "I don&#39;t think you will be able to wrap it directly; you will still need to get the results in unmanaged space (i.e. as an <code>IntPtr</code>) then transfer it to managed space. Is this what you&#39;re having trouble with?"}, {"owner": {"reputation": 88, "user_id": 4687439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f93515f8822974c14d54d8bb006c839?s=128&d=identicon&r=PG&f=1", "display_name": "fbr", "link": "https://stackoverflow.com/users/4687439/fbr"}, "reply_to_user": {"reputation": 1682, "user_id": 2544158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/osuok.jpg?s=128&g=1", "display_name": "Reticulated Spline", "link": "https://stackoverflow.com/users/2544158/reticulated-spline"}, "edited": false, "score": 0, "creation_date": 1427203092, "post_id": 29133863, "comment_id": 46673372, "body": "@ReticulatedSpline yes, I need to convert the IntPtr to an array of CvRect (an struct that I created in C# to emulate the CvRect of the OpenCV)... I&#39;m having problems with that, please help me."}, {"owner": {"reputation": 1682, "user_id": 2544158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/osuok.jpg?s=128&g=1", "display_name": "Reticulated Spline", "link": "https://stackoverflow.com/users/2544158/reticulated-spline"}, "edited": false, "score": 0, "creation_date": 1427336586, "post_id": 29133863, "comment_id": 46741031, "body": "Ok so your code looks fine. Does it work? If so, just create an array of <code>Rectangle</code>s and assign them the same way: <code>Rectangle[] rect = new Rectangle[lenght];</code> ... <code>rect[i] = new Rectangle(result[i].x, result[i].y, result[i].width, result[i].height);</code> Or am I misunderstanding something?"}, {"owner": {"reputation": 88, "user_id": 4687439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f93515f8822974c14d54d8bb006c839?s=128&d=identicon&r=PG&f=1", "display_name": "fbr", "link": "https://stackoverflow.com/users/4687439/fbr"}, "reply_to_user": {"reputation": 1682, "user_id": 2544158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/osuok.jpg?s=128&g=1", "display_name": "Reticulated Spline", "link": "https://stackoverflow.com/users/2544158/reticulated-spline"}, "edited": false, "score": 0, "creation_date": 1427371841, "post_id": 29133863, "comment_id": 46754186, "body": "@ReticulatedSpline the code works but it shows a warning or something like that: <i>Additional Information: A call to PInvoke function (MyMethod) has unbalanced the stack. This is likely because the managed PInvoke signature does not match the unmanaged target signature. Check that the calling convention and parameters of the PInvoke signature match the target unmanaged signature.</i> Despite that, I give continue and it works, but wondered how to remove warning..."}, {"owner": {"reputation": 1682, "user_id": 2544158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/osuok.jpg?s=128&g=1", "display_name": "Reticulated Spline", "link": "https://stackoverflow.com/users/2544158/reticulated-spline"}, "edited": false, "score": 0, "creation_date": 1427418770, "post_id": 29133863, "comment_id": 46780245, "body": "Your calling convention is most likely incorrect. Change your C# function&#39;s attribute to: <code>[DllImport(&quot;MyDLL.dll&quot;, EntryPoint = &quot;MyMethod&quot;, CallingConvention = CallingConvention.Cdecl)]</code>"}, {"owner": {"reputation": 88, "user_id": 4687439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f93515f8822974c14d54d8bb006c839?s=128&d=identicon&r=PG&f=1", "display_name": "fbr", "link": "https://stackoverflow.com/users/4687439/fbr"}, "reply_to_user": {"reputation": 1682, "user_id": 2544158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/osuok.jpg?s=128&g=1", "display_name": "Reticulated Spline", "link": "https://stackoverflow.com/users/2544158/reticulated-spline"}, "edited": false, "score": 0, "creation_date": 1427467129, "post_id": 29133863, "comment_id": 46801054, "body": "@ReticulatedSpline I was working in VS 2010 with the OpenCV 2.2 and now, I migrated the same code to VS 2012 with the version 2.4.6 of the OpenCV. I&#39;m having this Error with or without the CallingConvention that you suggest me: <i>Unable to load DLL &#39;MyDLL.dll&#39;: Can not find the specified module. (Exception from HRESULT: 0x8007007E)</i> Why it is that?"}, {"owner": {"reputation": 1682, "user_id": 2544158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/osuok.jpg?s=128&g=1", "display_name": "Reticulated Spline", "link": "https://stackoverflow.com/users/2544158/reticulated-spline"}, "edited": false, "score": 0, "creation_date": 1427471018, "post_id": 29133863, "comment_id": 46803707, "body": "&quot;Can not find the specified module&quot; should be a dead giveaway. It can&#39;t find <code>MyDLL.dll</code> in the same folder as the executable. Copy it over from the old location and you should be good to go."}, {"owner": {"reputation": 88, "user_id": 4687439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f93515f8822974c14d54d8bb006c839?s=128&d=identicon&r=PG&f=1", "display_name": "fbr", "link": "https://stackoverflow.com/users/4687439/fbr"}, "reply_to_user": {"reputation": 1682, "user_id": 2544158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/osuok.jpg?s=128&g=1", "display_name": "Reticulated Spline", "link": "https://stackoverflow.com/users/2544158/reticulated-spline"}, "edited": false, "score": 0, "creation_date": 1427474071, "post_id": 29133863, "comment_id": 46805698, "body": "@ReticulatedSpline <code>MyDLL.dll</code> is already in the same folder of the executable, that&#39;s why I don&#39;t know what else to do..."}, {"owner": {"reputation": 1682, "user_id": 2544158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/osuok.jpg?s=128&g=1", "display_name": "Reticulated Spline", "link": "https://stackoverflow.com/users/2544158/reticulated-spline"}, "edited": false, "score": 0, "creation_date": 1427489746, "post_id": 29133863, "comment_id": 46813874, "body": "Are you <i>absolutely certain</i> of that? The error message says it can&#39;t find it. After compiling your project from Visual Studio, go to the folder the executable is in and run it from there. Verify that the same folder has the DLL file in question. If the file is indeed there and it says it still can&#39;t find it, you&#39;ll have to create a new question; this discussion is already off-topic."}], "owner": {"reputation": 88, "user_id": 4687439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f93515f8822974c14d54d8bb006c839?s=128&d=identicon&r=PG&f=1", "display_name": "fbr", "link": "https://stackoverflow.com/users/4687439/fbr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 344, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1427293045, "creation_date": 1426717503, "last_edit_date": 1427293045, "question_id": 29133863, "link": "https://stackoverflow.com/questions/29133863/cvrect-in-c-to-rectangle-in-c", "title": "CvRect* in C++ to Rectangle[] in C#", "body": "<p>I'm developing an app in C# and I need to use a method defined in a C++ dll. That method returns a <code>CvRect*</code> and I want to know how can I, in some way, do a wrapping for use it as a <code>Rectangle[]</code>. I'm using Emgu Cv in C#.</p>\n\n<p>The method signature in the .h  looks like these: </p>\n\n<pre><code>extern \"C\" DLLEXPORT \nCvRect* MyClass::MyMethod(char* path, int* lenght);    \n</code></pre>\n\n<p>where <code>lenght</code>is the number of <code>CvRect</code>returned.</p>\n\n<p>The C# code:</p>\n\n<pre><code>[DllImport(\"MyDLL.dll\", EntryPoint = \"MyMethod\")]\n    public static extern IntPtr MyMethod(string path, ref int lenght);\n\nint lenght = 0;\nIntPtr h_result = MyMethod(path, ref lenght);\n\nCvRect[] result= new CvRect[lenght];\n\nvar sizeInBytes = Marshal.SizeOf(typeof(CvRect));\nfor (int i = 0; i &lt; lenght; i++)\n{\n    IntPtr p = new IntPtr((h_result.ToInt32() + i * sizeInBytes));\n\n    result[i] = (CvRect)Marshal.PtrToStructure(p, typeof(CvRect));\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 118, "user_id": 4283418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CcIzM.jpg?s=128&g=1", "display_name": "iJakeUjake", "link": "https://stackoverflow.com/users/4283418/ijakeujake"}, "edited": false, "score": 0, "creation_date": 1426716593, "post_id": 29133640, "comment_id": 46492967, "body": "Try to initialize them in the declaration: double employNum = 0;"}, {"owner": {"reputation": 645, "user_id": 4253485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f487d4517c8377afb2de167d325aa2f0?s=128&d=identicon&r=PG&f=1", "display_name": "Mido", "link": "https://stackoverflow.com/users/4253485/mido"}, "edited": false, "score": 0, "creation_date": 1426716916, "post_id": 29133640, "comment_id": 46493102, "body": "You&#39;re trying to check their values without them being initialized to any value. Which means that they still contain garbage. You must set them to a value before trying to read them. This is probably done by reading the values to those variables from the file."}, {"owner": {"reputation": 157295, "user_id": 76337, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1aa48f7606f5b08595b0a0356a61e8b6?s=128&d=identicon&r=PG", "display_name": "John Saunders", "link": "https://stackoverflow.com/users/76337/john-saunders"}, "edited": false, "score": 0, "creation_date": 1426720642, "post_id": 29133640, "comment_id": 46494363, "body": "Unlike forum sites, we don&#39;t use &quot;Thanks&quot;, or &quot;Any help appreciated&quot;, or signatures on <a href=\"https://stackoverflow.com\">Stack Overflow</a>. See &quot;<a href=\"http://meta.stackexchange.com/questions/2950/should-hi-thanks-taglines-and-salutations-be-removed-from-posts\">Should &#39;Hi&#39;, &#39;thanks,&#39; taglines, and salutations be removed from posts?</a>. BTW, it&#39;s &quot;Thanks in advance&quot;, not &quot;Thanks in advanced&quot;."}, {"owner": {"reputation": 167, "user_id": 4130393, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f872bf73b709d248b0417042ceafb641?s=128&d=identicon&r=PG&f=1", "display_name": "SaladSnake", "link": "https://stackoverflow.com/users/4130393/saladsnake"}, "reply_to_user": {"reputation": 157295, "user_id": 76337, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1aa48f7606f5b08595b0a0356a61e8b6?s=128&d=identicon&r=PG", "display_name": "John Saunders", "link": "https://stackoverflow.com/users/76337/john-saunders"}, "edited": false, "score": 0, "creation_date": 1427150655, "post_id": 29133640, "comment_id": 46652532, "body": "Thanks @JohnSaunders for informing my on the necessity of thank you, and appreciation. Life would be so much more simple if we were robots.  Come on now, we&#39;re grasping at straws arn&#39;t we?"}, {"owner": {"reputation": 157295, "user_id": 76337, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1aa48f7606f5b08595b0a0356a61e8b6?s=128&d=identicon&r=PG", "display_name": "John Saunders", "link": "https://stackoverflow.com/users/76337/john-saunders"}, "edited": false, "score": 0, "creation_date": 1427168217, "post_id": 29133640, "comment_id": 46657271, "body": "Did you bother to read the link?  Stack Overflow is not like other sites you may have used before. Please take the time to learn how it is different."}, {"owner": {"reputation": 167, "user_id": 4130393, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f872bf73b709d248b0417042ceafb641?s=128&d=identicon&r=PG&f=1", "display_name": "SaladSnake", "link": "https://stackoverflow.com/users/4130393/saladsnake"}, "reply_to_user": {"reputation": 157295, "user_id": 76337, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1aa48f7606f5b08595b0a0356a61e8b6?s=128&d=identicon&r=PG", "display_name": "John Saunders", "link": "https://stackoverflow.com/users/76337/john-saunders"}, "edited": false, "score": 0, "creation_date": 1427309677, "post_id": 29133640, "comment_id": 46730253, "body": "@JohnSaunders I actually did read it. It seems like a hot controversial topic.."}, {"owner": {"reputation": 167, "user_id": 4130393, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f872bf73b709d248b0417042ceafb641?s=128&d=identicon&r=PG&f=1", "display_name": "SaladSnake", "link": "https://stackoverflow.com/users/4130393/saladsnake"}, "edited": false, "score": 0, "creation_date": 1427310315, "post_id": 29133640, "comment_id": 46730619, "body": "I&#39;ve made many posts on here and, <i>just sayin</i> the  C++ threads are the only ones where I run into people complain about such mundane things. [<a href=\"http://blog.stackoverflow.com/2009/03/the-great-edit-wars/](The\">blog.stackoverflow.com/2009/03/the-great-edit-wars/](The</a> Great Edit Wars), I think you, my friend, are the one who needs to learn how things work. You&#39;re nothing but rude and condescending in your posts... Remember, this is not a site for the elite got gather, it&#39;s a place for Q/A."}, {"owner": {"reputation": 157295, "user_id": 76337, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1aa48f7606f5b08595b0a0356a61e8b6?s=128&d=identicon&r=PG", "display_name": "John Saunders", "link": "https://stackoverflow.com/users/76337/john-saunders"}, "edited": false, "score": 0, "creation_date": 1427316308, "post_id": 29133640, "comment_id": 46734028, "body": "I&#39;m not complaining. I&#39;m letting you know about the change I made, and I&#39;m telling you why I made it."}], "answers": [{"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1426716941, "post_id": 29133712, "comment_id": 46493110, "body": "Doesn&#39;t &quot;not uninitialized&quot; mean &quot;initialized&quot;? :-)"}], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": true, "score": 3, "last_activity_date": 1426720622, "last_edit_date": 1426720622, "creation_date": 1426716834, "answer_id": 29133712, "question_id": 29133640, "link": "https://stackoverflow.com/questions/29133640/issue-with-file-variables/29133712#29133712", "title": "issue with File variables", "body": "<blockquote>\n  <p>The payRate hourWorked and employNum varibles say they are not uninitialized</p>\n</blockquote>\n\n<p>The compiler tells you what you've done wrong: you did not initialize these variables, so they might have <em>any</em> value, including things like <code>0.0</code> (which would be <code>false</code> in your while loop), but you use them in your <code>while</code> loop.</p>\n\n<p>You could do something like</p>\n\n<p><code>double payRate = 0.0;</code> </p>\n\n<p>to solve that ambiguity.</p>\n\n<p>All in all, I haven't thoroughly read your code, but it's almost never correct to simply use a concatenated list of floating point expressions in a while loop:</p>\n\n<pre><code>while (myFileIn, employNum, payRate, hourWorked)\n</code></pre>\n\n<p>I really don't know what you wanted to do, but this clearly indicates you will have to go back and learn C++ basics. The content of <code>(myFileIn, employNum, payRate, hourWorked)</code> is always the value of <code>hourWorked</code>, and I'm pretty sure that's not what you wanted to test for in your loop iteration condition.</p>\n"}], "owner": {"reputation": 167, "user_id": 4130393, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f872bf73b709d248b0417042ceafb641?s=128&d=identicon&r=PG&f=1", "display_name": "SaladSnake", "link": "https://stackoverflow.com/users/4130393/saladsnake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 29133712, "answer_count": 1, "score": -4, "last_activity_date": 1426720622, "creation_date": 1426716493, "last_edit_date": 1426720565, "question_id": 29133640, "link": "https://stackoverflow.com/questions/29133640/issue-with-file-variables", "title": "issue with File variables", "body": "<p>The payRate hourWorked and employNum variables say they are not uninitialized. Not sure what is going wrong here. I'm trying to gather info from a file and then calculate data and show it on screen. </p>\n\n<pre><code> {\n        int x;\n        double y;\n        double employNum;\n        double payRate;\n        double hourWorked;\n        double grossAmount;\n        bool employChecker;\n        double netCalc;\n        cout &lt;&lt; \"Welcome to the employee data menu!\" &lt;&lt; endl;\n        employChecker = false;\n        do\n\n        {\n\n            cout &lt;&lt; \"Please enter :\" &lt;&lt; endl &lt;&lt; \"1: To view  an employees Data\" &lt;&lt; endl &lt;&lt; \"0: To retirn to the main menu\" &lt;&lt; endl;\n            cin &gt;&gt; x;\n            if (x = 1)\n            {\n                cout &lt;&lt; \"Please enter the employee number that you would like data on\" &lt;&lt; endl;\n                cin &gt;&gt; y;\n                cout &lt;&lt; \"Employee Num\" &lt;&lt; setw(10) &lt;&lt; \"Hours\" &lt;&lt; setw(20) &lt;&lt; \"Rate\" &lt;&lt; setw(30) &lt;&lt; \"Gross\" &lt;&lt; setw(40) &lt;&lt; \"Net\" &lt;&lt; setw(50) &lt;&lt; \"Fes\" &lt;&lt; setw(60) &lt;&lt; \"State\" &lt;&lt; setw(70) &lt;&lt; \"Soc Sec\" &lt;&lt; setw(80) &lt;&lt; endl;\n                ifstream  myFileIn(\"inText.txt\");\n                while (myFileIn, employNum, payRate, hourWorked)\n                {\n                    if (employNum == y)\n                    {\n                        employChecker = true;\n                        if (hourWorked &gt;= 35)\n                        {\n                            grossAmount = ((hourWorked * payRate)*.15);\n                        }\n                        else if(hourWorked &lt; 40)\n                        {\n                            grossAmount = ((40 * payRate) * ((hourWorked - 40)*1.5));\n                        }\n                        else\n                        {\n                            grossAmount = (hourWorked * payRate);\n                        }\n                        netCalc = grossAmount - (grossAmount * STATE_TAX) + (grossAmount * SOC_TAX) + (grossAmount * FEDERAL_TAX);\n                        cout &lt;&lt; employNum &lt;&lt; setw(10) &lt;&lt; hourWorked &lt;&lt; setw(20) &lt;&lt; payRate &lt;&lt; setw(30) &lt;&lt; grossAmount &lt;&lt; setw(40) &lt;&lt; netCalc &lt;&lt; setw(50) &lt;&lt; (grossAmount * FEDERAL_TAX) &lt;&lt; setw(60) &lt;&lt; (grossAmount * STATE_TAX) &lt;&lt; setw(70) &lt;&lt; (grossAmount * SOC_TAX) &lt;&lt; setw(80) &lt;&lt; endl;\n                    }\n                }\n                if (employChecker == false)\n                {\n                    cout &lt;&lt; \"Employee does not exist or there was an error computing epmloyees data!\" &lt;&lt; endl;\n                }\n\n            }\n        } while (x != 0);\n        return(0);\n    }\n</code></pre>\n"}, {"tags": ["c++", "regex"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1426716455, "post_id": 29133617, "comment_id": 46492901, "body": "Wasn&#39;t that ending up the regex string with a <code>$</code>?"}, {"owner": {"reputation": 49, "user_id": 4687416, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DeESMXwqplw/AAAAAAAAAAI/AAAAAAAAACQ/VPpnVDMVBy8/photo.jpg?sz=128", "display_name": "DmitryScaletta", "link": "https://stackoverflow.com/users/4687416/dmitryscaletta"}, "edited": false, "score": 0, "creation_date": 1426716746, "post_id": 29133617, "comment_id": 46493030, "body": "Yes, C++ 11 (Visual C++)"}, {"owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "edited": false, "score": 0, "creation_date": 1426717001, "post_id": 29133617, "comment_id": 46493127, "body": "By default you get <code>std::regex_constants::syntax_option_type::ECMAScript</code> which... is depressing, at best. JS doesn&#39;t have a <code>s</code> modifier nor does it support inline modifiers... The standard trick to overcome this is to use <code>[\\s\\S]</code> instead of <code>.</code>"}, {"owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "edited": false, "score": 0, "creation_date": 1426717107, "post_id": 29133617, "comment_id": 46493169, "body": "Note that, if you use boost, you can have <code>syntax_option_type::perl</code> and... <code>syntax_option_type::mod_s</code>. yay!"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1426720069, "post_id": 29133617, "comment_id": 46494175, "body": "With <code>ECMAScript</code> flag, you can try to use the suggestion from Lucas. <code>std::regex pttrn (&quot;&lt;html&gt;([\\\\s\\\\S]+)&lt;&#47;html&gt;&quot;, std::regex::ECMAScript);</code>. Does it work?"}, {"owner": {"reputation": 49, "user_id": 4687416, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DeESMXwqplw/AAAAAAAAAAI/AAAAAAAAACQ/VPpnVDMVBy8/photo.jpg?sz=128", "display_name": "DmitryScaletta", "link": "https://stackoverflow.com/users/4687416/dmitryscaletta"}, "edited": false, "score": 0, "creation_date": 1426740494, "post_id": 29133617, "comment_id": 46499273, "body": "stribizhev, does not work. I tried."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "edited": false, "score": 0, "creation_date": 1551373084, "post_id": 29133617, "comment_id": 96625832, "body": "@LucasTrzesniewski <a href=\"https://bugs.llvm.org/show_bug.cgi?id=40904\" rel=\"nofollow noreferrer\">bugs.llvm.org/show_bug.cgi?id=40904</a>"}, {"owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1551527518, "post_id": 29133617, "comment_id": 96677951, "body": "@LightnessRacesinOrbit <i>sigh</i>... I thought they&#39;d have fixed most bugs by now... well, use <code>(?:.|\\r?\\n)</code> then, I guess. Or a proper regex library :)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "edited": false, "score": 0, "creation_date": 1551537661, "post_id": 29133617, "comment_id": 96680604, "body": "@LucasTrzesniewski That&#39;s a good point actually - does \\r count as part of &quot;a newline&quot; w.r.t. multi-line mode in this context? I&#39;ve been using <code>(?:.|\\n)</code> whoops"}, {"owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1551548952, "post_id": 29133617, "comment_id": 96683711, "body": "@LightnessRacesinOrbit hmm I don&#39;t know if <code>\\r</code> is included in <code>.</code> by default, and I <i>think</i> the answer wouldn&#39;t generalize to different regex libraries anyway.For instance, PCRE has 5 different options to choose from for what is a newline (CR, LF, CRLF, any of the previous, or any of the previous + Unicode newline sequences)."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "edited": false, "score": 0, "creation_date": 1551555307, "post_id": 29133617, "comment_id": 96685373, "body": "@LucasTrzesniewski <a href=\"https://www.ecma-international.org/ecma-262/9.0/index.html#sec-atom\" rel=\"nofollow noreferrer\">ecma-international.org/ecma-262/9.0/index.html#sec-atom</a> <a href=\"https://www.ecma-international.org/ecma-262/9.0/index.html#prod-LineTerminator\" rel=\"nofollow noreferrer\">ecma-international.org/ecma-262/9.0/&hellip;</a> Bah. (I&#39;m only bothered about ECMAScript mode in this context.) So <code>[.\\s]</code> (if it works) or <code>(?:.|\\s)</code> is better."}, {"owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1551569679, "post_id": 29133617, "comment_id": 96688985, "body": "@LightnessRacesinOrbit yeah <code>(?:.|\\s)</code> looks good. <code>[.\\s]</code> doesn&#39;t match what you want here (only matches a period or whitespace)."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "edited": false, "score": 0, "creation_date": 1551570383, "post_id": 29133617, "comment_id": 96689108, "body": "@LucasTrzesniewski Oh, right ^_^ I&#39;d forgotten why I dropped the character class lol"}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1426716760, "post_id": 29133672, "comment_id": 46493037, "body": "<code>$regex = &quot;&#47;&lt;html&gt;([\\s\\S]*)&lt;\\&#47;html&gt;&#47;&quot;;</code> isn&#39;t valid c++ code."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1426716876, "post_id": 29133672, "comment_id": 46493085, "body": "<i>&quot;Can you suggest a change ...&quot;</i> Let&#39;s start making <code>$regex</code> a valid c++ variable?"}, {"owner": {"reputation": 27179, "user_id": 710099, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0413774874b9baeccef7a5ba0344fec7?s=128&d=identicon&r=PG", "display_name": "Federico Piazza", "link": "https://stackoverflow.com/users/710099/federico-piazza"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1426716965, "post_id": 29133672, "comment_id": 46493121, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 don&#39;t focus in the php code, just showed the regex to make the trick."}, {"owner": {"reputation": 27179, "user_id": 710099, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0413774874b9baeccef7a5ba0344fec7?s=128&d=identicon&r=PG", "display_name": "Federico Piazza", "link": "https://stackoverflow.com/users/710099/federico-piazza"}, "reply_to_user": {"reputation": 49, "user_id": 4687416, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DeESMXwqplw/AAAAAAAAAAI/AAAAAAAAACQ/VPpnVDMVBy8/photo.jpg?sz=128", "display_name": "DmitryScaletta", "link": "https://stackoverflow.com/users/4687416/dmitryscaletta"}, "edited": false, "score": 0, "creation_date": 1426719504, "post_id": 29133672, "comment_id": 46494019, "body": "@DmitryScaletta have you tried with other combinations [\\d\\D] or [\\w\\W] ?"}, {"owner": {"reputation": 27179, "user_id": 710099, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0413774874b9baeccef7a5ba0344fec7?s=128&d=identicon&r=PG", "display_name": "Federico Piazza", "link": "https://stackoverflow.com/users/710099/federico-piazza"}, "reply_to_user": {"reputation": 49, "user_id": 4687416, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DeESMXwqplw/AAAAAAAAAAI/AAAAAAAAACQ/VPpnVDMVBy8/photo.jpg?sz=128", "display_name": "DmitryScaletta", "link": "https://stackoverflow.com/users/4687416/dmitryscaletta"}, "edited": false, "score": 0, "creation_date": 1426721982, "post_id": 29133672, "comment_id": 46494806, "body": "@DmitryScaletta great, glad to help. Is my answer answered to your question though?"}, {"owner": {"reputation": 1605, "user_id": 1339615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6MHBM.png?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/1339615/julian"}, "reply_to_user": {"reputation": 49, "user_id": 4687416, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DeESMXwqplw/AAAAAAAAAAI/AAAAAAAAACQ/VPpnVDMVBy8/photo.jpg?sz=128", "display_name": "DmitryScaletta", "link": "https://stackoverflow.com/users/4687416/dmitryscaletta"}, "edited": false, "score": 0, "creation_date": 1426780072, "post_id": 29133672, "comment_id": 46520364, "body": "@DmitryScaletta I&#39;m not very knowledgeable in compiler discrepancies, but that seems like a deficiency in MSVC, as <code>\\s</code> and <code>\\S</code> are listed <a href=\"https://msdn.microsoft.com/en-us/library/bb982727.aspx\" rel=\"nofollow noreferrer\">here</a>. Maybe someone else can clarify whether this is a bug or intended."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1551373052, "post_id": 29133672, "comment_id": 96625816, "body": "Warning ... this works on GCC and Clang/Linux, <a href=\"https://bugs.llvm.org/show_bug.cgi?id=40904\" rel=\"nofollow noreferrer\">but is broken on Clang/OSX</a>. I&#39;ve switched to <code>(?:.|\\n)</code>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1551555337, "post_id": 29133672, "comment_id": 96685382, "body": "Correction: <code>(?:.|\\s)</code>"}], "owner": {"reputation": 27179, "user_id": 710099, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0413774874b9baeccef7a5ba0344fec7?s=128&d=identicon&r=PG", "display_name": "Federico Piazza", "link": "https://stackoverflow.com/users/710099/federico-piazza"}, "is_accepted": false, "score": 2, "last_activity_date": 1426716675, "creation_date": 1426716675, "answer_id": 29133672, "question_id": 29133617, "link": "https://stackoverflow.com/questions/29133617/how-to-ignore-line-breaks-in-regular-expressions-c/29133672#29133672", "title": "How to ignore line breaks in regular expressions (C++)", "body": "<p>You can do a trick by using <code>[\\s\\S]*</code>. This is going to capturing everything from what you want to what you want.</p>\n\n<p>So, you can have a regex like this:</p>\n\n<pre><code>&lt;html&gt;([\\s\\S]*)&lt;\\/html&gt;    // greedy\n&lt;html&gt;([\\s\\S]*?)&lt;\\/html&gt;   // ungreedy\n</code></pre>\n\n<p>You can also use whatever shortcut you want like <code>[\\d\\D]</code> or <code>[\\w\\W]</code></p>\n\n<p>Btw, if you are parsing html, I'd use a html parser instead</p>\n"}], "owner": {"reputation": 49, "user_id": 4687416, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DeESMXwqplw/AAAAAAAAAAI/AAAAAAAAACQ/VPpnVDMVBy8/photo.jpg?sz=128", "display_name": "DmitryScaletta", "link": "https://stackoverflow.com/users/4687416/dmitryscaletta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2145, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1426716675, "creation_date": 1426716396, "question_id": 29133617, "link": "https://stackoverflow.com/questions/29133617/how-to-ignore-line-breaks-in-regular-expressions-c", "title": "How to ignore line breaks in regular expressions (C++)", "body": "<p>How to ignore line breaks in regular expressions (C++).</p>\n\n<p>PHP has a modifier \"s\" (single line):</p>\n\n<pre><code>$regex = \"/&lt;html&gt;(.*)&lt;\\/html&gt;/s\";\n</code></pre>\n\n<p>If this modifier is set, a dot metacharacter in the pattern matches all characters, including newlines. Without it, newlines are excluded.</p>\n\n<p>For example: <a href=\"https://regex101.com/r/jA4tT4/1\" rel=\"nofollow\">https://regex101.com/r/jA4tT4/1</a></p>\n\n<p>How to make it to C++?</p>\n"}, {"tags": ["c++", "c++11", "mfc", "nana"], "comments": [{"owner": {"reputation": 18780, "user_id": 683218, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/7Vy7c.png?s=128&g=1", "display_name": "tinlyx", "link": "https://stackoverflow.com/users/683218/tinlyx"}, "edited": false, "score": 1, "creation_date": 1426720049, "post_id": 29133606, "comment_id": 46494167, "body": "My question is to ask whether there is a specific function (drawing on canvas) in a specific c++ library, which is quite common and important. I showed what I have searched for so far. I don&#39;t believe this is only asking for a tutorial for some well-known functionality or request for a library."}], "answers": [{"comments": [{"owner": {"reputation": 18780, "user_id": 683218, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/7Vy7c.png?s=128&g=1", "display_name": "tinlyx", "link": "https://stackoverflow.com/users/683218/tinlyx"}, "edited": false, "score": 0, "creation_date": 1426781334, "post_id": 29143388, "comment_id": 46521243, "body": "+1. Thanks. This is along the direction I was looking. MS visual studio had a scribble example in its samples folder. It shows how to draw curves freehand in response to mouse events, store the curves and refresh client area when the viewport undergoes zooming and panning (ie handling logical vs pixel coordinate systems).  These are the APIs I was looking for."}, {"owner": {"reputation": 166, "user_id": 1086929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238a95b7b04984fd3a5ebd26a116f3c6?s=128&d=identicon&r=PG", "display_name": "Jinhao", "link": "https://stackoverflow.com/users/1086929/jinhao"}, "edited": false, "score": 1, "creation_date": 1426820876, "post_id": 29143388, "comment_id": 46537658, "body": "paint::graphics just provides a limited drawing functions, but by using GDI+, you will get rich drawing functions, see <a href=\"http://nanapro.org/en-us/help/faq.htm\" rel=\"nofollow noreferrer\">FAQ</a>"}], "owner": {"reputation": 3422, "user_id": 1458030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3728aa864efa903f4d0c7db9ac39989?s=128&d=identicon&r=PG", "display_name": "qPCR4vir", "link": "https://stackoverflow.com/users/1458030/qpcr4vir"}, "is_accepted": true, "score": 2, "last_activity_date": 1426767257, "last_edit_date": 1426767257, "creation_date": 1426764484, "answer_id": 29143388, "question_id": 29133606, "link": "https://stackoverflow.com/questions/29133606/is-there-graphical-support-for-scribbling-on-a-canvas-in-the-nana-c-as-in-mfc/29143388#29143388", "title": "Is there graphical support for scribbling on a canvas in the nana c++ as in MFC?", "body": "<p>I could not find the examples at MS, and I'm not sure what you need. You could try with this links:</p>\n\n<p>At docs: <a href=\"http://nanapro.org/en-us/help/utilities/drawing.htm#\" rel=\"nofollow noreferrer\">drawing wrapper</a> or <a href=\"https://github.com/qPCR4vir/nana-docs/wiki/Drawing\" rel=\"nofollow noreferrer\">hier</a>, to set a drawing function.</p>\n\n<p>At doxy-docs: <a href=\"http://qpcr4vir.github.io/nana-docs/nana-doxy/d9/d46/classnana_1_1drawing.html\" rel=\"nofollow noreferrer\">drawing</a></p>\n\n<p>The drawing functions can be constructed using: <a href=\"http://qpcr4vir.github.io/nana-docs/nana-doxy/d6/d47/classnana_1_1paint_1_1graphics.html\" rel=\"nofollow noreferrer\">graphics </a></p>\n\n<p>This way:</p>\n\n<pre><code>#include &lt;nana/gui/wvl.hpp&gt;\n\nint main()\n{\n    using namespace nana;\n\n    form fm;\n    drawing dw(fm);\n    dw.draw([](paint::graphics&amp; graph)\n    {\n        graph.rectangle(rectangle{5, 5, 50, 50}, true, colors::red );\n        graph.line(point(5, 5), point(55, 55), colors::white);\n    });\n\n    dw.update();\n    fm.show();\n    ::nana::exec();\n}\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/p64mO.png\" alt=\"enter image description here\">\nHope it helps</p>\n"}], "owner": {"reputation": 18780, "user_id": 683218, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/7Vy7c.png?s=128&g=1", "display_name": "tinlyx", "link": "https://stackoverflow.com/users/683218/tinlyx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 982, "favorite_count": 3, "accepted_answer_id": 29143388, "answer_count": 1, "score": 2, "last_activity_date": 1442956645, "creation_date": 1426716370, "last_edit_date": 1442956645, "question_id": 29133606, "link": "https://stackoverflow.com/questions/29133606/is-there-graphical-support-for-scribbling-on-a-canvas-in-the-nana-c-as-in-mfc", "title": "Is there graphical support for scribbling on a canvas in the nana c++ as in MFC?", "body": "<p>I had an old graphic application written in MFC of VC6 that I am trying to migrate to a more standard compliant C++ framework. I looked at the documentation of the nana project <a href=\"https://github.com/qPCR4vir/nana-docs/wiki/Examples\" rel=\"nofollow\">here</a>, trying to find a basic example for scribbling on a canvas-like widget similar to the old <a href=\"https://msdn.microsoft.com/en-us/library/92y4h944%28v=vs.90%29.aspx\" rel=\"nofollow\">scribble MDI drawing example</a> that's shipped with Visual C++.</p>\n\n<p>I read that nana is a new promising c++ GUI platform and I am wondering whether it is good for general GUI programming. Looking at the nana documentation, however, there are only examples for buttons, listboxes, and such. I can't find any mention of graphical capabilities such as drawing on a canvas (or in-memory bitmap), which are commonly found in other GUI libraries such as MFC or wxWidgets.</p>\n\n<p>Does anyone know if the nana project can support graphical operations such as those underlying the VC++ <code>scribble</code> example? More specifically, the scribble example in MS visual studio's samples folder demonstrated drawing curves freehand in response to mouse events, storing the curves and refreshing a client area when the viewport undergoes zooming and panning (i.e. handling logical v.s.  image/pixel coordinate systems). These are the graphical API support I was looking for.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "matrix", "double", "cin"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1426715928, "post_id": 29133421, "comment_id": 46492678, "body": "Use a <a href=\"http://www.cplusplus.com/reference/vector/vector/\" rel=\"nofollow noreferrer\">vector</a> and don&#39;t worry about the size."}, {"owner": {"reputation": 185, "user_id": 2187318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80961ceffd42104d4cbc6813f2f7c84c?s=128&d=identicon&r=PG", "display_name": "ibm701", "link": "https://stackoverflow.com/users/2187318/ibm701"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1426716650, "post_id": 29133421, "comment_id": 46492989, "body": "Problem isn&#39;t in place some data somewhere, probles is in read that data."}], "answers": [{"comments": [{"owner": {"reputation": 185, "user_id": 2187318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80961ceffd42104d4cbc6813f2f7c84c?s=128&d=identicon&r=PG", "display_name": "ibm701", "link": "https://stackoverflow.com/users/2187318/ibm701"}, "edited": false, "score": 0, "creation_date": 1426716898, "post_id": 29133486, "comment_id": 46493096, "body": "I tryed to do that: getline(std::cin, ts);     std::istringstream s(ts);     cout &lt;&lt; ts &lt;&lt; endl;     while (s &gt;&gt; tempPoint){         if (!s.good()){             return 1;         }         tempArray = new double [tempSize+1];         tempArray[tempSize] = tempPoint;         tempSize++;     }     cout &lt;&lt; &quot;temp size &quot; &lt;&lt; tempSize &lt;&lt; endl;  But I it didn&#39;t ask me to print anything, just had end of program and output is:   temp size 0 Program ended with exit code: 0"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 185, "user_id": 2187318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80961ceffd42104d4cbc6813f2f7c84c?s=128&d=identicon&r=PG", "display_name": "ibm701", "link": "https://stackoverflow.com/users/2187318/ibm701"}, "edited": false, "score": 0, "creation_date": 1426717087, "post_id": 29133486, "comment_id": 46493164, "body": "Please add that code, with formatting, to your question."}, {"owner": {"reputation": 185, "user_id": 2187318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80961ceffd42104d4cbc6813f2f7c84c?s=128&d=identicon&r=PG", "display_name": "ibm701", "link": "https://stackoverflow.com/users/2187318/ibm701"}, "edited": false, "score": 0, "creation_date": 1426717754, "post_id": 29133486, "comment_id": 46493401, "body": "Done. Some text to add comment"}, {"owner": {"reputation": 185, "user_id": 2187318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80961ceffd42104d4cbc6813f2f7c84c?s=128&d=identicon&r=PG", "display_name": "ibm701", "link": "https://stackoverflow.com/users/2187318/ibm701"}, "edited": false, "score": 0, "creation_date": 1426718870, "post_id": 29133486, "comment_id": 46493806, "body": "Works same as my code, but if I used it twise the second one will works good. Maybe I need to clean my cin somehow?"}, {"owner": {"reputation": 185, "user_id": 2187318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80961ceffd42104d4cbc6813f2f7c84c?s=128&d=identicon&r=PG", "display_name": "ibm701", "link": "https://stackoverflow.com/users/2187318/ibm701"}, "edited": false, "score": 0, "creation_date": 1426719440, "post_id": 29133486, "comment_id": 46493999, "body": "I read one int number before. When I removed part of code where I&#39;m reading that int, everything works great."}], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 0, "last_activity_date": 1426717989, "last_edit_date": 1426717989, "creation_date": 1426715877, "answer_id": 29133486, "question_id": 29133421, "link": "https://stackoverflow.com/questions/29133421/reading-double-matrix-from-cin/29133486#29133486", "title": "Reading double matrix from cin", "body": "<ol>\n<li><p>Read a line using <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow\"><code>std::getline</code></a>.</p></li>\n<li><p>Construct a <a href=\"http://en.cppreference.com/w/cpp/io/basic_istringstream\" rel=\"nofollow\"><code>std::istringstream</code></a> from the line.</p></li>\n<li><p>Keep reading numbers from the <code>std::istringstream</code> and add them to a <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow\"><code>std::vector</code></a>. When you are done reading the contents of the line, the number of items in the <code>std::vector</code> gives you the rank of the matrix.</p></li>\n<li><p>Use the same logic that was used to read the first row of the matrix to read the other rows of the matrix.</p></li>\n</ol>\n\n<p><strong>EDIT</strong></p>\n\n<pre><code>void readRow(std::vector&lt;int&gt;&amp; row)\n{\n   std::string ts;\n   std::getline(std::cin, ts);\n   if ( std::cin )\n   {\n      std::istringstream s(ts);\n      int item;\n      while (s &gt;&gt; item){\n         row.push_back(item);\n      }\n   }\n   std::cout &lt;&lt; \"size \" &lt;&lt; numbers.size() &lt;&lt; std::endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 185, "user_id": 2187318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80961ceffd42104d4cbc6813f2f7c84c?s=128&d=identicon&r=PG", "display_name": "ibm701", "link": "https://stackoverflow.com/users/2187318/ibm701"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 848, "favorite_count": 0, "accepted_answer_id": 29133486, "answer_count": 1, "score": 0, "last_activity_date": 1426717989, "creation_date": 1426715662, "last_edit_date": 1426717648, "question_id": 29133421, "link": "https://stackoverflow.com/questions/29133421/reading-double-matrix-from-cin", "title": "Reading double matrix from cin", "body": "<p>I need to read squad matrix from cin, but I don't know the size of this matrix. So I need to read first row(double numbers separated by space or tab till end of line). After parse this line to get count of double numbers. If in row will be n double numbers then matrix size will nxn. How can I do that? </p>\n\n<p>Code:</p>\n\n<pre><code>unsigned int tempSize = 0;\ndouble tempPoint;\ndouble * tempArray = new double [0];\nstring ts;\n\ngetline(std::cin, ts);\nstd::istringstream s(ts);\nwhile (s &gt;&gt; tempPoint){\n    if (!s.good()){\n        return 1;\n    }\n    tempArray = new double [tempSize+1];\n    tempArray[tempSize] = tempPoint;\n    tempSize++;\n}\ncout &lt;&lt; \"temp size \" &lt;&lt; tempSize &lt;&lt; endl;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>temp size 0\nProgram ended with exit code: 0\n</code></pre>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1426714714, "post_id": 29133201, "comment_id": 46492119, "body": "Which line(s) does the error point to?"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1426714987, "post_id": 29133201, "comment_id": 46492258, "body": "I can&#39;t see the <code>FromTmeta</code> symbol that the compiler is complaining about.  Is it elsewhere, or did you rename it in your example code?"}, {"owner": {"reputation": 1222, "user_id": 1115716, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/22KiX.jpg?s=128&g=1", "display_name": "easythrees", "link": "https://stackoverflow.com/users/1115716/easythrees"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1426715065, "post_id": 29133201, "comment_id": 46492296, "body": "@immibis The first error points to the &#39;From  * tdnItem&#39; declaration. The second one is on the asSomething(...) call."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1426715067, "post_id": 29133201, "comment_id": 46492299, "body": "I suspect <code>downcast</code> is a macro. macros and template parameters don&#39;t work well if you are using the arguments to concatenate other things to the type."}, {"owner": {"reputation": 1222, "user_id": 1115716, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/22KiX.jpg?s=128&g=1", "display_name": "easythrees", "link": "https://stackoverflow.com/users/1115716/easythrees"}, "edited": false, "score": 0, "creation_date": 1426715106, "post_id": 29133201, "comment_id": 46492318, "body": "yes, downcast(...) is a macro, you might be right, let me check."}, {"owner": {"reputation": 1222, "user_id": 1115716, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/22KiX.jpg?s=128&g=1", "display_name": "easythrees", "link": "https://stackoverflow.com/users/1115716/easythrees"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1426715242, "post_id": 29133201, "comment_id": 46492383, "body": "@Drew Dormann I think they may be internal code from the macro R Sahu mentioned below."}], "answers": [{"comments": [{"owner": {"reputation": 1222, "user_id": 1115716, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/22KiX.jpg?s=128&g=1", "display_name": "easythrees", "link": "https://stackoverflow.com/users/1115716/easythrees"}, "edited": false, "score": 0, "creation_date": 1426716388, "post_id": 29133359, "comment_id": 46492874, "body": "That was it, thanks. While I can&#39;t use this exact solution, I can replace the macro with something else."}], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1426715339, "creation_date": 1426715339, "answer_id": 29133359, "question_id": 29133201, "link": "https://stackoverflow.com/questions/29133201/compilation-error-with-template-functions-inline/29133359#29133359", "title": "compilation error with template functions inline", "body": "<p>I suspect <code>downcast</code> is a pre-processor macro. Pre-processor macros and template parameters don't work well if you are using the arguments to concatenate other things to the type.</p>\n\n<p>Replace</p>\n\n<pre><code>From  * tdnItem = downcast( item, From );\n</code></pre>\n\n<p>by</p>\n\n<pre><code>From  * tdnItem = dynamic_cast&lt;From*&gt;(item);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>someClass = downcast( tdnItem-&gt;gloo(), To );\n</code></pre>\n\n<p>by</p>\n\n<pre><code>someClass = dynamic_cast&lt;To*&gt;( tdnItem-&gt;gloo());\n</code></pre>\n"}], "owner": {"reputation": 1222, "user_id": 1115716, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/22KiX.jpg?s=128&g=1", "display_name": "easythrees", "link": "https://stackoverflow.com/users/1115716/easythrees"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 29133359, "answer_count": 1, "score": 1, "last_activity_date": 1426715339, "creation_date": 1426714679, "question_id": 29133201, "link": "https://stackoverflow.com/questions/29133201/compilation-error-with-template-functions-inline", "title": "compilation error with template functions inline", "body": "<p>I have a simple template function that uses two parameters:  </p>\n\n<pre><code>template&lt;typename To, typename From&gt;To* asSomething( Common *item)\n{\n    From  * tdnItem = downcast( item, From );\n    To    * someClass = NULL;\n\n    if( tdnItem != NULL ) \n    {\n        someClass = downcast( tdnItem-&gt;gloo(), To );\n    }\n\n    return someClass;\n}\n</code></pre>\n\n<p>Later, I call this helper method in another inline method:  </p>\n\n<pre><code>return asSomething&lt;ToFoo, FromFoo&gt;(item);\n</code></pre>\n\n<p>However, I get a weird compilation error in Visual Studio:  </p>\n\n<pre><code>error C2065: 'FromTmeta' : undeclared identifier\nsee reference to function template instantiation 'To *asSomething&lt;ToFoo,FromFoo&gt;(Common * *)' being compiled\nwith\n[\n    To=ToFoo\n]\nerror C2065: 'ToTmeta' : undeclared identifier\n</code></pre>\n\n<p>The function declaration looks correct to me, what's the issue here?</p>\n"}, {"tags": ["c++", "loops"], "comments": [{"owner": {"reputation": 1228, "user_id": 995959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXPWG.png?s=128&g=1", "display_name": "gibertoni", "link": "https://stackoverflow.com/users/995959/gibertoni"}, "edited": false, "score": 0, "creation_date": 1426714724, "post_id": 29133160, "comment_id": 46492123, "body": "You are looping until i = j. This will make the first if compare to GuessedName[j], which is off limits."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1426714868, "post_id": 29133160, "comment_id": 46492196, "body": "Also, those loops that print question marks need not be there.  All you need is a single line: <code>cout &lt;&lt; string(GuessName.length(), &#39;?&#39;);</code>"}, {"owner": {"reputation": 7, "user_id": 4670003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ddd34268ecf1c54b5427c19303c1e9?s=128&d=identicon&r=PG&f=1", "display_name": "Majda Alrashdi", "link": "https://stackoverflow.com/users/4670003/majda-alrashdi"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1426739251, "post_id": 29133160, "comment_id": 46499008, "body": "@PaulMcKenzie i need them to calculate j."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1426758746, "post_id": 29133160, "comment_id": 46506241, "body": "@MajdaAlrashdi You don&#39;t need loops to calculate <code>j</code>.  <code>j += GuessName.length();</code>"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1426770984, "post_id": 29133160, "comment_id": 46513777, "body": "sorry, you haven&#39;t 1440 lines in your code post.  [] operator doesn&#39;t have array bound check (there&#39;s a method for that) so I&#39;m lost.  Where&#39;s the line with the error?"}], "answers": [{"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": true, "score": 0, "last_activity_date": 1426714712, "creation_date": 1426714712, "answer_id": 29133208, "question_id": 29133160, "link": "https://stackoverflow.com/questions/29133160/error-string-subscript-out-of-range-c/29133208#29133208", "title": "error string subscript out of range c++", "body": "<p><code>while (i &lt;= j)</code> should be <code>while (i &lt; j)</code>.</p>\n\n<p>Otherwise <code>GuessedName[i]</code> will try to access out-of-bounds when <code>i == j</code>. <code>j - 1</code> is the index of the last letter.</p>\n"}], "owner": {"reputation": 7, "user_id": 4670003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ddd34268ecf1c54b5427c19303c1e9?s=128&d=identicon&r=PG&f=1", "display_name": "Majda Alrashdi", "link": "https://stackoverflow.com/users/4670003/majda-alrashdi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 29133208, "answer_count": 1, "score": 0, "last_activity_date": 1426714712, "creation_date": 1426714499, "question_id": 29133160, "link": "https://stackoverflow.com/questions/29133160/error-string-subscript-out-of-range-c", "title": "error string subscript out of range c++", "body": "<p>i have a guessed name game. and i have a problem with this function. in the nested loop if the user entered a wrong letter it gives me this error:</p>\n\n<p>line: 1440\nexpression: string subscript out of range</p>\n\n<p>this is the function:</p>\n\n<pre><code>void Play(int selection, int FArraySize, int  MArraySize,string Female[], string Male[])//Receive the selected name category array and its size and implements the game logic as shown in the sample run. Uses function GetRandomName(\u2026).\n{\n    int MAX_TRIES = 4;\n    int m = 0;\n    int x=0;\n    int j=0;\n    ofstream ofFile;\n    ifstream InFile;\n    int num_of_wrong_guesses=0;\n    char letter;\n    string GuessedName;\n    GuessedName = GetRandomName(selection, FArraySize, MArraySize, Female, Male);\n\n    cout &lt;&lt; \"Guess the following name:\" &lt;&lt; endl;\n\n\n    for(int y = 0; y &lt; GuessedName.length(); y++){\n        cout &lt;&lt; \"?\";\n        j++;\n    }\n\n    cout &lt;&lt; \"\\nEnter a guess letter? or * to enter the entire name\" &lt;&lt; endl;\n    cin &gt;&gt; letter;\n\n    int i =0;\n\n    for ( int count = 0 ; count &lt;= MAX_TRIES ; count++)\n    {\n        while (i &lt;= j)\n        {\n\n            if (letter ==  GuessedName[i])\n            {\n                i = m;\n                cout &lt;&lt; letter &lt;&lt; \" exists in the name\";\n                cout &lt;&lt; \"\\nyou have \" &lt;&lt; MAX_TRIES &lt;&lt; \" remaining guess attemps... \"&lt;&lt; endl;\n                break;\n            }\n            if (i == j)\n            {\n                cout &lt;&lt;\"Sorry! \" &lt;&lt; letter &lt;&lt; \" dose not exist in the name\";\n                cout &lt;&lt; \"\\nyou have \" &lt;&lt; MAX_TRIES-- &lt;&lt; \" remaining guess attemps... \";\n                break;\n            }\n            i++;\n        }\n\n        cout &lt;&lt; \"\\nGuess the following name:\" &lt;&lt; endl;\n    for(int y = 0; y &lt; GuessedName.length(); y++){\n        cout &lt;&lt; \"?\";\n        j++;\n    }\n        cin &gt;&gt; letter;\n    }\n    return;\n}\n</code></pre>\n\n<p>hope you can help me.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "edited": false, "score": 0, "creation_date": 1426715867, "post_id": 29133025, "comment_id": 46492644, "body": "One thing you can do to help both yourself and others trying to help is to try to find a minimal program that exhibits the same problem.  Sometimes you&#39;ll find your own problem while doing that (and learn a thing or two along the way.) If not, you&#39;re in better shape to have someone else see the problem."}, {"owner": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "edited": false, "score": 0, "creation_date": 1426716043, "post_id": 29133025, "comment_id": 46492731, "body": "FYI, the compiler is MinGW, not Dev-C++.  Dev-C++ is an IDE.  Your version seems to be pretty old, too.  If you actually have a compiler issue, it&#39;s probably not going to get fixed."}, {"owner": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "edited": false, "score": 0, "creation_date": 1426717047, "post_id": 29133025, "comment_id": 46493145, "body": "Looking again, why is it that you are trying to use uint128_t?  A 32-bit integer will hold values from -2 billion to +2 billion (plus a tad more on either end) and unsigned 32-bit integer will hold values from 0 to over 4 billion. A uint64_t will hold values your computer can&#39;t even count up to in your lifetime."}, {"owner": {"reputation": 1, "user_id": 3673395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56a912782eb1800b7945a721b55c0b0d?s=128&d=identicon&r=PG&f=1", "display_name": "user3673395", "link": "https://stackoverflow.com/users/3673395/user3673395"}, "reply_to_user": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "edited": false, "score": 0, "creation_date": 1426718091, "post_id": 29133025, "comment_id": 46493523, "body": "That&#39;s the kicker, i&#39;m currently studying programming in sweden, and i&#39;ve only learn C. The c++ course haven&#39;t started yet. So do you think that i only should change the value on Experience &gt; 2147483647? I&#39;ve also been told that Uint128_t will make it &quot;easier&quot; for me."}, {"owner": {"reputation": 1, "user_id": 3673395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56a912782eb1800b7945a721b55c0b0d?s=128&d=identicon&r=PG&f=1", "display_name": "user3673395", "link": "https://stackoverflow.com/users/3673395/user3673395"}, "reply_to_user": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "edited": false, "score": 0, "creation_date": 1426718484, "post_id": 29133025, "comment_id": 46493665, "body": "What do you suggest me to use to compile this, then?!"}, {"owner": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "edited": false, "score": 0, "creation_date": 1426718980, "post_id": 29133025, "comment_id": 46493845, "body": "That 2147483647 is the actual maximum value that a signed (two&#39;s complement) 32 bit integer can hold.  What is that about?  It has nothing to do with &quot;a maximum score of one millon&quot; that I can see.  I can&#39;t see the code...and if it&#39;s the code for a whole game, I don&#39;t want to look at it.  That&#39;s what a minimal example will provide--a brief statement in code of what problem you are having that someone else can understand."}, {"owner": {"reputation": 1, "user_id": 3673395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56a912782eb1800b7945a721b55c0b0d?s=128&d=identicon&r=PG&f=1", "display_name": "user3673395", "link": "https://stackoverflow.com/users/3673395/user3673395"}, "reply_to_user": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "edited": false, "score": 0, "creation_date": 1426719100, "post_id": 29133025, "comment_id": 46493888, "body": "Should i post the whole code then? for player.h and player.cpp or even protocolgame.cpp?"}, {"owner": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "edited": false, "score": 0, "creation_date": 1426719452, "post_id": 29133025, "comment_id": 46494003, "body": "WIth MinGW 3.x, I&#39;m not sure if there even is an implementation of 128 bit integers. If the old code was working with 32 (or 64) bit integers, there is no reason to change types just to accommodate a value of one million.  That will easily fit in 32-bits.  You might need extra precision on some intermediate calculations, but that should be handled by those specific functions or methods that perform the computation."}, {"owner": {"reputation": 1, "user_id": 3673395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56a912782eb1800b7945a721b55c0b0d?s=128&d=identicon&r=PG&f=1", "display_name": "user3673395", "link": "https://stackoverflow.com/users/3673395/user3673395"}, "reply_to_user": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "edited": false, "score": 0, "creation_date": 1426719844, "post_id": 29133025, "comment_id": 46494108, "body": "So, yea it worked with 32 and 64 bit and i tried to change this  I have updated the main thread  This made me level to around 1million, and then it just stops. 23:37 You are level : ----&gt; 1025743 &lt;----"}, {"owner": {"reputation": 1, "user_id": 3673395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56a912782eb1800b7945a721b55c0b0d?s=128&d=identicon&r=PG&f=1", "display_name": "user3673395", "link": "https://stackoverflow.com/users/3673395/user3673395"}, "reply_to_user": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "edited": false, "score": 0, "creation_date": 1426720251, "post_id": 29133025, "comment_id": 46494230, "body": "@mikehousky  This is what someone told me   &quot;The max value of uint64_t is the max level that you reach right now and you can&#39;t just change to uint128_t to allow more levels because that don&#39;t exist by default so you have to code that. You can check here that code already done and you have do add to your server:  <a href=\"http://www.codef00.com/code/uint128.h\" rel=\"nofollow noreferrer\">codef00.com/code/uint128.h</a>  Then you just need to change the type to uint128_t&quot;"}], "owner": {"reputation": 1, "user_id": 3673395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56a912782eb1800b7945a721b55c0b0d?s=128&d=identicon&r=PG&f=1", "display_name": "user3673395", "link": "https://stackoverflow.com/users/3673395/user3673395"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 310, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1426719997, "creation_date": 1426714004, "last_edit_date": 1426719997, "question_id": 29133025, "link": "https://stackoverflow.com/questions/29133025/errors-while-compiling-dev-c-tibia", "title": "Errors while compiling Dev-c++ tibia", "body": "<p>I have a problem while compiling my client with stians dev c++,</p>\n\n<p>Some background i'm currently trying to change code in The forgottenserver.dev so it can allow me to level above 1million in a game called Tibia. I've changed the value from \"uint64_t\" To \"uint128_t\" in Player.h and player.cpp.\nI've also changed in the protocolgame.cpp but that's just the exp limit</p>\n\n<pre><code>  if(experience &gt; 2147483647) // client debugs after 2,147,483,647 exp\n msg-&gt;put&lt;uint32_t&gt;(2147483647);\n</code></pre>\n\n<p>So back to the problem, when im compiling im getting about 27-30 errors depends on what i try. Log:</p>\n\n<pre><code>    Compiler: Default compiler\nBuilding Makefile: \"C:\\Users\\Dennis\\Desktop\\444444444\\trunk.r3884\\dev-cpp\\Makefile.win\"\nExecuting  make...\nmake.exe -f \"C:\\Users\\Dennis\\Desktop\\444444444\\trunk.r3884\\dev-cpp\\Makefile.win\" all\ng++.exe -c ../actions.cpp -o obj//actions.o -I\"C:/Stian's Repack Dev-Cpp v2/include/c++\"  -D__USE_MYSQL__ -D__USE_SQLITE__ -D__ENABLE_SERVER_DIAGNOSTIC__ -O2   -fexpensive-optimizations -O1\n\nIn file included from C:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/gregorian/greg_duration_types.hpp:12,\n                 from C:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/gregorian/gregorian_types.hpp:22,\n                 from C:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/posix_time/posix_time_config.hpp:14,\n                 from C:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/posix_time/posix_time_system.hpp:13,\n                 from C:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/posix_time/ptime.hpp:12,\n                 from C:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/posix_time/posix_time_types.hpp:12,\n                 from C:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/asio/detail/select_reactor.hpp:25,\n                 from C:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/asio/impl/io_service.ipp:27,\n                 from C:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/asio/io_service.hpp:550,\n                 from C:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/asio/basic_io_object.hpp:20,\n                 from C:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/asio/basic_socket.hpp:24,\n                 from C:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/asio/basic_datagram_socket.hpp:25,\n                 from C:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/asio.hpp:20,\n                 from ../otsystem.h:33,\n                 from ../baseevents.h:20,\n                 from ../actions.h:20,\n                 from ../actions.cpp:20:\n\nC:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/gregorian_calendar.ipp: In static member function `static bool boost::date_time::gregorian_calendar_base&lt;ymd_type_, date_int_type_&gt;::is_leap_year(typename ymd_type_::year_type) [with ymd_type_ = boost::gregorian::greg_year_month_day, date_int_type_ = long unsigned int]':\nC:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/gregorian_calendar.ipp:182:   instantiated from `static short unsigned int boost::date_time::gregorian_calendar_base&lt;ymd_type_, date_int_type_&gt;::end_of_month_day(typename ymd_type_::year_type, typename ymd_type_::month_type) [with ymd_type_ = boost::gregorian::greg_year_month_day, date_int_type_ = long unsigned int]'\nC:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/gregorian/greg_date.hpp:58:   instantiated from here\nC:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/gregorian_calendar.ipp:167: error: ambiguous overload for 'operator%' in 'year % 400'\nC:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/gregorian_calendar.ipp:167: note: candidates are: operator%(int, int) &lt;built-in&gt;\n../uint128_t.h:373: note:                 T operator%(const T&amp;, const uint128_t&amp;) [with T = boost::gregorian::greg_year]\n\nC:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/gregorian_calendar.ipp:167: error: ambiguous overload for 'operator%' in 'year % 100'\nC:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/gregorian_calendar.ipp:167: note: candidates are: operator%(int, int) &lt;built-in&gt;\n../uint128_t.h:373: note:                 T operator%(const T&amp;, const uint128_t&amp;) [with T = boost::gregorian::greg_year]\nC:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/gregorian_calendar.ipp:167: error: ambiguous overload for 'operator%' in 'year % 4'\nC:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/gregorian_calendar.ipp:167: note: candidates are: operator%(int, int) &lt;built-in&gt;\n../uint128_t.h:373: note:                 T operator%(const T&amp;, const uint128_t&amp;) [with T = boost::gregorian::greg_year]\n\nIn file included from ../player.h:23,\n                 from ../actions.cpp:23:\n../creature.h: In member function `virtual double Creature::getGainedExperience(Creature*) const':\n../creature.h:355: error: conversion from `uint128_t' to `double' is ambiguous\n../uint128_t.cpp:24: note: candidates are: uint128_t::operator bool() const\n../uint128_t.cpp:28: note:                 uint128_t::operator char() const\n../uint128_t.cpp:31: note:                 uint128_t::operator int() const\n../uint128_t.cpp:35: note:                 uint128_t::operator uint8_t() const\n../uint128_t.cpp:39: note:                 uint128_t::operator uint16_t() const\n../uint128_t.cpp:43: note:                 uint128_t::operator uint32_t() const\n../uint128_t.cpp:47: note:                 uint128_t::operator uint64_t() const\n\nIn file included from ../actions.cpp:24:\n../monster.h: At global scope:\n../monster.h:189: error: conflicting return type specified for `virtual uint64_t Monster::getLostExperience() const'\n\n../creature.h:556: error:   overriding `virtual uint128_t Creature::getLostExperience() const'\n\nIn file included from ../scheduler.h:22,\n                 from ../game.h:25,\n                 from ../actions.cpp:30:\n../dispatcher.h: In constructor `Task::Task(uint32_t, const boost::function&lt;void ()()&gt;&amp;)':\n../dispatcher.h:31: error: ISO C++ says that these are ambiguous, even though the worst conversion for the first is better than the worst conversion for the second:\nC:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/time.hpp:160: note: candidate 1: T boost::date_time::base_time&lt;T, time_system&gt;::operator+(const typename time_system::time_duration_type&amp;) const [with T = boost::posix_time::ptime, time_system = boost::posix_time::posix_time_system]\n../uint128_t.h:337: note: candidate 2: T operator+(const T&amp;, const uint128_t&amp;) [with T = boost::system_time]\n\n../uint128_t.h: In function `bool operator==(const T&amp;, const uint128_t&amp;) [with T = boost::system_time]':\n../dispatcher.h:39:   instantiated from here\n../uint128_t.h:304: error: `const class boost::posix_time::ptime' used where a `uint64_t' was expected\n\n../dispatcher.h: In member function `bool Task::hasExpired() const':\n../dispatcher.h:42: error: ISO C++ says that these are ambiguous, even though the worst conversion for the first is better than the worst conversion for the second:\nC:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/time.hpp:130: note: candidate 1: bool boost::date_time::base_time&lt;T, time_system&gt;::operator&lt;(const T&amp;) const [with T = boost::posix_time::ptime, time_system = boost::posix_time::posix_time_system]\n\n../uint128_t.h:315: note: candidate 2: bool operator&lt;(const T&amp;, const uint128_t&amp;) [with T = boost::system_time]\n\nmake.exe: *** [obj//actions.o] Error 1\n\nExecution terminated\n</code></pre>\n\n<p>I would love if someone could help me with this problem \nRegards,\nDennis</p>\n\n<p>Edit:</p>\n\n<pre><code>    static uint64_t getExpForLevel(uint32_t lv) { static std::map&lt;uint32_t, uint64_t&gt; cache; lv--;\n\nstd::map&lt;uint32_t, uint64_t&gt;::iterator it = cache.find(lv); if(it != cache.end()) return it-&gt;second;\n\nuint64_t exp = ((50ULL * (lv+1ULL) / 3ULL - 100ULL) * (lv+1ULL) + 850ULL / 3ULL) * (lv+1ULL) - 200ULL; cache[lv] = exp; return exp; }\n</code></pre>\n"}, {"tags": ["c++", "memory", "memory-management"], "comments": [{"owner": {"reputation": 23041, "user_id": 1149664, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ac4f96b553d2e45776bd6235fee4222d?s=128&d=identicon&r=PG", "display_name": "Johan Lundberg", "link": "https://stackoverflow.com/users/1149664/johan-lundberg"}, "edited": false, "score": 3, "creation_date": 1426715968, "post_id": 29132960, "comment_id": 46492697, "body": "Great beginners question, and nicely stated."}], "answers": [{"comments": [{"owner": {"reputation": 18507, "user_id": 2213940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NEbb2.jpg?s=128&g=1", "display_name": "Zig Mandel", "link": "https://stackoverflow.com/users/2213940/zig-mandel"}, "edited": false, "score": 1, "creation_date": 1426716296, "post_id": 29133026, "comment_id": 46492831, "body": "Yes. Only the &quot;wrapper&quot; vector is in the stack. Internally it probably just contains a pointer. It would be different if it was an array, where the array size must remain fixed precisely because of the issues you ask."}], "owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "is_accepted": true, "score": 10, "last_activity_date": 1426714008, "creation_date": 1426714008, "answer_id": 29133026, "question_id": 29132960, "link": "https://stackoverflow.com/questions/29132960/c-stack-based-object-allocation/29133026#29133026", "title": "C++ stack-based object allocation", "body": "<p>Putting <code>vector</code> object on stack doesn't mean it will put its elements on stack. Check documentation:</p>\n\n<blockquote>\n  <p>Internally, vectors use a dynamically allocated array to store their elements. This array may need to be reallocated in order to grow in size when new elements are inserted, which implies allocating a new array and moving all elements to it. </p>\n</blockquote>\n\n<p>From: <a href=\"http://www.cplusplus.com/reference/vector/vector/\" rel=\"noreferrer\">http://www.cplusplus.com/reference/vector/vector/</a></p>\n"}], "owner": {"reputation": 273, "user_id": 3724417, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4cbf080175ab5964b7b524a61422b8d1?s=128&d=identicon&r=PG&f=1", "display_name": "user3724417", "link": "https://stackoverflow.com/users/3724417/user3724417"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 29133026, "answer_count": 1, "score": 8, "last_activity_date": 1426714008, "creation_date": 1426713799, "question_id": 29132960, "link": "https://stackoverflow.com/questions/29132960/c-stack-based-object-allocation", "title": "C++ stack-based object allocation", "body": "<p>In C++ there are two ways one can declare an object. For example:</p>\n\n<pre><code>// The first way\nvector&lt;int&gt; *nums = new vector&lt;int&gt;;\n\n// The second way\nvector&lt;int&gt; nums;\n</code></pre>\n\n<p>People say that the first declaration allocates the object in the heap and the second on the stack. I can imagine how it works if the vector object is in the heap. The compiler would just find a free block in the heap to store the vector. But what would happen if the object is allocated on the stack as I keep pushing new elements to the vector? Will there be enough memory space? If not, how would the compiler find a sufficiently big memory block on the stack to store the vector when the size of the vector can change?</p>\n"}, {"tags": ["c++", "c++11", "language-lawyer", "undefined-behavior"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1426714103, "post_id": 29132928, "comment_id": 46491851, "body": "Should be OK for <a href=\"http://en.cppreference.com/w/cpp/concept/CopyConstructible\" rel=\"nofollow noreferrer\">CopyConstructible</a> types."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1426714227, "post_id": 29132928, "comment_id": 46491901, "body": "Why not swap <code>reinterpret_cast&lt;int&amp;&gt;(storage1)</code> and <code>reinterpret_cast&lt;int&amp;&gt;(storage2)</code>?"}, {"owner": {"reputation": 2050, "user_id": 3024983, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/px3w6.jpg?s=128&g=1", "display_name": "Veritas", "link": "https://stackoverflow.com/users/3024983/veritas"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1426714375, "post_id": 29132928, "comment_id": 46491964, "body": "@immibis because this is what is done in the original piece of code."}], "answers": [{"comments": [{"owner": {"reputation": 2050, "user_id": 3024983, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/px3w6.jpg?s=128&g=1", "display_name": "Veritas", "link": "https://stackoverflow.com/users/3024983/veritas"}, "edited": false, "score": 2, "creation_date": 1426772293, "post_id": 29145646, "comment_id": 46514660, "body": "I am not sure if the first quote is enough to dismiss this as undefined behaviour. Specifically we don&#39;t use the original objects after the swap but bitwise copies so it should be okay for trivially-copyable types but undefined in the general case but that probably depends on the implementation of std::swap. If it does byte-wise swapping instead of making another container and swapping it afterwards, then it should always result in undefined behavior since the objects&#39; lifetime ends before a copy is made."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 2050, "user_id": 3024983, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/px3w6.jpg?s=128&g=1", "display_name": "Veritas", "link": "https://stackoverflow.com/users/3024983/veritas"}, "edited": false, "score": 0, "creation_date": 1426773463, "post_id": 29145646, "comment_id": 46515537, "body": "@AlexandrosLiarokapis: Fair points. I don&#39;t believe there&#39;s any wording to describe how the lifetime of an object may begin by it being bitwise copied from someplace else, although frankly it&#39;s pretty ambiguous. Perhaps the only valid answer is &quot;nobody knows; steer clear&quot;!"}], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 1, "last_activity_date": 1426771029, "creation_date": 1426771029, "answer_id": 29145646, "question_id": 29132928, "link": "https://stackoverflow.com/questions/29132928/swapping-storage-buffers-containing-placement-new-created-objects/29145646#29145646", "title": "Swapping storage buffers containing placement new created objects", "body": "<p>I suspect there are a few factors rendering this undefined, but we only need one:</p>\n\n<blockquote>\n  <p><code>[C++11: 3.8/1]:</code> <em>[..]</em> <strong>The lifetime of an object of type <code>T</code> ends when</strong>:</p>\n  \n  <ul>\n  <li>if <code>T</code> is a class type with a non-trivial destructor (12.4), the destructor call starts, or</li>\n  <li><strong>the storage which the object occupies is reused</strong> or released.</li>\n  </ul>\n</blockquote>\n\n<p>All subsequent use is use after end-of-life, which is bad and wrong.</p>\n\n<p>The key is that each buffer is being reused.</p>\n\n<p><strong>So, although I would expect this to work in practice at least for trivial types (and for some classes), it's undefined.</strong></p>\n\n<hr>\n\n<p>The following may have been able to save you:</p>\n\n<blockquote>\n  <p><code>[C++11: 3.8/7]:</code> If, after the lifetime of an object has ended and before the storage which the object occupied is reused or released, a new object is created at the storage location which the original object occupied, a pointer that  pointed to the original object, a reference that referred to the original object, or the name of the original object will automatically refer to the new object and, once the lifetime of the new object has started, can be used to manipulate the new object <em>[..]</em></p>\n</blockquote>\n\n<p>&hellip;except that you are not creating a new object.</p>\n\n<p>It may or may not be worth noting here that, surprisingly, the ensuing implicit destructor calls are both well-defined:</p>\n\n<blockquote>\n  <p><code>[C++11: 3.8/8]:</code> If a program ends the lifetime of an object of type <code>T</code> with static (3.7.1), thread (3.7.2), or automatic (3.7.3) storage duration and if <code>T</code> has a non-trivial destructor, the program must ensure that an object of the original type occupies that same storage location when the implicit destructor call takes place; otherwise the behavior of the program is undefined.</p>\n</blockquote>\n"}], "owner": {"reputation": 2050, "user_id": 3024983, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/px3w6.jpg?s=128&g=1", "display_name": "Veritas", "link": "https://stackoverflow.com/users/3024983/veritas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 29145646, "answer_count": 1, "score": 3, "last_activity_date": 1426771029, "creation_date": 1426713670, "last_edit_date": 1426770248, "question_id": 29132928, "link": "https://stackoverflow.com/questions/29132928/swapping-storage-buffers-containing-placement-new-created-objects", "title": "Swapping storage buffers containing placement new created objects", "body": "<p>I recently saw a piece of code which used storage buffers to create objects and then simply swapped the buffers in order to avoid the copying overhead. Here is a simple example using integers:</p>\n\n<pre><code>std::aligned_storage_t&lt;sizeof(int), alignof(int)&gt; storage1;\nstd::aligned_storage_t&lt;sizeof(int), alignof(int)&gt; storage2;\n\nnew (&amp;storage1) int(1);\nnew (&amp;storage2) int(2);\n\nstd::swap(storage1, storage2);\n\nint i1 = reinterpret_cast&lt;int&amp;&gt;(storage1);\nint i2 = reinterpret_cast&lt;int&amp;&gt;(storage2);\n\n//this prints 2 1\nstd::cout &lt;&lt; i1 &lt;&lt; \" \" &lt;&lt; i2 &lt;&lt; std::endl;\n</code></pre>\n\n<p>This feels like undefined behaviour in the general case (specifically swapping the buffers and then accessing the objects as if they were still there) but I am not sure what the standard says about such usage of storage and placement new. Any feedback is much appreciated!</p>\n"}, {"tags": ["java", "android", "c++", "java-native-interface"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1426714631, "post_id": 29132918, "comment_id": 46492075, "body": "Do you have a MainActivity instance to call it on? What you&#39;re trying now is the equivalent of <code>((MainActivity)&quot;root view&quot;).ganalyiticscall();</code> in Java."}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1426719306, "post_id": 29132918, "comment_id": 46493955, "body": "&quot;(Ljava/lang/String;I;)V;&quot; suggests the method takes two parameters, a String and an int. But you&#39;re only passing a single String argument. That seems like a bad idea."}, {"owner": {"reputation": 11, "user_id": 4687261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e171313bd355366e6030ceda9bd4bd57?s=128&d=identicon&r=PG&f=1", "display_name": "Lostinfound88", "link": "https://stackoverflow.com/users/4687261/lostinfound88"}, "edited": false, "score": 0, "creation_date": 1426771637, "post_id": 29132918, "comment_id": 46514222, "body": "ya not so familiar with uni here never really used it before. but to give more context I have a cocos2d game and trying to get the cclayers to pass what &quot;view&quot; they are to the java function for google analytics"}], "owner": {"reputation": 11, "user_id": 4687261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e171313bd355366e6030ceda9bd4bd57?s=128&d=identicon&r=PG&f=1", "display_name": "Lostinfound88", "link": "https://stackoverflow.com/users/4687261/lostinfound88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1426719359, "creation_date": 1426713614, "last_edit_date": 1426719359, "question_id": 29132918, "link": "https://stackoverflow.com/questions/29132918/jni-calling-java-function-from-c", "title": "Jni calling java function from c++", "body": "<p>This google function gets called on cclayers like pause etc with the view name\n analyticsInterface.cpp</p>\n\n<pre><code>void analyticsInterface::google (std::string x){\nJniMethodInfo t;\n\nif (JniHelper::getMethodInfo(t,\n \"com.pathto.MainActivity\",\n \"ganalyiticscall\",\n \"(Ljava/lang/String;I;)V;\")) {\n\n   char* myName = \"root view\";\n  int times = 3;\n\n jstring stringArg1 = t.env-&gt;NewStringUTF(myName);\n t.env-&gt;CallVoidMethod(t.classID,\n     t.methodID,\n   stringArg1);\n\n t.env-&gt;DeleteLocalRef(t.classID);\n t.env-&gt;DeleteLocalRef(stringArg1);\n}}\n</code></pre>\n\n<p>trying to call this function via the cpp as the main activity doesn't know what layer is active.</p>\n\n<p>mainacivity.java</p>\n\n<pre><code>public void ganalyiticscall(String ScreenName){\n    GoogleAnalytics mGaInstance = GoogleAnalytics.getInstance(this);\n    Tracker t = mGaInstance.newTracker(\"UA-xxxxx-1\");\n    Log.i(\"call from ganal\",\"tracker made\");\n        // Set screen name.\n    t.setScreenName(ScreenName);\n\n    // Send a screen view.\n    t.send(new HitBuilders.ScreenViewBuilder().build());\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "glsl"], "comments": [{"owner": {"reputation": 44714, "user_id": 731620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6e2168c4647a4f096a14c254bd3d3f68?s=128&d=identicon&r=PG", "display_name": "ratchet freak", "link": "https://stackoverflow.com/users/731620/ratchet-freak"}, "edited": false, "score": 1, "creation_date": 1426713630, "post_id": 29132824, "comment_id": 46491610, "body": "grab the log with glGetShaderInfoLog\u200b and print that"}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1426716630, "post_id": 29132824, "comment_id": 46492984, "body": "Check logs, post MCVE, etc.  Make sure your <code>#version</code> directive line has a newline at the end."}, {"owner": {"reputation": 19, "user_id": 4598432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6927386892c7adbd8b1c2067493a788c?s=128&d=identicon&r=PG&f=1", "display_name": "Jed Stevens", "link": "https://stackoverflow.com/users/4598432/jed-stevens"}, "reply_to_user": {"reputation": 44714, "user_id": 731620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6e2168c4647a4f096a14c254bd3d3f68?s=128&d=identicon&r=PG", "display_name": "ratchet freak", "link": "https://stackoverflow.com/users/731620/ratchet-freak"}, "edited": false, "score": 0, "creation_date": 1426717514, "post_id": 29132824, "comment_id": 46493322, "body": "@ratchetfreak printing the info log gives me the following     E"}], "answers": [{"comments": [{"owner": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "edited": false, "score": 0, "creation_date": 1426822360, "post_id": 29133324, "comment_id": 46538047, "body": "Gotta say... I don&#39;t see much use in declaring something <code>auto</code> if you have the compiler deduce its type by writing <code>= GLint()</code>. Seems like you could save a lot of typing if you <i>didn&#39;t</i> use <code>auto</code>."}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1426847960, "post_id": 29133324, "comment_id": 46548073, "body": "I use auto everywhere and that kind of declaration ensures it&#39;s always initialised.  The compiler can&#39;t deduce the type given the variable&#39;s future use (unfortunately).  It&#39;s just a general rule I use."}], "owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "is_accepted": true, "score": 3, "last_activity_date": 1426715133, "creation_date": 1426715133, "answer_id": 29133324, "question_id": 29132824, "link": "https://stackoverflow.com/questions/29132824/glsl-shader-wont-compile-can-someone-help-me-find-out-why/29133324#29133324", "title": "GLSL shader wont compile, can someone help me find out why?", "body": "<p>I didn't look at your shader but you can get an error message from the compiler with something like:</p>\n\n<pre><code>auto error = GLint();\n\n::glGetShaderiv(id, GL_COMPILE_STATUS, &amp;error);\n\nif(error != GL_TRUE)\n{       \n    auto length = GLint();\n\n    ::glGetShaderiv(id, GL_INFO_LOG_LENGTH, &amp;length);\n\n    if(length &gt; 0)\n    {\n        auto log = std::vector&lt;GLchar&gt;(length, 0);\n\n        ::glGetShaderInfoLog(id, length, nullptr, &amp;log[0]);\n\n        auto message = std::string(log.begin(), log.end());\n        ...\n    } \n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 4598432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6927386892c7adbd8b1c2067493a788c?s=128&d=identicon&r=PG&f=1", "display_name": "Jed Stevens", "link": "https://stackoverflow.com/users/4598432/jed-stevens"}, "edited": false, "score": 0, "creation_date": 1426781475, "post_id": 29136466, "comment_id": 46521321, "body": "Changing that gave me a different error, so I&#39;m not totally sure if it&#39;s just one thing going wrong. After making this change I get a new error (checked with glGetError()) on this call:      glEnableVertexAttribArray(tCoordLoc[i]);"}, {"owner": {"reputation": 570, "user_id": 3675675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f559445731f12caeb4418b97fe9b42f?s=128&d=identicon&r=PG&f=1", "display_name": "Maurice", "link": "https://stackoverflow.com/users/3675675/maurice"}, "reply_to_user": {"reputation": 19, "user_id": 4598432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6927386892c7adbd8b1c2067493a788c?s=128&d=identicon&r=PG&f=1", "display_name": "Jed Stevens", "link": "https://stackoverflow.com/users/4598432/jed-stevens"}, "edited": false, "score": 0, "creation_date": 1426783874, "post_id": 29136466, "comment_id": 46522753, "body": "Ok so the shader error has gone away, right? The glEnableVertexAttribArray is not part of the shown code so I am not sure, but I guess that you pass the wrong argument. This function is used to enable the vertexAttribs that you specify using glVertexAttribPointer and not the location of a uniform."}], "owner": {"reputation": 570, "user_id": 3675675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f559445731f12caeb4418b97fe9b42f?s=128&d=identicon&r=PG&f=1", "display_name": "Maurice", "link": "https://stackoverflow.com/users/3675675/maurice"}, "is_accepted": false, "score": 1, "last_activity_date": 1426733819, "creation_date": 1426733819, "answer_id": 29136466, "question_id": 29132824, "link": "https://stackoverflow.com/questions/29132824/glsl-shader-wont-compile-can-someone-help-me-find-out-why/29136466#29136466", "title": "GLSL shader wont compile, can someone help me find out why?", "body": "<p>One possible error in the shader might be:</p>\n\n<blockquote>\n  <p>gl_Position = position;</p>\n</blockquote>\n\n<p>The gl_Position should be of type vec4, but the position is an attribute of vec3, you probably forgot to do something like:</p>\n\n<blockquote>\n  <p>gl_Position = mvpMatrix * vec4(position, 1.0f);</p>\n</blockquote>\n"}], "owner": {"reputation": 19, "user_id": 4598432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6927386892c7adbd8b1c2067493a788c?s=128&d=identicon&r=PG&f=1", "display_name": "Jed Stevens", "link": "https://stackoverflow.com/users/4598432/jed-stevens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 390, "favorite_count": 0, "accepted_answer_id": 29133324, "answer_count": 2, "score": 0, "last_activity_date": 1426786568, "creation_date": 1426713314, "last_edit_date": 1426786568, "question_id": 29132824, "link": "https://stackoverflow.com/questions/29132824/glsl-shader-wont-compile-can-someone-help-me-find-out-why", "title": "GLSL shader wont compile, can someone help me find out why?", "body": "<p>I've been staring at this for too long and I'm too new to GLSL to know what is wrong. All I know is that when checking to see if the vertex shader compiles, it says that it could not do so. If someone could help me find out what I've done wrong that would be amazing.</p>\n\n<p>textureShader.vert</p>\n\n<pre><code>#version 140\n\nuniform mat4 mvpMatrix;\n\nattribute vec3 position;\nattribute vec2 textCoord;\n\nvarying vec2 TextCoord;\nvarying vec3 lightDir,normal;\n\nvoid main()\n{\n    normal = normalize(gl_NormalMatrix * gl_Normal);\n\n    lightDir = normalize(vec3(gl_LightSource[0].position));\n    gl_TexCoord[0] = gl_MultiTexCoord0;\n\n    gl_Position = position;\n}\n</code></pre>\n\n<p>textureShader.frag</p>\n\n<pre><code>#version 140\n\nuniform sampler2D texUnit;\n\nvarying vec2 TextCoord;\nvarying vec3 lightDir,normal;\n\nvoid main()\n{\n    vec3 ct,cf;\n    vec4 texel;\n    float intensity,at,af;\n    intensity = max(dot(lightDir,normalize(normal)),0.0);\n\n    cf = intensity * (gl_FrontMaterial.diffuse).rgb + gl_FrontMaterial.ambient.rgb;\n    af = gl_FrontMaterial.diffuse.a;\n    texel = texture2D(texUnit, TextCoord);\n\n    ct = texel.rgb;\n    at = texel.a;\n    gl_FragColor = vec4(ct * cf, at * af);\n\n}\n</code></pre>\n\n<p>What I'm doing to check the compilation. DBOUT is a function to write to the Visual Studio output box.</p>\n\n<pre><code>glCompileShader(shader_vp);\nvalidateShader(shader_vp, vsFile);\n\nGLint compiled;\nglGetShaderiv(shader_vp, GL_COMPILE_STATUS, &amp;compiled);\nif (!compiled){\n    DBOUT(\"Couldn't Compile Vertex Shader: Aborting Mission\\n\");\n    abort();\n}\n\n\nglCompileShader(shader_fp);\nvalidateShader(shader_fp, fsFile);\n\nglGetShaderiv(shader_fp, GL_COMPILE_STATUS, &amp;compiled);\n\nif (!compiled){\n    DBOUT(\"Couldn't Compile Fragment Shader: Aborting Mission\\n\");\n    abort();\n}\n</code></pre>\n\n<p>The output I receive:</p>\n\n<pre><code>Couldn't Compile Vertex Shader: Aborting Mission\nDebug Error!\n</code></pre>\n\n<p><strong>SOLVED</strong></p>\n\n<p>So with everyones help I go this to compile. I had to replace these lines:</p>\n\n<pre><code>    gl_TexCoord[0] = gl_MultiTexCoord0;\n\n    gl_Position = position;\n</code></pre>\n\n<p>With these ones:</p>\n\n<pre><code>    TextCoord = vec2(textCoord);\n\n    gl_Position = mvpMatrix * vec4(position,1.0f);\n</code></pre>\n\n<p>Thank you everyone!</p>\n"}, {"tags": ["c++", "boost-spirit", "boost-spirit-qi"], "answers": [{"comments": [{"owner": {"reputation": 2928, "user_id": 1603365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/K4qJN.png?s=128&g=1", "display_name": "md5i", "link": "https://stackoverflow.com/users/1603365/md5i"}, "edited": false, "score": 0, "creation_date": 1426786930, "post_id": 29135644, "comment_id": 46524516, "body": "Thank you for the very nifty work you have done here.  I, unfortunately, can&#39;t use it unless I copy all the relevant headers (need to work with existing boost installs).  But I really appreciate the effort you put in, and the understanding it has given me."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 2928, "user_id": 1603365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/K4qJN.png?s=128&g=1", "display_name": "md5i", "link": "https://stackoverflow.com/users/1603365/md5i"}, "edited": false, "score": 0, "creation_date": 1426804976, "post_id": 29135644, "comment_id": 46533278, "body": "You are aware that if Spirit is header-only, right? Also, even if you went the &quot;deep&quot; way and created your own parser directive, you could opt to fit that in ~2 headers of your own. Even if you don&#39;t, why don&#39;t you just pre-include your version of that header? Include guards do the rest..."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 2928, "user_id": 1603365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/K4qJN.png?s=128&g=1", "display_name": "md5i", "link": "https://stackoverflow.com/users/1603365/md5i"}, "edited": false, "score": 0, "creation_date": 1426805188, "post_id": 29135644, "comment_id": 46533343, "body": "Here&#39;s a live demo: <a href=\"http://coliru.stacked-crooked.com/a/d45cc286c63c104d\" rel=\"nofollow noreferrer\"><b><code>numeric_utils.hpp</code></b> (patched)</a>; Here&#39;s the program with the hack <i>disabled</i>: <a href=\"http://coliru.stacked-crooked.com/a/45d898047f8bb925\" rel=\"nofollow noreferrer\"><code>main.cpp</code></a> and here it is with the hack <i>enabled</i>: <a href=\"http://coliru.stacked-crooked.com/a/d592d0901b767cee\" rel=\"nofollow noreferrer\"><code>main.cpp</code></a>. Now if I can do this &quot;with existing boost installs&quot; on an online compiler service, I think it&#39;s fair to say you have this option too :)"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 2928, "user_id": 1603365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/K4qJN.png?s=128&g=1", "display_name": "md5i", "link": "https://stackoverflow.com/users/1603365/md5i"}, "edited": false, "score": 0, "creation_date": 1426889230, "post_id": 29135644, "comment_id": 46570777, "body": "@md5i What do you think? (feedback appreciated)"}, {"owner": {"reputation": 2928, "user_id": 1603365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/K4qJN.png?s=128&g=1", "display_name": "md5i", "link": "https://stackoverflow.com/users/1603365/md5i"}, "edited": false, "score": 0, "creation_date": 1426991360, "post_id": 29135644, "comment_id": 46594928, "body": "I&#39;m sorry. You obviously did a good amount of work to produce you (quite informative) answer, so the least I can do is give you my underlying reasons.  1) As you say, it&#39;s a header-only library, so I can just copy an modify a header.  But the next time qi is updated in a future version of boost, I may need to copy can modify it again.  And it might not be me that owns the code any more.  2) I don&#39;t like copying code that I don&#39;t understand well.  It&#39;s fine code (I assume), but it is very dense, and quite opaque.  More in my next comment..."}, {"owner": {"reputation": 2928, "user_id": 1603365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/K4qJN.png?s=128&g=1", "display_name": "md5i", "link": "https://stackoverflow.com/users/1603365/md5i"}, "edited": false, "score": 0, "creation_date": 1426991604, "post_id": 29135644, "comment_id": 46594975, "body": "In point of fact, this is not the only problem I have run into attempting to use qi.  In fact, I grew so frustrated with it, that I resolved to not use it at all.  A day later, I calmed down, and am exploring it again, but I still have some problems with it.  1) The documentation is shallow.  It is not bad.  In fact, it&#39;s better than much boost documentation.  But it is shallow.  For example, I could not find out from the documentation that the third bool argument to an action function object was a pass variable.  There are many important details left out.  2) The code is very opaque.  More..."}, {"owner": {"reputation": 2928, "user_id": 1603365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/K4qJN.png?s=128&g=1", "display_name": "md5i", "link": "https://stackoverflow.com/users/1603365/md5i"}, "edited": false, "score": 0, "creation_date": 1426991768, "post_id": 29135644, "comment_id": 46595005, "body": "When documentation fails, read the source.  But the source is so heavily template-meta-programmed, it&#39;s difficult to find anything.  I searched for a very long time before I was able to determine what file used the third argument of an action object.  I do not fault the design; this is what makes qi flexible and fast.  But it makes learning by inspection very, very difficult.   In summary, I probably really need a book to understand it, or many questions on its mailing list.  But I do thank you for your answer, and I am still playing with using spirit in my parser."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 2928, "user_id": 1603365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/K4qJN.png?s=128&g=1", "display_name": "md5i", "link": "https://stackoverflow.com/users/1603365/md5i"}, "edited": false, "score": 0, "creation_date": 1427032734, "post_id": 29135644, "comment_id": 46603370, "body": "Oh dear lord. Who told you needed all that :( Semantic actions use Boost Phoenix actors, which are specifically designed to make interacting with parser context <i>user friendly</i>. All that cruft is <i>really</i> library implmenentation detail. In fact you&#39;ve inspired me to <b><a href=\"http://stackoverflow.com/questions/29132809/using-boostspiritqi-to-parse-numbers-with-separators/29195187#29195187\">write another answer</a></b> showing you the completely naive and slightly smarter Pure-Qi approaches."}], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 3, "last_activity_date": 1426728056, "creation_date": 1426728056, "answer_id": 29135644, "question_id": 29132809, "link": "https://stackoverflow.com/questions/29132809/using-boostspiritqi-to-parse-numbers-with-separators/29135644#29135644", "title": "Using boost::spirit::qi to parse numbers with separators", "body": "<p>If you <em>really</em> want to do this the \"nice\" way, you'd have to hack it into <code>extract_int</code> in numeric_utils.hpp. </p>\n\n<p>Even better, you'd want to make it a strategy class much like with the <code>real_policies</code> used by <code>real_parser</code>. Because just mixing in more branches with the existing <em>general purpose</em> integer handling code just complicates that and has the potential to slow down <em>any</em> integer parsing.</p>\n\n<p>I have not done this. However, I <strong>do</strong> have a proof-of-concept approach here: </p>\n\n<ul>\n<li><a href=\"https://github.com/boostorg/spirit/compare/master...sehe:so_q29132809\" rel=\"nofollow\">https://github.com/boostorg/spirit/compare/master...sehe:so_q29132809</a></li>\n</ul>\n\n<p>Mind you, this is not well tested and not fit for serious use for the reasons stated, but you can use it as inspiration. You might want to just duplicate the <code>uint_parser</code> directive as-a-whole and stick it in your <strong><a href=\"http://www.boost.org/doc/libs/1_57_0/libs/spirit/doc/html/spirit/repository.html\" rel=\"nofollow\">Spirit Repository</a> location</strong>.</p>\n\n<hr>\n\n<h2>The patch</h2>\n\n<ol>\n<li><p>It's relatively straightforward. If you define <code>ALLOW_SO_UNDERSCORE_HACK</code> you will get the bypass for underscore inserted into the loop unrolling macros:</p>\n\n<pre><code>#if defined(ALLOW_SO_UNDERSCORE_HACK)\n#   define SPIRIT_SO_SKIP_UNDERSCORE_HACK()                                   \\\n                if ('_' == *it) {                                             \\\n                    ++it;                                                     \\\n                    continue;                                                 \\\n                }\n#else\n#   define SPIRIT_SO_SKIP_UNDERSCORE_HACK()\n#endif\n</code></pre>\n\n<p>The only real complexity there is from \"seeing through: the optimizations made in that translation unit. </p></li>\n<li><p>There's a rather arbitrary choice to (dis)allow underscores amonge the leading zeros. I have opted to do so:</p>\n\n<pre><code>#if defined(ALLOW_SO_UNDERSCORE_HACK)\n                // skip leading zeros\n                for(;it != last;++it) {\n                    if ('0' == *it &amp;&amp; leading_zeros &lt; MaxDigits) {\n                        ++leading_zeros;\n                        continue;\n                    } else if ('_' == *it) {\n                        continue;\n                    }\n                    break;\n                }\n#else\n</code></pre></li>\n<li><p>Finally, uderscores are <em>not</em> counted towards the <code>MinDigits</code> and <code>MaxDigits</code> limits</p></li>\n</ol>\n\n<h2>DEMO</h2>\n\n<p>The following test program demonstrates things. <strong>Note</strong> The reordering of branches.</p>\n\n<pre><code>#include &lt;boost/spirit/include/qi.hpp&gt;\n\nnamespace qi = boost::spirit::qi;\n\ntemplate &lt;typename Iterator&gt;\nstruct unsigned_parser : qi::grammar&lt;Iterator, uint64_t()&gt; {\n\n    unsigned_parser() : unsigned_parser::base_type(start) {\n        using namespace qi;\n        uint_parser&lt;uint64_t, 10&gt; dec_parser;\n        uint_parser&lt;uint64_t, 16&gt; hex_parser;\n        uint_parser&lt;uint64_t, 8&gt; oct_parser;\n        uint_parser&lt;uint64_t, 2&gt; bin_parser;\n\n        start = eps(false)\n            | (hex_parser &gt;&gt; omit[ char_(\"hHxX\")]) /* hexadecimal with suffix */\n            | (oct_parser &gt;&gt; omit[ char_(\"qQoO\")]) /* octal with suffix */\n            | (bin_parser &gt;&gt; omit[ char_(\"bByY\")]) /* binary with suffix */\n            | (dec_parser &gt;&gt; omit[-char_(\"dDtT\")]) /* decimal with optional suffix */\n            ;\n    }\n\n    qi::rule&lt;Iterator, uint64_t()&gt; start;\n};\n\nint main(int argv, const char *argc[]) {\n    typedef std::string::const_iterator iter;\n    unsigned_parser&lt;iter&gt; up;\n\n    for (auto const&amp; test : std::vector&lt;std::string&gt;(argc+1, argc+argv)) {\n        iter i = test.begin(), end = test.end();\n\n        uint64_t val;\n        bool rv = parse(i, end, up, val);\n\n        std::cout &lt;&lt; (rv?\"Successful\":\"Failed\") &lt;&lt; \" parse: '\" &lt;&lt; test &lt;&lt; \"' -&gt; \" &lt;&lt; val &lt;&lt; \"\\n\";\n\n        if (i != end)\n            std::cout &lt;&lt; \" ** Remaining unparsed: '\" &lt;&lt; std::string(i,end) &lt;&lt; \"'\\n\";\n    }\n}\n</code></pre>\n\n<p>If you call it with command line arguments <code>123_456 123456 1_bh 0_010Q 1010_1010_0111_0111_b</code> it will print:</p>\n\n<pre><code>Successful parse: '123_456' -&gt; 123456\nSuccessful parse: '123456' -&gt; 123456\nSuccessful parse: '1_bh' -&gt; 27\nSuccessful parse: '0_010Q' -&gt; 8\nSuccessful parse: '1010_1010_0111_0111_b' -&gt; 43639\n</code></pre>\n\n<h2>LISTING</h2>\n\n<p>Full patch (on <code>boost-1.57.0</code> tag) for preservation on SO:</p>\n\n<pre><code>commit 24b16304f436bfd0f6e2041b2b7be0c8677c7e75\nAuthor: Seth Heeren &lt;sgheeren@gmail.com&gt;\nDate:   Thu Mar 19 01:44:55 2015 +0100\n\n    http://stackoverflow.com/questions/29132809/using-boostspiritqi-to-parse-numbers-with-separators\n\n    rough patch for exposition of my answer only\n\ndiff --git a/include/boost/spirit/home/qi/numeric/detail/numeric_utils.hpp b/include/boost/spirit/home/qi/numeric/detail/numeric_utils.hpp\nindex 5137f87..1ced164 100644\n--- a/include/boost/spirit/home/qi/numeric/detail/numeric_utils.hpp\n+++ b/include/boost/spirit/home/qi/numeric/detail/numeric_utils.hpp\n@@ -262,10 +262,21 @@ namespace boost { namespace spirit { namespace qi { namespace detail\n    ///////////////////////////////////////////////////////////////////////////\n    //  extract_int: main code for extracting integers\n    ///////////////////////////////////////////////////////////////////////////\n+#if defined(ALLOW_SO_UNDERSCORE_HACK)\n+#   define SPIRIT_SO_SKIP_UNDERSCORE_HACK()                                   \\\n+                if ('_' == *it) {                                             \\\n+                    ++it;                                                     \\\n+                    continue;                                                 \\\n+                }\n+#else\n+#   define SPIRIT_SO_SKIP_UNDERSCORE_HACK()\n+#endif\n+\n#define SPIRIT_NUMERIC_INNER_LOOP(z, x, data)                                 \\\n        if (!check_max_digits&lt;MaxDigits&gt;::call(count + leading_zeros)         \\\n            || it == last)                                                    \\\n            break;                                                            \\\n+        SPIRIT_SO_SKIP_UNDERSCORE_HACK()                                      \\\n        ch = *it;                                                             \\\n        if (!radix_check::is_valid(ch) || !extractor::call(ch, count, val))   \\\n            break;                                                            \\\n@@ -301,12 +312,25 @@ namespace boost { namespace spirit { namespace qi { namespace detail\n            std::size_t leading_zeros = 0;\n            if (!Accumulate)\n            {\n+#if defined(ALLOW_SO_UNDERSCORE_HACK)\n+                // skip leading zeros\n+                for(;it != last;++it) {\n+                    if ('0' == *it &amp;&amp; leading_zeros &lt; MaxDigits) {\n+                        ++leading_zeros;\n+                        continue;\n+                    } else if ('_' == *it) {\n+                        continue;\n+                    }\n+                    break;\n+                }\n+#else\n                // skip leading zeros\n                while (it != last &amp;&amp; *it == '0' &amp;&amp; leading_zeros &lt; MaxDigits)\n                {\n                    ++it;\n                    ++leading_zeros;\n                }\n+#endif\n            }\n\n            typedef typename\n@@ -366,6 +390,7 @@ namespace boost { namespace spirit { namespace qi { namespace detail\n#define SPIRIT_NUMERIC_INNER_LOOP(z, x, data)                                 \\\n        if (it == last)                                                       \\\n            break;                                                            \\\n+        SPIRIT_SO_SKIP_UNDERSCORE_HACK()                                      \\\n        ch = *it;                                                             \\\n        if (!radix_check::is_valid(ch))                                       \\\n            break;                                                            \\\n@@ -399,12 +424,25 @@ namespace boost { namespace spirit { namespace qi { namespace detail\n            std::size_t count = 0;\n            if (!Accumulate)\n            {\n+#if defined(ALLOW_SO_UNDERSCORE_HACK)\n+                // skip leading zeros\n+                for(;it != last;++it) {\n+                    if ('0' == *it) {\n+                        ++count;\n+                        continue;\n+                    } else if ('_' == *it) {\n+                        continue;\n+                    }\n+                    break;\n+                }\n+#else\n                // skip leading zeros\n                while (it != last &amp;&amp; *it == '0')\n                {\n                    ++it;\n                    ++count;\n                }\n+#endif\n\n                if (it == last)\n                {\n@@ -472,6 +510,7 @@ namespace boost { namespace spirit { namespace qi { namespace detail\n    };\n\n#undef SPIRIT_NUMERIC_INNER_LOOP\n+#undef SPIRIT_SO_SKIP_UNDERSCORE_HACK\n\n    ///////////////////////////////////////////////////////////////////////////\n    // Cast an signed integer to an unsigned integer\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1427034423, "post_id": 29195187, "comment_id": 46603949, "body": "Added the version with <code>BOOST_PHOENIX_ADAPT_FUNCTION</code> <b><a href=\"http://coliru.stacked-crooked.com/a/49f37a60f46674cd\" rel=\"nofollow noreferrer\">Live On Coliru</a></b>"}], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 4, "last_activity_date": 1427034366, "last_edit_date": 1427034366, "creation_date": 1427032275, "answer_id": 29195187, "question_id": 29132809, "link": "https://stackoverflow.com/questions/29132809/using-boostspiritqi-to-parse-numbers-with-separators/29195187#29195187", "title": "Using boost::spirit::qi to parse numbers with separators", "body": "<p>Aw. Nobody should have to bother with implementation details like Spirit parser contexts <em>unless you're extending the library and implementing your own parser directives</em>.</p>\n\n<p>Until that time, <code>phoenix::function&lt;&gt;</code>, <code>phoenix::bind</code> or even <code>BOOST_PHOENIX_ADAPT_FUNCTION</code> should be plenty for anyone.</p>\n\n<p>Here are two approaches to your question without any patches to the library.</p>\n\n<ol>\n<li><p><strong>Straightforward parsing</strong> <strong><a href=\"http://coliru.stacked-crooked.com/a/ecf2534cf55ba7d7\" rel=\"nofollow\">Live On Coliru</a></strong></p>\n\n<p>This could be viewed as the \"naive\" way of parsing the different styles of integers using just Qi and simple semantic actions:</p>\n\n<pre><code>start = \n      eps [_val=0] &gt;&gt; +(char_(\"0-9a-fA-F\") [ _val = _val*16 + _decode(_1) ] | '_')&gt;&gt;  char_(\"hHxX\") /* hexadecimal with suffix */\n    | eps [_val=0] &gt;&gt; +(char_(\"0-7\")       [ _val = _val* 8 + _decode(_1) ] | '_')&gt;&gt;  char_(\"qQoO\") /* octal       with suffix */\n    | eps [_val=0] &gt;&gt; +(char_(\"01\")        [ _val = _val* 2 + _decode(_1) ] | '_')&gt;&gt;  char_(\"bByY\") /* binary      with suffix */\n    | eps [_val=0] &gt;&gt; +(char_(\"0-9\")       [ _val = _val*10 + _decode(_1) ] | '_')&gt;&gt; -char_(\"dDtT\") /* decimal     with optional suffix */\n    ;\n</code></pre>\n\n<p>Of course, you will want to know what <code>_decode</code> looks like. Well you define it yourself:</p>\n\n<pre><code>struct decode {\n    template &lt;typename&gt; struct result { typedef int type; };\n    template &lt;typename Ch&gt; int operator()(Ch ch) const {\n        if (ch&gt;='0' &amp;&amp; ch&lt;='9') return ch - '0';\n        if (ch&gt;='a' &amp;&amp; ch&lt;='z') return ch - 'a' + 10;\n        if (ch&gt;='A' &amp;&amp; ch&lt;='Z') return ch - 'A' + 10;\n        assert(false);\n    }\n};\nboost::phoenix::function&lt;decode&gt; _decode;\n</code></pre></li>\n<li><p><strong>Using <code>BOOST_PHOENIX_ADAPT_FUNCTION</code> macro</strong>  <strong><a href=\"http://coliru.stacked-crooked.com/a/49f37a60f46674cd\" rel=\"nofollow\">Live On Coliru</a></strong></p>\n\n<p>Instead of defining the function object you can use the macro</p>\n\n<pre><code>int decode(char ch) {\n    if (ch&gt;='0' &amp;&amp; ch&lt;='9') return ch - '0';\n    if (ch&gt;='a' &amp;&amp; ch&lt;='z') return ch - 'a' + 10;\n    if (ch&gt;='A' &amp;&amp; ch&lt;='Z') return ch - 'A' + 10;\n    assert(false);\n}\n\nBOOST_PHOENIX_ADAPT_FUNCTION(int, _decode, decode, 1)\n</code></pre></li>\n<li><p><strong>Using <code>std::strtoul</code></strong> <strong><a href=\"http://coliru.stacked-crooked.com/a/3a5c3f87bdcf0634\" rel=\"nofollow\">Live On Coliru</a></strong></p>\n\n<p>Of course, the above may be a tad \"complex\" because it requires you to deal with nitty gritty details of integer arithmetics and digit decoding. </p>\n\n<p>Also, the \"naive\" approach does some duplicate work in case the literal is a decimal value like \"101_101\". It will calculate the <em>subresult</em> for the hex, octal <em>and</em> binary branches before realizing it was a decimal.</p>\n\n<p>So we could change the order around:</p>\n\n<pre><code>start = \n        (raw[+char_(\"_0-9a-fA-F\")] &gt;&gt;  char_(\"hHxX\")) [ _val = _strtoul(_1,16) ] /* hexadecimal with suffix */\n      | (raw[+char_(\"_0-7\")]       &gt;&gt;  char_(\"qQoO\")) [ _val = _strtoul(_1, 8) ] /* octal       with suffix */\n      | (raw[+char_(\"_01\")]        &gt;&gt;  char_(\"bByY\")) [ _val = _strtoul(_1, 2) ] /* binary      with suffix */\n      | (raw[+char_(\"_0-9\")]       &gt;&gt; -char_(\"dDtT\")) [ _val = _strtoul(_1,10) ] /* decimal     with optional suffix */\n      ;\n</code></pre>\n\n<p>Again you will be curious how we implemented <code>_evaluate</code>? It's a function that takes the synthesized attributes from <code>raw</code> (which is an iterator range) and the base, which is definitely known by then:</p>\n\n<pre><code>struct strtoul_f {\n    template &lt;typename, typename&gt; struct result { typedef uint64_t type; };\n    template &lt;typename Raw, typename Int&gt; uint64_t operator()(Raw raw, Int base) const {\n        std::string s(raw.begin(), raw.end());\n        s.erase(std::remove(s.begin(), s.end(), '_'), s.end());\n        char *f(&amp;s[0]), *l(f+s.size());\n        return std::strtoul(f, &amp;l, base);\n    }\n};\nboost::phoenix::function&lt;strtoul_f&gt; _strtoul;\n</code></pre>\n\n<p>As you can see, the only complexity is removing the <code>_</code> from the range first.</p></li>\n</ol>\n"}], "owner": {"reputation": 2928, "user_id": 1603365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/K4qJN.png?s=128&g=1", "display_name": "md5i", "link": "https://stackoverflow.com/users/1603365/md5i"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1132, "favorite_count": 0, "accepted_answer_id": 29195187, "answer_count": 2, "score": 3, "last_activity_date": 1427034366, "creation_date": 1426713275, "last_edit_date": 1426728228, "question_id": 29132809, "link": "https://stackoverflow.com/questions/29132809/using-boostspiritqi-to-parse-numbers-with-separators", "title": "Using boost::spirit::qi to parse numbers with separators", "body": "<p>I am attempting to use boost::spirit::qi to do some parsing.  It's actually going quite well, and I successfully have managed to parse numbers in various bases based on a suffix.  Examples: 123, c12h, 777o, 110101b.</p>\n\n<p>I then wanted to add the ability to allow a completely ignored separator character, to allow values like 123_456 or 1101_0011b to parse.  I tried using the skip parser, but I highly suspect that I completely misunderstood how it was to be used.  It compiles just fine, but my attempt to make it ignore the underscore does absolutely nothing at all.  Any suggestions on how to make this do what I want would be appreciated.  My test code is included below:</p>\n\n<pre><code>#include &lt;boost/spirit/include/qi.hpp&gt;\n#include &lt;boost/spirit/include/phoenix.hpp&gt;\n\nnamespace qi = boost::spirit::qi;\nnamespace ascii = boost::spirit::ascii;\nusing qi::_val;\nusing qi::_1;\nusing qi::skip;\nusing qi::uint_parser;\nusing ascii::char_;\n\ntemplate &lt;typename Iterator&gt;\nstruct unsigned_parser : qi::grammar&lt;Iterator, uint64_t()&gt; {\n\n    unsigned_parser() : unsigned_parser::base_type(start) {\n        uint_parser&lt;uint64_t, 10&gt; dec_parser;\n        uint_parser&lt;uint64_t, 16&gt; hex_parser;\n        uint_parser&lt;uint64_t, 8&gt; oct_parser;\n        uint_parser&lt;uint64_t, 2&gt; bin_parser;\n\n        start = skip(char_('_'))[\n            /* binary with suffix */\n            (bin_parser[_val=_1] &gt;&gt; char_(\"bByY\"))\n            /* octal with suffix */\n            | (oct_parser[_val=_1] &gt;&gt; char_(\"qQoO\"))\n            /* hexadecimal with suffix */\n            | (hex_parser[_val=_1] &gt;&gt; char_(\"hHxX\"))\n            /* decimal with optional suffix */\n            | (dec_parser[_val=_1] &gt;&gt; -char_(\"dDtT\"))\n            ];\n    }\n\n    qi::rule&lt;Iterator, uint64_t()&gt; start;\n};\n\nint main(int argv, const char *argc[]) {\n    typedef std::string::const_iterator iter;\n    unsigned_parser&lt;iter&gt; up;\n    uint64_t val;\n    if (argv != 2) {\n        std::cerr &lt;&lt; \"Usage: \" &lt;&lt; argc[0] &lt;&lt; \" &lt;input&gt;\" &lt;&lt; std::endl;\n        return 1;\n    }\n    std::string test(argc[1]);\n    iter i = test.begin();\n    iter end = test.end();\n    bool rv = parse(i, end, up, val);\n    if (rv &amp;&amp; i == end) {\n        std::cout &lt;&lt; \"Succeeded: \" &lt;&lt; val &lt;&lt; std::endl;\n        return 0;\n    }\n    if (rv) {\n        std::cout &lt;&lt; \"Failed partial parse: \" &lt;&lt; val &lt;&lt; std::endl;\n        return 1;\n    }\n    std::cout &lt;&lt; \"Failed.\" &lt;&lt; std::endl;\n    return 1;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4701, "user_id": 1770601, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/pp9hI.jpg?s=128&g=1", "display_name": "ha9u63ar", "link": "https://stackoverflow.com/users/1770601/ha9u63ar"}, "edited": false, "score": 0, "creation_date": 1426712994, "post_id": 29132692, "comment_id": 46491274, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/14265581/parse-split-a-string-in-c-using-string-delimiter-standard-c\">Parse (split) a string in C++ using string delimiter (standard C++)</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "edited": false, "score": 0, "creation_date": 1426713488, "post_id": 29132763, "comment_id": 46491535, "body": "Incorrect, and also using C-style casts. The stringstream answer above is better, and can also be wrapped in a templated function."}, {"owner": {"reputation": 1457, "user_id": 2868510, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/069f0736011a9f950163f69bfc45b8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy K", "link": "https://stackoverflow.com/users/2868510/tommy-k"}, "edited": false, "score": 0, "creation_date": 1426713494, "post_id": 29132763, "comment_id": 46491539, "body": "it won&#39;t always be a one-digit number though. I&#39;m trying to use .erase() on the string to get rid of the first and last iterator to erase the &lt;&gt; but its not working as I expected."}], "owner": {"reputation": 139, "user_id": 4431104, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/698313754/picture?type=large", "display_name": "Nicholas Callahan", "link": "https://stackoverflow.com/users/4431104/nicholas-callahan"}, "is_accepted": false, "score": 0, "last_activity_date": 1426713118, "creation_date": 1426713118, "answer_id": 29132763, "question_id": 29132692, "link": "https://stackoverflow.com/questions/29132692/parsing-and-turning-a-string-into-a-number/29132763#29132763", "title": "Parsing and turning a string into a number", "body": "<p>First to get the middle character out you can just do <code>char myChar = inputString.at(1);</code>.  Then you can do <code>int myInt = (int)myChar;</code></p>\n"}, {"owner": {"reputation": 820, "user_id": 4266707, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-fLyyGXepW68/AAAAAAAAAAI/AAAAAAAAABI/RjSsIhv1dvs/photo.jpg?sz=128", "display_name": "Javia1492", "link": "https://stackoverflow.com/users/4266707/javia1492"}, "is_accepted": false, "score": 0, "last_activity_date": 1426713333, "creation_date": 1426713333, "answer_id": 29132832, "question_id": 29132692, "link": "https://stackoverflow.com/questions/29132692/parsing-and-turning-a-string-into-a-number/29132832#29132832", "title": "Parsing and turning a string into a number", "body": "<p>Even if you remove the <code>&lt;&gt;</code> characters, your still importing the file content into a string using <code>&gt;&gt;</code> so you still need to cast it to an int. If you have only 1 value, you can follow what Nicholas Callahan wrote in the previous answer, but if you have multiple characters you want to read as int, you dont have a choice but to cast.</p>\n"}, {"comments": [{"owner": {"reputation": 1457, "user_id": 2868510, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/069f0736011a9f950163f69bfc45b8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy K", "link": "https://stackoverflow.com/users/2868510/tommy-k"}, "edited": false, "score": 0, "creation_date": 1426713876, "post_id": 29132851, "comment_id": 46491726, "body": "got it, this works, initially I had <code>value</code> as a string and it wasn&#39;t getting rid of the last <code>&gt;</code>, but I changed it and it works. Thanks!"}], "owner": {"reputation": 530, "user_id": 3795575, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8baee1e391eff6deba9913846dc6bcee?s=128&d=identicon&r=PG&f=1", "display_name": "olive007", "link": "https://stackoverflow.com/users/3795575/olive007"}, "is_accepted": false, "score": 1, "last_activity_date": 1426713387, "creation_date": 1426713387, "answer_id": 29132851, "question_id": 29132692, "link": "https://stackoverflow.com/questions/29132692/parsing-and-turning-a-string-into-a-number/29132851#29132851", "title": "Parsing and turning a string into a number", "body": "<p>use stringstream</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;iostream&gt;\n\nint main() {\n    std::string str = \"&lt;1&gt;\";\n    int value;\n    std::stringstream ss(str);\n    char c;\n\n    ss &gt;&gt; c &gt;&gt; value &gt;&gt; c;\n\n    std::cout &lt;&lt; value;\n}\n</code></pre>\n"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1426713726, "creation_date": 1426713726, "answer_id": 29132942, "question_id": 29132692, "link": "https://stackoverflow.com/questions/29132692/parsing-and-turning-a-string-into-a-number/29132942#29132942", "title": "Parsing and turning a string into a number", "body": "<p>You can also resort to <code>sscanf</code>.</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    std::string str = \"&lt;1234&gt;\";\n    int value;\n    sscanf(str.c_str(), \"&lt;%d&gt;\", &amp;value);\n    std::cout &lt;&lt; value &lt;&lt; std::endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 1457, "user_id": 2868510, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/069f0736011a9f950163f69bfc45b8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy K", "link": "https://stackoverflow.com/users/2868510/tommy-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1426713726, "creation_date": 1426712835, "question_id": 29132692, "link": "https://stackoverflow.com/questions/29132692/parsing-and-turning-a-string-into-a-number", "title": "Parsing and turning a string into a number", "body": "<p>I have an input file which I'm reading in with the basic <code>myFile &gt;&gt; variable</code> since I know the format and the format will always be correct. The file I'm reading in is formatted as <code>instruction &lt;num&gt; &lt;num&gt;</code> and to make <code>&gt;&gt;</code> work, I'm reading everything in as a string. If I have 3 variables, one to take in each piece of the line, how can I then turn string &lt;1> (for example) into int 1? I know the string's first and last characters are brackets which need to be removed, then I could cast to an int, but I'm new to C++ and would like some insight on the best method of doing this (finding and removing the &lt;>, then casting to int)</p>\n"}, {"tags": ["c++", "file", "text", "delimiter", "getline"], "answers": [{"comments": [{"owner": {"reputation": 530, "user_id": 6055567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IPD5P.jpg?s=128&g=1", "display_name": "RichS", "link": "https://stackoverflow.com/users/6055567/richs"}, "edited": false, "score": 0, "creation_date": 1504736579, "post_id": 29132890, "comment_id": 79132408, "body": "What is the variable <code>iss</code>? It is used in the if condition."}], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": true, "score": 1, "last_activity_date": 1504737146, "last_edit_date": 1504737146, "creation_date": 1426713515, "answer_id": 29132890, "question_id": 29132663, "link": "https://stackoverflow.com/questions/29132663/read-in-data-from-text-file-line-by-line-separated-by-multiple-delimiters-in-c/29132890#29132890", "title": "Read in data from text file line by line, separated by multiple delimiters in C++", "body": "<p>You can just keep calling <code>std::getline()</code> with different delimiters:</p>\n\n<pre><code>std::ifstream file(\"test.txt\");\n\nstd::string   line;\nwhile(std::getline(file, line))\n{\n    std::stringstream linestream(line);\n\n    std::string skip;\n    std::string item1;\n    std::string item2;\n    std::string item3;\n    std::string item4;\n\n    std::getline(linestream, item1, ',');\n    std::getline(linestream, skip, '\"');\n    std::getline(linestream, item2, '\"');\n    std::getline(linestream, skip, '(');\n    std::getline(linestream, item3, ')');\n    std::getline(linestream, skip, '[');\n    std::getline(linestream, item4, ']');\n\n    if(linestream) // true if there were no errors reading the stream\n    {\n        std::cout &lt;&lt; item1 &lt;&lt; '\\n';\n        std::cout &lt;&lt; item2 &lt;&lt; '\\n';\n        std::cout &lt;&lt; item3 &lt;&lt; '\\n';\n        std::cout &lt;&lt; item4 &lt;&lt; '\\n';\n    }\n}\n</code></pre>\n\n<p>I used variable <code>skip</code> to read up to the beginning of the next field.</p>\n"}, {"owner": {"reputation": 1174, "user_id": 4450336, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FvdBD.jpg?s=128&g=1", "display_name": "Daniel Robertson", "link": "https://stackoverflow.com/users/4450336/daniel-robertson"}, "is_accepted": false, "score": 0, "last_activity_date": 1426717301, "creation_date": 1426717301, "answer_id": 29133822, "question_id": 29132663, "link": "https://stackoverflow.com/questions/29132663/read-in-data-from-text-file-line-by-line-separated-by-multiple-delimiters-in-c/29133822#29133822", "title": "Read in data from text file line by line, separated by multiple delimiters in C++", "body": "<p>You could use a <code>std::istream::sentry</code> to do this. While a little complicated, you're given almost complete control over how your data is input.</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;sstream&gt;\n#include &lt;map&gt;\n\nstd::istream&amp; operator&gt;&gt;(std::istream&amp; is,\n        std::map&lt;std::string, std::vector&lt;std::string&gt; &gt;&amp; map) {\n    std::istream::sentry s(is);\n    if(s) {\n        // your accumulator\n        std::string str1;\n        // while your stream is good keep appending data\n        while(is.good()) {\n            // get the next character in the stream\n            char c = is.get();\n            // if it is a comma append the data to the \"three\" vector\n            if(c == ',') {\n                map[\"three\"].push_back(str1);\n            // if it is a comma get all of the data until the next comma\n            } else if(c == '\"') {\n                std::string str2;\n                str2 += c;\n                c = is.get();\n                while(c != '\"') {\n                    str2 += c;\n                    c = is.get();\n                }\n                str2 += c;\n                map[\"two\"].push_back(str2);\n            // do the same thing for parenthases\n            } else if(c == '(') {\n                std::string str2;\n                str2 += c;\n                c = is.get();\n                while(c != ')') {\n                    str2 += c;\n                    c = is.get();\n                }\n                str2 += c;\n                map[\"five\"].push_back(str2);\n            // do the same thing for square brackets\n            } else if(c == '[') {\n                std::string str2;\n                str2 += c;\n                c = is.get();\n                while(c != ']') {\n                    str2 += c;\n                    c = is.get();\n                }\n                str2 += c;\n                map[\"four\"].push_back(str2);\n            // append to your accumulator if you get an alphanumeric char\n            } else if(std::isalnum(c)) {\n                str1 += c;\n            // clear your accumulator if you get a return\n            } else if(c == '\\n') {\n                str1.clear();\n            }\n        }\n    }\n    return(is);\n}\n\nint main() {\n    std::ifstream file(\"plop\");\n    // make your map to hold your data\n    std::map&lt;std::string, std::vector&lt;std::string&gt; &gt; map;\n    map[\"two\"] = std::vector&lt;std::string&gt;();\n    map[\"three\"] = std::vector&lt;std::string&gt;();\n    map[\"four\"] = std::vector&lt;std::string&gt;();\n    map[\"five\"] = std::vector&lt;std::string&gt;();\n\n    // read your data\n    file &gt;&gt; map;\n\n    // print your data\n    std::vector&lt;std::string&gt; words{\"two\", \"three\", \"four\", \"five\"};\n\n    for(auto x: words) {\n        std::cout &lt;&lt; x &lt;&lt; std::endl;\n        for(auto y: map[x]){\n            std::cout &lt;&lt; '\\t' &lt;&lt; y &lt;&lt; std::endl;\n        }\n    }\n}\n</code></pre>\n\n<p>This should print</p>\n\n<pre><code>two\n    \"hi\"\n    \"by\"\nthree\n    hey\n    bye\nfour\n    [hola]\n    [biii]\nfive\n    (hello)\n    (byeee)\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 4451083, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9d75dd49264f44354563801aa0319f9c?s=128&d=identicon&r=PG&f=1", "display_name": "Will", "link": "https://stackoverflow.com/users/4451083/will"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1626, "favorite_count": 0, "accepted_answer_id": 29132890, "answer_count": 2, "score": 0, "last_activity_date": 1504737146, "creation_date": 1426712725, "question_id": 29132663, "link": "https://stackoverflow.com/questions/29132663/read-in-data-from-text-file-line-by-line-separated-by-multiple-delimiters-in-c", "title": "Read in data from text file line by line, separated by multiple delimiters in C++", "body": "<p>I have data in a text file which I wish to read in and split up to then create a new object out of. </p>\n\n<p>I have found this code:</p>\n\n<pre><code>std::ifstream file(\"plop\");\nstd::string   line;\n\nwhile(std::getline(file, line))\n{\n    std::stringstream   linestream(line);\n    std::string         data;\n    int                 val1;\n    int                 val2;\n\n    std::getline(linestream, data, '\\t');\n\n    linestream &gt;&gt; val1 &gt;&gt; val2;\n}\n</code></pre>\n\n<p>Which reads in a text document and splits it by line. However this code assumes the delimiter is always a tab. What if the data had more than one delimiter which would point to what type of data would follow it. i.e assuming a text file such as:</p>\n\n<pre><code>hey, \"hi\" (hello) [hola]\nbye, \"by\" (byeee) [biii]\n</code></pre>\n\n<p>and I wanted to split the data into</p>\n\n<pre><code>String twoCharacters;\nString threeCharacters;\nString fourCharacters;\nString fiveCharacters;\n</code></pre>\n\n<p>so</p>\n\n<pre><code>twoCharacters = hi and by\n</code></pre>\n\n<p>with the delimiter being two \" \nand</p>\n\n<pre><code>threeCharacters = hey and bye\n</code></pre>\n\n<p>with the delimiter being a , after it</p>\n\n<p>Any help would be greatly appreciated! Thanks.</p>\n"}, {"tags": ["c++", "windows", "destructor"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1426712974, "post_id": 29132644, "comment_id": 46491255, "body": "You are doing more copying than you think when you do <code>_b = func()</code>.  The return of <code>funcA</code> produces a <code>B</code> object, then you assign that temporary <code>B</code> object to <code>_b</code>,  Also, your &quot;rule of 3&quot; implementation is seriously broken."}, {"owner": {"reputation": 8029, "user_id": 3137499, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7acff2bbbdb9c51ea478377a0f6dcb03?s=128&d=identicon&r=PG&f=1", "display_name": "aruisdante", "link": "https://stackoverflow.com/users/3137499/aruisdante"}, "edited": false, "score": 4, "creation_date": 1426712996, "post_id": 29132644, "comment_id": 46491275, "body": "Well, for one, your copy constructor isn&#39;t correct. It&#39;s not actually <i>copying</i> the table, it&#39;s just making two <code>B</code> objects that both point to the same table. That&#39;s a pretty bad ownership problem; If either is deleted, the table is deleted. Your assignment overload has the same problem. You basically just duplicated the naive shallow copy."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1426713380, "post_id": 29132644, "comment_id": 46491474, "body": "Also, it makes it easier if you moved the (albeit wrong) code in the assignment operator to the copy constructor, and let the assignment operator implement copy/swap (once the copy constructor code is fixed)."}, {"owner": {"reputation": 8029, "user_id": 3137499, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7acff2bbbdb9c51ea478377a0f6dcb03?s=128&d=identicon&r=PG&f=1", "display_name": "aruisdante", "link": "https://stackoverflow.com/users/3137499/aruisdante"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1426717754, "post_id": 29132644, "comment_id": 46493400, "body": "To elaborate on @PaulMcKenzie &#39;s point, read about the <a href=\"http://en.cppreference.com/w/cpp/language/operators#Assignment_operator\" rel=\"nofollow noreferrer\">canonical implementation</a> of <code>operator=</code>."}], "answers": [{"comments": [{"owner": {"reputation": 8029, "user_id": 3137499, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7acff2bbbdb9c51ea478377a0f6dcb03?s=128&d=identicon&r=PG&f=1", "display_name": "aruisdante", "link": "https://stackoverflow.com/users/3137499/aruisdante"}, "edited": false, "score": 2, "creation_date": 1426713204, "post_id": 29132742, "comment_id": 46491384, "body": "Alternatively, if shared-table semantics are really what you want (copying/assigning a <code>B</code> results in two <code>B</code>&#39;s pointing to the same table instance), then it needs to be some form of shared pointer rather than a raw one."}, {"owner": {"reputation": 41, "user_id": 759913, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/9ad7df99c5a98f79e0559e301a600509?s=128&d=identicon&r=PG", "display_name": "user759913", "link": "https://stackoverflow.com/users/759913/user759913"}, "edited": false, "score": 0, "creation_date": 1426715190, "post_id": 29132742, "comment_id": 46492351, "body": "Thank you! Sorry, it is a typo in the code. It is actually an array, this is my default constructor:        B() : table(new C *[TABLE_SIZE]()) {}  As per your suggestion, i modified the copy constructor:      B(const B&amp; other) : table(new (C *[TABLE_SIZE])(*other.table)) {}  but I have this error &quot;an array can only be initialized with an initializer-list&quot;"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 41, "user_id": 759913, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/9ad7df99c5a98f79e0559e301a600509?s=128&d=identicon&r=PG", "display_name": "user759913", "link": "https://stackoverflow.com/users/759913/user759913"}, "edited": false, "score": 1, "creation_date": 1426716298, "post_id": 29132742, "comment_id": 46492833, "body": "@user759913 If it&#39;s actually an array, you&#39;ll have to copy it manually."}, {"owner": {"reputation": 41, "user_id": 759913, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/9ad7df99c5a98f79e0559e301a600509?s=128&d=identicon&r=PG", "display_name": "user759913", "link": "https://stackoverflow.com/users/759913/user759913"}, "edited": false, "score": 0, "creation_date": 1426718090, "post_id": 29132742, "comment_id": 46493522, "body": "Thanks. Is this the right way to copy? \tB(const B&amp; other)  \t{ \t\ttable = new C*[TABLE_SIZE](); \t\tfor (int i = 0; i &lt; TABLE_SIZE; i++) \t\t{ \t\t\ttable[i] = other.table[i]; \t\t} \t}"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 41, "user_id": 759913, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/9ad7df99c5a98f79e0559e301a600509?s=128&d=identicon&r=PG", "display_name": "user759913", "link": "https://stackoverflow.com/users/759913/user759913"}, "edited": false, "score": 0, "creation_date": 1426751173, "post_id": 29132742, "comment_id": 46502585, "body": "@user759913 That, or <code>std::copy</code>."}], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": false, "score": 3, "last_activity_date": 1426713389, "last_edit_date": 1426713389, "creation_date": 1426713051, "answer_id": 29132742, "question_id": 29132644, "link": "https://stackoverflow.com/questions/29132644/c-calls-destructor-immediately-even-when-rule-of-three-is-followed/29132742#29132742", "title": "C++ calls destructor immediately, even when rule of three is followed", "body": "<p>You do have the copy constructor and copy assignment operator implemented, but <em>incorrectly.</em> You implemented them to do exactly what the defaults do, which is of course wrong for your case of owning a dynamically allocated memory stored in a raw pointer. The Rule of Three of course means that you must implement them <em>consistently.</em></p>\n\n<p>In your case, this most likely means the copy operations must deep-copy the <code>C</code> object:</p>\n\n<pre><code>class B\n{\npublic:\n  C *table;\n\n  B() : table(new C()) {}\n\n  B(const B&amp; other) : table(new C(*other.table)) {}\n\n  B&amp; operator = (const B&amp; other)\n  {\n    if (this == &amp;other)\n    {\n        return *this;\n    }\n    delete table;\n    table = new C(*other.table);\n    return *this;\n  }\n\n  ~B() \n  {\n    delete table;\n  }\n};\n</code></pre>\n\n<p>Notice that you default constructor wouldn't even compile - you were assigning a <code>C*</code> into a <code>C**</code>. I changed the code above to use a single allocation (and single-item <code>delete</code>) instead of an array. If you do have an array, the principle stays the same.</p>\n\n<p>Of course, it's preferable to follow the Rule of Zero instead of the Rule of Three&mdash;use an appropriate smart pointer if possible. If your real use case <em>is</em> an array, that would be turning <code>table</code> into a <code>std::vector&lt;C&gt;</code>. Then you wouldn't have to supply the copy operations or destructor at all.</p>\n\n<p>If you actually want to <em>share</em> one <code>C</code> among all copies of <code>B</code>, then you'll need to use an appropriate shared-ownership smart pointer instead, such as <code>std::shared_ptr&lt;C&gt;</code>.</p>\n"}, {"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "is_accepted": false, "score": 0, "last_activity_date": 1426722331, "creation_date": 1426722331, "answer_id": 29134767, "question_id": 29132644, "link": "https://stackoverflow.com/questions/29132644/c-calls-destructor-immediately-even-when-rule-of-three-is-followed/29134767#29134767", "title": "C++ calls destructor immediately, even when rule of three is followed", "body": "<p>Simply put, the temporary instance returned by <code>funcA</code> should be destroyed, that's normal and expected. The fact that your code is not functioning as a result means that your copy constructor and assignment operator are not functioning correctly.</p>\n\n<p>But more fundamentally, you're violating several more important rules than the Rule of Three. You're failing to re-use the existing solution of <code>std::vector</code>. You're violating SRP by tying together memory management and whatever else <code>B</code> does when it's at home. You're failing to use RAII to manage your internal resources- a big exception safety fail. </p>\n\n<p>Basically, the core problem is that you're even attempting to perform these operations. Don't. Just use <code>std::vector&lt;C*&gt;</code> and make the compiler and Standard library vendor implement them for you. They will save you a lot of code, and furthermore, they will be correct in ways that I'm going to guess that you don't know exist yet, like exception safety. The Rule of Three and the Rule of Five (which didn't even exist long enough to become a rule) are both vastly inferior to the Rule of Zero.</p>\n\n<p>Here's <code>B</code> but implemented correctly:</p>\n\n<pre><code>class B {\npublic:\n    std::vector&lt;C*&gt; table;\n    B() : table(TABLE_SIZE) {}\n};\n</code></pre>\n\n<p>Simple, ain't it?</p>\n\n<p>As a side note, I don't know where you're getting your learning materials, but you should burn with fire any source so seriously outdated as to recommend self-assignment checks, and well, any of that code. May as well tell you that 640k of memory is all you'll ever need.</p>\n"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1426723073, "creation_date": 1426723073, "answer_id": 29134882, "question_id": 29132644, "link": "https://stackoverflow.com/questions/29132644/c-calls-destructor-immediately-even-when-rule-of-three-is-followed/29134882#29134882", "title": "C++ calls destructor immediately, even when rule of three is followed", "body": "<p>Your constructor is:</p>\n\n<pre><code>A::A()\n{\n    this-&gt;_b = this-&gt;funcA();\n    // calls ~B here and destroys table\n}\n</code></pre>\n\n<p>The comment is correct, although the table being destroyed is the table in the temporary object, not the table of <code>_b</code>. Since you fixed your copy-assignment operator this means that <code>_b</code>'s table is fine.</p>\n\n<p>The list of steps in executing this constructor is:</p>\n\n<ol>\n<li>Call default constructor of <code>_b</code></li>\n<li>Call <code>funcA</code>, returning a temporary object of type <code>B</code></li>\n<li>Call <code>_b</code> 's assignment operator with that temporary object</li>\n<li>Destruct the temporary object.</li>\n</ol>\n\n<p>The constructor could be improved by supplying <code>funcA()</code> directly as initializer for <code>_b</code>, instead of first default-constructing <code>_b</code> then using its assignment operator. (But there is still a temporary object destruction).</p>\n\n<p>There may also be another temporary object created and destroyed in the process of returning from the function, depending on your compiler settings. (usually there would not be).</p>\n"}], "owner": {"reputation": 41, "user_id": 759913, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/9ad7df99c5a98f79e0559e301a600509?s=128&d=identicon&r=PG", "display_name": "user759913", "link": "https://stackoverflow.com/users/759913/user759913"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1426723073, "creation_date": 1426712673, "last_edit_date": 1426721489, "question_id": 29132644, "link": "https://stackoverflow.com/questions/29132644/c-calls-destructor-immediately-even-when-rule-of-three-is-followed", "title": "C++ calls destructor immediately, even when rule of three is followed", "body": "<p>Here is my following code. Once the constructor of A is complete, it immediately calls the ~B and deletes the allocated variable. I have the copy constructor and assignment constructor. Should I implement rule of five to prevent this?</p>\n\n<p>EDIT: I have edited my copy and assignment constructor implementations, but still the destructor is being called.</p>\n\n<pre><code>class B\n{\npublic:\n    C **table;\nB() \n{\n   table = new C *[TABLE_SIZE]();\n}\nB(const B&amp; other)\n{\n   table = new C *[TABLE_SIZE];\n   memcpy(table, other.table, sizeof(C *)* TABLE_SIZE);\n}\nB&amp; operator = (const B&amp; other)\n{\n  if (this == &amp;other)\n  {\n     return *this;\n  }\n  delete[] table;\n  table = new C *[TABLE_SIZE];\n  memcpy(table, other.table, sizeof(C *)* TABLE_SIZE);\n  return *this;\n}\n~B() \n{\n    delete[] table;\n}\n}\n\nclass A\n{\nprotected:\n   B funcA();\nprivate:\n   B _b; \n}\n\nA::A()\n{\n   this-&gt;_b = this-&gt;funcA();\n   // calls ~B here and destroys table\n}\n</code></pre>\n"}, {"tags": ["c++", "fortran", "mixing"], "comments": [{"owner": {"reputation": 24099, "user_id": 3157076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mB4zi.png?s=128&g=1", "display_name": "francescalus", "link": "https://stackoverflow.com/users/3157076/francescalus"}, "edited": false, "score": 0, "creation_date": 1426714938, "post_id": 29132606, "comment_id": 46492224, "body": "This isn&#39;t related to the problem (as given in the answer below), but the arguments to the call to <code>deb_cc</code> are default real/integer rather than explicitly the C-interoperable kinds.  The kinds are the same (or the compiler would complain) but for maximum portability consider declaring the variables with those interoperable kinds.  Note also that the first <code>use iso_c_binding</code> has no effect because of this."}, {"owner": {"reputation": 69, "user_id": 4257342, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae9e9f21ced565ffd6f4a6bebd47d9cf?s=128&d=identicon&r=PG&f=1", "display_name": "Ting Lei", "link": "https://stackoverflow.com/users/4257342/ting-lei"}, "reply_to_user": {"reputation": 24099, "user_id": 3157076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mB4zi.png?s=128&g=1", "display_name": "francescalus", "link": "https://stackoverflow.com/users/3157076/francescalus"}, "edited": false, "score": 0, "creation_date": 1426718993, "post_id": 29132606, "comment_id": 46493848, "body": "Fracescalus, do you mean I should use the c_int and so on in the main fortran program? Thanks"}, {"owner": {"reputation": 24099, "user_id": 3157076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mB4zi.png?s=128&g=1", "display_name": "francescalus", "link": "https://stackoverflow.com/users/3157076/francescalus"}, "edited": false, "score": 0, "creation_date": 1426719478, "post_id": 29132606, "comment_id": 46494014, "body": "It is what I would do, not just for those times where <code>real</code> is not the same as <code>real(c_float)</code> but for clarity.  Where they are the same, though, it isn&#39;t necessary (yet still doesn&#39;t hurt)."}, {"owner": {"reputation": 69, "user_id": 4257342, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae9e9f21ced565ffd6f4a6bebd47d9cf?s=128&d=identicon&r=PG&f=1", "display_name": "Ting Lei", "link": "https://stackoverflow.com/users/4257342/ting-lei"}, "reply_to_user": {"reputation": 24099, "user_id": 3157076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mB4zi.png?s=128&g=1", "display_name": "francescalus", "link": "https://stackoverflow.com/users/3157076/francescalus"}, "edited": false, "score": 0, "creation_date": 1426719898, "post_id": 29132606, "comment_id": 46494130, "body": "Got your point. Thanks a lot."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 4257342, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae9e9f21ced565ffd6f4a6bebd47d9cf?s=128&d=identicon&r=PG&f=1", "display_name": "Ting Lei", "link": "https://stackoverflow.com/users/4257342/ting-lei"}, "edited": false, "score": 0, "creation_date": 1426717870, "post_id": 29132872, "comment_id": 46493434, "body": "Thank you so much. Yes. Modified the codes as you pointed out, it works now. However, for my actual goal, I need to use the pointers (rh in the c++ sub, defined with 3 *) in the form of 3d arrays. This is the way it is used in the original c++ codes.  Why it doesn&#39;t work now when It was called from the fortran? Did I miss something? Your futher clarificaiton is appreciated."}, {"owner": {"reputation": 69, "user_id": 4257342, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae9e9f21ced565ffd6f4a6bebd47d9cf?s=128&d=identicon&r=PG&f=1", "display_name": "Ting Lei", "link": "https://stackoverflow.com/users/4257342/ting-lei"}, "edited": false, "score": 0, "creation_date": 1426717889, "post_id": 29132872, "comment_id": 46493442, "body": "BTW: I&#39;m sorry for the intendation problems."}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "reply_to_user": {"reputation": 69, "user_id": 4257342, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae9e9f21ced565ffd6f4a6bebd47d9cf?s=128&d=identicon&r=PG&f=1", "display_name": "Ting Lei", "link": "https://stackoverflow.com/users/4257342/ting-lei"}, "edited": false, "score": 0, "creation_date": 1426717967, "post_id": 29132872, "comment_id": 46493476, "body": "Where are the arrays actually created, in C++ or in Fortran? These two forms can be incompatible. Fortran requires contiguous arrays to send them or receive them from C."}, {"owner": {"reputation": 69, "user_id": 4257342, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae9e9f21ced565ffd6f4a6bebd47d9cf?s=128&d=identicon&r=PG&f=1", "display_name": "Ting Lei", "link": "https://stackoverflow.com/users/4257342/ting-lei"}, "edited": false, "score": 0, "creation_date": 1426718576, "post_id": 29132872, "comment_id": 46493698, "body": "The actual array x1 was created in the fortran as an allocatable arrays. The arugument in c++ is defined as the ***rh (pointer to pointer to pointer). is that kind of pointers able to be used as the 3d arrays?"}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "reply_to_user": {"reputation": 69, "user_id": 4257342, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae9e9f21ced565ffd6f4a6bebd47d9cf?s=128&d=identicon&r=PG&f=1", "display_name": "Ting Lei", "link": "https://stackoverflow.com/users/4257342/ting-lei"}, "edited": false, "score": 0, "creation_date": 1426719339, "post_id": 29132872, "comment_id": 46493965, "body": "You have to set-up a sequence of pointers to the rows of the big array yourself inside C++, you can&#39;t pass that (easily) from Fortran. See <code>array2</code> in <a href=\"http://c-faq.com/aryptr/dynmuldimary.html\" rel=\"nofollow noreferrer\">c-faq.com/aryptr/dynmuldimary.html</a>"}, {"owner": {"reputation": 69, "user_id": 4257342, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae9e9f21ced565ffd6f4a6bebd47d9cf?s=128&d=identicon&r=PG&f=1", "display_name": "Ting Lei", "link": "https://stackoverflow.com/users/4257342/ting-lei"}, "edited": false, "score": 0, "creation_date": 1426726298, "post_id": 29132872, "comment_id": 46495977, "body": "Vladimir, Thanks a lot. That is interesting. Seem such setup done in the c++ main (calling the sub) can be inherited while it won&#39;t work when the sub is called from fortran. Another important lesson to me. Thanks again."}], "owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "is_accepted": true, "score": 4, "last_activity_date": 1427490704, "last_edit_date": 1427490704, "creation_date": 1426713451, "answer_id": 29132872, "question_id": 29132606, "link": "https://stackoverflow.com/questions/29132606/the-run-time-aborting-when-calling-c-sub-from-fortran/29132872#29132872", "title": "the run time aborting when calling c++ sub from fortran", "body": "<p>You use the <code>iso_c_binding</code> module, but your procedure interface is not C interoperable.</p>\n\n<p><strong>The <code>iso_c_binding</code> module is not the most important thing. The <code>bind(C)</code> attribute is the key.</strong> (I ranted several times about the unfortunate name of the tag here)</p>\n\n<p>You use an assumed shape allocatable array argument</p>\n\n<pre><code>real(c_float),allocatable::rh(:,:,:)\n</code></pre>\n\n<p>these are not allowed in interoperable procedures in Fortran 2008, because C or C++ have no idea what to do with them. They are not just addresses. If you used the <code>bind(C)</code> attribute in the interface, the compiler should tell you it is wrong.</p>\n\n<p>There is a possibility to pass them in the next Fortran standard (in an existing TS actually) using a special C header, but some compilers (notably gfortran) are still not compatible.</p>\n\n<p>As you do not do any reallocation on the C side (at least in your example), you can just pass the array as an assumed size (<code>array(*)</code>) argument. I also changed the C++ name, no need for the underscore.</p>\n\n<pre><code>interface\n  subroutine  deb_cc(rh,x,y,z_ext) bind(C, name=\"deb_cc\")\n    use ISO_C_BINDING\n    real(c_float) :: rh(*)\n    integer(c_int):: x,y,z_ext\n   end subroutine\nend interface\n</code></pre>\n\n<p>On the C side, you cannot use the C arrays which are pointers to pointers ([i][j][k]). What you receive from Fortran is a single block of memory. You also have to pass the array shape. At least in the first two Fortan dimensions.</p>\n\n<p>I would just use a macro to index the array in C.</p>\n\n<pre><code>// adjust as needed, many variants possible\n#define IND(i,j,k) = i + (j-1) * nx + (k-1) * nx * ny\n// adjust as needed, many variants possible\n\n\nextern \"C\" void deb_cc(float *rh, int *nx, int *ny, int *nz) {\n  cout &lt;&lt;\"thinktest i=8,j=4,k=1\"&lt;&lt; \" x3/rh \" &lt;&lt; rh(IND(8,4,1))&lt;&lt;endl; \n}\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 4257342, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae9e9f21ced565ffd6f4a6bebd47d9cf?s=128&d=identicon&r=PG&f=1", "display_name": "Ting Lei", "link": "https://stackoverflow.com/users/4257342/ting-lei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 2, "accepted_answer_id": 29132872, "answer_count": 1, "score": 1, "last_activity_date": 1427490704, "creation_date": 1426712587, "last_edit_date": 1426714531, "question_id": 29132606, "link": "https://stackoverflow.com/questions/29132606/the-run-time-aborting-when-calling-c-sub-from-fortran", "title": "the run time aborting when calling c++ sub from fortran", "body": "<p>I had read many posts here about mixing languages use of Fortran and C++. However, I'm still stuck with my current problem: my Fortran program always aborted.</p>\n\n<hr>\n\n<p>I have the Fortran program: test-cc.f90 and the C++ program: deb_cc.cc.</p>\n\n<p>deb_cc.cc contains:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nextern \"C\" void deb_cc_(float*** rh,int* x, int* y , int* z_ext )\n{\n  cout &lt;&lt;\"thinkdeb 1\"&lt;&lt;endl;\n  int i, j, k;\n  cout &lt;&lt;\"thinkdeb 1\"&lt;&lt;endl;\n  cout &lt;&lt;\"thinktest i=8,j=4,k=1\"&lt;&lt; \" (*x) \" &lt;&lt; (*x)&lt;&lt;endl;\n  cout &lt;&lt;\"thinktest i=8,j=4,k=1\"&lt;&lt; \" x3/rh \" &lt;&lt; rh[1][1][1]&lt;&lt;endl; //abortion                        \n                                                                //      here \n  cout &lt;&lt;\"thinkdeb 7\"&lt;&lt;endl;\n  return;\n}//end function\n</code></pre>\n\n<p>test-cc.f90 contains:</p>\n\n<pre><code>    use ISO_C_BINDING\n\n    implicit none\n\n    interface\n      subroutine  deb_cc( rh,x,y,z_ext)\n        use ISO_C_BINDING\n        implicit none\n        real(c_float),allocatable::rh(:,:,:)\n        integer(c_int):: x,y,z_ext\n      end subroutine\n    end interface\n\n    integer nx,ny,nz\n    parameter (nx=10,ny=10,nz=10)\n    real  ,dimension (:,:,:),allocatable:: x1\n    integer:: iy1,iy2,iy3,iy4\n    integer i,j,k\n\n    allocate(x1(nx,ny,nz))\n\n    do k=1,nz\n      do j=1,ny\n        do i=1,nx\n          x1(i,j,k)=k*1000+j*100+i\n        enddo\n      enddo\n    enddo\n\n    iy1=nx\n    iy2=ny\n    iy3=nz\n\n    call deb_cc(x1,iy1,iy2,iy3)\n\n  end\n</code></pre>\n\n<p>I compiled them by <code>pgf90 -c test-cc.f90</code> and <code>pgcpp -c deb_cc.cc</code>\nFinally, I linked them by <code>pgf90 -pgcpplibs  test-cc.o  deb_cc.o</code>. \nThe output is:</p>\n\n<pre><code> thinktest in test- x1 (8,2,2) is     2208.000\n thinkdeb 1\n thinkdeb 1\n thinktest i=8,j=4,k=1 (*x) 10\n Segmentation fault (core dumped)\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 3, "creation_date": 1426712592, "post_id": 29132558, "comment_id": 46491035, "body": "Remove the friend keyword. Public member functions for a class, can access that class&#39;s private members. Your constructor creates a local vector called elements which is immediately discarded."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 2, "creation_date": 1426712605, "post_id": 29132558, "comment_id": 46491043, "body": "<code>main()</code> is not a public <code>MySet</code> function.  Change <code>Print(set.elements);</code> to something like <code>set.print_elements();</code>"}, {"owner": {"reputation": 107, "user_id": 3225981, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/cdb921ba73bc446d160403343fe0a621?s=128&d=identicon&r=PG&f=1", "display_name": "user3225981", "link": "https://stackoverflow.com/users/3225981/user3225981"}, "edited": false, "score": 0, "creation_date": 1426712918, "post_id": 29132558, "comment_id": 46491214, "body": "aaah, i see. its the print function making all the trouble lol. alright , when i try to access it with set. , it doesnt show print in there."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1426712968, "post_id": 29132558, "comment_id": 46491245, "body": "@user3225981 Your compiler error should be directing you to the offending line of code."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1426713061, "post_id": 29132558, "comment_id": 46491308, "body": "@user3225981 Short explanation: <code>main</code> is not allowed to access <code>set.elements</code> because it&#39;s private."}], "answers": [{"owner": {"reputation": 14673, "user_id": 296460, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/FGDo8.jpg?s=128&g=1", "display_name": "shuttle87", "link": "https://stackoverflow.com/users/296460/shuttle87"}, "is_accepted": true, "score": 1, "last_activity_date": 1426713021, "last_edit_date": 1426713021, "creation_date": 1426712636, "answer_id": 29132634, "question_id": 29132558, "link": "https://stackoverflow.com/questions/29132558/accessing-a-private-variable/29132634#29132634", "title": "Accessing a Private variable", "body": "<p>Basically you want to make a <code>Print</code> a method instead of trying to access the private member variable. In general trying to access the private variable directly is usually a good sign that it shouldn't be private in the first place or that you need to change your design. In this case changing your design would most likely lead to the best outcome:</p>\n\n<pre><code>using namespace std;\n\nclass MySet{\n  private:\n    vector&lt;int&gt; elements;\n\n  public:\n    MySet();\n    friend void addElement(int value);\n\n    void print() {\n      vector&lt;int&gt;::iterator it;\n      for(it = this-&gt;elements.begin(); it != this_.elements.end(); ++it){\n        cout &lt;&lt; (*it) &lt;&lt; '\\n';\n      }\n    }\n  };\n</code></pre>\n\n<p>Now you can print it like so:</p>\n\n<pre><code>  set.print();\n</code></pre>\n\n<p>And this avoids the issues with using the private member.\nNote that we no longer need to pass in the particular instance of <code>MySet</code> to the print function, this is because the class already has that information it needs via the <code>this</code> pointer.</p>\n\n<p>The general idea is that you store the state as private then give a bunch of public functions for the users of the class the manipulate that state. The users shouldn't manipulate the state directly though, so if you find you are doing this step back and reconsider your design.</p>\n"}], "owner": {"reputation": 107, "user_id": 3225981, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/cdb921ba73bc446d160403343fe0a621?s=128&d=identicon&r=PG&f=1", "display_name": "user3225981", "link": "https://stackoverflow.com/users/3225981/user3225981"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 29132634, "answer_count": 1, "score": -2, "last_activity_date": 1426713021, "creation_date": 1426712441, "last_edit_date": 1426712849, "question_id": 29132558, "link": "https://stackoverflow.com/questions/29132558/accessing-a-private-variable", "title": "Accessing a Private variable", "body": "<p>I'm trying to get my head around encapsulation in C++. I have this program working when everything is in public, but when I move the vector to private, I'm having trouble accessing the vector with my public functions. I've tried using a friend and I can't get it to work. How can I get my <code>addElement</code> function to see the vector?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nclass MySet{\n  private:\n    vector&lt;int&gt; elements;\n\n  public:\n    MySet();\n    friend void addElement(int value);\n};\n\nMySet::MySet (){\n    vector &lt;int&gt; elements;\n}\n\nvoid MySet::addElement(int value){\n   elements.push_back(value);\n}\n\nvoid Print(vector&lt;int&gt;&amp; v) {\n  vector&lt;int&gt;::iterator it;\n  for(it = v.begin(); it != v.end(); ++it) {\n    cout &lt;&lt; (*it) &lt;&lt; '\\n';\n  }\n}\n\nint main(int argc, char *argv[]){\n  int value;\n  MySet set;\n  cout &lt;&lt; \"Enter your numbers,(enter -1 to end)\" &lt;&lt; endl;\n   while(cin){\n     cin&gt;&gt; value;\n  if(value==-1)\n     break;\n      set.addElement(value);\n   }\n  Print(set.elements);\n  system(\"PAUSE\");\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2010", "mfc", "ms-office"], "comments": [{"owner": {"reputation": 13842, "user_id": 2790621, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/b7bSs.jpg?s=128&g=1", "display_name": "xMRi", "link": "https://stackoverflow.com/users/2790621/xmri"}, "edited": false, "score": 2, "creation_date": 1426751945, "post_id": 29132527, "comment_id": 46502871, "body": "Debug. What happens if you run the program in the debugger? As far that I can see this note about the doc template only applies to you when you want to use the restart manager. The version with to parameter exists and calls the one with 3 (second parameter set o TRUE). Or do you have your own template. Just debug and step into the code until the crash happens."}, {"owner": {"reputation": 60, "user_id": 1634403, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e1e57fcd8c104721876aeeb5629e7993?s=128&d=identicon&r=PG", "display_name": "Ross Llewallyn", "link": "https://stackoverflow.com/users/1634403/ross-llewallyn"}, "reply_to_user": {"reputation": 13842, "user_id": 2790621, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/b7bSs.jpg?s=128&g=1", "display_name": "xMRi", "link": "https://stackoverflow.com/users/2790621/xmri"}, "edited": false, "score": 0, "creation_date": 1426798884, "post_id": 29132527, "comment_id": 46530682, "body": "Edited with code locations where error is actually happening."}], "answers": [{"owner": {"reputation": 11, "user_id": 7846100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db12d740d58af7ec500fbd465ff104d5?s=128&d=identicon&r=PG&f=1", "display_name": "Narendra", "link": "https://stackoverflow.com/users/7846100/narendra"}, "is_accepted": false, "score": 1, "last_activity_date": 1491841784, "creation_date": 1491841784, "answer_id": 43328462, "question_id": 29132527, "link": "https://stackoverflow.com/questions/29132527/cwinapp-opendocumentfile-unsupported-operation-error/43328462#43328462", "title": "CWinApp OpenDocumentFile &quot;unsupported operation&quot; error", "body": "<p>I have faced the same problem in opendocumentfile(), there was a control in CFormView class which i was not using so i commented it out but forget to delete from .rc file. Once i remove the control entry from .rc file the problem disappear.</p>\n\n<p>there should be no control variable uninitialize , please check that also </p>\n"}], "owner": {"reputation": 60, "user_id": 1634403, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e1e57fcd8c104721876aeeb5629e7993?s=128&d=identicon&r=PG", "display_name": "Ross Llewallyn", "link": "https://stackoverflow.com/users/1634403/ross-llewallyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1747, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1491841784, "creation_date": 1426712334, "last_edit_date": 1495541424, "question_id": 29132527, "link": "https://stackoverflow.com/questions/29132527/cwinapp-opendocumentfile-unsupported-operation-error", "title": "CWinApp OpenDocumentFile &quot;unsupported operation&quot; error", "body": "<h2>Problem</h2>\n\n<p>I'm trying to open an MFC program that reads a Microsoft Access database (.mdb) and allows the user to view or modify the data. This is an existing program (and source code) given to me by a group in another lab where the program opens and works just fine.</p>\n\n<p>In our lab, I have yet to see it load properly. When run, it pops up a dialog box that says, \"<strong>Attempted an unsupported operation</strong>\". Windows then offers me a chance to debug and such before it crashes.</p>\n\n<h2>Environment</h2>\n\n<p>In the other lab, they use Windows 7 and Microsoft Office 2010, and it works.</p>\n\n<p>In our lab, I've tried Windows 7 with Office 2013 and Windows XP with Office 2010. The latter crashes without giving me the dialog box. I don't know if we have a Win7/MSO2010 machine.</p>\n\n<h2>The Function</h2>\n\n<p>I have the source code for the program. The solution file implies it was last developed in VS2010, which the computers I tested on had installed as well. Running it out of Visual Studio 2010 or straight from the executable yields the same results.</p>\n\n<p>I have added additional debug dialog boxes to the code that narrow down the problem to <a href=\"https://msdn.microsoft.com/en-us/library/sh7b8das(v=vs.100).aspx\" rel=\"nofollow noreferrer\">this function call</a>, which the code never gets past:</p>\n\n<pre><code>CwinApp:OpenDocumentFile(LPCTSTR lpszPathName)\n</code></pre>\n\n<p>The single string passed into the function is a path and filename for the MS Access database to be opened. It exists in a temporary directory created by another program. This is on a drive other than C, though I've tested some there, as well. Problems with programs related to this one often stem from files with \"read only\" status, but I continually check the temporary files created, and they are write-able.</p>\n\n<h2>Documentation</h2>\n\n<p>I found <a href=\"https://msdn.microsoft.com/en-us/library/bb531344(v=vs.100).aspx\" rel=\"nofollow noreferrer\">this information</a> titled \"Breaking Changes in Visual C++\" for VS2010 through another SO question:</p>\n\n<blockquote>\n  <p>A new virtual function was added to the CDocTemplate class. This new virtual function is CDocTemplate::OpenDocumentFile. The previous version of OpenDocumentFile had two parameters. The new version has three parameters. To support the restart manager, any class derived from CDocTemplate must implement the version that has three parameters. For more information about the function, see CDocTemplate::OpenDocumentFile. The new parameter is bAddToMRU.</p>\n</blockquote>\n\n<h2>Code</h2>\n\n<p>I feel this might be the answer! But I don't have a strong idea of exactly what to change to get this to work. Here's where I stopped:</p>\n\n<p>Program.cpp</p>\n\n<pre><code>CDocument* ProgramApp::OpenDocumentFile(LPCTSTR lpszFileName, BOOL bAddToLRU, BOOL bMakeVisible)\n{\n    // Add specialized code here and/or call base class\n\n    // Debug messages added\n    CDocument* tempDoc;\n    AfxMessageBox(lpszFileName);\n\n    tempDoc = CWinApp::OpenDocumentFile(lpszFileName, bAddToMRU);\n\n    AfxMessageBox(\"Opened database!\");\n\n    return tempDoc;\n}\n</code></pre>\n\n<p>Program.h</p>\n\n<pre><code>class ProgramApp : public CWinApp\n{\npublic:\n\n...\n\n    virtual CDocument* OpenDocumentFile(LPCTSTR lpszFileName, BOOL bAddToMRU, BOOL bMakeVisible);\n</code></pre>\n\n<p>afxwin.h</p>\n\n<pre><code>class CWinApp : public CWinThread\n{\n\n...\n\nvirtual CDocument* OpenDocumentFile(LPCTSTR lpszFileName);\nvirtual CDocument* OpenDocumentFile(LPCTSTR lpszFileName, BOOL bAddToMRU);\n</code></pre>\n\n<p>Changing the Program.cpp call to be from a \"Template\" class caused errors, but I wouldn't be surprised if that's towards the answer. <a href=\"https://stackoverflow.com/questions/14363383/cwinappopendocumentfile-creates-a-new-window\">This solution</a> looks similar, but I'm not sure exactly what to do.</p>\n\n<p>My hope is that this problem has a simple solution that someone more knowledgeable can give me. I would be much appreciative, and additional context would help a lot.</p>\n\n<h2>Edit: Debugging</h2>\n\n<p>I drilled down into the Windows code to see what was precisely going wrong. It seemed too dense to understand, but a coworker and I may have clues based on it. The failure message happens here:</p>\n\n<p>dlgdata.cpp</p>\n\n<pre><code>// Could be a windowless OCX\npSite = m_pDlgWnd-&gt;GetOldControlSite(nIDC);\nif (pSite == NULL)\n{\n    TRACE(traceAppMsg, 0, \"Error: no data exchange control with ID 0x%04x.\\n\", nIDC);\n    ASSERT(FALSE);\n    AfxThrowNotSupportedException();\n}\n</code></pre>\n\n<p>...Although we are seeing debugger issues here:</p>\n\n<p>occcont.cpp</p>\n\n<pre><code>COleControlSiteOrWnd *pemp = new COleControlSiteOrWnd(hwndCtrl, pOccDlgInfo-&gt;m_pItemInfo[i].bAutoRadioButton);\nASSERT(IsWindow(pTemp-&gt;m_hWnd));\nif (IsWindow(pTemp-&gt;m_hWnd))\n{\n    hwndStart = pTemp-&gt;m_hWnd;\n    ...\n</code></pre>\n\n<p>My coworker believes this could have little to do with the opening of this document as I suspected and more to do with objects/controls we don't have on our lab computers trying to be used for the program.</p>\n"}, {"tags": ["c++", "language-lawyer"], "answers": [{"comments": [{"owner": {"reputation": 65414, "user_id": 768469, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/383724e63ab04b146277912c16f27f54?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/768469/nemo"}, "edited": false, "score": 0, "creation_date": 1426721551, "post_id": 29133698, "comment_id": 46494678, "body": "So you agree that any time you write <code>seekpos(x)</code> you could instead write <code>seekoff(x,std::ios::beg)</code> (and similarly for <code>pubseekpos</code> and <code>pubseekoff</code>) and get exactly the same behavior, with literally no conceivable real-life exception whatsoever? By the way,  you are wrong that the default behavior of <code>seekpos</code> &quot;is implementation-defined&quot;. The default (i.e. base) <code>std::streambuf::seekpos</code> returns <code>pos_type(off_type(-1))</code>, by definition, according to paragraph 27.5.2.4.2 (6) of the standard."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 65414, "user_id": 768469, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/383724e63ab04b146277912c16f27f54?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/768469/nemo"}, "edited": false, "score": 0, "creation_date": 1426722051, "post_id": 29133698, "comment_id": 46494830, "body": "Just because you <i>can</i> doesn&#39;t always mean you <i>should</i>. And like I said, a stream&#39;s <code>seekpos()</code> and <code>seekoff()</code> implementations could be optimized separately. For instance, a file stream&#39;s <code>seekpos()</code> might grab the current position, calculate a <code>streamoff</code> value to the new position, and then <code>seekoff(theoffset, std::ios::cur)</code> to reach <code>x</code>. That is usually a more efficient seek on the filesystem/hardware than using <code>seekoff(x, std::ios::beg)</code>.  For a memory stream, <code>seekpos()</code> can just jump to the new position directly."}, {"owner": {"reputation": 65414, "user_id": 768469, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/383724e63ab04b146277912c16f27f54?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/768469/nemo"}, "edited": false, "score": 0, "creation_date": 1426722465, "post_id": 29133698, "comment_id": 46494959, "body": "Since you agree they are 100% behaviorally equivalent under all circumstances, any optimization you can imagine for <code>seekpos</code> would apply equally well to <code>seekoff(...,std::ios::beg)</code>. So that is a non-argument. (Never mind that if you care about making C++ streams more efficient, this is a ludicrous place to start...)"}], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 2, "last_activity_date": 1426716792, "creation_date": 1426716792, "answer_id": 29133698, "question_id": 29132458, "link": "https://stackoverflow.com/questions/29132458/why-does-the-standard-have-both-seekpos-and-seekoff/29133698#29133698", "title": "Why does the standard have both seekpos() and seekoff()?", "body": "<blockquote>\n  <p>I am wondering what the Committee was thinking when they decided to include both std::streambuf::seekpos() and std::streambuf::seekoff() (and similarly for the related pubseekpos() and pubseekoff()).</p>\n</blockquote>\n\n<p><code>streampos</code> represents an absolute position from the beginning of the stream.  Thus, <code>seekpos()</code> seeks to a specific position.</p>\n\n<p><code>streamoff</code> represents an offset from a given position.  Thus, <code>seekoff()</code> can seek relative to any given position.  That is why it has a <code>dir</code> parameter to specify how the offset is to be interpreted - an offset from the beginning/end of the stream, or an offset relative to the stream's current position.</p>\n\n<p>Different semantics, so different functions provided.</p>\n\n<blockquote>\n  <p>It seems to me that seekpos(x) should have the same effect as seekoff(x, std::ios::beg) in every circumstance I can imagine.</p>\n</blockquote>\n\n<p>That is logically what it does, yes.  Though the actual implementation could be optimized, such as by taking the current position into account to minimize the amount of physical seeking involved, especially for file streams.  It is not always efficient to make the OS go all the way back to the beginning of the file just to move forward again.</p>\n\n<blockquote>\n  <p>So, why would you want to have both when seekpos is completely subsumed by seekoff? </p>\n</blockquote>\n\n<p>Because sometimes it makes sense to seek to a specific position directly, and sometimes it makes sense to seek to a relative offset.  It depends on the circumstance.  Both cases have their uses.</p>\n\n<blockquote>\n  <p>So, why would you want to have both when seekpos is completely subsumed by seekoff?</p>\n</blockquote>\n\n<p>Convenience.  Depends on the design of the calling code, whether it keeps track of absolute positions or relative offsets.</p>\n\n<blockquote>\n  <p>Or at least, why would you not make the default implementation of the former simply invoke the latter?</p>\n</blockquote>\n\n<p>It could be.  It is implementation-defined.</p>\n\n<blockquote>\n  <p>But note that 27.4.3.2 [lib.fpos.operations] requires that stream positions be convertible to stream offsets and back, so I do not think this is the answer.)</p>\n</blockquote>\n\n<p><em>Convertible</em> being the key word here.  Just because they can be <em>converted</em> to each other does not mean they are <em>semantically equal</em> to each other.</p>\n"}, {"comments": [{"owner": {"reputation": 65414, "user_id": 768469, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/383724e63ab04b146277912c16f27f54?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/768469/nemo"}, "edited": false, "score": 1, "creation_date": 1426722647, "post_id": 29134696, "comment_id": 46495014, "body": "Nice answer; +1 and accepted. The key, I think, is that C does not require <code>fpos_t</code> (the argument to <code>fsetpos</code>) to be convertible to <code>long</code> or <code>off_t</code> (the argument to <code>fseek</code> or <code>fseeko</code>). As soon as you allow that conversion, the setpos/seekpos interfaces become redundant."}, {"owner": {"reputation": 7675, "user_id": 2923952, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/71908bd318301d831c4b9eb6ca1c13a2?s=128&d=identicon&r=PG&f=1", "display_name": "Siler", "link": "https://stackoverflow.com/users/2923952/siler"}, "edited": false, "score": 1, "creation_date": 1427304283, "post_id": 29134696, "comment_id": 46726699, "body": "@Christophe, You mention <code>streamoff</code> twice in the bulleted list - I think you meant <code>streampos</code> the second time.  I tried to edit your answer to fix this, but it wouldn&#39;t let me (apparently there is a 6-char minimum for edits)"}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 7675, "user_id": 2923952, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/71908bd318301d831c4b9eb6ca1c13a2?s=128&d=identicon&r=PG&f=1", "display_name": "Siler", "link": "https://stackoverflow.com/users/2923952/siler"}, "edited": false, "score": 0, "creation_date": 1427307013, "post_id": 29134696, "comment_id": 46728551, "body": "@Siler you are completely right !  Thanks for your feedback: I&#39;ve corrected it"}], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 15, "last_activity_date": 1427306950, "last_edit_date": 1592644375, "creation_date": 1426721879, "answer_id": 29134696, "question_id": 29132458, "link": "https://stackoverflow.com/questions/29132458/why-does-the-standard-have-both-seekpos-and-seekoff/29134696#29134696", "title": "Why does the standard have both seekpos() and seekoff()?", "body": "<p>The two functions use different parameters:</p>\n<ul>\n<li><a href=\"http://www.cplusplus.com/reference/streambuf/streambuf/seekpos/\" rel=\"noreferrer\"><code>seekpos()</code></a> positions you in a stream, using an absolute <a href=\"http://www.cplusplus.com/reference/ios/streampos/\" rel=\"noreferrer\"><code>streampos</code></a> position</li>\n<li><a href=\"http://www.cplusplus.com/reference/streambuf/streambuf/seekoff/\" rel=\"noreferrer\"><code>seekoff()</code></a> positions you in a stream, using a relative <a href=\"http://www.cplusplus.com/reference/ios/streamoff/\" rel=\"noreferrer\"><code>streamoff</code></a> offset compared to a given position (begin, current, or end)</li>\n</ul>\n<p>You are perfectly right:  they can be converted in both direction.  But there is a subtle semantic difference:</p>\n<ul>\n<li><code>streampos</code> is intuitively related to a fixed position whereas <code>streamoff</code> is somehow related to motion in a file.</li>\n<li>substracting one <code>streampos</code> from another <code>streampos</code> makes a <code>streamoff</code>.</li>\n<li>adding a <code>streampos</code> to a <code>streamoff</code> makes a new <code>streampos</code>.</li>\n<li>other combinations are valid, thanks to the easy conversion, but require more care.</li>\n<li>wide streams use <code>wstreampos</code> for the position (because obviously a position within a <code>wchar_t</code> has a different meaning as a position in a <code>char</code> stream).</li>\n<li>but wide streams use <code>streamoff</code> for motion, as it is a relative movement compared to a position.</li>\n</ul>\n<p>If you use template programming, these semantic differences are more explicit with the traits: <code>S::pos_type</code> and <code>S::off_type</code>.</p>\n<h1>Real origin</h1>\n<p>Regardless of these semantic subtilities, the real origin of this difference is historical, and related to the <strong>C standard library</strong>, as explained by Mr. Plauger in <a href=\"http://collaboration.cmc.ec.gc.ca/science/rpn/biblio/ddj/Website/articles/CUJ/1994/9406/plauger/plauger.htm\" rel=\"noreferrer\">this article</a>:</p>\n<ul>\n<li><code>streamoff</code> was designed with <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/fseek.html\" rel=\"noreferrer\"><code>fseek()</code></a> and <code>ftell()</code> of the C standard library in mind, which use a <code>long</code> for positioning.</li>\n<li><code>streampos</code> was meant for <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/fgetpos.html\" rel=\"noreferrer\"><code>fgetpos()</code></a> and <code>fsetpos()</code> which use an <code>fpos_t</code> argument.</li>\n</ul>\n<p>I could verify that this was already the case in C89 standard.  As neither of these functions were mentionned in the original K&amp;R, maybe a UNIX historian could tell more about an even more distant path.</p>\n<p><a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2009/n2926.pdf\" rel=\"noreferrer\">This paper</a> explains the more recent thoughts of the standard committee.  It appears that the historic difference is questioned and that it is no longer clear whether it is still really needed.</p>\n"}], "owner": {"reputation": 65414, "user_id": 768469, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/383724e63ab04b146277912c16f27f54?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/768469/nemo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1513, "favorite_count": 2, "accepted_answer_id": 29134696, "answer_count": 2, "score": 15, "last_activity_date": 1427306950, "creation_date": 1426712090, "question_id": 29132458, "link": "https://stackoverflow.com/questions/29132458/why-does-the-standard-have-both-seekpos-and-seekoff", "title": "Why does the standard have both seekpos() and seekoff()?", "body": "<p>The title pretty much says it all.</p>\n\n<p>I am implementing my own streambuf class, and I am wondering what the Committee was thinking when they decided to include both <code>std::streambuf::seekpos()</code> and <code>std::streambuf::seekoff()</code> (and similarly for the related <code>pubseekpos()</code> and <code>pubseekoff()</code>).</p>\n\n<p>It seems to me that <code>seekpos(x)</code> should have the same effect as <code>seekoff(x, std::ios::beg)</code> in every circumstance I can imagine. But perhaps my imagination is not good enough. So, why would you want to have both when <code>seekpos</code> is completely subsumed by <code>seekoff</code>? Or at least, why would you not make the default implementation of the former simply invoke the latter?</p>\n\n<p>If the answer is \"because that is what the STL did\" or similar, then assume I am asking about the rationale for the STL or similar.</p>\n\n<p>(I realize that the first argument of <code>seekpos</code> is a <code>streampos</code> while the first argument of <code>seekoff</code> is a <code>streamoff</code>. But note that 27.4.3.2 [lib.fpos.operations] requires that stream positions be convertible to stream offsets and back, so I do not think this is the answer.)</p>\n"}, {"tags": ["c++", "pointers", "polymorphism"], "comments": [{"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 1, "creation_date": 1426712026, "post_id": 29132411, "comment_id": 46490750, "body": "Why doesn&#39;t Animal have a constructor that takes its name which dog calls? If <code>enqueue</code> can only reasonably handle dogs, why don&#39;t you make its parameter <code>Dog *</code>? Your code also leaks memory."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1426712391, "post_id": 29132411, "comment_id": 46490943, "body": "@NeilKirk: in which case, it should be renamed it to <code>enqueueDog()</code>, to match <code>dequeueDog()</code>."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1426712423, "post_id": 29132411, "comment_id": 46490960, "body": "If an <code>Animal</code> that is not a <code>Dog</code> is passed to <code>enqueue()</code>, <code>dynamic_cast</code> will return a NULL pointer, which you are storing in the list, but you are not checking for that anywhere. And <code>dequeueDog()</code> is also not checking if the list is empty before popping."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 1, "creation_date": 1426712451, "post_id": 29132411, "comment_id": 46490971, "body": "Consider <code>std::list&lt;std::shared_ptr&lt;Dog&#47;Animal&gt;&gt;</code>"}, {"owner": {"reputation": 1263, "user_id": 2325279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xkrmf.jpg?s=128&g=1", "display_name": "Petr Vep\u0159ek", "link": "https://stackoverflow.com/users/2325279/petr-vep%c5%99ek"}, "edited": false, "score": 0, "creation_date": 1426712522, "post_id": 29132411, "comment_id": 46491005, "body": "Your dequeue returns an invalid pointer.  The front element ceases to exist after you pop it."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1426712572, "post_id": 29132411, "comment_id": 46491023, "body": "Neil is right. <code>main()</code> is leaking <code>d</code>, because <code>enqueue()</code> <b>copies</b> the animal leaving the original alone, and <code>main()</code> is not calling <code>delete d</code>.  This code definitely should use <code>std::list&lt;std::shared_ptr&lt;Animal&gt;&gt;</code> (or <code>std::list&lt;std::unique_ptr&lt;Animal&gt;&gt;</code>) instead, and stop making copies of everything."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1426713293, "post_id": 29132411, "comment_id": 46491430, "body": "Or at the very least <code>list&lt;Dog*&gt;</code> or <code>list&lt;Animal*&gt;</code>, if you don&#39;t want to learn about smart pointers at this point. (But in that case make a note to learn about them later; they are helpful)"}], "answers": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "is_accepted": false, "score": 2, "last_activity_date": 1426712229, "creation_date": 1426712229, "answer_id": 29132494, "question_id": 29132411, "link": "https://stackoverflow.com/questions/29132411/c-polymorphic-pointer-cannot-invoke-member-function/29132494#29132494", "title": "C++ polymorphic pointer cannot invoke member function", "body": "<pre><code>Dog* dequeueDog() {\n    Dog * d = &amp;(dogs.front());\n    dogs.pop_front();\n    return d;\n}\n</code></pre>\n\n<p>There you are taking a pointer to the front item in the list, <strong>deleting</strong> that item (by calling <code>pop_front</code>) and then returning a dangling pointer.</p>\n"}, {"comments": [{"owner": {"reputation": 976, "user_id": 4003671, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BHAz6.jpg?s=128&g=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/4003671/alec"}, "edited": false, "score": 0, "creation_date": 1426749621, "post_id": 29132502, "comment_id": 46502056, "body": "Sorry, I was unclear with my original question. So <code>Dog dequeueDog()</code> will work, and that&#39;s great, but I also want to be able to <code>dequeueAny()</code>, returning any random <code>Animal</code> (see edited question). Memory leak noted."}, {"owner": {"reputation": 41100, "user_id": 1938163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/WV0Fi.png?s=128&g=1", "display_name": "Marco A.", "link": "https://stackoverflow.com/users/1938163/marco-a"}, "reply_to_user": {"reputation": 976, "user_id": 4003671, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BHAz6.jpg?s=128&g=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/4003671/alec"}, "edited": false, "score": 0, "creation_date": 1426755245, "post_id": 29132502, "comment_id": 46504381, "body": "@Alec edited the question. Anyway I suggest you not to edit the requirements again (it invalidates the answers here given) and instead ask another different question"}], "owner": {"reputation": 41100, "user_id": 1938163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/WV0Fi.png?s=128&g=1", "display_name": "Marco A.", "link": "https://stackoverflow.com/users/1938163/marco-a"}, "is_accepted": true, "score": 3, "last_activity_date": 1426755203, "last_edit_date": 1495541574, "creation_date": 1426712258, "answer_id": 29132502, "question_id": 29132411, "link": "https://stackoverflow.com/questions/29132411/c-polymorphic-pointer-cannot-invoke-member-function/29132502#29132502", "title": "C++ polymorphic pointer cannot invoke member function", "body": "<p>You're returning the address of an element stored (<a href=\"http://www.cplusplus.com/reference/list/list/front/\" rel=\"nofollow noreferrer\">list::front</a> returns a reference and you're taking the address of it) and then popping it (<a href=\"http://www.cplusplus.com/reference/list/list/pop_front/\" rel=\"nofollow noreferrer\">list::pop_front</a> <strong>destroys</strong> the object):</p>\n\n<pre><code>Dog* dequeueDog() {\n    Dog * d = &amp;(dogs.front()); // Take the address of the front object\n    dogs.pop_front(); // Destroy the front object\n    return d; // Return the address to the deleted object (unsafe state)\n}\n</code></pre>\n\n<p>Accessing memory through that pointer is <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p>A possible solution could be returning your object by value</p>\n\n<pre><code>class Animal {\npublic:\n    virtual void speak() = 0;\n    virtual ~Animal() {}; // Always a good thing if the class has virtual members\n    string name;\n};\n\nclass Dog : public Animal {\n   ...  // unchanged\n};\n\nclass AnimalQueue {\n    list&lt;Dog&gt; dogs;\npublic:\n    void enqueue(Animal* a) {\n        Dog * d = dynamic_cast&lt;Dog*&gt;(a);\n        dogs.push_back(*d); // This creates a copy of d and stores it\n    }\n    Dog dequeueDog() {\n        Dog d = dogs.front(); // This creates a copy of the front element\n        dogs.pop_front(); // Destroy the front element\n        return d;\n    }\n};\n\nint main() {\n\n    AnimalQueue q;\n    Dog * d;\n    d = new Dog(\"Rex\");\n    q.enqueue(d);\n\n    *d = q.dequeueDog();\n    cout &lt;&lt; d-&gt;name &lt;&lt; endl;// Prints \"Rex\"\n    d-&gt;speak(); // Prints WOFF\n\n    delete d; // Free your memory\n\n    return 0;\n}\n</code></pre>\n\n<p><kbd><a href=\"http://ideone.com/mWRuEV\" rel=\"nofollow noreferrer\">Example</a></kbd></p>\n\n<p>Please notice that you also forgot to free your memory thus causing a memory leak. Either use a <a href=\"https://stackoverflow.com/questions/106508/what-is-a-smart-pointer-and-when-should-i-use-one\">smart pointer</a> or free your memory and be a good citizen.</p>\n\n<hr>\n\n<p>Edit: OP edited his question to specify he also needs a <code>dequeueAny</code> method. I strongly recommend not to edit your question after it has been answered (requirements should be as static as possible). Anyway in that case I would suggest you to use pointers (or smart pointers) instead of copying objects around</p>\n\n<pre><code>class AnimalQueue {\n    std::list&lt;Animal*&gt; animals;\npublic:\n    void enqueue(Animal* a) {\n        animals.push_back(a); // Copy the pointer\n    }\n    Animal* dequeue() {\n        Animal *d = animals.front();\n        animals.pop_front(); // Destroy the pointer\n        return d;\n    }\n};\n\nint main() {\n    AnimalQueue q;\n    std::unique_ptr&lt;Dog&gt; d = std::make_unique&lt;Dog&gt;(\"Rex\");\n    q.enqueue(d.get()); // This will now store the pointer to the object\n\n    // Try with dog-specific command\n    Animal *sameDog = q.dequeue(); // d.get() and sameDog are now pointing at the same object\n    if (d.get() == sameDog)\n        std::cout &lt;&lt; \"d.get() == sameDog\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; sameDog-&gt;name &lt;&lt; std::endl;// Prints \"Rex\"\n    sameDog-&gt;speak();\n\n    return 0;\n}\n</code></pre>\n\n<p><kbd><a href=\"http://ideone.com/UcUlNY\" rel=\"nofollow noreferrer\">Example</a></kbd></p>\n"}], "owner": {"reputation": 976, "user_id": 4003671, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BHAz6.jpg?s=128&g=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/4003671/alec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 29132502, "answer_count": 2, "score": 1, "last_activity_date": 1426755203, "creation_date": 1426711914, "last_edit_date": 1426749437, "question_id": 29132411, "link": "https://stackoverflow.com/questions/29132411/c-polymorphic-pointer-cannot-invoke-member-function", "title": "C++ polymorphic pointer cannot invoke member function", "body": "<p>I'm trying to set up a simple case to solve a textbook exercise. The code is on <a href=\"http://ideone.com/tzgSTI\" rel=\"nofollow\">IDEone</a>, and repeated below.</p>\n\n<p>The code is a simplified case of trying to store a number of lists of animals, and being able to return any generic animal from one of these animal-specific lists held inside my wrapper queue. </p>\n\n<p>I can add animals just fine and when trying to retrieve a dog, I appear to get a pointer to the dog since I can print its <code>name</code>. However, if I try to call its member function <code>speak()</code>, the code crashes and I can't figure out why.</p>\n\n<pre><code>class Animal {\npublic:\n    virtual void speak() = 0;\n    string name;\n};\n\nclass Dog: public Animal {\npublic:\n    Dog(string n) { this-&gt;name=n; }\n    void speak() { cout&lt;&lt;name&lt;&lt;\" says WOOF!\"&lt;&lt;endl; }\n};\n\nclass AnimalQueue {\n    list&lt;Dog&gt; dogs;\n    list&lt;Cat&gt; cats; // etc.\npublic:\n    void enqueue(Animal* a) {\n        Dog * d = dynamic_cast&lt;Dog*&gt;(a);\n        if (d!=nullptr) dogs.push_back(*d);\n        else // check for other animals, etc.\n    }\n    Dog* dequeueDog() {\n        Dog * d = &amp;(dogs.front());\n        dogs.pop_front();\n        return d;\n    }\n    Animal dequeueAny() {\n        // Should return a random animal from any list\n    }\n};\n\nint main() {\n    // Set up\n    AnimalQueue q;\n    Dog * d;\n    d = new Dog(\"Rex\");\n    q.enqueue(d);\n\n    // Retrieve Rex\n    d = q.dequeueDog();\n    cout&lt;&lt;d-&gt;name&lt;&lt;endl;  // Prints \"Rex\"\n    d-&gt;speak();           // Crashes?!\n\n    return 0;\n}\n</code></pre>\n\n<p>EDIT: Sorry, in cutting down my code, I eliminated the essence of the problem, which is that I should be able to add any sub-class of <code>Animal</code> to my list, and there's a special function called <code>dequeueAny()</code> which should be able to return a random <code>Animal</code> from any list. The code has been edited to include this (as well as my previously omitted <code>nullptr</code> checks when <code>enqueue</code>ing.</p>\n\n<p>What's the best way to handle this? Is it to pass in a reference to an existing <code>Animal</code> object? Would that work? ie could, I have:</p>\n\n<pre><code>void dequeueAny(Animal * a) {\n    // for example, let's return a Dog\n    Dog d = dogs.front();\n    dogs.pop_front();\n    *a = d;\n}\n</code></pre>\n\n<p>Admittedly, things like <code>dequeueDog()</code> should probably return a <code>Dog</code> by value.</p>\n"}, {"tags": ["java", "c++", "cmd", "swig"], "answers": [{"comments": [{"owner": {"reputation": 353, "user_id": 3407953, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1f1b6faa4ef8670949df0af911c49950?s=128&d=identicon&r=PG&f=1", "display_name": "xpg94", "link": "https://stackoverflow.com/users/3407953/xpg94"}, "edited": false, "score": 0, "creation_date": 1426760431, "post_id": 29134523, "comment_id": 46507332, "body": "Thanks for the answer. I&#39;ll try it out as soon as I get back home (in few hours), and I&#39;ll post the results. Thanks once again."}, {"owner": {"reputation": 353, "user_id": 3407953, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1f1b6faa4ef8670949df0af911c49950?s=128&d=identicon&r=PG&f=1", "display_name": "xpg94", "link": "https://stackoverflow.com/users/3407953/xpg94"}, "edited": false, "score": 0, "creation_date": 1426780179, "post_id": 29134523, "comment_id": 46520435, "body": "Hello @softwariness , I did everything what you said, but the command which should produce shared library <code>g++ -shared -o myclass.dll myclass_wrap.o</code> produces undefined reference errors for all functions in myclass.cpp . And in the end, final error was <code>Id returned 1 exit status</code>. What did I do wrong?"}, {"owner": {"reputation": 353, "user_id": 3407953, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1f1b6faa4ef8670949df0af911c49950?s=128&d=identicon&r=PG&f=1", "display_name": "xpg94", "link": "https://stackoverflow.com/users/3407953/xpg94"}, "edited": false, "score": 0, "creation_date": 1426781469, "post_id": 29134523, "comment_id": 46521316, "body": "I DID IT! :) . I googled a bit, and I found that I am supposed to compile not just the example_wrap.cxx but example.cpp also with the g++ compiler. I did it and I had to modify the last command to this: <code>g++ -shared -o myclass.dll myclass_wrap.o myclass.o</code> , and the dll file was created :) ."}], "owner": {"reputation": 3834, "user_id": 4486839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Maf3I.png?s=128&g=1", "display_name": "softwariness", "link": "https://stackoverflow.com/users/4486839/softwariness"}, "is_accepted": true, "score": 1, "last_activity_date": 1426720947, "creation_date": 1426720947, "answer_id": 29134523, "question_id": 29132409, "link": "https://stackoverflow.com/questions/29132409/swig-shows-error-when-wrapping-c-for-java/29134523#29134523", "title": "SWIG shows error when wrapping C++ for Java", "body": "<blockquote>\n  <p>After that, I typed in: <code>gcc -c myclass_wrap.cxx -I\"C:\\Program\n  Files\\Java\\jdk1.7.0_60\\include\" -I\"C:\\Program\n  Files\\Java\\jdk1.7.0_60\\include\\win32\"</code></p>\n</blockquote>\n\n<p>It's C++ code, so in general prefer to compile with <code>g++</code> instead of <code>gcc</code> (though not strictly necessary):</p>\n\n<p><code>g++ -c myclass_wrap.cxx -I\"C:\\Program Files\\Java\\jdk1.7.0_60\\include\" -I\"C:\\Program Files\\Java\\jdk1.7.0_60\\include\\win32\"</code></p>\n\n<blockquote>\n  <p>Finally, I typed in <code>ld -G myclass_wrap.o -o libmyclass.so</code></p>\n  \n  <p>which produced bunch of undefined reference errors like:</p>\n  \n  <p>myclass_wrap.o:myclass_wrap.cxx:&lt;.text+0xa8>: undefined reference to\n  '__cxa_allocate_exception'</p>\n</blockquote>\n\n<p>That example for building a shared library from the SWIG documentation was not for C++ (so C++-specific symbols were not found by the linker), nor was it for Windows.</p>\n\n<p>Assuming you're using the Mingw version of gcc for Windows, use the following to compile a DLL <code>myclass.dll</code> instead:</p>\n\n<p><code>g++ -shared -o myclass.dll myclass_wrap.o</code></p>\n\n<p>For more information on building a DLL with Mingw, <a href=\"http://www.mingw.org/wiki/sampledll\" rel=\"nofollow\">see this example on the Mingw site</a>.</p>\n\n<p>See also <a href=\"http://www.dabeaz.com/cgi-bin/wiki.pl?SwigFaq/SharedLibraries\" rel=\"nofollow\">this SWIG FAQ page</a> which has links to information about building shared libraries or DLLs for a variety of platforms and compilers (but beware many example commands are for C rather than C++).</p>\n"}], "owner": {"reputation": 353, "user_id": 3407953, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1f1b6faa4ef8670949df0af911c49950?s=128&d=identicon&r=PG&f=1", "display_name": "xpg94", "link": "https://stackoverflow.com/users/3407953/xpg94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 564, "favorite_count": 0, "accepted_answer_id": 29134523, "answer_count": 1, "score": 1, "last_activity_date": 1426720947, "creation_date": 1426711908, "question_id": 29132409, "link": "https://stackoverflow.com/questions/29132409/swig-shows-error-when-wrapping-c-for-java", "title": "SWIG shows error when wrapping C++ for Java", "body": "<p>I want to wrap a c++ class using SWIG for java. I've followed the <a href=\"http://www.swig.org/tutorial.html\" rel=\"nofollow\">official tutorial</a> and <a href=\"http://www.swig.org/Doc1.3/Java.html#running_swig\" rel=\"nofollow\">documentation</a> and tried to make it work, but I get some errors.\nI use windows 7 x64.</p>\n\n<p>So I opened cmd and typed:<code>swig -c++  -java myclass.i</code></p>\n\n<p>That command executed and generated few files.(it did not produce errors)</p>\n\n<p>After that, I typed in: <code>gcc -c myclass_wrap.cxx  -I\"C:\\Program Files\\Java\\jdk1.7.0_60\\include\" -I\"C:\\Program Files\\Java\\jdk1.7.0_60\\include\\win32\"\n</code>\nAnd that command was successful as well. (did not produce errors)</p>\n\n<p>Finally, I typed in <code>ld -G myclass_wrap.o  -o libmyclass.so</code></p>\n\n<p>which produced bunch of undefined reference errors like:</p>\n\n<p><code>myclass_wrap.o:myclass_wrap.cxx:&lt;.text+0xa8&gt;: undefined reference to '__cxa_allocate_exception'</code></p>\n\n<p>Here is my initial c++ code, the following c++ class:\nheader file:</p>\n\n<pre><code>/*myclass.h*/\n#define MYCLASS_H\n#ifndef MYCLASS_H\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nclass myClass\n{\nprivate:\n    int ID;\n    std::vector&lt;int&gt; vector;\n\npublic:\n    myClass();\n    myClass(int id, std::vector&lt;int&gt; v);\n\n    void setID(int id);\n    int getID();\n\n    void setVector(std::vector&lt;int&gt; v);\n    std::vector&lt;int&gt; getVector();\n\n    void insertIntoVector(int num);\n    void printVector();\n};\n\n#endif // MYCLASS_H\n</code></pre>\n\n<p>and cpp file:</p>\n\n<pre><code>/*myclass.cpp*/\n#include \"myclass.h\"\nmyClass::myClass()\n{\n    ID=0;\n    vector=std::vector&lt;int&gt;();\n}\n\nmyClass::myClass(int id, std::vector&lt;int&gt; v)\n{\n    ID=id;\n    vector=v;\n}\n\nvoid myClass::setID(int id)\n{\n    ID=id;\n}\n\nint myClass::getID()\n{\n    return ID;\n}\n\n\nvoid myClass::setVector(std::vector&lt;int&gt; v)\n{\n    vector=v;\n}\nstd::vector&lt;int&gt; myClass::getVector()\n{\n    return vector;\n}\n\nvoid myClass::insertIntoVector(int num)\n{\n    std::vector&lt;int&gt;::iterator it;\n    it=vector.end();\n    vector.insert(it,num);\n}\n\nvoid myClass::printVector()\n{\n    std::vector&lt;int&gt;::iterator it;\n    for (it=vector.begin(); it&lt;vector.end(); it++)\n        std::cout &lt;&lt; ' ' &lt;&lt; *it&lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>and the swig module file:</p>\n\n<pre><code>/*myclass.i*/    \n%module test\n%{\n#include \"myclass.h\"\n%}\n\n%include \"std_vector.i\"\nnamespace std {\n   %template(IntVector) vector&lt;int&gt;;\n}\n\n%include \"myclass.h\"\n</code></pre>\n"}, {"tags": ["c++", "initialization", "undefined-behavior", "pointer-to-member"], "comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 2, "creation_date": 1426711916, "post_id": 29132375, "comment_id": 46490691, "body": "For <code>int x = x</code> see <a href=\"http://stackoverflow.com/q/14935722/1708801\">Does initialization entail lvalue-to-rvalue conversion? Is <code>int x = x;</code> UB?</a> and <a href=\"http://stackoverflow.com/q/23415661/1708801\">Has C++ standard changed with respect to the use of indeterminate values and undefined behavior in C++14?</a>."}], "answers": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1426712906, "creation_date": 1426712906, "answer_id": 29132713, "question_id": 29132375, "link": "https://stackoverflow.com/questions/29132375/initializing-member-variable-with-pointer-to-itself/29132713#29132713", "title": "Initializing member variable with pointer to itself", "body": "<blockquote>\n  <p>Is this code equivalent to the above:</p>\n</blockquote>\n\n<p>I would think so, yes, because you are essentially doing <code>: x(x)</code>, just using a pointer to read the current value of <code>x</code> as the input value, but <code>x</code> has not been initialized yet.</p>\n"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": true, "score": 2, "last_activity_date": 1426774374, "last_edit_date": 1495542117, "creation_date": 1426716379, "answer_id": 29133610, "question_id": 29132375, "link": "https://stackoverflow.com/questions/29132375/initializing-member-variable-with-pointer-to-itself/29133610#29133610", "title": "Initializing member variable with pointer to itself", "body": "<p>C++14 makes it clear that using an <a href=\"https://stackoverflow.com/q/23415661/1708801\">indeterminate value is undefined behavior</a>, from section <code>8.5</code> (<em>emphasis mine</em>):</p>\n\n<blockquote>\n  <p>If no initializer is specified for an object, the object is\n  default-initialized. <strong>When storage for an object with automatic or\n  dynamic storage duration is obtained, the object has an indeterminate\n  value, and if no initialization is performed for the object, that\n  object retains an indeterminate value until that value is replaced</strong>\n  (5.17 [expr.ass]). [Note: Objects with static or thread storage\n  duration are zero-initialized, see 3.6.2 [basic.start.init]. \u2014end\n  note] <strong>If an indeterminate value is produced by an evaluation, the\n  behavior is undefined except in the following cases</strong>:</p>\n</blockquote>\n\n<p>The only exceptions being in the case of unsigned char. Which is probably why they changed the example section 3.3.2 from:</p>\n\n<pre><code>int x = 12;\n{ int x = x; }\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>unsigned char x = 12;\n{ unsigned char x = x; }\n</code></pre>\n\n<p>I do not see any exceptions that would exclude your example.</p>\n\n<p><code>x</code> has an indeterminate value until it is initialized but then you access its value during the initialization which invokes undefined behavior.</p>\n"}], "owner": {"reputation": 9246, "user_id": 1594090, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/abcb972aecf3262918ecae1d9a3781d1?s=128&d=identicon&r=PG", "display_name": "template boy", "link": "https://stackoverflow.com/users/1594090/template-boy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 29133610, "answer_count": 2, "score": 4, "last_activity_date": 1438882644, "creation_date": 1426711780, "last_edit_date": 1438882644, "question_id": 29132375, "link": "https://stackoverflow.com/questions/29132375/initializing-member-variable-with-pointer-to-itself", "title": "Initializing member variable with pointer to itself", "body": "<p>I've heard that the following is valid and leaves <code>x</code> uninitialized as if it were <code>int x;</code>:</p>\n\n<pre><code>int x = x;\n</code></pre>\n\n<p>What about this? Is this code equivalent to the above:</p>\n\n<pre><code>struct Foo\n{\n    Foo(int Foo::*p) : x(this-&gt;*p) { }\n    int x;\n};\n\nint main() {\n    Foo f(&amp;Foo::x);\n}\n</code></pre>\n\n<p>Is <code>f.x</code> still uninitialized? Do I have undefined behavior?</p>\n"}, {"tags": ["c++", "operators"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 2, "creation_date": 1426712403, "post_id": 29132374, "comment_id": 46490949, "body": "Smells of premature optimization, if professor&#39;s message is accurate and complete here."}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1426712465, "post_id": 29132374, "comment_id": 46490977, "body": "Maybe he wants you to use the C style IO functions like <code>printf</code>, <code>scanf</code> and friends."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 1, "creation_date": 1426713006, "post_id": 29132374, "comment_id": 46491281, "body": "@0x499602D2: Maybe, but I don&#39;t know of any reason to assume they&#39;re faster than <code>std::cout &lt;&lt; ...</code> and <code>std::cin &gt;&gt; ...</code>. Note that <code>printf</code> has to parse the format string."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1426713034, "post_id": 29132374, "comment_id": 46491296, "body": "Has the professor profiled the operators to back up his claim that they are slow?  And slow compared to what exactly?  What is <i>his</i> alternative?"}, {"owner": {"reputation": 5263, "user_id": 4107809, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7f83ddf73fbc4629a75d5b23f6b6be43?s=128&d=identicon&r=PG&f=1", "display_name": "mattm", "link": "https://stackoverflow.com/users/4107809/mattm"}, "edited": false, "score": 3, "creation_date": 1426713053, "post_id": 29132374, "comment_id": 46491304, "body": "There is some prior discussion on the issue of efficiency: <a href=\"http://stackoverflow.com/questions/605839/c-and-c-file-i-o\">stackoverflow.com/questions/605839/c-and-c-file-i-o</a>  As a personal note, if you are taking an introductory programming class, there is no reason you should be worried about this kind of efficiency."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1426713289, "post_id": 29132374, "comment_id": 46491429, "body": "@RemyLebeau: The normal complaints revolve around the fact that <code>iostreams</code> use a virtual function call for each <i>byte</i> written, even for unformatted reads/writes, and the locks involved when they&#39;re tied to the C streams, which is the default state."}, {"owner": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "edited": false, "score": 0, "creation_date": 1426713668, "post_id": 29132374, "comment_id": 46491627, "body": "As far as I know, the standard advice is to avoid mixing printf and cout in the same program. Only then will you pay for the synch between type-safe C++ iostreams and legacy C I/O."}, {"owner": {"reputation": 201, "user_id": 4332164, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c11b1188ac1ab3eb2f446102e495ba6b?s=128&d=identicon&r=PG&f=1", "display_name": "Hel", "link": "https://stackoverflow.com/users/4332164/hel"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1426714882, "post_id": 29132374, "comment_id": 46492206, "body": "@0x499602D2, I find that weird but if there are no other alternative, I guess I&#39;ll have to do that."}, {"owner": {"reputation": 201, "user_id": 4332164, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c11b1188ac1ab3eb2f446102e495ba6b?s=128&d=identicon&r=PG&f=1", "display_name": "Hel", "link": "https://stackoverflow.com/users/4332164/hel"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1426715003, "post_id": 29132374, "comment_id": 46492269, "body": "@RemyLebeau, that&#39;s the thing. He didn&#39;t say anything. He gave examples for Java, but for C++ he just said that."}, {"owner": {"reputation": 201, "user_id": 4332164, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c11b1188ac1ab3eb2f446102e495ba6b?s=128&d=identicon&r=PG&f=1", "display_name": "Hel", "link": "https://stackoverflow.com/users/4332164/hel"}, "reply_to_user": {"reputation": 5263, "user_id": 4107809, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7f83ddf73fbc4629a75d5b23f6b6be43?s=128&d=identicon&r=PG&f=1", "display_name": "mattm", "link": "https://stackoverflow.com/users/4107809/mattm"}, "edited": false, "score": 0, "creation_date": 1426715010, "post_id": 29132374, "comment_id": 46492273, "body": "@mattm, I&#39;m taking an algorithms class, so it&#39;s all about efficiency. That&#39;s why I&#39;m concerned."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1426715464, "post_id": 29132374, "comment_id": 46492480, "body": "@Helena: So your professor is claiming that Java is faster than C++, without proof?  Wow.  Good luck in your class."}, {"owner": {"reputation": 201, "user_id": 4332164, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c11b1188ac1ab3eb2f446102e495ba6b?s=128&d=identicon&r=PG&f=1", "display_name": "Hel", "link": "https://stackoverflow.com/users/4332164/hel"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1426715785, "post_id": 29132374, "comment_id": 46492608, "body": "@RemyLebeau, no. This project can be done in one of three languages: C, C++ or Java. I only chose C++ over C because it has a lot of data structures implemented that would be very useful. There are some people that tried to do in Java but they can&#39;t pass all tests, so he published an announcement saying that, in C++, &lt;&lt; and &gt;&gt; operators were not recommended because they were slower and then gave a few examples for those using Java. Never did he say that Java is faster than C++, he just told us what we should use in Java to I/O."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1426717335, "post_id": 29132374, "comment_id": 46493248, "body": "The efficiency of you program is based on the efficiency of the algorithm, not the implementation of things like I/O routines.  Concepts such as &quot;linear search&quot; versus &quot;binary search&quot; should be your concern.  Most of your code will not be large enough to warrant concern over the speed of I/O."}, {"owner": {"reputation": 201, "user_id": 4332164, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c11b1188ac1ab3eb2f446102e495ba6b?s=128&d=identicon&r=PG&f=1", "display_name": "Hel", "link": "https://stackoverflow.com/users/4332164/hel"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1426725388, "post_id": 29132374, "comment_id": 46495723, "body": "@ThomasMatthews, the program is done and the algorithms were all chosen carefully given the problem. My concern with I/O is due to my professor&#39;s recommendation not to use &lt;&lt; and &gt;&gt;, no other reason."}], "answers": [{"comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1426713316, "post_id": 29132762, "comment_id": 46491445, "body": "I don&#39;t think these are significantly faster than the <code>&lt;&lt;</code> versions, and you don&#39;t provide a way to handle integers."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1426717919, "post_id": 29132762, "comment_id": 46493452, "body": "Much of the loss of efficiency is due to the translation from a textual representation to the internal representation."}, {"owner": {"reputation": 201, "user_id": 4332164, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c11b1188ac1ab3eb2f446102e495ba6b?s=128&d=identicon&r=PG&f=1", "display_name": "Hel", "link": "https://stackoverflow.com/users/4332164/hel"}, "edited": false, "score": 0, "creation_date": 1426725446, "post_id": 29132762, "comment_id": 46495737, "body": "Thanks for you answer. I ended up using scanf and printf instead."}], "owner": {"reputation": 86, "user_id": 4347811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xhpHy.jpg?s=128&g=1", "display_name": "Craig K", "link": "https://stackoverflow.com/users/4347811/craig-k"}, "is_accepted": false, "score": 3, "last_activity_date": 1426713113, "creation_date": 1426713113, "answer_id": 29132762, "question_id": 29132374, "link": "https://stackoverflow.com/questions/29132374/are-c-and-operators-slow-what-alternatives-are-there-to-these-operators/29132762#29132762", "title": "Are C++ &lt;&lt; and &gt;&gt; operators slow? What alternatives are there to these operators?", "body": "<p>For cout you can use <a href=\"http://www.cplusplus.com/reference/ostream/ostream/put/\" rel=\"nofollow\">put</a> or <a href=\"http://www.cplusplus.com/reference/ostream/ostream/write/\" rel=\"nofollow\">write</a></p>\n\n<pre><code>// single character\nchar character;\ncout.put(character);\n\n// c string\nchar * buffer = new char[size];\ncout.write(buffer, size);\n</code></pre>\n\n<p>For cin you could use <a href=\"http://www.cplusplus.com/reference/istream/istream/read/\" rel=\"nofollow\">get</a>, <a href=\"http://www.cplusplus.com/reference/istream/istream/read/\" rel=\"nofollow\">read</a>, or <a href=\"http://www.cplusplus.com/reference/istream/istream/getline/\" rel=\"nofollow\">getline</a></p>\n\n<pre><code>// Single character\nchar ch;\nstd::cin.get(ch); \n\n// c string\nchar * buffer = new char[size];\nstd::cin.read(buffer, size);\nstd::cin.get(buffer, size);\nstd::cin.getline(buffer, size);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 201, "user_id": 4332164, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c11b1188ac1ab3eb2f446102e495ba6b?s=128&d=identicon&r=PG&f=1", "display_name": "Hel", "link": "https://stackoverflow.com/users/4332164/hel"}, "edited": false, "score": 0, "creation_date": 1426725530, "post_id": 29133930, "comment_id": 46495758, "body": "I ended up using scanf and printf instead (which made it a little bit faster). Thanks for the binary file representation idea though, it is worth looking into."}], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": -1, "last_activity_date": 1426717837, "creation_date": 1426717837, "answer_id": 29133930, "question_id": 29132374, "link": "https://stackoverflow.com/questions/29132374/are-c-and-operators-slow-what-alternatives-are-there-to-these-operators/29133930#29133930", "title": "Are C++ &lt;&lt; and &gt;&gt; operators slow? What alternatives are there to these operators?", "body": "<p>Worrying about the speed of the stream extraction operators (&lt;&lt; and >>) in C++ is something to do when you have lots of data to process (over 1E06 items).  For smaller sets of data, the execution time is negligible to other factors with the computer and your program.  </p>\n\n<p>Before you worry about the speed of formatted I/O, get your program working correctly.  Review your algorithms for efficiency.  Review your implementation of the algorithms for efficiency.  Review the data for efficiency.  </p>\n\n<p>The slowness of the stream extraction operators is first translating from textual representation to internal representation, then the implementation.  Heck, if you are typing in the data, forget about any optimizations.  To speed up your file reading, organize the data for easy extraction and translation.  </p>\n\n<p>If you are still panicking about efficiency, use <em>binary</em> file representation.  The data in the file should be formatted so that it can be loaded directly into memory without any translations.  Also, the data should be loaded in large chunks.  </p>\n\n<p>From the <em>Hitchhiker's Guide to the Galaxy</em>, <strong>DON'T PANIC</strong>.  </p>\n"}], "owner": {"reputation": 201, "user_id": 4332164, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c11b1188ac1ab3eb2f446102e495ba6b?s=128&d=identicon&r=PG&f=1", "display_name": "Hel", "link": "https://stackoverflow.com/users/4332164/hel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 29133930, "answer_count": 2, "score": 1, "last_activity_date": 1426717837, "creation_date": 1426711780, "last_edit_date": 1426712996, "question_id": 29132374, "link": "https://stackoverflow.com/questions/29132374/are-c-and-operators-slow-what-alternatives-are-there-to-these-operators", "title": "Are C++ &lt;&lt; and &gt;&gt; operators slow? What alternatives are there to these operators?", "body": "<p>I'm doing a project for college and I'm using C++. I used <code>std::cin</code> and <code>std::cout</code> with the <code>&lt;&lt;</code> and <code>&gt;&gt;</code> operators to read input and to display output.  My professor has published an announcement saying that <code>&gt;&gt;</code> and <code>&lt;&lt;</code> are not recommended because they are slow.</p>\n\n<p>We only have to read integers and the input is always correct (we don't need to verify it, we know the format it is in and just need to read it). What alternatives should we use then, if <code>&lt;&lt;</code> and <code>&gt;&gt;</code> are not recommended?</p>\n"}, {"tags": ["c++", "lua", "lua-table", "lua-api"], "answers": [{"comments": [{"owner": {"reputation": 2470, "user_id": 4262157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DIi0C.jpg?s=128&g=1", "display_name": "Erik W", "link": "https://stackoverflow.com/users/4262157/erik-w"}, "edited": false, "score": 0, "creation_date": 1426712681, "post_id": 29132528, "comment_id": 46491083, "body": "Oh my god, I feel so stupid now. I literary tried to solve this for more than 40 minutes. Thanks alot"}], "owner": {"reputation": 64130, "user_id": 107090, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/RZVHK.png?s=128&g=1", "display_name": "lhf", "link": "https://stackoverflow.com/users/107090/lhf"}, "is_accepted": true, "score": 3, "last_activity_date": 1426712338, "creation_date": 1426712338, "answer_id": 29132528, "question_id": 29132283, "link": "https://stackoverflow.com/questions/29132283/c-lua-getting-value-from-lua-table/29132528#29132528", "title": "C++ Lua Getting Value From Lua Table", "body": "<p>Change <code>%i</code> to <code>%g</code>. <code>lua_tonumber</code> returns a float or double, not an int. </p>\n"}], "owner": {"reputation": 2470, "user_id": 4262157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DIi0C.jpg?s=128&g=1", "display_name": "Erik W", "link": "https://stackoverflow.com/users/4262157/erik-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1249, "favorite_count": 1, "accepted_answer_id": 29132528, "answer_count": 1, "score": 4, "last_activity_date": 1426715713, "creation_date": 1426711478, "last_edit_date": 1426715713, "question_id": 29132283, "link": "https://stackoverflow.com/questions/29132283/c-lua-getting-value-from-lua-table", "title": "C++ Lua Getting Value From Lua Table", "body": "<p>I am trying to get values from a Lua table. This is what I have written in Program.cpp:</p>\n\n<pre><code>lua_State* lua = luaL_newstate();\nluaL_openlibs(lua);\nluaL_dofile(program-&gt;getLuaState(), \"Script.lua\");\n\nlua_getglobal(lua, \"table\");\nlua_pushstring(lua, \"x\");\nlua_gettable(lua, -2);\nprintf(\"%i\", lua_tonumber(lua, -1));\n</code></pre>\n\n<p>And I wrote this in Script.lua:</p>\n\n<pre><code>table = {x = 12, y = 32}\n</code></pre>\n\n<p>The problem is that this only writes 0 in the console. I have checked that the lua file is loading correctly. What am I doing wrong?</p>\n"}, {"tags": ["c++", "opengl"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user245019"}, "edited": false, "score": 0, "creation_date": 1426755950, "post_id": 29132830, "comment_id": 46504713, "body": "Yep, I had forgotten to reserve enough space for the components in the array that was initially used to create the texture. <code>Width * Height * Components</code>"}], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": true, "score": 0, "last_activity_date": 1426713330, "creation_date": 1426713330, "answer_id": 29132830, "question_id": 29132239, "link": "https://stackoverflow.com/questions/29132239/opengl-unhandled-exception-in-nvoglv32-dll-gltexsubimage/29132830#29132830", "title": "OpenGL Unhandled exception in nvoglv32.dll glTexSubImage", "body": "<p>You're probably access out-of-bounds whatever <code>data</code> points to. This can happen if the alignment and strides are not properly set. It can also happen if data is allocated to short; it doesn't have to crash right when the first thing writes out-of-bounds, it can taint the address space and trigger the crash somewhere else.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user245019"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 457, "favorite_count": 0, "accepted_answer_id": 29132830, "answer_count": 1, "score": 0, "last_activity_date": 1426713330, "creation_date": 1426711323, "question_id": 29132239, "link": "https://stackoverflow.com/questions/29132239/opengl-unhandled-exception-in-nvoglv32-dll-gltexsubimage", "title": "OpenGL Unhandled exception in nvoglv32.dll glTexSubImage", "body": "<p>I have a very random crash that happens, 1 in 10 or so times I'll get a crash in <code>nvoglv32.dll</code>. It doesn't always happen in the exact same place, but it does happen within 10 or so lines from the same place.</p>\n\n<p>I added the ability to update textures using <code>glTexSubImage2D()</code>, and now I have these intermittent crashes.</p>\n\n<pre><code>  void UpdateTexture(const GLuint textureID, const CaffApp::Dev::Format format, const CaffApp::Dev::TextureD dimention, const uint32_t offsetX, const uint32_t offsetY, const uint32_t width, const uint32_t height, void *data)\n  {\n    using namespace CaffApp::Dev;\n\n    const auto externalFormat = format == Format::DEV ? GL_RGBA32F : GL_RGBA ;\n    const auto internalFormat = GL_RGBA;\n    const auto formatType     = format == Format::R8G8B8 ? GL_UNSIGNED_BYTE : GL_FLOAT;\n    const auto glDimention    = GetDimentionTarget(dimention);\n\n    assert(CaffMath::IsPOW2(texWidth));\n    assert(CaffMath::IsPOW2(texHeight));\n\n    glBindTexture(glDimention, textureID);\n\n    switch(glDimention)\n    {\n      case(GL_TEXTURE_1D):\n      {\n        glTexSubImage1D(GL_TEXTURE_1D, offsetX, 0, texWidth, internalFormat, formatType, data);\n        break;\n      }\n      case(GL_TEXTURE_2D):\n      {\n        glTexSubImage2D(GL_TEXTURE_2D, 0, offsetX, offsetY, texWidth, texHeight, internalFormat, formatType, data);\n        break;\n      }\n    };\n\n    glBindTexture(glDimention, 0);\n    GL_ERROR(\"Updating texture.\")\n  }\n\nvoid Texture::updateSubset(const std::vector&lt;float&gt; &amp;data, const uint32_t offsetX, const uint32_t offsetY)\n{\n  assert(m_textureID);\n\n  uint32_t sizeX = m_width;\n  uint32_t sizeY = m_height;\n\n  if(sizeX == 0 || sizeY == 0)\n  {\n    SetTextureDimentionFromDataSize(m_dimention, data.size(), sizeX, sizeY);\n  }\n\n  UpdateTexture(m_textureID, m_format, m_dimention, offsetX, offsetY, sizeX, sizeY, (void*)data.data());\n\n  GL_ERROR(\"Updating texture.\")\n}\n</code></pre>\n\n<p>If the crash happens it happens only at the first time glTexSubImage... is called. Otherwise its fine. </p>\n\n<p>I did see something about vertex attributes not being set right, but I can't really see anything wrong there and that's code that hasn't been changed in 2 years or so, so thinking its around here instead.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["python", "c++", "c", "windows", "gcc"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1426710690, "post_id": 29132026, "comment_id": 46489958, "body": "I guess you have a 32/64 bit mismatch somewhere."}, {"owner": {"reputation": 1471, "user_id": 4086467, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a09b4041b111e58020670dcaaf6d386a?s=128&d=identicon&r=PG&f=1", "display_name": "texasflood", "link": "https://stackoverflow.com/users/4086467/texasflood"}, "edited": false, "score": 0, "creation_date": 1426712120, "post_id": 29132026, "comment_id": 46490808, "body": "Not helpful, I know, but this is another reason why I moved to Linux. It is as easy as <code>sudo apt-get install python-levenshtein</code> and this is guaranteed to work in just one line"}, {"owner": {"reputation": 31264, "user_id": 393194, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3d79d73463b194fb88957db095b92ea2?s=128&d=identicon&r=PG", "display_name": "Mike Driscoll", "link": "https://stackoverflow.com/users/393194/mike-driscoll"}, "edited": false, "score": 0, "creation_date": 1426714416, "post_id": 29132026, "comment_id": 46491980, "body": "Is the Python you have installed a 64-bit Python or 32-bit? Because you may not be able to install a 32-bit package against a 64-bit Python"}, {"owner": {"reputation": 1137, "user_id": 3395374, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/285a4a5200f609969d811d471ae2c846?s=128&d=identicon&r=PG&f=1", "display_name": "Muposat", "link": "https://stackoverflow.com/users/3395374/muposat"}, "reply_to_user": {"reputation": 31264, "user_id": 393194, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3d79d73463b194fb88957db095b92ea2?s=128&d=identicon&r=PG", "display_name": "Mike Driscoll", "link": "https://stackoverflow.com/users/393194/mike-driscoll"}, "edited": false, "score": 0, "creation_date": 1426778476, "post_id": 29132026, "comment_id": 46519215, "body": "@Mike Driscoll: The Python installed is most definitely 64 bit. The package should not be tied to the machine architecture because isn&#39;t that the point behind compiling it instead of distributing a binary?"}], "owner": {"reputation": 1137, "user_id": 3395374, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/285a4a5200f609969d811d471ae2c846?s=128&d=identicon&r=PG&f=1", "display_name": "Muposat", "link": "https://stackoverflow.com/users/3395374/muposat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 859, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1426710531, "creation_date": 1426710531, "question_id": 29132026, "link": "https://stackoverflow.com/questions/29132026/cannot-compile-python-package-on-windows", "title": "Cannot compile Python package on Windows", "body": "<p>Trying to install a compiled Python package on a 64-bit Windows machine using MinGW compiler. The same install succeeded on my 32-bit machine but failed on two different 64-bit machines:\n<code>C:\\Python\\Scripts&gt;</code> <code>pip install python-Levenshtein</code></p>\n\n<blockquote>\n  <p>C:\\Python\\libs/python33.lib: error adding symbols: File in wrong format<br>\n     collect2.exe: error: ld returned 1 exit status<br>\n     error: command 'gcc' failed with exit status 1 </p>\n</blockquote>\n\n<p>Trying from a cloned copy:\n<code>$ python setup.py build</code></p>\n\n<blockquote>\n  <p>C:\\Python\\libs/python33.lib: error adding symbols: File in wrong format<br>\n    collect2.exe: error: ld returned 1 exit status<br>\n    error: command 'gcc' failed with exit status 1 </p>\n</blockquote>\n\n<p>Running the build command by itself:</p>\n\n<p><code>$ gcc.exe -shared -s 'build\\temp.win-amd64-3.3\\Release\\levenshtein\\_levenshtein.o' 'build\\temp.win-amd64-3.3\\Release\\levenshtein\\_levenshtein.def' -LC:'\\Python\\libs' -LC:'\\Python\\PCbuild\\amd64' -lpython33 -lmsvcr100 -o 'build\\lib.win-amd64-3.3\\Levenshtein\\_levenshtein.pyd'</code></p>\n\n<blockquote>\n  <p>C:\\Python\\libs/python33.lib: error adding symbols: File in wrong format<br>\n  collect2.exe: error: ld returned 1 exit status  </p>\n</blockquote>\n\n<p><code>$ file 'C:\\Python\\libs/python33.lib'</code></p>\n\n<blockquote>\n  <p>C:\\Python\\libs/python33.lib: current ar archive</p>\n</blockquote>\n\n<p>Thank you\n- Muposat</p>\n"}, {"tags": ["c++", "sorting", "templates", "c++11"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1426710060, "post_id": 29131785, "comment_id": 46489575, "body": "tl;dr aka couldnt find the question"}, {"owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1426710737, "post_id": 29131785, "comment_id": 46489980, "body": "I clarified my question in the last part.  The char components are first looked at (sort the tuples so that the these are in alphabetical order), then among the ties look at the int component (sort the ties so that these are in reverse order), then if there are still any ties look at the string component (sort the ties so that the strings are from shortest to longest).  If this test in main() passes, then the entire algorithm should be correct."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1426710877, "post_id": 29131785, "comment_id": 46490069, "body": "I am interested in your question but your code is above my head. A simple English description of what you are trying to do (rather than what you&#39;ve done so far) would help."}, {"owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "edited": false, "score": 0, "creation_date": 1426711098, "post_id": 29131785, "comment_id": 46490223, "body": "Ok, we have a container of tuples.  Let&#39;s sort them. How?  Let&#39;s focus on the 3rd component of each tuple (suppose that is int), and then sort the tuples so that the 3rd components are in reverse order.  But there are some ties (some of the tuples have identical 3rd components).  So let&#39;s look at the first component (which is char) and sort the tied groups so that these are in alphabetical order.  Still some ties among these first components and third components, look for another component and continue."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1426711163, "post_id": 29131785, "comment_id": 46490275, "body": "same for me, but still after your edit I cannot find what is your question. Please try to summarize what is your problem in 1-2 sentences. Actually I still dont find the question in your text"}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1426711257, "post_id": 29131785, "comment_id": 46490336, "body": "Can&#39;t you just pass a custom comparator which looks at the nth component?"}, {"owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "edited": false, "score": 0, "creation_date": 1426711342, "post_id": 29131785, "comment_id": 46490387, "body": "In my very first example, the output is (1, 9) (1, 2) (3, 5) (3, 7) (3, 1) (3, 5) (6, 8) because the first components are sorted from least to greatest.  But 4 pairs begin with 3.  So let&#39;s sort these 4 according to the second component by some other comparator. The goal is a generalization of this."}, {"owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "reply_to_user": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1426711541, "post_id": 29131785, "comment_id": 46490496, "body": "@Neil Kirk. I did that already in my first example.  So now I want to continue with all the other components by specifying the order of the components for each subsequent sort, and the binary predicates that go with those components to carry out those sorts."}, {"owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "edited": false, "score": 0, "creation_date": 1426714068, "post_id": 29131785, "comment_id": 46491826, "body": "I think it is composing the comparators that needs to be done, instead of recursion.  I&#39;ve added a new idea and a new approach in my question."}], "answers": [{"comments": [{"owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "edited": false, "score": 0, "creation_date": 1426716418, "post_id": 29133091, "comment_id": 46492884, "body": "I was busy working on my new idea when you posted your solution.  I haven&#39;t studied your idea yet, but I will do so and try to make it fully compile once I understand it, and then see if it is vastly different from my solution or not.  Regardless, you definitely get my vote for believing in my question and your willingness to help out."}], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1426771714, "last_edit_date": 1426771714, "creation_date": 1426714233, "answer_id": 29133091, "question_id": 29131785, "link": "https://stackoverflow.com/questions/29131785/sorting-container-of-tuples-by-fixed-components/29133091#29133091", "title": "Sorting container of tuples by fixed components", "body": "<pre><code>template&lt;class F&gt;\nstruct order_by_t {\n  F f;\n  template&lt;class Lhs, class Rhs&gt;\n  bool operator(Lhs&amp;&amp;lhs, Rhs&amp;&amp;rhs)const {\n    return f(std::forward&lt;Lhs&gt;(lhs)) &lt; f(std::forward&lt;Rhs&gt;(rhs));\n  }\n};\ntemplate&lt;class F&gt;\norder_by_t&lt; std::decay_t&lt;F&gt; &gt; order_by( F&amp;&amp; f ) {\n  return {std::forward&lt;F&gt;(f)};\n}\n</code></pre>\n\n<p>This takes a type T and a map M:T->U and uses the ordering on U to provide an ordering on T.</p>\n\n<pre><code>template&lt;size_t... Is&gt;\nstruct retie {\n  template&lt;class Tup&gt;\n  auto operator()( Tup&amp;&amp; tup )const-&gt;\n  decltype(std::tie( std::get&lt;Is&gt;(std::forward&lt;Tup&gt;(tup))... ))\n  { return std::tie( std::get&lt;Is&gt;(std::forward&lt;Tup&gt;(tup))... ); }\n};\n</code></pre>\n\n<p>this takes a tuple <code>tup</code> and reties its elements in a different order.</p>\n\n<pre><code>std::sort( foo.begin(), foo.end(), order_by( retie&lt;3,2,1&gt;{} ) );\n</code></pre>\n\n<p>will sort <code>foo</code> via element 3, then element 2, then element 1.</p>\n\n<p>The next thing you want to be able to do is to project each sub element into its own sorting domain.  Still not what you want, but closer.</p>\n\n<p>To solve this, I'd work on piping and making a variardic <code>order_by</code>.</p>\n\n<p>Piping lets you get, then project to a new space.</p>\n\n<pre><code>template&lt;class... Fs&gt;\nstruct order_by_t;\n\ntemplate&lt;&gt;\nstruct order_by_t&lt;&gt; {\n  template&lt;class Lhs, class Rhs&gt;\n  bool operator(Lhs&amp;&amp;lhs, Rhs&amp;&amp;rhs)const {\n    return false;\n  }\n};\ntemplate&lt;class F&gt;\nstruct order_by_t&lt;F&gt; {\n  F f;\n  template&lt;class Lhs, class Rhs&gt;\n  bool operator(Lhs&amp;&amp;lhs, Rhs&amp;&amp;rhs)const {\n    return f(std::forward&lt;Lhs&gt;(lhs)) &lt; f(std::forward&lt;Rhs&gt;(rhs));\n  }\n};\ntemplate&lt;class F, class...Fs&gt;\nstruct order_by_t&lt;F, Fs...&gt;:\n  order_by&lt;Fs...&gt;\n{\n  template&lt;class T, class...Ts&gt;\n  order_by_t(T&amp;&amp;t, Ts&amp;&amp;...ts):\n    order_by_t&lt;Fs...&gt;{std::forward&lt;Ts&gt;(ts)...},\n    f(std::forward&lt;T&gt;(t))\n  {}\n  F f;\n  template&lt;class Lhs, class Rhs&gt;\n  bool operator(Lhs&amp;&amp;lhs, Rhs&amp;&amp;rhs)const {\n    auto&amp;&amp; lhs_ = f(lhs);\n    auto&amp;&amp; rhs_ = f(rhs);\n    if (lhs_&lt;rhs_) return true;\n    if (rhs_&lt;lhs_) return false;\n    return order_by_t&lt;Fs...&gt;::operator()\n      (std::forward&lt;Lhs&gt;(lhs),std::forward&lt;Rhs&gt;(rhs));\n  }\n};\ntemplate&lt;class... Fs&gt;\norder_by_t&lt; std::decay_t&lt;Fs&gt;... &gt; order_by( Fs&amp;&amp;... fs ) {\n  return {std::forward&lt;Fs&gt;(fs)...};\n}\n</code></pre>\n\n<p>now <code>order_by</code> can take a collection of projections, and it projects one at a time, picking the first to use.</p>\n\n<p>Now we want to pipe operations together, so the get projection can be followed by a length projection (for example).</p>\n\n<pre><code>template&lt;size_t I&gt;\nstruct get_t {\n  template&lt;class Tup&gt;\n  auto operator()(Tup&amp;&amp;tup)const-&gt;\n  decltype(std::get&lt;I&gt;(tup))\n  { return std::get&lt;I&gt;(tup); }\n};\ntemplate&lt;class A, class B&gt;\nstruct compose_t {\n  A a; B b;\n  template&lt;class... Ts&gt;\n  auto operator()(Ts&amp;&amp;...ts)const-&gt;\n  std::result_of_t&lt; A const&amp;( std::result_of_T&lt; B const&amp;(Ts...) &gt; ) &gt;\n  {\n    return a(b(std::forward&lt;Ts&gt;(ts)...));\n  }\n  // if you have a SFINAE enabled result_of, this is also useful.\n  // if you don't, don't include this overload (it isn't used in this code):\n  #if 0\n  template&lt;class... Ts&gt;\n  auto operator()(Ts&amp;&amp;...ts)const-&gt;\n  std::result_of_t&lt; A const&amp;( std::result_of_T&lt; B const&amp;(Ts) &gt;... ) &gt;\n  {\n    return a(b(std::forward&lt;Ts&gt;(ts))...);\n  }\n  #endif\n};\ntemplate&lt;class A, class B&gt;\ncompose_t&lt; std::decay_t&lt;A&gt;, std::decay_t&lt;B&gt; &gt;\ncompose(A&amp;&amp; a, B&amp;&amp; b) {\n  return {std::forward&lt;A&gt;(a), std::forward&lt;B&gt;(b)};\n}\n</code></pre>\n\n<p>and we are almost there!  Replace your <code>Length</code> with:</p>\n\n<pre><code>struct get_length {\n  size_t operator()( std::string const&amp; s ) const {\n    return s.size();\n  }\n};\nstruct reversed_sort_t {\n  template&lt;class T&gt;\n  struct helper {\n    T&amp;&amp; t;\n    template&lt;class A, class B&gt;\n    friend bool operator&lt;(helper&lt;A&gt;&amp;&amp; lhs, helper&lt;B&gt;&amp;&amp; rhs) {\n      return std::forward&lt;B&gt;(rhs.t) &lt; std::forward&lt;A&gt;(lhs.t);\n    }\n  };\n  template&lt;class T&gt;\n  helper&lt;T&gt; operator()(T&amp;&amp; t) const {\n    return {std::forward&lt;T&gt;(t)};\n  }\n};\n\n//  sortByFixedComponent&lt;Z&lt;2,0,1&gt;, P&lt;std::greater&lt;char&gt;, Length, std::less&lt;int&gt;&gt;&gt; (t.begin(), t.end());  // Want this line to work.\nauto ordering = order_by(\n  compose( reversed_sort_t{}, get_t&lt;2&gt;{} ),\n  compose( get_length{}, get_t&lt;0&gt;{} ),\n  get_t&lt;1&gt;{}\n);\nstd::sort( t.begin(), t.end(), ordering );\n</code></pre>\n\n<p>A slightly different approach would be to chain multiple full orderings together, instead of chaining <code>order_by</code> projections onto each other.</p>\n\n<p>If you really want your specific syntax, work can be done to extract the <code>I</code> and the <code>F</code> and pair them up and build an <code>ordering</code> function call.</p>\n\n<p>None of the above is compiled or tested, but the design should work.</p>\n\n<p>I find the projecting your data into an already defined domain with a well defined <code>&lt;</code> is usually more pleasing than writing a custom comparison operator.</p>\n\n<p>The above uses a handful of C++14 features, mostly <code>_t</code> aliases.  Replace <code>std::blah_t&lt; args &gt;</code> with <code>typename std::blah&lt; args &gt;::type</code> if you lack that alias, or write your own <code>_t</code> alias like <code>template&lt;class...Ts&gt; using blah_t=typename std::blah&lt;Ts...&gt;::type;</code>.  There is also some code that is much improved by the C++14 <code>std::result_of</code>, with the improvement <code>#if 0</code>'d out currently.</p>\n\n<p>The strangest order mapping is <code>reversed_sort_t</code>, which maps <code>T-&gt;reversed_sort_t::helper&lt;T&gt;</code>, where <code>helper&lt;T&gt;</code> is a type that supports nothing except reference-semantics default copy and reverses the application of <code>&lt;</code>.  An older version of this solution negated, but negation of -128 doesn't produce +128 when restricted to <code>char</code>.</p>\n"}, {"owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "is_accepted": false, "score": 0, "last_activity_date": 1442635761, "last_edit_date": 1442635761, "creation_date": 1426716279, "answer_id": 29133584, "question_id": 29131785, "link": "https://stackoverflow.com/questions/29131785/sorting-container-of-tuples-by-fixed-components/29133584#29133584", "title": "Sorting container of tuples by fixed components", "body": "<p>I think I got it!</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;tuple&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n#include &lt;functional&gt;\n\ntemplate &lt;typename, typename, typename&gt; struct TuplePredicateBuilder;\n\ntemplate &lt;template &lt;int...&gt; class Z, int N, template &lt;typename...&gt; class P, typename BinaryPredicate, typename Iterator&gt;\nstruct TuplePredicateBuilder&lt;Z&lt;N&gt;, P&lt;BinaryPredicate&gt;, Iterator&gt; {\n    bool operator()(const typename Iterator::value_type&amp; x, const typename Iterator::value_type&amp; y) {\n        return BinaryPredicate()(std::get&lt;N&gt;(x), std::get&lt;N&gt;(y));\n    }\n};\n\ntemplate &lt;template &lt;int...&gt; class Z, int FirstInt, int... RestInt, template &lt;typename...&gt; class P, typename FirstBinaryPredicate, typename... RestBinaryPredicate, typename Iterator&gt;\nstruct TuplePredicateBuilder&lt;Z&lt;FirstInt, RestInt...&gt;, P&lt;FirstBinaryPredicate, RestBinaryPredicate...&gt;, Iterator&gt; : TuplePredicateBuilder&lt;Z&lt;RestInt...&gt;, P&lt;RestBinaryPredicate...&gt;, Iterator&gt; {\n    bool operator()(const typename Iterator::value_type&amp; x, const typename Iterator::value_type&amp; y) {\n        if (FirstBinaryPredicate()(std::get&lt;FirstInt&gt;(x), std::get&lt;FirstInt&gt;(y)))\n            return true;\n        else if (FirstBinaryPredicate()(std::get&lt;FirstInt&gt;(y), std::get&lt;FirstInt&gt;(x)))\n            return false;\n        else\n            return TuplePredicateBuilder&lt;Z&lt;RestInt...&gt;, P&lt;RestBinaryPredicate...&gt;, Iterator&gt;::operator()(x,y);\n    }\n};\n\ntemplate &lt;typename, typename, typename&gt; struct SortByFixedComponent;\n\ntemplate &lt;template &lt;int...&gt; class Z, int N, template &lt;typename...&gt; class P, typename BinaryPredicate, typename Iterator&gt;\nstruct SortByFixedComponent&lt;Z&lt;N&gt;, P&lt;BinaryPredicate&gt;, Iterator&gt; {\n    void operator()(Iterator first, Iterator last) {\n        std::sort (first, last, [](const typename Iterator::value_type&amp; x, const typename Iterator::value_type&amp; y)-&gt;bool {\n            return BinaryPredicate()(std::get&lt;N&gt;(x), std::get&lt;N&gt;(y));\n        });\n    }\n};\n\ntemplate &lt;template &lt;int...&gt; class Z, int... Is, template &lt;typename...&gt; class P, typename... BinaryPredicates, typename Iterator&gt;\nstruct SortByFixedComponent&lt;Z&lt;Is...&gt;, P&lt;BinaryPredicates...&gt;, Iterator&gt; {\n    void operator()(Iterator first, Iterator last) {\n        std::sort (first, last, [](const typename Iterator::value_type&amp; x, const typename Iterator::value_type&amp; y)-&gt;bool {\n            return TuplePredicateBuilder&lt;Z&lt;Is...&gt;, P&lt;BinaryPredicates...&gt;, Iterator&gt;()(x,y);\n        });\n    }\n};\n\ntemplate &lt;typename Components, typename BinaryPredicates, typename Iterator&gt;\nvoid sortByFixedComponent (Iterator first, Iterator last) {\n    SortByFixedComponent&lt;Components, BinaryPredicates, Iterator&gt;()(first, last);\n}\n</code></pre>\n\n<p>Testing the output:</p>\n\n<pre><code>struct Length {\n    bool operator()(const std::string&amp; a, const std::string&amp; b) const {return a.length() &lt; b.length();}\n};\n\ntemplate &lt;typename...&gt; struct P {};\ntemplate &lt;int...&gt; struct Z {};\n\ntemplate &lt;typename Tuple, std::size_t N&gt;\nstruct TuplePrinter {\n    static void print(const Tuple&amp; t) {\n        TuplePrinter&lt;Tuple, N-1&gt;::print(t);\n        std::cout &lt;&lt; \", \" &lt;&lt; std::get&lt;N-1&gt;(t);\n    }\n};\n\ntemplate &lt;typename Tuple&gt;\nstruct TuplePrinter&lt;Tuple, 1&gt;{\n    static void print (const Tuple&amp; t) {std::cout &lt;&lt; std::get&lt;0&gt;(t);}\n};\n\ntemplate &lt;typename... Args&gt;\nvoid print (const std::tuple&lt;Args...&gt;&amp; t) {\n    std::cout &lt;&lt; \"(\";\n    TuplePrinter&lt;decltype(t), sizeof...(Args)&gt;::print(t);\n    std::cout &lt;&lt; \")\\n\";\n}\n\nint main() {\n    using Tuple = std::tuple&lt;std::string, int, char&gt;;\n    std::vector&lt;Tuple&gt; t = {\n        Tuple{\"hi\",3,'q'}, Tuple{\"dog\",6,'u'}, Tuple{\"hello\",3,'c'}, Tuple{\"cat\",1,'u'}, Tuple{\"no\",3,'a'}, Tuple{\"orange\",1,'u'}, Tuple{\"red\",3,'u'}\n    };\n    sortByFixedComponent&lt;Z&lt;2,0,1&gt;, P&lt;std::greater&lt;char&gt;, Length, std::less&lt;int&gt;&gt;&gt; (t.begin(), t.end());\n    for (const Tuple&amp; x : t)\n        print(x);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>(cat, 1, u)\n(red, 3, u)\n(dog, 6, u)\n(orange, 1, u)\n(hi, 3, q)\n(hello, 3, c)\n(no, 3, a)\n</code></pre>\n\n<p>First the 3rd component is arranged in reverse alphabetical order.  Then among these 4 tuples ending in u, the string component is arranged from shortest to longest.  There are still three ties, so among these the int component is arranged from least to greatest.  I hope those reading before understand my question now.</p>\n\n<p>I will study Yakk's solution now to see if his method is really different or not.</p>\n\n<p>Update:  I just want to add that I found a more general way to write the above (tested to give the exact same output), using:</p>\n\n<pre><code>// General predicate builder so that other types than TuplePredicateBuilder can inherit from this as well.\ntemplate &lt;typename, typename...&gt; struct PredicateBuilder;\n\ntemplate &lt;typename T, typename BinaryPredicate&gt; \nstruct PredicateBuilder&lt;T, BinaryPredicate&gt; {\n    bool operator()(const T&amp; a, const T&amp; b) const {return BinaryPredicate()(a,b);}\n};\n\ntemplate &lt;typename T, typename First, typename... Rest&gt;\nstruct PredicateBuilder&lt;T, First, Rest...&gt; : PredicateBuilder&lt;T, Rest...&gt; {\n    bool operator()(const T&amp; a, const T&amp; b) const {\n        if (First()(a,b))\n            return true;\n        else if (First()(b,a)) \n            return false;\n        else\n            return PredicateBuilder&lt;T, Rest...&gt;::operator()(a,b);\n    }\n};\n\ntemplate &lt;int N, typename BinaryPredicate, typename Iterator&gt;\nstruct BinaryPredicateNthComponent {\n    bool operator()(const typename Iterator::value_type&amp; x, const typename Iterator::value_type&amp; y) {\n        return BinaryPredicate()(std::get&lt;N&gt;(x), std::get&lt;N&gt;(y));\n    }\n};\n\ntemplate &lt;typename, typename, typename&gt; struct TuplePredicateBuilder;\n\ntemplate &lt;template &lt;int...&gt; class Z, int... Is, template &lt;typename...&gt; class P, typename... BinaryPredicates, typename Iterator&gt;\nstruct TuplePredicateBuilder&lt;Z&lt;Is...&gt;, P&lt;BinaryPredicates...&gt;, Iterator&gt; : \n    PredicateBuilder&lt;typename Iterator::value_type, BinaryPredicateNthComponent&lt;Is, BinaryPredicates, Iterator&gt;...&gt; {};\n</code></pre>\n"}], "owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 437, "favorite_count": 3, "answer_count": 2, "score": -2, "last_activity_date": 1442635761, "creation_date": 1426709576, "last_edit_date": 1426714003, "question_id": 29131785, "link": "https://stackoverflow.com/questions/29131785/sorting-container-of-tuples-by-fixed-components", "title": "Sorting container of tuples by fixed components", "body": "<p>Given a container of pairs or tuples, we want to sort it by specifying a binary predicate and a fixed component, so that the sorting focusses only on that component of each tuple.  This working code illustrates this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;tuple&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n#include &lt;functional&gt;\n\ntemplate &lt;int N, typename BinaryPredicate, typename ForwardIterator&gt;\nvoid sortByFixedComponent (ForwardIterator first, ForwardIterator last) {\n    std::sort (first, last, [](const typename ForwardIterator::value_type&amp; x, const typename ForwardIterator::value_type&amp; y)-&gt;bool {\n        return BinaryPredicate()(std::get&lt;N&gt;(x), std::get&lt;N&gt;(y));\n    });\n}\n\n// ------------------- Testing --------------------\nstruct Length {\n    bool operator()(const std::string&amp; a, const std::string&amp; b) const {return a.length() &lt; b.length();}\n};\n\nint main() {\n    std::vector&lt;std::pair&lt;int,int&gt;&gt; v = {\n        {3,5}, {6,8}, {3,7}, {1,9}, {3,1}, {1,2}, {3,5}\n    };\n    sortByFixedComponent&lt;0, std::less&lt;int&gt;&gt; (v.begin(), v.end());  // Sorts v according to the first components.\n    for (const std::pair&lt;int,int&gt;&amp; x : v) std::cout &lt;&lt; \"(\" &lt;&lt; x.first &lt;&lt; \", \" &lt;&lt; x.second &lt;&lt; \") \";  std::cout &lt;&lt; '\\n';\n    sortByFixedComponent&lt;1, std::greater&lt;int&gt;&gt; (v.begin(), v.end());  // Sorts v according to the second components (in reverse order).\n    for (const std::pair&lt;int,int&gt;&amp; x : v) std::cout &lt;&lt; \"(\" &lt;&lt; x.first &lt;&lt; \", \" &lt;&lt; x.second &lt;&lt; \") \";  std::cout &lt;&lt; '\\n';\n\n    using Tuple = std::tuple&lt;int, std::string, char&gt;;\n    std::vector&lt;Tuple&gt; t = {\n        Tuple{3,\"hi\",'q'}, Tuple{6,\"dog\",'u'}, Tuple{3,\"hello\",'c'}, Tuple{1,\"cat\",'r'}, Tuple{3,\"no\",'a'}, Tuple{1,\"orange\",'z'}, Tuple{3,\"door\",'x'}\n    };\n    sortByFixedComponent&lt;1, Length&gt; (t.begin(), t.end());  // Sorts t according to the second components in order of string lengths.\n}\n</code></pre>\n\n<p>The challenge now are the ties (tuples that are tied in that specified component).  So let us put into <code>sortByFixedComponent</code> the packs <code>Z&lt;Is...&gt;</code> and <code>P&lt;BinaryPredicates...&gt;</code> that will determine the sorting among the ties.  In the above example, there are ties, so go to the next int in <code>Is...</code> and the next binary predicate in <code>BinaryPredicates...</code> and sort among those ties in this new fixed component and new binary predicate.  If there are ties still after this, then keep going through <code>Is...</code> and <code>BinaryPredicates...</code>.  This should ultimately lead to a unique ordering.</p>\n\n<p>Of course, this recursion is where I'm stuck.  This is what I have so far, which compiles only because I didn't fill in the recursion step yet:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;tuple&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n#include &lt;functional&gt;\n\ntemplate &lt;typename, typename, typename&gt; struct SortByFixedComponent;\n\ntemplate &lt;template &lt;int...&gt; class Z, int N, template &lt;typename...&gt; class P, typename BinaryPredicate, typename ForwardIterator&gt;\nstruct SortByFixedComponent&lt;Z&lt;N&gt;, P&lt;BinaryPredicate&gt;, ForwardIterator&gt; {\n    void operator()(ForwardIterator first, ForwardIterator last) {\n        std::sort (first, last, [](const typename ForwardIterator::value_type&amp; x, const typename ForwardIterator::value_type&amp; y)-&gt;bool {\n            return BinaryPredicate()(std::get&lt;N&gt;(x), std::get&lt;N&gt;(y));\n        });\n    }\n};\n\ntemplate &lt;template &lt;int...&gt; class Z, int FirstInt, int... RestInt, template &lt;typename...&gt; class P, typename FirstBinaryPredicate, typename... RestBinaryPredicate, typename ForwardIterator&gt;\nstruct SortByFixedComponent&lt;Z&lt;FirstInt, RestInt...&gt;, P&lt;FirstBinaryPredicate, RestBinaryPredicate...&gt;, ForwardIterator&gt; :\n        SortByFixedComponent&lt;Z&lt;RestInt...&gt;, P&lt;RestBinaryPredicate...&gt;, ForwardIterator&gt; {\n    void operator()(ForwardIterator first, ForwardIterator last) {\n        std::sort (first, last, [](const typename ForwardIterator::value_type&amp; x, const typename ForwardIterator::value_type&amp; y)-&gt;bool {\n            return FirstBinaryPredicate()(std::get&lt;FirstInt&gt;(x), std::get&lt;FirstInt&gt;(y));\n        });\n// How to sort among the ties using SortByFixedComponent&lt;Z&lt;RestInt...&gt;, P&lt;RestBinaryPredicate...&gt;, ForwardIterator&gt;::operator()(first, last); ??? \n    }\n};\n\ntemplate &lt;typename Ints, typename BinaryPredicates, typename ForwardIterator&gt;\nvoid sortByFixedComponent (ForwardIterator first, ForwardIterator last) {\n    SortByFixedComponent&lt;Ints, BinaryPredicates, ForwardIterator&gt;()(first, last);\n}\n\nstruct Length {\n    bool operator()(const std::string&amp; a, const std::string&amp; b) const {return a.length() &lt; b.length();}\n};\n\ntemplate &lt;typename...&gt; struct P {};\ntemplate &lt;int...&gt; struct Z {};\n\nint main() {\n    std::vector&lt;std::pair&lt;int,int&gt;&gt; v = {\n        {3,5}, {6,8}, {3,7}, {1,9}, {3,1}, {1,2}, {3,5}\n    };\n    sortByFixedComponent&lt; Z&lt;0&gt;, P&lt;std::less&lt;int&gt;&gt; &gt; (v.begin(), v.end());\n    for (const std::pair&lt;int,int&gt;&amp; x : v) std::cout &lt;&lt; \"(\" &lt;&lt; x.first &lt;&lt; \", \" &lt;&lt; x.second &lt;&lt; \") \";  std::cout &lt;&lt; '\\n';\n    sortByFixedComponent&lt; Z&lt;1&gt;, P&lt;std::greater&lt;int&gt;&gt; &gt; (v.begin(), v.end());\n    for (const std::pair&lt;int,int&gt;&amp; x : v) std::cout &lt;&lt; \"(\" &lt;&lt; x.first &lt;&lt; \", \" &lt;&lt; x.second &lt;&lt; \") \";  std::cout &lt;&lt; '\\n';\n\n    using Tuple = std::tuple&lt;int, std::string, char&gt;;\n    std::vector&lt;Tuple&gt; t = {\n        Tuple{3,\"hi\",'q'}, Tuple{6,\"dog\",'u'}, Tuple{3,\"hello\",'c'}, Tuple{1,\"cat\",'r'}, Tuple{3,\"no\",'a'}, Tuple{1,\"orange\",'z'}, Tuple{3,\"door\",'x'}\n    };\n    sortByFixedComponent&lt; Z&lt;1&gt;, P&lt;Length&gt; &gt; (t.begin(), t.end());\n//  sortByFixedComponent&lt;Z&lt;2,0,1&gt;, P&lt;std::greater&lt;char&gt;, Length, std::less&lt;int&gt;&gt;&gt; (t.begin(), t.end());  // Want this line to work.\n}\n</code></pre>\n\n<p>Ultimately, in main() I want the line </p>\n\n<pre><code>sortByFixedComponent&lt;Z&lt;2,0,1&gt;, P&lt;std::greater&lt;char&gt;, Length, std::less&lt;int&gt;&gt;&gt; (t.begin(), t.end());\n</code></pre>\n\n<p>to work.  It is to sort the container </p>\n\n<pre><code>    std::vector&lt;Tuple&gt; t = {\n        Tuple{3,\"hi\",'q'}, Tuple{6,\"dog\",'u'}, Tuple{3,\"hello\",'c'}, Tuple{1,\"cat\",'r'}, Tuple{3,\"no\",'a'}, Tuple{1,\"orange\",'z'}, Tuple{3,\"door\",'x'}\n    };\n</code></pre>\n\n<p>so that the char components are first looked at (sort the tuples so that the these are in alphabetical order), then among the ties look at the int component (sort the ties so that these are in reverse order), then if there are still any ties look at the string component (sort the ties so that the strings are from shortest to longest).\n  Any help would be appreciated.  This question arose when I solved the first example, but then wondered about the ties.</p>\n\n<p>To see a concrete example.  In my very first example, the output is (1, 9) (1, 2) (3, 5) (3, 7) (3, 1) (3, 5) (6, 8) because the first components are sorted from least to greatest. But 4 pairs begin with 3. So let's sort these 4 according to the second component by some other comparator. The goal is a generalization of this.</p>\n\n<p><strong>Update:</strong>\n   I think the key to solving this is not recursion, so basically my attempt above can be scrapped.  I think it is composition of the binary predicates that is needed.  So my new starting point is to use this helper struct:</p>\n\n<pre><code>template &lt;typename, typename...&gt; struct PredicateBuilder;\n\ntemplate &lt;typename T, typename BinaryPredicate&gt; \nstruct PredicateBuilder&lt;T, BinaryPredicate&gt; {\n    const BinaryPredicate binaryPredicate;\n    PredicateBuilder (BinaryPredicate func): binaryPredicate (func) {}\n    bool operator() (const T&amp; a, const T&amp; b) const {return binaryPredicate (a,b);}\n};\n\ntemplate &lt;typename T, typename First, typename... Rest&gt;\nstruct PredicateBuilder&lt;T, First, Rest...&gt; : PredicateBuilder&lt;T, Rest...&gt; {\n    const First binaryPredicate;\n    PredicateBuilder (First first, Rest... rest): PredicateBuilder&lt;T, Rest...&gt; (rest...), binaryPredicate (first) {}\n    bool operator () (const T&amp; a, const T&amp; b) const {\n        if (binaryPredicate (a,b))\n            return true;\n        else if (binaryPredicate (b,a)) \n            return false;\n        else\n            return PredicateBuilder&lt;T, Rest...&gt;::operator()(a,b);\n    }\n};\n</code></pre>\n"}, {"tags": ["c++", "arrays", "c++11"], "comments": [{"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 2, "creation_date": 1426708314, "post_id": 29131416, "comment_id": 46488509, "body": "<i>&quot;Is this total correct to initialize struct by single curly brackets...&quot;</i> Is a much more general and more difficult question than <i>&quot;Is it correct to initializing std::array by one pair of curly brackets if zeroed array needed?</i>&quot;"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 3, "creation_date": 1426708316, "post_id": 29131416, "comment_id": 46488510, "body": "Yes, that&#39;s fine (for <code>std::array</code>). You shouldn&#39;t have to use double curly brackets either; <code>std::array&lt;int, 10&gt; arr = {1, 2, 3};</code> is required to work."}, {"owner": {"reputation": 827, "user_id": 2534793, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/0852a47304b79991d99202c05eabe454?s=128&d=identicon&r=PG", "display_name": "senfen", "link": "https://stackoverflow.com/users/2534793/senfen"}, "edited": false, "score": 0, "creation_date": 1426708789, "post_id": 29131416, "comment_id": 46488812, "body": "Thanks for the answers, everything is now clear."}, {"owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "edited": false, "score": 1, "creation_date": 1426709286, "post_id": 29131416, "comment_id": 46489107, "body": "This explains a lot...  <a href=\"http://stackoverflow.com/questions/11734861/when-can-outer-braces-be-omitted-in-an-initializer-list\" title=\"when can outer braces be omitted in an initializer list\">stackoverflow.com/questions/11734861/&hellip;</a>  I believe this changed in C++14."}], "answers": [{"comments": [{"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 1, "creation_date": 1426709931, "post_id": 29131794, "comment_id": 46489492, "body": "Except that GCC emits a <code>-Wmissing-field-initializers</code> warning about the former."}], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1426709613, "creation_date": 1426709613, "answer_id": 29131794, "question_id": 29131416, "link": "https://stackoverflow.com/questions/29131416/is-it-correct-to-initialize-stdarray-by-one-pair-of-curly-brackets-if-zeroed-a/29131794#29131794", "title": "Is it correct to initialize std::array by one pair of curly brackets if zeroed array needed?", "body": "<p>According to the C++ Standard (8.5.1 Aggregates)</p>\n\n<blockquote>\n  <p>7 If there are fewer initializer-clauses in the list than there are\n  members in the aggregate, then each member not explicitly initialized\n  shall be initialized from its brace-or-equal-initializer or, if there\n  is no brace-or-equalinitializer, from an empty initializer list\n  (8.5.4). </p>\n</blockquote>\n\n<p>and (8.5.4 List-initialization p.#3)</p>\n\n<blockquote>\n  <p>\u2014 Otherwise, if the initializer list has no elements, the object is\n  value-initialized.</p>\n</blockquote>\n\n<p>Thus initializations</p>\n\n<pre><code>std::array&lt;int, 10&gt; array {};\n</code></pre>\n\n<p>and</p>\n\n<pre><code>std::array&lt;int, 10&gt; array { {  } };\n</code></pre>\n\n<p>are equivalent.</p>\n"}], "owner": {"reputation": 827, "user_id": 2534793, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/0852a47304b79991d99202c05eabe454?s=128&d=identicon&r=PG", "display_name": "senfen", "link": "https://stackoverflow.com/users/2534793/senfen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1125, "favorite_count": 0, "accepted_answer_id": 29131794, "answer_count": 1, "score": 4, "last_activity_date": 1426710246, "creation_date": 1426708162, "last_edit_date": 1426710246, "question_id": 29131416, "link": "https://stackoverflow.com/questions/29131416/is-it-correct-to-initialize-stdarray-by-one-pair-of-curly-brackets-if-zeroed-a", "title": "Is it correct to initialize std::array by one pair of curly brackets if zeroed array needed?", "body": "<p>I wonder if this construction:</p>\n\n<pre><code>std::array&lt;int, 10&gt; array { };\n</code></pre>\n\n<p>is equivalent to this:</p>\n\n<pre><code>std::array&lt;int, 10&gt; array { {  } };\n</code></pre>\n\n<p>Well, both of them compile and both of them give the same result:</p>\n\n<pre><code>for (auto e : array) {\n        std::cout &lt;&lt; e &lt;&lt; \", \";\n}\n</code></pre>\n\n<p>Out:</p>\n\n<pre><code>0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n</code></pre>\n\n<p>I know that to initialize std::array by selected values I must use double curly brackets because of aggregate initialization. But I don't know how it behaves with single brackets. So, the question is:</p>\n\n<p>Is this totally correct to initialize struct by single curly brackets in C++11? (this follows that all field of struct will be zeroed)</p>\n\n<p>Edit:\nAs @dyp noted my question in post is more general. Let's assume that my question is about structs with only trivial elements.</p>\n"}, {"tags": ["c++", "windows", "memory", "dll", "inject"], "comments": [{"owner": {"reputation": 8478, "user_id": 591064, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/69f9343827a27ccb762883ab0adf5cff?s=128&d=identicon&r=PG", "display_name": "ixe013", "link": "https://stackoverflow.com/users/591064/ixe013"}, "edited": false, "score": 4, "creation_date": 1426709226, "post_id": 29131384, "comment_id": 46489060, "body": "This has nothing to do with C++, really. DLL injection requires a good knowledge of Windows process and memory architecture. Perhaps another project would be better to start, like writing a notepad clone?"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1426710155, "post_id": 29131384, "comment_id": 46489639, "body": "There&#39;s no obvious reason why that code would crash, you&#39;re probably just calling it incorrectly.  On the other hand, it&#39;s hard to imagine what you would be using it for in the first place."}, {"owner": {"reputation": 81, "user_id": 4686990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4f9a6888bab4d53f70536cec1d8e6c2?s=128&d=identicon&r=PG&f=1", "display_name": "Taha Elkhaoua", "link": "https://stackoverflow.com/users/4686990/taha-elkhaoua"}, "edited": false, "score": 0, "creation_date": 1426711339, "post_id": 29131384, "comment_id": 46490384, "body": "well I&#39;m using it to change A game&#39;s  Opcodes values, In first I tried using the WriteProcessMemory() function but it didn&#39;t work then I saw this dude using memcpy() and it worked for him but he had to inject a DLL file first."}], "answers": [{"owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "is_accepted": true, "score": 0, "last_activity_date": 1426712242, "last_edit_date": 1426712242, "creation_date": 1426711777, "answer_id": 29132373, "question_id": 29131384, "link": "https://stackoverflow.com/questions/29131384/why-some-functions-need-to-be-injected-as-dll-files-to-work/29132373#29132373", "title": "Why some functions need to be injected as DLL files to work", "body": "<p><code>memcpy</code> is a function meant to be used on memory that you own and only that. It will only work in the current process in which it's called.</p>\n\n<p>Each process has its own memory. One process can allocate something at 0x14141 and another can allocate at 0x14141 and it won't clash because the address is local to that process. <code>memcpy</code> works the same way. It copies to the address of the current process and won't affect memory in other processes.</p>\n\n<p>When you attempt to use it on memory owned by another process, it will crash if the memory isn't shared/mapped. It will actually be copying to that address of your current process and not the other process.</p>\n\n<p>On the other hand, <code>WriteProcessMemory</code> will work on memory belonging to other processes provided you have the correct privileges/access-rights.</p>\n\n<p>When the guy injects the module into the other process, the module is essentially part of that process now and so <code>memcpy</code> can be used. It's as if the process loaded the module itself. The module is part of the \"new\" current process.. aka the injected process.</p>\n"}], "owner": {"reputation": 81, "user_id": 4686990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4f9a6888bab4d53f70536cec1d8e6c2?s=128&d=identicon&r=PG&f=1", "display_name": "Taha Elkhaoua", "link": "https://stackoverflow.com/users/4686990/taha-elkhaoua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 29132373, "answer_count": 1, "score": 1, "last_activity_date": 1426712242, "creation_date": 1426708037, "last_edit_date": 1426709244, "question_id": 29131384, "link": "https://stackoverflow.com/questions/29131384/why-some-functions-need-to-be-injected-as-dll-files-to-work", "title": "Why some functions need to be injected as DLL files to work", "body": "<p>So I've been learning C++ lately and there was this part I couldn't I understand, I saw someone use this function in a dll file that he injected :</p>\n\n<pre><code>void WriteToMemory(DWORD AddressToWrite, char* ValueToWrite, int byteNum){\nunsigned long oldProtection;\nVirtualProtect((LPVOID)AddressToWrite, byteNum, PAGE_EXECUTE_READWRITE, &amp;oldProtection);memcpy((LPVOID)AddressToWrite, ValueToWrite, byteNum);\n\nVirtualProtect((LPVOID)AddressToWrite, byteNum, oldProtection, NULL);}\n</code></pre>\n\n<p>But when I try this function whit a normal script my program keeps crushing , so why does it need to be injected first and what's the point of injecting DLL files?</p>\n"}, {"tags": ["c++", "function"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1426708194, "post_id": 29131380, "comment_id": 46488430, "body": "Isn&#39;t this just the same as <a href=\"http://stackoverflow.com/questions/29087792/strange-bug-that-is-solved-with-a-cout\">your last question</a> ?"}, {"owner": {"reputation": 2652, "user_id": 4564515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90733097a656c664a472c437678aad42?s=128&d=identicon&r=PG&f=1", "display_name": "jschultz410", "link": "https://stackoverflow.com/users/4564515/jschultz410"}, "edited": false, "score": 0, "creation_date": 1426708312, "post_id": 29131380, "comment_id": 46488508, "body": "My guess is that it has something to do with this: <code>if(monomial[i].member == 2) monomial[i].value *= -1;</code>, which in turn is the result of <code>str_to_monomial</code>"}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 0, "creation_date": 1426708316, "post_id": 29131380, "comment_id": 46488511, "body": "Regardless of whether arrays overflow or not for your specific case, it is extremely bad practice to use fixed-length arrays without bounds-checking. This can lead to security vulnerabilities of catastrophic proportions. Consider either doing some serious bounds checking, or using something like a <code>std::vector</code> instead."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1426708470, "post_id": 29131380, "comment_id": 46488606, "body": "Do any of the functions you call inside your function have any static data members?  Have you stepped through the code an watch what happens?  Stepping through your code is one of the best ways to find where things are going awry."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1426708575, "post_id": 29131380, "comment_id": 46488675, "body": "<code>double val_sum[100] = {};</code> is sufficient to create an array of 0.0s."}, {"owner": {"reputation": 1, "user_id": 4678287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d423f38ecb23cb06b663f83bbc386928?s=128&d=identicon&r=PG&f=1", "display_name": "Javier C", "link": "https://stackoverflow.com/users/4678287/javier-c"}, "edited": false, "score": 0, "creation_date": 1426709334, "post_id": 29131380, "comment_id": 46489142, "body": "jschultz410, I checked <code>str_to_monomial</code> output and it works as it should and <code>monomial[i].member</code> is right too. NathanOliver, I cannot check the code in that function because when I use <code>cout &lt;&lt; monomial[i].value &lt;&lt; endl</code> the bug magically disappears. Paul R, it is basically the same question with more information and a link to the full code."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1426709639, "post_id": 29131380, "comment_id": 46489307, "body": "Monomial ? How is that type defined? The provided code can&#39;t be the root cause so I guess it is something inside Monomial"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1426710560, "post_id": 29131380, "comment_id": 46489880, "body": "Unless you provide some code that people can compile and run I don&#39;t think you&#39;re going to get any help here."}, {"owner": {"reputation": 1, "user_id": 4678287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d423f38ecb23cb06b663f83bbc386928?s=128&d=identicon&r=PG&f=1", "display_name": "Javier C", "link": "https://stackoverflow.com/users/4678287/javier-c"}, "edited": false, "score": 0, "creation_date": 1426711480, "post_id": 29131380, "comment_id": 46490464, "body": "Jonathan Potter, you are right, here you have the full project: <a href=\"http://www.mediafire.com/download/ukd2nb7izqn2i8v/algebra.rar\" rel=\"nofollow noreferrer\">mediafire.com/download/ukd2nb7izqn2i8v/algebra.rar</a>"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1426711619, "post_id": 29131380, "comment_id": 46490543, "body": "Your definition of &quot;full code&quot; is clearly nowhere near the same as mine. It&#39;s like saying &quot;I&#39;ll give my full address: 28&quot; - unless you have the rest of my address, that&#39;s about as useful as a chocolate teapot - even if you know what town or village I live in, it&#39;s not particularly useful, as there may be more than one street where the number 28 is a possible place to live. [Note for paranoid: No, I don&#39;t live on 28 anything, it&#39;s just an example]."}, {"owner": {"reputation": 1, "user_id": 4678287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d423f38ecb23cb06b663f83bbc386928?s=128&d=identicon&r=PG&f=1", "display_name": "Javier C", "link": "https://stackoverflow.com/users/4678287/javier-c"}, "edited": false, "score": 0, "creation_date": 1426711891, "post_id": 29131380, "comment_id": 46490680, "body": "I&#39;m sorry I didn&#39;t give the full code. I just posted a download link for the full project."}], "owner": {"reputation": 1, "user_id": 4678287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d423f38ecb23cb06b663f83bbc386928?s=128&d=identicon&r=PG&f=1", "display_name": "Javier C", "link": "https://stackoverflow.com/users/4678287/javier-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1426708026, "creation_date": 1426708026, "question_id": 29131380, "link": "https://stackoverflow.com/questions/29131380/function-output-changes-after-one-use", "title": "Function output changes after one use", "body": "<p>I asked this 2 days ago, but I didn`t give enough information to solve the bug, this time I will be more specific and I will provide the full code. Now I've been debugging for a while and I realised something new:</p>\n\n<p>I have this function:</p>\n\n<pre><code>double calc_value(string equation, int degree, char _for)\n{\n string monom[100];\n Monomial monomial[100];\n double val_sum[100];\n\n memset(val_sum,0,sizeof(val_sum));\n\n for(int i = 0; i &lt; count_monom(equation); i++)\n {\n  monom[i] = obt_mon_from(equation,i);\n  monomial[i] = str_to_monomial(equation,i,monom[i],_for);\n\n  if(monomial[i].member == 2)\n  monomial[i].value *= -1;\n\n  val_sum[monomial[i].degree] += monomial[i].value;\n }\n\n return val_sum[degree];\n}\n</code></pre>\n\n<p>And when called like this: <code>calc_value(\"8x^9 - 2x = 3 - 2x^5 + 2x^8 + 1.5x^3\",9,'x')</code> the output must be 8, as it calculates the value of the monomial of 9th degree. It works when I use it one time, but after the first use it starts outputting -8.</p>\n\n<p>This is my main function:</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    string eq = \"8x^9 - 2x = 3 - 2x^5 + 2x^8 + 1.5x^3\";\n\n    cout &lt;&lt; calc_value(eq,9,'x') &lt;&lt; \" \";\n    cout &lt;&lt; calc_value(eq,9,'x') &lt;&lt; \" \";\n    cout &lt;&lt; calc_value(eq,9,'x');\n\n    system(\"PAUSE\");\n}\n</code></pre>\n\n<p>The output, as I said, is \"8 -8 -8\" when it should be \"8 8 8\".</p>\n\n<p>Here is the full \"algebra\" header (the other 2 are not important): pastebin.com/wcy94zXN</p>\n\n<p>By the way: I checked every array in the important functions and they dont overflow and the program works fine in debug mode (Code::Blocks, GCC compiler).</p>\n"}, {"tags": ["c++", "overloading", "pass-by-reference", "pass-by-value"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 4267434, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-YYlTmZqTyVo/AAAAAAAAAAI/AAAAAAAAADo/Hf5wM6FycIk/photo.jpg?sz=128", "display_name": "Jin Nguyen", "link": "https://stackoverflow.com/users/4267434/jin-nguyen"}, "edited": false, "score": 0, "creation_date": 1426709058, "post_id": 29131482, "comment_id": 46488959, "body": "This actually solved my problem. Thank you  very much. Do you have any ideas how to do pass by value and pass by reference for this project?"}, {"owner": {"reputation": 45, "user_id": 4267434, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-YYlTmZqTyVo/AAAAAAAAAAI/AAAAAAAAADo/Hf5wM6FycIk/photo.jpg?sz=128", "display_name": "Jin Nguyen", "link": "https://stackoverflow.com/users/4267434/jin-nguyen"}, "edited": false, "score": 0, "creation_date": 1426709652, "post_id": 29131482, "comment_id": 46489322, "body": "I&#39;m really understand much what you said about pass by reference. Sorry because I&#39;m a beginner. What should I do to change one of the function to pass by reference? <code>double income(double&amp; year)</code>"}, {"owner": {"reputation": 45, "user_id": 4267434, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-YYlTmZqTyVo/AAAAAAAAAAI/AAAAAAAAADo/Hf5wM6FycIk/photo.jpg?sz=128", "display_name": "Jin Nguyen", "link": "https://stackoverflow.com/users/4267434/jin-nguyen"}, "edited": false, "score": 0, "creation_date": 1426710102, "post_id": 29131482, "comment_id": 46489595, "body": "<code>double income(const double &amp;year)</code>  Is that all I have to change from my code? Do I have to change anything inside the function? Because in the book examples, it seems a lot harder than this!"}, {"owner": {"reputation": 4040, "user_id": 1923699, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/iTCs2.jpg?s=128&g=1", "display_name": "Tyler Jandreau", "link": "https://stackoverflow.com/users/1923699/tyler-jandreau"}, "reply_to_user": {"reputation": 45, "user_id": 4267434, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-YYlTmZqTyVo/AAAAAAAAAAI/AAAAAAAAADo/Hf5wM6FycIk/photo.jpg?sz=128", "display_name": "Jin Nguyen", "link": "https://stackoverflow.com/users/4267434/jin-nguyen"}, "edited": false, "score": 0, "creation_date": 1426710227, "post_id": 29131482, "comment_id": 46489674, "body": "I looked at your code and it looks like that&#39;s all you have to change. Nothing within the function needs to change. Compile it with my function signature and ensure that you get the same result."}, {"owner": {"reputation": 45, "user_id": 4267434, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-YYlTmZqTyVo/AAAAAAAAAAI/AAAAAAAAADo/Hf5wM6FycIk/photo.jpg?sz=128", "display_name": "Jin Nguyen", "link": "https://stackoverflow.com/users/4267434/jin-nguyen"}, "edited": false, "score": 0, "creation_date": 1426710402, "post_id": 29131482, "comment_id": 46489774, "body": "Okay, Thank you very much! You are really nice that explained carefully."}, {"owner": {"reputation": 4040, "user_id": 1923699, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/iTCs2.jpg?s=128&g=1", "display_name": "Tyler Jandreau", "link": "https://stackoverflow.com/users/1923699/tyler-jandreau"}, "reply_to_user": {"reputation": 45, "user_id": 4267434, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-YYlTmZqTyVo/AAAAAAAAAAI/AAAAAAAAADo/Hf5wM6FycIk/photo.jpg?sz=128", "display_name": "Jin Nguyen", "link": "https://stackoverflow.com/users/4267434/jin-nguyen"}, "edited": false, "score": 0, "creation_date": 1426710519, "post_id": 29131482, "comment_id": 46489855, "body": "No worries mate. Just return the favor in the future."}], "owner": {"reputation": 4040, "user_id": 1923699, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/iTCs2.jpg?s=128&g=1", "display_name": "Tyler Jandreau", "link": "https://stackoverflow.com/users/1923699/tyler-jandreau"}, "is_accepted": true, "score": 0, "last_activity_date": 1426709866, "last_edit_date": 1426709866, "creation_date": 1426708475, "answer_id": 29131482, "question_id": 29131379, "link": "https://stackoverflow.com/questions/29131379/overloading-error-in-c-pass-by-value-and-pass-by-reference/29131482#29131482", "title": "Overloading error in C++ [Pass by Value and Pass by Reference]", "body": "<p>Since the <code>income</code> functions are not defined within the <code>Grosspay</code> class, they should be defined before they're called. Try moving the definitions of <code>income</code> before the <code>determineGrosspay</code> method. </p>\n\n<p>An alternative solution is to use a <a href=\"http://en.wikipedia.org/wiki/Function_prototype\" rel=\"nofollow\">function prototype</a> by moving the prototype \"before\" the <code>determineGrosspay</code> function and it's implementation after.</p>\n\n<hr>\n\n<p>Since you asked about pass by reference and pass by value in the comments, I'll include it in this answer. What you've written for the <code>income</code> functions is pass-by-value. This means a copy of the variable(s) is/are passed to the function. </p>\n\n<p>Passing by reference means you pass a reference of the variable to the function rather than a copy of it. Pass by reference assumes the following function signature for your application: <code>income(const double &amp;year)</code> if you do not want to modify the year variable within the function, and <code>income(double &amp;year)</code> if you want to modify the value of <code>year</code>.</p>\n\n<hr>\n\n<p>Use <code>double income(const double &amp;year)</code> for your application.</p>\n\n<p>Please study what this means because it's an important part of the language.</p>\n"}], "owner": {"reputation": 45, "user_id": 4267434, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-YYlTmZqTyVo/AAAAAAAAAAI/AAAAAAAAADo/Hf5wM6FycIk/photo.jpg?sz=128", "display_name": "Jin Nguyen", "link": "https://stackoverflow.com/users/4267434/jin-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 29131482, "answer_count": 1, "score": 0, "last_activity_date": 1426709866, "creation_date": 1426708020, "question_id": 29131379, "link": "https://stackoverflow.com/questions/29131379/overloading-error-in-c-pass-by-value-and-pass-by-reference", "title": "Overloading error in C++ [Pass by Value and Pass by Reference]", "body": "<p>I'm working on a project that calculate income for both type of employees (salaried and hourly) using overloading.This project has 3 files, here is the main source:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Grosspay.h\"\nusing namespace std;\n\nvoid Grosspay::determineGrosspay()\n{\n    cout &lt;&lt; \"Enter 1 - Calculate payroll for hourly employee\" &lt;&lt; endl;\n    cout &lt;&lt; \"Enter 2 - Calculate payroll for salary employee\" &lt;&lt; endl;\n    cout &lt;&lt; \"Enter 3 - Exit\" &lt;&lt; endl;\n\n    cout &lt;&lt; \"Federal Tax is 10% of Grosspay\" &lt;&lt; endl;\n    cout &lt;&lt; \"State Tax is 5% of Grosspay\" &lt;&lt; endl;\n    while (choice != 3)\n    {\n        cout &lt;&lt; \"\\nEnter your choice: \" &lt;&lt; endl;\n        cin &gt;&gt; choice;\n        switch (choice)\n        {\n        case 1:\n            cout &lt;&lt; \"Enter employee ID: \" &lt;&lt; endl;\n            cin &gt;&gt; ID;\n            cout &lt;&lt; \"Enter hours: \" &lt;&lt; endl;\n            cin &gt;&gt; hours;\n            cout &lt;&lt; \"Enter payrate: \" &lt;&lt; endl;\n            cin &gt;&gt; payrate;\n\n            cout &lt;&lt; \"Employee ID: %d\" &lt;&lt; ID &lt;&lt; endl;\n            cout &lt;&lt; \"The net pay for hourly employee: %.2f\\n\" &lt;&lt; income(hours, payrate) &lt;&lt; endl;\n            break;\n        case 2:\n            cout &lt;&lt; \"Enter employee ID: \" &lt;&lt; endl;\n            cin &gt;&gt; ID;\n            cout &lt;&lt; \"Enter salary: \" &lt;&lt; endl;\n            cin &gt;&gt; year;\n\n            cout &lt;&lt; \"The net pay for salaried employee: %.2f\\n\" &lt;&lt; income(year) &lt;&lt; endl;\n            break;\n        case 3:\n            cout &lt;&lt; \"Exited program\" &lt;&lt; endl;\n            break;\n        default:\n            cout &lt;&lt; \"Please try again!\" &lt;&lt; endl;\n            break;\n        }\n    }\n}\ndouble income(double hours, double payrate)\n{\n    double grosspay = 0;\n    double federaltax = .10;\n    double statetax = .05;\n    double totaltax;\n    double netpay;\n    if (hours &lt;= 40)\n    {\n        grosspay = payrate * hours;\n    }if (hours &gt; 40 &amp;&amp; hours &lt;= 50)\n    {\n        grosspay = (payrate * 40) + ((hours - 40) * payrate * 1.5);\n    }\n    if (hours &gt; 50)\n    {\n        grosspay = (payrate * 40) + (10 * payrate * 1.5) + ((hours - 50) * payrate * 2);\n    }\n    cout &lt;&lt; \"Grosspay weekly is %.2f\\n\" &lt;&lt; grosspay &lt;&lt; endl;\n\n    federaltax = grosspay * .10;\n    cout &lt;&lt; \"Federal Tax is: %.2f\\n\" &lt;&lt; federaltax &lt;&lt; endl;\n\n    statetax = grosspay * .05;\n    cout &lt;&lt; \"State Tax is: %.2f\\n\" &lt;&lt; statetax &lt;&lt; endl;\n\n    totaltax = federaltax + statetax;\n    cout &lt;&lt; \"Total tax is: %.2f\\n\" &lt;&lt; totaltax &lt;&lt; endl;\n\n    netpay = grosspay - totaltax;\n    return (netpay);\n\n}\ndouble income(double year)\n{\n    double grosspay;\n    double federaltax = .10;\n    double statetax = .05;\n    double totaltax;\n    double netpay;\n\n    grosspay = year / 52;\n    cout &lt;&lt; \"Grosspay weekly is %.2f\\n\" &lt;&lt; grosspay &lt;&lt; endl;\n\n    federaltax = grosspay * .10;\n    cout &lt;&lt; \"Federal Tax is: %.2f\\n\" &lt;&lt; federaltax &lt;&lt; endl;\n\n    statetax = grosspay * .05;\n    cout &lt;&lt; \"State Tax is: %.2f\\n\" &lt;&lt; statetax &lt;&lt; endl;\n\n    totaltax = federaltax + statetax;\n    cout &lt;&lt; \"Total Tax is: %.2f\\n\" &lt;&lt; totaltax &lt;&lt; endl;\n\n    netpay = grosspay - totaltax;\n    return (netpay);\n}\n</code></pre>\n\n<p>I do not know why the program couldn't find the <strong>income</strong>\nfrom </p>\n\n<pre><code>cout &lt;&lt; \"The net pay for hourly employee: %.2f\\n\" &lt;&lt; income(hours, payrate) &lt;&lt; endl;\ncout &lt;&lt; \"The net pay for salaried employee: %.2f\\n\" &lt;&lt; income(year) &lt;&lt; endl;\n</code></pre>\n\n<p>Also, I need to use at least one of the functions in program to demonstrate pass-by-value; and at least, one of the functions to demonstrate pass-by-reference with reference arguments. I have no ideas how to put it in the source. Any one please help?</p>\n"}, {"tags": ["c++", "c", "windows", "visual-studio", "winapi"], "comments": [{"owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 0, "creation_date": 1426708519, "post_id": 29131356, "comment_id": 46488635, "body": "Please post the code you&#39;re using that calls <code>CreateWindow</code> / <code>CreateWindowEx</code>."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1426708568, "post_id": 29131356, "comment_id": 46488670, "body": "Is this a pure WinAPI program, or are you using a framework such as MFC?"}, {"owner": {"reputation": 179, "user_id": 3200730, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/69283606df942d4fb20ba40758bca6e5?s=128&d=identicon&r=PG&f=1", "display_name": "Kilo King", "link": "https://stackoverflow.com/users/3200730/kilo-king"}, "edited": false, "score": 0, "creation_date": 1426708985, "post_id": 29131356, "comment_id": 46488920, "body": "No framework MFC or Qt or anything. It&#39;s just pure WinAPI"}, {"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "edited": false, "score": 0, "creation_date": 1560685671, "post_id": 29131356, "comment_id": 99810495, "body": "As a note you can use <code>L&quot;Random&quot;</code> instead of calling <code>TEXT()</code>.  That function converts from <code>char</code> to wide characters, adding the L prefix to a constant does the same also."}], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 3200730, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/69283606df942d4fb20ba40758bca6e5?s=128&d=identicon&r=PG&f=1", "display_name": "Kilo King", "link": "https://stackoverflow.com/users/3200730/kilo-king"}, "edited": false, "score": 0, "creation_date": 1426718781, "post_id": 29131682, "comment_id": 46493776, "body": "Thank you very much, that was exactly what I was trying to accomplish."}], "owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "is_accepted": true, "score": 7, "last_activity_date": 1426709180, "creation_date": 1426709180, "answer_id": 29131682, "question_id": 29131356, "link": "https://stackoverflow.com/questions/29131356/how-to-change-the-title-bar-icon-using-winapi/29131682#29131682", "title": "How to change the title bar icon using winapi", "body": "<p>If you use <code>RegisterClassEx</code> to register your window class, the <code>WNDCLASSEX</code> structure has a <code>hIconSm</code> field that lets you specify a small icon. If you go this way, don't forget to also initialize the <code>cbSize</code> field.</p>\n\n<p>Alternatively, you can assign a small icon to a window after creation using the <code>WM_SETICON</code> message.</p>\n"}], "owner": {"reputation": 179, "user_id": 3200730, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/69283606df942d4fb20ba40758bca6e5?s=128&d=identicon&r=PG&f=1", "display_name": "Kilo King", "link": "https://stackoverflow.com/users/3200730/kilo-king"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1804, "favorite_count": 1, "accepted_answer_id": 29131682, "answer_count": 1, "score": 2, "last_activity_date": 1426709180, "creation_date": 1426707969, "last_edit_date": 1426708909, "question_id": 29131356, "link": "https://stackoverflow.com/questions/29131356/how-to-change-the-title-bar-icon-using-winapi", "title": "How to change the title bar icon using winapi", "body": "<p>I have made an application using Windows API and have used the resource folder to change the icon to a custom one I made. Now the program is using my icon on the desktop however in the title bar there is the default icon, this one to be exact.<img src=\"https://i.stack.imgur.com/IPXty.png\" alt=\"Default Icon\"></p>\n\n<p>Now how am I suppose to change it to my custom icon?\nI am using MSVC++</p>\n\n<pre><code>WNDCLASS wndclass;\n\nwndclass.style = CS_HREDRAW | CS_VREDRAW;\nwndclass.lpfnWndProc = WndProc;\nwndclass.cbClsExtra = 0;\nwndclass.cbWndExtra = 0;\nwndclass.hInstance = hInstance;\nwndclass.hIcon = LoadIcon(NULL, IDI_APPLICATION);\nwndclass.hCursor = LoadCursor(NULL, IDC_ARROW);\nwndclass.hbrBackground = (HBRUSH)GetStockObject(WHITE_BRUSH);\nwndclass.lpszMenuName = NULL;\nwndclass.lpszClassName = szAppName;\n\n\nhwnd = CreateWindow(szAppName,\n    TEXT(\"Random\"),\n    WS_OVERLAPPED | WS_CAPTION | WS_SYSMENU | WS_MINIMIZEBOX,\n    CW_USEDEFAULT,\n    CW_USEDEFAULT,\n    300,\n    120,\n    NULL,\n    NULL,\n    hInstance,\n    NULL);\n</code></pre>\n"}, {"tags": ["c++", "mfc", "multiple-monitors"], "comments": [{"owner": {"reputation": 189, "user_id": 1793036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3b6682abc63e6be83a7f796b9f4b64c?s=128&d=identicon&r=PG", "display_name": "user1793036", "link": "https://stackoverflow.com/users/1793036/user1793036"}, "edited": false, "score": 0, "creation_date": 1426743932, "post_id": 29131238, "comment_id": 46500187, "body": "Do you have any 3rd-party multi-monitor software running?"}], "answers": [{"comments": [{"owner": {"reputation": 611, "user_id": 1308854, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/236c8c7dc04e187fd607d526dbce3e8b?s=128&d=identicon&r=PG", "display_name": "Woody20", "link": "https://stackoverflow.com/users/1308854/woody20"}, "edited": false, "score": 1, "creation_date": 1426718324, "post_id": 29131544, "comment_id": 46493598, "body": "This is correct, but not the whole story. On a 2-monitor system, you&#39;d expect to see the 8-pixel border on an adjacent monitor, but it&#39;s not visible."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 611, "user_id": 1308854, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/236c8c7dc04e187fd607d526dbce3e8b?s=128&d=identicon&r=PG", "display_name": "Woody20", "link": "https://stackoverflow.com/users/1308854/woody20"}, "edited": false, "score": 0, "creation_date": 1426770626, "post_id": 29131544, "comment_id": 46513522, "body": "@Woody20 obviously those borders simply aren&#39;t painted. Just a guess, when the window is maximized a clipping region is set that covers the monitor and nothing else."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 611, "user_id": 1308854, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/236c8c7dc04e187fd607d526dbce3e8b?s=128&d=identicon&r=PG", "display_name": "Woody20", "link": "https://stackoverflow.com/users/1308854/woody20"}, "edited": false, "score": 1, "creation_date": 1426890474, "post_id": 29131544, "comment_id": 46571199, "body": "@Woody20 little did I know that the ultimate authority covered this subject just 2 weeks ago: <a href=\"http://blogs.msdn.com/b/oldnewthing/archive/2015/03/04/10597470.aspx\" rel=\"nofollow noreferrer\">blogs.msdn.com/b/oldnewthing/archive/2015/03/04/10597470.asp&zwnj;&#8203;x</a>"}], "owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": false, "score": 2, "last_activity_date": 1426890694, "last_edit_date": 1426890694, "creation_date": 1426708676, "answer_id": 29131544, "question_id": 29131238, "link": "https://stackoverflow.com/questions/29131238/mfc-dialog-maximized-is-larger-than-monitor/29131544#29131544", "title": "MFC dialog maximized is larger than monitor", "body": "<p>When you maximize a window, the non-client border area is moved to outside of the monitor. You can see that the client area is the same as the monitor size minus the size of the title bar.</p>\n\n<p>P.S. There's no way to modify this behavior, Windows itself is in charge of the window dimensions when maximized. You might be able to modify the window to turn off the borders on <code>WM_SIZE</code> or something, but then you'd lose the caption bar.</p>\n"}], "owner": {"reputation": 611, "user_id": 1308854, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/236c8c7dc04e187fd607d526dbce3e8b?s=128&d=identicon&r=PG", "display_name": "Woody20", "link": "https://stackoverflow.com/users/1308854/woody20"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 639, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426890694, "creation_date": 1426707503, "last_edit_date": 1592644375, "question_id": 29131238, "link": "https://stackoverflow.com/questions/29131238/mfc-dialog-maximized-is-larger-than-monitor", "title": "MFC dialog maximized is larger than monitor", "body": "<p>In WIndows 7, when I maximize an MFC dialog, using the system menu's small square button, the resulting dialog window is slightly larger than the physical dimensions of the screen. Why is this?</p>\n<p>The <code>GetSystemMetrics</code> calls yield the correct monitor dimensions, and the screen resolution (right-click desktop) also shows the correct dimensions.</p>\n<p>The WM_SIZE message, sent after the window is maximized, shows a size slightly larger than the monitor, consistent with the edge portions of the dialog being cut off. For example, on a 1920 x 1080 monitor, the maximized size from OnSize() is 1936 x 1096. Spy++ shows</p>\n<blockquote>\n<p>Rectangle: (-1928, -8) - (8, 1088), 1936 x 1096 (Maximized)</p>\n<p>Restored Rect: (-1188, 79) - (173, 849) 1015 x 770</p>\n<p>Client Rect: (8, 50) - (1928, 1088) 1920 x 1038</p>\n</blockquote>\n<p>(the dialog was on the left monitor of a 2-monitor system).</p>\n<p>I need to understand the exact definition of &quot;maximizing a window&quot;, because I am rearranging some dialog windows on both single- and multiple-monitor systems in response to user changing window size and/or position.</p>\n<p>Can someone please explain why I am seeing the results I describe, and how I can set up a dialog so the system menu's &quot;maximize&quot; button does not cause the dialog to expand past the physical boundaries of the monitor?</p>\n<p>MFC, 64-bit Windows 7 Pro, Visual Studio 2013, C++</p>\n"}, {"tags": ["c++", "sorting", "mergesort"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 6, "creation_date": 1426707555, "post_id": 29131226, "comment_id": 46488076, "body": "You could look to the <a href=\"http://en.cppreference.com/w/cpp/algorithm/merge\" rel=\"nofollow noreferrer\">standard library</a> for inspiration."}], "answers": [{"owner": {"reputation": 47, "user_id": 3422972, "user_type": "registered", "profile_image": "https://graph.facebook.com/681429158/picture?type=large", "display_name": "lui", "link": "https://stackoverflow.com/users/3422972/lui"}, "is_accepted": false, "score": 0, "last_activity_date": 1426708213, "creation_date": 1426708213, "answer_id": 29131430, "question_id": 29131226, "link": "https://stackoverflow.com/questions/29131226/merge-sort-with-a-comparator-and-a-vector-as-arguments/29131430#29131430", "title": "merge sort with a comparator and a vector as arguments", "body": "<p>You could define a comparisor operator like this</p>\n\n<pre><code>struct MyLessThanFunctor\n{\n    bool operator() (int i,int j)\n    {\n    return (i&lt;j);\n    }\n};\n</code></pre>\n\n<p>And after that, instancing it and using it</p>\n\n<pre><code>MyLessThanFunctor comparator;\nsort(elements, comparator);\n</code></pre>\n"}, {"owner": {"reputation": 1, "user_id": 4687272, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IdVC-2sHBBY/AAAAAAAAAAI/AAAAAAAAAO8/n-mtce7pAd0/photo.jpg?sz=128", "display_name": "tas", "link": "https://stackoverflow.com/users/4687272/tas"}, "is_accepted": false, "score": 0, "last_activity_date": 1426713668, "creation_date": 1426713668, "answer_id": 29132927, "question_id": 29131226, "link": "https://stackoverflow.com/questions/29131226/merge-sort-with-a-comparator-and-a-vector-as-arguments/29132927#29132927", "title": "merge sort with a comparator and a vector as arguments", "body": "<p>!!!Warning std::sort is not expected to be a stable sorting algorithm.\nUse std::stable_sort which is most of the times implemented as merge sort. </p>\n\n<pre><code>struct comparator\n{\n    bool operator () (int i1, int i2) const { return i1 &lt; i2; }\n};\n\nint main()\n{\n    vector&lt;int&gt; v = {0,13,76,46,53,22,4,68,68,94,38,52,83,3,5,53,67 };\n    std::stable_sort (v.begin(), v.end(), comparator() );\n    for (auto e : v) cout &lt;&lt; e &lt;&lt; \" \" ;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4686850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e94c85d4b84fd3e024273e79182c5521?s=128&d=identicon&r=PG&f=1", "display_name": "novice", "link": "https://stackoverflow.com/users/4686850/novice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 659, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1426713668, "creation_date": 1426707475, "question_id": 29131226, "link": "https://stackoverflow.com/questions/29131226/merge-sort-with-a-comparator-and-a-vector-as-arguments", "title": "merge sort with a comparator and a vector as arguments", "body": "<p>The issue I'm having involves writing a function to use merge sort to sort a vector, and I need to use a functor as well. How can a comparator/functor be used as an argument to the merge sort function to sort a vector?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 703, "user_id": 2850608, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100006061862863/picture?type=large", "display_name": "Andreas Vennstr&#246;m", "link": "https://stackoverflow.com/users/2850608/andreas-vennstr%c3%b6m"}, "edited": false, "score": 0, "creation_date": 1426707165, "post_id": 29131079, "comment_id": 46487840, "body": "Please provide a working code sample or at least more information. For example what is <code>cn</code>?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1426707246, "post_id": 29131079, "comment_id": 46487892, "body": "The error looks pretty clear. You can&#39;t make a string from a single list iterator. Advancing <code>c1.begin()</code> should not compile."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1426707618, "post_id": 29131079, "comment_id": 46488109, "body": "std::wstring is useless, avoid it"}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1426708514, "post_id": 29131079, "comment_id": 46488633, "body": "I think you actually want a vector here."}, {"owner": {"reputation": 45, "user_id": 1936220, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/388d4a113da60b3c561b71119c18b30e?s=128&d=identicon&r=PG", "display_name": "Yelow Sea", "link": "https://stackoverflow.com/users/1936220/yelow-sea"}, "edited": false, "score": 0, "creation_date": 1426740137, "post_id": 29131079, "comment_id": 46499191, "body": "Hi I already update my code..thankyou"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1426783312, "post_id": 29131079, "comment_id": 46522436, "body": "You need to convert the <code>std::string</code> to a <code>Platform::String</code> first before setting it to the textblock."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 1936220, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/388d4a113da60b3c561b71119c18b30e?s=128&d=identicon&r=PG", "display_name": "Yelow Sea", "link": "https://stackoverflow.com/users/1936220/yelow-sea"}, "edited": false, "score": 0, "creation_date": 1426740172, "post_id": 29131203, "comment_id": 46499202, "body": "Actually I am try to pass list element to textblock"}], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": true, "score": 3, "last_activity_date": 1426784152, "last_edit_date": 1426784152, "creation_date": 1426707391, "answer_id": 29131203, "question_id": 29131079, "link": "https://stackoverflow.com/questions/29131079/how-to-convert-list-element-to-string/29131203#29131203", "title": "How to convert list element to string?", "body": "<ol>\n<li>You're using the wrong variable: <code>en</code> is the iterator.</li>\n<li>You need to <strong>dereference</strong> the iterator: <code>*en</code></li>\n<li>You accidentally made it a <code>wstring</code>.</li>\n</ol>\n\n<p>Here's what it should be:</p>\n\n<pre><code>std::string s2(*en);\n</code></pre>\n\n<p>Btw the list elements are already strings, you don't need to convert anything.</p>\n\n<p>To convert a <code>std::string</code> to <code>Platform::String</code>, you need to use the the <code>c_str</code> member function:</p>\n\n<pre><code>ENTEXT-&gt;Text = en-&gt;c_str();\n</code></pre>\n"}, {"owner": {"reputation": 41100, "user_id": 1938163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/WV0Fi.png?s=128&g=1", "display_name": "Marco A.", "link": "https://stackoverflow.com/users/1938163/marco-a"}, "is_accepted": false, "score": 1, "last_activity_date": 1426709620, "last_edit_date": 1426709620, "creation_date": 1426708431, "answer_id": 29131474, "question_id": 29131079, "link": "https://stackoverflow.com/questions/29131079/how-to-convert-list-element-to-string/29131474#29131474", "title": "How to convert list element to string?", "body": "<p>Since you wrote </p>\n\n<blockquote>\n  <p>\"I got some problem when I am try to convert list item to string\"</p>\n</blockquote>\n\n<p>and not specifically <code>wstring</code>, I suppose you meant to dereference the right iterator and have <code>s2</code> as a normal <code>std::string</code> copy</p>\n\n<pre><code>int RandNum = 0 + (std::rand() % 10);\n\nauto en = c1.begin();\nstd::advance(en, RandNum); // Make sure to advance the right iterator\n\nstd::string s2(*en);\n</code></pre>\n\n<p><kbd><a href=\"http://coliru.stacked-crooked.com/a/f98c4c3ac96abd86\" rel=\"nofollow\">Example</a></kbd></p>\n\n<p>Notice that the above will create a copy of the list element the iterator points to, which, however, is already a <code>std::string</code> (no conversion is needed). You could just use the dereferenced iterator:</p>\n\n<pre><code>std::cout &lt;&lt; *en;\n</code></pre>\n\n<p>In case you really meant the <code>string-&gt;wstring</code> conversion (for whatever reason not explained in the question), you could write:</p>\n\n<pre><code>int RandNum = 0 + (std::rand() % 10);\n\nauto en = c1.begin();\nstd::advance(en, RandNum); // ditto\n\nstd::wstringstream ws;\nws &lt;&lt; en-&gt;c_str();\nstd::wstring s2 = ws.str();\n</code></pre>\n\n<p><kbd><a href=\"http://coliru.stacked-crooked.com/a/df2c55a720c0f0f8\" rel=\"nofollow\">Example</a></kbd></p>\n\n<p>or, C++11 solution (mind the <code>-stdlib=libc++</code> support):</p>\n\n<pre><code>//Random data from list\n\nint RandNum = 0 + (std::rand() % 10);\n\nauto en = c1.begin();\nadvance(en, RandNum);\n\ntypedef std::codecvt_utf8&lt;wchar_t&gt; convert_type;\nstd::wstring_convert&lt;convert_type, wchar_t&gt; converter;\nstd::wstring converted_str = converter.from_bytes(*en);\n</code></pre>\n\n<p><kbd><a href=\"http://coliru.stacked-crooked.com/a/221b5edcf64d7992\" rel=\"nofollow\">Example</a></kbd></p>\n"}], "owner": {"reputation": 45, "user_id": 1936220, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/388d4a113da60b3c561b71119c18b30e?s=128&d=identicon&r=PG", "display_name": "Yelow Sea", "link": "https://stackoverflow.com/users/1936220/yelow-sea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4313, "favorite_count": 0, "accepted_answer_id": 29131203, "answer_count": 2, "score": 3, "last_activity_date": 1426784152, "creation_date": 1426707025, "last_edit_date": 1426740120, "question_id": 29131079, "link": "https://stackoverflow.com/questions/29131079/how-to-convert-list-element-to-string", "title": "How to convert list element to string?", "body": "<p>I have a try to binding data to textblock in vs 2013.</p>\n\n<p>But I got some problem when I am try to convert list item to string.</p>\n\n<p>this is the error message from vs :</p>\n\n<pre><code>no instance of constructor \"std::basic_string&lt;_Elem, _Traits,\n_Alloc&gt;::basic_string [with _Elem=wchar_t,\n_Traits=std::char_traits&lt;wchar_t&gt;, _Alloc=std::allocator&lt;wchar_t&gt;]\"\nmatches the argument list argument types are:\n(std::_List_iterator&lt;std::_List_val&lt;std::_List_simple_types&lt;std::string&gt;&gt;&gt;)\n</code></pre>\n\n<p>this is my code :</p>\n\n<pre><code>list &lt;string&gt; c1;\n\n//Insert Data\nc1.push_back(\"one\");\nc1.push_back(\"two\");\nc1.push_back(\"three\");\nc1.push_back(\"Four\");\nc1.push_back(\"Five\");\nc1.push_back(\"Six\");\nc1.push_back(\"Seven\");\nc1.push_back(\"Eight\");\nc1.push_back(\"Nine\");\nc1.push_back(\"Ten\");\n\n\n\n\n//Random data from list\n\nint RandNum = 0 + (std::rand() % 10);\n\nauto en = c1.begin();\nadvance(c1.begin(), RandNum);\n\nstd::wstring s1(*en);\n\nstd::string s2(*en);\n\nENTEXT-&gt;Text = s2; //ENTEXT is textblock name\n</code></pre>\n\n<p>I am try to pass list element to textblock, but this code shows </p>\n\n<p>error C2664 : 'void Windows::UI::Xaml::Controls::TextBlock::Text::set(Platform::String ^)' : cannot convert argument 1 from 'std::string' to 'Platform::String ^'   </p>\n"}, {"tags": ["c++", "gcc", "clang", "compiler-flags"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 3, "creation_date": 1426706982, "post_id": 29131042, "comment_id": 46487725, "body": "Clang was probably built from source using GCC. Clang <i>is</i> a compiler, it can&#39;t <i>use GCC as a compiler</i>."}, {"owner": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1426707034, "post_id": 29131042, "comment_id": 46487765, "body": "so will clang support -frandom-seed flag ?"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 1, "creation_date": 1426707090, "post_id": 29131042, "comment_id": 46487802, "body": "if it&#39;s GCC&#39;s feature, then no. Read some docs on clang."}, {"owner": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 1, "creation_date": 1426707157, "post_id": 29131042, "comment_id": 46487835, "body": "the docs dont mention -frandom-seed so I guess its not available"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 2, "creation_date": 1426707175, "post_id": 29131042, "comment_id": 46487848, "body": "@ForceBru, To be fair, Clang supports a heck of a lot of GCC features."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1426707294, "post_id": 29131042, "comment_id": 46487923, "body": "@chris, that&#39;s why on Mac OS we can use <code>gcc prog.c</code> while there&#39;s no GCC installed. Mac OS uses clang."}, {"owner": {"reputation": 18565, "user_id": 10593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3eeb7653c4df9b0f1332b9b0ec201ec?s=128&d=identicon&r=PG", "display_name": "Max Lybbert", "link": "https://stackoverflow.com/users/10593/max-lybbert"}, "edited": false, "score": 0, "creation_date": 1426707418, "post_id": 29131042, "comment_id": 46487996, "body": "I don&#39;t see <code>-frandom-seed</code> listed on <a href=\"http://clang.llvm.org/docs/UsersManual.html#command-line-options\" rel=\"nofollow noreferrer\">clang.llvm.org/docs/UsersManual.html#command-line-options</a> .  But Clang certainly is a compiler, and does not rely on GCC in general.  The email you found could be summarized as &quot;I built Clang twice, using GCC, and noticed that the binaries weren&#39;t identical.  Why not?&quot; -&gt; &quot;GCC uses random symbols in some cases, you need to pass <code>-frandom-seed</code> to GCC if you want identical binaries.&quot;  Unfortunately, it doesn&#39;t answer your actual question."}, {"owner": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "edited": false, "score": 0, "creation_date": 1426707757, "post_id": 29131042, "comment_id": 46488180, "body": "So then my question gets back to if if clang supports binary compatibility of generated executable and libraries for windows as mingw and cygwin gcc are capable of doing?"}, {"owner": {"reputation": 18565, "user_id": 10593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3eeb7653c4df9b0f1332b9b0ec201ec?s=128&d=identicon&r=PG", "display_name": "Max Lybbert", "link": "https://stackoverflow.com/users/10593/max-lybbert"}, "edited": false, "score": 0, "creation_date": 1426744882, "post_id": 29131042, "comment_id": 46500475, "body": "I don&#39;t see <code>-frandom-seed</code> listed on <a href=\"http://clang.llvm.org/docs/UsersManual.html#command-line-options\" rel=\"nofollow noreferrer\">clang.llvm.org/docs/UsersManual.html#command-line-options</a>.  And I can that Clang 3.5.0 doesn&#39;t recognize it.  Then again, your real question is whether you can get identical builds from identical sources if you run the compiler at different times.  The answer for GCC is that you need <code>-frandom-seed</code> for that.  Clang may not need that option (which would be a great reason not to support it).  Unfortunately, I don&#39;t know if it does."}], "answers": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "is_accepted": true, "score": 3, "last_activity_date": 1426707163, "creation_date": 1426707163, "answer_id": 29131125, "question_id": 29131042, "link": "https://stackoverflow.com/questions/29131042/clang-built-on-gcc/29131125#29131125", "title": "Clang built on GCC", "body": "<p>To my mind, this phrase means <em>clang was built from source using GCC as a compiler</em>. Then, clang <em>is a compiler</em>, so it can't use GCC as a compiler. </p>\n\n<p>Compilers are written in programming languages to be able to compile code written in a programming language. This means, <em>a compiler can compile a compiler or even itself</em>. </p>\n\n<p>If you don't know is feature X supported in product Y, please, <em>read the docs</em> on product Y. If this feature isn't mentioned, it's not supported and vice versa. </p>\n"}], "owner": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "accepted_answer_id": 29131125, "answer_count": 1, "score": 0, "last_activity_date": 1426708515, "creation_date": 1426706878, "last_edit_date": 1426708515, "question_id": 29131042, "link": "https://stackoverflow.com/questions/29131042/clang-built-on-gcc", "title": "Clang built on GCC", "body": "<p>I was searching online to see  if clang supported reproducible builds. I read that GCC guaranteed reproducible builds using the <code>-frandom-seed</code> flag. I wanted to know if clang supports that flag and I could not find anything regarding that.I then came  <a href=\"https://www.mail-archive.com/freebsd-toolchain@freebsd.org/msg00024.html\" rel=\"nofollow\">here</a> which had a statement such as:</p>\n\n<blockquote>\n  <p>...two consecutive builds of (GCC-built) Clang</p>\n</blockquote>\n\n<p>My question is what is GCC built clang ? I am currently aware of only 2 compilers (Microsoft , GCC (Coudl be Cygwin/Mingw flavor) ) and the third one was suppose to be clang. My question is what does clang (GCC built) mean ? Built from source ? I would like to think that clang is a totally different compiler from GCC and Windows. Also <a href=\"http://clang.llvm.org/docs/UsersManual.html#windows\" rel=\"nofollow\">this</a> documentation here states</p>\n\n<blockquote>\n  <p>Clang has experimental support for targeting \u201cCygming\u201d (Cygwin /\n  MinGW) platforms.</p>\n</blockquote>\n\n<p>What does that mean ? Does clang mean that it uses Mingw GCC as a compiler ? What does targeting mean here ?</p>\n"}, {"tags": ["c++", "linker"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1426707009, "post_id": 29131017, "comment_id": 46487745, "body": "This code fails before linking. Anyway, googling your error gave me <a href=\"http://stackoverflow.com/questions/17098217/dev-cpp-compiler-build-error\" title=\"dev cpp compiler build error\">stackoverflow.com/questions/17098217/&hellip;</a>"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1426707384, "post_id": 29131017, "comment_id": 46487976, "body": "I suspect that <code>^</code> doesn&#39;t do what you want it to do. There&#39;s also a missing quotation mark."}], "owner": {"reputation": 1, "user_id": 4686914, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WzyYJ.jpg?s=128&g=1", "display_name": "Mokka", "link": "https://stackoverflow.com/users/4686914/mokka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "closed_date": 1426707766, "answer_count": 0, "score": 0, "last_activity_date": 1426771010, "creation_date": 1426706786, "last_edit_date": 1426771010, "question_id": 29131017, "link": "https://stackoverflow.com/questions/29131017/undefined-reference-linker-error", "closed_reason": "Duplicate", "title": "undefined reference: linker error", "body": "<p>I wrote this small programm, just for testing purposes:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\nint formn (int x) \n{\n    int k;\n    k = 2*x^2-4;\n    return k;\n\n}\n\n/*\n * \n */\nint main() {\n    int x1, x0, y1, y0, a, b, res;\n    std::cin &gt;&gt; x0;\n    std::cin &gt;&gt; x1;\n    y0 = formn(x0);\n    y1 = formn(x1);\n    a = y1 - y0;\n    b = x1 - x0;\n    res = a/b;\n    cout &lt;&lt; endl &lt;&lt; \"P0(\" &lt;&lt; x0 &lt;&lt; \"|\" &lt;&lt; y0 &lt;&lt; \") and P1(\" &lt;&lt; x1 &lt;&lt; \"|\" &lt;&lt; y1 &lt;&lt; \") \" &lt;&lt; res &lt;&lt; \".\\n\";\n    return 0;\n}\n</code></pre>\n\n<p>but as soon as I try to compile it, it gives me a linker error:</p>\n\n<blockquote>\n  <p>[Linker error] undefined reference to '__dyn_tls_init_callback'\n  [Linker error] undefined reference to '__cpu_features_init'\n  [Linker error] undefined reference to '_setargv'\n  Id returned 1 exit status\n  C:\\Dev-Cpp\\Makefile.win     [Build Error] [proj001.exe] Error 1</p>\n</blockquote>\n\n<p>Could someone help me please?</p>\n\n<p>I was unable to find a way to solve this problem...</p>\n"}, {"tags": ["c++", "c", "c++builder"], "answers": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 0, "last_activity_date": 1426711972, "last_edit_date": 1426711972, "creation_date": 1426711602, "answer_id": 29132319, "question_id": 29130917, "link": "https://stackoverflow.com/questions/29130917/bcb-swprintf-not-working/29132319#29132319", "title": "BCB swprintf not working", "body": "<p>C++Builder does not support all of the size prefixes that Visual Studio supports (and vice versa).  In this case, C++Builder does not support the <code>w</code> prefix for <code>%s</code>, but Visual Studio does.</p>\n\n<p>Visual Studio:</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/56e442dc.aspx\" rel=\"nofollow\">Format Specification Syntax: printf and wprintf Functions</a></p>\n\n<blockquote>\n  <p>A format specification, which consists of optional and required fields, has the following form:</p>\n\n<pre><code>%[flags] [width] [.precision] [{h | l | ll | w | I | I32 | I64}] type\n</code></pre>\n</blockquote>\n\n<p>C++Builder:</p>\n\n<p><a href=\"http://docwiki.embarcadero.com/RADStudio/XE7/en/Printf_Format_Specifiers\" rel=\"nofollow\">printf Format Specifiers</a></p>\n\n<blockquote>\n  <p>Print format specifiers have the following form: </p>\n\n<pre><code>% [flags] [width] [.prec] [F|N|h|l|L] type_char\n</code></pre>\n</blockquote>\n\n<p>If <code>var</code> is a wide string, you can use <code>%s</code> or <code>%ls</code> in both compilers.</p>\n"}], "owner": {"reputation": 3, "user_id": 4653572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d2c6e230c321fbb7b245b10ca9bdf90?s=128&d=identicon&r=PG&f=1", "display_name": "0--", "link": "https://stackoverflow.com/users/4653572/0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 29132319, "answer_count": 1, "score": 0, "last_activity_date": 1426711972, "creation_date": 1426706514, "question_id": 29130917, "link": "https://stackoverflow.com/questions/29130917/bcb-swprintf-not-working", "title": "BCB swprintf not working", "body": "<p>Anyone else encountered a problem like this?</p>\n\n<pre><code>swprintf_s(v, len, L\"%ws\", var);\nMessageBox(NULL, v, NULL' NULL);\n</code></pre>\n\n<p>Message box prints out \"%ws\" not the contents of var.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "qt"], "answers": [{"comments": [{"owner": {"reputation": 2652, "user_id": 1085291, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a637f0938b1d4466e99b9df92d0ee6a7?s=128&d=identicon&r=PG&f=1", "display_name": "casparjespersen", "link": "https://stackoverflow.com/users/1085291/casparjespersen"}, "edited": false, "score": 0, "creation_date": 1426712300, "post_id": 29131871, "comment_id": 46490896, "body": "Thank you for your answer, @phyatt. However, I was hoping to find a solution only using code, and not the Qt Creator."}], "owner": {"reputation": 16742, "user_id": 999943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e4c3b5820f4f39c2bbe57a8823dd0ad?s=128&d=identicon&r=PG", "display_name": "phyatt", "link": "https://stackoverflow.com/users/999943/phyatt"}, "is_accepted": false, "score": 1, "last_activity_date": 1426709892, "creation_date": 1426709892, "answer_id": 29131871, "question_id": 29130865, "link": "https://stackoverflow.com/questions/29130865/qinputdialog-with-multiple-fields/29131871#29131871", "title": "QInputDialog with multiple fields", "body": "<p>Right click on your project in Qt Creator.</p>\n\n<p>Click <code>Add New...</code>.</p>\n\n<p>Click <code>Qt &gt; Qt Designer Form Class</code>.</p>\n\n<p>In the <code>Qt Designer Form Class</code> wizard click <code>Dialog with Buttons</code>, click Ok, then give it a name, and then click finish.</p>\n\n<p>Now drag and drop as many combo boxes and line edits into view as you want.</p>\n\n<p>Change the object names (in the property editor on the right) to something meaningful.</p>\n\n<p>For the combo boxes, double click on them and add items you want shown in the dropdown.</p>\n\n<p>Now when you want to use one of the values from those elements, you can do something like this:</p>\n\n<pre><code>Dialog d;\nint result = d.exec();// Show it as a modal dialog\nif(result == QDialog::Accepted)\n{\n    // handle values from d\n    qDebug() &lt;&lt; \"The user clicked:\" \n             &lt;&lt; \"ComboBoxA\" &lt;&lt; d.getComboBoxAText() \n             &lt;&lt; \"ComboBoxB\" &lt;&lt; d.getComboBoxBText() \n             &lt;&lt; \"LineEditA\" &lt;&lt; d.getLineEditAText();\n}\n</code></pre>\n\n<p>But make sure you add some public functions into your Dialog class:</p>\n\n<pre><code>QString Dialog::getComboBoxAText()\n{\n    return ui-&gt;comboBoxA()-&gt;currentText();\n}\n</code></pre>\n\n<p>Hope that helps.</p>\n"}, {"comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 3, "creation_date": 1426716789, "post_id": 29132723, "comment_id": 46493051, "body": "That&#39;s nice, but all of the explicit heap allocations are unnecessary. <i>All</i> of the widgets can be local automatic variables. <code>QDialog d; QVBoxLayout vbox(&amp;d); QComboBox comboA, comboB;</code> etc."}], "owner": {"reputation": 16742, "user_id": 999943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e4c3b5820f4f39c2bbe57a8823dd0ad?s=128&d=identicon&r=PG", "display_name": "phyatt", "link": "https://stackoverflow.com/users/999943/phyatt"}, "is_accepted": true, "score": 6, "last_activity_date": 1426712949, "creation_date": 1426712949, "answer_id": 29132723, "question_id": 29130865, "link": "https://stackoverflow.com/questions/29130865/qinputdialog-with-multiple-fields/29132723#29132723", "title": "QInputDialog with multiple fields", "body": "<p>TADA:  How to do it the slightly harder way all in code.  And the main reason it is slightly harder, is because you have to do all the layout tinkering by hand, with compiling between each iteration.</p>\n\n<p>PS: Forms are super helpful.  And once you start doing mobile or embedded development you may want to start using QML and QML forms (Qt Quick Controls).</p>\n\n<p>For describing examples online, forms are difficult and hard to show off, but most large projects I've worked on lately, have some forms or QML in the mix.</p>\n\n<p>Hope that helps.</p>\n\n<pre><code>QDialog * d = new QDialog();\nQVBoxLayout * vbox = new QVBoxLayout();\nQComboBox * comboBoxA = new QComboBox();\ncomboBoxA-&gt;addItems(QStringList() &lt;&lt; \"A\" &lt;&lt; \"B\" &lt;&lt; \"C\");\nQComboBox * comboBoxB = new QComboBox();\ncomboBoxB-&gt;addItems(QStringList() &lt;&lt; \"A\" &lt;&lt; \"B\" &lt;&lt; \"C\");\nQLineEdit * lineEditA = new QLineEdit();\n\nQDialogButtonBox * buttonBox = new QDialogButtonBox(QDialogButtonBox::Ok\n                                                    | QDialogButtonBox::Cancel);\n\nQObject::connect(buttonBox, SIGNAL(accepted()), d, SLOT(accept()));\nQObject::connect(buttonBox, SIGNAL(rejected()), d, SLOT(reject()));\n\nvbox-&gt;addWidget(comboBoxA);\nvbox-&gt;addWidget(comboBoxB);\nvbox-&gt;addWidget(lineEditA);\nvbox-&gt;addWidget(buttonBox);\n\nd-&gt;setLayout(vbox);\n\nint result = d-&gt;exec();\nif(result == QDialog::Accepted)\n{\n    // handle values from d\n    qDebug() &lt;&lt; \"The user clicked:\"\n             &lt;&lt; \"ComboBoxA\" &lt;&lt; comboBoxA-&gt;currentText()\n             &lt;&lt; \"ComboBoxB\" &lt;&lt; comboBoxB-&gt;currentText()\n             &lt;&lt; \"LineEditA\" &lt;&lt; lineEditA-&gt;text();\n}\n</code></pre>\n"}], "owner": {"reputation": 2652, "user_id": 1085291, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a637f0938b1d4466e99b9df92d0ee6a7?s=128&d=identicon&r=PG&f=1", "display_name": "casparjespersen", "link": "https://stackoverflow.com/users/1085291/casparjespersen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4273, "favorite_count": 0, "accepted_answer_id": 29132723, "answer_count": 2, "score": 2, "last_activity_date": 1426712949, "creation_date": 1426706327, "question_id": 29130865, "link": "https://stackoverflow.com/questions/29130865/qinputdialog-with-multiple-fields", "title": "QInputDialog with multiple fields", "body": "<p>Is it possible to easily make a <code>QInputDialog</code> with multiple elements of <code>QComboBox</code>? Alternatively, what is the most feasible way of prompting a popup-window/dialog with the possibility of different fields (etc. 2 x <code>QComboBox</code>+ 1 x <code>QLineEdit</code>)?</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 2926097, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bda018fdebe7caebf1ac1aa042932c2?s=128&d=identicon&r=PG&f=1", "display_name": "xZA", "link": "https://stackoverflow.com/users/2926097/xza"}, "edited": false, "score": 0, "creation_date": 1426710589, "post_id": 29131077, "comment_id": 46489892, "body": "Unfortunately the graph gets submitted as a const reference so I can&#39;t simply change the reference later on. Submitting the graph by value is not possible under the given circumstances."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 133, "user_id": 2926097, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bda018fdebe7caebf1ac1aa042932c2?s=128&d=identicon&r=PG&f=1", "display_name": "xZA", "link": "https://stackoverflow.com/users/2926097/xza"}, "edited": false, "score": 0, "creation_date": 1426710788, "post_id": 29131077, "comment_id": 46490014, "body": "Can you store a <code>const*</code> to the <code>Graph</code> instead of a <code>const&amp;</code>?"}, {"owner": {"reputation": 133, "user_id": 2926097, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bda018fdebe7caebf1ac1aa042932c2?s=128&d=identicon&r=PG&f=1", "display_name": "xZA", "link": "https://stackoverflow.com/users/2926097/xza"}, "edited": false, "score": 0, "creation_date": 1426713153, "post_id": 29131077, "comment_id": 46491357, "body": "I remodelled some of the classes and I think using a const* is the best idea. Thank you for you help :)"}], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 0, "last_activity_date": 1426707016, "creation_date": 1426707016, "answer_id": 29131077, "question_id": 29130809, "link": "https://stackoverflow.com/questions/29130809/submitting-type-of-object-to-method/29131077#29131077", "title": "Submitting Type of Object to Method", "body": "<p>Create a function to reset the <code>Graph</code> associated with the <code>LinkPredictor</code>. Call the function to set the <code>Graph</code> on the passed in <code>LinkPredictor</code> instead of constructing a new <code>LinkPredictor</code> for each sub-graph.</p>\n"}], "owner": {"reputation": 133, "user_id": 2926097, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bda018fdebe7caebf1ac1aa042932c2?s=128&d=identicon&r=PG&f=1", "display_name": "xZA", "link": "https://stackoverflow.com/users/2926097/xza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 29131077, "answer_count": 1, "score": 1, "last_activity_date": 1426707016, "creation_date": 1426706142, "question_id": 29130809, "link": "https://stackoverflow.com/questions/29130809/submitting-type-of-object-to-method", "title": "Submitting Type of Object to Method", "body": "<h2>Intro</h2>\n\n<p>I have a method which performs k-fold-cross-validation and needs for this purpose a graph, a link predictor and an evaluator.\nSo the class could look like this:</p>\n\n<pre><code>KFoldCrossValidator {    \n  public:\n    KFoldCrossValidator(const Graph&amp; G, LinkPredictor* lp, Evaluator e);\n    double crossValidate(unsigned int k);\n}\n</code></pre>\n\n<p>where a typical LinkPredictor looks like the following:</p>\n\n<pre><code>SpecialLinkPredictor : public LinkPredictor {\n  public:\n    SpecialLinkPredictor(const Graph&amp; G, double alpha, double beta);\n    double run(node u, node v);\n}\n</code></pre>\n\n<p>where <code>alpha</code> and <code>beta</code> are parameters for the predictor.</p>\n\n<h2>Problem</h2>\n\n<p>The <code>crossValidate</code>-method splits the given Graph <code>G</code> into <code>k</code> subgraphs and then (among other things) executes the <code>run</code>-method from the LinkPredictor for every edge in all the subgraphs.</p>\n\n<p>The problem is that I have to create a new LinkPredictor-instance for every subgraph as I have to submit the respective subgraph in the constructor of the LinkPredictor. This is not possible if I just submit a pointer to a LinkPredictor-object.</p>\n\n<p>A possible solution to this problem could be the submission of an enum indicating the LinkPredictor that should be used as well as some sort of vector which holds all the arguments (alpha, beta, ...) for the instantiation. I think that's a very bad idea.</p>\n\n<p>What are your thoughts on this?</p>\n"}, {"tags": ["c++", "usb", "winusb"], "comments": [{"owner": {"reputation": 70803, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1426875820, "post_id": 29130703, "comment_id": 46564617, "body": "I am pretty sure USB 3.0 still has control transfers, since it is such a basic part of the protocol and these changes are usually backwards compatible. You should look for the answer elsewhere.  It might be a weird driver bug somewhere in your system."}], "answers": [{"owner": {"reputation": 75, "user_id": 4607176, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ek85t.jpg?s=128&g=1", "display_name": "RunicSheep", "link": "https://stackoverflow.com/users/4607176/runicsheep"}, "is_accepted": true, "score": 0, "last_activity_date": 1427220731, "creation_date": 1427220731, "answer_id": 29239933, "question_id": 29130703, "link": "https://stackoverflow.com/questions/29130703/winusb-controltransfer-on-usb-3-0/29239933#29239933", "title": "WinUsb ControlTransfer on USB 3.0", "body": "<p>So, if anyone else runs into that problem if found the solution.</p>\n\n<p>So the situation was, the device had an 8 byte package from that i only needed the first 2 bytes.</p>\n\n<p>On USB 2.0 i could give control transfer the buffer with length parameter 2. (Buffer with 2 Byte length)</p>\n\n<p>On USB 3.0 the buffer remains the same, but i have to submit the length of the package waiting on the device (in this case 8).</p>\n"}], "owner": {"reputation": 75, "user_id": 4607176, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ek85t.jpg?s=128&g=1", "display_name": "RunicSheep", "link": "https://stackoverflow.com/users/4607176/runicsheep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 0, "accepted_answer_id": 29239933, "answer_count": 1, "score": 0, "last_activity_date": 1427220731, "creation_date": 1426705783, "last_edit_date": 1426707159, "question_id": 29130703, "link": "https://stackoverflow.com/questions/29130703/winusb-controltransfer-on-usb-3-0", "title": "WinUsb ControlTransfer on USB 3.0", "body": "<p>I'm currently learning by doing programming a USB device.\nBut unfortunately i came across some problems that might came through not knowing everything.</p>\n\n<p>The situation is I queried my device via ControlTransfer, since this works like a charm on USB 2.0 it doesn't on USB 3.0. So therefore I'm trying to understand why it fails. Is there any minor change from USB 2.0 to USB 3.0?</p>\n"}, {"tags": ["c++", "ifstream", "istream"], "comments": [{"owner": {"reputation": 8029, "user_id": 3137499, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7acff2bbbdb9c51ea478377a0f6dcb03?s=128&d=identicon&r=PG&f=1", "display_name": "aruisdante", "link": "https://stackoverflow.com/users/3137499/aruisdante"}, "edited": false, "score": 0, "creation_date": 1426705702, "post_id": 29130639, "comment_id": 46487019, "body": "<code>cout</code> and <code>ofstream</code> are both <code>ostream</code>. <code>cin</code> and <code>ifstream</code> are both <code>istream</code>. That&#39;s what you&#39;d want to pass around (think overloading <code>operator&lt;&lt;</code> and <code>operator&gt;&gt;</code>)."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1426705727, "post_id": 29130639, "comment_id": 46487036, "body": "You should use a <code>vector&lt;book&gt;</code>, not an array, just to get that part straight. Further, an <code>ofstream</code> is also an <code>ostream</code> and if you didn&#39;t explicitly specify the &quot;f&quot; in your function signatures, you could pass it any <code>ostream</code> or <code>istream</code>."}], "answers": [{"owner": {"reputation": 1, "user_id": 7207687, "user_type": "registered", "profile_image": "https://graph.facebook.com/1302616013134143/picture?type=large", "display_name": "Joshua Gahan", "link": "https://stackoverflow.com/users/7207687/joshua-gahan"}, "is_accepted": false, "score": 0, "last_activity_date": 1480705066, "last_edit_date": 1480705066, "creation_date": 1480043189, "answer_id": 40797127, "question_id": 29130639, "link": "https://stackoverflow.com/questions/29130639/switching-between-cin-and-ifstream-using-a-function/40797127#40797127", "title": "switching between cin and ifstream using a function", "body": "<p>This may not be directly what your looking for but can be modified.</p>\n\n<pre><code>/// this buffer will be used to switch output\nvoid IO_Switch(streambuf* buffer);\n\nint main(){\n    streambuf *buffer\n    ofstream fout;\n    fout.open(\"filename.txt\");\n\n    // below you call cout.rdbuf() which directs stream to cout\n    IO_Switch(cout.rdbuf());\n    cout &lt;&lt; \"This is coming to the console\";\n    // below you call fout.rdbuf());\n    IO_Switch(fout.rdbuf());\n    cout &lt;&lt; \"I used cout here, but the stream is redirected to fout (\"filename.txt\")\n\n    return 0;\n}\n\nvoid IO_Switch(streambuf* buffer){\n    cout.rdbuf(buffer);\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 3765783, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/12fe22d55e4a7fa47572185feaa29f5a?s=128&d=identicon&r=PG&f=1", "display_name": "Lockie", "link": "https://stackoverflow.com/users/3765783/lockie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 683, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1480705066, "creation_date": 1426705558, "question_id": 29130639, "link": "https://stackoverflow.com/questions/29130639/switching-between-cin-and-ifstream-using-a-function", "title": "switching between cin and ifstream using a function", "body": "<p>I am trying to manipulate an array with functions while switching between standard cin, cout and ifstream,ostream. </p>\n\n<p>Specifically, I have an array of books and I have some basic functions like search title, publisher, price, etc. I also have 2 functions called \"login\" and \"logout\" to open a file and <em>redirect</em> bookList's istream and ostream to that outputfile when login, as well as close it and return back to istream, ostream when logout.</p>\n\n<pre><code>void bookList(istream&amp; in, ostream&amp; out)\n{\n    //ask for command from istream in\n    //command selection loop\n}\n\nint load(ofstream&amp; out, book booklist[], int size)\n{\n    //load list of books from input file\n}\n\nvoid logon(ofstream&amp; out, string filename)\n{\n    out.open(filename.c_str());\n}\n\nvoid logoff(ofstream&amp; out, string filename)\n{\n    out.close();\n}\n// some other functions\n</code></pre>\n\n<p>I also need to print out notification to the user (either onscreen when logged off or on file when logged on) whenever a function is called. </p>\n\n<p>My tried to put ifstream&amp; as a parameter in each functions, but they only print out to text file not on screen (because its just ifstream, not istream), but doing it the other way won't work. </p>\n\n<p>My question is that is there method that can make function logon redirect istream of bookList to ifstream to the outputfile and vice versa for logoff? Rather than a \"is-file-open\" condition.</p>\n"}, {"tags": ["c++", "loops", "nested"], "comments": [{"owner": {"reputation": 2601, "user_id": 127856, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e08a791622c69f2c329bcfde8de40759?s=128&d=identicon&r=PG", "display_name": "ALOToverflow", "link": "https://stackoverflow.com/users/127856/alotoverflow"}, "edited": false, "score": 4, "creation_date": 1426705415, "post_id": 29130579, "comment_id": 46486869, "body": "Have you tried anything?"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1426705843, "post_id": 29130579, "comment_id": 46487094, "body": "std::slice? <a href=\"http://www.cplusplus.com/reference/valarray/slice/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/valarray/slice</a>"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1426706975, "post_id": 29130579, "comment_id": 46487719, "body": "Is there a practical use, or just curious?  6^20 is a pretty big number."}, {"owner": {"reputation": 31, "user_id": 4686823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/223c17305eee0616ede9d5425cd0831d?s=128&d=identicon&r=PG&f=1", "display_name": "cdrjohn", "link": "https://stackoverflow.com/users/4686823/cdrjohn"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1426711189, "post_id": 29130579, "comment_id": 46490292, "body": "@Yakk the practical use is that my numbers stand for indices and i need to list them in such a way in order to work with them. Furthermore I just used the number 20 as an extreme example. Since I want to follow a &gt;= order the order of my numbers would be 177,100 (=binomial(25,6))"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1426776957, "post_id": 29130579, "comment_id": 46518134, "body": "@cdrjohn good point.  Improved my answer so it doesn&#39;t do 6^20 steps to find those 177100 elements.  ;)"}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1426709534, "post_id": 29131205, "comment_id": 46489245, "body": "you also dont take into account his &quot;&gt;=&quot; requirement"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1426709878, "post_id": 29131205, "comment_id": 46489467, "body": "@tobi303 ah, missed that."}, {"owner": {"reputation": 165, "user_id": 2820239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb6dd4ff4bf194e278dd695db423cf7?s=128&d=identicon&r=PG&f=1", "display_name": "Corinna", "link": "https://stackoverflow.com/users/2820239/corinna"}, "edited": false, "score": 0, "creation_date": 1426710667, "post_id": 29131205, "comment_id": 46489947, "body": "if follow a &gt;= order means that the small numbers are printed first, my function does that"}, {"owner": {"reputation": 31, "user_id": 4686823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/223c17305eee0616ede9d5425cd0831d?s=128&d=identicon&r=PG&f=1", "display_name": "cdrjohn", "link": "https://stackoverflow.com/users/4686823/cdrjohn"}, "edited": false, "score": 0, "creation_date": 1426710938, "post_id": 29131205, "comment_id": 46490106, "body": "Thank you very much for your code. I tried it and it worked. I will not be running it with 20 columns, I just used that number to state that I would like to have the number of columns variable."}, {"owner": {"reputation": 165, "user_id": 2820239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb6dd4ff4bf194e278dd695db423cf7?s=128&d=identicon&r=PG&f=1", "display_name": "Corinna", "link": "https://stackoverflow.com/users/2820239/corinna"}, "edited": false, "score": 0, "creation_date": 1426711176, "post_id": 29131205, "comment_id": 46490286, "body": "I&#39;m glad I could help. If you need the function for anything where performance might become an issue (or you actually want to call it with 20) some of the other solutions are better though. (e.g. Slava&#39;s function  worked with N=20 on my PC)"}], "owner": {"reputation": 165, "user_id": 2820239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb6dd4ff4bf194e278dd695db423cf7?s=128&d=identicon&r=PG&f=1", "display_name": "Corinna", "link": "https://stackoverflow.com/users/2820239/corinna"}, "is_accepted": false, "score": 0, "last_activity_date": 1426708066, "last_edit_date": 1426708066, "creation_date": 1426707392, "answer_id": 29131205, "question_id": 29130579, "link": "https://stackoverflow.com/questions/29130579/dynamic-nested-loops-c/29131205#29131205", "title": "Dynamic Nested Loops (C++)", "body": "<p>This function works for me, but do not call it with 20 if you want it to finish.</p>\n\n<pre><code>#include &lt;list&gt;\n#include &lt;iostream&gt;\n\nstd::list&lt;std::list&lt;int&gt;&gt; fun (std::list&lt;std::list&lt;int&gt;&gt; inputlist, int counter)\n{\n    if(counter == 0)\n    {\n        return inputlist;\n    }\n    else\n    {\n        std::list&lt;std::list&lt;int&gt;&gt; outputlist;\n        for(std::list&lt;int&gt; oldlist : inputlist)\n        {\n            for(int i = 1; i&lt;6; i++)\n            {\n                std::list&lt;int&gt; newlist = oldlist;\n                newlist.push_back(i);\n                outputlist.push_back(newlist);\n            }\n        }\n        return fun(outputlist, counter - 1);\n    }\n}\n\nint main()\n{\n    std::list&lt;int&gt; somelist;\n    std::list&lt;std::list&lt;int&gt;&gt; listlist;\n    listlist.push_back(somelist);\n    std::list&lt;std::list&lt;int&gt;&gt; manynumbers = fun (listlist,5);\n    for (std::list&lt;int&gt; somenumbers : manynumbers)\n    {\n        for(int k : somenumbers)\n        {\n            std::cout&lt;&lt;k;\n        }\n        std::cout&lt;&lt;std::endl;\n    }\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 4686823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/223c17305eee0616ede9d5425cd0831d?s=128&d=identicon&r=PG&f=1", "display_name": "cdrjohn", "link": "https://stackoverflow.com/users/4686823/cdrjohn"}, "edited": false, "score": 0, "creation_date": 1426711005, "post_id": 29131270, "comment_id": 46490156, "body": "Thanks for your code Slava. This will be the option that I will be using. I had thought myself of recursion, but my attempts were really appalling."}], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 2, "last_activity_date": 1426708878, "last_edit_date": 1426708878, "creation_date": 1426707633, "answer_id": 29131270, "question_id": 29130579, "link": "https://stackoverflow.com/questions/29130579/dynamic-nested-loops-c/29131270#29131270", "title": "Dynamic Nested Loops (C++)", "body": "<p>This recursive function should work:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nbool inc( int *indexes, int limit, int n )\n{\n    if( ++indexes[n] &lt; limit )\n        return true;\n    if( n == 0 ) return false;\n    if( inc( indexes, limit, n-1 ) ) {\n        indexes[n] = indexes[n-1];\n        return true;\n    }\n    return false;\n\n}\n\nint main()\n{\n    const size_t N=3;\n    int indexes[N];\n    for( size_t i = 0; i &lt; N; ++i ) indexes[i] = 1;\n\n    do {\n        for( size_t i = 0; i &lt; N; ++i ) std::cout &lt;&lt; indexes[i] &lt;&lt; ' ';\n        std::cout &lt;&lt; std::endl;\n    } while( inc( indexes, 6, N-1 ) );\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/429d346ff500a165\" rel=\"nofollow\">live example</a></p>\n"}, {"owner": {"reputation": 438, "user_id": 1091484, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/292c731dbf18ae7f9661f422a895d501?s=128&d=identicon&r=PG", "display_name": "Samuel", "link": "https://stackoverflow.com/users/1091484/samuel"}, "is_accepted": false, "score": 0, "last_activity_date": 1426708265, "creation_date": 1426708265, "answer_id": 29131434, "question_id": 29130579, "link": "https://stackoverflow.com/questions/29130579/dynamic-nested-loops-c/29131434#29131434", "title": "Dynamic Nested Loops (C++)", "body": "<p>Same with Processing (java) here :</p>\n\n<pre><code>void loopFunction(int targetLevel, int actualLevel, int min, int max, String prefix){\n  /*\n    targetLevel is the wanted level (20 in your case)\n    actualLevel starts from 1\n    min starts from 1\n    max is the max number displayed (6 in your case)\n    prefix starts from blank\n    see usage bellow (in setup function)\n  */\n  for(int m=min; m&lt;max; m++) {\n    if(targetLevel==actualLevel)\n    {\n      println(prefix+ \" \" + m);\n    }\n    else\n    {\n      loopFunction(targetLevel, actualLevel+1,m,max,prefix+ \" \" + m);\n    }\n  }\n}\n\nvoid setup(){\n\n  loopFunction(10,1,1,6,\"\");\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1426709422, "post_id": 29131441, "comment_id": 46489190, "body": "your advance does not take into account his &quot;&gt;=&quot; requirement"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1426710492, "post_id": 29131441, "comment_id": 46489838, "body": "@tobi303 yep.  Fixed now."}], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1426776925, "last_edit_date": 1426776925, "creation_date": 1426708293, "answer_id": 29131441, "question_id": 29130579, "link": "https://stackoverflow.com/questions/29130579/dynamic-nested-loops-c/29131441#29131441", "title": "Dynamic Nested Loops (C++)", "body": "<p>The design here is simple.  We take a <code>std::vector</code> each containing a dimension count and a <code>std::vector</code> containing a current index at each dimension.</p>\n\n<p><code>advance</code> advances the current bundle of dimension indexes by <code>amt</code> (default 1).</p>\n\n<pre><code>void advance( std::vector&lt;size_t&gt;&amp; indexes, std::vector&lt;size_t&gt; const&amp; counts, size_t amt=1 ) {\n  if (indexes.size() &lt; counts.size())\n    indexes.resize(counts.size());\n  for (size_t i = 0; i &lt; counts.size(); ++i ) {\n    indexes[i]+=amt;\n    if (indexes[i] &lt; counts[i])\n      return;\n    assert(counts[i]!=0);\n    amt = indexes[i]/counts[i];\n    indexes[i] = indexes[i]%counts[i];\n  }\n  // past the end, don't advance:\n  indexes = counts;\n}\n</code></pre>\n\n<p>which gives us an advance function for generic n dimensional coordinates.</p>\n\n<p>Next, a filter that tests the restriction you want:</p>\n\n<pre><code>bool vector_ascending( std::vector&lt;size_t&gt; const&amp; v ) {\n  for (size_t i = 1; (i &lt; v.size()); ++i) {\n    if (v[i-1] &lt; v[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n</code></pre>\n\n<p>then a <code>for</code> loop that uses the above:</p>\n\n<pre><code>void print_a_lot( std::vector&lt;size_t&gt; counts ) {\n  for( std::vector&lt;size_t&gt; v(counts.size()); v &lt; counts; advance(v,counts)) {\n    // check validity\n    if (!vector_ascending(v))\n      continue;\n    for (size_t x : v)\n      std::cout &lt;&lt; (x+1);\n    std::cout &lt;&lt; std::endl;\n  }\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/f2afad3e12062e77\" rel=\"nofollow\">live example</a>.</p>\n\n<p>No recursion needed.</p>\n\n<p>The downside to the above is that it generates 6^20 elements, and then filters.  We don't want to make that many elements.</p>\n\n<pre><code>void advance( std::vector&lt;size_t&gt;&amp; indexes, std::vector&lt;size_t&gt; const&amp; counts, size_t amt=1 ) {\n  if (indexes.size() &lt; counts.size())\n    indexes.resize(counts.size());\n  for (size_t i = 0; i &lt; counts.size(); ++i ) {\n    indexes[i]+=amt;\n    if (indexes[i] &lt; counts[i])\n    {\n      size_t min = indexes[i];\n      // enforce &lt;= ordering:\n      for (size_t j = i+i; j &lt; counts.size(); ++j) {\n        if (indexes[j]&lt;min)\n          indexes[j]=min;\n        else\n          break; // other elements already follow &lt;= transitively\n      }\n      assert(vector_ascending(indexes));\n      return;\n    }\n    assert(counts[i]!=0);\n    amt = indexes[i]/counts[i];\n    indexes[i] = indexes[i]%counts[i];\n  }\n  // past the end, don't advance:\n  indexes = counts;\n}\n</code></pre>\n\n<p>which should do it without the <code>vector_ascending</code> check in the previous version.  (I left the assert in to do testing).</p>\n"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 0, "last_activity_date": 1426709382, "creation_date": 1426709382, "answer_id": 29131725, "question_id": 29130579, "link": "https://stackoverflow.com/questions/29130579/dynamic-nested-loops-c/29131725#29131725", "title": "Dynamic Nested Loops (C++)", "body": "<p>Well, I am not the fastest in writing answer... when I started there was no other answer. Anyhow, here is my version:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nclass Multiindex {\n    public:\n        typedef std::vector&lt;int&gt; Index;\n        Multiindex(int dims,int size) : \n             dims(dims),size(size),index(Index(dims,0)){}\n        void next(){\n            int j=dims-1;\n            while (nextAt(j) &amp;&amp; j &gt;= 0){j--;}\n        }\n        Index index;\n        bool hasNext(){return !(index[0]==size-1);}\n    private:\n        bool nextAt(int j){\n            index[j] = index[j]+1;\n            bool overflow = (index[j]==size);\n            if (!overflow &amp;&amp; j &lt; dims-1){std::fill(index.begin() + j + 1,index.end(),index[j]);}\n            return overflow;\n        }\n    int dims;\n    int size;\n};\n\nint main() {\n   Multiindex m(4,6);\n   while (m.hasNext()){\n       cout &lt;&lt; m.index[0] &lt;&lt; m.index[1] &lt;&lt; m.index[2] &lt;&lt; m.index[3] &lt;&lt; endl;\n       m.next();\n   }\n   cout &lt;&lt; m.index[0] &lt;&lt; m.index[1] &lt;&lt; m.index[2] &lt;&lt; m.index[3] &lt;&lt; endl;\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 4686823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/223c17305eee0616ede9d5425cd0831d?s=128&d=identicon&r=PG&f=1", "display_name": "cdrjohn", "link": "https://stackoverflow.com/users/4686823/cdrjohn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 885, "favorite_count": 0, "answer_count": 5, "score": 3, "last_activity_date": 1426776925, "creation_date": 1426705289, "question_id": 29130579, "link": "https://stackoverflow.com/questions/29130579/dynamic-nested-loops-c", "title": "Dynamic Nested Loops (C++)", "body": "<p>Hello I am looking for a way to write this C++ Code in a general way, so that if a want 20 columns I will not have to write 20 for loops:</p>\n\n<pre><code>for(int i=1; i&lt;6; i++) {\n    for(int j=i; j&lt;6; j++) {\n        for(int k=j; k&lt;6; k++) {\n            for(int m=k; m&lt;6; m++) {\n                std::cout &lt;&lt; i &lt;&lt; j &lt;&lt; k &lt;&lt; m &lt;&lt; std::endl;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>It is important that my numbers follow a >= Order. \nI am very grateful for any help.</p>\n"}, {"tags": ["c++", "c++11", "vector"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 1, "creation_date": 1426705844, "post_id": 29130565, "comment_id": 46487096, "body": "Just for the case that you have a background in Java, PHP, C#, don&#39;t use <code>new</code> in C++ like you would use it in those languages!"}, {"owner": {"reputation": 57, "user_id": 4594428, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/7991006bed355d30b6df998c8908f89d?s=128&d=identicon&r=PG&f=1", "display_name": "Bhavya Arora", "link": "https://stackoverflow.com/users/4594428/bhavya-arora"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1426707329, "post_id": 29130565, "comment_id": 46487944, "body": "Thank you for your comment @UlrichEckhardt ...can you explain me how are the objects being created or Constructor being called in the answers below. I only know that constructor is called upon creation with &#39;new&#39; keyword."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1426748315, "post_id": 29130565, "comment_id": 46501555, "body": "Actually, that explanation would be kind-of lengthy. However, knowing that not only <code>new</code> creates objects, you should now see plenty of examples in any tutorial or text about C++, where objects are created without <code>new</code>."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 4594428, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/7991006bed355d30b6df998c8908f89d?s=128&d=identicon&r=PG&f=1", "display_name": "Bhavya Arora", "link": "https://stackoverflow.com/users/4594428/bhavya-arora"}, "edited": false, "score": 0, "creation_date": 1426706691, "post_id": 29130654, "comment_id": 46487562, "body": "Hi, thank you so much, the second one worked, the first I cannot do because I am not allowed to change the file in which the code resides.  Can you please explain me how did it worked, I only studied that Constructor gets called on object creation and we create object with the use of &#39;new&#39; operator. Sorry for limited knowledge.  OBLIGED!"}, {"owner": {"reputation": 1019, "user_id": 816855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21cdf26bdaf7452f2ace9cd1cb63b0e0?s=128&d=identicon&r=PG", "display_name": "Rosme", "link": "https://stackoverflow.com/users/816855/rosme"}, "reply_to_user": {"reputation": 57, "user_id": 4594428, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/7991006bed355d30b6df998c8908f89d?s=128&d=identicon&r=PG&f=1", "display_name": "Bhavya Arora", "link": "https://stackoverflow.com/users/4594428/bhavya-arora"}, "edited": false, "score": 0, "creation_date": 1426706898, "post_id": 29130654, "comment_id": 46487674, "body": "This actually sound like you are lacking some basic knowledge of C++ and you should read on it. You only use new on pointers, indicated by the *. The constructor gets called everytime an object is constructed, pointer or not. Most of the time, you don&#39;t want to to use pointer unless really needed. Like I said, I suggest you go read on C++ as it is basic C++ knowledge."}], "owner": {"reputation": 1019, "user_id": 816855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21cdf26bdaf7452f2ace9cd1cb63b0e0?s=128&d=identicon&r=PG", "display_name": "Rosme", "link": "https://stackoverflow.com/users/816855/rosme"}, "is_accepted": false, "score": 1, "last_activity_date": 1426705617, "creation_date": 1426705617, "answer_id": 29130654, "question_id": 29130565, "link": "https://stackoverflow.com/questions/29130565/error-no-matching-function-for-call-to-stdvectormemberlistentrypush-ba/29130654#29130654", "title": "error: no matching function for call to &gt; \u2018std::vector&lt;MemberListEntry&gt;::push_back and", "body": "<p>You are trying to put a pointer into a vector that does not contain pointers. You have two possibility:</p>\n\n<p>1- Change your <code>vector&lt;MemberListEntry&gt;</code> to <code>vector&lt;MemberListEntry*&gt;</code></p>\n\n<p>2- Change your first line to:</p>\n\n<pre><code>MemberListEntry object(id, port, memberNode-&gt;heartbeat, par-&gt;getcurrtime());\n</code></pre>\n\n<p>If you use the first one, make sure to call delete on the elements of the vector.</p>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 4594428, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/7991006bed355d30b6df998c8908f89d?s=128&d=identicon&r=PG&f=1", "display_name": "Bhavya Arora", "link": "https://stackoverflow.com/users/4594428/bhavya-arora"}, "edited": false, "score": 0, "creation_date": 1426707159, "post_id": 29130732, "comment_id": 46487837, "body": "Hi, yes it works @Praetorian , but how does it works, the memberList is a vector of type MemberListEntry, then how do we place all this stuff directly, are we allowed to simply put it there?   and in the first code MemberListEntry is a class so how does the constructor gets called without using new keyword??   Please explain....  Thank you so much for your help :) :)"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "reply_to_user": {"reputation": 57, "user_id": 4594428, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/7991006bed355d30b6df998c8908f89d?s=128&d=identicon&r=PG&f=1", "display_name": "Bhavya Arora", "link": "https://stackoverflow.com/users/4594428/bhavya-arora"}, "edited": false, "score": 1, "creation_date": 1426712471, "post_id": 29130732, "comment_id": 46490981, "body": "@Bhavya Take a look at <a href=\"https://stackoverflow.com/q/6500313/241631\">this</a>, it explains why dynamic allocation should not be the preferred approach in C++. But your question really indicates you should be reading <a href=\"https://stackoverflow.com/q/388242/241631\">a book</a> instead."}], "owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "is_accepted": false, "score": 1, "last_activity_date": 1426705907, "creation_date": 1426705907, "answer_id": 29130732, "question_id": 29130565, "link": "https://stackoverflow.com/questions/29130565/error-no-matching-function-for-call-to-stdvectormemberlistentrypush-ba/29130732#29130732", "title": "error: no matching function for call to &gt; \u2018std::vector&lt;MemberListEntry&gt;::push_back and", "body": "<p><code>memberList</code> contains <code>MemberListEntry</code>s and not <code>MemberListEntry *</code>s. Why do you want to dynamically allocate the <code>MemberListEntry</code>? Replace </p>\n\n<pre><code>MemberListEntry *object = new MemberListEntry(id, port, memberNode-&gt;heartbeat, par-&gt;getcurrtime());\nmemberNode-&gt;memberList.push_back(object);\n</code></pre>\n\n<p>with</p>\n\n<pre><code>memberNode-&gt;memberList.push_back(MemberListEntry(id, port, memberNode-&gt;heartbeat, par-&gt;getcurrtime()));\n</code></pre>\n\n<p>or better yet</p>\n\n<pre><code>memberNode-&gt;memberList.emplace_back(id, port, memberNode-&gt;heartbeat, par-&gt;getcurrtime());\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 4594428, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/7991006bed355d30b6df998c8908f89d?s=128&d=identicon&r=PG&f=1", "display_name": "Bhavya Arora", "link": "https://stackoverflow.com/users/4594428/bhavya-arora"}, "edited": false, "score": 0, "creation_date": 1426710145, "post_id": 29131120, "comment_id": 46489628, "body": "Thanks. I got it, I hope so :)"}], "owner": {"reputation": 40328, "user_id": 86967, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/624a9d99ab6293522102feab52c61f36?s=128&d=identicon&r=PG&f=1", "display_name": "Brent Bradburn", "link": "https://stackoverflow.com/users/86967/brent-bradburn"}, "is_accepted": false, "score": 0, "last_activity_date": 1426707152, "last_edit_date": 1495534207, "creation_date": 1426707152, "answer_id": 29131120, "question_id": 29130565, "link": "https://stackoverflow.com/questions/29130565/error-no-matching-function-for-call-to-stdvectormemberlistentrypush-ba/29131120#29131120", "title": "error: no matching function for call to &gt; \u2018std::vector&lt;MemberListEntry&gt;::push_back and", "body": "<p>You can resolve this problem by simply deleting <code>*</code> and <code>new</code> from your first line.</p>\n\n<p>This may be less efficient under some circumstance when compared to the other (also correct) suggestions, but it is a simpler change, and absolute maximum performance will rarely make a difference for this sort of thing.</p>\n\n<p>I would like to point you to an earlier post of mine <a href=\"https://stackoverflow.com/a/1701455/86967\">here</a> for a little bit of background on the use of <code>new</code> in C++.  To summarize that post, in C++ you don't call <code>new</code> to create an object, you just call the constructor.  The use of <code>new</code> only changes how the memory is allocated for the object.  Without <code>new</code>, the memory is allocated and managed automatically, but with <code>new</code> it is managed dynamically (using a <a href=\"https://stackoverflow.com/questions/2308751/what-is-a-memory-heap\">heap</a>) and must be handled a bit more carefully by the programmer.</p>\n"}], "owner": {"reputation": 57, "user_id": 4594428, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/7991006bed355d30b6df998c8908f89d?s=128&d=identicon&r=PG&f=1", "display_name": "Bhavya Arora", "link": "https://stackoverflow.com/users/4594428/bhavya-arora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14836, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1426707152, "creation_date": 1426705254, "question_id": 29130565, "link": "https://stackoverflow.com/questions/29130565/error-no-matching-function-for-call-to-stdvectormemberlistentrypush-ba", "title": "error: no matching function for call to &gt; \u2018std::vector&lt;MemberListEntry&gt;::push_back and", "body": "<p>Hi I am trying to insert an object of type MemberListEntry into a vector memberList containing the type . For this I am trying to use push_back function of vector, but it is giving me an error.</p>\n\n<pre><code>MemberListEntry *object = new MemberListEntry(id, port, memberNode-&gt;heartbeat, par-&gt;getcurrtime());\nmemberNode-&gt;memberList.push_back(object);\n</code></pre>\n\n<blockquote>\n  <p>MP1Node.cpp:118:41: error: no matching function for call to\n  \u2018std::vector::push_back(MemberListEntry*&amp;)\u2019<br>\n  memberNode->memberList.push_back(object);</p>\n</blockquote>\n\n<p>This is my vector</p>\n\n<pre><code>vector&lt;MemberListEntry&gt; memberList;\n</code></pre>\n\n<p>in class </p>\n\n<blockquote>\n  <p>class Member {.........</p>\n</blockquote>\n\n<p>on changing to </p>\n\n<pre><code>memberNode-&gt;memberList.push_back&lt;MemberListEntry&gt;(object);\n</code></pre>\n\n<p>gives</p>\n\n<blockquote>\n  <p>error: expected primary-expression before \u2018>\u2019 token<br>\n  memberNode->memberList.push_back(object);</p>\n</blockquote>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1426705374, "post_id": 29130530, "comment_id": 46486852, "body": "Why don&#39;t you save yourself some grief and use different, and meaningful,  identifiers? The standard dictates what should happen if two of the same name are within scope."}, {"owner": {"reputation": 3868, "user_id": 2589553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/490f0b6836112dc8929c72ed3f03bf68?s=128&d=identicon&r=PG", "display_name": "duong_dajgja", "link": "https://stackoverflow.com/users/2589553/duong-dajgja"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1426705478, "post_id": 29130530, "comment_id": 46486905, "body": "It&#39;s not the problem in coding style, just a question to strengthen my knowledge :)"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1426705593, "post_id": 29130530, "comment_id": 46486968, "body": "There is no syntax in C that allows you to access the <code>const int x</code>, after declaring <code>x[]</code> in <code>main</code>. The declaration of <code>x[]</code> hides the <code>const int x</code> as long as <code>x[]</code> is in scope, which would be all of <code>main</code> in this example."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 1, "creation_date": 1426706752, "post_id": 29130530, "comment_id": 46487592, "body": "Please note <code>int main</code> is standard not <code>void main</code>."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1426734518, "post_id": 29130530, "comment_id": 46497943, "body": "@ShafikYaghmour: Specifically <code>int main(void)</code> in C, or <code>int main()</code> in C++."}], "answers": [{"comments": [{"owner": {"reputation": 3868, "user_id": 2589553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/490f0b6836112dc8929c72ed3f03bf68?s=128&d=identicon&r=PG", "display_name": "duong_dajgja", "link": "https://stackoverflow.com/users/2589553/duong-dajgja"}, "edited": false, "score": 0, "creation_date": 1426705411, "post_id": 29130566, "comment_id": 46486865, "body": "so, let say I define a variable like this: int x = x; after that, when I use y = x; what would be x here?"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 3868, "user_id": 2589553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/490f0b6836112dc8929c72ed3f03bf68?s=128&d=identicon&r=PG", "display_name": "duong_dajgja", "link": "https://stackoverflow.com/users/2589553/duong-dajgja"}, "edited": false, "score": 0, "creation_date": 1426705567, "post_id": 29130566, "comment_id": 46486957, "body": "@duong_dajgja that would be undefined behavior since the value of <code>x</code> is indeterminate in that case: see <a href=\"http://stackoverflow.com/q/23415661/1708801\">Has C++ standard changed with respect to the use of indeterminate values and undefined behavior in C++14?</a> ... It is also <a href=\"http://stackoverflow.com/q/22416319/1708801\">undefined behavior in C as well</a>"}], "owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": true, "score": 9, "last_activity_date": 1426875978, "last_edit_date": 1426875978, "creation_date": 1426705258, "answer_id": 29130566, "question_id": 29130530, "link": "https://stackoverflow.com/questions/29130530/variable-and-constant-with-same-name/29130566#29130566", "title": "Variable and constant with same name", "body": "<p>For C++ this is covered in the <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf\" rel=\"nofollow\">draft C++ standard</a> section <code>3.3.2</code> <em>Point of declaration</em>:</p>\n\n<blockquote>\n  <p>The point of declaration for a name is immediately after its complete\n  declarator (Clause 8) and before its initializer (if any), except as\n  noted below. [ Example:</p>\n\n<pre><code>int x = 12;\n{ int x = x; }\n</code></pre>\n  \n  <p>Here the second x is initialized with its own (indeterminate) value.\n  \u2014end example ]</p>\n</blockquote>\n\n<p>and:</p>\n\n<blockquote>\n  <p>[ Note: a name from an outer scope remains visible up to the point of\n  declaration of the name that hides it.[ Example:</p>\n\n<pre><code>const int i = 2;\n{ int i[i]; }\n</code></pre>\n  \n  <p>declares a block-scope array of two integers. \u2014end example ] \u2014end note\n  ]</p>\n</blockquote>\n\n<p>So in your case:</p>\n\n<pre><code>int x[x];\n</code></pre>\n\n<p>The <em>const int</em> <code>x</code> is visible until the closing <code>]</code>. To refer to <em>const int</em> <code>x</code> after that point you can use a <a href=\"http://en.cppreference.com/w/cpp/language/identifiers\" rel=\"nofollow\">qualified identifer</a>:</p>\n\n<pre><code>::x\n</code></pre>\n\n<p>Of course this begs the question, why not just use different names and not have to deal with these edge cases?</p>\n\n<p><B>C</B></p>\n\n<p>The equivalent quotes form the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf\" rel=\"nofollow\">draft C99 standard</a> would be from section <code>6.2.1</code> <em>Scopes of identifiers</em> (<em>emphasis mine</em>):</p>\n\n<blockquote>\n  <p>Structure, union, and enumeration tags have scope that begins just\n  after the appearance of the tag in a type specifier that declares the\n  tag. Each enumeration constant has scope that begins just after the\n  appearance of its defining enumerator in an enumerator list. <strong>Any\n  other identifier has scope that begins just after the completion of\n  its declarator.</strong></p>\n</blockquote>\n\n<p>and:</p>\n\n<blockquote>\n  <p>[...] Within the inner scope, the identifier designates the entity\n  declared in the inner scope; the entity declared in the outer scope is\n  hidden (and not visible) within the inner scope.</p>\n</blockquote>\n\n<p>there is no way to make the <code>x</code> in the outer scope visible in C.</p>\n"}], "owner": {"reputation": 3868, "user_id": 2589553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/490f0b6836112dc8929c72ed3f03bf68?s=128&d=identicon&r=PG", "display_name": "duong_dajgja", "link": "https://stackoverflow.com/users/2589553/duong-dajgja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 1, "accepted_answer_id": 29130566, "answer_count": 1, "score": 2, "last_activity_date": 1426875978, "creation_date": 1426705122, "last_edit_date": 1426706727, "question_id": 29130530, "link": "https://stackoverflow.com/questions/29130530/variable-and-constant-with-same-name", "title": "Variable and constant with same name", "body": "<p>I have a C code snippet as follows:</p>\n\n<pre><code>const int x = 5;\nvoid main()\n{\n    int x[x];\n    int y = sizeof(x) / sizeof(int);\n    printf(\"%d\",y);\n}\n</code></pre>\n\n<p>The code snippet would be compiled and run correctly. But I don't understand how to differentiate x 'variable' and x 'const'.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1426705114, "post_id": 29130452, "comment_id": 46486680, "body": "<code>return main();</code> please don&#39;t do that."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4492171"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1426705205, "post_id": 29130452, "comment_id": 46486732, "body": "What should I use then? system() calls?"}, {"owner": {"reputation": 546, "user_id": 4316579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2d2d9c1eda55f63c14c24c44c9699aa?s=128&d=identicon&r=PG&f=1", "display_name": "Edward L.", "link": "https://stackoverflow.com/users/4316579/edward-l"}, "edited": false, "score": 0, "creation_date": 1426705366, "post_id": 29130452, "comment_id": 46486848, "body": "return main() is basically a recursive call to main again and that will get you stuck in an infinite loop, which will eventually overflow the stack. Hence, the segmentation fault. Your program needs to either end or loop continuously, but normally (not through a recursive call as that will overflow your stack) depending on what you&#39;re trying to do."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4492171"}, "edited": false, "score": 0, "creation_date": 1426705614, "post_id": 29130452, "comment_id": 46486980, "body": "All right, I can dump the return main(). But what should I use to re-start the program, if the part with the modulus (div1%div2!=0) fails?"}, {"owner": {"reputation": 546, "user_id": 4316579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2d2d9c1eda55f63c14c24c44c9699aa?s=128&d=identicon&r=PG&f=1", "display_name": "Edward L.", "link": "https://stackoverflow.com/users/4316579/edward-l"}, "edited": false, "score": 0, "creation_date": 1426705892, "post_id": 29130452, "comment_id": 46487121, "body": "Rather than restarting the program, use a while(true) and write your program so it can just loop continuously without calling itself again."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4492171"}, "edited": false, "score": 0, "creation_date": 1426708161, "post_id": 29130757, "comment_id": 46488407, "body": "I did something a tad different, but it has the same general idea, and it seemed to work. Thank You!"}], "owner": {"reputation": 546, "user_id": 4316579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2d2d9c1eda55f63c14c24c44c9699aa?s=128&d=identicon&r=PG&f=1", "display_name": "Edward L.", "link": "https://stackoverflow.com/users/4316579/edward-l"}, "is_accepted": true, "score": 1, "last_activity_date": 1426737921, "last_edit_date": 1426737921, "creation_date": 1426705977, "answer_id": 29130757, "question_id": 29130452, "link": "https://stackoverflow.com/questions/29130452/c-segmentation-fault-core-dumped-with-modulus/29130757#29130757", "title": "c++ segmentation fault (core dumped) with modulus", "body": "<p>Here's an example of what I've said in the comments. Obviously, you can refactor this so that it works more gracefully (as of now it'll give you floating point exceptions sometimes), but it gives you an idea on how to do this without calling main again.</p>\n\n<p>NOTE: You do not need to make a constant for NEWLINE. There is already a built-in constant in std. In fact, you're already using that constant (endl). So you can just do cout &lt;&lt; endl instead of cout &lt;&lt; NEWLINE.</p>\n\n<pre><code>    //div1\n#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\n\n#define CLS \"\\033[2J\\033[1;1H\"\n#define NEWLINE \"\\n\"\n\nint main() {\n    while(true) {\n        srand(time(NULL));\n        int a, div1, div2;\n        div1=rand()%11;\n        div2=rand()%11;\n        while (div2&gt;div1) {\n            swap(div1,div2);\n            continue;\n        }\n        if (div1%div2!=0) {\n        } else {\n            cout &lt;&lt; CLS;\n            cout &lt;&lt; NEWLINE;\n            do {\n                cout &lt;&lt; div1 &lt;&lt; \" / \" &lt;&lt; div2 &lt;&lt; \" = ?\" &lt;&lt; endl;\n                cin &gt;&gt; a;\n                cout &lt;&lt; CLS;\n                cout &lt;&lt; NEWLINE;\n                cout &lt;&lt; \"\\t\\tWrong!!\" &lt;&lt; endl;\n                cout &lt;&lt; NEWLINE;\n            } while (a!=div1/div2);\n            cout &lt;&lt; CLS;\n            cout &lt;&lt; NEWLINE;\n            cout &lt;&lt; \"\\t\\tCorrect!!\" &lt;&lt; endl;\n            cout &lt;&lt; NEWLINE;\n            cout &lt;&lt; \"Hit enter to continue.\" &lt;&lt; endl;\n            cin.ignore();\n            cin.get();\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 546, "user_id": 4316579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2d2d9c1eda55f63c14c24c44c9699aa?s=128&d=identicon&r=PG&f=1", "display_name": "Edward L.", "link": "https://stackoverflow.com/users/4316579/edward-l"}, "edited": false, "score": 0, "creation_date": 1426707039, "post_id": 29130804, "comment_id": 46487769, "body": "That is incorrect. Dividing by zero is indeed undefined, but it will not cause a crash. You can test this out easily. Write a program that divides by 0. The compiler will warn you when you compile it, but it will not crash when you actually run it. The warning will look something like this: <code>test.cpp:12:10: warning: division by zero is undefined [-Wdivision-by-zero]</code>"}, {"owner": {"reputation": 54, "user_id": 3377224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf3fae86ce4f87597b68c42c43dc18b?s=128&d=identicon&r=PG&f=1", "display_name": "Anup Kavari", "link": "https://stackoverflow.com/users/3377224/anup-kavari"}, "reply_to_user": {"reputation": 546, "user_id": 4316579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2d2d9c1eda55f63c14c24c44c9699aa?s=128&d=identicon&r=PG&f=1", "display_name": "Edward L.", "link": "https://stackoverflow.com/users/4316579/edward-l"}, "edited": false, "score": 0, "creation_date": 1426709241, "post_id": 29130804, "comment_id": 46489070, "body": "@EdwardL. As per my understanding, when you run program with divide by zero, you will get SIGFPE error and the program does terminate."}, {"owner": {"reputation": 546, "user_id": 4316579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2d2d9c1eda55f63c14c24c44c9699aa?s=128&d=identicon&r=PG&f=1", "display_name": "Edward L.", "link": "https://stackoverflow.com/users/4316579/edward-l"}, "edited": false, "score": 0, "creation_date": 1426712959, "post_id": 29130804, "comment_id": 46491233, "body": "I suppose it may be compiler/system specific. I tested this under clang-600.0.57 and it does not crash when compiled with this version, I&#39;ll try to validate to see what the GNU compiler will do."}, {"owner": {"reputation": 546, "user_id": 4316579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2d2d9c1eda55f63c14c24c44c9699aa?s=128&d=identicon&r=PG&f=1", "display_name": "Edward L.", "link": "https://stackoverflow.com/users/4316579/edward-l"}, "edited": false, "score": 0, "creation_date": 1426713643, "post_id": 29130804, "comment_id": 46491616, "body": "It appears that the GNU compiler behaves slightly differently and will terminate unlike the Clang compiler. Both will emit warnings during compilation, however. Regardless, it is NOT the cause of his segmentation fault. That is caused by the recursive call to main()."}], "owner": {"reputation": 54, "user_id": 3377224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf3fae86ce4f87597b68c42c43dc18b?s=128&d=identicon&r=PG&f=1", "display_name": "Anup Kavari", "link": "https://stackoverflow.com/users/3377224/anup-kavari"}, "is_accepted": false, "score": 0, "last_activity_date": 1426706127, "creation_date": 1426706127, "answer_id": 29130804, "question_id": 29130452, "link": "https://stackoverflow.com/questions/29130452/c-segmentation-fault-core-dumped-with-modulus/29130804#29130804", "title": "c++ segmentation fault (core dumped) with modulus", "body": "<p>This code can get into \"divide by 0\" error. This is why you would be getting error.</p>\n\n<p>The line \"if (div1%div2!=0) {\"   seems erroneous.\nIn this line if div2 == 0, then your code will crash.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4492171"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1082, "favorite_count": 0, "accepted_answer_id": 29130757, "answer_count": 2, "score": 2, "last_activity_date": 1426737921, "creation_date": 1426704891, "last_edit_date": 1426705070, "question_id": 29130452, "link": "https://stackoverflow.com/questions/29130452/c-segmentation-fault-core-dumped-with-modulus", "title": "c++ segmentation fault (core dumped) with modulus", "body": "<p>I am working on a program that allows the user to practice division. My code is below:</p>\n\n<pre><code>//div1\n#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\n\n#define CLS \"\\033[2J\\033[1;1H\"\n#define NEWLINE \"\\n\"\n\nint main() {\n    srand(time(NULL));\n    int a, div1, div2;\n    div1=rand()%11;\n    div2=rand()%11;\n    while (div2&gt;div1) {\n        swap(div1,div2);\n        continue;\n    }\n    if (div1%div2!=0) {\n        return main();\n    } else {\n        cout &lt;&lt; CLS;\n        cout &lt;&lt; NEWLINE;\n        do {\n            cout &lt;&lt; div1 &lt;&lt; \" / \" &lt;&lt; div2 &lt;&lt; \" = ?\" &lt;&lt; endl;\n            cin &gt;&gt; a;\n            cout &lt;&lt; CLS;\n            cout &lt;&lt; NEWLINE;\n            cout &lt;&lt; \"\\t\\tWrong!!\" &lt;&lt; endl;\n            cout &lt;&lt; NEWLINE;\n        } while (a!=div1/div2);\n        cout &lt;&lt; CLS;\n        cout &lt;&lt; NEWLINE;\n        cout &lt;&lt; \"\\t\\tCorrect!!\" &lt;&lt; endl;\n        cout &lt;&lt; NEWLINE;\n        cout &lt;&lt; \"Hit enter to continue.\" &lt;&lt; endl;\n        cin.ignore();\n        cin.get();\n        return main();\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Basically, what it is supposed to do is first choose two random numbers. Then, it is supposed to check to see if the second number (div2) is greater than the first (div1), and if they are, it will switch them. Then, it will use the modulus (div1%div2) to make sure that the two numbers can be divided by each other without a remainder. If they cannot be divided without a remainder, it will restart the program (return main();). However, whenever I run it, I get the <strong>segmentation fault: core dumped</strong>, either when I start it or after running it a few times. Any ideas on how to fix this?\n<br>\n<br>\nThanks!!</p>\n"}, {"tags": ["c++", "opengl", "lag"], "comments": [{"owner": {"reputation": 1605, "user_id": 1339615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6MHBM.png?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/1339615/julian"}, "edited": false, "score": 1, "creation_date": 1426711090, "post_id": 29130381, "comment_id": 46490215, "body": "On a side note, direct-mode rendering (e.g., <code>glBegin()</code> and <code>glEnd()</code>) has been deprecated since August, 2008. In other words, if you had written your code 7 years ago, it would have already been outdated. You should find a tutorial that makes use of modern OpenGL (e.g., <a href=\"https://open.gl/\" rel=\"nofollow noreferrer\">open.gl</a> or <a href=\"http://www.learnopengl.com/\" rel=\"nofollow noreferrer\">learnopengl.com</a>)."}, {"owner": {"reputation": 4696, "user_id": 4686729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CwJfx.jpg?s=128&g=1", "display_name": "Clint", "link": "https://stackoverflow.com/users/4686729/clint"}, "reply_to_user": {"reputation": 1605, "user_id": 1339615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6MHBM.png?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/1339615/julian"}, "edited": false, "score": 0, "creation_date": 1426856324, "post_id": 29130381, "comment_id": 46552695, "body": "I will try out the modern concepts once i have become familiar with the old ones , i&#39;ve just started openGlv:)"}], "answers": [{"comments": [{"owner": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "edited": false, "score": 0, "creation_date": 1426741532, "post_id": 29131069, "comment_id": 46499514, "body": "In addition, I would also recommend to use double buffering. But yes, I&#39;m most suspicious of the <code>Sleep()</code> calls in the original code. The rendering itself is so trivial that there shouldn&#39;t be any kind of performance problem even with immediate mode rendering."}, {"owner": {"reputation": 4696, "user_id": 4686729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CwJfx.jpg?s=128&g=1", "display_name": "Clint", "link": "https://stackoverflow.com/users/4686729/clint"}, "reply_to_user": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "edited": false, "score": 0, "creation_date": 1426772884, "post_id": 29131069, "comment_id": 46515122, "body": "@RetoKoradi, Thanks a lot mate that really fastened up the process , what was your reason behind removing the idlecallback function?? and yea i liked your idea about reshapefunc and integrating the model and projection inside teh display :)"}, {"owner": {"reputation": 4696, "user_id": 4686729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CwJfx.jpg?s=128&g=1", "display_name": "Clint", "link": "https://stackoverflow.com/users/4686729/clint"}, "edited": false, "score": 0, "creation_date": 1426773550, "post_id": 29131069, "comment_id": 46515602, "body": "Ohh yeah swapbuffers(), i forgot about double buffering part, guess i can optimize it even more, thanks man , really helped:)"}, {"owner": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "reply_to_user": {"reputation": 4696, "user_id": 4686729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CwJfx.jpg?s=128&g=1", "display_name": "Clint", "link": "https://stackoverflow.com/users/4686729/clint"}, "edited": false, "score": 0, "creation_date": 1426777038, "post_id": 29131069, "comment_id": 46518194, "body": "@D_X_GOD The answer if from genpfault, I was just suggesting to add something about using double buffering."}, {"owner": {"reputation": 4696, "user_id": 4686729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CwJfx.jpg?s=128&g=1", "display_name": "Clint", "link": "https://stackoverflow.com/users/4686729/clint"}, "edited": false, "score": 0, "creation_date": 1426856435, "post_id": 29131069, "comment_id": 46552788, "body": "@genpfault, errr not again"}], "owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "is_accepted": true, "score": 2, "last_activity_date": 1426710139, "last_edit_date": 1426710139, "creation_date": 1426706989, "answer_id": 29131069, "question_id": 29130381, "link": "https://stackoverflow.com/questions/29130381/opengl-performance-issues/29131069#29131069", "title": "Opengl Performance issues ,", "body": "<ul>\n<li>You're using <a href=\"/questions/tagged/c%2b%2b\" class=\"post-tag\" title=\"show questions tagged 'c++'\" rel=\"tag\">c++</a>, use C++-style (<code>stdlib.h</code> -> <code>cstdlib</code>) headers.</li>\n<li>Apply your projection/modelview matrices each time through <code>display()</code> instead of a reshape callback, helps prevent annoying matrix stack issues.</li>\n<li>Don't <code>Sleep()</code>, use a timer/idle callback to <code>glutPostRedisplay()</code>.  Bonus points for <a href=\"http://gafferongames.com/game-physics/fix-your-timestep/\" rel=\"nofollow\">framerate-independent movement</a> (you can use <code>glutGet(GLUT_ELAPSED_TIME)</code> to calculate delta-t).</li>\n<li>Without <code>Sleep()</code> there's no reason to drag <code>windows.h</code> into things.</li>\n</ul>\n\n<p>All together:</p>\n\n<pre><code>#include &lt;GL/glut.h&gt;\n#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;cstdio&gt;\n#include &lt;ctime&gt;\n#include &lt;cstring&gt;\n\ntypedef double point[3];\npoint a,b,c,d;\nstatic float xmove=0.0;\nstatic int release=0;\nstatic  float ii=0.00;\n\nstatic int reac_top;\n\nusing namespace std;\n\nGLfloat xangle=0.0;\nfloat changeDir=1;// positive direction\ndouble vv[4][3]={   {0.5,0.2,0.0},{ 0.5,0.25,0.0},{0.7,0.25,0.0},{0.7,0.2,0.0}};\n\nvoid renderoutline()\n{\n    glBegin(GL_LINE_LOOP);\n\n    glColor3f(1,0,0);\n    glVertex2f(0.0,0.0);\n    glColor3f(1,0,0);\n    glVertex2f(0,1.2);\n    glColor3f(1,0,0);\n    glVertex2f(1.2,1.2);\n    glColor3f(1,0,0);\n    glVertex2f(1.2,0);\n\n    glEnd();\n}\n\nvoid ball()\n{\n    glBegin(GL_POLYGON);\n    glColor3f(0,0,1);\n    glVertex3f(0.6,0.25,0.0);\n    glColor3f(0,0,1);\n    glVertex3f(0.6,0.28,0.0);\n    glColor3f(0,0,1);\n    glVertex3f(0.62,0.28,0.0);\n    glColor3f(0,0,1);\n    glVertex3f(0.62,0.25,0.0);\n\n    glEnd();\n}\n\nvoid renderbox1( point a , point b , point c, point d)\n{\n    glBegin(GL_POLYGON);\n    glColor3f(0,0,0);\n    glVertex3dv(a);\n    glColor3f(0,0,0);\n    glVertex3dv(b);\n    glColor3f(0,0,0);\n    glVertex3dv(c);\n    glColor3f(0,0,0);\n    glVertex3dv(d);\n    glEnd();\n}\n\nvoid keyboard(unsigned char key,int x,int y)\n{\n    switch(key)\n    {\n    case 'a':xangle-=0.1;\n        ++xmove;\n        while(xmove&gt;5)\n        {\n            xmove=-5;\n            xangle=0.5;\n            continue;\n        }\n        break;\n\n    case 'd':xangle+=0.1;\n        --xmove;\n        while(xmove&lt;-5)\n        {\n            xmove=5;\n            xangle =-0.5;\n            continue;\n        }\n        break;\n\n    case 'r': \n        release=1;\n        break;\n    }\n}\n\nvoid display()\n{\n    glClearColor(1,1,1,1);\n    glClear(GL_COLOR_BUFFER_BIT);\n\n    glMatrixMode(GL_PROJECTION);  \n    glLoadIdentity();\n    glOrtho(0, 1.2, 0, 1.2,-10.0,10.0); \n\n    glMatrixMode(GL_MODELVIEW);\n    glLoadIdentity();\n\n    glPushMatrix();\n    glLineWidth(3.0);\n    glLoadIdentity();\n\n    glTranslatef(xangle,0,0);\n    renderbox1(vv[0],vv[1],vv[2],vv[3]); // To draw the paddle \n    glPopMatrix();\n    renderoutline();\n\n    glPushMatrix();\n    glTranslatef(0,ii,0);\n    ball();\n    glPopMatrix();\n\n    glFlush();\n}\n\nvoid moveBall()\n{\n    if(release==1)\n    {\n        //Release becomes one when the key 'r' is pressed (glutkeyboardfunc)\n        if(ii&gt;=0&amp;&amp;ii&lt;=0.9 )\n        {\n            reac_top=false;\n            ii=ii+0.05;printf(\"1\\n\");//The ball which was intially on the paddle starts moving till it reaches the top edge of thescreen \n        } \n\n        else if(ii&gt;=0.9)\n        {\n            //when the boll reaches top \n            ii=ii-0.05;\n            reac_top=3;\n            printf(\"2\\n\");\n\n        }\n        else if( (ii&lt;0.9)&amp;&amp; (reac_top==3)&amp;&amp;(ii&gt;0.05))   //The balls journey back to the paddle \n        {\n            printf(\"3\\n\");\n            ii=ii-0.05;\n\n        }   \n        release=1;\n    }\n}\n\nvoid timer( int value )\n{\n    moveBall();\n\n    glutTimerFunc( 16, timer, 0 );\n    glutPostRedisplay();\n}\n\nint main(int argc ,char **argv)\n{\n    glutInit(&amp;argc,argv);\n    glutInitDisplayMode(GLUT_SINGLE|GLUT_RGB);\n    glutInitWindowSize(1000,500);\n    glutInitWindowPosition(200,0);\n    glutCreateWindow(\"3d Gasket\");\n    glutDisplayFunc(display);\n    glutKeyboardFunc(keyboard);\n    glutTimerFunc( 0, timer, 0 );\n    glutMainLoop();\n}\n</code></pre>\n"}], "owner": {"reputation": 4696, "user_id": 4686729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CwJfx.jpg?s=128&g=1", "display_name": "Clint", "link": "https://stackoverflow.com/users/4686729/clint"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 29131069, "answer_count": 1, "score": 0, "last_activity_date": 1426710139, "creation_date": 1426704708, "last_edit_date": 1426706176, "question_id": 29130381, "link": "https://stackoverflow.com/questions/29130381/opengl-performance-issues", "title": "Opengl Performance issues ,", "body": "<p>So i'm making a game(something similar to a pong)using openGl in cpp , and when i try running the program , the image rendering is too slow  ,i feel something is taking a huge toll on my GPU memory ,\n(So far i have competed the drawing and  movement of the paddle which works fine and the problem arises when the ball is set to motion on the press of a button , Everything slows down after this  ) \nHere i have attached a portion of my code\nPoint out any deficiencies in my code</p>\n\n<pre><code>    #include&lt;stdlib.h&gt;\n    #include&lt;GL/glut.h&gt;\n    #include&lt;windows.h&gt;\n    #include&lt;iostream&gt;\n    //#include&lt;sstream&gt;\n    #include&lt;stdio.h&gt;\n    #include&lt;ctime&gt;\n    #include&lt;string.h&gt;\n\n\n\n\n\n\n    typedef double point[3];\n    point a,b,c,d;\n    static float xmove=0.0;\n     static int release=0;\n    static  float ii=0.00;\n\n    static int reac_top;\n\n\n    using namespace std;\n     //GLvoid player1_box();\n    GLfloat xangle=0.0;\n    float changeDir=1;// positive direction\n    double vv[4][3]={   {0.5,0.2,0.0},{ 0.5,0.25,0.0},{0.7,0.25,0.0},{0.7,0.2,0.0}};\n\n\n    void renderoutline()\n    {\n        glBegin(GL_LINE_LOOP);\n\n        glColor3f(1,0,0);\n        glVertex2f(0.0,0.0);\n        glColor3f(1,0,0);\n        glVertex2f(0,1.2);\n        glColor3f(1,0,0);\n        glVertex2f(1.2,1.2);\n        glColor3f(1,0,0);\n        glVertex2f(1.2,0);\n\n        glEnd();\n    }\n\n    void ball()\n    {\n        glBegin(GL_POLYGON);\n        glColor3f(0,0,1);\n        glVertex3f(0.6,0.25,0.0);\n        glColor3f(0,0,1);\n        glVertex3f(0.6,0.28,0.0);\n        glColor3f(0,0,1);\n        glVertex3f(0.62,0.28,0.0);\n        glColor3f(0,0,1);\n        glVertex3f(0.62,0.25,0.0);\n\n            glEnd();\n    }\n    void renderbox1( point a , point b , point c, point d)\n    {\n\n        glBegin(GL_POLYGON);\n        glColor3f(0,0,0);\n        glVertex3dv(a);\n        glColor3f(0,0,0);\n    glVertex3dv(b);\n    glColor3f(0,0,0);\n    glVertex3dv(c);\n    glColor3f(0,0,0);\n    glVertex3dv(d);\n    glEnd();\n    }\n\n\n    void keyboard(unsigned char key,int x,int y)\n    {\n\n    switch(key){\n\n        case 'a':xangle-=0.1;\n\n                ++xmove;\n\n                while(xmove&gt;5)\n                {\n                    xmove=-5;\n\n                    xangle=0.5;\n                    continue;\n                }\n                break;\n        case 'd':xangle+=0.1;\n                --xmove;\n                while(xmove&lt;-5)\n                {\n                    xmove=5;\n                    xangle =-0.5;\n                    continue;\n                }\n                break;\n        case 'r': \n\n            release=1;\n            //printf(\"Inside switch r\");\n            break;\n        }\n    glutPostRedisplay();\n\n    }\n\n\n\n\n\n\n\n    void display()\n    {\n        Sleep(2);\n\n    glClear(GL_COLOR_BUFFER_BIT);\n\n    glPushMatrix();\n    glLineWidth(3.0);\n    glLoadIdentity();\n\n    glTranslatef(xangle,0,0);\n    renderbox1(vv[0],vv[1],vv[2],vv[3]); // To draw the paddle \n    glPopMatrix();\n    //printf(\"x move in disp:%1f \\n\",xmove);\n    renderoutline();\n\n    glPushMatrix();\n    glTranslatef(0,ii,0);\n    ball();                             //To draw the ball\n    glPopMatrix();\n\n    glFlush();\n\n\n    }\n    void moveBall(){            //glutidlefunction\n\n        if(release==1)\n        {               //Release becomes one when the key 'r' is pressed (glutkeyboardfunc)\n        Sleep(500);\n\n         if(ii&gt;=0&amp;&amp;ii&lt;=0.9 )\n         {\n        reac_top=false;\n        ii=ii+0.05;printf(\"1\\n\");//The ball which was intially on the paddle starts moving till it reaches the top edge of thescreen \n         } \n\n    else if(ii&gt;=0.9)\n    {\n                                //when the boll reaches top \n        ii=ii-0.05;\n        reac_top=3;\n        printf(\"2\\n\");\n\n    }\n        else if( (ii&lt;0.9)&amp;&amp; (reac_top==3)&amp;&amp;(ii&gt;0.05))   //The balls journey back to the paddle \n        {\n            printf(\"3\\n\");\n            ii=ii-0.05;\n\n        }   \n    release=1;\n        }\n\n    }\n\n\n    void reshape(int w, int h)\n    {\n        glMatrixMode(GL_PROJECTION);  \n        glLoadIdentity();\n        glOrtho(0, 1.2, 0, 1.2,-10.0,10.0); \n        glMatrixMode(GL_MODELVIEW);\n        glViewport(0,0,w,h);  \n        //glutPostRedisplay();\n    //Use the whole window for rendering\n    }\n\n    int main(int argc ,char **argv)\n    {\n        //clock_t begin= clock();\n        char n1,n2;\n        int ack;\n    /*printf(\"The object of Tic Tac Toe is to get three in a row. \\n . Players alternate placing Xs and Os(Traingles and Boxes in this version) \\n on the game board until either opponent has three \\n in a row or all nine squares are filled(Which would be a drawObviously). \\n\");\n    printf(\"\\n Press 1 if acknowledged \\n\");\n    scanf(\"%d\",&amp;ack);*/\n    glutInit(&amp;argc,argv);\n    glutInitDisplayMode(GLUT_SINGLE|GLUT_RGB);\n    glutInitWindowSize(1000,500);\n    glutInitWindowPosition(200,0);\n\n    glutCreateWindow(\"3d Gasket\");\n    glutDisplayFunc(display);\n\n    glutKeyboardFunc(keyboard);\n    glutReshapeFunc(reshape);\n    glutIdleFunc(moveBall);\n    glClearColor(1,1,1,1);\n    glutMainLoop();\n    //clock_t end=clock();\n    }\n</code></pre>\n"}, {"tags": ["c++", "arrays", "matlab", "opencv", "image-processing"], "comments": [{"owner": {"reputation": 32458, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1426706348, "post_id": 29130261, "comment_id": 46487354, "body": "<code>.mat</code> files have nothing to do with <code>Mat</code> data types in opencv. Just saying just in case."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4084964"}, "reply_to_user": {"reputation": 32458, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 1, "creation_date": 1426707374, "post_id": 29130261, "comment_id": 46487968, "body": "Yes. I understand.  In a function where the mask function is called, a 3-dimensional array in a .mat file is converted to the mat data type in opencv.  The problem occurs after this process; I only mention it for context. @AnderBiguri"}], "answers": [{"owner": {"reputation": 31, "user_id": 8659684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd6d3058a61929519568c3bd173adf1?s=128&d=identicon&r=PG&f=1", "display_name": "Bgnr", "link": "https://stackoverflow.com/users/8659684/bgnr"}, "is_accepted": false, "score": 0, "last_activity_date": 1561542151, "creation_date": 1561542151, "answer_id": 56769716, "question_id": 29130261, "link": "https://stackoverflow.com/questions/29130261/opencv-error-assertion-failed-in-mixchannels/56769716#56769716", "title": "OpenCV Error: Assertion Failed in MixChannels(..)", "body": "<p>Well it's obviously too late of an answer, but here is the reason why your code failed:</p>\n\n<p>Since your SrcImage is a single Mat with multiple channels, you should'we written:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>mixChannels(&amp;SrcImage, 1, &amp;out, 1, from_to, 1 );\n</code></pre>\n\n<p>(The assert error was related to this, since mixChannels expected 3 Mats, which is 3 times bigger than your Mat.)</p>\n\n<p>Also opencv MixChannels labels channels from 0, not sure if the i=1 was intended, or just a typo.</p>\n\n<p>Cheers!</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4084964"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1034, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1561542151, "creation_date": 1426704345, "question_id": 29130261, "link": "https://stackoverflow.com/questions/29130261/opencv-error-assertion-failed-in-mixchannels", "title": "OpenCV Error: Assertion Failed in MixChannels(..)", "body": "<p>I'm attempting to convert a MATLAB .mat file to openCV MAT and then applying several masks to those files.  I am building from <a href=\"https://github.com/hbristow/cvmatio\" rel=\"nofollow\">cvmatio source code</a>.  I am receiving the following error:</p>\n\n<blockquote>\n  <p>OpenCV Error: Assertion failed (A.size == arrays[i0]->size) in init,\n  file\n  /home/derek/Documents/Libraries/opencv-3.0.0-beta/modules/core/src/matrix.cpp,\n  line 4279 terminate called after throwing an instance of\n  'cv::Exception'   what(): \n  /home/derek/Documents/Libraries/opencv-3.0.0-beta/modules/core/src/matrix.cpp:4279:\n  error: (-215) A.size == arrays[i0]->size in function init</p>\n</blockquote>\n\n<p>Here is the source file I've written.  It occurs at the line with MixChannels.  Note that SrcImage is a 3 channel Mat.  lower and upper are the threshold values in an array who's length is equal to the number of channels.</p>\n\n<pre><code>/*\n * Mask.cpp\n *\n *  Created on: Mar 16, 2015\n *      Author: derek\n */\n\n\n#include &lt;cv.h&gt;\n#include &lt;highgui.h&gt;\n#include \"imgcodecs.hpp\"\n#include \"highgui.hpp\"\n#include \"imgproc.hpp\"\n\nusing namespace cv;\n\n\nMat Mask(Mat SrcImage, double lower[], double upper[]){\n    int height=SrcImage.rows;\n    int width=SrcImage.cols;\n    int depth=SrcImage.depth();\n    Mat B2d = Mat::ones(height, width,depth);\n\n    Mat out(height, width, depth);\n    Mat outL(height, width, depth);\n    Mat outU(height,width, depth);\n    for (int i=1; i&lt; SrcImage.channels(); i=i+1){\n        int from_to[]={i,1};\n        mixChannels(&amp;SrcImage, 3, &amp;out, 1, from_to, 1 );\n        threshold(out, outL, lower[i], 1, THRESH_BINARY);\n        threshold(out, outU, upper[i], 1, THRESH_BINARY);\n        bitwise_and(B2d, outL, B2d);\n        bitwise_and(B2d, outU, B2d);\n\n    }\n\n    return B2d;\n}\n</code></pre>\n\n<p>Also, here is an excerpt of the actual CV_Assertion error location.  As indicated in the error, it occurs at \"(A.size == arrays[i0]->size)\".</p>\n\n<pre><code>void NAryMatIterator::init(const Mat** _arrays, Mat* _planes, uchar** _ptrs, int _narrays)\n{\n    CV_Assert( _arrays &amp;&amp; (_ptrs || _planes) );\n    int i, j, d1=0, i0 = -1, d = -1;\n\n    arrays = _arrays;\n    ptrs = _ptrs;\n    planes = _planes;\n    narrays = _narrays;\n    nplanes = 0;\n    size = 0;\n\n    if( narrays &lt; 0 )\n    {\n        for( i = 0; _arrays[i] != 0; i++ )\n            ;\n        narrays = i;\n        CV_Assert(narrays &lt;= 1000);\n    }\n\n    iterdepth = 0;\n\n    for( i = 0; i &lt; narrays; i++ )\n    {\n        CV_Assert(arrays[i] != 0);\n        const Mat&amp; A = *arrays[i];\n        if( ptrs )\n            ptrs[i] = A.data;\n\n        if( !A.data )\n            continue;\n\n        if( i0 &lt; 0 )\n        {\n            i0 = i;\n            d = A.dims;\n\n            // find the first dimensionality which is different from 1;\n            // in any of the arrays the first \"d1\" step do not affect the continuity\n            for( d1 = 0; d1 &lt; d; d1++ )\n                if( A.size[d1] &gt; 1 )\n                    break;\n        }\n        else\n            CV_Assert( A.size == arrays[i0]-&gt;size );\n\n        if( !A.isContinuous() )\n        {\n            CV_Assert( A.step[d-1] == A.elemSize() );\n            for( j = d-1; j &gt; d1; j-- )\n                if( A.step[j]*A.size[j] &lt; A.step[j-1] )\n                    break;\n            iterdepth = std::max(iterdepth, j);\n        }\n    }\n\n    if( i0 &gt;= 0 )\n    {\n        size = arrays[i0]-&gt;size[d-1];\n        for( j = d-1; j &gt; iterdepth; j-- )\n        {\n            int64 total1 = (int64)size*arrays[i0]-&gt;size[j-1];\n            if( total1 != (int)total1 )\n                break;\n            size = (int)total1;\n        }\n\n        iterdepth = j;\n        if( iterdepth == d1 )\n            iterdepth = 0;\n\n        nplanes = 1;\n        for( j = iterdepth-1; j &gt;= 0; j-- )\n            nplanes *= arrays[i0]-&gt;size[j];\n    }\n    else\n        iterdepth = 0;\n\n    idx = 0;\n\n    if( !planes )\n        return;\n\n    for( i = 0; i &lt; narrays; i++ )\n    {\n        CV_Assert(arrays[i] != 0);\n        const Mat&amp; A = *arrays[i];\n\n        if( !A.data )\n        {\n            planes[i] = Mat();\n            continue;\n        }\n\n        planes[i] = Mat(1, (int)size, A.type(), A.data);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "thread-synchronization"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1426704837, "post_id": 29130220, "comment_id": 46486503, "body": "You need either locks or atomic operations, and each has a very specific use case that cannot reliably be &quot;the answer&quot; to this due to the vagueness of your question. We don&#39;t even know what <code>counter</code> is."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1426705481, "post_id": 29130220, "comment_id": 46486908, "body": "Assuming counter is an integer: If you want to have a synchronized value (in time) you need atomic access (std::atomic), but no lock of a mutex, If not (the reader thread does not care), you do not need atomic access."}, {"owner": {"reputation": 414, "user_id": 4369740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465640e769a726efeeb7d16db1b01259?s=128&d=identicon&r=PG&f=1", "display_name": "tipaye", "link": "https://stackoverflow.com/users/4369740/tipaye"}, "edited": false, "score": 0, "creation_date": 1426706633, "post_id": 29130220, "comment_id": 46487529, "body": "Assuming a fundamental type for counter, the app won&#39;t crash, but the veracity of getValue() will be dubious at best."}], "answers": [{"owner": {"reputation": 1661, "user_id": 4577491, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jHOQqY7kOrg/AAAAAAAAAAI/AAAAAAAAAB8/MohXfKezkRQ/photo.jpg?sz=128", "display_name": "AbdulRahman AlHamali", "link": "https://stackoverflow.com/users/4577491/abdulrahman-alhamali"}, "is_accepted": false, "score": 0, "last_activity_date": 1426706709, "creation_date": 1426706709, "answer_id": 29130986, "question_id": 29130220, "link": "https://stackoverflow.com/questions/29130220/multithreaded-one-writer-and-one-reader-do-we-need-to-use-lockers/29130986#29130986", "title": "Multithreaded - One Writer And One Reader - Do We Need To Use Lockers?", "body": "<p>Well it works and not depending on your purpose. If you don't really care whether the reader will read the old, unincremented value or the new, incremented value, then it wouldn't be much of a problem. While if you do then you need to place locks and maybe enforce order.</p>\n\n<p>For example, you cannot expect that such a code:</p>\n\n<pre><code>counter= 0\nCreateThread(Writer)\nCreateThread(Writer)\nCreateThread(Reader)\n</code></pre>\n\n<p>You cannot expect in this case that the reader will read 2, it might read 0, 1 or 2.</p>\n"}], "owner": {"reputation": 347, "user_id": 4413042, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6a4d5dde207b7685b7aea931f4105217?s=128&d=identicon&r=PG&f=1", "display_name": "Azil", "link": "https://stackoverflow.com/users/4413042/azil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426706709, "creation_date": 1426704213, "question_id": 29130220, "link": "https://stackoverflow.com/questions/29130220/multithreaded-one-writer-and-one-reader-do-we-need-to-use-lockers", "title": "Multithreaded - One Writer And One Reader - Do We Need To Use Lockers?", "body": "<p>In any multithreaded application, that has one writer thread and one reader thread, Do we need to use lockers ?\nFor example:</p>\n\n<pre><code>public void example::increase() {\n   counter++;\n}\n\npublic int example::getValue() {\n   return counter;\n}\n</code></pre>\n\n<ol>\n<li>In this example, Do we need lockers ?</li>\n<li>The app can crash if we will not use lockers ?</li>\n</ol>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "image", "opencv", "panoramas", "image-stitching"], "comments": [{"owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1426711843, "post_id": 29130166, "comment_id": 46490654, "body": "Have you tried showing the images before stitching?"}, {"owner": {"reputation": 328, "user_id": 4174853, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab682a93691743d36ee74bac9f1ca2d9?s=128&d=identicon&r=PG&f=1", "display_name": "bjorn", "link": "https://stackoverflow.com/users/4174853/bjorn"}, "reply_to_user": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1426714343, "post_id": 29130166, "comment_id": 46491956, "body": "Yes,with imshow the images are correctly showed!"}, {"owner": {"reputation": 328, "user_id": 4174853, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab682a93691743d36ee74bac9f1ca2d9?s=128&d=identicon&r=PG&f=1", "display_name": "bjorn", "link": "https://stackoverflow.com/users/4174853/bjorn"}, "reply_to_user": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1426756092, "post_id": 29130166, "comment_id": 46504790, "body": "I tried with the debugger. If I not put a waitkey after the imshow it opens only a grey window!"}, {"owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1426781973, "post_id": 29130166, "comment_id": 46521642, "body": "yes, that is expected... if you want to show it for a brief moment, use a small number like <code>waitkey(10)</code>, but that should not give you an assertion error"}, {"owner": {"reputation": 328, "user_id": 4174853, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab682a93691743d36ee74bac9f1ca2d9?s=128&d=identicon&r=PG&f=1", "display_name": "bjorn", "link": "https://stackoverflow.com/users/4174853/bjorn"}, "reply_to_user": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1426783680, "post_id": 29130166, "comment_id": 46522647, "body": "Do you think I should try the version 3 of opencv?"}, {"owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1426784298, "post_id": 29130166, "comment_id": 46522994, "body": "I haven&#39;t tested well, but you may give it a try. Where did you initialized the stitcher variable? I think you are missing a step, but I am not sure, can you edit and add all the places where you use the stitcher variable? I think I have an idea what is wrong"}, {"owner": {"reputation": 328, "user_id": 4174853, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab682a93691743d36ee74bac9f1ca2d9?s=128&d=identicon&r=PG&f=1", "display_name": "bjorn", "link": "https://stackoverflow.com/users/4174853/bjorn"}, "reply_to_user": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1426785827, "post_id": 29130166, "comment_id": 46523905, "body": "Edited with the initialization part!"}, {"owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1426786604, "post_id": 29130166, "comment_id": 46524346, "body": "Thanks, have you tried to use false in the try_use_gpu value? (the one when creating the stitcher). I read that the default values are for cpu mode... Also, have you tried to use the default stitcher without any of the extra things (warper, resol, etc)?"}, {"owner": {"reputation": 328, "user_id": 4174853, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab682a93691743d36ee74bac9f1ca2d9?s=128&d=identicon&r=PG&f=1", "display_name": "bjorn", "link": "https://stackoverflow.com/users/4174853/bjorn"}, "reply_to_user": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1426789508, "post_id": 29130166, "comment_id": 46525864, "body": "yes, with the default values it gives the &quot;Insufficient memory&quot; error. I can&#39;t really figure the problem :/"}, {"owner": {"reputation": 328, "user_id": 4174853, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab682a93691743d36ee74bac9f1ca2d9?s=128&d=identicon&r=PG&f=1", "display_name": "bjorn", "link": "https://stackoverflow.com/users/4174853/bjorn"}, "reply_to_user": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1426794953, "post_id": 29130166, "comment_id": 46528660, "body": "I noticed with the debugger that rImg after the stitch.stich command is always empty. Could this be helpfull for you?"}, {"owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1426798709, "post_id": 29130166, "comment_id": 46530591, "body": "Hmmmm, this insufficient memory error is also weird.... does this happen with the first pair? well, there is your error jeje... the image is empty, so when you go to the second iteration, one image has something and the other one is empty... so it is a mismatch in the size and consequently gives you the assert error.... you should check the return value of the function stitch (it returns <code>Stitcher::Status</code> that can be casted as an int)"}, {"owner": {"reputation": 328, "user_id": 4174853, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab682a93691743d36ee74bac9f1ca2d9?s=128&d=identicon&r=PG&f=1", "display_name": "bjorn", "link": "https://stackoverflow.com/users/4174853/bjorn"}, "reply_to_user": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1426800015, "post_id": 29130166, "comment_id": 46531249, "body": "I&#39;ve tried with Stitcher::status and it gives me 1 (I think it&#39;s ERR_NEED_MORE_IMGS), so I read 4 frame at time in this way: <code>cap &gt;&gt; img_loop; \t\tcap &gt;&gt; img_loop2; \t\tcap &gt;&gt; img_loop3;                 vImg.at(1) = img_loop; \t\tvImg.at(2) = img_loop2; \t\tvImg.at(3) = img_loop3;</code> and it gives to me the insufficient memory error."}, {"owner": {"reputation": 328, "user_id": 4174853, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab682a93691743d36ee74bac9f1ca2d9?s=128&d=identicon&r=PG&f=1", "display_name": "bjorn", "link": "https://stackoverflow.com/users/4174853/bjorn"}, "reply_to_user": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1426801816, "post_id": 29130166, "comment_id": 46532003, "body": "Do you think that doing the pipeline by hand instead using the default stitcher could resolve the problem?"}, {"owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1426805578, "post_id": 29130166, "comment_id": 46533493, "body": "it seems that it needs more than 2 images... now you have another error.... Insufficient memory error... it is weird.... usually this error appears when it is in GPU.... if it is in CPU usually it doesn&#39;t tell you... either your computer stops responding or the the program dies unexpectedly. try using <code>Stitcher::createDefault(false);</code>"}, {"owner": {"reputation": 328, "user_id": 4174853, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab682a93691743d36ee74bac9f1ca2d9?s=128&d=identicon&r=PG&f=1", "display_name": "bjorn", "link": "https://stackoverflow.com/users/4174853/bjorn"}, "reply_to_user": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1426840703, "post_id": 29130166, "comment_id": 46544203, "body": "I tried with <code>Stitcher::createDefault(false);</code> but it gives me the insufficient memory error.. Could be that images are too similar?"}, {"owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1426853015, "post_id": 29130166, "comment_id": 46550727, "body": "can you debug it, and see where it gives that error?"}, {"owner": {"reputation": 328, "user_id": 4174853, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab682a93691743d36ee74bac9f1ca2d9?s=128&d=identicon&r=PG&f=1", "display_name": "bjorn", "link": "https://stackoverflow.com/users/4174853/bjorn"}, "reply_to_user": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1426853101, "post_id": 29130166, "comment_id": 46550758, "body": "You means debug the stitch function?"}, {"owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1426853408, "post_id": 29130166, "comment_id": 46550910, "body": "your program, see which instruction (of the opencv stitch) gives you the memory insufficient... To have an idea of what may be happening..."}, {"owner": {"reputation": 328, "user_id": 4174853, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab682a93691743d36ee74bac9f1ca2d9?s=128&d=identicon&r=PG&f=1", "display_name": "bjorn", "link": "https://stackoverflow.com/users/4174853/bjorn"}, "reply_to_user": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1426854317, "post_id": 29130166, "comment_id": 46551423, "body": "I don&#39;t know why but I can&#39;t debug the stitch function (I&#39;ve set Microsoft server symbol). However, this is the error that the code above launches: <code>OpenCV Error: Assertion failed (dims &lt;= 2 &amp;&amp; data &amp;&amp; (unsigned)i0 &lt; (unsigned)si ze.p[0] &amp;&amp; (unsigned)i1 &lt; (unsigned)size.p[1] &amp;&amp; type() == DataType&lt;_Tp&gt;::type) in cv::Mat_&lt;int&gt;::operator (), file C:\\builds\\2_4_PackSlave-win32-vc12-shared\\op encv\\modules\\core\\include\\opencv2&#47;core&#47;mat.hpp, line 993</code>"}, {"owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1426856433, "post_id": 29130166, "comment_id": 46552785, "body": "But that is your first error... that it was fixed (one of the images being empty)"}, {"owner": {"reputation": 328, "user_id": 4174853, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab682a93691743d36ee74bac9f1ca2d9?s=128&d=identicon&r=PG&f=1", "display_name": "bjorn", "link": "https://stackoverflow.com/users/4174853/bjorn"}, "reply_to_user": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1426857083, "post_id": 29130166, "comment_id": 46553214, "body": "You&#39;re right (sorry this problem makes me mad xD). Here&#39;s the error: <code>OpenCV Error: Insufficient memory (Failed to allocate 501945556 bytes) in cv::Ou tOfMemoryError, file C:\\builds\\2_4_PackSlave-win32-vc12-shared\\opencv\\modules\\co re\\src\\alloc.cpp, line 52</code>"}, {"owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1426860454, "post_id": 29130166, "comment_id": 46555264, "body": "Well, it is trying to allocate around 500 MB, quite a lot for stitching 4 images.... Do you have the backtrace (add it to your question) to see which function is responsible..."}, {"owner": {"reputation": 328, "user_id": 4174853, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab682a93691743d36ee74bac9f1ca2d9?s=128&d=identicon&r=PG&f=1", "display_name": "bjorn", "link": "https://stackoverflow.com/users/4174853/bjorn"}, "reply_to_user": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1426862528, "post_id": 29130166, "comment_id": 46556596, "body": "Really I&#39;ve remodified the code, so it&#39;s stitching just 2 images. For the call stack, I have onoly this ` \tKernelBase.dll!_RaiseException@16()\tSconosciuto &gt;\tmsvcr120d.dll!_CxxThrowException(void * pExceptionObject, const _s__ThrowInfo * pThrowInfo) Riga 154\tC++  \topencv_core2410d.dll!774ec7f8()\tSconosciuto ` but I think it&#39;s not usefull :/. Ps: Ireally appreciate your dedication to my problem :D"}, {"owner": {"reputation": 328, "user_id": 4174853, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab682a93691743d36ee74bac9f1ca2d9?s=128&d=identicon&r=PG&f=1", "display_name": "bjorn", "link": "https://stackoverflow.com/users/4174853/bjorn"}, "reply_to_user": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1426862704, "post_id": 29130166, "comment_id": 46556714, "body": "Sorry I&#39;ve edited the post with the stack call!"}], "answers": [{"comments": [{"owner": {"reputation": 328, "user_id": 4174853, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab682a93691743d36ee74bac9f1ca2d9?s=128&d=identicon&r=PG&f=1", "display_name": "bjorn", "link": "https://stackoverflow.com/users/4174853/bjorn"}, "edited": false, "score": 0, "creation_date": 1426869162, "post_id": 29169720, "comment_id": 46561072, "body": "I&#39;ll give a try later and I will let you know!"}], "owner": {"reputation": 117, "user_id": 4571991, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UOzdxb263z8/AAAAAAAAAAI/AAAAAAAAABU/mNMvA84xjF0/photo.jpg?sz=128", "display_name": "alitemel", "link": "https://stackoverflow.com/users/4571991/alitemel"}, "is_accepted": false, "score": 0, "last_activity_date": 1426863980, "creation_date": 1426863980, "answer_id": 29169720, "question_id": 29130166, "link": "https://stackoverflow.com/questions/29130166/opencv-assertion-failed-with-stitcher/29169720#29169720", "title": "OpenCV Assertion Failed with Stitcher", "body": "<p>If the problem is about memory allocation, You can try to declare your vector as a static.</p>\n\n<pre><code>static vector&lt;Mat&gt; vImg;\n</code></pre>\n\n<p>I am not sure about that but i faced this problem while allocating huge array and this trick solved my problem instead of using pointers.</p>\n\n<p>I hope it helps.</p>\n"}, {"owner": {"reputation": 328, "user_id": 4174853, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab682a93691743d36ee74bac9f1ca2d9?s=128&d=identicon&r=PG&f=1", "display_name": "bjorn", "link": "https://stackoverflow.com/users/4174853/bjorn"}, "is_accepted": true, "score": -1, "last_activity_date": 1427269899, "creation_date": 1427269899, "answer_id": 29250110, "question_id": 29130166, "link": "https://stackoverflow.com/questions/29130166/opencv-assertion-failed-with-stitcher/29250110#29250110", "title": "OpenCV Assertion Failed with Stitcher", "body": "<p>I resolved implementing manualing the stitching pipeline. Thanks to you all!</p>\n"}], "owner": {"reputation": 328, "user_id": 4174853, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab682a93691743d36ee74bac9f1ca2d9?s=128&d=identicon&r=PG&f=1", "display_name": "bjorn", "link": "https://stackoverflow.com/users/4174853/bjorn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 853, "favorite_count": 1, "accepted_answer_id": 29250110, "answer_count": 2, "score": 1, "last_activity_date": 1427269899, "creation_date": 1426704028, "last_edit_date": 1426955288, "question_id": 29130166, "link": "https://stackoverflow.com/questions/29130166/opencv-assertion-failed-with-stitcher", "title": "OpenCV Assertion Failed with Stitcher", "body": "<p>I'm writing a program that takes a video as input and return a panorama image. I'm executing this code:</p>\n\n<pre><code>vector&lt; Mat &gt; vImg;\nMat rImg;\nMat img;\n\n\n\nVideoCapture cap(\"../Debug/vid/vid.avi\");\n\nif (!cap.isOpened())\n{\n    cout &lt;&lt; \"Can't open video\";\n    waitKey(0);\n    return ;\n}\n\n\n//default stitcher\nStitcher stitcher = Stitcher::createDefault(true);\n\n//set orb finder\nPtr&lt;FeaturesFinder&gt; finder=new OrbFeaturesFinder();\nstitcher.setFeaturesFinder(finder); \n\n//set seam resolution\nstitcher.setSeamEstimationResol(0.08);\n\n//set confidence threshold\nstitcher.setPanoConfidenceThresh(0.5);\n\n//set warper\nPtr&lt;WarperCreator&gt; warper = new cv::PlaneWarper();\nstitcher.setWarper(warper);\n\n//set exposure compensation\nPtr&lt;ExposureCompensator&gt; exposure_compensator = ExposureCompensator::createDefault(ExposureCompensator::GAIN);\nstitcher.setExposureCompensator(exposure_compensator);\n\n\n//set seam finder\nPtr&lt;SeamFinder&gt; seam_finder = new DpSeamFinder(DpSeamFinder::COLOR_GRAD);\nstitcher.setSeamFinder(seam_finder);\n\n//set matcher\nPtr&lt;FeaturesMatcher&gt; matcher = new BestOf2NearestMatcher(true);\nstitcher.setFeaturesMatcher(matcher);\n\n\n//sett wave correction\nstitcher.setWaveCorrection(true);\n\ncap &gt;&gt; img;\nvImg.push_back(img);\nvImg.push_back(img);    \n\n\n\nint counter = 1;\n\n\n\nwhile (counter &lt; total_frames)\n{\n\n    Mat img_loop;\n\n    cap &gt;&gt; img_loop;\n\n\n    vImg.at(1) = img_loop;\n\n\n\n    stitcher.stitch(vImg, rImg);\n\n\n    if (rImg.rows&gt;0 &amp;&amp; rImg.cols&gt;0)\n    {\n        imshow(\"debug\", rImg);      \n\n\n        vImg.at(0) = rImg;\n    }\n\n\n\n    rImg = NULL;\n\n\n    counter ++;\n\n}\n</code></pre>\n\n<p>but it gives to me the \"Assertion Failed (dims &lt;=2 &amp;&amp; data ...)\" error.\nWhat the problem could be?</p>\n\n<p>I'm using visual studio 2013 community, opencv 2.4.10 and windows 7 x64</p>\n\n<p><strong>EDIT</strong>\nAdded the \"call stack\"</p>\n\n<pre><code>    KernelBase.dll!_RaiseException@16() \nUnknown&gt;        msvcr120d.dll!_CxxThrowException(void *pExceptionObject, const_s__ThrowInfo * pThrowInfo) Riga 154  C++\n    opencv_core2410d.dll!774ec7f8() Sconosciuto\n</code></pre>\n\n<p><strong>EDIT</strong>\nI notice that if I stitch 2 identical images it gives me error. It is normal?</p>\n"}, {"tags": ["c++", "dictionary", "stl"], "answers": [{"owner": {"reputation": 2181, "user_id": 4027338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gzGPW.png?s=128&g=1", "display_name": "marsh", "link": "https://stackoverflow.com/users/4027338/marsh"}, "is_accepted": false, "score": 4, "last_activity_date": 1426705582, "creation_date": 1426705582, "answer_id": 29130648, "question_id": 29130559, "link": "https://stackoverflow.com/questions/29130559/really-confused-about-maperase/29130648#29130648", "title": "Really confused about map::erase()", "body": "<pre><code>iter == Inventory.find(2);\n</code></pre>\n\n<p>is not an assignment, I am guessing you meant to do:</p>\n\n<pre><code>iter = Inventory.find(2);\n</code></pre>\n"}], "migrated_from": {"other_site": {"aliases": ["http://programmer.stackexchange.com", "http://programmers.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1292524346, "open_beta_date": 1283972400, "closed_beta_date": 1283367600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/apple-touch-icon@2.png", "twitter_account": "StackSoftEng", "favicon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/apple-touch-icon.png", "audience": "professionals, academics, and students working within the systems development life cycle", "site_url": "https://softwareengineering.stackexchange.com", "api_site_parameter": "softwareengineering", "logo_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/logo.png", "name": "Software Engineering", "site_type": "main_site"}, "on_date": 1426705211, "question_id": 276681}, "owner": {"user_type": "does_not_exist", "display_name": "James Bradley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426705582, "creation_date": 1426703891, "question_id": 29130559, "link": "https://stackoverflow.com/questions/29130559/really-confused-about-maperase", "title": "Really confused about map::erase()", "body": "<pre><code>//test\n\n\n#include &lt;map&gt;\n#include &lt;iostream&gt;\n\n\nusing namespace std;\n\nint main()\n{\n    map&lt;int, string&gt; Inventory;\n\n    Inventory[1] = \"Sword\";\n    Inventory[2] = \"Armor\";\n    Inventory[3] = \"Shield\";\n\n    map&lt;int, string&gt;::iterator iter;\n\n    for (iter = Inventory.begin(); iter != Inventory.end(); ++iter)\n        cout &lt;&lt; (*iter).first &lt;&lt; \" - \" &lt;&lt; (*iter).second &lt;&lt; \"\\n\";\n\n    iter == Inventory.find(2);\n\n    Inventory.erase(iter);\n\n    cout &lt;&lt; \"\\n\" &lt;&lt; Inventory.count(2) &lt;&lt; \"\\n\";\n\n    iter == Inventory.find(2);\n    cout &lt;&lt; \"\\n\" &lt;&lt; (*iter).first &lt;&lt; \" - \" &lt;&lt; (*iter).second.size() &lt;&lt; \"\\n\\n\";\n\n\n    if (Inventory.find(2) == Inventory.end())\n        cout &lt;&lt; \"\\nNot found.\\n\";\n\n    for (iter = Inventory.begin(); iter != Inventory.end(); ++iter)\n        cout &lt;&lt; (*iter).first &lt;&lt; \" - \" &lt;&lt; (*iter).second &lt;&lt; \"\\n\";\n\n    cout &lt;&lt; \"\\n\" &lt;&lt; Inventory.size() &lt;&lt; \"\\n\";\n\n    system(\"PAUSE\");\n    return EXIT_SUCCESS;\n\n}\n</code></pre>\n\n<p>This is what I get when I run the program:</p>\n\n<p>1 - Sword</p>\n\n<p>2 - Armor</p>\n\n<p>3 - Shield</p>\n\n<p>1</p>\n\n<p>2 - 1968772512</p>\n\n<p>1 - Sword</p>\n\n<p>3 - Shield</p>\n\n<p>2</p>\n\n<p>So I'm a little confused why the key '2' isn't being completely deleted.</p>\n\n<p>Inventory.count(2) is returning 1 which would mean that key '2' is still lingering around in Inventory somewhere? </p>\n\n<p>Apparently, after erasing key '2', find() still returns a iterator to that key value?</p>\n\n<p>How exactly does erase() work?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 5, "creation_date": 1426703924, "post_id": 29130086, "comment_id": 46485986, "body": "It&#39;s because you don&#39;t have a correct copy constructor or assignment operator. Others will explain the specifics.. If you used <code>std::vector&lt;point2d&gt;</code> then everything would just work. You wouldn&#39;t even need to provide a destructor. Let the language do the hard work for you."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1426704050, "post_id": 29130086, "comment_id": 46486044, "body": "What destructor do you mean? The local object <code>temp</code> is of course destroyed, once it goes out of scope."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1426704131, "post_id": 29130086, "comment_id": 46486097, "body": "You&#39;re returning by value. You even named the object <code>temp</code>. Why do you think it should not be destructed? Your errors have nothing to do with &quot;going out of scope&quot; \u2014 they are due to you violating the Rule of Zero/Three/Five."}, {"owner": {"reputation": 9, "user_id": 4670413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P8OBz.jpg?s=128&g=1", "display_name": "KayOL78", "link": "https://stackoverflow.com/users/4670413/kayol78"}, "edited": false, "score": 0, "creation_date": 1426704185, "post_id": 29130086, "comment_id": 46486127, "body": "I&#39;ve added a an assignment operator for = and it&#39;s not executing till after the destructor."}, {"owner": {"reputation": 9, "user_id": 4670413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P8OBz.jpg?s=128&g=1", "display_name": "KayOL78", "link": "https://stackoverflow.com/users/4670413/kayol78"}, "edited": false, "score": 0, "creation_date": 1426704304, "post_id": 29130086, "comment_id": 46486185, "body": "Yes, temp should go out of scope, that&#39;s not the issue.  The issue is copying this variable to myPoly before that."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 2, "creation_date": 1426704391, "post_id": 29130086, "comment_id": 46486221, "body": "Compilers can make some hidden temporary variables when returning from functions. In general, I wouldn&#39;t try to understand how bad code works."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 4670413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P8OBz.jpg?s=128&g=1", "display_name": "KayOL78", "link": "https://stackoverflow.com/users/4670413/kayol78"}, "edited": false, "score": 0, "creation_date": 1426705628, "post_id": 29130433, "comment_id": 46486984, "body": "Ah yes.  I was getting mixed up between assignment operator and copy constuctor...I thought the void operator= WAS the copy constructor, whereas this too just calls the copy constructor.  I&#39;m not a pro programmer so for hobbyist stuff I&#39;d rather not use vectors in real time graphics routines as they are quite expensive.  Correct, oh yes, but expensive."}, {"owner": {"reputation": 9, "user_id": 4670413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P8OBz.jpg?s=128&g=1", "display_name": "KayOL78", "link": "https://stackoverflow.com/users/4670413/kayol78"}, "edited": false, "score": 0, "creation_date": 1426705868, "post_id": 29130433, "comment_id": 46487108, "body": "This also explains why I&#39;m getting 2 executions of same destructor.  The shallow copy copied the pointer variable as is.  Dangly.  Thanks all for your responses."}], "owner": {"reputation": 165, "user_id": 2820239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb6dd4ff4bf194e278dd695db423cf7?s=128&d=identicon&r=PG&f=1", "display_name": "Corinna", "link": "https://stackoverflow.com/users/2820239/corinna"}, "is_accepted": false, "score": 0, "last_activity_date": 1426704835, "creation_date": 1426704835, "answer_id": 29130433, "question_id": 29130086, "link": "https://stackoverflow.com/questions/29130086/out-of-scope-before-return/29130433#29130433", "title": "Out of scope before return", "body": "<p>You did not define a copy assignment constructor for your class poly2d. In that case your compiler will generate a default constructor for you. All this constructor does is copy every field of your class. </p>\n\n<p>That means in particular, that copies the pointer point2d* p, not the underlying point. </p>\n\n<p>So what happens when you call copy()?</p>\n\n<p>You generate a new poly2d, i.e. the poly2d constructor is called. That generates a new point2d. Now your call to copy() is finished. What is actually assigned to your poly2d myPoly is a copy of your temp object. The destructor of the temp object gets called as soon as the function call to copy() is finished. This destructor destroys the point2d object that the temp object pointed to. The trouble now is, that at no point in time a new point2d object for myPoly was created. myPoly has a pointer to the object that temp was pointing to, which now is drestroyed. That is of course bad.</p>\n\n<p>You can fix that by defining your own copy/ copy assignment constructors and making sure that a new point2d gets created everytime you copy a poly2d. Or, as already suggested, you can use a std::vector instead.</p>\n"}, {"comments": [{"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1426705111, "post_id": 29130519, "comment_id": 46486676, "body": "You may want to provide an example constructor implementation to help him."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1426705259, "post_id": 29130519, "comment_id": 46486771, "body": "Why do you use different parameter types in your example, and use reserve instead of resize? Don&#39;t make it more confusing than it has to be."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3920237"}, "reply_to_user": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1426705296, "post_id": 29130519, "comment_id": 46486804, "body": "@NeilKirk I can&#39;t guess the OP&#39;s intentions. It is an <i>example</i> after all."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1426705331, "post_id": 29130519, "comment_id": 46486827, "body": "He is allocating an array of a particular size. If you are going to suggest vector, at least provide an example which logically does the same thing."}], "owner": {"user_type": "does_not_exist", "display_name": "user3920237"}, "is_accepted": false, "score": 1, "last_activity_date": 1426705431, "last_edit_date": 1426705431, "creation_date": 1426705081, "answer_id": 29130519, "question_id": 29130086, "link": "https://stackoverflow.com/questions/29130086/out-of-scope-before-return/29130519#29130519", "title": "Out of scope before return", "body": "<p>You can try to implement the Rule of Three/Five, but I would recommend going for the <a href=\"http://flamingdangerzone.com/cxx11/2012/08/15/rule-of-zero.html\" rel=\"nofollow\">Rule of Zero</a>. It's based on the following principle:</p>\n\n<blockquote>\n  <p>Classes that have custom destructors, copy/move constructors or\n  copy/move assignment operators should deal exclusively with ownership.\n  Other classes should not have custom destructors, copy/move\n  constructors or copy/move assignment operators.</p>\n</blockquote>\n\n<p>You can simplify your code to the following:</p>\n\n<pre><code>struct point2d\n{\n    int x, y;\n};\n\nstruct poly2d\n{\n    poly2d(std::vector&lt;point2d&gt;::size_type size);\n\n    std::vector&lt;point2d&gt; p;\n};\n</code></pre>\n\n<p>The vector will handle copying and memory management automagically, no extra work needs to be expended. An example constructor would look something like the following:</p>\n\n<pre><code>poly2d(std::vector&lt;point2d&gt;::size_type size)\n  : p(size)\n{\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 4670413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P8OBz.jpg?s=128&g=1", "display_name": "KayOL78", "link": "https://stackoverflow.com/users/4670413/kayol78"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1426708007, "creation_date": 1426703755, "last_edit_date": 1426705309, "question_id": 29130086, "link": "https://stackoverflow.com/questions/29130086/out-of-scope-before-return", "title": "Out of scope before return", "body": "<p>The following code snippet is a simplified version of a problem I'm having in visual studio.</p>\n\n<p>The code is entering the destructor during</p>\n\n<pre><code>return temp;\n</code></pre>\n\n<p>debug single stepping.</p>\n\n<p>Code:</p>\n\n<pre><code>class point2d\n{\n   public:\n    int x, y;\n};\nclass poly2d\n{\n   public:\n\n    void operator=(const poly2d&amp; temp)\n    {\n        for (cnt = 0; cnt &lt; pointNum; ++ cnt)\n        {\n            p[cnt].x = temp.x;\n            p[cnt].y = temp.y;\n        }\n    }\n\n\n    poly2d(int size);\n    ~poly2d();\n\n   point2d* p;\n   int pointNum;\n};\n\npoly2d::poly2d(int size)\n{\n    pointNum = size;\n    p = new point2d[size];\n}\n\npoly2d::~poly2d()\n{\n    if (p)\n    {\n        delete[] p;\n        p = 0;\n    }\n}\n\npoly2d copy();\n\nint main()\n{\n    poly2d myPoly(5);\n\n    myPoly = copy();\n\n    return 1;\n}\n\npoly2d copy()\n{\n    poly2d temp(5);\n\n    return temp;\n}\n</code></pre>\n\n<p>I'm aware this piece makes no sense but it's simplified and out of context but at the same time highlights my issue.  The destructor is being executed before the return statement.  Followed by the copy constructor, then destructor again.  It's being deleted twice and causing errors obviously.  This is the first time I've had this issue in 6+ years of tinkering.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "precision", "floating-point-precision", "double-precision"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1426704458, "post_id": 29130045, "comment_id": 46486264, "body": "A) Its rather hard to find bugs in code that you do not show. B) std::cout is not printing the numbers to their full precision. There are several questions here on this topic. Just search for it. If you care about output format, I would use printf. C) To answer your question: Use a more precise number type."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1426704482, "post_id": 29130045, "comment_id": 46486279, "body": "Take a look at this: <a href=\"http://stackoverflow.com/questions/10334688/how-dangerous-is-it-to-compare-floating-point-values\" title=\"how dangerous is it to compare floating point values\">stackoverflow.com/questions/10334688/&hellip;</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1426704598, "post_id": 29130045, "comment_id": 46486339, "body": "Have you considered using <i>fixed point</i> math?  You may be able get better precision."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1426704753, "post_id": 29130045, "comment_id": 46486443, "body": "I recommend reading <a href=\"http://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=0CB8QFjAA&amp;url=http%3A%2F%2Fdocs.oracle.com%2Fcd%2FE19957-01%2F806-3568%2Fncg_goldberg.html&amp;ei=NMkJVdGsJMe2ogSJ_YGICQ&amp;usg=AFQjCNHSL-lclWJrAUgNWVbQ6BAvZRoP9Q&amp;sig2=x-zI2vrS_91kJJvGWh3BUA&amp;bvm=bv.88528373,d.cGU\" rel=\"nofollow noreferrer\">What Every Computer Scientist Should Know About Floating Point</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1426704865, "post_id": 29130045, "comment_id": 46486518, "body": "By the way, don&#39;t compare floating point values for equality or inequality.  Since most floating point quantities can&#39;t be represented internally as exact values, they won&#39;t stand up to equality.  See the document I quoted in my previous comment."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1426711469, "post_id": 29130045, "comment_id": 46490459, "body": "<code>a *= 10</code> - immediate red flags. Computers tend to work in binary, obscure IBM machines excepted."}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1426704936, "post_id": 29130360, "comment_id": 46486560, "body": "Why bothering with <code>double</code>, if you could simply use <i>fixed point math</i>?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1426714512, "post_id": 29130360, "comment_id": 46492024, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: If I could use fixed point <i>simply</i>, I&#39;d probably use it more often, but it&#39;s only simple to use in very restricted problem domains, even with external libraries. In the very link you provide, Fowler complains about the lack of currency support in standard libraries, for example. So I bother with <code>double</code> when I can&#39;t be bothered to build a fixed-point environment :)"}], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 1, "last_activity_date": 1426704652, "creation_date": 1426704652, "answer_id": 29130360, "question_id": 29130045, "link": "https://stackoverflow.com/questions/29130045/how-to-overcome-double-precision-inaccuracy/29130360#29130360", "title": "How to overcome double precision inaccuracy?", "body": "<p>The problem is that the original number wasn't <em>exactly</em> .876, although it wasn't much different. So you may have to multiply by 10 quite a few times to get it to be an integer. </p>\n\n<p>Also, note that if the number was slightly smaller than .876, 1000 times the number would be slightly smaller than 876.0 and trunc(875.99999999...) is 875, not 876.</p>\n\n<p>You might consider some threshold value where the number is \"close enough\" to an integer. for example, instead of using <code>a==trunc(a)</code>, you could use the test</p>\n\n<pre><code>abs(a - round(a)) &lt; 1e-6\n</code></pre>\n\n<p>Finally, if you wanted to be precise, you could multiply by 2 at each step, instead of by 10. You lose a little precision every time you multiply by 10, because 10 is not a power of 2. Multiplying by 2 will produce an integer after a maximum of 52 multiplications.</p>\n"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 1, "last_activity_date": 1426707023, "last_edit_date": 1426707023, "creation_date": 1426704738, "answer_id": 29130393, "question_id": 29130045, "link": "https://stackoverflow.com/questions/29130045/how-to-overcome-double-precision-inaccuracy/29130393#29130393", "title": "How to overcome double precision inaccuracy?", "body": "<blockquote>\n  <p><em>\"My function to <strong>get rid of fractional part</strong> of two doubles <strong>while retaining their ratio</strong>:\"</em></p>\n</blockquote>\n\n<p>You probably want to use fixed point values, instead of <code>double</code> at all, to get this working correctly. Something like described in the <a href=\"http://martinfowler.com/eaaCatalog/money.html\" rel=\"nofollow\"><strong>Money Pattern</strong></a>, which was designed to overcome these kind of problems.</p>\n\n<p>The general idea is you have an <code>int</code> value that holds it by a multiplied (internal) representation according to the precision you want/need. So if you need a precision of 3 decimal points you multiply that (internally) representing value with 1000, 4 decimal points -> * 10000, aso.</p>\n\n<p>If you have to handle huge values that cannot be held in (represented as) a <code>long long</code> integer variable, there are (non standard) big integer managing libraries you could use for this also.</p>\n"}], "owner": {"reputation": 1987, "user_id": 1412924, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6198bd2218ad70b3474ac0cc251dbf14?s=128&d=identicon&r=PG", "display_name": "foxneSs", "link": "https://stackoverflow.com/users/1412924/foxness"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 29130360, "answer_count": 2, "score": 0, "last_activity_date": 1426707023, "creation_date": 1426703664, "question_id": 29130045, "link": "https://stackoverflow.com/questions/29130045/how-to-overcome-double-precision-inaccuracy", "title": "How to overcome double precision inaccuracy?", "body": "<p>My function to get rid of fractional part of two doubles while retaining their ratio:</p>\n\n<pre><code>void enlarge(double &amp;a, double &amp;b)\n{\n    while (a != trunc(a) || b != trunc(b))\n    {\n        a *= 10;\n        b *= 10;\n        //output added for debugging\n        cout &lt;&lt; \"a = \" &lt;&lt; a &lt;&lt; \", b = \" &lt;&lt; b &lt;&lt; endl;\n        cout &lt;&lt; \"trunc(a) = \" &lt;&lt; trunc(a) &lt;&lt; \", trunc(b) = \" &lt;&lt; trunc(b) &lt;&lt; endl;\n        cout &lt;&lt; \"a == trunc(a): \" &lt;&lt; to_string(a == trunc(a)) &lt;&lt; \", b == trunc(b): \" &lt;&lt; to_string(b == trunc(b)) &lt;&lt; endl;\n        //to see output step by step\n        string asd;\n        cin &gt;&gt; asd;\n    }\n}\n</code></pre>\n\n<p>Output when it stops working correctly:</p>\n\n<pre><code>a = 0.876, b = 99.9\ntrunc(a) = 0, trunc(b) = 99\na == trunc(a): 0, b == trunc(b): 0\na\na = 8.76, b = 999\ntrunc(a) = 8, trunc(b) = 999\na == trunc(a): 0, b == trunc(b): 1\na\na = 87.6, b = 9990\ntrunc(a) = 87, trunc(b) = 9990\na == trunc(a): 0, b == trunc(b): 1\na\na = 876, b = 99900\ntrunc(a) = 876, trunc(b) = 99900    //This is where it stops working\na == trunc(a): 0, b == trunc(b): 1  //Notice how 876 != 876\na\na = 8760, b = 999000\ntrunc(a) = 8760, trunc(b) = 999000\na == trunc(a): 0, b == trunc(b): 1\n</code></pre>\n\n<p>What do I do in this situation?</p>\n"}, {"tags": ["c++", "visual-studio-2010", "exe", "sendinput", "bsod"], "comments": [{"owner": {"reputation": 1723, "user_id": 2073217, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/066bde403e2c8cac1c76af6a35ad81d9?s=128&d=identicon&r=PG", "display_name": "David Ching", "link": "https://stackoverflow.com/users/2073217/david-ching"}, "edited": false, "score": 0, "creation_date": 1428170630, "post_id": 29129987, "comment_id": 47065473, "body": "there is a program called NotMyFault you can use to trigger a BSOD. It is part of the Windows Internals book but seems to be available for free download separately."}, {"owner": {"reputation": 447, "user_id": 2786312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b489dcf11520e20d27a6db27108e6c5?s=128&d=identicon&r=PG&f=1", "display_name": "Albert F D", "link": "https://stackoverflow.com/users/2786312/albert-f-d"}, "reply_to_user": {"reputation": 1723, "user_id": 2073217, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/066bde403e2c8cac1c76af6a35ad81d9?s=128&d=identicon&r=PG", "display_name": "David Ching", "link": "https://stackoverflow.com/users/2073217/david-ching"}, "edited": false, "score": 0, "creation_date": 1428273474, "post_id": 29129987, "comment_id": 47089458, "body": "Thanks David, I will look into this... struggling on a different path toward programming enlightenment at the moment, but will return to this micro-project sooner or later. :D regards!"}], "answers": [{"comments": [{"owner": {"reputation": 447, "user_id": 2786312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b489dcf11520e20d27a6db27108e6c5?s=128&d=identicon&r=PG&f=1", "display_name": "Albert F D", "link": "https://stackoverflow.com/users/2786312/albert-f-d"}, "edited": false, "score": 0, "creation_date": 1426791485, "post_id": 29149727, "comment_id": 46526907, "body": "Thanks very much, very informative, and a very useful app you wrote there. Its is indeed odd that VK_RCONTROL is seen as 0x11 (like VK_CONTROL) with an extended flag, seeing as the MSDN constant for VK_RCONTROL is explicitly 0xA3. I edited my code in the OP per your suggested course of action, but unfortunately still nothing. I tried my script to check to see if other key inputs (alpha-numeric) work using notepad - and to make sure my code was correctly structured - all were successful."}, {"owner": {"reputation": 447, "user_id": 2786312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b489dcf11520e20d27a6db27108e6c5?s=128&d=identicon&r=PG&f=1", "display_name": "Albert F D", "link": "https://stackoverflow.com/users/2786312/albert-f-d"}, "edited": false, "score": 0, "creation_date": 1426791490, "post_id": 29149727, "comment_id": 46526910, "body": "On my laptop a <code>FN</code> key has to be pressed for <code>SCROLL LOCK</code> to work, this shouldn&#39;t affect the SendInput method right?"}, {"owner": {"reputation": 1723, "user_id": 2073217, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/066bde403e2c8cac1c76af6a35ad81d9?s=128&d=identicon&r=PG", "display_name": "David Ching", "link": "https://stackoverflow.com/users/2073217/david-ching"}, "reply_to_user": {"reputation": 447, "user_id": 2786312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b489dcf11520e20d27a6db27108e6c5?s=128&d=identicon&r=PG&f=1", "display_name": "Albert F D", "link": "https://stackoverflow.com/users/2786312/albert-f-d"}, "edited": false, "score": 0, "creation_date": 1426791808, "post_id": 29149727, "comment_id": 46527083, "body": "@Chris:  Sure, please make sure you change your code from <code>ip.ki.wVk = VK_RCONTROL</code> to <code>ip.ki.wVk = VK_CONTROL;</code>.  Also see my new edit about specifying the scan code.  I don&#39;t think the <code>Fn</code> key would make any difference, as the laptop hardware should generate the same normal ScrollLock key.  But you might want to change your key combination from RCtrl+ScrollLock+ScrollLock to some other more easily reproduced combination for testing, e.g. Ctrl+F10."}, {"owner": {"reputation": 447, "user_id": 2786312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b489dcf11520e20d27a6db27108e6c5?s=128&d=identicon&r=PG&f=1", "display_name": "Albert F D", "link": "https://stackoverflow.com/users/2786312/albert-f-d"}, "edited": false, "score": 0, "creation_date": 1426795922, "post_id": 29149727, "comment_id": 46529155, "body": "Apologies, it was supposed to be <code>VK_CONTROL</code> that I tried... will revise my code according to your new edit on scan code."}], "owner": {"reputation": 1723, "user_id": 2073217, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/066bde403e2c8cac1c76af6a35ad81d9?s=128&d=identicon&r=PG", "display_name": "David Ching", "link": "https://stackoverflow.com/users/2073217/david-ching"}, "is_accepted": false, "score": 1, "last_activity_date": 1426793793, "last_edit_date": 1426793793, "creation_date": 1426781634, "answer_id": 29149727, "question_id": 29129987, "link": "https://stackoverflow.com/questions/29129987/c-simulating-keystrokes-using-sendinput-method-failure-to-distinguish-right/29149727#29149727", "title": "C++ - Simulating keystrokes using SendInput method, failure to distinguish rightctrl key", "body": "<p>Following is the relevant code for a simple application I wrote to display the virtual key, scan code, flags, etc. of keys that are typed into the application.  (The code demonstrates creating a listbox and handling the <code>WM_KEYDOWN</code>, <code>WM_KEYUP</code>, <code>WM_SYSKEYDOWN</code>, and <code>WM_SYSKEYUP</code> messages, then displaying the parameters:</p>\n\n<pre><code>void CChildView::ReportKey (UINT nChar, UINT nRepCnt, UINT nFlags)\n{\n    CString str;\n    str.Format ( \"%s Virtual key=%d; Scan code=%d Extended=%d AltDown=%d\",\n             (nFlags &amp; 0x8000) ? \"Up\" : \"DOWN\",\n             nChar, (nFlags &amp; 0xFF), !!(nFlags &amp; 0x0100), !!(nFlags &amp; 0x2000) );\n    AddString (str);\n}\n\n\nvoid CChildView::OnKeyDown(UINT nChar, UINT nRepCnt, UINT nFlags)\n{\n    ReportKey (nChar, nRepCnt, nFlags);\n    CListBox::OnKeyDown(nChar, nRepCnt, nFlags);\n}\n\nvoid CChildView::OnKeyUp(UINT nChar, UINT nRepCnt, UINT nFlags)\n{\n    ReportKey (nChar, nRepCnt, nFlags);\n    CListBox::OnKeyUp(nChar, nRepCnt, nFlags);\n}\n\nvoid CChildView::OnSysKeyDown(UINT nChar, UINT nRepCnt, UINT nFlags)\n{\n    ReportKey (nChar, nRepCnt, nFlags);\n    CListBox::OnSysKeyDown(nChar, nRepCnt, nFlags);\n}\n\nvoid CChildView::OnSysKeyUp(UINT nChar, UINT nRepCnt, UINT nFlags)\n{\n    ReportKey (nChar, nRepCnt, nFlags);\n    CListBox::OnSysKeyUp(nChar, nRepCnt, nFlags);\n}\n</code></pre>\n\n<p>When the <code>Right Control</code> key is pressed, then released, while this app has the keyboard focus, it displays:</p>\n\n<pre><code>DOWN Virtual key=17; Scan code=29 Extended=1 AltDown=0\nUp Virtual key=17; Scan code=29 Extended=1 AltDown=0\n</code></pre>\n\n<p>Curiously, virtual key \"17\" is 0x11, which according to <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd375731(v=vs.85).aspx\" rel=\"nofollow\">this chart</a> is <code>VK_CONTROL</code>, not <code>VK_RCONTROL</code>!  And the <code>Extended</code> flag is true.</p>\n\n<p>When the <code>Left Control</code> key is pressed and released, the output is:</p>\n\n<pre><code>DOWN Virtual key=17; Scan code=29 Extended=0 AltDown=0\nUp Virtual key=17; Scan code=29 Extended=0 AltDown=0\n</code></pre>\n\n<p>So it seems Windows never sees a <code>VK_RCONTROL</code>, instead it sees a <code>VK_CONTROL</code> with <code>Extended = true</code>.</p>\n\n<p>So try to call SendInput() with that:</p>\n\n<pre><code>INPUT ip[6];\n...\nip[0].ki.wVk = VK_CONTROL;\nip[0].ki.wScan = MapVirtualKey(VK_CONTROL, 0);\nip[0].ki.dwFlags = KEYEVENTF_EXTENDEDKEY; \n....\nip[5].ki.wVk = VK_CONTROL;\nip[5].ki.wScan = MapVirtualKey(VK_CONTROL, 0);\nip[5].ki.dwFlags = KEYEVENTF_KEYUP | KEYEVENTF_EXTENDEDKEY; \nSendInput(_countof(ip), &amp;ip[0], sizeof(INPUT));\n</code></pre>\n\n<p>EDIT:  Specify <code>ip.ki.wScan</code> due to the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms646271(v=vs.85).aspx\" rel=\"nofollow\">comment</a></p>\n\n<blockquote>\n  <p>not using KEYEVENTF_SCANCODE doesn't mean the wScan value will be ignored. It won't and some applications (e.g. RDP-Client) may behave different/wrong if you set wScan to 0.</p>\n</blockquote>\n\n<p>EDIT 2:  I don't think it matters here, but it is better to call <code>SendInput</code> just once, and pass it an array of INPUT structures to execute as a transaction, so all the keystrokes are replayed as a unit (and user can't intersperse his own keys during the middle of yours, for example).</p>\n\n<p>EDIT 3:  You can <a href=\"http://dcsoft.com/private/scancode.exe\" rel=\"nofollow\">download the application</a> that shows the keys typed into it.</p>\n"}, {"comments": [{"owner": {"reputation": 447, "user_id": 2786312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b489dcf11520e20d27a6db27108e6c5?s=128&d=identicon&r=PG&f=1", "display_name": "Albert F D", "link": "https://stackoverflow.com/users/2786312/albert-f-d"}, "edited": false, "score": 0, "creation_date": 1426812137, "post_id": 29157383, "comment_id": 46535550, "body": "Should I define:  <code>ip.ki.time</code>   <code>ip.ki.dwExtraInfo</code>  <code>ip.ki.wScan</code> for each array member?"}, {"owner": {"reputation": 1723, "user_id": 2073217, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/066bde403e2c8cac1c76af6a35ad81d9?s=128&d=identicon&r=PG", "display_name": "David Ching", "link": "https://stackoverflow.com/users/2073217/david-ching"}, "edited": false, "score": 0, "creation_date": 1426816954, "post_id": 29157383, "comment_id": 46536776, "body": "You can initialize to all zero members:  <code>INPUT ip[6] = {0}</code>.  Yes, please do try setting all <code>ip.ki.wScan = MapVirtualKey(...);</code>.  The <code>ip[5].ki.wVk = VK_RCONTROL;</code> needs to be <code>VK_CONTROL</code>.  The <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms646310(v=vs.85).aspx\" rel=\"nofollow noreferrer\">SendInput doc</a> says &quot;This function is subject to UIPI. Applications are permitted to inject input only into applications that are at an equal or lesser integrity level.&quot;.  So you may need to make your program Run As Administrator, depending on the program receiving the keystrokes."}, {"owner": {"reputation": 1723, "user_id": 2073217, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/066bde403e2c8cac1c76af6a35ad81d9?s=128&d=identicon&r=PG", "display_name": "David Ching", "link": "https://stackoverflow.com/users/2073217/david-ching"}, "edited": false, "score": 0, "creation_date": 1426818071, "post_id": 29157383, "comment_id": 46537051, "body": "I suggest you put your code into a program that sets a timer for about 5 seconds, then executes your code.  Start the program running, then click and activate my ScanCode application (since keystrokes are sent to the active application).  When your timer fires, it will <code>SendInput</code> the keystrokes into my Scancode app, which will display them.  Make sure they are the correct ones."}, {"owner": {"reputation": 447, "user_id": 2786312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b489dcf11520e20d27a6db27108e6c5?s=128&d=identicon&r=PG&f=1", "display_name": "Albert F D", "link": "https://stackoverflow.com/users/2786312/albert-f-d"}, "reply_to_user": {"reputation": 1723, "user_id": 2073217, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/066bde403e2c8cac1c76af6a35ad81d9?s=128&d=identicon&r=PG", "display_name": "David Ching", "link": "https://stackoverflow.com/users/2073217/david-ching"}, "edited": false, "score": 0, "creation_date": 1426868359, "post_id": 29157383, "comment_id": 46560579, "body": "Hello David Ching... so I&#39;ve started afresh, from the ground up as they say. First, I downloaded your app, I-like-it-a-lot, very impressive! I tested it a bit on my machine, all keys are recognised (except the <code>FN</code> key on its own) <code>FN</code> combined presses are captured, as are shortcut inputs... so all-in-all great. Next I wrote a simple script based on my code in the OP, which essentially did the following: opened <code>notepad</code> <code>sleep</code> (3 secs) then typed <code>chris</code> <code>space</code> <code>CHRIS</code> <code>ctrl+a</code> <code>ctrl+c</code> <code>\u2192</code> <code>ctrl+v</code> <code>messagebox</code>. This was debugged within VS C++ 2010 Express, and ran without issue..."}, {"owner": {"reputation": 447, "user_id": 2786312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b489dcf11520e20d27a6db27108e6c5?s=128&d=identicon&r=PG&f=1", "display_name": "Albert F D", "link": "https://stackoverflow.com/users/2786312/albert-f-d"}, "reply_to_user": {"reputation": 1723, "user_id": 2073217, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/066bde403e2c8cac1c76af6a35ad81d9?s=128&d=identicon&r=PG", "display_name": "David Ching", "link": "https://stackoverflow.com/users/2073217/david-ching"}, "edited": false, "score": 0, "creation_date": 1426868991, "post_id": 29157383, "comment_id": 46560957, "body": "Next I intercepted the script with your app, it captured everything perfectly! ...Now this is where it gets weird. When I try the various methods attempted in this thread to get my OP code to work (using both debug with VS and by building an .exe), NOTHING appears in the scancode app. This is  bizarre to say the least. I refuse to give up the ghost with this... what could I be doing wrong? ...I&#39;ve read the MSDN information re. triggering the BSOD <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff545499(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/hardware/&hellip;</a> -  I can&#39;t see anything here which may explain this..."}, {"owner": {"reputation": 1723, "user_id": 2073217, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/066bde403e2c8cac1c76af6a35ad81d9?s=128&d=identicon&r=PG", "display_name": "David Ching", "link": "https://stackoverflow.com/users/2073217/david-ching"}, "edited": false, "score": 0, "creation_date": 1426872040, "post_id": 29157383, "comment_id": 46562791, "body": "Good morning!  How does your script get chars into my app, but not your C++ code?  Does your script use your C++ code?  Alter your C++ code to stuff the same chars e.g. <code>chris</code> <code>space</code> <code>CHRIS</code>; at the very least, your C++ code should succeed in putting characters into my app.  (Did you make sure your C++ code is running As Administrator, if my app is also running As Administrator?)"}, {"owner": {"reputation": 1723, "user_id": 2073217, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/066bde403e2c8cac1c76af6a35ad81d9?s=128&d=identicon&r=PG", "display_name": "David Ching", "link": "https://stackoverflow.com/users/2073217/david-ching"}, "edited": false, "score": 0, "creation_date": 1426872217, "post_id": 29157383, "comment_id": 46562882, "body": "But even if your C++ code succeeds in putting characters into my app, perhaps SendInput() is too high-level to cause the BSOD.  Your link implies Windows listens for the keystroke sequence at a very low level (kernel keyboard driver), lower than SendInput() works.  Is your purpose to get a dump file?  Because there are <a href=\"http://www.wintellect.com/devcenter/jrobbins/how-to-capture-a-minidump-let-me-count-the-ways\" rel=\"nofollow noreferrer\">easier ways of getting that</a>."}, {"owner": {"reputation": 447, "user_id": 2786312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b489dcf11520e20d27a6db27108e6c5?s=128&d=identicon&r=PG&f=1", "display_name": "Albert F D", "link": "https://stackoverflow.com/users/2786312/albert-f-d"}, "reply_to_user": {"reputation": 1723, "user_id": 2073217, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/066bde403e2c8cac1c76af6a35ad81d9?s=128&d=identicon&r=PG", "display_name": "David Ching", "link": "https://stackoverflow.com/users/2073217/david-ching"}, "edited": false, "score": 0, "creation_date": 1426878926, "post_id": 29157383, "comment_id": 46566249, "body": "Sorry for the confusion, by script I meant code (exactly the same code method as in my OP). I updated the answer above to contain the codes I tested, and hopefully clarify what I&#39;ve done. If what you interpret the link about BSOD to be is true, then is there no other way in C++ to get a low level  acceptance of the input sequence? The thing is I wrote a batch, which essentially configures any computer on a network via the registry changes in the link, to receive a BSOD using this sequence. I was hoping to create an executable which would be called by the batch to reproduce this sequence."}, {"owner": {"reputation": 447, "user_id": 2786312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b489dcf11520e20d27a6db27108e6c5?s=128&d=identicon&r=PG&f=1", "display_name": "Albert F D", "link": "https://stackoverflow.com/users/2786312/albert-f-d"}, "reply_to_user": {"reputation": 1723, "user_id": 2073217, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/066bde403e2c8cac1c76af6a35ad81d9?s=128&d=identicon&r=PG", "display_name": "David Ching", "link": "https://stackoverflow.com/users/2073217/david-ching"}, "edited": false, "score": 0, "creation_date": 1426879928, "post_id": 29157383, "comment_id": 46566752, "body": "I couldn&#39;t write this sequence in batch, because I didn&#39;t have the option to specify the <code>Right Control</code> key. Being somewhat acquainted with C++ I saw <code>SendInput</code> gave me that option... However <b>if</b> it&#39;s still not possible to trigger a BSOD in this way, I will reluctantly abandon this project. If you can provide another short answer reiterating the reasons for this OP not having an solution, I will happily mark it as the answer."}], "owner": {"reputation": 447, "user_id": 2786312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b489dcf11520e20d27a6db27108e6c5?s=128&d=identicon&r=PG&f=1", "display_name": "Albert F D", "link": "https://stackoverflow.com/users/2786312/albert-f-d"}, "is_accepted": false, "score": 0, "last_activity_date": 1426878155, "last_edit_date": 1426878155, "creation_date": 1426811150, "answer_id": 29157383, "question_id": 29129987, "link": "https://stackoverflow.com/questions/29129987/c-simulating-keystrokes-using-sendinput-method-failure-to-distinguish-right/29157383#29157383", "title": "C++ - Simulating keystrokes using SendInput method, failure to distinguish rightctrl key", "body": "<p>@David Ching... this is frustrating me no end... I've read all the relevant documentation (and tried to make sense of it, remember I'm a novice at this), I've tried umpteen permutations of the code taking into account your advice and what I've read. The code below, according to your last suggestion, is the last I've tried with no success. I'm trying to determine what other factors can have a bearing on the issue - would hardware (Laptop is Toshiba Satellite L670D-10N), or OS (Windows 7 Ultimate - Spanish version with English Language Pack) make a difference? - I can't imagine so. I really, really appreciate your help, please don't give up helping! - btw, thanks for the app link.</p>\n\n<pre><code>#define WINVER 0x0500\n#include &lt;windows.h&gt;\n\nint main()\n{\nINPUT ip[6];\n\nip[0].ki.wVk = VK_CONTROL;\nip[0].ki.wScan = MapVirtualKey(VK_CONTROL, 0);\nip[0].ki.dwFlags = KEYEVENTF_EXTENDEDKEY;\n\nip[1].ki.wVk = VK_SCROLL;\nip[1].ki.dwFlags = 0;\n\nip[2].ki.wVk = VK_SCROLL;\nip[2].ki.dwFlags = KEYEVENTF_KEYUP;\n\nip[3].ki.wVk = VK_SCROLL;\nip[3].ki.dwFlags = 0;\n\nip[4].ki.wVk = VK_SCROLL;\nip[4].ki.dwFlags = KEYEVENTF_KEYUP;\n\nip[5].ki.wVk = VK_CONTROL;\nip[5].ki.wScan = MapVirtualKey(VK_CONTROL, 0);\nip[5].ki.dwFlags = KEYEVENTF_KEYUP | KEYEVENTF_EXTENDEDKEY;\nSendInput(_countof(ip), &amp;ip[0], sizeof(INPUT));\n\nreturn 0;\n}\n</code></pre>\n\n<p><strong>UPDATE - THE SUCCESSFUL SENDINPUT TEST CODE</strong></p>\n\n<pre><code>#define WINVER 0x0500\n#include &lt;windows.h&gt;\n\nint main()\n{\nINPUT ip;\n\nSleep(3000);\n\nip.type = INPUT_KEYBOARD;\nip.ki.wScan = 0;\nip.ki.time = 0;\nip.ki.dwExtraInfo = 0;\n\nip.ki.wVk = 0x43;\nip.ki.dwFlags = 0; \nSendInput(1, &amp;ip, sizeof(INPUT));\n\nip.ki.wVk = 0x43;\nip.ki.dwFlags = KEYEVENTF_KEYUP; \nSendInput(1, &amp;ip, sizeof(INPUT));\n\nip.ki.wVk = 0x48;\nip.ki.dwFlags = 0; \nSendInput(1, &amp;ip, sizeof(INPUT));\n\nip.ki.wVk = 0x48;\nip.ki.dwFlags = KEYEVENTF_KEYUP; \nSendInput(1, &amp;ip, sizeof(INPUT));\n\nip.ki.wVk = 0x52;\nip.ki.dwFlags = 0; \nSendInput(1, &amp;ip, sizeof(INPUT));\n\nip.ki.wVk = 0x52;\nip.ki.dwFlags = KEYEVENTF_KEYUP; \nSendInput(1, &amp;ip, sizeof(INPUT));\n\nip.ki.wVk = 0x49;\nip.ki.dwFlags = 0; \nSendInput(1, &amp;ip, sizeof(INPUT));\n\nip.ki.wVk = 0x49;\nip.ki.dwFlags = KEYEVENTF_KEYUP; \nSendInput(1, &amp;ip, sizeof(INPUT));\n\nip.ki.wVk = 0x53;\nip.ki.dwFlags = 0; \nSendInput(1, &amp;ip, sizeof(INPUT));\n\nip.ki.wVk = 0x53;\nip.ki.dwFlags = KEYEVENTF_KEYUP; \nSendInput(1, &amp;ip, sizeof(INPUT));\n\nip.ki.wVk = 0x10;\nip.ki.dwFlags = 0; \nSendInput(1, &amp;ip, sizeof(INPUT));\n\nip.ki.wVk = 0x43;\nip.ki.dwFlags = 0; \nSendInput(1, &amp;ip, sizeof(INPUT));\n\nip.ki.wVk = 0x43;\nip.ki.dwFlags = KEYEVENTF_KEYUP; \nSendInput(1, &amp;ip, sizeof(INPUT));\n\nip.ki.wVk = 0x48;\nip.ki.dwFlags = 0; \nSendInput(1, &amp;ip, sizeof(INPUT));\n\nip.ki.wVk = 0x48;\nip.ki.dwFlags = KEYEVENTF_KEYUP; \nSendInput(1, &amp;ip, sizeof(INPUT));\n\nip.ki.wVk = 0x52;\nip.ki.dwFlags = 0; \nSendInput(1, &amp;ip, sizeof(INPUT));\n\nip.ki.wVk = 0x52;\nip.ki.dwFlags = KEYEVENTF_KEYUP; \nSendInput(1, &amp;ip, sizeof(INPUT));\n\nip.ki.wVk = 0x49;\nip.ki.dwFlags = 0; \nSendInput(1, &amp;ip, sizeof(INPUT));\n\nip.ki.wVk = 0x49;\nip.ki.dwFlags = KEYEVENTF_KEYUP; \nSendInput(1, &amp;ip, sizeof(INPUT));\n\nip.ki.wVk = 0x53;\nip.ki.dwFlags = 0; \nSendInput(1, &amp;ip, sizeof(INPUT));\n\nip.ki.wVk = 0x53;\nip.ki.dwFlags = KEYEVENTF_KEYUP; \nSendInput(1, &amp;ip, sizeof(INPUT));\n\nip.ki.wVk = 0x10;\nip.ki.dwFlags = KEYEVENTF_KEYUP; \nSendInput(1, &amp;ip, sizeof(INPUT));\n\nreturn 0;\n}\n</code></pre>\n\n<p><strong>UPDATE - THE UNSUCCESSFUL REVISED CTRL((SCROLL LOCK)X2) CODE</strong></p>\n\n<pre><code>#define WINVER 0x0500\n#include &lt;windows.h&gt;\n\nint main()\n{\nINPUT ip[6] = {0};\n\nSleep(3000);\n\nip[0].ki.wVk = VK_CONTROL;\nip[0].ki.wScan = MapVirtualKey(VK_CONTROL, 0);\nip[0].ki.dwFlags = KEYEVENTF_EXTENDEDKEY;\n\nip[1].ki.wVk = VK_SCROLL;\nip[1].ki.wScan = MapVirtualKey(VK_SCROLL, 0);\nip[1].ki.dwFlags = 0;\n\nip[2].ki.wVk = VK_SCROLL;\nip[2].ki.wScan = MapVirtualKey(VK_SCROLL, 0);\nip[2].ki.dwFlags = KEYEVENTF_KEYUP;\n\nip[3].ki.wVk = VK_SCROLL;\nip[3].ki.wScan = MapVirtualKey(VK_SCROLL, 0);\nip[3].ki.dwFlags = 0;\n\nip[4].ki.wVk = VK_SCROLL;\nip[4].ki.wScan = MapVirtualKey(VK_SCROLL, 0);\nip[4].ki.dwFlags = KEYEVENTF_KEYUP;\n\nip[5].ki.wVk = VK_CONTROL;\nip[5].ki.wScan = MapVirtualKey(VK_CONTROL, 0);\nip[5].ki.dwFlags = KEYEVENTF_KEYUP | KEYEVENTF_EXTENDEDKEY;\nSendInput(_countof(ip), &amp;ip[0], sizeof(INPUT));\n\nreturn 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 447, "user_id": 2786312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b489dcf11520e20d27a6db27108e6c5?s=128&d=identicon&r=PG&f=1", "display_name": "Albert F D", "link": "https://stackoverflow.com/users/2786312/albert-f-d"}, "edited": false, "score": 0, "creation_date": 1426889875, "post_id": 29176562, "comment_id": 46571001, "body": "All I can say is, thanks so, so much for all your time, effort and good nature... and thanks for the link to your very useful app, I&#39;m sure I will be putting it to good use in my code developing forays. I think I will shelve this project for the time being, perhaps somewhere, someday I will stumble across a method to simulate this sequence successfully... until then thanks again, you sir are a scholar and a gentleman."}, {"owner": {"reputation": 1723, "user_id": 2073217, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/066bde403e2c8cac1c76af6a35ad81d9?s=128&d=identicon&r=PG", "display_name": "David Ching", "link": "https://stackoverflow.com/users/2073217/david-ching"}, "reply_to_user": {"reputation": 447, "user_id": 2786312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b489dcf11520e20d27a6db27108e6c5?s=128&d=identicon&r=PG&f=1", "display_name": "Albert F D", "link": "https://stackoverflow.com/users/2786312/albert-f-d"}, "edited": false, "score": 0, "creation_date": 1426896745, "post_id": 29176562, "comment_id": 46572930, "body": "@Chris - thanks for your kind words and sorry we didn&#39;t get it to work.  Good luck in your next work!"}], "owner": {"reputation": 1723, "user_id": 2073217, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/066bde403e2c8cac1c76af6a35ad81d9?s=128&d=identicon&r=PG", "display_name": "David Ching", "link": "https://stackoverflow.com/users/2073217/david-ching"}, "is_accepted": true, "score": 0, "last_activity_date": 1426889396, "creation_date": 1426889396, "answer_id": 29176562, "question_id": 29129987, "link": "https://stackoverflow.com/questions/29129987/c-simulating-keystrokes-using-sendinput-method-failure-to-distinguish-right/29176562#29176562", "title": "C++ - Simulating keystrokes using SendInput method, failure to distinguish rightctrl key", "body": "<p>This Code successfully stuffs RControl+ScrollLock+ScrollLock into the ScanCode app, however, sorry, the computer does not reboot like when it does when these keys are manually typed.</p>\n\n<pre><code>#define WINVER 0x0500\n#include &lt;windows.h&gt;\n\nint main()\n{\n    // Must specify INPUT_KEYBOARD for all INPUT structs\n    INPUT ip[6] = { \n            { INPUT_KEYBOARD },\n            { INPUT_KEYBOARD },\n            { INPUT_KEYBOARD },\n            { INPUT_KEYBOARD },\n            { INPUT_KEYBOARD },\n            { INPUT_KEYBOARD },\n    };\n\n    Sleep(3000);\n\n\n    // Specify keys by scancode.  For the VK_SCROLL, it was necessary\n    // to instead specify the wVK, otherwise VK==3 was received by ScanCode, instead\n    // of VK_SCROLL == 145!\n    //ip[0].ki.wVk = VK_CONTROL;\n    ip[0].ki.wScan = MapVirtualKey(VK_RCONTROL, MAPVK_VK_TO_VSC);\n    ip[0].ki.dwFlags = KEYEVENTF_SCANCODE | KEYEVENTF_EXTENDEDKEY;\n\n    ip[1].ki.wVk = VK_SCROLL;\n    ip[1].ki.wScan = MapVirtualKey(VK_SCROLL, MAPVK_VK_TO_VSC);\n    ip[1].ki.dwFlags = /*KEYEVENTF_SCANCODE*/ 0;\n\n    ip[2].ki.wVk = VK_SCROLL;\n    ip[2].ki.wScan = MapVirtualKey(VK_SCROLL, MAPVK_VK_TO_VSC);\n    ip[2].ki.dwFlags = /*KEYEVENTF_SCANCODE |*/ KEYEVENTF_KEYUP;\n\n    ip[3].ki.wVk = VK_SCROLL;\n    ip[3].ki.wScan = MapVirtualKey(VK_SCROLL, MAPVK_VK_TO_VSC);\n    ip[3].ki.dwFlags = /*KEYEVENTF_SCANCODE*/ 0;\n\n    ip[4].ki.wVk = VK_SCROLL;\n    ip[4].ki.wScan = MapVirtualKey(VK_SCROLL, MAPVK_VK_TO_VSC);\n    ip[4].ki.dwFlags = /*KEYEVENTF_SCANCODE |*/ KEYEVENTF_KEYUP;\n\n    //ip[5].ki.wVk = VK_CONTROL;\n    ip[5].ki.wScan = MapVirtualKey(VK_RCONTROL, MAPVK_VK_TO_VSC);\n    ip[5].ki.dwFlags = KEYEVENTF_SCANCODE | KEYEVENTF_KEYUP | KEYEVENTF_EXTENDEDKEY;\n\n    int i = _countof(ip);\n    int numSuccessful = SendInput(i, ip, sizeof(INPUT));\n    if (numSuccessful == i)\n        printf(\"Stuffed successful.\\n\");\n    else\n    {\n        printf(\"Succeeded with %d of %d; error %d\\n\", numSuccessful, i, GetLastError());\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>I believe the reason is that SendInput() injects the keys into the layer above the keyboard driver, and it is the keyboard driver that is monitored for these keystrokes to initiate the BSOD.</p>\n"}], "owner": {"reputation": 447, "user_id": 2786312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b489dcf11520e20d27a6db27108e6c5?s=128&d=identicon&r=PG&f=1", "display_name": "Albert F D", "link": "https://stackoverflow.com/users/2786312/albert-f-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2269, "favorite_count": 1, "accepted_answer_id": 29176562, "answer_count": 3, "score": 0, "last_activity_date": 1426889396, "creation_date": 1426703469, "last_edit_date": 1495541186, "question_id": 29129987, "link": "https://stackoverflow.com/questions/29129987/c-simulating-keystrokes-using-sendinput-method-failure-to-distinguish-right", "title": "C++ - Simulating keystrokes using SendInput method, failure to distinguish rightctrl key", "body": "<p>I have very little experience in C++, and I'm completely unfamiliar with the SendInput method. I've setup my laptop (with UK keyboard) via a registry modification, to create a crash dump whenever the <code>right control</code> key is held down and <code>scroll lock</code> is twice pressed. I am trying to achieve this programmatically via a c++ executable, compiled in Visual C++ 2010 Express. </p>\n\n<p>Using this post: <a href=\"https://stackoverflow.com/questions/22419038/how-to-use-sendinput-function-c\">how to use sendinput function C++</a> as my inspiration, I have created the code snippet hereunder. Aside from multiple <code>Cannot find or open the PDB</code> debug outputs, which from reading this post: <a href=\"https://stackoverflow.com/questions/15937707/error-message-cannot-find-or-open-the-pdb-file\">Error Message : Cannot find or open the PDB file</a> can apparently be ignored, the code compiles and runs. However no BSOD transpires. I have manually \"forced\" the BSOD, so I know it works.</p>\n\n<p>Bearing in mind I'm a novice, please explain what changes must be made for this to work?</p>\n\n<pre><code>#define WINVER 0x500\n#include &lt;windows.h&gt;\n\nint main()\n{\nINPUT ip;\nip.type = INPUT_KEYBOARD;\nip.ki.wScan = 0;\nip.ki.time = 0;\nip.ki.dwExtraInfo = 0;\n\nip.ki.wVk = VK_RCONTROL;\nip.ki.dwFlags = 0; \nSendInput(1, &amp;ip, sizeof(INPUT));\n\nip.ki.wVk = VK_SCROLL;\nip.ki.dwFlags = 0; \nSendInput(1, &amp;ip, sizeof(INPUT));\n\nip.ki.wVk = VK_SCROLL;\nip.ki.dwFlags = KEYEVENTF_KEYUP;\nSendInput(1, &amp;ip, sizeof(INPUT));\n\nip.ki.wVk = VK_SCROLL;\nip.ki.dwFlags = 0;\nSendInput(1, &amp;ip, sizeof(INPUT));\n\nip.ki.wVk = VK_SCROLL;\nip.ki.dwFlags = KEYEVENTF_KEYUP;\nSendInput(1, &amp;ip, sizeof(INPUT));\n\nip.ki.wVk = VK_RCONTROL;\nip.ki.dwFlags = KEYEVENTF_KEYUP;\nSendInput(1, &amp;ip, sizeof(INPUT));\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "inheritance", "polymorphism"], "comments": [{"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1426703427, "post_id": 29129907, "comment_id": 46485670, "body": "You probably meant <code>Structure* struct</code>, not  <code>Structure struct*</code>?"}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1426703525, "post_id": 29129907, "comment_id": 46485729, "body": "@zenith Will either compile? :)"}, {"owner": {"reputation": 9721, "user_id": 131057, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4d84023d355c712ca3a393881e862679?s=128&d=identicon&r=PG", "display_name": "Luka Rahne", "link": "https://stackoverflow.com/users/131057/luka-rahne"}, "edited": false, "score": 0, "creation_date": 1426703572, "post_id": 29129907, "comment_id": 46485751, "body": "dont use struct as varaible name, because it is reserved word. <a href=\"http://en.cppreference.com/w/cpp/keyword\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/keyword</a>"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1426703677, "post_id": 29129907, "comment_id": 46485815, "body": "@NeilKirk Not really."}, {"owner": {"reputation": 13, "user_id": 4674664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cc1d763056e97c4f7372bdc0eb907bb?s=128&d=identicon&r=PG&f=1", "display_name": "critikull4", "link": "https://stackoverflow.com/users/4674664/critikull4"}, "reply_to_user": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1426707997, "post_id": 29129907, "comment_id": 46488316, "body": "@NeilKirk Could you please look at my update. I further inherit from the Building/Statue classes but the printing causes a random address to be appended."}, {"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 0, "creation_date": 1426708582, "post_id": 29129907, "comment_id": 46488681, "body": "@critikull4 The issue is in your <code>operator&lt;&lt;</code>. See how it differs from the one in Neil&#39;s answer. You are printing the address of the stream."}], "answers": [{"comments": [{"owner": {"reputation": 8029, "user_id": 3137499, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7acff2bbbdb9c51ea478377a0f6dcb03?s=128&d=identicon&r=PG&f=1", "display_name": "aruisdante", "link": "https://stackoverflow.com/users/3137499/aruisdante"}, "reply_to_user": {"reputation": 13, "user_id": 4674664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cc1d763056e97c4f7372bdc0eb907bb?s=128&d=identicon&r=PG&f=1", "display_name": "critikull4", "link": "https://stackoverflow.com/users/4674664/critikull4"}, "edited": false, "score": 0, "creation_date": 1426704110, "post_id": 29129992, "comment_id": 46486077, "body": "@critikull4 In the general case, these are simple examples of <a href=\"http://en.wikipedia.org/wiki/Inversion_of_control\" rel=\"nofollow noreferrer\">Inversion of Control</a> and specifically the <a href=\"http://en.wikipedia.org/wiki/Template_method_pattern\" rel=\"nofollow noreferrer\">Template Pattern</a>, very useful tools to understand in general for these kind of &quot;base class defines algorithmic functionality, subclasses define implementation&quot; problems."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "reply_to_user": {"reputation": 13, "user_id": 4674664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cc1d763056e97c4f7372bdc0eb907bb?s=128&d=identicon&r=PG&f=1", "display_name": "critikull4", "link": "https://stackoverflow.com/users/4674664/critikull4"}, "edited": false, "score": 0, "creation_date": 1426708370, "post_id": 29129992, "comment_id": 46488537, "body": "@critikull4 It should be <code>return c.output(o);</code>"}], "owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "is_accepted": true, "score": 5, "last_activity_date": 1426703503, "creation_date": 1426703503, "answer_id": 29129992, "question_id": 29129907, "link": "https://stackoverflow.com/questions/29129907/c-inheritance-operator/29129992#29129992", "title": "C++ Inheritance operator&lt;&lt;", "body": "<p>Create a virtual output function and call it within the <code>operator &lt;&lt;</code>. Override this output function in your derived classes.</p>\n\n<pre><code>class Structure\n{\npublic:\n    virtual ~Structure() {}\n    virtual std::ostream&amp; StreamOut(std::ostream&amp; o) const { return o; }\n\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; o, const Structure &amp;s)\n    {\n        return s.StreamOut(o);\n    }\n};\n\nclass Building : public Structure\n{\npublic:\n    virtual std::ostream&amp; StreamOut(std::ostream&amp; o) const\n    {\n        return o &lt;&lt; m_windows.size() &lt;&lt; m_doors.size();\n    }\nprotected:\n    Windows m_windows;\n    Doors m_doors;\n};\n\nclass Statue : public Structure\n{\npublic:\n    virtual std::ostream&amp; StreamOut(std::ostream&amp; o) const\n    {\n        return o &lt;&lt; m_type;\n    }\nprotected:\n    StatueType m_type;\n};\n\nint main(int argc, char* argv[])\n{\n    std::unique_ptr&lt;Structure&gt; myStruct(new Building());\n    std::cout &lt;&lt; *myStruct &lt;&lt; std::endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4674664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cc1d763056e97c4f7372bdc0eb907bb?s=128&d=identicon&r=PG&f=1", "display_name": "critikull4", "link": "https://stackoverflow.com/users/4674664/critikull4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 1, "accepted_answer_id": 29129992, "answer_count": 1, "score": 1, "last_activity_date": 1426707737, "creation_date": 1426703246, "last_edit_date": 1426707737, "question_id": 29129907, "link": "https://stackoverflow.com/questions/29129907/c-inheritance-operator", "title": "C++ Inheritance operator&lt;&lt;", "body": "<p>I have a few objects (classes) that all inherit from a base class Structure. These objects all print differently as they have different member variables but share common functions.</p>\n\n<p>I want to be able to have a list of structures and print them without having to cast them back into their specific object, ie: Structure -> Building.</p>\n\n<p>Is this possible in C++?</p>\n\n<pre><code>class Structure\n{\n\n};\n\nclass Building : public Structure\n{\npublic:\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; o, const Building &amp;b)\n    {\n        return o &lt;&lt; b.m_windows.size() &lt;&lt; b.m_doors.size();\n    }\nprotected:\n    Windows m_windows;\n    Doors m_doors;\n};\n\nclass Statue : public Structure\n{\npublic:\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; o, const Statue &amp;s)\n    {\n        return o &lt;&lt; s.m_type;\n    }\nprotected:\n    StatueType m_type;\n};\n\nint main(int argc, char* argv[])\n{\n    Structure struct* = new Building();\n    std::cout &lt;&lt; struct &lt;&lt; std::endl;\n    return 0;\n}\n\nError:\nerror: cannot bind 'std::ostream {aka std::basic_ostream&lt;char&gt;}' lvalue to 'std::basic_ostream&lt;char&gt;&amp;&amp;'\n     std::cout &lt;&lt; struct &lt;&lt; std::endl;\n</code></pre>\n\n<p><strong>Edit:</strong></p>\n\n<p>I've isolated the issue in my own code, here is a compilable version (C11). The problem is that I am using further inheritance and the output of my command is:</p>\n\n<pre><code>CORRECT_VALUE&lt;random address&gt;\n8.8.8.80x804c504\n</code></pre>\n\n<p>I'm not sure why it appends that random address?</p>\n\n<p><a href=\"http://pastebin.com/81ubU0yX\" rel=\"nofollow\">http://pastebin.com/81ubU0yX</a></p>\n"}, {"tags": ["c++", "raytracing"], "comments": [{"owner": {"reputation": 571, "user_id": 4096272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345c800d1d42a321a26ce5033e75f437?s=128&d=identicon&r=PG&f=1", "display_name": "Tony J", "link": "https://stackoverflow.com/users/4096272/tony-j"}, "edited": false, "score": 0, "creation_date": 1426703113, "post_id": 29129725, "comment_id": 46485450, "body": "I assume you call delete at some point to free those memory. What OS are you running 32/64bit? Is the exectuable 32/64bit? Any other information you can provide?"}, {"owner": {"reputation": 5071, "user_id": 1124744, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2f7980bcb4c6b1c604cd0f3424f06f84?s=128&d=identicon&r=PG", "display_name": "paulm", "link": "https://stackoverflow.com/users/1124744/paulm"}, "edited": false, "score": 1, "creation_date": 1426703702, "post_id": 29129725, "comment_id": 46485826, "body": "probably you leak them all?"}, {"owner": {"reputation": 414, "user_id": 4369740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465640e769a726efeeb7d16db1b01259?s=128&d=identicon&r=PG&f=1", "display_name": "tipaye", "link": "https://stackoverflow.com/users/4369740/tipaye"}, "edited": false, "score": 0, "creation_date": 1426703811, "post_id": 29129725, "comment_id": 46485895, "body": "Also keep track of the size of listOfPrimitives, if it&#39;s incredibly large just before the crash, you&#39;ll know your program is genuinely using/leaking that memory and it&#39;s not an external problem."}, {"owner": {"reputation": 2903, "user_id": 1363968, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/aead7eb0767fb1643bb7701a5f1c3282?s=128&d=identicon&r=PG&f=1", "display_name": "r123454321", "link": "https://stackoverflow.com/users/1363968/r123454321"}, "edited": false, "score": 0, "creation_date": 1426703976, "post_id": 29129725, "comment_id": 46486006, "body": "Hmmmmm. Okay, so all of the primitives actually SUCCESSFULLY get added to my <code>aggregatePrimitive</code> (one .obj file had like 5000 triangles defined in it.) What happens in my Ray Tracer is that after the shapes are added to the <code>aggregatePrimitive</code>, then there&#39;s the regular ray tracing loop that says <code>for each pixel in image plane, process pixel and find intersection of ray with shapes</code>. It actually GETS to this <code>for</code> loop and processes thousands of pixels before the program crashes. Does this change anything?"}, {"owner": {"reputation": 2903, "user_id": 1363968, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/aead7eb0767fb1643bb7701a5f1c3282?s=128&d=identicon&r=PG&f=1", "display_name": "r123454321", "link": "https://stackoverflow.com/users/1363968/r123454321"}, "edited": false, "score": 0, "creation_date": 1426704068, "post_id": 29129725, "comment_id": 46486057, "body": "Also, right now, after all of the colors of each pixel are committed (and right before I try to write the colors to a file), I call the following loop, which I see in itself has problems:  <code>&#47;&#47; Deallocate memory \t  for (std::vector&lt;GeometricPrimitive*&gt;::size_type i = 0; i &lt; aggregatePrimitive.listOfPrimitives.size(); i++) { \t\t  delete aggregatePrimitive.listOfPrimitives[i]; \t  }</code>."}, {"owner": {"reputation": 2903, "user_id": 1363968, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/aead7eb0767fb1643bb7701a5f1c3282?s=128&d=identicon&r=PG&f=1", "display_name": "r123454321", "link": "https://stackoverflow.com/users/1363968/r123454321"}, "edited": false, "score": 1, "creation_date": 1426704115, "post_id": 29129725, "comment_id": 46486082, "body": "Clearly I don&#39;t delete the <code>Color</code> pointers, the <code>BRDFCoefficients</code> pointer, and the <code>Material</code> pointer, which I should do. However, due to the comment I posted above, is this really the reason my program is crashing?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1426704863, "post_id": 29129725, "comment_id": 46486516, "body": "@RyanYu: You said you get memory exhaustion errors. And, yes, of course if you don&#39;t free resources you will exhaust memory. So that&#39;s why your program crashes..."}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 1, "creation_date": 1426704947, "post_id": 29129725, "comment_id": 46486569, "body": "Don&#39;t use <code>new</code> like this. This isn&#39;t Java."}], "answers": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 2, "last_activity_date": 1426704629, "creation_date": 1426704629, "answer_id": 29130348, "question_id": 29129725, "link": "https://stackoverflow.com/questions/29129725/c-ray-tracer-causing-out-of-memory-errors-due-to-repeated-calls-to-new/29130348#29130348", "title": "C++: Ray Tracer causing out of memory errors -- due to repeated calls to &#39;new&#39;?", "body": "<blockquote>\n  <p>Specifically the repeated calls to new? </p>\n</blockquote>\n\n<p><strong>YES!</strong></p>\n\n<p>You did not free <em>any</em> of those resources.</p>\n\n<p>To me it looks like you should be avoiding <code>new</code> entirely. For example:</p>\n\n<pre><code>Color kaToAdd(kar, kag, kab);\n</code></pre>\n\n<p>No need for dynamic allocation here, surely.</p>\n\n<p>If you <em>know</em> you need dynamic allocation, then fine, but be sure to <code>delete</code> those resources when you're done with them, preferably through a wrapper such as <code>std::unique_ptr</code>.</p>\n"}], "owner": {"reputation": 2903, "user_id": 1363968, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/aead7eb0767fb1643bb7701a5f1c3282?s=128&d=identicon&r=PG&f=1", "display_name": "r123454321", "link": "https://stackoverflow.com/users/1363968/r123454321"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426704629, "creation_date": 1426702669, "question_id": 29129725, "link": "https://stackoverflow.com/questions/29129725/c-ray-tracer-causing-out-of-memory-errors-due-to-repeated-calls-to-new", "title": "C++: Ray Tracer causing out of memory errors -- due to repeated calls to &#39;new&#39;?", "body": "<p>This is a pretty broad question, so I hope it fits the guidelines loosely for S/O questions.</p>\n\n<p>Basically, I'm writing a Ray Tracer that takes input from a scene file. Right now, for each new triangle/sphere defined in my scene file, I do the following in C++ (hopefully the code is self explanatory):</p>\n\n<pre><code>GeometricPrimitive* primitiveToAdd = new GeometricPrimitive();\nTriangle* triangleToAdd = new Triangle(ax, ay, az, bx, by, bz, cx, cy, cz);\nBRDFCoefficients *brdfToAdd = new BRDFCoefficients();\nColor* kaToAdd = new Color(kar, kag, kab);\nColor* kdToAdd = new Color(kdr, kdg, kdb);\nColor* ksToAdd = new Color(ksr, ksg, ksb);\nColor* krToAdd = new Color(krr, krg, krb);\nbrdfToAdd-&gt;ka = *kaToAdd;\nbrdfToAdd-&gt;kd = *kdToAdd;\nbrdfToAdd-&gt;ks = *ksToAdd;\nbrdfToAdd-&gt;kr = *krToAdd;\nbrdfToAdd-&gt;sp = ksp;\nMaterial* materialToAdd = new Material();\nmaterialToAdd-&gt;constantBRDF = *brdfToAdd;\nprimitiveToAdd-&gt;material = materialToAdd;\nprimitiveToAdd-&gt;shape = triangleToAdd;\naggregatePrimitive.addPrimitive(primitiveToAdd);\n</code></pre>\n\n<p>(aggregatePrimitive is a global variable that has a \n<code>std::vector&lt;GeometricPrimitive*&gt;</code> listOfPrimitives;)</p>\n\n<p>The ray tracer works fine on small examples, but when I try to fire up some more complicated examples from an .obj file, my computer runs it for a few minutes and then gets an out-of-memory error. I've also spun up a 60GB RAM EC2 instance and run the ray tracer on that, and it still runs out of memory. </p>\n\n<p>At first I assumed that it was just because the ray tracer was too slow and it was literally taking up too much memory. But could it be something else? Specifically the repeated calls to new? (I'm not exactly sure what the precise consequences of dynamically allocating memory in this situation would be.) Seems a bit fishy that a 60GB RAM EC2 instance wouldn't work...</p>\n\n<p>Again, I realize this is a pretty broad and non-specific question, but any ideas?</p>\n"}, {"tags": ["c++", "windows", "winapi", "windows-shell", "recycle-bin"], "comments": [{"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 1, "creation_date": 1426703240, "post_id": 29129717, "comment_id": 46485542, "body": "I don&#39;t think it&#39;s possible. As far as I know, you&#39;ll need to restore it to its original location, then use (for example) MoveFile or MoveFileEx to move it to where you want it."}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 1, "creation_date": 1426703732, "post_id": 29129717, "comment_id": 46485842, "body": "@JerryCoffin: What if there&#39;s already a file in the original location?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1426719398, "post_id": 29129717, "comment_id": 46493982, "body": "@JerryCoffin: <a href=\"http://blogs.msdn.com/b/oldnewthing/archive/2011/09/01/10204404.aspx\" rel=\"nofollow noreferrer\">it is possible</a> to restore Recycle Bin files to a custom location that is different than the original location."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1426719817, "post_id": 29129717, "comment_id": 46494099, "body": "@RemyLebeau: Ah, cool. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "edited": false, "score": 0, "creation_date": 1426706269, "post_id": 29130600, "comment_id": 46487303, "body": "Good idea. Thanks. I was also thinking, since I technically have a path to the file in the recycle bin (hidden) folder, can I just move it out of there with <code>MoveFileEx</code>?"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "reply_to_user": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "edited": false, "score": 1, "creation_date": 1426707704, "post_id": 29130600, "comment_id": 46488151, "body": "@c00000fd Sure you can, but the recycle bin won&#39;t know you&#39;ve done it, so its internal database will be wrong."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "edited": false, "score": 2, "creation_date": 1426719278, "post_id": 29130600, "comment_id": 46493948, "body": "@c00000fd: This exact scenario is actually covered by Raymond Chen in the following blog article: <a href=\"http://blogs.msdn.com/b/oldnewthing/archive/2011/09/01/10204404.aspx\" rel=\"nofollow noreferrer\">Invoking commands on items in the Recycle Bin</a>. I guess you missed it when reading Raymond&#39;s other Recycle Bin articles that you linked to in your question."}], "owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "is_accepted": false, "score": 2, "last_activity_date": 1426719310, "last_edit_date": 1426719310, "creation_date": 1426705390, "answer_id": 29130600, "question_id": 29129717, "link": "https://stackoverflow.com/questions/29129717/how-to-restore-file-from-the-recycle-bin-to-a-specific-location/29130600#29130600", "title": "How to restore file from the Recycle Bin to a specific location?", "body": "<p>You can do it by simulating drag &amp; drop. Use <code>IShellFolder::GetUIObjectOf()</code> to get an <code>IDataObject</code> interface from the recycle bin, and also to get an <code>IDropTarget</code> interface for your target folder. Then you can call <code>IDropTarget::DragEnter()</code> followed by <code>IDropTarget::Drop()</code> and the file will be moved to your target location.</p>\n"}, {"comments": [{"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "edited": false, "score": 0, "creation_date": 1426744281, "post_id": 29136926, "comment_id": 46500295, "body": "Thanks. I wish I saw it earlier. I went with an old Raymond Chen&#39;s code given in the different answer."}], "owner": {"reputation": 3189, "user_id": 2855440, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/85a3bda48007f819c2c7249535882486?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Anisimov", "link": "https://stackoverflow.com/users/2855440/denis-anisimov"}, "is_accepted": false, "score": 2, "last_activity_date": 1426737092, "creation_date": 1426737092, "answer_id": 29136926, "question_id": 29129717, "link": "https://stackoverflow.com/questions/29129717/how-to-restore-file-from-the-recycle-bin-to-a-specific-location/29136926#29136926", "title": "How to restore file from the Recycle Bin to a specific location?", "body": "<p>Starting from Windows Vista it is possible to use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb775771%28v=vs.85%29.aspx\" rel=\"nofollow\">IFileOperation</a> to restore any object from RecycleBin to any folder. Sample of usage:</p>\n\n<pre><code>procedure RestoreItem(AShellFolder: IShellFolder; AChild: PItemIDList; const ADestFolder: UnicodeString);\nvar\n  Item: IShellItem;\n  DestFolder: IShellItem;\n  FileOperation: IFileOperation;\nbegin\n  OleCheck(SHCreateItemWithParent(nil, AShellFolder, AChild, IShellItem, Item));\n  try\n    OleCheck(SHCreateItemFromParsingName(PWideChar(ADestFolder), nil, IShellItem, DestFolder));\n    try\n      OleCheck(CoCreateInstance(CLSID_FileOperation, nil, CLSCTX_ALL, IFileOperation, FileOperation));\n      try\n        OleCheck(FileOperation.MoveItem(Item, DestFolder, nil, nil));\n        OleCheck(FileOperation.PerformOperations);\n      finally\n        FileOperation := nil;\n      end;\n    finally\n      DestFolder := nil;\n    end;\n  finally\n    Item := nil;\n  end;\nend;\n</code></pre>\n"}], "owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1077, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1426737092, "creation_date": 1426702641, "question_id": 29129717, "link": "https://stackoverflow.com/questions/29129717/how-to-restore-file-from-the-recycle-bin-to-a-specific-location", "title": "How to restore file from the Recycle Bin to a specific location?", "body": "<p>My goal is to restore a specific file from the Recycle Bin to a specified location, i.e. not into its original location. I found <a href=\"http://blogs.msdn.com/b/oldnewthing/archive/2011/08/30/10202076.aspx\" rel=\"nofollow\">this article</a> and also <a href=\"http://blogs.msdn.com/b/oldnewthing/archive/2011/08/31/10203215.aspx\" rel=\"nofollow\">this one</a> that explain how to enumerate files currently in the Recycle Bin. But it doesn't show how to do what I need.</p>\n\n<p>Any idea how to do it?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 2181, "user_id": 4027338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gzGPW.png?s=128&g=1", "display_name": "marsh", "link": "https://stackoverflow.com/users/4027338/marsh"}, "edited": false, "score": 0, "creation_date": 1426702447, "post_id": 29129620, "comment_id": 46485016, "body": "What are you passing in?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1426702490, "post_id": 29129620, "comment_id": 46485047, "body": "If your data structure isn&#39;t sane, there&#39;s no way this will work. Wouldn&#39;t using <code>std::vector</code> save you a lot of pain here? That <code>for (int j{0}; ...</code> notation is downright bizarre, too. Why not <code>int j = 0</code>?"}, {"owner": {"reputation": 703, "user_id": 2850608, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100006061862863/picture?type=large", "display_name": "Andreas Vennstr&#246;m", "link": "https://stackoverflow.com/users/2850608/andreas-vennstr%c3%b6m"}, "edited": false, "score": 0, "creation_date": 1426702552, "post_id": 29129620, "comment_id": 46485088, "body": "You should try debugging. And also post a minimal code sample that reproduces the problem."}, {"owner": {"reputation": 2325, "user_id": 368519, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/10e0e1ea101a80d18edd1de8e68841d1?s=128&d=identicon&r=PG", "display_name": "defube", "link": "https://stackoverflow.com/users/368519/defube"}, "edited": false, "score": 1, "creation_date": 1426702559, "post_id": 29129620, "comment_id": 46485095, "body": "How did you allocate <code>arrayPointer</code>? More code, please..."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 1, "creation_date": 1426702562, "post_id": 29129620, "comment_id": 46485097, "body": "There&#39;s nothing wrong with the code you posted, we need more information."}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 2, "creation_date": 1426702626, "post_id": 29129620, "comment_id": 46485139, "body": "<code>0xcdcdcdcd</code> is a special bit pattern in the MSVC debug heap implementation with which newly allocated memory is overwritten. It indicates that you&#39;re trying to use uninitialized memory as a pointer and dereference it, so chances are that the inner arrays of your 2D array are not all properly allocated/put into the outer array."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1426702666, "post_id": 29129620, "comment_id": 46485169, "body": "Here is more info on 0xcdcdcdcd: <a href=\"http://stackoverflow.com/a/127404/487892\">stackoverflow.com/a/127404/487892</a>"}, {"owner": {"reputation": 309, "user_id": 4668612, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/dyXl6.png?s=128&g=1", "display_name": "small-j", "link": "https://stackoverflow.com/users/4668612/small-j"}, "edited": false, "score": 0, "creation_date": 1426703589, "post_id": 29129620, "comment_id": 46485766, "body": "Added the allocation code"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1426703694, "post_id": 29129620, "comment_id": 46485824, "body": "i wonder why you you this fancy curly brackets everywhere and at the same time a &quot;dynamically allocated 2d array&quot; instead of a standard container. Looks like an anachronism to me :P"}, {"owner": {"reputation": 309, "user_id": 4668612, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/dyXl6.png?s=128&g=1", "display_name": "small-j", "link": "https://stackoverflow.com/users/4668612/small-j"}, "edited": false, "score": 0, "creation_date": 1426705055, "post_id": 29129620, "comment_id": 46486639, "body": "it&#39;s just a college assignment,need to follow the task"}], "answers": [{"owner": {"reputation": 5257, "user_id": 3946766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a53461a9198ab5365f72c744a83ff3b?s=128&d=identicon&r=PG", "display_name": "matsjoyce", "link": "https://stackoverflow.com/users/3946766/matsjoyce"}, "is_accepted": true, "score": 2, "last_activity_date": 1426703769, "creation_date": 1426703769, "answer_id": 29130090, "question_id": 29129620, "link": "https://stackoverflow.com/questions/29129620/c-2d-array-runtime-error/29130090#29130090", "title": "C++ 2d array runtime error", "body": "<p>Your initialisation problem is here:</p>\n\n<pre><code>for (int i{ 0 }; i &lt; x; i++){\n    theMatrix[x] = new int[x];\n}\n</code></pre>\n\n<p>You are using <code>x</code> as the array index, while your (probably) mean <code>i</code>. Your current code just creates an array for the last element, <code>x</code> times. Change it to:</p>\n\n<pre><code>for (int i{ 0 }; i &lt; x; i++){\n    theMatrix[i] = new int[x];\n}\n</code></pre>\n\n<p>You may also want to adjust this code:</p>\n\n<pre><code>for (int i{ 0 }; i &lt; x; i++) {\n    for (int j{ 0 }; j &lt; x; j++) {\n        std::cin &gt;&gt; theMatrix[x][x];\n    }\n}\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>for (int i{ 0 }; i &lt; x; i++) {\n    for (int j{ 0 }; j &lt; x; j++) {\n        std::cin &gt;&gt; theMatrix[i][j];\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 309, "user_id": 4668612, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/dyXl6.png?s=128&g=1", "display_name": "small-j", "link": "https://stackoverflow.com/users/4668612/small-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 0, "accepted_answer_id": 29130090, "answer_count": 1, "score": -1, "last_activity_date": 1426703769, "creation_date": 1426702357, "last_edit_date": 1426703516, "question_id": 29129620, "link": "https://stackoverflow.com/questions/29129620/c-2d-array-runtime-error", "title": "C++ 2d array runtime error", "body": "<p>doing some assignment, here's a function to count negative numbers in a dynamically allocated 2D array:</p>\n\n<pre><code> void numberOfNegs(int** arrayPointer, int n) {\n    int counter{ 0 };\n    for (int i{ 0 }; i &lt; n; i++){\n        for (int j{ 0 }; j &lt; n; j++){\n            if (arrayPointer[i][j] &lt; 0) {\n                counter++;\n            }\n        }\n    }\n</code></pre>\n\n<p>Seems legit to me, but the debugger throws this error:</p>\n\n<blockquote>\n  <p>Unhandled exception at 0x00C25D9A in *.exe: 0xC0000005: Access\n  violation reading location 0xCDCDCDCD.</p>\n</blockquote>\n\n<p>Please, help</p>\n\n<p>Here's more code on how I casted it</p>\n\n<pre><code>    std::cin &gt;&gt; x;\n\nint** theMatrix = new int*[x];\nfor (int i{ 0 }; i &lt; x; i++){\n    theMatrix[x] = new int[x];\n}\n\nstd::cout &lt;&lt; \"Please enter a matrix \" &lt;&lt; x &lt;&lt; std::endl;\n\nfor (int i{ 0 }; i &lt; x; i++) {\n    for (int j{ 0 }; j &lt; x; j++) {\n        std::cin &gt;&gt; theMatrix[x][x];\n    }\n}\n\n numberOfNegs(theMatrix, x)\n</code></pre>\n"}, {"tags": ["c++", "c", "gcc", "instrumentation"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1426702579, "post_id": 29129604, "comment_id": 46485106, "body": "This isn&#39;t a &quot;how to&quot; site."}, {"owner": {"reputation": 772, "user_id": 2710153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c56e81eb60ba0eda7e002c6536689f5?s=128&d=identicon&r=PG", "display_name": "danyhow", "link": "https://stackoverflow.com/users/2710153/danyhow"}, "edited": false, "score": 0, "creation_date": 1426707733, "post_id": 29129604, "comment_id": 46488166, "body": "That is possible with LLVM, so it should also be possible with gcc (for example, the -fgnu-tm instruments loads and stores for its own needs). Depending on what your goals is, an alternative could be to use dynamic binary instrumentation with Intel Pin or Dyninst. That might be faster to prototype something."}, {"owner": {"user_type": "does_not_exist", "display_name": "user90843"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1430639565, "post_id": 29129604, "comment_id": 48141069, "body": "@WeatherVane, what kind of site is it? and what isn&#39;t a &quot;how to&quot;?"}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "edited": false, "score": 0, "creation_date": 1475087149, "post_id": 29129604, "comment_id": 66806153, "body": "I found <a href=\"http://linuxgazette.net/151/melinte.html\" rel=\"nofollow noreferrer\">this guy&#39;s solution</a> that, using the <code>-finstrument-functions</code>, extracts the arguments and return values."}], "owner": {"reputation": 736, "user_id": 1304608, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2813acd7073e52836114ec1d869b00bd?s=128&d=identicon&r=PG&f=1", "display_name": "Yogi Joshi", "link": "https://stackoverflow.com/users/1304608/yogi-joshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1426702298, "creation_date": 1426702298, "question_id": 29129604, "link": "https://stackoverflow.com/questions/29129604/instrumenting-for-value-changes-of-variables-using-gcc", "title": "Instrumenting for value changes of variables using gcc", "body": "<p>I found that we could use <code>-finstrument-functions</code> in gcc for instrumentation to find function call sequences. Is there a way to do instrumentation (using gcc options or plugins) similarly to find out the changes in the values of individual data variables as well?</p>\n"}, {"tags": ["c++", "linker", "makefile", "g++", "shared-libraries"], "answers": [{"comments": [{"owner": {"reputation": 333, "user_id": 3578051, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f540ffe2a0e304d04af708ef827853f6?s=128&d=identicon&r=PG&f=1", "display_name": "Ryno", "link": "https://stackoverflow.com/users/3578051/ryno"}, "edited": false, "score": 0, "creation_date": 1426702536, "post_id": 29129624, "comment_id": 46485080, "body": "Damn thanks, works perfectly! I thought the headers would be somehow included in the compiled library, i didn&#39;t think you must have them anyway"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 333, "user_id": 3578051, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f540ffe2a0e304d04af708ef827853f6?s=128&d=identicon&r=PG&f=1", "display_name": "Ryno", "link": "https://stackoverflow.com/users/3578051/ryno"}, "edited": false, "score": 0, "creation_date": 1426702831, "post_id": 29129624, "comment_id": 46485279, "body": "@user3578051 If you <code>#include</code> them in <code>main.cpp</code>, you need this to make them accessible for the preprocessor. The MSVC compiler provides an <code>#import</code> preprocessor directive that automatically resolves this. Maybe hence your confusion comes from."}], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 1, "last_activity_date": 1426703052, "last_edit_date": 1426703052, "creation_date": 1426702366, "answer_id": 29129624, "question_id": 29129531, "link": "https://stackoverflow.com/questions/29129531/cannot-import-shared-library-with-g/29129624#29129624", "title": "Cannot import shared library with g++", "body": "<blockquote>\n  <p><em>\"Now in this main i imported one of the lib headers, something like: ...\"</em></p>\n</blockquote>\n\n<p>You also need to add the <code>-I</code> option to compile <code>main.cpp</code> in this case:</p>\n\n<pre><code>g++ main.cpp -I\"HeadersFolder\" -L. -lmylib\n</code></pre>\n\n<p>Also you should use</p>\n\n<pre><code>#include \"Header.hpp\" // Note the quotes \"\n</code></pre>\n\n<p>the angle brackets (<code>&lt;&gt;</code>) are for including system headers (that could possibly collide with your own when the preprocessor evaluates them).</p>\n"}], "owner": {"reputation": 333, "user_id": 3578051, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f540ffe2a0e304d04af708ef827853f6?s=128&d=identicon&r=PG&f=1", "display_name": "Ryno", "link": "https://stackoverflow.com/users/3578051/ryno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 339, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1426703052, "creation_date": 1426702075, "last_edit_date": 1426702565, "question_id": 29129531, "link": "https://stackoverflow.com/questions/29129531/cannot-import-shared-library-with-g", "title": "Cannot import shared library with g++", "body": "<p>i made a shared library, linked it to a main program, but this main program cannot see any of the shared library methods, nor import it's headers. \nThis is what i did:</p>\n\n<ol>\n<li>I compiled each cpp file of the library in position independent code</li>\n</ol>\n\n<blockquote>\n<pre><code>g++ -c -fPIC -o objname.o objname.cpp -I\"HeadersFolder\"\n</code></pre>\n</blockquote>\n\n<ol start=\"2\">\n<li>I created the shader library, and it is correctly created with the\nright name in my main directory</li>\n</ol>\n\n<blockquote>\n<pre><code>g++ -shared -o libmylib.so obj1.o obj2.o etc.. etc..\n</code></pre>\n</blockquote>\n\n<ol start=\"3\">\n<li>I'm trying to compile a simple main with:</li>\n</ol>\n\n<blockquote>\n<pre><code>g++ main.cpp -L. -lmylib \n</code></pre>\n</blockquote>\n\n<p>Now in this  main i imported one of the lib headers, something like:</p>\n\n<pre><code>#include &lt;Header.hpp&gt;\n</code></pre>\n\n<p>And g++ tells me no such file or directory.</p>\n"}, {"tags": ["c++", "gcc", "boost"], "answers": [{"owner": {"reputation": 1832, "user_id": 3602072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0cfd32064c69064e62755e8fb47b8fb?s=128&d=identicon&r=PG", "display_name": "ezaquarii", "link": "https://stackoverflow.com/users/3602072/ezaquarii"}, "is_accepted": true, "score": 3, "last_activity_date": 1426720429, "creation_date": 1426720429, "answer_id": 29134425, "question_id": 29129518, "link": "https://stackoverflow.com/questions/29129518/undefined-symbol-in-libboost/29134425#29134425", "title": "Undefined symbol in libboost", "body": "<p><code>PyUnicode_AsUTF8String</code> function is part of python runtime. You should link your extension to python library too, by providing proper linker options to GCC. Please note that there are differences between python 3 and python 2.</p>\n"}], "owner": {"reputation": 77, "user_id": 1085593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/605b0ee5cce86551076eb218d376c33e?s=128&d=identicon&r=PG", "display_name": "Fedor Nikitin", "link": "https://stackoverflow.com/users/1085593/fedor-nikitin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1703, "favorite_count": 0, "accepted_answer_id": 29134425, "answer_count": 1, "score": 3, "last_activity_date": 1426720429, "creation_date": 1426702037, "question_id": 29129518, "link": "https://stackoverflow.com/questions/29129518/undefined-symbol-in-libboost", "title": "Undefined symbol in libboost", "body": "<p>I see the following error</p>\n\n<pre><code>ImportError: /usr/local/lib/libboost_python.so.1.57.0: \nundefined symbol: PyUnicode_AsUTF8String\n</code></pre>\n\n<p>In .so file I see the following symbol undefined</p>\n\n<pre><code>@Ubuntu-1204-precise-64-minimal:/usr/local/lib$ nm libboost_python.so.1.57.0\n| grep PyUnicode_AsUTF8String\n             U PyUnicode_AsUTF8String\n</code></pre>\n\n<p>What could be the reason for this symbol to be undefined?</p>\n\n<p>I checked also ldd and all libraries are in standard places.</p>\n"}, {"tags": ["c++", "c++11", "stl", "const-correctness", "const-cast"], "comments": [{"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 3, "creation_date": 1426702249, "post_id": 29129478, "comment_id": 46484900, "body": "I can see why you may want to cast <code>std::vector&lt;Point*&gt;</code> to <code>std::vector&lt;const Point*&gt;</code>, but the other way round just looks dodgy. What&#39;s the point of const if you are just going to ignore it?"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1426702326, "post_id": 29129478, "comment_id": 46484947, "body": "I can imagine that there are legitimate use cases, but in order to suggest a solution I&#39;d have to see what the OP is really trying to do."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 3, "creation_date": 1426702405, "post_id": 29129478, "comment_id": 46484990, "body": "@NeilKirk even that way is iffy, as if you add a <code>const Point*</code> to the cast vector, you have violated const-correctness as now you have a <code>Point*</code> in the original vector.  It is the mutable square-is-not-a-rectangle problem.  If the OP has it backwards, a const-correct <i>view</i> of the contents of a vector can be created."}, {"owner": {"reputation": 7526, "user_id": 4108376, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/163807162a115b27e50f5f5f2b90de26?s=128&d=identicon&r=PG&f=1", "display_name": "tmlen", "link": "https://stackoverflow.com/users/4108376/tmlen"}, "reply_to_user": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1426702535, "post_id": 29129478, "comment_id": 46485078, "body": "@Neil Kirk: It is an argument of a callback function. The class is itself const-correct, so the const member function (that calls the callback) can only have const access to the object&#39;s data. But instead of copying the code to make a non-const member function with the same algorithm, I tried to make the a-const version which invokes the const one, and passed the callbacks through an intermediary const-cast."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1426702567, "post_id": 29129478, "comment_id": 46485099, "body": "@Yakk What&#39;s wrong with a <code>point *</code> in a <code>const point *</code> data structure?"}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 4, "creation_date": 1426702612, "post_id": 29129478, "comment_id": 46485130, "body": "@tmlen So your real question is how to avoid duplicating code when creating a const and non-const version of the same function?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 1, "creation_date": 1426702627, "post_id": 29129478, "comment_id": 46485140, "body": "@NeilKirk it is a <code>const point*</code> in the <code>point *</code> data structure.  You add a <code>const point*</code> to the <code>std::vector&lt; const point *&gt;&amp;</code> cast of the <code>std::vector&lt; point * &gt;&amp;</code>, and it arrives in the <code>std::vector&lt; point* &gt;</code> illegally."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1426705021, "post_id": 29129478, "comment_id": 46486615, "body": "... why are you passing a <code>std::vector</code> at all?  Is the callback intended to change the size of the <code>std::vector</code>, or do they just want the list of elements?"}, {"owner": {"reputation": 7526, "user_id": 4108376, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/163807162a115b27e50f5f5f2b90de26?s=128&d=identicon&r=PG&f=1", "display_name": "tmlen", "link": "https://stackoverflow.com/users/4108376/tmlen"}, "edited": false, "score": 0, "creation_date": 1426705887, "post_id": 29129478, "comment_id": 46487118, "body": "I&#39;ve been changing it to invoke the callback for each element of the vector separately, this is also more efficient in this case (no memory allocation, parallelizable). But that still needs a <code>const_cast</code> in the non-const function."}], "answers": [{"comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1426705077, "post_id": 29130318, "comment_id": 46486659, "body": "To enforce mutability (or else compilation error) one might use <code>std::remove_const</code>, I think it was called. But I leave that to the reader. Whether to do it is an engineering gut-feeling decision."}], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": false, "score": 1, "last_activity_date": 1426704558, "creation_date": 1426704558, "answer_id": 29130318, "question_id": 29129478, "link": "https://stackoverflow.com/questions/29129478/const-casting-element-type-of-container/29130318#29130318", "title": "const_casting element type of container", "body": "<p>Except that <code>std::vector</code> is a standard library class, the types <code>vector&lt;Foo*&gt;</code> and <code>vector&lt;Foo const*&gt;</code> might be specialized differently and have different sizes. Thus while a <code>reinterpret_cast</code> will usually work, it's formally Undefined Behavior. And anyway then need for <code>reinterpret_cast</code> (except in some C style contexts such as in Windows API level programming) is generally a strong signal that one is heading up the wrong alley.</p>\n\n<p>In the case where one has non-trivial code of a method that one wants in both <code>const</code> and non-<code>const</code> versions, one solution is to defer to an ordinary function, e.g. a <code>static</code> member function.</p>\n\n<p>To do that it's convenient to have some support machinery:</p>\n\n<pre><code>struct Mutable{};\nstruct Const{};\n\ntemplate&lt; class Constness, class Type &gt;\nstruct With_t;\n\ntemplate&lt; class Type &gt; struct With_t&lt;Mutable, Type&gt;{ using T = Type; };\ntemplate&lt; class Type &gt; struct With_t&lt;Const, Type&gt;{ using T = Type const; };\n\ntemplate&lt; class Constness, class Type &gt;\nusing With = typename With_t&lt;Constness, Type&gt;::T;\n</code></pre>\n\n<p>Then you can write classes such as this:</p>\n\n<pre><code>class Foo\n{\nprivate:\n    int     something_;\n\n    template&lt; class Constness &gt;\n    static auto p( With&lt;Constness, Foo&gt;* that )\n        -&gt; With&lt;Constness, int&gt;*\n    { return &amp;that-&gt;something_; }   // In the real world some non-trivial code here.\n\npublic:\n    auto p() -&gt; int* { return p&lt;Mutable&gt;( this ); }\n    auto p() const -&gt; int const* { return p&lt;Const&gt;( this ); }\n\n    Foo( int const value ): something_( value ) {}\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "edited": false, "score": 0, "creation_date": 1426708086, "post_id": 29130892, "comment_id": 46488368, "body": "We really need a better way to templatize member functions on the type/cv-qualifiers/value category of <code>*this</code> than by forwarding to a static member template."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "edited": false, "score": 0, "creation_date": 1426708928, "post_id": 29130892, "comment_id": 46488895, "body": "@Casey What, 3*2*2 is too many manual overloads for ya?  I really should take <code>Self</code> by forwarding <code>&amp;&amp;</code> reference, to allow <code>const&amp;</code> to be distinguished from <code>const&amp;&amp;</code> as you have mentioned.  It makes <code>as_const_as_t</code> slightly more annoying."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1426713884, "post_id": 29130892, "comment_id": 46491729, "body": "I used to point out this possibility, with a constness transfer. But I think now it&#39;s ungood to have the <code>Self</code> type as a template parameter, and that it&#39;s generally better to make things explicit. Hence the more advanced :) (in the sense of later version, evolved) shown in my answer posted before this."}], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 2, "last_activity_date": 1426706424, "creation_date": 1426706424, "answer_id": 29130892, "question_id": 29129478, "link": "https://stackoverflow.com/questions/29129478/const-casting-element-type-of-container/29130892#29130892", "title": "const_casting element type of container", "body": "<pre><code>template&lt;class A, class B&gt;\nstruct as_const_as { using type=B; }\ntemplate&lt;class A, class B&gt;\nstruct as_const_as&lt;const A, B&gt; { using type=const B; }\ntemplate&lt;class A, class B&gt;\nusing as_const_as_t=typename as_const_as&lt;A,B&gt;::type;\n\nprivate:\n  template&lt;class Self, class Callback&gt;\n  static void algo(Self* self, Callback callback) {\n    // code using self instead of this\n    using int_t = as_const_as_t&lt;Self, int&gt;; // const or not depending on self\n  }\npublic:\n  template&lt;class Callback&gt;\n  void algo(Callback callback) {\n    algo( this, callback );\n  }\n  template&lt;class Callback&gt;\n  void algo(Callback callback) const {\n    algo( this, callback );\n  }\n</code></pre>\n\n<p>now we have two external methods <code>algo</code>, and one <code>static</code> method that takes its own type as a template type that can be <code>const</code> or not.</p>\n"}], "owner": {"reputation": 7526, "user_id": 4108376, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/163807162a115b27e50f5f5f2b90de26?s=128&d=identicon&r=PG&f=1", "display_name": "tmlen", "link": "https://stackoverflow.com/users/4108376/tmlen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 29130892, "answer_count": 2, "score": 3, "last_activity_date": 1426706424, "creation_date": 1426701907, "last_edit_date": 1426703374, "question_id": 29129478, "link": "https://stackoverflow.com/questions/29129478/const-casting-element-type-of-container", "title": "const_casting element type of container", "body": "<p>Is there an efficient and safe way to cast a <code>std::vector&lt;const Point*&gt;&amp;</code> to <code>std::vector&lt;Point*&gt;&amp;</code>?</p>\n\n<p>Doing <code>reinterpret_cast&lt;std::vector&lt;Point*&gt;&amp;&gt;(constvec)</code> would probably work correctly but is probably undefined behavior.</p>\n\n<p>The only standard option seems to be constructing a new <code>std::vector&lt;Point*&gt;</code> and adding each <code>const_cast</code>ed element manually, but then the program would needlessly allocate memory for it.</p>\n\n<p><strong>Edit:</strong>\nThe program looks like this (simplified):</p>\n\n<pre><code>class A {\nprivate:\n    int some_data[10];\n\npublic:\n    template&lt;typename Callback&gt;\n    void algo(Callback callback) const {\n          std::vector&lt;const int*&gt; values { &amp;some_data[0], &amp;some_data[5], &amp;some_data[3] };\n          // Class is const-correct internally, so only have const access to data here.\n          // Making it mutable is not easily possible in the real code,\n          // as there are constructs similar to iterator/const_iterator in the class hierarchy.\n          callback(values);\n    }\n\n    template&lt;typename Callback&gt;\n    void algo(Callback callback) {\n         // Hack to avoid copying the entire algorithm implementation\n         auto cb = [&amp;](const std::vector&lt;const int*&gt;&amp; vec) {\n             callback(....); // &lt;--- should be const std::vector&lt;int*&gt;\n         }\n         static_cast&lt;const A*&gt;(this)-&gt;algo(cb);\n    }\n};\n</code></pre>\n\n<p>Another option would be to implement the algorithm in the non-const variant, and then <code>const_cast&lt;A&amp;&gt;(*this).algo()</code> for the const variant. But this seems more dangerous since the <code>A</code> object might have been created as const (<code>const A a;</code>) and then it is UB.</p>\n"}, {"tags": ["c++", "physics", "game-physics", "sdl-2", "softbody"], "comments": [{"owner": {"reputation": 2325, "user_id": 368519, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/10e0e1ea101a80d18edd1de8e68841d1?s=128&d=identicon&r=PG", "display_name": "defube", "link": "https://stackoverflow.com/users/368519/defube"}, "edited": false, "score": 1, "creation_date": 1426702768, "post_id": 29129467, "comment_id": 46485235, "body": "What does the body look like at rest? Also, you ought to consider wrapping the vector algebra with appropriate operators; that will help to make higher level mistakes easier to spot..."}, {"owner": {"reputation": 775, "user_id": 3127633, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5Xo86.jpg?s=128&g=1", "display_name": "AvZ", "link": "https://stackoverflow.com/users/3127633/avz"}, "reply_to_user": {"reputation": 2325, "user_id": 368519, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/10e0e1ea101a80d18edd1de8e68841d1?s=128&d=identicon&r=PG", "display_name": "defube", "link": "https://stackoverflow.com/users/368519/defube"}, "edited": false, "score": 0, "creation_date": 1426702904, "post_id": 29129467, "comment_id": 46485322, "body": "@defube The body is a collection of points that is inputted by the user. I inputted a collection of a few points roughly in the shape of ellipse."}, {"owner": {"reputation": 2325, "user_id": 368519, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/10e0e1ea101a80d18edd1de8e68841d1?s=128&d=identicon&r=PG", "display_name": "defube", "link": "https://stackoverflow.com/users/368519/defube"}, "edited": false, "score": 0, "creation_date": 1426703206, "post_id": 29129467, "comment_id": 46485523, "body": "For this to work, the body needs a &quot;rest shape&quot; from which the length of each spring is calculated. If you are allowing a random point cloud, you could connect all approximate 1-neighbors of points with springs. EDIT: Each spring needs its own length!"}, {"owner": {"reputation": 775, "user_id": 3127633, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5Xo86.jpg?s=128&g=1", "display_name": "AvZ", "link": "https://stackoverflow.com/users/3127633/avz"}, "reply_to_user": {"reputation": 2325, "user_id": 368519, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/10e0e1ea101a80d18edd1de8e68841d1?s=128&d=identicon&r=PG", "display_name": "defube", "link": "https://stackoverflow.com/users/368519/defube"}, "edited": false, "score": 0, "creation_date": 1426703529, "post_id": 29129467, "comment_id": 46485734, "body": "@defube I input the shape in roughly a regular polygon manner to ensure that it is not deformed too much initially. I think it should work even if it was not perfectly inputted as it should get it&#39;s regular polygon shape back after being deformed (because it&#39;s a soft body). I tried using only the two connected neighbours directly next to the point but it still got crumpled"}, {"owner": {"reputation": 775, "user_id": 3127633, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5Xo86.jpg?s=128&g=1", "display_name": "AvZ", "link": "https://stackoverflow.com/users/3127633/avz"}, "reply_to_user": {"reputation": 2325, "user_id": 368519, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/10e0e1ea101a80d18edd1de8e68841d1?s=128&d=identicon&r=PG", "display_name": "defube", "link": "https://stackoverflow.com/users/368519/defube"}, "edited": false, "score": 0, "creation_date": 1426703586, "post_id": 29129467, "comment_id": 46485762, "body": "@defube Each spring has the same length <code>natural_length</code>"}, {"owner": {"reputation": 2325, "user_id": 368519, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/10e0e1ea101a80d18edd1de8e68841d1?s=128&d=identicon&r=PG", "display_name": "defube", "link": "https://stackoverflow.com/users/368519/defube"}, "edited": false, "score": 0, "creation_date": 1426703611, "post_id": 29129467, "comment_id": 46485780, "body": "The single length parameter is the problem, which I&#39;ll explain in my answer."}], "answers": [{"comments": [{"owner": {"reputation": 775, "user_id": 3127633, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5Xo86.jpg?s=128&g=1", "display_name": "AvZ", "link": "https://stackoverflow.com/users/3127633/avz"}, "edited": false, "score": 0, "creation_date": 1426704823, "post_id": 29130270, "comment_id": 46486488, "body": "How do I store the rest lengths between 2 points? The number of points will be determined by the user&#39;s input during runtime. Also, why does the object get dragged to the top-left?"}, {"owner": {"reputation": 2325, "user_id": 368519, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/10e0e1ea101a80d18edd1de8e68841d1?s=128&d=identicon&r=PG", "display_name": "defube", "link": "https://stackoverflow.com/users/368519/defube"}, "reply_to_user": {"reputation": 775, "user_id": 3127633, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5Xo86.jpg?s=128&g=1", "display_name": "AvZ", "link": "https://stackoverflow.com/users/3127633/avz"}, "edited": false, "score": 1, "creation_date": 1426705130, "post_id": 29130270, "comment_id": 46486692, "body": "Use the distance between them. You&#39;ll need a separate collection of spring structures; each one stores the indices of its endpoints and its length. When the body is updated, the simplest thing to do would be to add one new spring for each existing point, all connected to the new point (insert the new point first to get its index, then construct the new springs)."}, {"owner": {"reputation": 775, "user_id": 3127633, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5Xo86.jpg?s=128&g=1", "display_name": "AvZ", "link": "https://stackoverflow.com/users/3127633/avz"}, "edited": false, "score": 0, "creation_date": 1426705545, "post_id": 29130270, "comment_id": 46486944, "body": "Say, I wanted to refer to springs between two points in <code>soft_body</code> with indices <code>i</code> and <code>j</code>. How would I get it? If you could induct it into your answer, it would help very much. Thanks"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1426705712, "post_id": 29130270, "comment_id": 46487028, "body": "<code>unordered_map&lt;pair&lt;int,int&gt;,spring_type&gt; springmap;</code> and then <code>spring_type&amp; spring = springmap[{i,j}];</code>?"}, {"owner": {"reputation": 775, "user_id": 3127633, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5Xo86.jpg?s=128&g=1", "display_name": "AvZ", "link": "https://stackoverflow.com/users/3127633/avz"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1426705898, "post_id": 29130270, "comment_id": 46487123, "body": "@MooingDuck Ah, I didn&#39;t know about <code>unordered_map</code>. They seem perfect for this application. Thanks."}, {"owner": {"reputation": 775, "user_id": 3127633, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5Xo86.jpg?s=128&g=1", "display_name": "AvZ", "link": "https://stackoverflow.com/users/3127633/avz"}, "edited": false, "score": 0, "creation_date": 1426705977, "post_id": 29130270, "comment_id": 46487158, "body": "@defube I divided the lengths by hundred to obtain the screen as 5 meter by 5 meter in physical terms as the window was 500x500. Why will it be bad?"}, {"owner": {"reputation": 2325, "user_id": 368519, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/10e0e1ea101a80d18edd1de8e68841d1?s=128&d=identicon&r=PG", "display_name": "defube", "link": "https://stackoverflow.com/users/368519/defube"}, "reply_to_user": {"reputation": 775, "user_id": 3127633, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5Xo86.jpg?s=128&g=1", "display_name": "AvZ", "link": "https://stackoverflow.com/users/3127633/avz"}, "edited": false, "score": 1, "creation_date": 1426706083, "post_id": 29130270, "comment_id": 46487206, "body": "@AvZ Perform the simulation in an abstract model space (map cursor to model space before adding a point), or scale the lengths before storing them. The point here is to keep the code as simple as possible (not letting details about the screen resolution sneak into the simulation code)."}, {"owner": {"reputation": 775, "user_id": 3127633, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5Xo86.jpg?s=128&g=1", "display_name": "AvZ", "link": "https://stackoverflow.com/users/3127633/avz"}, "edited": false, "score": 0, "creation_date": 1426706230, "post_id": 29130270, "comment_id": 46487278, "body": "@defube I put it so the screen would be scaled to 1 meter per 100 pixels. This way I would be allowed to put in constants in SI units."}, {"owner": {"reputation": 2325, "user_id": 368519, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/10e0e1ea101a80d18edd1de8e68841d1?s=128&d=identicon&r=PG", "display_name": "defube", "link": "https://stackoverflow.com/users/368519/defube"}, "reply_to_user": {"reputation": 775, "user_id": 3127633, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5Xo86.jpg?s=128&g=1", "display_name": "AvZ", "link": "https://stackoverflow.com/users/3127633/avz"}, "edited": false, "score": 1, "creation_date": 1426706399, "post_id": 29130270, "comment_id": 46487377, "body": "@AvZ Don&#39;t worry about the units or scale when working on the simulation code. Screen space coordinates can be scaled using a separate transformation."}, {"owner": {"reputation": 775, "user_id": 3127633, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5Xo86.jpg?s=128&g=1", "display_name": "AvZ", "link": "https://stackoverflow.com/users/3127633/avz"}, "edited": false, "score": 0, "creation_date": 1426706527, "post_id": 29130270, "comment_id": 46487463, "body": "@defube Okay thanks. I will accept your answer. I will try your suggestions tomorrow as it is almost 1AM here."}, {"owner": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "edited": false, "score": 1, "creation_date": 1426712803, "post_id": 29130270, "comment_id": 46491150, "body": "I&#39;d like to add a strong reinforcement to the principle &quot;first calculate all forces, then update velocities and positions&quot;. You might even work some Verlet or Leapfrog mechanism into this. The point being, the forces depend on the position. Updating some positions while still computing forces introduces an unphysical bias towards the evaluation order that is responsible for the observed drift."}, {"owner": {"reputation": 775, "user_id": 3127633, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5Xo86.jpg?s=128&g=1", "display_name": "AvZ", "link": "https://stackoverflow.com/users/3127633/avz"}, "reply_to_user": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "edited": false, "score": 0, "creation_date": 1426742887, "post_id": 29130270, "comment_id": 46499868, "body": "@LutzL That is exactly what I did. I used the <code>soft_body_copy</code> for this purpose."}, {"owner": {"reputation": 775, "user_id": 3127633, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5Xo86.jpg?s=128&g=1", "display_name": "AvZ", "link": "https://stackoverflow.com/users/3127633/avz"}, "edited": false, "score": 0, "creation_date": 1426857407, "post_id": 29130270, "comment_id": 46553417, "body": "Okay, this I tried everything you said. Still doesn&#39;t work. Something else is up."}, {"owner": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "reply_to_user": {"reputation": 775, "user_id": 3127633, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5Xo86.jpg?s=128&g=1", "display_name": "AvZ", "link": "https://stackoverflow.com/users/3127633/avz"}, "edited": false, "score": 0, "creation_date": 1426927776, "post_id": 29130270, "comment_id": 46578148, "body": "@AvZ: Your <code>_copy</code> structures do not really help. The velocity contribution to [1] from the interaction of [1] and [2] gets added again during the interaction update of [1] and [3], then again for the interaction of [1] and [4]... and then gets doubles while computing the interaction of [2] and [1], then [3] and [1]... While the interaction of the last two points gets only added twice. So the principle remains: First compute all the force terms. Then, with the interactions out of the way, the velocity and position updates can be computed in one loop."}], "owner": {"reputation": 2325, "user_id": 368519, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/10e0e1ea101a80d18edd1de8e68841d1?s=128&d=identicon&r=PG", "display_name": "defube", "link": "https://stackoverflow.com/users/368519/defube"}, "is_accepted": false, "score": 2, "last_activity_date": 1426873068, "last_edit_date": 1426873068, "creation_date": 1426704386, "answer_id": 29130270, "question_id": 29129467, "link": "https://stackoverflow.com/questions/29129467/soft-body-engine-in-c/29130270#29130270", "title": "Soft body engine in C++", "body": "<p>Spring-based soft body simulation requires a \"rest configuration\", wherein without gravity or other external forces, the body will remain internally motionless.</p>\n\n<p>Each spring in the simulation needs its own length. A shared <code>natural_length</code> will cause springs to exert forces within the body where the input separation between connected points is different, which is what appears to be causing the problems you describe.</p>\n\n<p>A typical approach to generate a soft-body (or \"point blob\") out of a set of points looks like this:</p>\n\n<ul>\n<li>Generate the Delaunay Triangulation (or Tetrahedralization, in 3D) of the point set.</li>\n<li>Create springs on every edge of the triangulation, using the length of the edge as the spring's rest length.</li>\n<li>Simulate with \"gravity\" and other external forces!</li>\n</ul>\n\n<p>For simplicity, you can just connect all pairs of points, rather than generating a triangulation.</p>\n\n<p>The simulation itself can be performed in three steps:</p>\n\n<ul>\n<li>Clear vertex force accumulators</li>\n<li>Add spring forces to their connected vertices</li>\n<li>Update the velocity and position of each vertex</li>\n</ul>\n\n<p>In the spirit of the code you've posted, a <code>Spring</code> might look like:</p>\n\n<pre><code>struct Spring\n{\n    int point_index[2];\n    float rest_length;\n};\n</code></pre>\n\n<p><strong>ASIDE</strong></p>\n\n<p>In your code, you can replace <code>t = atan2(d.y, d.x)</code> and the following <code>sin(t)</code> <code>cos(t)</code> with a unit-length image of <code>d</code>:</p>\n\n<pre><code>float mag_d = magnitude(d); // should not become negative...\nfloat r = (0.0f != mag_d) ? 1.0f/mag_d : 0.0f;\nVector d_hat{d.x*r, d.y*r};\nfloat w = k * (mag_d - spring[i].rest_length);\nvelocity_copy[i].x += w*d_hat.x;\nvelocity_copy[i].y += w*d_hat.y;\n</code></pre>\n\n<p>Not completely optimized, but just a little more stable.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I've also noticed you were scaling the rest length (dividing it by 100). Don't do that.</p>\n\n<p><strong>ANOTHER EDIT</strong></p>\n\n<p>Change this:</p>\n\n<pre><code>    }\n    soft_body=soft_body_copy;\n    velocity=velocity_copy;\n}\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>    }\n}\nsoft_body = move(soft_body_copy);\nvelocity = move(velocity_copy);\n</code></pre>\n\n<p>You were changing vertex positions while calculating forces.</p>\n"}], "owner": {"reputation": 775, "user_id": 3127633, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5Xo86.jpg?s=128&g=1", "display_name": "AvZ", "link": "https://stackoverflow.com/users/3127633/avz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1503, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1426873068, "creation_date": 1426701868, "last_edit_date": 1592644375, "question_id": 29129467, "link": "https://stackoverflow.com/questions/29129467/soft-body-engine-in-c", "title": "Soft body engine in C++", "body": "<p>I am attempting to make an elementary soft body engine in C++ using SDL2. It works by considering all the vertices of the soft body to be interconnected by springs of same length and rigidity (with the same spring constant <code>k</code> and length <code>natural_length</code>). To make it more realistic, I also introduced a damping constant <code>c</code>.<br />\nHowever, I encountered a frustrating problem. I have been trying to debug it for past 6-7 hours but to no avail. The soft body encounters many strange bugs which I don't understand</p>\n<ul>\n<li>Firstly, the &quot;soft body&quot; is not at all &quot;soft&quot;. It becomes a crumpled mess of points every time. I have tried calculating the force of neighbouring points instead only, but it still becomes a crumpled mess.</li>\n<li>The soft body flies up to the top corner (origin) every time even though I haven't implemented any external forces.</li>\n</ul>\n<p>Both of these bugs are visible in this image -  <img src=\"https://i.stack.imgur.com/Far1X.jpg\" alt=\"bug\" /></p>\n<p>The 2 following functions (they are in the same class as with all the variables, hence need not take in any arguments) are the actual simulation part of the code. (I have omitted the rest of the code as it is unnecessary.)<br />\nI used a <code>vector</code> of <code>SDL_Points</code> to store every point and a <code>vector</code> of <code>Vector</code> to store their velocities. If you are wondering what <code>Vector</code> is, it is simply a <code>struct</code> I created which simply has 2 <code>float</code> members <code>x</code> and <code>y</code>.<br />\nThe <code>acceleratePoints()</code> function assigns velocity and position to each point and <code>checkCollision()</code> well... checks for collisions with the walls of the window, which has width <code>scr_w</code> and height <code>scr_h</code>.</p>\n<pre><code>    void acceleratePoints()\n    {\n        vector&lt;SDL_Point&gt; soft_body_copy=soft_body;\n        vector&lt;Vector&gt; velocity_copy=velocity;\n        for(int i=0;i&lt;soft_body.size();++i)\n        {\n            for(int j=0;j&lt;soft_body.size();++j)\n            {\n                if(i!=j)\n                {\n                    Vector d={(soft_body[j].x-soft_body[i].x)/100.0,(soft_body[j].y-soft_body[i].y)/100.0};\n                    float t=atan2(d.y,d.x);\n                    float disp=fabs(magnitude(d))-natural_length/100.0;\n                    velocity_copy[i].x+=(k*disp*cos(t))/10000.0;\n                    velocity_copy[i].y+=(k*disp*sin(t))/10000.0;\n                    velocity_copy[i].x-=c*velocity_copy[i].x/100.0;\n                    velocity_copy[i].y-=c*velocity_copy[i].y/100.0;\n                    soft_body_copy[i].x+=velocity_copy[i].x;\n                    soft_body_copy[i].y+=velocity_copy[i].y;\n                }\n            }\n            soft_body=soft_body_copy;\n            velocity=velocity_copy;\n        }\n    }\n    void checkCollision()\n    {\n        for(int k=0;k&lt;soft_body.size();++k)\n        {\n            if(soft_body[k].x&gt;=scr_w||soft_body[k].x&lt;=0)\n            {\n                velocity[k].x*=e;\n                soft_body[k].x=soft_body[k].x&gt;scr_w/2?scr_w-1:1;\n            }\n            if(soft_body[k].y&gt;=scr_h||soft_body[k].y&lt;=0)\n            {\n                velocity[k].y*=e;\n                soft_body[k].y=soft_body[k].y&gt;scr_h/2?scr_h-1:1;\n            }\n        }\n    }\n</code></pre>\n<p>The <code>magnitude()</code> function returns the magnitude of a <code>Vector</code>.<br />\nThe values for coefficient of restitution <code>e</code>, damping constant <code>c</code> and spring constant <code>k</code>, which I used for the image are 0.5, 10 and 100 respectively.\nThank you for taking the time to read this! Help would be greatly appreciated.</p>\n<h3>Edit</h3>\n<p><a href=\"http://pastebin.com/eEgmqB6J\" rel=\"nofollow noreferrer\">Here</a> is the entire code if anyone wants to test it. You'll need SDL and a folder 'img' with a '.bmp' file in 'img/point.bmp'.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1426701943, "post_id": 29129453, "comment_id": 46484687, "body": "I am guessing there is a <code>typedef</code>, a <code>using</code>, a function definition or a macro definition called <code>_</code> somewhere."}, {"owner": {"reputation": 1, "user_id": 4686587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09763aef05d8ac61c420c3351424aecb?s=128&d=identicon&r=PG&f=1", "display_name": "psthomso", "link": "https://stackoverflow.com/users/4686587/psthomso"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 2, "creation_date": 1426702139, "post_id": 29129453, "comment_id": 46484812, "body": "if that is the case, I&#39;m going to shoot the individual who did that... but admittedly,I hadn&#39;t thought of that. Looking now..."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 2, "creation_date": 1426702303, "post_id": 29129453, "comment_id": 46484930, "body": "An <code>_</code> by itself <i>is</i> a valid identifier. You&#39;ll just need to figure out where it&#39;s declared/defined."}, {"owner": {"reputation": 1, "user_id": 4686587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09763aef05d8ac61c420c3351424aecb?s=128&d=identicon&r=PG&f=1", "display_name": "psthomso", "link": "https://stackoverflow.com/users/4686587/psthomso"}, "edited": false, "score": 0, "creation_date": 1426702630, "post_id": 29129453, "comment_id": 46485145, "body": "found it... the _ is an overloaded inline function. Ugh... was thinking something was added in C++11 I was missing. Thanks guys!"}], "answers": [{"comments": [{"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 1, "creation_date": 1426703093, "post_id": 29129774, "comment_id": 46485438, "body": "Just out of interest: what does that function do? Because why would anyone name a function like that."}, {"owner": {"reputation": 1, "user_id": 4686587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09763aef05d8ac61c420c3351424aecb?s=128&d=identicon&r=PG&f=1", "display_name": "psthomso", "link": "https://stackoverflow.com/users/4686587/psthomso"}, "edited": false, "score": 0, "creation_date": 1426703702, "post_id": 29129774, "comment_id": 46485825, "body": "The function just does a pointer conversion from the wrapper object to the contained object. By using the <code>auto</code> declaration, the type was not really all that obvious, so didn&#39;t realize I was dealing with a wrapper class. Still, one character function names is a bit lame."}], "owner": {"reputation": 1, "user_id": 4686587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09763aef05d8ac61c420c3351424aecb?s=128&d=identicon&r=PG&f=1", "display_name": "psthomso", "link": "https://stackoverflow.com/users/4686587/psthomso"}, "is_accepted": false, "score": 0, "last_activity_date": 1426702956, "last_edit_date": 1426702956, "creation_date": 1426702811, "answer_id": 29129774, "question_id": 29129453, "link": "https://stackoverflow.com/questions/29129453/what-is-the-purpose-of-the-underscore-in-node-execute-for-c/29129774#29129774", "title": "What is the purpose of the underscore in _(node)-&gt;Execute() for c++", "body": "<p>There is a series of wrapper functions declared like <code>NodePtrWrapper* _(...)</code></p>\n\n<p>Feeling stupid, but appreciate the responses...</p>\n"}], "owner": {"reputation": 1, "user_id": 4686587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09763aef05d8ac61c420c3351424aecb?s=128&d=identicon&r=PG&f=1", "display_name": "psthomso", "link": "https://stackoverflow.com/users/4686587/psthomso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426702971, "creation_date": 1426701820, "last_edit_date": 1426702971, "question_id": 29129453, "link": "https://stackoverflow.com/questions/29129453/what-is-the-purpose-of-the-underscore-in-node-execute-for-c", "title": "What is the purpose of the underscore in _(node)-&gt;Execute() for c++", "body": "<p>The underscore, in this case, is not part of the identifier. The code I'm seeing looks like</p>\n\n<pre><code>for(auto nodeItr = myNodes.begin(); nodeItr != myNodes.end(); nodeItr++) {\n    auto node = *nodeItr;\n    int status = _(node)-&gt;Execute();\n    if (status != 0) return -1;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-c++", "path", "include"], "answers": [{"owner": {"reputation": 193, "user_id": 2171160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b84ddb1e38718fed1ba37438e086d6?s=128&d=identicon&r=PG", "display_name": "Saket", "link": "https://stackoverflow.com/users/2171160/saket"}, "is_accepted": false, "score": 0, "last_activity_date": 1430157221, "creation_date": 1430157221, "answer_id": 29902708, "question_id": 29129450, "link": "https://stackoverflow.com/questions/29129450/vs2015-c-include-directory-gstreamer/29902708#29902708", "title": "vs2015 C++ include directory gstreamer", "body": "<p>Either the Path in the Include directives is wrong,\nOr there can be a permission issue.</p>\n\n<p>Check that u have permissions for include file folder and the solution folder.\nOne simple option is move everything, include files and solution in documents folder, reset include directives and try to rebuild it.</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/et4zwx34.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/et4zwx34.aspx</a></p>\n"}, {"owner": {"reputation": 53, "user_id": 2692846, "user_type": "registered", "profile_image": "https://graph.facebook.com/711351160/picture?type=large", "display_name": "David Netherwood", "link": "https://stackoverflow.com/users/2692846/david-netherwood"}, "is_accepted": false, "score": 0, "last_activity_date": 1460799977, "creation_date": 1460799977, "answer_id": 36662568, "question_id": 29129450, "link": "https://stackoverflow.com/questions/29129450/vs2015-c-include-directory-gstreamer/36662568#36662568", "title": "vs2015 C++ include directory gstreamer", "body": "<p>A couple of thoughts, may be worth using GStreamer 1.0 rather than 0.1. Also, you need to install the devel and normal versions. You seem to be using the defunct SDK.</p>\n\n<p>Downloads from: <a href=\"https://gstreamer.freedesktop.org/data/pkg/windows/1.8.0/\" rel=\"nofollow\">https://gstreamer.freedesktop.org/data/pkg/windows/1.8.0/</a></p>\n\n<p>If you are building for 64 bit, and consuming HLS content, watch out for this problem: <a href=\"https://bugzilla.gnome.org/show_bug.cgi?id=758738\" rel=\"nofollow\">https://bugzilla.gnome.org/show_bug.cgi?id=758738</a>. Its easy to fix.</p>\n"}, {"owner": {"reputation": 1844, "user_id": 672480, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/zDlrr.png?s=128&g=1", "display_name": "HumbleDeveloper", "link": "https://stackoverflow.com/users/672480/humbledeveloper"}, "is_accepted": false, "score": 0, "last_activity_date": 1537960956, "creation_date": 1537960956, "answer_id": 52516583, "question_id": 29129450, "link": "https://stackoverflow.com/questions/29129450/vs2015-c-include-directory-gstreamer/52516583#52516583", "title": "vs2015 C++ include directory gstreamer", "body": "<p>I encountered the same problem today.\nI am using VS 2017 &amp; wanted to work gstreamer and landed in to the same problem.</p>\n\n<p>After a lot of struggle, I realized the the mistake committed was : <strong><em>I downloaded the wrong package for installing</em></strong></p>\n\n<p>The package which I downloaded was : <code>gstreamer-1.0-x86_64-1.14.3.msi</code> which game a folder structure without containing the development files.</p>\n\n<p>Hence, I went back to <a href=\"https://gstreamer.freedesktop.org/data/pkg/windows/1.14.3/\" rel=\"nofollow noreferrer\">the download link</a> and downloaded <code>gstreamer-1.0-devel-x86_64-1.14.3.msi</code></p>\n\n<p>This has all the dev files.</p>\n\n<p>Now all you need to do after this is set the VS project directories to this and you are good to go.</p>\n\n<p>Hope this helps!!!</p>\n"}], "owner": {"reputation": 21, "user_id": 2072901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e52c2a7796350cde6474a519c581a50b?s=128&d=identicon&r=PG", "display_name": "eomer", "link": "https://stackoverflow.com/users/2072901/eomer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2568, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1537960956, "creation_date": 1426701816, "last_edit_date": 1426702342, "question_id": 29129450, "link": "https://stackoverflow.com/questions/29129450/vs2015-c-include-directory-gstreamer", "title": "vs2015 C++ include directory gstreamer", "body": "<p>i'm trying to compile <code>gstreamer sdk</code> tutorials on <code>vs2015</code> in C++.</p>\n\n<p>Problem: I always get a fatal error, </p>\n\n<pre><code>fatal error C1083: unable to open include file 'gst/gst.h': no such file or directory. \n</code></pre>\n\n<p>from the basic-tutorial1.c the include is </p>\n\n<pre><code>#include &lt;gst/gst.h&gt;\n</code></pre>\n\n<p>the file needed,  gst.h is in the directory </p>\n\n<pre><code>C:\\gstreamer-sdk\\0.10\\x86_64\\include\\gstreamer-0.10\\gst\n</code></pre>\n\n<p>in vs2015,on basic-tutorial1,in property <code>-&gt;config property-&gt;VC++ paths-&gt;include paths</code>, </p>\n\n<p>I have </p>\n\n<pre><code>C:\\gstreamer-sdk\\0.10\\x86_64\\include\\gstreamer-0.10;\n$(GSTREAMER_SDK_ROOT_X86_64);\n$(IncludePath)\n</code></pre>\n\n<p>GSTREAMER_SDK_ROOT_X86_64  is defined as C:\\gstreamer-sdk\\0.10\\x86_64\\</p>\n\n<p>it seems a basic problem,but I have tried some path and combinations, but can't include the file.</p>\n\n<p>The only solution working  is to set the full path to <code>gst.h</code> in the include directive. It's crazy.</p>\n\n<p>This include is the start file for multiples include, and there is the same problem for each one..</p>\n\n<p>How can I set the include directive or path correctly? It's incredible that's this product is unable to do this simply.</p>\n"}, {"tags": ["c++", "audio", "frequency", "pitch"], "comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1426701828, "post_id": 29129360, "comment_id": 46484613, "body": "Are you trying to maintain the tempo, or are you OK with it running 4x faster?"}, {"owner": {"reputation": 241, "user_id": 3575889, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/84a7c442ceff393c05bdbd820d908320?s=128&d=identicon&r=PG&f=1", "display_name": "user3575889", "link": "https://stackoverflow.com/users/3575889/user3575889"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1426703939, "post_id": 29129360, "comment_id": 46485993, "body": "No i need to keep the tempo, basically staying always at 2000 samples like the input."}], "answers": [{"owner": {"reputation": 3055, "user_id": 1185894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff30df40d18eaef58ab6ce677c296f5?s=128&d=identicon&r=PG", "display_name": "ederwander", "link": "https://stackoverflow.com/users/1185894/ederwander"}, "is_accepted": false, "score": 0, "last_activity_date": 1431599540, "last_edit_date": 1431599540, "creation_date": 1431548364, "answer_id": 30224459, "question_id": 29129360, "link": "https://stackoverflow.com/questions/29129360/audio-sample-frequency-pitch/30224459#30224459", "title": "audio sample frequency pitch", "body": "<p>This is not as simple as it sounds...</p>\n\n<p>if you do not need to keep the formants one way is time stretch 4x your sample and at the end resample (interpolate) by 4, this step pitch shift your audio.</p>\n\n<p>To strech you usually need some pitch track algorithm, in time domain some know codes are PSOLA, WSOLA, TDHS, SOLA, VSOLA...</p>\n\n<p>To strech in frequency domain you can use phase vocoder.</p>\n\n<p>Remember without formants will produce Demon/chipmunk effect.</p>\n"}], "owner": {"reputation": 241, "user_id": 3575889, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/84a7c442ceff393c05bdbd820d908320?s=128&d=identicon&r=PG&f=1", "display_name": "user3575889", "link": "https://stackoverflow.com/users/3575889/user3575889"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 852, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1431599540, "creation_date": 1426701523, "question_id": 29129360, "link": "https://stackoverflow.com/questions/29129360/audio-sample-frequency-pitch", "title": "audio sample frequency pitch", "body": "<p>Im trying to find out how to change the pitch of a block of samples.\nSo far ive been using the smbPitchShift code yet but someone told me pitch shifting can be done in a simple conversion of frequency.</p>\n\n<p>Say right now i have a block of 2000 samples running at frequency 44100hz.\nHow do i manage to shift the pitch by 2 octaves up (24 semitones) ?\nThis guy told its just a conversion of 1/frequency, which i dont really understand.</p>\n\n<p>Its a VST plugin im trying to develop in C++.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "haxe"], "answers": [{"owner": {"reputation": 2914, "user_id": 1162491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S3MH1.jpg?s=128&g=1", "display_name": "Momer", "link": "https://stackoverflow.com/users/1162491/momer"}, "is_accepted": false, "score": 2, "last_activity_date": 1427256473, "creation_date": 1427256473, "answer_id": 29247270, "question_id": 29129303, "link": "https://stackoverflow.com/questions/29129303/how-do-you-include-external-libraries-into-haxe/29247270#29247270", "title": "How do you include external libraries into Haxe?", "body": "<p>For a start, check out <a href=\"http://haxe.io/roundups/wwx/c++-magic/\" rel=\"nofollow\">C++ Magic by Hugh Sanderson</a>. Much of the mentioned Compiler Metadata in that talk can be found at the <a href=\"http://haxe.org/manual/cr-metadata.html\" rel=\"nofollow\">Built-in Compiler Metadata</a> page in the Haxe Manual.</p>\n\n<blockquote>\n  <p>He then talks briefly about metadata magic. He provides metadata for classes and functions. For classes you have the following:</p>\n\n<pre><code>@:headerClassCode(...) which injects member variables and inline functions.\n@:headerCode(...) which includes external headers.\n@:headerNamespaceCode(...) which allows you to add to the global namespace.\n@:cppFileCode(...) which allows you to include external headers only in C++ files.\n@:cppNamespaceCode(...) which implements static variables.\n@:buildXml(...) which allows you to add to the build.xml file. \n</code></pre>\n  \n  <p>For function metadata you get the following:</p>\n\n<pre><code>@:functionCode(...)\n@:functionTailCode(...) \n</code></pre>\n  \n  <p>Hugh states these are largely redundant as you should use untyped\n  __cpp_(...) instead.</p>\n</blockquote>\n"}], "owner": {"reputation": 10362, "user_id": 428241, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/207dd6199a020b3375755c1d62498d21?s=128&d=identicon&r=PG", "display_name": "DanMan", "link": "https://stackoverflow.com/users/428241/danman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1585, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1427256473, "creation_date": 1426701342, "question_id": 29129303, "link": "https://stackoverflow.com/questions/29129303/how-do-you-include-external-libraries-into-haxe", "title": "How do you include external libraries into Haxe?", "body": "<p>I'm trying to write a program for which I would like to use some external C++ libraries in Haxe. I can't really figure it out since the official documentation is old (<a href=\"http://old.haxe.org/doc/cpp/ffi\" rel=\"nofollow\">http://old.haxe.org/doc/cpp/ffi</a>) and I'm not familiar with C++ either.</p>\n\n<p>So how do you do that in Haxe? I suppose I'll need to install <code>hxcpp</code> via <code>haxelib</code>, but that's about as much as I know.</p>\n"}, {"tags": ["c++", "tabs", "mfc", "auto-update", "cpropertysheet"], "answers": [{"comments": [{"owner": {"reputation": 1754, "user_id": 4449640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-me4y5aVPCrY/AAAAAAAAAAI/AAAAAAAAABI/0dkBJMaB1IE/photo.jpg?sz=128", "display_name": "Kyle Williamson", "link": "https://stackoverflow.com/users/4449640/kyle-williamson"}, "edited": false, "score": 0, "creation_date": 1426708911, "post_id": 29131452, "comment_id": 46488884, "body": "Thank you @rrirower .  You are the CProperty-Master!"}], "owner": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "is_accepted": true, "score": 2, "last_activity_date": 1426708334, "creation_date": 1426708334, "answer_id": 29131452, "question_id": 29129266, "link": "https://stackoverflow.com/questions/29129266/updating-cpropertypage-on-tab-selection/29131452#29131452", "title": "Updating CPropertyPage on tab selection", "body": "<p>Using an \"Update\" button is poor design because it requires the user to force the update.  Instead, you should look to maintain the state of the values that could cause the update.  This can be done in a structure or class object that can then be made accessible to <a href=\"https://msdn.microsoft.com/en-us/library/5zd196y3.aspx\" rel=\"nofollow\">CPropertyPage::OnSetActive</a> of the page that needs the updated values.  <em>OnSetActive</em> is called just before the page is to be made the active one.  It's your opportunity to update values on the page before it displays.</p>\n"}], "owner": {"reputation": 1754, "user_id": 4449640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-me4y5aVPCrY/AAAAAAAAAAI/AAAAAAAAABI/0dkBJMaB1IE/photo.jpg?sz=128", "display_name": "Kyle Williamson", "link": "https://stackoverflow.com/users/4449640/kyle-williamson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 0, "accepted_answer_id": 29131452, "answer_count": 1, "score": 1, "last_activity_date": 1426708334, "creation_date": 1426701191, "question_id": 29129266, "link": "https://stackoverflow.com/questions/29129266/updating-cpropertypage-on-tab-selection", "title": "Updating CPropertyPage on tab selection", "body": "<p>I am looking for the best way to update a CPropertyPage once it is clicked.  Currently, my pages receive it's information during <code>OnInitDialog()</code>.  However, when the user does something on page one, it can effect what is on page two.  </p>\n\n<p>The only solution I can think to use is an \"Update\" button.  Once the button is clicked, the page refreshes its information by calling the same functions that take place during <code>OnInitDialog()</code>.  Is there an event that occurs when the user clicks on a different CPropertyPage of a CPropertySheet? </p>\n"}, {"tags": ["c++", "pass-by-reference"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1426701347, "post_id": 29129243, "comment_id": 46484318, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/3601602/what-are-rvalues-lvalues-xvalues-glvalues-and-prvalues\">What are rvalues, lvalues, xvalues, glvalues, and prvalues?</a>"}, {"owner": {"reputation": 3500, "user_id": 847349, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BsyZ.jpg?s=128&g=1", "display_name": "Dmitry Ledentsov", "link": "https://stackoverflow.com/users/847349/dmitry-ledentsov"}, "edited": false, "score": 0, "creation_date": 1426701647, "post_id": 29129243, "comment_id": 46484506, "body": "<a href=\"http://en.cppreference.com/w/cpp/language/value_category\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/value_category</a>"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 4610342, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6b10fa5d609ee5ca8553b3f368dd83ae?s=128&d=identicon&r=PG&f=1", "display_name": "virusai", "link": "https://stackoverflow.com/users/4610342/virusai"}, "edited": false, "score": 0, "creation_date": 1426702088, "post_id": 29129357, "comment_id": 46484775, "body": "that&#39; my writing mistake...my question is how can some same say a &#39;d &#39;is rvalue..."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 27, "user_id": 4610342, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6b10fa5d609ee5ca8553b3f368dd83ae?s=128&d=identicon&r=PG&f=1", "display_name": "virusai", "link": "https://stackoverflow.com/users/4610342/virusai"}, "edited": false, "score": 0, "creation_date": 1426702309, "post_id": 29129357, "comment_id": 46484933, "body": "@virusai, Here&#39;s a link to another SO post addresses that question in some depth: <a href=\"http://stackoverflow.com/questions/3601602/what-are-rvalues-lvalues-xvalues-glvalues-and-prvalues\" title=\"what are rvalues lvalues xvalues glvalues and prvalues\">stackoverflow.com/questions/3601602/&hellip;</a>."}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1426702528, "post_id": 29129357, "comment_id": 46485075, "body": "Rvalues can appear on the left hand side of an assignment."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1426703003, "post_id": 29129357, "comment_id": 46485390, "body": "@0x499602D2, please elaborate."}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1426703152, "post_id": 29129357, "comment_id": 46485472, "body": "For user-defined classes you can use the assignment operator on rvalues as they are like member function calls: <code>A() = A()</code> would compile given an accessible copy/move-assignment operator. I think the term lvalue means an object that will exist beyond the expression in which it is used, and rvalue meaning the opposite."}], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1426706292, "last_edit_date": 1426706292, "creation_date": 1426701519, "answer_id": 29129357, "question_id": 29129243, "link": "https://stackoverflow.com/questions/29129243/passing-lvaue-to-non-const-references-in-c/29129357#29129357", "title": "Passing lvaue to non const references in c++", "body": "<p>You said,</p>\n\n<blockquote>\n  <p><strong>as far as i know</strong> lvalue is the one which cannot be modified.</p>\n</blockquote>\n\n<p>That is not correct. Traditionally, <em>lvalue</em> stood for a value which can appear on the left hand side of an assignment operator, which means they must be modifiable.</p>\n\n<p>That meaning is still valid today.</p>\n\n<p>Perhaps you are confusing with <em>rvalue</em>, which stood for a value which can appear on the right hand side of assignment operator, which may or may not be modifiable.</p>\n\n<p>That meaning is still valid today.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Now that you changed your question to say:</p>\n\n<blockquote>\n  <p><strong>as far as i know</strong> lvalue is the one which can be modified.</p>\n</blockquote>\n\n<p>The answer should be obvious to you. when the argument type of a function is a non-const reference, only <em>lvalue</em>s can be passed to such functions, not <em>rvalue</em>s.</p>\n\n<p><strong>EDIT 2</strong></p>\n\n<p>Thanks to the comment by @0x499602D2:</p>\n\n<blockquote>\n  <p>For user-defined classes you can use the assignment operator on <em>rvalue</em>s as they are like member function calls: <code>A{} = A{};</code> would compile given an accessible copy/move-assignment operator. I think the term <em>lvalue</em> designates an object that will exist beyond the expression in which it is used, and <em>rvalue</em> meaning the opposite.</p>\n</blockquote>\n"}], "owner": {"reputation": 27, "user_id": 4610342, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6b10fa5d609ee5ca8553b3f368dd83ae?s=128&d=identicon&r=PG&f=1", "display_name": "virusai", "link": "https://stackoverflow.com/users/4610342/virusai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426706292, "creation_date": 1426701102, "last_edit_date": 1426701487, "question_id": 29129243, "link": "https://stackoverflow.com/questions/29129243/passing-lvaue-to-non-const-references-in-c", "title": "Passing lvaue to non const references in c++", "body": "<p>I read in accelerated c++ that we should pass lvalue to non-const references. Why is that? As far as i know lvalue is the one which can be modified. Please tell me if it has another definition.</p>\n\n<p>I checked it by writing a simple program:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;vector&gt;\nusing namespace std;\nvector&lt;double&gt; ret()\n{\n    vector&lt;double&gt; d;\n    return d;\n}\nvoid rec(vector&lt;double&gt; &amp;g)\n{\n    cout&lt;&lt;\"entered...\"&lt;&lt;endl;\n}\nint main\n{\n    rec(ret());\n}\n</code></pre>\n\n<p>And error is </p>\n\n<blockquote>\n  <p>invalid initialization of non const reference from r value</p>\n</blockquote>\n\n<p>What meaning do <code>rvalue</code> and <code>lvalue</code> have here? <code>d</code> is a local variable in <code>ret()</code> and it is passed by value so it does not have dangling issues.</p>\n\n<p>What happens when <code>rec(ret())</code> is called and \nexplain to me how <code>rec()</code> sends its  argument.</p>\n"}, {"tags": ["c++", "string", "path"], "comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1426701333, "post_id": 29129216, "comment_id": 46484312, "body": "have you tried quoting the process argument?"}], "answers": [{"comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1426701839, "post_id": 29129419, "comment_id": 46484620, "body": "You need to escape &#39;\\&#39;"}, {"owner": {"reputation": 4003, "user_id": 4331480, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oWiMU.jpg?s=128&g=1", "display_name": "therainmaker", "link": "https://stackoverflow.com/users/4331480/therainmaker"}, "edited": false, "score": 0, "creation_date": 1426702056, "post_id": 29129419, "comment_id": 46484752, "body": "I was thinking of adding the replace with find as the argument. The only issue was that I was not sure if I needed to call it in a loop or if one call would be sufficient to change all characters. Hence, avoided it. Shouldn&#39;t have."}], "owner": {"reputation": 4003, "user_id": 4331480, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oWiMU.jpg?s=128&g=1", "display_name": "therainmaker", "link": "https://stackoverflow.com/users/4331480/therainmaker"}, "is_accepted": false, "score": 0, "last_activity_date": 1426701716, "creation_date": 1426701716, "answer_id": 29129419, "question_id": 29129216, "link": "https://stackoverflow.com/questions/29129216/replace-strings-in-c/29129419#29129419", "title": "Replace strings in C++", "body": "<p>To change the <code>\\</code> to <code>/</code>, a simple iteration over the string should suffice. The required code is:</p>\n\n<p>'s' is assumed to be the concerned string.</p>\n\n<pre><code>for (int i = 0; i &lt; s.length(); i++)\n{\n  if (s[i] == `\\`)\n    s[i] = `/`;\n}\n</code></pre>\n"}, {"owner": {"reputation": 1554, "user_id": 4499919, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n2u5L.jpg?s=128&g=1", "display_name": "udit043", "link": "https://stackoverflow.com/users/4499919/udit043"}, "is_accepted": false, "score": 0, "last_activity_date": 1426705299, "creation_date": 1426705299, "answer_id": 29130581, "question_id": 29129216, "link": "https://stackoverflow.com/questions/29129216/replace-strings-in-c/29130581#29130581", "title": "Replace strings in C++", "body": "<p>Please elaborate your question. The problem may be with second program. </p>\n\n<p>First Program may be :</p>\n\n<pre><code>char str1[50]=\"start abc.exe \";\nchar str2[20];\ncin&gt;&gt;str2;\nstrcat(str1,str2);\nsystem(str1);\n</code></pre>\n\n<p>Second program may be (abc.exe) :</p>\n\n<pre><code>int main(int argc,char *argv[])\n{\nfor(i=1;i&lt;argc;i++)\n {     \n  cout&lt;&lt;argv[i]&lt;&lt;\" \\n\";\n }\n}\n</code></pre>\n\n<p>This is just an example. </p>\n"}], "owner": {"reputation": 41, "user_id": 4655409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d94d8cd73408bae3ef0b6564b6abc2?s=128&d=identicon&r=PG&f=1", "display_name": "Armando Acu&#241;a", "link": "https://stackoverflow.com/users/4655409/armando-acu%c3%b1a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1426705299, "creation_date": 1426701012, "last_edit_date": 1426701620, "question_id": 29129216, "link": "https://stackoverflow.com/questions/29129216/replace-strings-in-c", "title": "Replace strings in C++", "body": "<p>I'm creating a program in which I get the path of a file, then send it as a parameter into another program. The problem is when I get the path, it has the special character <code>'\\'</code>, which completely mess up the string I send to the other program. Is there a way I can ignore the escape character or change it to <code>'/'</code>? \nThanks!!</p>\n"}, {"tags": ["c++", "wordsearch"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1426701168, "post_id": 29129189, "comment_id": 46484208, "body": "As a hint, if you have an array of strings corresponding to the rows then the normal horizontal search is trivial. So you could apply a similar logic to the other directions too: construct string arrays for reverse horizontal, vertical etc. This will be fast for word searching at the expense of set up cost."}, {"owner": {"reputation": 1006, "user_id": 3888756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPnk1.jpg?s=128&g=1", "display_name": "DigitalNinja", "link": "https://stackoverflow.com/users/3888756/digitalninja"}, "edited": false, "score": 1, "creation_date": 1426701449, "post_id": 29129189, "comment_id": 46484380, "body": "I think I would use a matrix approach (especially if you need to search diagonal patterns). Find the starting letter then look at all adjacent letters for a match, move to that (x,y) and do the same thing until you have a complete match. Not sure if that would be the fastest, might be better to start out looking for a complete match horizontally and vertically first (kind of like what Bathsheba suggested) then (if not found) move to the more complex search."}], "answers": [{"owner": {"reputation": 9554, "user_id": 31782, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8ea4581df89970a5ba17daf4ad93041c?s=128&d=identicon&r=PG", "display_name": "n0rd", "link": "https://stackoverflow.com/users/31782/n0rd"}, "is_accepted": false, "score": 1, "last_activity_date": 1426701732, "creation_date": 1426701732, "answer_id": 29129425, "question_id": 29129189, "link": "https://stackoverflow.com/questions/29129189/using-c-to-solve-wordsearch/29129425#29129425", "title": "Using c++ to solve wordsearch.", "body": "<p>You might want to have an array of index increments for moving in all directions (provided that you store your field in a matrix), so you could write generic code for trying all directions:</p>\n\n<pre><code>const int dirIncr[][2] = {{-1, 0}, {0, 1}, {1, 0}, {0, -1}/*...*/}\n</code></pre>\n\n<p>so you loop through all possible start cells and from each sell search in all possible directions (and on each step you have to check if current coordinates still fit into your array).</p>\n\n<p>As for actual search <a href=\"http://en.wikipedia.org/wiki/Trie\" rel=\"nofollow\">Prefix trees</a> might be helpful here.</p>\n"}], "owner": {"reputation": 1, "user_id": 4654531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c6be0daa61acd90f3d35be49b6cde19?s=128&d=identicon&r=PG&f=1", "display_name": "AB2515", "link": "https://stackoverflow.com/users/4654531/ab2515"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3162, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1429297385, "creation_date": 1426700935, "question_id": 29129189, "link": "https://stackoverflow.com/questions/29129189/using-c-to-solve-wordsearch", "title": "Using c++ to solve wordsearch.", "body": "<p>Sorry to bother everyone with a simple question but I'm very new at C++ and i don't know what to do. So I've been given a framework in C++ that reads in 2 txt files containing a wordsearch and a list of words to be found and present the results in another txt file. \nI'm trying to complete the framework but I cant figure out how exactly the program will check all 8 directions or how a system will compare the words in the dictionary file with the wordsearch and put any matched words into the results.txt file. I've attached the framework below and any info or advice on how to get started would be deeply appreciated.</p>\n\n<pre><code>dictionary.txt \nABSEIL\nBIKE\nPIXEL\nRESIGHTS\nYARDWORKS\n\nwordsearch.txt \nS T H G I S E R B\nG K L L B X D I E\nK P R H I M K L D\nT G Y O L E X I P\nB A P T W H T E J\nT Q U D X D W S F\nV M V S H L R B A\nH Q L B C K S A Y\nR D G B F J P Q Y\n\n\nWordsearch.h \n#pragma once\n\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;Windows.h&gt;\n\nusing namespace std;\n\nclass WordSearch\n{\n public:\nWordSearch();\n~WordSearch();\n\nbool ReadPuzzle();\nbool ReadDictionary();\nbool SolvePuzzleWithDictionary();\n\nvoid WriteResults(string fileName);\n\nprivate:\nLARGE_INTEGER start, end, frequency;\nconst int NUMBER_OF_RUNS;\nconst string PUZZLE_NAME;\nconst string DICTIONARY_NAME;\n};\n\n\nWordsearch.cpp \n #include \"WordSearch.h\"\n #include &lt;algorithm&gt;\n #include &lt;iterator&gt;\n #include &lt;iostream&gt;\n #include &lt;iomanip&gt;\n\nusing namespace std;\n\nWordSearch::WordSearch() : NUMBER_OF_RUNS(500), PUZZLE_NAME(\"wordsearch_grid.txt\"), DICTIONARY_NAME(\"dictionary.txt\")\n{\n}\n\nWordSearch::~WordSearch()\n{\n}\n\nbool WordSearch::ReadPuzzle()\n{\ncout &lt;&lt; endl &lt;&lt; \"ReadPuzzle() has NOT been implemented\" &lt;&lt; endl;\nreturn true;\n}\n\nbool WordSearch::ReadDictionary()\n{\ncout &lt;&lt; endl &lt;&lt; \"ReadDictionary() has NOT been implemented\" &lt;&lt; endl;\nreturn true;\n}\n\nbool WordSearch::SolvePuzzleWithDictionary() {\ncout &lt;&lt; endl &lt;&lt; \"SolvePuzzleWithDictionary() has NOT been implemented\" &lt;&lt; endl;\ndouble timeTakenInSeconds;\nQueryPerformanceFrequency(&amp;frequency);\nQueryPerformanceCounter(&amp;start);\n\nfor (int n = 0; n &lt; NUMBER_OF_RUNS; ++n) {\n    // Add solving code here!\n}\n\nQueryPerformanceCounter(&amp;end);\ntimeTakenInSeconds = (end.QuadPart - start.QuadPart) / (double)(frequency.QuadPart*NUMBER_OF_RUNS);\n\ncout &lt;&lt; fixed &lt;&lt; setprecision(10) &lt;&lt; \"SolvePuzzleWithDictionary() - \" &lt;&lt; timeTakenInSeconds &lt;&lt; \" seconds\" &lt;&lt; endl;\nreturn false;\n}\n\nvoid WordSearch::WriteResults(string fileName) {\ncout &lt;&lt; \"WriteResults() has NOT been implemented\" &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "string", "c++11", "vector", "stl"], "comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1426701055, "post_id": 29129165, "comment_id": 46484131, "body": "instead of your <code>while</code> loop use range based <code>for</code>, e.g. <code>for( const string&amp; s : vec ) { if( s.length() &gt; 0 &amp;&amp; s[0] == ch )</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1605, "user_id": 1339615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6MHBM.png?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/1339615/julian"}, "edited": false, "score": 1, "creation_date": 1426713297, "post_id": 29129244, "comment_id": 46491433, "body": "Am I missing something here, or could you have just written <code>vec[k]</code> instead of this entire block of code?"}, {"owner": {"reputation": 1985, "user_id": 1917745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b47b6df45c24073c78c721df7517b8c?s=128&d=identicon&r=PG", "display_name": "gla3dr", "link": "https://stackoverflow.com/users/1917745/gla3dr"}, "edited": false, "score": 1, "creation_date": 1426714528, "post_id": 29129244, "comment_id": 46492033, "body": "This does not answer the question. All this does it print out the kth string in the vector in a roundabout and inefficient way. It is equivalent to <code>cout &lt;&lt; vec[k] &lt;&lt; endl;</code>"}, {"owner": {"reputation": 4003, "user_id": 4331480, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oWiMU.jpg?s=128&g=1", "display_name": "therainmaker", "link": "https://stackoverflow.com/users/4331480/therainmaker"}, "edited": false, "score": 0, "creation_date": 1426873126, "post_id": 29129244, "comment_id": 46563380, "body": "True that. However, I felt that the person might have had some other uses besides a simple dereferencing, and was giving this query as a sample. So, I thought best to use the loop as he wanted."}], "owner": {"reputation": 4003, "user_id": 4331480, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oWiMU.jpg?s=128&g=1", "display_name": "therainmaker", "link": "https://stackoverflow.com/users/4331480/therainmaker"}, "is_accepted": false, "score": 2, "last_activity_date": 1426711806, "last_edit_date": 1426711806, "creation_date": 1426701103, "answer_id": 29129244, "question_id": 29129165, "link": "https://stackoverflow.com/questions/29129165/get-first-character-of-a-string-from-a-string-vector/29129244#29129244", "title": "get first character of a string from a string vector", "body": "<p>To get the string at index <code>k</code> of the vector, the following code should work:</p>\n\n<pre><code>vector&lt;string&gt;::iterator i = vec.begin();\nwhile (i != vec.end())\n{\n  if (i - vec.begin() == k)\n    cout &lt;&lt; (*i) &lt;&lt; endl;\n  ++i;\n}\n</code></pre>\n\n<p>To get the character from that string, you can dereference at the appropriate position.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 1, "creation_date": 1426712014, "post_id": 29129294, "comment_id": 46490745, "body": "I would say <code>(*i)</code> rather than <code>i[0]</code>. Similarly, <code>i-&gt;size()</code>."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1426712176, "post_id": 29129294, "comment_id": 46490839, "body": "@Hurkyl  I showed the correct syntax and semantic when expression i[0] is used.:)"}, {"owner": {"reputation": 7638, "user_id": 2986116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d2f1444d1687fdda5fc2f039ccb0c4c?s=128&d=identicon&r=PG&f=1", "display_name": "J&#233;r&#244;me", "link": "https://stackoverflow.com/users/2986116/j%c3%a9r%c3%b4me"}, "edited": false, "score": 0, "creation_date": 1426713099, "post_id": 29129294, "comment_id": 46491327, "body": "You are missing <code>++i;</code> when using <code>while</code> syntax"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 7638, "user_id": 2986116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d2f1444d1687fdda5fc2f039ccb0c4c?s=128&d=identicon&r=PG&f=1", "display_name": "J&#233;r&#244;me", "link": "https://stackoverflow.com/users/2986116/j%c3%a9r%c3%b4me"}, "edited": false, "score": 0, "creation_date": 1426713285, "post_id": 29129294, "comment_id": 46491425, "body": "@Jerome L It is not me.:) It is the author of the thread who missed ++i. I simply copied his code that to show the correct expression.:)"}], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 6, "last_activity_date": 1426713351, "last_edit_date": 1426713351, "creation_date": 1426701303, "answer_id": 29129294, "question_id": 29129165, "link": "https://stackoverflow.com/questions/29129165/get-first-character-of-a-string-from-a-string-vector/29129294#29129294", "title": "get first character of a string from a string vector", "body": "<p>Try the following</p>\n\n<pre><code>vector&lt;string&gt;::iterator i=vec.begin();\n    while(i!=vec.end()){\n        if(i[0][0] == ch)\n            cout&lt;&lt;\"output\";\n        ++i;\n    }\n</code></pre>\n\n<p><code>i[0]</code> returns the whole string pointed to by iterator i while <code>i[0][0]</code> returns the first character of the string even if the string is empty (in this case the value will be '\\0'). :)</p>\n\n<p>But you could write simpler</p>\n\n<pre><code>for ( const std::string &amp;s : vec )\n{\n    if ( s[0] == ch ) cout &lt;&lt; \"output\";\n}\n</code></pre>\n\n<p>If you want to use some index that can have any value then the code could look like</p>\n\n<pre><code>vector&lt;string&gt;::iterator i=vec.begin();\n    while(i!=vec.end()){\n        if( index &lt; i[0].size() &amp;&amp; i[0][index] == ch)\n            cout&lt;&lt;\"output\";\n        ++i;\n    }\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>for ( const std::string &amp;s : vec )\n{\n    if ( index &lt; s.size() &amp;&amp; s[index] == ch ) cout &lt;&lt; \"output\";\n}\n</code></pre>\n"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 3, "last_activity_date": 1426702815, "creation_date": 1426702815, "answer_id": 29129778, "question_id": 29129165, "link": "https://stackoverflow.com/questions/29129165/get-first-character-of-a-string-from-a-string-vector/29129778#29129778", "title": "get first character of a string from a string vector", "body": "<p>Rather than writing a loop here at all, I'd use a standard algorithm. For example, to display all the strings (one per line) that start with the specified letter, you could use something like this:</p>\n\n<pre><code>std::copy_if(vec.begin(), vec.end(), \n             std::ostream_iterator&lt;std::string&gt;(std::cout, \"\\n\"),\n             [ch](std::string const &amp;s) { return s[0] == ch; });\n</code></pre>\n"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "is_accepted": false, "score": 2, "last_activity_date": 1426712293, "creation_date": 1426712293, "answer_id": 29132515, "question_id": 29129165, "link": "https://stackoverflow.com/questions/29129165/get-first-character-of-a-string-from-a-string-vector/29132515#29132515", "title": "get first character of a string from a string vector", "body": "<p><code>i</code> is an <em>iterator through your sequence</em>, not an <em>element of your sequence</em>. <code>i</code> is like a pointer; you need to do <code>*i</code> to get the element the iterator is pointing at. e.g. <code>(*i)[0]</code> is the first character of the string that <code>i</code> points to (assuming it is nonempty, of course &mdash; if it is empty, then this is undefined behavior and all sorts of horrible things can happen).</p>\n\n<p>Also, you seem to have forgotten to actually iterate through your sequence; e.g. advancing with <code>++i</code> at the end of every iteration.</p>\n\n<p>Unless you specifically need to work with iterators, though, you should probably prefer something more like</p>\n\n<pre><code>for(std::string &amp;s : vec) {\n    // do something with s\n}\n</code></pre>\n\n<p>(or more simply, <code>auto &amp;s : vec</code>)</p>\n"}], "owner": {"reputation": 907, "user_id": 4646394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/59cde1f2da25b8437f9a390c303734b7?s=128&d=identicon&r=PG&f=1", "display_name": "helix", "link": "https://stackoverflow.com/users/4646394/helix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12620, "favorite_count": 1, "accepted_answer_id": 29129294, "answer_count": 4, "score": 4, "last_activity_date": 1487791676, "creation_date": 1426700845, "last_edit_date": 1487791676, "question_id": 29129165, "link": "https://stackoverflow.com/questions/29129165/get-first-character-of-a-string-from-a-string-vector", "title": "get first character of a string from a string vector", "body": "<p>how to get the first character or how to get a character by index from a string in a string vector while iterating through that vector.\nHere's my code: </p>\n\n<pre><code>vector&lt;string&gt;::iterator i=vec.begin();\n    while(i!=vec.end()){\n        if(i[0]==ch)\n            cout&lt;&lt;\"output\";\n    }\n</code></pre>\n\n<p>it's giving the error:</p>\n\n<p>no match for 'operator==' (operand types are 'std::basic_string' and 'char')|</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1426700803, "post_id": 29129133, "comment_id": 46483974, "body": "Is there any reason you&#39;re using such ridiculously small buffers? Two characters plus a <code>NULL</code> is not a lot of room."}, {"owner": {"reputation": 840, "user_id": 943098, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/079c936c76ab374f99302a6e604d6df5?s=128&d=identicon&r=PG&f=1", "display_name": "Exascale", "link": "https://stackoverflow.com/users/943098/exascale"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1426701038, "post_id": 29129133, "comment_id": 46484118, "body": "@tadman I&#39;m pretty new to C++ so I figured I would use the exact size I needed without thinking of any hidden characters. Problem solved."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1426701123, "post_id": 29129133, "comment_id": 46484182, "body": "There is no &quot;exact size needed&quot; when reading from <code>stdin</code>. You have <i>zero</i> control over what&#39;s coming in, so it could be two bytes, or two gigabytes. Use <code>std::string</code>. Fixed sized buffers will almost always bite you hard. Don&#39;t use them unless you literally have no other choice."}, {"owner": {"reputation": 1297, "user_id": 4049863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b88901438bae8aadeeb93f33cc7e88c?s=128&d=identicon&r=PG&f=1", "display_name": "G&#233;za T&#246;r&#246;k", "link": "https://stackoverflow.com/users/4049863/g%c3%a9za-t%c3%b6r%c3%b6k"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1426701160, "post_id": 29129133, "comment_id": 46484203, "body": "Weird... <code>operator&gt;&gt;</code> returns an <code>istream&amp;</code>, which the same object as the one it&#39;s called on so there should  be no difference (by the standard). But as @tadman said, you simply do not allocate enough memory to store your input."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 2, "creation_date": 1426701165, "post_id": 29129133, "comment_id": 46484207, "body": "Safe and correct programs are more important than saving a few bytes. If you are new I suggest you use <code>std::vector</code> and <code>std::string</code> instead of arrays. It will save you so much pain."}], "answers": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 7, "last_activity_date": 1426701045, "creation_date": 1426701045, "answer_id": 29129234, "question_id": 29129133, "link": "https://stackoverflow.com/questions/29129133/data-not-correctly-read-from-file-using-operator/29129234#29129234", "title": "Data not correctly read from file using &gt;&gt; operator", "body": "<p>The string <code>\"AAA\"</code> is not three characters long.  You have three visible characters and one non visible null character.  This means to hold <code>\"AAA\"</code> you need four characters worth of storage.  If you use a <code>std::string</code> this becomes a non issue as it takes care of things like this for you.  Since you just have this tagged as C++ I would change <code>char str1[3], str2[3];</code> to <code>std::string str1, str2;</code></p>\n"}], "owner": {"reputation": 840, "user_id": 943098, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/079c936c76ab374f99302a6e604d6df5?s=128&d=identicon&r=PG&f=1", "display_name": "Exascale", "link": "https://stackoverflow.com/users/943098/exascale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1426701045, "creation_date": 1426700736, "question_id": 29129133, "link": "https://stackoverflow.com/questions/29129133/data-not-correctly-read-from-file-using-operator", "title": "Data not correctly read from file using &gt;&gt; operator", "body": "<p>I have a data file with 3 columns in each row: Two 3 character strings and a float like this.</p>\n\n<pre><code>AAA BBB 699.25\n</code></pre>\n\n<p>I'm trying to read in the data using ifstream like this:</p>\n\n<pre><code>    ifstream input;\n\n    char str1[3], str2[3];\n    float num;\n\n    input.open(\"data.txt\");\n\n    input &gt;&gt; str1 &gt;&gt; str2 &gt;&gt; num;\n    cout &lt;&lt; str1 &lt;&lt; endl;\n    cout &lt;&lt; str2 &lt;&lt; endl;\n    cout &lt;&lt; num &lt;&lt; endl;\n</code></pre>\n\n<p>However the output I get with Clang is:</p>\n\n<pre><code>(blank)\nBBB\n699.25\n</code></pre>\n\n<p>Or Intel C++ this:</p>\n\n<pre><code>AAABBB\nBBB\n699.25\n</code></pre>\n\n<p>If I get the individual variables without multiple \">>\" operators all works correctly. I'm guessing I don't understand how >> works and it's overwriting my data in the buffer as I push more into the array.</p>\n"}, {"tags": ["c++", "qt5", "qtreeview", "qitemdelegate"], "answers": [{"owner": {"reputation": 150, "user_id": 2875739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cd1276df18022939c2b6c7682426b88?s=128&d=identicon&r=PG&f=1", "display_name": "CheshireChild", "link": "https://stackoverflow.com/users/2875739/cheshirechild"}, "is_accepted": true, "score": 0, "last_activity_date": 1426770138, "creation_date": 1426770138, "answer_id": 29145321, "question_id": 29129119, "link": "https://stackoverflow.com/questions/29129119/qt-qtreeview-display-two-string-on-a-row/29145321#29145321", "title": "Qt: QTreeView display two string on a row", "body": "<p>As SGaist suggested on <a href=\"http://forum.qt.io/topic/52373/qt-qtreeview-display-two-string-on-a-single-row/4\" rel=\"nofollow\">this post</a> I only had to do : </p>\n\n<pre><code>_ui-&gt;DevicesAndPlaylistList-&gt;setSelectionBehavior(QAbstractItemView::SelectRows);\n</code></pre>\n\n<p>now it works like a charm :)</p>\n"}], "owner": {"reputation": 150, "user_id": 2875739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cd1276df18022939c2b6c7682426b88?s=128&d=identicon&r=PG&f=1", "display_name": "CheshireChild", "link": "https://stackoverflow.com/users/2875739/cheshirechild"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 381, "favorite_count": 0, "accepted_answer_id": 29145321, "answer_count": 1, "score": 1, "last_activity_date": 1426770138, "creation_date": 1426700687, "last_edit_date": 1426701534, "question_id": 29129119, "link": "https://stackoverflow.com/questions/29129119/qt-qtreeview-display-two-string-on-a-row", "title": "Qt: QTreeView display two string on a row", "body": "<p>I'm using Qt 5.4 and looking for a way to display two string on a single row like this picture:</p>\n\n<p><img src=\"https://i.stack.imgur.com/nStIv.png\" alt=\"enter image description here\"></p>\n\n<p>But the closest result I can achieve is this (with two rows), and it looks rather horrible:</p>\n\n<p><img src=\"https://i.stack.imgur.com/BgLf3.png\" alt=\"enter image description here\"></p>\n\n<p>DevicesAndPlaylistModel.h</p>\n\n<pre><code>#ifndef DEVICESANDPLAYLISTMODEL_H\n#define DEVICESANDPLAYLISTMODEL_H\n\n#include &lt;QStandardItemModel&gt;\n\nclass QModelIndex;\nclass DevicesAndPlayListModel : public QStandardItemModel\n{\n    Q_OBJECT\npublic:\n    DevicesAndPlayListModel();\n    ~DevicesAndPlayListModel();\n\n    QModelIndex indexFromInternalName(QString );\n\nprivate:\n    void insertBlankItem();\n\n\n    QList&lt;QStandardItem *&gt; _items;\n};\n\n#endif // DEVICESANDPLAYLISTMODEL_H\n</code></pre>\n\n<p>DevicesAndPlaylistModel.cpp</p>\n\n<pre><code>#include &lt;QDebug&gt;\n\n#include \"DevicesAndPlaylistModel.h\"\n#include \"Special/MTP/MTP.h\"\n\n\nDevicesAndPlayListModel::DevicesAndPlayListModel()\n{\n    setColumnCount(2);\n\n    QStandardItem *LibraryItem = new QStandardItem();\n    LibraryItem-&gt;setText(\"Library\");\n    LibraryItem-&gt;setFlags(Qt::NoItemFlags);\n    LibraryItem-&gt;setEnabled(false);\n    QStandardItem *DevicesItem = new QStandardItem();\n    DevicesItem-&gt;setText(\"Devices\");\n    DevicesItem-&gt;setFlags(Qt::NoItemFlags);\n    DevicesItem-&gt;setEnabled(false);\n    QStandardItem *PlayListItem = new QStandardItem();\n    PlayListItem-&gt;setText(\"Playlists\");\n    PlayListItem-&gt;setFlags(Qt::NoItemFlags);\n    PlayListItem-&gt;setEnabled(false);\n    QStandardItem *PluginsItem = new QStandardItem();\n    PluginsItem-&gt;setText(\"Plugins\");\n    PluginsItem-&gt;setFlags(Qt::NoItemFlags);\n    PluginsItem-&gt;setEnabled(false);\n\n    QStandardItem *AlbumItem = new QStandardItem();\n    AlbumItem-&gt;setText(\"Albums\");\n    AlbumItem-&gt;setData(\"Library_albumView\", Qt::UserRole);\n    QStandardItem *TrackItem = new QStandardItem();\n    TrackItem-&gt;setText(\"Track\");\n    TrackItem-&gt;setData(\"Library_trackView\", Qt::UserRole);\n    QStandardItem *ArtistItem = new QStandardItem();\n    ArtistItem-&gt;setText(\"Artists\");\n    ArtistItem-&gt;setData(\"Library_artistsView\", Qt::UserRole);\n    QStandardItem *ComposerItem = new QStandardItem();\n    ComposerItem-&gt;setText(\"Composer\");\n    ComposerItem-&gt;setData(\"Library_composerView\", Qt::UserRole);\n    QStandardItem *GenreItem = new QStandardItem();\n    GenreItem-&gt;setText(\"Genre\");\n    GenreItem-&gt;setData(\"Library_genreView\", Qt::UserRole);\n\n    MTP *mtp = new MTP();\n    QMap&lt;QString, QString&gt; data = mtp-&gt;getSnAndNames();\n    for(int deviceIndex = 0; deviceIndex &lt; data.count(); deviceIndex++)\n    {\n        QList&lt;QStandardItem *&gt; items;\n        QStandardItem *item = new QStandardItem();\n\n        QString SerialNumber = data.keys().at(deviceIndex);\n        QString Name = data.values().at(deviceIndex);\n\n        item-&gt;setText(Name);\n        item-&gt;setData(\"Devices\", Qt::UserRole);\n        item-&gt;setData(SerialNumber, Qt::UserRole+1);\n\n\n        QStandardItem * col = new QStandardItem(\"100%\");\n        col-&gt;setTextAlignment(Qt::AlignRight);\n\n        items &lt;&lt; item &lt;&lt; col;\n\n        DevicesItem-&gt;appendRow(items);\n    }\n\n    _items &lt;&lt; LibraryItem\n          &lt;&lt; DevicesItem\n          &lt;&lt; PlayListItem\n          &lt;&lt; PluginsItem\n          &lt;&lt; AlbumItem\n          &lt;&lt; TrackItem\n          &lt;&lt; ArtistItem\n          &lt;&lt; ComposerItem\n          &lt;&lt; GenreItem;\n\n    LibraryItem-&gt;appendRow(AlbumItem);\n    LibraryItem-&gt;appendRow(TrackItem);\n    LibraryItem-&gt;appendRow(ArtistItem);\n    LibraryItem-&gt;appendRow(ComposerItem);\n    LibraryItem-&gt;appendRow(GenreItem);\n\n    insertRow(rowCount(), LibraryItem);\n    insertBlankItem();\n    insertRow(rowCount(), DevicesItem);\n    insertBlankItem();\n    insertRow(rowCount(), PlayListItem);\n    insertBlankItem();\n    insertRow(rowCount(), PluginsItem);\n}\n\nDevicesAndPlayListModel::~DevicesAndPlayListModel()\n{\n\n}\n\nQModelIndex DevicesAndPlayListModel::indexFromInternalName(QString name)\n{\n    for(int itemsIndex = 0; itemsIndex &lt; _items.count(); itemsIndex++)\n    {\n        if(_items.at(itemsIndex)-&gt;data(Qt::UserRole).toString() == name)\n            return _items.at(itemsIndex)-&gt;index();\n    }\n    return QModelIndex();\n}\n\nvoid DevicesAndPlayListModel::insertBlankItem()\n{\n    QStandardItem *blankItem = new QStandardItem();\n    blankItem-&gt;setFlags(Qt::NoItemFlags);\n    blankItem-&gt;setEnabled(false);\n    insertRow(rowCount(), blankItem);\n}\n</code></pre>\n\n<p>MainWindow.cpp -> constructor</p>\n\n<pre><code>MainWindowController::MainWindowController(QWidget *aParent) :\n    QMainWindow(aParent),\n    _ui(new Ui::MainWindowView)\n{\n    _ui-&gt;setupUi(this);\n\n_devicseAndPlaylistModel = new DevicesAndPlayListModel();\n//DevicesAndPlaylistList is the QTreeView\n    _ui-&gt;DevicesAndPlaylistList-&gt;setModel(_devicesAndPlaylistModel);\n    _ui-&gt;DevicesAndPlaylistList-&gt;header()-&gt;close();\n    _ui-&gt;DevicesAndPlaylistList-&gt;expandAll();\n    _ui-&gt;DevicesAndPlaylistList-&gt;setExpandsOnDoubleClick(false);\n    _ui-&gt;DevicesAndPlaylistList-&gt;setRootIsDecorated(false);\n    _ui-&gt;DevicesAndPlaylistList-&gt;setFocusPolicy(Qt::NoFocus);\n}\n</code></pre>\n\n<p>Edit: Posted source code</p>\n"}, {"tags": ["c++", "arrays", "string"], "comments": [{"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1426700500, "post_id": 29129028, "comment_id": 46483797, "body": "<code>char myArray[str1.size() + str2.size() + 1]</code> is not ok, but look for <code>strcpy</code> and <code>strcat</code>"}, {"owner": {"reputation": 77, "user_id": 4485959, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1ce6eda37f42e72463ab2ff1991e1c94?s=128&d=identicon&r=PG&f=1", "display_name": "itsmeciao", "link": "https://stackoverflow.com/users/4485959/itsmeciao"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1426701463, "post_id": 29129028, "comment_id": 46484388, "body": "Edited using dynamic memory instead. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 2, "creation_date": 1426700632, "post_id": 29129089, "comment_id": 46483868, "body": "But you know that a char array isn&#180;t a class?"}], "owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "is_accepted": false, "score": 0, "last_activity_date": 1426700588, "creation_date": 1426700588, "answer_id": 29129089, "question_id": 29129028, "link": "https://stackoverflow.com/questions/29129028/how-to-convert-multiple-strings-into-the-same-char-array/29129089#29129089", "title": "How to convert multiple strings into the same char array?", "body": "<p>use strcpy and strcat:</p>\n\n<pre><code>strcpy(myArray,str1.c_str());\nstrcat(myArray,str2.c_str());\n</code></pre>\n\n<p>although , the expression <code>char myArray[str1.size() + str2.size() + 1]</code> will not compile under C++ , since VLAs are forbidden , use dynamic memory allocation:</p>\n\n<pre><code>char* myArray = new char[str1.size() + str2.size() + 1]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 1, "creation_date": 1426700799, "post_id": 29129103, "comment_id": 46483971, "body": "Though I would use strncpy."}, {"owner": {"reputation": 1297, "user_id": 4049863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b88901438bae8aadeeb93f33cc7e88c?s=128&d=identicon&r=PG&f=1", "display_name": "G&#233;za T&#246;r&#246;k", "link": "https://stackoverflow.com/users/4049863/g%c3%a9za-t%c3%b6r%c3%b6k"}, "edited": false, "score": 0, "creation_date": 1426700837, "post_id": 29129103, "comment_id": 46483995, "body": "It&#39;s safer to use <code>strncpy</code> though."}], "owner": {"reputation": 59167, "user_id": 134713, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/5143bb3f979be36f8508d2605b215a4d?s=128&d=identicon&r=PG", "display_name": "Vijay", "link": "https://stackoverflow.com/users/134713/vijay"}, "is_accepted": true, "score": 2, "last_activity_date": 1426755713, "last_edit_date": 1426755713, "creation_date": 1426700650, "answer_id": 29129103, "question_id": 29129028, "link": "https://stackoverflow.com/questions/29129028/how-to-convert-multiple-strings-into-the-same-char-array/29129103#29129103", "title": "How to convert multiple strings into the same char array?", "body": "<pre><code>strcpy(myarray,(str1+str2).c_str())\n</code></pre>\n\n<p>or </p>\n\n<pre><code>strncpy(myarray,(str1+str2).c_str(),(str1+str2).length())\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 1, "creation_date": 1426701074, "post_id": 29129125, "comment_id": 46484151, "body": "I like this one.  It&#39;s idiomatic."}], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": false, "score": 4, "last_activity_date": 1426701042, "last_edit_date": 1426701042, "creation_date": 1426700709, "answer_id": 29129125, "question_id": 29129028, "link": "https://stackoverflow.com/questions/29129028/how-to-convert-multiple-strings-into-the-same-char-array/29129125#29129125", "title": "How to convert multiple strings into the same char array?", "body": "<p>You could use another <code>string</code> to combine the two:</p>\n\n<pre><code>auto myArray = str1 + str2;\n</code></pre>\n\n<p>You can then access the underlying (constant!) <code>char</code> array with the <code>.c_str</code> method or, if you want to modify certain characters, access them with the <code>operator[]</code> on <code>string</code>.</p>\n\n<p>If you need an actual, modifiable <code>char*</code> style array, use <code>std::vector</code>:</p>\n\n<pre><code>std::vector&lt;char&gt; myArray (str1.begin(), str1.end());\nmyArray.insert(myArray.end(), str2.begin(), str2.end());\nmyArray.push_back('\\0');  // If the array should be zero terminated\n</code></pre>\n\n<p>You can then access the underlying, modifiable <code>char</code> array with the <code>.data</code> method.</p>\n\n<p>Note that variable length arrays like <code>char myArray[str1.size() + str2.size() + 1]</code> are a compiler extension that only works on certain compilers. They are not standard C++.</p>\n"}], "owner": {"reputation": 77, "user_id": 4485959, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1ce6eda37f42e72463ab2ff1991e1c94?s=128&d=identicon&r=PG&f=1", "display_name": "itsmeciao", "link": "https://stackoverflow.com/users/4485959/itsmeciao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 930, "favorite_count": 0, "accepted_answer_id": 29129103, "answer_count": 3, "score": 0, "last_activity_date": 1426755713, "creation_date": 1426700424, "last_edit_date": 1426701426, "question_id": 29129028, "link": "https://stackoverflow.com/questions/29129028/how-to-convert-multiple-strings-into-the-same-char-array", "title": "How to convert multiple strings into the same char array?", "body": "<p>I need a way to convert multiple strings into the same char array. For example if I have </p>\n\n<pre><code>string str1;\nstring str2;\nchar *myArray = new char[str1.size() + str2.size() + 1];\n</code></pre>\n\n<p>What's the best way to add the string characters into <code>myArray</code>?</p>\n"}, {"tags": ["c++", "string", "fstream", "randomaccessfile"], "comments": [{"owner": {"reputation": 1605, "user_id": 1339615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6MHBM.png?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/1339615/julian"}, "edited": false, "score": 0, "creation_date": 1426715199, "post_id": 29129016, "comment_id": 46492359, "body": "What are <code>clientData</code> and <code>cliente</code>?"}, {"owner": {"reputation": 1138, "user_id": 1141332, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/289d9e007b4825c6961659b64dffbf7f?s=128&d=identicon&r=PG", "display_name": "Jozef Leg&#233;ny", "link": "https://stackoverflow.com/users/1141332/jozef-leg%c3%a9ny"}, "edited": false, "score": 2, "creation_date": 1426715418, "post_id": 29129016, "comment_id": 46492461, "body": "I do not really see what you are doing here, but it looks like you take the pointer to the beginning of the string, write &#39;AVeryLongWord0&#39; inside, then you overwrite the same memory by putting &#39;ShortOne&#39; at the beginning of it. This naturally results in the mangled word you get. Could you write a minimal program illustrating your problem rather than dumping your whole thing? You&#39;ll probably identify the problem in the process."}, {"owner": {"reputation": 3, "user_id": 4594178, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yrSX7.jpg?s=128&g=1", "display_name": "RainMaker", "link": "https://stackoverflow.com/users/4594178/rainmaker"}, "reply_to_user": {"reputation": 1605, "user_id": 1339615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6MHBM.png?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/1339615/julian"}, "edited": false, "score": 0, "creation_date": 1426788079, "post_id": 29129016, "comment_id": 46525117, "body": "@AtlasC1 clientData and cliente are objects of the ClientData class."}, {"owner": {"reputation": 3, "user_id": 4594178, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yrSX7.jpg?s=128&g=1", "display_name": "RainMaker", "link": "https://stackoverflow.com/users/4594178/rainmaker"}, "edited": false, "score": 0, "creation_date": 1426788408, "post_id": 29129016, "comment_id": 46525291, "body": "@Josef Leg&#233;ny (YOU WERE RIGHT) I found the problem. It was in the code I posted. I started reviewing from the start until the end and I saw that I was inserting the null character in the wrong string. I inserted the &#39;\\0&#39; in the fName string instead of firstName were the copy function never coipied the null char."}], "owner": {"reputation": 3, "user_id": 4594178, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yrSX7.jpg?s=128&g=1", "display_name": "RainMaker", "link": "https://stackoverflow.com/users/4594178/rainmaker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1426714959, "creation_date": 1426700402, "last_edit_date": 1426714959, "question_id": 29129016, "link": "https://stackoverflow.com/questions/29129016/extra-characters-inserted-in-strings-i-inserted-the-null-character-0", "title": "extra characters inserted in strings (I inserted the null character &#39;\\0&#39;)", "body": "<p>I've been having troubles with the read() member function of the fstream object of the STL. I have a class ClientData with four members variables (int accountNumber, string firstName, string lastName, double balance).</p>\n\n<p><strong>When I read the information, I get some extra characters at the end of each string that were not typed. If I type \"AVeryLongWord\" and after that a \"ShortOne\" the result is \"ShortOnegWord\" or something of the sort.</strong></p>\n\n<p>I have a ClientData object called clientData and to store/retrieve the information, I use the following statements:</p>\n\n<p>To write:</p>\n\n<pre><code>nombrArchivo.write(reinterpret_cast&lt;const char*&gt;(&amp;clientData), sizeof(clientData));\n</code></pre>\n\n<p>And to read the data I use:</p>\n\n<pre><code>archivo.seekg(0);\narchivo.read(reinterpret_cast&lt; char*&gt;(&amp;cliente), sizeof(ClientData));\n</code></pre>\n\n<p>To set the strings I use:</p>\n\n<pre><code>int length = fName.size();\nlength = length&lt;15?length:14;\nfName.copy(firstName, length);\nfName[length]='\\0';\n</code></pre>\n\n<p>The whole thing is <a href=\"https://drive.google.com/folderview?id=0BzO7yVs6k0ZCMGtEdnl2Q0FLT28&amp;usp=sharing\" rel=\"nofollow\">here</a>. It's a CodeBlocks(13.12) project with Mingw (GCC 4.6).</p>\n"}]