[{"tags": ["c++", "inheritance", "casting"], "answers": [{"tags": [], "owner": {"reputation": 14411, "user_id": 52724, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c1e5bf4421007b7cfe4dba5ecb24f777?s=128&d=identicon&r=PG", "display_name": "Karl Nicoll", "link": "https://stackoverflow.com/users/52724/karl-nicoll"}, "is_accepted": true, "score": 4, "last_activity_date": 1481757049, "creation_date": 1481757049, "answer_id": 41153836, "question_id": 41153764, "link": "https://stackoverflow.com/questions/41153764/cannot-convert-argument-1-from-stdshared-ptrchasestate-to-stdshared-ptr/41153836#41153836", "title": "cannot convert argument 1 from &#39;std::shared_ptr&lt;ChaseState&gt;&#39; to &#39;std::shared_ptr&lt;State&lt;Cow&gt;&gt;", "body": "<p>You need to declare your inheritance <code>public</code>. Class inheritance is private by default, meaning that you cannot cast from <code>Derived</code> to <code>Base</code> because the inheritance is not recognized outside of the class itself (same as how private members cannot be accessed outside the class).</p>\n\n<p>To fix, make your inheritance public:</p>\n\n<pre><code>class ChaseState : public State&lt;Cow&gt;\n//                 ^^^^^^\n</code></pre>\n"}], "owner": {"reputation": 9876, "user_id": 1667868, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/01faa51ea5dddd44aeeb572d4b45c835?s=128&d=identicon&r=PG&f=1", "display_name": "Sven van den Boogaart", "link": "https://stackoverflow.com/users/1667868/sven-van-den-boogaart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1015, "favorite_count": 0, "accepted_answer_id": 41153836, "answer_count": 1, "score": 3, "last_activity_date": 1481757328, "creation_date": 1481756672, "last_edit_date": 1481757328, "question_id": 41153764, "link": "https://stackoverflow.com/questions/41153764/cannot-convert-argument-1-from-stdshared-ptrchasestate-to-stdshared-ptr", "title": "cannot convert argument 1 from &#39;std::shared_ptr&lt;ChaseState&gt;&#39; to &#39;std::shared_ptr&lt;State&lt;Cow&gt;&gt;", "body": "<p>When trying to call a method <code>setCurrentState</code> Im getting the error:</p>\n\n<blockquote>\n  <p>StateMachine&lt;Cow>::setCurrentState(std::shared_ptr&lt;State&lt;Cow>>)':\n  cannot convert argument 1 from 'std::shared_ptr&lt;ChaseState>' to\n  'std::shared_ptr&lt;State&lt;Cow>>'</p>\n</blockquote>\n\n<p>This indicates that a <code>std::shared_ptr&lt;ChaseState&gt;</code> is not a <code>std::shared_ptr&lt;State&lt;Cow&gt;&gt;</code> but why is it not?</p>\n\n<p>The call to the function:</p>\n\n<pre><code>std::shared_ptr&lt;ChaseState&gt; initialState = std::make_shared&lt;ChaseState&gt;();\nm_stateMachine-&gt;setCurrentState(initialState);\n</code></pre>\n\n<p><strong>State.h</strong></p>\n\n<pre><code>#pragma once\ntemplate &lt;class entity_type&gt;\nclass State\n{\npublic:\n    virtual void enter(entity_type*) = 0;\n    virtual void execute(entity_type*) = 0;\n    virtual void exit(entity_type*) = 0;\n};\n</code></pre>\n\n<p><strong>ChaseState.h</strong></p>\n\n<pre><code>class Cow;\nclass ChaseState : State&lt;Cow&gt;\n{\npublic:\n    ChaseState();\n\n    // Inherited via State\n    virtual void enter(Cow*) override;\n    virtual void execute(Cow*) override;\n    virtual void exit(Cow*) override;\n};\n</code></pre>\n\n<p>In my StateMachine I have private variable:</p>\n\n<pre><code>std::shared_ptr&lt;State&lt;entity_type&gt;&gt; m_currentState;\n</code></pre>\n\n<p>and the setCurrentState function:</p>\n\n<pre><code>void setCurrentState(std::shared_ptr&lt;State&lt;entity_type&gt;&gt; s) { m_currentState = s; }\n</code></pre>\n\n<p>As I understand the derived class ChaseState is a State (behause it inherits from state). </p>\n"}, {"tags": ["c++", "templates", "struct"], "comments": [{"owner": {"reputation": 1658, "user_id": 2033752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ee5cd7850fc71aaaf7aee4d9089c2e7?s=128&d=identicon&r=PG", "display_name": "Patryk Obara", "link": "https://stackoverflow.com/users/2033752/patryk-obara"}, "edited": false, "score": 2, "creation_date": 1481757563, "post_id": 41153711, "comment_id": 69509756, "body": "This piece of code does not compile due to missing nextPrime and getOpenBucket implementation, also - you do not allocate items properly (either use operator new[] or even better, change raw pointer into smart one). There are no template issues in here"}, {"owner": {"reputation": 141, "user_id": 5685655, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cb46e9a4b8938f516684f76d7a01190d?s=128&d=identicon&r=PG&f=1", "display_name": "shtuken", "link": "https://stackoverflow.com/users/5685655/shtuken"}, "reply_to_user": {"reputation": 1658, "user_id": 2033752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ee5cd7850fc71aaaf7aee4d9089c2e7?s=128&d=identicon&r=PG", "display_name": "Patryk Obara", "link": "https://stackoverflow.com/users/2033752/patryk-obara"}, "edited": false, "score": 0, "creation_date": 1481758092, "post_id": 41153711, "comment_id": 69509901, "body": "I&#39;ve removed nextPrime and getOpenBucket. By using new[], do you mean use <code>items = new Bucket[B]</code> instead of what I currently have? Because that has given me the same error in the past. I can&#39;t use smart pointers because I have to compile on a c++ &#39;98 Linux machine :("}, {"owner": {"reputation": 1658, "user_id": 2033752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ee5cd7850fc71aaaf7aee4d9089c2e7?s=128&d=identicon&r=PG", "display_name": "Patryk Obara", "link": "https://stackoverflow.com/users/2033752/patryk-obara"}, "edited": false, "score": 0, "creation_date": 1481758499, "post_id": 41153711, "comment_id": 69510017, "body": "Yes, you need to allocate memory if you want to create table dynamically. Machine, that you&#39;re using doesn&#39;t matter - if you have new compiler available, then you can use new standard - and you&#39;re using c++11 feature in this code anyway (&quot;int keyVal = -1;&quot;). After these changes (and putting Bucket in the beginning of class) I am compiling your code without an issue."}, {"owner": {"reputation": 1658, "user_id": 2033752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ee5cd7850fc71aaaf7aee4d9089c2e7?s=128&d=identicon&r=PG", "display_name": "Patryk Obara", "link": "https://stackoverflow.com/users/2033752/patryk-obara"}, "edited": false, "score": 0, "creation_date": 1481758771, "post_id": 41153711, "comment_id": 69510096, "body": "BTW, statement that you marked as &quot;ERROR: undeclared identifier&quot; simply has no effect - you should remove it (but it&#39;s not an error, merely generates a warning)."}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 5685655, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cb46e9a4b8938f516684f76d7a01190d?s=128&d=identicon&r=PG&f=1", "display_name": "shtuken", "link": "https://stackoverflow.com/users/5685655/shtuken"}, "edited": false, "score": 0, "creation_date": 1481757910, "post_id": 41153895, "comment_id": 69509839, "body": "Even after moving the struct declaration to the beginning of the class I am still receiving the <code>hashtable.h(64): error C2065: &#39;keyValue&#39;: undeclared identifier</code> error. Could this have anything to do with my declaration of the my HashTable in another class? <code>HashTable&lt;Customer&gt; * customers = new HashTable&lt;Customer&gt;(10000);</code>  And thanks for the namespace tip, I&#39;ll fix that right away!"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 141, "user_id": 5685655, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cb46e9a4b8938f516684f76d7a01190d?s=128&d=identicon&r=PG&f=1", "display_name": "shtuken", "link": "https://stackoverflow.com/users/5685655/shtuken"}, "edited": false, "score": 0, "creation_date": 1481758323, "post_id": 41153895, "comment_id": 69509963, "body": "<code>items = new Bucket[B];</code> you forgot the <code>new</code>"}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": true, "score": 0, "last_activity_date": 1481758358, "last_edit_date": 1481758358, "creation_date": 1481757483, "answer_id": 41153895, "question_id": 41153711, "link": "https://stackoverflow.com/questions/41153711/unable-to-access-struct-members-within-template/41153895#41153895", "title": "Unable to Access Struct Members within Template", "body": "<p>You have to declare <code>Bucket</code> before you use it. </p>\n\n<pre><code>template&lt;class T&gt;\nclass HashTable\n{\n    struct Bucket {\n        T* dataPtr = NULL;\n        int keyVal = -1;\n    };\n\n\npublic:\n\n    HashTable(int numItems) {\n        if (numItems &lt;= 0) {\n            throw std::invalid_argument(\"Invalid HashTable size\");\n        }\n        currItems = 0;\n\n        //B must be the next prime after 2 * numItems\n        B = nextPrime(numItems * 2);\n\n        items = new Bucket[B]; // &lt;-- you forgot the 'new'\n\n        items[0].keyVal; //ERROR: undeclared identifier\n    }\n\n    bool insert(T* newItem, int key) {\n        bool retVal = false;\n\n        if (currItems &lt; B &amp;&amp; newItem != NULL) { //cannot insert to full HashTable\n            int index = getOpenBucket(key);\n\n            items[index].dataPtr = newItem; //ERROR:undeclared\n            items[index].keyVal = key;      //ERROR:undeclared\n\n            retVal = true;\n            currItems++;\n        }\n\n        return retVal;\n    }\n\nprivate:\n\n\n    Bucket * items; //array of buckets\n    int B; //size of itemArray\n    int currItems; //track number of items in HashTable\n\n};\n</code></pre>\n\n<p>ps. do not do this: <code>using namespace std;</code> in header files - ever.</p>\n\n<p>It is evil and antisocial as it poisons the global namespace of every cpp file that includes your header. It's a guaranteed way to ensure that no-one will ever use your library.</p>\n"}], "owner": {"reputation": 141, "user_id": 5685655, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cb46e9a4b8938f516684f76d7a01190d?s=128&d=identicon&r=PG&f=1", "display_name": "shtuken", "link": "https://stackoverflow.com/users/5685655/shtuken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 41153895, "answer_count": 1, "score": 0, "last_activity_date": 1481758358, "creation_date": 1481756414, "last_edit_date": 1481757983, "question_id": 41153711, "link": "https://stackoverflow.com/questions/41153711/unable-to-access-struct-members-within-template", "title": "Unable to Access Struct Members within Template", "body": "<p>I decided to make my HashTable class a template so I could practice making templates, but I've run into a problem. Within my <code>HashTable&lt;T&gt;</code> template, I have a data member array, called <code>items</code> of <code>Bucket</code>s, which is a struct within the <code>HashTable&lt;T&gt;</code> class. After initializing <code>items</code>, I am unable to access the members of <code>Bucket</code> elsewhere in the template's code.</p>\n\n<p>I have tried putting <code>typename</code> and <code>template&lt;class T&gt;</code> before the struct and variable definitions, but was unable to make it work.</p>\n\n<p>Here is a snippet of code that gives me the error <code>'keyValue': undeclared identifier</code></p>\n\n<pre><code>#ifndef HASH_TABLE_\n#define HASH_TABLE_\n\nusing namespace std;\n#include &lt;iostream&gt;\n\ntemplate&lt;class T&gt;\nclass HashTable\n{\n\npublic:\n\nHashTable(int numItems) {\n    if (numItems &lt;= 0) {\n        throw std::invalid_argument(\"Invalid HashTable size\");\n    }\n    currItems = 0;\n\n    //B must be the next prime after 2 * numItems\n    B = 1000;\n\n    items = Bucket[B]; //allocate array of Buckets\n\n    items[0].keyVal; //ERROR: undeclared identifier\n}\n\nbool insert(T* newItem, int key) {\n    bool retVal = false;\n\n    if (currItems &lt; B &amp;&amp; newItem != NULL) { //cannot insert to full HashTable\n        int index = 0;\n\n        items[index].dataPtr = newItem; //ERROR:undeclared\n        items[index].keyVal = key;      //ERROR:undeclared\n\n        retVal = true;\n        currItems++;\n    }\n\n    return retVal;\n}\n\nprivate:\n\nstruct Bucket {\n    T* dataPtr = NULL;\n    int keyVal = -1;\n};\n\nBucket * items; //array of buckets\nint B; //size of itemArray\nint currItems; //track number of items in HashTable\n\n};\n\n#endif\n</code></pre>\n\n<p>Why does <code>items[x]</code> not access a Bucket, such that <code>items[x].keyVal</code> or <code>items[x].dataPtr</code> cannot be used? I've tried different types of initializations, such as <code>items = new Bucket[B]</code>, but that hasn't worked either, so I am assuming my errors lie in the template side of things.</p>\n\n<p>I appreciate any guidance!</p>\n"}, {"tags": ["c++", "dll", "reverse-engineering", "windows-process"], "answers": [{"comments": [{"owner": {"reputation": 18433, "user_id": 826983, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8fc679891e6c3cf3aec3b353f3fb9bd6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Falk", "link": "https://stackoverflow.com/users/826983/stefan-falk"}, "edited": false, "score": 0, "creation_date": 1481764782, "post_id": 41154229, "comment_id": 69511702, "body": "In both cases the process of the game is loading the DLL."}], "tags": [], "owner": {"reputation": 364, "user_id": 5875229, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3JQq.jpg?s=128&g=1", "display_name": "JazzSoft", "link": "https://stackoverflow.com/users/5875229/jazzsoft"}, "is_accepted": false, "score": -1, "last_activity_date": 1481759533, "creation_date": 1481759533, "answer_id": 41154229, "question_id": 41153542, "link": "https://stackoverflow.com/questions/41153542/why-is-jumping-to-the-same-address-working-with-technique-a-but-not-with-b/41154229#41154229", "title": "Why is jumping to the same address working with &quot;technique&quot; A but not with B?", "body": "<p>If the game application loaded the DLL, the DLL is running in the separate process.  Your application is running in the different process.  In the first case the DLL and your application were running in the same process.</p>\n"}], "owner": {"reputation": 18433, "user_id": 826983, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8fc679891e6c3cf3aec3b353f3fb9bd6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Falk", "link": "https://stackoverflow.com/users/826983/stefan-falk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481759533, "creation_date": 1481755615, "last_edit_date": 1481756246, "question_id": 41153542, "link": "https://stackoverflow.com/questions/41153542/why-is-jumping-to-the-same-address-working-with-technique-a-but-not-with-b", "title": "Why is jumping to the same address working with &quot;technique&quot; A but not with B?", "body": "<h2>First things first:</h2>\n\n<p>I have here a few lines of a hack that I wrote:</p>\n\n<p>Here is the definition of a makro <code>luaL_openlib</code> which is actually a function pointer to <code>0x0090DE00</code>:</p>\n\n<pre><code>/*\nType definitions for function signatures\n*/\ntypedef int (luaL__openlib) (lua_State *L, const char *libname, const luaL_reg *l, int nup);\n\n\n/*\nIntercepting macros for function calls.\n*/\n#define luaL_openlib(L, libname, l, nup) ((luaL__openlib*) 0x0090DE00)(L, libname, l, nup)\n</code></pre>\n\n<p>This is how I am calling it:</p>\n\n<pre><code>static int luaAi_helloworld(lua_State *L)\n{\n    MessageBox(NULL, L\"Hello World\", L\"\", MB_OK);\n    return 1;\n}\n\nstatic const luaL_reg ai_funcs[] = {\n    { \"helloworld\", luaAi_helloworld },\n    { NULL, NULL }\n};\n\nvoid open_ailib(lua_State *L)\n{\n    luaL_openlib(L, \"ai\", ai_funcs, 0);\n}\n</code></pre>\n\n<p>The code above gets compiled into a DLL. The DLL gets loaded by my target process which .exe file I hacked a bit in order to do so.</p>\n\n<p>However: <strong>This works!</strong> </p>\n\n<p>The result is me being able to call <code>ai.helloworld()</code> in a script of a computer game in order to show the \"Hello World\" message box.</p>\n\n<hr>\n\n<h2>The actual thing:</h2>\n\n<p>Now, the code looks a bit messier but it is doing the exact same thing:</p>\n\n<pre><code>static int scse_helloworld (lua_State *L)\n{\n    MessageBox(NULL, L\"Hello World\", L\"\", MB_OK);\n    return 1;\n}\n\nstatic luaL_reg scselib[] = {\n    {\"helloworld\", scse_helloworld},\n    {NULL, NULL}\n};\n\n/*\nType definitions for function signatures\n*/\ntypedef int (luaL__openlib)(lua_State *L, const char *libname, const luaL_reg *l, int nup);\n\n/*\nIntercepting macros for function calls.\n*/\n#define luaL_openlib2(L, libname, l, nup) ((luaL__openlib*) 0x0090de00)(L, libname, l, nup)\n\nSCSE_API int luaopen_scse(lua_State *L)\n{\n    SIZE_T numBytes;\n    const int num_bytes = 16;\n    unsigned char hook[num_bytes];\n\n    HANDLE process = GetCurrentProcess();\n    ReadProcessMemory(process, (LPVOID)(0x0090de00), &amp;hook, sizeof(hook), &amp;numBytes);\n    LOGGER.LogMessage(\"Memory at 0x0090de00 is:\\n\\n\");\n\n    for (int i = 0; i &lt; num_bytes; i++) {\n        LOGGER.LogMessage(\"%2X \", hook[i]);\n    }\n\n    // Link lua linker functions with Supreme Commander lua functions\n    if(LuaLinker::Link())\n    {\n        LOGGER.LogMessage(\"Lua linker functions successefully linked with Supreme Commander Lua functions.\\n\");\n\n        LOGGER.LogMessage(\"luaL_openlib2()\");\n        luaL_openlib2(L, \"scse\", scselib, 0); \n\n        // Spoiler: This is never reached\n        LOGGER.LogMessage(\"SCSE library successefully opened.\\n\");\n    }\n    else { \n        LOGGER.LogMessage(\"ERROR: Couldn't link lua linker functions with Supreme Commander Lua functions!\\n\");\n    }\n\n    return 1;\n}\n</code></pre>\n\n<p>What comes additionally is me reading out the memory at <code>0x0090de00</code>. I can give you the result beforehand:</p>\n\n<pre><code>Memory at 0x0090de00 is:\n\n53 8B 5C 24 14 55 56 8B 74 24 10 57 8B 7C 24 18 \n</code></pre>\n\n<p>which is correct as we can see with OllyDbg - although I already knew that:</p>\n\n<p><a href=\"https://i.stack.imgur.com/UCoKW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UCoKW.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>So, why are you here?</strong></p>\n\n<p>The problem is, any maybe you saw the spoiler comment above, that the log message after <code>luaL_openlib2</code> is never printed. In my logfile all I see is:</p>\n\n<pre><code>Lua linker functions successefully linked with Supreme Commander Lua functions.\nluaL_openlib2()\n</code></pre>\n\n<p>The game loads the start screen but stops functioning. Buttons are not displayed etc. It does not crash but it is dead basically. As I close it, all I get is this one last cry for help:</p>\n\n<p><a href=\"https://i.stack.imgur.com/hIjp6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hIjp6.png\" alt=\"enter image description here\"></a></p>\n\n<p>I am looking for an explanation - I don't understand why this is not working. All I have is a guess:</p>\n\n<p>The DLL I am loading is <em>not</em> loaded by me. It is actually loaded by the script engine of the game. Actually, it should not be possible to load a DLL from within the game. However, since the code above is executed, the DLL <strong>is</strong> loaded. So if the DLL is loaded, maybe the memory got messed up? No, at least not the first 16 bytes of the function I am targeting so I assume, that the rest will be fine too, besides that, what should actually change that - nothing can.</p>\n\n<p>I am not sure if anybody can help me here but this seems like a tough question to me. </p>\n\n<p>Anybody?</p>\n\n<p>Btw: Sorry for the title - feel free to make a suggestion and if you didn't try <a href=\"https://www.faforever.com/\" rel=\"nofollow noreferrer\">Supreme Commander</a> yet, just get it!</p>\n"}, {"tags": ["c++", "sql", "qt", "sqlite", "qsqlquery"], "answers": [{"tags": [], "owner": {"reputation": 3184, "user_id": 6710751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qmR1W.jpg?s=128&g=1", "display_name": "Striezel", "link": "https://stackoverflow.com/users/6710751/striezel"}, "is_accepted": false, "score": 1, "last_activity_date": 1481754570, "creation_date": 1481754570, "answer_id": 41153343, "question_id": 41153173, "link": "https://stackoverflow.com/questions/41153173/sqlite-increment-integer-primary-key-and-unique-constraint-conflict/41153343#41153343", "title": "SQLite increment Integer Primary Key and Unique Constraint conflict", "body": "<p>First: <code>'4'</code> is not a table name. The <code>UPDATE</code> statement expects a table name where you have written <code>'4'</code>. For example:</p>\n\n<pre><code>UPDATE table1 SET row = row + 1 WHERE row &gt;= 2\n</code></pre>\n\n<p>Second: Just do not use <code>row</code> as a primary key (or unique key, for that matter) when it obviously is not meant as primary key but as a changing row number. Create a separate column that can be used as primary index of that table instead.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 7299107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5db0db4372768916f89cefd939cd2fdf?s=128&d=identicon&r=PG&f=1", "display_name": "KiskaJoe", "link": "https://stackoverflow.com/users/7299107/kiskajoe"}, "edited": false, "score": 0, "creation_date": 1481795392, "post_id": 41153376, "comment_id": 69523044, "body": "this works for me. One extra question. I still want that my &quot;row&quot; column to be UNIQUE. And it still restrit such query. Probably problem not in the autoincrement."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 1, "user_id": 7299107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5db0db4372768916f89cefd939cd2fdf?s=128&d=identicon&r=PG&f=1", "display_name": "KiskaJoe", "link": "https://stackoverflow.com/users/7299107/kiskajoe"}, "edited": false, "score": 0, "creation_date": 1481810446, "post_id": 41153376, "comment_id": 69532367, "body": "@KiskaJoe, you&#39;re right that the problem is not in the autoincrement, but you seem not to be getting the main point.  <b>The problem is that the nature of your update is inherently incompatible with the affected column&#39;s uniqueness constraint.</b>  It doesn&#39;t matter that the affected table would satisfy the constraint after all rows were updated (though that&#39;s why my workaround works).  SQLite insists that the table satisfy the constraint after each individual row update comprised by your query, and there is every reason to expect that that requirement will <i>fail</i>."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1481754749, "creation_date": 1481754749, "answer_id": 41153376, "question_id": 41153173, "link": "https://stackoverflow.com/questions/41153173/sqlite-increment-integer-primary-key-and-unique-constraint-conflict/41153376#41153376", "title": "SQLite increment Integer Primary Key and Unique Constraint conflict", "body": "<blockquote>\n  <p>The problem's origin <code>WHERE row &gt;= 2\"</code> part.</p>\n</blockquote>\n\n<p>I'm inclined to disagree.  The problem is not with which rows are updated, it is with the <em>order</em> in which they are updated.</p>\n\n<p>Very likely SQLite will process rows in rowid order, which almost certainly is also increasing order of the <code>row</code> column, since that column is an auto-incremented PK.  Suppose, then, that the table contains two rows with <code>row</code> values <code>2</code> and <code>3</code>.  If it processes the first row first, then it attempts to set that row's <code>row</code> value to <code>3</code>, but that produces a constraint violation because that column is subject to a uniqueness constraint, and there is already a row with value <code>3</code> in that column.</p>\n\n<blockquote>\n  <p>How to overcome this problem?</p>\n</blockquote>\n\n<p>Do not modify PK values, and especially do not modify the values of <em>surrogate</em> PKs, which substantially all auto-increment keys are.</p>\n\n<p>Alternatively, update the rows into a temporary table, clear the original table, and copy the updated values back into it.  This can be extremely messy if you have any FKs referencing this PK, however, so go back to the \"Do not modify PK values\" advice that I led off with.</p>\n"}], "owner": {"reputation": 1, "user_id": 7299107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5db0db4372768916f89cefd939cd2fdf?s=128&d=identicon&r=PG&f=1", "display_name": "KiskaJoe", "link": "https://stackoverflow.com/users/7299107/kiskajoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 537, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1481754749, "creation_date": 1481753784, "last_edit_date": 1481754090, "question_id": 41153173, "link": "https://stackoverflow.com/questions/41153173/sqlite-increment-integer-primary-key-and-unique-constraint-conflict", "title": "SQLite increment Integer Primary Key and Unique Constraint conflict", "body": "<p>I have a SQLite database.\nWhen writing move rows function, which moves rows from one table to another I need to have a query for incrementing column with name \"row\" which is INTEGER PRIMARY KEY, but there is an error. It is critical to have indexing with row in my task. The condition in example is <code>WHERE row &gt;= 2</code> because i am inserting rows from other table into position 2.</p>\n\n<p><code>\"UPDATE '4' SET row = row + 1 WHERE row &gt;= 2\"</code></p>\n\n<p><code>Error(\"19\", \"Unable to fetch row\", \"UNIQUE constraint failed: 4.row\")</code></p>\n\n<p>The problem's origin <code>WHERE row &gt;= 2\"</code> part. How to overcome this problem?</p>\n"}, {"tags": ["c++", "thread-safety", "cout"], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 3, "last_activity_date": 1481753786, "creation_date": 1481753786, "answer_id": 41153174, "question_id": 41153079, "link": "https://stackoverflow.com/questions/41153079/thread-safe-stdcout/41153174#41153174", "title": "Thread safe std::cout", "body": "<p>Your problem is here: <code>std::lock_guard&lt;std::mutex&gt;{global_mtx};</code> creates a lock guard and immediately releases it. You need to create a variable to hold the lock, like <code>std::lock_guard&lt;std::mutex&gt; lock{global_mtx};</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 907, "user_id": 5344725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afe3363c7df76a6ddf2114b5b8793554?s=128&d=identicon&r=PG&f=1", "display_name": "Altainia", "link": "https://stackoverflow.com/users/5344725/altainia"}, "is_accepted": false, "score": 0, "last_activity_date": 1481754081, "creation_date": 1481754081, "answer_id": 41153250, "question_id": 41153079, "link": "https://stackoverflow.com/questions/41153079/thread-safe-stdcout/41153250#41153250", "title": "Thread safe std::cout", "body": "<p>You create four Timer objects, each one having its own unique mutex object. So when t2 runs its thread, it locks its own mutex and it can because t1 locked a different mutex before beginning its loop.</p>\n"}, {"comments": [{"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1481755578, "post_id": 41153268, "comment_id": 69509012, "body": "Both are useful. The <code>lockio</code> seems cleaner for this problem and also <a href=\"http://coliru.stacked-crooked.com/a/aab44acae4b30d2b\" rel=\"nofollow noreferrer\">works</a> for me with the mutex as a static member variable. The second template option of course has the benefit of working for any function."}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1481757433, "post_id": 41153268, "comment_id": 69509716, "body": "The third one makes clear what is going on. I like the sorcery it uses to define the static mutex in the <code>struct</code>."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 3, "last_activity_date": 1481756995, "last_edit_date": 1481756995, "creation_date": 1481754189, "answer_id": 41153268, "question_id": 41153079, "link": "https://stackoverflow.com/questions/41153079/thread-safe-stdcout/41153268#41153268", "title": "Thread safe std::cout", "body": "<p>One way to prevent forgetting to name the lock is to make a lock object that you can use as an io manipulator:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;chrono&gt;\n#include &lt;thread&gt;\n#include &lt;functional&gt;\n#include &lt;mutex&gt;\n#include &lt;condition_variable&gt;\n\nstd::mutex global_mtx{};\n\nstruct lockio\n{\n    lockio(std::mutex&amp; m) : lock_(m) {}\n\n    std::unique_lock&lt;std::mutex&gt; lock_;\n};\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const lockio&amp;) {\n    return os;\n}\n\nclass Timer {\npublic:\n    Timer(size_t time, const std::function&lt;void(void)&gt;&amp; f) : time{std::chrono::milliseconds{time}}, f{f} {}\n    ~Timer() { wait_thread.join(); }\n\nprivate:\n    void wait_then_call()\n    {\n        std::unique_lock&lt;std::mutex&gt; lck{mtx};\n        for(int i{10}; i &gt; 0; --i) {\n            {\n                std::cout &lt;&lt; lockio(global_mtx) &lt;&lt; \"Thread \" &lt;&lt; wait_thread.get_id() &lt;&lt; \" countdown at: \" &lt;&lt; '\\t' &lt;&lt; i &lt;&lt; std::endl;\n\n            }\n            cv.wait_for(lck, time / 10);\n        }\n        f();\n    }\n    std::mutex mtx;\n    std::condition_variable cv{};\n    std::chrono::milliseconds time;\n    std::function &lt;void(void)&gt; f;\n    std::thread wait_thread{[this]() {wait_then_call(); }};\n};\n\nint main()\n{\n    auto f = []() { std::cout &lt;&lt; lockio(global_mtx) &lt;&lt; \"---------------- I waited to print! ----------------\" &lt;&lt; std::endl; };\n    Timer t1{3'000,f};\n    Timer t2{6'000,f};\n    Timer t3{2'000,f};\n    Timer t4{1'000,f};\n}\n</code></pre>\n\n<p>Another (probably better) way is to create a little helper template function to wrap the protected operations:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;condition_variable&gt;\n\nstd::mutex global_mtx{};\n\ntemplate&lt;class Mutex, class F&gt;\ndecltype(auto) with_lock(Mutex &amp;m, F &amp;&amp;f) {\n    std::lock_guard&lt;Mutex&gt; lock(m);\n    return f();\n};\n\nclass Timer {\npublic:\n    Timer(size_t time, const std::function&lt;void(void)&gt; &amp;f) : time{std::chrono::milliseconds{time}}, f{f} {}\n\n    ~Timer() { wait_thread.join(); }\n\nprivate:\n    void wait_then_call() {\n        std::unique_lock&lt;std::mutex&gt; lck{mtx};\n        for (int i{10}; i &gt; 0; --i) {\n            with_lock(global_mtx, [&amp;] {\n                std::cout &lt;&lt; \"Thread \" &lt;&lt; wait_thread.get_id() &lt;&lt; \" countdown at: \" &lt;&lt; '\\t' &lt;&lt; i &lt;&lt; std::endl;\n            });\n            cv.wait_for(lck, time / 10);\n        }\n        f();\n    }\n\n    std::mutex mtx;\n    std::condition_variable cv{};\n    std::chrono::milliseconds time;\n    std::function&lt;void(void)&gt; f;\n    std::thread wait_thread{[this]() { wait_then_call(); }};\n};\n\nint main() {\n    auto f = []() {\n        with_lock(global_mtx, []\n        {\n            std::cout &lt;&lt; \"---------------- I waited to print! ----------------\" &lt;&lt; std::endl;\n        });\n    };\n    Timer t1{3'000, f};\n    Timer t2{6'000, f};\n    Timer t3{2'000, f};\n    Timer t4{1'000, f};\n}\n</code></pre>\n\n<p>one more way:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;condition_variable&gt;\n\n\nstruct locked {\n\n    std::ostream&amp; cout() const { return std::cout; }\n    std::ostream&amp; cerr() const { return std::cerr; }\n\nprivate:\n    static std::mutex&amp; mutex() {\n        static std::mutex stdio_mutex;\n        return stdio_mutex;\n    }\n    std::unique_lock&lt;std::mutex&gt; lock_{mutex()};\n};\n\nclass Timer {\npublic:\n    Timer(size_t time, const std::function&lt;void(void)&gt; &amp;f) : time{std::chrono::milliseconds{time}}, f{f} {}\n\n    ~Timer() { wait_thread.join(); }\n\nprivate:\n    void wait_then_call() {\n        std::unique_lock&lt;std::mutex&gt; lck{mtx};\n        for (int i{10}; i &gt; 0; --i) {\n            locked().cout() &lt;&lt; \"Thread \" &lt;&lt; wait_thread.get_id() &lt;&lt; \" countdown at: \" &lt;&lt; '\\t' &lt;&lt; i &lt;&lt; std::endl;\n            cv.wait_for(lck, time / 10);\n        }\n        f();\n    }\n\n    std::mutex mtx;\n    std::condition_variable cv{};\n    std::chrono::milliseconds time;\n    std::function&lt;void(void)&gt; f;\n    std::thread wait_thread{[this]() { wait_then_call(); }};\n};\n\nint main() {\n    auto f = []() {\n        locked().cout() &lt;&lt; \"---------------- I waited to print! ----------------\" &lt;&lt; std::endl;\n    };\n    Timer t1{3'000, f};\n    Timer t2{6'000, f};\n    Timer t3{2'000, f};\n    Timer t4{1'000, f};\n}\n</code></pre>\n"}], "owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1184, "favorite_count": 0, "accepted_answer_id": 41153174, "answer_count": 3, "score": 1, "last_activity_date": 1481756995, "creation_date": 1481753355, "last_edit_date": 1495541634, "question_id": 41153079, "link": "https://stackoverflow.com/questions/41153079/thread-safe-stdcout", "title": "Thread safe std::cout", "body": "<p>The following program still interleaves the output to <code>std::cout</code>. I tried to <a href=\"https://stackoverflow.com/a/14718863/1460794\">add a <code>std::mutex</code> to control access</a> to <code>std::cout</code> via <code>std::lock_guard</code>, but it <a href=\"http://coliru.stacked-crooked.com/a/53f7736dc9139784\" rel=\"nofollow noreferrer\">still interleaves</a>. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;chrono&gt;\n#include &lt;thread&gt;\n#include &lt;functional&gt;\n#include &lt;mutex&gt;\n#include &lt;condition_variable&gt;\n\nstd::mutex global_mtx{};\n\nclass Timer {\npublic:\n    Timer(size_t time, const std::function&lt;void(void)&gt;&amp; f) : time{std::chrono::milliseconds{time}}, f{f} {}\n    ~Timer() { wait_thread.join(); }\n\nprivate:\n    void wait_then_call()\n    {\n        std::unique_lock&lt;std::mutex&gt; lck{mtx};\n        for(int i{10}; i &gt; 0; --i) {\n            {\n                std::lock_guard&lt;std::mutex&gt;{global_mtx};\n                std::cout &lt;&lt; \"Thread \" &lt;&lt; wait_thread.get_id() &lt;&lt; \" countdown at: \" &lt;&lt; '\\t' &lt;&lt; i &lt;&lt; std::endl;\n\n            }\n            cv.wait_for(lck, time / 10);\n        }\n        f();\n    }\n    std::mutex mtx;\n    std::condition_variable cv{};\n    std::chrono::milliseconds time;\n    std::function &lt;void(void)&gt; f;\n    std::thread wait_thread{[this]() {wait_then_call(); }};\n};\n\nint main()\n{\n    auto f = []() {std::lock_guard&lt;std::mutex&gt;{global_mtx}; std::cout &lt;&lt; \"---------------- I waited to print! ----------------\" &lt;&lt; std::endl; };\n    Timer t1{3'000,f};\n    Timer t2{6'000,f};\n    Timer t3{2'000,f};\n    Timer t4{1'000,f};\n}\n</code></pre>\n\n<p>Do I need to control access through a separate class or dedicated thread?</p>\n"}, {"tags": ["c++", "twos-complement"], "comments": [{"owner": {"reputation": 3697, "user_id": 1848578, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c7e2bfa9bcb3299428c8321c37db0560?s=128&d=identicon&r=PG", "display_name": "qxz", "link": "https://stackoverflow.com/users/1848578/qxz"}, "edited": false, "score": 5, "creation_date": 1481753406, "post_id": 41153057, "comment_id": 69508224, "body": "It&#39;s a mathematical truth. Bitwise negation and incrementing/decrementing is performed by the hardware; there are usually single assembly instructions for these operations. Although I&#39;d bet modern processors have some higher-level instructions, too, which compilers would take advantage of..."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1481753731, "post_id": 41153057, "comment_id": 69508327, "body": "It&#39;s nobody&#39;s &quot;responsibility&quot;, it&#39;s just a consequence of the twos-complement representation. The bit pattern <code>00000000...0</code> means <code>0</code>, the bit pattern <code>11111111...1</code> means <code>-1</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1481753820, "post_id": 41153057, "comment_id": 69508365, "body": "The part of the CPU that implements arithmetic knows how the representation works. When you multiply a number by <code>-1</code>, it results in a complement + add1."}, {"owner": {"reputation": 574, "user_id": 1275740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63ba36989d13feca9f872cb46b043221?s=128&d=identicon&r=PG", "display_name": "mikeTronix", "link": "https://stackoverflow.com/users/1275740/miketronix"}, "edited": false, "score": 2, "creation_date": 1481754296, "post_id": 41153057, "comment_id": 69508551, "body": "The behavior is defined in the digital logic of the processor&#39;s ALU, the designer of each processor&#39;s digital hardware is &quot;responsible&quot; for this working correctly, and the compiler back end design must ensure that the correct arithmetic instructions are used for each value based on its &quot;type&quot; (e.g. signed vs unsigned)."}, {"owner": {"reputation": 638, "user_id": 388611, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/YhvP8.jpg?s=128&g=1", "display_name": "Drakestar", "link": "https://stackoverflow.com/users/388611/drakestar"}, "edited": false, "score": 0, "creation_date": 1481757390, "post_id": 41153057, "comment_id": 69509701, "body": "Was supposed to say -66. Fixed."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 4, "last_activity_date": 1481754141, "last_edit_date": 1495541634, "creation_date": 1481754141, "answer_id": 41153260, "question_id": 41153057, "link": "https://stackoverflow.com/questions/41153057/who-defines-the-sign-inversion-pattern-for-integers/41153260#41153260", "title": "Who defines the sign inversion pattern for integers?", "body": "<p>It's usually done by the CPU hardware.</p>\n\n<p>Some CPUs have an instruction for calculating the negative of a number. In the x86 architecture, it's the <code>NEG</code> instruction.</p>\n\n<p>If not, it can be done using the multiplication operator, multiplying the number by <code>-1</code>. But many programmers take advantage of the identity that you discovered, and complement the number and then add 1. See</p>\n\n<p><a href=\"https://stackoverflow.com/questions/4534503/how-to-convert-a-positive-number-to-negative-in-assembly\">How to convert a positive number to negative in assembly</a></p>\n"}, {"tags": [], "owner": {"reputation": 70452, "user_id": 1060350, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/XCkw7.jpg?s=128&g=1", "display_name": "Has QUIT--Anony-Mousse", "link": "https://stackoverflow.com/users/1060350/has-quit-anony-mousse"}, "is_accepted": false, "score": 3, "last_activity_date": 1481758051, "last_edit_date": 1481758051, "creation_date": 1481755971, "answer_id": 41153623, "question_id": 41153057, "link": "https://stackoverflow.com/questions/41153057/who-defines-the-sign-inversion-pattern-for-integers/41153623#41153623", "title": "Who defines the sign inversion pattern for integers?", "body": "<p>the reasons for this are simple: consistency with 0 and addition.</p>\n\n<p>You want <strong>addition to work the same for positive and negative numbers</strong> without special cases... in particulary, incrementing -1 by 1 must yield 0.</p>\n\n<p>The only bit sequence, where the classic overflowing increment produces the value of 0 is the all-1 bit sequence. If you increment by 1, you get all zeros. So that is your -1: all 1s, i.e. bitwise negation of 0.\nNow we have (assuming 8 bit integers, incrementing by 1 each line)</p>\n\n<pre><code>-2: 11111110 = ~1\n-1: 11111111 = ~0\n 0: 00000000 = ~-1\n+1: 00000001 = ~-2\n</code></pre>\n\n<p>If you don't like this behavior, you need to handle special cases in addition, and you'll have +0 and -0. Most likely, such a CPU would be a lot slower.</p>\n\n<p>If your question is how</p>\n\n<pre><code>int i = -j;\n</code></pre>\n\n<p>is implemented, that depends on your compiler and CPU and optimization. Usually it will be optimized together with other operations you specify. But don't be surprised if this ends up being performed as</p>\n\n<pre><code>int i = 0 - j;\n</code></pre>\n\n<p>Since this probably takes 1-2 cpu ticks to compute (e.g. as one <code>XOR</code> or a register onto itself to get 0, then a <code>SUB</code> operation to compute <code>0-j</code>), it will barely ever be a bottleneck. Loading <code>j</code> and storing the result <code>i</code> somewhere in memory will be a lot lot lot more expensive. In fact, some CPUs (MIPS?) even have a built-in register that is always zero. Then you don't need a special instruction for negation, you simply subtract j from <code>$zero</code> in usually 1 tick.\nCurrent Intel CPUs are said to recognize such xor operarions and do them in 0 ticks, with register renaming optimizations (i.e. they let the next instruction use a new register that is zero). You have <code>neg</code> on amd64, but a fast <code>xor rax,rax</code> is useful in other situations, too.</p>\n"}, {"comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 1, "creation_date": 1481758953, "post_id": 41153736, "comment_id": 69510148, "body": "Sidebar: implementations of 2s-complement multiplication usually require more resources than 1s-complement multiplication when multiplying mixed-width operands. That&#39;s true whether you do it in hardware or software. E.g. multiplying an 8-bit signed value by 32-bit signed value in 2s-complement requires to sign-extend the 8-bit operand and use the wider, extended value for multiplication. In 1s-complement it&#39;s not a problem: first you extract the signs, then multiply the values as unsigned numbers, then reinsert the sign of the result."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1481756845, "last_edit_date": 1481756845, "creation_date": 1481756543, "answer_id": 41153736, "question_id": 41153057, "link": "https://stackoverflow.com/questions/41153057/who-defines-the-sign-inversion-pattern-for-integers/41153736#41153736", "title": "Who defines the sign inversion pattern for integers?", "body": "<p>C arithmetic is defined in terms of values. When the code is:</p>\n\n<pre><code>int i = 65; \nint j = -i; \n</code></pre>\n\n<p>the compiler will emit whatever CPU instructions are required to give <code>j</code> the value of <code>-65</code>, regardless of the bit representation.</p>\n\n<p>Historically, not all systems used 2's complement. The C compiler would choose a system of negative numbers that leads to the most efficient output for the target CPU, based on the CPU's capabilities. </p>\n\n<p>However 2's complement is a very common choice because it leads to the simplest algorithms for doing arithmetic. For example the same instruction can be used for <code>+</code> <code>-</code> <code>*</code> with signed and unsigned integers.</p>\n"}], "owner": {"reputation": 638, "user_id": 388611, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/YhvP8.jpg?s=128&g=1", "display_name": "Drakestar", "link": "https://stackoverflow.com/users/388611/drakestar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 41153260, "answer_count": 3, "score": 0, "last_activity_date": 1481758051, "creation_date": 1481753211, "last_edit_date": 1481757401, "question_id": 41153057, "link": "https://stackoverflow.com/questions/41153057/who-defines-the-sign-inversion-pattern-for-integers", "title": "Who defines the sign inversion pattern for integers?", "body": "<p>Twos complement means that simply inverting all bits of a number i gets me -i-1:</p>\n\n<p>~0 is -1</p>\n\n<p>~01000001 is 10111110</p>\n\n<p>~65 is -66</p>\n\n<p>etc. To switch the sign of an integer, I have to use the actual minus sign. </p>\n\n<pre><code>int i = 65; int j = -i; \ncout &lt;&lt; j; // -65\n</code></pre>\n\n<p>Where is that actual behavior defined, and whose responsibility is it to ensure the twos complement pattern (to make a number negative invert all bits and add 1) is followed? I don't even know if this is a hardware or compiler operation. </p>\n"}, {"tags": ["c++", "debian", "clang", "iwyu"], "comments": [{"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1481758193, "post_id": 41152982, "comment_id": 69509931, "body": "Does your <code>$PATH enviroment</code> include the folder where iostream is?"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1481759568, "post_id": 41152982, "comment_id": 69510316, "body": "looks like someone has compiled and installed the compiler but not the standard library."}, {"owner": {"reputation": 498, "user_id": 1200508, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/965220ad6ea3192c388fefddda4d948d?s=128&d=identicon&r=PG", "display_name": "Arcadio Alivio Sincero", "link": "https://stackoverflow.com/users/1200508/arcadio-alivio-sincero"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1481895061, "post_id": 41152982, "comment_id": 69570720, "body": "@Ripi2, no it does not.  Why would it need to be?"}, {"owner": {"reputation": 498, "user_id": 1200508, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/965220ad6ea3192c388fefddda4d948d?s=128&d=identicon&r=PG", "display_name": "Arcadio Alivio Sincero", "link": "https://stackoverflow.com/users/1200508/arcadio-alivio-sincero"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1481895252, "post_id": 41152982, "comment_id": 69570841, "body": "@RichardHodges, I didn&#39;t compile the binary.  I used the iwyu binary package that was in the Debian stable repo.  But anyway, like I said in the OP, clang can compile the test program just fine.  If the standard library wasn&#39;t properly installed, then that would&#39;ve failed."}], "owner": {"reputation": 498, "user_id": 1200508, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/965220ad6ea3192c388fefddda4d948d?s=128&d=identicon&r=PG", "display_name": "Arcadio Alivio Sincero", "link": "https://stackoverflow.com/users/1200508/arcadio-alivio-sincero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1588634307, "creation_date": 1481752836, "last_edit_date": 1588634307, "question_id": 41152982, "link": "https://stackoverflow.com/questions/41152982/how-to-use-include-what-you-use-on-debian-8-5", "title": "How to use include-what-you-use on Debian 8.5", "body": "<p>I'm trying to use include-what-you-use on Debian 8.5.  I made a test program that simply includes <code>&lt;iostream&gt;</code> and std::cout's \"Hello, world\" to the terminal.  When I invoke <code>iwyu</code> on it, I get the following:</p>\n\n<blockquote>\n  <p>t1.cpp:1:10: fatal error: 'iostream' file not found</p>\n</blockquote>\n\n<p>Clearly it can't seem to locate the system headers.  I suppose I can force it by using the <code>-I</code> option, but I feel as though I shouldn't have to do that.  Requiring me to tell it where the system headers are leads me to believe that something else is horribly wrong and using <code>-I</code> is just treating the symptom and not the cause.</p>\n\n<p>Incidently, I have verified that invoking clang to compile my test program works just fine.  So clang itself seems to work.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 2, "creation_date": 1481753353, "post_id": 41152968, "comment_id": 69508195, "body": "If you want non-deterministic results use <code>std::random_device</code>"}, {"owner": {"reputation": 2897, "user_id": 3392714, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/302ac6bfbe982dcd53aa123f9bde72eb?s=128&d=identicon&r=PG&f=1", "display_name": "dani", "link": "https://stackoverflow.com/users/3392714/dani"}, "edited": false, "score": 1, "creation_date": 1481754140, "post_id": 41152968, "comment_id": 69508490, "body": "... and initialise e.g. &#39;std::mt19937&#39;, which you use in your &#39;std::uniform_int_distribution&#39;."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1481758745, "post_id": 41152968, "comment_id": 69510085, "body": "Also, you don&#39;t need to write a loop to fill an <code>std::array</code> or any sequence container.  See <a href=\"http://en.cppreference.com/w/cpp/algorithm/generate\" rel=\"nofollow noreferrer\">std::generate</a>"}, {"owner": {"reputation": 35, "user_id": 5771639, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dKPJIehUPUA/AAAAAAAAAAI/AAAAAAAAAB0/p23-sr5IQU8/photo.jpg?sz=128", "display_name": "Mohamed Dame", "link": "https://stackoverflow.com/users/5771639/mohamed-dame"}, "edited": false, "score": 0, "creation_date": 1481759940, "post_id": 41152968, "comment_id": 69510408, "body": "Thank you, I will check std::generate out."}, {"owner": {"reputation": 35, "user_id": 5771639, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dKPJIehUPUA/AAAAAAAAAAI/AAAAAAAAAB0/p23-sr5IQU8/photo.jpg?sz=128", "display_name": "Mohamed Dame", "link": "https://stackoverflow.com/users/5771639/mohamed-dame"}, "edited": false, "score": 0, "creation_date": 1481761231, "post_id": 41152968, "comment_id": 69510780, "body": "Just for the record I do acknowledge the fact that I could&#39;ve formulated the question better. Thanks for the help."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 5771639, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dKPJIehUPUA/AAAAAAAAAAI/AAAAAAAAAB0/p23-sr5IQU8/photo.jpg?sz=128", "display_name": "Mohamed Dame", "link": "https://stackoverflow.com/users/5771639/mohamed-dame"}, "edited": false, "score": 0, "creation_date": 1481760425, "post_id": 41153138, "comment_id": 69510545, "body": "Thanks for the answer!"}], "tags": [], "owner": {"reputation": 1629, "user_id": 2927848, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7e21a18807ebac8e078272cfdeb6b7dd?s=128&d=identicon&r=PG&f=1", "display_name": "Chase R Lewis", "link": "https://stackoverflow.com/users/2927848/chase-r-lewis"}, "is_accepted": false, "score": -1, "last_activity_date": 1481754477, "last_edit_date": 1481754477, "creation_date": 1481753625, "answer_id": 41153138, "question_id": 41152968, "link": "https://stackoverflow.com/questions/41152968/c-how-to-use-random-to-fill-stdarray/41153138#41153138", "title": "c++ - How to use &lt;random&gt; to fill std::array", "body": "<p>You aren't initializing the seed to a random value. So your random generator always starts from the same position. </p>\n\n<p>Here's an example of how to initialize your seed to start from some place. Essentially you need some source that isn't always the same so your generator produces random results, time is the most common value used. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;chrono&gt;\n#include &lt;random&gt;\n\nint main ()\n{\n  typedef std::chrono::high_resolution_clock clock;\n\n\n  std::default_random_engine generator(clock::now().time_since_epoch().count());\n  std::uniform_int_distribution&lt;int&gt; rand(0,1000);\n\n  for(int i = 0;i &lt; 10;i++)\n {\n    std::cout &lt;&lt; rand(generator) &lt;&lt; std::endl;\n }\n\n  return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 5771639, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dKPJIehUPUA/AAAAAAAAAAI/AAAAAAAAAB0/p23-sr5IQU8/photo.jpg?sz=128", "display_name": "Mohamed Dame", "link": "https://stackoverflow.com/users/5771639/mohamed-dame"}, "edited": false, "score": 0, "creation_date": 1481760181, "post_id": 41154116, "comment_id": 69510473, "body": "Thank you for the answer! I have better understanding of it now."}], "tags": [], "owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "is_accepted": true, "score": 3, "last_activity_date": 1481758865, "creation_date": 1481758865, "answer_id": 41154116, "question_id": 41152968, "link": "https://stackoverflow.com/questions/41152968/c-how-to-use-random-to-fill-stdarray/41154116#41154116", "title": "c++ - How to use &lt;random&gt; to fill std::array", "body": "<p>Even if you use <a href=\"http://en.cppreference.com/w/cpp/numeric/random/random_device\" rel=\"nofollow noreferrer\"><code>std::random_device</code></a> there's no guarantee to obtain a different sequence every time:</p>\n\n<blockquote>\n  <p>std::random_device may be implemented in terms of an\n  implementation-defined pseudo-random number engine if a\n  non-deterministic source (e.g. a hardware device) is not available to\n  the implementation. In this case each std::random_device object may\n  generate the same number sequence.</p>\n</blockquote>\n\n<p>That happened, for example, with older g++ implentation of stdlibc++ on Windows.</p>\n\n<p>Moreover, due to performace issues, <code>random_device</code> is generally only used (once) to seed a pseudo random bit generator such as the Mersenne twister engine (<a href=\"http://en.cppreference.com/w/cpp/numeric/random/mersenne_twister_engine\" rel=\"nofollow noreferrer\"><code>std::mt19937</code></a>).</p>\n\n<p>Your fill function could be implemented like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;array&gt;\n#include &lt;iterator&gt;\n#include &lt;random&gt;\n#include &lt;algorithm&gt;\n\ntemplate&lt; class Iter &gt;\nvoid fill_with_random_int_values( Iter start, Iter end, int min, int max)\n{\n    static std::random_device rd;    // you only need to initialize it once\n    static std::mt19937 mte(rd());   // this is a relative big object to create\n\n    std::uniform_int_distribution&lt;int&gt; dist(min, max);\n\n    std::generate(start, end, [&amp;] () { return dist(mte); });\n}\n\nint main()\n{\n    std::array&lt;int, 10&gt; a;\n\n    fill_with_random_int_values(a.begin(), a.end(), 0, 1000);\n\n    for ( int i : a ) std::cout &lt;&lt; i &lt;&lt; ' ';\n    std::cout &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>live demo <a href=\"https://ideone.com/zy5Yg8\" rel=\"nofollow noreferrer\">HERE</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 5771639, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dKPJIehUPUA/AAAAAAAAAAI/AAAAAAAAAB0/p23-sr5IQU8/photo.jpg?sz=128", "display_name": "Mohamed Dame", "link": "https://stackoverflow.com/users/5771639/mohamed-dame"}, "edited": false, "score": 0, "creation_date": 1481759978, "post_id": 41154143, "comment_id": 69510417, "body": "Thank you for the answer! :)"}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 2, "last_activity_date": 1481759030, "creation_date": 1481759030, "answer_id": 41154143, "question_id": 41152968, "link": "https://stackoverflow.com/questions/41152968/c-how-to-use-random-to-fill-stdarray/41154143#41154143", "title": "c++ - How to use &lt;random&gt; to fill std::array", "body": "<p>something along these lines:</p>\n\n<pre><code>#include &lt;random&gt;\n#include &lt;array&gt;\n#include &lt;algorithm&gt;\n\ntemplate&lt;class Engine, class Integer, size_t SIZE&gt;\nvoid fill_array(Engine&amp; eng, std::array&lt;Integer, SIZE&gt;&amp; a, Integer lower = 0, Integer upper = 1000)\n{\n    std::uniform_int_distribution&lt;Integer&gt; uid1(lower, upper);\n\n    std::generate(a.begin(), a.end(), [&amp;]\n    {\n        return uid1(eng);\n    });\n}\n\nint main()\n{\n    std::random_device rnd;  // a source of machine-wide entropy\n    std::default_random_engine eng(rnd()); // use it to initialise the psuedo-random engine\n\n    std::array&lt;int, 100&gt; arr;\n    fill_array(eng, arr);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 5771639, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dKPJIehUPUA/AAAAAAAAAAI/AAAAAAAAAB0/p23-sr5IQU8/photo.jpg?sz=128", "display_name": "Mohamed Dame", "link": "https://stackoverflow.com/users/5771639/mohamed-dame"}, "edited": false, "score": 0, "creation_date": 1481760876, "post_id": 41154313, "comment_id": 69510676, "body": "Thank you for the suggestion. I will definitely keep that in mind. The std::generate is very handy. I was actually trying to solve an exercise so that was why I did the approach I did with an array. It might not be the best approach though as I&#39;ve noticed."}, {"owner": {"reputation": 86, "user_id": 7252814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc296279d5dec570b68ce3ea2b7cc644?s=128&d=identicon&r=PG&f=1", "display_name": "Nate M", "link": "https://stackoverflow.com/users/7252814/nate-m"}, "reply_to_user": {"reputation": 35, "user_id": 5771639, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dKPJIehUPUA/AAAAAAAAAAI/AAAAAAAAAB0/p23-sr5IQU8/photo.jpg?sz=128", "display_name": "Mohamed Dame", "link": "https://stackoverflow.com/users/5771639/mohamed-dame"}, "edited": false, "score": 0, "creation_date": 1481814490, "post_id": 41154313, "comment_id": 69535179, "body": "You can still do the same with an array, it will just take a little more code. However, seeding the random number generator is what&#39;s really important."}], "tags": [], "owner": {"reputation": 86, "user_id": 7252814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc296279d5dec570b68ce3ea2b7cc644?s=128&d=identicon&r=PG&f=1", "display_name": "Nate M", "link": "https://stackoverflow.com/users/7252814/nate-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1481760166, "creation_date": 1481760166, "answer_id": 41154313, "question_id": 41152968, "link": "https://stackoverflow.com/questions/41152968/c-how-to-use-random-to-fill-stdarray/41154313#41154313", "title": "c++ - How to use &lt;random&gt; to fill std::array", "body": "<p>May I suggest using std::vector instead of an array. If you use the std::rand function, you can seed it with time with <code>srand(time(NULL));</code>. Of course you will need to include time.h for this. You can fill the vector with <code>generate(a.begin(), a.end(), rand);</code> without using a loop. This will give you a new random number sequence every time.</p>\n"}], "owner": {"reputation": 35, "user_id": 5771639, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dKPJIehUPUA/AAAAAAAAAAI/AAAAAAAAAB0/p23-sr5IQU8/photo.jpg?sz=128", "display_name": "Mohamed Dame", "link": "https://stackoverflow.com/users/5771639/mohamed-dame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3250, "favorite_count": 0, "accepted_answer_id": 41154116, "answer_count": 4, "score": 1, "last_activity_date": 1482196397, "creation_date": 1481752792, "last_edit_date": 1482196397, "question_id": 41152968, "link": "https://stackoverflow.com/questions/41152968/c-how-to-use-random-to-fill-stdarray", "title": "c++ - How to use &lt;random&gt; to fill std::array", "body": "<p>I am trying new ways to generate random numbers and fill them in an array. So far I have done.</p>\n\n<pre><code>template&lt;size_t SIZE&gt;\nvoid fill_array(array&lt;int, SIZE&gt;&amp; a)\n{\n    default_random_engine dre;\n    uniform_int_distribution&lt;int&gt; uid1(0, 1000);\n\n    for (int i = 0; i &lt; a.size(); i++)\n    {\n        a[i] = uid1(dre);\n\n    }\n\n}\n</code></pre>\n\n<p>My main file is very simply and looks like this</p>\n\n<pre><code>    array&lt;int, 10&gt; a;\n\n    Array3 a1;\n\n    a1.fill_array(a);\n    a1.print_array(a);\n</code></pre>\n\n<p>I thought I managed to get random numbers everytime I debug but I get the same numbers everytime. Weird enough sometimes I do get different numbers but then it's the same thing where I have to debug multiple times to get new numbers. What did I do wrong?</p>\n"}, {"tags": ["c++", "memory", "language-lawyer", "sse", "memory-alignment"], "comments": [{"owner": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "edited": false, "score": 0, "creation_date": 1481755722, "post_id": 41152964, "comment_id": 69509068, "body": "So the struct is guaranteed to be <i>aligned</i> to 16 bytes, not <i>allocated</i> 16 bytes.  You could make a struct of a single character and align it 1k, but you wouldn&#39;t assume the next 1024 - sizeof(char) bytes were yours as well.  If alignment were synonymous with allocation, you wouldn&#39;t be able to align(16) a struct of a hundred floats because a hundred floats is larger than 16 bytes."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 2, "creation_date": 1481773707, "post_id": 41152964, "comment_id": 69513952, "body": "See also <a href=\"http://stackoverflow.com/questions/37800739/is-it-safe-to-read-past-the-end-of-a-buffer-within-the-same-page-on-x86-and-x64\" title=\"is it safe to read past the end of a buffer within the same page on x86 and x64\">stackoverflow.com/questions/37800739/&hellip;</a>.  It&#39;s UB according to the ISO C++ standard, but I think read-only access like this does work safely on implementations that provide Intel&#39;s intrinsics (which are free to define whatever extra behaviour they want).  It&#39;s definitely safe in asm, but the risk is that optimizing C++ compilers that turn UB into mis-compiled code might cause a problem if they can prove that there&#39;s nothing there to read.  There&#39;s some discussion of that on the linked question."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 2, "creation_date": 1481773897, "post_id": 41152964, "comment_id": 69514003, "body": "Writing outside of objects is always bad.  Don&#39;t do it, not even if you put back the same garbage you read earlier: A non-atomic load/store pair can be a problem depending on what&#39;s next."}, {"owner": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1481794350, "post_id": 41152964, "comment_id": 69522301, "body": "@PeterCordes Do you want to rewrite your comments as an answer? I think they address the question in more detail than the accepted one."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1481827976, "post_id": 41152964, "comment_id": 69542918, "body": "I was thinking this was a possible duplicate, so was holding off on posting an answer.  It&#39;s not, because this question asks about writing."}], "answers": [{"comments": [{"owner": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "edited": false, "score": 0, "creation_date": 1481754339, "post_id": 41153292, "comment_id": 69508575, "body": "That&#39;s why I address both the intrinsic case AND the standard case. I&#39;m interested in both."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "edited": false, "score": 0, "creation_date": 1481754571, "post_id": 41153292, "comment_id": 69508649, "body": "@plasmacel, answered it as well."}, {"owner": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "edited": false, "score": 0, "creation_date": 1481754908, "post_id": 41153292, "comment_id": 69508751, "body": "However the memory is reserved by the alignment. The unallocated values are clearly undefined, but are you sure the behavior is also undefined?"}, {"owner": {"reputation": 17641, "user_id": 16800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea1de76c4c343fc844135e18da8a80f1?s=128&d=identicon&r=PG", "display_name": "Guvante", "link": "https://stackoverflow.com/users/16800/guvante"}, "reply_to_user": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "edited": false, "score": 2, "creation_date": 1481755147, "post_id": 41153292, "comment_id": 69508840, "body": "@plasmacel: Nothing guarantees that alignment bytes are padded out. For instance: <code>struct B { A a; char data[2]; }</code> <code>B.data</code> would live in what you think is allocated for you."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "edited": false, "score": 1, "creation_date": 1481773454, "post_id": 41153292, "comment_id": 69513889, "body": "@plasmacel: right, so you <b>can safely read it</b> and ignore the high garbage, but you can&#39;t safely write it.  (Of course, this specific example is moot, since you can just use MOVSD to do a 64-bit zero-extending load, and MOVSD or MOVLPS to do a 64-bit store of the low half of an <code>__m128</code>.)"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1481773987, "post_id": 41153292, "comment_id": 69514023, "body": "The question is whether it&#39;s UB on an implementation that supports Intel&#39;s intrinsics, including any implementation-defined behaviour.  Obviously we&#39;re only interested in the behaviour of this code with compilers that can compile it."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 0, "last_activity_date": 1481754558, "last_edit_date": 1481754558, "creation_date": 1481754284, "answer_id": 41153292, "question_id": 41152964, "link": "https://stackoverflow.com/questions/41152964/read-write-partially-allocated-aligned-memory/41153292#41153292", "title": "Read / write partially allocated aligned memory", "body": "<p>A language-lawyer answer to this is 'the question is moot'. <code>_mm_load_ps</code> is not defined in standard, and it is using ASM instruction which is not defined in standard either. C++ does not deal with this.</p>\n\n<p>As for your second question - accessing an unallocated memory from C++ this way is clearly undefined behavior. No object was placed in this memory, thus you can't access it.</p>\n"}, {"tags": [], "owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 3, "last_activity_date": 1481827932, "last_edit_date": 1495540801, "creation_date": 1481827932, "answer_id": 41171352, "question_id": 41152964, "link": "https://stackoverflow.com/questions/41152964/read-write-partially-allocated-aligned-memory/41171352#41171352", "title": "Read / write partially allocated aligned memory", "body": "<p>See also <a href=\"https://stackoverflow.com/questions/37800739/is-it-safe-to-read-past-the-end-of-a-buffer-within-the-same-page-on-x86-and-x64\">Is it safe to read past the end of a buffer within the same page on x86 and x64?</a>  The reading part of this question is basically a duplicate of that.</p>\n\n<p>It's UB according to the ISO C++ standard, but I think read-only access like this does work safely (i.e. compile to the asm that you'd expect) on implementations that provide Intel's intrinsics (which are free to define whatever extra behaviour they want). It's definitely safe in asm, but the risk is that optimizing C++ compilers that turn UB into mis-compiled code might cause a problem if they can prove that there's nothing there to read. There's some discussion of that on the linked question.</p>\n\n<hr>\n\n<p><strong>Writing outside of objects is always bad</strong>. Don't do it, not even if you put back the same garbage you read earlier: A non-atomic load/store pair can be a problem depending on what data follows your struct.</p>\n\n<p>The only time this is ok is in an array where you know what comes next, and that there is unused padding.  e.g. writing out an array of 3-<code>float</code> structs using 16B stores overlapping by 4B.  (Without <code>alignas</code> for over-alignment, so an array packs them together without padding).</p>\n\n<hr>\n\n<p>A struct of 3 <code>float</code>s would be a much better example than 2 <code>floats</code>.</p>\n\n<p>For this specific example (of 2 floats) you can just use MOVSD to do a 64-bit zero-extending load, and MOVSD or MOVLPS to do a 64-bit store of the low half of an <code>__m128</code>.</p>\n"}], "owner": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 2, "accepted_answer_id": 41171352, "answer_count": 2, "score": 4, "last_activity_date": 1481844960, "creation_date": 1481752776, "last_edit_date": 1481844960, "question_id": 41152964, "link": "https://stackoverflow.com/questions/41152964/read-write-partially-allocated-aligned-memory", "title": "Read / write partially allocated aligned memory", "body": "<p>There are a <em>lot</em> of questions about accessing unallocated memory, which is clearly undefined behavior. But what about the following corner case.</p>\n\n<p>Consider the following struct, which is aligned to 16 bytes, but occupies only 8 bytes from that:</p>\n\n<pre><code>struct alignas(16) A\n{\n    float data[2]; // the remaining 8 bytes are unallocated\n};\n</code></pre>\n\n<p>Now we access 16 bytes of data by SSE aligned load / store intrinsics:</p>\n\n<pre><code>__m128 test_load(const A &amp;a)\n{\n    return _mm_load_ps(a.data);\n}\n\nvoid test_store(A &amp;a, __m128 v)\n{\n    _mm_store_ps(a.data, v);\n}\n</code></pre>\n\n<p>Is this also undefined behavior and should I use padding instead?</p>\n\n<p>Anyway, since Intel intrinsics are not standard C++, is accessing a partly allocated but aligned memory block (not greater than the size of the alignment) undefined behavior in standard C++?</p>\n\n<p>I address both the intrinsic case and standard C++ case. I'm interested in both of them.</p>\n"}, {"tags": ["c++", "visual-studio-2015", "static", "thread-safety", "thread-local-storage"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1481759069, "post_id": 41152935, "comment_id": 69510174, "body": "Are you targeting the XP platform properly when building your code?"}, {"owner": {"reputation": 5246, "user_id": 601567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/354e6825881d0dbb29130bdd4c0e560e?s=128&d=identicon&r=PG", "display_name": "ForeverLearning", "link": "https://stackoverflow.com/users/601567/foreverlearning"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1481766403, "post_id": 41152935, "comment_id": 69512118, "body": "@KubaOber Yes I am. We use the v140_xp toolset."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1481766467, "post_id": 41152935, "comment_id": 69512135, "body": "Is that problem on XP SP3?"}, {"owner": {"reputation": 5246, "user_id": 601567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/354e6825881d0dbb29130bdd4c0e560e?s=128&d=identicon&r=PG", "display_name": "ForeverLearning", "link": "https://stackoverflow.com/users/601567/foreverlearning"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1481766532, "post_id": 41152935, "comment_id": 69512149, "body": "@KubaOber I want to say yes because our minimum support level for XP is SP3 but I am not 100% sure at the moment."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1481766620, "post_id": 41152935, "comment_id": 69512174, "body": "If that&#39;s a problem on XP SP3, then you should file a VS bug report. Presumably, it should work. I bet someone will &quot;love&quot; fixing this one :("}, {"owner": {"reputation": 5246, "user_id": 601567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/354e6825881d0dbb29130bdd4c0e560e?s=128&d=identicon&r=PG", "display_name": "ForeverLearning", "link": "https://stackoverflow.com/users/601567/foreverlearning"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1481766714, "post_id": 41152935, "comment_id": 69512198, "body": "@KubaOber Maybe I should. I just couldn&#39;t imagine no one has run into this yet."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1481827635, "post_id": 41152935, "comment_id": 69542735, "body": "People who maintain legacy stuff with Windows XP targeting are probably leery of switching targets willy-nilly. Speaking of that, I&#39;m crazy enough to target XP from VS 2015. This bug will probably bite me :/"}], "answers": [{"tags": [], "owner": {"reputation": 5246, "user_id": 601567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/354e6825881d0dbb29130bdd4c0e560e?s=128&d=identicon&r=PG", "display_name": "ForeverLearning", "link": "https://stackoverflow.com/users/601567/foreverlearning"}, "is_accepted": true, "score": 0, "last_activity_date": 1481912054, "last_edit_date": 1492087778, "creation_date": 1481912054, "answer_id": 41190153, "question_id": 41152935, "link": "https://stackoverflow.com/questions/41152935/function-local-statics-generate-faulty-code-for-windows-xp/41190153#41190153", "title": "Function local statics generate faulty code for Windows XP", "body": "<p>This question was ably answered by Peter Ferrie over at the Reverse Engineering SE.</p>\n\n<p><a href=\"https://reverseengineering.stackexchange.com/a/14186/15780\">https://reverseengineering.stackexchange.com/a/14186/15780</a></p>\n"}, {"comments": [{"owner": {"reputation": 77029, "user_id": 1729265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VMMeP.jpg?s=128&g=1", "display_name": "mkl", "link": "https://stackoverflow.com/users/1729265/mkl"}, "edited": false, "score": 0, "creation_date": 1501150378, "post_id": 45347168, "comment_id": 77656535, "body": "You might want to format your text somewhat. Currently it is a mere wall of text nobody wants to have to decipher."}], "tags": [], "owner": {"reputation": 11, "user_id": 8368253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/312cf20aa9d8345ca3d2655083736f3c?s=128&d=identicon&r=PG&f=1", "display_name": "DarrenFlexXu", "link": "https://stackoverflow.com/users/8368253/darrenflexxu"}, "is_accepted": false, "score": 1, "last_activity_date": 1501148977, "creation_date": 1501148977, "answer_id": 45347168, "question_id": 41152935, "link": "https://stackoverflow.com/questions/41152935/function-local-statics-generate-faulty-code-for-windows-xp/45347168#45347168", "title": "Function local statics generate faulty code for Windows XP", "body": "<p>In the C++11 standard, block scope variables with static or thread storage duration must be zero-initialized before any other initialization takes place. Initialization occurs when control first passes through the declaration of the variable. If an exception is thrown during initialization, the variable is considered uninitialized, and initialization is re-attempted the next time control passes through the declaration. If control enters the declaration concurrently with initialization, the concurrent execution blocks while initialization is completed. The behavior is undefined if control re-enters the declaration recursively during initialization. By default, Visual Studio starting in Visual Studio 2015 implements this standard behavior. This behavior may be explicitly specified by setting the /Zc:threadSafeInit compiler option. +\nThread-safe initialization of static local variables relies on code implemented in the Universal C run-time library (UCRT). To avoid taking a dependency on the UCRT, or to preserve the non-thread-safe initialization behavior of versions of Visual Studio prior to Visual Studio 2015, use the /Zc:threadSafeInit- option. If you know that thread-safety is not required, use this option to generate slightly smaller, faster code around static local declarations.\nThread-safe static local variables use thread-local storage (TLS) internally to provide efficient execution when the static has already been initialized. The implementation of this feature relies on Windows operating system support functions in Windows Vista and later operating systems. Windows XP, Windows Server 2003, and older operating systems do not have this support, so they do not get the efficiency advantage. These operating systems also have a lower limit on the number of TLS sections that can be loaded. Exceeding the TLS section limit can cause a crash. If this is a problem in your code, especially in code that must run on older operating systems, use /Zc:threadSafeInit- to disable the thread-safe initialization code.</p>\n"}], "owner": {"reputation": 5246, "user_id": 601567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/354e6825881d0dbb29130bdd4c0e560e?s=128&d=identicon&r=PG", "display_name": "ForeverLearning", "link": "https://stackoverflow.com/users/601567/foreverlearning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 463, "favorite_count": 0, "accepted_answer_id": 41190153, "answer_count": 2, "score": 2, "last_activity_date": 1501148977, "creation_date": 1481752658, "last_edit_date": 1481759728, "question_id": 41152935, "link": "https://stackoverflow.com/questions/41152935/function-local-statics-generate-faulty-code-for-windows-xp", "title": "Function local statics generate faulty code for Windows XP", "body": "<p>I originally posted this on the ReverseEngineering StackExchange not knowing exactly where this belongs. I decided to post it here anyway.</p>\n\n<p>Recently the Microsoft Visual Studio 2015 compiler finally complied with the C++ standards mandate to generate thread-safe code for function local statics. For the most part this works just fine but I ran into a situation on Windows XP where the following 3 instructions led to a blow up:</p>\n\n<pre><code>mov     eax,dword ptr fs:[0000002Ch]\nmov     ecx,dword ptr [MyModule!_tls_index (102eea44)]\nmov     ecx,dword ptr [eax+ecx*4]\n</code></pre>\n\n<p>Obviously the compiler seems to implement thread-safety by first poking into the TLS slot of the current thread. <code>fs:2Ch</code> is supposed to lead to the TLS array per documentation. However on Windows XP, <code>fs:2Ch</code> doesn't seem to be set. This returned 0 for me and so did the next instruction (<code>_tls_index</code> was also 0.) That led to the 3rd instruction blowing up as it was accessing invalid memory.</p>\n\n<p>Does anybody know why <code>fs:2Ch</code> might not be set on Windows XP? Function local statics are used all over our code and I can't imagine no one else running into this.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I have carefully considered every tag I have applied to this question. Please DO NOT add or remove anything.</p>\n"}, {"tags": ["c++", "boost-asio"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 1, "creation_date": 1481752418, "post_id": 41152794, "comment_id": 69507815, "body": "You can&#39;t destroy an object twice. Once it&#39;s destroyed it&#39;s gone. Since you call the destructor explicitly are you bothering to instantiate a new instance of the object? Why are you explicitly calling the destructor anyway?"}, {"owner": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1481752570, "post_id": 41152794, "comment_id": 69507881, "body": "@CaptainObvlious I state my reason above (serial device power cycled).  How do I instantiate a new instance of the <code>io_service</code>?"}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1481777683, "post_id": 41152794, "comment_id": 69514870, "body": "Allocate it on heap and set it to null the first time when you destroy it ? Or probably use <code>boost::optional</code> if it provides some mechanism to do what you want."}], "answers": [{"tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 2, "last_activity_date": 1481822382, "creation_date": 1481822382, "answer_id": 41169882, "question_id": 41152794, "link": "https://stackoverflow.com/questions/41152794/boostasioio-service-check-if-null/41169882#41169882", "title": "boost::asio::io_service check if null", "body": "<p>If you need manual control over when the object is created and destroyed, you should be wrapping it in a <code>std::unique_ptr</code> object.</p>\n\n<pre><code>std::unique_ptr&lt;boost::asio::io_service&gt; service_ptr = \n    std::make_unique&lt;boost::asio::io_service&gt;();\n\n/*Do stuff until connection needs to be reset*/\nservice_ptr-&gt;stop();\n//I don't know your specific use case, but the call to io_service's member function reset is probably unnecessary.\n//service_ptr-&gt;reset();\nservice_ptr.reset();//\"reset\" is a member function of unique_ptr, will delete object.\n\n/*For your later check*/\nif(service_ptr) //returns true if a valid object exists in the pointer\nif(!service_ptr) //returns true if no object is being pointed to.\n</code></pre>\n\n<p>Generally speaking, you should never directly call <code>~object_name();</code>. Ever. Ever. Ever. There's several reasons why:</p>\n\n<ul>\n<li>As a normal part of Stack Unwinding, this will get called anyways when the method returns.</li>\n<li><code>delete</code>ing a pointer will call it.</li>\n<li>\"Smart Pointers\" (like <code>std::unique_ptr</code> and <code>std::shared_ptr</code>) will call it when they self-destruct.</li>\n</ul>\n\n<p>Directly calling <code>~object_name();</code> should only ever be done in rare cases, usually involving Allocators, and even then, there are usually cleaner solutions.</p>\n"}], "owner": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 371, "favorite_count": 1, "accepted_answer_id": 41169882, "answer_count": 1, "score": 0, "last_activity_date": 1481822382, "creation_date": 1481752117, "question_id": 41152794, "link": "https://stackoverflow.com/questions/41152794/boostasioio-service-check-if-null", "title": "boost::asio::io_service check if null", "body": "<p>I am using boost 1.55 (<a href=\"http://www.boost.org/doc/libs/1_55_0/doc/html/boost_asio/reference/io_service.html\" rel=\"nofollow noreferrer\">io_service doc</a>).  I need to call the destructor on my io_service to reset it after power is cycled on my serial device to get new data.  The problem is that when the destructor is called twice (re-trying connection), I get a segmentation fault.</p>\n\n<p>In header file</p>\n\n<pre><code>boost::asio::io_service io_service_port_1;\n</code></pre>\n\n<p>In function that closes connection</p>\n\n<pre><code>io_service_port_1.stop();\nio_service_port_1.reset();\nio_service_port_1.~io_service();    // how to check for NULL?\n                                    // do I need to re-construct it?\n</code></pre>\n\n<p>The following does not work:</p>\n\n<pre><code>if (io_service_port_1)\nif (io_service_port_1 == NULL)\n</code></pre>\n\n<p>Thank you.   </p>\n"}, {"tags": ["c++", "email", "curl", "gmail"], "comments": [{"owner": {"reputation": 3397, "user_id": 6287472, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/1603791b923ed47df3dd541b35d73742?s=128&d=identicon&r=PG&f=1", "display_name": "TheValyreanGroup", "link": "https://stackoverflow.com/users/6287472/thevalyreangroup"}, "edited": false, "score": 0, "creation_date": 1481751815, "post_id": 41152633, "comment_id": 69507551, "body": "Do you have your SMTP relay turned on for gmail?"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1481751853, "post_id": 41152633, "comment_id": 69507577, "body": "Do you have an App password? You cannot use your normal password because security."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1481752447, "post_id": 41152633, "comment_id": 69507827, "body": "Last time I did this I had to turn down some of G-mail&#39;s internal security (and they changed how to do that recently so I can&#39;t give a good answer), and as @Raindrop7 suggests, had to turn on compile in SSL support. Used OpenSSL, but had to do some hackery of the default build scripts to make cURL and OpenSSL play nice on Windows with mingw."}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1481752928, "post_id": 41152633, "comment_id": 69508034, "body": "@user4581301: I remember one day when using gmail through openSSL I had to configured gmail client in my account to be able to send mails"}], "answers": [{"comments": [{"owner": {"reputation": 2137, "user_id": 1034253, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/nO7s7.png?s=128&g=1", "display_name": "Ufx", "link": "https://stackoverflow.com/users/1034253/ufx"}, "edited": false, "score": 0, "creation_date": 1481753954, "post_id": 41152827, "comment_id": 69508417, "body": "For 587: curl_easy_perform() failed: Failed sending data to the peer"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 2137, "user_id": 1034253, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/nO7s7.png?s=128&g=1", "display_name": "Ufx", "link": "https://stackoverflow.com/users/1034253/ufx"}, "edited": false, "score": 0, "creation_date": 1481755988, "post_id": 41152827, "comment_id": 69509171, "body": "@Ufx cURL spits out, or can be configured to spit out, some fairly detailed diagnostics. what development environment and OS are you using?"}, {"owner": {"reputation": 2137, "user_id": 1034253, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/nO7s7.png?s=128&g=1", "display_name": "Ufx", "link": "https://stackoverflow.com/users/1034253/ufx"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1481756060, "post_id": 41152827, "comment_id": 69509186, "body": "@user4581301 now I&#39;m using VS 2015 and Windows 7"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 2137, "user_id": 1034253, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/nO7s7.png?s=128&g=1", "display_name": "Ufx", "link": "https://stackoverflow.com/users/1034253/ufx"}, "edited": false, "score": 0, "creation_date": 1481756096, "post_id": 41152827, "comment_id": 69509200, "body": "@Ufx mingw compiler?"}, {"owner": {"reputation": 2137, "user_id": 1034253, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/nO7s7.png?s=128&g=1", "display_name": "Ufx", "link": "https://stackoverflow.com/users/1034253/ufx"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1481756178, "post_id": 41152827, "comment_id": 69509236, "body": "@user4581301 MSVC14"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 2137, "user_id": 1034253, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/nO7s7.png?s=128&g=1", "display_name": "Ufx", "link": "https://stackoverflow.com/users/1034253/ufx"}, "edited": false, "score": 0, "creation_date": 1481756592, "post_id": 41152827, "comment_id": 69509392, "body": "@Ufx rats. Drifting outside what I know. What are you using for SSL/TLS support?"}, {"owner": {"reputation": 2137, "user_id": 1034253, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/nO7s7.png?s=128&g=1", "display_name": "Ufx", "link": "https://stackoverflow.com/users/1034253/ufx"}, "edited": false, "score": 0, "creation_date": 1481833779, "post_id": 41152827, "comment_id": 69545988, "body": "I didn&#39;t understand what do I have to do"}], "tags": [], "owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "is_accepted": false, "score": 2, "last_activity_date": 1481756815, "last_edit_date": 1481756815, "creation_date": 1481752204, "answer_id": 41152827, "question_id": 41152633, "link": "https://stackoverflow.com/questions/41152633/i-cant-send-email-from-gmail/41152827#41152827", "title": "I can&#39;t send email from gmail", "body": "<p>I think that you missed the authentication of server Gmail, here is some configuration for outgoing mails:</p>\n\n<p>Outgoing Mail (SMTP) Server     </p>\n\n<pre><code>smtp.gmail.com\nRequires SSL: Yes\nRequires TLS: Yes (if available)\nRequires Authentication: Yes\nPort for SSL: 465\nPort for TLS/STARTTLS: 587\n</code></pre>\n\n<p>also go to your account and enable IMAP and POP and save changes.</p>\n"}, {"comments": [{"owner": {"reputation": 2137, "user_id": 1034253, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/nO7s7.png?s=128&g=1", "display_name": "Ufx", "link": "https://stackoverflow.com/users/1034253/ufx"}, "edited": false, "score": 0, "creation_date": 1482943835, "post_id": 41366317, "comment_id": 69934110, "body": "Can you help me please? <a href=\"https://stackoverflow.com/questions/41322794/i-get-error-when-im-trying-to-send-email-using-libquickmail\" title=\"i get error when im trying to send email using libquickmail\">stackoverflow.com/questions/41322794/&hellip;</a>"}], "tags": [], "owner": {"reputation": 171, "user_id": 6914680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbfe189eb8fbf0973db448cf097a7a88?s=128&d=identicon&r=PG&f=1", "display_name": "Parmatma", "link": "https://stackoverflow.com/users/6914680/parmatma"}, "is_accepted": false, "score": 0, "last_activity_date": 1482943647, "creation_date": 1482943647, "answer_id": 41366317, "question_id": 41152633, "link": "https://stackoverflow.com/questions/41152633/i-cant-send-email-from-gmail/41366317#41366317", "title": "I can&#39;t send email from gmail", "body": "<p>you can use this library for sending mail : <a href=\"http://sourceforge.net/projects/libquickmail/\" rel=\"nofollow noreferrer\">http://sourceforge.net/projects/libquickmail/</a> </p>\n"}], "owner": {"reputation": 2137, "user_id": 1034253, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/nO7s7.png?s=128&g=1", "display_name": "Ufx", "link": "https://stackoverflow.com/users/1034253/ufx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1285, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1482943647, "creation_date": 1481751431, "question_id": 41152633, "link": "https://stackoverflow.com/questions/41152633/i-cant-send-email-from-gmail", "title": "I can&#39;t send email from gmail", "body": "<p>I need to send registration codes to users from my server. I developed some code for this.</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;iostream&gt;\n#include &lt;ctime&gt;\n#include &lt;algorithm&gt;\n#include &lt;random&gt;\n#include &lt;curl/curl.h&gt;\n\nclass EmailAddress \n{\npublic:\n    EmailAddress(const char *email)\n        : email_{email}\n        {\n        }\n\n    EmailAddress(const std::string &amp;email)\n        : email_{email}\n        {\n        }\n\n    EmailAddress(const std::string &amp;email, const std::string &amp;displayName)\n        : email_{email.empty() ? \"\" : \"&lt;\"+email+\"&gt;\"},\n          name_{\"\\\"\" + displayName + \"\\\"\"}\n        {\n        }\n\n    std::string domain() const\n        {\n            return email_.substr(email_.find('@') + 1);\n        }\n\n    explicit operator const char *() const\n        {\n            return email_.c_str();\n        }\n\n    friend std::ostream &amp;operator&lt;&lt;(std::ostream &amp;out, const EmailAddress &amp;email)\n        {\n            return out &lt;&lt; email.name_ &lt;&lt; \" \" &lt;&lt; email.email_;\n        }\n\nprivate:\n    std::string email_;\n    std::string name_;\n};\n\ntypedef std::vector&lt;EmailAddress&gt; EmailAddresses;\nstd::ostream &amp;operator&lt;&lt;(std::ostream &amp;out, const EmailAddresses &amp;emailAddresses);\n\nclass Email\n{\npublic:\n    Email(const EmailAddress   &amp;from,\n          const EmailAddress   &amp;to,\n          const std::string    &amp;subject,\n          const std::string    &amp;body,\n          const EmailAddresses &amp;cc = EmailAddresses())\n        : from_{from}\n        , to_{to}\n        , cc_{cc.empty() ? EmailAddresses(1, to) : cc}\n        , subject_{subject}\n        , body_{body}\n        {\n        }\n\n    CURLcode send(const std::string &amp;url,\n                  const std::string &amp;userName, \n                  const std::string &amp;password);\n\nprivate:\n    struct StringData {\n            std::string msg;\n            size_t bytesLeft;\n            StringData(std::string &amp;&amp;m) : msg{m}, bytesLeft{msg.size()} {}\n            StringData(std::string  &amp;m) = delete;\n        };\n\n    static std::string dateTimeNow_();\n    static size_t payloadSource_(void *ptr, size_t size, size_t nmemb, void *userp);\n    std::string generateMessageId_() const;\n    std::string setPayloadText_();\n\n    EmailAddress from_, to_;\n    EmailAddresses cc_;\n    std::string subject_, body_;\n};\n\n\nCURLcode Email::send(const std::string &amp;url,\n                     const std::string &amp;userName,\n                     const std::string &amp;password)\n{\n    CURLcode ret = CURLE_OK;\n\n    struct curl_slist *recipients = NULL;\n\n    CURL *curl = curl_easy_init();\n\n    StringData textData { setPayloadText_() };\n\n    if (curl) {\n        std::ostringstream cc;\n        cc &lt;&lt; cc_;\n\n        curl_easy_setopt(curl, CURLOPT_USERNAME,     userName.c_str());\n        curl_easy_setopt(curl, CURLOPT_PASSWORD,     password.c_str());\n        curl_easy_setopt(curl, CURLOPT_URL,          url     .c_str());\n\n        curl_easy_setopt(curl, CURLOPT_USE_SSL,      (long)CURLUSESSL_ALL);\n        //curl_easy_setopt(curl, CURLOPT_CAINFO,      \"/path/to/certificate.pem\");\n\n        curl_easy_setopt(curl, CURLOPT_MAIL_FROM,    (const char *)from_);\n        recipients = curl_slist_append(recipients,   (const char *)to_);\n        recipients = curl_slist_append(recipients,   cc.str().c_str());\n\n        curl_easy_setopt(curl, CURLOPT_MAIL_RCPT,    recipients);\n        curl_easy_setopt(curl, CURLOPT_READFUNCTION, payloadSource_);\n        curl_easy_setopt(curl, CURLOPT_READDATA,     &amp;textData);\n        curl_easy_setopt(curl, CURLOPT_UPLOAD,       1L);\n        curl_easy_setopt(curl, CURLOPT_VERBOSE,      1L);\n\n        ret = curl_easy_perform(curl);\n\n        if (ret != CURLE_OK) {\n            std::cerr &lt;&lt; \"curl_easy_perform() failed: \"\n                      &lt;&lt; curl_easy_strerror(ret)\n                      &lt;&lt; std::endl;\n        }\n\n        curl_slist_free_all(recipients);\n        curl_easy_cleanup(curl);\n    }\n\n    return ret;\n}\n\nstd::string Email::dateTimeNow_()\n{\n    const int RFC5322_TIME_LEN = 32;\n\n    std::string ret;\n    ret.resize(RFC5322_TIME_LEN);\n\n    time_t tt;\n\n#ifdef _MSC_VER\n    time(&amp;tt);\n    tm *t = localtime(&amp;tt);\n#else\n    tm tv, *t = &amp;tv;\n    tt = time(&amp;tt);\n    localtime_r(&amp;tt, t);\n#endif\n\n    strftime(&amp;ret[0], RFC5322_TIME_LEN, \"%a, %d %b %Y %H:%M:%S %z\", t);\n\n    return ret;\n}\n\ninline std::string Email::generateMessageId_() const\n{\n    const size_t MESSAGE_ID_LEN = 37;\n\n    tm t;\n    time_t tt;\n    time(&amp;tt);\n\n#ifdef _MSC_VER\n    gmtime_s(&amp;t, &amp;tt);\n#else\n    gmtime_r(&amp;tt, &amp;t);\n#endif\n\n    std::string ret;\n    ret.resize(MESSAGE_ID_LEN);\n    size_t dateLen = std::strftime(&amp;ret[0], MESSAGE_ID_LEN, \"%Y%m%d%H%M%S\", &amp;t);\n\n    static const std::string alphaNum {\n        \"0123456789\"\n        \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"\n        \"abcdefghijklmnopqrstuvwxyz\" };\n\n    std::mt19937 gen;\n    std::uniform_int_distribution&lt;&gt; distr(0, alphaNum.length() - 1);\n\n    std::generate_n(ret.begin() + dateLen,\n                    MESSAGE_ID_LEN - dateLen,\n                    [&amp;]() { return alphaNum[distr(gen)]; });\n\n    return ret;\n}\n\nsize_t Email::payloadSource_(void *ptr, size_t size, size_t nmemb, void *userp)\n{\n    StringData *text = reinterpret_cast&lt;StringData *&gt;(userp);\n\n    if ((size == 0) || (nmemb == 0) || ((size * nmemb) &lt; 1) || (text-&gt;bytesLeft == 0)) {\n        return 0;\n    }\n\n    if ((nmemb * size) &gt;= text-&gt;msg.size()) {\n        text-&gt;bytesLeft = 0;\n        return text-&gt;msg.copy(reinterpret_cast&lt;char *&gt;(ptr), text-&gt;msg.size());\n    }\n\n    return 0;\n}\n\nstd::string Email::setPayloadText_()\n{\n    std::string ret = \"Date: \" + dateTimeNow_() + \"\\r\\n\";\n\n    std::ostringstream oss;\n    oss &lt;&lt; \"To: \"   &lt;&lt; to_   &lt;&lt; \"\\r\\n\"\n           \"From: \" &lt;&lt; from_ &lt;&lt; \"\\r\\n\";\n\n    if (cc_.size() &gt; 1) {\n        oss &lt;&lt;   \"Cc: \"   &lt;&lt; cc_   &lt;&lt; \"\\r\\n\";\n    }\n\n    ret += oss.str();\n\n    ret +=\n        \"Message-ID: &lt;\" + generateMessageId_() + \"@\" + from_.domain() + \"&gt;\\r\\n\"\n        \"Subject: \" + subject_ + \"\\r\\n\"\n        \"\\r\\n\" +\n        body_ + \"\\r\\n\"\n        \"\\r\\n\";\n\n    return ret;\n}\n\nstd::ostream &amp;operator&lt;&lt;(std::ostream &amp;out, const EmailAddresses &amp;emailAddresses)\n{\n    if (!emailAddresses.empty()) {\n        auto it = emailAddresses.begin();\n        out &lt;&lt; *it;\n        while (++it != emailAddresses.end()) {\n            out &lt;&lt; \",\" &lt;&lt; *it;\n        }\n    }\n\n    return out;\n}\n</code></pre>\n\n<p>If I use mail.ru service for sending email it works good. But if I use gmail.com  service I get an error:</p>\n\n<blockquote>\n  <ul>\n  <li>Rebuilt URL to: smtp://smtp.gmail.com:465/</li>\n  <li>Trying 64.233.165.109...</li>\n  <li>Connected to smtp.gmail.com (64.233.165.109) port 465 (#0)</li>\n  <li>response reading failed</li>\n  <li>Closing connection 0\n  curl_easy_perform() failed: Failure when receiving data from the peer</li>\n  </ul>\n</blockquote>\n\n<pre><code>Email email({ \"...@gmail.com\", \"Name\" },\n              \"...@gmail.com\",\n              \"Subj\",\n              \"Body\");\n\nemail.send(   \"smtp://smtp.gmail.com:465\",\n              \"...@gmail.com\",\n              \"Password\");\n</code></pre>\n\n<p>What did I do wrong?</p>\n"}, {"tags": ["c++", "multithreading", "timer", "background"], "comments": [{"owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "edited": false, "score": 0, "creation_date": 1481750667, "post_id": 41152393, "comment_id": 69507037, "body": "Are you not using the multithread parameter in the start method to indicate you want it to run as a separate thread?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1481751120, "post_id": 41152393, "comment_id": 69507245, "body": "What does &quot;in background&quot; mean?"}, {"owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1481753581, "post_id": 41152393, "comment_id": 69508278, "body": "@immibis I assumed it meant asynchronously."}], "answers": [{"tags": [], "owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "is_accepted": true, "score": 2, "last_activity_date": 1481752735, "last_edit_date": 1481752735, "creation_date": 1481752206, "answer_id": 41152829, "question_id": 41152393, "link": "https://stackoverflow.com/questions/41152393/c-non-blocking-async-timer/41152829#41152829", "title": "C++ Non-blocking async timer", "body": "<p>The following class takes a parameter for the time to count down and the function to execute at the end:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;chrono&gt;\n#include &lt;thread&gt;\n#include &lt;functional&gt;\n#include &lt;mutex&gt;\n#include &lt;condition_variable&gt;\n\nclass Timer {\npublic:\n    Timer(size_t time, const std::function&lt;void(void)&gt;&amp; f) : time{std::chrono::milliseconds{time}}, f{f} {}\n    ~Timer() { wait_thread.join(); }\n\nprivate:\n    void wait_then_call()\n    {\n        std::unique_lock&lt;std::mutex&gt; lck{mtx};\n        for(int i{10}; i &gt; 0; --i) {\n            std::cout &lt;&lt; \"Thread \" &lt;&lt; wait_thread.get_id() &lt;&lt; \" countdown at: \" &lt;&lt; '\\t' &lt;&lt; i &lt;&lt; '\\n';\n            cv.wait_for(lck, time / 10);\n        }\n        f();\n    }\n    std::mutex mtx;\n    std::condition_variable cv{};\n    std::chrono::milliseconds time;\n    std::function &lt;void(void)&gt; f;\n    std::thread wait_thread{[this]() {wait_then_call(); }};\n};\n\nint main()\n{\n    auto f = []() {std::cout &lt;&lt; \"---------------- I waited to print! ----------------\\n\"; };\n    Timer t1{3000,f};\n    Timer t2{10'000,f};\n    Timer t3{20'000,f};\n    Timer t4{1000,f};\n}\n</code></pre>\n\n<p>Produces:</p>\n\n<pre><code>Thread Thread 43184 countdown at:       Thread 24004 countdown at:      10\nThread 61592 countdown at:      10\n72408 countdown at:     10\n10\nThread 24004 countdown at:      9\nThread 24004 countdown at:      8\nThread 72408 countdown at:      Thread 24004 countdown at:      9\n7\nThread 24004 countdown at:      6\nThread 24004 countdown at:      5\nThread 72408 countdown at:      8\nThread 24004 countdown at:      4\nThread 24004 countdown at:      3\nThread 24004 countdown at:      2\nThread 72408 countdown at:      7\nThread 24004 countdown at:      1\nThread 61592 countdown at:      9\n---------------- I waited to print! ----------------\nThread 72408 countdown at:      6\nThread 72408 countdown at:      5\nThread 72408 countdown at:      4\nThread 43184 countdown at:      9\nThread 61592 countdown at:      8\nThread 72408 countdown at:      3\nThread 72408 countdown at:      2\nThread 72408 countdown at:      1\nThread 61592 countdown at:      7\n---------------- I waited to print! ----------------\nThread 43184 countdown at:      8\nThread 61592 countdown at:      6\nThread 61592 countdown at:      5\nThread 43184 countdown at:      7\nThread 61592 countdown at:      4\nThread 61592 countdown at:      3\nThread 43184 countdown at:      6\nThread 61592 countdown at:      2\nThread 61592 countdown at:      1\nThread 43184 countdown at:      5\n---------------- I waited to print! ----------------\nThread 43184 countdown at:      4\nThread 43184 countdown at:      3\nThread 43184 countdown at:      2\nThread 43184 countdown at:      1\n---------------- I waited to print! ----------------\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 7154239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e99487e0e877d50b6cadf6496918c00c?s=128&d=identicon&r=PG&f=1", "display_name": "Aron", "link": "https://stackoverflow.com/users/7154239/aron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4634, "favorite_count": 0, "accepted_answer_id": 41152829, "answer_count": 1, "score": 1, "last_activity_date": 1481752735, "creation_date": 1481750456, "question_id": 41152393, "link": "https://stackoverflow.com/questions/41152393/c-non-blocking-async-timer", "title": "C++ Non-blocking async timer", "body": "<p>I've read many posts about this, but didn't find the answer to this question.\nI want to make a timer class which works in background and when finished do something. And even I want to call multiple timers at once which are counts down asynchronously.</p>\n\n<p>I've found this class while I was searching about it, which seems working, but not in background.How can I transform it to do what I want?</p>\n\n<p>Timer.h:</p>\n\n<pre><code>#ifndef TIMER_H\n#define TIMER_H\n\n#include &lt;thread&gt;\n#include &lt;chrono&gt;\n\nclass Timer\n{\npublic:\n    typedef std::chrono::milliseconds Interval;\n    typedef std::function&lt;void(void)&gt; Timeout;\n\n    Timer(const Timeout &amp;timeout);\n    Timer(const Timeout &amp;timeout,\n          const Interval &amp;interval,\n          bool singleShot = true);\n\n    void start(bool multiThread = false);\n    void stop();\n\n    bool running() const;\n\n    void setSingleShot(bool singleShot);\n    bool isSingleShot() const;\n\n    void setInterval(const Interval &amp;interval);\n    const Interval &amp;interval() const;\n\n    void setTimeout(const Timeout &amp;timeout);\n    const Timeout &amp;timeout() const;\n\nprivate:\n    std::thread _thread;\n\n    bool _running = false;\n    bool _isSingleShot = true;\n\n    Interval _interval = Interval(0);\n    Timeout _timeout = nullptr;\n\n    void _temporize();\n    void _sleepThenTimeout();\n};\n\n#endif // TIMER_H\nenter code here\n</code></pre>\n\n<p>Timer.cpp:</p>\n\n<pre><code>#include \"Timer.h\"\n\nTimer::Timer(const Timeout &amp;timeout)\n    : _timeout(timeout)\n{\n}\n\nTimer::Timer(const Timer::Timeout &amp;timeout,\n             const Timer::Interval &amp;interval,\n             bool singleShot)\n    : _isSingleShot(singleShot),\n      _interval(interval),\n      _timeout(timeout)\n{\n}\n\nvoid Timer::start(bool multiThread)\n{\n    if (this-&gt;running() == true)\n        return;\n\n    _running = true;\n\n    if (multiThread == true) {\n        _thread = std::thread(\n                    &amp;Timer::_temporize, this);\n    }\n    else{\n        this-&gt;_temporize();\n    }\n}\n\nvoid Timer::stop()\n{\n    _running = false;\n    _thread.join();\n}\n\nbool Timer::running() const\n{\n    return _running;\n}\n\nvoid Timer::setSingleShot(bool singleShot)\n{\n    if (this-&gt;running() == true)\n       return;\n\n    _isSingleShot = singleShot;\n}\n\nbool Timer::isSingleShot() const\n{\n    return _isSingleShot;\n}\n\nvoid Timer::setInterval(const Timer::Interval &amp;interval)\n{\n    if (this-&gt;running() == true)\n       return;\n\n    _interval = interval;\n}\n\nconst Timer::Interval &amp;Timer::interval() const\n{\n    return _interval;\n}\n\nvoid Timer::setTimeout(const Timeout &amp;timeout)\n{\n    if (this-&gt;running() == true)\n       return;\n\n    _timeout = timeout;\n}\n\nconst Timer::Timeout &amp;Timer::timeout() const\n{\n    return _timeout;\n}\n\nvoid Timer::_temporize()\n{\n    if (_isSingleShot == true) {\n        this-&gt;_sleepThenTimeout();\n    }\n    else {\n        while (this-&gt;running() == true) {\n            this-&gt;_sleepThenTimeout();\n        }\n    }\n}\n\nvoid Timer::_sleepThenTimeout()\n{\n    std::this_thread::sleep_for(_interval);\n\n    if (this-&gt;running() == true)\n        this-&gt;timeout()();\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "recursion"], "comments": [{"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1481766151, "post_id": 41152026, "comment_id": 69512056, "body": "You could also use a template to deduce the array bounds. It&#39;s possible for std::array and c style arrays. Maybe a little more advanced than your assignment but safer."}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 7106712, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e198b8d8f4e305c516c57598d4691649?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/7106712/greg"}, "edited": false, "score": 0, "creation_date": 1481749486, "post_id": 41152082, "comment_id": 69506472, "body": "Oh wow that worked. Thank you very much. Sorry if it seemed like a dumb question. I&#39;ll mark this as correct when the timer lets me."}, {"owner": {"reputation": 1277, "user_id": 4182216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f206bc243dc735c21a2bc46a9f48d7e3?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/4182216/steve"}, "edited": false, "score": 0, "creation_date": 1481749644, "post_id": 41152082, "comment_id": 69506559, "body": "this works, but the array you&#39;ve defined only has 9 values so it prints out a 0 for the 10th element"}, {"owner": {"reputation": 87, "user_id": 7106712, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e198b8d8f4e305c516c57598d4691649?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/7106712/greg"}, "edited": false, "score": 0, "creation_date": 1481749787, "post_id": 41152082, "comment_id": 69506626, "body": "Heh, the values didn&#39;t really matter I think. With the array initializing undefined elements to 0, I just hastily put some numbers in there so that I wouldn&#39;t just see 0 over and over again."}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "reply_to_user": {"reputation": 87, "user_id": 7106712, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e198b8d8f4e305c516c57598d4691649?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/7106712/greg"}, "edited": false, "score": 0, "creation_date": 1481750050, "post_id": 41152082, "comment_id": 69506754, "body": "@Greg You should also add bounds checking in the function. What happens when you pass negative values or values greater than 9 for <code>a</code> or <code>b</code>?"}, {"owner": {"reputation": 87, "user_id": 7106712, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e198b8d8f4e305c516c57598d4691649?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/7106712/greg"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1481750903, "post_id": 41152082, "comment_id": 69507143, "body": "@SimonKraemer That&#39;s a great point. I&#39;ll super charge the program to make it a bit more robust, and keep an eye on including that in the future."}], "tags": [], "owner": {"reputation": 1227, "user_id": 1974414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1fdd96f9d84a095fa844866e6bc2680?s=128&d=identicon&r=PG", "display_name": "Dima Ogurtsov", "link": "https://stackoverflow.com/users/1974414/dima-ogurtsov"}, "is_accepted": true, "score": 4, "last_activity_date": 1481749576, "last_edit_date": 1481749576, "creation_date": 1481749227, "answer_id": 41152082, "question_id": 41152026, "link": "https://stackoverflow.com/questions/41152026/pass-an-array-to-a-void-function-and-recursively-print-the-elements/41152082#41152082", "title": "Pass an array to a void function, and recursively print the elements", "body": "<p>Change the signature to:</p>\n\n<pre><code>void printArray (const array&lt;int, 10&gt; &amp;source, int a, int b)\n</code></pre>\n\n<p>This is what compiler wants! :)</p>\n"}, {"comments": [{"owner": {"reputation": 87, "user_id": 7106712, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e198b8d8f4e305c516c57598d4691649?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/7106712/greg"}, "edited": false, "score": 0, "creation_date": 1481750179, "post_id": 41152145, "comment_id": 69506818, "body": "Thank you. That is valuable advice, and I&#39;ll incorporate it. I know that const makes it so that it stays constant, which makes sense when passing the array to a function. It&#39;s a shame I spent so much time on this, since the book didn&#39;t really give me a good answer for this chapter."}], "tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 4, "last_activity_date": 1481749603, "last_edit_date": 1481749603, "creation_date": 1481749452, "answer_id": 41152145, "question_id": 41152026, "link": "https://stackoverflow.com/questions/41152026/pass-an-array-to-a-void-function-and-recursively-print-the-elements/41152145#41152145", "title": "Pass an array to a void function, and recursively print the elements", "body": "<p>I think you're tangling up <code>std::array</code> with C-style \"array\". If you change the definition of <code>theSource</code> to</p>\n\n<pre><code>const int theSource[] = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };\n</code></pre>\n\n<p>then either of the last two forms will work (provided you fix the constness, which the compiler will complain about), because <code>theArray</code> has type array of const int, and that can be passed to a function that's looking for <code>const int*</code>.</p>\n\n<p>When someone uses arrays as an exercise in recursion that's almost certainly what they're looking for.</p>\n\n<p>Of course, for <strong>real</strong> C++, <code>std::array&lt;int, 10&gt; theArray</code> is more appropriate, and should be passed to a function expecting <code>const std::array&lt;int, 10&gt;&amp;</code> as its first argument.</p>\n"}, {"tags": [], "owner": {"reputation": 1813, "user_id": 2449857, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jxnCm.jpg?s=128&g=1", "display_name": "Jack Deeth", "link": "https://stackoverflow.com/users/2449857/jack-deeth"}, "is_accepted": false, "score": 0, "last_activity_date": 1481751056, "creation_date": 1481751056, "answer_id": 41152519, "question_id": 41152026, "link": "https://stackoverflow.com/questions/41152026/pass-an-array-to-a-void-function-and-recursively-print-the-elements/41152519#41152519", "title": "Pass an array to a void function, and recursively print the elements", "body": "<p>While you're doing recursive things to arrays as an academic exercise, you can also conveniently pass <code>std::array</code> to <code>cout</code> by overloading the <code>&lt;&lt;</code> operator:</p>\n\n<pre><code>template&lt;typename T, size_t S&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; stream, const std::array&lt;T,S&gt;&amp; ary) {\n  for(const auto e&amp; : ary){\n    stream &lt;&lt; e &lt;&lt; \" \";\n  }\n  return stream;\n}\n</code></pre>\n\n<p>This template will work with any <code>std::array</code> whose elements can be <code>&lt;&lt;</code>'d to <code>cout</code>.</p>\n\n<pre><code>cout &lt;&lt; theSource &lt;&lt; endl;\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 7106712, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e198b8d8f4e305c516c57598d4691649?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/7106712/greg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1353, "favorite_count": 0, "accepted_answer_id": 41152082, "answer_count": 3, "score": 2, "last_activity_date": 1481751056, "creation_date": 1481748998, "last_edit_date": 1481749493, "question_id": 41152026, "link": "https://stackoverflow.com/questions/41152026/pass-an-array-to-a-void-function-and-recursively-print-the-elements", "title": "Pass an array to a void function, and recursively print the elements", "body": "<p>I'm self teaching myself to program from a book. The task at hand is that I have to put an array with two subscripts through a function that returns nothing (a void function I assume), and recursively print each of the elements.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;array&gt;\n#include &lt;iomanip&gt;\n#include &lt;string&gt;\n#include &lt;cstddef&gt;\n\nusing namespace std;\n\nvoid printArray (int source, int a, int b){\n    if (a &lt; b){\n        cout &lt;&lt; source[a] &lt;&lt; \" \";\n        printArray(source, a + 1, b);\n        }\n}\n\nint main (){\n    const array&lt;int, 10&gt; theSource = {1, 2, 3, 4, 5, 6, 7, 8, 9};\n    int al = 0;\n    int bl = theSource.size();\n\n    printArray(theSource, al, bl);\n}\n</code></pre>\n\n<p>When I attempt to do this I get two errors. </p>\n\n<pre><code>11|error: invalid types 'int[int]' for array subscript|\n22|error: cannot convert 'const std::array&lt;int, 10u&gt;' to 'int' for argument '1' to 'void printArray(int, int, int)'|\n</code></pre>\n\n<p>So I tried changing the void to...</p>\n\n<pre><code>void printArray (int source[], int a, int b)\n</code></pre>\n\n<p>and also...</p>\n\n<pre><code>void printArray (int *source, int a, int b){\n</code></pre>\n\n<p>But still get the error...</p>\n\n<pre><code>22|error: cannot convert 'const std::array&lt;int, 10u&gt;' to 'int' for argument '1' to 'void printArray(int, int, int)'|\n</code></pre>\n\n<p>Is there a different way to put arrays through a function?</p>\n\n<p>The task is...</p>\n\n<blockquote>\n  <p>(Print an array) Write a recursive function printArray that takes an array, a starting sub-script and an ending subscript as arguments, returns nothing and prints the array. The function should stop processing and return when the starting subscript equals the ending subscript.</p>\n</blockquote>\n"}, {"tags": ["c++", "opengl", "antialiasing", "fbo"], "comments": [{"owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 0, "creation_date": 1481749377, "post_id": 41151984, "comment_id": 69506422, "body": "That code doesn&#39;t make sense. There is no such thing as an &quot;onscreen FBO&quot;. There is also lots of unnecessary code regarding render buffers which you later replace from textures. However, what you <i>seemingly</i> are trying to do here is just <i>downsampling</i>, not <i>supersampling</i>."}, {"owner": {"reputation": 405, "user_id": 2561833, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/kkVcL.png?s=128&g=1", "display_name": "NeoKuro", "link": "https://stackoverflow.com/users/2561833/neokuro"}, "reply_to_user": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 0, "creation_date": 1481749481, "post_id": 41151984, "comment_id": 69506468, "body": "Oic...do you have any recommendations for a good quality supersampling tutorial?"}, {"owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 0, "creation_date": 1481749741, "post_id": 41151984, "comment_id": 69506607, "body": "What do you even mean by superasmpling?What you might want to do in GL is a multisampled color buffer in combination with per-sample shading. But it is totally unclear to me if that is what you actually want, and why you would want it."}, {"owner": {"reputation": 405, "user_id": 2561833, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/kkVcL.png?s=128&g=1", "display_name": "NeoKuro", "link": "https://stackoverflow.com/users/2561833/neokuro"}, "reply_to_user": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 0, "creation_date": 1481750056, "post_id": 41151984, "comment_id": 69506760, "body": "SSAA (render scene to offscreen texture a higher-than-screen resolution. It is then rendered to screen and each &quot;on-screen pixel&quot; hasa number of associated &quot;sub-pixels&quot; in the off-screen texture. And I want/need to do it as it is an assignment and my lecturer has given us no material on it at all :( so any help really is appreciated."}, {"owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 0, "creation_date": 1481750241, "post_id": 41151984, "comment_id": 69506846, "body": "Well, GPUs do have supprt for supersampling, but what you describe is not that. You describe simple downsampling (which might or might not be considered supersampling, depending on who you ask, and in which context). In general,  real supersampling is more flexible, in that the sample locations are not fixed to an uniform grid as you get with downsampling."}, {"owner": {"reputation": 405, "user_id": 2561833, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/kkVcL.png?s=128&g=1", "display_name": "NeoKuro", "link": "https://stackoverflow.com/users/2561833/neokuro"}, "reply_to_user": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 0, "creation_date": 1481751849, "post_id": 41151984, "comment_id": 69507575, "body": "Oic....my lecturer has mentioned using a pixel shader to sample multiple texels and output the colours to the screen...not sure if that clarifies what hes on about?"}, {"owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 0, "creation_date": 1481835127, "post_id": 41151984, "comment_id": 69546665, "body": "Well, that is just downsampling."}], "owner": {"reputation": 405, "user_id": 2561833, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/kkVcL.png?s=128&g=1", "display_name": "NeoKuro", "link": "https://stackoverflow.com/users/2561833/neokuro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1481748838, "creation_date": 1481748838, "question_id": 41151984, "link": "https://stackoverflow.com/questions/41151984/c-opengl-nothing-is-rendering-when-attempting-supersampling", "title": "C++ OpenGL Nothing is rendering when attempting supersampling", "body": "<p>I'm attempting to have SSAA featured in my scene. Previously, I have setup the entire scene as an FBO, and it works fine (it renders perfectly on my screen). However as soon as I try to apply SSAA to it, the screen is always black, and I'm unsure why. I've followed a tutorial based on iOS but was fairly simple to copy to windows which can be found <a href=\"https://www.safaribooksonline.com/library/view/iphone-3d-programming/9781449388133/ch06s08.html\" rel=\"nofollow noreferrer\">here</a>\n However as I said when trying a similar technique to that it doesnt work. I understand the theory/concept of SSAA but cannot seem to get it to work. Any help I'd really appreciate it as I can't find much material on it (it is mostly on MSAA or other A.A. techniques)</p>\n\n<p><strong><em>FBO Initialization</em></strong></p>\n\n<pre><code>void InitSSAAFBO()\n{\n    // Create the on-screen FBO.\n\n    glGenFramebuffers(1, &amp;fbo);\n    glBindFramebuffer(GL_FRAMEBUFFER, fbo);\n    glFramebufferRenderbuffer(GL_FRAMEBUFFER,\n        GL_COLOR_ATTACHMENT0,\n        GL_RENDERBUFFER,\n        fboColTex);\n\n    glGenRenderbuffers(1, &amp;bigColour);\n    glBindRenderbuffer(GL_RENDERBUFFER, bigColour);\n    glRenderbufferStorage(GL_RENDERBUFFER, GL_RGBA8,\n        windowWidth * supersamplingLevel, windowHeight * supersamplingLevel);\n\n    glGenRenderbuffers(1, &amp;bigDepth);\n    glBindRenderbuffer(GL_RENDERBUFFER, bigDepth);\n    glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT24,\n        windowWidth * supersamplingLevel, windowHeight * supersamplingLevel);\n\n    glGenFramebuffers(1, &amp;fboBig);\n    glBindFramebuffer(GL_FRAMEBUFFER, fboBig);\n    glFramebufferRenderbuffer(GL_FRAMEBUFFER,\n        GL_COLOR_ATTACHMENT0,\n        GL_RENDERBUFFER,\n        bigColour);\n    glFramebufferRenderbuffer(GL_FRAMEBUFFER,\n        GL_DEPTH_ATTACHMENT,\n        GL_RENDERBUFFER,\n        bigDepth);\n\n    // Create a texture object and associate it with the big FBO.\n\n    glGenTextures(1, &amp;offscreenTexture);\n    glBindTexture(GL_TEXTURE_2D, offscreenTexture);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);\n    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, windowWidth * supersamplingLevel, windowHeight * supersamplingLevel, 0,\n        GL_RGBA, GL_UNSIGNED_BYTE, 0);\n    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0,\n        GL_TEXTURE_2D, offscreenTexture, 0);\n\n    GLenum demoFBOStatus = glCheckFramebufferStatus(GL_FRAMEBUFFER);\n\n    if (demoFBOStatus != GL_FRAMEBUFFER_COMPLETE) {\n\n        fboOkay = false;\n        cout &lt;&lt; \"Could not successfully create framebuffer object to render texture!\" &lt;&lt; endl;\n\n    }\n    else {\n\n        fboOkay = true;\n        cout &lt;&lt; \"FBO successfully created\" &lt;&lt; endl;\n    }\n\n    // Unbind FBO for now! (Plug main framebuffer back in as rendering destination)\n    glBindFramebuffer(GL_FRAMEBUFFER, 0);\n}\n</code></pre>\n\n<p><strong><em>Rendering</em></strong></p>\n\n<pre><code>void display(void) {\n\n    //Bind Large FBO\n    glBindFramebuffer(GL_FRAMEBUFFER, fboBig);\n    glBindRenderbuffer(GL_RENDERBUFFER, bigColour);\n    glClearColor(1.0, 1.0, 1.0, 1.0);\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n    glViewport(0, 0, windowWidth * supersamplingLevel, windowHeight * supersamplingLevel);\n    glEnable(GL_DEPTH_TEST);\n    DrawScene();\n\n\n    //Bind small/Onscreen FBO\n    glBindFramebuffer(GL_FRAMEBUFFER, fbo);\n    glBindRenderbuffer(GL_RENDERBUFFER, fboColTex);\n\n    glViewport(0, 0, windowWidth, windowHeight);\n    glClearColor(1.0f, 1.0f, 1.0f, 1.0f);\n    glClear(GL_COLOR_BUFFER_BIT);\n\n    glDisable(GL_DEPTH_TEST);\n    glUseProgram(fboShader);\n    glBindVertexArray(quadVAO);\n    glBindTexture(GL_TEXTURE_2D, offscreenTexture);\n    glDrawArrays(GL_TRIANGLES, 0, 6);\n    glBindVertexArray(0);\n\n    glutSwapBuffers();\n}\n</code></pre>\n\n<p><strong><em>fboShader (Vertex Shader)</em></strong></p>\n\n<pre><code>#version 330 core\nlayout (location = 0) in vec2 position;\nlayout (location = 1) in vec2 texCoords;\n\nout vec2 TexCoords;\n\nvoid main()\n{\n    gl_Position = vec4(position.x, position.y, 0.0f, 1.0f); \n    TexCoords = texCoords;\n}  \n</code></pre>\n\n<p><strong><em>fboShader (Fragment Shader)</em></strong></p>\n\n<pre><code>#version 330 core\nin vec2 TexCoords;\nout vec4 color;\n\nuniform sampler2D screenTexture;\n\nvoid main()\n{ \n    color = texture(screenTexture, TexCoords);\n}\n</code></pre>\n"}, {"tags": ["c++", "unordered-set"], "comments": [{"owner": {"reputation": 33511, "user_id": 321013, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/256c9d534302a138d5d1fe3ed833e217?s=128&d=identicon&r=PG", "display_name": "Martin Ba", "link": "https://stackoverflow.com/users/321013/martin-ba"}, "edited": false, "score": 1, "creation_date": 1481748894, "post_id": 41151938, "comment_id": 69506169, "body": "Read the docs, Luke: <a href=\"http://en.cppreference.com/w/cpp/container/unordered_set/insert\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/unordered_set/insert</a>"}, {"owner": {"reputation": 33511, "user_id": 321013, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/256c9d534302a138d5d1fe3ed833e217?s=128&d=identicon&r=PG", "display_name": "Martin Ba", "link": "https://stackoverflow.com/users/321013/martin-ba"}, "edited": false, "score": 2, "creation_date": 1481749020, "post_id": 41151938, "comment_id": 69506243, "body": "Also, do yourself a favor and don&#39;t traffick in Raw Pointers."}], "answers": [{"comments": [{"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 1, "creation_date": 1481749308, "post_id": 41152031, "comment_id": 69506388, "body": "I don&#39;t get what you want to say with your last sentence... If you have to equal pointers (same address) of the same type: what content is/can be duplicate in in your opninion?"}, {"owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1481749540, "post_id": 41152031, "comment_id": 69506502, "body": "@SimonKraemer If there is some aspect of the Element objects that he is trying to keep unique, using a set of pointers will not do that."}, {"owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1481749894, "post_id": 41152031, "comment_id": 69506676, "body": "@SimonKraemer I appreciate the question."}], "tags": [], "owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "is_accepted": true, "score": 3, "last_activity_date": 1481749703, "last_edit_date": 1481749703, "creation_date": 1481749018, "answer_id": 41152031, "question_id": 41151938, "link": "https://stackoverflow.com/questions/41151938/checking-if-element-exists-in-unorderd-set-before-inserting-it/41152031#41152031", "title": "Checking if element exists in unorderd_set before inserting it", "body": "<p>If you try to insert a value that is already present, the set will remain unchanged. The call will return a pair containing an iterator and Boolean. The Boolean will be false if the item was already present.</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/container/unordered_set/insert\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/container/unordered_set/insert</a></p>\n\n<p>Note that in your case where the set contains pointers it will only prevent you from having duplicate pointers, not duplicate contents. For example,</p>\n\n<p>if your <code>Element</code> object represented an element, like Oxygen, it might contain a value for the atomic number and a string for the name. If you only want oxygen to appear once, a set of pointers will not automatically do this.</p>\n"}, {"tags": [], "owner": {"reputation": 3109, "user_id": 6178493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9rTzh.jpg?s=128&g=1", "display_name": "Rama", "link": "https://stackoverflow.com/users/6178493/rama"}, "is_accepted": false, "score": 1, "last_activity_date": 1481750044, "last_edit_date": 1481750044, "creation_date": 1481749660, "answer_id": 41152203, "question_id": 41151938, "link": "https://stackoverflow.com/questions/41151938/checking-if-element-exists-in-unorderd-set-before-inserting-it/41152203#41152203", "title": "Checking if element exists in unorderd_set before inserting it", "body": "<p>An <code>insert()</code> on <code>unorderd_set</code> does a <code>find()</code> to see if the object exists and then inserts the object.</p>\n\n<p>So in your code they are two <code>find()</code>, one explicit, and other inside the <code>insert()</code></p>\n"}], "owner": {"reputation": 2159, "user_id": 1080517, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2716302deba4765ec00122e0b0da833d?s=128&d=identicon&r=PG", "display_name": "sebap123", "link": "https://stackoverflow.com/users/1080517/sebap123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2350, "favorite_count": 0, "accepted_answer_id": 41152031, "answer_count": 2, "score": 0, "last_activity_date": 1481750044, "creation_date": 1481748701, "question_id": 41151938, "link": "https://stackoverflow.com/questions/41151938/checking-if-element-exists-in-unorderd-set-before-inserting-it", "title": "Checking if element exists in unorderd_set before inserting it", "body": "<p>I would like to ask if there is any point of checking if element exists in <code>unorderd_set</code> before inserting it? According to <a href=\"http://www.cplusplus.com/reference/unordered_set/unordered_set/insert/\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p>Each element is inserted only if it is not equivalent to any other element already in the container (elements in an unordered_set have unique values).</p>\n</blockquote>\n\n<p>So if I'm getting it correctly in my case:</p>\n\n<pre><code>Element *element = new Element;\n//...\nif ( my_set.find (element) == my_set.end() )\n    my_set.insert(element);\n</code></pre>\n\n<p>It is not required - correct? What actually happens if I try to insert element that is already in the set. Does it do exactly the same check that I am doing?</p>\n"}, {"tags": ["c++", "qt", "listview", "qt-creator", "qvector"], "comments": [{"owner": {"reputation": 1145, "user_id": 2509099, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6b943869aa8e032e04aae5d8b637d47c?s=128&d=identicon&r=PG", "display_name": "rafael gonzalez", "link": "https://stackoverflow.com/users/2509099/rafael-gonzalez"}, "edited": false, "score": 0, "creation_date": 1481749477, "post_id": 41151766, "comment_id": 69506465, "body": "<a href=\"http://stackoverflow.com/questions/32084336/how-to-properly-add-strings-to-qlistwidgets\" title=\"how to properly add strings to qlistwidgets\">stackoverflow.com/questions/32084336/&hellip;</a>"}, {"owner": {"reputation": 23728, "user_id": 299399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1907f4968c4c5b5fedb8f7cba422a032?s=128&d=identicon&r=PG", "display_name": "Frank Osterfeld", "link": "https://stackoverflow.com/users/299399/frank-osterfeld"}, "edited": false, "score": 0, "creation_date": 1481783859, "post_id": 41151766, "comment_id": 69517022, "body": "You could write a custom QAbstractListModel subclass that directly returns the data of the std::vector"}], "answers": [{"tags": [], "owner": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "is_accepted": false, "score": 1, "last_activity_date": 1481749527, "creation_date": 1481749527, "answer_id": 41152169, "question_id": 41151766, "link": "https://stackoverflow.com/questions/41151766/how-to-show-stdvector-in-qt-properly/41152169#41152169", "title": "How to show std::vector in QT properly?", "body": "<p>Without knowing all of your requirements for your Dictionary class, my suggestion would be to replace the internal std::vector with a QStringListModel, and then set that as your model for your view. When you make a change to the QStringListModel, it will be reflected in your view automatically.</p>\n\n<p>Alternately, make your Dictionary class a model by subclassing it from QAbstractItemModel. You could still keep your std::vector as the internal data structure and then your \"data\" and \"setData\" methods would read from and write to the std::vector.</p>\n\n<p>Without knowing more about what your Dictionary is for, whether it's sorted or not, whether it contains duplicate entries or not, and so on, it's hard to make solid recommendations on an appropriate data structure.</p>\n"}], "owner": {"reputation": 21, "user_id": 7031408, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-X9AagpEeR_4/AAAAAAAAAAI/AAAAAAAAAAs/PA9clRjbECs/photo.jpg?sz=128", "display_name": "Daniil Sudzhaev", "link": "https://stackoverflow.com/users/7031408/daniil-sudzhaev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1056, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481749527, "creation_date": 1481748040, "question_id": 41151766, "link": "https://stackoverflow.com/questions/41151766/how-to-show-stdvector-in-qt-properly", "title": "How to show std::vector in QT properly?", "body": "<p>I have small class \"Dictionary\", where I contain all data in std::vector. I want to show this data in QT application. So I did a small research and I found that I should use ListView like this:</p>\n\n<pre><code>ui-&gt;WordList-&gt;setModel(new QStringListModel(QList&lt;QString&gt;::fromVector\n                                            (dict-&gt;getQVector())));\n</code></pre>\n\n<p>But this looks like really show. I have to update model of ListView each time I add new element to vector. And also I have to add function to my Dictionary class to get QVector:</p>\n\n<pre><code>QVector&lt;QString&gt; getQVector() {\n  QVector&lt;QString&gt; qv;\n  for (size_t i = 0; i &lt; container.size(); i++) {\n      qv.push_back(QString::fromStdString((std::string)container[i]));\n  }\n  return qv;\n  }\n</code></pre>\n\n<p>...and this looks also really slow.\nSo I have a question: should I rewrite my Dictionary class using QTL? If so, how to display QVector using ListView (or maybe something else) in convenient way?\nThanks in advance.</p>\n"}, {"tags": ["c++", "gcc"], "comments": [{"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 4, "creation_date": 1481748098, "post_id": 41151753, "comment_id": 69505735, "body": "Nothing. Access modifiers are dealt with in the front-end only. Once the code is transformed into assembly language or object code, none of these things exist anymore."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1481748099, "post_id": 41151753, "comment_id": 69505736, "body": "Why do you think access control shows up in the compilation result to begin with?"}], "answers": [{"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": true, "score": 4, "last_activity_date": 1481749952, "creation_date": 1481749952, "answer_id": 41152277, "question_id": 41151753, "link": "https://stackoverflow.com/questions/41151753/how-does-compilergcc-deal-with-the-access-control-for-c/41152277#41152277", "title": "How does compiler(GCC) deal with the access control for C++?", "body": "<p>Access control is strictly a compile-time notion: if all of the accesses in the source code are okay, then the code compiles. There's nothing left to check at runtime, so access qualifiers make have no effect on the generated code.</p>\n"}, {"comments": [{"owner": {"reputation": 1167, "user_id": 5339807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5db3c9fa9b80760fc44ae03008f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "mascoj", "link": "https://stackoverflow.com/users/5339807/mascoj"}, "edited": false, "score": 0, "creation_date": 1481750980, "post_id": 41152348, "comment_id": 69507173, "body": "<code>#define private public</code> That is diabolical. I love it."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 1167, "user_id": 5339807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5db3c9fa9b80760fc44ae03008f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "mascoj", "link": "https://stackoverflow.com/users/5339807/mascoj"}, "edited": false, "score": 0, "creation_date": 1481759482, "post_id": 41152348, "comment_id": 69510293, "body": "It\u2019s obviously not usually a good idea, and it\u2019s technically undefined behavior, but in practice it does work to access something\u2019s private members."}], "tags": [], "owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "is_accepted": false, "score": 1, "last_activity_date": 1481750217, "creation_date": 1481750217, "answer_id": 41152348, "question_id": 41151753, "link": "https://stackoverflow.com/questions/41151753/how-does-compilergcc-deal-with-the-access-control-for-c/41152348#41152348", "title": "How does compiler(GCC) deal with the access control for C++?", "body": "<p>As you said, the compiler will check access when compiling at first.</p>\n\n<p>However, once the object file is generated, there is probably no check. In fact, you can do <code>#define private public</code> before you <code>#include</code> a header file, and then get access to private members.</p>\n\n<p>It might be that some weird object file format or some set of compiler flags will try to make it harder to use the private members, but I expect all methods are almost as easy to work around as the <code>#define</code> trick, especially for accessing <code>protected</code> members as though they were <code>public</code> (because they need to be accessible to derived classes).</p>\n"}], "owner": {"reputation": 69, "user_id": 7050735, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27096788ae911a8cdf79a8ae2d70119b?s=128&d=identicon&r=PG&f=1", "display_name": "tiger", "link": "https://stackoverflow.com/users/7050735/tiger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 41152277, "answer_count": 2, "score": 1, "last_activity_date": 1481750975, "creation_date": 1481747969, "last_edit_date": 1481748972, "question_id": 41151753, "link": "https://stackoverflow.com/questions/41151753/how-does-compilergcc-deal-with-the-access-control-for-c", "title": "How does compiler(GCC) deal with the access control for C++?", "body": "<p>I was wondering how does GCC deal with the control access (public, private, protected) of C++ code.</p>\n\n<p>e.g.</p>\n\n<pre><code>class X\n{   \npublic: \n    int a;    \n    void funcA(){};  \nprivate:\n    int b;\n    void funcB(){};\nprotected:\n    int c;\n    void funcC(){};\n};\n</code></pre>\n\n<p>Of course, compiler will do access control checking at first.\nHowever, my question is: </p>\n\n<p>After generating the assembly code(.s file) or the object file(.o file), what's the different between the private variables/functions/objects and the public things in the assembly code and ELF files? </p>\n\n<p>And how does the compiler set the control access for the code during compilation?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "windows", "visual-studio", "makefile", "compilation"], "comments": [{"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1481747713, "post_id": 41151650, "comment_id": 69505544, "body": "How would you do it on the command line (i.e. *without Make)?"}, {"owner": {"reputation": 103, "user_id": 7156073, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/31d139f48c4fee1636b51784efbf2091?s=128&d=identicon&r=PG&f=1", "display_name": "mooly", "link": "https://stackoverflow.com/users/7156073/mooly"}, "reply_to_user": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1481747921, "post_id": 41151650, "comment_id": 69505642, "body": "I heard there are &quot;nmake&quot; and such, so I mentioned I want to use &quot;make&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 7156073, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/31d139f48c4fee1636b51784efbf2091?s=128&d=identicon&r=PG&f=1", "display_name": "mooly", "link": "https://stackoverflow.com/users/7156073/mooly"}, "edited": false, "score": 0, "creation_date": 1481748165, "post_id": 41151769, "comment_id": 69505768, "body": "No need to compile all header files ? and does that makefile necessarily work on all windows-OS computers? and btw, does it matter to makefile if I need to read or write from an external txt file ?"}, {"owner": {"reputation": 431, "user_id": 6401052, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/476a336a7d7f43a08b3cb3403dafae70?s=128&d=identicon&r=PG&f=1", "display_name": "FamZ", "link": "https://stackoverflow.com/users/6401052/famz"}, "reply_to_user": {"reputation": 103, "user_id": 7156073, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/31d139f48c4fee1636b51784efbf2091?s=128&d=identicon&r=PG&f=1", "display_name": "mooly", "link": "https://stackoverflow.com/users/7156073/mooly"}, "edited": false, "score": 0, "creation_date": 1481748237, "post_id": 41151769, "comment_id": 69505811, "body": "header files are never compiled and yes, even other systems like linux. it doesn&#39;t matter if you read/write external files"}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1481748289, "post_id": 41151769, "comment_id": 69505844, "body": "Do note the tags on the question.... Visual Studio doesn&#39;t come with g++."}, {"owner": {"reputation": 431, "user_id": 6401052, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/476a336a7d7f43a08b3cb3403dafae70?s=128&d=identicon&r=PG&f=1", "display_name": "FamZ", "link": "https://stackoverflow.com/users/6401052/famz"}, "edited": false, "score": 0, "creation_date": 1481748362, "post_id": 41151769, "comment_id": 69505884, "body": "You can replace g++ by any compiler"}, {"owner": {"reputation": 103, "user_id": 7156073, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/31d139f48c4fee1636b51784efbf2091?s=128&d=identicon&r=PG&f=1", "display_name": "mooly", "link": "https://stackoverflow.com/users/7156073/mooly"}, "edited": false, "score": 0, "creation_date": 1481748454, "post_id": 41151769, "comment_id": 69505937, "body": "and how do i know which compiler I need for my visual studio 2015 ?"}, {"owner": {"reputation": 431, "user_id": 6401052, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/476a336a7d7f43a08b3cb3403dafae70?s=128&d=identicon&r=PG&f=1", "display_name": "FamZ", "link": "https://stackoverflow.com/users/6401052/famz"}, "edited": false, "score": 1, "creation_date": 1481749522, "post_id": 41151769, "comment_id": 69506493, "body": "Actually it doesn&#39;t really matter which compiler you are using, Visual studio has its own compiler. You can build a visual studio solution directly by replacing the g++ main.cpp Board.cpp Node.cpp with msbuild your_project.sln /Flags as described here: <a href=\"http://stackoverflow.com/questions/498106/how-do-i-compile-a-visual-studio-project-from-the-command-line\" title=\"how do i compile a visual studio project from the command line\">stackoverflow.com/questions/498106/&hellip;</a>"}], "tags": [], "owner": {"reputation": 431, "user_id": 6401052, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/476a336a7d7f43a08b3cb3403dafae70?s=128&d=identicon&r=PG&f=1", "display_name": "FamZ", "link": "https://stackoverflow.com/users/6401052/famz"}, "is_accepted": true, "score": 2, "last_activity_date": 1481749387, "last_edit_date": 1481749387, "creation_date": 1481748063, "answer_id": 41151769, "question_id": 41151650, "link": "https://stackoverflow.com/questions/41151650/how-to-write-makefile-for-c-vs-proje/41151769#41151769", "title": "how to write makefile for c++ vs proje", "body": "<p>The simplest would be</p>\n\n<pre><code>all:\n    g++ main.cpp Board.cpp Node.cpp\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 7156073, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/31d139f48c4fee1636b51784efbf2091?s=128&d=identicon&r=PG&f=1", "display_name": "mooly", "link": "https://stackoverflow.com/users/7156073/mooly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 41151769, "answer_count": 1, "score": 1, "last_activity_date": 1481749387, "creation_date": 1481747568, "last_edit_date": 1495541326, "question_id": 41151650, "link": "https://stackoverflow.com/questions/41151650/how-to-write-makefile-for-c-vs-proje", "title": "how to write makefile for c++ vs proje", "body": "<p>I need to write a makefile for a c++ visual-studio project running on windows.\nI have only 5 files that I need to compile:</p>\n\n<pre><code>main,  Board.cpp, Board.h, Node.cpp, Node.h\n</code></pre>\n\n<p>I want to use the \"make\" command in cmd and compile it all.\nI don't know how to write proper makefile for that, while searching I've found this <a href=\"https://stackoverflow.com/questions/39231330/write-makefile-for-cpp-and-hpp-c\">Write makefile for .cpp and .hpp c++</a> but it is not my case..\nHELP??</p>\n"}, {"tags": ["c++", "qt", "optimization", "io"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1481747611, "post_id": 41151630, "comment_id": 69505492, "body": "What happens if you flip the code around and do the non binary write first?  Is it still faster?"}, {"owner": {"reputation": 1902, "user_id": 21656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40f8d096a3777232204cb3f796c577b7?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/21656/george"}, "edited": false, "score": 0, "creation_date": 1481747637, "post_id": 41151630, "comment_id": 69505513, "body": "Have you tried it in both release and debug modes?"}, {"owner": {"reputation": 3356, "user_id": 1666676, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQ9IF.jpg?s=128&g=1", "display_name": "Phlucious", "link": "https://stackoverflow.com/users/1666676/phlucious"}, "reply_to_user": {"reputation": 1902, "user_id": 21656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40f8d096a3777232204cb3f796c577b7?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/21656/george"}, "edited": false, "score": 0, "creation_date": 1481748164, "post_id": 41151630, "comment_id": 69505767, "body": "@George This is in release mode. I edited the question to add environment info."}, {"owner": {"reputation": 3356, "user_id": 1666676, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQ9IF.jpg?s=128&g=1", "display_name": "Phlucious", "link": "https://stackoverflow.com/users/1666676/phlucious"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1481748344, "post_id": 41151630, "comment_id": 69505871, "body": "@NathanOliver Hold on... I just realized I had my labels backward so you were correct - flipping the code resulted in the opposite result. Why is that?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1481750219, "post_id": 41151630, "comment_id": 69506836, "body": "@Phlucious Sounds like disk caching.  On the first file it misses so it a long write but the second file hits so it is much shorter."}, {"owner": {"reputation": 3356, "user_id": 1666676, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQ9IF.jpg?s=128&g=1", "display_name": "Phlucious", "link": "https://stackoverflow.com/users/1666676/phlucious"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1481751682, "post_id": 41151630, "comment_id": 69507489, "body": "@NathanOliver I redid the benchmarks by running each test 10 times independently (10x with &quot;wb&quot; and 10x with &quot;w&quot;, with a full restart in between), and the binary is still significantly slower \u2013 27 seconds vs 5 seconds."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 1, "creation_date": 1481759541, "post_id": 41151630, "comment_id": 69510308, "body": "There&#39;s no way to answer anything without you posting a complete, self-contained test case - ideally one that&#39;s not broken to start with. Your primary problem is, most likely, that you write to disk, and that skews the results. Write to NUL instead. Also, <code>QFile</code> should not be any slower than raw writes."}, {"owner": {"reputation": 3356, "user_id": 1666676, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQ9IF.jpg?s=128&g=1", "display_name": "Phlucious", "link": "https://stackoverflow.com/users/1666676/phlucious"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 1, "creation_date": 1481761501, "post_id": 41151630, "comment_id": 69510854, "body": "@KubaOber Writing the same block of data using QFile::write is halfway in between the binary and non-binary fwrite methods - around 15 seconds. I don&#39;t know how I can boil down the provided test cases more than I have... simply comment out the two tests that aren&#39;t being performed that time. Your suggestion to write to NUL doesn&#39;t make sense... writing to disk is exactly what I&#39;m testing."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1481764047, "post_id": 41151630, "comment_id": 69511513, "body": "@Phlucious But you&#39;re not testing writing to disk because, among other things, your test terminates without waiting for the data to be written to disk! What you&#39;re measuring is how long you have to wait before you can write to disk. (That is, how long before enough of a previous write is flushed that there&#39;s room to cache the next one.)"}, {"owner": {"reputation": 3356, "user_id": 1666676, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQ9IF.jpg?s=128&g=1", "display_name": "Phlucious", "link": "https://stackoverflow.com/users/1666676/phlucious"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1481765010, "post_id": 41151630, "comment_id": 69511765, "body": "@DavidSchwartz Interesting... I&#39;m seeing exactly the amount of data I expect to see in the output files. Doesn&#39;t <a href=\"http://www.cplusplus.com/reference/cstdio/fclose/\" rel=\"nofollow noreferrer\">fclose()</a> force the device to flush before closing it and it goes out of scope?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1481765064, "post_id": 41151630, "comment_id": 69511777, "body": "@Phlucious No, it doesn&#39;t. Why would it? That would make a programs that modify lots of little files run absurdly slow."}, {"owner": {"reputation": 3356, "user_id": 1666676, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQ9IF.jpg?s=128&g=1", "display_name": "Phlucious", "link": "https://stackoverflow.com/users/1666676/phlucious"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1481765110, "post_id": 41151630, "comment_id": 69511790, "body": "@DavidSchwartz Because &quot;All internal buffers associated with the stream are disassociated from it and flushed: the content of any unwritten output buffer is written and the content of any unread input buffer is discarded.&quot; from cplusplus.com"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1481765179, "post_id": 41151630, "comment_id": 69511809, "body": "@Phlucious You are drastically misunderstanding that! When it says &quot;is written&quot;, they mean to the OS and filesystem (and thus are visible to other programs talking to the same OS and filesystem), not to the disk!"}, {"owner": {"reputation": 3356, "user_id": 1666676, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQ9IF.jpg?s=128&g=1", "display_name": "Phlucious", "link": "https://stackoverflow.com/users/1666676/phlucious"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1481766204, "post_id": 41151630, "comment_id": 69512070, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/130652/discussion-between-phlucious-and-david-schwartz\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 3356, "user_id": 1666676, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQ9IF.jpg?s=128&g=1", "display_name": "Phlucious", "link": "https://stackoverflow.com/users/1666676/phlucious"}, "edited": false, "score": 2, "creation_date": 1481820995, "post_id": 41157134, "comment_id": 69539232, "body": "Interesting... If that was true, wouldn&#39;t I see a noticeable performance gain by swapping <code>size</code> and <code>count</code>? That doesn&#39;t appear to be the case."}], "tags": [], "owner": {"reputation": 972, "user_id": 2253719, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x6fvu.jpg?s=128&g=1", "display_name": "WPomier", "link": "https://stackoverflow.com/users/2253719/wpomier"}, "is_accepted": false, "score": 0, "last_activity_date": 1481780299, "creation_date": 1481780299, "answer_id": 41157134, "question_id": 41151630, "link": "https://stackoverflow.com/questions/41151630/why-is-fwrite-so-much-slower-in-binary-mode/41157134#41157134", "title": "Why is fwrite so much slower in binary mode?", "body": "<p>Maybe I'm totally wrong, but the reason that I see (based in your code) for that performance difference is the confusion with the <code>fwrite</code> function parameters in these lines:</p>\n\n<pre><code>fwrite(junk.constData(), sizeof(char), junk.size(), &lt;file&gt;);\n</code></pre>\n\n<p>Let's review the definition of that function:</p>\n\n<pre><code>size_t fwrite (const void* buff, size_t size, size_t count, FILE* stream);\n</code></pre>\n\n<p>Where:</p>\n\n<ul>\n<li><code>size</code> Is the block size to write.</li>\n<li><code>count</code> Is the quantity of blocks to write</li>\n<li><code>stream</code> Is, in this case, the file to write into.</li>\n<li>The function returns a <code>size_t</code> with the quantity of blocks succesfully written.</li>\n</ul>\n\n<p>Now, the meaning of those parameters totally depend on the <code>fwrite</code> implementation code. In some cases (like FreeBSD's libc) the implementation simply does something like <code>total = size*count</code> and make one system call to write the entire buffer. But in another implementations (like Microsoft's), it's a different story:</p>\n\n<p><strong>Meaning in Text mode</strong></p>\n\n<p>The fwrite will:</p>\n\n<ul>\n<li>Copy blocks of <code>size</code> bytes each into an internal memory buffer of <code>BUFSIZ</code> bytes of size (normally 512, if not changed by user)</li>\n<li>Convert all newline chars</li>\n<li>Make one system call to write that internal <code>BUFSIZ</code> buffer, when it is full.</li>\n<li>If it cannot complete that system call, returns with the number of blocks already written till now.</li>\n<li>Do all over again until <code>count</code> blocks will be written or an error happen.</li>\n</ul>\n\n<p>In your code: The fwrite will make aprox. (junk.size()/512) of system calls.</p>\n\n<p><strong>Meaning in Binary mode</strong></p>\n\n<p>The fwrite will:</p>\n\n<ul>\n<li>Make a loop from 1 to <code>count</code> iterations:</li>\n<li>In each iteration, it will make one system call to write one blocks of <code>size</code> bytes into that file.</li>\n<li>If it cannot complete that system call, returns with the number of blocks already written till now.</li>\n<li>Do all over again until <code>count</code> blocks will be written or an error happen.</li>\n</ul>\n\n<p>In your code: The fwrite will make ~512x more system calls than in the text mode (why it is only 10x slower? that's another question).</p>\n"}], "owner": {"reputation": 3356, "user_id": 1666676, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQ9IF.jpg?s=128&g=1", "display_name": "Phlucious", "link": "https://stackoverflow.com/users/1666676/phlucious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 533, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481780299, "creation_date": 1481747459, "last_edit_date": 1481761873, "question_id": 41151630, "link": "https://stackoverflow.com/questions/41151630/why-is-fwrite-so-much-slower-in-binary-mode", "title": "Why is fwrite so much slower in binary mode?", "body": "<p>I have a buffer of roughly 2GB of raw binary data stored in a <a href=\"http://doc.qt.io/qt-4.8/qbytearray.html\" rel=\"nofollow noreferrer\">QByteArray</a> that I'm trying to write the fastest way possible. Because <a href=\"http://doc.qt.io/qt-4.8/qfile.html\" rel=\"nofollow noreferrer\">QFile</a> was noticeably slower, I went back to dabbling in C/C++-style writing, which I haven't done for a couple years so I'm very rusty.</p>\n\n<p>Sample code:</p>\n\n<pre><code>QFile in(\"D:/input.las\");\nin.open(QIODevice::ReadOnly);\nQByteArray junk = in.readAll();\nin.close();\n\nQFile test1(\"D:/samplelas/bigset2/out/_test1.las\");\ntest1.open(QIODevice::WriteOnly | QIODevice::Truncate);\nif(test1.isOpen())\n{\n    QElapsedTimer t;\n    t.start();\n    test1.write(junk);\n    test1.close();\n    qDebug(\"Round\\t%'i\\tTest QFile\\ttook\\t%'i\", i+1, t.elapsed());\n}\n\nFILE* test2 = fopen(\"D:/_test2.las\", \"wb\");\nif(test2)\n{\n    QElapsedTimer t;\n    t.start();\n    fwrite(junk.constData(), sizeof(char), junk.size(), test2);\n    fclose(test2);\n    qDebug(\"Round\\t%'i\\tTest wb\\ttook\\t%'i\", i+1, t.elapsed());\n}\n\nFILE* test3 = fopen(\"D:/_test3.las\", \"w\");\nif(test3)\n{\n    QElapsedTimer t;\n    t.start();\n    fwrite(junk.constData(), sizeof(char), junk.size(), test3);\n    fclose(test3);\n    qDebug(\"Round\\t%'i\\tTest w\\ttook\\t%'i\", i+1, t.elapsed());\n}\n</code></pre>\n\n<p>I noticed that using <code>\"w\"</code> instead of <code>\"wb\"</code> corrupted the output because \"newline\" characters were interpreted on my Windows machine (rookie mistake). Still, the results were promising, so I tried again with \"wb\" instead.</p>\n\n<p>I was extremely startled to find that binary mode was slower by a factor of 5-10x and I can't figure out why. If anything, the non-binary mode write should be <em>faster</em> because it's not interpreted, just raw data.</p>\n\n<p>What am I missing?</p>\n\n<p><strong>Edit1:</strong> Testing in release mode using Qt 4.8.6 on MSVC2010, Windows 7x64 Pro.</p>\n\n<p><strong>Edit2:</strong> Added QFile test case and clarified explanation of the issue.</p>\n"}, {"tags": ["c++", "class", "inheritance", "increment", "base"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1481746972, "post_id": 41151489, "comment_id": 69505172, "body": "Can you please create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of the code you are having a issue with?"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 2, "creation_date": 1481747153, "post_id": 41151489, "comment_id": 69505237, "body": "Review how a class is defined: It is not <code>base class{..}</code> but <code>class base{...}</code>. And if <code>Derived</code> derives from <code>base</code>, then <code>class Derived : public base {...}</code>."}], "answers": [{"comments": [{"owner": {"reputation": 8707, "user_id": 6919963, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f6e821b392cb6c281097a8f668669efe?s=128&d=identicon&r=PG", "display_name": "Miguel Ruivo", "link": "https://stackoverflow.com/users/6919963/miguel-ruivo"}, "edited": false, "score": 0, "creation_date": 1481747562, "post_id": 41151581, "comment_id": 69505462, "body": "Well, in fact I have a counter that it&#39;s not for the objects created but for something else. Let&#39;s say I&#39;ve base class and inherited1, inherited2.... and so on. And all of those inheriteds have their own x and y (that&#39;s why it&#39;s in the base) but I&#39;ve also another variable which is present in all the inherited classes as well (counter for example) and I want independently to increase or decrease it. I don&#39;t know a way to do this. It&#39;s not for each constructed object. I&#39;ve only 1 object inherited constructed and I want to be able to change that counter (which is in the base). Thank you!!"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 8707, "user_id": 6919963, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f6e821b392cb6c281097a8f668669efe?s=128&d=identicon&r=PG", "display_name": "Miguel Ruivo", "link": "https://stackoverflow.com/users/6919963/miguel-ruivo"}, "edited": false, "score": 0, "creation_date": 1481747781, "post_id": 41151581, "comment_id": 69505573, "body": "@MiguelRuivo, You can&#39;t do that. The base class can&#39;t have one variable for <code>derived1</code>, a second for <code>derived2</code>, a third for <code>derived3</code>, etc. If you want to keep track of the number of <code>derived1</code> objects constructed, you&#39;ll need to add the bookkeeping code to <code>derived1</code>. You can create a class template to streamline that process."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1481749259, "last_edit_date": 1481749259, "creation_date": 1481747248, "answer_id": 41151581, "question_id": 41151489, "link": "https://stackoverflow.com/questions/41151489/changing-base-class-value-in-c/41151581#41151581", "title": "Changing base class value in c++", "body": "<blockquote>\n  <p>What am I missing here?</p>\n</blockquote>\n\n<p>It seems to me that you want to keep track of the number of objects constructed whose types are derived from <code>Base</code>.</p>\n\n<p>In that case, you need to make <code>counter</code> a <code>static</code> member variable, which will require you to make <code>add_counter</code> a <code>static</code> member function.</p>\n\n<p>However, that will require you to:</p>\n\n<ol>\n<li>Decrement the count in the destructor.</li>\n<li>Add a copy constructor in <code>Base</code> to make sure that objects created using a copy constructor are also counted.</li>\n</ol>\n\n<p>Here's a simplified version of <code>base</code> to do that:</p>\n\n<pre><code>class base\n{\n   public:\n\n     base() { inrement_counter(); }\n\n     base(base const&amp; copy) { inrement_counter(); }\n\n     virtual ~base(){ decrement_counter(); }\n\n   private:\n\n     static int counter;\n     static void inrement_counter() {++counter;}\n     static void decrement_counter() {--counter;}\n}\n\nint base::counter = 0;\n</code></pre>\n\n<hr>\n\n<p>If you want to keep track of the number of <code>derived1</code> objects constructed, you'll need to add the bookkeeping code to <code>derived1</code>. You can create a class template to streamline that process.</p>\n\n<p>Example:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct ObjectCounter\n{\n   ObjectCounter() { inrement_counter(); }\n\n   ObjectCounter(ObjectCounter const&amp; copy) { inrement_counter(); }\n\n   virtual ~ObjectCounter(){ decrement_counter(); }\n\n   static int counter;\n   static void inrement_counter(){++counter;}\n   static void decrement_counter(){--counter;}\n};\n\ntemplate &lt;typename T&gt;\nint ObjectCounter&lt;T&gt;::counter = 0;\n\nclass base\n{\n};\n\nclass derived1 : public base, public ObjectCounter&lt;derived1&gt;\n{\n};\n\nclass derived2 : public base, public ObjectCounter&lt;derived2&gt;\n{\n};\n\n#include &lt;iostream&gt;\n\nint main()\n{\n   derived1 d1;\n   derived2 d2;\n   auto d3 = d2;\n\n   std::cout &lt;&lt; d1.counter &lt;&lt; std::endl;\n   std::cout &lt;&lt; d2.counter &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1\n2\n</code></pre>\n"}], "owner": {"reputation": 8707, "user_id": 6919963, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f6e821b392cb6c281097a8f668669efe?s=128&d=identicon&r=PG", "display_name": "Miguel Ruivo", "link": "https://stackoverflow.com/users/6919963/miguel-ruivo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1684, "favorite_count": 0, "accepted_answer_id": 41151581, "answer_count": 1, "score": 0, "last_activity_date": 1481749259, "creation_date": 1481746866, "question_id": 41151489, "link": "https://stackoverflow.com/questions/41151489/changing-base-class-value-in-c", "title": "Changing base class value in c++", "body": "<p>I'm facing a problem with a few inherited classes and their base class as well.</p>\n\n<p>For example:</p>\n\n<pre><code>base class{\n\nint x,y; // Doesnt really matter\nint counter;\n\npublic:\n\nclass(int x, int y):x(x), y(y), counter(1){}\n\nvoid add_counter(){counter++;}\n//stuff\nvirtual ~base(){}\n}\n\n\n\nclass1:public base{\n\n public:\n\n class1():base(1,2){}\n }\n</code></pre>\n\n<p>Every of my inherited classes (which I've a few) they all pass the x,y differently from each other. And then I want this counter to increment when I call it.</p>\n\n<p>The problem I'm facing is that the counter increases ONLY on that iteration. No object is being re-constructed (because I debugged). If I call the add_counter for the class1 it will increase from 1 to 2 but if I call it again it will be the same (1 to 2). </p>\n\n<p>What am I missing here?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 41213, "user_id": 215568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b05685e6c3945f4bd23bf1f967861aeb?s=128&d=identicon&r=PG", "display_name": "Donnie", "link": "https://stackoverflow.com/users/215568/donnie"}, "edited": false, "score": 3, "creation_date": 1481745140, "post_id": 41151026, "comment_id": 69504191, "body": "<code>delete</code> is never called by the language.  Consider a smart pointer based parameter that reference counts (otherwise you&#39;ll never be sure if the object was constructed as a default parameter)"}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 2, "creation_date": 1481745221, "post_id": 41151026, "comment_id": 69504245, "body": "<i>&quot;I want to avoid doing an explicit delete myself since if the second argument is passed then I don&#39;t want to delete the pointer passed by the caller.&quot;</i> Right. Which is why you cannot use this pattern."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1481745223, "post_id": 41151026, "comment_id": 69504247, "body": "this seems like an opportunity to simply have a <code>doSomething(int a)</code> overload that calls <code>doSomething(int a, Obj* obj)</code> with an obj pointer that <i>it</i> manages. Or better, a smart pointer. Also consider: what happens if someone explicitly passes a null pointer into your function at present? It seems like you might be trying to guarantee for the function that <code>obj</code> is never null, but this is a bad way to do that..."}], "answers": [{"tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": true, "score": 6, "last_activity_date": 1481745453, "creation_date": 1481745453, "answer_id": 41151142, "question_id": 41151026, "link": "https://stackoverflow.com/questions/41151026/is-delete-called-on-a-c-default-pointer-parameter/41151142#41151142", "title": "is delete called on a c++ default pointer parameter", "body": "<p>It sounds like your memory ownership semantics need a rework. In some cases you own the memory and others you don't. If you insist on default creating an instance of <code>Obj</code>, then also accept a boolean that indicates whether you own the memory or not. In the end, though, I actually suggest you use overloading instead to accomplish this, where one function takes one argument and the other two. The one that only accepts one will create an instance of <code>Obj</code> and then call your base <code>doSomething</code> function.</p>\n\n<p>Something like:</p>\n\n<pre><code>void doSomething(int a, Obj* obj) {\n...\n}\n\nvoid doSomething(int a) {\n   Obj tmp;\n   doSomething(a, &amp;tmp);\n}\n</code></pre>\n"}], "owner": {"reputation": 697, "user_id": 1076215, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/98a5958a3dd0f2b299d9d409ea8929b3?s=128&d=identicon&r=PG", "display_name": "Captain Jack sparrow", "link": "https://stackoverflow.com/users/1076215/captain-jack-sparrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 41151142, "answer_count": 1, "score": 3, "last_activity_date": 1481745453, "creation_date": 1481745035, "question_id": 41151026, "link": "https://stackoverflow.com/questions/41151026/is-delete-called-on-a-c-default-pointer-parameter", "title": "is delete called on a c++ default pointer parameter", "body": "<p>I have a function that instantiates a pointer by default if it is not supplied with the second parameter.</p>\n\n<pre><code>void doSomething(int a, Obj* obj = new Obj()) {\n...\n}\n</code></pre>\n\n<p>Do I need to call an explicit delete inside the function if I want to release obj or it is done automatically if I had instantiated the pointer from the default param values?</p>\n\n<p>I want to avoid doing an explicit delete myself since if the second argument is passed then I don't want to delete the pointer passed by the caller.</p>\n"}, {"tags": ["c++", "xcode"], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 2587422, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/41f783a0cead45b4bf168865a01aea67?s=128&d=identicon&r=PG", "display_name": "Luigi D.", "link": "https://stackoverflow.com/users/2587422/luigi-d"}, "edited": false, "score": 0, "creation_date": 1481789960, "post_id": 41151262, "comment_id": 69519835, "body": "That&#39;s exactly what I&#39;m doing, except I&#39;m using an <code>unordered_set</code>. Now I just need to understand how to include Boost libraries in Xcode and I should be good to go."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 121, "user_id": 2587422, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/41f783a0cead45b4bf168865a01aea67?s=128&d=identicon&r=PG", "display_name": "Luigi D.", "link": "https://stackoverflow.com/users/2587422/luigi-d"}, "edited": false, "score": 0, "creation_date": 1481790221, "post_id": 41151262, "comment_id": 69519987, "body": "boost.functional is entirely header-only so you just need the set the include path to point to the boost source."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": true, "score": 2, "last_activity_date": 1481745888, "creation_date": 1481745888, "answer_id": 41151262, "question_id": 41150904, "link": "https://stackoverflow.com/questions/41150904/xcode-wont-compile-due-to-llvm-error/41151262#41151262", "title": "Xcode won&#39;t compile due to LLVM error", "body": "<p>There is no <code>std::hash</code> specialisation for <code>std::pair</code> (or <code>std::tuple</code>). It's one of the most ridiculous features of the c++ standard and it cripples the library.</p>\n\n<p>This is probably occurring because you're using a <code>std::pair</code> as a key in an <code>unordered_map</code>. </p>\n\n<p>What you need to do is include boost: <code>&lt;boost/functional/hash.hpp&gt;</code> and declare <code>boost::hash&lt;std::pair&lt;X, Y&gt;&gt;</code> as the 3rd template parameter of your map.</p>\n\n<p>Until <code>std::hash</code> is fixed, it's almost useless.</p>\n"}], "owner": {"reputation": 121, "user_id": 2587422, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/41f783a0cead45b4bf168865a01aea67?s=128&d=identicon&r=PG", "display_name": "Luigi D.", "link": "https://stackoverflow.com/users/2587422/luigi-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 1, "accepted_answer_id": 41151262, "answer_count": 1, "score": 0, "last_activity_date": 1481745888, "creation_date": 1481744676, "question_id": 41150904, "link": "https://stackoverflow.com/questions/41150904/xcode-wont-compile-due-to-llvm-error", "title": "Xcode won&#39;t compile due to LLVM error", "body": "<p>I'm trying to write a C++ program in Xcode.\nMy code seems not to have any issues, but when I try to compile it I get the following error:</p>\n\n<pre><code>Implicit instantiation of undefined template 'std::__1::hash&lt;std::1::pair&lt;unsigned long, unsigned long&gt; &gt;'\n</code></pre>\n\n<p>This error would apparently be at line 1008 of LLVM's <code>type_traits</code> file.\nI thought it was some library error, but when I tried to compile a simple Hello World, it worked fine.</p>\n\n<p>Anybody know what I'm missing?</p>\n"}, {"tags": ["c++", "opencv"], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 6357606, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b3eca82fef19bb98bcb491b5516f3332?s=128&d=identicon&r=PG&f=1", "display_name": "tofi", "link": "https://stackoverflow.com/users/6357606/tofi"}, "edited": false, "score": 0, "creation_date": 1481745660, "post_id": 41150996, "comment_id": 69504502, "body": "Thanks @Micka , I want the frames to be saved like ( 0,1,2,....) . this is my main question ."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "reply_to_user": {"reputation": 17, "user_id": 6357606, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b3eca82fef19bb98bcb491b5516f3332?s=128&d=identicon&r=PG&f=1", "display_name": "tofi", "link": "https://stackoverflow.com/users/6357606/tofi"}, "edited": false, "score": 1, "creation_date": 1481746218, "post_id": 41150996, "comment_id": 69504797, "body": "so you want to know &quot;current frame number&quot;? There is a property for that, too. Or you just count yourself."}, {"owner": {"reputation": 17, "user_id": 6357606, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b3eca82fef19bb98bcb491b5516f3332?s=128&d=identicon&r=PG&f=1", "display_name": "tofi", "link": "https://stackoverflow.com/users/6357606/tofi"}, "edited": false, "score": 0, "creation_date": 1481746613, "post_id": 41150996, "comment_id": 69504996, "body": "for example if I have a video of 500 frames, I want to save number of frames starting from 0 to 4999"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "reply_to_user": {"reputation": 17, "user_id": 6357606, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b3eca82fef19bb98bcb491b5516f3332?s=128&d=identicon&r=PG&f=1", "display_name": "tofi", "link": "https://stackoverflow.com/users/6357606/tofi"}, "edited": false, "score": 0, "creation_date": 1481748285, "post_id": 41150996, "comment_id": 69505841, "body": "write a for loop from 0 to nframes and write to value in each iteration to file, for example with helo of a stringstream"}, {"owner": {"reputation": 17, "user_id": 6357606, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b3eca82fef19bb98bcb491b5516f3332?s=128&d=identicon&r=PG&f=1", "display_name": "tofi", "link": "https://stackoverflow.com/users/6357606/tofi"}, "edited": false, "score": 0, "creation_date": 1481813546, "post_id": 41150996, "comment_id": 69534493, "body": "Thanks @Micka , I have updated my code , is it correct now ?"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "reply_to_user": {"reputation": 17, "user_id": 6357606, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b3eca82fef19bb98bcb491b5516f3332?s=128&d=identicon&r=PG&f=1", "display_name": "tofi", "link": "https://stackoverflow.com/users/6357606/tofi"}, "edited": false, "score": 0, "creation_date": 1481813820, "post_id": 41150996, "comment_id": 69534673, "body": "now it should write to your file in each line: &quot;FPS= ;0&quot; &quot;FPS= ;1&quot; &quot;FPS= ;2&quot; and so on up to the total number of available frames -1. Not sure whether you want that (the word FPS confuses me because it normally is abbreviation for frames per second)."}], "tags": [], "owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "is_accepted": true, "score": 2, "last_activity_date": 1481744951, "last_edit_date": 1495535441, "creation_date": 1481744951, "answer_id": 41150996, "question_id": 41150901, "link": "https://stackoverflow.com/questions/41150901/save-total-number-of-frames-of-video-file-into-a-txt-file/41150996#41150996", "title": "save total number of frames of video file into a .txt file", "body": "<p>Number of frames is</p>\n\n<pre><code>double nframes = video.get(CAP_PROP_FRAME_COUNT); \n</code></pre>\n\n<p>fps is frames per second and tells you how fast a player should display the video and you can compute times if you know the time of the first frame.</p>\n\n<p>To write data to a file you should search for writing to files in c++ and you'll find help in answers like <a href=\"https://stackoverflow.com/questions/8863505/simple-file-write-function-in-c\">Simple file write function in C++</a></p>\n"}], "owner": {"reputation": 17, "user_id": 6357606, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b3eca82fef19bb98bcb491b5516f3332?s=128&d=identicon&r=PG&f=1", "display_name": "tofi", "link": "https://stackoverflow.com/users/6357606/tofi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 0, "accepted_answer_id": 41150996, "answer_count": 1, "score": 0, "last_activity_date": 1481814462, "creation_date": 1481744661, "last_edit_date": 1481814462, "question_id": 41150901, "link": "https://stackoverflow.com/questions/41150901/save-total-number-of-frames-of-video-file-into-a-txt-file", "title": "save total number of frames of video file into a .txt file", "body": "<p>I'm trying to save number of frames of video file into a .txt file . for example save the frame number from frame (0) until the last frame .I  can display the total frame numbers of a video file .</p>\n\n<pre><code>#include \"opencv2/opencv.hpp\"\n#include &lt;fstream&gt;\n\n\nusing namespace cv; \nusing namespace std;\n\nint main(int argc, char** argv)\n{\n\n// Open video file\nVideoCapture video(\"2.avi\");\n\ndouble fps = video.get(CV_CAP_PROP_FPS);\ndouble nframes = video.get(CAP_PROP_FRAME_COUNT); \n\ncout &lt;&lt; \"Frames per second using video.get(CV_CAP_PROP_FPS) : \" &lt;&lt; fps &lt;&lt; endl;\ncout &lt;&lt; \"Frames count  : \" &lt;&lt; nframes &lt;&lt; endl;\nofstream myfile;\nmyfile.open (\"example.txt\");\n\nfor (int i=0;i&lt;nframes;i++)\n\n{\n\n\nmyfile&lt;&lt; \"Frame Number=  \"&lt;&lt;\";\"&lt;&lt; i&lt;&lt; endl;\n\n}    \nmyfile.close(); \nvideo.release(); \nreturn 0; \n\n} \n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1481744600, "post_id": 41150848, "comment_id": 69503872, "body": "When you declare a vector you need to use <code>()</code> or <code>{}</code>, not <code>[]</code> like you do with an array."}], "answers": [{"comments": [{"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 2, "creation_date": 1481745705, "post_id": 41151073, "comment_id": 69504529, "body": "Good answer for &quot;Why am not able to access struct from vector?&quot; and &quot;Am I doing something wrong?&quot; Maybe you could also answer the implicit &quot;How do I make it better?&quot;"}], "tags": [], "owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "is_accepted": true, "score": 8, "last_activity_date": 1481745542, "last_edit_date": 1481745542, "creation_date": 1481745197, "answer_id": 41151073, "question_id": 41150848, "link": "https://stackoverflow.com/questions/41150848/class-stdvector-has-no-member-named/41151073#41151073", "title": "class std::vector has no member named", "body": "<p>You are creating an array of four vectors, not a vector with four elements.</p>\n\n<p>In your code, <code>coffee_vec[1]</code> refers to a <code>vector&lt;coffeeBean&gt;</code> object, not a <code>coffeeBean</code> object.</p>\n"}, {"tags": [], "owner": {"reputation": 431, "user_id": 6401052, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/476a336a7d7f43a08b3cb3403dafae70?s=128&d=identicon&r=PG&f=1", "display_name": "FamZ", "link": "https://stackoverflow.com/users/6401052/famz"}, "is_accepted": false, "score": 6, "last_activity_date": 1481745677, "creation_date": 1481745677, "answer_id": 41151199, "question_id": 41150848, "link": "https://stackoverflow.com/questions/41150848/class-stdvector-has-no-member-named/41151199#41151199", "title": "class std::vector has no member named", "body": "<p>with <code>coffe_vec[1]</code> you are not accessing an instance of <code>coffeBean</code> but an instance of <code>std::vector&lt;coffeBean&gt;</code> because <code>coffe_vec</code> is an array of vectors. If you want to access <code>coffeBean</code> elements you need to call for example <code>coffe_vec[1][0]</code> which wouldn't be good in your case because all vectors in your array are empty.</p>\n\n<p>Maybe you wanted to create a vector with 4 elements, that would look like that:</p>\n\n<pre><code>std::vector&lt;coffeBean&gt; coffe_vec(4);\n</code></pre>\n\n<p>or use <code>{ }</code></p>\n"}, {"tags": [], "owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "is_accepted": false, "score": 1, "last_activity_date": 1481746936, "last_edit_date": 1481746936, "creation_date": 1481746383, "answer_id": 41151375, "question_id": 41150848, "link": "https://stackoverflow.com/questions/41150848/class-stdvector-has-no-member-named/41151375#41151375", "title": "class std::vector has no member named", "body": "<p>a vector can push and pop objects as it can with built-in data. </p>\n\n<p>if we create only one vector we can push in it datta:</p>\n\n<pre><code>std::vector&lt;int&gt; vecInt;    // vector of integers\nstd::vector&lt;int&gt; vecInt[4]; // an array of vectors to integers\n\nso the array of vectors is like a multi-dimensional array. so to access the data we double the subscript operator `[][]`:\n\nvecInt[0].push_back(5);\ncout &lt;&lt; vecInt[0][0]; // the first for first vector in the array and the second index is for the first data in the first vector in the array.\n</code></pre>\n\n<p>in your example you have an array to vectors to struct coffeebeen:</p>\n\n<pre><code>std::vector&lt;coffeeBean&gt; coffee_vec[4];\n\nint main(int argc, char ** argv)\n{\n\n    coffeeBean cofB = { \"Raindrop7\", \"England\", 5 };\n    coffee_vec[0].push_back(cofB); // push the object in the first vector in the array\n\n    cout &lt;&lt; (coffee_vec[0][0]).name  &lt;&lt; endl;\n\n\n    cin.get();\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 7298570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f3e60693d79c8a0c75c813bc77b0945?s=128&d=identicon&r=PG&f=1", "display_name": "rato talo", "link": "https://stackoverflow.com/users/7298570/rato-talo"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13666, "favorite_count": 1, "closed_date": 1481745922, "accepted_answer_id": 41151073, "answer_count": 3, "score": 5, "last_activity_date": 1482497508, "creation_date": 1481744489, "last_edit_date": 1482497508, "question_id": 41150848, "link": "https://stackoverflow.com/questions/41150848/class-stdvector-has-no-member-named", "closed_reason": "Not suitable for this site", "title": "class std::vector has no member named", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nstruct coffeeBean\n{   \n    string name; \n    string country;\n    int strength;\n};  \n\nstd::vector&lt;coffeeBean&gt; coffee_vec[4];\n\nint main(int argc, char ** argv)\n{\n    coffee_vec[1].name;\n    return 0;\n}\n</code></pre>\n\n<p>When I try to run this code I get <code>'class std::vector&lt;coffeeBean&gt;' has no member named 'name'</code>\nI thought we can access the struct this way. Am I doing something wrong? </p>\n"}, {"tags": ["c++", "qt5", "qtablewidget"], "comments": [{"owner": {"reputation": 638, "user_id": 7065028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/602970b0b9f268e43b6212d4804d22e3?s=128&d=identicon&r=PG&f=1", "display_name": "Jean-Emmanuel", "link": "https://stackoverflow.com/users/7065028/jean-emmanuel"}, "edited": false, "score": 0, "creation_date": 1481744748, "post_id": 41150823, "comment_id": 69503954, "body": "What about storing your data in a QVector(sorted by date1 for example?), loop on that when the user input the dates, add the valid ones to a QStandardItemModel, and show it with QTableView. If the user changes those dates, you just clear the QStandardItemModel and restart the process. This should work easily for 30 000 rows."}], "answers": [{"tags": [], "owner": {"reputation": 638, "user_id": 7065028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/602970b0b9f268e43b6212d4804d22e3?s=128&d=identicon&r=PG&f=1", "display_name": "Jean-Emmanuel", "link": "https://stackoverflow.com/users/7065028/jean-emmanuel"}, "is_accepted": false, "score": 0, "last_activity_date": 1481745993, "creation_date": 1481745993, "answer_id": 41151281, "question_id": 41150823, "link": "https://stackoverflow.com/questions/41150823/fast-search-through-qtablewidget-rows/41151281#41151281", "title": "Fast search through QTableWidget rows", "body": "<p>It is hard to reproduce your problem, but here is the approach I would take:</p>\n\n<ul>\n<li><p>Create a custom class to store the data of one row, let's call it\n<code>DataRow</code>.</p></li>\n<li><p>Store those in a <code>QVector&lt;DataRow&gt;</code>, that you can sort by Date1 for example.</p></li>\n<li>Loop through this <code>QVector&lt;DataRow&gt;</code> and find the elements that correspond to the criteria.</li>\n<li>Add those <code>DataRow</code> to a class derived from <code>QAbstractItemModel</code>.</li>\n<li>Show this model derived from <code>QAbstractItemModel</code> with a <code>QTableView</code>.</li>\n</ul>\n\n<p><code>QTableWidget</code> is heavyweight and was not really built for speed. It's really convenient to build something quickly with few elements though.\n<code>QTableView</code> is the one you want, with a custom model inherited from  <code>QAbstractItemModel</code>.</p>\n\n<p>Then, when the user requests a new input, you could just wipe the model and restart the process. This is not optimal, but the user should not see the difference. Feel free to add more logic here to keep the good elements and only remove the bad ones.</p>\n\n<p>About the GUI freezing, one way to always avoid that is to have the GUI thread separated from other worker threads. The <a href=\"http://doc.qt.io/qt-5/qthread.html\" rel=\"nofollow noreferrer\">QThread</a> documentation is exhaustive and can help you set up something like this.</p>\n"}], "owner": {"reputation": 181, "user_id": 4464872, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/89eeadc1eb335468eb45f40e0a55da1f?s=128&d=identicon&r=PG&f=1", "display_name": "Martin k", "link": "https://stackoverflow.com/users/4464872/martin-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 237, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481748214, "creation_date": 1481744381, "last_edit_date": 1481748214, "question_id": 41150823, "link": "https://stackoverflow.com/questions/41150823/fast-search-through-qtablewidget-rows", "title": "Fast search through QTableWidget rows", "body": "<p>I need to search rows through a <code>QTableWidget</code>. Each of the rows in the table contains a field with date and I need to show only rows that are within a specified date interval based on user input. Here is my function:</p>\n\n<pre><code>void nvr::sort()\n{\n\nQTableWidget* tabela = this-&gt;findChild&lt;QTableWidget*&gt;(\"NCtable\");\n\n\n\nQDateEdit* c1 = this-&gt;findChild&lt;QDateEdit*&gt;(\"c1\");\n\nQDateEdit* c2 = this-&gt;findChild&lt;QDateEdit*&gt;(\"c2\");\n\n// user specified ranges for date\nQDate date1 = c1-&gt;date();\n\nQDate date2 = c2-&gt;date();\n\n//row numbers in table\nint rowsNum = tabela-&gt;rowCount();\n\n// hide all rows\nfor(int z = 0; z &lt; rowsNum; z++) {\n\n    tabela-&gt;hideRow(z);\n\n}\n\n// show only rows that are within range\nfor(int z = 0; z &lt; rowsNum; z++) {\n\n\n    QDateTime dateTime = QDateTime::fromString(tabela-&gt;item(z,2)-&gt;text(),\"dd.MM.yyyy hh:mm\");\n\n    QDate date = dateTime.date();\n\n    //date compares\n    if ( (date1.operator &lt;=(date)) &amp;&amp; (date2.operator &gt;=(date) ) ) {\n\n    tabela-&gt;showRow(z);\n\n    }\n\n\n\n   }\n\n\n\n}\n</code></pre>\n\n<p>This works fine if i have 200 rows. But when i have 30 000 rows and i surely will, the gui freezes because i suppose the function executes very slow. Any suggestions for faster execution?</p>\n"}, {"tags": ["c++", "multithreading", "parallel-processing", "tbb"], "answers": [{"comments": [{"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1481791678, "post_id": 41157253, "comment_id": 69520740, "body": "Thanks for this. I don&#39;t think the asynchronous approach is any better than my attempts described in the OP. The method using the <code>tbb::task_scheduler_observer</code> sounds interesting. Can you outline, using a code snippet, how this would work?"}, {"owner": {"reputation": 5833, "user_id": 2527797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83539ee8bca535eca6c4be5c856a738d?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/2527797/anton"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1481990035, "post_id": 41157253, "comment_id": 69600027, "body": "@Walter updated. Though I tried it only on online compiler which does not have recent enough TBB with local observer: <a href=\"http://coliru.stacked-crooked.com/a/11728cd935579cfe\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/11728cd935579cfe</a>"}], "tags": [], "owner": {"reputation": 5833, "user_id": 2527797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83539ee8bca535eca6c4be5c856a738d?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/2527797/anton"}, "is_accepted": false, "score": 2, "last_activity_date": 1481990164, "last_edit_date": 1481990164, "creation_date": 1481780917, "answer_id": 41157253, "question_id": 41150688, "link": "https://stackoverflow.com/questions/41150688/flushing-thread-local-buffer-at-end-of-parallel-loop-with-tbb/41157253#41157253", "title": "flushing thread local buffer at end of parallel loop with TBB", "body": "<p>No, a worker thread does not have complete information about whether this particular task is the last task of the given work or not (this is how work-stealing works). Thus, it is not possible to implement such a function on the level of <code>parallel_for</code> or the scheduler itself. Thus, I'd recommend you to go with these two approaches you describe.</p>\n\n<p>There are two other things you can do about this though.</p>\n\n<ul>\n<li>make it asynchronous. I.e. enqueue a task which will get everything flushed. It will help to remove this code from the hot path on the main thread. Just be careful if there are any dependencies which need to be set on completion of this task.</li>\n<li>use <a href=\"https://www.threadingbuildingblocks.org/docs/help/reference/task_scheduler/task_scheduler_observer/task_scheduler_observer_member.html\" rel=\"nofollow noreferrer\"><code>tbb::task_scheduler_observer</code></a> in order to initialize thread-specific data and release it lazily when threads get shut down or when there is no work remains for some time. The latter requires using <a href=\"https://www.threadingbuildingblocks.org/docs/help/reference/appendices/preview_features/task_scheduler_observer_ext_cls.html\" rel=\"nofollow noreferrer\">local observer feature</a> which is not yet officially supported but remains stable for few years already.</li>\n</ul>\n\n<p>Example:</p>\n\n<pre><code>#define TBB_PREVIEW_LOCAL_OBSERVER 1\n#include &lt;tbb/tbb.h&gt;\n#include &lt;assert.h&gt;\n\ntypedef void * buffer_t;\nconst static int bufsz = 1024;\nclass thread_buffer_allocator: public tbb::task_scheduler_observer {\n  tbb::enumerable_thread_specific&lt;buffer_t&gt; _buf;\npublic:\n  thread_buffer_allocator( )\n    : tbb::task_scheduler_observer( /*local=*/ true ) {\n    observe(true); // activate the observer\n  }\n  ~thread_buffer_allocator( ) {\n    observe(false); // deactivate the observer\n    for(auto &amp;b : _buf) {\n        printf(\"destructor: cleared: %p\\n\", b);\n        free(b);\n    }\n  }\n  /*override*/ void on_scheduler_entry( bool worker ) {\n    assert(_buf.local() == nullptr);\n    _buf.local() = malloc(bufsz);\n    printf(\"on entry: %p\\n\", _buf.local());\n  }\n  /*override*/ void on_scheduler_exit( bool worker ) {\n    printf(\"on exit\\n\");\n    if(_buf.local()) {\n        printf(\"on exit: cleared %p\\n\", _buf.local());\n        free(_buf.local());\n        _buf.local() = nullptr;\n    }\n  }\n};\n\nint main() {\n  thread_buffer_allocator buffers_scope;\n  tbb::parallel_for(0, 1024*1024*1024, [&amp;](auto i){\n    usleep(i%3);\n  });\n  return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "is_accepted": true, "score": 1, "last_activity_date": 1482396595, "last_edit_date": 1482396595, "creation_date": 1482003071, "answer_id": 41202294, "question_id": 41150688, "link": "https://stackoverflow.com/questions/41150688/flushing-thread-local-buffer-at-end-of-parallel-loop-with-tbb/41202294#41202294", "title": "flushing thread local buffer at end of parallel loop with TBB", "body": "<p>It occurred to me that this can be solved by reduction.</p>\n\n<pre><code>struct buffer\n{\n  std::size_t K=0, B[vector_size];\n  void load(std::size_t i)\n  {\n    B[K++]=i;\n    if(K==vector_size) flush();\n  }\n  void flush()\n  {\n    do_vectorized_work(K,B);\n    K=0;\n  }\n  buffer(buffer const&amp;, tbb::split)\n  {}\n  void operator()(tbb::block_range&lt;std::size_t&gt; const&amp;range)\n  { for(i:range) load(i); }\n  bool empty()\n  { return K==0; }\n  std::size_t pop()\n  { return K? B[--K] : 0; }\n  void join(buffer&amp;rhs)\n  { while(!rhs.empty()) load(rhs.pop()); }\n};\n\nvoid do_work_in_parallel(std::size_t N)\n{\n  buffer buff;\n  tbb::parallel_reduce(tbb::block_range&lt;std::size_t&gt;(0,N,vector_size),buff);\n  if(!buff.empty())\n    buff.flush();\n}\n</code></pre>\n"}], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 41202294, "answer_count": 2, "score": 2, "last_activity_date": 1482396595, "creation_date": 1481743857, "last_edit_date": 1482001734, "question_id": 41150688, "link": "https://stackoverflow.com/questions/41150688/flushing-thread-local-buffer-at-end-of-parallel-loop-with-tbb", "title": "flushing thread local buffer at end of parallel loop with TBB", "body": "<p>I want to parallelize a loop (using <code>tbb</code>) which contains some expensive but vectorizable iterations (randomly spread). My idea was to buffer those and flush the buffer whenever it reaches the vector size. Such a buffer must be thread-local. For example,</p>\n\n<pre><code>// dummy for testing\nvoid do_vectorized_work(size_t k, size_t*indices)\n{}\n// dummy for testing\nbool requires_expensive_work(size_t k)\n{ return (k&amp;7)==0; }\n\nstruct buffer\n{\n  size_t K=0, B[vector_size];\n  void load(size_t i)\n  {\n    B[K++]=i;\n    if(K==vector_size)\n      flush();\n  }\n  void flush()\n  {\n    do_vectorized_work(K,B);\n    K=0;\n  }\n};\n\nvoid do_work_in_parallel(size_t N)\n{\n  tbb::enumerable_thread_specific&lt;buffer&gt; tl_buffer;\n\n  tbb::parallel_for(size_t(0),N,[&amp;](size_t i)\n  {\n    if(requires_expensive_work(i))\n      tl_buffer.local().load(i);\n  });\n}\n</code></pre>\n\n<p>However, this leaves the buffers non-empty, so I still have to flush each of them a final time</p>\n\n<pre><code>for(auto&amp;b:tl_buffer)\n  b.flush();\n</code></pre>\n\n<p>but this is serial! Of course, I can also try to do this in parallel</p>\n\n<pre><code>using tl_range = typename tbb::enumerable_thread_specific&lt;buffer&gt;::range_type;\ntbb::parallel_for(tl_buffer.range(),[](tl_range const&amp;range)\n{\n  for(auto r:range)\n    r-&gt;flush();\n});\n</code></pre>\n\n<p>But I'm not sure this is efficient (since there are only as many buffers as there are threads). I was wondering whether it is possible to avoid this final flush after the event. I.e. is it possible to use <code>tbb::task</code>s (replacing <code>tbb::parallel_for</code>) in such a way that each thread's final task is to flush its buffer?</p>\n"}, {"tags": ["c++", "class", "boost", "shared-ptr"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1481744614, "post_id": 41150646, "comment_id": 69503880, "body": "I&#39;d use <code>boost::make_shared</code> rather than <code>new</code>. The <code>.get()</code> is pointless the way you used it. Also, there&#39;s no variable named <code>_testing</code> in your <code>main()</code>, so that won&#39;t compile."}, {"owner": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1481744992, "post_id": 41150646, "comment_id": 69504098, "body": "OK.  You&#39;re right.  I&#39;m trying to share <code>_testing</code> to all functions in class <code>controller</code> without calling it&#39;s constructor every time."}], "answers": [{"tags": [], "owner": {"reputation": 3109, "user_id": 6178493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9rTzh.jpg?s=128&g=1", "display_name": "Rama", "link": "https://stackoverflow.com/users/6178493/rama"}, "is_accepted": false, "score": 1, "last_activity_date": 1481748451, "last_edit_date": 1481748451, "creation_date": 1481744430, "answer_id": 41150834, "question_id": 41150646, "link": "https://stackoverflow.com/questions/41150646/boost-shared-ptr-on-class-object/41150834#41150834", "title": "Boost shared_ptr on class object", "body": "<p>The testing object get constructed in controller constructor and destructed when it go out of the scope.</p>\n\n<p>Just:</p>\n\n<pre><code>int main (void) {\n    controller _controller;    // constructor called\n    _controller.test_func(); \n    // destructor of controller called, because it go out of scope,\n    // so testing destructor is called too because, there is no more\n    // shared_ptr pointing to it!\n}\n</code></pre>\n\n<p>[EDITED] To match question owner edits</p>\n"}, {"tags": [], "owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "is_accepted": false, "score": 1, "last_activity_date": 1481759515, "creation_date": 1481759515, "answer_id": 41154222, "question_id": 41150646, "link": "https://stackoverflow.com/questions/41150646/boost-shared-ptr-on-class-object/41154222#41154222", "title": "Boost shared_ptr on class object", "body": "<p>I've taken the liberty of rewriting your code to demonstrate a usage of a shared pointer. Pretty typically it is used so an object can be in two places at once, moved around, and destruction is automatic.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;boost/shared_ptr.hpp&gt;\n#include &lt;boost/make_shared.hpp&gt;\n\nclass testing\n{\npublic:\n    std::string str;\n    testing( const char* in ) : str( in ) { }\n};\ntypedef boost::shared_ptr &lt;testing&gt; SP_testing;\n\nclass controller\n{\npublic:\n    controller( const char* in );\n    void test_func ( );\n    SP_testing _testing;\n};\n\ncontroller::controller( const char* in )\n    :_testing( boost::make_shared&lt; testing &gt;( in ) )\n{\n    std::cout &lt;&lt; \"controller constructor: \\\"\" &lt;&lt; _testing-&gt;str &lt;&lt; '\\\"' &lt;&lt; std::endl;\n}\n\nvoid controller::test_func (void) {\n    std::cout &lt;&lt; \"test_func: \\\"\" &lt;&lt; _testing-&gt;str &lt;&lt; \"\\\"  - cnt: \" &lt;&lt; _testing.use_count( ) &lt;&lt; std::endl;\n}\n\nint main (void)\n{\n    //yet to be used shared pointer\n    SP_testing outsider;\n    {\n        //this will create an instance of testing.\n        controller _controller( \"this is a test\" ); // constructor called, prints\n        outsider= _controller._testing;             //assign shared pointer\n        _controller.test_func( );                   // test called, prints usage count.\n\n    }//leaving scope, _controller will be destroyed but the _testing it created will not\n\n    std::cout &lt;&lt; \"outsider: \\\"\" &lt;&lt; outsider-&gt;str &lt;&lt; \"\\\"  - cnt: \" &lt;&lt; outsider.use_count( ) &lt;&lt; std::endl;\n\n    //now testing will get destroyed.\n    return 0;\n}\n</code></pre>\n\n<p>Above, 'outsider' took a pointer to <code>controller::_testing</code>. At <code>test_func</code> they both have a pointer to the same object. Even though controller create the testing object it does not get destroyed when controller gets destroyed. Very handy when these kind of situations arise. This code can be pasted into one .cpp file. Thanks to @Dan Ma\u0161ek for the heads up on <code>make_shared</code></p>\n"}], "owner": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 550, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1481759515, "creation_date": 1481743728, "last_edit_date": 1481746365, "question_id": 41150646, "link": "https://stackoverflow.com/questions/41150646/boost-shared-ptr-on-class-object", "title": "Boost shared_ptr on class object", "body": "<p>Say I have the following code: </p>\n\n<p>controller.hpp</p>\n\n<pre><code>#include \"testing.hpp\"\n#include &lt;boost/shared_ptr.hpp&gt;\nclass controller\n{\n    public:\n        controller(void);\n        void test_func (void);\n        boost::shared_ptr &lt;testing&gt; _testing;\n}\n</code></pre>\n\n<p>controller.cpp</p>\n\n<pre><code>#include \"controller.hpp\"\ncontroller::controller() {\n    boost::shared_ptr &lt;testing&gt; _testing (new testing);\n    std::cout &lt;&lt; _testing-&gt;test_bool &lt;&lt; std::endl;\n}\n\nvoid controller::test_func (void) {\n    // how to use _testing object?\n    std::cout &lt;&lt; _testing-&gt;test_bool &lt;&lt; std::endl;\n\n    return;\n}\n\nint main (void) {\n    controller _controller;    // constructor called\n    test_func();\n    return 0;\n}\n</code></pre>\n\n<p>testing.hpp</p>\n\n<pre><code>class testing\n{\n    public:\n        bool test_bool = true;\n}\n</code></pre>\n\n<p>Am I using a <code>shared_ptr</code> properly here for a class member?  Multiple functions in class <code>controller</code> need to use the <code>_testing</code> object, and I don't want the <code>testing</code> classes' constructor / deconstructor to be called every time the pointer goes out of scope.  Maybe this cant' be avoided, I'm starting to realize.</p>\n"}, {"tags": ["c++", "qml", "listmodel"], "comments": [{"owner": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "edited": false, "score": 0, "creation_date": 1481744886, "post_id": 41150501, "comment_id": 69504036, "body": "See this: <a href=\"http://doc.qt.io/qt-5/qtqml-cppintegration-interactqmlfromcpp.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qtqml-cppintegration-interactqmlfromcpp.html</a> Take a special look on the section: <b>warning</b>. Then you might want to create a model in C++, and expose it as ContextProperty to QML and use it there. <a href=\"http://doc.qt.io/qt-5/qtqml-cppintegration-contextproperties.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qtqml-cppintegration-contextproperties.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4068, "user_id": 862193, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/60a062a625895665d619c40b96f82d6a?s=128&d=identicon&r=PG", "display_name": "Tim", "link": "https://stackoverflow.com/users/862193/tim"}, "is_accepted": true, "score": 2, "last_activity_date": 1481760641, "creation_date": 1481760641, "answer_id": 41154363, "question_id": 41150501, "link": "https://stackoverflow.com/questions/41150501/chage-listmodel-data-in-qml-file-using-c/41154363#41154363", "title": "Chage ListModel data in qml file using C++", "body": "<p>If you want to modify the model from C++, you can register an object that implements <code>QAbstractItemModel</code> to the QML runtime.</p>\n\n<p><code>QAbstraactItemModel</code> is a fairly complex class, there are helpful derived types that may make implementation easier, but that depends on your use case. For instance, <code>QAbstractListModel</code> is useful for lists, as opposed to tables, and <code>QStandardItemModel</code> is useful for data that can be easily modeled at <code>QStandardItems</code>.</p>\n\n<p>Once you've implemented the model in C++ you need to make it available to the QML runtime. This is done using <code>setContextProperty</code> on <code>QQmlContext</code>. Generally the <code>QQmlContext</code> you want is the <code>rootContext()</code> of your <code>QQmlEngine</code>.</p>\n\n<p>The registration might look something like this:</p>\n\n<pre><code>int main(int argc, char **argv) {\n    QGuiApplication app(argc, argv);\n    QQmlApplicationEngine engine;\n    MyListModel *model = new MyListModel;\n\n    engine.rootContext()-&gt;setContextProperty(\"myListModel\", model);\n    engine.load(\":/myqmlapp.qml\");\n    app.exec();\n    [...]\n}\n</code></pre>\n\n<p>To access the model from within QML you use the name that it was registered with, in this case <code>myListModel</code>:</p>\n\n<pre><code>import QtQuick 2.7\n\nItem {\n    ListView {\n        model: myListModel\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 4038449, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/61e5724585fcf2624780e95a226b36ca?s=128&d=identicon&r=PG&f=1", "display_name": "NonSense", "link": "https://stackoverflow.com/users/4038449/nonsense"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 342, "favorite_count": 0, "accepted_answer_id": 41154363, "answer_count": 1, "score": 0, "last_activity_date": 1481760641, "creation_date": 1481743199, "question_id": 41150501, "link": "https://stackoverflow.com/questions/41150501/chage-listmodel-data-in-qml-file-using-c", "title": "Chage ListModel data in qml file using C++", "body": "<p>There is an example : <a href=\"http://doc.qt.io/qt-5/qtdatavisualization-qmlscatter-example.html\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/qtdatavisualization-qmlscatter-example.html</a>  of using qml and QtQuick to create a 3D scatter. </p>\n\n<p>How can I chage (delete, append, clear) ListModel data in Data.qml file using C++ code?</p>\n\n<p>Data.qml</p>\n\n<pre><code>import QtQuick 2.1\n\nItem {\n     property alias model: dataModel\n     property alias modelTwo: dataModelTwo\n     property alias modelThree: dataModelThree\n\n     ListModel {\n         id: dataModel\n         ListElement{ xPos: -10.0; yPos: 5.0; zPos: -5.0 }\n         ListElement{ xPos: -9.0; yPos: 3.0; zPos: -4.5 }\n         ListElement{ xPos: -8.5; yPos: 4.1; zPos: -4.0 }\n         ...\n     }\n     ...\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1481743333, "post_id": 41150478, "comment_id": 69503245, "body": "What error do you get?  It compiles for me with MSVS 2015 update 3, g++, and clang"}, {"owner": {"reputation": 847, "user_id": 6469690, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kvGyE.png?s=128&g=1", "display_name": "Bonita Montero", "link": "https://stackoverflow.com/users/6469690/bonita-montero"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1481743657, "post_id": 41150478, "comment_id": 69503403, "body": "Compiles? With the comment of the two lines removed?"}, {"owner": {"reputation": 1813, "user_id": 2449857, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jxnCm.jpg?s=128&g=1", "display_name": "Jack Deeth", "link": "https://stackoverflow.com/users/2449857/jack-deeth"}, "edited": false, "score": 0, "creation_date": 1481743727, "post_id": 41150478, "comment_id": 69503437, "body": "The unadorned version, <code>X&lt;int, less&lt;int&gt;&gt;( less&lt;int&gt;() )( nullptr, 123 );</code>, works with bleeding-edge Clang: <a href=\"http://melpon.org/wandbox/permlink/BAN6rK2g9w3GEigT\" rel=\"nofollow noreferrer\">melpon.org/wandbox/permlink/BAN6rK2g9w3GEigT</a>"}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 1, "creation_date": 1481743876, "post_id": 41150478, "comment_id": 69503505, "body": "I assume you are getting the error <code>&#39;less&lt;int&gt;&#39;: typedef cannot be used for function definition</code>? Don&#39;t make us guess what the error message is."}, {"owner": {"reputation": 1813, "user_id": 2449857, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jxnCm.jpg?s=128&g=1", "display_name": "Jack Deeth", "link": "https://stackoverflow.com/users/2449857/jack-deeth"}, "edited": false, "score": 0, "creation_date": 1481743880, "post_id": 41150478, "comment_id": 69503508, "body": "And also in C++03 GCC. <a href=\"http://melpon.org/wandbox/permlink/QALrTSCgQGoMwCdz\" rel=\"nofollow noreferrer\">melpon.org/wandbox/permlink/QALrTSCgQGoMwCdz</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1481743923, "post_id": 41150478, "comment_id": 69503536, "body": "@BonitaMontero Ah.  I had to uncomment the line.  g++ and clang both compile line 3.  Line 2 should not work.  For MSVS I have to change <code>X&lt;int, less&lt;int&gt;&gt;( less&lt;int&gt;() )( nullptr, 123 );</code> to <code>X&lt;int, less&lt;int&gt;&gt;(less&lt;int&gt;{})(nullptr, 123);</code>.  I think it is something in MSVS&#39;s parsing that does not like it with <code>()</code>."}], "owner": {"reputation": 847, "user_id": 6469690, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kvGyE.png?s=128&g=1", "display_name": "Bonita Montero", "link": "https://stackoverflow.com/users/6469690/bonita-montero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1481743124, "creation_date": 1481743124, "question_id": 41150478, "link": "https://stackoverflow.com/questions/41150478/calling-a-method-on-a-temporary-object", "title": "Calling a method on a temporary object", "body": "<p>I've had a little problem with calling a operator on a temporary object. I've stripped the code to the essential problem: </p>\n\n<pre><code>template&lt;typename T, typename OP&gt;\nstruct X\n{\n    X( const OP &amp;op ) : m_op( op ) { }\n    X &amp;operator ()( T *pa, size_t n ) { /* ... */ return *this; }\n    OP m_op;\n};\n\nint main()\n{\n//  Why does this work ...\n    ((X&lt;int, less&lt;int&gt;&gt;)( less&lt;int&gt;() ))( nullptr, 123 );\n\n//  ... this doesn't work ...\n//  (X&lt;int, less&lt;int&gt;&gt;)( less&lt;int&gt;() )( nullptr, 123 );\n//  ... and this also doesn't work ...\n//  X&lt;int, less&lt;int&gt;&gt;( less&lt;int&gt;() )( nullptr, 123 );\n}\n</code></pre>\n\n<p>Maybe this is special to my compiler (VC++ 2015).</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1481743084, "post_id": 41150424, "comment_id": 69503117, "body": "If you need a generic structure, maybe you need a base class and then differentiate for map, list or scalar type substructures. This is how things like a generic JSON library does it."}, {"owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "edited": false, "score": 0, "creation_date": 1481747093, "post_id": 41150424, "comment_id": 69505211, "body": "If you don&#39;t need to know what the contents of the structure are then you don&#39;t need a structure. If you need to programmatically access the contents of the structures you read, there is no way in the language to populate a &#39;struct&#39; which could then be used in the normal fashion. You need some degree of reflection, which is not currently supported in the standard."}], "owner": {"reputation": 33, "user_id": 7246041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38157b072d9ef61da93f40b5765b698e?s=128&d=identicon&r=PG&f=1", "display_name": "square_kid", "link": "https://stackoverflow.com/users/7246041/square-kid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1481742970, "creation_date": 1481742970, "question_id": 41150424, "link": "https://stackoverflow.com/questions/41150424/c-define-a-structure-with-variable-elements-in-it", "title": "C++ define a structure with variable elements in it", "body": "<p>So basically im a student and im trying to make database system dumping all the data into text files and reading from them as a learning exercise.</p>\n\n<p>What I realised is that if im reading the structre of a table from a text file then I'd need a way to define a data structure which will be created  without me knowing what it's contents ever are.</p>\n\n<p>I just started with C++ in highschool, and am only allowed to use everything inside the Cx11 standard.Is this possible to implement?</p>\n\n<p>I know  a little about templates but the problem still remains I don't know  how many datatypes will be inside my structure.</p>\n\n<p>So equivalently  this problem can be put as reading the info from the console and then making the structure:</p>\n\n<pre><code>string type;\nvector &lt; pair &lt;string,string&gt; &gt; Input;\nstring name;\n\nwhile(true)\n{\n    cin &gt;&gt; type;\n    cin &gt;&gt; name;\n\n\n\n    if( type == \"end\")\n        break;\nInput.push_back(make_pair(type,name));\n\n\n}\n\nstruct user_created\n{\n    //Define what they wanted to create in here.\n\n};\n</code></pre>\n"}, {"tags": ["c++", "linux", "qt", "build", "qt5"], "comments": [{"owner": {"reputation": 5817, "user_id": 4742108, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/GvE0m.jpg?s=128&g=1", "display_name": "Velkan", "link": "https://stackoverflow.com/users/4742108/velkan"}, "edited": false, "score": 2, "creation_date": 1481805252, "post_id": 41150405, "comment_id": 69528966, "body": "If you&#39;re crosscompiling on amd64 for armhf, then you need an ARM sysroot directory with the whole OS image (to have armhf libraries to link to). Pass it with <code>-sysroot &lt;dir&gt;</code> to the <code>.&#47;configure</code>."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 9930526, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/9932f02291f6418b2a2721c6f9107822?s=128&d=identicon&r=PG", "display_name": "user9930526", "link": "https://stackoverflow.com/users/9930526/user9930526"}, "is_accepted": false, "score": 1, "last_activity_date": 1528808875, "creation_date": 1528808875, "answer_id": 50818043, "question_id": 41150405, "link": "https://stackoverflow.com/questions/41150405/how-to-build-qt-for-an-arm-by-g-arm-linux-gnueabihf/50818043#50818043", "title": "How to build Qt for an Arm by g++-arm-linux-gnueabihf?", "body": "<p>a Xilinx User\nI change the cross_compile</p>\n\n<pre><code>gedit /etc/profile\n\nexport PATH=\"$PATH:/opt/petalinux-v2015.4-final/tools/linux-i386/arm-xilinx-gnueabi/bin\"\n\nexport PATH=\"$PATH:/opt/Xilinx/SDK/2015.4/gnu/arm/lin/bin/\"\n\n#export PATH=\"$PATH:/usr/local/gcc-linaro-7.2.1-2017.11-x86_64_arm-eabi/bin\"\n#export PATH=\"$PATH:/usr/local/gcc-linaro-7.2.1-2017.11-x86_64_arm-eabi/libexec/gcc/arm-eabi/7.2.1\"\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 3157312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c6fa3ce9887621fc1f64ad20a8ee9dc?s=128&d=identicon&r=PG", "display_name": "asianirish", "link": "https://stackoverflow.com/users/3157312/asianirish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1991, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1528808875, "creation_date": 1481742899, "last_edit_date": 1496923776, "question_id": 41150405, "link": "https://stackoverflow.com/questions/41150405/how-to-build-qt-for-an-arm-by-g-arm-linux-gnueabihf", "title": "How to build Qt for an Arm by g++-arm-linux-gnueabihf?", "body": "<ol>\n<li><p>Downloaded Qt source</p></li>\n<li><p>Copied linux-arm-gnueabi-g++ to linux-arm-gnueabihf-g++ (in qtbase/mkspecs)</p></li>\n<li><p>Edited qmake.conf inside the folder:</p></li>\n</ol>\n\n<blockquote>\n<pre><code># modifications to g++.conf\nQMAKE_CC                = arm-linux-gnueabihf-gcc\nQMAKE_CXX               = arm-linux-gnueabihf-g++\nQMAKE_LINK              = arm-linux-gnueabihf-g++\nQMAKE_LINK_SHLIB        = arm-linux-gnueabihf-g++\n\n# modifications to linux.conf\nQMAKE_AR                = arm-linux-gnueabihf-ar cqs\nQMAKE_OBJCOPY           = arm-linux-gnueabihf-objcopy\nQMAKE_NM                = arm-linux-gnueabihf-nm -P\nQMAKE_STRIP             = arm-linux-gnueabihf-strip\n</code></pre>\n</blockquote>\n\n<p>Launched:</p>\n\n<blockquote>\n  <p>./configure -prefix /home/asianirish/Qt-custom/qt-embedded-5.7 -debug\n  -static -xplatform linux-arm-gnueabihf-g++ -qt-zlib -reduce-relocations -no-libpng -no-libjpeg -no-sql-sqlite2 -no-sql-psql -no-sql-mysql -no-sql-odbc -no-sql-oci -no-sql-ibase -no-sql-db2 -no-qml-debug -no-widgets -no-gui -no-opengl -openssl-linked -opensource -confirm-license -v</p>\n</blockquote>\n\n<p>Got:</p>\n\n<pre><code>arm-linux-gnueabihf-g++ -o libtest.so -shared -Wl,-Bsymbolic-functions -fPIC bsymbolic_functions.c\nbsymbolic_functions.c:2:2: error: #error \"Symbolic function binding on this architecture may be broken, disabling it (see QTBUG-36129).\"\n #error \"Symbolic function binding on this architecture may be broken, disabling\n  ^\nSymbolic function binding disabled.\n-reduce-relocations was requested but this compiler does not support it\nRe-run configure with -v for more information\n</code></pre>\n\n<p>The bug: <a href=\"https://bugreports.qt.io/browse/QTBUG-36129\" rel=\"nofollow noreferrer\">QTBUG-36129</a></p>\n\n<p><strong>Any workaround?</strong></p>\n\n<ul>\n<li>Qt 5.7</li>\n<li>Host: Ubuntu 15.10 64bit</li>\n<li>Arm: Debian GNU/Linux 7 32bit</li>\n</ul>\n"}, {"tags": ["c++", "applet", "npapi"], "comments": [{"owner": {"reputation": 2473, "user_id": 3788685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0153b937db548cca172e6a78e71eabe3?s=128&d=identicon&r=PG&f=1", "display_name": "user3788685", "link": "https://stackoverflow.com/users/3788685/user3788685"}, "edited": false, "score": 0, "creation_date": 1481743723, "post_id": 41150222, "comment_id": 69503436, "body": "Welcome to SO - you should have a read of the help section on how best to ask your question; <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a> You should include an example of what you have already done/tried."}, {"owner": {"reputation": 1, "user_id": 7298320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e430f76d0ba382b8d574ce6c94f0bc9b?s=128&d=identicon&r=PG&f=1", "display_name": "GlenGJ", "link": "https://stackoverflow.com/users/7298320/glengj"}, "reply_to_user": {"reputation": 2473, "user_id": 3788685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0153b937db548cca172e6a78e71eabe3?s=128&d=identicon&r=PG&f=1", "display_name": "user3788685", "link": "https://stackoverflow.com/users/3788685/user3788685"}, "edited": false, "score": 0, "creation_date": 1481745130, "post_id": 41150222, "comment_id": 69504183, "body": "I am meaning to ask more conceptually from someone with greater NPAPI experience -- would it be possible to stream the raw bytes of a JAR file from plugin to browser and have it execute on the browser without storing a temp file? I was hoping to find an answer to this before I spend time stabbing in the dark"}, {"owner": {"reputation": 2473, "user_id": 3788685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0153b937db548cca172e6a78e71eabe3?s=128&d=identicon&r=PG&f=1", "display_name": "user3788685", "link": "https://stackoverflow.com/users/3788685/user3788685"}, "edited": false, "score": 0, "creation_date": 1481746454, "post_id": 41150222, "comment_id": 69504910, "body": "apologies for misunderstanding the original question - your comment actually gave me a better idea of what you where after. Maybe you should edit your question to make it a bit more clear that that&#39;s what your trying to find out."}, {"owner": {"reputation": 1, "user_id": 7298320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e430f76d0ba382b8d574ce6c94f0bc9b?s=128&d=identicon&r=PG&f=1", "display_name": "GlenGJ", "link": "https://stackoverflow.com/users/7298320/glengj"}, "reply_to_user": {"reputation": 2473, "user_id": 3788685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0153b937db548cca172e6a78e71eabe3?s=128&d=identicon&r=PG&f=1", "display_name": "user3788685", "link": "https://stackoverflow.com/users/3788685/user3788685"}, "edited": false, "score": 1, "creation_date": 1481748008, "post_id": 41150222, "comment_id": 69505684, "body": "Made the original question a little less verbose -- thanks for the feedback!"}, {"owner": {"reputation": 163297, "user_id": 418556, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/yOfDr.png?s=128&g=1", "display_name": "Andrew Thompson", "link": "https://stackoverflow.com/users/418556/andrew-thompson"}, "reply_to_user": {"reputation": 2473, "user_id": 3788685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0153b937db548cca172e6a78e71eabe3?s=128&d=identicon&r=PG&f=1", "display_name": "user3788685", "link": "https://stackoverflow.com/users/3788685/user3788685"}, "edited": false, "score": 0, "creation_date": 1481818551, "post_id": 41150222, "comment_id": 69537758, "body": "@user3788685 MCVE? Great suggestion. Tip: <code>[mcve]</code> in a comment auto-expands to <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 2473, "user_id": 3788685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0153b937db548cca172e6a78e71eabe3?s=128&d=identicon&r=PG&f=1", "display_name": "user3788685", "link": "https://stackoverflow.com/users/3788685/user3788685"}, "edited": false, "score": 0, "creation_date": 1481828098, "post_id": 41150222, "comment_id": 69542977, "body": "ahhhh thats how you do it ;) cheers I did wonder"}], "owner": {"reputation": 1, "user_id": 7298320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e430f76d0ba382b8d574ce6c94f0bc9b?s=128&d=identicon&r=PG&f=1", "display_name": "GlenGJ", "link": "https://stackoverflow.com/users/7298320/glengj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1481747911, "creation_date": 1481742216, "last_edit_date": 1481747911, "question_id": 41150222, "link": "https://stackoverflow.com/questions/41150222/render-a-jar-web-applet-from-a-byte-array-in-firefox", "title": "Render a JAR web applet from a byte array in Firefox", "body": "<p>I have an assignment which involves developing an NPAPI (C++) plugin for an older version of Firefox. The plugin receives a decrypted byte array from an external library and renders the content on a webpage. The plugin so far works with images and various text files by utilizing NPAPI's drawing/window capabilities, however there is also an interest in allowing it to render JAR/WAR applets.</p>\n\n<p>Unless I am mistaken, there is no way to \"draw\" a Java program with NPAPI, so it must be handled by Firefox. And since the plugin is dealing with encryption and decryption of secure content, it seems it would defeat the purpose to write the bytes back to a JAR file in the users browser.</p>\n\n<p>Basically my question is this: would it be possible to stream the raw bytes of a JAR file from plugin to browser and have it execute on the browser without storing a temp file?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 3697, "user_id": 1848578, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c7e2bfa9bcb3299428c8321c37db0560?s=128&d=identicon&r=PG", "display_name": "qxz", "link": "https://stackoverflow.com/users/1848578/qxz"}, "edited": false, "score": 2, "creation_date": 1481742608, "post_id": 41150183, "comment_id": 69502893, "body": "Take a look at <a href=\"http://www.cplusplus.com/reference/string/string/getline/\" rel=\"nofollow noreferrer\"><code>std::getline</code></a>"}], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 7246041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38157b072d9ef61da93f40b5765b698e?s=128&d=identicon&r=PG&f=1", "display_name": "square_kid", "link": "https://stackoverflow.com/users/7246041/square-kid"}, "is_accepted": false, "score": 1, "last_activity_date": 1481743678, "creation_date": 1481743678, "answer_id": 41150629, "question_id": 41150183, "link": "https://stackoverflow.com/questions/41150183/how-do-i-use-cin-to-get-a-string-instead-of-hard-coding-it/41150629#41150629", "title": "How do I use cin to get a string instead of hard-coding it?", "body": "<p>Simply use getline() to get a string of characters from the console. Using getline you can also consider the spaces in the user input.</p>\n\n<pre><code>string input;\ngetline(cin, input);\n</code></pre>\n\n<p>Now to use this with the strchr functionn you simply have to convert this into a C Type string which can be done as follows :</p>\n\n<pre><code>input.c_str\n</code></pre>\n\n<p>This returns  a C type string so you can put this as an arguement to the function,</p>\n\n<p>You will need</p>\n\n<pre><code>#include &lt;string&gt;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6385264, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204822261876484/picture?type=large", "display_name": "ldania", "link": "https://stackoverflow.com/users/6385264/ldania"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481744124, "creation_date": 1481742090, "last_edit_date": 1481742681, "question_id": 41150183, "link": "https://stackoverflow.com/questions/41150183/how-do-i-use-cin-to-get-a-string-instead-of-hard-coding-it", "title": "How do I use cin to get a string instead of hard-coding it?", "body": "<p>As a homework exercise we were asked to use strchr to count the amount of times a single letter appears in a string of text. It needs to count upper or lower cases as equal. It was suggested we use some sort of bit operations.\nI managed to get a working program.</p>\n\n<p>But i would like to make the program more interactive by allowing me to use a cin to input the string instead of typing the string directly into the source code (Which was asked by the exercise).\nIs it possible to do this? Or is it not possible in the way i wrote this code.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstring&gt;\nusing namespace std;\nint main(){\n    const char *C = \"This is a necesarry test, needed for testing.\";\n    char target = 'A';\n    const char *result = C;\n    const char *result2;\n    int count = 0;\n    int j[26] ={0};\n//================================================================================================================================================\n    for(int i = 0; i &lt;= 51; i++){\n        if (i == 26){\n            target = target + 6;\n        }\n        result2 = strchr(result, target);\n\n        while(result2 != NULL){\n            if (result2 != NULL){\n                result2 = strchr(result2+1, target);\n\n                if (i &lt;= 25){\n                    j[i] = j[i] +1;\n                }\n                if(i &gt; 25){\n                    j[i-26] = j[i-26] +1;\n                }\n                cout &lt;&lt; target &lt;&lt; \"\\t\";\n            }\n\n\n    }\n\n    cout &lt;&lt; target &lt;&lt; endl;\n    target++;\n\n    }\n\n    char top = 'a';\n    for(int o = 0; o&lt;= 25; o++){\n        cout &lt;&lt; \"________________________________\\n\";\n        cout &lt;&lt; \"|\\t\" &lt;&lt; top &lt;&lt; \"\\t|\\t\" &lt;&lt; j[o] &lt;&lt; \"\\t|\" &lt;&lt; endl;\n        top++;\n    }\n    cout &lt;&lt; \"________________________________\\n\";\n\n   }\n</code></pre>\n"}, {"tags": ["c++", "thread-safety", "c++builder", "vcl"], "answers": [{"comments": [{"owner": {"reputation": 677, "user_id": 7181607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-zWEyfhw7itM/AAAAAAAAAAI/AAAAAAAAAEg/ETHZRlGuvt4/photo.jpg?sz=128", "display_name": "FlKo", "link": "https://stackoverflow.com/users/7181607/flko"}, "edited": false, "score": 0, "creation_date": 1481779709, "post_id": 41151521, "comment_id": 69515472, "body": "Thanks, Remy, for this very detailed answer. I got it up and running by locking the canvasses as mentioned but synchronizing s still a must. I got some random AVs without it. (by the end way: I definitely like your &quot;local section RAII&quot;."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1481748657, "last_edit_date": 1481748657, "creation_date": 1481747007, "answer_id": 41151521, "question_id": 41149999, "link": "https://stackoverflow.com/questions/41149999/thread-safety-for-taking-screenshots-on-windows-with-c-builder/41151521#41151521", "title": "Thread safety for taking screenshots on Windows with C++ Builder", "body": "<blockquote>\n  <p>Isn't taking a screenshot on Windows thread-safe?</p>\n</blockquote>\n\n<p>Not when using VCL wrapper classes that are not thread-safe by default.  If you were using plain Win32 API functions directly, then yes, it would be possible to write thread-safe code.</p>\n\n<p>The main reason your code fails is because the VCL is designed to share GDI resources between multiple objects, and the main UI thread frequently frees unused/dormant GDI resources.  So your worker thread's <code>TBitmap</code> image data is likely to get destroyed before you can call <code>Synchronize()</code> to copy it to your <code>TImage</code>. </p>\n\n<p>That being said, what you are attempting <em>can</em> be done if you call <code>Lock()</code>/<code>Unlock()</code> on the <code>Canvas</code> objects in your worker thread, eg:</p>\n\n<pre><code>struct CanvasLocker\n{\n    TCanvas *mCanvas;\n    CanvasLocker(TCanvas *C) : mCanvas(C) { mCanvas-&gt;Lock(); }\n    ~CanvasLocker() { mCanvas-&gt;Unlock(); }\n};\n\nvoid __fastcall TCaptureThread::Execute()\n{\n    int CurWidth = 1600;\n    int CurHeight = 900;\n\n    std::unique_ptr&lt;TCanvas&gt; Canvas(new TCanvas);\n    std::unique_ptr&lt;TBitmap&gt; BMP(new TBitmap);\n    FBMP = BMP.get();\n\n    {\n    CanvasLocker lock(Canvas); // &lt;-- add this!\n    Canvas-&gt;Handle = GetDC(0);    \n    }\n\n    {\n    CanvasLocker lock(BMP-&gt;Canvas); // &lt;-- add this!\n    BMP-&gt;Width = CurWidth;\n    BMP-&gt;Height = CurHeight;    \n    }\n\n    FR = Rect(0, 0, CurWidth, CurHeight);\n\n    while (!Terminated)\n    {\n        {\n        CanvasLocker lock1(Canvas); // &lt;-- add this!\n        CanvasLocker lock2(BMP-&gt;Canvas); // &lt;-- add this!\n        BMP-&gt;Canvas-&gt;CopyRect(FR, Canvas.get(), FR);\n        }\n\n        Synchronize(&amp;UpdatePicture);\n\n        Sleep(100);                 \n    }\n}\n\nvoid __fastcall TCaptureThread::UpdatePicture()\n{\n    CanvasLocker lock1(FBMP-&gt;Canvas); // &lt;-- add this!\n    CanvasLocker lock2(FMainForm-&gt;imgScreenshot-&gt;Canvas); // &lt;-- add this!\n\n    FMainForm-&gt;imgScreenshot-&gt;Canvas-&gt;CopyRect(FR, FBMP-&gt;Canvas, FR);\n    // or: FMainForm-&gt;imgScreenshot-&gt;Picture-&gt;Bitmap-&gt;Assign(FBMP);\n}\n</code></pre>\n\n<p>That being said, because <code>TCanvas</code> is lockable, you <em>might</em> be able to get away with removing <code>Synchronize()</code> altogether:</p>\n\n<pre><code>void __fastcall TCaptureThread::Execute()\n{\n    int CurWidth = 1600;\n    int CurHeight = 900;\n\n    std::unique_ptr&lt;TCanvas&gt; Canvas(new TCanvas);\n    std::unique_ptr&lt;TBitmap&gt; BMP(new TBitmap);\n\n    {\n    CanvasLocker lock(Canvas);\n    Canvas-&gt;Handle = GetDC(0);    \n    }\n\n    {\n    CanvasLocker lock(BMP-&gt;Canvas);\n    BMP-&gt;Width = CurWidth;\n    BMP-&gt;Height = CurHeight;    \n    }\n\n    TRect r = Rect(0, 0, CurWidth, CurHeight);\n\n    while (!Terminated)\n    {\n        {\n        CanvasLocker lock1(BMP-&gt;Canvas);\n\n        {\n        CanvasLocker lock2(Canvas);\n        BMP-&gt;Canvas-&gt;CopyRect(r, Canvas.get(), r);\n        }\n\n        CanvasLocker lock3(FMainForm-&gt;imgScreenshot-&gt;Canvas);\n        FMainForm-&gt;imgScreenshot-&gt;Canvas-&gt;CopyRect(r, BMP-&gt;Canvas, r);\n        // or: FMainForm-&gt;imgScreenshot-&gt;Picture-&gt;Bitmap-&gt;Assign(BMP);\n        }\n\n        Sleep(100);                 \n    }\n}    \n</code></pre>\n"}], "owner": {"reputation": 677, "user_id": 7181607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-zWEyfhw7itM/AAAAAAAAAAI/AAAAAAAAAEg/ETHZRlGuvt4/photo.jpg?sz=128", "display_name": "FlKo", "link": "https://stackoverflow.com/users/7181607/flko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 41151521, "answer_count": 1, "score": 2, "last_activity_date": 1481748657, "creation_date": 1481741430, "question_id": 41149999, "link": "https://stackoverflow.com/questions/41149999/thread-safety-for-taking-screenshots-on-windows-with-c-builder", "title": "Thread safety for taking screenshots on Windows with C++ Builder", "body": "<p>Isn't taking a screenshot on Windows thread-safe?</p>\n\n<p>My following code sometimes takes some shots, but in most cases, the <em>imgScreenshot</em> (which is just a TImage) keeps being just plain white...</p>\n\n<p>Am I missing something?</p>\n\n<pre><code>void __fastcall TCaptureThread::Execute()\n{\n    int CurWidth = 1600;\n    int CurHeight = 900;\n\n    std::unique_ptr&lt;TCanvas&gt; Canvas(new TCanvas);\n    Canvas-&gt;Handle = GetDC(0);    \n\n    FBMP = new TBitmap;                     // private class field\n    FBMP-&gt;Width     = CurWidth;\n    FBMP-&gt;Height    = CurHeight;    \n\n    FR = Rect(0, 0, CurWidth, CurHeight);   // private class field\n\n    while(!Terminated)\n    {\n        FBMP-&gt;Canvas-&gt;CopyRect(FR, Canvas, FR);       \n        Synchronize(&amp;UpdatePicture);\n\n        Sleep(100);                 \n    }\n\n    delete FBMP;\n    FBMP = NULL;\n}\n\nvoid __fastcall TCaptureThread::UpdatePicture()\n{\n    FMainForm-&gt;imgScreenshot-&gt;Canvas-&gt;CopyRect(FR, FBMP-&gt;Canvas, FR);\n}\n</code></pre>\n\n<p>Environment is C++ Builder 10.1.2 Berlin</p>\n"}, {"tags": ["c++", "pkcs#11", "softhsm"], "comments": [{"owner": {"reputation": 3520, "user_id": 3957736, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dcb08b795983eb3dd08b29a1eaf822d6?s=128&d=identicon&r=PG&f=1", "display_name": "always_a_rookie", "link": "https://stackoverflow.com/users/3957736/always-a-rookie"}, "edited": false, "score": 0, "creation_date": 1481815410, "post_id": 41149962, "comment_id": 69535764, "body": "You may use the <code>Start_Date</code> attribute of the PrivateKey Object to store the created date. <code>CK_VALUE</code> is the attribute that holds the actual value that makes the PrivateKey. You may use <code>Data Object</code> that are meant to store any data, to store your metadata like the IV and other info. And you could create a mapping mechanism to the corresponding PrivateKey Object."}, {"owner": {"reputation": 6033, "user_id": 5128464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/25BuB.png?s=128&g=1", "display_name": "vlp", "link": "https://stackoverflow.com/users/5128464/vlp"}, "edited": false, "score": 0, "creation_date": 1482104483, "post_id": 41149962, "comment_id": 69626872, "body": "Is it necessary to store this metadata inside the token?"}], "owner": {"reputation": 1, "user_id": 7293791, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lQiyY8fgjMQ/AAAAAAAAAAI/AAAAAAAAJ90/EkA-U4GO1mU/photo.jpg?sz=128", "display_name": "Abhishek Das", "link": "https://stackoverflow.com/users/7293791/abhishek-das"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 554, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1481744164, "creation_date": 1481741301, "last_edit_date": 1481744164, "question_id": 41149962, "link": "https://stackoverflow.com/questions/41149962/how-do-i-define-a-pkcs11-attribute-for-a-rsa-private-key-that-can-store-metadata", "title": "How do I define a pkcs11 attribute for a RSA private key that can store metadata like IV or date of generation used to the key?", "body": "<p>According to the latest PKCS#11 spec the typical attribute structure of a RSA private key is the following:</p>\n\n<pre><code>CK_ATTRIBUTE template[] = {\n{CKA_CLASS, &amp;class, sizeof(class)},\n\n{CKA_KEY_TYPE, &amp;keyType, sizeof(keyType)},\n\n{CKA_TOKEN, &amp;true, 1},\n\n{CKA_LABEL, label, sizeof(label)},\n\n\n{CKA_SUBJECT, subject, sizeof(subject)},\n\n{CKA_ID, id, sizeof(id)},\n\n{CKA_SENSITIVE, &amp;true, 1},\n\n{CKA_DECRYPT, &amp;true, 1},\n\n{CKA_SIGN, &amp;true, 1},\n\n{CKA_MODULUS, modulus, sizeof(modulus)},\n\n{CKA_PUBLIC_EXPONENT, publicExponent, sizeof(publicExponent)},\n\n{CKA_PRIVATE_EXPONENT, privateExponent, sizeof(privateExponent)},\n\n{CKA_PRIME_1, prime1, sizeof(prime1)},\n\n{CKA_PRIME_2, prime2, sizeof(prime2)},\n\n{CKA_EXPONENT_1, exponent1, sizeof(exponent1)},\n\n{CKA_EXPONENT_2, exponent2, sizeof(exponent2)},\n\n{CKA_COEFFICIENT, coefficient, sizeof(coefficient)}\n\n};\n</code></pre>\n\n<p>However, there is another attribute <code>CK_VALUE</code> that can only be used for creating pkcs 'data objects' and NOT 'key objects'. When I use this field <code>CK_VALUE</code> to create key objects PKCS throws me an invalid attribute error. \nI would like to use a similar field in the which contains a string formatted value that can hold metadata information related to the key (like IV used to wrap the RSA key, date of generation of the key, etc). Is there a way to store these information in the existing pkcs11 template without tinkering with the attribute data structure in the implementation? I am using OpenDNSSec community's SoftHSM n2.0 package for the pkcs implementation.</p>\n\n<p>Any suggestions would be appreciated.</p>\n"}, {"tags": ["c++", "g++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1481741183, "post_id": 41149900, "comment_id": 69502067, "body": "hmm.  <code>math.h</code> is a standard C header.  Depending on your compiler and settings you might be including that header instead of your custom header.  I would change the file names (like <code>my_math.h</code>) and compiler again."}, {"owner": {"reputation": 1863, "user_id": 7030477, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dea67a568e678148fb378672385ec4d5?s=128&d=identicon&r=PG&f=1", "display_name": "adrTuIPKJ44", "link": "https://stackoverflow.com/users/7030477/adrtuipkj44"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1481741326, "post_id": 41149900, "comment_id": 69502162, "body": "Same error when changing files name (from math.h and math.cpp to file.h and file.cpp for instance)"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1481741399, "post_id": 41149900, "comment_id": 69502210, "body": "When asking questions about build errors, first of all make sure the code you show actually <i>have</i> the error you ask about. Then also include the actual error, complete, in full and unedited in the question body."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1481741522, "post_id": 41149900, "comment_id": 69502277, "body": "You forgot to include the <code>math.cpp</code> in the compile command.  You should have something like <code>g++ main.cpp math.cpp</code>"}], "owner": {"reputation": 1863, "user_id": 7030477, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dea67a568e678148fb378672385ec4d5?s=128&d=identicon&r=PG&f=1", "display_name": "adrTuIPKJ44", "link": "https://stackoverflow.com/users/7030477/adrtuipkj44"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "closed_date": 1481741394, "answer_count": 0, "score": 0, "last_activity_date": 1481741111, "creation_date": 1481741111, "question_id": 41149900, "link": "https://stackoverflow.com/questions/41149900/cant-compile-cpp-file-undefined-reference-to-func-1", "closed_reason": "Duplicate", "title": "can&#39;t compile .cpp file: undefined reference to &quot;func_1&quot;", "body": "<p>I'am trying to compile a simple .cpp file using g++ on ubuntu.</p>\n\n<p>Here are my three files:</p>\n\n<p>main.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"math.h\"\nusing namespace std;\n\nint main()\n\n{\n\nint a(2);\n\nb = func2(a);     \n\n\nreturn 0;\n\n}\n</code></pre>\n\n<p>math.cpp:</p>\n\n<pre><code>#include \"math.h\"\n\n\nint func2(int nombreRecu)\n\n{\n\nint valeur(nombreRecu + 2);\n\n\nreturn valeur;\n\n}\n</code></pre>\n\n<p>math.h:</p>\n\n<pre><code>#ifndef MATH_H_INCLUDED\n\n#define MATH_H_INCLUDED\n\n\nint func2(int nombreRecu);\n\n\n#endif // MATH_H_INCLUDED\n</code></pre>\n\n<p>But when doing this command, g++ main.cpp, I get the error: <code>Undefined reference to func2(int)</code></p>\n"}, {"tags": ["c++", "buffer", "producer-consumer"], "comments": [{"owner": {"reputation": 825, "user_id": 1442598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ba1d111d95d327bb1724c681bc5e1ca?s=128&d=identicon&r=PG", "display_name": "1000ml", "link": "https://stackoverflow.com/users/1442598/1000ml"}, "edited": false, "score": 0, "creation_date": 1481740876, "post_id": 41149602, "comment_id": 69501898, "body": "I don&#39;t understand your problem. Can you add a drawing of your data flow?"}, {"owner": {"reputation": 191, "user_id": 5442453, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/SfD67.jpg?s=128&g=1", "display_name": "giorgioW", "link": "https://stackoverflow.com/users/5442453/giorgiow"}, "reply_to_user": {"reputation": 825, "user_id": 1442598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ba1d111d95d327bb1724c681bc5e1ca?s=128&d=identicon&r=PG", "display_name": "1000ml", "link": "https://stackoverflow.com/users/1442598/1000ml"}, "edited": false, "score": 1, "creation_date": 1481741958, "post_id": 41149602, "comment_id": 69502535, "body": "@1000ml edited."}, {"owner": {"reputation": 825, "user_id": 1442598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ba1d111d95d327bb1724c681bc5e1ca?s=128&d=identicon&r=PG", "display_name": "1000ml", "link": "https://stackoverflow.com/users/1442598/1000ml"}, "edited": false, "score": 0, "creation_date": 1481742220, "post_id": 41149602, "comment_id": 69502678, "body": "Without knowing more context, this looks like there is one producer thread that creates tasks. These tasks are executed independently in parallel. All the results are consumed by one thread. Looks to me like you don&#39;t even need any synchronization on the buffers."}], "answers": [{"comments": [{"owner": {"reputation": 191, "user_id": 5442453, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/SfD67.jpg?s=128&g=1", "display_name": "giorgioW", "link": "https://stackoverflow.com/users/5442453/giorgiow"}, "edited": false, "score": 0, "creation_date": 1481794053, "post_id": 41150648, "comment_id": 69522108, "body": "Could you please give me an example of a thread pool declaration? Thanks for your clear explanation, but the concept of thread pooling is still a bit messy in my head."}, {"owner": {"reputation": 825, "user_id": 1442598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ba1d111d95d327bb1724c681bc5e1ca?s=128&d=identicon&r=PG", "display_name": "1000ml", "link": "https://stackoverflow.com/users/1442598/1000ml"}, "reply_to_user": {"reputation": 191, "user_id": 5442453, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/SfD67.jpg?s=128&g=1", "display_name": "giorgioW", "link": "https://stackoverflow.com/users/5442453/giorgiow"}, "edited": false, "score": 1, "creation_date": 1481832120, "post_id": 41150648, "comment_id": 69545123, "body": "@giorgioW Edited. However, I don&#39;t know what your ultimate goal is so take this with a grain of salt."}], "tags": [], "owner": {"reputation": 825, "user_id": 1442598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ba1d111d95d327bb1724c681bc5e1ca?s=128&d=identicon&r=PG", "display_name": "1000ml", "link": "https://stackoverflow.com/users/1442598/1000ml"}, "is_accepted": true, "score": 2, "last_activity_date": 1481832482, "last_edit_date": 1481832482, "creation_date": 1481743739, "answer_id": 41150648, "question_id": 41149602, "link": "https://stackoverflow.com/questions/41149602/lock-free-multiple-producer-multiple-consumer-in-c/41150648#41150648", "title": "Lock-free multiple producer multiple consumer in C++", "body": "<p>Without knowing more context, this looks like an application for a standard thread pool. You have different tasks that are enqueued to a synchronized queue (like the <code>buffer</code> class you have there). Each worker thread of the thread pool polls this queue and processes one task each time (by executing a <code>run()</code> method for example). They write the results back into another synchronized queue.</p>\n\n<p>Each worker thread has an own thread-local pair of input and output buffers. They don't need synchronization because they are only accessed from within the owner thread itself.</p>\n\n<p><a href=\"https://i.stack.imgur.com/6NvTG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6NvTG.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Edit:</strong> Actually, I think this can be simplified a lot: Just use a thread pool and one synchronized queue. The worker threads can enqueue new tasks directly into the queue. Each of your threads in the drawing would correspond to one type of task and implement a common <code>Task</code> interface.\nYou don't need mutiple buffers. You can use polymorphism and put everything in one buffer.</p>\n\n<p><strong>Edit 2 - Explanation of thread pools:</strong><br>\nA thread pool is just a concept. Forget about the pooling aspect, use a fixed number of threads. The main idea is: Instead of having several threads with a specific function, have N threads that can process any kind of task. Where N is the number of cores of the CPU.</p>\n\n<p>You can transform this</p>\n\n<p><a href=\"https://i.stack.imgur.com/6crDB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6crDB.png\" alt=\"enter image description here\"></a></p>\n\n<p>into </p>\n\n<p><a href=\"https://i.stack.imgur.com/xgbJq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xgbJq.png\" alt=\"enter image description here\"></a></p>\n\n<p>The worker thread does something like the following. Note that this is simplified, but you should get the idea.</p>\n\n<pre><code>void Thread::run(buffer&lt;Task*&gt;&amp; queue) {\n    while(true) {\n        Task* task = queue.get();\n        if(task)\n            task-&gt;execute();\n        while(queue.isEmpty())\n            waitUntilQueueHasElement();\n    }\n}\n</code></pre>\n\n<p>And your tasks implement a common interface so you can put <code>Task*</code> pointers into a single queue:</p>\n\n<pre><code>struct Task {\n    virtual void execute() = 0;\n}\n\nstruct Task1 : public Task {\n    virtual void execute() override {\n        A();\n        B1();\n        C();\n    }\n}\n\n...\n</code></pre>\n\n<hr>\n\n<p>Also, do yourself a favour and use typedefs ;)</p>\n\n<pre><code>`std::vector&lt;std::unique_ptr&lt;locked_buffer&lt;std::pair&lt;int, std::vector&lt;std::vector&lt;unsigned char&gt;&gt;&gt;&gt;&gt;&gt; v1;`  \n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>typedef std::vector&lt;std::vector&lt;unsigned char&gt;&gt; vector2D_uchar;\ntypedef std::pair&lt;int, vector2D_uchar&gt; int_vec_pair;\ntypedef std::unique_ptr&lt;locked_buffer&lt;int_vec_pair&gt;&gt; locked_buffer_ptr;\nstd::vector&lt;locked_buffer_ptr&gt; v1;\n</code></pre>\n"}], "owner": {"reputation": 191, "user_id": 5442453, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/SfD67.jpg?s=128&g=1", "display_name": "giorgioW", "link": "https://stackoverflow.com/users/5442453/giorgiow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1314, "favorite_count": 1, "accepted_answer_id": 41150648, "answer_count": 1, "score": 2, "last_activity_date": 1481832482, "creation_date": 1481740121, "last_edit_date": 1481793765, "question_id": 41149602, "link": "https://stackoverflow.com/questions/41149602/lock-free-multiple-producer-multiple-consumer-in-c", "title": "Lock-free multiple producer multiple consumer in C++", "body": "<p>I have to program a multiple producer-consumer system in C++, but I'm lost trying to put together each part of the model (threads with its correct buffer). The basic functioning of the model is: I have an initial thread that executes a function. This returned results need to be put in an undetermined number of buffers, because each elements that the function proccess is different and it needs to be treated in a single thread. Then, with the data stored in the buffers, another <code>n</code> threads need to get the data of this buffers to do another function, and the return of this need to be put in some buffers again.</p>\n\n<p>At the moment I have got this buffer structure created:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass buffer {\npublic:\n  atomic_buffer(int n);\n  int bufSize() const noexcept;\n  bool bufEmpty() const noexcept;\n  bool full() const noexcept;\n  ~atomic_buffer() = default;\n\n\n  void put(const T &amp; x, bool last) noexcept;\n  std::pair&lt;bool,T&gt; get() noexcept;\n\nprivate:\n  int next_pos(int p) const noexcept;\n\nprivate:\n  struct item {\n    bool last;\n    T value;\n  };\n  const int size_;\n  std::unique_ptr&lt;item[]&gt; buf_;\n  alignas(64) std::atomic&lt;int&gt; nextRd_ {0};\n  alignas(64) std::atomic&lt;int&gt; nextWrt_ {0};\n};\n</code></pre>\n\n<p>I've also created a <code>vector</code>structure which stores a collection un buffers, in order to satisfy the undetermined number of threads necessity.</p>\n\n<pre><code>std::vector&lt;std::unique_ptr&lt;locked_buffer&lt;std::pair&lt;int, std::vector&lt;std::vector&lt;unsigned char&gt;&gt;&gt;&gt;&gt;&gt; v1;\n\nfor(int i=0; i&lt;n; i++){     \nv1.push_back(std::unique_ptr&lt;locked_buffer&lt;std::pair&lt;int,std::vector&lt;std::vector&lt;unsigned char&gt;&gt;&gt;&gt;&gt; (new locked_buffer&lt;std::pair&lt;int, std::vector&lt;std::vector&lt;unsigned char&gt;&gt;&gt;&gt;(aux)));  \n}\n</code></pre>\n\n<p>Edit: </p>\n\n<p><a href=\"https://i.stack.imgur.com/CgMbT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CgMbT.png\" alt=\"Flowchart of the model\"></a></p>\n"}, {"tags": ["c++", "c", "recursion", "fibonacci"], "comments": [{"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 2, "creation_date": 1481740010, "post_id": 41149449, "comment_id": 69501477, "body": "You have made an &quot;optimization&quot; where <code>fib(1)</code> does not call <code>fib(0)</code> to get its result - it returns <code>1</code> directly. Only <code>fib(2)</code> will call it. Therefore <code>fib(0)</code> is not called as often as it should. Also, I don&#39;t understand your first question"}], "answers": [{"tags": [], "owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "is_accepted": true, "score": 5, "last_activity_date": 1481740457, "last_edit_date": 1481740457, "creation_date": 1481739985, "answer_id": 41149568, "question_id": 41149449, "link": "https://stackoverflow.com/questions/41149449/computing-the-number-of-times-fibn-is-called-for-each-n/41149568#41149568", "title": "Computing the number of times fib(n) is called FOR EACH n", "body": "<p>Because <code>count[1]</code> is going to be called for each <code>count[2] + count[3]</code> but <code>count[0]</code> is only going to be called for <code>count[2]</code>...<code>count[1]</code> doesn't contribute because it's a terminus.</p>\n\n<p>As for mathematical formula:</p>\n\n<pre><code>if n == 0: fib(N - 1)\nelse: fib(N-(n-1))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": 1, "last_activity_date": 1481741326, "last_edit_date": 1481741326, "creation_date": 1481741014, "answer_id": 41149872, "question_id": 41149449, "link": "https://stackoverflow.com/questions/41149449/computing-the-number-of-times-fibn-is-called-for-each-n/41149872#41149872", "title": "Computing the number of times fib(n) is called FOR EACH n", "body": "<p>As for calculation </p>\n\n<pre><code>call(n)=call(n-1)+call(n-2)+1\n  call(1)=1\n  call(0)=1\n</code></pre>\n\n<p>Hope this make things clear. </p>\n\n<pre><code>n  | calls\n---+--------\n0  |   1\n1  |   1\n2  |   3 \n3  |   5  f(3)= f(2)[= f(1)+ f(0)]+ f(1)\n5  |   9  \n.\nfib(n)    2*fib(n)-1\n</code></pre>\n"}], "owner": {"reputation": 589, "user_id": 4882506, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62d78be71d1cc3e8a2bd98b88daeba05?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Tarng", "link": "https://stackoverflow.com/users/4882506/tony-tarng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 41149568, "answer_count": 2, "score": 1, "last_activity_date": 1481741326, "creation_date": 1481739640, "question_id": 41149449, "link": "https://stackoverflow.com/questions/41149449/computing-the-number-of-times-fibn-is-called-for-each-n", "title": "Computing the number of times fib(n) is called FOR EACH n", "body": "<p>I want to compute the number of times fib(n) is called FOR EACH n. I have written the code as below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define N 10\n\nint count[N + 1]; // count[n] keeps track of the number of times each fib(n) is called\n\nint fib(int n) {\n    count[n]++;\n\n    if(n &lt;= 1)\n        return n;\n    else\n        return fib(n - 1) + fib(n - 2);\n}\n\nint main() {\n    for(int i = 0; i &lt;= N; i++) {\n        count[i] = 0; // initialize count to 0\n    }\n    fib(N);\n\n    // print values of count[]\n    for(int i = 0; i &lt;= N; i++) {\n        printf(\"count[%d] = %d\", i, count[i]);\n    }\n}\n</code></pre>\n\n<p>I have tried printing the array count[] to get the result, where the result is resembles the fibonacci numbers except for count[0]:</p>\n\n<blockquote>\n  <p>count[0] = 34 count[1] = 55 count[2] = 34 count[3] = 21 count[4] = 13\n  count[5] = 8 count[6] = 5 count[7] = 3 count[8] = 2 count[9] = 1\n  count[10] = 1</p>\n</blockquote>\n\n<p><strong>Is there a way to mathematically show this result, maybe a recursive formula? Also, why doesn't count[0], or rather fib(0), doesn't continue the fibonacci sequence?</strong> Thanks.</p>\n"}, {"tags": ["c++", "algorithm", "stl"], "comments": [{"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 1, "creation_date": 1481739839, "post_id": 41149371, "comment_id": 69501400, "body": "vectors are great for images, but generally it works out better to use a <code>std::vector&lt;double&gt;</code> and then your index is <code>vec[currColumn*numRows + currRow]</code>. That way your image is in one, contiguous, cache-friendly piece of memory."}, {"owner": {"reputation": 101, "user_id": 2292650, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/44b47458f10ed8cf331a0ee6fc9306a3?s=128&d=identicon&r=PG&f=1", "display_name": "Kuravi H", "link": "https://stackoverflow.com/users/2292650/kuravi-h"}, "reply_to_user": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1481740714, "post_id": 41149371, "comment_id": 69501819, "body": "Good to know, I made it 2d purely for readability, nothing else, did not know the performance implications. will switch to 1d."}, {"owner": {"reputation": 13642, "user_id": 4013258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d423395e1033fa23d80a5561ab170fa?s=128&d=identicon&r=PG&f=1", "display_name": "Surt", "link": "https://stackoverflow.com/users/4013258/surt"}, "edited": false, "score": 0, "creation_date": 1481749908, "post_id": 41149371, "comment_id": 69506679, "body": "What do you mean by segment here?"}, {"owner": {"reputation": 101, "user_id": 2292650, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/44b47458f10ed8cf331a0ee6fc9306a3?s=128&d=identicon&r=PG&f=1", "display_name": "Kuravi H", "link": "https://stackoverflow.com/users/2292650/kuravi-h"}, "edited": false, "score": 0, "creation_date": 1481760951, "post_id": 41149371, "comment_id": 69510699, "body": "similar to this <a href=\"http://docs.opencv.org/3.1.0/d3/db4/tutorial_py_watershed.html\" rel=\"nofollow noreferrer\">opencv python example</a>. each coin would be a segment."}], "answers": [{"tags": [], "owner": {"reputation": 559, "user_id": 4029784, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/16819e74ef4277a9c67d4ebd91fd3fda?s=128&d=identicon&r=PG&f=1", "display_name": "khuttun", "link": "https://stackoverflow.com/users/4029784/khuttun"}, "is_accepted": false, "score": -1, "last_activity_date": 1481740146, "creation_date": 1481740146, "answer_id": 41149611, "question_id": 41149371, "link": "https://stackoverflow.com/questions/41149371/stl-container-for-simple-image-segmentation/41149611#41149611", "title": "STL container for simple image segmentation", "body": "<p>If the image is divided to two segments, you can store the segmentation as <code>vector&lt;vector&lt;bool&gt;&gt;</code> with the same size as the image.</p>\n"}, {"tags": [], "owner": {"reputation": 1813, "user_id": 2449857, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jxnCm.jpg?s=128&g=1", "display_name": "Jack Deeth", "link": "https://stackoverflow.com/users/2449857/jack-deeth"}, "is_accepted": false, "score": 0, "last_activity_date": 1481742431, "last_edit_date": 1481742431, "creation_date": 1481741654, "answer_id": 41150064, "question_id": 41149371, "link": "https://stackoverflow.com/questions/41149371/stl-container-for-simple-image-segmentation/41150064#41150064", "title": "STL container for simple image segmentation", "body": "<p>If you're moving elements to the end of the vector, use <code>std::stable_partition</code>.</p>\n\n<pre><code>std::vector&lt;int&gt; vec(20);\n// 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 \n\nstd::iota(begin(vec), end(vec), 0);\n// 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 \n\nstd::stable_partition(begin(vec), end(vec),\n                      [](const auto&amp; e){ return (4 &lt;= e &amp;&amp; e &lt; 12);});\n// 4 5 6 7 8 9 10 11 0 1 2 3 12 13 14 15 16 17 18 19\n</code></pre>\n\n<p><a href=\"http://melpon.org/wandbox/permlink/taK0d2ExAvhDOAUK\" rel=\"nofollow noreferrer\">Online example here</a>.</p>\n\n<p>This will also work if you store the data in a single vector - use iterators for the beginning and end of the column/row instead of the entire range. I've got no idea how you read 'across' the data sensibly with either a 1D or 2D vector though!</p>\n\n<p>(I wrote a very nice post about <a href=\"https://www.youtube.com/watch?v=qH6sSOr-yk8\" rel=\"nofollow noreferrer\">Sean Parent's <code>gather</code> algorithm</a> before realising it doesn't answer the question. View the edit history if you want to move selected items to places other than the ends.)</p>\n"}], "owner": {"reputation": 101, "user_id": 2292650, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/44b47458f10ed8cf331a0ee6fc9306a3?s=128&d=identicon&r=PG&f=1", "display_name": "Kuravi H", "link": "https://stackoverflow.com/users/2292650/kuravi-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 289, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1490743626, "creation_date": 1481739336, "last_edit_date": 1495541853, "question_id": 41149371, "link": "https://stackoverflow.com/questions/41149371/stl-container-for-simple-image-segmentation", "title": "STL container for simple image segmentation", "body": "<p>I need to segment an image, based on a simple rule (if value is in between 2 values). I'm using only STL containers (I'm not using opencv or other libraries because I want to keep this free of dependencies while teaching myself c++)</p>\n\n<p>I've stored my images as <code>vector&lt; vector&lt;double&gt; &gt;</code>. My brute force approach is to iterate through my image using 2 iterators and check each value, and maybe push the indices of the values that satisfy my condition to another <code>vector&lt;int&gt;</code>. I'll have to do this until all segments are found. Every time I want to pick a segment I'll iterate through the stored indices.</p>\n\n<ol>\n<li><p>What is the correct way to do this?</p></li>\n<li><p>Can this be achieved in one pass?</p></li>\n<li><p>What is a suitable STL container for this process? I'm trying to\nfigure it out through this <a href=\"https://stackoverflow.com/a/471461/2292650\">flowchart</a>. The best I can come up\nwith was an <code>unordered_multimap</code>.</p></li>\n</ol>\n"}, {"tags": ["c++", "operator-overloading"], "comments": [{"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 4, "creation_date": 1481738381, "post_id": 41149115, "comment_id": 69500622, "body": "It would be better to give the function a name which makes its purpose clear."}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 309, "user_id": 5953061, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/754f00a40b20be1c0cee9ee35e4922cb?s=128&d=identicon&r=PG&f=1", "display_name": "tistCoder", "link": "https://stackoverflow.com/users/5953061/tistcoder"}, "edited": false, "score": 0, "creation_date": 1481739172, "post_id": 41149208, "comment_id": 69501024, "body": "@tistCoder You may name the method as you want to make the semanitcs clear, but <code>override</code> is a c++ keywork, so be careful."}, {"owner": {"reputation": 309, "user_id": 5953061, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/754f00a40b20be1c0cee9ee35e4922cb?s=128&d=identicon&r=PG&f=1", "display_name": "tistCoder", "link": "https://stackoverflow.com/users/5953061/tistcoder"}, "edited": false, "score": 0, "creation_date": 1481739327, "post_id": 41149208, "comment_id": 69501113, "body": "Well, I kind of forgot about it, don&#39;t ask how that could have happened... I&#39;ll use an other name"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1481739465, "post_id": 41149208, "comment_id": 69501175, "body": "Actually, <code>override</code> is a context sensitive keyword. You can use it as an identifier."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1481739589, "post_id": 41149208, "comment_id": 69501238, "body": "@BenjaminLindley Ah, THX for that info. I&#39;m still learning :)"}, {"owner": {"reputation": 309, "user_id": 5953061, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/754f00a40b20be1c0cee9ee35e4922cb?s=128&d=identicon&r=PG&f=1", "display_name": "tistCoder", "link": "https://stackoverflow.com/users/5953061/tistcoder"}, "edited": false, "score": 0, "creation_date": 1481739744, "post_id": 41149208, "comment_id": 69501338, "body": "Well, in that case i might use override() ;) Thanks for this information"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 309, "user_id": 5953061, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/754f00a40b20be1c0cee9ee35e4922cb?s=128&d=identicon&r=PG&f=1", "display_name": "tistCoder", "link": "https://stackoverflow.com/users/5953061/tistcoder"}, "edited": false, "score": 0, "creation_date": 1481739963, "post_id": 41149208, "comment_id": 69501454, "body": "@tistCoder I&#39;m still not convinced of that naming. I&#39;d probably reject that in a code review. Just try to be clear, not fancy ;)"}, {"owner": {"reputation": 309, "user_id": 5953061, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/754f00a40b20be1c0cee9ee35e4922cb?s=128&d=identicon&r=PG&f=1", "display_name": "tistCoder", "link": "https://stackoverflow.com/users/5953061/tistcoder"}, "edited": false, "score": 0, "creation_date": 1481740209, "post_id": 41149208, "comment_id": 69501565, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6  Well, I actually thought the same but in my opinion override is a clear name and as long as the syntax allows this it shouldn&#39;t be a big problem. (It is a bad thought that all what the syntax allows is acceptable but in this case I&#39;m sure of it)"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 309, "user_id": 5953061, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/754f00a40b20be1c0cee9ee35e4922cb?s=128&d=identicon&r=PG&f=1", "display_name": "tistCoder", "link": "https://stackoverflow.com/users/5953061/tistcoder"}, "edited": false, "score": 0, "creation_date": 1481740771, "post_id": 41149208, "comment_id": 69501847, "body": "@tistCoder I elaborated a bit more in my answer.  Anyhow that kind of <i>style</i> questions is tending a bit to get opinions borderline."}, {"owner": {"reputation": 309, "user_id": 5953061, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/754f00a40b20be1c0cee9ee35e4922cb?s=128&d=identicon&r=PG&f=1", "display_name": "tistCoder", "link": "https://stackoverflow.com/users/5953061/tistcoder"}, "edited": false, "score": 0, "creation_date": 1481741442, "post_id": 41149208, "comment_id": 69502232, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 That&#39;s why I was asking for ;). I know there are many style things. For example the operator+() (without arguments) allows the std::ostream to print a char as number not as letter. In that case it is also not serving the standard functionality. It would actually say that a number is positive but math actually allows us to let it out."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 309, "user_id": 5953061, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/754f00a40b20be1c0cee9ee35e4922cb?s=128&d=identicon&r=PG&f=1", "display_name": "tistCoder", "link": "https://stackoverflow.com/users/5953061/tistcoder"}, "edited": false, "score": 0, "creation_date": 1481741509, "post_id": 41149208, "comment_id": 69502268, "body": "@tistCoder Rule of thumb: Don&#39;t try to override operators with unexpected semantics. Besides that it doesn&#39;t pass (serious) code reviews, it just confuses others how to use your class API."}, {"owner": {"reputation": 309, "user_id": 5953061, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/754f00a40b20be1c0cee9ee35e4922cb?s=128&d=identicon&r=PG&f=1", "display_name": "tistCoder", "link": "https://stackoverflow.com/users/5953061/tistcoder"}, "edited": false, "score": 0, "creation_date": 1481741720, "post_id": 41149208, "comment_id": 69502403, "body": "Don&#39;t worry I am NOT going to overload operators without a good background. In case of my question it was a background with multiple views so I was asking for the opinion of other people"}, {"owner": {"reputation": 309, "user_id": 5953061, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/754f00a40b20be1c0cee9ee35e4922cb?s=128&d=identicon&r=PG&f=1", "display_name": "tistCoder", "link": "https://stackoverflow.com/users/5953061/tistcoder"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1481741954, "post_id": 41149208, "comment_id": 69502532, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/130631/discussion-between-tistcoder-and--\">continue this discussion in chat</a>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 309, "user_id": 5953061, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/754f00a40b20be1c0cee9ee35e4922cb?s=128&d=identicon&r=PG&f=1", "display_name": "tistCoder", "link": "https://stackoverflow.com/users/5953061/tistcoder"}, "edited": false, "score": 0, "creation_date": 1481741984, "post_id": 41149208, "comment_id": 69502546, "body": "@tistCoder Asking for opinions is <i>off-topic</i> here, as you may already know. As mentioned your question is borderline regarding that, but can still be answered with showing clear and broadly accepted idioms that address your problem in c++. No need to chat, declined."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 309, "user_id": 5953061, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/754f00a40b20be1c0cee9ee35e4922cb?s=128&d=identicon&r=PG&f=1", "display_name": "tistCoder", "link": "https://stackoverflow.com/users/5953061/tistcoder"}, "edited": false, "score": 0, "creation_date": 1481742130, "post_id": 41149208, "comment_id": 69502637, "body": "@tistCoder If you really want to, come over into the SOCVR chat: <a href=\"http://chat.stackoverflow.com/transcript/message/34598079#34598079\">chat.stackoverflow.com/transcript/message/34598079#34598079</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 309, "user_id": 5953061, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/754f00a40b20be1c0cee9ee35e4922cb?s=128&d=identicon&r=PG&f=1", "display_name": "tistCoder", "link": "https://stackoverflow.com/users/5953061/tistcoder"}, "edited": false, "score": 0, "creation_date": 1481742921, "post_id": 41149208, "comment_id": 69503034, "body": "@tistCoder At SOCVR, we can access a broader community deciding about the <i>borderline</i> aspect I mentioned."}, {"owner": {"reputation": 309, "user_id": 5953061, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/754f00a40b20be1c0cee9ee35e4922cb?s=128&d=identicon&r=PG&f=1", "display_name": "tistCoder", "link": "https://stackoverflow.com/users/5953061/tistcoder"}, "edited": false, "score": 0, "creation_date": 1481743055, "post_id": 41149208, "comment_id": 69503100, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 yes, but isn&#39;t such a long conversation between 2 persons inside the comment section unwelcome?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 309, "user_id": 5953061, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/754f00a40b20be1c0cee9ee35e4922cb?s=128&d=identicon&r=PG&f=1", "display_name": "tistCoder", "link": "https://stackoverflow.com/users/5953061/tistcoder"}, "edited": false, "score": 0, "creation_date": 1481743276, "post_id": 41149208, "comment_id": 69503219, "body": "@tistCoder <i>&quot;yes, but isn&#39;t such a long conversation between 2 persons inside the comment section unwelcome?&quot;</i> Yes. There are better chat rooms for that discussion though."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 3, "last_activity_date": 1481741787, "last_edit_date": 1481741787, "creation_date": 1481738643, "answer_id": 41149208, "question_id": 41149115, "link": "https://stackoverflow.com/questions/41149115/is-overloading-operator-for-a-reconstruction-a-good-practice/41149208#41149208", "title": "Is overloading operator() for a reconstruction a good practice?", "body": "<blockquote>\n  <h3>Is overloading operator() for a reconstruction a good practice?</h3>\n</blockquote>\n\n<p>In short no, that isn't <em>good practice</em>. Such just obfuscates what is done under the hood.</p>\n\n<p>Providing a setter for <code>data</code> and use the code you provided in your overloaded <code>operator()</code> for the implementation of the assignment <code>operator=()</code> would provide the clearer and naturally expected semantics:</p>\n\n<pre><code>class A {\n    private:\n\n    std::string id;\n    std::array&lt;std::string, 128&gt; data;\n\n    public:\n\n    A(const std::string&amp; id) : id(id) {}\n    A(const A&amp; other) : id(other.id), data(other.data) {}\n    ~A(){}\n\n    //to override the intern data\n    A&amp; operator=(const A&amp; other) {\n        id = other.id;\n        data = other.data;\n\n        return *this;\n    }\n\n    //to override the intern data\n    void setData(const A&amp; other) {\n         data = other.data;\n    }\n    void setData(const std::array&lt;std::string, 128&gt;&amp; data_) {\n         data = data_;\n    }\n};\n</code></pre>\n\n<hr>\n\n<p>The semantics of the <code>operator()</code> isn't that clearly defined (vs the <code>operator=()</code>) beyond you can make a call of your class looking like a <em>\"normal\"</em> function call (which is mostly useful with templates taking your type as a parameter).<br>\nBut I'd expect it more to do some <em>action</em> instead of changing the internal state of the class.</p>\n\n<hr>\n\n<p>Regarding the style, instead of the <code>set</code> / <code>get</code> prefixes for getter/setter functions I prefer what's done in the c++ standard library, (like e.g. with the <a href=\"http://en.cppreference.com/w/cpp/io/ios_base/flags\" rel=\"nofollow noreferrer\"><code>std::ios_base::flags()</code></a> property):</p>\n\n<pre><code>class A {\nprivate:\n    // ...\n    std::array&lt;std::string, 128&gt; data_;\npublic:\n    const std::array&lt;std::string, 128&gt;&amp; data() const {\n         return data_;\n    }\n    void data(const std::array&lt;std::string, 128&gt;&amp; data) {\n         data_ = data;\n\n    }\n    // ...\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1481742736, "post_id": 41150295, "comment_id": 69502949, "body": "<i>@Richard</i> <i>&quot;please upvote that answer, not this one.&quot;</i> That&#39;s too decent, have an upvote ;P."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1481744662, "post_id": 41150295, "comment_id": 69503899, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 aww you&#39;re too kind."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 3, "last_activity_date": 1481744753, "last_edit_date": 1481744753, "creation_date": 1481742481, "answer_id": 41150295, "question_id": 41149115, "link": "https://stackoverflow.com/questions/41149115/is-overloading-operator-for-a-reconstruction-a-good-practice/41150295#41150295", "title": "Is overloading operator() for a reconstruction a good practice?", "body": "<p>great answer from \u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 so please upvote that answer, not this one.</p>\n\n<p>As you write, and more importantly, read more c++ you will come to appreciate people who name methods and functions with natural, meaningful names.</p>\n\n<p>For most of us, if we see code like this:</p>\n\n<pre><code>X x;\nY y;\n\nx(y);\n</code></pre>\n\n<p>We would think, before even looking at the declarations of <code>X</code> and <code>Y</code>, that <code>X</code> is some kind of function object (i.e. it does something) and <code>Y</code> is some kind of data or state object - it likes having things done to it, or it supplies data or services.</p>\n\n<p>As a side note, a Haskell programmer would naturally assume that <code>Y</code> is also a function, but that's another story.</p>\n\n<p>If your implementation of <code>X::operator()(Y)</code> does not \"do X-type stuff with or to a Y\" then it is probably inappropriately named. </p>\n\n<p>If <code>Y</code> actually represents new state for <code>X</code>, and <code>X</code> intends to 'reset' itself using the data in <code>Y</code>, then the method should probably be called... <code>reset</code>:</p>\n\n<pre><code>X x;\nY y;\n\nx.reset(y);  //ok, this is telling a better story\n</code></pre>\n\n<p>With reasonable names we can tell a narrative with our code:</p>\n\n<pre><code>void processResults(XFactory&amp; factory, std::istream&amp; is) {\n    while(is) {\n        auto x = X::createFrom(factory);\n        x.collectNResults(is, 10);\n        auto a = x.takeAverage();\n        storeAverage(a);\n        x.reset(y);\n    }\n}\n</code></pre>\n\n<p>Now even without looking up the definitions of the various classes I can get a sense of the general narrative. It's easier on the eye and I'm going to be able to hone in on the bits I need to see much more quickly than:</p>\n\n<pre><code>void processResults(XFactory&amp; factory, std::istream&amp; is) {\n    while(is) {\n        auto x = X(factory);\n        x(is, 10);\n        auto a = x();\n        x(averageStore);\n        x(y);\n    }\n}\n</code></pre>\n\n<p>Which is what I'd have if I wrote every operation on an X in terms of a call operator which, much like corporate tax avoidance, is actually perfectly legal, but nevertheless happens to upset other people because they end up paying the price for your selfishness.</p>\n"}], "owner": {"reputation": 309, "user_id": 5953061, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/754f00a40b20be1c0cee9ee35e4922cb?s=128&d=identicon&r=PG&f=1", "display_name": "tistCoder", "link": "https://stackoverflow.com/users/5953061/tistcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 41149208, "answer_count": 2, "score": 2, "last_activity_date": 1481744753, "creation_date": 1481738253, "last_edit_date": 1481739492, "question_id": 41149115, "link": "https://stackoverflow.com/questions/41149115/is-overloading-operator-for-a-reconstruction-a-good-practice", "title": "Is overloading operator() for a reconstruction a good practice?", "body": "<p>I was thinking of the following scenario:</p>\n\n<pre><code>class A {\n    private:\n\n    std::string id;\n    std::array&lt;std::string, 128&gt; data;\n\n    public:\n\n    A(const std::string&amp; id) : id(id) {}\n    A(const A&amp; other) : id(other.id), data(other.data) {}\n    virtual ~A(){}\n\n    //to override the intern data\n    A&amp; operator=(const A&amp; other) {\n\n        this-&gt;data = other.data;\n\n        return *this;\n    }\n\n    //to override the whole element\n    A&amp; operator()(const A&amp; other) {\n\n        this-&gt;id = other.id;\n        this-&gt;data = other.data;\n\n        return *this;\n    }\n};\n</code></pre>\n\n<p>As you can see, my idea was to use operator= to override the internal data and operator() to override the whole element. I was inspired by the constructor which would allow <code>A a(anOtherA);</code> to construct the element and I would like to override this for a re-construction. Now I don't now if this would be smart overloading this because it's actually the function call operator.</p>\n"}, {"tags": ["c++", "c++11", "shared-ptr"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 2, "creation_date": 1481738349, "post_id": 41148986, "comment_id": 69500611, "body": "When <code>ptr</code> goes out of scope, its destructor essentially does <code>delete &amp;localVariable;</code>, which exhibits undefined behavior as <code>&amp;localVariable</code> is not a pointer obtained by <code>new</code>. I&#39;m not sure what <code>NULL</code> pointer you are talking about."}, {"owner": {"reputation": 689, "user_id": 1307324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/609c8922e01033cab1a1ac0428abc7fe?s=128&d=identicon&r=PG", "display_name": "Undefined Behaviour", "link": "https://stackoverflow.com/users/1307324/undefined-behaviour"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1481738880, "post_id": 41148986, "comment_id": 69500876, "body": "@IgorTandetnik tried following too : int* q = &amp;localVariable; shared_ptr&lt;int&gt; ptr3 (q); Now i got double free or corruption (out) error. This pointer also not obtained by new. then why here i got double free error."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1481741890, "post_id": 41148986, "comment_id": 69502501, "body": "I&#39;m not sure I understand what you are asking. Undefined behavior is undefined. If it hurts when you do this, then don&#39;t do that. What exactly are you driving at with this line of inquiry? Is there an actual problem you are trying to solve?"}], "answers": [{"tags": [], "owner": {"reputation": 2389, "user_id": 1991678, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a9f5d4caa1c8059acdb6582c8429bc3f?s=128&d=identicon&r=PG&f=1", "display_name": "default", "link": "https://stackoverflow.com/users/1991678/default"}, "is_accepted": true, "score": 2, "last_activity_date": 1481738367, "creation_date": 1481738367, "answer_id": 41149141, "question_id": 41148986, "link": "https://stackoverflow.com/questions/41148986/program-crashes-on-passing-local-variable-address-to-shared-pointer-in-c/41149141#41149141", "title": "Program crashes on passing local variable address to shared pointer in c++", "body": "<p>The <code>shared_ptr</code> will try to delete the <code>localVariable</code> when <code>ptr</code> goes out of scope.  However, the <code>localVariable</code> is not heap allocated (via <code>new</code>), so it cannot be deleted (and is its memory is automatically managed by the stack).  </p>\n"}], "owner": {"reputation": 689, "user_id": 1307324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/609c8922e01033cab1a1ac0428abc7fe?s=128&d=identicon&r=PG", "display_name": "Undefined Behaviour", "link": "https://stackoverflow.com/users/1307324/undefined-behaviour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "accepted_answer_id": 41149141, "answer_count": 1, "score": 0, "last_activity_date": 1481740927, "creation_date": 1481737765, "last_edit_date": 1481740927, "question_id": 41148986, "link": "https://stackoverflow.com/questions/41148986/program-crashes-on-passing-local-variable-address-to-shared-pointer-in-c", "title": "Program crashes on passing local variable address to shared pointer in c++", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n\nusing namespace std;\n\nvoid func ()\n{\n    cout &lt;&lt; \"func\\n\";\n    int localVariable = 10;\n    int* p = new int;\n    shared_ptr&lt;int&gt; ptr (&amp;localVariable); \n    shared_ptr&lt;int&gt; ptr1 (new int); \n    shared_ptr&lt;int&gt; ptr2 (p); \n}\n\nint main ()\n{\n    func();\n    return 0;\n}\n</code></pre>\n\n<p>I tried to pass heap allocated memory directly to <code>shared_ptr</code> and also tried some pointer which is allocated before, both compile and run successfully.\nBut when i tried to pass local variable's address to <code>shared_ptr</code>, it crashed with following stack :</p>\n\n<blockquote>\n  <p>vidhu@~/Documents/CPP_Practice$ ./a.out  func\n  <strong>* Error in `./a.out': free(): invalid pointer: 0xbfc7f13c *</strong></p>\n  \n  <p>Aborted (core dumped)</p>\n</blockquote>\n\n<p>Why this is happened ? I think deleting <code>NULL</code> pointer is safe but it is not good coding practice.</p>\n"}, {"tags": ["c++", "constructor", "compiler-errors", "systemc"], "comments": [{"owner": {"reputation": 2952, "user_id": 3200088, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/WlD9X.jpg?s=128&g=1", "display_name": "Gio", "link": "https://stackoverflow.com/users/3200088/gio"}, "edited": false, "score": 0, "creation_date": 1481738228, "post_id": 41148909, "comment_id": 69500548, "body": "Are you sure  the produer / sc_module class is copyable, I have the suspicion that <code>producers.at(i) = producer(&quot;Producer &quot; + i, genSpeed);</code> is trying to copy-assign a non-copyable type, which is resulting in your error."}, {"owner": {"reputation": 1756, "user_id": 5233188, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/OS2a7.png?s=128&g=1", "display_name": "goulashsoup", "link": "https://stackoverflow.com/users/5233188/goulashsoup"}, "reply_to_user": {"reputation": 2952, "user_id": 3200088, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/WlD9X.jpg?s=128&g=1", "display_name": "Gio", "link": "https://stackoverflow.com/users/3200088/gio"}, "edited": false, "score": 0, "creation_date": 1481738569, "post_id": 41148909, "comment_id": 69500702, "body": "@Gio Well I assume that has something todo with the parent class <code>sc_module</code>. How can I find out if its copyable? <a href=\"http://www.lysium.de/docs/systemc-2.2/docs/html/classsc__core_1_1sc__module.html\" rel=\"nofollow noreferrer\">Here</a>  is the class reference..."}, {"owner": {"reputation": 132, "user_id": 5339558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1740afc606f76a0a33ce457380b4ed59?s=128&d=identicon&r=PG&f=1", "display_name": "Shyamal Desai", "link": "https://stackoverflow.com/users/5339558/shyamal-desai"}, "edited": false, "score": 0, "creation_date": 1481738602, "post_id": 41148909, "comment_id": 69500722, "body": "Are sc_in&lt;&gt; and sc_out &lt;&gt; movable?"}, {"owner": {"reputation": 1756, "user_id": 5233188, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/OS2a7.png?s=128&g=1", "display_name": "goulashsoup", "link": "https://stackoverflow.com/users/5233188/goulashsoup"}, "reply_to_user": {"reputation": 132, "user_id": 5339558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1740afc606f76a0a33ce457380b4ed59?s=128&d=identicon&r=PG&f=1", "display_name": "Shyamal Desai", "link": "https://stackoverflow.com/users/5339558/shyamal-desai"}, "edited": false, "score": 0, "creation_date": 1481740684, "post_id": 41148909, "comment_id": 69501808, "body": "@ShyamalDesai I don&#180;t think so. Here is the class reference of <a href=\"https://www.iro.umontreal.ca/~lablasso/docs/SystemC2.0.1/html/classsc__in.html\" rel=\"nofollow noreferrer\"><code>sc_in&lt;&gt;</code></a>"}, {"owner": {"reputation": 2952, "user_id": 3200088, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/WlD9X.jpg?s=128&g=1", "display_name": "Gio", "link": "https://stackoverflow.com/users/3200088/gio"}, "edited": false, "score": 0, "creation_date": 1481740762, "post_id": 41148909, "comment_id": 69501841, "body": "You class is copyable if it has a copy constructor. *Usually if a copy constructor is not defined in a class, the compiler itself defines one. *(A specific class definition might specify it as non-copyable, see <a href=\"http://stackoverflow.com/questions/2173746/how-do-i-make-this-c-object-non-copyable\">here</a>). ps. your link does not work."}], "answers": [{"comments": [{"owner": {"reputation": 1756, "user_id": 5233188, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/OS2a7.png?s=128&g=1", "display_name": "goulashsoup", "link": "https://stackoverflow.com/users/5233188/goulashsoup"}, "edited": false, "score": 0, "creation_date": 1481739515, "post_id": 41149145, "comment_id": 69501193, "body": "Your final solution does not work : <code>error: no matching function for call to \u2018producer::producer(std::__cxx11::basic_string&lt;char&gt;, int&amp;)\u2019</code>. Maybe because producers <code>name</code> attribute is of type <a href=\"http://www.lysium.de/docs/systemc-2.2/docs/html/classsc__core_1_1sc__module__name.html\" rel=\"nofollow noreferrer\"><code>sc_module_name</code></a>... For other <code>sc_module</code> classes something like <code>&quot;name&quot; + i</code> (with <code>i</code> is in integer) does work, but with <code>producers.emplace_back(&quot;Producer &quot; + i, genSpeed);</code> I get the error <code>error: use of deleted function \u2018producer::producer(producer&amp;&amp;)\u2019</code>"}], "tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1481745885, "last_edit_date": 1481745885, "creation_date": 1481738373, "answer_id": 41149145, "question_id": 41148909, "link": "https://stackoverflow.com/questions/41148909/c-error-use-of-deleted-function-during-constructor-call-of-custom-class/41149145#41149145", "title": "C++ Error: use of deleted function during constructor call of custom class", "body": "<p><code>producer</code> doesn't have a move assignment operator.  By the looks of things, probably because <code>sc_module</code> doesn't have one.</p>\n\n<p>You have other problems:</p>\n\n<pre><code>std::vector&lt;producer&gt; producers;\nfor(int i = 0; i &lt; numIn; i++){\n    producers.at(i) ....\n}\n</code></pre>\n\n<p>This creates an empty vector of <code>producers</code>, and then assigns to the first element of that vector.  The problem is that there <em>is</em> no such element, and because you are using <code>at</code>, you will get an exception.</p>\n\n<p>Conveniently, you can fix both problems at once with:</p>\n\n<pre><code>std::vector&lt;producer&gt; producers;\nfor(int i = 0; i &lt; numIn; i++){\n    producers.emplace_back(\"Producer \" + i, genSpeed);\n}\n</code></pre>\n\n<p>This creates an empty vector, and then constructs a series of new <code>producer</code>s at the end of it.  This does depend on you having a working move constructor.  If you don't have a working move constructor, I think you are rather stuck.</p>\n\n<p>This still won't work, because you will get producers called \"Producer \", \"roducer \", \"oducer \", etc.  Adding an integer to a character string literal will just return a pointer to the n'th character of the literal.  What you need is to make the literal be a <code>std::string</code> literal, and convert the integer to text.</p>\n\n<pre><code>    producers.emplace_back(\"Producer \"s + std::to_string(i), genSpeed);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3122, "user_id": 1503413, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/JVUOu.jpg?s=128&g=1", "display_name": "random", "link": "https://stackoverflow.com/users/1503413/random"}, "is_accepted": false, "score": 4, "last_activity_date": 1523631422, "last_edit_date": 1523631422, "creation_date": 1481745622, "answer_id": 41151190, "question_id": 41148909, "link": "https://stackoverflow.com/questions/41148909/c-error-use-of-deleted-function-during-constructor-call-of-custom-class/41151190#41151190", "title": "C++ Error: use of deleted function during constructor call of custom class", "body": "<p>Copy construction and assignment are disabled for <code>sc_module</code>s to implement/preserve SystemC elaboration semantics.</p>\n\n<p>You should use <code>sc_vector</code> to create collections of <code>sc_object</code>s. It was created specifically to address this type of design problems.</p>\n"}, {"tags": [], "owner": {"reputation": 1756, "user_id": 5233188, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/OS2a7.png?s=128&g=1", "display_name": "goulashsoup", "link": "https://stackoverflow.com/users/5233188/goulashsoup"}, "is_accepted": true, "score": 0, "last_activity_date": 1483984987, "creation_date": 1483984987, "answer_id": 41554112, "question_id": 41148909, "link": "https://stackoverflow.com/questions/41148909/c-error-use-of-deleted-function-during-constructor-call-of-custom-class/41554112#41554112", "title": "C++ Error: use of deleted function during constructor call of custom class", "body": "<p>I our final solution we used <code>std::shared_ptr</code> and <code>std::vector</code>:</p>\n\n<pre><code>using sharedProducerPointer = std::shared_ptr&lt;producer&gt;;\nstd::vector&lt;sharedProducerPointer&gt; producers;\n\n//bind producers and distributor to input signals\nfor(int i = 0; i &lt; numIn; i++) {\n    std::string stringProducersName = \"producer_\" + std::to_string(i);\n    const char* charProducersName = stringProducersName.c_str();\n\n    sharedProducerPointer prod = sharedProducerPointer(new producer(charProducersName, genSpeed, numOut));\n    prod-&gt;out.bind(inputSignals.at(i));\n    dist.inputMsg.at(i).bind(inputSignals.at(i));\n    prod-&gt;clock(inClock);\n\n    producers.push_back(prod);\n}\n</code></pre>\n"}], "owner": {"reputation": 1756, "user_id": 5233188, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/OS2a7.png?s=128&g=1", "display_name": "goulashsoup", "link": "https://stackoverflow.com/users/5233188/goulashsoup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2858, "favorite_count": 0, "accepted_answer_id": 41554112, "answer_count": 3, "score": 2, "last_activity_date": 1523631422, "creation_date": 1481737466, "last_edit_date": 1523631382, "question_id": 41148909, "link": "https://stackoverflow.com/questions/41148909/c-error-use-of-deleted-function-during-constructor-call-of-custom-class", "title": "C++ Error: use of deleted function during constructor call of custom class", "body": "<p>I have a custom class <code>producer</code> which inherits from SystemC class <code>sc_module</code>:</p>\n\n<pre><code>class producer: public sc_module {\n    public:\n        int counter;\n        sc_in&lt;bool&gt; clock;\n        sc_out&lt;msg&gt; out;\n        int speed;\n\n        producer(sc_module_name name, int speed) : \n            sc_module(name), \n            speed(speed) \n        {\n            SC_HAS_PROCESS(producer);\n            SC_METHOD(produce);\n\n            sensitive &lt;&lt; clock.pos();\n            counter = 0;\n        }\n\n        void produce() {\n            ...\n        }\n\n};\n</code></pre>\n\n<p>Later in the SystemC <code>sc_main</code>-class I want to put a bunch of objects in a <code>std::vector&lt;producer&gt;</code>:</p>\n\n<pre><code>std::vector&lt;producer&gt; producers;\nfor(int i = 0; i &lt; numIn; i++){\n    producers.at(i) = producer(\"Producer \" + i, genSpeed); // &lt;- Here the error occurs\n}\n</code></pre>\n\n<p>And here is the compiler error:</p>\n\n<pre><code>error: use of deleted function \u2018producer&amp; producer::operator=(producer&amp;&amp;)\u2019\n         producers.at(i) = producer(\"Producer \" + i, genSpeed);\n                                                             ^\ndist.cpp:103:7: note: \u2018producer&amp; producer::operator=(producer&amp;&amp;)\u2019 is implicitly deleted because the default definition would be ill-formed:\n class producer: public sc_module {\n       ^~~~~~~~\n</code></pre>\n\n<p>Why does the error occur? How can I fix it?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1481735522, "post_id": 41148354, "comment_id": 69499039, "body": "I assume you are not permitted to use <code>c++</code>. A proper <code>c++</code> solution would use std::vector."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1481735529, "post_id": 41148354, "comment_id": 69499044, "body": "Do it via a constructor for the struct."}, {"owner": {"reputation": 553, "user_id": 6237375, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a7d87bb01eda55acc69683a8b5eda170?s=128&d=identicon&r=PG&f=1", "display_name": "DomainFlag", "link": "https://stackoverflow.com/users/6237375/domainflag"}, "edited": false, "score": 0, "creation_date": 1481735577, "post_id": 41148354, "comment_id": 69499080, "body": "little more insight how to do it?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1481735611, "post_id": 41148354, "comment_id": 69499095, "body": "std:vector&lt;Color&gt; T;"}, {"owner": {"reputation": 553, "user_id": 6237375, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a7d87bb01eda55acc69683a8b5eda170?s=128&d=identicon&r=PG&f=1", "display_name": "DomainFlag", "link": "https://stackoverflow.com/users/6237375/domainflag"}, "edited": false, "score": 0, "creation_date": 1481735619, "post_id": 41148354, "comment_id": 69499101, "body": "I am just starting with c++, I didn&#39;t know about std::vector, yet..."}, {"owner": {"reputation": 12066, "user_id": 3924118, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/abb01e1c2a8e3d9e1534dca14b19b3d8?s=128&d=identicon&r=PG&f=1", "display_name": "nbro", "link": "https://stackoverflow.com/users/3924118/nbro"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1481735663, "post_id": 41148354, "comment_id": 69499130, "body": "@drescherjm I&#39;ve seen this suggestion a few annoying times. The question is not about which data structure to use for a particular case, it&#39;s about how to allocate a variable (array) on the heap. Just answer if you know the answer, otherwise ignore and go ahead."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1481735705, "post_id": 41148354, "comment_id": 69499150, "body": "That is what <code>std::vector</code> will do. Of course I know the pre-standard way to do this. I have been a <code>c++</code> programmer for around 30 years."}, {"owner": {"reputation": 12066, "user_id": 3924118, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/abb01e1c2a8e3d9e1534dca14b19b3d8?s=128&d=identicon&r=PG&f=1", "display_name": "nbro", "link": "https://stackoverflow.com/users/3924118/nbro"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1481735836, "post_id": 41148354, "comment_id": 69499236, "body": "@drescherjm Yes, probably, but from the OP&#39;s question it seems he wants to do it &quot;manually&quot;, so let him do it manually. You can also suggest &quot;better&quot; alternatives, but you should focus first on addressing his particular issue."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 12066, "user_id": 3924118, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/abb01e1c2a8e3d9e1534dca14b19b3d8?s=128&d=identicon&r=PG&f=1", "display_name": "nbro", "link": "https://stackoverflow.com/users/3924118/nbro"}, "edited": false, "score": 2, "creation_date": 1481735926, "post_id": 41148354, "comment_id": 69499292, "body": "@nbro: That&#39;s an unwarranted assumption."}, {"owner": {"reputation": 12066, "user_id": 3924118, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/abb01e1c2a8e3d9e1534dca14b19b3d8?s=128&d=identicon&r=PG&f=1", "display_name": "nbro", "link": "https://stackoverflow.com/users/3924118/nbro"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1481735984, "post_id": 41148354, "comment_id": 69499327, "body": "@BenjaminLindley Which assumption?"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 12066, "user_id": 3924118, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/abb01e1c2a8e3d9e1534dca14b19b3d8?s=128&d=identicon&r=PG&f=1", "display_name": "nbro", "link": "https://stackoverflow.com/users/3924118/nbro"}, "edited": false, "score": 0, "creation_date": 1481736026, "post_id": 41148354, "comment_id": 69499358, "body": "@nbro: That the OP wants to do it manually."}, {"owner": {"reputation": 553, "user_id": 6237375, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a7d87bb01eda55acc69683a8b5eda170?s=128&d=identicon&r=PG&f=1", "display_name": "DomainFlag", "link": "https://stackoverflow.com/users/6237375/domainflag"}, "edited": false, "score": 0, "creation_date": 1481736035, "post_id": 41148354, "comment_id": 69499362, "body": "Guys, I didn&#39;t learn about std::vector, I need to work with what I know, a little push will help very much even if it&#39;s not the best solution you may think for it."}, {"owner": {"reputation": 12066, "user_id": 3924118, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/abb01e1c2a8e3d9e1534dca14b19b3d8?s=128&d=identicon&r=PG&f=1", "display_name": "nbro", "link": "https://stackoverflow.com/users/3924118/nbro"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1481736130, "post_id": 41148354, "comment_id": 69499419, "body": "@BenjaminLindley The fact that he mentions <code>struct Color *newTable = new struct Color[anyNumber];</code>, from my perspective, alludes to the fact that he potentially wants to do a similar thing but &quot;inside the struct&quot;."}, {"owner": {"reputation": 553, "user_id": 6237375, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a7d87bb01eda55acc69683a8b5eda170?s=128&d=identicon&r=PG&f=1", "display_name": "DomainFlag", "link": "https://stackoverflow.com/users/6237375/domainflag"}, "edited": false, "score": 0, "creation_date": 1481736163, "post_id": 41148354, "comment_id": 69499434, "body": "yes indeed, but how?"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 12066, "user_id": 3924118, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/abb01e1c2a8e3d9e1534dca14b19b3d8?s=128&d=identicon&r=PG&f=1", "display_name": "nbro", "link": "https://stackoverflow.com/users/3924118/nbro"}, "edited": false, "score": 2, "creation_date": 1481736184, "post_id": 41148354, "comment_id": 69499449, "body": "@nbro: Or it alludes the fact that that is the only way he knows how to do heap allocation."}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 0, "creation_date": 1481736217, "post_id": 41148354, "comment_id": 69499470, "body": "for <code>std::vector&lt;&gt;</code> solution: When you do <code>T.resize(width*height);</code> early, it&#39;s close to best solution. If you would do <code>T.push_back(pixel);</code> without <code>reserve(width*height)</code>, it would be a bit inefficient. If you would do some kind of <code>insert(pos, pixel);</code> (on random positions), it would be really bad. ... the first option basically does what you had, with dynamic width*height."}, {"owner": {"reputation": 12066, "user_id": 3924118, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/abb01e1c2a8e3d9e1534dca14b19b3d8?s=128&d=identicon&r=PG&f=1", "display_name": "nbro", "link": "https://stackoverflow.com/users/3924118/nbro"}, "edited": false, "score": 0, "creation_date": 1481736293, "post_id": 41148354, "comment_id": 69499514, "body": "@DomainFlag This problem has arisen many times. You can for example declare a pointer and when you create your variable of your particular struct, just allocate the memory as you already know (with the <code>new</code> operator) by accessing your pointer with the dot operator, if that&#39;s an operator."}, {"owner": {"reputation": 12066, "user_id": 3924118, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/abb01e1c2a8e3d9e1534dca14b19b3d8?s=128&d=identicon&r=PG&f=1", "display_name": "nbro", "link": "https://stackoverflow.com/users/3924118/nbro"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1481736327, "post_id": 41148354, "comment_id": 69499539, "body": "@BenjaminLindley Yes, also, as he&#39;s just said."}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1481737380, "post_id": 41148354, "comment_id": 69500121, "body": "@DomainFlag The TLDR is use a <code>std::vector&lt;Color&gt;</code>. If you allocate memory on the heap yourself, you&#39;ll have to make sure that you write the appropriate copy and move constructor/assignment operators as well as a destructor. If you don&#39;t do it correctly, you can leak memory, and that happens a lot. The downside to using a vector is that to write efficient code you&#39;ll want to make it a 1D vector which has implications for how you address pixels (2d vectors aren&#39;t contiguous like the array counterparts) and you&#39;ll need to research on size and capacity and why you need to use reserve wisely."}], "answers": [{"tags": [], "owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "is_accepted": false, "score": 3, "last_activity_date": 1481736648, "creation_date": 1481736648, "answer_id": 41148689, "question_id": 41148354, "link": "https://stackoverflow.com/questions/41148354/how-to-define-a-variable-in-heap-memory-in-a-struct-with-c/41148689#41148689", "title": "How to define a variable in heap memory in a struct with C++?", "body": "<p>You have the answer to your own question, which is to use a pointer in the struct. Then you would use <code>new</code> to get heap memory and store the result in your pointer.</p>\n\n<p>But no, don't do this manually. Learn how to write \"Modern C++\" (look it up) which <em>almost never</em> uses <code>new</code> or <code>delete</code>, and for good reasons.</p>\n\n<p>Use <code>std::vector</code> here. Really.</p>\n\n<p>Ideally you would wrap this entire thing into some kind of <code>Bitmap</code> class which hides the vector and provides member functions to access pixels. Not virtual functions, because efficiency is very important for graphics.</p>\n"}, {"comments": [{"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 1, "creation_date": 1481737762, "post_id": 41148855, "comment_id": 69500320, "body": "While this is technically a valid use of <code>std::unique_ptr&lt;T[]&gt;</code>, it&#39;s not very ideomatic, and <code>std::vector&lt;T&gt;</code> is vastly preferable. Teaching the user how to do &quot;dynamic memory allocation&quot; doesn&#39;t have to mean teaching the literal use of pointers\u2014and it probably shouldn&#39;t when the specific application is storing large amounts of data in a contiguous data structure. Also, this will make the object non-copyable unless the user manually adds a copy constructor."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1481738343, "post_id": 41148855, "comment_id": 69500608, "body": "@Xirema, you could have argued that using <code>vector</code> allows bounds-checking (which you didn&#39;t make use of in your answer for some reason), and makes the object copyable rather than move-only. Your comment makes no mention of such advantages though (nor the disadvantage of <code>vector</code> being three times the size of a <code>unique_ptr</code>)."}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 1, "creation_date": 1481741283, "post_id": 41148855, "comment_id": 69502117, "body": "@JonathanWakely The size of a vector vs a unique_ptr for this example will be in the noise. Given that the image size probably dwarfs the size of the actual container overhead, the real question is how much space on average is wasted from vector growth. If reserve is used properly I think it will be little to none, but I don&#39;t know how how the various libraries implement that."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1481888125, "post_id": 41148855, "comment_id": 69566614, "body": "@RyanP, yep, good points. In a case like this it <i>probably</i> doesn&#39;t need to grow. The width and height are known, and you&#39;re unlikely to want to do <code>push_back</code> of individual pixels. Which is why I used a fixed size array, with zero overhead, managed by <code>unique_ptr</code>. A <code>std::vector</code> does a <b>lot</b> more, and most of it isn&#39;t needed in this case. It might still be the right answer though."}], "tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": false, "score": 0, "last_activity_date": 1481737595, "last_edit_date": 1481737595, "creation_date": 1481737285, "answer_id": 41148855, "question_id": 41148354, "link": "https://stackoverflow.com/questions/41148354/how-to-define-a-variable-in-heap-memory-in-a-struct-with-c/41148855#41148855", "title": "How to define a variable in heap memory in a struct with C++?", "body": "<pre><code>#include &lt;memory&gt;\n\nstruct matrixImage\n{\n    Image Img;\n    int Width;\n    int Height;\n    std::unique_ptr&lt;Color[]&gt; colors;\n    Color&amp; color(int x, int y);\n};\n\nColor&amp; matrixImage::color(int x, int y)\n{\n    if (x &gt;= Width || y &gt;= Height)\n        throw std::out_of_range(\"bad co-ordinates\");\n    return colors[y*Width + x];\n}\n\n// ...\n\nmatrixImage mimg;\nmimg.Width = 20;\nmimg.Height = 100;\nmimg.colors = std::make_unique&lt;Color&gt;(mimg.Width*mimg.Height);\n</code></pre>\n\n<p>It would be better to encapsulate the allocation inside a constructor, that takes the width and height as arguments:</p>\n\n<pre><code>matrixImage::matrixImage(Image img, int width, int height)\n: Img(img), Width(width), Height(height), colors(std::make_unique&lt;Color&gt;(mimg.Width*mimg.Height))\n{ }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1481737933, "post_id": 41148921, "comment_id": 69500408, "body": "Bounds checking is trivial to add, just use <code>pixel_data.at(y * Width + x)</code> to access the vector."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 2, "creation_date": 1481737994, "post_id": 41148921, "comment_id": 69500436, "body": "@JonathanWakely Not quite. What if the user specifies an <code>x</code> value greater than <code>Width</code>? One would logically expect an error, but <code>pixel_data.at(y * Width + x)</code> will not throw an error in that case."}, {"owner": {"reputation": 553, "user_id": 6237375, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a7d87bb01eda55acc69683a8b5eda170?s=128&d=identicon&r=PG&f=1", "display_name": "DomainFlag", "link": "https://stackoverflow.com/users/6237375/domainflag"}, "edited": false, "score": 0, "creation_date": 1481738703, "post_id": 41148921, "comment_id": 69500778, "body": "with a fast check on tutorials on vector, I changed something and part by part it starts to work, i&#39;m gonna dive into to understand better the principles and so on. Don&#39;t judge me, I am just starting off c++ with less then 3 months of experience and it&#39;s always daunting for me to go to stack and to realize that I know too little. Thanks for help."}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 4, "last_activity_date": 1481737934, "last_edit_date": 1481737934, "creation_date": 1481737512, "answer_id": 41148921, "question_id": 41148354, "link": "https://stackoverflow.com/questions/41148354/how-to-define-a-variable-in-heap-memory-in-a-struct-with-c/41148921#41148921", "title": "How to define a variable in heap memory in a struct with C++?", "body": "<p>I'd do something like this:</p>\n\n<pre><code>//Switched to a class because we need some encapsulation or this will be bug-prone.\nclass matrixImage\n{\n    //Do you need this? What kind of object is \"Image\"?\n    //Image Img;\n    std::vector&lt;Color&gt; pixel_data;\n    int Width;\n    int Height;\npublic:\n    matrixImage(int width = 1, int height = 1) :\n    Width(width), Height(height), pixel_data(width * height) \n    {\n    }\n\n    //You can add bounds-checking if you need it, i.e. make sure y is less than Height, \n    //make sure x is less than Width. Not every application needs it, and you need a \n    //clear semantic of \"what should happen\" if you specify an invalid index.\n    Color &amp; get_color(int x, int y) {\n        return pixel_data[y * Width + x];\n    }\n    //We have two versions to handle the case where your object is made \"const\"\n    Color const&amp; get_color(int x, int y) const{\n        return pixel_data[y * Width + x];\n    }\n\n    //Hey, we can use the function we just defined above this one!\n    void set_color(int x, int y, Color c) {\n        get_color(x, y) = c;\n    }\n\n    //This only resizes the canvas. Doing proper \"Resizing\" is beyond the scope of what \n    //we're discussing here.\n    void set_size(int new_width, int new_height) {\n        std::vector&lt;Color&gt; new_data(new_width * new_height);\n\n        //This case is pretty easy\n        if(new_width == Width) {\n            std::copy(\n                pixel_data.begin(), \n                pixel_data.begin() + std::min(pixel_data.size(), new_data.size()), \n                new_data.begin()\n            );\n        //This gets complicated\n        } else if(new_width &lt; Width) {\n            for(size_t y = 0; y &lt; std::min(Height, new_height); y++) {\n                std::copy(\n                    pixel_data.begin() + y * Width,\n                    pixel_data.begin() + y * Width + new_width,\n                    new_data.begin() + y * new_width\n                );\n            }\n        //Similar logic, but slightly different.\n        } else {\n            for(size_t y = 0; y &lt; std::min(Height, new_height); y++) {\n                std::copy(\n                    pixel_data.begin() + y * Width,\n                    pixel_data.begin() + (y + 1) * Width,\n                    new_data.begin() + y * new_width\n                );\n            }\n        }\n        pixel_data = new_data;\n        Width = new_width;\n        Height = new_height;\n    }\n\n    //I leave this last one as an exercise to the reader, as it's beyond my expertise.\n    void resize(int new_width, int new_height);\n};\n</code></pre>\n\n<p>This will handle dynamic memory allocation for you (and of course, deallocation) and give you some basic functionality to work directly with the underlying data if you absolutely need to.</p>\n"}], "owner": {"reputation": 553, "user_id": 6237375, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a7d87bb01eda55acc69683a8b5eda170?s=128&d=identicon&r=PG&f=1", "display_name": "DomainFlag", "link": "https://stackoverflow.com/users/6237375/domainflag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 455, "favorite_count": 0, "accepted_answer_id": 41148921, "answer_count": 3, "score": 2, "last_activity_date": 1481741892, "creation_date": 1481735444, "last_edit_date": 1481741892, "question_id": 41148354, "link": "https://stackoverflow.com/questions/41148354/how-to-define-a-variable-in-heap-memory-in-a-struct-with-c", "title": "How to define a variable in heap memory in a struct with C++?", "body": "<p>I have 2 Structures, Color one:</p>\n\n<pre><code>struct Color\n{\n    unsigned char red;\n    unsigned char green;\n    unsigned char blue;\n};\n</code></pre>\n\n<p>And the Image structure:</p>\n\n<pre><code>struct matrixImage\n{\n    Image Img;\n    struct Color T[MAX][MAX];\n    int Width;\n    int Height;\n};\n</code></pre>\n\n<p>In <code>T</code> table, I am storing the pixels of an image. But the maximum size of the array is to low(on stack), so I can't store every pixel of the image. I know how to define an array in Heap like this </p>\n\n<p>->  <code>struct Color *newTable = new struct Color[anyNumber];</code></p>\n\n<p>But how can I write this in <code>struct matrixImage</code>, any help?</p>\n"}, {"tags": ["c++", "sockets"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1481748812, "post_id": 41148297, "comment_id": 69506125, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682499.aspx\" rel=\"nofollow noreferrer\">Creating a Child Process with Redirected Input and Output</a>. You will have to redirect the input/output of tasklist.exe, then you can read commands from the client and send them to the process, and then read its responses and send them back to the client."}], "answers": [{"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1481739905, "creation_date": 1481739905, "answer_id": 41149535, "question_id": 41148297, "link": "https://stackoverflow.com/questions/41148297/execute-a-command-on-the-server-and-send-the-result-to-the-client-in-windows/41149535#41149535", "title": "Execute a command on the server and send the result to the client in Windows", "body": "<p>That you mention <code>_popen</code> (with the leading underscore) and <code>TransmitFile</code> indicates that you are on Windows, which doesn't have <code>fork</code> or <code>pipe</code> or related functions.</p>\n\n<p>There are many alternatives to executing commands in Windows. One is through <a href=\"https://msdn.microsoft.com/en-us/library/96ayss4b.aspx\" rel=\"nofollow noreferrer\"><code>_popen</code></a> as you already mentioned (but you don't say what's wrong with that method). Others include the \"classic\" <a href=\"https://msdn.microsoft.com/en-us/library/277bwbdz.aspx\" rel=\"nofollow noreferrer\"><code>system</code></a> CRT function. And of course the Windows native <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682425(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>CreateProcess</code></a> function. If you want to open a \"document\" there's the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb762153(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>ShellExecute</code></a> function.</p>\n\n<p>Knowing which functions are available will help you in your search for examples. Adding the term <code>windows</code> to your searches will help finding Windows-specific examples and tutorials. And adding the term <code>msdn</code> will help finding topics on the <a href=\"https://msdn.microsoft.com/en-us/default.aspx\" rel=\"nofollow noreferrer\">Microsoft Developer Network</a>.</p>\n"}], "owner": {"reputation": 91, "user_id": 7059855, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b4f98c227ae9064910f46c7e29c02259?s=128&d=identicon&r=PG&f=1", "display_name": "sgrontflix", "link": "https://stackoverflow.com/users/7059855/sgrontflix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1481739905, "creation_date": 1481735297, "question_id": 41148297, "link": "https://stackoverflow.com/questions/41148297/execute-a-command-on-the-server-and-send-the-result-to-the-client-in-windows", "title": "Execute a command on the server and send the result to the client in Windows", "body": "<p>I'm writing a simple server program that executes a command and sends the result to the client. I read countless examples that involve using <code>popen()</code>, <code>pipe()</code>, <code>dup2()</code>, <code>fork()</code>, etc., but none of them worked for me and they didn't explain the code very well. I also tried to do it myself, but without success. Could you please provide me with a well documented example?</p>\n\n<p>Here's the code that receives commands/messages from the client:</p>\n\n<pre><code>void server_receive() {\n    struct sockaddr_in from;\n    int from_len, recv_len;\n    char buf[BUFLEN], path[256]; // BUFLEN = 1024\n\n    // Getting the path for the command to execute\n    strcpy(path, getenv(\"SYSTEMDRIVE\"));\n    strcat(path, \"\\\\WINDOWS\\\\System32\\\\tasklist.exe\");\n\n    from_len = sizeof(from);\n\n    memset(buf, '\\0', BUFLEN);\n    // Receiving the command\n    // I'll add some if-else statements to handle various commands, but for\n    // now I just need to see if I can even get one to work.\n    if((recv_len = recvfrom(sockt, buf, BUFLEN, 0, (struct sockaddr*) &amp;from, &amp;from_len)) == SOCKET_ERROR) {\n        printf(\"[ERROR] recvfrom() failed: %d.\\n\\n\", WSAGetLastError());\n    } else {\n        printf(\"Packet received from %s:%d\\n\", inet_ntoa(from.sin_addr), ntohs(from.sin_port));\n        printf(\"Data: %s\\n\\n\", buf);\n        // Code to execute tasklist (I used _popen())\n        // and send everything back to the client (I used TransmitFile())\n    }\n}\n</code></pre>\n\n<p>And here's the code that sends commands/messages to the server:</p>\n\n<pre><code>void client_send(char server[], unsigned short port) {\n    struct sockaddr_in to;\n    int s, to_len = sizeof(to);\n    char buf[BUFLEN]; // BUFLEN = 1024\n    char message[BUFLEN];\n\n    memset((char*) &amp;to, 0, sizeof(to));\n    to.sin_family = AF_INET;\n    to.sin_port = htons(port);\n    to.sin_addr.S_un.S_addr = inet_addr(server);\n\n    while(true) {\n        printf(\"Enter message: \");\n        gets(message);\n\n        if (sendto(sockt, message, strlen(message), 0, (struct sockaddr*) &amp;to, to_len) == SOCKET_ERROR) {\n            printf(\"[ERROR] sendto() failed: %d.\\n\\n\" , WSAGetLastError());\n        }\n\n        memset(buf, '\\0', BUFLEN);\n        if (recvfrom(sockt, buf, BUFLEN, 0, (struct sockaddr*) &amp;to, &amp;to_len) == SOCKET_ERROR) {\n            printf(\"[ERROR] recvfrom() failed: %d.\\n\\n\", WSAGetLastError());\n        } else {\n            printf(\"Server's response: %s\\n\\n\", buf); /* The result of tasklist\n            should be outputted by this line of code, however I'm concerned about the\n            relatively small receive length (BUFLEN = 1024).*/\n        }\n    }\n}\n</code></pre>\n\n<p>Needless to say that these two functions are just a part of my code.</p>\n"}, {"tags": ["c++", "vector", "buffer", "stdvector", "unique-ptr"], "comments": [{"owner": {"reputation": 615, "user_id": 7119734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9af9ffd6954945b49d98fbd9e7a04ccf?s=128&d=identicon&r=PG&f=1", "display_name": "yassin", "link": "https://stackoverflow.com/users/7119734/yassin"}, "edited": false, "score": 1, "creation_date": 1481735002, "post_id": 41148107, "comment_id": 69498723, "body": "I think you need to dereference the <code>unique_ptr</code>, so do <code>v1[i]-&gt;put...</code>"}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1481736772, "post_id": 41148107, "comment_id": 69499814, "body": "is that double vector at the end supposed to be a 2d matrix? also, this would be a great place to use <code>using</code>. Such as <code>template&lt;class T&gt; using myBufferType = std::pair&lt;int, std::vector&lt;std::vector&lt;T&gt;&gt;&gt;;</code> and then your type is <code>std::unique_ptr&lt;locked_buffer&lt;myBufferType&lt;unsigned char&gt;&gt;&gt;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 832, "user_id": 3077540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fMo4X.png?s=128&g=1", "display_name": "jsb", "link": "https://stackoverflow.com/users/3077540/jsb"}, "is_accepted": true, "score": 4, "last_activity_date": 1481735116, "creation_date": 1481735116, "answer_id": 41148250, "question_id": 41148107, "link": "https://stackoverflow.com/questions/41148107/vector-of-buffers-in-c/41148250#41148250", "title": "Vector of buffers in C++", "body": "<p><code>v1[0]</code> is a <code>unique_ptr&lt;locked_buffer&lt;...&gt;&gt;</code>. In order to call a method on the contained <code>locked_buffer</code>, you need to dereference the <code>unique_ptr</code>, i.e.</p>\n\n<pre><code>(*v1[0]).put(image, false);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>v1[0]-&gt;put(image, false);\n</code></pre>\n"}], "owner": {"reputation": 191, "user_id": 5442453, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/SfD67.jpg?s=128&g=1", "display_name": "giorgioW", "link": "https://stackoverflow.com/users/5442453/giorgiow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 650, "favorite_count": 0, "accepted_answer_id": 41148250, "answer_count": 1, "score": 2, "last_activity_date": 1481735116, "creation_date": 1481734637, "question_id": 41148107, "link": "https://stackoverflow.com/questions/41148107/vector-of-buffers-in-c", "title": "Vector of buffers in C++", "body": "<p>I've created this vector, which has buffers:</p>\n\n<pre><code>std::vector&lt;std::unique_ptr&lt;locked_buffer&lt;std::pair&lt;int, std::vector&lt;std::vector&lt;unsigned char&gt;&gt;&gt;&gt;&gt;&gt; v1;\n</code></pre>\n\n<p>Then, I fill this vector with <code>n</code> buffers and this buffers have <code>aux</code> elements. <code>n</code> is an int number which is an argument. <code>aux</code>is another argument that is an int type too.</p>\n\n<pre><code>for(int i=0; i&lt;n; i++){\n   v1.push_back(std::unique_ptr&lt;locked_buffer&lt;std::pair&lt;int,std::vector&lt;std::vector&lt;unsigned char&gt;&gt;&gt;&gt;&gt; (new locked_buffer&lt;std::pair&lt;int, std::vector&lt;std::vector&lt;unsigned char&gt;&gt;&gt;&gt;(aux)));  \n}\n</code></pre>\n\n<p>But when I try to access to each buffer of the vector I can't, because I haven't got clear how can I access to a specific element of a vector structure:</p>\n\n<pre><code>v1[0].put(image, false);\n</code></pre>\n\n<p>The compilation error that I've got is the following one (The <code>put</code> function is defined on my custom <code>locked_buffer</code> structure):</p>\n\n<pre><code>error: \u2018_gnu_cxx::_alloc_traits&lt;std::allocator&lt;std::unique_ptr&lt;locked_buffer&lt;std::pair&lt;int, std::vector&lt;std::vector&lt;unsigned char&gt; &gt; &gt; &gt; &gt; &gt; &gt;::value_type {aka class std::unique_ptr&lt;locked_buffer&lt;std::pair&lt;int, std::vector&lt;std::vector&lt;unsigned char&gt; &gt; &gt; &gt; &gt;}\u2019 has no member named \u2018put\u2019\nv1[i].put(image, false);\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "gcc", "linker", "map-files"], "comments": [{"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1481913451, "post_id": 41148100, "comment_id": 69580727, "body": "Your link refers to <code>libstdc++</code> and <code>libc++</code>. But <code>libc++</code> is not <code>libcpp</code>. The first is the the LLVM Standard C++ Library. The second is the proprietary Dinkumware Standard C++ Library, which has been licensed to various proprietary toolchains. Nobody here is more likely than <i>you</i> to know why you are linking these two implementations of the Standard C++ Library, and as whether they are ABI compatible, you&#39;d best ask <a href=\"http://www.dinkumware.com/\" rel=\"nofollow noreferrer\">Dinkumware</a> or the toolchain provider."}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1481917123, "post_id": 41148100, "comment_id": 69582504, "body": "@MikeKinghan thank you I will. Is there a list of all these <code>std</code> lib implementations and their incompatibilities?"}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1481918002, "post_id": 41148100, "comment_id": 69582873, "body": "No. Linking multiple implementations of &quot;the same&quot; library should not be done unless with expert rationale and scrutiny. If you don&#39;t know why you&#39;re doing it, you should assume its wrong until you can find out."}], "owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 214, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1481820368, "creation_date": 1481734618, "last_edit_date": 1495535440, "question_id": 41148100, "link": "https://stackoverflow.com/questions/41148100/gcc-map-lists-both-libstdc-so-and-libcpp-so-which-one-will-be-used-for-stri", "title": "gcc .map lists both libstdc++.so and libcpp.so - which one will be used for string, vector, etc", "body": "<p>My <code>.map</code> file for the <code>gcc</code> linker output contains both <code>libstdc++.so</code> and <code>libcpp.so</code> and I've read that <a href=\"https://stackoverflow.com/questions/14972425/should-i-use-libc-or-libstdc\">they're incompatible</a></p>\n\n<p>How will it know which C++ <code>lib</code> to select?<br>\nIf this executable instantiates a <code>string</code> then passes it to another executable that also has both <code>libstdc++</code> and <code>libcpp</code> in .map file . . . will things work out?</p>\n\n<p>Documentation is appreciated.</p>\n"}, {"tags": ["c++", "language-lawyer"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1481734623, "post_id": 41148054, "comment_id": 69498498, "body": "If you declare <code>r</code> as a non-static class member then it&#39;s still a non-static member <i>variable</i>. It just happens to be a variable that references something else. If you had that definition as a &quot;normal&quot; function-local variable, would you still say it&#39;s not a variable?"}, {"owner": {"reputation": 18468, "user_id": 336578, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/02875c01303f56c0c9c72dfcd49aac05?s=128&d=identicon&r=PG", "display_name": "Mircea Ispas", "link": "https://stackoverflow.com/users/336578/mircea-ispas"}, "edited": false, "score": 0, "creation_date": 1481734666, "post_id": 41148054, "comment_id": 69498533, "body": "r is a variable - its value is the address of an int, exactly like a pointer. It&#39;s just syntactic sugar for pointers with some extra safety features"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1481734852, "post_id": 41148054, "comment_id": 69498626, "body": "References are not <i>objects</i>, but they can be variables."}, {"owner": {"reputation": 175, "user_id": 7123797, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/74077c9243da6fd6216f9fd7f027e77e?s=128&d=identicon&r=PG&f=1", "display_name": "Rodvi", "link": "https://stackoverflow.com/users/7123797/rodvi"}, "edited": false, "score": 0, "creation_date": 1481734855, "post_id": 41148054, "comment_id": 69498630, "body": "Standart 3.6: &quot;A variable is introduced by the declaration of a reference other than a non-static data member or of an object.&quot; I think this statement claims that non-static data member references are not variables. Am I wrong?"}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1481735317, "post_id": 41148054, "comment_id": 69498917, "body": "\u201cnon-static data member\u201d is defined in &#167;9.2/4. I don\u2019t understand how to interpret &#167;3/6 in this light."}, {"owner": {"reputation": 175, "user_id": 7123797, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/74077c9243da6fd6216f9fd7f027e77e?s=128&d=identicon&r=PG&f=1", "display_name": "Rodvi", "link": "https://stackoverflow.com/users/7123797/rodvi"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1481736302, "post_id": 41148054, "comment_id": 69499520, "body": "@Someprogrammerdude C++ Standard says that it is not true."}, {"owner": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "edited": false, "score": 1, "creation_date": 1481737405, "post_id": 41148054, "comment_id": 69500129, "body": "Non-reference non-static data member definitions don&#39;t introduce variables either, so, yes, the wording on cppreference is incorrect in general, not just for references."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "reply_to_user": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "edited": false, "score": 0, "creation_date": 1481737481, "post_id": 41148054, "comment_id": 69500177, "body": "@bogdan What makes you say that? The standard is quite explicit that non-static data members are objects, and that object declarations introduce variables."}, {"owner": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1481737567, "post_id": 41148054, "comment_id": 69500221, "body": "@KonradRudolph Where does it say that?"}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "reply_to_user": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "edited": false, "score": 0, "creation_date": 1481737711, "post_id": 41148054, "comment_id": 69500298, "body": "@bogdan In &#167;3/6 and &#167;9.2/4."}, {"owner": {"reputation": 175, "user_id": 7123797, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/74077c9243da6fd6216f9fd7f027e77e?s=128&d=identicon&r=PG&f=1", "display_name": "Rodvi", "link": "https://stackoverflow.com/users/7123797/rodvi"}, "reply_to_user": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "edited": false, "score": 0, "creation_date": 1481738018, "post_id": 41148054, "comment_id": 69500450, "body": "@bogdan see &#167;1.8/2, for example. Data member (excluding references) is a member subobject. And every subobject is an object so data member (excluding references) is object."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 1, "creation_date": 1481738486, "post_id": 41148054, "comment_id": 69500674, "body": "A nonref data member is not a subobject. There will be a subobject once you create an object of the enclosing class, only."}, {"owner": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 3, "creation_date": 1481738488, "post_id": 41148054, "comment_id": 69500676, "body": "@KonradRudolph We have to be very careful with terminology here. A non-reference non-static data member definition does not define an object (just like the enclosing class definition doesn&#39;t define an object of that class); it defines a class member, period. Think about it this way: member subobjects need an enclosing object, otherwise, what are they <i>sub</i>objects of? Yes, when an object of the enclosing class is defined, then that definition defines its member subobjects as well; different ones for each object. The non-static member definition doesn&#39;t define any of those subobjects."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "reply_to_user": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "edited": false, "score": 1, "creation_date": 1481738612, "post_id": 41148054, "comment_id": 69500730, "body": "@bogdan Right on. That explains OP\u2019s confusion as well."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 2, "creation_date": 1481738657, "post_id": 41148054, "comment_id": 69500754, "body": "In other words, there is a &quot;1:n&quot; relationship between a data member and its objects/references."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 1, "creation_date": 1481738776, "post_id": 41148054, "comment_id": 69500821, "body": "@JohannesSchaub-litb This makes sense, but the wording of the standard is then inexact, because it literally uses \u201cis a\u201d: \u201cA non-static data member of non-reference type is a member subobject of a class object\u201d. This should then rather be \u201ccorresponds to\u201d, shouldn\u2019t it?"}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1481738779, "post_id": 41148054, "comment_id": 69500822, "body": "In a similar way that a class declaration can &quot;become&quot; a complete object or subobject with 1:n relationship from the class type to objects of its type."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 1, "creation_date": 1481738927, "post_id": 41148054, "comment_id": 69500906, "body": "@konrad i agree, it seems sloppy wording use"}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1481739494, "post_id": 41148054, "comment_id": 69501185, "body": "Another complication is the definition of &quot;object declaration&quot; which afaik covers declararions of references (!) and objects as simple-declarations. However data member declararions are not simple-declarations, so they would not be &quot;object declarations&quot;. But maybe they are still declarations of objects if of nonreference type..."}, {"owner": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "edited": false, "score": 1, "creation_date": 1481740066, "post_id": 41148054, "comment_id": 69501508, "body": "Cppreference, like any wiki, has a talk tab on every page, which is more appropriate for this.  Dropped &quot;variable&quot; for now pending the outcome of this discussion."}, {"owner": {"reputation": 175, "user_id": 7123797, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/74077c9243da6fd6216f9fd7f027e77e?s=128&d=identicon&r=PG&f=1", "display_name": "Rodvi", "link": "https://stackoverflow.com/users/7123797/rodvi"}, "edited": false, "score": 0, "creation_date": 1481740401, "post_id": 41148054, "comment_id": 69501658, "body": "From <a href=\"http://en.cppreference.com/w/cpp/language/object\" rel=\"nofollow noreferrer\">cppreference for object</a>: &quot;The following entities are not objects: value, reference, function, enumerator, type, <b>class member</b>, bit-field, template, template specialization, namespace, parameter pack, and this.&quot; So yes, class members are not objects!"}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1481741167, "post_id": 41148054, "comment_id": 69502057, "body": "@rodvi unions are classes, but classes are not unions. Int is a type, but a type is not int."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1481741240, "post_id": 41148054, "comment_id": 69502092, "body": "IMO a variable template specialization may well be an object. But not always"}, {"owner": {"reputation": 175, "user_id": 7123797, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/74077c9243da6fd6216f9fd7f027e77e?s=128&d=identicon&r=PG&f=1", "display_name": "Rodvi", "link": "https://stackoverflow.com/users/7123797/rodvi"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1481742250, "post_id": 41148054, "comment_id": 69502696, "body": "@JohannesSchaub-litb But what&#39;s wrong? That page doesn&#39;t claim something like &quot;objects are not class members&quot;. They directly claim that &quot;class members are not objects&quot;."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1481745817, "post_id": 41148054, "comment_id": 69504592, "body": "@Rodvi ah you are right. Well, I think things are not so clear. What is clear, is that one can&#39;t just take the list in clause 3, and say that each item is non-overlapping with each other, which seems to be what cppreference is doing. For sure, a (class-) template-specialization is a type. Both are in the list. And a (function-) template-specialization is a function. And &quot;this&quot; is a value, and so on."}, {"owner": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "edited": false, "score": 1, "creation_date": 1481907203, "post_id": 41148054, "comment_id": 69577836, "body": "I found where this matters: attempting to explicitly capture a nonstatic data member in a lambda fails with both clang and gcc saying only variables can be captured."}], "answers": [{"comments": [{"owner": {"reputation": 486, "user_id": 7302586, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/add2c35e26541725f67515dbb8ccd67a?s=128&d=identicon&r=PG&f=1", "display_name": "szpanczyk", "link": "https://stackoverflow.com/users/7302586/szpanczyk"}, "edited": false, "score": 0, "creation_date": 1490478915, "post_id": 41195598, "comment_id": 73132163, "body": "I think they are also created by <code>throw</code>?"}, {"owner": {"reputation": 521, "user_id": 514514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bae5143216d0c560304a06da1a31739?s=128&d=identicon&r=PG", "display_name": "Cheshar", "link": "https://stackoverflow.com/users/514514/cheshar"}, "edited": false, "score": 0, "creation_date": 1589563092, "post_id": 41195598, "comment_id": 109353727, "body": "@Cubbi I&#39;m still confused. So in <code>struct Y { int m1; int&amp; m2; };</code> both m1 and m2 are not variables? If so, which part of  &quot;_ A variable is introduced by the declaration of a reference other than a non-static data member or of an object._&quot; covers this?"}, {"owner": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "reply_to_user": {"reputation": 521, "user_id": 514514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bae5143216d0c560304a06da1a31739?s=128&d=identicon&r=PG", "display_name": "Cheshar", "link": "https://stackoverflow.com/users/514514/cheshar"}, "edited": false, "score": 0, "creation_date": 1589564148, "post_id": 41195598, "comment_id": 109354260, "body": "@Cheshar the part &quot;other than a non-static data member&quot;"}, {"owner": {"reputation": 521, "user_id": 514514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bae5143216d0c560304a06da1a31739?s=128&d=identicon&r=PG", "display_name": "Cheshar", "link": "https://stackoverflow.com/users/514514/cheshar"}, "edited": false, "score": 0, "creation_date": 1589565888, "post_id": 41195598, "comment_id": 109355076, "body": "If that&#39;s the case then in your answer &#39;<i>So, reference data members are excluded explicitly, and to figure out the rest you need the definition of &quot;object&quot;</i>&#39; what is the &quot;<i>rest</i>&quot; that needs to be figured out then?"}, {"owner": {"reputation": 521, "user_id": 514514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bae5143216d0c560304a06da1a31739?s=128&d=identicon&r=PG", "display_name": "Cheshar", "link": "https://stackoverflow.com/users/514514/cheshar"}, "edited": false, "score": 0, "creation_date": 1589567595, "post_id": 41195598, "comment_id": 109355794, "body": "@Cubbi Because when you say &quot;<i>reference data members are excluded explicitly</i>&quot; while quoting 3[basic]/6 then I don&#39;t think <i>&quot;other than a non-static data member&quot;</i> covers the case of non-static non-reference data members. If that&#39;s the case, how do you conclude non-static, non-reference data members are not variables?"}, {"owner": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "reply_to_user": {"reputation": 521, "user_id": 514514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bae5143216d0c560304a06da1a31739?s=128&d=identicon&r=PG", "display_name": "Cheshar", "link": "https://stackoverflow.com/users/514514/cheshar"}, "edited": false, "score": 0, "creation_date": 1589578630, "post_id": 41195598, "comment_id": 109360379, "body": "@Cheshar let me rephrase slightly, in your case, m2 is not a variable by 3[basic]/6 as quoted &quot;declaration of a reference other than a non-static data member&quot;. To see why m1 is not a variable you combine the rest of that sentence (&quot;declaration of ... an object&quot;) with the other two quotes."}, {"owner": {"reputation": 521, "user_id": 514514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bae5143216d0c560304a06da1a31739?s=128&d=identicon&r=PG", "display_name": "Cheshar", "link": "https://stackoverflow.com/users/514514/cheshar"}, "edited": false, "score": 0, "creation_date": 1589619262, "post_id": 41195598, "comment_id": 109368878, "body": "@Cubbi But &quot;<i>A declaration is a definition unless ... it declares a <b>non-inline static data member</b> in a class definition</i>&quot; only talks about &quot;non-inline static data member&quot;. It doesn&#39;t say anything about &quot;non-static data member&quot;, which is what &quot;m1&quot; is. On the contrary, it leads me to infer that in <code>struct Y { int m1; int&amp; m2; static int m3; };</code> &quot;m3&quot; is not a variable unless it is defined outside the class. Which brings up an interesting point - is name &quot;m3&quot; inside the class any different from a definition of &quot;m3&quot; outside the class? So the question remains..."}, {"owner": {"reputation": 521, "user_id": 514514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bae5143216d0c560304a06da1a31739?s=128&d=identicon&r=PG", "display_name": "Cheshar", "link": "https://stackoverflow.com/users/514514/cheshar"}, "edited": false, "score": 0, "creation_date": 1589619319, "post_id": 41195598, "comment_id": 109368899, "body": "[cont.] ...how is it inferred that non-static data member is not a variable? What am I missing?"}, {"owner": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "reply_to_user": {"reputation": 521, "user_id": 514514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bae5143216d0c560304a06da1a31739?s=128&d=identicon&r=PG", "display_name": "Cheshar", "link": "https://stackoverflow.com/users/514514/cheshar"}, "edited": false, "score": 0, "creation_date": 1589623483, "post_id": 41195598, "comment_id": 109370143, "body": "@Cheshar OK, I see what you mean.  Will get back to this when I have a chance"}], "tags": [], "owner": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "is_accepted": true, "score": 3, "last_activity_date": 1481951930, "creation_date": 1481951930, "answer_id": 41195598, "question_id": 41148054, "link": "https://stackoverflow.com/questions/41148054/is-the-cppreference-definition-of-non-static-data-member-wrong/41195598#41195598", "title": "Is the cppreference definition of non-static data member wrong?", "body": "<blockquote>\n  <p>So their definition of non-static data member is wrong </p>\n</blockquote>\n\n<p>Yes, it was wrong to use the word \"variable\" in the introductory sentence of the data members page (and, as mentioned in the comment, it's a wiki, the discussion tabs on wiki pages get faster feedback).</p>\n\n<p>The current standard wording is <code>3[basic]/6</code> and :</p>\n\n<blockquote>\n  <p>A variable is introduced by the declaration of a reference other than a non-static data member or of an object. The variable\u2019s name, if any, denotes the reference or object.</p>\n</blockquote>\n\n<p>So, reference data members are excluded explicitly, and to figure out the rest you need the definition of \"object\" from <code>1.8[intro.object]/1</code></p>\n\n<blockquote>\n  <p>An object is created by a definition (3.1), by a new-expression (5.3.4), when implicitly changing the active member of a union (9.3), or when a temporary object is created (4.4, 12.2).</p>\n</blockquote>\n\n<p>And finally <code>3.1[basic.def]/2</code></p>\n\n<blockquote>\n  <p>A declaration is a definition unless ... it declares a non-inline static data member in a class definition (9.2, 9.2.3),</p>\n</blockquote>\n\n<p>Although it may seem like the distinction between variables and data members is impractical language-lawyerism, it is actually important when understanding compiler diagnostics, at least in this case:</p>\n\n<pre><code>struct X {\n    int m;\n    void f() { auto l = [m](){ return m; }; }\n};\n</code></pre>\n\n<p>gcc:</p>\n\n<pre><code>error: capture of non-variable 'X::m' \n</code></pre>\n\n<p>clang:</p>\n\n<pre><code>error: 'm' in capture list does not name a variable\n</code></pre>\n\n<p>icc:</p>\n\n<pre><code>error: member \"X::m\" is not a variable\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 7123797, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/74077c9243da6fd6216f9fd7f027e77e?s=128&d=identicon&r=PG&f=1", "display_name": "Rodvi", "link": "https://stackoverflow.com/users/7123797/rodvi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 891, "favorite_count": 0, "accepted_answer_id": 41195598, "answer_count": 1, "score": 5, "last_activity_date": 1564705069, "creation_date": 1481734466, "last_edit_date": 1564705069, "question_id": 41148054, "link": "https://stackoverflow.com/questions/41148054/is-the-cppreference-definition-of-non-static-data-member-wrong", "title": "Is the cppreference definition of non-static data member wrong?", "body": "<p>Definition from <a href=\"http://en.cppreference.com/w/cpp/language/data_members\" rel=\"nofollow noreferrer\">cppreference</a>: </p>\n\n<blockquote>\n  <p>Non-static data members are the variables that are declared in a member specification of a class. </p>\n</blockquote>\n\n<p>And they have the example:</p>\n\n<pre>\nclass S\n{\n   int& r;               // non-static data member of reference type\n};\n</pre>\n\n<p>But we know that non-static data member references are not variables because of the Standard:</p>\n\n<blockquote>\n  <p>\u00a73/6: A variable is introduced by the declaration of a reference other than a non-static data member or of an object.</p>\n</blockquote>\n\n<p>So is their definition of non-static data member wrong (they forgot about this exception)? Where I can find correct definition of the term \"non-static data member\"?</p>\n\n<p><em>Unfortunately I couldn't find a definition of non-static data member in the C++ Standard.</em></p>\n\n<p><strong>EDIT</strong>: From <a href=\"http://en.cppreference.com/w/cpp/language/object\" rel=\"nofollow noreferrer\">cppreference object definition</a> and discussion below we can conclude that non-static data members are not objects at all. And <a href=\"http://en.cppreference.com/w/cpp/language/data_members\" rel=\"nofollow noreferrer\">cppreference non-static member page</a> corrected the discussed definition at the moment.</p>\n"}, {"tags": ["c++", "mfc"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1481734357, "post_id": 41147945, "comment_id": 69498344, "body": "Run in a debugger to catch the crash in action, and locate where in your code it happens."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1481734493, "post_id": 41147945, "comment_id": 69498415, "body": "On an unrelated note, if the polygons are fixed and will never change, you should probably make <code>pt</code> a <code>static const</code> variable, and initialize it when you define the variable. The code will be shorter, and the compiler will emit the data so there&#39;s no run-time overhead from the initialization."}, {"owner": {"reputation": 657, "user_id": 4016002, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Banana Code", "link": "https://stackoverflow.com/users/4016002/banana-code"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1481734627, "post_id": 41147945, "comment_id": 69498502, "body": "Thanks for advice."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 5, "creation_date": 1481734646, "post_id": 41147945, "comment_id": 69498518, "body": "No error checking =&gt; kaboom.  Calling DeleteObject() to release the polygons is not optional, the OS pulls the plug after you created ten thousand of them."}, {"owner": {"reputation": 657, "user_id": 4016002, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Banana Code", "link": "https://stackoverflow.com/users/4016002/banana-code"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1481734854, "post_id": 41147945, "comment_id": 69498628, "body": "@Hans Passant Where should I call the <code>DeleteObject()</code>? It seems like those 5 polygons are all &quot;necessary&quot; at any time..."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1481735025, "post_id": 41147945, "comment_id": 69498735, "body": "They are no longer necessary after you no longer call PtInRegion().  Since you create them again when the mouse moves again."}, {"owner": {"reputation": 657, "user_id": 4016002, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Banana Code", "link": "https://stackoverflow.com/users/4016002/banana-code"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1481735272, "post_id": 41147945, "comment_id": 69498888, "body": "@Hans Passant I have done it your way, but it still caused the AV problem..."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1481735441, "post_id": 41147945, "comment_id": 69498989, "body": "If you&#39;re still having the same problem, edit the code in the question and show where you put the <code>DeleteObject</code>. @HansPassant is absolutely correct."}, {"owner": {"reputation": 657, "user_id": 4016002, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Banana Code", "link": "https://stackoverflow.com/users/4016002/banana-code"}, "edited": false, "score": 0, "creation_date": 1481735631, "post_id": 41147945, "comment_id": 69499107, "body": "I have edited the code just now."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 5, "creation_date": 1481735688, "post_id": 41147945, "comment_id": 69499146, "body": "No, your edit is wrong. <code>DeleteObject(hrgn)</code> would be used to delete a single region. You have an array of 5 regions. You have to call <code>DeleteObject</code> in a loop, each time deleting one of the 5 regions."}, {"owner": {"reputation": 657, "user_id": 4016002, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Banana Code", "link": "https://stackoverflow.com/users/4016002/banana-code"}, "edited": false, "score": 0, "creation_date": 1481735965, "post_id": 41147945, "comment_id": 69499319, "body": "Oh, I see... Thanks"}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 1, "creation_date": 1481737481, "post_id": 41147945, "comment_id": 69500178, "body": "Cody Gray is right.  Also, you should not be calling <code>DeleteObject(pt)</code>.  I can&#39;t believe that even compiled.  The points are just an array that lives on the stack.  They&#39;ll go out of scope automatically.  You need to call DeleteObject on HRGNs and most other handle-based GDI objects, but not on plain old classes/structs (like CPoint or POINT)."}, {"owner": {"reputation": 3651, "user_id": 383779, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/363c7fb07b9e121acdb8c40115b94e34?s=128&d=identicon&r=PG", "display_name": "sergiol", "link": "https://stackoverflow.com/users/383779/sergiol"}, "edited": false, "score": 3, "creation_date": 1481761108, "post_id": 41147945, "comment_id": 69510745, "body": "Run Task Manager and add the column &quot;GDI objects&quot;. Move the mouse in and out of your window. Look to the Task Manager and then you will understand why you need to <code>DeleteObject</code>. Free tip from me: Windows has a limit of 9999 GDI objects per running executable."}, {"owner": {"reputation": 3651, "user_id": 383779, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/363c7fb07b9e121acdb8c40115b94e34?s=128&d=identicon&r=PG", "display_name": "sergiol", "link": "https://stackoverflow.com/users/383779/sergiol"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1481761479, "post_id": 41147945, "comment_id": 69510849, "body": "In addition of @Someprogrammerdude&#39;s first comment: Put several tracepoints in your method; run the app in <b>Debug</b> configuration and look to the Output Window, and progressively narrow down to get what is the statement before bang happens."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1481809989, "post_id": 41147945, "comment_id": 69532032, "body": "As @AdrianMcCarthy points out, calling <code>DeleteObject</code> on the <code>CPoint</code> array is an error. If it compiles, it means, that you haven&#39;t defined the <code>STRICT</code> preprocessor symbol. It&#39;s job is to enable stricter type checking on USER/GDI handle types. If it isn&#39;t defined, all handles are treated as <code>void*</code>, and any pointer (including the array that decays into a pointer to its first element) can be implicitly converted to a <code>void*</code>. With that out of the way, you really shouldn&#39;t be using MFC. It requires that you know C++ and the Windows API. It looks like you are lacking in both departments."}], "owner": {"reputation": 657, "user_id": 4016002, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Banana Code", "link": "https://stackoverflow.com/users/4016002/banana-code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1481735588, "creation_date": 1481734171, "last_edit_date": 1481735588, "question_id": 41147945, "link": "https://stackoverflow.com/questions/41147945/why-does-it-cause-access-violation-when-moving-the-mouse-cursor-in-and-out-for-m", "title": "Why does it cause Access Violation when moving the mouse cursor in and out for many times?", "body": "<p>There are 5 polygonal areas in the window. If the user's mouse moves over one of the polygon, it shows the Message Box.</p>\n\n<p>The code is like below:</p>\n\n<pre><code>void OnMouseMove(UINT nFlags, CPoint point){\n    CPoint pt[5][6];\n\n    //The points of polygon0 \n    pt[0][0].x = 18;\n    pt[0][0].y = 639;\n    pt[0][1].x = -4;\n    pt[0][1].y = 688;\n    pt[0][2].x = 17;\n    pt[0][2].y = 707;\n    pt[0][3].x = 42;\n    pt[0][3].y = 683;\n    pt[0][4].x = 47;\n    pt[0][4].y = 637;\n    pt[0][5].x = 80;\n    pt[0][5].y = 638;\n\n    //The points of polygon1\n    pt[1][0].x = 47;\n    pt[1][0].y = 637;\n    pt[1][1].x = 42;\n    pt[1][1].y = 683;\n    pt[1][2].x = 17;\n    pt[1][2].y = 707;\n    pt[1][3].x = 56;\n    pt[1][3].y = 714;\n    pt[1][4].x = 89;\n    pt[1][4].y = 674;\n    pt[1][5].x = 80;\n    pt[1][5].y = 638;\n\n    //The points of polygon2\n    pt[2][0].x = 80;\n    pt[2][0].y = 638;\n    pt[2][1].x = 89;\n    pt[2][1].y = 674;\n    pt[2][2].x = 56;\n    pt[2][2].y = 714;\n    pt[2][3].x = 101;\n    pt[2][3].y = 713;\n    pt[2][4].x = 126;\n    pt[2][4].y = 675;\n    pt[2][5].x = 111;\n    pt[2][5].y = 637;\n\n    //The points of polygon3\n    pt[3][0].x = 111;\n    pt[3][0].y = 637;\n    pt[3][1].x = 126;\n    pt[3][1].y = 675;\n    pt[3][2].x = 101;\n    pt[3][2].y = 713;\n    pt[3][3].x = 143;\n    pt[3][3].y = 713;\n    pt[3][4].x = 166;\n    pt[3][4].y = 676;\n    pt[3][5].x = 166;\n    pt[3][5].y = 638;\n\n    //The points of polygon4\n    pt[4][0].x = 166;\n    pt[4][0].y = 638;\n    pt[4][1].x = 166;\n    pt[4][1].y = 676;\n    pt[4][2].x = 143;\n    pt[4][2].y = 713;\n    pt[4][3].x = 173;\n    pt[4][3].y = 713;\n    pt[4][4].x = 206;\n    pt[4][4].y = 679;\n    pt[4][5].x = 188;\n    pt[4][5].y = 638;\n\n    HRGN hrgn[5];\n    for(int i = 0; i &lt; 5; i++)\n        hrgn[i] = CreatePolygonRgn(pt[i], 6, ALTERNATE);\n\n    if(PtInRegion(hrgn[0], point.x, point.y)){\n        //Your mouse is moving over polygon0\n        MessageBox(L\"Your mouse is moving over polygon0\");\n    }else if(PtInRegion(hrgn[1], point.x, point.y)){\n        //Your mouse is moving over polygon1\n        MessageBox(L\"Your mouse is moving over polygon1\");\n    }else if(PtInRegion(hrgn[2], point.x, point.y)){\n        //Your mouse is moving over polygon2\n        MessageBox(L\"Your mouse is moving over polygon2\");\n    }else if(PtInRegion(hrgn[3], point.x, point.y)){\n        //Your mouse is moving over polygon3\n        MessageBox(L\"Your mouse is moving over polygon3\");\n    }else if(PtInRegion(hrgn[4], point.x, point.y)){\n        //Your mouse is moving over polygon4\n        MessageBox(L\"Your mouse is moving over polygon4\");\n    }else{\n        //Other events...\n    }\n\n    DeleteObject(pt);\n    DeleteObject(hrgn);\n}\n</code></pre>\n\n<p>It seems like there's no problem about the code. But if I try to move the mouse cursor in and out the polygons for many many times, it may cause an Access Violation problem (AV problem). So what causes the AV problem? Is there any better way to deal with it?</p>\n"}, {"tags": ["c++", "usb", "hid", "descriptor"], "answers": [{"tags": [], "owner": {"reputation": 25, "user_id": 1743733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db2f9372db944352362367599eb75c4?s=128&d=identicon&r=PG", "display_name": "Kyle B", "link": "https://stackoverflow.com/users/1743733/kyle-b"}, "is_accepted": false, "score": 1, "last_activity_date": 1481744054, "creation_date": 1481744054, "answer_id": 41150736, "question_id": 41147796, "link": "https://stackoverflow.com/questions/41147796/hid-gamepad-report-descriptor-issue/41150736#41150736", "title": "HID Gamepad Report Descriptor Issue", "body": "<p>Got the issue sorted out after having a simple realization. Just did a find in files of: usbHidReportDescriptor and found that there was a definition for length in the usbconfig.h file that I needed to adjust. Just posting this in case anyone has the same issue down the line!</p>\n"}], "owner": {"reputation": 25, "user_id": 1743733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db2f9372db944352362367599eb75c4?s=128&d=identicon&r=PG", "display_name": "Kyle B", "link": "https://stackoverflow.com/users/1743733/kyle-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1545, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481744054, "creation_date": 1481733786, "question_id": 41147796, "link": "https://stackoverflow.com/questions/41147796/hid-gamepad-report-descriptor-issue", "title": "HID Gamepad Report Descriptor Issue", "body": "<p>I am working on an adapter that takes two libraries and converts transmitter/controller input into HID input (through PPM, but I don't think that will matter for this post). I am using Arduino, but posting here because unless I am misunderstanding, my issue is in the HID Report Descriptor, not my Arduino code.</p>\n\n<p>I have a sample descriptor, that works if I use it, the working one is this:</p>\n\n<pre><code>PROGMEM const char usbHidReportDescriptor[36] = {\n0x05, 0x01,                    // USAGE_PAGE (Generic Desktop)\n0x09, 0x05,                    // USAGE (Game Pad)\n0xa1, 0x01,                    // COLLECTION (Application)\n0xa1, 0x00,                    //   COLLECTION (Physical)\n0x05, 0x01,                    //     USAGE_PAGE (Generic Desktop)\n0x09, 0x30,                    //     USAGE (X)\n0x09, 0x31,                    //     USAGE (Y)\n0x09, 0x32,                    //     USAGE (Z) rx\n0x09, 0x35,                    //     USAGE (Rx) ry\n0x35, 0x00,                    //     PHYSICAL_MINIMUM (0)\n0x46, 0xff, 0x00,              //     PHYSICAL_MAXIMUM (255)\n0x15, 0x00,                    //     LOGICAL_MINIMUM (-127)\n0x26, 0xff, 0x00,                    //     LOGICAL_MAXIMUM (127)\n0x75, 0x08,                    //     REPORT_SIZE (8)\n0x95, 0x04,                    //     REPORT_COUNT (4)\n0x81, 0x02,                    //     INPUT (Data,Var,Abs)\n0xc0,                          //   END_COLLECTION\n0xc0                           // END_COLLECTION\n};\n</code></pre>\n\n<p>The first sample only has the sticks, no buttons so I tried to create a descriptor that has buttons. The profile I generated with the HID Descriptor Tool is this:</p>\n\n<pre><code> PROGMEM const char usbHidReportDescriptor[46] = {\n  0x05, 0x01,                   //USAGE_PAGE (Generic Desktop)\n  0x09, 0x05,                   //USAGE (Game Pad)\n  0xa1, 0x01,                   //COLLECTION (APPLICATION)\n  0xa1, 0x00,                    //   COLLECTION (Physical)\n  0x05, 0x09,                   //USAGE_PAGE (Button)\n  0x19, 0x01,                   //USAGE_MINIMUM (Button1)\n  0x29, 0x10,                   //USAGE_MAXIMUM (Button 16)\n  0x15, 0x00,                   //LOGICAL_MINIMUM (0)\n  0x25, 0x01,                   //LOGICAL_MAXIMUM(1)\n  0x95, 0x10,                   //REPORT_COUNT (16)\n  0x75, 0x01,                   //REPORT_SIZE (1)\n  0x81, 0x02,                   //INPUT(Data, Var, Abs)\n  0x05, 0x01,                   //USAGE_PAGE (Generic Desktop)\n  0x09, 0x30,                   //USAGE (X)\n  0x09, 0x31,                   //USAGE (Y)\n  0x09, 0x32,                   //USAGE (Z)\n  0x09, 0x33,                   //USAGE (Rx)\n  0x15, 0x81,                   //LOGICAL_MINIMUM(-127)\n  0x25, 0x7f,                   //LOGICAL_MAXIMUM(127)\n  0x75, 0x08,                   //REPORT_SIZE(8)\n  0x95, 0x04,                   //REPORT_COUNT(4)\n  0x81, 0x02,                   //INPUT(Data,Var,Abs)\n  0xc0,                     //END_Collection\n  0xc0                      //END_Collection\n\n\n};\n</code></pre>\n\n<p>When I compile it, I do not get errors, but after uploading to the device I get the \"This device cannot start. (Code 10)\" message in the device profile. This is currently the only thing I'm changing in testing that causes this issue.</p>\n\n<p>If you still feel this would be better asked in the Arduino section I can post there, but I think this is more something I'm doing wrong with the descriptor.</p>\n\n<p>I really appreciate anyone's time and assistance! Please let me know if there is more information that would be helpful to post.</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1481733692, "post_id": 41147728, "comment_id": 69497907, "body": "You solve it by using <code>std::vector</code> instead."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1481733760, "post_id": 41147728, "comment_id": 69497948, "body": "<i>&quot; I did asign a value to _size on the constructor.&quot;</i> That&#39;s too late in that case."}], "answers": [{"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1481733862, "post_id": 41147797, "comment_id": 69498019, "body": "Indeed, but please manage your memory properly..."}, {"owner": {"reputation": 8564, "user_id": 1043352, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f336066e4f8700aa439943ee4f5ffbd9?s=128&d=identicon&r=PG", "display_name": "Jakub Zaverka", "link": "https://stackoverflow.com/users/1043352/jakub-zaverka"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1481734130, "post_id": 41147797, "comment_id": 69498190, "body": "@Quentin thanks, it was work in progress"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1481734222, "post_id": 41147797, "comment_id": 69498273, "body": "Manual memory management is really nothing I would recommend, other as an exercise to learning pointers. After that it should be avoided except if needed for polymorphism. Also, your code won&#39;t compile."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1481734637, "post_id": 41147797, "comment_id": 69498512, "body": "<code>new</code> and <code>delete</code> were okay ten years ago. They should <i>not</i> be used at all in any code written now (except under very specific ownership semantics requirements, which a plain dynamic array does not have)."}, {"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1481734833, "post_id": 41147797, "comment_id": 69498612, "body": "@Someprogrammerdude In a performance-critical application, manual memory management is a requirement. Allocations are one of the most expensive operations. (Not super-germane to the question at hand, but I feel it&#39;s worth noting.)"}, {"owner": {"reputation": 41213, "user_id": 215568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b05685e6c3945f4bd23bf1f967861aeb?s=128&d=identicon&r=PG", "display_name": "Donnie", "link": "https://stackoverflow.com/users/215568/donnie"}, "edited": false, "score": 0, "creation_date": 1481738848, "post_id": 41147797, "comment_id": 69500859, "body": "Nevermind that you need <code>new</code> to construct a <code>shared_ptr</code>.  (I understand what you were trying to say, but definate statements such as &quot;NEVER USE XX&quot; always leave out the important use cases, which still exist, and always will.  Better is &quot;Don&#39;t use X without excellent reason.&quot;)"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 41213, "user_id": 215568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b05685e6c3945f4bd23bf1f967861aeb?s=128&d=identicon&r=PG", "display_name": "Donnie", "link": "https://stackoverflow.com/users/215568/donnie"}, "edited": false, "score": 0, "creation_date": 1481789242, "post_id": 41147797, "comment_id": 69519496, "body": "@Donnie (not sure if that was for me) you don&#39;t need <code>new</code> to construct a <code>shared_ptr</code>, you have <code>make_shared</code> and <code>make_unique</code>, depending on whether you want to fuse the allocation or not."}], "tags": [], "owner": {"reputation": 8564, "user_id": 1043352, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f336066e4f8700aa439943ee4f5ffbd9?s=128&d=identicon&r=PG", "display_name": "Jakub Zaverka", "link": "https://stackoverflow.com/users/1043352/jakub-zaverka"}, "is_accepted": false, "score": -2, "last_activity_date": 1481734279, "last_edit_date": 1481734279, "creation_date": 1481733788, "answer_id": 41147797, "question_id": 41147728, "link": "https://stackoverflow.com/questions/41147728/how-to-create-a-private-2d-array-using-private-variables-as-length-in-c/41147797#41147797", "title": "How to create a private 2d-array using private variables as length in c++", "body": "<p>You need to allocate dynamic-size memory dynamically, but do not forget to delete it in the destructor and consider overloading your assignment operator and copy constructor (see <a href=\"https://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29\" rel=\"nofollow noreferrer\">rule of three</a>):</p>\n\n<pre><code>#ifndef BOARD_H\n#define BOARD_H\n\n\nclass Board\n{\n    public:\n        Board(int size){\n           _size = size;\n           _board = new char*[size];\n           for(int i =0; i &lt; size; i++) \n              _board[i] = new char[size];\n        }\n\n        ~Board(){\n           for(int i =0; i &lt; _size; i++) \n              delete[] _board[i];\n           delete[] _board;\n        }\n\n        Board(const Board &amp;other){\n          //deep or shallow copy?\n        }\n\n        operator=(const Board&amp; other){\n          //copy or move?\n        }\n\n        void printBoard();\n\n    private:\n        int _size;\n\n        char **_board;\n};\n\n#endif // BOARD_H\n</code></pre>\n\n<p>But if you do not have to use raw memory, consider using a vector of vectors, which will take care of the memory management for you:</p>\n\n<pre><code>class Board\n{\n    public:\n        Board(int size);\n\n        void printBoard();\n\n    private:\n        int _size;\n\n        std::vector&lt;std::vector&lt;char&gt; &gt; _board;\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1813, "user_id": 2449857, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jxnCm.jpg?s=128&g=1", "display_name": "Jack Deeth", "link": "https://stackoverflow.com/users/2449857/jack-deeth"}, "is_accepted": false, "score": 1, "last_activity_date": 1481738059, "last_edit_date": 1481738059, "creation_date": 1481736375, "answer_id": 41148617, "question_id": 41147728, "link": "https://stackoverflow.com/questions/41147728/how-to-create-a-private-2d-array-using-private-variables-as-length-in-c/41148617#41148617", "title": "How to create a private 2d-array using private variables as length in c++", "body": "<p>If you don't know how big the board will be at compile-time, you should use a dynamic container to contain the board data. 99% of the time, this will be <code>std::vector</code>.</p>\n\n<pre><code>class Board\n{\n    public:\n        Board(size_t size); // better to use size_t than int for container sizes\n        void print(); \n        size_t width() { return _board.size(); }\n\n    private:\n        std::vector&lt;std::vector&lt;char&gt;&gt; _board;\n};\n\n// This is not completely intuitive: to set up the board, we fill it with *s* rows (vectors) each made of *s* hyphens\nBoard::Board(size_t size) : \n                        _board(size, std::vector&lt;char&gt;(size, '-'))\n                        {}\n</code></pre>\n\n<hr>\n\n<p>You can (and should!) use <strong>ranged-based for</strong> loops to show the output. This will work on vectors or built-in arrays. Defining a function of a templated class outside the class body uses this syntax:</p>\n\n<pre><code>void Board::print() { // Board::printBoard is a bit redundant, don't you think? ;)\n  for (const auto &amp;row : _board) {    // for every row on the board,\n    for (const auto &amp;square : row) {  // for every square in the row,\n      std::cout &lt;&lt; square &lt;&lt; \" \";     // print that square and a space\n    }\n    std::cout &lt;&lt; std::endl;           // at the end of each row, print a newline\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7297716, "user_type": "registered", "profile_image": "https://graph.facebook.com/1172034536236688/picture?type=large", "display_name": "Juan David Bola&#241;os Rojas", "link": "https://stackoverflow.com/users/7297716/juan-david-bola%c3%b1os-rojas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "closed_date": 1481759406, "answer_count": 2, "score": 0, "last_activity_date": 1481738059, "creation_date": 1481733607, "question_id": 41147728, "link": "https://stackoverflow.com/questions/41147728/how-to-create-a-private-2d-array-using-private-variables-as-length-in-c", "closed_reason": "Duplicate", "title": "How to create a private 2d-array using private variables as length in c++", "body": "<p>first of all, I'm quite new to OOP so please bear with me...</p>\n\n<p>I'm currently trying to create a Tic-Tac Toe terminal game in c++, for this, I'm trying to use a private <code>int _size</code> to create a 2d-array called <code>char _board[_size][_size]</code>, but I find an error, which I don't quite understand. I did asign a value to <code>_size</code> on the constructor.</p>\n\n<blockquote>\n  <p>Invalid use of non-static data member 'Board::_size' </p>\n</blockquote>\n\n<p>Board.h: </p>\n\n<pre><code>#ifndef BOARD_H\n#define BOARD_H\n\n\nclass Board\n{\n    public:\n        Board(int size);\n\n        void printBoard();\n\n    private:\n        int _size;\n\n        char _board[_size][_size];\n};\n\n#endif // BOARD_H\n</code></pre>\n\n<p>So, how can I solve this error, or how do you recommend I approach this problem?</p>\n"}, {"tags": ["c++", "arduino", "bluetooth-lowenergy"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1481733809, "post_id": 41147718, "comment_id": 69497982, "body": "Try to simplify the code, part by part, until it doesn&#39;t &quot;freeze&quot; anymore. Then you have hopefully been able to pinpoint what part of the code causes the freezing, and should be able to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> to show us, if you still can&#39;t figure it out yourself."}, {"owner": {"reputation": 11, "user_id": 5197878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/889c3b2b597e1244572671abfbb14c28?s=128&d=identicon&r=PG&f=1", "display_name": "lorenzoneneglistadi", "link": "https://stackoverflow.com/users/5197878/lorenzoneneglistadi"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1481734066, "post_id": 41147718, "comment_id": 69498147, "body": "I simplified my code now"}, {"owner": {"reputation": 504, "user_id": 6175121, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6_7zEEoqzHI/AAAAAAAAAAI/AAAAAAAAAMo/pSnvmK-6EoA/photo.jpg?sz=128", "display_name": "Mikes3ds", "link": "https://stackoverflow.com/users/6175121/mikes3ds"}, "edited": false, "score": 1, "creation_date": 1481734361, "post_id": 41147718, "comment_id": 69498347, "body": "Sounds like a wire problem. Maybe something coming lose..."}], "owner": {"reputation": 11, "user_id": 5197878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/889c3b2b597e1244572671abfbb14c28?s=128&d=identicon&r=PG&f=1", "display_name": "lorenzoneneglistadi", "link": "https://stackoverflow.com/users/5197878/lorenzoneneglistadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1481734630, "creation_date": 1481733578, "last_edit_date": 1481734630, "question_id": 41147718, "link": "https://stackoverflow.com/questions/41147718/arduino101-freezes-when-shaking-it", "title": "Arduino101 &#39;freezes&#39; when shaking it", "body": "<p>i'm seeing a randomly strange behaviour of the Arduino101. If I don't move the board everything works fine, but when I start shaking and moving constantly the board it randomly gets stuck. This means that you can not see anymore the BLE Arduino device when scanning, and the only way to work again with it it's to restart the board. When facing this issue, the power on the arduino is still ok. Again I repeat, it seems something related with shaking the board for a while.</p>\n\n<p>Here's my sketch, hoping that you can help me understand the possible reasons for that (maybe some problem about performance or the way I handle interrupts).</p>\n\n<pre><code>#include \"CurieIMU.h\"\n#include \"CurieBLE.h\"\n#include &lt;stdio.h&gt;      /* puts, printf */\n\nbool motion;\nint aix, aiy, aiz;    // raw accelerometer values\nint gix, giy, giz;    // raw gyro values\n\nBLEPeripheral blePeripheral;\nBLEService sensorService(\"19B10010-E8F2-537E-4F6C-D104768A1214\");\nBLEUnsignedLongCharacteristic stepCharacteristic(\"19B10011-E8F2-537E-4F6C-D104768A1214\", BLERead);  // stepcount\nBLEFloatCharacteristic axCharacteristic(\"19B10012-E8F2-537E-4F6C-D104768A1214\", BLERead | BLENotify); // acc.in x in g\nBLEFloatCharacteristic ayCharacteristic(\"19B10013-E8F2-537E-4F6C-D104768A1214\", BLERead | BLENotify); // acc.in y in g\nBLEFloatCharacteristic azCharacteristic(\"19B10014-E8F2-537E-4F6C-D104768A1214\", BLERead | BLENotify); // acc.in z in g\nBLEFloatCharacteristic gxCharacteristic(\"19B10015-E8F2-537E-4F6C-D104768A1214\", BLERead | BLENotify); // rot.in x in deg/s\nBLEFloatCharacteristic gyCharacteristic(\"19B10016-E8F2-537E-4F6C-D104768A1214\", BLERead | BLENotify); // rot.in y in deg/s\nBLEFloatCharacteristic gzCharacteristic(\"19B10017-E8F2-537E-4F6C-D104768A1214\", BLERead | BLENotify); // rot.in z in deg/s\nBLEIntCharacteristic shockCharacteristic(\"19B10018-E8F2-537E-4F6C-D104768A1214\", BLERead | BLENotify);  // true if shock sensed\nBLEIntCharacteristic modeCharacteristic(\"19B10019-E8F2-537E-4F6C-D104768A1214\", BLERead | BLEWrite);  // sensing mode\nBLEIntCharacteristic srangeCharacteristic(\"19B10020-E8F2-537E-4F6C-D104768A1214\", BLERead | BLEWrite);  // shock range\nBLEIntCharacteristic arangeCharacteristic(\"19B10021-E8F2-537E-4F6C-D104768A1214\", BLERead | BLEWrite);  // acc. range\nBLEIntCharacteristic grangeCharacteristic(\"19B100122-E8F2-537E-4F6C-D104768A1214\", BLERead | BLEWrite); // gyro range\nBLEIntCharacteristic calibCharacteristic(\"19B100123-E8F2-537E-4F6C-D104768A1214\", BLERead | BLEWrite);  // 1 if calibration is on, otherwise 0\n\n\nvoid setup()\n{\n\n    CurieIMU.begin();\n    blePeripheral.setLocalName(\"MOOVBIT\");\n    blePeripheral.setAdvertisedServiceUuid(sensorService.uuid());\n    blePeripheral.addAttribute(sensorService);\n    blePeripheral.addAttribute(stepCharacteristic);\n    blePeripheral.addAttribute(axCharacteristic);\n    blePeripheral.addAttribute(ayCharacteristic);\n    blePeripheral.addAttribute(azCharacteristic);\n    blePeripheral.addAttribute(gxCharacteristic);\n    blePeripheral.addAttribute(gyCharacteristic);\n    blePeripheral.addAttribute(gzCharacteristic);\n    blePeripheral.addAttribute(shockCharacteristic);\n    blePeripheral.addAttribute(modeCharacteristic);\n    blePeripheral.addAttribute(arangeCharacteristic);\n    blePeripheral.addAttribute(srangeCharacteristic);\n    blePeripheral.addAttribute(grangeCharacteristic);\n    blePeripheral.addAttribute(calibCharacteristic);\n    // set initial characteristics values\n    stepCharacteristic.setValue(0);\n    shockCharacteristic.setValue(0);\n    modeCharacteristic.setValue(0);\n    arangeCharacteristic.setValue(4);\n    srangeCharacteristic.setValue(4);\n    grangeCharacteristic.setValue(250);\n    calibCharacteristic.setValue(1);\n    initPeriph();\n\n    CurieIMU.setAccelerometerRange(arangeCharacteristic.value());\n    CurieIMU.setGyroRange(grangeCharacteristic.value());\n    CurieIMU.setStepDetectionMode(CURIE_IMU_STEP_MODE_SENSITIVE);\n    CurieIMU.setStepCountEnabled(true);\n\n    CurieIMU.setDetectionThreshold(CURIE_IMU_SHOCK, srangeCharacteristic.value() * 500); // 1g = 1000 mg\n    CurieIMU.setDetectionDuration(CURIE_IMU_SHOCK, 50); // 50ms or 75ms\n    CurieIMU.interrupts(CURIE_IMU_SHOCK);\n    CurieIMU.interrupts(CURIE_IMU_MOTION);\n    CurieIMU.attachInterrupt(eventCallback);\n    motion = false;\n\n}\n\nvoid loop()\n{\n    if (motion) {\n        if (!axCharacteristic.setValue(convertRawAcceleration(aix)) || !ayCharacteristic.setValue(convertRawAcceleration(aiy)) ||\n            !azCharacteristic.setValue(convertRawAcceleration(aiz)) || !gxCharacteristic.setValue(convertRawGyro(gix)) ||\n            !gyCharacteristic.setValue(convertRawGyro(giy)) || !gzCharacteristic.setValue(convertRawGyro(giz))) {\n            //Serial.println(\"Erorr BLE\");\n        }\n        stepCharacteristic.setValue(CurieIMU.getStepCount());\n        motion = false;\n    }\n    delay(2000);\n    shockCharacteristic.setValue(0);\n}\n\nvoid eventCallback() {\n    if (CurieIMU.getInterruptStatus(CURIE_IMU_SHOCK)) {\n        if (shockCharacteristic.value() == 0) {\n            //Serial.println(\"Shock sensed\");\n            shockCharacteristic.setValue(1);\n        }\n        //CurieIMU.readMotionSensor(aix, aiy, aiz, gix, giy, giz);\n        //motion = true;\n    }\n    else if (CurieIMU.getInterruptStatus(CURIE_IMU_MOTION)) {\n        CurieIMU.readMotionSensor(aix, aiy, aiz, gix, giy, giz);\n        motion = true;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "image-resizing"], "answers": [{"comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1481738022, "post_id": 41148555, "comment_id": 69500455, "body": "After a little evaluation, I found that your approach is sensibly faster on bigger images, at least on my pc ;D. This is due to my <code>kron</code> function not being optimized."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1481739077, "post_id": 41148555, "comment_id": 69500978, "body": "@Miki Just running some small benchmarks, and came to the same conclusion. However, if we reduce your code for just the resizing purpose, we basically get to a simple loop, which is marginally faster than my approach."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1481754798, "post_id": 41148555, "comment_id": 69508711, "body": "@Miki Thanks :) I&#39;m also thinking that the last version might get auto-vectorized by some compilers if we add <code>D[x * 2 + 1] = 0;</code> there. Just a hunch tho, don&#39;t have an env to test it on."}], "tags": [], "owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "is_accepted": false, "score": 7, "last_activity_date": 1481743830, "last_edit_date": 1481743830, "creation_date": 1481736135, "answer_id": 41148555, "question_id": 41147706, "link": "https://stackoverflow.com/questions/41147706/how-to-resize-without-interpolation-zero-padding-in-opencv/41148555#41148555", "title": "How to resize without interpolation (zero-padding) in OpenCV?", "body": "<p>One option that comes to mind would be to use <code>cv::resize</code> with <code>INTER_NEAREST</code> and then mask out the unwanted pixels.</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>#include &lt;opencv2/opencv.hpp&gt;\n\n#include &lt;cstdint&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    cv::Mat m1((cv::Mat_&lt;uint8_t&gt;(3, 3) &lt;&lt; 1, 2, 3, 4, 5, 6, 7, 8, 9));\n    std::cout &lt;&lt; \"Input:\\n\" &lt;&lt; m1 &lt;&lt; \"\\n\\n\";\n\n    cv::Mat mask((cv::Mat_&lt;uint8_t&gt;(2, 2) &lt;&lt; 255, 0, 0, 0));\n    mask = cv::repeat(mask, m1.rows, m1.cols);\n    std::cout &lt;&lt; \"Mask:\\n\" &lt;&lt; mask &lt;&lt; \"\\n\\n\";\n\n    cv::Mat m2;\n    cv::resize(m1, m2, cv::Size(), 2, 2, cv::INTER_NEAREST);\n    std::cout &lt;&lt; \"Resized:\\n\" &lt;&lt; m2 &lt;&lt; \"\\n\\n\";\n\n    cv::bitwise_and(m2, mask, m2);\n    std::cout &lt;&lt; \"Masked:\\n\" &lt;&lt; m2 &lt;&lt; \"\\n\\n\";\n}\n</code></pre>\n\n<p><strong>Console output:</strong></p>\n\n<pre><code>Input:\n[  1,   2,   3;\n   4,   5,   6;\n   7,   8,   9]\n\nMask:\n[255,   0, 255,   0, 255,   0;\n   0,   0,   0,   0,   0,   0;\n 255,   0, 255,   0, 255,   0;\n   0,   0,   0,   0,   0,   0;\n 255,   0, 255,   0, 255,   0;\n   0,   0,   0,   0,   0,   0]\n\nResized:\n[  1,   1,   2,   2,   3,   3;\n   1,   1,   2,   2,   3,   3;\n   4,   4,   5,   5,   6,   6;\n   4,   4,   5,   5,   6,   6;\n   7,   7,   8,   8,   9,   9;\n   7,   7,   8,   8,   9,   9]\n\nMasked:\n[  1,   0,   2,   0,   3,   0;\n   0,   0,   0,   0,   0,   0;\n   4,   0,   5,   0,   6,   0;\n   0,   0,   0,   0,   0,   0;\n   7,   0,   8,   0,   9,   0;\n   0,   0,   0,   0,   0,   0]\n</code></pre>\n\n<hr>\n\n<h2>Update</h2>\n\n<p>If we eliminate parts of Miki's code that are unnecessary for our specific scenario, we pretty much reduce it to a simple loop.</p>\n\n<p>Doing some quick comparisons, this turns out to be somewhat faster.</p>\n\n<pre><code>#include &lt;opencv2/opencv.hpp&gt;\n\n#include &lt;chrono&gt;\n#include &lt;cstdint&gt;\n#include &lt;iostream&gt;\n\ncv::Mat resize_1(cv::Mat image)\n{\n    cv::Mat result(cv::Mat::zeros(image.rows * 2, image.cols * 2, CV_8UC1));\n\n    for (int ra(0); ra &lt; image.rows; ++ra) {\n        for (int ca = 0; ca &lt; image.cols; ++ca) {\n            result.at&lt;uint8_t&gt;(ra * 2, ca * 2) = image.at&lt;uint8_t&gt;(ra, ca);\n        }\n    }\n\n    return result;\n}\n\ncv::Mat resize_2(cv::Mat image)\n{\n    cv::Mat mask((cv::Mat_&lt;uint8_t&gt;(2, 2) &lt;&lt; 255, 0, 0, 0));\n    mask = cv::repeat(mask, image.rows, image.cols);\n\n    cv::Mat result;\n    cv::resize(image, result, cv::Size(), 2, 2, cv::INTER_NEAREST);\n    cv::bitwise_and(result, mask, result);\n\n    return result;\n}\n\ntemplate&lt;typename T&gt;\nvoid timeit(T f)\n{\n    using std::chrono::high_resolution_clock;\n    using std::chrono::duration_cast;\n    using std::chrono::microseconds;\n\n    cv::Mat m1((cv::Mat_&lt;uint8_t&gt;(3, 3) &lt;&lt; 1, 2, 3, 4, 5, 6, 7, 8, 9));\n    m1 = cv::repeat(m1, 1024, 1024);\n\n    high_resolution_clock::time_point t1 = high_resolution_clock::now();\n    for (uint32_t i(0); i &lt; 256; ++i) {\n        cv::Mat result = f(m1);\n    }\n    high_resolution_clock::time_point t2 = high_resolution_clock::now();\n\n    auto duration = duration_cast&lt;microseconds&gt;(t2 - t1).count();\n    double t_ms(static_cast&lt;double&gt;(duration) / 1000.0);\n    std::cout\n        &lt;&lt; \"Total = \" &lt;&lt; t_ms &lt;&lt; \" ms\\n\"\n        &lt;&lt; \"Iteration = \" &lt;&lt; (t_ms / 256) &lt;&lt; \" ms\\n\"\n        &lt;&lt; \"FPS = \" &lt;&lt; (256 / t_ms * 1000.0) &lt;&lt; \"\\n\";\n}\n\nint main()\n{\n    timeit(&amp;resize_1);\n    timeit(&amp;resize_2);\n}\n</code></pre>\n\n<p><strong>Timing:</strong></p>\n\n<p><code>resize_1</code></p>\n\n<pre><code>Total = 6344.86 ms\nIteration = 24.7846 ms\nFPS = 40.3476\n</code></pre>\n\n<p><code>resize_2</code></p>\n\n<pre><code>Total = 7271.31 ms\nIteration = 28.4036 ms\nFPS = 35.2068\n</code></pre>\n\n<h2>Update 2</h2>\n\n<p>Parallelized version:</p>\n\n<pre><code>class ResizeInvoker : public cv::ParallelLoopBody\n{\npublic:\n    ResizeInvoker(cv::Mat const&amp; src, cv::Mat&amp; dst)\n        : image(src)\n        , result(dst)\n    {\n    }\n\n    void operator()(const cv::Range&amp; range) const\n    {\n        for (int y(range.start); y &lt; (range.end); ++y) {\n            for (int x(0); x &lt; image.cols; ++x) {\n                result.at&lt;uint8_t&gt;(y * 2, x * 2) = image.at&lt;uint8_t&gt;(y, x);\n            }\n        }\n    }\n\n    cv::Mat const&amp; image;\n    cv::Mat&amp; result;\n};\n\ncv::Mat resize_3(cv::Mat image)\n{\n    cv::Mat result(cv::Mat::zeros(image.rows * 2, image.cols * 2, CV_8UC1));\n\n    ResizeInvoker loop_body(image, result);\n    cv::parallel_for_(cv::Range(0, image.rows)\n        , loop_body\n        , result.total() / (double)(1 &lt;&lt; 16));\n\n    return result;\n}\n</code></pre>\n\n<p><strong>Timing:</strong></p>\n\n<p><code>resize_3</code></p>\n\n<pre><code>Total = 3876.63 ms\nIteration = 15.1431 ms\nFPS = 66.0367\n</code></pre>\n\n<h2>Update 3</h2>\n\n<p>We can do a little better if we use raw pointers in the invoker:</p>\n\n<pre><code>void operator()(const cv::Range&amp; range) const\n{\n    for (int y(range.start); y &lt; (range.end); ++y) {\n        uint8_t* D = result.data + result.step * y * 2;\n        uint8_t const* S = image.data + image.step * y;\n        for (int x(0); x &lt; image.cols; ++x) {\n            D[x * 2] = S[x];\n        }\n    }\n}\n</code></pre>\n\n<p>Timing:</p>\n\n<pre><code>Total = 3387.87 ms\nIteration = 13.2339 ms\nFPS = 75.5636\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "is_accepted": false, "score": 1, "last_activity_date": 1481738418, "last_edit_date": 1495540824, "creation_date": 1481737004, "answer_id": 41148778, "question_id": 41147706, "link": "https://stackoverflow.com/questions/41147706/how-to-resize-without-interpolation-zero-padding-in-opencv/41148778#41148778", "title": "How to resize without interpolation (zero-padding) in OpenCV?", "body": "<p>You can use the <a href=\"https://en.wikipedia.org/wiki/Kronecker_product\" rel=\"nofollow noreferrer\">Kronecker product</a> of your image and a pattern like:</p>\n\n<pre><code>1, 0\n0, 0\n</code></pre>\n\n<p>The result is:</p>\n\n<pre><code>Input:\n[1, 2, 3;\n 4, 5, 6;\n 7, 8, 9]\n\nOutput:\n[1, 0, 2, 0, 3, 0;\n 0, 0, 0, 0, 0, 0;\n 4, 0, 5, 0, 6, 0;\n 0, 0, 0, 0, 0, 0;\n 7, 0, 8, 0, 9, 0;\n 0, 0, 0, 0, 0, 0]\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;opencv2/opencv.hpp&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\nusing namespace cv;\n\nMat1b kron(const Mat1b&amp; A, const Mat1b&amp; B)\n{\n    Mat1b K(A.rows * B.rows, A.cols * B.cols, uchar(0));\n    for (int ra = 0; ra &lt; A.rows; ++ra)\n    {\n        for (int ca = 0; ca &lt; A.cols; ++ca)\n        {\n            K(Range(ra*B.rows, (ra + 1)*B.rows), Range(ca*B.cols, (ca + 1)*B.cols)) = B.mul(A(ra, ca));\n        }\n    }\n    return K;\n}\n\nint main()\n{\n    Mat1b img = (Mat1b(3, 3) &lt;&lt; 1, 2, 3, 4, 5, 6, 7, 8, 9);\n    std::cout &lt;&lt; \"Input:\\n\" &lt;&lt; img &lt;&lt; \"\\n\\n\";\n\n    // Define the pattern\n    Mat1b pattern = (Mat1b(2, 2) &lt;&lt; 1, 0, \n                                    0, 0);\n\n    Mat1b out = kron(img, pattern);\n    std::cout &lt;&lt; \"Output:\\n\" &lt;&lt; out &lt;&lt; \"\\n\\n\";\n\n    return 0;\n}\n</code></pre>\n\n<p>OpenCV doesn't have the Kronecker product implemented, so you need to write a custom function. For a more general implementation that works with all data types (1 channel) have a look <a href=\"https://stackoverflow.com/a/36586893/5008845\">here</a>.</p>\n\n<hr>\n\n<p>I found that <a href=\"https://stackoverflow.com/a/41148555/5008845\">@Dan Masek</a> approach is faster. This is because my <code>kron</code> implementation is not optimized. I expect this approach to work pretty well with a good implementation.</p>\n"}, {"tags": [], "owner": {"reputation": 9602, "user_id": 2571705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e9b0015a3abdccadd4ed3dd2e6c69bf?s=128&d=identicon&r=PG", "display_name": "dhanushka", "link": "https://stackoverflow.com/users/2571705/dhanushka"}, "is_accepted": false, "score": 0, "last_activity_date": 1481768643, "last_edit_date": 1481768643, "creation_date": 1481768193, "answer_id": 41155345, "question_id": 41147706, "link": "https://stackoverflow.com/questions/41147706/how-to-resize-without-interpolation-zero-padding-in-opencv/41155345#41155345", "title": "How to resize without interpolation (zero-padding) in OpenCV?", "body": "<p>Thought of sharing the following approach as it is a bit different. I don't know how efficient this would be compared to other methods. At least you can use opencv calls without any looping and easily use arbitrary scale factors for x and y.</p>\n\n<p>First convert your image to floating point type, then scale it using <code>warpAffine</code> (use linear interpolation). Resize the same image using nearest-neighbor method. Compare the two resulting images element-wise to get a mask. Use this mask to copy the relevant elements from any of the result images.</p>\n\n<p>Here's the code and some results I get:</p>\n\n<pre><code>uchar data[] = { 1, 2, 3, 4, 5, 6, 7, 8, 9 };\nMat im(3, 3, CV_8U, data);\nim.convertTo(im, CV_32F);\n// x and y scale\nint xscale = 2, yscale = 2;\nSize size(im.cols * xscale, im.rows * yscale);\nfloat tr[] = {xscale, 0, 0, 0, yscale, 0};\nMat m(2, 3, CV_32F, tr);    // transformation matrix\n\nMat resized1, resized2;\nwarpAffine(im, resized1, m, size);  // affine scaling with linear interpolation\nresize(im, resized2, size, 0, 0, INTER_NEAREST);    // resize with nearest neighbor\n// get the mask\nMat resized = resized1 == resized2;\n// copy the pixels\nresized1.copyTo(resized, resized);\n\ncout &lt;&lt; \"image:\\n\" &lt;&lt; im &lt;&lt; endl;\ncout &lt;&lt; \"M:\\n\" &lt;&lt; m &lt;&lt; endl;\ncout &lt;&lt; \"affine(scaled):\\n\" &lt;&lt; resized1 &lt;&lt; endl;\ncout &lt;&lt; \"resized:\\n\" &lt;&lt; resized2 &lt;&lt; endl;\ncout &lt;&lt; \"mask:\\n\" &lt;&lt; resized &lt;&lt; endl;\ncout &lt;&lt; \"output:\\n\" &lt;&lt; resized &lt;&lt; endl;\n</code></pre>\n\n<p>For xscale = 2, yscale = 2</p>\n\n<pre><code>image:\n[1, 2, 3;\n  4, 5, 6;\n  7, 8, 9]\nM:\n[2, 0, 0;\n  0, 2, 0]\naffine(scaled):\n[1, 1.5, 2, 2.5, 3, 1.5;\n  2.5, 3, 3.5, 4, 4.5, 2.25;\n  4, 4.5, 5, 5.5, 6, 3;\n  5.5, 6, 6.5, 7, 7.5, 3.75;\n  7, 7.5, 8, 8.5, 9, 4.5;\n  3.5, 3.75, 4, 4.25, 4.5, 2.25]\nresized:\n[1, 1, 2, 2, 3, 3;\n  1, 1, 2, 2, 3, 3;\n  4, 4, 5, 5, 6, 6;\n  4, 4, 5, 5, 6, 6;\n  7, 7, 8, 8, 9, 9;\n  7, 7, 8, 8, 9, 9]\nmask:\n[1, 0, 2, 0, 3, 0;\n  0, 0, 0, 0, 0, 0;\n  4, 0, 5, 0, 6, 0;\n  0, 0, 0, 0, 0, 0;\n  7, 0, 8, 0, 9, 0;\n  0, 0, 0, 0, 0, 0]\noutput:\n[1, 0, 2, 0, 3, 0;\n  0, 0, 0, 0, 0, 0;\n  4, 0, 5, 0, 6, 0;\n  0, 0, 0, 0, 0, 0;\n  7, 0, 8, 0, 9, 0;\n  0, 0, 0, 0, 0, 0]\n</code></pre>\n\n<p>For xscale = 4, yscale = 3</p>\n\n<pre><code>output:\n[1, 0, 0, 0, 2, 0, 0, 0, 3, 0, 0, 0;\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0;\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0;\n  4, 0, 0, 0, 5, 0, 0, 0, 6, 0, 0, 0;\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0;\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0;\n  7, 0, 0, 0, 8, 0, 0, 0, 9, 0, 0, 0;\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0;\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n</code></pre>\n"}], "owner": {"reputation": 2214, "user_id": 838060, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4842ab878addab7a9c0bb39f7fc4f912?s=128&d=identicon&r=PG&f=1", "display_name": "Sefu", "link": "https://stackoverflow.com/users/838060/sefu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4026, "favorite_count": 4, "answer_count": 3, "score": 4, "last_activity_date": 1481768643, "creation_date": 1481733517, "question_id": 41147706, "link": "https://stackoverflow.com/questions/41147706/how-to-resize-without-interpolation-zero-padding-in-opencv", "title": "How to resize without interpolation (zero-padding) in OpenCV?", "body": "<p>Is there an efficient way to resize an image in OpenCV without using any interpolation? Instead of the conventional \"resize\" I would like my image to remap the pixels into a larger image but pad everything else with 0.</p>\n\n<p>e.g. to scale up img1 below 2x to img2:</p>\n\n<pre><code>img1 = [ 1, 2, 3,\n         4, 5, 6,\n         7, 8, 9 ]\n\ncv::resize(img1, img2, cv::Size(6, 6));\n\nimg2 = [ 1, 0, 2, 0, 3, 0,\n         0, 0, 0, 0, 0, 0,\n         4, 0, 5, 0, 6, 0,\n         0, 0, 0, 0, 0, 0,\n         7, 0, 8, 0, 9, 0,\n         0, 0, 0, 0, 0, 0 ]\n</code></pre>\n\n<p>I know the obvious way is to just use a for loop, but I'm wondering if there is a more efficient way using an OpenCV call?</p>\n"}, {"tags": ["c++", "templates", "constructor", "binary-tree", "nodes"], "answers": [{"comments": [{"owner": {"reputation": 385, "user_id": 5660145, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/13d06b145e30d7ff3b4d768f181d4390?s=128&d=identicon&r=PG&f=1", "display_name": "Liam", "link": "https://stackoverflow.com/users/5660145/liam"}, "edited": false, "score": 0, "creation_date": 1481734214, "post_id": 41147823, "comment_id": 69498266, "body": "thanks, stupid mistake. are the constructors correct in my Node.h class? and also not sure what the brackets are all about in the setUpTree method the lecturer only showed the slides for a few secs so not too sure if they are correct"}, {"owner": {"reputation": 6610, "user_id": 2403810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84c63a4cc13b434306ccc00ba2cd64d6?s=128&d=identicon&r=PG&f=1", "display_name": "tinstaafl", "link": "https://stackoverflow.com/users/2403810/tinstaafl"}, "reply_to_user": {"reputation": 385, "user_id": 5660145, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/13d06b145e30d7ff3b4d768f181d4390?s=128&d=identicon&r=PG&f=1", "display_name": "Liam", "link": "https://stackoverflow.com/users/5660145/liam"}, "edited": false, "score": 0, "creation_date": 1481734509, "post_id": 41147823, "comment_id": 69498425, "body": "Other than ,as pointed out by <code>max66</code>, using NULL as default values for the sub nodes, they seem OK to me."}, {"owner": {"reputation": 6610, "user_id": 2403810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84c63a4cc13b434306ccc00ba2cd64d6?s=128&d=identicon&r=PG&f=1", "display_name": "tinstaafl", "link": "https://stackoverflow.com/users/2403810/tinstaafl"}, "reply_to_user": {"reputation": 385, "user_id": 5660145, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/13d06b145e30d7ff3b4d768f181d4390?s=128&d=identicon&r=PG&f=1", "display_name": "Liam", "link": "https://stackoverflow.com/users/5660145/liam"}, "edited": false, "score": 0, "creation_date": 1481734962, "post_id": 41147823, "comment_id": 69498692, "body": "I think the lecturer was probably showing you how he/she wanted the data organized.  You have to re-write your code to take an array of values and iterate through them one at a time and add them to the tree."}], "tags": [], "owner": {"reputation": 6610, "user_id": 2403810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84c63a4cc13b434306ccc00ba2cd64d6?s=128&d=identicon&r=PG&f=1", "display_name": "tinstaafl", "link": "https://stackoverflow.com/users/2403810/tinstaafl"}, "is_accepted": false, "score": 2, "last_activity_date": 1481734632, "last_edit_date": 1481734632, "creation_date": 1481733849, "answer_id": 41147823, "question_id": 41147667, "link": "https://stackoverflow.com/questions/41147667/program-to-set-up-a-binary-tree-print-it-search-node-class-c/41147823#41147823", "title": "Program to set up a binary tree, print it &amp; search - Node Class C++", "body": "<p>First the return in <code>setupTree</code> should be <code>s_tree</code>.</p>\n\n<p>Second you construct a binary tree by adding each item one at a time.  I would suggest making <code>setupTree</code> accept an array of values that you can then take one at a time and build the tree.</p>\n\n<p>As was pointed out the default values for left and right should be NULL.  However, I would just do it in the declaration, so that you don't have to repeat it in every constructor where the values aren't specified:</p>\n\n<pre><code>private:\n    //private data member functions:\n    Node* left = NULL;\n    Node* right = NULL;\n    T item;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 385, "user_id": 5660145, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/13d06b145e30d7ff3b4d768f181d4390?s=128&d=identicon&r=PG&f=1", "display_name": "Liam", "link": "https://stackoverflow.com/users/5660145/liam"}, "edited": false, "score": 0, "creation_date": 1481734119, "post_id": 41147832, "comment_id": 69498181, "body": "I changed my code, so the constructor, now sets them to NULL template&lt;typename T&gt; Node&lt;T&gt;::Node(T i, Node&lt;T&gt; *lft, Node&lt;T&gt; *rht) {     item = i;     left = NULL;     right = NULL; }  is this what you mean?"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 385, "user_id": 5660145, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/13d06b145e30d7ff3b4d768f181d4390?s=128&d=identicon&r=PG&f=1", "display_name": "Liam", "link": "https://stackoverflow.com/users/5660145/liam"}, "edited": false, "score": 0, "creation_date": 1481734318, "post_id": 41147832, "comment_id": 69498323, "body": "@Liam - yes; I suggest to inzialize the values in the initialization list (sorry: forgetted a <code>:</code>; corrected now) but your correction should be enough."}, {"owner": {"reputation": 385, "user_id": 5660145, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/13d06b145e30d7ff3b4d768f181d4390?s=128&d=identicon&r=PG&f=1", "display_name": "Liam", "link": "https://stackoverflow.com/users/5660145/liam"}, "edited": false, "score": 0, "creation_date": 1481734608, "post_id": 41147832, "comment_id": 69498484, "body": "program executes now without crashing but doesn&#39;t print any values"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 385, "user_id": 5660145, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/13d06b145e30d7ff3b4d768f181d4390?s=128&d=identicon&r=PG&f=1", "display_name": "Liam", "link": "https://stackoverflow.com/users/5660145/liam"}, "edited": false, "score": 0, "creation_date": 1481735732, "post_id": 41147832, "comment_id": 69499167, "body": "@Liam - sorry but I see it only now: you have changed the wrong constructor; the constructor that receive <code>lft</code> and <code>rht</code> was right; is in the constructor that receive <i>only</i> a <code>T</code> that you have to impose <code>left = right = NULL</code>."}, {"owner": {"reputation": 385, "user_id": 5660145, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/13d06b145e30d7ff3b4d768f181d4390?s=128&d=identicon&r=PG&f=1", "display_name": "Liam", "link": "https://stackoverflow.com/users/5660145/liam"}, "edited": false, "score": 0, "creation_date": 1481736127, "post_id": 41147832, "comment_id": 69499416, "body": "so the second constructor that only receives T i : template &lt;typename T&gt; Node&lt;T&gt;::Node(T i) {  \titem = i;  \tleft = NULL; \tright = NULL; }  ?"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 385, "user_id": 5660145, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/13d06b145e30d7ff3b4d768f181d4390?s=128&d=identicon&r=PG&f=1", "display_name": "Liam", "link": "https://stackoverflow.com/users/5660145/liam"}, "edited": false, "score": 0, "creation_date": 1481737875, "post_id": 41147832, "comment_id": 69500377, "body": "@Liam - yes: only the second (leaf case) contructor."}, {"owner": {"reputation": 385, "user_id": 5660145, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/13d06b145e30d7ff3b4d768f181d4390?s=128&d=identicon&r=PG&f=1", "display_name": "Liam", "link": "https://stackoverflow.com/users/5660145/liam"}, "edited": false, "score": 0, "creation_date": 1481738953, "post_id": 41147832, "comment_id": 69500922, "body": "what do you mean? the first constructor shouldnt be setting them to NULL ,only the second constructor should?"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 385, "user_id": 5660145, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/13d06b145e30d7ff3b4d768f181d4390?s=128&d=identicon&r=PG&f=1", "display_name": "Liam", "link": "https://stackoverflow.com/users/5660145/liam"}, "edited": false, "score": 0, "creation_date": 1481739380, "post_id": 41147832, "comment_id": 69501140, "body": "@Liam - answer improved; I suggest you to delete your constructor and use the two suggested."}, {"owner": {"reputation": 385, "user_id": 5660145, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/13d06b145e30d7ff3b4d768f181d4390?s=128&d=identicon&r=PG&f=1", "display_name": "Liam", "link": "https://stackoverflow.com/users/5660145/liam"}, "edited": false, "score": 0, "creation_date": 1481740939, "post_id": 41147832, "comment_id": 69501932, "body": "very good, it is now printing some values at least ; monday sunday tuesday. not sure about the rest.  what is the difference in these constructors?"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 385, "user_id": 5660145, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/13d06b145e30d7ff3b4d768f181d4390?s=128&d=identicon&r=PG&f=1", "display_name": "Liam", "link": "https://stackoverflow.com/users/5660145/liam"}, "edited": false, "score": 1, "creation_date": 1481741681, "post_id": 41147832, "comment_id": 69502370, "body": "@Liam - improved answer to print leaf nodes; about difference in constructor, search for &quot;initialization list&quot;; look, by example, <a href=\"http://stackoverflow.com/questions/926752/why-should-i-prefer-to-use-member-initialization-list\">this question</a> and first answer"}, {"owner": {"reputation": 385, "user_id": 5660145, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/13d06b145e30d7ff3b4d768f181d4390?s=128&d=identicon&r=PG&f=1", "display_name": "Liam", "link": "https://stackoverflow.com/users/5660145/liam"}, "edited": false, "score": 0, "creation_date": 1481744763, "post_id": 41147832, "comment_id": 69503962, "body": "it prints them alphabetically now after making that change to the printTree method. Thanks appreciate it."}, {"owner": {"reputation": 385, "user_id": 5660145, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/13d06b145e30d7ff3b4d768f181d4390?s=128&d=identicon&r=PG&f=1", "display_name": "Liam", "link": "https://stackoverflow.com/users/5660145/liam"}, "edited": false, "score": 0, "creation_date": 1481745307, "post_id": 41147832, "comment_id": 69504309, "body": "when i un-comment one of the searchtree calls, it says error: identifier searchTree is undefined?"}, {"owner": {"reputation": 385, "user_id": 5660145, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/13d06b145e30d7ff3b4d768f181d4390?s=128&d=identicon&r=PG&f=1", "display_name": "Liam", "link": "https://stackoverflow.com/users/5660145/liam"}, "edited": false, "score": 0, "creation_date": 1481746508, "post_id": 41147832, "comment_id": 69504936, "body": "never mind, fixed it! had to put call it by s_tree-&gt;searchTree(key)."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 1, "last_activity_date": 1481741566, "last_edit_date": 1481741566, "creation_date": 1481733872, "answer_id": 41147832, "question_id": 41147667, "link": "https://stackoverflow.com/questions/41147667/program-to-set-up-a-binary-tree-print-it-search-node-class-c/41147832#41147832", "title": "Program to set up a binary tree, print it &amp; search - Node Class C++", "body": "<p>I don't know if it's the only problem but... if you construct a leaf, you have to set <code>left</code> and <code>right</code> pointers to <code>NULL</code></p>\n\n<pre><code>template &lt;typename T&gt;\nNode&lt;T&gt;::Node(T i) : left(NULL), right(NULL), item(i)\n { }\n</code></pre>\n\n<p>otherwise, when the destructor is called</p>\n\n<pre><code>template &lt;typename T&gt;\nNode&lt;T&gt;::~Node() {\n    delete left;\n    delete right;\n    //delete;\n}\n</code></pre>\n\n<p><code>delete</code> is called over undefined values; two times.</p>\n\n<p>It's a perfect recipe for a crash.</p>\n\n<p>Other problems in every point you use <code>left</code> or <code>right</code> checking if the pointer is <code>NULL</code>, as made in <code>printTree()</code> or <code>searchTree()</code>: the value is undefined, so can be non <code>NULL</code>, pass the test and <code>printTree()</code> is called over a pointer with an undefined value</p>\n\n<p><strong>-- EDIT --</strong></p>\n\n<p>Suggested contructors.</p>\n\n<pre><code>template &lt;typename T&gt;\nNode&lt;T&gt;::Node (T i, Node&lt;T&gt; * lft, Node&lt;T&gt; * rht)\n : left(lft), right(right), item(i)\n { }\n\ntemplate &lt;typename T&gt;\nNode&lt;T&gt;::Node (T i)\n : left(NULL), right(NULL), item(i)\n { }\n</code></pre>\n\n<p><strong>--- EDIT 2 ---</strong></p>\n\n<blockquote>\n  <p>it is now printing some values at least ; monday sunday tuesday. not sure about the rest</p>\n</blockquote>\n\n<p>Look at your <code>printTree()</code> metod</p>\n\n<p>template \nvoid Node::printTree() {\n    if (left != NULL) {\n        left->printTree();\n        cout &lt;&lt; item &lt;&lt; endl;//alphabetical order\n    }</p>\n\n<pre><code>if (right != NULL) {\n    right-&gt;printTree();\n    //cout &lt;&lt; item &lt;&lt; endl; //post order\n}\n</code></pre>\n\n<p>}</p>\n\n<p>It print the value (<code>item</code>) <strong>only</strong> if <code>left</code> isn't <code>NULL</code>. So it doesn't print the value of the leafs.</p>\n\n<p>Suggestion: modify <code>printTree()</code> to print <code>item</code> even when <code>left</code> is <code>NULL</code>.</p>\n\n<p>By example</p>\n\n<pre><code>template &lt;typename T&gt;\nvoid Node&lt;T&gt;::printTree() {\n    if (left != NULL) {\n        left-&gt;printTree();\n    }\n\n    cout &lt;&lt; item &lt;&lt; endl;\n\n    if (right != NULL) {\n        right-&gt;printTree();\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 385, "user_id": 5660145, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/13d06b145e30d7ff3b4d768f181d4390?s=128&d=identicon&r=PG&f=1", "display_name": "Liam", "link": "https://stackoverflow.com/users/5660145/liam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 516, "favorite_count": 0, "accepted_answer_id": 41147832, "answer_count": 2, "score": 0, "last_activity_date": 1481741566, "creation_date": 1481733397, "last_edit_date": 1481734566, "question_id": 41147667, "link": "https://stackoverflow.com/questions/41147667/program-to-set-up-a-binary-tree-print-it-search-node-class-c", "title": "Program to set up a binary tree, print it &amp; search - Node Class C++", "body": "<p>I have created a program which contains a class Node, for representing a binary tree of any type(template). </p>\n\n<p>In my Node.h class, I have two constructors, however I am not sure if I implemented both of them correctly. Initialising the values within the constructors has confused me. In my main.cpp file, I have a setUpTree function. My program executes now, but doesnt print the tree that is set up.</p>\n\n<p>I have tried for hours trying to fix this but to no ends. I am not really experienced with C++, pointers, constructors etc yet. </p>\n\n<p>I would appreciate it if anyone could help me fix my code so that the setUpTree function works, and also the printTree method.</p>\n\n<p>Thanks</p>\n\n<p>Node.h Class:</p>\n\n<pre><code>   #ifndef NODE_H\n#define NODE_H\n#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\n//an object of type node holds 3 things\n// - an item (of type t)\n// - a left subtree\n// - a right subtree\n\ntemplate&lt;typename T&gt;\nclass Node {\npublic:\n    Node(T item); //constructor to create a leaf node\n    Node(T item, Node *lft, Node *rht); //constructor which creates an internal node \n    ~Node(); //Destructor\n\n    //public data member functions:\n    bool searchTree(T key);\n    void printTree();\n\nprivate:\n    //private data member functions:\n    Node* left;\n    Node* right;\n    T item;\n};\n\n//constructor \ntemplate&lt;typename T&gt;\nNode&lt;T&gt;::Node(T i, Node&lt;T&gt; *lft, Node&lt;T&gt; *rht) {\n    item = i;\n    left = NULL;\n    right = NULL;\n}\n\n//constructor \ntemplate &lt;typename T&gt;\nNode&lt;T&gt;::Node(T i) { //should i be a parameter here?\n    item = i; //is this right for this constructor?\n}\n\n//destructor\ntemplate &lt;typename T&gt;\nNode&lt;T&gt;::~Node() {\n    delete left;\n    delete right;\n    //delete;\n}\n\n\n//print tree method\ntemplate &lt;typename T&gt;\nvoid Node&lt;T&gt;::printTree() {\n    if (left != NULL) {\n        left-&gt;printTree();\n        cout &lt;&lt; item &lt;&lt; endl;//alphabetical order\n    }\n\n    if (right != NULL) {\n        right-&gt;printTree();\n        //cout &lt;&lt; item &lt;&lt; endl; //post order\n    }\n}\n\n//search Tree method\ntemplate &lt;typename T&gt;\nbool Node&lt;T&gt;::searchTree(T key) {\n    bool found = false;\n    if (item == key) {\n        return true;\n    }\n    if (left != NULL) {\n        found = left-&gt;searchTree(key);\n        if (found) return true;\n    }\n    if (right != NULL) {\n        return right-&gt;searchTree(key);\n    }\n    return false; //if left and right are both null &amp; key is not the search item, then not found == not in the tree.\n}\n\n#endif\n</code></pre>\n\n<p>Main.cpp Class:</p>\n\n<pre><code>#include \"Node.h\"\n#include &lt;iostream&gt;\nusing namespace std;\n\n//set up tree method\nNode&lt;string&gt; *setUpTree() {\n    Node&lt;string&gt; *s_tree =\n        new Node&lt;string&gt;(\"Sunday\",\n        new Node&lt;string&gt;(\"monday\",\n        new Node&lt;string&gt;(\"Friday\"),\n        new Node&lt;string&gt;(\"Saturday\")),\n        new Node&lt;string&gt;(\"Tuesday\",\n        new Node&lt;string&gt;(\"Thursday\"),\n        new Node&lt;string&gt;(\"Wednesday\")));\n    return s_tree;\n}\n\nint main() {\n\n    Node&lt;string&gt; *s_tree;\n    s_tree = setUpTree(); //call setUpTree method on s_tree\n\n    cout &lt;&lt; \"Part 2 :Printing tree values: \" &lt;&lt; endl;\n    s_tree-&gt;printTree(); //call print tree method\n\n    cout &lt;&lt; endl;\n\n    //search for range of tree values\n    //searchTree(s_tree, \"Sunday\");\n    //searchTree(s_tree, \"Monday\");\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 1813, "user_id": 2449857, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jxnCm.jpg?s=128&g=1", "display_name": "Jack Deeth", "link": "https://stackoverflow.com/users/2449857/jack-deeth"}, "edited": false, "score": 2, "creation_date": 1481733351, "post_id": 41147498, "comment_id": 69497684, "body": "There are probably Qt .dll files which are available when you run within Qt, but which aren&#39;t naturally available when you run the .exe standalone. You should identify these .dlls (I don&#39;t know their names) and copy them into the folder with your .exe. (There are other methods.)"}, {"owner": {"reputation": 1436, "user_id": 4341198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1afe57c0798cf3205c694ee52856fc01?s=128&d=identicon&r=PG&f=1", "display_name": "Dusteh", "link": "https://stackoverflow.com/users/4341198/dusteh"}, "edited": false, "score": 0, "creation_date": 1481735014, "post_id": 41147498, "comment_id": 69498729, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/40744629/qt-error-procedure-entry-not-found\">Qt Error : Procedure Entry Not Found</a>"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1481735489, "post_id": 41147498, "comment_id": 69499020, "body": "Your image of text <a href=\"//meta.unix.stackexchange.com/q/4086\">isn&#39;t very helpful</a>.  It can&#39;t be read aloud or copied into an editor, and it doesn&#39;t index very well, meaning that other users with the same problem are less likely to find the answer here.  Please <a href=\"https://stackoverflow.com/posts/41147498/edit\">edit</a> your post to incorporate the relevant text directly (preferably using copy+paste to avoid transcription errors)."}, {"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1481742026, "post_id": 41147498, "comment_id": 69502575, "body": "The search term you&#39;re looking for is &quot;deployment.&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 1436, "user_id": 4341198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1afe57c0798cf3205c694ee52856fc01?s=128&d=identicon&r=PG&f=1", "display_name": "Dusteh", "link": "https://stackoverflow.com/users/4341198/dusteh"}, "is_accepted": false, "score": 0, "last_activity_date": 1481734733, "last_edit_date": 1495540459, "creation_date": 1481734733, "answer_id": 41148142, "question_id": 41147498, "link": "https://stackoverflow.com/questions/41147498/qt-bulid-after-build-error/41148142#41148142", "title": "Qt bulid after build error", "body": "<p>The dlls are missing from your path. Either add the proper dir to environment variables or copy to the missing dlls to the <code>.exe</code> destination.</p>\n\n<p>You can check <a href=\"https://stackoverflow.com/questions/40744629/qt-error-procedure-entry-not-found/40744715#40744715\">Qt Error : Procedure Entry Not Found</a> for details on how to set the environment variable to fix the problem.</p>\n"}, {"tags": [], "owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "is_accepted": false, "score": 0, "last_activity_date": 1481740457, "creation_date": 1481740457, "answer_id": 41149703, "question_id": 41147498, "link": "https://stackoverflow.com/questions/41147498/qt-bulid-after-build-error/41149703#41149703", "title": "Qt bulid after build error", "body": "<p>You should <em>deploy</em> the application, if you want to run it outside Qt Creator (or Qt command prompt). This means, put the .exe and all the libraries it needs in the same folder (that way you don't have to edit your system PATH, which is another way to allow it to find the .DLL files, but which will easily lead to so called .DLL hell, and you don't want to go there).</p>\n\n<p>To properly deploy a Qt app on Windows, read this <a href=\"http://doc.qt.io/qt-5/windows-deployment.html\" rel=\"nofollow noreferrer\">document page</a>. In particular, you will want to use <em>windeployqt</em> tool.</p>\n"}, {"tags": [], "owner": {"reputation": 1667, "user_id": 4490542, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8925b87f1bc4c6a3bc6956628c9d3b6f?s=128&d=identicon&r=PG&f=1", "display_name": "e.jahandar", "link": "https://stackoverflow.com/users/4490542/e-jahandar"}, "is_accepted": true, "score": 0, "last_activity_date": 1481740475, "creation_date": 1481740475, "answer_id": 41149710, "question_id": 41147498, "link": "https://stackoverflow.com/questions/41147498/qt-bulid-after-build-error/41149710#41149710", "title": "Qt bulid after build error", "body": "<p>The Qt Creator adds required PATH environments to your session, PATH variable is used for finding dll and executable files, the problem is Qt Creator only modifies the environment variables for session it owns not globaly.\nYou can see Qt Creator's own environment variables in run settings tab :</p>\n\n<p><a href=\"https://i.stack.imgur.com/IhYOu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IhYOu.png\" alt=\"Run settings tab - Qt Creator\"></a></p>\n\n<p>find PATH environment variable and make sure all comma (;) separated paths are in system PATH environment variable, or you can replace PATH variable generated by Qt with system PATH environment variable.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7298822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b203a3abf0252ef2c5d1b629bdbdcb5d?s=128&d=identicon&r=PG&f=1", "display_name": "gjergj", "link": "https://stackoverflow.com/users/7298822/gjergj"}, "is_accepted": false, "score": 0, "last_activity_date": 1481749889, "creation_date": 1481749889, "answer_id": 41152259, "question_id": 41147498, "link": "https://stackoverflow.com/questions/41147498/qt-bulid-after-build-error/41152259#41152259", "title": "Qt bulid after build error", "body": "<p>You are probably making a mistake in the version of the copied dll.\nIf you compiled you application with Qt 5.6 then get the dll from Qt5.6 installation directory and compiler.\nAlso make sure that you do not get them from QtCreator directory.</p>\n"}], "owner": {"reputation": 11, "user_id": 6415561, "user_type": "registered", "profile_image": "https://graph.facebook.com/1770480056571517/picture?type=large", "display_name": "Akhil Ravindran", "link": "https://stackoverflow.com/users/6415561/akhil-ravindran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 41149710, "answer_count": 4, "score": -2, "last_activity_date": 1481749889, "creation_date": 1481732847, "last_edit_date": 1481737225, "question_id": 41147498, "link": "https://stackoverflow.com/questions/41147498/qt-bulid-after-build-error", "title": "Qt bulid after build error", "body": "<p>I build a project, which works absolutely fine when I execute inside Qt. But when I execute it using .exe file in release folder of the project, it gives me junk of errors.</p>\n\n<p>This is the screenshot of the error:</p>\n\n<p><img src=\"https://i.stack.imgur.com/qUhR0.png\" alt=\"screenshot\"></p>\n\n<p>I already added all DLLs in the folder and plugin folder.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 7, "creation_date": 1481732070, "post_id": 41147201, "comment_id": 69496775, "body": "Can&#39;t be done. If you want to make <code>Def</code> assignable, have it contain a pointer, not a reference."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1481732428, "post_id": 41147201, "comment_id": 69497031, "body": "^^^ Case and point: <a href=\"http://en.cppreference.com/w/cpp/utility/functional/reference_wrapper\" rel=\"nofollow noreferrer\"><code>std::reference_wrapper</code></a>"}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 0, "creation_date": 1481732468, "post_id": 41147201, "comment_id": 69497069, "body": "You <i>can</i> use a copy constructor to achieve the result you want.  But you can&#39;t do it with assignment because reference members can only be set during construction."}], "answers": [{"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1481732932, "post_id": 41147355, "comment_id": 69497413, "body": "<code>Abc</code> looks assignable. Couldn&#39;t the OP just assign instead of using placement new?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1481732936, "post_id": 41147355, "comment_id": 69497414, "body": "<i>Yuck</i>. This is both clever and awful. +1."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1481733003, "post_id": 41147355, "comment_id": 69497453, "body": "@StoryTeller this would modify the current <code>Abc</code>, not &quot;rebind&quot; the reference."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1481733066, "post_id": 41147355, "comment_id": 69497496, "body": "@Quentin - I misread it as in place constructing the referenced object... Yikes. I second your comment to n.m."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1481733766, "post_id": 41147355, "comment_id": 69497952, "body": "Beyond unnecessary, this is highly dangerous. A class that does this cannot be derived from, because this assignment will blow away the actual type of a derived object."}], "tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": false, "score": 3, "last_activity_date": 1481732789, "last_edit_date": 1481732789, "creation_date": 1481732445, "answer_id": 41147355, "question_id": 41147201, "link": "https://stackoverflow.com/questions/41147201/c-copy-assignment-operator-for-reference-object-variable/41147355#41147355", "title": "c++ copy assignment operator for reference object variable", "body": "<p>A reference cannot be assigned. Due to this, one can only define it via placement new and copy construction:</p>\n\n<pre><code>Def&amp; operator = (const Def&amp; obj)\n{\n      this-&gt;~Def(); // destroy\n      new (this) Def(obj); // copy construct in place\n}\n</code></pre>\n\n<p>But it is really unnecesary. Just use a pointer.</p>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": true, "score": 7, "last_activity_date": 1481732987, "creation_date": 1481732987, "answer_id": 41147543, "question_id": 41147201, "link": "https://stackoverflow.com/questions/41147201/c-copy-assignment-operator-for-reference-object-variable/41147543#41147543", "title": "c++ copy assignment operator for reference object variable", "body": "<p>references cannot be assigned to. You need something that can. A pointer would work, but they're very abusable.</p>\n\n<p>How about <code>std::reference_wrapper</code>?</p>\n\n<pre><code>#include &lt;functional&gt;\n\nclass Abc\n{\npublic:\n    int a;\n    int b;\n    int c;\n};\n\nclass Def\n{\npublic:\n    std::reference_wrapper&lt;const Abc&gt; abc_;\n\n    Def(const Abc&amp; abc):abc_(abc) { }\n\n    // rule of zero now supplies copy/moves for us\n\n    // use the reference\n    Abc const&amp; get_abc() const {\n      return abc_.get();\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 9429, "user_id": 1264018, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0338476eea2e564d77246b7234773e1?s=128&d=identicon&r=PG&f=1", "display_name": "feelfree", "link": "https://stackoverflow.com/users/1264018/feelfree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 592, "favorite_count": 1, "accepted_answer_id": 41147543, "answer_count": 2, "score": 3, "last_activity_date": 1481732987, "creation_date": 1481731913, "last_edit_date": 1481732129, "question_id": 41147201, "link": "https://stackoverflow.com/questions/41147201/c-copy-assignment-operator-for-reference-object-variable", "title": "c++ copy assignment operator for reference object variable", "body": "<p>I give the following example to illustrate my question:</p>\n\n<pre><code>class Abc\n{\npublic:\n    int a;\n    int b;\n    int c;\n\n};\n\nclass Def\n{\npublic:\n    const Abc&amp; abc_;\n\n    Def(const Abc&amp; abc):abc_(abc) { }\n\n    Def&amp; operator = (const Def&amp; obj)\n    {\n        // this-&gt;abc_(obj.abc_);\n        // this-&gt;abc_ = obj.abc_;\n    }\n};\n</code></pre>\n\n<p>Here I do not know how to define the copy assignment operator. Do you have any ideas? Thanks. </p>\n"}, {"tags": ["javascript", "c++", "node.js", "ffi", "node-ffi"], "answers": [{"comments": [{"owner": {"reputation": 14227, "user_id": 167739, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/a4e967e1471cae0ef6c796a2610a18da?s=128&d=identicon&r=PG", "display_name": "Volodymyr Bezuglyy", "link": "https://stackoverflow.com/users/167739/volodymyr-bezuglyy"}, "edited": false, "score": 0, "creation_date": 1481805199, "post_id": 41154603, "comment_id": 69528927, "body": "Thank you very much! Interesting that GetDefaultPrinterW requests only 4 bytes for default printer &quot;Fax&quot;. Why not 8?"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "reply_to_user": {"reputation": 14227, "user_id": 167739, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/a4e967e1471cae0ef6c796a2610a18da?s=128&d=identicon&r=PG", "display_name": "Volodymyr Bezuglyy", "link": "https://stackoverflow.com/users/167739/volodymyr-bezuglyy"}, "edited": false, "score": 0, "creation_date": 1481816637, "post_id": 41154603, "comment_id": 69536472, "body": "From <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd144876(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>GetDefaultPrinter</code></a>: <i>If this parameter is NULL, the function fails and the variable pointed to by pcchBuffer returns in the required buffer size, in <b>characters</b>.</i> So, when allocating you have to multiply whatever the 1st <code>GetDefaultPrinter</code> call returns in <code>pcchBuffer</code> with <code>sizeof(TCHAR)</code> (which for <i>WIDE</i> characters is 2)."}], "tags": [], "owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "is_accepted": true, "score": 2, "last_activity_date": 1553250344, "last_edit_date": 1553250344, "creation_date": 1481762458, "answer_id": 41154603, "question_id": 41147180, "link": "https://stackoverflow.com/questions/41147180/why-enumprintersa-and-enumprintersw-request-the-same-amount-of-memory/41154603#41154603", "title": "Why EnumPrintersA and EnumPrintersW request the same amount of memory?", "body": "<p>At the beginning I thought that there's something wrong with your code, so I kept looking for a mistake (introduced by the <em>ffi</em> or <em>js</em> layers, or a typo or something similar), but I couldn't find anything.</p>\n\n<p>Then, I started to write a program similar to yours in <em>C</em> (to eliminate any extra layers that could introduce errors).</p>\n\n<p><em>main.c</em>:</p>\n\n\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;Windows.h&gt;\n#include &lt;conio.h&gt;\n\n\ntypedef BOOL (__stdcall *EnumPrintersAFuncPtr)(_In_ DWORD Flags, _In_ LPSTR Name, _In_ DWORD Level, _Out_ LPBYTE pPrinterEnum, _In_ DWORD cbBuf, _Out_ LPDWORD pcbNeeded, _Out_ LPDWORD pcReturned);\ntypedef BOOL (__stdcall *EnumPrintersWFuncPtr)(_In_ DWORD Flags, _In_ LPWSTR Name, _In_ DWORD Level, _Out_ LPBYTE pPrinterEnum, _In_ DWORD cbBuf, _Out_ LPDWORD pcbNeeded, _Out_ LPDWORD pcReturned);\n\n\nvoid testFunc() {\n    PPRINTER_INFO_4A ppi4a = NULL;\n    PPRINTER_INFO_4W ppi4w = NULL;\n    BOOL resa, resw;\n    DWORD neededa = 0, returneda = 0, neededw = 0, returnedw = 0, gle = 0, i = 0, flags = PRINTER_ENUM_LOCAL | PRINTER_ENUM_CONNECTIONS;\n    LPBYTE bufa = NULL, bufw = NULL;\n    resa = EnumPrintersA(flags, NULL, 4, NULL, 0, &amp;neededa, &amp;returneda);\n    if (resa) {\n        printf(\"EnumPrintersA(1) succeeded with NULL buffer. Exiting...\\n\");\n        return;\n    } else {\n        gle = GetLastError();\n        if (gle != ERROR_INSUFFICIENT_BUFFER) {\n            printf(\"EnumPrintersA(1) failed with %d(0x%08X) which is different than %d. Exiting...\\n\", gle, gle, ERROR_INSUFFICIENT_BUFFER);\n            return;\n        } else {\n            printf(\"EnumPrintersA(1) needs a %d(0x%08X) bytes long buffer.\\n\", neededa, neededa);\n        }\n    }\n    resw = EnumPrintersW(flags, NULL, 4, NULL, 0, &amp;neededw, &amp;returnedw);\n    if (resw) {\n        printf(\"EnumPrintersW(1) succeeded with NULL buffer. Exiting...\\n\");\n        return;\n    } else {\n        gle = GetLastError();\n        if (gle != ERROR_INSUFFICIENT_BUFFER) {\n            printf(\"EnumPrintersW(1) failed with %d(0x%08X) which is different than %d. Exiting...\\n\", gle, gle, ERROR_INSUFFICIENT_BUFFER);\n            return;\n        } else {\n            printf(\"EnumPrintersW(1) needs a %d(0x%08X) bytes long buffer.\\n\", neededw, neededw);\n        }\n    }\n\n    bufa = (LPBYTE)calloc(1, neededa);\n    if (bufa == NULL) {\n        printf(\"calloc failed with %d(0x%08X). Exiting...\\n\", errno, errno);\n        return;\n    } else {\n        printf(\"buffera[0x%08X:0x%08X]\\n\", (long)bufa, (long)bufa + neededa - 1);\n    }\n    bufw = (LPBYTE)calloc(1, neededw);\n    if (bufw == NULL) {\n        printf(\"calloc failed with %d(0x%08X). Exiting...\\n\", errno, errno);\n        free(bufa);\n        return;\n    } else {\n        printf(\"bufferw[0x%08X:0x%08X]\\n\", (long)bufw, (long)bufw + neededw - 1);\n    }\n\n    resa = EnumPrintersA(flags, NULL, 4, bufa, neededa, &amp;neededa, &amp;returneda);\n    if (!resa) {\n        gle = GetLastError();\n        printf(\"EnumPrintersA(2) failed with %d(0x%08X). Exiting...\\n\", gle, gle);\n        free(bufa);\n        free(bufw);\n        return;\n    }\n    printf(\"EnumPrintersA(2) copied %d bytes in the buffer out of which the first %d(0x%08X) represent %d structures of size %d\\n\", neededa, returneda * sizeof(PRINTER_INFO_4A), returneda * sizeof(PRINTER_INFO_4A), returneda, sizeof(PRINTER_INFO_4A));\n    resw = EnumPrintersW(flags, NULL, 4, bufw, neededw, &amp;neededw, &amp;returnedw);\n    if (!resw) {\n        gle = GetLastError();\n        printf(\"EnumPrintersW(2) failed with %d(0x%08X). Exiting...\\n\", gle, gle);\n        free(bufw);\n        free(bufa);\n        return;\n    }\n    printf(\"EnumPrintersW(2) copied %d bytes in the buffer out of which the first %d(0x%08X) represent %d structures of size %d\\n\", neededw, returnedw * sizeof(PRINTER_INFO_4W), returnedw * sizeof(PRINTER_INFO_4W), returnedw, sizeof(PRINTER_INFO_4W));\n\n    ppi4a = (PPRINTER_INFO_4A)bufa;\n    ppi4w = (PPRINTER_INFO_4W)bufw;\n    printf(\"\\nPrinting ASCII results:\\n\");\n    for (i = 0; i &lt; returneda; i++) {\n        printf(\"  Item %d\\n    pPrinterName: [%s]\\n\", i, ppi4a[i].pPrinterName ? ppi4a[i].pPrinterName : \"NULL\");\n    }\n    printf(\"\\nPrinting WIDE results:\\n\");\n    for (i = 0; i &lt; returnedw; i++) {\n        wprintf(L\"  Item %d\\n    pPrinterName: [%s]\\n\", i, ppi4w[i].pPrinterName ? ppi4w[i].pPrinterName : L\"NULL\");\n    }\n\n    free(bufa);\n    free(bufw);\n}\n\n\nint main() {\n    testFunc();\n    printf(\"\\nPress a key to exit...\\n\");\n    getch();\n    return 0;\n}\n</code></pre>\n\n<p><strong>Note</strong>: in terms of variable names (I kept them short - and thus not very intuitive), the <strong>a</strong> or <strong>w</strong> at the end of their names means that they are used for <em>ASCII</em> / <em>WIDE</em> version.</p>\n\n<p>Initially, I was afraid that <em>EnumPrinters</em> might not return anything, since I'm not connected to any printer at this point, but luckily I have some (7 to be more precise) \"saved\". Here's the output of the above program (thank you @qxz for correcting my initial (and kind of faulty) version):</p>\n\n<blockquote>\n<pre class=\"lang-c prettyprint-override\"><code>EnumPrintersA(1) needs a 544(0x00000220) bytes long buffer.\nEnumPrintersW(1) needs a 544(0x00000220) bytes long buffer.\nbuffera[0x03161B20:0x03161D3F]\nbufferw[0x03165028:0x03165247]\nEnumPrintersA(2) copied 544 bytes in the buffer out of which the first 84(0x00000054) represent 7 structures of size 12\nEnumPrintersW(2) copied 544 bytes in the buffer out of which the first 84(0x00000054) represent 7 structures of size 12\n\nPrinting ASCII results:\n  Item 0\n    pPrinterName: [Send To OneNote 2013]\n  Item 1\n    pPrinterName: [NPI060BEF (HP LaserJet Professional M1217nfw MFP)]\n  Item 2\n    pPrinterName: [Microsoft XPS Document Writer]\n  Item 3\n    pPrinterName: [Microsoft Print to PDF]\n  Item 4\n    pPrinterName: [HP Universal Printing PCL 6]\n  Item 5\n    pPrinterName: [HP LaserJet M4345 MFP [7B63B6]]\n  Item 6\n    pPrinterName: [Fax]\n\nPrinting WIDE results:\n  Item 0\n    pPrinterName: [Send To OneNote 2013]\n  Item 1\n    pPrinterName: [NPI060BEF (HP LaserJet Professional M1217nfw MFP)]\n  Item 2\n    pPrinterName: [Microsoft XPS Document Writer]\n  Item 3\n    pPrinterName: [Microsoft Print to PDF]\n  Item 4\n    pPrinterName: [HP Universal Printing PCL 6]\n  Item 5\n    pPrinterName: [HP LaserJet M4345 MFP [7B63B6]]\n  Item 6\n    pPrinterName: [Fax]\n\nPress a key to exit...\n</code></pre>\n</blockquote>\n\n<p><strong>Amazingly</strong> (at least for me), the behavior you described could be reproduced.</p>\n\n<p><strong>Note</strong> that the above output is from the <em>32bit</em> compiled version of the program (<em>64bit</em> pointers are harder to read :) ), but the behavior is reproducible when building for <em>64bit</em> as well (I am using <em>VStudio 10.0</em> on <em>Win10</em>).</p>\n\n<p>Since there are for sure strings at the end of the buffer, I started debugging:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ljay7.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ljay7.jpg\" alt=\"_VStudio 10.0 Debug window\"></a></p>\n\n<p>Above is a picture of <em>VStudio 10.0</em> Debug window, with the program interrupted at the end of <em>testFunc</em>, just before freeing the 1<sup>st</sup> pointer. Now, I don't know how familiar are you with debugging on <em>VStudio</em>, so I'm going to walk through the (relevant) window areas:</p>\n\n<ul>\n<li>At the bottom, there are 2 <em>Watch</em> windows (used to display variables while the program is running). As seen, the variable <em>Name</em>, <em>Value</em> and <em>Type</em> are displayed\n\n<ul>\n<li>At the right, (<em>Watch 1</em>): the 1<sup>st</sup> (0<sup>th</sup>) and the last (6<sup>th</sup> - as there are 7) of the structures at the beginning of each of the 2 buffers</li>\n<li>At the left, (<em>Watch 2</em>): the addresses of the 2 buffers</li>\n</ul></li>\n<li>Above the <em>Watch</em> windows, (<em>Memory 2</em>) is the memory content for <em>bufw</em>. A <em>Memory</em> window contains a series of rows and in each row there's the memory address (grayed, at the left), followed by its contents in <em>hex</em> (each byte corresponds to 2 <em>hex</em> digits - e.g. <strong><em>1E</em></strong>), then at the right the same contents in <em>char</em> representation (each byte corresponds to 1 <em>char</em> - I'm going to come back on this), then the next row, and so on</li>\n<li>Above <em>Memory 2</em>, (<em>Memory 1</em>): it's the memory content for <em>bufa</em></li>\n</ul>\n\n<p>Now, going back to the memory layout: not all the <em>char</em>s at the right are necessarily what they seem, some of them are just displayed like that for human readability. For example there are a lot of dots (<strong>.</strong>) on the right side, but they are not all dots. If you look for a dot at the corresponding <em>hex</em> representation, you'll notice that for many of them it's <strong><em>00</em></strong> or <strong><em>NULL</em></strong> (which is a non printable <em>char</em>, but it's displayed as a dot).</p>\n\n<p>Regarding the buffer contents each of the 2 <em>Memory</em> windows (looking at the <em>char</em> representation), there are 3 zones:</p>\n\n<ul>\n<li>The <em>PRINTER_INFO_4*</em> zone or the gibberish at the beginning: 544 bytes corresponding to approximately the 1st 3 rows</li>\n<li>The funky <em>char</em>s from the last <em>~1.5</em> rows: they are outside of our buffers so we don't care about them</li>\n<li>The mid zone: where the strings are stored</li>\n</ul>\n\n<p>Let's look at the <em>WIDE</em> strings zone (<em>Memory 2</em> - mid zone): as you mentioned, each character has 2 bytes: because in my case they're all <em>ASCII</em> <em>char</em>s, the <em>MSB</em> (or the <em>codepage</em> byte) is always <strong><em>0</em></strong> (that's why you see <em>char</em>s and dots interleaved: e.g. \"<em>.L.a.s.e.r.J.e.t</em>\" in row 4).</p>\n\n<p>Since there are multiple strings in the buffer (or string, if you will) - or even better: multiple <code>TCHAR*</code>s in a <code>TCHAR*</code> - they must be separated: that is done by a <em>NULL</em> <em>WIDE</em> <em>char</em> (<em>hex</em>: <strong><em>00 00</em></strong>, <em>char</em>: \"<em>..</em>\") at the end of each string; combined with the fact that the next string's 1<sup>st</sup> byte (<em>char</em>) is also <em>00</em> (<em>.</em>), you'll see a sequence of 3 <em>NULL</em> bytes (<em>hex</em>: <em>00 00 00</em>, <em>char</em>: \"<em>...</em>\") and that is the separator between 2 (<em>WIDE</em>) strings in the mid zone.</p>\n\n<p>Now, comparing the 2 mid parts (corresponding to the 2 buffers), you'll notice that the string separators are <strong>exactly in the same positions</strong> and more: <strong>the last parts of each string are the also same</strong> (the last halves of each string to be more precise).</p>\n\n<p>Considering this, here's my theory:</p>\n\n<p>I think <em>EnumPrintersA</em> calls <em>EnumPrintersW</em>, and then it iterates through each of the strings (at the end of the buffer), and calls <em>wcstombs</em> or even better: <a href=\"https://docs.microsoft.com/en-gb/windows/desktop/api/stringapiset/nf-stringapiset-widechartomultibyte\" rel=\"nofollow noreferrer\">[MS.Docs]: WideCharToMultiByte function</a> on them (converting them in place - and thus the resulting <em>ASCII</em> string only takes the 1<sup>st</sup> half of the <em>WIDE</em> string, leaving the 2<sup>nd</sup> half unmodified), without converting all the buffer. I'll have to verify this by looking with a disassembler in <em>winspool.drv</em>.</p>\n\n<p>Personally (if I'm right) I think that it is a lame workaround (or a <em>gainarie</em> as I like to call it), but who knows, maybe all the <em>*A</em>, <em>*W</em> function pairs (at least those who return multiple <code>char*</code>s in a <code>char*</code>) work like this. Anyway, there are also pros for this approach (at least for these 2 funcs):</p>\n\n<ul>\n<li><em>dev-wise</em>: it's <em>OK</em> for one function to call the other and keep the implementation in 1 place (instead of duping it in both functions)</li>\n<li><em>performance-wise</em>: it's <em>OK</em> not to recreate the buffer since that would \nimply additional computation; after all, the buffer consumer doesn't normally reach the second halves of each <em>ASCII</em> string in the buffer</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 14227, "user_id": 167739, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/a4e967e1471cae0ef6c796a2610a18da?s=128&d=identicon&r=PG", "display_name": "Volodymyr Bezuglyy", "link": "https://stackoverflow.com/users/167739/volodymyr-bezuglyy"}, "edited": false, "score": 0, "creation_date": 1481805222, "post_id": 41156194, "comment_id": 69528943, "body": "Thank you! Interesting that GetDefaultPrinterW requests only 4 bytes for default printer &quot;Fax&quot;. Why not 8?"}], "tags": [], "owner": {"reputation": 5938, "user_id": 7284356, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FW3hS.png?s=128&g=1", "display_name": "Rei", "link": "https://stackoverflow.com/users/7284356/rei"}, "is_accepted": false, "score": 3, "last_activity_date": 1481774301, "creation_date": 1481774301, "answer_id": 41156194, "question_id": 41147180, "link": "https://stackoverflow.com/questions/41147180/why-enumprintersa-and-enumprintersw-request-the-same-amount-of-memory/41156194#41156194", "title": "Why EnumPrintersA and EnumPrintersW request the same amount of memory?", "body": "<p>I can confirm that what you found with <code>EnumPrintersA</code> and <code>EnumPrintersW</code> is reproducible.\nIn my machine, they both require 240 bytes.</p>\n\n<p>This got me curious, so I decided to allocate a separate buffer for each function and dump each buffer to a file and opened them with a hex editor.\nThe interesting part of each file is of course the names of the printers.</p>\n\n<p>To keep this short, I'll show you the first 3 names of the printers.\nThe first line is from <code>EnumPrintersA</code>, the second is from <code>EnumPrintersW</code>:</p>\n\n<pre><code>Fax.x...FX DocuPrint C1110 PCL 6..C.1.1.1.0. .P.C.L. .6...Microsoft XPS Document Writer.o.c.u.m.e.n.t. .W.r.i.t.e.r...\nF.a.x...F.X. .D.o.c.u.P.r.i.n.t. .C.1.1.1.0. .P.C.L. .6...M.i.c.r.o.s.o.f.t. .X.P.S. .D.o.c.u.m.e.n.t. .W.r.i.t.e.r...\n</code></pre>\n\n<p>From this result, it appears that <code>EnumPrintersA</code> calls <code>EnumPrintersW</code> for the actual work and then simply converts each string in the buffer to single byte characters and puts the resulting string in the same place.\nTo confirm this, I decided to trace <code>EnumPrintersA</code> code and I found that it definitely calls <code>EnumPrintersW</code> at position <code>winspool.EnumPrintersA + 0xA7</code>.\nThe actual position is likely different in a different Windows version.</p>\n\n<p>This got me even more curious, so I decided to test other functions that have A and W versions.\nThis is what I found:</p>\n\n<pre><code>EnumMonitorsA 280 bytes needed\nEnumMonitorsW 280 bytes needed\nEnumServicesStatusA 20954 bytes needed\nEnumServicesStatusW 20954 bytes needed\nEnumPortsA 2176 bytes needed\nEnumPortsW 2176 bytes needed\nEnumPrintProcessorsA 24 bytes needed\nEnumPrintProcessorsW 24 bytes needed\n</code></pre>\n\n<p>From this result, my conclusion is that <code>EnumPrintersA</code> calls <code>EnumPrintersW</code> for the actual work and converts the string in the buffer and other functions that have A and W versions also do the same thing.\nThis appears to be a common mechanism to avoid duplication of code in expense of larger buffers, maybe because buffers can be deallocated anyway.</p>\n"}], "owner": {"reputation": 14227, "user_id": 167739, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/a4e967e1471cae0ef6c796a2610a18da?s=128&d=identicon&r=PG", "display_name": "Volodymyr Bezuglyy", "link": "https://stackoverflow.com/users/167739/volodymyr-bezuglyy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21744, "favorite_count": 0, "accepted_answer_id": 41154603, "answer_count": 2, "score": 4, "last_activity_date": 1553250344, "creation_date": 1481731848, "question_id": 41147180, "link": "https://stackoverflow.com/questions/41147180/why-enumprintersa-and-enumprintersw-request-the-same-amount-of-memory", "title": "Why EnumPrintersA and EnumPrintersW request the same amount of memory?", "body": "<p>I call <strong>EnumPrintersA</strong>/<strong>EnumPrintersW</strong> functions using <strong>node-ffi</strong> to get list of local printers accessible from my PC.<br>\nYou should create the buffer which will be filled with information by EnumPrinters function.<br>\nBut you do not know the required size of the buffer.<br>\nIn this case you need to execute <strong>EnumPrintersA</strong>/<strong>EnumPrintersW</strong> twice.<br>\nDuring the first call this function calculates the amount of memory for information about printers, during the second call this function fills the buffer with information about printers.<br>\nIn case of Unicode version of <strong>EnumPrinters</strong> function, each letter in printers name will be encoded using two characters in Windows.  </p>\n\n<p>Why the first call to <strong>EnumPrintersW</strong> returns the same required amount of memory as the first call to <strong>EnumPrintersA</strong>?<br>\nUnicode strings are twice as long as not-unicode strings, but required buffer size is the same.  </p>\n\n<pre><code>var ffi = require('ffi')\nvar ref = require('ref')\nvar Struct = require('ref-struct')\nvar wchar_t = require('ref-wchar')\n\nvar int = ref.types.int\nvar intPtr = ref.refType(ref.types.int)\nvar wchar_string = wchar_t.string\n\nvar getPrintersA =  function getPrinters() {\n   var PRINTER_INFO_4A = Struct({\n      'pPrinterName' : ref.types.CString,\n      'pServerName' : ref.types.CString,\n      'Attributes' : int\n   });\n\n   var printerInfoPtr = ref.refType(PRINTER_INFO_4A);\n\n   var winspoolLib = new ffi.Library('winspool', {\n      'EnumPrintersA': [ int, [ int, ref.types.CString, int, printerInfoPtr, int, intPtr, intPtr ] ]\n   });\n\n   var pcbNeeded = ref.alloc(int, 0);\n   var pcReturned = ref.alloc(int, 0);\n\n   //Get amount of memory for the buffer with information about printers\n   var res = winspoolLib.EnumPrintersA(6, ref.NULL, 4, ref.NULL, 0, pcbNeeded, pcReturned);\n   if (res != 0) {\n      console.log(\"Cannot get list of printers. Error during first call to EnumPrintersA. Error: \" + res);\n      return;\n   }\n\n   var bufSize = pcbNeeded.deref();\n   var buf = Buffer.alloc(bufSize);\n\n   console.log(bufSize);\n\n   //Fill buf with information about printers\n   res = winspoolLib.EnumPrintersA(6, ref.NULL, 4, buf, bufSize, pcbNeeded, pcReturned);\n   if (res == 0) {\n      console.log(\"Cannot get list of printers. Eror: \" + res);\n      return;\n   }\n\n   var countOfPrinters = pcReturned.deref();\n\n   var printers = Array(countOfPrinters);\n   for (var i = 0; i &lt; countOfPrinters; i++) {\n      var pPrinterInfo = ref.get(buf, i*PRINTER_INFO_4A.size, PRINTER_INFO_4A);\n      printers[i] = pPrinterInfo.pPrinterName;\n   }\n\n   return printers;\n};\n\nvar getPrintersW =  function getPrinters() {\n   var PRINTER_INFO_4W = Struct({\n      'pPrinterName' : wchar_string,\n      'pServerName' : wchar_string,\n      'Attributes' : int\n   });\n\n   var printerInfoPtr = ref.refType(PRINTER_INFO_4W);\n\n   var winspoolLib = new ffi.Library('winspool', {\n      'EnumPrintersW': [ int, [ int, wchar_string, int, printerInfoPtr, int, intPtr, intPtr ] ]\n   });\n\n   var pcbNeeded = ref.alloc(int, 0);\n   var pcReturned = ref.alloc(int, 0);\n\n   //Get amount of memory for the buffer with information about printers\n   var res = winspoolLib.EnumPrintersW(6, ref.NULL, 4, ref.NULL, 0, pcbNeeded, pcReturned);\n   if (res != 0) {\n      console.log(\"Cannot get list of printers. Error during first call to EnumPrintersW. Eror code: \" + res);\n      return;\n   }\n\n   var bufSize = pcbNeeded.deref();\n   var buf = Buffer.alloc(bufSize);\n\n   console.log(bufSize);\n\n   //Fill buf with information about printers\n   res = winspoolLib.EnumPrintersW(6, ref.NULL, 4, buf, pcbNeeded.deref(), pcbNeeded, pcReturned);\n   if (res == 0) {\n      console.log(\"Cannot get list of printers. Eror code: \" + res);\n      return;\n   }\n\n   var countOfPrinters = pcReturned.deref();\n   var printers = new Array(countOfPrinters);\n   for (var i = 0; i &lt; countOfPrinters; i++) {\n      var pPrinterInfo = ref.get(buf, i*PRINTER_INFO_4W.size, PRINTER_INFO_4W);\n      printers[i] = pPrinterInfo.pPrinterName;\n   }\n\n   return printers;\n};\n</code></pre>\n\n<p><a href=\"https://msdn.microsoft.com/ru-ru/library/windows/desktop/dd162692(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/ru-ru/library/windows/desktop/dd162692(v=vs.85).aspx</a></p>\n\n<pre><code>BOOL EnumPrinters(\n  _In_  DWORD   Flags,\n  _In_  LPTSTR  Name,\n  _In_  DWORD   Level,\n  _Out_ LPBYTE  pPrinterEnum,\n  _In_  DWORD   cbBuf,\n  _Out_ LPDWORD pcbNeeded,\n  _Out_ LPDWORD pcReturned\n);\n</code></pre>\n\n<p><a href=\"https://msdn.microsoft.com/ru-ru/library/windows/desktop/dd162847(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/ru-ru/library/windows/desktop/dd162847(v=vs.85).aspx</a></p>\n\n<pre><code>typedef struct _PRINTER_INFO_4 {\n  LPTSTR pPrinterName;\n  LPTSTR pServerName;\n  DWORD  Attributes;\n} PRINTER_INFO_4, *PPRINTER_INFO_4;\n</code></pre>\n"}, {"tags": ["c++", "windows"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1481731900, "post_id": 41147129, "comment_id": 69496662, "body": "&quot; <i>crashed immediately</i> &quot; ?"}, {"owner": {"reputation": 78, "user_id": 6873330, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49b4eaba129845c8d05a275ce6e323e6?s=128&d=identicon&r=PG&f=1", "display_name": "mike", "link": "https://stackoverflow.com/users/6873330/mike"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1481731990, "post_id": 41147129, "comment_id": 69496724, "body": "&quot; crashed immediately &quot; ? ! yes it did!"}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1481732267, "post_id": 41147129, "comment_id": 69496920, "body": "What do you mean when you say &quot;crash&quot;?"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 1, "creation_date": 1481732376, "post_id": 41147129, "comment_id": 69497007, "body": "Could you please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? The lines alone seem pretty inoffensive..."}, {"owner": {"reputation": 78, "user_id": 6873330, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49b4eaba129845c8d05a275ce6e323e6?s=128&d=identicon&r=PG&f=1", "display_name": "mike", "link": "https://stackoverflow.com/users/6873330/mike"}, "edited": false, "score": 0, "creation_date": 1481732421, "post_id": 41147129, "comment_id": 69497026, "body": "the problem       &quot;closes&quot;"}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 1, "creation_date": 1481732455, "post_id": 41147129, "comment_id": 69497052, "body": "Yes, and closing doesn&#39;t mean crashing."}, {"owner": {"reputation": 1813, "user_id": 2449857, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jxnCm.jpg?s=128&g=1", "display_name": "Jack Deeth", "link": "https://stackoverflow.com/users/2449857/jack-deeth"}, "edited": false, "score": 0, "creation_date": 1481732593, "post_id": 41147129, "comment_id": 69497150, "body": "It will close when you get to the end of <code>main</code>. The console window may or may not close automatically at that point. On Windows, add <code>system(&quot;pause&quot;);</code> at the end of <code>main</code>. <a href=\"http://melpon.org/wandbox/permlink/Z3nsGxQb6v7OvPDO\" rel=\"nofollow noreferrer\">Here&#39;s an online compiler playing with <code>unsigned long int</code> and <code>cin</code>.</a>"}, {"owner": {"reputation": 78, "user_id": 6873330, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49b4eaba129845c8d05a275ce6e323e6?s=128&d=identicon&r=PG&f=1", "display_name": "mike", "link": "https://stackoverflow.com/users/6873330/mike"}, "reply_to_user": {"reputation": 1813, "user_id": 2449857, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jxnCm.jpg?s=128&g=1", "display_name": "Jack Deeth", "link": "https://stackoverflow.com/users/2449857/jack-deeth"}, "edited": false, "score": 0, "creation_date": 1481732876, "post_id": 41147129, "comment_id": 69497366, "body": "it says the there is a problem in program @JackDeeth"}, {"owner": {"reputation": 78, "user_id": 6873330, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49b4eaba129845c8d05a275ce6e323e6?s=128&d=identicon&r=PG&f=1", "display_name": "mike", "link": "https://stackoverflow.com/users/6873330/mike"}, "edited": false, "score": 0, "creation_date": 1481732898, "post_id": 41147129, "comment_id": 69497386, "body": "i will soon add screen shots!"}], "answers": [{"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 2, "last_activity_date": 1481732906, "creation_date": 1481732906, "answer_id": 41147515, "question_id": 41147129, "link": "https://stackoverflow.com/questions/41147129/is-the-a-memory-issue-c-code-blockswindows/41147515#41147515", "title": "Is the a memory issue? c++ [code blocks][Windows]", "body": "<p>There is no reason for crash here.</p>\n\n<p>The initialization causes a warning on my compiler because of truncation of an unsigned long long value, and the read attempt simply result in an failed read and does not change the value of the variable.</p>\n\n<p>Code demonstrating it (on a 32 bit machine):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n\nusing std::cin;\nusing std::cout;\nusing std::endl;\n\nint main() {\n    unsigned long int b=100000000000; // warning here\n\n    unsigned long int a = 0;\n    cin&gt;&gt;a;\n\n    cout &lt;&lt; \"b:\" &lt;&lt; b &lt;&lt; \"(\" &lt;&lt; std::hex &lt;&lt; b &lt;&lt; \")\" &lt;&lt; \" a:\" &lt;&lt; std::dec &lt;&lt; a &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>The output is as expected</p>\n\n<pre><code>b:1215752192(4876e800) a:0\n</code></pre>\n\n<p>because as an ULL on my architecture 100000000000 is 0x174876E800 and the high order bytes have been truncated...</p>\n"}], "owner": {"reputation": 78, "user_id": 6873330, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49b4eaba129845c8d05a275ce6e323e6?s=128&d=identicon&r=PG&f=1", "display_name": "mike", "link": "https://stackoverflow.com/users/6873330/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 41147515, "answer_count": 1, "score": -1, "last_activity_date": 1481732906, "creation_date": 1481731728, "last_edit_date": 1481732053, "question_id": 41147129, "link": "https://stackoverflow.com/questions/41147129/is-the-a-memory-issue-c-code-blockswindows", "title": "Is the a memory issue? c++ [code blocks][Windows]", "body": "<p>My code blocks of able to compile the code below and worked well:</p>\n\n<pre><code>unsigned long int a=100000000000;\n</code></pre>\n\n<p>My code blocks of able to compile the code below <strong>But my program crashed immediately after i enter the same number(100000000000)</strong>:</p>\n\n<pre><code>unsigned long int a;\n cin&gt;&gt;a;\n</code></pre>\n\n<p>how to fix? Why the fist one is working !why not the second case? </p>\n\n<p>if i entered a number more than max unsigned long int size! then why did the first work?</p>\n"}, {"tags": ["c++", "objective-c", "windows", "macos", "qt"], "comments": [{"owner": {"reputation": 62027, "user_id": 603977, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/myasv.jpg?s=128&g=1", "display_name": "jscs", "link": "https://stackoverflow.com/users/603977/jscs"}, "edited": false, "score": 0, "creation_date": 1481734982, "post_id": 41146980, "comment_id": 69498707, "body": "I haven&#39;t done it, but you can look at <a href=\"http://gnustep.org/windows/index.html\" rel=\"nofollow noreferrer\">GNUStep on Windows</a>."}], "answers": [{"comments": [{"owner": {"reputation": 2832, "user_id": 884891, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dd9602472a4d2dd3efa0793609743471?s=128&d=identicon&r=PG&f=1", "display_name": "guitarflow", "link": "https://stackoverflow.com/users/884891/guitarflow"}, "edited": false, "score": 0, "creation_date": 1481734834, "post_id": 41147271, "comment_id": 69498614, "body": "No need for the wrapper to be tiny. But if I&#39;m using the platform-based UI approach, would I not go with a more modern approach such as WPF? I used MFC a few years back and even there it felt ancient and not really modern. I need my UI to feel as native as possible."}, {"owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "reply_to_user": {"reputation": 2832, "user_id": 884891, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dd9602472a4d2dd3efa0793609743471?s=128&d=identicon&r=PG&f=1", "display_name": "guitarflow", "link": "https://stackoverflow.com/users/884891/guitarflow"}, "edited": false, "score": 0, "creation_date": 1481736309, "post_id": 41147271, "comment_id": 69499525, "body": "WTL seems to me more modern C++ than MFC. Both WTL and MFC wrap Win32 C APIs, in different ways. They can even interoperate. WTL and MFC wrap Windows <i>native</i> UI controls like text boxes, combo boxes, list-view controls, etc., but my understanding is that WPF draws its own controls. If you want to use WPF, you should consider C# instead of C++ for the UI. You can still use cross-platform standard C++ for the &quot;back end&quot;, for the &quot;core&quot;, and use a bridging layer built with C++/CLI between the Windows-specific C# WPF UI and the C++ &quot;core&quot;."}], "tags": [], "owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "is_accepted": false, "score": 0, "last_activity_date": 1481732179, "creation_date": 1481732179, "answer_id": 41147271, "question_id": 41146980, "link": "https://stackoverflow.com/questions/41146980/porting-objective-c-app-to-windows-what-are-the-best-options/41147271#41147271", "title": "Porting Objective-C app to Windows. What are the best options?", "body": "<p>I have almost zero knowledge of Objective-C and macOS UI, but on Windows I think the best C++ OO tiny and efficient wrapper around native C Win32 APIs is <strong>WTL</strong>, based on ATL.</p>\n\n<p>There's a <a href=\"https://www.codeproject.com/articles/3841/wtl-for-mfc-programmers-part-i-atl-gui-classes\" rel=\"nofollow noreferrer\">quality <strong>series on WTL</strong> on CodeProject</a>.</p>\n\n<p>In the realm of Windows-specific C++ frameworks/libraries, you may consider <strong>MFC</strong> as well (which offers good integration with Visual Studio IDE), but honestly I prefer WTL: it's kind of more lightweight than MFC.</p>\n\n<p>In addition, there's the cross-platform Qt alternative you already cited in your question.</p>\n"}], "owner": {"reputation": 2832, "user_id": 884891, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dd9602472a4d2dd3efa0793609743471?s=128&d=identicon&r=PG&f=1", "display_name": "guitarflow", "link": "https://stackoverflow.com/users/884891/guitarflow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1481732179, "creation_date": 1481731297, "question_id": 41146980, "link": "https://stackoverflow.com/questions/41146980/porting-objective-c-app-to-windows-what-are-the-best-options", "title": "Porting Objective-C app to Windows. What are the best options?", "body": "<p>I have a fully-working audio/video application which is entirely written in Objective-C (with bits of C/C++ and GLSL).</p>\n\n<p>I now need to port it to Windows and I'm wondering what my best options are. I'd like to stay in the C/C++ domain so Java is not an option. </p>\n\n<p>I know that this will be a lot of work but I also want this to be good (attention to detail is very important to me, I subclassed many UI elements to suit my needs).</p>\n\n<p>Currently, I think that I could either port the whole app to C++ and use Qt for the whole UI (I did some small projects with that and found it mostly ok) or I could port the application core and write two different UIs for Windows and Mac (the Mac UI is already there of course).</p>\n\n<p>Has anyone of you done what I'm trying to do and can give any insight? What's the best approach and why?</p>\n"}, {"tags": ["c++", "decision-tree"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1481730643, "post_id": 41146714, "comment_id": 69495769, "body": "Have you looked at boost serialization?"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 2, "creation_date": 1481730655, "post_id": 41146714, "comment_id": 69495782, "body": "Yes there is. First you need to design your file. Then you need to write it in that format. Afterwards, read that format."}, {"owner": {"reputation": 3046, "user_id": 3013887, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c1396249d91442e1dde6e93197c0b94a?s=128&d=identicon&r=PG&f=1", "display_name": "pingul", "link": "https://stackoverflow.com/users/3013887/pingul"}, "edited": false, "score": 0, "creation_date": 1481730658, "post_id": 41146714, "comment_id": 69495784, "body": "This question might help you: <a href=\"http://stackoverflow.com/questions/2046829/write-and-read-object-of-class-into-and-from-binary-file\" title=\"write and read object of class into and from binary file\">stackoverflow.com/questions/2046829/&hellip;</a>"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1481730661, "post_id": 41146714, "comment_id": 69495785, "body": "<a href=\"http://uscilab.github.io/cereal/\" rel=\"nofollow noreferrer\">uscilab.github.io/cereal</a>"}, {"owner": {"reputation": 368, "user_id": 4021785, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/urYmi.jpg?s=128&g=1", "display_name": "Mahesh Attarde", "link": "https://stackoverflow.com/users/4021785/mahesh-attarde"}, "edited": false, "score": 0, "creation_date": 1481731482, "post_id": 41146714, "comment_id": 69496378, "body": "Using flatbuffers should work nice. <a href=\"https://google.github.io/flatbuffers/index.html\" rel=\"nofollow noreferrer\">google.github.io/flatbuffers/index.html</a>"}, {"owner": {"reputation": 404, "user_id": 6394768, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7cf4a99b5a18405e4832d0e35e704c7d?s=128&d=identicon&r=PG&f=1", "display_name": "ascetic652", "link": "https://stackoverflow.com/users/6394768/ascetic652"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1481732072, "post_id": 41146714, "comment_id": 69496777, "body": "Can you provide more details? I never used boost library before. @UKMonkey"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1481733026, "post_id": 41146714, "comment_id": 69497467, "body": "@ascetic652  I&#39;ve made an answer out of it."}], "answers": [{"tags": [], "owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "is_accepted": false, "score": 1, "last_activity_date": 1481731186, "creation_date": 1481731186, "answer_id": 41146945, "question_id": 41146714, "link": "https://stackoverflow.com/questions/41146714/write-and-load-decision-tree-to-file-c/41146945#41146945", "title": "write and load decision tree to file C++", "body": "<p>You can do it anyhow you want...</p>\n\n<p>And the real answer: it really is up to you only. If I were you, and had to save this kind of object in a .txt file, I would just make up some way to save this structure, for example as <code>0*0*0.0*0*0.0</code>. With the first <code>0</code> representing the number of child nodes, second <code>0</code> representing the <code>feature</code> value and so on, while <code>*</code> character being a separator between values. Spaces could work better, but I just don't like them as separators in my files... Text file would then have some other character (for example, an <code>|</code>) between each separated object. Example would look like <code>3*22*31.11*1*1.0|2*2*1.0*0*33.3</code>.</p>\n\n<p>Obviously I could've misinterpreted your qestion. If you ask is there a way of saving this particular code and execute it via opening the file in a program without the <code>dt_node</code> class, I, unfortunately, feel like my knowledge is not sufficent enough to answer.</p>\n\n<p>Hope it helps anyhow.</p>\n"}, {"tags": [], "owner": {"reputation": 309, "user_id": 6701991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ijLIr.jpg?s=128&g=1", "display_name": "sx107", "link": "https://stackoverflow.com/users/6701991/sx107"}, "is_accepted": false, "score": 1, "last_activity_date": 1481731565, "creation_date": 1481731565, "answer_id": 41147084, "question_id": 41146714, "link": "https://stackoverflow.com/questions/41146714/write-and-load-decision-tree-to-file-c/41147084#41147084", "title": "write and load decision tree to file C++", "body": "<p>If you would like to write the format yourself, I'll just write every other node's parameters in the file (two doubles, bool and one int) along with it's level starting from the root node and then recurrently proceeding through the tree. As I can see, the bool you have in it controls whether the node have or have not any children, this will help in the reading file process.</p>\n\n<p>File reading will be a bit mode complex than file writing. For each node you read, recurrently, again, read next nodes until any node's level will be equal or lesser than the current node's. It sounds complex, but it really isn't.</p>\n\n<p>Of course you shouldn't write the note* pointers to the file, as they contain useless information, as upon reading the file you will have to recreate the full tree again.</p>\n"}, {"comments": [{"owner": {"reputation": 404, "user_id": 6394768, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7cf4a99b5a18405e4832d0e35e704c7d?s=128&d=identicon&r=PG&f=1", "display_name": "ascetic652", "link": "https://stackoverflow.com/users/6394768/ascetic652"}, "edited": false, "score": 0, "creation_date": 1481733206, "post_id": 41147546, "comment_id": 69497588, "body": "dt_node class has two children of the same type. Do I have to consider recursion when using boost::serialization? @UKMonkey"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 404, "user_id": 6394768, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7cf4a99b5a18405e4832d0e35e704c7d?s=128&d=identicon&r=PG&f=1", "display_name": "ascetic652", "link": "https://stackoverflow.com/users/6394768/ascetic652"}, "edited": false, "score": 0, "creation_date": 1481734542, "post_id": 41147546, "comment_id": 69498448, "body": "Looking more carefully, some parts of this also made it into the std library, <a href=\"https://isocpp.org/wiki/faq/serialization\" rel=\"nofollow noreferrer\">isocpp.org/wiki/faq/serialization</a>  In any case, yes you will have to consider recursion, probably the simplest way to do this is to perform 2 passes; one to generate a structure with all your nodes flattened with a unique id (their pointer?), and then one to save that structure."}], "tags": [], "owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "is_accepted": false, "score": 1, "last_activity_date": 1481733005, "creation_date": 1481733005, "answer_id": 41147546, "question_id": 41146714, "link": "https://stackoverflow.com/questions/41146714/write-and-load-decision-tree-to-file-c/41147546#41147546", "title": "write and load decision tree to file C++", "body": "<p>Adding boost to your project can be a little bit of a pain, but there's quite a few libraries there including maths and graphics, so it may well be worth the effort.</p>\n\n<p>The Boost serialisation docs are <a href=\"http://www.boost.org/doc/libs/1_62_0/libs/serialization/doc/index.html\" rel=\"nofollow noreferrer\">here</a> with a tutorial <a href=\"http://www.boost.org/doc/libs/1_62_0/libs/serialization/doc/tutorial.html\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>The serialisation library allows you to add even just 1 function to your class which then defines how to save and load the state of that class.  How that data is actually saved is then done by the boost library, for example you can have it save with binary, xml &amp; text.</p>\n\n<p>The only thing that you need to watch out for is that the binary serialisation is not machine transferable.</p>\n"}], "owner": {"reputation": 404, "user_id": 6394768, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7cf4a99b5a18405e4832d0e35e704c7d?s=128&d=identicon&r=PG&f=1", "display_name": "ascetic652", "link": "https://stackoverflow.com/users/6394768/ascetic652"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 820, "favorite_count": 0, "closed_date": 1481759572, "answer_count": 3, "score": 0, "last_activity_date": 1481733005, "creation_date": 1481730548, "question_id": 41146714, "link": "https://stackoverflow.com/questions/41146714/write-and-load-decision-tree-to-file-c", "closed_reason": "Duplicate", "title": "write and load decision tree to file C++", "body": "<p>I have a decision tree node class defined in following way:</p>\n\n<pre><code>class dt_node\n{\npublic:    \n    dt_node* child[2]; //two child nodes\n    int feature;\n    double value; // feature and value this node splits on\n    bool leaf;\n    double pred; // what this node predicts if leaf node\n}\n</code></pre>\n\n<p>Is there a way I can write this to a file and reconstruct the tree from the file if needed?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1481731337, "post_id": 41146455, "comment_id": 69496275, "body": "This isn&#39;t the problem, but it&#39;s a bit odd that the name of the input file goes into a variable named <code>user_input_file</code>, and that the input comes from a stream named <code>file_name</code>."}], "answers": [{"tags": [], "owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "is_accepted": false, "score": 0, "last_activity_date": 1481730592, "creation_date": 1481730592, "answer_id": 41146737, "question_id": 41146455, "link": "https://stackoverflow.com/questions/41146455/first-letters-being-erased-when-reading-from-data-file-c/41146737#41146737", "title": "First letters being erased when reading from data file c++", "body": "<p>You are using wrongly ifstream::ignore().</p>\n\n<blockquote>\n  <p>Extracts characters from the input sequence and discards them, <strong>until\n  either n characters have been extracted</strong>, or one compares equal to\n  delim.</p>\n</blockquote>\n\n<p><code>file_name.ignore(1, '\\n');</code> always dismiss the first letter. In your case, the first letter after \";\" in line.</p>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 1, "last_activity_date": 1481730688, "creation_date": 1481730688, "answer_id": 41146768, "question_id": 41146455, "link": "https://stackoverflow.com/questions/41146455/first-letters-being-erased-when-reading-from-data-file-c/41146768#41146768", "title": "First letters being erased when reading from data file c++", "body": "<p>It is ignoring the first character because you tell it to</p>\n\n<pre><code>file_name.ignore(1, '\\n');\n</code></pre>\n\n<p>Is going to ignore the first character in the stream after each call to <code>getline</code>.  It looks like you are doing this because you think the <code>;</code> in the file it still there.  What you need to remember about <code>getline</code> is that it discards the delimiter you use.  That means it will read until it finds a <code>;</code> and then it tosses that <code>;</code> out.  This means you do not need to ignore it since it is no longer there.</p>\n\n<p>Just removing the call to <code>ignore</code> is not enough to fix the issue though.  Since you are trying to parse an entire line what we need to do is read the line into a <code>stringstream</code> and then call <code>getline</code> on the stream to get the individual parts.  This is because just reading to <code>;</code> is going to capture the newline.</p>\n\n<p>A quick refactor of your code gives you something that should look like</p>\n\n<pre><code>for (int row = 0; row &lt;= 9; row++)\n{\n    std::string temp;\n    std::getline(file_name, temp)\n    std::stringstream ss(temp)\n    for (int col = 0; col &lt; 4; col++)\n    {\n        if (getline(ss, line, ';'))\n        {\n            read_in_array[row][col] = line;\n            cout &lt;&lt; read_in_array[row][col];\n        }\n    }\n    cout &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1481730716, "creation_date": 1481730716, "answer_id": 41146779, "question_id": 41146455, "link": "https://stackoverflow.com/questions/41146455/first-letters-being-erased-when-reading-from-data-file-c/41146779#41146779", "title": "First letters being erased when reading from data file c++", "body": "<p><code>file_name.ignore(1, '\\n');</code> will make the stream ignore one character from the input.</p>\n\n<p>From reading your code:</p>\n\n<ul>\n<li>For what you call \"the 0 part\", <code>ignore</code> is not called yet before the first <code>getline</code> in the loop.</li>\n<li>For \"parts 1/2/3\", the <code>ignore</code> statement makes the stream skip the next character</li>\n<li>For the remaining parts, there is either a space or a '\\n' that was skipped so that the readable letter was not skipped.</li>\n</ul>\n"}], "owner": {"reputation": 33, "user_id": 7293148, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1413f058b07a2a065370c3dfaf091e95?s=128&d=identicon&r=PG&f=1", "display_name": "Marsh", "link": "https://stackoverflow.com/users/7293148/marsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 41146768, "answer_count": 3, "score": 0, "last_activity_date": 1481730716, "creation_date": 1481729798, "question_id": 41146455, "link": "https://stackoverflow.com/questions/41146455/first-letters-being-erased-when-reading-from-data-file-c", "title": "First letters being erased when reading from data file c++", "body": "<p>Can someone please explain why only the first letters are being deleted when reading in from a data file but only on the 1/2/3 parts of the array and not the 0 part? (sorry really don't know how to explain it)(I'll only include part of what I am getting as well as data file)</p>\n\n<p><strong>What i get</strong></p>\n\n<p>GoogleyleSmith01@gmail.comyleman27ecurity question:White rabbit with a watch\nDeviantartragonmaster27andalfthegreyNULL</p>\n\n<p><strong>What it's supposed to be</strong></p>\n\n<p>GoogleKyleSmith01@gmail.comKyleman27securityquestion:Whiterabbitwithawatch\nDeviantartDragonmaster27GandalfthegreyNULL</p>\n\n<p><strong>And the original data file</strong></p>\n\n<p>Google;KyleSmith01@gmail.com;Kyleman27;security question:White rabbit with a watch;\nDeviantart;Dragonmaster27;Gandalfthegrey; NULL;</p>\n\n<p><strong>I won't include all of the code as it shouldn't be relevant to this issue</strong></p>\n\n<pre><code>#include&lt;iostream&gt;\n#include &lt;fstream&gt; \n#include &lt;string&gt; \n#include &lt;vector&gt;\n#include&lt;sstream&gt;\nusing namespace std;\n\nconst int NCOLS = 4;\nconst int NROWS = 10;\n\nvoid description_and_options(string data[][NCOLS], int count[NCOLS]);\nvoid available_options();\nvoid view_line_data(int choice,string data[][NCOLS]);\n\nint main()\n{\n    ifstream file_name;//create the new file\n    string user_input_file;//the files name inputed by the user \n    int stringlength;\n    string read_in_array[NROWS][NCOLS];\n    string line;\n    int counter[10] = { 1,2,3,4,5,6,7,8,9,10 };\n    string user_option_choice;\n    string small_exit = \"x\";\n    string large_exit = \"X\";\n    int view_choice;\n\n    cout &lt;&lt; \"Enter the name of the input file: \";\n\n    cin &gt;&gt; user_input_file;\n\n    if (user_input_file.length() &gt; 4)// check to see if its more than 4 in length\n    {\n        stringlength = user_input_file.length(); //saves length\n        if (user_input_file.substr(stringlength - 4, 4) == \".txt\")//checks to see if its .dat\n        {\n            file_name.open(user_input_file.c_str());\n            if (file_name.fail())\n            {\n                cerr &lt;&lt; \"The file \" &lt;&lt; user_input_file &lt;&lt; \" failed to open.\\n\";//tells user if it fails\n                exit(1);\n            }\n        }\n    }\n    else\n    {\n        user_input_file += \".txt\";//adds .dat to non .dat \n        file_name.open(user_input_file.c_str());\n    }\n\n    if (file_name.fail())\n    {\n        cout &lt;&lt; \"File failed to open\" &lt;&lt; endl;\n        system(\"PAUSE\");\n        exit(1);\n    }\n    for (int row = 0; row &lt;= 9; row++)\n    {\n        for (int col = 0; col &lt; 4; col++)\n        {\n            if (getline(file_name, line, ';'))\n            {\n                file_name.ignore(1, '\\n');\n                read_in_array[row][col] = line;\n                cout &lt;&lt; read_in_array[row][col];\n            }\n        }\n        cout &lt;&lt; endl;\n    }\n    //[updown][leftright]\n    file_name.close();\n</code></pre>\n\n<p>is there anyway to fix this without completely changing the code?</p>\n"}, {"tags": ["c++", "opengl", "glfw"], "comments": [{"owner": {"reputation": 3046, "user_id": 3013887, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c1396249d91442e1dde6e93197c0b94a?s=128&d=identicon&r=PG&f=1", "display_name": "pingul", "link": "https://stackoverflow.com/users/3013887/pingul"}, "edited": false, "score": 1, "creation_date": 1481730139, "post_id": 41146121, "comment_id": 69495414, "body": "Looking at <a href=\"https://github.com/glfw/glfw/issues/876\" rel=\"nofollow noreferrer\">github.com/glfw/glfw/issues/876</a> this seems to have been a bug. Are you running the latest version of GLFW? (And are you using macOS Sierra?)"}, {"owner": {"reputation": 682, "user_id": 7253878, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/52963dc20521e67ea382effca33592b6?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/7253878/matthew"}, "reply_to_user": {"reputation": 3046, "user_id": 3013887, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c1396249d91442e1dde6e93197c0b94a?s=128&d=identicon&r=PG&f=1", "display_name": "pingul", "link": "https://stackoverflow.com/users/3013887/pingul"}, "edited": false, "score": 0, "creation_date": 1481732485, "post_id": 41146121, "comment_id": 69497077, "body": "@pingul yes on both"}, {"owner": {"reputation": 3046, "user_id": 3013887, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c1396249d91442e1dde6e93197c0b94a?s=128&d=identicon&r=PG&f=1", "display_name": "pingul", "link": "https://stackoverflow.com/users/3013887/pingul"}, "edited": false, "score": 0, "creation_date": 1481734995, "post_id": 41146121, "comment_id": 69498717, "body": "And what version of Sierra? This <a href=\"https://forums.developer.apple.com/thread/49052\" rel=\"nofollow noreferrer\">forums.developer.apple.com/thread/49052</a> seems to suggest it&#39;s a problem with apple as well."}, {"owner": {"reputation": 682, "user_id": 7253878, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/52963dc20521e67ea382effca33592b6?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/7253878/matthew"}, "reply_to_user": {"reputation": 3046, "user_id": 3013887, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c1396249d91442e1dde6e93197c0b94a?s=128&d=identicon&r=PG&f=1", "display_name": "pingul", "link": "https://stackoverflow.com/users/3013887/pingul"}, "edited": false, "score": 0, "creation_date": 1481735725, "post_id": 41146121, "comment_id": 69499163, "body": "@pingul Serria: 10.12.1 and GLFW: 3.2.1"}, {"owner": {"reputation": 3046, "user_id": 3013887, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c1396249d91442e1dde6e93197c0b94a?s=128&d=identicon&r=PG&f=1", "display_name": "pingul", "link": "https://stackoverflow.com/users/3013887/pingul"}, "edited": false, "score": 1, "creation_date": 1481736063, "post_id": 41146121, "comment_id": 69499377, "body": "There&#39;s a new version of Sierra out (10.12.2), you could try to upgrade. How did you install GLFW? Looking at the latest compiled release at <a href=\"http://www.glfw.org/changelog.html\" rel=\"nofollow noreferrer\">glfw.org/changelog.html</a> it doesn&#39;t look like the bug fix is included, however at the git-rep <a href=\"https://github.com/glfw/glfw\" rel=\"nofollow noreferrer\">github.com/glfw/glfw</a>. I would try to pull the code from the repo and compile it locally."}, {"owner": {"reputation": 682, "user_id": 7253878, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/52963dc20521e67ea382effca33592b6?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/7253878/matthew"}, "reply_to_user": {"reputation": 3046, "user_id": 3013887, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c1396249d91442e1dde6e93197c0b94a?s=128&d=identicon&r=PG&f=1", "display_name": "pingul", "link": "https://stackoverflow.com/users/3013887/pingul"}, "edited": false, "score": 0, "creation_date": 1481749275, "post_id": 41146121, "comment_id": 69506368, "body": "@pingul you suggestion to use the github.com version worked perfectly. I have one last question and that is it generates documentation warnings from glfw is there anyway to suppress these warnings?"}, {"owner": {"reputation": 3046, "user_id": 3013887, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c1396249d91442e1dde6e93197c0b94a?s=128&d=identicon&r=PG&f=1", "display_name": "pingul", "link": "https://stackoverflow.com/users/3013887/pingul"}, "edited": false, "score": 0, "creation_date": 1481792769, "post_id": 41146121, "comment_id": 69521306, "body": "Great! I&#39;ve added the contents of my comment as an answer. Do you get documentation warnings when you compile or when you run? And what kinds of warnings? It might be considered off-topic for your current question, so it could be an idea to post another one."}, {"owner": {"reputation": 682, "user_id": 7253878, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/52963dc20521e67ea382effca33592b6?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/7253878/matthew"}, "reply_to_user": {"reputation": 3046, "user_id": 3013887, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c1396249d91442e1dde6e93197c0b94a?s=128&d=identicon&r=PG&f=1", "display_name": "pingul", "link": "https://stackoverflow.com/users/3013887/pingul"}, "edited": false, "score": 0, "creation_date": 1482097759, "post_id": 41146121, "comment_id": 69625293, "body": "just warnings on from what I can tell the doxygen. It shows the warnings on build or running of the code."}, {"owner": {"reputation": 395, "user_id": 4935801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/773891072709426/picture?type=large", "display_name": "Teng Long", "link": "https://stackoverflow.com/users/4935801/teng-long"}, "edited": false, "score": 0, "creation_date": 1491990110, "post_id": 41146121, "comment_id": 73793426, "body": "This has been fixed in the glfw-master version."}], "answers": [{"tags": [], "owner": {"reputation": 3046, "user_id": 3013887, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c1396249d91442e1dde6e93197c0b94a?s=128&d=identicon&r=PG&f=1", "display_name": "pingul", "link": "https://stackoverflow.com/users/3013887/pingul"}, "is_accepted": true, "score": 5, "last_activity_date": 1498734954, "last_edit_date": 1498734954, "creation_date": 1481792655, "answer_id": 41160141, "question_id": 41146121, "link": "https://stackoverflow.com/questions/41146121/glfw-first-responder-error/41160141#41160141", "title": "GLFW first responder error", "body": "<p><a href=\"http://github.com/glfw/glfw/issues/876\" rel=\"nofollow noreferrer\">This</a> seems to indicate that this is a known bug in macOS Sierra, and looking at the <a href=\"http://github.com/glfw/glfw\" rel=\"nofollow noreferrer\">git-repo</a> it seems to be fixed. However, it does not look like the (currently) <a href=\"http://glfw.org/changelog.html\" rel=\"nofollow noreferrer\">latest version on their webpage</a> has been updated. </p>\n\n<p>If you have installed GLFW from their website, I recommend pulling the code from git and compiling it locally.</p>\n\n<p>(Edit: see <a href=\"https://gist.github.com/vaiorabbit/6204931\" rel=\"nofollow noreferrer\">this</a> for some helpful details about building the .dylib file from the source.)</p>\n"}], "owner": {"reputation": 682, "user_id": 7253878, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/52963dc20521e67ea382effca33592b6?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/7253878/matthew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2453, "favorite_count": 2, "accepted_answer_id": 41160141, "answer_count": 1, "score": 6, "last_activity_date": 1498734954, "creation_date": 1481728860, "last_edit_date": 1481729366, "question_id": 41146121, "link": "https://stackoverflow.com/questions/41146121/glfw-first-responder-error", "title": "GLFW first responder error", "body": "<p>I am trying to create a simple GLFW window and a succeed but xcode gives me an error:</p>\n\n<pre><code>2016-12-14 10:16:40.412191 CREngine[830:21929] [General] ERROR: Setting &lt;GLFWContentView: 0x100369850&gt; as the first responder for window &lt;GLFWWindow: 0x10033ea00&gt;, but it is in a different window ((null))! This would eventually crash when the view is freed. The first responder will be set to nil.\n(\n    0   AppKit                              0x00007fff9710b9a4 -[NSWindow _validateFirstResponder:] + 566\n    1   AppKit                              0x00007fff968fc9eb -[NSWindow _setFirstResponder:] + 31\n    2   AppKit                              0x00007fff969a466a -[NSWindow _realMakeFirstResponder:] + 406\n    3   AppKit                              0x00007fff969a4480 -[NSWindow makeFirstResponder:] + 123\n    4   libglfw.3.dylib                     0x00000001000a9895 _glfwPlatformCreateWindow + 631\n    5   libglfw.3.dylib                     0x00000001000a5430 glfwCreateWindow + 487\n    6   CREngine                            0x0000000100000e87 main + 135\n    7   libdyld.dylib                       0x00007fffadd2d255 start + 1\n)\nProgram ended with exit code: 0\n</code></pre>\n\n<p>The code I used is:</p>\n\n<pre><code>#include &lt;GLFW/glfw3.h&gt;\n\nint main(void)\n{\n    GLFWwindow* window;\n\n    /* Initialize the library */\n    if (!glfwInit())\n        return -1;\n\n    glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 3);\n    glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 2);\n    glfwWindowHint(GLFW_OPENGL_FORWARD_COMPAT, GL_TRUE);\n    glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);\n\n    /* Create a windowed mode window and its OpenGL context */\n    window = glfwCreateWindow(640, 480, \"Hello World\", NULL, NULL);\n    if (!window)\n    {\n        glfwTerminate();\n        return -1;\n    }\n\n    /* Make the window's context current */\n    glfwMakeContextCurrent(window);\n\n    /* Loop until the user closes the window */\n    while (!glfwWindowShouldClose(window))\n    {\n        /* Render here */\n        glClear(GL_COLOR_BUFFER_BIT);\n\n        /* Swap front and back buffers */\n        glfwSwapBuffers(window);\n\n        /* Poll for and process events */\n        glfwPollEvents();\n    }\n\n    glfwTerminate();\n    return 0;\n}\n</code></pre>\n\n<p>The part that is confusing me is from what I have looked up is that including the hints that I have will allow it to work on mac but for some reason I am stilling getting the errors so I was hoping that someone could help me solve this error.</p>\n"}, {"tags": ["c++", "lambda", "libstrophe"], "comments": [{"owner": {"reputation": 1479, "user_id": 5974620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/00f80491613fff8cf4efc2a30a4f311b?s=128&d=identicon&r=PG&f=1", "display_name": "Sossisos", "link": "https://stackoverflow.com/users/5974620/sossisos"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1481728937, "post_id": 41146073, "comment_id": 69494688, "body": "@Olaf my apologies, I thought they were relevant because libstrophe is written in C, and the answer to the question might be that I&#39;m misunderstanding how to use xmpp"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1481729337, "post_id": 41146073, "comment_id": 69494945, "body": "As I understand you ask about using a library from C++. It does not look like a question about the C language itself (resp. problems with that language). Similar for xmpp. The libaray-tag should be sufficient here. If an answer proves me wrong, feel free to add a tag (after all I&#39;m not perfect and can err like every one else), but please refrain from adding in advance."}, {"owner": {"reputation": 1479, "user_id": 5974620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/00f80491613fff8cf4efc2a30a4f311b?s=128&d=identicon&r=PG&f=1", "display_name": "Sossisos", "link": "https://stackoverflow.com/users/5974620/sossisos"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1481729562, "post_id": 41146073, "comment_id": 69495081, "body": "@RichardHodges I&#39;ve got plenty of IDs, that&#39;s not the problem. The problem is that strophe does not allow you to use the same handler function twice, even if you use different IDs and userdata"}, {"owner": {"reputation": 1043, "user_id": 6809386, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6yetp.gif?s=128&g=1", "display_name": "Alexander Anikin", "link": "https://stackoverflow.com/users/6809386/alexander-anikin"}, "edited": false, "score": 0, "creation_date": 1481736008, "post_id": 41146073, "comment_id": 69499348, "body": "@Sossisos hash_get(conn-&gt;id_handlers, id) returns handlers list for specific id, so it should not block you from using same function for different ids."}, {"owner": {"reputation": 1479, "user_id": 5974620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/00f80491613fff8cf4efc2a30a4f311b?s=128&d=identicon&r=PG&f=1", "display_name": "Sossisos", "link": "https://stackoverflow.com/users/5974620/sossisos"}, "reply_to_user": {"reputation": 1043, "user_id": 6809386, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6yetp.gif?s=128&g=1", "display_name": "Alexander Anikin", "link": "https://stackoverflow.com/users/6809386/alexander-anikin"}, "edited": false, "score": 0, "creation_date": 1481804647, "post_id": 41146073, "comment_id": 69528613, "body": "@AlexanderAnikin the specific blocking line of code is &quot;if (item-&gt;handler == (void *)handler)&quot;"}, {"owner": {"reputation": 1043, "user_id": 6809386, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6yetp.gif?s=128&g=1", "display_name": "Alexander Anikin", "link": "https://stackoverflow.com/users/6809386/alexander-anikin"}, "edited": false, "score": 0, "creation_date": 1481809426, "post_id": 41146073, "comment_id": 69531650, "body": "@Sossisos then how comes your handler is in list of handlers for different id?"}], "answers": [{"comments": [{"owner": {"reputation": 1479, "user_id": 5974620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/00f80491613fff8cf4efc2a30a4f311b?s=128&d=identicon&r=PG&f=1", "display_name": "Sossisos", "link": "https://stackoverflow.com/users/5974620/sossisos"}, "edited": false, "score": 0, "creation_date": 1481804526, "post_id": 41147162, "comment_id": 69528541, "body": "This is a very clever idea, but unfortunately we only use C++11 :/ I&#39;ll update the question"}], "tags": [], "owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "is_accepted": false, "score": 1, "last_activity_date": 1481731799, "creation_date": 1481731799, "answer_id": 41147162, "question_id": 41146073, "link": "https://stackoverflow.com/questions/41146073/how-to-make-unique-lambda-instances-in-c-or-how-to-set-up-id-message-handler/41147162#41147162", "title": "How to make unique lambda instances in C++? Or, how to set up id message handlers in xmpp with libstrophe?", "body": "<p>If you are using c++14 you could create a generic lambda returning unique lambda (or rather lambda converted to static function) each time you call it:</p>\n\n<pre><code>auto msgHandlerCreator = [](auto X){ return +[](xmpp_conn_t* const pConn, \n                 xmpp_stanza_t* const pStanza, \n                 void* const pUserdata) -&gt; int {/*...*/}; };\n</code></pre>\n\n<p>and call it each time with a different <code>std::integral_constant</code> e.g.:</p>\n\n<pre><code>msgHandlerCreator(std::integral_constant&lt;std::size_t, 0&gt;{})\nmsgHandlerCreator(std::integral_constant&lt;std::size_t, 1&gt;{})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "is_accepted": false, "score": 1, "last_activity_date": 1481830128, "last_edit_date": 1481830128, "creation_date": 1481819038, "answer_id": 41168854, "question_id": 41146073, "link": "https://stackoverflow.com/questions/41146073/how-to-make-unique-lambda-instances-in-c-or-how-to-set-up-id-message-handler/41168854#41168854", "title": "How to make unique lambda instances in C++? Or, how to set up id message handlers in xmpp with libstrophe?", "body": "<p>In case of c++11 it won't be as easy to allow lambda to be declared inline but let's give it a try. We could create some helper struct to wrap our lambda but as unary <code>+</code> operator isn't constexpr (lambda has not linkage) we need to do some workarounds...:</p>\n\n<pre><code>template &lt;class... Args&gt;\nstruct voider {\n    using type = void;\n};\n\ntemplate &lt;std::size_t, class, class = void&gt;\nstruct FunctionWrapper;\n\ntemplate &lt;std::size_t N, class L&gt;\nstruct FunctionWrapper&lt;N, L, typename voider&lt;decltype(&amp;L::operator())&gt;::type&gt;: FunctionWrapper&lt;N, decltype(&amp;L::operator())&gt; {};\n\ntemplate &lt;std::size_t N, class Res, class L, class... Args&gt;\nstruct FunctionWrapper&lt;N, Res (L::*)(Args...) const, void&gt; {\n    static Res (*l)(Args...);\n    static Res foo(Args... args) {\n        return l(args...);\n    }\n};\n\ntemplate &lt;std::size_t N, class Res, class L, class... Args&gt;\nRes (* FunctionWrapper&lt;N, Res (L::*)(Args...) const, void&gt;::l)(Args...);\n</code></pre>\n\n<p><code>FunctionWrapper</code> should now provide unique static function for each pair <code>std::size_t</code> x <code>Lambda</code>. Now function that will do actual wrapping:</p>\n\n<pre><code>template &lt;std::size_t N, class L&gt;\ndecltype(&amp;FunctionWrapper&lt;N, L&gt;::foo) wrap(L &amp;l) {\n    FunctionWrapper&lt;N, L&gt;::l = +l;\n    return &amp;FunctionWrapper&lt;N, L&gt;::foo;\n}\n</code></pre>\n\n<p>And we can enjoy unique function pointer for passed lambda as long as we provide unique id as a value known at compile time for each <code>wrap</code> call:</p>\n\n<pre><code>auto lambda = [](int x){std::cout &lt;&lt; x &lt;&lt; std::endl;};\nstd::cout &lt;&lt; (void *)wrap&lt;0&gt;(lambda) &lt;&lt; std::endl;\nstd::cout &lt;&lt; (void *)wrap&lt;1&gt;(lambda) &lt;&lt; std::endl;\nwrap&lt;0&gt;(lambda)(1);\nwrap&lt;1&gt;(lambda)(1);\n</code></pre>\n\n<p>Exemplary output:</p>\n\n<blockquote>\n  <p>0x400f28<br>\n  0x400f76<br>\n  1<br>\n  1</p>\n</blockquote>\n\n<p><a href=\"http://melpon.org/wandbox/permlink/tzMy9YndrnSEnoIk\" rel=\"nofollow noreferrer\">[live demo]</a></p>\n"}, {"tags": [], "owner": {"reputation": 76, "user_id": 6179102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e201f69d5da47f3f072f123584a5f778?s=128&d=identicon&r=PG", "display_name": "Dmitry Podgorny", "link": "https://stackoverflow.com/users/6179102/dmitry-podgorny"}, "is_accepted": true, "score": 1, "last_activity_date": 1481846633, "creation_date": 1481846633, "answer_id": 41175332, "question_id": 41146073, "link": "https://stackoverflow.com/questions/41146073/how-to-make-unique-lambda-instances-in-c-or-how-to-set-up-id-message-handler/41175332#41175332", "title": "How to make unique lambda instances in C++? Or, how to set up id message handlers in xmpp with libstrophe?", "body": "<p>Same problem has already been mentioned in the libstrophe issue tracker: <a href=\"https://github.com/strophe/libstrophe/issues/97\" rel=\"nofollow noreferrer\">https://github.com/strophe/libstrophe/issues/97</a>. There is a patch in separated branch which is going to be merged to the master branch. Therefore, minor release <code>0.9.2</code> will contain it. The patch allows to add unique pairs of <code>handler</code> plus <code>userdata</code> instead of only <code>handler</code>.</p>\n"}], "owner": {"reputation": 1479, "user_id": 5974620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/00f80491613fff8cf4efc2a30a4f311b?s=128&d=identicon&r=PG&f=1", "display_name": "Sossisos", "link": "https://stackoverflow.com/users/5974620/sossisos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 41175332, "answer_count": 3, "score": 0, "last_activity_date": 1481846633, "creation_date": 1481728756, "last_edit_date": 1481804554, "question_id": 41146073, "link": "https://stackoverflow.com/questions/41146073/how-to-make-unique-lambda-instances-in-c-or-how-to-set-up-id-message-handler", "title": "How to make unique lambda instances in C++? Or, how to set up id message handlers in xmpp with libstrophe?", "body": "<p>I'm using the <a href=\"https://github.com/strophe/libstrophe\" rel=\"nofollow noreferrer\">C libstrophe library</a> to make an xmpp application in C++11. I'm trying to register message handlers for specific IDs, so I can recognize a specific return message, using <a href=\"https://github.com/strophe/libstrophe/blob/80a7ea0b7c645233319589a72fbb7b13d36fbb72/src/handler.c\" rel=\"nofollow noreferrer\">xmpp_id_handler_add</a>. </p>\n\n<pre><code>void xmpp_id_handler_add(xmpp_conn_t * const conn,\n                         xmpp_handler handler,\n                         const char * const id,\n                         void * const userdata)\n</code></pre>\n\n<p>But there's something about strophe's implementation of this that I don't understand.</p>\n\n<p>Strophe will only accept a function pointer of the form</p>\n\n<pre><code>typedef int (*xmpp_handler)(xmpp_conn_t * const conn, \n                            xmpp_stanza_t * const stanza, \n                            void * const userdata);\n</code></pre>\n\n<p>That's easy enough to do with a static function, but looking through the source code I find <a href=\"https://github.com/strophe/libstrophe/blob/80a7ea0b7c645233319589a72fbb7b13d36fbb72/src/handler.c\" rel=\"nofollow noreferrer\">this</a></p>\n\n<pre><code>    /* check if handler is already in the list */\n    item = (xmpp_handlist_t *)hash_get(conn-&gt;id_handlers, id);\n    while (item) {\n        if (item-&gt;handler == (void *)handler)\n            break;\n        item = item-&gt;next;\n    }\n    if (item) return;\n</code></pre>\n\n<p>Meaning that if I try to call xmpp_id_handler_add twice with the same static function, but a different id and userdata, it will reject the second call.</p>\n\n<p>So I thought that maybe I could make a lambda every time I want to add a new ID handler, like so</p>\n\n<pre><code>auto msgHandler = [](xmpp_conn_t* const pConn, \n                     xmpp_stanza_t* const pStanza, \n                     void* const pUserdata) -&gt; int\n</code></pre>\n\n<p>But when I looked at the pointer value of the lambda</p>\n\n<pre><code>printf(\"%p\\n\", (void*)((xmpp_handler)msgHandler));\n</code></pre>\n\n<p>And ran it twice, I got the same value both times. It seems the lambda is just like a static function in this case.</p>\n\n<p>So, how can I make a new, unique function pointer every time I want to listen for a new ID? Alternately, am I misunderstanding how libstrophe is supposed to be used? Are you supposed to have a new static function for each new ID you want to listen for?</p>\n"}, {"tags": ["c++", "visual-studio", "googletest"], "comments": [{"owner": {"reputation": 326, "user_id": 4975230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NQ8VO.jpg?s=128&g=1", "display_name": "jrh", "link": "https://stackoverflow.com/users/4975230/jrh"}, "edited": false, "score": 0, "creation_date": 1533673294, "post_id": 41146042, "comment_id": 90430416, "body": "Not sure how related this is, but I also got a similar error when working with MSTest, on a C# project (also in VS 2015); it seemed to immediately halt debugging on the test method. I re-ran the test and it worked without issue."}], "owner": {"reputation": 81, "user_id": 7296904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c7181b2f93bff072b9840bd7772be53?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel M.", "link": "https://stackoverflow.com/users/7296904/marcel-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 497, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1481728653, "creation_date": 1481728653, "last_edit_date": 1592644375, "question_id": 41146042, "link": "https://stackoverflow.com/questions/41146042/invalidoperationexception-in-system-servicemodel-dll-using-visual-studio-2015-wi", "title": "InvalidOperationException in System.ServiceModel.dll using Visual Studio 2015 with C++, GoogleTest Framework and Google Test Adapter", "body": "<p>I'm using Visual Studio 2015 with the GoogleTest Framework and the Google Test Adapter to test some C++ Code. Here is my code</p>\n<h2>main.cpp</h2>\n<pre><code>#include &quot;gtest/gtest-spi.h&quot;\n\nint main( int ac, char* av[] )\n{\n    testing::InitGoogleTest( &amp;ac, av );\n    return RUN_ALL_TESTS();\n}\n\nTEST( Dummy_General, NumberComparison )\n{\n    EXPECT_EQ( 10.0, 10.0 );\n    EXPECT_GT( 5, 2 );\n    EXPECT_LT( 4, 6 );\n}\n</code></pre>\n<p>When I run the test everything works as expected, but while debugging I get the following exception without even reaching the main function:</p>\n<blockquote>\n<p>Exception thrown: 'System.InvalidOperationException' in\nSystem.ServiceModel.dll</p>\n<p>Additional information: The communication\nobject,\nSystem.ServiceModel.Channels.WindowsStreamSecurityUpgradeProvider, is\nin the Opening state.  Communication objects cannot be used for\ncommunication unless they are in the Opened state.</p>\n</blockquote>\n<p>Later I also get:</p>\n<blockquote>\n<p>Exception thrown: 'System.IO.FileNotFoundException' in mscorlib.dll</p>\n<p>Exception thrown: 'System.IO.FileNotFoundException' in\nMicrosoft.PythonTools.VSInterpreters.dll</p>\n</blockquote>\n<p>Between lots of:</p>\n<blockquote>\n<p>Exception thrown at 0x00007FF899DD1F28 in vstest.executionengine.exe:\nMicrosoft C++ exception: EEFileLoadException at memory location\n0x000000096EBFC0B0.</p>\n<p>Exception thrown at 0x00007FF899DD1F28 in\nvstest.executionengine.exe: Microsoft C++ exception: [rethrow] at\nmemory location 0x0000000000000000.</p>\n<p>Exception thrown at\n0x00007FF899DD1F28 in vstest.executionengine.exe: Microsoft C++\nexception: EEFileLoadException at memory location 0x000000096EBFC0B0.</p>\n<p>Exception thrown at 0x00007FF899DD1F28 in vstest.executionengine.exe:\nMicrosoft C++ exception: EEFileLoadException at memory location\n0x000000096EBFC0B0.</p>\n<p>Exception thrown at 0x00007FF899DD1F28 in\nvstest.executionengine.exe: Microsoft C++ exception: [rethrow] at\nmemory location 0x0000000000000000.</p>\n</blockquote>\n<p>I searched for this error without getting an answer. Might there be a bug in the Google Test Adapter?</p>\n<p>Thanks</p>\n<p>Marcel</p>\n"}, {"tags": ["c++", "datetime", "mktime"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "edited": false, "score": 0, "creation_date": 1481732859, "post_id": 41145870, "comment_id": 69497351, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/21172767/parsing-an-date-time-string-with-stdget-time-needs-separators\">Parsing an date/time string with std::get_time needs separators?</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "edited": false, "score": 0, "creation_date": 1481732976, "post_id": 41145870, "comment_id": 69497437, "body": "Apparently this is a documented VC error. This does not happen with g++ which is probably what the online compiler is using."}, {"owner": {"reputation": 2615, "user_id": 2385414, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DcTdB.png?s=128&g=1", "display_name": "urzeit", "link": "https://stackoverflow.com/users/2385414/urzeit"}, "edited": false, "score": 0, "creation_date": 1481869203, "post_id": 41145870, "comment_id": 69556814, "body": "Grammar, link, typos, code"}], "owner": {"reputation": 1, "user_id": 5070582, "user_type": "registered", "profile_image": "https://graph.facebook.com/586637424809331/picture?type=large", "display_name": "M\u0103c\u0103u Maria Giorgiana", "link": "https://stackoverflow.com/users/5070582/m%c4%83c%c4%83u-maria-giorgiana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1481869051, "creation_date": 1481728128, "last_edit_date": 1481869051, "question_id": 41145870, "link": "https://stackoverflow.com/questions/41145870/function-mktime-returns-1-on-my-computer-but-correct-result-executed-by-online", "title": "Function mktime returns -1 on my computer, but correct result executed by online compiler", "body": "<p>I'm trying to read a <code>wstring</code> which contains some random date, add some minutes and then compare it with my computers date. I've tried the same code on <a href=\"http://rextester.com/l/cpp_online_compiler_visual\" rel=\"nofollow noreferrer\">this site</a> and it works just fine, but when I try to run it in Visual Studio 2013 <code>t1</code> is set to <code>-1</code> and <code>diff</code> to <code>0</code>.</p>\n\n<p>My code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;ctime&gt;\n#include &lt;iomanip&gt;\n#include &lt;sstream&gt;\n#include &lt;thread&gt;\n\nint main()\n{\n    std::wstring updateTime(L\"Thu Dec 14 15:06:00 2016\");\n    std::wstring updatePeriod(L\"30\");\n    std::string timeUpdate(updateTime.begin(), updateTime.end());\n    std::istringstream ss{ timeUpdate };\n    struct tm dateUp ={};\n    ss &gt;&gt; std::get_time(&amp;dateUp, \"%a %b %d %X %Y\");\n\n    std::time_t t1 = std::mktime(&amp;dateUp);\n\n\n    //time_t t1 = std::mktime(&amp;dateUp);  // Contine data la care se porneste    testul\n    int periodUpdate = std::stoi(updatePeriod); // Contine numarul de minute \n    std::cout &lt;&lt;\"Data inainte de a se adauga minutele = \"&lt;&lt; 1900 + dateUp.tm_year &lt;&lt; \" \" &lt;&lt; dateUp.tm_mon &lt;&lt; \" \" &lt;&lt; dateUp.tm_mday &lt;&lt; \" \" &lt;&lt; dateUp.tm_hour &lt;&lt; \":\" &lt;&lt; dateUp.tm_min &lt;&lt; \"\\n\\n\";\n\n    // Adaug minutele la data la care se porneste testul si apoi refac structura de tip time_t (minutele se convertesc automat in ore, zile..)\n    dateUp.tm_min += periodUpdate;\n    t1 = std::mktime(&amp;dateUp);\n    std::cout &lt;&lt;\"Data dupa ce s-au adaugat minutele = \"&lt;&lt; 1900 + dateUp.tm_year &lt;&lt; \" \" &lt;&lt; dateUp.tm_mon &lt;&lt; \" \" &lt;&lt; dateUp.tm_mday &lt;&lt; \" \" &lt;&lt; dateUp.tm_hour &lt;&lt; \":\" &lt;&lt; dateUp.tm_min &lt;&lt; \"\\n\\n\";\n\n    // Retin data curenta a calculatorului\n    time_t now = time(NULL); \n    struct tm now_tm = *localtime(&amp;now);\n    time_t t2 = std::mktime(&amp;now_tm);\n\n    std::cout &lt;&lt; \"Data curenta = \"&lt;&lt;1900 + now_tm.tm_year &lt;&lt; \" \" &lt;&lt; now_tm.tm_mon &lt;&lt; \" \" &lt;&lt; now_tm.tm_mday &lt;&lt; \" \" &lt;&lt; now_tm.tm_hour &lt;&lt; \":\" &lt;&lt; now_tm.tm_min &lt;&lt; \"\\n\\n\";\n\n    //Compar cele 2 date. Pentru a se face update programat diferenta trebuie sa fie pozitiva. Adica data actuala sa fie mai mare decat data la care ar trebui sa se faca update\n    double diff = difftime(t2, t1);\n    std::cout &lt;&lt; diff &lt;&lt; \"\\n\";\n}\n</code></pre>\n"}, {"tags": ["c++", "c"], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 6418808, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/fee0377cad69887e346e7d9144bac135?s=128&d=identicon&r=PG&f=1", "display_name": "juergen861", "link": "https://stackoverflow.com/users/6418808/juergen861"}, "edited": false, "score": 0, "creation_date": 1481880571, "post_id": 41149590, "comment_id": 69562052, "body": "Thanks a lot for Your help!  Our ideas are similar. But <a href=\"https://msdn.microsoft.com/de-de/library/windows/desktop/aa364218(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/de-de/library/windows/desktop/&hellip;</a> claims that setting the flag FILE_FLAG_NO_BUFFERING disables file caching. But when using      HANDLE hFile = CreateFileW(wFilename.c_str(), GENERIC_READ, 0, 0, OPEN_EXISTING, \tFILE_ATTRIBUTE_NORMAL | FILE_FLAG_NO_BUFFERING | FILE_FLAG_OVERLAPPED, \t0); Time behavior (slow on first loading, 5 times faster on subsequent loading) remains the same !?!? How does that fit with our file caching assumption? Thanks for any idea,  J&#252;rgen"}, {"owner": {"reputation": 201, "user_id": 7291911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acdca85267f3fcca6881f482693aec32?s=128&d=identicon&r=PG&f=1", "display_name": "fer-rum", "link": "https://stackoverflow.com/users/7291911/fer-rum"}, "reply_to_user": {"reputation": 29, "user_id": 6418808, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/fee0377cad69887e346e7d9144bac135?s=128&d=identicon&r=PG&f=1", "display_name": "juergen861", "link": "https://stackoverflow.com/users/6418808/juergen861"}, "edited": false, "score": 0, "creation_date": 1481895262, "post_id": 41149590, "comment_id": 69570849, "body": "May be quirky OS behavior, a subtle implementation mistake, some other parts of your code that interfere or other running applications that interfere. Also: keep in mind that hard drives and SSDs may (and usually do) have an internal buffer that is beyond the OS&#39;s control."}], "tags": [], "owner": {"reputation": 201, "user_id": 7291911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acdca85267f3fcca6881f482693aec32?s=128&d=identicon&r=PG&f=1", "display_name": "fer-rum", "link": "https://stackoverflow.com/users/7291911/fer-rum"}, "is_accepted": false, "score": 1, "last_activity_date": 1481740073, "creation_date": 1481740073, "answer_id": 41149590, "question_id": 41145695, "link": "https://stackoverflow.com/questions/41145695/extreme-performance-difference-when-reading-same-files-a-second-time-with-c/41149590#41149590", "title": "Extreme performance difference, when reading same files a second time with C", "body": "<p>Educated guess here:\nYou most likely are right with your file cache assumption. </p>\n\n<p>Can you pre load files before the user runs the software?\nNot directly. How would your program be supposed to know that it is going to be run in the next few minutes?</p>\n\n<p>So you probably need a helper mechanism or tricks.\nThe options I see here are:</p>\n\n<ul>\n<li>Indexing mechanisms to provide a faster and better aimed access to your data. This is helpful if you only need small chunks of information from these data at once.</li>\n<li>Attempt to parallelize the loading of the data, so even if it does not really get faster, the user has the impression it does because he can start working already with the data he has, while the rest is fetched in the background.</li>\n<li>Have a helper tool starting up with the OS and pre-fetching everything, so you already have it in memory when required. <strong>Caution:</strong> This has serious implications since you reserve either a large chunk of RAM or even SSD-cache (depending on implementation) for your tool from the start. Only consider doing this if the alternative is the apocalypse\u2026</li>\n</ul>\n\n<p>You can also try to combine the first two options. The key to a faster data availability is to figure out what to read in which order instead of trying to load everything at once en-bloc. <a href=\"https://en.wikipedia.org/wiki/Divide_and_conquer\" rel=\"nofollow noreferrer\"><em>Divide and Conquer</em>.</a></p>\n\n<p>Without further details on the problem it is impossible to provide more specific solutions though.</p>\n"}], "owner": {"reputation": 29, "user_id": 6418808, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/fee0377cad69887e346e7d9144bac135?s=128&d=identicon&r=PG&f=1", "display_name": "juergen861", "link": "https://stackoverflow.com/users/6418808/juergen861"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481740073, "creation_date": 1481727594, "last_edit_date": 1481735464, "question_id": 41145695, "link": "https://stackoverflow.com/questions/41145695/extreme-performance-difference-when-reading-same-files-a-second-time-with-c", "title": "Extreme performance difference, when reading same files a second time with C", "body": "<p>I have to read binary data into char-arrays from large (2GB) binary files in a C++ program.  When reading the files for the first time from my SSD, reading takes about 6.4 seconds per file. But when running the same code again or even after running a different dummy-program, which does almost the same before, the next readings take only about 1.4 seconds per file. The Windows Task Manager even shows much less disk-activity on the second, third, fourth\u2026 run. So, my guess is Window\u2019s File Caching is sparing me from waiting for data from the SSD, when filling the arrays another time.</p>\n\n<p>Is there any clean option to read the files into file cache before the customer runs the software? Any better option than just already loading the files with fread in advance? And how can I make sure, the data remains in the File Cache until I need it?</p>\n\n<p>Or am I totally wrong with my File Cache assumption? Is there another (better) explanation for these different loading times?</p>\n"}, {"tags": ["c++", "pointers", "smart-pointers"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1481727495, "post_id": 41145572, "comment_id": 69493753, "body": "AFAIK pre C++17 you cannot have an array type in a <code>shared_ptr</code>.  Right now you would have the wrong deleter which leads to UB."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1481728166, "post_id": 41145572, "comment_id": 69494193, "body": "@NathanOliver surely OP can, with a correct deleter? (which OP didn&#39;t provide)."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1481728539, "post_id": 41145572, "comment_id": 69494451, "body": "@user2079303 Good point.  I forgot about passing a custom deleter."}], "answers": [{"comments": [{"owner": {"reputation": 821, "user_id": 2912478, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/bbfd1023cf7ba3aef7d10bcde4ccb2a4?s=128&d=identicon&r=PG&f=1", "display_name": "rph", "link": "https://stackoverflow.com/users/2912478/rph"}, "edited": false, "score": 0, "creation_date": 1481728401, "post_id": 41145832, "comment_id": 69494338, "body": "Thanks! So, that means I should use <code>data.reset(new unsigned char[10], delete[] )</code> ?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 821, "user_id": 2912478, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/bbfd1023cf7ba3aef7d10bcde4ccb2a4?s=128&d=identicon&r=PG&f=1", "display_name": "rph", "link": "https://stackoverflow.com/users/2912478/rph"}, "edited": false, "score": 1, "creation_date": 1481728480, "post_id": 41145832, "comment_id": 69494410, "body": "@rkioji that&#39;s not syntactically correct. See the edit for an example."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 10, "last_activity_date": 1481728921, "last_edit_date": 1481728921, "creation_date": 1481728008, "answer_id": 41145832, "question_id": 41145572, "link": "https://stackoverflow.com/questions/41145572/stdshared-ptr-operator-equivalent-access/41145832#41145832", "title": "std::shared_ptr operator [] equivalent access", "body": "<p>Like this:</p>\n\n<pre><code>data.get()[3]\n</code></pre>\n\n<p>However, keep in mind what Nathan said in comments. The default deleter of <code>std::shared_ptr&lt;unsigned char&gt;</code> is wrong for a pointer allocated by <code>new[]</code>. You will need to use <code>std::shared_ptr::reset(Y* ptr, Deleter d);</code> with an appropriate deleter:</p>\n\n<pre><code>data.reset(new unsigned char[10], [](auto p){ delete[] p; });\n</code></pre>\n\n<p>Or, if you don't like the ugliness of the lambda, you can define a reusable helper:</p>\n\n<pre><code>struct array_deleter {\n    template&lt;typename T&gt; void operator()(const T* p) { \n        delete[] p; \n    }\n};\n\n// ...\n\ndata.reset(new unsigned char[10], array_deleter());\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1535748844, "post_id": 52122443, "comment_id": 91196310, "body": "Could you include how the OP would use <code>operator[]</code> with that?"}, {"owner": {"reputation": 191, "user_id": 8216712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e27fb1a7aa8b6d97bd1b284db10f6025?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel Verevkin", "link": "https://stackoverflow.com/users/8216712/pavel-verevkin"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1535748894, "post_id": 52122443, "comment_id": 91196324, "body": "std::shared_ptr&lt;std::array&lt;unsigned char, 10&gt;&gt; a; return (*a)[5];"}], "tags": [], "owner": {"reputation": 191, "user_id": 8216712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e27fb1a7aa8b6d97bd1b284db10f6025?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel Verevkin", "link": "https://stackoverflow.com/users/8216712/pavel-verevkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1535748863, "last_edit_date": 1535748863, "creation_date": 1535748631, "answer_id": 52122443, "question_id": 41145572, "link": "https://stackoverflow.com/questions/41145572/stdshared-ptr-operator-equivalent-access/52122443#52122443", "title": "std::shared_ptr operator [] equivalent access", "body": "<p>Use <code>shared_ptr&lt;std::array&lt;unsigned char, 10&gt;&gt;</code> instead.</p>\n\n<p>Or <code>shared_ptr&lt;std::basic_string&lt;unsigned char&gt;&gt;</code> if you need dynamically selected size.</p>\n\n<p>With modern C++, there isn't a good reason to use new, delete or naked arrays. If you need them for compatibility, there is always .data().</p>\n"}], "owner": {"reputation": 821, "user_id": 2912478, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/bbfd1023cf7ba3aef7d10bcde4ccb2a4?s=128&d=identicon&r=PG&f=1", "display_name": "rph", "link": "https://stackoverflow.com/users/2912478/rph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 868, "favorite_count": 0, "accepted_answer_id": 41145832, "answer_count": 2, "score": 6, "last_activity_date": 1535748863, "creation_date": 1481727247, "question_id": 41145572, "link": "https://stackoverflow.com/questions/41145572/stdshared-ptr-operator-equivalent-access", "title": "std::shared_ptr operator [] equivalent access", "body": "<p>In C++17 <code>std::shared_ptr</code> has an <code>operator []</code> to allow indexing vector-based pointers (<a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr/operator_at\" rel=\"noreferrer\">http://en.cppreference.com/w/cpp/memory/shared_ptr/operator_at</a>)</p>\n\n<p>How do I obtain similar accessing if such operator is not available and I still want to use a smart pointer for an array of elements such as:</p>\n\n<pre><code>std::shared_ptr&lt;unsigned char&gt; data;\ndata.reset(new unsigned char[10]&gt;;\n// use data[3];\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "c++11", "std", "fgets"], "comments": [{"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1481728711, "post_id": 41145564, "comment_id": 69494555, "body": "How do you know it&#39;s not the <code>tee</code> process that&#39;s dropping the lines?"}, {"owner": {"reputation": 880, "user_id": 2899630, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/dc74a8620c94bda1cb18ab6e2331259e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex L", "link": "https://stackoverflow.com/users/2899630/alex-l"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1481728790, "post_id": 41145564, "comment_id": 69494605, "body": "I thought about it, but I use tee also with the std::fgets"}, {"owner": {"reputation": 1566, "user_id": 4847311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90fbb34e156577e5c3a5b3b3d1b30f83?s=128&d=identicon&r=PG", "display_name": "Sven Nilsson", "link": "https://stackoverflow.com/users/4847311/sven-nilsson"}, "edited": false, "score": 0, "creation_date": 1481731264, "post_id": 41145564, "comment_id": 69496224, "body": "you mention multithreading, is there concurrent access to log reads/writes? if not, check what happens if you read individual characters with fgetc/fputc. there may also be a line ending issue, with mixed DOS/UNIX style line endings"}, {"owner": {"reputation": 880, "user_id": 2899630, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/dc74a8620c94bda1cb18ab6e2331259e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex L", "link": "https://stackoverflow.com/users/2899630/alex-l"}, "reply_to_user": {"reputation": 1566, "user_id": 4847311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90fbb34e156577e5c3a5b3b3d1b30f83?s=128&d=identicon&r=PG", "display_name": "Sven Nilsson", "link": "https://stackoverflow.com/users/4847311/sven-nilsson"}, "edited": false, "score": 0, "creation_date": 1481731586, "post_id": 41145564, "comment_id": 69496454, "body": "@SvenNilsson this part of the system is not multithreaded - there is only one owner to this class and all the read / write is not concurrent. Regarding individual characters  - I added printf for the chars in line after the fgets and I do not see the missing lines"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1481752601, "post_id": 41145564, "comment_id": 69507897, "body": "@AlexL: The <code>std</code> functions you refer to are just the C functions wrapped in the <code>std</code> namespace, nothing more. They are functionally the same as the originals. If you really wanted to re-write the C code in C++, you should be using <code>std::ifstream</code> with <code>std:getline()</code> for input, and <code>std::ofstream</code> for output."}], "answers": [{"tags": [], "owner": {"reputation": 880, "user_id": 2899630, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/dc74a8620c94bda1cb18ab6e2331259e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex L", "link": "https://stackoverflow.com/users/2899630/alex-l"}, "is_accepted": true, "score": 0, "last_activity_date": 1481794179, "creation_date": 1481794179, "answer_id": 41160660, "question_id": 41145564, "link": "https://stackoverflow.com/questions/41145564/fgets-vs-stdfgets-lines-are-missed-by-fgets/41160660#41160660", "title": "fgets vs. std::fgets - lines are missed by fgets", "body": "<p>As Remy Lebeau suggested, there is not really a difference between <code>fgets</code> and <code>std::fgets</code>, and after running the code with <code>std::fgets</code> for ~20 hours the issue was reproduced.</p>\n\n<p>So I guess I need to search for the problem in some other place.</p>\n\n<p>Thank you all!</p>\n"}], "owner": {"reputation": 880, "user_id": 2899630, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/dc74a8620c94bda1cb18ab6e2331259e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex L", "link": "https://stackoverflow.com/users/2899630/alex-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 41160660, "answer_count": 1, "score": 1, "last_activity_date": 1481794179, "creation_date": 1481727212, "last_edit_date": 1592644375, "question_id": 41145564, "link": "https://stackoverflow.com/questions/41145564/fgets-vs-stdfgets-lines-are-missed-by-fgets", "title": "fgets vs. std::fgets - lines are missed by fgets", "body": "<p>I have the following code: (cpp14)</p>\n<pre><code>static int const max_len = 1000;\nFILE* m_in_log = NULL;\nFILE* m_log = NULL;\n...\n\n...\n\n\nbool readLine(char* line, int max_len) \n    if(!fgets(line, max_len, m_in_log)) {\n        return false;\n    }\n\n    fputs(line, m_log);\n    fflush(m_log);\n    return true;\n}\n</code></pre>\n<p>It is supposed to read line by line from a log file and then write it, as is, into a different log file.</p>\n<p>It is a part of a complex multithreaded system which runs in linux and the <code>m_in_log</code> input is a FIFO.</p>\n<p>When I run this code multiple times, something it misses lines:</p>\n<p>suppose <code>m_in_log</code> contains the following lines:</p>\n<blockquote>\n<p>AAA</p>\n<p>BBB</p>\n<p>CCC</p>\n<p>DDD</p>\n<p>EEE</p>\n</blockquote>\n<p>but the the output log file I only see</p>\n<blockquote>\n<p>AAA</p>\n<p>EEE</p>\n</blockquote>\n<p>meaning fgets missed reading the 3 lines in the middle (I know for a fact that these line were send to the FIFO because we also do <code>tee</code> from this FIFO to another file, and in this file all the 5 lines are written).</p>\n<p>After struggling with this issue for some time (without any luck) I decided to use <code>std</code> methods:</p>\n<pre><code>fgets =&gt; std::fgets\n\nfputs =&gt; std::fputs\n\nfflush =&gt; std::fflush\n</code></pre>\n<p>and it seems like the problems is solved.</p>\n<p>Could you please explain why using <code>std</code> methods may solve this issue?</p>\n"}, {"tags": ["c++", "constructor", "late-binding", "early-binding"], "comments": [{"owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 0, "creation_date": 1481727266, "post_id": 41145496, "comment_id": 69493588, "body": "Why are you casting an instance of A to a C (or C*)? All you have is an instance of A. I would assume that your <code>static_cast</code> call is not allowed/not defined."}, {"owner": {"reputation": 386, "user_id": 3623743, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/81676174c407badd3886fd2f0e9220ba?s=128&d=identicon&r=PG&f=1", "display_name": "Radioga", "link": "https://stackoverflow.com/users/3623743/radioga"}, "edited": false, "score": 0, "creation_date": 1481727491, "post_id": 41145496, "comment_id": 69493747, "body": "I cast A to C to check the b and c members."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1481727748, "post_id": 41145496, "comment_id": 69493932, "body": "@Dag - The problem is that an <code>A</code> doesn&#39;t <i>have</i> any members <code>b</code> and <code>c</code>, because it <i>is</i> an <code>A</code>. When assigning from a <code>C</code> value, you just <a href=\"http://stackoverflow.com/questions/274626/what-is-object-slicing\">slice off</a> the <code>A</code> part and discard the rest of the <code>C</code> object."}, {"owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 1, "creation_date": 1481727929, "post_id": 41145496, "comment_id": 69494037, "body": "@Dag No, you cannot cast A to C. You have a A instance (not a C instance), your cast cannot create a C out of your A instance. If you would use dynamic_cast, some compilers even warn, that this cast will never succeed: <a href=\"http://cpp.sh/6fhqm\" rel=\"nofollow noreferrer\">cpp.sh/6fhqm</a>. See also <a href=\"http://en.cppreference.com/w/cpp/language/static_cast\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/static_cast</a> Explanation 2."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 4, "last_activity_date": 1481727097, "creation_date": 1481727097, "answer_id": 41145524, "question_id": 41145496, "link": "https://stackoverflow.com/questions/41145496/initialize-a-object-with-a-derived-class-constructor/41145524#41145524", "title": "Initialize a object with a derived class constructor", "body": "<p>Classic example of slicing. <code>A varA = C();</code> leaves you with object of static and dynamic type of <code>A</code>. As a result, <code>C* varC = static_cast&lt;C*&gt;(&amp;varA);</code> exhibits undefined behavior.</p>\n"}, {"tags": [], "owner": {"reputation": 1813, "user_id": 2449857, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jxnCm.jpg?s=128&g=1", "display_name": "Jack Deeth", "link": "https://stackoverflow.com/users/2449857/jack-deeth"}, "is_accepted": false, "score": 1, "last_activity_date": 1481729395, "creation_date": 1481729395, "answer_id": 41146324, "question_id": 41145496, "link": "https://stackoverflow.com/questions/41145496/initialize-a-object-with-a-derived-class-constructor/41146324#41146324", "title": "Initialize a object with a derived class constructor", "body": "<p>You can store a complete derived class in a base-class pointer, however:</p>\n\n<pre><code>int main() {        \n  A* varA = new C();\n  C* varC = static_cast&lt;C*&gt;(varA);\n  varC-&gt;f();\n\n  cout &lt;&lt; \"varC-&gt;a is \" &lt;&lt; varC-&gt;a &lt;&lt; endl;\n  cout &lt;&lt; \"varC-&gt;b is \" &lt;&lt; varC-&gt;b &lt;&lt; endl;\n  cout &lt;&lt; \"varC-&gt;c is \" &lt;&lt; varC-&gt;c &lt;&lt; endl;\n} // oops, forgot to delete varA/varC, memory leak!\n</code></pre>\n"}], "owner": {"reputation": 386, "user_id": 3623743, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/81676174c407badd3886fd2f0e9220ba?s=128&d=identicon&r=PG&f=1", "display_name": "Radioga", "link": "https://stackoverflow.com/users/3623743/radioga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 574, "favorite_count": 0, "accepted_answer_id": 41145524, "answer_count": 2, "score": 0, "last_activity_date": 1481870982, "creation_date": 1481726995, "last_edit_date": 1481870982, "question_id": 41145496, "link": "https://stackoverflow.com/questions/41145496/initialize-a-object-with-a-derived-class-constructor", "title": "Initialize a object with a derived class constructor", "body": "<p>Consider the following C++ code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing std::cout;\n\nclass A\n{\npublic:\n    int a;\n\n    A():a(0)\n    {\n        cout &lt;&lt; \"A constructor\\n\";\n    }\n\n    virtual void f()\n    {\n        cout &lt;&lt; \"f inside A\\n\";\n    }\n};\n\nclass C : public A\n{\npublic:\n    int c;\n\n    virtual void f()\n    {\n        cout &lt;&lt; \"f inside C\\n\";\n    }\n\n    C():c(0)\n    {\n        cout &lt;&lt; \"C constructor\\n\";\n    }\n};\n\nint main()\n{\n    A varA = C();\n\n    cout &lt;&lt; \"Size of C class: \" &lt;&lt; sizeof(C) &lt;&lt; \"\\n\";\n    cout &lt;&lt; \"Size of varA object: \" &lt;&lt; sizeof(varA) &lt;&lt; \"\\n\";\n\n    C* varC = static_cast&lt;C*&gt;(&amp;varA);\n    varC-&gt;f();\n\n    cout &lt;&lt; \"varC-&gt;a is \" &lt;&lt; varC-&gt;a &lt;&lt; \"\\n\";\n    cout &lt;&lt; \"varC-&gt;c is \" &lt;&lt; varC-&gt;c &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>The output of this program is:</p>\n\n<pre><code>A constructor\nC constructor\nSize of C class: 16\nSize of varA object: 8\nf inside A\nvarC-&gt;a is 0\nvarC-&gt;c is 1726166356\n</code></pre>\n\n<p>I initialize the <code>varA</code> object with the constructor of class <code>C</code>. Constructors of A and C class are called, but the <code>varA</code> is a simply a <code>A</code> object. I cast the address of <code>varA</code> to <code>C*</code> type and I try to call its <code>f()</code> function, but it prints the <code>f()</code> function of class <code>A</code>, so I deduce that it is use the early binding mechanism to call it.\nI think if I call the constructor of derived class, like this case, I obtain the same object if I had called the base constructor.\nI think the only difference is the other constructors are called. Is my supposition right or there are any other differences?</p>\n"}, {"tags": ["c++", "c++11", "unique"], "comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1481737549, "post_id": 41145466, "comment_id": 69500212, "body": "As your original question is answered, I would suggest you create a new post for your follow-up question (unless there already exists one on SO)."}], "answers": [{"comments": [{"owner": {"reputation": 1340, "user_id": 3312772, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/72099df70072c33488c4d4f53cae8d97?s=128&d=identicon&r=PG&f=1", "display_name": "instance", "link": "https://stackoverflow.com/users/3312772/instance"}, "edited": false, "score": 0, "creation_date": 1481727104, "post_id": 41145519, "comment_id": 69493478, "body": "yeah got it, &quot;one&quot; is not adjacent. Damn !!"}], "tags": [], "owner": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1481728510, "last_edit_date": 1481728510, "creation_date": 1481727061, "answer_id": 41145519, "question_id": 41145466, "link": "https://stackoverflow.com/questions/41145466/unique-copy-not-returning-expected-output/41145519#41145519", "title": "Unique_copy not returning expected output", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/algorithm/unique_copy\" rel=\"nofollow noreferrer\">std::unique_copy</a> : </p>\n\n<blockquote>\n  <p>Copies the elements from the range <code>[first, last)</code>, to another range beginning at <code>d_first</code> in such a way that there are no <strong>consecutive</strong> equal elements.</p>\n</blockquote>\n\n<p><code>one</code> is not consecutive in your case.</p>\n\n<p>Try:</p>\n\n<pre><code>vector&lt;string&gt; coll{\"one\", \"one\", \"two\", \"two\", \"three\", \"four\"};\n</code></pre>\n\n<p>you will find the output as </p>\n\n<pre><code>- one - two - three - four -  - \n</code></pre>\n"}], "owner": {"reputation": 1340, "user_id": 3312772, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/72099df70072c33488c4d4f53cae8d97?s=128&d=identicon&r=PG&f=1", "display_name": "instance", "link": "https://stackoverflow.com/users/3312772/instance"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 41145519, "answer_count": 1, "score": 1, "last_activity_date": 1481730169, "creation_date": 1481726893, "last_edit_date": 1481730169, "question_id": 41145466, "link": "https://stackoverflow.com/questions/41145466/unique-copy-not-returning-expected-output", "title": "Unique_copy not returning expected output", "body": "<p>I have this simple code, i know i must be doing some silly mistake :</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;vector&gt;\n#include&lt;string&gt;\n#include&lt;algorithm&gt;\n#include&lt;iterator&gt;\nusing namespace std;\n\nint main()\n{\nvector&lt;string&gt; coll{\"one\", \"two\", \"two\", \"three\", \"four\", \"one\"};\nvector&lt;string&gt; col2(coll.size(), \"\");\nunique_copy(coll.cbegin(), coll.cend(), col2.begin());\nfor(const auto&amp; ele : col2)\n    cout&lt;&lt;\" - \"&lt;&lt;ele;\ncout&lt;&lt;endl;\nreturn 0;\n}\n</code></pre>\n\n<p>Output -  <code>- one - two - three - four - one -</code></p>\n\n<p>I was expecting :-  <code>- one - two - three - four - -</code></p>\n\n<p>What am i missing?</p>\n\n<p>EDIT: As pointed out in aswer - Damn, i was missing the definition of unique_copy itself.</p>\n\n<p>Is there any function to do what i expectecd (delete unique elements irrespective of adjacency), other than inserting them in <code>ordered set</code> or sorting before unique copy as i want to keep the ordering.</p>\n"}, {"tags": ["c++", "c", "simd", "avx", "avx2"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 5, "creation_date": 1481727008, "post_id": 41145460, "comment_id": 69493398, "body": "Because of a strict aliasing violation. Compile with <code>-O3 -fno-strict-aliasing</code> and it should solve the problem."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1481727008, "post_id": 41145460, "comment_id": 69493399, "body": "The cast invokes UB. Write compliant code using a <code>union</code>."}, {"owner": {"reputation": 17899, "user_id": 1018562, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/ca58bb22c2bf586eb0c11e94d79d031e?s=128&d=identicon&r=PG", "display_name": "pythonic", "link": "https://stackoverflow.com/users/1018562/pythonic"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1481727040, "post_id": 41145460, "comment_id": 69493417, "body": "@Olaf: UB. What is that?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1481727044, "post_id": 41145460, "comment_id": 69493420, "body": "Try with <code>-fno-strict-aliasing</code> - all that nasty type-punning may be causing problems."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1481727093, "post_id": 41145460, "comment_id": 69493464, "body": "Seriously? <b>undefined behaviour</b>. Something every C programmer should know about right after his very first <code>hello world</code>. If you don&#39;t know, you definitively should research about it. And don&#39;t mess with compiler options here."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1481727118, "post_id": 41145460, "comment_id": 69493490, "body": "@pythonic UB is C slang for &quot;undefined behavior&quot;, meaning that you have a bug in your program where you did things beyond what the C standard guarantees, which in turn can cause anything to happen."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1481727459, "post_id": 41145460, "comment_id": 69493730, "body": "@Olaf Using <code>-fno-strict-aliasing</code> is an acceptable solution. GCC has taken optimizations to the extreme in this case. More useful compilers implement a non-standard extension instead, and the C standard may be damned. Trying to write for example embedded systems programming without violating strict aliasing is a major pain - why embedded compilers implement deterministic non-standard behavior. The strict aliasing rule is mostly a bug in the C standard, caused by clueless PC programmers having too much influence in the C committee."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1481727978, "post_id": 41145460, "comment_id": 69494079, "body": "In fact, <code>-fno-strict-aliasing</code> may be your only reasonable choice here, unless I&#39;m missing something. &quot;Legal&quot; type punning using a union won&#39;t work; the optimizer is too smart for it and still elides all of the intrinsics. Basically everything else I can think of that you could do would result in an explosion of code, which is precisely what you <i>don&#39;t</i> want when you&#39;re trying to write hand-optimized code using intrinsics. @lundin I&#39;m not sure that this is actually a duplicate. Certainly the duplicate does not contain a good answer to the question, how do I make this work!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1481728348, "post_id": 41145460, "comment_id": 69494307, "body": "@Lundin: How come I manage to write large embedded projects with gcc and without need to reort to such options? What&#39;s the problem using a <code>union here</code>? gcc just follows the standard and targets optimal code. and gcc provides enough extensions where necessary to even support special constructs. E.g. compiler barriers, etc. Before starting something I would inspect the machine code generated for both optimisations. Problem is casting the <code>char []</code> to <code>uint64_t</code> is problematic also for alignment issues. If not UB, it can introduce a major performance penalty."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 1, "creation_date": 1481728527, "post_id": 41145460, "comment_id": 69494441, "body": "@CodyGray If you show it inside a union, then it sates the strict aliasing rule. As for if this is a duplicate or not, I think the first step here is to illuminate the OP what this is about. We don&#39;t need yet another thread explaining that. If the canonical duplicate is bad for some reason (I think not), then anyone is free to improve it. Once the OP grasps what strict aliasing is, they may of course ask a new question &quot;how to fix strict aliasing violations in this code&quot;."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1481728730, "post_id": 41145460, "comment_id": 69494573, "body": "Yes, a union fixes the strict aliasing rule. <b>It does <i>not</i>, however, fix the problem.</b> The object code emitted by GCC is identical, whether you use pythonic&#39;s original code or rewrite it to use a union. As such, it does not answer the question in a useful way. But sure, fine, I guess you can always ask it as a new question."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1481728860, "post_id": 41145460, "comment_id": 69494644, "body": "@Olaf Example 1: write a generic eeprom driver. The driver must write 32 bits to memory at a time because of hardware requirements, but it must be able to accept a pointer to any form of data. Example 2: receive data from a serial bus, in the form of <code>uint8_t</code> bytes. Now convert this data to the correct, larger types. You may not use struct or union because they have padding and the code needs to be portable. And so on. You need to do a lot of fiddling and ugly patches to sort out such situations, if you care about strict aliasing."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1481729053, "post_id": 41145460, "comment_id": 69494766, "body": "@Lundin: The interface of such a driver is broken by design already. And typical 32 bit embedded systems support aligned accesses only, so you either pass a <code>uint32_t []</code> or (better) a <code>uint8_t []</code> and use byte-accesses. EEPROM accesses are not really time-critical. An alternative would be to leave the transfer to DMA, which might require additional measures anyway (compiler/memory barriers). For the serial transfer (very familar to me), you use proper marshaling with shifts and leave optimisation to the compiler.  ..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1481729186, "post_id": 41145460, "comment_id": 69494850, "body": "... After all the major reason gcc exploits UB that much is because it tries to optimise agressively. I prefer this attitude over compilers which tolerate careless programmers. And no, there is nothing ugly about my code - the opposite is true."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1481729417, "post_id": 41145460, "comment_id": 69495001, "body": "@Olaf The alignment requirements of a eeprom/data flash memory are not necessarily the same as the CPU! Often you might have to write a whole segment at the same time, because you had to erase it before writing to it. EEPROM writes can certainly be time critical, take for example the trip meter in your car. Anyway, the point here is that the aliasing rules and effective type were introduced in C99 because of some PC compiler vendor lobbying. The committee could have made the decision to fix known cases of undefined behavior instead of adding more, but didn&#39;t. Thus this is a C standard bug IMO."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1481729599, "post_id": 41145460, "comment_id": 69495098, "body": "@Lundin: Depends on how the EEPROM is connected to the CPU. If that is through the normal bus-interface, of course you have to follow the CPU restrictions. For typical (external) EEPROMs you use some buffer-register anyway, so there is no direct relation between the data in memory and the EEPROM anyway and you can use bitops to merge/split bytes to words. And IIRC, the aliasing was an issue with C90 anyway. I&#39;m fine with that and my code is neither slowed down, not ugly using proper marshalling. And C11 provides measures to support proper alignment of buffers very well."}], "owner": {"reputation": 17899, "user_id": 1018562, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/ca58bb22c2bf586eb0c11e94d79d031e?s=128&d=identicon&r=PG", "display_name": "pythonic", "link": "https://stackoverflow.com/users/1018562/pythonic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "closed_date": 1481727037, "answer_count": 0, "score": 1, "last_activity_date": 1481727014, "creation_date": 1481726876, "last_edit_date": 1481727014, "question_id": 41145460, "link": "https://stackoverflow.com/questions/41145460/output-of-m256i-changes-with-optimization-level", "closed_reason": "Duplicate", "title": "Output of _m256i changes with optimization level", "body": "<p>I have the following code which I compiled with g++ 6.1 on windows using the MinGW compiler.</p>\n\n<pre><code>unsigned char test_uc[8] = {0, 0xaa, 0xbb, 0xcc, 0x11, 0x22, 0x33, 0x44};\n\nuint64_t* p64 = (uint64_t*)test_uc;\n__m256i res = _mm256_cvtepu8_epi32 (_mm_cvtsi64_si128(*p64));\nuint32_t* u32 = (uint32_t*)&amp;res;\nfor(int i = 0; i &lt; 8; i++)\n    printf(\"%d.0x%x\\n\", i, u32[i]);\n</code></pre>\n\n<p>When I run the program with optimization level -O1, I get the expected output as shown below.</p>\n\n<pre><code>0.0x0\n1.0xaa\n2.0xbb\n3.0xcc\n4.0x11\n5.0x22\n6.0x33\n7.0x44\n</code></pre>\n\n<p>However, if I switch to optimization level -O3, I get this strange output.</p>\n\n<pre><code>0.0x0\n1.0x0\n2.0x0\n3.0x0\n4.0x8\n5.0x0\n6.0x41027f\n7.0x0\n</code></pre>\n\n<p>What is going on here?</p>\n"}, {"tags": ["c++", "cuda"], "comments": [{"owner": {"reputation": 10060, "user_id": 919747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/291c33625deabed28aea713a55208c3f?s=128&d=identicon&r=PG", "display_name": "Jason R", "link": "https://stackoverflow.com/users/919747/jason-r"}, "edited": false, "score": 0, "creation_date": 1481727712, "post_id": 41145427, "comment_id": 69493905, "body": "In short: yes, they are supported, with some caveats. See the question I linked above for a description of some of the hoops you need to jump through."}, {"owner": {"reputation": 75, "user_id": 6006473, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-AXRDd4KtkiA/AAAAAAAAAAI/AAAAAAAAAHs/D_wpH33fxdA/photo.jpg?sz=128", "display_name": "Albert Herrero", "link": "https://stackoverflow.com/users/6006473/albert-herrero"}, "reply_to_user": {"reputation": 10060, "user_id": 919747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/291c33625deabed28aea713a55208c3f?s=128&d=identicon&r=PG", "display_name": "Jason R", "link": "https://stackoverflow.com/users/919747/jason-r"}, "edited": false, "score": 0, "creation_date": 1481728607, "post_id": 41145427, "comment_id": 69494485, "body": "Perfect, it&#39;s just what I wanted."}], "owner": {"reputation": 75, "user_id": 6006473, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-AXRDd4KtkiA/AAAAAAAAAAI/AAAAAAAAAHs/D_wpH33fxdA/photo.jpg?sz=128", "display_name": "Albert Herrero", "link": "https://stackoverflow.com/users/6006473/albert-herrero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "closed_date": 1481728620, "answer_count": 0, "score": 0, "last_activity_date": 1481727272, "creation_date": 1481726799, "question_id": 41145427, "link": "https://stackoverflow.com/questions/41145427/cuda-device-function-pointer", "closed_reason": "Duplicate", "title": "CUDA: device function pointer", "body": "<p>Is it possible use a function pointer with CUDA? If I have some code like:</p>\n\n<pre><code>__global__ void myKernel(...)\n{\n    int a = function(...);\n}\n\n__device__ int function(...)\n{\n    //do something\n}\n</code></pre>\n\n<p>Could I call the function inside the kernel with a device function pointer?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "class"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 5, "creation_date": 1481726581, "post_id": 41145324, "comment_id": 69493029, "body": "<code>_testing = testing();</code>"}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 3, "creation_date": 1481726792, "post_id": 41145324, "comment_id": 69493220, "body": "You don&#39;t need to. It happens automatically when an instance of the <code>controller</code> class is created! If you want to call something other than the default constructor, use a <a href=\"http://stackoverflow.com/questions/926752/why-should-i-prefer-to-use-member-initialization-list\">member initialization list</a> in the <code>controller</code> class&#39;s constructor."}, {"owner": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1481729014, "post_id": 41145324, "comment_id": 69494746, "body": "@LogicStuff Thank you.  That gives me a whole bunch of errors about Boost deleted function on my atomic variables.  What about calling <code>testing _testing;</code> again?"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 1, "creation_date": 1481729228, "post_id": 41145324, "comment_id": 69494874, "body": "@xinthose That&#39;s a data member declaration. Look for the fix for your errors. You probably need a move constructor."}, {"owner": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1481730019, "post_id": 41145324, "comment_id": 69495348, "body": "@LogicStuff OK.  How would I use a move constructor in this case?  I use atomic bools like so in the <code>testing</code> class: <code>boost::atomic &lt;bool&gt; atomic_var {false};</code>  Would it be <code>testing _testing1;</code>, <code>_testing = std::move(testing1)</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1481726747, "post_id": 41145371, "comment_id": 69493181, "body": "There is a case when destructors are called explicitly."}, {"owner": {"reputation": 3611, "user_id": 81000, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7164c34dff7151e89f3dbc2ea3594c04?s=128&d=identicon&r=PG", "display_name": "zooropa", "link": "https://stackoverflow.com/users/81000/zooropa"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1481727151, "post_id": 41145371, "comment_id": 69493504, "body": "Good point, Sergey.  Thanks for the comment.  I made an edit to reflect your comment.  One does not usually call the destructor.  Like you mentioned, the destructor can be called.  The question xinthose asked is not clear why the destructor would need to be called explicitly.  That&#39;s why I answered the way I did."}], "tags": [], "owner": {"reputation": 3611, "user_id": 81000, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7164c34dff7151e89f3dbc2ea3594c04?s=128&d=identicon&r=PG", "display_name": "zooropa", "link": "https://stackoverflow.com/users/81000/zooropa"}, "is_accepted": false, "score": 2, "last_activity_date": 1481727329, "last_edit_date": 1481727329, "creation_date": 1481726643, "answer_id": 41145371, "question_id": 41145324, "link": "https://stackoverflow.com/questions/41145324/how-to-call-class-destructor-constructor/41145371#41145371", "title": "How to call class destructor / constructor", "body": "<p>You usually don't explicitly call the destructor.  It is call automatically when the object is destroyed.  When an object is created on the stack, the destructor is called automatically when the object goes out of scope.  When an object is created on the heap (by new'ing it), the destructor is called automatically when delete is called on the object.</p>\n"}, {"comments": [{"owner": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "edited": false, "score": 0, "creation_date": 1481727031, "post_id": 41145399, "comment_id": 69493411, "body": "Thank you.  I do not want to call the destructor on <code>controller</code> because it runs my main code.  So I will need to initialize the <code>testing</code> object outside of the header file I think."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 2, "last_activity_date": 1481726708, "creation_date": 1481726708, "answer_id": 41145399, "question_id": 41145324, "link": "https://stackoverflow.com/questions/41145324/how-to-call-class-destructor-constructor/41145399#41145399", "title": "How to call class destructor / constructor", "body": "<p>I think, you totally misunderstand the idea of default constructors. The main idea is that you almost never call default constructor explicitly (absent placement new). Ditto for destructors. So in your case, <code>testing</code> constructor will be called automatically whenever <code>controller</code> object is created, and it it's destructor will be called whenever <code>controller</code> object is destroyed.</p>\n"}, {"comments": [{"owner": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "edited": false, "score": 0, "creation_date": 1481733569, "post_id": 41146857, "comment_id": 69497828, "body": "I agree.  Thank you.  How would the code look?  <code>std::unique_ptr &lt;testing&gt; _testing (new testing);</code>?"}, {"owner": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "edited": false, "score": 0, "creation_date": 1481734157, "post_id": 41146857, "comment_id": 69498214, "body": "Nvm; <code>std::unique_ptr &lt;testing&gt; _testing</code> compiles.  Variables and functions are accessived via <code>-&gt;</code> and not <code>.</code> anymore.  Now I need to figure out how to use this with <code>boost::thread thr (boost::bind(&amp;testing::func1, &amp;_testing));</code>"}, {"owner": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "edited": false, "score": 0, "creation_date": 1481734950, "post_id": 41146857, "comment_id": 69498684, "body": "Turns out I need to use a <code>shared_ptr</code> for that operation (safer than unique_ptr): <a href=\"http://stackoverflow.com/a/28823025/4056146\">stackoverflow.com/a/28823025/4056146</a>.  I&#39;m using Boost 1.55 (Debian 8 repo), which doesn&#39;t have <code>unique_ptr</code> anyway."}], "tags": [], "owner": {"reputation": 2302, "user_id": 583195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b5b273a1d94ed145dd9fec1d4d90738?s=128&d=identicon&r=PG", "display_name": "Gavin Lock", "link": "https://stackoverflow.com/users/583195/gavin-lock"}, "is_accepted": true, "score": 1, "last_activity_date": 1481731305, "last_edit_date": 1481731305, "creation_date": 1481730922, "answer_id": 41146857, "question_id": 41145324, "link": "https://stackoverflow.com/questions/41145324/how-to-call-class-destructor-constructor/41146857#41146857", "title": "How to call class destructor / constructor", "body": "<p>In your code a <code>controller</code> owns <em>a</em> <code>testing</code>. The implication to anyone reading the code is that it <em>is the same</em> <code>testing</code> for the lifetime of the <code>controller</code>. This is certainly also how C++ see it - it will construct <em>the</em> <code>testing</code> during construction of a <code>controller</code> and destroy <em>the</em> <code>testing</code> when the <code>controller</code> is destroyed.</p>\n\n<p>Two possible solutions:</p>\n\n<ol>\n<li>Instead of trying to <em>replace</em> <code>testing</code>, <em>reset</em> it. This is what @LogicStuff was talking about in his comment on your question. <code>_testing = testing();</code> constructs a new <code>testing</code> and then copies its state to the existing instance, making the exisiting instance look like a new one. You could (should?) make this explicit by giving <code>testing</code> a <code>Reset</code> method (whose implementation should typically be that assignment  <code>*this = testing();</code> rather than a hand-coded resetting of each member variable.) - Do this <strong>only</strong> if resetting a <code>testing</code> makes business sense.</li>\n<li>If <em>resetting</em> <code>testing</code> doesn't make sense on a business level, and you are in fact wanting to <em>replace</em> it, then have <code>controller</code> own a <code>std::unique_ptr&lt;testing&gt;</code> instead. Then you can <code>reset</code> or <code>swap</code> a newly constructed instance in whenever you need to and still be sure that destructors will be called automatically.</li>\n</ol>\n"}], "owner": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 430, "favorite_count": 0, "accepted_answer_id": 41146857, "answer_count": 3, "score": 0, "last_activity_date": 1481731305, "creation_date": 1481726505, "question_id": 41145324, "link": "https://stackoverflow.com/questions/41145324/how-to-call-class-destructor-constructor", "title": "How to call class destructor / constructor", "body": "<p>Say I have two classes like so:</p>\n\n<p>controller.hpp (included by controller.cpp)</p>\n\n<pre><code>#include \"testing.hpp\"\nclass controller\n{\n    public:\n        testing _testing;  // call constructor\n}\n</code></pre>\n\n<p>testing.hpp</p>\n\n<pre><code>class testing\n{\n    public:\n        testing();\n        ~testing();\n}\n</code></pre>\n\n<p>How do I call the destructor of <code>testing</code> and re-construct it from controller.cpp?  Thank you.  </p>\n"}, {"tags": ["android", "c++", "git", "github", "gitkraken"], "answers": [{"tags": [], "owner": {"reputation": 8848, "user_id": 4339776, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ae7fe21641bf0e0f070c011b391fe700?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Meyer", "link": "https://stackoverflow.com/users/4339776/jim-meyer"}, "is_accepted": false, "score": 0, "last_activity_date": 1482591703, "creation_date": 1482591703, "answer_id": 41314356, "question_id": 41145248, "link": "https://stackoverflow.com/questions/41145248/git-command-to-add-all-projects-to-git-desktop-under-projects/41314356#41314356", "title": "Git command to add all projects to Git Desktop under /PROJECTS", "body": "<p>In Gitkraken it doesn't actually import projects. It's more like a git repository browser.</p>\n\n<p>So if you have a bunch of git repositories in a /PROJECTS directory, then in GK go to File->Preferences...->General and set the \"Project Directory\" to \"/PROJECTS\".</p>\n\n<p>Then on the main GUI screen of GK, the repositories in /PROJECTS will be shown on the buttons in the upper left corner.</p>\n\n<p>You can also use the \"File -> Open repo -> Browse for more repos\" to find repos located anywhere on your machine.</p>\n\n<p>If by \"import\" you mean you want to convert directories to git repos, then use \"File -> Open repo -> Browse for more repos\" to open each directory you want to convert to a repo, and it will ask if you want to create a new repository there.</p>\n"}], "owner": {"reputation": 1, "user_id": 6133170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IBJuQ.jpg?s=128&g=1", "display_name": "Chris Russo", "link": "https://stackoverflow.com/users/6133170/chris-russo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1482591703, "creation_date": 1481726270, "question_id": 41145248, "link": "https://stackoverflow.com/questions/41145248/git-command-to-add-all-projects-to-git-desktop-under-projects", "title": "Git command to add all projects to Git Desktop under /PROJECTS", "body": "<p>This is a real easy question, but I am having difficulties getting this to work. I have a dir /PROJECTS that contains all of my different projects. I am using this local and remote. </p>\n\n<p>I just need the command to say import all applications under /PROJECTS to any GitGui I am using. I hve decided to work with GitKraken s well as \nGithub Desktop.</p>\n\n<p>Thanks in advance-</p>\n\n<p>Regards-</p>\n\n<p>Chris Russo</p>\n"}, {"tags": ["c++", "delphi"], "comments": [{"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 2, "creation_date": 1481725930, "post_id": 41145056, "comment_id": 69492643, "body": "What exactly is the benefit of this? Why don&#39;t you go with functions that return a reference to the member you are &quot;hiding&quot;? <code>double &amp; X(){return A;}</code>"}, {"owner": {"reputation": 11, "user_id": 7297013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yqwvA.jpg?s=128&g=1", "display_name": "Alexander Vogel", "link": "https://stackoverflow.com/users/7297013/alexander-vogel"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1481726120, "post_id": 41145056, "comment_id": 69492748, "body": "The problem is that we have several kinds of coordinates. Some of them are named x, y, z others (in another system) are named u, v, w. To keep the code understandable we need to name them correctly. Also structure A has a lot of functionality. I want to have this functionality also for structure B."}, {"owner": {"reputation": 11, "user_id": 7297013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yqwvA.jpg?s=128&g=1", "display_name": "Alexander Vogel", "link": "https://stackoverflow.com/users/7297013/alexander-vogel"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1481726448, "post_id": 41145056, "comment_id": 69492950, "body": "@Simon: Getter and setter could do the trick. You&#39;re right :-). But there is the problem that I cannot access them like a standard member. I have to give different names to the getter and the setter and I cannot directly assign values. I have to access them via U() and set_U(value) for example..."}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1481726773, "post_id": 41145056, "comment_id": 69493200, "body": "You don&#39;t even need getters and setters - just return a non-const reference. Assume my example would be part of <code>struct C : A</code>. You could write something like <code>C c; c.X() = 5;</code>  Example: <a href=\"https://godbolt.org/g/Oo0oab\" rel=\"nofollow noreferrer\">godbolt.org/g/Oo0oab</a>"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1481726918, "post_id": 41145056, "comment_id": 69493330, "body": "Please pick one language. C or C++. Which is it? Don&#39;t think for a minute that this is one language. Finally, present the problem rather than your solution. Other the answer is a simple no which won&#39;t help you much."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 3, "creation_date": 1481727334, "post_id": 41145056, "comment_id": 69493637, "body": "Not only is this not possible in C++, it is not possible in Delphi. You cannot use <code>absolute</code> anywhere other than when declaring a local variable or a global variable. You absolutely cannot use <code>absolute</code> when declaring a field in a record or class."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1481732358, "post_id": 41145056, "comment_id": 69496993, "body": "@AlexanderVogel <b>IF</b> you are using C++Builder specifically, you can use properties to give you field-like syntax, as long as you don&#39;t need to access the memory address of the fields, eg: <code>struct B : A { __property double U = {read=X, write=X}; ... }; B b; b.U = 5;</code>"}, {"owner": {"reputation": 14940, "user_id": 976391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a20cdd68e2d66033d22408a925a5761a?s=128&d=identicon&r=PG", "display_name": "Arioch &#39;The", "link": "https://stackoverflow.com/users/976391/arioch-the"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1481734110, "post_id": 41145056, "comment_id": 69498172, "body": "@DavidHeffernan in Delphi it would be impossible long before - records are not classes in Delphi, so no inheritance. But in Delphi there would be properties in records, so having pseudonyms for variables is trivial. I think in C++ you can have INLINEd getter/setter procedures ,giving essentially the same thing."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 14940, "user_id": 976391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a20cdd68e2d66033d22408a925a5761a?s=128&d=identicon&r=PG", "display_name": "Arioch &#39;The", "link": "https://stackoverflow.com/users/976391/arioch-the"}, "edited": false, "score": 0, "creation_date": 1481734584, "post_id": 41145056, "comment_id": 69498473, "body": "@Arioch&#39;The You could remove the inheritance and merge the types, but you still could not get <code>absolute</code>. For sure there are other ways to achieve the goals, but the question was very specifically about <code>absolute</code>. A classic case of the asker asking about the solution rather than the problem."}, {"owner": {"reputation": 14940, "user_id": 976391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a20cdd68e2d66033d22408a925a5761a?s=128&d=identicon&r=PG", "display_name": "Arioch &#39;The", "link": "https://stackoverflow.com/users/976391/arioch-the"}, "edited": false, "score": 0, "creation_date": 1481734989, "post_id": 41145056, "comment_id": 69498711, "body": "ESR&#39;s smart question essay should be re-enabled on the SO. As harsh as it worded it is absolutely true to the last word. It is like with the proverbial &quot;non-standard in-complete LISP interpreter&quot;, we basically have time and again to found politically correct ad hoc incomplete ways to rephrase ESR."}, {"owner": {"reputation": 14940, "user_id": 976391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a20cdd68e2d66033d22408a925a5761a?s=128&d=identicon&r=PG", "display_name": "Arioch &#39;The", "link": "https://stackoverflow.com/users/976391/arioch-the"}, "edited": false, "score": 1, "creation_date": 1481735196, "post_id": 41145056, "comment_id": 69498842, "body": "not even about solution but about implementation details of the solution. Kind of &quot;i mastered hammering nails in. Now which hammer can use and how to hammer a screw&quot;"}, {"owner": {"reputation": 14940, "user_id": 976391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a20cdd68e2d66033d22408a925a5761a?s=128&d=identicon&r=PG", "display_name": "Arioch &#39;The", "link": "https://stackoverflow.com/users/976391/arioch-the"}, "edited": false, "score": 0, "creation_date": 1481735718, "post_id": 41145056, "comment_id": 69499159, "body": "Additionally, C++ has analogue of <code>absolute</code> ( of real one, not the imaginary keyword of this Q ). Just a year ago i ported snippets full of <code>int x; double const * y = &amp;x;</code> . And if &amp;-reference knows the tricks *-pointers do it would be an absolute copy of it"}], "answers": [{"comments": [{"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1481726324, "post_id": 41145210, "comment_id": 69492877, "body": "I would prefer making the members of <code>A</code> protected and just provide correctly named member functions returning a reference to these members in the inherited classes/structs."}, {"owner": {"reputation": 32928, "user_id": 576719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/27654f2f0143bebd759912c4b6f5a379?s=128&d=identicon&r=PG", "display_name": "LU RD", "link": "https://stackoverflow.com/users/576719/lu-rd"}, "edited": false, "score": 0, "creation_date": 1481728334, "post_id": 41145210, "comment_id": 69494296, "body": "Using a c union is equivalent to a Delphi variant record. <code>Type A = record case boolean of false: (x,y,z: Double); true: (u,v,w: Double); end;</code> There is no possibility in Delphi to use the absolute keyword inside a record or a class."}, {"owner": {"reputation": 14940, "user_id": 976391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a20cdd68e2d66033d22408a925a5761a?s=128&d=identicon&r=PG", "display_name": "Arioch &#39;The", "link": "https://stackoverflow.com/users/976391/arioch-the"}, "edited": false, "score": 0, "creation_date": 1481734614, "post_id": 41145210, "comment_id": 69498488, "body": "you ALMOST did it :-)"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 2, "last_activity_date": 1481737109, "last_edit_date": 1495540055, "creation_date": 1481726162, "answer_id": 41145210, "question_id": 41145056, "link": "https://stackoverflow.com/questions/41145056/delphi-absolute-in-c/41145210#41145210", "title": "Delphi absolute in C++", "body": "<p>Short version: There is no <em>equivalent</em> of the described language feature.</p>\n\n<hr>\n\n<p>Long version C++:</p>\n\n<p>There isn't an equivalent in C++. The member reference that you suggest gives you the same syntax, but indeed increases the size of the object.</p>\n\n<p>Another close alternative is a member function, that returns a reference. That has no overhead (assuming inline expansion). A function call has different syntax than referencing a member though. But perhaps having identical syntax with member access is not important so this is what I suggest.</p>\n\n<hr>\n\n<p>Long version C:</p>\n\n<p>There is no inheritance in C at all, so there is nothing like the described \"absolute\" in it either.</p>\n\n<blockquote>\n  <p>we have several kinds of coordinates. Some of them are named x, y, z others (in another system) are named u, v, w.</p>\n</blockquote>\n\n<p>Given this context, I would suggest a union (EDIT: It's better to swap the union and struct relation, see <a href=\"https://stackoverflow.com/a/41148089/2079303\">https://stackoverflow.com/a/41148089/2079303</a>):</p>\n\n<pre><code>union coordinates {\n    struct {\n        float x, y, z;\n    } xyz;\n    struct {\n        float u, v, w;\n    } uvw;\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": false, "score": 0, "last_activity_date": 1481726941, "creation_date": 1481726941, "answer_id": 41145475, "question_id": 41145056, "link": "https://stackoverflow.com/questions/41145056/delphi-absolute-in-c/41145475#41145475", "title": "Delphi absolute in C++", "body": "<p>If you want to interchangeably use XYZ and UVW, you can let each convert to the other.</p>\n\n<pre><code>// forward declare\nstruct B;\n\nstruct A\n{\n  double X;\n  double Y;\n  double Z;\n  operator B() const;\n}\n\nstruct B\n{\n  double U;\n  double V;\n  double W;\n  operator A() const;\n}\n\nA::operator B() const { B b; b.U = X; b.V = Y; b.W = Z; return b; }\nB::operator A() const { A a; a.X = U; a.Y = V; a.Z = W; return a; }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1481737043, "post_id": 41148089, "comment_id": 69499954, "body": "Ah, this is much nicer than my suggestion!"}, {"owner": {"reputation": 14940, "user_id": 976391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a20cdd68e2d66033d22408a925a5761a?s=128&d=identicon&r=PG", "display_name": "Arioch &#39;The", "link": "https://stackoverflow.com/users/976391/arioch-the"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1481737472, "post_id": 41148089, "comment_id": 69500171, "body": "@user2079303 I know very little about c++, for example I wonder if inner structs can be anonymous too, uplifting their members up the namespaces. Will it even compile if you strike out two identifiers in your answer, for example?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1481737798, "post_id": 41148089, "comment_id": 69500337, "body": "Structs (classes) may not be anonymous in C++, like they may in C (although some compilers support it as language extension). Anonymous member unions are allowed. So, striking out the name would make my answer as usable as this but make it only valid in C."}, {"owner": {"reputation": 14940, "user_id": 976391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a20cdd68e2d66033d22408a925a5761a?s=128&d=identicon&r=PG", "display_name": "Arioch &#39;The", "link": "https://stackoverflow.com/users/976391/arioch-the"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1481738044, "post_id": 41148089, "comment_id": 69500473, "body": "Yeah...  They had to allow one of anonymouses to survive for this trick to be workable. They chosen another one..."}, {"owner": {"reputation": 14940, "user_id": 976391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a20cdd68e2d66033d22408a925a5761a?s=128&d=identicon&r=PG", "display_name": "Arioch &#39;The", "link": "https://stackoverflow.com/users/976391/arioch-the"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1481738357, "post_id": 41148089, "comment_id": 69500614, "body": "And I wonder if <code>union {double X,U;}</code> would be the same or would be a degenerate one-option union instead."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1481749966, "post_id": 41148089, "comment_id": 69506714, "body": "<code>double X,U;</code> is semantically equivalent to <code>double X; double U;</code>, whether it is inside a struct or a union."}, {"owner": {"reputation": 14940, "user_id": 976391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a20cdd68e2d66033d22408a925a5761a?s=128&d=identicon&r=PG", "display_name": "Arioch &#39;The", "link": "https://stackoverflow.com/users/976391/arioch-the"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1481772860, "post_id": 41148089, "comment_id": 69513739, "body": "So I could use it. I just was not sure, so opted to be on a safe while noisy and redundant side."}], "tags": [], "owner": {"reputation": 14940, "user_id": 976391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a20cdd68e2d66033d22408a925a5761a?s=128&d=identicon&r=PG", "display_name": "Arioch &#39;The", "link": "https://stackoverflow.com/users/976391/arioch-the"}, "is_accepted": false, "score": 3, "last_activity_date": 1481735090, "last_edit_date": 1495535442, "creation_date": 1481734591, "answer_id": 41148089, "question_id": 41145056, "link": "https://stackoverflow.com/questions/41145056/delphi-absolute-in-c/41148089#41148089", "title": "Delphi absolute in C++", "body": "<p>I like the idea of user2079303's answers, but want to inverse it.</p>\n\n<p><em>Note - the question is named wrong and is violating \"what is your real goal\" or \"show me your Z\" rule. We do not need to mimic <code>absolute</code> keyword - it is total nonsense! we want to make pseudonyms for the record properties and use them interchangeably.</em></p>\n\n<blockquote>\n  <p>What I really want is to have access to the same memory by accessing for example X or U.</p>\n</blockquote>\n\n<p><em>The quoted line is the ONLY line in the question that talks about the problem essence - making full pseudonyms.</em></p>\n\n<p>So, let's start where user2079303 stopped and use the fact that C's unions do not have to be named, like it was used in <a href=\"https://stackoverflow.com/a/13624921/976391\">https://stackoverflow.com/a/13624921/976391</a></p>\n\n<p>So we just inverse the scopes.</p>\n\n<pre><code>/*union*/ struct coordinates {\n    /*struct*/ union {\n        double X;\n        double U;\n    };\n    /*struct*/ union {\n        double Y;\n        double V;\n    };\n    /*struct*/ union {\n        double Z;\n        double W;\n    };\n};\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7297013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yqwvA.jpg?s=128&g=1", "display_name": "Alexander Vogel", "link": "https://stackoverflow.com/users/7297013/alexander-vogel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1481737109, "creation_date": 1481725701, "last_edit_date": 1481731677, "question_id": 41145056, "link": "https://stackoverflow.com/questions/41145056/delphi-absolute-in-c", "title": "Delphi absolute in C++", "body": "<p>Is there an equivalent to Delphi's <code>absolute</code> in C++? I want to do the following:</p>\n\n<pre><code>// Structure A\nstruct A\n{\n  double X;\n  double Y;\n  double Z;\n}\n\n// Structure B\nstruct B : A\n{\n  double U absolute X;\n  double V absolute Y;\n  double W absolute Z;\n}\n</code></pre>\n\n<p>I can use <code>double &amp; U = X</code> in <code>structure B</code> but this will generate an additional pointer and change the size of the structure. Union is - I think - also not a solution, because <code>structure B</code> inherits <code>structure A</code>.</p>\n\n<p>What I really want is to have access to the same memory by accessing for example X or U.</p>\n"}, {"tags": ["c++", "qt", "qvariant", "stdhash"], "comments": [{"owner": {"reputation": 638, "user_id": 7065028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/602970b0b9f268e43b6212d4804d22e3?s=128&d=identicon&r=PG&f=1", "display_name": "Jean-Emmanuel", "link": "https://stackoverflow.com/users/7065028/jean-emmanuel"}, "edited": false, "score": 0, "creation_date": 1481726512, "post_id": 41145012, "comment_id": 69492985, "body": "Have you already tried Qt&#39;s methods like <code>QVariant::toHash()</code> ?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 638, "user_id": 7065028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/602970b0b9f268e43b6212d4804d22e3?s=128&d=identicon&r=PG&f=1", "display_name": "Jean-Emmanuel", "link": "https://stackoverflow.com/users/7065028/jean-emmanuel"}, "edited": false, "score": 0, "creation_date": 1481726701, "post_id": 41145012, "comment_id": 69493135, "body": "@Jean-Emmanuel It <a href=\"http://doc.qt.io/qt-5/qvariant.html#toHash\" rel=\"nofollow noreferrer\">looks like</a> that converts the variant to a <code>QHash</code> and does not hash the underlying value."}, {"owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "reply_to_user": {"reputation": 638, "user_id": 7065028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/602970b0b9f268e43b6212d4804d22e3?s=128&d=identicon&r=PG&f=1", "display_name": "Jean-Emmanuel", "link": "https://stackoverflow.com/users/7065028/jean-emmanuel"}, "edited": false, "score": 0, "creation_date": 1481726737, "post_id": 41145012, "comment_id": 69493172, "body": "@Jean-Emmanuel <code>toHash</code> tries to convert <code>QVariant</code> to <code>QHash&lt;QString, QVariant&gt;</code> which is a hash map, not a hash. I mean yes, I did do Ctrl+F over the docs and additionally I also read what it says."}, {"owner": {"reputation": 925, "user_id": 6478256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BNq9q.jpg?s=128&g=1", "display_name": "ilotXXI", "link": "https://stackoverflow.com/users/6478256/ilotxxi"}, "edited": false, "score": 0, "creation_date": 1481727149, "post_id": 41145012, "comment_id": 69493502, "body": "If you don&#39;t worry about performance: write <code>QVariant</code> to <code>QByteArray</code> using <code>QDataStream</code> and use <code>qHash(const QByteArray &amp;)</code> function. I saw no one easy way to get a &quot;raw&quot; representation of <code>QVariant</code> yet."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1481727195, "post_id": 41145012, "comment_id": 69493539, "body": "Well you could use a visitor like <a href=\"http://stackoverflow.com/questions/38071414/qvariants-visitor-pattern-without-manual-type-testing-and-casting\">this</a> and then pass the returned value to <code>qHash()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1481727562, "post_id": 41145546, "comment_id": 69493801, "body": "In this particular case I do care about performance. Do you think what you propose would be slower than <code>switch</code> that I made?"}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "reply_to_user": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1481728230, "post_id": 41145546, "comment_id": 69494229, "body": "Well, there is no way to tell until you compare them side by side. How fast do you need it to be? On my system it hashes 4 ints 4 reals 4 strings and 4 QRects in 15213 nanoseconds. Also there is the convenience factor, you don&#39;t have to implement a gigantic switch, it works for all types which support serialization."}, {"owner": {"reputation": 925, "user_id": 6478256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BNq9q.jpg?s=128&g=1", "display_name": "ilotXXI", "link": "https://stackoverflow.com/users/6478256/ilotxxi"}, "reply_to_user": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1481728332, "post_id": 41145546, "comment_id": 69494295, "body": "@Tom&#225;\u0161Zato At first you can make your <code>switch</code> more Qt-friendly if you will use <code>qHash</code> function. E.g. <code>var.toString().toStdString()</code> may be slower than <code>qHash(var.toString())</code> because you create a temporary object with allocations in the heap. At second: just try and compare. Nobody knows how does <code>QDataStream</code> serialize <code>QVariant</code>. At least additional <code>QByteArray</code> can have a significant allocation/deallocation time."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "reply_to_user": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1481740959, "post_id": 41145546, "comment_id": 69501941, "body": "@Tom&#225;\u0161Zato You could handle the most common types specially using code like in your question, and then fall back to this answer&#39;s method as fall-back and future-proofing for types you don&#39;t want to bother handling specially."}], "tags": [], "owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "is_accepted": true, "score": 8, "last_activity_date": 1481730723, "last_edit_date": 1481730723, "creation_date": 1481727169, "answer_id": 41145546, "question_id": 41145012, "link": "https://stackoverflow.com/questions/41145012/how-to-hash-qvariant/41145546#41145546", "title": "How to hash QVariant?", "body": "<p>Get yourself a <code>QByteArray</code> + <code>QBuffer</code> + <code>QDataStream</code> to basically serialize <code>QVariant</code>s to the <code>QByteArray</code>.</p>\n\n<p>Then simply hash the raw bytes in the byte array. Qt already implements a <code>qHash</code> function for <code>QByteArray</code> so you are all set.</p>\n\n<p>You can maximize efficiency by reusing the same <code>QByteArray</code> with enough preallocated bytes to avoid reallocations. You can wrap the whole thing in a <code>VariantHasher</code> class, and simply <code>seek(0)</code> for the buffer before each new hashing and only hash the <code>pos()</code> number of bytes instead the whole thing.</p>\n\n<pre><code>class QVariantHasher {\n  public:\n    QVariantHasher() : buff(&amp;bb), ds(&amp;buff) {\n      bb.reserve(1000);\n      buff.open(QIODevice::WriteOnly);\n    }\n    uint hash(const QVariant &amp; v) {\n      buff.seek(0);\n      ds &lt;&lt; v;\n      return qHashBits(bb.constData(), buff.pos());\n    }\n  private:\n    QByteArray bb;\n    QBuffer buff;\n    QDataStream ds;\n};\n</code></pre>\n\n<p>It is pretty fast as mentioned in the comments, and it has the advantage of working with every type that supports <code>QDataStream</code> serialization. For custom types you will only have to implement the serialization, no need to make and maintain a giant switch. If you already have the switch version implemented a comparison would be interesting to make. The switch itself is a lot of branching, while reusing the same byte array is very cache friendly, especially if you don't use to many bytes, that is, you are not hashing variants that contain very long strings or arrays.</p>\n\n<p>Also, it is better than semi-reliable, as the hashing includes the variant type as well, so even in the cases the actual data might be binary identical, for example two bytes with values 255 vs a short with value 65535, the hash will incorporate the type so the values would not collide.</p>\n"}], "owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1156, "favorite_count": 1, "accepted_answer_id": 41145546, "answer_count": 1, "score": 3, "last_activity_date": 1481730723, "creation_date": 1481725555, "last_edit_date": 1481728696, "question_id": 41145012, "link": "https://stackoverflow.com/questions/41145012/how-to-hash-qvariant", "title": "How to hash QVariant?", "body": "<p>I need to use <code>QList&lt;QVariant&gt;</code> as a key to <code>std::unordered_map</code>. The purpose of this is to optimize searching over a table of data by making index over the unique key columns.</p>\n\n<p>So I made this code. It's not complete, but lists some basic data types that occur in the table key columns:</p>\n\n<pre><code>#include &lt;unordered_map&gt;\n#include &lt;string&gt;\n//std::hash\n#include &lt;functional&gt;\n//std::size_t\n#include &lt;cstddef&gt;\n// Hashing method for QVariantList\nnamespace std {\n    template &lt;&gt;\n    struct hash&lt;QList&lt;QVariant&gt;&gt;\n    {\n        std::size_t operator()(const QList&lt;QVariant&gt;&amp; k) const\n        {\n            using std::size_t;\n            using std::hash;\n            using std::string;\n            size_t hash_num = 0;\n            Q_FOREACH(var, k) {\n                // Make hash of the primitive value of the QVariant\n                switch(var.type()) {\n                    case QVariant::String : {\n                        hash_num = hash_num^hash&lt;string&gt;(var.toString().toStdString());\n                        break;\n                    }\n                    case QVariant::Char :\n                    case QVariant::ULongLong :\n                    case QVariant::UInt :\n                    case QVariant::LongLong :\n                    case QVariant::Int : {\n                        hash_num = hash_num^hash&lt;long long&gt;(var.toLongLong());\n                        break;\n                    }\n                    case QVariant::Double : {\n                        hash_num = hash_num^hash&lt;double&gt;(var.toDouble());\n                        break;\n                    }\n                }\n            }\n            return hash_num;\n        }\n    };\n}\n</code></pre>\n\n<p>Obviously, I don't like the whole <code>switch</code> thing. It's pretty long and ugly code and does only account for the basic types. I'd rather make hash of the memory data allocated for the <code>QVariant</code>'s internal data. Or, even better - use some Qt's hashing method.</p>\n\n<p>Is there a semi-reliable* way to hash any QVariant without converting it to primitive type?</p>\n\n<p><sub>*I understand that complex objects might be hiding behind QVariant, but cases where this would lead to collision are rare enough so I don't have to care.</sub></p>\n"}, {"tags": ["c++", "linux"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1481725351, "post_id": 41144813, "comment_id": 69492265, "body": "If your actual code has <code>using namespace std;</code> at file scope, you have bigger problems"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1481726088, "post_id": 41144813, "comment_id": 69492736, "body": "<a href=\"http://stackoverflow.com/q/1452721/995714\">Why is \u201cusing namespace std\u201d considered bad practice?</a>"}, {"owner": {"reputation": 11, "user_id": 7296747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a258f27fcfdc2908250aa1f2a668814?s=128&d=identicon&r=PG&f=1", "display_name": "btbtbt", "link": "https://stackoverflow.com/users/7296747/btbtbt"}, "edited": false, "score": 0, "creation_date": 1481726560, "post_id": 41144813, "comment_id": 69493018, "body": "Thank you for the tip! I will definitely get rid of all using namespace std in the code. However it does not solve the bad kernel access issue"}], "answers": [{"tags": [], "owner": {"reputation": 360, "user_id": 4087758, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-NZ-UlMJUIwE/AAAAAAAAAAI/AAAAAAAAAD0/WXL6yOMvWt8/photo.jpg?sz=128", "display_name": "sandeep nagendra", "link": "https://stackoverflow.com/users/4087758/sandeep-nagendra"}, "is_accepted": false, "score": 0, "last_activity_date": 1481727771, "creation_date": 1481727771, "answer_id": 41145758, "question_id": 41144813, "link": "https://stackoverflow.com/questions/41144813/linux-c-system-call-crash-when-function-returns/41145758#41145758", "title": "Linux c++ system() call crash when function returns", "body": "<p>I think problem is with kernel you are working with. </p>\n\n<p>I just ran same code in my ubuntu, It works fine.</p>\n\n<p>Analyze the core file generated. kernel oops messages may contain necessary information. Also check whether there are any known issues with kernel version which you are using.</p>\n\n<pre><code>snagendr@SUPERMAN:~/C$ ./a.out \nhello\nhello2\nhello3\nWe never get here\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7297214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93b3b28d85f5cc8fc9d3647cea02dcee?s=128&d=identicon&r=PG&f=1", "display_name": "Ale Part", "link": "https://stackoverflow.com/users/7297214/ale-part"}, "is_accepted": false, "score": 0, "last_activity_date": 1481730053, "creation_date": 1481730053, "answer_id": 41146539, "question_id": 41144813, "link": "https://stackoverflow.com/questions/41144813/linux-c-system-call-crash-when-function-returns/41146539#41146539", "title": "Linux c++ system() call crash when function returns", "body": "<p>Oops is a kernel print.\nSomething in your  kernel is not working well.\nTry to update it, than re-compile or, if you are cross compiling the application, your toolchain is not well configured for your system.</p>\n\n<p><strong>Seems that your MMU is not working well. Kernel try to access to a user space memory or to a un unmapped/reserved area.</strong></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7296747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a258f27fcfdc2908250aa1f2a668814?s=128&d=identicon&r=PG&f=1", "display_name": "btbtbt", "link": "https://stackoverflow.com/users/7296747/btbtbt"}, "is_accepted": false, "score": 1, "last_activity_date": 1481900321, "creation_date": 1481900321, "answer_id": 41187082, "question_id": 41144813, "link": "https://stackoverflow.com/questions/41144813/linux-c-system-call-crash-when-function-returns/41187082#41187082", "title": "Linux c++ system() call crash when function returns", "body": "<p>It seems like the problem was actually the system() function causing some very strange undefined behaviour. \nPutting them in a child like the following has solved the problem: </p>\n\n<pre><code>void forksystem(char* command){\n    pid_t pid;\n    int status = 0;\n    pid = fork();\n    if(pid == 0){\n      system(command);\n      exit(1);\n    }\n    wait(&amp;status);\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7296747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a258f27fcfdc2908250aa1f2a668814?s=128&d=identicon&r=PG&f=1", "display_name": "btbtbt", "link": "https://stackoverflow.com/users/7296747/btbtbt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 996, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1481900321, "creation_date": 1481725031, "last_edit_date": 1481828927, "question_id": 41144813, "link": "https://stackoverflow.com/questions/41144813/linux-c-system-call-crash-when-function-returns", "title": "Linux c++ system() call crash when function returns", "body": "<p>I have a custom petalinux 2016.3 system running and observe the following:\nWhen I compile and run a cpp that uses system() calls like the example under i get:</p>\n\n<pre><code>Oops: kernel access of bad area, sig: 11\nCPU: 0 PID: 381 Comm: Application Not tainted 4.6.0 #63\ntask: ce486500 ti: ce4cc000 task.ti: ce4cc000\n</code></pre>\n\n<p>I can see all 3 echos in the terminal, but the Oops appears before the \"we never get here\" printf. It seems like the kernel access of bad area appears when function() returns.</p>\n\n<p>Are there some specific kernel or rootfs modules/settings missing that could make the system behave this way?</p>\n\n<p>I have several thousand lines of code running other library functions and it is only system() that seems to fail. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\nusing namespace std;\n\nvoid function(){\n  system(\"echo hello\");\n  system(\"echo hello2\");\n  system(\"echo hello3\");\n}\n\nint main(int argc, char **argv){\n  function();\n  printf(\"We never get here\\n\");\n  return 1;\n}\n</code></pre>\n\n<hr>\n\n<p>After some more debugging, the problem seemed to come from a library included in the makefile (lEasyBmp).</p>\n\n<p>Why it triggered this exact failure when not used I have not found out. All library files are built and found in the system but if anyone has the same problem, including some libraries might trigger it.</p>\n"}, {"tags": ["c++", "qt", "networking", "dns"], "answers": [{"tags": [], "owner": {"reputation": 1513, "user_id": 6624417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a73a12db09cb90a99be14fa2bb7b6096?s=128&d=identicon&r=PG&f=1", "display_name": "E4z9", "link": "https://stackoverflow.com/users/6624417/e4z9"}, "is_accepted": true, "score": 3, "last_activity_date": 1481727326, "creation_date": 1481727326, "answer_id": 41145601, "question_id": 41144771, "link": "https://stackoverflow.com/questions/41144771/how-to-find-the-ip-address-of-a-website-using-the-qdnslookup-class/41145601#41145601", "title": "How to find the IP address of a website using the QDnsLookup class?", "body": "<p>QDnsLookup is asynchronous API, that depends on a Qt event loop running to update its state. So you either need to force Qt to handle events in your waiting loop:</p>\n\n<pre><code>while (!lookup.isFinished())\n{\n    QApplication::processEvents();\n}\n</code></pre>\n\n<p>or you do it the more Qt-ish way and actually run the application and handle the <code>finished</code> singal of QDnsLookup (the lambda might better call a named function, but it's just an example):</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n\n    QDnsLookup lookup(QDnsLookup::ANY, \"www.google.com\");\n    QObject::connect(&amp;lookup, &amp;QDnsLookup::finished, [&amp;lookup]() {\n        auto records = lookup.hostAddressRecords();\n        for (auto record : records)\n        {\n            std::cout &lt;&lt; record.timeToLive() &lt;&lt; \"; \" &lt;&lt;\n            record.value().toString().toStdString() &lt;&lt; '\\n';\n        }\n        QCoreApplication::quit(); // we don't want to do anything else\n    });\n    lookup.lookup();\n    return a.exec();\n}\n</code></pre>\n\n<p>(Note that you should use just <code>www.google.com</code>, since <code>http://www.google.com</code> is not a valid domain name.)</p>\n"}], "owner": {"reputation": 11622, "user_id": 1097451, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1516b785b675ba751aacdc05ae31764b?s=128&d=identicon&r=PG", "display_name": "Martin Drozdik", "link": "https://stackoverflow.com/users/1097451/martin-drozdik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "accepted_answer_id": 41145601, "answer_count": 1, "score": 1, "last_activity_date": 1481727326, "creation_date": 1481724916, "question_id": 41144771, "link": "https://stackoverflow.com/questions/41144771/how-to-find-the-ip-address-of-a-website-using-the-qdnslookup-class", "title": "How to find the IP address of a website using the QDnsLookup class?", "body": "<p>I am trying to learn network programming with the Qt library.</p>\n\n<p>As exercise, I am trying to lookup the IP address of google:</p>\n\n<pre><code>#include &lt;QApplication&gt;\n#include &lt;QtNetwork&gt;\n\n#include &lt;iostream&gt;\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n\n    QDnsLookup lookup(QDnsLookup::ANY, \"http://www.google.com\");\n    lookup.lookup();\n    while (!lookup.isFinished())\n    {\n        // Just wait.\n    }\n    auto records = lookup.hostAddressRecords();\n    for (auto record : records)\n    {\n        std::cout &lt;&lt; record.timeToLive() &lt;&lt; \"; \" &lt;&lt;\n                     record.value().toString().toStdString() &lt;&lt; '\\n';\n    }\n    return 0;\n}\n</code></pre>\n\n<p>However, the lookup never finishes and <code>lookup.isFinished()</code> never returns true. I tried to read the documentation of <a href=\"http://doc.qt.io/qt-5/qdnslookup.html\" rel=\"nofollow noreferrer\">QDnsLookup</a>, but I am stuck.</p>\n"}, {"tags": ["c++", "floating-point", "sse", "simd", "avx"], "comments": [{"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1481724828, "post_id": 41144668, "comment_id": 69491924, "body": "Which compiler are you asking about?  Because Clang seems to have them: <a href=\"http://clang.llvm.org/doxygen/avx512vldqintrin_8h.html#a5c8e4d8e91c4ff640a1908e3ee7b89a0\" rel=\"nofollow noreferrer\">clang.llvm.org/doxygen/&hellip;</a>"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "reply_to_user": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 4, "creation_date": 1481724897, "post_id": 41144668, "comment_id": 69491972, "body": "@JohnZwinck assuming AVX512 support is perhaps a bit premature at this point"}, {"owner": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "reply_to_user": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1481724954, "post_id": 41144668, "comment_id": 69492008, "body": "@JohnZwinck No, it&#39;s not a clang specific exntension, but <code>AVX512</code>. The question is about implementing such functions with <code>SSE2</code>."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1481726343, "post_id": 41144668, "comment_id": 69492889, "body": "It&#39;s probably just cost/benefit - since most modern CPUs have two FP ALUs there isn&#39;t much to be gained from using 128 bit SIMD for operations on 2 x doubles, and the cost of adding 64 bit operations is likely to be relatively high (cost = silicon area). It probably makes more sense for 512 bit SIMD, where you have 8 x 64 bit elements, which may be why you see such instructions in AVX512."}, {"owner": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1481726680, "post_id": 41144668, "comment_id": 69493119, "body": "@PaulR That&#39;s true, but with AVX, for 4 doubles it would be good. I asked for SSE2 implementation, because the AVX variant would be straightforward from that."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 2, "creation_date": 1481726814, "post_id": 41144668, "comment_id": 69493242, "body": "@plasmacel: yes, unfortunately though AVX/AVX2 is really little more than two SSE units bolted together with a little additional glue and some elastic bands. AVX512 is a re-design, so it doesn&#39;t inherit a lot of the limitations of SSE/AVX."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1481729613, "post_id": 41144668, "comment_id": 69495111, "body": "Does it have to work in 32bit code too?"}, {"owner": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1481729840, "post_id": 41144668, "comment_id": 69495245, "body": "@harold That would be an advantage, but not necessarily."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 3, "creation_date": 1481735164, "post_id": 41144668, "comment_id": 69498820, "body": "AFAIK the most efficient implementation would be using scalar <a href=\"http://www.felixcloutier.com/x86/CVTSD2SI.html\" rel=\"nofollow noreferrer\">CVTSD2SI r64, xmm</a>, with shuffles to get each element into the low 64.  There is no hardware support for packed int64_t to/from float or double.  Interestingly, x87 has always supported 64-bit integers with FIST, and that&#39;s what gcc uses with <code>-m32</code> even with <code>-mfpmath=sse</code> when it means copying a value from an XMM register into ST0 (via memory)."}, {"owner": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1481735764, "post_id": 41144668, "comment_id": 69499190, "body": "@PeterCordes And the <code>int64_t</code>/<code>double</code> direction? Btw 4x<code>VCVTSD2SI</code> with 4x<code>VSHUFPD</code> on an AVX vector of 4 doubles would take ~24 latency. That&#39;s surprisingly slow for a simple type conversion - I understand there is no better way, just saying."}, {"owner": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1481736146, "post_id": 41144668, "comment_id": 69499426, "body": "@PeterCordes Never mind, I realized that the inverse direction would be <code>cvtsi2sd</code>."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1481738610, "post_id": 41144668, "comment_id": 69500727, "body": "@plasmacel: if you&#39;re latency-bound, you&#39;re doing it wrong.  Unpack the original 3 different ways, so all 4 conversions can run in parallel, up to the limit of hardware throughput.  (requires AVX2 for VPERMPD to get the top element of the upper lane in one shuffle.  Otherwise get it from the VEXTRACTF128 that brings the low element of the upper lane down to the bottom of an XMM).  On the way back from scalar to vector, probably two pairs of MOVQ / PINSRQ and then a VINSERTI128.  Of course, all this only applies if you can&#39;t use Mysticial&#39;s FP bit-pattern trick!"}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 2, "creation_date": 1481740284, "post_id": 41144668, "comment_id": 69501598, "body": "@PeterCordes Back in like 2007-ish, I had a performance issue that stemmed from double -&gt; int64 conversions taking &gt;100 cycles on x86 due to a library call. After digging around, I randomly came across a primitive version of this trick in the Glucas source code. Once I understood how it worked, I realized it could be generalized to a lot of other things. My initial versions of the trick took 3-4 instructions in SSE and multiple constants. But over time, I got them down to the way it is now. Two instructions + 1 constant for both directions and for both signed and unsigned."}, {"owner": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1481740609, "post_id": 41144668, "comment_id": 69501770, "body": "@PeterCordes The reciprocal throughput of <code>VCVTSD2SI</code> on Haswell is 0.8, while the latency is 5. The overall approximated latency ~24 with the 4 shuffles seems reasonable for me. Do I miss something?"}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 1, "creation_date": 1481741588, "post_id": 41144668, "comment_id": 69502315, "body": "Peter is saying that, while the instruction does have a high latency, <i>latency is not your bottleneck</i>. That&#39;s what is meant by not being &quot;latency-bound&quot;."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1481741708, "post_id": 41144668, "comment_id": 69502393, "body": "@plasmacel: I think on Haswell you can start a VCVTSD2SI in cycles 1, 2, 4, and 5 (for an input vector ready on cycle 1).  Not on cycle 3 because VEXTRACTF128 starting on cycle 1 only has a result ready for a convert starting on cycle 4."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 2, "creation_date": 1481741986, "post_id": 41144668, "comment_id": 69502549, "body": "The last of those conversions finishes on cycle 10.  Two VMOVQs and a VPINSRQ should already be done or in-flight at that point, so the latency to an integer vector being ready is just the final VPINSRQ (2 cycles) + VINSERTI128 (3 cycles), so you can have an int64 vector ready on cycle 15, assuming no resource-conflicts delay the critical path.  And yes, what @Cody said is exactly what I meant."}, {"owner": {"reputation": 351, "user_id": 2016181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04091ef404c865dbec1da7df7ee82734?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/2016181/jan"}, "edited": false, "score": 0, "creation_date": 1572911559, "post_id": 41144668, "comment_id": 103701081, "body": "I&#39;ve been reading all this avidly, because my profiler still was pointing to my double2int64 routine, which is:    long long _inline double2int(const double d)    { return _mm_cvtsd_si64(<i>(__m128d</i>)&amp;d); } and works out to: movsd       mmword ptr [rbp-28h],xmm6   cvtsd2si    rdx,mmword ptr [rbp-28h] It is SSE2, see <a href=\"https://docs.microsoft.com/en-us/previous-versions/bb514009(v=vs.120)\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/previous-versions/bb514009(v=vs.120&zwnj;&#8203;)</a>. But perhaps it is not as efficient as the solutions given here. Who knows?"}], "answers": [{"comments": [{"owner": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "edited": false, "score": 0, "creation_date": 1481736519, "post_id": 41148578, "comment_id": 69499665, "body": "This is impressive. Can you elaborate a bit on why is the range only (-2^51, 2^51) and [0, 2^52)? As far as I know the biggest consecutive integer a double can store without losing precision is 2^53."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "reply_to_user": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "edited": false, "score": 3, "creation_date": 1481736911, "post_id": 41148578, "comment_id": 69499890, "body": "The unsigned case is easier to understand, so I&#39;ll start with that. Double-precision values in the range <code>[2^52, 2^53)</code> have the &quot;binary place&quot; exactly lined up below the lowest bit of the mantissa.  So if you mask out the upper bits, you get exactly the integer representation. The idea with adding <code>2^52</code> is to force the value into that range. Hence why it only works when the number is between <code>[0, 2^52)</code>."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "reply_to_user": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "edited": false, "score": 2, "creation_date": 1481737123, "post_id": 41148578, "comment_id": 69499999, "body": "The signed case is very similar. Again, you normalize the number into the range <code>[2^52, 2^53)</code>. But you adjust the magic constant so that it handles a different input range. Again the range of numbers you can handle is still only <code>2^52</code>. But this time, it&#39;s split up across positive/negative, hence <code>(-2^51, 2^51)</code>."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "reply_to_user": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "edited": false, "score": 2, "creation_date": 1481738099, "post_id": 41148578, "comment_id": 69500497, "body": "TBH, it almost makes me sad that AVX512 has the <code>double &lt;-&gt; int64</code> conversions. Because the 2-instruction work-around that I&#39;ve been using for so many years is too awesome to let go. That said, I don&#39;t consider this trick dead with AVX512. Because of the flexibility of the magic constant, this approach generalizes to more than just simple conversions. And the exposed fp-add for <code>double -&gt; int</code> can be fused with any preceding multiplies."}, {"owner": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "edited": false, "score": 0, "creation_date": 1481738699, "post_id": 41148578, "comment_id": 69500776, "body": "I think it&#39;s good to have a standard full range, and a lesser range but probably faster  <code>double&#47;int64</code> conversion. They give perfect balance between safety and performance."}, {"owner": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "edited": false, "score": 0, "creation_date": 1481740026, "post_id": 41148578, "comment_id": 69501484, "body": "On the other hand AVX512&#39;s <code>vcvtpd2qq</code> (<code>double</code>/<code>int64</code> conversion) just like SSE2&#39;s <code>cvtpd2dq</code> also perform rounding with the conversion, which follows the current rounding direction. So this and your workaround cover different situations."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "reply_to_user": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "edited": false, "score": 2, "creation_date": 1481740551, "post_id": 41148578, "comment_id": 69501732, "body": "@plasmacel The <code>double -&gt; int64</code> conversions here in my answer follow the current rounding direction. The normalization step (add by constant) pushes all the fractional bits out of the mantissa which are rounded away in the current direction."}, {"owner": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "edited": false, "score": 0, "creation_date": 1481740921, "post_id": 41148578, "comment_id": 69501927, "body": "I didn&#39;t realized that, but it&#39;s great. Maybe mention it at the end of the answer for future users."}, {"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 2, "creation_date": 1481764301, "post_id": 41148578, "comment_id": 69511582, "body": "@Mysticial I think it would make sense to add a remark that the &quot;current rounding mode&quot; would normally be &quot;round-to-nearest-or-even&quot;, so that this &quot;conversion by addition of magic constant&quot; does not normally result in the floating-point to integer conversion result prescribed by C and C++ (which specifies truncation)."}, {"owner": {"reputation": 3352, "user_id": 2439725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428ff617402eb64c48ed6dfc153617f9?s=128&d=identicon&r=PG", "display_name": "wim", "link": "https://stackoverflow.com/users/2439725/wim"}, "edited": false, "score": 0, "creation_date": 1482159148, "post_id": 41148578, "comment_id": 69649063, "body": "@Mysticial Your code is also suitable as a building bock for 64 bit  range integer to double conversion (without cutting corners) , see <a href=\"http://stackoverflow.com/a/41223013/2439725\">my answer</a>"}, {"owner": {"reputation": 3352, "user_id": 2439725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428ff617402eb64c48ed6dfc153617f9?s=128&d=identicon&r=PG", "display_name": "wim", "link": "https://stackoverflow.com/users/2439725/wim"}, "edited": false, "score": 0, "creation_date": 1560553037, "post_id": 41148578, "comment_id": 99788067, "body": "@Mysticial: Great update! It turns out that accurate <code>int64_t -&gt; double</code> conversion is also possible with only 5 instructions, see my update."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "reply_to_user": {"reputation": 3352, "user_id": 2439725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428ff617402eb64c48ed6dfc153617f9?s=128&d=identicon&r=PG", "display_name": "wim", "link": "https://stackoverflow.com/users/2439725/wim"}, "edited": false, "score": 0, "creation_date": 1560571215, "post_id": 41148578, "comment_id": 99790163, "body": "@wim Nice work! So there <i>was</i> a way to get it lower!"}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1596166387, "post_id": 41148578, "comment_id": 111731395, "body": "@Mysticial - any way you are aware of to modify it you actually <i>want</i> truncation?"}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "reply_to_user": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1596168199, "post_id": 41148578, "comment_id": 111731729, "body": "@BeeOnRope Not without changing the rounding mode or adding <code>0.5</code> - which is pretty sketchy with respect to corner cases."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1596168409, "post_id": 41148578, "comment_id": 111731776, "body": "@Mysticial - thanks. What&#39;s the worst that can happen with adding 0.5? I generally expect my results to be in the range -1000,1000 and I guess mis-rounding at one value the breakpoint is fine (i.e., I don&#39;t especially care about 500.0 ending up as 499 as integers like 500.0 are not special in my application)."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1596168492, "post_id": 41148578, "comment_id": 111731785, "body": "Changing the rounding mode seems hard since it&#39;s in the middle of a bunch of other calcs where I want the default rounding mode. You can also mostly ignore these comments since it seems like <code>vcvttpd2dq</code> is going to do the trick (but the latency is yuck, I guess due to lane crossing)."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 1, "creation_date": 1596182971, "post_id": 41148578, "comment_id": 111736047, "body": "Adding 0.5 will have double rounding. Also, I think some of the tie-breaking cases might be incorrect if you expect correct rounding."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1596325712, "post_id": 41148578, "comment_id": 111776715, "body": "@Mysticial - in this case I&#39;m fine with many ULPs of error. I&#39;m actually just trying to avoid 7 (!!) cycles of latency for the truncating version of the <code>cvt</code> instructions, for <code>double</code> -&gt; <code>uint32_t</code> conversion, but think that&#39;s not going to fly because adding the 0.5 needs to separate from the <code>por</code> thing (I think), so in the end I&#39;m going to have 4 (add) + 4 (add) + 1 (xor) latency anyway, which is obv worse... Great answer tho in any case :)."}], "tags": [], "owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "is_accepted": true, "score": 35, "last_activity_date": 1571518838, "last_edit_date": 1571518838, "creation_date": 1481736209, "answer_id": 41148578, "question_id": 41144668, "link": "https://stackoverflow.com/questions/41144668/how-to-efficiently-perform-double-int64-conversions-with-sse-avx/41148578#41148578", "title": "How to efficiently perform double/int64 conversions with SSE/AVX?", "body": "<p><strong>There's no single instruction until AVX512</strong>, which added conversion to/from 64-bit integers, signed or unsigned.  (Also support for conversion to/from 32-bit unsigned).  See intrinsics like <code>_mm512_cvtpd_epi64</code> and the narrower AVX512VL versions, like <code>_mm256_cvtpd_epi64</code>.</p>\n\n<p>If you only have AVX2 or less, you'll need tricks like below for packed-conversion.  (For scalar, x86-64 has scalar int64_t &lt;-> double or float from SSE2, but scalar uint64_t &lt;-> FP requires tricks until AVX512 adds unsigned conversions.  Scalar 32-bit unsigned can be done by zero-extending to 64-bit signed.)</p>\n\n<hr>\n\n<p>If you're willing to cut corners, <code>double &lt;-&gt; int64</code> conversions can be done in only two instructions:</p>\n\n<ul>\n<li>If you don't care about infinity or <code>NaN</code>.</li>\n<li>For <code>double &lt;-&gt; int64_t</code>, you only care about values in the range <code>[-2^51, 2^51]</code>.</li>\n<li>For <code>double &lt;-&gt; uint64_t</code>, you only care about values in the range <code>[0, 2^52)</code>.</li>\n</ul>\n\n<p><strong>double -> uint64_t</strong></p>\n\n<pre><code>//  Only works for inputs in the range: [0, 2^52)\n__m128i double_to_uint64(__m128d x){\n    x = _mm_add_pd(x, _mm_set1_pd(0x0010000000000000));\n    return _mm_xor_si128(\n        _mm_castpd_si128(x),\n        _mm_castpd_si128(_mm_set1_pd(0x0010000000000000))\n    );\n}\n</code></pre>\n\n<p><strong>double -> int64_t</strong></p>\n\n<pre><code>//  Only works for inputs in the range: [-2^51, 2^51]\n__m128i double_to_int64(__m128d x){\n    x = _mm_add_pd(x, _mm_set1_pd(0x0018000000000000));\n    return _mm_sub_epi64(\n        _mm_castpd_si128(x),\n        _mm_castpd_si128(_mm_set1_pd(0x0018000000000000))\n    );\n}\n</code></pre>\n\n<p><strong>uint64_t -> double</strong></p>\n\n<pre><code>//  Only works for inputs in the range: [0, 2^52)\n__m128d uint64_to_double(__m128i x){\n    x = _mm_or_si128(x, _mm_castpd_si128(_mm_set1_pd(0x0010000000000000)));\n    return _mm_sub_pd(_mm_castsi128_pd(x), _mm_set1_pd(0x0010000000000000));\n}\n</code></pre>\n\n<p><strong>int64_t -> double</strong></p>\n\n<pre><code>//  Only works for inputs in the range: [-2^51, 2^51]\n__m128d int64_to_double(__m128i x){\n    x = _mm_add_epi64(x, _mm_castpd_si128(_mm_set1_pd(0x0018000000000000)));\n    return _mm_sub_pd(_mm_castsi128_pd(x), _mm_set1_pd(0x0018000000000000));\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Rounding Behavior:</strong></p>\n\n<ul>\n<li>For the <code>double -&gt; uint64_t</code> conversion, rounding works correctly following the current rounding mode. (which is usually round-to-even)</li>\n<li>For the <code>double -&gt; int64_t</code> conversion, rounding will follow the current rounding mode for all modes except truncation. If the current rounding mode is truncation (round towards zero), it will actually round towards negative infinity.</li>\n</ul>\n\n<hr>\n\n<p><strong>How does it work?</strong></p>\n\n<p>Despite this trick being only 2 instructions, it's not entirely self-explanatory.</p>\n\n<p>The key is to recognize that for double-precision floating-point, values in the range <code>[2^52, 2^53)</code> have the \"binary place\" just below the lowest bit of the mantissa. In other words, if you zero out the exponent and sign bits, the mantissa becomes precisely the integer representation.</p>\n\n<p>To convert <code>x</code> from <code>double -&gt; uint64_t</code>, you add the magic number <code>M</code> which is the floating-point value of <code>2^52</code>. This puts <code>x</code> into the \"normalized\" range of <code>[2^52, 2^53)</code> and conveniently rounds away the fractional part bits.</p>\n\n<p>Now all that's left is to remove the upper 12 bits. This is easily done by masking it out. The fastest way is to recognize that those upper 12 bits are identical to those of <code>M</code>. So rather than introducing an additional mask constant, we can simply subtract or XOR by <code>M</code>. XOR has more throughput.</p>\n\n<p>Converting from <code>uint64_t -&gt; double</code> is simply the reverse of this process. You add back the exponent bits of <code>M</code>. Then un-normalize the number by subtracting <code>M</code> in floating-point.</p>\n\n<p>The signed integer conversions are slightly trickier since you need to deal with the 2's complement sign-extension. I'll leave those as an exercise for the reader.</p>\n\n<p><strong>Related:</strong> <a href=\"https://stackoverflow.com/q/17035464/922184\">A fast method to round a double to a 32-bit int explained</a></p>\n\n<hr>\n\n<p><strong>Full Range int64 -> double:</strong></p>\n\n<p>After many years, I finally had a need for this.</p>\n\n<ul>\n<li>5 instructions for <code>uint64_t -&gt; double</code></li>\n<li>6 instructions for <code>int64_t -&gt; double</code></li>\n</ul>\n\n<p><strong>uint64_t -> double</strong></p>\n\n<pre><code>__m128d uint64_to_double_full(__m128i x){\n    __m128i xH = _mm_srli_epi64(x, 32);\n    xH = _mm_or_si128(xH, _mm_castpd_si128(_mm_set1_pd(19342813113834066795298816.)));          //  2^84\n    __m128i xL = _mm_blend_epi16(x, _mm_castpd_si128(_mm_set1_pd(0x0010000000000000)), 0xcc);   //  2^52\n    __m128d f = _mm_sub_pd(_mm_castsi128_pd(xH), _mm_set1_pd(19342813118337666422669312.));     //  2^84 + 2^52\n    return _mm_add_pd(f, _mm_castsi128_pd(xL));\n}\n</code></pre>\n\n<p><strong>int64_t -> double</strong></p>\n\n<pre><code>__m128d int64_to_double_full(__m128i x){\n    __m128i xH = _mm_srai_epi32(x, 16);\n    xH = _mm_blend_epi16(xH, _mm_setzero_si128(), 0x33);\n    xH = _mm_add_epi64(xH, _mm_castpd_si128(_mm_set1_pd(442721857769029238784.)));              //  3*2^67\n    __m128i xL = _mm_blend_epi16(x, _mm_castpd_si128(_mm_set1_pd(0x0010000000000000)), 0x88);   //  2^52\n    __m128d f = _mm_sub_pd(_mm_castsi128_pd(xH), _mm_set1_pd(442726361368656609280.));          //  3*2^67 + 2^52\n    return _mm_add_pd(f, _mm_castsi128_pd(xL));\n}\n</code></pre>\n\n<p>These work for the entire 64-bit range and are correctly rounded to the current rounding behavior.</p>\n\n<p>These are similar wim's answer below - but with more abusive optimizations. As such, deciphering these will also be left as an exercise to the reader.</p>\n"}, {"comments": [{"owner": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "edited": false, "score": 0, "creation_date": 1482168676, "post_id": 41223013, "comment_id": 69654903, "body": "An another excellent answer! Did you try the same full precision logic to convert two uint64 to doubles with SSE2?"}, {"owner": {"reputation": 3352, "user_id": 2439725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428ff617402eb64c48ed6dfc153617f9?s=128&d=identicon&r=PG", "display_name": "wim", "link": "https://stackoverflow.com/users/2439725/wim"}, "reply_to_user": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "edited": false, "score": 2, "creation_date": 1482182416, "post_id": 41223013, "comment_id": 69661692, "body": "I did some experiments with a similar code, but with 128 bit wide vectors and with instructions up to SSE4, but the results were very disappointing. Conversion with one <code>movq</code>, one <code>pextrq&#39;, one </code>unpcklpd<code>, and  two </code>cvtsi2sd` turned out to be much faster than the other approach."}, {"owner": {"reputation": 3352, "user_id": 2439725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428ff617402eb64c48ed6dfc153617f9?s=128&d=identicon&r=PG", "display_name": "wim", "link": "https://stackoverflow.com/users/2439725/wim"}, "reply_to_user": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "edited": false, "score": 0, "creation_date": 1560592997, "post_id": 41223013, "comment_id": 99793744, "body": "Note that in principle it is possible to use <code>-Ofast</code> in combination with the function attribute <code>__attribute__ ((optimize(&quot;no-fast-math&quot;)))</code>, But that might lead to inefficient code, see <a href=\"https://godbolt.org/z/OLgHUs\" rel=\"nofollow noreferrer\">this Godbolt link</a>."}], "tags": [], "owner": {"reputation": 3352, "user_id": 2439725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428ff617402eb64c48ed6dfc153617f9?s=128&d=identicon&r=PG", "display_name": "wim", "link": "https://stackoverflow.com/users/2439725/wim"}, "is_accepted": false, "score": 17, "last_activity_date": 1560583713, "last_edit_date": 1592644375, "creation_date": 1482151875, "answer_id": 41223013, "question_id": 41144668, "link": "https://stackoverflow.com/questions/41144668/how-to-efficiently-perform-double-int64-conversions-with-sse-avx/41223013#41223013", "title": "How to efficiently perform double/int64 conversions with SSE/AVX?", "body": "<p>This answer is about 64 bit integer to double conversion, without cutting corners. In a previous version of this answer (see paragraph <em>Fast and accurate conversion by splitting ....</em>, below),\nit was shown that\nit is quite efficient to split the 64-bit integers in a 32-bit low and a 32-bit high part,\nconvert these parts to double, and compute <code>low + high * 2^32</code>.</p>\n<p>The instruction counts of these conversions were:</p>\n<ul>\n<li><code>int64_to_double_full_range</code>  9 instructions (with <code>mul</code> and <code>add</code> as one <code>fma</code>)</li>\n<li><code>uint64_to_double_full_range</code>  7 instructions (with <code>mul</code> and <code>add</code> as one <code>fma</code>)</li>\n</ul>\n<p>Inspired by Mysticial's updated answer, with better optimized accurate conversions,\nI further optimized the <code>int64_t</code> to double conversion:</p>\n<ul>\n<li><code>int64_to_double_fast_precise</code>: 5 instructions.</li>\n<li><code>uint64_to_double_fast_precise</code>: 5 instructions.</li>\n</ul>\n<p>The <code>int64_to_double_fast_precise</code> conversion takes one instruction less than Mysticial's solution.\nThe <code>uint64_to_double_fast_precise</code> code is essentially identical to Mysticial's solution (but with a <code>vpblendd</code>\ninstead of <code>vpblendw</code>). It is included here because of its similarities with the\n<code>int64_to_double_fast_precise</code> conversion: The instructions are identical, only the constants differ:</p>\n<br/>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;immintrin.h&gt;\n#include &lt;stdint.h&gt;\n\n__m256d int64_to_double_fast_precise(const __m256i v)\n/* Optimized full range int64_t to double conversion           */\n/* Emulate _mm256_cvtepi64_pd()                                */\n{\n    __m256i magic_i_lo   = _mm256_set1_epi64x(0x4330000000000000);                /* 2^52               encoded as floating-point  */\n    __m256i magic_i_hi32 = _mm256_set1_epi64x(0x4530000080000000);                /* 2^84 + 2^63        encoded as floating-point  */\n    __m256i magic_i_all  = _mm256_set1_epi64x(0x4530000080100000);                /* 2^84 + 2^63 + 2^52 encoded as floating-point  */\n    __m256d magic_d_all  = _mm256_castsi256_pd(magic_i_all);\n\n    __m256i v_lo         = _mm256_blend_epi32(magic_i_lo, v, 0b01010101);         /* Blend the 32 lowest significant bits of v with magic_int_lo                                                   */\n    __m256i v_hi         = _mm256_srli_epi64(v, 32);                              /* Extract the 32 most significant bits of v                                                                     */\n            v_hi         = _mm256_xor_si256(v_hi, magic_i_hi32);                  /* Flip the msb of v_hi and blend with 0x45300000                                                                */\n    __m256d v_hi_dbl     = _mm256_sub_pd(_mm256_castsi256_pd(v_hi), magic_d_all); /* Compute in double precision:                                                                                  */\n    __m256d result       = _mm256_add_pd(v_hi_dbl, _mm256_castsi256_pd(v_lo));    /* (v_hi - magic_d_all) + v_lo  Do not assume associativity of floating point addition !!                        */\n            return result;                                                        /* With gcc use -O3, then -fno-associative-math is default. Do not use -Ofast, which enables -fassociative-math! */\n                                                                                  /* With icc use -fp-model precise                                                                                */\n}\n\n\n__m256d uint64_to_double_fast_precise(const __m256i v)                    \n/* Optimized full range uint64_t to double conversion          */\n/* This code is essentially identical to Mysticial's solution. */\n/* Emulate _mm256_cvtepu64_pd()                                */\n{\n    __m256i magic_i_lo   = _mm256_set1_epi64x(0x4330000000000000);                /* 2^52        encoded as floating-point  */\n    __m256i magic_i_hi32 = _mm256_set1_epi64x(0x4530000000000000);                /* 2^84        encoded as floating-point  */\n    __m256i magic_i_all  = _mm256_set1_epi64x(0x4530000000100000);                /* 2^84 + 2^52 encoded as floating-point  */\n    __m256d magic_d_all  = _mm256_castsi256_pd(magic_i_all);\n\n    __m256i v_lo         = _mm256_blend_epi32(magic_i_lo, v, 0b01010101);         /* Blend the 32 lowest significant bits of v with magic_int_lo                                                   */\n    __m256i v_hi         = _mm256_srli_epi64(v, 32);                              /* Extract the 32 most significant bits of v                                                                     */\n            v_hi         = _mm256_xor_si256(v_hi, magic_i_hi32);                  /* Blend v_hi with 0x45300000                                                                                    */\n    __m256d v_hi_dbl     = _mm256_sub_pd(_mm256_castsi256_pd(v_hi), magic_d_all); /* Compute in double precision:                                                                                  */\n    __m256d result       = _mm256_add_pd(v_hi_dbl, _mm256_castsi256_pd(v_lo));    /* (v_hi - magic_d_all) + v_lo  Do not assume associativity of floating point addition !!                        */\n            return result;                                                        /* With gcc use -O3, then -fno-associative-math is default. Do not use -Ofast, which enables -fassociative-math! */\n                                                                                  /* With icc use -fp-model precise                                                                                */\n}\n\n\nint main(){\n    int i;\n    uint64_t j;\n    __m256i j_4;\n    __m256d v;\n    double x[4];\n    double x0, x1, a0, a1;\n\n    j = 0ull;\n    printf(&quot;\\nAccurate int64_to_double\\n&quot;);\n    for (i = 0; i &lt; 260; i++){\n        j_4= _mm256_set_epi64x(0, 0, -j, j);\n\n        v  = int64_to_double_fast_precise(j_4);\n        _mm256_storeu_pd(x,v);\n        x0 = x[0];\n        x1 = x[1];\n        a0 = _mm_cvtsd_f64(_mm_cvtsi64_sd(_mm_setzero_pd(),j));\n        a1 = _mm_cvtsd_f64(_mm_cvtsi64_sd(_mm_setzero_pd(),-j));\n        printf(&quot; j =%21li   v =%23.1f   v=%23.1f   -v=%23.1f   -v=%23.1f   d=%.1f   d=%.1f\\n&quot;, j, x0, a0, x1, a1, x0-a0, x1-a1);\n        j  = j+(j&gt;&gt;2)-(j&gt;&gt;5)+1ull;\n    }\n    \n    j = 0ull;\n    printf(&quot;\\nAccurate uint64_to_double\\n&quot;);\n    for (i = 0; i &lt; 260; i++){\n        if (i==258){j=-1;}\n        if (i==259){j=-2;}\n        j_4= _mm256_set_epi64x(0, 0, -j, j);\n\n        v  = uint64_to_double_fast_precise(j_4);\n        _mm256_storeu_pd(x,v);\n        x0 = x[0];\n        x1 = x[1];\n        a0 = (double)((uint64_t)j);\n        a1 = (double)((uint64_t)-j);\n        printf(&quot; j =%21li   v =%23.1f   v=%23.1f   -v=%23.1f   -v=%23.1f   d=%.1f   d=%.1f\\n&quot;, j, x0, a0, x1, a1, x0-a0, x1-a1);\n        j  = j+(j&gt;&gt;2)-(j&gt;&gt;5)+1ull;\n    }\n    return 0;\n}\n</code></pre>\n<br/>\n<p>The conversions may fail if unsafe math optimization options are enabled. With gcc, <code>-O3</code> is\nsafe, but <code>-Ofast</code> may lead to wrong results, because we may not assume associativity\nof floating point addition here (the same holds for Mysticial's conversions).\nWith icc use <code>-fp-model precise</code>.</p>\n<br/>\n<hr/>\n<h3>Fast and accurate conversion by splitting the 64-bit integers in a 32-bit low and a 32-bit high part.</h3>\n<p>We assume that both the integer input and the double output are in 256 bit wide AVX registers.\nTwo approaches are considered:</p>\n<ol>\n<li><p><code>int64_to_double_based_on_cvtsi2sd()</code>: as suggested in the comments on the question, use <code>cvtsi2sd</code> 4 times together with some data shuffling.\nUnfortunately both <code>cvtsi2sd</code> and the data shuffling instructions need execution port 5. This limits the performance of this approach.</p>\n</li>\n<li><p><code>int64_to_double_full_range()</code>: we can use Mysticial's fast conversion method twice in order to get\nan accurate conversion for the full 64 bit integer range. The 64-bit integer is split in a 32-bit low and a 32-bit high part\n,similarly as in the answers to this question: <a href=\"https://stackoverflow.com/q/34066228\">How to perform uint32/float conversion with SSE?</a> .\nEach of these pieces is suitable for Mysticial's integer to double conversion.\nFinally the high part is multiplied by 2^32 and added to the low part.\nThe signed conversion is a little bit more complicted than the unsigned conversion (<code>uint64_to_double_full_range()</code>),\nbecause <code>srai_epi64()</code> doesn't exist.</p>\n</li>\n</ol>\n<p>Code:</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;immintrin.h&gt;\n#include &lt;stdint.h&gt;\n\n/* \ngcc -O3 -Wall -m64 -mfma -mavx2 -march=broadwell cvt_int_64_double.c\n./a.out A\ntime ./a.out B\ntime ./a.out C\netc.\n*/\n\n\ninline __m256d uint64_to_double256(__m256i x){                  /*  Mysticial's fast uint64_to_double. Works for inputs in the range: [0, 2^52)     */\n    x = _mm256_or_si256(x, _mm256_castpd_si256(_mm256_set1_pd(0x0010000000000000)));\n    return _mm256_sub_pd(_mm256_castsi256_pd(x), _mm256_set1_pd(0x0010000000000000));\n}\n\ninline __m256d int64_to_double256(__m256i x){                   /*  Mysticial's fast int64_to_double. Works for inputs in the range: (-2^51, 2^51)  */\n    x = _mm256_add_epi64(x, _mm256_castpd_si256(_mm256_set1_pd(0x0018000000000000)));\n    return _mm256_sub_pd(_mm256_castsi256_pd(x), _mm256_set1_pd(0x0018000000000000));\n}\n\n\n__m256d int64_to_double_full_range(const __m256i v)\n{\n    __m256i msk_lo       =_mm256_set1_epi64x(0xFFFFFFFF);\n    __m256d cnst2_32_dbl =_mm256_set1_pd(4294967296.0);                 /* 2^32                                                                    */\n\n    __m256i v_lo         = _mm256_and_si256(v,msk_lo);                  /* extract the 32 lowest significant bits of v                             */\n    __m256i v_hi         = _mm256_srli_epi64(v,32);                     /* 32 most significant bits of v. srai_epi64 doesn't exist                 */\n    __m256i v_sign       = _mm256_srai_epi32(v,32);                     /* broadcast sign bit to the 32 most significant bits                      */\n            v_hi         = _mm256_blend_epi32(v_hi,v_sign,0b10101010);  /* restore the correct sign of v_hi                                        */\n    __m256d v_lo_dbl     = int64_to_double256(v_lo);                    /* v_lo is within specified range of int64_to_double                       */ \n    __m256d v_hi_dbl     = int64_to_double256(v_hi);                    /* v_hi is within specified range of int64_to_double                       */ \n            v_hi_dbl     = _mm256_mul_pd(cnst2_32_dbl,v_hi_dbl);        /* _mm256_mul_pd and _mm256_add_pd may compile to a single fma instruction */\n    return _mm256_add_pd(v_hi_dbl,v_lo_dbl);                            /* rounding occurs if the integer doesn't exist as a double                */   \n}\n\n\n__m256d int64_to_double_based_on_cvtsi2sd(const __m256i v)\n{   __m128d zero         = _mm_setzero_pd();                            /* to avoid uninitialized variables in_mm_cvtsi64_sd                       */\n    __m128i v_lo         = _mm256_castsi256_si128(v);\n    __m128i v_hi         = _mm256_extracti128_si256(v,1);\n    __m128d v_0          = _mm_cvtsi64_sd(zero,_mm_cvtsi128_si64(v_lo));\n    __m128d v_2          = _mm_cvtsi64_sd(zero,_mm_cvtsi128_si64(v_hi));\n    __m128d v_1          = _mm_cvtsi64_sd(zero,_mm_extract_epi64(v_lo,1));\n    __m128d v_3          = _mm_cvtsi64_sd(zero,_mm_extract_epi64(v_hi,1));\n    __m128d v_01         = _mm_unpacklo_pd(v_0,v_1);\n    __m128d v_23         = _mm_unpacklo_pd(v_2,v_3);\n    __m256d v_dbl        = _mm256_castpd128_pd256(v_01);\n            v_dbl        = _mm256_insertf128_pd(v_dbl,v_23,1);\n    return v_dbl;\n}\n\n\n__m256d uint64_to_double_full_range(const __m256i v)                    \n{\n    __m256i msk_lo       =_mm256_set1_epi64x(0xFFFFFFFF);\n    __m256d cnst2_32_dbl =_mm256_set1_pd(4294967296.0);                 /* 2^32                                                                    */\n\n    __m256i v_lo         = _mm256_and_si256(v,msk_lo);                  /* extract the 32 lowest significant bits of v                             */\n    __m256i v_hi         = _mm256_srli_epi64(v,32);                     /* 32 most significant bits of v                                           */\n    __m256d v_lo_dbl     = uint64_to_double256(v_lo);                   /* v_lo is within specified range of uint64_to_double                      */ \n    __m256d v_hi_dbl     = uint64_to_double256(v_hi);                   /* v_hi is within specified range of uint64_to_double                      */ \n            v_hi_dbl     = _mm256_mul_pd(cnst2_32_dbl,v_hi_dbl);        \n    return _mm256_add_pd(v_hi_dbl,v_lo_dbl);                            /* rounding may occur for inputs &gt;2^52                                     */ \n}\n\n\n\nint main(int argc, char **argv){\n  int i;\n  uint64_t j;\n  __m256i j_4, j_inc;\n  __m256d v, v_acc;\n  double x[4];\n  char test = argv[1][0];\n\n  if (test=='A'){               /* test the conversions for several integer values                                       */\n    j = 1ull;\n    printf(&quot;\\nint64_to_double_full_range\\n&quot;);\n    for (i = 0; i&lt;30; i++){\n      j_4= _mm256_set_epi64x(j-3,j+3,-j,j);\n      v  = int64_to_double_full_range(j_4);\n      _mm256_storeu_pd(x,v);\n      printf(&quot;j =%21li    v =%23.1f    -v=%23.1f    v+3=%23.1f    v-3=%23.1f  \\n&quot;,j,x[0],x[1],x[2],x[3]);\n      j  = j*7ull;\n    }\n\n    j = 1ull;\n    printf(&quot;\\nint64_to_double_based_on_cvtsi2sd\\n&quot;);\n    for (i = 0; i&lt;30; i++){\n      j_4= _mm256_set_epi64x(j-3,j+3,-j,j);\n      v  = int64_to_double_based_on_cvtsi2sd(j_4);\n      _mm256_storeu_pd(x,v);\n      printf(&quot;j =%21li    v =%23.1f    -v=%23.1f    v+3=%23.1f    v-3=%23.1f  \\n&quot;,j,x[0],x[1],x[2],x[3]);\n      j  = j*7ull;\n    }\n\n    j = 1ull;                       \n    printf(&quot;\\nuint64_to_double_full_range\\n&quot;);\n    for (i = 0; i&lt;30; i++){\n      j_4= _mm256_set_epi64x(j-3,j+3,j,j);\n      v  = uint64_to_double_full_range(j_4);\n      _mm256_storeu_pd(x,v);\n      printf(&quot;j =%21lu    v =%23.1f   v+3=%23.1f    v-3=%23.1f \\n&quot;,j,x[0],x[2],x[3]);\n      j  = j*7ull;    \n    }\n  }\n  else{\n    j_4   = _mm256_set_epi64x(-123,-4004,-312313,-23412731);  \n    j_inc = _mm256_set_epi64x(1,1,1,1);  \n    v_acc = _mm256_setzero_pd();\n    switch(test){\n\n      case 'B' :{                  \n        printf(&quot;\\nLatency int64_to_double_cvtsi2sd()\\n&quot;);      /* simple test to get a rough idea of the latency of int64_to_double_cvtsi2sd()     */\n        for (i = 0; i&lt;1000000000; i++){\n          v  =int64_to_double_based_on_cvtsi2sd(j_4);\n          j_4= _mm256_castpd_si256(v);                         /* cast without conversion, use output as an input in the next step                 */\n        }\n        _mm256_storeu_pd(x,v);\n      }\n      break;\n\n      case 'C' :{                  \n        printf(&quot;\\nLatency int64_to_double_full_range()\\n&quot;);    /* simple test to get a rough idea of the latency of int64_to_double_full_range()    */\n        for (i = 0; i&lt;1000000000; i++){\n          v  = int64_to_double_full_range(j_4);\n          j_4= _mm256_castpd_si256(v);\n        }\n        _mm256_storeu_pd(x,v);\n      }\n      break;\n\n      case 'D' :{                  \n        printf(&quot;\\nThroughput int64_to_double_cvtsi2sd()\\n&quot;);   /* simple test to get a rough idea of the throughput of int64_to_double_cvtsi2sd()   */\n        for (i = 0; i&lt;1000000000; i++){\n          j_4   = _mm256_add_epi64(j_4,j_inc);                 /* each step a different input                                                       */\n          v     = int64_to_double_based_on_cvtsi2sd(j_4);\n          v_acc = _mm256_xor_pd(v,v_acc);                      /* use somehow the results                                                           */\n        }\n        _mm256_storeu_pd(x,v_acc);\n      }\n      break;\n\n      case 'E' :{                  \n        printf(&quot;\\nThroughput int64_to_double_full_range()\\n&quot;); /* simple test to get a rough idea of the throughput of int64_to_double_full_range() */\n        for (i = 0; i&lt;1000000000; i++){\n          j_4   = _mm256_add_epi64(j_4,j_inc);  \n          v     = int64_to_double_full_range(j_4);\n          v_acc = _mm256_xor_pd(v,v_acc);           \n        }    \n        _mm256_storeu_pd(x,v_acc);\n      }\n      break;\n\n      default : {}\n    }  \n    printf(&quot;v =%23.1f    -v =%23.1f    v =%23.1f    -v =%23.1f  \\n&quot;,x[0],x[1],x[2],x[3]);\n  }\n\n  return 0;\n}\n</code></pre>\n<p>The actual performance of these functions may depend on the surrounding code and the cpu generation.</p>\n<p>Timing results for 1e9 conversions (256 bit wide) with simple tests B, C, D, and E in the code above, on an intel skylake i5 6500 system:</p>\n<pre><code>Latency experiment int64_to_double_based_on_cvtsi2sd()      (test B)  5.02 sec.\nLatency experiment int64_to_double_full_range()             (test C)  3.77 sec.\nThroughput experiment int64_to_double_based_on_cvtsi2sd()   (test D)  2.82 sec.\nThroughput experiment int64_to_double_full_range()          (test E)  1.07 sec.\n</code></pre>\n<p>The difference in throughput between <code>int64_to_double_full_range()</code> and <code>int64_to_double_based_on_cvtsi2sd()</code> is larger than I expected.</p>\n"}], "owner": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5209, "favorite_count": 8, "accepted_answer_id": 41148578, "answer_count": 2, "score": 21, "last_activity_date": 1571518996, "creation_date": 1481724566, "last_edit_date": 1571518996, "question_id": 41144668, "link": "https://stackoverflow.com/questions/41144668/how-to-efficiently-perform-double-int64-conversions-with-sse-avx", "title": "How to efficiently perform double/int64 conversions with SSE/AVX?", "body": "<p>SSE2 has instructions for converting vectors between single-precision floats and 32-bit integers.</p>\n\n<ul>\n<li><code>_mm_cvtps_epi32()</code></li>\n<li><code>_mm_cvtepi32_ps()</code></li>\n</ul>\n\n<p>But there are no equivalents for double-precision and 64-bit integers. In other words, they are missing:</p>\n\n<ul>\n<li><code>_mm_cvtpd_epi64()</code></li>\n<li><code>_mm_cvtepi64_pd()</code></li>\n</ul>\n\n<p>It seems that AVX doesn't have them either.</p>\n\n<p>What is the most efficient way to simulate these intrinsics?</p>\n"}, {"tags": ["c++", "embedded", "placement-new"], "comments": [{"owner": {"reputation": 3740, "user_id": 1030870, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8f96f7ac4f0bf4c2421a9f58b6893400?s=128&d=identicon&r=PG", "display_name": "Mine", "link": "https://stackoverflow.com/users/1030870/mine"}, "edited": false, "score": 0, "creation_date": 1481725396, "post_id": 41144614, "comment_id": 69492294, "body": "You are missing <code>#include &lt;new&gt;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3026, "user_id": 3359751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/91b28e94ea506bc9331a489712096b2c?s=128&d=identicon&r=PG&f=1", "display_name": "wimalopaan", "link": "https://stackoverflow.com/users/3359751/wimalopaan"}, "edited": false, "score": 0, "creation_date": 1481726448, "post_id": 41144866, "comment_id": 69492951, "body": "Well, what should I do, if I don&#39;t have a &lt;new&gt; include file, as it is the case with avr-g++?"}], "tags": [], "owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "is_accepted": true, "score": 6, "last_activity_date": 1481727656, "last_edit_date": 1481727656, "creation_date": 1481725190, "answer_id": 41144866, "question_id": 41144614, "link": "https://stackoverflow.com/questions/41144614/placement-new-for-mcu-register-abstraction-proposed-by-meyers/41144866#41144866", "title": "Placement new for MCU register abstraction proposed by Meyers", "body": "<p>Placement new is an operator function.\nYour specific one should be defined as </p>\n\n<p><code>void* operator new  ( std::size_t count, void* ptr );</code> </p>\n\n<p>in the header file <code>&lt;new&gt;</code>.</p>\n\n<p>Using <code>#include &lt;new&gt;</code> should resolve your problem.</p>\n\n<p>For an example see here:\n<a href=\"https://godbolt.org/g/iKatox\" rel=\"noreferrer\">https://godbolt.org/g/iKatox</a></p>\n\n<p>More information about the new operators can be found here:\n<a href=\"http://en.cppreference.com/w/cpp/memory/new/operator_new\" rel=\"noreferrer\">http://en.cppreference.com/w/cpp/memory/new/operator_new</a></p>\n\n<hr>\n\n<p>Update: </p>\n\n<p>If you don't have access to placement new you might define it yourself.\nI used the VC++14 version as a template for this:</p>\n\n<pre><code>#include &lt;stdlib.h&gt; //for std::size_t\ninline void* operator new(std::size_t size, void* ptr)\n{\n  (void)size;//unused\n  return ptr;\n}\n\ninline void operator delete(void*, void*)\n{\n  return;\n}\n</code></pre>\n\n<p>You can compare both versions generating the same assembly code:\n<a href=\"https://godbolt.org/g/6UjER9\" rel=\"noreferrer\">https://godbolt.org/g/6UjER9</a></p>\n"}], "owner": {"reputation": 3026, "user_id": 3359751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/91b28e94ea506bc9331a489712096b2c?s=128&d=identicon&r=PG&f=1", "display_name": "wimalopaan", "link": "https://stackoverflow.com/users/3359751/wimalopaan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 41144866, "answer_count": 1, "score": 2, "last_activity_date": 1481727656, "creation_date": 1481724394, "question_id": 41144614, "link": "https://stackoverflow.com/questions/41144614/placement-new-for-mcu-register-abstraction-proposed-by-meyers", "title": "Placement new for MCU register abstraction proposed by Meyers", "body": "<p>I just tried to use a placement new operator as suggested by Scott Meyers in \"Effectice C++ in an Embedded Environment\". </p>\n\n<pre><code>    DefaultMcuType::PortRegister* p = new(reinterpret_cast&lt;void*&gt;(0x05)) DefaultMcuType::PortRegister;\n</code></pre>\n\n<p>Then I get the follwoing errors:</p>\n\n<pre><code>register.cc: In function 'int main()':\nregister.cc:30:90: error: no matching function for call to 'operator     new(sizetype, void*)'\n DefaultMcuType::PortRegister* p = new(reinterpret_cast&lt;void*&gt;(0x05))  DefaultMcuType::PortRegister;\n                                                                                        ^~~~~~~~~~~~\n&lt;built-in&gt;: note: candidate: void* operator new(unsigned int)\n&lt;built-in&gt;: note:   candidate expects 1 argument, 2 provided\n&lt;built-in&gt;: note: candidate: void* operator new(unsigned int,  std::align_val_t)\n&lt;built-in&gt;: note:   no known conversion for argument 2 from 'void*' to  'std::align_val_t'\nregister.cc:30:35: warning: unused variable 'p' [-Wunused-variable]\n DefaultMcuType::PortRegister* p = new(reinterpret_cast&lt;void*&gt;(0x05))    DefaultMcuType::PortRegister;\n                               ^\n</code></pre>\n\n<p>I really can't figure out what I am doing wrong.</p>\n"}, {"tags": ["c++", "boost", "timer"], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1481723999, "post_id": 41144422, "comment_id": 69491402, "body": "Much better than my thought of passing the code to run as a lambda to a function."}, {"owner": {"reputation": 6633, "user_id": 2378300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/852aed09b52c7514ed23f75f2921f6cc?s=128&d=identicon&r=PG", "display_name": "Jonas", "link": "https://stackoverflow.com/users/2378300/jonas"}, "edited": false, "score": 0, "creation_date": 1481724251, "post_id": 41144422, "comment_id": 69491564, "body": "You could consider using &#39;\\n&#39; instead of endl, top avoid flushing the buffer."}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "reply_to_user": {"reputation": 6633, "user_id": 2378300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/852aed09b52c7514ed23f75f2921f6cc?s=128&d=identicon&r=PG", "display_name": "Jonas", "link": "https://stackoverflow.com/users/2378300/jonas"}, "edited": false, "score": 0, "creation_date": 1481724656, "post_id": 41144422, "comment_id": 69491819, "body": "@Jonas: Maybe, but you should suggest that to OP, not me.  Whether he wants or needs to flush I have no idea.  I just replicated the same behavior."}], "tags": [], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "is_accepted": false, "score": 5, "last_activity_date": 1481723999, "last_edit_date": 1481723999, "creation_date": 1481723802, "answer_id": 41144422, "question_id": 41144337, "link": "https://stackoverflow.com/questions/41144337/how-to-add-timer-to-every-method-of-class/41144422#41144422", "title": "How to add timer to every method of class?", "body": "<p>You can almost achieve this using RAII:</p>\n\n<pre><code>struct FunctionLogger {\n    FunctionLogger(const char* func)\n        : m_func(func)\n    {\n        cout &lt;&lt; func &lt;&lt;endl;\n    }\n    ~FunctionLogger() {\n        boost::timer::cpu_times elapsed = timer.elapsed();\n        GSULOG &lt;&lt; m_func &lt;&lt; \" : WALLCLOCK TIME: \" &lt;&lt; elapsed.wall / 1e9 &lt;&lt; \" seconds\" &lt;&lt; endl;\n    }\n    const char* m_func;\n    boost::timer::cpu_timer timer;\n};\n</code></pre>\n\n<p>Now:</p>\n\n<pre><code>void MyClass::SomeFunc()\n{\n    FunctionLogger _(__PRETTY_FUNCTION__);\n    //Some code\n}\n</code></pre>\n\n<p>And of course if you like macros:</p>\n\n<pre><code>#define FL FunctionLogger _(__PRETTY_FUNCTION__)\n\nvoid MyClass::SomeFunc()\n{\n    FL;\n    //Some code\n}\n</code></pre>\n\n<p>If you are looking for an industrial-grade solution for this sort of thing, the term of art is <a href=\"https://en.wikipedia.org/wiki/Aspect-oriented_programming\" rel=\"nofollow noreferrer\">Aspect Oriented Programming</a>.  But it's not directly supported by C++.</p>\n"}, {"tags": [], "owner": {"reputation": 2302, "user_id": 583195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b5b273a1d94ed145dd9fec1d4d90738?s=128&d=identicon&r=PG", "display_name": "Gavin Lock", "link": "https://stackoverflow.com/users/583195/gavin-lock"}, "is_accepted": false, "score": 4, "last_activity_date": 1481724482, "creation_date": 1481724482, "answer_id": 41144643, "question_id": 41144337, "link": "https://stackoverflow.com/questions/41144337/how-to-add-timer-to-every-method-of-class/41144643#41144643", "title": "How to add timer to every method of class?", "body": "<p>What you are trying to do is known as known as profiling (getting the duration of each function call) and instrumentation (injecting code into the functions to get more detailed, but probably less accurate, timing information).</p>\n\n<p><strong>By far</strong> the best way of doing this is by not doing it yourself, but by running your code under a profiler (an off-the-shelf application which does the timing and, optionally, instrumentation automatically, all without polluting your source code.)</p>\n"}, {"tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1481735942, "last_edit_date": 1481735942, "creation_date": 1481726361, "answer_id": 41145280, "question_id": 41144337, "link": "https://stackoverflow.com/questions/41144337/how-to-add-timer-to-every-method-of-class/41145280#41145280", "title": "How to add timer to every method of class?", "body": "<p>If you want to avoid modifying code, and are willing to sacrifice that <code>__PRETTY_FUNCTION__</code> output. You can achieve this by accessing the class through a timing handle.</p>\n\n<p>First you define a RAII class for timing, kind of like in <strong>John Zwinck</strong>'s answer:</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct TimingDecorator {\n  T *ptr_;\n  boost::timer::cpu_timer timer;\n\n  TimingDecorator (T* ptr) : ptr_(ptr) {}\n  ~TimingDecorator () {\n        boost::timer::cpu_times elapsed = timer.elapsed();\n        GSULOG &lt;&lt; \" : WALLCLOCK TIME: \" &lt;&lt; elapsed.wall / 1e9 &lt;&lt; \" seconds\" &lt;&lt; endl;\n  }\n  T* operator-&gt;() { return ptr_; }\n  T const * operator-&gt;() const { return ptr_; }\n};\n</code></pre>\n\n<p>Then you define a handle that forces all access to the class through the decorator:</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct TimingHandle {\n  T &amp;obj_;\n  boost::timer::cpu_timer timer;\n\n  TimingHandle (T const&amp; obj) : obj_(obj) {}\n\n  TimingDecorator&lt;T&gt; operator-&gt;() { return &amp;obj_; }\n  TimingDecorator&lt;T const&gt; operator-&gt;() const { return &amp;obj_; }\n};\n</code></pre>\n\n<p>And then for timing you do all access through the handle:</p>\n\n<pre><code>MyClass obj;\nTimingHandle&lt;MyClass&gt; obj_timing(obj);\n\nGSULOG &lt;&lt; \"MyClass::SomeFunc\" &lt;&lt; endl;\nobj_timing-&gt;SomeFunc();\n</code></pre>\n\n<hr>\n\n<p>I should point out that the last two lines can be wrapped in a macro (if you don't mind using one), to avoid repeating yourself.</p>\n\n<pre><code>#define MYCLASS_TIME_FUNC(handle, func) \\\n  GSULOG &lt;&lt; \"MyClass::\" #func &lt;&lt; endl;  \\\n  (handle)-&gt;func\n</code></pre>\n\n<p>Which you ultimately can use as </p>\n\n<pre><code>MYCLASS_TIME_FUNC(obj_timing, SomeFunc2)(/* params for SomeFunc2 */);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1481893082, "post_id": 41183008, "comment_id": 69569544, "body": "Added a <a href=\"http://coliru.stacked-crooked.com/a/065edfbe265d214c\" rel=\"nofollow noreferrer\">sample of a helper macro <code>TIMED</code></a> that produces output like <code>(main.cpp:25 std::getline(std::cin, line) completed in 497455&#181;s)</code>"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 1, "last_activity_date": 1481893312, "last_edit_date": 1481893312, "creation_date": 1481886292, "answer_id": 41183008, "question_id": 41144337, "link": "https://stackoverflow.com/questions/41144337/how-to-add-timer-to-every-method-of-class/41183008#41183008", "title": "How to add timer to every method of class?", "body": "<p>Reversing the initiatives a bit you can also use:</p>\n\n<pre><code>template &lt;typename Caption, typename F&gt;\nauto timed(Caption const&amp; task, F&amp;&amp; f) {\n    return [f=std::forward&lt;F&gt;(f), task](auto&amp;&amp;... args) {\n        using namespace std::chrono;\n\n        struct measure {\n            high_resolution_clock::time_point start;\n            Caption task;\n            ~measure() { GSU_LOCK &lt;&lt; \" -- (\" &lt;&lt; task &lt;&lt; \" completed in \" &lt;&lt; duration_cast&lt;microseconds&gt;(high_resolution_clock::now() - start).count() &lt;&lt; \"\u00b5s)\\n\"; }\n        } timing { high_resolution_clock::now(), task };\n\n        return f(std::forward&lt;decltype(args)&gt;(args)...);\n    };\n}\n</code></pre>\n\n<p>Which you can use like: <a href=\"http://coliru.stacked-crooked.com/a/9f2bf09a45d8b3a5\" rel=\"nofollow noreferrer\">Live On Coliru</a></p>\n\n<pre><code>timed_rand = time(\"Generate a random number\", &amp;::rand);\n\nfor (int i = 0; i&lt;10; ++i)\n     std::cout &lt;&lt; timed_rand() &lt;&lt; \" \";\n</code></pre>\n\n<p>With a bit of MACRO help you can make it even more verstatile to use:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/065edfbe265d214c\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;chrono&gt;\nusing namespace std::literals::string_literals;\n#define GSU_LOG std::clog\n\ntemplate &lt;typename Caption, typename F&gt;\nauto timed(Caption const&amp; task, F&amp;&amp; f) {\n    return [f=std::forward&lt;F&gt;(f), task](auto&amp;&amp;... args) -&gt; decltype(auto) {\n        using namespace std::chrono;\n\n        struct measure {\n            high_resolution_clock::time_point start;\n            Caption task;\n            ~measure() { GSU_LOG &lt;&lt; \" -- (\" &lt;&lt; task &lt;&lt; \" completed in \" &lt;&lt; duration_cast&lt;microseconds&gt;(high_resolution_clock::now() - start).count() &lt;&lt; \"\u00b5s)\\n\"; }\n        } timing { high_resolution_clock::now(), task };\n\n        return f(std::forward&lt;decltype(args)&gt;(args)...);\n    };\n}\n\n#define TIMED(expr) (timed(__FILE__ + (\":\" + std::to_string(__LINE__)) + \" \" #expr, [&amp;]() -&gt; decltype(auto) {return (expr);})())\n\nint main() {\n    std::string line;\n    while (TIMED(std::getline(std::cin, line))) {\n        std::cout &lt;&lt; \"Simple arithmetic: \" &lt;&lt; TIMED(42 * TIMED(line.length())) &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>$ clang++ -std=c++14 -O2 -Wall -pedantic -pthread main.cpp\n$ for a in x xx xxx; do sleep 0.5; echo \"$a\"; done | ./a.out\n\n -- (main.cpp:25 std::getline(std::cin, line) completed in 497455\u00b5s)\n -- (main.cpp:26 line.length() completed in 36\u00b5s)\n -- (main.cpp:26 42 * TIMED(line.length()) completed in 106\u00b5s)\nSimple arithmetic: 42\n -- (main.cpp:25 std::getline(std::cin, line) completed in 503516\u00b5s)\n -- (main.cpp:26 line.length() completed in 14\u00b5s)\n -- (main.cpp:26 42 * TIMED(line.length()) completed in 42\u00b5s)\nSimple arithmetic: 84\n -- (main.cpp:25 std::getline(std::cin, line) completed in 508554\u00b5s)\n -- (main.cpp:26 line.length() completed in 14\u00b5s)\n -- (main.cpp:26 42 * TIMED(line.length()) completed in 38\u00b5s)\nSimple arithmetic: 126\n -- (main.cpp:25 std::getline(std::cin, line) completed in 286\u00b5s)\n</code></pre>\n\n<p>Note you could also make the lambda accumulate data for different calls and report the totals/average.</p>\n"}], "owner": {"reputation": 14942, "user_id": 1179925, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/5403975c3b25b9407b19a26b65d1ce72?s=128&d=identicon&r=PG", "display_name": "mrgloom", "link": "https://stackoverflow.com/users/1179925/mrgloom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 1, "answer_count": 4, "score": 1, "last_activity_date": 1481893312, "creation_date": 1481723593, "last_edit_date": 1481727661, "question_id": 41144337, "link": "https://stackoverflow.com/questions/41144337/how-to-add-timer-to-every-method-of-class", "title": "How to add timer to every method of class?", "body": "<p>How to 'implicitly' add some sort of timer for every method of class, excluding constructor and destructor?</p>\n\n<p>What I'm doing now for every method of class:</p>\n\n<pre><code>void MyClass::SomeFunc()\n{\n    cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt;endl;\n\n    boost::timer::cpu_timer timer;\n\n    //Some code\n\n    boost::timer::cpu_times elapsed = timer.elapsed();\n    cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; \" : WALLCLOCK TIME: \" &lt;&lt; elapsed.wall / 1e9 &lt;&lt; \" seconds\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>What I want:</p>\n\n<pre><code>void MyClass::SomeFunc()\n{\n    //Some code\n}\n</code></pre>\n\n<p>assuming behaviour of this two parts of code should be equivalent.</p>\n"}, {"tags": ["c++", "function", "parameters", "c++14"], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 3, "last_activity_date": 1481723526, "creation_date": 1481723526, "answer_id": 41144313, "question_id": 41144282, "link": "https://stackoverflow.com/questions/41144282/order-of-parameters-to-a-function/41144313#41144313", "title": "Order of Parameters to a function", "body": "<p>No there isn't.</p>\n\n<p>Note that C++ doesn't even specify the order in which function parameters are evaluated and passed to the function, although the evaluation of arguments is <em>sequenced</em>. So writing something like <code>func(cheap_function_that_might_throw_an_exception(), expensive_function())</code> may not necessarily be an optimisation.</p>\n\n<p>Your best bet is to be <em>consistent</em> in your application.</p>\n"}], "owner": {"reputation": 1503, "user_id": 6354590, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/deb0b820eb3a35cac0947e60cdff0aaa?s=128&d=identicon&r=PG&f=1", "display_name": "gaurav bharadwaj", "link": "https://stackoverflow.com/users/6354590/gaurav-bharadwaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1481723526, "creation_date": 1481723432, "last_edit_date": 1495539943, "question_id": 41144282, "link": "https://stackoverflow.com/questions/41144282/order-of-parameters-to-a-function", "title": "Order of Parameters to a function", "body": "<p>Suppose I have a function in C++ which is taking multiple parameters so what should be the order of parameters.</p>\n\n<p>e.g.  </p>\n\n<pre><code>class Date\n{\n//heavy class\n};\n\nfunc(int, std::string, Date, ...)\n</code></pre>\n\n<p>Just curious is there any convention to pass parameters depending upon <code>datatype</code>.</p>\n\n<p>I got this link in stackoverflow, but still want to check if there any more info on this - \n  <a href=\"https://stackoverflow.com/questions/2796557/conventions-for-order-of-parameters-in-a-function\">Conventions for order of parameters in a function</a></p>\n"}, {"tags": ["c++", "boost", "shared-libraries", "boost-program-options"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 1, "creation_date": 1481723567, "post_id": 41144250, "comment_id": 69491098, "body": "<code>g++ -I&#47;usr&#47;include -L&#47;usr&#47;lib64 -lboost_program_options -std=c++11  ...</code>"}, {"owner": {"reputation": 3740, "user_id": 1030870, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8f96f7ac4f0bf4c2421a9f58b6893400?s=128&d=identicon&r=PG", "display_name": "Mine", "link": "https://stackoverflow.com/users/1030870/mine"}, "edited": false, "score": 0, "creation_date": 1481725821, "post_id": 41144250, "comment_id": 69492570, "body": "It is possible that your server does not have <code>program_options.hpp</code>, which should be in some package named like boost_program_options_<b>devel</b>."}, {"owner": {"reputation": 13, "user_id": 7296711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6230a99023a7da5ee237426d26440d07?s=128&d=identicon&r=PG&f=1", "display_name": "LuckyM", "link": "https://stackoverflow.com/users/7296711/luckym"}, "edited": false, "score": 0, "creation_date": 1481729747, "post_id": 41144250, "comment_id": 69495193, "body": "yeah, that&#39;s my problem. I thought I could get by without it, but that doesn&#39;t seem to be the case. I have now just linked to a static version of program options on my laptop and am using the executable on the server. It&#39;s working so far.. but I feel like I should be able to get this to compile on the server as well. I&#39;ve now downloaded the header files and it decided it can&#39;t find libboost_program_options.so although i&#39;ve created a symbolic link into the same directory I&#39;m running from... fun ^^"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7296711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6230a99023a7da5ee237426d26440d07?s=128&d=identicon&r=PG&f=1", "display_name": "LuckyM", "link": "https://stackoverflow.com/users/7296711/luckym"}, "edited": false, "score": 0, "creation_date": 1481725870, "post_id": 41144624, "comment_id": 69492608, "body": "So to clarify, to use boost program options I need both the header file somewhere and the shared library object? I thought the shared library object might contain the header file and the code for the functions I want to call. I haven&#39;t used shared libraries before clearly...  I&#39;m recompiling when I switch to the server, but it might be a good idea to just link to the static library on my system and use the executable on the server. That might save a lot of pain."}, {"owner": {"reputation": 13, "user_id": 7296711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6230a99023a7da5ee237426d26440d07?s=128&d=identicon&r=PG&f=1", "display_name": "LuckyM", "link": "https://stackoverflow.com/users/7296711/luckym"}, "edited": false, "score": 0, "creation_date": 1481726729, "post_id": 41144624, "comment_id": 69493163, "body": "Thanks, I just downloaded the header files and now I have an error I can work with a bit better. -lboost_program_options cannot be found. Strange to be happy about an error. But at least I&#39;ve seen this before somewhere online."}, {"owner": {"reputation": 2279, "user_id": 2767436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066110b639f57bb021509bfdc37461e0?s=128&d=identicon&r=PG&f=1", "display_name": "Rene", "link": "https://stackoverflow.com/users/2767436/rene"}, "reply_to_user": {"reputation": 13, "user_id": 7296711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6230a99023a7da5ee237426d26440d07?s=128&d=identicon&r=PG&f=1", "display_name": "LuckyM", "link": "https://stackoverflow.com/users/7296711/luckym"}, "edited": false, "score": 0, "creation_date": 1481727712, "post_id": 41144624, "comment_id": 69493906, "body": "To compile, you need both the header file and the shared library. To run the program, you only need the shared library. Actually, you only need the shared library if really symbols from the shared library are needed, a lot of stuff in the Boost libraries is in the headers only and therefore directly compiled into your executable."}, {"owner": {"reputation": 13, "user_id": 7296711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6230a99023a7da5ee237426d26440d07?s=128&d=identicon&r=PG&f=1", "display_name": "LuckyM", "link": "https://stackoverflow.com/users/7296711/luckym"}, "edited": false, "score": 0, "creation_date": 1481729866, "post_id": 41144624, "comment_id": 69495267, "body": "Thanks for that. I am using program_options, which is compiled as well. So I need the shared library in the end. Now dealing with why it can&#39;t find it... but I&#39;ve solved my initial problem. And I have a workaround with static linking and shipping over the executable onto the server. So I&#39;m fairly happy... learned a lot and got something that works :)."}], "tags": [], "owner": {"reputation": 2279, "user_id": 2767436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066110b639f57bb021509bfdc37461e0?s=128&d=identicon&r=PG&f=1", "display_name": "Rene", "link": "https://stackoverflow.com/users/2767436/rene"}, "is_accepted": true, "score": 0, "last_activity_date": 1481724418, "creation_date": 1481724418, "answer_id": 41144624, "question_id": 41144250, "link": "https://stackoverflow.com/questions/41144250/linking-to-shared-boost-library-giving-headaches/41144624#41144624", "title": "Linking to shared boost library giving headaches", "body": "<p>The error message is produced by the pre-compiler which does not find the Boost header file (as it says in the error message). You need to set the correct include path (<code>-I...</code>) where the Boost library header files are found, obviously they are not under <code>/usr/include</code>.</p>\n\n<p>Path to the Boost libraries (<code>-L...</code>) must be specified accordingly.</p>\n\n<p>Finally: If you are linking against the Boost shared libraries on your system, then you should use the same version of Boost as installed on the server. Otherwise, link against the static libraries, this may make you executable larger, but it will run on any server, regardless of the Boost version installed there (even none).</p>\n"}, {"tags": [], "owner": {"reputation": 56, "user_id": 8501714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f49edcb58ea852eec2193274a90a810d?s=128&d=identicon&r=PG&f=1", "display_name": "Ajinath Kumbhar", "link": "https://stackoverflow.com/users/8501714/ajinath-kumbhar"}, "is_accepted": false, "score": 0, "last_activity_date": 1590568394, "creation_date": 1590568394, "answer_id": 62038767, "question_id": 41144250, "link": "https://stackoverflow.com/questions/41144250/linking-to-shared-boost-library-giving-headaches/62038767#62038767", "title": "Linking to shared boost library giving headaches", "body": "<p>sudo apt install libboost-program-options-dev</p>\n"}], "owner": {"reputation": 13, "user_id": 7296711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6230a99023a7da5ee237426d26440d07?s=128&d=identicon&r=PG&f=1", "display_name": "LuckyM", "link": "https://stackoverflow.com/users/7296711/luckym"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "accepted_answer_id": 41144624, "answer_count": 2, "score": 1, "last_activity_date": 1590568394, "creation_date": 1481723332, "last_edit_date": 1481725018, "question_id": 41144250, "link": "https://stackoverflow.com/questions/41144250/linking-to-shared-boost-library-giving-headaches", "title": "Linking to shared boost library giving headaches", "body": "<p>I have an issue which sounds annoyingly simple, but I feel I've tried everything to resolve it and I'm out of ideas.</p>\n\n<p>I have a program I wrote which uses boost/program_options.hpp using the include statement </p>\n\n<pre><code>#include &lt;boost/program_options.hpp&gt;\n</code></pre>\n\n<p>This program works on my laptop and now I am trying to put it onto a server where I don't have sudo privileges. On my laptop, where the whole thing works I have boost versions 1.56 and 1.58 and on the server I found 1.53.0. I didn't install or build this though. </p>\n\n<p>The shared library file that exists on the server is:\n/usr/lib64/libboost_program_options.so.1.53.0</p>\n\n<p>Running ldd on that gives me the output:</p>\n\n<pre><code> ldd /usr/lib64/libboost_program_options.so.1.53.0\n linux-vdso.so.1 =&gt;  (0x00007ffc54a63000)\n libstdc++.so.6 =&gt; /lib64/libstdc++.so.6 (0x00007fc0dcad8000)\n libm.so.6 =&gt; /lib64/libm.so.6 (0x00007fc0dc7d5000)\n libgcc_s.so.1 =&gt; /lib64/libgcc_s.so.1 (0x00007fc0dc5bf000)\n libc.so.6 =&gt; /lib64/libc.so.6 (0x00007fc0dc1fe000)\n /lib64/ld-linux-x86-64.so.2 (0x00007fc0dd071000)\n</code></pre>\n\n<p>Which I assume means it's found all its dependencies.</p>\n\n<p>I have made a symbolic link to my home directory to create a libboost_program_options.so link, which I guess means the -lboost_program_options linker flag should work.</p>\n\n<p>The way I compile is by:</p>\n\n<pre><code>g++ -L/home/homeDir code.cpp -o code.o -std=c++11 -Wall -lboost_program_options\n</code></pre>\n\n<p>And all I get is:</p>\n\n<pre><code>fatal error: boost/program_options.hpp: No such file or directory\n #include \"boost/program_options.hpp\"\n                                     ^\ncompilation terminated.\n</code></pre>\n\n<p>I've tried this with quotes and &lt;>, and without \"boost/\" etc, but I always get the same complaint. I assume this means that it finds the library as there is no complaint about the -lboost_program_options flag?</p>\n\n<p>While it works on my machine, I may not be using the shared program options library at all. On my laptop I have both a static version of libboost_program_options in my library path which it may be using, and the program_options.hpp header outside of a library which may be in my include path. I feel like I should be able to use the shared library that's on the server and not annoy the server admin for the 5th time (things work really slowly with these things here).</p>\n\n<p>I'm sorry if this is my oversight. I'm fairly new to boost, but I feel like I've tried everything to resolve this myself at the moment.</p>\n\n<p>I'd be happy with any suggestions as to how I could change this... or if I'm just being a bit stupid with using shared libraries.</p>\n\n<p>Thanks in advance.</p>\n\n<p>EDIT:\nAfter more research I feel like I'm just getting confused between static and shared libraries. I'm trying to link a shared library at compile time, which I guess doesn't make sense. Also including the header file of something which should not be linked at compile time makes little sense. My code is clearly designed for the static library.</p>\n"}, {"tags": ["c++", "logging", "boost", "boost-log", "boost-logging"], "answers": [{"comments": [{"owner": {"reputation": 2782, "user_id": 853791, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/w0oVE.jpg?s=128&g=1", "display_name": "bobeff", "link": "https://stackoverflow.com/users/853791/bobeff"}, "edited": false, "score": 1, "creation_date": 1481724081, "post_id": 41144393, "comment_id": 69491458, "body": "This doesn&#39;t answer the question. There must be some way to execute arbitrary code conditionally according to the severity."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 2782, "user_id": 853791, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/w0oVE.jpg?s=128&g=1", "display_name": "bobeff", "link": "https://stackoverflow.com/users/853791/bobeff"}, "edited": false, "score": 0, "creation_date": 1481724579, "post_id": 41144393, "comment_id": 69491767, "body": "Will flesh out the answer. Unfortunately you assume incorrectly"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 2782, "user_id": 853791, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/w0oVE.jpg?s=128&g=1", "display_name": "bobeff", "link": "https://stackoverflow.com/users/853791/bobeff"}, "edited": false, "score": 0, "creation_date": 1481725191, "post_id": 41144393, "comment_id": 69492157, "body": "@bobeff answer updated with example of how to track your own logging level"}, {"owner": {"reputation": 2782, "user_id": 853791, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/w0oVE.jpg?s=128&g=1", "display_name": "bobeff", "link": "https://stackoverflow.com/users/853791/bobeff"}, "edited": false, "score": 0, "creation_date": 1481725736, "post_id": 41144393, "comment_id": 69492507, "body": "&quot;The long and short of it is that you must track the logging level in your own variable.&quot; This seems like working solution. 10x."}, {"owner": {"reputation": 8115, "user_id": 4636534, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GoTz67GRao8/AAAAAAAAAAI/AAAAAAAAADI/PyDv-i56924/photo.jpg?sz=128", "display_name": "Andrey Semashev", "link": "https://stackoverflow.com/users/4636534/andrey-semashev"}, "edited": false, "score": 0, "creation_date": 1481794318, "post_id": 41144393, "comment_id": 69522280, "body": "The filter copies <code>my_log_level</code>, so when you change it the filter will still use the old value. You can use <code>boost::phoenix::ref(my_log_level)</code> to make the filter refer to the variable, but you will have to ensure that the variable is accessed thread-safely."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": true, "score": 3, "last_activity_date": 1481724876, "last_edit_date": 1481724876, "creation_date": 1481723736, "answer_id": 41144393, "question_id": 41144163, "link": "https://stackoverflow.com/questions/41144163/how-to-query-boostlog-severity/41144393#41144393", "title": "How to query boost::log severity?", "body": "<p>It doesn't work like that. You need to provide a filter function to boost::log::trivial as per the documentation:</p>\n\n<p><a href=\"http://www.boost.org/doc/libs/1_61_0/libs/log/doc/html/log/tutorial/trivial_filtering.html\" rel=\"nofollow noreferrer\">http://www.boost.org/doc/libs/1_61_0/libs/log/doc/html/log/tutorial/trivial_filtering.html</a></p>\n\n<pre><code>void init()\n{\n    logging::core::get()-&gt;set_filter\n    (\n        // here they've used a constant but you could use a global or\n        // a function\n        logging::trivial::severity &gt;= logging::trivial::info\n    );\n}\n\nint main(int, char*[])\n{\n    init();\n\n    BOOST_LOG_TRIVIAL(trace) &lt;&lt; \"A trace severity message\";\n    BOOST_LOG_TRIVIAL(debug) &lt;&lt; \"A debug severity message\";\n    BOOST_LOG_TRIVIAL(info) &lt;&lt; \"An informational severity message\";\n    BOOST_LOG_TRIVIAL(warning) &lt;&lt; \"A warning severity message\";\n    BOOST_LOG_TRIVIAL(error) &lt;&lt; \"An error severity message\";\n    BOOST_LOG_TRIVIAL(fatal) &lt;&lt; \"A fatal severity message\";\n\n    return 0;\n}\n</code></pre>\n\n<p>The object passed to <code>logging::core::set_filter</code> is of type <code>boost::log::filter</code></p>\n\n<p>You could just as easily write:</p>\n\n<pre><code>auto filt = logging::filter(logging::trivial::severity &gt;= logging::trivial::info);\nlogging::core::get()-&gt;set_filter(filt);\n</code></pre>\n\n<p><code>filt</code> is a lightweight function object whose job is to inspect the attributes sent to it and return whether or not all tests against those attributes return <code>true</code>. In this case there is only one test - <code>logging::trivial::severity &gt;= logging::trivial::info</code>.</p>\n\n<p>It is the job of the logger to construct the attribute set and pass it to <code>boost::log::core</code> when it wants to emit something.</p>\n\n<p>The long and short of it is that you must track the logging level in your own variable. Here is one way:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;boost/log/core.hpp&gt;\n#include &lt;boost/log/trivial.hpp&gt;\n#include &lt;boost/log/expressions.hpp&gt;\n\nnamespace logging = boost::log;\n\n\nint main(int, char*[])\n{\n    // track your own variable here\n    logging::trivial::severity_level my_log_level = logging::trivial::trace;\n\n    // with this filter\n    auto filt = logging::filter(logging::trivial::severity &gt;= my_log_level);\n    logging::core::get()-&gt;set_filter(filt);\n\n    BOOST_LOG_TRIVIAL(trace) &lt;&lt; \"A trace severity message\";\n    BOOST_LOG_TRIVIAL(debug) &lt;&lt; \"A debug severity message\";\n    BOOST_LOG_TRIVIAL(info) &lt;&lt; \"An informational severity message\";\n    BOOST_LOG_TRIVIAL(warning) &lt;&lt; \"A warning severity message\";\n    BOOST_LOG_TRIVIAL(error) &lt;&lt; \"An error severity message\";\n    BOOST_LOG_TRIVIAL(fatal) &lt;&lt; \"A fatal severity message\";\n\n    // now you have control\n    if (my_log_level &lt;= logging::trivial::trace)\n    {\n        std::cout &lt;&lt; \"tracing\\n\";\n    }\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 3677433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/272c11821ffe167d97972ee82a9382b6?s=128&d=identicon&r=PG&f=1", "display_name": "user3677433", "link": "https://stackoverflow.com/users/3677433/user3677433"}, "is_accepted": false, "score": 0, "last_activity_date": 1536181973, "last_edit_date": 1536181973, "creation_date": 1536106523, "answer_id": 52175444, "question_id": 41144163, "link": "https://stackoverflow.com/questions/41144163/how-to-query-boostlog-severity/52175444#52175444", "title": "How to query boost::log severity?", "body": "<p>Here is an option which adds another layer of logging macros and wraps code to be called conditionally in a lambda function fed to those macros.  The lambda function is evaluated only if the severity-level constraint is satisfied.</p>\n\n<p>To the best of my understanding, this method is thread-safe, but my understanding of boost::log is...limited. I haven't tested in a multi-threaded environment.</p>\n\n<pre><code> //g++ -std=gnu++11  -DBOOST_LOG_DYN_LINK main.cpp -lboost_log -lpthread -o lambda_demo                    \n\n #include &lt;boost/log/core.hpp&gt;\n #include &lt;boost/log/trivial.hpp&gt;\n #include &lt;boost/log/expressions.hpp&gt;\n\n namespace logging = boost::log;\n\n #define LOG_TRACE(ARG) BOOST_LOG_TRIVIAL(trace) &lt;&lt; ARG;\n #define LOG_INFO(ARG) BOOST_LOG_TRIVIAL(info) &lt;&lt; ARG;\n\n const std::string complicated_function(const std::string &amp;message)\n {\n     std::cout &lt;&lt; \"\\nInside complicated_function.\\n\" &lt;&lt; std::flush;\n     return \"Returning from complicated_function (\" + message + \").\\n\";\n }\n\n int main(int, char*[])\n {\n     std::cout &lt;&lt; \"\\n\" &lt;&lt; complicated_function(\"called from std::cout\") &lt;&lt; \"\\n\" &lt;&lt; std::flush;\n\n     BOOST_LOG_TRIVIAL(trace) &lt;&lt; \"A trace severity message\";\n     BOOST_LOG_TRIVIAL(debug) &lt;&lt; \"A debug severity message\";\n     BOOST_LOG_TRIVIAL(info) &lt;&lt; \"An informational severity message\";\n     BOOST_LOG_TRIVIAL(warning) &lt;&lt; \"A warning severity message\";\n     BOOST_LOG_TRIVIAL(error) &lt;&lt; \"An error severity message\";\n     BOOST_LOG_TRIVIAL(fatal) &lt;&lt; \"A fatal severity message\\n\";\n\n     LOG_TRACE (\"Coming up: a trace message with a lambda function:\");\n\n     LOG_TRACE (\n         [=]() {\n             return complicated_function(\"(called from LOG_TRACE\");\n         }()\n         );\n\n     logging::core::get()-&gt;set_filter\n         (\n             logging::trivial::severity &gt;= logging::trivial::info\n             );\n\n     BOOST_LOG_TRIVIAL(trace) &lt;&lt; \"After setting filter, another trace severity message\";\n     BOOST_LOG_TRIVIAL(debug) &lt;&lt; \"After setting filter, another debug severity message\";\n     BOOST_LOG_TRIVIAL(info) &lt;&lt; \"After setting filter, another informational severity message\";\n     BOOST_LOG_TRIVIAL(warning) &lt;&lt; \"After setting filter, another warning severity message\";\n     BOOST_LOG_TRIVIAL(error) &lt;&lt; \"After setting filter, anothern error severity message\";\n     BOOST_LOG_TRIVIAL(fatal) &lt;&lt; \"After setting filter, another fatal severity message\\n\";\n\n     LOG_TRACE (\"Coming up: a trace message with a lambda function:\");\n     LOG_TRACE (\n         [=]() {\n             return complicated_function(\"called from LOG_TRACE\");\n         }()\n         );\n\n     LOG_INFO (\"Coming up: an info message with a lambda function:\");\n     LOG_INFO (\n         [=]() {\n             return complicated_function(\"called from LOG_INFO\");\n         }()\n         );\n\n     return 0;\n }\n</code></pre>\n"}], "owner": {"reputation": 2782, "user_id": 853791, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/w0oVE.jpg?s=128&g=1", "display_name": "bobeff", "link": "https://stackoverflow.com/users/853791/bobeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1817, "favorite_count": 1, "accepted_answer_id": 41144393, "answer_count": 2, "score": 2, "last_activity_date": 1536181973, "creation_date": 1481723059, "question_id": 41144163, "link": "https://stackoverflow.com/questions/41144163/how-to-query-boostlog-severity", "title": "How to query boost::log severity?", "body": "<p>I'm using trivial logging of <a href=\"http://www.boost.org/doc/libs/1_62_0/libs/log/doc/html/index.html\" rel=\"nofollow noreferrer\">boost::log</a> library and I want to execute some code depending on currently set logger severity. This is needed for constructing of log message only if it will be outputted. But I cannot find the right way for querying severity. The code must be something like:</p>\n\n<pre><code>if (boost::log::trivial::severity &lt;=\n    boost::log::trivial::severity_level::trace)\n{\n  // construct log message\n  BOOST_LOG_TRIVIAL(trace) &lt;&lt; message;\n}\n</code></pre>\n\n<p>In addition may be there is some way when I know that the message will be outputted to avoid double checking of severity and output it directly instead of using <code>BOOST_LOG_TRIVIAL</code> macro?</p>\n"}, {"tags": ["c++", "vector", "enums"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1481722942, "post_id": 41144068, "comment_id": 69490632, "body": "By creating a tagged union and storing <i>that</i> in the vector, assuming the type is important to you. You can also use <code>boost::variant</code>"}, {"owner": {"reputation": 127, "user_id": 1620469, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8dc96abc0111023f5f850d14285735ca?s=128&d=identicon&r=PG", "display_name": "Ugur KAYA", "link": "https://stackoverflow.com/users/1620469/ugur-kaya"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1481723032, "post_id": 41144068, "comment_id": 69490700, "body": "Unfortunately I cannot use any 3rd pary library."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1481724227, "post_id": 41144068, "comment_id": 69491542, "body": "I feel like you are not giving us enough info to go on. If you only use one type of enum, decided at run time, then perhaps all the code using those enums should be encapsulated to make the concrete enum type immaterial."}, {"owner": {"reputation": 127, "user_id": 1620469, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8dc96abc0111023f5f850d14285735ca?s=128&d=identicon&r=PG", "display_name": "Ugur KAYA", "link": "https://stackoverflow.com/users/1620469/ugur-kaya"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1481724396, "post_id": 41144068, "comment_id": 69491665, "body": "I tried to give as much detail as I could. You can kindly let me know any further detail needed."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1481724520, "post_id": 41144068, "comment_id": 69491732, "body": "This feels now like an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>. The fact you end up with only one enum type at run time, implies there is an abstraction to be made, which you aren&#39;t making. But you haven&#39;t given enough information to clearly help you define it."}, {"owner": {"reputation": 127, "user_id": 1620469, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8dc96abc0111023f5f850d14285735ca?s=128&d=identicon&r=PG", "display_name": "Ugur KAYA", "link": "https://stackoverflow.com/users/1620469/ugur-kaya"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1481724891, "post_id": 41144068, "comment_id": 69491968, "body": "I also feel like there should be an abstraction to be made but, the custom framework my company uses and the cyber security things does not give me a huge playground. I inserted the parameters which I am allowed to manipulate in the question."}], "answers": [{"tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": false, "score": 2, "last_activity_date": 1481723035, "creation_date": 1481723035, "answer_id": 41144154, "question_id": 41144068, "link": "https://stackoverflow.com/questions/41144068/storing-different-kinds-of-enums-in-same-vector-c/41144154#41144154", "title": "Storing different kinds of enums in same vector - C++", "body": "<p>The most type-safe approach is to declare a vector of C++17's <code>std::variant</code>s:</p>\n\n<pre><code>std::vector&lt;std::variant&lt;myEnum1, myEnum2, myEnum3&gt;&gt; myVector;\n</code></pre>\n\n<p>See <a href=\"http://en.cppreference.com/w/cpp/utility/variant\" rel=\"nofollow noreferrer\">std::variant</a> for more information. Before C++17, Boost provides an <a href=\"http://www.boost.org/doc/libs/1_60_0/doc/html/variant.html\" rel=\"nofollow noreferrer\">equivalent template</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1481723039, "creation_date": 1481723039, "answer_id": 41144155, "question_id": 41144068, "link": "https://stackoverflow.com/questions/41144068/storing-different-kinds-of-enums-in-same-vector-c/41144155#41144155", "title": "Storing different kinds of enums in same vector - C++", "body": "<p>This is not possible the way you have it.</p>\n\n<p>For example <code>e1</code> and <code>e4</code>, and <code>e7</code> both have the same value so are indistinguishable.</p>\n\n<p>If you can get away with writing</p>\n\n<p><code>enum myEnum2{ e4 = 3, e5, e6};</code></p>\n\n<p>and</p>\n\n<p><code>enum myEnum3{ e7 = 6, e8, e9};</code></p>\n\n<p>then at least then the enumerated values are all different and you could use a <code>std::vector&lt;int&gt;</code>. But this is not entirely satisfactory since then the <code>enum</code>s need to \"know about\" each other, if you get my meaning.</p>\n\n<p>Otherwise you'll have to imbue a <em>type</em> into your each element that you push to the vector.</p>\n"}, {"tags": [], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "is_accepted": false, "score": 4, "last_activity_date": 1481723363, "last_edit_date": 1481723363, "creation_date": 1481723054, "answer_id": 41144158, "question_id": 41144068, "link": "https://stackoverflow.com/questions/41144068/storing-different-kinds-of-enums-in-same-vector-c/41144158#41144158", "title": "Storing different kinds of enums in same vector - C++", "body": "<p>You could do this:</p>\n\n<pre><code>vector&lt;variant&lt;MyEnum1, MyEnum2&gt;&gt;\n</code></pre>\n\n<p>But since you say you will only have a single type during each run, better would be:</p>\n\n<pre><code>variant&lt;vector&lt;MyEnum1&gt;, vector&lt;MyEnum2&gt;&gt;\n</code></pre>\n\n<p>This is more efficient and more clearly expresses your actual requirements.  However, you could also go for the simpler:</p>\n\n<pre><code>vector&lt;int&gt;\n</code></pre>\n\n<p>And cast as needed.</p>\n\n<p>If you want something maximally type-safe and not using C++17, you can implement it yourself:</p>\n\n<pre><code>struct EnumVector {\n    enum Type { type1, type2 };\n    EnumVector(Type type) : _type(type)\n    void push_back(MyEnum1 val) {\n        assert(_type == type1);\n        _storage.push_back(val);\n    }\n    void push_back(MyEnum2 val) {\n        assert(_type == type2);\n        _storage.push_back(val);\n    }\nprivate:\n    Type _type;\n    std::vector&lt;int&gt; _storage;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1481723139, "post_id": 41144159, "comment_id": 69490780, "body": "Upvoted - I prefer they way you&#39;ve written the <code>enum</code>s to my solution."}, {"owner": {"reputation": 1518, "user_id": 2434628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f694c7757c0085ac1f0ed88d960ff657?s=128&d=identicon&r=PG", "display_name": "AresCaelum", "link": "https://stackoverflow.com/users/2434628/arescaelum"}, "edited": false, "score": 0, "creation_date": 1481723182, "post_id": 41144159, "comment_id": 69490813, "body": "Shouldn&#39;t it be e4 = e3 +1? otherwise e4 will have the same value as e2..."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1481723225, "post_id": 41144159, "comment_id": 69490854, "body": "Yes it should be. I&#39;ve fixed that for @PeteBecker."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1481723338, "post_id": 41144159, "comment_id": 69490932, "body": "If changing values of the enum members is possible, probably the sanest solution in the long run"}, {"owner": {"reputation": 127, "user_id": 1620469, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8dc96abc0111023f5f850d14285735ca?s=128&d=identicon&r=PG", "display_name": "Ugur KAYA", "link": "https://stackoverflow.com/users/1620469/ugur-kaya"}, "edited": false, "score": 0, "creation_date": 1481723535, "post_id": 41144159, "comment_id": 69491076, "body": "Sorry, I forgot to give that detail, I edited my question. Enumerations are generated by a framework and I cannot edit them."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1481723712, "post_id": 41144159, "comment_id": 69491192, "body": "You can still do this, but you have to map enumerators to integer values explicitly rather than in the definitions of the enumerators. So <code>push(myEnum2 e)</code> would be implemented as <code>myVector.push_back(e3 + 1 + e)</code>."}], "tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 4, "last_activity_date": 1481723212, "last_edit_date": 1481723212, "creation_date": 1481723056, "answer_id": 41144159, "question_id": 41144068, "link": "https://stackoverflow.com/questions/41144068/storing-different-kinds-of-enums-in-same-vector-c/41144159#41144159", "title": "Storing different kinds of enums in same vector - C++", "body": "<p>Each of those enumerators can be converted to an integer value, and that value can be stored. You'll also have to eliminate overlap in the values. So:</p>\n\n<pre><code>enum myEnum { e1, e2, e3 };\nenum myEnum2 { e4 = e3 + 1, e5, e6 };\nenum myEnum3 { e7 = e6 + 1, e8, e9 };\n\nstd::vector&lt;int&gt; myVector;\nmyVector.push_back((int)e1);\n</code></pre>\n\n<p>Of course, the details of converting the value and recovering it should be encapsulated in a class, and not exposed like the <code>push_back</code> call here.</p>\n"}], "owner": {"reputation": 127, "user_id": 1620469, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8dc96abc0111023f5f850d14285735ca?s=128&d=identicon&r=PG", "display_name": "Ugur KAYA", "link": "https://stackoverflow.com/users/1620469/ugur-kaya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1481723483, "creation_date": 1481722766, "last_edit_date": 1481723483, "question_id": 41144068, "link": "https://stackoverflow.com/questions/41144068/storing-different-kinds-of-enums-in-same-vector-c", "title": "Storing different kinds of enums in same vector - C++", "body": "<p>In my code, I have a structure like this:</p>\n\n<pre><code>enum myEnum{ e1, e2, e3};\n\nstd::vector myVector&lt;myEnum&gt;;\n\n...\n\nmyVector.push_back(e1);\n...\nmyVector.push_back(e2);\n...\n</code></pre>\n\n<p>What I need to do is, I have to define two other enums like</p>\n\n<pre><code>enum myEnum2{ e4, e5, e6};\nenum myEnum3{ e7, e8, e9};\n</code></pre>\n\n<p>and I have to find a way to store all these three enums in the same vector letting me use this vector like:</p>\n\n<pre><code>myVector.push_back(e1); //element of myEnum\n...\nmyVector.push_back(e4); //element of myEnum2\n...\n</code></pre>\n\n<p>My resulting software is a middleware and I will push back the elements of only one type of enum in a single runtime.</p>\n\n<p>Basically what I want to achieve is make my vector capable of store three different types of enums inside, but the name of the vector will not change. Why I want this? Because there is a flow separation in the code and based on the seperation I don't know which enum will be needed at the beginning of each runtime.</p>\n\n<p>Is this possible, and if so how I can I achieve this?</p>\n\n<p>Edit: Thank you all for attention and answers, sorry I forgot to give an important detail. Enumerations in my working code are not editable. They are generated by a framework and I'm not allowed to touch them.</p>\n\n<p>Thanks in advance...</p>\n"}, {"tags": ["c++", "static", "qt-creator", "mingw32", "icu"], "answers": [{"tags": [], "owner": {"reputation": 876, "user_id": 3824328, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/9329606ad412e2e981aeb35ebbb1e799?s=128&d=identicon&r=PG&f=1", "display_name": "Fedorov7890", "link": "https://stackoverflow.com/users/3824328/fedorov7890"}, "is_accepted": false, "score": 2, "last_activity_date": 1481746385, "last_edit_date": 1481746385, "creation_date": 1481745708, "answer_id": 41151208, "question_id": 41143845, "link": "https://stackoverflow.com/questions/41143845/how-to-link-my-app-statically-against-icu-57-1-mingw/41151208#41151208", "title": "How to link my app statically against ICU 57.1 MinGW", "body": "<p>Finally, I solved the problem. In order to share my experiece with you\nI will describe four major pitfalls that I've encountered.\nI assume that you use msys2 and MinGW-w32 if you want to repeat the steps.</p>\n\n<ol>\n<li><p>Use same toolchain for everything. Note that MinGW, MinGW-w32 and MinGW-w64\nare 3 different toolchains. If you have multiple installations of MinGW\nlike me, make sure that you use only one of them for the entire project.\nI chose MinGW-w32 for compatibility reasons.</p></li>\n<li><p>The newest versions of software often contain bugs, and they\nrequire from you some more dancing with tambourins.\nICU v58 was buggy at the moment of writing this post.\nThe solution is to revert to an older version (57.1 in my case).</p></li>\n<li><p>Before building ICU library, make sure to setup everything correctly.\nHere problem is with using namespaces and renaming namespaces which\nICU does by default. </p></li>\n</ol>\n\n<p>Find file C:\\icu\\source\\common\\unicode\\uconfig.h and add the following\nat the beginning after include guards:</p>\n\n<pre><code>#define U_DISABLE_RENAMING  1\n#define U_USING_ICU_NAMESPACE 0\n</code></pre>\n\n<p>Save the file. Open MSYS2 terminal and set mingw-w32 as working toolset:</p>\n\n<pre><code>export PATH=\"/c/msys64/mingw32/bin:$PATH\"\n</code></pre>\n\n<p>Go to icu/source dir:</p>\n\n<pre><code>cd /c/icu/source\n</code></pre>\n\n<p>Configure ICU for static build with no renaming and U_USING_ICU_NAMESPACE=0:</p>\n\n<pre><code>export CFLAGS=\"-DU_CHARSET_IS_UTF8=1 -DU_GNUC_UTF16_STRING=1 -DU_STATIC_IMPLEMENTATION\"\nexport CXXFLAGS=\"-DU_USING_ICU_NAMESPACE=0 -std=gnu++11 -DU_CHARSET_IS_UTF8=1 -DU_GNUC_UTF16_STRING=1 -DU_HAVE_CHAR16_T=1 -DUCHAR_TYPE=char16_t -Wall --std=c++11 -DU_STATIC_IMPLEMENTATION\" -static-libstdc++ -fno-exceptions \nexport CPPFLAGS=\"-DU_DISABLE_RENAMING=1 -DU_CHARSET_IS_UTF8=1 -DU_STATIC_IMPLEMENTATION\"\nexport LDFLAGS=\"-std=gnu++11\"\n\n./runConfigureICU MinGW prefix=$PWD/../dist -enable-static -disable-shared --disable-renaming\n</code></pre>\n\n<p>Build and install ICU lib. -j4 speeds up the process if you have 4 cores:</p>\n\n<pre><code>mingw32-make -j4\nmingw32-make install\n</code></pre>\n\n<p>Cleanup intermediate files:</p>\n\n<pre><code>mingw32-make clean\n</code></pre>\n\n<p>Now you should have static libraries located at icu/dist/lib .</p>\n\n<p>PITFALL 4: when linking statically, you should pass libraries to\nlinker in correct order. That matters only for static linking.\nBut how to figure out which order is correct?\nHere pkg-config tool comes handy.\nWhat it does is the following: takes library package names as\nparameter, calculates dependencies and returns the complete string \nof parameters that can be fed directly to the compiler\nor viewed by you to understand what's going on under the hood.</p>\n\n<p>There are 5 packages located at C:\\icu\\dist\\lib\\pkgconfig.\nLet's configure path for pkg-config:</p>\n\n<pre><code>export PKG_CONFIG_PATH=\"/c/icu/dist/lib/pkgconfig:$PKG_CONFIG_PATH\"\n</code></pre>\n\n<p>In order to test it, type: </p>\n\n<pre><code>pkg-config --static --cflags --libs icu-uc icu-i18n icu-io icu-le icu-lx\n</code></pre>\n\n<p>The output should be:</p>\n\n<pre><code>-IC:/icu/dist/include -LC:/icu/dist/lib -lsicuio -lsicuin -lsiculx -lsicule -lsicuuc -lsicudt -lpthread -lm\n</code></pre>\n\n<p>That's the string we have to pass to compiler.</p>\n\n<p>As final test, we will compile a simple example app using command line:</p>\n\n<p>Create folder /c/icu/dist/test with file test.cpp inside:</p>\n\n<pre><code>#include &lt;unicode/unistr.h&gt;\n#include &lt;unicode/ustdio.h&gt;\n#include &lt;unicode/brkiter.h&gt;\n#include &lt;stdlib.h&gt;\n\nusing namespace icu;\n\nvoid printUnicodeString(UFILE *out, const UnicodeString &amp;s) {\n    UnicodeString other = s;\n    u_fprintf(out, \"\\\"%S\\\"\", other.getTerminatedBuffer());\n}\n\nint main( void )\n{\n    UFILE *out;\n    UErrorCode status  = U_ZERO_ERROR;\n    out = u_finit(stdout, NULL, NULL);\n    if(!out) {\n        fprintf(stderr, \"Could not initialize (finit()) over stdout! \\n\");\n        return 1;\n    }\n    ucnv_setFromUCallBack(u_fgetConverter(out), UCNV_FROM_U_CALLBACK_ESCAPE,\n        NULL, NULL, NULL, &amp;status);\n    if(U_FAILURE(status)) {\n        u_fprintf(out, \"Warning- couldn't set the substitute callback - err %s\\n\", u_errorName(status));\n    }\n\n    /* End Demo boilerplate */\n\n    u_fprintf(out,\"ICU Case Mapping Sample Program\\n\\n\");\n    u_fprintf(out, \"C++ Case Mapping\\n\\n\");\n\n    UnicodeString string(\"This is a test\");\n\n    u_fprintf(out, \"\\nstring: \");\n    printUnicodeString(out, string);\n    string.toUpper(); /* string = \"THIS IS A TEST\" */\n    u_fprintf(out, \"\\ntoUpper(): \");\n    printUnicodeString(out, string);\n\n    return 0;\n}\n</code></pre>\n\n<p>Go to the test dir:</p>\n\n<pre><code>cd /c/icu/dist/test\n\ng++ -o test test.cpp  \\\n `pkg-config --cflags --libs --static icu-uc icu-i18n icu-io icu-le icu-lx`\n</code></pre>\n\n<p>Run the app:</p>\n\n<pre><code>./test\n</code></pre>\n\n<p>Maybe this is not the best way to do,\nespecially concerning workspaces, but it works.</p>\n\n<p>More about pgk-config here: \n<a href=\"https://people.freedesktop.org/~dbn/pkg-config-guide.html\" rel=\"nofollow noreferrer\">https://people.freedesktop.org/~dbn/pkg-config-guide.html</a></p>\n"}], "owner": {"reputation": 876, "user_id": 3824328, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/9329606ad412e2e981aeb35ebbb1e799?s=128&d=identicon&r=PG&f=1", "display_name": "Fedorov7890", "link": "https://stackoverflow.com/users/3824328/fedorov7890"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 933, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1481746385, "creation_date": 1481722069, "question_id": 41143845, "link": "https://stackoverflow.com/questions/41143845/how-to-link-my-app-statically-against-icu-57-1-mingw", "title": "How to link my app statically against ICU 57.1 MinGW", "body": "<p>I've built ICU 57.1 statically with MinGW x32;\nAs a result, I got the following files in the lib directory:</p>\n\n<pre><code>libsicudt.a\nlibsicuin.a\nlibsicuio.a\nlibsicule.a\nlibsiculx.a\nlibsicutest.a\nlibsicutu.a\nlibsicuuc.a\nsicudt.a\nsicudt.dll\n</code></pre>\n\n<p>Now I want to run one of the examples, but whatever I try it\nI receive errors like \n\"undefined reference to unum_...\nunum_setAttribute\nunum_formatInt64\nu_isspace\". \nTotal number of errors at the beginning was about 1700.\nAnalyzing pkgconfig files I figured out some mutual dependencies and\nafter reordering .a files in cmd line reduced errors to 82.</p>\n\n<p>But I have no idea where to go next.\nGoogle shows that many people have same problem with ICU but\nso far there is no solution that works for me and explains the cause.</p>\n\n<p>When building, I use Qt Creator for convenience, here is my .pro file:</p>\n\n<pre><code>TEMPLATE = app\nCONFIG += console c++11\nCONFIG -= app_bundle\nCONFIG -= qt\n\nSOURCES += main.cpp\n\nICUDIR=$$(ICU_PATH)\nICU_LIBPATH=$$ICUDIR\"/dist/lib/\"\nINCLUDEPATH += $$ICUDIR\"/dist/include\"\n\nLIBS += $$ICU_LIBPATH\"libsicuuc.a\" $$ICU_LIBPATH\"libsicudt.a\"  \\\n$$ICU_LIBPATH\"libsicuin.a\" $$ICU_LIBPATH\"libsicuio.a\"  \\\n$$ICU_LIBPATH\"libsicule.a\" $$ICU_LIBPATH\"libsiculx.a\"  \\\n$$ICU_LIBPATH\"libsicutu.a\" $$ICU_LIBPATH\"sicudt.a\"\n</code></pre>\n\n<p>I have following questions:\n1) Can anybody write a simple one line command that statically builds \nthe simpliest ICU app using g++? Is it even possible?\n2) What is the correct order of .a files when passing them to linker?\n3) What are files libsicudt.a, sicudt.a and sicudt.dll inteded for?\n4) Is the file list I wrote above complete or my build is corrupt?\n5) Is there anything I've missed of doing wrong?</p>\n"}, {"tags": ["c++", "linux", "gdb", "coredump"], "comments": [{"owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "edited": false, "score": 1, "creation_date": 1481745412, "post_id": 41143825, "comment_id": 69504370, "body": "Probably core dump was truncated when it was generated."}, {"owner": {"reputation": 40175, "user_id": 85821, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/28d7fc76db803c6757e7cfd2cde20354?s=128&d=identicon&r=PG", "display_name": "Bart van Heukelom", "link": "https://stackoverflow.com/users/85821/bart-van-heukelom"}, "reply_to_user": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "edited": false, "score": 0, "creation_date": 1482137083, "post_id": 41143825, "comment_id": 69635793, "body": "@ks1322 Wouldn&#39;t that show as missing values, or al 0, as opposed to random numbers?"}, {"owner": {"reputation": 381, "user_id": 1409386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ec7ef5d0982f4d7a00241eefa9fee34?s=128&d=identicon&r=PG", "display_name": "sunil", "link": "https://stackoverflow.com/users/1409386/sunil"}, "edited": false, "score": 1, "creation_date": 1506880206, "post_id": 41143825, "comment_id": 79984401, "body": "if address of &quot;this&quot; resides in shared memory between two processes or mmaped memory of some driver it can change between what gdb sees before and after of generate-core-file command."}, {"owner": {"reputation": 186, "user_id": 8657938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7924493761f5c1e272185206b329bfe2?s=128&d=identicon&r=PG&f=1", "display_name": "Krassi Em", "link": "https://stackoverflow.com/users/8657938/krassi-em"}, "edited": false, "score": 0, "creation_date": 1507032954, "post_id": 41143825, "comment_id": 80042646, "body": "I would assume that this question is obsolete already"}, {"owner": {"reputation": 40175, "user_id": 85821, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/28d7fc76db803c6757e7cfd2cde20354?s=128&d=identicon&r=PG", "display_name": "Bart van Heukelom", "link": "https://stackoverflow.com/users/85821/bart-van-heukelom"}, "reply_to_user": {"reputation": 381, "user_id": 1409386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ec7ef5d0982f4d7a00241eefa9fee34?s=128&d=identicon&r=PG", "display_name": "sunil", "link": "https://stackoverflow.com/users/1409386/sunil"}, "edited": false, "score": 0, "creation_date": 1542192127, "post_id": 41143825, "comment_id": 93477345, "body": "@sunil While this question is no longer relevant to me, if you&#39;re sure your comment is correct, you could post it as an answer and score some rep :)"}], "owner": {"reputation": 40175, "user_id": 85821, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/28d7fc76db803c6757e7cfd2cde20354?s=128&d=identicon&r=PG", "display_name": "Bart van Heukelom", "link": "https://stackoverflow.com/users/85821/bart-van-heukelom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 192, "favorite_count": 0, "answer_count": 0, "score": 8, "last_activity_date": 1520785293, "creation_date": 1481721997, "last_edit_date": 1520785293, "question_id": 41143825, "link": "https://stackoverflow.com/questions/41143825/discrepancy-between-function-arguments-in-actual-crash-and-core-dump", "title": "Discrepancy between function arguments in actual crash and core dump", "body": "<p>I'm investigating a <code>SIGSEGV</code> using gdb. This is the last stack frame as seen by gdb attached to the running process about to crash:</p>\n\n<pre><code>#0 0x08d1805c in FooBar (this=0xa9315578, dt=0.100000001)\n</code></pre>\n\n<p>At that point, I've saved the state using <code>generate-core-file</code>. When I then inspect this dump with gdb, the same stack frame reads:</p>\n\n<pre><code>#0 0x08d1805c in FooBar (this=0x0, dt=2.69049305e-42)\n</code></pre>\n\n<p>This confuses me. On the one hand, the value <code>0.1</code> for <code>dt</code> in the live situation makes sense. On the other hand, <code>this</code> being <code>0x0</code>, as seen in the dump, would nicely explain the <code>SIGSEGV</code>.</p>\n\n<p>More importantly, how could there be a discrepancy at all?</p>\n"}, {"tags": ["c++", "inheritance"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1481721638, "post_id": 41143661, "comment_id": 69489747, "body": "Why do you think <code>one.getPeople()</code> should give you the same result? You never added a name to <code>one</code>."}, {"owner": {"reputation": 2382, "user_id": 3615862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rjMyq.jpg?s=128&g=1", "display_name": "ThisaruG", "link": "https://stackoverflow.com/users/3615862/thisarug"}, "edited": false, "score": 0, "creation_date": 1481721670, "post_id": 41143661, "comment_id": 69489762, "body": "<code>string Class1::getPeople(){     vector&lt;string&gt;::iterator it = people.begin();     cout&lt;&lt;*it&lt;&lt;endl; }</code> Do you think this would work ?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1481721705, "post_id": 41143661, "comment_id": 69489791, "body": "Do you think that <code>two</code> inherits from <code>one</code> so <code>one</code> should be the instance <code>two</code> is affecting?"}, {"owner": {"reputation": 33, "user_id": 6290600, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207507855753163/picture?type=large", "display_name": "Nick", "link": "https://stackoverflow.com/users/6290600/nick"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1481721840, "post_id": 41143661, "comment_id": 69489890, "body": "@NathanOliver well yes kinda i thought thats how is going to be, so it is just wrong i can&#39;t just use one to het the same results ?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1481721956, "post_id": 41143661, "comment_id": 69489966, "body": "@Nick No you cannot.  <code>two</code> has its own instance of <code>Class1</code> bundled with it.  The only way to affect that is through <code>two</code>.  <code>one</code> is its own separate instance and is completely independent from <code>two</code>."}, {"owner": {"reputation": 33, "user_id": 6290600, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207507855753163/picture?type=large", "display_name": "Nick", "link": "https://stackoverflow.com/users/6290600/nick"}, "edited": false, "score": 0, "creation_date": 1481721996, "post_id": 41143661, "comment_id": 69489988, "body": "@ThisaruGurugei don&#39;t get your questiong, yes its working it is printing out whats inside the vector as i said when i use two.getPeople"}, {"owner": {"reputation": 33, "user_id": 6290600, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207507855753163/picture?type=large", "display_name": "Nick", "link": "https://stackoverflow.com/users/6290600/nick"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1481722089, "post_id": 41143661, "comment_id": 69490051, "body": "Ok thank you @NathanOliver"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 6290600, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207507855753163/picture?type=large", "display_name": "Nick", "link": "https://stackoverflow.com/users/6290600/nick"}, "edited": false, "score": 0, "creation_date": 1481722667, "post_id": 41143918, "comment_id": 69490427, "body": "Thank you so much i really appreciate your time ! I think im going to try every single one of them (it is indeed for learning, just random thoughts jumping into my head when i try to think of a project to excersise) !  Again thank you very much :)"}, {"owner": {"reputation": 95, "user_id": 7296055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a65dcec68675292e9a591dfb323f993?s=128&d=identicon&r=PG", "display_name": "user7296055", "link": "https://stackoverflow.com/users/7296055/user7296055"}, "reply_to_user": {"reputation": 33, "user_id": 6290600, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207507855753163/picture?type=large", "display_name": "Nick", "link": "https://stackoverflow.com/users/6290600/nick"}, "edited": false, "score": 0, "creation_date": 1481808366, "post_id": 41143918, "comment_id": 69530876, "body": "its good to see people experimenting like this :) i just made some structs with void function pointers in there to see if i could bind multiple functions with various return values to the same pointer. couple headaches later i feel like i understand pointers a little more. fun fun ^^. if you get stuck on any of the suggested methods let me know, or if something just doesn&#39;t work. :) then i can maybe amend my tips if they are not accurate enough"}], "tags": [], "owner": {"reputation": 95, "user_id": 7296055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a65dcec68675292e9a591dfb323f993?s=128&d=identicon&r=PG", "display_name": "user7296055", "link": "https://stackoverflow.com/users/7296055/user7296055"}, "is_accepted": true, "score": 2, "last_activity_date": 1481722305, "creation_date": 1481722305, "answer_id": 41143918, "question_id": 41143661, "link": "https://stackoverflow.com/questions/41143661/inheriting-a-class-function-in-c-general-questions-for-better-understanding/41143918#41143918", "title": "Inheriting a class function in C++ : general questions for better understanding and if someone can point out my mistakes", "body": "<p>I wonder why you want to put this into two classes, but i suppose it doesn't really matter if it's a learning excersise.</p>\n\n<p>I usually dont code c++ but c, but i feel like you could have multiple ways of solving this. I'll give you some ideas, and hopefully this will lead you to pick a method you prefer ,or think of your own.</p>\n\n<p>You could:\n1) have a global vector which both classes use (usually not reccomended to have globals, but it's possible.)\n2) have a class in a class, this way the parent class can access the child class. (you could store the vector in the child and read it from parent perhaps.)\n3) make 1 class that has all the stuff in it you need.\n4) make the vector public instead of private member so it can be accessed  from main / other objects. (if you use this, make sure you pass a pointer from 1 class to the other's data, this will be more efficient then actually copying the data back and forth between classes)</p>\n\n<p>And there should be countless other ways to solve this.</p>\n\n<p>on another note i see a lot of people using #pragma once instead of the #ifndef HEADER_H #define muck. i use these defines in C, and i'm not 100% sure if #pragma once does exactly the same ,but it might be nice to check out. Saves some typing every time you make a header file :)</p>\n\n<p>(i didn't give code examples, as you stated you want to learn, good luck :D)</p>\n"}], "owner": {"reputation": 33, "user_id": 6290600, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207507855753163/picture?type=large", "display_name": "Nick", "link": "https://stackoverflow.com/users/6290600/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 41143918, "answer_count": 1, "score": 0, "last_activity_date": 1481722305, "creation_date": 1481721492, "question_id": 41143661, "link": "https://stackoverflow.com/questions/41143661/inheriting-a-class-function-in-c-general-questions-for-better-understanding", "title": "Inheriting a class function in C++ : general questions for better understanding and if someone can point out my mistakes", "body": "<p>So i'm in the process of learning C++ and trying out a small project. In the meantime i have so many questions but lets say googling helps a bit. To the point : i want a class to be able to use a function from another class, i found similar questions and used what i thought was best fitting for my case but, i still feel like my code or my approach is wrong. Also i didn't achieve exactly what i wanted my code to do. The code that follows is just a sample/copy of my original project including only two classes for testing and to keep things as simple as possible for the reader and myself.</p>\n\n<p>Class1.h:</p>\n\n<pre><code>#ifndef CLASS1_H\n#define CLASS1_H\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nclass Class1 {\npublic:\n    Class1();\n    Class1(const Class1&amp; orig);\n    virtual ~Class1();\n\n    void setPeople(std::string newPeople);\n    std::string getPeople();\nprivate:\n    std::vector &lt;std::string&gt; people;\n};\n\n#endif\n</code></pre>\n\n<p>Class1.cpp</p>\n\n<pre><code>#include \"Class1.h\"\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nClass1::Class1() {\n}\n\nClass1::Class1(const Class1&amp; orig) {\n}\n\nClass1::~Class1() {\n}\n\nvoid Class1::setPeople(string newPeople){\n    people.push_back(newPeople);\n}\nstring Class1::getPeople(){\n    vector&lt;string&gt;::iterator it = people.begin();\n    cout&lt;&lt;*it&lt;&lt;endl;\n}\n</code></pre>\n\n<p>Class2.h</p>\n\n<pre><code>#ifndef CLASS2_H\n#define CLASS2_H\n#include \"Class1.h\"\n#include &lt;string&gt;\n\nclass Class2:\npublic Class1 {\npublic:\n    Class2();\n    Class2(const Class2&amp; orig);\n    virtual ~Class2();\n\n    void setName(std::string newName);\n    std::string getName();\nprivate:\n    std::string name;\n};\n\n#endif\n</code></pre>\n\n<p>Class2.cpp</p>\n\n<pre><code>#include \"Class1.h\"\n#include \"Class2.h\"\n#include&lt;string&gt;\n#include&lt;vector&gt;\nusing namespace std;\n\nClass2::Class2() {\n}\n\nClass2::Class2(const Class2&amp; orig) {\n}\n\nClass2::~Class2() {\n}\nvoid Class2::setName(string newName){\n    name=newName;\n    setPeople(name);\n}\nstring Class2::getName(){\n\n}\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include \"Class1.h\"\n#include \"Class2.h\"\nusing namespace std;\n\nint main(int argc, char** argv) {\n    Class1 one;\n    Class2 two;\n\n    two.setName(\"Random name\");\n    two.getPeople();\n\n    return 0;\n}\n</code></pre>\n\n<p>So everytime i use Class2 function <strong><em>setName(string newName)</em></strong> i want it to pass the value <strong><em>name</em></strong> to Class1 function <strong><em>setPeople(string newPeople)</em></strong> so it stores it to <strong><em>vector people</em></strong> and then be able to print the results using <strong><em>getPeople()</em></strong>(i know the code in getPeople only prints the first string of the vector). I don't know if my approach is correct but it seems to be working when i call <strong><em>two.getPeople()</em></strong> in main. BUT shouldn't i be able to use also <strong><em>one.getPeople()</em></strong> to get exactly the same results? In my case its not working a get just an empty string. So either i have the wrong undertanding of how inheritance works or  something is wrong with my code. I would really appreciate if someone has the time to explain if my approach is correct and why my final goal is not working as intended or what i'm doing wrong and what technique i should use.</p>\n"}, {"tags": ["c++", "templates", "gcc", "language-lawyer", "sfinae"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 7, "creation_date": 1481722193, "post_id": 41143524, "comment_id": 69490113, "body": "I&#39;m starting to wish I never wrote <a href=\"http://stackoverflow.com/a/31213703/2756719\">this thing</a>. The question is <a href=\"https://timsong-cpp.github.io/cppwp/temp.class.spec#8.2\" rel=\"nofollow noreferrer\">whether the attempted partial specialization is more specialized than the primary template</a>, which is determined by comparing them <a href=\"https://timsong-cpp.github.io/cppwp/temp.class.order\" rel=\"nofollow noreferrer\">after rewriting to two function templates</a>. Unfortunately, <a href=\"https://wg21.link/cwg1980\" rel=\"nofollow noreferrer\">it&#39;s not even clear whether after the rewrite the two function template declarations declare the same function template or not</a>."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1481722338, "post_id": 41143524, "comment_id": 69490208, "body": "@T.C. I was in the course of writing that deduction entails substitution of arguments into non-deduced occurrences in <code>P</code> (so the second template is more specialized because the unique synthesized type will fail to trigger <code>is_same</code>&#39;s partial specialization), but I&#39;m not sure that&#39;s explicit in the wording anywhere, nor to what extent it actually applies."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1481722726, "post_id": 41143524, "comment_id": 69490463, "body": "@Columbo The end of [temp.deduct.type]/1 (&quot;that will make P, after substitution of the deduced values (call it the deduced A)&quot;), sort of? But I think it&#39;s unclear at best how to handle this substitution in any event. What if the trait is <code>template&lt;class T&gt; struct is_not_int : true_type {}; template&lt;&gt; struct is_not_int&lt;int&gt; : false_type {};</code>? A strict reading would say that the partial specialization is then invalid, but that seems...bizarre at best."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1481723112, "post_id": 41143524, "comment_id": 69490761, "body": "@Columbo That part is basically <a href=\"https://wg21.link/cwg1157\" rel=\"nofollow noreferrer\">wg21.link/cwg1157</a>, with an extra twist due to alias templates."}], "answers": [{"comments": [{"owner": {"reputation": 4556, "user_id": 1269661, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5f3a348bd307a1a2c6ecefb06519ab81?s=128&d=identicon&r=PG", "display_name": "Predelnik", "link": "https://stackoverflow.com/users/1269661/predelnik"}, "edited": false, "score": 0, "creation_date": 1481790169, "post_id": 41155578, "comment_id": 69519957, "body": "It seems like in 5.1 your example works but starting with 5.2 it fails to compile even with one trivial template alias with &quot;error: partial specialization &#39;struct C&lt;T&gt;&#39; does not specialize any template arguments&quot;. So gcc has been evolving in that regard it seems :)"}, {"owner": {"reputation": 355, "user_id": 5521126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43f9276fee1995714c541462b4c0e1a9?s=128&d=identicon&r=PG", "display_name": "Maciej Za\u0142ucki", "link": "https://stackoverflow.com/users/5521126/maciej-za%c5%82ucki"}, "reply_to_user": {"reputation": 4556, "user_id": 1269661, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5f3a348bd307a1a2c6ecefb06519ab81?s=128&d=identicon&r=PG", "display_name": "Predelnik", "link": "https://stackoverflow.com/users/1269661/predelnik"}, "edited": false, "score": 0, "creation_date": 1481835670, "post_id": 41155578, "comment_id": 69546919, "body": "Most probably it&#39;s bug introduced with <b>N3651</b> to <b>GCC 5.1</b> and partialy fixed in <b>5.2</b>. Partially because second example will compile on <b>5.2 up to 6.2</b> (didn&#39;t test further). Note that I edited second example by adding second, dummy template type. I&#39;m not sure if it&#39;s really a bug or a feature. In my understanding it will specialize <b>struct C</b> for <b>int</b> twice. In case of function it would be problem as you can specialize function in separate compilation unit and link with it - you&#39;d get multiple definition. In case of  class/struct it&#39;s a bit more complicated."}, {"owner": {"reputation": 355, "user_id": 5521126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43f9276fee1995714c541462b4c0e1a9?s=128&d=identicon&r=PG", "display_name": "Maciej Za\u0142ucki", "link": "https://stackoverflow.com/users/5521126/maciej-za%c5%82ucki"}, "reply_to_user": {"reputation": 4556, "user_id": 1269661, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5f3a348bd307a1a2c6ecefb06519ab81?s=128&d=identicon&r=PG", "display_name": "Predelnik", "link": "https://stackoverflow.com/users/1269661/predelnik"}, "edited": false, "score": 0, "creation_date": 1481835756, "post_id": 41155578, "comment_id": 69546969, "body": "Anyways, if compiler lets you define multiple specializations for template class, they how we can decide which one to one? We can&#39;t."}, {"owner": {"reputation": 355, "user_id": 5521126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43f9276fee1995714c541462b4c0e1a9?s=128&d=identicon&r=PG", "display_name": "Maciej Za\u0142ucki", "link": "https://stackoverflow.com/users/5521126/maciej-za%c5%82ucki"}, "reply_to_user": {"reputation": 4556, "user_id": 1269661, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5f3a348bd307a1a2c6ecefb06519ab81?s=128&d=identicon&r=PG", "display_name": "Predelnik", "link": "https://stackoverflow.com/users/1269661/predelnik"}, "edited": false, "score": 0, "creation_date": 1481839256, "post_id": 41155578, "comment_id": 69548597, "body": "FYI, I reported it to GCC to either get clarification or fix a bug.  <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=78825\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=78825</a>"}], "tags": [], "owner": {"reputation": 355, "user_id": 5521126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43f9276fee1995714c541462b4c0e1a9?s=128&d=identicon&r=PG", "display_name": "Maciej Za\u0142ucki", "link": "https://stackoverflow.com/users/5521126/maciej-za%c5%82ucki"}, "is_accepted": false, "score": 1, "last_activity_date": 1481835109, "last_edit_date": 1481835109, "creation_date": 1481769913, "answer_id": 41155578, "question_id": 41143524, "link": "https://stackoverflow.com/questions/41143524/should-the-following-code-compile-according-to-c-standard/41155578#41155578", "title": "Should the following code compile according to C++ standard?", "body": "<p>I think you could simplify your code - this has nothing to do with type_traits. You'll get the same results with following one:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct C;\n\ntemplate&lt;typename T&gt;\nusing first = T;\n\ntemplate &lt;typename T&gt;\nstruct C&lt;first&lt;T&gt;&gt;  // OK only in 5.1\n{\n};\n\nint main ()\n{\n}\n</code></pre>\n\n<p>Check in online compiler (compiles under 5.1 but not with 5.2 or 4.9 so it's probably a bug) - <a href=\"https://godbolt.org/g/iVCbdm\" rel=\"nofollow noreferrer\">https://godbolt.org/g/iVCbdm</a></p>\n\n<p>I think that int GCC 5 they moved around template functionality and it's even possible to create two specializations of the same type. It will compile until you try to use it.</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct C;\n\ntemplate&lt;typename T1, typename T2&gt;\nusing first = T1;\n\ntemplate&lt;typename T1, typename T2&gt;\nusing second = T2;\n\ntemplate &lt;typename T&gt;\nstruct C&lt;first&lt;T, T&gt;&gt;  // OK on 5.1+\n{\n};\n\ntemplate &lt;typename T&gt;\nstruct C&lt;second&lt;T, T&gt;&gt;  // OK on 5.1+\n{\n};\n\nint main ()\n{\n   C&lt;first&lt;int, int&gt;&gt; dummy; // error: ambiguous template instantiation for 'struct C&lt;int&gt;'\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/g/6oNGDP\" rel=\"nofollow noreferrer\">https://godbolt.org/g/6oNGDP</a></p>\n\n<p>It might be somehow related to added support for C++14 variable templates. <a href=\"https://isocpp.org/files/papers/N3651.pdf\" rel=\"nofollow noreferrer\">https://isocpp.org/files/papers/N3651.pdf</a></p>\n"}, {"tags": [], "owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "is_accepted": false, "score": 5, "last_activity_date": 1481893258, "last_edit_date": 1481893258, "creation_date": 1481892576, "answer_id": 41184810, "question_id": 41143524, "link": "https://stackoverflow.com/questions/41143524/should-the-following-code-compile-according-to-c-standard/41184810#41184810", "title": "Should the following code compile according to C++ standard?", "body": "<p>The crucial  paragraph is <a href=\"http://eel.is/c++draft/temp.class.spec#8.2\" rel=\"noreferrer\">[temp.class.spec]/(8.2)</a>, which requires the partial specialization to be more specialized than the primary template. What Clang actually complains about is the argument list being identical to the primary template's: this has been removed from <a href=\"https://timsong-cpp.github.io/cppwp/n4140/temp.class.spec#8.3\" rel=\"noreferrer\">[temp.class.spec]/(8.3)</a> by <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#2033\" rel=\"noreferrer\">issue 2033</a> (which stated that the requirement was redundant) fairly recently, so hasn't been implemented in Clang yet. However, it apparently has been implemented in GCC, given that it accepts your snippet; it even <a href=\"http://melpon.org/wandbox/permlink/R3ULDAqcqAi3bAjg\" rel=\"noreferrer\">compiles the following</a>, perhaps for the same reason it compiles your code (it also only works from version 5 onwards):</p>\n\n<pre><code>template &lt;typename T&gt;\nvoid f( C&lt;T&gt; ) {}\n\ntemplate &lt;typename T&gt;\nvoid f( C&lt;first&lt;T, std::enable_if_t&lt;std::is_same&lt;T, int&gt;::value&gt;&gt;&gt; ) {}\n</code></pre>\n\n<p>I.e. it acknowledges that the declarations are distinct, so must have implemented some resolution of issue <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#1980\" rel=\"noreferrer\">1980</a>. It does not find that the second overload is more specialized (see the Wandbox link), however, which is inconsistent, because it should've diagnosed your code according to the aforementioned constraint in (8.2).</p>\n\n<p>Arguably, the current wording makes your example's partial ordering work as desired<sup>&dagger;</sup>: <a href=\"http://eel.is/c++draft/temp.deduct.type#1\" rel=\"noreferrer\">[temp.deduct.type]/1</a> mentions that in deduction from types,</p>\n\n<blockquote>\n  <p>Template arguments can be deduced in several different contexts, but in each case a type that is specified in terms of template parameters (call it <code>P</code>) is compared with an actual type (call it <code>A</code>), and an attempt is made to find template argument values [\u2026] that will make <code>P</code>, <strong>after substitution of the deduced values</strong> (call it the deduced <code>A</code>), compatible with <code>A</code>.</p>\n</blockquote>\n\n<p>Now via <a href=\"http://eel.is/c++draft/temp.alias#3\" rel=\"noreferrer\">[temp.alias]/3</a>, this would mean that during the partial ordering step in which the partial specialization's function template is the parameter template, the substitution into <code>is_same</code> yields false (since common library implementations just use a partial specialization that must fail), and <code>enable_if</code> fails.<sup>&Dagger;</sup> But this semantics is not satisfying in the general case, because we could construct a condition that generally succeeds, so a unique synthesized type meets it, and deduction succeeds both ways.</p>\n\n<p>Presumably, the simplest and most robust solution is to ignore discarded arguments during partial ordering (making your example ill-formed). One can also orientate oneself towards implementations' behaviors in this case (analogous to issue <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#1157\" rel=\"noreferrer\">1157</a>):</p>\n\n<pre><code>template &lt;typename...&gt; struct C {};\n\ntemplate &lt;typename T&gt;\nvoid f( C&lt;T, int&gt; ) = delete;\n\ntemplate &lt;typename T&gt;\nvoid f( C&lt;T, std::enable_if_t&lt;sizeof(T) == sizeof(int), int&gt;&gt; ) {}\n\nint main() {f&lt;int&gt;({});}\n</code></pre>\n\n<p>Both <a href=\"http://melpon.org/wandbox/permlink/ZQLxmGmibhyknyJE\" rel=\"noreferrer\">Clang</a> and <a href=\"http://melpon.org/wandbox/permlink/ZQLxmGmibhyknyJE#wandbox-resultwindow-code-body-24\" rel=\"noreferrer\">GCC</a> diagnose this as calling the deleted function, i.e. agree that the first overload is more specialized than the other. The critical property of #2 seems to be that the second template argument is dependent yet <code>T</code> appears solely in non-deduced contexts (if we change <code>int</code> to <code>T</code> in #1, nothing changes). So we could use the existence of discarded (and dependent?) template arguments as tie-breakers: this way we don't have to reason about the nature of synthesized values, which is the status quo, and also get reasonable behavior in your case, which would be well-formed.</p>\n\n<hr>\n\n<p><sup>&dagger;</sup> @T.C. mentioned that the templates generated through [temp.class.order] would currently be interpreted as one multiply declared entity&mdash;again, see issue <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#1980\" rel=\"noreferrer\">1980</a>. That's not directly relevant to the standardese in this case, because the wording never mentions that these function templates are declared, let alone in the same program; it just specifies them and then falls back to the procedure for function templates.</p>\n\n<p><sup>&Dagger;</sup> It isn't entirely clear with what depth implementations are required to perform this analysis. Issue <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#1157\" rel=\"noreferrer\">1157</a> demonstrates what level of detail is required to \"correctly\" determine whether a template's domain is a proper subset of the other's. It's neither practical nor reasonable to implement partial ordering to be this sophisticated. However, the footnoted section just goes to show that this topic isn't necessarily underspecified, but defective.</p>\n"}], "owner": {"reputation": 4556, "user_id": 1269661, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5f3a348bd307a1a2c6ecefb06519ab81?s=128&d=identicon&r=PG", "display_name": "Predelnik", "link": "https://stackoverflow.com/users/1269661/predelnik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 776, "favorite_count": 5, "answer_count": 2, "score": 17, "last_activity_date": 1481893258, "creation_date": 1481721054, "last_edit_date": 1481721308, "question_id": 41143524, "link": "https://stackoverflow.com/questions/41143524/should-the-following-code-compile-according-to-c-standard", "title": "Should the following code compile according to C++ standard?", "body": "<pre><code>#include &lt;type_traits&gt;\n\ntemplate &lt;typename T&gt;\nstruct C;\n\ntemplate&lt;typename T1, typename T2&gt;\nusing first = T1;\n\ntemplate &lt;typename T&gt;\nstruct C&lt;first&lt;T, std::enable_if_t&lt;std::is_same&lt;T, int&gt;::value&gt;&gt;&gt;\n{\n};\n\nint main ()\n{\n}\n</code></pre>\n\n<p>Results of compilation by different compilers:</p>\n\n<p>MSVC:</p>\n\n<blockquote>\n  <p>error C2753: 'C': partial specialization cannot match argument list for primary template</p>\n</blockquote>\n\n<p>gcc-4.9:</p>\n\n<blockquote>\n  <p>error: partial specialization 'C' does not specialize any template arguments</p>\n</blockquote>\n\n<p>clang all versions:</p>\n\n<blockquote>\n  <p>error: class template partial specialization does not specialize any template argument; to define the primary template, remove the template argument list</p>\n</blockquote>\n\n<p>gcc-5+:\nsuccessfully compiles</p>\n\n<p>And additionaly I want to point out that trivial specialization like:</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct C&lt;T&gt;\n{\n};\n</code></pre>\n\n<p>successfully fails to be compiled by gcc. So it seems like it figures out that specialization in my original example is non-trivial. So my question is - is pattern like this explicitly forbidden by C++ standard or not?</p>\n"}, {"tags": ["c++", "casting", "arduino", "microcontroller"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1481721066, "post_id": 41143448, "comment_id": 69489362, "body": "You might want to read <a href=\"http://stackoverflow.com/questions/274626/what-is-object-slicing\">What is object slicing?</a>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1481721383, "post_id": 41143448, "comment_id": 69489574, "body": "Welcome to <a href=\"http://stackoverflow.com/questions/274626/what-is-object-slicing\">object slicing</a>. You need an array of <i>pointers</i> for your idea to work."}, {"owner": {"reputation": 21, "user_id": 7296390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5020825a8b8d4147aa32127d95bb5cf2?s=128&d=identicon&r=PG&f=1", "display_name": "voidPointer", "link": "https://stackoverflow.com/users/7296390/voidpointer"}, "edited": false, "score": 0, "creation_date": 1481728227, "post_id": 41143448, "comment_id": 69494226, "body": "Thanks for the tips. Still struggling to get my head around a working solution. Not sure if I am approaching the problem in the right way."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7296390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5020825a8b8d4147aa32127d95bb5cf2?s=128&d=identicon&r=PG&f=1", "display_name": "voidPointer", "link": "https://stackoverflow.com/users/7296390/voidpointer"}, "edited": false, "score": 0, "creation_date": 1484055171, "post_id": 41239693, "comment_id": 70344368, "body": "Thanks, going to try it out."}], "tags": [], "owner": {"reputation": 130, "user_id": 4191106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c34ea41ace8b660de1e3df27c37b870?s=128&d=identicon&r=PG&f=1", "display_name": "Mazi", "link": "https://stackoverflow.com/users/4191106/mazi"}, "is_accepted": true, "score": 0, "last_activity_date": 1482228460, "creation_date": 1482228460, "answer_id": 41239693, "question_id": 41143448, "link": "https://stackoverflow.com/questions/41143448/requirement-to-pass-array-various-types-to-a-rules-engine-on-a-microcontroller/41239693#41239693", "title": "Requirement to pass array various types to a rules engine on a microcontroller. Having problems with casting", "body": "<p>Your problem lies here: </p>\n\n<pre><code>ParaBase para[3];\npara[0] = Para&lt;char*&gt;(\"Param-one\", \"Hi\");\n</code></pre>\n\n<p>You assign Para object to ParaBase object. As ParaBase object is <em>base</em> object, it will not contain any information that is specific to <em>derived</em> object (Para). In this case, </p>\n\n<pre><code> T _value;\n</code></pre>\n\n<p>from Para object is lost. Then you assign back ParaBase object to Para object:</p>\n\n<pre><code>Para&lt;char*&gt; testDownCast =  ( Para&lt;char*&gt;)  para[0] ;\n</code></pre>\n\n<p>It's correct, but para[0] object does not contain any information about _value, so it cannot be copied back to testDownCast.</p>\n\n<p>To make your example work, you should change array of ParaBase </p>\n\n<pre><code>ParaBase para[3];\n</code></pre>\n\n<p>to array of ParaBase pointers</p>\n\n<pre><code>ParaBase* para[3];\nPara&lt;char*&gt; realPara0(\"Param-one\", \"Hi\");\n\npara[0] = (ParaBase*)&amp;realPara0; //Or use C++-style cast here\n</code></pre>\n\n<p>Of course in this case you will not have ParaBase objects, only pointers to them. But you can cast back to Para object. You have to adjust rest of your code of course. </p>\n\n<p>By the way - it's not good low-footprint microcontroller code. For each tempate type you use, new code will be generated. Also copying objects each time will cause your stack to grow (not a problem <em>until</em> you have small objects). 'Classic' microcontroller implementation would rely on <em>union</em>, and maybe additional information about type passed through union.</p>\n\n<p>I'm not telling not to use C++ in microcontrollers (I'm great fan of this!), but this should be done with awareness. Here is great article (two parts) of using C++ in embedded systems:\n<a href=\"http://www.embedded.com/design/programming-languages-and-tools/4438660/1/Modern-C--in-embedded-systems---Part-1--Myth-and-Reality\" rel=\"nofollow noreferrer\">http://www.embedded.com/design/programming-languages-and-tools/4438660/1/Modern-C--in-embedded-systems---Part-1--Myth-and-Reality</a></p>\n"}], "owner": {"reputation": 21, "user_id": 7296390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5020825a8b8d4147aa32127d95bb5cf2?s=128&d=identicon&r=PG&f=1", "display_name": "voidPointer", "link": "https://stackoverflow.com/users/7296390/voidpointer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 41239693, "answer_count": 1, "score": 1, "last_activity_date": 1482228460, "creation_date": 1481720869, "last_edit_date": 1481725620, "question_id": 41143448, "link": "https://stackoverflow.com/questions/41143448/requirement-to-pass-array-various-types-to-a-rules-engine-on-a-microcontroller", "title": "Requirement to pass array various types to a rules engine on a microcontroller. Having problems with casting", "body": "<p>Sorry I am new both to the community and c++, please be gentle.</p>\n\n<p>To begin with, as this is to run on a microcontroller, memory and compiled code space are extremely valuable.</p>\n\n<p>I have a requirement to take input from various sources and feed them into a central processing function. The rolled up parameters fed in are to be named, be of varying types and, allow for type checking, so they can be compared against criteria  unknown at compile time. I have borrowed bits of code from here and there and come up with the following.  </p>\n\n<pre><code>template &lt;typename T_ty&gt; struct TypeInfo { static const char * name; };\ntemplate &lt;typename T_ty&gt; const char * TypeInfo&lt;T_ty&gt;::name = \"unknown\";\n\n#define MAKE_TYPE_INFO( type )  template &lt;&gt; const char* TypeInfo&lt;type&gt;::name= #type;\n\n// Type-specific implementations.\nMAKE_TYPE_INFO( int );\nMAKE_TYPE_INFO( float );\nMAKE_TYPE_INFO( String );\nMAKE_TYPE_INFO( char * );\nMAKE_TYPE_INFO( bool );\n\nclass ParaBase\n{\npublic:\n  char*   _type ;\n  char*   _name;\n  void*   _child;\n\n  const char* name()  { return _name; }\n\n  ParaBase(){}\n\n  ParaBase(const char* name, const char* type, const void * child )\n    :\n    _name( (char*) name ),\n    _type( (char*) type ),\n    _child( (void*) child ) {}\n\n\n  template &lt;class U&gt;\n  bool is()\n  {\n    return ( TypeInfo&lt;U&gt;::name == _type );\n  }\n\n};\n\ntemplate &lt;class T&gt;\nclass Para : public ParaBase\n{\n\n  T _value;\n\npublic:\n\n    Para( const char* name,  const T value )\n    :\n     ParaBase( name,  TypeInfo&lt;T&gt;::name, this ),\n     _value( value )\n    {}\n\n    Para( ParaBase&amp; paraBase )\n        :\n        ParaBase( paraBase._name,  paraBase._type, this )\n    {}\n\n\n  operator T()  { return _value; }\n\n  const T value() { return _value; }\n\n    template &lt;class U&gt;\n    U as()\n    {\n        return *( ( U *)  _value );\n    }\n\n\n};\n</code></pre>\n\n<p>To test it I do the following:-</p>\n\n<pre><code>ParaBase para[3];\n\npara[0] = Para&lt;char*&gt;(\"Param-one\", \"Hi\");\npara[1] = Para&lt;bool&gt; (\"Param-two\", true);\npara[2] = Para&lt;float&gt;(\"Param-three\", 2.05);\n</code></pre>\n\n<p>I can feed <strong>para</strong> into a central function fine.</p>\n\n<pre><code>bool ok = para[1].is&lt;bool&gt;(); // is true\nbool notok = para[1].is&lt;char*&gt;(); // is false\n</code></pre>\n\n<p>So type checking works, yeah!</p>\n\n<pre><code>Para&lt;char*&gt; testDownCast =  ( Para&lt;char*&gt;)  para[0] ;\nchar* orig = testDownCast.as&lt;char*&gt;();\n</code></pre>\n\n<p>Erm, not so good. Major fail here. My testDownCast pointer <em>(if I am using the correct term)</em> just contains junk. What am I doing wrong?</p>\n\n<p>Any help would be gratefully received. Thanks in advance for helping a novice.</p>\n"}, {"tags": ["c++", "smart-pointers", "ownership-semantics"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1481720662, "post_id": 41143311, "comment_id": 69489121, "body": "Where have you seen a smart pointer owning an object it does not point to?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1481720709, "post_id": 41143311, "comment_id": 69489159, "body": "This might help you: <a href=\"http://stackoverflow.com/questions/106508/what-is-a-smart-pointer-and-when-should-i-use-one\" title=\"what is a smart pointer and when should i use one\">stackoverflow.com/questions/106508/&hellip;</a>"}, {"owner": {"reputation": 71, "user_id": 5413260, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2788f235725b7e77597141816f8ef51b?s=128&d=identicon&r=PG&f=1", "display_name": "Alek", "link": "https://stackoverflow.com/users/5413260/alek"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1481720785, "post_id": 41143311, "comment_id": 69489202, "body": "As long as I understand what is written here -&gt;  <a href=\"http://www.codesynthesis.com/~boris/blog/2012/04/25/shared-ptr-aliasing-constructor/\" rel=\"nofollow noreferrer\">codesynthesis.com/~boris/blog/2012/04/25/&hellip;</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1481720969, "post_id": 41143311, "comment_id": 69489297, "body": "Ah yes.  If you keep reading there it tells you how the mechanics works."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1481721022, "post_id": 41143311, "comment_id": 69489340, "body": "Do note that it still owns the pointed to thing.  It is just the lifetime is managed by the shared pointer that you constructed it with."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 5413260, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2788f235725b7e77597141816f8ef51b?s=128&d=identicon&r=PG&f=1", "display_name": "Alek", "link": "https://stackoverflow.com/users/5413260/alek"}, "edited": false, "score": 0, "creation_date": 1481723183, "post_id": 41143599, "comment_id": 69490815, "body": "Hmm, and who would take care of p, if p is not member of x? I know is a stupid thing, but I&#39;m looking just the worst case scenario. See the next example, there would be a memory leak I guess..  std::shared_ptr&lt;Foo&gt; foo = std::make_shared&lt;Foo&gt;(); std::string *str = new std::string(&quot;example&quot;); std::shared_ptr&lt;std::string&gt; p2(foo, str); It&#39;s compiled :)"}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "reply_to_user": {"reputation": 71, "user_id": 5413260, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2788f235725b7e77597141816f8ef51b?s=128&d=identicon&r=PG&f=1", "display_name": "Alek", "link": "https://stackoverflow.com/users/5413260/alek"}, "edited": false, "score": 0, "creation_date": 1481723419, "post_id": 41143599, "comment_id": 69490992, "body": "@Alek: <code>p</code> being a member or otherwise managed by <code>x</code> is the entire use case.  There is no &quot;worst case scenario.&quot;  You should never use <code>new</code> directly in modern C++ code unless you &quot;know what you&#39;re doing.&quot;"}], "tags": [], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "is_accepted": false, "score": 1, "last_activity_date": 1481721313, "creation_date": 1481721313, "answer_id": 41143599, "question_id": 41143311, "link": "https://stackoverflow.com/questions/41143311/smart-pointers-ownership-semantics-and-equality/41143599#41143599", "title": "Smart pointers ownership semantics and equality", "body": "<p>I think all of your confusion comes from the \"aliasing constructor\":</p>\n\n<pre><code>template &lt;typename U&gt;\nshared_ptr(const shared_ptr&lt;U&gt;&amp; x, element_type* p)\n</code></pre>\n\n<p>What's the use of this thing?  Well, it's rarely used, but what it does is to \"share\" ownership of some object <code>x</code> but when you dereference it you will get <code>p</code> instead.  That's all.  It will never delete <code>p</code> or do anything else to it.</p>\n\n<p>It might be useful if you have something like this:</p>\n\n<pre><code>struct Foo {\n    Bar bar;\n};\n\nstruct Baz {\n    Baz(shared_ptr&lt;Bar&gt; bar) : m_bar(bar) {}\n    shared_ptr&lt;Bar&gt; m_bar;\n};\n\nint main()\n{\n    auto foo = make_shared&lt;Foo&gt;();\n    Baz baz(shared_ptr&lt;Bar&gt;(foo, &amp;foo.bar));\n}\n</code></pre>\n\n<p>Now <code>baz</code> gets to manage the lifetime of <code>foo</code> without knowing that's what it's doing--it only cares that it manages the lifetime of a <code>Bar</code>, but since our <code>bar</code> is part of <code>foo</code>, we can't destroy <code>foo</code> without destroying <code>bar</code>, so we use the aliasing constructor.</p>\n\n<p>But actually, we don't do that, because this use case is very rare.</p>\n"}, {"tags": [], "owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "is_accepted": false, "score": 0, "last_activity_date": 1481733270, "creation_date": 1481733270, "answer_id": 41147627, "question_id": 41143311, "link": "https://stackoverflow.com/questions/41143311/smart-pointers-ownership-semantics-and-equality/41147627#41147627", "title": "Smart pointers ownership semantics and equality", "body": "<p>Old \"raw\" pointer:</p>\n\n<pre><code>someType* pR = new someType(param1, param2); //pR is a pointer\nMyOwner.TakeOwnershipOf(pR); // Now MyOwner is the owner, **the one who ONLY should call 'delete pR;'**\n</code></pre>\n\n<p>Smart pointer:</p>\n\n<pre><code>std::shared_ptr&lt;someType&gt; sp = std::make_shared&lt;someType&gt;(param1, param2);\n</code></pre>\n\n<p>\"sp\" <strong>is now the owner</strong> (there's no \"pR\" in code, but internally it is). And you don't need to call \"delete pR\". It's an object that internally stores a pointer to pR and delete it when becomes no more needed.\n<p>sp is an object. \"sp->any\" is exactly as \"pR->any\". This can confusse you about sp being also a pointer. No, it happens that \"->\" is overloaded.\n<p>More overloaded:\n<p><code>sp.get()</code> is the same as <code>pR</code>. <code>*sp</code> is the same as <code>*pR</code>\n<p><code>sp1 == sp2</code> is the same as <code>pR1 == pR2</code> and the same as <code>sp1.get()==sp2.get()</code>\n<p><strong>The good thing</strong> about shared_ptr is, for example, when you need to store the same pointer in several containers. If some container is deleted, the stored pointer (sp, who owns pR) should also be deleted. This will invalidate the pointer stored in other container. Instead of inspecting other containers about this pointer existence, shared_ptr takes in charge of it. This is, you can safely delete <code>sp</code> because <code>pR</code> will be only deleted by the last container that stores <code>sp</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 2220, "user_id": 6838526, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2AyH9wsYAa4/AAAAAAAAAAI/AAAAAAAAAEc/9bGwvIdJPDM/photo.jpg?sz=128", "display_name": "Joseph Ireland", "link": "https://stackoverflow.com/users/6838526/joseph-ireland"}, "is_accepted": false, "score": 0, "last_activity_date": 1481733729, "last_edit_date": 1592644375, "creation_date": 1481733729, "answer_id": 41147777, "question_id": 41143311, "link": "https://stackoverflow.com/questions/41143311/smart-pointers-ownership-semantics-and-equality/41147777#41147777", "title": "Smart pointers ownership semantics and equality", "body": "<h3>Ownership</h3>\n<p>Your confusion is because <em>ownership</em> is not something which the compiler can verify; you, as a programmer, need to deduce it.</p>\n<p>We can say any object <code>p</code> <em>owns</em> <code>q</code> if the existence of <code>p</code> guarantees the existence of <code>q</code> (preferably without memory leaks).<br />\nThe simple case is direct ownership,  where deallocating <code>p</code> would also deallocate <code>q</code>, e.g. if <code>q</code> is a member of <code>p</code>, or <code>q</code> is explicitly deallocated with <code>delete</code> in <code>p</code>'s destructor.<br />\nSmart pointers make this obvious to people. If <code>q</code> is stored in a <code>std::unique_ptr</code> member of <code>p</code>, we know that <code>p</code> owns <code>q</code>. You don't need to search around for the (possibly missing or duplicated) delete statement.</p>\n<p>Ownership is also transitive, if <code>p</code> owns <code>q</code> and <code>q</code> owns <code>r</code>, then <code>p</code> must own <code>r</code>.</p>\n<h3>Aliasing</h3>\n<p>If <code>p</code> directly owns <code>q</code>, and we want to create a <code>shared_ptr</code> that owns <code>q</code>, then it must also own <code>p</code>. Otherwise, if <code>p</code> is destroyed, then <code>q</code> will be too, despite the existence of our shared pointer.</p>\n<p>This is what the aliasing constructor for std::shared_ptr does (deomonstrated in John's answer).</p>\n<p>It extends <code>q</code>'s lifetime by extending <code>p</code>'s lifetime, so we have a pointer to <code>q</code> which actually owns <code>p</code>. We are asserting to the compiler that <code>p</code> in fact owns <code>q</code>, so the shared ptr transitively owns <code>q</code>.</p>\n<p>If <code>p</code> doesn't own <code>q</code>, then your program will compile, but it is broken, just like if you manually call <code>delete</code> twice.</p>\n<h3>Comparisons</h3>\n<p>For stl smart pointers, comparisons are passed to the raw pointer. So smart pointers are equal if they dereference to the same object, and comparisons are about memory location. There aren't any defined behaviors specifying memory locations, so there isn't much you can use it for other than storing in a <code>map</code> or <code>set</code>.</p>\n"}], "owner": {"reputation": 71, "user_id": 5413260, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2788f235725b7e77597141816f8ef51b?s=128&d=identicon&r=PG&f=1", "display_name": "Alek", "link": "https://stackoverflow.com/users/5413260/alek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 516, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1481795045, "creation_date": 1481720385, "last_edit_date": 1481795045, "question_id": 41143311, "link": "https://stackoverflow.com/questions/41143311/smart-pointers-ownership-semantics-and-equality", "title": "Smart pointers ownership semantics and equality", "body": "<p>I have a couple of questions for smart pointers that earlier I didn't give them any credit. </p>\n\n<ol>\n<li>What does mean to own an object , to point to a object and to manage a object in the world of smart pointers? Earlier I thought that the one who owns the object, also points to it and manages the object. Now, I know that a smart pointer can own an object, but point to another object (alias constructors).  Here I found a really good explanation for what owning an object mean  -> <a href=\"http://www.umich.edu/~eecs381/handouts/C++11_smart_ptrs.pdf\" rel=\"nofollow noreferrer\">http://www.umich.edu/~eecs381/handouts/C++11_smart_ptrs.pdf</a> , but still I can't make difference between this 3 terms.</li>\n<li>If the pointer owns an object, but point to another object, which object does he manage? The one he owns it, or the one he points to, or both? What's the point of owning an object, but not pointing to it?</li>\n<li>When are two smart pointers equal? Can two pointers own a same object and be different in a same time? I'm not interested in their value equality, but regarding the ownership. </li>\n<li>Why is ownership order important (beside for using the pointers as keys in containers)? I guess this is relevant only for shared_ptr.</li>\n</ol>\n\n<p>Everything began with trying to understand owner_before, now I'm more confused than before I began exploring this topic.. :(</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 5, "creation_date": 1481720445, "post_id": 41143289, "comment_id": 69488961, "body": "You have <i>undefined behaviour</i>. <code>arr2</code> doesn&#39;t point to a block of 5 <code>int</code> but just one <code>int</code>. So, <code>*(arr2+1) =2; *(arr2+2) =3; *(arr2+3) =4; *(arr2+4) =5;</code> all access outside of the bounds. The same problem persists when print <code>arr2</code> in <code>printArray()</code> function."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 2, "creation_date": 1481720463, "post_id": 41143289, "comment_id": 69488980, "body": "This is undefined behavior"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 2, "creation_date": 1481720648, "post_id": 41143289, "comment_id": 69489112, "body": "As already pointed out this is UB and apparently your compiler decided to allocate <code>i</code> right before <code>arr</code> so that <code>(arr2 + 1) == &amp;arr[0]</code> - but this is in <b>NO</b> way correct or guaranteed (different compilers or just changing optimization level might already cause completely different effects)"}, {"owner": {"reputation": 111, "user_id": 7265896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4197790ab15f173312d2578cf82a2069?s=128&d=identicon&r=PG&f=1", "display_name": "Bharath", "link": "https://stackoverflow.com/users/7265896/bharath"}, "edited": false, "score": 0, "creation_date": 1481721034, "post_id": 41143289, "comment_id": 69489347, "body": "Why C++ and DMA tags, when you have not used any of them. This code will have same undefined behavior even in C."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 111, "user_id": 7265896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4197790ab15f173312d2578cf82a2069?s=128&d=identicon&r=PG&f=1", "display_name": "Bharath", "link": "https://stackoverflow.com/users/7265896/bharath"}, "edited": false, "score": 0, "creation_date": 1481721605, "post_id": 41143289, "comment_id": 69489725, "body": "@programmerDaemon: C and C++ are different languages. OP uses C++, so the C++ tag is correct. The C tag is wrong! The C standard has a defect for exactly this situation, which was already discussed here."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1481721686, "post_id": 41143289, "comment_id": 69489776, "body": "Don&#39;t use C-style arrays, use <code>std::vector</code> and <code>std::array</code>."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1481723576, "post_id": 41143289, "comment_id": 69491107, "body": "&quot;I created two arrays <code>arr</code> and <code>arr2</code>&quot; - no, you didn&#39;t. You created one array and one pointer. There is a list of good books <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">here</a>."}], "answers": [{"comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1481721583, "post_id": 41143399, "comment_id": 69489713, "body": "Please don&#39;t recommend raw pointers, C-style arrays and <code>new</code> / <code>delete</code> to new C++ programmers."}], "tags": [], "owner": {"reputation": 85, "user_id": 5132876, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i2Cfv.png?s=128&g=1", "display_name": "Levin", "link": "https://stackoverflow.com/users/5132876/levin"}, "is_accepted": false, "score": 2, "last_activity_date": 1481721507, "last_edit_date": 1481721507, "creation_date": 1481720682, "answer_id": 41143399, "question_id": 41143289, "link": "https://stackoverflow.com/questions/41143289/how-memory-allocation-happen-in-c/41143399#41143399", "title": "How Memory allocation Happen in c++", "body": "<p><code>arr2</code> is not an array. It is pointer to <code>int i</code>. You are reading from memory that is not yours. </p>\n\n<p>Instead, use:</p>\n\n<pre><code>int* arr2 = new int[how_long_array_you_want]\n</code></pre>\n\n<p>Do not forget to delete <code>arr2</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1481721116, "post_id": 41143505, "comment_id": 69489403, "body": "<i>&quot;Luckily is also an integer&quot;</i> - no... just because you point a pointer to an adress does not mean that some underlying data type has to be present there. Also it doesn&#39;t <i>work</i>, it&#39;s undefined behavior that just happens to have this exact effect on OPs machine and compiler"}, {"owner": {"reputation": 5576, "user_id": 1794345, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILvFk.jpg?s=128&g=1", "display_name": "Rerito", "link": "https://stackoverflow.com/users/1794345/rerito"}, "edited": false, "score": 0, "creation_date": 1481721192, "post_id": 41143505, "comment_id": 69489453, "body": "Segfault has nothing to do with the underlying type of the attempted access. Here it does not segfault because each <code>arr2 + i</code> points to memory on the stack."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1481721928, "post_id": 41143505, "comment_id": 69489940, "body": "<i>&quot;Luckily yhe pointer fall inside your heap&quot;</i> except it doesn&#39;t, the pointed to address is on the stack."}, {"owner": {"reputation": 569, "user_id": 4181430, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1488320649/picture?type=large", "display_name": "jurhas", "link": "https://stackoverflow.com/users/4181430/jurhas"}, "edited": false, "score": 0, "creation_date": 1481722422, "post_id": 41143505, "comment_id": 69490265, "body": "You are right. The world,like the memory divide him self at least in two categories. Those who know the name of the memory and cannot use it, and those that doesn&#39;t know their name, but can use it. I just call it the memory allocated of the program compiling time. The other is the memory dinamically. How in China call the one or the other never cared about... Please check for my typo now."}, {"owner": {"reputation": 5576, "user_id": 1794345, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILvFk.jpg?s=128&g=1", "display_name": "Rerito", "link": "https://stackoverflow.com/users/1794345/rerito"}, "edited": false, "score": 2, "creation_date": 1481722436, "post_id": 41143505, "comment_id": 69490275, "body": "This answer is unclear at best, when it&#39;s not just plain wrong. As is, it deserves its downvotes."}], "tags": [], "owner": {"reputation": 569, "user_id": 4181430, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1488320649/picture?type=large", "display_name": "jurhas", "link": "https://stackoverflow.com/users/4181430/jurhas"}, "is_accepted": false, "score": -2, "last_activity_date": 1481721009, "creation_date": 1481721009, "answer_id": 41143505, "question_id": 41143289, "link": "https://stackoverflow.com/questions/41143289/how-memory-allocation-happen-in-c/41143505#41143505", "title": "How Memory allocation Happen in c++", "body": "<p>wow no sigsegv?\nJust a combination of factores, probably (inside the machine) the variable i get declared before the array.\nSo you cannot do it.\nthe variable \"i\" allocate just a slot for an integer.  but you need 5. when you do *(arr2+1) you are going to write in a ungulty,neighbour random variable. In this case proably the arr[]. Luckily is also an integer, otherwise you are going to get a SIGSEGV error\nSo the code is going to be </p>\n\n<pre><code>int i[5];\nint *arr2=i;\n</code></pre>\n\n<p>so it works</p>\n"}, {"comments": [{"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1481794719, "post_id": 41143684, "comment_id": 69522553, "body": "&quot;much worse than getting a segfault&quot; I would suggest that a segfault is one of the <i>best</i> symptoms of UB to get, because it so loudly tells you things are wrong, and where to start looking"}, {"owner": {"reputation": 5576, "user_id": 1794345, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILvFk.jpg?s=128&g=1", "display_name": "Rerito", "link": "https://stackoverflow.com/users/1794345/rerito"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1481795186, "post_id": 41143684, "comment_id": 69522896, "body": "@Caleth Which is exactly why I said a silent stack corruption is much worse than a segfault. Maybe you mean to rephrase it to make look a segfault as a positive thing?"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1481795477, "post_id": 41143684, "comment_id": 69523098, "body": "Yes. Silent stack corruption -&gt; ignored/not noticed -&gt; bug in production. Segfault -&gt; identified -&gt; fixed"}], "tags": [], "owner": {"reputation": 5576, "user_id": 1794345, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILvFk.jpg?s=128&g=1", "display_name": "Rerito", "link": "https://stackoverflow.com/users/1794345/rerito"}, "is_accepted": true, "score": 3, "last_activity_date": 1481795889, "last_edit_date": 1481795889, "creation_date": 1481721557, "answer_id": 41143684, "question_id": 41143289, "link": "https://stackoverflow.com/questions/41143289/how-memory-allocation-happen-in-c/41143684#41143684", "title": "How Memory allocation Happen in c++", "body": "<p>The variables you are declaring are declared on the stack:</p>\n\n<pre><code>int arr[5] = { 11, 12, 13, 14, 15 }; // 5xsizeof (int) bytes\nint i = 1; // sizeof (int) bytes on the stack\nint *arr2 = &amp;i; // sizeof (void*) bytes on the stack\n</code></pre>\n\n<p>Now <code>arr2</code> is a pointer to an <code>int</code>. In another context it could be a pointer to a dynamically allocated array, but here, it's not: it is pointing to the location of <code>i</code> on the stack. When you do:</p>\n\n<pre><code>*(arr2 + 1) = 2;\n</code></pre>\n\n<p>You are assigning <code>2</code> to another address on the stack (the one that comes right after <code>&amp;i</code>) and from your result it looks like it coincide with the address of <code>arr[0]</code>, which is kinda logical (but well since it is undefined behavior, anything could happen).</p>\n\n<p>Since you are assigning to addresses on the stack, you don't get a segfault but you do <strong>corrupt</strong> the stack however, which is much worse than getting a segfault:</p>\n\n<ul>\n<li>A segfault is a clear signal telling you you are trying an illegal memory access. You know where it takes place and you can fix it.</li>\n<li>Stack corruption happens silently and can go unnoticed until it crashes the program, which could happen anywhere. It is the result of an \"illegal\" memory access that goes undetected because the stack is already reserved for your program. Of course, debugging it is very hard since the crash can happen in a place that is completely unrelated to the faulty code.</li>\n</ul>\n"}], "owner": {"reputation": 762, "user_id": 4384418, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/rwWc6.jpg?s=128&g=1", "display_name": "e11438", "link": "https://stackoverflow.com/users/4384418/e11438"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 41143684, "answer_count": 3, "score": 0, "last_activity_date": 1481795889, "creation_date": 1481720309, "last_edit_date": 1481721460, "question_id": 41143289, "link": "https://stackoverflow.com/questions/41143289/how-memory-allocation-happen-in-c", "title": "How Memory allocation Happen in c++", "body": "<p>I'm new to c++ and as an exercise trying to print an array using a function. I created two arrays <code>arr</code> and <code>arr2</code> as following.</p>\n\n<pre><code>int main(){\n\nint arr[5] = {11, 12, 13, 14, 15};\n\nint i =1;\nint* arr2 = &amp;i;\n*arr2 =1;\n*(arr2+1) =2;\n*(arr2+2) =3;\n*(arr2+3) =4;\n*(arr2+4) =5;\n\nprintArray(arr2,5);    \nprintArray(arr,5);\n}\n</code></pre>\n\n<p>I'm trying to print those two arrays using the function below.</p>\n\n<pre><code>void printArray(int arr[],int size){\n   for(int i=0; i&lt;size; i++){       \n      cout&lt;&lt;*(arr+i)&lt;&lt;\" \";\n   }\n   cout&lt;&lt;endl;\n}\n</code></pre>\n\n<p>The result after running the program is,</p>\n\n<pre><code> 1 2 3 4 5\n 2 3 4 5 15\n</code></pre>\n\n<p>But the expected result is,</p>\n\n<pre><code>1 2 3 4 5\n11 12 13 14 15\n</code></pre>\n\n<p>Can someone explain what is happening here, If it is a problem with memory allocation highly appreciate if you can explain with a proper diagram.</p>\n"}, {"tags": ["c++", "sql"], "comments": [{"owner": {"reputation": 2248, "user_id": 6499439, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b69ace4bd7428cbae7eb904d7a497351?s=128&d=identicon&r=PG", "display_name": "Katie", "link": "https://stackoverflow.com/users/6499439/katie"}, "edited": false, "score": 0, "creation_date": 1481721086, "post_id": 41143283, "comment_id": 69489377, "body": "Welcome to Stack Overflow!  You can take the <a href=\"https://stackoverflow.com/tour\">tour</a> first and learn <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> a good question and create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  That makes it easier for us to help you."}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1481721111, "post_id": 41143283, "comment_id": 69489397, "body": "Please show us what you have tried so far. What didn&#39;t work? Please also read and follow <a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}], "answers": [{"tags": [], "owner": {"reputation": 7510, "user_id": 1132334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8o6Nl.png?s=128&g=1", "display_name": "Cee McSharpface", "link": "https://stackoverflow.com/users/1132334/cee-mcsharpface"}, "is_accepted": false, "score": 0, "last_activity_date": 1481722388, "last_edit_date": 1495539941, "creation_date": 1481721287, "answer_id": 41143588, "question_id": 41143283, "link": "https://stackoverflow.com/questions/41143283/image-from-sql-database-to-cimage/41143588#41143588", "title": "Image from SQL Database to CImage", "body": "<p>The problem can be reduced to loading a <code>CImage</code> from a byte array, since that is what you get from <code>SQLGetData</code>.</p>\n\n<p>You did not indicate whether you mean to use ATL or MFC, but in both cases it is a little bit awkward as there is no such thing as a public ::LoadFromBuffer function.</p>\n\n<p>This answer should do:\n<a href=\"https://stackoverflow.com/a/6759701/1132334\">https://stackoverflow.com/a/6759701/1132334</a></p>\n\n<p>It explains how to create a bitmap structure from a byte buffer and construct a CImage from there.</p>\n\n<p>It is going to be tricky if you need to handle different picture formats. In this case, write the raw bytes to a memory mapped file and then use the <code>CImage::Load(IStream*)</code> overload.</p>\n\n<p><strong>EDIT</strong>: its all been done before... <a href=\"https://stackoverflow.com/a/14035492/1132334\">https://stackoverflow.com/a/14035492/1132334</a> and <a href=\"https://stackoverflow.com/a/38710933/1132334\">https://stackoverflow.com/a/38710933/1132334</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7296605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88aaf93afd2fbf1d261bed62a19a2a15?s=128&d=identicon&r=PG&f=1", "display_name": "Meduna", "link": "https://stackoverflow.com/users/7296605/meduna"}, "is_accepted": false, "score": 0, "last_activity_date": 1481788579, "creation_date": 1481788579, "answer_id": 41159077, "question_id": 41143283, "link": "https://stackoverflow.com/questions/41143283/image-from-sql-database-to-cimage/41159077#41159077", "title": "Image from SQL Database to CImage", "body": "<p>Thanks for all the replies so far. Acoording to @dlatikay answer, this is my code so far. But I'm not sure about the types and somehow my Image stayes black (when I save it to file system)</p>\n\n<p>heres my code so far.</p>\n\n<pre><code>SQLLEN    cbData;\nCImage    image;\n\nBYTE* imgBits;\n\n    m_Rc = SQLGetData(m_Hstmt, 1, SQL_C_BINARY, imgBits, 0, &amp;cbData);\n\n\n    if (SQL_SUCCEEDED(m_Rc))\n    {\n        width = 317;\n        height = 159;\n\n        BITMAPINFOHEADER bmInfohdr;\n        // Create the header info\n        bmInfohdr.biSize = sizeof(BITMAPINFOHEADER);\n        bmInfohdr.biWidth = width;\n        bmInfohdr.biHeight = -height;\n        bmInfohdr.biPlanes = 1;\n        bmInfohdr.biBitCount = 8 * 8;\n        bmInfohdr.biCompression = BI_RGB;\n        bmInfohdr.biSizeImage = width*height * 8;\n        bmInfohdr.biXPelsPerMeter = 0;\n        bmInfohdr.biYPelsPerMeter = 0;\n        bmInfohdr.biClrUsed = 0;\n        bmInfohdr.biClrImportant = 0;\n\n        BITMAPINFO bmInfo;\n        bmInfo.bmiHeader = bmInfohdr;\n        bmInfo.bmiColors[0].rgbBlue = 255;\n\n        // Allocate some memory and some pointers\n        unsigned char * p24Img = new unsigned char[width*height * 3];\n        BYTE *pTemp, *ptr;\n        pTemp = (BYTE*)imgBits;\n        ptr = p24Img;\n\n        // Convert image from RGB to BGR\n        for (DWORD index = 0; index &lt; width*height; index++)\n        {\n            unsigned char r = *(pTemp++);\n            unsigned char g = *(pTemp++);\n            unsigned char b = *(pTemp++);\n\n            *(ptr++) = b;\n            *(ptr++) = g;\n            *(ptr++) = r;\n        }\n\n        // Create the CImage\n        image.Create(width, height, 8, NULL);\n        image.Save(_T(\"c:\\\\temp\\\\image1.bmp\")); // for testing\n    }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7296605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88aaf93afd2fbf1d261bed62a19a2a15?s=128&d=identicon&r=PG&f=1", "display_name": "Meduna", "link": "https://stackoverflow.com/users/7296605/meduna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1481788579, "creation_date": 1481720293, "last_edit_date": 1481720873, "question_id": 41143283, "link": "https://stackoverflow.com/questions/41143283/image-from-sql-database-to-cimage", "title": "Image from SQL Database to CImage", "body": "<p>I'm struggling at the moment and hope that someone can help me. </p>\n\n<p>I have to get an Image out of a SQL database  (like with SQLGetData) and than convert that data to a CImage so I can view it in my program. </p>\n\n<p>Thanks for any help!</p>\n\n<pre><code>SQLGetData(m_Hstmt, col, SQL_C_BINARY, BinaryPtr, 0, &amp;cbData)\n</code></pre>\n"}, {"tags": ["c++", "qt", "struct", "sizeof"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1481720367, "post_id": 41143252, "comment_id": 69488913, "body": "Your going to need to use a serialization library or roll your own if you want to output a container that is dynamically sized."}, {"owner": {"reputation": 4912, "user_id": 1953533, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Vs4v8.jpg?s=128&g=1", "display_name": "CroCo", "link": "https://stackoverflow.com/users/1953533/croco"}, "edited": false, "score": 0, "creation_date": 1481721085, "post_id": 41143252, "comment_id": 69489375, "body": "Do you want to know how many bytes in the vector?Is this what you&#39;re asking?"}, {"owner": {"reputation": 317, "user_id": 4039888, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/thzYl.jpg?s=128&g=1", "display_name": "Do\u011fukan Tun&#231;", "link": "https://stackoverflow.com/users/4039888/do%c4%9fukan-tun%c3%a7"}, "reply_to_user": {"reputation": 4912, "user_id": 1953533, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Vs4v8.jpg?s=128&g=1", "display_name": "CroCo", "link": "https://stackoverflow.com/users/1953533/croco"}, "edited": false, "score": 0, "creation_date": 1481721465, "post_id": 41143252, "comment_id": 69489626, "body": "@CroCo That would help my cause but not completely solve the problem, because I would still have the serialization issue. But generally, I would be very glad if someone suggested a way where I can see an increase in &quot;sizeof&quot; every time I insert a new element in a container."}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 1, "creation_date": 1481721753, "post_id": 41143252, "comment_id": 69489821, "body": "See here: <a href=\"http://stackoverflow.com/questions/29715423/calculate-serialization-size-of-objects-in-qt\" title=\"calculate serialization size of objects in qt\">stackoverflow.com/questions/29715423/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 317, "user_id": 4039888, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/thzYl.jpg?s=128&g=1", "display_name": "Do\u011fukan Tun&#231;", "link": "https://stackoverflow.com/users/4039888/do%c4%9fukan-tun%c3%a7"}, "edited": false, "score": 0, "creation_date": 1481723293, "post_id": 41143373, "comment_id": 69490904, "body": "Thanks for the answer and the code, I decided to wrap this idea in a class and handle the serialization jobs with this class&#39; methods. That would do the trick I suppose."}], "tags": [], "owner": {"reputation": 2537, "user_id": 4149835, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh6.googleusercontent.com/-n_QVH3KiURQ/AAAAAAAAAAI/AAAAAAAAAFM/RomdbXIW1hU/photo.jpg?sz=128", "display_name": "Vladimir Bershov", "link": "https://stackoverflow.com/users/4149835/vladimir-bershov"}, "is_accepted": true, "score": 1, "last_activity_date": 1481720604, "creation_date": 1481720604, "answer_id": 41143373, "question_id": 41143252, "link": "https://stackoverflow.com/questions/41143252/is-there-a-qt-c-data-container-to-use-in-dynamic-size-structs/41143373#41143373", "title": "Is there a Qt C++ data container to use in dynamic size structs?", "body": "<p>The <strong>QDataStream</strong> allows you to serialize some of the Qt data types: <a href=\"http://doc.qt.io/qt-5/datastreamformat.html\" rel=\"nofollow noreferrer\">Serializing Qt Data Types</a>  </p>\n\n<pre><code>QDataStream stream(&amp;file);   // we will serialize the data into the file\nstream &lt;&lt; your_qvector_obj;\n//...\nQVector&lt;int&gt; new_vec;\nstream &gt;&gt; new_vec;\n//...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "is_accepted": false, "score": 0, "last_activity_date": 1481742743, "creation_date": 1481742743, "answer_id": 41150363, "question_id": 41143252, "link": "https://stackoverflow.com/questions/41143252/is-there-a-qt-c-data-container-to-use-in-dynamic-size-structs/41150363#41150363", "title": "Is there a Qt C++ data container to use in dynamic size structs?", "body": "<p>You're on the right track with QVector. The STL vector class will also work. Both of these classes are guaranteed to store their values in contiguous memory. </p>\n\n<p>For QVector, you need something like this:</p>\n\n<pre><code>memcpy (dest, bar.data(), bar.count () * sizeof (int));\n</code></pre>\n\n<p>For an STL vector, you take the address of the first element:</p>\n\n<pre><code>memcpy (dest, &amp;bar[0], bar.size () * sizeof (int));\n</code></pre>\n\n<p>In both cases, \"dest\" must be large enough to hold the data you're copying. I'm using copying here as an example; if you just need a pointer to the data then QVector::data provides that, for an STL vector, the address of the first element provides it.</p>\n"}], "owner": {"reputation": 317, "user_id": 4039888, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/thzYl.jpg?s=128&g=1", "display_name": "Do\u011fukan Tun&#231;", "link": "https://stackoverflow.com/users/4039888/do%c4%9fukan-tun%c3%a7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 41143373, "answer_count": 2, "score": 0, "last_activity_date": 1481742743, "creation_date": 1481720215, "last_edit_date": 1481720392, "question_id": 41143252, "link": "https://stackoverflow.com/questions/41143252/is-there-a-qt-c-data-container-to-use-in-dynamic-size-structs", "title": "Is there a Qt C++ data container to use in dynamic size structs?", "body": "<p>I thought this problem should be identified and solved by the community but it seems either I'm searching with the wrong keywords or it's really that elusive.</p>\n\n<p>The problem is simple. I want to define a struct in which a dynamic data container (Vector, List, Queue, whatever works) should be defined.</p>\n\n<pre><code> #pragma pack(1)\n\n struct Example\n {\n    int foo;\n\n    QVector&lt;int&gt; bar;\n };\n</code></pre>\n\n<p>I need to insert integer values to this Vector (or take any other Qt/STL container) and I want to copy this struct's contents to a byte array in order to write its raw data to a file.</p>\n\n<p>What I encounter is that when I write the following code:</p>\n\n<pre><code>Example exstr;\nqDebug()&lt;&lt;sizeof(exstr);\nexstr.bar.push_back(12);\nexstr.bar.push_back(5);\nqDebug()&lt;&lt;sizeof(exstr);\n</code></pre>\n\n<p>It displays the values:</p>\n\n<pre><code>8\n8\n</code></pre>\n\n<p>Now, this is probably because QVector is just an ordinary pointer which points to the contiguous data but what I need is a dynamically resizeable data container (which would also resize the struct it's in) and allow me to use the contents byte by byte when I try to serialize it.</p>\n\n<p>Thanks for the help in advance.</p>\n"}, {"tags": ["c++", "linux", "filesystems", "fstream", "ofstream"], "comments": [{"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 1, "creation_date": 1481720190, "post_id": 41143170, "comment_id": 69488813, "body": "Interesting question. What OS? I&#39;m a bit confused by the last part of the question: <i>The code behaves as expected (exception is thrown) only when the disk is full.</i> So does it work in the end and you get an exception?"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1481720210, "post_id": 41143170, "comment_id": 69488824, "body": "&quot;<i>no error will show up</i>&quot;, &quot;<i>exception is thrown</i>&quot;, please, choose one."}, {"owner": {"reputation": 2612, "user_id": 706695, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/eb9a5e298a2050ebad7ee3d494a13e32?s=128&d=identicon&r=PG", "display_name": "HRgiger", "link": "https://stackoverflow.com/users/706695/hrgiger"}, "edited": false, "score": 0, "creation_date": 1481720314, "post_id": 41143170, "comment_id": 69488883, "body": "isnt it better do validation first instead of forcing resources to write, for linux df -h or df -h . simply returns size of disk"}, {"owner": {"reputation": 332, "user_id": 1578705, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/eeb3cf2932577f95689b9b9cf35a8c68?s=128&d=identicon&r=PG", "display_name": "emmerich", "link": "https://stackoverflow.com/users/1578705/emmerich"}, "reply_to_user": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1481720554, "post_id": 41143170, "comment_id": 69489046, "body": "@flatmouse: Linux 2.6.32 ;  the disk is filled-up before the write is attempted, this is what I mean by &quot;the disk is full&quot;.  - YSC: ok, I&#39;ll go with exception  - HRgiger not doing it by hand."}], "answers": [{"comments": [{"owner": {"reputation": 332, "user_id": 1578705, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/eeb3cf2932577f95689b9b9cf35a8c68?s=128&d=identicon&r=PG", "display_name": "emmerich", "link": "https://stackoverflow.com/users/1578705/emmerich"}, "edited": false, "score": 0, "creation_date": 1481721610, "post_id": 41143261, "comment_id": 69489732, "body": "A print of:     dest.eof(); after:dest &lt;&lt; source.rdbuf() returns 0."}, {"owner": {"reputation": 1620, "user_id": 902384, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/46da49256462126dbe77187c073aa6c6?s=128&d=identicon&r=PG", "display_name": "Shiv", "link": "https://stackoverflow.com/users/902384/shiv"}, "reply_to_user": {"reputation": 332, "user_id": 1578705, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/eeb3cf2932577f95689b9b9cf35a8c68?s=128&d=identicon&r=PG", "display_name": "emmerich", "link": "https://stackoverflow.com/users/1578705/emmerich"}, "edited": false, "score": 0, "creation_date": 1481721762, "post_id": 41143261, "comment_id": 69489830, "body": "That means bit is not set i.e. eof on output stream has not been reached and file has not been copied fully. But then I am not very sure. Check this again when copy is completed fully."}, {"owner": {"reputation": 1620, "user_id": 902384, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/46da49256462126dbe77187c073aa6c6?s=128&d=identicon&r=PG", "display_name": "Shiv", "link": "https://stackoverflow.com/users/902384/shiv"}, "reply_to_user": {"reputation": 332, "user_id": 1578705, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/eeb3cf2932577f95689b9b9cf35a8c68?s=128&d=identicon&r=PG", "display_name": "emmerich", "link": "https://stackoverflow.com/users/1578705/emmerich"}, "edited": false, "score": 0, "creation_date": 1481721905, "post_id": 41143261, "comment_id": 69489926, "body": "The reason I am not sure is because that link says that input operations do this. But we are doing an output operation."}, {"owner": {"reputation": 332, "user_id": 1578705, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/eeb3cf2932577f95689b9b9cf35a8c68?s=128&d=identicon&r=PG", "display_name": "emmerich", "link": "https://stackoverflow.com/users/1578705/emmerich"}, "edited": false, "score": 0, "creation_date": 1481724700, "post_id": 41143261, "comment_id": 69491846, "body": "as you might observed, there&#39;s no loop to check this again &quot;when copy is completed fully&quot;, I&#39;m calling .eof() right after the dest &lt;&lt; source.rdbuf(). And yes, eof would make sense to be related only to the source file, not the one to which I write."}, {"owner": {"reputation": 1620, "user_id": 902384, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/46da49256462126dbe77187c073aa6c6?s=128&d=identicon&r=PG", "display_name": "Shiv", "link": "https://stackoverflow.com/users/902384/shiv"}, "reply_to_user": {"reputation": 332, "user_id": 1578705, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/eeb3cf2932577f95689b9b9cf35a8c68?s=128&d=identicon&r=PG", "display_name": "emmerich", "link": "https://stackoverflow.com/users/1578705/emmerich"}, "edited": false, "score": 0, "creation_date": 1481741366, "post_id": 41143261, "comment_id": 69502190, "body": "You can check <code>dest.eof</code> before you close <code>dest</code>. Since there is nothing esle a 1 will prove what we are trying to achieve."}], "tags": [], "owner": {"reputation": 1620, "user_id": 902384, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/46da49256462126dbe77187c073aa6c6?s=128&d=identicon&r=PG", "display_name": "Shiv", "link": "https://stackoverflow.com/users/902384/shiv"}, "is_accepted": false, "score": 1, "last_activity_date": 1481786244, "last_edit_date": 1481786244, "creation_date": 1481720242, "answer_id": 41143261, "question_id": 41143170, "link": "https://stackoverflow.com/questions/41143170/no-exception-on-copying-files-in-linux-with-c-streambuffer-when-disk-almost-fu/41143261#41143261", "title": "No exception on copying files in Linux with C++ streambuffer when disk almost full?", "body": "<p>Check <code>eof</code> once copying is done on your output stream. It should not be at <code>eof</code>. If file is copied this would be set.</p>\n\n<p>The member function <code>eof</code> of ofstream should help.\nPlease refer to <a href=\"http://www.cplusplus.com/reference/ios/ios/eof/\" rel=\"nofollow noreferrer\">this</a></p>\n\n<p>Edit 1: One other way I can think of performing <code>stat</code> on <code>dest</code> file and source as well and if that does not match then it is not copied fully. The other way will be to perform seek on <code>dest</code> and figure filesize without calling <code>stat</code> and then compare sizes. The problem is <code>stat</code> does not work on all OS so seek should do.</p>\n\n<pre><code>#include &lt;fstream&gt;\n\nstd::ifstream::pos_type filesize(const char* filename)\n{\n    std::ifstream in(filename, std::ifstream::ate | std::ifstream::binary);\n    return in.tellg(); \n}\n</code></pre>\n\n<p>This code can find filesize.</p>\n"}], "owner": {"reputation": 332, "user_id": 1578705, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/eeb3cf2932577f95689b9b9cf35a8c68?s=128&d=identicon&r=PG", "display_name": "emmerich", "link": "https://stackoverflow.com/users/1578705/emmerich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1481786244, "creation_date": 1481719977, "last_edit_date": 1481724732, "question_id": 41143170, "link": "https://stackoverflow.com/questions/41143170/no-exception-on-copying-files-in-linux-with-c-streambuffer-when-disk-almost-fu", "title": "No exception on copying files in Linux with C++ streambuffer when disk almost full?", "body": "<p>I'm trying to treat the case when the free disk space is less than the file I want to copy on it but from what I've tested it seems that I get no exception and the file is written truncated to the free space left on that disk.</p>\n\n<p>For example, my source kept on another disk has 3MB, the destination disk has only 2MB free, then the file write will be truncated to the 2MB and no exception is thrown.</p>\n\n<p>My sample code is the following:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nint main() {\n\n\nifstream source(\"/some/other/disk/source.file\", ios::binary);\nofstream dest(\"/my/almost/full/disk/dest.file\", ios::binary);\ndest.exceptions(std::ifstream::failbit | std::ifstream::badbit );\n\ntry {\n\ndest &lt;&lt; source.rdbuf();\n\n} catch (std::exception &amp;ex) { /* not reached */\n\ncout &lt;&lt; \"It's dead, Jim: \" &lt;&lt; ex.what() &lt;&lt; endl;\n\n}\n\n\nsource.close();\ndest.close();\n\nreturn 0;\n}\n</code></pre>\n\n<p>The code behaves as expected (exception is thrown) only when the disk is full, filled-up beforehand.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "ns-3"], "comments": [{"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1481915457, "post_id": 41143161, "comment_id": 69581656, "body": "Added proper indentation to the code snippet"}], "answers": [{"tags": [], "owner": {"reputation": 29, "user_id": 6120238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kGCKd.jpg?s=128&g=1", "display_name": "NanerLee", "link": "https://stackoverflow.com/users/6120238/nanerlee"}, "is_accepted": false, "score": 0, "last_activity_date": 1482322693, "last_edit_date": 1482322693, "creation_date": 1482312976, "answer_id": 41259440, "question_id": 41143161, "link": "https://stackoverflow.com/questions/41143161/nodes-and-udp-implementation-in-ns-3/41259440#41259440", "title": "nodes and udp implementation in NS-3", "body": "<p>If you want to create 4 nodes, you can change the number in the code <code>nodes.Create(2)</code>. But you must link these nodes through <code>PointToPointHelper</code> or <code>CsmaHelper</code>. Then you must give every interface a IP address. Finally you need install UDP or TCP application that you can customize on the nodes.</p>\n\n<p>Your problem is very simple. But I can't provide more details because of my poor English.</p>\n\n<p>But I think you can see the ns3 <a href=\"https://www.nsnam.org/docs/release/3.25/tutorial/html/conceptual-overview.html\" rel=\"nofollow noreferrer\">tutorial</a>, especially <strong>A First ns-3 Script</strong> part.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 7150525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4be93d1bd4b23697c5b9d43384bfdcdf?s=128&d=identicon&r=PG&f=1", "display_name": "romi", "link": "https://stackoverflow.com/users/7150525/romi"}, "edited": false, "score": 0, "creation_date": 1484860534, "post_id": 41664968, "comment_id": 70696153, "body": "thank you!might i also ask another quastion?if I have 2 nodes and I connect them point2point,if I want to have a duplex link so the 2 nodes could communicate with eachother shall I add 2 ip addresses with internet stack helper?"}, {"owner": {"reputation": 26, "user_id": 7422343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e5a6c7532690bfdd40913a761d633bf?s=128&d=identicon&r=PG&f=1", "display_name": "A Deep", "link": "https://stackoverflow.com/users/7422343/a-deep"}, "reply_to_user": {"reputation": 3, "user_id": 7150525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4be93d1bd4b23697c5b9d43384bfdcdf?s=128&d=identicon&r=PG&f=1", "display_name": "romi", "link": "https://stackoverflow.com/users/7150525/romi"}, "edited": false, "score": 0, "creation_date": 1485004559, "post_id": 41664968, "comment_id": 70749913, "body": "No, you will have to give a single address subnet using Ipv4AddressHelper and assign this to the NetDeviceContainer you would have installed on your node."}, {"owner": {"reputation": 3, "user_id": 7150525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4be93d1bd4b23697c5b9d43384bfdcdf?s=128&d=identicon&r=PG&f=1", "display_name": "romi", "link": "https://stackoverflow.com/users/7150525/romi"}, "edited": false, "score": 0, "creation_date": 1485097787, "post_id": 41664968, "comment_id": 70773298, "body": "oh ok! and then I would just need a TCP source and sink apps for both of the nodes...am I right?"}, {"owner": {"reputation": 26, "user_id": 7422343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e5a6c7532690bfdd40913a761d633bf?s=128&d=identicon&r=PG&f=1", "display_name": "A Deep", "link": "https://stackoverflow.com/users/7422343/a-deep"}, "reply_to_user": {"reputation": 3, "user_id": 7150525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4be93d1bd4b23697c5b9d43384bfdcdf?s=128&d=identicon&r=PG&f=1", "display_name": "romi", "link": "https://stackoverflow.com/users/7150525/romi"}, "edited": false, "score": 0, "creation_date": 1485184637, "post_id": 41664968, "comment_id": 70807196, "body": "yes, after setting up the internet stack, you just need to configure a source and sink app"}], "tags": [], "owner": {"reputation": 26, "user_id": 7422343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e5a6c7532690bfdd40913a761d633bf?s=128&d=identicon&r=PG&f=1", "display_name": "A Deep", "link": "https://stackoverflow.com/users/7422343/a-deep"}, "is_accepted": false, "score": 1, "last_activity_date": 1484506275, "creation_date": 1484506275, "answer_id": 41664968, "question_id": 41143161, "link": "https://stackoverflow.com/questions/41143161/nodes-and-udp-implementation-in-ns-3/41664968#41664968", "title": "nodes and udp implementation in NS-3", "body": "<p>There are different ways to do it based on the network topology you want to work on. If you want to have four nodes sharing the same shared medium, you can simply do a <code>node.Create (4)</code> and install a <code>CsmaHelper</code> on your <code>NodeContainer</code>, you can checkout <strong>/examples/tutorial/second.cc</strong> for a simple implementation of this.</p>\n\n<p>But if you want a dumbbell like topology with one leaf node on each side and one central channel, you will have to create three <code>NodeContainer</code> with PointToPointHelper installed on each of them.</p>\n\n<pre><code>NodeContainer leftLeaf, rightLeaf, central;\nleftLeaf.Create(2); //creates two left side node\nrightLeaf.Create(2); //creates two right side node\ncentral.Add(leftLeaf.Get(1)); //add one node from left in central link\ncentral.Add(rightLeaf.Get(1)); //add one node from right in central link\n</code></pre>\n\n<p>You will also have to set forwarding on for the central link nodes.</p>\n\n<p>This is done because a point to point link must have exactly two end points. For such topology you can even use <code>PointToPointDumbbellHelper</code>, an implementation for which can be found in <strong>src/traffic-control/examples/red-vs-ared.cc</strong></p>\n"}], "owner": {"reputation": 3, "user_id": 7150525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4be93d1bd4b23697c5b9d43384bfdcdf?s=128&d=identicon&r=PG&f=1", "display_name": "romi", "link": "https://stackoverflow.com/users/7150525/romi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 646, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1484506275, "creation_date": 1481719965, "last_edit_date": 1481915457, "question_id": 41143161, "link": "https://stackoverflow.com/questions/41143161/nodes-and-udp-implementation-in-ns-3", "title": "nodes and udp implementation in NS-3", "body": "<p>3 and I'm currently trying to alter some of the codes in the examples section without any success.</p>\n\n<pre><code>#include \"ns3/core-module.h\"\n#include \"ns3/network-module.h\"\n#include \"ns3/internet-module.h\"\n#include \"ns3/point-to-point-module.h\"\n#include \"ns3/applications-module.h\"\n\nusing namespace ns3;\n\nNS_LOG_COMPONENT_DEFINE(\"FirstScriptExample\");\n\nint main(int argc, char *argv[]) {\n    Time::SetResolution(Time::NS);\n    LogComponentEnable(\"UdpEchoClientApplication\", LOG_LEVEL_INFO);\n    LogComponentEnable(\"UdpEchoServerApplication\", LOG_LEVEL_INFO);\n\n    NodeContainer nodes;\n    nodes.Create(2);\n\n    PointToPointHelper pointToPoint;\n    pointToPoint.SetDeviceAttribute(\"DataRate\", StringValue(\"5Mbps\"));\n    pointToPoint.SetChannelAttribute(\"Delay\", StringValue(\"2ms\"));\n\n    NetDeviceContainer devices;\n    devices = pointToPoint.Install(nodes);\n\n    InternetStackHelper stack;\n    stack.Install(nodes);\n\n    Ipv4AddressHelper address;\n    address.SetBase(\"10.1.1.0\", \"255.255.255.0\");\n\n    Ipv4InterfaceContainer interfaces = address.Assign(devices);\n\n    UdpEchoServerHelper echoServer(9);\n\n    ApplicationContainer serverApps = echoServer.Install(nodes.Get(1));\n    serverApps.Start(Seconds(1.0));\n    serverApps.Stop(Seconds(10.0));\n\n    UdpEchoClientHelper echoClient(interfaces.GetAddress(1), 9);\n    echoClient.SetAttribute(\"MaxPackets\", UintegerValue(1));\n    echoClient.SetAttribute(\"Interval\", TimeValue(Seconds(1.0)));\n    echoClient.SetAttribute(\"PacketSize\", UintegerValue(1024));\n\n    ApplicationContainer clientApps = echoClient.Install(nodes.Get(0));\n    clientApps.Start(Seconds(2.0));\n    clientApps.Stop(Seconds(10.0));\n\n    Simulator::Run();\n    Simulator::Destroy();\n    return 0;\n}\n</code></pre>\n\n<p>This is the first tutorial example and I'm trying to create 4 nodes so they could send some udp packets to one another.</p>\n\n<p>Any advice?</p>\n"}, {"tags": ["c++", "database"], "answers": [{"tags": [], "owner": {"reputation": 1620, "user_id": 902384, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/46da49256462126dbe77187c073aa6c6?s=128&d=identicon&r=PG", "display_name": "Shiv", "link": "https://stackoverflow.com/users/902384/shiv"}, "is_accepted": true, "score": 0, "last_activity_date": 1481719905, "creation_date": 1481719905, "answer_id": 41143140, "question_id": 41143097, "link": "https://stackoverflow.com/questions/41143097/how-to-log-data-in-database-at-machine-generating-speed/41143140#41143140", "title": "how to log data in database at machine-generating speed", "body": "<p>I would advice to just write to a file and then have another program parse and load that in a DB of your choice. The fastest DBs would be an in-memory DB like Redis, Tarantool or Memcached. Tune persistence settings to your requirements.</p>\n"}], "owner": {"reputation": 39, "user_id": 6687613, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2123b36d1f46ba5dadc0fc984bc7c01d?s=128&d=identicon&r=PG&f=1", "display_name": "egyptian_M", "link": "https://stackoverflow.com/users/6687613/egyptian-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 41143140, "answer_count": 1, "score": 0, "last_activity_date": 1481719905, "creation_date": 1481719760, "question_id": 41143097, "link": "https://stackoverflow.com/questions/41143097/how-to-log-data-in-database-at-machine-generating-speed", "title": "how to log data in database at machine-generating speed", "body": "<p>I have a C++ application that generates a lot of data. I want to log these data into a database to be able to make fast select queries on it at a later time.\nI tried using MYISAM storage engine in mysql but it tend to very slow insertion speed relative to the software-generating speed.</p>\n\n<p>Any advice on a specific DBMS or anyway to do so?\nThanks.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "edited": false, "score": 0, "creation_date": 1481729987, "post_id": 41143045, "comment_id": 69495331, "body": "If you don&#39;t know a word, search it on the web. You wrote &quot;load Data from a file, use a constructor and save this data&quot; which makes it quite clear that you have no idea what the &quot;use a constructor&quot; is supposed to mean. You seem to see it as some task you need to do for an unknown reason. This is very important: Do not use code that you do not understand. Use a search engine."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 7290512, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154336947954582/picture?type=large", "display_name": "David Tobin", "link": "https://stackoverflow.com/users/7290512/david-tobin"}, "edited": false, "score": 0, "creation_date": 1481723087, "post_id": 41143290, "comment_id": 69490740, "body": "So quick question, how can I take the data into the program and then the Vector? I thought I had to use a construct which you said I dont. Now I am confused as to why the class has strings declared. Also to print out the Vector how would I do it as I looked it up but it confused me like crazy!"}, {"owner": {"reputation": 498, "user_id": 7110778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HyB4Q.jpg?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/7110778/andrew"}, "reply_to_user": {"reputation": 19, "user_id": 7290512, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154336947954582/picture?type=large", "display_name": "David Tobin", "link": "https://stackoverflow.com/users/7290512/david-tobin"}, "edited": false, "score": 1, "creation_date": 1481724620, "post_id": 41143290, "comment_id": 69491795, "body": "Maybe you should start with looking up classes in c++. That should make it much clearer. The constructor &quot;constructs&quot; objects (which are instances of classes) so a constructor can read a file and store in a member variable that is a vector. Print by looping over the vector and printing each element individually, As I say, look up c++ classes and c++ vector for more."}], "tags": [], "owner": {"reputation": 498, "user_id": 7110778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HyB4Q.jpg?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/7110778/andrew"}, "is_accepted": false, "score": 1, "last_activity_date": 1481720312, "creation_date": 1481720312, "answer_id": 41143290, "question_id": 41143045, "link": "https://stackoverflow.com/questions/41143045/class-function-to-take-data-from-a-file-and-construct-from-another-class-to-save/41143290#41143290", "title": "Class function to take data from a file and construct from another class to save it in a Vector C++", "body": "<p>Your classes do not have constructors defined. Add a constructor to call your loadOrganisationRecords function. I suspect your searches have been too specific. Try searching for \"C++ constructors\" by itself and you should come up with a wealth of information.</p>\n\n<p>It looks like you have the right ideas for file I/O and vector usage, but searching for those on their own too is not a bad idea either.</p>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 7296451, "user_type": "registered", "profile_image": "https://graph.facebook.com/1628362454124188/picture?type=large", "display_name": "Dimitrie Vatra", "link": "https://stackoverflow.com/users/7296451/dimitrie-vatra"}, "is_accepted": false, "score": 0, "last_activity_date": 1481722978, "creation_date": 1481722978, "answer_id": 41144145, "question_id": 41143045, "link": "https://stackoverflow.com/questions/41143045/class-function-to-take-data-from-a-file-and-construct-from-another-class-to-save/41144145#41144145", "title": "Class function to take data from a file and construct from another class to save it in a Vector C++", "body": "<p>I created a constructor for your class</p>\n\n<pre><code>public:\npayrollprocessing();\n</code></pre>\n\n<p>with no parametters, witch will read all data from your file, and write in your list. A constructor is a function withowt type, and the name of it's class;</p>\n\n<pre><code>#pragma once\n#include&lt;iostream&gt;\n#include&lt;string&gt;\n#include&lt;fstream&gt;\n#include&lt;vector&gt;\n\nusing namespace std;\n\nclass OrganisationRecord\n{\nprivate:\n\npublic:\nstring name;\nstring occupation;\nstring department;\n};\nclass payrollprocessing\n{\nprivate:\n    ifstream inputfile;\n    ofstream outputfile;\n    vector&lt;OrganisationRecord&gt; OrganisationRecords;\n\npublic:\n    payrollprocessing();\n//GTE = Greater than or equal to\n};\npayrollprocessing::payrollprocessing()\n{\n    inputfile.open(\"organisation.txt\");\n\n    if (!inputfile.is_open())\n    {\n        cout &lt;&lt; \"File Not Open Error!\";\n    }\nelse\n{\n    std::string line;\n    int i = 0;\n    while (!inputfile.eof())\n    {\n        OrganisationRecord OrgRec;             //Here is the code to\n        inputfile &gt;&gt; OrgRec.name;              //to construct and then\n        inputfile &gt;&gt; OrgRec.occupation;        //save to the vector\n        inputfile &gt;&gt; OrgRec.department;        //we havent learned how to\n                                               //how to print string\n        OrganisationRecords.push_back(OrgRec); //vectors yet which makes\n        i++;                                   //it hard to test\n    }\n\n}\ninputfile.close();\n}\nint main(void)\n{\n    string name;\n    payrollprocessing PP();\n    return 0;\n}\n</code></pre>\n\n<p>So ... in main function, when you write payrollprocessing PP(); you call the constructor. The scope of constructor is to initializate the values of variables. For example, the constructor af a button draw the button on the screen, set his location and size (from parametters, but in your case we don't have one);\nI removed your functions, but you dont have to :)</p>\n"}], "owner": {"reputation": 19, "user_id": 7290512, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154336947954582/picture?type=large", "display_name": "David Tobin", "link": "https://stackoverflow.com/users/7290512/david-tobin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1481722978, "creation_date": 1481719572, "question_id": 41143045, "link": "https://stackoverflow.com/questions/41143045/class-function-to-take-data-from-a-file-and-construct-from-another-class-to-save", "title": "Class function to take data from a file and construct from another class to save it in a Vector C++", "body": "<p>I am a first year in Computer Science learning C++. We have an assignment where we have to load Data from a file, use a constructor and save this data in a Vector.\nI have scoured our Lecture Notes and there is no examples of how to do this and I have googled it for hours now to find nothing. \nMaybe I am asking the wrong thing?</p>\n\n<p>I have left all the other classes and functions out for now as I have not worked on them yet.</p>\n\n<p>Here is the code that I managed so far:    </p>\n\n<pre><code>#pragma once\n#include&lt;iostream&gt;\n#include&lt;string&gt;\n#include&lt;fstream&gt;\n#include&lt;vector&gt;\n\nusing namespace std;\n\nclass OrganisationRecord\n{\nprivate:\n\npublic:\n    string name;\n    string occupation;\n    string department;\n};\nclass payrollprocessing\n{\n\nprivate:\n    ifstream inputfile;\n    ofstream outputfile;\n    vector&lt;OrganisationRecord&gt; OrganisationRecords; //Vector it needs to be saved too\n    vector&lt;HRRecord&gt; HRRecords;\n    vector&lt;PayRollRecord&gt; PayRollRecords;\n\npublic:\n    void loadOrganisationRecords(string filename); //Function I am trying to write\n    void loadHRRecords(string filename);\n    void loadPayrollRecords(string filename);\n    void displayEmployeeOfSalaryGTE(double salary);\n    //GTE = Greater than or equal to\n};\nvoid payrollprocessing::loadOrganisationRecords(string name)\n{\n    inputfile.open(\"organisation.txt\");\n\n    if (!inputfile.is_open())\n    {\n        cout &lt;&lt; \"File Not Open Error!\";\n    }\n    else\n    {\n        std::string line;\n        int i = 0;\n        while (!inputfile.eof())\n        {\n            OrganisationRecord OrgRec;             //Here is the code to \n            inputfile &gt;&gt; OrgRec.name;              //to construct and then\n            inputfile &gt;&gt; OrgRec.occupation;        //save to the vector\n            inputfile &gt;&gt; OrgRec.department;        //we havent learned how to\n                                                   //how to print string \n            OrganisationRecords.push_back(OrgRec); //vectors yet which makes\n            i++;                                   //it hard to test\n        }\n\n    }\n    inputfile.close();\n\n}\nint main(void)\n{\n    string name;\n    payrollprocessing PP;\n    PP.loadOrganisationRecords(name);\n\n    return 0;\n}\n</code></pre>\n\n<p>We also cant edit the libraries or the classes.\nAll help with this is much appreciated!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 1, "creation_date": 1481719773, "post_id": 41143042, "comment_id": 69488504, "body": "I compile with a C++ program with a C compiler, why it&#39;s didn&#39;t work? &quot;GCC&quot; is a multi-compiler, &quot;gcc&quot; is used for C programs. &quot;g++&quot; for C++ program."}, {"owner": {"reputation": 4764, "user_id": 2419922, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/41e095cca8abbfde0f1f52d73a1efcd7?s=128&d=identicon&r=PG", "display_name": "cshu", "link": "https://stackoverflow.com/users/2419922/cshu"}, "edited": false, "score": 0, "creation_date": 1481719987, "post_id": 41143042, "comment_id": 69488672, "body": "the local static variable has static storage duration and it&#39;s not initialized until it&#39;s reached by control"}], "answers": [{"tags": [], "owner": {"reputation": 1227, "user_id": 1974414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1fdd96f9d84a095fa844866e6bc2680?s=128&d=identicon&r=PG", "display_name": "Dima Ogurtsov", "link": "https://stackoverflow.com/users/1974414/dima-ogurtsov"}, "is_accepted": true, "score": 2, "last_activity_date": 1481720249, "creation_date": 1481720249, "answer_id": 41143264, "question_id": 41143042, "link": "https://stackoverflow.com/questions/41143042/what-does-it-mean-when-declaring-an-object-with-static-keyword/41143264#41143264", "title": "What does it mean when declaring an object with static keyword?", "body": "<p>What happens here is the first time the execution gets to <code>static A a;</code> line <code>A</code> is created. This happens after <code>puts(\"In\");</code> so the output is in the right order.</p>\n\n<p>So far everything is the same as with non-static variable. In your example you still can see that the variable is static because <code>Out</code> is printed before <code>Destroy</code> (lifetime of a static variable = program lifetime). But one other property of static variable is not displayed in your example. Try the following main:</p>\n\n<pre><code>int main()\n{\n    Test();\n    Test();\n    puts(\"Out\");\n    return 0;\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>In\nCreate\nIn\nOut\nDestroy\n</code></pre>\n\n<p>You can see here that \"Create\" was printed just once. This is what a static variable does - it gets initialized just once, when the execution gets to the declaration first time.</p>\n\n<p>Hope this helps</p>\n"}], "owner": {"reputation": 151, "user_id": 7296427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88e39a770651699d70a8749d97f7b64d?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Lee", "link": "https://stackoverflow.com/users/7296427/jason-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 41143264, "answer_count": 1, "score": -3, "last_activity_date": 1481720325, "creation_date": 1481719564, "question_id": 41143042, "link": "https://stackoverflow.com/questions/41143042/what-does-it-mean-when-declaring-an-object-with-static-keyword", "title": "What does it mean when declaring an object with static keyword?", "body": "<p>I was writing a C++ program and the part of its code is like below</p>\n\n<pre><code>#include &lt;cstdio&gt;\nclass A\n{\npublic:\n    A()\n    {\n        puts(\"Create\");\n    }\n    ~A()\n    {\n        puts(\"Destroy\");\n    }\n};\nvoid Test()\n{\n    puts(\"In\");\n    static A a; //declare an object with static keyword.\n}\nint main()\n{\n    Test();\n    puts(\"Out\");\n    return 0;\n}\n</code></pre>\n\n<p>I thought that the <em>static</em> keyword would make it like a global variable, and the output of this program should be</p>\n\n<pre><code>Create\nIn\nOut\nDestroy\n</code></pre>\n\n<p>But the fact was that when I compiled it using GCC, I got some linker errors,</p>\n\n<pre><code>/tmp/cc1JwaFb.o: In function `Test()':\ntest.cpp:(.text+0x23): undefined reference to `__cxa_guard_acquire'\ntest.cpp:(.text+0x46): undefined reference to `__cxa_guard_release'\ntest.cpp:(.text+0x6e): undefined reference to `__cxa_guard_abort'\n/tmp/cc1JwaFb.o:(.eh_frame+0x6b): undefined reference to `__gxx_personality_v0'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>but I can compile it using G++, which outputed</p>\n\n<pre><code>In\nCreate\nOut\nDestroy\n</code></pre>\n\n<p>So, why did these happen? What does it mean when declaring an object with <em>static</em> keyword?</p>\n"}, {"tags": ["c++", "git", "buck"], "comments": [{"owner": {"reputation": 2172, "user_id": 1038318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9e61594faa529a77cfd72735b7d8336?s=128&d=identicon&r=PG", "display_name": "Bort", "link": "https://stackoverflow.com/users/1038318/bort"}, "edited": false, "score": 1, "creation_date": 1481719352, "post_id": 41142890, "comment_id": 69488245, "body": "I don&#39;t know about Buck, but specifying a certain release of the github project  which is known to work with your code which can be updated whenever you feel like it is more apropriate? Then http https will work just as you want. Otherwise any API change will break your code."}], "answers": [{"tags": [], "owner": {"reputation": 23688, "user_id": 1256041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NJUNN.jpg?s=128&g=1", "display_name": "sdgfsdh", "link": "https://stackoverflow.com/users/1256041/sdgfsdh"}, "is_accepted": true, "score": 2, "last_activity_date": 1496844597, "creation_date": 1496844597, "answer_id": 44415062, "question_id": 41142890, "link": "https://stackoverflow.com/questions/41142890/can-i-specify-git-urls-as-dependencies-in-buck/44415062#44415062", "title": "Can I specify Git URLs as dependencies in Buck?", "body": "<p>Buck does not support remote Git URLs. </p>\n\n<p>Your options are: </p>\n\n<ul>\n<li>Copy the code manually into your project</li>\n<li>Use an equivalent <code>.zip</code> URL (GitHub gives you these)</li>\n<li>Use submodules, such as in <a href=\"https://github.com/njlr/buck-cells-example\" rel=\"nofollow noreferrer\">this example</a></li>\n<li>Use a package manager that supports Buck, such as <a href=\"https://buckaroo.pm\" rel=\"nofollow noreferrer\">Buckaroo</a></li>\n</ul>\n"}], "owner": {"reputation": 23688, "user_id": 1256041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NJUNN.jpg?s=128&g=1", "display_name": "sdgfsdh", "link": "https://stackoverflow.com/users/1256041/sdgfsdh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 44415062, "answer_count": 1, "score": 2, "last_activity_date": 1496844597, "creation_date": 1481719104, "question_id": 41142890, "link": "https://stackoverflow.com/questions/41142890/can-i-specify-git-urls-as-dependencies-in-buck", "title": "Can I specify Git URLs as dependencies in Buck?", "body": "<p>I am using Buck to build a C++ project. </p>\n\n<p>I would like to add a Git URL (e.g. <code>git@github.com:owner/project.git</code>) as a dependency so that a build can automatically pull down a library from GitHub. I took a look at <a href=\"https://buckbuild.com/rule/remote_file.html\" rel=\"nofollow noreferrer\"><code>remote_file</code></a>, but that only seems to work for HTTP, HTTPS and Maven. </p>\n\n<p>Does Buck provide this functionality out-of-the-box? </p>\n\n<p>If so, is it possible to specify a specific commit hash or tag? </p>\n"}]