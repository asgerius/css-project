[{"tags": ["c++", "cimg"], "answers": [{"tags": [], "owner": {"reputation": 116, "user_id": 5271810, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/6fbc56ad6eef01ba3444ec4fd43c2a89?s=128&d=identicon&r=PG", "display_name": "bvalabas", "link": "https://stackoverflow.com/users/5271810/bvalabas"}, "is_accepted": false, "score": 2, "last_activity_date": 1440662298, "creation_date": 1440662298, "answer_id": 32243742, "question_id": 32238522, "link": "https://stackoverflow.com/questions/32238522/set-default-value-for-alpha-in-cimg/32243742#32243742", "title": "Set default value for alpha in CImg", "body": "<p>like this:</p>\n\n<pre><code>img.channels(0,3);                   // Force 4th channel.\nimg.get_shared_channel(3).fill(255); // Fill it with 255.\n</code></pre>\n"}], "owner": {"reputation": 3220, "user_id": 1617352, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7f3fe06c7bccfeab0015286a92bb0a8e?s=128&d=identicon&r=PG", "display_name": "Dzung Nguyen", "link": "https://stackoverflow.com/users/1617352/dzung-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 540, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440662298, "creation_date": 1440633183, "last_edit_date": 1440635159, "question_id": 32238522, "link": "https://stackoverflow.com/questions/32238522/set-default-value-for-alpha-in-cimg", "title": "Set default value for alpha in CImg", "body": "<p>I need to load an RGB image into RGBA form in CImg (R1R2R3 G1G2G3 B1B2B3 A1A2A3 etc) and the get im.data() properly. For now Cimg is reading RGB only (R1R2R3 G1G2G3 B1B2B3). How do I add the alpha channels to the image with default value of 255?</p>\n"}, {"tags": ["c++", "ifstream", "getline"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1440633864, "post_id": 32238514, "comment_id": 52359376, "body": "&quot;I am trying to replicate it in C++ and use ifstream... &quot; - How about you also post that &quot;try&quot; . This looks exclusively like the C code,"}, {"owner": {"reputation": 1224, "user_id": 1493718, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e419efb84bdb508a603e01e53f679472?s=128&d=identicon&r=PG", "display_name": "lxx", "link": "https://stackoverflow.com/users/1493718/lxx"}, "edited": false, "score": 0, "creation_date": 1440633873, "post_id": 32238514, "comment_id": 52359379, "body": "have a look at <a href=\"http://stackoverflow.com/questions/7868936/read-file-line-by-line\" title=\"read file line by line\">stackoverflow.com/questions/7868936/read-file-line-by-line</a> , using the search function here(or via google) saves asking duplicate questions"}, {"owner": {"reputation": 1224, "user_id": 1493718, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e419efb84bdb508a603e01e53f679472?s=128&d=identicon&r=PG", "display_name": "lxx", "link": "https://stackoverflow.com/users/1493718/lxx"}, "edited": false, "score": 0, "creation_date": 1440633956, "post_id": 32238514, "comment_id": 52359403, "body": "Also I&#39;d suggest using c++ rather than c (and just compiling it with a c++ compiler) and c++ strings as they will make your life much easier"}, {"owner": {"reputation": 537, "user_id": 3902763, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/02819225c6fcfa3af9aa411a13e654bc?s=128&d=identicon&r=PG&f=1", "display_name": "oneday", "link": "https://stackoverflow.com/users/3902763/oneday"}, "reply_to_user": {"reputation": 1224, "user_id": 1493718, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e419efb84bdb508a603e01e53f679472?s=128&d=identicon&r=PG", "display_name": "lxx", "link": "https://stackoverflow.com/users/1493718/lxx"}, "edited": false, "score": 0, "creation_date": 1440634710, "post_id": 32238514, "comment_id": 52359586, "body": "@lxx : I did spend time doing that but wasnt able to figure out - let me spend more time"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1440634781, "post_id": 32238514, "comment_id": 52359605, "body": "Why do you need the <code>preturn</code> variable? Why don&#39;t you just <code>return pifstream</code>?"}, {"owner": {"reputation": 537, "user_id": 3902763, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/02819225c6fcfa3af9aa411a13e654bc?s=128&d=identicon&r=PG&f=1", "display_name": "oneday", "link": "https://stackoverflow.com/users/3902763/oneday"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1440634851, "post_id": 32238514, "comment_id": 52359624, "body": "@Barmar - no reason - was trying bunch of things and ended up posting code without clean up"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1440635070, "post_id": 32238514, "comment_id": 52359654, "body": "If the error is on the <code>getline()</code> line, it has nothing to do with how you&#39;re opening the files."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1440635073, "post_id": 32238514, "comment_id": 52359655, "body": "Not entirely sure, but <a href=\"http://pastebin.com/kVw1TUZp\" rel=\"nofollow noreferrer\"><b>is this</b></a> what you&#39;re trying to do?"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 2, "creation_date": 1440635151, "post_id": 32238514, "comment_id": 52359668, "body": "Your code assumes getline() is declared differently that what&#39;s reality <a href=\"http://www.cplusplus.com/reference/string/string/getline/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/string/string/getline</a>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1440635173, "post_id": 32238514, "comment_id": 52359672, "body": "The second argument to <code>getline()</code> should be <code>std::string</code>, not <code>char*</code>."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1440635308, "post_id": 32238514, "comment_id": 52359700, "body": "In the line <code>if (!pifstream)</code>, I&#39;m pretty sure you meant to test <code>pifstream[elem]</code>."}, {"owner": {"reputation": 537, "user_id": 3902763, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/02819225c6fcfa3af9aa411a13e654bc?s=128&d=identicon&r=PG&f=1", "display_name": "oneday", "link": "https://stackoverflow.com/users/3902763/oneday"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1440635956, "post_id": 32238514, "comment_id": 52359849, "body": "@WhozCraig - Thanks yes planning to achieve something like that - without using vectors - I see one of the other members also pointing that my getline() is declared differently  - can you help me understand what is difference between your getline and mine ?"}, {"owner": {"reputation": 537, "user_id": 3902763, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/02819225c6fcfa3af9aa411a13e654bc?s=128&d=identicon&r=PG&f=1", "display_name": "oneday", "link": "https://stackoverflow.com/users/3902763/oneday"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1440636094, "post_id": 32238514, "comment_id": 52359890, "body": "@nos : Thanks for the pointer I got it - !!!"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1440636102, "post_id": 32238514, "comment_id": 52359893, "body": "@oneday If passing a hard buffer, you should be using <code>obj.getline(buf, buf_len)</code>, where <code>obj</code> is your stream reference, not the generic <code>std:;getline</code>. And I cannot encourage you strongly enough to avoid manual dynamic memory management. <a href=\"https://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization\" rel=\"nofollow noreferrer\">RAII</a> - its what&#39;s for dinner."}, {"owner": {"reputation": 537, "user_id": 3902763, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/02819225c6fcfa3af9aa411a13e654bc?s=128&d=identicon&r=PG&f=1", "display_name": "oneday", "link": "https://stackoverflow.com/users/3902763/oneday"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1440636128, "post_id": 32238514, "comment_id": 52359902, "body": "@WhozCraig : I see the error was because of char* declaration in getline instead of string"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1440636256, "post_id": 32238514, "comment_id": 52359928, "body": "@oneday exactly. Either use a fixed buffer and change to use the objects getline member, or use a <code>std::string</code> in tandem with <code>std::getline</code>. Both have reasons to use (and not use) them, situationally dependent. You will probably be good with the latter."}], "answers": [{"comments": [{"owner": {"reputation": 537, "user_id": 3902763, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/02819225c6fcfa3af9aa411a13e654bc?s=128&d=identicon&r=PG&f=1", "display_name": "oneday", "link": "https://stackoverflow.com/users/3902763/oneday"}, "edited": false, "score": 0, "creation_date": 1440635652, "post_id": 32238798, "comment_id": 52359781, "body": "thanks a lot. this is part of my learning exercise - and we are not taught vectors yet - can you guide me to some way to achieve it without vectors?"}, {"owner": {"reputation": 36599, "user_id": 359284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3260a8f331e6869fbf075666eb3b387a?s=128&d=identicon&r=PG", "display_name": "Kevin Brown", "link": "https://stackoverflow.com/users/359284/kevin-brown"}, "edited": false, "score": 1, "creation_date": 1440635652, "post_id": 32238798, "comment_id": 52359782, "body": "While this answer is probably correct and useful, it is preferred if you <a href=\"http://meta.stackexchange.com/q/114762/159034\">include some explanation along with it</a> to explain how it helps to solve the problem. This becomes especially useful in the future, if there is a change (possibly unrelated) that causes it to stop working and users need to understand how it once worked."}, {"owner": {"reputation": 2430, "user_id": 2546626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24bee02c79f348081ac9e14edc982a0d?s=128&d=identicon&r=PG", "display_name": "Youka", "link": "https://stackoverflow.com/users/2546626/youka"}, "reply_to_user": {"reputation": 537, "user_id": 3902763, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/02819225c6fcfa3af9aa411a13e654bc?s=128&d=identicon&r=PG&f=1", "display_name": "oneday", "link": "https://stackoverflow.com/users/3902763/oneday"}, "edited": false, "score": 0, "creation_date": 1440635844, "post_id": 32238798, "comment_id": 52359827, "body": "@oneday Moment, i add comments."}, {"owner": {"reputation": 2430, "user_id": 2546626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24bee02c79f348081ac9e14edc982a0d?s=128&d=identicon&r=PG", "display_name": "Youka", "link": "https://stackoverflow.com/users/2546626/youka"}, "reply_to_user": {"reputation": 537, "user_id": 3902763, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/02819225c6fcfa3af9aa411a13e654bc?s=128&d=identicon&r=PG&f=1", "display_name": "oneday", "link": "https://stackoverflow.com/users/3902763/oneday"}, "edited": false, "score": 0, "creation_date": 1440637257, "post_id": 32238798, "comment_id": 52360115, "body": "@oneday You should learn C++ the right way and not C with objects (could become a bad habit, burned in your brain), so i recommend you learn the <a href=\"https://en.wikipedia.org/wiki/Standard_Template_Library\" rel=\"nofollow noreferrer\">STL</a>, it&#39;s not that hard. A <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\">vector</a> is, told simply, to use like a list &amp; array. There aren&#39;t many members, so don&#39;t hesitate ;)"}, {"owner": {"reputation": 537, "user_id": 3902763, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/02819225c6fcfa3af9aa411a13e654bc?s=128&d=identicon&r=PG&f=1", "display_name": "oneday", "link": "https://stackoverflow.com/users/3902763/oneday"}, "edited": false, "score": 0, "creation_date": 1440640392, "post_id": 32238798, "comment_id": 52360792, "body": "@Youka - Sure.will keep it in mind and yes soon will read and practice STL"}], "tags": [], "owner": {"reputation": 2430, "user_id": 2546626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24bee02c79f348081ac9e14edc982a0d?s=128&d=identicon&r=PG", "display_name": "Youka", "link": "https://stackoverflow.com/users/2546626/youka"}, "is_accepted": true, "score": 3, "last_activity_date": 1440636920, "last_edit_date": 1440636920, "creation_date": 1440635184, "answer_id": 32238798, "question_id": 32238514, "link": "https://stackoverflow.com/questions/32238514/using-ifstream-instead-of-file/32238798#32238798", "title": "using ifstream instead of FILE", "body": "<pre><code>#include &lt;array&gt;        // Constant size container\n#include &lt;vector&gt;       // Dynamic size container\n#include &lt;fstream&gt;      // File I/O\n#include &lt;stdexcept&gt;    // Stock exceptions\n#include &lt;iostream&gt;     // Standard I/O streams\n\n// Program entry\nint main(){\n    // Like C array, but with useful member functions\n    const std::array&lt;const char*, 3&gt; filenames{\"test1.txt\", \"test2.txt\", \"test3.txt\"};\n    // Still empty vector of input file streams\n    std::vector&lt;std::ifstream&gt; files;\n    // Iterate through filenames, one-by-one\n    for(auto filename : filenames){\n        // Create input file stream in-place at end of vector\n        files.emplace_back(filename);\n        // Last input file stream in vector (see line above) is with error (opening failed)\n        if(!files.back())\n            // Throw error upwards (there's no catch, so the host, like the console, reports the exception message)\n            throw std::runtime_error(\"Couldn't open file: \" + std::string(filename));\n    }\n    // Line buffer\n    std::string line;\n    // Just loop 3 times (for lines)\n    for(unsigned line_i = 0; line_i &lt; 3; ++line_i)\n        // Iterate through file streams\n        for(auto&amp; file : files)\n            // Get current line from file stream (moves file pointer behind line + separator) and check stream status (if stream is EOF, the condition goes 'false' and nothing further happens)\n            if(std::getline(file, line))\n                // Write line number, character ':' and gotten line to standard output\n                std::cout &lt;&lt; line_i &lt;&lt; ':' &lt;&lt; line &lt;&lt; std::endl;\n    // Program exit status (usually 0 == OK)\n    return 0;\n}\n</code></pre>\n\n<p>Safe, fast, simple.\nThis code requires C++11 (which shouldn't be a problem these days anymore) and hasn't any additional dependency, just STL.</p>\n"}], "owner": {"reputation": 537, "user_id": 3902763, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/02819225c6fcfa3af9aa411a13e654bc?s=128&d=identicon&r=PG&f=1", "display_name": "oneday", "link": "https://stackoverflow.com/users/3902763/oneday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1037, "favorite_count": 1, "accepted_answer_id": 32238798, "answer_count": 1, "score": 1, "last_activity_date": 1440636920, "creation_date": 1440633124, "last_edit_date": 1440634781, "question_id": 32238514, "link": "https://stackoverflow.com/questions/32238514/using-ifstream-instead-of-file", "title": "using ifstream instead of FILE", "body": "<p>I have written a code to read from a array of file in c which is something like below and it works fine.</p>\n\n<p>I am trying to replicate it in C++ and use ifstream for array of files and trying to read one line from a file a time like I am doing in C. However with ifstream I am unable to move ahead. </p>\n\n<p>I have ifstream files[] pointer from a function which would point me to first file</p>\n\n<p>Below Code reads one line from each file at a time and keeps looping </p>\n\n<pre><code>   char *filename[] = {\"mFile1.txt\", \"mFile2.txt\", \"mFile3.txt\", \"mFile4.txt\"};\n    char line[1000];\n    FILE *fp[count];\n    unsigned int loop_count;\n    const int num_file = count;\n    char **temp = filename;\n    FILE *ffinal = fopen(\"scores.txt\", \"ab+\");\n\n    for (loop_count = 0; loop_count &lt; count; loop_count++)\n    {\n        if ((fp[loop_count] = fopen(*temp,\"r\")) != NULL)\n        {\n           // printf(\"%s openend successfully \\n\",*temp);\n        }\n        else\n        {\n            printf(\"error file cannot be opened \\n\");\n            exit(1);\n        }\n        temp++;\n    }\n\n    do \n    {\n        for (loop_count = 0; loop_count &lt; num_file; loop_count++)\n        {\n            memset(line, 0, sizeof(line));\n            if (fgets(line, sizeof(line), fp[loop_count]) != NULL)\n            {\n</code></pre>\n\n<p>/*   --- Code in C++ where I get stuck with ifstream and getline */  it errors out with getline saying too few arguments </p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;new&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nifstream *OpenFiles(char * const fileNames[], size_t count);\n\nint main (void)\n{\n    char line[1000];\n    char * const fileNames[] = {\"abc.txt\", \"def.txt\", \"ghi.txt\"};\n    ifstream *pifstream = OpenFiles(fileNames, 3);\n\n    for (int i = 0; i &lt; 3; i++)\n    {\n        getline(pifstream[i], line);\n    }\n\n    return 0;\n}\n\nifstream *OpenFiles(char * const fileNames[], size_t count)\n{\n    ifstream *pifstream = new (nothrow) ifstream[count];\n    ifstream *preturn;\n    preturn = pifstream;\n    if (pifstream == NULL)\n    {\n        cerr &lt;&lt; \"error opening the file\";   \n    }\n\n\n    for (int elem = 0; elem &lt; count; elem++)\n    {\n        pifstream[elem].open(fileNames[elem]);\n        if (!pifstream)\n        {\n            cerr &lt;&lt; \"existing with error \";\n            exit(1);\n        }\n    }\n\n    return preturn;\n}\n</code></pre>\n"}, {"tags": ["c++", "file", "vector", "hidden"], "comments": [{"owner": {"reputation": 5158, "user_id": 1829930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d00937426fde9e00fe46a57043c00eeb?s=128&d=identicon&r=PG", "display_name": "Robin Krahl", "link": "https://stackoverflow.com/users/1829930/robin-krahl"}, "edited": false, "score": 0, "creation_date": 1440632230, "post_id": 32238368, "comment_id": 52358964, "body": "Have you tried debugging your code, i. e. checking whether the detection or the erasure does not work?"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1440632301, "post_id": 32238368, "comment_id": 52358987, "body": "<code>I still get &quot;..&quot; listed as a file</code> That&#180;s not a hidden file, and it&#180;s expected behaviour. Just filter &quot;..&quot; out by yourself (as well as &quot;.&quot;) (no, I don&#180;t mean anything starting with a point, but only the point itself)"}, {"owner": {"reputation": 103, "user_id": 4946555, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a6ee66251981471e141afeabbc4163f8?s=128&d=identicon&r=PG&f=1", "display_name": "penguin", "link": "https://stackoverflow.com/users/4946555/penguin"}, "edited": false, "score": 0, "creation_date": 1440632534, "post_id": 32238368, "comment_id": 52359050, "body": "The hidden files that I&#39;m talking about all begin with &#39;.&#39;, like &quot;.thumbs&quot;, &quot;.dsstore&quot;, or &quot;.bridge&quot;. I&#39;ve tried various ways of searching for the dot at the beginning of the filename, like using a char variable to search instead of a string, but none will delete all of the hidden files."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1440632595, "post_id": 32238368, "comment_id": 52359064, "body": "Rather than stuffing the hidden files into the vector and then taking them out, why not test sooner and not put them in in the first place? Also consider what happens to the for loop&#39;s exit condition if you remove the last item from the list.  Look into the <a href=\"https://en.wikipedia.org/wiki/Erase%E2%80%93remove_idiom\" rel=\"nofollow noreferrer\">Erase-Remove Idiom</a> while you&#39;re at it."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1440632636, "post_id": 32238368, "comment_id": 52359072, "body": "As someone else said already the point in the filename doesn&#180;t make anything hidden in Windows..."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1440632967, "post_id": 32238368, "comment_id": 52359151, "body": "Looked a bit deeper and see you&#39;re defending yourself from outrunning the end of the vector by restarting the search of the vector every time you remove an element. That&#39;s a pretty expensive solution."}], "answers": [{"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1440633481, "post_id": 32238526, "comment_id": 52359277, "body": "Fyi for the OP, this will exclude <i>all</i> folder names (i.e. subfolders), not just ones starting with <code>&#39;.&#39;</code>. If you want to keep subdir folders, excluding only aliases for <code>.</code> and <code>..</code>, this will still need to be tweaked."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1440634162, "post_id": 32238526, "comment_id": 52359459, "body": "@WhozCraig: I don&#39;t think the OP needs to worry about that, considering the original code was not even handling subfolders to begin with. The OP&#39;s description does say he only wanted filenames and nothing about recursing into subfolders."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1440634355, "post_id": 32238526, "comment_id": 52359507, "body": "Not sure what you mean by not handling subfolders. From the looks of that   <code>push_back</code>, <i>everything</i> returned from the FindFirst/FindNext loop was being shoved into the container, subdir names included. If I inferred this will not <i>recurse</i> into subfolders, that was not my intention. I was simply stating <i>immediate</i> subdir folder names will simply not be included in the list. That was all. Sorry if that wasn&#39;t clear."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 3, "last_activity_date": 1440633212, "creation_date": 1440633212, "answer_id": 32238526, "question_id": 32238368, "link": "https://stackoverflow.com/questions/32238368/how-to-delete-hidden-files-from-a-vector-of-file-names/32238526#32238526", "title": "How to delete hidden files from a vector of file names?", "body": "<p>You need to look at the file attributes while you are enumerating the files:</p>\n\n<pre><code>HANDLE handle = FindFirstFile(..., &amp;search_data);\nif (handle != NULL)\n{\n    do\n    {\n        // if not a directory, and not hidden...\n        if ((search_data.dwFileAttributes &amp; (FILE_ATTRIBUTE_DIRECTORY | FILE_ATTRIBUTE_HIDDEN)) == 0)\n        {\n            // add it to the list...\n            filenameList.push_back(search_data.cFileName);\n        }\n    }\n    while (FindNextFile(handle, &amp;search_data));\n    FindClose(handle);\n}\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 4946555, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a6ee66251981471e141afeabbc4163f8?s=128&d=identicon&r=PG&f=1", "display_name": "penguin", "link": "https://stackoverflow.com/users/4946555/penguin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 32238526, "answer_count": 1, "score": 0, "last_activity_date": 1440663414, "creation_date": 1440632054, "last_edit_date": 1440663414, "question_id": 32238368, "link": "https://stackoverflow.com/questions/32238368/how-to-delete-hidden-files-from-a-vector-of-file-names", "title": "How to delete hidden files from a vector of file names?", "body": "<p>In a program that I am writing, there is a function that takes all of the filenames from a specific directory and puts them into a vector so they can be used later in the program. </p>\n\n<p>However, this also grabs any hidden files that happen to be in the folder. I've tried to just have the program delete any files starting with a '.', but that has not worked on the folder that I was testing (I still get \"..\" listed as a file). </p>\n\n<p><strong><em>Here is the section of the code:</em></strong></p>\n\n<pre><code>while (handle != INVALID_HANDLE_VALUE)\n{\n     filenameList.push_back(search_data.cFileName);\n\n    if (FindNextFile(handle, &amp;search_data) == FALSE)\n        break;\n}\n\n    //removes a lot of hidden files from the file list\n    for (int i = 0; i &lt; filenameList.size(); i++)\n    {\n        string hiddenCheck = filenameList[i];\n\n        if (hiddenCheck[0] == '.') \n        {\n            filenameList.erase(filenameList.begin() + i);\n            i = 0;\n        }\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1440632116, "post_id": 32238354, "comment_id": 52358933, "body": "Don&#180;t understand most of your post, but how about <code>protected</code>?"}, {"owner": {"reputation": 642, "user_id": 803017, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e585168fc21084f48aeb33e76f21d5a3?s=128&d=identicon&r=PG&f=1", "display_name": "7VoltCrayon", "link": "https://stackoverflow.com/users/803017/7voltcrayon"}, "edited": false, "score": 1, "creation_date": 1440632122, "post_id": 32238354, "comment_id": 52358936, "body": "I suggest you read up on some OOP concepts, there are several good online resources available freely for the same. Even if someone answers your question here it will be much more beneficial in the long run to understand OOP and what you&#39;re doing."}, {"owner": {"reputation": 2838, "user_id": 3614521, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AR81q.png?s=128&g=1", "display_name": "Mephy", "link": "https://stackoverflow.com/users/3614521/mephy"}, "edited": false, "score": 5, "creation_date": 1440632133, "post_id": 32238354, "comment_id": 52358940, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/860339/difference-between-private-public-and-protected-inheritance\">Difference between private, public, and protected inheritance</a>"}, {"owner": {"reputation": 1, "user_id": 5270607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f80b16e222982da2faec020ab3f38ee?s=128&d=identicon&r=PG&f=1", "display_name": "Syed Uzair Hijazi", "link": "https://stackoverflow.com/users/5270607/syed-uzair-hijazi"}, "edited": false, "score": 0, "creation_date": 1440632234, "post_id": 32238354, "comment_id": 52358967, "body": "Can say protected. Both are same, are not they?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4992621"}, "edited": false, "score": 0, "creation_date": 1440632415, "post_id": 32238354, "comment_id": 52359011, "body": "Could you rephrase the question (it is not clear what, exactly you intended to ask)?"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1440632779, "post_id": 32238354, "comment_id": 52359100, "body": "@SyedUzairHijazi No, protected and private are not the same. Not at all."}, {"owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1440634012, "post_id": 32238354, "comment_id": 52359414, "body": "My gut feeling is that data (like day, month and year) should be private, and they should be accessible via public methods (basic set/get, and more complex ones). Of course, if you expect to have derived classes, protected can also make a lot of sense. It&#39;s really hard to tell without a full description of the requirements."}], "answers": [{"comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1440632900, "post_id": 32238454, "comment_id": 52359127, "body": "Meh, overgeneralization IMO. Get your class design right. Many uses of getters and setters, especially in school/uni environments, should have been aggregates."}, {"owner": {"reputation": 829, "user_id": 1894478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/844dae39b47a501f7ca3d88cbe6f1909?s=128&d=identicon&r=PG", "display_name": "EvgeniyZh", "link": "https://stackoverflow.com/users/1894478/evgeniyzh"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1440636390, "post_id": 32238454, "comment_id": 52359953, "body": "@BaummitAugen if you want public members, use struct, not class."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1440637687, "post_id": 32238454, "comment_id": 52360192, "body": "That is correct (well you can also use <code>class {public:...</code>, does not actually change anything, but sure, <code>struct</code> is more appropriate for aggregates). But what does this have to do with your way to imprecise getter/setter advice?"}], "tags": [], "owner": {"reputation": 829, "user_id": 1894478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/844dae39b47a501f7ca3d88cbe6f1909?s=128&d=identicon&r=PG", "display_name": "EvgeniyZh", "link": "https://stackoverflow.com/users/1894478/evgeniyzh"}, "is_accepted": false, "score": -2, "last_activity_date": 1440632648, "creation_date": 1440632648, "answer_id": 32238454, "question_id": 32238354, "link": "https://stackoverflow.com/questions/32238354/whether-the-elements-of-a-class-be-added-in-public-or-private/32238454#32238454", "title": "Whether the elements of a class be added in public or private?", "body": "<p>Good practice is to make class members <em>protected</em> or <em>private</em>. That's implements encapsulation, by hiding implementation from user. </p>\n\n<p>Then, if you need to get/set variable from outside, you create getter and setter function. </p>\n"}], "owner": {"reputation": 1, "user_id": 5270607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f80b16e222982da2faec020ab3f38ee?s=128&d=identicon&r=PG&f=1", "display_name": "Syed Uzair Hijazi", "link": "https://stackoverflow.com/users/5270607/syed-uzair-hijazi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1440632648, "creation_date": 1440631961, "question_id": 32238354, "link": "https://stackoverflow.com/questions/32238354/whether-the-elements-of-a-class-be-added-in-public-or-private", "title": "Whether the elements of a class be added in public or private?", "body": "<p>I have to prepare a Calendar by using Constructor (Class), adding more conditions for date after 15 days, 1 month later and next year same date. I just wanna confirm, how to define my day, month year, in a class, whether it should be in public or private ???</p>\n"}, {"tags": ["c++", "sockets", "ssl", "openssl", "server"], "comments": [{"owner": {"reputation": 187, "user_id": 3793527, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a462bbd8a2bccc5b00dedb3e1ed95af4?s=128&d=identicon&r=PG&f=1", "display_name": "Poehli", "link": "https://stackoverflow.com/users/3793527/poehli"}, "edited": false, "score": 0, "creation_date": 1440634212, "post_id": 32238293, "comment_id": 52359468, "body": "No sadly there is no -1, that the point. That&#39;s just a temporary printout, which will be removed, as soon as I get the error return. Crashing means crashing. The Server just stops. Like a segfault, but without displaying it."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1440634326, "post_id": 32238293, "comment_id": 52359502, "body": "A crash is an unexpected exit. Is that what you mean? It seems far more likely to me that you don&#39;t have a crash but an infinite loop. See my answer. NB Error-reporting code is never &#39;temporary&#39;, and must always show the actual error, not just the -1 symptom."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1440635391, "post_id": 32238293, "comment_id": 52359721, "body": "&quot;Bet&#228;tigen Sie die &lt;RETURN&gt; Taste, um das Fenster zu schlie&#223;en...&quot;. Translation please. This site is conducted in English."}, {"owner": {"reputation": 187, "user_id": 3793527, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a462bbd8a2bccc5b00dedb3e1ed95af4?s=128&d=identicon&r=PG&f=1", "display_name": "Poehli", "link": "https://stackoverflow.com/users/3793527/poehli"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1440636223, "post_id": 32238293, "comment_id": 52359920, "body": "sorry, just means &quot;hit &lt;return&gt; to close window&quot;, it&#39;s QtCreator output ;)"}, {"owner": {"reputation": 3631, "user_id": 1094101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9afb6bd332cc5182d7c6c75c88123cbe?s=128&d=identicon&r=PG&f=1", "display_name": "Non-maskable Interrupt", "link": "https://stackoverflow.com/users/1094101/non-maskable-interrupt"}, "edited": false, "score": 1, "creation_date": 1440636421, "post_id": 32238293, "comment_id": 52359957, "body": "Is it broken pipe? have you setup your signal handler?"}, {"owner": {"reputation": 187, "user_id": 3793527, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a462bbd8a2bccc5b00dedb3e1ed95af4?s=128&d=identicon&r=PG&f=1", "display_name": "Poehli", "link": "https://stackoverflow.com/users/3793527/poehli"}, "reply_to_user": {"reputation": 3631, "user_id": 1094101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9afb6bd332cc5182d7c6c75c88123cbe?s=128&d=identicon&r=PG&f=1", "display_name": "Non-maskable Interrupt", "link": "https://stackoverflow.com/users/1094101/non-maskable-interrupt"}, "edited": false, "score": 0, "creation_date": 1440674318, "post_id": 32238293, "comment_id": 52376284, "body": "@Calvin: Perfect! This was the problem. I just added signal(SIGPIPE, SIG_IGN) and it worked perfectly. Didn&#39;t thought, that this was the problem."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1440757466, "post_id": 32238293, "comment_id": 52416261, "body": "You don&#39;t need to &#39;cache errors appropriately&#39;, or indeed at all, but you do need to <i>catch</i> them."}], "answers": [{"comments": [{"owner": {"reputation": 187, "user_id": 3793527, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a462bbd8a2bccc5b00dedb3e1ed95af4?s=128&d=identicon&r=PG&f=1", "display_name": "Poehli", "link": "https://stackoverflow.com/users/3793527/poehli"}, "edited": false, "score": 0, "creation_date": 1440635552, "post_id": 32238533, "comment_id": 52359763, "body": "Yes that&#39;s definitely one problem. Stupid me :D"}], "tags": [], "owner": {"reputation": 1639, "user_id": 2073349, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0266d3aafa1813f794a5b71058d5cd27?s=128&d=identicon&r=PG", "display_name": "Ritesh", "link": "https://stackoverflow.com/users/2073349/ritesh"}, "is_accepted": false, "score": 1, "last_activity_date": 1440634209, "last_edit_date": 1440634209, "creation_date": 1440633257, "answer_id": 32238533, "question_id": 32238293, "link": "https://stackoverflow.com/questions/32238293/handeling-ssl-client-not-reading-all-data/32238533#32238533", "title": "Handeling SSL Client not reading all data", "body": "<p>I think your problem is </p>\n\n<p>rest_size -= bytes_sent;</p>\n\n<p>You should do rest_size -= tmp_bytes_sent;</p>\n\n<p>Also </p>\n\n<pre><code>if (tmp_bytes_sent &lt; 0){\n            std::cout &lt;&lt; tmp_bytes_sent &lt;&lt; std::endl;\n           //its an error condition\n          return bytes_sent;\n        }\n</code></pre>\n\n<p>I dont know whether this will fix the issue, but the code you pasted has the above mentioned issues</p>\n"}, {"comments": [{"owner": {"reputation": 187, "user_id": 3793527, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a462bbd8a2bccc5b00dedb3e1ed95af4?s=128&d=identicon&r=PG&f=1", "display_name": "Poehli", "link": "https://stackoverflow.com/users/3793527/poehli"}, "edited": false, "score": 0, "creation_date": 1440635026, "post_id": 32238667, "comment_id": 52359649, "body": "Since <code>tmp_bytes_sent</code> never went negative, I didn&#39;t see the point of doing that. See update of the question with the outputs I added."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 187, "user_id": 3793527, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a462bbd8a2bccc5b00dedb3e1ed95af4?s=128&d=identicon&r=PG&f=1", "display_name": "Poehli", "link": "https://stackoverflow.com/users/3793527/poehli"}, "edited": false, "score": 0, "creation_date": 1440635350, "post_id": 32238667, "comment_id": 52359709, "body": "You may not see the point of calculating <code>rest_size</code> correctly, but I do."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1440635662, "post_id": 32238667, "comment_id": 52359785, "body": "Your information about what to do when <code>SSL_write()</code> returns -1 is totally incorrect. For just one way this can go wrong, imagine if <code>SSL_write()</code> returns <code>-1</code> with <code>EAGAIN</code> because the server needs to <i>read</i> some renegotiation information from the other side before it can encrypt and send. The socket will already be writable, so waiting for it to become writable is incorrect. You should <i>never</i> try to &quot;look through&quot; the SSL black box and infer what has to happen on the socket from what has to happen on the SSL connection."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1440635726, "post_id": 32238667, "comment_id": 52359805, "body": "@DavidSchwartz That would cause <code>SSL_ERROR_WANT_READ,</code> not <code>EAGAIN.</code> <code>EAGAIN</code> comes from the operating system because the socket send buffer is full. It has nothing to do with SSL."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1440636086, "post_id": 32238667, "comment_id": 52359889, "body": "@DavidSchwartz Why? The only issue is that the socket send buffer is full. The only solution to that is to <code>select()</code> etc. SSL doesn&#39;t have anything to do with it."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1440636099, "post_id": 32238667, "comment_id": 52359891, "body": "@EJP <code>EAGAIN</code> can come from the operating system because the socket send buffer is full or because the socket receive buffer is empty. That&#39;s why you have to call <code>SSL_get_error</code> to get the status of the SSL connection, which may be <code>SSL_ERROR_WANT_READ</code>. As I said, acting on the basis of <code>errno</code> after <code>SSL_write</code> is wrong because you can&#39;t tell."}, {"owner": {"reputation": 187, "user_id": 3793527, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a462bbd8a2bccc5b00dedb3e1ed95af4?s=128&d=identicon&r=PG&f=1", "display_name": "Poehli", "link": "https://stackoverflow.com/users/3793527/poehli"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1440636101, "post_id": 32238667, "comment_id": 52359892, "body": "@DavidSchwartz: You are right IF and only if it would return -1. I just wanted to see, if it enters the errorhandeling part at any time, of cause I don&#39;t want to look into a magic glass ball to solve any error, but before I get to analyse it, I need this error ;)"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1440636136, "post_id": 32238667, "comment_id": 52359905, "body": "@EJP The receive buffer could be empty when the SSL engine went to read renegotation data, setting <code>errno</code> to <code>EAGAIN</code>. You have no way to know what the SSL engine needs in order to make forward progress until you ask it."}, {"owner": {"reputation": 187, "user_id": 3793527, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a462bbd8a2bccc5b00dedb3e1ed95af4?s=128&d=identicon&r=PG&f=1", "display_name": "Poehli", "link": "https://stackoverflow.com/users/3793527/poehli"}, "edited": false, "score": 0, "creation_date": 1440637322, "post_id": 32238667, "comment_id": 52360132, "body": "Another update to the question, I added the new output and 3 lines of error printing, same reslult.     Also added some new information."}], "tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 1, "last_activity_date": 1440636271, "last_edit_date": 1440636271, "creation_date": 1440634215, "answer_id": 32238667, "question_id": 32238293, "link": "https://stackoverflow.com/questions/32238293/handeling-ssl-client-not-reading-all-data/32238667#32238667", "title": "Handeling SSL Client not reading all data", "body": "<blockquote>\n  <p>When I write more data, than the client reads, my server crashes.</p>\n</blockquote>\n\n<p>No it doesn't, unless you've violently miscoded something else that you haven't posted here. It either loops forever or it gets an error: probably <code>ECONNRESET</code>, which means the client has behaved as you described, and you've detected it, so you should close the connection and forget about him. Instead of which, you are just looping forever, trying to send the data to a broken connection, which can never happen.</p>\n\n<p>And when you get an error, there's not much use in just printing a -1. You should print the error, with <code>perror()</code> or <code>errno</code> or <code>strerror()</code>.</p>\n\n<p>Speaking of looping forever, don't loop like this. <code>SSL_write()</code> can  return 0, which you aren't handling at all: this will cause an infinite loop. See also David Schwartz's comments below.</p>\n\n<p>NB you should definitely use the second approach. OpenSSL needs to know that the socket is in non-blocking mode.</p>\n\n<blockquote>\n  <p>Both of which have their downsides</p>\n</blockquote>\n\n<p>Such as?</p>\n\n<p>And as noted in the other answer,</p>\n\n<pre><code>rest_size -= bytes_sent;\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>rest_size -= tmp_bytes_sent;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 187, "user_id": 3793527, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a462bbd8a2bccc5b00dedb3e1ed95af4?s=128&d=identicon&r=PG&f=1", "display_name": "Poehli", "link": "https://stackoverflow.com/users/3793527/poehli"}, "edited": false, "score": 0, "creation_date": 1440669805, "post_id": 32241576, "comment_id": 52373261, "body": "Thanks, for the example, but for some reason my code still doesn&#39;t work as expected. <code>SSL_write</code> does NOT return anything besides send data. It runs the loop a few times, and then just crashes the application. This is my major problem and I have no idea how to fix that."}], "tags": [], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "is_accepted": false, "score": 2, "last_activity_date": 1440655357, "last_edit_date": 1440655357, "creation_date": 1440654561, "answer_id": 32241576, "question_id": 32238293, "link": "https://stackoverflow.com/questions/32238293/handeling-ssl-client-not-reading-all-data/32241576#32241576", "title": "Handeling SSL Client not reading all data", "body": "<p>First, a warning:  non-blocking I/O over SSL is a rather baroque API, and it's difficult to use correctly.  In particular, the SSL layer sometimes needs to read internal data before it can write user data (or vice versa), and the caller's code is expected to be able to handle that based on the error-codes feedback it gets from the SSL calls it makes.  It can be made to work correctly, but it's not easy or obvious -- you are <em>de facto</em> required to implement a state machine in your code that echoes the state machine inside the SSL library.</p>\n\n<p>Below is a simplified version of the logic that is required (it's extracted from the Write() method in <a href=\"https://public.msli.com/lcs/muscle/muscle/dataio/SSLSocketDataIO.cpp\" rel=\"nofollow\">this file</a> which is part of <a href=\"https://public.msli.com/lcs/muscle/\" rel=\"nofollow\">this library</a>, in case you want to see a complete, working implementation)</p>\n\n<pre><code>enum {\n   SSL_STATE_READ_WANTS_READABLE_SOCKET   = 0x01,\n   SSL_STATE_READ_WANTS_WRITEABLE_SOCKET  = 0x02,\n   SSL_STATE_WRITE_WANTS_READABLE_SOCKET  = 0x04,\n   SSL_STATE_WRITE_WANTS_WRITEABLE_SOCKET = 0x08\n};\n\n// a bit-chord of SSL_STATE_* bits to keep track of what \n// the SSL layer needs us to do next before it can make more progress\nuint32_t _sslState = 0;\n\n// Note that this method returns the number of bytes sent, or -1\n// if there was a fatal error.  So if this method returns 0 that just\n// means that this function was not able to send any bytes at this time.\nint32_t SSLSocketDataIO :: Write(const void *buffer, uint32 size)\n{\n   int32_t bytes = SSL_write(_ssl, buffer, size);\n   if (bytes &gt; 0) \n   {\n      // SSL was able to send some bytes, so clear the relevant SSL-state-flags\n      _sslState &amp;= ~(SSL_STATE_WRITE_WANTS_READABLE_SOCKET | SSL_STATE_WRITE_WANTS_WRITEABLE_SOCKET);\n   }\n   else if (bytes == 0) \n   {\n      return -1;  // the SSL connection was closed, so return failure\n   }\n   else\n   {\n      // The SSL layer's internal needs aren't being met, so we now have to\n      // ask it what its problem is, then give it what it wants.  :P\n      int err = SSL_get_error(_ssl, bytes);\n      if (err == SSL_ERROR_WANT_READ)\n      {\n         // SSL can't write anything more until the socket becomes readable,\n         // so we need to go back to our event loop, wait until the\n         // socket select()'s as readable, and then call SSL_Write() again.\n         _sslState |=  SSL_STATE_WRITE_WANTS_READABLE_SOCKET;\n         _sslState &amp;= ~SSL_STATE_WRITE_WANTS_WRITEABLE_SOCKET;\n         bytes = 0;  // Tell the caller we weren't able to send anything yet\n      }\n      else if (err == SSL_ERROR_WANT_WRITE)\n      {\n         // SSL can't write anything more until the socket becomes writable,\n         // so we need to go back to our event loop, wait until the\n         // socket select()'s as writeable, and then call SSL_Write() again.\n         _sslState &amp;= ~SSL_STATE_WRITE_WANTS_READABLE_SOCKET;\n         _sslState |=  SSL_STATE_WRITE_WANTS_WRITEABLE_SOCKET;\n         bytes = 0;  // Tell the caller we weren't able to send anything yet\n      }\n      else\n      {\n         // SSL had some other problem I don't know how to deal with,\n         // so just print some debug output and then return failure.\n         fprintf(stderr,\"SSL_write() ERROR!\");\n         ERR_print_errors_fp(stderr);\n      }\n   }\n   return bytes;  // Returns the number of bytes we actually sent\n}\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 3793527, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a462bbd8a2bccc5b00dedb3e1ed95af4?s=128&d=identicon&r=PG&f=1", "display_name": "Poehli", "link": "https://stackoverflow.com/users/3793527/poehli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 757, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1440670648, "creation_date": 1440631591, "last_edit_date": 1440670648, "question_id": 32238293, "link": "https://stackoverflow.com/questions/32238293/handeling-ssl-client-not-reading-all-data", "title": "Handeling SSL Client not reading all data", "body": "<p>I am trying to accomplish, that my ssl server does not break down, <s>when a client does not collect all data. </s> (fixed with one minor bug)<br>\nwhen the data is too long. </p>\n\n<p>Basically what I'm trying to do is write in a non-blocking way. <em>For that I found two different approaches:</em>   </p>\n\n<p><strong>First approach</strong><br>\nusing this code</p>\n\n<pre><code>int flags = fcntl(ret.fdsock, F_GETFL, 0);\nfcntl(ret.fdsock, F_SETFL, flags | O_NONBLOCK);\n</code></pre>\n\n<p>and creating the ssl connection with it</p>\n\n<p><strong>Second approach:</strong><br>\nDoing this directly after creating the SSL Object using <code>SSL_new(ctx)</code></p>\n\n<pre><code>BIO *sock = BIO_new_socket(ret.fdsock, BIO_NOCLOSE);\nBIO_set_nbio(sock, 1);\nSSL_set_bio(client, sock, sock);\n</code></pre>\n\n<p>Both of which have their downsides, but neither of which helps solving the problem.<br>\nThe first approach seems to read in a unblocking way just fine, but when I write more data, than the client reads, my server crashes.<br>\nThe second approach does not seem to do anything, so my guess is, that I did something wrong or did not understand what a BIO actually does.   </p>\n\n<p>For more Information here is how the server writes to the client:</p>\n\n<pre><code>int SSLConnection::send(char* msg, const int size){\n    int rest_size = size;\n    int bytes_sent = 0;\n    char* begin = msg;\n    std::cout &lt;&lt; \"expected bytes to send: \" &lt;&lt; size &lt;&lt; std::endl;\n    while(rest_size &gt; 0) {\n        int tmp_bytes_sent = SSL_write(connection, begin, rest_size);\n        std::cout &lt;&lt; \"any error     : \" &lt;&lt; ERR_get_error()&lt;&lt; std::endl;\n        std::cout &lt;&lt; \"tmp_bytes_sent: \" &lt;&lt; tmp_bytes_sent &lt;&lt; std::endl;\n        if (tmp_bytes_sent &lt; 0){\n            std::cout &lt;&lt; tmp_bytes_sent &lt;&lt; std::endl;\n            std::cout &lt;&lt; \"ssl error     : \" &lt;&lt; SSL_get_error(this-&gt;connection, tmp_bytes_sent)&lt;&lt; std::endl;\n        } else {\n            bytes_sent += tmp_bytes_sent;\n            rest_size -= tmp_bytes_sent;\n            begin = msg+bytes_sent;\n        }\n    }\n    return bytes_sent;\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>expected bytes to send: 78888890\nBet\u00e4tigen Sie die &lt;RETURN&gt; Taste, um das Fenster zu schlie\u00dfen...\n(means: hit &lt;return&gt; to close window)\n</code></pre>\n\n<p><strong><em>EDIT:</em></strong> After people said, that I need to cache errors appropriate, here is my new code:</p>\n\n<p><strong>Setup:</strong></p>\n\n<pre><code>connection = SSL_new(ctx);\nif (connection){\n    BIO * sbio = BIO_new_socket(ret.fdsock, BIO_NOCLOSE);\n    if (sbio) {\n        BIO_set_nbio(sbio, false);\n        SSL_set_bio(connection, sbio, sbio);\n        SSL_set_accept_state(connection);\n    } else {\n        std::cout &lt;&lt; \"Bio is null\" &lt;&lt; std::endl;\n    }\n} else {\n    std::cout &lt;&lt; \"client is null\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p><strong>Sending:</strong> </p>\n\n<pre><code>int SSLConnection::send(char* msg, const int size){\n    if(connection == NULL) {\n        std::cout &lt;&lt; \"ERR: Connection is NULL\" &lt;&lt; std::endl;\n        return -1;\n    }\n    int rest_size = size;\n    int bytes_sent = 0;\n    char* begin = msg;\n    std::cout &lt;&lt; \"expected bytes to send: \" &lt;&lt; size &lt;&lt; std::endl;\n    while(rest_size &gt; 0) {\n        int tmp_bytes_sent = SSL_write(connection, begin, rest_size);\n        std::cout &lt;&lt; \"any error     : \" &lt;&lt; ERR_get_error()&lt;&lt; std::endl;\n        std::cout &lt;&lt; \"tmp_bytes_sent: \" &lt;&lt; tmp_bytes_sent &lt;&lt; std::endl;\n        if (tmp_bytes_sent &lt; 0){\n            std::cout &lt;&lt; tmp_bytes_sent &lt;&lt; std::endl;\n            std::cout &lt;&lt; \"ssl error     : \" &lt;&lt; SSL_get_error(this-&gt;connection, tmp_bytes_sent)&lt;&lt; std::endl;\n            break;\n        } else if (tmp_bytes_sent == 0){\n            std::cout &lt;&lt; \"tmp_bytes are 0\" &lt;&lt; std::endl;\n            break;\n        } else {\n            bytes_sent += tmp_bytes_sent;\n            rest_size -= tmp_bytes_sent;\n            begin = msg+bytes_sent;\n        }\n    }\n\n    return bytes_sent;\n}\n</code></pre>\n\n<p><em>Using a client, that fetches 60 bytes, here is the output:</em></p>\n\n<p><strong>Output writing 1,000,000 Bytes:</strong></p>\n\n<pre><code>expected bytes to send: 1000000\nany error     : 0\ntmp_bytes_sent: 16384\nany error     : 0\ntmp_bytes_sent: 16384\nBet\u00e4tigen Sie die &lt;RETURN&gt; Taste, um das Fenster zu schlie\u00dfen...\n(translates to: hit &lt;RETURN&gt; to close window)\n</code></pre>\n\n<p><strong>Output writing 1,000 bytes:</strong></p>\n\n<pre><code>expected bytes to send: 1000\nany error     : 0\ntmp_bytes_sent: 1000\nconnection closed  &lt;- expected output\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "macos"], "answers": [{"comments": [{"owner": {"reputation": 703, "user_id": 5126079, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aeabf983f8982e3bbe0bd68dd9eadbc1?s=128&d=identicon&r=PG&f=1", "display_name": "Galaxy", "link": "https://stackoverflow.com/users/5126079/galaxy"}, "edited": false, "score": 0, "creation_date": 1440637946, "post_id": 32238306, "comment_id": 52360248, "body": "Yes, I should add up tv_sec and tv_usec to get the right time measure. Thanks~"}], "tags": [], "owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "is_accepted": true, "score": 3, "last_activity_date": 1440631695, "creation_date": 1440631695, "answer_id": 32238306, "question_id": 32238259, "link": "https://stackoverflow.com/questions/32238259/how-to-measure-time-cost-of-multithreading-program-on-mac-os-using-c/32238306#32238306", "title": "How to measure time cost of multithreading program on Mac OS using C++?", "body": "<p>Each of the values is looping - when msecs gets to 1000, secs is incremented and msecs is set back to 0. When secs hits 60, mins is incremented and secs gets set back to 0.</p>\n\n<p>If you are trying to measure time this way, you need to take all the fields bigger than your required minimum resolution into account.</p>\n"}, {"comments": [{"owner": {"reputation": 703, "user_id": 5126079, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aeabf983f8982e3bbe0bd68dd9eadbc1?s=128&d=identicon&r=PG&f=1", "display_name": "Galaxy", "link": "https://stackoverflow.com/users/5126079/galaxy"}, "edited": false, "score": 0, "creation_date": 1440637719, "post_id": 32238328, "comment_id": 52360199, "body": "Yes, you&#39;re right. The mistake I made is to consider them as two different expressions using two units. Thus what I should do is to add up these two parts."}], "tags": [], "owner": {"reputation": 83109, "user_id": 1312143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d64f50f989e564c337a8a8bd653b8e6?s=128&d=identicon&r=PG", "display_name": "Ken Thomases", "link": "https://stackoverflow.com/users/1312143/ken-thomases"}, "is_accepted": false, "score": 1, "last_activity_date": 1440631833, "creation_date": 1440631833, "answer_id": 32238328, "question_id": 32238259, "link": "https://stackoverflow.com/questions/32238259/how-to-measure-time-cost-of-multithreading-program-on-mac-os-using-c/32238328#32238328", "title": "How to measure time cost of multithreading program on Mac OS using C++?", "body": "<p><code>struct timeval</code> has two fields, <code>tv_sec</code> and <code>tv_usec</code>. You're ignoring <code>tv_sec</code>, thereby throwing away the most significant part of the time.</p>\n"}, {"comments": [{"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "edited": false, "score": 0, "creation_date": 1440632796, "post_id": 32238446, "comment_id": 52359103, "body": "Also, just as a side note - you&#39;re not using multithreading <i>yet</i> - it&#39;s still a single-threaded application."}, {"owner": {"reputation": 703, "user_id": 5126079, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aeabf983f8982e3bbe0bd68dd9eadbc1?s=128&d=identicon&r=PG&f=1", "display_name": "Galaxy", "link": "https://stackoverflow.com/users/5126079/galaxy"}, "edited": false, "score": 0, "creation_date": 1440638586, "post_id": 32238446, "comment_id": 52360389, "body": "Thank you for your great answer. The ouput should slightly longer than the sleep time. I&#39;m now just testing the timer, and then use it to measure the time cost of my multithreading program."}, {"owner": {"reputation": 703, "user_id": 5126079, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aeabf983f8982e3bbe0bd68dd9eadbc1?s=128&d=identicon&r=PG&f=1", "display_name": "Galaxy", "link": "https://stackoverflow.com/users/5126079/galaxy"}, "edited": false, "score": 0, "creation_date": 1440639211, "post_id": 32238446, "comment_id": 52360537, "body": "As I tested just now, it cost the least time when I set the number of threads equal to the number of CPU cores. According to your experience, is that reasonable?"}, {"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "reply_to_user": {"reputation": 703, "user_id": 5126079, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aeabf983f8982e3bbe0bd68dd9eadbc1?s=128&d=identicon&r=PG&f=1", "display_name": "Galaxy", "link": "https://stackoverflow.com/users/5126079/galaxy"}, "edited": false, "score": 0, "creation_date": 1440639358, "post_id": 32238446, "comment_id": 52360570, "body": "@Galaxy That sounds more reasonable than anything. Oversubscription is no joke - thread switches are cheap-ish, but not free so there&#39;s performance degradation <i>if</i> all of the threads are busy."}], "tags": [], "owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "is_accepted": false, "score": 1, "last_activity_date": 1440632626, "creation_date": 1440632626, "answer_id": 32238446, "question_id": 32238259, "link": "https://stackoverflow.com/questions/32238259/how-to-measure-time-cost-of-multithreading-program-on-mac-os-using-c/32238446#32238446", "title": "How to measure time cost of multithreading program on Mac OS using C++?", "body": "<p>The best solution is to use the <code>&lt;chrono&gt;</code> functionality (that of course implies that you're using a c++11-enabled compiler).</p>\n\n<p>Then you code might look like:</p>\n\n<pre><code> #include &lt;iostream&gt;\n\n #include &lt;chrono&gt;\n #include &lt;thread&gt;\n\n using namespace std;\n using namespace std::chrono;\n\n int main()\n {\n     auto start = high_resolution_clock::now();\n\n     std::this_thread::sleep_for(10s); //sleep for 10 sec\n\n     cout &lt;&lt; duration_cast&lt;milliseconds&gt;(high_resolution_clock::now() - start).count() &lt;&lt; \"ms\\n\";\n\n     return 0;\n\n }\n</code></pre>\n\n<p>Note that I'm also using neat chrono literals to specify <code>10s</code>, which is c++14 feature. If it's not available, just use <code>seconds(10)</code> instead.</p>\n\n<p>Note, however, that the output is not guaranteed to be \"10000ms\" as the OS is allowed to suspend the thread for longer - see <a href=\"http://en.cppreference.com/w/cpp/thread/sleep_for\" rel=\"nofollow\">here</a> (unistd one also doesn't guarantee that).</p>\n\n<p>Cheers, \n   Rostislav.</p>\n"}], "owner": {"reputation": 703, "user_id": 5126079, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aeabf983f8982e3bbe0bd68dd9eadbc1?s=128&d=identicon&r=PG&f=1", "display_name": "Galaxy", "link": "https://stackoverflow.com/users/5126079/galaxy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "accepted_answer_id": 32238306, "answer_count": 3, "score": 2, "last_activity_date": 1440632626, "creation_date": 1440631384, "last_edit_date": 1440631755, "question_id": 32238259, "link": "https://stackoverflow.com/questions/32238259/how-to-measure-time-cost-of-multithreading-program-on-mac-os-using-c", "title": "How to measure time cost of multithreading program on Mac OS using C++?", "body": "<p>I'm writing a multithreading program on Mac OS using C++, and I need to measure time cost of it.</p>\n\n<p>Here I found some functions maybe useful to measure time:</p>\n\n<ol>\n<li>clock(): for a multithreading program, it's not accurate.</li>\n<li>time(): it can measure time but only have second precision.</li>\n<li>gettimeofday(): I wrote a sample to test it, but got wrong time measurement.</li>\n</ol>\n\n<p><br/></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\n\nusing namespace std;\n\nint main()\n{\n    timeval start, finish;\n    gettimeofday(&amp;start,NULL);\n\n    sleep(10); //sleep for 10 sec\n\n    gettimeofday(&amp;finish,NULL);\n\n    cout&lt;&lt;(finish.tv_usec-start.tv_usec)/1000.0&lt;&lt;\"ms\"&lt;&lt;endl;\n\n\n    return 0;\n\n}\n</code></pre>\n\n<p>The output is just few ms, I don't know why.</p>\n\n<p>Does anyone know any other function to measure time on Mac OS?</p>\n"}, {"tags": ["c++", "performance", "computational-geometry", "cgal"], "comments": [{"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 1, "creation_date": 1440630434, "post_id": 32238084, "comment_id": 52358465, "body": "What&#39;s the number of vertices in your triangulation? How many query points do you need to locate in the triangulation?"}, {"owner": {"reputation": 767, "user_id": 1120229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0c29fd8d37549e3e637bb7cd81a9090a?s=128&d=identicon&r=PG", "display_name": "MVTC", "link": "https://stackoverflow.com/users/1120229/mvtc"}, "reply_to_user": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 1, "creation_date": 1440630792, "post_id": 32238084, "comment_id": 52358564, "body": "There are about 1 million mesh points, and I need to do about 2 billion queries."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 5, "creation_date": 1440641738, "post_id": 32238084, "comment_id": 52361061, "body": "If you know the queries in advance, it helps to sort them (say along a space-filling curve, CGAL has functions for that) and then do the point location queries in this order, passing each query the previous location as a starting point. This way most queries will only check that the starting point is already the right triangle, and others will have at most 1 or 2 steps to walk to reach it."}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1440747622, "post_id": 32238084, "comment_id": 52410462, "body": "If your query points are on a regular grid, a fast approach is by triangle filling: create an image where a pixel corresponds to a query point, and fill every triangle using the triangle ID as the fill color. This will make the queries constant-time. (This may be impractical in your case for such a big number of queries - unless you can work by sub-windows.)"}], "answers": [{"comments": [{"owner": {"reputation": 767, "user_id": 1120229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0c29fd8d37549e3e637bb7cd81a9090a?s=128&d=identicon&r=PG", "display_name": "MVTC", "link": "https://stackoverflow.com/users/1120229/mvtc"}, "edited": false, "score": 0, "creation_date": 1440712041, "post_id": 32239070, "comment_id": 52399856, "body": "I switched over to the hierarchical triangulation, but it only resulted in a slight performance increase.  As a test I tried naively iterating through the entire set of mesh nodes to find the closest one and return it&#39;s value.  With this method, the whole task completes about 10 times faster than using a CGAL triangulation."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "reply_to_user": {"reputation": 767, "user_id": 1120229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0c29fd8d37549e3e637bb7cd81a9090a?s=128&d=identicon&r=PG", "display_name": "MVTC", "link": "https://stackoverflow.com/users/1120229/mvtc"}, "edited": false, "score": 0, "creation_date": 1440746207, "post_id": 32239070, "comment_id": 52409661, "body": "@MVTC That sounds strange, but I don&#39;t quite understand what you are comparing. Do you have a benchmark you could share that does only the point location and shows naive iteration to be faster than triangulation&#39;s methods?"}, {"owner": {"reputation": 4194, "user_id": 387778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2e50475f3273d6676c39d0d2fb5fe3e?s=128&d=identicon&r=PG", "display_name": "Joseph O&#39;Rourke", "link": "https://stackoverflow.com/users/387778/joseph-orourke"}, "reply_to_user": {"reputation": 767, "user_id": 1120229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0c29fd8d37549e3e637bb7cd81a9090a?s=128&d=identicon&r=PG", "display_name": "MVTC", "link": "https://stackoverflow.com/users/1120229/mvtc"}, "edited": false, "score": 0, "creation_date": 1440763372, "post_id": 32239070, "comment_id": 52419771, "body": "@MVTC: It is strange that a brute-force linear search outperforms a logarithmic search. I assume you are setting aside preprocessing and only looking at query times?"}, {"owner": {"reputation": 767, "user_id": 1120229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0c29fd8d37549e3e637bb7cd81a9090a?s=128&d=identicon&r=PG", "display_name": "MVTC", "link": "https://stackoverflow.com/users/1120229/mvtc"}, "edited": false, "score": 1, "creation_date": 1440801547, "post_id": 32239070, "comment_id": 52440138, "body": "Preprocessing is set aside.  Also, using the locate function to find the face enclosing the point is also much much faster than the natural neighbours function in my application, which is strange because the natural_neighbors_coord_2 function seams to just uses locate internally.  The time differences are so vast that it would seam something must be wrong with the triangulation? I will need more time to investigate what&#39;s going on.  I&#39;ll mark this as the accepted answer, and then give an update if I figure out why this is happening."}], "tags": [], "owner": {"reputation": 4194, "user_id": 387778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2e50475f3273d6676c39d0d2fb5fe3e?s=128&d=identicon&r=PG", "display_name": "Joseph O&#39;Rourke", "link": "https://stackoverflow.com/users/387778/joseph-orourke"}, "is_accepted": true, "score": 3, "last_activity_date": 1440637487, "creation_date": 1440637487, "answer_id": 32239070, "question_id": 32238084, "link": "https://stackoverflow.com/questions/32238084/fast-way-to-find-the-triangle-inside-a-mesh-that-encloses-a-point/32239070#32239070", "title": "Fast way to find the triangle inside a mesh that encloses a point", "body": "<p>CGAL contains an implementation of a\n<a href=\"http://doc.cgal.org/latest/Triangulation_2/index.html#Section_2D_Triangulations_Hierarchy\" rel=\"nofollow noreferrer\">Triangulation Hierarchy</a> which</p>\n\n<blockquote>\n  <p>implements a triangulation augmented with a data structure to efficiently answer point location queries. [...] the data structure remains small and achieves fast point location queries on real data.</p>\n</blockquote>\n\n<p>Its performance is optimal for Delaunay triangulations.\n<hr />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \n<a href=\"https://i.stack.imgur.com/OQEAU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OQEAU.png\" alt=\"Triangulation\"></a>\n<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \n<sup>\nFig. 36.8\n</sup></p>\n\n<hr />\n"}, {"tags": [], "owner": {"reputation": 2084, "user_id": 4436434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76Myg.png?s=128&g=1", "display_name": "BrunoLevy", "link": "https://stackoverflow.com/users/4436434/brunolevy"}, "is_accepted": false, "score": 2, "last_activity_date": 1440943350, "creation_date": 1440943350, "answer_id": 32297357, "question_id": 32238084, "link": "https://stackoverflow.com/questions/32238084/fast-way-to-find-the-triangle-inside-a-mesh-that-encloses-a-point/32297357#32297357", "title": "Fast way to find the triangle inside a mesh that encloses a point", "body": "<p>In my own experience, Axis Aligned Bouding Box trees are reasonably efficient for this problem (and I observed more performance than \"walking in the triangulation\", i.e. using locate()). </p>\n\n<p>I am using my own implementation (for 3D mesh, but could be easily adapted to 2D):\n<a href=\"http://alice.loria.fr/software/geogram/doc/html/classGEO_1_1MeshFacetsAABB.html\" rel=\"nofollow\">http://alice.loria.fr/software/geogram/doc/html/classGEO_1_1MeshFacetsAABB.html</a></p>\n\n<p>AABB tree is also implemented in CGAL:\n<a href=\"http://doc.cgal.org/latest/AABB_tree/\" rel=\"nofollow\">http://doc.cgal.org/latest/AABB_tree/</a></p>\n\n<p><strong>Note:</strong> if your query points are structured (e.g. organized on a regular grid), then there are several ways of <em>gaining a lot of performance</em>, for instance by:</p>\n\n<ul>\n<li><p>using the locate() function of Delaunay triangulation in CGAL that takes a hint as an argument, and for the hint, using one of the triangles incident to the previous point. This ensures that the point location algorithm will not have to walk too far away. The gain is in general very significant with this approach. If you do not want to change your class API, you can have a mutable member that stores the hint (works also if the points are not structured, but requires to sort them spatially, see also Marc Glisse's comment).</p></li>\n<li><p>\"drawing\" the triangles over the points (each triangle \"sends\" its values to the points it covers). This can be done by \"computer graphics\" algorithms used to draw triangles on the screen. The gain with this approach is even more important (but requires more work, it will completely change your algorithm).</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 1434059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccf01a3a3f2d7e662c87c6fab897993c?s=128&d=identicon&r=PG", "display_name": "Roger Wehage", "link": "https://stackoverflow.com/users/1434059/roger-wehage"}, "is_accepted": false, "score": 2, "last_activity_date": 1488581081, "last_edit_date": 1488581081, "creation_date": 1488580597, "answer_id": 42589631, "question_id": 32238084, "link": "https://stackoverflow.com/questions/32238084/fast-way-to-find-the-triangle-inside-a-mesh-that-encloses-a-point/42589631#42589631", "title": "Fast way to find the triangle inside a mesh that encloses a point", "body": "<p>If the mesh grid is invariant, a hash table can be used to access any entry in O(1) time. Assuming the data is accessed by horizontal x and vertical y values, place a bounding box around the mesh and slice it vertically and horizontally into squares roughly equal to the area of the average mesh element. Set Nx to the number of vertical slices and Ny to the number of horizontal slices. If the mesh data extends from X_min to X_max and Y_min to Y_max, set Sx = Nx/(X_max\u2014Xmin) and Sy = Ny/(Y_max\u2014Y_min). Then incrementally number the vertical columns from left to right, starting at round(Sx*X_min) to round(Sx*X_max). Similarly incrementally number the horizontal rows from bottom to top, starting at round(Sy*Y_min) to round(Sy*Y_max).</p>\n\n<p>If the mesh is roughly square there would be about 1000 columns and 1000 rows and nearly every square would be associated with a triangle. If the mesh has irregular shape or holes, many of the squares may not fall on the mesh. That makes no difference to the hash table. To set up the hash table, no more than one triangle can be associated with each square. If two or more triangles want to be associated with the same square, the squares are too large. To get more squares, set a smaller area to get larger Nx and Ny. Now that each triangle has been associated with exactly one square in some column #X and row #Y, a million keywords can be generated. For the cell in column #X and row #Y set up the keyword string \"\u00b1#X\u00b1#Y\" where \u00b1#X and \u00b1#Y mean integers with a leading \"+\" sign if the number is greater than \u20141 and a leading \"\u2014\" sign if the number is less than zero. To give all keywords the same length, pad the integer values with leading zeros. Typical unique keywords might look like \"-0378+0087\" or \"+0029-1007\". In these examples every keyword would be exactly 10 characters. Set the keywords in the hash table in the order the triangles are stored.</p>\n\n<p>To use the hash table, for a given x and y point, set integer ix = round(Sx*x) and integer iy = round(Sy*y) and form the keyword \"\u00b1ix\u00b1iy\" according to the sign of ix and iy. If x and y are in the mesh, the keyword \"\u00b1ix\u00b1iy\" should be in the hash table, and it should return the index of the triangle enclosing x and y or a triangle very close to the point. In some cases the generated \"\u00b1ix\u00b1iy\" keyword may not be in the hash table. In such cases the hash table function will return some random triangle index. When this happens the best fix is to perturb ix and/or iy by one unit and generate another keyword. Of course if the point is outside the mesh, the hash table may be sending back a lot of random triangle indexes. So make sure the point is valid to start with.</p>\n\n<p>This discussion has assumed that the triangles were reasonably shaped and of approximate uniform area. If that is not the case and several triangles must fit into the same square or several squares must fit into the same triangle, the fix is to produce a redirection table on the side. When several triangles fit into the same square, assign the most central triangle to the square with the understanding that a quick search for the desired triangle will then be required. When several squares must fit into the same triangle, point one of the squares to the triangle index and all the others to an indirection table whose indices start after the triangle indices. The indirection table will then be used to point to the triangle index containing those squares.</p>\n"}], "owner": {"reputation": 767, "user_id": 1120229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0c29fd8d37549e3e637bb7cd81a9090a?s=128&d=identicon&r=PG", "display_name": "MVTC", "link": "https://stackoverflow.com/users/1120229/mvtc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2167, "favorite_count": 0, "accepted_answer_id": 32239070, "answer_count": 3, "score": 3, "last_activity_date": 1488581081, "creation_date": 1440630170, "last_edit_date": 1440633874, "question_id": 32238084, "link": "https://stackoverflow.com/questions/32238084/fast-way-to-find-the-triangle-inside-a-mesh-that-encloses-a-point", "title": "Fast way to find the triangle inside a mesh that encloses a point", "body": "<p>I'm running into a performance problem for a task I need to accomplish. One of the bottlenecks at the moment is in getting an interpolated field value from an unstructured grid.  </p>\n\n<p>The slow part is, given a 2D point and an unstructured 2D grid, find the mesh points which immediately surround the point. It would be nice to just find the triangle it falls into.</p>\n\n<p>Right now I'm using CGAL, but it's way too slow. With the current implementation, the whole task will take days to complete, running in parallel on a high end CPU.</p>\n\n<p>I believe that the slow part is CGAL::natural_neighbor_coordinates_2.</p>\n\n<pre><code>#ifndef FIELD_INTERPOLATOR_H\n#define FIELD_INTERPOLATOR_H\n\n#include \"Vec.h\"\n\n#include &lt;CGAL/Exact_predicates_inexact_constructions_kernel.h&gt;\n#include &lt;CGAL/Delaunay_triangulation_2.h&gt;\n#include &lt;CGAL/Interpolation_traits_2.h&gt;\n#include &lt;CGAL/natural_neighbor_coordinates_2.h&gt;\n#include &lt;CGAL/interpolation_functions.h&gt;\n\n#include &lt;map&gt;\n#include &lt;vector&gt;\n\ntypedef CGAL::Exact_predicates_inexact_constructions_kernel Kernel;\ntypedef CGAL::Delaunay_triangulation_2&lt; Kernel &gt; Delaunay_triangulation;\n\ntypedef Kernel::FT FieldType;\ntypedef Kernel::Point_2 MeshType;\n\nstruct FieldInterpolator23 {\n\n    Delaunay_triangulation m_triangulation;\n\n    std::map&lt; MeshType, FieldType, Kernel::Less_xy_2 &gt; m_vX;\n    std::map&lt; MeshType, FieldType, Kernel::Less_xy_2 &gt; m_vY;\n    std::map&lt; MeshType, FieldType, Kernel::Less_xy_2 &gt; m_vZ;\n\n    typedef CGAL::Data_access&lt; std::map&lt; MeshType, FieldType, Kernel::Less_xy_2 &gt; &gt; ValueAccess;\n\n    FieldInterpolator23() {}\n\n    FieldInterpolator23( const std::vector&lt; TN::Vec2 &gt; &amp; mesh, const std::vector&lt; TN::Vec3 &gt; &amp; field )\n    {\n        const int N = mesh.size();\n        for ( int i = 0; i &lt; N; ++i ) {\n\n            MeshType p( mesh[i].x(), mesh[i].y() );\n\n            m_triangulation.insert( p );\n            m_vX.insert( std::make_pair( p, field[i].x() ) );\n            m_vY.insert( std::make_pair( p, field[i].y() ) ); \n            m_vZ.insert( std::make_pair( p, field[i].z() ) );                        \n        }       \n    }\n\n    void set( const std::vector&lt; TN::Vec2 &gt; &amp; mesh, const std::vector&lt; TN::Vec3 &gt; &amp; field ) {\n\n        m_triangulation.clear();\n        m_vX.clear();\n        m_vY.clear();\n        m_vZ.clear();\n\n        const int N = mesh.size();\n        for ( int i = 0; i &lt; N; ++i ) {\n\n            MeshType p( mesh[i].x(), mesh[i].y() );\n\n            m_triangulation.insert( p );\n            m_vX.insert( std::make_pair( p, field[i].x() ) );\n            m_vY.insert( std::make_pair( p, field[i].y() ) );\n            m_vZ.insert( std::make_pair( p, field[i].z() ) );\n        }\n    }\n\n    TN::Vec3 operator() ( TN::Vec2 p ) {\n\n        MeshType pos( p.x(), p.y() );\n\n        std::vector&lt; std::pair&lt; MeshType, FieldType &gt; &gt; coords;\n\n        FieldType norm =\n            CGAL::natural_neighbor_coordinates_2( m_triangulation, pos, std::back_inserter( coords ) ).second;\n\n        FieldType resX =\n            CGAL::linear_interpolation(\n                coords.begin(), \n                coords.end(),\n                norm,\n                ValueAccess( m_vX )\n        );\n\n        FieldType resY =\n            CGAL::linear_interpolation(\n                coords.begin(), \n                coords.end(),\n                norm,\n                ValueAccess( m_vY )\n        );\n\n        FieldType resZ =\n            CGAL::linear_interpolation(\n                coords.begin(), \n                coords.end(),\n                norm,\n                ValueAccess( m_vZ )\n        );\n\n        return TN::Vec3( resX, resY, resZ );\n    }\n};\n\n#endif\n</code></pre>\n\n<p>Can anyone point me in the direction of an acceptable higher performance solution, either a different library or an algorithm? </p>\n"}, {"tags": ["c++", "armadillo"], "comments": [{"owner": {"reputation": 11978, "user_id": 774651, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d174682a9c2469488ac0cd91f0253215?s=128&d=identicon&r=PG&f=1", "display_name": "Lol4t0", "link": "https://stackoverflow.com/users/774651/lol4t0"}, "reply_to_user": {"reputation": 9338, "user_id": 1102626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GKWvY.png?s=128&g=1", "display_name": "John Bupit", "link": "https://stackoverflow.com/users/1102626/john-bupit"}, "edited": false, "score": 4, "creation_date": 1440629491, "post_id": 32237946, "comment_id": 52358181, "body": "@JohnBupit but better use <code>map</code>"}, {"owner": {"reputation": 9338, "user_id": 1102626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GKWvY.png?s=128&g=1", "display_name": "John Bupit", "link": "https://stackoverflow.com/users/1102626/john-bupit"}, "reply_to_user": {"reputation": 11978, "user_id": 774651, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d174682a9c2469488ac0cd91f0253215?s=128&d=identicon&r=PG&f=1", "display_name": "Lol4t0", "link": "https://stackoverflow.com/users/774651/lol4t0"}, "edited": false, "score": 0, "creation_date": 1440629702, "post_id": 32237946, "comment_id": 52358242, "body": "@Lol4t0 Indeed. I didn&#39;t read the question through."}, {"owner": {"reputation": 3366, "user_id": 1080929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78ecd4627fdf46fc3b3a217eeb0e5104?s=128&d=identicon&r=PG", "display_name": "mtall", "link": "https://stackoverflow.com/users/1080929/mtall"}, "edited": false, "score": 0, "creation_date": 1440686701, "post_id": 32237946, "comment_id": 52385409, "body": "This is easily doable using a combination of <a href=\"http://arma.sourceforge.net/docs.html#unique\" rel=\"nofollow noreferrer\">unique()</a> and <a href=\"http://arma.sourceforge.net/docs.html#hist\" rel=\"nofollow noreferrer\">hist()</a>.  See my detailed answer below."}], "answers": [{"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1440630534, "post_id": 32238115, "comment_id": 52358490, "body": "So, we can see the <code>for_each</code> to do the job, and the <i>for range</i> to display :-) ."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1440630768, "post_id": 32238115, "comment_id": 52358556, "body": "An alternative to <code>for_each</code> would be <code>for (auto x : v) ++dup[x];</code>"}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1440630846, "post_id": 32238115, "comment_id": 52358581, "body": "@Jarod42 yep, bases covered =)"}], "tags": [], "owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "is_accepted": false, "score": 7, "last_activity_date": 1440630356, "creation_date": 1440630356, "answer_id": 32238115, "question_id": 32237946, "link": "https://stackoverflow.com/questions/32237946/how-to-count-duplicate-entries-of-a-vector-in-c/32238115#32238115", "title": "How to count duplicate entries of a vector in C++", "body": "<p>As mentioned in comments you could use a <code>std::map</code> to collect the results.  Then you can convert to a matrix as you see fit.  You could skip the map step and use a matrix directly if it's already pre-initialised with the rows you're after.</p>\n\n<p>As for a function to do this, you can use <code>std::for_each</code> from <code>&lt;algorithm&gt;</code> along with a lambda expression, although it seems overkill when a loop would be fine.</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;map&gt;\n\nusing namespace std;\n\nint main()\n{\n    vector&lt;int&gt; v{1,1,2,2,0,2,1,0};\n    map&lt;int,int&gt; dup;\n\n    for_each( v.begin(), v.end(), [&amp;dup]( int val ){ dup[val]++; } );\n\n    for( auto p : dup ) {\n        cout &lt;&lt; p.first &lt;&lt; ' ' &lt;&lt; p.second &lt;&lt; endl;\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3366, "user_id": 1080929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78ecd4627fdf46fc3b3a217eeb0e5104?s=128&d=identicon&r=PG", "display_name": "mtall", "link": "https://stackoverflow.com/users/1080929/mtall"}, "is_accepted": false, "score": 3, "last_activity_date": 1440686961, "last_edit_date": 1440686961, "creation_date": 1440686436, "answer_id": 32252427, "question_id": 32237946, "link": "https://stackoverflow.com/questions/32237946/how-to-count-duplicate-entries-of-a-vector-in-c/32252427#32252427", "title": "How to count duplicate entries of a vector in C++", "body": "<p>Here's another solution, using only <a href=\"http://arma.sourceforge.net\" rel=\"nofollow\">Armadillo</a> functions, and a C++11 compiler:</p>\n\n<pre><code>vec a = {1,1,2,2,0,2,1,0};  // vec holds elements of type 'double'\n\nvec b = unique(a);\n\nuvec c = hist(a,b);  // uvec holds unsigned integers\n\nmat X(b.n_rows, 2);\n\nX.col(0) = b;\nX.col(1) = conv_to&lt;vec&gt;::from(c);\n\nX.print(\"X:\");\n</code></pre>\n\n<p>Explanation:</p>\n\n<ul>\n<li>vec b = <a href=\"http://arma.sourceforge.net/docs.html#unique\" rel=\"nofollow\">unique(a)</a> creates a vector containing the unique elements of <em>a</em>, sorted in ascending order</li>\n<li>uvec c = <a href=\"http://arma.sourceforge.net/docs.html#hist\" rel=\"nofollow\">hist(a,b)</a> creates a histogram of counts of elements in <em>a</em>, using <em>b</em> as the bin centers</li>\n<li><a href=\"http://arma.sourceforge.net/docs.html#conv_to\" rel=\"nofollow\">conv_to&lt;vec&gt;::from(c)</a> converts <em>c</em> (vector with unsigned integers) to the same vector type as <em>a</em></li>\n</ul>\n"}], "owner": {"reputation": 19, "user_id": 5221024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddf892cd43c02619d7c102d30e8143fc?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doi", "link": "https://stackoverflow.com/users/5221024/j-doi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5989, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1440686961, "creation_date": 1440629317, "last_edit_date": 1440629629, "question_id": 32237946, "link": "https://stackoverflow.com/questions/32237946/how-to-count-duplicate-entries-of-a-vector-in-c", "title": "How to count duplicate entries of a vector in C++", "body": "<p>I'm using Armadillo to do linear algebra calculation in C++. </p>\n\n<p>For example, there is a </p>\n\n<pre><code>vector a = (1,1,2,2,0,2,1,0)\n</code></pre>\n\n<p>I wish return a matrix</p>\n\n<pre><code>(0, 2) //means 0 shows 2 times in the vector\n(1, 3) //1 shows 3 times\n(2, 3) //2 shows 3 times\n</code></pre>\n\n<p>Is there any function can fulfill such job?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 9338, "user_id": 1102626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GKWvY.png?s=128&g=1", "display_name": "John Bupit", "link": "https://stackoverflow.com/users/1102626/john-bupit"}, "edited": false, "score": 1, "creation_date": 1440629302, "post_id": 32237904, "comment_id": 52358114, "body": "If you&#39;re keeping track of the number of instances at a given time, the unique number assigned to a new instance could be that number."}, {"owner": {"reputation": 121, "user_id": 274212, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f08661119eecb7710ecedf92e6a39ca1?s=128&d=identicon&r=PG", "display_name": "Neo", "link": "https://stackoverflow.com/users/274212/neo"}, "reply_to_user": {"reputation": 9338, "user_id": 1102626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GKWvY.png?s=128&g=1", "display_name": "John Bupit", "link": "https://stackoverflow.com/users/1102626/john-bupit"}, "edited": false, "score": 0, "creation_date": 1440629449, "post_id": 32237904, "comment_id": 52358166, "body": "Well, I want to put unique id generator in a dll which can be used by different applications. I should have said, that maximum number of processes consuming this dll are 256."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 9338, "user_id": 1102626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GKWvY.png?s=128&g=1", "display_name": "John Bupit", "link": "https://stackoverflow.com/users/1102626/john-bupit"}, "edited": false, "score": 0, "creation_date": 1440673977, "post_id": 32237904, "comment_id": 52376041, "body": "@JohnBupit: No, wouldn&#39;t work. Process 1 gets 0, process 2 gets 1, process 1 dies, process 3 gets 1 again."}, {"owner": {"reputation": 2400, "user_id": 1123685, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fbe89bfc6b7f4a6f83d222baa20f51ee?s=128&d=identicon&r=PG&f=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/1123685/brad"}, "edited": false, "score": 0, "creation_date": 1456195973, "post_id": 32237904, "comment_id": 58823644, "body": "@Neo, if your question is answered, please accept one of the answers."}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 274212, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f08661119eecb7710ecedf92e6a39ca1?s=128&d=identicon&r=PG", "display_name": "Neo", "link": "https://stackoverflow.com/users/274212/neo"}, "edited": false, "score": 0, "creation_date": 1440629585, "post_id": 32237958, "comment_id": 52358209, "body": "Yes, using a file is always as an option. I was wondering if there are any windows API to do so?"}, {"owner": {"reputation": 2400, "user_id": 1123685, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fbe89bfc6b7f4a6f83d222baa20f51ee?s=128&d=identicon&r=PG&f=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/1123685/brad"}, "reply_to_user": {"reputation": 121, "user_id": 274212, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f08661119eecb7710ecedf92e6a39ca1?s=128&d=identicon&r=PG", "display_name": "Neo", "link": "https://stackoverflow.com/users/274212/neo"}, "edited": false, "score": 1, "creation_date": 1440629734, "post_id": 32237958, "comment_id": 52358256, "body": "Very OS specific, but yes - on Windows you can create shared memory.  For example: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa366551(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2400, "user_id": 1123685, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fbe89bfc6b7f4a6f83d222baa20f51ee?s=128&d=identicon&r=PG&f=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/1123685/brad"}, "is_accepted": false, "score": 0, "last_activity_date": 1440629391, "creation_date": 1440629391, "answer_id": 32237958, "question_id": 32237904, "link": "https://stackoverflow.com/questions/32237904/unique-number-between-0-to-255-across-the-processes/32237958#32237958", "title": "Unique number between 0 to 255 across the processes", "body": "<p>Not specifically by a C++ construct.  You could however keep the current number in a file, and when a process starts up, you could read the file and increment the number.  You would need locking on the file so two processes don't update it at the same time.  You would also need a way to detect a process it the only one of it's kind and start over.</p>\n\n<p>How to achieve both of those last requirements are likely to turn out to be specific to your language and operating system.</p>\n"}, {"tags": [], "owner": {"reputation": 29966, "user_id": 161455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f48b3bc50d995b0cbc7a1038760ea02?s=128&d=identicon&r=PG", "display_name": "shf301", "link": "https://stackoverflow.com/users/161455/shf301"}, "is_accepted": true, "score": 5, "last_activity_date": 1440630055, "creation_date": 1440630055, "answer_id": 32238069, "question_id": 32237904, "link": "https://stackoverflow.com/questions/32237904/unique-number-between-0-to-255-across-the-processes/32238069#32238069", "title": "Unique number between 0 to 255 across the processes", "body": "<p>On Windows you can create <a href=\"https://msdn.microsoft.com/en-us/library/h90dkhs0(v=vs.90).aspx\">shared memory or a shared data segment</a> in your DLL.  Since you are sharing a single integer from a single DLL it may be simpler to use a shared data segment.</p>\n\n<pre><code>#pragma data_seg (\".myseg\")\n   int sharedCounter = 0; \n#pragma data_seg() \n</code></pre>\n\n<p>You will want to use an <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms683614(v=vs.85).aspx\">interlocked</a> function to access that since it is shared across processes:</p>\n\n<pre><code>int myAppId = InterlockedIncrement(&amp;sharedCounter);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1440632615, "last_edit_date": 1440632615, "creation_date": 1440631185, "answer_id": 32238228, "question_id": 32237904, "link": "https://stackoverflow.com/questions/32237904/unique-number-between-0-to-255-across-the-processes/32238228#32238228", "title": "Unique number between 0 to 255 across the processes", "body": "<p>As others suggested, you can use shared memory to exchange data between the processes.</p>\n\n<p>Since you are only interested in unique IDs between 0-255, and I assuming it is OK for any given ID to be reused after a process is done using it (so 256 unique IDs between 256 <em>concurrent</em> processes, right?). If so, you could store a 256-element boolean array in the shared memory, and when a new process loads the DLL it can look for an available slot in the array, set it to true, and use the slot index as its unique ID.  When the DLL is unloaded, have it reset the array slot to false for a later process to use.  You can use a named mutex via <code>CreateMutex()</code> to synchronize access to the array across processes.</p>\n\n<p>Something like this:</p>\n\n<pre><code>#pragma data_seg (\".myseg\")\nbool AppsInUse[256] = {0};\n#pragma data_seg()\n\nHANDLE hMutex = NULL;\nint UniqueID = -1;\n\nBOOL WINAPI DllMain(HINSTANCE hinstDLL, DWORD fdwReason, LPVOID lpReserved)\n{\n    switch( fdwReason ) \n    { \n        case DLL_PROCESS_ATTACH:\n            DisableThreadLibraryCalls(hinstDLL);\n            hMutex = CreateMutex(NULL, FALSE, TEXT(\"MyMutex\"));\n            if (hMutex == NULL)\n                return FALSE;\n            if (WaitForSingleObject(hMutex, 5000) == WAIT_OBJECT_0)\n            {\n                for (int i = 0; i &lt; 256; ++i)\n                {\n                    if (!AppsInUse[i])\n                    {\n                        AppsInUse[i] = true;\n                        UniqueID = i;\n                        break;\n                    }\n                }\n                ReleaseMutex(hMutex);\n            }\n            if (UniqueID == -1)\n                return FALSE;\n            break;\n\n        case DLL_PROCESS_DETACH:\n            if (UniqueID != -1)\n            {\n                if (WaitForSingleObject(hMutex, 1000) == WAIT_OBJECT_0)\n                {\n                    AppsInUse[UniqueID] = false;\n                    ReleaseMutex(hMutex);\n                }\n                UniqueID = -1;\n            }\n            if (hMutex != NULL)\n            {\n                CloseHandle(hMutex);\n                hMutex = NULL;\n            }\n            break;\n    }\n    return TRUE;\n}\n</code></pre>\n\n<p>If your compiler does not support <code>#pragma data_seg</code>, you can use <code>CreateFileMapping()</code> and <code>MapViewOfFile()</code> to allocate a shared array dynamically instead:</p>\n\n<pre><code>HANDLE hMapping = NULL;\nbool* AppsInUse = NULL;\nHANDLE hMutex = NULL;\nint UniqueID = -1;\n\nBOOL WINAPI DllMain(HINSTANCE hinstDLL, DWORD fdwReason, LPVOID lpReserved)\n{\n    switch( fdwReason ) \n    { \n        case DLL_PROCESS_ATTACH:\n        {\n            DisableThreadLibraryCalls(hinstDLL);\n            hMapping = CreateFileMapping(INVALID_HANDLE_VALUE, NULL, PAGE_READWRITE, 0, sizeof(bool) * 256, TEXT(\"MyArray\"));\n            if (hMapping == NULL)\n                return FALSE;\n            bool bDoInit = (GetLastError() != ERROR_ALREADY_EXISTS);\n            AppsInUse = (bool*) MapViewOfFile(hMapping, FILE_MAP_WRITE, 0, 0, sizeof(bool) * 256);\n            if (AppsInUse == NULL)\n                return FALSE;\n            if (bDoInit) ZeroMemory(AppsInUse, sizeof(bool) * 256);\n            hMutex = CreateMutex(NULL, FALSE, TEXT(\"MyMutex\"));\n            if (hMutex == NULL)\n                return FALSE;\n            if (WaitForSingleObject(hMutex, 5000) == WAIT_OBJECT_0)\n            {\n                for (int i = 0; i &lt; 256; ++i)\n                {\n                    if (!AppsInUse[i])\n                    {\n                        AppsInUse[i] = true;\n                        UniqueID = i;\n                        break;\n                    }\n                }\n                ReleaseMutex(hMutex);\n            }\n            if (UniqueID == -1)\n                return FALSE;\n            break;\n        }\n\n        case DLL_PROCESS_DETACH:\n            if (UniqueID != -1)\n            {\n                if (WaitForSingleObject(hMutex, 1000) == WAIT_OBJECT_0)\n                {\n                    AppsInUse[UniqueID] = false;\n                    ReleaseMutex(hMutex);\n                }\n                UniqueID = -1;\n            }\n            if (AppsInUse != NULL)\n            {\n                UnmapViewOfFile(AppsInUse);\n                AppsInUse = NULL;\n            }\n            if (hMapping != NULL)\n            {\n                CloseHandle(hMapping);\n                hMapping = NULL;\n            }\n            if (hMutex != NULL)\n            {\n                CloseHandle(hMutex);\n                hMutex = NULL;\n            }\n            break;\n    }\n    return TRUE;\n}\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 274212, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f08661119eecb7710ecedf92e6a39ca1?s=128&d=identicon&r=PG", "display_name": "Neo", "link": "https://stackoverflow.com/users/274212/neo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 1, "accepted_answer_id": 32238069, "answer_count": 3, "score": 2, "last_activity_date": 1440632615, "creation_date": 1440629076, "last_edit_date": 1495540768, "question_id": 32237904, "link": "https://stackoverflow.com/questions/32237904/unique-number-between-0-to-255-across-the-processes", "title": "Unique number between 0 to 255 across the processes", "body": "<p>Is there any way to generate a unique number between 0 to 255. This number must be unique across the processes. So If my application has multiple instances each instance will be given a unique number between 0 to 255. Of course, maximum number of instances my application can have are 256.</p>\n\n<p>As suggested by <a href=\"https://stackoverflow.com/users/1123685/brad\">Brad</a>, Using a file is always as an option. But I am wondering if there are any <strong>windows</strong> API to do so?</p>\n\n<p>Is this something I can do in C++?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 117, "user_id": 5270449, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-X7PISHc1N4w/AAAAAAAAAAI/AAAAAAAAAKU/UsuImgLOvDk/photo.jpg?sz=128", "display_name": "Dosisod", "link": "https://stackoverflow.com/users/5270449/dosisod"}, "reply_to_user": {"reputation": 5158, "user_id": 1829930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d00937426fde9e00fe46a57043c00eeb?s=128&d=identicon&r=PG", "display_name": "Robin Krahl", "link": "https://stackoverflow.com/users/1829930/robin-krahl"}, "edited": false, "score": 0, "creation_date": 1440627974, "post_id": 32237702, "comment_id": 52357673, "body": "btw this is my first post so tell me if im doing anything wrong (or right)."}, {"owner": {"reputation": 9283, "user_id": 1327005, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b5b520280b7f71b4152579670ec5cb38?s=128&d=identicon&r=PG", "display_name": "bigOther", "link": "https://stackoverflow.com/users/1327005/bigother"}, "edited": false, "score": 0, "creation_date": 1440628023, "post_id": 32237702, "comment_id": 52357697, "body": "You mean with CMD, a c++ code or a shell command?"}, {"owner": {"reputation": 5158, "user_id": 1829930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d00937426fde9e00fe46a57043c00eeb?s=128&d=identicon&r=PG", "display_name": "Robin Krahl", "link": "https://stackoverflow.com/users/1829930/robin-krahl"}, "edited": false, "score": 0, "creation_date": 1440628146, "post_id": 32237702, "comment_id": 52357742, "body": "@Dosisod Welcome to stackoverflow! In my opinion, your question is basically same as <a href=\"http://stackoverflow.com/questions/15841511/execute-c-from-string-variable\">this one</a> that already has been answered."}, {"owner": {"reputation": 117, "user_id": 5270449, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-X7PISHc1N4w/AAAAAAAAAAI/AAAAAAAAAKU/UsuImgLOvDk/photo.jpg?sz=128", "display_name": "Dosisod", "link": "https://stackoverflow.com/users/5270449/dosisod"}, "edited": false, "score": 0, "creation_date": 1440628995, "post_id": 32237702, "comment_id": 52358023, "body": "ok thanks i actually saw that right after i posted this XD."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1440629042, "post_id": 32237702, "comment_id": 52358038, "body": "I&#39;d think this though if I were you. First thing I&#39;d do with this is paste in a low-level hard disk format routine. Second thing I&#39;d do is laugh evilly whilst hitting enter."}], "answers": [{"comments": [{"owner": {"reputation": 725, "user_id": 3038608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ff5803b1a0fb03dcf933fc68f65c0d?s=128&d=identicon&r=PG", "display_name": "David Zech", "link": "https://stackoverflow.com/users/3038608/david-zech"}, "edited": false, "score": 2, "creation_date": 1440628102, "post_id": 32237728, "comment_id": 52357728, "body": "I don&#39;t think this is what he&#39;s looking for. It looks like he wants to execute C++ function calls."}, {"owner": {"reputation": 888, "user_id": 5264870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5bd6b62db67b7e4cd1ef0464f5de64a?s=128&d=identicon&r=PG&f=1", "display_name": "dinomix", "link": "https://stackoverflow.com/users/5264870/dinomix"}, "reply_to_user": {"reputation": 725, "user_id": 3038608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ff5803b1a0fb03dcf933fc68f65c0d?s=128&d=identicon&r=PG", "display_name": "David Zech", "link": "https://stackoverflow.com/users/3038608/david-zech"}, "edited": false, "score": 0, "creation_date": 1440628314, "post_id": 32237728, "comment_id": 52357804, "body": "So why not ask him to clarify? Also he could create a case statement with his &#39;commands&#39; and execute corresponding functions."}], "tags": [], "owner": {"reputation": 888, "user_id": 5264870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5bd6b62db67b7e4cd1ef0464f5de64a?s=128&d=identicon&r=PG&f=1", "display_name": "dinomix", "link": "https://stackoverflow.com/users/5264870/dinomix"}, "is_accepted": false, "score": -6, "last_activity_date": 1440628028, "creation_date": 1440628028, "answer_id": 32237728, "question_id": 32237702, "link": "https://stackoverflow.com/questions/32237702/c-can-you-make-a-code-that-executes-user-input-as-a-command/32237728#32237728", "title": "C++ can you make a code that executes user input as a command?", "body": "<p>You can use the system function.</p>\n\n<p><a href=\"http://www.cplusplus.com/reference/cstdlib/system/\" rel=\"nofollow\">http://www.cplusplus.com/reference/cstdlib/system/</a></p>\n\n<pre><code>system(\"command\")\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 5270449, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-X7PISHc1N4w/AAAAAAAAAAI/AAAAAAAAAKU/UsuImgLOvDk/photo.jpg?sz=128", "display_name": "Dosisod", "link": "https://stackoverflow.com/users/5270449/dosisod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1728, "favorite_count": 0, "closed_date": 1440628137, "answer_count": 1, "score": -3, "last_activity_date": 1440628028, "creation_date": 1440627856, "question_id": 32237702, "link": "https://stackoverflow.com/questions/32237702/c-can-you-make-a-code-that-executes-user-input-as-a-command", "closed_reason": "Duplicate", "title": "C++ can you make a code that executes user input as a command?", "body": "<p>Hi I have been trying to make a program that will ask for the users input and whatever the user types it will execute it as a command. Sort of like CMD</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\nstring A;\nint main(){\n    for (int i = 0; i &gt; -1; ++i){\n        cout &lt;&lt; \"Command: \";\n        cin &gt;&gt; A;\n\n        // Here Would Be The Code\n\n        cout &lt;&lt; \"Command Executed!\";\n    }\n}\n</code></pre>\n\n<p>Here is what i imagine a possible output (if it worked)</p>\n\n<pre><code>Command: cout &lt;&lt; \"Test\";\nTest\nCommand Executed!\n</code></pre>\n"}, {"tags": ["c++", "macos", "vba", "gcc", "dylib"], "answers": [{"tags": [], "owner": {"reputation": 2053, "user_id": 1581875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c4820fbcdf16fb5aa890353e3198582?s=128&d=identicon&r=PG&f=1", "display_name": "Olorin", "link": "https://stackoverflow.com/users/1581875/olorin"}, "is_accepted": true, "score": 0, "last_activity_date": 1440945149, "last_edit_date": 1440945149, "creation_date": 1440943680, "answer_id": 32297407, "question_id": 32237575, "link": "https://stackoverflow.com/questions/32237575/passing-c-c-dylib-function-taking-pointer-to-vba-on-mac/32297407#32297407", "title": "passing c/c++ dylib function taking pointer to VBA on mac", "body": "<p>Here is an answer (designed thank to <a href=\"https://support.microsoft.com/en-us/kb/205277\" rel=\"nofollow\">this</a>) in the case of arrays : to pass an array (of double) from c++ to excel-2011's (mac) VBA, the c++ function should have in its signature a <code>double *</code> representing the pointer to the first coefficient of the array, an <code>int</code> (or a <code>long</code> or etc) reprensenting the size of the array. For instance, a function taking an array and multiplying all its coefficients by a parameter value would be coded like this : the c++ code is :</p>\n\n<pre><code>extern \"C\"\n{\n      void multarray(double * array, int size, double coeff)\n      {\n            for (int i = 0 ; i &lt; size ; ++i)\n            {\n                  array[i]*=coeff;\n            }\n      }\n}\n</code></pre>\n\n<p>compiled with :</p>\n\n<pre><code>g++ -m32 -Wall -g -c ./tmp4.cpp\ng++ -m32 -dynamiclib ./tmp4.o -o ./tmp4.dylib\n</code></pre>\n\n<p>Now the VBA should reference the dylib as follows :</p>\n\n<pre><code>Declare Sub multarray Lib \"/Users/XXXXXX/Documents/GITHUBRepos/DYLIBS/MyFirstDylib/tmp4.dylib\" (ByRef firstcoeff As Double, ByVal size As Long, ByVal coeff As Double)\n</code></pre>\n\n<p>The first parameter of <code>multarray</code> represent the first coefficient of the array, <em>and must be passed by reference</em>. Here is an exemple of utilisation :</p>\n\n<pre><code>Public Sub DoIt()\n    Dim multarraofdoubles(3) As Double\n    multarraofdoubles(0) = -1.3\n    multarraofdoubles(1) = 4.6\n    multarraofdoubles(2) = -0.67\n    multarraofdoubles(3) = 3.13\n    Dim coeff As Double\n    coeff = 2#\n    Call multarray(multarraofdoubles(0), 4, coeff)\nEnd Sub\n</code></pre>\n\n<p>The aforementioned <a href=\"https://support.microsoft.com/en-us/kb/205277\" rel=\"nofollow\">link</a> contains many other interesting examples, for strings (with <code>BSTR</code>'s), array of strings, simple structs etc, that could be easily adapted to <code>gcc</code> and this mac OS (/linux) context. I am thinking of designing a simple <code>VARIANT</code>class handling all of this.</p>\n"}], "owner": {"reputation": 2053, "user_id": 1581875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c4820fbcdf16fb5aa890353e3198582?s=128&d=identicon&r=PG&f=1", "display_name": "Olorin", "link": "https://stackoverflow.com/users/1581875/olorin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 0, "accepted_answer_id": 32297407, "answer_count": 1, "score": 0, "last_activity_date": 1440945149, "creation_date": 1440627247, "last_edit_date": 1440764997, "question_id": 32237575, "link": "https://stackoverflow.com/questions/32237575/passing-c-c-dylib-function-taking-pointer-to-vba-on-mac", "title": "passing c/c++ dylib function taking pointer to VBA on mac", "body": "<p>I am actually playing with interfacing c/c++ and the VBA of Excel-2011 for mac. How could I design, in the dylib, functions taking pointers as parameters, or references ? Or arrays ? Or even simple structs ? Under windows, <code>VARIANT</code> let's me do everything, but I cannot resort to it under OS X (or even under linux).</p>\n\n<p>Just as comment, up to now, I can do things like these for (involving \"simple\" types) :</p>\n\n<p>I have the following code configuration : in tmp3class.h :</p>\n\n<pre><code>class TheClass\n{\n      public:\n            double mysum(double x ,double y);\n};\n</code></pre>\n\n<p>in tmp3class.cpp :</p>\n\n<pre><code>#include \"./tmp3class.h\"\n\ndouble TheClass::mysum(double x ,double y)\n{\n      return x+y ;\n}\n</code></pre>\n\n<p>and in tmp3.cpp :</p>\n\n<pre><code>#include \"./tmp3class.h\"\n\nextern \"C\"\n{\n      double THESUM(double x, double y)\n      {\n            TheClass TheObj ;\n            double res = TheObj.mysum(x,y);\n            return res ;\n      }\n}\n</code></pre>\n\n<p>I compile this with :</p>\n\n<pre><code>g++-5.2.0 -m32 -Wall -g -c ./tmp3class.cpp -o ./tmp3obj.o\ng++-5.2.0 -m32 -dynamiclib .tmp3.cpp ./tmp3obj.o -o ./tmp3.dylib\n</code></pre>\n\n<p>and then in the vba I do this :</p>\n\n<pre><code>Declare Function THESUM Lib \"/Users/XXXXXX/Documents/GITHUBRepos/DYLIBS/MyFirstDylib/tmp3.dylib\" (ByVal x As Double, ByVal y As Double) As Double\n\nFunction THESUM_VBA(x As Double, y As Double) As Double\n    THESUM_VBA = THESUM(x, y)\nEnd Function\n</code></pre>\n\n<p>and the function <code>THESUM_VBA</code> works perfectly well.</p>\n"}, {"tags": ["c++", "integer"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1440627188, "post_id": 32237525, "comment_id": 52357400, "body": "<code>std::to_string(5) + std::to_string(5)</code> ?"}, {"owner": {"reputation": 259, "user_id": 5042037, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/31ecc34da843e202f7484c52877fcbf2?s=128&d=identicon&r=PG&f=1", "display_name": "Hyden", "link": "https://stackoverflow.com/users/5042037/hyden"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1440628584, "post_id": 32237525, "comment_id": 52357884, "body": "Mingw does not support C++11 features such as to_string."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1440628700, "post_id": 32237525, "comment_id": 52357927, "body": "you should state that in your question. <code>to_string</code> can be implemented thanks to <code>std::stringstream</code>."}], "answers": [{"comments": [{"owner": {"reputation": 259, "user_id": 5042037, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/31ecc34da843e202f7484c52877fcbf2?s=128&d=identicon&r=PG&f=1", "display_name": "Hyden", "link": "https://stackoverflow.com/users/5042037/hyden"}, "edited": false, "score": 0, "creation_date": 1440628559, "post_id": 32237559, "comment_id": 52357877, "body": "Is there any other easier way without using C++11 features since I&#39;m using Mingw and it has bugs or rather it just doesn&#39;t support C++11 features yet so I can&#39;t use to_string."}, {"owner": {"reputation": 5158, "user_id": 1829930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d00937426fde9e00fe46a57043c00eeb?s=128&d=identicon&r=PG", "display_name": "Robin Krahl", "link": "https://stackoverflow.com/users/1829930/robin-krahl"}, "reply_to_user": {"reputation": 259, "user_id": 5042037, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/31ecc34da843e202f7484c52877fcbf2?s=128&d=identicon&r=PG&f=1", "display_name": "Hyden", "link": "https://stackoverflow.com/users/5042037/hyden"}, "edited": false, "score": 0, "creation_date": 1440628787, "post_id": 32237559, "comment_id": 52357968, "body": "@Hydra Before C++11, you would use a <code>std::stringstream</code>. I added an example to the answer."}, {"owner": {"reputation": 259, "user_id": 5042037, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/31ecc34da843e202f7484c52877fcbf2?s=128&d=identicon&r=PG&f=1", "display_name": "Hyden", "link": "https://stackoverflow.com/users/5042037/hyden"}, "edited": false, "score": 0, "creation_date": 1440629013, "post_id": 32237559, "comment_id": 52358029, "body": "Thank you, sorry for not adding that originally in my question. Your example works perfectly and I&#39;ve implemented it and accepted your answer!"}], "tags": [], "owner": {"reputation": 5158, "user_id": 1829930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d00937426fde9e00fe46a57043c00eeb?s=128&d=identicon&r=PG", "display_name": "Robin Krahl", "link": "https://stackoverflow.com/users/1829930/robin-krahl"}, "is_accepted": true, "score": 2, "last_activity_date": 1440628756, "last_edit_date": 1440628756, "creation_date": 1440627171, "answer_id": 32237559, "question_id": 32237525, "link": "https://stackoverflow.com/questions/32237525/how-to-add-a-number-to-an-integer-like-a-string/32237559#32237559", "title": "How to add a number to an integer like a string", "body": "<p>If you want an <code>int</code> as result, multiply with the base:</p>\n\n<pre><code>int a = 5;\nint b = 5;\nint c = 10 * a + b;  // 55\n</code></pre>\n\n<p>If you want the result to be a <code>std::string</code>, use <code>std::to_string</code> (since C++11):</p>\n\n<pre><code>int a = 5;\nint b = 5;\nstd::string c = std::to_string(a) + std::to_string(b);  // \"55\"\n</code></pre>\n\n<p>Before C++11, you can use a <code>std::stringstream</code>:</p>\n\n<pre><code>int a = 5;\nint b = 5;\nstd::stringstream ss;\nss &lt;&lt; a &lt;&lt; b;\nstd::string c = ss.str();  // \"55\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2784, "user_id": 4846736, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/EXXDZ.png?s=128&g=1", "display_name": "Lamour", "link": "https://stackoverflow.com/users/4846736/lamour"}, "is_accepted": false, "score": 1, "last_activity_date": 1440628657, "last_edit_date": 1440628657, "creation_date": 1440627351, "answer_id": 32237607, "question_id": 32237525, "link": "https://stackoverflow.com/questions/32237525/how-to-add-a-number-to-an-integer-like-a-string/32237607#32237607", "title": "How to add a number to an integer like a string", "body": "<p>Try this:</p>\n\n<pre><code>  #include&lt;iostream&gt;\n  using namespace std;\n\n  int main(){\n\n int value1 = 5;\n int value2 = 4;\n\n  string put_together = to_string(value1) + to_string(value2);\n\n  return 0 ;\n }\n</code></pre>\n"}], "owner": {"reputation": 259, "user_id": 5042037, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/31ecc34da843e202f7484c52877fcbf2?s=128&d=identicon&r=PG&f=1", "display_name": "Hyden", "link": "https://stackoverflow.com/users/5042037/hyden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 32237559, "answer_count": 2, "score": -7, "last_activity_date": 1440628756, "creation_date": 1440626995, "last_edit_date": 1440628632, "question_id": 32237525, "link": "https://stackoverflow.com/questions/32237525/how-to-add-a-number-to-an-integer-like-a-string", "title": "How to add a number to an integer like a string", "body": "<p>In C++ I am trying to add two integers together. I don't want this:</p>\n\n<p>5 + 5 = 10</p>\n\n<p>I want it to be:</p>\n\n<p>5 + 5 = 55</p>\n\n<p>How can I add two integers together like strings. I know how to do this but it would be a lot of code and I'm just wondering if there's a short version under four lines.</p>\n\n<p>Edit : Since Mingw doesn't properly support some C++11 features like to_string(), itoa() and that I'm looking for something that doesn't use a C++11 features.</p>\n"}, {"tags": ["c++", "visual-c++", "visual-studio-2015", "opencv3.0"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1440629469, "post_id": 32237427, "comment_id": 52358171, "body": "1) the title doesn&#39;t reflect the question. 2) habe you initialized the bkg model without the person?"}, {"owner": {"reputation": 21, "user_id": 4710484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fdbdcfc29a4deea43eee6b401ea3ff5?s=128&d=identicon&r=PG&f=1", "display_name": "chopstickPiano", "link": "https://stackoverflow.com/users/4710484/chopstickpiano"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1440677233, "post_id": 32237427, "comment_id": 52378173, "body": "Thanks for 1). When you say initialize the bkg model without the person, do you mean filtering the image without any movement in the image(i.e. no change in pixels)?"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1440679256, "post_id": 32237427, "comment_id": 52379703, "body": "Get in the camera view 10 seconds after you start bkg subtraction mog"}], "owner": {"reputation": 21, "user_id": 4710484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fdbdcfc29a4deea43eee6b401ea3ff5?s=128&d=identicon&r=PG&f=1", "display_name": "chopstickPiano", "link": "https://stackoverflow.com/users/4710484/chopstickpiano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1440677426, "creation_date": 1440626459, "last_edit_date": 1440677426, "question_id": 32237427, "link": "https://stackoverflow.com/questions/32237427/opencv-c-is-there-an-alternative-to-hsv-filtering-for-obtaining-a-binary-image", "title": "Opencv,c++-Is there an alternative to HSV filtering for obtaining a binary image of a person?", "body": "<p>I'm making a gesture recognition program in c++ with opencv. So before recognising the gesture, I need to first obtain a filtered binary image of the person(specifically hands). Most tutorials suggest using HSV colour filtering. But this method is very inefficient because the colour of the person has to be different from the background. So I searched more and found an alternative called background substraction. But only backgroundsubtracterMOG2 exists and there is always an overlap between the previously filtered frame and the current one. Is there any way to eliminate this overlap or is there a more efficient way to filter the binary image?</p>\n"}, {"tags": ["c++", "c", "linux", "kernel-module", "spi"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440626726, "post_id": 32237323, "comment_id": 52357192, "body": "Next time, please add C#, Java and Go tags. They all have a similar syntax."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440626880, "post_id": 32237323, "comment_id": 52357254, "body": "@Olaf: The <code>c</code> tag is appropriate because the driver is written in C, the <code>c++</code> tag is appropriate if Phil is writing C++ code, to let answerers know his preferred language for code samples.  Please don&#39;t randomly remove tags."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1440626982, "post_id": 32237323, "comment_id": 52357312, "body": "@BenVoigt: He should have state that. According to the file-extension. As given, the question is language-agnostic."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440627098, "post_id": 32237323, "comment_id": 52357360, "body": "Files are the Linux/Unix way. Why not just read/write the sysfs files from your program? That way you don&#39;t need an API for everything."}, {"owner": {"reputation": 53, "user_id": 5145208, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Y5YEKmVOC1Q/AAAAAAAAAAI/AAAAAAAAGsc/sKUxApXmsEI/photo.jpg?sz=128", "display_name": "Phil Mills", "link": "https://stackoverflow.com/users/5145208/phil-mills"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440709389, "post_id": 32237323, "comment_id": 52398634, "body": "@Olaf : Because I know nothing of C#, Java or Go (or Rust, or Cobol or Lisp, for that matter) to be aware that the syntax would be similar for this use case."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440709742, "post_id": 32237323, "comment_id": 52398788, "body": "@PhilMills: Yes, programming by same syntax. Forget about the semantics. Great approach."}, {"owner": {"reputation": 53, "user_id": 5145208, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Y5YEKmVOC1Q/AAAAAAAAAAI/AAAAAAAAGsc/sKUxApXmsEI/photo.jpg?sz=128", "display_name": "Phil Mills", "link": "https://stackoverflow.com/users/5145208/phil-mills"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440709969, "post_id": 32237323, "comment_id": 52398895, "body": "@Olaf: The Linux Way is often not very helpful.  Yes, it may be functional and it may be wonderfully general-purpose so that ANY language that can do file I/O can get the value... but in the majority of actual use cases, it kind of sucks because now the programmer has to open a file (and do validation on that) read a file (and do validation on that), convert a string to an int (and do validation on that) when it would have been about zero effort on the kernel module&#39;s developer&#39;s part to add a one-liner to the C/C++ header file that they&#39;re already creating to just return the damn value."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440712466, "post_id": 32237323, "comment_id": 52400011, "body": "@PhilMills: That&#39;s why Linux is being use on most devices, worldwide. (wheras it is not the Linux, but the Unix way.) No one said not to wrap this into a library. If you do not like it, you should use a different system with an API to learn for every crap. As it looks, you should not rely on the buffer size anyway, as that is a matter of the hardware and the use of an OS is to abstract from this."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440712606, "post_id": 32237323, "comment_id": 52400054, "body": "@PhilMills: And, no, it is not &quot;a one-liner&quot;. Instead you have to care about access rights, etc. You have to reserve a syscall, changing the kernel-userspace interface, etc. All handled here with existing calls and permissions (basically). Feel free to complain to the kernel developers; I will not discuss this further, just do not program for Linux then; write your own OS (I did already). Until then: If you are in a country you have to follow its laws."}], "owner": {"reputation": 53, "user_id": 5145208, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Y5YEKmVOC1Q/AAAAAAAAAAI/AAAAAAAAGsc/sKUxApXmsEI/photo.jpg?sz=128", "display_name": "Phil Mills", "link": "https://stackoverflow.com/users/5145208/phil-mills"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 163, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1440626996, "creation_date": 1440625955, "last_edit_date": 1440626823, "question_id": 32237323, "link": "https://stackoverflow.com/questions/32237323/examine-kernel-module-parameters-programatically-from-linux-user-space-code", "title": "Examine kernel module parameters programatically from Linux user space code?", "body": "<p>I'm working on writing code that uses linux' ioctl(...) functions to communicate with a SPI interface.</p>\n\n<p>Recently I was trying to get up to our \"typical\" transfer use-case (roughly 500KB of bulk-transfer) and got handed an \"errno 90\" (EMSGSIZE) failure.  Digging into spidev.c, there's \"bufsiz\" set to a max of 4096 bytes in the transfer (or transfers).</p>\n\n<p>I see the abiliy to change bufsiz by writing a new value to \"/sys/module/spidev/parameters/bufsiz\" and that's fine, but I doubt it'll let me expand that arbitrarily.</p>\n\n<p><strong>But: is there any way to examine this parameter from my user-space code (outside of reading the above file)?</strong>  </p>\n\n<p>So I need to be able to adapt my tx/rx code to whatever the current maximum buffer size is set to, whether my code's altered it or not, but that's pretty hard to do without being able to query the value from within my code.</p>\n\n<p>Seems like there MUST be a simple way to get that value through some library call.</p>\n"}, {"tags": ["c++", "gpio", "intel-atom", "windows-7-embedded"], "comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1440626572, "post_id": 32237302, "comment_id": 52357133, "body": "Question 1 is addressed in section 5.1 of the guide."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1440626726, "post_id": 32237302, "comment_id": 52357193, "body": "4.1 of the guide indicates that <code>IOCTL_GPIO_NOTIFY</code> is intended for use with overlapped I/O.... you should set the <code>hEvent</code> of the <code>OVERLAPPED</code> structure to a kernel event which will be triggered when the pin status changes.  This kernel event is compatible with the usual Win32 wait functions such as <code>WaitForMultipleObjects</code> and <code>MsgWaitForMultipleObjectsEx</code>."}, {"owner": {"reputation": 658, "user_id": 5137293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c16dcc0d0f8edf897135128358e7c741?s=128&d=identicon&r=PG&f=1", "display_name": "Casey Price", "link": "https://stackoverflow.com/users/5137293/casey-price"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1440788587, "post_id": 32237302, "comment_id": 52434902, "body": "Thanks! I&#39;m new to C++/WinAPI so I didn&#39;t know about Overlapped IO. I think I&#39;ve gotten that part figured out although I still don&#39;t really understand what 5.1.1 is saying. I get that I probably need to do some sequence of SetupDiXxx calls to get the device names available and then pick from those but I&#39;m a but clueless as to what ones to use or where to even start since there are so many."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1440788876, "post_id": 32237302, "comment_id": 52435040, "body": "That <code>GUID_DEVINTERFACE_IOHGPIO</code> is a filter, there&#39;s probably only one device path that matches it."}], "owner": {"reputation": 658, "user_id": 5137293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c16dcc0d0f8edf897135128358e7c741?s=128&d=identicon&r=PG&f=1", "display_name": "Casey Price", "link": "https://stackoverflow.com/users/5137293/casey-price"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 527, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1440625889, "creation_date": 1440625889, "question_id": 32237302, "link": "https://stackoverflow.com/questions/32237302/intel-eg20t-gpio-on-windows-7-embedded", "title": "Intel EG20T GPIO on Windows 7 Embedded", "body": "<p>I'm currently trying to listen for when a GPIO input pin goes high by using an interrupt on an Intel Atom board with a EG20T platform controller. I'm using intel's driver and have found their programmers guide here: <a href=\"http://www.intel.com/content/www/us/en/intelligent-systems/previous-generation/pch-eg20t-gpio-win-programmers-guide.html\" rel=\"nofollow\">http://www.intel.com/content/www/us/en/intelligent-systems/previous-generation/pch-eg20t-gpio-win-programmers-guide.html</a></p>\n\n<p>It seems fairly straight forward, make deviceIOControl calls to the specific pin with the macro for the operation you with to perform, but there are still some things I'm confused about.</p>\n\n<ol>\n<li>How do I create the hHandle to pass into the DeviceIOControl call? Or more specifically, if I use CreateFile what do I pass in as the file/device name?</li>\n<li>I don't really understand how Notify works, does the code just wait on that method until the pin status changes and then continues with the new data in the output buffer?</li>\n</ol>\n"}, {"tags": ["c++", "opengl"], "answers": [{"tags": [], "owner": {"reputation": 9286, "user_id": 425756, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Jsf1p.jpg?s=128&g=1", "display_name": "Justin Meiners", "link": "https://stackoverflow.com/users/425756/justin-meiners"}, "is_accepted": false, "score": 1, "last_activity_date": 1440654054, "last_edit_date": 1440654054, "creation_date": 1440625819, "answer_id": 32237288, "question_id": 32237197, "link": "https://stackoverflow.com/questions/32237197/transform-camera-opengl/32237288#32237288", "title": "Transform camera OpenGL", "body": "<p>Calculate a rotated eye vector by multiplying the rotation vector by the original, unrotated, eye vector and pass that into the <code>lookAt</code> function. </p>\n\n<pre><code>float rotX = cosf(angle * (pi / 180));\nfloat rotY = sinf(angle * (pi / 180));\n\nglm::vec3 rotatedEye = glm::vec3(eye.x * rotX , eye.y * rotY, eye.z)\n\nglam::mat4 view = lookAt(rotatedEye, up);\n</code></pre>\n\n<p>Note that each time your camera vectors change you will need to calculate a new view matrix.</p>\n"}], "owner": {"reputation": 133, "user_id": 4532538, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1f96240fd7b16d60fece7b0d54c6a5a8?s=128&d=identicon&r=PG&f=1", "display_name": "Misa", "link": "https://stackoverflow.com/users/4532538/misa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440654054, "creation_date": 1440625375, "question_id": 32237197, "link": "https://stackoverflow.com/questions/32237197/transform-camera-opengl", "title": "Transform camera OpenGL", "body": "<p>How can I transform the camera left around the interface? Need to rotate the \"eye\" vector around the \"up\" vector!?.</p>\n\n<pre><code>void Transform::left(float degrees, vec3&amp; eye, vec3&amp; up) {\n    float c = cosf(degrees * (pi / 180));\n    float s = sinf(degrees * (pi / 180));\n}\n\nmat4 Transform::lookAt(vec3 eye, vec3 up) {\n\n    glm::mat4 view = glm::lookAt(\n        glm::vec3(eye.x, eye.y, eye.z),\n        glm::vec3(0.0f, 0.0f, 0.0f),\n        glm::vec3(up.x, up.y, up.z)\n        );\n    return view;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "struct"], "comments": [{"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 1, "creation_date": 1440625832, "post_id": 32237093, "comment_id": 52356803, "body": "Why don&#39;t you give it a name? If there&#39;s an issue with scoping (e.g. when using a macro), can you wrap it in a lambda, <code>[]{ struct NAME { ... }; return NAME(); }()</code>?"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1440625951, "post_id": 32237093, "comment_id": 52356847, "body": "@dyp It&#39;s not in search of a solution to a practical problem - or, rather, the practical problem (that of putting constructors/destructors in a nameless struct) has a simple elegant solution (a nested named class) that doesn&#39;t need this problem to be solved. I&#39;m just wondering if there is a way to do it, that&#39;s all."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 2, "creation_date": 1440626033, "post_id": 32237093, "comment_id": 52356884, "body": "Related: <a href=\"http://stackoverflow.com/q/21143835/\">Can I implement an autonomous <code>self</code> member type in C++?</a>"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1440626223, "post_id": 32237093, "comment_id": 52356970, "body": "@dyp Yeah, that&#39;s a similar problem, but not the same one: it is implemented using a macro that won&#39;t work for an unnamed struct :("}, {"owner": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "edited": false, "score": 0, "creation_date": 1440662711, "post_id": 32237093, "comment_id": 52368700, "body": "I&#39;m kind of confused about the anonymous structs, I keep reading things like &quot;<i>There are no anonymous structs in standard C++ (only anonymous unions)</i>&quot;, and also there&#39;s a <a href=\"http://stackoverflow.com/questions/14248044/are-anonymous-structs-standard-and-really-what-are-they\">topic about it</a>."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "edited": false, "score": 0, "creation_date": 1440680265, "post_id": 32237093, "comment_id": 52380442, "body": "@PaperBirdMaster I&#39;m talking about unnamed structs, not anonymous structs. They are two very different birds. Note the pronounced absence of the word &quot;anonymous&quot; in the question :)"}, {"owner": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "edited": false, "score": 0, "creation_date": 1440683736, "post_id": 32237093, "comment_id": 52383196, "body": "@KubaOber then my confusion is even greater &quot;anonymous&quot; and &quot;unnamed&quot; aren&#39;t the same thing? aren&#39;t synonyms? (english Isn&#39;t my first language hence the confusion)."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "edited": false, "score": 0, "creation_date": 1440685111, "post_id": 32237093, "comment_id": 52384224, "body": "@PaperBirdMaster We&#39;re using very specific technical terms. What the English dictionary says isn&#39;t relevant here: both <i>anonymous</i> and <i>unnamed</i> have their standard-given, specific meanings. Anonymous structs are really a C99 beast, I don&#39;t know offhand if C++11 even speaks of them. When speaking about language semantics, you should never use synonyms for words that are used according to their meaning as given in the language standard. For example, the C++11 standard might not use the word &quot;anonymous&quot; anywhere, but the C standard does and you become very hard to understand if you mix them."}, {"owner": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "edited": false, "score": 0, "creation_date": 1440688235, "post_id": 32237093, "comment_id": 52386565, "body": "@KubaOber got it, thanks for the explanation :)"}], "answers": [{"comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1440643239, "post_id": 32237780, "comment_id": 52361379, "body": "The question has two examples at the end that I&#39;d like to work. I&#39;d like to be able to have a typedef within the unnamed struct proper, or (equivalently) a type within a static method, that ends up with the struct&#39;s type."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1440644356, "post_id": 32237780, "comment_id": 52361654, "body": "This is of course a solution. I wonder if it&#39;s possible to do it without the second wrapper."}, {"owner": {"reputation": 7515, "user_id": 5249858, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/900942861bfbfdd27433e3ccbf7d6d0f?s=128&d=identicon&r=PG&f=1", "display_name": "3442", "link": "https://stackoverflow.com/users/5249858/3442"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1440644538, "post_id": 32237780, "comment_id": 52361695, "body": "@KubaOber: I&#39;ll try to find another solution and post another comment/edit the answer if I find one."}], "tags": [], "owner": {"reputation": 7515, "user_id": 5249858, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/900942861bfbfdd27433e3ccbf7d6d0f?s=128&d=identicon&r=PG&f=1", "display_name": "3442", "link": "https://stackoverflow.com/users/5249858/3442"}, "is_accepted": true, "score": 3, "last_activity_date": 1440680577, "last_edit_date": 1440680577, "creation_date": 1440628310, "answer_id": 32237780, "question_id": 32237093, "link": "https://stackoverflow.com/questions/32237093/how-to-extract-the-type-of-an-unnamed-struct-to-create-a-new-type-within-the-str/32237780#32237780", "title": "How to extract the type of an unnamed struct to create a new type within the struct itself?", "body": "<p>Something like this, maybe?</p>\n\n<p>The idea is that you actually have two unnamed structs. Firstly, <code>unnamed</code> contains all the actual code/data and stuff. Then there is <code>unnamedWrapper</code> that, being able to use <code>decltype</code> over <code>unnamed</code>, is just a completely-forwarding (even for constructors!) wrapper around <code>unnamed</code>, with the single speciality that it exports <code>unnamed</code>'s type through a typedef.</p>\n\n<pre><code>#include &lt;cstddef&gt;\n\ntemplate&lt;typename T&gt;\nsize_t templatedSizeof() {\n    return sizeof(T);\n}\n\nstruct {\n    char    something;\n    short   somethingElse;\n    int     moreGargabe;\n    long    evenMoreUselessGarbage;\n} unnamed;\n\nstruct : public decltype(unnamed) {\n    typedef decltype(unnamed)   TheType;\n\n    using TheType::TheType; // Use same constructors\n} unnamedWrapper;\n</code></pre>\n"}], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 753, "favorite_count": 3, "accepted_answer_id": 32237780, "answer_count": 1, "score": 9, "last_activity_date": 1440680577, "creation_date": 1440624915, "last_edit_date": 1495540313, "question_id": 32237093, "link": "https://stackoverflow.com/questions/32237093/how-to-extract-the-type-of-an-unnamed-struct-to-create-a-new-type-within-the-str", "title": "How to extract the type of an unnamed struct to create a new type within the struct itself?", "body": "<p>It's easy to create a method/function parametrized on the type of an unnamed struct. It is also easy to get the type <em>after</em> the struct's definition.</p>\n\n<pre><code>struct Foo {\n  template &lt;typename T&gt; Foo(T*) { /* we have access to T here */ }\n}\ntemplate &lt;typename T&gt; void baz(T*) { /* we have access to T here */ }\n\ntemplate&lt;typename T&gt; struct Bar {\n  /* we have access to T here */\n};\n\nvoid test() {\n  struct {\n    Foo foo { this }; // access in a constructor\n    void test() { baz(this); } // access in a function\n  } unnamed;\n  Bar&lt;decltype(unnamed)&gt; bar; // access after definition\n}\n</code></pre>\n\n<p>But is there any \"magic\" that could allow the use of <code>unnamed</code>'s type at the struct scope, or in a static method - not merely within its constructor/instance method or after an instance is declared? It's trivial when the struct is named:</p>\n\n<pre><code>// How to make it work with S absent (an unnamed struct) ?\nstruct S {\n  Bar&lt;S&gt; foo; // how to get our type in an unnamed struct?\n  static void wrapper(void * instance) {\n    static_cast&lt;S*&gt;(instance)-&gt;method(); // how to get our type in an unnamed struct?\n  }\n  void method() { ... }\n} would_be_unnamed;\n</code></pre>\n\n<p>This question was motivated by a <a href=\"https://stackoverflow.com/q/21894450/1329652\">question about how to implement a destructor in an unnamed struct</a>. The trivial solution there was to wrap a named struct in an unnamed one - such wrapper can then be used in macros without clashing with any other types, etc.</p>\n\n<pre><code>struct { struct S { ... } s; } unnamed;\n</code></pre>\n\n<p>Solving the type access conundrum would allow a different solution to the motivating question.</p>\n"}, {"tags": ["c++", "namespaces", "header-files", "c++14"], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1440626281, "post_id": 32237208, "comment_id": 52356991, "body": "That exists since C++98."}, {"owner": {"reputation": 4666, "user_id": 981367, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ca05a550269a76bcdc899350338f5501?s=128&d=identicon&r=PG", "display_name": "VoidStar", "link": "https://stackoverflow.com/users/981367/voidstar"}, "edited": false, "score": 0, "creation_date": 1440626400, "post_id": 32237208, "comment_id": 52357049, "body": "Looks like these definitions are themselves scopeable to within a namespace, fortunately, which limits pollution to at least being just our namespace. I may use this in a few cases"}], "tags": [], "owner": {"reputation": 3059, "user_id": 4765374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac4ed7c583a0aad19b520e7561de6430?s=128&d=identicon&r=PG", "display_name": "Maksim Solovjov", "link": "https://stackoverflow.com/users/4765374/maksim-solovjov"}, "is_accepted": false, "score": 1, "last_activity_date": 1440627708, "last_edit_date": 1440627708, "creation_date": 1440625443, "answer_id": 32237208, "question_id": 32237065, "link": "https://stackoverflow.com/questions/32237065/dealing-with-painfully-long-namespace-names-in-headers/32237208#32237208", "title": "Dealing with painfully long namespace names in headers", "body": "<p>You can have <a href=\"http://en.cppreference.com/w/cpp/language/namespace_alias\" rel=\"nofollow\">namespace aliases</a>:</p>\n\n<pre><code>namespace fbz = foo::bar::baz;\n</code></pre>\n\n<p>However, you would introduce <code>fbz</code> to every file that includes your header.</p>\n"}, {"comments": [{"owner": {"reputation": 286979, "user_id": 541136, "user_type": "moderator", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/wftMn.jpg?s=128&g=1", "display_name": "Aaron Hall", "link": "https://stackoverflow.com/users/541136/aaron-hall"}, "edited": false, "score": 0, "creation_date": 1440626032, "post_id": 32237322, "comment_id": 52356882, "body": "&quot;Here is what I feel.&quot; doesn&#39;t seem like a strong preamble."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 286979, "user_id": 541136, "user_type": "moderator", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/wftMn.jpg?s=128&g=1", "display_name": "Aaron Hall", "link": "https://stackoverflow.com/users/541136/aaron-hall"}, "edited": false, "score": 0, "creation_date": 1440626389, "post_id": 32237322, "comment_id": 52357046, "body": "@AaronHall Well I suspect people are going to have different opinions on this subject and I am very open to other people&#39;s input. My practices may be considered a little loose for some people."}, {"owner": {"reputation": 981, "user_id": 3900879, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/YtmWq.png?s=128&g=1", "display_name": "Rusty Shackleford", "link": "https://stackoverflow.com/users/3900879/rusty-shackleford"}, "reply_to_user": {"reputation": 286979, "user_id": 541136, "user_type": "moderator", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/wftMn.jpg?s=128&g=1", "display_name": "Aaron Hall", "link": "https://stackoverflow.com/users/541136/aaron-hall"}, "edited": false, "score": 0, "creation_date": 1440626901, "post_id": 32237322, "comment_id": 52357271, "body": "@AaronHall: I agree with Galik being overly cautious with his answer.  I do this all the time in my <b>.cpp</b> files, but rarely will do it in <b>.h</b> files simply because my namespaces tend to contain classes that may reference other classes in the same namespace.  Even within a single namespace, I don&#39;t want to introduce the possibility of an alias simply by which header(s) I include.  As a counterpoint to Galik, my practices may be considered a little too <i>pedantic</i> for some people.  In general, I would rather be explicit simply because code is read more than it&#39;s written."}], "tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": false, "score": 3, "last_activity_date": 1440625952, "creation_date": 1440625952, "answer_id": 32237322, "question_id": 32237065, "link": "https://stackoverflow.com/questions/32237065/dealing-with-painfully-long-namespace-names-in-headers/32237322#32237322", "title": "Dealing with painfully long namespace names in headers", "body": "<p>Here is what I feel.</p>\n\n<p>First of all you should create your <em>own</em> namespaces. Then you can draw in other namespace symbols without polluting the global namespace.</p>\n\n<p>If the namespace you are accessing is truly <em>massive</em> (like <code>std</code>) then I would <em>always</em> either use the <code>std::</code> qualifier or declare the types explicitly:</p>\n\n<pre><code>namespace my_project {\n\nstd::string s; // qualify\n\n// or declare specific types\nusing std::string;\n\n} // my_project\n</code></pre>\n\n<p>If the namespace is from your own project or a <em>relatively small</em> library then I see no reason not to inject the whole namespace into your own (never into the global namespace).</p>\n\n<pre><code>namespace my_project {\n\nusing namespace xmltools; // never do this in global namespace\n\n// use without prefix here\n\n} // my_project\n</code></pre>\n\n<p>The key is to use your <em>own</em> namespaces. Then what you do inside them will have less affect on people using your headers.</p>\n\n<p>I think the main point is to remember that if someone injects the symbols from <em>your</em> namespace into their own they should not be <em>surprised</em> by what it contains.</p>\n\n<p>So if my library builds on another library it may be <em>normal</em> for my library to contain the type symbols from the other library and someone injecting my namespace into theirs would also expect that.</p>\n"}, {"tags": [], "owner": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "is_accepted": true, "score": 5, "last_activity_date": 1490700943, "last_edit_date": 1490700943, "creation_date": 1440631851, "answer_id": 32238331, "question_id": 32237065, "link": "https://stackoverflow.com/questions/32237065/dealing-with-painfully-long-namespace-names-in-headers/32238331#32238331", "title": "Dealing with painfully long namespace names in headers", "body": "<p>It's not good practice to have a <code>using namespace</code> using directive at global scope in a header file. There are a number of less drastic things you can do that are fairly benign however.</p>\n\n<ul>\n<li>Inside an inline or template function in a header, you can use a using directive without affecting anyone else. This saves you having to qualify all the names in a non-trivial function body.</li>\n<li>As Maksim Solovjov suggests, you can use namespace aliases to cut down on typing, with the caveat that a namespace alias at global scope will introduce that alias to anyone including your header so that may not be desirable.</li>\n<li>C++11 introduced <a href=\"http://en.cppreference.com/w/cpp/language/type_alias\" rel=\"nofollow noreferrer\">type aliases and alias templates</a> which can be used in a header at class scope, function scope or namespace scope (you may still want to avoid using them at global scope) to give a shorter name to types. This is particularly useful when dealing with template types with long names like e.g. <code>std::map&lt;std::string, std::vector&lt;std::function&lt;float(float)&gt;&gt;&gt;</code></li>\n<li>C++11 and 14 type deduction through the <code>auto</code> keyword can greatly reduce the need to name long types in headers, whether function return types, local variables or parameters to lambdas.</li>\n<li>C++11 <code>decltype</code> can also be useful to avoid saying the names of long types in certain situations.</li>\n</ul>\n"}], "owner": {"reputation": 4666, "user_id": 981367, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ca05a550269a76bcdc899350338f5501?s=128&d=identicon&r=PG", "display_name": "VoidStar", "link": "https://stackoverflow.com/users/981367/voidstar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2271, "favorite_count": 3, "accepted_answer_id": 32238331, "answer_count": 3, "score": 7, "last_activity_date": 1490700943, "creation_date": 1440624754, "question_id": 32237065, "link": "https://stackoverflow.com/questions/32237065/dealing-with-painfully-long-namespace-names-in-headers", "title": "Dealing with painfully long namespace names in headers", "body": "<p>Is there anything that can be done about looong symbols that need to be referenced in header files, e.g. <code>ABDEFGHIJ::ZXCBVB::AWEDADSDEM::GFGBKGDF::Tools::Item</code>? I know in header files you aren't supposed to using <code>using</code> because it messes up anybody who includes it.</p>\n\n<p>The only working feature that cleans up after itself that I can even think of would be <code>#define</code>+<code>#undef</code> but that seems terrible.</p>\n\n<p>Is there a new feature that solves this that I'm not aware of? I'm also interested in any popular proposals. Maybe <code>using</code> with a bracketed block syntax, to let me restrict the effect to just my header...?</p>\n"}, {"tags": ["c++", "qml", "qtquick2", "qabstractlistmodel"], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 4749820, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/DbCTa.png?s=128&g=1", "display_name": "fhammer", "link": "https://stackoverflow.com/users/4749820/fhammer"}, "edited": false, "score": 0, "creation_date": 1440847850, "post_id": 32237183, "comment_id": 52448741, "body": "I suggest you think about a QAbstractItemModel as base class for the model, right? How can a QQmlListProperty be integrated into that?"}, {"owner": {"reputation": 733, "user_id": 1412348, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oKiKq.png?s=128&g=1", "display_name": "AntonyG", "link": "https://stackoverflow.com/users/1412348/antonyg"}, "reply_to_user": {"reputation": 71, "user_id": 4749820, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/DbCTa.png?s=128&g=1", "display_name": "fhammer", "link": "https://stackoverflow.com/users/4749820/fhammer"}, "edited": false, "score": 0, "creation_date": 1440939186, "post_id": 32237183, "comment_id": 52470190, "body": "Your model seems quite simple, so you wouldn&#39;t need to inherit from qabstractmodelitem, juse use some qobjects. I will give you a code example in the coming day"}], "tags": [], "owner": {"reputation": 733, "user_id": 1412348, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oKiKq.png?s=128&g=1", "display_name": "AntonyG", "link": "https://stackoverflow.com/users/1412348/antonyg"}, "is_accepted": false, "score": 0, "last_activity_date": 1440625306, "creation_date": 1440625306, "answer_id": 32237183, "question_id": 32237037, "link": "https://stackoverflow.com/questions/32237037/qml-best-way-to-implement-c-listmodel/32237183#32237183", "title": "QML - best way to implement C++ ListModel", "body": "<p>Seems like a using a QQmlListProperty as described in <a href=\"http://doc.qt.io/qt-5/qtqml-cppintegration-exposecppattributes.html#properties-with-object-list-types\" rel=\"nofollow\">http://doc.qt.io/qt-5/qtqml-cppintegration-exposecppattributes.html#properties-with-object-list-types</a> would be a good fit for your model.</p>\n\n<p>And if you happen to still be on Qt 4.8, a QList of your own QObject-derived class would probably work too. More information about this could be found in: <a href=\"http://doc.qt.io/qt-4.8/qdeclarativemodels.html#c-data-models\" rel=\"nofollow\">http://doc.qt.io/qt-4.8/qdeclarativemodels.html#c-data-models</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 4749820, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/DbCTa.png?s=128&g=1", "display_name": "fhammer", "link": "https://stackoverflow.com/users/4749820/fhammer"}, "edited": false, "score": 0, "creation_date": 1440847965, "post_id": 32268153, "comment_id": 52448772, "body": "Sorry, i think i cannot add another dependency to our project ... my colleagues will kill me -.-"}], "tags": [], "owner": {"reputation": 147, "user_id": 4866666, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/10206928413717796/picture?type=large", "display_name": "Thom Armax", "link": "https://stackoverflow.com/users/4866666/thom-armax"}, "is_accepted": false, "score": 1, "last_activity_date": 1440755453, "creation_date": 1440755453, "answer_id": 32268153, "question_id": 32237037, "link": "https://stackoverflow.com/questions/32237037/qml-best-way-to-implement-c-listmodel/32268153#32268153", "title": "QML - best way to implement C++ ListModel", "body": "<p>A good way to create powerful data models in Qt is to use <code>QAbstractItemModel</code> (<a href=\"http://doc.qt.io/qt-5/qabstractitemmodel.html\" rel=\"nofollow\">http://doc.qt.io/qt-5/qabstractitemmodel.html</a>)\nI'm creating a Qt/QML addons lib you can base on : <a href=\"https://github.com/ThomArmax/QtArmax\" rel=\"nofollow\">https://github.com/ThomArmax/QtArmax</a></p>\n\n<p>See <a href=\"https://github.com/ThomArmax/QtArmax/tree/develop/src/core/datamodels\" rel=\"nofollow\">https://github.com/ThomArmax/QtArmax/tree/develop/src/core/datamodels</a> for more implementation informations</p>\n"}], "owner": {"reputation": 71, "user_id": 4749820, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/DbCTa.png?s=128&g=1", "display_name": "fhammer", "link": "https://stackoverflow.com/users/4749820/fhammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2139, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1440755453, "creation_date": 1440624620, "question_id": 32237037, "link": "https://stackoverflow.com/questions/32237037/qml-best-way-to-implement-c-listmodel", "title": "QML - best way to implement C++ ListModel", "body": "<p>Currently i have a ListModel defined in QML with many different Fields in each ListElement. The delegate react in different ways based on the \"myType\" value.</p>\n\n<pre><code>ListView {\n        id: createLocalGameViewList\n        anchors.fill: parent\n        model: ListModel {\n            id: createLocalGameViewModel\n            ListElement {\n                myId: \"comboBox_NumberOfPlayers\"\n                myTitle: qsTr(\"Number of players\")\n                myType: \"ComboBox\"\n                myValuesList: [\n                    ListElement { value: \"10\" },\n                    ListElement { value: \"9\" },\n                    ListElement { value: \"8\" },\n                    ListElement { value: \"7\" },\n                    ListElement { value: \"6\" },\n                    ListElement { value: \"5\" },\n                    ListElement { value: \"4\" },\n                    ListElement { value: \"3\" },\n                    ListElement { value: \"2\" }\n                ]\n                myValueIsIndex: false\n                myValue: \"\"\n            }\n            ListElement {\n                myId: \"spinBox_StartCash\"\n                myTitle: qsTr(\"Start cash\")\n                myType: \"SpinBox\"\n                myMaxValue: \"1000000\"\n                myMinValue: \"1000\"\n                myPrefix: \"$\"\n                myValue: \"\"\n            }\n            ListElement {\n                myId: \"spinBox_StartBlind\"\n                myTitle: qsTr(\"Start blind\")\n                myType: \"SpinBox\"\n                myMaxValue: \"20000\"\n                myMinValue: \"5\"\n                myPrefix: \"$\"\n                myValue: \"\"\n            }                \n            ListElement {\n                myId: \"selector_BlindsRaiseInterval\"\n                myTitle: qsTr(\"Blinds raise interval\")\n                myType: \"BlindsRaiseInterval\"\n                myRaiseOnHandsType: \"\" //if false it is raise on minutes type\n                myRaiseOnHandsInterval: \"\"\n                myRaiseOnMinutesInterval: \"\"\n            }\n            ListElement {\n                myId: \"selector_BlindsRaiseMode\"\n                myTitle: qsTr(\"Blinds raise mode\")\n                myType: \"BlindsRaiseMode\"\n                myAlwaysDoubleBlinds: \"\" //if false it is \"Manual Blinds Order\"\n                myManualBlindsList: []\n                myAfterMBAlwaysDoubleBlinds: \"\"\n                myAfterMBAlwaysRaiseAbout: \"\"\n                myAfterMBAlwaysRaiseValue: \"\"\n                myAfterMBStayAtLastBlind: \"\"\n            }\n            ListElement {\n                myId: \"comboBox_GameSpeed\"\n                myTitle: qsTr(\"Game speed\")\n                myType: \"ComboBox\"\n                myValuesList: [\n                    ListElement { value: \"11\" },\n                    ListElement { value: \"10\" },\n                    ListElement { value: \"9\" },\n                    ListElement { value: \"8\" },\n                    ListElement { value: \"7\" },\n                    ListElement { value: \"6\" },\n                    ListElement { value: \"5\" },\n                    ListElement { value: \"4\" },\n                    ListElement { value: \"3\" },\n                    ListElement { value: \"2\" },\n                    ListElement { value: \"1\" }\n                ]\n                myValue: \"\"\n                myValueIsIndex: false\n            }\n</code></pre>\n\n<p>When the ListView Component is completed i read some config values from a C++ class called \"Config\". </p>\n\n<pre><code>            Component.onCompleted: {\n                //set Config Values from config file\n                createLocalGameViewModel.setProperty(0, \"myValue\", Config.readConfigIntString(\"NumberOfPlayers\"));\n                createLocalGameViewModel.setProperty(1, \"myValue\", Config.readConfigIntString(\"StartCash\"));\n                createLocalGameViewModel.setProperty(2, \"myValue\", Config.readConfigIntString(\"FirstSmallBlind\"));\n                createLocalGameViewModel.setProperty(3, \"myRaiseOnHandsType\", Config.readConfigIntString(\"RaiseBlindsAtHands\"));\n                createLocalGameViewModel.setProperty(3, \"myRaiseOnHandsInterval\", Config.readConfigIntString(\"RaiseSmallBlindEveryHands\"));\n                createLocalGameViewModel.setProperty(3, \"myRaiseOnMinutesInterval\", Config.readConfigIntString(\"RaiseSmallBlindEveryMinutes\"));\n                createLocalGameViewModel.setProperty(4, \"myAlwaysDoubleBlinds\", Config.readConfigIntString(\"AlwaysDoubleBlinds\"));\n\n                var tempList = Config.readConfigIntStringList(\"ManualBlindsList\");\n                for(var i=0; i &lt; tempList.length; i++) {\n                    createLocalGameViewModel.get(4).myManualBlindsList.append({\"blindValue\": tempList[i].toString()})\n                }\n\n                createLocalGameViewModel.setProperty(4, \"myAfterMBAlwaysDoubleBlinds\", Config.readConfigIntString(\"AfterMBAlwaysDoubleBlinds\"));\n                createLocalGameViewModel.setProperty(4, \"myAfterMBAlwaysRaiseAbout\", Config.readConfigIntString(\"AfterMBAlwaysRaiseAbout\"));\n                createLocalGameViewModel.setProperty(4, \"myAfterMBAlwaysRaiseValue\", Config.readConfigIntString(\"AfterMBAlwaysRaiseValue\"));\n                createLocalGameViewModel.setProperty(4, \"myAfterMBStayAtLastBlind\", Config.readConfigIntString(\"AfterMBStayAtLastBlind\"));\n                createLocalGameViewModel.setProperty(5, \"myValue\", Config.readConfigIntString(\"GameSpeed\"));\n            }\n</code></pre>\n\n<p>When the listView is finished i need to pass the edited data to C++. So i realized it is not the best way to build the Model in QML. So i'am plan to create the model in C++ but i never did this before. So my question is: Which kind of model structure would be the best for this usecase, but is not too complex to setup? </p>\n\n<p>Or is there another not too ugly way to put the data from the QML model to c++ context?</p>\n"}, {"tags": ["c++", "oop", "design-patterns"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1440623787, "post_id": 32236813, "comment_id": 52355935, "body": "A constructor is part of a specific class. When you call a constructor, you have already decided the specific class you want. So if your problem requires you to decide the class <i>based on the value of one of the arguments</i>, then class constructors are not the right place for this. (Perhaps you want some kind of factory function.)"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440623842, "post_id": 32236813, "comment_id": 52355959, "body": "Simple answer is NO. There&#39;s no such thing like a <code>virtual</code> constructor."}, {"owner": {"reputation": 2937, "user_id": 2711403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e0e461d9bbecad550475b778b61b089c?s=128&d=identicon&r=PG", "display_name": "Ujjwal Aryan", "link": "https://stackoverflow.com/users/2711403/ujjwal-aryan"}, "edited": false, "score": 0, "creation_date": 1440623884, "post_id": 32236813, "comment_id": 52355990, "body": "So, my situation is pertaining to a factory design pattern ? I would read up on it."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440623897, "post_id": 32236813, "comment_id": 52355996, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: A Stack Overflow version of &quot;Simon Says&quot;? <code>{&quot;Noo&quot;, &quot;Use JQuery&quot;, &quot;Off-topic&quot;}</code>?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1440623945, "post_id": 32236813, "comment_id": 52356018, "body": "@KerrekSB My tablet&#39;s own life ;-) ... They&#39;ve been building some text recognition KI with it, I don&#39;t appreciate most of the time."}, {"owner": {"reputation": 658, "user_id": 4763421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daf648d3b48bfd2ceb55c75e71b32288?s=128&d=identicon&r=PG&f=1", "display_name": "blashser", "link": "https://stackoverflow.com/users/4763421/blashser"}, "edited": false, "score": 2, "creation_date": 1440624147, "post_id": 32236813, "comment_id": 52356104, "body": "Please, show us an example of what you are thinking. Because it may be that what you need is to use an interface, a factory method or a strategy pattern."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1440624548, "post_id": 32236813, "comment_id": 52356279, "body": "@KerrekSB Nice idea anyway, maybe my tablet isn&#39;t as dumb as I think it is :-D ..."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440624827, "post_id": 32236813, "comment_id": 52356393, "body": "I&#39;m voting to close this question as off-topic because asking for the existence of unicorns is useless in the commonly accepted scientific context."}, {"owner": {"reputation": 2937, "user_id": 2711403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e0e461d9bbecad550475b778b61b089c?s=128&d=identicon&r=PG", "display_name": "Ujjwal Aryan", "link": "https://stackoverflow.com/users/2711403/ujjwal-aryan"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440625059, "post_id": 32236813, "comment_id": 52356494, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6  Before you use your powers to simply close questions, please know that no everyone is on the same level of proficiency. There are a whole lot of even dumber programming questions on Stackoverflow. These conceptual questions are the real doubts most beginning and intermediate programmers face. So, either make stackoverflow  meant only for great coders, or don&#39;t declare such questions off-topic in a condescending way."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1440625240, "post_id": 32236813, "comment_id": 52356573, "body": "@UjjwalAryan Research before applying unsolicited critique on comments or votes please! Research can be expected from everyone hitting up here, no matter, if they&#39;re experienced with the topic or not?"}, {"owner": {"reputation": 2937, "user_id": 2711403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e0e461d9bbecad550475b778b61b089c?s=128&d=identicon&r=PG", "display_name": "Ujjwal Aryan", "link": "https://stackoverflow.com/users/2711403/ujjwal-aryan"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440625384, "post_id": 32236813, "comment_id": 52356638, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I did research. But please understand that it is difficult sometimes on some issues for people (and even good ones!!) to clearly phrase something. I also work in some area in which I am very good at. If someone asks a not-so-accurate question in that area, I would rather direct the person in the right direction rather than simply pass remarks. Thanks"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1440626018, "post_id": 32236813, "comment_id": 52356879, "body": "@UjjwalAryan So you rather want me applying my powers to mark your question as a duplicate of <a href=\"http://stackoverflow.com/search?q=%5Bc%2B%2B%5Dvirtual+constructor\">one of these</a>?? No, you&#39;re not convincing me regarding your research efforts shown in your question. I&#39;m out of downvotes today, that&#39;s the only reason your question is limboing at a state of zero score yet."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440626520, "post_id": 32236813, "comment_id": 52357108, "body": "@UjjwalAryan If you have any doubts, you might want to discuss this on <a href=\"http://meta.stackoverflow.com/questions/ask\">Meta StackOverflow</a>."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4386938"}, "is_accepted": false, "score": 1, "last_activity_date": 1440624018, "creation_date": 1440624018, "answer_id": 32236900, "question_id": 32236813, "link": "https://stackoverflow.com/questions/32236813/using-constructor-declaration-as-a-virtual-function/32236900#32236900", "title": "Using constructor declaration as a virtual function", "body": "<p>You cannot have a virtual constructor in C++. See <a href=\"http://www.stroustrup.com/bs_faq2.html#virtual-ctor\" rel=\"nofollow\">http://www.stroustrup.com/bs_faq2.html#virtual-ctor</a> Constructors of superclasses should be called when constructing an object of a subclass</p>\n"}, {"comments": [{"owner": {"reputation": 2937, "user_id": 2711403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e0e461d9bbecad550475b778b61b089c?s=128&d=identicon&r=PG", "display_name": "Ujjwal Aryan", "link": "https://stackoverflow.com/users/2711403/ujjwal-aryan"}, "edited": false, "score": 0, "creation_date": 1440624842, "post_id": 32236919, "comment_id": 52356402, "body": "Thanks. I do not have a lot of experience with design patterns. So perhaps it was a dumb question for many, but it helps to know the factory design pattern. Thank you :)"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 2937, "user_id": 2711403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e0e461d9bbecad550475b778b61b089c?s=128&d=identicon&r=PG", "display_name": "Ujjwal Aryan", "link": "https://stackoverflow.com/users/2711403/ujjwal-aryan"}, "edited": false, "score": 0, "creation_date": 1440624972, "post_id": 32236919, "comment_id": 52356455, "body": "@UjjwalAryan Just one thing - factory and virtual constructor are actually slightly different. Classic factory creates an object by analyzing it&#39;"}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 1, "last_activity_date": 1440624068, "creation_date": 1440624068, "answer_id": 32236919, "question_id": 32236813, "link": "https://stackoverflow.com/questions/32236813/using-constructor-declaration-as-a-virtual-function/32236919#32236919", "title": "Using constructor declaration as a virtual function", "body": "<p>While C++ doesn't have virtual constructors, 'virtual constructor' is a well-known (albeit not preferred by me) design pattern. You can google it up, it is pretty straightforward.</p>\n"}], "owner": {"reputation": 2937, "user_id": 2711403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e0e461d9bbecad550475b778b61b089c?s=128&d=identicon&r=PG", "display_name": "Ujjwal Aryan", "link": "https://stackoverflow.com/users/2711403/ujjwal-aryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 32236919, "answer_count": 2, "score": -1, "last_activity_date": 1440624068, "creation_date": 1440623680, "question_id": 32236813, "link": "https://stackoverflow.com/questions/32236813/using-constructor-declaration-as-a-virtual-function", "title": "Using constructor declaration as a virtual function", "body": "<p>I am not sure whether the question title is appropriate with respect to the details below.</p>\n\n<p>I am working with a number of datasets which are widely different. So, I conceptualised that I would create a Base class \"Dataset\", from which \"Dataset1\", \"Dataset2\" etc would inherit. Now the situation is as follows:-</p>\n\n<p>I want to have a uniform constructor as follows :-</p>\n\n<p>Dataset(std::string category, )</p>\n\n<p>So, for each dataset class I want to initialize them with category as the first argument and other variable arguments (which depend upon specific dataset).</p>\n\n<p>My question is :-</p>\n\n<p>Can I have a virtual constructor function in Dataset class, which can be inherited by \"Dataset1\", \"Dataset2\" and so on ? Is this the right design choice ? How do I implement it (variable arguments etc ) ?</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1440623721, "post_id": 32236678, "comment_id": 52355910, "body": "So you are refreshing a window with the same identical image? Btw, Point3i* is probably something you should avoid. What&#39;s points? Slices? Etc... More code needed! (something we can copy&amp;paste&amp;run)"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1440623864, "post_id": 32236678, "comment_id": 52355976, "body": "Also, can you better explain better your main goal? It seems that your approach is wrong"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1440629588, "post_id": 32236678, "comment_id": 52358210, "body": "Before going any deeper, be sure that you can actually have 2 mouse listener in opencv. I don&#39;t think so"}, {"owner": {"reputation": 632, "user_id": 1888132, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/57a6dd8a392904a96b77e47ced02d0f5?s=128&d=identicon&r=PG", "display_name": "darkpirate", "link": "https://stackoverflow.com/users/1888132/darkpirate"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1440630073, "post_id": 32236678, "comment_id": 52358376, "body": "i was thinking about that... but i don&#39;t see why not"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1440630234, "post_id": 32236678, "comment_id": 52358414, "body": "Because opencv is not really that fancy when it comes to gui. I&#39;m not entirely sure, however. You should check that before going further"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1440658609, "post_id": 32236678, "comment_id": 52366452, "body": "can you try to call cv::namedWindow just before the imshow? implicit window creation by imshow call often fails (and then freezes) on threads."}, {"owner": {"reputation": 2015, "user_id": 767368, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eb726c5a7c381595a93330d216db86bf?s=128&d=identicon&r=PG", "display_name": "Nallath", "link": "https://stackoverflow.com/users/767368/nallath"}, "edited": false, "score": 0, "creation_date": 1440687082, "post_id": 32236678, "comment_id": 52385696, "body": "OpenCV&#39;s gui is not really made for this kind of stuff. I would not recommend using it for anything more than debugging purposes."}, {"owner": {"reputation": 632, "user_id": 1888132, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/57a6dd8a392904a96b77e47ced02d0f5?s=128&d=identicon&r=PG", "display_name": "darkpirate", "link": "https://stackoverflow.com/users/1888132/darkpirate"}, "edited": false, "score": 0, "creation_date": 1440715991, "post_id": 32236678, "comment_id": 52401138, "body": "thank you guys. I&#39;ll use roy or qt then."}], "owner": {"reputation": 632, "user_id": 1888132, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/57a6dd8a392904a96b77e47ced02d0f5?s=128&d=identicon&r=PG", "display_name": "darkpirate", "link": "https://stackoverflow.com/users/1888132/darkpirate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 337, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1618935139, "creation_date": 1440623138, "last_edit_date": 1618935139, "question_id": 32236678, "link": "https://stackoverflow.com/questions/32236678/opencv-c-thread-looping-imshow", "title": "Opencv c++ thread looping imshow", "body": "<p>I'm trying to open multiple windows in a c++ program which have to be refreshed constantly. So I wrote this code:</p>\n<pre><code>        void Seedselector::seedsInit()\n        {\n            vector&lt;thread&gt; th;\n        \n            unsigned int k = 0;\n            for (vector&lt;vector&lt;Point3i*&gt;&gt;::iterator itr = points.begin(); itr &lt; points.end();itr++)\n            {   \n                const string name = &quot;Fig. &quot; + to_string(k + 1);\n                namedWindow(name,CV_GUI_EXPANDED);\n                setMouseCallback(name, onmouse, &amp;slices[k]);\n                setMouseCallback(name, onmouse2, &amp;slices[k]); \n                th.push_back(thread(&amp;Seedselector::onThread, this, slices[k], name));\n            }\n        \n            for (vector&lt;thread&gt;::iterator itr = th.begin(); itr &lt; th.end(); itr++)\n                (*itr).join();\n        \n            k = 0;\n            for (vector&lt;vector&lt;Point3i*&gt;&gt;::iterator itr1 = points.begin(); itr1 &lt; points.end(); itr1++)\n            {\n                for (vector&lt;Point3i*&gt;::iterator itr2 = (*itr1).begin(); itr2 &lt; (*itr1).end(); itr2++)\n                    (*itr2)-&gt;z = *(idslices.begin() + k) - 1;\n                k++;\n            }\n        }\n    \n    void Seedselector::onThread(Mat *sl, string name)\n    {\n        do\n        {\n            imshow(name, *sl);\n            waitKey(500);\n        } while (!exit);\n    }\n    \n    void Seedselector::onmouse(int event, int x, int y, int flag, void* param)\n    {\n        vector&lt;Point3i*&gt; *pt = (vector&lt;Point3i*&gt; *)param;\n    \n        if (event == CV_EVENT_MOUSEMOVE &amp;&amp; flag == CV_EVENT_FLAG_LBUTTON)\n            if (x &gt;= 0 &amp;&amp; y &gt;= 0 &amp;&amp; x &lt; rows &amp;&amp; y &lt; cols )\n            {\n                pt-&gt;push_back(new Point3i(x, y, 0));\n    \n                cout &lt;&lt; &quot;selecting x: &quot; &lt;&lt; x &lt;&lt; &quot;y: &quot; &lt;&lt; y &lt;&lt; endl;\n            }\n    \n            if (event == CV_EVENT_LBUTTONDBLCLK)\n            {\n                destroyAllWindows();\n                exit = true;\n            }\n        \n    }\n\nvoid Seedselector::onmouse2(int event, int x, int y, int flag, void* param)\n{\n    Mat* img = static_cast&lt;Mat*&gt; (param);\n\n    if (event == CV_EVENT_MOUSEMOVE &amp;&amp; flag == CV_EVENT_FLAG_LBUTTON)\n        if (x &gt;= 0 &amp;&amp; y &gt;= 0 &amp;&amp; x &lt; rows &amp;&amp; y &lt; cols)\n         {\n            circle(*img, Point(x, y), 1, Scalar(255, 255, 255), 1, 4, 0);\n         } \n}\n</code></pre>\n<p>with exit being a global variable set to false.</p>\n<p>Strangely, it arrives at the imshow, but then the image is not shown and according to the debugger it never executes the waitkey command... any suggestion on the matter?</p>\n<p>Ok, since more code was requested I'll go further in the matter. I need to paint on those images using a couple of mouse listeners one of which saves the points &quot;colored&quot; and the other one doing the actual &quot;painting&quot;.</p>\n<p>So the goal is to &quot;paintbrush&quot; on the images and then saves all the painted points in the vector of vector of points ( yes the nested vector is needed ).</p>\n"}, {"tags": ["c++", "c++11", "move", "lvalue"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1440623031, "post_id": 32236616, "comment_id": 52355570, "body": "Just looking at your question title, the answer is that temporary objects are (by definition) prvalues, and <code>std::move</code> is just a cast, which is unnecessary in that case."}], "answers": [{"tags": [], "owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "is_accepted": true, "score": 17, "last_activity_date": 1440623157, "creation_date": 1440623157, "answer_id": 32236683, "question_id": 32236616, "link": "https://stackoverflow.com/questions/32236616/c11-is-using-stdmove-only-safe-on-temporary-objects/32236683#32236683", "title": "C++11: Is using std::move only safe on temporary objects?", "body": "<p>On the contrary. Using <code>std::move</code> on temporary objects is pointless. They're already R-values, and will be deduced as R-value references when passed to functions. The whole point of <code>std::move</code> is to turn L-values into R-value references so they can be moved from.</p>\n\n<blockquote>\n  <p>So I'm figuring that it's safe to steal (move) its elements data\n  because they won't be used again.</p>\n</blockquote>\n\n<p>Yes, this is correct.</p>\n"}, {"tags": [], "owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "is_accepted": false, "score": 4, "last_activity_date": 1440624300, "last_edit_date": 1440624300, "creation_date": 1440623202, "answer_id": 32236692, "question_id": 32236616, "link": "https://stackoverflow.com/questions/32236616/c11-is-using-stdmove-only-safe-on-temporary-objects/32236692#32236692", "title": "C++11: Is using std::move only safe on temporary objects?", "body": "<p>In general, <strong>temporary objects are unnamed and are already rvalues</strong>. <code>std::move</code> isn't really applicable, since it is unnamed.</p>\n\n<p>When is <code>std::move</code> applicable? Whenever the object is going to expire and would no longer be required. This is what <code>std::move</code> does, it casts the value category such that it can be moved from.</p>\n\n<p>It is something of an interesting use case - stealing the (filtered) contents of a container and not just the entire container.</p>\n\n<p>Given the contents of the <code>vector</code> are not going to be required after the <code>for</code> loop completes, <strong>then yes, it would work as expected</strong>.</p>\n"}], "owner": {"reputation": 1129, "user_id": 1866808, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/590f81e0d4226f41f1d0f9cc4c01fd36?s=128&d=identicon&r=PG", "display_name": "bombax", "link": "https://stackoverflow.com/users/1866808/bombax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3471, "favorite_count": 2, "accepted_answer_id": 32236683, "answer_count": 2, "score": 11, "last_activity_date": 1440624300, "creation_date": 1440622845, "question_id": 32236616, "link": "https://stackoverflow.com/questions/32236616/c11-is-using-stdmove-only-safe-on-temporary-objects", "title": "C++11: Is using std::move only safe on temporary objects?", "body": "<p>In my code, I have something like this:</p>\n\n<pre><code>unordered_multimap&lt;string, unordered_map&lt;string, string&gt; &gt; mEntities;\n...\nvector&lt;unordered_map&lt;string, string&gt; &gt; rawEntities;\nif (qi::phrase_parse(&amp;buf[0], (&amp;buf[0]) + buf.size(), EntityParser&lt;char*&gt;(), qi::space, rawEntities)) {\n    for (auto &amp;propGroup : rawEntities) {\n        auto search = propGroup.find(\"classname\");\n        if (search != propGroup.end()) {\n            // is stealing propGroup safe???\n            mEntities.emplace(search-&gt;second, std::move(propGroup)); \n        }\n    }\n}\n// rawEntities goes out of scope here\n</code></pre>\n\n<p>As you can see, I'm using <code>std::move</code> on an object of type deduced to <code>unordered_map&lt;string, string&gt;&amp;</code>, which is obviously not <code>unordered_map&lt;string, string&gt;&amp;&amp;</code>. Still, I know for sure that because <code>rawEntities</code> goes out of scope after the <code>for</code> loop, its elements (the string->string maps) will never be used again. So I'm figuring that it's safe to steal (move) its elements data because they won't be used again.</p>\n\n<p>When I run the program, it seems to work. But is this bad practice / an anti-pattern, and particularly, does the standard guarantee it is safe?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 12800, "user_id": 214796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d05177bba9d853a9c546c4a965085e99?s=128&d=identicon&r=PG", "display_name": "Collin Dauphinee", "link": "https://stackoverflow.com/users/214796/collin-dauphinee"}, "edited": false, "score": 0, "creation_date": 1440625243, "post_id": 32236609, "comment_id": 52356576, "body": "What is the exact error you get, and on which line?"}, {"owner": {"reputation": 10110, "user_id": 1715829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c0yet.jpg?s=128&g=1", "display_name": "Buddy", "link": "https://stackoverflow.com/users/1715829/buddy"}, "edited": false, "score": 0, "creation_date": 1440647905, "post_id": 32236609, "comment_id": 52362420, "body": "You can also remove the loops by doing a <a href=\"http://en.cppreference.com/w/cpp/container/multiset/insert\" rel=\"nofollow noreferrer\">range insert</a>: <code>TmpContainer.insert(mDrawableReferences.begin(), mDrawableReferences.end())</code>"}, {"owner": {"reputation": 11, "user_id": 5181343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c932a66b81b023b823294e96ad3a4c4?s=128&d=identicon&r=PG&f=1", "display_name": "Halil KARAG&#214;Z", "link": "https://stackoverflow.com/users/5181343/halil-karag%c3%96z"}, "reply_to_user": {"reputation": 12800, "user_id": 214796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d05177bba9d853a9c546c4a965085e99?s=128&d=identicon&r=PG", "display_name": "Collin Dauphinee", "link": "https://stackoverflow.com/users/214796/collin-dauphinee"}, "edited": false, "score": 0, "creation_date": 1440658570, "post_id": 32236609, "comment_id": 52366423, "body": "@Collin Dauphinee The program is compiling. ReOrder function is called with a mouse button release. When I release the button compiler throws an iterator not incrementable error. But when I comment swap() or clear() out program doesn&#39;t throw any erros when mouse released (Beacuse this causes multisets&#39; size to be doubled on every mouse release it causes the program to crash. - I did this to detect the problem anyway)."}], "owner": {"reputation": 11, "user_id": 5181343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c932a66b81b023b823294e96ad3a4c4?s=128&d=identicon&r=PG&f=1", "display_name": "Halil KARAG&#214;Z", "link": "https://stackoverflow.com/users/5181343/halil-karag%c3%96z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1440622800, "creation_date": 1440622800, "question_id": 32236609, "link": "https://stackoverflow.com/questions/32236609/resorting-a-stdmultiset-container", "title": "Resorting A std::multiset Container", "body": "<p>In my program when I make a change, I want to reorder my set but when I call these two alternative functions I get an iterator not incrementable error. I realised that the problem occurs when I call clear() or swap(). How can I correct this code or is there any other way to do the rearranging? </p>\n\n<pre><code>void CObjectHandling::ReOrder()\n{\n    multiset&lt;IDrawable*, Drawable_compare&gt; TmpContainer;\n\n    for (auto i = mDrawableReferences.begin(); i != mDrawableReferences.end(); ++i)\n    {\n        TmpContainer.insert(*i);\n    }\n\n    mDrawableReferences.clear();\n\n    for (auto i = TmpContainer.begin(); i != TmpContainer.end(); ++i)\n    {\n        mDrawableReferences.insert(*i);\n    }\n\n    TmpContainer.clear();\n\n}\n</code></pre>\n\n<p>.</p>\n\n<pre><code>void CObjectHandling::ReOrder()\n{\n    multiset&lt;IDrawable*, Drawable_compare&gt; TmpContainer;\n\n    for (auto i = mDrawableReferences.begin(); i != mDrawableReferences.end(); ++i)\n    {\n        TmpContainer.insert(*i);\n    }\n\n    mDrawableReferences.swap(TmpContainer);\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "lambda"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4386938"}, "edited": false, "score": 0, "creation_date": 1440624727, "post_id": 32236599, "comment_id": 52356355, "body": "That&#39;s weird I would think that&#39;s perfectly legal code ... You could choose to use <code>std::function</code> though. That should be almost as efficient"}, {"owner": {"reputation": 7173, "user_id": 52534, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/17d0d29fb3b7ff0dc1433e08bfe175fc?s=128&d=identicon&r=PG", "display_name": "patros", "link": "https://stackoverflow.com/users/52534/patros"}, "edited": false, "score": 1, "creation_date": 1440626577, "post_id": 32236599, "comment_id": 52357138, "body": "Out of curiosity, what does VS2013 make of:  const std::function&lt;bool(int, int)&gt; f = [](int l, int r) { return l &lt; r; }; const std::function&lt;bool(int, int)&gt; g = f;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4386938"}, "edited": false, "score": 1, "creation_date": 1440626926, "post_id": 32236599, "comment_id": 52357287, "body": "So curious. Why would the lambda be constructed in the implementation of <code>std::map</code>. I would think it&#39;s copy constructed from the argument.."}, {"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "edited": false, "score": 0, "creation_date": 1440628451, "post_id": 32236599, "comment_id": 52357837, "body": "@AaryamanSagar  Yes, I think it would be possible. But I would doubt the efficiency would be the same quite strongly. Apart from an allocation needed in case a lambda has a large state and doesn&#39;t allow small function optimization, it is always an additional indirection because of type erasure and compilers have troubles inlining them (for a nice and short explanation see <a href=\"http://stackoverflow.com/a/16733258/3589890\">here</a>), so performance might differ a lot."}, {"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "reply_to_user": {"reputation": 7173, "user_id": 52534, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/17d0d29fb3b7ff0dc1433e08bfe175fc?s=128&d=identicon&r=PG", "display_name": "patros", "link": "https://stackoverflow.com/users/52534/patros"}, "edited": false, "score": 0, "creation_date": 1440628562, "post_id": 32236599, "comment_id": 52357878, "body": "@patros Well, I believe it&#39;s as simple as it makes a copy of the lambda object and then erases its type (again, an allocation might occur depending on the size of lambda, in case of stateless lambda like in your example - it likely will not because SFO will kick in)."}, {"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "edited": false, "score": 0, "creation_date": 1440628749, "post_id": 32236599, "comment_id": 52357947, "body": "@AaryamanSagar Yeah, it&#39;s &quot;interesting&quot;. But given that it&#39;s only VS2013 behaviour, it might be an STL implementation bug which was fixed in VS2015. However, your comment inspired an additional potential difference between ref wrap and raw ref. See my edit."}, {"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 0, "creation_date": 1440629153, "post_id": 32236599, "comment_id": 52358072, "body": "2013 should be able to compile this code."}, {"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "reply_to_user": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 0, "creation_date": 1440631162, "post_id": 32236599, "comment_id": 52358669, "body": "@Puppy If you refer to the first code snippet - it should, but it doesn&#39;t :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4386938"}, "edited": false, "score": 0, "creation_date": 1440633633, "post_id": 32236599, "comment_id": 52359315, "body": "I think when an <code>std::function</code> is storing a simple stateless function, like yours in the first example it should have similar performance. Given that it is not repeatedly copied around.. Correct me if I&#39;m wrong though. I have never really looked into <code>std::function</code>"}, {"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "edited": false, "score": 0, "creation_date": 1440636388, "post_id": 32236599, "comment_id": 52359952, "body": "@AaryamanSagar Well, the best way is to measure it, right? :) On average, after 100 iterations of inserting 30&#39;000 random numbers in a map of doubles to doubles, generated by mt19937 (with the same seed every time!), average speedup was about 20-25% when using lambda on my machine and cpp.sh, while on <a href=\"https://ideone.com/B77hIy\" rel=\"nofollow noreferrer\">ideone.com/B77hIy</a> it is up to 40-50%."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4386938"}, "edited": false, "score": 0, "creation_date": 1440637180, "post_id": 32236599, "comment_id": 52360099, "body": "I guess <code>std::function</code> is indeed a heavyweight mechanism that cannot be optimized by the compiler"}], "answers": [{"comments": [{"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "edited": false, "score": 0, "creation_date": 1440631732, "post_id": 32237957, "comment_id": 52358821, "body": "Good point, Dietmar. However, I am pretty sure that this code is equivalent to the code snippet that creates a lambda object and then uses <code>decltype(cmp)&amp;</code> - it creates an object on stack (either temporary which has its lifetime prolonged by binding an rvalue reference or just a named object) and then uses the <code>compiler_invented_lambda_name&amp;</code> as the template parameter. The question still stands - could something bad happen when a raw reference type is a template parameter - as it is in the video I linked, or any Standard-conforming STL implementation is guaranteed to work correctly?"}, {"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "edited": false, "score": 0, "creation_date": 1440631892, "post_id": 32237957, "comment_id": 52358863, "body": "And yes, it compiles with VS2013, but so does the snippet after &quot;First,&quot; (no idea how to better refer to it...)"}], "tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": false, "score": 1, "last_activity_date": 1440629387, "creation_date": 1440629387, "answer_id": 32237957, "question_id": 32236599, "link": "https://stackoverflow.com/questions/32236599/using-reference-to-lambda-as-comparator-in-a-map-the-right-way/32237957#32237957", "title": "Using reference-to-lambda as comparator in a map (the right way?)", "body": "<p>First, note that the lambda expression is a temporary, not a <code>const</code> object. It is possible to bind it to an rvalue reference just fine:</p>\n\n<pre><code>int compCounter = 0;\nauto&amp;&amp; tmp = [compCounter](int l, int r) mutable { ++compCounter; return l &lt; r; };\nauto&amp;  cmp = tmp;\nstd::map&lt;int, int, decltype(cmp)&gt; myMap(cmp);\nmyMap[1] = 1;\n</code></pre>\n\n<p>This code first binds the lambda object to an rvalue reference. Since an rvalue reference is an lvalue, the name can be bound to an lvalue reference. The lvalue reference can then be used with the <code>std::map&lt;...&gt;</code>.</p>\n\n<p>Aside from being able to compare key types, the only requirement I can find on the comparison object is that it is <code>CopyConstructible</code> (in Table 102 \"Associative container requirements\"). Base on <code>std::is_copy_constructible&lt;decltype(cmp)&gt;::value</code> it is <code>CopyConstructible</code>.</p>\n\n<p>That code certainly compiles with gcc and clang. I don't have MSVC++ accessible to check if it also compiles with MSVC++.</p>\n"}, {"comments": [{"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "edited": false, "score": 0, "creation_date": 1440639765, "post_id": 32239307, "comment_id": 52360655, "body": "Thanks for an excellent link! It does answer the question why it&#39;s working in VS2015 and not in VS2013. I&#39;m still curious if it is completely safe to pass a raw reference as a template argument to the <code>std::map</code> according to the Standard or it could go wrong as in the talk by Stephan that I linked. Thus I&#39;ll leave the question open in case a Standard-guru decides to come by :)"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1440695694, "post_id": 32239307, "comment_id": 52391229, "body": "<i>&quot;I did not actually test this, could not find old enough online compiler for Visual C++&quot;</i> Works fine! <a href=\"http://rextester.com/TVHSI85700\" rel=\"nofollow noreferrer\">rextester.com/TVHSI85700</a>"}, {"owner": {"reputation": 7107, "user_id": 2675154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81fd07359983790419b7ecf5a1098e6c?s=128&d=identicon&r=PG&f=1", "display_name": "honk", "link": "https://stackoverflow.com/users/2675154/honk"}, "edited": false, "score": 0, "creation_date": 1518988676, "post_id": 32239307, "comment_id": 84716870, "body": "I can confirm: Putting a dummy variable into the capture specification works for VS2012. Even using <code>[this]</code> works."}], "tags": [], "owner": {"reputation": 449, "user_id": 3710080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pFjoB.jpg?s=128&g=1", "display_name": "EvgEnZh", "link": "https://stackoverflow.com/users/3710080/evgenzh"}, "is_accepted": false, "score": 5, "last_activity_date": 1518990151, "last_edit_date": 1518990151, "creation_date": 1440639264, "answer_id": 32239307, "question_id": 32236599, "link": "https://stackoverflow.com/questions/32236599/using-reference-to-lambda-as-comparator-in-a-map-the-right-way/32239307#32239307", "title": "Using reference-to-lambda as comparator in a map (the right way?)", "body": "<p>The error message <code>cannot construct an instance of a lambda</code> is in fact an <a href=\"https://web.archive.org/web/20131014084905/https://connect.microsoft.com/VisualStudio/feedback/details/727957/vc11-beta-compiler-fails-to-compile-lambda-key-comparer-for-maps-and-sets\" rel=\"nofollow noreferrer\">optimization bug in the STL</a>. It is stated that this only happens with lambdas that do not capture anything, so the proposed workaround is to capture a dummy variable. (I did not actually test this; I could not find an old enough online compiler for Visual C++.)</p>\n\n<p>Using a reference to to lambda instead of the lambda itself also avoids this optimization, so <code>const auto&amp; cmp = ...</code> works, too. Const reference fails for mutable lambdas, because <code>decltype(cmp)</code> carries that const qualifier over into the map, as opposed to <code>map(cmp)</code> receiving a const reference and then creating a non-const copy. The code in <a href=\"https://stackoverflow.com/a/32237957/3710080\">Dietmar K\u00fchl's answer</a> creates a non-const reference and thus works.</p>\n\n<h2>Using references as template arguments</h2>\n\n<p>I am not really an expert here, but I will try anyway.</p>\n\n<p>As Dietmar has stated in his answer, the comparator has to be CopyConstructible. The obvious explanation is that the container constructor receives it as const reference and then creates an internal copy.</p>\n\n<p>When you use <code>CompareClass &amp;</code> as template argument, it does not matter if <code>CompareClass</code> is itself CopyConstructible, because references always are. However, in this case <em>map will hold a copy of the reference and not a copy of the object itself</em>.</p>\n\n<p>The obvious consequence is that <em><strong>you</strong> will have to make sure that the referenced object is not freed prematurely</em>. Also, all copies will reference the same object instead of each having its own copy. Except that, nothing bad should happen.</p>\n\n<p>So if you can keep track of references and are sure that they all will die before the object itself, I'd say it is safe. On the other side, it might not be transparent enough, and someone might misunderstand your code and break it. Also, note that after <code>auto &amp;a = ...</code>, <code>decltype(a)</code> will be reference type too, which is even more obscure.</p>\n\n<h2>Note on stateful map comparator</h2>\n\n<p>In case of Visual Studio, <code>map</code> internally calls the comparator from a const-qualified method. This means that the comparator's <code>operator()</code> should also be const-qualified. That is, a stateful comparator will have to \"pretend\" to be stateless, e.g. store the state in mutable fields or in other objects stored by reference. Storing the comparator as reference type works, too.</p>\n"}], "owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 941, "favorite_count": 1, "answer_count": 2, "score": 12, "last_activity_date": 1518990151, "creation_date": 1440622764, "last_edit_date": 1495541338, "question_id": 32236599, "link": "https://stackoverflow.com/questions/32236599/using-reference-to-lambda-as-comparator-in-a-map-the-right-way", "title": "Using reference-to-lambda as comparator in a map (the right way?)", "body": "<p>I want to use a lambda as a custom comparator in a <code>std::map</code> but unfortunately Visual Studio 2013 compiler does not allow using a simple code like that:</p>\n\n<pre><code>auto cmp = [](int l, int r) { return l &lt; r; };\nstd::map&lt;int, int, decltype(cmp)&gt; myMap(cmp);\nmyMap[1] = 1;\n</code></pre>\n\n<p>and fails with</p>\n\n<blockquote>\n  <p>error C3497: you cannot construct an instance of a lambda </p>\n</blockquote>\n\n<p>Seems that this code works fine in GCC 5.1 and Visual Studio 2015 (checked using  <a href=\"https://ideone.com/\" rel=\"nofollow noreferrer\">ideone</a> and <a href=\"http://webcompiler.cloudapp.net/\" rel=\"nofollow noreferrer\">VC++ online compiler</a>). But for VS2013, one of the solutions would be to use a reference as proposed <a href=\"https://stackoverflow.com/questions/30383754/hashing-function-lambda-failing-to-compile-with-unordered-map\">here</a> (note <strong>auto&amp;</strong>):</p>\n\n<pre><code>auto&amp; cmp = [](int l, int r) { return l &lt; r; };\nstd::map&lt;int, int, decltype(cmp)&gt; myMap(cmp);\nmyMap[1] = 1;\n</code></pre>\n\n<p>Clearly, GCC doesn't compile this due to binding a non-const reference to a temporary, while VS2015 issues a warning about the use of a non-standard extension. One could also use a const reference instead, but then the following code will not compile (note <strong>mutable</strong> - I'm stretching it a little by having a stateful comparator):</p>\n\n<pre><code>int compCounter = 0;\nconst auto&amp; cmp = [&amp;compCounter](int l, int r) mutable { ++compCounter; return l &lt; r; };\nstd::map&lt;int, int, decltype(cmp)&gt; myMap(cmp);\nmyMap[1] = 1;\n</code></pre>\n\n<p>So, I see two ways of getting around this, while at the same time having the code compatible with VS2013. \nFirst,</p>\n\n<pre><code>int compCounter = 0;\nauto cmp = [&amp;compCounter](int l, int r) mutable { ++compCounter; return l &lt; r; };\nstd::map&lt;int, int, decltype(cmp)&amp;&gt; myMap(cmp);\nmyMap[1] = 1;\n</code></pre>\n\n<p>But this makes me think about Stephan T. Lavavej's talk on how passing raw references as explicit template parameters might be wrong if internally it is used in a template type deduction context - he talks about this <a href=\"https://youtu.be/AKtHxKJRwp4?t=3223\" rel=\"nofollow noreferrer\">at exactly this point in his presentation</a>.</p>\n\n<p>The other approach is to use a <code>std::reference_wrapper</code>:</p>\n\n<pre><code>int compCounter = 0;\nauto cmp = [&amp;compCounter](int l, int r) mutable { ++compCounter; return l &lt; r; };\nstd::map&lt;int, int, std::reference_wrapper&lt;decltype(cmp)&gt;&gt; myMap(cmp);\nmyMap[1] = 1;\n</code></pre>\n\n<p>So my question finally is: is it guaranteed by any means that passing a raw reference type as comparator is safe? Or it depends on the STL implementers and it might break in some case and, therefore, using <code>reference_wrapper</code> is the way to go?</p>\n\n<p>One final note: I think that passing a reference (in any form) might be useful outside of VS2013 world in case for some reason one doesn't want the comparator to be copied.</p>\n\n<p>Cheers,\n  Rostislav.</p>\n\n<p>Edit:\nOne more difference:</p>\n\n<pre><code>int compCounter = 0;\nauto cmp = [&amp;compCounter](int l, int r) mutable { ++compCounter; return l &lt; r; };\n\n//using cmpT = decltype(cmp)&amp;;\nusing cmpT = std::reference_wrapper&lt;decltype(cmp)&gt;;\n\nstd::map&lt;int, int, cmpT&gt; myMap(cmp); \nmyMap[1] = 1;\n\n// Will work in both cases of cmpT\nstd::map&lt;int, int, cmpT&gt; m2(myMap);\n\n// Will work only for reference_wrapper\nstd::map&lt;int, int, cmpT&gt; m2(cmp);\nm2 = myMap;\n</code></pre>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 5052, "user_id": 479574, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/11f025f0f74ee6557e479a0ba2215223?s=128&d=identicon&r=PG", "display_name": "mark", "link": "https://stackoverflow.com/users/479574/mark"}, "is_accepted": true, "score": 9, "last_activity_date": 1440623240, "last_edit_date": 1440623240, "creation_date": 1440622885, "answer_id": 32236624, "question_id": 32236584, "link": "https://stackoverflow.com/questions/32236584/is-it-undefined-behavior-when-both-the-name-of-the-member-variable-and-parameter/32236624#32236624", "title": "Is it undefined behavior when both the name of the member variable and parameter being passed in are the same?", "body": "<p>It's defined behavior... you're assigning the local variable <code>a</code> (the parameter) to itself.  If you want to assign it to the member, use <code>this-&gt;a = a;</code></p>\n"}, {"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 0, "last_activity_date": 1440623883, "creation_date": 1440623883, "answer_id": 32236873, "question_id": 32236584, "link": "https://stackoverflow.com/questions/32236584/is-it-undefined-behavior-when-both-the-name-of-the-member-variable-and-parameter/32236873#32236873", "title": "Is it undefined behavior when both the name of the member variable and parameter being passed in are the same?", "body": "<p>When used in Initialize() like that, yes, you are simply assigning a to a (does nothing for int types). However, it works differently for constructors and initializer lists! If your code looked following:</p>\n\n<pre><code>Base(int a) : a(a) {}\n</code></pre>\n\n<p>It would actually initialize member a to argument a.</p>\n"}], "owner": {"reputation": 413, "user_id": 3902026, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c982e990dcda59751804e6be77189f62?s=128&d=identicon&r=PG&f=1", "display_name": "dwnenr", "link": "https://stackoverflow.com/users/3902026/dwnenr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 32236624, "answer_count": 2, "score": 1, "last_activity_date": 1440623883, "creation_date": 1440622715, "question_id": 32236584, "link": "https://stackoverflow.com/questions/32236584/is-it-undefined-behavior-when-both-the-name-of-the-member-variable-and-parameter", "title": "Is it undefined behavior when both the name of the member variable and parameter being passed in are the same?", "body": "<p>Lets say I have a class like the following:</p>\n\n<pre><code>class Base\n{\n  int a;\n\n  public void Initialize(int a)\n  {\n    a = a;\n  }\n}\n</code></pre>\n\n<p>(Yes, this code is bad programming practice, but I just wrote it so it could be used as an example)</p>\n\n<p>For the function Initialize, the name for both the member variables and the parameter being passed in are the same.</p>\n\n<p>In this case, is this undefined behavior? Or does the compiler choose either the member variables (or parameters) in case there are any ambiguity.</p>\n"}, {"tags": ["c++", "c", "gcc", "cross-compiling"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440622644, "post_id": 32236550, "comment_id": 52355393, "body": "Why not just install the packages?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440623551, "post_id": 32236550, "comment_id": 52355825, "body": "Packages for guinea pig breeding. Wasn&#39;t that what you asked for?"}, {"owner": {"reputation": 67, "user_id": 5270286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9512c04a6a6f26c785e5cdf4d88d462?s=128&d=identicon&r=PG&f=1", "display_name": "JD951", "link": "https://stackoverflow.com/users/5270286/jd951"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440623782, "post_id": 32236550, "comment_id": 52355931, "body": "I find the sarcasm funny @Olaf, but I am looking for a serious answer :P I don&#39;t consider myself a pro a linux, so bear with me."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440623795, "post_id": 32236550, "comment_id": 52355937, "body": "And please tag the addressee of your comments correctly."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440623985, "post_id": 32236550, "comment_id": 52356033, "body": "Just think thrice before complaining. I gave a very serious hint. If you do not know what a package is, you should first learn about your OS. Second step will then be obvious. Note that your question is actually off-topic on SO, please take the <a href=\"https://stackoverflow.com/tour\">tour</a>."}, {"owner": {"reputation": 67, "user_id": 5270286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9512c04a6a6f26c785e5cdf4d88d462?s=128&d=identicon&r=PG&f=1", "display_name": "JD951", "link": "https://stackoverflow.com/users/5270286/jd951"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440624284, "post_id": 32236550, "comment_id": 52356161, "body": "I know what packages are, but to tell me to install the packages does not help in any way. What packages would you be talking about, gcc, the standard c lib, etc? Your comment was not helpful so I asked you to clarify."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440624410, "post_id": 32236550, "comment_id": 52356215, "body": "Last try, typing very slowly: what again were you asking for? And what did I write in my first comment?"}, {"owner": {"reputation": 67, "user_id": 5270286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9512c04a6a6f26c785e5cdf4d88d462?s=128&d=identicon&r=PG&f=1", "display_name": "JD951", "link": "https://stackoverflow.com/users/5270286/jd951"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440624794, "post_id": 32236550, "comment_id": 52356379, "body": "I really can&#39;t tell if you&#39;re messing with me or not, but I got your comment. Install the packages. So can you help me out. apt-get install _______ what do I fill in to get a power pc cross compiler and a power pc std lib c for an Intel machine?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440625035, "post_id": 32236550, "comment_id": 52356487, "body": "Not messing, just trying to make you think a little bit on your own (let&#39;s call it brain-jogging). So, apparently so finally noticed that Ubuntu has cross-compilation toolchains (for ARM, <b>powerpc</b>, etc.) ready for use. So, I&#39;m positive you wil find their names yourself from here. (You prefer to have the fish served as filet, instead of fishing yourself, I suppose?)"}, {"owner": {"reputation": 67, "user_id": 5270286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9512c04a6a6f26c785e5cdf4d88d462?s=128&d=identicon&r=PG&f=1", "display_name": "JD951", "link": "https://stackoverflow.com/users/5270286/jd951"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440625636, "post_id": 32236550, "comment_id": 52356744, "body": "Maybe you should take the tour, it does say stackoverflow is for questions and answers (First 100 words in the tour). You are not really providing much of an answer if your not going to tell me what package(s) would solve my question. I understand you don&#39;t want a noobie coming on here and just asking for answers without at least trying, but my first steps was to find a pre-built package. Didn&#39;t find any so went the &quot;build it yourself&quot; route. Maybe I was looking for the wrong terms or something, but I think by showing the error I ran into and 2 on topic tuts shows I&#39;m not abusing the site."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440626050, "post_id": 32236550, "comment_id": 52356889, "body": "google <code>ubuntu powerpc cross compiler</code> is really a complicated search term to think of."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440626170, "post_id": 32236550, "comment_id": 52356956, "body": "&quot;So my question is, is there an already pre-built power pc compiler tool chain ...&quot; --&gt; &quot;Questions asking us to recommend or find a book, tool, software library, tutorial or other off-site resource are off-topic for Stack Overflow as they tend to attract opinionated answers and spam. Instead, describe the problem and what has been done so far to solve it.&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440626118, "post_id": 32237283, "comment_id": 52356928, "body": "How is <code>libgcc</code> related to the compiler frontend?"}, {"owner": {"reputation": 1176, "user_id": 1371191, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh4.googleusercontent.com/-7bV-CLvBrNE/AAAAAAAAAAI/AAAAAAAAAE8/i44ypczz624/photo.jpg?sz=128", "display_name": "Mike Lui", "link": "https://stackoverflow.com/users/1371191/mike-lui"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440626364, "post_id": 32237283, "comment_id": 52357032, "body": "You&#39;re correct, I misused compiler terminology. Corrected."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440626574, "post_id": 32237283, "comment_id": 52357136, "body": "It simply tells gcc to add <code>libgcc</code>. That is only required if building for a <i>freestanding execution environment</i> and if suppressing to use standard libraries (which includes <code>libgcc</code>). Also, <code>libgcc</code> is <b>not</b> part of the C library (that would be newlib/glibc/etc.), but of the GNU Compiler Collection. Not even of the linker."}, {"owner": {"reputation": 67, "user_id": 5270286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9512c04a6a6f26c785e5cdf4d88d462?s=128&d=identicon&r=PG&f=1", "display_name": "JD951", "link": "https://stackoverflow.com/users/5270286/jd951"}, "edited": false, "score": 0, "creation_date": 1440626884, "post_id": 32237283, "comment_id": 52357260, "body": "I&#39;ll find her comment and try that. I was thinking the prefix command used the tutorial was placing libraries where they need to be, but guess I might still have to tell gcc where they are."}, {"owner": {"reputation": 1176, "user_id": 1371191, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh4.googleusercontent.com/-7bV-CLvBrNE/AAAAAAAAAAI/AAAAAAAAAE8/i44ypczz624/photo.jpg?sz=128", "display_name": "Mike Lui", "link": "https://stackoverflow.com/users/1371191/mike-lui"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440627621, "post_id": 32237283, "comment_id": 52357550, "body": "@Olaf I was responding to the build error comment in the original post, to allow JD951 to continue the referenced tutorial. I was not responding to the relevancy of <code>libgcc</code> or its relation to the standard C library."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440628118, "post_id": 32237283, "comment_id": 52357731, "body": "@MitchLaskis: I see. But OP clearly states &quot;So my question is, is there an already pre-built power pc compiler tool ...&quot;. Anyway, I&#39;ll remove the DV if you edit the answer (sorry, vote is locked until an edit by SO - not my fault)."}, {"owner": {"reputation": 1176, "user_id": 1371191, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh4.googleusercontent.com/-7bV-CLvBrNE/AAAAAAAAAAI/AAAAAAAAAE8/i44ypczz624/photo.jpg?sz=128", "display_name": "Mike Lui", "link": "https://stackoverflow.com/users/1371191/mike-lui"}, "reply_to_user": {"reputation": 67, "user_id": 5270286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9512c04a6a6f26c785e5cdf4d88d462?s=128&d=identicon&r=PG&f=1", "display_name": "JD951", "link": "https://stackoverflow.com/users/5270286/jd951"}, "edited": false, "score": 0, "creation_date": 1440629850, "post_id": 32237283, "comment_id": 52358293, "body": "@JD951: Olaf is correct, even he does come off a bit authoritarian. If you feel annoyed by this all, remember the SO community will get antsy about what specific question is getting asked (your question was a bit general), because they don&#39;t want to get populated with a bunch of really high-level questions without an answer that generate a big long discussion that goes nowhere. See <a href=\"http://meta.stackexchange.com/questions/129598/which-computer-science-programming-stack-exchange-do-i-post-in\" title=\"which computer science programming stack exchange do i post in\">meta.stackexchange.com/questions/129598/&hellip;</a>"}, {"owner": {"reputation": 67, "user_id": 5270286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9512c04a6a6f26c785e5cdf4d88d462?s=128&d=identicon&r=PG&f=1", "display_name": "JD951", "link": "https://stackoverflow.com/users/5270286/jd951"}, "edited": false, "score": 0, "creation_date": 1440680486, "post_id": 32237283, "comment_id": 52380621, "body": "I will be more direct with my questions in the future. Thank you for the guidance @MitchLaskis."}], "tags": [], "owner": {"reputation": 1176, "user_id": 1371191, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh4.googleusercontent.com/-7bV-CLvBrNE/AAAAAAAAAAI/AAAAAAAAAE8/i44ypczz624/photo.jpg?sz=128", "display_name": "Mike Lui", "link": "https://stackoverflow.com/users/1371191/mike-lui"}, "is_accepted": true, "score": -1, "last_activity_date": 1440629918, "last_edit_date": 1440629918, "creation_date": 1440625791, "answer_id": 32237283, "question_id": 32236550, "link": "https://stackoverflow.com/questions/32236550/trouble-setting-up-powerpc-cross-compiler-toolchain/32237283#32237283", "title": "Trouble Setting Up PowerPC Cross Compiler Toolchain?", "body": "<p>It sounds like your library path isn't set up right. In the first link you mention there is a comment by <em>Ramya</em> saying that she ran into a similar problem and details her solution, namely, adding a path to <code>LIBRARY_PATH</code>.</p>\n\n<p>If you are unfamiliar with the gcc command line: <code>-lgcc</code> is an option that requires <em>gcc</em> (technically <em>ld</em>) knows where <code>libgcc.a</code> or <code>libgcc.so</code> is. You tell <em>gcc</em> this information by either setting <code>LIBRARY_PATH</code> or specifying it command line via the <code>-L</code> option.</p>\n\n<p>You have to manually specify where it is if it does not reside in default library search paths. </p>\n\n<p><strong>EDIT</strong>:</p>\n\n<p>To answer your direct question about available toolchains: <em>most likely not</em>. At least not in any package repo that is easy to find with a google search, for your specific environment.  <strong>You</strong> could provide a package that supports cross compilation. Then you need to maintain it, then someone will complain that you don't support their platform, and you'll need to provide another package, and another...or you could just rewrite the entire gcc paradigm to make cross compilation easy to manage. But that sounds like a pain. And no one wants to deal with that. And most people who deal with cross compiling understand the compilation toolchain well enough to deal with it in a case-by-case basis. But as of right now I don't know of a distribution that has an 'out-of-the-box' cross-compile friendly compiler toolchain.</p>\n"}, {"comments": [{"owner": {"reputation": 67, "user_id": 5270286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9512c04a6a6f26c785e5cdf4d88d462?s=128&d=identicon&r=PG&f=1", "display_name": "JD951", "link": "https://stackoverflow.com/users/5270286/jd951"}, "edited": false, "score": 0, "creation_date": 1440680760, "post_id": 32245838, "comment_id": 52380836, "body": "I ended up finding this late last night and it worked for me. <a href=\"http://packages.ubuntu.com/trusty/crossbuild-essential-powerpc\" rel=\"nofollow noreferrer\">packages.ubuntu.com/trusty/crossbuild-essential-powerpc</a>. It took some google fu, but finally found it! I think your link also would do the trick. Thanks @ashwanth."}], "tags": [], "owner": {"reputation": 436, "user_id": 3831746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s0IIJ.jpg?s=128&g=1", "display_name": "ashwanth selvam", "link": "https://stackoverflow.com/users/3831746/ashwanth-selvam"}, "is_accepted": false, "score": 0, "last_activity_date": 1440668324, "creation_date": 1440668324, "answer_id": 32245838, "question_id": 32236550, "link": "https://stackoverflow.com/questions/32236550/trouble-setting-up-powerpc-cross-compiler-toolchain/32245838#32245838", "title": "Trouble Setting Up PowerPC Cross Compiler Toolchain?", "body": "<p>This link provides powerpc toolchains</p>\n\n<p><a href=\"http://download.ronetix.info/toolchains/powerpc/\" rel=\"nofollow\">http://download.ronetix.info/toolchains/powerpc/</a></p>\n\n<p>Hopes this helps you</p>\n"}, {"tags": [], "owner": {"reputation": 839, "user_id": 2706918, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wDDMU.jpg?s=128&g=1", "display_name": "Nitinkumar Ambekar", "link": "https://stackoverflow.com/users/2706918/nitinkumar-ambekar"}, "is_accepted": false, "score": 0, "last_activity_date": 1440684768, "last_edit_date": 1440684768, "creation_date": 1440684413, "answer_id": 32251602, "question_id": 32236550, "link": "https://stackoverflow.com/questions/32236550/trouble-setting-up-powerpc-cross-compiler-toolchain/32251602#32251602", "title": "Trouble Setting Up PowerPC Cross Compiler Toolchain?", "body": "<p>You have two options basically:</p>\n\n<ul>\n<li>Use pre-built binaries or say toolchain as specified <a href=\"http://www.yoctoproject.org/docs/1.8/yocto-project-qs/yocto-project-qs.html\" rel=\"nofollow\">here</a> with the title <em>Using Pre-Built Binaries and QEMU</em></li>\n<li>Build your own toolchain &amp; required other files</li>\n</ul>\n\n<p>To use pre-built files, simply follow the linked section. </p>\n\n<p>To build your own toolchain, I'll suggest <a href=\"https://downloads.openwrt.org/\" rel=\"nofollow\">this link</a> to download OpenWRT, while building this OS, you have to run <em>menuconfig</em> where you can specify target as <em>powerpc</em> or <em>ppc</em> along with other options. The <em>menuconfig</em> will show option to build <em>toolchain</em> and other required files for target system.</p>\n\n<p>I hope this helps!</p>\n"}], "owner": {"reputation": 67, "user_id": 5270286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9512c04a6a6f26c785e5cdf4d88d462?s=128&d=identicon&r=PG&f=1", "display_name": "JD951", "link": "https://stackoverflow.com/users/5270286/jd951"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 0, "closed_date": 1441107592, "accepted_answer_id": 32237283, "answer_count": 3, "score": -2, "last_activity_date": 1441211971, "creation_date": 1440622561, "last_edit_date": 1441211971, "question_id": 32236550, "link": "https://stackoverflow.com/questions/32236550/trouble-setting-up-powerpc-cross-compiler-toolchain", "closed_reason": "Not suitable for this site", "title": "Trouble Setting Up PowerPC Cross Compiler Toolchain?", "body": "<p>I have followed this tutorial to try and build a power pc cross compiler</p>\n\n<pre><code>preshing.com/20141119/how-to-build-a-gcc-cross-compiler/\n</code></pre>\n\n<p>The problem I am getting is in step 4 I get a \"cannot find -lgcc\" error. I am guessing something from step 3 did not go trough correctly.</p>\n"}, {"tags": ["c++", "constructor"], "comments": [{"owner": {"reputation": 543, "user_id": 2834872, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/059cf468bda01bef6f7d8cb9eb2f1025?s=128&d=identicon&r=PG", "display_name": "silentboy", "link": "https://stackoverflow.com/users/2834872/silentboy"}, "edited": false, "score": 0, "creation_date": 1440622016, "post_id": 32236374, "comment_id": 52355084, "body": "Can you <code>Quota q;</code> <code>q(intake);</code>? Even if you don&#39;t use switch?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1440622083, "post_id": 32236374, "comment_id": 52355116, "body": "You can&#39;t construct an object after it has already been constructed. What&#39;s wrong with <code>q = Quota(intake);</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "is_accepted": false, "score": 0, "last_activity_date": 1440622109, "creation_date": 1440622109, "answer_id": 32236447, "question_id": 32236374, "link": "https://stackoverflow.com/questions/32236374/cant-pass-the-argument-for-a-constructor-from-a-switch-case-statement/32236447#32236447", "title": "Cant pass the argument for a constructor from a switch case statement", "body": "<p>This has nothing to do with the <code>switch</code>: as it is, you wouldn't be able to write</p>\n\n<pre><code>Quota q; // default construct\nq(intake);\n</code></pre>\n\n<p>The first statement <code>Quota q</code> constructs a <code>Quota</code>, and that's where you need to pass the <code>intake</code> parameter.</p>\n\n<p>You can use the copy constructor to do</p>\n\n<pre><code>Quota q;\nq = Quota(intake);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3357, "user_id": 1325084, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/861cba4c57f76eb68d3249b60c72c809?s=128&d=identicon&r=PG", "display_name": "cppguy", "link": "https://stackoverflow.com/users/1325084/cppguy"}, "is_accepted": false, "score": 0, "last_activity_date": 1440622117, "creation_date": 1440622117, "answer_id": 32236449, "question_id": 32236374, "link": "https://stackoverflow.com/questions/32236374/cant-pass-the-argument-for-a-constructor-from-a-switch-case-statement/32236449#32236449", "title": "Cant pass the argument for a constructor from a switch case statement", "body": "<p>You can't call constructors after the value is declared.</p>\n\n<p>Try this instead:</p>\n\n<pre><code>q = Quota(intake);\n</code></pre>\n\n<p>You'll also need to declare a default constructor for <code>Quota</code> initializing all members to \"reasonable defaults\"</p>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1440623019, "post_id": 32236541, "comment_id": 52355566, "body": "Given little information about the surrounding code this is the best answer, but I don&#39;t think you want the <code>q(intake);</code> in case 1 of the switch."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1440623113, "post_id": 32236541, "comment_id": 52355618, "body": "@user4581301, that&#39;s true."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1440623104, "last_edit_date": 1440623104, "creation_date": 1440622513, "answer_id": 32236541, "question_id": 32236374, "link": "https://stackoverflow.com/questions/32236374/cant-pass-the-argument-for-a-constructor-from-a-switch-case-statement/32236541#32236541", "title": "Cant pass the argument for a constructor from a switch case statement", "body": "<p>Move the line that constructs the object after the <code>switch</code> statement.</p>\n\n<pre><code>int intake, choice;\ncin &gt;&gt; choice;\nswitch(choice){\n\n    case 1:\n    cin &gt;&gt; intake;\n\n    // Don't do this.\n    // q(intake);\n    break;\n\n    case 2:\n    ...\n\n    default:\n}\n\n// Now that you have intake, construct q.\nQuota q(intake);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5270090, "user_type": "registered", "profile_image": "https://graph.facebook.com/883309488430669/picture?type=large", "display_name": "Subham Kharel", "link": "https://stackoverflow.com/users/5270090/subham-kharel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 656, "favorite_count": 0, "accepted_answer_id": 32236541, "answer_count": 3, "score": 0, "last_activity_date": 1440623418, "creation_date": 1440621835, "last_edit_date": 1440623418, "question_id": 32236374, "link": "https://stackoverflow.com/questions/32236374/cant-pass-the-argument-for-a-constructor-from-a-switch-case-statement", "title": "Cant pass the argument for a constructor from a switch case statement", "body": "<p>I tried this:</p>\n\n<pre><code>class Quota{\n    private:\n        ....\n    public:\n        Quota(const int sizee): ID(sizee), percentage(sizee){\n            quotaa = 100;\n        }\n        ....\n};\nint main(){\n    int intake, choice;\n    cin &gt;&gt; choice;\n    Quota q;\n    switch(choice){\n        case 1:\n        cin &gt;&gt; intake;\n        q(intake);\n        break;\n        case 2:\n        ...\n        default:\n    }\n    q.xyz();\n}\n</code></pre>\n\n<p>How can i make this work? i need to initialize an object of the <code>Quota</code> class and pass the argument for the constructor in the <code>switch</code> statement while still being able to access the same object anywhere else in the main function?</p>\n"}, {"tags": ["c++", "sockets", "structure"], "comments": [{"owner": {"reputation": 3357, "user_id": 1325084, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/861cba4c57f76eb68d3249b60c72c809?s=128&d=identicon&r=PG", "display_name": "cppguy", "link": "https://stackoverflow.com/users/1325084/cppguy"}, "edited": false, "score": 0, "creation_date": 1440622212, "post_id": 32236322, "comment_id": 52355184, "body": "Have a look at std::stringstream"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 2616248, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/6be05c5fa3b7798a33d4c214a698ec63?s=128&d=identicon&r=PG", "display_name": "user2616248", "link": "https://stackoverflow.com/users/2616248/user2616248"}, "edited": false, "score": 0, "creation_date": 1440624654, "post_id": 32236629, "comment_id": 52356319, "body": "When I try something like itoa(c.address(), tcp_ip, 10); it says &#39;itoa&#39; was not declared in this scope even though I have stdio.h and stdlib.h included.... what am I missing now?"}, {"owner": {"reputation": 829, "user_id": 1894478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/844dae39b47a501f7ca3d88cbe6f1909?s=128&d=identicon&r=PG", "display_name": "EvgeniyZh", "link": "https://stackoverflow.com/users/1894478/evgeniyzh"}, "reply_to_user": {"reputation": 41, "user_id": 2616248, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/6be05c5fa3b7798a33d4c214a698ec63?s=128&d=identicon&r=PG", "display_name": "user2616248", "link": "https://stackoverflow.com/users/2616248/user2616248"}, "edited": false, "score": 0, "creation_date": 1440624844, "post_id": 32236629, "comment_id": 52356404, "body": "itoa is not defined in ANSI-C and is not part of C++, but is supported by some compilers. Try sprintf instead"}, {"owner": {"reputation": 41, "user_id": 2616248, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/6be05c5fa3b7798a33d4c214a698ec63?s=128&d=identicon&r=PG", "display_name": "user2616248", "link": "https://stackoverflow.com/users/2616248/user2616248"}, "edited": false, "score": 1, "creation_date": 1440625291, "post_id": 32236629, "comment_id": 52356604, "body": "sprintf(tcp_ip, &quot;%i&quot;, c.address());  Is that correct?"}], "tags": [], "owner": {"reputation": 829, "user_id": 1894478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/844dae39b47a501f7ca3d88cbe6f1909?s=128&d=identicon&r=PG", "display_name": "EvgeniyZh", "link": "https://stackoverflow.com/users/1894478/evgeniyzh"}, "is_accepted": false, "score": 0, "last_activity_date": 1440623000, "last_edit_date": 1440623000, "creation_date": 1440622898, "answer_id": 32236629, "question_id": 32236322, "link": "https://stackoverflow.com/questions/32236322/structure-issue-and-int-to-char-conversion/32236629#32236629", "title": "Structure issue and int to char* conversion", "body": "<p>First of all your members are called _port and _address and not port and address. They are not public, so you can obtain them with your functions portId() and address()\nSecond, to convert number to c string, you can use sprintf or itoa functions. </p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 2616248, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/6be05c5fa3b7798a33d4c214a698ec63?s=128&d=identicon&r=PG", "display_name": "user2616248", "link": "https://stackoverflow.com/users/2616248/user2616248"}, "edited": false, "score": 0, "creation_date": 1440634817, "post_id": 32237518, "comment_id": 52359616, "body": "It seems I can&#39;t use std::to_string because I get this error..... error: &#39;to_string&#39; is not a member of &#39;std&#39; Why is that?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 41, "user_id": 2616248, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/6be05c5fa3b7798a33d4c214a698ec63?s=128&d=identicon&r=PG", "display_name": "user2616248", "link": "https://stackoverflow.com/users/2616248/user2616248"}, "edited": false, "score": 0, "creation_date": 1440635192, "post_id": 32237518, "comment_id": 52359680, "body": "Fork. Odds are your compiler doesn&#39;t support C++11 or you don&#39;t have right flags set to turn it on. Gimmie a minute to update the answer."}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 1, "last_activity_date": 1440635613, "last_edit_date": 1592644375, "creation_date": 1440626958, "answer_id": 32237518, "question_id": 32236322, "link": "https://stackoverflow.com/questions/32236322/structure-issue-and-int-to-char-conversion/32237518#32237518", "title": "Structure issue and int to char* conversion", "body": "<p>First off, danger danger!</p>\n<pre><code>char* tcp_ip;\nchar* tcp_port;\n</code></pre>\n<p>These pointers need to point to something, and it has to be something with a measure of permanence. I don't see this as likely to happen, so you should define the storage here.</p>\n<pre><code>char tcp_ip[SizeOfBiggestIPAddressPossible];\nchar tcp_port[SizeOfBiggestPortNumberPossible];\n</code></pre>\n<p>where</p>\n<pre><code>#define     SizeOfBiggestIPAddressPossible (4+1+4+1+4+1+4+1+4+1+4+1+4+1+4+1)\n#define     SizeOfBiggestPortNumberPossible (5+1)\n</code></pre>\n<p>But this is just stupid. Since OP tagged for C++, let's just use a couple strings and save us the trouble of buffer overflows and other weirds.</p>\n<pre><code>std::string tcp_ip;\nstd::string tcp_port;\n</code></pre>\n<p>Next, changing a number into a string is half worthless here. Number to string works for the port number...</p>\n<pre><code>tcp_port = std::to_string(c.portId());\n</code></pre>\n<p>Or if lacking C++11 support create the following function</p>\n<pre><code>template &lt;class TYPE&gt;\nstd::string toString(TYPE val)\n{\n    std::stringstream temp;\n    temp &lt;&lt; val;\n    return  temp.str();\n}\n</code></pre>\n<p>and call it</p>\n<pre><code>tcp_port = toString(c.portId());\n</code></pre>\n<p>but to convert a number to an IP address is another beast entirely. the IP address is a formatted string with dots or colons intermixed with numbers. If there is a good C++ way to do this, I don't know it.</p>\n<p>In *nux land, you call <a href=\"http://linux.die.net/man/3/inet_ntop\" rel=\"nofollow noreferrer\">inet_ntop</a>.</p>\n<p>Assuming Ipv4 (not compiled and tested, but should be close):</p>\n<pre><code>char temp[INET_ADDRSTRLEN];\nstruct sockaddr_in sockAddr;\nsockAddr.sin_addr.S_un.S_addr = htonl(c.address());\nif (inet_ntop(AF_INET, &amp;addr, temp, INET_ADDRSTRLEN)!= null)\n{\n    tcp_ip = temp;\n}\nelse\n{\n    std::cerr &lt;&lt; &quot;Bad address&quot; &lt;&lt; std::endl;\n    // handle error\n}\n</code></pre>\n<p>In Windows you can call the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/cc805843(v=vs.85).aspx\" rel=\"nofollow noreferrer\">same function</a> or a whole raft of Windows-specific alternatives.</p>\n<p>You now have two nice, polite C++ strings doing all of the memory management heavy lifting for you. To get C style strings (const char *) back use the <code>c_str</code> method.</p>\n<pre><code>const char * addrp = c.address().c_str();\n</code></pre>\n<p>If you need a non const char * someone deserves a slap.</p>\n<h1>edit: Missed out on the obvious IP4 only hack</h1>\n<p>This will get you the address as a string, but it doesn't support the future. Or the past as IPv6 has been around for what, 35 years?</p>\n<pre><code>uint32_t temp = c.address(); \nstd::stringstream addr;\naddr &lt;&lt; ((temp &gt;&gt; 24) &amp; 0xFF) &lt;&lt; '.' &lt;&lt;\n        ((temp &gt;&gt; 16) &amp; 0xFF) &lt;&lt; '.' &lt;&lt;\n        ((temp &gt;&gt;  8) &amp; 0xFF) &lt;&lt; '.' &lt;&lt;\n        ((temp &gt;&gt;  0) &amp; 0xFF);\ntcp_ip = addr.str();\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 2616248, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/6be05c5fa3b7798a33d4c214a698ec63?s=128&d=identicon&r=PG", "display_name": "user2616248", "link": "https://stackoverflow.com/users/2616248/user2616248"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1440635613, "creation_date": 1440621686, "question_id": 32236322, "link": "https://stackoverflow.com/questions/32236322/structure-issue-and-int-to-char-conversion", "title": "Structure issue and int to char* conversion", "body": "<p>In my first program I find a local ip address (int iip) and what I would like to do is send that ip address as well as the port (int port = 1100) in a structure (Ins c). Then I would like the second program to receive this structure and pick out the ip address and port to use in a tcp connection later on. </p>\n\n<pre><code>n_addr inaddr;\ninaddr.s_addr = htonl(iip);\n\n    int udp_socket_info;\n    struct sockaddr_in udp_server;\n\n    udp_socket_info = socket(AF_INET, SOCK_DGRAM, 0);\n    if (udp_socket_info == -1) {\n    puts(\"Could not create udp socket\");\n    }\n    puts(\"Udp socket created\");\n\n    udp_server.sin_addr.s_addr = inet_addr(\"225.0.0.37\"); \n    udp_server.sin_port = htons(1100);\n    udp_server.sin_family = AF_INET;\n\n    int port = 1100;\n\n\n Ins c(iip, port);        \n sendto(udp_socket_info, &amp;c, sizeof(c), 0, (struct sockaddr *)&amp;udp_server, sizeof(udp_server));\nputs(\"STRUCT Message Sent\");\n</code></pre>\n\n<p>In one program I am receiving the following structure:  </p>\n\n<pre><code>Ins c;\nif (recvfrom(udp_socket_info, &amp;c, sizeof(c), 0, &amp;addr, &amp;fromlen) &lt; 0) {\nperror(\"Recvfrom error:\");\n}\nputs(\"STRUCT Message Received\");\n\ntcp_ip = c.address;\ntcp_port = c.port;\n</code></pre>\n\n<p>In the header file MonReqServer.hh I declare tcp_ip and tcp_port as char* because that is what I need to use to setup the tcp socket.</p>\n\n<pre><code> private:\n   char* tcp_ip;\n   char* tcp_port;\n</code></pre>\n\n<p>And the following is the header for Ins.hh</p>\n\n<pre><code>namespace Pds {\nclass Ins\n  {\n  public:\n    Ins();\n    enum Option {DoNotInitialize};\n    explicit Ins(Option);\n    explicit Ins(unsigned short port);\n    explicit Ins(int address);\n    Ins(int address, unsigned short port);\n    Ins(const Ins&amp; ins, unsigned short port);\n    explicit Ins(const sockaddr_in&amp; sa);\n\n    int                   address()     const; \n    void                  address(int address);\n    unsigned short        portId()      const; \n\n    int operator==(const Ins&amp; that)  const;\n\n  protected:\n    int      _address;\n    unsigned _port;\n  };\n}\n</code></pre>\n\n<p>These are my errors:</p>\n\n<pre><code>MonReqServer.cc: In member function 'virtual void Pds::MonReqServer::routine()':\nMonReqServer.cc:79: error: cannot resolve overloaded function 'address' based on conversion to type 'char*'\nMonReqServer.cc:80: error: 'class Pds::Ins' has no member named 'port'\n</code></pre>\n\n<p>My question then is how do I convert my address into a char* once I receive it? Specifically what is the command to switch from int to char* and how do I impliment it? Also why does it say Ins has no member named port? I thought an ip address and a port are what Ins is meant to take? Please let me know if my questions are unclear or if you need any other information? Thank you!</p>\n"}, {"tags": ["c++", "windows", "doxygen"], "comments": [{"owner": {"reputation": 4738, "user_id": 3998607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/363cb66ecadf072f1b4485d3b953b7da?s=128&d=identicon&r=PG", "display_name": "JosEduSol", "link": "https://stackoverflow.com/users/3998607/josedusol"}, "edited": false, "score": 0, "creation_date": 1440622388, "post_id": 32236320, "comment_id": 52355272, "body": "Check that Graphviz is correctly installed."}], "answers": [{"tags": [], "owner": {"reputation": 4738, "user_id": 3998607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/363cb66ecadf072f1b4485d3b953b7da?s=128&d=identicon&r=PG", "display_name": "JosEduSol", "link": "https://stackoverflow.com/users/3998607/josedusol"}, "is_accepted": true, "score": 3, "last_activity_date": 1440623124, "creation_date": 1440623124, "answer_id": 32236673, "question_id": 32236320, "link": "https://stackoverflow.com/questions/32236320/doxygen-nothing-shows-up-in-graphical-class-hierarchy/32236673#32236673", "title": "Doxygen, nothing shows up in Graphical Class Hierarchy", "body": "<p>When you select <code>HAVE_DOT</code> in the Expert Tab, doxygen will assume you have DOT available from the PATH. You need to make sure of this.</p>\n\n<p>However, you also have the <code>DOT_PATH</code> option. Here you can put the path where DOT can be found.</p>\n"}, {"comments": [{"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1578767058, "post_id": 59697075, "comment_id": 105549321, "body": "Which version of doxygen are you using? Which problem did you encounter? The mentioned &quot;solution&quot; cannot be the intention as soxygen does automatic translation of the <code>.dot</code> files provided you have <code>dot</code> installed (and have <code>dot</code> in your path or otherwise have <code>DOT_PATH=...</code> set correctly. Also to be able to &quot;post-generate&quot; the png files you have to have the <code>DOT_CLEANUP=NO</code>. Best is to show the contents of your doxygen configuration file (insofar as it is different from the default configuration file, for doxygen &gt; 1.8.16: <code>doxygen -x</code>) as well as the error messages you get."}], "tags": [], "owner": {"reputation": 25, "user_id": 4735573, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XMZ4DPlSc5E/AAAAAAAAAAI/AAAAAAAAAJo/Spnwmfsvyog/photo.jpg?sz=128", "display_name": "Egemen Ertu\u011frul", "link": "https://stackoverflow.com/users/4735573/egemen-ertu%c4%9frul"}, "is_accepted": false, "score": 1, "last_activity_date": 1578764972, "creation_date": 1578764972, "answer_id": 59697075, "question_id": 32236320, "link": "https://stackoverflow.com/questions/32236320/doxygen-nothing-shows-up-in-graphical-class-hierarchy/59697075#59697075", "title": "Doxygen, nothing shows up in Graphical Class Hierarchy", "body": "<p>I was able to solve this issue by executing a simple line on CMD which iteratively generates the missing .png files from .dot files.</p>\n\n<pre><code>for %f in (*dot) do dot %~nxf -Tpng -o %~nf.png\n</code></pre>\n\n<p>Make sure to execute this in <em>/html</em> folder where all .dot files reside and have dot.exe in your PATH environment variable. Also, If you receive any syntax errors, such as: </p>\n\n<blockquote>\n  <p>syntax error in line 1 near '\u00ebPNG'</p>\n</blockquote>\n\n<p>try changing the default program of .dot format to Notepad (mine was set to Word).</p>\n"}], "owner": {"reputation": 2305, "user_id": 2056201, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/bba9995d4071b28c1f54bcb8ae03a1f2?s=128&d=identicon&r=PG", "display_name": "Mich", "link": "https://stackoverflow.com/users/2056201/mich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1767, "favorite_count": 0, "accepted_answer_id": 32236673, "answer_count": 2, "score": 4, "last_activity_date": 1578764972, "creation_date": 1440621680, "question_id": 32236320, "link": "https://stackoverflow.com/questions/32236320/doxygen-nothing-shows-up-in-graphical-class-hierarchy", "title": "Doxygen, nothing shows up in Graphical Class Hierarchy", "body": "<p>I'm trying to use DOxygen to generate documentation for a rather large code base.</p>\n\n<p>I got Doxygen 1.8.10 for Windows with Doxywizard.</p>\n\n<p>I installed Graphviz 2.38</p>\n\n<p>I was able to generate the Textual Class Hierarchy without a problem using Recursive option in the Expert tab. </p>\n\n<p>I selected the \"Use dot tool from GraphViz package\" option in the Wizard. </p>\n\n<p>I also checked \"HAVE_DOT\" and \"CLASS_DIAGRAMS\" options in the Expert tab for Dot.</p>\n\n<p>When I generate the documentation and click on Show HTML Output, I cannot see anything under the Graphical Class Hierarchy. I can still see all the classes and their dependencies in the Textual Class Hierarchy.</p>\n\n<p>in Mozilla Firefox, the Graphical Class Hierarchy page shows up as empty\nin Internet Explorer, the Graphical Class Hierarchy page shows a lot of broken image icons aligned in 1 column</p>\n\n<p>What am I doing wrong here?</p>\n\n<p>Thank you,</p>\n"}, {"tags": ["c++", "symbols", "coff"], "answers": [{"tags": [], "owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1466194358, "creation_date": 1466194358, "answer_id": 37889692, "question_id": 32236263, "link": "https://stackoverflow.com/questions/32236263/interpret-comdat-symbol-of-coff-file-as-human-readable-function-signature/37889692#37889692", "title": "Interpret COMDAT symbol of COFF file as human readable function signature", "body": "<p>That would be a \"decorated\" (mangled) C++ function name as generated by Visual Studio (and VS-compatible Windows compilers), not specifically a COMDAT symbol.</p>\n\n<p>The easiest way would be to run the symbol through <code>UNDNAME.EXE</code>, a utility that comes with Visual Studio.  Barring that, you could use the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms681400%28v=vs.85%29.aspx\" rel=\"nofollow\"><code>UnDecorateSymbolName()</code></a> function in the library <code>Dbghelp.dll</code>, or the undocumented internal function <code>__unDName()</code> (which, to my knowledge, is what <code>UNDNAME</code> uses); I assume you're at least somewhat familiar with this function, considering that <code>DName</code> is one of its helper classes.  [Note that while these tools are mostly accurate, they falter in a few cases (such as pointer <code>const</code>-ness, certain C++/CLI symbols, or function-local classes declared in <code>extern \"C\"</code> functions (including <code>main()</code>).]</p>\n\n<p>If all else fails, you can also attempt to demangle the name by hand, which would require familiarity with the mangling scheme itself; if you aren't privy to MS-internal information, this can take a significant amount of experimentation and/or research, but is the most accurate way.  There are a few simple guidelines that can help with that, though:</p>\n\n<ul>\n<li>Names almost always start with a leading <code>?</code>.  If not, the <code>?</code> will be preceded by special modifiers (such as <code>__imp_</code> for <code>__declspec(dllimport)</code> or <code>?@</code> for CodeView), with the name proper starting at the <code>?</code>.</li>\n<li>After the leading <code>?</code>, the segment up to and including the <code>@@</code> is the entity's qualified name, broken up into separate component names (first the symbol name, then every containing scope's name; namespace scope and class scope are treated identically for this step of the mangling process); each of the component names making up the qualified name is immediately followed by a single <code>@</code>, which acts as a terminator for that name, and the full name is terminated by a standalone <code>@</code> (normally creating a double <code>@@</code>).  Read it from right to left, replacing any single <code>@</code> with the scope operator <code>::</code> and stopping at the second <code>@</code> in the double <code>@@</code>.  [Note that there are also cases where this rule isn't followed, and that templated entity names are <em>really</em> weird.  Also note that when a user-defined type (enum, class, struct, union) is encountered during type information, its qualified name will be used according to normal qualified name mangling rules, with the exceptions that 1) it will be preceded with an identifier instead of a question mark<sup>1</sup>, and 2) the name will be abbreviated if possible<sup>2</sup>.]\n\n<ul>\n<li>Certain special entities (such as operators, internal helper functions, and internal helper objects) will have special names, which take the form of <code>?x</code>, where <code>x</code> is a number or capital letter preceded by 0-2 underscores; note that these names act as special abbreviations<sup>2</sup>, and as such, are <em>not</em> terminated with a single <code>@</code>.  Due to this, special member entities will have a name like <code>??_FCLS@@QAEXXZ</code> (default constructor closure for <code>class ::CLS</code>), and special non-member entities will have names terminated with a single <code>@</code> instead of a double <code>@@</code> (such as <code>??_H@YGXPAXIHP6EPAX0@Z@Z</code>, the vector constructor iterator; note that <code>??_H@</code> is its fully-qualified name, and everything after that is type information).</li>\n</ul></li>\n<li>The segment after the <code>@@</code> contains all relevant type information, and is very hard to explain without going into a <em>lot</em> of detail.  I would suggest using a resource such as Agner Fog's \"Calling conventions for different C++ compilers and operating systems\" PDF and/or the Wikiversity page \"Visual C++ name mangling\" as a reference; while their information isn't 100% accurate, it's accurate enough to read most mangled names you'll come across.</li>\n</ul>\n\n<p>Hope this helps.</p>\n\n<hr>\n\n<p><sup>1</sup>: One of the following will be used to indicate the type of UDT:</p>\n\n<ul>\n<li>Enum: <code>W4</code> [Note that this technically represents <code>enum : int</code>, but for some reason the compiler mangles all enum types as <code>W4</code> and stores underlying type information elsewhere.]</li>\n<li>Class: <code>V</code></li>\n<li>Struct: <code>U</code></li>\n<li>Union: <code>T</code></li>\n</ul>\n\n<p>It will be followed by the UDT's qualified name, which terminates with a <code>@@</code> as usual.</p>\n\n<pre><code>class  CL; // Is: VCL@@\nstruct ST; // Is: UST@@\nenum   EN; // Is: W4EN@@\nunion  UN; // Is: TUN@@\n\nnamespace X { class CL; } // Is: VCL@X@@\n</code></pre>\n\n<p><sup>2</sup>: If any of the component names in a UDT's qualified name has already been encountered while mangling the symbol (whether as part of the symbol's qualified name, or as part of a parameter's qualified name (reading parameters from left to right)), and it was one of the first 10 names encountered, both the name and its terminating <code>@</code> will be abbreviated into a digit representing that previously-used name.  Abbreviations are zero-indexed, with the symbol's actual name being counted as name <code>0</code>.</p>\n\n<pre><code>namespace Y {\n    void func(X::CL param);\n    // Is: ?func@Y@@YAXVCL@X@@@Z\n}\n\nnamespace X {\n    void func(CL param);\n    // Is: ?func@Y@@YAXVCL@1@@Z\n    // \"X@\" is replaced with \"1\".\n}\n</code></pre>\n\n<p>As mentioned, certain special entities (operators, certain internal helper functions, and certain internal helper objects) also use name abbreviation rules, using special abbreviations hard-coded into the compiler; interestingly most of the non-<code>operator</code> entities have internal names, which are distinct from the abbreviations.  As with normal abbreviations, these special abbreviations expand to a name and its terminating <code>@</code>; due to this, the special abbreviation will be immediately followed by either the qualified-name-terminating second <code>@</code>, or by any containing scopes.</p>\n\n<pre><code>// Containing scopes example, with 'scalar deleting destructor':\nclass CL {\n  public:\n    ~CL();\n};\nCL::~CL() {} // Non-trivial destructor.\n\n// If an instance of the above class is deleted with \"delete\", the compiler will create\n// hidden member functions 'scalar deleting destructor' and 'vector deleting destructor'.\n// The former will have this mangled symbol:\n// ??_GCL@@QAEPAXI@Z\n// Note that there's no '@' between '?_G' (function name) &amp; 'CL@' (containing scope name).\n\n\n// Global example, with 'vector constructor iterator':\nclass CL {\n  public:\n    CL();\n};\nCL::CL() {} // Non-trivial constructor.\n\nCL cls[3]; // Create an array of class with non-trivial ctor.\n// The compiler uses the 'vector constructor iterator' to create the array and initialise\n// each instance.\n// It has the mangled symbol:\n// ??_H@YGXPAXIHP6EPAX0@Z@Z\n// Note that there's no '@' between '?_H' (function name) &amp; '@' (qualified name terminator).\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 5241260, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/cdad8518d3152b90f6e97141be61ae86?s=128&d=identicon&r=PG&f=1", "display_name": "Fleev", "link": "https://stackoverflow.com/users/5241260/fleev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1466194358, "creation_date": 1440621446, "last_edit_date": 1440621987, "question_id": 32236263, "link": "https://stackoverflow.com/questions/32236263/interpret-comdat-symbol-of-coff-file-as-human-readable-function-signature", "title": "Interpret COMDAT symbol of COFF file as human readable function signature", "body": "<p>I want to interpret COMDAT symbol of COFF file\nThe COMDAT symbol is </p>\n\n<p><code>?make@DNameStatusNode@@SAPAV1@W4DNameStatus@@@Z</code></p>\n\n<p>How can I interpret it as </p>\n\n<p><code>(public: static class DNameStatusNode * __cdecl DNameStatusNode::make(enum DNameStatus))</code></p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "c", "compiler-errors", "makefile"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440621213, "post_id": 32236126, "comment_id": 52354677, "body": "Using default rules, a <code>.c</code> file is usually compiled using <code>gcc</code>. Anyway these are warnings (certainly considerable to fix), not errors."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440621309, "post_id": 32236126, "comment_id": 52354712, "body": "Does the name &quot;<b>CPP</b>SRCS&quot; ring a bell?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440621374, "post_id": 32236126, "comment_id": 52354738, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: Actually, there <b>is</b> an error ..."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440621621, "post_id": 32236126, "comment_id": 52354879, "body": "@Olaf That one refers to source code not shown :-P ..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440621721, "post_id": 32236126, "comment_id": 52354934, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: As do the warnings."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440621982, "post_id": 32236126, "comment_id": 52355072, "body": "@Olaf Sure, of course."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1440622372, "post_id": 32236126, "comment_id": 52355259, "body": "Doesn&#39;t look (just) like a Makefile issue. Looks more like your C source file has some junk characters in it. Perhaps corrupt or inserted by an editor. Have you actually opened the file to see whether it looks as expected? May need to open in hex mode to see some of the characters (e.g. null)."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1440623394, "post_id": 32236126, "comment_id": 52355746, "body": "Without seeing the source of <code>tracePriorityManager.c</code> it&#39;s hard to be sure, but the symptoms are consistent with feeding UTF-16 (or UCS-2) to a compiler expecting 8-bit input.  Does it look reasonable when you <code>od -t a &lt;.&#47;build&#47;pxy&#47;obj&#47;tracePriorityManager.c</code>?"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1440623518, "post_id": 32236126, "comment_id": 52355809, "body": "Also, <code>$OBJS</code> will contain <code>.&#47;tracePriorityManager.c</code> - you&#39;ll want to make that <code>.&#47;tracePriorityManager.o</code> so that <code>$(CC)</code> is used to compile it (even better, drop the redundant reference to <code>.&#47;</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440622630, "post_id": 32236218, "comment_id": 52355384, "body": "Nice try, but not targeting the real issue, the OP prefers to be left disclosed so far."}, {"owner": {"reputation": 829, "user_id": 1894478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/844dae39b47a501f7ca3d88cbe6f1909?s=128&d=identicon&r=PG", "display_name": "EvgeniyZh", "link": "https://stackoverflow.com/users/1894478/evgeniyzh"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440623173, "post_id": 32236218, "comment_id": 52355647, "body": "Compiling c with g++ might cause some problems. Fix them one by one."}], "tags": [], "owner": {"reputation": 829, "user_id": 1894478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/844dae39b47a501f7ca3d88cbe6f1909?s=128&d=identicon&r=PG", "display_name": "EvgeniyZh", "link": "https://stackoverflow.com/users/1894478/evgeniyzh"}, "is_accepted": false, "score": 0, "last_activity_date": 1440621257, "creation_date": 1440621257, "answer_id": 32236218, "question_id": 32236126, "link": "https://stackoverflow.com/questions/32236126/need-to-compile-a-program-with-both-c-and-c-code-using-makefile/32236218#32236218", "title": "Need to compile a program with both C++ and C code using Makefile", "body": "<p>You should create a different variable for C sources and compile it with gcc and CFLAGS.\nLook at your rule - it transforms *.cpp to *.o,  but doesn't talk about *.c. </p>\n"}, {"tags": [], "owner": {"reputation": 328, "user_id": 4768463, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/02e9b7b066da2e7d2373ea09fcb63e33?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv", "link": "https://stackoverflow.com/users/4768463/aviv"}, "is_accepted": false, "score": -2, "last_activity_date": 1440656680, "last_edit_date": 1440656680, "creation_date": 1440622584, "answer_id": 32236557, "question_id": 32236126, "link": "https://stackoverflow.com/questions/32236126/need-to-compile-a-program-with-both-c-and-c-code-using-makefile/32236557#32236557", "title": "Need to compile a program with both C++ and C code using Makefile", "body": "<p>Assuming that you share the same the ld and compile flags for both your c++ and c compilation.</p>\n\n<pre><code>CSRC = CSOURCE FILES \n</code></pre>\n\n<p>or just </p>\n\n<pre><code>CSRC := $(wildcard *.c)\n\n\nOBJS += $(foreach s,$(CSRCS:.c=.o),$(OBJ_DIR)/$(notdir $s))\n</code></pre>\n\n<p>as far as I know g++ can compile gcc files without a problem.</p>\n\n<p>Edit: need to use wildcard function to actually get the list of files.\nmy mistake about g++ and c. Only linking is not problematic. You will have to use another set files of OBJC and use gcc explicitly in another rule to compile them. Just make sure to sum all objects file in OBJ and link against g++. \nI really suggest using implicit rules to compile c and c++ and just adding a rule for linking.</p>\n\n<p>Regarding the characters warning. Im throwing a longshot guess, but might have it anything to with the charset expected from the file? Im not sure, but id try to copy paste the content to a new file on my computer and recompile it.</p>\n"}, {"tags": [], "owner": {"reputation": 7, "user_id": 1824157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b29d6021afb6119cca82cbc1cff26a2?s=128&d=identicon&r=PG", "display_name": "user1824157", "link": "https://stackoverflow.com/users/1824157/user1824157"}, "is_accepted": false, "score": 0, "last_activity_date": 1440631943, "creation_date": 1440631943, "answer_id": 32238350, "question_id": 32236126, "link": "https://stackoverflow.com/questions/32236126/need-to-compile-a-program-with-both-c-and-c-code-using-makefile/32238350#32238350", "title": "Need to compile a program with both C++ and C code using Makefile", "body": "<p>I resolved the issue another way: </p>\n\n<p>I changed the name of the .c file to .cpp and encompassed the source file content in extern \"C\" { ..file content.. }</p>\n\n<p>Also changed the file name in Makefile from .c to .cpp and resolved the issue.   </p>\n"}], "owner": {"reputation": 7, "user_id": 1824157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b29d6021afb6119cca82cbc1cff26a2?s=128&d=identicon&r=PG", "display_name": "user1824157", "link": "https://stackoverflow.com/users/1824157/user1824157"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 426, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1440656680, "creation_date": 1440620896, "last_edit_date": 1440621421, "question_id": 32236126, "link": "https://stackoverflow.com/questions/32236126/need-to-compile-a-program-with-both-c-and-c-code-using-makefile", "title": "Need to compile a program with both C++ and C code using Makefile", "body": "<p>I need that a Makefile that someone else previously provided be able to compile .C files with .CPP files. At the time this Makefile was created, we didn\u2019t have any .C files in the project, but that has changed so I modified the Makefile as follows: </p>\n\n<pre><code>GPP=g++\n\nCPPSRCS= \\\n    ./CBDefault.cpp \\\n    ./testPFDefault.cpp \\\n    ./PFDefault.cpp \\\n    ./xapiDebug.cpp \\\n    ./init.cpp \\\n    ./tracePriorityManager.c \\\n\nCFLAGS= -O0 -g3 -Wall -c -fmessage-length=0 -std=c++0x -IASB -IALU   \n-Istub -IIKAN\nOBJ_DIR=../build/pxy/obj\n\nOBJS := $(foreach s,$(CPPSRCS:.cpp=.o),$(OBJ_DIR)/$(notdir $s))\n\n\nPROG=../build/pxy/pxy\n\n$(PROG): $(OBJS) | $(dir $(PROG))\n    $(GPP) -o $@ $(OBJS)\n\n$(OBJ_DIR):\n    mkdir -p $@\n\n$(foreach src,$(CPPSRCS),$(eval $(OBJ_DIR)/$(notdir $(src:.cpp=.o)):\nCSRC=$(src)))\n\n\n$(OBJS): | $(OBJ_DIR)\n    $(GPP) $(CFLAGS) -c -o $@ $(CSRC)\n</code></pre>\n\n<p>Adding tracePriorityManager.c to the list of CPPSRCS macros.\nCompilation results in a long list of error messages with the following content: </p>\n\n<pre><code>../build/pxy/obj/tracePriorityManager.c:10:3607: warning: null      \ncharacter(s) ignored\n../build/pxy/obj/tracePriorityManager.c:10:3618: warning: null    \ncharacter(s) ignored\n../build/pxy/obj/tracePriorityManager.c:10: error: stray ?\\1? in program\n../build/pxy/obj/tracePriorityManager.c:10:3620: warning: null   \ncharacter(s) ignored\n</code></pre>\n\n<p>Can you suggest a change in the Makefile that would fix the problem? </p>\n"}, {"tags": ["c++", "optimization", "g++"], "comments": [{"owner": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "edited": false, "score": 2, "creation_date": 1440622305, "post_id": 32236122, "comment_id": 52355232, "body": "Marc Glisse&#39;s answer is likely the reason you are not seeing the elimination of expressions multiplied by a constant zero but as a side note, your premise that macros are the way to achieve readability and optimization in C++ is wrong. You should really consider using inline functions or templates (depending on the details of your problem) rather than macros for this sort of thing in C++. A modern compiler will generally do as good or better a job of optimization and the resulting code will be more readable and more debuggable."}, {"owner": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "edited": false, "score": 1, "creation_date": 1440624551, "post_id": 32236122, "comment_id": 52356280, "body": "Also, in your macro, it&#39;s unsafe not to put parentheses around macro parameters. Example, I would say <code>#define THE_EQ(A,B,C,D,E,F) r[n] = (A)*((B)-(C)) + (D)*(E) + (F)</code>. Otherwise, you&#39;re at the mercy of precedence mistakes."}, {"owner": {"reputation": 1066, "user_id": 4602856, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d6bdff4f90dbe4527291814aa91598df?s=128&d=identicon&r=PG&f=1", "display_name": "codechimp", "link": "https://stackoverflow.com/users/4602856/codechimp"}, "edited": false, "score": 0, "creation_date": 1440757263, "post_id": 32236122, "comment_id": 52416143, "body": "@Dunlavey. I&#39;m aware of the issue you note.  My real code already includes nesting each parameter in paraphrases.  I left it out of the test code for expediency."}], "answers": [{"comments": [{"owner": {"reputation": 1066, "user_id": 4602856, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d6bdff4f90dbe4527291814aa91598df?s=128&d=identicon&r=PG&f=1", "display_name": "codechimp", "link": "https://stackoverflow.com/users/4602856/codechimp"}, "edited": false, "score": 0, "creation_date": 1440757983, "post_id": 32236366, "comment_id": 52416574, "body": "-ffast-math did it! thanks.  After I posted the question, the issue of 0*NaN and 0*Inf had occurred to me, so I tried -ffinite-math-only....with no luck.  Obviously, I had forgotten about signed zeros."}, {"owner": {"reputation": 1066, "user_id": 4602856, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d6bdff4f90dbe4527291814aa91598df?s=128&d=identicon&r=PG&f=1", "display_name": "codechimp", "link": "https://stackoverflow.com/users/4602856/codechimp"}, "edited": false, "score": 0, "creation_date": 1440758870, "post_id": 32236366, "comment_id": 52417074, "body": "PS -ffast-math was definitely the easiest, but the combo of -fno-signed-zeros and -ffinite-math-only is also sufficient to do the trick"}], "tags": [], "owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "is_accepted": true, "score": 4, "last_activity_date": 1440621815, "creation_date": 1440621815, "answer_id": 32236366, "question_id": 32236122, "link": "https://stackoverflow.com/questions/32236122/g-optimizing-arihmetic-expression-with-trivial-terms-zero-product-terms/32236366#32236366", "title": "g++ optimizing arihmetic expression with trivial terms (zero-product terms)", "body": "<pre><code>/* Maybe fold x * 0 to 0.  The expressions aren't the same\n   when x is NaN, since x * 0 is also NaN.  Nor are they the\n   same in modes with signed zeros, since multiplying a\n   negative value by 0 gives -0, not +0.  */\n</code></pre>\n\n<p>The optimization in gcc is guarded by a few conditions. <code>-ffast-math</code> is the easiest way to convince gcc that you do not care about those cases.</p>\n"}], "owner": {"reputation": 1066, "user_id": 4602856, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d6bdff4f90dbe4527291814aa91598df?s=128&d=identicon&r=PG&f=1", "display_name": "codechimp", "link": "https://stackoverflow.com/users/4602856/codechimp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 32236366, "answer_count": 1, "score": 2, "last_activity_date": 1440621815, "creation_date": 1440620882, "question_id": 32236122, "link": "https://stackoverflow.com/questions/32236122/g-optimizing-arihmetic-expression-with-trivial-terms-zero-product-terms", "title": "g++ optimizing arihmetic expression with trivial terms (zero-product terms)", "body": "<p>I writing mathematical code with a complicated arithmetic expression that is being used with varying types of inputs, but for the purpose of hyper-optimization AND readability, I want to use it as a macro rather than a function.  However, I'm having trouble getting g++ (4.9.2) to optimize in a way I would think is obvious and need help.</p>\n\n<p>The arithmetic operation of interest is in only one location, but the rub is that there are numerous permutations to the input variables. That is, the equation variables can be either a singleton or an array.  For the purpose of conserving memory and CPU cache, I want to code for each variation (i.e. array and singleton input).  Another element of the problem is that some terms of the equation drop out under certain conditions variables might not just be a singleton, but known <em>a priori</em> to be exactly 0 for certain instances, thus causing terms of the equation to be trivial.</p>\n\n<p>Consider the following simplified, illustrative example</p>\n\n<pre><code>float a[128],b[128],c[128],d[128],e[128],r[128];\nfloat a0, b0, c0, d0, e0;\n...\n#define ITERATE for (int n=1; n&lt;N; n++)\n#define THE_EQ(A,B,C,D,E,F) r[n] = A*(B-C) + D*E + F\n...\nswitch(condition) {\n   case 1: ITERATE THE_EQ(a[n],b[n],c[n],d[n],e[n],0); break;\n   case 2: ITERATE THE_EQ( a0 ,b[n],c[n],d[n],e[n],0); break;\n   case 3: ITERATE THE_EQ(  0 ,b[n],c[n],d[n],e[n],0); break;\n   case 4: ITERATE THE_EQ(a[n],b[n],c[n],d[n],e[n],0); break;\n   case 5: ITERATE THE_EQ( a0 ,b[n],c[n], d0 ,e[n],0); break;\n   case 6: ITERATE THE_EQ(  0 ,b[n],c[n],  0 ,e[n],1); break;\n\n   ....\n} // switch\n</code></pre>\n\n<p>The real code has a more complex equation/macro and has many more permutations of input variable, but the above code is my test of g++ compiler/optimizer.  What I'm finding is that g++ is not optimizing as I had hoped.  That is, g++ is not dropping, when appropriate, the trivial arithmetic operations.</p>\n\n<p>For example, in case 3, I expect the final microcode free of any <code>b[n] - c[n]</code> related operation.  And for case 6, I expect elements in array <code>r[n]</code> to be simply set to <code>1</code>, with no arithmetic operations at all.  Unfortunately, neither is the case. :(  </p>\n\n<p>The optimizations that does occur are the AVX vectorization and using <code>VXORPS</code> to generate the zero value.  But with the optimally generated 0, g++ still goes thru with the trival <code>0*(b[n]-c[n])</code> and <code>0*e[n]</code> operations. </p>\n\n<p>Witness: </p>\n\n<pre><code>; case 6: ITERATE THE_EQ(0,b[n],c[n],0,e[n],1); break;\n0x400778    vxorps xmm1,xmm1,xmm1                     ; generate 0\n...\n0x4007a0    vmovaps ymm0,YMMWORD PTR [rsi+rax*1]\n0x4007a5    vmulps ymm2,ymm1,YMMWORD PTR [rdx+rax*1]  ; 0*e[n]\n0x4007aa    vsubps ymm0,ymm0,YMMWORD PTR [rcx+rax*1]  ; b[n]-c[n]\n0x4007af    vmulps ymm0,ymm0,ymm1                     ; (b[n]-c[n])*0\n0x4007b3    vaddps ymm0,ymm0,ymm2                     ; 0*(b[n]-c[n])+0*e[n]\n0x4007b7    vaddps ymm0,ymm0,ymm3                     ; ....+1\n0x4007bb    vmovaps YMMWORD PTR [rdi+rax*1],ymm0\n0x4007c0    add    rax,0x20\n0x4007c4    cmp    rax,0x200\n0x4007ca    jne    0x4007a0 &lt;main()+128&gt;\n</code></pre>\n\n<p>Obviously, this is NOT optimal.  Is there a technique (via PRAGMA or compile flag) that will encourage g++ drop those trivial arithmetic operations?    Or is there another method, other than hardcoding 60+ different expressions, to get to my desired level of optimization.</p>\n\n<p>Command is </p>\n\n<blockquote>\n  <p>g++-4.9 -Wall -fexceptions -O3 -g -march=corei7-avx main.cpp</p>\n</blockquote>\n\n<p>with g++ 4.9.2</p>\n"}, {"tags": ["c++", "pointers", "parameter-passing"], "comments": [{"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "edited": false, "score": 0, "creation_date": 1440620310, "post_id": 32235862, "comment_id": 52354158, "body": "read this <a href=\"http://stackoverflow.com/questions/57483/what-are-the-differences-between-a-pointer-variable-and-a-reference-variable-in\" title=\"what are the differences between a pointer variable and a reference variable in\">stackoverflow.com/questions/57483/&hellip;</a>"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1440620380, "post_id": 32235862, "comment_id": 52354184, "body": "Is too hard to make a minimal example?"}, {"owner": {"reputation": 438, "user_id": 5020491, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4644a991eae35f31e1eba67be517585f?s=128&d=identicon&r=PG&f=1", "display_name": "ksivakumar", "link": "https://stackoverflow.com/users/5020491/ksivakumar"}, "edited": false, "score": 0, "creation_date": 1440620446, "post_id": 32235862, "comment_id": 52354217, "body": "<a href=\"http://pointclouds.org/documentation/tutorials/pcl_visualizer.php\" rel=\"nofollow noreferrer\">pointclouds.org/documentation/tutorials/pcl_visualizer.php</a> I&#39;ve been using this to help me. I also tried declaring the pointer as <code>pcl::PointCloud&lt;pcl::PointXYZ&gt;::ConstPtr linptr = linaccpc;</code> but getting an error with conversion from &#39;pcl::PointCloud&lt;pcl::PointXYZ&gt;&#39; to non-scalar type &#39;pcl::PointCloud&lt;pcl::PointXYZ&gt;::ConstPtr {aka boost::shared_ptr&lt;const pcl::PointCloud&lt;pcl::PointXYZ&gt; &gt;}&#39; requested"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 2, "creation_date": 1440620577, "post_id": 32235862, "comment_id": 52354292, "body": "Thanks KS, however this thing requires boost, which I am not in a mood to  download now. I mean that you could make a minimal example with the same case of const pointers. That way it would be super easy to help you, at least in my case. :)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1440623944, "post_id": 32235862, "comment_id": 52356017, "body": "@gsamaras If you have a C++11 compiler you may use <code>std::shared_ptr</code> which is very similar to what <code>boost::shared_ptr</code> was"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1440624524, "post_id": 32235862, "comment_id": 52356263, "body": "@MattMcNabb: That assumes PCL will accept <code>std::shared_ptr</code> and not rely solely on <code>boost::shared_ptr</code> only."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1440625095, "post_id": 32235862, "comment_id": 52356515, "body": "@MattMcNabb yes, but I am not the one seeking for help here. I really feel that a minimal example would be sweet here. But Remy felt generous."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1440623898, "post_id": 32236305, "comment_id": 52355997, "body": "<code>pcl::PointCloud&lt;pcl::PointXYZ&gt;::ConstPtr linptr (&amp;linaccpc);</code> will not be correct because the <code>shared_ptr</code> destructor will try to <code>delete &amp;linaccpc</code>.  (You show the correct technique on the next code snippet but since OP is new to smart pointers I think it would be good to clearly say &quot;don&#39;t do this&quot;, and also reiterate that he needs to get rid of <code>linaccpc</code> and only use the smart pointer <code>linptr</code>)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1440624627, "post_id": 32236305, "comment_id": 52356308, "body": "Re. your edit: <code>linaccpc</code> is a global variable in OP&#39;s code, not a stack variable."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1440624707, "post_id": 32236305, "comment_id": 52356349, "body": "@MattMcNabb: Stack or global, the same risk applies. But I have re-worded my answer."}, {"owner": {"reputation": 438, "user_id": 5020491, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4644a991eae35f31e1eba67be517585f?s=128&d=identicon&r=PG&f=1", "display_name": "ksivakumar", "link": "https://stackoverflow.com/users/5020491/ksivakumar"}, "edited": false, "score": 0, "creation_date": 1440692821, "post_id": 32236305, "comment_id": 52389629, "body": "So if I allocate the pointer using new, how would I point that to linaccpc, which is my point cloud object? I tried <code>linptr = &amp;linaccpc;</code> on the next line, and I get <code>error: &#39;linptr&#39; does not name a type</code>. Thank you everyone for all your help!"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1440695828, "post_id": 32236305, "comment_id": 52391319, "body": "If you allocate a <code>PointCloud</code> using <code>new</code>, it is already its own variable in memory, you would not need a separate `lineaccpc variable at all, you would get rid of that variable from your code. Please see the examples I showed in my answer."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 4, "last_activity_date": 1440624807, "last_edit_date": 1440624807, "creation_date": 1440621625, "answer_id": 32236305, "question_id": 32235862, "link": "https://stackoverflow.com/questions/32235862/trouble-with-const-pointers/32236305#32236305", "title": "Trouble with Const Pointers", "body": "<p>Look at the definition of <code>addPointCloud()</code> more carefully:</p>\n\n<pre><code>bool pcl::visualization::PCLVisualizer::addPointCloud(\n    const pcl::PointCloud&lt;pcl::PointXYZ &gt;::ConstPtr &amp; cloud,\n    const std::string &amp;     id = \"cloud\",\n    int     viewport = 0     \n)\n</code></pre>\n\n<p>Its first parameter is a <code>const</code> reference to a <code>pcl::PointCloud&lt;pcl::PointXYZ&gt;::ConstPtr</code>, where <code>ConstPtr</code> is a typedef for <code>boost::shared_ptr&lt;const PointCloud&lt;pcl::PointXYZ&gt;&gt;</code>.</p>\n\n<p>You are trying to pass a <code>pcl::PointCloud&lt;pcl::PointXYZ&gt;*</code> where a <code>boost::shared_ptr&lt;const PointCloud&lt;pcl::PointXYZ&gt;&gt;</code> is expected.  That does not match the definition.</p>\n\n<p><code>boost::shared_ptr</code> has an <code>explicit</code> constructor for single-value input, so the compiler cannot implicitly create a temporary <code>boost::shared_ptr&lt;const PointCloud&lt;pcl::PointXYZ&gt;&gt;</code> for your <code>pcl::PointCloud&lt;pcl::PointXYZ&gt;*</code> value.</p>\n\n<p>To get around that, you will have to invoke the explicit constructor directly:</p>\n\n<pre><code>pcl::PointCloud&lt;pcl::PointXYZ&gt; linaccpc;\nconst pcl::PointCloud&lt;pcl::PointXYZ&gt; *linptr = &amp;linaccpc;\n...\nlinplotter-&gt;addPointCloud&lt;pcl::PointXYZ&gt; (pcl::PointCloud&lt;pcl::PointXYZ&gt;::ConstPtr(linptr), \"linear acc\", 0);\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>pcl::PointCloud&lt;pcl::PointXYZ&gt; linaccpc;\npcl::PointCloud&lt;pcl::PointXYZ&gt;::ConstPtr linptr (&amp;linaccpc);\n...\nlinplotter-&gt;addPointCloud&lt;pcl::PointXYZ&gt; (linptr, \"linear acc\", 0);\n</code></pre>\n\n<p>Note, however, that this will likely crash your code.  By default, <code>shared_ptr</code> calls <code>delete</code> on any pointer you give it, so it will be calling <code>delete</code> on a memory address it has no business freeing.  So allocate the pointer using <code>new</code> instead:</p>\n\n<pre><code>pcl::PointCloud&lt;pcl::PointXYZ&gt;::ConstPtr linptr (new pcl::PointCloud&lt;pcl::PointXYZ&gt;);\n...\nlinplotter-&gt;addPointCloud&lt;pcl::PointXYZ&gt; (linptr, \"linear acc\", 0);\n</code></pre>\n\n<p>If you want to get around that and a variable whose lifetime you control, but that <code>shared_ptr</code> simply holds a pointer to, you will have to provide a custom <code>deleter</code> that will not free the variable memory when the <code>shared_ptr</code> is done using the pointer:</p>\n\n<pre><code>template &lt;class T&gt;\nstatic void DoNotFree(T*)\n{\n}\n\n...\n\npcl::PointCloud&lt;pcl::PointXYZ&gt; linaccpc;\npcl::PointCloud&lt;pcl::PointXYZ&gt;::ConstPtr linptr (&amp;linaccpc, &amp;DoNotFree&lt;pcl::PointCloud&lt;pcl::PointXYZ&gt;&gt;);\n...\nlinplotter-&gt;addPointCloud&lt;pcl::PointXYZ&gt; (linptr, \"linear acc\", 0);\n</code></pre>\n\n<p>This last approach will only work if <code>linplotter</code> does not need to keep using the <code>linaccpc</code> variable after it goes out of scope, such as if <code>linplotter</code> is destroyed before <code>lineaccpc</code>.  This is not something you should rely on, though.  The primary purpose of <code>shared_ptr</code> is to manage an object's lifetime for you, so let it do its job.  Use <code>new</code>.</p>\n"}], "owner": {"reputation": 438, "user_id": 5020491, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4644a991eae35f31e1eba67be517585f?s=128&d=identicon&r=PG&f=1", "display_name": "ksivakumar", "link": "https://stackoverflow.com/users/5020491/ksivakumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4515, "favorite_count": 1, "accepted_answer_id": 32236305, "answer_count": 1, "score": 0, "last_activity_date": 1440624807, "creation_date": 1440619932, "last_edit_date": 1440622973, "question_id": 32235862, "link": "https://stackoverflow.com/questions/32235862/trouble-with-const-pointers", "title": "Trouble with Const Pointers", "body": "<p>I'm trying to use the function: </p>\n\n<pre><code>bool pcl::visualization::PCLVisualizer::addPointCloud(const pcl::PointCloud&lt;pcl::PointXYZ &gt;::ConstPtr &amp; cloud,\nconst std::string &amp;     id = \"cloud\",\nint     viewport = 0     \n)\n</code></pre>\n\n<p>So I have the following code as global variables:</p>\n\n<pre><code>pcl::PointCloud&lt;pcl::PointXYZ&gt; linaccpc;\nconst pcl::PointCloud&lt;pcl::PointXYZ&gt; * linptr = &amp;linaccpc;\nboost::shared_ptr&lt;pcl::visualization::PCLVisualizer&gt; linplotter (new pcl::visualization::PCLVisualizer(\"linear acceleration\");\n</code></pre>\n\n<p>And then in my main function:</p>\n\n<pre><code>linplotter-&gt;addPointCloud&lt;pcl::PointXYZ&gt; (linptr, \"linear acc\", 0);\n</code></pre>\n\n<p>And I get the error:</p>\n\n<pre><code>error: no matching function for call to 'pcl::visualization::PCLVisualizer::addPointCloud(const pcl::PointCloud&lt;pcl::PointXYZ&gt;*&amp;, const char [11], int)'\nlinplotter-&gt;addPointCloud&lt;pcl::PointXYZ&gt; (linptr, \"linear acc\", 0);\n                                                                 ^\n</code></pre>\n\n<p>Any help is much appreciated. </p>\n"}, {"tags": ["c++", "templates", "c++11", "variadic-templates"], "comments": [{"owner": {"reputation": 85822, "user_id": 383402, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8c4a15feb7408cade1a8ad5bf34d44a4?s=128&d=identicon&r=PG", "display_name": "Borealid", "link": "https://stackoverflow.com/users/383402/borealid"}, "edited": false, "score": 0, "creation_date": 1440622196, "post_id": 32235855, "comment_id": 52355174, "body": "A binary search tree is actually much better than O(log(i)). It&#39;s O(log(k)), where k is the number of distinct i in the switch."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1440626766, "post_id": 32235855, "comment_id": 52357212, "body": "<a href=\"https://gist.github.com/lichray/dd803a8bb3461fc842e5\" rel=\"nofollow noreferrer\">gist.github.com/lichray/dd803a8bb3461fc842e5</a> (not my code, it&#39;s a C++Now 2015 lightning talk)."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1440693219, "post_id": 32235855, "comment_id": 52389879, "body": "@Barry I don&#39;t think there&#39;s one."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1440697219, "post_id": 32235855, "comment_id": 52392211, "body": "Just as a comment on the optimization results -- a lot of times when I use variants in my programs, I&#39;m doing it for extra flexibility, but one of the data types of the variant is actually the most common. For instance if you have a <code>std::vector&lt;variant&lt;message_obj1, message_obj2,...&gt;&gt;</code> often one of the messages is the most common. Or if you have something like a boost property tree, each node is a variant but if the fanout is large then most of the nodes are leaves (strings). In these situations my implementation will benefit greatly from branch prediction, while a jump table won&#39;t."}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 1, "creation_date": 1440711432, "post_id": 32235855, "comment_id": 52399596, "body": "Out of interest, can you share the program you are using for benchmarking so we can poke and prod it?"}, {"owner": {"reputation": 738, "user_id": 1879547, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/d08c8785b44c2e795ebed85a2afc7cc4?s=128&d=identicon&r=PG", "display_name": "0x2207", "link": "https://stackoverflow.com/users/1879547/0x2207"}, "edited": false, "score": 0, "creation_date": 1440746478, "post_id": 32235855, "comment_id": 52409810, "body": "<a href=\"https://gist.github.com/matwey/d2985fb9dcb14302ad33\" rel=\"nofollow noreferrer\">gist.github.com/matwey/d2985fb9dcb14302ad33</a> <a href=\"https://gist.github.com/matwey/3dbeacee1cdaf3217dfd\" rel=\"nofollow noreferrer\">gist.github.com/matwey/3dbeacee1cdaf3217dfd</a> Please, also point me where I am wrong."}, {"owner": {"reputation": 738, "user_id": 1879547, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/d08c8785b44c2e795ebed85a2afc7cc4?s=128&d=identicon&r=PG", "display_name": "0x2207", "link": "https://stackoverflow.com/users/1879547/0x2207"}, "edited": false, "score": 0, "creation_date": 1440748169, "post_id": 32235855, "comment_id": 52410834, "body": "Now, it is fixed, thank you."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1440748550, "post_id": 32235855, "comment_id": 52411013, "body": "@0x2207 If I run this program, I get <code>5500000000 must be 21000000000</code> This does not look like it&#39;s a correct result?"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1440748946, "post_id": 32235855, "comment_id": 52411228, "body": "@0x2207 I think it should be <code>55*ntry</code>, because <code>10*(10+1)&#47;2 == 110&#47;2 == 55</code>"}, {"owner": {"reputation": 738, "user_id": 1879547, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/d08c8785b44c2e795ebed85a2afc7cc4?s=128&d=identicon&r=PG", "display_name": "0x2207", "link": "https://stackoverflow.com/users/1879547/0x2207"}, "edited": false, "score": 0, "creation_date": 1440748997, "post_id": 32235855, "comment_id": 52411257, "body": "Yes, you are right, 210 is for tuple of 20 different types."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1440749106, "post_id": 32235855, "comment_id": 52411327, "body": "On my machine, using <code>-O3 -march=native</code>, clang++ produces a program which is almost <b>20 times faster</b> than what g++ produces, for TartanLlama&#39;s solution."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1440749262, "post_id": 32235855, "comment_id": 52411412, "body": "Interestingly, the reverse happens for Chris Beck&#39;s solution :( The time required by the executable produced by clang++ for Chris Beck&#39;s solution is of the same order as the time required by the exe produced by g++ for TartanLlama&#39;s solution."}, {"owner": {"reputation": 738, "user_id": 1879547, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/d08c8785b44c2e795ebed85a2afc7cc4?s=128&d=identicon&r=PG", "display_name": "0x2207", "link": "https://stackoverflow.com/users/1879547/0x2207"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1440749647, "post_id": 32235855, "comment_id": 52411658, "body": "@dyp this is because clang++ inlined all functions and calculated 55 for you in compile time, could you look into assembler? Seems we need different test-suite."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1440750344, "post_id": 32235855, "comment_id": 52412036, "body": "@0x2207 Yes, certainly looks like it. OTOH, it seems g++ precomputes the other solution. <a href=\"http://coliru.stacked-crooked.com/a/02276d4082e96c3c\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/02276d4082e96c3c</a>"}, {"owner": {"reputation": 738, "user_id": 1879547, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/d08c8785b44c2e795ebed85a2afc7cc4?s=128&d=identicon&r=PG", "display_name": "0x2207", "link": "https://stackoverflow.com/users/1879547/0x2207"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1440750422, "post_id": 32235855, "comment_id": 52412071, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/88164/discussion-between-0x2207-and-dyp\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1440631564, "post_id": 32235928, "comment_id": 52358781, "body": "Also, T.C.&#39;s comment above shows another solution in this vein."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1440641674, "post_id": 32235928, "comment_id": 52361049, "body": "Split can be written with less than O(n) recursive depth with a few tricks. And avoiding O(n) recursive depth is key, as there is a relatively shallow limit on template recursion in C++11 in both theory and practice. Replace <code>Prepend&lt;T, TypeList&gt;</code> with <code>Concat&lt;TypeList...&gt;</code> (which is about as easy to write as Prepend). Instead of <code>Split&lt;k-1</code> recursion do <code>Split&lt;k&#47;2</code>: In particular, specialize <code>Split</code> at <code>k=1</code> and <code>k=0</code>.  Then <code>Split&lt;k, X&gt;::left</code> is <code>Concat_t&lt; Split&lt;k&#47;2, X&gt;::left, Split&lt;k-k&#47;2, Split&lt;k&#47;2,X&gt;::right&gt;::left &gt;</code>, and <code>Split&lt;k, X&gt;::right</code> is <code>Split&lt;k-k&#47;2, Split&lt;k&#47;2,X&gt;::right&gt;::right</code>."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1440644095, "post_id": 32235928, "comment_id": 52361581, "body": "I tried to work through this but I don&#39;t get it. What is X here, the typelist? X needs to be getting smaller at each level of the recursion or it doesn&#39;t work. I believed that with current C++ template partial specialization rules, I can only have one &quot;...&quot; item and it has to be the last. So I can only possibly pull O(1) items off the front of any type list in any one iteration. So if I have a typelist of length O(n) I think I need recursive depth O(n). (Please correct me if I&#39;m wrong.) I thought the only way to get less would be to pass the arguments as a type tree instead of as a type list."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1440644571, "post_id": 32235928, "comment_id": 52361706, "body": "Yes, X is the list.  Split needs to operate on <code>TypeList&lt;Ts...&gt;</code> not <code>Ts...</code> for the above to work (as the recursions take returned typelists, and feed the to other <code>Split</code>s).  You can peel 1 off per step, but instead of a linear expansion the above builds a binary tree, with the &#39;split 1 off&#39; as leaves.  Depth is logarithmic, volume is linear (2n).  The code blocks in my precious comment are almost the code required (missing <code>typename</code> spam)."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1440644804, "post_id": 32235928, "comment_id": 52361769, "body": "Is it actually logarithmic when you do it that way though? Because then the right side needs to rely on the result of the left side. If I typedef the result of the left and use it in the right, does the template engine expand that out recursively or do it the smart way? Edit: Okay I think I get it now, going to try to finish it"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1440645690, "post_id": 32235928, "comment_id": 52361956, "body": "No, I&#39;m a disbeliever again. I must be missing some basic TMP technique. Here&#39;s something easier than <code>Split</code> which I don&#39;t see how to do with o(n) recursive depth -- get the last element of a typelist. If you can&#39;t do that then you can&#39;t do Split(T::size-1, T) in o(n) either, where n = T::size."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1440646437, "post_id": 32235928, "comment_id": 52362124, "body": "Ok, I get it now :) thank you, I&#39;m sure that I learned a crucial TMP technique here"}], "tags": [], "owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "is_accepted": false, "score": 7, "last_activity_date": 1440700419, "last_edit_date": 1440700419, "creation_date": 1440620159, "answer_id": 32235928, "question_id": 32235855, "link": "https://stackoverflow.com/questions/32235855/switch-statement-variadic-template-expansion/32235928#32235928", "title": "Switch statement variadic template expansion", "body": "<p>Ok, I rewrote my answer. This gives a different approach to what TartanLlama and also what I suggested before. This meets your complexity requirement and doesn't use function pointers so everything is inlineable.</p>\n\n<p><strong>Edit: Much thanks to Yakk for pointing out a quite significant optimization (for the compile-time template recursion depth required) in comments</strong></p>\n\n<p>Basically I make a binary tree of the types / function handlers using templates, and implement the binary search manually.</p>\n\n<p>It might be possible to do this more cleanly using either mpl or boost::fusion, but this implementation is self-contained anyways.</p>\n\n<p>It definitely meets your requirements, that the functions are inlineable and runtime look up is O(log n) in the number of types in the tuple.</p>\n\n<p>Here's the complete listing:</p>\n\n<pre><code>#include &lt;cassert&gt;\n#include &lt;cstdint&gt;\n#include &lt;tuple&gt;\n#include &lt;iostream&gt;\n\nusing std::size_t;\n\n// Basic typelist object\ntemplate&lt;typename... TL&gt;\nstruct TypeList{\n   static const int size = sizeof...(TL);\n};\n\n// Metafunction Concat: Concatenate two typelists\ntemplate&lt;typename L, typename R&gt;\nstruct Concat;\n\ntemplate&lt;typename... TL, typename... TR&gt;\nstruct Concat &lt;TypeList&lt;TL...&gt;, TypeList&lt;TR...&gt;&gt; {\n    typedef TypeList&lt;TL..., TR...&gt; type;\n};\n\ntemplate&lt;typename L, typename R&gt;\nusing Concat_t = typename Concat&lt;L,R&gt;::type;\n\n// Metafunction First: Get first type from a typelist\ntemplate&lt;typename T&gt;\nstruct First;\n\ntemplate&lt;typename T, typename... TL&gt;\nstruct First &lt;TypeList&lt;T, TL...&gt;&gt; {\n    typedef T type;\n};\n\ntemplate&lt;typename T&gt;\nusing First_t = typename First&lt;T&gt;::type;\n\n\n// Metafunction Split: Split a typelist at a particular index\ntemplate&lt;int i, typename TL&gt;\nstruct Split;\n\ntemplate&lt;int k, typename... TL&gt;\nstruct Split&lt;k, TypeList&lt;TL...&gt;&gt; {\nprivate:\n    typedef Split&lt;k/2, TypeList&lt;TL...&gt;&gt; FirstSplit;\n    typedef Split&lt;k-k/2, typename FirstSplit::R&gt; SecondSplit;\npublic:\n    typedef Concat_t&lt;typename FirstSplit::L, typename SecondSplit::L&gt; L;\n    typedef typename SecondSplit::R R;\n};\n\ntemplate&lt;typename T, typename... TL&gt;\nstruct Split&lt;0, TypeList&lt;T, TL...&gt;&gt; {\n    typedef TypeList&lt;&gt; L;\n    typedef TypeList&lt;T, TL...&gt; R;\n};\n\ntemplate&lt;typename T, typename... TL&gt;\nstruct Split&lt;1, TypeList&lt;T, TL...&gt;&gt; {\n    typedef TypeList&lt;T&gt; L;\n    typedef TypeList&lt;TL...&gt; R;\n};\n\ntemplate&lt;int k&gt;\nstruct Split&lt;k, TypeList&lt;&gt;&gt; {\n    typedef TypeList&lt;&gt; L;\n    typedef TypeList&lt;&gt; R;\n};\n\n\n// Metafunction Subdivide: Split a typelist into two roughly equal typelists\ntemplate&lt;typename TL&gt;\nstruct Subdivide : Split&lt;TL::size / 2, TL&gt; {};\n\n// Metafunction MakeTree: Make a tree from a typelist\ntemplate&lt;typename T&gt;\nstruct MakeTree;\n\n/*\ntemplate&lt;&gt;\nstruct MakeTree&lt;TypeList&lt;&gt;&gt; {\n    typedef TypeList&lt;&gt; L;\n    typedef TypeList&lt;&gt; R;\n    static const int size = 0;\n};*/\n\ntemplate&lt;typename T&gt;\nstruct MakeTree&lt;TypeList&lt;T&gt;&gt; {\n    typedef TypeList&lt;&gt; L;\n    typedef TypeList&lt;T&gt; R;\n    static const int size = R::size;\n};\n\ntemplate&lt;typename T1, typename T2, typename... TL&gt;\nstruct MakeTree&lt;TypeList&lt;T1, T2, TL...&gt;&gt; {\nprivate:\n    typedef TypeList&lt;T1, T2, TL...&gt; MyList;\n    typedef Subdivide&lt;MyList&gt; MySubdivide;\npublic:\n    typedef MakeTree&lt;typename MySubdivide::L&gt; L;\n    typedef MakeTree&lt;typename MySubdivide::R&gt; R;\n    static const int size = L::size + R::size;\n};\n\n// Typehandler: What our lists will be made of\ntemplate&lt;typename T&gt;\nstruct type_handler_helper {\n    typedef int result_type;\n    typedef T input_type;\n    typedef result_type (*func_ptr_type)(const input_type &amp;);\n};\n\ntemplate&lt;typename T, typename type_handler_helper&lt;T&gt;::func_ptr_type me&gt;\nstruct type_handler {\n    typedef type_handler_helper&lt;T&gt; base;\n    typedef typename base::func_ptr_type func_ptr_type;\n    typedef typename base::result_type result_type;\n    typedef typename base::input_type input_type;\n\n    static constexpr func_ptr_type my_func = me;\n    static result_type apply(const input_type &amp; t) {\n        return me(t);\n    }\n};\n\n// Binary search implementation\ntemplate &lt;typename T, bool b = (T::L::size != 0)&gt;\nstruct apply_helper;\n\ntemplate &lt;typename T&gt;\nstruct apply_helper&lt;T, false&gt; {\n    template&lt;typename V&gt;\n    static int apply(const V &amp; v, size_t index) {\n        assert(index == 0);\n        return First_t&lt;typename T::R&gt;::apply(v);\n    }\n};\n\ntemplate &lt;typename T&gt;\nstruct apply_helper&lt;T, true&gt; {\n    template&lt;typename V&gt;\n    static int apply(const V &amp; v, size_t index) {\n        if( index &gt;= T::L::size ) {\n            return apply_helper&lt;typename T::R&gt;::apply(v, index - T::L::size);\n        } else {\n            return apply_helper&lt;typename T::L&gt;::apply(v, index);\n        }\n    }\n};\n\n// Original functions\n\ninline int fun2(int x) {\n    return x;\n}\ninline int fun2(double x) {\n    return 0;   \n}\ninline int fun2(float x) {\n    return -1;   \n}\n\n// Adapted functions\ntypedef std::tuple&lt;int, double, float&gt; tup;\n\ninline int g0(const tup &amp; t) { return fun2(std::get&lt;0&gt;(t)); }\ninline int g1(const tup &amp; t) { return fun2(std::get&lt;1&gt;(t)); }\ninline int g2(const tup &amp; t) { return fun2(std::get&lt;2&gt;(t)); }\n\n// Registry\n\ntypedef TypeList&lt;\n   type_handler&lt;tup, &amp;g0&gt;,\n   type_handler&lt;tup, &amp;g1&gt;,\n   type_handler&lt;tup, &amp;g2&gt;\n&gt; registry;\n\ntypedef MakeTree&lt;registry&gt; jump_table;\n\nint apply(const tup &amp; t, size_t index) {\n    return apply_helper&lt;jump_table&gt;::apply(t, index);\n}\n\n// Demo\n\nint main() {\n    {\n        tup t{5, 1.5, 15.5f};\n\n        std::cout &lt;&lt; apply(t, 0) &lt;&lt; std::endl;\n        std::cout &lt;&lt; apply(t, 1) &lt;&lt; std::endl;\n        std::cout &lt;&lt; apply(t, 2) &lt;&lt; std::endl;\n    }\n\n    {\n        tup t{10, 1.5, 15.5f};\n\n        std::cout &lt;&lt; apply(t, 0) &lt;&lt; std::endl;\n        std::cout &lt;&lt; apply(t, 1) &lt;&lt; std::endl;\n        std::cout &lt;&lt; apply(t, 2) &lt;&lt; std::endl;\n    }\n\n    {\n        tup t{15, 1.5, 15.5f};\n\n        std::cout &lt;&lt; apply(t, 0) &lt;&lt; std::endl;\n        std::cout &lt;&lt; apply(t, 1) &lt;&lt; std::endl;\n        std::cout &lt;&lt; apply(t, 2) &lt;&lt; std::endl;\n    }\n\n    {\n        tup t{20, 1.5, 15.5f};\n\n        std::cout &lt;&lt; apply(t, 0) &lt;&lt; std::endl;\n        std::cout &lt;&lt; apply(t, 1) &lt;&lt; std::endl;\n        std::cout &lt;&lt; apply(t, 2) &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>Live on Coliru:\n<a href=\"http://coliru.stacked-crooked.com/a/3cfbd4d9ebd3bb3a\" rel=\"nofollow\">http://coliru.stacked-crooked.com/a/3cfbd4d9ebd3bb3a</a></p>\n"}, {"comments": [{"owner": {"reputation": 738, "user_id": 1879547, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/d08c8785b44c2e795ebed85a2afc7cc4?s=128&d=identicon&r=PG", "display_name": "0x2207", "link": "https://stackoverflow.com/users/1879547/0x2207"}, "edited": false, "score": 0, "creation_date": 1440688985, "post_id": 32237033, "comment_id": 52387072, "body": "So, arr[index](std::forward&lt;T&gt;(p), func) is not inlined. This adds function call overhead as I see from callgrind profile. The question here is whether it possible to ask compiler to inline the call generating switch-like code."}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "reply_to_user": {"reputation": 738, "user_id": 1879547, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/d08c8785b44c2e795ebed85a2afc7cc4?s=128&d=identicon&r=PG", "display_name": "0x2207", "link": "https://stackoverflow.com/users/1879547/0x2207"}, "edited": false, "score": 0, "creation_date": 1440711038, "post_id": 32237033, "comment_id": 52399431, "body": "I&#39;ve played around with a bit and I can&#39;t find a way to get it to inline. Looks like Chris&#39; solution will work better for you unless someone can work some magic on this."}, {"owner": {"reputation": 738, "user_id": 1879547, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/d08c8785b44c2e795ebed85a2afc7cc4?s=128&d=identicon&r=PG", "display_name": "0x2207", "link": "https://stackoverflow.com/users/1879547/0x2207"}, "edited": false, "score": 0, "creation_date": 1440746181, "post_id": 32237033, "comment_id": 52409646, "body": "I&#39;ve asked in gcc maillist about technical possibility for this code to be inlined but no response yet."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "reply_to_user": {"reputation": 738, "user_id": 1879547, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/d08c8785b44c2e795ebed85a2afc7cc4?s=128&d=identicon&r=PG", "display_name": "0x2207", "link": "https://stackoverflow.com/users/1879547/0x2207"}, "edited": false, "score": 1, "creation_date": 1440747158, "post_id": 32237033, "comment_id": 52410194, "body": "@0x2207 clang++ seems to do some kind of inlining: <a href=\"http://goo.gl/jnY5yx\" rel=\"nofollow noreferrer\">goo.gl/jnY5yx</a> It compiles the jump table to a single <code>jmpq</code> instruction; of course the <code>operator()</code> are inlined in the <code>apply_one</code> functions."}], "tags": [], "owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "is_accepted": false, "score": 5, "last_activity_date": 1440624588, "last_edit_date": 1495541440, "creation_date": 1440624588, "answer_id": 32237033, "question_id": 32235855, "link": "https://stackoverflow.com/questions/32235855/switch-statement-variadic-template-expansion/32237033#32237033", "title": "Switch statement variadic template expansion", "body": "<p>If you make <code>fun2</code> into a class with overloaded <code>operator()</code>:</p>\n\n<pre><code>struct fun2 {\n    inline int operator()(int x) {\n        return x;\n    }\n    inline int operator()(double x) {\n        return 0;   \n    }\n    inline int operator()(float x) {\n        return -1;   \n    }\n};\n</code></pre>\n\n<p>then we can modify dyp's answer from <a href=\"https://stackoverflow.com/a/21063041/496161\">here</a> to work for us.</p>\n\n<p>Note that this would look a lot neater in C++14, as we could have all the return types deduced and use <code>std::index_sequence</code>.</p>\n\n<pre><code>//call the function with the tuple element at the given index\ntemplate&lt;class Ret, int N, class T, class Func&gt;\nauto apply_one(T&amp;&amp; p, Func func) -&gt; Ret\n{\n    return func( std::get&lt;N&gt;(std::forward&lt;T&gt;(p)) );\n}\n\n//call with runtime index\ntemplate&lt;class Ret, class T, class Func, int... Is&gt;\nauto apply(T&amp;&amp; p, int index, Func func, seq&lt;Is...&gt;) -&gt; Ret\n{\n    using FT = Ret(T&amp;&amp;, Func);\n    //build up a constexpr array of function pointers to index\n    static constexpr FT* arr[] = { &amp;apply_one&lt;Ret, Is, T&amp;&amp;, Func&gt;... };\n    //call the function pointer at the specified index\n    return arr[index](std::forward&lt;T&gt;(p), func);\n}\n\n//tag dispatcher\ntemplate&lt;class Ret, class T, class Func&gt;\nauto apply(T&amp;&amp; p, int index, Func func) -&gt; Ret\n{\n    return apply&lt;Ret&gt;(std::forward&lt;T&gt;(p), index, func, \n                      gen_seq&lt;std::tuple_size&lt;typename std::decay&lt;T&gt;::type&gt;::value&gt;{});\n}\n</code></pre>\n\n<p>We then call <code>apply</code> and pass the return type as a template argument (you could deduce this using <code>decltype</code> or C++14):</p>\n\n<pre><code>auto t = std::make_tuple(1,1.0,1.0f);\nstd::cout &lt;&lt; apply&lt;int&gt;(t, 0, fun2{}) &lt;&lt; std::endl;\nstd::cout &lt;&lt; apply&lt;int&gt;(t, 1, fun2{}) &lt;&lt; std::endl;\nstd::cout &lt;&lt; apply&lt;int&gt;(t, 2, fun2{}) &lt;&lt; std::endl;\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/b976cb48e666232c\" rel=\"nofollow noreferrer\"><kbd>Live Demo</kbd></a></p>\n\n<p>I'm not sure if this will completely fulfil your requirements due to the use of function pointers, but compilers can optimize this kind of thing pretty aggressively. The searching will be <code>O(1)</code> as the pointer array is just built once then indexed directly, which is pretty good. I'd try this out, measure, and see if it'll work for you.</p>\n"}], "owner": {"reputation": 738, "user_id": 1879547, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/d08c8785b44c2e795ebed85a2afc7cc4?s=128&d=identicon&r=PG", "display_name": "0x2207", "link": "https://stackoverflow.com/users/1879547/0x2207"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1709, "favorite_count": 4, "answer_count": 2, "score": 9, "last_activity_date": 1440775863, "creation_date": 1440619905, "last_edit_date": 1440775863, "question_id": 32235855, "link": "https://stackoverflow.com/questions/32235855/switch-statement-variadic-template-expansion", "title": "Switch statement variadic template expansion", "body": "<p>Let me please consider the following synthetic example:</p>\n\n<pre><code>inline int fun2(int x) {\n    return x;\n}\ninline int fun2(double x) {\n    return 0;   \n}\ninline int fun2(float x) {\n    return -1;   \n}\n\nint fun(const std::tuple&lt;int,double,float&gt;&amp; t, std::size_t i) {\n    switch(i) {\n        case 0: return fun2(std::get&lt;0&gt;(t));\n        case 1: return fun2(std::get&lt;1&gt;(t));\n        case 2: return fun2(std::get&lt;2&gt;(t));\n    }    \n}\n</code></pre>\n\n<p>The question is how should I expand this to the general case</p>\n\n<pre><code>template&lt;class... Args&gt; int fun(const std::tuple&lt;Args...&gt;&amp; t, std::size_t i) {\n// ?\n}\n</code></pre>\n\n<p>Guaranteeing that</p>\n\n<ol>\n<li>fun2 can be inlined into fun</li>\n<li>search complexity not worse than O(log(i)) (for large i).</li>\n</ol>\n\n<p>It is known that optimizer usually uses lookup jump table or compile-time binary search tree when large enough switch expanded. So, I would like to keep this property affecting performance for large number of items.</p>\n\n<p><strong>Update #3:</strong> I remeasured performance with uniform random index value:</p>\n\n<pre><code>                      1       10      20      100\n@TartanLlama\n    gcc               ~0      42.9235 44.7900 46.5233\n    clang             10.2046 38.7656 40.4316 41.7557\n@chris-beck\n    gcc               ~0      37.564  51.3653 81.552\n    clang             ~0      38.0361 51.6968 83.7704\nnaive tail recursion\n    gcc                3.0798 40.6061 48.6744 118.171\n    clang             11.5907 40.6197 42.8172 137.066\nmanual switch statement\n    gcc                       41.7236 \n    clang                      7.3768 \n</code></pre>\n\n<p><strong>Update #2:</strong> It seems that clang is able to inline functions in @TartanLlama solution whereas gcc always generates function call.</p>\n"}, {"tags": ["c++", "linker", "autotools"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1440620258, "post_id": 32235837, "comment_id": 52354140, "body": "Library names are arbitrary. The documentation tells you what to use."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1440620521, "post_id": 32235837, "comment_id": 52354253, "body": "Your question is confusing. It seems like you really want to know where the <b>programmer</b> gets library names. The linker gets them from the <code>-l</code> options, which you seem to know."}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440620809, "post_id": 32235970, "comment_id": 52354427, "body": "There are tools to resolve necessary linker flags on most linux distros. The li linker itself isn&#39;t <i>dumb</i>, just provide it with the right information!"}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 1, "last_activity_date": 1440620339, "creation_date": 1440620339, "answer_id": 32235970, "question_id": 32235837, "link": "https://stackoverflow.com/questions/32235837/where-does-the-linker-get-library-names/32235970#32235970", "title": "Where does the linker get library names?", "body": "<p>The 'regular' linker is dumbest program I know of :) When it comes for libraries, it follows a very simple set of rules. First, for every -l rule it adds lib in front and .a in the end to form a static library name. It also forms a dynamic library name by adding .so instead of .a. For every -I rule it adds specified path to it's library search paths.</p>\n\n<p>So when it sees a -l rule, and looks into all library paths which were set by -L rules (in the order those appeared in the command line) and sees if it can find dynamic or static library at this location (if it can see both, it picks one depending on -B rule). </p>\n\n<p>This was a generic introduction. Now, to your particular question, in order to check which library you should include, you should read documentation. I always tells you which -l rules you'd need. </p>\n"}], "owner": {"reputation": 13, "user_id": 5270189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d19ee82531ce6383a24364a79f1a3e60?s=128&d=identicon&r=PG&f=1", "display_name": "rich p", "link": "https://stackoverflow.com/users/5270189/rich-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 32235970, "answer_count": 1, "score": 1, "last_activity_date": 1440621382, "creation_date": 1440619860, "question_id": 32235837, "link": "https://stackoverflow.com/questions/32235837/where-does-the-linker-get-library-names", "title": "Where does the linker get library names?", "body": "<p>I'm kind of new to developing, and I am wondering how the linker is getting the library names?\nfor example, in the linker additions lines, when i wanted to add support for libxml2, the command was -lxml2. yet when i wanted to add the lib for xmlsec, it was -lxmlsec1. when i wanted to add openssl, i needed both a -lcrypto and a -lssl.\ncan someone explain to me where these library names come from? it doesn't seem very intuitive. if i want to include a library, how am i supposed to find what -l command to use?\nthis is on a ubuntu system developing a C++ program.</p>\n"}, {"tags": ["c++", "templates", "namespaces", "argument-dependent-lookup"], "answers": [{"comments": [{"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1440704257, "post_id": 32244395, "comment_id": 52395992, "body": "....huh. Yeah, that appears to work (though the template specialization must be declared <code>inline</code> in the non-trivial case involving multiple files). Any idea why the overload version doesn&#39;t work but the specialization-version does?"}], "tags": [], "owner": {"reputation": 3239, "user_id": 5271927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aTJYf.jpg?s=128&g=1", "display_name": "KIIV", "link": "https://stackoverflow.com/users/5271927/kiiv"}, "is_accepted": false, "score": 1, "last_activity_date": 1440664379, "creation_date": 1440664379, "answer_id": 32244395, "question_id": 32235765, "link": "https://stackoverflow.com/questions/32235765/namespace-causes-sub-optimal-template-overload-resolution/32244395#32244395", "title": "Namespace causes sub-optimal template overload resolution", "body": "<p>With template specialization I can get it work:</p>\n\n<pre><code>namespace DoStuffUtilNamespace\n{\n  template&lt;typename UNKNOWN&gt;\n  void doStuff(UNKNOWN&amp; foo)\n  {\n    static_assert(sizeof(UNKNOWN) == -1, \"CANNOT USE DEFAULT INSTANTIATION!\");\n  }\n}\n\nclass UtilForDoingStuff\n{\n  public:\n    template &lt;typename UNKNOWN&gt;\n      void doStuffWithObjectRef(UNKNOWN&amp; ref)\n      {\n        DoStuffUtilNamespace::doStuff(ref);\n      }\n};\n\nclass MyClassThatCanDoStuff { };\n\n\nnamespace DoStuffUtilNamespace\n{\n  using ::MyClassThatCanDoStuff;\n  template &lt;&gt; void doStuff&lt;MyClassThatCanDoStuff&gt;(MyClassThatCanDoStuff&amp; foo) { /* No assertion! */ }\n}\n\n\nint main()\n{\n  MyClassThatCanDoStuff foo;\n  DoStuffUtilNamespace::MyClassThatCanDoStuff scoped_foo; \n  UtilForDoingStuff util;\n\n  DoStuffUtilNamespace::doStuff(foo);         // Compiles\n  DoStuffUtilNamespace::doStuff(scoped_foo);  // Compiles\n  util.doStuffWithObjectRef(foo);             // Compiles\n  util.doStuffWithObjectRef(scoped_foo);      // Compiles\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 0, "last_activity_date": 1442360541, "creation_date": 1442360541, "answer_id": 32597412, "question_id": 32235765, "link": "https://stackoverflow.com/questions/32235765/namespace-causes-sub-optimal-template-overload-resolution/32597412#32597412", "title": "Namespace causes sub-optimal template overload resolution", "body": "<blockquote>\n  <p>Declarations from namespaces associated with the types of the function arguments both from the instantiation context and from the definition context.</p>\n</blockquote>\n\n<p>Example with the following code which prints <code>B::foo</code> <a href=\"http://coliru.stacked-crooked.com/a/e7a45ccf89816a66\" rel=\"nofollow\">Demo</a></p>\n\n<pre><code>namespace A\n{\n    template &lt;typename T&gt;\n    void foo(const T&amp;) {std::cout &lt;&lt; \"A::foo\" &lt;&lt; std::endl;}\n\n    template &lt;typename T&gt;\n    void bar(const T&amp; t) {\n        foo(t); // thank to ADL, it will  also look at B::foo for B::S.\n    }\n}\n\nnamespace B\n{\n    struct S {};\n\n    void foo(const S&amp;) {std::cout &lt;&lt; \"B::foo\" &lt;&lt; std::endl;}\n}\n\nint main()\n{\n    B::S s;\n    A::bar(s);\n}\n</code></pre>\n\n<p>So when calling <code>?::foo(const B::S&amp;)</code>, the second bullet point adds <code>B::foo</code> to the list of overloads.</p>\n\n<blockquote>\n  <p>why template-specialization works in this case</p>\n</blockquote>\n\n<p>There is only one function:</p>\n\n<pre><code>template&lt;&gt;\nvoid DoStuffUtilNamespace::doStuff&lt;MyClassThatCanDoStuff&gt;(MyClassThatCanDoStuff&amp; foo);\n</code></pre>\n\n<p>even if it is defined later.\nNote that the fact that there is a specialization should be known in the translation unit, else the program is ill formed (doesn't respect ODR).</p>\n\n<blockquote>\n  <p>while overloading doesn't.</p>\n</blockquote>\n\n<p>You think:</p>\n\n<blockquote>\n  <p>So I think that explains why <code>util.doStuffWithObjectRef(foo);</code> triggers the static assertion: <code>doStuff(MyClassThatCanDoStuff&amp;)</code> hasn't been declared at the point of definition of <code>UtilForDoingStuff::doStuffWithObjectRef&lt;UNKNOWN&gt;(UNKNOWN&amp;)</code>. And indeed moving the class <code>UtilForDoingStuff</code> definition after the <code>doStuff</code> overload has been defined seems to fix the issue.</p>\n</blockquote>\n\n<p>Exactly.</p>\n"}, {"tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 2, "last_activity_date": 1442397340, "last_edit_date": 1442397340, "creation_date": 1442393988, "answer_id": 32604022, "question_id": 32235765, "link": "https://stackoverflow.com/questions/32235765/namespace-causes-sub-optimal-template-overload-resolution/32604022#32604022", "title": "Namespace causes sub-optimal template overload resolution", "body": "<blockquote>\n  <p>With the namespace, <code>doStuff</code> is of course a dependent name.</p>\n</blockquote>\n\n<p>You are starting from the wrong premise.  There is no ADL for a qualified call like <code>DoStuffUtilNamespace::doStuff(ref)</code>. [basic.lookup.argdep]/p1, emphasis mine:</p>\n\n<blockquote>\n  <p><strong>When the <em>postfix-expression</em> in a function call (5.2.2) is an\n  <em>unqualified-id</em></strong>, other namespaces not considered during the usual\n  unqualified lookup (3.4.1) may be searched, and in those namespaces,\n  namespace-scope friend function or function template declarations\n  (11.3) not otherwise visible may be found.</p>\n</blockquote>\n\n<p><code>DoStuffUtilNamespace::doStuff</code> is a <em>qualified-id</em>, not an <em>unqualified-id</em>. ADL doesn't apply.</p>\n\n<p>For this reason, <code>DoStuffUtilNamespace::doStuff</code> is also not a dependent name. [temp.dep]/p1:</p>\n\n<blockquote>\n  <p>In an expression of the form:</p>\n  \n  <blockquote>\n    <p><em>postfix-expression ( expression-list<sub>opt</sub>)</em></p>\n  </blockquote>\n  \n  <p>where the <em>postfix-expression</em> is an <em>unqualified-id</em>, the\n  <em>unqualified-id</em> denotes a <em>dependent name</em> if [...]. If an operand of an operator is a type-dependent expression, the operator also denotes\n  a dependent name. Such names are unbound and are looked up at the\n  point of the template instantiation (14.6.4.1) in both the context of\n  the template definition and the context of the point of instantiation</p>\n</blockquote>\n\n<p>(The italicization of <em>dependent name</em> indicate that this paragraph is defining the term.)</p>\n\n<p>Instead, per [temp.nondep]/p1:</p>\n\n<blockquote>\n  <p>Non-dependent names used in a template definition are found using the\n  usual name lookup and bound at the point they are used.</p>\n</blockquote>\n\n<p>which doesn't find your later overload declaration.</p>\n\n<hr>\n\n<p>Specialization works because it's still the same function template declaration that's used; you just supplied a different implementation than the default one.</p>\n\n<hr>\n\n<blockquote>\n  <p>But what exactly does the standard mean by \"namespaces associated with\n  the types of the function arguments\"? Shouldn't the <code>using ::MyClassThatCanDoStuff</code> declaration, together\n  with the explicit scoping of the scoped_foo instance type within the\n  namespace, trigger argument-dependent lookup</p>\n</blockquote>\n\n<p>No. <em>using-declaration</em>s do not affect ADL. [basic.lookup.argdep]/p2, emphasis mine:</p>\n\n<blockquote>\n  <p>For each argument type <code>T</code> in the function call, there is a set of\n  zero or more associated namespaces and a set of zero or more\n  associated classes to be considered. The sets of namespaces and\n  classes is determined entirely by the types of the function arguments\n  (and the namespace of any template template argument).\n  <strong>Typedef names and <em>using-declaration</em>s used to specify the types do not contribute to this set.</strong> The sets of namespaces and classes are\n  determined in the following way:</p>\n  \n  <ul>\n  <li><p>If T is a fundamental type, [...]</p></li>\n  <li><p>If T is a class type (including unions), its associated classes are: the class itself; the class of which it is a member, if any; and its\n  direct and indirect base classes. Its associated namespaces are the\n  innermost enclosing namespaces of its associated classes. Furthermore,\n  if T is a class template specialization, its associated namespaces and\n  classes also include: the namespaces and classes associated with the\n  types of the template arguments provided for template type parameters\n  (excluding template template parameters); the namespaces of which any\n  template template arguments are members; and the classes of which any\n  member templates used as template template arguments are members. [\n  <em>Note</em>: Non-type template arguments do not contribute to the set of associated namespaces. \u2014<em>end note</em> ]</p></li>\n  <li><p>[...]</p></li>\n  </ul>\n</blockquote>\n"}], "owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 32604022, "answer_count": 3, "score": 2, "last_activity_date": 1442397340, "creation_date": 1440619644, "last_edit_date": 1592644375, "question_id": 32235765, "link": "https://stackoverflow.com/questions/32235765/namespace-causes-sub-optimal-template-overload-resolution", "title": "Namespace causes sub-optimal template overload resolution", "body": "<p>This is very similar to <a href=\"https://stackoverflow.com/q/18493826/1858225\">this question</a>, but I'm not sure the answer there is entirely applicable to the minimal code I've put together that demonstrates the issue. (My code does <em>not</em> use trailing-return types, and there are some other differences as well.) Additionally, the issue of whether MSVC's behavior is legal doesn't seem to be addressed.</p>\n<p>In short, I'm seeing the compiler select a generic function template instantiation rather than a more-specific overload when the function template is inside a namespace.</p>\n<p>Consider the following set of namespace and class definitions:</p>\n<pre><code>namespace DoStuffUtilNamespace\n{\n  template&lt;typename UNKNOWN&gt;\n  void doStuff(UNKNOWN&amp; foo)\n  {\n    static_assert(sizeof(UNKNOWN) == -1, &quot;CANNOT USE DEFAULT INSTANTIATION!&quot;);\n  }\n}\n\nclass UtilForDoingStuff\n{\n  public:\n    template &lt;typename UNKNOWN&gt;\n      void doStuffWithObjectRef(UNKNOWN&amp; ref)\n      {\n        DoStuffUtilNamespace::doStuff(ref);\n      }\n};\n\nclass MyClassThatCanDoStuff { };\n\nnamespace DoStuffUtilNamespace\n{\n  using ::MyClassThatCanDoStuff;      // No effect.\n  \n  void doStuff(MyClassThatCanDoStuff&amp; foo) { /* No assertion! */ }\n}\n</code></pre>\n<p>... and the following use-cases:</p>\n<pre><code>int main()\n{\n  MyClassThatCanDoStuff foo;\n  DoStuffUtilNamespace::MyClassThatCanDoStuff scoped_foo;\n  UtilForDoingStuff util;\n  \n  DoStuffUtilNamespace::doStuff(foo);         // Compiles\n  DoStuffUtilNamespace::doStuff(scoped_foo);  // Compiles\n  util.doStuffWithObjectRef(foo);             // Triggers static assert\n  util.doStuffWithObjectRef(scoped_foo);      // Triggers static assert\n}\n</code></pre>\n<p>If the entire <code>DoStuffUtilNamespace</code> is eliminated and all its members are moved to global scope, this compiles fine with G++ and Clang++.</p>\n<p><em>With</em> the namespace, <code>doStuff</code> is of course a dependent name. According to the <a href=\"https://stackoverflow.com/a/18516246/1858225\">top-voted answer on the similar question</a>, the standard says:</p>\n<blockquote>\n<p>In resolving dependent names, names from the following sources are considered:</p>\n<ul>\n<li><p>Declarations that are visible at the point of definition of the template.</p>\n</li>\n<li><p>Declarations from namespaces associated with the types of the function arguments both from the instantiation context and from the definition context.</p>\n</li>\n</ul>\n</blockquote>\n<p>This seems a little odd to me; I don't understand why the first bullet point would specify that the declarations must be visible at the point of <em>definition</em> of the template rather than at the point of <em>instantiation</em>, since the second bullet point explicitly specifies that <em>some</em> declarations visible only at the point of instantiation <em>are</em> allowed. (If someone would like to offer a rationale, I'd appreciate it, but that's not my question because it's my understanding that questions of the form &quot;why did the standards committee decide X&quot; are off topic.)</p>\n<p>So I <em>think</em> that explains why <code>util.doStuffWithObjectRef(foo);</code> triggers the static assertion: <code>doStuff(MyClassThatCanDoStuff&amp;)</code> hasn't been declared at the point of definition of <code>UtilForDoingStuff::doStuffWithObjectRef&lt;UNKNOWN&gt;(UNKNOWN&amp;)</code>. And indeed moving the <code>class UtilForDoingStuff</code> definition <em>after</em> the <code>doStuff</code> overload has been defined seems to fix the issue.</p>\n<p>But what exactly does the standard mean by &quot;namespaces associated with the types of the function arguments&quot;? Shouldn't the <code>using ::MyClassThatCanDoStuff</code> declaration, together with the explicit scoping of the <code>scoped_foo</code> instance type within the namespace, trigger argument-dependent lookup, and shouldn't this look-up find the non-asserting definition of <code>doStuff()</code>?</p>\n<p>Also, the entire code is compiled without error using <code>clang++ -ftemplate-delayed-parsing</code>, which emulates MSVC's template-parsing behavior. This seems preferable, at least in this particular case, because the ability to add new declarations to a namespace at any time is one of the primary appeals of namespaces. But, as noted above, it doesn't quite seem to follow the letter of the law, according to the standard. Is it permissible, or is it an instance of non-conformance?</p>\n<p><strong>EDIT::</strong> As pointed out by KIIV, there is a workaround; the code compiles if template specialization is used instead of overloading. I would still like to know the answers to my questions about the standard.</p>\n"}, {"tags": ["c++", "c++builder", "firemonkey", "bulletphysics"], "comments": [{"owner": {"reputation": 1426, "user_id": 673826, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f50a845aca7585dfa8bff6358258eabc?s=128&d=identicon&r=PG", "display_name": "mlt", "link": "https://stackoverflow.com/users/673826/mlt"}, "edited": false, "score": 0, "creation_date": 1440620320, "post_id": 32235742, "comment_id": 52354162, "body": "You&#39;d better remove &quot;best way&quot; as you solicit opinionated answers. Back to the topic, you&#39;d have to patch libraries and consider submitting those patches. You might get by supplying defines for missing types using available ones as extra CXXFLAGS."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440620362, "post_id": 32235742, "comment_id": 52354179, "body": "C++ builder is unfortunately hopelessly beyond current c++ standards."}, {"owner": {"reputation": 1426, "user_id": 673826, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f50a845aca7585dfa8bff6358258eabc?s=128&d=identicon&r=PG", "display_name": "mlt", "link": "https://stackoverflow.com/users/673826/mlt"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440620563, "post_id": 32235742, "comment_id": 52354282, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I thought so as well, but apparently it is <a href=\"http://docwiki.embarcadero.com/RADStudio/XE8/en/C%2B%2B11_Language_Features_Compliance_Status\" rel=\"nofollow noreferrer\">not quite the case</a>. Searching suggests that <a href=\"http://docwiki.embarcadero.com/RADStudio/XE8/en/Clang-based_C%2B%2B_Compilers\" rel=\"nofollow noreferrer\">64bit version is based on clang</a>."}, {"owner": {"reputation": 583, "user_id": 1435899, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/62d4beafa99dc707da2a400597901681?s=128&d=identicon&r=PG", "display_name": "Walter", "link": "https://stackoverflow.com/users/1435899/walter"}, "edited": false, "score": 0, "creation_date": 1440620891, "post_id": 32235742, "comment_id": 52354483, "body": "Yeah SO warned me based on my title that this question could be deleted, but honestly, I&#39;d take anything I could get right now. I did try updating the defines so that it didnt check for the compiler, it just used whatever was being defined when it detecting ming or gcc. But I was hoping there would be a cleaner way to go about it."}, {"owner": {"reputation": 2631, "user_id": 95221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3eae942be94c30dfc0f445fc8f13307?s=128&d=identicon&r=PG", "display_name": "David Dean", "link": "https://stackoverflow.com/users/95221/david-dean"}, "edited": false, "score": 0, "creation_date": 1440775479, "post_id": 32235742, "comment_id": 52428031, "body": "You don&#39;t mention what version of C++Builder you are using. Honestly, the newer, clang based compiler is <i>much</i> better. It support the C++ standard better, and is much more likely to be supported by third party libraries as clang is also Apple&#39;s default compiler."}, {"owner": {"reputation": 583, "user_id": 1435899, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/62d4beafa99dc707da2a400597901681?s=128&d=identicon&r=PG", "display_name": "Walter", "link": "https://stackoverflow.com/users/1435899/walter"}, "edited": false, "score": 0, "creation_date": 1440783964, "post_id": 32235742, "comment_id": 52432516, "body": "I&#39;m on an AppMethod subscription so its XE 8 at the moment. The good news is that Bullet builds for android just fine. I&#39;ve given up trying to build for win32 since I think that still uses their old borland compiler and its a disaster. Win64 gets pretty far with Bullet but then I get a bizarre error about &#39;_infinite&#39; being an unreferenced external. So thats where I&#39;m stuck at the moment."}], "owner": {"reputation": 583, "user_id": 1435899, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/62d4beafa99dc707da2a400597901681?s=128&d=identicon&r=PG", "display_name": "Walter", "link": "https://stackoverflow.com/users/1435899/walter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1473949582, "creation_date": 1440619533, "last_edit_date": 1473949582, "question_id": 32235742, "link": "https://stackoverflow.com/questions/32235742/dealing-with-c-libraries-not-catering-for-your-compiler-or-ide", "title": "Dealing with c++ libraries not catering for your compiler or IDE", "body": "<p>I'm trying to use Bullet physics (along with either ODE or Newton depending on which one I can get working) inside my multi device firemonkey c++ application. The problem that I keep running into, however, is that these libraries don't seem to cater for C++ builder. They each register their own custom types through conditional defines. For example, they'll use __int64 when detecting MSVC or long long with ming or gcc to type their own big ints. These types are not set within C++ builder because c++ builder doesn't set any environment defines that the libraries check for so the build fails.</p>\n\n<p>I'm no pro with c++, so I'm assuming I'm doing something wrong here. What is the best way to handle this kind of situation?</p>\n\n<p>As a side note, I'm including the source files in the project so that it will build the physics library with any of the platforms I decide to build with so I'm not using anything prebuilt.</p>\n"}, {"tags": ["android", "c++", "opencv", "android-ndk"], "owner": {"reputation": 51, "user_id": 5014708, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-ytiZ1uR21Q8/AAAAAAAAAAI/AAAAAAAAABU/HHA76Tg_uXs/photo.jpg?sz=128", "display_name": "Simran Bakshi", "link": "https://stackoverflow.com/users/5014708/simran-bakshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 197, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1441485383, "creation_date": 1440619257, "last_edit_date": 1440619608, "question_id": 32235659, "link": "https://stackoverflow.com/questions/32235659/ndk-build-for-c-file-giving-error", "title": "NDK build for c++ file giving error", "body": "<p>I'm using openCV in my c++ file for the android ndk.My Android.mk file is:</p>\n\n<pre><code>    LOCAL_PATH := $(call my-dir)\n    OPENCV_CAMERA_MODULES:=off\n    OPENCV_INSTALL_MODULES:=on\n    OPENCV_LIB_TYPE:=STATIC\n    include $(CLEAR_VARS)\n\n    include C:/Users/Simran/Desktop/OpenCV-android-sdk/sdk/native/jni/OpenCV.mk\n    LOCAL_MODULE    := NDKCamera\n    LOCAL_SRC_FILES := sfmlib.cpp\n    LOCAL_LDLIBS    += -lm -llog -landroid\n    LOCAL_STATIC_LIBRARIES += android_native_app_glue\n    LOCAL_C_INCLUDES += C:/Users/Simran/Desktop/BTP/NDKCamera/app/src/main/jni\n\n    LOCAL_C_INCLUDES += C:/Users/Simran/Desktop/OpenCV-android-sdk/sdk/native/jni/include\n    include $(BUILD_SHARED_LIBRARY)\n    $(call import-module,android/native_app_glue)\n    LOCAL_PATH := $(call my-dir)\n    include $(CLEAR_VARS)\nTo build it I use: \n\n    C:/Users/Simran/Desktop/BTP/NDKCamera APP_BUILD_SCRIPT=C:/Users/Simran/Desktop/BTP/NDKCamera/app/src/main/jni/Android.mk NDK_OUT=C:/Users/Simran/Desktop/BTP/NDKCamera/app/build/intermediates/ndk/debug/obj NDK_LIBS_OUT=C:/Users/Simran/Desktop/BTP/NDKCamera/app/build/intermediates/ndk/debug/lib APP_STL=gnustl_static APP_ABI=armeabi-v7a\n</code></pre>\n\n<p>I get the following error when I try to build it.</p>\n\n<pre><code>    C:\\Users\\Simran\\Downloads\\android-ndk-r10e&gt;ndk-build.cmd NDK_PROJECT_PATH=[armeabi-v7a] Compile++ thumb: NDKCamera &lt;= sfmlib.cpp     C:/Users/Simran/Desktop/BTP/NDKCamera/app/src/main/jni/sfmlib.cpp:16:18: error:\nno matching function for call to 'cv::ORB::ORB(int)'ORB detector(1000);\nC:/Users/Simran/Desktop/BTP/NDKCamera/app/src/main/jni/sfmlib.cpp:285:33: error:\n no matching function for call to 'cv::FastFeatureDetector::FastFeatureDetector(\nint, bool)'\n  FastFeatureDetector ffd(8, true);\n</code></pre>\n\n<p>I have no idea about C++, what am I doing wrong?</p>\n"}, {"tags": ["c++", "qt", "mingw"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1440619079, "post_id": 32235546, "comment_id": 52353524, "body": "Did you include <code>&lt;algorithm&gt;</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4386938"}, "edited": false, "score": 0, "creation_date": 1440619165, "post_id": 32235546, "comment_id": 52353571, "body": "<a href=\"http://stackoverflow.com/questions/32170248/for-each-not-working-as-i-expect/32170272#32170272\" title=\"for each not working as i expect\">stackoverflow.com/questions/32170248/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3447, "user_id": 4297146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Zl9y3.jpg?s=128&g=1", "display_name": "mohabouje", "link": "https://stackoverflow.com/users/4297146/mohabouje"}, "is_accepted": true, "score": 1, "last_activity_date": 1440619516, "creation_date": 1440619516, "answer_id": 32235737, "question_id": 32235546, "link": "https://stackoverflow.com/questions/32235546/why-doesnt-stdfor-each-compile-with-mingw/32235737#32235737", "title": "Why doesn&#39;t std::for_each compile with minGW?", "body": "<p>I found the solution. You must use C ++ 11.</p>\n\n<p>Fixed by using C++ 11. Include: CONFIG += c++11 on .pro file.</p>\n"}], "owner": {"reputation": 3447, "user_id": 4297146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Zl9y3.jpg?s=128&g=1", "display_name": "mohabouje", "link": "https://stackoverflow.com/users/4297146/mohabouje"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 32235737, "answer_count": 1, "score": -2, "last_activity_date": 1440623295, "creation_date": 1440618832, "last_edit_date": 1440623295, "question_id": 32235546, "link": "https://stackoverflow.com/questions/32235546/why-doesnt-stdfor-each-compile-with-mingw", "title": "Why doesn&#39;t std::for_each compile with minGW?", "body": "<p>I'm trying to compile this line on Qt with MinGW compiler, using a <code>QVector&lt;double&gt;</code> and <code>std::for_each</code> function.   </p>\n\n<pre><code>std::for_each(data.begin(), data.end(), [max](double&amp; n){ n/=max;});\n</code></pre>\n\n<p>I get this error:</p>\n\n<blockquote>\n  <p>error: no matching function for call to 'for_each(QVector::iterator,   QVector::iterator, normalize(QVector&amp;)::)'\n                         [max](double&amp; n){ n/=max;});\n                                                   ^</p>\n</blockquote>\n\n<p><strong>It compiles correctly with MVSC2013 32 bits.</strong></p>\n"}, {"tags": ["c++", "performance", "gcc", "mingw", "tdm-mingw"], "comments": [{"owner": {"reputation": 1118, "user_id": 2450694, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a101093933ec102d4d27f5018774df48?s=128&d=identicon&r=PG&f=1", "display_name": "Creris", "link": "https://stackoverflow.com/users/2450694/creris"}, "edited": false, "score": 0, "creation_date": 1440619506, "post_id": 32235494, "comment_id": 52353766, "body": "maybe you forgot specify optimization level?"}, {"owner": {"reputation": 1251, "user_id": 2214913, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3b75c8cbd4fde9e754e3c70b39484726?s=128&d=identicon&r=PG", "display_name": "user2214913", "link": "https://stackoverflow.com/users/2214913/user2214913"}, "reply_to_user": {"reputation": 1118, "user_id": 2450694, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a101093933ec102d4d27f5018774df48?s=128&d=identicon&r=PG&f=1", "display_name": "Creris", "link": "https://stackoverflow.com/users/2450694/creris"}, "edited": false, "score": 0, "creation_date": 1440621727, "post_id": 32235494, "comment_id": 52354939, "body": "no its exactly the same on both (-O2)"}], "answers": [{"comments": [{"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1441885886, "post_id": 32498178, "comment_id": 52861582, "body": "GCC 5 does not use a different &quot;engine&quot; from 4.7"}], "tags": [], "owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "is_accepted": false, "score": 0, "last_activity_date": 1441878547, "last_edit_date": 1441878547, "creation_date": 1441877660, "answer_id": 32498178, "question_id": 32235494, "link": "https://stackoverflow.com/questions/32235494/tdm-gcc-5-1-slower-than-4-7/32498178#32498178", "title": "tdm gcc 5.1 slower than 4.7", "body": "<p><strong>Different C++ compiler version uses different C++ engine</strong></p>\n\n<ul>\n<li>the code may be the same</li>\n<li>but the engine not</li>\n</ul>\n\n<p><strong>C++ engine</strong></p>\n\n<ul>\n<li><p>is responsible for many things like:</p>\n\n<ol>\n<li>memory management (stack,heap,local/global/dynamic/static/temp variables)</li>\n<li>template/class/struct/virtual management</li>\n<li>pointer management</li>\n<li>and much much more</li>\n</ol></li>\n<li><p>You can look at it as an <strong>OS</strong> (in some cases it is a OS mostly on MCU platforms)</p></li>\n<li>or as mediator between <strong>OS</strong> and your Application</li>\n<li>so newer version often handle more things at once affecting performance</li>\n<li>this can be seen on the file size (linker adds the engine into your executable)</li>\n<li><p>and performance is affected mostly with heavy use of:</p>\n\n<ol>\n<li>dynamic memory allocation/deallocation</li>\n<li>classes</li>\n<li>heap/stack trashing</li>\n</ol></li>\n</ul>\n\n<p><strong>Another possible cause can be version of linked libs</strong></p>\n\n<ul>\n<li>if you are using any kind of lib (like std ...)</li>\n<li>then newer compiler/linker may include newer version of them (according its include paths)</li>\n<li>which can also affect performance</li>\n<li>also if some libs can not recognize newer version of GCC defines</li>\n<li>they could switch to slower/safer code inside</li>\n</ul>\n\n<p><strong>how to set the behavior back to old style</strong></p>\n\n<ul>\n<li>use older compiler/linker if you need to</li>\n<li>in newer version you can use older engine <strong>(but that may cause problems latter)</strong></li>\n<li><p>look for files like:</p>\n\n<pre><code>crt0.o\ncrtfv.o\nlibc.a\n</code></pre></li>\n<li><p>or similar and replace them with the older versions</p></li>\n<li>but it is not recommended to do so ...</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1251, "user_id": 2214913, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3b75c8cbd4fde9e754e3c70b39484726?s=128&d=identicon&r=PG", "display_name": "user2214913", "link": "https://stackoverflow.com/users/2214913/user2214913"}, "is_accepted": true, "score": 0, "last_activity_date": 1443509468, "creation_date": 1443509468, "answer_id": 32837449, "question_id": 32235494, "link": "https://stackoverflow.com/questions/32235494/tdm-gcc-5-1-slower-than-4-7/32837449#32837449", "title": "tdm gcc 5.1 slower than 4.7", "body": "<p>I checked the assembly and it shows some changes in generated code,\nthough slight</p>\n\n<p>4.7 </p>\n\n<pre><code>__Z16mandelbrot_n_sseU8__vectorfS_i: \n    pushl        %ebp \n    movl        %esp, %ebp \n    andl        $-16, %esp \n    subl        $16, %esp \n    movl        8(%ebp), %ecx \n    movaps        %xmm0, (%esp) \n    testl        %ecx, %ecx \n    js        L12 \n    xorps        %xmm0, %xmm0 \n    xorl        %eax, %eax \n    movaps        %xmm0, %xmm2 \n    movaps        %xmm0, %xmm4 \n    jmp        L11 \n    .p2align 4,,7 \nL19: \n    mulps        %xmm4, %xmm2 \n    addl        $1, %eax \n    subps        %xmm5, %xmm6 \n    movaps        (%esp), %xmm4 \n    cmpl        %eax, %ecx \n    addps        %xmm6, %xmm4 \n    addps        %xmm2, %xmm2 \n    addps        %xmm1, %xmm2 \n    jl        L10 \nL11: \n    movaps        %xmm4, %xmm6 \n    movaps        %xmm2, %xmm5 \n    movaps        LC5, %xmm7 \n    mulps        %xmm4, %xmm6 \n    mulps        %xmm2, %xmm5 \n    movaps        %xmm6, %xmm3 \n    addps        %xmm5, %xmm3 \n    cmpltps        LC4, %xmm3 \n    andps        %xmm3, %xmm7 \n    movmskps        %xmm3, %edx \n    testl        %edx, %edx \n    addps        %xmm7, %xmm0 \n    jne        L19 \nL10: \n    cvtps2dq        %xmm0, %xmm0 \n    leave \n    ret \nL12: \n    xorps        %xmm0, %xmm0 \n    jmp        L10 \n    .globl        __Z16mandelbrot_n_sseDv4_fS_i \n</code></pre>\n\n<p>5.1 </p>\n\n<pre><code>__Z16mandelbrot_n_sseDv4_fS_i: \n    pushl        %ebp \n    movl        %esp, %ebp \n    andl        $-16, %esp \n    subl        $16, %esp \n    movl        8(%ebp), %ecx \n    movaps        %xmm0, (%esp) \n    testl        %ecx, %ecx \n    js        L11 \n    pxor        %xmm0, %xmm0 \n    xorl        %edx, %edx \n    movaps        %xmm0, %xmm5 \n    movaps        %xmm0, %xmm2 \n    jmp        L10 \n    .p2align 4,,10 \nL18: \n    mulps        %xmm2, %xmm5 \n    addl        $1, %edx \n    subps        %xmm6, %xmm4 \n    cmpl        %edx, %ecx \n    addps        %xmm5, %xmm5 \n    addps        (%esp), %xmm4 \n    addps        %xmm1, %xmm5 \n    jl        L9 \n    movaps        %xmm4, %xmm2 \nL10: \n    movaps        %xmm2, %xmm4 \n    movaps        %xmm5, %xmm6 \n    movaps        LC7, %xmm7 \n    mulps        %xmm2, %xmm4 \n    mulps        %xmm5, %xmm6 \n    movaps        %xmm4, %xmm3 \n    addps        %xmm6, %xmm3 \n    cmpltps        LC6, %xmm3 \n    andps        %xmm3, %xmm7 \n    movmskps        %xmm3, %eax \n    testl        %eax, %eax \n    addps        %xmm7, %xmm0 \n    jne        L18 \nL9: \n    cvtps2dq        %xmm0, %xmm0 \n    leave \n    ret \nL11: \n    pxor        %xmm0, %xmm0 \n    jmp        L9 \n    .section        .text.unlikely,\"x\" \nLCOLDE8: \n    .text \n</code></pre>\n\n<p>It seems that the 5.1 version is unlucky one and it cst 15% slowdown</p>\n"}], "owner": {"reputation": 1251, "user_id": 2214913, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3b75c8cbd4fde9e754e3c70b39484726?s=128&d=identicon&r=PG", "display_name": "user2214913", "link": "https://stackoverflow.com/users/2214913/user2214913"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 32837449, "answer_count": 2, "score": 2, "last_activity_date": 1443509468, "creation_date": 1440618637, "last_edit_date": 1440623305, "question_id": 32235494, "link": "https://stackoverflow.com/questions/32235494/tdm-gcc-5-1-slower-than-4-7", "title": "tdm gcc 5.1 slower than 4.7", "body": "<p>Im using tdm gcc compilers to compile my winapi projects, when i test some simple mandelbrot sse code 9maybe with other projests its like the same but i not tested everything), 5.1 generates larger executable 330kB against 270kB (though i not recompiled everything, only hot loop module and linked with already compiled (in 4.7) ones) and also noticalby slower code 23.5 ms /frame agianst 20 ms in 4.7 </p>\n\n<p>It is scary.. What can i do with it? (the rest of settings etc is the same i only rename the compiler folder from one to anither </p>\n\n<p>Im using c-like code but compile in c++ mode</p>\n\n<p>Does maybe someone know how to resolve it? (by resolve i mean\nmake 5.1 build working at least as fast as 4.7, also would prefer the executable be smaller)</p>\n\n<p>//edit</p>\n\n<p>ps i made yet quick test </p>\n\n<p>as i may compile loop module in 51 and link all in 47 </p>\n\n<p>compile loop 47 link 47: size 270k speed 20 ms </p>\n\n<p>compile loop 51 link 51: size 330k speed 23.5 ms </p>\n\n<p>compile loop 47 link 51: size 330k speed 20 ms </p>\n\n<p>compile loop 51 link 47: size 270k speed 23.5 ms </p>\n\n<p>it shows that speed drop comes by compile in 51 \nand size bloat comes from link 51 </p>\n"}, {"tags": ["c++", "winapi", "process", "crash"], "answers": [{"comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1440621576, "post_id": 32235566, "comment_id": 52354863, "body": "The child process may be any arbitrary program, so I don&#39;t think I can depend on its co-operation.  Checking the exit code might be good enough for my purposes, if there is no better approach."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1440624270, "post_id": 32235566, "comment_id": 52356155, "body": "I&#39;m going with the exit-code solution:   DWORD exitCode; if (GetExitCodeProcess(_childProcess, &amp;exitCode)) retDidChildProcessCrash = ((exitCode &amp; (0xC0000000)) != 0);"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1440699228, "post_id": 32235566, "comment_id": 52393382, "body": "@JeremyFriesner: That&#39;s a pretty random solution, and it will be unreliable. Unless you write a debugger, you won&#39;t be able to get notified about unhandled exceptions. If this is not something you want to do, don&#39;t offer an implementation, that cannot reliably report, how a process terminated."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1440707951, "post_id": 32235566, "comment_id": 52397927, "body": "@IInspectable I included a note in the method&#39;s documentation documenting its shortcomings under Windows.  The current implementation is good enough to serve my purpose, so I will use it until I am able to replace it with something better."}], "tags": [], "owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "is_accepted": true, "score": 3, "last_activity_date": 1440619287, "last_edit_date": 1495541674, "creation_date": 1440618948, "answer_id": 32235566, "question_id": 32235471, "link": "https://stackoverflow.com/questions/32235471/is-there-a-way-for-my-win32-program-to-tell-that-the-child-process-it-launched-h/32235566#32235566", "title": "Is there a way for my win32 program to tell that the child process it launched has crashed (and not just exited)?", "body": "<p>Arrange for the child to communicate with the parent to indicate completion. A shared event would be one way. If the process terminates and the parent has not received notification of success then it can conclude that the child failed. </p>\n\n<p>Another option might be to use the process exit code. Will be zero on success, assuming the child follows the usual conventions. And a crash will lead to an error code indicating the form of the crash, according to this question: <a href=\"https://stackoverflow.com/questions/30511823/predictable-exit-code-of-crashed-process-in-windows\">Predictable exit code of crashed process in Windows</a>?</p>\n\n<p>This is less reliable though. A process might terminate because it had <code>TerminateProcess</code> called on it, with a zero exit code. So if you control both process the first approach is safer. If you don't control the child process then the exit code might be your best shot. There's not much else you can get from a process handle of a terminated process. </p>\n"}], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 32235566, "answer_count": 1, "score": 1, "last_activity_date": 1440619287, "creation_date": 1440618559, "question_id": 32235471, "link": "https://stackoverflow.com/questions/32235471/is-there-a-way-for-my-win32-program-to-tell-that-the-child-process-it-launched-h", "title": "Is there a way for my win32 program to tell that the child process it launched has crashed (and not just exited)?", "body": "<p>I wrote a multi-platform C++ class that launches a user-specified child process, and lets the user communicate with the child process's stdin/stdout, wait for the child process to exit, and so on.</p>\n\n<p>In the Unix/POSIX implementation of this class, I've just added a feature that lets the caller find out whether the child process's exit was due to an unhandled signal (i.e. a crash):</p>\n\n<pre><code>bool ChildProcessDataIO :: WaitForChildProcessToExit(bool &amp; retDidChildProcessCrash)\n{\n  int status = 0;\n  int pid = waitpid(_childPID, &amp;status, 0);\n  if (pid == _childPID)\n  {\n     retDidChildProcessCrash = WIFSIGNALED(status);\n     return true;\n  }\n  else return false;  // error, couldn't get child process's status\n}\n</code></pre>\n\n<p>... and now I'd like to add similar functionality to the Windows implementation, which currently looks like this:</p>\n\n<pre><code>bool ChildProcessDataIO :: WaitForChildProcessToExit(bool &amp; retDidChildProcessCrash)\n{\n   bool ret = (WaitForSingleObject(_childProcess, INFINITE) == WAIT_OBJECT_0);\n   if (ret) \n   {\n      /* TODO:  somehow set (retDidChildProcessCrash) here */\n   }\n   return ret;\n}\n</code></pre>\n\n<p>... but I haven't figured out how to set (retDidChildProcessCrash) to the appropriate value using the Win32 API.</p>\n\n<p>Is there some way to do this, or do I just need to put a note in my documentation that this feature isn't currently implemented under Windows?</p>\n"}, {"tags": ["c++", "c++11", "enable-if"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1440618803, "post_id": 32235396, "comment_id": 52353370, "body": "You should actually provide a well-formed example."}, {"owner": {"reputation": 794, "user_id": 2784509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/862d736567a6ae2b115aa76b261add34?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Sergeyev", "link": "https://stackoverflow.com/users/2784509/alexander-sergeyev"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1440618954, "post_id": 32235396, "comment_id": 52353462, "body": "@Barry, okay -- where is a problem with the current one (what is needed to be corrected)?"}, {"owner": {"reputation": 69802, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1440619155, "post_id": 32235396, "comment_id": 52353567, "body": "@Barry <a href=\"http://coliru.stacked-crooked.com/a/05bdc97ab63fc99b\" rel=\"nofollow noreferrer\">Here</a>."}], "answers": [{"tags": [], "owner": {"reputation": 69802, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "is_accepted": true, "score": 4, "last_activity_date": 1440618465, "creation_date": 1440618465, "answer_id": 32235445, "question_id": 32235396, "link": "https://stackoverflow.com/questions/32235396/enable-if-for-functions-with-no-return-type-pulled-in-it/32235445#32235445", "title": "enable_if for functions with no return type pulled in it", "body": "<p>In the success-case:</p>\n\n<pre><code>template&lt;typename std::enable_if&lt;std::is_integral&lt;float&gt;::value, int&gt;::type = 0&gt;\nreturn_type cleaner_usage()\n{\n    return 2;\n}\n</code></pre>\n\n<p>would become equivalent to:</p>\n\n<pre><code>template&lt;int = 0&gt;\nreturn_type cleaner_usage()\n{\n    return 2;\n}\n</code></pre>\n\n<p>Which is perfectly legal, given that some value types are allowed to appear in template parameter context. I believe these are formally called <em>non-type template parameters</em>, as described by \u00a714.1/4:</p>\n\n<blockquote>\n  <p>A non-type template-parameter shall have one of the following (optionally cv-qualified) types:</p>\n  \n  <ul>\n  <li>integral or enumeration type,</li>\n  <li>pointer to object or pointer to function,</li>\n  <li>lvalue reference to object or lvalue reference to function,</li>\n  <li>pointer to member,</li>\n  <li><code>std::nullptr_t</code>.</li>\n  </ul>\n</blockquote>\n"}], "owner": {"reputation": 794, "user_id": 2784509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/862d736567a6ae2b115aa76b261add34?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Sergeyev", "link": "https://stackoverflow.com/users/2784509/alexander-sergeyev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 333, "favorite_count": 1, "accepted_answer_id": 32235445, "answer_count": 1, "score": 4, "last_activity_date": 1440619516, "creation_date": 1440618233, "last_edit_date": 1440619516, "question_id": 32235396, "link": "https://stackoverflow.com/questions/32235396/enable-if-for-functions-with-no-return-type-pulled-in-it", "title": "enable_if for functions with no return type pulled in it", "body": "<p>I've recently encountered an interesting version of <code>enable_if</code> usage to conditionally enable a function with slightly better readability because the function's return type is not part of <code>enable_if</code> (see <code>cleaner_usage</code>):</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\nusing maybe_integral = int /* = or float -- then won't compile */;\nusing return_type = int;\n\ntypename std::enable_if&lt;std::is_integral&lt;maybe_integral&gt;::value, return_type&gt;::type\ntraditional_usage()\n{\n    return 1;\n}\n\ntemplate&lt;typename std::enable_if&lt;std::is_integral&lt;maybe_integral&gt;::value, int&gt;::type = 0&gt;\nreturn_type cleaner_usage()\n{\n    return 2;\n}\n\nint main()\n{\n    return traditional_usage() + cleaner_usage();\n}\n</code></pre>\n\n<p>For failure-case the mechanism is clear (no <code>type</code> member). </p>\n\n<p><strong>But how exactly does it work in other cases? Because it looks like <code>int</code> <code>typedef</code> field substituted into template type parameter with unexpected assignment.</strong></p>\n"}, {"tags": ["c++", "optimization", "assembly", "arm", "simd"], "comments": [{"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 1, "creation_date": 1440618448, "post_id": 32235340, "comment_id": 52353199, "body": "Cast to a corresponding vector type and use a xor (eor in arm-speak) instruction on it?"}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1440618451, "post_id": 32235340, "comment_id": 52353200, "body": "&quot;Since ARM has no instruction for this...&quot; Er, what do you think <code>vand</code>, <code>vorr</code>, and <code>veor</code> are there for?"}, {"owner": {"reputation": 304, "user_id": 1979163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72bcbb02dd0688e781e99d249a6d9bea?s=128&d=identicon&r=PG", "display_name": "Yigit Demirag", "link": "https://stackoverflow.com/users/1979163/yigit-demirag"}, "reply_to_user": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1440618607, "post_id": 32235340, "comment_id": 52353264, "body": "@Notlikethat Those or for integer types not float (<a href=\"http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0491h/CIHJBEFE.html\" rel=\"nofollow noreferrer\">infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui049&zwnj;&#8203;1h/&hellip;</a> )"}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1440618779, "post_id": 32235340, "comment_id": 52353361, "body": "But you have vreinterpret* intrinsics."}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1440619070, "post_id": 32235340, "comment_id": 52353517, "body": "So, as Marc says, cast the vector to a different 32-bit element type that <i>is</i> accommodated by an intrinsic. Have a think about why types don&#39;t actually matter for a <i>bitwise</i> operation (and thus why the underlying bitwise NEON instructions don&#39;t even encode the element size, let alone the type, only the total vector width)"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1440619072, "post_id": 32235340, "comment_id": 52353519, "body": "Bitwise operations generally only make sense for integers, not floating point. What is the logical result of <code>1.0 ^ 2.0</code>?"}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 1, "creation_date": 1440619215, "post_id": 32235340, "comment_id": 52353596, "body": "<code>vreinterpretq_f32_u32(veorq_u32(vreinterpretq_u32_f32(a),vre&zwnj;&#8203;interpretq_u32_f32(b&zwnj;&#8203;)))</code>"}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1440619322, "post_id": 32235340, "comment_id": 52353665, "body": "@MarkRansom Bitwise ops on floating point make sense to manipulate the sign bit. abs, neg, neg(abs), copysign, etc can be expressed as bit ops with a constant."}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1440620277, "post_id": 32235340, "comment_id": 52354147, "body": "Come to think of it, it&#39;s exactly the same as the scalar case - in both C and C++ the bitwise operations are only defined for integral types (and in C at least, only fully-defined for <i>unsigned</i> types) so if you already have scalar code you must have some kind of casting of floats there to take inspiration from."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1440620514, "post_id": 32235340, "comment_id": 52354247, "body": "@MarcGlisse I guess I wasn&#39;t clear in my comment. What I meant is that it makes no sense to talk about bitwise operations on the floating point values themselves, but the bit representations are most clearly expressed as integers. Using integer instructions on a bit pattern, even if the bit pattern represents a floating point number, should just come naturally."}, {"owner": {"reputation": 304, "user_id": 1979163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72bcbb02dd0688e781e99d249a6d9bea?s=128&d=identicon&r=PG", "display_name": "Yigit Demirag", "link": "https://stackoverflow.com/users/1979163/yigit-demirag"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1440621842, "post_id": 32235340, "comment_id": 52354999, "body": "@MarkRansom Is it wise to represent raw memory content as int array in C++? Or is it guaranteed to work in compilers that follow strict-aliasing rules in optimization. The only legal way to inspect memory content in C++ might be  by reinterpreting it as an array of [signed/unsigned] char."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1440623205, "post_id": 32235340, "comment_id": 52355664, "body": "Generally speaking, if you want to be completely standard compliant expect to throw all the tricks out the door. <code>memcpy()</code> would be the only way to go. That said, when you get to the point of needing bitwise operations on floating-point, it&#39;s probably because you care about performance. And you probably care enough to use non-standard tricks like union type-punning, reinterpret casts, compiler intrinsics. (On x86, there are dedicated floating-point bitwse instructions exposed through intrinsics.)"}], "owner": {"reputation": 304, "user_id": 1979163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72bcbb02dd0688e781e99d249a6d9bea?s=128&d=identicon&r=PG", "display_name": "Yigit Demirag", "link": "https://stackoverflow.com/users/1979163/yigit-demirag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 147, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1440619260, "creation_date": 1440618055, "last_edit_date": 1440619260, "question_id": 32235340, "link": "https://stackoverflow.com/questions/32235340/how-to-perform-bitwise-operations-between-single-precision-floating-point-vector", "title": "How to perform bitwise operations between single-precision floating point vectors on ARMv7?", "body": "<p>I would like to write SIMD versions of bitwise logical operations on ARMv7 such that</p>\n\n<pre><code>static inline float32x4_t operator ^ (float32x4_t const &amp; a, float32x4_t const &amp; b) \n</code></pre>\n\n<p>. Since ARM has no instruction for this as Intel does, what is the correct way to implement this operation?</p>\n"}, {"tags": ["c++", "getline"], "comments": [{"owner": {"reputation": 1118, "user_id": 2450694, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a101093933ec102d4d27f5018774df48?s=128&d=identicon&r=PG&f=1", "display_name": "Creris", "link": "https://stackoverflow.com/users/2450694/creris"}, "edited": false, "score": 1, "creation_date": 1440618032, "post_id": 32235327, "comment_id": 52352978, "body": "make sure you actually open the correct file"}, {"owner": {"reputation": 35319, "user_id": 871910, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f073f5ca74b61813e689bbda8d12ba2b?s=128&d=identicon&r=PG", "display_name": "zmbq", "link": "https://stackoverflow.com/users/871910/zmbq"}, "edited": false, "score": 1, "creation_date": 1440618084, "post_id": 32235327, "comment_id": 52353010, "body": "And also make sure there&#39;s no blank line before the 1."}, {"owner": {"reputation": 1, "user_id": 5209410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d44e560e9d756218264fb6e2e907662?s=128&d=identicon&r=PG&f=1", "display_name": "nate otoole", "link": "https://stackoverflow.com/users/5209410/nate-otoole"}, "edited": false, "score": 0, "creation_date": 1440618115, "post_id": 32235327, "comment_id": 52353024, "body": "so there isnt anything wrong with what i wrote because im almost certain is the correct file"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1440618157, "post_id": 32235327, "comment_id": 52353049, "body": "Check that the file opened with <code>matchInput.is_open()</code> and check the return from <code>getline</code> to see if it failed."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1440619391, "post_id": 32235327, "comment_id": 52353694, "body": "@nateotoole <i>&quot;im almost certain is the correct file ...&quot;</i> <b>almost</b> isn&#39;t enough in conjunction with programming. It&#39;s an exact science!"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1440619786, "post_id": 32235327, "comment_id": 52353898, "body": "Using a full path name highly improves the odds of finding the correct file."}], "answers": [{"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 0, "last_activity_date": 1440620113, "last_edit_date": 1440620113, "creation_date": 1440618607, "answer_id": 32235487, "question_id": 32235327, "link": "https://stackoverflow.com/questions/32235327/getline-problems-in-c/32235487#32235487", "title": "getline problems in c++", "body": "<p>You aren't checking the valid state of <code>matchInput</code> at any point. You rather should write a code like this:</p>\n\n<pre><code>ifstream matchInput(\"SampleMatchFile.txt\");\nmatch match1;\nyouint numLines;\nstring firstLine;\n\nif(matchInput) {\n    if(!getline(matchInput, firstLine)) {\n        // indicate error extracting a line\n    }\n}\nelse {\n    // indicate error opening the file\n}\n</code></pre>\n\n<p>Opening files from relative paths depends on the working directory that your program is actually running from. Check your IDE's settings and compare with the path of your intended input file.</p>\n"}], "owner": {"reputation": 1, "user_id": 5209410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d44e560e9d756218264fb6e2e907662?s=128&d=identicon&r=PG&f=1", "display_name": "nate otoole", "link": "https://stackoverflow.com/users/5209410/nate-otoole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1440624273, "creation_date": 1440617999, "last_edit_date": 1440624273, "question_id": 32235327, "link": "https://stackoverflow.com/questions/32235327/getline-problems-in-c", "title": "getline problems in c++", "body": "<p>What is wrong with this code the text is very simple its just a simple text file like this</p>\n\n<pre><code>1\n2345\n5673\n</code></pre>\n\n<p>I'm just trying to get the first element of the text.</p>\n\n<p><strong><em>Here is my code snippet:</em></strong></p>\n\n<pre><code>ifstream matchInput(\"SampleMatchFile.txt\");\nmatch match1;\nint numLines;\nstring firstLine;\ngetline(matchInput, firstLine);`\n</code></pre>\n\n<p>firstLine doesnt have anything in it after getline is called. Any help is appreciated. </p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 743, "user_id": 3221328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70bcc220a6bf5aa19788c3c8061600f8?s=128&d=identicon&r=PG&f=1", "display_name": "Armaghast", "link": "https://stackoverflow.com/users/3221328/armaghast"}, "edited": false, "score": 1, "creation_date": 1440681561, "post_id": 32235310, "comment_id": 52381449, "body": "See <a href=\"http://stackoverflow.com/questions/10265695/treat-vectorint-as-vectorconst-int-without-copying-c0x\" title=\"treat vectorint as vectorconst int without copying c0x\">stackoverflow.com/questions/10265695/&hellip;</a> I don&#39;t know a solution (except maybe a huge ugly hack), but is a <code>for</code> loop such a big deal? It&#39;s simply copying pointers, I doubt it&#39;ll impact your performance - unless the <code>QList</code> is huge&amp; and you have very high performance requirements."}, {"owner": {"reputation": 743, "user_id": 3221328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70bcc220a6bf5aa19788c3c8061600f8?s=128&d=identicon&r=PG&f=1", "display_name": "Armaghast", "link": "https://stackoverflow.com/users/3221328/armaghast"}, "edited": false, "score": 0, "creation_date": 1440681887, "post_id": 32235310, "comment_id": 52381729, "body": "Also, check <a href=\"http://stackoverflow.com/questions/2102244/vector-and-const\">stackoverflow.com/questions/2102244/vector-and-const</a> for the reason."}, {"owner": {"reputation": 1077, "user_id": 1296734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a73bfb57e420ceb78bfcd6e705c508b?s=128&d=identicon&r=PG&f=1", "display_name": "eclarkso", "link": "https://stackoverflow.com/users/1296734/eclarkso"}, "reply_to_user": {"reputation": 743, "user_id": 3221328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70bcc220a6bf5aa19788c3c8061600f8?s=128&d=identicon&r=PG&f=1", "display_name": "Armaghast", "link": "https://stackoverflow.com/users/3221328/armaghast"}, "edited": false, "score": 0, "creation_date": 1440690293, "post_id": 32235310, "comment_id": 52387969, "body": "In this particular case, it&#39;s not a big deal (and I&#39;ve gone ahead and implemented it that way).  But it offends my sense of style, and in other instances in my application (interactive data visualization), I could need to do interactive UI operations on containers of ~1000-10000s chart glyph objects wherein I&#39;m inspecting but not changing the glyph objects without lagging the UI just to get a container of const pointers."}], "answers": [{"comments": [{"owner": {"reputation": 1077, "user_id": 1296734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a73bfb57e420ceb78bfcd6e705c508b?s=128&d=identicon&r=PG&f=1", "display_name": "eclarkso", "link": "https://stackoverflow.com/users/1296734/eclarkso"}, "edited": false, "score": 0, "creation_date": 1442869216, "post_id": 32683419, "comment_id": 53252350, "body": "Note that my actual member is a QMultiHash, and what I want to provide const access to are the list of values from QMultiHash::values()., and as such the last const reference isn&#39;t an option.  Also note that a major reason for providing such an accessor is for const correctness; plus, I&#39;d prefer not to rely on the good graces of myself or others to access the list (via const iterators et al.) appropriately."}, {"owner": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "reply_to_user": {"reputation": 1077, "user_id": 1296734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a73bfb57e420ceb78bfcd6e705c508b?s=128&d=identicon&r=PG&f=1", "display_name": "eclarkso", "link": "https://stackoverflow.com/users/1296734/eclarkso"}, "edited": false, "score": 0, "creation_date": 1442900792, "post_id": 32683419, "comment_id": 53261398, "body": "@eclarkso In that case your only option is to create such a list yourself. Even if there existed a function that would create it for you it would be doing pretty much the same thing - creating new list with const elements. Anyway, use C++11 for to do it as it is the fastest way currently available. Unless you run into performance issues with your inspection taking too long because the list is too big (and conversion takes too long) there should be no problem. If performance does become an issue you will probably have to reconsider your priorities or design. Good luck!"}], "tags": [], "owner": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "is_accepted": true, "score": 0, "last_activity_date": 1442778599, "last_edit_date": 1442778599, "creation_date": 1442777530, "answer_id": 32683419, "question_id": 32235310, "link": "https://stackoverflow.com/questions/32235310/convert-qt-container-of-objects-into-container-of-const-objects-efficiently/32683419#32683419", "title": "Convert (Qt) container of objects into container of const objects efficiently?", "body": "<p>There are two ways. The obvious way you mention is to use C++11 for and convert it yourself to <code>QList&lt;const Bar*&gt;</code>.</p>\n\n<pre><code>QList&lt;const Bar*&gt; getList() const\n{\n    QList&lt;const Bar*&gt; list;\n\n    for(Bar *b : m_List) //where m_List is your private memebr QList&lt;Bar*&gt;\n        list &lt;&lt; b;\n\n    return list;\n}\n</code></pre>\n\n<p>The other way is to convert the <code>QList</code> itself to <code>const QList&lt;Bar*&gt;</code> which can be done \"magically\" by returning the list from a const function for instance:</p>\n\n<pre><code>const QList&lt;Bar*&gt; getList() const\n{ \n    return m_List; //where m_List is your private memebr QList&lt;Bar*&gt;\n} \n</code></pre>\n\n<p>Which one to use depends on your needs. From what you describe you need to inspect the elements without changing them. That sounds like that you do not actually need the modifiable list at all. The first variant sound like an overkill already. You want <code>const Bar*</code> presumably because you do not want it to change by accident when you inspect the item. To examine all elements for example you could do (adding const automatically for each element):</p>\n\n<pre><code>for(const Bar *b : myObject-&gt;getList())\n    //do only const stuff with b\n</code></pre>\n\n<p>Unless you have a really good reason for returning <code>QList&lt;const Bar*&gt;</code> such as that you need the list to be modifiable it is not worth the trouble and performance hit. You can restrict <code>Bar *</code> with const when you access it yourself by using the C++11 <code>for</code> in a way I described or by using const iterators. From what I gather I would recommend using that rather than converting (possibly huge) list(s)' values to const.</p>\n\n<p>And one last tip, if your lists are really huge and you need every drop of performance consider:</p>\n\n<pre><code>const QList&lt;Bar*&gt; &amp;getList() const\n</code></pre>\n\n<p>The implicit sharing of Qt does this in the previous code snippet on its own I believe but this ensures the list will never be copied or modified when you inspect it.</p>\n"}, {"comments": [{"owner": {"reputation": 344, "user_id": 8991805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e9b04927e57948cbe5d9a99ca8e8e11?s=128&d=identicon&r=PG&f=1", "display_name": "stanislav888", "link": "https://stackoverflow.com/users/8991805/stanislav888"}, "edited": false, "score": 0, "creation_date": 1516952319, "post_id": 48457323, "comment_id": 83907246, "body": "Hope you understand me without code examples. Please let me know if not. I will explain more."}], "tags": [], "owner": {"reputation": 344, "user_id": 8991805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e9b04927e57948cbe5d9a99ca8e8e11?s=128&d=identicon&r=PG&f=1", "display_name": "stanislav888", "link": "https://stackoverflow.com/users/8991805/stanislav888"}, "is_accepted": false, "score": 0, "last_activity_date": 1516952242, "creation_date": 1516952242, "answer_id": 48457323, "question_id": 32235310, "link": "https://stackoverflow.com/questions/32235310/convert-qt-container-of-objects-into-container-of-const-objects-efficiently/48457323#48457323", "title": "Convert (Qt) container of objects into container of const objects efficiently?", "body": "<p>No effective way to \"constifying\" objects in existing array. But if you really store list of pointers. May be fast to convert not \"const\" pointers to \"const\" pointers in simple cycle?! (I.e. make new list)\nSecond solution is make \"const\" objects in list <strong>initially</strong>, when you fill that list.\nAnd third way is make own children class of your list what can return <strong>only</strong> \"const\" reference or iterator to stored elements.</p>\n"}], "owner": {"reputation": 1077, "user_id": 1296734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a73bfb57e420ceb78bfcd6e705c508b?s=128&d=identicon&r=PG&f=1", "display_name": "eclarkso", "link": "https://stackoverflow.com/users/1296734/eclarkso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "accepted_answer_id": 32683419, "answer_count": 2, "score": 5, "last_activity_date": 1516952242, "creation_date": 1440617938, "last_edit_date": 1442869617, "question_id": 32235310, "link": "https://stackoverflow.com/questions/32235310/convert-qt-container-of-objects-into-container-of-const-objects-efficiently", "title": "Convert (Qt) container of objects into container of const objects efficiently?", "body": "<p>My specific problem is that I have a <code>QMultiHash&lt;Foo,Bar*&gt;</code> <code>private</code> member, and I'd like to provide access to the values of the hash, but to <strong><code>const</code></strong> versions of the items, declaring:</p>\n\n<pre><code>QList&lt;const Bar*&gt; getBars(Foo f) const;\n</code></pre>\n\n<p><strong>Is there a cleaner/more efficient way of \"constifying\" the items <em>inside</em> a Qt container</strong> than the ugly/inefficient creation of a new container with const items and copying pointers from the source (<code>QMultiHash&lt;K,V&gt;::values()</code> in this case)?</p>\n\n<p>I'm afraid the answer might be \"no\", but I wanted to make sure I wasn't missing some Qt/C++(03) syntax magic to do that.</p>\n"}, {"tags": ["c++", "constructor", "default", "public"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 3, "creation_date": 1440617969, "post_id": 32235294, "comment_id": 52352937, "body": "The constructor isn&#39;t special in this regard. It&#39;s the same for all members."}, {"owner": {"reputation": 431, "user_id": 4494612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e68d808d2ecb89d55f19d49ac643bcf?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Qasim", "link": "https://stackoverflow.com/users/4494612/muhammad-qasim"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440621261, "post_id": 32235294, "comment_id": 52354695, "body": "Just to clear my concept. @LightnessRacesinOrbit"}], "answers": [{"comments": [{"owner": {"reputation": 431, "user_id": 4494612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e68d808d2ecb89d55f19d49ac643bcf?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Qasim", "link": "https://stackoverflow.com/users/4494612/muhammad-qasim"}, "edited": false, "score": 0, "creation_date": 1440618256, "post_id": 32235317, "comment_id": 52353097, "body": "Now what&#39;s this ?  You are saying that it is public and the answer below is saying that it&#39;s private ?  Can you please give a reason also, why it is public or any authentic link or code ?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 431, "user_id": 4494612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e68d808d2ecb89d55f19d49ac643bcf?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Qasim", "link": "https://stackoverflow.com/users/4494612/muhammad-qasim"}, "edited": false, "score": 0, "creation_date": 1440618327, "post_id": 32235317, "comment_id": 52353141, "body": "@MuhammadQasim: Which part of this answer says that an implicit default constructor is private?"}, {"owner": {"reputation": 3975, "user_id": 1683939, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1da3dd4277594fb16a487ff70827e7d7?s=128&d=identicon&r=PG&f=1", "display_name": "bricklore", "link": "https://stackoverflow.com/users/1683939/bricklore"}, "reply_to_user": {"reputation": 431, "user_id": 4494612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e68d808d2ecb89d55f19d49ac643bcf?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Qasim", "link": "https://stackoverflow.com/users/4494612/muhammad-qasim"}, "edited": false, "score": 0, "creation_date": 1440618340, "post_id": 32235317, "comment_id": 52353146, "body": "@MuhammadQasim Sorry please tell me where I said anything about them being <code>private</code>?"}, {"owner": {"reputation": 3975, "user_id": 1683939, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1da3dd4277594fb16a487ff70827e7d7?s=128&d=identicon&r=PG&f=1", "display_name": "bricklore", "link": "https://stackoverflow.com/users/1683939/bricklore"}, "reply_to_user": {"reputation": 431, "user_id": 4494612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e68d808d2ecb89d55f19d49ac643bcf?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Qasim", "link": "https://stackoverflow.com/users/4494612/muhammad-qasim"}, "edited": false, "score": 0, "creation_date": 1440618503, "post_id": 32235317, "comment_id": 52353231, "body": "@MuhammadQasim So why are you posting that under my answer? Despite of that he said that everyting is private BUT the constructor"}, {"owner": {"reputation": 2466, "user_id": 3003757, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/I7vZc.jpg?s=128&g=1", "display_name": "Wanna Coffee", "link": "https://stackoverflow.com/users/3003757/wanna-coffee"}, "reply_to_user": {"reputation": 431, "user_id": 4494612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e68d808d2ecb89d55f19d49ac643bcf?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Qasim", "link": "https://stackoverflow.com/users/4494612/muhammad-qasim"}, "edited": false, "score": 0, "creation_date": 1440618562, "post_id": 32235317, "comment_id": 52353247, "body": "@MuhammadQasim Please add your comment below to that particular answer, it will help you in the way."}], "tags": [], "owner": {"reputation": 3975, "user_id": 1683939, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1da3dd4277594fb16a487ff70827e7d7?s=128&d=identicon&r=PG&f=1", "display_name": "bricklore", "link": "https://stackoverflow.com/users/1683939/bricklore"}, "is_accepted": false, "score": 11, "last_activity_date": 1440619527, "last_edit_date": 1440619527, "creation_date": 1440617957, "answer_id": 32235317, "question_id": 32235294, "link": "https://stackoverflow.com/questions/32235294/what-is-the-default-access-of-constructor-in-c/32235317#32235317", "title": "What is the default access of constructor in c++", "body": "<p>If you do not declare a constructor yourself, the compiler will always generate a <code>public</code> trivial one for you. They will also implicitly create a public copy constuctor and copy assignment operator.</p>\n\n<p>From c++ standard 12.1.5:</p>\n\n<blockquote>\n  <p>If there is no user-declared constructor for class X, a constructor having no parameters is implicitly declared as defaulted. An implicitly-declared default constructor is an inline public member of its class.</p>\n</blockquote>\n\n<p>12.8.7 and 12.8.11:</p>\n\n<blockquote>\n  <p>If the class definition does not explicitly declare a copy constructor, one is declared implicitly. [...]\n  An implicitly-declared copy/move constructor is an inline public member of its class.</p>\n</blockquote>\n\n<p>Finally 12.8.18, 12.8.20, 12.8.22:</p>\n\n<blockquote>\n  <p>If the class definition does not explicitly declare a copy assignment operator, one is declared implicitly. [...]\n  If the definition of a class X does not explicitly declare a move assignment operator, one will be implicitly declared [...].\n  An implicitly-declared copy/move assignment operator is an inline public member of its class.</p>\n</blockquote>\n\n<p>If you are using <code>c++11</code> the move constructor will not always be generated. See section 12.8.20 for more information.</p>\n"}, {"tags": [], "owner": {"reputation": 35319, "user_id": 871910, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f073f5ca74b61813e689bbda8d12ba2b?s=128&d=identicon&r=PG", "display_name": "zmbq", "link": "https://stackoverflow.com/users/871910/zmbq"}, "is_accepted": false, "score": 1, "last_activity_date": 1440618353, "last_edit_date": 1440618353, "creation_date": 1440617978, "answer_id": 32235321, "question_id": 32235294, "link": "https://stackoverflow.com/questions/32235294/what-is-the-default-access-of-constructor-in-c/32235321#32235321", "title": "What is the default access of constructor in c++", "body": "<p>There's no default access for a constructor or any other member. In a class defined with the keyword <code>class</code> all members are private by default; in a class defined with the keyword <code>struct</code> they are public by default. That includes the constructor.</p>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 3, "last_activity_date": 1440618794, "last_edit_date": 1440618794, "creation_date": 1440618085, "answer_id": 32235352, "question_id": 32235294, "link": "https://stackoverflow.com/questions/32235294/what-is-the-default-access-of-constructor-in-c/32235352#32235352", "title": "What is the default access of constructor in c++", "body": "<p>There is not default access to constructors.  You decide what the access is when you declare it in the class.  If you are talking about the default constructor that is created by the compiler then the C++ standard 12.1.4 has:</p>\n\n<blockquote>\n  <p>[...]An implicitly-declared default constructor is an inline public member of its class.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 69802, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "is_accepted": false, "score": 4, "last_activity_date": 1440618104, "creation_date": 1440618104, "answer_id": 32235360, "question_id": 32235294, "link": "https://stackoverflow.com/questions/32235294/what-is-the-default-access-of-constructor-in-c/32235360#32235360", "title": "What is the default access of constructor in c++", "body": "<blockquote>\n  <p>What is the default access of constructor in C++ and why?</p>\n</blockquote>\n\n<p>The implicitly generated default constructor, copy constructor, move constructor, copy assignment, move assignment and destructors are all implicitly declared <code>public</code> for obvious reasons (otherwise by default all types would not be instanciable, copyable, movable and destructible).</p>\n\n<p>If you are to declare your own default constructor, then of course it depends on what kind of visibility you set for it, just like any other member function.</p>\n\n<blockquote>\n  <p>And how do I check it through the code ?</p>\n</blockquote>\n\n<p>If your default constructor, for the type <code>T</code>, was declared <code>protected</code> or <code>private</code> the following would not compile:</p>\n\n<pre><code>T x;\n</code></pre>\n"}], "owner": {"reputation": 431, "user_id": 4494612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e68d808d2ecb89d55f19d49ac643bcf?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Qasim", "link": "https://stackoverflow.com/users/4494612/muhammad-qasim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2024, "favorite_count": 0, "answer_count": 4, "score": 3, "last_activity_date": 1440619527, "creation_date": 1440617883, "question_id": 32235294, "link": "https://stackoverflow.com/questions/32235294/what-is-the-default-access-of-constructor-in-c", "title": "What is the default access of constructor in c++", "body": "<p><strong>What</strong> is the default access of constructor in c++ and <strong>why</strong> ?</p>\n\n<p>public, private or protected ?</p>\n\n<p>And how do I check it through the <em>code</em> ?</p>\n"}, {"tags": ["c++", "cuda", "thrust"], "comments": [{"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 1, "creation_date": 1440619129, "post_id": 32235288, "comment_id": 52353551, "body": "It should be possible to limit the size of your output vectors to be equal to or greater than the maximum number of keys.  Have you tried it?  Don&#39;t forget that key sequences must be <i>adjacent</i> like keys.  For example, the following sequence: <code>0   1   0   1</code> represents <i>four</i> &quot;unique&quot; keys.  In the general case, where you don&#39;t know how many keys are present, then the worst case is that the output vectors are the same size as the input vectors."}], "answers": [{"tags": [], "owner": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "is_accepted": true, "score": 5, "last_activity_date": 1440622557, "last_edit_date": 1592644375, "creation_date": 1440619226, "answer_id": 32235646, "question_id": 32235288, "link": "https://stackoverflow.com/questions/32235288/cuda-thrust-reduce-by-key-using-less-memory/32235646#32235646", "title": "CUDA Thrust reduce_by_key using less memory", "body": "<p>Output size of reduction depends on input data, and this value is not typically known before reduction. However, depending on your problem, sometimes you know this size.</p>\n<p>Reasonable implementations would require only at least <em>number of key spans</em> elements for the output. And <code>thrust::reduce_by_key</code> <a href=\"https://groups.google.com/forum/#!msg/thrust-users/dW2BlCYGfA8/9cjijHLJFhoJ\" rel=\"nofollow noreferrer\">seems to be included in this list</a>.</p>\n<hr />\n<h2>Examples:</h2>\n<h3>Non-sorted (common case)</h3>\n<p>Output size is hard to predict</p>\n<pre><code>keys        2   2   2   3   3   2   1\nvalues      1   1   1   1   1   1   1\n           |----------|------|----|---|\n                    4 spans\n\nreduced         3       2       1   1\n</code></pre>\n<hr />\n<h3>Sorted (best case)</h3>\n<p>Output size is equal to number of unique keys</p>\n<pre><code>keys        1   2   2   2   2   3   3\nvalues      1   1   1   1   1   1   1\n           |--|---------------|------|\n                    3 spans\n\nreduced     1           4         2\n</code></pre>\n<hr />\n<h3>Interleaved, no adjacent keys repeated (worst case)</h3>\n<p>Output size is equal to input size</p>\n<pre><code>keys        1   2   3   1   2   3   1\nvalues      1   1   1   1   1   1   1\n           |--|---|---|---|---|---|--|\n                    7 spans\n\nreduced     1   1   1   1   1   1   1\n</code></pre>\n<hr />\n<p>Another thing, is that if you don't need keys to be output, you could discard them with <code>thrust::discard_iterator</code> and save some extra space, as described <a href=\"https://thrust.github.io/doc/classthrust_1_1discard__iterator.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 272, "user_id": 2533273, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e1d810767c52fbc416a6735d5c00c848?s=128&d=identicon&r=PG", "display_name": "aatish", "link": "https://stackoverflow.com/users/2533273/aatish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 395, "favorite_count": 2, "accepted_answer_id": 32235646, "answer_count": 1, "score": 2, "last_activity_date": 1441475171, "creation_date": 1440617866, "last_edit_date": 1441475171, "question_id": 32235288, "link": "https://stackoverflow.com/questions/32235288/cuda-thrust-reduce-by-key-using-less-memory", "title": "CUDA Thrust reduce_by_key using less memory", "body": "<p>I am trying to reduce the memory required to compute reduce_by_key for my use case. I have a relatively small number of unique keys (around 100-150) compared to the number of values (around 16 million). The reduce by key <a href=\"https://thrust.github.io/doc/group__reductions.html#gad5623f203f9b3fdcab72481c3913f0e0\" rel=\"nofollow\">example</a> shows that the device_vectors allocated to contain the result is of the same size as that of the inputs. Is it always necessary to do so? Is it possible to only allocate as much memory as necessary to contain the correct output?</p>\n"}, {"tags": ["c++", "templates", "c++11", "variadic-templates"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 3, "creation_date": 1440617049, "post_id": 32234978, "comment_id": 52352426, "body": "<a href=\"http://en.cppreference.com/w/cpp/utility/tuple/operator_cmp\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/tuple/operator_cmp</a>"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1440617743, "post_id": 32234978, "comment_id": 52352819, "body": "Write index sequence from C++14.  Recuse using it and <code>std::get</code>."}, {"owner": {"reputation": 23, "user_id": 5265852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a68ba15116bb1f7cbf352ee11755765b?s=128&d=identicon&r=PG&f=1", "display_name": "logist", "link": "https://stackoverflow.com/users/5265852/logist"}, "edited": false, "score": 0, "creation_date": 1440618830, "post_id": 32234978, "comment_id": 52353384, "body": "@ juanchopanzo &quot;I know the standard provides this. I&#39;m doing it as a TMP exercise.&quot;  @ Yakk - I want to do this in C++11. (I could have stated this more clearly.)"}], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1440618755, "post_id": 32235388, "comment_id": 52353348, "body": "Beat me by 23 seconds.  You can write a 2 argument <code>is_less</code> that can be reused for <code>std::array</code> and <code>std::pair</code> if you move the making of the index sequence into it with <code>tuple_size</code> to make the sequence (see <a href=\"http://stackoverflow.com/a/32235477/1774667\">deleted answer below</a>).  Also, <code>&lt;</code> should work on non-uniform (yet compatible) types, no?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1440619042, "post_id": 32235388, "comment_id": 52353504, "body": "@Yakk Excellent points as usual. Probably the sizes don&#39;t even have to be the same right?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1440619069, "post_id": 32235388, "comment_id": 52353516, "body": "Hmm, with lexographic, what happens with equality up to the end of the shorter one? The longer one is ... later?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1440619106, "post_id": 32235388, "comment_id": 52353535, "body": "@Yakk That&#39;s how it works for strings, so that&#39;s what I&#39;m going with."}, {"owner": {"reputation": 23, "user_id": 5265852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a68ba15116bb1f7cbf352ee11755765b?s=128&d=identicon&r=PG&f=1", "display_name": "logist", "link": "https://stackoverflow.com/users/5265852/logist"}, "edited": false, "score": 0, "creation_date": 1440619668, "post_id": 32235388, "comment_id": 52353841, "body": "I&#39;m just testing before I upvote... Why should the terminating case always return true?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 23, "user_id": 5265852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a68ba15116bb1f7cbf352ee11755765b?s=128&d=identicon&r=PG&f=1", "display_name": "logist", "link": "https://stackoverflow.com/users/5265852/logist"}, "edited": false, "score": 0, "creation_date": 1440620572, "post_id": 32235388, "comment_id": 52354289, "body": "@arh That was a bug. Should always return <code>false</code> since a strict weak ordering must be irreflexive."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 0, "last_activity_date": 1440620550, "last_edit_date": 1495542582, "creation_date": 1440618207, "answer_id": 32235388, "question_id": 32234978, "link": "https://stackoverflow.com/questions/32234978/implementing-lexicographic-comparison-for-stdtuple-in-c11/32235388#32235388", "title": "Implementing lexicographic comparison for std::tuple in C++11", "body": "<p>The reason your code doesn't work is that your comparisons are backwards. Your first call is:</p>\n\n<pre><code>return tuple_ops&lt;decltype(x),sizeof...(T)&gt;::less(x,y);\n</code></pre>\n\n<p>which will call <code>tuple_ops&lt;Type, 3&gt;::less()</code>, the first operation of which compares <code>std::get&lt;2&gt;(x)</code> and <code>std::get&lt;2&gt;(y)</code>. So you're comparing the <em>last</em> elements first. </p>\n\n<p>You have to start at <code>0</code> and go up to <code>N</code>, so you'd have to rewrite your first-level call to be:</p>\n\n<pre><code>return tuple_ops&lt;decltype(x),0,sizeof...(T)&gt;::less(x,y);\n</code></pre>\n\n<p>with the terminating case now being:</p>\n\n<pre><code>template &lt;typename Tuple, size_t N&gt;\nstruct tuple_ops&lt;Tuple, N, N&gt; {\n    static bool less(const Tuple&amp;, const Tuple&amp;) { return false; }\n};\n</code></pre>\n\n<hr />\n\n<p>A simpler way to avoid specializations would be to use an index sequence (and borrowing from Yakk's <a href=\"https://stackoverflow.com/a/32235477/2069064\">now-deleted answer</a> to add more functionality):</p>\n\n<pre><code>template &lt;class X, class Y&gt;\nbool operator&lt;(const X&amp; x, const Y&amp; y) {\n    return is_less(x, y,\n        std::make_index_sequence&lt;std::min(std::tuple_size&lt;X&gt;{},\n                                          std::tuple_size&lt;Y&gt;{})&gt;{});\n}\n</code></pre>\n\n<p>Have an overload for the empty case:</p>\n\n<pre><code>template &lt;typename X, typename Y&gt;\nbool is_less(X const&amp;, Y const&amp;, std::index_sequence&lt;&gt; ) {\n    return std::tuple_size&lt;X&gt;{} &lt; std::tuple_size&lt;Y&gt;{};\n}\n</code></pre>\n\n<p>and an overload for the recursive case:</p>\n\n<pre><code>template &lt;typename X, typenmae Y, size_t I, size_t... Is&gt;\nbool is_less(X const&amp; x, Y const&amp; y, std::index_sequence&lt;I, Is...&gt; ) {\n    if (std::get&lt;I&gt;(x) &lt; std::get&lt;I&gt;(y)) {\n        return true;\n    }\n    else if (std::get&lt;I&gt;(y) &lt; std::get&lt;I&gt;(x)) {\n        return false;\n    }\n    else {\n        return is_less(x, y, std::index_sequence&lt;Is...&gt;{});\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 5265852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a68ba15116bb1f7cbf352ee11755765b?s=128&d=identicon&r=PG&f=1", "display_name": "logist", "link": "https://stackoverflow.com/users/5265852/logist"}, "is_accepted": false, "score": 0, "last_activity_date": 1440622605, "last_edit_date": 1440622605, "creation_date": 1440620959, "answer_id": 32236145, "question_id": 32234978, "link": "https://stackoverflow.com/questions/32234978/implementing-lexicographic-comparison-for-stdtuple-in-c11/32236145#32236145", "title": "Implementing lexicographic comparison for std::tuple in C++11", "body": "<p>Working like a charm. Here's a version of the test program, incorporating Barry's tips.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;tuple&gt;\n\n// Pseudo-recursion.\n\ntemplate&lt;class tupleT,std::size_t J,std::size_t N&gt;\nstruct tuple_ops {\n    static bool less(const tupleT&amp; x,const tupleT&amp; y) {\n        return std::get&lt;J&gt;(x) &lt; std::get&lt;J&gt;(y) ||\n            ( !(std::get&lt;J&gt;(y) &lt; std::get&lt;J&gt;(x)) &amp;&amp;\n                tuple_ops&lt;tupleT,J+1,N&gt;::less(x,y) );\n    }\n};\n\n// Base Case.\n\ntemplate &lt;typename Tuple, size_t N&gt;\nstruct tuple_ops&lt;Tuple,N,N&gt; {\n    static bool less(const Tuple&amp;, const Tuple&amp;) {return false;}\n};\n\n// Convenience wrapper.\n\ntemplate&lt;class... T&gt;\nbool operator&lt;(const std::tuple&lt;T...&gt;&amp; x,const std::tuple&lt;T...&gt;&amp; y) {\n    return tuple_ops&lt;decltype(x),0,sizeof...(T)&gt;::less(x,y);\n}\n\nint main() {\n    using namespace std;\n\n    auto tup0 = make_tuple(3.14,string(\"foo\"),2.71);\n    auto tup1 = make_tuple(4.01,string(\"foo\"),2.01);\n    auto tup2 = make_tuple(1,string(\"bar\"),5);\n    auto tup3 = make_tuple(1,string(\"foo\"),5);\n\n    cout &lt;&lt;  (::operator&lt;(tup0,tup1)) &lt;&lt; ' '\n         &lt;&lt;  (::operator&lt;(tup2,tup3)) &lt;&lt; ' '\n         &lt;&lt; !(::operator&lt;(tup1,tup0)) &lt;&lt; ' '\n         &lt;&lt; !(::operator&lt;(tup3,tup2)) &lt;&lt; ' ';\n\n    return 0;\n}\n</code></pre>\n\n<p>Thanks again.</p>\n"}], "owner": {"reputation": 23, "user_id": 5265852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a68ba15116bb1f7cbf352ee11755765b?s=128&d=identicon&r=PG&f=1", "display_name": "logist", "link": "https://stackoverflow.com/users/5265852/logist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 550, "favorite_count": 0, "accepted_answer_id": 32235388, "answer_count": 2, "score": 1, "last_activity_date": 1440622605, "creation_date": 1440616745, "question_id": 32234978, "link": "https://stackoverflow.com/questions/32234978/implementing-lexicographic-comparison-for-stdtuple-in-c11", "title": "Implementing lexicographic comparison for std::tuple in C++11", "body": "<p>I'm trying to implement lexicographic comparison for std::tuple. I know the standard provides this. I'm doing it as a TMP exercise. I can't see why the code below doesn't work. Can anyone point me in the right direction?</p>\n\n<p>I know the code below assumes operands of the same type. I am happy making this as a simplifying assumption.</p>\n\n<p>I've looked at the VC++ 2013 and GCC 4.7 implementations. They both use non-standard helper classes to get the tail  (i.e. all but the left-most element) from a tuple. I'd like to solve the problem with as little scaffolding as possible. Is it possible to do tuple comparison without something like get_tail?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;tuple&gt;\n\n// Pseudo-recursion.\n\ntemplate&lt;class tupleT,std::size_t N&gt;\nstruct tuple_ops {\n    static bool less(const tupleT&amp; x,const tupleT&amp; y) {\n        return std::get&lt;N-1&gt;(x) &lt; std::get&lt;N-1&gt;(y) ||\n            ( !(std::get&lt;N-1&gt;(y) &lt; std::get&lt;N-1&gt;(x)) &amp;&amp;\n              tuple_ops&lt;tupleT,N-1&gt;::less(x,y) );\n    }\n};\n\n// Base Case.\n\ntemplate&lt;class tupleT&gt;\nstruct tuple_ops&lt;tupleT,1&gt; {\n    static bool less(const tupleT&amp; x,const tupleT&amp; y) {\n        return std::get&lt;0&gt;(x) &lt; std::get&lt;0&gt;(y);\n    }\n};\n\n// Convenience wrapper.\n\ntemplate&lt;class... T&gt;\nbool operator&lt;(const std::tuple&lt;T...&gt;&amp; x,const std::tuple&lt;T...&gt;&amp; y) {\n    return tuple_ops&lt;decltype(x),sizeof...(T)&gt;::less(x,y);\n}\n\nint main() {\n    using namespace std;\n\n    auto tup0 = make_tuple(3.14,string(\"foo\"),2.71);\n    auto tup1 = make_tuple(4.01,string(\"foo\"),2.01);\n    auto tup2 = make_tuple(1,string(\"bar\"),5);\n    auto tup3 = make_tuple(1,string(\"foo\"),5);\n\n    cout &lt;&lt;  (::operator&lt;(tup0,tup1))  &lt;&lt; ' '\n         &lt;&lt;  (::operator&lt;(tup2,tup3))  &lt;&lt; ' '\n         &lt;&lt; !(::operator&lt;(tup1,tup0)) &lt;&lt; ' '\n         &lt;&lt; !(::operator&lt;(tup3,tup2)) &lt;&lt; ' ';\n\n    return 0;\n}\n</code></pre>\n\n<p>Output: 0 1 0 1</p>\n\n<p>Correct output would be: 1 1 1 1</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "templates", "generic-programming"], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 36599, "user_id": 359284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3260a8f331e6869fbf075666eb3b387a?s=128&d=identicon&r=PG", "display_name": "Kevin Brown", "link": "https://stackoverflow.com/users/359284/kevin-brown"}, "edited": false, "score": 0, "creation_date": 1440617835, "post_id": 32235133, "comment_id": 52352874, "body": "@KevinBrown Honestly, the first line is the answer.  The rest is a sketch or illustration.  The OPs big problem was that the in type, and the out type, are tied in one template and one call, while each element of the chain only knows half of those steps."}, {"owner": {"reputation": 550, "user_id": 354722, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4f3038cad221663a6f50f86c142b85e1?s=128&d=identicon&r=PG", "display_name": "Moos Hueting", "link": "https://stackoverflow.com/users/354722/moos-hueting"}, "edited": false, "score": 0, "creation_date": 1440620820, "post_id": 32235133, "comment_id": 52354438, "body": "I stand in awe at your coding prowess. Thank you Yakk, this is exactly what I am looking for."}, {"owner": {"reputation": 550, "user_id": 354722, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4f3038cad221663a6f50f86c142b85e1?s=128&d=identicon&r=PG", "display_name": "Moos Hueting", "link": "https://stackoverflow.com/users/354722/moos-hueting"}, "edited": false, "score": 0, "creation_date": 1440622881, "post_id": 32235133, "comment_id": 52355500, "body": "Quick comment - std::experimental::optional&lt;T&gt; data should be std::experimental::optional&lt;Out&gt;, and the operator()(T&amp;&amp; t) below should be opeator()(In&amp;&amp; t), no?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 550, "user_id": 354722, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4f3038cad221663a6f50f86c142b85e1?s=128&d=identicon&r=PG", "display_name": "Moos Hueting", "link": "https://stackoverflow.com/users/354722/moos-hueting"}, "edited": false, "score": 0, "creation_date": 1440680295, "post_id": 32235133, "comment_id": 52380465, "body": "@MoosHueting seems reasonable.  I did a quick audit and replaced stuff that seemed wrong, especially around <code>T</code>s in templates that lack <code>T</code> types.  Also note that while the above has type-checking mechanisms, I didn&#39;t use them in the sample code: failure is always an option.  Probably you&#39;d want to check the types of the piped data for compatibility when you populate it.  Also, having the first processor be distinct was just because I was too lazy to write a first-excluding range-for adapter (or the equivalent manual loop)."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 3, "last_activity_date": 1440632264, "last_edit_date": 1440632264, "creation_date": 1440617261, "answer_id": 32235133, "question_id": 32234662, "link": "https://stackoverflow.com/questions/32234662/pipeline-class-storing-different-templates-with-constraints/32235133#32235133", "title": "Pipeline class storing different templates with constraints", "body": "<p>Decouple the in and out calls.</p>\n\n<p>Data coming in and data coming out should happen at different steps.  Then each consumer of data can know what it needs to demand, and do the casting for you (possibly throwing or error flagging if things go wrong).</p>\n\n<pre><code>struct processor {\n  virtual ~processor () {};\n  virtual bool can_read_from( processor const&amp; ) const = 0;\n  virtual void read_from( processor&amp; ) = 0;\n  virtual bool ready_to_sink() const = 0;\n  virtual bool ready_to_source() const = 0;\n};\ntemplate&lt;class T&gt;\nstruct sink {\n  virtual void operator()( T&amp;&amp; t ) = 0;\n  virtual ~sink() {}\n};\ntemplate&lt;class T&gt;\nstruct source {\n  virtual T operator()() = 0;\n  virtual ~source() {}\n};\ntemplate&lt;class In, class Out, class F&gt;\nstruct step: processor, sink&lt;In&gt;, source&lt;Out&gt; {\n  F f;\n  step( F&amp;&amp; fin ):f(std::move(fin)) {}\n\n  step(step&amp;&amp;)=default;\n  step(step const&amp;)=default;\n  step&amp; operator=(step&amp;&amp;)=default;\n  step&amp; operator=(step const&amp;)=default;\n  step()=default;\n\n  std::experimental::optional&lt;Out&gt; data;\n  virtual void operator()( In&amp;&amp; t ) final override {\n    data = f(std::move(t));\n  }\n  virtual bool ready_to_sink() const {\n    return !data;\n  }\n  virtual Out operator()() final override {\n    auto tmp = std::move(data);\n    data = {};\n    return std::move(*tmp);\n  }\n  virtual bool ready_to_source() const final override {\n    return static_cast&lt;bool&gt;(data);\n  }\n  virtual bool can_read_from( processor const&amp; o ) final override {\n    return dynamic_cast&lt;source&lt;In&gt; const*&gt;(&amp;o);\n  }\n  virtual void read_from( processor &amp;o ) final override {\n    (*this)( dynamic_cast&lt;source&lt;In&gt;&amp;&gt;(o)() );\n  }\n};\ntemplate&lt;class In, class Out&gt;\nstruct pipe {\n  std::shared_ptr&lt;processor&gt; first_step;\n  std::vector&lt; std::shared_ptr&lt;processor&gt; &gt; steps;\n  pipe(std::shared_ptr&lt;processor&gt; first, std::vector&lt;std::shared_ptr&lt;processor&gt;&gt; rest):\n    first_step(first), steps(std::move(rest))\n  {}\n  Out operator()( In&amp;&amp; in ) {\n    (*dynamic_cast&lt;sink&lt;In&gt;*&gt;(steps.first_step.get()))( std::move(in) );\n    auto last = first_step;\n    for (auto step:steps) {\n      step-&gt;read_from( *last );\n      last = step;\n    }\n    return (*dynamic_cast&lt;source&lt;Out&gt;*&gt;(last.get())();\n  }\n};\ntemplate&lt;class In, class Out&gt;\nstruct pipeline:step&lt;In, Out, pipe&lt;In,Out&gt;&gt; {\n  pipeline( std::shared_pointer&lt;processor&gt; first, std::vector&lt;std::shared_ptr&lt;processor&gt;&gt; steps ):\n    step&lt;In, Out, pipe&lt;In,Out&gt;&gt;({ first, std::move(steps) })\n  {}\n};\n</code></pre>\n"}], "owner": {"reputation": 550, "user_id": 354722, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4f3038cad221663a6f50f86c142b85e1?s=128&d=identicon&r=PG", "display_name": "Moos Hueting", "link": "https://stackoverflow.com/users/354722/moos-hueting"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 32235133, "answer_count": 1, "score": 0, "last_activity_date": 1440632264, "creation_date": 1440615678, "question_id": 32234662, "link": "https://stackoverflow.com/questions/32234662/pipeline-class-storing-different-templates-with-constraints", "title": "Pipeline class storing different templates with constraints", "body": "<p>I have a class template <code>DataProcessor</code>, which looks like this:</p>\n\n<pre><code>struct DataProcessorBase\n{\n    typedef std::shared_ptr&lt;DataProcessorBase&gt; Ptr;\n}; // struct DataProcessorBase\n\ntemplate &lt;class _Input, class _Output&gt;\nstruct DataProcessor : DataProcessorBase\n{\n    typedef _Input Input;\n    typedef _Output Output;\n\n    virtual Output process(const Input * input) = 0;\n}; // struct DataProcessor\n</code></pre>\n\n<p>I am looking to create a Pipeline class, which concatenates multiple <code>DataProcessor</code> instances together. This means that the Output of processor 1 must match the input of processor 2, and so forth. Something like the following:</p>\n\n<pre><code>template &lt;class _Input, class _Output&gt;\nclass Pipeline : DataProcessor&lt;_Input, _Output&gt;\n{\npublic:\n    Output process(const Input * input);\nprivate:    \n    std::vector&lt;DataProcessorBase::Ptr&gt; _processors;\n}; // class Pipeline\n\ntemplate &lt;class _Input, class _Output&gt;\n_Output Pipeline&lt;_Input, _Output&gt;::process(const _Input * input)\n{\n    // this is where I start guessing...\n    auto rawPtr = dynamic_cast&lt;DataProcessor&lt;_Input, TYPEOFFIRSTPROCESSORSOUTPUT&gt;*&gt;(_processors[0]);\n    assert(rawPtr);\n    for (size_t i = 0; i &lt; _processors.size(); ++i)\n    {\n        ...\n    }\n}\n</code></pre>\n\n<p>I can tell that this way of implementing Pipeline::process is not the right way. Can someone point me in the right direction?</p>\n"}, {"tags": ["c++", "c++11", "copy-and-swap", "move-assignment-operator"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 3, "creation_date": 1440616559, "post_id": 32234623, "comment_id": 52352152, "body": "<a href=\"http://stackoverflow.com/q/9847860/560648\">stackoverflow.com/q/9847860/560648</a>?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1440617113, "post_id": 32234623, "comment_id": 52352464, "body": "I prefer the move assignment at the end of this answer: <a href=\"http://stackoverflow.com/a/3279550/4342498\">stackoverflow.com/a/3279550/4342498</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1447923660, "post_id": 32234623, "comment_id": 55364392, "body": "note that you can achieve both swaps at once by using <code>T&amp; operator=(T rhs) { rhs.swap(*this); return *this; }</code>"}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1447923753, "post_id": 32234623, "comment_id": 55364442, "body": "<i>we don&#39;t care what the contents of rhs are when we are done</i> yes we do: it must be in a valid state for the destructor. For example, we must not keep a pointer to be deleted when that pointer was passed to another object."}, {"owner": {"reputation": 80284, "user_id": 13430, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QUCnD.png?s=128&g=1", "display_name": "Evan Teran", "link": "https://stackoverflow.com/users/13430/evan-teran"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 1, "creation_date": 1447940852, "post_id": 32234623, "comment_id": 55376620, "body": "@Walter. You should read the whole sentence you quoted. Specifically the part after the comma where I say &quot;...just that the contents have been moved into <code>this</code> and that <b>rhs is safely destructable.</b>&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 413, "user_id": 3038842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20dcac35d5787a4596ad50c30d0eb251?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Trenkmann", "link": "https://stackoverflow.com/users/3038842/martin-trenkmann"}, "edited": false, "score": 1, "creation_date": 1447268286, "post_id": 32235130, "comment_id": 55089110, "body": "Sometimes you have to leave <code>rhs</code> in a consistent state. For instance in the move c&#39;tor and assigment of <code>std::unique_ptr</code> you have to set <code>rhs.ptr</code> to <code>nullptr</code> either explicitly or by calling <code>rhs.release()</code> to prevent double deletion."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "reply_to_user": {"reputation": 413, "user_id": 3038842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20dcac35d5787a4596ad50c30d0eb251?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Trenkmann", "link": "https://stackoverflow.com/users/3038842/martin-trenkmann"}, "edited": false, "score": 0, "creation_date": 1447777268, "post_id": 32235130, "comment_id": 55291318, "body": "@MartinTrenkmann, your comment might seem to (unintentionally) imply that <i>users</i> of unique_ptr would need to call <code>release</code> on it. But that&#39;s not true. <code>unique_ptr</code> is implemented to do &quot;the right thing&quot;."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "reply_to_user": {"reputation": 413, "user_id": 3038842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20dcac35d5787a4596ad50c30d0eb251?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Trenkmann", "link": "https://stackoverflow.com/users/3038842/martin-trenkmann"}, "edited": false, "score": 0, "creation_date": 1447777373, "post_id": 32235130, "comment_id": 55291412, "body": "@MartinTrenkmann, I think my comment that &quot;The <code>&amp;&amp;</code> can be left in any state whatsoever&quot; still stands. But I guess the developer should be aware that the <code>&amp;&amp;</code> object will be destructed (quite soon probably) and therefore the developer should take account of the side effects of that destruction."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "reply_to_user": {"reputation": 413, "user_id": 3038842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20dcac35d5787a4596ad50c30d0eb251?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Trenkmann", "link": "https://stackoverflow.com/users/3038842/martin-trenkmann"}, "edited": false, "score": 0, "creation_date": 1447777402, "post_id": 32235130, "comment_id": 55291430, "body": "@MartinTrenkmann, in other words, I&#39;m trying to identify if you believe there is an error in my answer. And if so, how my answer can be improved"}, {"owner": {"reputation": 413, "user_id": 3038842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20dcac35d5787a4596ad50c30d0eb251?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Trenkmann", "link": "https://stackoverflow.com/users/3038842/martin-trenkmann"}, "edited": false, "score": 0, "creation_date": 1447877384, "post_id": 32235130, "comment_id": 55345832, "body": "The question is about implementing move assignment and especially the state of <code>rhs</code>, so my comment was from an <i>implementers</i> point of view. In this context your statement &quot;nobody cares what state I leave this variable in&quot; is not correct. On the other hand, as a <i>user</i> of someones move c&#39;tor or assigment, you are right, you shouldn&#39;t care about <code>rhs</code>, it is just not usable anymore, but this was not the question in my opinion."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "reply_to_user": {"reputation": 413, "user_id": 3038842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20dcac35d5787a4596ad50c30d0eb251?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Trenkmann", "link": "https://stackoverflow.com/users/3038842/martin-trenkmann"}, "edited": false, "score": 0, "creation_date": 1447923315, "post_id": 32235130, "comment_id": 55364173, "body": "I&#39;ve added something to the answer, but I&#39;m not entirely satisfied with it. I&#39;m trying to make the point that the <code>&amp;&amp;</code> doesn&#39;t need to be logically &quot;empty&quot;. We just need to be confident that the (inevitable) destructor call won&#39;t have any nasty side effects."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1447923837, "post_id": 32235130, "comment_id": 55364496, "body": "I guess it depends somewhat on the class semantics; for example we would expect <code>unique_ptr&lt;T&gt; x,y; ....  x = std::move(y);</code> to free the old object in <code>x</code> ."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1447923854, "post_id": 32235130, "comment_id": 55364506, "body": "<i>&quot;nobody cares what state I leave this variable in&quot;</i> <b>wrong</b>. The state must be a valid state for the destructor. For example, you cannot leave a pointer to point to memory to be deleted when you have passed that address into another object."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1447925830, "post_id": 32235130, "comment_id": 55365876, "body": "@Walter, that&#39;s exactly what I said in my answer. Even the first version of my answer said &quot;(as long as it is destructible)&quot;"}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1447925974, "post_id": 32235130, "comment_id": 55365991, "body": "Everyone, my broad point, on which I&#39;m sure we all agree, is that it doesn&#39;t matter (for correctness) whether the moved-from object is &quot;empty&quot; (i.e. destruction does nothing) or whether it is a <i>deep</i> copy of the target object (i.e. destruction still has no undesirable side effects). This is the kind of answer that is needed for the original question. Feel free to post another answer if you think I&#39;ve made this point badly"}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1447940506, "post_id": 32235130, "comment_id": 55376369, "body": "@AaronMcDaid Yes, you say it, but only later and in brackets, not in the original wrong statement. You should qualify that statement."}], "tags": [], "owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "is_accepted": true, "score": 7, "last_activity_date": 1447923232, "last_edit_date": 1447923232, "creation_date": 1440617253, "answer_id": 32235130, "question_id": 32234623, "link": "https://stackoverflow.com/questions/32234623/using-swap-to-implement-move-assignment/32235130#32235130", "title": "using swap to implement move assignment", "body": "<p>\"what the move-assignment operator needs to do\"</p>\n\n<p>I always find the best way to treat a <code>&amp;&amp;</code> variable is to say that \"nobody cares what state I leave this variable in\". You <em>may</em> move from it. You <em>may</em> copy from it. You <em>may</em> swap into it. There are many more things you can do.</p>\n\n<p>Your code is correct. The <code>&amp;&amp;</code> can be left in any state whatsoever (as long as it is destructible).</p>\n\n<p>The object will be destructed sooner or later (probably sooner) and the implementer should be aware of this. This is important if the destructor will <code>delete</code> raw pointers, which would lead to double-deletion if the same raw pointer is in multiple objects.</p>\n"}], "owner": {"reputation": 80284, "user_id": 13430, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QUCnD.png?s=128&g=1", "display_name": "Evan Teran", "link": "https://stackoverflow.com/users/13430/evan-teran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3029, "favorite_count": 4, "accepted_answer_id": 32235130, "answer_count": 1, "score": 8, "last_activity_date": 1447923232, "creation_date": 1440615494, "last_edit_date": 1440616137, "question_id": 32234623, "link": "https://stackoverflow.com/questions/32234623/using-swap-to-implement-move-assignment", "title": "using swap to implement move assignment", "body": "<p>Something occurred to me which I think it completely reasonable, but I'd like people's opinion on it in case I'm just completely missing something. So firstly, my understanding of <code>T&amp; operator=(T&amp;&amp; rhs)</code> is that we <strong>don't care</strong> what the contents of <code>rhs</code> are when we are done, just that the contents have been moved into <code>this</code> and that <code>rhs</code> is safely destructable.</p>\n\n<p>That being said, a common exception safe implementation of the copy-assignment operator, assuming that swaps are cheap, looks like this:</p>\n\n<pre><code>T&amp; operator=(const T&amp; rhs) {\n    if(this != &amp;rhs) {\n        T(rhs).swap(*this);\n    }\n    return *this;\n}\n</code></pre>\n\n<p>So one natural way to implement the move-assignment operator would be like this:</p>\n\n<pre><code>T&amp; operator=(T&amp;&amp; rhs) {\n    if(this != &amp;rhs) {\n        T(std::move(rhs)).swap(*this);\n    }\n    return *this;\n}\n</code></pre>\n\n<p>But then it occured to me, <code>rhs</code> doesn't have to be empty! So, why not just do a plain <code>swap</code>?</p>\n\n<pre><code>T&amp; operator=(T&amp;&amp; rhs) {\n    rhs.swap(*this); // is this good enough?\n    return *this;\n}\n</code></pre>\n\n<p>I <strong>think</strong> that this satisfies what the move-assignment operator needs to do... but like I said, this just occurred to me, so I assume that it's possible that I'm missing something.</p>\n\n<p>The only \"downside\" that I can think of is that things owned by <code>this</code> will potentially live longer using the plain swap when compared to the version which does a move-construct/swap.</p>\n\n<p>Thoughts?</p>\n"}, {"tags": ["c++", "copy", "copy-constructor"], "comments": [{"owner": {"reputation": 2695, "user_id": 862962, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/3k4wS.jpg?s=128&g=1", "display_name": "AnkitSablok", "link": "https://stackoverflow.com/users/862962/ankitsablok"}, "edited": false, "score": 2, "creation_date": 1440615732, "post_id": 32234580, "comment_id": 52351654, "body": "I mean this is a perfectly valid question, I see no reason to downvote it."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1440616381, "post_id": 32234580, "comment_id": 52352044, "body": "Not really <i>&quot;perfect&quot;</i> by means of a <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1440618171, "post_id": 32234580, "comment_id": 52353054, "body": "It&#39;s not &quot;valid&quot; at all. You failed to present a testcase, despite the instructions of both the Tour and of the Help Centre."}], "answers": [{"comments": [{"owner": {"reputation": 2695, "user_id": 862962, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/3k4wS.jpg?s=128&g=1", "display_name": "AnkitSablok", "link": "https://stackoverflow.com/users/862962/ankitsablok"}, "edited": false, "score": 0, "creation_date": 1440615694, "post_id": 32234622, "comment_id": 52351637, "body": "So, the constructor in the class looks like the following, X(int i=0):m{i}{}, does the construction of the object defaultCopyObject in the code call this constructor by substituting the value of the member &#39;m&#39; of object var for &#39;i&#39;? Or is it something wrong I am assuming."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4386938"}, "is_accepted": false, "score": 3, "last_activity_date": 1440615493, "creation_date": 1440615493, "answer_id": 32234622, "question_id": 32234580, "link": "https://stackoverflow.com/questions/32234580/why-is-the-following-default-copying-syntax-invalid-in-c/32234622#32234622", "title": "Why is the following default copying syntax invalid in C++?", "body": "<p>The first is an initializer list constructor or a default constructor if the initializer list one doesn't exist. You cannot make a call to a constructor after declaring an object like that, which is what it looks like that code is doing</p>\n"}, {"comments": [{"owner": {"reputation": 2695, "user_id": 862962, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/3k4wS.jpg?s=128&g=1", "display_name": "AnkitSablok", "link": "https://stackoverflow.com/users/862962/ankitsablok"}, "edited": false, "score": 0, "creation_date": 1440616156, "post_id": 32234671, "comment_id": 52351885, "body": "yeah I know regarding the assignment operator but I just read about the initialization list construction syntax. Hence tried using it."}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": true, "score": 5, "last_activity_date": 1440615793, "last_edit_date": 1440615793, "creation_date": 1440615716, "answer_id": 32234671, "question_id": 32234580, "link": "https://stackoverflow.com/questions/32234580/why-is-the-following-default-copying-syntax-invalid-in-c/32234671#32234671", "title": "Why is the following default copying syntax invalid in C++?", "body": "<p><code>X defaultCopyObject{var};</code> calls a constructor of <code>X</code>. A constructor can only be called when a variable is first instantiated.</p>\n\n<p>In the second example, the variable has already been instantiated when calling <code>defaultCopyObject{var};</code> and therefore calling the constructor for a second time is not possible.</p>\n\n<p>Note that you can still use the <em>copy assignment operator</em> after the variable has been instantiated:</p>\n\n<pre><code>defaultCopyObject = var;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 0, "last_activity_date": 1440616189, "last_edit_date": 1440616189, "creation_date": 1440615826, "answer_id": 32234696, "question_id": 32234580, "link": "https://stackoverflow.com/questions/32234580/why-is-the-following-default-copying-syntax-invalid-in-c/32234696#32234696", "title": "Why is the following default copying syntax invalid in C++?", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/language/aggregate_initialization\" rel=\"nofollow\">Brace initialization syntax</a> like </p>\n\n<pre><code>X defaultCopyObject{var};\n</code></pre>\n\n<p>is only valid on declaration of a variable, while using it after isn't possible.</p>\n\n<p>You are in need of an appropriate assignment operator, to move the values to the variable. There are ways (like assigning from <a href=\"http://en.cppreference.com/w/cpp/utility/initializer_list\" rel=\"nofollow\"><code>std::initializer_list</code></a>), but not using that syntax, that is reserved for declaration.</p>\n"}], "owner": {"reputation": 2695, "user_id": 862962, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/3k4wS.jpg?s=128&g=1", "display_name": "AnkitSablok", "link": "https://stackoverflow.com/users/862962/ankitsablok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 32234671, "answer_count": 3, "score": 0, "last_activity_date": 1440616189, "creation_date": 1440615366, "last_edit_date": 1440615879, "question_id": 32234580, "link": "https://stackoverflow.com/questions/32234580/why-is-the-following-default-copying-syntax-invalid-in-c", "title": "Why is the following default copying syntax invalid in C++?", "body": "<p>I wrote a simple C++ program to test out the concept of default copying behavior in C++. So, I have a sample class X and I create an object called \"var\" of class X and then I try to initialize another object named \"defaultCopyObject\" with \"var\" assuming that the default copying behavior is just the memberwise copy of one object to the other. I have understood the concept correctly but I am not able to get my head around the syntax used for initialization.</p>\n\n<pre><code>X defaultCopyObject{var};// this code snippet works perfectly fine\n\n// this code snippet returns a compile time error\nX defaultCopyObject;\ndefaultCopyObject{var};\n</code></pre>\n\n<p>Can someone explain me why is the former statement valid and the latter invalid?</p>\n"}, {"tags": ["c++", "c", "googletest", "googlemock"], "comments": [{"owner": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1440615903, "post_id": 32234543, "comment_id": 52351746, "body": "The source code is in C"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440625647, "post_id": 32234543, "comment_id": 52356747, "body": "please remove the &#39;c&#39; tag."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440625754, "post_id": 32234543, "comment_id": 52356787, "body": "the a.h header file is missing the &#39;include guards&#39;.  (typically: #ifndef A_H  #define A_H ..... #endif)    Please use meaningful names. &#39;a.h&#39; is not a meaningful name, nor is &#39;b.c&#39;"}, {"owner": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 0, "creation_date": 1440688558, "post_id": 32234543, "comment_id": 52386764, "body": "@ratzip has something left unclear to you?"}, {"owner": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "reply_to_user": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 0, "creation_date": 1440692643, "post_id": 32234543, "comment_id": 52389534, "body": "@fukanchik thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "is_accepted": true, "score": 1, "last_activity_date": 1440616252, "last_edit_date": 1495542124, "creation_date": 1440616252, "answer_id": 32234829, "question_id": 32234543, "link": "https://stackoverflow.com/questions/32234543/google-mock-link-error-with-mocking-c-function/32234829#32234829", "title": "google mock link error with mocking C function", "body": "<p>replace </p>\n\n<pre><code>AMock.hh\n\n#include \"a.h\"\n</code></pre>\n\n<p>with</p>\n\n<pre><code>AMock.hh\n\nextern \"C\" {\n    #include \"a.h\"\n}\n</code></pre>\n\n<p>here is why: <a href=\"https://stackoverflow.com/questions/1041866/in-c-source-what-is-the-effect-of-extern-c\">In C++ source, what is the effect of extern &quot;C&quot;?</a></p>\n"}], "owner": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 990, "favorite_count": 0, "accepted_answer_id": 32234829, "answer_count": 1, "score": 0, "last_activity_date": 1440616252, "creation_date": 1440615262, "last_edit_date": 1440615926, "question_id": 32234543, "link": "https://stackoverflow.com/questions/32234543/google-mock-link-error-with-mocking-c-function", "title": "google mock link error with mocking C function", "body": "<p>I have the following code, I try to mock a C function using google mock:</p>\n\n<p>This is the header file:</p>\n\n<pre><code>A.h\n\nint getValue(int age, int* value, int* number);\n</code></pre>\n\n<p>This is the source file:</p>\n\n<pre><code>A.c\n\nint getValue(int age, int* value, int* number)\n{\n    // do something and return value\n    return 10;\n}\n</code></pre>\n\n<p>This is source file b.c, which using a.h</p>\n\n<pre><code>b.c\n\n#include &lt;a.h&gt;\n\nvoid formValue()\n{\n   int b = 10;\n   int c = 20;\n   getValue(1, &amp;b, &amp;c);    \n}\n</code></pre>\n\n<p>This is the mock file:</p>\n\n<pre><code>AMock.hh\n\n#include \"a.h\"\n\nclass AFileMock {\n  public:\n    AFileMock();\n    ~AFileMock();\n    MOCK_METHOD3(getValue, int(int, int *, int *));\n};\n</code></pre>\n\n<p>Then in the test:</p>\n\n<pre><code>#include \"gmock/gmock.h\"\n#include \"gtest/gtest.h\"\n\n#include &lt;b.h&gt;\n#include &lt;AFileMock.h&gt;\n\nusing testing::_;\nusing testing::Return;\nusing testing::InSequence;\n\nclass BTest: public testing::Test {\n\nprotected:\n   AFileMock aFile;\n\npublic:\n   void SetUp() { }\n   void TearDown() { }\n};\n\n\nTEST_F(BTest, test1)\n{\n   InSequence sequence;\n   EXPECT_CALL(aFile, getValue(_, _, _)).\n      Times(1);\n\n   formValue();\n}\n</code></pre>\n\n<p>when I try to run this test, it complains that the get link error in the Mock file, it says:</p>\n\n<p><code>link error: getValue(_, _, _) is not defined</code>, and it points to the Mock file <code>AMock.hh</code>.</p>\n\n<p>But if I use MOCK_CONST_METHOD instead of MOCK_METHOD in the Mock, it work:</p>\n\n<pre><code>MOCK_CONST_METHOD3(getValue, int(int, int *, int *));\n</code></pre>\n\n<p>No complier errors.</p>\n\n<p>What is the reason for this?</p>\n"}, {"tags": ["c++", "model-view-controller", "wkhtmltopdf"], "answers": [{"comments": [{"owner": {"reputation": 1313, "user_id": 450954, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e03cce6e66fc7e2d875f9af8a107ea96?s=128&d=identicon&r=PG", "display_name": "NetHawk", "link": "https://stackoverflow.com/users/450954/nethawk"}, "edited": false, "score": 0, "creation_date": 1516761605, "post_id": 32258945, "comment_id": 83817901, "body": "Just an update, the linked page no longer says that. I hope that means they fixed it."}], "tags": [], "owner": {"reputation": 3915, "user_id": 1122813, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/fTH9z.jpg?s=128&g=1", "display_name": "Jakob Lithner", "link": "https://stackoverflow.com/users/1122813/jakob-lithner"}, "is_accepted": false, "score": 0, "last_activity_date": 1440707692, "creation_date": 1440707692, "answer_id": 32258945, "question_id": 32234508, "link": "https://stackoverflow.com/questions/32234508/nreco-pdfgenerator-1-1-7-does-not-work-in-hosted-environment/32258945#32258945", "title": "NReco.PdfGenerator 1.1.7 does not work in hosted environment", "body": "<p>Regarding system requirements I found a passage on this page <a href=\"http://www.nrecosite.com/pdf_generator_net.aspx\" rel=\"nofollow\">http://www.nrecosite.com/pdf_generator_net.aspx</a> saying: </p>\n\n<ul>\n<li>PdfGenerator works fine with Azure Web Role / Worker Role / usual VM.</li>\n<li>Azure Web Sites is NOT supported because of GDI WinAPI limitations that prevent WkHtmlToPdf from working.</li>\n</ul>\n\n<p>I guess this might apply to my situation as well. I am not running in Azure, but still in a \"cloud service\" environment, so it is likely they have the same limitations of GDI WinAPI.</p>\n\n<p>This is really sad. The idea was excellent: Same reports in web and client. But in this setting it didn't work.</p>\n"}, {"comments": [{"owner": {"reputation": 3915, "user_id": 1122813, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/fTH9z.jpg?s=128&g=1", "display_name": "Jakob Lithner", "link": "https://stackoverflow.com/users/1122813/jakob-lithner"}, "edited": false, "score": 0, "creation_date": 1506065126, "post_id": 46337303, "comment_id": 79677800, "body": "I guess this assumes you are responsible for your own server. In a hosted environment you are probably not allowed to add files to the system folders ..."}], "tags": [], "owner": {"reputation": 369, "user_id": 1079028, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6559f974f1e37f8ac8d932c0447c4e4f?s=128&d=identicon&r=PG", "display_name": "nooaa", "link": "https://stackoverflow.com/users/1079028/nooaa"}, "is_accepted": false, "score": 0, "last_activity_date": 1505976889, "creation_date": 1505976889, "answer_id": 46337303, "question_id": 32234508, "link": "https://stackoverflow.com/questions/32234508/nreco-pdfgenerator-1-1-7-does-not-work-in-hosted-environment/46337303#46337303", "title": "NReco.PdfGenerator 1.1.7 does not work in hosted environment", "body": "<p>We had similar error saying:Cannot generate PDF: (exit code: -1073741819)</p>\n\n<p>I am putting our solution here if anyone needs. Execute wkhtmltopdf.exe from console and check the error. In our case it was saying some dll's are missing like api-ms-win-core-localization-l1-2-0.dll, api-ms-win-core-timezone-l1-2-0.dll and so on. I dont know why these dll's were not on server. According to operating system, we found correct places under system32 or sysWOW64 folders and copy these dlls to these folders and problem has solved.</p>\n\n<p>For example how to fix api-ms-win-core-timezone-l1-2-0.dll problem, below link will help: <a href=\"https://www.youtube.com/watch?v=s5N0jmYyy34\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=s5N0jmYyy34</a> </p>\n"}], "owner": {"reputation": 3915, "user_id": 1122813, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/fTH9z.jpg?s=128&g=1", "display_name": "Jakob Lithner", "link": "https://stackoverflow.com/users/1122813/jakob-lithner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2327, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1505976889, "creation_date": 1440615146, "last_edit_date": 1495535197, "question_id": 32234508, "link": "https://stackoverflow.com/questions/32234508/nreco-pdfgenerator-1-1-7-does-not-work-in-hosted-environment", "title": "NReco.PdfGenerator 1.1.7 does not work in hosted environment", "body": "<p>I have invested some hours in creating a set of reports to be generated by PdfCreator. I liked the idea to define the content in HTML and then generate it into PDF files that can be used in both WPF client and MVC site.</p>\n\n<p>It works excellent locally. But when publishing the website to hosted environment the PDF generation suddenly crashes ... Why!!?</p>\n\n<p>The error output on the webpage is not very helpful:</p>\n\n<pre><code>(exit code: -1073741701)\n\nDescription: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. \n\nException Details: NReco.PdfGenerator.WkHtmlToPdfException: (exit code: -1073741701)\n\nSource Error: \n\nAn unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.\n\nStack Trace: \n\n\n[WkHtmlToPdfException:  (exit code: -1073741701)]\n   NReco.PdfGenerator.HtmlToPdfConverter.CheckExitCode(Int32 exitCode, String lastErrLine, String outputFilePath) +123\n   NReco.PdfGenerator.HtmlToPdfConverter.GeneratePdfInternal(String[] htmlFiles, Byte[] inputBytes, String coverHtml, String outputPdfFilePath, Stream outputStream) +2481\n\n[Exception: Cannot generate PDF:  (exit code: -1073741701)]\n   NReco.PdfGenerator.HtmlToPdfConverter.GeneratePdfInternal(String[] htmlFiles, Byte[] inputBytes, String coverHtml, String outputPdfFilePath, Stream outputStream) +2819\n   NReco.PdfGenerator.HtmlToPdfConverter.GeneratePdf(String htmlContent, String coverHtml, Stream output) +87\n   NReco.PdfGenerator.HtmlToPdfConverter.GeneratePdf(String htmlContent, String coverHtml) +42\n   SongService.Report.DomainServices.ReportCompiler.GeneratePdf(String templateName, T model) +704\n   SongServiceWeb.Controllers.PresentationController.GetReport(Guid presentationId) +261\n   lambda_method(Closure , ControllerBase , Object[] ) +122\n   System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +14\n   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +156\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +27\n   System.Web.Mvc.Async.AsyncControllerActionInvoker.&lt;BeginInvokeSynchronousActionMethod&gt;b__39(IAsyncResult asyncResult, ActionInvocation innerInvokeState) +22\n   System.Web.Mvc.Async.WrappedAsyncResult`2.CallEndDelegate(IAsyncResult asyncResult) +29\n   System.Web.Mvc.Async.WrappedAsyncResultBase`1.End() +49\n   System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult) +32\n   System.Web.Mvc.Async.AsyncInvocationWithFilters.&lt;InvokeActionMethodFilterAsynchronouslyRecursive&gt;b__3d() +50\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass46.&lt;InvokeActionMethodFilterAsynchronouslyRecursive&gt;b__3f() +225\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass33.&lt;BeginInvokeActionMethodWithFilters&gt;b__32(IAsyncResult asyncResult) +10\n   System.Web.Mvc.Async.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult) +10\n   System.Web.Mvc.Async.WrappedAsyncResultBase`1.End() +49\n   System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult) +34\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass2b.&lt;BeginInvokeAction&gt;b__1c() +26\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass21.&lt;BeginInvokeAction&gt;b__1e(IAsyncResult asyncResult) +100\n   System.Web.Mvc.Async.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult) +10\n   System.Web.Mvc.Async.WrappedAsyncResultBase`1.End() +49\n   System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeAction(IAsyncResult asyncResult) +27\n   System.Web.Mvc.Controller.&lt;BeginExecuteCore&gt;b__1d(IAsyncResult asyncResult, ExecuteCoreState innerState) +13\n   System.Web.Mvc.Async.WrappedAsyncVoid`1.CallEndDelegate(IAsyncResult asyncResult) +36\n   System.Web.Mvc.Async.WrappedAsyncResultBase`1.End() +54\n   System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +39\n   System.Web.Mvc.Controller.&lt;BeginExecute&gt;b__15(IAsyncResult asyncResult, Controller controller) +12\n   System.Web.Mvc.Async.WrappedAsyncVoid`1.CallEndDelegate(IAsyncResult asyncResult) +28\n   System.Web.Mvc.Async.WrappedAsyncResultBase`1.End() +54\n   System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +29\n   System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.EndExecute(IAsyncResult asyncResult) +10\n   System.Web.Mvc.MvcHandler.&lt;BeginProcessRequest&gt;b__5(IAsyncResult asyncResult, ProcessRequestState innerState) +21\n   System.Web.Mvc.Async.WrappedAsyncVoid`1.CallEndDelegate(IAsyncResult asyncResult) +36\n   System.Web.Mvc.Async.WrappedAsyncResultBase`1.End() +54\n   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +31\n   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9\n   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +9651796\n   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +155\n</code></pre>\n\n<p>This question had an interesting suggestion: <a href=\"https://stackoverflow.com/questions/29795885/nreco-pdfgenerator-in-asp-net-stoped-working-on-server\">NReco.PdfGenerator in ASP.NET stoped working on server</a></p>\n\n<p>In the version history of NReco.PdfGenerator it says that 1.1.6 had a new deployment that is dependant upon C++ package. </p>\n\n<p>Quote from Nuget: \nv.1.1.6 changes: WkHtmlToPdf tool upgraded to version 0.12.2.1 (released January 19, 2015). NOTE: this version of wkhtmltopdf requires Visual C++ Redistributable package for VS 2013 (x86). WkHtmlToPdf tool upgraded to version 0.12.2.1 (released January 19, 2015). NOTE: this version of wkhtmltopdf requires Visual C++ Redistributable package for VS 2013 (x86). </p>\n\n<p>Even if my error was different I tried to add the missing files. I included msvcp120.dll and msvcr120.dll but it made no difference. Just to be sure I added vccorlib120.dll and wkhtmltopdf.exe as well. Still no difference.</p>\n\n<p>My next idea was that I needed to point out a temporary directory with write permission, that could be used during internal work. But I don't find any reference to that in the documentation.</p>\n\n<p>EDIT:</p>\n\n<p>I found a property on HtmlToPdfConverter named TempFilesPath. That looked really promising! So I quickly created a directory and set needed write permission.</p>\n\n<pre><code>converter.TempFilesPath = HttpContext.Server.MapPath(@\"~/_temp\");\n</code></pre>\n\n<p>I verified that this directory is readable and writable from code on host. But the error from PdfCreator is still the same ...</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1440615385, "post_id": 32234470, "comment_id": 52351462, "body": "I&#39;m going to guess that opencv internally stores the data in the format you are looking for... have you done a <code>&amp;edges.at(y, x)[ compare address of all 3 values here? ]</code> to see where their addresses are? If you tell opencv to store them as a 32-bit value (8 bits per channel with an alpha value) you might be able to do a whole-sale memcpy from the data pointer in the opencv Mat."}, {"owner": {"reputation": 90163, "user_id": 10897, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/csXHX.png?s=128&g=1", "display_name": "Martin Beckett", "link": "https://stackoverflow.com/users/10897/martin-beckett"}, "edited": false, "score": 0, "creation_date": 1440615868, "post_id": 32234470, "comment_id": 52351728, "body": "- sorry quick answer was a placeholder until I found the links to the online docs. We might want to not be quite so quick to moderate answers"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "reply_to_user": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1440616373, "post_id": 32234470, "comment_id": 52352038, "body": "I agree with @RyanP, but don&#39;t know if it&#39;s the fastest way (don&#39;t have time to test it right now). However, you can speed up your code simply saving a const reference to a Vec3b,and using at&lt;&gt; just once per loop. Or even better use raw pointers. I&#39;ll add a complete answer asap."}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1440616713, "post_id": 32234470, "comment_id": 52352247, "body": "Also, you&#39;ll get a good speedup inverting for loops, i.e. first on rows, second on colums"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "reply_to_user": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1440616961, "post_id": 32234470, "comment_id": 52352371, "body": "@RyanP on second toughts, you should <b>never</b> do a memcpy, unless you are sure that matrix IsContinuous, or you get undesired results due to matrix padding (step)"}, {"owner": {"reputation": 3, "user_id": 5269896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c436affd642ecd41df25326dae331d6?s=128&d=identicon&r=PG&f=1", "display_name": "Sveto", "link": "https://stackoverflow.com/users/5269896/sveto"}, "reply_to_user": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1440617728, "post_id": 32234470, "comment_id": 52352813, "body": "Thank you all for  quick responses. @RyanP this is nice idea, I&#39;ll try it. I am taking frames from web camera and then I need to convert frame to  the format above. After that, I need  to copy frame to the /dev/fb0 (framebuffer sends frames to VGA display), so it needs to be fast."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1440621983, "post_id": 32234470, "comment_id": 52355074, "body": "shouldnt it be <code>((edges.at&lt;Vec3b&gt;(y, x)[0])&lt;&lt;24)|                     ((edges.at&lt;Vec3b&gt;(y, x)[1])&lt;&lt;16)|                     ((edges.at&lt;Vec3b&gt;(y, x)[2])&lt;&lt;8)</code> ??"}, {"owner": {"reputation": 3, "user_id": 5269896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c436affd642ecd41df25326dae331d6?s=128&d=identicon&r=PG&f=1", "display_name": "Sveto", "link": "https://stackoverflow.com/users/5269896/sveto"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1440622592, "post_id": 32234470, "comment_id": 52355366, "body": "@Micka It all depends how you setup your framebuffer."}], "answers": [{"comments": [{"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1440616120, "post_id": 32234693, "comment_id": 52351867, "body": "The result of doing a split and a merge should be to take interleaved data, split it out into 3 different channels, and then interleave it again... He might want to verify that the data he has isn&#39;t already what he needs. If he&#39;s storing it in a Mat that is of type 8UC4, and the channels are in the correct order that he needs them in, he already has what he needs, he just needs to memcpy the data from the cv::Mat data pointer."}, {"owner": {"reputation": 90163, "user_id": 10897, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/csXHX.png?s=128&g=1", "display_name": "Martin Beckett", "link": "https://stackoverflow.com/users/10897/martin-beckett"}, "reply_to_user": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1440616337, "post_id": 32234693, "comment_id": 52352007, "body": "@RyanP - I read it that he had an RGB image and  needed to pad it to an RGBA (with the A ignored). There is no way to do this without a lot of copy but at least the split/merge will do it efficently"}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1440616525, "post_id": 32234693, "comment_id": 52352135, "body": "True he might have to do that. However, if he has the ability to change his code to use an 8UC4 data type (assuming he doesn&#39;t already) instead of 8UC3 it might be easier/faster to change it to do so and memcpy instead of split and merge. Though the author needs to pipe up and say what he has and what he can do to answer that."}], "tags": [], "owner": {"reputation": 90163, "user_id": 10897, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/csXHX.png?s=128&g=1", "display_name": "Martin Beckett", "link": "https://stackoverflow.com/users/10897/martin-beckett"}, "is_accepted": false, "score": 0, "last_activity_date": 1440615817, "creation_date": 1440615817, "answer_id": 32234693, "question_id": 32234470, "link": "https://stackoverflow.com/questions/32234470/opencv-concatenate-3-channels-to-32-bit-value/32234693#32234693", "title": "OpenCV concatenate 3 channels to 32-bit value?", "body": "<p>Use the <a href=\"http://docs.opencv.org/modules/core/doc/operations_on_arrays.html?highlight=split\" rel=\"nofollow\">split</a> and <a href=\"http://docs.opencv.org/modules/core/doc/operations_on_arrays.html?highlight=merge\" rel=\"nofollow\">merge</a> channels functions.</p>\n\n<p>The look complicated but are a lot easier than doing it a pixel at a time.</p>\n\n<p>See stackoverflow.com/questions/14582082/merging-channels-in-opencv for sample</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 5269896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c436affd642ecd41df25326dae331d6?s=128&d=identicon&r=PG&f=1", "display_name": "Sveto", "link": "https://stackoverflow.com/users/5269896/sveto"}, "edited": false, "score": 0, "creation_date": 1440661029, "post_id": 32238706, "comment_id": 52367707, "body": "This is great. Thanks a lot @Miki."}], "tags": [], "owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "is_accepted": true, "score": 0, "last_activity_date": 1440641152, "last_edit_date": 1440641152, "creation_date": 1440634502, "answer_id": 32238706, "question_id": 32234470, "link": "https://stackoverflow.com/questions/32234470/opencv-concatenate-3-channels-to-32-bit-value/32238706#32238706", "title": "OpenCV concatenate 3 channels to 32-bit value?", "body": "<p>Tried some variants:</p>\n\n<ul>\n<li><strong>Method 0a</strong> : as in the question, @Sveva</li>\n<li><strong>Method 0b</strong> : as in the question, with for loops inverted, @Miki</li>\n<li><strong>Method 1</strong>  : querying value from mat only once using indices, @Miki</li>\n<li><strong>Method 2</strong>  : querying value from mat using pointers, @Miki</li>\n<li><strong>Method 3</strong>  : converting to BGRA and <code>memcpy</code>, @RyanP NOTE: works only if mat <code>isContinuos()</code>.</li>\n</ul>\n\n<p><strong>Results</strong> (time in milliseconds)</p>\n\n<pre><code>isContinuos? 1\nMethod 0a: 113.704              0x1020300\nMethod 0b: 20.0975              0x1020300\nMethod 1: 20.1939               0x1020300\nMethod 2: 15.7434               0x1020300\nMethod 3: 22.5592               0xff030201\n</code></pre>\n\n<p><strong>Considerations</strong></p>\n\n<p>Inverting the for loops has a major speedup, because OpenCV <code>Mat</code> are row-major ordered.\n<strong>The fastest method is Method 2, using pointers.</strong> Method 1 is slightly slower, but probably more readable. \nMethod 3 is quite fast, but a single <code>memcpy</code> works only if the matrix <code>isContinuos()</code>. If not the case, you need to loop on each row, and <code>memcpy</code> each row, and this is going to be (only a little) slower.</p>\n\n<p><strong>NOTE</strong></p>\n\n<p>OpenCV stores BGR values (not RGB). Methods 0a, 0b, 1 and 2 output the values as: <code>B G R 0</code>. You just need to swap the index 0 and 2 to get <code>R G B 0</code>. For Method 3, you need to use <code>cvtColor</code> with parameter <code>COLOR_BGR2RGBA</code>.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>#include &lt;opencv2\\opencv.hpp&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\nusing namespace std;\nusing namespace cv;\n\nint main()\n{\n    // Test Image\n    Mat3b img(2000, 3000, Vec3b(1, 2, 3));\n    cout &lt;&lt; \"isContinuos? \" &lt;&lt; img.isContinuous() &lt;&lt; endl;\n\n    // Method 0a: method from question. Credits to @Sveto\n    double tic0a = double(getTickCount());\n    vector&lt;int&gt; v0a(img.rows * img.cols, 0);\n    for (int c = 0; c &lt; img.cols; ++c)\n    {\n        for (int r = 0; r &lt; img.rows; ++r)\n        {\n            v0a[r*img.cols + c] = ((img.at&lt;Vec3b&gt;(r, c)[0]) &lt;&lt; 24) |\n                ((img.at&lt;Vec3b&gt;(r, c)[1]) &lt;&lt; 16) |\n                (img.at&lt;Vec3b&gt;(r, c)[2]) &lt;&lt; 8;\n        }\n    }\n    double toc0a = (double(getTickCount()) - tic0a) * 1000. / getTickFrequency();\n    cout &lt;&lt; \"Method 0a: \" &lt;&lt; toc0a &lt;&lt; \"\\t\\t\";;\n    cout &lt;&lt; \"0x\" &lt;&lt; hex &lt;&lt; v0a[0] &lt;&lt; endl;\n\n    // Method 0b: method from question, loops inverted\n    double tic0b = double(getTickCount());\n    vector&lt;int&gt; v0b(img.rows * img.cols, 0);\n    for (int r = 0; r &lt; img.rows; ++r)\n    {\n        for (int c = 0; c &lt; img.cols; ++c)\n        {\n            v0b[r*img.cols + c] = ((img.at&lt;Vec3b&gt;(r, c)[0]) &lt;&lt; 24) |\n                ((img.at&lt;Vec3b&gt;(r, c)[1]) &lt;&lt; 16) |\n                (img.at&lt;Vec3b&gt;(r, c)[2]) &lt;&lt; 8;\n        }\n    }\n    double toc0b = (double(getTickCount()) - tic0b) * 1000. / getTickFrequency();\n    cout &lt;&lt; \"Method 0b: \" &lt;&lt; toc0b &lt;&lt; \"\\t\\t\";\n    cout &lt;&lt; \"0x\" &lt;&lt; hex &lt;&lt; v0b[0] &lt;&lt; endl;\n\n\n    // Method 1: custom loop with indices\n    double tic1 = double(getTickCount());\n    vector&lt;int&gt; v1(img.rows * img.cols, 0);\n    for (int r = 0; r &lt; img.rows; ++r)\n    {\n        for (int c = 0; c &lt; img.cols; ++c)\n        {\n            const Vec3b&amp; b = img(r, c);\n            v1[r*img.cols + c] = (b[0] &lt;&lt; 24) | (b[1] &lt;&lt; 16) | (b[2] &lt;&lt; 8);\n        }\n    }\n    double toc1 = (double(getTickCount()) - tic1) * 1000. / getTickFrequency();\n    cout &lt;&lt; \"Method 1: \" &lt;&lt; toc1 &lt;&lt; \"\\t\\t\";\n    cout &lt;&lt; \"0x\" &lt;&lt; hex &lt;&lt; v1[0] &lt;&lt; endl;\n\n    // Method 2: custom loop with pointers\n    double tic2 = double(getTickCount());\n    vector&lt;int&gt; v2(img.rows * img.cols, 0);\n    for (int r = 0; r &lt; img.rows; ++r)\n    {\n        uchar* p = img.ptr&lt;uchar&gt;(r);\n        for (int c = 0; c &lt; img.cols; ++c)\n        {\n            int val = ((*p) &lt;&lt; 24); ++p;\n            val |= ((*p) &lt;&lt; 16); ++p;\n            val |= ((*p) &lt;&lt; 8); ++p;\n            v2[r*img.cols + c] = val;\n        }\n    }\n    double toc2 = (double(getTickCount()) - tic2) * 1000. / getTickFrequency();\n    cout &lt;&lt; \"Method 2: \" &lt;&lt; toc2 &lt;&lt; \"\\t\\t\";\n    cout &lt;&lt; \"0x\" &lt;&lt; hex &lt;&lt; v2[0] &lt;&lt; endl;\n\n\n    // Method 3: using BGRA conversion. Credits @RyanP\n    // NOTE: works only if img.isContinuos()\n    double tic3 = double(getTickCount());\n    Mat4b rgba3;\n    cvtColor(img, rgba3, COLOR_BGR2BGRA);\n    vector&lt;int&gt; v3(img.rows * img.cols, 0);\n    memcpy(v3.data(), rgba3.data, img.rows * img.cols * sizeof(int));\n\n    double toc3 = (double(getTickCount()) - tic3) * 1000. / getTickFrequency();\n    cout &lt;&lt; \"Method 3: \" &lt;&lt; toc3 &lt;&lt; \"\\t\\t\";\n    cout &lt;&lt; \"0x\" &lt;&lt; hex &lt;&lt; v3[0] &lt;&lt; endl;\n\n    int dummy;\n    cin &gt;&gt; dummy;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5269896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c436affd642ecd41df25326dae331d6?s=128&d=identicon&r=PG&f=1", "display_name": "Sveto", "link": "https://stackoverflow.com/users/5269896/sveto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 902, "favorite_count": 0, "accepted_answer_id": 32238706, "answer_count": 2, "score": 0, "last_activity_date": 1440641152, "creation_date": 1440615036, "last_edit_date": 1440615385, "question_id": 32234470, "link": "https://stackoverflow.com/questions/32234470/opencv-concatenate-3-channels-to-32-bit-value", "title": "OpenCV concatenate 3 channels to 32-bit value?", "body": "<p>I am looking for the fastest way of converting 3 channels RGB frame to 1 channel picture in openCV. But I need to concatenate all three colors (R, G, B) of the pixel into one 32-bit value. </p>\n\n<p>Every pixel should consist for an example:</p>\n\n<blockquote>\n  <p>pixel[0:31]= 01001001 11110000 11111111 00000000</p>\n</blockquote>\n\n<p>The first 8 bits are RED color from the frame (at the same position in frame), second 8 bits are from green color and third 8 bits are from blue, last 8 bits are not important. </p>\n\n<p>I tried this: </p>\n\n<pre><code>for (y = 100; y &lt; 500; y++){\n     for (x = 100; x &lt; 500; x++) {\n        int pixel =((edges.at&lt;Vec3b&gt;(y, x)[0])&lt;&lt;16)|\n                    ((edges.at&lt;Vec3b&gt;(y, x)[1])&lt;&lt;8)|\n                    (edges.at&lt;Vec3b&gt;(y, x)[2]);\n}}\n</code></pre>\n\n<p>But this is to slow, because I need to go through every pixel in the frame.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1440615016, "post_id": 32234454, "comment_id": 52351263, "body": "Does the compiler not give you a <a href=\"http://coliru.stacked-crooked.com/a/861e29c98a27fbca\" rel=\"nofollow noreferrer\">warning</a>?"}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 4, "creation_date": 1440615078, "post_id": 32234454, "comment_id": 52351298, "body": "It&#39;s a vector, you want to iterate, in reverse. Why not use a reverse iterator then?"}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 2, "last_activity_date": 1440615066, "creation_date": 1440615066, "answer_id": 32234483, "question_id": 32234454, "link": "https://stackoverflow.com/questions/32234454/why-is-my-for-loop-crashing-on-a-vector-of-doubles/32234483#32234483", "title": "Why is my for loop crashing on a vector of doubles?", "body": "<p>The variable i will be an unsigned type.</p>\n\n<p>That can never be less than zero.</p>\n\n<p>Eventually you will access an element outside the vector as i will wrap around to the largest possible unsigned value rather than going negative</p>\n"}, {"comments": [{"owner": {"reputation": 1328, "user_id": 1020591, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/02ee2872e754aab93b82624ae58fe4d7?s=128&d=identicon&r=PG", "display_name": "RippeR", "link": "https://stackoverflow.com/users/1020591/ripper"}, "edited": false, "score": 0, "creation_date": 1440615396, "post_id": 32234495, "comment_id": 52351467, "body": "I&#39;ve edited answer, last line. vector::size_type is typedef of: <code>an unsigned integral type that can represent any non-negative value of difference_type</code>. It makes sense since size can&#39;t be less then 0, right?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1440615474, "post_id": 32234495, "comment_id": 52351508, "body": "The answer makes it sound like <code>unsigned int</code> specifically, not a choice of type."}, {"owner": {"reputation": 1328, "user_id": 1020591, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/02ee2872e754aab93b82624ae58fe4d7?s=128&d=identicon&r=PG", "display_name": "RippeR", "link": "https://stackoverflow.com/users/1020591/ripper"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1440615690, "post_id": 32234495, "comment_id": 52351634, "body": "@chris - right, i&#39;ve updated my answer to note that unsigned int will be usually on major platform, on others it can be other unsigned type."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1440616458, "post_id": 32234495, "comment_id": 52352097, "body": "If you don&#39;t mind me asking how would you handle reversely iterating through a vector?"}, {"owner": {"reputation": 1328, "user_id": 1020591, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/02ee2872e754aab93b82624ae58fe4d7?s=128&d=identicon&r=PG", "display_name": "RippeR", "link": "https://stackoverflow.com/users/1020591/ripper"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1440620428, "post_id": 32234495, "comment_id": 52354205, "body": "@NathanOliver - There are many ways, your&#39;s (reverse iterators) is most &#39;clean&#39; and has least chance of introducing bugs. So if i were to write good quality code to last long time - i&#39;d use reverse iterators. If i were writing small app which had to work fast (and small source) - i&#39;d cast ::size() to signed type or make some trick. Since C+11 and auto it&#39;s easy to use begin(), end() etc. but before it was so slappy, so not-elegant code writing all those <code>::iterator</code> or <code>::const_iterator</code>s... Now i&#39;d recommend reverse iterator since it&#39;s best (unless performance is needed)."}], "tags": [], "owner": {"reputation": 1328, "user_id": 1020591, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/02ee2872e754aab93b82624ae58fe4d7?s=128&d=identicon&r=PG", "display_name": "RippeR", "link": "https://stackoverflow.com/users/1020591/ripper"}, "is_accepted": false, "score": 5, "last_activity_date": 1440615643, "last_edit_date": 1440615643, "creation_date": 1440615114, "answer_id": 32234495, "question_id": 32234454, "link": "https://stackoverflow.com/questions/32234454/why-is-my-for-loop-crashing-on-a-vector-of-doubles/32234495#32234495", "title": "Why is my for loop crashing on a vector of doubles?", "body": "<pre><code>for (auto i = v.size() - 1; i &gt;=0; --i);\n</code></pre>\n\n<p>Look at vector::size() method - it returns usually <strong>unsigned int</strong> (on strange platforms it might be other unsigned type)! So your <code>i</code> variable will have unsigned type.</p>\n\n<p>When your loop will come to step <code>i == 0</code> it will decrement it and <code>i</code> will have value <code>2^32 - 1 == UNSIGNED_INT_MAX</code> (or other positive value if you work on strange platform - see vector::size_type on your platform to see underlying type). So it will never be less then 0, it will never stop your loop. I guess when it turns so big it crashes becouse it goes out of range, but i don't see whole code to be sure.</p>\n\n<p>See <a href=\"http://www.cplusplus.com/reference/vector/vector/\" rel=\"nofollow\">here</a> - look for <code>size_type</code> typedef - it says its unsigned type.</p>\n\n<p>You might want to use reverse iterators (see @NathanOliver's response), though i'm not very fond of them in simple loops.</p>\n"}, {"tags": [], "owner": {"reputation": 773, "user_id": 5265558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a0n94.jpg?s=128&g=1", "display_name": "Perette", "link": "https://stackoverflow.com/users/5265558/perette"}, "is_accepted": false, "score": 1, "last_activity_date": 1440615412, "creation_date": 1440615412, "answer_id": 32234600, "question_id": 32234454, "link": "https://stackoverflow.com/questions/32234454/why-is-my-for-loop-crashing-on-a-vector-of-doubles/32234600#32234600", "title": "Why is my for loop crashing on a vector of doubles?", "body": "<p>What Bathsheba said: the auto type is an unsigned.  So decrementing 0 becomes some large positive number, which is >= 0 so the loop continues, but that value is outside the vector's range and causes the crash.</p>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 3, "last_activity_date": 1440615637, "creation_date": 1440615637, "answer_id": 32234656, "question_id": 32234454, "link": "https://stackoverflow.com/questions/32234454/why-is-my-for-loop-crashing-on-a-vector-of-doubles/32234656#32234656", "title": "Why is my for loop crashing on a vector of doubles?", "body": "<p>Since <code>i</code> is unsigned it will never be less than 0.  It will wrap around to the maximum value that it can hold instead.</p>\n\n<p>If you want to iterate through a vector backwards then you should use a <a href=\"http://en.cppreference.com/w/cpp/iterator/reverse_iterator\" rel=\"nofollow\"><code>reverse_iterator</code></a></p>\n\n<pre><code>std::vector&lt;int&gt; foo = {1,2,3,4,5,6,7,8,9};\nfor (auto it = foo.rbegin(); it != foo.rend(); ++it)\n    std::cout &lt;&lt; *it &lt;&lt; \" \";\n</code></pre>\n\n<p>This will output</p>\n\n<pre><code>9 8 7 6 5 4 3 2 1 \n</code></pre>\n"}], "owner": {"reputation": 7476, "user_id": 3415258, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/100007912508550/picture?type=large", "display_name": "P45 Imminent", "link": "https://stackoverflow.com/users/3415258/p45-imminent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 0, "accepted_answer_id": 32234483, "answer_count": 4, "score": 0, "last_activity_date": 1440615976, "creation_date": 1440614975, "last_edit_date": 1440615976, "question_id": 32234454, "link": "https://stackoverflow.com/questions/32234454/why-is-my-for-loop-crashing-on-a-vector-of-doubles", "title": "Why is my for loop crashing on a vector of doubles?", "body": "<p>This for loop always crashes immediately:</p>\n\n<pre><code>for (auto i = v.size() - 1; i &gt;=0; --i);\n</code></pre>\n\n<p>Obviously I have a whole load of code in the loop, and v is a vector of doubles. I'm trying to iterate over them in reverse order.</p>\n\n<p>What is going on here?</p>\n"}, {"tags": ["c++", "templates", "c++11", "metaprogramming"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1440615111, "post_id": 32234432, "comment_id": 52351314, "body": "In your example with <code>Foo</code>, you&#39;re not passing the template itself but an instanciation thereof. <code>template &lt;class... Ts&gt; struct Foo;</code> is enough for this to compile."}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 4, "last_activity_date": 1440615180, "last_edit_date": 1495540288, "creation_date": 1440615180, "answer_id": 32234520, "question_id": 32234432, "link": "https://stackoverflow.com/questions/32234432/variadic-templates-of-variadic-templates-class-in-c/32234520#32234520", "title": "Variadic templates of Variadic templates class in c++", "body": "<p>You simply cannot write that, syntactically. What would <code>Ts</code> hold in that situation? It would be different for each type in <code>Tuples</code> so it wouldn't really be usable. </p>\n\n<p>What you can do instead is take advantage of Columbo's <a href=\"https://stackoverflow.com/a/28253503/2069064\"><code>bool_pack</code></a> trick:</p>\n\n<pre><code>template &lt;bool...&gt; struct bool_pack;\n\ntemplate &lt;bool... v&gt;\nusing all_true = std::is_same&lt;bool_pack&lt;true, v...&gt;, bool_pack&lt;v..., true&gt;&gt;;\n</code></pre>\n\n<p>To simply <code>static_assert</code> that all the <code>Tuples</code> are, in fact, <code>tuple</code>s and then have <code>VariadicTuples</code> be a simple variadic class template:</p>\n\n<pre><code>template &lt;typename &gt; struct is_a_tuple : std::false_type { };\ntemplate &lt;typename... T&gt; struct is_a_tuple&lt;tuple&lt;T...&gt;&gt; : std::true_type { };\n\ntemplate &lt;typename... Tuples&gt;\nstruct VariadicTuples {\n    static_assert(all_true&lt;is_a_tuple&lt;Tuples&gt;::value...&gt;::value, \"!\");\n};\n</code></pre>\n"}], "owner": {"reputation": 2654, "user_id": 1646996, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/e1927a513875cef7a1c2877fdb6b45ae?s=128&d=identicon&r=PG", "display_name": "qqibrow", "link": "https://stackoverflow.com/users/1646996/qqibrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 32234520, "answer_count": 1, "score": 3, "last_activity_date": 1440615180, "creation_date": 1440614902, "question_id": 32234432, "link": "https://stackoverflow.com/questions/32234432/variadic-templates-of-variadic-templates-class-in-c", "title": "Variadic templates of Variadic templates class in c++", "body": "<p>given Variadic templates data structure as below ( code from <a href=\"http://eli.thegreenplace.net/2014/variadic-templates-in-c/\" rel=\"nofollow\">Eli Bendersky's website</a>):</p>\n\n<pre><code>template &lt;class... Ts&gt; struct tuple {};\n\ntemplate &lt;class T, class... Ts&gt;\nstruct tuple&lt;T, Ts...&gt; : tuple&lt;Ts...&gt; {\n  tuple(T t, Ts... ts) : tuple&lt;Ts...&gt;(ts...), tail(t) {}\n\n  T tail;\n};\n</code></pre>\n\n<p>we are able to define something like </p>\n\n<pre><code>tuple&lt;double, uint64_t, const char*&gt; t1(12.2, 42, \"big\");\n</code></pre>\n\n<p>Then how to define a template structure that could accept following signature?</p>\n\n<pre><code>Foo&lt;tuple&lt;int,double&gt;, tuple&lt;double,int,long&gt; ...,  tuple&lt;std::string&gt;&gt; foo;\n</code></pre>\n\n<p>I think it would be like this:</p>\n\n<pre><code>template&lt;tuple&lt;class... Ts&gt;... Tuples&gt;\nstruct VariadicTuples {};\n</code></pre>\n\n<p>but it cannot compile. is that because the class in the Variadic templates cannot be Variadic templates? If so, How to make this work?</p>\n"}, {"tags": ["c++", "string", "substring"], "comments": [{"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1440615664, "post_id": 32234286, "comment_id": 52351622, "body": "This is like a puzzle.  The variable names convey no meaning and are really hard to follow.  There are almost zero comments to describe the approach you are taking.  I think if you clear up these issues, you won&#39;t need any help -- your problem will likely become obvious and the solution easy."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1440686756, "post_id": 32234286, "comment_id": 52385452, "body": "Don&#39;t edit your question with a &quot;fix&quot; that makes it go away! Instead, if no anwers answer your question and you do find &quot;an answer&quot;, post that as an Answer!"}, {"owner": {"reputation": 1, "user_id": 5132507, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207217406657805/picture?type=large", "display_name": "Kamlesh Kumar Gahir", "link": "https://stackoverflow.com/users/5132507/kamlesh-kumar-gahir"}, "edited": false, "score": 0, "creation_date": 1440693441, "post_id": 32234286, "comment_id": 52389993, "body": "Sorry, I would keep that in mind."}], "answers": [{"tags": [], "owner": {"reputation": 1089, "user_id": 294043, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c0d530dfc35bff895fd7a2710cb79126?s=128&d=identicon&r=PG", "display_name": "DeveloperInToronto", "link": "https://stackoverflow.com/users/294043/developerintoronto"}, "is_accepted": false, "score": 0, "last_activity_date": 1440620438, "last_edit_date": 1440620438, "creation_date": 1440617344, "answer_id": 32235154, "question_id": 32234286, "link": "https://stackoverflow.com/questions/32234286/finding-sub-string-in-a-string-while-both-of-them-are-user-inputs/32235154#32235154", "title": "Finding sub-string in a string while both of them are user inputs", "body": "<p>As donjuedo said, this code is very unreadable. Things that I see quickly is that a[t4] is problematic because there is no guarantee that t4 is going to be initialized before that; you don't need to walk backwards from the end of your substring (t1); and you don't need to use indexing with integers to walk around in the strings, you can move pointers around.</p>\n\n<p>The code should be something as simple as:\n</p>\n\n<pre><code>char* p1 = (char*)str; // the string to be searched\nint substrIndex = 0;\n\nwhile (*p1) {\n   char* p1Begin = p1;                 // keep the pos of start of search\n   char* p2 = (char*)target;           // pointer for the substring\n\n   while (*p1 &amp;&amp; *p2 &amp;&amp; *p1 == *p2) {  // as long as within the boundaries, chars equal\n      p1++;\n      p2++;\n   }\n\n   if (!*p2)  // if all chars equal, passed end of target - success\n      cout &lt;&lt; substrIndex &lt;&lt; endl;\n\n   p1 = p1Begin + 1;\n   substrIndex++;\n}\n</code></pre>\n\n<p>I didn't compile, so not 100% sure it will run bug free; but you get the idea.</p>\n"}], "owner": {"reputation": 1, "user_id": 5132507, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207217406657805/picture?type=large", "display_name": "Kamlesh Kumar Gahir", "link": "https://stackoverflow.com/users/5132507/kamlesh-kumar-gahir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1440686386, "creation_date": 1440614439, "last_edit_date": 1440686386, "question_id": 32234286, "link": "https://stackoverflow.com/questions/32234286/finding-sub-string-in-a-string-while-both-of-them-are-user-inputs", "title": "Finding sub-string in a string while both of them are user inputs", "body": "<p>I have written this program to find sub-string in a string while both of them are user inputs.This is working fine albeit approach may seems amateur to quite a few here.My problem is that when I put the string \"a\" and \"b\" as the following:\"I am kamlesh\" and \"am\" respectively. \nI am NOT GETTING any output while omitting \"a[t4]==' '\" in the last if statement giving me output 3 and 7.\nPlease suggest some ways to rectify and getting the output as 3 only. \nPost edit:Working fine now.</p>\n\n<pre><code>/* #include &lt;iostream&gt;\n#include&lt;cstdio&gt;\n#include&lt;cstring&gt;\n\nusing namespace std;\nvoid substring(char *a,char *b);\n\nint main()\n{\nchar a[80],b[80];\ngets(a);\ngets(b);\nsubstring(a,b);\n\nreturn 0;\n}\nvoid substring(char *a,char *b)\n{\nint c,d;\nc=strlen(a);\nd=strlen(b);\nfor(int t=0;t&lt;c;t++)\n{\n    if(a[t] &amp;&amp; a[t]==*b)\n    {\n        int t1,t2,t3,t4;\n        t2=1;\n        t1=d-1;\n        t3=t+1;\n        while(t1 &amp;&amp; a[t3]==b[t2] )\n        {\n        t1--;\n        t3++;\n        t2++;\n        t4=t2;\n        }\n\n        if(!t1 &amp;&amp; a[t4]==' ') //to avoid showing \"am\" in kamlesh. \n            cout&lt;&lt;t+1&lt;&lt;endl;\n      }\n   }\n } */\n\n#include &lt;iostream&gt;\n#include&lt;cstdio&gt;\n#include&lt;cstring&gt;\n\nusing namespace std;\nvoid substring(char *a,char *b);\n\n int main()\n  {\nchar a[80],b[80];\nint s;\ngets(a);\ngets(b);\nsubstring(a,b);\n\nreturn 0;\n}\nvoid substring(char *a,char *b)\n{\nchar *s1,*s2;\n\nfor(int t=0;a[t];t++)\n{\n   s1=&amp;a[t];\n   s2=b;\n    while(*s2 &amp;&amp; *s2==*s1)\n    {\n        s1++;\n        s2++;\n    }\n    if(*s2 &amp;&amp; *s1==' ')\n       cout&lt;&lt;t;\n   }\n\n  }\n</code></pre>\n"}, {"tags": ["c++", "getch"], "comments": [{"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1440614484, "post_id": 32234227, "comment_id": 52350940, "body": "<a href=\"https://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Operator_precedence\" rel=\"nofollow noreferrer\">Operator precedence</a>"}, {"owner": {"reputation": 1592, "user_id": 618951, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b867e8993ce4bf8205315e4a2e45e418?s=128&d=identicon&r=PG", "display_name": "RisingSun", "link": "https://stackoverflow.com/users/618951/risingsun"}, "edited": false, "score": 0, "creation_date": 1440614528, "post_id": 32234227, "comment_id": 52350972, "body": "general rule of thumb, never put assignment inside conditional"}], "answers": [{"comments": [{"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1440614596, "post_id": 32234283, "comment_id": 52351023, "body": "Another issue with the code is that he seems to be declaring <code>ch</code> as a <code>char</code>, whereas <code>getch(3)</code> returns <code>int</code>. This should be addressed, and I think it deserves to be mentioned."}, {"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "reply_to_user": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1440614686, "post_id": 32234283, "comment_id": 52351075, "body": "True. More of a concern if he were checking for EOF, but definitely bad practice."}], "tags": [], "owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "is_accepted": false, "score": 5, "last_activity_date": 1440614802, "last_edit_date": 1495535244, "creation_date": 1440614432, "answer_id": 32234283, "question_id": 32234227, "link": "https://stackoverflow.com/questions/32234227/getch-inside-while-loop-always-returns-1/32234283#32234283", "title": "getch() inside while loop always returns 1", "body": "<p>You're running afoul of <a href=\"https://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Operator_precedence\" rel=\"nofollow noreferrer\" title=\"C Operator Precedence\">operator precedence</a>. It's as if you had written:</p>\n\n<pre><code>while (ch = (getch() != 'q'))\n</code></pre>\n\n<p>Which will be <code>1</code> until a <code>q</code> is entered, at which point it will be <code>0</code>.</p>\n\n<p>You mean to say:</p>\n\n<pre><code>while ((ch = getch()) != 'q')\n</code></pre>\n\n<p>And, as <a href=\"https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves\"> Filipe Gon\u00e7alves</a> mentions, <code>ch</code> should be declared as an <code>int</code>, not <code>char</code> (<code>getch()</code> returns an <code>int</code>)</p>\n"}, {"tags": [], "owner": {"reputation": 1328, "user_id": 1020591, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/02ee2872e754aab93b82624ae58fe4d7?s=128&d=identicon&r=PG", "display_name": "RippeR", "link": "https://stackoverflow.com/users/1020591/ripper"}, "is_accepted": false, "score": 2, "last_activity_date": 1440614491, "creation_date": 1440614491, "answer_id": 32234300, "question_id": 32234227, "link": "https://stackoverflow.com/questions/32234227/getch-inside-while-loop-always-returns-1/32234300#32234300", "title": "getch() inside while loop always returns 1", "body": "<p>Try this, you had wrong order of operations. Either move assignment to right or add parenthesis.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;conio.h&gt;\n\nint main()\n{\n    char ch;\n    while ((ch = getch()) != 'q')\n    {\n        std::cout &lt;&lt; ch;\n    }\n}\n</code></pre>\n\n<p>Note that it's not best idea to declare variable in loop's conditional expression.</p>\n"}], "owner": {"reputation": 79, "user_id": 2955015, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e70f701b78bc6ebc42d9230c1d0c2b1d?s=128&d=identicon&r=PG&f=1", "display_name": "Shabrido", "link": "https://stackoverflow.com/users/2955015/shabrido"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3110, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1440615195, "creation_date": 1440614230, "question_id": 32234227, "link": "https://stackoverflow.com/questions/32234227/getch-inside-while-loop-always-returns-1", "title": "getch() inside while loop always returns 1", "body": "<p>I'm trying to use \"ch\" variable after I catch it with getch() function from expression inside a loop. I can't use it at all because it always returns the same char code (1 as int). I know I can just simply use while(1) and make working getch() from there, but it is considered bad practice and I wonder why it just doesn't work this way.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;conio.h&gt;\n\nint main()\n{\n    while (char ch = getch() != 'q')\n    {\n        std::cout &lt;&lt; ch;\n    }\n}\n</code></pre>\n\n<p>I'm using code::blocks 13.12 with GNU GCC Compiler</p>\n\n<p>by the way.. this doesn't work too</p>\n\n<pre><code>int main()\n{\n    char ch;\n    while (ch = getch() != 'q')\n    {\n        std::cout &lt;&lt; ch;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1440613427, "post_id": 32233771, "comment_id": 52350281, "body": "That cast is to make an otherwise-<code>const temp *</code> a <code>temp *</code>. It is also outright hideous."}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 16, "creation_date": 1440613450, "post_id": 32233771, "comment_id": 52350302, "body": "It means whoever wrote this code shouldn&#39;t be allowed to write code anymore."}, {"owner": {"reputation": 762, "user_id": 1987633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7cc5084e895540051a920e541ab9b8c?s=128&d=identicon&r=PG", "display_name": "Andre Kostur", "link": "https://stackoverflow.com/users/1987633/andre-kostur"}, "edited": false, "score": 0, "creation_date": 1440625256, "post_id": 32233771, "comment_id": 52356584, "body": "Technically (potentially) Undefined Behaviour.  If you had <code>const temp a; a.fun(4);</code>, then the line you quotes would be modifying an actually const variable.   The assignment to value2 is not because value2 has been declared as <code>mutable</code> (and doesn&#39;t need nasty C-style or const_cast to make it work...)"}], "answers": [{"comments": [{"owner": {"reputation": 567, "user_id": 3787809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a355d3f472cc7e89d22417be63f3b32a?s=128&d=identicon&r=PG&f=1", "display_name": "MaxDevelop", "link": "https://stackoverflow.com/users/3787809/maxdevelop"}, "edited": false, "score": 0, "creation_date": 1440614058, "post_id": 32234029, "comment_id": 52350702, "body": "const Foo f{};  you ment const Foo f();"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 567, "user_id": 3787809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a355d3f472cc7e89d22417be63f3b32a?s=128&d=identicon&r=PG&f=1", "display_name": "MaxDevelop", "link": "https://stackoverflow.com/users/3787809/maxdevelop"}, "edited": false, "score": 3, "creation_date": 1440614150, "post_id": 32234029, "comment_id": 52350754, "body": "@Saif Actually he definitely meant <code>{}</code> as if he&#39;d used <code>()</code> it&#39;d be a function declaration..."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 567, "user_id": 3787809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a355d3f472cc7e89d22417be63f3b32a?s=128&d=identicon&r=PG&f=1", "display_name": "MaxDevelop", "link": "https://stackoverflow.com/users/3787809/maxdevelop"}, "edited": false, "score": 1, "creation_date": 1440614400, "post_id": 32234029, "comment_id": 52350888, "body": "@Saif, <code>const Foo f{};</code> constructs a const- object. <code>const Foo f();</code> would declare a function <code>f</code> that takes no arguments and returns a <code>const Foo</code>."}, {"owner": {"reputation": 83, "user_id": 5269797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e7a925a533da85e39585cbb661979f2?s=128&d=identicon&r=PG&f=1", "display_name": "Phani", "link": "https://stackoverflow.com/users/5269797/phani"}, "edited": false, "score": 0, "creation_date": 1440615593, "post_id": 32234029, "comment_id": 52351573, "body": "@R Sahu: Actually <code>fun</code> is a <code>const</code> member function,  <code>value1</code> should not change unless it is made <code>mutable</code> or use <code>const_cast</code>. How is it possible to change value in <code>const</code> fun."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 83, "user_id": 5269797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e7a925a533da85e39585cbb661979f2?s=128&d=identicon&r=PG&f=1", "display_name": "Phani", "link": "https://stackoverflow.com/users/5269797/phani"}, "edited": false, "score": 1, "creation_date": 1440615674, "post_id": 32234029, "comment_id": 52351627, "body": "@Phani, by using an explicit cast, like <code>((temp*) this)</code>, you are bypassing the <code>const</code>-ness of the object."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 83, "user_id": 5269797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e7a925a533da85e39585cbb661979f2?s=128&d=identicon&r=PG&f=1", "display_name": "Phani", "link": "https://stackoverflow.com/users/5269797/phani"}, "edited": false, "score": 0, "creation_date": 1440617385, "post_id": 32234029, "comment_id": 52352616, "body": "@Phani: It&#39;s <i>not</i>. The code author used a nasty C-style cast to hack away the <code>const</code>ness and lie to the compiler."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 11, "last_activity_date": 1440618538, "last_edit_date": 1440618538, "creation_date": 1440613494, "answer_id": 32234029, "question_id": 32233771, "link": "https://stackoverflow.com/questions/32233771/const-and-mutable/32234029#32234029", "title": "Const and mutable", "body": "<p>When a member variable does not have the <code>mutable</code> qualifier, you cannot modify it when an object is <code>const</code>.</p>\n\n<p>When a member variable has the <code>mutable</code> qualifier, you can modify it even when an object is <code>const</code>.</p>\n\n<p>Simple example:</p>\n\n<pre><code>struct Foo\n{\n   int var1;\n   mutable int var2;\n};\n\nconst Foo f{};\nf.var1 = 10; // Not OK\nf.var2 = 20; // OK\n</code></pre>\n\n<p>When you have:</p>\n\n<pre><code>void fun(int val) const\n{\n    ((temp*) this)-&gt;value1 = 10;\n    value2 = 10;\n}\n</code></pre>\n\n<p>you are bypassing the <code>const</code>-ness of the object and changing it in a way that you are not supposed to. This is subject to undefined behavior.</p>\n\n<p>As far as the compiler is concerned, that code is equivalent to:</p>\n\n<pre><code>void fun(int val) const\n{\n    temp* ptr = (temp*)this\n\n    // The compiler does not know how you got ptr.\n    // It is able to modify value1 through ptr since ptr\n    // points to a non-const object.\n    ptr-&gt;value1 = 10;\n\n    value2 = 10;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 189, "user_id": 5245916, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/889acd29350258819c1485cda3c06f50?s=128&d=identicon&r=PG&f=1", "display_name": "Naumann", "link": "https://stackoverflow.com/users/5245916/naumann"}, "is_accepted": false, "score": 1, "last_activity_date": 1440615226, "last_edit_date": 1440615226, "creation_date": 1440613669, "answer_id": 32234068, "question_id": 32233771, "link": "https://stackoverflow.com/questions/32233771/const-and-mutable/32234068#32234068", "title": "Const and mutable", "body": "<p>The best way to learn is to start making it a trivial case and see how it goes.</p>\n\n<p>a) if you comment out (*temp) and make it something like\nthis->value1 = 10;</p>\n\n<blockquote>\n  <p>error: assignment of data-member \u2018temp::value1\u2019 in read-only structure</p>\n</blockquote>\n\n<p>or </p>\n\n<p>b) if you comment out mutable keyword, you'll get the same error</p>\n\n<blockquote>\n  <p>error: assignment of data-member \u2018temp::value2\u2019 in read-only\n  structure</p>\n</blockquote>\n\n<p>and if you read above R Sahu provided the right answer about mutable keyword.</p>\n\n<p>If you are confused why can't we modify value with the normal way, remember the function is const and const is a contract that promises we are not supposed to modify or assign any values here (but mutable). so it is basically showing two techniques or hacks to break promise :-) </p>\n"}, {"tags": [], "owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1440619502, "creation_date": 1440619502, "answer_id": 32235733, "question_id": 32233771, "link": "https://stackoverflow.com/questions/32233771/const-and-mutable/32235733#32235733", "title": "Const and mutable", "body": "<p>The line</p>\n\n<pre><code>((temp*) this)-&gt;value1 = 10;\n</code></pre>\n\n<p>is said to be \"casting away <code>const</code>-ness\". It basically tells the compiler: Take the <code>this</code> pointer (which has the type <code>temp const*</code> because we are in a <code>const</code> member function of <code>temp</code>), <em>and pretend it were of type <code>temp*</code></em> (the subexpression <code>(temp*)this</code>). Then it instructs the compiler to dereference this pointer of type <code>temp*</code> to modify one of its members.</p>\n\n<p>Casting away <code>const</code>-ness was how mutable data members were implemented before C++ offered the <code>mutable</code> keyword.</p>\n\n<p>As you might have guessed, this is bad practice. It is bad practice, because it could just as well have been expressed with the <code>mutable</code> modifier. And it is bad practice because it uses the big gun of a C-style cast where a C++ <code>const_cast&lt;&gt;</code> would have sufficed.</p>\n"}], "owner": {"reputation": 83, "user_id": 5269797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e7a925a533da85e39585cbb661979f2?s=128&d=identicon&r=PG&f=1", "display_name": "Phani", "link": "https://stackoverflow.com/users/5269797/phani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2406, "favorite_count": 2, "accepted_answer_id": 32234029, "answer_count": 3, "score": 8, "last_activity_date": 1440619502, "creation_date": 1440612704, "last_edit_date": 1440613813, "question_id": 32233771, "link": "https://stackoverflow.com/questions/32233771/const-and-mutable", "title": "Const and mutable", "body": "<p>I just came across this code fragment, but I do not understand how it compiles:</p>\n\n<pre><code>class temp {\n    int value1; \n    mutable int value2;\npublic:\n    void fun(int val) const\n    {\n        ((temp*) this)-&gt;value1 = 10;\n        value2 = 10;\n    }\n};\n</code></pre>\n\n<p>What is the meaning of this line</p>\n\n<pre><code>((temp*) this)-&gt;value1 = 10;\n</code></pre>\n\n<p><code>value1</code> is getting assigned to 10, without any error. But <code>value1</code> is not <code>mutable</code>. How does this compile?</p>\n"}, {"tags": ["c++", "class", "struct", "cuda", "gpu"], "comments": [{"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1440620116, "post_id": 32233731, "comment_id": 52354066, "body": "Why would you modify the memory to be declared static at operator scope? That makes absolutely no sense."}, {"owner": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "edited": false, "score": 3, "creation_date": 1440620495, "post_id": 32233731, "comment_id": 52354241, "body": "<code>operator const T *()</code> is an <a href=\"http://en.cppreference.com/w/cpp/language/cast_operator\" rel=\"nofollow noreferrer\">implicit-explicit user defined conversion operator (cast operator)</a>. Looks like you don&#39;t understand what <a href=\"http://en.cppreference.com/w/cpp/language/as_operator\" rel=\"nofollow noreferrer\">assignment operator</a> does (pick some <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">book on C++</a>). What you really need to overload is <code>operator[]</code>. Overall approach seems rather strange."}, {"owner": {"reputation": 2870, "user_id": 2386951, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/2n3Zs.jpg?s=128&g=1", "display_name": "Farzad", "link": "https://stackoverflow.com/users/2386951/farzad"}, "reply_to_user": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1440620752, "post_id": 32233731, "comment_id": 52354398, "body": "@talonmies shared memory size needed to be allocated is known at compile time. May I know why it makes no sense?"}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1440654540, "post_id": 32233731, "comment_id": 52364450, "body": "In the first structure definition you posted, each member has a local scope definition of __smem. Understand they don&#39;t refer to the same memory. Also understand that returning a pointer to those __smem is technically undefined behaviour (although it will accidentally work because of the way shared memory works in CUDA). You have taken what amounts to a template trick to fool the compiler and are trying to use it for something it was never intended for. That&#39;s why I say it makes no sense."}, {"owner": {"reputation": 2870, "user_id": 2386951, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/2n3Zs.jpg?s=128&g=1", "display_name": "Farzad", "link": "https://stackoverflow.com/users/2386951/farzad"}, "reply_to_user": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1440655534, "post_id": 32233731, "comment_id": 52364896, "body": "@talonmies thanks. I think I get it now. I had been thinking that <code>__shared__</code> makes the variable keep living outside the scope (similar to <code>static</code> keyword), and again I was wrong that its re-declaration is required to be accessed."}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1440657827, "post_id": 32233731, "comment_id": 52366032, "body": "I think the only reason that any of this even compiles is because of the  <code>inline</code> keyword. It is illegal in CUDA to specify memory types for class member variables"}], "answers": [{"tags": [], "owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "is_accepted": true, "score": 4, "last_activity_date": 1440678327, "creation_date": 1440678327, "answer_id": 32249357, "question_id": 32233731, "link": "https://stackoverflow.com/questions/32233731/wrapping-cuda-shared-memory-definition-and-accesses-by-a-struct-and-overloading/32249357#32249357", "title": "Wrapping CUDA shared memory definition and accesses by a struct and overloading operators", "body": "<p>It appears you had a few misunderstandings about what the <code>__shared__</code> access specifier actually does in CUDA and that, combined with a rather tricky template designed to fool the compiler for the case where <code>extern __shared__</code> memory is used in templated kernel instances, led you down a blind path.</p>\n\n<p>If I have understood your need correctly, what you really are looking for is something like this:</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct wrapper\n{\n    T * p;\n    unsigned int tid;\n\n    __device__ wrapper(T * _p, unsigned int _tid) : p(_p), tid(_tid) {}\n    __device__ const T* operator-&gt;() const { return p + tid; }\n    __device__ T&amp; operator*() { return *(p + tid); }\n    __device__ const T&amp; operator*() const { return *(p + tid); }\n};\n</code></pre>\n\n<p>This is a wrapper which you can use to \"hide\" a pointer and an offset to have \"indexing\" free access to the pointer, for example:</p>\n\n<pre><code>#include &lt;cstdio&gt;\n\n// structure definition goes here\n\nvoid __global__ kernel(float *in)\n{\n    __shared__ float _buff[32];\n    wrapper&lt;float&gt; buff(&amp;_buff[0], threadIdx.x);\n\n    *buff = in[threadIdx.x + blockIdx.x * blockDim.x];\n    __syncthreads();\n\n    for(int i=0; (i&lt;32) &amp;&amp; (threadIdx.x == 0); ++i) { \n        printf(\"%d %d %f\\n\", blockIdx.x, i, _buff[i]);\n    }\n}\n\nint main()\n{\n    float * d = new float[128];\n    for(int i=0; i&lt;128; i++) { d[i] = 1.5f + float(i); }\n\n    float * _d;\n    cudaMalloc((void **)&amp;_d, sizeof(float) * size_t(128));\n    cudaMemcpy(_d, d, sizeof(float) * size_t(128), cudaMemcpyHostToDevice);\n\n    kernel&lt;&lt;&lt;4, 32&gt;&gt;&gt;(_d);\n    cudaDeviceSynchronize();\n    cudaDeviceReset();\n\n    return 0;\n}\n</code></pre>\n\n<p>In the example kernel, the shared memory array <code>_buff</code> is wrapped with the thread index within a wrapper instance, and the operator overloads let you access a specific array element without the usual explicit indexing operation. Perhaps you can modify this to suit your needs.</p>\n"}], "owner": {"reputation": 2870, "user_id": 2386951, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/2n3Zs.jpg?s=128&g=1", "display_name": "Farzad", "link": "https://stackoverflow.com/users/2386951/farzad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 753, "favorite_count": 1, "accepted_answer_id": 32249357, "answer_count": 1, "score": 2, "last_activity_date": 1440678327, "creation_date": 1440612591, "last_edit_date": 1495541825, "question_id": 32233731, "link": "https://stackoverflow.com/questions/32233731/wrapping-cuda-shared-memory-definition-and-accesses-by-a-struct-and-overloading", "title": "Wrapping CUDA shared memory definition and accesses by a struct and overloading operators", "body": "<p>In the piece of code <a href=\"https://github.com/ArchaeaSoftware/cudahandbook/blob/6abd464c36459bf57d27bfd2690068f805659e6e/memory/spinlockReduction.cu\" rel=\"nofollow noreferrer\">here</a> I came across an struct for the shared memory definition and usages. I modified the allocation to be static and used it in a test program like below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntemplate&lt;class T, uint bDim&gt;\nstruct SharedMemory\n{\n     __device__ inline operator T *() {\n        __shared__ T __smem[ bDim ];\n        return (T*) (void *) __smem;\n    }\n     __device__ inline operator const T *() const {\n        __shared__ T __smem[ bDim ];\n        return (T*) (void *) __smem;\n    }\n};\n\ntemplate &lt;uint bDim&gt;\n__global__ void myKernel() {\n    SharedMemory&lt;uint, bDim&gt; myShared;\n    myShared[ threadIdx.x ] = threadIdx.x;\n    __syncthreads();\n    printf(\"%d\\tsees\\t%d\\tat two on the circular right.\\n\", threadIdx.x,     myShared[ ( threadIdx.x + 2 ) &amp; 31 ]);\n}\n\nint main() {\n    myKernel&lt;32&gt;&lt;&lt;&lt;1, 32&gt;&gt;&gt;();\n    cudaDeviceSynchronize();\n    return 0;\n}\n</code></pre>\n\n<p>It works fine as predicted. However, I have a few questions about this usage:</p>\n\n<ol>\n<li>I don't understand the syntax used in the operator overloading section in the <code>sharedMemory</code> struct. Is it overloading the dereference operator <code>*</code>? If yes, how accesses via square bracket translate into dereference pointer? Also, why does changing <code>__device__ inline operator T *() {</code> line into <code>__device__ inline T operator *() {</code> produce compiler errors? </li>\n<li><p>I wanted to ease the use of the wrapper by overloading the assignment operator or defining a member function, so that each thread updates the shared memory location corresponding to its thread index. So that, for example,  writing down <code>myShared = 47;</code> or <code>myShared.set( 47 );</code> translates into <code>myShared[threadIdx.x] = 47;</code> behind the curtain. But I have been unsuccessful doing this. It compiles fine but the shared memory buffer is read all <code>0</code> (which I think is the default shared memory initialization in the Debug mode). Can you please let me know where I'm doing things wrong? Here's my try:</p>\n\n<pre><code>template&lt;class T, uint bDim&gt;\nstruct SharedMemory\n{\n     __device__ inline operator T*() {\n        __shared__ T __smem[ bDim ];\n        return (T*) (void *) __smem;\n    }\n     __device__ inline operator const T *() const {\n        __shared__ T __smem[ bDim ];\n        return (T*) (void *) __smem;\n    }\n    __device__ inline T&amp; operator=( const T&amp; __in ) {\n        __shared__ T __smem[ bDim ];\n        __smem[ threadIdx.x ] = __in;\n        return (T&amp;) __smem[ threadIdx.x ];\n    }\n    __device__ inline void set( const T __in ) {\n        __shared__ T __smem[ bDim ];\n        __smem[ threadIdx.x ] = __in;\n    }\n\n};\n</code></pre>\n\n<p>For the member function, the compiler gives out a warning:</p>\n\n<blockquote>\n  <p>variable \"__smem\" was set but never used</p>\n</blockquote></li>\n</ol>\n\n<p>Although I am aware <a href=\"https://stackoverflow.com/questions/12707478/why-cant-member-variables-be-shared\">member variables cannot be <code>__shared__</code></a>, I'm thinking I have a wrong assumption about or what I want to do is not matched with the <code>__shared__</code> qualifier characteristics. I appreciate the help.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 3688, "user_id": 842793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcnr6.png?s=128&g=1", "display_name": "Chase Henslee", "link": "https://stackoverflow.com/users/842793/chase-henslee"}, "edited": false, "score": 0, "creation_date": 1440614609, "post_id": 32233721, "comment_id": 52351033, "body": "QTimers will fire on the same event loop of the thread they are created in.  You are sticking your code in a loop in your while statement, which is bad because you don&#39;t have any pauses in there.  Your while loop never gives up the CPU and I would guess if you ran a top command you&#39;d see your app sitting at 100%.  Even if the timer fired, it would never get allowed to run because your while loop implementation doesn&#39;t allow it."}, {"owner": {"reputation": 1940, "user_id": 529482, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/16f658eea0c4290ac7dd7587196b7d39?s=128&d=identicon&r=PG", "display_name": "samprat", "link": "https://stackoverflow.com/users/529482/samprat"}, "reply_to_user": {"reputation": 3688, "user_id": 842793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcnr6.png?s=128&g=1", "display_name": "Chase Henslee", "link": "https://stackoverflow.com/users/842793/chase-henslee"}, "edited": false, "score": 0, "creation_date": 1440615322, "post_id": 32233721, "comment_id": 52351430, "body": "@ChaseHenslee Thanks mate. BUt my issue is just above where I haev called QTimer  there is a function call reconnectToServer() this function emit connected() signal and ConnectedToMachine Slot executed. but before it can call that slot it goes into while loop. why is that? I mean technically it shoudl call connectedToMachine first and tehn while loop right?"}, {"owner": {"reputation": 3688, "user_id": 842793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcnr6.png?s=128&g=1", "display_name": "Chase Henslee", "link": "https://stackoverflow.com/users/842793/chase-henslee"}, "edited": false, "score": 0, "creation_date": 1440615557, "post_id": 32233721, "comment_id": 52351549, "body": "I don&#39;t see where you have your connection to the &quot;connectedToMachine&quot; slot, but if they are in different threads then the default connection call will use Qt:QueuedConnection.  Meaning it won&#39;t fire until it gets to it on the Event Loop.    It&#39;s hard to tell without seeing the code for connectToServer, or the call that sets up the signal/slot connection."}, {"owner": {"reputation": 1940, "user_id": 529482, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/16f658eea0c4290ac7dd7587196b7d39?s=128&d=identicon&r=PG", "display_name": "samprat", "link": "https://stackoverflow.com/users/529482/samprat"}, "reply_to_user": {"reputation": 3688, "user_id": 842793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcnr6.png?s=128&g=1", "display_name": "Chase Henslee", "link": "https://stackoverflow.com/users/842793/chase-henslee"}, "edited": false, "score": 0, "creation_date": 1440616242, "post_id": 32233721, "comment_id": 52351945, "body": "Actually it goes into connectedToMachine slot and and writes start command to send it to machine. But machine nver gets it. If I comment out while loop then atleast that start command goes to machine and I receive proper response from machine"}, {"owner": {"reputation": 3688, "user_id": 842793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcnr6.png?s=128&g=1", "display_name": "Chase Henslee", "link": "https://stackoverflow.com/users/842793/chase-henslee"}, "edited": false, "score": 0, "creation_date": 1440616618, "post_id": 32233721, "comment_id": 52352192, "body": "So that&#39;s telling me that my theory is correct.  The reason the while loop breaks you is because your slot is being called from the Event Loop queue on the same thread.  Also, what you are trying to do is actually a state machine.  You should consider implementing this logic using QStateMachine instead.  You could have a non-connected state, and transition to a connected state that way.  Good luck man."}, {"owner": {"reputation": 1940, "user_id": 529482, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/16f658eea0c4290ac7dd7587196b7d39?s=128&d=identicon&r=PG", "display_name": "samprat", "link": "https://stackoverflow.com/users/529482/samprat"}, "reply_to_user": {"reputation": 3688, "user_id": 842793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcnr6.png?s=128&g=1", "display_name": "Chase Henslee", "link": "https://stackoverflow.com/users/842793/chase-henslee"}, "edited": false, "score": 0, "creation_date": 1440616745, "post_id": 32233721, "comment_id": 52352262, "body": "Thanks Chase for the help. I didnt get what you mean by state machine and  QState Machine? Can you point me to some tutorial or sample code"}, {"owner": {"reputation": 3688, "user_id": 842793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcnr6.png?s=128&g=1", "display_name": "Chase Henslee", "link": "https://stackoverflow.com/users/842793/chase-henslee"}, "edited": false, "score": 0, "creation_date": 1440617061, "post_id": 32233721, "comment_id": 52352436, "body": "<a href=\"http://doc.qt.io/qt-4.8/qstatemachine.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-4.8/qstatemachine.html</a>  gives a good description of how to use the state machine.  Essentially you use Qt Signals to transition between states.  So your logic that sends a signal to the &quot;connectedToMachine&quot; slot could actually be a state instead.  Then instead of sitting in a while loop, you can trigger when the state changes to fire the next event.    Granted, most of the examples you find will be used for GUIs, the same principle can be used for non-guis as well."}, {"owner": {"reputation": 1940, "user_id": 529482, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/16f658eea0c4290ac7dd7587196b7d39?s=128&d=identicon&r=PG", "display_name": "samprat", "link": "https://stackoverflow.com/users/529482/samprat"}, "reply_to_user": {"reputation": 3688, "user_id": 842793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcnr6.png?s=128&g=1", "display_name": "Chase Henslee", "link": "https://stackoverflow.com/users/842793/chase-henslee"}, "edited": false, "score": 0, "creation_date": 1440617239, "post_id": 32233721, "comment_id": 52352539, "body": "cool . thanks a lot . Just last question how did you find tout hat while loop will consume all resources? I mean in many programs people have used while loop that do nothing  and they never run into problem. I am asking because it will help to learn it and I recognise it in future"}, {"owner": {"reputation": 3688, "user_id": 842793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcnr6.png?s=128&g=1", "display_name": "Chase Henslee", "link": "https://stackoverflow.com/users/842793/chase-henslee"}, "edited": false, "score": 2, "creation_date": 1440617484, "post_id": 32233721, "comment_id": 52352679, "body": "It&#39;s because your looping without a pause in the loop.  Certain functions can release the CPU and allow other processes to run.  sleep, wait, mutex locking, semaphones, and select calls are some examples of methods that would release the CPU.  Your while loop doesn&#39;t wait for anything.  It just checks the variable, goes back to the while loop, checks again, forever.   In a single threaded environment, no other code could ever run.  <a href=\"http://stackoverflow.com/questions/13680512/does-endless-while-loop-take-up-cpu-resources\" title=\"does endless while loop take up cpu resources\">stackoverflow.com/questions/13680512/&hellip;</a>  some good responses in there."}], "owner": {"reputation": 1940, "user_id": 529482, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/16f658eea0c4290ac7dd7587196b7d39?s=128&d=identicon&r=PG", "display_name": "samprat", "link": "https://stackoverflow.com/users/529482/samprat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 396, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1440612549, "creation_date": 1440612549, "question_id": 32233721, "link": "https://stackoverflow.com/questions/32233721/execute-qtimer-just-once-and-logic-fails-in-while-loop-qt", "title": "Execute QTimer just once and logic fails in while loop Qt", "body": "<p><em>OS: Linux<br>\nSDK : Qt<br>\nWidgets ->2  QLineEdits say( lEditSndRequest) &amp; lEditGetResponse in mainQwidget window</em>   </p>\n\n<p><em>QTCPSocketClient implementation as a child of mainQwidget window.</em>   </p>\n\n<p><em>Overview :</em><br>\n  User send request to serverMachine and get response. The request first get displayed in lEditSndRequest. The lEditSndRequest forward that request to Client part where it write to Server using Qt libraries.All work fine.\n Server also send response to client. It goes to client part say in func getResponseFrmMachine. The signal emitted from that function  that updates lEditGetResponse. when it updates LEditGetResponse textChangeSignal is emitted when calls slot say getCliRespTextChanged().\nThis slot updates another membervaribale \"isMachineStarted\" to true or false.</p>\n\n<p>Say if we receive response from machine like \"machine_started\" it will update bool member variable to true.</p>\n\n<p><em>Issue:</em>    </p>\n\n<p>User send command like \"make_machine_move\" . But Before by client code can send that command to server , I need to send command like \"start_machine_first\" . I use vector to store both commands</p>\n\n<p>Alos I have a function say returnFrontFrmVec(); Which returns first element from vector and then erase it from vec.\n I pass that vector in a function which actually writes to server. its there my logic fails.\nWhat I want is  if vector size > 1 ( it means to has 2 commands) then extract front part and comapre with \"machine_started\". if true then send machine_started command and wait for response before executing another command. The machine may take upto 2 mins to start. so either if timer expires( in that case clear vector as machine has not started and there is no use to send move command ) OR wait till we receive reponse. The response as mentioned earlier goes to lEditGetRespone and slot there will update bool varibale  \"isMachineStarted\" to true. So I am checking against it.</p>\n\n<p><em>output</em><br>\nServer does not get message , and connectedToMachine( ) slot is never called &amp; application stuck in While loop.</p>\n\n<pre><code>void prepareWriteToMachine()\n{\n  int sizeOfVec = noOfElemInVecCmd();\n\n  if( sizeOfVec  == 1 ) // there are no other command so just execute teh first command from vector\n    {\n      QString strTemp = returnFrontFrmVec();\n      // place temp str in storeLineEditMsg to be used by connectedtoMachine\n      setStoreMsgFrmCliReq( strTemp );\n      reconnectToServer(); // this will emit SIGNAL connected() which inturn calls slot connectedToMachine( ) \n    }\n  if( sizeOfVec &gt; 1 )\n    {\n      QString strTemp = returnFrontFrmVec();\n      if( strTemp == CMD_STRT)// send it and wait for response\n        {\n          setStoreMsgFrmCliReq( strTemp );\n          reconnectToServer();// this will emit SIGNAL connected() which inturn calls slot connectedToMachine( ) // But nver get called\n        }\n      // Now check if Machine has started we will get response in MainWindow and\n      // it will update isMachineStarted so we can check that\n      QTimer *timer ;\n      timerStart( timer, TIMEOUT_START );\n      while( isMachineStarted() == false  )  // getMachineRunning-&gt; return isMachineStarted ??\n        {\n          // do nothing wiat for machine to send machine_started\n        }\n      if( isMachineStarted() == true )\n        {\n          // if we are here it mean timer has not expired &amp; machine is runing\n          // now check for another command and execute\n          timerStop( timer );\n          while( vecCmd.size() &gt; 0 )\n            {\n              QString strTemp = returnFrontFrmVec();\n              setStoreMsgFrmCliReq( strTemp );\n              reconnectToServer();\n            }\n        }\n    }\n}\n\n\nvoid connectedToMachine( )  \n{\n  // if we reach here then client is connected to server ..\n  //send signal to update connecting status in Qlineedit\n\n\n  QByteArray block;\n  QDataStream out( &amp;block, QIODevice::WriteOnly );\n\n  out.setVersion( QDataStream::Qt_4_3 );\n  out &lt;&lt; quint16( 0 ) &lt;&lt; getStoreMsgFrmCliReq();\n  out.device()-&gt;seek( 0 );\n  out &lt;&lt; quint16( block.size() - sizeof( quint16 ) );\n\n  sockForMachine-&gt;write( block );\n  //reset storeLineEditMessage\n  storeLineEditMsg.clear();\n}\n\nvoid timerStart( QTimer* timer, int timeMillisecond )\n{\n  timer = new QTimer( this );\n  connect( timer, SIGNAL( timeout() ), this, SLOT( noRespFrmMachine( ) ) ) ;\n  timer-&gt;start( timeMillisecond );\n}\n\nvoid timerStop( QTimer* timer )\n{\n  if( timer )\n    {\n      timer-&gt;stop();\n    }\n}\n\nvoid noRespFrmMachine( )\n{\n  vecCmd.clear();\n}\n\nQString returnFrontFrmVec( )\n{\n  QString frntCmd;\n  if( ! vecCmd.empty() )\n    {\n      frntCmd = vecCmd.front();\n      vecCmd.erase( vecCmd.begin() );// retrieve and now delete first element\n    }\n  return frntCmd;\n}\n\nbool isMachineStarted()( )const\n{\n\n  return isMachineStarted;\n}\nvoid setMachineStarted( bool isRun )\n{\n\nisMachineStarted = isRun;\n}\n</code></pre>\n"}, {"tags": ["c++", "parallel-processing", "openmp", "markov-chains"], "comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1440612697, "post_id": 32233668, "comment_id": 52349885, "body": "If the code works fine, this might be more suitable for <a href=\"http://codereview.stackexchange.com/\">Code Review</a>"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1440619553, "post_id": 32233668, "comment_id": 52353789, "body": "&quot;every time a CPU core has data it will call push_back&quot; - where&#39;s the mutex guarding this? Forget efficient, start with correct code. The correct way to do multi-core accumulation is to accumulate subsums per thread, and then combine those."}, {"owner": {"reputation": 725, "user_id": 4556597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fc52844708904a201cb4c96f46a4c25?s=128&d=identicon&r=PG", "display_name": "Diniden", "link": "https://stackoverflow.com/users/4556597/diniden"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1440620732, "post_id": 32233668, "comment_id": 52354390, "body": "I went ahead and deleted my comment as it was more of a &#39;try this&#39; suggestion than an answer.  However, to @MSalters on adding a mutex: I do not see the benefit of a mutex for a vector that is going to remain a single size, never moved, only have addition operations invoked on it. I don&#39;t see anything not thread unsafe about it.   For my own learning sake: what could get corrupted/go wrong in this scenario? (I&#39;m intentionally ignoring the savef method for this thought)"}, {"owner": {"reputation": 7173, "user_id": 52534, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/17d0d29fb3b7ff0dc1433e08bfe175fc?s=128&d=identicon&r=PG", "display_name": "patros", "link": "https://stackoverflow.com/users/52534/patros"}, "reply_to_user": {"reputation": 725, "user_id": 4556597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fc52844708904a201cb4c96f46a4c25?s=128&d=identicon&r=PG", "display_name": "Diniden", "link": "https://stackoverflow.com/users/4556597/diniden"}, "edited": false, "score": 0, "creation_date": 1440621201, "post_id": 32233668, "comment_id": 52354670, "body": "@Diniden - The vector is not a fixed size, it is having elements appended via push_back. push_back is not atomic or threadsafe, so it needs to be wrapped in a mutex."}, {"owner": {"reputation": 725, "user_id": 4556597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fc52844708904a201cb4c96f46a4c25?s=128&d=identicon&r=PG", "display_name": "Diniden", "link": "https://stackoverflow.com/users/4556597/diniden"}, "reply_to_user": {"reputation": 7173, "user_id": 52534, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/17d0d29fb3b7ff0dc1433e08bfe175fc?s=128&d=identicon&r=PG", "display_name": "patros", "link": "https://stackoverflow.com/users/52534/patros"}, "edited": false, "score": 0, "creation_date": 1440621329, "post_id": 32233668, "comment_id": 52354717, "body": "@patros - His push_back method does not call push_back on the vector. His vector is fully allocated in his ctor."}, {"owner": {"reputation": 7173, "user_id": 52534, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/17d0d29fb3b7ff0dc1433e08bfe175fc?s=128&d=identicon&r=PG", "display_name": "patros", "link": "https://stackoverflow.com/users/52534/patros"}, "reply_to_user": {"reputation": 725, "user_id": 4556597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fc52844708904a201cb4c96f46a4c25?s=128&d=identicon&r=PG", "display_name": "Diniden", "link": "https://stackoverflow.com/users/4556597/diniden"}, "edited": false, "score": 0, "creation_date": 1440621951, "post_id": 32233668, "comment_id": 52355054, "body": "@Diniden - Didn&#39;t notice his push_back implementation. You&#39;re right that it won&#39;t change the vector size, but it is vulnerable to race conditions so it still needs to be wrapped in a mutex."}, {"owner": {"reputation": 725, "user_id": 4556597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fc52844708904a201cb4c96f46a4c25?s=128&d=identicon&r=PG", "display_name": "Diniden", "link": "https://stackoverflow.com/users/4556597/diniden"}, "reply_to_user": {"reputation": 7173, "user_id": 52534, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/17d0d29fb3b7ff0dc1433e08bfe175fc?s=128&d=identicon&r=PG", "display_name": "patros", "link": "https://stackoverflow.com/users/52534/patros"}, "edited": false, "score": 0, "creation_date": 1440622161, "post_id": 32233668, "comment_id": 52355154, "body": "@patros - That is what I am trying to understand: what race conditions? If you ignore the savef method, simply adding to the vector does not have anything that could mess up the operations as far as I can tell."}, {"owner": {"reputation": 7173, "user_id": 52534, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/17d0d29fb3b7ff0dc1433e08bfe175fc?s=128&d=identicon&r=PG", "display_name": "patros", "link": "https://stackoverflow.com/users/52534/patros"}, "reply_to_user": {"reputation": 725, "user_id": 4556597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fc52844708904a201cb4c96f46a4c25?s=128&d=identicon&r=PG", "display_name": "Diniden", "link": "https://stackoverflow.com/users/4556597/diniden"}, "edited": false, "score": 2, "creation_date": 1440622385, "post_id": 32233668, "comment_id": 52355267, "body": "@Diniden - The line *valStack += *newVal is not threadsafe. It is possible for a thread to get interrupted after computing (the implicit) *valStack + *newVal but before writing it back to *valStack. In this case the += syntax somewhat obscures that this is not an atomic operation."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 7173, "user_id": 52534, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/17d0d29fb3b7ff0dc1433e08bfe175fc?s=128&d=identicon&r=PG", "display_name": "patros", "link": "https://stackoverflow.com/users/52534/patros"}, "edited": false, "score": 0, "creation_date": 1440631950, "post_id": 32233668, "comment_id": 52358881, "body": "@patros: Even <code>*valStack = *newVal</code> would be unsafe. <code>std::atomic&lt;int&gt;</code> is atmoic, regular <code>int</code> is not. And if you think x86 guarantees it regardless, think again: C++ optimizers may assume that a non-atomic, non-mutexed int is not accessed by another thread. x86 can only guarantee that 32 bits writes to memory are atomic, not that those writes happen in the first place."}, {"owner": {"reputation": 3836, "user_id": 3275464, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/g6Pnl.png?s=128&g=1", "display_name": "Learning is a mess", "link": "https://stackoverflow.com/users/3275464/learning-is-a-mess"}, "edited": false, "score": 0, "creation_date": 1440690282, "post_id": 32233668, "comment_id": 52387963, "body": "Thanks for ideas guys, I decided to allocate one density stack per core, added a <code>std::mutex</code> for each one and then a global function that could average them before outputting the result in a file. It gets the job done, neater, maybe even a bit faster! Many thanks again."}], "answers": [{"tags": [], "owner": {"reputation": 7173, "user_id": 52534, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/17d0d29fb3b7ff0dc1433e08bfe175fc?s=128&d=identicon&r=PG", "display_name": "patros", "link": "https://stackoverflow.com/users/52534/patros"}, "is_accepted": true, "score": 2, "last_activity_date": 1440616237, "creation_date": 1440616237, "answer_id": 32234827, "question_id": 32233668, "link": "https://stackoverflow.com/questions/32233668/c-stack-efficient-for-multicore-application/32234827#32234827", "title": "c++ stack efficient for multicore application", "body": "<p>How are you synchronizing your shared densityStack instance?</p>\n\n<p>From the limited info here my guess is that the CPUs are blocked waiting to write data every time they have a tiny chunk of data. If that is the issue, a simple technique to improve performance would be to reduce the number of writes. Keep a buffer of data for each CPU and write to the densityStack less frequently.</p>\n"}], "owner": {"reputation": 3836, "user_id": 3275464, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/g6Pnl.png?s=128&g=1", "display_name": "Learning is a mess", "link": "https://stackoverflow.com/users/3275464/learning-is-a-mess"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 32234827, "answer_count": 1, "score": 0, "last_activity_date": 1440619097, "creation_date": 1440612391, "last_edit_date": 1440612551, "question_id": 32233668, "link": "https://stackoverflow.com/questions/32233668/c-stack-efficient-for-multicore-application", "title": "c++ stack efficient for multicore application", "body": "<p>I am trying to code a multicode Markov Chain in C++ and while I am trying to take advantage of the many CPUs (up to 24) to run a different chain in each one, I have a problem in picking a right container to gather the result the numerical evaluations on each CPU. What I am trying to measure is basically the average value of an array of boolean variables. I have tried coding a wrapper around a `std::vector`` object looking like that:</p>\n\n<pre><code>struct densityStack {\n    vector&lt;int&gt; density; //will store the sum of boolean varaibles\n    int card; //will store the amount of elements we summed over for normalizing at the end\n\n    densityStack(int size){ //constructor taking as only parameter the size of the array, usually size = 30\n        density = vector&lt;int&gt; (size, 0);\n        card = 0;\n        }\n\n    void push_back(vector&lt;int&gt; &amp; toBeAdded){ //method summing a new array (of measurements) to our stack\n        for(auto valStack = density.begin(), newVal = toBeAdded.begin(); valStack != density.end(); ++valStack, ++ newVal)\n            *valStack += *newVal;\n        card++;\n        }\n\n    void savef(const char * fname){ //method outputting into a file\n        ofstream out(fname);\n        out.precision(10);\n        out &lt;&lt; card &lt;&lt; \"\\n\"; //saving the cardinal in first line \n        for(auto val = density.begin(); val != density.end(); ++val)\n            out &lt;&lt; &lt;&lt; (double) *val/card &lt;&lt; \"\\n\";\n        out.close();\n        }\n};\n</code></pre>\n\n<p>Then, in my code I use a single <code>densityStack</code> object and every time a CPU core has data (can be 100 times per second) it will call <code>push_back</code> to send the data back to <code>densityStack</code>.</p>\n\n<p>My issue is that this seems to be slower that the first raw approach where each core stored each array of measurement in file and then I was using some Python script to average and clean (I was unhappy with it because storing too much information and inducing too much useless stress on the hard drives).</p>\n\n<p>Do you see where I can be losing a lot of performance? I mean is there a source of obvious overheading? Because for me, copying back the vector even at frequencies of 1000Hz should not be too much.</p>\n"}, {"tags": ["c++", "opencv", "tesseract", "leptonica"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 1, "creation_date": 1440614707, "post_id": 32233665, "comment_id": 52351087, "body": "If I remember correctly (did that long time ago) you need to manually move some headers (like platform.h) one folder up (or down...)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440617233, "post_id": 32233665, "comment_id": 52352533, "body": "<b>Do not add C tag for C++ questions!</b> Your code is C++."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4406224"}, "edited": false, "score": 0, "creation_date": 1440668257, "post_id": 32233665, "comment_id": 52372172, "body": "Sorry, Olaf ;) Okey, I&#39;ll try Miki"}], "answers": [{"tags": [], "owner": {"reputation": 4680, "user_id": 6515755, "user_type": "registered", "profile_image": "https://graph.facebook.com/1064376696971764/picture?type=large", "display_name": "Ryabchenko Alexander", "link": "https://stackoverflow.com/users/6515755/ryabchenko-alexander"}, "is_accepted": false, "score": 0, "last_activity_date": 1591673761, "creation_date": 1591673761, "answer_id": 62274596, "question_id": 32233665, "link": "https://stackoverflow.com/questions/32233665/tesseract-ocr-baseapi-h-fatal-error-platform-h-file-not-found/62274596#62274596", "title": "Tesseract-ocr, baseapi.h fatal error: platform.h file not found", "body": "<p>try to install dev packages </p>\n\n<pre><code>$ sudo apt install tesseract-ocr-dev\n$ sudo apt install libleptonica-dev\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4406224"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1126, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1591673761, "creation_date": 1440612373, "last_edit_date": 1440617212, "question_id": 32233665, "link": "https://stackoverflow.com/questions/32233665/tesseract-ocr-baseapi-h-fatal-error-platform-h-file-not-found", "title": "Tesseract-ocr, baseapi.h fatal error: platform.h file not found", "body": "<p>I am working on engineering work on license plate recognition and therefore started from a simple code. Namely, I downloaded all the libraries or OpenCV, Tesseract and Leptonica but when you try to compile I have a problem with the file baseapi.h located in the library Tesseract.</p>\n\n<p>Compiles the following command: <strong>g++ main.cpp -lopencv_core -lopencv_highgui -lopencv_imgproc -ltesseract</strong></p>\n\n<p>Error The compiled: <strong>tesseract-ocr/api/baseapi.h:27:22: fatal error: platform.h: No such file or directory</strong></p>\n\n<p>The beginning of my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"opencv2/imgproc/imgproc.hpp\"\n#include \"opencv2/highgui/highgui.hpp\"\n#include \"leptonica-1.69/src/allheaders.h\" \n#include \"tesseract-ocr/api/baseapi.h\" \nusing namespace std;\nusing namespace tesseract;\nusing namespace cv;\n</code></pre>\n\n<p>...</p>\n"}, {"tags": ["c++", "function"], "comments": [{"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 0, "creation_date": 1440612460, "post_id": 32233663, "comment_id": 52349746, "body": "<i>&quot;or maybe it isn&#39;t being called properly by main&quot;</i> Maybe. But we can&#39;t <i>see</i> <code>main()</code>."}, {"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 1, "creation_date": 1440612509, "post_id": 32233663, "comment_id": 52349780, "body": "Also, none of your loops will do anything. They all start out with <code>&gt;</code> conditions that should be <code>&lt;</code>. if <code>top = 0</code>, then <code>top &gt; 9</code> will <i>never</i> be true."}, {"owner": {"reputation": 55, "user_id": 5088374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04e866c07c44496c0c6e286dc2df092e?s=128&d=identicon&r=PG&f=1", "display_name": "Okinawa Sama", "link": "https://stackoverflow.com/users/5088374/okinawa-sama"}, "reply_to_user": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 0, "creation_date": 1440616587, "post_id": 32233663, "comment_id": 52352173, "body": "And now I feel like a moron. I changed so many other things trying to fix it, I can&#39;t believe it was something so simple. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 5088374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04e866c07c44496c0c6e286dc2df092e?s=128&d=identicon&r=PG&f=1", "display_name": "Okinawa Sama", "link": "https://stackoverflow.com/users/5088374/okinawa-sama"}, "edited": false, "score": 0, "creation_date": 1440616689, "post_id": 32233688, "comment_id": 52352233, "body": "It was indeed a typo. How I made it so many times in one function is beyond me. Thanks for pointing that out."}], "tags": [], "owner": {"reputation": 642, "user_id": 803017, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e585168fc21084f48aeb33e76f21d5a3?s=128&d=identicon&r=PG&f=1", "display_name": "7VoltCrayon", "link": "https://stackoverflow.com/users/803017/7voltcrayon"}, "is_accepted": true, "score": 3, "last_activity_date": 1440612674, "last_edit_date": 1440612674, "creation_date": 1440612467, "answer_id": 32233688, "question_id": 32233663, "link": "https://stackoverflow.com/questions/32233663/c-function-not-calling/32233688#32233688", "title": "c++ function not calling", "body": "<p>In your first loop</p>\n\n<pre><code> for(int top =0; top&gt;9; top+=3)\n</code></pre>\n\n<p>the <code>top &gt;9</code>condition is not true when top is initialized, so the loop will not run. If this isn't a typo I suggest you look up C++ for loop syntax.</p>\n\n<p>I believe you want it to be <code>top&lt;9</code> and you also need to change it for the nested loops. </p>\n"}], "owner": {"reputation": 55, "user_id": 5088374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04e866c07c44496c0c6e286dc2df092e?s=128&d=identicon&r=PG&f=1", "display_name": "Okinawa Sama", "link": "https://stackoverflow.com/users/5088374/okinawa-sama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 32233688, "answer_count": 1, "score": 0, "last_activity_date": 1440612674, "creation_date": 1440612369, "question_id": 32233663, "link": "https://stackoverflow.com/questions/32233663/c-function-not-calling", "title": "c++ function not calling", "body": "<p>I've been trying to write a programme that can solve a sudoku. It doesn't work though (yet) and I'm not sure why. The full code is <a href=\"https://drive.google.com/file/d/0B_we6hUmPkaMSVl5WEdxWi1MWms/view?usp=sharing\" rel=\"nofollow\">here</a>.</p>\n\n<p>Th part that's giving me trouble is this:</p>\n\n<pre><code>int eliminate_3x3(){\n    for(int top =0; top&gt;9; top+=3){\n        std::cout &lt;&lt; \"eliminate 3x3 is function properly\" &lt;&lt; std::endl;\n        //Based on the previous line, I'd expect to see that message pop up 3 times every time 'main'\n        //calls this function, but it is never shown.\n        for(int left =0; left&gt;9; left+=3){\n            for(int column =0; column &gt; 3; column++){\n                for(int row=0; row &gt; 3; row++){\n                    int current_value = MyArray[top+column][left+row];\n                    std::cout &lt;&lt; current_value &lt;&lt; std::endl;\n                    if(current_value != 0){\n                        for(int column2 =0; column2 &gt; 3; column2++){\n                            for(int row2 =0; row2 &gt; 3; row2++){\n                                possibility_array[top+column2][left+row2][current_value-1] = 0;\n                            }\n                        }\n                        possibility_array[top+column][left+row][current_value-1] = current_value;\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>For whatever reason, it simply doesn't do anything at all (or maybe it isn't being called properly by <code>main</code>. If anyone could tell me why, I'd really appreciate it. Thanks in advance.</p>\n\n<p>I apologise in advance if my use of for loops is a problem for some, I'm still relatively new to C++ and that was the solution that seemed best to me.</p>\n"}, {"tags": ["c++", "arrays", "pointers", "char", "declaration"], "answers": [{"comments": [{"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1440614272, "post_id": 32233694, "comment_id": 52350815, "body": "Don&#39;t you think this answer would be kind of confusing to someone who is new to C++, and isn&#39;t aware of version differences, and on their compiler, the code is clearly compiling? (or maybe you weren&#39;t aware that this used to be legal)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1440614493, "post_id": 32233694, "comment_id": 52350948, "body": "@BenjaminLindley It didn&#39;t occur to me to add that it used to be okay as the question is tagged as C++ which should be answered with the current standard.  I have added to my answer to call out that it is an error in and after C++11."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 5, "last_activity_date": 1440614380, "last_edit_date": 1440614380, "creation_date": 1440612487, "answer_id": 32233694, "question_id": 32233627, "link": "https://stackoverflow.com/questions/32233627/why-c-variable-doesnt-need-defining-properly-when-its-a-pointer/32233694#32233694", "title": "Why C++ variable doesn&#39;t need defining properly when it&#39;s a pointer?", "body": "<pre><code>char disk[3] = \"D:\";\n</code></pre>\n\n<p>Is treated as</p>\n\n<pre><code>char disk[3] = {'D',':','\\0'};\n</code></pre>\n\n<p>Where as in C++11 and above</p>\n\n<pre><code>char* disk = \"D:\";\n</code></pre>\n\n<p>Is an error as a string literal is of type <code>const char[]</code> and cannot be assigned to a <code>char *</code>.  You can assign it to a <code>const char *</code> though.</p>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1440612812, "post_id": 32233708, "comment_id": 52349934, "body": "<code>char* disk = &quot;D:&quot;;</code> should be a warning at minimum and should be an error according to the standard.  <a href=\"http://coliru.stacked-crooked.com/a/723cd7928608aed0\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/723cd7928608aed0</a>"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1440614321, "post_id": 32233708, "comment_id": 52350847, "body": "@NathanOliver, according to the standard it should be a diagnostic message, defined as a &quot;message belonging to an implementation-defined subset of the implementation\u2019s output messages&quot;. Warnings are technically compliant with that."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 5, "last_activity_date": 1440615283, "last_edit_date": 1440615283, "creation_date": 1440612514, "answer_id": 32233708, "question_id": 32233627, "link": "https://stackoverflow.com/questions/32233627/why-c-variable-doesnt-need-defining-properly-when-its-a-pointer/32233708#32233708", "title": "Why C++ variable doesn&#39;t need defining properly when it&#39;s a pointer?", "body": "<p>String literals are actually read-only, zero-terminated arrays of characters, and using a string literal gives you a pointer to the first character in the array.</p>\n\n<p>So in the second example</p>\n\n<pre><code>char* disk = \"D:\";\n</code></pre>\n\n<p>you initialize <code>disk</code> to point to the first character of an array of three characters.</p>\n\n<hr>\n\n<p>Note in my first paragraph above that I said that string literals are <em>read-only</em> arrays, that means that having a plain <code>char*</code> pointing to this array could make you think that it's okay to modify this array when it's not (attempting to modify a string literal leads to <em>undefined behavior</em>). This is the reason that <code>const char*</code> is usually used:</p>\n\n<pre><code>const char* disk = \"D:\";\n</code></pre>\n\n<p>Since C++11 it's actually an error to not use a <code>const char*</code>, through most compilers still only warn about it instead of producing an error.</p>\n"}, {"tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": true, "score": 7, "last_activity_date": 1440616489, "last_edit_date": 1440616489, "creation_date": 1440614809, "answer_id": 32234399, "question_id": 32233627, "link": "https://stackoverflow.com/questions/32233627/why-c-variable-doesnt-need-defining-properly-when-its-a-pointer/32234399#32234399", "title": "Why C++ variable doesn&#39;t need defining properly when it&#39;s a pointer?", "body": "<p>The usual way to initialize an array in C and C++ is:</p>\n\n<pre><code>int a[3] = { 0, 1, 2 };\n</code></pre>\n\n<blockquote>\nAside: And you can optionally leave out the array bound and have it deduced from the initializer list, or have a larger bound than there are initializers:\n\n<pre>int aa[] = { 0, 1, 2 };    // another array of three ints\nint aaa[5] = { 0, 1, 2 };  // equivalent to { 0, 1, 2, 0, 0}</pre>\n</blockquote>\n\n<p>For arrays of characters there is a special rule that allows an array to be initialized from a string literal, with each element of the array being initialized from the corresponding character in the string literal.</p>\n\n<p>Your first example uses the string literal <code>\"D:\"</code> so each element of the array will be initialized to a character from that string, equivalent to:</p>\n\n<pre><code>char disk[3] = { 'D', ':', '\\0' };\n</code></pre>\n\n<p>(The third character is the <a href=\"https://en.wikipedia.org/wiki/Null-terminated_string\" rel=\"nofollow\">null terminator</a>, which is implicitly present in all string literals).</p>\n\n<blockquote>\nAside: Here too you can optionally leave out the array bound and have it deduced from the string literal, or have a larger bound than the string length:\n\n<pre>char dd[] = \"D:\";    // another array of three chars\nchar ddd[5] = \"D:\";  // equivalent to { 'D', ':', '\\0', '\\0', '\\0'}</pre>\n\nJust like the <code>aaa</code> example above, the extra elements in <code>ddd</code> that don't have a corresponding character in the string will be zero-initialized.\n</blockquote>\n\n<p>Your second example works because the string literal <code>\"D:\"</code> will be output by the compiler and stored somewhere in the executable as an array of three chars. When the executable is run the segment that contains the array (and other constants) will be mapped into the process' address space. So your <code>char*</code> pointer is then initialized to point to the location of that array, wherever that happens to be. Conceptually it's similar to:</p>\n\n<pre><code>const char __some_array_created_by_the_compiler[3] = \"D:\";\nconst char* disk = __some_array_created_by_the_compiler;\n</code></pre>\n\n<p>For historical reasons (mostly that <code>const</code> didn't exist in the early days of C) it was legal to use a non-const <code>char*</code> to point to that array, even though the array is actually read-only, so C and the first C++ standard allow you to use a non-const <code>char*</code> pointer to point to a string literal, even though the array that it refers to is really const:</p>\n\n<pre><code>const char __some_array_created_by_the_compiler[3] = \"D:\";\nchar* disk = (char*)__some_array_created_by_the_compiler;\n</code></pre>\n\n<p>This means that despite appearances your two examples are not exactly the same, because this is only allowed for the first one:</p>\n\n<pre><code>disk[0] = 'C';\n</code></pre>\n\n<p>For the first example that is OK, it alters the first element of the array.</p>\n\n<p>For the second example it might compile, but it results in <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\"><em>undefined behaviour</em></a>, because what it's actually doing is modifying the first element of the <code>__some_array_created_by_the_compiler</code> which is read-only. In practice what will probably happen is that the process will crash, because trying to write to a read-only page of memory will raise a segmentation fault.</p>\n\n<p>It's important to understand that there are lots of things in C++ (and even more in C) which the compiler will happily compile, but which cause Very Bad Things to happen when the code is executed.</p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 2778701, "user_type": "registered", "profile_image": "https://graph.facebook.com/594520283/picture?type=large", "display_name": "Jamie Cole", "link": "https://stackoverflow.com/users/2778701/jamie-cole"}, "edited": false, "score": 1, "creation_date": 1440616567, "post_id": 32234648, "comment_id": 52352161, "body": "Thanks, but if it&#39;s a constant then how come I can change it? <code>char* disk = &quot;A&quot;;\tdisk = &quot;BBB&quot;;\tcout &lt;&lt; disk;</code>"}, {"owner": {"reputation": 1593, "user_id": 3073656, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jl88K.png?s=128&g=1", "display_name": "daltonfury42", "link": "https://stackoverflow.com/users/3073656/daltonfury42"}, "reply_to_user": {"reputation": 51, "user_id": 2778701, "user_type": "registered", "profile_image": "https://graph.facebook.com/594520283/picture?type=large", "display_name": "Jamie Cole", "link": "https://stackoverflow.com/users/2778701/jamie-cole"}, "edited": false, "score": 1, "creation_date": 1440617020, "post_id": 32234648, "comment_id": 52352410, "body": "@JamieCole, The string is read only, while the pointer is not. What you are doing is to assign another memory address to the pointer. But you can&#39;t do <code>*disk ++</code> and change the value from &#39;A&#39; to &#39;B&#39;."}], "tags": [], "owner": {"reputation": 1593, "user_id": 3073656, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jl88K.png?s=128&g=1", "display_name": "daltonfury42", "link": "https://stackoverflow.com/users/3073656/daltonfury42"}, "is_accepted": false, "score": 2, "last_activity_date": 1440616124, "last_edit_date": 1440616124, "creation_date": 1440615603, "answer_id": 32234648, "question_id": 32233627, "link": "https://stackoverflow.com/questions/32233627/why-c-variable-doesnt-need-defining-properly-when-its-a-pointer/32234648#32234648", "title": "Why C++ variable doesn&#39;t need defining properly when it&#39;s a pointer?", "body": "<p>You are absolutely right to say that pointers can store only memory address. Then how is the second statement valid? Let me explain.</p>\n\n<p>When you put a sequence of characters in double quotes, what happens behind the screens is that the string gets stored in a read only computer memory and the address of the location where the string is stored is returned. So at run-time, the expression is evaluated, the string evaluates to the memory address, which is a character pointer. It is this pointer that is assigned to your pointer variable.</p>\n\n<p>So what is the difference between the two statements? The string in the second case is a constant, while the string declared by the first statement can be changed.</p>\n"}], "owner": {"reputation": 51, "user_id": 2778701, "user_type": "registered", "profile_image": "https://graph.facebook.com/594520283/picture?type=large", "display_name": "Jamie Cole", "link": "https://stackoverflow.com/users/2778701/jamie-cole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 32234399, "answer_count": 4, "score": 3, "last_activity_date": 1440616489, "creation_date": 1440612236, "question_id": 32233627, "link": "https://stackoverflow.com/questions/32233627/why-c-variable-doesnt-need-defining-properly-when-its-a-pointer", "title": "Why C++ variable doesn&#39;t need defining properly when it&#39;s a pointer?", "body": "<p>I'm completely new to the C++ language (pointers in particular, experience is mainly in PHP) and would love some explanation to the following (I've tried searching for answers).</p>\n\n<p>How are both lines of code able to do exactly the same job in my program? The second line seems to go against everything I've learnt &amp; understood so far about pointers.</p>\n\n<p><code>char disk[3] = \"D:\";</code></p>\n\n<p><code>char* disk = \"D:\";</code></p>\n\n<p>How am I able to initialize a pointer to anything other than a memory address? Not only that, in the second line I'm not declaring the array properly either - but it's still working?</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1440612291, "post_id": 32233626, "comment_id": 52349638, "body": "Or probably <code>MyTime anotherTime(6, 31, 27, 0, 0);</code>"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1440612377, "post_id": 32233626, "comment_id": 52349693, "body": "@juanchopanza Yeah, definitely."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 6, "last_activity_date": 1440612369, "last_edit_date": 1440612369, "creation_date": 1440612230, "answer_id": 32233626, "question_id": 32233578, "link": "https://stackoverflow.com/questions/32233578/overloaded-operator-stdostream-operator-prints-instance-memory-address/32233626#32233626", "title": "Overloaded operator std::ostream&amp; operator&lt;&lt; prints instance memory address", "body": "<p>You meant:</p>\n\n<pre><code>std::cout &lt;&lt; \"Time: \" &lt;&lt; *anotherTime &lt;&lt; std::endl;\n</code></pre>\n\n<p>Or, even better:</p>\n\n<pre><code>MyTime anotherTime (6, 31, 27, 0, 0);\nstd::cout &lt;&lt; \"Time: \" &lt;&lt; anotherTime &lt;&lt; std::endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": false, "score": 2, "last_activity_date": 1440612266, "creation_date": 1440612266, "answer_id": 32233639, "question_id": 32233578, "link": "https://stackoverflow.com/questions/32233578/overloaded-operator-stdostream-operator-prints-instance-memory-address/32233639#32233639", "title": "Overloaded operator std::ostream&amp; operator&lt;&lt; prints instance memory address", "body": "<p>Your operator expects an instance object by const reference but you're giving it a pointer. Either do <code>std::cout &lt;&lt; \"Time: \" &lt;&lt; *anotherTime &lt;&lt; std::endl;</code> (note the <code>*</code>) or add another operator:</p>\n\n<p><code>friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp;, const MyTime*);</code></p>\n"}, {"tags": [], "owner": {"reputation": 567, "user_id": 3787809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a355d3f472cc7e89d22417be63f3b32a?s=128&d=identicon&r=PG&f=1", "display_name": "MaxDevelop", "link": "https://stackoverflow.com/users/3787809/maxdevelop"}, "is_accepted": false, "score": 1, "last_activity_date": 1440612648, "creation_date": 1440612648, "answer_id": 32233753, "question_id": 32233578, "link": "https://stackoverflow.com/questions/32233578/overloaded-operator-stdostream-operator-prints-instance-memory-address/32233753#32233753", "title": "Overloaded operator std::ostream&amp; operator&lt;&lt; prints instance memory address", "body": "<pre><code>std::cout &lt;&lt; \"Time: \" &lt;&lt; anotherTime &lt;&lt; std::endl;\n</code></pre>\n\n<p>in that code above anotherTime instance is a myTime*, but it must be myTime.</p>\n\n<p>You have two solutions to fix this:</p>\n\n<p>Making myTime on stack, and it will work fine because anotherTime now not a pointer.</p>\n\n<pre><code>MyTime anotherTime(6, 31, 27, 0, 0);\n    std::cout &lt;&lt; \"Time: \" &lt;&lt; anotherTime &lt;&lt; std::endl;\n</code></pre>\n\n<p>dereference the pointer in your code, like this:</p>\n\n<pre><code>MyTime* anotherTime = new MyTime(6, 31, 27, 0, 0);\nstd::cout &lt;&lt; \"Time: \" &lt;&lt; *anotherTime &lt;&lt; std::endl;\n</code></pre>\n"}], "owner": {"reputation": 41503, "user_id": 68571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Yw9Lg.png?s=128&g=1", "display_name": "VansFannel", "link": "https://stackoverflow.com/users/68571/vansfannel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 32233626, "answer_count": 3, "score": 2, "last_activity_date": 1440612648, "creation_date": 1440612088, "question_id": 32233578, "link": "https://stackoverflow.com/questions/32233578/overloaded-operator-stdostream-operator-prints-instance-memory-address", "title": "Overloaded operator std::ostream&amp; operator&lt;&lt; prints instance memory address", "body": "<p>I'm trying to overload <code>std::ostream&amp; operator&lt;&lt;</code> doing this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass MyTime\n{\nprivate:\n    unsigned char _hour;\n    unsigned char _minute;\n    float _second;\n    signed char _timeZone;\n    unsigned char _daylightSavings;\n    double _decimalHour;\n\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp;, const MyTime&amp;);\npublic:\n    MyTime();\n    ~MyTime();\n};\n</code></pre>\n\n<p>And operator's implementation:</p>\n\n<pre><code>std::ostream&amp; operator&lt;&lt;(std::ostream &amp;strm, const MyTime &amp;time)\n{\n    return strm &lt;&lt; (int)time._hour &lt;&lt; \":\" &lt;&lt; (int)time._minute &lt;&lt; \":\" &lt;&lt; time._second &lt;&lt; \" +\" &lt;&lt; (int)time._daylightSavings &lt;&lt; \" zone: \" &lt;&lt; (int)time._timeZone &lt;&lt; \" decimal hour: \" &lt;&lt; time._decimalHour;\n}\n</code></pre>\n\n<p>But when I do this:</p>\n\n<pre><code>MyTime* anotherTime = new MyTime(6, 31, 27, 0, 0);\nstd::cout &lt;&lt; \"Time: \" &lt;&lt; anotherTime &lt;&lt; std::endl;\n</code></pre>\n\n<p>It only prints <code>anotherTime</code> memory address.</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 6, "creation_date": 1440612518, "post_id": 32233571, "comment_id": 52349785, "body": "Yep, one of your ternary operators is clearly missing the colon and second operand. You can clearly see it when you read that line. So just fix it. And probably already realized this kind of code should never be written."}, {"owner": {"reputation": 945, "user_id": 5269750, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/478621712312068/picture?type=large", "display_name": "Sai Ram Reddy", "link": "https://stackoverflow.com/users/5269750/sai-ram-reddy"}, "reply_to_user": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1440613904, "post_id": 32233571, "comment_id": 52350620, "body": "sir please correct it sir"}, {"owner": {"reputation": 945, "user_id": 5269750, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/478621712312068/picture?type=large", "display_name": "Sai Ram Reddy", "link": "https://stackoverflow.com/users/5269750/sai-ram-reddy"}, "reply_to_user": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1440614030, "post_id": 32233571, "comment_id": 52350686, "body": "sir all ternary operators are present sir"}, {"owner": {"reputation": 3975, "user_id": 1683939, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1da3dd4277594fb16a487ff70827e7d7?s=128&d=identicon&r=PG&f=1", "display_name": "bricklore", "link": "https://stackoverflow.com/users/1683939/bricklore"}, "reply_to_user": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 3, "creation_date": 1440615826, "post_id": 32233571, "comment_id": 52351707, "body": "@SamiKuhmonen I fixed it. See answer below. Think i got eye-cancer now"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1440617407, "post_id": 32233571, "comment_id": 52352631, "body": "Simple solution: <b>do not write such code</b>. Intermediate solution: Use a modern (i.e. one that was at least modern 10 years ago) editor which provides parenthesis highlighting."}], "answers": [{"comments": [{"owner": {"reputation": 3270, "user_id": 3059385, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dc876278926d67b3da29594601fdc82a?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Schneider", "link": "https://stackoverflow.com/users/3059385/christopher-schneider"}, "edited": false, "score": 0, "creation_date": 1440635539, "post_id": 32234687, "comment_id": 52359762, "body": "StackOverflow: Matching parentheses for those who can&#39;t do it themselves since 2008."}], "tags": [], "owner": {"reputation": 3975, "user_id": 1683939, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1da3dd4277594fb16a487ff70827e7d7?s=128&d=identicon&r=PG&f=1", "display_name": "bricklore", "link": "https://stackoverflow.com/users/1683939/bricklore"}, "is_accepted": true, "score": 2, "last_activity_date": 1440617425, "last_edit_date": 1440617425, "creation_date": 1440615790, "answer_id": 32234687, "question_id": 32233571, "link": "https://stackoverflow.com/questions/32233571/2nd-greatest-among-4-numbers-iam-getting-the-error-as-expected-before/32234687#32234687", "title": "2nd greatest among 4 numbers...iam getting the error as &quot;expected : before )&quot;", "body": "<p>I thought ternary operators were some kind of <strong>eye-candy</strong>.<br>\nThis really reminds me of some sort of eye-cancer (no offense).</p>\n\n<hr>\n\n<h2>Better solution (with any count of variables)</h2>\n\n<p>If I'm right you want to extract the second greatest number from <code>a</code>, <code>b</code>, <code>c</code> and <code>d</code> and save it in <code>k</code>.\nTry this:</p>\n\n<pre><code>int compare_int(const void* a, const void* b)\n{\n    int int_a = *((int*)a);\n    int int_b = *((int*)b);\n\n    if (int_a == int_b)\n        return 0;\n    else if ( int_a &lt; int_b )\n        return -1;\n    else\n        return 1;\n}\n\nint main()\n{\n    int value[4];\n\n    // set values in any order:\n    value[0] = 20; //second greatest\n    value[1] = -36;\n    value[2] = 294;\n    value[3] = 3;\n\n    qsort(value, 4, sizeof(int), compare_int);\n\n    // now the array is sorted by value.\n    // tho the second greatest number is in value[2].\n    printf(\"%d\\n\", value[2]);\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<h2>Reformatting your code</h2>\n\n<p>Nevertheless.. I reformatted your code a bit:</p>\n\n<pre><code>k = (((a &gt; b &amp;&amp; a &gt; c &amp;&amp; a &gt; d) ? (((b &gt; c &amp;&amp; b &gt; d) ? b : ((c &gt; b &amp;&amp; c &gt; d) ? c : d)))) : ((b &gt; a &amp;&amp; b &gt; c &amp;&amp; b &gt; d) ? (((a &gt; c &amp;&amp; a &gt; d) ? a : ((c &gt; a &amp;&amp; c &gt; d) ? c : d)))) : (((c &gt; a &amp;&amp; c &gt; b &amp;&amp; c &gt; d) ? (((a &gt; b &amp;&amp; a &gt; d) ? a : ((b &gt; a &amp;&amp; b &gt; d) ? b : d)))) : ((d &gt; a &amp;&amp; d &gt; b &amp;&amp; d &gt; c) ? (((a &gt; b &amp;&amp; a &gt; c) ? a : ((b &gt; c &amp;&amp; b &gt; a) ? b : c))))));\n</code></pre>\n\n<p>Is the same as:</p>\n\n<pre><code>k = (\n        // misplaced (\n            (a &gt; b &amp;&amp; a &gt; c &amp;&amp; a &gt; d) ?\n            (\n                (\n                    (b &gt; c &amp;&amp; b &gt; d) ? b :\n                    (\n                        (c &gt; b &amp;&amp; c &gt; d) ? c : d\n                    )\n                )\n            )\n        // misplaced )\n        :\n        // misplaced (\n            (b &gt; a &amp;&amp; b &gt; c &amp;&amp; b &gt; d) ?\n            (\n                (\n                    (a &gt; c &amp;&amp; a &gt; d) ? a :\n                    (\n                        (c &gt; a &amp;&amp; c &gt; d) ? c : d\n                    )\n                )\n            )\n        // misplaced )\n        :\n        (\n            // misplaced (\n                (c &gt; a &amp;&amp; c &gt; b &amp;&amp; c &gt; d) ?\n                (\n                    (\n                        (a &gt; b &amp;&amp; a &gt; d) ? a :\n                        (\n                            (b &gt; a &amp;&amp; b &gt; d) ? b : d\n                        )\n                    )\n                )\n            // misplaced )\n            :\n            (\n                (d &gt; a &amp;&amp; d &gt; b &amp;&amp; d &gt; c) ?\n                (\n                    (\n                        (a &gt; b &amp;&amp; a &gt; c) ? a :\n                        (\n                            (b &gt; c &amp;&amp; b &gt; a) ? b : c\n                        )\n                    )\n                )\n                // missing\n                // :\n                // (\n                //     expression\n                // )\n            )\n        )\n    );\n</code></pre>\n\n<blockquote>\n  <p>Easy huh?<br>\n  Now you can see that you are even misplaced some <code>(</code>'s and <code>)</code>'s and also several <code>:</code>'s</p>\n</blockquote>\n"}], "owner": {"reputation": 945, "user_id": 5269750, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/478621712312068/picture?type=large", "display_name": "Sai Ram Reddy", "link": "https://stackoverflow.com/users/5269750/sai-ram-reddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 32234687, "answer_count": 1, "score": -6, "last_activity_date": 1440617425, "creation_date": 1440612057, "last_edit_date": 1440612258, "question_id": 32233571, "link": "https://stackoverflow.com/questions/32233571/2nd-greatest-among-4-numbers-iam-getting-the-error-as-expected-before", "title": "2nd greatest among 4 numbers...iam getting the error as &quot;expected : before )&quot;", "body": "<pre><code>#include&lt;stdio.h&gt;\n #include&lt;conio.h&gt;\n</code></pre>\n\n<p>iam not getting the output it is showing expected : before )</p>\n\n<pre><code>int main() {\n\n      int a,b,c,d,k;\n      scanf(\"%d %d %d %d\",&amp;a,&amp;b,&amp;c,&amp;d);//input\n      k=(((a&gt;b &amp;&amp; a&gt;c &amp;&amp; a&gt;d) ? (((b&gt;c &amp;&amp; b&gt;d) ? b : ((c&gt;b &amp;&amp; c&gt;d) ? c:d)))) : ((b&gt;a &amp;&amp; b&gt;c &amp;&amp; b&gt;d) ? (((a&gt;c &amp;&amp; a&gt;d) ? a : ((c&gt;a &amp;&amp; c&gt;d) ? c:d)))) :  (((c&gt;a &amp;&amp; c&gt;b &amp;&amp; c&gt;d) ? (((a&gt;b &amp;&amp; a&gt;d) ? a : ((b&gt;a &amp;&amp; b&gt;d) ? b:d)))) : ((d&gt;a &amp;&amp; d&gt;b &amp;&amp; d&gt;c) ? (((a&gt;b &amp;&amp; a&gt;c) ? a : ((b&gt;c &amp;&amp; b&gt;a) ? b:c))))));\n      printf(\"%d\",k);\n      return 0;}\n</code></pre>\n"}, {"tags": ["c++", "templates", "observer-pattern", "virtual-functions"], "comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1440613535, "post_id": 32233561, "comment_id": 52350364, "body": "Does <a href=\"http://stackoverflow.com/a/32081759/1774667\">stackoverflow.com/a/32081759/1774667</a> solve your problem?  Basically, a &quot;subject&quot; or &quot;broadcaster&quot; is templated on its message.  Recievers are also typed on the message (in my case, recievers are just invokable objects, to allow easy use of lambdas, and removing an observer consists of destroying the returned <code>shared_ptr&lt;void&gt;</code> instead of going back to the broadcaster, because I find ensuring broadcasters outlive receivers to be a major source of bugs)"}], "answers": [{"comments": [{"owner": {"reputation": 2345, "user_id": 1014005, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d6d69c3361fa43927f60a9c4e15dfa9a?s=128&d=identicon&r=PG", "display_name": "idlackage", "link": "https://stackoverflow.com/users/1014005/idlackage"}, "edited": false, "score": 0, "creation_date": 1440616499, "post_id": 32234452, "comment_id": 52352119, "body": "Thanks, I am pretty much using inheritance currently but the problem is the <code>affectedItem</code> parameter--I don&#39;t want to pass in <code>Subject</code> or a third class because it may not be an object, it may be an int or bool or some other primitive data type. Going with the inventory example: if I removed an item at index <code>i</code>, as the GUI/Observer I&#39;d want to know exactly what <code>i</code> is."}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 1, "last_activity_date": 1440614962, "creation_date": 1440614962, "answer_id": 32234452, "question_id": 32233561, "link": "https://stackoverflow.com/questions/32233561/way-around-templated-virtual-function-for-events/32234452#32234452", "title": "Way around templated virtual function for events", "body": "<p>Unfortunately, as you might have seen at compilation time,  it's not allowed to have templates for virtual functions.</p>\n\n<p>As you have choosen virtual functions, I guess that you intend to use somehow polymorphism.  If this is the case you could perfectly well use a tempalteless implementation, using inheritance .  The only constraint is that your different actors inherit from your generic classes.  But his is not a strong constraint thanks to possible multiple inheritance.  </p>\n\n<p>The observer could look like (I've use Subject for the affected item, but you could use a third class): </p>\n\n<pre><code>class Subject; \nclass Observer {\npublic:\n    virtual void OnEvent(const EventHandle&amp; h, Subject&amp; affectedItem) = 0;\n    virtual ~Observer() {}  // virtual function ? =&gt; better foresee a virtual destructor\n};\n</code></pre>\n\n<p>The obervee  would remain almost unchanged:  </p>\n\n<pre><code>class Subject {\npublic:\n    ...\n    void Notify(const EventHandle&amp; h, Subject&amp; affectedItem) {\n        for (Observer* o : observers) {\n            o-&gt;OnEvent(h, affectedItem);\n        }\n    }\nprivate:\n    set&lt;Observer*&gt; observers;\n};\n</code></pre>\n\n<p>The using class would then be like:  </p>\n\n<pre><code>struct ConcreteObserverA : Observer {\n    void OnEvent(const EventHandle&amp; h, Subject&amp; affectedItem) override {\n        cout&lt;&lt;\"A:\"&lt;&lt;&amp;affectedItem&lt;&lt;endl;\n    }\nstruct ConcreteSubjectSA : Subject { };\n</code></pre>\n\n<p>Here a <a href=\"http://ideone.com/tQrlhf\" rel=\"nofollow\">live demo</a>.  </p>\n"}, {"tags": [], "owner": {"reputation": 2345, "user_id": 1014005, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d6d69c3361fa43927f60a9c4e15dfa9a?s=128&d=identicon&r=PG", "display_name": "idlackage", "link": "https://stackoverflow.com/users/1014005/idlackage"}, "is_accepted": true, "score": 0, "last_activity_date": 1440808046, "creation_date": 1440808046, "answer_id": 32281481, "question_id": 32233561, "link": "https://stackoverflow.com/questions/32233561/way-around-templated-virtual-function-for-events/32281481#32281481", "title": "Way around templated virtual function for events", "body": "<p>Really needed a quick solution so came up with this. I realize that this is terribly hacky, that I'm probably destroying the principals of programming and should throw my computer out the window to atone for the sin of even suggesting this as a solution, etc., but it does exactly what I want and is easy to understand so for now I'm going to keep with it until something better comes up.</p>\n\n<p>Basically I'm just wrapping (possibly primitive) data inside an object:</p>\n\n<pre><code>struct ParamBase {};\n\ntemplate &lt;class T&gt;\nstruct ConcreteParam : ParamBase {\n    T data;\n    ConcreteParam(T t) : data(t) {}\n};\n\nclass Observer {\npublic:\n    virtual void OnEvent(const EventHandle&amp; h, const ParamBase&amp; affectedItem) = 0;\nprotected:\n    template &lt;class T&gt;\n    T getParamData(const ParamBase&amp; p) {\n        const ParamBase* pb = &amp;p;\n        return ((ConcreteParam&lt;T&gt;*)pb)-&gt;data;\n    }\n};\n\nclass Subject {\npublic:\n    // Add/Remove functions stripped\n    template &lt;class T&gt;\n    void Notify(const EventHandle&amp; h, T affectedItem) {\n        for (Observer* o : observers) {\n            o-&gt;OnEvent(h, ConcreteParam&lt;T&gt;(affectedItem));\n        }\n    }\n};\n</code></pre>\n\n<p>Example usage:</p>\n\n<pre><code>class InventoryUI : public Observer {\npublic:\n    virtual void OnEvent(const EventHandle&amp; h, const ParamBase&amp; affectedItem) {\n        if (h == itemRemovedEvent) {\n            int index = getParamData&lt;int&gt;(affectedItem);\n            removeItemAt(index);\n        }\n        else if (h == itemAddedEvent) {\n            Item* item = getParamData&lt;Item*&gt;(affectedItem);\n            addItemToGrid(item);\n        }\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 2345, "user_id": 1014005, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d6d69c3361fa43927f60a9c4e15dfa9a?s=128&d=identicon&r=PG", "display_name": "idlackage", "link": "https://stackoverflow.com/users/1014005/idlackage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 32281481, "answer_count": 2, "score": 2, "last_activity_date": 1440808046, "creation_date": 1440612030, "last_edit_date": 1440614006, "question_id": 32233561, "link": "https://stackoverflow.com/questions/32233561/way-around-templated-virtual-function-for-events", "title": "Way around templated virtual function for events", "body": "<p>I'm basically trying to implement a generic observer pattern.</p>\n\n<pre><code>class Observer {\npublic:\n    template &lt;class T&gt;\n    virtual void OnEvent(const EventHandle&amp; h, T&amp; affectedItem) = 0;\n};\n\nclass Subject {\npublic:\n    void AddObserver(Observer* o) {\n        observers.Add(o);\n    }\n    void RemoveObserver(Observer* o) {\n        observers.Remove(o);\n    }\n    template &lt;class T&gt;\n    void Notify(const EventHandle&amp; h, T&amp; affectedItem) {\n        for (Observer* o : observers) {\n            o-&gt;OnEvent(h, affectedItem);\n        }\n    }\nprivate:\n    set&lt;Observer*&gt; observers;\n};\n</code></pre>\n\n<p>In <code>Observer::OnEvent()</code>, I'd like to get the item that had been affected in the event (say I just added something to an inventory and need to reflect the addition in the GUI--I would call <code>Subject::Notify(itemAddedEvent, newItem)</code>). I know I'll need some refactoring/redesign of classes but I'm stuck on how. What are some ways of getting around this?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1440612162, "post_id": 32233513, "comment_id": 52349564, "body": "Aren&#39;t you supposed to <i>append</i> the entries in the <code>argv</code> array into the destination string? That sounds more logical to me."}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1440612197, "post_id": 32233513, "comment_id": 52349584, "body": "Some code with what you have tried would be nice."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440612276, "post_id": 32233513, "comment_id": 52349629, "body": "@LightnessRacesinOrbit Good of you to remind me, good night everyone! :)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1440612285, "post_id": 32233513, "comment_id": 52349633, "body": "@JoachimPileborg: tata ;p"}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1440612276, "post_id": 32233594, "comment_id": 52349630, "body": "A two-line code dump without explanation, particularly one with a container of pointers, is harmful, not useful."}, {"owner": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440612324, "post_id": 32233594, "comment_id": 52349658, "body": "@LightnessRacesinOrbit Lazy questions get lazy answers."}, {"owner": {"reputation": 171, "user_id": 1646428, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/968f85446bad10d98ac115c26a8d2c58?s=128&d=identicon&r=PG", "display_name": "user1646428", "link": "https://stackoverflow.com/users/1646428/user1646428"}, "edited": false, "score": 0, "creation_date": 1440613006, "post_id": 32233594, "comment_id": 52350043, "body": "@matttnewport thanks for the answer!  When I pass the &#39;args&#39; array in my &#39;execv&#39; call, I get an error &quot;error: cannot convert &#39;std::vector&lt;const char*&gt;&#39; to &#39;char* const*&#39; for argument &#39;2&#39; to &#39;int execv(const char*, const* char*, ...)&quot;"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 171, "user_id": 1646428, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/968f85446bad10d98ac115c26a8d2c58?s=128&d=identicon&r=PG", "display_name": "user1646428", "link": "https://stackoverflow.com/users/1646428/user1646428"}, "edited": false, "score": 0, "creation_date": 1440613139, "post_id": 32233594, "comment_id": 52350124, "body": "@user1646428: Where does your question say that you&#39;re using <code>execv</code>?"}, {"owner": {"reputation": 171, "user_id": 1646428, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/968f85446bad10d98ac115c26a8d2c58?s=128&d=identicon&r=PG", "display_name": "user1646428", "link": "https://stackoverflow.com/users/1646428/user1646428"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440613271, "post_id": 32233594, "comment_id": 52350204, "body": "@lightness The post does not mention it, but I did state what the two arrays should consist of."}, {"owner": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "reply_to_user": {"reputation": 171, "user_id": 1646428, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/968f85446bad10d98ac115c26a8d2c58?s=128&d=identicon&r=PG", "display_name": "user1646428", "link": "https://stackoverflow.com/users/1646428/user1646428"}, "edited": false, "score": 0, "creation_date": 1440613298, "post_id": 32233594, "comment_id": 52350220, "body": "@user1646428 you need to pass <code>args.data()</code> not <code>args</code> to <code>execv()</code> since it expects a C style array not an <code>std::vector</code>. According to the man page for <code>execv()</code> you should also add a null terminator to the array, so you&#39;ll want a call to <code>args.push_back(nullptr)</code> before calling <code>execv()</code>."}, {"owner": {"reputation": 171, "user_id": 1646428, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/968f85446bad10d98ac115c26a8d2c58?s=128&d=identicon&r=PG", "display_name": "user1646428", "link": "https://stackoverflow.com/users/1646428/user1646428"}, "edited": false, "score": 0, "creation_date": 1440613611, "post_id": 32233594, "comment_id": 52350417, "body": "@mattnewport Thanks again for your help.  I have added both of those modifications in the codebase but now get the error &quot;error: invalid conversion from &#39;const char**&#39; to &#39;char* const*&#39; [-fpermissive]&quot;.  That error is pointing to the brackets of the args.data() reference."}, {"owner": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "reply_to_user": {"reputation": 171, "user_id": 1646428, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/968f85446bad10d98ac115c26a8d2c58?s=128&d=identicon&r=PG", "display_name": "user1646428", "link": "https://stackoverflow.com/users/1646428/user1646428"}, "edited": false, "score": 0, "creation_date": 1440613851, "post_id": 32233594, "comment_id": 52350582, "body": "@user1646428 It appears <code>execv()</code> expects a non-const char* array argument. You should declare your vector as <code>vector&lt;char*&gt;</code> rather than <code>vector&lt;const char*&gt;</code>"}, {"owner": {"reputation": 171, "user_id": 1646428, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/968f85446bad10d98ac115c26a8d2c58?s=128&d=identicon&r=PG", "display_name": "user1646428", "link": "https://stackoverflow.com/users/1646428/user1646428"}, "edited": false, "score": 0, "creation_date": 1440614595, "post_id": 32233594, "comment_id": 52351021, "body": "@mattnewport as stated above, with your corrections the program now compiles, but for some reason the execv is not running.  More testing I suppose...  Thanks again!"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 171, "user_id": 1646428, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/968f85446bad10d98ac115c26a8d2c58?s=128&d=identicon&r=PG", "display_name": "user1646428", "link": "https://stackoverflow.com/users/1646428/user1646428"}, "edited": false, "score": 0, "creation_date": 1440616380, "post_id": 32233594, "comment_id": 52352043, "body": "@user1646428: Well then you stated it wrong because you didn&#39;t mention <code>const* char*</code> at all."}, {"owner": {"reputation": 171, "user_id": 1646428, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/968f85446bad10d98ac115c26a8d2c58?s=128&d=identicon&r=PG", "display_name": "user1646428", "link": "https://stackoverflow.com/users/1646428/user1646428"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440616825, "post_id": 32233594, "comment_id": 52352303, "body": "@Lightness The error has actually changed depending on what code was used.  You must be having a bad day... all your posts seem rather negative."}], "tags": [], "owner": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "is_accepted": true, "score": -1, "last_activity_date": 1440613920, "last_edit_date": 1440613920, "creation_date": 1440612141, "answer_id": 32233594, "question_id": 32233513, "link": "https://stackoverflow.com/questions/32233513/how-to-copy-portions-of-an-array-into-another-array/32233594#32233594", "title": "How to copy portions of an array into another array", "body": "<p>There's very few good reasons to use <code>memcpy()</code> in C++. If I understand what you're asking correctly, here's an example of how to do it using <code>std::copy()</code>.</p>\n\n<pre><code>vector&lt;char*&gt; args(argc - 2);\ncopy(argv + 2, argv + argc, begin(args));\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/aacf03f189d3e1f7\" rel=\"nofollow\">Live example</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "edited": false, "score": 0, "creation_date": 1440614187, "post_id": 32234095, "comment_id": 52350768, "body": "I believe he is starting with an array of strings (from <code>argv</code>) and wants to pass some of them to <code>execv()</code> rather than starting with a space delimited argument string."}, {"owner": {"reputation": 171, "user_id": 1646428, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/968f85446bad10d98ac115c26a8d2c58?s=128&d=identicon&r=PG", "display_name": "user1646428", "link": "https://stackoverflow.com/users/1646428/user1646428"}, "reply_to_user": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "edited": false, "score": 0, "creation_date": 1440614293, "post_id": 32234095, "comment_id": 52350827, "body": "@mattnewport that&#39;s exactly what I&#39;m trying to do!  The software will now compile with your last reply to your answer so I&#39;m testing a few things real quick..."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 0, "last_activity_date": 1440613762, "creation_date": 1440613762, "answer_id": 32234095, "question_id": 32233513, "link": "https://stackoverflow.com/questions/32233513/how-to-copy-portions-of-an-array-into-another-array/32234095#32234095", "title": "How to copy portions of an array into another array", "body": "<p>Or am I misunderstanding your question? That you have a string containing space-delimited \"arguments\" and are supposed to create an argv-style array?</p>\n\n<p>Then I would suggest using <a href=\"http://en.cppreference.com/w/cpp/algorithm/copy\" rel=\"nofollow\"><code>std::copy</code></a> together with <a href=\"http://en.cppreference.com/w/cpp/io/basic_istringstream\" rel=\"nofollow\"><code>std::istringstream</code></a>, <a href=\"http://en.cppreference.com/w/cpp/iterator/istream_iterator\" rel=\"nofollow\"><code>std::istream_iterator</code></a> and <a href=\"http://en.cppreference.com/w/cpp/iterator/back_inserter\" rel=\"nofollow\"><code>std::back_inserter</code></a>, something like this:</p>\n\n<pre><code>std::vector&lt;std::string&gt; args;\nstd::istringstream istr(string_containing_args);\n\nstd::copy(std::istream_iterator&lt;std::string&gt;(istr),\n          std::istream_iterator&lt;std::string&gt;(),\n          std::back_inserter(args));\n</code></pre>\n\n<p>Now you have a vector of strings, similar to an <code>argv</code> array. The problem here is that you seem to be wanting a proper <code>argv</code> style array, to pass to e.g. <code>execv</code>. This can be done by <a href=\"http://en.cppreference.com/w/cpp/algorithm/transform\" rel=\"nofollow\">transforming</a> the vector into another vector:</p>\n\n<pre><code>std::vector&lt;const char*&gt; execv_args(args.size());\nstd::transform(std::begin(args), std::end(args),\n               std::begin(execv_args),\n               [](const std::string&amp; s){ return s.c_str(); });\nexecv_args.push_back(nullptr);\n</code></pre>\n\n<p><sub>Important note: The <code>args</code> vector must have a lifetime that exceeds the lifetime of the <code>execv_args</code> array, or the pointers will become invalid.</sub></p>\n\n<p>Now the final vector could be used like e.g.</p>\n\n<pre><code>execv(execv_args[0], &amp;execv_args[1]);\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 1646428, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/968f85446bad10d98ac115c26a8d2c58?s=128&d=identicon&r=PG", "display_name": "user1646428", "link": "https://stackoverflow.com/users/1646428/user1646428"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 32233594, "answer_count": 2, "score": -2, "last_activity_date": 1440615141, "creation_date": 1440611896, "last_edit_date": 1440615141, "question_id": 32233513, "link": "https://stackoverflow.com/questions/32233513/how-to-copy-portions-of-an-array-into-another-array", "title": "How to copy portions of an array into another array", "body": "<p>Good morning!  I need to copy a portion of one array into another array starting at position 2 and consuming all the remaining value.  The first array is the 'argv' array of type 'char**' but the second array needs to be of type 'const char*'.  It appears that there are two ways to do this in C++ - std:copy and memcpy.  Which would be better to handle this situation since the two arrays are of different types and what would an example look like?</p>\n"}, {"tags": ["c++", "winapi", "ipc", "stdvector"], "comments": [{"owner": {"reputation": 1117, "user_id": 2451677, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/1a2d620cdfad7a1ba7d00c732db0d058?s=128&d=identicon&r=PG", "display_name": "grisha", "link": "https://stackoverflow.com/users/2451677/grisha"}, "edited": false, "score": 0, "creation_date": 1440617146, "post_id": 32233497, "comment_id": 52352484, "body": "That&#39;s complitelly wrong. sizeof of your vector is not the same as the size of the data that is inside that vector. Try to output the sizeof of vector of 100 ints. It will be something like 20 bytes, see? You need to change the way you save the data in the memory"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1440628280, "post_id": 32233497, "comment_id": 52357787, "body": "File mapping is likely the wrong solution. Why did you settle on that?"}], "answers": [{"tags": [], "owner": {"reputation": 9996, "user_id": 2360695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542ff60c0222369f65f9af25daacc03d?s=128&d=identicon&r=PG", "display_name": "ScottMcP-MVP", "link": "https://stackoverflow.com/users/2360695/scottmcp-mvp"}, "is_accepted": false, "score": 2, "last_activity_date": 1440617305, "creation_date": 1440617305, "answer_id": 32235142, "question_id": 32233497, "link": "https://stackoverflow.com/questions/32233497/ipc-shared-memory-stdvector-in-windows/32235142#32235142", "title": "IPC shared memory std::vector in windows", "body": "<p>Pointers in the first program are useless in the second program, and vice versa. You cannot use a pointer from program A in program B because they have different virtual memory spaces. </p>\n"}, {"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1440699770, "post_id": 32235420, "comment_id": 52393684, "body": "A text file is probably the worst idea, when you want to implement IPC. Who is going to clean up the garbage you threw on the sidewalk, for example? What coherence guarantees are in place? How do you signal modifications? How do you signal, when it&#39;s safe to consume the data? Way easier and way more appropriate: Serialize the data and transmit it over a (named) pipe."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1440701876, "post_id": 32235420, "comment_id": 52394781, "body": "The example doesn&#39;t use any actual IPC.  Shared memory, and IPC in general, should be avoided unless it&#39;s absolutely necessary.  However, yes there are other mechanisms that avoid the complexity of synchronizing access, and give better semantics."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1440703465, "post_id": 32235420, "comment_id": 52395607, "body": "The example <b>does</b> use IPC. It starts with <code>CreateFileMapping(INVALID_HANDLE_VALUE, NULL, PAGE_READWRITE, 0, sizeof(vector &lt;SubWindow*&gt;), TEXT(&quot;MyMappedMem&quot;))</code>, and gets remapped into another instance of the same module (in another process)."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1440707900, "post_id": 32235420, "comment_id": 52397899, "body": "No, it doesn&#39;t.  The example establishes shared memory, but it doesn&#39;t use it for IPC.  No processes are communicating.  What the incorrect example does is attempt to share a <code>std::vector</code> instantiated in the first process, in which case a simple text format would suffice.  If you think I&#39;m wrong, write an answer describing how you would re-write the example using a socket or a named pipe."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1440713830, "post_id": 32235420, "comment_id": 52400443, "body": "You are misinterpreting the example. The code is compiled into a DLL. This DLL is linked into two separate processes. One of them calls <code>SetData</code>, the other process calls <code>DataWork</code>. The same filemapping object is accessed from both processes. This is called IPC. The way it is implemented doesn&#39;t work as expected. Nonetheless, IPC is the documented intent."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1440714432, "post_id": 32235420, "comment_id": 52400674, "body": "The data is entirely static in the example.  If that wasn&#39;t the intent, it&#39;s up to the O.P. to clarify.  You&#39;re welcome to add your own answer, but I&#39;m not going to recommend using IPC when it isn&#39;t necessary."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1440714741, "post_id": 32235420, "comment_id": 52400773, "body": "The call to <code>memcpy</code> copies the data into the filemapping object in one process, and the <code>reinterpret_cast</code> and indexing operator read the data in another process. Since <code>iMainWin</code> is an input to <code>SetData</code>, I don&#39;t see, how you conclude that it were static. The intent is to have process B access dynamic data provided by process A. The implementation uses IPC, and the question <b>clearly</b> details this."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1440716565, "post_id": 32235420, "comment_id": 52401304, "body": "Add another answer.  There are a lot of issues with the example, and my personal opinion is that IPC shouldn&#39;t be encouraged unless there&#39;s a valid justification."}], "tags": [], "owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "is_accepted": false, "score": 1, "last_activity_date": 1440618316, "creation_date": 1440618316, "answer_id": 32235420, "question_id": 32233497, "link": "https://stackoverflow.com/questions/32233497/ipc-shared-memory-stdvector-in-windows/32235420#32235420", "title": "IPC shared memory std::vector in windows", "body": "<p>Attempting to share a <code>std::vector</code> using shared memory is almost certainly wrong.  The <code>std::vector</code> will allocate memory from the calling process, which will not be accessible via any other process.  Furthermore, pointers pointing to local addresses will not be accessible any other process.</p>\n\n<p>Additionally, you would need to coordinate access to the <code>std::vector</code> using a mutex, which you aren't doing.</p>\n\n<p>In this situation, I can't see any reason why using a text file wouldn't be sufficient.</p>\n"}], "owner": {"reputation": 1, "user_id": 4843012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e534e7b533061dad19a2366d9ec00bd?s=128&d=identicon&r=PG&f=1", "display_name": "A. Williams", "link": "https://stackoverflow.com/users/4843012/a-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 685, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1440620606, "creation_date": 1440611827, "last_edit_date": 1440620606, "question_id": 32233497, "link": "https://stackoverflow.com/questions/32233497/ipc-shared-memory-stdvector-in-windows", "title": "IPC shared memory std::vector in windows", "body": "<p>I have two win32 programs, and they communicate with one DLL via IPC. I use MSVC ++ so it makes sense that I use CreateFileMapping and MapViewOfFile. I already have some codes done, the problem is that when my second program starts and loads a DLL and starts to work with DLLs, everything is fine and IPC communication is going well. When the first program starts and loads a DLL and starts to work with DLLs and the second program starts and loads a DLL and starts to work with DLLs, second program stops communicating with DLL via IPC. The IPC communication is probably running but probably in wrong way. It obtains the size and capacity, but the content is junk. The content of the shared memory is vector of pointers! What am I doing wrong? Is there anything I need to know to get those work fine? </p>\n\n<pre><code>//The sender writer\nMainWindow::~MainWindow()\n{\n    UnmapViewOfFile(pBuf);\n    CloseHandle(hMapFile);\n}\n\nvoid MainWindow::SetData(vector &lt;SubWindow*&gt; &amp;iMainWin)\n{\n    hMapFile = CreateFileMapping(INVALID_HANDLE_VALUE, NULL, PAGE_READWRITE, 0, sizeof(vector &lt;SubWindow*&gt;), TEXT(\"MyMappedMem\"));\n\n    if (hMapFile == NULL)\n        return;\n\n    vector &lt;SubWindow*&gt; *pBuf = reinterpret_cast&lt;std::vector&lt;SubWindow*&gt;*&gt; (MapViewOfFile(hMapFile, FILE_MAP_ALL_ACCESS, 0, 0, sizeof(vector &lt;SubWindow*&gt;)));\n\n    if (pBuf == NULL)\n    {\n        CloseHandle(hMapFile);\n        return;\n    }\n\n    memcpy(pBuf, &amp;iMainWin, sizeof(iMainWin));\n    return;\n}\n\n//The reciever reader \nvoid DataWork()\n{\n    do{\n       if (strcmp(pe32.szExeFile, \"Win32Project.exe\") == 0)\n       {\n           bProcessFound = true;\n           break;\n       }\n     } while (Process32Next(hProcessSnap, &amp;pe32));\n\n     if (!bProcessFound)\n     {\n         MessageBox(NULL, TEXT(\"ERROR Process32Next Openning DLL\"), TEXT(\"ERROR\"), MB_OK);\n         return;\n     }\n     else\n     {\n        HANDLE hMapFile = OpenFileMapping(FILE_MAP_ALL_ACCESS, FALSE, TEXT(\"MyMappedMem\"));\n\n        if (hMapFile == NULL)\n        {\n            MessageBox(NULL, TEXT(\"ERROR OpenFileMapping DLL\"), TEXT(\"ERROR\"), MB_OK);\n            return;\n        }\n\n        vector&lt;SubWindow*&gt; *pBuf = reinterpret_cast&lt;std::vector&lt;SubWindow*&gt;*&gt; (MapViewOfFile(hMapFile, FILE_MAP_ALL_ACCESS, 0, 0, sizeof(vector &lt;SubWindow*&gt;)));\n\n        if (pBuf == NULL)\n        {\n            MessageBox(NULL, TEXT(\"ERROR MapViewOfFile DLL\"), TEXT(\"ERROR\"), MB_OK);\n            CloseHandle(hMapFile);\n            return;\n        }\n\n        for (int i = 0; i &lt; buf-&gt;size(); i++)\n            (*buf)[i]-&gt;value_access;\n\n        UnmapViewOfFile(pBuf);\n        CloseHandle(hMapFile);\n     }\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "for-loop", "iterator"], "comments": [{"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1440612258, "post_id": 32233454, "comment_id": 52349616, "body": "You mean <a href=\"http://coliru.stacked-crooked.com/a/9e2067e0122fc685\" rel=\"nofollow noreferrer\">this</a> ?"}, {"owner": {"reputation": 1129, "user_id": 1866808, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/590f81e0d4226f41f1d0f9cc4c01fd36?s=128&d=identicon&r=PG", "display_name": "bombax", "link": "https://stackoverflow.com/users/1866808/bombax"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1440612306, "post_id": 32233454, "comment_id": 52349648, "body": "Yes, exactly! Is there a <code>std</code> structure that does exactly that?"}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 1, "creation_date": 1440612355, "post_id": 32233454, "comment_id": 52349681, "body": "No, to my best knowledge there is nothing like that in the standard library of both C++11 and C++14"}], "answers": [{"comments": [{"owner": {"reputation": 1129, "user_id": 1866808, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/590f81e0d4226f41f1d0f9cc4c01fd36?s=128&d=identicon&r=PG", "display_name": "bombax", "link": "https://stackoverflow.com/users/1866808/bombax"}, "edited": false, "score": 0, "creation_date": 1440612087, "post_id": 32233521, "comment_id": 52349521, "body": "Edited to clarify that sometimes I do calculations and so on and not only insertion."}, {"owner": {"reputation": 1129, "user_id": 1866808, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/590f81e0d4226f41f1d0f9cc4c01fd36?s=128&d=identicon&r=PG", "display_name": "bombax", "link": "https://stackoverflow.com/users/1866808/bombax"}, "edited": false, "score": 0, "creation_date": 1440612648, "post_id": 32233521, "comment_id": 52349855, "body": "Thanks, I use boost, so this is probably my best bet!"}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 5, "last_activity_date": 1440612355, "last_edit_date": 1440612355, "creation_date": 1440611917, "answer_id": 32233521, "question_id": 32233454, "link": "https://stackoverflow.com/questions/32233454/c11-range-based-for-loop-over-range-described-by-templated-iterators/32233521#32233521", "title": "C++11: Range-based for loop over range described by templated iterators", "body": "<p>There's nothing in the standard library. Boost has <a href=\"http://www.boost.org/doc/libs/1_59_0/libs/range/doc/html/range/reference/utilities/iterator_range.html\" rel=\"nofollow\"><code>make_iterator_range</code></a>, a simplified version of which is trivial to write:</p>\n\n<pre><code>template&lt;class Iterator&gt;\nstruct iter_range {\n    Iterator begin_, end_;\n    Iterator begin() const { return begin_; }\n    Iterator end() const { return end_; }\n};\n\ntemplate&lt;class Iterator&gt;\niter_range&lt;Iterator&gt; make_range(Iterator b, Iterator e) { return {b, e}; }\n</code></pre>\n\n<hr>\n\n<p>The original question just called <code>push_back</code>. For that, it doesn't need a loop. Just use the C++03 range overload of <code>insert</code>:</p>\n\n<pre><code>mInternal.insert(mInternal.end(), begin, end);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1129, "user_id": 1866808, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/590f81e0d4226f41f1d0f9cc4c01fd36?s=128&d=identicon&r=PG", "display_name": "bombax", "link": "https://stackoverflow.com/users/1866808/bombax"}, "edited": false, "score": 0, "creation_date": 1440612606, "post_id": 32233723, "comment_id": 52349831, "body": "Thanks, very helpful!"}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 2, "last_activity_date": 1440612553, "creation_date": 1440612553, "answer_id": 32233723, "question_id": 32233454, "link": "https://stackoverflow.com/questions/32233454/c11-range-based-for-loop-over-range-described-by-templated-iterators/32233723#32233723", "title": "C++11: Range-based for loop over range described by templated iterators", "body": "<pre><code>template&lt;class It&gt;\nstruct range_t {\n  It b; It e;\n  It begin() const { return b; }\n  It end() const { return e; }\n};\ntemplate&lt;class It&gt;\nrange_t&lt;It&gt; range( It b, It e ) {\n  return {std::forward&lt;It&gt;(b), std::forward&lt;It&gt;(e)};\n}\n</code></pre>\n\n<p>then:</p>\n\n<pre><code>template &lt;Iterator&gt;\nvoid doSomethingWithObjects(Iterator begin, Iterator end) {\n    for (auto&amp;&amp; point : range(begin, end)) {\n        mInternal.doSomething(point);\n    }\n}\n</code></pre>\n\n<p>and bob is your uncle.</p>\n\n<p>\"<a href=\"https://github.com/ericniebler/range-v3\" rel=\"nofollow\">Range-v3</a>\" is a library undergoing the standardization process that contains stuff like this already.  Boost also has similar mechanisms.</p>\n\n<p>But this kind of thing is simple enough to roll your own and forget about it.  (Better versions include <code>empty</code>, conditionally support <code>size</code> and <code>[]</code>, can be constructed from containers and C arrays and anything iterable, know if they are condiguous, conditionally store a copy of the incoming container for reference lifetime extension, etc: but you don't really need any of that).</p>\n"}, {"comments": [{"owner": {"reputation": 1129, "user_id": 1866808, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/590f81e0d4226f41f1d0f9cc4c01fd36?s=128&d=identicon&r=PG", "display_name": "bombax", "link": "https://stackoverflow.com/users/1866808/bombax"}, "edited": false, "score": 0, "creation_date": 1440612782, "post_id": 32233737, "comment_id": 52349922, "body": "Thanks, very helpful! The only problem is of course if you want to pass an array, which sometimes happens in my code."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 1129, "user_id": 1866808, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/590f81e0d4226f41f1d0f9cc4c01fd36?s=128&d=identicon&r=PG", "display_name": "bombax", "link": "https://stackoverflow.com/users/1866808/bombax"}, "edited": false, "score": 0, "creation_date": 1440613045, "post_id": 32233737, "comment_id": 52350065, "body": "@bombax, for that use case the use of the <code>range_t</code> object suggested by the other answers will come handy."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1440612602, "creation_date": 1440612602, "answer_id": 32233737, "question_id": 32233454, "link": "https://stackoverflow.com/questions/32233454/c11-range-based-for-loop-over-range-described-by-templated-iterators/32233737#32233737", "title": "C++11: Range-based for loop over range described by templated iterators", "body": "<p>I would add a function overload and keep the existing function around to make the transition gradual and less disruptive.</p>\n\n<pre><code>template &lt;typename Container&gt;\nvoid doSomethingWithObjects(Container&amp;&amp; c) {\n    for (auto&amp;&amp; item: c) {\n        mInternal.doSomething(item);\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 0, "last_activity_date": 1440622757, "creation_date": 1440622757, "answer_id": 32236597, "question_id": 32233454, "link": "https://stackoverflow.com/questions/32233454/c11-range-based-for-loop-over-range-described-by-templated-iterators/32236597#32236597", "title": "C++11: Range-based for loop over range described by templated iterators", "body": "<p>You don't actually need to turn them into anything. Just use the iterators with <code>std::for_each</code>:</p>\n\n<pre><code>template &lt;Iterator&gt;\nvoid doSomethingWithObjects(Iterator begin, Iterator end) {\n    std::for_each(begin, end, [this](auto&amp;&amp; point){\n        mInternal.doSomething(point);\n    }\n\n    // C++11 version\n    std::for_each(begin, end, [this](decltype(*begin)&amp; point) {\n        mInternal.doSomething(point);\n    }\n}\n</code></pre>\n\n<p>or write the simple loop:</p>\n\n<pre><code>template &lt;Iterator&gt;\nvoid doSomethingWithObjects(Iterator begin, Iterator end) {\n    for (; begin != end; ++begin) {\n        mInternal.doSomething(*begin);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1129, "user_id": 1866808, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/590f81e0d4226f41f1d0f9cc4c01fd36?s=128&d=identicon&r=PG", "display_name": "bombax", "link": "https://stackoverflow.com/users/1866808/bombax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 0, "accepted_answer_id": 32233521, "answer_count": 4, "score": 1, "last_activity_date": 1440622757, "creation_date": 1440611711, "last_edit_date": 1440612067, "question_id": 32233454, "link": "https://stackoverflow.com/questions/32233454/c11-range-based-for-loop-over-range-described-by-templated-iterators", "title": "C++11: Range-based for loop over range described by templated iterators", "body": "<p>In my C++03 code, I have a lot of functions that look like this:</p>\n\n<pre><code>class A {\npublic:\n    template &lt;Iterator&gt;\n    void doSomethingWithObjects(Iterator begin, Iterator end) {\n        for (Iterator point = begin; point != end; point++) {\n            mInternal.doSomething(*point);\n        }\n    }\nprivate:\n    DataStructure mInternal;\n};\n</code></pre>\n\n<p>I'm trying to use C++11's features as much as possible in new code, in particular the range-based for loop. My question is, how would I do this with templated iterators? Is there a magic C++ structure that takes two templated iterator types, and turns them into a range expression? In other words, I'm looking for something like this:</p>\n\n<pre><code>class A {\npublic:\n    template &lt;Iterator&gt;\n    void doSomethingWithObjects(Iterator begin, Iterator end) {\n        static_assert(std::is_same&lt;Point, typename std::decay&lt;Iterator&gt;::type&gt;::value, \"wrong type mate!\"); // extra credit\n        for (auto&amp;&amp; point : std::magic(begin, end)) {\n            mInternal.doSomething(point);\n        }\n    }\nprivate:\n    DataStructure mInternal;\n};\n</code></pre>\n\n<p>If there is a new, preferred ways to do this kind of \"add a number of objects to this structure\" in C++11, I'm all ears, too.</p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440610600, "post_id": 32233019, "comment_id": 52348671, "body": "IIRC <code>usleep(1.0E15);</code> doesn&#39;t take a <code>float</code> or <code>double</code> value??"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1440610694, "post_id": 32233019, "comment_id": 52348724, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: So what? <code>1e15</code> is implicitly convertible to <code>int</code>. Though that&#39;s a pretty bit <code>int</code>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440611489, "post_id": 32233019, "comment_id": 52349168, "body": "@LightnessRacesinOrbit <i>&quot;Though that&#39;s a pretty bit <code>int</code>&quot;</i> was my point of course. Anyways leaves that being a big value."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440611889, "post_id": 32233019, "comment_id": 52349383, "body": "@OP Also you should note, that <code>usleep()</code> is <a href=\"http://stackoverflow.com/questions/1157209/is-there-an-alternative-sleep-function-in-c-to-milliseconds\">actually deprecated</a>."}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1440615037, "post_id": 32233019, "comment_id": 52351274, "body": "How about sending it a signal?"}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 7, "creation_date": 1440610904, "post_id": 32233198, "comment_id": 52348859, "body": "<i>&quot;its not good ides to use sleep in your thread&quot;</i> Why&#39;s that then?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1440611583, "post_id": 32233198, "comment_id": 52349231, "body": "You should flesh out the <code>std::mutex</code> parts of your answer."}], "tags": [], "owner": {"reputation": 1639, "user_id": 2073349, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0266d3aafa1813f794a5b71058d5cd27?s=128&d=identicon&r=PG", "display_name": "Ritesh", "link": "https://stackoverflow.com/users/2073349/ritesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1440618897, "last_edit_date": 1440618897, "creation_date": 1440610796, "answer_id": 32233198, "question_id": 32233019, "link": "https://stackoverflow.com/questions/32233019/wake-up-a-stdthread-from-usleep/32233198#32233198", "title": "Wake up a std::thread from usleep", "body": "<p>One possible approach:(There are many ways to accomplish..also its not good idea to use sleep in your thread)</p>\n\n<pre><code>///Define a mutex\nvoid sleepy()\n{\n    //try to take mutex lock which this thread will get if main thread leaves that\n    //usleep(1.0E15);\n}\n\n\nint main()\n{\n    //Init the Mutex\n    //take mutex lock\n    std :: thread sleepy_thread(sleepy);\n\n    //Do your work\n    //unlock the mutex...This will enable the sleepy thread to run\n    sleepy_thread.join();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "edited": false, "score": 1, "creation_date": 1440612326, "post_id": 32233431, "comment_id": 52349659, "body": "My answer using pthread was voted down. This also uses a pthread library."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1440612336, "post_id": 32233431, "comment_id": 52349665, "body": "Is semaphore actually c++ standard?? The best surrogate I can think of is <a href=\"http://en.cppreference.com/w/cpp/thread/condition_variable\" rel=\"nofollow noreferrer\"><code>std::condition_variable </code></a>."}, {"owner": {"reputation": 6932, "user_id": 774236, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7e46879a230ff1e28cd975e3b0a0873b?s=128&d=identicon&r=PG", "display_name": "Matteo Monti", "link": "https://stackoverflow.com/users/774236/matteo-monti"}, "edited": false, "score": 0, "creation_date": 1440615590, "post_id": 32233431, "comment_id": 52351569, "body": "I actually like this idea a lot...! Why was this downvoted?"}, {"owner": {"reputation": 4041, "user_id": 624766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aad47bf54542ea73c2dcda9a1002e6ec?s=128&d=identicon&r=PG", "display_name": "pelya", "link": "https://stackoverflow.com/users/624766/pelya"}, "edited": false, "score": 1, "creation_date": 1440618051, "post_id": 32233431, "comment_id": 52352990, "body": "The example uses Linux-specific <code>usleep</code>, why can&#39;t we use Linux-specific semaphores here?"}], "tags": [], "owner": {"reputation": 4041, "user_id": 624766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aad47bf54542ea73c2dcda9a1002e6ec?s=128&d=identicon&r=PG", "display_name": "pelya", "link": "https://stackoverflow.com/users/624766/pelya"}, "is_accepted": false, "score": 0, "last_activity_date": 1440611632, "creation_date": 1440611632, "answer_id": 32233431, "question_id": 32233019, "link": "https://stackoverflow.com/questions/32233019/wake-up-a-stdthread-from-usleep/32233431#32233431", "title": "Wake up a std::thread from usleep", "body": "<p>Just use a semaphore, call <a href=\"http://linux.die.net/man/3/sem_timedwait\" rel=\"nofollow\">sem_timedwait</a> instead of <code>usleep</code>, and call <a href=\"http://linux.die.net/man/3/sem_post\" rel=\"nofollow\">sem_post</a> before calling <code>join</code></p>\n"}, {"comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1440611934, "post_id": 32233490, "comment_id": 52349411, "body": "This code is illegal because the two accesses to <code>sharedVar</code> conflict, according to the C++ standard."}, {"owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1440612233, "post_id": 32233490, "comment_id": 52349606, "body": "Can&#39;t possibly be illegal. Do you mean Undefined behavior? If sleepy reads an old version of sharedVar in one loop, it will just read the newer value one loop later."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1440612290, "post_id": 32233490, "comment_id": 52349637, "body": "The issue is not that sleepy might read an old version. The issue is that <i>anything</i> can happen."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1440614964, "post_id": 32233490, "comment_id": 52351229, "body": "At least <code>std::atomic&lt;int&gt; sharedVar = 1;</code> please!"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1518987629, "post_id": 32233490, "comment_id": 84716543, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: Best not, since that doesn&#39;t compile."}], "tags": [], "owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "is_accepted": false, "score": 0, "last_activity_date": 1441119251, "last_edit_date": 1441119251, "creation_date": 1440611814, "answer_id": 32233490, "question_id": 32233019, "link": "https://stackoverflow.com/questions/32233019/wake-up-a-stdthread-from-usleep/32233490#32233490", "title": "Wake up a std::thread from usleep", "body": "<p>Sleep for a short amount of time and look to see if a variable has changed.</p>\n\n<pre><code>#include &lt;atomic&gt;\n#include &lt;unistd.h&gt;\n#include &lt;thread&gt;\n\nstd::atomic&lt;int&gt; sharedVar(1);\nvoid sleepy()\n{\n    while (sharedVar.load())\n    {\n        usleep(500);\n    }\n}\n\nint main()\n{\n    std :: thread sleepy_thread(sleepy);\n    // wake up\n    sharedVar.store(0);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 2, "last_activity_date": 1440614447, "last_edit_date": 1440614447, "creation_date": 1440613905, "answer_id": 32234127, "question_id": 32233019, "link": "https://stackoverflow.com/questions/32233019/wake-up-a-stdthread-from-usleep/32234127#32234127", "title": "Wake up a std::thread from usleep", "body": "<blockquote>\n  <p><em>\"Is there a way to tell it from the extern \"hey man, wake up!\", so that I can join it in a reasonable amount of time?\"</em> </p>\n</blockquote>\n\n<p>No, there's no way to do so according c++ standard mechanisms.</p>\n\n<p>Well, to get your thread being woken, you'll need a mechanism that leaves other threads in control of it. Besides <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/usleep.html\" rel=\"nofollow\"><code>usleep()</code></a> is a deprecated POSIX function:</p>\n\n<blockquote>\n  <h3>Issue 6</h3>\n  \n  <p>The DESCRIPTION is updated to avoid use of the term \"must\" for application requirements.</p>\n  \n  <p><strong>This function is marked obsolescent.</strong></p>\n  \n  <p>IEEE Std 1003.1-2001/Cor 2-2004, item XSH/TC2/D6/144 is applied, updating the DESCRIPTION from \"process' signal mask\" to \"thread's signal mask\", and adding a statement that the <code>usleep()</code> function need not be reentrant.</p>\n</blockquote>\n\n<p>there's no way you could get control of another thread, that's going to call that function.<br>\nSame thing for any other <em><code>sleep()</code></em> functions even if declared from <a href=\"http://en.cppreference.com/w/cpp/thread/sleep_for\" rel=\"nofollow\"><code>std::thread</code></a>.</p>\n\n<p>As mentioned in other answers or comments, you'll need to use a timeable synchronization mechanism like a <a href=\"http://en.cppreference.com/w/cpp/thread/timed_mutex\" rel=\"nofollow\"><code>std::timed_mutex</code></a> or a <a href=\"http://en.cppreference.com/w/cpp/thread/condition_variable\" rel=\"nofollow\"><code>std::condition_variable</code></a> from your thread function.</p>\n"}, {"tags": [], "owner": {"reputation": 10317, "user_id": 666785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NIzSh.jpg?s=128&g=1", "display_name": "sbabbi", "link": "https://stackoverflow.com/users/666785/sbabbi"}, "is_accepted": false, "score": 9, "last_activity_date": 1440616055, "creation_date": 1440616055, "answer_id": 32234772, "question_id": 32233019, "link": "https://stackoverflow.com/questions/32233019/wake-up-a-stdthread-from-usleep/32234772#32234772", "title": "Wake up a std::thread from usleep", "body": "<p>No, it is not possible using the threads from the standard library.</p>\n\n<p>One possible workaround is to use <code>condition_variable::sleep_for</code> along with a <code>mutex</code> and a boolean condition.</p>\n\n<pre><code>#include &lt;mutex&gt;\n#include &lt;thread&gt;\n#include &lt;condition_variable&gt;\n\nstd::mutex mymutex;\nstd::condition_variable mycond;\nbool flag = false;\n\nvoid sleepy() {\n     std::unique_lock&lt;std::mutex&gt; lock(mymutex);\n     mycond.wait_for( lock,\n                      std::chrono::seconds(1000),\n                      []() { return flag; } );\n}\n\nint main()\n{\n    std :: thread sleepy_thread(sleepy);\n\n    {\n       std::lock_guard&lt;std::mutex&gt; lock(mymutex);\n       flag = true;\n       mycond.notify_one();\n    }\n\n    sleepy_thread.join();\n}\n</code></pre>\n\n<p>Alternatively, you can use the <a href=\"http://www.boost.org/doc/libs/1_59_0/doc/html/thread.html\" rel=\"noreferrer\">Boost.Thread</a> library, which implements the <em>interruption-point</em> concept:</p>\n\n<pre><code>#include &lt;boost/thread/thread.hpp&gt;\n\nvoid sleepy()\n{\n    // this_thread::sleep_for is an interruption point.\n    boost::this_thread::sleep_for( boost::chrono::seconds(1000) );\n}\n\nint main()\n{\n    boost::thread t( sleepy );\n\n    t.interrupt();\n    t.join();\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "is_accepted": false, "score": 6, "last_activity_date": 1518987015, "last_edit_date": 1518987015, "creation_date": 1440616984, "answer_id": 32235042, "question_id": 32233019, "link": "https://stackoverflow.com/questions/32233019/wake-up-a-stdthread-from-usleep/32235042#32235042", "title": "Wake up a std::thread from usleep", "body": "<p>Other answers are saying you can use a timed muted to accomplish this. I've put together a small class using a timed mutex to block the 'sleeping' threads, and release the mutex if you want to 'wake' them early. The standard library provides a function for <code>timed_mutex</code> called <code>try_lock_for</code> which will try to lock a mutex for a period of time, before continuing on anyway (and returning an indication of failure)</p>\n\n<p>This can be encapsulated in a class, like the following implementation, which only allows a single call to wake waiting threads. It could also be improved by including a <code>waitUntil</code> function for waiting until a time series to correspond to the <code>timed_mutex</code>'s other timed waiting function, <code>try_lock_until</code> but I will leave that as an exercise to the interested, since it seems a simple modification.</p>\n\n<hr>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;mutex&gt;\n#include &lt;thread&gt;\n#include &lt;chrono&gt;\n#include &lt;atomic&gt;\n\n// one use wakable sleeping class\nclass InterruptableSleeper{\n    std::timed_mutex\n        mut_;\n    std::atomic_bool\n        locked_; // track whether the mutex is locked\n    void lock(){ // lock mutex\n        mut_.lock();\n        locked_ = true;\n    }\n    void unlock(){ // unlock mutex\n        locked_ = false;\n        mut_.unlock();\n    }\npublic:\n    // lock on creation\n    InterruptableSleeper() {\n        lock();\n    }\n    // unlock on destruction, if wake was never called\n    ~InterruptableSleeper(){\n        if(locked_){\n            unlock();\n        }\n    }\n    // called by any thread except the creator\n    // waits until wake is called or the specified time passes\n    template&lt; class Rep, class Period &gt;\n    void sleepFor(const std::chrono::duration&lt;Rep,Period&gt;&amp; timeout_duration){\n        if(mut_.try_lock_for(timeout_duration)){\n            // if successfully locked, \n            // remove the lock\n            mut_.unlock();\n        }\n    }\n    // unblock any waiting threads, handling a situation\n    // where wake has already been called.\n    // should only be called by the creating thread\n    void wake(){\n        if(locked_){\n            unlock();\n        }\n    }\n};\n</code></pre>\n\n<hr>\n\n<p>The following code:</p>\n\n<pre><code>void printTimeWaited(\n  InterruptableSleeper&amp; sleeper, \n  const std::chrono::milliseconds&amp; duration){\n    auto start = std::chrono::steady_clock::now();\n    std::cout &lt;&lt; \"Started sleep...\";\n    sleeper.sleepFor(duration);\n    auto end = std::chrono::steady_clock::now();\n    std::cout \n        &lt;&lt; \"Ended sleep after \"\n        &lt;&lt; std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(end - start).count()\n        &lt;&lt; \"ms.\\n\";\n}\n\nvoid compareTimes(unsigned int sleep, unsigned int waker){\n    std::cout &lt;&lt; \"Begin test: sleep for \" &lt;&lt; sleep &lt;&lt; \"ms, wakeup at \" &lt;&lt; waker &lt;&lt; \"ms\\n\";\n    InterruptableSleeper\n        sleeper;\n    std::thread\n        sleepy(&amp;printTimeWaited, std::ref(sleeper), std::chrono::milliseconds{sleep});\n    std::this_thread::sleep_for(std::chrono::milliseconds{waker});\n    sleeper.wake();\n    sleepy.join();\n    std::cout &lt;&lt; \"End test\\n\";\n}\n\nint main(){\n\n    compareTimes(1000, 50);\n    compareTimes(50, 1000);\n\n}\n</code></pre>\n\n<p>prints </p>\n\n<pre><code>Begin test: sleep for 1000ms, wakeup at 50ms\nStarted sleep...Ended sleep after 50ms.\nEnd test\nBegin test: sleep for 50ms, wakeup at 1000ms\nStarted sleep...Ended sleep after 50ms.\nEnd test\n</code></pre>\n\nExample &amp; Use on <a href=\"http://coliru.stacked-crooked.com/a/98fdcd78c99e948c\" rel=\"nofollow noreferrer\">Coliru</a>\n"}], "owner": {"reputation": 6932, "user_id": 774236, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7e46879a230ff1e28cd975e3b0a0873b?s=128&d=identicon&r=PG", "display_name": "Matteo Monti", "link": "https://stackoverflow.com/users/774236/matteo-monti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12783, "favorite_count": 3, "answer_count": 6, "score": 11, "last_activity_date": 1518987015, "creation_date": 1440610208, "last_edit_date": 1440614664, "question_id": 32233019, "link": "https://stackoverflow.com/questions/32233019/wake-up-a-stdthread-from-usleep", "title": "Wake up a std::thread from usleep", "body": "<p>Consider the following example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;unistd.h&gt;\n\n#include &lt;signal.h&gt;\n#include &lt;thread&gt;\n\nvoid sleepy() {\n    usleep(1.0E15);\n}\n\nint main() {\n    std :: thread sleepy_thread(sleepy);\n\n    // Wake it up somehow...?\n\n    sleepy_thread.join();\n}\n</code></pre>\n\n<p>Here we have a thread that just sleeps forever. I want to join it, without having to wait forever for it to spontaneously wake from usleep. Is there a way to tell it from the extern \"hey man, wake up!\", so that I can join it in a reasonable amount of time? </p>\n\n<p>I am definitely not an expert on threads, so if possible don't assume anything.</p>\n"}, {"tags": ["c++", "libusb"], "owner": {"reputation": 205, "user_id": 3493982, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8VQ0f.jpg?s=128&g=1", "display_name": "Soroush khoubyarian", "link": "https://stackoverflow.com/users/3493982/soroush-khoubyarian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 466, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1440691387, "creation_date": 1440610188, "last_edit_date": 1440691387, "question_id": 32233014, "link": "https://stackoverflow.com/questions/32233014/libusb-bulk-transfer-only-works-once", "title": "libusb_bulk_transfer() only works once", "body": "<p>I'm completely new to <code>Libusb</code>. I have written a c++ program in Ubuntu, I can connect to the device, I transfer some data to the device using <code>libusb_bulk_transfer(...)</code>. It works the first time, but the second time it returns -1 code. But when I reject the device and then when I reinstall the device to my computer, it works again.\n<br />\nHere is my code:\n<br /></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;libusb.h&gt;\n\nusing namespace std;\n\n#define BULK_OUTPUT LIBUSB_ENDPOINT_OUT | 0x01\n#define BULK_INPUT LIBUSB_ENDPOINT_IN | 0x01\n\nunion usb_relator {\n    unsigned char usb_data[4];\n    int32_t number;\n};\n\nint main()\n{\n    libusb_device_handle *handle = NULL;\n\n    if (libusb_init(NULL) &lt; 0)\n    {\n        cout &lt;&lt; \"Failure\" &lt;&lt; endl;\n        return 0;\n    }\n    cout &lt;&lt; \"libusb inited successfully!!\" &lt;&lt; endl;\n\n    libusb_device **devices;\n    libusb_get_device_list(NULL, &amp;devices);\n\n    if (libusb_open(devices[0], &amp;handle) &lt; 0)\n    {\n        cout &lt;&lt; \"The device can not be open!!\" &lt;&lt; endl;\n        return 0;\n    }\n    cout &lt;&lt; \"device opened successfully!!\" &lt;&lt; endl;\n\n    libusb_device_descriptor descriptor;\n    libusb_get_device_descriptor(devices[0], &amp;descriptor);\n    cout &lt;&lt; \"Vendor id: \" &lt;&lt; (int)descriptor.idVendor &lt;&lt; endl;\n    cout &lt;&lt; \"Product Id: \" &lt;&lt; (int)descriptor.idProduct &lt;&lt; endl;\n\n    libusb_detach_kernel_driver(handle, 0);\n    if (libusb_claim_interface(handle, 0) &lt; 0)\n    {\n        cout &lt;&lt; \"Can not claim interface!!\" &lt;&lt; endl;\n        return 0;\n    }\n    cout &lt;&lt; \"Handle has been claimed!!\" &lt;&lt; endl;\n\n    if (libusb_set_interface_alt_setting(handle, 0, 0) &lt; 0)\n    {\n        cout &lt;&lt; \"Could not set alternate setting of the handle!!\" &lt;&lt; endl;\n        return 0;\n    }\n    cout &lt;&lt; \"alt_setting set successfully!!\" &lt;&lt; endl;\n\n    usb_relator number;\n\n    cout &lt;&lt; \"Please insert your number: \";  \n    cin &gt;&gt; number.number;\n\n    int transfer_size;\n\n    int returnCode = libusb_bulk_transfer(handle, BULK_OUTPUT, number.usb_data, sizeof(usb_relator), &amp;transfer_size, 5000);\n    if (returnCode == 0)\n    {\n        cout &lt;&lt; \"Data sent!!\" &lt;&lt; endl;\n    }\n    else\n    {\n        cout &lt;&lt; \"Data could not be send!! Code: \" &lt;&lt; returnCode &lt;&lt; endl;\n    }\n\n    returnCode = libusb_bulk_transfer(handle, BULK_INPUT, number.usb_data, sizeof(usb_relator), &amp;transfer_size, 5000);\n    if (returnCode == 0)\n    {\n        cout &lt;&lt; \"Data recieved!!\" &lt;&lt; endl;\n        cout &lt;&lt; number.usb_data &lt;&lt; endl;\n    }\n    else\n    {\n        cout &lt;&lt; \"Data could not recieve!! Code: \" &lt;&lt; returnCode &lt;&lt; endl;\n    }\n\n\n\n    libusb_release_interface(handle, 0);\n    libusb_close(handle);\n    libusb_free_device_list(devices, 1);\n    libusb_exit(NULL);\n}\n</code></pre>\n\n<p><hr>\nI'm using Ubuntu 14.04, and I'm using VMWare. Thanks for your help.\n<hr>\nI think it has something to do with the <code>libusb_detach_kernal_driver(...)</code> methode I call in my code.(Right before the line I claim the interface).</p>\n"}, {"tags": ["java", "android", "c++", "android-ndk"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 2528743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30a971deed283210cbee1d2a9dae9f0f?s=128&d=identicon&r=PG", "display_name": "user2528743", "link": "https://stackoverflow.com/users/2528743/user2528743"}, "is_accepted": false, "score": 0, "last_activity_date": 1442070216, "creation_date": 1442070216, "answer_id": 32540263, "question_id": 32232990, "link": "https://stackoverflow.com/questions/32232990/im-trying-to-run-a-basic-android-ndk-project-in-android-studio-on-windows-but-k/32540263#32540263", "title": "I&#39;m trying to run a basic Android-NDK project in android studio on windows but keep getting unknown file error", "body": "<p>Just had the same error with a fresh install of Android Studio 1.3.2, ndk-bundle installed from sdk manager, and opening a working ndk project from a previous Android Studio installation.</p>\n\n<p>On checking the setup of a fresh project for some clues, got a warning that there were spaces in my project path.</p>\n\n<p>After removing the spaces from the project path, the ndk error disappeared and the project runs as before.</p>\n\n<p>Not sure if will be the same issue, but is something to check.</p>\n"}], "owner": {"reputation": 51, "user_id": 5014708, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-ytiZ1uR21Q8/AAAAAAAAAAI/AAAAAAAAABU/HHA76Tg_uXs/photo.jpg?sz=128", "display_name": "Simran Bakshi", "link": "https://stackoverflow.com/users/5014708/simran-bakshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 643, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442070216, "creation_date": 1440610090, "question_id": 32232990, "link": "https://stackoverflow.com/questions/32232990/im-trying-to-run-a-basic-android-ndk-project-in-android-studio-on-windows-but-k", "title": "I&#39;m trying to run a basic Android-NDK project in android studio on windows but keep getting unknown file error", "body": "<p>Android NDK: Your APP_BUILD_SCRIPT points to an unknown file: C:\\Users\\Simran\\De\nsktop\\BTP\\Camera\\app\\jni;/jni/Android.mk\nC:/Users/Simran/Downloads/android-ndk-r10e/build/core/add-application.mk:199: **\n* Android NDK: Aborting...    .  Stop.</p>\n\n<p>My Android.mk file is inside the jni folder already.</p>\n\n<p>Edit- I've already added the ndk path to my Path variables and I'm running the ndk-build command from my project directory.\nWhat am I doing wrong?</p>\n"}, {"tags": ["c++", "qt", "qwt"], "answers": [{"tags": [], "owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "is_accepted": true, "score": 0, "last_activity_date": 1440697708, "last_edit_date": 1440697708, "creation_date": 1440613647, "answer_id": 32234065, "question_id": 32232884, "link": "https://stackoverflow.com/questions/32232884/limit-qwtplotzoomer-selection-to-canvas-boundaries/32234065#32234065", "title": "limit qwtPlotZoomer selection to canvas boundaries", "body": "<p>EDIT:</p>\n\n<p>Based on Uwe's advice, I overloaded the <code>move()</code> function as follows, which prevents the picker's rect from being drawn off-screen.</p>\n\n<pre><code>void QZoomer::move(const QPoint&amp; pos)\n{\n    // bound the picker selection to the zoom base so you can't zoom off screen\n    QPoint boundedPos = pos;\n\n    if (boundedPos.x() &gt; plot()-&gt;canvas()-&gt;contentsRect().right())  boundedPos.setX(plot()-&gt;canvas()-&gt;contentsRect().right());\n    if (boundedPos.x() &lt; plot()-&gt;canvas()-&gt;contentsRect().left())   boundedPos.setX(plot()-&gt;canvas()-&gt;contentsRect().left());\n    if (boundedPos.y() &lt; plot()-&gt;canvas()-&gt;contentsRect().top())    boundedPos.setY(plot()-&gt;canvas()-&gt;contentsRect().top());\n    if (boundedPos.y() &gt; plot()-&gt;canvas()-&gt;contentsRect().bottom()) boundedPos.setY(plot()-&gt;canvas()-&gt;contentsRect().bottom());\n\n    QwtPlotPicker::move(boundedPos);\n}\n</code></pre>\n\n<p>another way is to override the zoom function and bound the <code>rect</code> to the <code>zoomBase</code>. This limits the actual zoom to the zoom base, but still draws the picker outside the lines.</p>\n\n<pre><code>void Zoomer::zoom(const QRectF&amp; rect)\n{\n    // bound the zooming rect to the zoomBase dimensions\n    QRectF boundedRect = rect &amp; zoomBase(); \n    QwtPlotZoomer::zoom(boundedRect);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4461, "user_id": 4424957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W3oNL.jpg?s=128&g=1", "display_name": "Blackwood", "link": "https://stackoverflow.com/users/4424957/blackwood"}, "edited": false, "score": 1, "creation_date": 1440636699, "post_id": 32235286, "comment_id": 52360009, "body": "This does not provide an answer to the question. To critique or request clarification from an author, leave a comment below their post - you can always comment on your own posts, and once you have sufficient <a href=\"http://stackoverflow.com/help/whats-reputation\">reputation</a> you will be able to <a href=\"http://stackoverflow.com/help/privileges/comment\">comment on any post</a>."}, {"owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "reply_to_user": {"reputation": 4461, "user_id": 4424957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W3oNL.jpg?s=128&g=1", "display_name": "Blackwood", "link": "https://stackoverflow.com/users/4424957/blackwood"}, "edited": false, "score": 0, "creation_date": 1440697916, "post_id": 32235286, "comment_id": 52392627, "body": "@Blackwood I can see why you&#39;d think this, but in this case the answer was the helpful guidance I was looking for and sufficient for me to solve the problem."}], "tags": [], "owner": {"reputation": 11, "user_id": 5270100, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/cc1370d17e538938a4a0d0a2be133484?s=128&d=identicon&r=PG", "display_name": "uwe", "link": "https://stackoverflow.com/users/5270100/uwe"}, "is_accepted": false, "score": 1, "last_activity_date": 1440617858, "creation_date": 1440617858, "answer_id": 32235286, "question_id": 32232884, "link": "https://stackoverflow.com/questions/32232884/limit-qwtplotzoomer-selection-to-canvas-boundaries/32235286#32235286", "title": "limit qwtPlotZoomer selection to canvas boundaries", "body": "<p>You could overload the move() method and bound the position to the contentsRect() of the canvas there ( or maybe better use the pickArea - what usually is the same ). </p>\n"}], "owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 532, "favorite_count": 0, "accepted_answer_id": 32234065, "answer_count": 2, "score": 0, "last_activity_date": 1440697708, "creation_date": 1440609703, "question_id": 32232884, "link": "https://stackoverflow.com/questions/32232884/limit-qwtplotzoomer-selection-to-canvas-boundaries", "title": "limit qwtPlotZoomer selection to canvas boundaries", "body": "<p>The default behavior of <code>qwtPlotZoomer</code> seems to be that you can select a rectangle which exceeds the axis scale boundaries and canvas size, as seen in this screenshot from the <code>realtime</code> example:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Fnh2G.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Fnh2G.png\" alt=\"QwtPlotZoomer rectangle out of canvas bounds\"></a></p>\n\n<p>I'd like to restrict the edges of the selection to be equal to the canvas or <code>zoomRect</code>boundaries. Is there any easy way to do this?</p>\n"}, {"tags": ["c++", "dangling-pointer"], "comments": [{"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "edited": false, "score": 2, "creation_date": 1440609477, "post_id": 32232781, "comment_id": 52347971, "body": "Anything could happen."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1440609958, "post_id": 32232781, "comment_id": 52348264, "body": "... including nothing at all."}, {"owner": {"reputation": 41100, "user_id": 1938163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/WV0Fi.png?s=128&g=1", "display_name": "Marco A.", "link": "https://stackoverflow.com/users/1938163/marco-a"}, "edited": false, "score": 0, "creation_date": 1440609998, "post_id": 32232781, "comment_id": 52348289, "body": "Without a specific case this is too broad. Answers will probably end up listing how many things could go wrong."}, {"owner": {"reputation": 4010, "user_id": 1812187, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/MRXi9.png?s=128&g=1", "display_name": "Carlton", "link": "https://stackoverflow.com/users/1812187/carlton"}, "edited": false, "score": 0, "creation_date": 1440610387, "post_id": 32232781, "comment_id": 52348546, "body": "The same thing happens as when you write via a dangling pointer of the <i>correct</i> data type: undefined behavior."}], "answers": [{"tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": false, "score": 0, "last_activity_date": 1440609596, "creation_date": 1440609596, "answer_id": 32232852, "question_id": 32232781, "link": "https://stackoverflow.com/questions/32232781/what-happens-when-data-is-written-into-a-memory-location-which-is-pointed-by-a-d/32232852#32232852", "title": "What happens when data is written into a memory location which is pointed by a dangling pointer of a different data type", "body": "<p>@YuHao is absolutely right.</p>\n\n<p>If you <code>delete</code> first, you might get a segmentation fault, if that unmaps a page that previously existed in your process' address space.</p>\n\n<p>In any other case, you just write data somewhere; there might be useful stuff there by the time you do that, there might not. At any rate, you must avoid this.</p>\n"}, {"comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 2, "creation_date": 1440609996, "post_id": 32232928, "comment_id": 52348287, "body": "If it&#39;s unanswerable, how&#39;s that you posted an answer? :P"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1440610082, "post_id": 32232928, "comment_id": 52348343, "body": "@KarolyHorvath: Shush"}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1440610796, "post_id": 32232928, "comment_id": 52348794, "body": "(won&#39;t). &quot;There&#39;s no protection against that.&quot; - surely there&#39;s, just nobody does it, it&#39;s too expensive."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1440611158, "post_id": 32232928, "comment_id": 52348989, "body": "@KarolyHorvath: If nobody does protection, how&#39;s it that there&#39;s protection? :P"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 0, "last_activity_date": 1440609871, "creation_date": 1440609871, "answer_id": 32232928, "question_id": 32232781, "link": "https://stackoverflow.com/questions/32232781/what-happens-when-data-is-written-into-a-memory-location-which-is-pointed-by-a-d/32232928#32232928", "title": "What happens when data is written into a memory location which is pointed by a dangling pointer of a different data type", "body": "<blockquote>\n  <p>I was wondering whether the compiler would do something about it(say delete the dangling pointer first)</p>\n</blockquote>\n\n<p>Could do (won't)</p>\n\n<blockquote>\n  <p>or simply give an error.</p>\n</blockquote>\n\n<p>Could do (won't)</p>\n\n<p>It's a dangling pointer. There's no protection against that.</p>\n\n<p>It's <strong>undefined behaviour</strong>. This is fundamentally unanswerable.</p>\n"}, {"tags": [], "owner": {"reputation": 390, "user_id": 497809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/268ed74fdbce1e328f2ae16a26e1c9af?s=128&d=identicon&r=PG", "display_name": "MattD", "link": "https://stackoverflow.com/users/497809/mattd"}, "is_accepted": false, "score": 0, "last_activity_date": 1440611821, "last_edit_date": 1440611821, "creation_date": 1440611592, "answer_id": 32233421, "question_id": 32232781, "link": "https://stackoverflow.com/questions/32232781/what-happens-when-data-is-written-into-a-memory-location-which-is-pointed-by-a-d/32233421#32233421", "title": "What happens when data is written into a memory location which is pointed by a dangling pointer of a different data type", "body": "<p>Perhaps a quick overview so we are on the same page will help.</p>\n\n<p>Let's assume a modern PC with a multi-tasking OS like Linux.</p>\n\n<p>When a C++ program is run, a process is created that has a private memory space. This is a linear mapping of addresses that get translated by the CPU and OS to real addresses in RAM. </p>\n\n<p>C++ is a strongly typed, low-level language with manual memory management. Strongly typed means the compiler does some basic checks to make sure logical statements in your program make sense. Pointers are just another type.</p>\n\n<p>For instance:</p>\n\n<pre><code>float f = 10.0f; // this is ok, 10.0f is a float literal\nfloat* pF = &amp;f;   // types match, &amp; operator returns type float*\nint i = f;        // types do not match. Compiler error or warning. \nint* i = pF;      // types do not match, int* is not float*\nfloat f2 = pF;    // types do not match, float is not float*\n</code></pre>\n\n<p>and so on.</p>\n\n<p>Thats's compile time. That's really it. Once the program is running, the C++ runtime is pretty dumb. It doesn't do too many checks on memory operations since those can slow a program down and C++'s philosophy is \"if you didn't ask for it, you don't pay for it\". </p>\n\n<p>At it the most fundamental our memory is just a sequence of bytes. Data types like float and int are multi-byte data types (4 bytes for 32-bit platforms). That means a float in memory is stored in 4 adjacent byte-sized slots.</p>\n\n<p>Finally, we are ready to answer your question. If you allocate memory at runtime through something like <code>new</code> you are handed back a pointer to memory you can use. Say we do this for a single float. <code>new</code> knows how to mark that memory as \"in use\". <code>new</code> won't give a pointer to those 4 bytes to anyone else, so you are safe. When you invoke <code>delete</code> that gives the memory back to the heap - some other part of your program is free to allocate it later. But the <em>pointer</em> you have is unmodified. We can still use the pointer to write to memory, only now we are headed for trouble.</p>\n\n<p>Example:</p>\n\n<pre><code>float *pF = new float; // allocate 4-bytes on a 32-bit system\n*pF = 10.0f;           // fine\ndelete pF;             // free the memory\n*pF = 20.0f;           // ?????\n</code></pre>\n\n<p>That last instruction says \"write 20.0f to the memory pointed to by pF\". We don't \"own\" that memory any longer. We say this pointer is dangling as it doesn't point to valid memory we can write to safely. But it does point to writable memory. You are correct that this is a source of bugs.</p>\n\n<p>There are C++ memory allocators that will write special values into memory to indicate whether it is uninitialized or previously deleted. This will depend on your OS and toolset. </p>\n\n<p>Another option to find bugs like this is to use the awesome tool <a href=\"http://valgrind.org\" rel=\"nofollow\">Valgrind</a> which will simulate your program memory and flag these kinds of bugs.</p>\n"}], "owner": {"reputation": 11, "user_id": 5269571, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205026182747417/picture?type=large", "display_name": "Ankit Peshin", "link": "https://stackoverflow.com/users/5269571/ankit-peshin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 160, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1440611821, "creation_date": 1440609364, "question_id": 32232781, "link": "https://stackoverflow.com/questions/32232781/what-happens-when-data-is-written-into-a-memory-location-which-is-pointed-by-a-d", "title": "What happens when data is written into a memory location which is pointed by a dangling pointer of a different data type", "body": "<p>If pointer data type is same as the newly entered data,i guess it wouldn't give an error,but if the pointer has a different data type ,we'll have a type mismatch. I was wondering whether the compiler would do something about it(say delete the dangling pointer first),or simply give an error.</p>\n"}, {"tags": ["android", "c++", "unix", "xmpp", "google-cloud-messaging"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 5090310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/627406989842b6afd58ab871d45dc458?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Agrawal", "link": "https://stackoverflow.com/users/5090310/vikas-agrawal"}, "edited": false, "score": 0, "creation_date": 1440670916, "post_id": 32246219, "comment_id": 52374039, "body": "Do I need to send any ack after receipt of success msg from GCM?"}, {"owner": {"reputation": 31001, "user_id": 1889685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1eaaaf6060e7bcb688774211ae8924b?s=128&d=identicon&r=PG", "display_name": "Christos Lytras", "link": "https://stackoverflow.com/users/1889685/christos-lytras"}, "reply_to_user": {"reputation": 19, "user_id": 5090310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/627406989842b6afd58ab871d45dc458?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Agrawal", "link": "https://stackoverflow.com/users/5090310/vikas-agrawal"}, "edited": false, "score": 0, "creation_date": 1440680002, "post_id": 32246219, "comment_id": 52380251, "body": "For each message your app server receives from CCS, it needs to send an ACK message. It never needs to send a NACK message. If you don\u2019t send an ACK for a message, CCS will just resend it.  Do you get any NACK error messages in return? Can you try change JSON single quotes to double quotes by escaping them (&quot;\\&quot;&quot;) because JSON does not validate single quote string though I don&#39;t know how google is handling XMPP JSON."}, {"owner": {"reputation": 19, "user_id": 5090310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/627406989842b6afd58ab871d45dc458?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Agrawal", "link": "https://stackoverflow.com/users/5090310/vikas-agrawal"}, "edited": false, "score": 0, "creation_date": 1440686717, "post_id": 32246219, "comment_id": 52385420, "body": "I tried using double quotes instead but no luck. Also tried sending ack after success msg from authentication but still no luck."}, {"owner": {"reputation": 19, "user_id": 5090310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/627406989842b6afd58ab871d45dc458?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Agrawal", "link": "https://stackoverflow.com/users/5090310/vikas-agrawal"}, "edited": false, "score": 0, "creation_date": 1440827626, "post_id": 32246219, "comment_id": 52444406, "body": "I just noticed that device token has got colon in it? Do I need to convert it in to something so that google xmpp processor do not get confused with json colon?"}], "tags": [], "owner": {"reputation": 31001, "user_id": 1889685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1eaaaf6060e7bcb688774211ae8924b?s=128&d=identicon&r=PG", "display_name": "Christos Lytras", "link": "https://stackoverflow.com/users/1889685/christos-lytras"}, "is_accepted": false, "score": 0, "last_activity_date": 1440669304, "creation_date": 1440669304, "answer_id": 32246219, "question_id": 32232682, "link": "https://stackoverflow.com/questions/32232682/how-to-format-xmpp-message-stanza-to-gcm-using-c-xmpp-handshake/32246219#32246219", "title": "How to format XMPP message stanza to GCM using C++ - xmpp handshake", "body": "<p>You are missing a comma at the end of:</p>\n\n<p><code>sync &lt;&lt; \"'to':'eA_hcHITvwo:APA91bEB83Gci'\";</code>, </p>\n\n<p>it should be like this to be valid:</p>\n\n<p><code>sync &lt;&lt; \"'to':'eA_hcHITvwo:APA91bEB83Gci',\";</code></p>\n\n<p>maybe this will solve your problem.</p>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 5090310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/627406989842b6afd58ab871d45dc458?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Agrawal", "link": "https://stackoverflow.com/users/5090310/vikas-agrawal"}, "is_accepted": true, "score": 0, "last_activity_date": 1441268003, "last_edit_date": 1441268003, "creation_date": 1440859425, "answer_id": 32287269, "question_id": 32232682, "link": "https://stackoverflow.com/questions/32232682/how-to-format-xmpp-message-stanza-to-gcm-using-c-xmpp-handshake/32287269#32287269", "title": "How to format XMPP message stanza to GCM using C++ - xmpp handshake", "body": "<p>Finally I got the answer from <a href=\"https://developers.google.com/cloud-print/docs/rawxmpp\" rel=\"nofollow\">https://developers.google.com/cloud-print/docs/rawxmpp</a>\nand\n<a href=\"http://grokbase.com/p/gg/android-gcm/13a2zrnn34/gcm-ccs-xmpp-3rd-party-server-implementation\" rel=\"nofollow\">http://grokbase.com/p/gg/android-gcm/13a2zrnn34/gcm-ccs-xmpp-3rd-party-server-implementation</a></p>\n\n<p>another example of xmpp handshake\n<a href=\"https://tech.yandex.com/disk/doc/dg/concepts/xmpp_xmpp-connection-docpage/\" rel=\"nofollow\">https://tech.yandex.com/disk/doc/dg/concepts/xmpp_xmpp-connection-docpage/</a></p>\n\n<p>Thanks to Lee Chua who asked the question. It is not clear who answered unfortunately though many thanks to the person who answered it finally.\nNot sure why protocol is not documented in the right place.</p>\n\n<p><code>\nC (authenticate):\n &lt;stream:stream to='gcm.googleapis.com' version='1.0' xmlns='jabber:client' xmlns:stream='http://etherx.jabber.org/streams'&gt;\n &lt;auth mechanism='PLAIN' xmlns='urn:ietf:params:xml:ns:xmpp-sasl'&gt;base64Enc(\\0[userName]\\0[password])&lt;/auth&gt;\nS:\n  &lt;stream:stream from=\"gcm.googleapis.com\" id=\"352584B87B657F7F\" version=\"1.0\" xmlns:stream=\"http://etherx.jabber.org/streams\" xmlns=\"jabber:client\"&gt;\n  &lt;stream:features&gt;&lt;mechanisms xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\"&gt;&lt;mechanism&gt;X-OAUTH2&lt;/mechanism&gt;&lt;mechanism&gt;X-GOOGLE-TOKEN&lt;/mechanism&gt;&lt;mechanism&gt;PLAIN&lt;/mechanism&gt;&lt;/mechanisms&gt;&lt;/stream:features&gt;\n  &lt;success xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\"/&gt;\nC (pre Binding):\n  &lt;stream:stream to='gcm.googleapis.com' xmlns='jabber:client' xmlns:stream='http://etherx.jabber.org/streams' version='1.0' xml:lang='en'&gt;\nS:\n  &lt;stream:stream from=\"gcm.googleapis.com\" id=\"7C0C770AED97331C\" version=\"1.0\" xmlns:stream=\"http://etherx.jabber.org/streams\" xmlns=\"jabber:client\"&gt;\n&lt;stream:features&gt;&lt;bind xmlns=\"urn:ietf:params:xml:ns:xmpp-bind\"/&gt;&lt;session xmlns=\"urn:ietf:params:xml:ns:xmpp-session\"/&gt;&lt;/stream:features&gt;\nC: (bind):\n  &lt;iq type='set' id='bind-1' to='gcm.googleapis.com'&gt; &lt;bind xmlns='urn:ietf:params:xml:ns:xmpp-bind'&gt; &lt;resource&gt;core&lt;/resource&gt; &lt;/bind&gt; &lt;/iq&gt;\nS:\n  &lt;iq from=\"gcm.googleapis.com\" id=\"bind-1\" type=\"result\"&gt;&lt;bind xmlns=\"urn:ietf:params:xml:ns:xmpp-bind\"&gt;&lt;jid&gt;[senderID]@gcm.googleapis.com/coreAB8CB2E7&lt;/jid&gt;&lt;/bind&gt;&lt;/iq&gt;\nC: (session request):\n  &lt;iq to='gcm.googleapis.com' type='set' id='sess_1'&gt; &lt;session xmlns='urn:ietf:params:xml:ns:xmpp-session'/&gt; &lt;/iq&gt;\nS: single byte message and then\nS: &lt;iq from=\"gcm.googleapis.com\" type=\"result\" id=\"sess_1\"/&gt;\nC: first stanza sent successfully\n</code></p>\n"}], "owner": {"reputation": 19, "user_id": 5090310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/627406989842b6afd58ab871d45dc458?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Agrawal", "link": "https://stackoverflow.com/users/5090310/vikas-agrawal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 656, "favorite_count": 1, "accepted_answer_id": 32287269, "answer_count": 2, "score": 0, "last_activity_date": 1441268003, "creation_date": 1440609103, "last_edit_date": 1441267968, "question_id": 32232682, "link": "https://stackoverflow.com/questions/32232682/how-to-format-xmpp-message-stanza-to-gcm-using-c-xmpp-handshake", "title": "How to format XMPP message stanza to GCM using C++ - xmpp handshake", "body": "<p>Handshake is complete and received <code>&lt;success xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\"/&gt;</code> from GCM xmpp connection.\nNow, I am formatting and sending send-to-sync message from APP server to GCM to be sent to mobile device, as follows</p>\n\n<pre><code>ostringstream sync;\nsync &lt;&lt; \"&lt;message id=\\\"1234\\\"&gt;\";\nsync &lt;&lt; \"&lt;gcm xmlns=\\\"google:mobile:data\\\"&gt;\";\nsync &lt;&lt; \" { \";\nsync &lt;&lt; \"\\\"to\\\":\\\"eA_hcHITvwo:APA91bEB83Gci\\\",\";\nsync &lt;&lt; \" \\\"message_id\\\":\\\"1234\\\",\";\nsync &lt;&lt; \" \\\"time_to_live\\\":\" &lt;&lt; 10;\nsync &lt;&lt; \" } \";\nsync &lt;&lt; \"&lt;/gcm&gt;&lt;/message&gt;\";\nstring msg = sync.str();\nsslSock_-&gt;write(msg.c_str(), msg.length());\nstd::string syncResp = readFromGcm(); // ack/nack\n</code></pre>\n\n<p>Unfortunately, SSL socket is closing and no ack received. Any idea, what am I doing wrong here?</p>\n\n<p>Actual message I am trying to send looks as follows</p>\n\n<p><code>Sending msg=&lt;message id=\"150827111504042682\"&gt;&lt;gcm xmlns=\"google:mobile:data\"&gt; { \"to\":\"eA_hcHITvwo:APA91bEB83Gci\", \"message_id\":\"150827111504042682\", \"time_to_live\":10 } &lt;/gcm&gt;&lt;/message&gt;</code></p>\n\n<p>Do I need to send any ack after receipt of success msg from GCM and before sending any stanza?\nor Do I need to add new line characters after curly braces and name value pairs?</p>\n\n<p>flow of messages\n<code>\nSent1: &lt;stream:stream to='gcm.googleapis.com' version='1.0' xmlns='jabber:client' xmlns:stream='http://etherx.jabber.org/streams'&gt;\nReceived1: &lt;stream:stream from=\"gcm.googleapis.com\" id=\"EBA37684C852364D\" version=\"1.0\" xmlns:stream=\"http://etherx.jabber.org/streams\" xmlns=\"jabber:client\"&gt;\nReceived2: &lt;stream:features&gt;&lt;mechanisms xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\"&gt;&lt;mechanism&gt;X-OAUTH2&lt;/mechanism&gt;&lt;mechanism&gt;X-GOOGLE-TOKEN&lt;/mechanism&gt;&lt;mechanism&gt;PLAIN&lt;/mechanism&gt;&lt;/mechanisms&gt;&lt;/stream:features&gt;\nSent2: &lt;auth mechanism='PLAIN' xmlns='urn:ietf:params:xml:ns:xmpp-sasl'&gt;ADM2NTU4MjFZVV0F1LVJV&lt;/auth&gt;\nReceived3: &lt;success xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\"/&gt;\nSent3: &lt;message id=\"\"&gt;&lt;gcm xmlns=\"google:mobile:data\"&gt;{\"to\":\"eA_hcHITvwo:APA91bEB83Gci\",\"message_id\":\"150827161659237590\",\"data\":{\"title\":\"Alert: mydata\",\"text\":\"mydata refresh\"},\"time_to_live\":10,\"delay_while_idle\":true,\"delivery_receipt_requested\":true}&lt;/gcm&gt;&lt;/message&gt;\nReceived4: None. Socket closed\n</code></p>\n\n<p>I just noticed that device token (eA_hcHITvwo:APA91bEB83Gci) has got colon in it? Do I need to convert it in to something so that google xmpp processor do not get confused with json colon (\"to\":\"deviceToken\")?</p>\n"}, {"tags": ["c++", "class", "operator-overloading", "complex-numbers"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1440608656, "post_id": 32232448, "comment_id": 52347504, "body": "What are your file boundaries? Are the <code>operator&lt;&lt;</code> and <code>operator&gt;&gt;</code> definitions in the <i>header</i>?"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1440608809, "post_id": 32232448, "comment_id": 52347594, "body": "Please divide the code into files and fix your string literals (which span multiple lines)."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1440609327, "post_id": 32232448, "comment_id": 52347873, "body": "The variables <code>i</code> and <code>r</code> will be initialized with the uninitialized values of <code>imag</code> and <code>real</code> only once.  If you want to have <code>i</code> and <code>r</code> to reflect the changing values of <code>imag</code> and <code>real</code>, you will have to update <code>i</code> and <code>r</code> whenever <code>imag</code> and <code>real</code> are updated.  So, why bother with the copies?  You could, if you must, declare <code>i</code> and <code>r</code> as <i>references</i> to <code>imag</code> and <code>r</code>.  But then ask yourself why you need copies?  Are you trying to do something like <i>getter</i> and <i>setter</i> functions? Same principle applies to <code>o</code> and <code>op</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1440610129, "post_id": 32232448, "comment_id": 52348382, "body": "You seriously need to validate the <code>complex.o</code> variable before returning.  For example, your code allows these inputs as valid entries:  4M6i, 4*6i, 4@6i, 4z6i."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 4, "creation_date": 1440609391, "post_id": 32232727, "comment_id": 52347914, "body": "No. Include guards do not prevent multiple definitions. They <i>must</i> be moved to a <code>.cpp</code> unless marked <code>inline</code> (or <code>static</code>; ew)"}, {"owner": {"reputation": 388, "user_id": 5124891, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10153067289502775/picture?type=large", "display_name": "Brian Roper", "link": "https://stackoverflow.com/users/5124891/brian-roper"}, "edited": false, "score": 0, "creation_date": 1440609458, "post_id": 32232727, "comment_id": 52347959, "body": "okay so I did that but I am still receiving the error messages. They now also include this one:fatal error LNK1169: one or more multiply defined symbols found"}, {"owner": {"reputation": 5694, "user_id": 1552737, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YfC6P.jpg?s=128&g=1", "display_name": "IKavanagh", "link": "https://stackoverflow.com/users/1552737/ikavanagh"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440609486, "post_id": 32232727, "comment_id": 52347983, "body": "@LightnessRacesinOrbit That was where I was going with my edit."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440609517, "post_id": 32232727, "comment_id": 52347995, "body": "Your edit says it&#39;s an alternative approach. No, it&#39;s the only approach."}, {"owner": {"reputation": 5694, "user_id": 1552737, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YfC6P.jpg?s=128&g=1", "display_name": "IKavanagh", "link": "https://stackoverflow.com/users/1552737/ikavanagh"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440609598, "post_id": 32232727, "comment_id": 52348055, "body": "Ugh @LightnessRacesinOrbit Sorry yes, got it all backwards! I&#39;ll fix it now."}, {"owner": {"reputation": 5694, "user_id": 1552737, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YfC6P.jpg?s=128&g=1", "display_name": "IKavanagh", "link": "https://stackoverflow.com/users/1552737/ikavanagh"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440609964, "post_id": 32232727, "comment_id": 52348274, "body": "@LightnessRacesinOrbit That should be it fixed now. Probably time to call it a day now!"}, {"owner": {"reputation": 143, "user_id": 10632656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc67bf2c094730760fcef5ca15d429b4?s=128&d=identicon&r=PG&f=1", "display_name": "M.Ionut", "link": "https://stackoverflow.com/users/10632656/m-ionut"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1586850490, "post_id": 32232727, "comment_id": 108272033, "body": "@LightnessRacesinOrbit thank you for mentioning that include guards do not prevent multiple definitions! It really helped me!"}], "tags": [], "owner": {"reputation": 5694, "user_id": 1552737, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YfC6P.jpg?s=128&g=1", "display_name": "IKavanagh", "link": "https://stackoverflow.com/users/1552737/ikavanagh"}, "is_accepted": false, "score": 6, "last_activity_date": 1440609688, "last_edit_date": 1440609688, "creation_date": 1440609214, "answer_id": 32232727, "question_id": 32232448, "link": "https://stackoverflow.com/questions/32232448/already-defined-error-with-operator-overloading/32232727#32232727", "title": "Already defined error with operator overloading", "body": "<p>The problem is that you have defined</p>\n\n<pre><code>std::ostream &amp; operator&lt;&lt;(std::ostream &amp;os, const Complex &amp;complex) {\n    os &lt;&lt; complex.r &lt;&lt; complex.o &lt;&lt; complex.i &lt;&lt; \"i\" &lt;&lt; \"/n\" &lt;&lt; \"/n\";\n    return os;\n}\n\nstd::istream &amp; operator&gt;&gt;(std::istream &amp;is, Complex &amp;complex) {\n    is &gt;&gt; complex.r &gt;&gt; complex.o &gt;&gt; complex.i;\n    return is;\n}\n</code></pre>\n\n<p>in your header file and because this is included in <code>imaginary.cpp</code> and <code>main.cpp</code> they are defined multiple times. This violates the <a href=\"https://stackoverflow.com/questions/4192170/what-exactly-is-one-definition-rule-in-c\">single definition rule of C++</a>.</p>\n\n<p>You need to move the implementation of <code>operator &lt;&lt;</code> and <code>operator &gt;&gt;</code> to the <code>.cpp</code> file and only leave the declaration in the header file. This would mean having</p>\n\n<pre><code>std::ostream &amp; operator&lt;&lt;(std::ostream &amp;os, const Complex &amp;complex);\n\nstd::istream &amp; operator&gt;&gt;(std::istream &amp;is, Complex &amp;complex);\n</code></pre>\n\n<p>in the header file after the definition of the class</p>\n\n<pre><code>class Complex {\n    ...\n};\n</code></pre>\n\n<p>and before the ending <code>#endif</code>. Then in <code>imaginary.cpp</code> you would have the definition</p>\n\n<pre><code>std::ostream &amp; operator&lt;&lt;(std::ostream &amp;os, const Complex &amp;complex) {\n    os &lt;&lt; complex.r &lt;&lt; complex.o &lt;&lt; complex.i &lt;&lt; \"i\" &lt;&lt; \"/n\" &lt;&lt; \"/n\";\n    return os;\n}\n\nstd::istream &amp; operator&gt;&gt;(std::istream &amp;is, Complex &amp;complex) {\n    is &gt;&gt; complex.r &gt;&gt; complex.o &gt;&gt; complex.i;\n    return is;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1440609550, "post_id": 32232828, "comment_id": 52348025, "body": "No. Include guards do not prevent multiple definitions."}], "tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": false, "score": -1, "last_activity_date": 1440609528, "creation_date": 1440609528, "answer_id": 32232828, "question_id": 32232448, "link": "https://stackoverflow.com/questions/32232448/already-defined-error-with-operator-overloading/32232828#32232828", "title": "Already defined error with operator overloading", "body": "<p>Your error lies in your header guard:</p>\n\n<pre><code>    bool userTest();    \n};\n\n#endif // Here!\n\nstd::ostream &amp; operator &lt;&lt; (std::ostream &amp; os, const Complex &amp; complex)    \n{\n    os &lt;&lt; complex.r &lt;&lt; complex.o &lt;&lt; complex.i &lt;&lt; \"i\" &lt;&lt; \"/n\" &lt;&lt; \"/n\";\n    return os;\n}\n</code></pre>\n\n<p>When you include the header in your two file, they each compile the function in their respective compilation unit. That's why there's an error at link time.</p>\n\n<p>Your file should look like this:</p>\n\n<pre><code>#ifndef imaginary_h_\n#define imaginary_h_\n\n#include &lt;iostream&gt;\n\nclass Complex\n{    \n    friend std::ostream &amp; operator &lt;&lt; (std::ostream&amp; os, const Complex&amp;);\n    friend std::istream &amp; operator &gt;&gt; (std::istream&amp; is, Complex&amp;);\n\nprivate:    \n    double real;\n    double imag;\n    char op;\n\npublic:    \n    double r = real;\n    double i = imag;\n    char o = op;\n\n    Complex()\n    {    \n    }\n\n    Complex(double r, double i, char o)\n    {    \n    }\n\n    bool userTest();    \n};\n\nstd::ostream &amp; operator &lt;&lt; (std::ostream &amp; os, const Complex &amp; complex)    \n{\n    os &lt;&lt; complex.r &lt;&lt; complex.o &lt;&lt; complex.i &lt;&lt; \"i\" &lt;&lt; \"/n\" &lt;&lt; \"/n\";\n    return os;\n}\n\nstd::istream &amp; operator &gt;&gt; (std::istream &amp; is, Complex &amp; complex)    \n{\n    is &gt;&gt; complex.r &gt;&gt; complex.o &gt;&gt; complex.i;\n    return is;\n}\n\n#endif\n</code></pre>\n\n<p>But two other things:</p>\n\n<ol>\n<li>You should not put function definition in you header. You should put it in your cpp file</li>\n<li>You should seek to add <code>#pragma once</code> in addition of your header guard. It should prevent some error while keeping a standard code.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 11, "last_activity_date": 1440609902, "creation_date": 1440609902, "answer_id": 32232938, "question_id": 32232448, "link": "https://stackoverflow.com/questions/32232448/already-defined-error-with-operator-overloading/32232938#32232938", "title": "Already defined error with operator overloading", "body": "<p>You have two options:</p>\n\n<ol>\n<li>Move implementation of operator methods to a single cpp file</li>\n<li>Or declare the implementations as <code>inline</code>.</li>\n</ol>\n\n<p>For example, in your header file, <em>imaginary.hpp</em>:</p>\n\n<pre><code>inline // &lt;-- Add this line \nstd::ostream &amp; operator &lt;&lt; (std::ostream &amp; os, const Complex &amp; complex)    \n{\n    os &lt;&lt; complex.r &lt;&lt; complex.o &lt;&lt; complex.i &lt;&lt; \"i\" &lt;&lt; \"/n\" &lt;&lt; \"/n\";\n    return os;\n}\n\ninline  // &lt;-- Add this line \nstd::istream &amp; operator &gt;&gt; (std::istream &amp; is, Complex &amp; complex)    \n{\n    is &gt;&gt; complex.r &gt;&gt; complex.o &gt;&gt; complex.i;\n    return is;\n}\n\n#endif  // imaginary_h_  &lt;-- This line was moved.\n</code></pre>\n\n<p>Or you can simply move the implementations into your <em>imaginary.cpp</em> file.</p>\n"}], "owner": {"reputation": 388, "user_id": 5124891, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10153067289502775/picture?type=large", "display_name": "Brian Roper", "link": "https://stackoverflow.com/users/5124891/brian-roper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5526, "favorite_count": 1, "answer_count": 3, "score": 4, "last_activity_date": 1440609902, "creation_date": 1440608356, "last_edit_date": 1440609256, "question_id": 32232448, "link": "https://stackoverflow.com/questions/32232448/already-defined-error-with-operator-overloading", "title": "Already defined error with operator overloading", "body": "<p>When debugging my program I keep getting these two errors: </p>\n\n<blockquote>\n  <p>main.obj : error LNK2005: \"class std::basic_istream > &amp; __cdecl operator>>(class std::basic_istream > &amp;,class Complex &amp;)\" (??5@YAAAV?$basic_istream@DU?$char_traits@D@std@@@std@@AAV01@AAVComplex@@@Z) already defined in Imaginary.obj</p>\n  \n  <p>1>main.obj : error LNK2005: \"class std::basic_ostream > &amp; __cdecl operator&lt;&lt;(class std::basic_ostream > &amp;,class Complex const &amp;)\" (??6@YAAAV?$basic_ostream@DU?$char_traits@D@std@@@std@@AAV01@ABVComplex@@@Z) already defined in Imaginary.obj</p>\n</blockquote>\n\n<p>I have tried restarting my project to make sure that I created a console application and not something else on accident but that didn't work. Any direction would be greatly appreciated. </p>\n\n<p>Here's my code:</p>\n\n<p>imaginary.h</p>\n\n<pre><code>#ifndef imaginary_h_\n#define imaginary_h_\n\n#include &lt;iostream&gt;\n\nclass Complex\n{    \n    friend std::ostream &amp; operator &lt;&lt; (std::ostream&amp; os, const Complex&amp;);\n    friend std::istream &amp; operator &gt;&gt; (std::istream&amp; is, Complex&amp;);\n\nprivate:    \n    double real;\n    double imag;\n    char op;\n\npublic:    \n    double r = real;\n    double i = imag;\n    char o = op;\n\n    Complex()\n    {    \n    }\n\n    Complex(double r, double i, char o)\n    {    \n    }\n\n    bool userTest();    \n};\n\n#endif\n\nstd::ostream &amp; operator &lt;&lt; (std::ostream &amp; os, const Complex &amp; complex)    \n{\n    os &lt;&lt; complex.r &lt;&lt; complex.o &lt;&lt; complex.i &lt;&lt; \"i\" &lt;&lt; \"/n\" &lt;&lt; \"/n\";\n    return os;\n}\n\nstd::istream &amp; operator &gt;&gt; (std::istream &amp; is, Complex &amp; complex)    \n{\n    is &gt;&gt; complex.r &gt;&gt; complex.o &gt;&gt; complex.i;\n    return is;\n}\n</code></pre>\n\n<p>Imaginary.cpp</p>\n\n<pre><code>#include \"imaginary.h\"    \n#include &lt;iostream&gt;\n\nbool Complex::userTest()\n\n{\n    if (op == '+' || op == '-')\n\n    {\n        return true;\n    }\n\n    else\n\n    {\n        std::cout &lt;&lt; \"Incorrect operand entry, please enter complex number as x+yi\" &lt;&lt; \"/n\" &lt;&lt; \"/n\";\n\n                return false;\n    }\n\n}\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"imaginary.h\"\n\n#include &lt;iostream&gt;\n\n\nint main()\n{\n    double userInput;\n\n    std::cout &lt;&lt; \"Here you will add or subtract complex numbers.\" &lt;&lt; \"/n\" &lt;&lt; \"/n\";\n\n    do\n\n    {\n\n        std::cout &lt;&lt; \"Please enter the real part of you complex number: \" &lt;&lt; \"/n\" &lt;&lt; \"/n\";\n\n                Complex complex;\n\n        std::cin &gt;&gt; complex;\n\n        std::cout &lt;&lt; \"/n\" &lt;&lt; \"/n\" &lt;&lt; \"/n/t\" &lt;&lt; \"Note: Remember to enter your complex number in the format of x+yi to avoid an error\";\n\n                if (complex.userTest())\n                {\n                    std::cout &lt;&lt; complex &lt;&lt; \"/n\" &lt;&lt; \"/n\";\n                }\n\n        std::cout &lt;&lt; \"Would you like to perform another complex number operation? \" &lt;&lt; \"/n\" &lt;&lt; \"/n/t\";\n\n                        std::cout &lt;&lt; \"Choose 1 for Yes and 2 for No\" &lt;&lt; \"/n\" &lt;&lt; \"/n\";\n\n        std::cin &gt;&gt; userInput;\n\n    } while (userInput == 1);\n\n    system(\"pause\");\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-c++", "rounding", "stdio"], "answers": [{"comments": [{"owner": {"reputation": 326282, "user_id": 151292, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/AQNZx.jpg?s=128&g=1", "display_name": "James McNellis", "link": "https://stackoverflow.com/users/151292/james-mcnellis"}, "edited": false, "score": 0, "creation_date": 1440609294, "post_id": 32232433, "comment_id": 52347852, "body": "The Visual C++ 2008 result is actually less correct.  See my answer for details."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 326282, "user_id": 151292, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/AQNZx.jpg?s=128&g=1", "display_name": "James McNellis", "link": "https://stackoverflow.com/users/151292/james-mcnellis"}, "edited": false, "score": 0, "creation_date": 1440609380, "post_id": 32232433, "comment_id": 52347907, "body": "You&#39;re the expert! I&#39;ll delete this and upvote your answer."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 326282, "user_id": 151292, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/AQNZx.jpg?s=128&g=1", "display_name": "James McNellis", "link": "https://stackoverflow.com/users/151292/james-mcnellis"}, "edited": false, "score": 0, "creation_date": 1440609525, "post_id": 32232433, "comment_id": 52348002, "body": "Before I do tin it though could you confirm that vs2008 didn&#39;t use 80 bit literals by default? (Ie the out of the box compiler settings). I recall seeing something like this a few years ago."}, {"owner": {"reputation": 326282, "user_id": 151292, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/AQNZx.jpg?s=128&g=1", "display_name": "James McNellis", "link": "https://stackoverflow.com/users/151292/james-mcnellis"}, "edited": false, "score": 0, "creation_date": 1440609730, "post_id": 32232433, "comment_id": 52348134, "body": "<code>double</code> is always 64-bit double precision IEEE-754 in all versions of Visual C++.  The compiler supports different target architectures. Under <code>&#47;arch:IA32</code> the 80-bit x87 FPU is used; under <code>&#47;arch:SSE2</code>, the SSE instruction set is used, with 64-bit precision.  At some point we changed the default target architecture from IA32 to SSE2; I do not recall which release, but certainly sometime between 2008 and 2015. You can still compile with <code>&#47;arch:IA32</code> using Visual C++ 2015 though, you just have to explicitly pass that setting.  But..."}, {"owner": {"reputation": 326282, "user_id": 151292, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/AQNZx.jpg?s=128&g=1", "display_name": "James McNellis", "link": "https://stackoverflow.com/users/151292/james-mcnellis"}, "edited": false, "score": 0, "creation_date": 1440609847, "post_id": 32232433, "comment_id": 52348203, "body": "...the target architecture setting does not affect the floating point parser and formatter.  Those use a library implementation.  In Visual C++ 2013 and older versions, a software 12-byte floating point implementation is used to perform the conversions.  In the Universal CRT and Visual C++ 2015, a high precision integer implementation is used. The new implementation offers better correctness and is sometimes more efficient."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1440608299, "creation_date": 1440608299, "answer_id": 32232433, "question_id": 32232331, "link": "https://stackoverflow.com/questions/32232331/why-is-the-sprintf-s-giving-different-result-in-different-versions-of-visual-stu/32232433#32232433", "title": "Why is the sprintf_s giving different result in different versions of Visual Studio?", "body": "<p>Vs2008 was using 80bit floating point literals and was rounding this more precise value when converting to a double.</p>\n\n<p>Vs2015 doesn't do this and merely truncates the literal.</p>\n\n<p>I believe you can toggle between the two schemes by changing the compiler settings.</p>\n"}, {"comments": [{"owner": {"reputation": 1050, "user_id": 1739875, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c509e4699eeda13d8fe3626da3255e76?s=128&d=identicon&r=PG", "display_name": "John Mcdock", "link": "https://stackoverflow.com/users/1739875/john-mcdock"}, "edited": false, "score": 0, "creation_date": 1440622121, "post_id": 32232686, "comment_id": 52355139, "body": "Thank you for your answer James. This change however caused a problem for our customers. sprintf_s(buf, &quot;%.*f&quot;, 2, 0.155) now causes 0.15 instead of 0.16 for example. Is there a way to mimic the old sprintf_s behavior through other rounding functions?"}, {"owner": {"reputation": 326282, "user_id": 151292, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/AQNZx.jpg?s=128&g=1", "display_name": "James McNellis", "link": "https://stackoverflow.com/users/151292/james-mcnellis"}, "reply_to_user": {"reputation": 1050, "user_id": 1739875, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c509e4699eeda13d8fe3626da3255e76?s=128&d=identicon&r=PG", "display_name": "John Mcdock", "link": "https://stackoverflow.com/users/1739875/john-mcdock"}, "edited": false, "score": 0, "creation_date": 1440624935, "post_id": 32232686, "comment_id": 52356443, "body": "That is also the correct result:  The closest representable value there is <code>0.154999...</code>, which rounds down to <code>0.15</code> not up to <code>0.16</code>.  The old implementation rounded incorrectly in both directions (up and down).  There&#39;s no other way to get the exact same incorrect behavior short of using the old implementation (by using Visual C++ 2013 or earlier). You can certainly try to do numeric comparisons to see &quot;is this thing pretty close to the halfway point?&quot; (for some definition of &quot;pretty close&quot;) and adjust the number yourself as you see fit."}], "tags": [], "owner": {"reputation": 326282, "user_id": 151292, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/AQNZx.jpg?s=128&g=1", "display_name": "James McNellis", "link": "https://stackoverflow.com/users/151292/james-mcnellis"}, "is_accepted": false, "score": 9, "last_activity_date": 1440609110, "creation_date": 1440609110, "answer_id": 32232686, "question_id": 32232331, "link": "https://stackoverflow.com/questions/32232331/why-is-the-sprintf-s-giving-different-result-in-different-versions-of-visual-stu/32232686#32232686", "title": "Why is the sprintf_s giving different result in different versions of Visual Studio?", "body": "<p>We rewrote the floating point parser and formatter for <a href=\"http://blogs.msdn.com/b/vcblog/archive/2015/03/03/introducing-the-universal-crt.aspx\">the Universal CRT</a> and Visual C++ 2015 to improve correctness.  See the <a href=\"https://msdn.microsoft.com/en-us/library/Bb531344.aspx\">Breaking Changes in Visual C++</a> documentation for Visual C++ 2015; there is a section entitled \"Floating point formatting and parsing.\"</p>\n\n<p>The Visual C++ 2015 result is the correctly rounded result.  The input string <code>0.182696884245135</code> is converted to the following double precision value, which is the closest representable value:</p>\n\n<pre><code>0.18269688424513'49994693288181224488653242588043212890625\n</code></pre>\n\n<p>Note the tick mark after the 14th fractional digit.  The 15th digit is a <code>4</code>, so when formatting the number with 14 fractional digits, the number is \"rounded down\" (or truncated), not up.</p>\n\n<p>The Visual C++ 2008 result is incorrect.  I do not know whether error was introduced during parsing or formatting.  There is no way to get the old, incorrect behavior with the Universal CRT and Visual C++ 2015.</p>\n"}], "owner": {"reputation": 1050, "user_id": 1739875, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c509e4699eeda13d8fe3626da3255e76?s=128&d=identicon&r=PG", "display_name": "John Mcdock", "link": "https://stackoverflow.com/users/1739875/john-mcdock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 949, "favorite_count": 2, "answer_count": 2, "score": 6, "last_activity_date": 1440610638, "creation_date": 1440607961, "last_edit_date": 1440610638, "question_id": 32232331, "link": "https://stackoverflow.com/questions/32232331/why-is-the-sprintf-s-giving-different-result-in-different-versions-of-visual-stu", "title": "Why is the sprintf_s giving different result in different versions of Visual Studio?", "body": "<pre><code>sprintf_s(buf, \"%.*f\", 14, 0.182696884245135);\n</code></pre>\n\n<p>in VS2008 = 0.18269688424514</p>\n\n<p>in VS2015 = 0.18269688424513</p>\n\n<p>Was the behavior for sprintf_s changed? How can I get the old behavior?</p>\n"}, {"tags": ["c++", "c++11", "error-code"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440609764, "post_id": 32232295, "comment_id": 52348152, "body": "What about <a href=\"http://stackoverflow.com/a/16687434/560648\">this</a> is not clear?"}, {"owner": {"reputation": 7675, "user_id": 2923952, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/71908bd318301d831c4b9eb6ca1c13a2?s=128&d=identicon&r=PG&f=1", "display_name": "Siler", "link": "https://stackoverflow.com/users/2923952/siler"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440610024, "post_id": 32232295, "comment_id": 52348309, "body": "@LightnessRacesinOrbit, the idea is clear - but I don&#39;t see the use of <code>error_code</code> in practice.  The link you provided says: &quot;Each <code>std::error_code</code> object holds a pair of error code originating from the operating system, or some low-level interface&quot; - okay, but the operating system will either give you a POSIX error (which is portable and can be converted to <code>std::error_condition</code> easily) or some other type of low-level error (like I guess a Win32 error, for example), which you&#39;d then need to manually map to <code>std::error_code</code> - but what is the use of mapping it to error_code? ..."}, {"owner": {"reputation": 7675, "user_id": 2923952, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/71908bd318301d831c4b9eb6ca1c13a2?s=128&d=identicon&r=PG&f=1", "display_name": "Siler", "link": "https://stackoverflow.com/users/2923952/siler"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440610030, "post_id": 32232295, "comment_id": 52348314, "body": "... if you need to do something platform specific, you work directly with the platform facilities.  If you need to convert the error to something more generic, you use error_condition.  I just don&#39;t see how error_code fits in to any of this."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440610112, "post_id": 32232295, "comment_id": 52348372, "body": "That answer gives you a use case &quot;in practice&quot;. <i>&quot;The error_condition is the &quot;portable abstraction&quot; so would be the generic error message to give to the user and the error_code would be the platform dependent information that would be useful for specific debug.&quot;</i> I honestly don&#39;t get the problem."}, {"owner": {"reputation": 7675, "user_id": 2923952, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/71908bd318301d831c4b9eb6ca1c13a2?s=128&d=identicon&r=PG&f=1", "display_name": "Siler", "link": "https://stackoverflow.com/users/2923952/siler"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440610203, "post_id": 32232295, "comment_id": 52348429, "body": "Maybe I&#39;m just dense, but I&#39;m just not getting it. &quot;The error_code would be the platform dependent information that would be useful for specific debug&quot; ???     To me the use of <code>error_code</code> just sounds redundant here.  The actual platform dependent information <i>itself</i> is what would be useful for a specific debug.  Why go through the extra step of converting to error_code if you&#39;re not dealing in abstractions?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440610488, "post_id": 32232295, "comment_id": 52348601, "body": "Because there&#39;s a common type giving you a stable interface across all variants of your product? It&#39;s still an abstraction."}, {"owner": {"reputation": 7675, "user_id": 2923952, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/71908bd318301d831c4b9eb6ca1c13a2?s=128&d=identicon&r=PG&f=1", "display_name": "Siler", "link": "https://stackoverflow.com/users/2923952/siler"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440610552, "post_id": 32232295, "comment_id": 52348642, "body": "But for the actual <i>interface</i> (like the API) aren&#39;t we supposed to be dealing in <code>std::error_condition</code>s?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10133158"}, "edited": false, "score": 0, "creation_date": 1546516343, "post_id": 32232295, "comment_id": 94879422, "body": "error_code --&gt; there is an error ,  error_condition --&gt; what can we do about it"}], "answers": [{"comments": [{"owner": {"reputation": 431, "user_id": 2896121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c21847e05c6b288c7d7da7b96ceaaaf?s=128&d=identicon&r=PG&f=1", "display_name": "Constantin Baranov", "link": "https://stackoverflow.com/users/2896121/constantin-baranov"}, "edited": false, "score": 4, "creation_date": 1440615661, "post_id": 32234319, "comment_id": 52351618, "body": "I&#39;d clarify that a library should signal errors with <code>error_code</code>s and declare or reuse standard <code>error_condition</code> enums for matching them. This way full information about an error is passed around and a user of such a library can print it to the log or so. But extra details are hidden from upper program logic."}, {"owner": {"reputation": 5665, "user_id": 688988, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/e23a4ba9ba863f2870f6a939b892b656?s=128&d=identicon&r=PG", "display_name": "charley", "link": "https://stackoverflow.com/users/688988/charley"}, "edited": false, "score": 0, "creation_date": 1469377951, "post_id": 32234319, "comment_id": 64499384, "body": "Agree with explanation.  This also suggests APIs should prefer to propagate <code>error_code</code> as the non-lossy actual error-value, where code testing results of an operation should cause implicit conversion to <code>error_condition</code> where additional categories might be defined to collapse-and-convert system-specific error-values to platform-independent failure scenarios."}, {"owner": {"reputation": 1515, "user_id": 516545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b8ea5a0aad3e067e30030796611ff67?s=128&d=identicon&r=PG", "display_name": "SMGreenfield", "link": "https://stackoverflow.com/users/516545/smgreenfield"}, "edited": false, "score": 0, "creation_date": 1558714080, "post_id": 32234319, "comment_id": 99204721, "body": "I&#39;d like to say I&#39;ve been researching this same topic, and I&#39;m completely lost as how to apply it.  Even in C++17, getting something as simple as the error code for &quot;file not found&quot; (ENOENT) when opening a stream to match the error_condition defined for that same error doesn&#39;t appear to work as expected."}], "tags": [], "owner": {"reputation": 1302, "user_id": 5165306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b7c0ad499e2544d929f45c37b24cd9?s=128&d=identicon&r=PG&f=1", "display_name": "ex-bart", "link": "https://stackoverflow.com/users/5165306/ex-bart"}, "is_accepted": true, "score": 27, "last_activity_date": 1440614556, "creation_date": 1440614556, "answer_id": 32234319, "question_id": 32232295, "link": "https://stackoverflow.com/questions/32232295/use-cases-for-stderror-code/32234319#32234319", "title": "Use cases for std::error_code", "body": "<p>I was wondering about that a while back myself and found the answer <a href=\"http://blog.think-async.com/2010/04/system-error-support-in-c0x-part-5.html\" rel=\"noreferrer\">here</a>.  Essentially, <code>error_code</code> is used to store and transport error codes, while <code>error_condition</code> is used to match error codes.</p>\n\n<pre><code>void handle_error(error_code code) {\n   if     (code == error_condition1) do_something();\n   else if(code == error_condition2) do_something_else();\n   else                              do_yet_another_thing();\n}\n</code></pre>\n\n<p>Each <code>error_condition</code> is equivalent to a set of <code>error_code</code>, possibly from different <code>error_categories</code>.  This way you can treat all errors of a certain type the same, no matter which subsystem they originate from.</p>\n\n<p><code>error_code</code> on the other hand contains exactly the category of the subsystem it originated from.  This is useful for debugging and when reporting the error: you may be interested to know whether a \"permission denied\" error was because of insufficient access rights on the local file system or because of a 403 error that your http-downloader-library received, and may want to put that detail in the error message, but your program has to abort either way.</p>\n\n<p>What constitutes equivalence is defined by the categories; if the <code>error_code</code>'s category considers the <code>error_condition</code> equivalent, <strong>or</strong> the <code>error_condition</code>'s category considers the <code>error_code</code> equivalent, then <code>operator==</code> returns <code>true</code> for that pair of <code>error_condition</code> and <code>error_code</code>.  That way you can have <code>error_code</code>s from your own error category and make them equivalent to certain generic or system <code>error_condition</code>s.</p>\n"}], "owner": {"reputation": 7675, "user_id": 2923952, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/71908bd318301d831c4b9eb6ca1c13a2?s=128&d=identicon&r=PG&f=1", "display_name": "Siler", "link": "https://stackoverflow.com/users/2923952/siler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11884, "favorite_count": 9, "accepted_answer_id": 32234319, "answer_count": 1, "score": 28, "last_activity_date": 1500095275, "creation_date": 1440607787, "last_edit_date": 1495540025, "question_id": 32232295, "link": "https://stackoverflow.com/questions/32232295/use-cases-for-stderror-code", "title": "Use cases for std::error_code", "body": "<p>Lately I've been converting some libraries to use the <code>&lt;system_error&gt;</code> facilities in C++11.</p>\n\n<p>I'm having difficulty understanding the use cases for <code>std::error_code</code> vs. <code>std::error_condition</code>.  </p>\n\n<p>Note, <strong>I understand the difference</strong> - there are <a href=\"https://stackoverflow.com/questions/16687403/error-code-vs-error-condition\">many questions on stackoverflow</a> which go over the difference. </p>\n\n<p>The basic difference is that <code>std::error_code</code> is supposed to represent a system- or platform-specific error, whereas <code>std::error_condition</code> is an abstract error that an API or user interface should return.</p>\n\n<p>Okay - but I'm having trouble understanding why we would ever use <code>std::error_code</code> in practice.  It seems to me you're either going to :</p>\n\n<ol>\n<li><p>Be dealing with a system specific error reporting mechanism (like\nsay, <code>errno</code> or something returned from a POSIX call, or say, a call\nto <code>getsockopt</code> with <code>SO_ERROR</code> on Linux) which you can easily\nconvert to an <code>std::error_condition</code> via the <code>std::errc</code> enums, which are supposed to be portable.</p></li>\n<li><p>Be using a user-defined category of errors, which represent application-level\nor business-logic errors, like \"invalid social security number\" or\nwhatever - which also would be a use case for\n<code>std::error_condition</code>.</p></li>\n<li><p>Be dealing with some low-level interface or library which defines its own error reporting mechanism, such as OpenSSL, in which case you would be directly using platform-specific error mechanisms.  In this case you'd then need to convert or map these errors to an <code>std::error_code</code>.  But if you're going to go through the trouble of converting these platform specific errors to something generic like <code>std::error_code</code>, why not just convert to <code>std::error_condition</code>?</p></li>\n</ol>\n\n<p>Also, since POSIX system errors are supposed to be portable, and since they map one-to-one with <code>std::error_condition</code> via the <code>std::errc</code> enum, I can't find any use case for <code>std::error_code</code>.  Most Linux/UNIX system calls set <code>errno</code>, which is supposed to portably map to <code>std::error_condition</code>.</p>\n\n<p>So, I don't see any use case for <code>std::error_code</code> anywhere.  So, what are some example use cases where we would want to use <code>std::error_code</code> instead of <code>std::error_condition</code>?</p>\n"}, {"tags": ["c++", "c", "opencl"], "comments": [{"owner": {"reputation": 9332, "user_id": 3100482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3Q8i.jpg?s=128&g=1", "display_name": "jprice", "link": "https://stackoverflow.com/users/3100482/jprice"}, "edited": false, "score": 0, "creation_date": 1440607506, "post_id": 32232136, "comment_id": 52346863, "body": "Do you actually want to prevent anyone from being able to read your kernel source code at all, or do you just want to embed the kernel source into the executable for ease of distribution?"}, {"owner": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "reply_to_user": {"reputation": 9332, "user_id": 3100482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3Q8i.jpg?s=128&g=1", "display_name": "jprice", "link": "https://stackoverflow.com/users/3100482/jprice"}, "edited": false, "score": 0, "creation_date": 1440608648, "post_id": 32232136, "comment_id": 52347498, "body": "@jprice This is for closed source software, so I actually want both."}], "answers": [{"comments": [{"owner": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "edited": false, "score": 0, "creation_date": 1440668508, "post_id": 32234415, "comment_id": 52372346, "body": "Thank you very much! However, I thought that OpenCL would have an alternative for this. I really don&#39;t like the idea of having to code with strings, and have the extra workload of compressing it and ofuuscating and so on..."}, {"owner": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "edited": false, "score": 0, "creation_date": 1440668536, "post_id": 32234415, "comment_id": 52372363, "body": "And I am targetting any OpenCL device!"}, {"owner": {"reputation": 7967, "user_id": 741692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1300d6b45404082362f2d0f05de23640?s=128&d=identicon&r=PG&f=1", "display_name": "DarkZeros", "link": "https://stackoverflow.com/users/741692/darkzeros"}, "reply_to_user": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "edited": false, "score": 0, "creation_date": 1440682529, "post_id": 32234415, "comment_id": 52382247, "body": "OpenCL as far as I know does not support LLVM format, even if some manufacturers use LLVM binaries as intermediate CL code (ARM). So in order to be fully compatible the string has to be stored. Vulkan will probably fix this by storing LLVM code."}, {"owner": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "edited": false, "score": 0, "creation_date": 1440684726, "post_id": 32234415, "comment_id": 52383944, "body": "You lost me there. Whats does LLVM has to do whith this? I am using Visual Studio and/or gcc"}, {"owner": {"reputation": 5977, "user_id": 1745695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b932c5253c45af61dc443fbc1b9c935c?s=128&d=identicon&r=PG", "display_name": "Dithermaster", "link": "https://stackoverflow.com/users/1745695/dithermaster"}, "edited": false, "score": 0, "creation_date": 1440897194, "post_id": 32234415, "comment_id": 52461807, "body": "LLVM is what SPIR 1.2 and 2.0 use. For the platforms that support it, it is a way to distribute your code in a platform-independent binary fashion. A better solution is SPIR-V for OpenCL 2.1 but it&#39;s not shipping yet."}, {"owner": {"reputation": 317, "user_id": 3980364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68fb35635f24df3b1d27ab384838f5a6?s=128&d=identicon&r=PG&f=1", "display_name": "Hashman", "link": "https://stackoverflow.com/users/3980364/hashman"}, "edited": false, "score": 1, "creation_date": 1441770667, "post_id": 32234415, "comment_id": 52802910, "body": "Note: Even if you mangle the stored source code, there are ways for tools that sit on top of OpenCL.DLL to dump the unmangled code when you call clCompileProgram()."}], "tags": [], "owner": {"reputation": 7967, "user_id": 741692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1300d6b45404082362f2d0f05de23640?s=128&d=identicon&r=PG&f=1", "display_name": "DarkZeros", "link": "https://stackoverflow.com/users/741692/darkzeros"}, "is_accepted": false, "score": 1, "last_activity_date": 1440614848, "creation_date": 1440614848, "answer_id": 32234415, "question_id": 32232136, "link": "https://stackoverflow.com/questions/32232136/opencl-without-external-kernel-file/32234415#32234415", "title": "openCL without external kernel file", "body": "<p>Here you have 2 scenarios:</p>\n\n<ol>\n<li>If you are targeting one single device</li>\n<li>If you are targeting any OpenCL device</li>\n</ol>\n\n<hr>\n\n<p>In the first scenario, there is a possibility to embed the binary data into your executable (using a string). And load it when you run the program.\nThere would be no reverse engineering possible (unless the already known ones, like assembly), since the program will have compiled code and not the original code you wrote.</p>\n\n<p>The way of doing that would be:</p>\n\n<pre><code>uchar binary_dev1[binarySize] = \"...\"\nuchar * binary = &amp;binary_dev1;\nprogram = clCreateProgramWithBinary(context, 1, &amp;device, \n                                    &amp;binarySize, \n                                    (const unsigned char**)&amp;binary,\n                                    &amp;binaryStatus,\n                                    &amp;errNum);\n</code></pre>\n\n<hr>\n\n<p>The second alternative involves protecting the source code in the kernel by some sort of \"mangling\".\nSince the mangler code is going to be compiled, reverse engineer it could be complicated.</p>\n\n<p>You can do any mangling you can think of that is reversible, and even combine them. Some ideas:</p>\n\n<ul>\n<li><p>Compress the code it using a compression format, but hardcode some parameters of the decompresion, to make it less straightforward.</p>\n\n<ul>\n<li>LZ4, ZLIB, etc...</li>\n</ul></li>\n<li><p>Use an XOR operator on the code. Better if it varies over time, and better if it varies using a non-obvious rule. </p>\n\n<ul>\n<li>For example:\n\n<blockquote>\n<pre><code>char seq = 0x1A;\nfor(int i=0; i&lt;len; i++){\n    out[i] = in[i] ^ seq;\n    seq = ((seq ^ i) * 78965213) &gt;&gt; 4 + ((seq * i) * 56987) &lt;&lt; 4;\n}\n</code></pre>\n</blockquote></li>\n</ul></li>\n<li><p>Encode it using encoding methods that require a key, and are reversible</p></li>\n<li>Use a program that protects your program binary towards reverse engineering, like Themida.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 5977, "user_id": 1745695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b932c5253c45af61dc443fbc1b9c935c?s=128&d=identicon&r=PG", "display_name": "Dithermaster", "link": "https://stackoverflow.com/users/1745695/dithermaster"}, "is_accepted": false, "score": 1, "last_activity_date": 1440897259, "creation_date": 1440897259, "answer_id": 32292281, "question_id": 32232136, "link": "https://stackoverflow.com/questions/32232136/opencl-without-external-kernel-file/32292281#32292281", "title": "openCL without external kernel file", "body": "<p>Use SPIR 1.2 for OpenCL 1.2 or SPIR 2.0 for OpenCL 2.0 until SPIR-V for OpenCL 2.1 is available.</p>\n"}], "owner": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 422, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1440897259, "creation_date": 1440607202, "last_edit_date": 1440608735, "question_id": 32232136, "link": "https://stackoverflow.com/questions/32232136/opencl-without-external-kernel-file", "title": "openCL without external kernel file", "body": "<p>I would like to create an OpenCL kernel without giving access to it to the end user. </p>\n\n<p>Therefore, I can't use a regular external <code>.cl</code> text file. What are the alternatives, regarding that I would like to avoid creating a huge text string with the kernel?</p>\n\n<p>And yet another question, if I put this code in an hardcoded string, won't it be possible to access that code from some disassembler?</p>\n"}, {"tags": ["android", "c++", "qt", "debugging", "android-ndk"], "comments": [{"owner": {"reputation": 16742, "user_id": 999943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e4c3b5820f4f39c2bbe57a8823dd0ad?s=128&d=identicon&r=PG", "display_name": "phyatt", "link": "https://stackoverflow.com/users/999943/phyatt"}, "edited": false, "score": 0, "creation_date": 1440612081, "post_id": 32232087, "comment_id": 52349515, "body": "Android has moved to using gradle in Android Studio instead of ant+eclipse combo.  Using gradle in Qt Creator has worked well for me in the past."}, {"owner": {"reputation": 35, "user_id": 2110611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9afef2fcfd705dec875533cdacfad006?s=128&d=identicon&r=PG", "display_name": "nearproc", "link": "https://stackoverflow.com/users/2110611/nearproc"}, "reply_to_user": {"reputation": 16742, "user_id": 999943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e4c3b5820f4f39c2bbe57a8823dd0ad?s=128&d=identicon&r=PG", "display_name": "phyatt", "link": "https://stackoverflow.com/users/999943/phyatt"}, "edited": false, "score": 0, "creation_date": 1440774543, "post_id": 32232087, "comment_id": 52427414, "body": "Thanks a lot for your help :)  I&#39;ll give this a try."}, {"owner": {"reputation": 35, "user_id": 2110611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9afef2fcfd705dec875533cdacfad006?s=128&d=identicon&r=PG", "display_name": "nearproc", "link": "https://stackoverflow.com/users/2110611/nearproc"}, "reply_to_user": {"reputation": 16742, "user_id": 999943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e4c3b5820f4f39c2bbe57a8823dd0ad?s=128&d=identicon&r=PG", "display_name": "phyatt", "link": "https://stackoverflow.com/users/999943/phyatt"}, "edited": false, "score": 0, "creation_date": 1440877090, "post_id": 32232087, "comment_id": 52457580, "body": "Even when using Gradle it still doesn&#39;t show variables in the expressions window: &lt;no such value&gt;   I <b>think</b> gradle is working because I had to make changes to a gradle.build file to fix some spurious &#39;android.buildToolsVersion is missing&#39; error.   Any further ideas?   I&#39;m getting frustrated!  I end up not writing any code but wasting time trying to create a usable environment.  I know that there are complications with cross compilation and deploying to a non-native architecture but it really shouldn&#39;t be this difficult! Grrrr      Any further ideas from anyone would be greatly appreciated."}, {"owner": {"reputation": 35, "user_id": 2110611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9afef2fcfd705dec875533cdacfad006?s=128&d=identicon&r=PG", "display_name": "nearproc", "link": "https://stackoverflow.com/users/2110611/nearproc"}, "reply_to_user": {"reputation": 16742, "user_id": 999943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e4c3b5820f4f39c2bbe57a8823dd0ad?s=128&d=identicon&r=PG", "display_name": "phyatt", "link": "https://stackoverflow.com/users/999943/phyatt"}, "edited": false, "score": 0, "creation_date": 1440877537, "post_id": 32232087, "comment_id": 52457678, "body": "Oh and thank you grammar police for editing my original posting.  It&#39;s really interesting that this happens on this site.  I certainly wasn&#39;t aware of it.  Please feel free to edit this comment as well."}], "owner": {"reputation": 35, "user_id": 2110611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9afef2fcfd705dec875533cdacfad006?s=128&d=identicon&r=PG", "display_name": "nearproc", "link": "https://stackoverflow.com/users/2110611/nearproc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 311, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1440877853, "creation_date": 1440607033, "last_edit_date": 1440877853, "question_id": 32232087, "link": "https://stackoverflow.com/questions/32232087/qt-creator-android-debugging-cannot-see-variables", "title": "Qt Creator Android Debugging - cannot see variables", "body": "<p>I have upgraded to Qt5.5 from 5.1.1.  Since then, when I create a <strong>stock</strong> project on android and run a <strong>debug</strong> build - which is physically deployed to an android device - I cannot see any variables in the watch view.  </p>\n\n<p>This is without even using a shared library.</p>\n\n<p>Debugging and showing variables used to function correctly before I moved to Qt5.5.  Given that my android environment and dependencies (<code>ant</code>, <code>ndk</code>, etc) have not changed, I suspect this is something to do with either Qt or the configuration of it.  </p>\n\n<p>Note that: <code>show solib-search-path</code> <strong>does</strong> include the path to my debug binary/object files. I was hoping Qt would shield me from a lot of the issues with native C++ on Android, but that has not been the case. How do I fix this issue? Is there an easy way to debug shared libraries (my own or others) that are loaded via <code>dlopen()</code>?</p>\n"}, {"tags": ["c++", "visual-studio-2008", "boost-asio", "udpclient"], "comments": [{"owner": {"reputation": 5694, "user_id": 1552737, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YfC6P.jpg?s=128&g=1", "display_name": "IKavanagh", "link": "https://stackoverflow.com/users/1552737/ikavanagh"}, "edited": false, "score": 1, "creation_date": 1440607136, "post_id": 32231959, "comment_id": 52346679, "body": "You should post the minimal solution necessary to cause your problem. If a simple &quot;Hello World&quot; program produces the error than post only that. There&#39;s no need for a massive program when a small one will do."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440607216, "post_id": 32231959, "comment_id": 52346724, "body": "How does your system find the boost DLLs? Did you check your <code>PATH</code> environment variable?"}], "answers": [{"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1440623402, "post_id": 32232167, "comment_id": 52355750, "body": "or use the fusion logviewer and find out how the CRT is linked."}], "tags": [], "owner": {"reputation": 4742, "user_id": 3154588, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c8ef4736f3db9e55c6ce1f36a4eaf949?s=128&d=identicon&r=PG&f=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/3154588/phil"}, "is_accepted": false, "score": 1, "last_activity_date": 1440607295, "creation_date": 1440607295, "answer_id": 32232167, "question_id": 32231959, "link": "https://stackoverflow.com/questions/32231959/cant-run-program-after-including-boost-asio-hpp/32232167#32232167", "title": "Can&#39;t run program after including &lt;boost/asio.hpp&gt;", "body": "<p>You are likely pulling in a runtime dependence on a dll because of boost's default implicit linking (using <code>#pragma comment(lib ...</code> statements). The easiest way to track this down is to use <a href=\"http://www.dependencywalker.com/\" rel=\"nofollow\">dependency walker</a> on your executable. (Make sure you use the right 32 or 64-bit version of depends.)</p>\n"}], "owner": {"reputation": 1613, "user_id": 456065, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/49b8a5172d9634e038c69110bfb5e480?s=128&d=identicon&r=PG", "display_name": "Sanich", "link": "https://stackoverflow.com/users/456065/sanich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 421, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440607533, "creation_date": 1440606548, "last_edit_date": 1440607533, "question_id": 32231959, "link": "https://stackoverflow.com/questions/32231959/cant-run-program-after-including-boost-asio-hpp", "title": "Can&#39;t run program after including &lt;boost/asio.hpp&gt;", "body": "<p>I'm trying to implement a simple UDP client using <code>boost/asio.hpp</code>.\nStarting from a minimal program:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;boost/asio.hpp&gt;\n\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    return 0;\n}\n</code></pre>\n\n<p>I'm able to build the project successfully (compilation and link). But when trying to run the program i'm getting:\n<a href=\"https://i.stack.imgur.com/dR5Sw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dR5Sw.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is caused by the <code>&lt;boost/asio.hpp&gt;</code> include. \nWithout it, everything is fine What can be done? Thanks! </p>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1440606516, "post_id": 32231909, "comment_id": 52346288, "body": "Boost is a C++ library. Removing your C tag and adding C++. Removing your &quot;cananyonehelp&quot; phrase (contains no information). Asking you to supply more information, such as a minimal verifiable example, your compiler command line etc."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 1, "creation_date": 1440606884, "post_id": 32231909, "comment_id": 52346523, "body": "It almost sounds like a version mismatch; e.g. your environment is misconfigured in a way that it&#39;s pulling header files from two different versions of boost."}], "owner": {"reputation": 1, "user_id": 5269477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83716449ac99df7b442e1e47122ae5eb?s=128&d=identicon&r=PG&f=1", "display_name": "hdgn", "link": "https://stackoverflow.com/users/5269477/hdgn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1440606584, "creation_date": 1440606380, "last_edit_date": 1440606584, "question_id": 32231909, "link": "https://stackoverflow.com/questions/32231909/error-error-user-defined-boost-posix-api-or-boost-windows-api-not-supported", "title": "error: #error user defined BOOST_POSIX_API or BOOST_WINDOWS_API not supported", "body": "<p>I am trying to compile a program and getting the error in the title. The compilation requires boost. The boost 1.55 is installed and I don't think there is problem with the boost. I don't have any idea why I am getting this error. </p>\n\n<p>My machine is running Ubuntu 14.04 LTS and gcc version is 4.8.4.</p>\n"}, {"tags": ["c++", "multithreading", "segmentation-fault", "shared-ptr", "aerospike"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 4, "creation_date": 1440606453, "post_id": 32231888, "comment_id": 52346256, "body": "Sounds like a lifetime issue. There&#39;s nothing we can do with these little isolated snippets, though. Where is your <a href=\"http://stackoverflow.com/help/mcve\">testcase</a>?"}, {"owner": {"reputation": 2200, "user_id": 1221444, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bee450b4001f3fba7c1897f20b4b6c12?s=128&d=identicon&r=PG", "display_name": "Eumcoz", "link": "https://stackoverflow.com/users/1221444/eumcoz"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440607022, "post_id": 32231888, "comment_id": 52346611, "body": "I will update in a minute with more of the flow, but there is not a whole lot more too it.  Hopefully the additional code will give you a better idea though."}, {"owner": {"reputation": 1213, "user_id": 612003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HuUtm.jpg?s=128&g=1", "display_name": "Matthew Moss", "link": "https://stackoverflow.com/users/612003/matthew-moss"}, "edited": false, "score": 6, "creation_date": 1440607360, "post_id": 32231888, "comment_id": 52346788, "body": "The line casting a <code>void *</code> to a <code>shared_ptr *</code> sends shudders down my spine. I don&#39;t <i>know</i> that it&#39;s wrong, but I&#39;d suggest sending in <code>c_list.get()</code> to <code>aerospike_query_foreach</code> and use a raw <code>std::set&lt;int&gt;</code> pointer in the <code>process_set</code> function; it asserts no ownership/sharing does not appear to be threaded/reentrant, so it should be safe to do so.  (At least, try that to eliminate a reference-counting error\u2026)"}, {"owner": {"reputation": 2200, "user_id": 1221444, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bee450b4001f3fba7c1897f20b4b6c12?s=128&d=identicon&r=PG", "display_name": "Eumcoz", "link": "https://stackoverflow.com/users/1221444/eumcoz"}, "edited": false, "score": 0, "creation_date": 1440607495, "post_id": 32231888, "comment_id": 52346857, "body": "Lightness: Updated the OP to include the calling function.  Basically anytime I get a request, my program will call check_list, which checks to see if any value from the list is in the database. Matthew:  I had a feeling it might be the shared_ptr, I&#39;ll give passing in the set a shot."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1440607639, "post_id": 32231888, "comment_id": 52346941, "body": "I dislike being ignored when I&#39;m trying to help someone, Eumcoz. Make a <a href=\"http://stackoverflow.com/help/mcve\">testcase</a>."}, {"owner": {"reputation": 2200, "user_id": 1221444, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bee450b4001f3fba7c1897f20b4b6c12?s=128&d=identicon&r=PG", "display_name": "Eumcoz", "link": "https://stackoverflow.com/users/1221444/eumcoz"}, "edited": false, "score": 0, "creation_date": 1440608223, "post_id": 32231888, "comment_id": 52347277, "body": "Lightness:  I&#39;m sorry I won&#39;t be able to make a verifiable test case in this case.  As I said before I am not able to reproduce this problem easily, it is an intermittent problem.  I provided a minimal, complete example of my code.  The only way I can provide a verifiable solution is to provide you all of my source code, which will not be possible."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 1, "creation_date": 1440608536, "post_id": 32231888, "comment_id": 52347441, "body": "@Eumcoz: It&#39;s not minimal because half of the code obviously has nothing to do with the problem, e.g. the comments or the try/catch or the log output. It&#39;s likewise not complete because we cannot easily try to compile it on our own machines."}], "answers": [{"comments": [{"owner": {"reputation": 2200, "user_id": 1221444, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bee450b4001f3fba7c1897f20b4b6c12?s=128&d=identicon&r=PG", "display_name": "Eumcoz", "link": "https://stackoverflow.com/users/1221444/eumcoz"}, "edited": false, "score": 1, "creation_date": 1440608297, "post_id": 32232362, "comment_id": 52347325, "body": "Thank you Christophe,  that may be it, I will throw in a mutex around the insert and see if that fixes the problem, I should have checked the Aerospike documentation first.  Sorry about that."}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1440608333, "post_id": 32232362, "comment_id": 52347342, "body": "I&#39;d suggest a tool like ThreadSanitizer or valgrind to confirm the issue."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 2200, "user_id": 1221444, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bee450b4001f3fba7c1897f20b4b6c12?s=128&d=identicon&r=PG", "display_name": "Eumcoz", "link": "https://stackoverflow.com/users/1221444/eumcoz"}, "edited": false, "score": 1, "creation_date": 1440609519, "post_id": 32232362, "comment_id": 52347998, "body": "@Eumcoz Unfortunately, the mutex arround the insertion block might not be sufficient.  See the edit."}, {"owner": {"reputation": 2200, "user_id": 1221444, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bee450b4001f3fba7c1897f20b4b6c12?s=128&d=identicon&r=PG", "display_name": "Eumcoz", "link": "https://stackoverflow.com/users/1221444/eumcoz"}, "edited": false, "score": 0, "creation_date": 1440609634, "post_id": 32232362, "comment_id": 52348075, "body": "Thank you for the information, looking into structuring my code differently to use a mutex as well as using a raw pointer!"}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 3, "last_activity_date": 1440609406, "last_edit_date": 1495541177, "creation_date": 1440608052, "answer_id": 32232362, "question_id": 32231888, "link": "https://stackoverflow.com/questions/32231888/crash-while-inserting-int-a-set/32232362#32232362", "title": "Crash while inserting int a set", "body": "<p>The <a href=\"http://www.aerospike.com/apidocs/c/de/d96/group__query__operations.html#ga1daa1661dc5020e34749bd9aece7987b\" rel=\"nofollow noreferrer\">aerospike APi documentation</a> says for the callback  (i.e. <code>process_set()</code>, here):</p>\n\n<blockquote>\n  <p>Execute a query and call the callback function for each result item.\n  Multiple threads will likely be calling the callback in parallel.\n  Therefore, <strong><em>your callback implementation should be thread safe.</em></strong></p>\n</blockquote>\n\n<p>As several threads might insert at the same time in the same set (the one pointed to by your shared pointer),  you'll get race conditions and hence undefined behaviour !</p>\n\n<p>So I think that you should protect at least your set insertion block with a <code>lock_guard</code> on a mutex. </p>\n\n<p><strong>Important edit:</strong>  <code>boost::shared_ptr&lt;&gt;</code> <a href=\"http://www.boost.org/doc/libs/1_58_0/libs/smart_ptr/shared_ptr.htm#ThreadSafety\" rel=\"nofollow noreferrer\">can't assumed to be thread safe</a>.  In the examples on boost.org, they suggest that a shared pointer going out of scope might cause a race.   It may therefore be highly advisable to follow  <strong><a href=\"https://stackoverflow.com/users/612003/matthew-moss\">Matthew Moss</a></strong>'s suggestion in the comments and use a raw pointer to the set within the bounds of process_set(). </p>\n"}], "owner": {"reputation": 2200, "user_id": 1221444, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bee450b4001f3fba7c1897f20b4b6c12?s=128&d=identicon&r=PG", "display_name": "Eumcoz", "link": "https://stackoverflow.com/users/1221444/eumcoz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1232, "favorite_count": 0, "accepted_answer_id": 32232362, "answer_count": 1, "score": 2, "last_activity_date": 1440614373, "creation_date": 1440606309, "last_edit_date": 1440614373, "question_id": 32231888, "link": "https://stackoverflow.com/questions/32231888/crash-while-inserting-int-a-set", "title": "Crash while inserting int a set", "body": "<p>My program seems to be crashing while inserting and int into a set, and I cannot track down the reason for this.  Here is there relevant code:</p>\n\n<pre><code>bool request::check_list(std::vector&lt;int&gt; search_vec)\n{\n\n    std::set&lt;int&gt; *tmp_ptr = create_int_set();\n    boost::shared_ptr&lt;std::set&lt;int&gt; &gt; c_list(tmp_ptr);\n\n\n    if(aerospike_query_foreach(as, &amp;err, NULL, &amp;query, process_set, &amp;c_list) != AEROSPIKE_OK)\n    {\n        return false;\n    }\n\n    for(int i = 0; i &lt; search_vec.size(); i++)\n    {\n        if(c_list-&gt;find(search_vec[i]) != c_list-&gt;end())\n        {\n            c_list_value_ = search_vec[i];\n            return true;\n        }\n    }\n    return false;       \n}\n\nbool request::process_set(const as_val *val, void * udata)\n{\n    try\n    {\n        boost::shared_ptr&lt;std::set&lt;int&gt; &gt; c_set = *(boost::shared_ptr&lt;std::set&lt;int&gt; &gt; *)(udata);\n        if(val == NULL)\n        {\n            return true;\n        }\n        if(val-&gt;type == AS_REC)\n        {\n            if (val!=NULL)\n            {\n                as_record *rec = as_record_fromval(val);\n\n                if (rec!=NULL)\n                {\n                    as_integer* c_id = as_record_get_integer(rec,\"c_id\");\n                    int cid = 0;\n                    cid = boost::lexical_cast&lt;int&gt;(c_id-&gt;value);\n                    if(c_set != nullptr)\n                    {\n                        c_set-&gt;insert(c_id);\n                    }\n                    as_record_destroy(rec);\n                    as_integer_destroy(c_id);\n                }\n        }\n        return true;\n    }catch(...){}\n    return false;\n}\n</code></pre>\n\n<p>The line <code>c_set-&gt;insert(c_id);</code> is causing a segfault.  Here is this backtrace of the crash:</p>\n\n<pre><code>#0  0x00007f2064299f94 in std::_Rb_tree_rotate_right(std::_Rb_tree_node_base*, std::_Rb_tree_node_base*&amp;) () from /usr/lib64/libstdc++.so.6\n#1  0x00007f206429a12b in std::_Rb_tree_insert_and_rebalance(bool, std::_Rb_tree_node_base*, std::_Rb_tree_node_base*, std::_Rb_tree_node_base&amp;) () from /usr/lib64/libstdc++.so.6\n#2  0x00000000004829d9 in std::_Rb_tree&lt;int, int, std::_Identity&lt;int&gt;, std::less&lt;int&gt;, std::allocator&lt;int&gt; &gt;::_M_insert_&lt;int const&amp;&gt; (this=0x7f1fcc005440, __x=0x0, __p=0x7f1f3c0009a0, __v=@0x7f20159e729c)\n    at /opt/centos/devtoolset-1.1/root/usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/bits/stl_tree.h:981\n#3  0x000000000047f1e0 in std::_Rb_tree&lt;int, int, std::_Identity&lt;int&gt;, std::less&lt;int&gt;, std::allocator&lt;int&gt; &gt;::_M_insert_unique&lt;int const&amp;&gt; (this=0x7f1fcc005440, __v=@0x7f20159e729c)\n    at /opt/centos/devtoolset-1.1/root/usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/bits/stl_tree.h:1299\n#4  0x000000000047c473 in std::set&lt;int, std::less&lt;int&gt;, std::allocator&lt;int&gt; &gt;::insert (this=0x7f1fcc005440, __x=@0x7f20159e729c)\n    at /opt/centos/devtoolset-1.1/root/usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/bits/stl_set.h:415\n#5  0x00000000004765ee in request::process_set (val=0x7f20159e73e0, udata=0x7f200b9d6620) at ../../request.cpp:1862\n</code></pre>\n\n<p>I am assuming there is a problem where the set is not being initialized, or something similar to that.  Here is how I create and pass the set from the another function, I have tried two ways to create it:</p>\n\n<pre><code>boost::shared_ptr&lt;std::set&lt;int&gt; &gt; c_list(new std::set&lt;int&gt;());\n</code></pre>\n\n<p>and</p>\n\n<pre><code>std::set&lt;int&gt; *tmp_ptr = create_int_set();\nboost::shared_ptr&lt;std::set&lt;int&gt; &gt; c_list(tmp_ptr);\n\nstd::set&lt;int&gt;* request::create_int_set()\n{\n    return new std::set&lt;int&gt;();\n}\n</code></pre>\n\n<p>The calling function is a callback function from a database driver, that takes in a few different objects, most notably however are the process_set and the c_list, which is passed as a void*:</p>\n\n<pre><code>aerospike_query_foreach(as, &amp;err, NULL, &amp;query, process_set, &amp;c_list)\n</code></pre>\n\n<p>This crash does not happen all the time, in fact it is fairly rare, which makes me think there is something I am doing wrong, some sort of undefined behavior.  Any help would be greatly appreciated!</p>\n"}, {"tags": ["c++", "floating-point-precision", "rounding-error"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1440606242, "post_id": 32231777, "comment_id": 52346121, "body": "Please <b><a href=\"https://stackoverflow.com/posts/32231777/edit\">edit</a></b> your question with an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> or <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">SSCCE (Short, Self Contained, Correct Example)</a>"}, {"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 4, "creation_date": 1440606250, "post_id": 32231777, "comment_id": 52346127, "body": "You&#39;re almost certainly using a <code>float</code> type, conversion, or constant somewhere - that&#39;s the nearest single-precision value to the original."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1440606251, "post_id": 32231777, "comment_id": 52346128, "body": "Use cout with precision set to 15 significant figures: a good rule of thumb for a floating point double. If you&#39;re using a <code>float</code> then you&#39;re out of luck."}, {"owner": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "edited": false, "score": 3, "creation_date": 1440606266, "post_id": 32231777, "comment_id": 52346142, "body": "<a href=\"http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">What Every Computer Scientist Should Know About Floating-Point Arithmetic</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "edited": false, "score": 0, "creation_date": 1440606795, "post_id": 32231777, "comment_id": 52346462, "body": "@Drop: Software developers are not [the same as] computer scientists. That article is esoteric. There is a much better one somewhere that eludes me right now. Regardless, I don&#39;t think the OP needs teaching about floating-point precision; they just need teaching about some specific conversion somewhere that they&#39;re not currently aware of."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1440607976, "post_id": 32231777, "comment_id": 52347135, "body": "@LightnessRacesinOrbit was it this one? <a href=\"http://floating-point-gui.de/\" rel=\"nofollow noreferrer\">floating-point-gui.de</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "edited": false, "score": 0, "creation_date": 1440608463, "post_id": 32231777, "comment_id": 52347415, "body": "@skyking: <i>&quot;which should output 22258199.5000000&quot;</i> He doesn&#39;t want it to round to anything..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user177800"}, "edited": false, "score": 0, "creation_date": 1440627202, "post_id": 32231777, "comment_id": 52357406, "body": "which is it <code>float</code> or <code>double</code>? it makes a difference."}, {"owner": {"reputation": 79, "user_id": 4858544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2rNdE.jpg?s=128&g=1", "display_name": "ankit deora", "link": "https://stackoverflow.com/users/4858544/ankit-deora"}, "edited": false, "score": 1, "creation_date": 1440657653, "post_id": 32231777, "comment_id": 52365940, "body": "@Bathseba thanks for the suggestion, cout.precision() did the job :)"}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 4858544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2rNdE.jpg?s=128&g=1", "display_name": "ankit deora", "link": "https://stackoverflow.com/users/4858544/ankit-deora"}, "edited": false, "score": 0, "creation_date": 1440657598, "post_id": 32232306, "comment_id": 52365906, "body": "I found the problem, it was the cout stream that was causing the issue, I was using double only but it got rounded off while printing using cout. I set the precision using cout.precision(15) and it worked fine."}], "tags": [], "owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": false, "score": 4, "last_activity_date": 1440607832, "creation_date": 1440607832, "answer_id": 32232306, "question_id": 32231777, "link": "https://stackoverflow.com/questions/32231777/how-to-avoid-rounding-off-of-large-float-or-double-values/32232306#32232306", "title": "How to avoid rounding off of large float or double values?", "body": "<p>A 32-bit <code>float</code> type holds approximately 7 decimal digits, and anything beyond that will be rounded to the nearest representable value.</p>\n\n<p>A 64-bit <code>double</code> type holds approximately 15 decimal digits and also rounds values beyond that.</p>\n\n<p>Since your value is rounding to the nearest 7-digit number, it appears you're using a <code>float</code> variable somewhere. Copying a <code>float</code> value to <code>double</code> doesn't restore the lost digits.</p>\n\n<p>This doesn't apply to your example, but it might in others - the rounding occurs in binary, not decimal, so you might end up with a value that appears to contain many more digits than I indicated above. Just know that only the first 7 or 15 are going to be accurate in decimal.</p>\n"}], "owner": {"reputation": 79, "user_id": 4858544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2rNdE.jpg?s=128&g=1", "display_name": "ankit deora", "link": "https://stackoverflow.com/users/4858544/ankit-deora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2585, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1440658104, "creation_date": 1440605946, "last_edit_date": 1440658104, "question_id": 32231777, "link": "https://stackoverflow.com/questions/32231777/how-to-avoid-rounding-off-of-large-float-or-double-values", "title": "How to avoid rounding off of large float or double values?", "body": "<p>I am working on some c++ problem which should output 22258199.5000000 this number, I have stored the result in double datatype and when I tried to print that variable using std::cout it rounds off to 22258200.0000000, I don't know why is this happening? can anybody explain? what can I do to avoid this problem? </p>\n"}, {"tags": ["c++", "regex", "boost", "sip"], "comments": [{"owner": {"reputation": 24802, "user_id": 232918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5897762377de1c8ffb9a98673262e91?s=128&d=identicon&r=PG", "display_name": "doron", "link": "https://stackoverflow.com/users/232918/doron"}, "edited": false, "score": 1, "creation_date": 1440606106, "post_id": 32231680, "comment_id": 52346036, "body": "Why not use a proper parser or write one yourself?"}, {"owner": {"reputation": 448, "user_id": 1344183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e437bae098aa6b93cd1365cfb16561?s=128&d=identicon&r=PG", "display_name": "Dolk13", "link": "https://stackoverflow.com/users/1344183/dolk13"}, "reply_to_user": {"reputation": 24802, "user_id": 232918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5897762377de1c8ffb9a98673262e91?s=128&d=identicon&r=PG", "display_name": "doron", "link": "https://stackoverflow.com/users/232918/doron"}, "edited": false, "score": 0, "creation_date": 1440606602, "post_id": 32231680, "comment_id": 52346337, "body": "@doron I have the proper parser built at BNF. But I want to extract some of the fields from the message to complete the parsing. Full parsing made too long."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1440615262, "post_id": 32231680, "comment_id": 52351402, "body": "&quot;Full parsing made too long&quot; - what does that mean?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1440617660, "post_id": 32231680, "comment_id": 52352781, "body": "<a href=\"https://www.livecoding.tv/sehe/\" rel=\"nofollow noreferrer\">livecoding.tv/sehe</a> &lt;-- working on it"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 24802, "user_id": 232918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5897762377de1c8ffb9a98673262e91?s=128&d=identicon&r=PG", "display_name": "doron", "link": "https://stackoverflow.com/users/232918/doron"}, "edited": false, "score": 0, "creation_date": 1440623111, "post_id": 32231680, "comment_id": 52355616, "body": "<a href=\"http://stackoverflow.com/a/32236528/85371\">posted</a>; Listed the livecoding vods for your hilarity. (<a href=\"http://chat.stackoverflow.com/transcript/10?m=24182469#24182469\">experiment</a>) /cc @doron"}], "answers": [{"comments": [{"owner": {"reputation": 448, "user_id": 1344183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e437bae098aa6b93cd1365cfb16561?s=128&d=identicon&r=PG", "display_name": "Dolk13", "link": "https://stackoverflow.com/users/1344183/dolk13"}, "edited": false, "score": 0, "creation_date": 1440609548, "post_id": 32232576, "comment_id": 52348024, "body": "Thanks for answer. But why custom parser is easier to test than the regex?"}, {"owner": {"reputation": 5052, "user_id": 479574, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/11f025f0f74ee6557e479a0ba2215223?s=128&d=identicon&r=PG", "display_name": "mark", "link": "https://stackoverflow.com/users/479574/mark"}, "reply_to_user": {"reputation": 448, "user_id": 1344183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e437bae098aa6b93cd1365cfb16561?s=128&d=identicon&r=PG", "display_name": "Dolk13", "link": "https://stackoverflow.com/users/1344183/dolk13"}, "edited": false, "score": 0, "creation_date": 1440610434, "post_id": 32232576, "comment_id": 52348581, "body": "It really just depends on your requirements for performance, items you&#39;re testing for, variations on input, if you plan to modify the headers, etc. etc.  You&#39;ll find a wide variety of SIP implementations with all sorts of oddities out there and you might not be able to regex your way out of some situations..."}, {"owner": {"reputation": 448, "user_id": 1344183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e437bae098aa6b93cd1365cfb16561?s=128&d=identicon&r=PG", "display_name": "Dolk13", "link": "https://stackoverflow.com/users/1344183/dolk13"}, "edited": false, "score": 0, "creation_date": 1440611101, "post_id": 32232576, "comment_id": 52348965, "body": "Probably yes. Most likely i will take your advice."}], "tags": [], "owner": {"reputation": 5052, "user_id": 479574, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/11f025f0f74ee6557e479a0ba2215223?s=128&d=identicon&r=PG", "display_name": "mark", "link": "https://stackoverflow.com/users/479574/mark"}, "is_accepted": false, "score": 2, "last_activity_date": 1440608754, "creation_date": 1440608754, "answer_id": 32232576, "question_id": 32231680, "link": "https://stackoverflow.com/questions/32231680/how-to-parse-multi-line-headers-of-sip-message-using-regex/32232576#32232576", "title": "How to parse multi-line headers of SIP message using regex?", "body": "<p>A line continuation character can be a space or a horizontal tab... depending on your regex parser you can match on \\r\\n[ /t] for line-continuation.  That said, your regex might be quite complex testing that wherever linear-whitespace could be found... you might be better off with a custom parser breaking the header lines and testing for what you need.</p>\n"}, {"comments": [{"owner": {"reputation": 448, "user_id": 1344183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e437bae098aa6b93cd1365cfb16561?s=128&d=identicon&r=PG", "display_name": "Dolk13", "link": "https://stackoverflow.com/users/1344183/dolk13"}, "edited": false, "score": 0, "creation_date": 1440610956, "post_id": 32233025, "comment_id": 52348891, "body": "Thanks for answer! I&#39;m using Boost.Regex. Your pattern is unfortunately not working. =("}, {"owner": {"reputation": 1806, "user_id": 495011, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/dc671b7fcc7a199bdd1f46acea329d7c?s=128&d=identicon&r=PG", "display_name": "Eder", "link": "https://stackoverflow.com/users/495011/eder"}, "reply_to_user": {"reputation": 448, "user_id": 1344183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e437bae098aa6b93cd1365cfb16561?s=128&d=identicon&r=PG", "display_name": "Dolk13", "link": "https://stackoverflow.com/users/1344183/dolk13"}, "edited": false, "score": 0, "creation_date": 1440612893, "post_id": 32233025, "comment_id": 52349980, "body": "@Dolk13: Sorry, I am not familiar with the Boost regex engine, but as per my understanding Boost accepts PCRE :(."}], "tags": [], "owner": {"reputation": 1806, "user_id": 495011, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/dc671b7fcc7a199bdd1f46acea329d7c?s=128&d=identicon&r=PG", "display_name": "Eder", "link": "https://stackoverflow.com/users/495011/eder"}, "is_accepted": false, "score": 1, "last_activity_date": 1440610240, "creation_date": 1440610240, "answer_id": 32233025, "question_id": 32231680, "link": "https://stackoverflow.com/questions/32231680/how-to-parse-multi-line-headers-of-sip-message-using-regex/32233025#32233025", "title": "How to parse multi-line headers of SIP message using regex?", "body": "<p>Please try with the following pattern:</p>\n\n<pre><code>/(?i)(f(?:rom):(?:(?!^[^\\r?\\n]+)[\\S\\s])*((?:\\s;\\s*([^=]+)\\s*=\\s*([^\\r?\\n]+))))/g\n</code></pre>\n\n<p>Working demo at <a href=\"https://regex101.com/r/yW3dN9/1\" rel=\"nofollow\">RegEx101</a></p>\n"}, {"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1440623119, "post_id": 32236528, "comment_id": 52355624, "body": "Here&#39;s the vods of the live stream in case you like to see: <a href=\"http://tinyurl.com/sip-ml-1\" rel=\"nofollow noreferrer\">part #1</a>, <a href=\"http://tinyurl.com/sip-ml-2\" rel=\"nofollow noreferrer\">part #2</a>, <a href=\"http://tinyurl.com/sip-ml-3\" rel=\"nofollow noreferrer\">part #3</a> and <a href=\"http://tinyurl.com/sip-ml-4\" rel=\"nofollow noreferrer\">part #4</a>. You can enjoy seeing me struggle with simple things and deployment issues, as well brainfarts and mental bugs."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 3, "last_activity_date": 1440623281, "last_edit_date": 1440623281, "creation_date": 1440622457, "answer_id": 32236528, "question_id": 32231680, "link": "https://stackoverflow.com/questions/32231680/how-to-parse-multi-line-headers-of-sip-message-using-regex/32236528#32236528", "title": "How to parse multi-line headers of SIP message using regex?", "body": "<p>I'd second the motion to use/generate a proper parser.</p>\n\n<p>There's nothing stopping you from parsing the headers in a separate step, but you can still specify the grammar declaratively, which is the main point.</p>\n\n<p>The best part here is indeed</p>\n\n<ul>\n<li>the declarative style making it easier to extend with more grammar (the surrounding bits or more details like disallowing CTL characters)</li>\n<li>the \"free\" debugging tools (<code>#define BOOST_SPIRIT_DEBUG</code>, done)</li>\n</ul>\n\n<p>Here's a simple take on the multiline header syntax :</p>\n\n<ul>\n<li><p>rfc 2616</p>\n\n<blockquote>\n  <p>Header fields can be extended over multiple lines by preceding each extra line with at least one SP or HT</p>\n</blockquote></li>\n<li><p>rfc 822</p>\n\n<blockquote>\n<pre><code> field       =  field-name \":\" [ field-body ] CRLF\n\n field-name  =  1*&lt;any CHAR, excluding CTLs, SPACE, and \":\"&gt;\n\n field-body  =  field-body-contents\n                [CRLF LWSP-char field-body]\n\n field-body-contents =\n               &lt;the ASCII characters making up the field-body, as\n                defined in the following sections, and consisting\n                of combinations of atom, quoted-string, and\n                specials tokens, or else consisting of texts&gt;\n</code></pre>\n</blockquote></li>\n</ul>\n\n<p>So without further ado, here's a simple grammar for roughly that, parsing from any range of input iterators into a std::map:</p>\n\n<pre><code>using Headers = std::map&lt;std::string, std::string&gt;;\n</code></pre>\n\n<p>Here's the core of the parser:</p>\n\n<pre><code>    auto&amp; crlf       = \"\\r\\n\";\n    auto&amp; tspecials = \" \\t&gt;&lt;@,;:\\\\\\\"/][?=}{:\";\n\n    rule&lt;It, std::string()&gt; token, value;\n\n    token = +~char_(tspecials); // FIXME? should filter CTLs\n    value = *(char_ - (crlf &gt;&gt; &amp;(~blank | eoi)));\n\n    Headers headers;\n    bool ok = phrase_parse(first, last, (token &gt;&gt; ':' &gt;&gt; value) % crlf &gt;&gt; omit[*lit(crlf)], blank, headers);\n\n#ifdef DEBUG\n    if (ok)          std::cerr &lt;&lt; \"DEBUG: Parse success\\n\";\n    else             std::cerr &lt;&lt; \"DEBUG: Parse failed\\n\";\n    if (first!=last) std::cerr &lt;&lt; \"DEBUG: Remaining unparsed input: '\" &lt;&lt; std::string(first,last) &lt;&lt; \"'\\n\";\n#endif\n</code></pre>\n\n<p>You can see a live demo parsing the sample headers from your question:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/a291f16fb8b0c8bc\" rel=\"nofollow\">Live On Coliru</a></kbd></strong></p>\n\n<p>Printing:</p>\n\n<pre><code>Key: 'Allow', Value: 'INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY'\nKey: 'CSeq', Value: '102 INVITE'\nKey: 'Call-ID', Value: '326371826c80e17e6cf6c29861eb2933@10.10.1.99'\nKey: 'Contact', Value: '&lt;sip:15@10.10.1.99&gt;'\nKey: 'Content-Length', Value: '258'\nKey: 'Content-Type', Value: 'application/sdp'\nKey: 'Date', Value: 'Wed, 06 Dec 2009 14:12:45 GMT'\nKey: 'From', Value: '\"Test 15\" &lt;sip:15@10.10.1.99&gt;\n; tag   =    fromtag'\nKey: 'Max-Forwards', Value: '70'\nKey: 'Supported', Value: 'replaces'\nKey: 'To', Value: '&lt;sip:13@10.10.1.13&gt;;tag=totag'\nKey: 'User-Agent', Value: 'Asterisk PBX'\nKey: 'Via', Value: 'SIP/2.0/UDP 10.10.1.99:5060;branch=z9hG4bK343bf628;rport'\n</code></pre>\n\n<p>Note that the <code>\\r\\n</code> combo is kept as-is in the value for the <code>From</code> header. If you want to normalize that to some other LWS character, such as a simple <code>' '</code>, use e.g.</p>\n\n<pre><code>value = *(omit[ crlf &gt;&gt; !(~blank | eoi) ] &gt;&gt; attr(' ') | (char_ - crlf));\n</code></pre>\n"}], "owner": {"reputation": 448, "user_id": 1344183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e437bae098aa6b93cd1365cfb16561?s=128&d=identicon&r=PG", "display_name": "Dolk13", "link": "https://stackoverflow.com/users/1344183/dolk13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1800, "favorite_count": 0, "accepted_answer_id": 32236528, "answer_count": 3, "score": 2, "last_activity_date": 1440623281, "creation_date": 1440605678, "question_id": 32231680, "link": "https://stackoverflow.com/questions/32231680/how-to-parse-multi-line-headers-of-sip-message-using-regex", "title": "How to parse multi-line headers of SIP message using regex?", "body": "<p>I'm trying to extract <code>tag</code> from the <code>From:</code> header of a SIP messages.</p>\n\n<p>My regex: <code>^(From:|f:)((?!\\\\n\\\\w).)*;[ ]*tag[ ]*=[ ]*([[:alnum:]]*)</code></p>\n\n<p>RFC 3261 allows multi-line headers. This new line should start with a whitespace. But i have a problem with multi-line headers. If the <code>tag</code> is on a new line, my regex is not working.</p>\n\n<p>Example correct SIP Message:</p>\n\n<pre><code>INVITE sip:13@10.10.1.13 SIP/2.0\nVia: SIP/2.0/UDP 10.10.1.99:5060;branch=z9hG4bK343bf628;rport\nContact: &lt;sip:15@10.10.1.99&gt;\nCall-ID: 326371826c80e17e6cf6c29861eb2933@10.10.1.99\nCSeq: 102 INVITE\nUser-Agent: Asterisk PBX\nMax-Forwards: 70\nDate: Wed, 06 Dec 2009 14:12:45 GMT\nAllow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY\nSupported: replaces\nContent-Type: application/sdp\nContent-Length: 258\nFrom: \"Test 15\" &lt;sip:15@10.10.1.99&gt;\n ; tag   =    fromtag\nTo: &lt;sip:13@10.10.1.13&gt;;tag=totag\n\nv=0\no=root 1821 1821 IN IP4 10.10.1.99\ns=session\nc=IN IP4 10.10.1.99\nt=0 0\nm=audio 11424 RTP/AVP 0 8 101\na=rtpmap:0 PCMU/8000\na=rtpmap:8 PCMA/8000\na=rtpmap:101 telephone-event/8000\na=fmtp:101 0-16\na=silenceSupp:off - - - -\na=ptime:20\na=sendrecv\n</code></pre>\n\n<p>How can I properly parse the multi-line headers? Thanks in advance.</p>\n"}, {"tags": ["python", "c++", "winapi", "mfc"], "answers": [{"tags": [], "owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "is_accepted": true, "score": 3, "last_activity_date": 1440693417, "last_edit_date": 1440693417, "creation_date": 1440615626, "answer_id": 32234652, "question_id": 32231676, "link": "https://stackoverflow.com/questions/32231676/monitoring-file-update-using-c/32234652#32234652", "title": "monitoring file update using c++", "body": "<p>There is no specific MFC option for this (as far as I know). You can use <code>FindFirstChangeNotification</code> to monitor the entire folder for changes. If change is detected then your file is possibly changed (or maybe it was another file that was changed). Read the date/time stamp on your file to see if change occured. Another function is <code>ReadDirectoryChanges</code> which has more options. It doesn't tell you who changed the file.</p>\n\n<pre><code>HWND hMainWnd;\nFILETIME SaveFileTime;\n\nDWORD WINAPI checkfolder(void* arg)\n{\n    wchar_t folder[MAX_PATH];\n    lstrcpy(folder, (const wchar_t*)arg);\n\n    for (;;)\n    {\n        HANDLE hfolder = FindFirstChangeNotification(folder, FALSE,\n                FILE_NOTIFY_CHANGE_LAST_WRITE | FILE_NOTIFY_CHANGE_FILE_NAME);\n        WaitForSingleObject(hfolder, INFINITE);\n        if (!::IsWindow(hMainWnd)) break;\n        PostMessage(hMainWnd, WM_COMMAND, ID_MY_MESSAGE, 0);\n        FindCloseChangeNotification(hfolder);\n    }\n    return 0;\n}\n\nint main(...)\n{\n    //save last write time\n    WIN32_FIND_DATA data;\n    HANDLE h = FindFirstFile(L\"c:\\\\test\\\\file.txt\", &amp;data);\n    if (h != INVALID_HANDLE_VALUE) SaveFileTime = data.ftLastWriteTime;\n    FindClose(h);\n\n    //watch for changes\n    CreateThread(NULL, 0, checkfolder, L\"c:\\\\test\", 0, NULL);\n}\n\nvoid OnMyMessage()\n{\n    WIN32_FIND_DATA data;\n    HANDLE handle = FindFirstFile(L\"c:\\\\test\\\\file.txt\", &amp;data);\n    if (handle != INVALID_HANDLE_VALUE)\n    {\n        FindClose(handle);\n        if (CompareFileTime(&amp;data.ftLastWriteTime, &amp;SaveFileTime) != 0)\n            OutputDebugStringA(\"file.txt was modified\\n\");\n        else\n            OutputDebugStringA(\"Another file in the same directory was modified\\n\");\n    }\n    else\n    {\n        OutputDebugStringA(\"file.txt was deleted, or directory was removed/renamed\\n\");\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1149, "user_id": 310657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9d5c7656882ded0363bf5d9262ce1ee3?s=128&d=identicon&r=PG", "display_name": "Milan Solanki", "link": "https://stackoverflow.com/users/310657/milan-solanki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "accepted_answer_id": 32234652, "answer_count": 1, "score": -1, "last_activity_date": 1440693417, "creation_date": 1440605673, "last_edit_date": 1440609711, "question_id": 32231676, "link": "https://stackoverflow.com/questions/32231676/monitoring-file-update-using-c", "title": "monitoring file update using c++", "body": "<p>In c++ using windows api how do i monitor file change event</p>\n\n<p>like: \"this_program.py\" is updating a text file.</p>\n\n<pre><code>outfile.open(\"some_file_1.txt\",ios::out);\n</code></pre>\n\n<ul>\n<li>then edit \"some_file_1.txt\", <br></li>\n<li>\"some_file_1.txt\" triggers some window event,<br></li>\n<li>I want to monitor and log who is updating \"some_file_1.txt\", <br></li>\n<li>like I am updating from \"this_program.py\", etc....</li>\n</ul>\n\n<p>so I can monitor file changes on filesystem, using winapi or mfc in c++ or \npython.</p>\n\n<p>what event to monitor, like how to set the hook to get the source file.</p>\n\n<pre><code>outfile.close();\n</code></pre>\n"}, {"tags": ["c++", "c++11", "foreach"], "comments": [{"owner": {"reputation": 3975, "user_id": 1683939, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1da3dd4277594fb16a487ff70827e7d7?s=128&d=identicon&r=PG&f=1", "display_name": "bricklore", "link": "https://stackoverflow.com/users/1683939/bricklore"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1440605701, "post_id": 32231645, "comment_id": 52345785, "body": "Oh you&#39;re right. I mistyped that in my question, wait a moment please. <b>EDITED</b>"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1440605955, "post_id": 32231645, "comment_id": 52345955, "body": "The first loop is much nicer because you don&#39;t have to wonder about <code>e</code> possibly being a <code>nullptr</code>."}, {"owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 0, "creation_date": 1440605958, "post_id": 32231645, "comment_id": 52345956, "body": "It&#39;s possible, but a really terrible idea. All other developers looking at a loop will be utterly confused. If you want to iterate over a set of pointers, make it a regular loop."}, {"owner": {"reputation": 638, "user_id": 5162988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pBLUO.jpg?s=128&g=1", "display_name": "R2-Dequeue", "link": "https://stackoverflow.com/users/5162988/r2-dequeue"}, "edited": false, "score": 0, "creation_date": 1440606091, "post_id": 32231645, "comment_id": 52346032, "body": "Could you elaborate on why &quot;This would also have the great advantage of preventing one from typing for (Element e : container)&quot;? I genuinely can&#39;t see why that would be."}, {"owner": {"reputation": 3975, "user_id": 1683939, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1da3dd4277594fb16a487ff70827e7d7?s=128&d=identicon&r=PG&f=1", "display_name": "bricklore", "link": "https://stackoverflow.com/users/1683939/bricklore"}, "edited": false, "score": 0, "creation_date": 1440606154, "post_id": 32231645, "comment_id": 52346071, "body": "that way the Element would be copied instead of passed by pointer or reference, which is much slower and also you cannot change the original element."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 638, "user_id": 5162988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pBLUO.jpg?s=128&g=1", "display_name": "R2-Dequeue", "link": "https://stackoverflow.com/users/5162988/r2-dequeue"}, "edited": false, "score": 0, "creation_date": 1440606211, "post_id": 32231645, "comment_id": 52346106, "body": "@R2-Dequeue: <code>Element&amp;</code> to <code>Element</code> is an easy typo to make, and may create subtle bugs you don&#39;t spot. <code>Element*</code> to <code>Element</code> is an equally easy typo to make, but there&#39;s no implicit &quot;conversion&quot; so the compiler would immediately complain."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "reply_to_user": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 0, "creation_date": 1440606272, "post_id": 32231645, "comment_id": 52346148, "body": "@stefan: Or if this is something you want to do often, make a container adaptor."}, {"owner": {"reputation": 638, "user_id": 5162988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pBLUO.jpg?s=128&g=1", "display_name": "R2-Dequeue", "link": "https://stackoverflow.com/users/5162988/r2-dequeue"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440606383, "post_id": 32231645, "comment_id": 52346221, "body": "@LightnessRacesinOrbit Thanks! I wasn&#39;t as clear as I could&#39;ve been, but the conversion issue is what I hadn&#39;t thought of."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 3, "creation_date": 1440606418, "post_id": 32231645, "comment_id": 52346234, "body": "<i>&quot;which is much slower&quot;</i> - doubtful, especially the &quot;much&quot; part. If <code>Element</code> should not be copied in general for correctness reasons (rather than performance reasons), then you can always make it non-copyable."}, {"owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 1, "creation_date": 1440606850, "post_id": 32231645, "comment_id": 52346496, "body": "Even though I wouldn&#39;t ever recommend doing so (because it is an extremly weird thing to do, as stated above), here&#39;s how you <i>can</i> do it. Please don&#39;t. <a href=\"http://ideone.com/dSokmc\" rel=\"nofollow noreferrer\">ideone.com/dSokmc</a>"}, {"owner": {"reputation": 1498, "user_id": 190041, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4384dc61360bc5555c3931bec2fa64a6?s=128&d=identicon&r=PG", "display_name": "Abhinav", "link": "https://stackoverflow.com/users/190041/abhinav"}, "edited": false, "score": 0, "creation_date": 1440610083, "post_id": 32231645, "comment_id": 52348344, "body": "Is there any reason that you dont want to use vector&lt;Element*&gt; elements? It would give you a lot things already implemented and would avoid reinventing the wheel."}], "answers": [{"comments": [{"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1440606943, "post_id": 32231781, "comment_id": 52346565, "body": "Also, where do you draw the line? Users of the class could accidentally write their own function taking an <code>Element</code> argument instead of an <code>Element&amp;</code> one, creating silent bugs as well. Or what if they accidentally write a loop like <code>for (int i = 0; i &lt; container.size(); ++i) { Element e = container[i]; &#47;* ... *&#47; }</code> when they actually wanted an <code>Element&amp;</code>? C++ programmers are used to paying attention to the distinction between copies and references, so this whole problem looks like a non-issue to me."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1440607968, "post_id": 32231781, "comment_id": 52347130, "body": "@ChristianHackl: Agreed."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 2, "last_activity_date": 1440606295, "last_edit_date": 1440606295, "creation_date": 1440605954, "answer_id": 32231781, "question_id": 32231645, "link": "https://stackoverflow.com/questions/32231645/c-foreach-loop-with-pointers-instead-of-references/32231781#32231781", "title": "c++ foreach loop with pointers instead of references", "body": "<p>I can see why you'd want to do this, since an <code>Element*</code>&rarr;<code>Element</code> typo would be caught as an error right away, whereas an <code>Element&amp;</code>&rarr;<code>Element</code> typo is usually a silent bug. However, in the grand scheme of things, I don't think it's worth transforming your entire container.</p>\n\n<p>You could try to create a container adaptor that maintains the current behaviour of its iterators, except in the value type they expose&hellip; but I'm not even sure it's possible to do that without breaking various preconditions.</p>\n\n<p>Personally, I just wouldn't.</p>\n"}, {"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1440612671, "post_id": 32232066, "comment_id": 52349867, "body": "A slightly more generic version of your <code>iterator</code> ends up being surprisingly useful -- it lets you iterate over integers without having a backing container, for example.  (Replace <code>Element*</code> with <code>T</code>, get your typedefs right, and boom, feature-riffic)"}, {"owner": {"reputation": 3975, "user_id": 1683939, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1da3dd4277594fb16a487ff70827e7d7?s=128&d=identicon&r=PG&f=1", "display_name": "bricklore", "link": "https://stackoverflow.com/users/1683939/bricklore"}, "edited": false, "score": 0, "creation_date": 1440614370, "post_id": 32232066, "comment_id": 52350872, "body": "@Barry Thanks! Thats exactly the type of solution I wanted to see here ;)"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 5, "last_activity_date": 1440606975, "last_edit_date": 1495541867, "creation_date": 1440606975, "answer_id": 32232066, "question_id": 32231645, "link": "https://stackoverflow.com/questions/32231645/c-foreach-loop-with-pointers-instead-of-references/32232066#32232066", "title": "c++ foreach loop with pointers instead of references", "body": "<p>I agree with <a href=\"https://stackoverflow.com/a/32231781/2069064\">LRiO</a> that what you have right now is probably the best solution. It additionally lines up with how the standard containers operate, and taking the path of least surprise for your users is always the best path to take (barring <em>compelling</em> reasons to diverge).</p>\n\n<p>That said, you can certainly get the behavior you want:</p>\n\n<pre><code>class Container\n{\n    // ...\n\n    struct iterator {\n        Element* e;\n\n        // this is the important one\n        Element* operator*() { return e; }\n\n        // the rest are just boilerplate\n        iterator&amp; operator++() { ++e; return *this; }\n        iterator operator++(int) {\n            iterator tmp{e};\n            ++*this;\n            return tmp;\n        }\n\n        bool operator==(iterator rhs) const { return e == rhs.e; }\n        bool operator!=(iterator rhs) const { return e != rhs.e; }\n    };\n\n    iterator begin() { return {elements}; };\n    iterator end()   { return {elements + size}; };\n};\n</code></pre>\n\n<p>You could consider inheriting from <a href=\"http://en.cppreference.com/w/cpp/iterator/iterator\" rel=\"nofollow noreferrer\"><code>std::iterator</code></a> to get the typedefs right, or using <a href=\"http://www.boost.org/doc/libs/1_59_0/libs/iterator/doc/iterator_facade.html\" rel=\"nofollow noreferrer\"><code>boost::iterator_facade</code></a>. But this'll at least give you the functionality. </p>\n"}], "owner": {"reputation": 3975, "user_id": 1683939, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1da3dd4277594fb16a487ff70827e7d7?s=128&d=identicon&r=PG&f=1", "display_name": "bricklore", "link": "https://stackoverflow.com/users/1683939/bricklore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4757, "favorite_count": 0, "accepted_answer_id": 32232066, "answer_count": 2, "score": 5, "last_activity_date": 1440608469, "creation_date": 1440605557, "last_edit_date": 1440607057, "question_id": 32231645, "link": "https://stackoverflow.com/questions/32231645/c-foreach-loop-with-pointers-instead-of-references", "title": "c++ foreach loop with pointers instead of references", "body": "<p>I have this <code>Container</code> class with begin() and end() functions for use with c++11 foreach loops:</p>\n\n<pre><code>class Element\n{\n    //content doesn't matter\n};\n\nclass Container\n{\n    Element* elements;\n    int size;\n\n    /* constructor, destructor, operators, methods, etc.. */\n\n    Element* begin() { return elements; };\n    Element* end()   { return elements + size; };\n};\n</code></pre>\n\n<p>This is now a valid c++11 foreach loop:</p>\n\n<pre><code>Container container;\nfor (Element&amp; e : container)\n{\n    //do something\n}\n</code></pre>\n\n<p>But now consider this foreach loop:</p>\n\n<pre><code>Container container;\nfor (Element* e : container)\n{\n    //do something\n}\n</code></pre>\n\n<p>Is it possible to have a foreach loop with <code>Element*</code> instead of <code>Element&amp;</code> like this?<br>\nThis would also have the great advantage of preventing one from typing <code>for (Element e : container)</code> which would copy the element each time.</p>\n\n<p>In that case <code>begin()</code> and <code>end()</code> would have to return <code>Element**</code> as far as I know.  </p>\n\n<p>But <code>sizeof(Element)</code> is not guaranteed to be <code>sizeof(Element*)</code> and in most cases they don't match. Incrementing a pointer increments by the base type size which is <code>sizeof(Element)</code> for incrementing <code>Element*</code> and <code>sizeof(Element*)</code> for incrementing <code>Element**</code>.  </p>\n\n<p>So the prefix <code>operator++()</code> will offset the pointer by a false value and things get crappy. Any ideas how to get this to work?</p>\n"}, {"tags": ["c++", "inheritance", "abstract"], "comments": [{"owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 1, "creation_date": 1440604865, "post_id": 32231312, "comment_id": 52345275, "body": "look up <i>the diamond problem</i> and virtual inheritance"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 0, "creation_date": 1440605186, "post_id": 32231312, "comment_id": 52345479, "body": "@BeyelerStudios Irrelevant to the question? <code>C</code> doesn&#39;t inherit from <code>A</code>."}, {"owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1440606407, "post_id": 32231312, "comment_id": 52346227, "body": "@Barry relevant because that&#39;s what he&#39;s trying to do (only missing part is the common interface of <code>A</code> and <code>C</code>) - also every explanation of the diamond problem describes the difference between <code>A::secret</code> and <code>C::secret</code> in detail."}], "answers": [{"tags": [], "owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "is_accepted": false, "score": 1, "last_activity_date": 1440604949, "creation_date": 1440604949, "answer_id": 32231441, "question_id": 32231312, "link": "https://stackoverflow.com/questions/32231312/define-abstract-method-in-another-from-abstract-parent-parent/32231441#32231441", "title": "Define abstract method in another (from abstract parent) parent?", "body": "<p>The class <code>D</code> is apparently abstract as it does not provide an implementation of <code>secret</code> as defined in <code>C</code>. The type <code>D</code> reads ambiguous as it is not clear whether its member <code>secret</code> would be inherited from <code>C</code> or <code>A</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 4, "last_activity_date": 1440605155, "creation_date": 1440605155, "answer_id": 32231519, "question_id": 32231312, "link": "https://stackoverflow.com/questions/32231312/define-abstract-method-in-another-from-abstract-parent-parent/32231519#32231519", "title": "Define abstract method in another (from abstract parent) parent?", "body": "<p>Your hierarchy looks like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/GTCA6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GTCA6.png\" alt=\"enter image description here\"></a></p>\n\n<p><code>A</code> has a virtual member function named <code>secret</code>. And <code>C</code> has an <em>entirely unrelated</em> pure virtual member function named <code>secret</code>. Since <code>D</code> doesn't provide an override <code>C::secret</code>, <code>D</code> is also considered an abstract class. It does not matter that <code>A::secret</code> exists - <code>A</code> does not inherit from <code>C</code> and only base classes may provide virtual overrides. </p>\n\n<p>If you want to use <code>A::secret</code> to override <code>C::secret</code>, you would have to do so explicitly:</p>\n\n<pre><code>class D: public B, public C {\n    void secret() override {\n        A::secret();\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 653, "user_id": 4134398, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/nP0zN.png?s=128&g=1", "display_name": "Draif Kroneg", "link": "https://stackoverflow.com/users/4134398/draif-kroneg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 32231519, "answer_count": 2, "score": 2, "last_activity_date": 1440605155, "creation_date": 1440604566, "last_edit_date": 1440604749, "question_id": 32231312, "link": "https://stackoverflow.com/questions/32231312/define-abstract-method-in-another-from-abstract-parent-parent", "title": "Define abstract method in another (from abstract parent) parent?", "body": "<p>I hoped that in my code the C++ would notice that in class D the abstract method from class C is already defined in A. But that is not the case. The similar code would works in Java (where C acts like interface). Currently it fails with output:</p>\n\n<pre><code>error: cannot declare variable \u2018x\u2019 to be of abstract type \u2018D\u2019\nnote:   because the following virtual functions are pure within \u2018D\u2019:\nnote:   virtual void C::secret()\n</code></pre>\n\n<p>What would be the best way to make it work?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass A {\n  public:\n    virtual void secret() {\n      std::cout&lt;&lt;\"secret a func\\n\";\n    };\n};\n\nclass B: public A {};\n\nclass C {\n  public:\n    virtual void secret() = 0;\n};\n\nclass D: public B, public C {};\n\nint main() {\n  D x;\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "c++11", "sfinae"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1440603941, "post_id": 32231075, "comment_id": 52344625, "body": "It&#39;s not executed no. (You could have verified by putting a breakpoint in it and calling f)"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 1, "creation_date": 1440603956, "post_id": 32231075, "comment_id": 52344633, "body": "<code>decltype</code> is an <i>unevaluated-operand</i>. The expression(s) inside are not executed because only the types they yield are needed. If the expression(s) are not well-formed, then you have a substitution failure (in this case)."}, {"owner": {"reputation": 1302, "user_id": 5165306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b7c0ad499e2544d929f45c37b24cd9?s=128&d=identicon&r=PG&f=1", "display_name": "ex-bart", "link": "https://stackoverflow.com/users/5165306/ex-bart"}, "edited": false, "score": 0, "creation_date": 1440604016, "post_id": 32231075, "comment_id": 52344687, "body": "I don&#39;t quite believe that <code>void()</code> is legal."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 1302, "user_id": 5165306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b7c0ad499e2544d929f45c37b24cd9?s=128&d=identicon&r=PG&f=1", "display_name": "ex-bart", "link": "https://stackoverflow.com/users/5165306/ex-bart"}, "edited": false, "score": 3, "creation_date": 1440604194, "post_id": 32231075, "comment_id": 52344829, "body": "@ex-bart Believe it."}, {"owner": {"reputation": 3018, "user_id": 2345484, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1899ae171c0663708dde115790f44918?s=128&d=identicon&r=PG", "display_name": "Allanqunzi", "link": "https://stackoverflow.com/users/2345484/allanqunzi"}, "reply_to_user": {"reputation": 1302, "user_id": 5165306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b7c0ad499e2544d929f45c37b24cd9?s=128&d=identicon&r=PG&f=1", "display_name": "ex-bart", "link": "https://stackoverflow.com/users/5165306/ex-bart"}, "edited": false, "score": 1, "creation_date": 1440604338, "post_id": 32231075, "comment_id": 52344935, "body": "@ex-bart, I think <code>void</code> itself is not an expression, so you should put <code>void()</code> since it is part of the comma separated expression. Correct me if I am wrong."}, {"owner": {"reputation": 1302, "user_id": 5165306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b7c0ad499e2544d929f45c37b24cd9?s=128&d=identicon&r=PG&f=1", "display_name": "ex-bart", "link": "https://stackoverflow.com/users/5165306/ex-bart"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1440604888, "post_id": 32231075, "comment_id": 52345286, "body": "@Barry Woah, indeed it is."}, {"owner": {"reputation": 1302, "user_id": 5165306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b7c0ad499e2544d929f45c37b24cd9?s=128&d=identicon&r=PG&f=1", "display_name": "ex-bart", "link": "https://stackoverflow.com/users/5165306/ex-bart"}, "edited": false, "score": 0, "creation_date": 1440605616, "post_id": 32231075, "comment_id": 52345736, "body": "@Allanqunzi I didn&#39;t think that <code>void()</code> was legal, since that would create a value of type <code>void</code>, and I thought that can&#39;t be right since <code>void</code> is an incomplete type. I <i>did</i> know that there are expressions of type <code>void</code> (i.e. calls to functions returning <code>void</code>), and that those expressions can be used in certain places, such as the comma operator.  But <code>void()</code> is just another special case specifically for void which I didn&#39;t previously know about. (See C++11 &#167;3.9.1[basic.fundamental]/9 and &#167;5.2.3[expr.type.conv]/2)"}], "answers": [{"comments": [{"owner": {"reputation": 3018, "user_id": 2345484, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1899ae171c0663708dde115790f44918?s=128&d=identicon&r=PG", "display_name": "Allanqunzi", "link": "https://stackoverflow.com/users/2345484/allanqunzi"}, "edited": false, "score": 0, "creation_date": 1440604442, "post_id": 32231125, "comment_id": 52344991, "body": "I see, thank you. I just feel C++ always surprise me and wonder how would I know this stuff in advance."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 3018, "user_id": 2345484, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1899ae171c0663708dde115790f44918?s=128&d=identicon&r=PG", "display_name": "Allanqunzi", "link": "https://stackoverflow.com/users/2345484/allanqunzi"}, "edited": false, "score": 6, "creation_date": 1440604554, "post_id": 32231125, "comment_id": 52345065, "body": "@Allanqunzi Nobody knows stuff in advance. Everybody didn&#39;t know it at some point."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 15, "last_activity_date": 1440604010, "creation_date": 1440604010, "answer_id": 32231125, "question_id": 32231075, "link": "https://stackoverflow.com/questions/32231075/is-expression-inside-decltype-executed-or-just-being-checked-for-validation/32231125#32231125", "title": "Is expression inside decltype executed, or just being checked for validation?", "body": "<p>No, from [dcl.type.simple]:</p>\n\n<blockquote>\n  <p>The operand of the <code>decltype</code> specifier is an unevaluated operand (Clause 5).</p>\n</blockquote>\n\n<p>which means, from [expr]:</p>\n\n<blockquote>\n  <p>In some contexts, unevaluated operands appear (5.2.8, 5.3.3, 5.3.7, 7.1.6.2). An unevaluated operand is not\n  evaluated. An unevaluated operand is considered a <em>full-expression</em>.</p>\n</blockquote>\n\n<p>So in this particular context, the purpose of <code>decltype(t.reserve(n), void())</code> is to verify that <code>t.reserve(n)</code> is a valid expression. If it is, then the function is a viable overload whose return type is void, and <code>reserve()</code> will be called exactly once (in the function body). If it is not, then we have a substitution failure and the function is not a viable overload candidate. </p>\n"}], "owner": {"reputation": 3018, "user_id": 2345484, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1899ae171c0663708dde115790f44918?s=128&d=identicon&r=PG", "display_name": "Allanqunzi", "link": "https://stackoverflow.com/users/2345484/allanqunzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 634, "favorite_count": 1, "accepted_answer_id": 32231125, "answer_count": 1, "score": 7, "last_activity_date": 1440604225, "creation_date": 1440603844, "last_edit_date": 1495541177, "question_id": 32231075, "link": "https://stackoverflow.com/questions/32231075/is-expression-inside-decltype-executed-or-just-being-checked-for-validation", "title": "Is expression inside decltype executed, or just being checked for validation?", "body": "<p>By using <a href=\"https://stackoverflow.com/questions/12654067/what-is-expression-sfinae\">Expression SFINAE</a>, you can detect if some <a href=\"https://stackoverflow.com/questions/5839357/detect-operator-support-with-decltype-sfinae\">operator</a> or <a href=\"https://stackoverflow.com/questions/14003366/what-does-the-void-in-auto-fparams-decltype-void-do\">operation</a> is supported or not.</p>\n\n<p>for example, </p>\n\n<pre><code>template &lt;class T&gt;\nauto f(T&amp; t, size_t n) -&gt; decltype(t.reserve(n), void())\n { t.reserve(n); }\n</code></pre>\n\n<p>My question is that <code>t.reserve(n)</code> inside <code>decltype</code> get executed or not? </p>\n\n<p>If yes, does that mean <code>t.reserve(n)</code> got executed twice, one inside <code>decltype</code> and the other one inside the function body? </p>\n\n<p>If not, is it just checked for validation during compilation time? But why it is not executed, I thought all the expressions in the comma separated expression list will get executed.</p>\n"}, {"tags": ["c++", "forms"], "answers": [{"tags": [], "owner": {"reputation": 2820, "user_id": 2562283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ef4e835ba48416df3d5607ae1a89bbf?s=128&d=identicon&r=PG", "display_name": "E. Moffat", "link": "https://stackoverflow.com/users/2562283/e-moffat"}, "is_accepted": false, "score": 0, "last_activity_date": 1440605138, "creation_date": 1440605138, "answer_id": 32231508, "question_id": 32231026, "link": "https://stackoverflow.com/questions/32231026/messagebox-in-c-using-string/32231508#32231508", "title": "MessageBox in c++ using string", "body": "<p>It looks like you are passing in a <code>std::string</code> when you should be passing in a managed <code>String^</code>.</p>\n\n<p>Either convert om->get_name() to return a managed <code>String^</code> or use the Win32 <code>MessageBox</code> function directly (which takes <code>LPCTSTR</code> parameters).</p>\n\n<p>Reference for System::Windows::Forms::MessageBox::Show is at <a href=\"https://msdn.microsoft.com/en-us/library/519bytz3(v=vs.110).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/519bytz3(v=vs.110).aspx</a></p>\n\n<p>Reference for Win32 API MessageBox function is at <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms645505(v=vs.85).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms645505(v=vs.85).aspx</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4550395"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 412, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440605176, "creation_date": 1440603736, "last_edit_date": 1440605176, "question_id": 32231026, "link": "https://stackoverflow.com/questions/32231026/messagebox-in-c-using-string", "title": "MessageBox in c++ using string", "body": "<p>I am getting an error on the following code and I can't figure it out.</p>\n\n<pre><code>string name1 = om-&gt;get_name();\nif (om-&gt;search(name, code))\n{\n    MessageBox::Show(\"name\"+name1);\n}\nelse\n    MessageBox::Show(\"such a car doesn't exist\");\n</code></pre>\n\n<p>Gives me the following error</p>\n\n<blockquote>\n  <p>error C2665: 'System::Windows::Forms::MessageBox::Show' : none of the 21 overloads could convert all the argument types</p>\n</blockquote>\n"}, {"tags": ["c++", "boost", "signals", "shared-memory", "interprocess"], "comments": [{"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1440617049, "post_id": 32230964, "comment_id": 52352425, "body": "Why don&#39;t you use a pipe / FIFO that consumers read from and producers write to? You wouldn&#39;t have to deal with synchronization and it would greatly simplify the design."}, {"owner": {"reputation": 423, "user_id": 1300059, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/53459414dbbb5c37c9faaa3c4afee794?s=128&d=identicon&r=PG&f=1", "display_name": "hami", "link": "https://stackoverflow.com/users/1300059/hami"}, "reply_to_user": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1440619425, "post_id": 32230964, "comment_id": 52353715, "body": "I use some kind of FIFO. But I want to be notified, when new data is available in the FIFO."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1440623447, "post_id": 32230964, "comment_id": 52355773, "body": "Non blocking and a condition notify are contradictions."}], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 0, "last_activity_date": 1440623714, "creation_date": 1440623714, "answer_id": 32236823, "question_id": 32230964, "link": "https://stackoverflow.com/questions/32230964/non-blocking-shared-memory-producer-using-boost-interprocess-condition-to-notify/32236823#32236823", "title": "Non blocking shared memory producer using boost interprocess condition to notify", "body": "<p>It's okay to signal without holding the mutex, but it could lead to worst-case behaviour in rare cases (thread starvation).</p>\n\n<p>Signaling under the mutex guarantees fair scheduling of the waiters under POSIX as far as I am aware \u00b9</p>\n\n<p>That said, I think the commenters are right when they smell overcomplication in the design. I'd simplify. Optimize when you need it. </p>\n\n<p>\u00b9 See e.g. here: <a href=\"http://linux.die.net/man/3/pthread_cond_signal\" rel=\"nofollow\">http://linux.die.net/man/3/pthread_cond_signal</a></p>\n\n<blockquote>\n  <p><em>The <code>pthread_cond_broadcast()</code> or <code>pthread_cond_signal()</code> functions may be called by a thread whether or not it currently owns the mutex that threads calling <code>pthread_cond_wait()</code> or <code>pthread_cond_timedwait()</code> have associated with the condition variable during their waits; however, if predictable scheduling behavior is required, then that mutex shall be locked by the thread calling <code>pthread_cond_broadcast()</code> or <code>pthread_cond_signal()</code>.</em></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 7948, "user_id": 4899330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/857a19fa016a8fc6c0a3250f03f108a9?s=128&d=identicon&r=PG&f=1", "display_name": "doqtor", "link": "https://stackoverflow.com/users/4899330/doqtor"}, "is_accepted": false, "score": 0, "last_activity_date": 1440631562, "last_edit_date": 1440631562, "creation_date": 1440627398, "answer_id": 32237615, "question_id": 32230964, "link": "https://stackoverflow.com/questions/32230964/non-blocking-shared-memory-producer-using-boost-interprocess-condition-to-notify/32237615#32237615", "title": "Non blocking shared memory producer using boost interprocess condition to notify", "body": "<blockquote>\n  <p>The producer should work completely independent from the consumers. It\n  should not be blocked in any case.</p>\n</blockquote>\n\n<p>Why not? This should not affect the performance if you do not lock too frequently. You can have a data counter in shared memory and you would lock access to that counter only. Data can be stored in circular buffer in shared memory and access to it does not need to be locked because consumers check how much data is available to read using counter. Of course consumers need to read data fast enough. If the data is overwritten then the internal consumer counter can be reset to the value of interprocess counter.</p>\n\n<p>Also producer can store data using many threads. Each thread can calculate future position of the data at the beginning of the thread and then update the counter after the data is stored at the end of the thread. Then additional locking is needed for future position calculations so that this value can be passed between threads. </p>\n\n<p>In details, the non-multithreaded scenario could work like this:</p>\n\n<pre><code>Producer loop:\n  receive X samples of data\n  lock access to interprocess counter, increment the counter, unlock the access\n</code></pre>\n\n<p>Then each consumer has it's own internal counter so that it can compare with interprocess counter if and how much data is available to read (simply polling for data):</p>\n\n<pre><code>Consumer loop:\n  lock access to interprocess counter, read the counter value, unlock the access\n  compare the read value with internal counter\n  if values equal // no data available\n    sleep, then continue to the beginning of the loop\n  else if data overwritten // no need for hashing here, counter can be use to figure that out although doing it this way is probably a bit risky\n    set internal counter to the value of the interprocess counter\n    then continue to the beginning of the loop\n  else\n    read available data\n    increment internal counter\n</code></pre>\n"}], "owner": {"reputation": 423, "user_id": 1300059, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/53459414dbbb5c37c9faaa3c4afee794?s=128&d=identicon&r=PG&f=1", "display_name": "hami", "link": "https://stackoverflow.com/users/1300059/hami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 669, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1440631562, "creation_date": 1440603537, "question_id": 32230964, "link": "https://stackoverflow.com/questions/32230964/non-blocking-shared-memory-producer-using-boost-interprocess-condition-to-notify", "title": "Non blocking shared memory producer using boost interprocess condition to notify", "body": "<p>I am trying to develop an application with one producer and several consumers.\nThe producers is one process and each consumer is one process. The shared resource is some kind of buffer in the shared memory.</p>\n\n<p>The producer should work completely independent from the consumers. It should not be blocked in any case. Therefor the consumers are responsible to check if the data they read from the shared memory is valid and handle it if the producer has already overwritten the data. (They do this using some kind of hashing. Not important.)</p>\n\n<p>The consumers should be informed when new data is available in the buffer. I think boost interprocess conditions are suitable for this usecase. (More suitable would be boost signals2, but this library is not working in an interprocess way).</p>\n\n<p>Conditionas always need a mutex. But I do not need the mutex in my producer. In the consumers I only need the mutex for condition#wait.</p>\n\n<p>Is it ok to only use the codnition#notify_all in the producer and do not use the mutex? Or is this an abuse of the library?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c++", "boost"], "answers": [{"comments": [{"owner": {"reputation": 2602, "user_id": 532057, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/a70b83774c5a0f08728005485f3625ac?s=128&d=identicon&r=PG", "display_name": "Alex Shtof", "link": "https://stackoverflow.com/users/532057/alex-shtof"}, "edited": false, "score": 0, "creation_date": 1440667972, "post_id": 32237565, "comment_id": 52371980, "body": "I expected something like MATLAB&#39;s <code>ind2sub</code> and <code>sub2ind</code> functions, which are hidden somewhere. But it seems my expectations were too high :)"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 0, "last_activity_date": 1440627191, "creation_date": 1440627191, "answer_id": 32237565, "question_id": 32230862, "link": "https://stackoverflow.com/questions/32230862/boostmulti-array-index-to-memory-offset-conversion/32237565#32237565", "title": "boost::multi_array index to memory offset conversion", "body": "<p>Of course you can use some library facility.</p>\n\n<p>For the offset, you can easily use pointer arithmetics\u00b9:</p>\n\n<pre><code>size_t offset = &amp;ma[1][2][3] - ma.data();\nstd::cout &lt;&lt; \"Offset of ma[1][2][3]: \" &lt;&lt; offset &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>The documentation divulges a more elaborate way to get the element address: <a href=\"http://www.boost.org/doc/libs/1_59_0/libs/multi_array/doc/reference.html#idp18501744\" rel=\"nofollow\">link</a></p>\n\n<blockquote>\n<pre><code>This expression accesses a specific element of a.index_list is the unique set of indices that address the element returned. It is equivalent to the following code (disregarding intermediate temporaries): \n    // multiply indices by strides\n    std::transform(index_list.begin(), index_list.end(),\n    a.strides(), tmp.begin(), std::multiplies&lt;index&gt;()),\n\n    // add the sum of the products to the origin\n    *std::accumulate(tmp.begin(), tmp.end(), a.origin());\n</code></pre>\n</blockquote>\n\n<p>The inverse less simple. I couldn't find a direct way. </p>\n\n<p>\u00b9 note: use <code>std::addressof</code> to guard against elements overload <code>operator&amp;</code> in generic code</p>\n"}], "owner": {"reputation": 2602, "user_id": 532057, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/a70b83774c5a0f08728005485f3625ac?s=128&d=identicon&r=PG", "display_name": "Alex Shtof", "link": "https://stackoverflow.com/users/532057/alex-shtof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1440627191, "creation_date": 1440603208, "question_id": 32230862, "link": "https://stackoverflow.com/questions/32230862/boostmulti-array-index-to-memory-offset-conversion", "title": "boost::multi_array index to memory offset conversion", "body": "<p>I have three-dimensional <code>boost::multi_array</code> object. I would like to convert an absolute offset from the <code>origin</code> to a multi-dimensional index and vice versa. Is there an easy way to do so using boost's built-in facilities, or I need to compute it myself given the array's shape and strides?</p>\n"}, {"tags": ["java", "c#", "c++", "java-native-interface"], "comments": [{"owner": {"reputation": 9289, "user_id": 17175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9a89d4cf026c5eb3af2b3fdea1925723?s=128&d=identicon&r=PG", "display_name": "technomage", "link": "https://stackoverflow.com/users/17175/technomage"}, "edited": false, "score": 0, "creation_date": 1440607740, "post_id": 32230748, "comment_id": 52346993, "body": "Your package doesn&#39;t match, &quot;jnitest&quot; (in the error) versus &quot;jni&quot; (in your code snippet)."}, {"owner": {"reputation": 39, "user_id": 2150062, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IGDai.jpg?s=128&g=1", "display_name": "underscore", "link": "https://stackoverflow.com/users/2150062/underscore"}, "reply_to_user": {"reputation": 9289, "user_id": 17175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9a89d4cf026c5eb3af2b3fdea1925723?s=128&d=identicon&r=PG", "display_name": "technomage", "link": "https://stackoverflow.com/users/17175/technomage"}, "edited": false, "score": 0, "creation_date": 1440708245, "post_id": 32230748, "comment_id": 52398085, "body": "My bad, I was launching different project. when I tried correct project, it shows other error. i updated the post. thanks."}, {"owner": {"reputation": 9289, "user_id": 17175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9a89d4cf026c5eb3af2b3fdea1925723?s=128&d=identicon&r=PG", "display_name": "technomage", "link": "https://stackoverflow.com/users/17175/technomage"}, "edited": false, "score": 0, "creation_date": 1440767903, "post_id": 32230748, "comment_id": 52422774, "body": "Start stripping out inner details (<code>CSharpHelloWorld</code>, <code>HelloWorldC</code>) until you get something that doesn&#39;t crash.  That will identify which piece is causing the crash."}], "owner": {"reputation": 39, "user_id": 2150062, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IGDai.jpg?s=128&g=1", "display_name": "underscore", "link": "https://stackoverflow.com/users/2150062/underscore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 508, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1440767755, "creation_date": 1440602942, "last_edit_date": 1440767755, "question_id": 32230748, "link": "https://stackoverflow.com/questions/32230748/calling-c-dll-wrapped-in-c-in-java-a-fatal-error-has-been-detected-by-the", "title": "Calling C# dll (wrapped in C++) in Java / A fatal error has been detected by the Java Runtime Environment", "body": "<p>I was following this link <a href=\"http://www.codeproject.com/Articles/378826/How-to-wrap-a-Csharp-library-for-use-in-Java\" rel=\"nofollow\">how to wrap a c# library for use in java</a>\nI think I didn't miss anything but I'm getting a crash.</p>\n\n<p>Here's codes, </p>\n\n<p>Java (project - package - class / jnitest - jni - Test1 )</p>\n\n<pre><code>  package jni;\n\n  public class Test1 { \n    static {\n      System.loadLibrary(\"Test\");\n      // System.load(\"/lib/Test.dll\");\n    }\n    public native void displayHelloWorld();\n    public static void main (String[] args) {\n      // System.out.println(System.getProperty(\"java.library.path\"));\n      Test1 t = new Test1();\n      t.displayHelloWorld();\n    }\n  }\n</code></pre>\n\n<p>JNI Header file generated from java (using eclipse)</p>\n\n<pre><code>/* DO NOT EDIT THIS FILE - it is machine generated */\n#include &lt;jni.h&gt;\n/* Header for class jni_Test1 */\n\n#ifndef _Included_jni_Test1\n#define _Included_jni_Test1\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n/*\n * Class:     jni_Test1\n * Method:    displayHelloWorld\n * Signature: ()V\n */\nJNIEXPORT void JNICALL Java_jni_Test1_displayHelloWorld\n  (JNIEnv *, jobject);\n\n#ifdef __cplusplus\n}\n#endif\n#endif\n</code></pre>\n\n<p>HelloWorld.h </p>\n\n<pre><code>#using &lt;mscorlib.dll&gt;\n#using \"CSharpHelloWorld.netmodule\"\n\nusing namespace System;\n\npublic ref class HelloWorldC\n{\npublic:\n    // Provide .NET interop and garbage collecting to the pointer.\n    CSharpHelloWorld^ t;\n    HelloWorldC() {\n        t = gcnew CSharpHelloWorld();\n        // Assign the reference a new instance of the object\n    }\n\n    // This inline function is called from the C++ Code\n    void callCSharpHelloWorld() {\n        t-&gt;displayHelloWorld();\n    }\n};\n</code></pre>\n\n<p>HelloWorld.cpp</p>\n\n<pre><code>#include &lt;jni.h&gt;\n#include \"jni_Test1.h\"\n#include \"HelloWorld.h\"\n\n\n// This is the JNI call to the Managed C++ Class\n// NOTE: When the java header was created, the package name was not include in the JNI call.\n// This naming convention was corrected by adding the \n// \"helloworld\" name following the following syntax: \n// Java_&lt;package name&gt;_&lt;class name&gt;_&lt;method name&gt;\nJNIEXPORT void JNICALL Java_jni_Test1_displayHelloWorld(JNIEnv *jn, jobject jobj) {\n\n    // Instantiate the MC++ class.\n    HelloWorldC^ t = gcnew HelloWorldC();\n\n    // The actual call is made. \n    t-&gt;callCSharpHelloWorld();\n}\n</code></pre>\n\n<p>I'm using Visual Studio 2013 and when I tried to use * like reference link did, it gives me an error so I had to change in that way it doesn't thrown an error. (such as * -> ^, __gc -> gcnew and so on) </p>\n\n<p>I succeeded to create dll file and put it in classpath and when I launched java file, it gives me error/log below</p>\n\n<p>[error]</p>\n\n<pre><code>#\n# A fatal error has been detected by the Java Runtime Environment:\n#\n#  Internal Error (0xe0434352), pid=8020, tid=14744\n#\n# JRE version: Java(TM) SE Runtime Environment (8.0_31-b13) (build 1.8.0_31-b13)\n# Java VM: Java HotSpot(TM) Client VM (25.31-b07 mixed mode windows-x86 )\n# Problematic frame:\n# C  [KERNELBASE.dll+0xc42d]\n#\n# Failed to write core dump. Minidumps are not enabled by default on client versions of Windows\n#\n# An error report file with more information is saved as:\n# C:\\workspace\\jnitest\\hs_err_pid8020.log\n#\n# If you would like to submit a bug report, please visit:\n#   http://bugreport.java.com/bugreport/crash.jsp\n# The crash happened outside the Java Virtual Machine in native code.\n# See problematic frame for where to report the bug.\n#\n</code></pre>\n\n<p>[log]</p>\n\n<pre><code>#\n# A fatal error has been detected by the Java Runtime Environment:\n#\n#  Internal Error (0xe0434352), pid=8020, tid=14744\n#\n# JRE version: Java(TM) SE Runtime Environment (8.0_31-b13) (build 1.8.0_31-b13)\n# Java VM: Java HotSpot(TM) Client VM (25.31-b07 mixed mode windows-x86 )\n# Problematic frame:\n# C  [KERNELBASE.dll+0xc42d]\n#\n# Failed to write core dump. Minidumps are not enabled by default on client versions of Windows\n#\n# If you would like to submit a bug report, please visit:\n#   http://bugreport.java.com/bugreport/crash.jsp\n# The crash happened outside the Java Virtual Machine in native code.\n# See problematic frame for where to report the bug.\n#\n\n---------------  T H R E A D  ---------------\n\nCurrent thread (0x00ddc800):  JavaThread \"main\" [_thread_in_native, id=14744, stack(0x00f10000,0x00f60000)]\n\nsiginfo: ExceptionCode=0xe0434352, ExceptionInformation=0x80070002 0x00000000 0x00000000 0x00000000 0x6e980000 \n\nRegisters:\nEAX=0x00f5e3b0, EBX=0x00000005, ECX=0x00000005, EDX=0x00000000\nESP=0x00f5e3b0, EBP=0x00f5e400, ESI=0x00f5e46c, EDI=0x00000001\nEIP=0x76a4c42d, EFLAGS=0x00000212\n\nTop of Stack: (sp=0x00f5e3b0)\n0x00f5e3b0:   e0434352 00000001 00000000 76a4c42d\n0x00f5e3c0:   00000005 80070002 00000000 00000000\n0x00f5e3d0:   00000000 6e980000 00f5f578 00000001\n0x00f5e3e0:   00000000 006511c4 00004000 00446118\n0x00f5e3f0:   00f5e404 758014ad 00412d28 00f5e3b8\n0x00f5e400:   00f5e4a0 6ead8fdb e0434352 00000001\n0x00f5e410:   00000005 00f5e46c 83662cfd 0043bd10\n0x00f5e420:   15a62380 00f5e558 00412d28 00000001 \n\nInstructions: (pc=0x76a4c42d)\n0x76a4c40d:   02 50 ff 75 14 8d 45 c4 50 e8 57 ad 02 00 83 c4\n0x76a4c41d:   0c eb 03 89 45 c0 8d 45 b0 50 ff 15 5c 11 a4 76\n0x76a4c42d:   c9 c2 10 00 cc cc cc cc cc 8b ff 55 8b ec 56 8b\n0x76a4c43d:   75 08 83 fe f4 72 18 83 fe f6 77 13 8d 45 08 50 \n\n\nRegister to memory mapping:\n\nEAX=0x00f5e3b0 is pointing into the stack for thread: 0x00ddc800\nEBX=0x00000005 is an unknown value\nECX=0x00000005 is an unknown value\nEDX=0x00000000 is an unknown value\nESP=0x00f5e3b0 is pointing into the stack for thread: 0x00ddc800\nEBP=0x00f5e400 is pointing into the stack for thread: 0x00ddc800\nESI=0x00f5e46c is pointing into the stack for thread: 0x00ddc800\nEDI=0x00000001 is an unknown value\n\n\nStack: [0x00f10000,0x00f60000],  sp=0x00f5e3b0,  free space=312k\nNative frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)\nC  [KERNELBASE.dll+0xc42d]\nC  [clr.dll+0x158fdb]\nC  [clr.dll+0x2cd607]\nC  [clr.dll+0x2d57bc]\nC  [clrjit.dll+0x38a6]\nC  [clrjit.dll+0x2b72c]\nC  [clrjit.dll+0x3066]\nC  [clrjit.dll+0x325b]\nC  [clrjit.dll+0x12fb]\nC  [clrjit.dll+0x152b]\nC  [clrjit.dll+0x1668]\nC  [clrjit.dll+0x17b5]\nC  [clrjit.dll+0x1802]\nC  [clr.dll+0x388f9]\nC  [clr.dll+0x38991]\nC  [clr.dll+0x389d3]\nC  [clr.dll+0x38405]\nC  [clr.dll+0x3878c]\nC  [clr.dll+0x1497b5]\nC  [clr.dll+0x1b02b]\nC  [clr.dll+0x2a0c]\nC  0x00f0177f\nC  0x0067b3f5\nj  jni.Test1.displayHelloWorld()V+0\nj  jni.Test1.main([Ljava/lang/String;)V+9\nv  ~StubRoutines::call_stub\nV  [jvm.dll+0x1473e5]\nV  [jvm.dll+0x20d57e]\nV  [jvm.dll+0x14747e]\nV  [jvm.dll+0xd0c27]\nV  [jvm.dll+0xd91cf]\nC  [javaw.exe+0x210a]\nC  [javaw.exe+0xaba1]\nC  [javaw.exe+0xac2b]\nC  [kernel32.dll+0x1336a]\nC  [ntdll.dll+0x39882]\nC  [ntdll.dll+0x39855]\nC  0x00000000\n\nJava frames: (J=compiled Java code, j=interpreted, Vv=VM code)\nj  jni.Test1.displayHelloWorld()V+0\nj  jni.Test1.main([Ljava/lang/String;)V+9\nv  ~StubRoutines::call_stub\n\n---------------  P R O C E S S  ---------------\n\nJava Threads: ( =&gt; current thread )\n  0x14ee0000 JavaThread \"Service Thread\" daemon [_thread_blocked, id=13880, stack(0x15350000,0x153a0000)]\n  0x14eb6c00 JavaThread \"C1 CompilerThread0\" daemon [_thread_blocked, id=2028, stack(0x152d0000,0x15320000)]\n  0x14eb5800 JavaThread \"Attach Listener\" daemon [_thread_blocked, id=9236, stack(0x15230000,0x15280000)]\n  0x14eb2800 JavaThread \"Signal Dispatcher\" daemon [_thread_blocked, id=14804, stack(0x150b0000,0x15100000)]\n  0x14e80c00 JavaThread \"Finalizer\" daemon [_thread_blocked, id=14892, stack(0x04910000,0x04960000)]\n  0x14e7b400 JavaThread \"Reference Handler\" daemon [_thread_blocked, id=13668, stack(0x002f0000,0x00340000)]\n=&gt;0x00ddc800 JavaThread \"main\" [_thread_in_native, id=14744, stack(0x00f10000,0x00f60000)]\n\nOther Threads:\n  0x14e78000 VMThread [stack: 0x01090000,0x010e0000] [id=13428]\n  0x14ee1400 WatcherThread [stack: 0x00920000,0x00970000] [id=13024]\n\nVM state:not at safepoint (normal execution)\n\nVM Mutex/Monitor currently owned by a thread: None\n\nHeap:\n def new generation   total 4928K, used 795K [0x04a00000, 0x04f50000, 0x09f50000)\n  eden space 4416K,  18% used [0x04a00000, 0x04ac6ea8, 0x04e50000)\n  from space 512K,   0% used [0x04e50000, 0x04e50000, 0x04ed0000)\n  to   space 512K,   0% used [0x04ed0000, 0x04ed0000, 0x04f50000)\n tenured generation   total 10944K, used 0K [0x09f50000, 0x0aa00000, 0x14a00000)\n   the space 10944K,   0% used [0x09f50000, 0x09f50000, 0x09f50200, 0x0aa00000)\n Metaspace       used 1695K, capacity 2242K, committed 2368K, reserved 4480K\n\nCard table byte_map: [0x00f60000,0x00ff0000] byte_map_base: 0x00f3b000\n\nPolling page: 0x000e0000\n\nCodeCache: size=32768Kb used=677Kb max_used=677Kb free=32090Kb\n bounds [0x02830000, 0x028e0000, 0x04830000]\n total_blobs=156 nmethods=19 adapters=70\n compilation: enabled\n\nCompilation events (10 events):\nEvent: 0.135 Thread 0x14eb6c00   15             java.lang.CharacterDataLatin1::getProperties (11 bytes)\nEvent: 0.135 Thread 0x14eb6c00 nmethod 15 0x028d7808 code [0x028d7900, 0x028d79a0]\nEvent: 0.135 Thread 0x14eb6c00   16             java.lang.String::toLowerCase (439 bytes)\nEvent: 0.136 Thread 0x14eb6c00 nmethod 16 0x028d7a48 code [0x028d7c50, 0x028d8440]\nEvent: 0.136 Thread 0x14eb6c00   17             java.lang.AbstractStringBuilder::append (29 bytes)\nEvent: 0.137 Thread 0x14eb6c00 nmethod 17 0x028d8e88 code [0x028d8f90, 0x028d907c]\nEvent: 0.137 Thread 0x14eb6c00   18             java.lang.Character::toLowerCase (9 bytes)\nEvent: 0.137 Thread 0x14eb6c00 nmethod 18 0x028d9188 code [0x028d9290, 0x028d9338]\nEvent: 0.137 Thread 0x14eb6c00   19             java.lang.CharacterDataLatin1::toLowerCase (39 bytes)\nEvent: 0.137 Thread 0x14eb6c00 nmethod 19 0x028d93c8 code [0x028d94c0, 0x028d95a0]\n\nGC Heap History (0 events):\nNo events\n\nDeoptimization events (0 events):\nNo events\n\nInternal exceptions (3 events):\nEvent: 0.091 Thread 0x00ddc800 Exception &lt;a 'java/lang/NoSuchMethodError': Method sun.misc.Unsafe.defineClass(Ljava/lang/String;[BII)Ljava/lang/Class; name or signature does not match&gt; (0x04a0b310) thrown at [C:\\re\\workspace\\8-2-build-windows-i586-cygwin\\jdk8u31\\2394\\hotspot\\src\\share\\vVG\u00bd\u00b1\u00a14\u00b7?\nEvent: 0.091 Thread 0x00ddc800 Exception &lt;a 'java/lang/NoSuchMethodError': Method sun.misc.Unsafe.prefetchRead(Ljava/lang/Object;J)V name or signature does not match&gt; (0x04a0b590) thrown at [C:\\re\\workspace\\8-2-build-windows-i586-cygwin\\jdk8u31\\2394\\hotspot\\src\\share\\vm\\prims\\jni.cpp, l&gt;x\\b@v\u00c1?\nEvent: 0.136 Thread 0x00ddc800 Exception &lt;a 'java/security/PrivilegedActionException'&gt; (0x04abd8e8) thrown at [C:\\re\\workspace\\8-2-build-windows-i586-cygwin\\jdk8u31\\2394\\hotspot\\src\\share\\vm\\prims\\jvm.cpp, line 1312]\n\nEvents (10 events):\nEvent: 0.139 loading class java/security/AllPermission\nEvent: 0.139 loading class java/security/AllPermission done\nEvent: 0.139 loading class java/security/UnresolvedPermission\nEvent: 0.139 loading class java/security/UnresolvedPermission done\nEvent: 0.139 loading class java/security/BasicPermissionCollection\nEvent: 0.139 loading class java/security/BasicPermissionCollection done\nEvent: 0.140 loading class sun/launcher/LauncherHelper$FXHelper\nEvent: 0.140 loading class sun/launcher/LauncherHelper$FXHelper done\nEvent: 0.140 loading class java/lang/Class$MethodArray\nEvent: 0.140 loading class java/lang/Class$MethodArray done\n\n\nDynamic libraries:\n0x01130000 - 0x01160000     C:\\Program Files (x86)\\Java\\jre1.8.0_31\\bin\\javaw.exe\n0x776a0000 - 0x77820000     C:\\Windows\\SysWOW64\\ntdll.dll\n0x757f0000 - 0x75900000     C:\\Windows\\syswow64\\kernel32.dll\n0x76a40000 - 0x76a87000     C:\\Windows\\syswow64\\KERNELBASE.dll\n0x771f0000 - 0x77291000     C:\\Windows\\syswow64\\ADVAPI32.dll\n0x76790000 - 0x7683c000     C:\\Windows\\syswow64\\msvcrt.dll\n0x76750000 - 0x76769000     C:\\Windows\\SysWOW64\\sechost.dll\n0x75990000 - 0x75a80000     C:\\Windows\\syswow64\\RPCRT4.dll\n0x75010000 - 0x75070000     C:\\Windows\\syswow64\\SspiCli.dll\n0x75000000 - 0x7500c000     C:\\Windows\\syswow64\\CRYPTBASE.dll\n0x756f0000 - 0x757f0000     C:\\Windows\\syswow64\\USER32.dll\n0x769b0000 - 0x76a40000     C:\\Windows\\syswow64\\GDI32.dll\n0x76780000 - 0x7678a000     C:\\Windows\\syswow64\\LPK.dll\n0x75540000 - 0x755dd000     C:\\Windows\\syswow64\\USP10.dll\n0x71420000 - 0x715be000     C:\\Windows\\WinSxS\\x86_microsoft.windows.common-controls_6595b64144ccf1df_6.0.7601.18837_none_41e855142bd5705d\\COMCTL32.dll\n0x76d70000 - 0x76dc7000     C:\\Windows\\syswow64\\SHLWAPI.dll\n0x75690000 - 0x756f0000     C:\\Windows\\system32\\IMM32.DLL\n0x77120000 - 0x771ec000     C:\\Windows\\syswow64\\MSCTF.dll\n0x779e0000 - 0x77a9f000     C:\\Program Files (x86)\\Java\\jre1.8.0_31\\bin\\msvcr100.dll\n0x530a0000 - 0x53444000     C:\\Program Files (x86)\\Java\\jre1.8.0_31\\bin\\client\\jvm.dll\n0x74f40000 - 0x74f47000     C:\\Windows\\system32\\WSOCK32.dll\n0x75250000 - 0x75285000     C:\\Windows\\syswow64\\WS2_32.dll\n0x75670000 - 0x75676000     C:\\Windows\\syswow64\\NSI.dll\n0x6ccf0000 - 0x6cd22000     C:\\Windows\\system32\\WINMM.dll\n0x75500000 - 0x75505000     C:\\Windows\\syswow64\\PSAPI.DLL\n0x74020000 - 0x7402c000     C:\\Program Files (x86)\\Java\\jre1.8.0_31\\bin\\verify.dll\n0x73ff0000 - 0x74011000     C:\\Program Files (x86)\\Java\\jre1.8.0_31\\bin\\java.dll\n0x73fd0000 - 0x73fe3000     C:\\Program Files (x86)\\Java\\jre1.8.0_31\\bin\\zip.dll\n0x75ad0000 - 0x7671b000     C:\\Windows\\syswow64\\SHELL32.dll\n0x76fc0000 - 0x7711c000     C:\\Windows\\syswow64\\ole32.dll\n0x77670000 - 0x7767b000     C:\\Windows\\syswow64\\profapi.dll\n0x77840000 - 0x77850000     C:\\Program Files (x86)\\Java\\jre1.8.0_31\\bin\\Test.dll\n0x6fb00000 - 0x6fb4a000     C:\\Windows\\SYSTEM32\\MSCOREE.DLL\n0x15590000 - 0x1574f000     C:\\Windows\\system32\\MSVCR120D.dll\n0x6f9f0000 - 0x6fa6e000     C:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\mscoreei.dll\n0x6e980000 - 0x6f01d000     C:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\clr.dll\n0x6f750000 - 0x6f827000     C:\\Windows\\system32\\MSVCR120_CLR0400.dll\n0x6d910000 - 0x6e97b000     C:\\Windows\\assembly\\NativeImages_v4.0.30319_32\\mscorlib\\d1265d6159ea876f9d63ea4c1361b587\\mscorlib.ni.dll\n0x6f6d0000 - 0x6f74d000     C:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\clrjit.dll\n0x76cd0000 - 0x76d5f000     C:\\Windows\\syswow64\\OLEAUT32.dll\n0x5dea0000 - 0x5df71000     C:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\diasymreader.dll\n0x6cf70000 - 0x6d90d000     C:\\Windows\\assembly\\NativeImages_v4.0.30319_32\\System\\d18e2115a3270f89663fce831547f534\\System.ni.dll\n0x72040000 - 0x7212b000     C:\\Windows\\system32\\dbghelp.dll\n\nVM Arguments:\njvm_args: -Dfile.encoding=Cp1252 \njava_command: jni.Test1\njava_class_path (initial): C:\\workspace\\jnitest\\bin\nLauncher Type: SUN_STANDARD\n\nEnvironment Variables:\nJAVA_HOME=C:\\Program Files (x86)\\Java\\jdk1.7.0_51\nPATH=C:/Program Files (x86)/Java/jre1.8.0_31/bin/client;C:/Program Files (x86)/Java/jre1.8.0_31/bin;C:/Program Files (x86)/Java/jre1.8.0_31/lib/i386;C:\\ProgramData\\Oracle\\Java\\javapath;C:\\Program Files (x86)\\Wizvera\\Delfino;C:\\Program Files (x86)\\Intel\\iCLS Client\\;C:\\Program Files\\Intel\\iCLS Client\\;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files\\Intel\\Intel(R) Management Engine Components\\DAL;C:\\Program Files\\Intel\\Intel(R) Management Engine Components\\IPT;C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine Components\\DAL;C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine Components\\IPT;C:\\Program Files (x86)\\Common Files\\Ulead Systems\\MPEG;C:\\SWTOOLS\\ReadyApps;C:\\Program Files (x86)\\Common Files\\Lenovo;C:\\Program Files\\Intel\\WiFi\\bin\\;C:\\Program Files\\Common Files\\Intel\\WirelessCommon\\;C:\\Program Files (x86)\\Lenovo\\Access Connections\\;C:\\Program Files (x86)\\Intel\\OpenCL SDK\\3.0\\bin\\x86;C:\\Program Files (x86)\\Intel\\OpenCL SDK\\3.0\\bin\\x64;C:\\Program Files (x86)\\Java\\jre7\\bin;C:\\Program Files\\nodejs\\;C:\\Program Files\\TortoiseSVN\\bin;C:\\Program Files (x86)\\Java\\jdk1.7.0_51\\bin;C:\\development\\adt-bundle-windows-x86_64\\sdk\\platform-tools;C:\\development\\adt-bundle-windows-x86_64\\sdk\\tools;C:\\Program Files\\ANT\\apache-ant-1.9.3\\bin;C:\\Program Files (x86)\\Windows Kits\\8.1\\Windows Performance Toolkit\\;C:\\Program Files\\Microsoft SQL Server\\110\\Tools\\Binn\\;C:\\Program Files (x86)\\Microsoft SDKs\\TypeScript\\1.0\\;C:\\eclipse\\mars;\nUSERNAME=MYUSER\nOS=Windows_NT\nPROCESSOR_IDENTIFIER=Intel64 Family 6 Model 58 Stepping 9, GenuineIntel\n\n\n\n---------------  S Y S T E M  ---------------\n\nOS: Windows 7 , 64 bit Build 7601 Service Pack 1\n\nCPU:total 4 (2 cores per cpu, 2 threads per core) family 6 model 58 stepping 9, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1, sse4.2, popcnt, avx, aes, clmul, erms, ht, tsc, tscinvbit, tscinv\n\nMemory: 4k page, physical 8079004k(1694656k free), swap 16156168k(9124340k free)\n\nvm_info: Java HotSpot(TM) Client VM (25.31-b07) for windows-x86 JRE (1.8.0_31-b13), built on Dec 17 2014 20:46:12 by \"java_re\" with MS VC++ 10.0 (VS2010)\n\ntime: Thu Aug 27 16:38:52 2015\nelapsed time: 0 seconds (0d 0h 0m 0s)\n</code></pre>\n"}, {"tags": ["c++", "delphi", "detours", "tclientsocket"], "comments": [{"owner": {"reputation": 25610, "user_id": 988445, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3386452e85998665dc0f1dd0ec2f064b?s=128&d=identicon&r=PG", "display_name": "Jerry Dodge", "link": "https://stackoverflow.com/users/988445/jerry-dodge"}, "edited": false, "score": 0, "creation_date": 1440604242, "post_id": 32230734, "comment_id": 52344869, "body": "What do you mean by &quot;hook&quot;? FWIW, <code>TClientSocket</code> and <code>TServerSocket</code> (<code>ScktComp</code> in general) is extremely outdated and highly discouraged to use. You should consider switching to a newer library."}, {"owner": {"reputation": 23, "user_id": 2984405, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QdU7T.jpg?s=128&g=1", "display_name": "Alexxxx", "link": "https://stackoverflow.com/users/2984405/alexxxx"}, "reply_to_user": {"reputation": 25610, "user_id": 988445, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3386452e85998665dc0f1dd0ec2f064b?s=128&d=identicon&r=PG", "display_name": "Jerry Dodge", "link": "https://stackoverflow.com/users/988445/jerry-dodge"}, "edited": false, "score": 0, "creation_date": 1440606236, "post_id": 32230734, "comment_id": 52346118, "body": "i dont have the source from that exe, i just want to knot what is sending or recieving"}, {"owner": {"reputation": 1913, "user_id": 1970843, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3aadb1e11f1d872253f24685b101d335?s=128&d=identicon&r=PG", "display_name": "GabrielF", "link": "https://stackoverflow.com/users/1970843/gabrielf"}, "edited": false, "score": 0, "creation_date": 1440610095, "post_id": 32230734, "comment_id": 52348352, "body": "Maybe use something like <a href=\"https://en.wikipedia.org/wiki/Wireshark\" rel=\"nofollow noreferrer\">Wireshark</a>?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1440616197, "post_id": 32230734, "comment_id": 52351907, "body": "Detouring involves executing hooking code inside the running process that is to be hooked. <code>TClientSocket</code> and <code>TServerSocket</code> use the WinSock <code>send()</code> and <code>recv()</code> functions, which can certainly be detoured. But since you don&#39;t have the source of the EXE, you cannot detour its functions, unless you write another app that injects custom code into the running EXE process, or otherwise use an API Monitoring utility that does such hooking.  If you just want to monitor the socket data and look at it, a packet sniffer like Wireshark is your best choice."}, {"owner": {"reputation": 23, "user_id": 2984405, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QdU7T.jpg?s=128&g=1", "display_name": "Alexxxx", "link": "https://stackoverflow.com/users/2984405/alexxxx"}, "edited": false, "score": 0, "creation_date": 1440621045, "post_id": 32230734, "comment_id": 52354577, "body": "do you know what version of WinSock  it use?"}], "owner": {"reputation": 23, "user_id": 2984405, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QdU7T.jpg?s=128&g=1", "display_name": "Alexxxx", "link": "https://stackoverflow.com/users/2984405/alexxxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1440602924, "creation_date": 1440602924, "question_id": 32230734, "link": "https://stackoverflow.com/questions/32230734/hooking-tclientsocket-delphi", "title": "Hooking TClientSocket Delphi", "body": "<p>I have an exe compiled in delphi, it connects to asocket that reads and recieves data. \nI would like to know if is possbile to hook the TClientSocket  delphi class and use some library like detours to do that.</p>\n"}, {"tags": ["c++", "sqlite"], "comments": [{"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1440606475, "post_id": 32230685, "comment_id": 52346265, "body": "SQLite <a href=\"http://www.sqlite.org/datatype3.html\" rel=\"nofollow noreferrer\">does not have fixed column types</a>. How exactly do you want to change the values in the column?"}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "reply_to_user": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1440607932, "post_id": 32230685, "comment_id": 52347107, "body": "@CL.: In the old version I would add data as <code>UPDATE tbl SET col=23</code> or by using a 64-bit integer, but now I&#39;ll be doing <code>UPDATE tbl SET col=x&#39;ab094587ae387a00118234&#39;</code> or in other words it will have a longer byte array stored in it."}], "answers": [{"comments": [{"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "edited": false, "score": 0, "creation_date": 1440621123, "post_id": 32234103, "comment_id": 52354623, "body": "So what you&#39;re saying is that instead of writing 8-byte integers into a column I can starting writing arbitrary length byte blobs into it without changing the column type. Am I reading it correctly?"}], "tags": [], "owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "is_accepted": false, "score": 1, "last_activity_date": 1440613782, "creation_date": 1440613782, "answer_id": 32234103, "question_id": 32230685, "link": "https://stackoverflow.com/questions/32230685/change-sqlite-columns-type-from-integer-to-blob-in-existing-table-with-data/32234103#32234103", "title": "Change SQLite columns type from INTEGER to BLOB in existing table with data", "body": "<p>SQLite does not have any mechanism to change columns; you have to recreate the table.</p>\n\n<p>Indexes and foreign keys do not prevent you from doing this (if you have actual foreign key constraints, you can disable checking them with <a href=\"http://www.sqlite.org/pragma.html#pragma_foreign_keys\" rel=\"nofollow\">PRAGMA foreign_keys</a>).</p>\n\n<p>Due to SQLite's <a href=\"http://www.sqlite.org/datatype3.html\" rel=\"nofollow\">dynamic typing</a>, you do not actually have to change the table definition.</p>\n"}], "owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440613782, "creation_date": 1440602761, "question_id": 32230685, "link": "https://stackoverflow.com/questions/32230685/change-sqlite-columns-type-from-integer-to-blob-in-existing-table-with-data", "title": "Change SQLite columns type from INTEGER to BLOB in existing table with data", "body": "<p>I use SQLite database (or <code>sqlite3</code> class) in my software written in C++. In the new version of software I need to change data type on several columns in an existing table from <code>INTEGER</code> to <code>BLOB</code>.</p>\n\n<p>Is there an easy way to do this programmatically?</p>\n\n<p>Do I really need to recreate the table? The reason I hesitate to do so is because the table also has an index associated with it, and also is referenced by other tables attaching them to it.</p>\n"}, {"tags": ["c++", "visual-c++", "msvc12"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1440602715, "post_id": 32230632, "comment_id": 52343741, "body": "I don&#39;t understand how you expected a sleep for <i>one nanosecond</i> to work."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1440602826, "post_id": 32230632, "comment_id": 52343818, "body": "This is a very implementation-specific thing that none but the Visual C++ standard library developers will know the answer to."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1440602873, "post_id": 32230632, "comment_id": 52343846, "body": "@JoachimPileborg: Fortunately, some of those developers frequent SO :)"}, {"owner": {"reputation": 10206, "user_id": 65678, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tLuGV.jpg?s=128&g=1", "display_name": "gha.st", "link": "https://stackoverflow.com/users/65678/gha-st"}, "edited": false, "score": 2, "creation_date": 1440602986, "post_id": 32230632, "comment_id": 52343923, "body": "A sleep can be expected to release the current time slice. Therefore (assuming 10ms time slices) you want the program to sleep for 2.7 hours."}, {"owner": {"reputation": 326282, "user_id": 151292, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/AQNZx.jpg?s=128&g=1", "display_name": "James McNellis", "link": "https://stackoverflow.com/users/151292/james-mcnellis"}, "edited": false, "score": 1, "creation_date": 1440613144, "post_id": 32230632, "comment_id": 52350127, "body": "Fortunately or unfortunately... :-) We also ship almost all of the runtime library source code, so it&#39;s often quite straightforward to step through the runtime library code to see what&#39;s going on.  In this case, the ConcRT code for <code>Concurrency::wait</code> and the <code>_Timer</code> class have a number of useful comments."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1440618737, "post_id": 32230632, "comment_id": 52353341, "body": "First, the call to <code>FreeLibrary</code> just decrements a reference count. Second, the idea that a program doesn&#39;t sleep fast enough is very, very silly. You&#39;re basically just seeing the difference between rounding the sleep down to zero or up to one timeslice."}, {"owner": {"reputation": 1011, "user_id": 996540, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/2a285347e2b9396a078c1f37441d37d3?s=128&d=identicon&r=PG", "display_name": "amanjiang", "link": "https://stackoverflow.com/users/996540/amanjiang"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440642383, "post_id": 32230632, "comment_id": 52361162, "body": "@LightnessRacesinOrbit I am not, it&#39;s just a test, sometimes the implementation-specific is important, it will affects the performance, especially for concurrent programming."}, {"owner": {"reputation": 1011, "user_id": 996540, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/2a285347e2b9396a078c1f37441d37d3?s=128&d=identicon&r=PG", "display_name": "amanjiang", "link": "https://stackoverflow.com/users/996540/amanjiang"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1440645232, "post_id": 32230632, "comment_id": 52361856, "body": "@DavidSchwartz Yes, reference count, but it still could unload the library, it&#39;s about the design."}], "answers": [{"comments": [{"owner": {"reputation": 1011, "user_id": 996540, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/2a285347e2b9396a078c1f37441d37d3?s=128&d=identicon&r=PG", "display_name": "amanjiang", "link": "https://stackoverflow.com/users/996540/amanjiang"}, "edited": false, "score": 0, "creation_date": 1440642187, "post_id": 32233881, "comment_id": 52361136, "body": "Very helpful, this is the answer what I expected, thank you."}, {"owner": {"reputation": 1011, "user_id": 996540, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/2a285347e2b9396a078c1f37441d37d3?s=128&d=identicon&r=PG", "display_name": "amanjiang", "link": "https://stackoverflow.com/users/996540/amanjiang"}, "edited": false, "score": 0, "creation_date": 1440644179, "post_id": 32233881, "comment_id": 52361609, "body": "By the way, &quot;ensure that the module is not unloaded&quot;, why don&#39;t you leave this to the developers ? Unload a running module - this made no sense."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1011, "user_id": 996540, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/2a285347e2b9396a078c1f37441d37d3?s=128&d=identicon&r=PG", "display_name": "amanjiang", "link": "https://stackoverflow.com/users/996540/amanjiang"}, "edited": false, "score": 0, "creation_date": 1440674892, "post_id": 32233881, "comment_id": 52376636, "body": "@amanjiang: To prevent errors? For convenience? Because &quot;checking&quot; for this manually in general is almost impossible? Why is this not the best way to do it?"}, {"owner": {"reputation": 1011, "user_id": 996540, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/2a285347e2b9396a078c1f37441d37d3?s=128&d=identicon&r=PG", "display_name": "amanjiang", "link": "https://stackoverflow.com/users/996540/amanjiang"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440681097, "post_id": 32233881, "comment_id": 52381085, "body": "@LightnessRacesinOrbit I don&#39;t know if it is the best way, or maybe there is no &quot;best way&quot;. I&#39;m just interesting in the reason to make such a change."}, {"owner": {"reputation": 1011, "user_id": 996540, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/2a285347e2b9396a078c1f37441d37d3?s=128&d=identicon&r=PG", "display_name": "amanjiang", "link": "https://stackoverflow.com/users/996540/amanjiang"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440681708, "post_id": 32233881, "comment_id": 52381573, "body": "@LightnessRacesinOrbit Well, for std::thread and _beginthreadex, it&#39;s not big deal. For sleep_for (and other things), it costs. As the most foundational language facilities, (I&#39;m afraid) it may introduce unnecessary overhead and complexity."}, {"owner": {"reputation": 1011, "user_id": 996540, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/2a285347e2b9396a078c1f37441d37d3?s=128&d=identicon&r=PG", "display_name": "amanjiang", "link": "https://stackoverflow.com/users/996540/amanjiang"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440682718, "post_id": 32233881, "comment_id": 52382404, "body": "@LightnessRacesinOrbit So I often use boost for concurrent programs. Not std, std is slow, and it&#39;s more complex. For example in dll entry point std::thread will cause dead lock, but boost:thread works."}, {"owner": {"reputation": 326282, "user_id": 151292, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/AQNZx.jpg?s=128&g=1", "display_name": "James McNellis", "link": "https://stackoverflow.com/users/151292/james-mcnellis"}, "edited": false, "score": 1, "creation_date": 1440685917, "post_id": 32233881, "comment_id": 52384843, "body": "Consider the case where [1] a module is loaded via COM, [2] some COM object inside of the module starts some asynchronous operations via std::async or std::thread, and then [3] all COM objects go out of existence, but the asynchronous operations are still pending or the background threads are still running. The COM runtime may at this time release its reference to the module. If the asynchronous operations or worker threads do not own their own references to the module, the reference count will drop to zero and the loader will unload the module out from under them."}, {"owner": {"reputation": 326282, "user_id": 151292, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/AQNZx.jpg?s=128&g=1", "display_name": "James McNellis", "link": "https://stackoverflow.com/users/151292/james-mcnellis"}, "edited": false, "score": 0, "creation_date": 1440686105, "post_id": 32233881, "comment_id": 52384984, "body": "This problem is exacerbated in Windows Store apps / Universal Windows Platform apps, where most modules are loaded via the COM runtime and that fact is largely &quot;hidden&quot; from the developer by higher level abstractions like C++/CX. We saw a sizable number of crashes due to this problem, which is why we altered <code>_beginthreadex</code> to acquire a reference to the module to prevent premature unload (<code>std::thread</code> now calls <code>_beginthreadex</code>, so it&#39;s &quot;fixed&quot; as well)."}, {"owner": {"reputation": 326282, "user_id": 151292, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/AQNZx.jpg?s=128&g=1", "display_name": "James McNellis", "link": "https://stackoverflow.com/users/151292/james-mcnellis"}, "edited": false, "score": 1, "creation_date": 1440686251, "post_id": 32233881, "comment_id": 52385078, "body": "We don&#39;t want to leave this up to developers for a few reasons. First, it is rarely obvious where acquiring a reference is <i>actually</i> required. We don&#39;t want developers to have to acquire a reference every time they start a thread or a task--if nothing else, that would require platform-specific code all over the place, even in code that should be portable across C++ implementations and operating systems. Additionally, there&#39;s no way for Windows Store apps to increment the reference count of a module loaded via the COM runtime (the required APIs are not callable)."}, {"owner": {"reputation": 1011, "user_id": 996540, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/2a285347e2b9396a078c1f37441d37d3?s=128&d=identicon&r=PG", "display_name": "amanjiang", "link": "https://stackoverflow.com/users/996540/amanjiang"}, "edited": false, "score": 0, "creation_date": 1440687726, "post_id": 32233881, "comment_id": 52386204, "body": "@JamesMcNellis So this is the reason. I don&#39;t know about Windows Store apps, but if a COM object goes out of existence, why not do a sync work to ensure all async operations are finished or cancelled ? If not, it means that although an object is done, but some related code is still running, this is not RAII."}, {"owner": {"reputation": 1011, "user_id": 996540, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/2a285347e2b9396a078c1f37441d37d3?s=128&d=identicon&r=PG", "display_name": "amanjiang", "link": "https://stackoverflow.com/users/996540/amanjiang"}, "edited": false, "score": 0, "creation_date": 1440724301, "post_id": 32233881, "comment_id": 52403309, "body": "A related question: <a href=\"http://stackoverflow.com/questions/32252143/stdthread-cause-deadlock-in-dllmain\" title=\"stdthread cause deadlock in dllmain\">stackoverflow.com/questions/32252143/&hellip;</a>"}, {"owner": {"reputation": 326282, "user_id": 151292, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/AQNZx.jpg?s=128&g=1", "display_name": "James McNellis", "link": "https://stackoverflow.com/users/151292/james-mcnellis"}, "edited": false, "score": 1, "creation_date": 1440771002, "post_id": 32233881, "comment_id": 52424941, "body": "In practice it is not so easy to explicitly wait for all asynchronous operations to complete, especially in highly asynchronous APIs like the new Windows Runtime APIs (it&#39;s exceedingly easy to lose track of tasks). Practically no application does this 100% correctly."}], "tags": [], "owner": {"reputation": 326282, "user_id": 151292, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/AQNZx.jpg?s=128&g=1", "display_name": "James McNellis", "link": "https://stackoverflow.com/users/151292/james-mcnellis"}, "is_accepted": true, "score": 4, "last_activity_date": 1440613044, "creation_date": 1440613044, "answer_id": 32233881, "question_id": 32230632, "link": "https://stackoverflow.com/questions/32230632/why-sleep-for-calls-freelibrary/32233881#32233881", "title": "Why sleep_for calls FreeLibrary?", "body": "<p>In Visual C++ 2013, most of the C++ Standard Library concurrency functionality sits atop the <a href=\"https://msdn.microsoft.com/en-us/library/ee207192.aspx\" rel=\"nofollow\">Concurrency Runtime (ConcRT)</a>.  ConcRT is a work-stealing runtime that provides cooperative scheduling and blocking.</p>\n\n<p>Here, <code>Concurrency::wait</code> uses a thread pool timer to perform the wait.  It uses <code>LoadLibrary</code>/<code>FreeLibrary</code> to increment the reference count of the module in which the ConcRT runtime is hosted for the duration that the timer is pending.  This ensures that the module is not unloaded during the wait.</p>\n\n<p>I'm not a ConcRT expert (not even close), so I'm not 100% sure what is the exact scenario where the ConcRT module could be unloaded here.  I do know that we made similar changes to <code>std::thread</code> and <code>_beginthreadex</code>, to acquire a reference to the module in which the thread callback is hosted, to ensure that the module is not unloaded while the thread is executing.</p>\n\n<p>In Visual C++ 2015, the C++ Standard Library concurrency functionality was modified to sit directly atop Windows operating system primitives (e.g. <code>CreateThread</code>, <code>Sleep</code>, etc.) instead of ConcRT.  This was done to improve performance, to resolve correctness issues when mixing use of C++ threading functionality with use of operating system functionality, and as part of a more general deemphasization of ConcRT.</p>\n\n<p>Note that on Windows, sleep precision is in milliseconds and a sleep of zero milliseconds generally means \"go do other useful work before coming back to me.\"  If you compile your program with Visual C++ 2015, each call to <code>wait_for</code> will in turn call <code>Sleep(0)</code>, which \"causes the thread to relinquish the remainder of its time slice to any other thread that is ready to run.\"</p>\n"}], "owner": {"reputation": 1011, "user_id": 996540, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/2a285347e2b9396a078c1f37441d37d3?s=128&d=identicon&r=PG", "display_name": "amanjiang", "link": "https://stackoverflow.com/users/996540/amanjiang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 364, "favorite_count": 0, "accepted_answer_id": 32233881, "answer_count": 1, "score": 1, "last_activity_date": 1440613044, "creation_date": 1440602614, "question_id": 32230632, "link": "https://stackoverflow.com/questions/32230632/why-sleep-for-calls-freelibrary", "title": "Why sleep_for calls FreeLibrary?", "body": "<p>I'm shocked to trace this simple code:</p>\n\n<pre><code>#include &lt;thread&gt;\n\nvoid foo()\n{\n    for (int i = 0; i &lt; 1000000; ++i) {\n        std::this_thread::sleep_for(std::chrono::nanoseconds(1));\n    }\n}\n\nint main()\n{\n    std::thread t(foo);\n    t.join();\n}\n</code></pre>\n\n<p>Guess what ? sleep_for calls FreeLibrary everytime !</p>\n\n<pre><code>kernel32.dll!_FreeLibraryStub@4()\nmsvcr120d.dll!Concurrency::details::DeleteAsyncTimerAndUnloadLibrary(_TP_TIMER * timer) Line 707\nmsvcr120d.dll!Concurrency::details::_Timer::_Stop() Line 111\nmsvcr120d.dll!Concurrency::details::_Timer::~_Timer() Line 100\nmsvcr120d.dll!`Concurrency::wait'::`7'::TimerObj::~TimerObj()\nmsvcr120d.dll!Concurrency::wait(unsigned int milliseconds) Line 155\ntest826.exe!std::this_thread::sleep_until(const xtime * _Abs_time) Line 137\ntest826.exe!std::this_thread::sleep_for&lt;__int64,std::ratio&lt;1,1000000000&gt; &gt;(const std::chrono::duration&lt;__int64,std::ratio&lt;1,1000000000&gt; &gt; &amp; _Rel_time) Line 162\ntest826.exe!foo() Line 6\n</code></pre>\n\n<p>Why sleep_for had to call FreeLibrary ?</p>\n\n<p>This program will take 2 seconds with boost library, and will take > 3 minutes (lose my patience) with msvcrt (Release mode). I can't imagine.</p>\n"}, {"tags": ["c++", "linux", "g++", "openal"], "comments": [{"owner": {"reputation": 580, "user_id": 1428475, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/edbc152519d304324a7740d0570334c9?s=128&d=identicon&r=PG", "display_name": "timdykes", "link": "https://stackoverflow.com/users/1428475/timdykes"}, "edited": false, "score": 0, "creation_date": 1440603699, "post_id": 32230601, "comment_id": 52344449, "body": "Can you see the library files in /usr/lib/?"}, {"owner": {"reputation": 580, "user_id": 1428475, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/edbc152519d304324a7740d0570334c9?s=128&d=identicon&r=PG", "display_name": "timdykes", "link": "https://stackoverflow.com/users/1428475/timdykes"}, "edited": false, "score": 1, "creation_date": 1440604182, "post_id": 32230601, "comment_id": 52344823, "body": "And have you tried with <code>-lopenal</code> instead of <code>-lal</code> and <code>-lalc</code>"}, {"owner": {"reputation": 43, "user_id": 5257581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28475dacd37b3699411112949f462478?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5257581/brian"}, "reply_to_user": {"reputation": 580, "user_id": 1428475, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/edbc152519d304324a7740d0570334c9?s=128&d=identicon&r=PG", "display_name": "timdykes", "link": "https://stackoverflow.com/users/1428475/timdykes"}, "edited": false, "score": 0, "creation_date": 1440604569, "post_id": 32230601, "comment_id": 52345078, "body": "@timofiend -lopenal worked, thank you very much."}, {"owner": {"reputation": 43, "user_id": 5257581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28475dacd37b3699411112949f462478?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5257581/brian"}, "reply_to_user": {"reputation": 580, "user_id": 1428475, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/edbc152519d304324a7740d0570334c9?s=128&d=identicon&r=PG", "display_name": "timdykes", "link": "https://stackoverflow.com/users/1428475/timdykes"}, "edited": false, "score": 0, "creation_date": 1440604854, "post_id": 32230601, "comment_id": 52345268, "body": "@timofiend Could you post that as an answer so I can marked this question as solved please?"}, {"owner": {"reputation": 580, "user_id": 1428475, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/edbc152519d304324a7740d0570334c9?s=128&d=identicon&r=PG", "display_name": "timdykes", "link": "https://stackoverflow.com/users/1428475/timdykes"}, "edited": false, "score": 0, "creation_date": 1440604986, "post_id": 32230601, "comment_id": 52345360, "body": "no worries :) just posted it"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 5257581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28475dacd37b3699411112949f462478?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5257581/brian"}, "edited": false, "score": 0, "creation_date": 1440606053, "post_id": 32231355, "comment_id": 52346013, "body": "Would you mind taking a look at my other question? <a href=\"http://stackoverflow.com/questions/32169542/portaudio-error-on-ubuntu-and-raspbian\">link</a>"}], "tags": [], "owner": {"reputation": 580, "user_id": 1428475, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/edbc152519d304324a7740d0570334c9?s=128&d=identicon&r=PG", "display_name": "timdykes", "link": "https://stackoverflow.com/users/1428475/timdykes"}, "is_accepted": true, "score": 4, "last_activity_date": 1440604695, "creation_date": 1440604695, "answer_id": 32231355, "question_id": 32230601, "link": "https://stackoverflow.com/questions/32230601/g-unable-to-link-openal-libraries/32231355#32231355", "title": "g++ unable to link OpenAL Libraries", "body": "<p>The answer, that we worked out in the comments, was for Brian to link to the openal library using <code>-lopenal</code> instead of <code>-lal</code> and <code>-lalc</code></p>\n"}], "owner": {"reputation": 43, "user_id": 5257581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28475dacd37b3699411112949f462478?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5257581/brian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1580, "favorite_count": 0, "accepted_answer_id": 32231355, "answer_count": 1, "score": 3, "last_activity_date": 1440604695, "creation_date": 1440602524, "question_id": 32230601, "link": "https://stackoverflow.com/questions/32230601/g-unable-to-link-openal-libraries", "title": "g++ unable to link OpenAL Libraries", "body": "<p>I have trouble compiling the following code</p>\n\n<pre><code>#include &lt;AL/al.h&gt;\n#include &lt;AL/alc.h&gt;\n\n#include &lt;iostream&gt;\n\n\nint checkEnumerationSupport() {\n\n    ALboolean enumeration;\n\n    enumeration = alcIsExtensionPresent(NULL, \"ALC_ENUMERATION_EXT\");\n\n    if (enumeration == AL_FALSE) {\n        // enumeration not supported\n        std::cout &lt;&lt; \"enumerating devices NOT supported\\n\";\n    } else {\n        // enumeration supported\n        std::cout &lt;&lt; \"enumerating devices supported\\n\";\n    };\n\n    return 0;\n\n}\n\n\nint main() {\n\n    checkEnumerationSupport();\n\n}\n</code></pre>\n\n<p>using the command below.</p>\n\n<pre><code>g++ test.cpp -o test\n</code></pre>\n\n<p>I get the following message:</p>\n\n<pre><code>/tmp/ccEN7YAp.o: In function `checkEnumerationSupport()':\ntest.cpp:(.text+0x13): undefined reference to `alcIsExtensionPresent'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>Realising the libraries weren't linked correctly, I tried changing the g++ line to</p>\n\n<pre><code>g++ -L/usr/lib/ test.cpp -o test -lal -lalc\n</code></pre>\n\n<p>giving me the following message:</p>\n\n<pre><code>/usr/bin/ld: cannot find -lal\n/usr/bin/ld: cannot find -lalc\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>I tested it on <strong>Linux Mint 17.2</strong> and <strong>Ubuntu 14.04</strong>.</p>\n\n<p>Does anyone know how to compile the code correctly?</p>\n"}, {"tags": ["c++", "c++11", "gcc"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1440602637, "post_id": 32230542, "comment_id": 52343680, "body": "according to <a href=\"https://gcc.gnu.org/projects/cxx0x.html\" rel=\"nofollow noreferrer\">this</a> <code>nullptr</code> was supported since version 4.6"}, {"owner": {"reputation": 3687, "user_id": 1344461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04022165e5380a8ab69f0de5eb9c5d4c?s=128&d=identicon&r=PG", "display_name": "C0deH4cker", "link": "https://stackoverflow.com/users/1344461/c0deh4cker"}, "edited": false, "score": 2, "creation_date": 1440602679, "post_id": 32230542, "comment_id": 52343713, "body": "<code>cc1plus: error: unrecognized command line option &quot;-std=c++11&quot;</code> &lt;-- cc1plus isn&#39;t g++"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1440602939, "post_id": 32230542, "comment_id": 52343894, "body": "Are you sure cmake is using the correct gcc version?"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "reply_to_user": {"reputation": 3687, "user_id": 1344461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04022165e5380a8ab69f0de5eb9c5d4c?s=128&d=identicon&r=PG", "display_name": "C0deH4cker", "link": "https://stackoverflow.com/users/1344461/c0deh4cker"}, "edited": false, "score": 2, "creation_date": 1440603250, "post_id": 32230542, "comment_id": 52344122, "body": "@C0deH4cker cc1plus is the compiler part of g++."}, {"owner": {"reputation": 3687, "user_id": 1344461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04022165e5380a8ab69f0de5eb9c5d4c?s=128&d=identicon&r=PG", "display_name": "C0deH4cker", "link": "https://stackoverflow.com/users/1344461/c0deh4cker"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1440603390, "post_id": 32230542, "comment_id": 52344210, "body": "@interjay Correct. However, only the g++ compiler frontend specifically understands the <code>--std=c++11</code> flag. It converts that into arguments understood by cc1plus."}, {"owner": {"reputation": 1302, "user_id": 5165306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b7c0ad499e2544d929f45c37b24cd9?s=128&d=identicon&r=PG&f=1", "display_name": "ex-bart", "link": "https://stackoverflow.com/users/5165306/ex-bart"}, "edited": false, "score": 0, "creation_date": 1440603475, "post_id": 32230542, "comment_id": 52344275, "body": "What command exactly is cmake using to invoke g++? If you&#39;re using the make backend, you may need to try something like <code>make V=1</code>  to see the commands."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 3687, "user_id": 1344461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04022165e5380a8ab69f0de5eb9c5d4c?s=128&d=identicon&r=PG", "display_name": "C0deH4cker", "link": "https://stackoverflow.com/users/1344461/c0deh4cker"}, "edited": false, "score": 0, "creation_date": 1440603537, "post_id": 32230542, "comment_id": 52344325, "body": "@C0deH4cker: Is it not suspicious that it accepted <code>-std=c++0x</code>? I think you&#39;re wrong. I suspect the problem is that a <i>much</i> older GCC than 4.8.2 is being invoked from CMake (<a href=\"http://stackoverflow.com/a/3756481/560648\"><code>nullptr</code> wasn&#39;t added until 4.6</a>)"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "reply_to_user": {"reputation": 3687, "user_id": 1344461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04022165e5380a8ab69f0de5eb9c5d4c?s=128&d=identicon&r=PG", "display_name": "C0deH4cker", "link": "https://stackoverflow.com/users/1344461/c0deh4cker"}, "edited": false, "score": 2, "creation_date": 1440603583, "post_id": 32230542, "comment_id": 52344361, "body": "@C0deH4cker That isn&#39;t my experience: <code>$ g++ q.cpp -std=asdf</code> results in: <code>cc1plus: error: unrecognized command line option &quot;-std=asdf&quot;</code>"}, {"owner": {"reputation": 1302, "user_id": 5165306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b7c0ad499e2544d929f45c37b24cd9?s=128&d=identicon&r=PG&f=1", "display_name": "ex-bart", "link": "https://stackoverflow.com/users/5165306/ex-bart"}, "edited": false, "score": 1, "creation_date": 1440603621, "post_id": 32230542, "comment_id": 52344389, "body": "Speculation: this might be an issue with the cmake cache, if you initially invoked cmake in a different environment (i.e. before you did <code>scl enable devtoolset-2 bash</code>)"}, {"owner": {"reputation": 3687, "user_id": 1344461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04022165e5380a8ab69f0de5eb9c5d4c?s=128&d=identicon&r=PG", "display_name": "C0deH4cker", "link": "https://stackoverflow.com/users/1344461/c0deh4cker"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1440644856, "post_id": 32230542, "comment_id": 52361782, "body": "@LightnessRacesinOrbit Oops, you are correct. I made a false assertion without first checking if I was correct."}], "answers": [{"comments": [{"owner": {"reputation": 172, "user_id": 4850847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Sm_2PHPCydo/AAAAAAAAAAI/AAAAAAAAAH8/BNjobkbS-8Q/photo.jpg?sz=128", "display_name": "Quentin Tealrod", "link": "https://stackoverflow.com/users/4850847/quentin-tealrod"}, "edited": false, "score": 0, "creation_date": 1440765137, "post_id": 32231008, "comment_id": 52420898, "body": "Thanks a lot for your answer. remve the cmake cache doesn&#39;t change anything. I tried to set CMAKE_COMPILER_IS_GNUCXX to true in order to make g++ run but unsuccessfully."}, {"owner": {"reputation": 172, "user_id": 4850847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Sm_2PHPCydo/AAAAAAAAAAI/AAAAAAAAAH8/BNjobkbS-8Q/photo.jpg?sz=128", "display_name": "Quentin Tealrod", "link": "https://stackoverflow.com/users/4850847/quentin-tealrod"}, "edited": false, "score": 0, "creation_date": 1440767198, "post_id": 32231008, "comment_id": 52422268, "body": "I tried to run verbose, setting CMAKE_VERBOSE_MAKEFILE to ON, but it doesn&#39;t seem to work. Do you know exactly how we do that ? Thanks"}, {"owner": {"reputation": 172, "user_id": 4850847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Sm_2PHPCydo/AAAAAAAAAAI/AAAAAAAAAH8/BNjobkbS-8Q/photo.jpg?sz=128", "display_name": "Quentin Tealrod", "link": "https://stackoverflow.com/users/4850847/quentin-tealrod"}, "edited": false, "score": 0, "creation_date": 1440767891, "post_id": 32231008, "comment_id": 52422759, "body": "I also need to add that in the generated Makefile, it&#39;s written VERBOSE = 1, but in the CMakeCache.txt  I have : CMAKE_VERBOSE_MAKEFILE:BOOL=OFF and no more information about the compiler or smtg related..."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 5, "last_activity_date": 1440603680, "creation_date": 1440603680, "answer_id": 32231008, "question_id": 32230542, "link": "https://stackoverflow.com/questions/32230542/nullptr-unrecognized-with-gcc-4-8/32231008#32231008", "title": "nullptr unrecognized with gcc 4.8", "body": "<p><strong>You are not invoking GCC 4.8.2.</strong></p>\n\n<p>Either there is something wrong with your CMake configuration, or there is something wrong with your SCL invocation, or <code>gcc -v</code> gives a different answer to <code>g++ -v</code> (in which case, check the contents of your toolset).</p>\n\n<p>But <code>nullptr</code> not being available, and <code>-std=c++0x</code> being accepted but not <code>-std=c++11</code>, all suggest GCC 4.3, 4.4 or 4.5.</p>\n\n<p>One thing you can try is to remove the file <code>CMakeCache.txt</code> from your build root, which may contain cached properties of your previous environment.</p>\n\n<p>Failing that, turn on verbose output so you can <em>really</em> see what's going on, what binaries are being invoked, and how.</p>\n"}], "owner": {"reputation": 172, "user_id": 4850847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Sm_2PHPCydo/AAAAAAAAAAI/AAAAAAAAAH8/BNjobkbS-8Q/photo.jpg?sz=128", "display_name": "Quentin Tealrod", "link": "https://stackoverflow.com/users/4850847/quentin-tealrod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1163, "favorite_count": 0, "accepted_answer_id": 32231008, "answer_count": 1, "score": 3, "last_activity_date": 1440603680, "creation_date": 1440602397, "last_edit_date": 1440602542, "question_id": 32230542, "link": "https://stackoverflow.com/questions/32230542/nullptr-unrecognized-with-gcc-4-8", "title": "nullptr unrecognized with gcc 4.8", "body": "<p>On a Red Hat Linux station, I use the devtoolset2 giving the following command: </p>\n\n<pre><code>scl enable devtoolset-2 bash\n</code></pre>\n\n<p>Then, when I call gcc --version, I get : </p>\n\n<p><code>gcc (GCC) 4.8.2 20140120 (Red Hat 4.8.2-15)\nCopyright (C) 2013 Free Software Foundation, Inc.</code></p>\n\n<p>But if I compile my program (malkefile generated with cmake, adding the line  :</p>\n\n<pre><code>if(UNIX)\n    SET(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -Wall -std=c++11\")\nendif()\n</code></pre>\n\n<p>I have the following error message : </p>\n\n<pre><code>cc1plus: error: unrecognized command line option \"-std=c++11\"\n</code></pre>\n\n<p>And if I compile replacing -std=c++11 by -std=c++0x\nthen, I obtain these messages :</p>\n\n<pre><code>nullptr wasnt declared in this scope.\n</code></pre>\n\n<p>How nullptr cannot be recognized considering it is a keyword ?</p>\n\n<p>I don't understand, if you have any idea...</p>\n"}]