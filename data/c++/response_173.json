[{"tags": ["c++"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1525305975, "post_id": 50145123, "comment_id": 87308419, "body": "The client calls <code>send</code> once, then <code>shutdown</code>. If you want the connection to stay open, then, you know, don&#39;t close it."}, {"owner": {"reputation": 47, "user_id": 9128168, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c3c3f0ac567fe9e828378af77c829de6?s=128&d=identicon&r=PG&f=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/9128168/jon"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1525306661, "post_id": 50145123, "comment_id": 87308547, "body": "When i comment the shutdown &quot;iResult = shutdown(ConnectSocket, SD_SEND);&quot; out it doesn&#39;t allow me to add any more input into command prompt. I have tried encasing it in a while loop that exits on the string &quot;exit&quot; and then shutsdown, but that doesn&#39;t work either."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1525306909, "post_id": 50145123, "comment_id": 87308589, "body": "The client only calls <code>getline</code> once, too. You can&#39;t add more input because the program doesn&#39;t read input anymore."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1525315645, "post_id": 50145123, "comment_id": 87310489, "body": "The server has a loop to read an inbound message and send an outbound message, on every loop iteration. The client needs a similar loop to read user input, send the input to the server, and read the server&#39;s reply, on every loop iteration. Right now your client is not looping the reading and sending of user input at all. It reads and sends user input only one time, then loops reading server replies. Move the reading and sending of user input into the loop. Once you fix that, your next task it to fix your actual sends and recvs, because you are not handling them correctly."}, {"owner": {"reputation": 47, "user_id": 9128168, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c3c3f0ac567fe9e828378af77c829de6?s=128&d=identicon&r=PG&f=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/9128168/jon"}, "edited": false, "score": 0, "creation_date": 1525316480, "post_id": 50145123, "comment_id": 87310702, "body": "How are they not being handled correctly?"}], "owner": {"reputation": 47, "user_id": 9128168, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c3c3f0ac567fe9e828378af77c829de6?s=128&d=identicon&r=PG&f=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/9128168/jon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 311, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1525305562, "creation_date": 1525305562, "question_id": 50145123, "link": "https://stackoverflow.com/questions/50145123/sending-multiple-messages-from-client-to-server", "title": "Sending multiple messages from Client to Server", "body": "<p>My code between the client and server works as expected except for the connection closing prematurely after only one message has been sent or received. I want both the client and the server to stay open to send multiple messages without having to reinitialize the connection every time. My code is below:</p>\n\n<p>Server</p>\n\n<pre><code>#undef UNICODE\n\n#define WIN32_LEAN_AND_MEAN\n\n#include &lt;windows.h&gt;\n#include &lt;winsock2.h&gt;\n#include &lt;ws2tcpip.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n\n\n// Need to link with Ws2_32.lib\n#pragma comment (lib, \"Ws2_32.lib\")\n\n#define DEFAULT_BUFLEN 512\n#define DEFAULT_PORT \"27016\"\n\nint __cdecl main(void)\n{\n    WSADATA wsaData;\n    int iResult;\n\n    SOCKET ListenSocket = INVALID_SOCKET;\n    SOCKET ClientSocket = INVALID_SOCKET;\n\n    struct addrinfo *result = NULL;\n    struct addrinfo hints;\n\n    int iSendResult;\n    char recvbuf[DEFAULT_BUFLEN];\n    int recvbuflen = DEFAULT_BUFLEN;\n\n    // Initialize Winsock\n    iResult = WSAStartup(MAKEWORD(2, 2), &amp;wsaData);\n    if (iResult != 0) {\n        printf(\"WSAStartup failed with error: %d\\n\", iResult);\n        return 1;\n    }\n\n    ZeroMemory(&amp;hints, sizeof(hints));\n    hints.ai_family = AF_INET;\n    hints.ai_socktype = SOCK_STREAM;\n    hints.ai_protocol = IPPROTO_TCP;\n    hints.ai_flags = AI_PASSIVE;\n\n    // Resolve the server address and port\n    iResult = getaddrinfo(0, DEFAULT_PORT, &amp;hints, &amp;result);\n    if (iResult != 0) {\n        printf(\"getaddrinfo failed with error: %d\\n\", iResult);\n        WSACleanup();\n        return 1;\n    }\n\n    // Create a SOCKET for connecting to server\n    ListenSocket = socket(result-&gt;ai_family, result-&gt;ai_socktype, result-&gt;ai_protocol);\n    std::cout &lt;&lt; \"Server Starting...\" &lt;&lt; std::endl;\n    if (ListenSocket == INVALID_SOCKET) {\n        printf(\"socket failed with error: %ld\\n\", WSAGetLastError());\n        freeaddrinfo(result);\n        WSACleanup();\n        return 1;\n    }\n\n    // Setup the TCP listening socket\n    iResult = bind(ListenSocket, result-&gt;ai_addr, (int)result-&gt;ai_addrlen);\n    if (iResult == SOCKET_ERROR) {\n        printf(\"bind failed with error: %d\\n\", WSAGetLastError());\n        freeaddrinfo(result);\n        closesocket(ListenSocket);\n        WSACleanup();\n        return 1;\n    }\n\n    freeaddrinfo(result);\n\n    iResult = listen(ListenSocket, SOMAXCONN);\n    std::cout &lt;&lt; \"Waiting for clients...\" &lt;&lt; std::endl;\n    if (iResult == SOCKET_ERROR) {\n        printf(\"listen failed with error: %d\\n\", WSAGetLastError());\n        closesocket(ListenSocket);\n        WSACleanup();\n        return 1;\n    }\n\n    // Accept a client socket\n    ClientSocket = accept(ListenSocket, NULL, NULL);\n    if (ClientSocket == INVALID_SOCKET) {\n        printf(\"accept failed with error: %d\\n\", WSAGetLastError());\n        closesocket(ListenSocket);\n        WSACleanup();\n        return 1;\n    }\n\n    std::cout &lt;&lt; \"In the server loop ready to receive a command...\" &lt;&lt; std::endl;\n\n    // No longer need server socket\n    //closesocket(ListenSocket);\n\n    // Receive until the peer shuts down the connection\n    do {\n\n        iResult = recv(ClientSocket, recvbuf, recvbuflen, 0);\n        if (iResult &gt; 0) {\n            printf(\"Bytes received: %d\\n\", iResult);\n\n            std::cout &lt;&lt; recvbuf &lt;&lt; std::endl;\n\n            // Echo the buffer back to the sender\n            iSendResult = send(ClientSocket, recvbuf, iResult, 0);\n\n            if (strcmp(recvbuf, \"move\") == 0) {\n                std::cout &lt;&lt; \"Command received: \" &lt;&lt; recvbuf &lt;&lt; std::endl;\n            }\n            else if (strcmp(recvbuf, \"stats\") == 0) {\n                std::cout &lt;&lt; \"Command received: \" &lt;&lt; recvbuf &lt;&lt; std::endl;\n            }\n            else if (strcmp(recvbuf, \"shoot\") == 0) {\n                std::cout &lt;&lt; \"Command received: \" &lt;&lt; recvbuf &lt;&lt; std::endl;\n            }\n\n            if (iSendResult == SOCKET_ERROR) {\n                printf(\"send failed with error: %d\\n\", WSAGetLastError());\n                closesocket(ClientSocket);\n                WSACleanup();\n                return 1;\n            }\n        }\n        else if (iResult == 0)\n            printf(\"Connection closing...\\n\");\n        else {\n            printf(\"recv failed with error: %d\\n\", WSAGetLastError());\n            closesocket(ClientSocket);\n            WSACleanup();\n            return 1;\n        }\n\n    } while (iResult &gt; 0);\n\n    // shutdown the connection since we're done\n    iResult = shutdown(ClientSocket, SD_SEND);\n    if (iResult == SOCKET_ERROR) {\n        printf(\"shutdown failed with error: %d\\n\", WSAGetLastError());\n        closesocket(ClientSocket);\n        WSACleanup();\n        return 1;\n    }\n\n    // cleanup\n    closesocket(ClientSocket);\n    WSACleanup();\n\n    system(\"PAUSE\");\n    return 0;\n}\n</code></pre>\n\n<p>Client</p>\n\n<pre><code>#define _CRT_SECURE_NO_WARNINGS\n\n#define WIN32_LEAN_AND_MEAN\n\n#include &lt;windows.h&gt;\n#include &lt;winsock2.h&gt;\n#include &lt;ws2tcpip.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sstream&gt;\n#include &lt;iostream&gt;\n\nusing std::string;\nusing std::cin;\n\n// Need to link with Ws2_32.lib, Mswsock.lib, and Advapi32.lib\n#pragma comment (lib, \"Ws2_32.lib\")\n#pragma comment (lib, \"Mswsock.lib\")\n#pragma comment (lib, \"AdvApi32.lib\")\n\n\n#define DEFAULT_BUFLEN 512\n#define DEFAULT_PORT \"27016\"\n\nint __cdecl main(int argc, char **argv)\n{\n    WSADATA wsaData;\n    SOCKET ConnectSocket = INVALID_SOCKET;\n    struct addrinfo *result = NULL,\n        *ptr = NULL,\n        hints;\n\n    // char *sendbuf = \"this is a test\";   //  disallowed with /permissive- flag\n    //char *sendbuf = new char[strlen(\"this is a test\")];\n\n    char recvbuf[DEFAULT_BUFLEN];\n    int iResult;\n    int recvbuflen = DEFAULT_BUFLEN;\n\n    // Validate the parameters\n    if (argc != 2) {\n        printf(\"usage: %s server-name\\n\", argv[0]);\n        return 1;\n    }\n\n    // Initialize Winsock\n    iResult = WSAStartup(MAKEWORD(2, 2), &amp;wsaData);\n    if (iResult != 0) {\n        printf(\"WSAStartup failed with error: %d\\n\", iResult);\n        return 1;\n    }\n\n    ZeroMemory(&amp;hints, sizeof(hints));\n    hints.ai_family = AF_UNSPEC;\n    hints.ai_socktype = SOCK_STREAM;\n    hints.ai_protocol = IPPROTO_TCP;\n\n    // Resolve the server address and port\n    iResult = getaddrinfo(argv[1], DEFAULT_PORT, &amp;hints, &amp;result);\n    if (iResult != 0) {\n        printf(\"getaddrinfo failed with error: %d\\n\", iResult);\n        WSACleanup();\n        return 1;\n    }\n\n    // Attempt to connect to an address until one succeeds\n    for (ptr = result; ptr != NULL; ptr = ptr-&gt;ai_next) {\n\n        // Create a SOCKET for connecting to server\n        ConnectSocket = socket(ptr-&gt;ai_family, ptr-&gt;ai_socktype,\n            ptr-&gt;ai_protocol);\n        if (ConnectSocket == INVALID_SOCKET) {\n            printf(\"socket failed with error: %ld\\n\", WSAGetLastError());\n            WSACleanup();\n            return 1;\n        }\n\n        // Connect to server.\n        iResult = connect(ConnectSocket, ptr-&gt;ai_addr, (int)ptr-&gt;ai_addrlen);\n        if (iResult == SOCKET_ERROR) {\n            closesocket(ConnectSocket);\n            ConnectSocket = INVALID_SOCKET;\n            continue;\n        }\n        break;\n    }\n\n    freeaddrinfo(result);\n\n    if (ConnectSocket == INVALID_SOCKET) {\n        printf(\"Unable to connect to server!\\n\");\n        WSACleanup();\n        return 1;\n    }\n\n    char *sendbuf = new char[DEFAULT_BUFLEN]();\n\n\n        std::cout &lt;&lt; \"In the client ready to send a command...\" &lt;&lt; std::endl;\n\n\n        cin.getline(sendbuf, DEFAULT_BUFLEN);\n\n        int size;\n        for (size = 0; sendbuf[size] != '\\0'; size++);\n\n        std::cout &lt;&lt; sendbuf &lt;&lt; std::endl;\n\n        // Send an initial buffer\n        iResult = send(ConnectSocket, sendbuf, size, 0);\n        if (iResult == SOCKET_ERROR) {\n            printf(\"send failed with error: %d\\n\", WSAGetLastError());\n            closesocket(ConnectSocket);\n            WSACleanup();\n            return 1;\n        }\n\n        printf(\"Bytes Sent: %ld\\n\", iResult);\n\n        // shutdown the connection since no more data will be sent\n        iResult = shutdown(ConnectSocket, SD_SEND);\n        if (iResult == SOCKET_ERROR) {\n            printf(\"shutdown failed with error: %d\\n\", WSAGetLastError());\n            closesocket(ConnectSocket);\n            WSACleanup();\n            return 1;\n        }\n\n        std::cout &lt;&lt; \"Command sent: \" &lt;&lt; sendbuf &lt;&lt; std::endl;\n\n        // Receive until the peer closes the connection\n        do {\n\n            iResult = recv(ConnectSocket, recvbuf, recvbuflen, 0);\n            if (iResult &gt; 0)\n                printf(\"Bytes received: %d\\n\", iResult);\n            else if (iResult == 0)\n                printf(\"Connection closed\\n\");\n            else\n                printf(\"recv failed with error: %d\\n\", WSAGetLastError());\n            std::cout &lt;&lt; iResult &lt;&lt; std::endl;\n        } while (iResult &gt; 0);\n\n    // cleanup\n    closesocket(ConnectSocket);\n    WSACleanup();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["android", "c++", "cmake"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1525332012, "post_id": 50145103, "comment_id": 87316099, "body": "The line you refers to creates (via <code>configure_file</code>) header file <code>rtptypes.h</code> under <code>src&#47;</code> subdirectory. If your C code include this header via <code>#include &lt;rtptypes.h&gt;</code>, you need to include directory with that file, that is <code>&lt;build-directory-for-jrtplib&gt;&#47;src</code>. I would also suggest to build <code>jrtplib</code> project with <code>ExternalProject_Add</code> command instead of <code>add_subdirectory</code>. So at the time your main library will be built, external project will have already be installed, and its headers (both initial and generated) will be already copied to the single directory)."}, {"owner": {"reputation": 305, "user_id": 6655884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JBKc9.jpg?s=128&g=1", "display_name": "Lucas Zanella", "link": "https://stackoverflow.com/users/6655884/lucas-zanella"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1525353920, "post_id": 50145103, "comment_id": 87330083, "body": "@Tsyvarev the add_subdirectory method ir preferable because that&#39;s what android page recommends <a href=\"https://developer.android.com/studio/projects/configure-cmake\" rel=\"nofollow noreferrer\">developer.android.com/studio/projects/configure-cmake</a> because there&#39;s no ExternalProject_Add in current android&#39;s cmake build. How do I include <code>&lt;build-directory-for-jrtplib&gt;&#47;src</code>? I don&#39;t want to include the full path."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1525355904, "post_id": 50145103, "comment_id": 87331528, "body": "The second argument for <code>add_subdirectory</code> denotes build directory of the subproject. So you may refer to the include directory with <code>${CMAKE_CURRENT_BINARY_DIR}&#47;jrtplib&#47;src</code>."}, {"owner": {"reputation": 305, "user_id": 6655884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JBKc9.jpg?s=128&g=1", "display_name": "Lucas Zanella", "link": "https://stackoverflow.com/users/6655884/lucas-zanella"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1525356638, "post_id": 50145103, "comment_id": 87332013, "body": "@Tsyvarev that&#39;s the problem. It won&#39;t find the header if I do this way. In the output, it shows all the include paths. Here&#39;s what <code>${CMAKE_CURRENT_BINARY_DIR}&#47;jrtplib&#47;src</code> produces: <code>-Ijrtplib&#47;src</code> while other <code>include_directories</code> lines produces full paths"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1525356953, "post_id": 50145103, "comment_id": 87332217, "body": "So CMake thinks that your library is built with <code>${CMAKE_CURRENT_BINARY_DIR}</code> as current directory, that is why it drop absolute part of the path. Could you show (<a href=\"https://stackoverflow.com/posts/50145103/edit\">edit</a> your question) <b>exact error message</b> you have got? With command line which is executed."}, {"owner": {"reputation": 305, "user_id": 6655884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JBKc9.jpg?s=128&g=1", "display_name": "Lucas Zanella", "link": "https://stackoverflow.com/users/6655884/lucas-zanella"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1525357005, "post_id": 50145103, "comment_id": 87332260, "body": "@Tsyvarev I think the files are not being generated. It&#39;s trying to build my library first, not JRTPLIB. But there&#39;s an explicit <code>add_dependencies(myRtspClient jrtplib-shared)</code> and such target exists on <code>..&#47;third_party&#47;JRTPLIB</code>"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1525357161, "post_id": 50145103, "comment_id": 87332379, "body": "You library is built at <i>build stage</i>, but <code>configure_file</code> generates files at <i>configure stage</i> (when <code>CMakeLists.txt</code> scripts are proceed). There should be no problem in ordering."}, {"owner": {"reputation": 305, "user_id": 6655884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JBKc9.jpg?s=128&g=1", "display_name": "Lucas Zanella", "link": "https://stackoverflow.com/users/6655884/lucas-zanella"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1525357282, "post_id": 50145103, "comment_id": 87332468, "body": "@Tsyvarev hmm, that&#39;s right. However I cannot see any of the generated headers in my current folder"}, {"owner": {"reputation": 305, "user_id": 6655884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JBKc9.jpg?s=128&g=1", "display_name": "Lucas Zanella", "link": "https://stackoverflow.com/users/6655884/lucas-zanella"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1525357290, "post_id": 50145103, "comment_id": 87332477, "body": "@Tsyvarev just updated with the exact error"}, {"owner": {"reputation": 305, "user_id": 6655884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JBKc9.jpg?s=128&g=1", "display_name": "Lucas Zanella", "link": "https://stackoverflow.com/users/6655884/lucas-zanella"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1525357488, "post_id": 50145103, "comment_id": 87332649, "body": "@Tsyvarev my current CMakeLists <a href=\"https://github.com/lucaszanella/myRtspClient/blob/b38a6aac238ecbb829377c5812257eb4173249e2/myRtspClient/CMakeLists.txt\" rel=\"nofollow noreferrer\">github.com/lucaszanella/myRtspClient/blob/&hellip;</a> (../third_party/JRTPLIB is ../third_party/jrtplib-3.9.1 in my folder )"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1525357643, "post_id": 50145103, "comment_id": 87332777, "body": "The header <code>rtpsession.h</code> <b>isn&#39;t generated</b>, it initially exists under <code>src&#47;</code> subdirectory of the subproject. So you need to refer to <i>source</i> (not <i>build</i>) directory: <code>${CMAKE_CURRENT_SOURCE_DIR}&#47;..&#47;third_party&#47;JRTPLIB&#47;src</code>. (Part <code>..&#47;third_party&#47;JRTPLIB</code> is the first argument to corresponded <code>add_subdirectory()</code> call)."}, {"owner": {"reputation": 305, "user_id": 6655884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JBKc9.jpg?s=128&g=1", "display_name": "Lucas Zanella", "link": "https://stackoverflow.com/users/6655884/lucas-zanella"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1525362816, "post_id": 50145103, "comment_id": 87336196, "body": "@Tsyvarev thanks, it worked. Now it&#39;s cmplaining about undefined references to the other library like this: <code>&#47;home&#47;project&#47;src&#47;jscam&#47;myRtspClient&#47;myRtspClient&#47;myRtpSessi&zwnj;&#8203;on.cpp:38: error: undefined reference to &#39;jrtplib::RTPGetErrorString(int)&#39;</code>. I didn&#39;t tell it to link to the other library. Why is it trying to link things?"}, {"owner": {"reputation": 305, "user_id": 6655884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JBKc9.jpg?s=128&g=1", "display_name": "Lucas Zanella", "link": "https://stackoverflow.com/users/6655884/lucas-zanella"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1525364112, "post_id": 50145103, "comment_id": 87336969, "body": "@Tsyvarev in order to build my shared library libMyRtspClient.so do I need librtp.so?"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1525368067, "post_id": 50145103, "comment_id": 87339169, "body": "As usual, when use a library, you need to link with it. As you include the library&#39;s project with <code>add_subdirectory</code>, it is better to link with the <b>library target</b>, created by the project. Most likely, the target is <code>jrtplib-shared</code> (created at <a href=\"https://github.com/j0r1/JRTPLIB/blob/master/src/CMakeLists.txt#L136\" rel=\"nofollow noreferrer\">src/CMakeLists.txt:136</a>, so link command would be <code>target_link_libraries(myRtspClient jrtplib-shared)</code>."}, {"owner": {"reputation": 305, "user_id": 6655884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JBKc9.jpg?s=128&g=1", "display_name": "Lucas Zanella", "link": "https://stackoverflow.com/users/6655884/lucas-zanella"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1525375128, "post_id": 50145103, "comment_id": 87342724, "body": "@Tsyvarev thanks, but is this linking only for verification or is librtp.so being included inside libmyrtspclient.so? I thought I only needed to link the library in the usage, not in the compilation."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1525383999, "post_id": 50145103, "comment_id": 87346550, "body": "The error &quot;undefined reference&quot; is a <b>linking error</b>, not a <i>compiling</i> one."}, {"owner": {"reputation": 305, "user_id": 6655884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JBKc9.jpg?s=128&g=1", "display_name": "Lucas Zanella", "link": "https://stackoverflow.com/users/6655884/lucas-zanella"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1525399438, "post_id": 50145103, "comment_id": 87350128, "body": "@Tsyvarev but why linking is necessary? Why CMake tries to link things?"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1525420166, "post_id": 50145103, "comment_id": 87357030, "body": "In short, linking stage adjusts &quot;connections&quot; between your library and a library, which functions you use. This is generic process when build a shared object (a library or an executable), there is no CMake-specific here. If you want to know more about linking, just google it."}], "owner": {"reputation": 305, "user_id": 6655884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JBKc9.jpg?s=128&g=1", "display_name": "Lucas Zanella", "link": "https://stackoverflow.com/users/6655884/lucas-zanella"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1525357240, "creation_date": 1525305422, "last_edit_date": 1525357240, "question_id": 50145103, "link": "https://stackoverflow.com/questions/50145103/cmake-for-android-how-to-include-header-files-generated-by-subdirectory", "title": "CMAKE for android, how to include header files generated by subdirectory", "body": "<p>I'm building a project that has <a href=\"https://github.com/j0r1/JRTPLIB\" rel=\"nofollow noreferrer\">https://github.com/j0r1/JRTPLIB</a> as a subdirectory because I need to build some things in it first before I build my project. I added a dependency based on </p>\n\n<pre><code>add_subdirectory(../third_party/JRTPLIB jrtplib)\nadd_library(myRtspClient SHARED ${SOURCES})\nadd_dependencies(myRtspClient jrtplib-shared)\n</code></pre>\n\n<p>where <code>jrtplib-shared</code> is a target in <code>../third_party/JRTPLIB</code> <code>CMakeLists</code> file. </p>\n\n<p>As you can see <a href=\"https://github.com/j0r1/JRTPLIB/blob/master/CMakeLists.txt#L182\" rel=\"nofollow noreferrer\">here</a>, some header files are generated and placed in an unconventional place. This place in my project is </p>\n\n<pre><code>android/app/.externalNativeBuild/cmake/debug/armeabi-v7a/jrtplib\n</code></pre>\n\n<p>where the <code>jrtplib</code> name comes from the line <code>add_subdirectory(../third_party/JRTPLIB jrtplib)</code></p>\n\n<p><em>note that it also generates the files into</em> <code>android/app/.externalNativeBuild/cmake/debug/x68/jrtplib</code></p>\n\n<p>I need to include the header files generated in <code>android/app/.externalNativeBuild/cmake/debug/armeabi-v7a/jrtplib</code> or <code>android/app/.externalNativeBuild/cmake/debug/x86/jrtplib</code> into my project to finish the compilation.</p>\n\n<p>I obviously tried <code>include_directories(jrtplib)</code> but it didn't work, files are not found. </p>\n\n<p>So how am I supposed to include header files generated from a subdirectory?</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<pre><code>1 error generated.\n  FAILED: /android-sdk-linux/ndk-bundle/toolchains/llvm/prebuilt/linux-x86_64/bin/clang++  --target=i686-none-linux-android --gcc-toolchain=/android-sdk-linux/ndk-bundle/toolchains/x86-4.9/prebuilt/linux-x86_64 --sysroot=/android-sdk-linux/ndk-bundle/sysroot  -DmyRtspClient_EXPORTS -I/home/project/src/jscam/myRtspClient/myRtspClient/include -I/home/project/src/jscam/myRtspClient/myRtspClient/../third_party/Base64_live555/include -I/home/project/src/jscam/myRtspClient/myRtspClient/../third_party/md5/include -Ijrtplib/src -isystem /android-sdk-linux/ndk-bundle/sources/cxx-stl/gnu-libstdc++/4.9/include -isystem /android-sdk-linux/ndk-bundle/sources/cxx-stl/gnu-libstdc++/4.9/libs/x86/include -isystem /android-sdk-linux/ndk-bundle/sources/cxx-stl/gnu-libstdc++/4.9/include/backward -isystem /android-sdk-linux/ndk-bundle/sysroot/usr/include/i686-linux-android -D__ANDROID_API__=16 -g -DANDROID -ffunction-sections -funwind-tables -fstack-protector-strong -no-canonical-prefixes -mstackrealign -Wa,--noexecstack -Wformat -Werror=format-security   -O0 -fno-limit-debug-info  -fPIC -MD -MT CMakeFiles/myRtspClient.dir/MediaSession.cpp.o -MF CMakeFiles/myRtspClient.dir/MediaSession.cpp.o.d -o CMakeFiles/myRtspClient.dir/MediaSession.cpp.o -c /home/project/src/jscam/myRtspClient/myRtspClient/MediaSession.cpp\n  In file included from /home/project/src/jscam/myRtspClient/myRtspClient/MediaSession.cpp:17:\n  /home/project/src/jscam/myRtspClient/myRtspClient/include/myRtpSession.h:19:10: fatal error: 'rtpsession.h' file not found\n  #include \"rtpsession.h\"\n           ^~~~~~~~~~~~~~\n  1 error generated.\n  ninja: build stopped: subcommand failed.\n</code></pre>\n"}, {"tags": ["c++", "linux", "mkdir", "ofstream"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 1, "creation_date": 1525305097, "post_id": 50145052, "comment_id": 87308224, "body": "Can you check the return on <code>mkdir</code>? It should be 0 if successful (and if not you should use <code>strerror</code> right there before even trying to open a file)."}, {"owner": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1525305384, "post_id": 50145052, "comment_id": 87308289, "body": "@scohe001 - Updated code per your suggestion: <code>mkdir()</code> shows success."}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1525306330, "post_id": 50145052, "comment_id": 87308496, "body": "You need to run your program with a &quot;super user&quot; privilege."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 2, "creation_date": 1525306552, "post_id": 50145052, "comment_id": 87308529, "body": "@raindrop7 \u201cPermission denied\u201d doesn\u2019t always mean you\u2019re missing a <code>sudo</code>"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1525307167, "post_id": 50145052, "comment_id": 87308653, "body": "<code>mkdir()</code> did <i>not</i> fail."}, {"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1525316562, "post_id": 50145052, "comment_id": 87310723, "body": "You should not use sudo indiscriminately. Most likely there is a way to accomplish what you want without sudo."}], "answers": [{"tags": [], "owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "is_accepted": true, "score": 4, "last_activity_date": 1525385307, "last_edit_date": 1525385307, "creation_date": 1525305445, "answer_id": 50145107, "question_id": 50145052, "link": "https://stackoverflow.com/questions/50145052/why-does-mkdir-followed-by-ofstreamoperator-fail-with-permission-denied/50145107#50145107", "title": "Why does mkdir() followed by ofstream::operator&lt;&lt; fail with permission denied?", "body": "<p>You <a href=\"https://unix.stackexchange.com/a/21263\">need execution permissions</a> to access the contents of a directory. Change your permission argument to something like 0755.</p>\n\n<p>If you have read without execute, you can enumerate the elements of a directory but you can't access them. Write without execute is meaningless on directories.</p>\n"}], "owner": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 50145107, "answer_count": 1, "score": -1, "last_activity_date": 1525385307, "creation_date": 1525304960, "last_edit_date": 1525305350, "question_id": 50145052, "link": "https://stackoverflow.com/questions/50145052/why-does-mkdir-followed-by-ofstreamoperator-fail-with-permission-denied", "title": "Why does mkdir() followed by ofstream::operator&lt;&lt; fail with permission denied?", "body": "<p>The following supposed-to-be-simple program fails with <code>errno 13: Permission denied</code>. There's something about file/directory permissions I'm not seeing or understanding; can anyone help identify the problem?</p>\n\n<p><strong>Preface</strong></p>\n\n<pre><code>&gt;whoami\nusera\n&gt;cd ~\n&gt;mkdir abc\n&gt;ls -ld abc\ndrwxrwxr-x 2 usera usera 4096 May  2 16:36 abc\n&gt;cd abc\n</code></pre>\n\n<p><strong>Code (in the current, i.e. \"abc\" directory)</strong></p>\n\n<pre><code>//main.cpp\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;cerrno&gt;\n#include &lt;cstdio&gt;\n#include &lt;cstring&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/types.h&gt;\n\nint main( int argc, char* argv[] )\n{\n  const std::string path = \"./foo/\";\n  int result = 0;\n  errno = 0;\n\n  result = mkdir( path.c_str(), 0666 );\n  std::cout &lt;&lt; result &lt;&lt; \": \" &lt;&lt; errno &lt;&lt; \": \" &lt;&lt; strerror( errno ) &lt;&lt; std::endl;\n  std::string tmp = path + \"fooFile\";\n  std::ofstream ofs( tmp.c_str(), std::ofstream::out );\n  ofs &lt;&lt; \"hello, world!\";\n  std::cout &lt;&lt; std::boolalpha &lt;&lt; ofs.good() &lt;&lt; std::endl;\n  ofs.close();\n  std::cout &lt;&lt; result &lt;&lt; \": \" &lt;&lt; errno &lt;&lt; \": \" &lt;&lt; strerror( errno ) &lt;&lt; std::endl;\n  return 0;\n}\n</code></pre>\n\n<p><strong>Execution</strong></p>\n\n<pre><code>&gt;ls -l\ntotal 4\n-rw-rw-r-- 1 usera usera 585 May  2 16:39 main.cpp\n\n&gt;g++ --version\ng++ (GCC) 4.8.3 20140911 (Red Hat 4.8.3-7)\nCopyright (C) 2013 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\n&gt;g++ -g main.cpp &amp;&amp; ./a.out\n0: 0: Success\nfalse\n0: 13: Permission denied\n&gt;\n&gt;ls -l\ntotal 52\n-rwxrwxr-x 1 usera usera 41844 May  2 16:44 a.out\ndrw-rw-r-- 2 usera usera  4096 May  2 16:44 foo\n-rw-rw-r-- 1 usera usera   585 May  2 16:39 main.cpp\n</code></pre>\n\n<p>The error is telling me <em>something</em> RE: file/directory permissions is wrong, but I can't see what. From the <code>ls</code> output, it looks to me that all files are owned by me, so I'm unclear why a permission denied error should occur. Please enlighten me what's wrong here.</p>\n"}, {"tags": ["c++", "arduino", "atmega"], "comments": [{"owner": {"reputation": 12296, "user_id": 461597, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7fa573d21875f5b980a2d81c695c71f3?s=128&d=identicon&r=PG", "display_name": "Unapiedra", "link": "https://stackoverflow.com/users/461597/unapiedra"}, "edited": false, "score": 2, "creation_date": 1525303739, "post_id": 50144855, "comment_id": 87307951, "body": "What <code>String</code> type is this? Also, use a serialization library/framework! <a href=\"https://stackoverflow.com/a/11486538/461597\">stackoverflow.com/a/11486538/461597</a> uses protobuf for arduino."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1525303982, "post_id": 50144915, "comment_id": 87308003, "body": "This will work, assuming <code>String</code> even has a <code>c_str()</code> method that returns a pointer to the raw character data, and it is using 8-bit characters. If <code>String</code> is using 16/32-bit characters instead, you will have to multiple the <code>length</code> by the character size, assuming the library is expecting a byte count and not a character count. Or encode the <code>String</code> data to an 8-bit format, like UTF-8. Also, you probably should be casting to a <code>const</code> pointer"}, {"owner": {"reputation": 954, "user_id": 1854114, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/7071c25eecdca7d088286afaae2d342e?s=128&d=identicon&r=PG", "display_name": "Ricardo Alves", "link": "https://stackoverflow.com/users/1854114/ricardo-alves"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1525304075, "post_id": 50144915, "comment_id": 87308025, "body": "For arduino, it indeed uses 8bit characters on strings."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1525304196, "post_id": 50144915, "comment_id": 87308046, "body": "The Arduino might be using 8-bit strings, but the OP didn&#39;t say which <code>String</code> class is being used in his C++ code. <code>String</code> is not a standard C++ string (that would be <code>std::string</code> instead). For all we know, <code>String</code> could be a 3rd party Unicode string class instead."}, {"owner": {"reputation": 954, "user_id": 1854114, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/7071c25eecdca7d088286afaae2d342e?s=128&d=identicon&r=PG", "display_name": "Ricardo Alves", "link": "https://stackoverflow.com/users/1854114/ricardo-alves"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1525304328, "post_id": 50144915, "comment_id": 87308076, "body": "Yes you are right, but I highly doubt it since memory on microprocessors are a very very very precious resource. Still, it really can be."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1525304370, "post_id": 50144915, "comment_id": 87308081, "body": "The pointer returned from <code>c_str()</code> could also be invalid immediately. Better to copy the data to make sure it stays valid until the response is completed."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1525304432, "post_id": 50144915, "comment_id": 87308086, "body": "@RetiredNinja that would only be the case if <code>testString</code> is modified, or goes out out scope, after <code>c_str()</code> is called and before the character data is read from <code>pointer</code>. If you do something like <code>ZBTxRequest txReq(coordinatorAddr64, (uint8_t*)testString.c_str(), testString.length());</code>, that would certainly not be the case."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1525304539, "post_id": 50144915, "comment_id": 87308103, "body": "@RemyLebeau Not necessarily. Without knowing how the underlying class is implemented you can&#39;t be sure unless it offers the same guarantees as <code>std::string</code>. There are implementations that construct the null terminated buffer on demand, and you either copy it or lose it."}, {"owner": {"reputation": 283, "user_id": 3866107, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000166929231/picture?type=large", "display_name": "Phillip McMullen", "link": "https://stackoverflow.com/users/3866107/phillip-mcmullen"}, "edited": false, "score": 0, "creation_date": 1525370403, "post_id": 50144915, "comment_id": 87340387, "body": "Worked like a charm, thanks everyone! It was an arduino String class FYI for anyone referencing this."}], "tags": [], "owner": {"reputation": 954, "user_id": 1854114, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/7071c25eecdca7d088286afaae2d342e?s=128&d=identicon&r=PG", "display_name": "Ricardo Alves", "link": "https://stackoverflow.com/users/1854114/ricardo-alves"}, "is_accepted": true, "score": 2, "last_activity_date": 1525305149, "last_edit_date": 1525305149, "creation_date": 1525303749, "answer_id": 50144915, "question_id": 50144855, "link": "https://stackoverflow.com/questions/50144855/how-can-i-convert-a-string-to-a-uint8-t-in-c-arduino-c/50144915#50144915", "title": "How can I convert a String to a uint8_t in C++ (Arduino/C++)?", "body": "<p>Yes there is.</p>\n\n<p>Do something like this:</p>\n\n<pre><code>String testString = \"Test String\";\nuint8_t* pointer = (uint8_t*)testString.c_str();\nint length = testString.length();\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>You should apply it to your problem as follows:</p>\n\n<pre><code>String testString = \"Test String\";\nuint8_t* pointer = (uint8_t*)testString.c_str();\nint length = testString.length();\n\nZBTxRequest txReq = ZBTxRequest(coordinatorAddr64, pointer, length);   \nZBTxStatusResponse txResp = ZBTxStatusResponse();\n\nxbee.send(txReq);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "is_accepted": false, "score": 1, "last_activity_date": 1525305504, "last_edit_date": 1525305504, "creation_date": 1525303964, "answer_id": 50144935, "question_id": 50144855, "link": "https://stackoverflow.com/questions/50144855/how-can-i-convert-a-string-to-a-uint8-t-in-c-arduino-c/50144935#50144935", "title": "How can I convert a String to a uint8_t in C++ (Arduino/C++)?", "body": "<p>You can write your array like this:</p>\n\n<pre><code>uint8_t testCmd[] = R\"({\"T\":\"A1\",\"E\":-1,\"I\":[[1,[[[[250,2],[0,4]]]]]]})\";\n</code></pre>\n\n<p>The difference is that it will have 48 elements instead of 47 like your original one, because of terminating 0. Since you are providing the length of packet you could -1 it:</p>\n\n<pre><code>ZBTxRequest txReq = ZBTxRequest(coordinatorAddr64, testCmd, sizeof(testCmd) - 1);   \nZBTxStatusResponse txResp = ZBTxStatusResponse();\n\nxbee.send(txReq);\n</code></pre>\n\n<p>Looking at Arduino reference. <code>String</code> object has <a href=\"https://www.arduino.cc/reference/en/language/variables/data-types/string/functions/c_str/\" rel=\"nofollow noreferrer\">c_str()</a> method as well as <a href=\"https://www.arduino.cc/reference/en/language/variables/data-types/string/functions/length/\" rel=\"nofollow noreferrer\">length()</a>. So you can simply try:</p>\n\n<pre><code>String testCmd R\"({\"T\":\"A1\",\"E\":-1,\"I\":[[1,[[[[250,2],[0,4]]]]]]})\";\n\nZBTxRequest txReq = ZBTxRequest(coordinatorAddr64, (uint8_t *)testCmd.c_str(), (uint8_t)testCmd.length());   \nZBTxStatusResponse txResp = ZBTxStatusResponse();\n\nxbee.send(txReq);\n</code></pre>\n"}], "owner": {"reputation": 283, "user_id": 3866107, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000166929231/picture?type=large", "display_name": "Phillip McMullen", "link": "https://stackoverflow.com/users/3866107/phillip-mcmullen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1490, "favorite_count": 0, "accepted_answer_id": 50144915, "answer_count": 2, "score": 1, "last_activity_date": 1525305504, "creation_date": 1525303165, "last_edit_date": 1525303353, "question_id": 50144855, "link": "https://stackoverflow.com/questions/50144855/how-can-i-convert-a-string-to-a-uint8-t-in-c-arduino-c", "title": "How can I convert a String to a uint8_t in C++ (Arduino/C++)?", "body": "<p>I have a string: <code>String outputValue = \"\"</code> that I then append to to build a JSON-like structure to send to a remote device. This code runs on an ATMEGA328P using the Arduino bootloader. I append values by doing <code>outputValue += \"hello\"</code>.</p>\n\n<p>The library I am using to send the values needs a <code>uint8_t *</code> for it's payload with the associated length of that payload. Is there any way to cast/convert this String to a uint8_t array or is there a preferred way to do a builder rather than using String? I'm open to any suggestions</p>\n\n<p>My working code that I used to test the library has the following. Note, this is just the result of me copying the raw outputValue to Notepad, enclosing each character in single quotes, then hardcoding this new array to test:</p>\n\n<pre><code>uint8_t testCmd[] = { '{', '\"', 'T', '\"', ':', '\"', 'A', '1', '\"', ',', '\"', 'E', '\"', ':', '-', '1', ',', '\"', 'I', '\"', ':', '[', '[', '1', ',', '[', '[', '[', '[', '2', '5', '0', ',', '2', ']', ',', '[', '0', ',', '4', ']', ']', ']', ']', ']', ']', '}' };\n\nZBTxRequest txReq = ZBTxRequest(coordinatorAddr64, testCmd, sizeof(testCmd));   \nZBTxStatusResponse txResp = ZBTxStatusResponse();\n\nxbee.send(txReq);\n</code></pre>\n"}, {"tags": ["c++", "ns-3"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3261338"}, "is_accepted": false, "score": -1, "last_activity_date": 1533420727, "creation_date": 1533420727, "answer_id": 51689906, "question_id": 50144833, "link": "https://stackoverflow.com/questions/50144833/obtaining-simple-metrics-from-ns3-like-throughput-vs-time-packet-loss-vs-time/51689906#51689906", "title": "Obtaining simple metrics from NS3 like throughput vs time, packet loss vs time", "body": "<p>NS-3 provides a <code>gnuplot</code> library that you can use to plot what you want.\nSee reference <a href=\"https://www.nsnam.org/docs/manual/html/gnuplot.html\" rel=\"nofollow noreferrer\">here</a> (with examples).</p>\n\n<p>There are also plenty of other examples of how to accomplish this. Take a look at the NS-3 Users mailing list on Google Groups.</p>\n"}], "owner": {"reputation": 11, "user_id": 9732649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b347a61f4cc74ed5d90d906334b154a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mavimo", "link": "https://stackoverflow.com/users/9732649/mavimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 483, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1533420727, "creation_date": 1525303013, "question_id": 50144833, "link": "https://stackoverflow.com/questions/50144833/obtaining-simple-metrics-from-ns3-like-throughput-vs-time-packet-loss-vs-time", "title": "Obtaining simple metrics from NS3 like throughput vs time, packet loss vs time", "body": "<p>I'm never used NS3 before and I have a school assignment to plot throughput vs time and packet loss vs time. I know that just by running fifth.cc I'll get the congestion window data. I noticed I can see all the instances where a packet was dropped and I manipulated that data in MATLAB to plot packet loss vs time there. How would I go about to create a piece of code that would be able to plot these 2 graphs? \nThe topology is a simple TCP source and a TCP sink.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1525302779, "post_id": 50144736, "comment_id": 87307745, "body": "This question was marked as a duplicate of <a href=\"https://stackoverflow.com/questions/4239993/determining-endianness-at-compile-time\" title=\"determining endianness at compile time\">stackoverflow.com/questions/4239993/&hellip;</a>, but that question is for C not C++."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1525303187, "post_id": 50144736, "comment_id": 87307838, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1001307/detecting-endianness-programmatically-in-a-c-program\">Detecting endianness programmatically in a C++ program</a>"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1525303436, "post_id": 50144736, "comment_id": 87307874, "body": "Note that the solution presented here is the same as one in my proposed dup: <a href=\"https://stackoverflow.com/a/38141476/1896169\">stackoverflow.com/a/38141476/1896169</a>"}, {"owner": {"reputation": 779, "user_id": 9220132, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70Mx.jpg?s=128&g=1", "display_name": "jwm", "link": "https://stackoverflow.com/users/9220132/jwm"}, "edited": false, "score": 0, "creation_date": 1525303482, "post_id": 50144736, "comment_id": 87307885, "body": "my guess is that you want to know the endianness <i>so that</i> ...? Most things that depend on byte order really want to translate from one to the other. This is exactly what the <a href=\"https://stackoverflow.com/questions/30386769/when-and-how-to-use-c-htonl-function\">htonl</a> and related functions are for. I&#39;m not discounting the question for other valid cases, but don&#39;t reinvent the wheel if you don&#39;t need to!"}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1525303589, "post_id": 50144736, "comment_id": 87307905, "body": "@Justin there is <a href=\"https://stackoverflow.com/a/38141476/1013719\">an answer there that uses std::endian</a>, but the question doesn&#39;t specifically ask for a compile-time solution, it seems lost in the noise. The question itself isn&#39;t a duplicate, does it become a duplicate when someone provides that answer?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1525304284, "post_id": 50144736, "comment_id": 87308065, "body": "@RyanHaining I&#39;m never actually sure TBH. In this case, I believe this is a good duplicate, because many of the answers over there give compile-time solutions, as the desire for compile-time endianness detection is such a natural extension of the question"}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1525304492, "post_id": 50144736, "comment_id": 87308097, "body": "@Justin are there other portable compile-time solutions? The only other I see uses a union illegally. I&#39;d be very interested if another one exists."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1525304594, "post_id": 50144736, "comment_id": 87308119, "body": "@RyanHaining Best alternative I know of is Boost: <a href=\"https://stackoverflow.com/a/32513998/1896169\">stackoverflow.com/a/32513998/1896169</a> . I can&#39;t remember the exact Boost header or the macro it defines"}], "answers": [{"comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1525303396, "post_id": 50144737, "comment_id": 87307863, "body": "<code>!= little</code> does not strictly imply big-endian. There are some less common strange byte orders out there."}], "tags": [], "owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "is_accepted": true, "score": 10, "last_activity_date": 1525304704, "last_edit_date": 1525304704, "creation_date": 1525302272, "answer_id": 50144737, "question_id": 50144736, "link": "https://stackoverflow.com/questions/50144736/how-to-determine-endianness-at-compile-time/50144737#50144737", "title": "How to determine endianness at compile-time?", "body": "<p>C++20 adds <a href=\"http://en.cppreference.com/w/cpp/types/endian\" rel=\"noreferrer\"><code>std::endian</code></a> to <code>&lt;type_traits&gt;</code> which can be used in a constexpr context.</p>\n\n<p><a href=\"https://wandbox.org/permlink/GRrwDE4BY1xFVR6m\" rel=\"noreferrer\">Live example of below code</a>:</p>\n\n<pre><code>if constexpr (std::endian::native == std::endian::little) {\n    std::cout &lt;&lt; \"litle endian\\n\";\n} else if constexpr(std::endian::native == std::endian::big) {\n    std::cout &lt;&lt; \"big endian\\n\";\n} else {\n    std::cout &lt;&lt; \"something silly\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 678, "favorite_count": 1, "accepted_answer_id": 50144737, "answer_count": 1, "score": 6, "last_activity_date": 1525304704, "creation_date": 1525302272, "last_edit_date": 1525303659, "question_id": 50144736, "link": "https://stackoverflow.com/questions/50144736/how-to-determine-endianness-at-compile-time", "title": "How to determine endianness at compile-time?", "body": "<p>How can I determine at compile time if my platform is little endian or big endian? I have seen many ways to determine at runtime using casting, and some platform-dependent options. Is there a portable or standard way to do this?</p>\n\n<pre><code>constexpr bool is_little_endian = ?;\n</code></pre>\n"}, {"tags": ["c++", "boost-python", "programmers-notepad"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1525303744, "post_id": 50144712, "comment_id": 87307953, "body": "Boost can figure out what libraries need to be linked when you build it.  So basic diagnostic here is that you did not rebuild boost.  Who does, nobody enjoys chewing tin-foil.  Consider passing to job to <a href=\"https://sourceforge.net/projects/boost/files/boost-binaries/\" rel=\"nofollow noreferrer\">somebody else</a>."}, {"owner": {"reputation": 359, "user_id": 2524721, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/FX61N.png?s=128&g=1", "display_name": "nickdmax", "link": "https://stackoverflow.com/users/2524721/nickdmax"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1525306160, "post_id": 50144712, "comment_id": 87308458, "body": "So by going to &quot;Property manager&quot; and looking at the project properties &gt; Linker &gt; All Options and found the library.  But now I have <code>LINK : fatal error LNK1104: cannot open file &#39;boost_pythonPY_MAJOR_VERSIONPY_MINOR_VERSION-vc140-mt-gd-x3&zwnj;&#8203;2-1_67.lib&#39;</code> which I bet is happening because the PY_MAJOR_VERSION and PY_MINOR_VERSION are not defined somewhere..."}, {"owner": {"reputation": 359, "user_id": 2524721, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/FX61N.png?s=128&g=1", "display_name": "nickdmax", "link": "https://stackoverflow.com/users/2524721/nickdmax"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1525306344, "post_id": 50144712, "comment_id": 87308500, "body": "I only have boost 1_67 and it was just downloaded and built and all of the libraries are there. It was not boost but just some project property plugged in to the configuration."}], "answers": [{"tags": [], "owner": {"reputation": 359, "user_id": 2524721, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/FX61N.png?s=128&g=1", "display_name": "nickdmax", "link": "https://stackoverflow.com/users/2524721/nickdmax"}, "is_accepted": true, "score": 0, "last_activity_date": 1525714976, "creation_date": 1525714976, "answer_id": 50219742, "question_id": 50144712, "link": "https://stackoverflow.com/questions/50144712/visualstudio-2015-linker-looking-for-vs-2010-library/50219742#50219742", "title": "VisualStudio 2015 linker looking for VS 2010 library", "body": "<p>Under Visual Studio Boost uses boost/configure/auto_link.hpp to generate the library names and add them to the linker's dependencies. One of the arguments to this bit of code is BOOST_LIB_NAME which for boost::python is defined in boost/python/detail/config.hpp. In version 1_67_0 this is currently: </p>\n\n<p><code>#define BOOST_LIB_NAME boost_python##PY_MAJOR_VERSION##PY_MINOR_VERSION</code></p>\n\n<p>Where the python patchlevel.h has the definitions for PY_MAJOR_VERSION and PY_MINOR_VERSION.</p>\n\n<p>This means that the library name itself does not need to explicitly added to the your Visual Studio project. Just the path to the boost libraries directory.</p>\n\n<p>For me I needed to remove any (boost) library names from: </p>\n\n<ul>\n<li>Configuration Properties > Linker > Input > Additional Dependencies</li>\n<li>Configuration Properties > Linker > All Options > Additional Dependencies</li>\n</ul>\n\n<p>And needed to ensure that I built boost::python with the shared (dll) libraries since I would building a DLL. The static libraries are libboost*.lib and the shared libraries are boost*.lib. To force the generation of the shared libraries I used:</p>\n\n<p><code>C:\\dev\\boost\\boost_1_67_0&gt; b2.exe link=shared,static --with-python -a</code></p>\n"}], "owner": {"reputation": 359, "user_id": 2524721, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/FX61N.png?s=128&g=1", "display_name": "nickdmax", "link": "https://stackoverflow.com/users/2524721/nickdmax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 50219742, "answer_count": 1, "score": 0, "last_activity_date": 1525714976, "creation_date": 1525302000, "question_id": 50144712, "link": "https://stackoverflow.com/questions/50144712/visualstudio-2015-linker-looking-for-vs-2010-library", "title": "VisualStudio 2015 linker looking for VS 2010 library", "body": "<p>I am trying to compile a old VS2010 project in VS2015 with boost.python 1_67_0 from 1_53 and python 35.</p>\n\n<p>Getting it compile was not too hard, just a few tweaks to include path and updating a couple of python 2 string handling to python 3. </p>\n\n<p>But I am stuck on linking because the linker fails at:</p>\n\n<p><code>LINK : fatal error LNK1104: cannot open file 'boost_python-vc100-mt-gd-1_67.lib'</code></p>\n\n<p>Which really does not make sense because the library version should be vc140. In the library path there does exist libboost_python35-vc140-mt-gd-x32-1_67.lib and a few others libboost_python35-vc140* options.</p>\n\n<p>Where is it getting the name 'boost_python-vc100-mt-gd-1_67.lib' from? (i.e. is this something I missed in the configuration?)</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 1093, "user_id": 6625159, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d170111b6983c197263ec56f7090506f?s=128&d=identicon&r=PG&f=1", "display_name": "souki", "link": "https://stackoverflow.com/users/6625159/souki"}, "edited": false, "score": 1, "creation_date": 1525302149, "post_id": 50144685, "comment_id": 87307625, "body": "I don&#39;t think you should and/or can initialize a vector when defining it. And, setting a vector size in a header file is bad practice.Why not doing it in your class constructor, as follow : m_ray_fbos.reserve(5)?"}, {"owner": {"reputation": 1093, "user_id": 6625159, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d170111b6983c197263ec56f7090506f?s=128&d=identicon&r=PG&f=1", "display_name": "souki", "link": "https://stackoverflow.com/users/6625159/souki"}, "edited": false, "score": 1, "creation_date": 1525302843, "post_id": 50144685, "comment_id": 87307763, "body": "You can have a look at this question to understand why it is not working : <a href=\"https://stackoverflow.com/questions/29298026/stdvector-size-in-header\" title=\"stdvector size in header\">stackoverflow.com/questions/29298026/stdvector-size-in-heade&zwnj;&#8203;r</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "is_accepted": false, "score": 3, "last_activity_date": 1525302928, "creation_date": 1525302928, "answer_id": 50144824, "question_id": 50144685, "link": "https://stackoverflow.com/questions/50144685/how-to-initialize-a-vector-to-a-certain-length-in-a-class/50144824#50144824", "title": "How to initialize a vector to a certain length in a class?", "body": "<p>You can initialise your vector via member initialisation list:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nclass MyClass\n{\n    std::vector&lt;int&gt; m_ray_fbos;\npublic:\n\n    MyClass() : m_ray_fbos(5) {}\n    size_t GetSize() const\n    {\n        return m_ray_fbos.size();\n    }\n};\n\nint main()\n{\n    MyClass c;\n    std::cout &lt;&lt; c.GetSize() &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/QTOs7l\" rel=\"nofollow noreferrer\">https://ideone.com/QTOs7l</a></p>\n\n<p><code>5</code></p>\n"}, {"tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": true, "score": 2, "last_activity_date": 1525303204, "creation_date": 1525303204, "answer_id": 50144862, "question_id": 50144685, "link": "https://stackoverflow.com/questions/50144685/how-to-initialize-a-vector-to-a-certain-length-in-a-class/50144862#50144862", "title": "How to initialize a vector to a certain length in a class?", "body": "<p>The <code>()</code> parentheses style of initializer is not permitted by the syntax for a member within a class definition.  (I'm not really certain why.)  The only valid forms of initializer for members within the class definition are the <code>{}</code> braced initializer-list or an initializer that starts with <code>=</code>.</p>\n\n<p>And that gets in your way here, since:</p>\n\n<pre><code>std::vector&lt;int&gt; m_ray_fbos{5};\n</code></pre>\n\n<p>or</p>\n\n<pre><code>std::vector&lt;int&gt; m_ray_fbos = {5};\n</code></pre>\n\n<p>call the wrong <code>vector</code> constructor and don't give the results you want.  And</p>\n\n<pre><code>std::vector&lt;int&gt; m_ray_fbos = 5;\n</code></pre>\n\n<p>won't work because the constructor you need is <code>explicit</code>, and the <code>=</code> symbol makes that copy initialization, so <code>explicit</code> constructors are not considered.</p>\n\n<p>The simplest answer is probably</p>\n\n<pre><code>std::vector&lt;int&gt; m_ray_fbos = std::vector&lt;int&gt;(5);\n</code></pre>\n\n<p>You could maybe also do something like</p>\n\n<pre><code>std::vector&lt;int&gt; m_ray_fbos = vec_of_size(5);\n</code></pre>\n\n<p>if you had enough other reasons to write or use a <code>vec_of_size</code> class function or free function.</p>\n"}], "owner": {"reputation": 10194, "user_id": 3291506, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/fr49T.png?s=128&g=1", "display_name": "Startec", "link": "https://stackoverflow.com/users/3291506/startec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 1, "accepted_answer_id": 50144862, "answer_count": 2, "score": 2, "last_activity_date": 1525303204, "creation_date": 1525301813, "question_id": 50144685, "link": "https://stackoverflow.com/questions/50144685/how-to-initialize-a-vector-to-a-certain-length-in-a-class", "title": "How to initialize a vector to a certain length in a class?", "body": "<p>I have a simple class with a member that is a vector.  I want to initialize that vector to have a specific size in the class, but I get an error.  Here is my code:</p>\n\n<pre><code>class MyClass\n{\nprivate:\nstd::vector&lt;int&gt; m_ray_fbos(5);\n}\n</code></pre>\n\n<p>This gives me the warning (in Visual Studio 2017) <code>expected a typed identifier</code></p>\n\n<p>I have also tried <code>std::vector&lt;int&gt; m_ray_fbos(5, 0);</code></p>\n\n<p>The only think I can get to work is <code>std::vector&lt;int&gt; m_ray_fbos = { 0, 0, 0, 0, 0 };</code> but obviously this is not ideal for long vectors.</p>\n\n<p>Am I doing something wrong?</p>\n\n<p>Is there a way to specify the size of a vector in a class definition?</p>\n"}, {"tags": ["c++", "iterator"], "comments": [{"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 2, "creation_date": 1525301617, "post_id": 50144640, "comment_id": 87307514, "body": "What errors do you get? Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and include the full error output."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1525303625, "post_id": 50144640, "comment_id": 87307921, "body": "<code>typename StoreT::const_iterator begin()</code> since  <code>StoreT</code> is a dependent name.  Same for <code>end()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 18650, "user_id": 130673, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d3508acf4d55c7c659be1139c814677?s=128&d=identicon&r=PG&f=1", "display_name": "csj", "link": "https://stackoverflow.com/users/130673/csj"}, "is_accepted": false, "score": 1, "last_activity_date": 1525367712, "last_edit_date": 1525367712, "creation_date": 1525305195, "answer_id": 50145075, "question_id": 50144640, "link": "https://stackoverflow.com/questions/50144640/c-iterator-of-type/50145075#50145075", "title": "c++ iterator of type", "body": "<p>You haven't yet provided a complete error dump, and your posted code is clearly an excerpt, so I'm going point out some things that might already be looked after.</p>\n\n<p>Ensure you're including vector and iostream.</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n</code></pre>\n\n<p>You're explicitly providing the std namespace when you reference vector, but not when you use cout. Do you have a \"using namespace std;\" somewhere that makes this possible? If not, then you need</p>\n\n<pre><code>std::cout&lt;&lt;*it1&lt;&lt;*it2; //just an example\n</code></pre>\n\n<p>Store doesn't yet define const_iterator, so your definitions of it1 and it2 are not valid. You need either a typedef or using statement in the public section of Store:</p>\n\n<pre><code>public:\nusing const_iterator = typename StoreT::const_iterator;\n</code></pre>\n\n<p>Also, you're missing the typename keyword and some semi-colons.</p>\n\n<pre><code>typename StoreT::const_iterator begin() {return data.begin();}\ntypename StoreT::const_iterator end() {return data.end();}\n</code></pre>\n\n<p>Can I assume t1 and t2 are both defined somewhere?</p>\n"}], "owner": {"reputation": 1, "user_id": 9732595, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "c660pro", "link": "https://stackoverflow.com/users/9732595/c660pro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525367712, "creation_date": 1525301470, "last_edit_date": 1525302392, "question_id": 50144640, "link": "https://stackoverflow.com/questions/50144640/c-iterator-of-type", "title": "c++ iterator of type", "body": "<p>I have to write a container template class that has a const iterator, but I have to make it so that it is actually an stl container's iterator which I refer to as a template parameter.</p>\n\n<pre><code>template &lt;typename T, class StoreT = std::vector&lt;T&gt;&gt; \nclass Store {\n    StoreT data;\npublic:\n    StoreT::const_iterator begin() {return data.begin()}\n    StoreT::const_iterator end() {return data.end()}\n    //other stuff\n}; \n</code></pre>\n\n<p>it is called this way:</p>\n\n<pre><code>Store&lt;Foo&gt;::const_iterator it1, it2;\n    for (it1 = t1.begin(), it2 = t2.begin(); it1 != t1.end(); ++it1,++it2)\n        cout&lt;&lt;*it1&lt;&lt;*it2; //just an example\n</code></pre>\n\n<p>I get lots of errors, and I can't figure out how should I make it work. I need to make it for school, in five hours. Any help would be much appreciated.\nWhat is wrong, and what should I do to make it work? </p>\n"}, {"tags": ["python", "c++", "numpy", "scipy", "shared-libraries"], "owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1525302129, "creation_date": 1525301055, "last_edit_date": 1525302129, "question_id": 50144595, "link": "https://stackoverflow.com/questions/50144595/scipy-numpy-distutils-based-setup-py-ctypes-undefined-symbol", "title": "scipy + (numpy.distutils-based) setup.py + ctypes: undefined symbol", "body": "<h3>Intro</h3>\n\n<p>As a follow-up to my earlier question <a href=\"https://stackoverflow.com/questions/50139483/scipy-ctypes-build-config-how-to-load-lib\">here</a>, i still try to:</p>\n\n<ul>\n<li>add new functionality to one of scipy's modules (e.g. <code>scipy.optimize</code>)</li>\n<li>based on C++-code\n\n<ul>\n<li>which defines an interface-function to be called with <a href=\"https://docs.python.org/3/library/ctypes.html\" rel=\"nofollow noreferrer\">ctypes</a></li>\n</ul></li>\n<li>automatically setup through <code>setup.py</code> in <code>scipy/optimize</code></li>\n</ul>\n\n<h3>Code incorporation</h3>\n\n<p>To keep it simple, let's assume we got the following (dumb and) simple C++-code:</p>\n\n<pre><code>extern \"C\" void hallo()\n{\n    int a = 0;\n}\n</code></pre>\n\n<p>where we use the <code>extern</code> keyword to handle name-mangling.</p>\n\n<p>We introduce new files and folders in <code>scipy.optimize</code>:</p>\n\n<pre><code>scipy/optimize/__init__py\nscipy/optimize/lbfgsb/...\nscipy/optimize/lbfgsb.py\n...\nscipy/optimize/_mylib/README.md       # new\nscipy/optimize/_mylib/LICENSE         # new\nscipy/optimize/_mylib/src/debug.cpp   # new\nscipy/optimize/mylib.py               # new\n</code></pre>\n\n<h3>Setup preparation</h3>\n\n<p>We prepare the module-setup in <code>scipy/optimize/setup.py</code>:</p>\n\n<pre><code>from __future__ import division, print_function, absolute_import\n\nfrom os.path import join\n\nfrom scipy._build_utils import numpy_nodepr_api\n\ndef configuration(parent_package='',top_path=None):\n    from numpy.distutils.misc_util import Configuration\n    from numpy.distutils.system_info import get_info\n    config = Configuration('optimize',parent_package, top_path)\n\n    # MODIFICATION START\n    # OTHER EXTENSIONS OMITTED \n    # INSPIRED BY scipy.spatial: ckdtree/src &amp; setup.py\n\n    mylib_src = ['debug.cpp']\n    mylib_src = [join('_mylib', 'src', x) for x in mylib_src]\n\n    mylib_headers = []\n    mylib_headers = [join('_mylib', 'src', x) for x in mylib_headers]\n\n    mylib_dep = mylib_headers + mylib_src\n\n    config.add_extension('_mylib',\n                         sources=mylib_src,\n                         depends=mylib_dep,\n                         include_dirs=[join('_mylib', 'src')])\n    # MODIFICATION END    \n\n    return config\n\nif __name__ == '__main__':\n    from numpy.distutils.core import setup\n    setup(**configuration(top_path='').todict())\n</code></pre>\n\n<h3>Run scipy install</h3>\n\n<p>Installing scipy now (from base-dir) with:</p>\n\n<pre><code>python3 setup.py build_ext --inplace\n</code></pre>\n\n<p>works and we will see those shared-libraries in <code>scipy/optimize/</code>:</p>\n\n<pre><code>_lbfgsb.cpython-35m-x86_64-linux-gnu.so\n...\n_mylib.cpython-35m-x86_64-linux-gnu.so\n</code></pre>\n\n<h3>Let's try to use it / a look into scipy/optimize/mylib.py</h3>\n\n<p>As seen in the other <a href=\"https://stackoverflow.com/questions/50139483/scipy-ctypes-build-config-how-to-load-lib\">question</a>, we can get the lib with (we are in <code>scipy/optimize/mylib.py</code>) and get the function we want to use:</p>\n\n<pre><code>import scipy as scp\nimport numpy.ctypeslib as ctl\nlib = ctl.load_library('_mylib', scp.optimize.__file__)\nmyfunc = lib.hallo\n</code></pre>\n\n<p><strong>Now here is the problem:</strong> this fails with:</p>\n\n<pre><code>AttributeError: /.../_mylib.cpython-35m-x86_64-linux-gnu.so: undefined symbol: hallo\n</code></pre>\n\n<p>Trying it per hand:</p>\n\n<pre><code>import ctypes\nlib = ctypes.CDLL('full path to above so')\nmyfun = lib.hallo\n</code></pre>\n\n<p>fails too.</p>\n\n<p><strong>But</strong>, checking (on my linux OS): <code>nm --defined-only _mylib.cpython-35m-x86_64-linux-gnu.so</code> outputs:</p>\n\n<pre><code>...\n...\n0000000000000530 t hallo\n...\n</code></pre>\n\n<p>which should be ok. (Disclaimer: i absolutely miss any knowledge about C++ linking). <strong>Edit:</strong> maybe it's not okay. See later observation in regards to <code>t vs. T</code>!</p>\n\n<h3>Doing it manually: this works</h3>\n\n<p>Going to <code>scipy/optimize/_mylib/src</code>:</p>\n\n<pre><code>g++ -shared -fPIC debug.cpp -o mylib.so\n</code></pre>\n\n<p>followed by <code>nm --defined-only mylib.so</code> shows the same functions, but some <code>t</code> became <code>T</code>.</p>\n\n<pre><code>...\n...\n0000000000000600 T hallo\n...\n</code></pre>\n\n<p>Probably this is the reason, and there is some related general question <a href=\"https://stackoverflow.com/questions/37531846/nm-symbol-output-t-vs-t-in-a-shared-so-library\">here</a>.</p>\n\n<p>As mentioned, this works:</p>\n\n<pre><code># in src\nimport numpy.ctypeslib as ctl\nlib = ctl.load_library('mylib.so', '.')\nlib.hallo\n# &lt; FuncPtr object at 0x....\n</code></pre>\n\n<p>But what needs to be done in <code>setup.py</code> or my sources to make it work? </p>\n\n<p>During running scipy-install, output looks like:</p>\n\n<pre><code>building 'scipy.optimize._mylib' extension\ncompiling C++ sources\nC compiler: x86_64-linux-gnu-g++ -pthread -DNDEBUG -g -fwrapv -O2 -Wall -g -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -fPIC\n\ncreating build/temp.linux-x86_64-3.5/scipy/optimize/_mylib\ncreating build/temp.linux-x86_64-3.5/scipy/optimize/_mylib/src\ncompile options: '-Iscipy/optimize/_mylib/src -I/usr/local/lib/python3.5/dist-packages/numpy-1.15.0.dev0+e4d678a-py3.5-linux-x86_64.egg/numpy/core/include -I/usr/include/python3.5m -c'\nx86_64-linux-gnu-g++: scipy/optimize/_mylib/src/debug.cpp\nscipy/optimize/_mylib/src/debug.cpp: In function \u2018void hallo()\u2019:\nscipy/optimize/_mylib/src/debug.cpp:3:9: warning: unused variable \u2018a\u2019 [-Wunused-variable]\n     int a = 0;\n         ^\nx86_64-linux-gnu-g++ -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -Wl,-Bsymbolic-functions -Wl,-z,relro -g -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 build/temp.linux-x86_64-3.5/scipy/optimize/_mylib/src/debug.o -Lbuild/temp.linux-x86_64-3.5 -o scipy/optimize/_mylib.cpython-35m-x86_64-linux-gnu.so -Wl,--version-script=build/temp.linux-x86_64-3.5/link-version-scipy.optimize._mylib.map\n</code></pre>\n"}, {"tags": ["c++", "arrays", "pointers"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1525300603, "post_id": 50144519, "comment_id": 87307255, "body": "Pointers take a bit of brain-wrapping. Best advice for just about any case where pointers come into play and bring confusion is to draw pictures."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 4, "creation_date": 1525300605, "post_id": 50144519, "comment_id": 87307257, "body": "<i>&quot;I personally hate c++ and I think its a really ass backwards language&quot;</i> Ha! :P"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1525300648, "post_id": 50144519, "comment_id": 87307270, "body": "Well, no point my editing that out now. Ah smurf it. Killing it anyway."}, {"owner": {"reputation": 15, "user_id": 7190754, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4tW5HcXcRZI/AAAAAAAAAAI/AAAAAAAAACU/LrHUlUi_8T0/photo.jpg?sz=128", "display_name": "DiabolicNick", "link": "https://stackoverflow.com/users/7190754/diabolicnick"}, "edited": false, "score": 2, "creation_date": 1525300747, "post_id": 50144519, "comment_id": 87307291, "body": "lmao sorry for being honest XD"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 2, "creation_date": 1525300929, "post_id": 50144519, "comment_id": 87307349, "body": "Back to the point, can you name any <i>specific</i> questions that you have? I&#39;m not sure how to help you. The google is full of pointer tutorials, and maybe we could make another small one just for you, but it would be better if you told us what exactly you don&#39;t understand."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1525300967, "post_id": 50144519, "comment_id": 87307358, "body": "Just read through your code. Doesn&#39;t look like you&#39;re having any trouble with the pointer allocation/deallocation, that&#39;s where most folks realize they &lt;expletive deleted&gt;ed up. Do you know how to use a pointer to iterate through an array?"}, {"owner": {"reputation": 15, "user_id": 7190754, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4tW5HcXcRZI/AAAAAAAAAAI/AAAAAAAAACU/LrHUlUi_8T0/photo.jpg?sz=128", "display_name": "DiabolicNick", "link": "https://stackoverflow.com/users/7190754/diabolicnick"}, "edited": false, "score": 0, "creation_date": 1525301112, "post_id": 50144519, "comment_id": 87307395, "body": "Ok, specifically here &quot; // Reset &quot;data&quot; to point to the beginning of the array&quot;. I understand what&#39;s happening when it how the array is created with the pointer (the pointer is now at the &quot;end&quot; of the array) and now that it&#39;s at the end, it needs to be reset at the beginning of the array. Is there a way to reset it to the beginning of the array so my printArray function correctly prints out the array like it does in in the lines before the &quot;array&quot; is put into the function?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 3, "creation_date": 1525301201, "post_id": 50144519, "comment_id": 87307421, "body": "A pointer is simply a variable that holds the <i>address of</i> something else as its value. In other words, a pointer <i>points to</i> the address where something else can be found. For example, while <code>int a = 5;</code> stores the immediate value <code>5</code> as its value, <code>int *b;</code> creates a pointer to <code>int</code>, and <code>b = &amp;a;</code> stores the address of <code>a</code> (the memory address where <code>5</code> is currectly stored) as its value. If you need the value stored at the memory address pointed to by a pointer, you <i>dereference</i> the pointer using the unary <code>&#39;*&#39;</code> operator. To reset a pointer, simply assign a new address to the pointer."}, {"owner": {"reputation": 15, "user_id": 7190754, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4tW5HcXcRZI/AAAAAAAAAAI/AAAAAAAAACU/LrHUlUi_8T0/photo.jpg?sz=128", "display_name": "DiabolicNick", "link": "https://stackoverflow.com/users/7190754/diabolicnick"}, "edited": false, "score": 0, "creation_date": 1525301316, "post_id": 50144519, "comment_id": 87307449, "body": "I just done understand how I would get the pointer to return to the start of the array because the way I see whats happening is that the pointer is at the final value and when the function is called, its printing out the last number, then x amount of numbers (based on the size variable) are printed and they print out &quot;-842150451&quot;"}, {"owner": {"reputation": 789, "user_id": 8120642, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OX8-_3nAbeE/AAAAAAAAAAI/AAAAAAAAAAA/of7PUZBmbk4/photo.jpg?sz=128", "display_name": "hegel5000", "link": "https://stackoverflow.com/users/8120642/hegel5000"}, "edited": false, "score": 0, "creation_date": 1525301451, "post_id": 50144519, "comment_id": 87307473, "body": "Do you know how to reverse an array using the disallowed <code>[]</code> syntax, so that you can work up to pointers from there?"}, {"owner": {"reputation": 15, "user_id": 7190754, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4tW5HcXcRZI/AAAAAAAAAAI/AAAAAAAAACU/LrHUlUi_8T0/photo.jpg?sz=128", "display_name": "DiabolicNick", "link": "https://stackoverflow.com/users/7190754/diabolicnick"}, "edited": false, "score": 0, "creation_date": 1525301451, "post_id": 50144519, "comment_id": 87307474, "body": "i mean, i could show you everything that was in there before that I added and all she put. All she put was int size, the cout of the name, the cout of the array size, and the cout that says original array and reversed array. Every single thing else is what I put there lmao."}, {"owner": {"reputation": 789, "user_id": 8120642, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OX8-_3nAbeE/AAAAAAAAAAI/AAAAAAAAAAA/of7PUZBmbk4/photo.jpg?sz=128", "display_name": "hegel5000", "link": "https://stackoverflow.com/users/8120642/hegel5000"}, "edited": false, "score": 0, "creation_date": 1525302012, "post_id": 50144519, "comment_id": 87307602, "body": "Oh, I thought this was all instructor-provided code (good comments, I guess?).  Sorry!"}, {"owner": {"reputation": 15, "user_id": 7190754, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4tW5HcXcRZI/AAAAAAAAAAI/AAAAAAAAACU/LrHUlUi_8T0/photo.jpg?sz=128", "display_name": "DiabolicNick", "link": "https://stackoverflow.com/users/7190754/diabolicnick"}, "edited": false, "score": 0, "creation_date": 1525302292, "post_id": 50144519, "comment_id": 87307653, "body": "lmao np :P She tells us to comment the &lt;expletive&gt; out of it basically XD"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1525303078, "post_id": 50144519, "comment_id": 87307820, "body": "When possible, prefer to name variables and functions so that you don&#39;t have to leave comments except when things get really ugly. Easiest way to reset a pointer is to keep a copy of the original value. So <code>int*reset = data;</code> move <code>data</code> around (<code>data++;</code>, <code>data--;</code>) to your heart&#39;s content, and when you want to reset, <code>data = reset;</code>"}, {"owner": {"reputation": 15, "user_id": 7190754, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4tW5HcXcRZI/AAAAAAAAAAI/AAAAAAAAACU/LrHUlUi_8T0/photo.jpg?sz=128", "display_name": "DiabolicNick", "link": "https://stackoverflow.com/users/7190754/diabolicnick"}, "edited": false, "score": 0, "creation_date": 1525303516, "post_id": 50144519, "comment_id": 87307891, "body": "I understand that, but where would I be putting something like that so that when i use the printArray function, it would start at the original value and not the last value?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1525303588, "post_id": 50144519, "comment_id": 87307904, "body": "The relationship between arrays and pointers can be confusing. Section 6 of the <a href=\"http://www.c-faq.com/\" rel=\"nofollow noreferrer\">comp.lang.c FAQ</a> is the best explanation I know of. (Most of it applies to C++ as well as to C.)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1525365539, "post_id": 50144519, "comment_id": 87337806, "body": "<i>&quot;Like I said, I&#39;ve been using google and searching through here and I cant find anything on it.&quot;</i> That&#39;s why you&#39;re having so much trouble. You can&#39;t learn a powerful language like C++ in this manner. Which book do you have?"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 7190754, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4tW5HcXcRZI/AAAAAAAAAAI/AAAAAAAAACU/LrHUlUi_8T0/photo.jpg?sz=128", "display_name": "DiabolicNick", "link": "https://stackoverflow.com/users/7190754/diabolicnick"}, "edited": false, "score": 1, "creation_date": 1525301499, "post_id": 50144615, "comment_id": 87307488, "body": "We cant use &quot;array notation&quot; and we specifically need to use &quot;pointer notation&quot; (whetever that means (it works when it does what you put and thats how I originally did it as well)"}, {"owner": {"reputation": 15, "user_id": 7190754, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4tW5HcXcRZI/AAAAAAAAAAI/AAAAAAAAACU/LrHUlUi_8T0/photo.jpg?sz=128", "display_name": "DiabolicNick", "link": "https://stackoverflow.com/users/7190754/diabolicnick"}, "edited": false, "score": 0, "creation_date": 1525301569, "post_id": 50144615, "comment_id": 87307503, "body": "I do completely and utterly agree that what you have is the correct way to do it but she was saying it wasnt."}, {"owner": {"reputation": 15, "user_id": 7190754, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4tW5HcXcRZI/AAAAAAAAAAI/AAAAAAAAACU/LrHUlUi_8T0/photo.jpg?sz=128", "display_name": "DiabolicNick", "link": "https://stackoverflow.com/users/7190754/diabolicnick"}, "edited": false, "score": 0, "creation_date": 1525301588, "post_id": 50144615, "comment_id": 87307508, "body": "this is why I&#39;m running into this issue in total."}, {"owner": {"reputation": 15, "user_id": 7190754, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4tW5HcXcRZI/AAAAAAAAAAI/AAAAAAAAACU/LrHUlUi_8T0/photo.jpg?sz=128", "display_name": "DiabolicNick", "link": "https://stackoverflow.com/users/7190754/diabolicnick"}, "edited": false, "score": 0, "creation_date": 1525302420, "post_id": 50144615, "comment_id": 87307674, "body": "she still considers data+i array notation as seen here:   This code must use POINTER NOTATION (no subscripting) to work with the array. \t// Reminder: neither of these notations is acceptable here: \t// data[n]  or *(data + n)"}, {"owner": {"reputation": 15, "user_id": 7190754, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4tW5HcXcRZI/AAAAAAAAAAI/AAAAAAAAACU/LrHUlUi_8T0/photo.jpg?sz=128", "display_name": "DiabolicNick", "link": "https://stackoverflow.com/users/7190754/diabolicnick"}, "edited": false, "score": 0, "creation_date": 1525302434, "post_id": 50144615, "comment_id": 87307679, "body": "if i could do it that way, i would have been done this hours ago."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1525302191, "last_edit_date": 1525302191, "creation_date": 1525301243, "answer_id": 50144615, "question_id": 50144519, "link": "https://stackoverflow.com/questions/50144519/c-pointers-arraysim-completely-and-utterly-confused-at-this-moment-and-reall/50144615#50144615", "title": "C++ Pointers/Arrays(I&#39;m completely and utterly confused at this moment and really need help)", "body": "<p>The following lines in <code>main</code>  are not correct.</p>\n\n<pre><code>*data = rand() % 100 + 1;\ncout &lt;&lt; setw(5) &lt;&lt; right &lt;&lt; *data;\n</code></pre>\n\n<p>They just set the value of the first element of the array and print the same element.</p>\n\n<p>Use <code>data[i]</code> instead.</p>\n\n<pre><code>data[i] = rand() % 100 + 1;\ncout &lt;&lt; setw(5) &lt;&lt; right &lt;&lt; data[i];\n</code></pre>\n\n<p>If you must use the pointer notation, use <code>*(data+i)</code>.</p>\n\n<pre><code>*(data+i) = rand() % 100 + 1;\ncout &lt;&lt; setw(5) &lt;&lt; right &lt;&lt; *(data+i);\n</code></pre>\n\n<p>Another method you can use is to use a temporary pointer variable just for iterating over the array.</p>\n\n<pre><code>int* iter = data;\nfor (int i = 0; i &lt; size; i++. ++iter)\n{\n    *iter = rand() % 100 + 1;\n    cout &lt;&lt; setw(5) &lt;&lt; right &lt;&lt; *iter;\n\n    ...\n}\n</code></pre>\n\n<p>This makes sure that you don't lose the original pointer, which is necessary to be able to deallocate the memory.</p>\n\n<p><strong>PS</strong> There may be other errors, or not, but I noticed the above problem after a quick glance through your code.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 7190754, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4tW5HcXcRZI/AAAAAAAAAAI/AAAAAAAAACU/LrHUlUi_8T0/photo.jpg?sz=128", "display_name": "DiabolicNick", "link": "https://stackoverflow.com/users/7190754/diabolicnick"}, "edited": false, "score": 0, "creation_date": 1525304887, "post_id": 50144975, "comment_id": 87308179, "body": "So where you put &quot;change made here&quot; was just me outputting the data. I get that. Now that should be done in the function &quot;PrintArray&quot;. This is where I&#39;m finding an issue. I don&#39;t get how I would loop it in the function &quot;printArray&quot; so that it does all the values and doesn&#39;t only print the last value then 22 other values (when putting 23 for the size). We&#39;re supposed to do something where she commented &quot; // Reset &quot;data&quot; to point to the beginning of the array &quot; which is what confuses me. I understand how to create the array but also understand that somehow the pointer needs to go back to"}, {"owner": {"reputation": 779, "user_id": 9220132, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70Mx.jpg?s=128&g=1", "display_name": "jwm", "link": "https://stackoverflow.com/users/9220132/jwm"}, "edited": false, "score": 0, "creation_date": 1525305025, "post_id": 50144975, "comment_id": 87308208, "body": "I&#39;m a huge believer in not relying on people to understand the precedence of operators. So I would prefer <code>*(data++)</code> to make it painfully clear that the pointer is being incremented, and not the pointed to integer (as would be the case in <code>(*data)++</code>"}, {"owner": {"reputation": 15, "user_id": 7190754, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4tW5HcXcRZI/AAAAAAAAAAI/AAAAAAAAACU/LrHUlUi_8T0/photo.jpg?sz=128", "display_name": "DiabolicNick", "link": "https://stackoverflow.com/users/7190754/diabolicnick"}, "edited": false, "score": 0, "creation_date": 1525305075, "post_id": 50144975, "comment_id": 87308217, "body": "beginning of the array and show each value that was made in the loop."}, {"owner": {"reputation": 779, "user_id": 9220132, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70Mx.jpg?s=128&g=1", "display_name": "jwm", "link": "https://stackoverflow.com/users/9220132/jwm"}, "reply_to_user": {"reputation": 15, "user_id": 7190754, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4tW5HcXcRZI/AAAAAAAAAAI/AAAAAAAAACU/LrHUlUi_8T0/photo.jpg?sz=128", "display_name": "DiabolicNick", "link": "https://stackoverflow.com/users/7190754/diabolicnick"}, "edited": false, "score": 0, "creation_date": 1525305196, "post_id": 50144975, "comment_id": 87308251, "body": "@DiabolicNick what I think your instructor is guiding you towards is iterator-based functions, where you pass an iterator (pointer) to the start and an iterator (pointer) to the end, and the function operates on each value, incrementing the iterator until it is equal to the end value"}, {"owner": {"reputation": 15, "user_id": 7190754, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4tW5HcXcRZI/AAAAAAAAAAI/AAAAAAAAACU/LrHUlUi_8T0/photo.jpg?sz=128", "display_name": "DiabolicNick", "link": "https://stackoverflow.com/users/7190754/diabolicnick"}, "reply_to_user": {"reputation": 779, "user_id": 9220132, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70Mx.jpg?s=128&g=1", "display_name": "jwm", "link": "https://stackoverflow.com/users/9220132/jwm"}, "edited": false, "score": 0, "creation_date": 1525305444, "post_id": 50144975, "comment_id": 87308300, "body": "@jwm Yes, i believe that is what would happen, but I&#39;m lost as to how I would go and do that. I dont get how I would get a pointer at the start to read the array and/or how I would set it up that its reading the array. For example, we&#39;re supposed to put 23 for the value and get the array of 23. I get that having two different pointers (one at the start and end) would accomplish this and to do the reverse, I would just have to simply reverse them, but again, I dont understand how I would tell the pointer to do that outside of a loop."}, {"owner": {"reputation": 779, "user_id": 9220132, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70Mx.jpg?s=128&g=1", "display_name": "jwm", "link": "https://stackoverflow.com/users/9220132/jwm"}, "edited": false, "score": 0, "creation_date": 1525305798, "post_id": 50144975, "comment_id": 87308375, "body": "<code>int* data = new int[size];</code> declares a pointer (<code>data</code>) and assigns it the value of the allocated memory. <code>int* startPtr = data;</code> declares another pointer (<code>startPtr</code>) and assigns it the same value, the address of the first element in the array. You now have two pointers with the same value. <code>int* endPtr = data + size -1;</code> declares a pointer (<code>endPtr</code>) and assigns it a value that points to the last element in the array. What if you increment one until it reaches the other, or decrement the other until it reaches the first? Can you see how you might reverse the order?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 15, "user_id": 7190754, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4tW5HcXcRZI/AAAAAAAAAAI/AAAAAAAAACU/LrHUlUi_8T0/photo.jpg?sz=128", "display_name": "DiabolicNick", "link": "https://stackoverflow.com/users/7190754/diabolicnick"}, "edited": false, "score": 0, "creation_date": 1525308573, "post_id": 50144975, "comment_id": 87308964, "body": "@DiabolicNick I didn&#39;t touch <code>printArray</code> because it&#39;s already doing what it needs to do. All you need to do is make sure the <code>data</code> is pointing to the right spot after filling the array, and I provided two strategies to do this. I also didn&#39;t touch reversing the array. That one is a different question."}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 1, "last_activity_date": 1525304643, "last_edit_date": 1592644375, "creation_date": 1525304302, "answer_id": 50144975, "question_id": 50144519, "link": "https://stackoverflow.com/questions/50144519/c-pointers-arraysim-completely-and-utterly-confused-at-this-moment-and-reall/50144975#50144975", "title": "C++ Pointers/Arrays(I&#39;m completely and utterly confused at this moment and really need help)", "body": "<h1>Moving A Pointer</h1>\n<pre><code>data++;\n</code></pre>\n<p>and</p>\n<pre><code>data--;\n</code></pre>\n<p>mostly. There are other things you could do, but your instructor asked for increment and decrement.</p>\n<p>So</p>\n<pre><code>for (int i = 0; i &lt; size; i++)\n{\n    *data = rand() % 100 + 1;\n    cout &lt;&lt; setw(5) &lt;&lt; right &lt;&lt; *data;\n    if ((i + 1) % 5 == 0)\n    {\n        cout &lt;&lt; endl;\n    }\n}\n</code></pre>\n<p>becomes</p>\n<pre><code>for (int i = 0; i &lt; size; i++)\n{\n    *data = rand() % 100 + 1;\n    cout &lt;&lt; setw(5) &lt;&lt; right &lt;&lt; *data++; // change made here\n    if ((i + 1) % 5 == 0)\n    {\n        cout &lt;&lt; endl;\n    }\n}\n</code></pre>\n<p>Note only one <code>data++</code>, and it's on the second use of <code>data</code>. You should be able to figure out why.</p>\n<h1>Resetting A Pointer</h1>\n<p>The easiest and most obvious is to</p>\n<pre><code>int*reset = data; \n</code></pre>\n<p>then you can <code>data</code> around to your heart's content, and when you want to reset,</p>\n<pre><code>data = reset;\n</code></pre>\n<p>So the above loops wind up looking like</p>\n<pre><code>int*reset = data; \nfor (int i = 0; i &lt; size; i++)\n{\n    *data = rand() % 100 + 1;\n    cout &lt;&lt; setw(5) &lt;&lt; right &lt;&lt; *data++; // change made here\n    if ((i + 1) % 5 == 0)\n    {\n        cout &lt;&lt; endl;\n    }\n}\ndata = reset;\n</code></pre>\n<p>But... You can also separate your logic out into functions and take advantage of pass by value</p>\n<pre><code>void fill(int * data,\n          int size)\n{\n    for (int i = 0; i &lt; size; i++)\n    {\n        *data = rand() % 100 + 1;\n        cout &lt;&lt; setw(5) &lt;&lt; right &lt;&lt; *data++; // change made here\n        if ((i + 1) % 5 == 0)\n        {\n            cout &lt;&lt; endl;\n        }\n    }\n}\n</code></pre>\n<p>and the related part of <code>main</code> now looks something like</p>\n<pre><code>data = new int[size];\n// Write a loop to fill the &quot;data&quot; array with random numbers from 1 - 100 (inclusive)\n// This code must use POINTER NOTATION (no subscripting) to work with the array.\n// Reminder: neither of these notations is acceptable here:\n// data[n]  or *(data + n)\n// Instead this code will use pointer incrementing/decrementing and dereferencing\ncout &lt;&lt; &quot;This is just the test to see if the pointer is successfully creating the array&quot; &lt;&lt; endl;\nfill(data, size);\n// Reset &quot;data&quot; to point to the beginning of the array\n</code></pre>\n<p>&quot;Just wait a minute!&quot; you're thinking. &quot;How in Crom's name is <code>int * data</code> pass by value? That's a &lt;expletive deleted&gt;ing pointer!&quot; The data pointed <strong>at</strong> is passed by reference, but the pointer itself is passed by value. <code>data</code> in fill is a copy of <code>data</code> in <code>main</code>. All of the <code>data++</code>ing in <code>fill</code> happens to a copy, so <code>data</code> in <code>main</code> is still pointing right where you left it.</p>\n<p>No reset required <strong>and</strong> you've simplified <code>main</code>'s responsibilities by spinning off part of them to their own simple and independently testable function. Keeping everything as simple, small, and stupid as possible is worth it's weight in bitcoin in my view.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 7190754, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4tW5HcXcRZI/AAAAAAAAAAI/AAAAAAAAACU/LrHUlUi_8T0/photo.jpg?sz=128", "display_name": "DiabolicNick", "link": "https://stackoverflow.com/users/7190754/diabolicnick"}, "edited": false, "score": 0, "creation_date": 1525309368, "post_id": 50145018, "comment_id": 87309121, "body": "so mostly from what you got, I could get a semi working function. So thank you so much for that! With that being said, I can&#39;t figure out how tf to put the cose from reverseArray into my main ( it would be before the second printArray funtion). Again thank you for the assistance so far."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 15, "user_id": 7190754, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4tW5HcXcRZI/AAAAAAAAAAI/AAAAAAAAACU/LrHUlUi_8T0/photo.jpg?sz=128", "display_name": "DiabolicNick", "link": "https://stackoverflow.com/users/7190754/diabolicnick"}, "edited": false, "score": 0, "creation_date": 1525309566, "post_id": 50145018, "comment_id": 87309163, "body": "If you move the <code>rev</code> code into <code>main()</code> you WILL need to use an additional pointer because you can&#39;t increment <code>a</code> in <code>main()</code>. So use the version with <code>s</code> (for start) I note above. You can pretty much move the <code>rev</code> code into <code>main()</code> where I call <code>rev (a, NELEM)</code>. Just make sure you replace <code>a</code> in the function with <code>s</code> you will declare as <code>int *s = a;</code>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 15, "user_id": 7190754, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4tW5HcXcRZI/AAAAAAAAAAI/AAAAAAAAACU/LrHUlUi_8T0/photo.jpg?sz=128", "display_name": "DiabolicNick", "link": "https://stackoverflow.com/users/7190754/diabolicnick"}, "edited": false, "score": 0, "creation_date": 1525310054, "post_id": 50145018, "comment_id": 87309262, "body": "See the additional edit showing how you would move <code>rev</code> into <code>main()</code> using your existing <code>p</code> as the start-pointer, and declaring <code>e</code> in <code>main()</code> as your end pointer."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 3, "last_activity_date": 1525309987, "last_edit_date": 1525309987, "creation_date": 1525304698, "answer_id": 50145018, "question_id": 50144519, "link": "https://stackoverflow.com/questions/50144519/c-pointers-arraysim-completely-and-utterly-confused-at-this-moment-and-reall/50145018#50145018", "title": "C++ Pointers/Arrays(I&#39;m completely and utterly confused at this moment and really need help)", "body": "<p>You may be torturing yourself for no reason, or beating your head into a brick wall (don't worry - we've all been there... and have the bruises to prove it.)</p>\n\n<p>First, lets start with any allocated block of memory, say:</p>\n\n<pre><code>     int *a = new int[NELEM], ...\n</code></pre>\n\n<p>What is <code>a</code>? (a pointer -- yes, but to what?) It is a pointer to the beginning address in a block of memory, <code>NELEM * sizeof *a</code> bytes in size. What type of pointer is it? (<code>int</code>). How many bytes per-int? (generally <code>4</code>). </p>\n\n<p>So why is having the pointer be type <code>int</code> important? (well, it sets the type-size that controls how pointer-arithmetic operates when referencing the block of memory though that pointer) Meaning since your pointer type is <code>int</code>, the compiler knows that <code>a + 1</code> is <code>a + 4-bytes</code> which allows you to reference the next value in your block of memory.</p>\n\n<p>OK, but I allocated memory for <code>a</code>, what are my responsibilities with regard to <code>a</code>? In any code you write that dynamically allocates memory, you have 2 <em>responsibilities</em> regarding any block of memory allocated: (1) <em>always preserve a pointer to the starting address</em> for the block of memory so, (2) it can be <em>freed</em> when it is no longer needed.</p>\n\n<p>What does that mean to me? It means that if you cannot simply increment <code>a</code> (e.g. <code>a++</code>) in the scope where <code>a</code> was declared. If you do, you have lost your reference to the beginning address of the block and that block can no longer be freed (that's a <em>memory leak</em>). </p>\n\n<p>So if I cannot use any indexing (e.g. <code>a[i]</code> or <code>*(a + i)</code>) and I can't increment my pointer <code>a</code> -- then what are my options? <em>Use another pointer...</em>, e.g.</p>\n\n<pre><code>    int *a = new int[NELEM],\n        *p = a;\n    ...\n    std::cout &lt;&lt; \"array  : \";\n    for (int i = 0; i &lt; NELEM; i++, p++) {\n        *p = rand() % 100 + 1;\n        std::cout &lt;&lt; std::setw(5) &lt;&lt; *p;\n    }\n    std::cout &lt;&lt; '\\n';\n</code></pre>\n\n<p>Have you satisfied your responsibilities regarding the block of memory you assigned to <code>a</code>? Sure, <code>a</code> still points to the beginning address of the block, so it can be freed. All you did was use a second pointer <code>p</code> and iterated using <code>p</code> leaving <code>a</code> unchanged.</p>\n\n<p>Hmm.. Using a second pointer.. I wonder if I can reverse my array using that same scheme. Yep. In it simplest form, you could do something like:</p>\n\n<pre><code> void rev (int *a, size_t size)\n{\n    int *e = a + size - 1;      /* end pointer */\n\n    for (; e &gt; a; a++, e--) {   /* while end &gt; start, swap start, end */\n        int tmp = *a;\n        *a = *e;\n        *e = tmp;\n    }\n}\n</code></pre>\n\n<p>But wait!! You said you couldn't increment <code>a</code> without losing the starting address to my allocated block -- how can I <code>free</code> it now? (<code>a</code> in <code>main()</code> never changes, the function <code>rev</code> receives a copy of <code>a</code> and within <code>rev</code> you are free to increment/decrement or do whatever you like to <code>a</code>, within the bounds of the block of memory, because <code>a</code> in <code>rev</code> has its very own (and very different) address from your original pointer in <code>main()</code>. </p>\n\n<p>(an aside...) You could have declared a third pointer within <code>rev</code>, e.g.</p>\n\n<pre><code>    int *s = a,                 /* start pointer */\n        *e = a + size - 1;      /* end pointer */\n</code></pre>\n\n<p>and then used <code>s</code> instead of <code>a</code> in your iteration and swap, but there isn't any need to. You are free to do it that way if it is more clear to you which pointer you are working with. It's simply another 8-bytes (or 4 on x86), so the additional storage is a non-issue.</p>\n\n<p>Putting it altogether in a short example, you could do something similar to the following:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;cstdlib&gt;\n\n#define NELEM 10\n\nvoid rev (int *a, size_t size)\n{\n    int *e = a + size - 1;      /* end pointer */\n\n    for (; e &gt; a; a++, e--) {   /* while end &gt; start, swap start, end */\n        int tmp = *a;\n        *a = *e;\n        *e = tmp;\n    }\n}\n\nint main (void) {\n\n    int *a = new int[NELEM],\n        *p = a;\n\n    srand (20180502);\n\n    std::cout &lt;&lt; \"array  : \";\n    for (int i = 0; i &lt; NELEM; i++, p++) {\n        *p = rand() % 100 + 1;\n        std::cout &lt;&lt; std::setw(5) &lt;&lt; *p;\n    }\n    std::cout &lt;&lt; '\\n';\n\n    rev (a, NELEM);\n    p = a;\n    std::cout &lt;&lt; \"reverse: \";\n    for (int i = 0; i &lt; NELEM; i++, p++)\n        std::cout &lt;&lt; std::setw(5) &lt;&lt; *p;\n    std::cout &lt;&lt; '\\n';\n\n    delete[] a;\n}\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/array_reverse\narray  :    11    6   78   93   25   71   82   58   97   68\nreverse:    68   97   58   82   71   25   93   78    6   11\n</code></pre>\n\n<p>All of this takes a bit of time to sink in. We all have bruises on our foreheads from the same wall. Just make peace with the fact that a pointer is just a variable that holds the <em>address of</em> something else as it value (e.g. it points to where something else is stored). </p>\n\n<p>Understand how the <code>type</code> of the pointer effects the pointer-arithmetic (and indexing), e.g. how many bytes are advanced with <code>p++</code> or in <code>for (i = 0; i &lt; size; i++) p[i]</code>, and make sure you know exactly where your pointer is pointing and things should start to fall into place. </p>\n\n<p>If you ever have any problems figuring out what is going on with your pointer, pull out an 8.5 x 11 sheet of paper and a No.2 pencil and just draw it out -- on each iteration fill in the block where your pointer is pointing, etc.. -- it really helps. Once you have drawn enough diagrams, done enough linked-lists, stacks, etc... you won't need the paper as much as you do now (you will still need it -- so keep it handy)</p>\n\n<hr>\n\n<p><strong>Reversing in <code>main()</code> with a Function</strong></p>\n\n<p>In response to your comment, when you look at <code>main()</code>, you already have an additional pointer <code>p</code> declared. So you can simply use that as your start pointer and add <code>e</code> from from the <code>rev()</code> function as your end-pointer. A simple implementation would be:</p>\n\n<pre><code>int main (void) {\n\n    int *a = new int[NELEM],\n        *p = a,\n        *e = a + NELEM - 1;;\n\n    srand (20180502);\n\n    std::cout &lt;&lt; \"array  : \";\n    for (int i = 0; i &lt; NELEM; i++, p++) {\n        *p = rand() % 100 + 1;\n        std::cout &lt;&lt; std::setw(5) &lt;&lt; *p;\n    }\n    std::cout &lt;&lt; '\\n';\n\n    p = a;                      /* reset pointer */\n    for (; e &gt; p; p++, e--) {   /* reverse array */\n        int tmp = *p;\n        *p = *e;\n        *e = tmp;    \n    }\n    p = a;                      /* reset pointer -- again */\n    std::cout &lt;&lt; \"reverse: \";\n    for (int i = 0; i &lt; NELEM; i++, p++)\n        std::cout &lt;&lt; std::setw(5) &lt;&lt; *p;\n    std::cout &lt;&lt; '\\n';\n\n    delete[] a;\n}\n</code></pre>\n\n<p>(same output)</p>\n\n<p>Look things over and let me know if you have further questions.</p>\n"}], "owner": {"reputation": 15, "user_id": 7190754, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4tW5HcXcRZI/AAAAAAAAAAI/AAAAAAAAACU/LrHUlUi_8T0/photo.jpg?sz=128", "display_name": "DiabolicNick", "link": "https://stackoverflow.com/users/7190754/diabolicnick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1525364647, "creation_date": 1525300470, "last_edit_date": 1525364647, "question_id": 50144519, "link": "https://stackoverflow.com/questions/50144519/c-pointers-arraysim-completely-and-utterly-confused-at-this-moment-and-reall", "title": "C++ Pointers/Arrays(I&#39;m completely and utterly confused at this moment and really need help)", "body": "<p>So This Is What I Ended up coming up with for it. I currently can't figure out how to put my reverseArray function into the main... If i just copy and paste the code into it, it crashes every time it's run... I don't know why it causes it to crash or anything. Thank you everyone that has helped me so far with this.</p>\n\n<pre><code>using namespace std;\n\n// Prototype for printArray goes here\nvoid reverseArray(int*, int);\nvoid printArray(int*, int);\n\nint main()\n{\n    int size;   // size of the dynamically allocated array\n\n                // Declare as needed for a dynamically allocated array of \nints named \"data\".\n\n            // Declare other variables as needed\n\n\n            // Edit to display your own name\ncout &lt;&lt; \"\" &lt;&lt; endl &lt;&lt; endl;\n\n// Prompt the user for the array size\ncout &lt;&lt; \"Array size: \";\ncin &gt;&gt; size;\n\n// Add code to validate array size, so it is greater than one\nwhile (size &lt; 2)\n{\n    cout &lt;&lt; \"Array size must be greater than 1: \";\n    cin &gt;&gt; size;\n}\n\n// Add code to dynamically allocate \"data\". Don't forget to release the memory before\n// the program ends\nint *data = new int[size],\n    *p = data;\n// Write a loop to fill the \"data\" array with random numbers from 1 - 100 (inclusive)\n// This code must use POINTER NOTATION (no subscripting) to work with the array.\n// Reminder: neither of these notations is acceptable here:\n// data[n]  or *(data + n)\n// Instead this code will use pointer incrementing/decrementing and dereferencing\n\nfor (int i = 0; i &lt; size; i++, p++)\n{\n    *p = rand() % 100 + 1;\n}\n// Call function to print the original \"data\" array\ncout &lt;&lt; \"\\nOriginal array:\\n\" &lt;&lt; endl;\nprintArray(data, size);\n// Reset \"data\" to point to the beginning of the array \n\n// Add code to reverse the array. Use 2 pointers: one starts at the beginning of the array and\n// moves forward, the other starts at its last element and works backward. Swap the values they\n// point to.\n// Reminder: neither of these notations is acceptable here:\n// data[n]  or *(data + n)\n// Instead this code will use pointer incrementing/decrementing and dereferencing\n// For this, I made the function reverseArray instead of coding it in main.\nreverseArray(data, size);\ncout &lt;&lt; endl;\ncout &lt;&lt; \"\\nReversed array:\\n\" &lt;&lt; endl;\nprintArray(data, size);\ncout &lt;&lt; endl &lt;&lt; endl;\n// Finish up\ndelete[] data;\nsystem(\"pause\");\nreturn 0;\n}\n\n// Function printArray() goes here. Print the array, 5 numbers per line, \nright-aligned\nvoid printArray(int*p, int size)\n{\n    for (int i = 0; i &lt; size; i++, p++)\n    {\n        cout &lt;&lt; setw(5) &lt;&lt; right &lt;&lt; *p;\n        if ((i + 1) % 5 == 0)\n        {\n            cout &lt;&lt; endl;\n        }\n    }\n}\n// Function reverseArray() Reverses the array.\nvoid reverseArray(int *data, int size)\n{\n    int *e = data + size - 1;      // Pointer at the end\n    for (; e &gt; data; data++, e--) // while end pointer (e)&gt; start pointer, swap start w/ end\n    {\n        int arrayFlip = *data;\n        *data = *e;\n        *e = arrayFlip;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "mpi", "computer-science", "distributed-system"], "comments": [{"owner": {"reputation": 3971, "user_id": 2840714, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s9vli.jpg?s=128&g=1", "display_name": "ChuckCottrill", "link": "https://stackoverflow.com/users/2840714/chuckcottrill"}, "edited": false, "score": 0, "creation_date": 1525305176, "post_id": 50144510, "comment_id": 87308244, "body": "see this answer: <a href=\"https://stackoverflow.com/questions/43252285/mpi-rank-process\">stackoverflow.com/questions/43252285/mpi-rank-process</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3971, "user_id": 2840714, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s9vli.jpg?s=128&g=1", "display_name": "ChuckCottrill", "link": "https://stackoverflow.com/users/2840714/chuckcottrill"}, "is_accepted": false, "score": 4, "last_activity_date": 1525308839, "creation_date": 1525308839, "answer_id": 50145458, "question_id": 50144510, "link": "https://stackoverflow.com/questions/50144510/how-do-mpi-decide-its-rank-size/50145458#50145458", "title": "how do MPI decide its rank size", "body": "<p>Here is a good reference:</p>\n\n<ul>\n<li><a href=\"http://mpitutorial.com/tutorials/mpi-hello-world/\" rel=\"nofollow noreferrer\">http://mpitutorial.com/tutorials/mpi-hello-world/</a></li>\n<li><a href=\"http://mpitutorial.com/tutorials/introduction-to-groups-and-communicators/\" rel=\"nofollow noreferrer\">http://mpitutorial.com/tutorials/introduction-to-groups-and-communicators/</a></li>\n</ul>\n\n<p>And here is a tutorial:</p>\n\n<ul>\n<li><a href=\"https://computing.llnl.gov/tutorials/mpi/\" rel=\"nofollow noreferrer\">https://computing.llnl.gov/tutorials/mpi/</a></li>\n</ul>\n\n<p>And here is a related question</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/5399110/what-is-the-difference-between-ranks-and-processes-in-mpi\">What is the difference between ranks and processes in MPI?</a></li>\n</ul>\n\n<p>To answer your question:</p>\n\n<ul>\n<li><p>Rank is the (logical) process number (like a thread id)</p></li>\n<li><p>Size is the total number of processes (allocated, parallelism)</p></li>\n</ul>\n\n<p>When you use MPI_Init, see this: <a href=\"https://www.sharcnet.ca/help/index.php/Getting_Started_with_MPI\" rel=\"nofollow noreferrer\">https://www.sharcnet.ca/help/index.php/Getting_Started_with_MPI</a> to observe how to set number of processes.</p>\n\n<pre><code>mpirun -n 4 ./parhello\n</code></pre>\n\n<p>You can construct your argv[] array with \"-n N\" and specify world size to MPI_init call.</p>\n\n<p>You can also set the world size using environment variables,</p>\n\n<ul>\n<li><a href=\"https://www.ibm.com/support/knowledgecenter/en/SSFK3V_2.2.0/com.ibm.cluster.pe.v2r2.pe100.doc/am102_mpienvars.htm\" rel=\"nofollow noreferrer\">https://www.ibm.com/support/knowledgecenter/en/SSFK3V_2.2.0/com.ibm.cluster.pe.v2r2.pe100.doc/am102_mpienvars.htm</a></li>\n</ul>\n\n<p>Borrowing from another question/answer:</p>\n\n<blockquote>\n  <p>MPI_Comm_size returns the size of a communicator. In our example,\n  MPI_COMM_WORLD (which is constructed for us by MPI) encloses all of\n  the processes in the job, so this call should return the amount of\n  processes that were requested for the job.</p>\n  \n  <p>MPI_Comm_rank returns the rank of a process in a communicator. Each\n  process inside of a communicator is assigned an incremental rank\n  starting from zero. The ranks of the processes are primarily used for\n  identification purposes when sending and receiving messages.</p>\n</blockquote>\n\n<p>Rank is used to distinguish processes from one another. You may have a \"master\" process (rank = 0) that sends out messages to \"slave\" applications on rank 1-15. Or you may use other topologies to divide workloads.</p>\n"}], "owner": {"reputation": 11, "user_id": 9081290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dca4a56f32fa4e73e777ad8047cf0b7?s=128&d=identicon&r=PG&f=1", "display_name": "yhn", "link": "https://stackoverflow.com/users/9081290/yhn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1506, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1525308839, "creation_date": 1525300387, "question_id": 50144510, "link": "https://stackoverflow.com/questions/50144510/how-do-mpi-decide-its-rank-size", "title": "how do MPI decide its rank size", "body": "<p>I am a MPI beginner, If i write a code like this in c++, how would the system dicide how many ranks the program will have?\nThis is not like the logic we follow in object-oriented language, when you define an array, you know precisely the size.\nWhat mechanism they use in MPI to let the system decide how many rank and the entire size?\nIs it flexible? Decide by mechine power? Or just automatically generating when calling?</p>\n\n<pre><code>int main(int argc, char *argv[]){   \nMPI_Init(NULL, NULL);\nint size, rank;\nMPI_Comm_size(MPI_COMM_WORLD, &amp;size);\nMPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);\nif (rank == 4)\n    master();\nelse\n    slave(rank);\nMPI_Finalize();\nreturn 0;}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "memory", "valgrind", "stdvector"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 3, "creation_date": 1525299161, "post_id": 50144271, "comment_id": 87306810, "body": "Related, possible duplicate: <a href=\"https://stackoverflow.com/q/17794569/1896169\">stackoverflow.com/q/17794569/1896169</a>"}, {"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1525299200, "post_id": 50144271, "comment_id": 87306825, "body": "and .. where and how is the bool type is created, allocated?  you need to provide your code. It could be static, it could be packed, .."}, {"owner": {"reputation": 1471, "user_id": 6218471, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/3f00ee8a3891494a2b1eef90d5348764?s=128&d=identicon&r=PG&f=1", "display_name": "Max Paython", "link": "https://stackoverflow.com/users/6218471/max-paython"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1525299277, "post_id": 50144271, "comment_id": 87306849, "body": "@Justin I couldn&#39;t find such a knowledge, using what I asked here. But it seems the answer, thanks."}, {"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 9, "creation_date": 1525299445, "post_id": 50144271, "comment_id": 87306899, "body": "vector&lt;bool&gt; is packed with 1 bit per bool."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1525299680, "post_id": 50144271, "comment_id": 87306979, "body": "<code>vector&lt;bool&gt;</code> is such a weird lil&#39; guy it gets its own page on cppreference: <a href=\"http://en.cppreference.com/w/cpp/container/vector_bool\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/vector_bool</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1525300695, "post_id": 50144271, "comment_id": 87307277, "body": "So, why the C language tag?  Your post title says C++, your post discusses C++.  So where do you discuss the C language?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1525300742, "post_id": 50144271, "comment_id": 87307289, "body": "BTW, the C language does not have <code>std::vector</code>.  I recommend you figure out which language you are programming in."}, {"owner": {"reputation": 1471, "user_id": 6218471, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/3f00ee8a3891494a2b1eef90d5348764?s=128&d=identicon&r=PG&f=1", "display_name": "Max Paython", "link": "https://stackoverflow.com/users/6218471/max-paython"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1525301149, "post_id": 50144271, "comment_id": 87307406, "body": "@ThomasMatthews That was to reach more people that might be checking the C tag and not C++, and still know the answer. I&#39;ll remove it if it is unsuitable or irritating"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1525311595, "post_id": 50144271, "comment_id": 87309584, "body": "@MaxPaython Don&#39;t worry, <i>plenty</i> of people check the C++ tag..."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 4189223, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cck5FYBbWqU/AAAAAAAAAAI/AAAAAAAAA4M/ctEVWJdy7mo/photo.jpg?sz=128", "display_name": "charles", "link": "https://stackoverflow.com/users/4189223/charles"}, "is_accepted": false, "score": 0, "last_activity_date": 1525332130, "creation_date": 1525332130, "answer_id": 50149142, "question_id": 50144271, "link": "https://stackoverflow.com/questions/50144271/valgrind-showing-unexpected-output-in-c-code/50149142#50149142", "title": "Valgrind showing unexpected output in C++ code", "body": "<p>Compiling the code without -O parameter is equal to -O0, and the -O0 does not mean no optimization. \nYou can see the define of gcc optimization in <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html</a></p>\n\n<p>In the case, the size same as -Os, and if you use -O1 or higher, the compiler does not use bit vector, in the other words, each bool varaible occupy 1 byte; otherwise the compiler choose bit vector (<a href=\"http://www.cplusplus.com/reference/vector/vector-bool/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/vector/vector-bool/</a>)</p>\n"}], "owner": {"reputation": 1471, "user_id": 6218471, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/3f00ee8a3891494a2b1eef90d5348764?s=128&d=identicon&r=PG&f=1", "display_name": "Max Paython", "link": "https://stackoverflow.com/users/6218471/max-paython"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1525332130, "creation_date": 1525299043, "last_edit_date": 1525318102, "question_id": 50144271, "link": "https://stackoverflow.com/questions/50144271/valgrind-showing-unexpected-output-in-c-code", "title": "Valgrind showing unexpected output in C++ code", "body": "<p>In the beginning of a C++ code, I initialize a vector of 1000000(a million) bool type data. However, in valgrind, the maximum heap + stack usage is shown 200Kb. Given that a Bool is 1 Byte, shouldn't it be 1 Mb ?</p>\n\n<p>Is there an optimization that I don't realise ? Or am I missing something ?</p>\n\n<p>Thanks is advance.</p>\n\n<p>I use a Ubuntu64 16.04 system. Compiling the code without <code>-O</code> parameter.</p>\n\n<p><strong>Edit:</strong> The code can be simplified to this, </p>\n\n<pre><code>vector&lt;bool&gt; * isPrime;\nint main(){\n    isPrime = new vector&lt;bool&gt;(1000000, true);\n}\n</code></pre>\n\n<p><strong>Edit2:</strong> It seems there was an optimization that I don't realise (which is stated in the comments). Thanks.</p>\n"}, {"tags": ["c++", "visual-studio", "dll", "dllimport", "dllexport"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1525296993, "post_id": 50143827, "comment_id": 87306037, "body": "Are you aware of the differences between includes (header files), export library files (.lib), static library files (also .lib) and dynamic library files (.dll)? And also between compilation and linking?"}, {"owner": {"reputation": 36, "user_id": 4154315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfd42e20d5d7400d1941c41d9ebd4f8b?s=128&d=identicon&r=PG", "display_name": "Vincent Nicopolsky", "link": "https://stackoverflow.com/users/4154315/vincent-nicopolsky"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1525297681, "post_id": 50143827, "comment_id": 87306315, "body": "@VTT No problem with that. The .lib that I have to include are import library types. Not static libraries. They are generated only if we specify if we export a class/member or functions with the __declspec(dllexport) identifier."}], "answers": [{"comments": [{"owner": {"reputation": 36, "user_id": 4154315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfd42e20d5d7400d1941c41d9ebd4f8b?s=128&d=identicon&r=PG", "display_name": "Vincent Nicopolsky", "link": "https://stackoverflow.com/users/4154315/vincent-nicopolsky"}, "edited": false, "score": 0, "creation_date": 1525321164, "post_id": 50144649, "comment_id": 87311934, "body": "Thanks @engf-010 . My Physics and Renderer engines include Utils because they need to exploit some specific classes (like a Timer class that I export). Only them are using the Utils stuff not my GameProject (which include only my engines). So I shouldn&#39;t have to include the Utils header files in my GameProject?"}, {"owner": {"reputation": 3834, "user_id": 517580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d04aa91a34f0171bcf5898f0b6d81101?s=128&d=identicon&r=PG", "display_name": "engf-010", "link": "https://stackoverflow.com/users/517580/engf-010"}, "reply_to_user": {"reputation": 36, "user_id": 4154315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfd42e20d5d7400d1941c41d9ebd4f8b?s=128&d=identicon&r=PG", "display_name": "Vincent Nicopolsky", "link": "https://stackoverflow.com/users/4154315/vincent-nicopolsky"}, "edited": false, "score": 1, "creation_date": 1525347723, "post_id": 50144649, "comment_id": 87325872, "body": "Ideally YES. From what I understand from your description ,your dll interface-headers need to be split in two. First a pure interface-header for the client(s) of the dll&#39;s. And a Second header for the internal working of the dll&#39;s (this would only be included by the engine sources). An alternative way is moving the includes to utils-header(s) from the engine headers directly in the source-files of your engines."}], "tags": [], "owner": {"reputation": 3834, "user_id": 517580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d04aa91a34f0171bcf5898f0b6d81101?s=128&d=identicon&r=PG", "display_name": "engf-010", "link": "https://stackoverflow.com/users/517580/engf-010"}, "is_accepted": true, "score": 1, "last_activity_date": 1525301864, "last_edit_date": 1525301864, "creation_date": 1525301526, "answer_id": 50144649, "question_id": 50143827, "link": "https://stackoverflow.com/questions/50143827/nested-dll-include-configuration-in-visual-studio/50144649#50144649", "title": "Nested DLL include configuration in Visual Studio", "body": "<p>if your program (.exe) ONLY use stuff declared and/or defined by the interfaces of the dll's then there is no need for your program-build to be aware of anything that those dll's are using in their implementations. </p>\n\n<p>However if anything from your utils-project is made visible in an interface-header of either dll and you use that in your program code ,then you have a depedency from your program to the utils.dll.\nNow you need to inform your build environment where to find stuff.</p>\n\n<p>to be concrete:</p>\n\n<p>if you need to include the directory of utils for your build ,then there is a include for a header-file from the utils-project in <strong>one or more</strong> of the headers of <code>Renderer-</code> and/or <code>PhysicsEngine</code>.</p>\n\n<p>if you need to include the lib-file of utils for your build ,then there is call to <strong>one or more</strong> exported functions (or methods of an exported class) of the <code>utils.dll</code></p>\n\n<p>Solution : sanitize the interface-header files of your dll's</p>\n"}], "owner": {"reputation": 36, "user_id": 4154315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfd42e20d5d7400d1941c41d9ebd4f8b?s=128&d=identicon&r=PG", "display_name": "Vincent Nicopolsky", "link": "https://stackoverflow.com/users/4154315/vincent-nicopolsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 50144649, "answer_count": 1, "score": 1, "last_activity_date": 1525301864, "creation_date": 1525296639, "question_id": 50143827, "link": "https://stackoverflow.com/questions/50143827/nested-dll-include-configuration-in-visual-studio", "title": "Nested DLL include configuration in Visual Studio", "body": "<p>I have a Visual Studio <strong>Solution</strong> containing several projects:</p>\n\n<ul>\n<li><strong>Utils</strong> : <em>DLL</em></li>\n<li><strong>RendererEngine</strong> : <em>DLL</em></li>\n<li><strong>PhysicsEngine</strong> : <em>DLL</em></li>\n<li><strong>GameProject</strong> : <em>EXE</em></li>\n</ul>\n\n<p>Here a schema :\n<a href=\"https://i.stack.imgur.com/F5KHd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/F5KHd.png\" alt=\"enter image description here\"></a></p>\n\n<p>The Renderer and Physics DLLs include the Utils DLL. Everything about the Visual Studio configuration wasn't a problem until I decide to create this GameProject (A Console Application project from Visual Studio). GameProject is going to make instance of exported classes from the Renderer and Physics engines.</p>\n\n<p>If I want to make my GameProject <strong>link</strong> without a problem <strong>I need to include the <em>include folder</em> and <em>.lib</em> of my Utils DLL project</strong>. And I don't understand why.</p>\n\n<p>Here the VS configuration screenshots : </p>\n\n<p><strong>Include Conf:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/0ghiD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0ghiD.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Lib Conf:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/7TIWN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7TIWN.png\" alt=\"enter image description here\"></a></p>\n\n<p>Is it normal that I have to make an include of a nested DLL in the Visual Studio configuration of the GameProject ? Does anyone had similar problem ?</p>\n"}, {"tags": ["c++", "class"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1525296057, "post_id": 50143703, "comment_id": 87305643, "body": "You need to turn up your compiler warnings.  <code>double Circle::area(void)</code> doesn&#39;t return anything even though you say it does."}, {"owner": {"reputation": 239, "user_id": 1190212, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a05abe9d9afdfa9f08e226bef5232eea?s=128&d=identicon&r=PG", "display_name": "nate", "link": "https://stackoverflow.com/users/1190212/nate"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1525296187, "post_id": 50143703, "comment_id": 87305695, "body": "Is that the -W* or -Wall (and friends) or -O* and friends?"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1525296227, "post_id": 50143703, "comment_id": 87305718, "body": "TBH they may be the greatest, but if they are from Debian stable they aren&#39;t the latest for sure. \ud83d\ude0f"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1525296310, "post_id": 50143703, "comment_id": 87305757, "body": "@nate <code>-Wall</code> and friends."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1525296718, "post_id": 50143703, "comment_id": 87305922, "body": "And if you feel like being a jerk to your code or have a mystery bug , add in <code>-pedantic</code> to see if it picks off any of the little, normally insignificant details."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1525300909, "post_id": 50143703, "comment_id": 87307345, "body": "Your code is evil.  The two constructors set the diameters to different values.  The constructor that uses a parameter doesn&#39;t use the parameter.  Evil."}, {"owner": {"reputation": 239, "user_id": 1190212, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a05abe9d9afdfa9f08e226bef5232eea?s=128&d=identicon&r=PG", "display_name": "nate", "link": "https://stackoverflow.com/users/1190212/nate"}, "edited": false, "score": 0, "creation_date": 1525311305, "post_id": 50143703, "comment_id": 87309512, "body": "yeah, it was put together quickly and the overloading was watched apparently very well..."}], "answers": [{"tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": true, "score": 5, "last_activity_date": 1525296088, "creation_date": 1525296088, "answer_id": 50143723, "question_id": 50143703, "link": "https://stackoverflow.com/questions/50143703/what-are-the-really-small-numbers-from-c-class/50143723#50143723", "title": "what are the really small numbers from? C++ class", "body": "<p>Your function is declared to return a <code>double</code></p>\n\n<pre><code>double Circle::area(void) {\n    double tmp = 3.1416 * 0.25 * diameter*diameter;\n    cout &lt;&lt; \"diameter is: \" &lt;&lt; diameter &lt;&lt; \" and area is: \" &lt;&lt; tmp &lt;&lt; endl;\n}\n</code></pre>\n\n<p>yet you have no <code>return</code> statement which returns a double. So this line</p>\n\n<pre><code>cout &lt;&lt; \"circle area: \" &lt;&lt; circB.area() &lt;&lt; endl;\n</code></pre>\n\n<p>will <a href=\"https://stackoverflow.com/questions/9936011/if-a-function-returns-no-value-with-a-valid-return-type-is-it-okay-to-for-the\">invoke undefined behavior</a> while outputting <code>.area()</code>. Instead you should return the result of your calculation</p>\n\n<pre><code>double Circle::area() {\n    double tmp = 3.1416 * 0.25 * diameter*diameter;\n    cout &lt;&lt; \"diameter is: \" &lt;&lt; diameter &lt;&lt; \" and area is: \" &lt;&lt; tmp &lt;&lt; endl;\n    return tmp;\n}\n</code></pre>\n"}], "owner": {"reputation": 239, "user_id": 1190212, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a05abe9d9afdfa9f08e226bef5232eea?s=128&d=identicon&r=PG", "display_name": "nate", "link": "https://stackoverflow.com/users/1190212/nate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 1, "accepted_answer_id": 50143723, "answer_count": 1, "score": 1, "last_activity_date": 1525296088, "creation_date": 1525295955, "question_id": 50143703, "link": "https://stackoverflow.com/questions/50143703/what-are-the-really-small-numbers-from-c-class", "title": "what are the really small numbers from? C++ class", "body": "<p>I know I should include a \"get_Diameter()\" function in the class, so as to access the private data member, but I haven't been able to figure out where the really small numbers come from.</p>\n\n<p>(Can ignore the Rectangle stuff - its a circle problem)</p>\n\n<p>Here is the driver code:</p>\n\n<pre><code>// classes example\n#include &lt;iostream&gt;\nusing namespace std;\n\n#include \"rect2.h\"\n#include \"roughCirc.h\"\n\nint main () {\n  Rectangle rect (3,4);\n  Rectangle rectb;\n  cout &lt;&lt; \"rect area: \" &lt;&lt; rect.area() &lt;&lt; endl;\n  cout &lt;&lt; \"rectb area: \" &lt;&lt; rectb.area() &lt;&lt; endl;\n  cout &lt;&lt; \" \" &lt;&lt; endl;\n\n  Circle circ (1.3);\n  cout &lt;&lt; \"circle area: \" &lt;&lt; circ.area() &lt;&lt; endl;\n\n  Circle circB;\n  cout &lt;&lt; \"circle area: \" &lt;&lt; circB.area() &lt;&lt; endl;\n  return 0;\n}\n/*\ng++ -o main2 main2.cpp rect2.cpp roughCirc.cpp \n*/\n</code></pre>\n\n<p>Class: roughCirc.h</p>\n\n<pre><code>class Circle {\n    double diameter;\n  public:\n    Circle (double);\n    Circle ();\n    double area (void);\n};\n</code></pre>\n\n<p>and roughCirc.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\n#include \"roughCirc.h\"\n\nCircle::Circle (double) {\n    diameter = 1.1212;\n}\n\nCircle::Circle () {\n    diameter = 32.42;\n}\n\ndouble Circle::area(void) {\n    double tmp = 3.1416 * 0.25 * diameter*diameter;\n    cout &lt;&lt; \"diameter is: \" &lt;&lt; diameter &lt;&lt; \" and area is: \" &lt;&lt; tmp &lt;&lt; endl;\n}\n</code></pre>\n\n<p>and the output;</p>\n\n<pre><code>X@X:X$ ./main2\nrect area: 12\nrectb area: 25\n\ncircle area: diameter is: 1.1212 and area is: 0.987318\n3.03428e-86\ncircle area: diameter is: 32.42 and area is: 825.5\n3.03428e-86\n</code></pre>\n\n<p>Not sure it matters, but I have latest and greatest packages from Debian stable. Command line is at bottom of driver file.</p>\n"}, {"tags": ["c++", "opengl", "assimp"], "answers": [{"comments": [{"owner": {"reputation": 323, "user_id": 9625207, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Manh Nguyen", "link": "https://stackoverflow.com/users/9625207/manh-nguyen"}, "edited": false, "score": 0, "creation_date": 1525819707, "post_id": 50234820, "comment_id": 87504141, "body": "Thanks for your answer. I just want to clear something up. I try to calculate the inverse bind pose matrix by concatenating y concatenating all the mTransformation starting from scene-&gt;rootNode to each bone in question. The result I get is different from mOffsetMatrix, which from my understanding, shouldn&#39;t be. Is this expected?"}, {"owner": {"reputation": 1033, "user_id": 4810165, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/tKBKF.png?s=128&g=1", "display_name": "livin_amuk", "link": "https://stackoverflow.com/users/4810165/livin-amuk"}, "edited": false, "score": 0, "creation_date": 1568567137, "post_id": 50234820, "comment_id": 102306019, "body": "I would love to know the answer to that question."}], "tags": [], "owner": {"reputation": 2059, "user_id": 1138311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67def91a371d970532624092bc75f6ec?s=128&d=identicon&r=PG", "display_name": "KimKulling", "link": "https://stackoverflow.com/users/1138311/kimkulling"}, "is_accepted": false, "score": 0, "last_activity_date": 1525786109, "creation_date": 1525786109, "answer_id": 50234820, "question_id": 50143649, "link": "https://stackoverflow.com/questions/50143649/what-does-moffsetmatrix-actually-do-in-assimp/50234820#50234820", "title": "What does mOffsetMatrix actually do in Assimp?", "body": "<p>The documentation is wrong. So I need to update our doc. See <a href=\"https://github.com/assimp/assimp/issues/1950\" rel=\"nofollow noreferrer\">issue 1950</a></p>\n"}, {"tags": [], "owner": {"reputation": 2059, "user_id": 1138311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67def91a371d970532624092bc75f6ec?s=128&d=identicon&r=PG", "display_name": "KimKulling", "link": "https://stackoverflow.com/users/1138311/kimkulling"}, "is_accepted": false, "score": 1, "last_activity_date": 1527791644, "creation_date": 1527791644, "answer_id": 50630692, "question_id": 50143649, "link": "https://stackoverflow.com/questions/50143649/what-does-moffsetmatrix-actually-do-in-assimp/50630692#50630692", "title": "What does mOffsetMatrix actually do in Assimp?", "body": "<p>Here is the answer for your question ( coming from a solution from the bug ):</p>\n\n<blockquote>\n  <p>it depends how you think of the transform. If the matrix\n  multiplications come after the point (i.e point * transform with point\n  being a \"row\" vector) then it makes sense to say it converts from\n  \"mesh space to bone space\", as it takes a point in mesh space and\n  outputs a point in bone space. But when using matrix premultiplication\n  as assimp does (tranform * point with point being a \"column\" vector)\n  it makes more sense to think of it as transforming the space itself,\n  from \"bone space to mesh space\", whereupon the point in mesh space can\n  be used.</p>\n  \n  <p>This is why the original poster is confused, because they are thinking\n  about it backwards compared to how assimp treats point transformation.\n  This is probably leading directly to their confusion with working out\n  the transformation matrix of the bone and thinking this should be the\n  same as mOffsetMatrix, when in fact it is the inverse.</p>\n  \n  <p>This is all especially confusing as DirectX uses postmultiplication,\n  and OpenGL uses premultiplication.</p>\n  \n  <p>This all said, i hope that someone can update the documentation so\n  that it makes it clear for everybody. It's very difficult to specify\n  clearly without an \"official\" way of thinking about this sort of\n  thing. I can't even find it documented anywhere how assimp treats\n  transformation matrix multiplication... although the matrix notation\n  used on the \"Data Structures\" page of the assimp docs implies\n  premultiplication with column vectors.</p>\n</blockquote>\n\n<p>Hope that this will help you.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 4484477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee3ca77fb78723c7fba23ee95425fb78?s=128&d=identicon&r=PG", "display_name": "CJ Gribel", "link": "https://stackoverflow.com/users/4484477/cj-gribel"}, "is_accepted": false, "score": 3, "last_activity_date": 1579733570, "creation_date": 1579733570, "answer_id": 59869381, "question_id": 50143649, "link": "https://stackoverflow.com/questions/50143649/what-does-moffsetmatrix-actually-do-in-assimp/59869381#59869381", "title": "What does mOffsetMatrix actually do in Assimp?", "body": "<p>The <strong>offsetMatrix</strong> of a bone is the <strong>inverse of that bone's global transform at bind pose</strong>. In other words, if you traverse the bone/node hierarchy, applying the local transform (<em>mTransformation</em> in Assimp) of each bone/node hierarchically to its children, we get the global transform for each bone/node. The <strong>inverse</strong> of this matrix for a particular bone equals its offsetMatrix. As implied here, it can be computed manually - regardless, it is constant and should not be computed per frame.</p>\n\n<p>The name \"offsetMatrix\", though somewhat confusing (something like <strong>inverseBind</strong> would be clearer), probably comes from its use. The transform we use for skinning is (<strong>B_keyframe * offsetMatrix</strong>), where <strong>B_keyframe</strong> is the global transformation of a bone at some target location, provided e.g. by an animation clip. This composite transformation is effectively an <em>offset</em>, from bind pose (where the mesh vertices are defined) to B_keyframe. When applied to vertices, (B_keyframe * offsetMatrix) will \"move\" vertices, from bind positions to whatever position B_keyframe transforms to.<br>\nNote that if B_keyframe is equal to the bind transform, e.g. computed from the skeleton's mTransformation:s as above, then (B_keyframe * offsetMatrix) is identity and vertices will not move from their original positions in bind pose.</p>\n\n<p>I personally favour the \"from mesh space to bone space\" definition when it comes to offsetMatrix. Why? Because the inverse of offsetMatrix - the (global) bone transform (at bind pose) - is most intuitively understood as a <strong>transformation from bone to mesh/model space</strong>. Inverting back, offsetMatrix transforms <strong>from mesh/model space to bone space</strong>.<br>\nCompare with the View matrix in rendering: it is the inverse of the camera's world transform (T*R), and is generally understood to transform from world to view space.</p>\n"}], "owner": {"reputation": 323, "user_id": 9625207, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Manh Nguyen", "link": "https://stackoverflow.com/users/9625207/manh-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 926, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1579733570, "creation_date": 1525295603, "last_edit_date": 1525296334, "question_id": 50143649, "link": "https://stackoverflow.com/questions/50143649/what-does-moffsetmatrix-actually-do-in-assimp", "title": "What does mOffsetMatrix actually do in Assimp?", "body": "<p>I am quite sure that mOffsetMatrix transforms vertex from mesh space to bone space, which is confirmed by this one\n<a href=\"http://assimp.sourceforge.net/lib_html/structai_bone.html\" rel=\"nofollow noreferrer\">http://assimp.sourceforge.net/lib_html/structai_bone.html</a></p>\n\n<p>But then I saw this, which says that it actually transforms vertices from bone space to mesh space.\n<a href=\"https://github.com/assimp/assimp/pull/1803\" rel=\"nofollow noreferrer\">https://github.com/assimp/assimp/pull/1803</a></p>\n\n<p>Now I am very confused. So what exactly does mOffsetMatrix do?</p>\n"}, {"tags": ["c++", "cmake", "clang"], "comments": [{"owner": {"reputation": 6147, "user_id": 948652, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/22ed67baa24e475226ef327a818e4ffd?s=128&d=identicon&r=PG", "display_name": "arynaq", "link": "https://stackoverflow.com/users/948652/arynaq"}, "edited": false, "score": 0, "creation_date": 1525295860, "post_id": 50143560, "comment_id": 87305573, "body": "target_compile_definitions"}], "answers": [{"tags": [], "owner": {"reputation": 333, "user_id": 5310544, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5Gv9DnOaW1s/AAAAAAAAAAI/AAAAAAAAEgA/E67WwOkt5QQ/photo.jpg?sz=128", "display_name": "\u013dubom&#237;r Carik", "link": "https://stackoverflow.com/users/5310544/%c4%bdubom%c3%adr-carik"}, "is_accepted": false, "score": 1, "last_activity_date": 1525296194, "creation_date": 1525296194, "answer_id": 50143745, "question_id": 50143560, "link": "https://stackoverflow.com/questions/50143560/how-to-ignore-cmake-compiler-definitions-in-sub-projects/50143745#50143745", "title": "How to ignore CMake Compiler Definitions in sub projects", "body": "<p>Using global 'add_definition' is old-approach. In present may be much better define compiler flags, defines etc. per <a href=\"https://cmake.org/cmake/help/v3.11/manual/cmake-properties.7.html#properties-on-targets\" rel=\"nofollow noreferrer\">target</a>, folder, source files etc. (in your case COMPILE_DEFINITIONS?)</p>\n\n<p>Just google for 'modern CMake' and you will find slides and videos from conferences how to use modern CMake.</p>\n"}], "owner": {"reputation": 43, "user_id": 9583555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78fe8493b6f27d95e0ba1b0900238889?s=128&d=identicon&r=PG&f=1", "display_name": "J.Alex", "link": "https://stackoverflow.com/users/9583555/j-alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525296194, "creation_date": 1525295228, "question_id": 50143560, "link": "https://stackoverflow.com/questions/50143560/how-to-ignore-cmake-compiler-definitions-in-sub-projects", "title": "How to ignore CMake Compiler Definitions in sub projects", "body": "<p>I have a main project that has several 3rd party libraries. I just added a new 3rd party project. The problem I'm facing is the new project breaks when the main project compiler definitions are passed to it.</p>\n\n<p>How can I avoid passing these definitions to the 3rd party project?\nAlso, if the 3rd party project is compiled stand-alone, it only requires two include directories. But when compiled with the main project there are many extra directories passed to it.</p>\n\n<p>I've tried looking for a set_definition() but I'm not seeing anything helpful.\nAny links to examples or write ups will be nice. It might also be that I'm not looking for the right solution.\nthanks</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 1, "creation_date": 1525295083, "post_id": 50143444, "comment_id": 87305247, "body": "The error is most likely related to <code>std::string s = filename-&gt;ToString;</code> which should be <code>std::string s = filename-&gt;ToString();</code>"}, {"owner": {"reputation": 377, "user_id": 9727794, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-78JCXtToqjE/AAAAAAAAAAI/AAAAAAAACo8/_q1Fu3iRpx0/photo.jpg?sz=128", "display_name": "hamza saber", "link": "https://stackoverflow.com/users/9727794/hamza-saber"}, "reply_to_user": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1525295301, "post_id": 50143444, "comment_id": 87305339, "body": "nope when i do that it gives an error caus ToString without () is a Function of the type string^ not string (there&#39;s a difference)"}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1525295838, "post_id": 50143444, "comment_id": 87305567, "body": "No, the error is <a href=\"https://imgur.com/a/3Deauj8\" rel=\"nofollow noreferrer\">EXACTLY</a> because of that"}, {"owner": {"reputation": 377, "user_id": 9727794, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-78JCXtToqjE/AAAAAAAAAAI/AAAAAAAACo8/_q1Fu3iRpx0/photo.jpg?sz=128", "display_name": "hamza saber", "link": "https://stackoverflow.com/users/9727794/hamza-saber"}, "reply_to_user": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1525296269, "post_id": 50143444, "comment_id": 87305735, "body": "@KillzoneKid well here &#39;s the error that gives me: <code>1&gt;c:\\users\\morganis\\source\\repos\\project4\\project4\\myform.h(&zwnj;&#8203;201): error C2440: &#39;initializing&#39;: cannot convert from &#39;System::String ^&#39; to &#39;std::basic_string&lt;char,std::char_traits&lt;char&gt;,std::allocato&zwnj;&#8203;r&lt;char&gt;&gt;&#39; 1&gt;c:\\users\\morganis\\source\\repos\\project4\\project4\\myform.h(&zwnj;&#8203;201): note: No constructor could take the source type, or constructor overload resolution was ambiguous</code>"}], "answers": [{"comments": [{"owner": {"reputation": 377, "user_id": 9727794, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-78JCXtToqjE/AAAAAAAAAAI/AAAAAAAACo8/_q1Fu3iRpx0/photo.jpg?sz=128", "display_name": "hamza saber", "link": "https://stackoverflow.com/users/9727794/hamza-saber"}, "edited": false, "score": 0, "creation_date": 1525378665, "post_id": 50144286, "comment_id": 87344365, "body": "Thank you very much although the only thing i did is: <code>std::string s = msclr::interop::marshal_as&lt;std::string&gt;(filename);</code>"}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "reply_to_user": {"reputation": 377, "user_id": 9727794, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-78JCXtToqjE/AAAAAAAAAAI/AAAAAAAACo8/_q1Fu3iRpx0/photo.jpg?sz=128", "display_name": "hamza saber", "link": "https://stackoverflow.com/users/9727794/hamza-saber"}, "edited": false, "score": 0, "creation_date": 1525379099, "post_id": 50144286, "comment_id": 87344576, "body": "Yes, it looks like direct String ^ to std::string marshalling is also supported. Glad you sorted it."}], "tags": [], "owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "is_accepted": true, "score": 1, "last_activity_date": 1525299102, "creation_date": 1525299102, "answer_id": 50144286, "question_id": 50143444, "link": "https://stackoverflow.com/questions/50143444/snap-c-string-type-issue-stdstring-to-tstr/50144286#50144286", "title": "SNAP C++ string type issue std::string to TStr", "body": "<p>It looks like you are using System Strings <a href=\"https://docs.microsoft.com/en-us/cpp/windows/string-cpp-component-extensions\" rel=\"nofollow noreferrer\">component extension</a>. In this case you can use marshalling for conversion from <code>System::String ^</code> to <code>std::string</code>. Include: <code>&lt;msclr/marshal_cppstd.h&gt;</code> and use <code>msclr::interop::marshal_as</code> method, like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;msclr/marshal_cppstd.h&gt;\n\nclass Dialog\n{\npublic:\n    System::String^ FileName()\n    {\n        return \"name\";\n    }\n};\n\nint main(array&lt;System::String ^&gt; ^args)\n{\n    Dialog *openFileDialog1 = new Dialog;\n    System::String^ filename = openFileDialog1-&gt;FileName();\n    std::string s = msclr::interop::marshal_as&lt;std::string&gt;(filename-&gt;ToString());\n\n    std::cout &lt;&lt; s &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 377, "user_id": 9727794, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-78JCXtToqjE/AAAAAAAAAAI/AAAAAAAACo8/_q1Fu3iRpx0/photo.jpg?sz=128", "display_name": "hamza saber", "link": "https://stackoverflow.com/users/9727794/hamza-saber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "closed_date": 1525301118, "accepted_answer_id": 50144286, "answer_count": 1, "score": 1, "last_activity_date": 1525300981, "creation_date": 1525294559, "last_edit_date": 1525300981, "question_id": 50143444, "link": "https://stackoverflow.com/questions/50143444/snap-c-string-type-issue-stdstring-to-tstr", "closed_reason": "Duplicate", "title": "SNAP C++ string type issue std::string to TStr", "body": "<p>In the <strong>SNAP Library</strong> there's a method that allows me to save a file in my pc here it is:</p>\n\n<pre><code>TSnap::SaveEdgeList(G, q, \"Edge list format\");`\n</code></pre>\n\n<p>In this function the 2nd argument its type is <strong>TStr</strong> which represents string types in <strong>SNAP library</strong></p>\n\n<p>I have a <code>string^</code> variable that contains a full directory of where I want to put my file like this (P.S: it contains only one backslash so i have to replace it with double backslash)</p>\n\n<pre><code>string^ filename = openFileDialog1-&gt;FileName;\n</code></pre>\n\n<p>Then i convert filename variable of type <code>string^</code> to <code>std::string</code> like this:</p>\n\n<pre><code>std::string s = filename-&gt;ToString;\n</code></pre>\n\n<p>What I want to do is to give the content of the string variable <code>s</code> to a <strong>TStr</strong> variable and with the help of of fellow members here i did like this:</p>\n\n<pre><code>TStr q = s.c_str();;\n</code></pre>\n\n<p>But unfortunately it still gives an error:</p>\n\n<pre><code>error C3867: 'System::String::ToString': non-standard syntax; use '&amp;' to create a pointer to member\n</code></pre>\n\n<p>Does anyone have a suggestion, or an alternative solution, or something?</p>\n"}, {"tags": ["c++", "r", "rcpp"], "comments": [{"owner": {"reputation": 73862, "user_id": 3358272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/gteVQ.jpg?s=128&g=1", "display_name": "r2evans", "link": "https://stackoverflow.com/users/3358272/r2evans"}, "edited": false, "score": 0, "creation_date": 1525294848, "post_id": 50143425, "comment_id": 87305158, "body": "I recommend you include versions, at least: R, RStudio, and <code>Rcpp</code>. Better yet, <code>sessionInfo()</code> or <code>devtools::session_info()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1525297239, "post_id": 50143843, "comment_id": 87306142, "body": "Spot on.  Also @coatless often makes the point that the RcppArmadillo containers can help here as you can turn checks for out-of-bounds access on."}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1525301195, "post_id": 50143843, "comment_id": 87307418, "body": "Also, ` NumericMatrix mat(data_size, 2);` means you can only access columns 0 and 1, not 1 and 2."}], "tags": [], "owner": {"reputation": 51325, "user_id": 474349, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/ZMmIm.png?s=128&g=1", "display_name": "Hong Ooi", "link": "https://stackoverflow.com/users/474349/hong-ooi"}, "is_accepted": false, "score": 3, "last_activity_date": 1525296718, "creation_date": 1525296718, "answer_id": 50143843, "question_id": 50143425, "link": "https://stackoverflow.com/questions/50143425/rstudio-keeps-crashing-with-rcpp/50143843#50143843", "title": "RStudio keeps crashing with Rcpp", "body": "<blockquote>\n<pre><code>for (int i = 0; i &lt; data_size; i++) {\n  mat(i, 1) = pow(data(i-1, 1), 2) + mytheta(1)*mat(i-1, 1);\n  ans = ans + 1;\n}\n</code></pre>\n</blockquote>\n\n<p>When <code>i == 0</code>, you try to access <code>data(-1, 1)</code> and things go pear-shaped from there. The fact that it didn't crash the first time you ran it just means you got lucky (or unlucky, in that it lured you into a false sense of confidence).</p>\n"}, {"tags": [], "owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "is_accepted": true, "score": 1, "last_activity_date": 1525302188, "creation_date": 1525302188, "answer_id": 50144730, "question_id": 50143425, "link": "https://stackoverflow.com/questions/50143425/rstudio-keeps-crashing-with-rcpp/50144730#50144730", "title": "RStudio keeps crashing with Rcpp", "body": "<p>So here is a repaired version with</p>\n\n<ul>\n<li>@HongOoi's correction to the loop index</li>\n<li>my correction to the columns</li>\n<li>R code in the C++ file</li>\n<li>no outout from C++ code called N times</li>\n<li>output at end</li>\n<li>seeding the RNG to make it reproducible</li>\n</ul>\n\n<h3>Code</h3>\n\n<pre><code>#include \"Rcpp.h\"\n#include \"math.h\"\nusing namespace Rcpp;\n\n// [[Rcpp::export]]\ndouble myfunction(const NumericVector&amp; theta, const NumericMatrix&amp; data) {\n\n  double ans = 0;\n\n  int theta_size = theta.length();\n  NumericVector mytheta(theta_size);\n\n  int data_size = data.nrow();\n  NumericMatrix mat(data_size, 2);\n\n  for (int i = 0; i &lt; theta_size; i++) {\n    mytheta(i) = exp(theta(i));\n  }\n\n  if ( true ) {  // Flow control\n\n    for (int i = 1; i &lt; data_size; i++) {\n      mat(i, 0) = pow(data(i-1, 0), 2) + mytheta(1)*mat(i-1, 0);\n      ans = ans + 1;\n    }\n\n    for (int i = 1; i &lt; data_size; i++) {\n      mat(i, 1) = pow(data(i-1, 1), 2) + mytheta(4)*mat(i-1, 1);\n      ans = ans + 1;\n    }\n\n  }\n\n  //Rcout &lt;&lt; \"Ok!\\n\";\n\n  return ans;\n}\n\n/**** R\nset.seed(123)\ndata1      &lt;- rnorm(2000)\ndata2      &lt;- rnorm(2000)\n\nmydata &lt;- matrix(cbind(data1, data2), nrow=2000, ncol=2)\nvalues &lt;- log(1:6)\n\nfor (i in 1:1000) {\n  myfunction(values, mydata)\n}\ncat(\"Success\\n\")\n*/\n</code></pre>\n\n<h3>Demo</h3>\n\n<pre><code>edd@rob:~$ Rscript -e 'Rcpp::sourceCpp(\"/tmp/trusky.cpp\")'\n\nR&gt; set.seed(123)\n\nR&gt; data1 &lt;- rnorm(2000)\n\nR&gt; data2 &lt;- rnorm(2000)\n\nR&gt; mydata &lt;- matrix(cbind(data1, data2), nrow = 2000, \n+     ncol = 2)\n\nR&gt; values &lt;- log(1:6)\n\nR&gt; for (i in 1:1000) {\n+     myfunction(values, mydata)\n+ }\n\nR&gt; cat(\"Success\\n\")\nSuccess\nedd@rob:~$ \n</code></pre>\n"}], "owner": {"reputation": 387, "user_id": 6626765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001443a0c6e2ade7f376d9a2088ce9a8?s=128&d=identicon&r=PG&f=1", "display_name": "Trusky", "link": "https://stackoverflow.com/users/6626765/trusky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 605, "favorite_count": 0, "accepted_answer_id": 50144730, "answer_count": 2, "score": 2, "last_activity_date": 1525302188, "creation_date": 1525294495, "last_edit_date": 1525297870, "question_id": 50143425, "link": "https://stackoverflow.com/questions/50143425/rstudio-keeps-crashing-with-rcpp", "title": "RStudio keeps crashing with Rcpp", "body": "<p>I'd like to understand what is making this program crash. I've seen at least three related questions <a href=\"https://stackoverflow.com/questions/24353078/rstudio-crashes-with-rcpp-with-reproducible-codes\">here</a>, <a href=\"https://www.mail-archive.com/rcpp-devel@lists.r-forge.r-project.org/msg07667.html\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://stackoverflow.com/questions/33768796/rstudio-crashes-after-calling-an-rcpp-function-multiple-times\">here</a>, but I haven't found a clear answer addressing the issue, so here's is some sample code to replicate the problem.</p>\n\n<p><strong>The R code:</strong></p>\n\n<pre><code>library(Rcpp)\n\nRcpp::sourceCpp(\"myfunction.cpp\")\n\ndata1      &lt;- rnorm(2000)\ndata2      &lt;- rnorm(2000)\n\nmydata &lt;- matrix(cbind(data1, data2), nrow=2000, ncol=2)\nvalues &lt;- log(1:6)\n\nfor (i in 1:1000) {\n  myfunction(values, mydata)\n}\n</code></pre>\n\n<p><strong>The C++ code:</strong></p>\n\n<pre><code>#include \"Rcpp.h\"\n#include \"math.h\"\nusing namespace Rcpp;\n\n// [[Rcpp::export]]\ndouble myfunction(const NumericVector&amp; theta, const NumericMatrix&amp; data) {\n\n  double ans = 0;\n\n  int theta_size = theta.length();\n  NumericVector mytheta(theta_size);\n\n  int data_size = data.nrow();\n  NumericMatrix mat(data_size, 2);\n\n  for (int i = 0; i &lt; theta_size; i++) {\n    mytheta(i) = exp(theta(i));\n  }\n\n  if ( true ) {  // Flow control\n\n    for (int i = 0; i &lt; data_size; i++) {\n      mat(i, 1) = pow(data(i-1, 1), 2) + mytheta(1)*mat(i-1, 1);\n      ans = ans + 1;\n    }\n\n    for (int i = 0; i &lt; data_size; i++) {\n      mat(i, 2) = pow(data(i-1, 2), 2) + mytheta(4)*mat(i-1, 2);\n      ans = ans + 1;\n    }\n\n  }\n\n  Rcout &lt;&lt; \"Ok!\\n\";\n\n  return ans;\n}\n</code></pre>\n\n<p>Everything works fine <em>at least the first time</em> I use <code>myfunction()</code>, but it then crashes when called within the R for loop. I reinstalled R, Rtools and RStudio (on Windows) to see if maybe something was wrong with the installation, but I still face the same issue.</p>\n\n<p>This is making the seamless integration between R and C++ less seamless that I first thought, and since I've seen that I'm not the only one who's been facing this issue, it looks like we are all making some <em>obvious mistake</em> when starting with Rcpp (at least on RStudio), but what is it?</p>\n\n<p>Essentially, I want to be sure I'm not missing something completely obvious here because all the answers I've seen so far seem to imply that it is the case.</p>\n\n<p><strong>Note</strong>: this is a shortened version of a longer function I've been testing with Rcpp, the original version seems to work fine the first <em>few</em> times I call it, but it also eventually crashes.</p>\n\n<p>Update: removed rm(), oops.</p>\n"}, {"tags": ["c++", "multithreading", "makefile"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1525294644, "post_id": 50143399, "comment_id": 87305062, "body": "Libraries should not be part of the flags. You want something like <code>g++ flagshere myprog.cpp -lpthread -o myprog</code>"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1525294806, "post_id": 50143399, "comment_id": 87305141, "body": "You only need <code>-pthread</code> and you need to add <code>$(CXXFLAGS)</code> to your link command"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1525295110, "post_id": 50143399, "comment_id": 87305259, "body": "@Galik The compile command. <code>-pthread</code> is a compiler flag."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1525295257, "post_id": 50143399, "comment_id": 87305325, "body": "@juanchopanza Yes you are right, I think it should be added to both?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1525295559, "post_id": 50143399, "comment_id": 87305449, "body": "@Galik Actually it seems to be both a preprocessor option and a link option..."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1525295632, "post_id": 50143399, "comment_id": 87305482, "body": "@juanchopanza It is a compiler flag but it is potentially useful for both compiling and linking. When linking throught the compiler it tells GCC to add the correct libraries."}], "answers": [{"tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": true, "score": 2, "last_activity_date": 1525294967, "creation_date": 1525294967, "answer_id": 50143514, "question_id": 50143399, "link": "https://stackoverflow.com/questions/50143399/c-17-makefile-flags-for-pthread/50143514#50143514", "title": "C++ 17: Makefile flags for pthread", "body": "<p>You only need <code>-pthread</code>.</p>\n\n<p>Also <code>CXXFLAGS</code> only adds itself to <em>implicit rules</em>, if you make an <em>explicit rule</em> you need to add it yourself.</p>\n\n<pre><code>$(NAME): $(OBJ)\n    g++ $(CXXFLAGS) $(OBJ) -o $(NAME)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5850395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a4ba2d42adc832c33417dc5f847da6c?s=128&d=identicon&r=PG", "display_name": "Mr Smith", "link": "https://stackoverflow.com/users/5850395/mr-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 400, "favorite_count": 0, "accepted_answer_id": 50143514, "answer_count": 1, "score": -2, "last_activity_date": 1525294967, "creation_date": 1525294384, "question_id": 50143399, "link": "https://stackoverflow.com/questions/50143399/c-17-makefile-flags-for-pthread", "title": "C++ 17: Makefile flags for pthread", "body": "<p>Having</p>\n\n<pre><code>CXXFLAGS += -Wall -Werror -Wextra -std=c++17\nCXXFLAGS += -I inc/ -lpthread -pthread\n\nSRC =   ...\nOBJ =   $(SRC:.cpp=.o)\n\nNAME    =   ...\n\n$(NAME): $(OBJ)\n    g++ $(OBJ) -o $(NAME)\n\nall: $(NAME)\n\n$(NAME): $(OBJ)\n    g++ $(OBJ) -o $(NAME)\n</code></pre>\n\n<p>I tried with -<code>pthread</code> alone, with -<code>lpthread</code> alone, and both.\nStill getting the following error on compilation:</p>\n\n<pre><code>g++ src/Main.o src/Logger.o src/handlers/MasterPacketHandler.o src/handlers/SlavePacketHandler.o src/netwotk/AbstractPacketHandler.o src/netwotk/NetworkBuffer.o src/netwotk/NetworkClient.o src/netwotk/NetworkProtocol.o src/netwotk/NetworkServer.o src/process/SlaveWorker.o src/process/Task.o src/process/TaskDispatcher.o src/process/ThreadPoolExecutor.o src/process/Timer.o src/protocol/DestroyProcessMessage.o src/protocol/FreePlaceMessage.o src/protocol/SearchRequestMessage.o src/protocol/SearchResultMessage.o -o plazza\nsrc/Main.o\u00a0: Dans la fonction \u00ab\u00a0std::__shared_mutex_pthread::unlock()\u00a0\u00bb\u00a0:\nMain.cpp:(.text._ZNSt22__shared_mutex_pthread6unlockEv[_ZNSt22__shared_mutex_pthread6unlockEv]+0x14)\u00a0: r\u00e9f\u00e9rence ind\u00e9finie vers \u00ab\u00a0pthread_rwlock_unlock\u00a0\u00bb\nsrc/Main.o\u00a0: Dans la fonction \u00ab\u00a0std::__shared_mutex_pthread::lock_shared()\u00a0\u00bb\u00a0:\nMain.cpp:(.text._ZNSt22__shared_mutex_pthread11lock_sharedEv[_ZNSt22__shared_mutex_pthread11lock_sharedEv]+0x14)\u00a0: r\u00e9f\u00e9rence ind\u00e9finie vers \u00ab\u00a0pthread_rwlock_rdlock\u00a0\u00bb\nsrc/netwotk/NetworkClient.o\u00a0: Dans la fonction \u00ab\u00a0std::__shared_mutex_pthread::lock()\u00a0\u00bb\u00a0:\nNetworkClient.cpp:(.text._ZNSt22__shared_mutex_pthread4lockEv[_ZNSt22__shared_mutex_pthread4lockEv]+0x14)\u00a0: r\u00e9f\u00e9rence ind\u00e9finie vers \u00ab\u00a0pthread_rwlock_wrlock\u00a0\u00bb\nsrc/netwotk/NetworkClient.o\u00a0: Dans la fonction \u00ab\u00a0std::thread::thread&lt;std::thread&amp; (NetworkClient::*)(bool), NetworkClient*, bool&gt;(std::thread&amp; (NetworkClient::*&amp;&amp;)(bool), NetworkClient*&amp;&amp;, bool&amp;&amp;)\u00a0\u00bb\u00a0:\nNetworkClient.cpp:(.text._ZNSt6threadC2IM13NetworkClientFRS_bEJPS1_bEEEOT_DpOT0_[_ZNSt6threadC5IM13NetworkClientFRS_bEJPS1_bEEEOT_DpOT0_]+0x2a)\u00a0: r\u00e9f\u00e9rence ind\u00e9finie vers \u00ab\u00a0pthread_create\u00a0\u00bb\nsrc/netwotk/NetworkServer.o\u00a0: Dans la fonction \u00ab\u00a0std::thread::thread&lt;std::thread&amp; (NetworkServer::*)(bool), NetworkServer*, bool&gt;(std::thread&amp; (NetworkServer::*&amp;&amp;)(bool), NetworkServer*&amp;&amp;, bool&amp;&amp;)\u00a0\u00bb\u00a0:\nNetworkServer.cpp:(.text._ZNSt6threadC2IM13NetworkServerFRS_bEJPS1_bEEEOT_DpOT0_[_ZNSt6threadC5IM13NetworkServerFRS_bEJPS1_bEEEOT_DpOT0_]+0x2a)\u00a0: r\u00e9f\u00e9rence ind\u00e9finie vers \u00ab\u00a0pthread_create\u00a0\u00bb\nsrc/process/ThreadPoolExecutor.o\u00a0: Dans la fonction \u00ab\u00a0std::thread::thread&lt;void (ThreadPoolExecutor::*)(), ThreadPoolExecutor*&gt;(void (ThreadPoolExecutor::*&amp;&amp;)(), ThreadPoolExecutor*&amp;&amp;)\u00a0\u00bb\u00a0:\nThreadPoolExecutor.cpp:(.text._ZNSt6threadC2IM18ThreadPoolExecutorFvvEJPS1_EEEOT_DpOT0_[_ZNSt6threadC5IM18ThreadPoolExecutorFvvEJPS1_EEEOT_DpOT0_]+0x24)\u00a0: r\u00e9f\u00e9rence ind\u00e9finie vers \u00ab\u00a0pthread_create\u00a0\u00bb\nsrc/process/Timer.o\u00a0: Dans la fonction \u00ab\u00a0std::thread::thread&lt;void (Timer::*)(), Timer*&gt;(void (Timer::*&amp;&amp;)(), Timer*&amp;&amp;)\u00a0\u00bb\u00a0:\nTimer.cpp:(.text._ZNSt6threadC2IM5TimerFvvEJPS1_EEEOT_DpOT0_[_ZNSt6threadC5IM5TimerFvvEJPS1_EEEOT_DpOT0_]+0x24)\u00a0: r\u00e9f\u00e9rence ind\u00e9finie vers \u00ab\u00a0pthread_create\u00a0\u00bb\ncollect2: error: ld returned 1 exit status\nMakefile:28\u00a0: la recette pour la cible \u00ab\u00a0plazza\u00a0\u00bb a \u00e9chou\u00e9e\nmake: *** [plazza] Erreur 1\n</code></pre>\n\n<p>It's a french compiler :/ But it says undefined reference to <code>pthread_rwlock_unlock</code> and <code>pthread_create</code>.. \nMy lib <code>pthread</code> is well installed, do I get this error due of using <code>shared_mutex</code> from c++ 17 ?</p>\n"}, {"tags": ["c++", "recursion", "primes"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1525294939, "post_id": 50143356, "comment_id": 87305185, "body": "Do you know how to generate a number that&#39;s exactly one digit?"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1525295102, "post_id": 50143356, "comment_id": 87305252, "body": "Numbers with 7 digits are in the range 1000000 to 9999999."}, {"owner": {"reputation": 11, "user_id": 9149894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ed3525d8eb06795b85cfea7fa31fcd?s=128&d=identicon&r=PG&f=1", "display_name": "Carolina", "link": "https://stackoverflow.com/users/9149894/carolina"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1525295164, "post_id": 50143356, "comment_id": 87305285, "body": "To be honest, not really. The best (and the only thing at the moment) I can get is the number of two digits. @DrewDormann"}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1525308961, "post_id": 50143356, "comment_id": 87309029, "body": "Just recursively brute force it. Use recursion to loop over the possibilities for the first digit, the second, and so on. Use a simple prime checking algorithm to see if it&#39;s prime each time you try adding a digit to the end. Then just think of ways to optimize this and you&#39;re good."}, {"owner": {"reputation": 11, "user_id": 9149894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ed3525d8eb06795b85cfea7fa31fcd?s=128&d=identicon&r=PG&f=1", "display_name": "Carolina", "link": "https://stackoverflow.com/users/9149894/carolina"}, "reply_to_user": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1525352642, "post_id": 50143356, "comment_id": 87329204, "body": "Thanks for the answer:) I understand that I need to use recursion but the thing is I don&#39;t know how to terminate from it. I mean I need to print all possible solutions. When I terminate recursion at the length I want I don&#39;t know how to get back to my begging number. Like I need numbers of 3 digits. I stop it when it reaches 3 with if statement and it prints 233. But how can I come back to the number 23 and make it generate 239 for example or how can I come back to number 2 , so it starts generating second number and so it not includes 23? @FeiXiang"}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1525394695, "post_id": 50143356, "comment_id": 87349091, "body": "Well, that&#39;s one of the problems recursion solves. You can have nested loops with a variable depth. You have a loop in the function looping over possible digits to add to the end, and each time you try a digit, you make a recursive call. After one call prints out a number, it returns to the loop in the caller which loops on to the next number."}, {"owner": {"reputation": 11, "user_id": 9149894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ed3525d8eb06795b85cfea7fa31fcd?s=128&d=identicon&r=PG&f=1", "display_name": "Carolina", "link": "https://stackoverflow.com/users/9149894/carolina"}, "reply_to_user": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1525445361, "post_id": 50143356, "comment_id": 87372507, "body": "Thank you very much! I tried it and now finally the program works:) @FeiXiang"}], "owner": {"reputation": 11, "user_id": 9149894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ed3525d8eb06795b85cfea7fa31fcd?s=128&d=identicon&r=PG&f=1", "display_name": "Carolina", "link": "https://stackoverflow.com/users/9149894/carolina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 395, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1525294209, "creation_date": 1525294209, "question_id": 50143356, "link": "https://stackoverflow.com/questions/50143356/super-prime-numbers-how-to-generate-number-with-exactly-n-amount-of-digits", "title": "Super prime numbers. How to generate number with exactly n amount of digits?", "body": "<p>Recently I have started learning programming on my own and I've come up with this problem I'm struggling with. As an input I have an integer <strong>N</strong> which can be anything from 2 to 9. <strong>N</strong> - is the amount of digits in my final super prime number. According to the problem, super prime number is the number which is prime itself as well when every time I remove the last digit, the remainder must be prime and so on until I got only one digit left. I have to print all super prime numbers, containing the N amount of digits. The problem is that I don't know how to generate a number with exactly N amount of digits.<br>\nHere what it says it should be:</p>\n\n<pre><code>Input:\n7\nOutput:\n2339933 \n2399333 \n2939999 \n3733799 \n5939333 \n7393913 \n7393931 \n7393933\n</code></pre>\n\n<p>What I get is 23 and 29 repeated multiple times.\nI would be very thankful if someone could help me with this one. </p>\n\n<pre><code>void makeNumber(int &amp;num, int&amp;di, int&amp;num1 )\n{\n    num1=num*10+di;\n}\nvoid generatedigit (int &amp;n, int &amp;num, int middle[], int&amp;di, int&amp;num1, int &amp;endlen)\n{\nfor(int j=endlen; j&lt;n;j++){\n    for(int i=0;i&lt;4;i++)\n    {\n        di=middle[i];\n        makeNumber(num, di,num1);\n        if(!isPrime(num1))  {endlen++; generatedigit(n,num,middle,di,num1,endlen); cout&lt;&lt;num1&lt;&lt;endl;}\n    }\n    }\n}\n\nint main(){\n  int n,di;\n   cin&gt;&gt;n;\n   int num,num1,endlen;\n   endlen=1;\n   int firstnum[4]={2,3,5,7};\n   int middle[4]={1,3,7,9};\n   for(int i=0;i&lt;4;i++)\n   {\n       num=firstnum[i];\n       generatedigit(n,num,middle,di,num1,endlen);}\n\n   }\n</code></pre>\n"}, {"tags": ["c++", "random", "statistics", "std", "distribution"], "comments": [{"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1525293821, "post_id": 50143158, "comment_id": 87304682, "body": "Can you give a concrete example of what you&#39;re trying to do?  I&#39;m not at all sure I understand your question as it currently stands.  If I am understanding, I&#39;m wondering why you don&#39;t just shuffle and then iterate through the shuffled set."}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1525295485, "post_id": 50143158, "comment_id": 87305423, "body": "Did You check this: <a href=\"https://en.cppreference.com/w/cpp/numeric/random/discrete_distribution\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/numeric/random/discrete_distributi&zwnj;&#8203;on</a> ? What is it missing for You?"}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1525295642, "post_id": 50143158, "comment_id": 87305484, "body": "This is what (draft) standard says about this function: <a href=\"http://eel.is/c++draft/rand.dist.samp.discrete\" rel=\"nofollow noreferrer\">eel.is/c++draft/rand.dist.samp.discrete</a>"}, {"owner": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "edited": false, "score": 0, "creation_date": 1525295655, "post_id": 50143158, "comment_id": 87305487, "body": "Regarding point 2, cppreference page on discrete_distribution&#39;s operator() says what the RNG must do (with a clickable link)"}, {"owner": {"reputation": 62, "user_id": 8737338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14b7137040b16e6a972348c265fd20b2?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/8737338/prometheus"}, "edited": false, "score": 0, "creation_date": 1525295786, "post_id": 50143158, "comment_id": 87305547, "body": "Hello, for sure!;) for the first case (drawing without putting back) this is an option - turning to which algorithm it&#39;s shuffled the results may be not as good as by drawing from randomness. For the second case drawing with putting back from probabilities  there is no other chance ( as far as I know ) as drawing from a distribution. The main questions regard to functionality of std::discrete_distribution - e.g. with functionality is called inside from Prng so what is mandatory for my Prng&#39;s. How does this thing work? I tried to reed in stdl but what is more than cryptic for my knowledge"}, {"owner": {"reputation": 62, "user_id": 8737338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14b7137040b16e6a972348c265fd20b2?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/8737338/prometheus"}, "reply_to_user": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1525296138, "post_id": 50143158, "comment_id": 87305678, "body": "@RobertAndrzejuk yes exactly this part I read ... but which function from PRNG will be called ? How can I modify the paramter set after each call? For sure it&#39;s a good starting point but I need more information"}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1525296147, "post_id": 50143158, "comment_id": 87305681, "body": "I think if You add a simple program in R with input and output, which is mentioned, then it would help to produce an equivalent program in C++."}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1525296755, "post_id": 50143158, "comment_id": 87305940, "body": "<a href=\"https://stat.ethz.ch/R-manual/R-patched/library/base/html/sample.html\" rel=\"nofollow noreferrer\">stat.ethz.ch/R-manual/R-patched/library/base/html/sample.htm&zwnj;&#8203;l</a>"}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1525297419, "post_id": 50143158, "comment_id": 87306220, "body": "Which C++ compiler and version do You want to use?"}], "answers": [{"comments": [{"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1525448415, "post_id": 50144086, "comment_id": 87374418, "body": "@prometheus Do you understand this?"}], "tags": [], "owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1525302314, "last_edit_date": 1525302314, "creation_date": 1525298002, "answer_id": 50144086, "question_id": 50143158, "link": "https://stackoverflow.com/questions/50143158/behavior-of-cs-stddiscrete-distribution-vs-sample-in-r/50144086#50144086", "title": "Behavior of C++&#39;s std::discrete_distribution vs. sample() in R", "body": "<p>C++17 gives us the <a href=\"https://en.cppreference.com/w/cpp/algorithm/sample\" rel=\"nofollow noreferrer\"><code>std::sample</code></a> function:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;random&gt;\n#include &lt;string&gt;\n#include &lt;iterator&gt;\n#include &lt;algorithm&gt;\n\nint main()\n{\n    std::string in = \"abcdefgh\";\n    std::string out;\n\n    std::sample(in.begin(), in.end(), \n                std::back_inserter(out),\n                5,\n                std::mt19937{std::random_device{}()} //(*)\n                );\n\n    std::cout &lt;&lt; \"five random letters out of \" &lt;&lt; in &lt;&lt; \" : \" &lt;&lt; out &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>If You don't have C++17, then proposal <a href=\"https://wg21.link/n3925\" rel=\"nofollow noreferrer\">A sample Proposal, v4</a> contains a sample implementation (using uniform_int_distribution):</p>\n\n<pre><code>// the primary function, which calls the detailed functions depending on types of iterators in the used containers.\ntemplate&lt; class PopIter, class SampleIter, class Size, class URNG &gt;\nSampleIter sample( PopIter first, PopIter last, SampleIter out, Size n, URNG&amp;&amp; g )\n{\n    using pop_t  = typename std::iterator_traits&lt; PopIter &gt;::iterator_category;\n    using samp_t = typename std::iterator_traits&lt; SampleIter &gt;::iterator_category;\n    return __sample( first, last, pop_t{}, out, samp_t{}, n, forward&lt; URNG &gt;( g ) );\n}\n\ntemplate&lt; class PopIter, class SampleIter, class Size, class URNG &gt;\nSampleIter __sample( PopIter first,\n                     PopIter last,\n                     std::input_iterator_tag,\n                     SampleIter out,\n                     std::random_access_iterator_tag,\n                     Size   n,\n                     URNG&amp;&amp; g )\n{\n    using dist_t  = std::uniform_int_distribution&lt; Size &gt;;\n    using param_t = typename dist_t::param_type;\n    dist_t d{};\n    Size   sample_sz{0};\n    while ( first != last &amp;&amp; sample_sz != n )\n        out[ sample_sz++ ] = *first++;\n    for ( Size pop_sz{sample_sz}; first != last; ++first, ++pop_sz )\n    {\n        param_t const p{0, pop_sz};\n        Size const    k{d( g, p )};\n        if ( k &lt; n )\n            out[ k ] = *first;\n    }\n    return out + sample_sz;\n}\n\ntemplate&lt; class PopIter, class SampleIter, class Size, class URNG &gt;\nSampleIter __sample( PopIter first,\n                     PopIter last,\n                     std::forward_iterator_tag,\n                     SampleIter out,\n                     std::output_iterator_tag,\n                     Size   n,\n                     URNG&amp;&amp; g )\n{\n    using dist_t  = std::uniform_int_distribution&lt; Size &gt;;\n    using param_t = typename dist_t::param_type;\n    dist_t d{};\n    Size   unsampled_sz = std::distance( first, last );\n    for ( n = min( n, unsampled_sz ); n != 0; ++first )\n    {\n        param_t const p{0, --unsampled_sz};\n        if ( d( g, p ) &lt; n )\n        {\n            *out++ = *first;\n            --n;\n        }\n    }\n    return out;\n}\n</code></pre>\n"}], "owner": {"reputation": 62, "user_id": 8737338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14b7137040b16e6a972348c265fd20b2?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/8737338/prometheus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525302314, "creation_date": 1525293297, "question_id": 50143158, "link": "https://stackoverflow.com/questions/50143158/behavior-of-cs-stddiscrete-distribution-vs-sample-in-r", "title": "Behavior of C++&#39;s std::discrete_distribution vs. sample() in R", "body": "<p>I want to draw a number from a set of frequencies until all values are zero. By drawing the frequencies of the remaining numbers is decreasing.  In R there is a \"simple\" function sample to do that for me. In C++ I found the std::discrete_distribution but not very much detail information about it</p>\n\n<ol>\n<li>I can't find a clear descrition of the algorithm of R and / or the std::discrete_distribution to compare the functionality. Is the behavior the same? Can I solve my task with this C++ STDL?</li>\n<li>As I programmed other PRNG's non STDL - Which functionaltyof them is needed so they can be used together with std::discrete_distribution - cppreference and other sites/forums are there very silent to this</li>\n<li>On a second place in my code I need a similar behavior ( fixed frequencies for each draw ) I found nowhere a explicit extra invokation nor parameter to seperate both functionalities. DO I need to create a new instance with lowered parameters?! This is obviousliy a thing I can't belive...</li>\n</ol>\n\n<p>actually I'm summing the frequencies (hold by a std::vector) up until random number is smaller or equal. As this is:</p>\n\n<ul>\n<li>ineffective in time / ressources</li>\n<li>I'm not really sure if this is statistically allowed</li>\n</ul>\n\n<p>I hope to find a better solution with you help.</p>\n\n<p>THANK YOU for your time, support and answers of course :)</p>\n"}, {"tags": ["c++", "wxwidgets"], "comments": [{"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 1, "creation_date": 1525296112, "post_id": 50143148, "comment_id": 87305668, "body": "can you show the code for the settingsFrm constructor? I hope you do have a class member pointer there which you can reference."}, {"owner": {"reputation": 28522, "user_id": 459943, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1820b3c909a14f78a3b8c5aa46f9759f?s=128&d=identicon&r=PG", "display_name": "Lion King", "link": "https://stackoverflow.com/users/459943/lion-king"}, "reply_to_user": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1525296482, "post_id": 50143148, "comment_id": 87305819, "body": "@Igor: The constructor doesn&#39;t have anything important, anyway open this <a href=\"https://onlinegdb.com/HyerpoPpM\" rel=\"nofollow noreferrer\">link</a>."}, {"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1525297299, "post_id": 50143148, "comment_id": 87306162, "body": "what is keywordTxt and where it is being initialized? But this is not the issue. The issue is that you are trying to write a program using an unfamiliar language. Get a class on C++ (the language is very non-trivial) or learn python and write something using wxPython/Phoenix (will be much easier and faster). Because the problem you are facing is C++ one."}, {"owner": {"reputation": 28522, "user_id": 459943, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1820b3c909a14f78a3b8c5aa46f9759f?s=128&d=identicon&r=PG", "display_name": "Lion King", "link": "https://stackoverflow.com/users/459943/lion-king"}, "reply_to_user": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1525302020, "post_id": 50143148, "comment_id": 87307605, "body": "@Igor: <code>keywordTxt </code> is a name of <code>wxTextCtrl</code> which is the first text box in the previous picture."}], "answers": [{"tags": [], "owner": {"reputation": 18238, "user_id": 15275, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WNTZ3.jpg?s=128&g=1", "display_name": "VZ.", "link": "https://stackoverflow.com/users/15275/vz"}, "is_accepted": false, "score": 0, "last_activity_date": 1525355255, "creation_date": 1525355255, "answer_id": 50156648, "question_id": 50143148, "link": "https://stackoverflow.com/questions/50143148/how-to-get-the-text-value-of-a-control-through-its-parent-window/50156648#50156648", "title": "How to get the text value of a control through its parent window", "body": "<p>From your comments, it seems like you expect the function to find the control from the name of the variable in your code which is not how it works and would be pretty much impossible.</p>\n\n<p><code>FindWindowByName()</code> uses the <em>window</em> name (and, as a fallback, label, but this is irrelevant here because text controls don't have labels anyhow), so for it to work you need to set the window name when creating the control, using the corresponding parameter of its ctor. This is very rarely useful in C++ code, however, as it's simpler to just store a pointer to the control in some variable and use this instead.</p>\n\n<p><code>FindWindowByName()</code> can often be useful when creating controls from XRC, however. If you do this, then you should specify names for your controls in XRC and pass the same name to this function.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7217708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b2869c949c02e0e233c4bd1d110931?s=128&d=identicon&r=PG&f=1", "display_name": "Z.Mike", "link": "https://stackoverflow.com/users/7217708/z-mike"}, "is_accepted": false, "score": 0, "last_activity_date": 1525717906, "creation_date": 1525717906, "answer_id": 50220439, "question_id": 50143148, "link": "https://stackoverflow.com/questions/50143148/how-to-get-the-text-value-of-a-control-through-its-parent-window/50220439#50220439", "title": "How to get the text value of a control through its parent window", "body": "<p>How did you create the TextCtrl instance? You should have something like <code>wxTextCtrl m_textCtrl1 = new wxTextCtrl(/// arguments);</code> Accessing the value should be very easy, as <code>wxString text = m_textCtrl1-&gt;GetValue();</code> You definitely don't need <code>FindWindowByName</code> just for what you are trying to do here.</p>\n"}], "owner": {"reputation": 28522, "user_id": 459943, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1820b3c909a14f78a3b8c5aa46f9759f?s=128&d=identicon&r=PG", "display_name": "Lion King", "link": "https://stackoverflow.com/users/459943/lion-king"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1525717906, "creation_date": 1525293261, "question_id": 50143148, "link": "https://stackoverflow.com/questions/50143148/how-to-get-the-text-value-of-a-control-through-its-parent-window", "title": "How to get the text value of a control through its parent window", "body": "<p>I have the following <code>wxDialog</code> parent window:</p>\n\n<p><a href=\"https://i.stack.imgur.com/A06xf.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A06xf.jpg\" alt=\"\"></a></p>\n\n<p>I have created that parent window by the following code:</p>\n\n<pre><code>settingsFrm settingsWindow(this, \"Settings\");\nsettingsWindow.ShowModal();\n</code></pre>\n\n<p>I have tried to use <code>FindWindowByName</code> to get the value of the first text ctrl as follow:</p>\n\n<pre><code>wxLogMessage(dynamic_cast&lt;wxTextCtrl*&gt;(settingsWindow-&gt;FindWindowByName(\"keywords_txt\"))-&gt;GetValue());\n</code></pre>\n\n<p>But unfortunately, it doesn't work and gives me a runtime error.\nI don't know if that method suitable to do what I want.</p>\n\n<p><strong>How to get the value/other of a control through its parent window?</strong></p>\n"}, {"tags": ["c++", "qt", "udp", "qudpsocket", "qhostaddress"], "answers": [{"tags": [], "owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "is_accepted": false, "score": 1, "last_activity_date": 1525299943, "last_edit_date": 1525299943, "creation_date": 1525296885, "answer_id": 50143883, "question_id": 50143129, "link": "https://stackoverflow.com/questions/50143129/qt-qudpsocket-bind-failed-constantly/50143883#50143883", "title": "Qt - QUdpSocket bind failed constantly", "body": "<p>In first method, when you bind the socket <code>bind(QHostAddress::Any, 7755)</code> it will listen on all   interfaces on your system; thus it will bind successfully knowing that at least one interface is up.</p>\n\n<p>In the second method, when you set the IP Address with <code>QHostAddress address(\"the ip\")</code> you need to make sure that an interface is up with that IP address at your system (use <code>ipconfig</code> on Win / <code>ifconfig</code> on Linux).\nNow the constructor will automatically detect from the string passed (\"ip address\") whether its IPv4 or IPv6.\nIf you are not specifying a type, then you can construct the address as <code>Any</code> and bind your socket to it:</p>\n\n<pre><code>QString string(\"192.168.1.1\");\nQHostAddress address(QHostAddress::Any);\naddress.setAddress(string);\nudpSocket = new QUdpSocket();\nbool result = udpSocket-&gt;bind(address , 7755);\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 3815613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e02d0e8448f68c72234d4f3297e4d77?s=128&d=identicon&r=PG&f=1", "display_name": "LIOR", "link": "https://stackoverflow.com/users/3815613/lior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1412, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525338408, "creation_date": 1525293201, "last_edit_date": 1525338408, "question_id": 50143129, "link": "https://stackoverflow.com/questions/50143129/qt-qudpsocket-bind-failed-constantly", "title": "Qt - QUdpSocket bind failed constantly", "body": "<p>I have these 2 lines of code. \nI need a socket that just receives data</p>\n\n<p>The first method is working, and I receive date (from the ip/port in the second method) </p>\n\n<p>The second method is always returning false. </p>\n\n<p>I don't understand the difference and can't find the problem. </p>\n\n<p>Any one have any idea how to resolve this or what I'm doing wrong? </p>\n\n<pre><code> udpSocket = new QUdpSocket(); \nbool result = udpSocket-&gt;bind(QHostAddress::Any, 7755);\n\n\nQHostAddress address(\"the ip\") \nudpSocket = new QUdpSocket(); \nbool result = udpSocket-&gt;bind(address , 7755);\n</code></pre>\n"}, {"tags": ["c++", "clang-format"], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 10977033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b481acf5d5db6290dcf3fa07724541d?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/10977033/jenny"}, "edited": false, "score": 0, "creation_date": 1572276953, "post_id": 50162528, "comment_id": 103500743, "body": "Do you know an answer for this in newer clang-format versions?"}], "tags": [], "owner": {"reputation": 10144, "user_id": 7256341, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RXEvi.jpg?s=128&g=1", "display_name": "valiano", "link": "https://stackoverflow.com/users/7256341/valiano"}, "is_accepted": true, "score": 2, "last_activity_date": 1525411505, "last_edit_date": 1525411505, "creation_date": 1525375528, "answer_id": 50162528, "question_id": 50143003, "link": "https://stackoverflow.com/questions/50143003/clang-format-chained-else-ifs-on-single-lines/50162528#50162528", "title": "Clang Format chained else ifs on single lines", "body": "<p>Unfortunately, this is currently not supported for if-else statements, only for simple if's (as of revision 329373, dating 6/4/18). The <code>AllowShortBlocksOnASingleLine</code> and <code>AllowShortIfStatementsOnASingleLine</code> options are not applicable for if-else statements.  </p>\n\n<p>Hopefully this will change in the future. </p>\n\n<hr>\n\n<p>The <a href=\"https://clang.llvm.org/docs/ClangFormatStyleOptions.html\" rel=\"nofollow noreferrer\">doc</a> is not explicit about this, saying that <code>AllowShortIfStatementsOnASingleLine</code> will allow simple if statements on a single line:</p>\n\n<blockquote>\n  <p><strong>AllowShortIfStatementsOnASingleLine (bool)</strong><br>\n      If true, <code>if (a) return;</code> can be put on a single line.</p>\n</blockquote>\n\n<p>However, clang-format code suggests that if-else blocks are not allowed on single lines:  </p>\n\n<p>1) <a href=\"https://github.com/llvm-mirror/clang/blob/master/lib/Format/UnwrappedLineFormatter.cpp\" rel=\"nofollow noreferrer\">UnwrappedLineFormatter.cpp</a>, <em>tryMergeSimpleControlStatement</em>:</p>\n\n<pre><code>// Only inline simple if's (no nested if or else).\nif (I + 2 != E &amp;&amp; Line.startsWith(tok::kw_if) &amp;&amp;\n    I[2]-&gt;First-&gt;is(tok::kw_else))\n  return 0;\n</code></pre>\n\n<p>2) <a href=\"https://github.com/llvm-mirror/clang/blob/master/unittests/Format/FormatTest.cpp\" rel=\"nofollow noreferrer\">FormatTest.cpp</a>, <em>FormatShortBracedStatements</em> test.<br>\n   Notice the test parameters, and that in the expected formatting in the unittests, else always resides in its own line, while plain if statements with no else are on a single line with their blocks, for example:</p>\n\n<pre><code>verifyFormat(\"if (true) {\\n\"\n             \"  f();\\n\"\n             \"} else {\\n\"\n             \"  f();\\n\"\n             \"}\",\n  AllowSimpleBracedStatements);\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 1576799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e32846f5b983fdc421978fb6b1c868?s=128&d=identicon&r=PG", "display_name": "Walrus", "link": "https://stackoverflow.com/users/1576799/walrus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1196, "favorite_count": 1, "accepted_answer_id": 50162528, "answer_count": 1, "score": 4, "last_activity_date": 1525411505, "creation_date": 1525292646, "question_id": 50143003, "link": "https://stackoverflow.com/questions/50143003/clang-format-chained-else-ifs-on-single-lines", "title": "Clang Format chained else ifs on single lines", "body": "<p>I'm trying to write a .clang-format file that will allow the following:</p>\n\n<pre><code>if (value.Is&lt;bool&gt;()) { index = 1; }\nelse if (value.Is&lt;int&gt;()) { index = 2; }\nelse if (value.Is&lt;unsigned int&gt;()) { index = 3; }\nelse if (value.Is&lt;long long&gt;()) { index = 4; }\nelse if (value.Is&lt;unsigned long long&gt;()) { index = 5; }\nelse if (value.Is&lt;float&gt;()) { index = 6; }\nelse if (value.Is&lt;double&gt;()) { index = 7; }\nelse if (value.Is&lt;long double&gt;()) { index = 8; }\nelse if (value.Is&lt;std::string&gt;()) { index = 9; }\nelse if (value.IsArray()) { index = 10; }\nelse { index = 0; }\n</code></pre>\n\n<p>I've tried every option I can find related to breaks and allowShort*, and no matter what I do it seems to split them into multi-lines after the first like so:</p>\n\n<pre><code>if (value.Is&lt;bool&gt;()) { index = 1; }\nelse if (value.Is&lt;int&gt;()) {\n  index = 2;\n}\n...\n</code></pre>\n\n<p>Is there some option I'm missing that could support this?</p>\n"}, {"tags": ["c++", "c++11", "smart-pointers", "flexible-array-member"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1525292837, "post_id": 50142943, "comment_id": 87304242, "body": "Your code as is contains undefined behavior and if it works you are lucky (actually unlucky as working makes you think it is okay).  <code>const auto msg = reinterpret_cast&lt;MyMessage*&gt;(new char[message_size]);</code> violates strict aliasing and <code>memcpy(msg-&gt;data, data, data_size);</code> goes out of bounds of the array <code>data</code> for any <code>data_size &gt; 4</code>."}, {"owner": {"reputation": 509, "user_id": 7988757, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c508743a0ca210b2bb768d482a219688?s=128&d=identicon&r=PG&f=1", "display_name": "Less White", "link": "https://stackoverflow.com/users/7988757/less-white"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1525293648, "post_id": 50142943, "comment_id": 87304608, "body": "This technique is broadly used in our company and I would think if you look again you may see that msg-&gt;data points to an offset of the memory that has been allocated by new char[message_size]. It may look there is a bound of the array but that array is indeed accessing a location in memory that contains the relevant size. Does it make sense to you?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1525293722, "post_id": 50142943, "comment_id": 87304636, "body": "@LessWhite unfortunately even if it is used broadly by a company that would not make this code legal C++"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1525293739, "post_id": 50142943, "comment_id": 87304645, "body": "I get it but it is still undefined behavior according to the standard.  <code>data</code> is only 4 bytes wide so anything more than that is accessing the array out of its bounds which is UB.  It doesn&#39;t matter if there is still more valid storage past the array."}, {"owner": {"reputation": 509, "user_id": 7988757, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c508743a0ca210b2bb768d482a219688?s=128&d=identicon&r=PG&f=1", "display_name": "Less White", "link": "https://stackoverflow.com/users/7988757/less-white"}, "edited": false, "score": 0, "creation_date": 1525294643, "post_id": 50142943, "comment_id": 87305061, "body": "I don&#39;t know how to do better in a sense that I don&#39;t want to declare a char* for msg-&gt;data since a pointer won&#39;t be referred properly by the destination application receiving the data.  Casting it to that structure is a trick that seems to work but I am willing to fix it if I can find a better way.  Thanks for your help."}, {"owner": {"reputation": 371, "user_id": 9710796, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155167830691216/picture?type=large", "display_name": "Vamsidhar Reddy Gaddam", "link": "https://stackoverflow.com/users/9710796/vamsidhar-reddy-gaddam"}, "edited": false, "score": 0, "creation_date": 1525295242, "post_id": 50142943, "comment_id": 87305319, "body": "Do both your sender and receiver have the definition of the struct in a header for example?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1525295309, "post_id": 50142943, "comment_id": 87305341, "body": "@LessWhite What about something like this: <a href=\"http://coliru.stacked-crooked.com/a/31cb72051dce3c8a\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/31cb72051dce3c8a</a>"}, {"owner": {"reputation": 371, "user_id": 9710796, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155167830691216/picture?type=large", "display_name": "Vamsidhar Reddy Gaddam", "link": "https://stackoverflow.com/users/9710796/vamsidhar-reddy-gaddam"}, "edited": false, "score": 1, "creation_date": 1525295610, "post_id": 50142943, "comment_id": 87305472, "body": "It looks slightly sensible, but the whole thing (the original post mostly) and the solution feels like over engineering to fit C and C++ ideas into one place. why not use strings? Is it because they are used in some threads? I guess I am missing the point here."}, {"owner": {"reputation": 371, "user_id": 9710796, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155167830691216/picture?type=large", "display_name": "Vamsidhar Reddy Gaddam", "link": "https://stackoverflow.com/users/9710796/vamsidhar-reddy-gaddam"}, "edited": false, "score": 0, "creation_date": 1525295655, "post_id": 50142943, "comment_id": 87305486, "body": "just my feelings :)"}, {"owner": {"reputation": 502, "user_id": 6545045, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dU0-k-Md7MU/AAAAAAAAAAI/AAAAAAAAAKE/kvy962ntS-M/photo.jpg?sz=128", "display_name": "rflobao", "link": "https://stackoverflow.com/users/6545045/rflobao"}, "edited": false, "score": 0, "creation_date": 1525295710, "post_id": 50142943, "comment_id": 87305515, "body": "Answering your main question, you can do this: const auto msg = std::unique_ptr&lt;MyMessage&gt;(reinterpret_cast&lt;MyMessage*&gt;(new char[message_size])); But you will have an indeterminate behavior in the delete made for unique_ptr."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1525296021, "post_id": 50142943, "comment_id": 87305630, "body": "@BenVoigt is accessing <code>data[]</code> out of range going to be ok as well?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1525296221, "post_id": 50142943, "comment_id": 87305713, "body": "@BenVoigt <code>char data[]</code> is not valid in C++"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1525296576, "post_id": 50142943, "comment_id": 87305857, "body": "@BenVoigt I know what it is, that still does not make it legal C++"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1525296922, "post_id": 50142943, "comment_id": 87305999, "body": "oops, misremembered the rule.  Pointer comparison will work within a single allocation, but pointer arithmetic won&#39;t (can&#39;t cross member boundaries even to point to other parts of the same complete object)"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 502, "user_id": 6545045, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dU0-k-Md7MU/AAAAAAAAAAI/AAAAAAAAAKE/kvy962ntS-M/photo.jpg?sz=128", "display_name": "rflobao", "link": "https://stackoverflow.com/users/6545045/rflobao"}, "edited": false, "score": 0, "creation_date": 1525298307, "post_id": 50142943, "comment_id": 87306518, "body": "@rflobao the &quot;indeterminate behavior&quot; can be fixed by giving the <code>unique_ptr</code> a custom <code>deleter</code> that casts the <code>Message*</code> pointer back to <code>char*</code> and then frees it with <code>delete[]</code> instead of the default <code>delete</code>."}], "answers": [{"comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1525296877, "post_id": 50143850, "comment_id": 87305986, "body": "Related: <a href=\"https://stackoverflow.com/questions/4412749/are-flexible-array-members-valid-in-c\">C++ lacks flexible array members</a>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1525298437, "post_id": 50143850, "comment_id": 87306554, "body": "This &quot;works&quot; , but only legally if <code>message_size</code> is at least <code>sizeof(MyMessage)</code> (which means the <code>data_size</code> must be &gt;= 4). It also means the code now has a <code>std::unique_ptr&lt;char[]&gt;</code> instead of a <code>std::unique_ptr&lt;MyMessage&gt;</code>, if the message needs to be passed around to other functions."}, {"owner": {"reputation": 509, "user_id": 7988757, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c508743a0ca210b2bb768d482a219688?s=128&d=identicon&r=PG&f=1", "display_name": "Less White", "link": "https://stackoverflow.com/users/7988757/less-white"}, "edited": false, "score": 0, "creation_date": 1525299097, "post_id": 50143850, "comment_id": 87306787, "body": "It looks to me that after having processed msg I must call delete msg to prevent a memory leak (which defeat my purpose to use smart pointer to avoid memory leaks). In that sense, this solution does not bring me any benefit."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 509, "user_id": 7988757, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c508743a0ca210b2bb768d482a219688?s=128&d=identicon&r=PG&f=1", "display_name": "Less White", "link": "https://stackoverflow.com/users/7988757/less-white"}, "edited": false, "score": 0, "creation_date": 1525300409, "post_id": 50143850, "comment_id": 87307205, "body": "@LessWhite no, you would not need to call <code>delete msg</code>. The destructor of <code>rawmsg</code> will call <code>delete[]</code> for you. If anything, when using <b>placement-new</b> to construct an object, you have to call the object&#39;s destructor manually, ie <code>msg-&gt;~MyMessage()</code>, however that is optional in this situation because <code>MyMessage</code> only contains POD types that don&#39;t need to be destructed. Things would be different if <code>MyMessage</code> contained non-POD members"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1525316195, "post_id": 50143850, "comment_id": 87310630, "body": "@RemyLebeau <code>message_size</code> in OP&#39;s code is at least <code>sizeof(MYMessage)</code> I assume rest of code does not change"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1525323809, "post_id": 50143850, "comment_id": 87312695, "body": "@Slava <code>message_size &lt; sizeof(MyMessage)</code> if <code>data_size &lt; sizeof(MyMessage::data)</code>. That is not the case for <code>MyData</code> but maybe the OP has other messages with smaller data, we don&#39;t know."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1525355370, "post_id": 50143850, "comment_id": 87331162, "body": "@RemyLebeau got it, fixed size in the answer. Your code actually has the same issue, but even worse, as it is hidden :)"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1525365320, "post_id": 50143850, "comment_id": 87337667, "body": "@Slava my code doesn&#39;t construct an <code>MyMessage</code> object so having a proper size is not as important. Your code is constructing an object, so size matters."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 0, "last_activity_date": 1525355299, "last_edit_date": 1525355299, "creation_date": 1525296733, "answer_id": 50143850, "question_id": 50142943, "link": "https://stackoverflow.com/questions/50142943/c-object-containing-an-array-of-char-using-unique-ptr/50143850#50143850", "title": "C++ object containing an array of char using unique_ptr", "body": "<p>This should work, but it is still not clear if accessing <code>msg-&gt;data</code> out of bounds is legal (but at least it is not worst than in your original code):</p>\n\n<pre><code>const auto message_size = sizeof(MyMessage) - ( data_size &lt; 4 ? 0 : data_size - 4 );\nauto rawmsg = std::make_unique&lt;char[]&gt;( message_size );\nauto msg = new (rawmsg.get()) MyMessage;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1525316299, "post_id": 50144455, "comment_id": 87310656, "body": "Actually changing <code>data</code> array size to 1 most probably will make it to waste 3 bytes additionally, not safe."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1525324039, "post_id": 50144455, "comment_id": 87312764, "body": "@Slava unless structure alignment is set to 1 byte, which would make sense when sending struct data externally."}, {"owner": {"reputation": 509, "user_id": 7988757, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c508743a0ca210b2bb768d482a219688?s=128&d=identicon&r=PG&f=1", "display_name": "Less White", "link": "https://stackoverflow.com/users/7988757/less-white"}, "edited": false, "score": 0, "creation_date": 1525354655, "post_id": 50144455, "comment_id": 87330611, "body": "Thanks Remy, your code is awesome and works great. It helps me so much understanding how to use smart pointers."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1525355508, "post_id": 50144455, "comment_id": 87331254, "body": "Then you clearly need to say &quot;disabling alignment is required&quot; otherwise you have the same issue with <code>message_size</code> as me or even worse (as it is pretty much hidden)"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1525365164, "post_id": 50144455, "comment_id": 87337574, "body": "@Slava I changed the code to restore the original struct, with comment. And to use <code>offsetof()</code> instead of <code>sizeof()</code>"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1525365097, "last_edit_date": 1525365097, "creation_date": 1525300028, "answer_id": 50144455, "question_id": 50142943, "link": "https://stackoverflow.com/questions/50142943/c-object-containing-an-array-of-char-using-unique-ptr/50144455#50144455", "title": "C++ object containing an array of char using unique_ptr", "body": "<p>The data type that you pass to <code>delete[]</code> needs to match what <code>new[]</code> returns.  In your example, you are <code>new[]</code>ing a <code>char[]</code> array, but are then <code>delete[]</code>ing a <code>MyMessage</code> object instead.  That will not work.</p>\n\n<p>The simple fix would be to change this line:</p>\n\n<pre><code>delete[] msg;\n</code></pre>\n\n<p>To this instead:</p>\n\n<pre><code>delete[] reinterpret_cast&lt;char*&gt;(msg);\n</code></pre>\n\n<p>However, You should use a smart pointer to manage the memory deletion for you.  But, the pointer that you give to <code>std::unique_ptr</code> needs to match the template parameter that you specify.  In your example, you are declaring a <code>std::unique_ptr</code> whose template parameter is <code>MyMessage*</code>, so the constructor is expecting a <code>MyMessage**</code>, but you are passing it a <code>char*</code> instead.</p>\n\n<p>Try this instead:</p>\n\n<pre><code>// if this struct is being sent externally, consider\n// setting its alignment to 1 byte, and setting the\n// size of the data[] member to 1 instead of 4...\nstruct MyMessage\n{\n    uint32_t      id;\n    uint32_t      data_size;\n    char          data[4];\n};\n\nvoid send_message(void* data, const size_t data_size)\n{\n    const auto message_size = offsetof(MyMessage, data) + data_size;\n\n    std::unique_ptr&lt;char[]&gt; buffer = std::make_unique&lt;char[]&gt;(message_size);\n    MyMessage *msg = reinterpret_cast&lt;MyMessage*&gt;(buffer.get());    \n\n    msg-&gt;id = 3;\n    msg-&gt;data_size = data_size;\n    std::memcpy(msg-&gt;data, data, data_size);\n\n    // Sending the message\n    // ...\n}\n</code></pre>\n\n<p>Or this:</p>\n\n<pre><code>using MyMessage_ptr = std::unique_ptr&lt;MyMessage, void(*)(MyMessage*)&gt;;\n\nvoid send_message(void* data, const size_t data_size)\n{\n    const auto message_size = offsetof(MyMessage, data) + data_size;\n\n    MyMessage_ptr msg(\n        reinterpret_cast&lt;MyMessage*&gt;(new char[message_size]),\n        [](MyMessage *m){ delete[] reinterpret_cast&lt;char*&gt;(m); }\n    );\n\n    msg-&gt;id = 3;\n    msg-&gt;data_size = data_size;\n    std::memcpy(msg-&gt;data, data, data_size);\n\n    // Sending the message\n    // ...\n}\n</code></pre>\n"}], "owner": {"reputation": 509, "user_id": 7988757, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c508743a0ca210b2bb768d482a219688?s=128&d=identicon&r=PG&f=1", "display_name": "Less White", "link": "https://stackoverflow.com/users/7988757/less-white"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1073, "favorite_count": 0, "accepted_answer_id": 50144455, "answer_count": 2, "score": 4, "last_activity_date": 1525365097, "creation_date": 1525292436, "last_edit_date": 1525296464, "question_id": 50142943, "link": "https://stackoverflow.com/questions/50142943/c-object-containing-an-array-of-char-using-unique-ptr", "title": "C++ object containing an array of char using unique_ptr", "body": "<p>I am looking on a way to use unique_ptr to allocate a structure that contains an array of char with a number of bytes that set dynamically to support different types of message.</p>\n\n<p>Assuming:</p>\n\n<pre><code>struct MyMessage\n{\n    uint32_t      id;\n    uint32_t      data_size;\n    char          data[4];\n};\n</code></pre>\n\n<p><strong>How can I convert send_message() below to use a smart pointer?</strong></p>\n\n<pre><code>void send_message(void* data, const size_t data_size)\n{\n    const auto message_size = sizeof(MyMessage) - 4 + data_size;\n    const auto msg = reinterpret_cast&lt;MyMessage*&gt;(new char[message_size]);\n\n    msg-&gt;id = 3;\n    msg-&gt;data_size = data_size;\n    memcpy(msg-&gt;data, data, data_size);\n\n    // Sending the message\n    // ...\n\n    delete[] msg;\n}\n</code></pre>\n\n<p>My attempt to use smart point using the code below does not compile:</p>\n\n<blockquote>\n<pre><code>const auto message_size = sizeof(MyMessage) - 4 + data_size;\nconst auto msg = std::unique_ptr&lt;MyMessage*&gt;(new char[message_size]);\n</code></pre>\n</blockquote>\n\n<p>Below a complete working example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iterator&gt;\n#include &lt;memory&gt;\n\nusing namespace std;\n\nstruct MyMessage\n{\n    uint32_t      id;\n    uint32_t      data_size;\n    char          data[4];\n};\n\nvoid send_message(void* data, const size_t data_size)\n{\n    const auto message_size = sizeof(MyMessage) - 4 + data_size;\n    const auto msg = reinterpret_cast&lt;MyMessage*&gt;(new char[message_size]);\n    if (msg == nullptr)\n    {\n        throw std::domain_error(\"Not enough memory to allocate space for the message to sent\");\n    }\n    msg-&gt;id = 3;\n    msg-&gt;data_size = data_size;\n    memcpy(msg-&gt;data, data, data_size);\n\n    // Sending the message\n    // ...\n\n    delete[] msg;\n}\n\nstruct MyData\n{\n    int  page_id;\n    char point_name[8];\n};\n\nvoid main()\n{\n    try\n    {\n        MyData data{};\n        data.page_id = 7;\n        strcpy_s(data.point_name, sizeof(data.point_name), \"ab332\");\n        send_message(&amp;data, sizeof(data));\n    }\n    catch (std::exception&amp; e)\n    {\n        std::cout &lt;&lt; \"Error: \" &lt;&lt; e.what() &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "events", "vector", "member-function-pointers"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1525290417, "post_id": 50142406, "comment_id": 87303055, "body": "What is this &quot;popup-info&quot; you are talking about? If you are getting an error message, please share it. Is it perhaps telling you that there is no known conversion between <code>void (KEY_EVENT_RECORD)</code> and <code>void (InputForm::*)(KEY_EVENT_RECORD)</code>?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1525290538, "post_id": 50142406, "comment_id": 87303118, "body": "You are using your member function pointers as if they were free function pointers. See <a href=\"https://stackoverflow.com/a/18536248/7359094\">this answer</a> on how to call a member function pointer using <code>this</code>. <code>this</code> won&#39;t be implied when calling a member function pointer like it is for regular member function calls."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1525290785, "post_id": 50142406, "comment_id": 87303237, "body": "After rereading the question, it seems like you may be hoping to embed the pointer to the instance you want to call the member function on. You can&#39;t do this with member function pointers. You&#39;ll likely want a vector of <a href=\"http://en.cppreference.com/w/cpp/utility/functional/function\" rel=\"nofollow noreferrer\"><code>std::function</code></a> instead."}, {"owner": {"reputation": 29, "user_id": 8746866, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rZ5eQ.png?s=128&g=1", "display_name": "Anyfail", "link": "https://stackoverflow.com/users/8746866/anyfail"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1525291163, "post_id": 50142406, "comment_id": 87303415, "body": "What i mean with &quot;popup-info&quot;: In Visual Studio you get a little info to the object your mouse is hovering over like for example which type it&#39;s of."}, {"owner": {"reputation": 29, "user_id": 8746866, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rZ5eQ.png?s=128&g=1", "display_name": "Anyfail", "link": "https://stackoverflow.com/users/8746866/anyfail"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1525291369, "post_id": 50142406, "comment_id": 87303516, "body": "After rereading the question, it seems like you may be hoping to embed the pointer to the instance you want to call the member function on. You can&#39;t do this with member function pointers. You&#39;ll likely want a vector of std::function instead.            Yea i guess thats kinda what i wana do :) thx for the advice"}, {"owner": {"reputation": 1471, "user_id": 4161406, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jmkcSCy65Dc/AAAAAAAAAAI/AAAAAAAAACA/3IMYGIYfw28/photo.jpg?sz=128", "display_name": "BJovke", "link": "https://stackoverflow.com/users/4161406/bjovke"}, "edited": false, "score": 0, "creation_date": 1525291592, "post_id": 50142406, "comment_id": 87303619, "body": "Where are <code>addKeyEventHandler()</code> and <code>addMouseEventHandler()</code> called from? Where&#39;s that code? And I&#39;m not sure what did you wanted to achieve with <code>std::vector&lt;void (InputForm::*)(KEY_EVENT_RECORD)&gt;</code>? Store a pointer to a member function of <code>InputForm</code>?"}, {"owner": {"reputation": 1471, "user_id": 4161406, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jmkcSCy65Dc/AAAAAAAAAAI/AAAAAAAAACA/3IMYGIYfw28/photo.jpg?sz=128", "display_name": "BJovke", "link": "https://stackoverflow.com/users/4161406/bjovke"}, "edited": false, "score": 0, "creation_date": 1525291693, "post_id": 50142406, "comment_id": 87303668, "body": "And what&#39;s the exact compiler error, is it so hard to post it here? Your explanation of the error doesn&#39;t make any sense. If you wanted to call a member function this function also needs <code>this</code> parameter, so <code>keyEventHandlers[x](eventBuffer[i].Event.KeyEvent);</code> can&#39;t work."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1525291826, "post_id": 50142406, "comment_id": 87303724, "body": "All the code is <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> -- the above is not a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 29, "user_id": 8746866, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rZ5eQ.png?s=128&g=1", "display_name": "Anyfail", "link": "https://stackoverflow.com/users/8746866/anyfail"}, "edited": false, "score": 0, "creation_date": 1525292838, "post_id": 50142406, "comment_id": 87304243, "body": "Yea you&#39;re right i should explain that a little more. I wanted to be able to add Functions that get called when a certain event happens and i tried to use a vector for storing the functions - or in that case I tried to store pointers to them. Here a member function of InputForm (later of any object if possible)"}, {"owner": {"reputation": 29, "user_id": 8746866, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rZ5eQ.png?s=128&g=1", "display_name": "Anyfail", "link": "https://stackoverflow.com/users/8746866/anyfail"}, "edited": false, "score": 0, "creation_date": 1525293019, "post_id": 50142406, "comment_id": 87304322, "body": "I didn&#39;t post the exact compile error because of various problems. For one there are currently loads of errors (because I changed the event system which i used in at least 10 others before the change and for another because have to translate them"}, {"owner": {"reputation": 29, "user_id": 8746866, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rZ5eQ.png?s=128&g=1", "display_name": "Anyfail", "link": "https://stackoverflow.com/users/8746866/anyfail"}, "edited": false, "score": 0, "creation_date": 1525293265, "post_id": 50142406, "comment_id": 87304441, "body": "Add eventHandler is currently called from my main - sorry that I forgot to post the code of that but I won&#39;t be able to post it until tomorrow (I&#39;m on my smartphone right now I didn&#39;t think I would get the answers as fast as i got them, I should&#39;ve waited - I&#39;m not at home anymore)"}, {"owner": {"reputation": 1471, "user_id": 4161406, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jmkcSCy65Dc/AAAAAAAAAAI/AAAAAAAAACA/3IMYGIYfw28/photo.jpg?sz=128", "display_name": "BJovke", "link": "https://stackoverflow.com/users/4161406/bjovke"}, "edited": false, "score": 0, "creation_date": 1525293334, "post_id": 50142406, "comment_id": 87304470, "body": "You can&#39;t store pointer to a member function with one parameter which is not <code>this</code>, it&#39;s own object&#39;s pointer, if that function is not defined as <code>static</code>. There&#39;s no separate member function for every instance of an object, there&#39;s only one member function for all of the object&#39;s instances. And every non-static member function receives <code>this</code> as an invisible first parameter under the hood. You can achieve this with <code>std::function</code> as  Fran&#231;ois Andrieux pointed out, where first parameter is <code>this</code> and others follow the function definition."}, {"owner": {"reputation": 29, "user_id": 8746866, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rZ5eQ.png?s=128&g=1", "display_name": "Anyfail", "link": "https://stackoverflow.com/users/8746866/anyfail"}, "edited": false, "score": 0, "creation_date": 1525293340, "post_id": 50142406, "comment_id": 87304472, "body": "I think I&#39;ll try out the advices you already gave me and if that doesn&#39;t work I&#39;ll send you all the stuff you need. But Thanks for helping me so far :)"}], "owner": {"reputation": 29, "user_id": 8746866, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rZ5eQ.png?s=128&g=1", "display_name": "Anyfail", "link": "https://stackoverflow.com/users/8746866/anyfail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1526918608, "creation_date": 1525290280, "last_edit_date": 1526918608, "question_id": 50142406, "link": "https://stackoverflow.com/questions/50142406/vector-seemingly-changes-type-dependent-on-where-its-used", "title": "Vector seemingly changes type dependent on where it&#39;s used", "body": "<p>EDIT: \nThe solution:\nI tried to create a pointer on a memberfunction and thought the pointer would contain the required informations about the class. It turned out that it didn't.\nSo Intellisense was absolutely right about the pointer not pointing to an object with the memberfunction but only the memberfunction (or at least that is how I understood it).</p>\n\n<p>In my case I was able to simply use a static member function instead eventhough this function cannot change any memberfunctions without a reference the outer object</p>\n\n<hr>\n\n<p><strong>Hi</strong> and thanks for taking the time to help me.</p>\n\n<p>I'm currently working on some kind of Event-system. I have a class InputManager which checks if the member-function check is called for events the console-window has reveived and then calls the proper event-handlers which are stored in member-function-pointer-vectors (I will later make it a template).</p>\n\n<pre><code>class InputManager\n{\nprivate:\n    HANDLE cursor;\n    DWORD numEventsCaught, consoleMode, i;\n    INPUT_RECORD eventBuffer[128];\n\n    std::vector&lt;void (InputForm::*)(KEY_EVENT_RECORD)&gt; keyEventHandlers;\n    std::vector&lt;void (InputForm::*)(MOUSE_EVENT_RECORD)&gt; mouseEventHandlers;\n\npublic:\n    InputManager()\n    void addKeyEventHandler(void (InputForm::*e)(KEY_EVENT_RECORD));\n    void addMouseEventHandler(void (InputForm::*e)(MOUSE_EVENT_RECORD));\n\n    void check();\n};\n</code></pre>\n\n<p>As you can see, the current type of my vector is a <strong>pointer to a member-function</strong> of the InputForm-class with a specific parameter. This is also the type that Visual Studio shows me in the little popup-info.</p>\n\n<p>But as soon as I use that vector inside a member-function, the popup-info shows something different and the it tells me that I need to use a pointer-to type.\n<strong>It tells me that the vector has got the type <code>void (KEY_EVENT_RECORD)</code> instead of <code>void (InputForm::*)(KEY_EVENT_RECORD)</code>.</strong></p>\n\n<p>I have no idea how that can happen - i mean how can the type of a vector change just by the scope it's used in?</p>\n\n<p>Here is the function where the problem happens (but it also happens in every other function as well):</p>\n\n<pre><code>void InputManager::check()\n{\n    int size;\n\n    if (!ReadConsoleInput(cursor, eventBuffer, 128, &amp;numEventsCaught))\n        POST_DEBUG_MESSAGE(-1, \"Failed to Read Console Input\");\n\n    for (i = 0; i &lt; numEventsCaught; i++)\n    {\n        switch (eventBuffer[i].EventType)\n        {\n        case KEY_EVENT:\n            size = keyEventHandlers.size();\n            for (int x = 0; x &lt; size; x++)\n            {\n                keyEventHandlers[x](eventBuffer[i].Event.KeyEvent); //ERROR ONE\n            }\n\n            break;\n\n        case MOUSE_EVENT:\n            size = mouseEventHandlers.size();\n            for (int x = 0; x &lt; size; x++)\n            {\n                mouseEventHandlers[x](eventBuffer[i].Event.MenuEvent); //ERROR TWO\n            }\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Just in case you want to view all the code, here it is (otherwise just ignore it)</strong></p>\n\n<pre><code>InputManager::InputManager()\n{\n    cursor = GetStdHandle(STD_INPUT_HANDLE);\n    if (cursor == INVALID_HANDLE_VALUE)\n        POST_DEBUG_MESSAGE(-1, \"Invalid Handle Value, GetStdHandle failed.\");\n\n    // Deactivate Quickedit\n    consoleMode = ENABLE_EXTENDED_FLAGS;\n    if (!SetConsoleMode(cursor, consoleMode))\n        POST_DEBUG_MESSAGE(-1, \"Failed to set Console Mode (Couldn't deactivate Quickedit)\");\n\n    // Activate mouse and window input\n    consoleMode = ENABLE_WINDOW_INPUT | ENABLE_MOUSE_INPUT;\n    if (!SetConsoleMode(cursor, consoleMode))\n        POST_DEBUG_MESSAGE(-1, \"Failed to activate mouse or window inputs\");\n}\n\nvoid InputManager::addKeyEventHandler(void (InputForm::*e)(KEY_EVENT_RECORD))\n{\n    keyEventHandlers.push_back(e);    // Works properly\n}\n\nvoid InputManager::addMouseEventHandler(void (InputForm::*e)(MOUSE_EVENT_RECORD))\n{\n    mouseEventHandlers.push_back(e);\n}\n</code></pre>\n\n<p><strong>What might be interesting as well</strong> is that even if <code>keyEventHandlers.push_back(e)</code> works correctly, it also tells me that e is not member-function-pointer but a usual function pointer -> but the <code>void (InputForm::*e)(KEY_EVENT_RECORD)</code> tells me something else...</p>\n\n<p>I really have no clue what's going on here. Do you have an Idea?\nThank you very much in advance.</p>\n"}, {"tags": ["c++", "memory-management", "image-segmentation", "adjacency-matrix"], "comments": [{"owner": {"reputation": 446, "user_id": 888624, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/392039c3c5ee1f883b68b52edf8413bf?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/888624/chris"}, "edited": false, "score": 0, "creation_date": 1525288225, "post_id": 50141721, "comment_id": 87301940, "body": "You could try storing it as a sparse matrix using Eigen. <a href=\"https://eigen.tuxfamily.org/dox/group__TutorialSparse.html\" rel=\"nofollow noreferrer\">eigen.tuxfamily.org/dox/group__TutorialSparse.html</a>"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1525289331, "post_id": 50141721, "comment_id": 87302503, "body": "800x800 ints is like 2.5 megs.  Are you on constrained hardware? 8000x8000 would be 250 megs, 80000x80000 would be 25 gigs."}], "answers": [{"tags": [], "owner": {"reputation": 409, "user_id": 3782116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cac4b01ba038dabd520c7a23c24dfc61?s=128&d=identicon&r=PG&f=1", "display_name": "VishalTheBeast", "link": "https://stackoverflow.com/users/3782116/vishalthebeast"}, "is_accepted": false, "score": 0, "last_activity_date": 1525288875, "creation_date": 1525288875, "answer_id": 50142045, "question_id": 50141721, "link": "https://stackoverflow.com/questions/50141721/memory-saving-alternatives-for-adjacency-matrixes-using-vector-of-ints/50142045#50142045", "title": "Memory saving alternatives for Adjacency matrixes using vector of ints", "body": "<p>Instead of adjacency matrix, you can use <strong>adjacency lists</strong>. The difference is when you don't have enough links for a particular vertex, its corresponding <strong>adj_list[i] vector will need less elements</strong> than the predefined totalV size it had in case of adjacency matrix. This will be helpful specially in cases of sparse graphs.</p>\n\n<p>Further, you can encode your information to store more than one link in a single element of a vector such that you can later decode it, using techniques like <strong>bit masking</strong>.</p>\n"}], "owner": {"reputation": 660, "user_id": 1081088, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/0d3fe00e69bd433b404d8b0a1d1d36dd?s=128&d=identicon&r=PG", "display_name": "spacing", "link": "https://stackoverflow.com/users/1081088/spacing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525288925, "creation_date": 1525287582, "last_edit_date": 1525288925, "question_id": 50141721, "link": "https://stackoverflow.com/questions/50141721/memory-saving-alternatives-for-adjacency-matrixes-using-vector-of-ints", "title": "Memory saving alternatives for Adjacency matrixes using vector of ints", "body": "<p>I am trying to solve a image segmentation problem using BFS and Edmonds Karp algorithm, I am using a <code>vector&lt;vector&lt;int&gt;&gt; Adj_Matrix</code> as a data structure to save the Adnjacency matrix that keeps the vertical and horizontal links of the graph.</p>\n\n<p>It's a undirected graph as such I think there might be better memory saving alternatives than having a full matrix of int vectors.</p>\n\n<p>I'm doing </p>\n\n<pre><code>Adj_Matrix.reserve(totalV);\nfor (int i = 0; i &lt; totalV; i++){\n     Adj_Matrix[i].reserve(totalV);\n}\n</code></pre>\n\n<p>to reserve memory for the data structure and then <code>Adj_Matrix.clear();</code></p>\n\n<p>But I'm running into memory problems and crashes when parsing and computing large (>800x800) matrixes. So I'm wondering what would be a better way of storing or representing these adjacency matrix that would save memory and time.</p>\n"}, {"tags": ["c++", "mingw", "codelite"], "comments": [{"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1525287572, "post_id": 50141675, "comment_id": 87301610, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/6875403/cannot-open-output-file-permission-denied\">Cannot open output file, permission denied</a>"}, {"owner": {"reputation": 623, "user_id": 2008273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VTTvj.jpg?s=128&g=1", "display_name": "ricco19", "link": "https://stackoverflow.com/users/2008273/ricco19"}, "edited": false, "score": 2, "creation_date": 1525287727, "post_id": 50141675, "comment_id": 87301677, "body": "The error is clear, you don&#39;t have write access to <code>.&#47;Debug&#47;source.exe</code> - it&#39;s likely still running (probably crashed horribly)"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1525288741, "post_id": 50141675, "comment_id": 87302200, "body": "Your antivirus could also cause this."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1525290003, "post_id": 50141675, "comment_id": 87302845, "body": "<b><i>after I mistakenly wrote some code that was trying to get values off the end of a list</i></b> That likely has nothing to do with the problem other than the possibility that your program is still running from the previous attempt."}], "owner": {"reputation": 123, "user_id": 7202482, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-k8w2d6ZVmng/AAAAAAAAAAI/AAAAAAAAABc/a1lwujR_jVg/photo.jpg?sz=128", "display_name": "Dave Jones", "link": "https://stackoverflow.com/users/7202482/dave-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1408, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1525287450, "creation_date": 1525287450, "question_id": 50141675, "link": "https://stackoverflow.com/questions/50141675/mingw-error-2-codelite", "title": "Mingw error 2 codelite", "body": "<p>When compiling my c++ code in the Codelite IDE, I got this build output:</p>\n\n<pre><code>32\\cmd.exe /C C:/TDM-GCC-64/bin/mingw32-make.exe -j4 SHELL=cmd.exe -e -f  \n\nMakefile\n\"----------Building project:[ source - Debug ]----------\"\nmingw32-make.exe[1]: Entering directory 'C:/Users/sprv6/Desktop/codelite workspaces/Competitive neural networks/source'\nC:/TDM-GCC-64/bin/g++.exe -o ./Debug/source ./Debug/main.cpp.o   -L.\nC:/TDM-GCC-64/bin/../lib/gcc/x86_64-w64-mingw32/5.1.0/../../../../x86_64-w64-mingw32/bin/ld.exe: cannot open output file ./Debug/source.exe: Permission denied\ncollect2.exe: error: ld returned 1 exit status\nmingw32-make.exe[1]: *** [Debug/source] Error 1\nsource.mk:78: recipe for target 'Debug/source' failed\nmingw32-make.exe[1]: Leaving directory 'C:/Users/sprv6/Desktop/codelite workspaces/Competitive neural networks/source'\nmingw32-make.exe: *** [All] Error 2\nMakefile:4: recipe for target 'All' failed\n====1 errors, 0 warnings====\n</code></pre>\n\n<p>I have tried deselecting the option \"pass object list to the linker via file\", but that was unsuccessful. I also tried re-installing my compilers, with no success. I am not sure what else to do. All I know about the source of the problem is it started occurring after I mistakenly wrote some code that was trying to get values off the end of a list.</p>\n\n<p>Note: I understand questions similar to this have been asked, but their solutions are not working for me.</p>\n"}, {"tags": ["c++", "macos"], "comments": [{"owner": {"reputation": 2446, "user_id": 1532454, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/aNEeA.jpg?s=128&g=1", "display_name": "Jeff Learman", "link": "https://stackoverflow.com/users/1532454/jeff-learman"}, "edited": false, "score": 0, "creation_date": 1525288174, "post_id": 50141613, "comment_id": 87301913, "body": "Welcome to StackOverflow.  Please read <a href=\"https://stackoverflow.com/help/how-to-ask\">How to ask</a>, and post a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, Verifiable Example</a>.  You&#39;re close, but don&#39;t post &quot;something like this&quot;.  Post an example that&#39;s <i>complete</i> and that you have <i>tested</i> and that shows your issue.  Show us how you&#39;re interpreting <code>currentBytes</code> after the call."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 9731890, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FsiJVxJVMj0/AAAAAAAAAAI/AAAAAAAAADY/uMX1Pswphe4/photo.jpg?sz=128", "display_name": "Cole Crouter", "link": "https://stackoverflow.com/users/9731890/cole-crouter"}, "edited": false, "score": 0, "creation_date": 1525288338, "post_id": 50141787, "comment_id": 87301995, "body": "Ah perfect. I don&#39;t why I didn&#39;t try this before, but it works! Thank you"}], "tags": [], "owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "is_accepted": true, "score": 2, "last_activity_date": 1525287831, "creation_date": 1525287831, "answer_id": 50141787, "question_id": 50141613, "link": "https://stackoverflow.com/questions/50141613/copyfile-state-get-always-showing-0/50141787#50141787", "title": "copyfile_state_get always showing 0", "body": "<p>It seems like you should use something like this to pass in the address of an <code>off_t</code> so that <code>copyfile_state_get(...)</code> can fill in the value.</p>\n\n<p>Also as the doc states;</p>\n\n<pre><code>All of the other functions return 0 on success, and less than 0 on error.\n</code></pre>\n\n<p>You probably want to print currentBytes not the return value.</p>\n\n<pre><code>off_t currentBytes = 0; // Space for an actual off_t\n...\n// Somewhere in the callback function\ncopyfile_state_get(state, COPYFILE_STATE_COPIED, &amp;currentBytes);\ncout &lt;&lt; currentBytes;\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 9731890, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FsiJVxJVMj0/AAAAAAAAAAI/AAAAAAAAADY/uMX1Pswphe4/photo.jpg?sz=128", "display_name": "Cole Crouter", "link": "https://stackoverflow.com/users/9731890/cole-crouter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 50141787, "answer_count": 1, "score": 3, "last_activity_date": 1534603937, "creation_date": 1525287211, "last_edit_date": 1592644375, "question_id": 50141613, "link": "https://stackoverflow.com/questions/50141613/copyfile-state-get-always-showing-0", "title": "copyfile_state_get always showing 0", "body": "<p>I've been trying to use Apple's COPYFILE library (written in C) for a program I'm making (written in C++). I've got most of it working, but I can't figure out how to get the byte count. From the <a href=\"https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man3/copyfile.3.html\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n<blockquote>\n<h3>COPYFILE_STATE_COPIED</h3>\n<p>Get the number of data bytes copied so far.  (Only valid for copyfile_state_get(); see below for more details about callbacks.)  The dst parameter is a pointer to off_t (type off_t * ).</p>\n</blockquote>\n<p>The usage for copyfile_state_get() is as follows (from the same documentation):</p>\n<pre><code>copyfile_state_get(copyfile_state_t state, uint32_t flag, void * dst);\n</code></pre>\n<p>My current code for it looks something like this:</p>\n<pre><code>// Main function:\noff_t* currentBytes = 0;\ncopyfile_state_t state = copyfile_state_alloc();\ncopyfile_flags_t flags = COPYFILE_RECURSIVE | COPYFILE_DATA;\ncopyfile(//SOURCE, //DESTINATION, state, flags);\n\n// Somewhere in the callback function:\ncout &lt;&lt; copyfile_state_get(state, COPYFILE_STATE_COPIED, currentBytes);\n</code></pre>\n<p>The copying part works fine (files get copied), but all that gets outputted from the callback function is <code>0x0</code>. I've tried using a pointer to a pointer to a <code>off_t</code>, and that <strong>does</strong> give me an actual address(?), such as <code>0x10335ad5c8</code>, however I can't seem to go any further than that. I'm not super familiar with pointers and addresses, so maybe I'm missing something, but I'm hoping someone can point me in the right direction.</p>\n"}, {"tags": ["c++", "pointers", "segmentation-fault", "image-segmentation", "adjacency-matrix"], "comments": [{"owner": {"reputation": 300, "user_id": 7047514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d050f84528da54688ea08321a92c34e?s=128&d=identicon&r=PG&f=1", "display_name": "Thiner", "link": "https://stackoverflow.com/users/7047514/thiner"}, "edited": false, "score": 0, "creation_date": 1525286906, "post_id": 50141418, "comment_id": 87301315, "body": "Try clang sanitizers."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1525289172, "post_id": 50141418, "comment_id": 87302413, "body": "There wasn&#39;t really a need to use pointers just because <code>std::vector&lt;std::vector&gt;</code> used memory.  You could have just used <code>std::vector&lt;int&gt;</code> and allocate both rows and columns in a single vector, and then compute the <code>(x, y)</code> point of the vector by using simple arithmetic."}, {"owner": {"reputation": 1471, "user_id": 4161406, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jmkcSCy65Dc/AAAAAAAAAAI/AAAAAAAAACA/3IMYGIYfw28/photo.jpg?sz=128", "display_name": "BJovke", "link": "https://stackoverflow.com/users/4161406/bjovke"}, "edited": false, "score": 0, "creation_date": 1525292247, "post_id": 50141418, "comment_id": 87303927, "body": "<i>&quot;I was running into memory problems when computing huge matrixes (&gt;800x800).&quot;</i>. What kind of memory problems? Do you have a computer with 1 MB of RAM? Did you call <code>std::vector::reserve()</code>?"}], "owner": {"reputation": 660, "user_id": 1081088, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/0d3fe00e69bd433b404d8b0a1d1d36dd?s=128&d=identicon&r=PG", "display_name": "spacing", "link": "https://stackoverflow.com/users/1081088/spacing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1525286412, "creation_date": 1525286412, "question_id": 50141418, "link": "https://stackoverflow.com/questions/50141418/run-through-adjacency-matrix-with-pointers", "title": "Run through Adjacency matrix with pointers", "body": "<p>I'm trying to implement a adjacency matrix with pointers like such:</p>\n\n<pre><code>int **Adj_Matrix;\n\nint** create_Mat_adj(int lines, int columns)\n{\n    int **Adj_Matrix = new int*[lines]; \n    int *Adj_Matrix_block = new int[lines * columns+1]; \n    for (int i = 1; i &lt; columns+1; ++i, Adj_Matrix_block += columns+1 ) {\n         Adj_Matrix[0]= new int; // sink or source for img segmentation\n         Adj_Matrix[i] = Adj_Matrix_block;\n   }\n    return Adj_Matrix;\n}\n\nvoid delete_Mat_adj(int **i)\n{\n   delete [] i[0];\n   delete [] i;\n}\n</code></pre>\n\n<p>I'm using this to solve a image segmentation problem, using Edmond's Karp and a BFS, as such I am adding +1 to the Matrix size as a source / sink for the algorithm. I runninbg though that matrix starting at the +1 position to fill the vertical and horizontal link values from input one by one.</p>\n\n<p>When running through the matrix to fill the blocks with the weights of the links I am running into a segmentation fault error:</p>\n\n<pre><code>  //add horizontal links to adj matrix\n  int w = 1;\n  for (int i = 0; i &lt; lines; i++){\n    for (int j = 0; j &lt; columns-1; j++){\n      //get horizontal links individually from input\n      cin&gt;&gt;aux;\n      Adj_Matrix[w][w+1] = aux;\n      Adj_Matrix[w+1][w] = aux;\n      w++;\n    }\n    w++;\n  }\n  //add vertical links to adj Matrix\n  int k = 1;\n  w=columns+1;\n  for (int i = 0; i &lt; lines-1; i++){\n    for (int j = 0; j &lt; columns; j++){\n      //get vertical links individually from input\n      cin&gt;&gt;aux;\n      Adj_Matrix[k][w] = aux;\n      Adj_Matrix[w][k] = aux;\n      w++;\n      k++;\n    }\n  }\n</code></pre>\n\n<p>I had the algorithm working but I changed implementation from a <code>vector&lt; vector&lt;int&gt; &gt;</code>  for the Adj_Matrix to using pointers because I was running into memory problems when computing huge matrixes (>800x800).</p>\n"}, {"tags": ["c++", "console-application", "kbhit"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1525286396, "post_id": 50141220, "comment_id": 87301061, "body": "It is explicitly demonstrated in <a href=\"https://msdn.microsoft.com/en-us/library/58w7c94c.aspx\" rel=\"nofollow noreferrer\">the code example</a>."}], "answers": [{"tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": false, "score": 0, "last_activity_date": 1525285986, "creation_date": 1525285986, "answer_id": 50141330, "question_id": 50141220, "link": "https://stackoverflow.com/questions/50141220/how-to-reset-kbhit/50141330#50141330", "title": "How to reset kbhit()?", "body": "<p>The <a href=\"https://docs.microsoft.com/en-us/windows/console/readconsoleinput\" rel=\"nofollow noreferrer\"><code>ReadConsoleInput</code> documentation page</a> tells you how to check whether input is available (wait on the console handle, potentially for zero time if you want to poll) and how to unqueue it (by calling <code>ReadConsoleInput</code> or <code>FlushConsoleInputBuffer</code>)</p>\n\n<p>By using the console API exclusively, you'll avoid any desynchronization between that and <code>kbhit()</code>, particularly the case where there are only mouse events waiting, so <code>kbit()</code> returns false but you still would want to flush the queue.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 15359381, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/eb9c9da1638f02f76c3abc8d1afc4fb4?s=128&d=identicon&r=PG", "display_name": "ParashSaitama", "link": "https://stackoverflow.com/users/15359381/parashsaitama"}, "is_accepted": false, "score": 0, "last_activity_date": 1615278228, "creation_date": 1615278228, "answer_id": 66543214, "question_id": 50141220, "link": "https://stackoverflow.com/questions/50141220/how-to-reset-kbhit/66543214#66543214", "title": "How to reset kbhit()?", "body": "<p>use kbhit() to detect key press and if key is pressed use getch() to reset kbhit(). For example,</p>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;conio.h&gt;\nusing namespace std;\nint main()\n{\nchar ch;\nfor (int i = 0; i &lt; 100000; i++){\ncout &lt;&lt; i &lt;&lt; endl;\nif (kbhit()){\nch = '#';\ngetch();\n}\nelse{\nch = '_';\n}\ncout &lt;&lt; ch &lt;&lt; endl;\nusleep(100000);\ngotoxy(0, 0);\n}\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 6641963, "user_type": "registered", "profile_image": "https://graph.facebook.com/1846954002198670/picture?type=large", "display_name": "Zeeshan Dhillon", "link": "https://stackoverflow.com/users/6641963/zeeshan-dhillon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 965, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1615278228, "creation_date": 1525285552, "question_id": 50141220, "link": "https://stackoverflow.com/questions/50141220/how-to-reset-kbhit", "title": "How to reset kbhit()?", "body": "<p>I am making typing game in which random alphabets falls down from top of screen to the bottom and user needs to press that key to get score. There are two nested loops use to make this falling effect. The outer while loop generates random alphabet and the random position on x-axis while the inner for loop increments y-axis coordinates and prints the characters for each y coordinate value to make it fall. Now the problem is that when I use kbhit() function in for loop to check if users have pressed any key or not, it returns false when user has not pressed any key. But when user presses a key for the first time, it returns true and user gets the score. But when kbhit() is called again for next random alphabet, it returns true whether or not user has hit keyboard or not because user pressed ket earlier. May be I need to clear the keyboard buffer but  I don't know how to do that. Here is </p>\n\n<pre><code> while (true) {\n        ch = rand() % 26 + 65;\n        xPos = rand() % (x_end - x_start - 1) + x_start + 1;\n        for (int i = y_start + 1; i &lt; y_end - 1 &amp;&amp; !kbhit(); i++) {\n            cur_pos.X = xPos;\n            cur_pos.Y = i;\n            SetConsoleCursorPosition(console_handle, cur_pos);\n            Sleep(150);\n            cout &lt;&lt; \" \";\n            cur_pos.X = xPos;\n            cur_pos.Y = i + 1;\n            SetConsoleCursorPosition(console_handle, cur_pos);\n            cout &lt;&lt; ch;\n            if (i == y_end - 2) {\n                cur_pos.X = xPos;\n                cur_pos.Y = i + 1;\n                SetConsoleCursorPosition(console_handle, cur_pos);\n                cout &lt;&lt; ch;\n                Sleep(150);\n                cur_pos.X = xPos;\n                cur_pos.Y = i + 1;\n                SetConsoleCursorPosition(console_handle, cur_pos);\n                cout &lt;&lt; \" \";\n\n            }\n\n        }\n</code></pre>\n"}, {"tags": ["c++", "qt-creator", "qdate"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1525285821, "post_id": 50141198, "comment_id": 87300776, "body": "Your question doesn&#39;t meet the &quot;minimal&quot; or &quot;complete&quot; parts of a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 0, "creation_date": 1525285880, "post_id": 50141198, "comment_id": 87300808, "body": "The error message seems pretty self-explanatory.  You cannot concatenate a <code>QDate</code> on to a <code>QString</code>.  Perhaps just change to:  <code>QString currentDate = QDate::currentDate().toString(&quot;YYYY-MM-dd&quot;);</code>?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1525285910, "post_id": 50141198, "comment_id": 87300828, "body": "<code>myqry.exec(&quot;SELECT ItemPrice FROM Item WHERE ItemId=&#39;&quot;+itemSelect+&quot;&#39; &quot;);</code> and also things like <code>myqry.prepare(&quot;INSERT INTO Receipt (ReceiptId, ReceiptDate, ReceiptAmount) VALUES (&#39;&quot;+receiptNo+&quot;&#39;, &#39;&quot;+currentDate+&quot;&#39;, &#39;&quot;+totalAmount+&quot;&#39;) &quot;);</code>. This is a SQL injection attack waiting to happen. See <a href=\"http://doc.qt.io/qt-5/qsqlquery.html#prepare\" rel=\"nofollow noreferrer\"><code>QSqlQuery::prepare</code></a> on the proper usage."}, {"owner": {"reputation": 21, "user_id": 7223350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b0b6205e0053d0eba39c4dfc35eb641?s=128&d=identicon&r=PG", "display_name": "joeBoy69", "link": "https://stackoverflow.com/users/7223350/joeboy69"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1525292408, "post_id": 50141198, "comment_id": 87303998, "body": "@Justin yeah got it, thanks alot. Wil check it then :)"}], "answers": [{"tags": [], "owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "is_accepted": true, "score": 1, "last_activity_date": 1525292908, "last_edit_date": 1525292908, "creation_date": 1525285950, "answer_id": 50141321, "question_id": 50141198, "link": "https://stackoverflow.com/questions/50141198/error-no-match-for-operator-operand-types-are-const-qstring-and-qdate/50141321#50141321", "title": "error: no match for &#39;operator+&#39; (operand types are &#39;const QString&#39; and &#39;QDate&#39;)", "body": "<p>I think you should convert <code>QDate</code> to <code>QString</code> using <a href=\"http://doc.qt.io/qt-5/qdate.html#toString-1\" rel=\"nofollow noreferrer\"><code>toString()</code></a>. </p>\n\n<pre><code>myqry.prepare(\n    \"INSERT INTO Receipt (ReceiptId, ReceiptDate, ReceiptAmount) \"\n    \"VALUES (:receipt, :date, :amount) \");\nquery.bindValue(\":receipt\", receiptNo);\nquery.bindValue(\":date\", currentDate.toString());\nquery.bindValue(\":amount\", totalAmount);\nquery.exec();\n</code></pre>\n\n<p>However, if you want things to be simple and don't care of SQL injection attack, you could do it like this. You've been warned:</p>\n\n<pre><code>myqry.prepare(\n    \"INSERT INTO Receipt (ReceiptId, ReceiptDate, ReceiptAmount) \"\n    \"VALUES ('\"+receiptNo+\"', '\"+currentDate.toString()+\"', '\"+totalAmount+\"') \");\n</code></pre>\n\n<p>Also, you may need to adjust the format of the string returned by <code>toString()</code>.</p>\n"}], "owner": {"reputation": 21, "user_id": 7223350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b0b6205e0053d0eba39c4dfc35eb641?s=128&d=identicon&r=PG", "display_name": "joeBoy69", "link": "https://stackoverflow.com/users/7223350/joeboy69"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 877, "favorite_count": 0, "closed_date": 1525285973, "accepted_answer_id": 50141321, "answer_count": 1, "score": 0, "last_activity_date": 1525292908, "creation_date": 1525285462, "question_id": 50141198, "link": "https://stackoverflow.com/questions/50141198/error-no-match-for-operator-operand-types-are-const-qstring-and-qdate", "closed_reason": "Duplicate", "title": "error: no match for &#39;operator+&#39; (operand types are &#39;const QString&#39; and &#39;QDate&#39;)", "body": "<p>I do have problem with declaring QDate and when I used the declared word(value) in the DB insert function with that related value, its keep on prompting with an error. Please do guide and correct me. I have done my part but still it's giving problem; I don't have idea then :(</p>\n\n<p>My Code:</p>\n\n<pre><code>#include \"cashregister.h\"\n#include \"ui_cashregister.h\"\n\n\nCashRegister::CashRegister(QWidget *parent) :\n    QDialog(parent),\n    ui(new Ui::CashRegister)\n{\n    ui-&gt;setupUi(this);\n\n    ui-&gt;dateEdit-&gt;setDate(QDate::currentDate());\n\n    ui-&gt;groupBox_sales-&gt;hide();\n\n    ui-&gt;pushButton_finish-&gt;hide();\n\n    ui-&gt;tableView-&gt;hide();\n\n    ui-&gt;label_totalAmount-&gt;hide();\n\n    QTime time = QTime::currentTime();\n    qsrand((uint)time.msec());\n}\n\nCashRegister::~CashRegister()\n{\n    delete ui;\n}\n\nvoid CashRegister::on_pushButton_createNewReceipt_clicked()\n{\n    ui-&gt;groupBox_sales-&gt;show();\n\n    int bigNo, smallNo;\n    bigNo = 100;\n    smallNo = 0;\n\n    int randomValue = qrand() % ((bigNo + 1) - smallNo) + smallNo;\n\n    ui-&gt;label_receiptNum-&gt;setText(\"AST\" + QString::number(randomValue));\n\n    QSqlQueryModel *myModel = new QSqlQueryModel();\n    QSqlQuery myqry;\n    myqry.prepare(\"SELECT ItemId FROM Item\");\n    myqry.exec();\n    myModel-&gt;setQuery(myqry);\n    ui-&gt;comboBox_itemID-&gt;setModel(myModel);\n\n    myqry.prepare(\"CREATE TABLE IF NOT EXISTS Receipt (ReceiptId VARCHAR(7) UNIQUE PRIMARY KEY, ReceiptDate DATE, ReceiptAmount DOUBLE)\" );\n    myqry.exec();\n    myqry.prepare(\"CREATE TABLE IF NOT EXISTS Sold (ReceiptId VARCHAR(7), ItemId VARCHAR(7), SoldQuantity INTEGER, TotalPrice DOUBLE)\" );\n    myqry.exec();\n}\n\nvoid CashRegister::on_pushButton_next_clicked()\n{\n    ui-&gt;tableView-&gt;show();\n    ui-&gt;pushButton_finish-&gt;show();\n    ui-&gt;label_totalAmount-&gt;show();\n\n    QString receiptNo = ui-&gt;label_receiptNum-&gt;text();\n    QString itemSelect = ui-&gt;comboBox_itemID-&gt;currentText();\n    QString qtySold = ui-&gt;lineEdit_qtySold-&gt;text();\n    QDate currentDate = QDate::currentDate();   //&lt;--THIS--&gt;//\n    QString totalAmount = ui-&gt;label_totalAmount-&gt;text();\n\n\n    double price=0, totalPrice=0; \n\n    QSqlQuery myqry;\n    myqry.exec(\"SELECT ItemPrice FROM Item WHERE ItemId='\"+itemSelect+\"' \");\n    if (myqry.next())\n        price = myqry.value(0).toDouble();\n\n    totalPrice = price * qtySold.toInt();\n\n    QString totalPriceString = QString::number(totalPrice);\n\n    myqry.prepare(\"INSERT INTO Sold (ReceiptId, ItemId, SoldQuantity, TotalPrice) VALUES ('\"+receiptNo+\"', '\"+itemSelect+\"', '\"+qtySold+\"', '\"+totalPriceString+\"') \");\n    myqry.exec();\n\n    ui-&gt;comboBox_itemID-&gt;setCurrentIndex(0);\n    ui-&gt;lineEdit_qtySold-&gt;clear();\n\n    myqry.prepare(\"SELECT Item.ItemId, Item.ItemName, Item.ItemPrice, Sold.SoldQuantity FROM Item, Sold WHERE Item.ItemId = Sold.ItemId AND Sold.ReceiptId='\"+receiptNo+\"' \");\n    myqry.exec();\n\n    QSqlQueryModel *myModel = new QSqlQueryModel();\n    myModel-&gt;setQuery(myqry);\n    ui-&gt;tableView-&gt;setModel(myModel);\n\n    double sum = 0;\n    myqry.exec(\"SELECT SUM(TotalPrice) FROM Sold WHERE ReceiptId='\"+receiptNo+\"' \");\n    if (myqry.next())\n        sum += myqry.value(0).toDouble();\n\n    ui-&gt;label_totalAmount-&gt;setText(\"TOTAL AMOUNT: RM\" + QString::number(sum));\n\n    //&lt;--THIS--&gt;//\n    myqry.prepare(\"INSERT INTO Receipt (ReceiptId, ReceiptDate, ReceiptAmount) VALUES ('\"+receiptNo+\"', '\"+currentDate+\"', '\"+totalAmount+\"') \");\n    myqry.exec();\n\n}\n\nvoid CashRegister::on_pushButton_finish_clicked()\n{\n    this-&gt;close();\n}\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>C:\\Users\\joeboy69\\Documents\\Workshop 1\\ASTECHNOWERKZ\\cashregister.cpp:100: error: no match for 'operator+' (operand types are 'const QString' and 'QDate')\n     myqry.prepare(\"INSERT INTO Receipt (ReceiptId, ReceiptDate, ReceiptAmount) VALUES ('\"+receiptNo+\"', '\"+currentDate+\"', '\"+totalAmount+\"') \");\n                                                                                                           ^\n</code></pre>\n\n<p>Screenshot:</p>\n\n<p><a href=\"https://i.stack.imgur.com/m6GFP.jpg\" rel=\"nofollow noreferrer\">Screenshot of the Code with Error - View it HERE</a></p>\n"}, {"tags": ["c++", "tbb"], "answers": [{"tags": [], "owner": {"reputation": 693, "user_id": 9345476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1496727017b724579cba99520f9ce45d?s=128&d=identicon&r=PG&f=1", "display_name": "Raphael D.", "link": "https://stackoverflow.com/users/9345476/raphael-d"}, "is_accepted": true, "score": 0, "last_activity_date": 1525287722, "creation_date": 1525287722, "answer_id": 50141757, "question_id": 50141146, "link": "https://stackoverflow.com/questions/50141146/thread-building-blocks-segmentation-fault/50141757#50141757", "title": "Thread Building Blocks segmentation fault", "body": "<p>I finally solved it. It came indeed from my code. When <code>spawn_and_wait_for_all()</code> is called, it calls the <code>execute()</code> method of the previously spawned tasks, but gdb seems unable to show that in the backtrace. What worked for me is to set the number of threads to 1 and do the good old <code>cout &lt;&lt; endl &lt;&lt; \"Checkpoint\" &lt;&lt; endl</code> debugging. \nIn the present case, I forgot to return in the first if of <code>execute()</code>. Any weakness of the code seems to have dramatic consequences with TBB.</p>\n"}], "owner": {"reputation": 693, "user_id": 9345476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1496727017b724579cba99520f9ce45d?s=128&d=identicon&r=PG&f=1", "display_name": "Raphael D.", "link": "https://stackoverflow.com/users/9345476/raphael-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 0, "accepted_answer_id": 50141757, "answer_count": 1, "score": 0, "last_activity_date": 1525287722, "creation_date": 1525285253, "question_id": 50141146, "link": "https://stackoverflow.com/questions/50141146/thread-building-blocks-segmentation-fault", "title": "Thread Building Blocks segmentation fault", "body": "<p>I am trying to debug a C++ code using Intel Thread Building Blocks, following the procedure here - <a href=\"https://stackoverflow.com/questions/32887113/debugging-in-threading-building-blocks/33088351#33088351\">Debugging in threading building Blocks</a>.</p>\n\n<p>I tried running the code with one thread, and with TBB_USE_DEBUG set to 1 (I asked a previous question about it  here - <a href=\"https://stackoverflow.com/questions/50136667/using-intel-tbb-in-debug-mode\">Using Intel TBB in debug mode</a>). However, I get a weird segmentation fault. Here is the gdb backtrace.</p>\n\n<pre><code>#0  0x00007ffff793fbc1 in ?? () from /usr/lib/x86_64-linux-gnu/libtbb.so.2\n#1  0x000000000040d2cb in tbb::task::spawn_and_wait_for_all (child=..., this=0x7ffff63b7a40)\n    at /usr/include/tbb/task.h:728\n#2  MpsTask1::execute (this=0x7ffff63b7a40)\n    at /capps/mps_implementations.hpp:102\n#3  0x00007ffff793ffdd in ?? () from /usr/lib/x86_64-linux-gnu/libtbb.so.2\n#4  0x000000000040d2cb in tbb::task::spawn_and_wait_for_all (child=..., this=0x7ffff63b7d40)\n    at /usr/include/tbb/task.h:728\n#5  MpsTask1::execute (this=0x7ffff63b7d40)\n    at /capps/mps_implementations.hpp:102\n</code></pre>\n\n<p>I am quite puzzled by this backtrace, because I cannot control what happens inside the library. Is it possible that a mistake I have made causes spawn_root_and_wait to fail ?</p>\n\n<p>Here is my code (without constructor and destructor to keep it short). Its purpose is to compute the maximum prefix sum of an array via a reduction operation. It recursively divides the array until it the chunks are small enough, and then join the results. I know I could just use TBB parallel_reduce template for this problem, but my goal is to understand how TBB task based programming works.</p>\n\n<pre><code>class MpsTask1: public task {\npublic:\n\n    task* execute(){\n        if(size &lt;= Cutoff){\n\n            for(int i = left; i != right; i++){\n                *sum = *sum + array[i]);\n\n                if (*sum &lt;= *mps){\n                    *mps = *sum;\n                    *position = i+1; \n                }\n            }\n\n            memo[depth][index] = cutoff;\n\n        }else{\n            // Parameters for subtasks\n            int middle = (right+left)/2;\n            int sizel = middle - left;\n            int sizer = right - middle;\n            int newDepth = depth + 1;\n            int lIndex = 2*index;\n            int rIndex = lIndex + 1;\n\n            // Variables for results\n            int lPos = left;\n            int rPos = middle;\n            double lsum, rsum, lmps, rmps;\n\n            // Create subtasks\n            set_ref_count(3);\n\n            MpsTask1&amp; lTask = *new(allocate_child()) MpsTask1(Cutoff,array,sizel,&amp;lsum,&amp;lmps,&amp;lPos,memo,newDepth,lIndex,left,middle);\n            spawn(lTask);\n\n            MpsTask1 &amp;rTask = *new(allocate_child()) MpsTask1(Cutoff,array,sizer,&amp;rsum, &amp;rmps,&amp;rPos,memo,newDepth,rIndex,middle,right);\n\n            spawn_and_wait_for_all(rTask);\n\n            // Join results\n            rmps = lsum+rmps;\n            *sum = lsum+rsum;\n            if(*mps &lt;= rmps){\n                *mps = rmps;\n                *position = rPos;\n                memo[depth][index] = rightChild;\n            }\n            else{\n                *mps_interval = lmps;\n                *position = lPos;\n                memo[depth][index] = leftChild;\n            }\n            return NULL;\n        }\n    }\n\nprivate:\n    /* Below this size, the mps and sum are computed sequentially */\n    int Cutoff;\n    /* Input array and its size */\n    double* array;\n    int size;    \n    /* Identification of the task */\n    int depth;\n    int index;\n    int left;\n    int right;\n    /* Intervals for sum and mps */\n    double* sum;\n    double* mps;\n    /* Position of the mps */\n    int* position;\n    // Status : left child, right child, or cutoff\n    Status** memo;\n};\n\nvoid parallel_mps(double* array, int size, int Cutoff){\n    // Create variables for result\n    double sum = 0., mps = 0.;\n    int position = 0;\n\n    // Initialization of memo\n    ....\n    // Finished initialization of memo\n\n\n    MpsTask1&amp; root = *new(task::allocate_root()) MpsTask1(Cutoff,array,size,&amp;sum,&amp;mps,&amp;position,memo);\n\n    task::spawn_root_and_wait(root);\n}\n</code></pre>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1525284543, "post_id": 50140963, "comment_id": 87300186, "body": "Just add a <code>static</code> constant to <code>fixVec</code> that is equal to <code>siz</code>."}, {"owner": {"reputation": 17, "user_id": 9731657, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Malkalma", "link": "https://stackoverflow.com/users/9731657/malkalma"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1525284814, "post_id": 50140963, "comment_id": 87300297, "body": "I can&#39;t change that code. I can change only my class&#39; code. (school project, I have to upload only my class to test it online. It won&#39;t work there even if on my pc it will)."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1525286063, "post_id": 50140963, "comment_id": 87300898, "body": "In your code <code>fixVec&lt;ClonableTestClass*, 1&gt;</code>, the maximum number of elements is 1. If you&#39;re going to need that information later, don&#39;t throw it away."}, {"owner": {"reputation": 17, "user_id": 9731657, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Malkalma", "link": "https://stackoverflow.com/users/9731657/malkalma"}, "edited": false, "score": 0, "creation_date": 1525286235, "post_id": 50140963, "comment_id": 87300970, "body": "Yeah, but how am I supposed to see this information in my class?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1525288775, "post_id": 50140963, "comment_id": 87302220, "body": "@Malkalma -- <code>delete rhs;</code> -- Why are you destroying the client&#39;s data?  If the vector is &quot;full&quot;, just say it&#39;s full -- don&#39;t go and destroy the data sent to your class.  In addition, how do you know that address came about from a call to <code>new</code>?  What if the client just gives you the address of a non-dynamically allocated variable?"}, {"owner": {"reputation": 17, "user_id": 9731657, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Malkalma", "link": "https://stackoverflow.com/users/9731657/malkalma"}, "edited": false, "score": 0, "creation_date": 1525289613, "post_id": 50140963, "comment_id": 87302647, "body": "Because the task says to do that. If it&#39;s full, it has to be deleted or the task won&#39;t be good because there gonna be a memory leak."}], "answers": [{"tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": false, "score": 3, "last_activity_date": 1525285449, "creation_date": 1525285449, "answer_id": 50141192, "question_id": 50140963, "link": "https://stackoverflow.com/questions/50140963/i-need-the-max-size-of-my-vector-the-value-i-gave-c/50141192#50141192", "title": "I need the max size of my vector (the value I gave) C++", "body": "<p>Two common solutions for extracting template arguments from a type are type traits that use partial explicit specialization or to use a function template  to deduce the template arguments from the function argument. The function-based approach consists of writing a function that expects a <code>fixVec&lt;T, I&gt;</code> and getting the compiler to deduce <code>I</code> :</p>\n\n<pre><code>// The compiler will deduce T and I from the argument\ntemplate&lt;class T, size_t I&gt;\nsize_t get_vec_size(const fixVec&lt;T, I&gt; &amp;) {\n    return I;\n}\n\nvoid foo()\n{\n    fixVec&lt;char, 10&gt; my_vec;\n    const auto my_vec_max_size = get_vec_size(my_vec);\n}\n</code></pre>\n\n<p>To use partial explicit specialization you write a new template and specialize it for the type whose template arguments you need and, again, get the compiler to deduce those arguments for you :</p>\n\n<pre><code>template&lt;class T&gt;\nstruct vec_size {};\n\ntemplate&lt;class T, size_t I&gt;\nstruct vec_size&lt;fixVec&lt;T, I&gt;&gt; : std::integral_constant&lt;size_t, I&gt; {};\n\nvoid foo()\n{\n    fixVec&lt;char, 10&gt; my_vec;\n    const auto my_vec_max_size = vec_size&lt;decltype(my_vec)&gt;::value;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1525287480, "post_id": 50141355, "comment_id": 87301566, "body": "should&#39;t <code>get_size()</code> take <code>X</code> by const reference instead of by value?"}, {"owner": {"reputation": 17, "user_id": 9731657, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Malkalma", "link": "https://stackoverflow.com/users/9731657/malkalma"}, "edited": false, "score": 0, "creation_date": 1525288033, "post_id": 50141355, "comment_id": 87301835, "body": "It is looking good for me, but how am I supposed to use this in my code? I mean: maxi = get_size(flakker); ?"}, {"owner": {"reputation": 437, "user_id": 3868157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea640d71ffc26471c0471a551fdc262?s=128&d=identicon&r=PG&f=1", "display_name": "cisnjxqu", "link": "https://stackoverflow.com/users/3868157/cisnjxqu"}, "edited": false, "score": 0, "creation_date": 1525288667, "post_id": 50141355, "comment_id": 87302166, "body": "If you&#39;re only allowed to use C++11 you can try using <code>template&lt;typename, size_t&gt; class X</code> instead of <code>template&lt;typename, size_t&gt; typename X</code>. Otherwise you can compile with -std=c++17. The <code>constexpr</code> is not required so you can just remove it."}, {"owner": {"reputation": 437, "user_id": 3868157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea640d71ffc26471c0471a551fdc262?s=128&d=identicon&r=PG&f=1", "display_name": "cisnjxqu", "link": "https://stackoverflow.com/users/3868157/cisnjxqu"}, "edited": false, "score": 0, "creation_date": 1525288690, "post_id": 50141355, "comment_id": 87302178, "body": "And since you already have an instance of <code>S</code> you can just use <code>get_size(flakker)</code>."}, {"owner": {"reputation": 437, "user_id": 3868157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea640d71ffc26471c0471a551fdc262?s=128&d=identicon&r=PG&f=1", "display_name": "cisnjxqu", "link": "https://stackoverflow.com/users/3868157/cisnjxqu"}, "edited": false, "score": 0, "creation_date": 1525289849, "post_id": 50141355, "comment_id": 87302772, "body": "You&#39;re welcome! There seem to be some <code>&lt;&gt;</code> missing. Try <code>template&lt;template&lt;typename, size_t&gt; class X, typename T, size_t N&gt;</code>."}, {"owner": {"reputation": 437, "user_id": 3868157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea640d71ffc26471c0471a551fdc262?s=128&d=identicon&r=PG&f=1", "display_name": "cisnjxqu", "link": "https://stackoverflow.com/users/3868157/cisnjxqu"}, "edited": false, "score": 0, "creation_date": 1525289912, "post_id": 50141355, "comment_id": 87302803, "body": "If that doesn&#39;t compile you can fall back to specifying the type manually: <code>template&lt;typename T, size_t N&gt; size_t get_size(const fixVec&lt;T, N&gt;&amp;) { return N; }</code>"}, {"owner": {"reputation": 17, "user_id": 9731657, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Malkalma", "link": "https://stackoverflow.com/users/9731657/malkalma"}, "edited": false, "score": 0, "creation_date": 1525290302, "post_id": 50141355, "comment_id": 87302991, "body": "Seems like it&#39;s working. Thank you very much. For me it&#39;s much easier to understand something if I have a working example and I don&#39;t have to spend hours on testing/thinking."}, {"owner": {"reputation": 437, "user_id": 3868157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea640d71ffc26471c0471a551fdc262?s=128&d=identicon&r=PG&f=1", "display_name": "cisnjxqu", "link": "https://stackoverflow.com/users/3868157/cisnjxqu"}, "edited": false, "score": 0, "creation_date": 1525290514, "post_id": 50141355, "comment_id": 87303108, "body": "I understand. The example I provided only works with fairly recent compilers."}, {"owner": {"reputation": 17, "user_id": 9731657, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Malkalma", "link": "https://stackoverflow.com/users/9731657/malkalma"}, "edited": false, "score": 0, "creation_date": 1525294016, "post_id": 50141355, "comment_id": 87304771, "body": "@robinleander I got some new problems if you have some time... Did not mention it, but in the class template the second argument is some kind of stl container. The default is vector, but in case the test is about making a std::list, it says no matching function for call to &quot;get_size&quot;, but I don&#39;t find how should I change the code to work. <a href=\"https://imgur.com/a/4Pkwzqe\" rel=\"nofollow noreferrer\">imgur.com/a/4Pkwzqe</a>"}, {"owner": {"reputation": 437, "user_id": 3868157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea640d71ffc26471c0471a551fdc262?s=128&d=identicon&r=PG&f=1", "display_name": "cisnjxqu", "link": "https://stackoverflow.com/users/3868157/cisnjxqu"}, "edited": false, "score": 0, "creation_date": 1525634222, "post_id": 50141355, "comment_id": 87424075, "body": "You&#39;ll have to put it in some header and include it wherever its needed."}], "tags": [], "owner": {"reputation": 437, "user_id": 3868157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea640d71ffc26471c0471a551fdc262?s=128&d=identicon&r=PG&f=1", "display_name": "cisnjxqu", "link": "https://stackoverflow.com/users/3868157/cisnjxqu"}, "is_accepted": false, "score": 1, "last_activity_date": 1525288044, "last_edit_date": 1525288044, "creation_date": 1525286090, "answer_id": 50141355, "question_id": 50140963, "link": "https://stackoverflow.com/questions/50140963/i-need-the-max-size-of-my-vector-the-value-i-gave-c/50141355#50141355", "title": "I need the max size of my vector (the value I gave) C++", "body": "<p>Interesting question!</p>\n\n<p>You could for example use <a href=\"http://en.cppreference.com/w/cpp/language/template_parameters\" rel=\"nofollow noreferrer\">template template parameters</a>:</p>\n\n<pre><code>template&lt;template&lt;typename, size_t&gt; typename X, typename T, size_t N&gt;\nconstexpr size_t get_size(const X&lt;T, N&gt;&amp;) {\n    return N;\n}\n\nint main() {\n    std::cout &lt;&lt; get_size(fixVec&lt;int, 5&gt;{}) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>This will not only work for <code>fixVec</code> but any template type with a type and a size_t as template arguments!</p>\n\n<p>So for example the following is also valid:</p>\n\n<pre><code>get_size(std::array&lt;int, 5&gt;{});\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 437, "user_id": 3868157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea640d71ffc26471c0471a551fdc262?s=128&d=identicon&r=PG&f=1", "display_name": "cisnjxqu", "link": "https://stackoverflow.com/users/3868157/cisnjxqu"}, "edited": false, "score": 0, "creation_date": 1525286597, "post_id": 50141386, "comment_id": 87301163, "body": "The author mentioned that they cannot change the fixVec&#39;s code."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1525288196, "last_edit_date": 1525288196, "creation_date": 1525286233, "answer_id": 50141386, "question_id": 50140963, "link": "https://stackoverflow.com/questions/50140963/i-need-the-max-size-of-my-vector-the-value-i-gave-c/50141386#50141386", "title": "I need the max size of my vector (the value I gave) C++", "body": "<blockquote>\n  <p>Fixed sized vector:</p>\n</blockquote>\n\n<p>Why are you using <code>std::vector</code> instead of <code>std:array</code> for a \"fixed\" array?</p>\n\n<blockquote>\n  <p>It creates a vector with the size of 1. (1)</p>\n</blockquote>\n\n<p>No, it doesn't.  It creates a <code>vector</code> whose <code>size()</code> and <code>capacity()</code> are initially 0, not 1.  Your <code>siz</code> value is being used as an artificial <em>max capacity</em>, you are still allowing the vector to grow dynamically until it reaches your max.</p>\n\n<blockquote>\n<pre><code>EXPECT_THROW(t1.add(new ClonableTestClass), MyException);\n</code></pre>\n  \n  <p>Here it should throw the exception. (3)</p>\n</blockquote>\n\n<p>True, and worse, it leaks the <code>ClonableTestClass</code> object as a result.  You should be using <code>std::unique_ptr&lt;ClonableTestClass&gt;</code> instead so you maintain ownership of the object at all times and free it correctly, even if an exception is thrown.</p>\n\n<blockquote>\n  <p>how can I check when I reach the \"max_size()\" of MY vector.</p>\n</blockquote>\n\n<p>You already are.  That is exactly what <code>size() &gt;= siz</code> is doing.</p>\n\n<blockquote>\n  <p>Or how can I get back the value I gave in code (1) (the number between the !):</p>\n\n<pre><code>ClonableHeteroStore&lt;ClonableTestClass, fixVec&lt;ClonableTestClass*, !!!1!!! &gt;, MyException&gt; t1;\n</code></pre>\n</blockquote>\n\n<p>It is only available in the <code>siz</code> template parameter.  If you want OUTSIDE code to know the value of <code>siz</code>, then you need to expose public access to it, eg:</p>\n\n<pre><code>template &lt;typename T, size_t siz&gt;\nstruct fixVec : public std::vector&lt;T&gt;\n{\n    const size_t max_elements_allowed;\n    fixVec() : max_elements_allowed(siz) {}\n    ...\n};\n</code></pre>\n\n<p>Or, if you are using C++11 or later:</p>\n\n<pre><code>template &lt;typename T, size_t siz&gt;\nstruct fixVec : public std::vector&lt;T&gt;\n{\n    const size_t max_elements_allowed = siz;\n    ...\n};\n</code></pre>\n\n<p>Then you can do this:</p>\n\n<pre><code>void add(T1 *rhs)\n{\n    if (currently &lt; flakker.max_elements_allowed)\n    {\n        flakker.push_back(rhs);\n        currently++;\n    }\n    else\n    {\n        delete rhs;\n        throw PRED();\n    }\n}\n</code></pre>\n\n<p>FYI, you don't really need <code>currently</code>, you could just use <code>flakker.size()</code> instead:</p>\n\n<pre><code>void add(T1 *rhs)\n{\n    if (flakker.size() &lt; flakker.max_elements_allowed)\n    {\n        flakker.push_back(rhs);\n    }\n    else\n    {\n        delete rhs;\n        throw PRED();\n    }\n}\n</code></pre>\n\n<p>That said, <code>std::vector</code> has a <a href=\"http://en.cppreference.com/w/cpp/container/vector/capacity\" rel=\"nofollow noreferrer\"><code>capacity()</code></a> method, which is what you are really looking for:</p>\n\n<pre><code>void add(T1 *rhs)\n{\n    if (flakker.size() &lt; flakker.capacity())\n    {\n        flakker.push_back(rhs);\n    }\n    else\n    {\n        delete rhs;\n        throw PRED();\n    }\n}\n</code></pre>\n\n<p>You just need to <em>pre-allocate</em> the <code>vector</code>'s internal array up front:</p>\n\n<pre><code>template &lt;typename T, size_t siz&gt;\nstruct fixVec : public std::vector&lt;T&gt;\n{\n    fixVec() { std::vector&lt;T&gt;::reserve(siz); } // &lt;-- add this!\n    ...\n};\n</code></pre>\n\n<blockquote>\n  <p>I have a class named ClonableHeteroStore where I have the following code:</p>\n\n<pre><code>...\n</code></pre>\n  \n  <p>What should it do: In case we did not reach the maximum size of the vector we gave in code (1) it should add a new element to the vector. In case we reached the limit we gave in code (1), it should drop an exception.</p>\n</blockquote>\n\n<p>Since your <code>fixVec</code> is already handling that, you should just add the element unconditionally and let <code>push_back()</code> throw if needed:</p>\n\n<pre><code>void add(T1 *rhs)\n{\n    try\n    {\n        flakker.push_back(rhs);\n    }\n    catch (...)\n    {\n        delete rhs;\n        throw PRED();\n    }\n}\n</code></pre>\n\n<p>A better design is to let the caller maintain ownership of the object that is being added and do not release that ownership unless <code>add()</code> is successful.  That way, if an exception is thrown, the caller can free the object correctly and not leak it.  That should not be <code>add()</code>'s responsibility to handle:</p>\n\n<pre><code>void add(T1 *rhs)\n{\n    try\n    {\n        flakker.push_back(rhs);\n    }\n    catch (...)\n    {\n        throw PRED();\n    }\n}\n\n...\n\nClonableTestClass *obj = new ClonableTestClass;\ntry\n{\n    t1.add(obj);\n}\ncatch (...)\n{\n    delete obj;\n    throw;\n}\n</code></pre>\n\n<p>Or, if you are using C++11 or later:</p>\n\n<pre><code>std::unique_ptr&lt;ClonableTestClass&gt; obj(new ClonableTestClass);\nt1.add(obj.get());\nobj.release();\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>void add(std::unique_ptr&lt;T1&gt; rhs)\n{\n    try\n    {\n        flakker.push_back(rhs.get());\n        rhs.release();\n    }\n    catch (...)\n    {\n        throw PRED();\n    }\n}\n\n...\n\nt1.add(std::unique_ptr&lt;ClonableTestClass&gt;(new ClonableTestClass));\n</code></pre>\n\n<blockquote>\n  <p>The only code is possible to change is the ClonableHeteroStore class. Somehow I should find out, how big is my vector.</p>\n</blockquote>\n\n<p>If you can't change <code>fixVec</code> to make its <code>siz</code> value public, and you must find out its <code>siz</code>, then you have to resort to some template trickery, eg:</p>\n\n<pre><code>template&lt;typename T, size_t siz&gt;\nsize_t get_capacity(const fixVec&lt;T, siz&gt; &amp;) { return siz; }\n\n...\n\nvoid add(T1 *rhs)\n{\n    if (flakker.size() &lt; get_capacity(flakker))\n        flakker.push_back(rhs);\n    else\n        throw PRED();\n}\n</code></pre>\n\n<p>But, this is exactly why STL containers expose standard <code>size()</code> and <code>capacity()</code> methods, so you don't have to resort to tricks like this.</p>\n\n<p>On the other hand, <code>ClonableHeteroStore</code> doesn't really need to know that <code>siz</code> value to begin with.  It should just perform the <code>push_back()</code> unconditionally and let it throw if needed.</p>\n\n<blockquote>\n  <p>I read alot that vector is dinamically allocating it's size etc. etc., but in this case, it has to throw an exception if I jump over the limit (1).</p>\n</blockquote>\n\n<p>You really should be using <code>std::array</code> instead of <code>std::vector</code>.</p>\n\n<p>If you must use <code>std::vector</code>, than you should consider writing a custom <code>Allocator</code> for your <code>vector</code> to use instead of using the default <code>Allocator</code>.  The custom <code>Allocator</code> can throw if it is asked to allocate memory for too many elements.  Then you can let <code>std::vector</code> behave normally, and not override its <code>push_back()</code> at all.</p>\n"}], "owner": {"reputation": 17, "user_id": 9731657, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Malkalma", "link": "https://stackoverflow.com/users/9731657/malkalma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1525288196, "creation_date": 1525284424, "question_id": 50140963, "link": "https://stackoverflow.com/questions/50140963/i-need-the-max-size-of-my-vector-the-value-i-gave-c", "title": "I need the max size of my vector (the value I gave) C++", "body": "<p>I have the following codes:</p>\n\n<p>Fixed sized vector:</p>\n\n<pre><code>template &lt;typename T, size_t siz&gt;\nstruct fixVec : public std::vector&lt;T&gt; {\n    void push_back(const T&amp; d) {\n    if (std::vector&lt;T&gt;::size() &gt;= siz) throw std::bad_alloc();\n    std::vector&lt;T&gt;::push_back(d);\n}\n};\n</code></pre>\n\n<p>I use \"fixVec\" like this:</p>\n\n<pre><code>ClonableHeteroStore&lt;ClonableTestClass, fixVec&lt;ClonableTestClass*, 1&gt;, MyException&gt; t1;\n</code></pre>\n\n<p>It creates a vector with the size of 1. <strong><em>(1)</em></strong></p>\n\n<pre><code>EXPECT_NO_THROW(t1.add(new ClonableTestClass));\n</code></pre>\n\n<p>It adds 1 element, its fine, no error. <strong><em>(2)</em></strong></p>\n\n<pre><code>EXPECT_THROW(t1.add(new ClonableTestClass), MyException);\n</code></pre>\n\n<p>Here it should throw the exception. <strong><em>(3)</em></strong></p>\n\n<p>My problem is that: how can I check when I reach the \"max_size()\" of MY vector. Not the max size of the vector my PC can handle. \nOr how can I get back the value I gave in code <strong><em>(1)</em></strong> (the number between the !):</p>\n\n<pre><code>ClonableHeteroStore&lt;ClonableTestClass, fixVec&lt;ClonableTestClass*, !!!1!!! &gt;, MyException&gt; t1;\n</code></pre>\n\n<p>I have a class named ClonableHeteroStore where I have the following code:</p>\n\n<pre><code>template &lt;typename T1, class S, typename PRED = int&gt;\nclass ClonableHeteroStore \n{\nprivate:\n    S flakker;\n    size_t currently;\n    size_t maxi;\npublic:\n    ClonableHeteroStore() :  { currently = 0; maxi = 0; }\n\n    void add(T1 *rhs)\n    {\n        if (currently &lt; ???????? )\n        {\n            flakker.push_back(rhs);\n            currently++;\n        }\n        else\n        {\n            delete rhs;\n            throw PRED();\n        }\n    }\n</code></pre>\n\n<p>What should it do:\nIn case we did not reach the maximum size of the vector we gave in code <strong><em>(1)</em></strong> it should add a new element to the vector. In case we reached the limit we gave in code <strong><em>(1)</em></strong>, it should drop an exception.</p>\n\n<p>So line <strong><em>(2)</em></strong> won't have any problem because the vector's size is 1 and this is the first element we put in it. The \"if\" part should run.</p>\n\n<p>Line <strong><em>(3)</em></strong> will throw an exception because it tries to put a second element, but the vector size is <em>1</em>. The \"else\" part should run.</p>\n\n<p>The only code is possible to change is the ClonableHeteroStore class. Somehow I should find out, how big is my vector. I read alot that vector is dinamically allocating it's size etc. etc., but in this case, it has to throw an exception if I jump over the limit (1).</p>\n\n<p>Thanks for any help!</p>\n"}, {"tags": ["c++", "boost", "boost-bind"], "comments": [{"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 2, "creation_date": 1525285048, "post_id": 50140836, "comment_id": 87300422, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. From this <a href=\"http://docs.ros.org/api/roscpp/html/classros_1_1NodeHandle.html\" rel=\"nofollow noreferrer\">page</a> it looks like you&#39;re trying to call the third from last <code>subscribe</code> overload. Is your <code>bind</code> expression convertible to the <code>boost::function</code> parameter type of that overload?"}, {"owner": {"reputation": 2531, "user_id": 800328, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/Ac6xo.jpg?s=128&g=1", "display_name": "Vitor", "link": "https://stackoverflow.com/users/800328/vitor"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1525288760, "post_id": 50140836, "comment_id": 87302210, "body": "I&#39;ve never used bind before, but from what I got from <a href=\"https://www.boost.org/doc/libs/1_64_0/libs/bind/doc/html/bind.html#bind.purpose\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_64_0/libs/bind/doc/html/&hellip;</a>, there are no requirements for the parameter types. Am I reading it wrong? &quot;It supports arbitrary function objects, functions, function pointers, and member function pointers, and is able to bind any argument to a specific value or route input arguments into arbitrary positions. bind does not place any requirements on the function object; in particular, it does not need the result_type, first_argument_type and second_argument_type standard typedefs. &quot;"}], "answers": [{"tags": [], "owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "is_accepted": false, "score": 0, "last_activity_date": 1525289613, "creation_date": 1525289613, "answer_id": 50142234, "question_id": 50140836, "link": "https://stackoverflow.com/questions/50140836/how-to-append-parameter-using-boostbind/50142234#50142234", "title": "How to append parameter using boost::bind?", "body": "<p>I think passing <code>topicName</code> as <code>std::string</code> and may be <code>i</code> (second parameter of <code>subscribe</code>) as <code>unsigned</code> can help.</p>\n"}, {"comments": [{"owner": {"reputation": 2531, "user_id": 800328, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/Ac6xo.jpg?s=128&g=1", "display_name": "Vitor", "link": "https://stackoverflow.com/users/800328/vitor"}, "edited": false, "score": 0, "creation_date": 1525351873, "post_id": 50143792, "comment_id": 87328645, "body": "That got it working. I had to specify the template argument for the subscribe call, as you suggested."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 1, "last_activity_date": 1525296480, "creation_date": 1525296480, "answer_id": 50143792, "question_id": 50140836, "link": "https://stackoverflow.com/questions/50140836/how-to-append-parameter-using-boostbind/50143792#50143792", "title": "How to append parameter using boost::bind?", "body": "<p>From the doc, it seems you want to use following overload:</p>\n\n<pre><code>Subscriber ros::NodeHandle::subscribe(\n    const std::string &amp; topic,\n    uint32_t queue_size,\n    const boost::function&lt;void(C)&gt; &amp;    callback,\n    const VoidConstPtr &amp;    tracked_object = VoidConstPtr(),\n    const TransportHints &amp;  transport_hints = TransportHints() \n)\n</code></pre>\n\n<p>But you don't have correct matching, try to create your <code>boost::function</code> as variable:</p>\n\n<pre><code>boost::function&lt;void (const std_msgs::Bool&amp;)&gt; f =\n    boost::bind(setDigitalOutputCallback, _1, i);\n\ndigitalOutputSub = nh.subscribe(topicName.c_str(), 1, f);\n</code></pre>\n\n<p>Not sure if you don't have to specify template argument:</p>\n\n<pre><code>digitalOutputSub = nh.subscribe&lt;std_msgs::Bool&gt;(topicName.c_str(), 1, f);\n</code></pre>\n"}], "owner": {"reputation": 2531, "user_id": 800328, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/Ac6xo.jpg?s=128&g=1", "display_name": "Vitor", "link": "https://stackoverflow.com/users/800328/vitor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1009, "favorite_count": 0, "accepted_answer_id": 50143792, "answer_count": 2, "score": 0, "last_activity_date": 1525296480, "creation_date": 1525283903, "last_edit_date": 1525289178, "question_id": 50140836, "link": "https://stackoverflow.com/questions/50140836/how-to-append-parameter-using-boostbind", "title": "How to append parameter using boost::bind?", "body": "<p>I'm trying to append another parameter to a ROS subscriber callback function using boost::bind, but I can't figure what is wrong with my code:</p>\n\n<p>This is the callback function signature:</p>\n\n<pre><code>void setDigitalOutputCallback(const std_msgs::Bool&amp; cmd, int index);\n</code></pre>\n\n<p>in a usual ROS callback, there would be only the first (cmd) parameter).\nThen I'm trying to set the callback using:</p>\n\n<pre><code>digitalOutputSub[i] = nh.subscribe(topicName, 1, boost::bind(setDigitalOutputCallback, _1, i));\n</code></pre>\n\n<p>Sample code:</p>\n\n<pre><code>#include \"std_msgs/Bool.h\"\n#include \"ros/ros.h\"\n\nvoid setDigitalOutputCallback(const std_msgs::Bool&amp; cmd, int index) {\n\n}\n\nint main(int argc, char *argv[])\n{\n    ros::init(argc, argv, \"blaster_driver\");\n    ros::NodeHandle nh;\n    ros::Subscriber digitalOutputSub;\n    std::string topicName = \"test\";\n    int i = 1;\n    digitalOutputSub = nh.subscribe(topicName.c_str(), 1, boost::bind(setDigitalOutputCallback, _1, i));\n\n    return 0;\n}\n</code></pre>\n\n<p>The compiler is giving a lot of errors on that line, but I can't understand what is wrong there:</p>\n\n<pre><code>test.cpp: In function \u2018int main(int, char**)\u2019: test.cpp:15:100: error: no matching function for call to \u2018ros::NodeHandle::subscribe(const char*, int, boost::_bi::bind_t&lt;void, void (*)(const std_msgs::Bool_&lt;std::allocator&lt;void&gt; &gt;&amp;, int), boost::_bi::list2&lt;boost::arg&lt;1&gt;, boost::_bi::value&lt;int&gt; &gt; &gt;)\u2019   digitalOutputSub = nh.subscribe(topicName.c_str(), 1, boost::bind(setDigitalOutputCallback, _1, i));\n                                                                                                    ^ In file included from /opt/ros/indigo/include/ros/ros.h:45:0,\n                 from test.cpp:2: /opt/ros/indigo/include/ros/node_handle.h:401:14: note: candidate: template&lt;class M, class T&gt; ros::Subscriber ros::NodeHandle::subscribe(const string&amp;, uint32_t, void (T::*)(M), T*, const ros::TransportHints&amp;)    Subscriber subscribe(const std::string&amp; topic, uint32_t queue_size, void(T::*fp)(M), T* obj,\n              ^~~~~~~~~ /opt/ros/indigo/include/ros/node_handle.h:401:14: note:   template argument deduction/substitution failed: test.cpp:15:100: note:   mismatched types \u2018void (T::*)(M)\u2019 and \u2018boost::_bi::bind_t&lt;void, void (*)(const std_msgs::Bool_&lt;std::allocator&lt;void&gt; &gt;&amp;, int), boost::_bi::list2&lt;boost::arg&lt;1&gt;, boost::_bi::value&lt;int&gt; &gt; &gt;\u2019   digitalOutputSub = nh.subscribe(topicName.c_str(), 1, boost::bind(setDigitalOutputCallback, _1, i));\n                                                                                                    ^ In file included from /opt/ros/indigo/include/ros/ros.h:45:0,\n                 from test.cpp:2: /opt/ros/indigo/include/ros/node_handle.h:412:14: note: candidate: template&lt;class M, class T&gt; ros::Subscriber ros::NodeHandle::subscribe(const string&amp;, uint32_t, void (T::*)(M) const, T*, const ros::TransportHints&amp;)    Subscriber subscribe(const std::string&amp; topic, uint32_t queue_size, void(T::*fp)(M) const, T* obj,\n              ^~~~~~~~~ /opt/ros/indigo/include/ros/node_handle.h:412:14: note:   template argument deduction/substitution failed: test.cpp:15:100: note:   mismatched types \u2018void (T::*)(M) const\u2019 and \u2018boost::_bi::bind_t&lt;void, void (*)(const std_msgs::Bool_&lt;std::allocator&lt;void&gt; &gt;&amp;, int), boost::_bi::list2&lt;boost::arg&lt;1&gt;, boost::_bi::value&lt;int&gt; &gt; &gt;\u2019   digitalOutputSub = nh.subscribe(topicName.c_str(), 1, boost::bind(setDigitalOutputCallback, _1, i));\n                                                                                                    ^ In file included from /opt/ros/indigo/include/ros/ros.h:45:0,\n                 from test.cpp:2: /opt/ros/indigo/include/ros/node_handle.h:464:14: note: candidate: template&lt;class M, class T&gt; ros::Subscriber ros::NodeHandle::subscribe(const string&amp;, uint32_t, void (T::*)(const boost::shared_ptr&lt;const M&gt;&amp;), T*, const ros::TransportHints&amp;)    Subscriber subscribe(const std::string&amp; topic, uint32_t queue_size,\n              ^~~~~~~~~ /opt/ros/indigo/include/ros/node_handle.h:464:14: note:   template argument deduction/substitution failed: test.cpp:15:100: note:   mismatched types \u2018void (T::*)(const boost::shared_ptr&lt;const M&gt;&amp;)\u2019 and \u2018boost::_bi::bind_t&lt;void, void (*)(const std_msgs::Bool_&lt;std::allocator&lt;void&gt; &gt;&amp;, int), boost::_bi::list2&lt;boost::arg&lt;1&gt;, boost::_bi::value&lt;int&gt; &gt; &gt;\u2019   digitalOutputSub = nh.subscribe(topicName.c_str(), 1, boost::bind(setDigitalOutputCallback, _1, i));\n                                                                                                    ^ In file included from /opt/ros/indigo/include/ros/ros.h:45:0,\n                 from test.cpp:2: /opt/ros/indigo/include/ros/node_handle.h:474:14: note: candidate: template&lt;class M, class T&gt; ros::Subscriber ros::NodeHandle::subscribe(const string&amp;, uint32_t, void (T::*)(const boost::shared_ptr&lt;const M&gt;&amp;) const, T*, const ros::TransportHints&amp;)    Subscriber subscribe(const std::string&amp; topic, uint32_t queue_size,\n              ^~~~~~~~~ /opt/ros/indigo/include/ros/node_handle.h:474:14: note:   template argument deduction/substitution failed: test.cpp:15:100: note:   mismatched types \u2018void (T::*)(const boost::shared_ptr&lt;const M&gt;&amp;) const\u2019 and \u2018boost::_bi::bind_t&lt;void, void (*)(const std_msgs::Bool_&lt;std::allocator&lt;void&gt; &gt;&amp;, int), boost::_bi::list2&lt;boost::arg&lt;1&gt;, boost::_bi::value&lt;int&gt; &gt; &gt;\u2019   digitalOutputSub = nh.subscribe(topicName.c_str(), 1, boost::bind(setDigitalOutputCallback, _1, i));\n                                                                                                    ^ In file included from /opt/ros/indigo/include/ros/ros.h:45:0,\n                 from test.cpp:2: /opt/ros/indigo/include/ros/node_handle.h:528:14: note: candidate: template&lt;class M, class T&gt; ros::Subscriber ros::NodeHandle::subscribe(const string&amp;, uint32_t, void (T::*)(M), const boost::shared_ptr&lt;U&gt;&amp;, const ros::TransportHints&amp;)    Subscriber subscribe(const std::string&amp; topic, uint32_t queue_size, void(T::*fp)(M),\n              ^~~~~~~~~ /opt/ros/indigo/include/ros/node_handle.h:528:14: note:   template argument deduction/substitution failed: test.cpp:15:100: note:   mismatched types \u2018void (T::*)(M)\u2019 and \u2018boost::_bi::bind_t&lt;void, void (*)(const std_msgs::Bool_&lt;std::allocator&lt;void&gt; &gt;&amp;, int), boost::_bi::list2&lt;boost::arg&lt;1&gt;, boost::_bi::value&lt;int&gt; &gt; &gt;\u2019   digitalOutputSub = nh.subscribe(topicName.c_str(), 1, boost::bind(setDigitalOutputCallback, _1, i));\n                                                                                                    ^ In file included from /opt/ros/indigo/include/ros/ros.h:45:0,\n                 from test.cpp:2: /opt/ros/indigo/include/ros/node_handle.h:539:14: note: candidate: template&lt;class M, class T&gt; ros::Subscriber ros::NodeHandle::subscribe(const string&amp;, uint32_t, void (T::*)(M) const, const boost::shared_ptr&lt;U&gt;&amp;, const ros::TransportHints&amp;)    Subscriber subscribe(const std::string&amp; topic, uint32_t queue_size, void(T::*fp)(M) const,\n              ^~~~~~~~~ /opt/ros/indigo/include/ros/node_handle.h:539:14: note:   template argument deduction/substitution failed: test.cpp:15:100: note:   mismatched types \u2018void (T::*)(M) const\u2019 and \u2018boost::_bi::bind_t&lt;void, void (*)(const std_msgs::Bool_&lt;std::allocator&lt;void&gt; &gt;&amp;, int), boost::_bi::list2&lt;boost::arg&lt;1&gt;, boost::_bi::value&lt;int&gt; &gt; &gt;\u2019   digitalOutputSub = nh.subscribe(topicName.c_str(), 1, boost::bind(setDigitalOutputCallback, _1, i));\n                                                                                                    ^ In file included from /opt/ros/indigo/include/ros/ros.h:45:0,\n                 from test.cpp:2: /opt/ros/indigo/include/ros/node_handle.h:593:14: note: candidate: template&lt;class M, class T&gt; ros::Subscriber ros::NodeHandle::subscribe(const string&amp;, uint32_t, void (T::*)(const boost::shared_ptr&lt;const M&gt;&amp;), const boost::shared_ptr&lt;U&gt;&amp;, const ros::TransportHints&amp;)    Subscriber subscribe(const std::string&amp; topic, uint32_t queue_size,\n              ^~~~~~~~~ /opt/ros/indigo/include/ros/node_handle.h:593:14: note:   template argument deduction/substitution failed: test.cpp:15:100: note:   mismatched types \u2018void (T::*)(const boost::shared_ptr&lt;const M&gt;&amp;)\u2019 and \u2018boost::_bi::bind_t&lt;void, void (*)(const std_msgs::Bool_&lt;std::allocator&lt;void&gt; &gt;&amp;, int), boost::_bi::list2&lt;boost::arg&lt;1&gt;, boost::_bi::value&lt;int&gt; &gt; &gt;\u2019   digitalOutputSub = nh.subscribe(topicName.c_str(), 1, boost::bind(setDigitalOutputCallback, _1, i));\n                                                                                                    ^ In file included from /opt/ros/indigo/include/ros/ros.h:45:0,\n                 from test.cpp:2: /opt/ros/indigo/include/ros/node_handle.h:604:14: note: candidate: template&lt;class M, class T&gt; ros::Subscriber ros::NodeHandle::subscribe(const string&amp;, uint32_t, void (T::*)(const boost::shared_ptr&lt;const M&gt;&amp;) const, const boost::shared_ptr&lt;U&gt;&amp;, const ros::TransportHints&amp;)    Subscriber subscribe(const std::string&amp; topic, uint32_t queue_size,\n              ^~~~~~~~~ /opt/ros/indigo/include/ros/node_handle.h:604:14: note:   template argument deduction/substitution failed: test.cpp:15:100: note:   mismatched types \u2018void (T::*)(const boost::shared_ptr&lt;const M&gt;&amp;) const\u2019 and \u2018boost::_bi::bind_t&lt;void, void (*)(const std_msgs::Bool_&lt;std::allocator&lt;void&gt; &gt;&amp;, int), boost::_bi::list2&lt;boost::arg&lt;1&gt;, boost::_bi::value&lt;int&gt; &gt; &gt;\u2019   digitalOutputSub = nh.subscribe(topicName.c_str(), 1, boost::bind(setDigitalOutputCallback, _1, i));\n                                                                                                    ^ In file included from /opt/ros/indigo/include/ros/ros.h:45:0,\n                 from test.cpp:2: /opt/ros/indigo/include/ros/node_handle.h:655:14: note: candidate: template&lt;class M&gt; ros::Subscriber ros::NodeHandle::subscribe(const string&amp;, uint32_t, void (*)(M), const ros::TransportHints&amp;)    Subscriber subscribe(const std::string&amp; topic, uint32_t queue_size, void(*fp)(M), const TransportHints&amp; transport_hints = TransportHints())\n              ^~~~~~~~~ /opt/ros/indigo/include/ros/node_handle.h:655:14: note:   template argument deduction/substitution failed: test.cpp:15:100: note:   mismatched types \u2018void (*)(M)\u2019 and \u2018boost::_bi::bind_t&lt;void, void (*)(const std_msgs::Bool_&lt;std::allocator&lt;void&gt; &gt;&amp;, int), boost::_bi::list2&lt;boost::arg&lt;1&gt;, boost::_bi::value&lt;int&gt; &gt; &gt;\u2019   digitalOutputSub = nh.subscribe(topicName.c_str(), 1, boost::bind(setDigitalOutputCallback, _1, i));\n                                                                                                    ^ In file included from /opt/ros/indigo/include/ros/ros.h:45:0,\n                 from test.cpp:2: /opt/ros/indigo/include/ros/node_handle.h:703:14: note: candidate: template&lt;class M&gt; ros::Subscriber ros::NodeHandle::subscribe(const string&amp;, uint32_t, void (*)(const boost::shared_ptr&lt;const M&gt;&amp;), const ros::TransportHints&amp;)    Subscriber subscribe(const std::string&amp; topic, uint32_t queue_size, void(*fp)(const boost::shared_ptr&lt;M const&gt;&amp;), const TransportHints&amp; transport_hints = TransportHints())\n              ^~~~~~~~~ /opt/ros/indigo/include/ros/node_handle.h:703:14: note:   template argument deduction/substitution failed: test.cpp:15:100: note:   mismatched types \u2018void (*)(const boost::shared_ptr&lt;const M&gt;&amp;)\u2019 and \u2018boost::_bi::bind_t&lt;void, void (*)(const std_msgs::Bool_&lt;std::allocator&lt;void&gt; &gt;&amp;, int), boost::_bi::list2&lt;boost::arg&lt;1&gt;, boost::_bi::value&lt;int&gt; &gt; &gt;\u2019   digitalOutputSub = nh.subscribe(topicName.c_str(), 1, boost::bind(setDigitalOutputCallback, _1, i));\n                                                                                                    ^ In file included from /opt/ros/indigo/include/ros/ros.h:45:0,\n                 from test.cpp:2: /opt/ros/indigo/include/ros/node_handle.h:749:14: note: candidate: template&lt;class M&gt; ros::Subscriber ros::NodeHandle::subscribe(const string&amp;, uint32_t, const boost::function&lt;void(const boost::shared_ptr&lt;const M&gt;&amp;)&gt;&amp;, const VoidConstPtr&amp;, const ros::TransportHints&amp;)    Subscriber subscribe(const std::string&amp; topic, uint32_t queue_size, const boost::function&lt;void (const boost::shared_ptr&lt;M const&gt;&amp;)&gt;&amp; callback,\n              ^~~~~~~~~ /opt/ros/indigo/include/ros/node_handle.h:749:14: note:   template argument deduction/substitution failed: test.cpp:15:100: note:   \u2018boost::_bi::bind_t&lt;void, void (*)(const std_msgs::Bool_&lt;std::allocator&lt;void&gt; &gt;&amp;, int), boost::_bi::list2&lt;boost::arg&lt;1&gt;, boost::_bi::value&lt;int&gt; &gt; &gt;\u2019 is not derived from \u2018const boost::function&lt;void(const boost::shared_ptr&lt;const M&gt;&amp;)&gt;\u2019   digitalOutputSub = nh.subscribe(topicName.c_str(), 1, boost::bind(setDigitalOutputCallback, _1, i));\n                                                                                                    ^ In file included from /opt/ros/indigo/include/ros/ros.h:45:0,\n                 from test.cpp:2: /opt/ros/indigo/include/ros/node_handle.h:798:14: note: candidate: template&lt;class M, class C&gt; ros::Subscriber ros::NodeHandle::subscribe(const string&amp;, uint32_t, const boost::function&lt;void(C)&gt;&amp;, const VoidConstPtr&amp;, const ros::TransportHints&amp;)    Subscriber subscribe(const std::string&amp; topic, uint32_t queue_size, const boost::function&lt;void (C)&gt;&amp; callback,\n              ^~~~~~~~~ /opt/ros/indigo/include/ros/node_handle.h:798:14: note:   template argument deduction/substitution failed: test.cpp:15:100: note:   \u2018boost::_bi::bind_t&lt;void, void (*)(const std_msgs::Bool_&lt;std::allocator&lt;void&gt; &gt;&amp;, int), boost::_bi::list2&lt;boost::arg&lt;1&gt;, boost::_bi::value&lt;int&gt; &gt; &gt;\u2019 is not derived from \u2018const boost::function&lt;void(C)&gt;\u2019   digitalOutputSub = nh.subscribe(topicName.c_str(), 1, boost::bind(setDigitalOutputCallback, _1, i));\n                                                                                                    ^ In file included from /opt/ros/indigo/include/ros/ros.h:45:0,\n                 from test.cpp:2: /opt/ros/indigo/include/ros/node_handle.h:835:14: note: candidate: ros::Subscriber ros::NodeHandle::subscribe(ros::SubscribeOptions&amp;)    Subscriber subscribe(SubscribeOptions&amp; ops);\n              ^~~~~~~~~ /opt/ros/indigo/include/ros/node_handle.h:835:14: note:   candidate expects 1 argument, 3 provided\n</code></pre>\n"}, {"tags": ["c++", "c", "mingw", "mingw-w64"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1525283859, "post_id": 50140750, "comment_id": 87299858, "body": "What do you mean by &quot;variational arguments&quot;? There&#39;s no &quot;varargs&quot; here which is what I initially presumed you meant."}], "answers": [{"tags": [], "owner": {"reputation": 128, "user_id": 9560588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5183d03e3d4312d5660574befc9f026e?s=128&d=identicon&r=PG&f=1", "display_name": "VolkerG", "link": "https://stackoverflow.com/users/9560588/volkerg"}, "is_accepted": false, "score": 2, "last_activity_date": 1525283998, "creation_date": 1525283998, "answer_id": 50140861, "question_id": 50140750, "link": "https://stackoverflow.com/questions/50140750/possible-bug-with-variadic-arguments-on-mingw64-gcc/50140861#50140861", "title": "Possible bug with variadic arguments on mingw64-gcc", "body": "<p>The 0 in your <code>printf</code> has the wrong type, it is <code>int</code> not <code>long long</code>. Try to use <code>0ll</code> for the literal instead.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 9731544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfcbe1ae75208026029993fff3525a61?s=128&d=identicon&r=PG&f=1", "display_name": "CrazyT", "link": "https://stackoverflow.com/users/9731544/crazyt"}, "edited": false, "score": 0, "creation_date": 1525285275, "post_id": 50140862, "comment_id": 87300526, "body": "Well it wasn&#39;t reproduceable on a linux compiler so i thought it might be a compiler bug."}, {"owner": {"reputation": 13, "user_id": 9731544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfcbe1ae75208026029993fff3525a61?s=128&d=identicon&r=PG&f=1", "display_name": "CrazyT", "link": "https://stackoverflow.com/users/9731544/crazyt"}, "edited": false, "score": 1, "creation_date": 1525285737, "post_id": 50140862, "comment_id": 87300733, "body": "Oh well ... lesson learned, &#39;-Wall&#39; would have worked on my example code."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 13, "user_id": 9731544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfcbe1ae75208026029993fff3525a61?s=128&d=identicon&r=PG&f=1", "display_name": "CrazyT", "link": "https://stackoverflow.com/users/9731544/crazyt"}, "edited": false, "score": 0, "creation_date": 1525291899, "post_id": 50140862, "comment_id": 87303757, "body": "Yep! When in doubt, turn on <i>everything</i> to see if you&#39;ve missed something less than obvious. Happens to the best of us."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 2, "last_activity_date": 1525284003, "creation_date": 1525284003, "answer_id": 50140862, "question_id": 50140750, "link": "https://stackoverflow.com/questions/50140750/possible-bug-with-variadic-arguments-on-mingw64-gcc/50140862#50140862", "title": "Possible bug with variadic arguments on mingw64-gcc", "body": "<p>When I compile in <code>clang</code> I get this warning:</p>\n\n<blockquote>\n  <p>varby.cpp:12:63: warning: format specifies type 'unsigned long long' but the argument has type 'int' [-Wformat]</p>\n</blockquote>\n\n<p>This is probably the source of your issue as <code>0</code> is the wrong argument type.</p>\n\n<p>Fix it by making that a long-long as you want:</p>\n\n<pre><code>printf(\"but output is:\\n%llx %llx %llx %llx %llx\\n\",d,c,b,0LL,a);\n</code></pre>\n\n<p>A good rule of thumb is that one in a million bugs will be caused by the compiler, so always presume it's your fault until can prove otherwise. In this case turning on more warnings or trying to reproduce it in another compiler would've uncovered the problem.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 9731544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfcbe1ae75208026029993fff3525a61?s=128&d=identicon&r=PG&f=1", "display_name": "CrazyT", "link": "https://stackoverflow.com/users/9731544/crazyt"}, "edited": false, "score": 0, "creation_date": 1525284542, "post_id": 50140875, "comment_id": 87300185, "body": "Wow ... didn&#39;t expect that. Is there a reason they decided to make numbers just &#39;int&#39; instead of &#39;unsigned long long&#39; by default? I mean there could probably be alot of missing bugs that can&#39;t be fixed because you don&#39;t see them by compiler-warnings."}, {"owner": {"reputation": 13, "user_id": 9731544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfcbe1ae75208026029993fff3525a61?s=128&d=identicon&r=PG&f=1", "display_name": "CrazyT", "link": "https://stackoverflow.com/users/9731544/crazyt"}, "edited": false, "score": 0, "creation_date": 1525284945, "post_id": 50140875, "comment_id": 87300361, "body": "Well the origin of my problem was actually the boost python library: <a href=\"https://github.com/boostorg/python/blob/develop/src/object/class.cpp#L621\" rel=\"nofollow noreferrer\">github.com/boostorg/python/blob/develop/src/object/&hellip;</a> Are i&#39;m right that in order to use that lib properly for 64-bit that i need to cast the 0&#39;s on that place?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 13, "user_id": 9731544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfcbe1ae75208026029993fff3525a61?s=128&d=identicon&r=PG&f=1", "display_name": "CrazyT", "link": "https://stackoverflow.com/users/9731544/crazyt"}, "edited": false, "score": 0, "creation_date": 1525285193, "post_id": 50140875, "comment_id": 87300482, "body": "@CrazyT In this case, the format string is looking for a pointer to a null terminated string, so it should be passing in <code>(char *)NULL</code>  instead."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1525284088, "creation_date": 1525284088, "answer_id": 50140875, "question_id": 50140750, "link": "https://stackoverflow.com/questions/50140750/possible-bug-with-variadic-arguments-on-mingw64-gcc/50140875#50140875", "title": "Possible bug with variadic arguments on mingw64-gcc", "body": "<p>You have an argument type mismatch:</p>\n\n<pre><code> printf(\"but output is:\\n%llx %llx %llx %llx %llx\\n\",d,c,b,0,a);\n</code></pre>\n\n<p>The value 0 has type <code>int</code>, but the <code>%llx</code> format specifier is expecting a variable of type <code>unsigned long long int</code>.  Using the wrong format specifier invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p>Because <code>printf</code> is a variadic function, it can't automatically convert this value to the proper type.  So you need to either use the correct format specifier:</p>\n\n<pre><code> printf(\"but output is:\\n%llx %llx %llx %d %llx\\n\",d,c,b,0,a);\n</code></pre>\n\n<p>Or cast the argument in question</p>\n\n<pre><code> printf(\"but output is:\\n%llx %llx %llx %llu %llx\\n\",d,c,b,(unsigned long long)0,a);\n</code></pre>\n\n<p>Or (in the case of a constant) use the proper type suffix</p>\n\n<pre><code> printf(\"but output is:\\n%llx %llx %llx %llu %llx\\n\",d,c,b,0ULL,a);\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9731544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfcbe1ae75208026029993fff3525a61?s=128&d=identicon&r=PG&f=1", "display_name": "CrazyT", "link": "https://stackoverflow.com/users/9731544/crazyt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 50140875, "answer_count": 3, "score": -3, "last_activity_date": 1525284321, "creation_date": 1525283577, "last_edit_date": 1525284321, "question_id": 50140750, "link": "https://stackoverflow.com/questions/50140750/possible-bug-with-variadic-arguments-on-mingw64-gcc", "title": "Possible bug with variadic arguments on mingw64-gcc", "body": "<p>I had an annoying bug which I tried to track down, then I created an example and I'm still not 100% sure if it is a compiler problem.</p>\n\n<p>Let me give you some information about the version I used first.</p>\n\n<p><code>x86_64-w64-mingw32-g++  --version</code></p>\n\n<pre><code>x86_64-w64-mingw32-g++.exe (Rev1, Built by MSYS2 project) 7.2.0\nCopyright (C) 2017 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n</code></pre>\n\n<p>I know it is not the newest version, but it is the newest you could get for MSYS.</p>\n\n<p>This is the example code:</p>\n\n<pre><code>#include &lt;cstdint&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;cstdarg&gt;\n\nvoid test1(){\n    uint64_t a = 0x3333333333333333;\n    uint64_t b = 1;\n    uint64_t c = 2;\n    uint64_t d = 3;\n    printf(\"output should be:\\n3 2 1 0 3333333333333333\\n\");\n    printf(\"but output is:\\n%llx %llx %llx %llx %llx\\n\",d,c,b,0,a);\n}\nvoid test(uint64_t x1,uint64_t x2,uint64_t x3,uint64_t x4,uint64_t x5,uint64_t x6,\nuint64_t x21,uint64_t x22,uint64_t x23,uint64_t x24,uint64_t x25,uint64_t x26,\nuint64_t x31,uint64_t x32,uint64_t x33,uint64_t x34,uint64_t x35,uint64_t x36,\nuint64_t x41,uint64_t x42,uint64_t x43,uint64_t x44,uint64_t x45,uint64_t x46){\n    printf(\"start\\n\");\n}\nvoid test_(){\n        test(0x7777777777777771,0x7777777777777772,0x7777777777777773,0x7777777777777774,0x7777777777777775,0x7777777777777776,\n        0x7777777777777771,0x7777777777777772,0x7777777777777773,0x7777777777777774,0x7777777777777775,0x7777777777777776,\n        0x7777777777777771,0x7777777777777772,0x7777777777777773,0x7777777777777774,0x7777777777777775,0x7777777777777776,\n        0x7777777777777771,0x7777777777777772,0x7777777777777773,0x7777777777777774,0x7777777777777775,0x7777777777777776);\n}\nint main(int argc,char** argv){\n    test_();\n    test1();\n}\n</code></pre>\n\n<p>and compiled &amp; executed it with:</p>\n\n<p><code>x86_64-w64-mingw32-g++ -O0 test.cpp &amp;&amp; ./a.exe</code></p>\n\n<p>Now comes the surprising part, the output is:</p>\n\n<p><code>start\noutput should be:\n3 2 1 0 3333333333333333\nbut output is:\n3 2 1 7777777700000000 3333333333333333</code></p>\n\n<p>In the example above i use printf to produce and visualize the problem.</p>\n\n<p>It could happen on any other function instead of printf that uses variational arguments.</p>\n\n<p>For example: <code>void blah(a,b,...)</code></p>\n\n<p>For some reason the compiler does this unexpected thing.\nSearching by google didn't lead me to the right direction sadly.</p>\n\n<p>It leads me to the question if this is really a problem with the compiler (linux didn't have such a problem), or if it is a programming mistake (like forgetting to cast the 0 number).</p>\n\n<p>Taking a look at the disassembled code shows me the part that produces the problem:</p>\n\n<pre><code>objdump -M intel -S ./a.exe|egrep -A 30 'test1.+:'\n0000000000401570 &lt;_Z5test1v&gt;:\n  401570:       55                      push   rbp\n  401571:       48 89 e5                mov    rbp,rsp\n  401574:       48 83 ec 50             sub    rsp,0x50\n  401578:       48 b8 33 33 33 33 33    movabs rax,0x3333333333333333\n  40157f:       33 33 33\n  401582:       48 89 45 f8             mov    QWORD PTR [rbp-0x8],rax\n  401586:       48 c7 45 f0 01 00 00    mov    QWORD PTR [rbp-0x10],0x1\n  40158d:       00\n  40158e:       48 c7 45 e8 02 00 00    mov    QWORD PTR [rbp-0x18],0x2\n  401595:       00\n  401596:       48 c7 45 e0 03 00 00    mov    QWORD PTR [rbp-0x20],0x3\n  40159d:       00\n  40159e:       48 8d 0d 5b 7a 00 00    lea    rcx,[rip+0x7a5b]        # 409000 &lt;.rdata&gt;\n  4015a5:       e8 a6 66 00 00          call   407c50 &lt;_Z6printfPKcz&gt;\n  4015aa:       4c 8b 45 f0             mov    r8,QWORD PTR [rbp-0x10]\n  4015ae:       48 8b 4d e8             mov    rcx,QWORD PTR [rbp-0x18]\n  4015b2:       48 8b 45 e0             mov    rax,QWORD PTR [rbp-0x20]\n  4015b6:       48 8b 55 f8             mov    rdx,QWORD PTR [rbp-0x8]\n  4015ba:       48 89 54 24 28          mov    QWORD PTR [rsp+0x28],rdx\n  4015bf:       c7 44 24 20 00 00 00    mov    DWORD PTR [rsp+0x20],0x0\n  4015c6:       00\n  4015c7:       4d 89 c1                mov    r9,r8\n  4015ca:       49 89 c8                mov    r8,rcx\n  4015cd:       48 89 c2                mov    rdx,rax\n  4015d0:       48 8d 0d 59 7a 00 00    lea    rcx,[rip+0x7a59]        # 409030 &lt;.rdata+0x30&gt;\n  4015d7:       e8 74 66 00 00          call   407c50 &lt;_Z6printfPKcz&gt;\n  4015dc:       90                      nop\n  4015dd:       48 83 c4 50             add    rsp,0x50\n  4015e1:       5d                      pop    rbp\n  4015e2:       c3                      ret\n</code></pre>\n\n<p>and I have absolutely no clue why it uses that dword on offset 4015bf.\nMaybe somebody can shed some light on my problem or is able to test it with a newer mingw-version.</p>\n\n<p>(I already tried with a \"bionic beaver\" docker image of ubuntu, but sadly with the same result ... well it has the same version of x86_64-w64-mingw32-g++ anyway)</p>\n"}, {"tags": ["c++", "openmp"], "comments": [{"owner": {"reputation": 109, "user_id": 1451348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41d007a8ea42e44359a578b190944ab9?s=128&d=identicon&r=PG", "display_name": "user1451348", "link": "https://stackoverflow.com/users/1451348/user1451348"}, "edited": false, "score": 0, "creation_date": 1525282935, "post_id": 50140533, "comment_id": 87299364, "body": "I&#39;m no openMP programmer.. but it looks like you&#39;re passing the same properties reference to all threads. That may be a problem"}, {"owner": {"reputation": 530, "user_id": 2394541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f9b9b9399b329591f7be92da1c5e442?s=128&d=identicon&r=PG", "display_name": "tim18", "link": "https://stackoverflow.com/users/2394541/tim18"}, "edited": false, "score": 2, "creation_date": 1525283460, "post_id": 50140533, "comment_id": 87299651, "body": "No, if you depend on private clause, it must be on the pragma parallel, not on the pragma for.  It would look like better design if you would define current_obj and props inside the parallel so that private becomes unnecessary.  Likewise, for(int i=0;.. to make i local to loop is more idiomatic for C++, and, for the last 25 years, in C."}, {"owner": {"reputation": 5213, "user_id": 1380285, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f9a9583aed6db34815797c68823225b9?s=128&d=identicon&r=PG", "display_name": "bob.sacamento", "link": "https://stackoverflow.com/users/1380285/bob-sacamento"}, "reply_to_user": {"reputation": 530, "user_id": 2394541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f9b9b9399b329591f7be92da1c5e442?s=128&d=identicon&r=PG", "display_name": "tim18", "link": "https://stackoverflow.com/users/2394541/tim18"}, "edited": false, "score": 0, "creation_date": 1525285858, "post_id": 50140533, "comment_id": 87300796, "body": "@tim18  As I said, I&#39;m learning OpenMP.  I&#39;ve seen several examples where the private clause is on the pragma for.  What is special about my case?  Also, I guess I&#39;m confused about what is default private and shared.  So, I guess whatever is defined outside of pragma parallel is shared by default and whatever is defined inside it is private by default?  Thanks."}, {"owner": {"reputation": 530, "user_id": 2394541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f9b9b9399b329591f7be92da1c5e442?s=128&d=identicon&r=PG", "display_name": "tim18", "link": "https://stackoverflow.com/users/2394541/tim18"}, "edited": false, "score": 0, "creation_date": 1525303666, "post_id": 50140533, "comment_id": 87307928, "body": "omp parallel for private() is OK but not omp for private....  private is an optional clause for parallel only.  But as I said you would be better off fixing your scopes so you don&#39;t need private.  Yes, what is in scope outside the parallel loops is shared by default.  default(none) is often recommended to catch mistakes.  What is in scope only inside the parallel is effectively private.  This makes more visible the fact that firstprivate and lastprivate are a bit more difficult."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1525333348, "post_id": 50140533, "comment_id": 87316809, "body": "Sorry but the question is very fuzzy. <i>isn&#39;t working as expected</i> is not a sufficient problem description and your example code is very incomplete. Please distill a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and describe your specific problem and the expected behavior."}, {"owner": {"reputation": 5213, "user_id": 1380285, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f9a9583aed6db34815797c68823225b9?s=128&d=identicon&r=PG", "display_name": "bob.sacamento", "link": "https://stackoverflow.com/users/1380285/bob-sacamento"}, "reply_to_user": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1525359891, "post_id": 50140533, "comment_id": 87334318, "body": "@Zulan  The code is just too big to replicate the problem here.  I simply can&#39;t do it.  And I am simply asking whether I am doing the OpenMP correctly, given that I am dealing with objects in C++.  I am not asking anyone to solve my problem.  I am merely asking if there is anything obvious breaking of OpenMP rules in what I have done.  have I left out anything that OpenMP requires, for instance?  That seems a pretty clear question to me.  In fact, I received two answers in the comments to it."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1525360414, "post_id": 50140533, "comment_id": 87334677, "body": "It is impossible to give a comprehensive answer to the question as is. I did not ask you to replicate a full problem but a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. You can simplify / mock stuff, but you cannot just omit critical portions with a comment like <i>allocate and instantiate elements</i>."}], "owner": {"reputation": 5213, "user_id": 1380285, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f9a9583aed6db34815797c68823225b9?s=128&d=identicon&r=PG", "display_name": "bob.sacamento", "link": "https://stackoverflow.com/users/1380285/bob-sacamento"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 313, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1525283461, "creation_date": 1525282722, "question_id": 50140533, "link": "https://stackoverflow.com/questions/50140533/openmp-and-c-am-i-correctly-making-objects-in-a-loop-private", "title": "OpenMP and C++: Am I correctly making objects in a loop private?", "body": "<p>I am trying to add OpenMP to an existing C++ code.  I am new to OpenMP and a bit rusty with C++.  I have a loop that isn't working as expected, even with just a single OpenMP thread, and I am wondering if I am leaving something out.</p>\n\n<p>I have a class that just stores a bunch of data:</p>\n\n<pre><code>class Properties {\n   double thing1;\n   double thing2[10];\n   double thing3;\n}\n</code></pre>\n\n<p>Then there's the class of central interest.  Several of its properties can be stored in the above <code>Properties</code> class:</p>\n\n<pre><code>  class MainThing {\n       // usual constructors etc.\n       double thing1;\n       double thing2[10];\n       double thing3;\n       void ShowProps(Properties *pProp);\n       // other functionality\n    }\n    void MainThing::ShowProps(Properties pProp) {\n       // just copies the various properties of object into pProp\n    }\n</code></pre>\n\n<p>Then there's the main code.  I define an array of MainThing objects, loop through the array, call ShowProps for each object in the array, and process the properties thus obtained.</p>\n\n<pre><code>   int main() {\n\n       int i, num_objs;\n       Properties props;\n       MainThing *current_obj;\n       MainThing *main_objs;\n       // allocate and instantiate elements of main_objs\n\n    #pragma omp parallel shared(main_objs, num_objs)\n    {\n    #pragma omp for private(i, current_obj, props)\n       for (i=0; i&lt;num_objs; i++) {\n          current_obj = main_objs+i;\n          current_obj-&gt;ShowProps(&amp;props);\n          // do lots of stuff with \"props\"\n          // this loop is \"embarrassingly parallel\"\n          // no dependence from one iteration to another\n       }\n    }  // end pragma omp parallel\n\n    }\n</code></pre>\n\n<p>Things aren't panning out as expected, as I said.  So I just want to know, have I done all it takes to make the various objects etc. in the loop properly private?</p>\n\n<p>BTW, there are probably many improvements to be made to this toy code.  And I will be happy to hear them all.  But keep in mind that I am working with someone else's code, and though I have left out many details I have paralleled its structure as closely as I could.  Only the OpenMP, such as it is, is my own work.</p>\n"}, {"tags": ["c++", "qt", "qml"], "comments": [{"owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "edited": false, "score": 0, "creation_date": 1525286322, "post_id": 50140452, "comment_id": 87301019, "body": "<a href=\"https://stackoverflow.com/questions/17640887/qt-ui-with-c-vs-with-xml-vs-with-qml/17640989#17640989\" title=\"qt ui with c vs with xml vs with qml\">stackoverflow.com/questions/17640887/&hellip;</a>"}, {"owner": {"reputation": 1758, "user_id": 8724882, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d88f8198fb4ae68267aced911e3533f9?s=128&d=identicon&r=PG&f=1", "display_name": "sandwood", "link": "https://stackoverflow.com/users/8724882/sandwood"}, "edited": false, "score": 0, "creation_date": 1525418219, "post_id": 50140452, "comment_id": 87355982, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/17640887/qt-ui-with-c-vs-with-xml-vs-with-qml\">Qt: UI with c++ vs with xml vs with qml</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2676, "user_id": 1187314, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/97027148837859a610ce73c418a97692?s=128&d=identicon&r=PG", "display_name": "TheSHEEEP", "link": "https://stackoverflow.com/users/1187314/thesheeep"}, "edited": false, "score": 0, "creation_date": 1525329663, "post_id": 50142410, "comment_id": 87314997, "body": "Good summary of the two techs! One thing I always wondered about is performance. Is an interface created with QML slower or faster or equal in speed to the same thing created with QtWidgets (+qss, maybe)?"}, {"owner": {"reputation": 4697, "user_id": 1005419, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5TtZm.jpg?s=128&g=1", "display_name": "Thomas McGuire", "link": "https://stackoverflow.com/users/1005419/thomas-mcguire"}, "reply_to_user": {"reputation": 2676, "user_id": 1187314, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/97027148837859a610ce73c418a97692?s=128&d=identicon&r=PG", "display_name": "TheSHEEEP", "link": "https://stackoverflow.com/users/1187314/thesheeep"}, "edited": false, "score": 8, "creation_date": 1525364954, "post_id": 50142410, "comment_id": 87337439, "body": "@TheSHEEEP The rendering speed in QtQuick is, at least for simple cases, faster than with QtWidgets, as the rendering with QtQuick is done on the GPU with OpenGL, while the rendering with QtWidgets is done on the CPU. However, in QtQuick/QML, loading a QML page usually takes longer than the equivalent QtWidgets C++ code, and can become a bottleneck if not careful."}, {"owner": {"reputation": 2378, "user_id": 1058591, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/HRYp4.png?s=128&g=1", "display_name": "PersianGulf", "link": "https://stackoverflow.com/users/1058591/persiangulf"}, "edited": false, "score": 0, "creation_date": 1571722145, "post_id": 50142410, "comment_id": 103324244, "body": "Qt5 is deprecated? @ThomasMcGuire"}, {"owner": {"reputation": 4697, "user_id": 1005419, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5TtZm.jpg?s=128&g=1", "display_name": "Thomas McGuire", "link": "https://stackoverflow.com/users/1005419/thomas-mcguire"}, "reply_to_user": {"reputation": 2378, "user_id": 1058591, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/HRYp4.png?s=128&g=1", "display_name": "PersianGulf", "link": "https://stackoverflow.com/users/1058591/persiangulf"}, "edited": false, "score": 0, "creation_date": 1572434736, "post_id": 50142410, "comment_id": 103556326, "body": "@PersianGulf Qt5 is not deprecated, as Qt6 hasn&#39;t been released yet."}], "tags": [], "owner": {"reputation": 4697, "user_id": 1005419, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5TtZm.jpg?s=128&g=1", "display_name": "Thomas McGuire", "link": "https://stackoverflow.com/users/1005419/thomas-mcguire"}, "is_accepted": true, "score": 26, "last_activity_date": 1525290301, "creation_date": 1525290301, "answer_id": 50142410, "question_id": 50140452, "link": "https://stackoverflow.com/questions/50140452/qt-vs-qml-language-relevance/50142410#50142410", "title": "Qt vs QML language relevance", "body": "<h2>UI Technology</h2>\n\n<p>It's actually not so much a question of QML vs C++, rather it is a question of what UI technology to use with Qt:</p>\n\n<ul>\n<li>QtWidgets (code written with C++)</li>\n<li>QtQuick (code written with QML/JS)</li>\n<li>HTML5 (via WebEngine, embedded into a widget or QtQuick item)</li>\n<li>OpenGL (embedded into a widget or QtQuick item)</li>\n</ul>\n\n<p>Leaving aside HTML5  and OpenGL, the question QtWidgets vs QtQuick has been discussed in other placed, for example at <a href=\"https://stackoverflow.com/questions/8626355/qt-quick-vs-qt-widget\">Qt Quick vs. Qt Widget</a> and at this <a href=\"https://www.youtube.com/watch?v=-S9ki14ZtIk\" rel=\"noreferrer\">Qt DevDays 2014 presentation</a>.</p>\n\n<p>My personal opinion: Use QtWidgets for traditional desktop applications, and QtQuick for mobile and embedded (devices with touchscreen), unless you have good reasons to do otherwise. QtWidgets has better and more mature support for traditional desktop controls, while QtQuick is better for animations and completely custom styling.</p>\n\n<p>One reason to use QtQuick on the desktop is when you want lots of custom animations and styling, at the cost of fighting a bit more with traditional desktop controls such a toolbars, menubars, drag&amp;drop etc.</p>\n\n<h2>Language</h2>\n\n<p>When choosing <strong>QtWidgets,</strong> the language is always C++ (well, unless you use the Python bindings). While you can use the <a href=\"http://doc.qt.io/qt-5/qtdesigner-manual.html\" rel=\"noreferrer\">Qt Designer tool</a> to visually create UIs, in the end those get compiled to C++.</p>\n\n<p>When choosing <strong>QtQuick,</strong> the language for the UI parts will be QML and JavaScript. However, in any moderately large QtQuick application, you will at some point also have a C++ part - for example to interface with other C and C++ libraries, for operations that don't have an associated JavaScript API or simply for quicker and more maintainable code than JS. C++ classes and objects can be accessed from QML, check <a href=\"http://doc.qt.io/qt-5/qtqml-cppintegration-topic.html\" rel=\"noreferrer\">the documentation</a> for more details.</p>\n"}], "owner": {"reputation": 153, "user_id": 9211081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4a73b1ffa643238615c6d17a1907848?s=128&d=identicon&r=PG&f=1", "display_name": "HarvyD", "link": "https://stackoverflow.com/users/9211081/harvyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7532, "favorite_count": 3, "accepted_answer_id": 50142410, "answer_count": 1, "score": 12, "last_activity_date": 1525328297, "creation_date": 1525282429, "last_edit_date": 1525328297, "question_id": 50140452, "link": "https://stackoverflow.com/questions/50140452/qt-vs-qml-language-relevance", "title": "Qt vs QML language relevance", "body": "<p>So, I'm a newbie in Qt and my intent is to familiarize myself with Qt Graphics. However, most of the guides on the internet suggest to use QML instead Qt C++ when it comes to dealing with graphics. </p>\n\n<p>Here is my question: \nWhat is the difference between Qt C++ and QML?\nWhat does QML give us, that Qt C++ does not?</p>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1525282711, "post_id": 50140435, "comment_id": 87299252, "body": "The string literal can&#39;t be changed, but the a <code>char[]</code> initialized from a string literal certainly can be changed."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1525282836, "post_id": 50140435, "comment_id": 87299312, "body": "The elements are not string literals. They would be if it were declared <code>char *pieces[9] = { ... };</code>. But since you declared it <code>char pieces[9][4]</code>, the elements of <code>pieces</code> are arrays, not pointers to literals."}], "answers": [{"tags": [], "owner": {"reputation": 1021, "user_id": 2251083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b66a1c40b14b2624effadfe252c23eb0?s=128&d=identicon&r=PG", "display_name": "Ryan Stout", "link": "https://stackoverflow.com/users/2251083/ryan-stout"}, "is_accepted": false, "score": 1, "last_activity_date": 1525282602, "creation_date": 1525282602, "answer_id": 50140502, "question_id": 50140435, "link": "https://stackoverflow.com/questions/50140435/modifying-strings-in-an-array-of-strings/50140502#50140502", "title": "Modifying strings in an Array of strings", "body": "<p>Does</p>\n\n<pre><code>pieces[2][0] = ' ';\npieces[2][1] = 'x';\npieces[2][2] = ' ';\npieces[2][3] = '\\0';\n</code></pre>\n\n<p>do what you want?</p>\n"}, {"tags": [], "owner": {"reputation": 3624, "user_id": 8013471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jh4jO.jpg?s=128&g=1", "display_name": "cse", "link": "https://stackoverflow.com/users/8013471/cse"}, "is_accepted": false, "score": 3, "last_activity_date": 1525282703, "creation_date": 1525282703, "answer_id": 50140525, "question_id": 50140435, "link": "https://stackoverflow.com/questions/50140435/modifying-strings-in-an-array-of-strings/50140525#50140525", "title": "Modifying strings in an Array of strings", "body": "<p>You can use <code>strcpy();</code></p>\n\n<p>See following example code. See working code <a href=\"https://ideone.com/smzC3j\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<pre><code>int main(void) \n{\n    char pieces[9][4] = { \"   \", \" o \", \" a \", \"   \", \"   \", \"   \", \" b \", \"   \", \"   \" };\n\n    printf(\"At point 1: %s\\n\",pieces[2]);\n    strcpy(pieces[2],\" x \");\n    printf(\"At point 2: %s\",pieces[2]);\n    return 0;\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>At point 1:  a \nAt point 2:  x \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1525283599, "post_id": 50140529, "comment_id": 87299732, "body": "To clarify: In this simple case there is practically no difference between <code>std::array&lt;std::string, 9&gt; pieces</code> and <code>std::string pieces[9]</code>."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1525283957, "post_id": 50140529, "comment_id": 87299914, "body": "@HolyBlackCat I was going to add a part arguing the use of <code>.at()</code> over subscript for bounds checking, but left it off to keep the answer shorter. I think that would be the biggest reason I personally would prefer to be using an STL class over a raw array."}], "tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": true, "score": 4, "last_activity_date": 1525285456, "last_edit_date": 1525285456, "creation_date": 1525282713, "answer_id": 50140529, "question_id": 50140435, "link": "https://stackoverflow.com/questions/50140435/modifying-strings-in-an-array-of-strings/50140529#50140529", "title": "Modifying strings in an Array of strings", "body": "<p>In your specific situation, it looks like you always have some character surrounded by spaces, so you could simply do <code>pieces[2][1] = 'x';</code> to modify that one element. However...</p>\n\n<p>You are correct to assume this can be made easier with <code>std::string</code> and <code>std::vector</code>, but since we already know the size, an <code>std::array</code> will probably be better here:</p>\n\n<pre><code>std::array&lt;std::string, 9&gt; pieces = { \"   \", \" o \", \" a \", \"   \", \"   \", \"   \", \" b \", \"   \", \"   \" };\npieces[2] = \" x \";\n</code></pre>\n\n<p>You may notice that the subscript operator still works on <code>std::array</code>'s. This means that even if you switch to <code>std::array</code>'s, you probably won't even have to change too much in your other code (just the parts dealing with c-strings to be dealing with <code>std::strings</code>)</p>\n"}, {"comments": [{"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1525286038, "post_id": 50141256, "comment_id": 87300890, "body": "Curly braces can work for the right type. See <a href=\"https://godbolt.org/g/U115Bx\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 1034, "user_id": 4735781, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r78R2.jpg?s=128&g=1", "display_name": "eneski", "link": "https://stackoverflow.com/users/4735781/eneski"}, "reply_to_user": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1525287331, "post_id": 50141256, "comment_id": 87301484, "body": "It seems that you are right even I have not encountered the right type till now. But the thing is <code>char arr[3]; arr = {&#39;a&#39;, &#39;b&#39;, &#39;c&#39;};</code> is not working while <code>char arr[] ={&#39;a&#39;,&#39;b&#39;,&#39;c&#39;};</code> is working."}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1525384785, "post_id": 50141256, "comment_id": 87346816, "body": "If You try <code>arr[4]</code>?"}, {"owner": {"reputation": 1034, "user_id": 4735781, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r78R2.jpg?s=128&g=1", "display_name": "eneski", "link": "https://stackoverflow.com/users/4735781/eneski"}, "reply_to_user": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1525417170, "post_id": 50141256, "comment_id": 87355366, "body": "No, it does not work too. But why did you think that it will work @RobertAndrzejuk ?"}], "tags": [], "owner": {"reputation": 1034, "user_id": 4735781, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r78R2.jpg?s=128&g=1", "display_name": "eneski", "link": "https://stackoverflow.com/users/4735781/eneski"}, "is_accepted": false, "score": 1, "last_activity_date": 1525285684, "creation_date": 1525285684, "answer_id": 50141256, "question_id": 50140435, "link": "https://stackoverflow.com/questions/50140435/modifying-strings-in-an-array-of-strings/50141256#50141256", "title": "Modifying strings in an Array of strings", "body": "<p>Firstly, using curly brackets like <code>pieces[2] = { \" x \" };</code> is the way of initialization, so you can't do that.</p>\n\n<p>Secondly, <code>pieces[2]</code> is an char array, so it is not modifiable l-value.</p>\n\n<p>You can either change its content element by element or by using <code>strcpy()</code> function.</p>\n"}, {"tags": [], "owner": {"reputation": 271, "user_id": 8684057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zbA1p.jpg?s=128&g=1", "display_name": "Anselmo GPP", "link": "https://stackoverflow.com/users/8684057/anselmo-gpp"}, "is_accepted": false, "score": 0, "last_activity_date": 1528775762, "creation_date": 1528775762, "answer_id": 50809020, "question_id": 50140435, "link": "https://stackoverflow.com/questions/50140435/modifying-strings-in-an-array-of-strings/50809020#50809020", "title": "Modifying strings in an Array of strings", "body": "<p>Just to sumarize the different solutions given by different users, the options are:</p>\n\n<ul>\n<li><p>Modify one char element at a time. Example: <strong>pieces[2][1] = 'x'</strong></p></li>\n<li><p>Use strcpy(). Example: <strong>strcpy(pieces[2],\" x \")</strong></p></li>\n<li><p>Another types: <strong>std::array</strong>, <strong>std::string</strong>, <strong>std::vector</strong></p></li>\n</ul>\n"}], "owner": {"reputation": 271, "user_id": 8684057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zbA1p.jpg?s=128&g=1", "display_name": "Anselmo GPP", "link": "https://stackoverflow.com/users/8684057/anselmo-gpp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 50140529, "answer_count": 5, "score": 0, "last_activity_date": 1528775762, "creation_date": 1525282378, "question_id": 50140435, "link": "https://stackoverflow.com/questions/50140435/modifying-strings-in-an-array-of-strings", "title": "Modifying strings in an Array of strings", "body": "<p>I have an array of strings and I would like to modify its elements at will. This is the code:</p>\n\n<pre><code>char pieces[9][4] = { \"   \", \" o \", \" a \", \"   \", \"   \", \"   \", \" b \", \"   \", \"   \" };\npieces[2] = { \" x \" };\n</code></pre>\n\n<p>As I know, the elements in pieces[] are string literal, so they can't be changed (I'm not sure why this is like this). Maybe it could be solved using std::string or vectors. However, I would like to know if this kind of operation, or very similar operations, can be done using an array of strings. Can be done something like this using just an array of strings?</p>\n"}, {"tags": ["c++", "oop"], "comments": [{"owner": {"reputation": 2174, "user_id": 3349368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57c9f50cb5783614c67eef86caf63139?s=128&d=identicon&r=PG", "display_name": "Paul Belanger", "link": "https://stackoverflow.com/users/3349368/paul-belanger"}, "edited": false, "score": 1, "creation_date": 1525281240, "post_id": 50140088, "comment_id": 87298444, "body": "It looks like part of your source code was lost when posting. Please edit your post to include the entire source code."}, {"owner": {"reputation": 5976, "user_id": 2129801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/678b0edc1262e07c7462ade977e883ca?s=128&d=identicon&r=PG", "display_name": "werner", "link": "https://stackoverflow.com/users/2129801/werner"}, "edited": false, "score": 0, "creation_date": 1525281272, "post_id": 50140088, "comment_id": 87298477, "body": "Welcome to Stack Overflow! Generally, you should include the detailled error message that you get. In this case it looks like the  body of your function <code>sum(const Int&amp; n)</code> is missing"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1525281310, "post_id": 50140088, "comment_id": 87298503, "body": "If that is your real code you should get a <i>lot</i> of errors when building."}, {"owner": {"reputation": 13, "user_id": 9522731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f587dd708b543ae0c581c2d16ea3f1b?s=128&d=identicon&r=PG&f=1", "display_name": "Sneikof", "link": "https://stackoverflow.com/users/9522731/sneikof"}, "edited": false, "score": 0, "creation_date": 1525281432, "post_id": 50140088, "comment_id": 87298559, "body": "I&#39;m sorry.Don&#39;t see"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1525281493, "post_id": 50140088, "comment_id": 87298590, "body": "Take a close look at the code you show us. Especially the <code>sum</code> function. What are you doing in the <code>sum</code> function?"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1525281749, "post_id": 50140088, "comment_id": 87298749, "body": "Please post the error you don&#39;t understand.  Different compilers provide different errors, so we can not guess what error message you are asking us to explain."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1525281884, "post_id": 50140088, "comment_id": 87298830, "body": "Okay, your edit makes it a little better, but it still seems you are just dabbling around without much actual knowledge. Where do the <code>Int</code> class end? Perhaps you should take a few steps back, <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list/388282#388282\">get a couple of good books</a> and start over?"}, {"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "edited": false, "score": 0, "creation_date": 1525281907, "post_id": 50140088, "comment_id": 87298838, "body": "<code>int sum(const Int&amp; n) const</code> - it fixes the main issue. I offer to fix other syntax issues yourself."}], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 9528458, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvTqq.png?s=128&g=1", "display_name": "LawfulGood", "link": "https://stackoverflow.com/users/9528458/lawfulgood"}, "edited": false, "score": 0, "creation_date": 1525349419, "post_id": 50140109, "comment_id": 87326999, "body": "Can you mark my response as an answer by clicking the arrow up on the left?"}], "tags": [], "owner": {"reputation": 167, "user_id": 9528458, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvTqq.png?s=128&g=1", "display_name": "LawfulGood", "link": "https://stackoverflow.com/users/9528458/lawfulgood"}, "is_accepted": false, "score": 0, "last_activity_date": 1525281111, "creation_date": 1525281111, "answer_id": 50140109, "question_id": 50140088, "link": "https://stackoverflow.com/questions/50140088/function-dont-work-in-the-class-c/50140109#50140109", "title": "Function don&#39;t work in the class (c++)", "body": "<p>You cannot declare a function inside another function like that. You have main() inside sum().</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 9522731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f587dd708b543ae0c581c2d16ea3f1b?s=128&d=identicon&r=PG&f=1", "display_name": "Sneikof", "link": "https://stackoverflow.com/users/9522731/sneikof"}, "edited": false, "score": 0, "creation_date": 1525283062, "post_id": 50140461, "comment_id": 87299437, "body": "Thank you very much.I didn&#39;t think that all so simple"}], "tags": [], "owner": {"reputation": 78, "user_id": 9058831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5253f38c89feb392445ff52e2d00dfbc?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/9058831/peter"}, "is_accepted": true, "score": 0, "last_activity_date": 1525282921, "last_edit_date": 1525282921, "creation_date": 1525282467, "answer_id": 50140461, "question_id": 50140088, "link": "https://stackoverflow.com/questions/50140088/function-dont-work-in-the-class-c/50140461#50140461", "title": "Function don&#39;t work in the class (c++)", "body": "<p>Below is my attempt. There were some formatting issues but the trickiest problem was that getValue() is a const function.</p>\n\n<pre><code>class Int {\n private:\n  int num;\n\n public:\n  Int() { num = 0; }\n  Int(int n) { num = n; }\n\n  // getValue is a const function as it does not alter object 'n'.\n  int getValue() const { return num; }\n  int sum(const Int&amp; n) { \n    int ret = num + n.getValue(); \n    return ret;\n  }\n};\n\nint main() {\n    int a, b;\n    std::cout &lt;&lt; \"Enter 2 numbers:\";\n    std::cin &gt;&gt; a &gt;&gt; b;\n    Int A(a), B(b), res;\n    std::cout &lt;&lt; A.getValue() &lt;&lt; \" + \" &lt;&lt; B.getValue() &lt;&lt; \" = \" &lt;&lt; A.sum(B) &lt;&lt; \"\\n\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9522731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f587dd708b543ae0c581c2d16ea3f1b?s=128&d=identicon&r=PG&f=1", "display_name": "Sneikof", "link": "https://stackoverflow.com/users/9522731/sneikof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 50140461, "answer_count": 2, "score": -6, "last_activity_date": 1525282921, "creation_date": 1525281032, "last_edit_date": 1525281553, "question_id": 50140088, "link": "https://stackoverflow.com/questions/50140088/function-dont-work-in-the-class-c", "title": "Function don&#39;t work in the class (c++)", "body": "<p>Newly I've begun learning OOP.I've written simple program.But function int sum() has errors.Can you write decision of the problem.And explain errors.</p>\n\n<pre><code>class Int \n{\nprivate:\n   int num;\npublic\nInt()\n{\n    num = 0;\n}\nInt(int n)\n{\n    num = n;\n}\n int getValue()\n{\n    return num;\n}\n int sum(const Int&amp; n)\n{\n    return num+ n.getValue();\n}\nvoid main()\n{\nshort a, b;\ncout &lt;&lt;  \"Enter 2 numbers:\";\ncin &gt;&gt; a &gt;&gt; b;\nInt A(a), B(b), res;\ncout &lt;&lt; A.getValue() &lt;&lt; \" + \" &lt;&lt; B.getValue() &lt;&lt; \" = \" &lt;&lt; A.sum(B) &lt;&lt;\"\\n\\n\";\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "hough-transform"], "comments": [{"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1525281729, "post_id": 50140065, "comment_id": 87298736, "body": "<i>but I wan&#39;t to optimize code that all equations will be calculated on fly, no empty loops</i>. I don&#39;t think you will increase performance by implementing already optimized functions yourself."}, {"owner": {"reputation": 331, "user_id": 4381004, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e7403f461bbac169ebda33780909d5cc?s=128&d=identicon&r=PG", "display_name": "Menos", "link": "https://stackoverflow.com/users/4381004/menos"}, "reply_to_user": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1525282349, "post_id": 50140065, "comment_id": 87299055, "body": "Yes i know, but I wan&#39;t to understand how it works not using all the library functions. But when I&#39;m using the cartToPolar there is no change. The result are still non acceptable."}, {"owner": {"reputation": 193, "user_id": 6834424, "user_type": "registered", "profile_image": "https://graph.facebook.com/1181521251922068/picture?type=large", "display_name": "Darth Coder", "link": "https://stackoverflow.com/users/6834424/darth-coder"}, "edited": false, "score": 0, "creation_date": 1525531149, "post_id": 50140065, "comment_id": 87398001, "body": "This may be a dumb question, but have you tried looking at the output of your  sobelX, sobelY and magnitude image? Does it give the result you expect?"}], "owner": {"reputation": 331, "user_id": 4381004, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e7403f461bbac169ebda33780909d5cc?s=128&d=identicon&r=PG", "display_name": "Menos", "link": "https://stackoverflow.com/users/4381004/menos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1525289149, "creation_date": 1525280946, "last_edit_date": 1525289149, "question_id": 50140065, "link": "https://stackoverflow.com/questions/50140065/hough-circular-transform", "title": "Hough Circular Transform", "body": "<p>Im trying to implement Hough Transform using gradient direction. I know that there is an implementation in OpenCv but I want to do it myself. </p>\n\n<p>I'm using Sobel to get the X and Y gradient. Then for every pixel the </p>\n\n<ul>\n<li>magnitute ---> <code>sqrt(sobelX^2 + sobelY^2)</code>\n<br></li>\n<li>directions --> <code>atan2(sobelY,sobelX) * 180/PI</code></li>\n</ul>\n\n<p>if the magnitude is higher then 220 (so almost black) this is the edge.\nAnd then the direction is used on the circle equation.</p>\n\n<p>But the results are not acceptable. Any help?</p>\n\n<p>I know there are the <code>cv::polar</code> and <code>cv::cartToPolar</code>, but I want to optimize code so that all equations will be calculated on fly, no empty loops.</p>\n\n<p><a href=\"https://i.stack.imgur.com/nGAHo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nGAHo.png\" alt=\"Result of HoughTransform\"></a></p>\n\n<pre><code>cv::Mat sobelX,sobelY;\n        Sobel(mat, sobelX, CV_32F, 1, 0, kernelSize, 1, 0, cv::BORDER_REPLICATE);\n        Sobel(mat, sobelY, CV_32F, 0, 1, kernelSize, 1, 0, cv::BORDER_REPLICATE);\n        //cv::Canny(mat,mat,100,200,kernelSize,false);\n        debug::showImage(\"sobelX\",sobelX);\n        debug::showImage(\"SobelY\",sobelY);\n        debug::showImage(\"MAT\",mat);\n        cv::Mat magnitudeMap,angleMap;\n    magnitudeMap = cv::Mat::zeros(mat.rows,mat.cols,mat.type());\n    angleMap = cv::Mat::zeros(mat.rows,mat.cols,mat.type());\n        std::vector&lt;cv::Mat&gt; hough_spaces(max);\n        for(int i=0; i&lt;max; ++i)\n        {\n            hough_spaces[i] = cv::Mat::zeros(mat.rows,mat.cols,mat.type());\n        }\n        for(int x=0; x&lt;mat.rows; ++x)\n        {\n            for(int y=0; y&lt;mat.cols; ++y)\n            {\n\n                const float magnitude = sqrt(sobelX.at&lt;uchar&gt;(x,y)*sobelX.at&lt;uchar&gt;(x,y)+sobelY.at&lt;uchar&gt;(x,y)*sobelY.at&lt;uchar&gt;(x,y));\n                const float theta= atan2(sobelY.at&lt;uchar&gt;(x,y),sobelX.at&lt;uchar&gt;(x,y)) * 180/CV_PI;\n                magnitudeMap.at&lt;uchar&gt;(x,y) = magnitude;\n                if(magnitude &gt; 225)//mat.at&lt;const uchar&gt;(x,y) == 255)\n                {\n                    for(int radius=min; radius&lt;max; ++radius)\n                    {\n\n                        const int a = x - radius * cos(theta);//lookup::cosArray[static_cast&lt;int&gt;(theta)];//+ 0.5f;\n                        const int b = y - radius * sin(theta);//lookup::sinArray[static_cast&lt;int&gt;(theta)]; //+ 0.5f;\n                        if(a &gt;= 0 &amp;&amp; a &lt;hough_spaces[radius].rows &amp;&amp; b &gt;= 0 &amp;&amp; b&lt;hough_spaces[radius].cols)                             {\n                            hough_spaces[radius].at&lt;uchar&gt;(a,b)+=10;\n                        }\n\n\n                    }\n                }\n            }\n        }\n        debug::showImage(\"magnitude\",magnitudeMap);\n        for(int radius=min; radius&lt;max; ++radius)\n        {\n            double min_f,max_f;\n            cv::Point min_loc,max_loc;\n            cv::minMaxLoc(hough_spaces[radius],&amp;min_f,&amp;max_f,&amp;min_loc,&amp;max_loc);\n            if(max_f&gt;=treshold)\n            {\n                circles.emplace_back(cv::Point3f(max_loc.x,max_loc.y,radius));\n                // debug::showImage(std::to_string(radius).c_str(),hough_spaces[radius]);\n\n            }\n        }\n        circles.shrink_to_fit();\n</code></pre>\n"}, {"tags": ["c++", "windows"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 2, "creation_date": 1525281065, "post_id": 50140045, "comment_id": 87298361, "body": "Sorry I can&#39;t help here, still it might be a good idea to add the failed attempts in form of <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> -- code often tells people more than descriptions."}, {"owner": {"reputation": 21, "user_id": 9730669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22f4858125dcab63921ac2a9b78253df?s=128&d=identicon&r=PG&f=1", "display_name": "user304679", "link": "https://stackoverflow.com/users/9730669/user304679"}, "edited": false, "score": 0, "creation_date": 1525282366, "post_id": 50140045, "comment_id": 87299064, "body": "I&#39;ve added some additional information and removed one of the flags."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1525282539, "post_id": 50140045, "comment_id": 87299159, "body": "That&#39;s great, I hope someone can make good use of it and actually provide an answer!"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1525284088, "post_id": 50140045, "comment_id": 87299969, "body": "remove <code>&quot;\\\\&quot;</code> in the end. use <code>L&quot;\\\\\\\\\\?\\\\Volume{501d29da-6d6d-48ab-a8bc-e14a7da74e9f}&quot;</code> in <code>CreateFile</code> call. and what error return <code>CreateFile</code> ?"}, {"owner": {"reputation": 21, "user_id": 9730669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22f4858125dcab63921ac2a9b78253df?s=128&d=identicon&r=PG&f=1", "display_name": "user304679", "link": "https://stackoverflow.com/users/9730669/user304679"}, "edited": false, "score": 1, "creation_date": 1525284898, "post_id": 50140045, "comment_id": 87300338, "body": "Removing the trailing &quot;\\\\&quot; at the end and putting the value in the call changed the error.  Now I&#39;m getting Access is denied since I&#39;m not an administrator on this machine. I appreciate the help and will report back if things to appear to start working or if I have more issues!"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1525285307, "post_id": 50140045, "comment_id": 87300540, "body": "if you have not access - what you want ?"}], "owner": {"reputation": 21, "user_id": 9730669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22f4858125dcab63921ac2a9b78253df?s=128&d=identicon&r=PG&f=1", "display_name": "user304679", "link": "https://stackoverflow.com/users/9730669/user304679"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1525282332, "creation_date": 1525280860, "last_edit_date": 1525282332, "question_id": 50140045, "link": "https://stackoverflow.com/questions/50140045/reading-raw-data-from-a-device-that-is-not-mounted", "title": "Reading raw data from a device that is not mounted", "body": "<p>I'm attempting to read from an SD card raw data that is not formatted in a file system that Windows recognizes.</p>\n\n<p>Using the <code>mountvol</code> command in Command Prompt I am able to get the <code>VolumeID</code> which I am attempting to use to access and read from the device, yet I have had no success.</p>\n\n<p>I am attempting to do this in C/C++. I have tried to <code>fopen</code> the <code>VolumeID</code> and I have attempted to use <code>CreateFile</code> to get a handle and use that.  </p>\n\n<p>Any ideas on what else I can try?  I know you can open a volume directly using the 'start' command in Command Prompt, so I have to believe there is a way to do this.</p>\n\n<p>Examples:</p>\n\n<pre><code>LPCTSTR test = L\"\\\\\\\\\\?\\\\Volume{501d29da-6d6d-48ab-a8bc-e14a7da74e9f}\\\\\";\n\nHANDLE file_handle = CreateFile(\n  test\n  , GENERIC_READ\n  , FILE_SHARE_READ | FILE_SHARE_WRITE\n  , NULL\n  , OPEN_EXISTING\n  , FILE_FLAG_NO_BUFFERING | FILE_FLAG_RANDOM_ACCESS\n  , NULL);\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>FILE *volume = fopen(\"\\\\\\\\\\?\\\\Volume{501d29da-6d6d-48ab-a8bc-e14a7da74e9f}\\\\\", \"r\");\nlong long offset = 0;  // Sector-aligned offset\nsetbuf(volume, NULL);  // Disable buffering\n</code></pre>\n"}, {"tags": ["c++", "pointers", "operator-overloading"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1525280912, "post_id": 50140024, "comment_id": 87298284, "body": "you cannot overload operators for pointers (as the rhs). Cant you simply compare instances instead of pointers?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1525280915, "post_id": 50140024, "comment_id": 87298285, "body": "&quot;This is always false.&quot; - because it is comparing pointers. Why do you need to allocate these things with <code>new</code>?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1525280983, "post_id": 50140024, "comment_id": 87298323, "body": "<i>Why</i> are you using pointers in the first place? What is the reason for that? You don&#39;t have any virtual functions, or inheritance, so there&#39;s no polymorphism involved that you need pointers for. And with proper <a href=\"http://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">rule of three/five/zero</a> adherence you don&#39;t really need pointers that much."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1525281024, "post_id": 50140024, "comment_id": 87298342, "body": "As for solving it with pointers anyway (even though I highly recommend <i>against</i> it), think about the dereference operator."}, {"owner": {"reputation": 1567, "user_id": 3596696, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1543175927/picture?type=large", "display_name": "Christian4423", "link": "https://stackoverflow.com/users/3596696/christian4423"}, "edited": false, "score": 0, "creation_date": 1525281146, "post_id": 50140024, "comment_id": 87298399, "body": "I will try working the pointers out. If they are not needed, I will remove them."}, {"owner": {"reputation": 1567, "user_id": 3596696, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1543175927/picture?type=large", "display_name": "Christian4423", "link": "https://stackoverflow.com/users/3596696/christian4423"}, "edited": false, "score": 0, "creation_date": 1525281162, "post_id": 50140024, "comment_id": 87298407, "body": "I do not want to fight c++ lol"}], "answers": [{"comments": [{"owner": {"reputation": 1567, "user_id": 3596696, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1543175927/picture?type=large", "display_name": "Christian4423", "link": "https://stackoverflow.com/users/3596696/christian4423"}, "edited": false, "score": 0, "creation_date": 1525281565, "post_id": 50140152, "comment_id": 87298638, "body": "Thank you for this. I guess I thought I needed pointers because I am using this Entry class in my Binary Search Tree. I thought the item in my node had to be a pointer."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 1567, "user_id": 3596696, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1543175927/picture?type=large", "display_name": "Christian4423", "link": "https://stackoverflow.com/users/3596696/christian4423"}, "edited": false, "score": 1, "creation_date": 1525282113, "post_id": 50140152, "comment_id": 87298934, "body": "@Christian4423 I know teachers will tell you otherwise, but the cases where you really need pointers are actually surprisingly rare"}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": true, "score": 0, "last_activity_date": 1525281235, "creation_date": 1525281235, "answer_id": 50140152, "question_id": 50140024, "link": "https://stackoverflow.com/questions/50140024/c-operator-overload-with-pointer-object/50140152#50140152", "title": "C++ operator overload with pointer object", "body": "<blockquote>\n<pre><code>Entry&lt;string, string&gt;* name =  new Entry&lt;string, string&gt;(names[9], paths[9]);\nEntry&lt;string, string&gt;* name2 = new Entry&lt;string, string&gt;(names[9], paths[9]);\n\nbool isSame = name == name2;\n</code></pre>\n  \n  <p>This is always false.</p>\n</blockquote>\n\n<p>It is always <code>false</code>, because you are comparing the adresses of two distinct objects. Actually in general there is not much you can do with a pointer unless you derference it. If you want to call <code>Entry::operator==</code> you would need to dereference the pointers, as in:</p>\n\n<pre><code>bool isSame = *name == *name2;\n</code></pre>\n\n<p>Btw, the question arises, why do you use pointers in the first place? Just use plain objects and your problem is gone:</p>\n\n<pre><code> auto name =  Entry&lt;string, string&gt;(names[9], paths[9]);\n auto name2 = Entry&lt;string, string&gt;(names[9], paths[9]);\n\n bool isSame = name == name2;\n</code></pre>\n\n<p>this will work as expected, given you provide a <code>Entry::operator==(Entry)</code></p>\n"}], "owner": {"reputation": 1567, "user_id": 3596696, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1543175927/picture?type=large", "display_name": "Christian4423", "link": "https://stackoverflow.com/users/3596696/christian4423"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 301, "favorite_count": 0, "accepted_answer_id": 50140152, "answer_count": 1, "score": 0, "last_activity_date": 1525281235, "creation_date": 1525280772, "question_id": 50140024, "link": "https://stackoverflow.com/questions/50140024/c-operator-overload-with-pointer-object", "title": "C++ operator overload with pointer object", "body": "<p>I am working on comparing my object with another object of the same type. </p>\n\n<pre><code>Entry&lt;string, string&gt;* name =  new Entry&lt;string, string&gt;(names[9], paths[9]);\nEntry&lt;string, string&gt;* name2 = new Entry&lt;string, string&gt;(names[9], paths[9]);\n\nbool isSame = name == name2;\n</code></pre>\n\n<p>This is always false. </p>\n\n<p>In my implementation, I have tried a few things but with no luck. </p>\n\n<pre><code>template&lt;class KeyType, class ItemType&gt;\nbool Entry&lt;KeyType, ItemType&gt;::operator==(Entry&lt;KeyType, ItemType&gt;* rightHandItem)\n{\n    KeyType key = rightHandItem-&gt;getKey();\n    return (searchKey == key);\n}\n\ntemplate&lt;class KeyType, class ItemType&gt;\nbool Entry&lt;KeyType, ItemType&gt;::operator&gt;(Entry&lt;KeyType, ItemType&gt;* rightHandItem)\n{\n    KeyType key = rightHandItem-&gt;getKey();\n    return (searchKey &gt; key);\n}\ntemplate&lt;class KeyType, class ItemType&gt;\nbool Entry&lt;KeyType, ItemType&gt;::operator&lt;(Entry&lt;KeyType, ItemType&gt;* rightHandItem)\n{\n    KeyType key = rightHandItem-&gt;getKey();\n    return (searchKey &lt; key);\n}\n</code></pre>\n\n<p>This is my class header file</p>\n\n<pre><code>#pragma once\ntemplate&lt;class KeyType, class ItemType&gt;\nclass Entry\n{\npublic:\n    Entry();\n    Entry(KeyType&amp; searchKey);\n    Entry(KeyType&amp; searchKey, ItemType newEntry);\n    ~Entry();\n    ItemType getItem() const;\n    KeyType getKey() const;\n    void setItem(const ItemType&amp; newEntry);\n    bool operator==(const Entry&lt;KeyType, ItemType&gt;&amp; rightHandItem) const;\n    bool operator&gt;(const Entry&lt;KeyType, ItemType&gt;&amp; rightHandItem) const;\n    bool operator&lt;(const Entry&lt;KeyType, ItemType&gt;&amp; rightHandItem) const;\n\n    bool operator==(Entry&lt;KeyType, ItemType&gt;* rightHandItem);\n    bool operator&gt;(Entry&lt;KeyType, ItemType&gt;* rightHandItem);\n    bool operator&lt;(Entry&lt;KeyType, ItemType&gt;* rightHandItem);\nprivate:\n    ItemType Item;\n    KeyType searchKey;\nprotected:\n    void setKey(const KeyType&amp; searchKey);\n};\n\n#include \"Entry.cpp\"\n</code></pre>\n\n<p>The only way I can get this to work is if I declare entry as an object and not a pointer. </p>\n\n<p>I thought this question would be a quick search but I have been unable to find a duplicate. Let me know if this has been asked before. </p>\n\n<p>How do I compare the two pointers? </p>\n"}, {"tags": ["c++", "winapi", "unicode", "windows-10", "utf-32"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 8, "creation_date": 1525281225, "post_id": 50140003, "comment_id": 87298429, "body": "&quot;<i>But I want to future-proof it (more excotic languages) and I also want to try my hands on UTF-32.</i>&quot; UTF-8 is no less &quot;future-proof&quot; than UTF-32. That is the whole point of UTF formats: they all encode the exact same ranges of data."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1525281427, "post_id": 50140003, "comment_id": 87298555, "body": "With the comment from @NicolBolas, rather consider using <a href=\"http://utf8everywhere.org/\" rel=\"nofollow noreferrer\">UTF-8 everywhere</a>. Then at least your text files will be readable by everyone else."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 2, "creation_date": 1525281694, "post_id": 50140003, "comment_id": 87298714, "body": "Just to clarify, when you say &quot;write and open&quot; files, are you implicitely referring to iostream-style formatted IO, or just working with raw data?"}, {"owner": {"reputation": 376, "user_id": 4284179, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d28b7a54f846ace2017a022547c5e999?s=128&d=identicon&r=PG&f=1", "display_name": "Willi", "link": "https://stackoverflow.com/users/4284179/willi"}, "edited": false, "score": 0, "creation_date": 1525281746, "post_id": 50140003, "comment_id": 87298746, "body": "Yes, but they have different strengths and weaknesses. With UTF-32 it is possible that each character takes up exactly one code point. So the length of the string equals the number of characters. This reduces problems when it comes to character manipulations. And yes, I am aware that you can compose French characters and German umlauts from multiple symbols instead of using one. &#233; = &#233; or &#233; = &#180; + e; But unless the system is configured to do this, the program should work as reliable as a good old ANSII program. And that is what I want to achieve."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1525281839, "post_id": 50140003, "comment_id": 87298799, "body": "<i>How to write/open files in UTF-32?</i> - what you mean under this ? how encoding at all related to open or write to file operation ?"}, {"owner": {"reputation": 376, "user_id": 4284179, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d28b7a54f846ace2017a022547c5e999?s=128&d=identicon&r=PG&f=1", "display_name": "Willi", "link": "https://stackoverflow.com/users/4284179/willi"}, "reply_to_user": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1525281902, "post_id": 50140003, "comment_id": 87298834, "body": "@Frank I mean I want to create new files, read existing ones and modify them if needed. Whicher method is best, I am content with."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 3, "creation_date": 1525281998, "post_id": 50140003, "comment_id": 87298883, "body": "@Willi The reason I ask is that at the end of the day, data is data. Reading and writing files has nothing to do with encoding unless you are trying to use the STL&#39;s formatted IO capabilities."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1525282053, "post_id": 50140003, "comment_id": 87298907, "body": "Are you saying that you want to be able to get externally created text file, in whatever encoding they may have, and then convert the contents and save it back as UTF-32? Then what will happen when the original program that created the file want to read it and expect it to be whatever encoding it used to write it in? Don&#39;t touch files other programs created without thinking <i>very</i> carefully about the consequences."}, {"owner": {"reputation": 376, "user_id": 4284179, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d28b7a54f846ace2017a022547c5e999?s=128&d=identicon&r=PG&f=1", "display_name": "Willi", "link": "https://stackoverflow.com/users/4284179/willi"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1525282259, "post_id": 50140003, "comment_id": 87299011, "body": "@Some programmer dude I am against UTF-8 everywhere. It is as stupid as saying you should always use Java, C#, C++, etc.  Windows uses UTF-16, so that is the best option unless there is a specific reason to not use it unless of course, you are a fan of wasting cycles for useless conversions. UTF-8 is the preferred choice for publishing on the Internet or if the resulting file is meant to be used separately from the program and may, therefore, be used on different platforms."}, {"owner": {"reputation": 376, "user_id": 4284179, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d28b7a54f846ace2017a022547c5e999?s=128&d=identicon&r=PG&f=1", "display_name": "Willi", "link": "https://stackoverflow.com/users/4284179/willi"}, "edited": false, "score": 0, "creation_date": 1525282402, "post_id": 50140003, "comment_id": 87299088, "body": "@ Some programmer dude You can assume that existing files have the right encoding. Therefore, any file the program tries to open will be in UTF-32. The reason for this is that any files are either created by the program itself or are specifically created for it."}, {"owner": {"reputation": 376, "user_id": 4284179, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d28b7a54f846ace2017a022547c5e999?s=128&d=identicon&r=PG&f=1", "display_name": "Willi", "link": "https://stackoverflow.com/users/4284179/willi"}, "edited": false, "score": 0, "creation_date": 1525282507, "post_id": 50140003, "comment_id": 87299144, "body": "So, is there a standard library function or do I need to read the document as raw data and interpret it as UTF-32?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1525282550, "post_id": 50140003, "comment_id": 87299166, "body": "@Willi - encoding have nothing common with files. about what question ?"}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1525282568, "post_id": 50140003, "comment_id": 87299175, "body": "@Willi, UTF-32 IS a raw data format, you just copy the bytes into the string, this is why your question is so confusing."}, {"owner": {"reputation": 376, "user_id": 4284179, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d28b7a54f846ace2017a022547c5e999?s=128&d=identicon&r=PG&f=1", "display_name": "Willi", "link": "https://stackoverflow.com/users/4284179/willi"}, "reply_to_user": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1525282641, "post_id": 50140003, "comment_id": 87299209, "body": "@Frank OK, thanks, I&#39;ll give it a try."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 2, "creation_date": 1525282681, "post_id": 50140003, "comment_id": 87299234, "body": "Also, just so you know, even in UTF-32, many text-based operations are STILL multi-symbol by nature if you want to do things properly, even something as simple as searching for a letter,  so you are not actually gaining much relative to UTF-8"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1525282789, "post_id": 50140003, "comment_id": 87299289, "body": "So you don&#39;t want to have &quot;useless conversion&quot; between UTF-8 and UTF-16, but it&#39;s fine for conversions between your preferred UTF-32 and UTF-16? You <i>do</i> know that still needs conversions? And unless you only want to target a single CPU architecture (Intel x86 and derivatives) you also have to handle endianness issues causing even more possible &quot;wasting cycles&quot;. And code-points are really irrelevant, what with combining characters and such."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1525282989, "post_id": 50140003, "comment_id": 87299392, "body": "@Willi just FYI, there is no need for your <code>stringUTF32</code> typedef, as C++11 and later have <code>std::u32string</code> available.  But if you want to have <code>stringUTF32</code>, then at least use <code>std::u32string</code> in your <code>typedef</code> instead of <code>std::basic_string</code> directly, eg: <code>typedef std::u32string stringUTF32;</code> or <code>using stringUTF32 = std::u32string;</code>"}, {"owner": {"reputation": 376, "user_id": 4284179, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d28b7a54f846ace2017a022547c5e999?s=128&d=identicon&r=PG&f=1", "display_name": "Willi", "link": "https://stackoverflow.com/users/4284179/willi"}, "reply_to_user": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1525283137, "post_id": 50140003, "comment_id": 87299471, "body": "@Frank Well, if that is the case, I will probably have to use UTF-16. That way, I&#39;ll at least save the trouble of having to implement a conversion layer between the program logic and the WinAPI. And since all files are only meant to be used by the program internally, there is nothing gained by making the more accessible. Especially since there will be only a Windows version."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1525283290, "post_id": 50140003, "comment_id": 87299551, "body": "By the way, I&#39;m not going to stop you from using UTF-32 when- and where-ever you want, that&#39;s not my intention. My intention is to make you think a little extra about the reasons you want to do something completely different from everybody else."}, {"owner": {"reputation": 376, "user_id": 4284179, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d28b7a54f846ace2017a022547c5e999?s=128&d=identicon&r=PG&f=1", "display_name": "Willi", "link": "https://stackoverflow.com/users/4284179/willi"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1525283534, "post_id": 50140003, "comment_id": 87299694, "body": "@Some programmer dude Well, there is a difference. UTF-8 has absolutely no advantage for my use case. This program will be a Windows exclusive, otherwise, I would not bother with the WinAPI. And on Windows, UTF-16 is the best-supported standard. Secondly, the files are only meant for internal use by the program. They are no output meant for the user to edit, read, publish, etc. With UTF-32, I hoped to reduce the problem that 1 code-point does not equal one character. Therefore, reducing the chance that the program will not work correctly, should I, for instance, choose to use Japanese symbols."}, {"owner": {"reputation": 376, "user_id": 4284179, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d28b7a54f846ace2017a022547c5e999?s=128&d=identicon&r=PG&f=1", "display_name": "Willi", "link": "https://stackoverflow.com/users/4284179/willi"}, "edited": false, "score": 0, "creation_date": 1525283928, "post_id": 50140003, "comment_id": 87299899, "body": "I do use UTF-8, but mostly with the web, for Linux or with programming languages that use it as a preferred encoding. Since the native encoding of Windows is UTF-16 and C++ is mostly encoding agnostic, I use UTF-16 to prevent an artificial barrier between my GUI and between my logic. But even with the C++ and WinAPI combo, I use UTF-8 to create files meant by the user to be independently used from the program."}, {"owner": {"reputation": 376, "user_id": 4284179, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d28b7a54f846ace2017a022547c5e999?s=128&d=identicon&r=PG&f=1", "display_name": "Willi", "link": "https://stackoverflow.com/users/4284179/willi"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1525286377, "post_id": 50140003, "comment_id": 87301044, "body": "@Remy Lebeau thanks for the tip with std::u32string."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1525288878, "post_id": 50140003, "comment_id": 87302268, "body": "UTF-8 is good to use for disk storage, network comms, etc. UTF-16 strikes a good balance between memory usage and logic complexity, as MOST languages don&#39;t use glyphs outside the BMP (Eastern Asian languages, Emojis, etc). When processing UTF data, you usually have to process in UTF-32 anyway for codepoint comparisons, but you can do that on a per-codepoint basis without wasting memory. There is little benefit to storing UTF-32 on disk, or using UTF-32 strings in memory. Plus, UTF-32 doesn&#39;t solve the &quot;1 codepoint != 1 grapheme&quot; issue - graphemes are what users tend to think of as characters."}, {"owner": {"reputation": 2741, "user_id": 2036161, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ba65c6994b3945d68ea848b7d8a27253?s=128&d=identicon&r=PG", "display_name": "ventsyv", "link": "https://stackoverflow.com/users/2036161/ventsyv"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1525291730, "post_id": 50140003, "comment_id": 87303685, "body": "@NicolBolas <a href=\"http://utf8everywhere.org/\" rel=\"nofollow noreferrer\">utf8everywhere.org</a>"}], "answers": [{"comments": [{"owner": {"reputation": 376, "user_id": 4284179, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d28b7a54f846ace2017a022547c5e999?s=128&d=identicon&r=PG&f=1", "display_name": "Willi", "link": "https://stackoverflow.com/users/4284179/willi"}, "edited": false, "score": 0, "creation_date": 1525288766, "post_id": 50141380, "comment_id": 87302212, "body": "I have implemented the read function without this check as it is not strictly necessary for my use case (That was before you posted this answer). But I do think that I should include it for good-practice and to avoid trouble. Though with a slight alteration: if the encoding does not match the native encoding, skip that file with an error message. When I have time, I shall inform myself how to do an endian-conversion"}, {"owner": {"reputation": 376, "user_id": 4284179, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d28b7a54f846ace2017a022547c5e999?s=128&d=identicon&r=PG&f=1", "display_name": "Willi", "link": "https://stackoverflow.com/users/4284179/willi"}, "edited": false, "score": 0, "creation_date": 1525292166, "post_id": 50141380, "comment_id": 87303889, "body": "std::basic_ifstream&lt;char32_t&gt; input_stream(filename, std::ios::in); results in an error: Severity\tCode\tDescription\tProject\tFile\tLine\tSuppression State Error\tLNK2001\tunresolved external symbol &quot;__declspec(dllimport) public: static class std::locale::id std::codecvt&lt;char32_t,char,struct _Mbstatet&gt;::id&quot;"}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 1, "last_activity_date": 1525288880, "last_edit_date": 1525288880, "creation_date": 1525286200, "answer_id": 50141380, "question_id": 50140003, "link": "https://stackoverflow.com/questions/50140003/c-read-and-write-utf-32-files/50141380#50141380", "title": "C++ read and write UTF-32 files", "body": "<p>If you have a <code>char32_t</code> sequence, you can write it to a file using a <code>std::basic_ofstream&lt;char32_t&gt;</code> (which I will refer to as <code>u32_ofstream</code>, but this typedef does not exist). This works exactly like <code>std::ofstream</code>, except that it writes <code>char32_t</code>s instead of <code>char</code>s. But there are limitations.</p>\n\n<p>Most standard library types that have an <code>operator&lt;&lt;</code> overload are templated on the character type. So they will work with <code>u32_ofstream</code> just fine. The problem you will encounter is for <em>user</em> types. These almost always assume that you're writing <code>char</code>, and thus are defined as <code>ostream &amp;operator&lt;&lt;(ostream &amp;os, ...);</code>. Such stream output can't work with <code>u32_ofstream</code> without a conversion layer.</p>\n\n<p>But the big issue you're going to face is endian issues. <code>u32_ofstream</code> will write <code>char32_t</code> as your platform's native endian. If your application reads them back through a <code>u32_ifstream</code>, that's fine. But if other applications read them, or if your application needs to read something written in UTF-32 by someone else, that becomes a problem.</p>\n\n<p>The typical solution is to use a \"byte order mark\" as the first character of the file. Unicode even has a specific codepoint set aside for this: <code>\\U0000FEFF</code>.</p>\n\n<p>The way a BOM works is like this. When writing a file, you write the BOM before any other codepoints.</p>\n\n<p>When reading a file of an unknown encoding, you read the first codepoint as normal. If it comes out equal to the BOM in your native encoding, then you can read the rest of the file as normal. If it doesn't, then you need to read the file and endian-convert it before you can process it. That process would look at bit like this:</p>\n\n<pre><code>constexpr char32_t native_bom = U'\\U0000FEFF';\n\nu32_ifstream is(...);\nchar32_t bom;\nis &gt;&gt; bom;\nif(native_bom == bom)\n{\n  process_stream(is);\n}\nelse\n{\n  basic_stringstream&lt;char32_t&gt; char_stream\n  //Load the rest of `is` and endian-convert it into `char_stream`.\n  process_stream(char_stream);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 376, "user_id": 4284179, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d28b7a54f846ace2017a022547c5e999?s=128&d=identicon&r=PG&f=1", "display_name": "Willi", "link": "https://stackoverflow.com/users/4284179/willi"}, "edited": false, "score": 0, "creation_date": 1525910138, "post_id": 50147324, "comment_id": 87545227, "body": "Thank you for your answer and sorry for the late reply, I was busy. I have chosen to use UTF-16 the day I posted my question. I would have given UTF-32 a try, if for no other reason than curiosity, but the lack of documentation is simply too much of a problem. Back to your answer: I probably should not have written ANSII but ANSII + Microsoft extensions or the code pages Windows uses while in ANSII mode. Therefore, Windows does support enough of the Latin Alphabet if you only need a bilingual system. English + another language that uses the Latin alphabet. Anyways, that support is good enough."}, {"owner": {"reputation": 376, "user_id": 4284179, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d28b7a54f846ace2017a022547c5e999?s=128&d=identicon&r=PG&f=1", "display_name": "Willi", "link": "https://stackoverflow.com/users/4284179/willi"}, "edited": false, "score": 0, "creation_date": 1525910202, "post_id": 50147324, "comment_id": 87545240, "body": "for quite a few of my applications. Nevertheless, I do mostly use UNICODE mode. There are programs where I care a lot that every char == a character and I could not care less if someone can type their French, German, Russian or Japanese name. That is the reason I still occasionally use the old mode."}], "tags": [], "owner": {"reputation": 4119, "user_id": 4447998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be2b81fe09ceb2ec13da299127f242f3?s=128&d=identicon&r=PG", "display_name": "roeland", "link": "https://stackoverflow.com/users/4447998/roeland"}, "is_accepted": false, "score": 1, "last_activity_date": 1525324084, "creation_date": 1525324084, "answer_id": 50147324, "question_id": 50140003, "link": "https://stackoverflow.com/questions/50140003/c-read-and-write-utf-32-files/50147324#50147324", "title": "C++ read and write UTF-32 files", "body": "<blockquote>\n  <p>I am currently interested in is another European language, [so] ASCII might suffice</p>\n</blockquote>\n\n<p>No. Even in plain English. You know how Microsoft Word creates \u201ccurly quotes\u201d? Those are non-ASCII characters. All those letters with accents and umlauts in eg. French or English are non-ASCII characters.</p>\n\n<blockquote>\n  <p>I want to future-proof it</p>\n</blockquote>\n\n<p>UTF-8, UTF-16 and UTF-32 all can encode every Unicode code point. They\u2019re all future-proof. UTF-32 does not have an advantage over the other two.</p>\n\n<p>Also for future proofing: I\u2019m quite sure some scripts use characters (the technical term is \u2018grapheme clusters\u2019) consisting of more than one code point. A cursory search turns up <a href=\"https://stackoverflow.com/questions/6805311/playing-around-with-devanagari-characters\">Playing around with Devanagari characters</a>.</p>\n\n<p>A downside of UTF-32 is support in other tools. Notepad won\u2019t open your files. Beyond Compare won\u2019t. Visual Studio Code\u2026 nope. Visual Studio will, but it won\u2019t let you create such files.</p>\n\n<p>And the Win32 API: it has a function <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd374130(v=vs.85).aspx\" rel=\"nofollow noreferrer\">MultiByteToWideChar </a> which can convert UTF-8 to UTF-16 (which you need to pass in to all Win32 calls) but it doesn\u2019t accept UTF-32.</p>\n\n<p>So my honest answer to this question is, <em>don\u2019t</em>. Otherwise follow Nicol\u2019s answer.</p>\n"}], "owner": {"reputation": 376, "user_id": 4284179, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d28b7a54f846ace2017a022547c5e999?s=128&d=identicon&r=PG&f=1", "display_name": "Willi", "link": "https://stackoverflow.com/users/4284179/willi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1771, "favorite_count": 0, "accepted_answer_id": 50141380, "answer_count": 2, "score": 1, "last_activity_date": 1525324084, "creation_date": 1525280685, "last_edit_date": 1525281094, "question_id": 50140003, "link": "https://stackoverflow.com/questions/50140003/c-read-and-write-utf-32-files", "title": "C++ read and write UTF-32 files", "body": "<p>I want to write a language learning app for myself using Visual Studio 2017, C++ and the WindowsAPI (formerly known as Win32). The Operation System is the latest Windows 10 insider build and backwards-compatibility is a non-issue. Since I assume English to be the mother tounge of the user and the language I am currently interested in is another European language, ASCII might suffice. But I want to future-proof it (more excotic languages) and I also want to try my hands on UTF-32. I have previously used both UTF-8 and UTF-16, though I have more experience with the later.</p>\n\n<p>Thanks to <code>std::basic_string</code>, it was easy to figure out how to get an UTF-32 string:</p>\n\n<pre><code>typedef std::basic_string&lt;char32_t&gt; stringUTF32\n</code></pre>\n\n<p>Since I am using the WinAPI for all GUI staff, I need to do some conversion between UTF-32 and UTF-16.</p>\n\n<p>Now to my problem: Since UTF-32 is not widely used because of its inefficiencies, there is hardly any material about it on the web. To avoid unnecessary conversions, I want to save my vocabulary lists and other data as UTF-32 (for all UTF-8 advocates/evangelists, the alternative would be UTF-16). The problem is, I cannot find how to write and open files in UTF-32. </p>\n\n<p>So my question is: How to write/open files in UTF-32? I would prefer if no third-party libraries are needed unless they are a part of Windows or are usually shipped with that OS.</p>\n"}, {"tags": ["c++", "opencv", "ubuntu", "ubuntu-16.04", "codeblocks"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1525286867, "post_id": 50139999, "comment_id": 87301292, "body": "I don&#39;t know about that particular error, but OpenCV version 4.0 is still in development (and therefore not necessarily stable), so unless you intend to work on the library itself (but then you probably wouldn&#39;t be asking this), you should stick to stable releases, (such as 3.4.1). Usually this happens when people build their own copy of OpenCV and forget (or the tutorial they follow doesn&#39;t tell them) to check out a tag after cloning the repo."}, {"owner": {"reputation": 127, "user_id": 9709132, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBSjE.jpg?s=128&g=1", "display_name": "Winbuntu", "link": "https://stackoverflow.com/users/9709132/winbuntu"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1525293978, "post_id": 50139999, "comment_id": 87304760, "body": "@DanMa\u0161ek Thank you. I will install the previous version (3.4.1) again and will post the status here. It was of great help. Thanks. :)"}], "owner": {"reputation": 127, "user_id": 9709132, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBSjE.jpg?s=128&g=1", "display_name": "Winbuntu", "link": "https://stackoverflow.com/users/9709132/winbuntu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1525280667, "creation_date": 1525280667, "question_id": 50139999, "link": "https://stackoverflow.com/questions/50139999/failed-to-load-the-wizards-script-error-while-creating-a-wizard-for-opencv-in", "title": "&#39;Failed to load the wizard&#39;s script error&#39; while creating a wizard for OpenCV in Code::Blocks in Ubuntu 16.04(VirtualBox)", "body": "<p>I have installed OpenCV 4.0 through terminal in Ubuntu 16.04(VirtualBox).\nBut when I try to create a new Project in Code::Blocks IDE and when I choose OpenCV as the wizard ,it immediately says 'Failed to load the wizard's script error'.</p>\n\n<p>Any idea how should I tackle this issue?</p>\n"}, {"tags": ["c++", "compiler-errors", "linker"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1525280670, "post_id": 50139846, "comment_id": 87298160, "body": "Try <code>g++ main.cpp -lsoft -o main</code>"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1525280764, "post_id": 50139846, "comment_id": 87298204, "body": "You need to figure out in which library is the symbol defined. Until you know for certain which libraries you should link with, trying random things is unlikely to be productive."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1525280798, "post_id": 50139846, "comment_id": 87298222, "body": "Libraries should appear last on the compiler command line. For .o files the order isn&#39;t really significant."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1525282201, "post_id": 50139846, "comment_id": 87298988, "body": "You seem to be moitoring your question. Did my idea work for you?"}, {"owner": {"reputation": 113, "user_id": 9730755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef078e1a732beaae5d96a78a1777291f?s=128&d=identicon&r=PG", "display_name": "Liberty", "link": "https://stackoverflow.com/users/9730755/liberty"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1525282262, "post_id": 50139846, "comment_id": 87299013, "body": "@HolyBlackCat Thanks for advice but it only shows an error message &quot;/usr/bin/ld: cannot find -llibsoft&quot;"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1525282312, "post_id": 50139846, "comment_id": 87299026, "body": "Sorry, are you absolutely sure you tried what I suggested and not something else? There is no <code>-llibsoft</code> in my command."}, {"owner": {"reputation": 113, "user_id": 9730755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef078e1a732beaae5d96a78a1777291f?s=128&d=identicon&r=PG", "display_name": "Liberty", "link": "https://stackoverflow.com/users/9730755/liberty"}, "edited": false, "score": 0, "creation_date": 1525282355, "post_id": 50139846, "comment_id": 87299059, "body": "no there isn&#39;t. but even -lsoft doesn&#39;t work for the same reason"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1525282430, "post_id": 50139846, "comment_id": 87299103, "body": "Then try <code>g++ main.cpp -L&#47;path&#47;softsusy-4.1.1&#47;src&#47;.libs -lsoft -o main</code>."}, {"owner": {"reputation": 113, "user_id": 9730755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef078e1a732beaae5d96a78a1777291f?s=128&d=identicon&r=PG", "display_name": "Liberty", "link": "https://stackoverflow.com/users/9730755/liberty"}, "edited": false, "score": 0, "creation_date": 1525282512, "post_id": 50139846, "comment_id": 87299146, "body": "it doesn&#39;t work neither."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1525282694, "post_id": 50139846, "comment_id": 87299244, "body": "What is the error message? &quot;can&#39;t find ...&quot; or &quot;undefined reference to ...&quot;?"}, {"owner": {"reputation": 113, "user_id": 9730755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef078e1a732beaae5d96a78a1777291f?s=128&d=identicon&r=PG", "display_name": "Liberty", "link": "https://stackoverflow.com/users/9730755/liberty"}, "edited": false, "score": 0, "creation_date": 1525282837, "post_id": 50139846, "comment_id": 87299313, "body": "as spcified in the OP, for g++ main.cpp -L/path/softsusy-4.1.1/src/.libs -lsoft -o main, the error is simply &quot;/usr/bin/ld: cannot find -lsoft&quot;. without linking, a lot of errors of type &quot;undefined reference to ...&quot;"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1525283155, "post_id": 50139846, "comment_id": 87299478, "body": "Then double check that <code>&#47;path&#47;softsusy-4.1.1&#47;src&#47;.libs</code> is the correct path and it does contain <code>libsoft.a</code> and <code>libsoft.so</code>. Keep in mind that the path is probably case-sensitive. I can&#39;t image any other reason for it to not work besides the incorrect path. (To clarify, I asked to make sure the error hasn&#39;t changed.)"}, {"owner": {"reputation": 113, "user_id": 9730755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef078e1a732beaae5d96a78a1777291f?s=128&d=identicon&r=PG", "display_name": "Liberty", "link": "https://stackoverflow.com/users/9730755/liberty"}, "edited": false, "score": 0, "creation_date": 1525283657, "post_id": 50139846, "comment_id": 87299766, "body": "Thank you for comments. i moved all the files in ./libs folder to newly created folder and &quot;cannot find&quot; error disappeared. but instead &quot;undefined reference to `higherorder&#39;&quot; message appeared."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1525283987, "post_id": 50139846, "comment_id": 87299927, "body": "Which means that this library is linked correctly, but you need some other library as well. Check <code>.libs</code> for more <code>.a</code> or <code>.so</code> files and link them too. Keep in mind that relative library order in the command might matter."}, {"owner": {"reputation": 113, "user_id": 9730755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef078e1a732beaae5d96a78a1777291f?s=128&d=identicon&r=PG", "display_name": "Liberty", "link": "https://stackoverflow.com/users/9730755/liberty"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1525284051, "post_id": 50139846, "comment_id": 87299953, "body": "@HolyBlackCat Thank you. my problem was solved with your suggestion. I added all lib files -lsoft -ltsil etc. Thanks!"}], "owner": {"reputation": 113, "user_id": 9730755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef078e1a732beaae5d96a78a1777291f?s=128&d=identicon&r=PG", "display_name": "Liberty", "link": "https://stackoverflow.com/users/9730755/liberty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1525281563, "creation_date": 1525280108, "last_edit_date": 1525281563, "question_id": 50139846, "link": "https://stackoverflow.com/questions/50139846/how-to-link-a-librarylib-a-to-a-cpp-file-in-compiling", "title": "how to link a library(lib.a) to a cpp file in compiling?", "body": "<p>The question i had previously in (<a href=\"https://stackoverflow.com/questions/50136979/makefile-with-multiple-headers-and-namespace/50138425#50138425\">link</a>) needs to be requestioned with a proper title. Here I ask my problem in this post.</p>\n\n<p>As suggested in the link above, after </p>\n\n<pre><code>./configure &gt; make &gt; make install &gt; aclocal &gt; make\n</code></pre>\n\n<p>library files including libsoft.a and libsoft.so were created in \"softsusy-4.1.1/.libs\".</p>\n\n<p>Also in \"softsusy-4.1.1/src/.libs\" folder, all necessary .o files wree already created whose .cpp files are included/refered in main.cpp.</p>\n\n<p>In an attempt to compile main.cpp, i tried</p>\n\n<pre><code>g++ -g main.cpp nmssmsoftsusy.cpp decays.cpp /path/config.h -o main\ng++ -g -Wall -L/path/softsusy-4.1.1/src/.libs -llibsoft main.cpp -o test\ng++ -g -Wall -llibsoft main.cpp -o main\n</code></pre>\n\n<p>where main.cpp is</p>\n\n<pre><code>#include \"main.h\"\n#include \"nmssmsoftsusy.h\"\n#include \"decays.h\"\n\n#ifdef HAVE_CONFIG_H\n#include \"config.h\"\n#endif\n\nusing namespace softsusy;\n\nint main() {\n  /// Sets up exception handling\n  signal(SIGFPE, FPE_ExceptionHandler); \n</code></pre>\n\n<p>Then I got errors such as</p>\n\n<blockquote>\n  <p>undefined reference to `FPE_ExceptionHandler(int)'</p>\n</blockquote>\n\n<p>for the first and second trials, and an error that it doesn't know libsoft for the last trial:</p>\n\n<blockquote>\n  <p>/usr/bin/ld: cannot find -llibsoft</p>\n</blockquote>\n\n<p>There are several errors of this kind even after I change .h to .cpp files or including softsusy.h.</p>\n\n<p>Can I ask you how to appropriately link .o files(whose .cpp files are included in main()) or any other ways to run main.cpp?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "file", "input"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 6, "creation_date": 1525279467, "post_id": 50139639, "comment_id": 87297608, "body": "A) Make your program take in a directory as an argument and process all files in this directory. B) Write a batch file."}, {"owner": {"reputation": 2721, "user_id": 4372237, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/3XqU1.jpg?s=128&g=1", "display_name": "Mikhail Genkin", "link": "https://stackoverflow.com/users/4372237/mikhail-genkin"}, "edited": false, "score": 3, "creation_date": 1525279556, "post_id": 50139639, "comment_id": 87297644, "body": "What kind of Opearating system do you use? If Linux, make a shell script"}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 2, "creation_date": 1525279558, "post_id": 50139639, "comment_id": 87297647, "body": "C) Make your program accept a number of filename arguments and process them in turn."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1525279652, "post_id": 50139639, "comment_id": 87297701, "body": "FirstFirst / FindNext() in the current directory or have your program read a text file that has a list of all files you want to process.  That way no re-compile each time."}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 1, "creation_date": 1525279722, "post_id": 50139639, "comment_id": 87297721, "body": "D) Put the filenames in a file, and have the program read <i>that</i>."}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1525310908, "post_id": 50139639, "comment_id": 87309420, "body": "Geez, has everyone forgotten about the existence of stdin and batch files? The only input file the program needs to know about is stdin. It doesn&#39;t need any of the complex nonsense suggested so far in answers."}], "answers": [{"tags": [], "owner": {"reputation": 78, "user_id": 9058831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5253f38c89feb392445ff52e2d00dfbc?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/9058831/peter"}, "is_accepted": false, "score": 1, "last_activity_date": 1525280429, "last_edit_date": 1525280429, "creation_date": 1525279719, "answer_id": 50139735, "question_id": 50139639, "link": "https://stackoverflow.com/questions/50139639/how-to-run-a-c-program-multiple-times-with-different-input-files/50139735#50139735", "title": "How to run a c++ program multiple times with different input files?", "body": "<p>Using bash you can run them using:</p>\n\n<pre><code>$ for file in /Data/*.txt; do /path/your_program $file; done\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "is_accepted": false, "score": 0, "last_activity_date": 1525280191, "last_edit_date": 1525280191, "creation_date": 1525279814, "answer_id": 50139763, "question_id": 50139639, "link": "https://stackoverflow.com/questions/50139639/how-to-run-a-c-program-multiple-times-with-different-input-files/50139763#50139763", "title": "How to run a c++ program multiple times with different input files?", "body": "<p>You can define format for your input files names and put then into some directory. For example,</p>\n\n<pre><code>Input1.txt\nInput2.txt\n...\nInput111.txt\n</code></pre>\n\n<p>Then use some kind of <code>for</code> loop:</p>\n\n<pre><code>for(int i = 1; i &lt;= 111; ++i)\n{\n    ifstream file(\"Input\" + std::to_string(i) + \".txt\");\n    if (file.is_open())\n        Operate(file);\n}\n</code></pre>\n\n<p>If you don't know the exact number of files, you can check whether the file was openen by <code>is_open()</code> method. This way files with some numbers can be absent. You just loop for some max possible input file id.</p>\n\n<p>This was a solution which doesn't require any dependencies. But if you don't mind it, you actually may consider Boost.Filesystem. Here is an <a href=\"https://stackoverflow.com/a/8725664/2198121\">example</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "is_accepted": true, "score": 1, "last_activity_date": 1525311143, "last_edit_date": 1525311143, "creation_date": 1525281270, "answer_id": 50140164, "question_id": 50139639, "link": "https://stackoverflow.com/questions/50139639/how-to-run-a-c-program-multiple-times-with-different-input-files/50140164#50140164", "title": "How to run a c++ program multiple times with different input files?", "body": "<p>See this snippet. Since you are using MSCV, you need to enable MFC in configuration for this console application. Also add <code>#include \"afx.h\"</code> in <code>#include \"stdafx.h\"</code> where <code>CFileFind</code> is defined. <code>PopulateFromFolder()</code> should auto load the files into the vector <code>files</code>.</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;vector&gt;   \n\nusing namespace std;\n\nvoid PopulateFromFolder(string path, vector&lt;string&gt;&amp; files)\n{\n    CFileFind   finder;\n    CString fileName;\n    fileName.Format(L\"%s*.*\", CString(path.c_str()));\n    BOOL bOk = finder.FindFile(fileName);\n    while (bOk)\n    {\n        bOk = finder.FindNextFile();\n\n        if (finder.IsDots())\n        {\n            continue;\n        }\n        if (!finder.IsDirectory())\n        {\n            CString strFileName = finder.GetFileName();\n            files.push_back(CStringA(strFileName).GetString());\n        }\n    }\n    finder.Close();\n}\n\nint main()\n{\n    vector&lt;string&gt; files;\n    string path = \"D:\\\\MyFolder\\\\\";\n    PopulateFromFolder(path, files);\n\n    auto a = path + files[0];\n    int i = 0;\n    while (i&lt; files.size()-1)\n    {\n        cout &lt;&lt; \"processing \" &lt;&lt; files[i + 1] &lt;&lt; endl;\n        ifstream fs(path+files[i++]);\n        if (fs.is_open())\n        {\n            //do something\n        }\n        fs.close();\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/y2GSR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/y2GSR.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "edited": false, "score": 0, "creation_date": 1525700317, "post_id": 50140269, "comment_id": 87447904, "body": "Using <code>std::experimental::filesystem</code> actually means <i>not</i> using C++17. It&#39;s just <code>std::filesystem</code> now."}], "tags": [], "owner": {"reputation": 76, "user_id": 8413609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf07241a20796b819a89d3f1bef4298f?s=128&d=identicon&r=PG&f=1", "display_name": "mks", "link": "https://stackoverflow.com/users/8413609/mks"}, "is_accepted": false, "score": 0, "last_activity_date": 1525281634, "creation_date": 1525281634, "answer_id": 50140269, "question_id": 50139639, "link": "https://stackoverflow.com/questions/50139639/how-to-run-a-c-program-multiple-times-with-different-input-files/50140269#50140269", "title": "How to run a c++ program multiple times with different input files?", "body": "<p>You can try to use <code>std::experimental::filesystem</code> (<a href=\"http://en.cppreference.com/w/cpp/experimental/fs\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/experimental/fs</a>). I guess that <code>directory_iterator</code> from this library can be useful for you - it allows you to iterate over all files in a given directory. Have a look at the example provided in the documentation: <a href=\"http://en.cppreference.com/w/cpp/experimental/fs/directory_iterator\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/experimental/fs/directory_iterator</a>.\nHowever, you have to make sure that you are compiling your code with a new standard (C++ 17). </p>\n\n<p>Another way is to make for example a separate file containing a list of the names of all files that you want to work on. Then, you can read this list and for every file do what you need. </p>\n"}], "owner": {"reputation": 37, "user_id": 9731398, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gdasoZHRZXA/AAAAAAAAAAI/AAAAAAAAAO4/bbfP9yZ_ya8/photo.jpg?sz=128", "display_name": "Peter Nicolai Knudsen", "link": "https://stackoverflow.com/users/9731398/peter-nicolai-knudsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1524, "favorite_count": 0, "accepted_answer_id": 50140164, "answer_count": 4, "score": 1, "last_activity_date": 1525311143, "creation_date": 1525279410, "question_id": 50139639, "link": "https://stackoverflow.com/questions/50139639/how-to-run-a-c-program-multiple-times-with-different-input-files", "title": "How to run a c++ program multiple times with different input files?", "body": "<p>I'm new to C++ and writing my master thesis and would really appreciate any help I can get!</p>\n\n<p>I have a program that reads a txt file, then does a bunch of calculations, and returns a new txt file. The thing is that I want to run this program for 100+ different input files. Now I have to change the name of the input file in the code, but I would like to have it run for all the input files in my folder by itself. </p>\n\n<p>I am using Visual Studio, but with little C++ experience. </p>\n\n<p>Thanks :) </p>\n"}, {"tags": ["c++", "string", "c++11", "exception"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1525278369, "post_id": 50139325, "comment_id": 87297006, "body": "Once the <code>what</code> function returns (with the pointer) what happens to the local variable <code>out</code> (and the data the returned pointer is pointing to)?"}], "answers": [{"tags": [], "owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "is_accepted": false, "score": 4, "last_activity_date": 1525278327, "creation_date": 1525278327, "answer_id": 50139343, "question_id": 50139325, "link": "https://stackoverflow.com/questions/50139325/corrupted-message-in-custom-exception/50139343#50139343", "title": "Corrupted message in custom exception", "body": "<blockquote>\n  <p>What I'm doing wrong?</p>\n</blockquote>\n\n<p>You are returning a pointer to a temporary object.</p>\n\n<pre><code>   const char* what() const noexcept override\n   {\n      std::string out;\n      out += prefix_;\n      out += message_;\n      return out.c_str();\n   }\n</code></pre>\n\n<p>The pointer returned from <code>out.c_str()</code> is only valid while <code>out</code> is valid.</p>\n\n<p>To fix this, you would need to call <code>.c_str()</code> on a string that has the same lifetime as the exception, such as a member variable.</p>\n"}, {"tags": [], "owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "is_accepted": true, "score": 3, "last_activity_date": 1525278786, "creation_date": 1525278786, "answer_id": 50139474, "question_id": 50139325, "link": "https://stackoverflow.com/questions/50139325/corrupted-message-in-custom-exception/50139474#50139474", "title": "Corrupted message in custom exception", "body": "<p>As Drew said you used local object pointer outside its scope. Possible solution.</p>\n\n<pre><code>class LibraryException : public std::runtime_error\n{\npublic:\n   explicit LibraryException(const std::string&amp; message)\n      : std::runtime_error(\"\"),\n        prefix_(\"LibraryException: \"),\n        message_(message)\n   {\n   }\n\n   const char* what() const noexcept override\n   {\n      buffer_ = prefix_ + message_;\n      return buffer_.c_str();\n   }\n\nprivate:\n   std::string prefix_;\n   std::string message_;\n   mutable std::string buffer_;  // Now buffer will live between what() calls.\n};\n</code></pre>\n\n<p><code>mutable</code> is because of constness of <code>what()</code>. This way you can alterate the value of <code>buffer_</code>.</p>\n"}], "owner": {"reputation": 1773, "user_id": 8805095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4948ba17681551aa212dbc7be9bff40?s=128&d=identicon&r=PG&f=1", "display_name": "Moia", "link": "https://stackoverflow.com/users/8805095/moia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 50139474, "answer_count": 2, "score": 0, "last_activity_date": 1525278786, "creation_date": 1525278260, "question_id": 50139325, "link": "https://stackoverflow.com/questions/50139325/corrupted-message-in-custom-exception", "title": "Corrupted message in custom exception", "body": "<p>I'm trying to implement a custom class exception.</p>\n\n<p>The exception itself works, but I recieve a corrupted output</p>\n\n<pre><code>#include &lt;stdexcept&gt;\n\nnamespace Exception{\n\nclass LibraryException : public std::runtime_error\n{\npublic:\n   explicit LibraryException(const std::string&amp; message)\n      : std::runtime_error(\"\"),\n        prefix_(\"LibraryException: \"),\n        message_(message)\n   {\n   }\n\n   const char* what() const noexcept override\n   {\n      std::string out;\n      out += prefix_;\n      out += message_;\n      return out.c_str();\n   }\n\nprivate:\n   std::string prefix_;\n   std::string message_;\n};\n\nclass BadSizeException : public LibraryException\n{\n\npublic:\n   explicit BadSizeException() : LibraryException(\"Library: Bad Size\\n\")\n   {\n   }\n};\n}\n</code></pre>\n\n<p>Output when I try to raise the exception:</p>\n\n<blockquote>\n  <p>\u00b0\u00e1\u00f3\u00b0\u00e1\u00f3xception: Bad Size</p>\n</blockquote>\n\n<p>What I'm doing wrong? </p>\n"}, {"tags": ["c++", "x11", "bash-on-windows"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1525277810, "post_id": 50139149, "comment_id": 87296702, "body": "The order of libraries on the command line when you build is important. Please edit your question to show the actual commands you use to build (compile and <i>especially</i> link) your program."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 3, "creation_date": 1525277820, "post_id": 50139149, "comment_id": 87296709, "body": "I guess that your compilation is successful, but your linking step is failing. Show it in great details. Actually, provide some <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. And your title is misleading. It seems that you are cross-compiling on Windows (in some <a href=\"https://en.wikipedia.org/wiki/Windows_Subsystem_for_Linux\" rel=\"nofollow noreferrer\">WSL</a> environment) a Linux application using <code>libX11</code>. Apparently you are <i>not</i> compiling on a genuine Linux distribution. So <b>edit your question</b> to improve it a lot and give the <i>exact</i> commands you are trying, and the actual C++ source code involved"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1525280263, "post_id": 50139149, "comment_id": 87297986, "body": "What do you get if you type <code>ls &#47;usr&#47;lib&#47;libX11*</code>?"}, {"owner": {"reputation": 63, "user_id": 9731181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad0b058abb1614239921390e0d4cd5fc?s=128&d=identicon&r=PG&f=1", "display_name": "kylejacobbecker", "link": "https://stackoverflow.com/users/9731181/kylejacobbecker"}, "edited": false, "score": 0, "creation_date": 1525282594, "post_id": 50139149, "comment_id": 87299185, "body": "Galik, I just saw your comment after my edits. I get <code>ls: cannot access &#39;&#47;usr&#47;lib&#47;libX11&#39;: No such file or directory</code>. I assume that X11 was not installed where g++ expected it to be. How would I resolve this issue?"}, {"owner": {"reputation": 23354, "user_id": 113586, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/57c59ffcc95bda165de61b15e9864e65?s=128&d=identicon&r=PG", "display_name": "wRAR", "link": "https://stackoverflow.com/users/113586/wrar"}, "edited": false, "score": 1, "creation_date": 1525282649, "post_id": 50139149, "comment_id": 87299215, "body": "@kylejacobbecker no, you&#39;ve missed the <code>*</code>"}, {"owner": {"reputation": 63, "user_id": 9731181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad0b058abb1614239921390e0d4cd5fc?s=128&d=identicon&r=PG&f=1", "display_name": "kylejacobbecker", "link": "https://stackoverflow.com/users/9731181/kylejacobbecker"}, "reply_to_user": {"reputation": 23354, "user_id": 113586, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/57c59ffcc95bda165de61b15e9864e65?s=128&d=identicon&r=PG", "display_name": "wRAR", "link": "https://stackoverflow.com/users/113586/wrar"}, "edited": false, "score": 0, "creation_date": 1525283082, "post_id": 50139149, "comment_id": 87299445, "body": "@wRAR I got the same output either way. My issue has been resolved. Thank you for your time."}, {"owner": {"reputation": 12675, "user_id": 636009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IIQJV.jpg?s=128&g=1", "display_name": "David Conrad", "link": "https://stackoverflow.com/users/636009/david-conrad"}, "edited": false, "score": 0, "creation_date": 1525284526, "post_id": 50139149, "comment_id": 87300178, "body": "Note: It is possible to run X11 clients on <a href=\"https://stackoverflow.com/questions/tagged/bash-on-windows\">bash-on-windows</a> by running an X server on Windows (or a remote machine) and setting e.g. <code>DISPLAY=:0</code> on the unix side to point to that X server. See: <a href=\"https://www.pcworld.com/article/3055403/windows/windows-10s-bash-shell-can-run-graphical-linux-applications-with-this-trick.html\" rel=\"nofollow noreferrer\">pcworld.com/article/3055403/windows/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 9731181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad0b058abb1614239921390e0d4cd5fc?s=128&d=identicon&r=PG&f=1", "display_name": "kylejacobbecker", "link": "https://stackoverflow.com/users/9731181/kylejacobbecker"}, "edited": false, "score": 1, "creation_date": 1525282859, "post_id": 50140488, "comment_id": 87299321, "body": "Thank you! That worked. I wrote the project on my University&#39;s environment and my Makefile worked just fine. I didn&#39;t anticipate the Makefile being incorrect on my home machine."}], "tags": [], "owner": {"reputation": 23354, "user_id": 113586, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/57c59ffcc95bda165de61b15e9864e65?s=128&d=identicon&r=PG", "display_name": "wRAR", "link": "https://stackoverflow.com/users/113586/wrar"}, "is_accepted": true, "score": 2, "last_activity_date": 1525282565, "creation_date": 1525282565, "answer_id": 50140488, "question_id": 50139149, "link": "https://stackoverflow.com/questions/50139149/how-to-get-a-c-program-that-uses-xwindows-to-build-on-bash-on-ubuntu-on-window/50140488#50140488", "title": "How to get a C++ program that uses XWindows to build on Bash on Ubuntu on Windows?", "body": "<p>In some environments, including Ubuntu, you need to pass <code>-l</code> arguments after the object files that use these libraries.</p>\n\n<p>Also, <code>-l</code> don't belong in <code>CXXFLAGS</code>, they should be in <code>LIBS</code> which goes after <code>${OBJECTS}</code>.</p>\n"}], "owner": {"reputation": 63, "user_id": 9731181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad0b058abb1614239921390e0d4cd5fc?s=128&d=identicon&r=PG&f=1", "display_name": "kylejacobbecker", "link": "https://stackoverflow.com/users/9731181/kylejacobbecker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 0, "accepted_answer_id": 50140488, "answer_count": 1, "score": 1, "last_activity_date": 1525282565, "creation_date": 1525277686, "last_edit_date": 1525282422, "question_id": 50139149, "link": "https://stackoverflow.com/questions/50139149/how-to-get-a-c-program-that-uses-xwindows-to-build-on-bash-on-ubuntu-on-window", "title": "How to get a C++ program that uses XWindows to build on Bash on Ubuntu on Windows?", "body": "<p>I'm trying to get a C++ program that uses XWindows to build on Bash on Ubuntu on Windows. I understand that Bash on Ubuntu on Windows does not officially support graphical Linux applications, but I would like the program to build regardless if possible. I have tried to reduce my issue as much as possible, hopefully I have provided enough information.</p>\n\n<p>First, I installed the libx11-dev package and the packages associated with it using the command:</p>\n\n<pre><code>sudo apt-get install libx11-dev\n</code></pre>\n\n<p>Second, my Makefile is the following:</p>\n\n<pre><code>CXX = g++\nCXXFLAGS = -Wall -MMD -lX11\nEXEC = exe\nOBJECTS = main.o window.o\nDEPENDS = ${OBJECTS:.o=.d}\n\n${EXEC}: ${OBJECTS}\n        ${CXX} ${CXXFLAGS} ${OBJECTS} -o ${EXEC}\n\n-include ${DEPENDS}\n\n.PHONY: clean\n\nclean:\n        rm ${EXEC} ${OBJECTS} ${DEPENDS}\n</code></pre>\n\n<p>Third, the window.h file is the following:</p>\n\n<pre><code>#ifndef __WINDOW_H__\n#define __WINDOW_H__\n\n#include &lt;X11/Xlib.h&gt;\n\nclass Xwindow {\n    Display *d;\n\n  public:\n    Xwindow();\n};\n\n#endif\n</code></pre>\n\n<p>Fourth the window.cc file is the following:</p>\n\n<pre><code>#include \"window.h\"\n\nXwindow::Xwindow() {\n    d = XOpenDisplay(NULL);\n}\n</code></pre>\n\n<p>Finally the main.cc file is the following:</p>\n\n<pre><code>#include \"window.h\"\n\nint main() {\n    Xwindow xw();\n\n    return 0;\n}\n</code></pre>\n\n<p>When I run my Makefile I get the following output:</p>\n\n<pre><code>g++ -Wall -MMD -lX11   -c -o main.o main.cc\ng++ -Wall -MMD -lX11   -c -o window.o window.cc\ng++ -Wall -MMD -lX11 main.o window.o -o exe\nwindow.o: In function `Xwindow::Xwindow()':\nwindow.cc:(.text+0x12): undefined reference to `XOpenDisplay'\ncollect2: error: ld returned 1 exit status\nMakefile:8: recipe for target 'exe' failed\nmake: *** [exe] Error 1\n</code></pre>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["c++", "std", "loadlibrary"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 6, "creation_date": 1525278178, "post_id": 50139091, "comment_id": 87296917, "body": "Requiring a main() function to keep the <i>linker</i> happy is certainly very, very bad.  That indicates that you are actually building an EXE and not a DLL, possibly by hacking the file extension.  Initialization of the CRT is different in a DLL.  Be sure to use the correct project template to get started."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1525278213, "post_id": 50139091, "comment_id": 87296933, "body": "<i>&quot;Note that the main method in the dll..&quot;</i> Unless overridden in the linker commands the DLL entry point should be <code>DllMain</code>.  That you require a <code>main</code> suggests they you have something wrong with the build of the DLL."}, {"owner": {"reputation": 451, "user_id": 6828765, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9076a033d487e81eb8a5db8935117714?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/6828765/anonymous"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1525281618, "post_id": 50139091, "comment_id": 87298663, "body": "After looking a little harder at the compiler&#39;s documentation than I had previously, I realised that @HansPassant and @RichardCritten were right and that I was in fact compiling the latter code as an <code>exe</code>, though actually using the <code>dll</code> file extension. I fixed that, and the imported function worked fine, even with the line uncommented. Thanks!"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1525282038, "post_id": 50139091, "comment_id": 87298903, "body": "Kudos for adding that main() detail, nobody could have guessed what you might have done wrong without it.  This is a keeper, please complete the Q+A yourself with what you learned."}], "answers": [{"tags": [], "owner": {"reputation": 451, "user_id": 6828765, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9076a033d487e81eb8a5db8935117714?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/6828765/anonymous"}, "is_accepted": false, "score": 1, "last_activity_date": 1525283060, "creation_date": 1525283060, "answer_id": 50140619, "question_id": 50139091, "link": "https://stackoverflow.com/questions/50139091/function-pointer-obtained-from-getprocaddress-crashes-the-program-if-it-uses-the/50140619#50140619", "title": "Function pointer obtained from GetProcAddress crashes the program if it uses the stdlib", "body": "<p>As discussed in the comments, it turns out that the compiler's demands for a <code>main</code> function were hints that I was inadvertently making a an <code>exe</code> that decptively used the file extension <code>dll</code>, not an actual <code>dll</code> (because I didn't quite understand the compiler options I was using), which in some way messed up the dynamic loading of that assembly.</p>\n"}], "owner": {"reputation": 451, "user_id": 6828765, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9076a033d487e81eb8a5db8935117714?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/6828765/anonymous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1525283060, "creation_date": 1525277510, "question_id": 50139091, "link": "https://stackoverflow.com/questions/50139091/function-pointer-obtained-from-getprocaddress-crashes-the-program-if-it-uses-the", "title": "Function pointer obtained from GetProcAddress crashes the program if it uses the stdlib", "body": "<p>I'm trying to dynamically load a <code>dll</code> and call a function from it at runtime. I have succeeded in getting a working pointer with <code>GetProcAddress</code>, but the program crashes if the function from the <code>dll</code> uses the <code>stdlib</code>. Here's the code from the executable that loads the <code>dll</code>:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;windows.h&gt;\n\ntypedef int (*myFunc_t)(int);\n\nint main(void) {\n  using namespace std;\n  HINSTANCE dll = LoadLibrary(\"demo.dll\");\n  if (!dll) {\n    cerr &lt;&lt; \"Could not load dll 'demo.dll'\" &lt;&lt; endl;\n    return 1;\n  }\n  myFunc_t myFunc = (myFunc_t) GetProcAddress(dll, \"myFunc\");\n  if (!myFunc) {\n    FreeLibrary(dll);\n    cerr &lt;&lt; \"Could not find function 'myFunc'\" &lt;&lt; endl;\n    return 1;\n  }\n  cout &lt;&lt; \"Successfully loaded myFunc!\" &lt;&lt; endl;\n  cout &lt;&lt; myFunc(3) &lt;&lt; endl;\n  cout &lt;&lt; myFunc(7) &lt;&lt; endl;\n  cout &lt;&lt; myFunc(42) &lt;&lt; endl;\n  cout &lt;&lt; \"Successfully called myFunc!\" &lt;&lt; endl;\n  FreeLibrary(dll);\n  return 0;\n}\n</code></pre>\n\n<p>Here's code for the <code>dll</code> that actually works:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nextern \"C\" {\n\n  __declspec(dllexport) int myFunc(int demo) {\n    //std::cout &lt;&lt; \"myFunc(\" &lt;&lt; demo &lt;&lt; \")\" &lt;&lt; std::endl;\n    return demo * demo;\n  }\n\n}\n\nint main(void) {\n  return 0;\n}\n</code></pre>\n\n<p>(Note that the <code>main</code> method in the <code>dll</code> code is just to appease the compiler)</p>\n\n<p>If I uncomment the line with <code>std::cout</code> however, then the program crashes after the <code>cout &lt;&lt; \"Sucessfully loaded myFunc!\" &lt;&lt; endl;</code> line but before anything else gets printed. I know there must be some way to do what I want; what do I need to change for it to work?</p>\n"}, {"tags": ["c++", "stl", "containers", "multiset"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1525277498, "post_id": 50139028, "comment_id": 87296486, "body": "So when you&#39;ve erased <code>it</code> ... and you do <code>iter != it-&gt;second.end()</code> or even <code>i != iter-&gt;second.end()</code> (less obvious; but still applicable) what do you think will happen, and on what object?"}, {"owner": {"reputation": 85, "user_id": 9551476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2409b1c278a3afec69a6d191bedc9d9c?s=128&d=identicon&r=PG&f=1", "display_name": "K.Krunk", "link": "https://stackoverflow.com/users/9551476/k-krunk"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1525277955, "post_id": 50139028, "comment_id": 87296798, "body": "@UKMonkey ok so what are you`r suggestions? How could i delete element if it has equal tm var with the one the method provides ?"}], "owner": {"reputation": 85, "user_id": 9551476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2409b1c278a3afec69a6d191bedc9d9c?s=128&d=identicon&r=PG&f=1", "display_name": "K.Krunk", "link": "https://stackoverflow.com/users/9551476/k-krunk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 16, "favorite_count": 0, "closed_date": 1525277481, "answer_count": 0, "score": 0, "last_activity_date": 1525277541, "creation_date": 1525277287, "last_edit_date": 1525277541, "question_id": 50139028, "link": "https://stackoverflow.com/questions/50139028/error-when-erasing-element-in-multiset-c", "closed_reason": "Duplicate", "title": "Error when erasing element in multiset c++", "body": "<p>I a class with a member variable, which is</p>\n\n<pre><code>multiset &lt; pair&lt;TrainType, map&lt;string, set&lt;tm&gt;&gt;&gt;&gt; m_oTrainGraphic;\n</code></pre>\n\n<p>TrainType is enum. I am inserting some elements in the <code>m_oTrainGraphic</code> container.I have a method, which takes a parameter of type <code>tm</code>, and the thing i wan't to do is to delete those elements which have element of type <code>tm</code> which is equal to the parameter of the method.Here is the method.</p>\n\n<pre><code>bool DeleteTrain(const tm&amp; time)const\n    {\n        for (auto it = m_oTrainGraphic.begin(); it != m_oTrainGraphic.end(); ++it)\n        {\n\n            for (auto iter = it-&gt;second.begin(); iter != it-&gt;second.end(); ++iter)\n            {\n                for (auto i = iter-&gt;second.begin(); i != iter-&gt;second.end(); ++i)\n                {\n                    if (i-&gt;tm_hour == time.tm_hour\n                        &amp;&amp; i-&gt;tm_min == time.tm_min)\n                    {\n                        m_oTrainGraphic.erase(it);\n                    }\n                }\n\n            }\n        }\n    }\n</code></pre>\n\n<p>The problem is that i get error when trying to erase it.Thanks in advice !</p>\n"}, {"tags": ["c++", "stl", "g++"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1525276691, "post_id": 50138789, "comment_id": 87295993, "body": "One reliable way to prevent a function from being inlined is to take the address of it.  If it&#39;s inlined, it can&#39;t have a distinct address."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1525276995, "post_id": 50138789, "comment_id": 87296180, "body": "@NathanOliver I however agree that lambda and/or std::bind are the workaround :)"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1525278046, "post_id": 50138789, "comment_id": 87296847, "body": "@DrewDormann That is not a reliable way, no."}], "answers": [{"tags": [], "owner": {"reputation": 3812, "user_id": 7697209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0zmCe.png?s=128&g=1", "display_name": "Kostas", "link": "https://stackoverflow.com/users/7697209/kostas"}, "is_accepted": false, "score": 2, "last_activity_date": 1525277426, "creation_date": 1525277426, "answer_id": 50139059, "question_id": 50138789, "link": "https://stackoverflow.com/questions/50138789/stdmem-fnmethod-defined-with-forceinlinethis-not-inlined/50139059#50139059", "title": "std::mem_fn(&amp;method_defined_with_forceinline)(*this) not inlined", "body": "<p>Taking the pointer of a function doesn't allow it to be inlined.</p>\n\n<p>The compiler won't be able to inline it, unless it's known in compile time which function will be called (through the pointer or <code>std::mem_fn</code>), in which case why use <code>std::mem_fn</code> in the first place (when you can call the function)?</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8434768"}, "is_accepted": false, "score": 0, "last_activity_date": 1525358738, "last_edit_date": 1525358738, "creation_date": 1525356718, "answer_id": 50157171, "question_id": 50138789, "link": "https://stackoverflow.com/questions/50138789/stdmem-fnmethod-defined-with-forceinlinethis-not-inlined/50157171#50157171", "title": "std::mem_fn(&amp;method_defined_with_forceinline)(*this) not inlined", "body": "<p>So, std::mem_fn() does not inline for some reason or another. This cannot simply be, because of the address operator was used to determine the address, as calls to normal functions (also specified via the address operator) are inlined. I assume, that this is caused, by the address of the method being stored in some object created by std::mem_fn(). \nThe solution here is to rewrite the function which needs function pointers as arguments to enable it to accept method pointers.\nThe resulting assembler code does not contain any call statements anymore.</p>\n\n<p>Implementing std::mem_fn() by myself did not yield any advantage -- functions were also not inlined.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8434768"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1525358738, "creation_date": 1525276523, "last_edit_date": 1525289221, "question_id": 50138789, "link": "https://stackoverflow.com/questions/50138789/stdmem-fnmethod-defined-with-forceinlinethis-not-inlined", "title": "std::mem_fn(&amp;method_defined_with_forceinline)(*this) not inlined", "body": "<p>Is this caused by the implementation of <code>mem_fn()</code> being defined without <code>__forceinline/inline/__attribute__((always_inline))</code>?\nIs it possible to work around this, e.g. using ones own implementation of mem_fn?</p>\n"}, {"tags": ["c#", "c++", "dll", "interop", "dllimport"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1525277648, "post_id": 50138550, "comment_id": 87296584, "body": "We can&#39;t see the mistake in the info you provided.  Only way to get ahead is provide more details.  Enable unmanaged debugging and show us the stack trace you see on the first-chance exception notification."}, {"owner": {"reputation": 3415, "user_id": 1198474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pUCYm.jpg?s=128&g=1", "display_name": "salocinx", "link": "https://stackoverflow.com/users/1198474/salocinx"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1525278137, "post_id": 50138550, "comment_id": 87296892, "body": "@Hans Passant : Ok I will enable unmanaged debugging and report back. I posted my complete testing code on my initial question here: <a href=\"https://stackoverflow.com/questions/50103424/how-to-wrap-c-dll-in-c-sharp-with-pointers-as-parameters/50139253#50139253\" title=\"how to wrap c dll in c sharp with pointers as parameters\">stackoverflow.com/questions/50103424/&hellip;</a>"}, {"owner": {"reputation": 3415, "user_id": 1198474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pUCYm.jpg?s=128&g=1", "display_name": "salocinx", "link": "https://stackoverflow.com/users/1198474/salocinx"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1525279931, "post_id": 50138550, "comment_id": 87297804, "body": "Ok I enabled native unmanaged debugging and update the original post with the complete test code and stack-trace."}, {"owner": {"reputation": 8950, "user_id": 1630041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2626d681f792d02ffa74545c3764391?s=128&d=identicon&r=PG", "display_name": "Hcorg", "link": "https://stackoverflow.com/users/1630041/hcorg"}, "edited": false, "score": 0, "creation_date": 1525451661, "post_id": 50138550, "comment_id": 87376157, "body": "DeviceInfo does not have Pack=1 attribute set (it should not need that, but it&#39;s worth a try). Or check how C++ compiler packs this structure and add proper pack there (maybe pack=4?)"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1525452045, "post_id": 50138550, "comment_id": 87376324, "body": "There is another question hidden in there, resembles &quot;how to use unmanaged debugging to diagnose a crash&quot;.  Essential steps are to enable the symbol server so you get readable stack traces and to force the debugger to stop when the original unmanaged exception is thrown.   In VS2017 you use Debug &gt; WIndows &gt; Exceptions Settings, tick the checkbox for &quot;Win32 Exceptions&quot;.  Update the question with the new stack trace you now see."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1525452321, "post_id": 50138550, "comment_id": 87376433, "body": "Fwiw, a null pointer crash in unmanaged code is frequently caused by passing an invalid argument to a function.  Be sure to check that 0 is a valid index, you need the return value of CreateDeviceList() to verify.  And hopefully it doesn&#39;t start indexing at 1."}, {"owner": {"reputation": 3415, "user_id": 1198474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pUCYm.jpg?s=128&g=1", "display_name": "salocinx", "link": "https://stackoverflow.com/users/1198474/salocinx"}, "edited": false, "score": 0, "creation_date": 1525469259, "post_id": 50138550, "comment_id": 87383988, "body": "I unexpectedly had to borrow the controller and the laser device to someone for a party this weekend. But I will get it back on Sunday evening. I will then post the stack trace immediately. Yes, I am 100% sure, that 0 is a valid index for all functions. It&#39;s described like that in the very brief manual of the SDK (I will put a link to these docs in the question). Also, when calling the search for devices function, the device index starts with 0 too. I will report back on Sunday evening with the stack traces."}, {"owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "edited": false, "score": 0, "creation_date": 1525515683, "post_id": 50138550, "comment_id": 87393366, "body": "I would also try assigning a full length string to <code>pDevInfo.type = &quot;&quot;;</code>, so a string with 32 spaces in it and see if it helps in any ways"}, {"owner": {"reputation": 1395, "user_id": 6256451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5271ddbb0e7b464e61ea8a0ae2eaa68e?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/6256451/marcel"}, "edited": false, "score": 0, "creation_date": 1525727646, "post_id": 50138550, "comment_id": 87462515, "body": "Exceptions from unmanaged code do not always hit the nail on the head. Sometimes another, older exception is shown which has been properly handled earlier somewhere else and has absolutely nothing to do with the origin of the error. So I guess that the problem is somewhere in the C++ code."}, {"owner": {"reputation": 3415, "user_id": 1198474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pUCYm.jpg?s=128&g=1", "display_name": "salocinx", "link": "https://stackoverflow.com/users/1198474/salocinx"}, "edited": false, "score": 0, "creation_date": 1525732260, "post_id": 50138550, "comment_id": 87464178, "body": "I got the laser device and controller back. I did change the debugging options as suggested without any difference (please compare to the update section in the original post). More ideas how to debug? Moreover, <code>SearchForNETDevices(DWORD* pNumOfFoundDevs)</code> and <code>CreateDeviceList(DWORD* pDeviceCount)</code> both functions ask for a DWORD pointer as parameter. Currently I am using <code>ref UInt32</code>. What about using <code>UIntPtr</code> instead?"}, {"owner": {"reputation": 3415, "user_id": 1198474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pUCYm.jpg?s=128&g=1", "display_name": "salocinx", "link": "https://stackoverflow.com/users/1198474/salocinx"}, "reply_to_user": {"reputation": 1395, "user_id": 6256451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5271ddbb0e7b464e61ea8a0ae2eaa68e?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/6256451/marcel"}, "edited": false, "score": 0, "creation_date": 1525732640, "post_id": 50138550, "comment_id": 87464284, "body": "@Marcel : The C++ code is most probably fine, since my C++ test code runs fine. I can call every function defined in the header file without any problems."}, {"owner": {"reputation": 3415, "user_id": 1198474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pUCYm.jpg?s=128&g=1", "display_name": "salocinx", "link": "https://stackoverflow.com/users/1198474/salocinx"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1525735286, "post_id": 50138550, "comment_id": 87464956, "body": "@HansPassant : The return values of the three previously called methods are all <code>0</code>; this probably means success? The results I get from the passed pointers are also correct."}, {"owner": {"reputation": 195, "user_id": 2748767, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5072ddda211246a91423c85a7b6ee378?s=128&d=identicon&r=PG&f=1", "display_name": "M312V", "link": "https://stackoverflow.com/users/2748767/m312v"}, "edited": false, "score": 0, "creation_date": 1525737571, "post_id": 50138550, "comment_id": 87465497, "body": "@salocinx Aren&#39;t the chars in string in C# and C++ different in size? If you are sending 32 bytes from C#, you should increase the size in C++ to 64 and use wide char."}, {"owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "reply_to_user": {"reputation": 1395, "user_id": 6256451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5271ddbb0e7b464e61ea8a0ae2eaa68e?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/6256451/marcel"}, "edited": false, "score": 0, "creation_date": 1525744196, "post_id": 50138550, "comment_id": 87466835, "body": "@Marcel: Line 73 is <code>const UInt32 numOfPts = 600;</code> which makes the faulting line <code>Console.WriteLine(&quot;  - type: &quot; + pDevInfo.type);</code> which is much more reasonable for throwing a managed NullReferenceException. OP gave the wrong line but it didn&#39;t stop me."}, {"owner": {"reputation": 3415, "user_id": 1198474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pUCYm.jpg?s=128&g=1", "display_name": "salocinx", "link": "https://stackoverflow.com/users/1198474/salocinx"}, "reply_to_user": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "edited": false, "score": 1, "creation_date": 1525769693, "post_id": 50138550, "comment_id": 87476501, "body": "@Joshua : I am sorry about this mistake. You&#39;re right, the line number was wrong, the program stops at line 64 (I likely changed the code after I had copied the exception description). But the error indeed occurs on the line int <code>r4 = GetDeviceInfo(0, ref pDevInfo);</code>."}, {"owner": {"reputation": 3415, "user_id": 1198474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pUCYm.jpg?s=128&g=1", "display_name": "salocinx", "link": "https://stackoverflow.com/users/1198474/salocinx"}, "reply_to_user": {"reputation": 195, "user_id": 2748767, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5072ddda211246a91423c85a7b6ee378?s=128&d=identicon&r=PG&f=1", "display_name": "M312V", "link": "https://stackoverflow.com/users/2748767/m312v"}, "edited": false, "score": 0, "creation_date": 1525770216, "post_id": 50138550, "comment_id": 87476850, "body": "@M312V : Yes I read about different <code>char</code> type lengths between C++ and C#. I will now dive deeper into this topic."}, {"owner": {"reputation": 8777, "user_id": 3102264, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/G69VV.jpg?s=128&g=1", "display_name": "mpromonet", "link": "https://stackoverflow.com/users/3102264/mpromonet"}, "edited": false, "score": 0, "creation_date": 1525963464, "post_id": 50138550, "comment_id": 87567733, "body": "The error is probably a consequence of some corruption that occurs before the call to GetDeviceInfo method. Could you try to reduce the code sample to only the GetDeviceInfo call and add its implementation ?"}, {"owner": {"reputation": 3415, "user_id": 1198474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pUCYm.jpg?s=128&g=1", "display_name": "salocinx", "link": "https://stackoverflow.com/users/1198474/salocinx"}, "reply_to_user": {"reputation": 8777, "user_id": 3102264, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/G69VV.jpg?s=128&g=1", "display_name": "mpromonet", "link": "https://stackoverflow.com/users/3102264/mpromonet"}, "edited": false, "score": 0, "creation_date": 1525983437, "post_id": 50138550, "comment_id": 87578319, "body": "@mpromonet : Please check &#39;Update 2 + 3&#39; in my original post. Thank you!"}, {"owner": {"reputation": 8777, "user_id": 3102264, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/G69VV.jpg?s=128&g=1", "display_name": "mpromonet", "link": "https://stackoverflow.com/users/3102264/mpromonet"}, "edited": false, "score": 0, "creation_date": 1525989088, "post_id": 50138550, "comment_id": 87580553, "body": "@slocinx : I made a test similar and it works without problems in 32bits and in 64bits. Maybe some corruption in opendll, CreateDeviceList, GetDeviceInfo... continuing to reduce the code you will find the problem."}, {"owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "edited": false, "score": 0, "creation_date": 1526084855, "post_id": 50138550, "comment_id": 87620110, "body": "I&#39;m voting to close this question as off-topic because this requires understanding of an obscure and now known to be bugged DLL for which OP doesn&#39;t have source either."}, {"owner": {"reputation": 3415, "user_id": 1198474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pUCYm.jpg?s=128&g=1", "display_name": "salocinx", "link": "https://stackoverflow.com/users/1198474/salocinx"}, "edited": false, "score": 0, "creation_date": 1527159320, "post_id": 50138550, "comment_id": 88027083, "body": "SDK update from the manufacturer finally solved the stack corruption. I updated the initial question with &quot;Final Update&quot; section. Thank you all!"}], "answers": [{"comments": [{"owner": {"reputation": 3415, "user_id": 1198474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pUCYm.jpg?s=128&g=1", "display_name": "salocinx", "link": "https://stackoverflow.com/users/1198474/salocinx"}, "edited": false, "score": 0, "creation_date": 1525770124, "post_id": 50224609, "comment_id": 87476793, "body": "There&#39;s no additional information about how the <code>char[]</code> is encoded. Please have a look at the linked PDF file in the OP. It says that <code>GetDeviceIndentifier()</code> uses <code>2B Unicode text</code>, BUT there&#39;s no hint how the <code>char[]</code> in the struct <code>DeviceInfo</code> is encoded. Nevertheless, perhaps you&#39;re on the right way and I will do some testing now, according to your idea. Thanks so far!"}], "tags": [], "owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "is_accepted": false, "score": -1, "last_activity_date": 1525743775, "creation_date": 1525743775, "answer_id": 50224609, "question_id": 50138550, "link": "https://stackoverflow.com/questions/50138550/how-to-call-a-c-function-with-a-struct-pointer-parameter-from-c/50224609#50224609", "title": "How to call a C++ function with a struct pointer parameter from C#?", "body": "<p>A correct incantation is</p>\n\n<pre><code>string UnpackFixed(byte[] data, System.Text.Encoding encoding)\n{\n    int i;\n    for (i = 0; i &lt; data.Length; ++i)\n        if(data[i] == (byte)0)\n            break;\n    return encoding.GetString(data, i);\n}\n\n[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]\nstruct DeviceInfo\n{\n    uint32 maxScanrate;\n    uint32 minScanrate;\n    uint32 maxNumOfPoints;\n    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 32)]\n    byte type[];\n};\n\nDeviceInfo pDevInfo = new DeviceInfo();\npDevInfo.type = new byte[32];\nint r4 = GetDeviceInfo(0, ref pDevInfo);\nConsole.WriteLine(\"  - type: \" + UnpackFixed(pDevInfo.type));\n</code></pre>\n\n<p>I'm certain there is a way to do this with <code>string</code> but all the old obvious ways of doing it tended to pass the string to native code and get nothing back. Here, the exercise is to get a fixed-length byte string back. If you do solve it for string you will end up using <code>System.Text.Encoding.Default</code> which may or may not be right and there's no way to override it.</p>\n\n<p><code>System.Text.Encoding.ASCII</code> is plausibly wrong, in which case you need to deal with encodings. <code>System.Text.Encoding.Default</code> might work where <code>ASCII</code> didn't, in which case you should consider if you have weird failure modes on multi-byte character encodings. It's not clear if the device always uses the same encoding as the OS or if it assumes a fixed encoding (in which case you should specify the encoding).</p>\n"}, {"comments": [{"owner": {"reputation": 3415, "user_id": 1198474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pUCYm.jpg?s=128&g=1", "display_name": "salocinx", "link": "https://stackoverflow.com/users/1198474/salocinx"}, "edited": false, "score": 0, "creation_date": 1525983151, "post_id": 50278227, "comment_id": 87578191, "body": "I don&#39;t know who and why your answer has/was downvoted. I now tried your approach and I get the first three fields back (<code>maxScanrate</code>, <code>minScanrate</code> and <code>maxNumOfPoints</code>) successfully :-) It&#39;s a step into the correct direction... :-) But I finally get this exception: <code>An unhandled exception of type &#39;System.ExecutionEngineException&#39; occurred in Unknown Module.</code>"}, {"owner": {"reputation": 3415, "user_id": 1198474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pUCYm.jpg?s=128&g=1", "display_name": "salocinx", "link": "https://stackoverflow.com/users/1198474/salocinx"}, "edited": false, "score": 0, "creation_date": 1525983155, "post_id": 50278227, "comment_id": 87578193, "body": "I also tried to use <code>string devtype = Marshal.PtrToStringUni(pDevInfo.type);</code> to unmarshal the IntPtr but then getting <code>Exception thrown: &#39;System.AccessViolationException&#39; in mscorlib.dll Additional information: Attempted to read or write protected memory. This is often an indication that other memory is corrupt.</code>."}, {"owner": {"reputation": 4665, "user_id": 1447389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iQhtr.jpg?s=128&g=1", "display_name": "Soleil", "link": "https://stackoverflow.com/users/1447389/soleil"}, "reply_to_user": {"reputation": 3415, "user_id": 1198474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pUCYm.jpg?s=128&g=1", "display_name": "salocinx", "link": "https://stackoverflow.com/users/1198474/salocinx"}, "edited": false, "score": 0, "creation_date": 1525983474, "post_id": 50278227, "comment_id": 87578339, "body": "Did you try the <code>IntPtr type</code> and the <code>unsafe void GetType</code> method ? (we should add nullptr check, but let&#39;s assume first that the <code>char*</code> was not disposed at the time)"}, {"owner": {"reputation": 4665, "user_id": 1447389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iQhtr.jpg?s=128&g=1", "display_name": "Soleil", "link": "https://stackoverflow.com/users/1447389/soleil"}, "reply_to_user": {"reputation": 3415, "user_id": 1198474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pUCYm.jpg?s=128&g=1", "display_name": "salocinx", "link": "https://stackoverflow.com/users/1198474/salocinx"}, "edited": false, "score": 0, "creation_date": 1525983615, "post_id": 50278227, "comment_id": 87578393, "body": "Which .NET version are you using ?"}, {"owner": {"reputation": 3415, "user_id": 1198474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pUCYm.jpg?s=128&g=1", "display_name": "salocinx", "link": "https://stackoverflow.com/users/1198474/salocinx"}, "edited": false, "score": 0, "creation_date": 1525989859, "post_id": 50278227, "comment_id": 87580818, "body": "I am using .NET 4.6. But the type in <code>DeviceInfo</code> is defined as <code>char[]</code> and not <code>char*</code>. Doesn&#39;t that make a difference?"}, {"owner": {"reputation": 3415, "user_id": 1198474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pUCYm.jpg?s=128&g=1", "display_name": "salocinx", "link": "https://stackoverflow.com/users/1198474/salocinx"}, "edited": false, "score": 0, "creation_date": 1525990062, "post_id": 50278227, "comment_id": 87580888, "body": "I did experiment with <code>Marshal.AllocHGlobal</code>, but <code>unsafe void GetType(IntPtr strPtr) =&gt; return new string((char*)strPtr);</code> does not compile. Is this some kind of functional representation?"}, {"owner": {"reputation": 4665, "user_id": 1447389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iQhtr.jpg?s=128&g=1", "display_name": "Soleil", "link": "https://stackoverflow.com/users/1447389/soleil"}, "reply_to_user": {"reputation": 3415, "user_id": 1198474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pUCYm.jpg?s=128&g=1", "display_name": "salocinx", "link": "https://stackoverflow.com/users/1198474/salocinx"}, "edited": false, "score": 0, "creation_date": 1525991132, "post_id": 50278227, "comment_id": 87581228, "body": "You need to <i>Allow unsafe code</i> in C# project properties / Build. It&#39;s just the fastest way to get through pinvoke <code>char*</code> or <code>char[]</code>. No difference here. About difference: <a href=\"https://stackoverflow.com/questions/1704407/what-is-the-difference-between-char-s-and-char-s\" title=\"what is the difference between char s and char s\">stackoverflow.com/questions/1704407/&hellip;</a>"}, {"owner": {"reputation": 4665, "user_id": 1447389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iQhtr.jpg?s=128&g=1", "display_name": "Soleil", "link": "https://stackoverflow.com/users/1447389/soleil"}, "reply_to_user": {"reputation": 3415, "user_id": 1198474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pUCYm.jpg?s=128&g=1", "display_name": "salocinx", "link": "https://stackoverflow.com/users/1198474/salocinx"}, "edited": false, "score": 0, "creation_date": 1526037664, "post_id": 50278227, "comment_id": 87598413, "body": "@salocinx Even though you had Peter Wishart hack, can you please try the unsafe method ? Thanks"}, {"owner": {"reputation": 3415, "user_id": 1198474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pUCYm.jpg?s=128&g=1", "display_name": "salocinx", "link": "https://stackoverflow.com/users/1198474/salocinx"}, "edited": false, "score": 0, "creation_date": 1526046130, "post_id": 50278227, "comment_id": 87603648, "body": "Sure! <code>Unsafe code allowed</code> ticked in project properties. I then already did try and now once again. Unfortunately I get <code>An unhandled exception of type &#39;System.ExecutionEngineException&#39; occurred in Unknown Module.</code> with your solution. Any ideas what to change?"}, {"owner": {"reputation": 4665, "user_id": 1447389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iQhtr.jpg?s=128&g=1", "display_name": "Soleil", "link": "https://stackoverflow.com/users/1447389/soleil"}, "reply_to_user": {"reputation": 3415, "user_id": 1198474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pUCYm.jpg?s=128&g=1", "display_name": "salocinx", "link": "https://stackoverflow.com/users/1198474/salocinx"}, "edited": false, "score": 0, "creation_date": 1526050684, "post_id": 50278227, "comment_id": 87606746, "body": "@salocinx It&#39;s a problem happening in CLR. I think it&#39;s because the storage of <code>char[]</code> initialized with <code>new</code> (c++) is not continuous unlike a <code>char*</code> initialized with <code>malloc</code> (c). Peter Wishart&#39;s hack is dealing with this problem. Even though it&#39;s giving the result you want, it&#39;s not very much satisfaying. I&#39;ll think about it."}, {"owner": {"reputation": 3415, "user_id": 1198474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pUCYm.jpg?s=128&g=1", "display_name": "salocinx", "link": "https://stackoverflow.com/users/1198474/salocinx"}, "edited": false, "score": 0, "creation_date": 1526054965, "post_id": 50278227, "comment_id": 87609365, "body": "You\u2018re right. The other solution does only work when running from Visual Studio. When running the executable, it does crash too... I believe the problem is within the C++ DLL. I will contact the manufacturer again."}, {"owner": {"reputation": 4665, "user_id": 1447389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iQhtr.jpg?s=128&g=1", "display_name": "Soleil", "link": "https://stackoverflow.com/users/1447389/soleil"}, "reply_to_user": {"reputation": 3415, "user_id": 1198474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pUCYm.jpg?s=128&g=1", "display_name": "salocinx", "link": "https://stackoverflow.com/users/1198474/salocinx"}, "edited": false, "score": 0, "creation_date": 1526064090, "post_id": 50278227, "comment_id": 87613627, "body": "@salocinx &quot;the other solution&quot; = ?"}], "tags": [], "owner": {"reputation": 4665, "user_id": 1447389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iQhtr.jpg?s=128&g=1", "display_name": "Soleil", "link": "https://stackoverflow.com/users/1447389/soleil"}, "is_accepted": false, "score": -1, "last_activity_date": 1525972734, "creation_date": 1525972734, "answer_id": 50278227, "question_id": 50138550, "link": "https://stackoverflow.com/questions/50138550/how-to-call-a-c-function-with-a-struct-pointer-parameter-from-c/50278227#50278227", "title": "How to call a C++ function with a struct pointer parameter from C#?", "body": "<p>I think you got a problem with <code>public string type</code> in <code>DeviceInfo</code>. If you needed to pass a <code>string</code> to the native part, that would be fine, but I understand that you're getting a <code>char*</code> from (allocated by) the native part, and in that case you're losing the address of <code>type</code> that is managed (and that cannot be known).</p>\n\n<p>The right way to do this would be to have:</p>\n\n<pre><code>[StructLayout(LayoutKind.Sequential, CharSet=CharSet.Ansi)]\npublic struct DeviceInfo {\n    public UInt32 maxScanrate;\n    public UInt32 minScanrate;\n    public UInt32 maxNumOfPoints;\n    public IntPtr type; // HERE: char*\n}\n</code></pre>\n\n<p>and then process <code>type</code> in the managed part, for instance like this:</p>\n\n<pre><code>unsafe void GetType(IntPtr strPtr) =&gt; return new string((char*)strPtr);\n</code></pre>\n\n<p>If the native part doesn't do the allocation you'll need to use <a href=\"https://msdn.microsoft.com/en-us/library/5cyb68cy(v=vs.110).aspx\" rel=\"nofollow noreferrer\">Marshal.AllocHGlobal</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 3415, "user_id": 1198474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pUCYm.jpg?s=128&g=1", "display_name": "salocinx", "link": "https://stackoverflow.com/users/1198474/salocinx"}, "edited": false, "score": 0, "creation_date": 1526031257, "post_id": 50282259, "comment_id": 87594587, "body": "Great! Wow, your solution finally works fine! The test program delivers all needed information and the process exits by returning <code>0</code> :-) I will check this as correct answer and award the bounty to you!"}, {"owner": {"reputation": 3415, "user_id": 1198474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pUCYm.jpg?s=128&g=1", "display_name": "salocinx", "link": "https://stackoverflow.com/users/1198474/salocinx"}, "edited": false, "score": 0, "creation_date": 1526055134, "post_id": 50282259, "comment_id": 87609453, "body": "I was happy too early... When running the compiled executable, it does crash. I suspect that there\u2018s something wrong within the closed C++ DLL that scatters the heap. I will contact de manufacturer again."}, {"owner": {"reputation": 9117, "user_id": 909199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8df8811a42e909801c22fcfa01f4c36d?s=128&d=identicon&r=PG", "display_name": "Peter Wishart", "link": "https://stackoverflow.com/users/909199/peter-wishart"}, "reply_to_user": {"reputation": 3415, "user_id": 1198474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pUCYm.jpg?s=128&g=1", "display_name": "salocinx", "link": "https://stackoverflow.com/users/1198474/salocinx"}, "edited": false, "score": 0, "creation_date": 1526072427, "post_id": 50282259, "comment_id": 87617204, "body": "Sorry - that&#39;s not entirely unexpected. Hopefully the mfr. can take your test code and debug using their source. If not you could always update the question with more details (i.e. what&#39;s the crash, does it crash at all while debugger is attached, does it crash running unattached when <code>GetDeviceInfo</code> is not called)."}], "tags": [], "owner": {"reputation": 9117, "user_id": 909199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8df8811a42e909801c22fcfa01f4c36d?s=128&d=identicon&r=PG", "display_name": "Peter Wishart", "link": "https://stackoverflow.com/users/909199/peter-wishart"}, "is_accepted": true, "score": 1, "last_activity_date": 1526032196, "last_edit_date": 1526032196, "creation_date": 1525990563, "answer_id": 50282259, "question_id": 50138550, "link": "https://stackoverflow.com/questions/50138550/how-to-call-a-c-function-with-a-struct-pointer-parameter-from-c/50282259#50282259", "title": "How to call a C++ function with a struct pointer parameter from C#?", "body": "<p><code>[MarshalAs(UnmanagedType.ByValTStr, SizeConst = 32)]</code> declares that the field is stored a <code>char[32]</code> array as in the header, i.e. space for 31 characters and a null terminator.</p>\n\n<p>Marshalling this to a string shouldn't be a problem, nothing that the dll writes to the array should be able to cause a <code>NullReferenceException</code>.</p>\n\n<p>I can compile a stub dll that loads fine using your C# code and can send back ANSI strings, with addition of <code>typedef byte...</code> and a stub method body e.g.:</p>\n\n<pre><code>int GetDeviceInfo(DWORD deviceIndex, DeviceInfo* pDeviceInfo)\n{\n    std::string testString = \"test string thats quite loooooooong\"; \n    pDeviceInfo-&gt;maxScanrate = 1234;\n    pDeviceInfo-&gt;minScanrate = 12345;\n    pDeviceInfo-&gt;maxNumOfPoints = 100 + deviceIndex;\n    sprintf_s(pDeviceInfo-&gt;type, \"%.31s\", testString.c_str());\n    return 0;\n}\n</code></pre>\n\n<p>This works for me with VS2017 C++ and .Net 4.6.1.</p>\n\n<p>What happens if you change the C# declaration to this:</p>\n\n<pre><code>    [StructLayout(LayoutKind.Sequential, Pack = 1)]\n    public struct DeviceInfo\n    {\n        public UInt32 maxScanrate;\n        public UInt32 minScanrate;\n        public UInt32 maxNumOfPoints;\n        public UInt64 deviceTypePart1;\n        public UInt64 deviceTypePart2;\n        public UInt64 deviceTypePart3;\n        public UInt64 deviceTypePart4;\n\n        public string GetDeviceType()\n        {\n            if (Marshal.SizeOf(this) != 44) throw new InvalidOperationException();\n            List&lt;byte&gt; bytes = new List&lt;byte&gt;();\n            bytes.AddRange(BitConverter.GetBytes(deviceTypePart1));\n            bytes.AddRange(BitConverter.GetBytes(deviceTypePart2));\n            bytes.AddRange(BitConverter.GetBytes(deviceTypePart3));\n            bytes.AddRange(BitConverter.GetBytes(deviceTypePart4));\n            return Encoding.GetEncoding(1252).GetString(bytes.ToArray());\n        }\n    }\n</code></pre>\n\n<p>[Edit]</p>\n\n<p>I've no idea why hand cranking the marshaling fixes this - be sure to 'load test' in case there are heap/stack corruption bugs still lurking.</p>\n\n<p>In your old code, does <code>Marshal.SizeOf</code> return something other than 44?</p>\n"}], "owner": {"reputation": 3415, "user_id": 1198474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pUCYm.jpg?s=128&g=1", "display_name": "salocinx", "link": "https://stackoverflow.com/users/1198474/salocinx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1065, "favorite_count": 1, "accepted_answer_id": 50282259, "answer_count": 3, "score": 9, "last_activity_date": 1527159246, "creation_date": 1525275706, "last_edit_date": 1527159246, "question_id": 50138550, "link": "https://stackoverflow.com/questions/50138550/how-to-call-a-c-function-with-a-struct-pointer-parameter-from-c", "title": "How to call a C++ function with a struct pointer parameter from C#?", "body": "<p>Okay one more function that it's not yet working. I am basically calling some C++ functions from C# by using P/Invoke. The problematic function does query a show laser device for some device related information, such as minimal and maximal scan rates and maximal points per second.</p>\n\n<p>The problematic function is:</p>\n\n<pre><code>int GetDeviceInfo(DWORD deviceIndex, DeviceInfo* pDeviceInfo);\n</code></pre>\n\n<p>Here's the C++ header file that I was given. <a href=\"http://nicolas.baumgardt.ch/moncha/MonchaSDK.pdf\" rel=\"nofollow noreferrer\">That's a link to the very brief C++ SDK description</a>. I don't have the sources to rebuild the DLL file and I also don't have the *.pdb file (the manufacturer can not supply it):</p>\n\n<pre><code>#pragma once\n\n#ifdef STCL_DEVICES_DLL\n#define STCL_DEVICES_EXPORT extern \"C\" _declspec(dllexport) \n#else\n#define STCL_DEVICES_EXPORT extern \"C\" _declspec(dllimport)\n#endif\n\nenum SD_ERR\n{\n    SD_ERR_OK = 0,\n    SD_ERR_FAIL,\n    SD_ERR_DLL_NOT_OPEN,\n    SD_ERR_INVALID_DEVICE,  //device with such index doesn't exist\n    SD_ERR_FRAME_NOT_SENT,\n};\n\n#pragma pack (1)\nstruct LaserPoint\n{\n    WORD x;\n    WORD y;\n    byte colors[6];\n};\n\nstruct DeviceInfo\n{\n    DWORD maxScanrate;\n    DWORD minScanrate;\n    DWORD maxNumOfPoints;\n    char type[32];\n};\n\n//////////////////////////////////////////////////////////////////////////\n///Must be called when starting to use\n//////////////////////////////////////////////////////////////////////////\nSTCL_DEVICES_EXPORT int OpenDll();\n\n//////////////////////////////////////////////////////////////////////////\n///All devices will be closed and all resources deleted\n//////////////////////////////////////////////////////////////////////////\nSTCL_DEVICES_EXPORT void CloseDll();\n\n//////////////////////////////////////////////////////////////////////////\n///Search for .NET devices (Moncha.NET now)\n///Must be called after OpenDll, but before CreateDeviceList!\n///In pNumOfFoundDevs can return number of found devices (optional)\n//////////////////////////////////////////////////////////////////////////\nSTCL_DEVICES_EXPORT int SearchForNETDevices(DWORD* pNumOfFoundDevs);\n\n//////////////////////////////////////////////////////////////////////////\n///Creates new list of devices - previous devices will be closed\n///pDeviceCount returns device count\n//////////////////////////////////////////////////////////////////////////\nSTCL_DEVICES_EXPORT int CreateDeviceList(DWORD* pDeviceCount);\n\n//////////////////////////////////////////////////////////////////////////\n///Returns unique device name\n///deviceIndex is zero based device index\n//////////////////////////////////////////////////////////////////////////\nSTCL_DEVICES_EXPORT int GetDeviceIdentifier(DWORD deviceIndex, WCHAR** ppDeviceName);\n\n//////////////////////////////////////////////////////////////////////////\n///Send frame to device, frame is in following format:\n///WORD x\n///WORD y\n///byte colors[6]\n///so it's 10B point (=&gt; dataSize must be numOfPoints * 10)\n///scanrate is in Points Per Second (pps)\n//////////////////////////////////////////////////////////////////////////\nSTCL_DEVICES_EXPORT int SendFrame(DWORD deviceIndex, byte* pData, DWORD numOfPoints, DWORD scanrate);\n\n//////////////////////////////////////////////////////////////////////////\n///Returns true in pCanSend if device is ready to send next frame\n//////////////////////////////////////////////////////////////////////////\nSTCL_DEVICES_EXPORT int CanSendNextFrame(DWORD deviceIndex, bool* pCanSend);\n\n//////////////////////////////////////////////////////////////////////////\n///Send DMX if device supports it - pDMX must be (!!!) 512B long\n//////////////////////////////////////////////////////////////////////////\nSTCL_DEVICES_EXPORT int SendDMX(DWORD deviceIndex, byte* pDMX);\n\n//////////////////////////////////////////////////////////////////////////\n///Send blank point to position x, y\n//////////////////////////////////////////////////////////////////////////\nSTCL_DEVICES_EXPORT int SendBlank(DWORD deviceIndex, WORD x, WORD y);\n\n//////////////////////////////////////////////////////////////////////////\n///Get device info\n//////////////////////////////////////////////////////////////////////////\nSTCL_DEVICES_EXPORT int GetDeviceInfo(DWORD deviceIndex, DeviceInfo* pDeviceInfo);\n</code></pre>\n\n<p>This is the complete C# test code I am currently using. All the functions work fine, except for <code>GetDeviceInfo(...)</code>:</p>\n\n<pre><code>using System;\nusing System.Threading;\nusing System.Runtime.InteropServices;\n\nnamespace MonchaTestSDK {\n\n    public class Program {\n\n        [DllImport(\"..\\\\..\\\\dll\\\\StclDevices.dll\", CallingConvention = CallingConvention.Cdecl)]                                    // OK\n        public static extern int OpenDll();\n        [DllImport(\"..\\\\..\\\\dll\\\\StclDevices.dll\", CallingConvention = CallingConvention.Cdecl)]                                    // OK\n        public static extern void CloseDll();\n        [DllImport(\"..\\\\..\\\\dll\\\\StclDevices.dll\", CallingConvention = CallingConvention.Cdecl)]                                    // OK\n        public static extern int SearchForNETDevices(ref UInt32 pNumOfFoundDevs);\n        [DllImport(\"..\\\\..\\\\dll\\\\StclDevices.dll\", CallingConvention = CallingConvention.Cdecl)]                                    // OK\n        public static extern int CreateDeviceList(ref UInt32 pDeviceCount);\n        [DllImport(\"..\\\\..\\\\dll\\\\StclDevices.dll\", CallingConvention = CallingConvention.Cdecl)]                                    // OK\n        public static extern int GetDeviceIdentifier(UInt32 deviceIndex, out IntPtr ppDeviceName);\n        [DllImport(\"..\\\\..\\\\dll\\\\StclDevices.dll\", CallingConvention = CallingConvention.Cdecl)]                                    // OK\n        public static extern int SendFrame(UInt32 deviceIndex, LaserPoint[] pData, UInt32 numOfPoints, UInt32 scanrate);\n        [DllImport(\"..\\\\..\\\\dll\\\\StclDevices.dll\", CallingConvention = CallingConvention.Cdecl)]                                    // OK\n        public static extern int CanSendNextFrame(UInt32 deviceIndex, ref bool pCanSend);\n        [DllImport(\"..\\\\..\\\\dll\\\\StclDevices.dll\", CallingConvention = CallingConvention.Cdecl)]                                    // OK\n        public static extern int SendBlank(UInt32 deviceIndex, UInt16 x, UInt16 y);\n        [DllImport(\"..\\\\..\\\\dll\\\\StclDevices.dll\", CallingConvention = CallingConvention.Cdecl)]                                    // FAILS\n        public static extern int GetDeviceInfo(UInt32 deviceIndex, ref DeviceInfo pDeviceInfo);\n\n        [StructLayout(LayoutKind.Sequential, Pack=1)]\n        public struct LaserPoint {\n            public UInt16 x;\n            public UInt16 y;\n            [MarshalAs(UnmanagedType.ByValArray, SizeConst = 6)]\n            public byte[] colors;\n        }\n\n        [StructLayout(LayoutKind.Sequential, CharSet=CharSet.Ansi)]\n        public struct DeviceInfo {\n            public UInt32 maxScanrate;\n            public UInt32 minScanrate;\n            public UInt32 maxNumOfPoints;\n            [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 32)]\n            public string deviceType;\n        }\n\n        public static void Main(string[] args) {\n            Console.WriteLine(\"Moncha SDK\\n\");\n\n            OpenDll();\n            Console.WriteLine(\"StclDevices.dll is open.\");\n\n            UInt32 deviceCount1 = 0;\n            int r1 = SearchForNETDevices(ref deviceCount1);\n            Console.WriteLine(\"SearchForNETDevices() [\" + r1+\"]: \"+deviceCount1);\n\n            UInt32 deviceCount2 = 0;\n            int r2 = CreateDeviceList(ref deviceCount2);\n            Console.WriteLine(\"CreateDeviceList() [\"+r2+\"]: \"+deviceCount2);\n\n            IntPtr pString;\n            int r3 = GetDeviceIdentifier(0, out pString);\n            string devname = Marshal.PtrToStringUni(pString);\n            Console.WriteLine(\"GetDeviceIdentifier() [\"+r3+\"]: \"+devname);\n\n            DeviceInfo pDevInfo = new DeviceInfo();\n            pDevInfo.type = \"\";\n            int r4 = GetDeviceInfo(0, ref pDevInfo);\n            Console.WriteLine(\"GetDeviceInfo() [\"+r4+\"]: \");\n            Console.WriteLine(\"  - min: \"+pDevInfo.minScanrate);\n            Console.WriteLine(\"  - max: \" + pDevInfo.maxScanrate);\n            Console.WriteLine(\"  - points: \" + pDevInfo.maxNumOfPoints);\n            Console.WriteLine(\"  - type: \" + pDevInfo.deviceType);\n\n            Thread.Sleep(5000);\n            CloseDll();\n        }\n\n    }\n}\n</code></pre>\n\n<p>On <s>line 73</s> line 64 (<a href=\"http://nicolas.baumgardt.ch/moncha/vs2015_cpp_debug.jpg\" rel=\"nofollow noreferrer\">cp. screenshot</a>): </p>\n\n<pre><code>int r4 = GetDeviceInfo(0, ref pDevInfo); \n</code></pre>\n\n<p>I receive the following error:</p>\n\n<pre><code>An unhandled exception of type 'System.NullReferenceException' occured in MonchaTestSDK.exe\nAdditional information: Object reference not set to an instance of an object\n</code></pre>\n\n<p>This is the stack trace (can't provide better stack trace without the DLL's *.pdb file I guess):</p>\n\n<blockquote>\n  <p>MonchaTestSDK.exe!MonchaTestSDK.Program.Main(string[] args) Line 73 + 0xa bytes C#\n      mscoreei.dll!73a8d91b()<br>\n      [Frames below may be incorrect and/or missing, no symbols loaded for mscoreei.dll]<br>\n      mscoree.dll!73cae879()<br>\n      mscoree.dll!73cb4df8()<br>\n      kernel32.dll!74a08654()<br>\n      ntdll.dll!77354b17()<br>\n      ntdll.dll!77354ae7()</p>\n</blockquote>\n\n<p>Some disassembly:</p>\n\n<pre><code>            int r4 = GetDeviceInfo(0, ref pDevInfo);\n05210749  int         3  \n0521074A  push        ebp  \n0521074B  cwde  \n0521074C  xor         ecx,ecx  \n0521074E  call        0521011C  \n05210753  int         3  \n05210754  test        dword ptr [eax-1],edx  \n05210757  ?? ?? \n05210758  dec         dword ptr [ebx-0AF7Bh]  \n0521075E  dec         dword ptr [ecx-6F466BBBh]\n</code></pre>\n\n<p><strong>Any idea what I am doing wrong here?</strong></p>\n\n<hr>\n\n<p><strong>Update 1: Suggested debug options:</strong></p>\n\n<p>As suggested in the comments, I tried to enable native/unmanaged code debugging:</p>\n\n<blockquote>\n  <ol>\n  <li><p>Debug > Windows > Exceptions Settings > \"Win32 Exceptions\" checkbox ticked</p></li>\n  <li><p>Project > Properties > Debug tab > \"Enable unmanaged code debugging\" checkbox ticked</p></li>\n  </ol>\n</blockquote>\n\n<p>I still don't get any meaningful exception stack. The manufacturer can't supply me the DLL's *.pdb file.</p>\n\n<p>Here's an image showing the debugger when stopped at the problematic line (debug settings are also shown):</p>\n\n<p><a href=\"https://i.stack.imgur.com/xhJAo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xhJAo.png\" alt=\"Here&#39;s an image showing the debugger when stopped at the problematic line (debug settings are also shown)\"></a></p>\n\n<hr>\n\n<p><strong>Update 2: Minimal Required Code (cp. comment of <em>mpromonet</em>)</strong></p>\n\n<p>This is the minimal required code to be able to call <code>GetDeviceInfo(...)</code>:</p>\n\n<pre><code>public static void Main(string[] args) {\n    OpenDll();\n    UInt32 deviceCount = 0;\n    CreateDeviceList(ref deviceCount);\n    DeviceInfo pDevInfo = new DeviceInfo();\n    GetDeviceInfo(0, ref pDevInfo);            // error occurs on this line\n    CloseDll();\n}\n</code></pre>\n\n<p>This leads to the exact same error as before:</p>\n\n<pre><code>An unhandled exception of type 'System.NullReferenceException' occured in MonchaTestSDK.exe\nAdditional information: Object reference not set to an instance of an object\n</code></pre>\n\n<p>Removing the call <code>GetDeviceInfo(0, ref pDevInfo);</code> from the code above allows the program to exit without any error.</p>\n\n<hr>\n\n<p><strong>Update 3: Removing <code>char[] deviceType</code> from <code>DeviceInfo</code> struct completely</strong></p>\n\n<p>I removed <code>char[] deviceType</code> from the struct defintion:</p>\n\n<pre><code>[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi, Pack = 1)]\npublic struct DeviceInfo {\n    public UInt32 maxScanrate;\n    public UInt32 minScanrate;\n    public UInt32 maxNumOfPoints;\n    //[MarshalAs(UnmanagedType.ByValTStr, SizeConst = 32)]\n    //public string deviceType;\n}\n</code></pre>\n\n<p>When I run my C# test code now, I successfully receive <code>maxScanrate</code>, <code>minScanrate</code> and <code>maxNumOfPoints</code> back from the C++ DLL. Here's the corresponding console output:</p>\n\n<pre><code>GetDeviceInfo() [0]:\n   - min: 1000\n   - max: 40000\n   - points: 3000\n</code></pre>\n\n<p>Finally ending in the following error message:</p>\n\n<blockquote>\n  <p>Exception thrown at 0x67623A68 (clr.dll) in MonchaTestSDK.exe:\n  0xC0000005: Access violation reading location 0x00000000.</p>\n</blockquote>\n\n<hr>\n\n<p><strong>Final Update</strong></p>\n\n<p>I finally got an updated DLL from the manufacturer. There was indeed a bug within the SDK that caused the stack to get corrupted. So basically the following solution now works fine without any issues:</p>\n\n<pre><code>[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi, Pack = 1)]\npublic struct DeviceInfo {\n\n    public UInt32 maxScanrate;\n    public UInt32 minScanrate;\n    public UInt32 maxNumOfPoints;\n\n    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 32)]\n    public string deviceType;\n\n}\n\nprivate void queryDeviceProperties(UInt32 index) {\n    HwDeviceInfo pDevInfo = new HwDeviceInfo();\n    int code = GetDeviceInfo(index, ref pDevInfo);\n    if(code==0) {\n        Console.WriteLine(pDevInfo.minScanrate);\n        Console.WriteLine(pDevInfo.maxScanrate);\n        Console.WriteLine(pDevInfo.maxNumOfPoints);\n        Console.WriteLine(pDevInfo.type);\n    } else {\n        Console.WriteLine(\"Error Code: \"+code);\n    }\n}\n</code></pre>\n\n<p><strong>Thank you all for the great support!</strong></p>\n"}, {"tags": ["c++", "linux", "sockets", "server"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 2, "creation_date": 1525275222, "post_id": 50138346, "comment_id": 87295051, "body": "This is <i>operating system</i> specific. Standard C++ does not know about sockets or terminals. So <b>edit your question</b> to tell more, at least give the appropriate tag for your OS"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1525275957, "post_id": 50138346, "comment_id": 87295508, "body": "Is your application GUI, console or a driver?"}, {"owner": {"reputation": 1, "user_id": 6419984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81147a7e46378dbf54af4918178608e6?s=128&d=identicon&r=PG&f=1", "display_name": "Newbie700", "link": "https://stackoverflow.com/users/6419984/newbie700"}, "edited": false, "score": 0, "creation_date": 1525276079, "post_id": 50138346, "comment_id": 87295588, "body": "It&#39;s a console application."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1525276923, "post_id": 50138346, "comment_id": 87296126, "body": "<i>&quot;It&#39;s a console application&quot;</i>: on what platform/operating system?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1525276983, "post_id": 50138346, "comment_id": 87296167, "body": "Write your own client and use something like <code>ncurses</code> ."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1525277187, "post_id": 50138346, "comment_id": 87296311, "body": "Depeding on just how real time you want to get, Here&#39;s a useful search term: &quot;Nagle&#39;s algorithm&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1525277482, "last_edit_date": 1525277482, "creation_date": 1525276959, "answer_id": 50138938, "question_id": 50138346, "link": "https://stackoverflow.com/questions/50138346/reading-input-on-c-server-in-real-time/50138938#50138938", "title": "Reading input on c++ server in real time", "body": "<p>C++ standard library has no API for keyboard input. There is only API for streams, which do require pressing enter (or EOT).</p>\n\n<p>Implementing direct keyboard input on POSIX shell is quite tricky, and I would instead recommend using an existing library.</p>\n\n<p>In particular, an implementation of the curses library will have a <a href=\"https://linux.die.net/man/3/getch\" rel=\"nofollow noreferrer\"><code>getch</code></a> function that you can poll in a loop.</p>\n"}], "owner": {"reputation": 1, "user_id": 6419984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81147a7e46378dbf54af4918178608e6?s=128&d=identicon&r=PG&f=1", "display_name": "Newbie700", "link": "https://stackoverflow.com/users/6419984/newbie700"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "closed_date": 1525277015, "answer_count": 1, "score": -2, "last_activity_date": 1525277482, "creation_date": 1525275028, "last_edit_date": 1525275538, "question_id": 50138346, "link": "https://stackoverflow.com/questions/50138346/reading-input-on-c-server-in-real-time", "closed_reason": "Needs more focus", "title": "Reading input on c++ server in real time", "body": "<p>I want to write a server in C++, I would connect to this server via Netcat or Telnet. Server would send a menu to a client and client would navigate using the arrows to choose an option. My question is: how can I get char-messages in real time (not after clicking Enter) from client?</p>\n"}, {"tags": ["c++", "video-streaming", "gstreamer"], "comments": [{"owner": {"reputation": 4392, "user_id": 5215131, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2C8rv6T-3m8/AAAAAAAAAAI/AAAAAAAAAP0/ALwPPtWwxac/photo.jpg?sz=128", "display_name": "Florian Zwoch", "link": "https://stackoverflow.com/users/5215131/florian-zwoch"}, "edited": false, "score": 1, "creation_date": 1525286134, "post_id": 50138234, "comment_id": 87300931, "body": "RTSP is a protocol to establish a UDP connection (usually). But if you don&#39;t require to follow a standard protocol GStreamer offers its own tcp client/server elements for such use case."}, {"owner": {"reputation": 359, "user_id": 1001500, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/eCNDe.png?s=128&g=1", "display_name": "gfunk", "link": "https://stackoverflow.com/users/1001500/gfunk"}, "edited": false, "score": 0, "creation_date": 1526048933, "post_id": 50138234, "comment_id": 87605493, "body": "You can send the stream data (RTP) over the TCP connection used for RTSP (interleaved) via <code>rtsp-client-sink protocols=tcp location=rtsp:&#47;&#47;...</code> or <code>rtsp-client-sink  location=rtspt:&#47;&#47;...</code> (notice the extra &#39;t&#39;)."}], "answers": [{"tags": [], "owner": {"reputation": 634, "user_id": 2628841, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/05ogH.jpg?s=128&g=1", "display_name": "Kaustav", "link": "https://stackoverflow.com/users/2628841/kaustav"}, "is_accepted": false, "score": 0, "last_activity_date": 1526319748, "creation_date": 1526319748, "answer_id": 50336113, "question_id": 50138234, "link": "https://stackoverflow.com/questions/50138234/receive-gstreamer-stream-on-remote-server-and-save-to-disk/50336113#50336113", "title": "Receive Gstreamer stream on remote server, and save to disk", "body": "<p>You can use <code>gst-rtsp-server</code> to send RTSP stream from the server side. You can use the code from this <a href=\"https://github.com/GStreamer/gst-rtsp-server/blob/master/examples/test-launch.c\" rel=\"nofollow noreferrer\">link</a> for server.</p>\n\n<p>On the client side, you can use the below pipeline to save the stream into a file. Here I am using mp4mux, but you can use any muxer you want.</p>\n\n<pre><code>gst-launch-1.0 rtspsrc location=rtsp_url drop-on-latency=true use-pipeline-clock=true do-retransmission=false latency=0 ! rtph264depay ! h264parse ! mp4mux ! filesink location=media.mp4\n</code></pre>\n"}], "owner": {"reputation": 1403, "user_id": 1072039, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/mFWFk.jpg?s=128&g=1", "display_name": "logidelic", "link": "https://stackoverflow.com/users/1072039/logidelic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 874, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1526319748, "creation_date": 1525274647, "question_id": 50138234, "link": "https://stackoverflow.com/questions/50138234/receive-gstreamer-stream-on-remote-server-and-save-to-disk", "title": "Receive Gstreamer stream on remote server, and save to disk", "body": "<p>I have experience using Gstreamer to encode &amp; save video locally, but I am struggling to figure out how to properly have a client computer encode &amp; stream video to a remote sever, which will then save the video in the cloud.</p>\n\n<p>Don't know anything about client's network, so UDP could potentially be blocked. I assume that RTSP is the way to go?</p>\n\n<p>I am aware of <code>gst-rtsp-server</code> and came across <a href=\"https://github.com/GStreamer/gst-rtsp-server/blob/master/examples/test-record.c\" rel=\"nofollow noreferrer\">test-record</a>, but how does one get at the already-encoded stream data sent from the client so that it may be saved to disk? Is this a good approach anyway?</p>\n"}, {"tags": ["c++", "qt", "qt5", "qgraphicspixmapitem"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1525281700, "post_id": 50138172, "comment_id": 87298720, "body": "Why do not you use collidingItems to detect the collision?"}, {"owner": {"reputation": 27, "user_id": 7527673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/777a36f1f872372b26e39876ec411aca?s=128&d=identicon&r=PG&f=1", "display_name": "Grak", "link": "https://stackoverflow.com/users/7527673/grak"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1525282140, "post_id": 50138172, "comment_id": 87298950, "body": "I tried looking for the way to properly use it, but it would not compile for me in any of the ways I tried. I don&#39;t know if it was because of QT updating and changing the way it&#39;s used or what, but I gave up on it initially. <code>QList&lt;QGraphicsItem *&gt; list = collidingItems() ;</code> does not compile because &quot;collidingItems()&quot; is not defined, and I was not able to get any working arguments for <code>QList&lt;QGraphicsItem *&gt; list = QGraphicsItem::collidingItems() ;</code>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1525282442, "post_id": 50138172, "comment_id": 87299110, "body": "It seems to me that you are not using it correctly, you could provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your project, it is very difficult to find the error if you provide pieces of code that can not be reproduced."}, {"owner": {"reputation": 27, "user_id": 7527673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/777a36f1f872372b26e39876ec411aca?s=128&d=identicon&r=PG&f=1", "display_name": "Grak", "link": "https://stackoverflow.com/users/7527673/grak"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1525282606, "post_id": 50138172, "comment_id": 87299191, "body": "I lack the skills to reproduce it from scratch, but I can put a more detailed description of what I&#39;m trying and what compilation errors I&#39;m facing"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1525282804, "post_id": 50138172, "comment_id": 87299296, "body": "If you share your project it would be easier to help, do you understand that creating a project consumes too much time and many discourage us?"}, {"owner": {"reputation": 27, "user_id": 7527673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/777a36f1f872372b26e39876ec411aca?s=128&d=identicon&r=PG&f=1", "display_name": "Grak", "link": "https://stackoverflow.com/users/7527673/grak"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1525283517, "post_id": 50138172, "comment_id": 87299679, "body": "Yes, though I am 99% sure that the problem is that I&#39;m just being a dumb ass at something regarding this. I edited the original post to include a bit of what I tried regarding the actual Qt method. And I can share the project with no problems, I just wanted to try figuring it out in a &quot;neat way&quot;"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1525283660, "post_id": 50138172, "comment_id": 87299768, "body": "If you can not provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> then you will never be ordered, you tell me when you share the link to your project. :D"}, {"owner": {"reputation": 27, "user_id": 7527673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/777a36f1f872372b26e39876ec411aca?s=128&d=identicon&r=PG&f=1", "display_name": "Grak", "link": "https://stackoverflow.com/users/7527673/grak"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1525284284, "post_id": 50138172, "comment_id": 87300066, "body": "Added the link to the project now. I&#39;m not avoiding the Minimal, Complete and Verifiable example on purpose, but because I&#39;ve not been able to figure out how to either smoothly pour all the code into a single main when it&#39;s spread as wide as this or, how I should pick only the relevant parts while still maintaining the (non)functionality"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1525285951, "post_id": 50138172, "comment_id": 87300849, "body": "you could explain the dynamics of the game, I was thinking is that you press a square and a bubble should appear below and go to the point where you press, and eliminate the circles that are on the way, am I right ?, but instead of I see that it removes a circle without touching it and goes to a different route to the point that it presses."}, {"owner": {"reputation": 27, "user_id": 7527673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/777a36f1f872372b26e39876ec411aca?s=128&d=identicon&r=PG&f=1", "display_name": "Grak", "link": "https://stackoverflow.com/users/7527673/grak"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1525286169, "post_id": 50138172, "comment_id": 87300947, "body": "I&#39;ll add this to the main post as well, but I&#39;ll explain it here as well:  The game creates the bubbles randomly in the acceptable are. The player&#39;s job is to shoot the bubbles with water drops. The water drops are launched from the middle bottom part of the game screen. The grids are only used for debugging, and will later on be gone, but it makes visualizing the areas easier.   The bubbles are destroyed by shooting the water drop at them, but the water drop disappears when it hits a bubble or the upper boundary of the game. The water drop shoots to the direction of a mouse click."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1525286301, "post_id": 50138172, "comment_id": 87301008, "body": "Okay, I understand, but the part of shooting in the direction of the point you press does not work correctly."}, {"owner": {"reputation": 27, "user_id": 7527673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/777a36f1f872372b26e39876ec411aca?s=128&d=identicon&r=PG&f=1", "display_name": "Grak", "link": "https://stackoverflow.com/users/7527673/grak"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1525286500, "post_id": 50138172, "comment_id": 87301116, "body": "Um, I&#39;ll reupload the file. I commented a part of the code in charge of it when I was trying to swap into Qt&#39;s own collision method.  Edit: if you change the ``` graphicalGameBoard_.animateSplash(graphicalGameBoard_.width(&zwnj;&#8203;)/2, graphicalGameBoard_.height(), endX, 600-endY);``` into ``` graphicalGameBoard_.animateSplash(graphicalGameBoard_.width(&zwnj;&#8203;)/2, graphicalGameBoard_.height(), xDestination, yDestination);```, it should work, but I re-uploaded the project anyway"}, {"owner": {"reputation": 27, "user_id": 7527673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/777a36f1f872372b26e39876ec411aca?s=128&d=identicon&r=PG&f=1", "display_name": "Grak", "link": "https://stackoverflow.com/users/7527673/grak"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1525294493, "post_id": 50138172, "comment_id": 87305002, "body": "I was able to make the non-ricochet collision detection &quot;work&quot;, but it&#39;s pretty ugly and does not use QT&#39;s inbuilt methodology, making the ricochet functionality a lot harder to implement (plus the non-ricochet functionality has some border cases where it detects it incorrectly)"}], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1525329648, "creation_date": 1525329648, "answer_id": 50148469, "question_id": 50138172, "link": "https://stackoverflow.com/questions/50138172/qt-collision-detection-between-2-qgraphicspixmapitems/50148469#50148469", "title": "QT collision detection between 2 QGraphicsPixmapItems", "body": "<p>In this answer I am going to give you some recommendations that you use to implement the solution:</p>\n\n<ul>\n<li><p>Avoid using the following instruction, use the signals that is one of the most powerful elements of Qt and that the event loop does the work.</p>\n\n<pre><code>while (animations_.state() == QAbstractAnimation::Running)\n{\n    QCoreApplication::processEvents(QEventLoop::AllEvents);\n}\n</code></pre></li>\n<li><p><code>QGraphicsScene</code> works with coordinates that support the floating point, so the coordinates of the scene are handled with <code>QPointF</code>.</p></li>\n<li><p>Using the above, if you are going to send point information use <code>QPointF</code> instead of <code>int, int</code> in the signals.</p></li>\n<li><p>Use the methods that Qt provides, for example the following:</p>\n\n<pre><code>if (0 &lt;= clickPosition.x() and clickPosition.x() &lt;= GRID_SIDE*WIDTH and\n    0 &lt;= clickPosition.y() and clickPosition.y() &lt;= GRID_SIDE*HEIGHT)\n</code></pre></li>\n</ul>\n\n<p>It can be reduced to the following:</p>\n\n<pre><code>if(sceneRect().contains(event-&gt;scenePos()))\n</code></pre>\n\n<p>The advantage of that implementation is that it is more readable</p>\n\n<p>I do not understand why you can not implement collidingItems, maybe it's the configuration of your .pro, </p>\n\n<p>Use the following to add the gui module, core and widgets</p>\n\n<pre><code>QT       += core gui\n\ngreaterThan(QT_MAJOR_VERSION, 4): QT += widgets\n</code></pre>\n\n<p>Also to implement the animation use my previous <a href=\"https://stackoverflow.com/questions/44327990/using-an-existing-q-property-to-animate-qgraphicsitem-inheriting-qobject\">answer</a></p>\n\n<p>The complete and functional code can be found at the following <a href=\"https://github.com/eyllanesc/stackoverflow/tree/master/50138172-frozen_bubbles\" rel=\"nofollow noreferrer\">link</a>.</p>\n"}], "owner": {"reputation": 27, "user_id": 7527673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/777a36f1f872372b26e39876ec411aca?s=128&d=identicon&r=PG&f=1", "display_name": "Grak", "link": "https://stackoverflow.com/users/7527673/grak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 0, "accepted_answer_id": 50148469, "answer_count": 1, "score": 1, "last_activity_date": 1543293227, "creation_date": 1525274492, "last_edit_date": 1543293227, "question_id": 50138172, "link": "https://stackoverflow.com/questions/50138172/qt-collision-detection-between-2-qgraphicspixmapitems", "title": "QT collision detection between 2 QGraphicsPixmapItems", "body": "<p><a href=\"http://www.mediafire.com/file/s04rstzd72a52ye/frozen_bubbles.zip\" rel=\"nofollow noreferrer\">Link to project</a>\nThe interesting parts should be in gameengine.cpp's \"launchSplash\" -function and splashanimation.cpp </p>\n\n<p>The game creates the bubbles randomly in the acceptable are. The player's job is to shoot the bubbles with water drops. The water drops are launched from the middle bottom part of the game screen. The grids are only used for debugging, and will later on be gone, but it makes visualizing the areas easier. </p>\n\n<p>The bubbles are destroyed by shooting the water drop at them, but the water drop disappears when it hits a bubble or the upper boundary of the game. The water drop shoots to the direction of a mouse click.</p>\n\n<p>I'm trying to create a collision detection for a basic bubble shooter game, but I'm not sure how I can detect the collision in a neat way. </p>\n\n<p>The game board looks something like this <a href=\"https://i.stack.imgur.com/DWUTg.png\" rel=\"nofollow noreferrer\">game board</a>, the water drops are shot from the middle bottom part of the screen to the direction of the cursor. </p>\n\n<p>Eventually I'll have the water drop ricochet from the walls, but at the moment I'm contempt with figuring out how to detect collisions in the first place. </p>\n\n<p>The game board is 500x600 units (width x height), so the point the water drop is shot at is (250, 600). </p>\n\n<p>When the water drop is shot, I use </p>\n\n<pre><code>void GameEngine::launchSplash(int clickX, int clickY){\n// &lt;my long method of calculating the coordinates for the water drop's path&gt;\n\n    graphicalGameBoard_.animateSplash(graphicalGameBoard_.width()/2, graphicalGameBoard_.height(), xDestination, yDestination);\n}\n</code></pre>\n\n<p>where <code>xDestination</code> and <code>yDestionation</code> are the place the water drop will end up if it travels unhindered. The water drop will either end up at x=0 / x=500 and/or y=0/y=600, but I don't think that's relevant.</p>\n\n<p>The bubbles are added to the game board with </p>\n\n<pre><code>board_.clear();\n\nfor(int y = 0; y &lt; HEIGHT; ++y)\n{\n    std::vector&lt; std::shared_ptr&lt;Bubble&gt; &gt; row;\n    for(int x = 0; x &lt; WIDTH; ++x)\n    {\n        std::shared_ptr&lt;Bubble&gt; newBubble = nullptr;\n\n        // There will be bubbles only in the top 3/4 of the board only in the middle\n        // (i.e. not in the first two and last two columns).\n        if (y &lt; HEIGHT*3/4 &amp;&amp; x &gt; 1 &amp;&amp; x &lt; WIDTH-2)\n        {\n            // Generate random numbers using the enumearation type defined in\n            // file bubble.hh. The value COLOR_COUNT is used to represent no bubble.\n            std::uniform_int_distribution&lt;int&gt; distribution(RED,COLOR_COUNT);\n\n            // If you want no empty squares, change the initialization to:\n            // std::uniform_int_distribution&lt;int&gt; distribution(RED,BLUE);\n\n            Color color = static_cast&lt;Color&gt;(distribution(randomEngine_));\n            if(color != COLOR_COUNT) {\n                newBubble = std::make_shared&lt;Bubble&gt;(x, y, color);\n            }\n        }\n        row.push_back(newBubble);\n    }\n    board_.push_back(row);\n}\n</code></pre>\n\n<p>in the <code>gameengine.cpp</code> which draws the board and the water drop being shot at the bubbles.</p>\n\n<p>The water drops are drawn using </p>\n\n<pre><code>SplashAnimation::SplashAnimation(GameBoard* scene, QPointF startPoint, QPointF endPoint):\n    QVariantAnimation(0),\n    scene_(scene),\n    item_()\n{\n    scene_-&gt;addItem(&amp;item_);\n\n    // The animation runs for the given duration and moves the splash\n    // smoothly from startpoint to endpoint.\n    setDuration(2000);\n    setKeyValueAt(0, QPointF(startPoint));\n    setKeyValueAt(1, QPointF(endPoint));\n}\n</code></pre>\n\n<p>I figured there are two ways to do this: either the inbuilt QT Collision detection or doing a separate calculation. I was not able to work with QT Collision and my attempts at detecting the collision manually did not really work out too well. </p>\n\n<p>I already have a function for detecting bubble objects at certain cells, but it's in column/row instead of raw coordinates (500x600). </p>\n\n<pre><code>std::shared_ptr&lt;Bubble&gt; GameEngine::bubbleAt(int x, int y) const\n{\n    if (0 &lt;= x and x &lt; WIDTH and 0 &lt;= y and y &lt; HEIGHT){\n        return board_.at(y).at(x);\n    }\n    else{\n        return nullptr;\n    }\n}\n</code></pre>\n\n<p>Edit: Currently I'm trying to work on something like this, but I'm afraid it's going to be a bit heavy for the game since it iterates so much (or not?):</p>\n\n<pre><code>for (int i = 0; i&lt;600;++i)\n{\n     xfract = (xDestination+250.0)/600.0;\n     yfract = (600.0-yDestination)/600.0;\n     xStep = xfract*i;\n     yStep = yfract*i;\n     if (xStep &gt;= 50){\n        thisX = xStep/50-5;\n     }else{\n         thisX=5;\n     }\n     if (yStep &gt;= 50){\n         thisY = 11-yStep/50 + 1;\n     }else{\n         thisY = 11;\n     }\n     thisX = abs(thisX);\n    if (bubbleAt(thisX, thisY)!=nullptr){\n        endX = xfract*i;\n        endY = yfract*i;\n        i = 600;\n       std::cout &lt;&lt; \"collision at x: \"&lt;&lt;thisX&lt;&lt; \" y: \"&lt;&lt;thisY&lt;&lt;std::endl;\n       std::cout &lt;&lt; \"collision at x: \"&lt;&lt;xStep&lt;&lt; \" y: \"&lt;&lt;yStep&lt;&lt;std::endl;\n       std::cout &lt;&lt; graphicalGameBoard_.width() &lt;&lt; \" \" &lt;&lt; graphicalGameBoard_.height()&lt;&lt;std::endl;\n       removeBubble(thisX, thisY);\n       graphicalGameBoard_.removeBubble(thisX, thisY);\n       endY = 600-endY;\n    }\n}\n\n\ngraphicalGameBoard_.animateSplash(graphicalGameBoard_.width()/2, graphicalGameBoard_.height(), endX, endY);\n</code></pre>\n\n<p>I'm trying to split the steps into small fractions and check if the current step has a bubble in it until the water drop reaches the end or finds a bubble. </p>\n\n<p><strong>This works</strong> on my only one of my sides in terms of calculating, but the animation is off the mark and right side (x>250) collision detection doesn't work at all for some reason (it hits seemingly random bubbles at impossible locations on the right side). </p>\n\n<p>Edit^2: Here are things I've tried in order to work with the actual collision detection of QT:</p>\n\n<p>Within splashanimation.cpp, where the water drop is drawn using </p>\n\n<pre><code>SplashAnimation::SplashAnimation(GameBoard* scene, QPointF startPoint, QPointF endPoint):\n    QVariantAnimation(0),\n    scene_(scene),\n    item_()\n{\n    scene_-&gt;addItem(&amp;item_);\n\n\n    // The animation runs for the given duration and moves the splash\n    // smoothly from startpoint to endpoint.\n    setDuration(2000);\n    setKeyValueAt(0, QPointF(startPoint));\n    setKeyValueAt(1, QPointF(endPoint));   \n}\n\nSplashAnimation::~SplashAnimation()\n{\n    scene_-&gt;removeItem(&amp;item_);\n}\n\nvoid SplashAnimation::updateCurrentValue(QVariant const&amp; value)\n{\n    item_.setPos(value.toPointF());\n}\n</code></pre>\n\n<p>where scene is QGraphicsScene, and the parent of <code>this</code> contains the bubbles. </p>\n\n<p>I've tried this on both the gameboard.cpp (which is parent for bubbles and the animation) and splash.cpp (which animates the water drop), but both give me the same compilation errors. </p>\n\n<pre><code>    QGraphicsItem::QGraphicsItem();\n</code></pre>\n\n<p>gives    </p>\n\n<p>error: cannot call constructor ?QGraphicsItem::QGraphicsItem? directly [-fpermissive]\n     QGraphicsItem::QGraphicsItem();\n                                  ^</p>\n\n<pre><code>QList&lt;QGraphicsItem *&gt; list = collidingItems() ;\n</code></pre>\n\n<p>gives <code>error: ?collidingItems? was not declared in this scope\n     QList&lt;QGraphicsItem *&gt; list = collidingItems() ;\n                                                  ^</code></p>\n\n<pre><code>    QList&lt;QGraphicsItem *&gt; list = QGraphicsItem::collidingItems() ;\n</code></pre>\n\n<p>gives <code>error: cannot call member function ?QList&lt;QGraphicsItem*&gt; QGraphicsItem::collidingItems(Qt::ItemSelectionMode) const? without object\n     QList&lt;QGraphicsItem *&gt; list = QGraphicsItem::collidingItems() ;\n                                                                 ^</code></p>\n\n<p>I also tried adding arguments, but nothing I had the mind to try worked any better. </p>\n"}, {"tags": ["c++", "xcode", "xcode8"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1525276043, "post_id": 50138116, "comment_id": 87295565, "body": "I suggest you use the term &quot;resources&quot; and search the internet for &quot;XCode c++ resources&quot;."}, {"owner": {"reputation": 259, "user_id": 7886227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hec3U.jpg?s=128&g=1", "display_name": "Dr t", "link": "https://stackoverflow.com/users/7886227/dr-t"}, "edited": false, "score": 1, "creation_date": 1525277233, "post_id": 50138116, "comment_id": 87296332, "body": "This is a question often asked...  Have a look at this:  <a href=\"https://stackoverflow.com/questions/26409759/how-to-reference-to-images-and-other-objects-in-xcode-and-where-to-place-them-ph\" title=\"how to reference to images and other objects in xcode and where to place them ph\">stackoverflow.com/questions/26409759/&hellip;</a>"}], "owner": {"reputation": 95, "user_id": 7453623, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/78f55e88ff78e156d517da63df04788a?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/7453623/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "closed_date": 1525277312, "answer_count": 0, "score": 1, "last_activity_date": 1525274332, "creation_date": 1525274332, "question_id": 50138116, "link": "https://stackoverflow.com/questions/50138116/where-to-put-assets-in-xcode", "closed_reason": "Duplicate", "title": "Where to put assets in xcode?", "body": "<p>I have an Xcode 8 C++ project. Where do I put all the images and music so that I can then reference them directly like this: \"image_folder//image_1.jpg\"</p>\n"}, {"tags": ["c++", "gpio"], "comments": [{"owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "edited": false, "score": 1, "creation_date": 1525274084, "post_id": 50137977, "comment_id": 87294354, "body": "Consider supplying the code."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1525276110, "post_id": 50137977, "comment_id": 87295606, "body": "Have you searched the internet for &quot;C++ BeagleBone Black read gpio&quot;?  What were your results?"}, {"owner": {"reputation": 1, "user_id": 9731021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d12be3677dbfbe2f31307418728355c2?s=128&d=identicon&r=PG&f=1", "display_name": "DiN", "link": "https://stackoverflow.com/users/9731021/din"}, "edited": false, "score": 0, "creation_date": 1525285093, "post_id": 50137977, "comment_id": 87300439, "body": "Nothing came up."}, {"owner": {"reputation": 24802, "user_id": 232918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5897762377de1c8ffb9a98673262e91?s=128&d=identicon&r=PG", "display_name": "doron", "link": "https://stackoverflow.com/users/232918/doron"}, "edited": false, "score": 0, "creation_date": 1525296948, "post_id": 50137977, "comment_id": 87306011, "body": "What Operating System?"}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1525297962, "post_id": 50137977, "comment_id": 87306422, "body": "see the various comments in this google group discussion, <a href=\"https://groups.google.com/forum/#!topic/beagleboard/Mef65w6PZ7s\" rel=\"nofollow noreferrer\">Beaglebone Black libraries for GPIO access in C/C++?</a> and see also <a href=\"https://stackoverflow.com/questions/34261512/gpio-on-beaglebone-black\">GPIO on Beaglebone Black</a>."}, {"owner": {"reputation": 1, "user_id": 9731021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d12be3677dbfbe2f31307418728355c2?s=128&d=identicon&r=PG&f=1", "display_name": "DiN", "link": "https://stackoverflow.com/users/9731021/din"}, "edited": false, "score": 0, "creation_date": 1525444970, "post_id": 50137977, "comment_id": 87372275, "body": "Hi NuPagadi: I&#39;m trying to write the code, and don&#39;t know how to start.  Reading and setting an individual line I can do, but this is a signal with a clock and a data line."}, {"owner": {"reputation": 1, "user_id": 9731021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d12be3677dbfbe2f31307418728355c2?s=128&d=identicon&r=PG&f=1", "display_name": "DiN", "link": "https://stackoverflow.com/users/9731021/din"}, "edited": false, "score": 0, "creation_date": 1525445034, "post_id": 50137977, "comment_id": 87372318, "body": "Hi Thomas Matthews: I tried searching the Internet and after a few dozen tries I found no examples of people trying to read a signal on GPIO lines with a data and a clock line."}, {"owner": {"reputation": 1, "user_id": 9731021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d12be3677dbfbe2f31307418728355c2?s=128&d=identicon&r=PG&f=1", "display_name": "DiN", "link": "https://stackoverflow.com/users/9731021/din"}, "edited": false, "score": 0, "creation_date": 1525445955, "post_id": 50137977, "comment_id": 87372888, "body": "Hi doron.  Debian Linux 7.3  I know we should upgrade, but we&#39;re afraid of changes that impact to code we already have, and we don&#39;t have the time to ferret out these changes and make working code work again."}], "owner": {"reputation": 1, "user_id": 9731021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d12be3677dbfbe2f31307418728355c2?s=128&d=identicon&r=PG&f=1", "display_name": "DiN", "link": "https://stackoverflow.com/users/9731021/din"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1525296572, "creation_date": 1525273900, "last_edit_date": 1525296572, "question_id": 50137977, "link": "https://stackoverflow.com/questions/50137977/c-gpio-separate-data-clock-lines", "title": "C++, GPIO, separate data &amp; clock lines", "body": "<p>I'm developing for the Beaglebone Black under QT Creator, C++.</p>\n\n<p>I have a signal with a clock assigned to one GPIO port, and a data line assigned to another port.</p>\n\n<p>How do I read this data in?</p>\n"}, {"tags": ["c++", "arrays", "multidimensional-array"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1525273692, "post_id": 50137862, "comment_id": 87294097, "body": "Consider using <code>std::vector&lt;std::vector&lt;double&gt;&gt;</code>"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1525273825, "post_id": 50137862, "comment_id": 87294179, "body": "This code makes no sense, using doubles to size an array?  Overwiting input before using it? And the answer to your question is yes and no <i>at the same time</i>; there are no runtime sized multidimensional arrays in C++, but there are dozens of ways to fake it.  Consider a vector of vectors."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1525279491, "post_id": 50137862, "comment_id": 87297618, "body": "when asking about compiler errors, please quote them verbatim. Even if they are hard to read sometimes, they hold valuable information"}], "owner": {"reputation": 103, "user_id": 8603152, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7de75d7c75ab18f68ea74d8c5d9cdfcc?s=128&d=identicon&r=PG&f=1", "display_name": "Raph", "link": "https://stackoverflow.com/users/8603152/raph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 255, "favorite_count": 0, "closed_date": 1525273632, "answer_count": 0, "score": 0, "last_activity_date": 1525273663, "creation_date": 1525273571, "question_id": 50137862, "link": "https://stackoverflow.com/questions/50137862/size-of-multidimensional-array-with-a-user-input-double-value-in-c", "closed_reason": "Duplicate", "title": "Size of multidimensional-array with a user input double value in C++", "body": "<p>below is my code:</p>\n\n<pre><code>//variables\ndouble sSideA,sSideB;\ndouble incrementA,incrementB;\ndouble eSideA,eSideB;\n\n//obtain user input\ncout &lt;&lt; \"Please enter the starting value of side A: \";\ncin &gt;&gt; sSideA;\n\ncout &lt;&lt; \"Please enter the end value of side A: \";\ncin &gt;&gt; eSideA;\n\ncout &lt;&lt; \"Please enter the increment value of side A: \";\ncin &gt;&gt; incrementA;\n\ncout &lt;&lt; \"Please enter the starting value of side B: \";\ncin &gt;&gt; sSideB;\n\ncout &lt;&lt; \"Please enter the end value of side B: \";\ncin &gt;&gt; eSideB;\n\ndouble hypo[eSideA][eSideB]; //initialize multidimensional array  \n</code></pre>\n\n<p>I'm trying to create a multidimensional array with a size determined by the user input. I'm getting an error from Microsoft Visual Studio that says <code>hypo</code> must only contain constant values.</p>\n\n<p>Is it possible to generate an array determined by the user's <code>eSideA</code> and <code>eSideB</code> ? </p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "boost", "asio"], "comments": [{"owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "edited": false, "score": 0, "creation_date": 1525273671, "post_id": 50137635, "comment_id": 87294084, "body": "What do you mean by position of stream? May be you want to get newly received data actual size?"}, {"owner": {"reputation": 51, "user_id": 7009236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f5cDX.png?s=128&g=1", "display_name": "Evgen Stoyka", "link": "https://stackoverflow.com/users/7009236/evgen-stoyka"}, "reply_to_user": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "edited": false, "score": 0, "creation_date": 1525274020, "post_id": 50137635, "comment_id": 87294293, "body": "i dont want to know actual size of read data. when you sending big size of string through socket and read it in async way you dont know the exactly position of read stream data. when you want to append data by using async read you dont get in the right file, you&#39;ll get shuffle text of data. Because async read do it in some sort of random processing."}, {"owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "edited": false, "score": 0, "creation_date": 1525275124, "post_id": 50137635, "comment_id": 87294983, "body": "If I understood you right, checking <code>boost::asio::error::eof</code> can help."}], "answers": [{"tags": [], "owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "is_accepted": false, "score": 0, "last_activity_date": 1525275885, "last_edit_date": 1525275885, "creation_date": 1525273805, "answer_id": 50137948, "question_id": 50137635, "link": "https://stackoverflow.com/questions/50137635/how-get-position-of-socket-stream-while-reading/50137948#50137948", "title": "How get position of socket stream while reading", "body": "<p>If you'd like to get the actual size of received data, its value can be obtained inside the callback function (<code>Session::handle_read</code>) in the second parameter.</p>\n\n<p>To read big streams you can check <code>boost::asio::error::eof</code> error code inside the handler</p>\n\n<pre><code>    if (!err)\n    {\n        // Continue reading remaining data until EOF.\n    }\n    else if (err != boost::asio::error::eof)\n    {\n        std::cout &lt;&lt; \"Error: \" &lt;&lt; err &lt;&lt; \"\\n\";\n    }\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 7009236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f5cDX.png?s=128&g=1", "display_name": "Evgen Stoyka", "link": "https://stackoverflow.com/users/7009236/evgen-stoyka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1525275885, "creation_date": 1525272878, "last_edit_date": 1525273444, "question_id": 50137635, "link": "https://stackoverflow.com/questions/50137635/how-get-position-of-socket-stream-while-reading", "title": "How get position of socket stream while reading", "body": "<p>Is it possible to find offset or position of stream socket while you use function of boost like <strong>async_read_some</strong>?</p>\n\n<p>For example i use next code in <strong>handle_read</strong> when program reads big amount of json text in socket session and i want to know exactly position of stream when i read data like so:</p>\n\n<pre><code>socket.async_read_some(\n    boost::asio::buffer(data, max_length),\n    boost::bind(&amp;Session::handle_read, this, shared_from_this(), boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred)\n );\n //socket.get_offset() or socket.get_position()\n</code></pre>\n\n<p>In documentation i cant find any appropriate solution for it. </p>\n\n<p>The maximum buffer size is 65536 bytes, but socket gets the json text even bigger.</p>\n\n<p>I cant properly append chunks of buffer in the right position because async do it in the some sort of shuffle result but i need to do it in the right way.</p>\n"}, {"tags": ["c++", "dictionary"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1525272332, "post_id": 50137421, "comment_id": 87293122, "body": "You are getting a particular compiler error?  Probably about copying a <code>std::thread</code>?"}, {"owner": {"reputation": 13, "user_id": 5850395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a4ba2d42adc832c33417dc5f847da6c?s=128&d=identicon&r=PG", "display_name": "Mr Smith", "link": "https://stackoverflow.com/users/5850395/mr-smith"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1525272371, "post_id": 50137421, "comment_id": 87293144, "body": "I&#39;m using emplace for avoid copies. Emplace should create the types with the given arguments"}, {"owner": {"reputation": 668, "user_id": 803978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7PIsz.png?s=128&g=1", "display_name": "Code Gorilla", "link": "https://stackoverflow.com/users/803978/code-gorilla"}, "edited": false, "score": 0, "creation_date": 1525272381, "post_id": 50137421, "comment_id": 87293149, "body": "Do you need the equals sign between <code>init()</code> and <code>{</code> ?"}, {"owner": {"reputation": 13, "user_id": 5850395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a4ba2d42adc832c33417dc5f847da6c?s=128&d=identicon&r=PG", "display_name": "Mr Smith", "link": "https://stackoverflow.com/users/5850395/mr-smith"}, "edited": false, "score": 0, "creation_date": 1525272439, "post_id": 50137421, "comment_id": 87293195, "body": "miss type, fixed"}, {"owner": {"reputation": 437, "user_id": 3868157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea640d71ffc26471c0471a551fdc262?s=128&d=identicon&r=PG&f=1", "display_name": "cisnjxqu", "link": "https://stackoverflow.com/users/3868157/cisnjxqu"}, "edited": false, "score": 0, "creation_date": 1525272656, "post_id": 50137421, "comment_id": 87293362, "body": "What&#39;s your use case for looking up a thread in a map? You can never have another instance of that thread."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5850395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a4ba2d42adc832c33417dc5f847da6c?s=128&d=identicon&r=PG", "display_name": "Mr Smith", "link": "https://stackoverflow.com/users/5850395/mr-smith"}, "edited": false, "score": 0, "creation_date": 1525272606, "post_id": 50137514, "comment_id": 87293310, "body": "why is the &lt; operator needed while emplacing?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 13, "user_id": 5850395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a4ba2d42adc832c33417dc5f847da6c?s=128&d=identicon&r=PG", "display_name": "Mr Smith", "link": "https://stackoverflow.com/users/5850395/mr-smith"}, "edited": false, "score": 2, "creation_date": 1525272718, "post_id": 50137514, "comment_id": 87293407, "body": "@MrSmith it&#39;s needed more or less at all times, since <code>std::map</code> is an ordered container. I expect issues with the constness of the key as well (is a <code>const std::thread</code> usable at all?), so maybe a map is not the right container here."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 13, "user_id": 5850395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a4ba2d42adc832c33417dc5f847da6c?s=128&d=identicon&r=PG", "display_name": "Mr Smith", "link": "https://stackoverflow.com/users/5850395/mr-smith"}, "edited": false, "score": 0, "creation_date": 1525272723, "post_id": 50137514, "comment_id": 87293414, "body": "@MrSmith because keys in <code>std::map</code> are sorted"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 13, "user_id": 5850395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a4ba2d42adc832c33417dc5f847da6c?s=128&d=identicon&r=PG", "display_name": "Mr Smith", "link": "https://stackoverflow.com/users/5850395/mr-smith"}, "edited": false, "score": 2, "creation_date": 1525272771, "post_id": 50137514, "comment_id": 87293449, "body": "@MrSmith its not particular about emplacing, but maps are sorted containers, hence the keys need to have a <code>&lt;</code>"}, {"owner": {"reputation": 13, "user_id": 5850395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a4ba2d42adc832c33417dc5f847da6c?s=128&d=identicon&r=PG", "display_name": "Mr Smith", "link": "https://stackoverflow.com/users/5850395/mr-smith"}, "edited": false, "score": 0, "creation_date": 1525272884, "post_id": 50137514, "comment_id": 87293537, "body": "I see.. I wanted to store the thread state, so I will create a map with the thread id and its state.."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 13, "user_id": 5850395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a4ba2d42adc832c33417dc5f847da6c?s=128&d=identicon&r=PG", "display_name": "Mr Smith", "link": "https://stackoverflow.com/users/5850395/mr-smith"}, "edited": false, "score": 0, "creation_date": 1525272981, "post_id": 50137514, "comment_id": 87293613, "body": "@MrSmith may I suggest two <code>std::vector&lt;std::thread&gt;</code>s, one for active threads and one for inactive ones?"}, {"owner": {"reputation": 13, "user_id": 5850395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a4ba2d42adc832c33417dc5f847da6c?s=128&d=identicon&r=PG", "display_name": "Mr Smith", "link": "https://stackoverflow.com/users/5850395/mr-smith"}, "edited": false, "score": 0, "creation_date": 1525273145, "post_id": 50137514, "comment_id": 87293732, "body": "@QUentin idk.. it may cost at runtime"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 13, "user_id": 5850395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a4ba2d42adc832c33417dc5f847da6c?s=128&d=identicon&r=PG", "display_name": "Mr Smith", "link": "https://stackoverflow.com/users/5850395/mr-smith"}, "edited": false, "score": 1, "creation_date": 1525274060, "post_id": 50137514, "comment_id": 87294336, "body": "@MrSmith <code>std::thread</code> doesn&#39;t have <code>std::hash</code> nor <code>operator ==</code>, so no <code>std::unordered_map</code> either (unless, of course, you implement your own comparator &amp; hasher). I don&#39;t think the two-vectors solution would have any measurable performance impact."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 13, "user_id": 5850395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a4ba2d42adc832c33417dc5f847da6c?s=128&d=identicon&r=PG", "display_name": "Mr Smith", "link": "https://stackoverflow.com/users/5850395/mr-smith"}, "edited": false, "score": 0, "creation_date": 1525275320, "post_id": 50137514, "comment_id": 87295118, "body": "@MrSmith If you just want to just store the thread state, having a map of thread id to state does indeed sound like a good idea. The question still remains though how you will store your threads in your thread pool."}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 3, "last_activity_date": 1525272567, "last_edit_date": 1525272567, "creation_date": 1525272541, "answer_id": 50137514, "question_id": 50137421, "link": "https://stackoverflow.com/questions/50137421/map-emplace-with-multiples-arguments-c-17/50137514#50137514", "title": "Map.emplace with multiples arguments C++ 17", "body": "<p>You need:</p>\n\n<pre><code>_pool.emplace(\n    std::piecewise_construct,\n    std::forward_as_tuple(&amp;ThreadPool::thread_init, this),\n    std::forward_as_tuple(false)\n);\n</code></pre>\n\n<p>... to distinguish the arguments lists for the key and the value. You will then, however, run into the issue that <code>std::thread</code> has no <code>operator &lt;</code>, but that's for another question :)</p>\n"}], "owner": {"reputation": 13, "user_id": 5850395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a4ba2d42adc832c33417dc5f847da6c?s=128&d=identicon&r=PG", "display_name": "Mr Smith", "link": "https://stackoverflow.com/users/5850395/mr-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 50137514, "answer_count": 1, "score": 1, "last_activity_date": 1525272567, "creation_date": 1525272257, "last_edit_date": 1525272447, "question_id": 50137421, "link": "https://stackoverflow.com/questions/50137421/map-emplace-with-multiples-arguments-c-17", "title": "Map.emplace with multiples arguments C++ 17", "body": "<p>Using C++ 17: Having</p>\n\n<pre><code>using working_t = bool;\nstd::map&lt;std::thread, working_t&gt; _pool;\n</code></pre>\n\n<p>I'm trying to add a new thread to this map but I dont find the decent syntax..</p>\n\n<pre><code>class ThreadPool {\n   std::map&lt;std::thread, working_t&gt; _pool;\n\n   void init() {\n      _pool.emplace(&amp;ThreadPool::thread_init, this, false);\n   }\n   void thread_init();\n};\n</code></pre>\n\n<p>This should add a thread to the map with false as value, but it cant compile.. Is this possible?</p>\n"}, {"tags": ["c++", "graph-theory", "shortest-path", "breadth-first-search"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1525272049, "post_id": 50137320, "comment_id": 87292939, "body": "Now is the perfect time to <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">learn how to debug your programs</a>. Something which is usually not possible for online judge or competition sites as the input is not normally known. So be happy that it <i>is</i> possible to debug in your case."}, {"owner": {"reputation": 11, "user_id": 9423382, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Lakshay Kakkar", "link": "https://stackoverflow.com/users/9423382/lakshay-kakkar"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1525272190, "post_id": 50137320, "comment_id": 87293035, "body": "Actually I&#39;ve included expected output and actual output at the ending of the code itself. So please help me out, it&#39;s been a long time and I haven&#39;t been able to sort it out."}, {"owner": {"reputation": 6139, "user_id": 6245827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfc332f990737fc0e8d54584445eea38?s=128&d=identicon&r=PG", "display_name": "oowekyala", "link": "https://stackoverflow.com/users/6245827/oowekyala"}, "edited": false, "score": 0, "creation_date": 1525272387, "post_id": 50137320, "comment_id": 87293158, "body": "Formatting the code properly will improve its readability. Pay attention to whitespace around operators and proper indentation. The main function looks like it&#39;s part of the addedge function"}, {"owner": {"reputation": 11, "user_id": 9423382, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Lakshay Kakkar", "link": "https://stackoverflow.com/users/9423382/lakshay-kakkar"}, "edited": false, "score": 0, "creation_date": 1525272986, "post_id": 50137320, "comment_id": 87293618, "body": "I&#39;ve edited the code accordingly. Since I&#39;m a newbie here, this happened, but I&#39;ll make sure to make readability is ensured from now onwards :)"}, {"owner": {"reputation": 1971, "user_id": 2096824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fzfxa.jpg?s=128&g=1", "display_name": "Justin Randall", "link": "https://stackoverflow.com/users/2096824/justin-randall"}, "edited": false, "score": 0, "creation_date": 1525273280, "post_id": 50137320, "comment_id": 87293833, "body": "You are redeclaring <code>s</code> inside your main function.  Once at the beginning and again within your nested for loop."}, {"owner": {"reputation": 11, "user_id": 9423382, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Lakshay Kakkar", "link": "https://stackoverflow.com/users/9423382/lakshay-kakkar"}, "edited": false, "score": 0, "creation_date": 1525273519, "post_id": 50137320, "comment_id": 87293980, "body": "Yes that&#39;s right, but changing that didn&#39;t change the output, it still doesn&#39;t pass the testcases. Strangely, the numbers it is printing seem unusual."}, {"owner": {"reputation": 259, "user_id": 7886227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hec3U.jpg?s=128&g=1", "display_name": "Dr t", "link": "https://stackoverflow.com/users/7886227/dr-t"}, "edited": false, "score": 0, "creation_date": 1525278845, "post_id": 50137320, "comment_id": 87297273, "body": "after some work I got this to compile and run as you seem to expect.  You really need to go back to a point before debugging and go over your design thoroughly.  Take the design statements and use them to write and comment your code.  This work looks like you tried to write a program (small one but still...) with no detailed design work."}, {"owner": {"reputation": 3812, "user_id": 7697209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0zmCe.png?s=128&g=1", "display_name": "Kostas", "link": "https://stackoverflow.com/users/7697209/kostas"}, "edited": false, "score": 0, "creation_date": 1525282320, "post_id": 50137320, "comment_id": 87299033, "body": "Look up Dijkstra&#39;s algorithm"}, {"owner": {"reputation": 11, "user_id": 9423382, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Lakshay Kakkar", "link": "https://stackoverflow.com/users/9423382/lakshay-kakkar"}, "edited": false, "score": 0, "creation_date": 1525323726, "post_id": 50137320, "comment_id": 87312660, "body": "See Dijkstra&#39;s algorithm is not at all required here. I can find shortest distance using BFS if the graph is unweighted or all weights are equal in O(V+E) time, instead of using Dijkstra which takes O(ElogV) time."}], "owner": {"reputation": 11, "user_id": 9423382, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Lakshay Kakkar", "link": "https://stackoverflow.com/users/9423382/lakshay-kakkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1525273881, "creation_date": 1525271930, "last_edit_date": 1592644375, "question_id": 50137320, "link": "https://stackoverflow.com/questions/50137320/possibly-not-handling-vector-arrays-properly-bfs-to-find-shortest-distance-to-a", "title": "Possibly not handling vector arrays properly (BFS to find shortest distance to all nodes)", "body": "<p>This problem is more about programming than competitive programming. I'm relatively a newbie when it comes to writing programs involving Graph Theory. I've explained the question below. I've coded the solution with the apt logic required, but for some reason, my output is not matching the testcases. Please help me out with my code, given below. (NOTE: I've included the testcases, expected output and the output I'm getting at the end of the code)</p>\n<p>I'll describe the problem statement shortly:</p>\n<p>Given a graph, with each edge having a weight of 6 units (need not be connected), use Breadth First Search to find the shortest distance from a source node to all other nodes.</p>\n<p>Link to the problem: <a href=\"https://www.hackerrank.com/challenges/bfsshortreach/problem\" rel=\"nofollow noreferrer\">https://www.hackerrank.com/challenges/bfsshortreach/problem</a></p>\n<p>Input Format:</p>\n<blockquote>\n<p>The first line contains an integer , the number of queries. Each of the following  sets of lines has the following format:</p>\n<p>The first line contains two space-separated integers n and m, the number of nodes and edges in the graph.</p>\n<p>Each line  of the m subsequent lines contains two space-separated integers, u and v, describing an edge connecting node u to node v.</p>\n<p>The last line contains a single integer, s, denoting the index of the starting node for the BFS procedure.</p>\n</blockquote>\n<p>My Code:</p>\n<pre><code>#include &lt;cmath&gt;\n#include &lt;cstdio&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;queue&gt; using namespace std;\n\nvoid addedge(int u,int v, vector &lt;int&gt; edges[]) {\n    edges[u].push_back(v);\n    edges[v].push_back(u); \n}\n    \nvoid bfs(int n,int m,vector &lt;int&gt; edges[],int s) {\n    queue &lt;int&gt; q;\n    vector &lt;int&gt; d(n+1);\n    for(int o=0;o&lt;n;o++) d[o]=-1;\n    q.push(s); d[s]=0;\n    while(!q.empty())\n    {\n        int temp=q.front(); q.pop();\n        for(auto x : edges[temp])\n        {\n            if(d[x] == -1) { d[x]=d[temp] + 6; q.push(x);}\n        }\n    }\n    for(auto l=0;l&lt;d.size();l++) cout&lt;&lt;d[l]&lt;&lt;&quot; &quot;;\n\n\n}\n    int main() {\n        int q,n,i,m,s,t,u;\n        cin&gt;&gt;q;\n        for(i=0;i&lt;q;i++)\n        {\n        cin&gt;&gt;n&gt;&gt;m;\n        vector &lt;int&gt; edges[n];\n        for(i=0;i&lt;m;i++)\n        { \n        cin&gt;&gt;t&gt;&gt;u; \n        addedge(t,u,edges);\n        int s;\n        cin&gt;&gt;s;\n        bfs(n,m,edges,s); \n        cout&lt;&lt;&quot;\\n&quot;;\n        }\n        \n    }\n    return 0;\n}\n\nInput:\n\n2\n4 2\n1 2\n1 3\n1\n3 1\n2 3\n2\n\nExpected Output:\n\n6 6 -1\n-1 6\n\nActual Output:\n\n-1 0 6 -1 0 \n-1 6 12 0 0 \n</code></pre>\n"}, {"tags": ["python", "c++", "shared-libraries", "setuptools", "python-extensions"], "comments": [{"owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 0, "creation_date": 1525283624, "post_id": 50137309, "comment_id": 87299744, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/9795793/shared-library-dependencies-with-distutils\">Shared library dependencies with distutils</a>"}, {"owner": {"reputation": 4597, "user_id": 3587464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wjm1t.jpg?s=128&g=1", "display_name": "mcguip", "link": "https://stackoverflow.com/users/3587464/mcguip"}, "reply_to_user": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 1, "creation_date": 1525335393, "post_id": 50137309, "comment_id": 87318002, "body": "@hoefling, I saw the solution presented in the link you shared; however, that solution is really focused on a 3rd party shared library which is not generated as part of the extension build.  It may work to solve the same issue; however, the object is then decoupled from the extension definition itself and I&#39;m unsure if I can be guaranteed that it will collect this package data only after the extension has completed building."}, {"owner": {"reputation": 2862, "user_id": 4858640, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c3eef6d48a6bc20ea9c2c2825dc9c6d6?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4858640/peter"}, "edited": false, "score": 0, "creation_date": 1598705388, "post_id": 50137309, "comment_id": 112549085, "body": "I have the exact same problem, this is especially frustrating since creating an egg with python setup.py install <i>does</i> work out of the box."}], "owner": {"reputation": 4597, "user_id": 3587464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wjm1t.jpg?s=128&g=1", "display_name": "mcguip", "link": "https://stackoverflow.com/users/3587464/mcguip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1344, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1525335247, "creation_date": 1525271872, "last_edit_date": 1525335247, "question_id": 50137309, "link": "https://stackoverflow.com/questions/50137309/shared-library-distributed-in-python-wheel-not-found", "title": "Shared library distributed in python wheel not found", "body": "<p>I have a python module which contains a C++ extension as well a shared library on which the C++ extension depends.  The shared library is picked up by setuptools as an extra_object on the extension.  After running <code>python setup.py bdist_wheel</code>, the module wheel object gets properly generated has a directory structure as follows:</p>\n\n<pre><code>+-pymodule.whl\n| +-pymodule\n| +-pymodule-version.dist-info\n| +-extension.so\n| +-shared_lib.so\n</code></pre>\n\n<p>To install this wheel, in my python environment I call <code>pip install pymodule.whl</code> which copies the python sources as well as the .so files into the environment's <code>site-packages</code> directory. </p>\n\n<p>After installing the module, one can then attempt to import the module by calling <code>import pymodule</code> in a terminal for the environment.  This triggers an exception to be thrown:</p>\n\n<pre><code>ImportError: shared_lib.so: cannot open shared object file: No such file or directory\n</code></pre>\n\n<p>This exception can be resolved by appending the appropriate <code>site-packages</code> directory to the <code>LD_LIBRARY_PATH</code> variable; however, it seems that this should work out of the box, especially considering that python is clearly able to locate <code>extension.so</code>.</p>\n\n<p>Is there a way to force python to locate this shared library without having to explicitly point <code>LD_LIBRARY_PATH</code> at the installation location(i.e. <code>site-packages</code>)?</p>\n\n<p><a href=\"https://stackoverflow.com/questions/9795793/shared-library-dependencies-with-distutils\">This</a> question works around a similar problem by using package data and explicitly specifying an install location for the shared library.  The issue I have with this approach is that the shared object is decoupled from the extension.  In my case, the shared library and extension are both targets built by the same cmake build.  I had previously attempted to use <code>skbuild</code> to build cmake based extentions; however, as per <a href=\"https://github.com/scikit-build/scikit-build/issues/272\" rel=\"nofollow noreferrer\">this issue</a>, there is a similar issue in skbuild with including other libraries generated as part of the extension build.</p>\n"}, {"tags": ["c++", "class", "reference"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 6, "creation_date": 1525271845, "post_id": 50137263, "comment_id": 87292808, "body": "Perhaps, in a more complete example, the user is expecting a reference in the sense that the referred value is expected to change and the user wants a reference to always know the current value but can&#39;t be allowed to change that value,"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1525271860, "post_id": 50137263, "comment_id": 87292821, "body": "Don&#39;t do that, &#39;s all"}, {"owner": {"reputation": 3356, "user_id": 1666676, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQ9IF.jpg?s=128&g=1", "display_name": "Phlucious", "link": "https://stackoverflow.com/users/1666676/phlucious"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1525274338, "post_id": 50137263, "comment_id": 87294506, "body": "@Fran&#231;oisAndrieux I hadn&#39;t thought of that, and interestingly what you describe as a potential feature is described as an &quot;unsafe&quot; liability in <a href=\"https://stackoverflow.com/a/31914316/1666676\">this answer</a> of a related(ish) question."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1525274469, "post_id": 50137263, "comment_id": 87294580, "body": "@Phlucious that remark applies to pretty much any feature of any language ever ;)"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1525274668, "post_id": 50137263, "comment_id": 87294708, "body": "@Phlucious I can be a liability if you aren&#39;t counting on it. It just depends on what you are trying to do. Using the wrong tool for the job always comes with a cost."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1525276800, "post_id": 50137263, "comment_id": 87296064, "body": "Depends if you want the caller to be able to bind a reference to m_value.  If m_value is effectively immutable, then it does not matter (other than for performance concerns, which others have expressed).  If m_value can change over time, then the caller&#39;s binding will reflect the current state."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1525278827, "post_id": 50137263, "comment_id": 87297266, "body": "If you want to keep the semantics of public data members, but want to restrict access to <code>const</code>, then you <i>need</i> a reference. Performance considerations shouldn&#39;t really come into it. The desired semantics is what matters."}, {"owner": {"reputation": 3356, "user_id": 1666676, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQ9IF.jpg?s=128&g=1", "display_name": "Phlucious", "link": "https://stackoverflow.com/users/1666676/phlucious"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1525288145, "post_id": 50137263, "comment_id": 87301891, "body": "@Eljay I believe the point about always reflecting the current state to be the best answer to my question. Repost as an answer and I&#39;ll accept."}, {"owner": {"reputation": 15990, "user_id": 417197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cb4633eee192020baee9447a8c0976c1?s=128&d=identicon&r=PG", "display_name": "Andr&#233;", "link": "https://stackoverflow.com/users/417197/andr%c3%a9"}, "edited": false, "score": 0, "creation_date": 1525290179, "post_id": 50137263, "comment_id": 87302938, "body": "Design wise returning a const reference is (arguably) bad, because you are now leaking a private implementation detail in the public API. It is close to impossible to change the private storage to something else than an int."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1525272317, "last_edit_date": 1525272317, "creation_date": 1525271983, "answer_id": 50137333, "question_id": 50137263, "link": "https://stackoverflow.com/questions/50137263/why-return-a-const-reference-to-small-class-members/50137333#50137333", "title": "Why return a const reference to small class members?", "body": "<p>Returning a <code>const &amp;</code> to a type like <code>int</code> is probably completely pointless and possibly degrading to performance. The same thing can be said for passing <code>const int&amp;</code> as a function parameter type, but that's a little more acceptable in that it does defeat unwanted type conversions at a calling site.</p>\n\n<p>It's merely a poor habit that the programmer has gotten themselves into.</p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1525272506, "post_id": 50137474, "comment_id": 87293249, "body": "Indeed, but with some metaprogramming, you could still have the <code>int</code> case return by value, and more complex classes return by const ref."}, {"owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1525272677, "post_id": 50137474, "comment_id": 87293377, "body": "@Bathsheba Yes, but why?) If there is no real performance difference between passing 4 and 8 bytes in your application (which is the common case, you know), why complicating your code?"}, {"owner": {"reputation": 3356, "user_id": 1666676, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQ9IF.jpg?s=128&g=1", "display_name": "Phlucious", "link": "https://stackoverflow.com/users/1666676/phlucious"}, "edited": false, "score": 0, "creation_date": 1525304244, "post_id": 50137474, "comment_id": 87308057, "body": "+1. Valid scenario but overcomplicated (imho) unless maybe if <code>MyClass</code> is a template and <code>value()</code> returns the template param."}], "tags": [], "owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "is_accepted": false, "score": 2, "last_activity_date": 1525272513, "last_edit_date": 1525272513, "creation_date": 1525272427, "answer_id": 50137474, "question_id": 50137263, "link": "https://stackoverflow.com/questions/50137263/why-return-a-const-reference-to-small-class-members/50137474#50137474", "title": "Why return a const reference to small class members?", "body": "<p>If you talk just about <code>int</code>, then yes, it may be pointless. But when you know that return or parameter type can be changed later and you use an alias it can be useful to put <code>const &amp;</code>, so later all you have to do is to change your alias value, which can be more than 8 bytes. Like this</p>\n\n<pre><code>class MyClass {\n   using TInnerType = int;\n   TInnerType m_value;\npublic:\n   MyClass(const TInnerType&amp; v) : m_value(v) {}\n   const TInnerType&amp; value() const { return m_value; }\n// ^^^^^^^^^^\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "is_accepted": true, "score": 3, "last_activity_date": 1525289486, "creation_date": 1525289486, "answer_id": 50142188, "question_id": 50137263, "link": "https://stackoverflow.com/questions/50137263/why-return-a-const-reference-to-small-class-members/50142188#50142188", "title": "Why return a const reference to small class members?", "body": "<blockquote>\n  <p>Why return a const reference to small class members?</p>\n</blockquote>\n\n<p>Depends if you want the caller to be able to bind a reference to m_value.</p>\n\n<pre><code>MyClass myObj;\nint const&amp; keep_an_eye_on_you = myObj.value();\ncout &lt;&lt; \"Was: \" &lt;&lt; keep_an_eye_on_you &lt;&lt; endl;\nmyObj.doSomething(); // say this changes the value held in m_value\ncout &lt;&lt; \"Now: \" &lt;&lt; keep_an_eye_on_you &lt;&lt; endl;\n</code></pre>\n\n<p>If m_value is effectively immutable, then it does not matter (other than for performance concerns, which others have expressed).</p>\n\n<p>If m_value can change over time, then the caller's binding will reflect the current state, as in the example above.</p>\n"}], "owner": {"reputation": 3356, "user_id": 1666676, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQ9IF.jpg?s=128&g=1", "display_name": "Phlucious", "link": "https://stackoverflow.com/users/1666676/phlucious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 50142188, "answer_count": 3, "score": 7, "last_activity_date": 1525304543, "creation_date": 1525271709, "last_edit_date": 1525304543, "question_id": 50137263, "link": "https://stackoverflow.com/questions/50137263/why-return-a-const-reference-to-small-class-members", "title": "Why return a const reference to small class members?", "body": "<p>I feel like this question must surely be on SO somewhere, but either I can't figure out the right search terms or it was somehow missed.</p>\n\n<p>Suppose I have class that protects its members like so...</p>\n\n<pre><code>class MyClass {\n   int m_value;\npublic:\n   MyClass(int v) : m_value(v) {}\n   int value() const { return m_value; }\n}\n</code></pre>\n\n<p>I've seen sample code all over SO that instead returns a const reference to the member variable like so...</p>\n\n<pre><code>class MyClass {\n   int m_value;\npublic:\n   MyClass(int v) : m_value(v) {}\n   const int&amp; value() const { return m_value; }\n// ^^^^^^^^^^\n}\n</code></pre>\n\n<p>I understand the value of returning const in general, and the value of returning references for composite objects, but what's the value for objects smaller than the architecture's pointer size? It seems both less efficient and less safe, with no advantage I can think of.</p>\n\n<hr>\n\n<p>I suppose a similar discussion could be had for the constructor in my example, but this question is focused on returned values here.</p>\n\n<p><a href=\"https://stackoverflow.com/a/752699/1666676\">This is the SO answer</a> that prompted me to ask this question.</p>\n"}, {"tags": ["c++", "copy-constructor", "reference-wrapper", "gcc-pedantic"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1525273136, "post_id": 50137200, "comment_id": 87293726, "body": "Adding non-const-qualified l-value or r-value references to the constructor&#39;s parameters solves it. I cannot explain it, though. Someone? <a href=\"https://stackoverflow.com/questions/1384007/conversion-constructor-vs-conversion-operator-precedence\">The removed duplicate that explains the &quot;Why&quot; part</a>."}, {"owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1525273907, "post_id": 50137200, "comment_id": 87294223, "body": "@LogicStuff : <code>std::ref</code> returns an rvalue, so an lvalue reference would be ineligible and thus remove the ambiguity; I would think an rvalue reference would still be ambiguous, but maybe it&#39;s a better match during overload resolution (if so I&#39;m not sure why)."}, {"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1525285644, "post_id": 50137200, "comment_id": 87300686, "body": "What about using direct initialization? Copy initialization is designed to take conversion functions into consideration."}, {"owner": {"reputation": 6191, "user_id": 694509, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/af284e79108b30c1dbbcde576755f048?s=128&d=identicon&r=PG", "display_name": "zennehoy", "link": "https://stackoverflow.com/users/694509/zennehoy"}, "reply_to_user": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1525286723, "post_id": 50137200, "comment_id": 87301223, "body": "@xskxzr Both direct initialization and copy initialization through <code>std::ref</code>/<code>std::cref</code> should call the constructors taking a <code>std::reference_wrapper</code>."}], "answers": [{"comments": [{"owner": {"reputation": 6191, "user_id": 694509, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/af284e79108b30c1dbbcde576755f048?s=128&d=identicon&r=PG", "display_name": "zennehoy", "link": "https://stackoverflow.com/users/694509/zennehoy"}, "edited": false, "score": 0, "creation_date": 1525286459, "post_id": 50139466, "comment_id": 87301094, "body": "Yeah, this appears to solve the problem. Can you back up that this does indeed conform to the standard and isn&#39;t just another peculiarity of the compiler?"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 2, "creation_date": 1525286755, "post_id": 50139466, "comment_id": 87301238, "body": "@Jarod42 Could you please explain why taking the parameters by value is not an exact match? This is why I withheld my answer."}, {"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1525320824, "post_id": 50139466, "comment_id": 87311852, "body": "It only handles rvalue cases."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 1, "last_activity_date": 1525278760, "creation_date": 1525278760, "answer_id": 50139466, "question_id": 50137200, "link": "https://stackoverflow.com/questions/50137200/ambiguous-constructor-taking-stdreference-wrapper-when-compiling-with-pedanti/50139466#50139466", "title": "Ambiguous constructor taking std::reference_wrapper when compiling with -pedantic", "body": "<blockquote>\n  <p>how do I achieve the result without -pedantic in a standard-conforming manner?</p>\n</blockquote>\n\n<p>Create overloads with exact match, in your case:</p>\n\n<pre><code>Class(std::reference_wrapper&lt;Class&gt;&amp;&amp;) {\n    std::cout &lt;&lt; \"Class(std::reference_wrapper&lt;Class&gt;)\" &lt;&lt; std::endl;\n}\nClass(std::reference_wrapper&lt;const Class&gt;&amp;&amp;) {\n    std::cout &lt;&lt; \"Class(std::reference_wrapper&lt;const Class&gt;)\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/49715e4c6087a5c8\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}, {"comments": [{"owner": {"reputation": 6191, "user_id": 694509, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/af284e79108b30c1dbbcde576755f048?s=128&d=identicon&r=PG", "display_name": "zennehoy", "link": "https://stackoverflow.com/users/694509/zennehoy"}, "edited": false, "score": 0, "creation_date": 1525286625, "post_id": 50139701, "comment_id": 87301179, "body": "Unfortunately defining the constructors as <code>explicit</code> has the opposite effect to what I am trying to achieve. I want the constructors to have precedence over the conversion operator of <code>std::reference_wrapper</code>."}, {"owner": {"reputation": 1038, "user_id": 9636903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DZZnv.png?s=128&g=1", "display_name": "Gabriella Giordano", "link": "https://stackoverflow.com/users/9636903/gabriella-giordano"}, "reply_to_user": {"reputation": 6191, "user_id": 694509, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/af284e79108b30c1dbbcde576755f048?s=128&d=identicon&r=PG", "display_name": "zennehoy", "link": "https://stackoverflow.com/users/694509/zennehoy"}, "edited": false, "score": 0, "creation_date": 1525355292, "post_id": 50139701, "comment_id": 87331103, "body": "An <code>explicit</code> constructor is the way you can force the compiler to rule out any conversion operator, but yes, you have to <i>explicitly</i> tell the compiler when you really want to use the constructor as for <code>d</code> and <code>f</code>. Anyway, it never crossed my mind to provide a conversion constructor overload with a std::reference_wrapper argument, so now I&#39;m curious way you want to do that... sorry for the ot question :)"}, {"owner": {"reputation": 6191, "user_id": 694509, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/af284e79108b30c1dbbcde576755f048?s=128&d=identicon&r=PG", "display_name": "zennehoy", "link": "https://stackoverflow.com/users/694509/zennehoy"}, "edited": false, "score": 0, "creation_date": 1525357716, "post_id": 50139701, "comment_id": 87332838, "body": "To satisfy curiosity... :) <code>Class</code> will internally store either a copy of the passed value or a reference to it (actually it will always store a pointer, but by value it will allocate a copy and own the pointer, by reference it will simply point to the passed value without owning it). <code>std::ref</code>/<code>std::cref</code> indicate that the value should be stored by reference, otherwise the value is stored by value."}], "tags": [], "owner": {"reputation": 1038, "user_id": 9636903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DZZnv.png?s=128&g=1", "display_name": "Gabriella Giordano", "link": "https://stackoverflow.com/users/9636903/gabriella-giordano"}, "is_accepted": false, "score": 1, "last_activity_date": 1525279612, "creation_date": 1525279612, "answer_id": 50139701, "question_id": 50137200, "link": "https://stackoverflow.com/questions/50137200/ambiguous-constructor-taking-stdreference-wrapper-when-compiling-with-pedanti/50139701#50139701", "title": "Ambiguous constructor taking std::reference_wrapper when compiling with -pedantic", "body": "<p>Define the constructors as <code>explicit</code> to avoid the conflict with the conversion operator <code>operator T&amp; () const</code> defined in the <code>std::reference_wrapper</code> class:</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;iostream&gt;\n\nclass Class {\npublic:\n    Class() {\n        std::cout &lt;&lt; \"Class()\" &lt;&lt; std::endl;\n    }\n    Class(Class const &amp;) {\n        std::cout &lt;&lt; \"Class(Class const &amp;)\" &lt;&lt; std::endl;\n    }\n    explicit Class(std::reference_wrapper&lt;Class&gt;) {\n        std::cout &lt;&lt; \"Class(std::reference_wrapper&lt;Class&gt;)\" &lt;&lt; std::endl;\n    }\n    explicit Class(std::reference_wrapper&lt;const Class&gt;) {\n        std::cout &lt;&lt; \"Class(std::reference_wrapper&lt;const Class&gt;)\" &lt;&lt; std::endl;\n    }\n\n};\n\nint main() {\n    Class a;\n    Class b = a;\n    Class c = std::ref(a);  // call Class(Class const &amp;) trough the conversion operator\n    Class d(std::ref(a));   // call Class(std::reference_wrapper&lt;Class&gt;)\n    Class e = std::cref(a); // call Class(Class const &amp;) trough the conversion operator\n    Class f(std::cref(a));  // call Class(std::reference_wrapper&lt;const Class&gt;)\n}\n</code></pre>\n\n<p>Alternatively remove the constructor overloads 3 and 4 to always use the copy constructor <code>Class(Class const &amp;)</code>. </p>\n\n<p>You get no errors without the pedantic option because GCC gives precedence to copy constructor over conversion operators, but this is non part of the  the standard, where no precedence is defined, hence the conflict.</p>\n"}], "owner": {"reputation": 6191, "user_id": 694509, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/af284e79108b30c1dbbcde576755f048?s=128&d=identicon&r=PG", "display_name": "zennehoy", "link": "https://stackoverflow.com/users/694509/zennehoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "answer_count": 2, "score": 8, "last_activity_date": 1525279612, "creation_date": 1525271523, "last_edit_date": 1525273709, "question_id": 50137200, "link": "https://stackoverflow.com/questions/50137200/ambiguous-constructor-taking-stdreference-wrapper-when-compiling-with-pedanti", "title": "Ambiguous constructor taking std::reference_wrapper when compiling with -pedantic", "body": "<p>I have a class with both a copy constructor and a constructor taking a <code>std::reference_wrapper</code>:</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;iostream&gt;\n\nclass Class {\npublic:\n    Class() {\n        std::cout &lt;&lt; \"Class()\" &lt;&lt; std::endl;\n    }\n    Class(Class const &amp;) {\n        std::cout &lt;&lt; \"Class(Class const &amp;)\" &lt;&lt; std::endl;\n    }\n    Class(std::reference_wrapper&lt;Class&gt;) {\n        std::cout &lt;&lt; \"Class(std::reference_wrapper&lt;Class&gt;)\" &lt;&lt; std::endl;\n    }\n    Class(std::reference_wrapper&lt;const Class&gt;) {\n        std::cout &lt;&lt; \"Class(std::reference_wrapper&lt;const Class&gt;)\" &lt;&lt; std::endl;\n    }\n};\n\nint main() {\n    Class a;\n    Class b = a;\n    Class c = std::ref(a);\n    Class d = std::cref(a);\n}\n</code></pre>\n\n<p>When compiled normally (<code>g++ --std=c++17 test.cpp</code>) this works as desired, calling the four constructors in sequence:</p>\n\n<pre><code>$ ./a.exe\nClass()\nClass(Class const &amp;)\nClass(std::reference_wrapper&lt;Class&gt;)\nClass(std::reference_wrapper&lt;const Class&gt;)\n</code></pre>\n\n<p>However, compiling with <code>-pedantic</code> (i.e., <code>g++ --std=c++17 -pedantic test.cpp</code>) results in the following error (and another equivalent one for the <code>std::cref</code>):</p>\n\n<pre><code>test.cpp:23:22: error: conversion from 'std::reference_wrapper&lt;Class&gt;' to 'Class' is ambiguous\n  Class c = std::ref(a);\n                      ^\nnote: candidate: std::reference_wrapper&lt;_Tp&gt;::operator _Tp&amp;() const [with _Tp = Class]\nnote: candidate: Class::Class(std::reference_wrapper&lt;Class&gt;)\n</code></pre>\n\n<p>Why is this (i.e., how am I violating the standard, answered in <a href=\"https://stackoverflow.com/questions/1384007/conversion-constructor-vs-conversion-operator-precedence\">Conversion constructor vs. conversion operator: precedence</a>), and <strong>how do I achieve the result without <code>-pedantic</code> in a standard-conforming manner</strong>?</p>\n\n<pre><code>$ g++ --version\ng++.exe (Rev1, Built by MSYS2 project) 7.2.0\n</code></pre>\n"}, {"tags": ["c++", "math", "point", "point-clouds"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1525271587, "post_id": 50137119, "comment_id": 87292630, "body": "You should be searching for distance functions. Consider that your pointsets are a single high dimensional point. Now you have a problem of computing a distance function for a vector."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1525271600, "post_id": 50137119, "comment_id": 87292638, "body": "Are your set A/set B points numbered? Or can you at least reliably match points between the sets? It seems in this example that the points can be sorted by angle, and thus numbered."}, {"owner": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "edited": false, "score": 0, "creation_date": 1525271756, "post_id": 50137119, "comment_id": 87292747, "body": "They are numbered. The points are in the same order in each set"}], "answers": [{"tags": [], "owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "is_accepted": false, "score": 0, "last_activity_date": 1525328529, "creation_date": 1525328529, "answer_id": 50148203, "question_id": 50137119, "link": "https://stackoverflow.com/questions/50137119/c-find-where-a-point-set-lies-between-two-others/50148203#50148203", "title": "C++ find where a point set lies between two others", "body": "<p>You could try to solve this with a simple linear interpolation between the two sets. This works if the transition between the sets is indeed nearly linear. If you know that it is something else, you can adapt the interpolation function.</p>\n\n<p>Let us focus on a single point <code>p</code>. We know its coordinates in all sets <code>p_A</code>, <code>p_B</code>, and <code>p_C</code>. Then, we specify that <code>p_C</code> is more or less a linear interpolation between <code>p_A</code> and <code>p_B</code> with parameter <code>t</code> (where <code>t=0</code> represents set A and <code>t=1</code> represents set B):</p>\n\n<pre><code>      p_C = (1 - t) * p_A + t * p_B\n          = p_A - t * p_A + t * p_B\n          = p_A + t * (p_B - p_A)\np_C - p_A = t * (p_B - p_A)\n</code></pre>\n\n<p>The question now is to find a <code>t</code> that approximately holds for all your points.</p>\n\n<p>We can solve this by stating the problem as a linear least squares problem. I.e. we want to minimize the summed residuals (difference between left-hand sides and right-hand sides of the above equation) for all points:</p>\n\n<pre><code>arg min_t \u03a3_i (pi_C.x - pi_A.x - t * (pi_B.x - pi_A.x))^2\n               + (pi_C.y - pi_A.y - t * (pi_B.y - pi_A.y))^2\n</code></pre>\n\n<p>The optimal <code>t</code> is then:</p>\n\n<pre><code>numX = \u03a3_i (pi_A.x^2 - pi_A.x * pi_B.x - pi_A.x * pi_C.x + pi_B.x * pi_C.x)\nnumY = \u03a3_i (pi_A.y^2 - pi_A.y * pi_B.y - pi_A.y * pi_C.y + pi_B.y * pi_C.y)\ndenX = \u03a3_i (pi_A.x^2 - 2 * pi_A.x * pi_B.x + pi_B.x^2)\ndenY = \u03a3_i (pi_A.y^2 - 2 * pi_A.y * pi_B.y + pi_B.y^2)\nt = (numX + numY) / (denX + denY)\n</code></pre>\n\n<p>If your points have higher dimension, just add the new dimension with the same pattern.</p>\n"}], "owner": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1525328529, "creation_date": 1525271237, "question_id": 50137119, "link": "https://stackoverflow.com/questions/50137119/c-find-where-a-point-set-lies-between-two-others", "title": "C++ find where a point set lies between two others", "body": "<p>I have three sets of 2d points. What i need to do is to find out where one sits in relation to the other two.\nEvery set has the same points, in the same order. One is 'neutral', one is 'max', and the third is unknown. What I need is to return a single value, between 0 and 1, that illustrates the amount that the unknown set is between the other two. </p>\n\n<p>For example, in the image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/kxKY9.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kxKY9.jpg\" alt=\"points\"></a></p>\n\n<p>I would somehow get the 'distance' or 'weight' between Set A and Set B, then find out where Set C sits between them. In this example, i would expect a value of around 75%, or 0.75.</p>\n\n<p>I have looked at using point set registration algorithms that return a scale amount to match Set C to Set B, but i am not convinced that this is the best way. What approach would be suitable for this problem? What algorithms should I be searching for?</p>\n"}, {"tags": ["c++", "bitmap", "file-read"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1525271091, "post_id": 50137015, "comment_id": 87292268, "body": "So I&#39;m pretty sure you&#39;re using c++ because of the class and string; and cout.  But then what&#39;s this fopen about?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1525271354, "post_id": 50137015, "comment_id": 87292457, "body": "We have no idea what&#39;s in that file you&#39;re reading.  How about skipping the file reading for the sake of this question, and just hard-code the values in some sort of an array to verify that bitset &quot;doesn&#39;t work properly&quot;."}, {"owner": {"reputation": 822, "user_id": 9664339, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Chris H", "link": "https://stackoverflow.com/users/9664339/chris-h"}, "edited": false, "score": 1, "creation_date": 1525271801, "post_id": 50137015, "comment_id": 87292780, "body": "And what is the value of <code>sb.block_size</code>?  How far into the file are you seeking?"}, {"owner": {"reputation": 3812, "user_id": 7697209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0zmCe.png?s=128&g=1", "display_name": "Kostas", "link": "https://stackoverflow.com/users/7697209/kostas"}, "edited": false, "score": 0, "creation_date": 1525272140, "post_id": 50137015, "comment_id": 87293006, "body": "It looks like it should be working fine (at least the <code>bitset</code> stuff)"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1525272216, "post_id": 50137015, "comment_id": 87293054, "body": "Why is there no output for <code>c</code> after it has been read in?  You output everything else except the most important aspect of the issue."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1525297462, "post_id": 50137015, "comment_id": 87306234, "body": "what is <code>sb.block_size</code> and what is the &quot;bits per pixel&quot; for the bitmap file? Note that high color bitmaps use bytes to store the color."}], "answers": [{"tags": [], "owner": {"reputation": 437, "user_id": 3868157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea640d71ffc26471c0471a551fdc262?s=128&d=identicon&r=PG&f=1", "display_name": "cisnjxqu", "link": "https://stackoverflow.com/users/3868157/cisnjxqu"}, "is_accepted": false, "score": 0, "last_activity_date": 1525272341, "creation_date": 1525272341, "answer_id": 50137453, "question_id": 50137015, "link": "https://stackoverflow.com/questions/50137015/bitset-not-properly-extracting-bits/50137453#50137453", "title": "Bitset not properly extracting bits", "body": "<p>I believe the problem is rooted at <code>fread</code> failing.</p>\n\n<p>Try checking it's return value:</p>\n\n<p><code>if (fread(&amp;c, 1, 1, fp) != 1) { /* error! */ }</code></p>\n\n<p>You should also consider using <code>std::ifstream</code>, otherwise you are prone to leaking resources.</p>\n\n<p>Here are the methods you will require:</p>\n\n<pre><code>std::ifstream file(filename, std::ios::binary);\nfile.seekg(sb.block_size);\nif (!file.good()) { /* error! */ }\nfile.read(&amp;c, 1);\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 8572231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57e67e75f23767665b43727528d4e4a0?s=128&d=identicon&r=PG&f=1", "display_name": "631", "link": "https://stackoverflow.com/users/8572231/631"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1525272341, "creation_date": 1525270952, "last_edit_date": 1525271781, "question_id": 50137015, "link": "https://stackoverflow.com/questions/50137015/bitset-not-properly-extracting-bits", "title": "Bitset not properly extracting bits", "body": "<p>I am trying to read a bitmap from a binary file. I confirmed that the bytes are being written correctly to the binary file. I am now trying to open that binary file up, read the bytes, extract the bits from those bytes, and store them in an array. Bitset works for the first byte but fails for all proceeding bytes. </p>\n\n<pre><code>void loader::load_inode_map(string filename){\n    FILE *fp = fopen(filename.c_str(), \"rb+\");\n    fseek(fp, sb.block_size, SEEK_SET);\n    bitset&lt;8&gt; bit;\n    char c;\n\n    int count = 0;\n    for(int i = 0; i &lt; 32; i++){\n        fread(&amp;c, 1, 1, fp);\n        bit = c;\n        cout &lt;&lt; \"---new byte---\" &lt;&lt; endl;\n        for (int j = 7; j &gt;= 0; j--){\n            cout &lt;&lt; bit[j] &lt;&lt; endl;\n            inode_map[count] = bit[j];\n            count++;\n        }\n    }\n    fclose(fp);\n}\n</code></pre>\n\n<p>To test the functionality of this function, I set all of the bits to 1. This prints out for the first byte, but all of the bytes afterword are only printing out 0. What am I doing wrong?</p>\n\n<pre><code>Output:\n---new byte---\n1\n1\n1\n1\n1\n1\n1\n1\n---new byte---\n0\n0\n0\n0\n0\n0\n0\n0\n---new byte---\n0\n0\n0\n0\n0\n0\n0\n0\n...and so on.\n</code></pre>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1525271148, "post_id": 50137002, "comment_id": 87292314, "body": "Please format your question. The editor has a live preview and all the help tooltips you need. Also include the complete and exact error message so we can actually help you."}], "answers": [{"tags": [], "owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1525279219, "last_edit_date": 1525279219, "creation_date": 1525271757, "answer_id": 50137273, "question_id": 50137002, "link": "https://stackoverflow.com/questions/50137002/c-fill-a-2d-array-with-a-random-int-function-where-the-array-is-declared-by-u/50137273#50137273", "title": "C++ Fill a 2D array with a random int function, where the array is declared by user input", "body": "<p>Use vectors. Dynamic arrays <code>int array1[i][o];</code> are not documented in C++ standard.</p>\n\n<pre><code>...\n#include &lt;vector&gt;\n\nvoid fill_array(std::vector&lt;std::vector&lt;int&gt;&gt; &amp;arr) {\n    srand(time(NULL));\n    for (size_t i = 0; i &lt; arr.size(); i++) {\n        for (size_t j = 0; j &lt; arr[i].size(); j++) {\n            arr[i][j] = rand() % 10 + 20;\n        }\n    }\n}\n\nint main() {\n    ...\n    std::vector&lt;std::vector&lt;int&gt;&gt; array1(i, std::vector&lt;int&gt;(o));\n    fill_array(array1);\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9730769, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Nehuy", "link": "https://stackoverflow.com/users/9730769/nehuy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 50137273, "answer_count": 1, "score": 0, "last_activity_date": 1553546477, "creation_date": 1525270919, "last_edit_date": 1553546477, "question_id": 50137002, "link": "https://stackoverflow.com/questions/50137002/c-fill-a-2d-array-with-a-random-int-function-where-the-array-is-declared-by-u", "title": "C++ Fill a 2D array with a random int function, where the array is declared by user input", "body": "<p>I'm trying to make a c++ program where first the user declare a 2d array, I'm using this: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;ctime&gt; \nusing namespace std;\n\nint main() {\n    int i,o; \n    cout &lt;&lt; \"Ingress rows: \";\n    cin &gt;&gt; i; \n    cout &lt;&lt; \"Ingress columns: \"; \n    cin &gt;&gt; o;\n    int array1[i][o];\n}\n</code></pre>\n\n<p>So, what I want to do is a function wich receive those values and fill the 2d array with random runmbers, here is as far as I get (after trying and trying for hours):</p>\n\n<pre><code>void fill_array(int (*arr)[], size_t fila, size_t col) {\n    srand(time(NULL));\n    for (size_t i = 0; i &lt; fila; i++) {\n        for (size_t &gt; j = 0; j &lt; col; j++) {\n           arr[i][j] = rand() % 10 + 20;\n        }\n    }\n}\n</code></pre>\n\n<p>I constantly get the errors:</p>\n\n<blockquote>\n  <p>error: cannot convert 'int ()[o]' to 'int' for argument '1' to 'void fill_array(int, size_t, size_t)' \n  fill_array(array1,i,o); </p>\n</blockquote>\n\n<p>Any kind of help is more than welcome.\nThanks.</p>\n"}, {"tags": ["c++", "makefile"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1525271511, "post_id": 50136979, "comment_id": 87292578, "body": "Find out where <code>FPE_ExceptionHandler</code> is defined and link that in. From peeking the documentation I expect something like <code>utils.cpp</code>."}, {"owner": {"reputation": 113, "user_id": 9730755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef078e1a732beaae5d96a78a1777291f?s=128&d=identicon&r=PG", "display_name": "Liberty", "link": "https://stackoverflow.com/users/9730755/liberty"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1525272919, "post_id": 50136979, "comment_id": 87293570, "body": "@Quentin Thanks. but after including utils.cpp, i found more errors of the same kind that requiring further linkings of several .cpp files. I guess if i follow the errors i need to link all the source files in the src folder. should i do that?"}, {"owner": {"reputation": 113, "user_id": 9730755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef078e1a732beaae5d96a78a1777291f?s=128&d=identicon&r=PG", "display_name": "Liberty", "link": "https://stackoverflow.com/users/9730755/liberty"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1525272979, "post_id": 50136979, "comment_id": 87293611, "body": "Also can I ask you for the order of each cpps in g++ commands? for instance type utils.cpp before main.cpp etc"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1525273095, "post_id": 50136979, "comment_id": 87293694, "body": "I&#39;d expect a library to first be compiled independently into a .lib, which then gets linked by users. As for the order of .cpp files, I&#39;m not sure it matters, but if it does it usually has the dependent files first."}, {"owner": {"reputation": 113, "user_id": 9730755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef078e1a732beaae5d96a78a1777291f?s=128&d=identicon&r=PG", "display_name": "Liberty", "link": "https://stackoverflow.com/users/9730755/liberty"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1525273815, "post_id": 50136979, "comment_id": 87294174, "body": "@Quentin Can I ask you for the way to compile all the files in a folder(called src) and link them at once (using makefile)?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1525274110, "post_id": 50136979, "comment_id": 87294369, "body": "Yes, using <i>glob expressions</i>. But that&#39;s when you go back to Reading The Fantastic Manual ;)"}], "answers": [{"tags": [], "owner": {"reputation": 126, "user_id": 3913490, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/37dc6ae5f9ebd2eefeb6299a2bd528ff?s=128&d=identicon&r=PG&f=1", "display_name": "FrontMobe", "link": "https://stackoverflow.com/users/3913490/frontmobe"}, "is_accepted": false, "score": -1, "last_activity_date": 1525271250, "creation_date": 1525271250, "answer_id": 50137125, "question_id": 50136979, "link": "https://stackoverflow.com/questions/50136979/makefile-with-multiple-headers-and-namespace/50137125#50137125", "title": "makefile with multiple headers and namespace", "body": "<p>Maybe you should try to create a Makefile. \nThere you can compile the nmn.. to an object file and the decays.cpp to an object file. Finally you can compile your main.cpp. For a detailed explanation refer to <a href=\"http://www.cs.colby.edu/maxwell/courses/tutorials/maketutor/\" rel=\"nofollow noreferrer\">http://www.cs.colby.edu/maxwell/courses/tutorials/maketutor/</a></p>\n"}, {"tags": [], "owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "is_accepted": true, "score": 0, "last_activity_date": 1525275919, "last_edit_date": 1525275919, "creation_date": 1525275300, "answer_id": 50138425, "question_id": 50136979, "link": "https://stackoverflow.com/questions/50136979/makefile-with-multiple-headers-and-namespace/50138425#50138425", "title": "makefile with multiple headers and namespace", "body": "<p>First you have to compile the package itself and get the libraries, which your program link against later:</p>\n\n<p>What you have to do:</p>\n\n<pre><code>aclocal\n./configure\nmake\n</code></pre>\n\n<p>After that you have a lot of libraries like this ( static ones )</p>\n\n<pre><code>./.libs/libsoft.a\n./.libs/libtsil.a\n./.libs/libsupermodel.a\n</code></pre>\n\n<p>or this ones ( dynamic ones ):</p>\n\n<pre><code>./.libs/libsoft.so.0\n./.libs/libsupermodel.so.0\n./.libs/libsoft.so.0.0.0\n./.libs/libtsil.so.0\n./.libs/libtsil.so.0.0.0\n./.libs/libsupermodel.so.0.0.0\n./.libs/libsupermodel.so\n./.libs/libtsil.so\n./.libs/libsoft.so\n</code></pre>\n\n<p>If you now want to compile your <em>own</em> main.cpp project, you simply have\nto link against the libraries as needed. I can compile and link your main.cpp with the following command:</p>\n\n<pre><code>g++ main.cpp -I softsusy-4.1.1/src/ -L/home/krud/softsusy/softsusy-4.1.1/.libs -lsoft -ltsil -lsupermodel -o go\n</code></pre>\n\n<p>All that is written in the INSTALL and README files of the package and also in the docs of the package.</p>\n\n<p>If you have no idea how to link against a library, you have to start a new question because it has really nothing to do with Makefile and nothing todo with the mentioned source package.</p>\n\n<p>Info: I did it on my pc a minute ok by simply downloading version 4.1.1 as tgz. Unpacking and the 3 steps ahead I got everything ready to use. Only the <code>aclocal</code> was needed as addition,m because my box has a newer autotools version. </p>\n"}], "owner": {"reputation": 113, "user_id": 9730755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef078e1a732beaae5d96a78a1777291f?s=128&d=identicon&r=PG", "display_name": "Liberty", "link": "https://stackoverflow.com/users/9730755/liberty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 516, "favorite_count": 0, "accepted_answer_id": 50138425, "answer_count": 2, "score": 0, "last_activity_date": 1525275919, "creation_date": 1525270860, "last_edit_date": 1525271327, "question_id": 50136979, "link": "https://stackoverflow.com/questions/50136979/makefile-with-multiple-headers-and-namespace", "title": "makefile with multiple headers and namespace", "body": "<p>I am using a public c++ package that has various source files.<br>\nI compiled main.cpp which refers to various headers and uses a user-defined namespace with following code:</p>\n\n<pre><code>g++ -g main.cpp nmssmsoftsusy.cpp decays.cpp /path/config.h -o main\n</code></pre>\n\n<p>where main.cpp is</p>\n\n<pre><code>#include \"main.h\"\n#include \"nmssmsoftsusy.h\"\n#include \"decays.h\"\n\n#ifdef HAVE_CONFIG_H\n#include \"config.h\"\n#endif\n\nusing namespace softsusy;\n\nint main() {\n  /// Sets up exception handling\n  signal(SIGFPE, FPE_ExceptionHandler); \n</code></pre>\n\n<p>Then I got errors such as</p>\n\n<blockquote>\n  <p>undefined reference to `FPE_ExceptionHandler(int)'</p>\n</blockquote>\n\n<p>There are several errors of this kind even after I change .h to .cpp files or including softsusy.h.</p>\n\n<p>Can I ask you for the source of error in my compile command or for a suggestion of contents in makefile that i can try next time?</p>\n\n<p>Please notice that I am new to run the code using makefile and it would be amazing if you give or suggest me a brief explanation of how to organize makefile. Thanks.</p>\n"}, {"tags": ["c++", "matlab", "matlab-deployment", "matlab-coder"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1525271117, "post_id": 50136950, "comment_id": 87292285, "body": "Combine your two approaches.  Use MATLAB to generate the C++, then review the C++ to see if you can optimize.  You may want to optimize the MATLAB code before conversion."}, {"owner": {"reputation": 127, "user_id": 4477791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d202f32cd11dbd3534ab4bb125bca1?s=128&d=identicon&r=PG&f=1", "display_name": "MAh2014", "link": "https://stackoverflow.com/users/4477791/mah2014"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1525272448, "post_id": 50136950, "comment_id": 87293203, "body": "@ThomasMatthews Thanks,just one more thing ,does MATLAB coder use armadillo library or it handles matrix operations via loops?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1525272916, "post_id": 50136950, "comment_id": 87293568, "body": "I don&#39;t work at MATLAB, nor have I seen the source code.  You&#39;ll have to do the conversion to verify."}, {"owner": {"reputation": 724, "user_id": 9454255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDrB2.png?s=128&g=1", "display_name": "Jack C.", "link": "https://stackoverflow.com/users/9454255/jack-c"}, "edited": false, "score": 0, "creation_date": 1525309062, "post_id": 50136950, "comment_id": 87309046, "body": "I have more experience with Simulink Coder, but in that product the generated C++ code is very similar to the generated C code, and it doesn&#39;t depend on any kind of external matrix / linear algebra library.  I believe that MathWorks puts substantial effort into making efficient generated code."}], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 4477791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d202f32cd11dbd3534ab4bb125bca1?s=128&d=identicon&r=PG&f=1", "display_name": "MAh2014", "link": "https://stackoverflow.com/users/4477791/mah2014"}, "edited": false, "score": 1, "creation_date": 1525522515, "post_id": 50189104, "comment_id": 87395445, "body": "Thank you,that was very helpful."}], "tags": [], "owner": {"reputation": 1814, "user_id": 3297440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18b9a3c27ffed7a206aa03f34cde4bce?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Livingston", "link": "https://stackoverflow.com/users/3297440/ryan-livingston"}, "is_accepted": true, "score": 1, "last_activity_date": 1541384189, "last_edit_date": 1541384189, "creation_date": 1525521099, "answer_id": 50189104, "question_id": 50136950, "link": "https://stackoverflow.com/questions/50136950/convert-matlab-to-c-using-matlab-coder/50189104#50189104", "title": "Convert MATLAB to C++ using MATLAB coder", "body": "<p>As others have said, generating the code with MATLAB Coder, compiling it with your compiler's optimizations on, and measuring is the only way to know if your needs will be met.</p>\n\n<p>MATLAB Coder generates the code directly for most algorithms without using external libraries. In certain cases libraries may be used or may be requested by the user. Of particular interest for you may be BLAS and LAPACK integration.</p>\n\n<p>If you are doing linear algebra as part of your matrix operations, then consider configuring MATLAB Coder to call high-performance BLAS and LAPACK libraries of your choosing:</p>\n\n<p><a href=\"https://www.mathworks.com/help/coder/ug/speed-up-matrix-operations-in-generated-standalone-code-by-using-blas-calls.html\" rel=\"nofollow noreferrer\">https://www.mathworks.com/help/coder/ug/speed-up-matrix-operations-in-generated-standalone-code-by-using-blas-calls.html</a></p>\n\n<p><a href=\"https://www.mathworks.com/help/coder/ug/generate-code-that-calls-lapack-functions.html\" rel=\"nofollow noreferrer\">https://www.mathworks.com/help/coder/ug/generate-code-that-calls-lapack-functions.html</a></p>\n\n<p>That will cause MATLAB Coder to replace its algorithms with calls to the libraries you specify for linear algebra operations like <code>*, \\, linsolve, lu, svd, eig</code>, etc.</p>\n\n<p>MATLAB Coder provides suggestions for improving the performance of the generated code:</p>\n\n<p><a href=\"https://www.mathworks.com/help/coder/optimize-speed-of-generated-code.html\" rel=\"nofollow noreferrer\">https://www.mathworks.com/help/coder/optimize-speed-of-generated-code.html</a></p>\n\n<p>One possible approach in cases like this is to generate the code and profile it with a profiler like prof, VTune, AMD Codeanalyst, the Visual Studio performance tools, etc. If you find a few expensive kernels where the generated code may not meet your performance needs, hand write replacements for those parts with a C-like interface and integrate them with your generated code using <code>coder.ceval</code>.</p>\n"}], "owner": {"reputation": 127, "user_id": 4477791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d202f32cd11dbd3534ab4bb125bca1?s=128&d=identicon&r=PG&f=1", "display_name": "MAh2014", "link": "https://stackoverflow.com/users/4477791/mah2014"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1901, "favorite_count": 0, "accepted_answer_id": 50189104, "answer_count": 1, "score": 0, "last_activity_date": 1541384189, "creation_date": 1525270800, "last_edit_date": 1525545313, "question_id": 50136950, "link": "https://stackoverflow.com/questions/50136950/convert-matlab-to-c-using-matlab-coder", "title": "Convert MATLAB to C++ using MATLAB coder", "body": "<p>I'm going to convert a MATLAB code \"full of operations on matrices \" to C++ ,I'm not sure if MATLAB coder would generate an efficient C++ code.Is it better to convert it by hand although it's so time consuming?</p>\n"}, {"tags": ["c++", "cmake", "gdb"], "answers": [{"tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": false, "score": 0, "last_activity_date": 1525307586, "creation_date": 1525307586, "answer_id": 50145343, "question_id": 50136915, "link": "https://stackoverflow.com/questions/50136915/gdb-c-logging-multiple-variables-to-an-output-file-based-on-a-loop-conditi/50145343#50145343", "title": "GDB / C++ - Logging multiple variables to an output file based on a loop condition", "body": "<p>This:</p>\n\n<pre><code>if (l_num &gt;= 10 &amp;&amp; l_num &lt;= 20)\n&gt;break A.cpp: 28\n...\n</code></pre>\n\n<p>will only work if you have <code>l_num</code> in <em>current</em> context (i.e. if you are in the frame where variable <code>l_num</code> exists).</p>\n\n<p>It will also not do what you want: if <code>l_num</code> is between 10 and 20, it will set (multiple) breakpoints at <code>A.cpp:28</code>.</p>\n\n<p>What you appear to want is to set one breakpoint on <code>A.cpp:28</code>, but only enable that breakpoint when <code>l_num</code> is between 10 and 20.</p>\n\n<p><a href=\"https://stackoverflow.com/a/5372742/50617\">Here</a> is an example of how to do somewhat similar thing, which can be adapted to your use case.</p>\n"}], "owner": {"reputation": 770, "user_id": 4834108, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9ff8c9a23c77cf9ed7aeeb0709f54985?s=128&d=identicon&r=PG&f=1", "display_name": "skr_robo", "link": "https://stackoverflow.com/users/4834108/skr-robo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525307586, "creation_date": 1525270717, "last_edit_date": 1525272218, "question_id": 50136915, "link": "https://stackoverflow.com/questions/50136915/gdb-c-logging-multiple-variables-to-an-output-file-based-on-a-loop-conditi", "title": "GDB / C++ - Logging multiple variables to an output file based on a loop condition", "body": "<p>I am debugging a <code>C++</code> code using commandline <code>gdb</code> in <code>Ubuntu</code>. I have a <code>class A</code> with different functions <code>func1</code>, <code>func2</code> and <code>func3</code> each of which ends on lines <code>28</code>, <code>42</code> and <code>64</code> in the file <code>A.cpp</code>. The <code>func1</code> uses some local variables like <code>p1</code>, <code>q1</code> and class member variables such <code>a_r</code>, <code>a_t</code>. Similarly <code>func2</code> and <code>func3</code> have local variables such as <code>p2</code>, <code>q2</code> and <code>p3</code>, <code>q3</code>. The <code>func2</code> also uses another class member variable <code>a_s</code>. They also use some variables other than the ones mentioned here. Now these functions are called inside a loop with loop varaiable <code>l_num</code>. </p>\n\n<p>I would like to log the above variables to a <code>.txt</code> file when <code>l_num</code> has a value between <code>10</code> and <code>20</code>. I tried:</p>\n\n<pre><code>set logging on\nif (l_num &gt;= 10 &amp;&amp; l_num &lt;= 20)\n &gt;break A.cpp: 28\n &gt;commands\n  &gt;print a_r\n  &gt;print a_t\n  &gt;print p1\n  &gt;print q1\n  &gt;end\n &gt;break A.cpp: 42\n &gt;commands\n  &gt;print p2\n  &gt;print a_s\n  &gt;end\n &gt;break A.cpp: 64\n &gt;commands\n  &gt;print p3\n  &gt;print q3\n  &gt;end\n &gt;end\n</code></pre>\n\n<p><strong>But this threw an error: <code>No symbol \"l_num\" in current context.</code></strong></p>\n\n<p>I have <code>gdb version</code> = <code>7.11.1</code>, <code>gcc version</code>/ <code>g++ version</code> <code>5.4.0</code>. I am compiling using <code>cmake</code> in <code>Debug mode</code>. I have the following setting to turn off optimization:</p>\n\n<pre><code>set(CMAKE_CXX_FLAGS_DEBUG \"${CMAKE_CXX_FLAGS_DEBUG} -O0\")\n</code></pre>\n\n<p>Then in the terminal, I compile using:</p>\n\n<pre><code>cmake -DCMAKE_BUILD_TYPE=Debug .\n</code></pre>\n\n<p>I am relatively new to <code>GDB</code>. Kindly guide on this problem. </p>\n\n<p><strong>Edit:</strong> It is not actually right to call <code>l_num</code> as loop variable. It's just a variable that is updated with every run of the loop. The loop actually is reading lines of a file and is exited when <code>EOF</code> reached.</p>\n"}, {"tags": ["c++", "header", "sfml"], "comments": [{"owner": {"reputation": 162, "user_id": 9555953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c95ad33f64777f5592b0dc9b9da6cc67?s=128&d=identicon&r=PG", "display_name": "Nothing Mi", "link": "https://stackoverflow.com/users/9555953/nothing-mi"}, "edited": false, "score": 0, "creation_date": 1525270649, "post_id": 50136845, "comment_id": 87291909, "body": "show your code may be more clear on your question"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1525270677, "post_id": 50136845, "comment_id": 87291931, "body": "Probably you&#39;re using relative paths somewhere, and they&#39;re different depending on test project and main project. Hard to say without more information"}, {"owner": {"reputation": 1, "user_id": 5721627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GCxnh.png?s=128&g=1", "display_name": "David N", "link": "https://stackoverflow.com/users/5721627/david-n"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1525270949, "post_id": 50136845, "comment_id": 87292155, "body": "It&#39;s spread among 21 files, but sure. <a href=\"https://www.dropbox.com/sh/a7rqmp5rb1gh791/AABLlVs1V8hXRYqfCkJXQ2EGa?dl=0\" rel=\"nofollow noreferrer\">dropbox.com/sh/a7rqmp5rb1gh791/AABLlVs1V8hXRYqfCkJXQ2EGa?dl=&zwnj;&#8203;0</a>  @AndyG Every include is either &lt;&gt; to a basic header (like string or vector), &lt;&gt; to SFML/.. or &quot;&quot; to a local header (same folder)"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1525271151, "post_id": 50136845, "comment_id": 87292317, "body": "@DavidN: I don&#39;t want to look at the entire project. Perhaps you can compose a small reproducible example. a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> provide your compiler settings, your filesystem layout (what&#39;s relevant, e.g. where SFML is installed to vs where you code is), your project settings, perhaps even environment variables. Questions like this are usually difficult to debug via stackoverflow because they rely so heavily on what your environment looks like."}, {"owner": {"reputation": 1, "user_id": 5721627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GCxnh.png?s=128&g=1", "display_name": "David N", "link": "https://stackoverflow.com/users/5721627/david-n"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1525271345, "post_id": 50136845, "comment_id": 87292451, "body": "@AndyG Fair enough, problem is I tried (in that test project) to replicate the bug and I couldn&#39;t find it.  My compiler settings:  <a href=\"https://i.imgur.com/9DvVWWN.png\" rel=\"nofollow noreferrer\">i.imgur.com/9DvVWWN.png</a> //Compiler <a href=\"https://i.imgur.com/Q6mMwlw.png\" rel=\"nofollow noreferrer\">i.imgur.com/Q6mMwlw.png</a> //Linker  SFML is installed in E:/CPP/Libs/SFML The project is in E:/CPP/Rogue  No enviroment variable as far as I&#39;m aware.   Keep in mind these settings are the exact same in the project that compiles."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1525271382, "post_id": 50136845, "comment_id": 87292484, "body": "@DavidN: Comments on SO are transient; please place the relevant information into the question itself."}, {"owner": {"reputation": 1, "user_id": 5721627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GCxnh.png?s=128&g=1", "display_name": "David N", "link": "https://stackoverflow.com/users/5721627/david-n"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1525271449, "post_id": 50136845, "comment_id": 87292537, "body": "@AndyG You&#39;re right, my bad."}, {"owner": {"reputation": 874, "user_id": 3352222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6lYp.jpg?s=128&g=1", "display_name": "ravnsgaard", "link": "https://stackoverflow.com/users/3352222/ravnsgaard"}, "edited": false, "score": 0, "creation_date": 1527187887, "post_id": 50136845, "comment_id": 88045005, "body": "Something&#39;s weird in your setup. I think you have an issue with your IDE, or you have a mixup of settings. If you look at the compiler invocation in your log you have <code>codelite-cc &quot;C:&#47;Program Files (x86)&#47;CodeBlocks&#47;MinGW&#47;bin&#47;g++.exe&quot; -g -O0 -std=c++17 -std=c++14 -std=c++11 -Wall     Char.cpp   -o Char</code>. There are <i>no</i> include paths given at all. Hence g++ will only search the standard library and in your project directory."}], "owner": {"reputation": 1, "user_id": 5721627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GCxnh.png?s=128&g=1", "display_name": "David N", "link": "https://stackoverflow.com/users/5721627/david-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 962, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1525271525, "creation_date": 1525270502, "last_edit_date": 1525271525, "question_id": 50136845, "link": "https://stackoverflow.com/questions/50136845/no-such-file-or-directory-when-including-sfml-graphics-hpp-from-a-header-file", "title": "&quot;No such file or directory&quot; when including SFML/Graphics.hpp from a header file", "body": "<p>Everything compiles fine when I include this particular .hpp in a header in a test project I made with identical (copy-pasted) project settings (include path, linker path etc.). For some reason however, my project won't compile when trying to include it from a file deep in my header hierarchy. Headers have guards.</p>\n\n<p>Here's the log:</p>\n\n<pre><code>C:\\WINDOWS\\system32\\cmd.exe /C \"\"C:/Program Files (x86)/CodeBlocks/MinGW/bin/mingw32-make.exe\" -j4 SHELL=cmd.exe -e -f  Makefile\"\n\n\"----------Building project:[ Rogue - Debug ]----------\"\n\nmingw32-make.exe[1]: Entering directory 'E:/CPP/Rogue/Rogue'\ncodelite-cc \"C:/Program Files (x86)/CodeBlocks/MinGW/bin/g++.exe\" -g -O0 -std=c++17 -std=c++14 -std=c++11 -Wall     Char.cpp   -o Char\nIn file included from Item.h:7:0, //this says ' #include \"Entity.h\" '\n                 from Char.h:12, //this says ' #include \"Item.h\" '\n                 from Char.cpp:1:\nEntity.h:5:29: fatal error: SFML/Graphics.hpp: No such file or directory\ncompilation terminated.\nmingw32-make.exe[1]: *** [Char] Error 1\n&lt;builtin&gt;: recipe for target 'Char' failed\nmingw32-make.exe[1]: Leaving directory 'E:/CPP/Rogue/Rogue'\nmingw32-make.exe: *** [All] Error 2\nMakefile:4: recipe for target 'All' failed\n====3 errors, 1 warnings====\n</code></pre>\n\n<p>And here is my <a href=\"https://i.imgur.com/ANiETC2.png\" rel=\"nofollow noreferrer\">header \"hierarchy\"</a>. (A.h -> B.h means that A #includes B)</p>\n\n<p>defs.h and utils.h are irrelevant class-wise (they contain #defines and utility functions respectively.)</p>\n\n<p>My compiler settings:</p>\n\n<p><a href=\"https://%20i.imgur.com/9DvVWWN.png\" rel=\"nofollow noreferrer\">Compiler</a></p>\n\n<p><a href=\"https://%20i.imgur.com/Q6mMwlw.png\" rel=\"nofollow noreferrer\">Linker</a></p>\n\n<p>SFML is installed in E:/CPP/Libs/SFML</p>\n\n<p>The project is in E:/CPP/Rogue</p>\n\n<p>No enviroment variable as far as I'm aware.</p>\n"}, {"tags": ["c++", "qt", "qml"], "comments": [{"owner": {"reputation": 12454, "user_id": 79737, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/GaA88.jpg?s=128&g=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/79737/jay"}, "edited": false, "score": 0, "creation_date": 1525289516, "post_id": 50136715, "comment_id": 87302601, "body": "Did you see the examples that use a proxy model to do sorting and filtering?  <a href=\"http://doc.qt.io/qt-5/qtwidgets-itemviews-customsortfiltermodel-example.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/&hellip;</a>"}], "owner": {"reputation": 147, "user_id": 9722948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4f91908a299847ca6c829f5b100116b?s=128&d=identicon&r=PG&f=1", "display_name": "maxwell", "link": "https://stackoverflow.com/users/9722948/maxwell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 427, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1525274178, "creation_date": 1525270151, "last_edit_date": 1525274178, "question_id": 50136715, "link": "https://stackoverflow.com/questions/50136715/qml-itemselectionmodel-does-not-select", "title": "QML ItemSelectionModel does not select?", "body": "<p>I have a <code>TreeView</code> of a <code>QFileSystemModel</code> and an <code>ItemSelectionModel</code>:</p>\n\n<pre><code>ItemSelectionModel {\n  id: sel\n  model: fileSystemModel\n  onSelectedIndexesChanged: {\n    model.setSelected(selectedIndexes)\n  }\n}\n\nTreeView {\n  id: view\n  anchors.fill: parent\n  sortIndicatorVisible: true\n  model: fileSystemModel\n  rootIndex: rootPathIndex\n  selection: sel\n  selectionMode: 2\n  TableViewColumn {\n    id: namecolumn\n    title: \"Name\"\n    role: \"fileName\"\n    resizable: true\n    width: parent.width-sizeWidth-dateWidth-scrollBarWidth\n    delegate: mycomp\n  }\n  ... other columns\n}\n</code></pre>\n\n<p>When I sort the <code>TreeView</code> for the name or size of a file, the selection does not get updated. Therefore, in my fileSystemModel (derived from QFileSystemModel) I created a <code>Q_INVOKABLE</code> function which should store the selected indices:</p>\n\n<pre><code>Q_INVOKABLE void setSelected(QModelIndexList list) {\n    _selectedIndices.clear();\n    for(int i=0;i&lt;list.count();i++) {\n        _selectedIndices.append(QPersistentModelIndex(list[i]));\n    }\n}\n</code></pre>\n\n<p>However, I am not sure if this would work, as I am not sure whether the <code>ItemSelectionModel</code> indices are the same as the model indices.</p>\n\n<p>After sorting, I thought I try to set the selection via retrieving this list, on the c++ side:</p>\n\n<pre><code>Q_INVOKABLE QVariantList getSelected() {\n    return static_cast&lt;QVariantList&gt;(_selectedIndices);\n}\n</code></pre>\n\n<p>and  in QML</p>\n\n<pre><code>onSortIndicatorOrderChanged: {\n  var list = model.getSelected())\n  console.log('new selection:')\n  for(var idx in list) {\n    console.log(list[idx])\n    selection.select(list[idx],ItemSelectionModel.Select)\n    console.log('now selected')\n    console.log(selection.selectedIndexes)\n  }\n}\n</code></pre>\n\n<p>The debug output in <code>onSortIndicatorChanged</code> shows </p>\n\n<pre><code>qml: new selection:\nqml: QPersistentModelIndex(5,0,0x1e2ad30,DisplayFileSystemModel(0x1544890))\nqml: now selected\nqml: \nsort by column 0\nqml: new selection:\nqml: QPersistentModelIndex(1,0,0x1e2ad30,DisplayFileSystemModel(0x1544890))\nqml: now selected\nqml: \n</code></pre>\n\n<p>if I toggle the sortIndicator. So it seems that the row of the <code>QPersistentModelIndex</code> gets updated correctly. However, <code>selection.selectedIndexes</code> is empty and no selection is shown. What am I missing?</p>\n\n<p>A different way (maybe better) would be to access the QItemSelectionModel directly in c++, but I don't know how I would access that (without searching for its object name, which hurts reusability).</p>\n"}, {"tags": ["c++", "tbb"], "answers": [{"tags": [], "owner": {"reputation": 51325, "user_id": 474349, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/ZMmIm.png?s=128&g=1", "display_name": "Hong Ooi", "link": "https://stackoverflow.com/users/474349/hong-ooi"}, "is_accepted": false, "score": 1, "last_activity_date": 1525272901, "creation_date": 1525272901, "answer_id": 50137643, "question_id": 50136667, "link": "https://stackoverflow.com/questions/50136667/using-intel-tbb-in-debug-mode/50137643#50137643", "title": "Using Intel TBB in debug mode", "body": "<p>You have to put the <code>#define</code> <em>before</em> you include anything from the TBB library. In particular, make sure it comes before any <code>#include &lt;tbb&gt;</code> that may be in your source or header files.</p>\n"}, {"comments": [{"owner": {"reputation": 693, "user_id": 9345476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1496727017b724579cba99520f9ce45d?s=128&d=identicon&r=PG&f=1", "display_name": "Raphael D.", "link": "https://stackoverflow.com/users/9345476/raphael-d"}, "edited": false, "score": 0, "creation_date": 1525276109, "post_id": 50137780, "comment_id": 87295605, "body": "It seems like the best solution as I have many different files. Just to give a ready for use description for potential future readers, I added <code>-D TBB_USE_DEBUG=1</code> to the compilation flags."}], "tags": [], "owner": {"reputation": 1409, "user_id": 404501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c48feddb24a74e965554a0ba993d58aa?s=128&d=identicon&r=PG", "display_name": "Markus Kull", "link": "https://stackoverflow.com/users/404501/markus-kull"}, "is_accepted": true, "score": 0, "last_activity_date": 1525273333, "creation_date": 1525273333, "answer_id": 50137780, "question_id": 50136667, "link": "https://stackoverflow.com/questions/50136667/using-intel-tbb-in-debug-mode/50137780#50137780", "title": "Using Intel TBB in debug mode", "body": "<p>According to errortext, the define was inserted after includes. Meaning, it is very probably without any effect, because </p>\n\n<ul>\n<li>the define is evaluated only in previously included headers</li>\n<li>or because sources other than your main-function do not see the macro</li>\n</ul>\n\n<p>To fix this</p>\n\n<ul>\n<li>preferred: set the define for all source-files as compiler-parameter. That is often the <code>-D</code> parameter</li>\n<li>or set the define before any includes in ALL sources. Often done by a delegating header.</li>\n</ul>\n\n<p>I dont know how to test whether debug is active, as i dont know TBB.</p>\n"}], "owner": {"reputation": 693, "user_id": 9345476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1496727017b724579cba99520f9ce45d?s=128&d=identicon&r=PG&f=1", "display_name": "Raphael D.", "link": "https://stackoverflow.com/users/9345476/raphael-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 597, "favorite_count": 0, "accepted_answer_id": 50137780, "answer_count": 2, "score": 2, "last_activity_date": 1525273333, "creation_date": 1525270042, "question_id": 50136667, "link": "https://stackoverflow.com/questions/50136667/using-intel-tbb-in-debug-mode", "title": "Using Intel TBB in debug mode", "body": "<p>I am trying to debug a C++ code using Intel Thread Building Blocks, with the procedure I have found here \n<a href=\"https://stackoverflow.com/questions/32887113/debugging-in-threading-building-blocks/33088351#33088351\">Debugging in threading building Blocks</a>.\nMy question is related to the following sentence.</p>\n\n<blockquote>\n  <p>Be sure to compile with the macro TBB_USE_DEBUG set to 1 so that TBB's checking will be enabled.</p>\n</blockquote>\n\n<p>I have added the macro <code>#define TBB_USE_DEBUG 1</code>\nat the beginning of my main function. However, when compiling I get the following warning </p>\n\n<pre><code>warning: \"TBB_USE_DEBUG\" redefined\n #define TBB_USE_DEBUG 1\n/usr/include/tbb/tbb_config.h:287:0: note: this is the location of the previous definition\n #define TBB_USE_DEBUG 0\n</code></pre>\n\n<p>Hence my two questions:</p>\n\n<ul>\n<li>Did I put the macro at the good place ?</li>\n<li>How can I check that my code indeed linked with the debug library ?</li>\n</ul>\n"}, {"tags": ["c++", "pointers", "recursion", "tree", "cout"], "comments": [{"owner": {"reputation": 4457, "user_id": 6614295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2237f8dfeaec1273a07c97b3e1ebbde9?s=128&d=identicon&r=PG&f=1", "display_name": "jotasi", "link": "https://stackoverflow.com/users/6614295/jotasi"}, "edited": false, "score": 2, "creation_date": 1525270092, "post_id": 50136612, "comment_id": 87291477, "body": "Your problem is most likely that <code>get_nr_children</code> returns an <code>int</code> thus <code>nodes.size()</code> gets converted from <code>size_t</code> to <code>int</code> which then overflows."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1525270127, "post_id": 50136612, "comment_id": 87291499, "body": "This won&#39;t answer your question, but you should be aware that <code>add_child(*node);</code> puts a <i>copy</i> of <code>*node</code> in the children vector. Further changes (such as in <code>create_complete_tree</code>) to <code>note</code> will not be reflected in the copy you added."}], "answers": [{"tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": false, "score": 1, "last_activity_date": 1525270417, "creation_date": 1525270417, "answer_id": 50136814, "question_id": 50136612, "link": "https://stackoverflow.com/questions/50136612/vector-returns-negative-size-c/50136814#50136814", "title": "Vector returns negative size c++", "body": "<p>The problem is with the function <code>Node* Node::get_child(int i) const</code>. It returns a pointer to an object that is destroyed by the end of the function call.</p>\n\n<pre><code>Node* Node::get_child(int i) const {\n    if (i &gt;= nodes.size()) {\n        return NULL;\n    }\n    Node node = nodes[i]; // &lt;- node is a copy of nodes[i]\n    Node *ptrNode = &amp;node;\n    return ptrNode;       // &lt;- returns a pointer to node\n}                         // &lt;- local objects are destroyed, including node\n</code></pre>\n\n<p>You must return a pointer to the actual element from the vector.</p>\n\n<pre><code>Node* Node::get_child(int i) const {\n    if (i &gt;= nodes.size()) {\n        return NULL;\n    }\n    return  &amp;nodes[i]; // &lt;- Returns the address of the actual node\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "is_accepted": false, "score": 3, "last_activity_date": 1525270831, "last_edit_date": 1525270831, "creation_date": 1525270473, "answer_id": 50136832, "question_id": 50136612, "link": "https://stackoverflow.com/questions/50136612/vector-returns-negative-size-c/50136832#50136832", "title": "Vector returns negative size c++", "body": "<pre><code>Node* Node::get_child(int i) const {\n    if (i &gt;= nodes.size()) {\n        return NULL;\n    }\n    Node node = nodes[i];\n    Node *ptrNode = &amp;node;\n    return ptrNode;\n}\n</code></pre>\n\n<p>Above you return a pointer to destroyed local <code>Node node</code> after <code>get_child(i)</code> returned. Correct code is below, that returns a pointer to a child in the vector.</p>\n\n<pre><code>Node* Node::get_child(int i) const {\n    if (i &gt;= nodes.size()) {\n        return NULL;\n    }\n    return &amp;nodes[i];\n}\n</code></pre>\n\n<p><code>main</code> could be implemented much easier without pointers and memory leaks.</p>\n\n<pre><code>int main() {\n    Node root(\"root\");\n\n    root.add_child(Node(\"left child\"));\n    root.add_child(Node(\"right child\"));\n\n    root.print();\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 117, "user_id": 8144289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f901fd3345ffd72718b1856479b7e18?s=128&d=identicon&r=PG&f=1", "display_name": "rudolfwilliam", "link": "https://stackoverflow.com/users/8144289/rudolfwilliam"}, "edited": false, "score": 0, "creation_date": 1525272742, "post_id": 50136834, "comment_id": 87293426, "body": "That is what I initially tried to do, but then I received this error:      error: cannot initialize return object of type &#39;Node *&#39; with an rvalue of type &#39;const std::__1::__vector_base&lt;Node, std::__1::allocator&lt;Node&gt; &gt;::value_type *&#39; (aka &#39;const Node *&#39;)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 117, "user_id": 8144289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f901fd3345ffd72718b1856479b7e18?s=128&d=identicon&r=PG&f=1", "display_name": "rudolfwilliam", "link": "https://stackoverflow.com/users/8144289/rudolfwilliam"}, "edited": false, "score": 1, "creation_date": 1525272957, "post_id": 50136834, "comment_id": 87293596, "body": "@TheWill Oops.  I forgot the function is marked <code>const</code>.  You will either have to remove that, make the vector <code>mutable</code> or do a <code>const_cast</code> to remove the <code>const</code> of <code>nodes[i]</code>."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 3, "last_activity_date": 1525272992, "last_edit_date": 1525272992, "creation_date": 1525270476, "answer_id": 50136834, "question_id": 50136612, "link": "https://stackoverflow.com/questions/50136612/vector-returns-negative-size-c/50136834#50136834", "title": "Vector returns negative size c++", "body": "<p>Your problem stems from</p>\n\n<pre><code>this-&gt;get_child(i)-&gt;print();\n</code></pre>\n\n<p><code>get_child</code> returns a pointer to a local object.  That object is destroyed when the function returns so the call to <code>print</code> on that returned <code>Node</code> is working with an already destroyed <code>Node</code>.</p>\n\n<p>What you need to do is return a pointer directly to the vector element like</p>\n\n<pre><code>Node* Node::get_child(int i) /*const*/ { // cant be const for the return\n    if (i &gt;= nodes.size()) {\n        return NULL;\n    }\n    return &amp;nodes[i];\n}\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 8144289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f901fd3345ffd72718b1856479b7e18?s=128&d=identicon&r=PG&f=1", "display_name": "rudolfwilliam", "link": "https://stackoverflow.com/users/8144289/rudolfwilliam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1697, "favorite_count": 0, "accepted_answer_id": 50136834, "answer_count": 3, "score": 3, "last_activity_date": 1525272992, "creation_date": 1525269915, "question_id": 50136612, "link": "https://stackoverflow.com/questions/50136612/vector-returns-negative-size-c", "title": "Vector returns negative size c++", "body": "<p>For an exercize, I want to print out a tree data structure that is based on Node objects. This means, every object has a vector nodes that again holds other objects of type Node. But for some reason, when I let print out this->get_nr_children of the leaf nodes which basically just returns nodes.size(), I get completely random (negative) Integers where it should actually return 0. The even more interesting part: Every time I compile and execute, it prints out different Integers that alway are some low negative numbers. I do not have a clue what is happening!</p>\n\n<p>Node.h</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nclass Node\n{\npublic:\n    virtual ~Node();\n    Node(string name = \"\");\n    string get_name() const;\n    void set_name(string&amp; new_name);\n    int get_nr_children() const;\n    Node* get_child(int i) const;\n    void add_child(Node child);\n    void create_complete_tree(int nr_child_nodes, int tree_depth);\n    void print();\n\nprivate:\n    string name;\n    static int node_id;\n    vector&lt;Node&gt; nodes = {};\n};\n</code></pre>\n\n<p>Node.cpp</p>\n\n<pre><code>#include \"node.h\"\n#include &lt;sstream&gt;\n\nusing namespace std;\n\nNode::Node(string name) {\n    node_id++;\n    nodes = {};\n    if (name == \"\") {\n        stringstream str_sm;\n        str_sm &lt;&lt; (node_id);\n        string node_id_str = str_sm.str();\n        this-&gt;name = \"node_\" + node_id_str;\n    } else {\n        this-&gt;name = name;\n    }\n}\n\nNode::~Node() {\n    nodes.clear();\n    // node_id = 0;\n}\n\nint Node::node_id = 0;\n\nstring Node::get_name() const {\n    return name;\n}\n\nvoid Node::set_name(string&amp; new_name) {\n    this-&gt;name = new_name;\n}\n\n\nint Node::get_nr_children() const {\n    return nodes.size();\n}\n\nNode* Node::get_child(int i) const {\n    if (i &gt;= nodes.size()) {\n        return NULL;\n    }\n    Node node = nodes[i];\n    Node *ptrNode = &amp;node;\n    return ptrNode;\n}\n\nvoid Node::add_child(Node child) {\n    nodes.push_back(child);\n}\n\nvoid Node::create_complete_tree(int nr_child_nodes, int tree_depth) {\n    tree_depth--;\n    if (tree_depth &lt;= 0) {\n        return;\n    }\n    for (int i = 0; i &lt; nr_child_nodes; i++) {\n        Node* node = new Node();\n        this-&gt;add_child(*node);\n        node-&gt;create_complete_tree(nr_child_nodes, tree_depth);\n    }\n}\n\nvoid Node::print() {\n    cout &lt;&lt; this-&gt;get_name() &lt;&lt; \"\\n\";\n    cout &lt;&lt; \"I got this many children \" &lt;&lt; this-&gt;get_nr_children();\n    for (int i = 0; i &lt; this-&gt;get_nr_children(); i++) {\n        cout &lt;&lt; \"\\t\";\n        this-&gt;get_child(i)-&gt;print();\n        cout &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"node.cpp\"\n\nusing namespace std;\n\n    int main() {\n        Node* root = new Node(\"root\");\n        Node* left_child = new Node(\"left child\");\n        Node* right_child = new Node(\"right child\");\n\n        root-&gt;add_child(*left_child);\n        root-&gt;add_child(*right_child);\n\n        root-&gt;print();\n\n        return 0;\n    }\n</code></pre>\n\n<p>When I execute it I get:</p>\n\n<blockquote>\n  <p>root I got this many children 2   left child I got this many children\n  -62802357     right child I got this many children -62802357</p>\n  \n  <p>Process finished with exit code 0</p>\n</blockquote>\n"}, {"tags": ["c++", "multithreading", "asynchronous", "delay", "sleep"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1525269859, "post_id": 50136540, "comment_id": 87291307, "body": "<i>&quot;calculating the function execution time using std::chrono and subtracting it from the 1000ms parameter to sleep&quot;</i> This is one of the simplest ways, I&#39;d suggest it."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1525269870, "post_id": 50136540, "comment_id": 87291316, "body": "&quot;calculating the function execution time using std::chrono and subtracting it from the 1000ms&quot;: sounds like you have your answer already, what do you want from us exactly? <b>Edit</b> Oh come on!"}, {"owner": {"reputation": 1893, "user_id": 1787434, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/85f5a5c15e84e4a9aec84dc8be822010?s=128&d=identicon&r=PG", "display_name": "the_storyteller", "link": "https://stackoverflow.com/users/1787434/the-storyteller"}, "edited": false, "score": 1, "creation_date": 1525270138, "post_id": 50136540, "comment_id": 87291506, "body": "I did this once with hardware timer interrupts. The hardware will branch to a code address at 1000 ms (plus or minus about 1 clock cycle), execute the code (which should be short and take a lot less than 1000 ms, then return.  Hardware interrupts depend on hardware (no, duh), so I don&#39;t know if it will work for your specific scenario. It&#39;s just a good and accurate way to implement this."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1525273393, "post_id": 50136540, "comment_id": 87293899, "body": "Do you have some <a href=\"https://en.wikipedia.org/wiki/Event_loop\" rel=\"nofollow noreferrer\">event loop</a> ? What graphic libraries do you use in your game? <a href=\"https://www.sfml-dev.org/\" rel=\"nofollow noreferrer\">SFML</a> or <a href=\"http://qt.io/\" rel=\"nofollow noreferrer\">Qt</a> or what?"}, {"owner": {"reputation": 97, "user_id": 5083838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3dcf3773473070732f324e69586ff24?s=128&d=identicon&r=PG&f=1", "display_name": "Yosry", "link": "https://stackoverflow.com/users/5083838/yosry"}, "reply_to_user": {"reputation": 1893, "user_id": 1787434, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/85f5a5c15e84e4a9aec84dc8be822010?s=128&d=identicon&r=PG", "display_name": "the_storyteller", "link": "https://stackoverflow.com/users/1787434/the-storyteller"}, "edited": false, "score": 0, "creation_date": 1525274293, "post_id": 50136540, "comment_id": 87294476, "body": "@the_storyteller I know what you are talking about, but I have done similar stuff in embedded systems, not sure how can I do this in a desktop application."}, {"owner": {"reputation": 97, "user_id": 5083838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3dcf3773473070732f324e69586ff24?s=128&d=identicon&r=PG&f=1", "display_name": "Yosry", "link": "https://stackoverflow.com/users/5083838/yosry"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1525274409, "post_id": 50136540, "comment_id": 87294546, "body": "@BasileStarynkevitch nope, not in the context of this question. I believe it is called CMU graphics. It is not my choice, provided by TAs (college project)."}], "answers": [{"comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1525273485, "post_id": 50136975, "comment_id": 87293968, "body": "<code>Sleep</code> is specific to WinAPI. On POSIX, it could be something else, perhaps <a href=\"http://man7.org/linux/man-pages/man2/nanosleep.2.html\" rel=\"nofollow noreferrer\">nanosleep(2)</a> or maybe <a href=\"http://man7.org/linux/man-pages/man2/poll.2.html\" rel=\"nofollow noreferrer\">poll(2)</a>"}, {"owner": {"reputation": 3812, "user_id": 7697209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0zmCe.png?s=128&g=1", "display_name": "Kostas", "link": "https://stackoverflow.com/users/7697209/kostas"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1525276423, "post_id": 50136975, "comment_id": 87295811, "body": "@BasileStarynkevitch I used it from his example. I assumed sleep is a custom function he made."}], "tags": [], "owner": {"reputation": 3812, "user_id": 7697209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0zmCe.png?s=128&g=1", "display_name": "Kostas", "link": "https://stackoverflow.com/users/7697209/kostas"}, "is_accepted": false, "score": 2, "last_activity_date": 1525270856, "creation_date": 1525270856, "answer_id": 50136975, "question_id": 50136540, "link": "https://stackoverflow.com/questions/50136540/calling-a-function-every-1-second-precisely/50136975#50136975", "title": "Calling a function every 1 second (precisely)", "body": "<p>You can avoid using chrono for this simpler option instead. However, if you want \u03bcs-ns accuracy, I highly suggest using chrono.</p>\n\n<pre><code>#include &lt;ctime&gt;\n\nwhile(//some condition) {\n\n     std::clock_t start = std::clock();\n     update();\n     std::clock_t end   = std::clock();\n     Sleep(1000 - (end - start)/CLOCKS_PER_SEC * 1000);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 97, "user_id": 5083838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3dcf3773473070732f324e69586ff24?s=128&d=identicon&r=PG&f=1", "display_name": "Yosry", "link": "https://stackoverflow.com/users/5083838/yosry"}, "edited": false, "score": 0, "creation_date": 1525274607, "post_id": 50137677, "comment_id": 87294671, "body": "Thanks a lot ! but this kind of answer is what I meant by being too complicated for my simple scenario."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 97, "user_id": 5083838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3dcf3773473070732f324e69586ff24?s=128&d=identicon&r=PG&f=1", "display_name": "Yosry", "link": "https://stackoverflow.com/users/5083838/yosry"}, "edited": false, "score": 0, "creation_date": 1525275054, "post_id": 50137677, "comment_id": 87294942, "body": "Just <code>sleep_until</code> instead of <code>sleep_for</code>, and you&#39;ll be fine."}, {"owner": {"reputation": 97, "user_id": 5083838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3dcf3773473070732f324e69586ff24?s=128&d=identicon&r=PG&f=1", "display_name": "Yosry", "link": "https://stackoverflow.com/users/5083838/yosry"}, "edited": false, "score": 0, "creation_date": 1525275187, "post_id": 50137677, "comment_id": 87295029, "body": "Thanks, will look it up"}, {"owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "reply_to_user": {"reputation": 97, "user_id": 5083838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3dcf3773473070732f324e69586ff24?s=128&d=identicon&r=PG&f=1", "display_name": "Yosry", "link": "https://stackoverflow.com/users/5083838/yosry"}, "edited": false, "score": 0, "creation_date": 1525298467, "post_id": 50137677, "comment_id": 87306571, "body": "@Yosry the relevant part is: using namespace std; using namespace std::chrono; auto next = system_clock::now() + 1s; while (!stop_) { update(); this_thread::sleep_until(next); next += 1s; }"}, {"owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "edited": false, "score": 0, "creation_date": 1525298756, "post_id": 50137677, "comment_id": 87306667, "body": "The key is to get the starting timepoint via &quot;now&quot;, setting every next timepoint via incrementing with 1s and &quot;wait_until&quot; the next timepoint."}, {"owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "reply_to_user": {"reputation": 97, "user_id": 5083838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3dcf3773473070732f324e69586ff24?s=128&d=identicon&r=PG&f=1", "display_name": "Yosry", "link": "https://stackoverflow.com/users/5083838/yosry"}, "edited": false, "score": 0, "creation_date": 1525298906, "post_id": 50137677, "comment_id": 87306720, "body": "@Yosry you&#39;re wellcome. Hope you can use it. And it was seccpur&#39;s answer."}, {"owner": {"reputation": 23279, "user_id": 700825, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=128&d=identicon&r=PG", "display_name": "NoSenseEtAl", "link": "https://stackoverflow.com/users/700825/nosenseetal"}, "edited": false, "score": 0, "creation_date": 1529897414, "post_id": 50137677, "comment_id": 89024406, "body": "Is this approach resistant to clock changes? Because apparently condition variables are not. <a href=\"https://stackoverflow.com/questions/51005267/how-do-i-deal-with-the-system-clock-changing-while-waiting-on-a-stdcondition-v\" title=\"how do i deal with the system clock changing while waiting on a stdcondition v\">stackoverflow.com/questions/51005267/&hellip;</a>"}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1529898046, "post_id": 50137677, "comment_id": 89024497, "body": "One can wait on <code>steady_clock::time_points</code> and get resistance to clock changes.  A <code>steady_clock</code> is not adjustable.  That being said, the C++ API is ultimately a portable layer over OS API&#39;s, and no API is immune from bugs."}], "tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": true, "score": 7, "last_activity_date": 1525274225, "last_edit_date": 1525274225, "creation_date": 1525273030, "answer_id": 50137677, "question_id": 50136540, "link": "https://stackoverflow.com/questions/50136540/calling-a-function-every-1-second-precisely/50137677#50137677", "title": "Calling a function every 1 second (precisely)", "body": "<p>Instead of sleeping for a duration, you need to sleep <em>until</em> a time point.  For example, if your first update is at precisely 2:00:00.000, your future updates should come as closely as possible to 2:00:01.000, 2:00:02.000, etc.</p>\n\n<p>To achieve this you can dedicate a thread to updating, and after the update, goes to sleep <em>until</em> the next time to do a scheduled update.  <code>chrono::system_clock::time_point</code> and <code>this_thread::sleep_until</code> are your tools to do this.</p>\n\n<p>For example:</p>\n\n<pre><code>#include &lt;atomic&gt;\n#include &lt;chrono&gt;\n#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\nclass UpdateManager\n{\npublic:\n    explicit UpdateManager() = default;\n\nprivate:\n    static std::atomic&lt;int&gt; now_;\n    static std::atomic&lt;bool&gt; stop_;\n\n    struct update_thread\n        : private std::thread\n    {\n        ~update_thread();\n        update_thread(update_thread&amp;&amp;) = default;\n\n        using std::thread::thread;\n    };\n\npublic:\n    static update_thread start();\n};\n\nvoid update();\n\n// source\n\nstd::atomic&lt;int&gt;  UpdateManager::now_{0};\nstd::atomic&lt;bool&gt; UpdateManager::stop_{false};\n\nUpdateManager::update_thread::~update_thread()\n{\n    if (joinable())\n    {\n        stop_ = true;\n        join();\n    }\n}\n\nUpdateManager::update_thread\nUpdateManager::start()\n{\n    return update_thread{[]\n                         {\n                             using namespace std;\n                             using namespace std::chrono;\n                             auto next = system_clock::now() + 1s;\n                             while (!stop_)\n                             {\n                                 update();\n                                 this_thread::sleep_until(next);\n                                 next += 1s;\n                             }\n                         }};\n}\n\n#include \"date/date.h\"\n\nvoid\nupdate()\n{\n    using namespace date;\n    using namespace std;\n    using namespace std::chrono;\n    cerr &lt;&lt; system_clock::now() &lt;&lt; '\\n';\n}\n\n// demo\n\nint\nmain()\n{\n    auto t = UpdateManager::start();\n    using namespace std;\n    this_thread::sleep_for(10s);\n}\n</code></pre>\n\n<p>Just for demo purposes (not necessary for the logic), I'm using <a href=\"https://howardhinnant.github.io/date/date.html\" rel=\"noreferrer\">Howard Hinnant's, free, open-source date/time library</a> to print the current time (UTC) to microsecond precision in order to illustrate the stability of this technique.  A sample output of this program is:</p>\n\n<pre><code>2018-05-02 15:14:25.634809\n2018-05-02 15:14:26.637934\n2018-05-02 15:14:27.636629\n2018-05-02 15:14:28.637947\n2018-05-02 15:14:29.638413\n2018-05-02 15:14:30.639437\n2018-05-02 15:14:31.637217\n2018-05-02 15:14:32.637895\n2018-05-02 15:14:33.637749\n2018-05-02 15:14:34.639084\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 97, "user_id": 5083838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3dcf3773473070732f324e69586ff24?s=128&d=identicon&r=PG&f=1", "display_name": "Yosry", "link": "https://stackoverflow.com/users/5083838/yosry"}, "edited": false, "score": 0, "creation_date": 1525274722, "post_id": 50138020, "comment_id": 87294739, "body": "I don&#39;t know how to call a function asynchronously."}], "tags": [], "owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "is_accepted": false, "score": 0, "last_activity_date": 1525275357, "last_edit_date": 1525275357, "creation_date": 1525274035, "answer_id": 50138020, "question_id": 50136540, "link": "https://stackoverflow.com/questions/50136540/calling-a-function-every-1-second-precisely/50138020#50138020", "title": "Calling a function every 1 second (precisely)", "body": "<p>See this pseudo code. If every process ( which may take more than 1sec ) is done in separate threads asynchronously, you can sleep exactly 1 sec before next loop as desired. </p>\n\n<pre><code>void MainGameLoop(bool&amp; running)\n{\n    while (running)\n    {\n        AnimateSpritesAsync();\n        AnimateBulletsAsync();\n        CheckCollisionAsync();\n        CheckWinConditionsAsync();\n\n        WaitPreciselyOneSecond();\n    }\n}\n</code></pre>\n\n<p>For example your <code>update</code> function will look like this:</p>\n\n<pre><code>void update(); //your update \n\nvoid UpdateAsync()  // the async update\n{\n   std::thread([]() { update(); }).detach();\n}\n</code></pre>\n\n<p>Now you can:</p>\n\n<pre><code>void MainGameLoop(bool&amp; running)\n    {\n        while (running)\n        {\n            UpdateAsync();    \n            Sleep(1000); // i won't recommend Sleep tho\n        }\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7587629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/556bdf70b45c08c429eae017411cd9ee?s=128&d=identicon&r=PG&f=1", "display_name": "jfdoolster", "link": "https://stackoverflow.com/users/7587629/jfdoolster"}, "is_accepted": false, "score": 1, "last_activity_date": 1611344999, "creation_date": 1611344999, "answer_id": 65851843, "question_id": 50136540, "link": "https://stackoverflow.com/questions/50136540/calling-a-function-every-1-second-precisely/65851843#65851843", "title": "Calling a function every 1 second (precisely)", "body": "<p>The best way to ensure that something happens at the correct time is to use the <code>this_thread::sleep_until()</code> in the while loop, as a few others have recommended.</p>\n<p>I like to make sure that my loop starts at the bottom of the second so calculated <code>next_full_second</code> time point using chrono <code>time_since_epoch</code></p>\n<p><code>interval</code> variable can be set to seconds or milliseconds. Used <a href=\"https://github.com/HowardHinnant/date\" rel=\"nofollow noreferrer\">open source date library by HowardHinnant</a> to print out nice time values.</p>\n<pre><code>#include &lt;chrono&gt;\n#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\n#include &quot;date/date.h&quot;\n\nusing namespace date;\nusing namespace std;\nusing namespace std::chrono;\n\nint main()\n{\n\n    system_clock::time_point now = system_clock::now();\n    auto s = duration_cast&lt;seconds&gt;(now.time_since_epoch());\n    system_clock::time_point next_full_second = system_clock::time_point(++s);\n\n    auto interval = seconds(1); // or milliseconds(500) or whatever\n    auto wait_until = next_full_second;\n\n    while (1)\n    {\n        this_thread::sleep_until(wait_until);\n        cout &lt;&lt; system_clock::now() &lt;&lt; endl;\n\n        // do something\n\n        wait_until += interval;\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 5083838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3dcf3773473070732f324e69586ff24?s=128&d=identicon&r=PG&f=1", "display_name": "Yosry", "link": "https://stackoverflow.com/users/5083838/yosry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3334, "favorite_count": 0, "accepted_answer_id": 50137677, "answer_count": 4, "score": 3, "last_activity_date": 1611344999, "creation_date": 1525269690, "last_edit_date": 1525269894, "question_id": 50136540, "link": "https://stackoverflow.com/questions/50136540/calling-a-function-every-1-second-precisely", "title": "Calling a function every 1 second (precisely)", "body": "<p>I am working on a simple game simulation program in C++, there's a function called update() that updates the current state of the game, it has to be called every 1 second precisely. If I use a loop like this:</p>\n\n<pre><code>while(//some condition) {\n     update();\n     Sleep(1000);\n}\n</code></pre>\n\n<p>Then the function will not be called every 1 second, instead, every (1 + execution time of update () ).\nI read about various solutions like async functions, multithreading, or calculating the function's execution time using std::chrono and subtracting it from the 1000ms parameter to sleep. Some of those were too complicated for my simple case, and others seemed unsafe to use if I don't understand them really well.</p>\n\n<p>Can anyone tell me what would be a suitable solution to my requirement? \nThanks in advance.</p>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1525269759, "post_id": 50136515, "comment_id": 87291238, "body": "why do you think you have to do that? What happens when you try? Indeed you dont need an explicit loop to print a string"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 2, "creation_date": 1525270140, "post_id": 50136515, "comment_id": 87291509, "body": "There are a lot of problems here aside from the output thing. Notably you should not use the brackets operator without allocating for string."}, {"owner": {"reputation": 3812, "user_id": 7697209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0zmCe.png?s=128&g=1", "display_name": "Kostas", "link": "https://stackoverflow.com/users/7697209/kostas"}, "edited": false, "score": 0, "creation_date": 1525270277, "post_id": 50136515, "comment_id": 87291626, "body": "What error/bad output are you getting?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1525270298, "post_id": 50136515, "comment_id": 87291647, "body": "Avoid magic numbers as in <code>temp + 48</code>, and (wrong as I assume you use ASCII where <code>&#39;A&#39;</code> is <code>65</code>) <code>temp + 55</code>, <code>temp + &#39;0&#39;</code>, <code>temp + &#39;A&#39;</code> is clearer (but not portable either <code>&#39;A&#39;</code>-<code>&#39;Z&#39;</code> is not guaranty to be contiguous). You might use portable <code>&quot;0123456789ABCDEF&quot;[temp]</code> instead."}], "answers": [{"tags": [], "owner": {"reputation": 3812, "user_id": 7697209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0zmCe.png?s=128&g=1", "display_name": "Kostas", "link": "https://stackoverflow.com/users/7697209/kostas"}, "is_accepted": false, "score": 0, "last_activity_date": 1525270390, "creation_date": 1525270390, "answer_id": 50136807, "question_id": 50136515, "link": "https://stackoverflow.com/questions/50136515/c-printing-the-contents-of-a-string/50136807#50136807", "title": "c++ printing the contents of a string", "body": "<p>You are trying to access indices of a string out of bounds.\nIf instead of printing <code>solution(word)</code> you try to print <code>solution(word).size()</code> you will get '0', because the string is still empty.</p>\n\n<p>Try <code>hexaDeciNum.push_back(x)</code> when initializing the array. This will place the new character at the end of the current string.</p>\n"}, {"comments": [{"owner": {"reputation": 1011, "user_id": 9583271, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "arcoxia tom", "link": "https://stackoverflow.com/users/9583271/arcoxia-tom"}, "edited": false, "score": 0, "creation_date": 1525271265, "post_id": 50136924, "comment_id": 87292398, "body": "thanks for your kind help. I am wondering how come I can print the characters in the for loop if the string is empty? Thanks <code>for(int j=i-1; j&gt;=0; j--){         cout &lt;&lt; hexaDeciNum[j] &lt;&lt; &quot;\\n&quot;;</code>"}, {"owner": {"reputation": 1356, "user_id": 9657552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ksHjQ.png?s=128&g=1", "display_name": "Alexey Usachov", "link": "https://stackoverflow.com/users/9657552/alexey-usachov"}, "reply_to_user": {"reputation": 1011, "user_id": 9583271, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "arcoxia tom", "link": "https://stackoverflow.com/users/9583271/arcoxia-tom"}, "edited": false, "score": 0, "creation_date": 1525271840, "post_id": 50136924, "comment_id": 87292806, "body": "@arcoxiatom You were writing to the memory which is out of string&#39;s memory, it doesn&#39;t belong to <code>hexaDeciNum</code>. You changed memory which doesn&#39;t belong to <code>hexaDeciNum</code>, that&#39;s bad. You could change something another important data. So you need to use <code>push_back()</code> to change its value in right way. There are some others ways too."}], "tags": [], "owner": {"reputation": 1356, "user_id": 9657552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ksHjQ.png?s=128&g=1", "display_name": "Alexey Usachov", "link": "https://stackoverflow.com/users/9657552/alexey-usachov"}, "is_accepted": false, "score": 1, "last_activity_date": 1525270750, "creation_date": 1525270750, "answer_id": 50136924, "question_id": 50136515, "link": "https://stackoverflow.com/questions/50136515/c-printing-the-contents-of-a-string/50136924#50136924", "title": "c++ printing the contents of a string", "body": "<p>You return always empty string. Your <code>hexaDeciNum</code>'s length is always 0. You need to change its size when to paste symbols there. By <code>hexaDeciNum[i] = temp + 48;</code> you change the value of memory which not belongs to this string. <code>push_back()</code> will resize your your string and will add symbol at the end of the string. Change parts of code:</p>\n\n<pre><code>// check if temp &lt; 10\nif(temp &lt; 10)\n{\n    hexaDeciNum.push_back(temp + 48);\n    i++;\n}\nelse\n{\n    hexaDeciNum.push_back(temp + 55);\n    i++;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": 0, "last_activity_date": 1525271816, "last_edit_date": 1525271816, "creation_date": 1525270836, "answer_id": 50136967, "question_id": 50136515, "link": "https://stackoverflow.com/questions/50136515/c-printing-the-contents-of-a-string/50136967#50136967", "title": "c++ printing the contents of a string", "body": "<p>You're struggling from a lot of errors in your code. For starters the subscript operator you're using on <code>hexaDeciNum</code> is indexing out of bounds. Additionally you probably intended to allow <code>hexaDeciNum</code> to contain the characters 9 - 2 as well. If you add these checks you should see your output corrected.</p>\n\n<hr>\n\n<p>The best solution here is to use the standard builtin features to solve this:</p>\n\n<pre><code>string solution(string &amp;S){\n    const auto n = stoi(S);\n    const auto hexaDeciNum = static_cast&lt;ostringstream&amp;&gt;(ostringstream() &lt;&lt; hex &lt;&lt; uppercase &lt;&lt; n).str();\n\n    return all_of(cbegin(hexaDeciNum), cend(hexaDeciNum), [](const unsigned char i){ return isxdigit(i); }) ? hexaDeciNum : \"ERROR\"s;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/ovevJI\" rel=\"nofollow noreferrer\"><kbd>Live Example</kbd></a></p>\n"}], "owner": {"reputation": 1011, "user_id": 9583271, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "arcoxia tom", "link": "https://stackoverflow.com/users/9583271/arcoxia-tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1525271816, "creation_date": 1525269631, "question_id": 50136515, "link": "https://stackoverflow.com/questions/50136515/c-printing-the-contents-of-a-string", "title": "c++ printing the contents of a string", "body": "<p>Could somebody explain to me why I cannot print the string <code>hexaDeciNum</code> in the code below by using <code>cout &lt;&lt; hexaDeciNum</code> instead I have to loop through the characters like a c char array? I realise that this is a basic question apologies.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;cstdio&gt;\n\nusing namespace std;\n\nstring solution(string &amp;S){\n\n    int n = stoi(S);\n    int answer = 0;\n\n    // char array to store hexadecimal number\n    string hexaDeciNum;\n\n    // counter for hexadecimal number array\n    int i = 0;\n    while(n!=0)\n    {\n        // temporary variable to store remainder\n        int temp  = 0;\n\n        // storing remainder in temp variable.\n        temp = n % 16;\n\n        // check if temp &lt; 10\n        if(temp &lt; 10)\n        {\n            hexaDeciNum[i] = temp + 48;\n            i++;\n        }\n        else\n        {\n            hexaDeciNum[i] = temp + 55;\n            i++;\n        }\n\n        n = n/16;\n    }\n\n\n    // printing hexadecimal number array in reverse order\n    for(int j=i-1; j&gt;=0; j--){\n        //cout &lt;&lt; hexaDeciNum[j] &lt;&lt; \"\\n\";\n\n        if (hexaDeciNum[j] == 'A' or hexaDeciNum[j]=='B' or\n                    hexaDeciNum[j] == 'C' or hexaDeciNum[j] == 'D' or\n                    hexaDeciNum[j] == 'E' or hexaDeciNum[j] == 'F' or\n                    hexaDeciNum[j] == '1' or hexaDeciNum[j] == '0' ) {\n                    answer = 1;\n                }\n\n\n}\n\n    if (answer == 1){\n        return hexaDeciNum;\n    }\n    else {\n        return \"ERROR\";\n    }\n}\n\n\nint main() {\n\n    string word = \"257\";\n\n    cout &lt;&lt;  solution(word);\n\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 4, "creation_date": 1525269284, "post_id": 50136366, "comment_id": 87290857, "body": "The ascii value of <code>&#39;b&#39;</code> is <code>98</code> see this: <a href=\"https://www.asciitable.com/\" rel=\"nofollow noreferrer\">asciitable.com</a>"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 10, "creation_date": 1525269295, "post_id": 50136366, "comment_id": 87290862, "body": "Do you really need a full HD screenshot to convey the value <code>103</code>?"}, {"owner": {"reputation": 1512, "user_id": 7885750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/43lAl.jpg?s=128&g=1", "display_name": "Stephen M. Webb", "link": "https://stackoverflow.com/users/7885750/stephen-m-webb"}, "edited": false, "score": 4, "creation_date": 1525269304, "post_id": 50136366, "comment_id": 87290867, "body": "What did you expect to happen?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 2, "creation_date": 1525269376, "post_id": 50136366, "comment_id": 87290924, "body": "Now that&#39;s a pretty large font..."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1525269400, "post_id": 50136366, "comment_id": 87290952, "body": "If you right click on the text in the command window you can mark then select and click again. The text is copied to the clipboard which can be added to your question as text (which is preferred here over a picture of your screen)"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1525269473, "post_id": 50136366, "comment_id": 87291010, "body": "It&#39;s a <a href=\"https://en.cppreference.com/w/cpp/language/operator_arithmetic#Conversions\" rel=\"nofollow noreferrer\">usual arithmetic conversion</a>."}, {"owner": {"reputation": 177, "user_id": 9040929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aiJws.jpg?s=128&g=1", "display_name": "tah", "link": "https://stackoverflow.com/users/9040929/tah"}, "edited": false, "score": 0, "creation_date": 1525269524, "post_id": 50136366, "comment_id": 87291042, "body": "I actually expected it to crash ... But thanks for the help I learned something new !"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1525270020, "post_id": 50136366, "comment_id": 87291428, "body": "@RuhanUR Please don&#39;t use screenshots for text."}, {"owner": {"reputation": 177, "user_id": 9040929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aiJws.jpg?s=128&g=1", "display_name": "tah", "link": "https://stackoverflow.com/users/9040929/tah"}, "edited": false, "score": 0, "creation_date": 1525270097, "post_id": 50136366, "comment_id": 87291483, "body": "ok.. I just thought this was a glitch or bug so I added a picture"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1525270293, "post_id": 50136366, "comment_id": 87291644, "body": "No worries. Also do check out the other improvements I made, like removing chatty lines or the tag from the title, for future questions."}, {"owner": {"reputation": 177, "user_id": 9040929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aiJws.jpg?s=128&g=1", "display_name": "tah", "link": "https://stackoverflow.com/users/9040929/tah"}, "edited": false, "score": 0, "creation_date": 1525270416, "post_id": 50136366, "comment_id": 87291731, "body": "cool.. Now the question is Understandable"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1525270517, "post_id": 50136366, "comment_id": 87291811, "body": "If you start doing a lot of math using <code>char</code> and relying on its implicit conversion to <code>int</code>, keep in mind that <code>char</code> can be signed or unsigned.  It&#39;s platform dependent.  So if you need it to be one or the other, explicitly use <code>signed char</code> or <code>unsigned char</code>, or use the <code>c &amp; 0xFF</code> trick to force the <code>int</code> value to be in the 0 ... 255 range.  (The trick presumes 2s complement.)"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1525270710, "post_id": 50136366, "comment_id": 87291958, "body": "@Eljay <code>char</code> need not even have 8 bits, but granted, those who work on systems where it has more than 8 usually know this anyway."}, {"owner": {"reputation": 177, "user_id": 9040929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aiJws.jpg?s=128&g=1", "display_name": "tah", "link": "https://stackoverflow.com/users/9040929/tah"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1525270867, "post_id": 50136366, "comment_id": 87292078, "body": "Although I don&#39;t think i would be using char to do math But @Eljay I will try and experiment with those c &amp; 0xFF trick you said Just for funs.. Also curiosity.. I will search those tricks"}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 9040929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aiJws.jpg?s=128&g=1", "display_name": "tah", "link": "https://stackoverflow.com/users/9040929/tah"}, "edited": false, "score": 0, "creation_date": 1525269703, "post_id": 50136401, "comment_id": 87291188, "body": "Now i get it ! Now it makes Sense ! Btw does it only work for letters Or does it even work for mathematical symbols as well like +,- ?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 177, "user_id": 9040929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aiJws.jpg?s=128&g=1", "display_name": "tah", "link": "https://stackoverflow.com/users/9040929/tah"}, "edited": false, "score": 1, "creation_date": 1525269750, "post_id": 50136401, "comment_id": 87291231, "body": "@RuhanUR: Any <code>char</code> literal like <code>&#39;+&#39;</code> will be promoted to at least an <code>int</code> when used in an arithmetic expression."}, {"owner": {"reputation": 3812, "user_id": 7697209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0zmCe.png?s=128&g=1", "display_name": "Kostas", "link": "https://stackoverflow.com/users/7697209/kostas"}, "reply_to_user": {"reputation": 177, "user_id": 9040929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aiJws.jpg?s=128&g=1", "display_name": "tah", "link": "https://stackoverflow.com/users/9040929/tah"}, "edited": false, "score": 1, "creation_date": 1525269843, "post_id": 50136401, "comment_id": 87291295, "body": "@RuhanUR Yes, it works for a lot of symbols (including +, *, space, &#39;1&#39;). Check the <b>hyperlink</b> on the answer"}, {"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1525280652, "post_id": 50136401, "comment_id": 87298154, "body": "Well, not actually ASCII itself, but always the execution character encoding. (See the relevant compiler option: /execution-charset,  -fexec-charset, \u2026.)"}], "tags": [], "owner": {"reputation": 3812, "user_id": 7697209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0zmCe.png?s=128&g=1", "display_name": "Kostas", "link": "https://stackoverflow.com/users/7697209/kostas"}, "is_accepted": true, "score": 14, "last_activity_date": 1529528678, "last_edit_date": 1529528678, "creation_date": 1525269321, "answer_id": 50136401, "question_id": 50136366, "link": "https://stackoverflow.com/questions/50136366/what-is-the-result-of-adding-a-char-and-an-int/50136401#50136401", "title": "What is the result of adding a char and an int?", "body": "<p>When you add a <code>char</code> to an <code>int</code>, the (p)r-value created is promoted to an <code>int</code>. Therefore what is printed is the <code>int</code> equivalent to the sum of the (usually) <a href=\"https://www.asciitable.com/\" rel=\"nofollow noreferrer\">ASCII</a> value + the int. </p>\n\n<p>The ASCII value of 'b' is <code>'b' == 98</code>. Therefore <code>98 + 5 == 103 (integer)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 5, "last_activity_date": 1525269464, "creation_date": 1525269464, "answer_id": 50136448, "question_id": 50136366, "link": "https://stackoverflow.com/questions/50136366/what-is-the-result-of-adding-a-char-and-an-int/50136448#50136448", "title": "What is the result of adding a char and an int?", "body": "<p><code>a + x</code> is evaluated as <code>a + (int)x</code> as the <code>x</code> is promoted to an <code>int</code>.</p>\n\n<p><code>a</code> is 5. The value of <code>x</code> depends on the <em>encoding</em> used by your platform; most likely ASCII, which is 98. The result 103 is attained.</p>\n"}], "owner": {"reputation": 177, "user_id": 9040929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aiJws.jpg?s=128&g=1", "display_name": "tah", "link": "https://stackoverflow.com/users/9040929/tah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "accepted_answer_id": 50136401, "answer_count": 2, "score": 3, "last_activity_date": 1529528678, "creation_date": 1525269189, "last_edit_date": 1525270881, "question_id": 50136366, "link": "https://stackoverflow.com/questions/50136366/what-is-the-result-of-adding-a-char-and-an-int", "title": "What is the result of adding a char and an int?", "body": "<p>When executing this code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main(){\n\n   int a = 5;\n   char x = 'b';\n\n   std::cout &lt;&lt; \"The Answer is\" &lt;&lt; std::endl;\n   std::cout &lt;&lt; a+x;\n}\n</code></pre>\n\n<p>I get the output:</p>\n\n<blockquote>\n  <p>The Answer is<br>\n  103</p>\n</blockquote>\n\n<p>Why does this happen?</p>\n"}, {"tags": ["c#", "c++", "dll", "interop", "dllimport"], "comments": [{"owner": {"reputation": 3415, "user_id": 1198474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pUCYm.jpg?s=128&g=1", "display_name": "salocinx", "link": "https://stackoverflow.com/users/1198474/salocinx"}, "reply_to_user": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 0, "creation_date": 1525269144, "post_id": 50136242, "comment_id": 87290749, "body": "Wow that&#39;s it :) ! Please make an answer and I&#39;ll check it as solution. Thank you!"}, {"owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 0, "creation_date": 1525269261, "post_id": 50136242, "comment_id": 87290841, "body": "No problem. :-] Sorry for the brief answer, on mobile at the moment."}, {"owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 0, "creation_date": 1525269468, "post_id": 50136242, "comment_id": 87291007, "body": "As an aside, are you in full control of both the C++ side and the C# side of the code? Because <code>SendFrame</code> could be easily changed to obviate the need for <code>point2array</code> (pretty hideous as-is)..."}], "answers": [{"tags": [], "owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "is_accepted": true, "score": 3, "last_activity_date": 1525269217, "creation_date": 1525269217, "answer_id": 50136372, "question_id": 50136242, "link": "https://stackoverflow.com/questions/50136242/how-to-pass-struct-from-c-to-c-dll/50136372#50136372", "title": "How to pass struct from C# to C++ DLL?", "body": "<p>Arrays are already reference types, so <code>ref byte[]</code> is a double indirection, akin to <code>byte**</code> \u2014 lose the <code>ref</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 3415, "user_id": 1198474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pUCYm.jpg?s=128&g=1", "display_name": "salocinx", "link": "https://stackoverflow.com/users/1198474/salocinx"}, "edited": false, "score": 0, "creation_date": 1525271885, "post_id": 50137177, "comment_id": 87292842, "body": "Thank you very much for your answer and suggestion. I had <code>ref LaserPoint[] pData</code> before which didn&#39;t work. But <code>LaserPoint[] pData</code> works fine too :-) Seems I did another mistake with pointers before. I will discard my silly <code>point2array</code> function."}], "tags": [], "owner": {"reputation": 1045, "user_id": 1600476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cE94p.png?s=128&g=1", "display_name": "Richard Matheson", "link": "https://stackoverflow.com/users/1600476/richard-matheson"}, "is_accepted": false, "score": 1, "last_activity_date": 1525271446, "creation_date": 1525271446, "answer_id": 50137177, "question_id": 50136242, "link": "https://stackoverflow.com/questions/50136242/how-to-pass-struct-from-c-to-c-dll/50137177#50137177", "title": "How to pass struct from C# to C++ DLL?", "body": "<p>If you only intend to use LaserPoint structs here you can define the function as</p>\n\n<pre><code>[DllImport(\"..\\\\..\\\\dll\\\\StclDevices.dll\", CallingConvention=CallingConvention.Cdecl)]\npublic static extern int SendFrame(UInt32 deviceIndex, LaserPoint[] pData, UInt32 numOfPoints, UInt32 scanrate);\n</code></pre>\n\n<p>And get rid of the copying and let the runtime do that for you. </p>\n\n<p>Otherwise as ildjarn says, getting rid of ref should work, as byte arrays are already reference (pointer) types.</p>\n\n<p>For examples of how to do this stuff, the <a href=\"https://www.pinvoke.net\" rel=\"nofollow noreferrer\">PInvoke wiki</a> has got structs and signatures for most of the windows API, so while your call won't be there, there are lots of similar examples.</p>\n"}], "owner": {"reputation": 3415, "user_id": 1198474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pUCYm.jpg?s=128&g=1", "display_name": "salocinx", "link": "https://stackoverflow.com/users/1198474/salocinx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1613, "favorite_count": 0, "accepted_answer_id": 50136372, "answer_count": 2, "score": 2, "last_activity_date": 1525271446, "creation_date": 1525268828, "last_edit_date": 1525269063, "question_id": 50136242, "link": "https://stackoverflow.com/questions/50136242/how-to-pass-struct-from-c-to-c-dll", "title": "How to pass struct from C# to C++ DLL?", "body": "<p>Ok my series of problems with a laser device controller goes on... I want to call the following C++ function within a DLL from my C# code:</p>\n\n<pre><code>extern \"C\" _declspec(dllimport) int SendFrame(DWORD deviceIndex, byte* pData, DWORD numOfPoints, DWORD scanrate);\n</code></pre>\n\n<p>The pointer <code>pData</code> points to an array of laser points that are defined in the C++ header file as follows:</p>\n\n<pre><code>#pragma pack (1)\nstruct LaserPoint {\n    WORD x;\n    WORD y;\n    byte colors[6];\n};\n</code></pre>\n\n<p>On the C# side I defined the function import as follows:</p>\n\n<pre><code>[DllImport(\"..\\\\..\\\\dll\\\\StclDevices.dll\", CallingConvention = CallingConvention.Cdecl)]\npublic static extern int SendFrame(UInt32 deviceIndex, ref byte[] pData, UInt32 numOfPoints, UInt32 scanrate);\n</code></pre>\n\n<p>... and the <code>LaserPoint</code> struct like this:</p>\n\n<pre><code>[StructLayout(LayoutKind.Sequential, Pack=1)]\npublic struct LaserPoint {\n    public UInt16 x;\n    public UInt16 y;\n    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 6)]\n    public byte[] colors;\n}\n</code></pre>\n\n<p>Then I call the <code>SendFrame</code> function like that:</p>\n\n<pre><code>LaserPoint point = new LaserPoint();\npoint.x = 16384;\npoint.y = 32768;\npoint.colors = new byte[] {255, 0, 0, 0, 0, 0};\n\nbyte[] arr = point2array(points);\nSendFrame(0, ref arr, 1, 30000);\n</code></pre>\n\n<p>This is my function to convert the <code>LaserPoint</code> struct instance to a byte array:</p>\n\n<pre><code>private static byte[] point2array(object obj) {\n    int len = Marshal.SizeOf(obj);\n    byte[] arr = new byte[len];\n    IntPtr ptr = Marshal.AllocHGlobal(len);\n    Marshal.StructureToPtr(obj, ptr, true);\n    Marshal.Copy(ptr, arr, 0, len);\n    Marshal.FreeHGlobal(ptr);\n    return arr;\n}\n</code></pre>\n\n<p>But my laser device does not receive correct input, since the laser behaves very weird. Using the same code within the C++ project works fine. So the bug is somewhere with this C# interoperability code.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["c++", "parallel-processing", "pthreads"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1525268868, "post_id": 50136160, "comment_id": 87290530, "body": "&quot;Swapping&quot; between different threads of execution have been happening since multitasking was invented 50 or 60 years ago. If your system supports 8 simultaneous threads then such swapping needs to happen. And that swapping also includes all the other programs and their processes and threads running on your system."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1525268956, "post_id": 50136160, "comment_id": 87290604, "body": "<a href=\"http://en.cppreference.com/w/cpp/thread/thread/hardware_concurrency\" rel=\"nofollow noreferrer\"><code>std::thread::hardware_concurency</code></a> may be of interest to you."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 6352756, "user_type": "registered", "profile_image": "https://graph.facebook.com/1106631082734570/picture?type=large", "display_name": "Ali Nouri", "link": "https://stackoverflow.com/users/6352756/ali-nouri"}, "edited": false, "score": 0, "creation_date": 1525270148, "post_id": 50136410, "comment_id": 87291516, "body": "Thanks for your complete answer! So following what you said, even if I have 8 threads, they are not going to be parallel anyways, since the OS is not handling only my program..."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 57, "user_id": 6352756, "user_type": "registered", "profile_image": "https://graph.facebook.com/1106631082734570/picture?type=large", "display_name": "Ali Nouri", "link": "https://stackoverflow.com/users/6352756/ali-nouri"}, "edited": false, "score": 0, "creation_date": 1525270550, "post_id": 50136410, "comment_id": 87291831, "body": "They will likely be in parallel at some point; and also they will likely not be in parallel also at some point.  This is why thread syncronisation is so important."}, {"owner": {"reputation": 57, "user_id": 6352756, "user_type": "registered", "profile_image": "https://graph.facebook.com/1106631082734570/picture?type=large", "display_name": "Ali Nouri", "link": "https://stackoverflow.com/users/6352756/ali-nouri"}, "edited": false, "score": 0, "creation_date": 1525272505, "post_id": 50136410, "comment_id": 87293247, "body": "Is it a correct way to use structures such as timeval in C++ and calculate the time inside each thread? Basically what each thread does in my application is to create and open a UDP socket and listen on a specific port inside a while loop for realtime data coming from other linux machines."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 57, "user_id": 6352756, "user_type": "registered", "profile_image": "https://graph.facebook.com/1106631082734570/picture?type=large", "display_name": "Ali Nouri", "link": "https://stackoverflow.com/users/6352756/ali-nouri"}, "edited": false, "score": 0, "creation_date": 1525272993, "post_id": 50136410, "comment_id": 87293625, "body": "@AliNouri <a href=\"https://stackoverflow.com/questions/44916362/how-can-i-measure-cpu-time-of-a-specific-set-of-threads\" title=\"how can i measure cpu time of a specific set of threads\">stackoverflow.com/questions/44916362/&hellip;</a>  just remember:  1.  your thread can be context switched at any time.  including just before/after getting any time information.   2.  if a thread is blocked (eg in a <code>read()</code>); then the OS will switch it out."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 57, "user_id": 6352756, "user_type": "registered", "profile_image": "https://graph.facebook.com/1106631082734570/picture?type=large", "display_name": "Ali Nouri", "link": "https://stackoverflow.com/users/6352756/ali-nouri"}, "edited": false, "score": 0, "creation_date": 1525273090, "post_id": 50136410, "comment_id": 87293691, "body": "on linux; you can change the &quot;niceness&quot; of a process and it&#39;s threads, (<code>man nice</code>) which will encourage the OS to give your threads processing time over others."}, {"owner": {"reputation": 57, "user_id": 6352756, "user_type": "registered", "profile_image": "https://graph.facebook.com/1106631082734570/picture?type=large", "display_name": "Ali Nouri", "link": "https://stackoverflow.com/users/6352756/ali-nouri"}, "edited": false, "score": 0, "creation_date": 1525273869, "post_id": 50136410, "comment_id": 87294202, "body": "I understand the point that this swamping can happen before or after getting the time information, however if each thread is changing the value of an integer for example, then capturing the time between these alternation of the integer value inside the main() can give me informations regarding the time took for each thread. I already know that it takes 3ms for each data to be streamed to the thread and amazingly when I capture this time it is around 3~4 ms.. which is inconsistent with the fact that swapping can take orders of 10~20ms if its happening..."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 57, "user_id": 6352756, "user_type": "registered", "profile_image": "https://graph.facebook.com/1106631082734570/picture?type=large", "display_name": "Ali Nouri", "link": "https://stackoverflow.com/users/6352756/ali-nouri"}, "edited": false, "score": 0, "creation_date": 1525275133, "post_id": 50136410, "comment_id": 87294993, "body": "@AliNouri <a href=\"https://stackoverflow.com/questions/21887797/what-is-the-overhead-of-a-context-switch\" title=\"what is the overhead of a context switch\">stackoverflow.com/questions/21887797/&hellip;</a>   10 ms is at least 3 orders of magnitude out.  (roughly 10us for a switch)"}, {"owner": {"reputation": 57, "user_id": 6352756, "user_type": "registered", "profile_image": "https://graph.facebook.com/1106631082734570/picture?type=large", "display_name": "Ali Nouri", "link": "https://stackoverflow.com/users/6352756/ali-nouri"}, "edited": false, "score": 0, "creation_date": 1525285426, "post_id": 50136410, "comment_id": 87300589, "body": "Just to ask the last question to clarify everything for myself. So if some pthreads include I/O such as streaming data via UDP or streaming images from camera, the in this case is not worth to spend the thread time waiting for response. And here is exactly where swapping happens. So the questions are 1) does the C++ program handle this itself ? second, at the end this is somehow designed in a way (all the swapping) that the result in term of timing is like if all 10 threads where actually running in parallel?  (in case we have I/O inside threads)"}, {"owner": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "edited": false, "score": 0, "creation_date": 1562011436, "post_id": 50136410, "comment_id": 100235540, "body": "For real-time applications, sometimes you need a true hard real-time OS. That will give you much more control than you get with a best-effort Unix-type kernel. Of course, Linux has some real-time elements like the SCHED_DEADLINE scheduler and the rt patches. Those are sometimes all you need."}], "tags": [], "owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "is_accepted": true, "score": 1, "last_activity_date": 1525269343, "creation_date": 1525269343, "answer_id": 50136410, "question_id": 50136160, "link": "https://stackoverflow.com/questions/50136160/maximum-number-of-threads-how-to-determine-if-your-c-pthreads-are-running-in/50136410#50136410", "title": "maximum number of threads - How to determine if your C++ pthreads are running in parallel?", "body": "<blockquote>\n  <p>\"To my knowledge the exact number of threads ... \"</p>\n</blockquote>\n\n<p>of a sort - there's also hyper-threading that scews things; and there's also the fact that C++ can be run on non-PC's. (ie embedded devices) which will have a static number. </p>\n\n<blockquote>\n  <p>\"is what the scheduler does\"</p>\n</blockquote>\n\n<p>Yes.  But not just your threads; all the threads, of the OS, and other applications also get controlled by this.</p>\n\n<blockquote>\n  <p>or at least can I know how many milliseconds does this swapping takes</p>\n</blockquote>\n\n<p>No; and nor does it matter since you can't do anything about it.  The best you can do is try to track how much CPU time you've had on your thread, work out the total CPU time available to a single thread; and then you can work out what % of the time you've had; but again, you shouldn't need to do this ever because it likely means your program is worrying about things outside it's control.  More meaningful would be to monitor the CPU usage of the machine.</p>\n\n<blockquote>\n  <p>Since my application is dealing with real time data, its crucial to\n  make sure all the threads are running in parallel.</p>\n</blockquote>\n\n<p>It's not up to you about how your threads run; it's up to the OS.  There are other more important tasks on your computer than your program.  For example the OS needs processing time to handle any requests for memory made by applications.</p>\n\n<p>Some OS's are actually able to do do this in a more specialised way; Qnix for example is a real time OS; but this comes at other costs.</p>\n\n<p>One thing you can be sure though; is that if you have a maximum number of possible threads running as 8; and you create 10; you will not have them all running in parallel.  You may wish to look into some libraries that will help ensure that the threads you create are always busy; <code>boost::asio</code> for example</p>\n"}, {"comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1525272577, "post_id": 50136872, "comment_id": 87293293, "body": "timeBeginPeriod changes the resolution of a clock; it doesn&#39;t impact how long it takes to swap; which is certainly nowhere near 1ms"}, {"owner": {"reputation": 143, "user_id": 9282907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c16598a88d0cdc2507cdac9ac85d367d?s=128&d=identicon&r=PG&f=1", "display_name": "Benno Geels", "link": "https://stackoverflow.com/users/9282907/benno-geels"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1525290097, "post_id": 50136872, "comment_id": 87302896, "body": "it changes how long the interruption takes to be possible scheduled again."}], "tags": [], "owner": {"reputation": 143, "user_id": 9282907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c16598a88d0cdc2507cdac9ac85d367d?s=128&d=identicon&r=PG&f=1", "display_name": "Benno Geels", "link": "https://stackoverflow.com/users/9282907/benno-geels"}, "is_accepted": false, "score": -1, "last_activity_date": 1525270583, "creation_date": 1525270583, "answer_id": 50136872, "question_id": 50136160, "link": "https://stackoverflow.com/questions/50136160/maximum-number-of-threads-how-to-determine-if-your-c-pthreads-are-running-in/50136872#50136872", "title": "maximum number of threads - How to determine if your C++ pthreads are running in parallel?", "body": "<p>I can not add comments yet so part as answer.</p>\n\n<blockquote>\n  <p>or at least can I know how many milliseconds does this swapping takes</p>\n</blockquote>\n\n<p>On Windows this is default 10 - 20 ms\nWith a little trick you can change this to 1 - 2 ms</p>\n\n<pre><code>#include &lt;Mmsystem.h&gt;\n#pragma comment(lib,\"winmm.lib\")\ntimeBeginPeriod(1); // set system clock to 1ms from default 10ms\n</code></pre>\n\n<p>If you want to add another dirty trick to give your process more power.\nYou need to add the 2 lines below in the main() process and you also need to do this 2nd line for every thread.</p>\n\n<pre><code>SetPriorityClass(GetCurrentProcess(),REALTIME_PRIORITY_CLASS);\nSetThreadPriority(GetCurrentThread(),THREAD_PRIORITY_NORMAL);\n</code></pre>\n\n<p>Be warned !!!!\nYou will make windows unresponsive if you do this with more threads than there are processing cores. So you need to give the system some time in the threads.</p>\n\n<p>On Linux the default is already 1 ms (dynamic) but you can change between different scheduler.</p>\n"}], "owner": {"reputation": 57, "user_id": 6352756, "user_type": "registered", "profile_image": "https://graph.facebook.com/1106631082734570/picture?type=large", "display_name": "Ali Nouri", "link": "https://stackoverflow.com/users/6352756/ali-nouri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1150, "favorite_count": 1, "accepted_answer_id": 50136410, "answer_count": 2, "score": 1, "last_activity_date": 1525270583, "creation_date": 1525268612, "question_id": 50136160, "link": "https://stackoverflow.com/questions/50136160/maximum-number-of-threads-how-to-determine-if-your-c-pthreads-are-running-in", "title": "maximum number of threads - How to determine if your C++ pthreads are running in parallel?", "body": "<p>I am not knowledgeable enough in multi-thread programming. I my C++ program I make 10 pthreads which each are responsible to process a part of realtime data streamed to the system. Eventually inside the main(), the processed data from all threads are merged. To my knowledge the exact number of threads that can be run in parallel is determined by the Cores per socket x Threads per socket x sockets which in my case is 8 (4 x 2 x 1). So is it the case that in my application with 10 threads no palatalization is happening and swapping between different threads is what the scheduler does? if not is there any way to determine this? or at least can I know how many milliseconds does this swapping takes? Since my application is dealing with real time data, its crucial to make sure all the threads are running in parallel.        </p>\n"}, {"tags": ["c++", "class", "templates", "alias", "c++17"], "comments": [{"owner": {"reputation": 768, "user_id": 4623259, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/sNAyd.png?s=128&g=1", "display_name": "iPherian", "link": "https://stackoverflow.com/users/4623259/ipherian"}, "edited": false, "score": 0, "creation_date": 1525269624, "post_id": 50136141, "comment_id": 87291128, "body": "Afaik, the only way is the macro you mentioned. Now the question is, how desperate am I for rep to post that as the answer? hmm..... ;)"}, {"owner": {"reputation": 768, "user_id": 4623259, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/sNAyd.png?s=128&g=1", "display_name": "iPherian", "link": "https://stackoverflow.com/users/4623259/ipherian"}, "edited": false, "score": 0, "creation_date": 1525270326, "post_id": 50136141, "comment_id": 87291674, "body": "actually, i don&#39;t know how the define would work either <a href=\"https://godbolt.org/g/MBPXrL\" rel=\"nofollow noreferrer\">godbolt</a>"}, {"owner": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "reply_to_user": {"reputation": 768, "user_id": 4623259, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/sNAyd.png?s=128&g=1", "display_name": "iPherian", "link": "https://stackoverflow.com/users/4623259/ipherian"}, "edited": false, "score": 1, "creation_date": 1525271402, "post_id": 50136141, "comment_id": 87292496, "body": "@iPherian Current version 19.10 of MSVC used on godbolt <a href=\"http://en.cppreference.com/w/cpp/compiler_support#cpp17\" rel=\"nofollow noreferrer\">doesn&#39;t support <i>template argument deduction</i></a>."}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 8004060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/970f7dbd980d9cf7dac9fe1681f654e6?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/8004060/mark"}, "edited": false, "score": 0, "creation_date": 1525328298, "post_id": 50137337, "comment_id": 87314404, "body": "It seems like your example is unambiguous. &quot;tuple_int t(4, 2);&quot; intuitively would deduce to tuple_int&lt;int&gt; (because 4 is an int) which is a std::tuple&lt;int, int&gt;. I&#39;m probably missing something though."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 145, "user_id": 8004060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/970f7dbd980d9cf7dac9fe1681f654e6?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/8004060/mark"}, "edited": false, "score": 0, "creation_date": 1525363794, "post_id": 50137337, "comment_id": 87336787, "body": "@Mark Blegh, meant to add a <code>char</code> case. Fixed. In any case, I agree there&#39;s an intuitive, unambiguous, <i>desired</i> result. The difficulty is coming up with what the process is for getting there - it&#39;s an interesting problem though, and if you have good ideas for how to fix it, you could <a href=\"https://groups.google.com/a/isocpp.org/forum/#!forum/std-proposals\" rel=\"nofollow noreferrer\">suggest it</a>"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 7, "last_activity_date": 1525363667, "last_edit_date": 1525363667, "creation_date": 1525271991, "answer_id": 50137337, "question_id": 50136141, "link": "https://stackoverflow.com/questions/50136141/c17-alias-template-with-template-class-default-arguments/50137337#50137337", "title": "C++17 alias template with template class default arguments", "body": "<blockquote>\n  <p>That seems like unexpected behavior to me. Are there any workarounds to still allow the \"&lt;>\" to be dropped?</p>\n</blockquote>\n\n<p>It's expected behavior. Well, depends on what you expect I guess. Class template argument deduction <strong>only</strong> applies in the context of using a primary class template name without any template parameters specified, and <strong>only</strong> in the context of creating objects. </p>\n\n<p>It does not apply in the context of alias templates (as demonstrated in the OP). And it does not apply in the context of function template deduction.</p>\n\n<p>Unless somebody proposes to change this, the workaround is to just write <code>MyAlias&lt;&gt;</code>. </p>\n\n<hr />\n\n<p>There is a proposal to generalize <code>using</code> declaration, so that hypothetically you could write <code>using MyAlias = MyStruct;</code> and have that be an alias template. In this context, it would seem reasonable to allow <code>MyAlias c;</code> since <code>MyAlias</code> directly names a class template.</p>\n\n<p>But the general problem is more complex, since alias templates could do things like reorder types or add new ones. And you'd have to answer questions like:</p>\n\n<pre><code>template &lt;typename T&gt; using tuple_int = std::tuple&lt;T, int&gt;;\ntuple_int t(4, 2);   // would this work? how?\ntuple_int u(4, '2'); // what about this?\n</code></pre>\n\n<p>I'm not saying there isn't an answer. I'm just saying that it's not a trivial thing. </p>\n"}, {"comments": [{"owner": {"reputation": 145, "user_id": 8004060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/970f7dbd980d9cf7dac9fe1681f654e6?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/8004060/mark"}, "edited": false, "score": 0, "creation_date": 1525328536, "post_id": 50137412, "comment_id": 87314510, "body": "Thanks for another workaround. Like the #define, there are pros and cons to this approach. I was hoping class template argument deduction would work as nicely as argument deduction works for functions (which should make the alias just as easy, in my opinion)."}], "tags": [], "owner": {"reputation": 6188, "user_id": 7703564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2bc3387440ec2c075d16d2bb152a540?s=128&d=identicon&r=PG&f=1", "display_name": "Jodocus", "link": "https://stackoverflow.com/users/7703564/jodocus"}, "is_accepted": true, "score": 3, "last_activity_date": 1525272542, "last_edit_date": 1525272542, "creation_date": 1525272232, "answer_id": 50137412, "question_id": 50136141, "link": "https://stackoverflow.com/questions/50136141/c17-alias-template-with-template-class-default-arguments/50137412#50137412", "title": "C++17 alias template with template class default arguments", "body": "<blockquote>\n  <p>Are there any workarounds to still allow the \"&lt;>\" to be dropped?</p>\n</blockquote>\n\n<p>A possible workaround may be a transparent inheritance:</p>\n\n<pre><code>template&lt;int LENGTH = 1&gt;\nstruct MyStruct{ int arr[LENGTH]; };\n\ntemplate&lt;int LENGTH = 1&gt;\nstruct MyAlias : MyStruct&lt;LENGTH&gt; { };\n\nint main()\n{\n    MyAlias&lt;2&gt; a;\n    MyAlias&lt;&gt; b;\n    MyAlias c;\n    return 0;\n}\n</code></pre>\n\n<p>A (possibly) dangerous side-effect is however that the base class has no virtual destructors, leading to a possible memory leak if used polymorphically.</p>\n\n<blockquote>\n  <p>That seems like unexpected behavior to me.</p>\n</blockquote>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/language/class_template_argument_deduction\" rel=\"nofollow noreferrer\">Class template argument deduction</a>, which enables the feature you are trying to use, appears to require a name of a real class template, not that of an template alias. What the compiler basically does is something like transforming</p>\n\n<pre><code>MyStruct obj;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>template &lt;int LENGTH=1&gt;\nMyStruct&lt;LENGTH&gt; f() { return MyStruct&lt;Length&gt;{ }; }\n\nauto obj = f();\n</code></pre>\n\n<p>However, for aliases, you could do something like this:</p>\n\n<pre><code>template &lt;int LENGTH = 1&gt;\nusing MyAlias = MyStruct&lt;LENGTH + 1&gt;;\n</code></pre>\n\n<p>The above transformation totally would miss that \"+ 1\" if it just replaced the name <code>MyAlias</code> by <code>MyStruct</code>, implying there is no trivial solution to this problem - but by this time nowhere in the standard this case is handled, so its understandable it will not compile.</p>\n"}, {"tags": [], "owner": {"reputation": 145, "user_id": 8004060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/970f7dbd980d9cf7dac9fe1681f654e6?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/8004060/mark"}, "is_accepted": false, "score": 1, "last_activity_date": 1525333878, "creation_date": 1525333878, "answer_id": 50149677, "question_id": 50136141, "link": "https://stackoverflow.com/questions/50136141/c17-alias-template-with-template-class-default-arguments/50149677#50149677", "title": "C++17 alias template with template class default arguments", "body": "<p>I don't recommend this approach, but I found a way that will work even if you don't have C++17. You could use a macro (like mentioned in the question) if you just want simple text substitution and you have C++17. Otherwise, you can do it this way if you don't mind the slightly different syntax:</p>\n\n<pre><code>template&lt;int LENGTH = 1&gt;\nstruct MyStruct{ int arr[LENGTH]; };\n\n#define MyAlias(...) MyStruct&lt;__VA_ARGS__&gt;\nusing MyAlias = MyStruct&lt;&gt;;\n\nint main()\n{\n    MyAlias(2) a; // MyAlias&lt;2&gt;\n    MyAlias() b; // MyAlias&lt;&gt;\n    MyAlias c;\n}\n</code></pre>\n\n<p>There are a couple advantages over the other approaches:</p>\n\n<ul>\n<li>You don't need C++17</li>\n<li>You don't have to re-specify the defaults (DRY\nprinciple)</li>\n<li>You don't need any extra classes, functions, etc.</li>\n<li>It can be combined with a workaround for alias template specialization</li>\n</ul>\n\n<p>As an example, pretend you wanted to make a class to emulate floating point numbers of various sizes. If the size matches a built-in type, you want to use that directly for efficiency, otherwise you use your class. Also, you want the size to default to the most efficient size on your platform to reduce verbosity.</p>\n\n<p>Ideally, I would like the be able to use alias templates likes:</p>\n\n<pre><code>template&lt;int BITS&gt;\nstruct BasicReal final\n{\n    constexpr BasicReal(const double){};\n};\n\ntemplate&lt;int BITS = 64&gt;\nusing Real = BasicReal&lt;BITS&gt;;\n\ntemplate&lt;&gt; // Alias template specialization if it worked\nusing Real&lt;64&gt; = double;\n\ntemplate&lt;&gt; // Alias template specialization if it worked\nusing Real&lt;32&gt; = float;\n\nint main()\n{\n    Real r = 1.2; // Alias template argument deduction if it worked\n    Real&lt;16&gt; r16 = 1.2;\n    Real&lt;32&gt; r32 = 1.2;\n    Real&lt;64&gt; r64 = 1.2;\n    return r;\n}\n</code></pre>\n\n<p>However, for now, I can use the following workaround (even in C++11):</p>\n\n<pre><code>template&lt;int BITS&gt;\nstruct BasicReal final\n{\n    constexpr BasicReal(const double){};\n};\n\ntemplate&lt;int BITS = 64&gt;\nstruct RealAlias\n{\n    using Type = BasicReal&lt;BITS&gt;;\n};\n\ntemplate&lt;&gt;\nstruct RealAlias&lt;64&gt;\n{\n    using Type = double;\n};\n\ntemplate&lt;&gt;\nstruct RealAlias&lt;32&gt;\n{\n    using Type = float;\n};\n\n#define Real(...) RealAlias&lt;__VA_ARGS__&gt;::Type\nusing Real = RealAlias&lt;&gt;::Type;\n\nint main()\n{\n    Real r = 1.2;\n    Real(16) r16 = 1.2;\n    Real(32) r32 = 1.2;\n    Real(64) r64 = 1.2;\n    return r;\n}\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 8004060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/970f7dbd980d9cf7dac9fe1681f654e6?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/8004060/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 464, "favorite_count": 1, "accepted_answer_id": 50137412, "answer_count": 3, "score": 10, "last_activity_date": 1525363667, "creation_date": 1525268557, "question_id": 50136141, "link": "https://stackoverflow.com/questions/50136141/c17-alias-template-with-template-class-default-arguments", "title": "C++17 alias template with template class default arguments", "body": "<p>It seems like C++17 added the ability to drop the \"&lt;>\" on template classes when all the arguments have defaults (just like we've been able to do with functions for a long time) e.g.:</p>\n\n<pre><code>template&lt;int LENGTH = 1&gt;\nstruct MyStruct{ int arr[LENGTH]; };\n\nint main()\n{\n    MyStruct&lt;2&gt; a;\n    MyStruct&lt;&gt; b; // old way to use defaults\n    MyStruct c; // new way to use defaults\n    return 0;\n}\n</code></pre>\n\n<p>However, it seems like that feature no longer works when using an alias template e.g.:</p>\n\n<pre><code>template&lt;int LENGTH = 1&gt;\nstruct MyStruct{ int arr[LENGTH]; };\n\ntemplate&lt;int LENGTH = 1&gt;\nusing MyAlias = MyStruct&lt;LENGTH&gt;;\n\nint main()\n{\n    MyAlias&lt;2&gt; a;\n    MyAlias&lt;&gt; b; // old way still works\n    MyAlias c; // new way doesn't compile:\n    // gcc 7.3: missing template arguments before 'c'\n    // clang 6.0.0: declaration of variable 'c' with deduced type 'MyAlias' requires an initializer\n    return 0;\n}\n</code></pre>\n\n<p>That seems like unexpected behavior to me. Are there any workarounds to still allow the \"&lt;>\" to be dropped? (I know a separate typedef could be created with a different name, e.g.: using MyAlias2 = MyStruct&lt;>, but I want the same exact name. I also know a define could trick it, e.g. #define MyAlias MyStruct, but assume that would only be a last resort.)</p>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "edited": false, "score": 2, "creation_date": 1525268477, "post_id": 50136065, "comment_id": 87290248, "body": "<code>float const newVal</code> - notice <code>const</code> here which means &quot;constant&quot;. remove it or cap the value before assigning to it"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1525268501, "post_id": 50136065, "comment_id": 87290269, "body": "do you know what <code>const</code> means? (not trying to be snarky or arrogant, but the answer to this question is essential to give you a meaningful answer imho)"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1525268587, "post_id": 50136065, "comment_id": 87290344, "body": "&quot;however i&#39;m getting errors!&quot; Please ensure that you post the errors so that people searching for the error can find the question and not raise a duplicate."}, {"owner": {"reputation": 85, "user_id": 5749981, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4234e2a7defd4ed959ae89fccf58c716?s=128&d=identicon&r=PG&f=1", "display_name": "Cyph3r__", "link": "https://stackoverflow.com/users/5749981/cyph3r"}, "edited": false, "score": 0, "creation_date": 1525268611, "post_id": 50136065, "comment_id": 87290359, "body": "Postes the error, it was one error typed to fast, yes i know the meaning of it."}, {"owner": {"reputation": 9804, "user_id": 1332041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/871cd231304bb5650f381016cac34d8f?s=128&d=identicon&r=PG", "display_name": "acraig5075", "link": "https://stackoverflow.com/users/1332041/acraig5075"}, "edited": false, "score": 0, "creation_date": 1525270784, "post_id": 50136065, "comment_id": 87292009, "body": "Why the edit to the code? You&#39;ve taken out the only mention of 32000 which your question is based on."}], "answers": [{"comments": [{"owner": {"reputation": 1356, "user_id": 9657552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ksHjQ.png?s=128&g=1", "display_name": "Alexey Usachov", "link": "https://stackoverflow.com/users/9657552/alexey-usachov"}, "reply_to_user": {"reputation": 85, "user_id": 5749981, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4234e2a7defd4ed959ae89fccf58c716?s=128&d=identicon&r=PG&f=1", "display_name": "Cyph3r__", "link": "https://stackoverflow.com/users/5749981/cyph3r"}, "edited": false, "score": 0, "creation_date": 1525269711, "post_id": 50136151, "comment_id": 87291198, "body": "@Cyph3r__ where do you change value of Haste Rating, are you sure you set it by your <code>newVal</code> value? maybe it changes in another place or by another variable? Provide more code if it is possible"}, {"owner": {"reputation": 85, "user_id": 5749981, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4234e2a7defd4ed959ae89fccf58c716?s=128&d=identicon&r=PG&f=1", "display_name": "Cyph3r__", "link": "https://stackoverflow.com/users/5749981/cyph3r"}, "edited": false, "score": 0, "creation_date": 1525270286, "post_id": 50136151, "comment_id": 87291638, "body": "Hmmm, i wanted to private message you but i can&#39;t I&#39;ll update the question,"}, {"owner": {"reputation": 1356, "user_id": 9657552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ksHjQ.png?s=128&g=1", "display_name": "Alexey Usachov", "link": "https://stackoverflow.com/users/9657552/alexey-usachov"}, "reply_to_user": {"reputation": 85, "user_id": 5749981, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4234e2a7defd4ed959ae89fccf58c716?s=128&d=identicon&r=PG&f=1", "display_name": "Cyph3r__", "link": "https://stackoverflow.com/users/5749981/cyph3r"}, "edited": false, "score": 0, "creation_date": 1525271276, "post_id": 50136151, "comment_id": 87292408, "body": "@Cyph3r__ May be you should pass <code>UpdateRating(newVal);</code> instead <code>UpdateRating(combatRating);</code>"}], "tags": [], "owner": {"reputation": 1356, "user_id": 9657552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ksHjQ.png?s=128&g=1", "display_name": "Alexey Usachov", "link": "https://stackoverflow.com/users/9657552/alexey-usachov"}, "is_accepted": false, "score": 1, "last_activity_date": 1525268591, "creation_date": 1525268591, "answer_id": 50136151, "question_id": 50136065, "link": "https://stackoverflow.com/questions/50136065/capping-the-value/50136151#50136151", "title": "Capping the value", "body": "<p>Remove <code>const</code> qualifier from <code>newVal</code></p>\n\n<pre><code>float newVal = m_baseRatingValue[combatRating] * multiplier;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "edited": false, "score": 0, "creation_date": 1525268927, "post_id": 50136154, "comment_id": 87290579, "body": "or <code>float const newVal = std::min(m_baseRatingValue[combatRating] * multiplier, 32000);</code>"}], "tags": [], "owner": {"reputation": 1624, "user_id": 1816149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1ef0c1c5f57ec8705986fc3a646ac08?s=128&d=identicon&r=PG", "display_name": "Flopp", "link": "https://stackoverflow.com/users/1816149/flopp"}, "is_accepted": false, "score": 1, "last_activity_date": 1525268600, "creation_date": 1525268600, "answer_id": 50136154, "question_id": 50136065, "link": "https://stackoverflow.com/questions/50136065/capping-the-value/50136154#50136154", "title": "Capping the value", "body": "<p>You declare <code>newVal</code> as a constant (<code>float const newVal = ...</code>), so you're not allowed to assign a new value.</p>\n\n<p>Removing <code>const</code> should work for you, e.g.</p>\n\n<pre><code>float newVal = m_baseRatingValue[combatRating] * multiplier;\n\nif (newVal &gt; 32000)\n    newVal = 32000;\n...\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 5749981, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4234e2a7defd4ed959ae89fccf58c716?s=128&d=identicon&r=PG&f=1", "display_name": "Cyph3r__", "link": "https://stackoverflow.com/users/5749981/cyph3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1525270498, "creation_date": 1525268339, "last_edit_date": 1525270498, "question_id": 50136065, "link": "https://stackoverflow.com/questions/50136065/capping-the-value", "title": "Capping the value", "body": "<p>I have a small script that defines the casting time for all classes in this minor project im working on however i have a few issues.</p>\n\n<p>I want to place a cap on the max value however i'm getting errors!</p>\n\n<p>this is the function i was referring to.</p>\n\n<pre><code>   void Player::ApplyRatingMod(CombatRating combatRating, int32 value, bool apply)\n{\n    float oldRating = m_baseRatingValue[combatRating];\n    m_baseRatingValue[combatRating] += (apply ? value : -value);\n\n    // explicit affected values\n    float const multiplier = GetRatingMultiplier(combatRating);\n    float const oldVal = oldRating * multiplier;\n    float const newVal = m_baseRatingValue[combatRating] * multiplier;\n\n    switch (combatRating)\n    {\n        case CR_HASTE_MELEE:\n            ApplyAttackTimePercentMod(BASE_ATTACK, oldVal, false);\n            ApplyAttackTimePercentMod(OFF_ATTACK, oldVal, false);\n            ApplyAttackTimePercentMod(BASE_ATTACK, newVal, true);\n            ApplyAttackTimePercentMod(OFF_ATTACK, newVal, true);\n            break;\n        case CR_HASTE_RANGED:\n            ApplyAttackTimePercentMod(RANGED_ATTACK, oldVal, false);\n            ApplyAttackTimePercentMod(RANGED_ATTACK, newVal, true);\n            break;\n        case CR_HASTE_SPELL:\n            //ApplyCastTimePercentMod(oldVal, false);\n            //ApplyCastTimePercentMod(newVal, true);\n            break;\n        default:\n            break;\n    }\n    UpdateRating(combatRating);\n}\n\nvoid Player::UpdateRating(CombatRating cr)\n{\n    int32 amount = m_baseRatingValue[cr];\n    // Apply bonus from SPELL_AURA_MOD_RATING_FROM_STAT\n    // stat used stored in miscValueB for this aura\n    AuraEffectList const&amp; modRatingFromStat = GetAuraEffectsByType(SPELL_AURA_MOD_RATING_FROM_STAT);\n    for (AuraEffect const* aurEff : modRatingFromStat)\n        if (aurEff-&gt;GetMiscValue() &amp; (1 &lt;&lt; cr))\n            amount += int32(CalculatePct(GetStat(Stats(aurEff-&gt;GetMiscValueB())), aurEff-&gt;GetAmount()));\n\n    if (amount &lt; 0)\n        amount = 0;\n    SetUInt32Value(PLAYER_FIELD_COMBAT_RATING_1 + cr, uint32(amount));\n\n    bool affectStats = CanModifyStats();\n\n    switch (cr)\n    {\n        case CR_WEAPON_SKILL:                               // Implemented in Unit::RollMeleeOutcomeAgainst\n        case CR_DEFENSE_SKILL:\n            UpdateDefenseBonusesMod();\n            break;\n        case CR_DODGE:\n            UpdateDodgePercentage();\n            break;\n        case CR_PARRY:\n            UpdateParryPercentage();\n            break;\n        case CR_BLOCK:\n            UpdateBlockPercentage();\n            break;\n        case CR_HIT_MELEE:\n            UpdateMeleeHitChances();\n            break;\n        case CR_HIT_RANGED:\n            UpdateRangedHitChances();\n            break;\n        case CR_HIT_SPELL:\n            UpdateSpellHitChances();\n            break;\n        case CR_CRIT_MELEE:\n            if (affectStats)\n            {\n                UpdateCritPercentage(BASE_ATTACK);\n                UpdateCritPercentage(OFF_ATTACK);\n            }\n            break;\n        case CR_CRIT_RANGED:\n            if (affectStats)\n                UpdateCritPercentage(RANGED_ATTACK);\n            break;\n        case CR_CRIT_SPELL:\n            if (affectStats)\n                UpdateAllSpellCritChances();\n            break;\n        case CR_HIT_TAKEN_MELEE:                            // Implemented in Unit::MeleeMissChanceCalc\n        case CR_HIT_TAKEN_RANGED:\n            break;\n        case CR_HIT_TAKEN_SPELL:                            // Implemented in Unit::MagicSpellHitResult\n            break;\n        case CR_CRIT_TAKEN_MELEE:                           // Implemented in Unit::RollMeleeOutcomeAgainst (only for chance to crit)\n        case CR_CRIT_TAKEN_RANGED:\n            break;\n        case CR_CRIT_TAKEN_SPELL:                           // Implemented in Unit::SpellCriticalBonus (only for chance to crit)\n            break;\n        case CR_HASTE_MELEE:                                // Implemented in Player::ApplyRatingMod\n        case CR_HASTE_RANGED:\n        case CR_HASTE_SPELL:\n            break;\n        case CR_WEAPON_SKILL_MAINHAND:                      // Implemented in Unit::RollMeleeOutcomeAgainst\n        case CR_WEAPON_SKILL_OFFHAND:\n        case CR_WEAPON_SKILL_RANGED:\n            break;\n        case CR_EXPERTISE:\n            if (affectStats)\n            {\n                UpdateExpertise(BASE_ATTACK);\n                UpdateExpertise(OFF_ATTACK);\n            }\n            break;\n        case CR_ARMOR_PENETRATION:\n            if (affectStats)\n                UpdateArmorPenetration(amount);\n            break;\n    }\n}\n\nvoid Player::UpdateAllRatings()\n{\n    for (uint8 cr = 0; cr &lt; MAX_COMBAT_RATING; ++cr)\n        UpdateRating(CombatRating(cr));\n}\n</code></pre>\n\n<p>You can notice how i want to cap the new value outcome to 32000.\nBefore it gets calculated to percentages!</p>\n\n<p>I tried using \nif(newVal > 32000)\nnewVal = 32000;</p>\n\n<p>Which would normally do the job i guess, but i'm stuck with an error\nE0137   expression must be a modifiable lvalue</p>\n\n<p>On the line newVal = 32000;</p>\n"}, {"tags": ["c++", "string", "char"], "answers": [{"tags": [], "owner": {"reputation": 3624, "user_id": 8013471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jh4jO.jpg?s=128&g=1", "display_name": "cse", "link": "https://stackoverflow.com/users/8013471/cse"}, "is_accepted": true, "score": 2, "last_activity_date": 1525267604, "last_edit_date": 1525267604, "creation_date": 1525267536, "answer_id": 50135805, "question_id": 50135737, "link": "https://stackoverflow.com/questions/50135737/code-problems-convert-string-to-chart-execl/50135805#50135805", "title": "code problems convert string to chart execl", "body": "<p>The problem is that <code>execl()</code> is expecting argument of type <code>const char*</code> and you are passing <code>std::string</code>. </p>\n\n<p>You can use <code>std::string.c_str()</code> function to get respective <em>C-string</em> representation. which is of type <code>onst char*</code>.</p>\n\n<p>Change the line <code>execl(\"/mondossier/programmeYacine\", data, data);</code> to <code>execl(\"/mondossier/programmeYacine\", data.c_str(), data.c_str());</code></p>\n"}], "owner": {"reputation": 17, "user_id": 9527318, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "TS2IR 2018", "link": "https://stackoverflow.com/users/9527318/ts2ir-2018"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 50135805, "answer_count": 1, "score": 1, "last_activity_date": 1525267839, "creation_date": 1525267313, "last_edit_date": 1525267839, "question_id": 50135737, "link": "https://stackoverflow.com/questions/50135737/code-problems-convert-string-to-chart-execl", "title": "code problems convert string to chart execl", "body": "<p>I had this error when I compiled my code. The execl are for a file c++ who screen data in a LCD on a raspberry:</p>\n\n<pre><code>SerialPort.cpp: In function \u2018int main()\u2019:\nSerialPort.cpp:121:50: error: cannot convert \u2018std::__cxx11::string {aka \nstd::__cxx11::basic_string&lt;char&gt;}\u2019 to \u2018const char*\u2019 for argument \u20182\u2019 to \u2018int \nexecl(const char*, const char*, ...)\u2019\n   execl(\"/mondossier/programmeYacine\", data, data);\n</code></pre>\n\n<p>And this is my main:</p>\n\n<pre><code>main()\n{\n    std::string cmd = \"0\";\n    while(true){\n            std::cout &lt;&lt; \"Entrez Commande\" &lt;&lt; std::endl;\n            std::cin &gt;&gt; cmd;\n            SerialPort* comSerie = new SerialPort();\n            comSerie-&gt;writeSerialPort(cmd);\n            sleep(1);\n            std::string data = comSerie-&gt;readSerialPort();\n            std::cout &lt;&lt; data &lt;&lt; std::endl;\n            execl(\"/mondossier/programmeYacine\", data, data);\n            delete(comSerie);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1525267218, "post_id": 50135661, "comment_id": 87289309, "body": "<code>&amp;a[i]</code> is a pointer to a char. There is a specific overload to handle that, which is to print a null terminated string. If you want the address you need to cast the pointer to (void*)."}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1525267608, "post_id": 50135661, "comment_id": 87289581, "body": "Cast to <code>void *</code> to avoid"}], "answers": [{"comments": [{"owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1525268033, "post_id": 50135715, "comment_id": 87289887, "body": "@Fran&#231;oisAndrieux Better now?"}], "tags": [], "owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "is_accepted": false, "score": 1, "last_activity_date": 1525268200, "last_edit_date": 1525268200, "creation_date": 1525267247, "answer_id": 50135715, "question_id": 50135661, "link": "https://stackoverflow.com/questions/50135661/printing-out-the-rest-of-a-string-instead-of-the-address/50135715#50135715", "title": "&amp; printing out the rest of a string instead of the address", "body": "<p><code>string</code> subscript (<code>[]</code>) operator returns <code>char</code>. So <code>&amp;</code> operation returns a pointer to <code>char</code>. And <code>cout</code> <code>operator&lt;&lt;</code> has an overloading for it, which consider it should print out the parameter as a c-string. You should cast it to <code>void*</code> so <code>cout</code> wouldn't think it is a string.</p>\n\n<pre><code>(void*)&amp;a[i]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1093, "user_id": 6625159, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d170111b6983c197263ec56f7090506f?s=128&d=identicon&r=PG&f=1", "display_name": "souki", "link": "https://stackoverflow.com/users/6625159/souki"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1525268327, "post_id": 50135748, "comment_id": 87290120, "body": "@user463035818, yes you&#39;re right. Thanks for helping me to make this answer more accurate"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1525268346, "post_id": 50135748, "comment_id": 87290135, "body": "fine with me, upvoted"}], "tags": [], "owner": {"reputation": 1093, "user_id": 6625159, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d170111b6983c197263ec56f7090506f?s=128&d=identicon&r=PG&f=1", "display_name": "souki", "link": "https://stackoverflow.com/users/6625159/souki"}, "is_accepted": false, "score": 3, "last_activity_date": 1525268274, "last_edit_date": 1525268274, "creation_date": 1525267336, "answer_id": 50135748, "question_id": 50135661, "link": "https://stackoverflow.com/questions/50135661/printing-out-the-rest-of-a-string-instead-of-the-address/50135748#50135748", "title": "&amp; printing out the rest of a string instead of the address", "body": "<p>As said in the comment, <code>&amp;a[i]</code> is a pointer to a <code>char</code>, and <code>&lt;&lt;</code> operator will print null terminated string starting from this character, not its address. So if you want to print the address, you must cast it to <code>void *</code>, as follow : </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nstring a = \"Hello, World!\";\n\nint main() {\n    for(int i=0; i&lt;a.length();i++) {\n        cout &lt;&lt; (void *)&amp;a[i] &lt;&lt; endl; //cast to (void *) to get the address\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 8600714, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/DWj3d.jpg?s=128&g=1", "display_name": "kittrz", "link": "https://stackoverflow.com/users/8600714/kittrz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "closed_date": 1525267345, "answer_count": 2, "score": 2, "last_activity_date": 1525268274, "creation_date": 1525267096, "question_id": 50135661, "link": "https://stackoverflow.com/questions/50135661/printing-out-the-rest-of-a-string-instead-of-the-address", "closed_reason": "Duplicate", "title": "&amp; printing out the rest of a string instead of the address", "body": "<p>Keep in mind that my knowledge of pointers is quite small, as I just started learning about them.</p>\n\n<p>While I was messing around in C++, I wrote this small bit of code thinking it would just print out the address of each character in the string</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nstring a = \"Hello, World!\";\n\nint main() {\n    for(int i=0; i&lt;a.length();i++) {\n        cout &lt;&lt; &amp;a[i] &lt;&lt; endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>When I compiled and ran this, however, it resulted in it printing as if the string moved to the left.<a href=\"https://i.stack.imgur.com/BLsOT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BLsOT.png\" alt=\"enter image description here\"></a></p>\n\n<p>It just doesn't make sense why when it uses &amp;, which I thought would retrieve the address, would instead get the rest of the string.</p>\n"}, {"tags": ["c++", "c++11", "shared-ptr"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1525267058, "post_id": 50135593, "comment_id": 87289197, "body": "<a href=\"http://en.cppreference.com/w/cpp/memory/enable_shared_from_this/shared_from_this\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/memory/enable_shared_from_this/&hellip;</a>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1525267085, "post_id": 50135593, "comment_id": 87289214, "body": "From <a href=\"https://en.cppreference.com/w/cpp/memory/enable_shared_from_this/shared_from_this\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/memory/enable_shared_from_this/&hellip;</a> : <i>&quot;It is permitted to call shared_from_this only on a previously shared object, i.e. on an object managed by std::shared_ptr. Otherwise the behavior is undefined (until C++17)std::bad_weak_ptr is thrown (by the shared_ptr constructor from a default-constructed weak_this) (since C++17).&quot;</i> It depends on which version of c++ you are using."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1525267156, "post_id": 50135593, "comment_id": 87289272, "body": "I&#39;m not sure it&#39;s even possible for <code>shared_from_this</code> to ever return <code>nullptr</code> in a well defined program."}, {"owner": {"reputation": 23, "user_id": 3101654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5f206ac4c492327618a42433f869c5?s=128&d=identicon&r=PG&f=1", "display_name": "mtyk1", "link": "https://stackoverflow.com/users/3101654/mtyk1"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1525267562, "post_id": 50135593, "comment_id": 87289549, "body": "@Fran&#231;oisAndrieux Thanks. I have read a manual based on C++11, but it did not say anything about this case."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 3101654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5f206ac4c492327618a42433f869c5?s=128&d=identicon&r=PG&f=1", "display_name": "mtyk1", "link": "https://stackoverflow.com/users/3101654/mtyk1"}, "edited": false, "score": 0, "creation_date": 1525272677, "post_id": 50136089, "comment_id": 87293378, "body": "Thanks @robinleander. Could you tell me where in the C++ 11 standard the &quot;Calling shared_from_this ... is undefined behavior&quot; is written?"}, {"owner": {"reputation": 437, "user_id": 3868157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea640d71ffc26471c0471a551fdc262?s=128&d=identicon&r=PG&f=1", "display_name": "cisnjxqu", "link": "https://stackoverflow.com/users/3868157/cisnjxqu"}, "reply_to_user": {"reputation": 23, "user_id": 3101654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5f206ac4c492327618a42433f869c5?s=128&d=identicon&r=PG&f=1", "display_name": "mtyk1", "link": "https://stackoverflow.com/users/3101654/mtyk1"}, "edited": false, "score": 0, "creation_date": 1525272726, "post_id": 50136089, "comment_id": 87293418, "body": "Others have linked to it; see the notes section here: <a href=\"http://en.cppreference.com/w/cpp/memory/enable_shared_from_this/shared_from_this\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/memory/enable_shared_from_this/&hellip;</a>"}, {"owner": {"reputation": 23, "user_id": 3101654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5f206ac4c492327618a42433f869c5?s=128&d=identicon&r=PG&f=1", "display_name": "mtyk1", "link": "https://stackoverflow.com/users/3101654/mtyk1"}, "edited": false, "score": 0, "creation_date": 1525273084, "post_id": 50136089, "comment_id": 87293689, "body": "&quot;the behavior is undefined&quot; and &quot;is undefined behavior&quot; are same? I would like to know how it is written in ISO C++ standard sentences."}, {"owner": {"reputation": 437, "user_id": 3868157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea640d71ffc26471c0471a551fdc262?s=128&d=identicon&r=PG&f=1", "display_name": "cisnjxqu", "link": "https://stackoverflow.com/users/3868157/cisnjxqu"}, "reply_to_user": {"reputation": 23, "user_id": 3101654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5f206ac4c492327618a42433f869c5?s=128&d=identicon&r=PG&f=1", "display_name": "mtyk1", "link": "https://stackoverflow.com/users/3101654/mtyk1"}, "edited": false, "score": 0, "creation_date": 1525274190, "post_id": 50136089, "comment_id": 87294418, "body": "I believe the two are synonymous. In the article about UB they mention the phrase &quot;The behavior is undefined if such program is executed&quot;. It would be very unwise to use this phrase without clarification if there were a difference.  <a href=\"http://en.cppreference.com/w/cpp/language/ub\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/ub</a>"}], "tags": [], "owner": {"reputation": 437, "user_id": 3868157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea640d71ffc26471c0471a551fdc262?s=128&d=identicon&r=PG&f=1", "display_name": "cisnjxqu", "link": "https://stackoverflow.com/users/3868157/cisnjxqu"}, "is_accepted": true, "score": 5, "last_activity_date": 1525272409, "last_edit_date": 1525272409, "creation_date": 1525268389, "answer_id": 50136089, "question_id": 50135593, "link": "https://stackoverflow.com/questions/50135593/shared-from-this-of-an-instance-that-is-not-yet-owned-by-shared-ptr-always-ret/50136089#50136089", "title": "shared_from_this() of an instance that is not yet owned by shared_ptr always returns null?", "body": "<p><code>shared_from_this</code> can be used to obtain a <code>shared_ptr</code> from an object that is already managed by a <code>shared_ptr</code>.</p>\n\n<p>Calling <code>shared_from_this</code> on a non-shared object is undefined behavior in C++11. </p>\n\n<p>However, in C++17 <code>shared_from_this</code> will throw <code>bad_weak_ptr</code> and you can catch this exception:</p>\n\n<pre><code>#include &lt;memory&gt;\n#include &lt;iostream&gt;\n\nclass X : public std::enable_shared_from_this&lt;X&gt; {\n  public:\n    bool is_shared() const {\n        try {\n            shared_from_this();\n            return true;\n        } catch (std::bad_weak_ptr&amp;) {\n            return false;\n        }\n    }\n};\n\nint main() {\n    X x;\n    std::cout &lt;&lt; std::boolalpha &lt;&lt; x.is_shared() &lt;&lt; std::endl;\n    auto y = std::make_shared&lt;X&gt;();\n    std::cout &lt;&lt; y-&gt;is_shared() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>false\ntrue\n</code></pre>\n\n<p>Furthermore you can use <code>weak_from_this</code> to get access to <code>weak_ptr</code>'s <code>expired</code> method:</p>\n\n<pre><code>bool is_shared() const {\n    return !weak_from_this().expired();\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 3101654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5f206ac4c492327618a42433f869c5?s=128&d=identicon&r=PG&f=1", "display_name": "mtyk1", "link": "https://stackoverflow.com/users/3101654/mtyk1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 714, "favorite_count": 0, "accepted_answer_id": 50136089, "answer_count": 1, "score": 2, "last_activity_date": 1525272409, "creation_date": 1525266928, "question_id": 50135593, "link": "https://stackoverflow.com/questions/50135593/shared-from-this-of-an-instance-that-is-not-yet-owned-by-shared-ptr-always-ret", "title": "shared_from_this() of an instance that is not yet owned by shared_ptr always returns null?", "body": "<p>I am trying to create a member function that returns whether it has stored to <code>shared_ptr</code>.</p>\n\n<pre><code>class X : public std::enable_shared_from_this {\n    ...\n    bool is_shared() const {\n        return shared_from_this();\n    }\n};\n\n...\n\n(new X())-&gt;is_shared(); // -&gt; false?\n</code></pre>\n\n<p>Is this legal? In this case, is shared_from_this() guaranteed to return null and not throw any exception?</p>\n"}, {"tags": ["c++", "opencv", "floating-point", "double", "remap"], "comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 2, "creation_date": 1525266823, "post_id": 50135414, "comment_id": 87289042, "body": "use cv convert routines?"}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1525268609, "post_id": 50135414, "comment_id": 87290357, "body": "Why are you using double values instead of floats, when you know you need floats for <code>remap</code>?"}, {"owner": {"reputation": 1178, "user_id": 7813847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a062c89573fcea80e00131ce14e0cb45?s=128&d=identicon&r=PG&f=1", "display_name": "Dorian", "link": "https://stackoverflow.com/users/7813847/dorian"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1525269221, "post_id": 50135414, "comment_id": 87290803, "body": "@DanMa\u0161ek I&#39;m using double values cause this feature needs to be compatible with other parts of the software package."}, {"owner": {"reputation": 1178, "user_id": 7813847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a062c89573fcea80e00131ce14e0cb45?s=128&d=identicon&r=PG&f=1", "display_name": "Dorian", "link": "https://stackoverflow.com/users/7813847/dorian"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1525269319, "post_id": 50135414, "comment_id": 87290882, "body": "@Yakk I thought about that, but why won&#39;t openCV take my double values? When I am using for in and output the same type, what is the reason that it doesn&#39;t accept it?"}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1525269774, "post_id": 50135414, "comment_id": 87291248, "body": "&quot;why won&#39;t openCV take my double values&quot; -- because the function wasn&#39;t designed to work with them. Most likely noone found the extra precision worth the performance cost. OpenCV is open source, so if you really need that functionality, you may remedy it (or perhaps post a feature request)."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1525271410, "post_id": 50135414, "comment_id": 87292505, "body": "And I was answering it, no offence intended. :) You&#39;ll find that other functions in OpenCV also restrict the types they support, some colour conversions are not implemented, some functions may not have Python bindings..."}], "answers": [{"tags": [], "owner": {"reputation": 1178, "user_id": 7813847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a062c89573fcea80e00131ce14e0cb45?s=128&d=identicon&r=PG&f=1", "display_name": "Dorian", "link": "https://stackoverflow.com/users/7813847/dorian"}, "is_accepted": true, "score": 0, "last_activity_date": 1525271103, "creation_date": 1525271103, "answer_id": 50137062, "question_id": 50135414, "link": "https://stackoverflow.com/questions/50135414/how-to-use-double-typed-maps-for-remapping-in-opencv/50137062#50137062", "title": "How to use double typed maps for remapping in OpenCV", "body": "<p>Thanks to @Yakk for the suggestion: </p>\n\n<p>I hacked a work-around with <code>map.convertTo(map, CV_32FC1)</code>, which is working perfectly fine for me.</p>\n"}], "owner": {"reputation": 1178, "user_id": 7813847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a062c89573fcea80e00131ce14e0cb45?s=128&d=identicon&r=PG&f=1", "display_name": "Dorian", "link": "https://stackoverflow.com/users/7813847/dorian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 567, "favorite_count": 0, "accepted_answer_id": 50137062, "answer_count": 1, "score": 1, "last_activity_date": 1525271103, "creation_date": 1525266341, "last_edit_date": 1525266846, "question_id": 50135414, "link": "https://stackoverflow.com/questions/50135414/how-to-use-double-typed-maps-for-remapping-in-opencv", "title": "How to use double typed maps for remapping in OpenCV", "body": "<p><strong>Problem with <code>cv::remap()</code>:</strong></p>\n\n<p>I am using double values for my image coordinates and want to <code>cv::remap()</code> those to create an distorted image. </p>\n\n<p>However, <code>OpenCV</code> only allows me to use <code>CV_32FC1</code> (<code>float</code>) as map type, and not <code>CV_64FC1</code> (<code>double</code>). </p>\n\n<p>Except for typecasting my <code>double</code> values to <code>float</code> before remapping and using the float-type maps for <code>cv::remap()</code>, is there another way?</p>\n\n<p><strong>Code Snippet:</strong></p>\n\n<pre><code>Eigen::Vector2d distort(Eigen::Vector2d &amp; pointUndistorted);    \n\nint main(int argc, char** argv) {\n    cv::Mat image, dst;\n    image = cv::imread(argv[1], 1);\n    Eigen::Vector2d pointUndistorted;\n    Eigen::Vector2d pointDistorted;\n    int w = image.rows;\n    int h = image.cols;\n    cv::Mat map1(w,h,CV_64FC1);\n    cv::Mat map2(w,h,CV_64FC1);\n\n    for (int wIdx = 0; wIdx &lt; w; ++wIdx)\n    {\n        for (int hIdx = 0; hIdx &lt; h; ++hIdx)\n        {\n            pointUndistorted &lt;&lt; (double)wIdx / (double)w -0.5, (double)hIdx / (double)h -0.5;\n            pointDistorted = distort(pointUndistorted);\n\n            map1.at&lt;double&gt;(wIdx,hIdx) = (pointDistorted[0] + 0.5) * h;\n            map2.at&lt;double&gt;(wIdx,hIdx) = (pointDistorted[1] + 0.5) * w;\n        }\n    }\n\n    cv::remap(image, dst, map1, map2, cv::INTER_LINEAR);\n}\n</code></pre>\n\n<p>This gives me the following error:</p>\n\n<blockquote>\n  <p>OpenCV Error: Assertion failed (((map1.type() == (((5) &amp; ((1 &lt;&lt; 3) -\n  1)) + (((2)-1) &lt;&lt; 3)) || map1.type() == (((3) &amp; ((1 &lt;&lt; 3) - 1)) +\n  (((2)-1) &lt;&lt; 3))) &amp;&amp; map2.empty()) || (map1.type() == (((5) &amp; ((1 &lt;&lt; 3)\n  - 1)) + (((1)-1) &lt;&lt; 3)) &amp;&amp; map2.type() == (((5) &amp; ((1 &lt;&lt; 3) - 1)) + (((1)-1) &lt;&lt; 3)))) in remap, file\n  /tmp/binarydeb/ros-kinetic-opencv3-3.3.1/modules/imgproc/src/imgwarp.cpp,\n  line 1840</p>\n</blockquote>\n"}, {"tags": ["c++", "templates", "c++14", "metaprogramming", "smart-pointers"], "comments": [{"owner": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 2, "creation_date": 1525266458, "post_id": 50135392, "comment_id": 87288777, "body": "you need to sp&#233;cifie a std::unique_ptr of what in order to be a type"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1525266592, "post_id": 50135392, "comment_id": 87288866, "body": "I think you&#39;d be better off doing partial specialization (possibly with a common base to avoid repetition) instead of trying to enumerate the possible <code>Ptr</code> arguments in one function body."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1525266710, "post_id": 50135392, "comment_id": 87288965, "body": "And actually, this whole of <code>_future_reload</code> is in violation of <a href=\"http://eel.is/c++draft/temp.res#8\" rel=\"nofollow noreferrer\">&#91;temp.res&#93;/8</a>. That&#39;s why line33 is highlighted"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1525267390, "post_id": 50135392, "comment_id": 87289432, "body": "In C++14, <code>std::unique_ptr</code> won&#39;t match <code>template&lt;class&gt; class Ptr</code> because of second defaulted template (Deleter)."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1525268939, "post_id": 50135392, "comment_id": 87290590, "body": "Demo for @Jarod42&#39;s comment: <a href=\"https://godbolt.org/g/tNiYB1\" rel=\"nofollow noreferrer\">godbolt.org/g/tNiYB1</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2132, "user_id": 1315480, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0ec5acc01d8130dfefe52b6ea8823bbb?s=128&d=identicon&r=PG", "display_name": "Patrizio Bertoni", "link": "https://stackoverflow.com/users/1315480/patrizio-bertoni"}, "edited": false, "score": 0, "creation_date": 1525266975, "post_id": 50135473, "comment_id": 87289134, "body": "The problem is <code>Ptr = std::shared_ptr</code> as of <code>main</code> call; further, I just need to know which <code>std::make_</code> to call. Because of the concrete-interface layer, I cannot assume to have <code>std::is_same&lt;std::shared_ptr&lt;I&gt;, std::shared_ptr&lt;C&gt;&gt;{}</code> working, generally speaking"}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": false, "score": 7, "last_activity_date": 1525266526, "creation_date": 1525266526, "answer_id": 50135473, "question_id": 50135392, "link": "https://stackoverflow.com/questions/50135392/expected-a-type-got-a-template/50135473#50135473", "title": "Expected a type, got a template", "body": "<p><code>std::unique_ptr</code> is not a type. <code>std::unique_ptr&lt;int&gt;</code> is a type. You need to pass explicit template parameters to use it inside <code>is_same</code>.</p>\n\n<p>Also, you probably don't want to use <code>if</code> in this way, as both branches need to be valid regardless of the result of <code>is_same</code>. In C++17, you would use <code>if constexpr(...)</code> to solve this issue - in C++14, you can use a more traditional overload-based approach or tag-dispatch based approach. E.g.</p>\n\n<pre><code>auto impl(std::true_type  /* is shared ptr */) { /* ... */ }\nauto impl(std::false_type /* is unique ptr */) { /* ... */ }\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>ptr = impl(std::is_same&lt;Ptr, std::shared_ptr&lt;T&gt;&gt;{}, /* ... */);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": true, "score": 2, "last_activity_date": 1525270442, "creation_date": 1525270442, "answer_id": 50136823, "question_id": 50135392, "link": "https://stackoverflow.com/questions/50135392/expected-a-type-got-a-template/50136823#50136823", "title": "Expected a type, got a template", "body": "<p>You cannot compare the template template parameters like that, you can only compare concrete types with <code>std::is_same</code>. Further, you cannot even have the same template signature of <code>AsyncFactory</code> for both <code>std::shared_ptr</code> and <code>std::unique_ptr</code> anymore: <a href=\"https://godbolt.org/g/tNiYB1\" rel=\"nofollow noreferrer\">https://godbolt.org/g/tNiYB1</a></p>\n\n<p>A solution to your problem is introducing another layer of abstraction:</p>\n\n<pre><code>struct UseUnique\n{\n    template&lt;class I&gt;\n    using Ptr = std::unique_ptr&lt;I&gt;;\n\n    template&lt;class C, typename... Ts&gt;\n    static auto build(Ts&amp;&amp;... params)\n    {\n        return std::make_unique&lt;C&gt;(std::forward&lt;Ts&gt;(params)...);\n    }\n};\n\nstruct UseShared\n{\n    template&lt;class I&gt;\n    using Ptr = std::shared_ptr&lt;I&gt;;\n\n    template&lt;class C, typename... Ts&gt;\n    static auto build(Ts&amp;&amp;... params)\n    {\n        return std::make_shared&lt;C&gt;(std::forward&lt;Ts&gt;(params)...);\n    }\n};\n</code></pre>\n\n<p>These structs contain the information you need to define your member and to build concrete types (i.e. which pointer type and which <code>make_X</code> function to use). Then you can do:</p>\n\n<pre><code>template &lt;class I, class UseWhat = UseShared&gt;\nclass AsyncFactory\n{\n    template &lt;class C, typename... Ts&gt;\n    void _future_reload(Ts&amp;&amp;... params)\n    {\n        ptr = UseWhat::template build&lt;C&gt;(std::forward&lt;Ts&gt;(params)...);\n    }\n\npublic:\n    using Ptr = typename UseWhat::template Ptr&lt;I&gt;;\n    Ptr ptr;\n    // ...\n}\n</code></pre>\n\n<p>and thus</p>\n\n<pre><code>AsyncFactory&lt;Interf, UseUnique&gt; fac;\nfac.reload&lt;Concrete&gt;();\n</code></pre>\n\n<p>Complete working code here: <a href=\"https://godbolt.org/g/L2511J\" rel=\"nofollow noreferrer\">https://godbolt.org/g/L2511J</a></p>\n\n<p>The structs should maybe be in a separate namespace, and could probably have better names. Left as an exercise to the reader :)</p>\n"}], "owner": {"reputation": 2132, "user_id": 1315480, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0ec5acc01d8130dfefe52b6ea8823bbb?s=128&d=identicon&r=PG", "display_name": "Patrizio Bertoni", "link": "https://stackoverflow.com/users/1315480/patrizio-bertoni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1280, "favorite_count": 0, "accepted_answer_id": 50136823, "answer_count": 2, "score": 3, "last_activity_date": 1525270442, "creation_date": 1525266297, "last_edit_date": 1525268018, "question_id": 50135392, "link": "https://stackoverflow.com/questions/50135392/expected-a-type-got-a-template", "title": "Expected a type, got a template", "body": "<p>I'm writing a sort of \"asynchronous factory\" where time-consuming constructions of concrete objects are deferred to <code>std::async</code> tasks.\nEach <code>AsyncFactory</code> will store a <em>smart</em> pointer to the object.</p>\n\n<p>[This is not the most correct application of <em>Factory Pattern</em>, but it is for the sake of a MWE].</p>\n\n<pre><code>#include &lt;future&gt;\n#include &lt;memory&gt;\n#include &lt;type_traits&gt;\n#include &lt;cassert&gt;\n\n/**\n * @param I is the interface type\n * @param Ptr is the memory handler. Default = unique; optional = shared\n */\ntemplate &lt;class I, template&lt;class&gt; class Ptr = std::unique_ptr&gt;\nclass AsyncFactory\n{\n    /**\n     * @param C - the concrete type for the interface I\n     * @param Ts - the variadic params\n     */\n    template &lt;class C, typename... Ts&gt;\n    void _future_reload(Ts&amp;&amp;... params)\n    {\n        if (std::is_same&lt;Ptr, std::unique_ptr&gt;())                       // line21\n        {\n            ptr = std::make_unique&lt;C&gt;(std::forward&lt;Ts&gt;(params)...);\n        }\n        else\n        {\n            if (std::is_same&lt;Ptr, std::shared_ptr&gt;())                   // line27\n            {\n                ptr = std::make_shared&lt;C&gt;(std::forward&lt;Ts&gt;(params)...);\n            }\n            else\n            {\n                static_assert(0, \"unacceptable type for smart pointer\");// line33\n            }\n        }\n    }\n\npublic: \n\n    Ptr&lt;I&gt; ptr;\n\n    AsyncFactory() :\n        ptr(nullptr)\n    {}\n\n    /**\n     * @param C - the concrete type. Default: the interface type\n     * @param Ts - the variadic params\n     */\n    template &lt;class C = I, typename... Ts&gt;\n    void reload(Ts&amp;&amp;... params)\n    {\n        std::future&lt;void&gt; fReload =\n                        std::async(std::launch::async,\n                        &amp;AsyncFactory::_future_reload&lt;C, Ts...&gt;, this,\n                        std::forward&lt;Ts&gt;(params)...);\n    }\n};\n\n\nclass BaseVirtual\n{\n    virtual void foo() = 0;\n};\n\nclass DerivedConcrete :\n    public BaseVirtual\n{\n    void foo() override {;}\n};\n\n\nint main()\n{\n    AsyncFactory&lt;BaseVirtual, std::shared_ptr&gt; fac;\n\n    fac.reload&lt;DerivedConcrete&gt;();\n}\n</code></pre>\n\n<p>Problems arise with the smart pointer. I have to call different <code>make</code>rs for <code>unique</code>/<code>shared</code> pointers. But <code>g++ -std=c++14</code> stops with</p>\n\n<pre><code>f.cpp: In member function \u2018void AsyncFactory&lt;I, Ptr&gt;::_future_reload(Ts&amp;&amp; ...)\u2019:\nf.cpp:21:44: error: type/value mismatch at argument 1 in template parameter list for \u2018template&lt;class, class&gt; struct std::is_same\u2019\n   if (std::is_same&lt;Ptr, std::unique_ptr&gt;())\n                                        ^\nf.cpp:21:44: note:   expected a type, got \u2018Ptr\u2019\nf.cpp:21:44: error: type/value mismatch at argument 2 in template parameter list for \u2018template&lt;class, class&gt; struct std::is_same\u2019\nf.cpp:21:44: note:   expected a type, got \u2018unique_ptr\u2019\nf.cpp:27:45: error: type/value mismatch at argument 1 in template parameter list for \u2018template&lt;class, class&gt; struct std::is_same\u2019\n    if (std::is_same&lt;Ptr, std::shared_ptr&gt;())\n                                         ^\nf.cpp:27:45: note:   expected a type, got \u2018Ptr\u2019\nf.cpp:27:45: error: type/value mismatch at argument 2 in template parameter list for \u2018template&lt;class, class&gt; struct std::is_same\u2019\nf.cpp:27:45: note:   expected a type, got \u2018shared_ptr\u2019\nf.cpp:33:9: error: static assertion failed: unacceptable type for smart pointer\n     static_assert(0, \"unacceptable type for smart pointer\");\n</code></pre>\n"}, {"tags": ["c++", "assembly", "x86", "clang", "x86-64"], "comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1525269368, "post_id": 50135074, "comment_id": 87290919, "body": "<code>b</code> operand-size is <i>byte</i>, not <i>bit</i>, so <code>$1</code> is a byte with only the low bit set.  Weird that clang uses a separate load instead of <code>test</code> with a memory operand; the function doesn&#39;t use the value again so no need to have it in a register.  Or actually, an <a href=\"https://stackoverflow.com/questions/26046634/micro-fusion-and-addressing-modes\">immediate + RIP-relative wouldn&#39;t micro-fuse</a> on Intel.  It might also fail to macro-fuse, so you could end up with 3 fused-domain uops on Intel from <code>test $1, _flag_atomic(%rip) &#47; jnz</code>."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1525269424, "post_id": 50135074, "comment_id": 87290975, "body": "Note that <code>movb</code> is already a micro-fused load + merge into the low byte of RAX, though, <a href=\"https://stackoverflow.com/questions/45660139/how-exactly-do-partial-registers-on-haswell-skylake-perform-writing-al-seems-to\">on recent Intel</a>.  <code>movzbl</code> would avoid the false dependency.  So clang already has 3 unfused-domain uops (2 of them from the <code>movb</code>), but only 2 total fused-domain uops this way."}, {"owner": {"reputation": 26593, "user_id": 811335, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ca588e5bfb1ac0a5d8ec8acb422aa564?s=128&d=identicon&r=PG", "display_name": "A. K.", "link": "https://stackoverflow.com/users/811335/a-k"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1525270612, "post_id": 50135074, "comment_id": 87291881, "body": "Yes, for some reason, this only happens with atomic_load, for a scalar load clang generates <code>cmpb</code> without using <code>%al</code>."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1525270947, "post_id": 50135074, "comment_id": 87292152, "body": "Ah, yeah <code>atomic</code> gets treated specially inside the compiler, and (like <code>volatile</code>) sometimes ends gimping the optimizer.  Current compilers don&#39;t even optimize away repeated atomic loads, although the current standard does allow that: <a href=\"//stackoverflow.com/q/41820539\">Can and does the compiler optimize out two atomic loads?</a> and especially my answer on <a href=\"//stackoverflow.com/q/45960387\">Why don&#39;t compilers merge redundant std::atomic writes?</a>"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1525271048, "post_id": 50135074, "comment_id": 87292236, "body": "FYI, <a href=\"http://godbolt.org/\" rel=\"nofollow noreferrer\">godbolt.org</a> is really nice for playing with compiler asm output (e.g. your code: <a href=\"https://godbolt.org/g/oNarvk\" rel=\"nofollow noreferrer\">godbolt.org/g/oNarvk</a>) with different options / compilers / versions."}, {"owner": {"reputation": 26593, "user_id": 811335, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ca588e5bfb1ac0a5d8ec8acb422aa564?s=128&d=identicon&r=PG", "display_name": "A. K.", "link": "https://stackoverflow.com/users/811335/a-k"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1525271560, "post_id": 50135074, "comment_id": 87292612, "body": "Thanks for sharing the resources. Very useful! I regularly use godbolt btw. PS: <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=85610\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=85610</a>"}], "answers": [{"tags": [], "owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "is_accepted": true, "score": 3, "last_activity_date": 1525330304, "last_edit_date": 1525330304, "creation_date": 1525266152, "answer_id": 50135340, "question_id": 50135074, "link": "https://stackoverflow.com/questions/50135074/what-is-the-semantics-of-testb-1-al/50135340#50135340", "title": "What is the semantics of testb $1, %al", "body": "<p>In AT&amp;T syntax <code>$</code> is the prefix for immediate values (<a href=\"https://stackoverflow.com/q/9196655/214671\">see also</a>); <code>$1</code> is a plain 1, so your instruction sets the flags according to the least significant bit of <code>al</code>.</p>\n\n<blockquote>\n  <p>is it all ones (0xFF) or a single 1 (0x1)?</p>\n</blockquote>\n\n<p>All ones would be</p>\n\n<pre><code>testb $-1, %al\n</code></pre>\n\n<p>or (exact same machine code, just disassembly preference)</p>\n\n<pre><code>testb $0xff, %al\n</code></pre>\n\n<p>which incidentally would have the exact same semantic as</p>\n\n<pre><code>testb %al, %al\n</code></pre>\n\n<p>(as a mask of <code>0xff</code> over an 8 bit register doesn't mask anything), and in this case is also valid for your code, as for a boolean there should be no need to mask anything out to check if it's true (and indeed gcc prefers this last version for your code).</p>\n\n<hr>\n\n<pre><code>movb  _flag_atomic(%rip), %al \ntestb $1, %al\njne LBB0_2\n</code></pre>\n\n<p>in Intel syntax (no prefixes, no suffixes, <code>dest, source</code> operands order, explicit memory addressing syntax) this is</p>\n\n<pre><code>mov al, [rip+_flag_atomic]\ntest al, 1\njne LBB0_2\n</code></pre>\n\n<p>And, in pseudo-C:</p>\n\n<pre><code>%al = _flag_atomic;\nif(%al &amp; 1 != 0) goto LBB0_2;\n</code></pre>\n\n<p>(<code>jne</code> is an alias of <code>jnz</code>, which is probably more clear in this case).</p>\n"}, {"tags": [], "owner": {"reputation": 328, "user_id": 9591612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CNYpQ.jpg?s=128&g=1", "display_name": "Sandeep", "link": "https://stackoverflow.com/users/9591612/sandeep"}, "is_accepted": false, "score": 0, "last_activity_date": 1525266397, "creation_date": 1525266397, "answer_id": 50135428, "question_id": 50135074, "link": "https://stackoverflow.com/questions/50135074/what-is-the-semantics-of-testb-1-al/50135428#50135428", "title": "What is the semantics of testb $1, %al", "body": "<p><code>0x</code> is prefixed with hexadecimal number. <code>0</code> is prefixed with Octal number and if you do not mentioned any prefix it would be decimal number system. In your case this is 1 in decimal number system.</p>\n"}], "owner": {"reputation": 26593, "user_id": 811335, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ca588e5bfb1ac0a5d8ec8acb422aa564?s=128&d=identicon&r=PG", "display_name": "A. K.", "link": "https://stackoverflow.com/users/811335/a-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 704, "favorite_count": 0, "accepted_answer_id": 50135340, "answer_count": 2, "score": 0, "last_activity_date": 1525330304, "creation_date": 1525265360, "last_edit_date": 1525266289, "question_id": 50135074, "link": "https://stackoverflow.com/questions/50135074/what-is-the-semantics-of-testb-1-al", "title": "What is the semantics of testb $1, %al", "body": "<p>I'm trying to understand what this testb instruction (x86-64) will do.</p>\n\n<pre><code>testb $1, %al\n</code></pre>\n\n<p>What is the value of $1 here. is it all ones (<code>0xFF</code>) or a single 1 (<code>0x1</code>)?</p>\n\n<p>The assembly is produced by clang for the following program:</p>\n\n<pre><code>#include &lt;atomic&gt;\nstd::atomic&lt;bool&gt; flag_atomic{false};\n\nextern void f1();\nextern void f2();\n\nvoid foo() {\n    bool b = flag_atomic.load(std::memory_order_relaxed);\n    if (b == false) {\n        f1();\n    } else {\n        f2();\n    }   \n}\n</code></pre>\n\n<p>The relevant assembly with (clang++ -s test.cpp -O3) is the following:</p>\n\n<pre><code>Lcfi2:\n  .cfi_def_cfa_register %rbp\n  movb  _flag_atomic(%rip), %al \n  testb $1, %al ; &lt;&lt;&lt;&lt;------------\n  jne LBB0_2\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 415, "user_id": 7305358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/909955eb7835150dae7bfbfa4e587e23?s=128&d=identicon&r=PG&f=1", "display_name": "Zinki", "link": "https://stackoverflow.com/users/7305358/zinki"}, "edited": false, "score": 0, "creation_date": 1525265186, "post_id": 50134976, "comment_id": 87287956, "body": "without seeing the code that causes this error, it&#39;s unlikely anyone can help."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1525265194, "post_id": 50134976, "comment_id": 87287963, "body": "The error message by itself isn&#39;t that helpful to diagnose the problem. If I had to guess I&#39;d say you are compiling with <code>clang</code> and not <code>clang++</code>. But nobody can know for sure unless you show your short program and compiler invocation."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1525265341, "post_id": 50134976, "comment_id": 87288060, "body": "@Austin update your question please, don&#39;t just post it in a comment."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1525265347, "post_id": 50134976, "comment_id": 87288063, "body": "Please don&#39;t post code in comments. <a href=\"https://stackoverflow.com/posts/50134976/edit\">edit</a> your question to include all relevant parts."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1525265371, "post_id": 50134976, "comment_id": 87288078, "body": "Code in comments isn&#39;t helpful. Please <a href=\"https://stackoverflow.com/posts/50134976/edit\">edit</a> your question and add it there, where it can be seen. It&#39;s part of the question."}, {"owner": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 0, "creation_date": 1525265375, "post_id": 50134976, "comment_id": 87288084, "body": "gcc ? the error message says clang"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1525265379, "post_id": 50134976, "comment_id": 87288085, "body": "Try <code>g++ -o helloWorld hello.cpp</code>."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "reply_to_user": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 0, "creation_date": 1525265890, "post_id": 50134976, "comment_id": 87288404, "body": "@Tyker \u2022 some platforms (e.g., macOS) soft-link gcc and g++ to clang and clang++.  I&#39;m not in favor of that practice, since I use both clang++ and GNU GCC g++, so I have to ensure I&#39;m using the correct g++ by using its fully qualified path."}], "answers": [{"tags": [], "owner": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "is_accepted": false, "score": 1, "last_activity_date": 1525265649, "last_edit_date": 1525265649, "creation_date": 1525265268, "answer_id": 50135041, "question_id": 50134976, "link": "https://stackoverflow.com/questions/50134976/beginner-compiling-from-command-line/50135041#50135041", "title": "Beginner Compiling from Command Line", "body": "<p>The problem looks like you are compiling C++ source with <code>clang</code>, a C compiler. This gives you link editor errors about missing symbols.</p>\n\n<p>Try using <code>clang++</code>, a C++ compiler. This should know by default which C++ libraries to link which should solve any missing symbols.</p>\n\n<p>(On MacOS you may have gcc/g++ as frontends for clang/clang++, in which case use <code>g++</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 1356, "user_id": 9657552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ksHjQ.png?s=128&g=1", "display_name": "Alexey Usachov", "link": "https://stackoverflow.com/users/9657552/alexey-usachov"}, "is_accepted": false, "score": 3, "last_activity_date": 1525266561, "last_edit_date": 1525266561, "creation_date": 1525265396, "answer_id": 50135090, "question_id": 50134976, "link": "https://stackoverflow.com/questions/50134976/beginner-compiling-from-command-line/50135090#50135090", "title": "Beginner Compiling from Command Line", "body": "<blockquote>\n  <p>The command I am using to build is gcc -o helloWorld hello.cpp</p>\n</blockquote>\n\n<p>Use <code>g++ -o helloWorld hello.cpp</code></p>\n\n<p>If you want to use <code>gcc</code> to compile it then you can pass flag -<code>lstdc++</code> to link with standard library c++, write in console:</p>\n\n<p>Use <code>gcc -o helloWorld hello.cpp -lstdc++</code></p>\n"}], "owner": {"reputation": 111, "user_id": 1022759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f722140192e3f8cb0438cb869d2011dc?s=128&d=identicon&r=PG", "display_name": "Austin", "link": "https://stackoverflow.com/users/1022759/austin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "closed_date": 1525267186, "answer_count": 2, "score": -1, "last_activity_date": 1525273285, "creation_date": 1525265067, "last_edit_date": 1525273285, "question_id": 50134976, "link": "https://stackoverflow.com/questions/50134976/beginner-compiling-from-command-line", "closed_reason": "Not suitable for this site", "title": "Beginner Compiling from Command Line", "body": "<p>I have just recently purchased the 'Principles of Programming with C++' book and am trying to compile the Hello World program from command line. I have done a little C programming recently and never had any problems building, but now I am getting this big whopping error message. Is there anyone who can parse this?</p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>#include &lt;iostream&gt; \nusing namespace std;\nint main() {\n    cout &lt;&lt; \"Hello, World!\\n\";\n    //output \"Hello, World!\" \n    return 0;\n}\n</code></pre>\n\n<p>The command I am using to build is <code>gcc -o helloWorld hello.cpp</code></p>\n\n<p><strong>Error Log :</strong>\n</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n  \"std::__1::locale::use_facet(std::__1::locale::id&amp;) const\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::__put_character_sequence&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char const*, unsigned long) in hello-30df63.o\n  \"std::__1::ios_base::getloc() const\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::__put_character_sequence&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char const*, unsigned long) in hello-30df63.o\n  \"std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;::__init(unsigned long, char)\", referenced from:\n      std::__1::ostreambuf_iterator&lt;char, std::__1::char_traits&lt;char&gt; &gt; std::__1::__pad_and_output&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::ostreambuf_iterator&lt;char, std::__1::char_traits&lt;char&gt; &gt;, char const*, char const*, char const*, std::__1::ios_base&amp;, char) in hello-30df63.o\n  \"std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;::~basic_string()\", referenced from:\n      std::__1::ostreambuf_iterator&lt;char, std::__1::char_traits&lt;char&gt; &gt; std::__1::__pad_and_output&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::ostreambuf_iterator&lt;char, std::__1::char_traits&lt;char&gt; &gt;, char const*, char const*, char const*, std::__1::ios_base&amp;, char) in hello-30df63.o\n  \"std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;::sentry::sentry(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;)\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::__put_character_sequence&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char const*, unsigned long) in hello-30df63.o\n  \"std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;::sentry::~sentry()\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::__put_character_sequence&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char const*, unsigned long) in hello-30df63.o\n  \"std::__1::cout\", referenced from:\n      _main in hello-30df63.o\n  \"std::__1::ctype&lt;char&gt;::id\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::__put_character_sequence&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char const*, unsigned long) in hello-30df63.o\n  \"std::__1::locale::~locale()\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::__put_character_sequence&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char const*, unsigned long) in hello-30df63.o\n  \"std::__1::ios_base::__set_badbit_and_consider_rethrow()\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::__put_character_sequence&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char const*, unsigned long) in hello-30df63.o\n  \"std::__1::ios_base::clear(unsigned int)\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::__put_character_sequence&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char const*, unsigned long) in hello-30df63.o\n  \"std::terminate()\", referenced from:\n      ___clang_call_terminate in hello-30df63.o\n  \"___cxa_begin_catch\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::__put_character_sequence&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char const*, unsigned long) in hello-30df63.o\n      ___clang_call_terminate in hello-30df63.o\n  \"___cxa_end_catch\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::__put_character_sequence&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char const*, unsigned long) in hello-30df63.o\n  \"___gxx_personality_v0\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::__put_character_sequence&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char const*, unsigned long) in hello-30df63.o\n      std::__1::ostreambuf_iterator&lt;char, std::__1::char_traits&lt;char&gt; &gt; std::__1::__pad_and_output&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::ostreambuf_iterator&lt;char, std::__1::char_traits&lt;char&gt; &gt;, char const*, char const*, char const*, std::__1::ios_base&amp;, char) in hello-30df63.o\n      Dwarf Exception Unwind Info (__eh_frame) in hello-30df63.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Apparently I just needed to use g++ instead of gcc.</p>\n"}, {"tags": ["c++", "windows"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 7, "creation_date": 1525264617, "post_id": 50134791, "comment_id": 87287557, "body": "<code>#include &lt;vector&gt;</code> and <code>#include &lt;random&gt;</code> should get you started; but this isn&#39;t a code writing service, so you&#39;ll have to post what you&#39;ve tried before most people will reply with something other than a down vote."}], "answers": [{"tags": [], "owner": {"reputation": 768, "user_id": 4623259, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/sNAyd.png?s=128&g=1", "display_name": "iPherian", "link": "https://stackoverflow.com/users/4623259/ipherian"}, "is_accepted": false, "score": 1, "last_activity_date": 1525265768, "creation_date": 1525265768, "answer_id": 50135208, "question_id": 50134791, "link": "https://stackoverflow.com/questions/50134791/list-of-exe-to-open-randomly/50135208#50135208", "title": "List of exe to open randomly", "body": "<pre><code>#include &lt;vector&gt;\n#include &lt;random&gt;\n#include &lt;string&gt;\n#include &lt;cstdlib&gt;\n\nint main() {\n    std::vector&lt;std::string&gt; progs{\"game_one.exe\", \"game_two.exe\"};\n    std::default_random_engine generator;\n    std::uniform_int_distribution&lt;int&gt; distribution(0,progs.size()-1);\n    system(progs.at(distribution(generator)).c_str());\n}\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 9730210, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2MmLp1OjWro/AAAAAAAAAAI/AAAAAAAAEb4/IodsmxhoaOY/photo.jpg?sz=128", "display_name": "Thomas Mandija", "link": "https://stackoverflow.com/users/9730210/thomas-mandija"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "closed_date": 1525267684, "answer_count": 1, "score": -5, "last_activity_date": 1525265768, "creation_date": 1525264453, "question_id": 50134791, "link": "https://stackoverflow.com/questions/50134791/list-of-exe-to-open-randomly", "closed_reason": "Needs more focus", "title": "List of exe to open randomly", "body": "<p>I would like to create a program where I have a list of game and open them randomly. I would like to know how to create a a list of exe file and how to choose a random element of a list</p>\n"}, {"tags": ["c#", "c++", ".net", "visual-studio", "visual-c++"], "comments": [{"owner": {"reputation": 14371, "user_id": 321866, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/25e93a50d485eca289f887868e1bcea5?s=128&d=identicon&r=PG", "display_name": "C Johnson", "link": "https://stackoverflow.com/users/321866/c-johnson"}, "edited": false, "score": 0, "creation_date": 1525264173, "post_id": 50134650, "comment_id": 87287240, "body": "What kind of errors are you seeing on &#39;other&#39; computers?"}, {"owner": {"reputation": 671, "user_id": 4064630, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100001958091711/picture?type=large", "display_name": "Francis Lord", "link": "https://stackoverflow.com/users/4064630/francis-lord"}, "edited": false, "score": 0, "creation_date": 1525264203, "post_id": 50134650, "comment_id": 87287265, "body": "If I had to guess I&#39;d the redistribuable might be needed by the library you&#39;re using, in which case there&#39;s not much you can do. Just make sure you let your user know they the the VC++ redist and it should be fine, it&#39;s a fairly common reditribuable"}, {"owner": {"reputation": 597, "user_id": 6819761, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2cc4e64467570d51bd3c40b1300a3377?s=128&d=identicon&r=PG&f=1", "display_name": "s_s", "link": "https://stackoverflow.com/users/6819761/s-s"}, "edited": false, "score": 0, "creation_date": 1525264386, "post_id": 50134650, "comment_id": 87287381, "body": "Thanks, This is the Error: Could not load file or assembly &#39;APILibrary.dll&#39; or one of its dependencies. The specified module could not be found."}, {"owner": {"reputation": 13507, "user_id": 2846483, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/X2Bfs.jpg?s=128&g=1", "display_name": "dymanoid", "link": "https://stackoverflow.com/users/2846483/dymanoid"}, "edited": false, "score": 0, "creation_date": 1525264500, "post_id": 50134650, "comment_id": 87287463, "body": "Alternatively, you could statically link your unmanaged C++ library so that it has no dependencies to any external DLLs."}, {"owner": {"reputation": 14371, "user_id": 321866, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/25e93a50d485eca289f887868e1bcea5?s=128&d=identicon&r=PG", "display_name": "C Johnson", "link": "https://stackoverflow.com/users/321866/c-johnson"}, "edited": false, "score": 0, "creation_date": 1525264513, "post_id": 50134650, "comment_id": 87287471, "body": "You also need to distribute APILIbrary.dll to your customers computers too."}], "answers": [{"comments": [{"owner": {"reputation": 597, "user_id": 6819761, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2cc4e64467570d51bd3c40b1300a3377?s=128&d=identicon&r=PG&f=1", "display_name": "s_s", "link": "https://stackoverflow.com/users/6819761/s-s"}, "edited": false, "score": 0, "creation_date": 1525265290, "post_id": 50134828, "comment_id": 87288025, "body": "I found this redistributable: <a href=\"https://support.microsoft.com/en-us/help/2977003/the-latest-supported-visual-c-downloads\" rel=\"nofollow noreferrer\">support.microsoft.com/en-us/help/2977003/&hellip;</a> But It looks like it for the visual studio and my app didn&#39;t work on computers without the visual studio. Is there any other redistributable that can run without VS?"}, {"owner": {"reputation": 629, "user_id": 6527456, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2700ea72146ee211c3846d46c0a018c8?s=128&d=identicon&r=PG&f=1", "display_name": "ArgusMagnus", "link": "https://stackoverflow.com/users/6527456/argusmagnus"}, "edited": false, "score": 1, "creation_date": 1525266408, "post_id": 50134828, "comment_id": 87288745, "body": "Also make sure the C++ dll is compiled as Release build, debug builds cannot be redistributed without VS installed (at least not in a supported way)"}, {"owner": {"reputation": 14371, "user_id": 321866, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/25e93a50d485eca289f887868e1bcea5?s=128&d=identicon&r=PG", "display_name": "C Johnson", "link": "https://stackoverflow.com/users/321866/c-johnson"}, "edited": false, "score": 0, "creation_date": 1525273287, "post_id": 50134828, "comment_id": 87293840, "body": "You have to know what version of the visual c++ compiler you are compiling against. And then find the matching visual c++ redist."}], "tags": [], "owner": {"reputation": 14371, "user_id": 321866, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/25e93a50d485eca289f887868e1bcea5?s=128&d=identicon&r=PG", "display_name": "C Johnson", "link": "https://stackoverflow.com/users/321866/c-johnson"}, "is_accepted": false, "score": 1, "last_activity_date": 1525264619, "creation_date": 1525264619, "answer_id": 50134828, "question_id": 50134650, "link": "https://stackoverflow.com/questions/50134650/using-c-wrapper-in-c-net-project/50134828#50134828", "title": "using c++ wrapper in c# .NET project", "body": "<p>With .NET applications you need to make sure customers have a version of .NET that matches what you compiled your application with.</p>\n\n<p>With (Microsoft) C++ applications that depend on the C Runtime, you need to make sure customers have a version of the Visual C++ Redistributables that matches what you compiled your application with. Do a google search for 'visual c++ redistributable' and you will see lots of suggestions on what to look for.</p>\n"}], "owner": {"reputation": 597, "user_id": 6819761, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2cc4e64467570d51bd3c40b1300a3377?s=128&d=identicon&r=PG&f=1", "display_name": "s_s", "link": "https://stackoverflow.com/users/6819761/s-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1525264619, "creation_date": 1525264037, "question_id": 50134650, "link": "https://stackoverflow.com/questions/50134650/using-c-wrapper-in-c-net-project", "title": "using c++ wrapper in c# .NET project", "body": "<p>I'm using the C++ wrapper in this link:\n<a href=\"https://github.com/TekRTSA/RSA_API\" rel=\"nofollow noreferrer\">https://github.com/TekRTSA/RSA_API</a></p>\n\n<p>In order to use a driver written in C++ inside C# project.\nWhen I publish/release my C# project it doesn't work on other computers without Visual C++.</p>\n\n<p>Is there any way that I can publish my project on computers that don't have the visual C++? Or is there any software package like .NET that I can use in order to make it work?</p>\n"}, {"tags": ["c++", "encryption", "base64", "aes"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1525264256, "post_id": 50134642, "comment_id": 87287300, "body": "Off topic either: Too broad (write my code) or Asking to recommend. Please edit your question, see: <a href=\"https://stackoverflow.com/help/on-topic\">stackoverflow.com/help/on-topic</a>"}, {"owner": {"reputation": 25, "user_id": 9721983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8090f148a13ac9c8471fb3b4b6fc7aab?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel Hardson", "link": "https://stackoverflow.com/users/9721983/samuel-hardson"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1525264561, "post_id": 50134642, "comment_id": 87287511, "body": "@RichardCritten hi Richard , No i don&#39;t need any code I need guide . like included libraries , links or anything can help me . thanks"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1525264609, "post_id": 50134642, "comment_id": 87287551, "body": "You can compile OpenSSL as a static library.  Please do not plan on writing your own AES implemention. <a href=\"http://www.moserware.com/2009/09/stick-figure-guide-to-advanced.html\" rel=\"nofollow noreferrer\">moserware.com/2009/09/stick-figure-guide-to-advanced.html</a> (See the slide labelled &quot;Foot-shooting prevention agreement&quot;.)"}, {"owner": {"reputation": 25, "user_id": 9721983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8090f148a13ac9c8471fb3b4b6fc7aab?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel Hardson", "link": "https://stackoverflow.com/users/9721983/samuel-hardson"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1525264650, "post_id": 50134642, "comment_id": 87287576, "body": "@RichardCritten I will do an edit"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1525264730, "post_id": 50134642, "comment_id": 87287630, "body": "@SamuelHardson - well I&#39;ve voted to close as too broad.  Please <a href=\"https://stackoverflow.com/posts/50134642/edit\">edit</a> your question to clarify you want recommendations for suitable libraries, and we can close it as being &quot;off-topic: requests for library&quot;.  Sorry, but SO had rules about what is on-topic here, and this question isn&#39;t."}, {"owner": {"reputation": 25, "user_id": 9721983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8090f148a13ac9c8471fb3b4b6fc7aab?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel Hardson", "link": "https://stackoverflow.com/users/9721983/samuel-hardson"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1525265289, "post_id": 50134642, "comment_id": 87288022, "body": "@MartinBonner my bad , I respect the community . please do what is right."}, {"owner": {"reputation": 103, "user_id": 6111350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/603016a515d4af7a1f58bec2d1f01ed2?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Pikula", "link": "https://stackoverflow.com/users/6111350/chris-pikula"}, "edited": false, "score": 0, "creation_date": 1525268394, "post_id": 50134642, "comment_id": 87290168, "body": "To help you with your Base64 stuff, try <a href=\"https://stackoverflow.com/questions/180947/base64-decode-snippet-in-c?noredirect=1&amp;lq=1\" title=\"base64 decode snippet in c\">stackoverflow.com/questions/180947/&hellip;</a>"}], "owner": {"reputation": 25, "user_id": 9721983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8090f148a13ac9c8471fb3b4b6fc7aab?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel Hardson", "link": "https://stackoverflow.com/users/9721983/samuel-hardson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 537, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1525264012, "creation_date": 1525264012, "question_id": 50134642, "link": "https://stackoverflow.com/questions/50134642/aes-base64-encryption-decryption-and-256bit-mode", "title": "AES &gt; Base64 Encryption/Decryption and 256bit mode", "body": "<p>I need to create a internal AES/Base64 encrypt system for my application.\nI mean , I don't want to have any side dll for my exe like openssl library.</p>\n\n<p>I found this threads :</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/19130498/problems-with-cryptopp-c-aes-256base64\">Problems with CryptoPP C++ AES-256+Base64</a></li>\n<li><a href=\"https://stackoverflow.com/questions/15000688/crypto-encrypt-and-decrypt-in-two-different-c-programs\">Crypto++ encrypt and decrypt in two different c++ programs</a></li>\n</ul>\n\n<p>But they wasn't what I need  , I searched and I found nothing.</p>\n\n<p>What I need exactly is like this site : <a href=\"https://aesencryption.net/\" rel=\"nofollow noreferrer\">https://aesencryption.net/</a></p>\n\n<ol>\n<li>First an AES encryption with a key at 256bit mode</li>\n<li>Next convert it to Base64 ( a Result of encryption in base64 in <strong>aesencryption.net</strong> )</li>\n<li>And a decrypt system to get the first string from encrypted result.</li>\n</ol>\n\n<p>In <a href=\"https://stackoverflow.com/questions/19130498/problems-with-cryptopp-c-aes-256base64\">this thread</a> the key has to be 32 lenght but in the aesencryption.net it can be everything .</p>\n\n<p>Can you please guide me how can I create a system like aesencryption.net site ?</p>\n"}, {"tags": ["c++", "qt", "overloading"], "comments": [{"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 3, "creation_date": 1525263782, "post_id": 50134511, "comment_id": 87286989, "body": "Because <code>testFun(QByteArray&amp; arr)</code> assumes that <code>arr</code> can be modified by function, however your <code>bB</code> object cannot. Therefore compiler calls the most appropriate overload which is <code>testFun(QString str)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 2174, "user_id": 3349368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57c9f50cb5783614c67eef86caf63139?s=128&d=identicon&r=PG", "display_name": "Paul Belanger", "link": "https://stackoverflow.com/users/3349368/paul-belanger"}, "is_accepted": true, "score": 1, "last_activity_date": 1525265556, "creation_date": 1525265556, "answer_id": 50135139, "question_id": 50134511, "link": "https://stackoverflow.com/questions/50134511/passing-const-qbytearray-to-overloaded-function/50135139#50135139", "title": "Passing const QByteArray to overloaded function", "body": "<p>Since the first overload takes a non-const <code>QByteArray</code>, it does not get used. </p>\n\n<p>C++ has a feature called <a href=\"http://en.cppreference.com/w/cpp/language/converting_constructor\" rel=\"nofollow noreferrer\">Converting Constructors</a>. This means that a single-argument constructor that is not marked as <code>explicit</code> can be used automatically to convert one type into another for function overload resolution. </p>\n\n<p><code>QString</code> has <a href=\"http://doc.qt.io/qt-5/qstring.html#QString-8\" rel=\"nofollow noreferrer\">such a constructor</a> that takes a <code>const QByteArray&amp;</code>. Therefore, when selecting what function overload to use, the compiler can first convert the <code>QByteArray</code> to a <code>QString</code> using that constructor, and then proceed to pass that <code>QString</code> into your second function. </p>\n\n<p>Please see <a href=\"http://en.cppreference.com/w/cpp/language/overload_resolution\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/language/overload_resolution</a> for more information. </p>\n"}, {"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1525273390, "creation_date": 1525273390, "answer_id": 50137802, "question_id": 50134511, "link": "https://stackoverflow.com/questions/50134511/passing-const-qbytearray-to-overloaded-function/50137802#50137802", "title": "Passing const QByteArray to overloaded function", "body": "<p>The underlying cause is that Qt (and by extension: you!) allows writing non-typesafe code: there's an implicit conversion from <code>QByteArray</code> to <code>QString</code>. Define <code>QT_RESTRICTED_CAST_FROM_ASCII</code> project-wide, wipe the build folder and rebuild the project. The call that uses the const object won't compile then, and you'll have to fix the function signatures: you should have been taking const references all along.</p>\n\n<pre><code>void testFun(const QByteArray &amp;arr){\n    QTextStream out(stdout);\n    out &lt;&lt; \"QByte\" &lt;&lt; endl;\n}\n\nvoid testFun(const QString &amp;str) {\n    QTextStream out(stdout);\n    out &lt;&lt; \"QStr\" &lt;&lt; endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9730126, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "radfm", "link": "https://stackoverflow.com/users/9730126/radfm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 384, "favorite_count": 0, "accepted_answer_id": 50135139, "answer_count": 2, "score": 1, "last_activity_date": 1525273390, "creation_date": 1525263561, "question_id": 50134511, "link": "https://stackoverflow.com/questions/50134511/passing-const-qbytearray-to-overloaded-function", "title": "Passing const QByteArray to overloaded function", "body": "<p>I have following overloaded function</p>\n\n<pre><code>void testFun(QByteArray&amp; arr){\n    QTextStream out(stdout);\n    out &lt;&lt; \"QByte\" &lt;&lt; endl;\n}\n\nvoid testFun(QString str){\n    QTextStream out(stdout);\n    out &lt;&lt; \"QStr\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Why function <code>void testFun(QString str)</code> is called if I use <code>const QByteArray</code> as argument.</p>\n\n<p>It means - this block of code:</p>\n\n<pre><code>QByteArray bA(\"aaa\");\nconst QByteArray bB(bA);\n\ntestFun(bA);\ntestFun(bB);\n</code></pre>\n\n<p>gives following output:</p>\n\n<pre><code>QByte\nQStr\n</code></pre>\n"}, {"tags": ["c++", "c++builder", "ansistring"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1525263490, "post_id": 50134421, "comment_id": 87286796, "body": "For data that large, I&#39;d say that <code>AnsiString</code> is not the correct container. If it&#39;s data from a file consider using memory-mapping instead."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1525263540, "post_id": 50134421, "comment_id": 87286832, "body": "As for your problem, the value you&#39;re looking for is <code>0x7ffffffful</code>. However, if you get a length over that value it&#39;s already to late."}, {"owner": {"reputation": 123, "user_id": 7366420, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IqQsYB_-syw/AAAAAAAAAAI/AAAAAAAAGfk/lo5XMmfWIko/photo.jpg?sz=128", "display_name": "Alexandra Tupu", "link": "https://stackoverflow.com/users/7366420/alexandra-tupu"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1525263703, "post_id": 50134421, "comment_id": 87286943, "body": "and how i should truncate it? using Delete?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1525264223, "post_id": 50134421, "comment_id": 87287278, "body": "As I stated in my comment, by then it&#39;s already to late and you have already gone over the limit. If <code>AnsiString</code> allows you to even go over such a limit. I still strongly suggest you consider other options before storing such large amounts in an <code>AnsiString</code>, but if you insist I then recommend you change your code to check the length before appending to the string. If the current length plus the length of the string you want to append is to long, then don&#39;t append. So no need to truncate."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1525298064, "post_id": 50134421, "comment_id": 87306443, "body": "How are you storing more than <code>MaxInt</code> (0x7FFFFFFF) chars in an <code>AnsiString</code> to begin with? You should have gotten memory errors from the RTL long before the <code>AnsiString</code> reached that size."}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 7366420, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IqQsYB_-syw/AAAAAAAAAAI/AAAAAAAAGfk/lo5XMmfWIko/photo.jpg?sz=128", "display_name": "Alexandra Tupu", "link": "https://stackoverflow.com/users/7366420/alexandra-tupu"}, "edited": false, "score": 0, "creation_date": 1525263609, "post_id": 50134498, "comment_id": 87286881, "body": "and to truncate the string i should use Delete?"}, {"owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "reply_to_user": {"reputation": 123, "user_id": 7366420, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IqQsYB_-syw/AAAAAAAAAAI/AAAAAAAAGfk/lo5XMmfWIko/photo.jpg?sz=128", "display_name": "Alexandra Tupu", "link": "https://stackoverflow.com/users/7366420/alexandra-tupu"}, "edited": false, "score": 0, "creation_date": 1525264230, "post_id": 50134498, "comment_id": 87287287, "body": "I don&#39;t know this framework, but as I see it in the reference, it should be like <code>ExportFileName.Delete(1 &lt;&lt; 31, ExportFileName.Length());</code>."}, {"owner": {"reputation": 123, "user_id": 7366420, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IqQsYB_-syw/AAAAAAAAAAI/AAAAAAAAGfk/lo5XMmfWIko/photo.jpg?sz=128", "display_name": "Alexandra Tupu", "link": "https://stackoverflow.com/users/7366420/alexandra-tupu"}, "edited": false, "score": 0, "creation_date": 1525265058, "post_id": 50134498, "comment_id": 87287870, "body": "But length returns int, an 1&lt;&lt;31 is not hexa?"}, {"owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "reply_to_user": {"reputation": 123, "user_id": 7366420, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IqQsYB_-syw/AAAAAAAAAAI/AAAAAAAAGfk/lo5XMmfWIko/photo.jpg?sz=128", "display_name": "Alexandra Tupu", "link": "https://stackoverflow.com/users/7366420/alexandra-tupu"}, "edited": false, "score": 0, "creation_date": 1525265167, "post_id": 50134498, "comment_id": 87287943, "body": "@AlexandraTupu No. In C++ only literals can be represented in hex."}, {"owner": {"reputation": 123, "user_id": 7366420, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IqQsYB_-syw/AAAAAAAAAAI/AAAAAAAAGfk/lo5XMmfWIko/photo.jpg?sz=128", "display_name": "Alexandra Tupu", "link": "https://stackoverflow.com/users/7366420/alexandra-tupu"}, "edited": false, "score": 0, "creation_date": 1525265869, "post_id": 50134498, "comment_id": 87288394, "body": "the string is the same, is not modified"}, {"owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "reply_to_user": {"reputation": 123, "user_id": 7366420, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IqQsYB_-syw/AAAAAAAAAAI/AAAAAAAAGfk/lo5XMmfWIko/photo.jpg?sz=128", "display_name": "Alexandra Tupu", "link": "https://stackoverflow.com/users/7366420/alexandra-tupu"}, "edited": false, "score": 0, "creation_date": 1525265940, "post_id": 50134498, "comment_id": 87288435, "body": "@AlexandraTupu Are you sure it was longer than 2^31 before the check? If not, it shouldn&#39;t be modified."}, {"owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "reply_to_user": {"reputation": 123, "user_id": 7366420, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IqQsYB_-syw/AAAAAAAAAAI/AAAAAAAAGfk/lo5XMmfWIko/photo.jpg?sz=128", "display_name": "Alexandra Tupu", "link": "https://stackoverflow.com/users/7366420/alexandra-tupu"}, "edited": false, "score": 0, "creation_date": 1525266798, "post_id": 50134498, "comment_id": 87289023, "body": "Cool! At stackoverflow.com we upvote or accept answers if we think they were helpful."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1525289679, "post_id": 50134498, "comment_id": 87302688, "body": "<code>1 &lt;&lt; 31</code> is 0x80000000, which is greater than <code>MaxInt</code> (0x7FFFFFFF). <code>Delete()</code> takes <code>int</code> as input, <code>1 &lt;&lt; 31</code> is simply too large a value for it to handle, and will wrap to negative when passed as an <code>int</code>. <code>1 &lt;&lt; 30</code> is 0x40000000, which is less than <code>MaxInt</code>. Also note the 1st parameter of <code>Delete()</code> is a 1-based index, and the 2nd parameter is the number of chars to delete.  When removing chars off the end of the string, you can alternatively use <code>SetLength()</code> instead of <code>Delete()</code>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1525303707, "post_id": 50134498, "comment_id": 87307944, "body": "The return type of <code>AnsiString::Length</code> is <code>int</code>, which is 32-bit signed. So this test can never succeed properly. Also, the <code>SetLength</code> function takes <code>int</code> as parameter; passing <code>1ull &lt;&lt; 31</code> to it invokes implementation-defined behaviour (probably passing a negative value)"}, {"owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1525303833, "post_id": 50134498, "comment_id": 87307976, "body": "@M.M I think I noted it at the post. Could you please read it?"}, {"owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "edited": false, "score": 0, "creation_date": 1525341694, "post_id": 50134498, "comment_id": 87322046, "body": "I moved the warning of integer overflow to top of the post and fixed parameters of <code>Delete</code> and <code>SetLength</code>, so nobody could be confused."}], "tags": [], "owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "is_accepted": true, "score": -1, "last_activity_date": 1525341609, "last_edit_date": 1525341609, "creation_date": 1525263504, "answer_id": 50134498, "question_id": 50134421, "link": "https://stackoverflow.com/questions/50134421/truncate-an-ansistring/50134498#50134498", "title": "Truncate an AnsiString", "body": "<p>As I see it in the <a href=\"http://docs.embarcadero.com/products/rad_studio/radstudio2007/RS2007_helpupdates/HUpdate4/EN/html/delphivclwin32/System__AnsiString__Delete.html\" rel=\"nofollow noreferrer\">reference</a>, both parameters of <code>Delete</code> are <code>int</code>, which maximum value way lower than <code>2^31</code>. It seems you don't need such a check.</p>\n\n<p>Anyway, if you'd like to get integer power of <code>2</code>, you can use binary shift operator:</p>\n\n<pre><code>1ull &lt;&lt; 31\n</code></pre>\n\n<p>Binary shift operator manipulates bits of integer in such a way that all bits are shifted in the required direction. For example,</p>\n\n<pre><code>Operation   Bits   Shifted bits 10-based\n1 &lt;&lt; 1    00000001   00000010      2\n1 &lt;&lt; 2    00000001   00000100      4\n4 &lt;&lt; 2    00000100   00010000      16\n</code></pre>\n\n<p>And so on. So <code>1ull &lt;&lt; 31</code> is <code>2^31</code>. <code>ull</code> means we use 64-bits number, because <code>int</code> is to small for it.</p>\n\n<p>To delete the surplus tail using Delete it should be like</p>\n\n<pre><code>ExportFileName.Delete(1 &lt;&lt; 10, ExportFileName.Length());\n</code></pre>\n\n<p>or </p>\n\n<pre><code>ExportFileName.SetLength(1 &lt;&lt; 10);\n</code></pre>\n\n<p>And probably you don't need to check the length beforehand. Just <code>Delete</code> or <code>SetLength</code>. If it already satisfies, no action will be performed.</p>\n"}], "owner": {"reputation": 123, "user_id": 7366420, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IqQsYB_-syw/AAAAAAAAAAI/AAAAAAAAGfk/lo5XMmfWIko/photo.jpg?sz=128", "display_name": "Alexandra Tupu", "link": "https://stackoverflow.com/users/7366420/alexandra-tupu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 50134498, "answer_count": 1, "score": 0, "last_activity_date": 1525341609, "creation_date": 1525263244, "last_edit_date": 1525263673, "question_id": 50134421, "link": "https://stackoverflow.com/questions/50134421/truncate-an-ansistring", "title": "Truncate an AnsiString", "body": "<p>I'm working with Rad Studio, c++ builder.  The size of the AnsiString size is ~2^31 characters. How should I check the length?</p>\n\n<pre><code>if(ExportFileName.Length() &gt; ??? )\n  {\n    ExportFileName. ???\n  }\n  m_ActionsHelper.LastPdfFile = ExportFileName;\n</code></pre>\n"}, {"tags": ["c++", "build", "cmake", "gnu-make", "automake"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 5, "creation_date": 1525262505, "post_id": 50134126, "comment_id": 87286256, "body": "Well, that all depends on if you use source control, and what features that source control has.  Git submodules for example are nice to pull in 3rd party libs; but not all 3rd party libs are available on git.  I&#39;d say this is way too broad, and even if it wasn&#39;t, it&#39;s based on personal preference."}, {"owner": {"reputation": 3457, "user_id": 3753446, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4Pipl.png?s=128&g=1", "display_name": "Magix", "link": "https://stackoverflow.com/users/3753446/magix"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1525262696, "post_id": 50134126, "comment_id": 87286347, "body": "Well, I think the site needs such a broad question. IMO, a good answer, wrapping-up all the things to take into account, would be welcome for a large majority of beginner C++ developpers. It is a very difficult step to take when switching from tutorials to real-life coding."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1525262932, "post_id": 50134126, "comment_id": 87286467, "body": "Ahh - well, I can wrap the issues into a single one really.  The main thing to take into account is your memory and logic - since you need to be able to traverse your files quickly to find file X in library Y.   How you think and remember things though is personal preference.  ;)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1525263048, "post_id": 50134126, "comment_id": 87286547, "body": "afaik there is no community consensus in the general case. Nevertheless a collection of pros and cons could be useful (and is not necessarily opinion-based)"}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 1, "creation_date": 1525263084, "post_id": 50134126, "comment_id": 87286570, "body": "<a href=\"https://www.amazon.co.uk/Large-Scale-C-Software-Design-APC/dp/0201633620\" rel=\"nofollow noreferrer\">amazon.co.uk/Large-Scale-C-Software-Design-APC/dp/0201633620</a>"}, {"owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 1, "creation_date": 1525266695, "post_id": 50134126, "comment_id": 87288950, "body": "Every company I worked for did this in a different way :) ... in the fact the current company I&#39;m working in does this in at least 3 different ways (I know of) right at this moment (although tries to migrate from the &quot;old ways&quot; to the most recent &quot;new way&quot;)"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1525268422, "post_id": 50134126, "comment_id": 87290192, "body": "@user463035818 You can&#39;t even list the pros and cons of things because it depends on other coding styles - for example The person who puts one class per header will likely have a different layout to one that has a strict single class / header because the pros of one layout don&#39;t apply for this case.  What about the one where there&#39;s multiple languages?  Or auto-generated code?  The only thing that you can be sure of is that there will be files; and there may be directories, but there&#39;s no requirement for that one either."}], "owner": {"reputation": 3457, "user_id": 3753446, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4Pipl.png?s=128&g=1", "display_name": "Magix", "link": "https://stackoverflow.com/users/3753446/magix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 457, "favorite_count": 3, "closed_date": 1525263407, "answer_count": 0, "score": 2, "last_activity_date": 1525262234, "creation_date": 1525262234, "question_id": 50134126, "link": "https://stackoverflow.com/questions/50134126/how-to-structure-a-large-c-project", "closed_reason": "Opinion-based", "title": "How to structure a large C++ project?", "body": "<p><em>Even though many have answered parts of the question in specific cases, I couldn't find a clear answer reflecting the community consensus on the best practices to use in the general case</em></p>\n\n<p><strong>How should I structure a big C++ project, containing many modules (shared libraries, executables, bindings) along with their documentation, builds, configuration, etc... ?</strong></p>\n\n<p>As a bonus, it would be interesting to describe how the integration with the mainstream build systems like CMake or Autotools would looke like, based on real-life examples.</p>\n\n<p>Please note it should target cross-platform, IDE-independant projects. Specific information for basic, widely-used libraries may also be a good addition, like Qt (QMake, Qt Creator) or Boost.</p>\n"}, {"tags": ["c++", "bash", "git", "githooks"], "comments": [{"owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 0, "creation_date": 1525263715, "post_id": 50134086, "comment_id": 87286950, "body": "what is the forked process is it the background process which should run forever ? when the caller can continue to execute?"}], "answers": [{"comments": [{"owner": {"reputation": 344, "user_id": 821812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3ca34630230b22088e7ecf9aa22ef204?s=128&d=identicon&r=PG", "display_name": "John Smith", "link": "https://stackoverflow.com/users/821812/john-smith"}, "edited": false, "score": 0, "creation_date": 1525266501, "post_id": 50134754, "comment_id": 87288801, "body": "Thank you very much, that&#39;s what i needed."}, {"owner": {"reputation": 324088, "user_id": 1256452, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa1648baa6108c85886312af93bb32c0?s=128&d=identicon&r=PG", "display_name": "torek", "link": "https://stackoverflow.com/users/1256452/torek"}, "edited": false, "score": 0, "creation_date": 1525273563, "post_id": 50134754, "comment_id": 87294013, "body": "For a post-receive hook in particular, there is no need to close stdin as it refers to a pipe on which Git has written the updated references (and then closed the write end of that pipe). For more general cases of something run by ssh, it&#39;s appropriate to detach all three like this, though."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 324088, "user_id": 1256452, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa1648baa6108c85886312af93bb32c0?s=128&d=identicon&r=PG", "display_name": "torek", "link": "https://stackoverflow.com/users/1256452/torek"}, "edited": false, "score": 0, "creation_date": 1525273665, "post_id": 50134754, "comment_id": 87294082, "body": "@torek which is why I said they both had access to the stdout/err which git is waiting for them to close - but yes, stdin probably doesn&#39;t need to be closed here  (but it does make the intentions very clear!)  ;)"}], "tags": [], "owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "is_accepted": true, "score": 1, "last_activity_date": 1525265266, "last_edit_date": 1525265266, "creation_date": 1525264331, "answer_id": 50134754, "question_id": 50134086, "link": "https://stackoverflow.com/questions/50134086/how-to-detach-from-terminal-so-that-post-receive-hook-in-git-finalizes/50134754#50134754", "title": "How to detach from terminal so that post-receive hook in git finalizes", "body": "<p>When you fork your program; both of them have access to the stdout/err stream; which the git hook is more than likely awaiting to close.</p>\n\n<p>To resolve your issue; If your forked process that continues, closes its handle to stdout, stderr, and stdin;</p>\n\n<pre><code>close(fileno(stdin));\nclose(fileno(stdout));\nclose(fileno(stderr));\n</code></pre>\n\n<p>as well as starting the new session <code>setsid()</code> (which you did) it will become a completely detached process from your soon to be dead process.</p>\n\n<p>Note that attempting to output anything afterwards will be undefined behaviour if left as is.</p>\n\n<p>If you wanted to continue to use only <code>cout</code> or <code>cerr</code> in that process, I would suggest you redirect it using <code>rdbuf</code> as you could at that point after forking, redirect the stdout and stderr to <code>/dev/null</code></p>\n\n<p>If you wanted to use <code>printf</code> or any of it's family, then you would have to re-bind the stdout file descriptor to something.</p>\n"}], "owner": {"reputation": 344, "user_id": 821812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3ca34630230b22088e7ecf9aa22ef204?s=128&d=identicon&r=PG", "display_name": "John Smith", "link": "https://stackoverflow.com/users/821812/john-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 1, "accepted_answer_id": 50134754, "answer_count": 1, "score": 1, "last_activity_date": 1525265266, "creation_date": 1525262056, "question_id": 50134086, "link": "https://stackoverflow.com/questions/50134086/how-to-detach-from-terminal-so-that-post-receive-hook-in-git-finalizes", "title": "How to detach from terminal so that post-receive hook in git finalizes", "body": "<p>i'm creating a post-receive hook for my deploy repository.\nThe hook compiles and executes my program. The programm outputs a few lines i'd like to see, forks and only continues in the forked process.\nWhen i start the program with <code>2>&amp;1 1>/dev/null &amp;</code> it works fine, although i don't see any output from that. I tried calling <code>setsid()</code> after fork, but then the git commit doesn't stop, it continues outputting the program output.</p>\n\n<p>Any ideas for a solution?</p>\n"}, {"tags": ["c++", "qt", "qgraphicsscene", "qgraphicsitem"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1525275846, "post_id": 50134082, "comment_id": 87295445, "body": "The items that are selected are the circles and the circles to join must belong to different ports. I am right?"}, {"owner": {"reputation": 365, "user_id": 9616495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91bcf4ea4e16e38ca0eb32fb3d544f8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brykyz", "link": "https://stackoverflow.com/users/9616495/brykyz"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1525276246, "post_id": 50134082, "comment_id": 87295697, "body": "@eyllanesc Yes, you are right"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1525276470, "post_id": 50134082, "comment_id": 87295841, "body": "The blocks are always made up of a rectangle and 3 circles in the topLeft?"}, {"owner": {"reputation": 365, "user_id": 9616495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91bcf4ea4e16e38ca0eb32fb3d544f8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brykyz", "link": "https://stackoverflow.com/users/9616495/brykyz"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1525280265, "post_id": 50134082, "comment_id": 87297990, "body": "@eyllanesc For now yes, there can be one to five ports"}, {"owner": {"reputation": 1436, "user_id": 4341198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1afe57c0798cf3205c694ee52856fc01?s=128&d=identicon&r=PG&f=1", "display_name": "Dusteh", "link": "https://stackoverflow.com/users/4341198/dusteh"}, "edited": false, "score": 0, "creation_date": 1525304572, "post_id": 50134082, "comment_id": 87308111, "body": "I think we need more info on this. Are these shapes (rect and circles) aggregated inside a custom <code>QGraphicsItem</code> derived class? Show us the implementation. I also assume you have your own class which inherits from <code>QGraphicsView</code>. Is this correct? Is it where you handle mouse events?"}], "answers": [{"tags": [], "owner": {"reputation": 365, "user_id": 9616495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91bcf4ea4e16e38ca0eb32fb3d544f8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brykyz", "link": "https://stackoverflow.com/users/9616495/brykyz"}, "is_accepted": true, "score": 1, "last_activity_date": 1525349404, "creation_date": 1525349404, "answer_id": 50154784, "question_id": 50134082, "link": "https://stackoverflow.com/questions/50134082/get-qgraphicsitem-by-mouse-position-in-qgraphicsscene/50154784#50154784", "title": "Get QGraphicsItem by mouse position in QGraphicsScene", "body": "<p>I solved this with</p>\n\n<pre><code>QGraphicsItem *item = scene.itemAt(mapToScene(event-&gt;pos()), QTransform());\n</code></pre>\n\n<p>in function <code>mouseReleaseEvent</code></p>\n"}], "owner": {"reputation": 365, "user_id": 9616495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91bcf4ea4e16e38ca0eb32fb3d544f8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brykyz", "link": "https://stackoverflow.com/users/9616495/brykyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1239, "favorite_count": 0, "accepted_answer_id": 50154784, "answer_count": 1, "score": 0, "last_activity_date": 1525349404, "creation_date": 1525262045, "last_edit_date": 1525274389, "question_id": 50134082, "link": "https://stackoverflow.com/questions/50134082/get-qgraphicsitem-by-mouse-position-in-qgraphicsscene", "title": "Get QGraphicsItem by mouse position in QGraphicsScene", "body": "<p>I am trying to connect two <code>QGraphicsItems</code> by <em>straight line</em> (<code>QGraphicsLineItem</code>); by clicking with middle mouse button on first object, then hover on second object and after I release it, it should draw line between them.</p>\n\n<p>This is function that should connect these items.</p>\n\n<pre><code>void GraphicsBlock::connectBlocks(GraphicsBlock *block)\n{\n    GraphicsConnect *connection = new GraphicsConnect(); //Class with QGraphicsLineItem\n    connection-&gt;line-&gt;setLine(QLineF(this-&gt;pos(), block-&gt;pos()));\n}\n</code></pre>\n\n<p>I am working on one scene and I've got problem with finding second block by mouse position. Function <code>mousePressEvent</code>  should work with this code:</p>\n\n<pre><code>if(event-&gt;button() == Qt::MiddleButton)\n    Connecting == true;\n</code></pre>\n\n<p>and after that <code>mouseReleaseEvent</code></p>\n\n<pre><code>if(Connecting)\n{\n    //Get object by mouse position here\n    //this.connectBlocks(..)\n    Connecting = false;\n}\n</code></pre>\n\n<p>I tried <code>scene-&gt;itemsAt(mouse.x(), mouse.y(), QTransform())</code> and </p>\n\n<p><code>scene-&gt;items(QPointF(mouse.x(),mouse.y())</code> but it always returned <strong>empty list</strong>.</p>\n\n<p>EDIT:\nThis is how application should work, blue ellipse is clicked port, now i should drag (still mouse down) to another port and release mouse.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Suhtb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Suhtb.png\" alt=\"Application image\"></a></p>\n"}, {"tags": ["c++", "boost", "cmake"], "comments": [{"owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "edited": false, "score": 0, "creation_date": 1525261365, "post_id": 50133783, "comment_id": 87285610, "body": "I don&#39;t see the error in your final output."}, {"owner": {"reputation": 135, "user_id": 2718166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134864e7a2ab49dc6d5ae6dff5e76b12?s=128&d=identicon&r=PG&f=1", "display_name": "chaylins", "link": "https://stackoverflow.com/users/2718166/chaylins"}, "reply_to_user": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "edited": false, "score": 1, "creation_date": 1525261944, "post_id": 50133783, "comment_id": 87285941, "body": "Sorry, updated it now with the full error ouput!"}, {"owner": {"reputation": 1320, "user_id": 3754223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xZ3VX.png?s=128&g=1", "display_name": "MABVT", "link": "https://stackoverflow.com/users/3754223/mabvt"}, "edited": false, "score": 1, "creation_date": 1525264062, "post_id": 50133783, "comment_id": 87287162, "body": "You are not linking the static library &quot;libboost_exception-~.lib&quot;, which is why boost::throw_exception is missing."}, {"owner": {"reputation": 135, "user_id": 2718166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134864e7a2ab49dc6d5ae6dff5e76b12?s=128&d=identicon&r=PG&f=1", "display_name": "chaylins", "link": "https://stackoverflow.com/users/2718166/chaylins"}, "edited": false, "score": 0, "creation_date": 1525264955, "post_id": 50133783, "comment_id": 87287797, "body": "Sorry, there was a previous comment that said the same and upon testing I found it didn&#39;t make a difference, but he has since deleted his suggestion. I will update mine to reflect I did this change. Cheers!"}, {"owner": {"reputation": 6371, "user_id": 1266688, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/1KqkE.jpg?s=128&g=1", "display_name": "Elvis Dukaj", "link": "https://stackoverflow.com/users/1266688/elvis-dukaj"}, "edited": false, "score": 0, "creation_date": 1525266612, "post_id": 50133783, "comment_id": 87288878, "body": "This way to write cmake file is really odd! Try to use modern CMake... I suggest you this link: <a href=\"https://pabloariasal.github.io/2018/02/19/its-time-to-do-cmake-right/\" rel=\"nofollow noreferrer\">pabloariasal.github.io/2018/02/19/its-time-to-do-cmake-right</a> <a href=\"https://gist.github.com/mbinna/c61dbb39bca0e4fb7d1f73b0d66a4fd1\" rel=\"nofollow noreferrer\">gist.github.com/mbinna/c61dbb39bca0e4fb7d1f73b0d66a4fd1</a> (the sources are very useful) and on Windows <code>CMAKE_PREFIX_PATH</code> allow you to specify where you are installing all your libraries. For example, I built <code>cpprestsdk</code>, <code>OpenCV</code> and <code>Boost C++</code> and installed in my location... Now I don&#39;t have to borrow with link options or include options."}, {"owner": {"reputation": 135, "user_id": 2718166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134864e7a2ab49dc6d5ae6dff5e76b12?s=128&d=identicon&r=PG&f=1", "display_name": "chaylins", "link": "https://stackoverflow.com/users/2718166/chaylins"}, "edited": false, "score": 0, "creation_date": 1525268491, "post_id": 50133783, "comment_id": 87290258, "body": "Thanks for the links regarding cleaning up my cmake, will definitely take those on board once I get past this error :)"}], "answers": [{"comments": [{"owner": {"reputation": 403, "user_id": 2105784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7081c7f59cb61d01cb1b723b2f1373fb?s=128&d=identicon&r=PG&f=1", "display_name": "wheredidthatnamecomefrom", "link": "https://stackoverflow.com/users/2105784/wheredidthatnamecomefrom"}, "edited": false, "score": 1, "creation_date": 1586742036, "post_id": 50151753, "comment_id": 108232309, "body": "Actually its document that void boost::throw_exception(std::exception const &amp; e); is a user defined function not one from boost  <a href=\"https://www.boost.org/doc/libs/1_55_0/libs/exception/doc/throw_exception.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_55_0/libs/exception/doc/&hellip;</a>. Passing -fexceptions to compiler will also resolve this by forcing the compiler to generate exception handling code."}], "tags": [], "owner": {"reputation": 135, "user_id": 2718166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134864e7a2ab49dc6d5ae6dff5e76b12?s=128&d=identicon&r=PG&f=1", "display_name": "chaylins", "link": "https://stackoverflow.com/users/2718166/chaylins"}, "is_accepted": false, "score": 2, "last_activity_date": 1525340336, "creation_date": 1525340336, "answer_id": 50151753, "question_id": 50133783, "link": "https://stackoverflow.com/questions/50133783/c-cmake-build-error-undefined-reference-to-boostthrow-exceptionstdexcep/50151753#50151753", "title": "C++ CMake build error: undefined reference to `boost::throw_exception(std::exception const&amp;)", "body": "<p>An update if anyone else ever comes across this.</p>\n\n<p>The only way I was able to get it to work was with having the following snippet of code:</p>\n\n<pre><code>#define BOOST_NO_EXCEPTIONS\n#include &lt;boost/throw_exception.hpp&gt;\nvoid boost::throw_exception(std::exception const &amp; e){\n//do nothing\n}\n</code></pre>\n\n<p>I played with the ordering of the libraries, with including them all explicitly, with using findBoost.cmake and all to no avail. Just a random quirk I guess!</p>\n"}], "owner": {"reputation": 135, "user_id": 2718166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134864e7a2ab49dc6d5ae6dff5e76b12?s=128&d=identicon&r=PG&f=1", "display_name": "chaylins", "link": "https://stackoverflow.com/users/2718166/chaylins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 924, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1525340336, "creation_date": 1525261048, "last_edit_date": 1525266118, "question_id": 50133783, "link": "https://stackoverflow.com/questions/50133783/c-cmake-build-error-undefined-reference-to-boostthrow-exceptionstdexcep", "title": "C++ CMake build error: undefined reference to `boost::throw_exception(std::exception const&amp;)", "body": "<p>I have been trying to integrate boost.Log into my project, but when building I am receiving the error message:</p>\n\n<pre><code>/usr/lib/cross/boost/lib/libboost_date_time.so: undefined reference to `boost::throw_exception(std::exception const&amp;)'\n</code></pre>\n\n<p>I have checked the ensure I do not have BOOST_NO_EXCEPTIONS defined anywhere, but am still stumped as to why I am getting this error. My CMAKE file is as follows:</p>\n\n<pre><code>set(Boost_INCLUDE_DIR /usr/lib/cross/boost/include)\nset(Boost_LIBRARY_DIR /usr/lib/cross/boost/lib)\nfind_package(Boost 1.63.0 COMPONENTS system filesystem log REQUIRED)\n\nmessage(status \"** Boost Include: ${Boost_INCLUDE_DIR}\")\nmessage(status \"** Boost Libraries: ${Boost_LIBRARY_DIRS}\")\nmessage(status \"** Boost Libraries: ${Boost_LIBRARIES}\")\n\nset (PROJECT_LINK_LIBS thrift crypto ssl sqlcipher)\n\nlink_directories( $ENV{LD_LIBRARY_PATH}\n                ${Boost_LIBRARY_DIRS}\n)\n\ninclude_directories( $ENV{LD_INCLUDE_PATH}\n$ENV{LD_INCLUDE_PATH}/sqlcipher\n${Boost_INCLUDE_DIR}\n)\n\nadd_executable(databaseManager ${MY_SRC})\n\ntarget_link_libraries(databaseManager ${Boost_LIBRARIES} ${PROJECT_LINK_LIBS} )\n</code></pre>\n\n<p>The output from the FIND for the libraries seem to be ok:</p>\n\n<pre><code>-- Boost version: 1.63.0\n1&gt; -- Found the following Boost libraries:\n1&gt; --   system\n1&gt; --   filesystem\n1&gt; --   log\n1&gt; --   date_time\n1&gt; --   log_setup\n1&gt; --   thread\n1&gt; --   regex\n1&gt; --   chrono\n1&gt; --   atomic\n1&gt; status** Boost Include: /usr/lib/cross/boost/include\n1&gt; status** Boost Libraries: /usr/lib/cross/boost/lib\n1&gt; status** Boost Libraries:\n/usr/lib/cross/boost/lib/libboost_system.so;/usr/lib/cross/boost/lib/libboost_filesystem.so;/usr/lib/cross/boost/lib/libboost_log.so;/usr/lib/cross/boost/lib/libboost_date_time.so;/usr/lib/cross/boost/lib/libboost_log_setup.so;/usr/lib/cross/boost/lib/libboost_thread.so;/usr/lib/cross/boost/lib/libboost_regex.so;/usr/lib/cross/boost/lib/libboost_chrono.so;/usr/lib/cross/boost/lib/libboost_atomic.so\n</code></pre>\n\n<p>Finally, the verbose output of the linking step where it fails:</p>\n\n<pre><code>/home/imx7/build/imx7-firmware-dev-package/src/maketools/obj.iMX7/bin/arm-devolo-linux-g++  -fexceptions -frtti -pthread -O3 -DNDEBUG  -rdynamic CMakeFiles/databaseManager.dir/DatabaseManagerEventHandler.cpp.o CMakeFiles/databaseManager.dir/DatabaseManagerHandler.cpp.o CMakeFiles/databaseManager.dir/DatabaseManagerServer.cpp.o CMakeFiles/databaseManager.dir/DatabaseManagerService.cpp.o CMakeFiles/databaseManager.dir/Logger.cpp.o CMakeFiles/databaseManager.dir/dbConnection.cpp.o CMakeFiles/databaseManager.dir/thrift_common/base_constants.cpp.o CMakeFiles/databaseManager.dir/thrift_common/base_types.cpp.o CMakeFiles/databaseManager.dir/thrift_dbManager/DatabaseManager.cpp.o CMakeFiles/databaseManager.dir/thrift_dbManager/dbManager_constants.cpp.o CMakeFiles/databaseManager.dir/thrift_dbManager/dbManager_types.cpp.o CMakeFiles/databaseManager.dir/thrift_supervisor/Info.cpp.o CMakeFiles/databaseManager.dir/thrift_supervisor/Supervision.cpp.o CMakeFiles/databaseManager.dir/thrift_supervisor/supervision_constants.cpp.o CMakeFiles/databaseManager.dir/thrift_supervisor/supervision_types.cpp.o  -o databaseManager  -L/usr/lib/cross/official_libs  -L/usr/lib/cross/boost/lib -Wl,-rpath,/usr/lib/cross/official_libs:/usr/lib/cross/boost/lib: /usr/lib/cross/boost/lib/libboost_system.so /usr/lib/cross/boost/lib/libboost_filesystem.so /usr/lib/cross/boost/lib/libboost_chrono.so /usr/lib/cross/boost/lib/libboost_log.so /usr/lib/cross/boost/lib/libboost_date_time.so /usr/lib/cross/boost/lib/libboost_log_setup.so /usr/lib/cross/boost/lib/libboost_thread.so /usr/lib/cross/boost/lib/libboost_regex.so /usr/lib/cross/boost/lib/libboost_atomic.so -lthrift -lcrypto -lssl -lsqlcipher \n/home/imx7/build/imx7-firmware-dev-package/src/maketools/binaries.iMX7/tools/bin/../lib/gcc/arm-devolo-linux-gnueabihf/4.9.4/../../../../arm-devolo-linux-gnueabihf/bin/ld: warning: libz.so.1, needed by /usr/lib/cross/official_libs/libsqlcipher.so, not found (try using -rpath or -rpath-link)\n/usr/lib/cross/boost/lib/libboost_date_time.so: undefined reference to `boost::throw_exception(std::exception const&amp;)'\ncollect2: error: ld returned 1 exit status\nsrc/CMakeFiles/databaseManager.dir/build.make:470: recipe for target 'src/databaseManager' failed\nmake[2]: Leaving directory '/var/cppbuild/DatabaseManager/build/Linux-Release'\nCMakeFiles/Makefile2:88: recipe for target 'src/CMakeFiles/databaseManager.dir/all' failed\nmake[1]: Leaving directory '/var/cppbuild/DatabaseManager/build/Linux-Release'\nmake[2]: *** [src/databaseManager] Error 1\nmake[1]: *** [src/CMakeFiles/databaseManager.dir/all] Error 2\nMakefile:132: recipe for target 'all' failed\nmake: *** [all] Error 2\n</code></pre>\n\n<p>Does anyone have any idea what else I can check or do to get past this error?</p>\n\n<p>Cheers!</p>\n\n<p>******* EDIT *********</p>\n\n<p>There have been a few suggestions about adding exception to the COMPONENTS list. I have tried and tested this and unfortunately receive the same error.</p>\n\n<p>The only thing of note is all the main libraries are linked dynamically (.so versions pulled in) and boost_exception is pulled in statically (.a version).</p>\n\n<p>New version of find_package command:</p>\n\n<pre><code>find_package(Boost 1.63.0 COMPONENTS system atomic filesystem log exception REQUIRED)\n</code></pre>\n\n<p>Build error with above change:</p>\n\n<pre><code>/home/imx7/build/imx7-firmware-dev-package/src/maketools/obj.iMX7/bin/arm-devolo-linux-g++  -fexceptions -frtti -pthread -g  -rdynamic CMakeFiles/databaseManager.dir/DatabaseManagerEventHandler.cpp.o CMakeFiles/databaseManager.dir/DatabaseManagerHandler.cpp.o CMakeFiles/databaseManager.dir/DatabaseManagerServer.cpp.o CMakeFiles/databaseManager.dir/DatabaseManagerService.cpp.o CMakeFiles/databaseManager.dir/Logger.cpp.o CMakeFiles/databaseManager.dir/dbConnection.cpp.o CMakeFiles/databaseManager.dir/thrift_common/base_constants.cpp.o CMakeFiles/databaseManager.dir/thrift_common/base_types.cpp.o CMakeFiles/databaseManager.dir/thrift_dbManager/DatabaseManager.cpp.o CMakeFiles/databaseManager.dir/thrift_dbManager/dbManager_constants.cpp.o CMakeFiles/databaseManager.dir/thrift_dbManager/dbManager_types.cpp.o CMakeFiles/databaseManager.dir/thrift_supervisor/Info.cpp.o CMakeFiles/databaseManager.dir/thrift_supervisor/Supervision.cpp.o CMakeFiles/databaseManager.dir/thrift_supervisor/supervision_constants.cpp.o CMakeFiles/databaseManager.dir/thrift_supervisor/supervision_types.cpp.o  -o databaseManager  -L/usr/lib/cross/official_libs  -L/usr/lib/cross/boost/lib -Wl,-rpath,/usr/lib/cross/official_libs:/usr/lib/cross/boost/lib: /usr/lib/cross/boost/lib/libboost_system.so /usr/lib/cross/boost/lib/libboost_atomic.so /usr/lib/cross/boost/lib/libboost_filesystem.so /usr/lib/cross/boost/lib/libboost_log.so /usr/lib/cross/boost/lib/libboost_exception.a /usr/lib/cross/boost/lib/libboost_date_time.so /usr/lib/cross/boost/lib/libboost_log_setup.so /usr/lib/cross/boost/lib/libboost_thread.so /usr/lib/cross/boost/lib/libboost_regex.so /usr/lib/cross/boost/lib/libboost_chrono.so -lthrift -lcrypto -lssl -lsqlcipher \n/home/imx7/build/imx7-firmware-dev-package/src/maketools/binaries.iMX7/tools/bin/../lib/gcc/arm-devolo-linux-gnueabihf/4.9.4/../../../../arm-devolo-linux-gnueabihf/bin/ld: warning: libz.so.1, needed by /usr/lib/cross/official_libs/libsqlcipher.so, not found (try using -rpath or -rpath-link)\n/usr/lib/cross/boost/lib/libboost_date_time.so: undefined reference to `boost::throw_exception(std::exception const&amp;)'\ncollect2: error: ld returned 1 exit status\nsrc/CMakeFiles/databaseManager.dir/build.make:471: recipe for target 'src/databaseManager' failed\nmake[2]: Leaving directory '/var/cppbuild/DatabaseManager/build/Linux-Debug'\nCMakeFiles/Makefile2:88: recipe for target 'src/CMakeFiles/databaseManager.dir/all' failed\nmake[1]: Leaving directory '/var/cppbuild/DatabaseManager/build/Linux-Debug'\nmake[2]: *** [src/databaseManager] Error 1\nmake[1]: *** [src/CMakeFiles/databaseManager.dir/all] Error 2\nMakefile:132: recipe for target 'all' failed\nmake: *** [all] Error 2\n</code></pre>\n"}, {"tags": ["c++", "netbeans", "makefile", "cygwin", "exe"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1525260872, "post_id": 50133700, "comment_id": 87285291, "body": "how to you compile it? Did you make sure that <code>nameofproject.exe</code> really exists?"}, {"owner": {"reputation": 3457, "user_id": 3753446, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4Pipl.png?s=128&g=1", "display_name": "Magix", "link": "https://stackoverflow.com/users/3753446/magix"}, "edited": false, "score": 0, "creation_date": 1525261221, "post_id": 50133700, "comment_id": 87285515, "body": "Also, please show us how you are trying to launch your executable, if it exists. It may also be a permission problem, so give us as much detail as you can :)"}, {"owner": {"reputation": 530, "user_id": 2394541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f9b9b9399b329591f7be92da1c5e442?s=128&d=identicon&r=PG", "display_name": "tim18", "link": "https://stackoverflow.com/users/2394541/tim18"}, "edited": false, "score": 0, "creation_date": 1525261377, "post_id": 50133700, "comment_id": 87285617, "body": "Remember that the default for g++ is to build a.exe; as you didn&#39;t show whether you placed a -o specification properly, we may not guess correctly what you did."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1525263268, "post_id": 50133700, "comment_id": 87286690, "body": "<b><i>even writing the makefile myself but it doesn&#39;t work</i></b> You will have to explain this with a small example showing exact compiler output. Show the text of the source code and output. No pictures of your screen please. We can&#39;t help you debug debug <b><i>did not work</i></b>."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1525263829, "post_id": 50133700, "comment_id": 87287015, "body": "If the .exe does not exist and the project built successfully your antivirus may be the problem particularly if you use aVast or your AV has a sandbox mode or possibly it uses popularity as part of its decision process."}, {"owner": {"reputation": 9, "user_id": 9730030, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UjBdEplOxI0/AAAAAAAAAAI/AAAAAAAAABw/K4aQ3EQ8J3Y/photo.jpg?sz=128", "display_name": "Luis Fern&#225;ndez", "link": "https://stackoverflow.com/users/9730030/luis-fern%c3%a1ndez"}, "edited": false, "score": 0, "creation_date": 1525283080, "post_id": 50133700, "comment_id": 87299444, "body": "Thanks for the help. I&#39;ve added a picture  showing what the netbeans console says when building. When I run it, using the run program button, it just says that the practicafinal.exe file doesn,t exit. Shouldn&#180;t the default makefile from MinGW or Cygwin make an .exe file?"}, {"owner": {"reputation": 15415, "user_id": 982257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pRf2i.jpg?s=128&g=1", "display_name": "Iguananaut", "link": "https://stackoverflow.com/users/982257/iguananaut"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1525283532, "post_id": 50133700, "comment_id": 87299690, "body": "It says the executable is being output to <code>dist&#47;Debug&#47;MinGW-Windows&#47;practicafinal.exe</code>.  So what&#39;s the problem?  How do run it and what happens?  If it doesn&#39;t exist at that path the only possibility is when @drescherjm wrote--that you have an overly aggressive anti-virus immediately deleting executables on the system that it doesn&#39;t recognize."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1525283703, "post_id": 50133700, "comment_id": 87299783, "body": "@LuisFern&#225;ndez Use the windows file explorer to see if that file exists in the specified path."}, {"owner": {"reputation": 9, "user_id": 9730030, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UjBdEplOxI0/AAAAAAAAAAI/AAAAAAAAABw/K4aQ3EQ8J3Y/photo.jpg?sz=128", "display_name": "Luis Fern&#225;ndez", "link": "https://stackoverflow.com/users/9730030/luis-fern%c3%a1ndez"}, "edited": false, "score": 0, "creation_date": 1525287676, "post_id": 50133700, "comment_id": 87301658, "body": "OK, so the exe file is being created by both cygwin and minGW, but now , when I try to run the executables, it says that cygwin1.dll and libgcc_s_dw2-1.dll couldn&#39;t be found, respectively. I downloaded everything for cygwin, shouldn&#39;t it have downloaded aswell? Anyhelp?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1525287785, "post_id": 50133700, "comment_id": 87301708, "body": "That means your cygwin binary folder is not in your windows PATH environment variable. Google for how to add / modify your PATH environment variable,"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1525288262, "post_id": 50133700, "comment_id": 87301965, "body": "Here is a link: <a href=\"https://superuser.com/questions/284342/what-are-path-and-other-environment-variables-and-how-can-i-set-or-use-them\" title=\"what are path and other environment variables and how can i set or use them\">superuser.com/questions/284342/&hellip;</a>"}, {"owner": {"reputation": 9, "user_id": 9730030, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UjBdEplOxI0/AAAAAAAAAAI/AAAAAAAAABw/K4aQ3EQ8J3Y/photo.jpg?sz=128", "display_name": "Luis Fern&#225;ndez", "link": "https://stackoverflow.com/users/9730030/luis-fern%c3%a1ndez"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1525289279, "post_id": 50133700, "comment_id": 87302468, "body": "@drescherjm ok i&#39;ll try it. Thanks for your time."}], "owner": {"reputation": 9, "user_id": 9730030, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UjBdEplOxI0/AAAAAAAAAAI/AAAAAAAAABw/K4aQ3EQ8J3Y/photo.jpg?sz=128", "display_name": "Luis Fern&#225;ndez", "link": "https://stackoverflow.com/users/9730030/luis-fern%c3%a1ndez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1525282868, "creation_date": 1525260800, "last_edit_date": 1525282868, "question_id": 50133700, "link": "https://stackoverflow.com/questions/50133700/project-not-building-an-exe-file", "title": "Project not building an .exe file", "body": "<p>I'm building a small c++ program for school, and after building it, it doesn't allow me to run it. It says that \"nameoftheproject\".exe doesn't exist, even though I\u00b4m using the cygwin make and it should work fine.\nI've tried using other compilers such as MinWG and even writing the makefile myself but it doesn't work. Any help?\n<a href=\"https://i.stack.imgur.com/8yS9i.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nThanks in advance.</p>\n"}]