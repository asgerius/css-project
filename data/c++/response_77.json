[{"tags": ["python", "c++", "c++11", "vector", "swig"], "comments": [{"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 1, "creation_date": 1467260130, "post_id": 38111942, "comment_id": 63660941, "body": "Putting using statements in header files is a no-no, and you&#39;re finding out why."}], "answers": [{"comments": [{"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1467269033, "post_id": 38113826, "comment_id": 63664205, "body": "(Or just not force <code>using</code> on everyone by having them at global scope inside header files)."}, {"owner": {"reputation": 114, "user_id": 2792600, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/86783d65cebffd18ddca3beff033a76b?s=128&d=identicon&r=PG&f=1", "display_name": "jrk0414", "link": "https://stackoverflow.com/users/2792600/jrk0414"}, "edited": false, "score": 0, "creation_date": 1467318038, "post_id": 38113826, "comment_id": 63696275, "body": "I agree with Flexo, without a doubt.  That might be the best way to handle this, but unfortunately, that was not the question.  As far as m7thon&#39;s response, the first bullet seems to override the <code>using std::vector</code> in the h file.  Very nice!  The other options are iffy, but I&#39;ll count it as closed because of the first bullet."}, {"owner": {"reputation": 2883, "user_id": 5162389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FTqjP.jpg?s=128&g=1", "display_name": "m7thon", "link": "https://stackoverflow.com/users/5162389/m7thon"}, "edited": false, "score": 0, "creation_date": 1467323232, "post_id": 38113826, "comment_id": 63698668, "body": "The third point (copying and customizing the declarations) is in some sense the &quot;correct&quot; way to go and guaranteed to work. Using <code>%include &quot;test.hh&quot;</code> is really a shortcut for when the header file can be used as is. The first two points are hacks, but if they work... ;-)"}], "tags": [], "owner": {"reputation": 2883, "user_id": 5162389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FTqjP.jpg?s=128&g=1", "display_name": "m7thon", "link": "https://stackoverflow.com/users/5162389/m7thon"}, "is_accepted": true, "score": 2, "last_activity_date": 1467259654, "creation_date": 1467259654, "answer_id": 38113826, "question_id": 38111942, "link": "https://stackoverflow.com/questions/38111942/swig-argument-error-when-using-using-stdvector-in-python/38113826#38113826", "title": "SWIG argument error when using &quot;using std::vector&quot; in python", "body": "<p>To me, this looks like SWIG does not support the <code>using std::vector;</code> statement correctly. I think it's a SWIG bug. I can think of the following workarounds:</p>\n\n<ul>\n<li>Add <code>using namespace std;</code> to the SWIG interface file (this will only affect the way wrappers are created; the <code>using</code> statement will not enter C++ code)</li>\n<li>Add <code>#define vector std::vector</code> to the SWIG interface file (this will only work if <code>vector</code> is never used as <code>std::vector</code>)</li>\n<li>Copy the declarations from the header file to the SWIG interface file, and change <code>vector</code> to <code>std::vector</code>. This will cause SWIG to generate correct wrappers, and again will not affect the C++ library code.</li>\n</ul>\n"}], "owner": {"reputation": 114, "user_id": 2792600, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/86783d65cebffd18ddca3beff033a76b?s=128&d=identicon&r=PG&f=1", "display_name": "jrk0414", "link": "https://stackoverflow.com/users/2792600/jrk0414"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 928, "favorite_count": 0, "accepted_answer_id": 38113826, "answer_count": 1, "score": 2, "last_activity_date": 1467259654, "creation_date": 1467244722, "last_edit_date": 1495542161, "question_id": 38111942, "link": "https://stackoverflow.com/questions/38111942/swig-argument-error-when-using-using-stdvector-in-python", "title": "SWIG argument error when using &quot;using std::vector&quot; in python", "body": "<p>This is very related to <a href=\"https://stackoverflow.com/questions/22491921/how-to-use-a-python-list-to-assign-a-stdvector-in-c-using-swig\">this</a> question</p>\n\n<p>Regardless of whether or not this is coding practice, I have come across code that looks like this</p>\n\n<p><strong>test.hh</strong></p>\n\n<pre><code>#include &lt;vector&gt;                                                                                   \nusing std::vector;                                                             \n\nclass Test \n{                                                                     \n    public:                                                                      \n        vector&lt;double&gt; data;                                                     \n};  \n</code></pre>\n\n<p>I am trying to swig this using swig3.0 using the following interface file</p>\n\n<p><strong>test.i</strong></p>\n\n<pre><code>%module test_swig                                                                \n\n%include \"std_vector.i\"                                                          \n\nnamespace std {                                                                  \n    %template(VectorDouble) vector&lt;double&gt;;                                      \n};                                                                               \n\n%{                                                                               \n    #include \"test.hh\"                                                               \n%}                                                                               \n\n%naturalvar Test::data;                                                                                 \n%include \"test.hh\"    \n</code></pre>\n\n<p>And the following test code</p>\n\n<p><strong>test.py</strong></p>\n\n<pre><code>t = test.Test()                                                              \njprint(t)                                                                    \na      = [1, 2, 3]                                                                \nt.data = a # fails   \n</code></pre>\n\n<p>doing so gives me the following error</p>\n\n<pre><code>in method 'Test_data_set', argument 2 of type 'vector&lt; double &gt;'\n</code></pre>\n\n<p>This can be fixed by either changing the <code>using std::vector</code> in test.hh to <code>using namespace std</code> or by removing <code>using std::vector</code> and changing <code>vector&lt;double&gt;</code> to <code>std::vector&lt;double&gt;</code>.  This is not what I want.</p>\n\n<p>The problem is that I was given this code as is.  I am not allowed to make changes, but I am supposed to still make everything available in python via SWIG.  What's going on here?  </p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "vector", "struct", "nested"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1467244812, "post_id": 38111876, "comment_id": 63657431, "body": "It&#39;s really unclear what you&#39;re trying to accomplish here. You say &quot;pass wav_file_info to a function but as a vector&quot;, but wav_file_info is not a vector or anything even remotely resembling one. What would you do with the vector you want? Why do you need a vector?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1467244848, "post_id": 38111876, "comment_id": 63657437, "body": "Not sure what you are after. <code>wav_file_info</code> isn&#39;t a <code>vector</code>, so it can&#39;t be used as a <code>vector</code>. You could put a <code>wav_file_info</code> into a temporary <code>vector</code> and then call the function with this <code>vector</code>, but I fail to see what that gains you. More information please. <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">This sounds very much like an X-Y problem.</a>"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1467246255, "post_id": 38111876, "comment_id": 63657775, "body": "Read this twice, and still not sure what it is asking. Perhaps a sample function you want to pass this to, and your attempt at passing it, is in order as an <i>update to your question</i>."}, {"owner": {"reputation": 1897, "user_id": 854183, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c1503cf70823c67b54c197559cc08c63?s=128&d=identicon&r=PG", "display_name": "quantum231", "link": "https://stackoverflow.com/users/854183/quantum231"}, "edited": false, "score": 0, "creation_date": 1467273520, "post_id": 38111876, "comment_id": 63666796, "body": "Let&#39;s face it, I am am an electronic engineer not from software. Anyway, This answers my question."}], "answers": [{"comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1467245158, "post_id": 38111967, "comment_id": 63657510, "body": "1) This wasn&#39;t what was asked.  2) Passing containers or complicated classes by value is an expensive operation. Do you really want to make a duplicate copy of a 10000-element vector of <code>wav_file_struct</code>, just to pass it as a parameter to <code>take_vec()</code>, and then immediately destroy the duplicate vector when it returns?"}, {"owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1467246267, "post_id": 38111967, "comment_id": 63657781, "body": "1) OPs question lacks coherence.  A simple explanation of parameter passing seemed helpful as they did not even produce example code to help illustrate their question.  2) A reference would probably be the right choice given a large container, but they did not ask about efficiency.  You went off on some tangent about RAM prices.  <i>This wasn&#39;t what was asked.</i>"}], "tags": [], "owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "is_accepted": false, "score": 0, "last_activity_date": 1467244938, "creation_date": 1467244938, "answer_id": 38111967, "question_id": 38111876, "link": "https://stackoverflow.com/questions/38111876/what-is-type-name-of-struct-inside-a-vector/38111967#38111967", "title": "What is type name of struct inside a vector", "body": "<p>You can specify a function to take in the entire vector,  or you can specify a function to take in the element type.  </p>\n\n<pre><code>//function that takes the vector\nvoid take_vec(std::vector&lt;wav_file_struct&gt; vec){}\n\n//function that takes an element\nvoid take_element(wav_file_struct element){}\n\nint main(){\n\n  //create a vector\n  std::vector&lt;wav_file_struct&gt; vec;\n  vec.emplace_back();\n\n  //pass in the entire vector\n  take_vec(vec);\n\n  //pass in an element\n  take_element(vec[0]);\n} \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": false, "score": 1, "last_activity_date": 1467245044, "creation_date": 1467245044, "answer_id": 38111976, "question_id": 38111876, "link": "https://stackoverflow.com/questions/38111876/what-is-type-name-of-struct-inside-a-vector/38111976#38111976", "title": "What is type name of struct inside a vector", "body": "<p>Your conclusion is generally correct. There is no mechanism for taking a vector of classes, and type-converting it to a vector containing some particular member of each class instance. Having said that:</p>\n\n<p>There are some things that can be done if you get in the habit of writing template classes or functions that operate over an iterator-defined sequence; rather than discrete functions that take an entire container as a parameter.</p>\n\n<p>Suppose that instead of a function that takes a vector of <code>wav_file_info</code>, and does whatever it does with it, you have a template function that executes its job given a beginning iterator value and an ending iterator value.</p>\n\n<p>Then, this becomes a simple task of defining a wrapper for a <code>std::vector&lt;wav_file_struct&gt;::iterator</code> that generally inherits everything from its superclass, but which defines its <code>value_type</code> as a <code>wav_file_info</code>, and provides a suitable replacement for <code>operator*</code> and <code>operator-&gt;</code>. Problem solved. (1)</p>\n\n<p>This kind of an approach does lead to code bloat. But, RAM prices have been going down, over the past couple of years; and if that becomes a concern there are various other things that can be done about that, too.</p>\n\n<p>(1) Well, it is technically not necessary to undergo a paradigm shift from passing a container, to passing a beginning and an ending iterator value. You could have your template function have a container class as a parameter, and provide a custom container wrapper whose <code>begin()</code> and <code>end()</code> return the aforementioned iterator wrappers (and which implements any other container methods that might be needed).</p>\n"}], "owner": {"reputation": 1897, "user_id": 854183, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c1503cf70823c67b54c197559cc08c63?s=128&d=identicon&r=PG", "display_name": "quantum231", "link": "https://stackoverflow.com/users/854183/quantum231"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "closed_date": 1468496695, "answer_count": 2, "score": 0, "last_activity_date": 1467245044, "creation_date": 1467244296, "question_id": 38111876, "link": "https://stackoverflow.com/questions/38111876/what-is-type-name-of-struct-inside-a-vector", "closed_reason": "Needs details or clarity", "title": "What is type name of struct inside a vector", "body": "<p>I have a struct:</p>\n\n<pre><code>struct wav_file_info_struct\n{\n    char filename[MAX_PATH];        \n    WORD audio_format;\n    WORD num_channels;\n    DWORD sample_rate;\n    DWORD bits_per_sample;\n};\n\nstruct wav_file_data_struct\n{\n    DWORD data_chunk_size;\n    char* wav_data;\n};\n\nstruct wav_file_struct\n{\n    wav_file_info_struct wav_file_info;\n    wav_file_data_struct wav_file_data;\n};\n</code></pre>\n\n<p>Now if I create a vector of wav_file_struct like this: </p>\n\n<pre><code>std::vector&lt;wav_file_struct&gt; v_wav_file_struct;\n</code></pre>\n\n<p>How do I pass the struct inside wav_file_struct as parameter to a function such that it can be accessed as a vector? e.g I want to pass wav_file_info to a function but as a vector. It seems that since it is inside a vector of wav_file_struct, I shall have to pass the vector wav_file_struct and then function can gain access to the internal struct member and the members inside of those structs. Correct?</p>\n"}, {"tags": ["c++", "class", "enums", "abstract", "derived"], "comments": [{"owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "edited": false, "score": 0, "creation_date": 1467244598, "post_id": 38111837, "comment_id": 63657369, "body": "Just to clarify, saying &quot;bug&quot;, and &quot;failed instance creation&quot; sound like runtime problems. The only problems you&#39;ve experienced are compiler errors-- not bugs."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "edited": false, "score": 0, "creation_date": 1467244710, "post_id": 38111837, "comment_id": 63657399, "body": "@TrevorHickey: Compiler errors are bugs."}, {"owner": {"reputation": 3046, "user_id": 3013887, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c1396249d91442e1dde6e93197c0b94a?s=128&d=identicon&r=PG&f=1", "display_name": "pingul", "link": "https://stackoverflow.com/users/3013887/pingul"}, "edited": false, "score": 0, "creation_date": 1467244941, "post_id": 38111837, "comment_id": 63657463, "body": "Regarding bugs, Wikipedia defines it as &quot;...an error, flaw, failure or fault in a computer program or system that causes it to produce an incorrect or unexpected result, or to behave in unintended ways.&quot;"}, {"owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "edited": false, "score": 1, "creation_date": 1467245162, "post_id": 38111837, "comment_id": 63657513, "body": "No computer program faulted.  The compiler outputted a message exactly as it was intended to.  OPs program never ran at all.  To a compiler writer and someone familiar with the language, this is not an unexpected result.  If the compiler built the program, that would have been a bug."}], "answers": [{"comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1467244286, "post_id": 38111865, "comment_id": 63657281, "body": "The OP may have expected non-type names to be ignored in the name lookup occurring in the <i>type-id</i> of the <i>new-expression</i>. Evidently, that doesn&#39;t happen."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1467244297, "post_id": 38111865, "comment_id": 63657283, "body": "@Brian: The OP was wrong.. and already has discovered this. Not really seeing a question to answer here to be honest. Deliberately ironic that I answered it anyway, I suppose..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1467244345, "post_id": 38111865, "comment_id": 63657295, "body": "The question implies this answer."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1467244360, "post_id": 38111865, "comment_id": 63657299, "body": "@DieterL&#252;cking: Exactly. What is left? Nothing, as far as I can tell."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1467244379, "post_id": 38111865, "comment_id": 63657303, "body": "Maybe a &quot;why is the language constructed this way?&quot; question. Well, that&#39;s entirely vacuous and does not warrant answering either..."}, {"owner": {"reputation": 764, "user_id": 6301103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf0769f719c19bc3497f3472c18fed8?s=128&d=identicon&r=PG&f=1", "display_name": "jaaq", "link": "https://stackoverflow.com/users/6301103/jaaq"}, "edited": false, "score": 0, "creation_date": 1467244390, "post_id": 38111865, "comment_id": 63657305, "body": "Well it was just an incredibly stupid error on my side, which made it even harder to spot. Obviously new 42 won&#39;t work, but why exactly does the compiler even try to pick the enum when there&#39;s also a class declaration with the same name? I don&#39;t see a conflict there at all and don&#39;t get why this won&#39;t compile."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 764, "user_id": 6301103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf0769f719c19bc3497f3472c18fed8?s=128&d=identicon&r=PG&f=1", "display_name": "jaaq", "link": "https://stackoverflow.com/users/6301103/jaaq"}, "edited": false, "score": 0, "creation_date": 1467244425, "post_id": 38111865, "comment_id": 63657320, "body": "@jaaq: It.. just does. That&#39;s how the language is constructed. Lookup rules have to take into account <i>all</i> facets of the language. Could there be a special case made for <code>new</code>? Sure. It would make everything else much more complicated though. And for what?"}, {"owner": {"reputation": 764, "user_id": 6301103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf0769f719c19bc3497f3472c18fed8?s=128&d=identicon&r=PG&f=1", "display_name": "jaaq", "link": "https://stackoverflow.com/users/6301103/jaaq"}, "edited": false, "score": 0, "creation_date": 1467244483, "post_id": 38111865, "comment_id": 63657340, "body": "My question was why the compiler even tries to pick the enum..  Also searching the web literally helped nothing, this might help someone in the future.."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1467244593, "post_id": 38111865, "comment_id": 63657368, "body": "with <code>new 52</code> at least we would have gotten comic books."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1467244675, "post_id": 38111865, "comment_id": 63657388, "body": "Because that&#39;s the way the language is constructed. I cannot give you a better answer than that, because there isn&#39;t one. If you can tell us more about what sort of answer you&#39;re looking for, perhaps we&#39;ll have better luck together."}, {"owner": {"reputation": 764, "user_id": 6301103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf0769f719c19bc3497f3472c18fed8?s=128&d=identicon&r=PG&f=1", "display_name": "jaaq", "link": "https://stackoverflow.com/users/6301103/jaaq"}, "edited": false, "score": 0, "creation_date": 1467244851, "post_id": 38111865, "comment_id": 63657438, "body": "It apears that the answer indeed comes down to a simple &quot;just because&quot;. I just thought since the compiler considered to use the enum with new there might be some weird feature with new and enums I somehow never stumbled upon."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 2, "last_activity_date": 1467244198, "creation_date": 1467244198, "answer_id": 38111865, "question_id": 38111837, "link": "https://stackoverflow.com/questions/38111837/enum-members-conflict-with-class-names/38111865#38111865", "title": "Enum Members conflict with class names", "body": "<p>I'm not sure what else you expected here.</p>\n\n<p>First, you introduced integral constants named <code>B</code> and <code>C</code>. Of course, you cannot <code>new</code> these. That would be like writing <code>new 42</code>.</p>\n\n<p>Then, you introduced types with the same names. Okay, fine, that's allowed, but in order to use these you must now refer to them as <code>class B</code> and <code>class C</code> (or <code>struct B</code> and <code>struct C</code>), as you've discovered.</p>\n\n<p><strong>Do not use the same name for different things.</strong></p>\n"}, {"comments": [{"owner": {"reputation": 764, "user_id": 6301103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf0769f719c19bc3497f3472c18fed8?s=128&d=identicon&r=PG&f=1", "display_name": "jaaq", "link": "https://stackoverflow.com/users/6301103/jaaq"}, "edited": false, "score": 0, "creation_date": 1467245160, "post_id": 38111950, "comment_id": 63657511, "body": "Thank you very much! This was exactly the kind of answer I was hoping for ;) As I said before it was not obvious to me that name hiding also aplies in this case, and I haven&#39;t ever read about this in any tutorials, since obviously(I see that now) having the same names is indeed a very bad idea."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1467245895, "post_id": 38111950, "comment_id": 63657706, "body": "Name hiding occurs unless there&#39;s an exception, not the other way around. If there were an exception here, your code would have worked! This question is so vacuous :)"}, {"owner": {"reputation": 521, "user_id": 514514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bae5143216d0c560304a06da1a31739?s=128&d=identicon&r=PG", "display_name": "Cheshar", "link": "https://stackoverflow.com/users/514514/cheshar"}, "edited": false, "score": 0, "creation_date": 1587904780, "post_id": 38111950, "comment_id": 108687010, "body": "Regarding &quot;<i>This rule seems arbitrary...</i>&quot;, it is actually not at all arbitrary but to support backward compatibility with structs and enums in C. Refer <a href=\"https://stackoverflow.com/questions/57865891/whats-the-struct-hack-and-type-non-type-hiding\">this</a> answer."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 5, "last_activity_date": 1467244804, "creation_date": 1467244804, "answer_id": 38111950, "question_id": 38111837, "link": "https://stackoverflow.com/questions/38111837/enum-members-conflict-with-class-names/38111950#38111950", "title": "Enum Members conflict with class names", "body": "<p>In your example <code>B</code> from <code>enum</code> hides class <code>B</code>. Section 3.3.10 of the standard describes the rules for <em>name hiding</em>:</p>\n\n<blockquote>\n  <p>A class name (9.1) or enumeration name (7.2) can be hidden by the name of a variable, data member, function, or enumerator declared in the same scope. If a class or enumeration name and a variable, data member, function, or enumerator are declared in the same scope (in any order) with the same name, the class or enumeration name is hidden wherever the variable, data member, function, or enumerator name is visible.</p>\n</blockquote>\n\n<p>Language designers needed to set precedence rules, so they decided that <code>enum</code> constant name should win. This rule seems arbitrary, and is probably modeled after some old rule in the C standard. However, it is part of the standard, so every compiler must comply with it.</p>\n\n<p>It goes without saying that making a class name collide with an <code>enum</code> member is a very bad idea. The best solution to this problem is renaming your class.</p>\n"}], "owner": {"reputation": 764, "user_id": 6301103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf0769f719c19bc3497f3472c18fed8?s=128&d=identicon&r=PG&f=1", "display_name": "jaaq", "link": "https://stackoverflow.com/users/6301103/jaaq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1091, "favorite_count": 0, "accepted_answer_id": 38111950, "answer_count": 2, "score": 0, "last_activity_date": 1467244804, "creation_date": 1467244006, "last_edit_date": 1467244225, "question_id": 38111837, "link": "https://stackoverflow.com/questions/38111837/enum-members-conflict-with-class-names", "title": "Enum Members conflict with class names", "body": "<p>I recently produced a wierd set of errors when working on a little project. This was basically the code that caused it:</p>\n\n<pre><code>#include &lt;memory&gt;\n\nenum derivedtype {B, C};\n\n//abstract class\nclass A{};\n\nclass B : public A\n{};\nclass C : public A\n{};\n\nint main()\n{\n  {\n    std::unique_ptr&lt;A&gt; myb(new B);\n    std::unique_ptr&lt;A&gt; myc(new C);\n  }\n}\n</code></pre>\n\n<p>Which produces this compiler error:</p>\n\n<pre><code>enumclasserror.cpp: In function \u2018int main()\u2019:\n  enumclasserror.cpp:15:30: error: \u2018B\u2019 does not name a type\n  std::unique_ptr&lt;A&gt; myb(new B);\n                          ^\n  enumclasserror.cpp:16:30: error: \u2018C\u2019 does not name a type\n  std::unique_ptr&lt;A&gt; myc(new C);\n</code></pre>\n\n<p>The fix was adding the class keyword after the new:</p>\n\n<pre><code>std::unique_ptr&lt;A&gt; myb(new class B);\n</code></pre>\n\n<p>Now the enum was included in the headerfile of the abstact class in the original code(which made it even harder to spot), but nevermind that; I could have never imagined that the members of an enum can cause the creation of an instance to fail. It literally took me hours to find that bug. Can anyone explain to me why that happens? Does new make any sense with enums?</p>\n\n<p>P.S.: The error was found by a collegue who uses clang which suggested the class keyword. The standard c++ compiler on my Ubuntu, as you can see, didn't tho..</p>\n"}, {"tags": ["c++", "multidimensional-array", "xcode6"], "comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 2, "creation_date": 1467243255, "post_id": 38111719, "comment_id": 63657023, "body": "lol, remove <code>--val;</code> ..."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1467243279, "post_id": 38111719, "comment_id": 63657030, "body": "Beat me to it and you added an extra lol. Not quite a typo, but voting to close as off topic, unlikely to help future readers."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 4, "creation_date": 1467243391, "post_id": 38111719, "comment_id": 63657066, "body": "Likely, undefined behavior  <code>array[][2]</code>  (not 3)"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1467243486, "post_id": 38111719, "comment_id": 63657086, "body": "Your row stride is claimed by your parameter as <code>2</code>, but your code uses a <code>3</code> element stride. I&#39;d fix that first."}], "answers": [{"comments": [{"owner": {"reputation": 155, "user_id": 4550670, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2bDAo.jpg?s=128&g=1", "display_name": "nix", "link": "https://stackoverflow.com/users/4550670/nix"}, "edited": false, "score": 0, "creation_date": 1467244001, "post_id": 38111743, "comment_id": 63657204, "body": "The reason I have --val, because if I don&#39;t add this, the result is as below: <code>1 2 4</code> and so the 3rd digits is digit+2, in every row.  Update: fixed it by removing --val, and adding 3."}], "tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": true, "score": 0, "last_activity_date": 1467243311, "creation_date": 1467243311, "answer_id": 38111743, "question_id": 38111719, "link": "https://stackoverflow.com/questions/38111719/duplicate-value-in-2d-array/38111743#38111743", "title": "Duplicate value in 2D array", "body": "<p>In your code you have <code>--val;</code> which reduces the number at the end of each row. Remove this to get sequential numbers.</p>\n"}], "owner": {"reputation": 155, "user_id": 4550670, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2bDAo.jpg?s=128&g=1", "display_name": "nix", "link": "https://stackoverflow.com/users/4550670/nix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 38111743, "answer_count": 1, "score": -2, "last_activity_date": 1467243311, "creation_date": 1467243137, "question_id": 38111719, "link": "https://stackoverflow.com/questions/38111719/duplicate-value-in-2d-array", "title": "Duplicate value in 2D array", "body": "<p>I am trying to fill 2D array via loops. but it duplicates the last value as shown below.</p>\n\n<pre><code>1 2 3 \n3 4 5 \n5 6 7 \n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>void fillArray(int array[][2])\n{\nint val = 0;\nfor(int i = 0; i &lt; 3;++i)\n{\n    for(int j = 0; j &lt; 3; ++j)\n    {\n        array[i][j] = ++val;\n    }\n    --val;\n}\n}\n</code></pre>\n\n<p>Any solution to this? </p>\n"}, {"tags": ["c++", "sorting", "optimization", "lambda"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 12, "creation_date": 1467242848, "post_id": 38111673, "comment_id": 63656906, "body": "Your manually written class copies the vector, the lambda expression does not."}, {"owner": {"reputation": 1633, "user_id": 3022712, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/eadc29ffebbca6135b8e45373d159112?s=128&d=identicon&r=PG&f=1", "display_name": "yar", "link": "https://stackoverflow.com/users/3022712/yar"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1467325337, "post_id": 38111673, "comment_id": 63699413, "body": "Thank you for the quick answer!"}], "answers": [{"comments": [{"owner": {"reputation": 1633, "user_id": 3022712, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/eadc29ffebbca6135b8e45373d159112?s=128&d=identicon&r=PG&f=1", "display_name": "yar", "link": "https://stackoverflow.com/users/3022712/yar"}, "edited": false, "score": 0, "creation_date": 1467325600, "post_id": 38112047, "comment_id": 63699513, "body": "Thank you! I now did it the other way round, changed &quot;std::vector&lt; float &gt; m_values;&quot; to &quot;std::vector&lt; float &gt;&amp; m_values;&quot;. But what I do not understand is: The copy is done only once, when initializing (right?). This cannot take seconds for 10^5 elements."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 1633, "user_id": 3022712, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/eadc29ffebbca6135b8e45373d159112?s=128&d=identicon&r=PG&f=1", "display_name": "yar", "link": "https://stackoverflow.com/users/3022712/yar"}, "edited": false, "score": 0, "creation_date": 1467326258, "post_id": 38112047, "comment_id": 63699721, "body": "@user3022712: <code>std::sort</code> is permitted to copy the functor it is given <i>any number of times</i>. I could see naive implementations copying that functor <code>O(log(n))</code> times at least."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 2, "last_activity_date": 1467245609, "creation_date": 1467245609, "answer_id": 38112047, "question_id": 38111673, "link": "https://stackoverflow.com/questions/38111673/why-is-a-c-lambda-function-much-faster-as-compare-function-than-an-equivalent/38112047#38112047", "title": "Why is a C++ Lambda function much faster as compare function than an equivalent object", "body": "<p>Your manually written class copies the <code>vector</code>:</p>\n\n<pre><code>std::vector&lt; float &gt; m_values;  //&lt;&lt; By value\n</code></pre>\n\n<p>The lambda expression merely references it:</p>\n\n<pre><code>[&amp;sortBySelf](size_t i, size_t j) {return sortBySelf[i] &lt; sortBySelf[j];}\n</code></pre>\n\n<p>If you took <code>sortBySelf</code> by copy (without the <code>&amp;</code>) then they would likely have similar performance.</p>\n"}], "owner": {"reputation": 1633, "user_id": 3022712, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/eadc29ffebbca6135b8e45373d159112?s=128&d=identicon&r=PG&f=1", "display_name": "yar", "link": "https://stackoverflow.com/users/3022712/yar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1112, "favorite_count": 0, "accepted_answer_id": 38112047, "answer_count": 1, "score": 0, "last_activity_date": 1467245609, "creation_date": 1467242741, "question_id": 38111673, "link": "https://stackoverflow.com/questions/38111673/why-is-a-c-lambda-function-much-faster-as-compare-function-than-an-equivalent", "title": "Why is a C++ Lambda function much faster as compare function than an equivalent object", "body": "<p>I am curious, why an implementation with a lambda function in my case is so much faster than an implementation with an equivalent object.\nTo give you an idea of the scale: with 10^4 values, the fast one takes much less than a second and the slow one takes tens of seconds. With 10^5 vales, the fast one still completes in under a second, but the slow one takes minutes.</p>\n\n<p>I want to sort the values of two arrays in the same way as if I would sort one of them. It's easier to understand with an example:\n[5 1 2 0]    becomes   [0 1 2 5]\n[3 5 6 7]       to     [7 5 6 3]</p>\n\n<p>There are various ways around the internet how to do that, but that's not what I want to ask.\nI did two implementations: one using an object with overloaded operator() and one with a lambda function as \"Compare\".</p>\n\n<p>The code below has the lambda function version uncommented. To use the compare object, just comment out what is in \"compare using lambda function\" and uncomment \"compare using compare object\".</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;cstdlib&gt;\n#include &lt;ctime&gt;\n\nvoid sortTwoVectorsByFirstVector(std::vector&lt; float &gt;&amp; sortBySelf, std::vector&lt; float &gt;&amp; sortByOther)\n{\n    // init sort indices\n    std::vector &lt; uint32_t &gt; sortIndices(sortBySelf.size());\n    for (uint32_t i = 0; i &lt; sortIndices.size(); ++i) {\n        sortIndices[i] = i;\n    }\n\n    //******** begin: compare using compare object\n//    struct CompareClass {\n//        std::vector&lt; float &gt; m_values;\n//        inline bool operator()(size_t i, size_t j)\n//        {\n//            return (m_values[i] &lt; m_values[j]);\n//        }\n//    } compareObject { sortBySelf };\n//    std::sort(sortIndices.begin(), sortIndices.end(), compareObject);\n    //******* end: compare using compare object\n\n    //********  begin: compare using lambda function\n    std::sort(sortIndices.begin(), sortIndices.end(), [&amp;sortBySelf](size_t i, size_t j) {return sortBySelf[i] &lt; sortBySelf[j];});\n    //********  end: compare using lambda function\n\n    // collect the sorted elements using the indices\n    std::vector&lt; float &gt; sortedBySelf_sorted;\n    std::vector&lt; float &gt; sortByOther_sorted;\n    sortedBySelf_sorted.resize(sortBySelf.size());\n    sortByOther_sorted.resize(sortBySelf.size());\n\n    for (uint32_t i = 0; i &lt; sortBySelf.size(); ++i) {\n        sortedBySelf_sorted[i] = sortBySelf[sortIndices[i]];\n        sortByOther_sorted[i] = sortByOther[sortIndices[i]];\n    }\n\n    sortBySelf.swap(sortedBySelf_sorted);\n    sortByOther.swap(sortByOther_sorted);\n}\n\nfloat RandomNumber()\n{\n    return std::rand();\n}\nint main()\n{\n    int vectorSize = 100000;\n    std::vector&lt; float &gt; a(vectorSize);\n    std::vector&lt; float &gt; b(vectorSize);\n\n    std::srand(100);\n    std::generate(a.begin(), a.end(), RandomNumber);\n    std::generate(b.begin(), b.end(), RandomNumber);\n\n    std::cout &lt;&lt; \"started\" &lt;&lt; std::endl;\n\n    sortTwoVectorsByFirstVector(a, b);\n\n    std::cout &lt;&lt; \"finished\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>It would be cool, if someone could make clear, where this huge performance gap comes from.</p>\n"}, {"tags": ["c++", "cunit", "gunit"], "comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 1, "creation_date": 1467242722, "post_id": 38111654, "comment_id": 63656859, "body": "Catch the exceptions?"}], "answers": [{"tags": [], "owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "is_accepted": false, "score": 0, "last_activity_date": 1467243011, "creation_date": 1467243011, "answer_id": 38111705, "question_id": 38111654, "link": "https://stackoverflow.com/questions/38111654/clean-up-after-exception-google-c-test-framework/38111705#38111705", "title": "Clean up after exception Google c++ test framework", "body": "<p><a href=\"https://github.com/google/googletest/blob/master/googletest/docs/Primer.md#test-fixtures-using-the-same-data-configuration-for-multiple-tests\" rel=\"nofollow\">Test Fixtures</a> have special methods for constructing and destructing.<br>\nThey are called <code>SetUp()</code> and <code>TearDown()</code>.  </p>\n\n<p>Place the appropriate clean-up code inside your <code>TearDown()</code> method.  </p>\n\n<pre><code>class FooTest : public ::testing::Test\n{\n     TestObject *object;\n     virtual void SetUp()\n     {      \n         TestObject = new TestObject();\n     }\n\n     virtual void TearDown()\n     {\n        //clean up occurs when test completes or an exception is thrown\n        delete object;\n     }\n};\n</code></pre>\n\n<p>It's advised that use <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr/unique_ptr\" rel=\"nofollow\">smart pointers</a>, and follow <a href=\"http://en.cppreference.com/w/cpp/language/raii\" rel=\"nofollow\">RAII</a> practices, but I realize that is not always possible depending on what it is you're testing (legacy C APIs for example).  </p>\n\n<p>Apart from that, you can always just catch the exception, and handle the cleanup on catch.</p>\n"}], "owner": {"reputation": 1082, "user_id": 1918858, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7a9249e7767f226a6d279b460e2e7616?s=128&d=identicon&r=PG&f=1", "display_name": "user1918858", "link": "https://stackoverflow.com/users/1918858/user1918858"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1455, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467243011, "creation_date": 1467242588, "question_id": 38111654, "link": "https://stackoverflow.com/questions/38111654/clean-up-after-exception-google-c-test-framework", "title": "Clean up after exception Google c++ test framework", "body": "<p>I am using C++ unit tests using the google unit test framework (fixtures), clean up after the tests is very important for me. But in case of an exception the executable crashes and the clean up never happens. Is there a way to force the clean up even in case of exceptions?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 4, "creation_date": 1467242316, "post_id": 38111594, "comment_id": 63656719, "body": "The latter has the huge (!) advantage that a typo like <code>0 = i</code> is a compiler error."}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 4, "creation_date": 1467242317, "post_id": 38111594, "comment_id": 63656720, "body": "The former produces a compiler-error when you forgot the second equal-sign. <code>0 = i</code> doesn&#39;t compile, <code>i = 0</code> does."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1467242545, "post_id": 38111594, "comment_id": 63656803, "body": "Two answers in the comments section. Why?"}], "answers": [{"tags": [], "owner": {"reputation": 2928, "user_id": 1603365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/K4qJN.png?s=128&g=1", "display_name": "md5i", "link": "https://stackoverflow.com/users/1603365/md5i"}, "is_accepted": true, "score": 10, "last_activity_date": 1467242402, "creation_date": 1467242402, "answer_id": 38111617, "question_id": 38111594, "link": "https://stackoverflow.com/questions/38111594/difference-in-the-two-ways-of-checking-equality-i-0-vs-0-i-in-c/38111617#38111617", "title": "Difference in the two ways of checking equality i==0 vs 0==i in C++", "body": "<p>The former has the advantage that it prevents the programmer from accidentally leaving out an equals sign.</p>\n\n<pre><code>if (i = 0)\n</code></pre>\n\n<p>The above is legal, and sets <code>i</code> to zero, and is false (since zero is considered false).</p>\n\n<pre><code>if (0 = i)\n</code></pre>\n\n<p>The above is illegal in all contexts.</p>\n\n<p>Today, most compilers will warn about <code>if (i = 0)</code>, but it is not a requirement, and they didn't always do so.</p>\n"}, {"comments": [{"owner": {"reputation": 1459, "user_id": 1892348, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/08a434ac231c0ed79ba1130327c610d1?s=128&d=identicon&r=PG", "display_name": "Sonu Mishra", "link": "https://stackoverflow.com/users/1892348/sonu-mishra"}, "edited": false, "score": 0, "creation_date": 1467242724, "post_id": 38111644, "comment_id": 63656861, "body": "I appreciate your way of explaining things, but I would disagree that contemporary compilers have got rid of this. I did this typo last year, and it was not easy to debug this. I don&#39;t remember the exact compiler version, but it should not be that old. :D"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1467242761, "post_id": 38111644, "comment_id": 63656874, "body": "Bull! Great, great, great Aunt Ada used it as recently as the 1850s!"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 1459, "user_id": 1892348, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/08a434ac231c0ed79ba1130327c610d1?s=128&d=identicon&r=PG", "display_name": "Sonu Mishra", "link": "https://stackoverflow.com/users/1892348/sonu-mishra"}, "edited": false, "score": 2, "creation_date": 1467242864, "post_id": 38111644, "comment_id": 63656912, "body": "@SonuMishra sometimes you have to turn the warning levels up to get it, but it&#39;s usually there."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1459, "user_id": 1892348, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/08a434ac231c0ed79ba1130327c610d1?s=128&d=identicon&r=PG", "display_name": "Sonu Mishra", "link": "https://stackoverflow.com/users/1892348/sonu-mishra"}, "edited": false, "score": 2, "creation_date": 1467242892, "post_id": 38111644, "comment_id": 63656921, "body": "@SonuMishra: That&#39;s where <i>eyes</i> come in! I see why people use this, but I believe that it lulls people into a false sense of security, AND I believe that if you&#39;re not paying enough attention to spot a <code>=</code> vs <code>==</code>, then what else are you missing? Pay more attention. Simply read your code. :) And get your colleagues to code review. <b>tl;dr If you&#39;re missing this, you&#39;re almost certainly missing other things that yoda conditionals do <i>not</i> solve for you. Fix that by fixing yourself</b>"}, {"owner": {"reputation": 1275, "user_id": 24334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89a68a77099cdf1df3947249e08ccb25?s=128&d=identicon&r=PG", "display_name": "call me Steve", "link": "https://stackoverflow.com/users/24334/call-me-steve"}, "edited": false, "score": 1, "creation_date": 1467246676, "post_id": 38111644, "comment_id": 63657861, "body": ":) I can&#39;t help but point out that testing the code can help too."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 11, "last_activity_date": 1467242526, "creation_date": 1467242526, "answer_id": 38111644, "question_id": 38111594, "link": "https://stackoverflow.com/questions/38111594/difference-in-the-two-ways-of-checking-equality-i-0-vs-0-i-in-c/38111644#38111644", "title": "Difference in the two ways of checking equality i==0 vs 0==i in C++", "body": "<p><code>0==i</code> is called a \"yoda conditional\". It is most certainly a personal preference, but it does have an advantage.</p>\n\n<p>It was used in the dark ages by mystical knights of the realm who lacked the modern technology to tell them when they'd written <code>0=i</code> by mistake.</p>\n\n<p>A compiler will reject an accidental <code>0=i</code>, but it'll accept an accidental <code>i=0</code>.</p>\n\n<p>This convention was phased out after the war of 1672. Contemporary shamans try to write code that makes sense to other shamans (also pixies, elves and humans), and instead use compilers written in this millennium (also, their <em>eyes</em>) to avoid such mistakes.</p>\n"}, {"tags": [], "owner": {"reputation": 30265, "user_id": 3246555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziIu9.png?s=128&g=1", "display_name": "AlexD", "link": "https://stackoverflow.com/users/3246555/alexd"}, "is_accepted": false, "score": 3, "last_activity_date": 1467242837, "creation_date": 1467242837, "answer_id": 38111683, "question_id": 38111594, "link": "https://stackoverflow.com/questions/38111594/difference-in-the-two-ways-of-checking-equality-i-0-vs-0-i-in-c/38111683#38111683", "title": "Difference in the two ways of checking equality i==0 vs 0==i in C++", "body": "<p>For simple integer, as others explained, <code>0 == i</code> minimizes risk of making a typo.</p>\n\n<p>However, if you have an overloaded <code>operator==</code>, then <code>0 == i</code> might be an error:</p>\n\n<pre><code>class X\n{\npublic:\n    X(int x) : _x(x) {};\n    bool operator==(int y) { return _x == y; }\nprivate:\n    int _x;\n};\n\n....\n\nX x(0);\nif (x == 0) // OK\n    ;\nif (0 == x) // error\n    ;\n</code></pre>\n"}], "owner": {"reputation": 1459, "user_id": 1892348, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/08a434ac231c0ed79ba1130327c610d1?s=128&d=identicon&r=PG", "display_name": "Sonu Mishra", "link": "https://stackoverflow.com/users/1892348/sonu-mishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 38111617, "answer_count": 3, "score": 4, "last_activity_date": 1467242837, "creation_date": 1467242237, "question_id": 38111594, "link": "https://stackoverflow.com/questions/38111594/difference-in-the-two-ways-of-checking-equality-i-0-vs-0-i-in-c", "title": "Difference in the two ways of checking equality i==0 vs 0==i in C++", "body": "<p>I am going through a huge code-base in C++. The author has used <code>0==i</code> syntax for checking equality. I have been coding in C++ for quite some years now; I have always used <code>i==0</code> syntax. </p>\n\n<p>Does the former have any advantages over the latter? Or is it just personal preference?</p>\n"}, {"tags": ["c++", "c++11", "constructor"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1467241841, "post_id": 38111510, "comment_id": 63656579, "body": "You can check by <code>static_assert</code>ing with <code>std::is_trivial</code>."}, {"owner": {"reputation": 2728, "user_id": 453273, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d1a9ce578cf1f56e53ae38d1b0476d7e?s=128&d=identicon&r=PG", "display_name": "Rose Kunkel", "link": "https://stackoverflow.com/users/453273/rose-kunkel"}, "edited": false, "score": 1, "creation_date": 1467241877, "post_id": 38111510, "comment_id": 63656586, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/3899223/what-is-a-non-trivial-constructor-in-c\">What is a non-trivial constructor in C++?</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1467241889, "post_id": 38111510, "comment_id": 63656597, "body": "auto generation of those other functions has nothing to do with whether the constructor is trivial"}, {"owner": {"reputation": 3046, "user_id": 3013887, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c1396249d91442e1dde6e93197c0b94a?s=128&d=identicon&r=PG&f=1", "display_name": "pingul", "link": "https://stackoverflow.com/users/3013887/pingul"}, "edited": false, "score": 0, "creation_date": 1467242108, "post_id": 38111510, "comment_id": 63656658, "body": "I don&#39;t think I agree with the duplication as it does not answer the question fully. Will the compiler generate other constructors in the second case?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 4, "creation_date": 1467242371, "post_id": 38111510, "comment_id": 63656733, "body": "&quot;<i>The purpose of me asking is if I can expect move/copy constructors and assignment operators being automatically generated.</i>&quot; It should be noted that the presence or absence of a trivial default constructor has nothing to do with move/copy constructors/operators being generated."}, {"owner": {"reputation": 3046, "user_id": 3013887, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c1396249d91442e1dde6e93197c0b94a?s=128&d=identicon&r=PG&f=1", "display_name": "pingul", "link": "https://stackoverflow.com/users/3013887/pingul"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1467242537, "post_id": 38111510, "comment_id": 63656797, "body": "@NicolBolas Do you mean in the sense that they can be explicitly generated by <code>A(const A&amp;) = default;</code>, or is there another reason? I thought they were implicitly generated if the default constructor was."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1467243309, "post_id": 38111510, "comment_id": 63657046, "body": "@pingul: No, I mean in every sense. The triviality of the default constructor has no bearing on the compiler-generated move/copy constructors/operators or the destructor."}], "answers": [{"comments": [{"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1494577965, "post_id": 38111527, "comment_id": 74898375, "body": "Another weird caveat is that a constructor that is declared inline and then = default in the .cpp file, is still not considered trivial. I guess technically it is &quot;user declared&quot; at that point, but it&#39;s a weird edge case and weird they decided to say &quot;user declared&quot; and not &quot;user defined&quot;."}], "tags": [], "owner": {"reputation": 30265, "user_id": 3246555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziIu9.png?s=128&g=1", "display_name": "AlexD", "link": "https://stackoverflow.com/users/3246555/alexd"}, "is_accepted": true, "score": 8, "last_activity_date": 1467268693, "last_edit_date": 1467268693, "creation_date": 1467241852, "answer_id": 38111527, "question_id": 38111510, "link": "https://stackoverflow.com/questions/38111510/is-an-empty-constructor-with-initializer-list-considered-trivial/38111527#38111527", "title": "Is an empty constructor with initializer list considered trivial?", "body": "<blockquote>\n  <p>Is the following constructor considered trivial?</p>\n</blockquote>\n\n<pre><code>A() : a(nullptr) {}\n</code></pre>\n\n<p>No, because it is user-defined.</p>\n\n<pre><code>struct A\n{\nprivate:\n    int* a{nullptr};\n};\n</code></pre>\n\n<p>No, because it has brace initializer for a non-static member.</p>\n\n<p>According to the standard (emphasis mine):</p>\n\n<blockquote>\n  <p><strong>12.1 Constructors</strong><br>....</p>\n  \n  <p>A default constructor for a class <code>X</code> is a constructor of class <code>X</code> that can be called without an argument. If\n  there is no user-declared constructor for class <code>X</code>, a constructor having no parameters is implicitly declared as defaulted (8.40).<br>....</p>\n  \n  <p>A default constructor is trivial <strong><em>if it is not user-provided</em></strong> and if:<br>....<br>\n  \u2014 <strong><em>no non-static data member of its class has a brace-or-equal-initializer</em></strong>, and<br>....</p>\n  \n  <p>Otherwise, the default constructor is non-trivial.</p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p>The purpose of me asking is if I can expect move/copy constructors and assignment operators being automatically generated.</p>\n</blockquote>\n\n<p>As <strong>@M.M</strong> and <strong>@NicolBolas</strong> commented, generation of these constructors and operators are not impacted by existence of the trivial constructor.</p>\n\n<p>The rules are a bit complicated and not very consistent.</p>\n\n<p>The <strong>copy constructor</strong> is generated only if there is no explicitly declared one. (And it is deleted if the move constructor or the move assignment operator is declared.)</p>\n\n<p>Similarly, the <strong>copy assignment operator</strong> is generated only if there is no explicitly declared one. (And again, it is deleted if the move constructor or the move assignment operator is declared.)</p>\n\n<p>The <strong>move constructor</strong> is generated only if there are no explicitly declared move constructor, move operator, copy constructor, copy assignment and destructor.</p>\n\n<p>The same rule is for the <strong>move assignment operator</strong>.</p>\n"}], "owner": {"reputation": 3046, "user_id": 3013887, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c1396249d91442e1dde6e93197c0b94a?s=128&d=identicon&r=PG&f=1", "display_name": "pingul", "link": "https://stackoverflow.com/users/3013887/pingul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 389, "favorite_count": 1, "accepted_answer_id": 38111527, "answer_count": 1, "score": 3, "last_activity_date": 1494577653, "creation_date": 1467241743, "last_edit_date": 1494577653, "question_id": 38111510, "link": "https://stackoverflow.com/questions/38111510/is-an-empty-constructor-with-initializer-list-considered-trivial", "title": "Is an empty constructor with initializer list considered trivial?", "body": "<p>Is the following constructor considered trivial?</p>\n\n<pre><code>struct A\n{\n    A() : a(nullptr) {}\nprivate:\n    int* a;\n};\n</code></pre>\n\n<p>These <a href=\"http://en.cppreference.com/w/cpp/language/default_constructor\" rel=\"nofollow noreferrer\">examples</a> makes me a little confused. With c++11 this should also be possible:</p>\n\n<pre><code>struct A\n{\nprivate:\n    int* a{nullptr};\n};\n</code></pre>\n\n<p>and <code>a</code> should be properly initialized to <code>nullptr</code>. Here I did not define the constructor, but it should have the same form as the first implementation. Is either of these classes considered trivial? </p>\n\n<p>The purpose of me asking is if I can expect move/copy constructors and assignment operators being automatically generated.</p>\n"}, {"tags": ["c++", "ffmpeg", "yuv"], "comments": [{"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 2, "creation_date": 1467248826, "post_id": 38111416, "comment_id": 63658338, "body": "Your input and output (according to <code>ffmpeg</code> output) is yuv420p. What makes you say it&#39;s yuv422p? Also, your command line and <code>ffmpeg</code>&#39;s output don&#39;t match. The command line says you&#39;re outputting yuv422p, but <code>ffmpeg</code>&#39;s output says it&#39;s yuv420p."}, {"owner": {"reputation": 149, "user_id": 5537562, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/v0z6E.jpg?s=128&g=1", "display_name": "Anny G", "link": "https://stackoverflow.com/users/5537562/anny-g"}, "reply_to_user": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 1, "creation_date": 1467309284, "post_id": 38111416, "comment_id": 63691468, "body": "I apologize, I have run the command again and pasted the latest output and the exact command I used."}, {"owner": {"reputation": 149, "user_id": 5537562, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/v0z6E.jpg?s=128&g=1", "display_name": "Anny G", "link": "https://stackoverflow.com/users/5537562/anny-g"}, "reply_to_user": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 0, "creation_date": 1467309638, "post_id": 38111416, "comment_id": 63691715, "body": "I am still having the same problem. The two yuv files are different :("}, {"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 0, "creation_date": 1467320771, "post_id": 38111416, "comment_id": 63697688, "body": "Thanks for adding the correct command and output. Unfortunately, you&#39;re question still doesn&#39;t include a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>. It&#39;s impossible to tell you what you&#39;re doing wrong without seeing the code you&#39;re using to write the video file from <code>AVFrame</code>."}], "owner": {"reputation": 149, "user_id": 5537562, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/v0z6E.jpg?s=128&g=1", "display_name": "Anny G", "link": "https://stackoverflow.com/users/5537562/anny-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1064, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1467309567, "creation_date": 1467241225, "last_edit_date": 1495540349, "question_id": 38111416, "link": "https://stackoverflow.com/questions/38111416/ffmpeg-video-file-to-yuv-conversion-by-binary-ffmpeg-and-by-code-c-give-diffe", "title": "FFMPEG: Video file to YUV conversion by binary ffmpeg and by code C++ give different results", "body": "<p><strong><em>Disclaimer:</strong> I have looked at the following question, \n<a href=\"https://stackoverflow.com/questions/27449177/ffmpeg-rgb-to-yuv-conversion-by-binary-ffmpeg-and-by-code-c-give-different-re\">FFMPEG: RGB to YUV conversion by binary ffmpeg and by code C++ give different results</a>\nbut it didn't help and it is not applicable to me because I am not using SwsContext or anything.</em> </p>\n\n<p>Following first few tutorials by <a href=\"http://dranger.com/ffmpeg/\" rel=\"nofollow noreferrer\">http://dranger.com/ffmpeg/</a>, I have created a simple program that reads a video, decodes it and then when the frame is decoded, it writes the raw yuv values to a file (no padding), using the data provided by AVFrame after we successfully decoded a frame. To be more specific, I write out arrays <code>AVFrame-&gt;data[0]</code>, <code>AVFrame-&gt;data[1]</code> and <code>AVFrame-&gt;data[2]</code> to a file, i.e. I simply append Y values, then U values, then V values to a file. The file turns out to be of yuv422p format.</p>\n\n<p>When I convert the same original video to a raw yuv format using the ffmpeg(same version of ffmpeg) command line tool, the two yuv files are the same in size, but differ in content. </p>\n\n<p>FYI, I am able to play both of the yuv files using the yuv player, and they look identical as well.</p>\n\n<p>Here is the exact command I run to convert the original video to a yuv video using ffmpeg command line tool</p>\n\n<pre><code> ~/bin/ffmpeg -i super-short-video.h264 -c:v rawvideo -pix_fmt yuv422p  \"super-short-video-yuv422p.yuv\"\n</code></pre>\n\n<p>What causes this difference in bytes and can it be fixed? Is there perhaps another way of converting the original video to a yuv using the ffmpeg tool but maybe I need to use different settings?</p>\n\n<p>Ffmpeg output when I convert to a yuv format:</p>\n\n<pre><code>ffmpeg version N-80002-g5afecff Copyright (c) 2000-2016 the FFmpeg developers\n  built with gcc 4.8 (Ubuntu 4.8.4-2ubuntu1~14.04.1)\n  configuration: --prefix=/home/me/ffmpeg_build --pkg-config-flags=--static --extra-cflags=-I/home/me/ffmpeg_build/include --extra-ldflags=-L/home/me/ffmpeg_build/lib --bindir=/home/me/bin --enable-gpl --enable-libass --enable-libfdk-aac --enable-libfreetype --enable-libmp3lame --enable-libopus --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libx264 --enable-libx265 --enable-nonfree --extra-cflags=-pg --extra-ldflags=-pg --disable-stripping\n  libavutil      55. 24.100 / 55. 24.100\n  libavcodec     57. 42.100 / 57. 42.100\n  libavformat    57. 36.100 / 57. 36.100\n  libavdevice    57.  0.101 / 57.  0.101\n  libavfilter     6. 45.100 /  6. 45.100\n  libswscale      4.  1.100 /  4.  1.100\n  libswresample   2.  0.101 /  2.  0.101\n  libpostproc    54.  0.100 / 54.  0.100\nInput #0, h264, from 'super-short-video.h264':\n  Duration: N/A, bitrate: N/A\n    Stream #0:0: Video: h264 (High), yuv420p, 1280x720, 25 fps, 25 tbr, 1200k tbn\n[rawvideo @ 0x24f6fc0] Using AVStream.codec to pass codec parameters to muxers is deprecated, use AVStream.codecpar instead.\nOutput #0, rawvideo, to 'super-short-video-yuv422p.yuv':\n  Metadata:\n    encoder         : Lavf57.36.100\n    Stream #0:0: Video: rawvideo (Y42B / 0x42323459), yuv422p, 1280x720, q=2-31, 200 kb/s, 25 fps, 25 tbn\n    Metadata:\n      encoder         : Lavc57.42.100 rawvideo\nStream mapping:\n  Stream #0:0 -&gt; #0:0 (h264 (native) -&gt; rawvideo (native))\nPress [q] to stop, [?] for help\nframe=   50 fps=0.0 q=-0.0 Lsize=   90000kB time=00:00:02.00 bitrate=368640.0kbits/s speed=11.3x    \nvideo:90000kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.000000%\n</code></pre>\n"}, {"tags": ["c++", "camera", "shared-libraries", "raspberry-pi3"], "answers": [{"tags": [], "owner": {"reputation": 409, "user_id": 5692347, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/GjrsG.jpg?s=128&g=1", "display_name": "Felix Yah Batta Man", "link": "https://stackoverflow.com/users/5692347/felix-yah-batta-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1473052337, "last_edit_date": 1473052337, "creation_date": 1473047549, "answer_id": 39323690, "question_id": 38111272, "link": "https://stackoverflow.com/questions/38111272/how-to-include-raspicam-class-into-c-geany/39323690#39323690", "title": "How to include raspicam class into C++/ Geany", "body": "<p>So as I read the description.\nDownload the file as described in the <a href=\"https://sourceforge.net/projects/raspicam/files/?\" rel=\"nofollow\">link</a>. Choose the file which is the newest Version.\nThen do as follow:</p>\n\n<pre><code>cd &lt;Directory where you downloaded the file&gt;  //probably cd  ~/Downloads\ntar xvzf raspicamxx.tgz //extract file replace xx with version number\ncd raspicamxx //seitch to newly created directory\nmkdir build // make new directory calle build\ncd build // switch into build \ncmake .. // compile it\nmake\nsudo make install\nsudo ldconfig\n</code></pre>\n\n<p>If you get errors post them here.</p>\n"}], "owner": {"reputation": 79, "user_id": 6306510, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/9614d8a0aa7d91d7fa1e94f148105f33?s=128&d=identicon&r=PG&f=1", "display_name": "Davey Boy", "link": "https://stackoverflow.com/users/6306510/davey-boy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 304, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1473052337, "creation_date": 1467240502, "question_id": 38111272, "link": "https://stackoverflow.com/questions/38111272/how-to-include-raspicam-class-into-c-geany", "title": "How to include raspicam class into C++/ Geany", "body": "<p>I'm having trouble linking my libraries on C++ so I can use my pi camera. I'm trying to follow this guys instructions</p>\n\n<p><a href=\"http://www.uco.es/investiga/grupos/ava/node/40\" rel=\"nofollow\">http://www.uco.es/investiga/grupos/ava/node/40</a></p>\n\n<p>But then it says after uncompressing the file that I need to compile it.. I've tried putting it into terminal, tried compiling it straight from Geany... I don't understand what it means and everywhere on the internet seems to think this is knowledge everyone has?</p>\n\n<p>I'm using a raspberry pi 3 with Raspibian installed. My camera module is the raspberry pi camera v2.</p>\n"}, {"tags": ["c++", "windows", "ubuntu", "address-sanitizer", "bash-on-windows"], "answers": [{"tags": [], "owner": {"reputation": 249, "user_id": 6814658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9415554eef74e2169ce3e459c177ff75?s=128&d=identicon&r=PG", "display_name": "lewis", "link": "https://stackoverflow.com/users/6814658/lewis"}, "is_accepted": false, "score": 4, "last_activity_date": 1473444201, "last_edit_date": 1473444201, "creation_date": 1473443819, "answer_id": 39417250, "question_id": 38111199, "link": "https://stackoverflow.com/questions/38111199/address-sanitizer-wont-work-with-bash-on-windows/39417250#39417250", "title": "address sanitizer won&#39;t work with bash on windows", "body": "<p>Taking a quick peek at the source code - MemoryMappingLayout::Next - <a href=\"https://llvm.org/svn/llvm-project/compiler-rt/trunk/lib/sanitizer_common/sanitizer_procmaps_linux.cc\" rel=\"nofollow\">https://llvm.org/svn/llvm-project/compiler-rt/trunk/lib/sanitizer_common/sanitizer_procmaps_linux.cc</a>  - it appears the issue is that bash on ubuntu on windows support for the /proc filesystem is incomplete.</p>\n\n<p>The code that fails is looking at /proc/self/maps - which actually - appears to be about right.</p>\n\n<p>But I've found other stuff (e.g. networking ) in /proc completely broken on bashonwindowsonunix - so I'm pretty sure that part is a work in progress.</p>\n"}], "owner": {"reputation": 71, "user_id": 5233947, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VxjRRtrLtZo/AAAAAAAAAAI/AAAAAAAAZa0/OcbfAuQFK9I/photo.jpg?sz=128", "display_name": "Cole Berhorst", "link": "https://stackoverflow.com/users/5233947/cole-berhorst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 879, "favorite_count": 0, "answer_count": 1, "score": 7, "last_activity_date": 1538205597, "creation_date": 1467240018, "last_edit_date": 1538205597, "question_id": 38111199, "link": "https://stackoverflow.com/questions/38111199/address-sanitizer-wont-work-with-bash-on-windows", "title": "address sanitizer won&#39;t work with bash on windows", "body": "<p>Currently running llvm, clang, clang-format, and clang-modernize on Ubuntu Bash on Windows. I would like to use the set of sanitize tools released by google including address, memory, and thread sanitize. None of the fsanitize options seem to work.</p>\n\n<p>Here is the code sample for ASAN:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\nint main() {\n  char *x = (char *)malloc(10 * sizeof(char *));\n  free(x);\n  return x[5];// purposely accessing deallocated memory\n}\n</code></pre>\n\n<p>Here is the clang call in bash on windows:</p>\n\n<pre><code>$clang++-3.5 -fsanitize=address -o1 -fno-omit-frame-pointer -g main.cpp -o main\n$./main\n</code></pre>\n\n<p>Results</p>\n\n<pre><code>==70==Sanitizer CHECK failed: build/buildd/llvm-toolchain-snapshot-3.5/projects/compiler-rt/lib/sanitizer_common/sanitizer_procmaps_linux.cc:211 ((IsOneOf(*current_, 's', 'p'))) != (0)(0,0)\n</code></pre>\n\n<p>I'd love suggestions on how to get it working or if I'm missing part of the tool-chain or something. </p>\n\n<p>Failing that I suppose I will dual-boot Ubuntu or Debian, because clang for windows is missing simple features like std:out support, though ideally I'd like to be able to compile both for Windows targets and Linux targets. I'd like to avoid dual-booting though as Ubuntu can't mount windows storage spaces, but they appear to be served to Ubuntu bash on windows quite well.</p>\n"}, {"tags": ["c++", "boost", "data-structures"], "comments": [{"owner": {"reputation": 155, "user_id": 2417774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3e28fcff33afd3cfb2242c4ae49b72c?s=128&d=identicon&r=PG", "display_name": "llonesmiz", "link": "https://stackoverflow.com/users/2417774/llonesmiz"}, "edited": false, "score": 1, "creation_date": 1467272074, "post_id": 38111187, "comment_id": 63665928, "body": "What would happen if you were to write <code>obj.mainmap[&quot;non_existing_key&quot;]</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 2, "last_activity_date": 1467286220, "creation_date": 1467286220, "answer_id": 38121834, "question_id": 38111187, "link": "https://stackoverflow.com/questions/38111187/using-rolling-accumulators-in-unordered-maps-in-a-class/38121834#38121834", "title": "Using rolling accumulators in unordered maps in a Class", "body": "<p>Like @jv_ hinted, <code>map[key]</code> is a mutating operation, which inserts a default constructed element if none exists. </p>\n\n<p>However, there's no default constructor for your element type. Therefore, you can't use that operator.</p>\n\n<p>If you use <code>obj.mainmap.at(\"a\")</code> instead of <code>obj.mainmap[\"a\"]</code>, you'll get an exception on missing  keys instead.</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/10a3b38e62c145d0\" rel=\"nofollow\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;boost/accumulators/accumulators.hpp&gt;\n#include &lt;boost/accumulators/statistics/stats.hpp&gt;\n#include &lt;boost/accumulators/statistics/rolling_mean.hpp&gt;\n#include &lt;unordered_map&gt;\n\nnamespace nmbstacc = boost::accumulators;\ntypedef nmbstacc::accumulator_set&lt;double, nmbstacc::stats&lt;nmbstacc::tag::rolling_mean&gt; &gt; MACC;\n\nclass RollMean {\n\n  public:\n    MACC m_acc;\n    std::unordered_map&lt;std::string, MACC&gt; mainmap;\n    RollMean(std::string name) : m_acc(nmbstacc::tag::rolling_window::window_size = 3) { mainmap.emplace(name, m_acc); }\n};\n\nint main() {\n    RollMean obj(\"a\");\n    obj.mainmap.at(\"a\")(1.0);\n\n    std::cout &lt;&lt; \"roll_mean: \" &lt;&lt; nmbstacc::rolling_mean(obj.mainmap.at(\"a\")) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>roll_mean: 1\n</code></pre>\n"}], "owner": {"reputation": 550, "user_id": 6530625, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/04db4ba95340c683d3a9c2e81611bf59?s=128&d=identicon&r=PG&f=1", "display_name": "professor bigglesworth", "link": "https://stackoverflow.com/users/6530625/professor-bigglesworth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 38121834, "answer_count": 1, "score": 1, "last_activity_date": 1467286220, "creation_date": 1467239944, "last_edit_date": 1467245358, "question_id": 38111187, "link": "https://stackoverflow.com/questions/38111187/using-rolling-accumulators-in-unordered-maps-in-a-class", "title": "Using rolling accumulators in unordered maps in a Class", "body": "<p>I'm trying to use an unordered map to hold rolling accumulators in a class.</p>\n\n<p>First let me show what works. Here is an accumulator within a class that works as expected without the map. Note that the accumulator needs to be initialized in the initialization list. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;boost/accumulators/accumulators.hpp&gt;\n#include &lt;boost/accumulators/statistics/stats.hpp&gt;\n#include &lt;boost/accumulators/statistics/rolling_mean.hpp&gt;\n\nnamespace nmbstacc = boost::accumulators;\ntypedef nmbstacc::accumulator_set&lt;double, nmbstacc::stats&lt;nmbstacc::tag::rolling_mean &gt;&gt; MACC;\n\nclass RollMean {\n\npublic:\n    MACC m_acc;\n    RollMean(void) : m_acc(nmbstacc::tag::rolling_window::window_size = 3) {}\n};\n\nint main() \n{\n    RollMean obj;\n    obj.m_acc(0.5);\n    obj.m_acc(1.5);\n    obj.m_acc(2.5);\n    obj.m_acc(3.5);\n\n    std::cout &lt;&lt; \"roll_mean: \" &lt;&lt; nmbstacc::rolling_mean(obj.m_acc) &lt;&lt; std::endl;\n\n    std::getchar();\n    return 0;\n}\n</code></pre>\n\n<p>However, what I need is an unordered map to hold these accumulators in a class but can't seems to figure out how to get the following program to compile. I'm not sure how to declare the mainmap container without first initializing the rolling accumulator. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;boost/accumulators/accumulators.hpp&gt;\n#include &lt;boost/accumulators/statistics/stats.hpp&gt;\n#include &lt;boost/accumulators/statistics/rolling_mean.hpp&gt;\n#include &lt;unordered_map&gt;\n\nnamespace nmbstacc = boost::accumulators;\ntypedef nmbstacc::accumulator_set&lt;double, nmbstacc::stats&lt;nmbstacc::tag::rolling_mean &gt;&gt; MACC;\n\nclass RollMean {\n\npublic:\n    MACC m_acc;\n    std::unordered_map&lt;std::string, MACC&gt; mainmap;\n    RollMean(std::string name) : m_acc(nmbstacc::tag::rolling_window::window_size = 3) {\n        mainmap.emplace(name, m_acc);\n    }\n};\n\nint main() \n{\n    RollMean obj(\"a\");\n    obj.mainmap[\"a\"](1.0);\n\n    std::cout &lt;&lt; \"roll_mean: \" &lt;&lt; nmbstacc::rolling_mean(obj.mainmap[\"a\"]) &lt;&lt; std::endl;\n\n    std::getchar();\n    return 0;\n}\n</code></pre>\n\n<p>I get the following error:</p>\n\n<p>Error   C2679   binary '[': no operator found which takes a right-hand operand of type 'boost::parameter::keyword' (or there is no acceptable conversion)        </p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "pointers", "cuda"], "comments": [{"owner": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "edited": false, "score": 0, "creation_date": 1467240072, "post_id": 38111104, "comment_id": 63655959, "body": "Tested it - it shouldn&#39;t crash if the array is properly initialized. This short code doesn&#39;t crash and outputs right result:     <code>float num;     uint8_t arr[4];     uint8_t* ptr = &amp;arr[0];     num = 14;     *((float*)(ptr)) = num;     num = *((float*)(ptr));</code>"}, {"owner": {"reputation": 386, "user_id": 4247808, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94039d63e482a00879691a185e68e555?s=128&d=identicon&r=PG&f=1", "display_name": "Xiobiq", "link": "https://stackoverflow.com/users/4247808/xiobiq"}, "edited": false, "score": 0, "creation_date": 1467240086, "post_id": 38111104, "comment_id": 63655963, "body": "Please provide a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1467240226, "post_id": 38111104, "comment_id": 63656005, "body": "There is the possibility of alignment problems if <code>ptr</code> doesn&#39;t point to a nice, divisible by <code>sizeof(float)</code> address, but I join the crowd calling for a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 1, "creation_date": 1467241195, "post_id": 38111104, "comment_id": 63656359, "body": "why is the question titled &quot;Writing a float to a void* location&quot; ?  I don&#39;t see that concept expressed anywhere.  You want to write a <code>float</code> to a specific position in a <code>uint8_t</code> array.  CUDA requires that all writes from device code to device memory be <a href=\"http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#device-memory-accesses\" rel=\"nofollow noreferrer\">naturally aligned</a>.  You can&#39;t satisfy the natural alignment requirement by writing a <code>float</code> to an arbitrary position indexed from an arbitrary <code>uint8_t*</code> pointer.  You would have to know something about the underlying alignment of the <code>uint8_t*</code> pointer."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1467240464, "post_id": 38111231, "comment_id": 63656092, "body": "I see come correctness in there, <code>memcpy</code> is a nice, safe way to pull this off, but the rest is either poorly worded, mistaken, or a combination of the two."}], "tags": [], "owner": {"reputation": 60, "user_id": 3681507, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/jq1Dn.jpg?s=128&g=1", "display_name": "erakis", "link": "https://stackoverflow.com/users/3681507/erakis"}, "is_accepted": false, "score": -2, "last_activity_date": 1505479388, "last_edit_date": 1505479388, "creation_date": 1467240245, "answer_id": 38111231, "question_id": 38111104, "link": "https://stackoverflow.com/questions/38111104/writing-a-float-to-a-uint8-t-location/38111231#38111231", "title": "Writing a float to a uint8_t* location", "body": "<p>How do you write the float value ? </p>\n\n<p>I already work on a project that handle multiple object with different data size. We want to keep the object properties in a chain list but stored data in a single common big buffer. So in this buffer we have 8-bit signed integer, followed by a 32-bit float, followed by an unsigned integer 64 bit, etc ... obviously except the first element no one was aligned to save space. So when we want to write a value we do :</p>\n\n<pre><code>// Write float value to any position in your big buffer\nfloat fValueToWrite = 10;\nmemcpy(ptr + 12, &amp;fValueToWrite, sizeof(fValueToWrite));\n</code></pre>\n\n<p>When we want to read the value we do :</p>\n\n<pre><code>// Read the float from any unalign position of your big buffer\nfloat fReadValue = 0;\nmemcpy(&amp;fReadValue, ptr + 12, sizeof(fReadValue));\n</code></pre>\n\n<p>The trick is using memcpy that don't care about reading from a non word boundary.</p>\n\n<p>But if we did this to read : </p>\n\n<pre><code>float buffer[256] = {0};`\nuint8_t* ptr = (uint8_t *)buffer; \nfloat fCrashReadValue = *((float *)(ptr + 11));\n</code></pre>\n\n<p>may cause alignment fault on processor that do not support reading from boundary divisible by 11 (<em>LoL indeed it's a prime number</em>). Thus, if your CPU is 32 bits in this case 12 is a valid boundary as long as <code>ptr</code> is pointing to the allocated buffer and not on another pointer that may not be properly aligned.</p>\n\n<p>By experience I can told your that many ARM processor that I worked with will fault using a non-boundary address. But x86 (intel) processor will quietly realign with a penalty performance.</p>\n\n<p>Hope it will help you :)   </p>\n"}], "owner": {"reputation": 1, "user_id": 6530648, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-543mhi9UkMk/AAAAAAAAAAI/AAAAAAAAAec/GAP7E8OuzfQ/photo.jpg?sz=128", "display_name": "Marc", "link": "https://stackoverflow.com/users/6530648/marc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 754, "favorite_count": 0, "closed_date": 1467246687, "answer_count": 1, "score": 0, "last_activity_date": 1505479388, "creation_date": 1467239416, "last_edit_date": 1467243434, "question_id": 38111104, "link": "https://stackoverflow.com/questions/38111104/writing-a-float-to-a-uint8-t-location", "closed_reason": "Duplicate", "title": "Writing a float to a uint8_t* location", "body": "<p>I have a CUDA kernel function that accepts a uint8_t*. I want to write a calculated float to a specific position in this uint8_t* array (12 bytes after the pointer start position). </p>\n\n<p>What would be the proper way of doing this? If I assume:</p>\n\n<pre><code>uint8_t* ptr = address of a properly initialized and allocated memory segment\n</code></pre>\n\n<p>Then the following causes the kernel to crash:</p>\n\n<pre><code>float some_float = ...\n*((float *) (ptr+12)) = some_float\n</code></pre>\n\n<p>I know this is probably not the proper way of doing this, maybe even a faux-pas to some... But maybe someone can give a tip or two about how to best go about this.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "c++11", "smart-pointers"], "comments": [{"owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 4, "creation_date": 1467239412, "post_id": 38111041, "comment_id": 63655738, "body": "It seems like having such a high-level concept (temporal resource allocation) tied to such a low-level one (smart object references) would lead to very brittle and inherently non-deterministic programs."}, {"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 0, "creation_date": 1467239527, "post_id": 38111041, "comment_id": 63655776, "body": "It should not be hard to implement this, right?"}, {"owner": {"reputation": 2102, "user_id": 3280022, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2d8a213aec89c1883c261a278baf9aee?s=128&d=identicon&r=PG&f=1", "display_name": "Emerald Weapon", "link": "https://stackoverflow.com/users/3280022/emerald-weapon"}, "reply_to_user": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 1, "creation_date": 1467239549, "post_id": 38111041, "comment_id": 63655782, "body": "@MooseBoys Possibly. It might be an animal to be handled carefully, but I would like to have one and play around with it."}, {"owner": {"reputation": 7254, "user_id": 633684, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FILa8kQG7TI/AAAAAAAAAAI/AAAAAAAAABE/W39twkD272Q/photo.jpg?sz=128", "display_name": "xiaofeng.li", "link": "https://stackoverflow.com/users/633684/xiaofeng-li"}, "reply_to_user": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 0, "creation_date": 1467239560, "post_id": 38111041, "comment_id": 63655786, "body": "@Zereges no, combine shared_ptr and weak_ptr maybe."}, {"owner": {"reputation": 7254, "user_id": 633684, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FILa8kQG7TI/AAAAAAAAAAI/AAAAAAAAABE/W39twkD272Q/photo.jpg?sz=128", "display_name": "xiaofeng.li", "link": "https://stackoverflow.com/users/633684/xiaofeng-li"}, "edited": false, "score": 0, "creation_date": 1467239743, "post_id": 38111041, "comment_id": 63655857, "body": "Would be useful when implementing cache?"}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1467239805, "post_id": 38111041, "comment_id": 63655873, "body": "Perhaps what you want instead of this is an LRU cache?  (I think there is probably nothing special about 30 seconds or any other timeout-period you might use; rather you want to free up the least-likely-to-be-needed-in-the-near-future expendable resources whenever &#39;too many&#39; resources are in use at once, for some value of &#39;too many&#39;)"}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "reply_to_user": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1467239822, "post_id": 38111041, "comment_id": 63655875, "body": "@MooseBoys That aspect can easily be solved. You jut have some protocol for picking up the pointer into use, and dropping it again. The pointer only expires in the quiescent period when it&#39;s not in use. The operation for bringing a pointer into use is made atomic so that if you successfully get a reference, it is safe from expiry.  In the above example, the <code>stop_count_down</code> operation would have to return a value indicating success or failure: is the pointer still good, or was it too late to stop the countdown."}, {"owner": {"reputation": 1113, "user_id": 4183920, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/373d5add81b78be87653a7987bf06fde?s=128&d=identicon&r=PG&f=1", "display_name": "PerryC", "link": "https://stackoverflow.com/users/4183920/perryc"}, "edited": false, "score": 4, "creation_date": 1467239856, "post_id": 38111041, "comment_id": 63655891, "body": "Timed smart pointers sound like a debugging nightmare."}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "reply_to_user": {"reputation": 1113, "user_id": 4183920, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/373d5add81b78be87653a7987bf06fde?s=128&d=identicon&r=PG&f=1", "display_name": "PerryC", "link": "https://stackoverflow.com/users/4183920/perryc"}, "edited": false, "score": 0, "creation_date": 1467240014, "post_id": 38111041, "comment_id": 63655938, "body": "@PerryC not if there is some simple way to disable them, if it is a problem. Like don&#39;t launch the global thread which performs the expiry of all these pointers.    The expiry could also be synchronous: as in, the app has to call something to trigger expiry."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1467240972, "post_id": 38111041, "comment_id": 63656264, "body": "Sounds like caching. There should be several caching-schemes out there. A timed one, maybe. Anyway you might put that pointer into a cache and do not leave it alone."}], "answers": [{"comments": [{"owner": {"reputation": 2102, "user_id": 3280022, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2d8a213aec89c1883c261a278baf9aee?s=128&d=identicon&r=PG&f=1", "display_name": "Emerald Weapon", "link": "https://stackoverflow.com/users/3280022/emerald-weapon"}, "edited": false, "score": 0, "creation_date": 1467239829, "post_id": 38111127, "comment_id": 63655879, "body": "Yes, there is some analogy with weak_ptr. But my question is not about discussing possible benefits/shortcomings, it&#39;s about whether this kind of object exists somewhere."}], "tags": [], "owner": {"reputation": 1542, "user_id": 1284258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2777bcec2428f4ab02612af25abaa836?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/1284258/jason"}, "is_accepted": false, "score": 0, "last_activity_date": 1467239548, "creation_date": 1467239548, "answer_id": 38111127, "question_id": 38111041, "link": "https://stackoverflow.com/questions/38111041/do-timed-pointers-exist/38111127#38111127", "title": "Do timed pointers exist?", "body": "<p>I think you are losing the benefit of a smart pointer by timing it. Just have some object responsible for managing these resources and request the resource from it when needed. Otherwise, you will need to put checks if the resource is still loaded before any use of the pointer. This is the exact problem of shared pointers where some other code might invalidate the resource/memory, and you must always validate the pointer's resource before using it.</p>\n"}], "owner": {"reputation": 2102, "user_id": 3280022, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2d8a213aec89c1883c261a278baf9aee?s=128&d=identicon&r=PG&f=1", "display_name": "Emerald Weapon", "link": "https://stackoverflow.com/users/3280022/emerald-weapon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 222, "favorite_count": 1, "closed_date": 1467240902, "answer_count": 1, "score": 6, "last_activity_date": 1467239548, "creation_date": 1467239079, "question_id": 38111041, "link": "https://stackoverflow.com/questions/38111041/do-timed-pointers-exist", "closed_reason": "Not suitable for this site", "title": "Do timed pointers exist?", "body": "<p>In some cases I desired to have some kind of timed-based smart pointer, for example to cache some bulky object but release it automatically after a certain time if not used. When the pointer is touched (dereferenced) the count down is restarted, and you can also halt the count down if you need to 'lock' the object alive for duration of a computation. Something like:</p>\n\n<pre><code>timed_ptr&lt;Type,30&gt; p = new Type(); \\\\object is deleted after 30 seconds, and pointer set to a checkable 'null' state\n\n...\n\np.stop_count_down();\n// do something with the object, guaranteed it won't expire while we still need it. \np.start_count_down();\n</code></pre>\n\n<p>Does anything of this sort exists in boost or other library?</p>\n"}, {"tags": ["c++", "dlib"], "answers": [{"comments": [{"owner": {"reputation": 2178, "user_id": 3209505, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89cdc5a35bbffb1f0dbc1a1026642d2c?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeniy", "link": "https://stackoverflow.com/users/3209505/evgeniy"}, "edited": false, "score": 1, "creation_date": 1467269218, "post_id": 38111421, "comment_id": 63664300, "body": "deserialize can be used to load/save array2d to disk/memory, but it will not  ecode/decode PNG (or any other) format"}], "tags": [], "owner": {"reputation": 121, "user_id": 6521403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a9f38a9fe5d185054fea09f064a91f5?s=128&d=identicon&r=PG&f=1", "display_name": "Iverelo", "link": "https://stackoverflow.com/users/6521403/iverelo"}, "is_accepted": false, "score": -3, "last_activity_date": 1467241268, "creation_date": 1467241268, "answer_id": 38111421, "question_id": 38110990, "link": "https://stackoverflow.com/questions/38110990/array2d-from-bytestream-without-writing-file-to-disk/38111421#38111421", "title": "array2d from bytestream without writing file to disk", "body": "<p>Googled array2d in dlib and found this helper function.</p>\n\n<pre><code>   template &lt;\n        typename T,\n        typename mem_manager\n        &gt;\n    void deserialize (\n        array2d&lt;T,mem_manager&gt;&amp; item, \n        std::istream&amp; in\n    );   \n    /*!\n        provides deserialization support \n    !*/\n</code></pre>\n\n<p>I am not sure what writing it to a file and then reading it back would get you.</p>\n"}, {"comments": [{"owner": {"reputation": 1974, "user_id": 1946300, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b259a2cac003eda2e162e13ca3a398ab?s=128&d=identicon&r=PG", "display_name": "drsealks", "link": "https://stackoverflow.com/users/1946300/drsealks"}, "edited": false, "score": 0, "creation_date": 1467269886, "post_id": 38115745, "comment_id": 63664646, "body": "Hi @Evgeniy thanks for the reply. This answers my question even though I did not want to believe this is to be the case. Just a quick question: this lodepng library will not read png stream in a required array2d format, right?"}, {"owner": {"reputation": 2178, "user_id": 3209505, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89cdc5a35bbffb1f0dbc1a1026642d2c?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeniy", "link": "https://stackoverflow.com/users/3209505/evgeniy"}, "reply_to_user": {"reputation": 1974, "user_id": 1946300, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b259a2cac003eda2e162e13ca3a398ab?s=128&d=identicon&r=PG", "display_name": "drsealks", "link": "https://stackoverflow.com/users/1946300/drsealks"}, "edited": false, "score": 0, "creation_date": 1467270825, "post_id": 38115745, "comment_id": 63665196, "body": "array2d is a simple memory buffer with some additional functions. after constructing array2d you can get access to memory pointer with dlib::image_data(). And I cant answer about details for lodepng - I used it some years ago, but now I switched to static-linked opencv"}], "tags": [], "owner": {"reputation": 2178, "user_id": 3209505, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89cdc5a35bbffb1f0dbc1a1026642d2c?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeniy", "link": "https://stackoverflow.com/users/3209505/evgeniy"}, "is_accepted": true, "score": 4, "last_activity_date": 1467269164, "creation_date": 1467269164, "answer_id": 38115745, "question_id": 38110990, "link": "https://stackoverflow.com/questions/38110990/array2d-from-bytestream-without-writing-file-to-disk/38115745#38115745", "title": "array2d from bytestream without writing file to disk", "body": "<p>The only way to make it - use OpenCV or some other external library that can read PNG file from memory:</p>\n\n<pre><code>size_t png_buffer_size = 1000;// example value\nvoid* png_buffer; // your PNG image\ncv::Mat buffer(1, png_buffer_size, CV_8UC1, png_buffer);\ncv::Mat decoded = cv::imdecode(buffer, 1); // should be RGBA32 for PNG\ndlib::cv_image&lt;rgb_alpha_pixel&gt; img(decoded); // this image can be used inside dlib\n....\nauto detections = detector(img);  // this image can be used to detect faces for example or inside any other algorithm\n...\n// if you need array2d - use assign_image\ndlib::array2d&lt;rgb_alpha_pixel&gt; arr;\ndlib::assign_image(arr, img);\n</code></pre>\n\n<p>Using dlib::cv_image is free in terms of performance - it does not make deep-copy of cv::Mat data, so you should make cv::Mat exists and not changed until cv_image is destroyed (it is keeping pointer inside)</p>\n\n<p>if you need some small PNG reading library - you can try <a href=\"http://lodev.org/lodepng/\" rel=\"nofollow\">lodepng</a></p>\n\n<p>And I think some future release of dlib can have this function inside</p>\n"}], "owner": {"reputation": 1974, "user_id": 1946300, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b259a2cac003eda2e162e13ca3a398ab?s=128&d=identicon&r=PG", "display_name": "drsealks", "link": "https://stackoverflow.com/users/1946300/drsealks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1084, "favorite_count": 0, "accepted_answer_id": 38115745, "answer_count": 2, "score": 1, "last_activity_date": 1467269164, "creation_date": 1467238709, "last_edit_date": 1467239687, "question_id": 38110990, "link": "https://stackoverflow.com/questions/38110990/array2d-from-bytestream-without-writing-file-to-disk", "title": "array2d from bytestream without writing file to disk", "body": "<p>is it possible to initialise  <code>array2d</code> object in <code>dlib</code> from a byte stream? </p>\n\n<p>The thing is that I receive bytestream which contains png file from external source and I do not want to create temp file and then read image from this file into array. Is it possible to skip write-to-file part?</p>\n\n<p>Speaking the other way, is it possible to build array2d object from file kept in memory?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "forward-declaration"], "comments": [{"owner": {"reputation": 17902, "user_id": 116273, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cc60634738ece15d1de4738110c76aa8?s=128&d=identicon&r=PG", "display_name": "erenon", "link": "https://stackoverflow.com/users/116273/erenon"}, "edited": false, "score": 3, "creation_date": 1467238680, "post_id": 38110951, "comment_id": 63655474, "body": "What&#39;s wrong with forward declaring <code>B</code> outside of <code>A</code>?"}, {"owner": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "reply_to_user": {"reputation": 17902, "user_id": 116273, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cc60634738ece15d1de4738110c76aa8?s=128&d=identicon&r=PG", "display_name": "erenon", "link": "https://stackoverflow.com/users/116273/erenon"}, "edited": false, "score": 0, "creation_date": 1467238824, "post_id": 38110951, "comment_id": 63655526, "body": "@erenon There is nothing wrong. But if there is another possibility, I would love to know it :)"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1467239023, "post_id": 38110951, "comment_id": 63655601, "body": "Let me get this. You are trying to find out whether there is a different solution to a problem when there is an existing solution and it works just fine."}, {"owner": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "edited": false, "score": 0, "creation_date": 1467239253, "post_id": 38110951, "comment_id": 63655680, "body": "@R Sahu Don&#39;t be like that. I could use only pointers and never references, or I could use only macros instead of templates. Both works, and both can fail to certain degree."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1467239739, "post_id": 38110951, "comment_id": 63655855, "body": "@BlackMoses, that&#39;s fair. Just wanted to make sure I understood what you were trying to accomplish."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1467239761, "post_id": 38110951, "comment_id": 63655865, "body": "So you want to forward-declare <code>B</code> inside <code>A</code> but have <code>B</code> be declared in namespace scope instead of in the scope of <code>A</code>?"}, {"owner": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1467239874, "post_id": 38110951, "comment_id": 63655897, "body": "@Brian Yes, that&#39;s it."}], "answers": [{"comments": [{"owner": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "edited": false, "score": 0, "creation_date": 1467239088, "post_id": 38111024, "comment_id": 63655622, "body": "No, that&#39;s what I wanted to avoid in this example. It&#39;s about forward-declare B class inside class A body, not outside."}, {"owner": {"reputation": 764, "user_id": 6301103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf0769f719c19bc3497f3472c18fed8?s=128&d=identicon&r=PG&f=1", "display_name": "jaaq", "link": "https://stackoverflow.com/users/6301103/jaaq"}, "reply_to_user": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "edited": false, "score": 0, "creation_date": 1467239850, "post_id": 38111024, "comment_id": 63655888, "body": "well you could just make a namespace statement inside your class A  see: <a href=\"http://www.cplusplus.com/doc/tutorial/namespaces/\" rel=\"nofollow noreferrer\">cplusplus.com/doc/tutorial/namespaces</a>"}], "tags": [], "owner": {"reputation": 764, "user_id": 6301103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf0769f719c19bc3497f3472c18fed8?s=128&d=identicon&r=PG&f=1", "display_name": "jaaq", "link": "https://stackoverflow.com/users/6301103/jaaq"}, "is_accepted": false, "score": 0, "last_activity_date": 1467238968, "creation_date": 1467238968, "answer_id": 38111024, "question_id": 38110951, "link": "https://stackoverflow.com/questions/38110951/how-to-forward-declare-unnested-class-in-a-class-body-without-befriending-or-dec/38111024#38111024", "title": "How to forward-declare unnested class in a class body without befriending or declaring pointer", "body": "<p>So what you are trying to do is have an instance of a class within another class but have the definition after the \"container class\"?</p>\n\n<pre><code>//forward declaration of B\nclass B;\n\nclass A\n{\n  public:\n    B* getInstanceB();\n\n  private:\n     B b_;\n\n};\n\nB* A::getInstanceB()\n{\n   return &amp;b_;\n}\n\n//implementation of B\nclass B{};\n</code></pre>\n\n<p>like this?</p>\n\n<p>HTH</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1467239684, "creation_date": 1467239684, "answer_id": 38111146, "question_id": 38110951, "link": "https://stackoverflow.com/questions/38110951/how-to-forward-declare-unnested-class-in-a-class-body-without-befriending-or-dec/38111146#38111146", "title": "How to forward-declare unnested class in a class body without befriending or declaring pointer", "body": "<blockquote>\n  <p>I deeply regret that there is no such forward-declaring syntax like:</p>\n\n<pre><code>class ::[optional-namespace::]ClassName;\n</code></pre>\n  \n  <p>which would distinguish nested class forward-declaration from unnested class forward-declaration. Is it possible to do that in current standard in some other way?</p>\n</blockquote>\n\n<p>No, I don't think there is.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1467241727, "post_id": 38111203, "comment_id": 63656532, "body": "Isn&#39;t that equivalent to a forward declaration? (Test putting <code>B* ptr;</code> right after class A)"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1467241971, "post_id": 38111203, "comment_id": 63656616, "body": "@DieterL&#252;cking The OP wants the forward declaration to be inside the class definition of <code>A</code>."}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 2, "last_activity_date": 1467240044, "last_edit_date": 1495535246, "creation_date": 1467240044, "answer_id": 38111203, "question_id": 38110951, "link": "https://stackoverflow.com/questions/38110951/how-to-forward-declare-unnested-class-in-a-class-body-without-befriending-or-dec/38111203#38111203", "title": "How to forward-declare unnested class in a class body without befriending or declaring pointer", "body": "<p>To forward-declare a class named <code>B</code> inside the class definition of <code>A</code> without having that class be nested within <code>A</code>, you can do something like the following:</p>\n\n<pre><code>class A {\n    typedef class B B;\n    // do something with B\n};\n</code></pre>\n\n<p>An explanation can be found <a href=\"https://stackoverflow.com/a/37713253/481267\">here</a>.</p>\n\n<p>A demonstration that this actually does work: <a href=\"http://coliru.stacked-crooked.com/a/27913ce45a572d36\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/27913ce45a572d36</a></p>\n"}], "owner": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 38111203, "answer_count": 3, "score": 0, "last_activity_date": 1467240044, "creation_date": 1467238523, "question_id": 38110951, "link": "https://stackoverflow.com/questions/38110951/how-to-forward-declare-unnested-class-in-a-class-body-without-befriending-or-dec", "title": "How to forward-declare unnested class in a class body without befriending or declaring pointer", "body": "<p>I know two ways of declaring unnested class inside a class body.</p>\n\n<p>First is:</p>\n\n<pre><code>class A\n{\n    friend class B; // B is forward-declared + friend\n};\n</code></pre>\n\n<p>And the second is:</p>\n\n<pre><code>class A\n{\n    class B* ptr; // B is forward-declared + pointer\n};\n</code></pre>\n\n<p>It's possible to forward-declare a class outside the class body, but for certain reason let's forget about this option;</p>\n\n<p>So, I would like to make possible to declare such member:</p>\n\n<pre><code>class A\n{\n    /* somehow declare B in the body*/\n    B* getInstanceB();\n};\n</code></pre>\n\n<p>It's worth to mention, that:\nWith declaring a pointer:</p>\n\n<pre><code>class A\n{\n    class B* pointer;\n    B* getInstanceB(); //fine\n};\n</code></pre>\n\n<p>With friend declaration:</p>\n\n<pre><code>class A\n{\n    friend class B;\n    B* getInstanceB(); //GCC 5.3.0 issues error, MSVC compiles\n};\n</code></pre>\n\n<p>I deeply regret that there is no such forward-declaring syntax like:</p>\n\n<p><code>class ::[optional-namespace::]ClassName</code>; </p>\n\n<p>which would distinguish nested class forward-declaration from unnested class forward-declaration. Is it possible to do that in current standard in some other way?</p>\n"}, {"tags": ["c++", "linux", "qt", "include", "qt-creator"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 2, "creation_date": 1467238672, "post_id": 38110837, "comment_id": 63655473, "body": "There might be other problems, but your include style is wrong. You want only <code>#include &lt;QCamera&gt;</code>."}, {"owner": {"reputation": 7180, "user_id": 2666212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874561e399041a45c82c2ca6652400b6?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2666212/mike"}, "edited": false, "score": 0, "creation_date": 1467248780, "post_id": 38110837, "comment_id": 63658328, "body": "if the Camera example doesn&#39;t work, I think that there is a problem with your Qt installation."}, {"owner": {"reputation": 11, "user_id": 4787715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed34b86d4d6e5a352d0aa8565ac46101?s=128&d=identicon&r=PG&f=1", "display_name": "heavyLime", "link": "https://stackoverflow.com/users/4787715/heavylime"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1467272182, "post_id": 38110837, "comment_id": 63665979, "body": "@KubaOber To quote myself: &quot;QtMultimedia/ beforehand&quot;."}, {"owner": {"reputation": 11, "user_id": 4787715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed34b86d4d6e5a352d0aa8565ac46101?s=128&d=identicon&r=PG&f=1", "display_name": "heavyLime", "link": "https://stackoverflow.com/users/4787715/heavylime"}, "reply_to_user": {"reputation": 7180, "user_id": 2666212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874561e399041a45c82c2ca6652400b6?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2666212/mike"}, "edited": false, "score": 0, "creation_date": 1467272267, "post_id": 38110837, "comment_id": 63666024, "body": "@Mike Yes, quite probably, but what exactly could be wrong? I just installed everything with apt-get install X"}, {"owner": {"reputation": 11, "user_id": 4787715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed34b86d4d6e5a352d0aa8565ac46101?s=128&d=identicon&r=PG&f=1", "display_name": "heavyLime", "link": "https://stackoverflow.com/users/4787715/heavylime"}, "edited": false, "score": 0, "creation_date": 1467272833, "post_id": 38110837, "comment_id": 63666362, "body": "To correct my first comment: I forgot the &quot;without the&quot; at the beginning of the quote"}], "answers": [{"comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1467303434, "post_id": 38118238, "comment_id": 63688226, "body": "You have full control over what kit you&#39;re currently building your project with. If you have multiple Qt versions installed, you can add each one to Qt creator as its own kit, and you can select what kits you want to make available to build the project with. What you describe should never be a problem. E.g. I&#39;m building multiple projects with multiple versions of Qt - some are Qt 4, some are Qt 5."}], "tags": [], "owner": {"reputation": 11, "user_id": 4787715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed34b86d4d6e5a352d0aa8565ac46101?s=128&d=identicon&r=PG&f=1", "display_name": "heavyLime", "link": "https://stackoverflow.com/users/4787715/heavylime"}, "is_accepted": false, "score": 1, "last_activity_date": 1467276691, "creation_date": 1467276691, "answer_id": 38118238, "question_id": 38110837, "link": "https://stackoverflow.com/questions/38110837/qt-creator-4-cannot-find-qcamera/38118238#38118238", "title": "Qt creator 4 cannot find QCamera", "body": "<p>Ubuntu 14.04 with qt5-base, qtcreator and qtmultimedia5-dev recognizes it. And there was an error in the ui mainwindow.h which occurs, if you use a qt4 project with qt5. So it used qt4 on Debian, even though qt5 is installed. But I have no idea how I can enforce qt5 in Qt Creator. So it seems to be a Qt Creator problem. This is actually no direct solution, but it works now (for me). But if anyone knows how to enforce qt5, I would appriciate it. Because Ubuntu is only a workaround</p>\n"}], "owner": {"reputation": 11, "user_id": 4787715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed34b86d4d6e5a352d0aa8565ac46101?s=128&d=identicon&r=PG&f=1", "display_name": "heavyLime", "link": "https://stackoverflow.com/users/4787715/heavylime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1397, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467276691, "creation_date": 1467237952, "question_id": 38110837, "link": "https://stackoverflow.com/questions/38110837/qt-creator-4-cannot-find-qcamera", "title": "Qt creator 4 cannot find QCamera", "body": "<p>I want to use QCamera, but Qt Creator 4.0.1 with Qt 5.6.1 says that such files do not exist, when I'm trying to include it:</p>\n\n<pre><code>#include &lt;QtMultimedia/QCamera&gt;\n</code></pre>\n\n<p>I've tried it also without the QtMultimedia/ beforehand. And also autocomplition menu.\nMy System is Debian Testing. This is a C++11 project.\nMy Project.pro file looks like this:</p>\n\n<pre><code>    QT       += core gui opengl multimedia\n\n    greaterThan(QT_MAJOR_VERSION, 4): QT += widgets\n\n    TARGET = Classifier\n    TEMPLATE = app\n\n    QMAKE_CXXFLAGS += -std=c++11\n    [..]\n</code></pre>\n\n<p>I have deleted QT += multimediawidgets, because QT warns, that it is unknown.\nAlthough libqt5multimediawidgets5 is installed. Or do I need more packages for that? \nI have tried the following:</p>\n\n<ul>\n<li>I have rerun qmake, </li>\n<li>Closed Qt Creator, deleted Project.pro.user and reconfigured the project</li>\n<li>Checked if all packages are installed - I hope so. qtmultimedia5-dev qt5base-dev. And libqt5multimediawidgets5 ... Would be to long, to list all, which does not mean, that I have all necessary ones.</li>\n<li>Added the options QT_SELECT=qt5 and QTDIR=/usr/share/qt5 qmake --version to the project.pro file. Found it in some stackoverflow answer where a user guessed you could use that to enforce qt5. Because I wasn't sure, if it doesn't use Qt4. But the options do not even get highlighted. But not marked as errors either.</li>\n<li>Tried to write 'class QCamera' to my mainwindow.h and include QCamera in the mainwindow.cpp file as seen in a Youtube tutorial</li>\n<li>Tried the Camera Example Project, which doesn't work either</li>\n<li>Checked, if Qt5 is available in the options menu</li>\n</ul>\n\n<p>As mentioned, I have also Qt4 stuff installed. I have also an old project, which was set up in Windows and uses QCamera. There Qt Creator cannot find it either.\nIf this does not work anyway on Debian for some reason, what is an alternative -compatible with Qt?</p>\n"}, {"tags": ["c++", "macros"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1467238064, "post_id": 38110826, "comment_id": 63655211, "body": "Macros are evil.  Make it an inlined function.  For example, macros allow you to pass &quot;hello&quot; as one parameter and &quot;Frog&quot; as the type."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1467238268, "post_id": 38110826, "comment_id": 63655301, "body": "BTW, use of curly braces, <code>{</code> and <code>}</code>, do not affect run-time and have negligible effect on compilation.  Use them.  It&#39;s a way to reduce defects."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1467238362, "post_id": 38110826, "comment_id": 63655339, "body": "I think the issue is substituting within a character literal.  You may have to pass the entire <code>scanf</code> format string."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1467239574, "post_id": 38110826, "comment_id": 63655790, "body": "Don&#39;t bother reading the second matrix. The series really went downhill after the first one."}], "answers": [{"tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": true, "score": 4, "last_activity_date": 1467238553, "last_edit_date": 1467238553, "creation_date": 1467238359, "answer_id": 38110913, "question_id": 38110826, "link": "https://stackoverflow.com/questions/38110826/macro-for-reading-matrix-c/38110913#38110913", "title": "Macro for reading matrix C++", "body": "<p>If you <em>really must</em> make a macro for this - which, as others have pointed out, is a Really Bad Idea and Not The Right Way To Do This - the issue that you're encountering is that macros are interpreted by the preprocessor, which treats line breaks as as the end of a macro replacement. To fix this, you'll need to introduce some escape sequences at the ends of the lines:</p>\n\n<pre><code>#define rm(A, m, n, type) \\\n    for(int i = 0; i &lt; m; i++) \\\n        for(int j = 0; j &lt; n; j++) \\\n            scanf(\"%\" #type, &amp;A[i][j]);\n</code></pre>\n\n<p>Notice that I've factored out your use of the token-pasting operator from the inside of the string, since the preprocessor doesn't fill in string literals for you, and instead opted to use the stringizing operator <code>#</code> to convert the type to a string literal. Since the compiler automatically concatenates adjacent string literals together, there's no need to paste anything. I should repeat that <em>this is a really bad idea</em> in that it hurts code readability and doesn't offer anything you can't already do with a regular C++ function.</p>\n\n<p>You've tagged this question as C++, though, so I should point out that <code>scanf</code> has all sorts of type safety issues that can come up, so it's almost certainly safer to use the <code>iostream</code> library, which for all its faults does catch a ton of possible errors at compile-time.</p>\n\n<p>Fundamentally, though, you shouldn't use macros for this. Just write a regular old function. Here's one way to do this, which has the added benefit that it automatically infers the sizes of arrays:</p>\n\n<pre><code>template &lt;typename T, size_t m, size_t n&gt;\nvoid readArray(T (&amp;array)[m][n], std::istream&amp; source = std::cin) {\n   for (size_t i = 0; i &lt; m; i++) {\n      for (size_t j = 0; j &lt; n; j++) {\n          source &gt;&gt; array[i][j];\n      }\n   }\n}\n</code></pre>\n\n<p>Now, you can say something like this:</p>\n\n<pre><code>double arr[137][42];\nreadArray(arr);\n</code></pre>\n\n<p>to read an array of <code>double</code>s from <code>cin</code>, or</p>\n\n<pre><code>int arr[5][5];\nifstream input(\"my-file.txt\");\nreadArray(arr, input);\n</code></pre>\n\n<p>to read an array of <code>int</code>s from an external file. This is type-safe and will raise a compiler error if you try reading in a case where the array size isn't defined or where the type can't be read. This prevents all sorts of possible problems. Compare this with your macro, where I could do something like this:</p>\n\n<pre><code>int arr[5][5];\nrm(arr, 6, 6, f);\n</code></pre>\n\n<p>Oops - I just used the wrong array size and the wrong <code>scanf</code> specifier. Any time you can offload work to the compiler that saves you from having to make code changes across lots of places, it's worth considering!</p>\n"}], "owner": {"reputation": 5719, "user_id": 5348875, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e050e66d97a3f54b0453533428088e6c?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5348875/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 479, "favorite_count": 1, "accepted_answer_id": 38110913, "answer_count": 1, "score": 1, "last_activity_date": 1467238553, "creation_date": 1467237879, "question_id": 38110826, "link": "https://stackoverflow.com/questions/38110826/macro-for-reading-matrix-c", "title": "Macro for reading matrix C++", "body": "<p>I'm trying to define macros to read and print matrices in C++, but I'm trying something different, and it's not working:</p>\n\n<pre><code>#define rm(A, m, n, type) \n    for(int i = 0; i &lt; m; i++) \n        for(int j = 0; j &lt; n; j++) \n            scanf(\"%##type##\", &amp;A[i][j]);\n</code></pre>\n\n<p>A is the matrix (int or char)</p>\n\n<p>I want to write d or c to read int or char, but this code isn't working and I don't even know why, I just tried to use the concat ## symbol to create the string that scanf receive as argument, but it bugs.</p>\n\n<p>My questions are:</p>\n\n<p>1 - why is it wrong?</p>\n\n<p>2 - how can I make this macro work fine? \n(if necessary, the solution may contain 1 or 2 macro declarations, but short ones, otherwise I wouldn't ask and I could just create a macro for int and other for char.</p>\n\n<p>PS: this macro is written one line, the algorithm above is just to show what it does. </p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "bitmap", "freetype", "text-rendering", "glyph"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1467238845, "post_id": 38110722, "comment_id": 63655540, "body": "What is the value of m_iPitch?"}, {"owner": {"reputation": 3, "user_id": 6530442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ca4971af906b5547164d2ccdbc34da1?s=128&d=identicon&r=PG&f=1", "display_name": "DEADspy", "link": "https://stackoverflow.com/users/6530442/deadspy"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1467239027, "post_id": 38110722, "comment_id": 63655604, "body": "the value of m_iPitch is in this case 1024, and the one of m_iRows is 512"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6530442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ca4971af906b5547164d2ccdbc34da1?s=128&d=identicon&r=PG&f=1", "display_name": "DEADspy", "link": "https://stackoverflow.com/users/6530442/deadspy"}, "edited": false, "score": 0, "creation_date": 1467239458, "post_id": 38111057, "comment_id": 63655750, "body": "Ahh, alright, the glyphs do take shape, it does look legit now, well there is the other problem that my color format does not match with the bitmap: <a href=\"http://i.imgur.com/NLjeWfq.png\" rel=\"nofollow noreferrer\">i.imgur.com/NLjeWfq.png</a> ;;; god dammit, that was emberassing ~.~ a big thanks! ;)"}], "tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": true, "score": 0, "last_activity_date": 1467239144, "creation_date": 1467239144, "answer_id": 38111057, "question_id": 38110722, "link": "https://stackoverflow.com/questions/38110722/writing-correct-bitmap-file-results/38111057#38111057", "title": "Writing correct bitmap file results", "body": "<p>This calculation is wrong:</p>\n\n<pre><code>&amp;m_pBuffer [ ( m_iPitch * top ) + ( left * bytes_per_px ) ]\n</code></pre>\n\n<p>It should be:</p>\n\n<pre><code>&amp;m_pBuffer [ ( ( m_iPitch * top ) + left ) * bytes_per_px ]\n</code></pre>\n\n<p>Each row is <code>m_iPitch * bytes_per_px</code> bytes wide. If you just multiply by <code>m_iPitch</code>, then your \"rows\" are overlapping each other.</p>\n"}], "owner": {"reputation": 3, "user_id": 6530442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ca4971af906b5547164d2ccdbc34da1?s=128&d=identicon&r=PG&f=1", "display_name": "DEADspy", "link": "https://stackoverflow.com/users/6530442/deadspy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 38111057, "answer_count": 1, "score": 0, "last_activity_date": 1468392105, "creation_date": 1467237343, "last_edit_date": 1468392105, "question_id": 38110722, "link": "https://stackoverflow.com/questions/38110722/writing-correct-bitmap-file-results", "title": "Writing correct bitmap file results", "body": "<h2>Story:</h2>\n\n<blockquote>\n  <p>I have been creating a font renderer for directx9 to draw text, The actual problem got caused by another problem, I was wondering why the texture didnt draw anything (my wrong bitmap), so i tried to copy the bitmap into a file and realized the current problem. <em>yay</em></p>\n</blockquote>\n\n<h2>Question:</h2>\n\n<blockquote>\n  <p>What exactly am i doing wrong? I mean, i just simply copy my CURRENT pixel array in my bitmap wrapper to a file with some other content ( the bitmap infos ), i have seen in an hex editor that there are colors after the bitmap headers.</p>\n</blockquote>\n\n<h2>Pictures:</h2>\n\n<p><a href=\"http://i.stack.imgur.com/bHw6e.png\" rel=\"nofollow\">This is the result of the bitmap which i have written to the filesystem</a></p>\n\n<h2>Code:</h2>\n\n<p>CFont::DrawGlyphToBitmap</p>\n\n<blockquote>\n  <p>This code does copy from a bitmap of an <a href=\"https://www.freetype.org/\" rel=\"nofollow\">freetype</a> glyph ( which have by the way a pixel format of FT_PIXEL_MODE_BGRA ) to the\n  font bitmap wrapper class instance</p>\n</blockquote>\n\n<pre><code>void CFont::DrawGlyphToBitmap ( unsigned char * buffer, int rows, int pitch,     int destx, int desty, int format )\n{\n    CColor color = CColor ( 0 );\n\n\n    for ( int row = 0; row &lt; rows; row++ )\n    {\n        int x = 0;\n        for ( int left = 0; left &lt; pitch * 3; left += 3,x++ )\n        {\n            int y = row;\n            unsigned char* cursor = &amp;buffer [ ( row*pitch ) + left ];\n            color.SetAlphab ( 255 );\n            color.SetBlueb ( cursor [ 0 ] );\n            color.SetGreenb ( cursor [ 1 ] );\n            color.SetRedb ( cursor [ 2 ] );\n            m_pBitmap-&gt;SetPixelColor ( color, destx + x, desty + y );\n        }\n    }\n}\n</code></pre>\n\n<p>CBitmap::SetPixelColor</p>\n\n<blockquote>\n  <p>This code does set a single \"pixel\" / color in its local pixel storage.</p>\n</blockquote>\n\n<pre><code>void CBitmap::SetPixelColor ( const CColor &amp; color, int left, int top )\n{\n    unsigned char* cursor = &amp;m_pBuffer [ ( m_iPitch * top ) + ( left *     bytes_per_px ) ];\n    cursor [ px_red ] = color.GetRedb ( );\n    cursor [ px_green ] = color.GetGreenb ( );\n    cursor [ px_blue ] = color.GetBlueb ( );\n    if ( px_alpha != 0xFFFFFFFF )\n        cursor [ px_alpha ] = color.GetAlphab ( );\n}\n</code></pre>\n\n<p>CBitmap::Save </p>\n\n<blockquote>\n  <p>Heres a outcut of the function which writes\n  the bitmap to the file system, it does shows how \n  i initialize the bitmap info container ( file header &amp; \"dib\" header )</p>\n</blockquote>\n\n<pre><code>void CBitmap::Save ( const std::wstring &amp; path )\n{\n\n    BITMAPFILEHEADER bitmap_header;\n    BITMAPV5HEADER bitmap_info;\n\n    memset ( &amp;bitmap_header, 0, sizeof ( BITMAPFILEHEADER ) );\n    memset ( &amp;bitmap_info, 0, /**/sizeof ( BITMAPV5HEADER ) );\n\n    bitmap_header.bfType = 'B' + ( 'M' &lt;&lt; 8 );//0x424D;\n    bitmap_header.bfSize = bitmap_header.bfOffBits + ( m_iRows * m_iPitch ) * 3;\n    bitmap_header.bfOffBits = sizeof ( BITMAPFILEHEADER ) + sizeof ( BITMAPV5HEADER );\n\n    double _1px_p_m = 0.0002645833333333f;\n\n    bitmap_info.bV5Size = sizeof ( BITMAPV5HEADER );\n    bitmap_info.bV5Width = m_iPitch;\n    bitmap_info.bV5Height = m_iRows;\n    bitmap_info.bV5Planes = 1;\n    bitmap_info.bV5BitCount = bytes_per_px * 8;\n    bitmap_info.bV5Compression = BI_BITFIELDS;\n    bitmap_info.bV5SizeImage = ( m_iPitch * m_iRows ) * 3;\n    bitmap_info.bV5XPelsPerMeter = m_iPitch * _1px_p_m;\n    bitmap_info.bV5YPelsPerMeter = m_iRows * _1px_p_m;\n    bitmap_info.bV5ClrUsed = 0;\n    bitmap_info.bV5ClrImportant = 0;\n    bitmap_info.bV5RedMask = 0xFF000000;\n    bitmap_info.bV5GreenMask = 0x00FF0000;\n    bitmap_info.bV5BlueMask = 0x0000FF00;\n    bitmap_info.bV5AlphaMask = 0x000000FF;\n    bitmap_info.bV5CSType = LCS_WINDOWS_COLOR_SPACE;\n\n    ...\n     -&gt; the other part does just write those structures &amp; my px array to file\n\n}\n</code></pre>\n\n<p>CBitmap \"useful\" macros</p>\n\n<blockquote>\n  <p>i made macros for the pixel array because ive \"changed\" the\n  pixel \"format\" many times -> to make it \"easier\" i have made those macros which make it easier todo that</p>\n</blockquote>\n\n<pre><code>#define bytes_per_px 4\n#define px_red       0\n#define px_green     1\n#define px_blue      2\n#define px_alpha     3\n</code></pre>\n\n<h2>Notes</h2>\n\n<ul>\n<li>My bitmap has a color order of RGBA</li>\n</ul>\n"}, {"tags": ["c++", "mpi", "boost-mpi"], "answers": [{"tags": [], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "is_accepted": true, "score": 1, "last_activity_date": 1467236884, "creation_date": 1467236884, "answer_id": 38110617, "question_id": 38110467, "link": "https://stackoverflow.com/questions/38110467/how-to-use-mpi-on-a-real-time-streaming-application/38110617#38110617", "title": "How to use mpi on a real-time streaming application?", "body": "<p>If one of the <code>MPI_COMM_WORLD</code> processes dies,  there is no way to properly continue the application. Sending a halt command and keeping the sender alive is absolutely what you should do.</p>\n\n<p>Theoretically, you could use one-sided communication in MPI or a timeout mechanism (using <code>irecv</code> / <code>request::cancel</code>), but I don't see any way this would make sense..</p>\n"}], "owner": {"reputation": 107, "user_id": 6199827, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10208927311157072/picture?type=large", "display_name": "Mehrdad ", "link": "https://stackoverflow.com/users/6199827/mehrdad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "accepted_answer_id": 38110617, "answer_count": 1, "score": 0, "last_activity_date": 1467236905, "creation_date": 1467236232, "last_edit_date": 1467236905, "question_id": 38110467, "link": "https://stackoverflow.com/questions/38110467/how-to-use-mpi-on-a-real-time-streaming-application", "title": "How to use mpi on a real-time streaming application?", "body": "<p>I have 2 processes, one process is streaming out packets to another until an internal interrupt halt the process (the process which sends). I want to have a mechanism that the other process can receive until there is any message on this channel to be received. </p>\n\n<p>is there any way to do that other than transferring the halt command as a message as well? \nI prefer not to send finish/interrupt as another message because there could be scenarios that the interrupt can kill the sender process.</p>\n\n<pre><code>if (world.rank() != 0) {\n  while (!interrupt())\n    world.send(ROOT, ID, a, bufferSize);\n  // I prefer not to send finish/interrupt as another message\n }\n else {\n  while (/*there is any packet to be received*/)\n    world.recv(boost::mpi::any_source, ID, a, bufferSize);\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "design-patterns", "state"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 4, "creation_date": 1467236216, "post_id": 38110434, "comment_id": 63654410, "body": "Due to &quot;This is my first time dealing with threading&quot;: Do not detach a thread!"}, {"owner": {"reputation": 69, "user_id": 6470572, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7zSO5.png?s=128&g=1", "display_name": "network drift", "link": "https://stackoverflow.com/users/6470572/network-drift"}, "edited": false, "score": 0, "creation_date": 1467236325, "post_id": 38110434, "comment_id": 63654481, "body": "@DieterL&#252;cking How would I go about properly using the join function?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1467236597, "post_id": 38110434, "comment_id": 63654596, "body": "The parameters required depend on <code>Foo::FooFunc</code>, to which we are unfortunately not privy. I fear you may have reduced your example a bit too much. If you have a stack of different classes with different possible arguments you may be able to make use of <a href=\"http://en.cppreference.com/w/cpp/utility/functional/bind\" rel=\"nofollow noreferrer\">std::bind</a>, to pre-package the function with the arguments."}, {"owner": {"reputation": 69, "user_id": 6470572, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7zSO5.png?s=128&g=1", "display_name": "network drift", "link": "https://stackoverflow.com/users/6470572/network-drift"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1467236903, "post_id": 38110434, "comment_id": 63654717, "body": "@user4581301 My apologies - circumstances require me to heavily trivialize. Thank you for the advice. <code>Foo::FooFunc</code> takes a reference to a <code>std::list</code> object. <code>Bar::BarFunc</code> takes no parameters. I&#39;ll give bind a look see."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1467237141, "post_id": 38110434, "comment_id": 63654820, "body": "Is it okay if your <code>Bar</code> class goes out of scope while your threads are running? Otherwise you&#39;ll need to hang onto those threads and at a minimum <code>.join()</code> them in your destructor."}, {"owner": {"reputation": 69, "user_id": 6470572, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7zSO5.png?s=128&g=1", "display_name": "network drift", "link": "https://stackoverflow.com/users/6470572/network-drift"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1467237662, "post_id": 38110434, "comment_id": 63655050, "body": "@AndyG Yes. <code>BarFunc</code> returns a call to the object&#39;s updated state&#39;s <code>BarFunc</code>. <code>FooFunc</code> affects a data structure that is not local to any state&#39;s <code>BarFunc</code>. I hope that makes sense."}, {"owner": {"reputation": 140, "user_id": 6492077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/217a514a2dfa23d1810cc1982d62b38c?s=128&d=identicon&r=PG&f=1", "display_name": "mkal", "link": "https://stackoverflow.com/users/6492077/mkal"}, "edited": false, "score": 0, "creation_date": 1467238569, "post_id": 38110434, "comment_id": 63655430, "body": "You can check out lambda closures as an alternative to <code>bind</code>. In either case, pay careful attention to the lifetimes of the objects you&#39;re capturing. Also, you said &quot;<i>Bar::BarFunc takes no parameters</i>&quot;, but unless <code>Bar::BarFunc</code> is declared <code>static</code>, it implicitly takes a parameter of <code>Bar*</code> (a <code>this</code> pointer to the object that the function was called on)."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 6470572, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7zSO5.png?s=128&g=1", "display_name": "network drift", "link": "https://stackoverflow.com/users/6470572/network-drift"}, "edited": false, "score": 0, "creation_date": 1467301220, "post_id": 38111180, "comment_id": 63686751, "body": "Thank you. This helped me see a better way to implement the thread: the object only needs to exist during the thread&#39;s lifetime. I&#39;ll instantiate the object and join the thread by destroying the object."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "is_accepted": true, "score": 1, "last_activity_date": 1467239895, "creation_date": 1467239895, "answer_id": 38111180, "question_id": 38110434, "link": "https://stackoverflow.com/questions/38110434/starting-a-thread-from-a-member-function-while-inside-another-classs-member-fun/38111180#38111180", "title": "Starting a thread from a member function while inside another class&#39;s member function", "body": "<p>You likely have to manage two instances: </p>\n\n<ul>\n<li>An instance of <code>Foo</code></li>\n<li>A thread executing a member function of <code>Foo</code></li>\n</ul>\n\n<p>That leads to the following sketch of a class <code>Bar</code>:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\nstruct Foo{\n    void print(std::string s) { // by value!\n        std::cout &lt;&lt; s;\n    }\n};\n\nclass Bar{\n    public:\n    void hello() {\n        // Ensure the thread is not running \n        // (Only one thread is supported in this example)\n        if( ! foo_thread.joinable()) {\n            // Move a newly constructed thread to the class member.\n            foo_thread = std::thread(\n                &amp;Foo::print,        // pointer to member function of Foo\n                &amp;foo,               // pointer to the instance of Foo\n                \"hello\\n\"           // arguments by value\n            );\n        }\n    }\n\n    ~Bar() {\n        // Ensure the thread has been started.\n        if(foo_thread.joinable()) {\n            // This will block until the thread has finished.\n            foo_thread.join();\n        }\n    }\n\n    private:\n    Foo foo;\n    std::thread foo_thread;\n};\n\nint main()\n{\n    Bar bar;\n    bar.hello();\n}\n</code></pre>\n\n<p>Note: The thread is not detached. A detached (not maintained properly) running thread, will get killed at end of the program and resources used by that thread (e.g.: file handles) might not be returned to the system.</p>\n"}], "owner": {"reputation": 69, "user_id": 6470572, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7zSO5.png?s=128&g=1", "display_name": "network drift", "link": "https://stackoverflow.com/users/6470572/network-drift"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 0, "accepted_answer_id": 38111180, "answer_count": 1, "score": 1, "last_activity_date": 1467239895, "creation_date": 1467236117, "last_edit_date": 1495540739, "question_id": 38110434, "link": "https://stackoverflow.com/questions/38110434/starting-a-thread-from-a-member-function-while-inside-another-classs-member-fun", "title": "Starting a thread from a member function while inside another class&#39;s member function", "body": "<p>I need to start a thread that calls a public member function of the class Foo while inside of a public function that belongs to the class Bar. How do I achieve this?</p>\n\n<p>I have tried the following (made trivial):</p>\n\n<pre><code>void Bar::BarFunc()\n{ \n    // Do some BarFunc stuff \n\n    // Start a thread that needs to do stuff independently of BarFunc\n    std::thread t(&amp;Foo::FooFunc, FooFunc params,..,.., ???);\n    t.detach();\n\n    return;\n}\n</code></pre>\n\n<p>This is my first time dealing with threading and the actual problem is a little more complex - BarFunc is a virtual function of a State class, with n-concrete classes implementing the different states my application can exist in, hence the question. I am not sure what to put as the last parameter, if anything. I have looked at <a href=\"https://stackoverflow.com/questions/10673585/start-thread-with-member-function\">this</a> answer but cannot discern which syntax to use, if any of them even apply.</p>\n\n<p>Finally, if this is bad practice all together, I would be grateful for any design advice. </p>\n"}, {"tags": ["c++", "gcc", "c++14"], "comments": [{"owner": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 2, "creation_date": 1467238188, "post_id": 38110416, "comment_id": 63655272, "body": "See <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=54021\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=54021</a>.  Looks like they explicitly handle <code>__builtin_constant_p</code> when evaluating <code>constexpr</code>s.  Probably not documented."}, {"owner": {"reputation": 6093, "user_id": 2189500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/109f747845a9ce762a1fff72eb8cf6f3?s=128&d=identicon&r=PG", "display_name": "David Wohlferd", "link": "https://stackoverflow.com/users/2189500/david-wohlferd"}, "edited": false, "score": 0, "creation_date": 1467238380, "post_id": 38110416, "comment_id": 63655349, "body": "No thoughts on __builtin_constant_p.  Have you tried gcc-help@gcc.gnu.org?  Also, how about <code>asm(&quot;addl %1, %0\\n\\t&quot; &quot;jno 1f\\n\\t&quot; &quot;movl $0x7fffffff, %0\\n\\t&quot; &quot;adcl $0, %0\\n\\t&quot; &quot;1:&quot; : &quot;=r&quot;(result) : &quot;0&quot;(x), &quot;rmi&quot;(y) : &quot;cc&quot;);</code> or better yet <code>if (__builtin_add_overflow(x, y, &amp;result)) { if (result &lt; 0) return 0x7fffffff; else return 0x80000000; } return result;</code>?"}, {"owner": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "reply_to_user": {"reputation": 6093, "user_id": 2189500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/109f747845a9ce762a1fff72eb8cf6f3?s=128&d=identicon&r=PG", "display_name": "David Wohlferd", "link": "https://stackoverflow.com/users/2189500/david-wohlferd"}, "edited": false, "score": 0, "creation_date": 1467239550, "post_id": 38110416, "comment_id": 63655783, "body": "@DavidWohlferd As I indicated in the question, I&#39;m not that interested in optimizing the asm - if I were, I&#39;d probably just use the corresponding SSE intrinsic."}], "owner": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 654, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1467237804, "creation_date": 1467236028, "question_id": 38110416, "link": "https://stackoverflow.com/questions/38110416/does-gccs-builtin-constant-p-always-return-1-while-evaluating-a-core-constant", "title": "Does gcc&#39;s __builtin_constant_p always return 1 while evaluating a core constant expression?", "body": "<p>Here's the basic example I've been playing around with:</p>\n\n<pre><code>#include &lt;limits&gt;\n\nconstexpr inline int satadd_ce(int x, int y) {\n    if (x &gt;= 0 &amp;&amp; y &gt;= std::numeric_limits&lt;int&gt;::max() - x)\n        return std::numeric_limits&lt;int&gt;::max();\n    else if (x &lt; 0 &amp;&amp; y &lt;= std::numeric_limits&lt;int&gt;::min() - x)\n        return std::numeric_limits&lt;int&gt;::min();\n    else\n        return x + y;\n}\n\n[[gnu::const]] inline int satadd_asm(int x, int y) {\n    int result;\n    __asm__(\"addl %2, %0\\n\\t\"\n            \"jno 2f\\n\\t\"\n            \"jl 1f\\n\\t\"\n            \"movl $0x7fffffff, %0\\n\\t\"\n            \"jmp 2f\\n\\t\"\n            \"1: movl $0x80000000, %0\\n\\t\"\n            \"2:\"\n            : \"=r\"(result) : \"0\"(x), \"rmi\"(y));\n    return result;\n}    \n\nconstexpr inline int satadd(int x, int y) {\n    if (__builtin_constant_p(x) &amp;&amp; __builtin_constant_p(y))\n        return satadd_ce(x, y);\n    else\n        return satadd_asm(x, y);\n}\n\nextern constexpr int n1 = satadd(2000000000, 1000000000);\nextern constexpr int n2 = satadd(2000000000, -1000000000);\nextern constexpr int n3 = satadd(-2000000000, 1000000000);\nextern constexpr int n4 = satadd(-2000000000, -1000000000);\nextern constexpr int n5 = satadd(satadd(2000000000, 1000000000), -1000000000);\n</code></pre>\n\n<p>The <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html#index-g_t_005f_005fbuiltin_005fconstant_005fp-4249\" rel=\"nofollow\">GCC documentation</a> led me to believe this might not work when compiling with -O0:</p>\n\n<blockquote>\n  <p>However, if you use it in an inlined function and pass an argument of the function as the argument to the built-in, GCC never returns 1 when you call the inline function with a string constant or compound literal (see Compound Literals) <em>and does not return 1 when you pass a constant numeric value to the inline function unless you specify the -O option</em>. (emphasis mine)</p>\n</blockquote>\n\n<p>But in practice, the above code compiles fine with <code>g++-6 -O0</code>.  So is the GCC documentation possibly out of date, or are there other possible problems where <code>satadd</code> wouldn't work in a core constant expression but calling <code>satadd_ce</code> explicitly would?</p>\n\n<p>(By the way, I do seem to remember some SSE version has dedicated saturated arithmetic instructions - but that's not really the point here, I just wanted to experiment with whether inline asm and a compile-time alternative could be combined in a single function callable both from normal code and core constant expressions.)</p>\n\n<p>(Also, note that asm statements are explicitly forbidden to appear directly in <code>constexpr</code> functions, so at least <code>satadd_asm</code> must be a separate function.  Though if C++17's <code>constexpr if</code> were implemented in gcc and accepted <code>__builtin_constant_p</code> then that could potentially work.)</p>\n"}, {"tags": ["c++", "boost", "containers", "shared-ptr"], "comments": [{"owner": {"reputation": 17902, "user_id": 116273, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cc60634738ece15d1de4738110c76aa8?s=128&d=identicon&r=PG", "display_name": "erenon", "link": "https://stackoverflow.com/users/116273/erenon"}, "edited": false, "score": 2, "creation_date": 1467236407, "post_id": 38110404, "comment_id": 63654507, "body": "What is <code>A</code>? What is <code>pNewA-&gt;MyString()</code> ?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1467279146, "post_id": 38110404, "comment_id": 63670382, "body": "I suspect <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">Undefined Behaviour</a>. Try to reproduce your problem in a smaller sample. Gradually eliminate sources of the error until it disappears."}, {"owner": {"reputation": 69, "user_id": 2387434, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9b94308487d109dc8563e82531f2da1c?s=128&d=identicon&r=PG", "display_name": "Yi.He", "link": "https://stackoverflow.com/users/2387434/yi-he"}, "edited": false, "score": 0, "creation_date": 1467292382, "post_id": 38110404, "comment_id": 63679586, "body": "A is just a structure with a string member and two integer member."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1467237404, "post_id": 38110601, "comment_id": 63654943, "body": "<code>std::shared_ptr</code> has a copy constructor, so <code>std::move()</code> should not be necessary when pushing a <code>std::shared_ptr</code> into a container. On the other hand, if you were using <code>std::unique_ptr</code> instead then you would need the <code>std::move()</code> since <code>std::unique_ptr</code> does not have a copy constructor but does have a move constructor. Either way, if you really want to push a new object, consider using <code>emplace_back()</code> instead of <code>push_back()</code>."}, {"owner": {"reputation": 764, "user_id": 6301103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf0769f719c19bc3497f3472c18fed8?s=128&d=identicon&r=PG&f=1", "display_name": "jaaq", "link": "https://stackoverflow.com/users/6301103/jaaq"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1467239269, "post_id": 38110601, "comment_id": 63655690, "body": "didnt look into c++14 yet, so emplace_back() is new for me. Thanks!"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1467239457, "post_id": 38110601, "comment_id": 63655749, "body": "<code>emplace_back()</code> was added in C++11, same as <code>std::shared_ptr</code> and <code>std::make_shared()</code>."}, {"owner": {"reputation": 30739, "user_id": 1804599, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/v91P3.jpg?s=128&g=1", "display_name": "rightfold", "link": "https://stackoverflow.com/users/1804599/rightfold"}, "edited": false, "score": 0, "creation_date": 1467284478, "post_id": 38110601, "comment_id": 63674134, "body": "<code>emplace_back</code> has no benefit if you&#39;re using a move or copy ctor"}, {"owner": {"reputation": 69, "user_id": 2387434, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9b94308487d109dc8563e82531f2da1c?s=128&d=identicon&r=PG", "display_name": "Yi.He", "link": "https://stackoverflow.com/users/2387434/yi-he"}, "edited": false, "score": 1, "creation_date": 1467292258, "post_id": 38110601, "comment_id": 63679501, "body": "I had to use boost in the project because I have to link to another library without c++11 support. Boost version should not have much difference than std version, at least I think?"}], "tags": [], "owner": {"reputation": 764, "user_id": 6301103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf0769f719c19bc3497f3472c18fed8?s=128&d=identicon&r=PG&f=1", "display_name": "jaaq", "link": "https://stackoverflow.com/users/6301103/jaaq"}, "is_accepted": false, "score": -3, "last_activity_date": 1467236830, "creation_date": 1467236830, "answer_id": 38110601, "question_id": 38110404, "link": "https://stackoverflow.com/questions/38110404/shared-ptr-failed-to-be-pushed-to-vector/38110601#38110601", "title": "shared_ptr failed to be pushed to vector", "body": "<p>Not sure why you use the boost librarys there(not too familiar with them) but shared pointers are also in the standard lib memory</p>\n\n<pre><code>#include &lt;memory&gt;\n</code></pre>\n\n<p>Most likely it is a problem with the ownership of the shared pointer object. If written with standard libs the correct code would look something like this:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;memory&gt;\n\n//...\n\nstd::vector&lt;std::shared_pointer&lt;A&gt; &gt; vecA;\n\n//version 1\nstd::shared_ptr&lt;A&gt; pNewA = std::make_shared&lt;A&gt;(s);\npNewA-&gt;MyString();\nvecA.push_back(std::move(pNewA)); //std::move moves ownership to vector\n\n//or alternativeley\nvecA.push_back(std::shared_pointer&lt;A&gt;(new class A(s)));\n</code></pre>\n\n<p>or something along those lines..</p>\n\n<p>HTH</p>\n"}], "owner": {"reputation": 69, "user_id": 2387434, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9b94308487d109dc8563e82531f2da1c?s=128&d=identicon&r=PG", "display_name": "Yi.He", "link": "https://stackoverflow.com/users/2387434/yi-he"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 620, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467298785, "creation_date": 1467235971, "last_edit_date": 1467298785, "question_id": 38110404, "link": "https://stackoverflow.com/questions/38110404/shared-ptr-failed-to-be-pushed-to-vector", "title": "shared_ptr failed to be pushed to vector", "body": "<p>I have vector of boost shared_ptr, however, when I push to the end of locally made new shared_ptr, it fails. Can anybody tell me what is wrong with following code?</p>\n\n<pre><code>std::vector&lt;boost::shared_ptr&lt; A &gt; &gt; vecA;\n\nBOOST_FOREACH(const std::string&amp; s, vecStrings)\n{\n   boost::shared_ptr&lt;A&gt; pNewA = boost::make_shared&lt;A&gt;(s);\n   pNewA-&gt;MyString(); //OK\n   vecA.push_back(pNewA); //throw error Assertion `px != 0' failed\n}\n</code></pre>\n\n<p>UPDATE:\nIt seems like not the problem of pushing, but I used a reference to shared_ptr.</p>\n\n<pre><code> for(int i=0, n=vecA.size(); i &lt;n; i++)\n{\n\n    //use pA\n     boost::shared_ptr&amp; pA = vecA[i];\n     vecA.push_back(pA);\n    //will core dump at the end of loop because pA changed due to vector enlarge\n}\n</code></pre>\n"}, {"tags": ["c++", "memory", "hook"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1467237150, "post_id": 38110355, "comment_id": 63654829, "body": "<code>GetProcAddress</code> returns an address. In a 64 bit world this address is going to be 64 bits. <code>DWORD</code> is 32 bits. Setting yourself up for a load of fail here, Hoss."}, {"owner": {"reputation": 835, "user_id": 5642380, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7c1bee24162d961dd94950c6235bd35a?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/5642380/j-doe"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1467237389, "post_id": 38110355, "comment_id": 63654934, "body": "@user4581301 I&#39;ve totally missed that, since I&#39;ve replaced all others already... Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 835, "user_id": 5642380, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7c1bee24162d961dd94950c6235bd35a?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/5642380/j-doe"}, "edited": false, "score": 0, "creation_date": 1467237438, "post_id": 38110662, "comment_id": 63654958, "body": "The size of stub is 6 bytes, why would it be 4 byte variable?"}, {"owner": {"reputation": 1103, "user_id": 4200424, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1bb83ff2ad5dcb60ee8e408792526e49?s=128&d=identicon&r=PG&f=1", "display_name": "bennji_of_the_overflow", "link": "https://stackoverflow.com/users/4200424/bennji-of-the-overflow"}, "reply_to_user": {"reputation": 835, "user_id": 5642380, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7c1bee24162d961dd94950c6235bd35a?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/5642380/j-doe"}, "edited": false, "score": 0, "creation_date": 1467237528, "post_id": 38110662, "comment_id": 63655000, "body": "@J.Doe - you are copying it to the address of pSource. pSource is a DWORD which is 4 bytes. That&#39;s why the stack is corrupted."}, {"owner": {"reputation": 835, "user_id": 5642380, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7c1bee24162d961dd94950c6235bd35a?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/5642380/j-doe"}, "edited": false, "score": 0, "creation_date": 1467237868, "post_id": 38110662, "comment_id": 63655134, "body": "I&#39;m copying it to the memory of address, not to DWORD."}, {"owner": {"reputation": 1103, "user_id": 4200424, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1bb83ff2ad5dcb60ee8e408792526e49?s=128&d=identicon&r=PG&f=1", "display_name": "bennji_of_the_overflow", "link": "https://stackoverflow.com/users/4200424/bennji-of-the-overflow"}, "reply_to_user": {"reputation": 835, "user_id": 5642380, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7c1bee24162d961dd94950c6235bd35a?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/5642380/j-doe"}, "edited": false, "score": 0, "creation_date": 1467238211, "post_id": 38110662, "comment_id": 63655280, "body": "pSource is a DWORD which has been allocated 4 bytes of memory on the stack. You are copying 6 bytes to that same address. That means you are filling up the 4 bytes it was allocated, and then overwriting the next 2 bytes of memory as well."}, {"owner": {"reputation": 835, "user_id": 5642380, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7c1bee24162d961dd94950c6235bd35a?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/5642380/j-doe"}, "edited": false, "score": 0, "creation_date": 1467238406, "post_id": 38110662, "comment_id": 63655360, "body": "Ah! To write to mem. I should place a cast it being a pointer right? (LPVOID)pSource."}, {"owner": {"reputation": 1103, "user_id": 4200424, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1bb83ff2ad5dcb60ee8e408792526e49?s=128&d=identicon&r=PG&f=1", "display_name": "bennji_of_the_overflow", "link": "https://stackoverflow.com/users/4200424/bennji-of-the-overflow"}, "reply_to_user": {"reputation": 835, "user_id": 5642380, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7c1bee24162d961dd94950c6235bd35a?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/5642380/j-doe"}, "edited": false, "score": 0, "creation_date": 1467238659, "post_id": 38110662, "comment_id": 63655470, "body": "No that won&#39;t help you. pSource is still allocated on the stack, and you simply can&#39;t write to the memory outside of the 4 bytes to which it is allocated. Furthermore, you have additional problems because GetProcAddress is going to return you 8 bytes. You are then casting that to 4 bytes and then trying to overwrite it with 6 bytes."}, {"owner": {"reputation": 1103, "user_id": 4200424, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1bb83ff2ad5dcb60ee8e408792526e49?s=128&d=identicon&r=PG&f=1", "display_name": "bennji_of_the_overflow", "link": "https://stackoverflow.com/users/4200424/bennji-of-the-overflow"}, "reply_to_user": {"reputation": 835, "user_id": 5642380, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7c1bee24162d961dd94950c6235bd35a?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/5642380/j-doe"}, "edited": false, "score": 0, "creation_date": 1467238756, "post_id": 38110662, "comment_id": 63655490, "body": "You first should fix the size of the variable holding your proc address. It should be a QWORD"}, {"owner": {"reputation": 835, "user_id": 5642380, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7c1bee24162d961dd94950c6235bd35a?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/5642380/j-doe"}, "reply_to_user": {"reputation": 1103, "user_id": 4200424, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1bb83ff2ad5dcb60ee8e408792526e49?s=128&d=identicon&r=PG&f=1", "display_name": "bennji_of_the_overflow", "link": "https://stackoverflow.com/users/4200424/bennji-of-the-overflow"}, "edited": false, "score": 0, "creation_date": 1467239013, "post_id": 38110662, "comment_id": 63655594, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/116025/discussion-between-j-doe-and-bennji-of-the-overflow\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 1103, "user_id": 4200424, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1bb83ff2ad5dcb60ee8e408792526e49?s=128&d=identicon&r=PG&f=1", "display_name": "bennji_of_the_overflow", "link": "https://stackoverflow.com/users/4200424/bennji-of-the-overflow"}, "is_accepted": false, "score": 0, "last_activity_date": 1467237148, "creation_date": 1467237148, "answer_id": 38110662, "question_id": 38110355, "link": "https://stackoverflow.com/questions/38110355/error-when-hooking-a-function-stack-around-the-variable-x-was-corrupted-c/38110662#38110662", "title": "Error when hooking a function, &quot;Stack around the variable x was corrupted.&quot;? C++", "body": "<p>This line here is copying 6 bytes of memory into a 4 byte variable</p>\n\n<pre><code>CopyMemory(&amp;pSource, &amp;stub, sizeof(stub));\n</code></pre>\n"}], "owner": {"reputation": 835, "user_id": 5642380, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7c1bee24162d961dd94950c6235bd35a?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/5642380/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467237148, "creation_date": 1467235780, "question_id": 38110355, "link": "https://stackoverflow.com/questions/38110355/error-when-hooking-a-function-stack-around-the-variable-x-was-corrupted-c", "title": "Error when hooking a function, &quot;Stack around the variable x was corrupted.&quot;? C++", "body": "<p>I'm trying to hook a function on x64 application. Here's my code:</p>\n\n<pre><code>int __stdcall nRecv(SOCKET s, char* buf, int len, int flags)\n{\n    Log(\"Receving!\");\n    return 0;\n}\n\nBOOL HookFunction(LPCWSTR moduleName, LPCSTR funcName, LPVOID pDestination)\n{\n    BYTE stub[6] = { 0xe9, 0x00, 0x00, 0x00, 0x00, 0xc3 };\n    DWORD pProtection;\n\n    DWORD pSource = (DWORD)GetProcAddress(GetModuleHandle(moduleName), funcName);\n\n\n    LPVOID pTrampoline = VirtualAlloc(NULL, 6 + sizeof(stub), MEM_COMMIT | MEM_RESERVE, PAGE_EXECUTE_READWRITE);\n\n    VirtualProtect((LPVOID)pSource, 6, PAGE_EXECUTE_READWRITE, &amp;pProtection);\n\n\n    CopyMemory(stub + 1, &amp;pDestination, 4);\n\n    CopyMemory((LPVOID)((DWORD_PTR)pTrampoline), &amp;pSource, 6);\n    CopyMemory((LPVOID)((DWORD_PTR)pTrampoline + 6), stub, sizeof(stub));\n\n\n    CopyMemory(stub + 1, &amp;pTrampoline, 4);\n    CopyMemory(&amp;pSource, &amp;stub, sizeof(stub));\n\n\n    VirtualProtect((LPVOID)pSource, 6, pProtection, NULL);\n\n    return TRUE;\n}\n\nBOOL recvHook = HookFunction(L\"ws2_32.dll\", \"recv\", &amp;nRecv);\n</code></pre>\n\n<p>I've attached a debugger and spot an error:\n<strong>Stack around the variable pSource was corrupted.</strong></p>\n\n<p>I couldn't really find a definitive reason for this happening, am I doing something wrong? Thanks!</p>\n"}, {"tags": ["c++", "inheritance"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1467238297, "post_id": 38110292, "comment_id": 63655313, "body": "Please post what you have tried and point out where you see the problem(s)."}, {"owner": {"reputation": 1, "user_id": 3014741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ee48f1a8f2e94bb7459cbcea91c32b5?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/3014741/albert"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1467239098, "post_id": 38110292, "comment_id": 63655628, "body": "Currently, I&#39;ve converted <code>Bone</code> and derived structures to classes. <code>Skeleton</code> class stores <code>Bones</code> using vector container.  In <code>SkeletonBVH</code> I&#39;m upcasting <code>BoneBVH</code> pointers to <code>Bone</code> pointers, and feed those to vector container. The problem is, vector does not seems to store them properly, as downcalsting back to <code>BoneBVH</code> both with <code>dynamic_cast</code> and <code>static_cast</code> does not work as expected"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1467239153, "post_id": 38110292, "comment_id": 63655647, "body": "Please understand that most people here prefer to see code rather than a description of the code."}, {"owner": {"reputation": 1, "user_id": 3014741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ee48f1a8f2e94bb7459cbcea91c32b5?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/3014741/albert"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1467659644, "post_id": 38110292, "comment_id": 63807473, "body": "Similar problem was described and solved here: <a href=\"https://www.reddit.com/r/cpp_questions/comments/3difl2/vector_of_objects_derived_from_base_class_cant/\" rel=\"nofollow noreferrer\">reddit.com/r/cpp_questions/comments/3difl2/&hellip;</a> Still, thanks R Sahu for help :)"}], "owner": {"reputation": 1, "user_id": 3014741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ee48f1a8f2e94bb7459cbcea91c32b5?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/3014741/albert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1467235483, "creation_date": 1467235483, "question_id": 38110292, "link": "https://stackoverflow.com/questions/38110292/multiple-child-class-defines-structure-type-used", "title": "Multiple child class defines structure type used", "body": "<p>A trouble is, I need to find a way to use different struct in object of child classes depending on which class it is.</p>\n\n<p>Main class <code>Skeleton</code> is a parent for <code>SkeletonBVH</code> and <code>SkeletonASFAMC</code>\nParent struct <code>Bone</code> is inherted by <code>BoneBVH</code> and <code>BoneASFAMC</code>.\nThen, I'm using struct <code>Bone</code> in a <code>Skeleton</code> class.</p>\n\n<p>Is there a possibility to exchange it for <code>BoneBVH</code> in <code>SkeletonBVH</code> and <code>BoneASFAMC</code> in <code>SkeletonASFAMC</code>?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1467235921, "post_id": 38110286, "comment_id": 63654294, "body": "Essentially an inner class in an ordinary class (with a scope in the enclosing class and access (visibility) to all members of the enclosing class). Same error: <code>struct X { void f(); }; struct Y { void X::f() {} };</code>"}], "answers": [{"tags": [], "owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1467238636, "creation_date": 1467238636, "answer_id": 38110970, "question_id": 38110286, "link": "https://stackoverflow.com/questions/38110286/how-to-define-inner-class-member-in-derived-class/38110970#38110970", "title": "How to define inner class member in derived class?", "body": "<p>The issue is that you're trying to define the function within a different class scope than the one it was declared in.  For example, consider this expanded version of your code:</p>\n\n<pre><code>class A{\n    public:\n        class B{\n            public:\n                void fun1();\n                void fun2();\n        };\n\n        void fun3();\n\n        void B::fun2() {} // Error.\n};\n\nclass C:public A{\n    public:\n        void B::fun1() {} // Error.\n        void A::fun3() {} // Error.\n};\n</code></pre>\n\n<p>All three errors will give the same type of error message, \"<code>Can not define member function X::Y() in Z</code>\".</p>\n\n<hr>\n\n<p>To solve this, if <code>A::B::fun1()</code> and <code>C::B::fun1()</code> need to have different implementations, you can derive from the nested class, as well.</p>\n\n<pre><code>class A {\n  public:\n    class AB_ {\n      public:\n        virtual void fun1();\n    };\n\n    typedef AB_ B;\n};\nvoid A::AB_::fun1() {}\n\nclass C : public A {\n  public:\n    class CB_ : public A::AB_ {\n        void fun1() override;\n    };\n\n    typedef CB_ B;\n};\nvoid C::CB_::fun1() {}\n</code></pre>\n\n<p>In this case, you can use <code>B</code> externally to access the most-derived version of the nested class, or use <code>A::AB_</code> or <code>C::CB_</code> directly.  Similarly, you could write something like this:</p>\n\n<pre><code>class A {\n    class AB_ {\n      public:\n        virtual void fun1();\n    } b;\n\n  public:\n    typedef AB_ B;\n\n    virtual B&amp; getB() { return b; }\n};\nvoid A::AB_::fun1() {}\n\nclass C : public A {\n    // Note the use of the typedef, instead of the actual type name.\n    class CB_ : public A::B {\n        void fun1() override;\n    } cb;\n\n  public:\n    typedef CB_ B;\n\n    // Note the use of the typedef, instead of the actual type name.\n    A::B&amp; getB() override { return cb; }\n};\nvoid C::CB_::fun1() {}\n</code></pre>\n\n<p>In this case, <code>C</code> internally uses <code>A</code>'s typedef, while simultaneously replacing it; due to this, uses of <code>A</code>'s typedef are made explicit, as <code>A::B</code> instead of <code>B</code>.  Due to the typedefs, the name <code>B</code> will mean either <code>A::AB_</code> or <code>C::CB_</code>, when used as <code>A::B</code> or <code>C::B</code>, respectively.</p>\n\n<pre><code>// If given the above...\n\nint main() {\n    std::cout &lt;&lt; \"A::B: \" &lt;&lt; typeid(A::B).name() &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"C::B: \" &lt;&lt; typeid(C::B).name() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>The output will be:</p>\n\n<pre><code>// GCC:\nA::B: N1A3AB_E\nC::B: N1C3CB_E\n\n// MSVC:\nA::B: class A::AB_\nC::B: class C::CB_\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 6431798, "user_type": "registered", "profile_image": "https://graph.facebook.com/1744106532497154/picture?type=large", "display_name": "VikAsh KuMar", "link": "https://stackoverflow.com/users/6431798/vikash-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1467238636, "creation_date": 1467235450, "question_id": 38110286, "link": "https://stackoverflow.com/questions/38110286/how-to-define-inner-class-member-in-derived-class", "title": "How to define inner class member in derived class?", "body": "<pre><code>#include&lt;iostream&gt;\nusing namespace std;\nclass A{\n    public:\n        class B{\n            public:\n                void fun1();\n        };\n};\n\nclass C:public A{\n    public:\n        B::fun1(){ // This line gives Error:can not define member function B::fun1() in C\n\n        }       \n};\nint main(){\n    C ob;\n    return 0;\n}\n</code></pre>\n\n<p>there is any way to define inner class member in derived class ?\nWhat is the reason behind this error ?</p>\n"}, {"tags": ["c++", "opengl", "ros"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1467237408, "post_id": 38110237, "comment_id": 63654944, "body": "Of course it isn&#39;t drawing anything. You didn&#39;t give it anything to draw; <code>pts</code> is empty. Unless there&#39;s some code out there that you&#39;re not showing, you haven&#39;t actually provided any data to the buffer object."}, {"owner": {"reputation": 79, "user_id": 6471700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9681fd6c5f19b5983da8847ec9a8bce0?s=128&d=identicon&r=PG&f=1", "display_name": "SydC", "link": "https://stackoverflow.com/users/6471700/sydc"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1467297518, "post_id": 38110237, "comment_id": 63683776, "body": "I saved all the data coming from the robot in <code>pts</code>, but <code>pts</code> was indeed empty when I called <code>glBufferData</code>"}], "owner": {"reputation": 79, "user_id": 6471700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9681fd6c5f19b5983da8847ec9a8bce0?s=128&d=identicon&r=PG&f=1", "display_name": "SydC", "link": "https://stackoverflow.com/users/6471700/sydc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 483, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1467381539, "creation_date": 1467235202, "last_edit_date": 1467381539, "question_id": 38110237, "link": "https://stackoverflow.com/questions/38110237/opengl-ros-mapping-visualizer", "title": "OpenGL &amp; ROS - mapping visualizer", "body": "<p>I am new to modern OpenGL. I am working on a project build a simple 2d mapping system for my robot and I am using OpenGL to do visualization. Right now I can get data from the robot but I don't know how to draw the map with the data coming in. One problem is that the data is coming in continuously, how should I specify the buffer size? Also how can I tell OpenGL that my data is changing?</p>\n\n<p>Here is a my code snippet:</p>\n\n<pre><code>std::vector&lt;geometry_msgs::Point32&gt; pts;\nint main(int argc, char **argv)\n{\n    GLuint vertex_buffer, vertex_shader, fragment_shader, program;\n    GLint mvp_location, vpos_location, vcol_location;\n    GLFWwindow* window = glfwCreateWindow(640, 480, \"My Window\", NULL, NULL);\n    if(!window) {\n        std::cout &lt;&lt; \"window creation failed\\n\";\n        glfwTerminate();\n        return -1;\n    }\n    glfwMakeContextCurrent(window);\n    gladLoadGLLoader((GLADloadproc) glfwGetProcAddress);\n    glfwSwapInterval(1);\n\n    //mesh\n    glGenBuffers(1, &amp;vertex_buffer);\n    glBindBuffer(GL_ARRAY_BUFFER, vertex_buffer);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(pts) * pts.size(), &amp;pts, GL_STATIC_DRAW);\n\n    //shader\n    vertex_shader = glCreateShader(GL_VERTEX_SHADER);\n    glShaderSource(vertex_shader, 1, &amp;vertex_shader_text, NULL);\n    glCompileShader(vertex_shader);\n\n    fragment_shader = glCreateShader(GL_FRAGMENT_SHADER);\n    glShaderSource(fragment_shader, 1, &amp;fragment_shader_text, NULL);\n    glCompileShader(fragment_shader);\n\n    program = glCreateProgram();\n    glAttachShader(program, vertex_shader);\n    glAttachShader(program, fragment_shader);\n    glLinkProgram(program);\n\n    mvp_location = glGetUniformLocation(program, \"MVP\");\n    vpos_location = glGetAttribLocation(program, \"vPos\");\n    vcol_location = glGetAttribLocation(program, \"vCol\");\n\n    glEnableVertexAttribArray(vpos_location);\n\n    glVertexAttribPointer(vpos_location, 3, GL_FLOAT, GL_FALSE, sizeof(float) * 6, (void*) 0);\n    glEnableVertexAttribArray(vcol_location);\n    glVertexAttribPointer(vcol_location, 3, GL_FLOAT, GL_FALSE, sizeof(float) * 6, (void*) (sizeof(float) * 3));\n    while(!glfwWindowShouldClose(window)) {\n        glClear(GL_COLOR_BUFFER_BIT);\n\n        glUseProgram(program);\n        glUniformMatrix4fv(mvp_location, 1, GL_FALSE, (const GLfloat*) mvp);\n        glDrawArrays(GL_POINTS, 0, pts.size());\n\n        glfwSwapBuffers(window);\n        glfwPollEvents();\n    }\n    glfwDestroyWindow(window);\n\n    glfwTerminate();\n    exit(EXIT_SUCCESS);\n}\n</code></pre>\n\n<p>right now it doesn't draw anything.</p>\n\n<p>edit: I do have data coming in from robot and saved in <code>pts</code></p>\n"}, {"tags": ["c++", "templates", "template-specialization"], "answers": [{"comments": [{"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 1, "creation_date": 1467237600, "post_id": 38110185, "comment_id": 63655026, "body": "One could also add a <code>using T = std::vector&lt;uint8_t&gt;;</code> statement."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 2, "last_activity_date": 1467234957, "creation_date": 1467234957, "answer_id": 38110185, "question_id": 38110168, "link": "https://stackoverflow.com/questions/38110168/adding-parameters-to-forward-declared-templates/38110185#38110185", "title": "Adding parameters to forward-declared templates", "body": "<p>You have to substitute <code>T</code> by <code>std::vector&lt;uint8_t&gt;</code> everywhere in your specialization:</p>\n\n<pre><code>template&lt;&gt; class Message &lt;std::vector&lt;uint8_t&gt;&gt;\n{\npublic:\n    const std::vector&lt;uint8_t&gt;&amp; getKey() const { return key; };\n    const std::vector&lt;uint8_t&gt;&amp; getMessage() const { return message; };\n\nprotected:\n    std::vector&lt;uint8_t&gt; key;\n    std::vector&lt;uint8_t&gt; message;\n};\n</code></pre>\n\n<p>I also add missing <code>const</code> and references.</p>\n"}], "owner": {"reputation": 1984, "user_id": 1642677, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6c4db19dd7a5daf2cdd1352e622fc013?s=128&d=identicon&r=PG", "display_name": "audiFanatic", "link": "https://stackoverflow.com/users/1642677/audifanatic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 38110185, "answer_count": 1, "score": -3, "last_activity_date": 1467234957, "creation_date": 1467234876, "last_edit_date": 1495542778, "question_id": 38110168, "link": "https://stackoverflow.com/questions/38110168/adding-parameters-to-forward-declared-templates", "title": "Adding parameters to forward-declared templates", "body": "<p>As per my <a href=\"https://stackoverflow.com/questions/38107797/template-specialization-c-templates-that-only-accept-certain-types-revisited\">previous question</a>, I'd like to do the following:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include&lt;string&gt;\n#include &lt;cstdint&gt;\n\ntemplate&lt;typename T&gt; class Message;\n\ntemplate&lt;&gt; class Message &lt;std::vector&lt;uint8_t&gt;&gt;\n{\npublic:\n    const T getKey() { return key; };\n    const T getMessage() { return message; };\n\nprotected:\n    T key;\n    T message;\n};\n</code></pre>\n\n<p>However, IntelliSense tells me that <code>identifier \"T\" is undefined\"</code></p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 3, "creation_date": 1467234534, "post_id": 38110046, "comment_id": 63653671, "body": "Did you try reading some documentation of <code>std::cin</code> to find out what it is?"}, {"owner": {"reputation": 1179, "user_id": 5380901, "user_type": "registered", "profile_image": "https://graph.facebook.com/1618844111710380/picture?type=large", "display_name": "Hafiz Hilman Mohammad Sofian", "link": "https://stackoverflow.com/users/5380901/hafiz-hilman-mohammad-sofian"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1467278564, "post_id": 38110046, "comment_id": 63669978, "body": "I am also still kind of confuse with all of the syntax of C++ and how it actually works, so, I just think that by asking here, it would be better and more time saving."}], "answers": [{"tags": [], "owner": {"reputation": 1139, "user_id": 6266602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0fa60ab2c1ac1b185db45679cabe8c9?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas B Preusser", "link": "https://stackoverflow.com/users/6266602/thomas-b-preusser"}, "is_accepted": false, "score": 4, "last_activity_date": 1467234544, "creation_date": 1467234544, "answer_id": 38110073, "question_id": 38110046, "link": "https://stackoverflow.com/questions/38110046/c-what-does-the-dot-operator-means-when-used-in-stdcin-getline/38110073#38110073", "title": "C++ - What does the &#39;dot&#39; operator means when used in std::cin.getline()?", "body": "<p><code>cin</code> is indeed an instance of the class <code>std::istream</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 1, "creation_date": 1467236226, "post_id": 38110398, "comment_id": 63654416, "body": "<code>cin</code> is not a class, it&#39;s a (global) variable. It is an instance of a class, though."}, {"owner": {"reputation": 111, "user_id": 5233184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d523fecbce0454372b1b83869a2648?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Alexander", "link": "https://stackoverflow.com/users/5233184/edward-alexander"}, "reply_to_user": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 0, "creation_date": 1467236261, "post_id": 38110398, "comment_id": 63654446, "body": "Oops, my bad. Thanks"}], "tags": [], "owner": {"reputation": 111, "user_id": 5233184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d523fecbce0454372b1b83869a2648?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Alexander", "link": "https://stackoverflow.com/users/5233184/edward-alexander"}, "is_accepted": false, "score": 2, "last_activity_date": 1467236392, "last_edit_date": 1467236392, "creation_date": 1467235952, "answer_id": 38110398, "question_id": 38110046, "link": "https://stackoverflow.com/questions/38110046/c-what-does-the-dot-operator-means-when-used-in-stdcin-getline/38110398#38110398", "title": "C++ - What does the &#39;dot&#39; operator means when used in std::cin.getline()?", "body": "<pre><code>std\n</code></pre>\n\n<p>Is the <code>namespace</code></p>\n\n<pre><code>cin\n</code></pre>\n\n<p>Is an object from the <code>istream</code> class</p>\n\n<pre><code>getline\n</code></pre>\n\n<p>Is a method from the <code>cin</code> class.</p>\n"}, {"tags": [], "owner": {"reputation": 764, "user_id": 6301103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf0769f719c19bc3497f3472c18fed8?s=128&d=identicon&r=PG&f=1", "display_name": "jaaq", "link": "https://stackoverflow.com/users/6301103/jaaq"}, "is_accepted": true, "score": 6, "last_activity_date": 1467236430, "creation_date": 1467236430, "answer_id": 38110512, "question_id": 38110046, "link": "https://stackoverflow.com/questions/38110046/c-what-does-the-dot-operator-means-when-used-in-stdcin-getline/38110512#38110512", "title": "C++ - What does the &#39;dot&#39; operator means when used in std::cin.getline()?", "body": "<p>Once you type:</p>\n\n<pre><code>#include &lt;iostream&gt;\n</code></pre>\n\n<p>the corresponding headerfile is inserted there. One line of this file reads</p>\n\n<pre><code>extern istream cin;\n</code></pre>\n\n<p>So as you see you have an object of type <em>istream</em> accessable from anywhere in the file with the include statement.</p>\n\n<p>So your guess that cin is an instance of a class was right and the dot operator calls the getline method of that object/class.</p>\n\n<p>Source: <a href=\"http://www.cplusplus.com/reference/iostream/cin/\">http://www.cplusplus.com/reference/iostream/cin/</a></p>\n"}], "owner": {"reputation": 1179, "user_id": 5380901, "user_type": "registered", "profile_image": "https://graph.facebook.com/1618844111710380/picture?type=large", "display_name": "Hafiz Hilman Mohammad Sofian", "link": "https://stackoverflow.com/users/5380901/hafiz-hilman-mohammad-sofian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 1, "accepted_answer_id": 38110512, "answer_count": 3, "score": -5, "last_activity_date": 1467236430, "creation_date": 1467234442, "question_id": 38110046, "link": "https://stackoverflow.com/questions/38110046/c-what-does-the-dot-operator-means-when-used-in-stdcin-getline", "title": "C++ - What does the &#39;dot&#39; operator means when used in std::cin.getline()?", "body": "<p>I'm used to program in Python, and since in Python, all are objects, it is totally acceptable when at the end of a variable, a <code>.</code> operator is used to access the <code>method</code> of a <code>class</code>. But in C++, let say for something like <code>std::cin.getline()</code>, is this some kind of accessing the member function of <code>cin</code>? </p>\n\n<p>Is <code>cin</code> some kind of a <code>class</code> or a <code>struct</code>?</p>\n"}, {"tags": ["c++", "debugging", "exception", "std"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1467234486, "post_id": 38109995, "comment_id": 63653647, "body": "To locate the call, divide and conquer with some try/catch blocks. And yes, likely there is another bug hiding."}, {"owner": {"reputation": 8582, "user_id": 439751, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4b40ae065359026d01fa30223812d83?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/439751/james"}, "edited": false, "score": 0, "creation_date": 1467234549, "post_id": 38109995, "comment_id": 63653681, "body": "Your guess is correct but considering that it&#39;s very unlikely to be a bug in std::vector, i&#39;d wager your debug code never accesses element 100"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1467234550, "post_id": 38109995, "comment_id": 63653682, "body": "look for an uninitialized variable"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1467235043, "post_id": 38109995, "comment_id": 63653910, "body": "Actually, you can include debug symbols in the release code and run it in the debugger, on many platforms, but this one feels like an uninitialized variable.  Something you think starts at 0, but is really undefined, but which the debug build automatically initializes in zero-filled space, whereas the release code optimizes out that initialization."}], "owner": {"reputation": 2897, "user_id": 3392714, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/302ac6bfbe982dcd53aa123f9bde72eb?s=128&d=identicon&r=PG&f=1", "display_name": "dani", "link": "https://stackoverflow.com/users/3392714/dani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 245, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1467234250, "creation_date": 1467234250, "question_id": 38109995, "link": "https://stackoverflow.com/questions/38109995/stdout-of-range-is-only-thrown-in-release-mode-not-in-debug-mode", "title": "std::out_of_range is only thrown in release mode, not in debug mode", "body": "<p>In my program I get an <code>std::out_of_range</code> exception if I run it in release mode. It runs fine in debug mode. I use a lot of <code>std::vector</code>s, hence I guess it comes from a <code>myvec.at(100)</code> call.</p>\n\n<pre><code>terminate called after throwing an instance of 'std::out_of_range'\n  what():  vector::_M_range_check: __n (which is 100) &gt;= this-&gt;size() (which is 100)\n</code></pre>\n\n<p>Since it does not throws in debug mode, I can not catch the exception and thus debugging is difficult. Is there an easy way to handle this?</p>\n\n<p>Also, I assume that my problem is caused by some undefined behaviour and thus it behaves differently in debug and release. Is that correct? </p>\n"}, {"tags": ["c++", "c", "fft", "convolution", "fftw"], "comments": [{"owner": {"reputation": 1884, "user_id": 3078414, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1180f5e68d3542488d66de14ff53964?s=128&d=identicon&r=PG&f=1", "display_name": "user3078414", "link": "https://stackoverflow.com/users/3078414/user3078414"}, "edited": false, "score": 2, "creation_date": 1467234497, "post_id": 38109836, "comment_id": 63653653, "body": "<code>44100</code> looks like some kind of audio sampling rate. Normally sizes of <code>fft</code> arrays have nothing to do with sampling rates and are power-of-two. Usually input and output array sizes match because of the mathematical requirement. If size of real input data doesn&#39;t match array size, there are techniques of windowing and zero-padding to fix this. There&#39;s enough good literature on this subject."}, {"owner": {"reputation": 1810, "user_id": 3018243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469fdc7e2f05894b3c6d98a389c869ab?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Cox", "link": "https://stackoverflow.com/users/3018243/steve-cox"}, "edited": false, "score": 1, "creation_date": 1467236469, "post_id": 38109836, "comment_id": 63654543, "body": "others have already mentioned that the input and output length must match. maybe you could give a bit more context on what you&#39;re trying to do. based on that magic number it looks like you&#39;re trying to estimate the power spectrum with 1 bin per Hz (probably). If that&#39;s the case you just need to zero pad your input up to 44100 samples and apply a window function (try hanning) to the block of input you have to smooth out the spectrum."}], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1467235098, "post_id": 38110062, "comment_id": 63653932, "body": "Is a linear interpolation the best thing you can do?  I mean, suppose you took the samples, produced a sum of sinusodials that best approximated the signal, then used that to interpolate?  That corresponds to a relatively simple transformation in the frequency domain, and might be a better method?"}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1467235569, "post_id": 38110062, "comment_id": 63654134, "body": "@Yakk wouldn&#39;t that accomplish the same thing, just not in n*log(n) time?"}, {"owner": {"reputation": 1810, "user_id": 3018243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469fdc7e2f05894b3c6d98a389c869ab?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Cox", "link": "https://stackoverflow.com/users/3018243/steve-cox"}, "edited": false, "score": 2, "creation_date": 1467235998, "post_id": 38110062, "comment_id": 63654327, "body": "you can&#39;t just stretch the input, that will cause obvious artifacts. if you actually need to interpolate (i don&#39;t see why you would do that at all here, given that it changes the bin meaning entirely) you should do it against a nyquist limited pulse shape. If you care about performance you should do this in the frequency domain, since its cheaper (single tap). if you&#39;re really worried about artifacts in the frequency domain pad out the transform to turn the circular convolution into a normal one, same as overlap&amp;save method"}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "reply_to_user": {"reputation": 1810, "user_id": 3018243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469fdc7e2f05894b3c6d98a389c869ab?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Cox", "link": "https://stackoverflow.com/users/3018243/steve-cox"}, "edited": false, "score": 0, "creation_date": 1467236085, "post_id": 38110062, "comment_id": 63654370, "body": "@SteveCox I believe you know much more about convolution than I do :) you should provide an answer too, or feel free to edit mine"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1467239716, "post_id": 38110062, "comment_id": 63655847, "body": "@tim no, a linear interpolation has a rather complex frequency response (it is like convolving with a triangle, which is obviously not simple in the frequency domain).  (My knowledge of this field is abstract, not practical, so I do not know the best answer, I can just spot issues)"}], "tags": [], "owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "is_accepted": false, "score": 3, "last_activity_date": 1467234503, "creation_date": 1467234503, "answer_id": 38110062, "question_id": 38109836, "link": "https://stackoverflow.com/questions/38109836/c-how-can-i-fourier-transform-an-array-into-an-other-array-of-different-size/38110062#38110062", "title": "c++ : how can I fourier transform an array into an other array of different size using fftw3", "body": "<p>The discrete fourier transform will always produce an output with the same size as its input, as a basic mathematical premise of the algorithm, and this is reflected in FFTW by only taking in one size parameter. This is because for an array of N discrete values in the time domain, there are exactly N possible unique frequencies at play, from 0 to N-1 cycles per unit of time (this unit being the length in time of your input).</p>\n\n<p>You could scale your input up or down in size to 44100 values, by essentially stretching the input and interpolating its values to create a new array that fits the required length, and then perform the fourier transform. I recommend you perform this stretching on the input time domain and not on the frequency domain to avoid undesirable artifacts.</p>\n"}], "owner": {"reputation": 19, "user_id": 6530364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ebff6368a03146f7dddeb4ac92018da?s=128&d=identicon&r=PG&f=1", "display_name": "Matze .H", "link": "https://stackoverflow.com/users/6530364/matze-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 638, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1467234503, "creation_date": 1467233609, "question_id": 38109836, "link": "https://stackoverflow.com/questions/38109836/c-how-can-i-fourier-transform-an-array-into-an-other-array-of-different-size", "title": "c++ : how can I fourier transform an array into an other array of different size using fftw3", "body": "<p>I need to fourier transform an array with integer-values to the frequency domain (in order to multiply it with another one later). The output array must have the size of 44100 but the input array will vary. </p>\n\n<p>I think fftw3 is a good tool for that. But how do I create a 'plan' with different array-sizes for input and output?</p>\n\n<p>here is the function I wrote:</p>\n\n<pre><code>fftw_complex* fourier( int* samples, int numberOfSamples ){\n\n    fftw_complex* input;\n    fftw_complex* output;\n    fftw_plan plan;\n    input = (fftw_complex*)fftw_malloc( sizeof(fftw_complex)*numberOfSamples );\n    output = (fftw_complex*)fftw_malloc( sizeof(fftw_complex)*44100 );                  //cd-quality\n\n    plan = fftw_plan_dft_1d( 44100, input, output, FFTW_FORWARD, FFTW_ESTIMATE );\n    // here is the problem because  ^this\n    // array has a different size than\n    //                                     ^this array\n\n    for( size_t index = 0; index &lt; numberOfSamples; index++ ){\n        input[index][0] = (double)(samples[index]);\n        input[index][1] = 0;\n    }\n    fftw_execute(plan);\n    fftw_destroy_plan(plan);\n    fftw_free(input);\n    return output;\n}\n</code></pre>\n\n<p>thanks a lot for answering</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2010", "visual-studio-2015", "msbuild"], "comments": [{"owner": {"reputation": 481, "user_id": 4997235, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-brozPKGmb6E/AAAAAAAAAAI/AAAAAAAAAC8/g_gMca82fdI/photo.jpg?sz=128", "display_name": "ZHANG Zikai", "link": "https://stackoverflow.com/users/4997235/zhang-zikai"}, "edited": false, "score": 0, "creation_date": 1467260807, "post_id": 38109726, "comment_id": 63661123, "body": "I think those /p options are only selection, not settings. You could select configurations exist in project files already. MD/MT are included in each configuration of the projects, so you might not able to select them unless you have prepared different configurations for different MD/MT settings. For example, some projects I saw them use ReleaseMD, ReleaseMT, DebugMD, DebugMT, etc."}], "owner": {"reputation": 102, "user_id": 1973207, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/557d7fa74d7ec23c6726f1c16986b032?s=128&d=identicon&r=PG", "display_name": "DuckQueen", "link": "https://stackoverflow.com/users/1973207/duckqueen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1298, "favorite_count": 1, "answer_count": 0, "score": 6, "last_activity_date": 1509713691, "creation_date": 1467233117, "question_id": 38109726, "link": "https://stackoverflow.com/questions/38109726/how-to-set-runtime-library-mt-md-configuration-in-msbuild", "title": "How to set Runtime Library (MT/MD) configuration in MSBuild?", "body": "<p>I build old external project. Say I do not have a visual IDE - only MSbuild (like one you get in  AppVeyour). How to pass MD\\MT in MSbuild?</p>\n\n<p>Currently to compile VS2010 project using VS2015 I use:\n<code>${MSBUILD_COMMAND} solution.sln /p:PlatformToolset=v140 /p:configuration=Release /p:platform \"x64\" /project \"project-lib\"</code>\nYet I would like also to set runtime library configuration from MSbuild command. How to do it?</p>\n"}, {"tags": ["c++", "constructor"], "comments": [{"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 1, "creation_date": 1467233371, "post_id": 38109706, "comment_id": 63653101, "body": "Do <b>not</b> put <code>;</code> after the final <code>}</code> of your functions!"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 4, "creation_date": 1467233432, "post_id": 38109706, "comment_id": 63653128, "body": "Before you define <code>Iterator</code> it is an incomplete type, and you cannot do much with an incomplete type."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1467233517, "post_id": 38109706, "comment_id": 63653173, "body": "It sounds more like you want to have Iterator depend on a forward-declared <code>SortedList</code>, and <code>SortedList</code> depend on a complete<code>Iterator</code>"}], "answers": [{"comments": [{"owner": {"reputation": 893, "user_id": 6361694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62b808f24204076dfdb2fc9afa27a8b8?s=128&d=identicon&r=PG&f=1", "display_name": "Petok Lorand", "link": "https://stackoverflow.com/users/6361694/petok-lorand"}, "edited": false, "score": 0, "creation_date": 1467233791, "post_id": 38109843, "comment_id": 63653305, "body": "Thank you very much it works now.  An interesting note: i have something similar, but templated and there worked without this &quot;trick&quot; is there any difference i should know?"}, {"owner": {"reputation": 21240, "user_id": 951423, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/UlSg8.png?s=128&g=1", "display_name": "Pixelchemist", "link": "https://stackoverflow.com/users/951423/pixelchemist"}, "reply_to_user": {"reputation": 893, "user_id": 6361694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62b808f24204076dfdb2fc9afa27a8b8?s=128&d=identicon&r=PG&f=1", "display_name": "Petok Lorand", "link": "https://stackoverflow.com/users/6361694/petok-lorand"}, "edited": false, "score": 0, "creation_date": 1467234241, "post_id": 38109843, "comment_id": 63653546, "body": "@Lorand: Templates are &quot;compile when used&quot;. At the point where the template is used, both definitions are probably already available."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1467233639, "creation_date": 1467233639, "answer_id": 38109843, "question_id": 38109706, "link": "https://stackoverflow.com/questions/38109706/class-has-no-constructor-but-it-has-and-with-right-parameters/38109843#38109843", "title": "Class has no constructor, but it has and with right parameters", "body": "<p><code>Iterator</code> is an incomplete type when you use:</p>\n\n<pre><code>Iterator iterator() {\n    Node* min = minim(root);\n    return Iterator(*this, min); // Here says that Iterator has no constructors\n};\n</code></pre>\n\n<p>Move the definition of the function after definition of <code>Iterator</code>.</p>\n\n<pre><code>class Iterator;\n\nclass SortedList {\n\n    friend class Iterator;\n\nprivate:\n    Node* root;\n\n    Node* minim(Node* node) const {\n        while (node-&gt;getLeft() != nullptr)\n            node = node-&gt;getLeft();\n        return node;\n};\n\npublic:\n    SortedList() {\n        root = nullptr;\n    };\n\n    // Just the declaration\n    Iterator iterator();\n};  \n\n\nclass Iterator {\nprivate:\n    const SortedList&amp; list;\n    Node* current;\n\npublic:\n    Iterator(const SortedList&amp; list, Node* current) : list{ list }, current{ current } {};\n\n};\n\n// Now the definition    \nIterator SortedList::iterator() {\n   Node* min = minim(root);\n   return Iterator(*this, min);\n};\n</code></pre>\n"}], "owner": {"reputation": 893, "user_id": 6361694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62b808f24204076dfdb2fc9afa27a8b8?s=128&d=identicon&r=PG&f=1", "display_name": "Petok Lorand", "link": "https://stackoverflow.com/users/6361694/petok-lorand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 38109843, "answer_count": 1, "score": -2, "last_activity_date": 1467271795, "creation_date": 1467233054, "last_edit_date": 1467271795, "question_id": 38109706, "link": "https://stackoverflow.com/questions/38109706/class-has-no-constructor-but-it-has-and-with-right-parameters", "title": "Class has no constructor, but it has and with right parameters", "body": "<pre><code>class Iterator;\n\nclass SortedList {\n\n    friend class Iterator;\n\nprivate:\n    Node* root;\n\n    Node* minim(Node* node) const {\n        while (node-&gt;getLeft() != nullptr)\n            node = node-&gt;getLeft();\n        return node;\n};\n\npublic:\n    SortedList() {\n        root = nullptr;\n    };\n\n    Iterator iterator() {\n        Node* min = minim(root);\n        return Iterator(*this, min); // Here says that Iterator has no constructors\n    };\n};  \n\n\nclass Iterator {\nprivate:\n    const SortedList&amp; list;\n    Node* current;\n\npublic:\n    Iterator(const SortedList&amp; list, Node* current) : list{ list }, current{ current } {};\n\n};  \n</code></pre>\n\n<p>It says int the iterator method of SortedList that the Iterator class doesn't have constructors also doesn't say about matching or not and if i modify some parameters to be incorrect it does specify that there aren't any with those parameters.</p>\n\n<p>Another thing, if i comment the iterator method out and instantiate an iterator in main by writing Iterator it { my parameters} it works just fine. </p>\n"}, {"tags": ["c++", "linux", "sdl", "archlinux"], "comments": [{"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1467260646, "post_id": 38109558, "comment_id": 63661078, "body": "1. don&#39;t free window surface, and 2. - in most cases (usually with compositing window manager involved) you cannot expect image to appear by simply waiting. Add a loop that flushes event queue, then draws your image, then repeats."}, {"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1467278723, "post_id": 38109558, "comment_id": 63670088, "body": "...and I&#39;ve forgot about <code>close</code> function, once again. Please don&#39;t do that. <a href=\"http://stackoverflow.com/questions/31482117/sdl-event-handling-not-working\" title=\"sdl event handling not working\">stackoverflow.com/questions/31482117/&hellip;</a>"}, {"owner": {"reputation": 75, "user_id": 5911808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97f556e0853b3be7ba87701974ddd097?s=128&d=identicon&r=PG", "display_name": "7z.", "link": "https://stackoverflow.com/users/5911808/7z"}, "reply_to_user": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1467279875, "post_id": 38109558, "comment_id": 63670928, "body": "Thanks for the tips, I&#39;ll consider them when I&#39;m more fluent with the framework. For now, I&#39;m just following this tutorial, as you might have already deducted: <a href=\"http://lazyfoo.net/tutorials/SDL/02_getting_an_image_on_the_screen/index.php\" rel=\"nofollow noreferrer\">lazyfoo.net/tutorials/SDL/02_getting_an_image_on_the_screen/&zwnj;&#8203;&hellip;</a> Changing what you suggested didn&#39;t change the fact that there&#39;s nothing actually being rendered of what I&#39;m asking for it to. The main thing I&#39;m trying to do now, is fix the discrepancy that seems to exist between running this code on Arch Linux and running it on OS X."}, {"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1467279990, "post_id": 38109558, "comment_id": 63671020, "body": "What is your current code? Please add it to the question."}, {"owner": {"reputation": 75, "user_id": 5911808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97f556e0853b3be7ba87701974ddd097?s=128&d=identicon&r=PG", "display_name": "7z.", "link": "https://stackoverflow.com/users/5911808/7z"}, "reply_to_user": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1467280587, "post_id": 38109558, "comment_id": 63671451, "body": "Added the code to my question. I haven&#39;t done anything with event queues yet, so I wasn&#39;t able to reproduce that part of the suggestion. Do you think that&#39;s where the fault lies? If so, how is it that it does run without prominent fault on OS X?"}, {"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1467284250, "post_id": 38109558, "comment_id": 63673988, "body": "Almost sure it is (not the first question with that problem here). I cannot describe reasons for that (and workarounds) in a short comment, will probably post better description later if no other answer will come. Short version is it just happened to work, there is no guarantee about that. To have proper display you have to react to window events apropriately - e.g. redraw when window manager asks you to."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 5911808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97f556e0853b3be7ba87701974ddd097?s=128&d=identicon&r=PG", "display_name": "7z.", "link": "https://stackoverflow.com/users/5911808/7z"}, "edited": false, "score": 0, "creation_date": 1467374412, "post_id": 38144392, "comment_id": 63719297, "body": "Thanks for the answer! When I put the image rendering function in a loop, the second iteration around it does actually display the image. Since I plan on making a game, which should render continuously, I don&#39;t see a problem in using Arch as my development platform (which is my preferred OS). Still weird that the first call to render results in the content on the screen behind the window to be copied. And it&#39;s not just doing that when rendering an image. Trying to color the background red with a rectangle does the same."}, {"owner": {"reputation": 326, "user_id": 6192933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97606b02ea1d36442a43b46fccea9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Paul", "link": "https://stackoverflow.com/users/6192933/joseph-paul"}, "reply_to_user": {"reputation": 75, "user_id": 5911808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97f556e0853b3be7ba87701974ddd097?s=128&d=identicon&r=PG", "display_name": "7z.", "link": "https://stackoverflow.com/users/5911808/7z"}, "edited": false, "score": 0, "creation_date": 1467380269, "post_id": 38144392, "comment_id": 63723348, "body": "If you plan on making a game, of course you should not use SDL_UpdateWindowSurface() which is &#39;software&#39; rendered but <a href=\"https://wiki.libsdl.org/CategoryRender\" rel=\"nofollow noreferrer\">2D Accelerated Rendering functions</a> or OpenGL."}], "tags": [], "owner": {"reputation": 326, "user_id": 6192933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97606b02ea1d36442a43b46fccea9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Paul", "link": "https://stackoverflow.com/users/6192933/joseph-paul"}, "is_accepted": true, "score": 2, "last_activity_date": 1467372774, "creation_date": 1467372774, "answer_id": 38144392, "question_id": 38109558, "link": "https://stackoverflow.com/questions/38109558/sdl2-on-arch-linux-window-renders-whats-on-the-screen-behind-it/38144392#38144392", "title": "SDL2 on Arch Linux: window renders what&#39;s on the screen behind it", "body": "<p>I have run your code on Ubuntu 14.04 without any problem. In order to check if its a 'rendering driver' issue on Linux, could you run my little GPL <a href=\"https://bitbucket.org/josephpaul0/rockdodger-ce/downloads\" rel=\"nofollow\">game</a> from the command line and copy-paste the info displayed in the console ?</p>\n\n<p>You should see something like this:</p>\n\n<pre><code>Video drivers (2): 'x11' 'dummy', active = 'x11'\nScreen: 1920 x 1080, game: 1024 x 576\nRendering drivers (2): 'opengl' 'software', active = 'opengl'\nRender flags = 0x000a | ACCELERATED | TARGETTEXTURE\nWindow flags = 0x001a | OPENGL | BORDERLESS\n0 joystick(s) detected\n</code></pre>\n\n<p>I encountered the same kind of problem on CentOS 5 when the 'SDL_RENDERER_PRESENTVSYNC' flag is ON in the renderer or as long as you don't copy any texture to a renderer.</p>\n\n<p>Another idea, what happens when you do this ?</p>\n\n<pre><code>for(int i = 0; i &lt; 10; i++) {\n    SDL_BlitSurface(image, NULL, surface, NULL);\n    SDL_UpdateWindowSurface(window);\n    SDL_Delay(500);\n}\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 5911808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97f556e0853b3be7ba87701974ddd097?s=128&d=identicon&r=PG", "display_name": "7z.", "link": "https://stackoverflow.com/users/5911808/7z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2521, "favorite_count": 1, "accepted_answer_id": 38144392, "answer_count": 1, "score": 5, "last_activity_date": 1467372774, "creation_date": 1467232436, "last_edit_date": 1495541389, "question_id": 38109558, "link": "https://stackoverflow.com/questions/38109558/sdl2-on-arch-linux-window-renders-whats-on-the-screen-behind-it", "title": "SDL2 on Arch Linux: window renders what&#39;s on the screen behind it", "body": "<p>I've just started with SDL2, read a couple of articles on it and was able to compile the test program I've written on Arch Linux with success. The only problem that seems to be occurring, is that the window that's being created doesn't render the image. I've tried running the same code on Mac, which does result in the expected. I'm using CLion, which isn't the malefactor, because compiling with g++ through CLI results in the same. </p>\n\n<p>My Arch Linux install:</p>\n\n<pre><code>OS: Arch Linux x86_64\nKernel Release: 4.6.2-1-ARCH\n</code></pre>\n\n<p>Here's the code I'm compiling:</p>\n\n<pre><code>#include &lt;iomanip&gt;\n#include &lt;SDL2/SDL.h&gt;\nusing namespace std;\n\nconst int WIDTH = 640;\nconst int HEIGHT = 480;\n\nbool init();\nbool loadMedia();\nint close();\n\nSDL_Window* window = NULL;\nSDL_Surface* surface = NULL;\nSDL_Surface* image = NULL;\n\nint main(int argc, char** argv) {\n    if(init())\n        if(loadMedia())\n            printf(\"Media loaded\");\n    SDL_BlitSurface(image, NULL, surface, NULL);\n    SDL_UpdateWindowSurface(window);\n    SDL_Delay(5000);\n    return close();\n}\n\nbool init() {\n    if(SDL_Init(SDL_INIT_EVERYTHING) &lt; 0) {\n        printf(\"Error initializing SDL: %s\", SDL_GetError());\n        return false;\n    } else {\n        window = SDL_CreateWindow(\"Hello World\", SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, WIDTH, HEIGHT, SDL_WINDOW_SHOWN);\n        if(window == NULL) {\n            printf(\"Error creating window: %s\", SDL_GetError());\n            return false;\n        }\n        else\n            surface = SDL_GetWindowSurface(window);\n    }\n    return true;\n}\n\nbool loadMedia() {\n    image = SDL_LoadBMP(\"/home/me/ClionProjects/SDLTest/test.bmp\");\n    if(image == NULL) {\n        printf(\"Error loading in image: %s\", SDL_GetError());\n        return false;\n    }\n    return true;\n}\n\nint close() {\n    SDL_FreeSurface(surface);\n    SDL_FreeSurface(image);\n    SDL_DestroyWindow(window);\n    SDL_Quit();\n    return 0;\n}\n</code></pre>\n\n<p>My CMakeLists.txt file (used by CLion):</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.5)\nproject(SDLTest)\n\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=c++11 -w -lSDL2\")\n\nset(SOURCE_FILES main.cpp)\nadd_executable(SDLTest ${SOURCE_FILES})\n</code></pre>\n\n<p>And the Unix command I've used to compile it with g++:</p>\n\n<pre><code>g++ main.cpp -w -lSDL2 -o prog\n</code></pre>\n\n<p>What it looks like when running the code on Arch:</p>\n\n<p><a href=\"https://i.stack.imgur.com/0PY1o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0PY1o.png\" alt=\"Code run on Arch Linux\"></a></p>\n\n<p>I should note that it only copies what's on the screen once, and doesn't update the window content. So when I move the window around, what's rendered in the window stays the same.</p>\n\n<p>On Mac:</p>\n\n<p><a href=\"https://i.stack.imgur.com/l7ZuE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/l7ZuE.png\" alt=\"enter image description here\"></a></p>\n\n<p>Have found a couple of articles also hinting at this issue, but the solutions to those articles do not work for me. Specifically, I'm talking about these articles.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/21953165/sdl-window-doesnt-show-anything\">SDL - window doesn&#39;t show anything</a></p>\n\n<p><a href=\"https://bbs.archlinux.org/viewtopic.php?id=188412\" rel=\"nofollow noreferrer\">https://bbs.archlinux.org/viewtopic.php?id=188412</a></p>\n\n<p><a href=\"https://gamedev.stackexchange.com/questions/117792/why-does-sdl-render-the-background-from-the-operating-system-to-the-window\">https://gamedev.stackexchange.com/questions/117792/why-does-sdl-render-the-background-from-the-operating-system-to-the-window</a></p>\n\n<p>Hope that I've provided enough information, and that there's someone out there that has experienced the same issue and has been able to resolve it. Thanks in advance!</p>\n\n<hr>\n\n<p>Edit after <a href=\"https://stackoverflow.com/questions/38109558/sdl2-on-arch-linux-window-renders-whats-on-the-screen-behind-it?noredirect=1#comment63661078_38109558\">keltar's comment</a> (still not doing what it's supposed to):</p>\n\n<pre><code>#include &lt;iomanip&gt;\n#include &lt;SDL2/SDL.h&gt;\nusing namespace std;\n\nconst int WIDTH = 640;\nconst int HEIGHT = 480;\n\nbool init();\nbool loadMedia();\n//int close();\n\nSDL_Window* window = NULL;\nSDL_Surface* surface = NULL;\nSDL_Surface* image = NULL;\n\nint main(int argc, char** argv) {\n    if(init())\n        if(loadMedia())\n            printf(\"Media loaded\");\n    SDL_BlitSurface(image, NULL, surface, NULL);\n    SDL_UpdateWindowSurface(window);\n    SDL_Delay(5000);\n    SDL_Quit();\n    return 0;\n}\n\nbool init() {\n    if(SDL_Init(SDL_INIT_EVERYTHING) &lt; 0) {\n        printf(\"Error initializing SDL: %s\", SDL_GetError());\n        return false;\n    } else {\n        window = SDL_CreateWindow(\"Hello World\", SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, WIDTH, HEIGHT, SDL_WINDOW_SHOWN);\n        if(window == NULL) {\n            printf(\"Error creating window: %s\", SDL_GetError());\n            return false;\n        }\n        else\n            surface = SDL_GetWindowSurface(window);\n    }\n    return true;\n}\n\nbool loadMedia() {\n    image = SDL_LoadBMP(\"/home/me/ClionProjects/SDLTest/test.bmp\");\n    if(image == NULL) {\n        printf(\"Error loading in image: %s\", SDL_GetError());\n        return false;\n    }\n    return true;\n}\n\n//int close() {\n//    SDL_FreeSurface(surface);\n//    SDL_FreeSurface(image);\n//    SDL_DestroyWindow(window);\n//    SDL_Quit();\n//    return 0;\n//}\n</code></pre>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 4186, "user_id": 5444618, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/lLopV.png?s=128&g=1", "display_name": "Guillaume F.", "link": "https://stackoverflow.com/users/5444618/guillaume-f"}, "edited": false, "score": 2, "creation_date": 1467231987, "post_id": 38109352, "comment_id": 63652386, "body": "You are writing aggressively in unallocated memory, that&#39;s what going on. Where are they stored? Somewhere undefined. Why no error? Because C and C++ doesn&#39;t check for bad programming."}, {"owner": {"reputation": 32394, "user_id": 528724, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b428b7a4d372791efff952dafecd5782?s=128&d=identicon&r=PG", "display_name": "Mahesh", "link": "https://stackoverflow.com/users/528724/mahesh"}, "edited": false, "score": 0, "creation_date": 1467231990, "post_id": 38109352, "comment_id": 63652387, "body": "Undefined behavior."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 3, "creation_date": 1467232440, "post_id": 38109352, "comment_id": 63652606, "body": "Try <code>a.at(i) = i + 97;</code> instead of <code>a[i] = i+97;</code>.  Watch what happens.  Your &quot;error checker&quot; is the <code>at()</code> call."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1467233044, "post_id": 38109352, "comment_id": 63652929, "body": "<a href=\"http://ideone.com/DDkHqd\" rel=\"nofollow noreferrer\">See this using your code</a>.  Now look at <a href=\"http://ideone.com/amx5Py\" rel=\"nofollow noreferrer\">this example</a> using <code>at()</code>.  The former is undefined behavior, the latter will not let you get away with an out-of-bounds access without throwing an exception.  So it&#39;s not as if you have to cross your fingers and hope you didn&#39;t make a mistake with indexing.  You have <code>at()</code> for those instances where you want bounds checking and you want to address a possible indexing bug."}, {"owner": {"reputation": 49, "user_id": 5105898, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PGCVdPaPlXo/AAAAAAAAAAI/AAAAAAAAAB0/8T2pb4p54n8/photo.jpg?sz=128", "display_name": "Selva Jove", "link": "https://stackoverflow.com/users/5105898/selva-jove"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1467233661, "post_id": 38109352, "comment_id": 63653248, "body": "@PaulMcKenzie Thank you. I understood my mistake. But I&#39;m curious to know where those characters will be in the memory in case of undefined behaviour ?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1467233814, "post_id": 38109352, "comment_id": 63653319, "body": "@SelvaJove Probably if short string optimization was done, those characters may have wound up in the internal char array that&#39;s used.  That is just a theory, and you shouldn&#39;t rely on this to be the case in all circumstances.  You could have easily crashed the program -- try stuffing 1,000 characters into the string instead of 26."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 4186, "user_id": 5444618, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/lLopV.png?s=128&g=1", "display_name": "Guillaume F.", "link": "https://stackoverflow.com/users/5444618/guillaume-f"}, "edited": false, "score": 0, "creation_date": 1510833466, "post_id": 38109352, "comment_id": 81608719, "body": "@GuillaumeF. Though you&#39;re right at compile time, Visual Studio will error on this toy example when run in Debug."}], "answers": [{"comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1467233111, "post_id": 38109471, "comment_id": 63652958, "body": "Or better yet, OP shouldn&#39;t write a loop at all. Use something from <code>&lt;algorithm&gt;</code> like <code>std::transform</code>"}, {"owner": {"reputation": 49, "user_id": 5105898, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PGCVdPaPlXo/AAAAAAAAAAI/AAAAAAAAAB0/8T2pb4p54n8/photo.jpg?sz=128", "display_name": "Selva Jove", "link": "https://stackoverflow.com/users/5105898/selva-jove"}, "edited": false, "score": 0, "creation_date": 1467233246, "post_id": 38109471, "comment_id": 63653015, "body": "Do you have any clue where they will be in the memory ? I&#39;m curious to know that @Jonathan Mee"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1467233486, "post_id": 38109471, "comment_id": 63653157, "body": "@AndyG I believe <a href=\"http://en.cppreference.com/w/cpp/algorithm/iota\" rel=\"nofollow noreferrer\"><code>iota</code></a> would be preferable to <code>transform</code> in this case. I&#39;ve updated my answer cause I agree that&#39;s helpful information."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 49, "user_id": 5105898, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PGCVdPaPlXo/AAAAAAAAAAI/AAAAAAAAAB0/8T2pb4p54n8/photo.jpg?sz=128", "display_name": "Selva Jove", "link": "https://stackoverflow.com/users/5105898/selva-jove"}, "edited": false, "score": 0, "creation_date": 1467233688, "post_id": 38109471, "comment_id": 63653257, "body": "@SelvaJove Sure, they&#39;re written to that index of memory, without checking bounds. before your initialization loop, <code>data(a)</code> contained: &#39;\\0&#39; after your initialization loop the address of <code>data(a)</code> and the next 26 bytes of memory had been stomped by the alphabet. Does that make sense?"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1467233860, "post_id": 38109471, "comment_id": 63653352, "body": "Yeah that&#39;s a good idea. Perhaps use a range-based for loop for printing, or alternatively an <code>ostream_iterator</code>"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1467234442, "post_id": 38109471, "comment_id": 63653626, "body": "@AndyG I mean I thought about doing an <code>ostream_iterator</code> for the output loop but honestly I see little point in optimizing that, when we can just do: <code>cout &lt;&lt; a</code> and ditch the loop all together."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1467234661, "post_id": 38109471, "comment_id": 63653735, "body": "That&#39;s fair. Probably what OP wanted, but didn&#39;t know that <code>&lt;&lt;</code> was defined for <code>std::string</code>"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1467235039, "post_id": 38109471, "comment_id": 63653907, "body": "@AndyG The insertion operator being defined for <code>string</code> is nice, but if you&#39;re coming from <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a> the extraction operator being defined for <code>string</code> is gold."}], "tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": true, "score": 10, "last_activity_date": 1467233435, "last_edit_date": 1495540378, "creation_date": 1467232090, "answer_id": 38109471, "question_id": 38109352, "link": "https://stackoverflow.com/questions/38109352/disappeared-characters-in-string-but-accessed-with-index/38109471#38109471", "title": "Disappeared characters in String But Accessed with index", "body": "<p>When you do <code>a[i]</code> you are using <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/operator_at\" rel=\"nofollow noreferrer\"><code>string::operator[]</code></a> which explicitly says:</p>\n\n<blockquote>\n  <p>Returns a reference to the character at specified location pos. No bounds checking is performed</p>\n</blockquote>\n\n<p><code>a</code> is default constructed so it will have a size of 0. You are trying to index outside those bounds, so anything you read or write there is undefined.</p>\n\n<p>It looks like you're using 26 as a magic number for the upper bound for your loops. Instead use <code>size(a)</code> (or before C++17 use <code>a.size()</code>). Then if you wanted to execute your loops 26 times, just initialize <code>a</code> like this: <code>string a(26, '\\0')</code></p>\n\n<p><a href=\"http://ideone.com/fgbYy9\" rel=\"nofollow noreferrer\"><kbd>Live (Slightly Improved) Example</kbd></a></p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>As <a href=\"https://stackoverflow.com/questions/38109352/disappeared-characters-in-string-but-accessed-with-index/38109471?noredirect=1#comment63652958_38109471\">pointed out by AndyG</a> C++ does provide us with better ways of initializing our <code>string</code>s in this case <a href=\"http://en.cppreference.com/w/cpp/algorithm/iota\" rel=\"nofollow noreferrer\"><code>iota</code></a> is an excellent choice. Instead of your initialization for loop you could use:</p>\n\n<pre><code>iota(begin(a), end(a), 'a')\n</code></pre>\n\n<p>I've updated the example to include this.</p>\n"}], "owner": {"reputation": 49, "user_id": 5105898, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PGCVdPaPlXo/AAAAAAAAAAI/AAAAAAAAAB0/8T2pb4p54n8/photo.jpg?sz=128", "display_name": "Selva Jove", "link": "https://stackoverflow.com/users/5105898/selva-jove"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 38109471, "answer_count": 1, "score": 3, "last_activity_date": 1467233435, "creation_date": 1467231664, "last_edit_date": 1467233030, "question_id": 38109352, "link": "https://stackoverflow.com/questions/38109352/disappeared-characters-in-string-but-accessed-with-index", "title": "Disappeared characters in String But Accessed with index", "body": "<p>In the following program,</p>\n\n<pre><code>int main()\n{\n  int i;\n  string a;//unallocated string;\n\n  for( i=0;i&lt;26;i++)\n  {\n     a[i]=i+97;// trying to write a char at index i of a\n  }\n  cout&lt;&lt;\" a[i] : \";\n\n  for(i=0;i&lt;26;i++)\n  {\n     cout&lt;&lt;a[i];// printing the characters \n  }\n\n  cout&lt;&lt;\"\\n a as string : \"&lt;&lt;a; // the string disappeared\n}\n</code></pre>\n\n<blockquote>\n  <p>Output :</p>\n  \n  <p>a[i] : abcdefghijklmnopqrstuvwxyz</p>\n  \n  <p>a as string :</p>\n</blockquote>\n\n<p>My questions are</p>\n\n<ul>\n<li><p>Where are the characters stored at the indices of string a reside ?</p></li>\n<li><p>Why there is no error when I try to write in an unallocated string ?</p></li>\n<li><p>Can someone explain what is happening  ?</p></li>\n<li><p>I'm using gcc with c++11</p></li>\n</ul>\n"}, {"tags": ["c++", "multithreading", "vector"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 3, "creation_date": 1467231374, "post_id": 38109244, "comment_id": 63652084, "body": "Rule of thumb. I you do not know where volatile is applicable (e.g.: hardware registers) do not use it (it will be wrong)"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1467231511, "post_id": 38109244, "comment_id": 63652178, "body": "You probably want <code>std::atomic</code> instead of <code>volatile</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1467231665, "post_id": 38109244, "comment_id": 63652250, "body": "See: <a href=\"http://stackoverflow.com/questions/2484980/why-is-volatile-not-considered-useful-in-multithreaded-c-or-c-programming\" title=\"why is volatile not considered useful in multithreaded c or c programming\">stackoverflow.com/questions/2484980/&hellip;</a>"}, {"owner": {"reputation": 5189, "user_id": 4049658, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/cc923cb7c9b2d8add8f2f373a8ffe0f5?s=128&d=identicon&r=PG&f=1", "display_name": "user81993", "link": "https://stackoverflow.com/users/4049658/user81993"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1467231704, "post_id": 38109244, "comment_id": 63652264, "body": "@Jarod42 I definitely don&#39;t, I already tried a lock-free implementation and due to having at least 3 atomic operations per push its twice as slow as with cs. Looking at the code over at msdn, they write data to volatiles in critical sections so I&#39;m assuming thats the way to do it."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1467231879, "post_id": 38109244, "comment_id": 63652334, "body": "Why use critical sections instead of <code>std::mutex</code> with a lock (e.g., <code>std::unique_lock</code>? What is going to happen if <code>new</code> in the <code>push</code> function throws (or <code>push_back</code>)?"}, {"owner": {"reputation": 41213, "user_id": 215568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b05685e6c3945f4bd23bf1f967861aeb?s=128&d=identicon&r=PG", "display_name": "Donnie", "link": "https://stackoverflow.com/users/215568/donnie"}, "edited": false, "score": 1, "creation_date": 1467231941, "post_id": 38109244, "comment_id": 63652372, "body": "<code>volatile</code> is not necessary in this code.  The compiler can see where <code>chunk</code> and <code>chunk_size</code> are changeable globals and will not produce incorrect code that assumes values."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1467231981, "post_id": 38109244, "comment_id": 63652385, "body": "If you see someone using <code>volatile</code> for thread safety ignore them and move on.  You cannot count on it for thread safety in today&#39;s world."}, {"owner": {"reputation": 5189, "user_id": 4049658, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/cc923cb7c9b2d8add8f2f373a8ffe0f5?s=128&d=identicon&r=PG&f=1", "display_name": "user81993", "link": "https://stackoverflow.com/users/4049658/user81993"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1467232066, "post_id": 38109244, "comment_id": 63652427, "body": "@JamesAdkison CS is slightly quicker, thats about it. If either of them throw then I crash, there would be no elegant way to handle that anyways considering what the rest of the application is doing."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1467234122, "post_id": 38109244, "comment_id": 63653487, "body": "<code>volatile</code> should not be used for thread safety as one thing it does NOT do is ensure CPU cache coherency across multiple CPU&#39;s.  Extra instructions need to be inserted and that is one effect of using <code>std::atomic&lt;*&gt;</code> .  See also: <a href=\"http://en.cppreference.com/w/cpp/language/cv\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/cv</a> - &quot;volatile objects suitable for communication with a signal handler, but not with another thread of execution&quot;"}], "owner": {"reputation": 5189, "user_id": 4049658, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/cc923cb7c9b2d8add8f2f373a8ffe0f5?s=128&d=identicon&r=PG&f=1", "display_name": "user81993", "link": "https://stackoverflow.com/users/4049658/user81993"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 441, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1467231240, "creation_date": 1467231240, "question_id": 38109244, "link": "https://stackoverflow.com/questions/38109244/does-this-vector-template-type-need-to-be-volatile", "title": "Does this vector template type need to be volatile?", "body": "<p>I'm having a bit of trouble with this bit:</p>\n\n<pre><code>volatile uint32_t chunk_size;\nvolatile T* chunk;\nstd::vector&lt;volatile T*&gt;* chunks;\nCRITICAL_SECTION cs;\n\n...\n\nvoid push(T item) {\n    EnterCriticalSection(&amp;cs);\n\n    uint32_t slot = chunk_size++;\n\n    if (slot == chunk_capacity) {\n        chunk = new T[chunk_capacity];\n        chunks-&gt;push_back(chunk);\n        chunk_size = 1;\n        slot = 0;\n    }\n\n    chunk[slot] = item;\n\n    LeaveCriticalSection(&amp;cs);\n}\n</code></pre>\n\n<p>So that should be a simple thread safe push. </p>\n\n<p>I think T* chunk needs to be volatile because I don't want any thread caching the value since one of them might reallocate and change it.</p>\n\n<p>The vector itself shouldn't need to be volatile since even though its contents change, the object itself doesn't move. </p>\n\n<p>The vectors template type I'm not sure about, on one hand c++ won't let me push volatile types so I'd have to cast it to non-volatile. At the same time though, it is also a multiple consumer container and when one of them pops the container, it clears the vector. So if the address of chunks[2] were to be cached for instance, things will definitely go wrong. </p>\n\n<p>So, should the vectors type template be volatile or not?</p>\n"}, {"tags": ["c++", "couchbase", "libcouchbase"], "comments": [{"owner": {"reputation": 9246, "user_id": 92516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FcFsU.jpg?s=128&g=1", "display_name": "DaveR", "link": "https://stackoverflow.com/users/92516/daver"}, "edited": false, "score": 0, "creation_date": 1467718733, "post_id": 38109190, "comment_id": 63828754, "body": "Note that libcouchbase-cxx is an unsupported, experimental client library."}], "answers": [{"tags": [], "owner": {"reputation": 529, "user_id": 6344086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/749acc97997fa7f12627b18b6bc7c49d?s=128&d=identicon&r=PG&f=1", "display_name": "Prasad Varakur", "link": "https://stackoverflow.com/users/6344086/prasad-varakur"}, "is_accepted": false, "score": 1, "last_activity_date": 1467825921, "creation_date": 1467825921, "answer_id": 38230062, "question_id": 38109190, "link": "https://stackoverflow.com/questions/38109190/issuing-prepared-parameterized-queries-through-libcouchbase-cxx/38230062#38230062", "title": "Issuing prepared/parameterized queries through libcouchbase-cxx", "body": "<p>Following doc/example shows how to use the prepared stmt.</p>\n\n<p><a href=\"http://developer.couchbase.com/documentation/server/4.5/sdk/c/n1ql-queries-with-sdk.html\" rel=\"nofollow\">http://developer.couchbase.com/documentation/server/4.5/sdk/c/n1ql-queries-with-sdk.html</a>\n<a href=\"https://github.com/couchbaselabs/devguide-examples/blob/server-4.5/c/query-placeholders.cc\" rel=\"nofollow\">https://github.com/couchbaselabs/devguide-examples/blob/server-4.5/c/query-placeholders.cc</a></p>\n\n<pre><code>// To enable using prepared (optimized) statements, you can use\n// the LCB_CMDN1QL_F_PREPCACHE flag. This is equivalent to setting\n// 'adhoc=False' in other SDKs\ncmd.cmdflags |= LCB_CMDN1QL_F_PREPCACHE;\nrc = lcb_n1p_mkcmd(params, &amp;cmd);\nrc = lcb_n1ql_query(instance, &amp;rows, &amp;cmd);\nlcb_wait(instance);\n</code></pre>\n\n<p>-Prasad</p>\n"}], "owner": {"reputation": 105, "user_id": 2007790, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/90432bcf5861e89c3eff0759036b6dfa?s=128&d=identicon&r=PG", "display_name": "Rod LN", "link": "https://stackoverflow.com/users/2007790/rod-ln"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467825921, "creation_date": 1467231054, "question_id": 38109190, "link": "https://stackoverflow.com/questions/38109190/issuing-prepared-parameterized-queries-through-libcouchbase-cxx", "title": "Issuing prepared/parameterized queries through libcouchbase-cxx", "body": "<p>I'm brand new to couchbase, and I'm developing a client which needs to issue prepared/parameterized n1ql queries via the c++ client library (<a href=\"https://github.com/couchbaselabs/libcouchbase-cxx\" rel=\"nofollow\">https://github.com/couchbaselabs/libcouchbase-cxx</a>). Issuing static queries is straightforward, but I haven't been able to find the correct process for issuing prepared queries. Has anybody been able to do this?</p>\n"}, {"tags": ["c++", "mongodb", "cmake", "clion", "mongo-cxx-driver"], "answers": [{"comments": [{"owner": {"reputation": 1046, "user_id": 3464870, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1ef858158709a6e7e8b72ae9b699f6e2?s=128&d=identicon&r=PG", "display_name": "gyurix", "link": "https://stackoverflow.com/users/3464870/gyurix"}, "edited": false, "score": 1, "creation_date": 1467292321, "post_id": 38116030, "comment_id": 63679556, "body": "Thank you very much for the answer you also helped me, not just to C Guy :)"}], "tags": [], "owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "is_accepted": true, "score": 3, "last_activity_date": 1467270161, "creation_date": 1467270161, "answer_id": 38116030, "question_id": 38109060, "link": "https://stackoverflow.com/questions/38109060/clion-mongodb-dependency-setup/38116030#38116030", "title": "Clion mongodb dependency setup", "body": "<p>Error message means that <code>find_library</code> fails to find requested libraries.</p>\n\n<p>As you install libraries into non-default directories (according to the screenshot, it is <code>C:\\mongo-c-driver\\bin</code>), you need to hint for <code>find_library()</code> where it should search.</p>\n\n<p>One possible way is to set CMake variable <a href=\"https://cmake.org/cmake/help/v3.0/variable/CMAKE_LIBRARY_PATH.html\" rel=\"nofollow\">CMAKE_LIBRARY_PATH</a>:</p>\n\n<pre><code>set(CMAKE_LIBRARY_PATH \"C:\\\\mongo-c-driver\\\\bin\")\n# Now find_library should be able to find libraries\nfind_library(MONGODB_LIBRARY mongoc-1.0)\nfind_library(BSON_LIBRARY bson-1.0)\n</code></pre>\n\n<p>There are others way for hint to <code>find_library</code>, see <a href=\"https://cmake.org/cmake/help/v3.0/command/find_library.html\" rel=\"nofollow\">its documentation</a> about search algorithm it uses.</p>\n"}], "owner": {"reputation": 48, "user_id": 6530204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44174e854cd3aaf9a36a83022235c37d?s=128&d=identicon&r=PG&f=1", "display_name": "C Guy", "link": "https://stackoverflow.com/users/6530204/c-guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 378, "favorite_count": 1, "accepted_answer_id": 38116030, "answer_count": 1, "score": 2, "last_activity_date": 1467304983, "creation_date": 1467230522, "last_edit_date": 1467304983, "question_id": 38109060, "link": "https://stackoverflow.com/questions/38109060/clion-mongodb-dependency-setup", "title": "Clion mongodb dependency setup", "body": "<p>I am getting the following error:</p>\n\n<pre><code>--Configuring incomplete, errors occurred!\nCMake Error: The following variables are used in this project, but they are set to NOTFOUND.\nSee also \"C:/Users/GyuriX/.CLion2016.1/system/cmake/generated/Projects-33418280/33418280/Debug/CMakeFiles/CMakeOutput.log\".\nPlease set them or make sure they are set and tested correctly in the CMake files:\nBSON_LIBRARY\n    linked by target \"Projects\" in directory D:/DEV/C/Projects\nMONGODB_LIBRARY\n    linked by target \"Projects\" in directory D:/DEV/C/Projects\n\nMakefile:443: recipe for target 'cmake_check_build_system' failed\nmingw32-make.exe: *** [cmake_check_build_system] Error 1\n</code></pre>\n\n<p>When I try to compile just a simple Hello World program using the following CMakeLists.txt:</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8)\nproject(Projects)\n\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=c++11\")\nset(SOURCE_FILES main.cpp)\n\ninclude_directories(C:/mongo-c-driver/lib)\n\nfind_library(MONGODB_LIBRARY mongoc-1.0)\nfind_library(BSON_LIBRARY bson-1.0)\n\nadd_executable(Projects ${SOURCE_FILES})\ntarget_link_libraries(Projects ${MONGODB_LIBRARY} ${BSON_LIBRARY})\n</code></pre>\n\n<p>I have compiled the required libraries based on what the mongodb wiki said, so I have the library files:\n<a href=\"http://i.stack.imgur.com/bVjdO.png\" rel=\"nofollow\">The files I have compiled</a></p>\n\n<p>So the question is that what am I doing wrong and what should I do to be able to use the mongodb in CLion.</p>\n"}, {"tags": ["c++", "eclipse-cdt"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1467231534, "post_id": 38109035, "comment_id": 63652191, "body": "Maybe turn off code analysis? <code>Preferences-&gt;C&#47;C++-&gt;Code Analysis</code> (I always have it turned off because the compiler gives good warnings)"}, {"owner": {"reputation": 363, "user_id": 2158663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5a567572df8c44198a40591fdfddfa6?s=128&d=identicon&r=PG", "display_name": "Robert Bartlett-Schneider", "link": "https://stackoverflow.com/users/2158663/robert-bartlett-schneider"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1467231999, "post_id": 38109035, "comment_id": 63652392, "body": "That&#39;s a pretty big hammer unfortunately. It&#39;s quite handy to see some errors in real time as I work. I have changed the &quot;invalid arguments&quot; setting in the Code Analysis settings to an &quot;info&quot; as opposed to an &quot;error&quot;, but that also runs the risk of masking an error until compile time."}, {"owner": {"reputation": 44207, "user_id": 141719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5026f7977fda423dc990cc74b2ad4c9d?s=128&d=identicon&r=PG&f=1", "display_name": "HighCommander4", "link": "https://stackoverflow.com/users/141719/highcommander4"}, "edited": false, "score": 0, "creation_date": 1484872185, "post_id": 38109035, "comment_id": 70700694, "body": "The C++ standard says <code>char</code> may, at the implementation&#39;s discretion, act as a signed or unsigned integer type, but in either case, it&#39;s still a distinct type from both <code>signed char</code> and <code>unsigned char</code>. That means it&#39;s not valid to pass an <code>unsigned char*</code> to a function expecting a <code>char*</code>. If your compiler accepts this, it&#39;s a nonstandard extension supported by your compiler, which CDT does not support."}], "answers": [{"tags": [], "owner": {"reputation": 363, "user_id": 2158663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5a567572df8c44198a40591fdfddfa6?s=128&d=identicon&r=PG", "display_name": "Robert Bartlett-Schneider", "link": "https://stackoverflow.com/users/2158663/robert-bartlett-schneider"}, "is_accepted": false, "score": 0, "last_activity_date": 1473205254, "creation_date": 1473205254, "answer_id": 39359294, "question_id": 38109035, "link": "https://stackoverflow.com/questions/38109035/eclipse-cdt-treat-char-as-unsigned/39359294#39359294", "title": "Eclipse CDT - Treat &#39;char&#39; as unsigned", "body": "<p>The closest I've been able to achieve was to add a globally defined symbol to the project ( Project -> Properties -> Paths and Symbols -> Symbols ) which defines <code>char</code> as <code>unsigned char</code>.</p>\n\n<p>For the most part it works, since most of the legacy code I'm concerned with doesn't already use unsigned char (which would screw with this workaround). It even seems to behave well with the typedefs we have for integral types of specific widths (<code>U8</code> for instance is defined as <code>typedef unsigned char U8</code>). This solution will not work well where <code>unsigned char</code> is used in files as it'll get expanded to <code>unsigned unsigned char</code>.</p>\n"}], "owner": {"reputation": 363, "user_id": 2158663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5a567572df8c44198a40591fdfddfa6?s=128&d=identicon&r=PG", "display_name": "Robert Bartlett-Schneider", "link": "https://stackoverflow.com/users/2158663/robert-bartlett-schneider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 259, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1473205254, "creation_date": 1467230430, "last_edit_date": 1467231459, "question_id": 38109035, "link": "https://stackoverflow.com/questions/38109035/eclipse-cdt-treat-char-as-unsigned", "title": "Eclipse CDT - Treat &#39;char&#39; as unsigned", "body": "<p>I have a legacy project for an old compiler into which we pass a compiler flag (something like -DCHAR_AS_UNSIGNED) to treat the 'char' type as unsigned. The compiler is a really old proprietary one we run separately in the command line instead of through Eclipse. There's a lot of old code we have which uses unsigned char* for strings rather than char*. By default, Eclipse handles this as it should and warns that passing unsigned char* to routines expecting char* is not right. Is there a way to have Eclipse ignore these and treat it like our compiler does?</p>\n"}, {"tags": ["c++", "qt", "qtcpsocket"], "comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 3, "creation_date": 1467230831, "post_id": 38109000, "comment_id": 63651796, "body": "TCP does not enforce any message framing boundaries, so the application has no control over how many bytes will be received together vs separately.  The only thing you can do is have your receiver keep reading bytes, in a loop, until it has read &quot;enough&quot; bytes (for whatever definition of &quot;enough&quot; your app wants to use)."}, {"owner": {"reputation": 11885, "user_id": 2257050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VknAq.png?s=128&g=1", "display_name": "thuga", "link": "https://stackoverflow.com/users/2257050/thuga"}, "edited": false, "score": 0, "creation_date": 1467294825, "post_id": 38109000, "comment_id": 63681466, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/20288282/how-to-read-complete-data-in-qtcpsocket\">How to read complete data in QTcpSocket?</a>"}], "owner": {"reputation": 197, "user_id": 5419094, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh6.googleusercontent.com/-hLzHGazrjPA/AAAAAAAAAAI/AAAAAAAAAp4/cz72bkSfmKo/photo.jpg?sz=128", "display_name": "Krzysztof Bieda", "link": "https://stackoverflow.com/users/5419094/krzysztof-bieda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513082160, "creation_date": 1467230314, "last_edit_date": 1513082160, "question_id": 38109000, "link": "https://stackoverflow.com/questions/38109000/qtcpsocket-increase-send-length", "title": "QTcpSocket - increase send length", "body": "<p>I have problem that I only get 16 bytes from my QTcpSocket where I obtained transmission Client-server.\nI would like to have ability to send more data at one time ( longer than 16 bytes).</p>\n\n<p>I send data by (length is here about 33):</p>\n\n<pre><code>  if(socket-&gt;isWritable())\n    {\n        socket-&gt;write(frame,lenght);\n        socket-&gt;waitForBytesWritten();\n    }\n</code></pre>\n\n<p>And recieve:</p>\n\n<pre><code>socket-&gt;setReadBufferSize(5000);\nQString message = socket-&gt;readAll();\n</code></pre>\n\n<p>Has anybody know why the length is limited?</p>\n"}, {"tags": ["c++", "qt", "signals-slots", "qthread"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1467230345, "post_id": 38108949, "comment_id": 63651545, "body": "Do exactly what the error message says!"}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1467230353, "post_id": 38108949, "comment_id": 63651549, "body": "And what happened after adding the <a href=\"http://doc.qt.io/qt-5/qmetatype.html#Q_DECLARE_METATYPE\" rel=\"nofollow noreferrer\"><code>Q_DECLARE_METATYPE</code></a> macro Qt&#39;s error so helpfully told you to add?"}, {"owner": {"reputation": 277, "user_id": 5279923, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/1069277833091079/picture?type=large", "display_name": "Basti An", "link": "https://stackoverflow.com/users/5279923/basti-an"}, "edited": false, "score": 0, "creation_date": 1467231160, "post_id": 38108949, "comment_id": 63651965, "body": "After adding Q_DECLARE_METATYPE(Ui::SerialSetting) at the end of my headerfile of the class the compiler shows this message: invalid application of &#39;sizeof&#39; to incomplete type &#39;Ui::SerialSetting&#39;          isLarge = (sizeof(T)&gt;sizeof(void*)),"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1467231687, "post_id": 38108949, "comment_id": 63652257, "body": "You probably need to add an include. Can you point out what file / line this error is on?"}, {"owner": {"reputation": 277, "user_id": 5279923, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/1069277833091079/picture?type=large", "display_name": "Basti An", "link": "https://stackoverflow.com/users/5279923/basti-an"}, "edited": false, "score": 0, "creation_date": 1467231780, "post_id": 38108949, "comment_id": 63652294, "body": "the compiler says the error occurs in file qtypeinfo.h in line 60.."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1467234462, "post_id": 38108949, "comment_id": 63653636, "body": "The code you posted does not have the <code>SerialSetting</code> class in the <code>Ui</code> namespace. Something is not right. Please post the actual code that is causing the problem (remember the posted code should be <i>*minimal*</i> too). Also, is all your code in the header? If not logically separate the posted code to show which files have what content."}], "answers": [{"tags": [], "owner": {"reputation": 3754, "user_id": 4732082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781cea048e688814961606ddf35c5881?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/4732082/anonymous"}, "is_accepted": true, "score": 2, "last_activity_date": 1467241891, "creation_date": 1467241891, "answer_id": 38111534, "question_id": 38108949, "link": "https://stackoverflow.com/questions/38108949/qt-cannot-queue-arguments-of-type-myclass/38111534#38111534", "title": "Qt: Cannot queue arguments of type MyClass", "body": "<p>You can't call <code>Q_DECLARE_METATYPE</code> on a forward-declared class (<code>Ui::SerialSetting</code>). Also, you need to declare the type <em>that the signal uses as a parameter</em>, in this case, <code>SerialSetting::Settings</code>.</p>\n\n<p>Replace</p>\n\n<pre><code>Q_DECLARE_METATYPE(Ui::SerialSetting)\n</code></pre>\n\n<p>with</p>\n\n<pre><code>Q_DECLARE_METATYPE(SerialSetting::Settings)\n</code></pre>\n\n<p>and you should be fine.</p>\n"}], "owner": {"reputation": 277, "user_id": 5279923, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/1069277833091079/picture?type=large", "display_name": "Basti An", "link": "https://stackoverflow.com/users/5279923/basti-an"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 805, "favorite_count": 0, "accepted_answer_id": 38111534, "answer_count": 1, "score": 0, "last_activity_date": 1467241891, "creation_date": 1467230137, "last_edit_date": 1467231508, "question_id": 38108949, "link": "https://stackoverflow.com/questions/38108949/qt-cannot-queue-arguments-of-type-myclass", "title": "Qt: Cannot queue arguments of type MyClass", "body": "<p>I'm trying to pass my Class trough a signal with this:</p>\n\n<pre><code>connect(this, SIGNAL(SIG_connectSerial(SerialSetting::Settings)), serial, SLOT(openConnection(SerialSetting::Settings)),Qt::QueuedConnection);\n</code></pre>\n\n<p>The class I want to pass is that class:</p>\n\n<pre><code>#ifndef SERIALSETTING_H\n#define SERIALSETTING_H\n\n#include &lt;QWidget&gt;\n#include &lt;QtSerialPort/QSerialPort&gt;\n\n\n\nnamespace Ui {\nclass SerialSetting;\n}   \n\nclass QIntValidator;\n\nclass SerialSetting : public QWidget\n{\n    Q_OBJECT\n\npublic:\n    struct  Settings {\n            QString portName;\n            qint32 baudRate;\n    };\n\n    Settings settings();\n\n\n\npublic:\n    explicit SerialSetting(QWidget *parent = 0);\n    ~SerialSetting();\n\nprivate slots:\n    void apply();\n\n    void on_btnApply_clicked();\n\nprivate:\n    void fillPortsParameters();\n    void fillPortsInfo();\n    void updateSettings();\n\n\nprivate:\n    Ui::SerialSetting *ui;\n    Settings currentSettings;\n    QIntValidator *intValidator;\n};\n\n#endif // SERIALSETTING_H\n\n#include \"serialsetting.h\"\n#include \"ui_serialsetting.h\"\n\n#include &lt;QtSerialPort/QSerialPortInfo&gt;\n#include &lt;QIntValidator&gt;\n#include &lt;QLineEdit&gt;\n\nQT_USE_NAMESPACE\n\nstatic const char blankString[] = QT_TRANSLATE_NOOP(\"SettingsDialog\", \"N/A\");\n\nSerialSetting::SerialSetting(QWidget *parent) :\n    QWidget(parent),\n    ui(new Ui::SerialSetting)\n{\n    ui-&gt;setupUi(this);\n\n    intValidator = new QIntValidator(0, 4000000, this);\n\n    //ui-&gt;cboBaudRate-&gt;setInsertPolicy(QComboBox::NoInsert);\n\n    fillPortsParameters(); //call function to fill comboboxes\n\n    connect(ui-&gt;btnApply, SIGNAL(clicked()),this, SLOT(apply()));\n}\n\nSerialSetting::~SerialSetting()\n{\n    delete ui;\n}\n\nvoid SerialSetting::fillPortsParameters()\n{\n\n//fill cboComport with all available comports\nforeach(const QSerialPortInfo &amp;info, QSerialPortInfo::availablePorts())\n    {\n    ui-&gt;cboComport-&gt;addItem(info.portName());\n    }\n\n}\n\nvoid SerialSetting::apply()\n{\n    SerialSetting::currentSettings.portName = ui-&gt;cboComport-&gt;currentText();\n    hide();\n}\n\nSerialSetting::Settings SerialSetting::settings()\n{\n    return SerialSetting::currentSettings;\n}\n\nvoid SerialSetting::on_btnApply_clicked()\n{\n\n}\n</code></pre>\n\n<p>The compiler throws this exception:\nQObject::connect: Cannot queue arguments of type 'SerialSetting::Settings'\n(Make sure 'SerialSetting::Settings' is registered using qRegisterMetaType().)\nI tried <code>qRegisterMetaType&lt;SerialSetting&gt;();</code> but this ended in the following error:</p>\n\n<pre><code>static assertion failed: Type is not registered, please use the Q_DECLARE_METATYPE macro to make it known to Qt's meta-object system\n #define Q_STATIC_ASSERT_X(Condition, Message) static_assert(bool(Condition), Message)\n</code></pre>\n\n<p>Adding the Makro <code>Q_DECLARE_METATYPE(Ui::SerialSetting)</code> at the end of the class-header throws another error:</p>\n\n<pre><code>invalid application of 'sizeof' to incomplete type 'Ui::SerialSetting'\n         isLarge = (sizeof(T)&gt;sizeof(void*)),\n</code></pre>\n"}, {"tags": ["c++", "macros", "rapidjson"], "comments": [{"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 1, "creation_date": 1467230425, "post_id": 38108876, "comment_id": 63651591, "body": "do you include rapidjson in stdafx.h?"}, {"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1467230640, "post_id": 38108876, "comment_id": 63651694, "body": "The pattern seems wrong. Did you want to change the macro inside of rapidjson for this translation unit, or simply inside your translation unit? If the latter, put the redefine after the rapidjson headers. Otherwise, rapidjson might simply redefine the macro itself"}, {"owner": {"reputation": 2587, "user_id": 670446, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/opku1.png?s=128&g=1", "display_name": "bpeikes", "link": "https://stackoverflow.com/users/670446/bpeikes"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1467295473, "post_id": 38108876, "comment_id": 63682059, "body": "@jaggedSpire - I did not include rapidjson.h in stdafx.h, so I&#39;m not sure why it won&#39;t override the macro."}, {"owner": {"reputation": 2587, "user_id": 670446, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/opku1.png?s=128&g=1", "display_name": "bpeikes", "link": "https://stackoverflow.com/users/670446/bpeikes"}, "reply_to_user": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1467295532, "post_id": 38108876, "comment_id": 63682114, "body": "@KABoissonneault - I added some info to the question. Specifically about how rapidjson.h does the define. It appears that you are supposed to define the macro before including it, not after."}], "answers": [{"comments": [{"owner": {"reputation": 2587, "user_id": 670446, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/opku1.png?s=128&g=1", "display_name": "bpeikes", "link": "https://stackoverflow.com/users/670446/bpeikes"}, "edited": false, "score": 0, "creation_date": 1467295708, "post_id": 38109104, "comment_id": 63682264, "body": "I added some info into the question, but the docs specify that you should define RAPIDJSON_ASSERT before including the file, not after. What doesn&#39;t make sense, is that it appears that the #ifndef statement rapidjson.h is somehow being checked only once across all compilation units."}, {"owner": {"reputation": 6218, "user_id": 20392, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9167d52e6cf674d8af8f4280a5c9e059?s=128&d=identicon&r=PG", "display_name": "rep_movsd", "link": "https://stackoverflow.com/users/20392/rep-movsd"}, "reply_to_user": {"reputation": 2587, "user_id": 670446, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/opku1.png?s=128&g=1", "display_name": "bpeikes", "link": "https://stackoverflow.com/users/670446/bpeikes"}, "edited": false, "score": 1, "creation_date": 1467381223, "post_id": 38109104, "comment_id": 63724004, "body": "Turn off precompiled headers completely and try?"}, {"owner": {"reputation": 2587, "user_id": 670446, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/opku1.png?s=128&g=1", "display_name": "bpeikes", "link": "https://stackoverflow.com/users/670446/bpeikes"}, "edited": false, "score": 0, "creation_date": 1467698544, "post_id": 38109104, "comment_id": 63817038, "body": "I was thinking that precompiled headers might be the issue. I&#39;ll give that a try."}], "tags": [], "owner": {"reputation": 6218, "user_id": 20392, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9167d52e6cf674d8af8f4280a5c9e059?s=128&d=identicon&r=PG", "display_name": "rep_movsd", "link": "https://stackoverflow.com/users/20392/rep-movsd"}, "is_accepted": false, "score": 1, "last_activity_date": 1467230692, "creation_date": 1467230692, "answer_id": 38109104, "question_id": 38108876, "link": "https://stackoverflow.com/questions/38108876/can-a-macro-redefinition-be-applied-to-single-cpp-file/38109104#38109104", "title": "Can a macro redefinition be applied to single cpp file?", "body": "<p>It seems like you want to change the definition of RAPIDJSON_ASSERT for the rapidjson code itself</p>\n\n<p>If so, you need to add a #define after the place where it is defined. Unless you want to edit the rapidjson.h file, the only alternative is to do this:</p>\n\n<pre><code>#include \"stdafx.h\" // for windows\n\n// One would assume that the macro gets defined somewhere inside here\n#include \"rapidjson/rapidjson.h\"\n\n// Compiler will complain about macro redefinition without this #undef\n#undef RAPIDJSON_ASSERT    \n#define RAPIDJSON_ASSERT(x) if(!(x)) throw std::logic_error(\"rapidjson exception\");\n\n#include \"rapidjson/document.h\"\n#include \"rapidjson/stringbuffer.h\"\n#include \"rapidjson/writer.h\"\n</code></pre>\n\n<p>Now the definition of RAPIDJSON_ASSERT is changed for the rest of the header files. You don't need the push_macro and pop_macro shenanigans - macros only are valid for each unit</p>\n\n<p>Note that it's not a a good thing to redefine things for libraries using #define </p>\n"}], "owner": {"reputation": 2587, "user_id": 670446, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/opku1.png?s=128&g=1", "display_name": "bpeikes", "link": "https://stackoverflow.com/users/670446/bpeikes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 659, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467295411, "creation_date": 1467229835, "last_edit_date": 1467295411, "question_id": 38108876, "link": "https://stackoverflow.com/questions/38108876/can-a-macro-redefinition-be-applied-to-single-cpp-file", "title": "Can a macro redefinition be applied to single cpp file?", "body": "<p>I'm using rapidjson, which is an all header library. In <code>rapidjson.h</code>, there is a macro <code>RAPIDJSON_ASSERT</code>, in one of my cpp files, I would like to redefine it, so I have this code at the top of my file:</p>\n\n<pre><code>#include \"stdafx.h\" // for windows\n#pragma push_macro(\"RAPIDJSON_ASSERT\")\n#define RAPIDJSON_ASSERT(x) if(!(x)) throw std::logic_error(\"rapidjson exception\");\n\n#include \"rapidjson/rapidjson.h\"\n#include \"rapidjson/document.h\"\n#include \"rapidjson/stringbuffer.h\"\n#include \"rapidjson/writer.h\"\n\n....\n....\n#pragma pop_macro(\"RAPIDJSON_ASSERT\")\n</code></pre>\n\n<p>Here is the whay that <code>rapidjson.h</code> defines <code>RAPIDJSON_ASSERT</code>:</p>\n\n<pre><code>#ifndef RAPIDJSON_ASSERT\n#include &lt;cassert&gt;\n#define RAPIDJSON_ASSERT(x) assert(x)\n#endif // RAPIDJSON_ASSERT\n</code></pre>\n\n<p>The documentation states that to override the <code>RAPIDJSON_ASSERT</code> logic, you just have to define <code>RAPIDJSON_ASSERT</code> before you include any of the files.</p>\n\n<p>The issue is that when I run the code in the debugger, <code>RAPIDJSON_ASSERT</code> is not being redefined. I checked <code>stdafx.h</code> for anything which would include the rapidjson header files, and there isn't anything.</p>\n\n<p>I was under the assumption that each compilation unit should run through the header files.</p>\n\n<p>Note that if I move the redefinition of the macro into <code>stdafx.h</code> I get the macro redefined, but I was hoping to be able to do it per compilation unit.</p>\n"}, {"tags": ["c++", "qt", "opengl"], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 6449365, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ac61929d7d74d33e2b60d2acb13362e?s=128&d=identicon&r=PG&f=1", "display_name": "Izzy88", "link": "https://stackoverflow.com/users/6449365/izzy88"}, "edited": false, "score": 0, "creation_date": 1467236623, "post_id": 38109823, "comment_id": 63654608, "body": "thank you for your suggestion! Unfortunately i have an error while compiling <code>ui-&gt;setupUi(this)</code> inside OpenGLWindow constructor. To be precise it is  : <i>*no matching function for call to &#39;Ui::NewWindow::setupUi(OpenGLWindow</i>)&#39;ui-&gt;setupUi(this); **. Do you know how to fix it?"}, {"owner": {"reputation": 632, "user_id": 1105042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a41c3659477e113e3c32ccda5eba3671?s=128&d=identicon&r=PG", "display_name": "meepzh", "link": "https://stackoverflow.com/users/1105042/meepzh"}, "reply_to_user": {"reputation": 93, "user_id": 6449365, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ac61929d7d74d33e2b60d2acb13362e?s=128&d=identicon&r=PG&f=1", "display_name": "Izzy88", "link": "https://stackoverflow.com/users/6449365/izzy88"}, "edited": false, "score": 0, "creation_date": 1467236962, "post_id": 38109823, "comment_id": 63654754, "body": "Whoops! Sorry. It seems like only QWidgets support the Qt Designer forms (<a href=\"http://doc.qt.io/qt-5/qwindow.html#details\" rel=\"nofollow noreferrer\">documentation here</a>). Maybe you could change the inheritance from QWindow to QMainWindow? Sorry, this doesn&#39;t seem like a super easy fix :/"}, {"owner": {"reputation": 93, "user_id": 6449365, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ac61929d7d74d33e2b60d2acb13362e?s=128&d=identicon&r=PG&f=1", "display_name": "Izzy88", "link": "https://stackoverflow.com/users/6449365/izzy88"}, "edited": false, "score": 0, "creation_date": 1467238864, "post_id": 38109823, "comment_id": 63655545, "body": "No worries, the problem is that almost all the methods inside OpenGLWindow, which is a quite long and complex class, work only if inheriting from QWindow. Thank you anyway!"}], "tags": [], "owner": {"reputation": 632, "user_id": 1105042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a41c3659477e113e3c32ccda5eba3671?s=128&d=identicon&r=PG", "display_name": "meepzh", "link": "https://stackoverflow.com/users/1105042/meepzh"}, "is_accepted": false, "score": 0, "last_activity_date": 1467233552, "creation_date": 1467233552, "answer_id": 38109823, "question_id": 38108745, "link": "https://stackoverflow.com/questions/38108745/adapt-qt-window-form-to-prebuilt-qwindow/38109823#38109823", "title": "Adapt Qt window form to prebuilt QWindow", "body": "<p>I'm not completely sure, but this general idea should work, assuming the window class you created is named NewWindow:</p>\n\n<pre><code>class OpenGLWindow : public QWindow {\n    Ui::NewWindow *ui; // Add this variable\n    /* rest of class */\n}\n\n#include &lt;ui_newwindow.h&gt;\nOpenGLWindow::OpenGLWindow(QScreen* screen): QWindow(screen), ui(new Ui::NewWindow) {\n    ui-&gt;setupUi(this);\n    /* rest of constructor */\n}\n</code></pre>\n\n<p>And then don't forget to delete <code>ui</code> in the destructor.</p>\n"}], "owner": {"reputation": 93, "user_id": 6449365, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ac61929d7d74d33e2b60d2acb13362e?s=128&d=identicon&r=PG&f=1", "display_name": "Izzy88", "link": "https://stackoverflow.com/users/6449365/izzy88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1467233552, "creation_date": 1467229410, "question_id": 38108745, "link": "https://stackoverflow.com/questions/38108745/adapt-qt-window-form-to-prebuilt-qwindow", "title": "Adapt Qt window form to prebuilt QWindow", "body": "<p>I'm testing a project I've downloaded that doesn't have a \"mainwindow.ui\" but the main window is created programmatically inheriting QWindow instead.</p>\n\n<pre><code>OpenGLWindow::OpenGLWindow(QScreen* screen ): QWindow(screen)\n</code></pre>\n\n<p>It works properly but of course adding new elements on this window is not as quick as it would be using the Qt designer. Therefore I was wondering if there is a way, after creating a new form with the Qt designer, to promote the new window to this existing OpenGLWindow so that I can view its content in the \"newwindow.ui\".  I hope this makes sense.</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 2, "creation_date": 1467229503, "post_id": 38108703, "comment_id": 63651137, "body": "I don&#39;t know why you&#39;re implementing your own, so if it&#39;s so you can use it, just FYI: <a href=\"http://en.cppreference.com/w/cpp/types/remove_pointer\" rel=\"nofollow noreferrer\">the standard library has <code>std::remove_pointer</code></a>."}], "answers": [{"tags": [], "owner": {"reputation": 52177, "user_id": 2073257, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91182220a689e37a8939785bbe491000?s=128&d=identicon&r=PG", "display_name": "Daniel Frey", "link": "https://stackoverflow.com/users/2073257/daniel-frey"}, "is_accepted": false, "score": 3, "last_activity_date": 1467229504, "creation_date": 1467229504, "answer_id": 38108774, "question_id": 38108703, "link": "https://stackoverflow.com/questions/38108703/getting-type-that-pointer-type-is-pointing-to/38108774#38108774", "title": "Getting type that pointer type is pointing to", "body": "<p>You need a template specialization:</p>\n\n<pre><code>// first declare the general template...\ntemplate&lt;class T&gt;\nstruct pointer_lower_level;\n\n// ...then provide a partial specialization for pointers\ntemplate&lt;class T&gt;\nstruct pointer_lower_level&lt;T*&gt;\n// note this... ----------^^^^\n{\n    typedef T type_pointed;\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2928, "user_id": 1603365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/K4qJN.png?s=128&g=1", "display_name": "md5i", "link": "https://stackoverflow.com/users/1603365/md5i"}, "is_accepted": true, "score": 6, "last_activity_date": 1467229934, "last_edit_date": 1467229934, "creation_date": 1467229527, "answer_id": 38108785, "question_id": 38108703, "link": "https://stackoverflow.com/questions/38108703/getting-type-that-pointer-type-is-pointing-to/38108785#38108785", "title": "Getting type that pointer type is pointing to", "body": "<p>Assuming that you don't want to use <a href=\"http://en.cppreference.com/w/cpp/types/remove_pointer\" rel=\"nofollow\"><code>std::remove_pointer</code></a>, I think what you want is to use a <a href=\"http://en.cppreference.com/w/cpp/language/partial_specialization\" rel=\"nofollow\"><em>partial template specialization</em></a>.</p>\n\n<pre><code>template &lt;typename&gt;\nstruct pointer_lower_level;\n\ntemplate &lt;typename T&gt;\nstruct pointer_lower_level&lt;T*&gt; {\n    using type_pointed = T;\n};\n</code></pre>\n"}], "owner": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 38108785, "answer_count": 2, "score": 2, "last_activity_date": 1467229934, "creation_date": 1467229256, "question_id": 38108703, "link": "https://stackoverflow.com/questions/38108703/getting-type-that-pointer-type-is-pointing-to", "title": "Getting type that pointer type is pointing to", "body": "<p>I wanted to make helper struct that would contain typedef of type, that template pointer parameter is pointing to:</p>\n\n<pre><code>template&lt;class T*&gt;\nstruct pointer_lower_level\n{\n    typedef typename T type_pointed;\n};\n</code></pre>\n\n<p>But it gives me errors (GCC 5.3.0):</p>\n\n<pre><code>error: expected nested-name-specifier before 'T'\n     typedef typename T type_pointed;\n                      ^\nerror: expected ';' at end of member declaration\n\nerror: 'type_pointed' does not name a type\n     typedef typename T type_pointed;\n                        ^\n</code></pre>\n\n<p>To me it looks like legal syntax, but well, I had very long day so I may be wrong.</p>\n"}, {"tags": ["c++", "mingw"], "comments": [{"owner": {"reputation": 296, "user_id": 6296291, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e4a1ee5bfcc3540a22ca7b61e6bd92e7?s=128&d=identicon&r=PG&f=1", "display_name": "c1646091", "link": "https://stackoverflow.com/users/6296291/c1646091"}, "edited": false, "score": 0, "creation_date": 1467236335, "post_id": 38108582, "comment_id": 63654485, "body": "If anyone wants additional details, feel free to ask in the comments."}], "owner": {"reputation": 296, "user_id": 6296291, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e4a1ee5bfcc3540a22ca7b61e6bd92e7?s=128&d=identicon&r=PG&f=1", "display_name": "c1646091", "link": "https://stackoverflow.com/users/6296291/c1646091"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1467228833, "creation_date": 1467228833, "question_id": 38108582, "link": "https://stackoverflow.com/questions/38108582/lubuntu-mingw-undefined-references-missing-gl-libraries", "title": "Lubuntu MinGW undefined references [missing GL libraries?]", "body": "<p>Trying to compile a third party library on MinGW in Code::Blocks on Lubuntu, and despite my absolute best efforts to eliminate the following undefined references which I've spent ages on, nothing is fixing the issues:</p>\n\n<pre><code>undefined reference to `_sfwgl_ext_EXT_swap_control\nundefined reference to `_sfwgl_ext_ARB_pixel_format\nundefined reference to `_sf_ptrc_wglChoosePixelFormatARB\nundefined reference to `_sf_ptrc_wglGetPixelFormatAttribivARB\nundefined reference to `_sfwgl_ext_ARB_multisample\nundefined reference to `_sf_ptrc_wglGetPixelFormatAttribivARB\nundefined reference to `_sfwgl_ext_ARB_pixel_format\nundefined reference to `_sfwgl_ext_ARB_create_context\nundefined reference to `_sfwgl_ext_ARB_create_context_profile\nundefined reference to `_sf_ptrc_wglCreateContextAttribsARB\nundefined reference to `_sf_ptrc_wglCreateContextAttribsARB\nundefined reference to `_sf_ptrc_wglGetPixelFormatAttribivARB\nundefined reference to `_sfwgl_ext_ARB_multisample\nundefined reference to `_sf_ptrc_wglGetPixelFormatAttribivARB\nundefined reference to `_sfwgl_LoadFunctions\n</code></pre>\n\n<p>From what I can tell is it's possibly some sort of missing GL library or graphics library, however I already have opengl32, gdi32, glu32, glut32 and gle added to the link library which has left the following undefined references untouched.</p>\n\n<p>How do I fix the above errors?</p>\n\n<p>[If it is a missing library or libraries, could I be linked to the download page for the appropriate headers and .a files for MinGW on linux? Thanks.]</p>\n"}, {"tags": ["c++", "qt", "memory", "combobox"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1467228814, "post_id": 38108486, "comment_id": 63650789, "body": "Are you using Qt binaries for your compiler version? Binaries built for any other version of Visual Studio will have UB / heap corruption due to having more than 1 CRT + standard library incompatibilities."}, {"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1467228941, "post_id": 38108486, "comment_id": 63650860, "body": "I think so. Qt5Multimedia.dll is in the folder with the target. x64."}, {"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1467229001, "post_id": 38108486, "comment_id": 63650891, "body": "Maybe I should build from source. I downloaded them from sourceforge. I think I probably got the right version though. I will check. What you say is consistent with the behavior I am experiencing."}, {"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1467235902, "post_id": 38108486, "comment_id": 63654285, "body": "I double checked and I am quite sure I am using Qt built with msvc2013."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1467236229, "post_id": 38108486, "comment_id": 63654420, "body": "Then there is some other reason for heap corruption. I can&#39;t see it in the code however."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1467236297, "post_id": 38108486, "comment_id": 63654462, "body": "Are there any other 3rd party libs / dlls that you are linking with?"}, {"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1467237216, "post_id": 38108486, "comment_id": 63654847, "body": "Nope, just qt5 libs. I realize now that I did in fact build qt from source. I used the flag -platform win32-msvc2013, but I am pretty sure I did from a plain old command prompt. I am in the process of re-building using the vs2012 command prompt set up for 2013 stuff as per this: <a href=\"http://stackoverflow.com/questions/21476588/where-is-developer-command-prompt-for-vs2013\" title=\"where is developer command prompt for vs2013\">stackoverflow.com/questions/21476588/&hellip;</a> In a few hours I&#39;ll find out if this makes a difference."}, {"owner": {"reputation": 7180, "user_id": 2666212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874561e399041a45c82c2ca6652400b6?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2666212/mike"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1467238783, "post_id": 38108486, "comment_id": 63655511, "body": "I can confirm that both your code snippets (with <code>std::cout</code> and without <code>std::cout</code>) execute and exit without any errors here, using Qt 5.6 with MinGw 32-bit, MSVC2013 32-bit and MSVC2013 64-bit kits. I think there is a problem with the Qt binaries you are using as pointed out by @drescherjm . . ."}, {"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "edited": false, "score": 0, "creation_date": 1467313479, "post_id": 38108486, "comment_id": 63693806, "body": "I just installed a fresh copy of Qt5.6.1 (downloaded the installer <a href=\"https://www.qt.io/download-open-source/#section-2\" rel=\"nofollow noreferrer\">qt.io/download-open-source/#section-2</a>). Same errors. Once upon a time, all of this worked. Maybe there is some other source of heap corruption that we haven&#39;t thought of. In the meantime I will try 5.6.0 etc"}, {"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "edited": false, "score": 0, "creation_date": 1467317160, "post_id": 38108486, "comment_id": 63695811, "body": "As a sanity check, I compiled the code above in VS2009"}, {"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "edited": false, "score": 0, "creation_date": 1467317671, "post_id": 38108486, "comment_id": 63696075, "body": "As a sanity check, I compiled the code above (without camera stuff) in VS2008 using qt4 and the same problem occurs. I also added a std::cout from a combobox-&gt;currentText().toStdString() in another, working Qt based application (also VS2008 qt4) and everything there is lovely. What the hell is going on here?"}], "answers": [{"tags": [], "owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "is_accepted": false, "score": 0, "last_activity_date": 1467416498, "last_edit_date": 1467416498, "creation_date": 1467398226, "answer_id": 38152000, "question_id": 38108486, "link": "https://stackoverflow.com/questions/38108486/qt-memory-issues-with-camerainfo-and-combobox-currenttext/38152000#38152000", "title": "qt memory issues with camerainfo and combobox.currentText()", "body": "<p>Now it works. I kept the same source code, but completely scrapped the existing project and started a new one from scratch. </p>\n\n<p>I've discovered that if I set the Runtime Library flag to Multi-Threaded DLL Debug, I will get access violation errors. If I set it to Multi-Threaded DLL, it is fine.</p>\n\n<p>There may have been some other project settings that contributed, but this seems to be the main culprit.</p>\n"}], "owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467416498, "creation_date": 1467228509, "question_id": 38108486, "link": "https://stackoverflow.com/questions/38108486/qt-memory-issues-with-camerainfo-and-combobox-currenttext", "title": "qt memory issues with camerainfo and combobox.currentText()", "body": "<p>I am trying to grab the names of webcams plugged into my computer and shove them into a combobox, then access the name later. Here is my code:</p>\n\n<pre><code>#include &lt;QApplication&gt;\n#include &lt;QComboBox&gt;\n#include &lt;QCameraInfo&gt;\n#include &lt;iostream&gt;\n\nint main(int argc, char *argv[])\n{\n\n\n    QApplication app{ argc, argv };\n    QComboBox combo;\n    QList&lt;QCameraInfo&gt; info = QCameraInfo::availableCameras();\n\n    foreach(QCameraInfo i, info)\n        combo.addItem(i.description());\n    combo.show();\n\n    std::cout &lt;&lt; combo.currentText().toStdString() &lt;&lt; std::endl;\n    return app.exec();\n\n\n}\n</code></pre>\n\n<p>The code creates and shows a combo box that has the name of a webcam that I have plugged in to the computer. It will then toss me an access violation exception in trying to print the combo box string to the console. </p>\n\n<p>If I comment the cout line out, all is well, but on exit I get a Debug Assertion Failed! message:</p>\n\n<pre><code>Expression: _BLOCK_TYPE_IS_VALID(pHead-&gt;nBlockUse)\n</code></pre>\n\n<p>which I take to mean I am deleting an object that has been deleted (the QString in the combobox???).</p>\n\n<p>If I change the code to fill the combo box with dummies:</p>\n\n<pre><code>#include &lt;QApplication&gt;\n#include &lt;QComboBox&gt;\n#include &lt;QCameraInfo&gt;\n#include &lt;iostream&gt;\n\nint main(int argc, char *argv[])\n{\n\n\n    QApplication app{ argc, argv };\n\n    for(int i=0; i&lt;2; i++)\n        combo.addItem(QString(\"la la la\");\n    combo.show();\n\n    std::cout &lt;&lt; combo.currentText().toStdString() &lt;&lt; std::endl;\n    return app.exec();\n\n\n}\n</code></pre>\n\n<p>I get the same error on the cout, but if I comment that line out, the application exits correctly. I am using Visual Studio 2013, Windows 7, and Qt5.</p>\n"}, {"tags": ["c++", "kinect", "point-cloud-library", "point-clouds"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1467228570, "post_id": 38108436, "comment_id": 63650665, "body": "I&#39;m no expert on kinect or point clouds so I could be off base (and thus not downvoting or voting to close) but this question looks very sparse and open to the stock, &quot;What have you tried so far?&quot; counter question. I recommend expanding the question."}, {"owner": {"reputation": 1, "user_id": 3264385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3a3576606fabd2358f311e003d0d1?s=128&d=identicon&r=PG&f=1", "display_name": "user3264385", "link": "https://stackoverflow.com/users/3264385/user3264385"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1467228726, "post_id": 38108436, "comment_id": 63650752, "body": "I able to get the plane from the point cloud. But not the line equation or unit vector of the edges. I tried to find the planes intersection on the x-z and y-z plane but using that I cannot find the vertex of the plane obtained. That&#39;s my major issue. I need the vertex of the plane to fix my origin using the gettransformationFromTwoUnitVectorsAndOrigin."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1467230440, "post_id": 38108436, "comment_id": 63651600, "body": "Good information. Recommend editing the question to add it to the question. You can&#39;t count on people perusing the comments for extra relevant bits. Code demonstrating what you&#39;ve done and tried so far is often helpful because it shows you&#39;re serious, not just some punk expecting other people to do their homework, and someone might post a &quot;Try this instead. Way easier.&quot; answer or comment."}], "owner": {"reputation": 1, "user_id": 3264385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3a3576606fabd2358f311e003d0d1?s=128&d=identicon&r=PG&f=1", "display_name": "user3264385", "link": "https://stackoverflow.com/users/3264385/user3264385"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 377, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1467231746, "creation_date": 1467228308, "last_edit_date": 1467231746, "question_id": 38108436, "link": "https://stackoverflow.com/questions/38108436/transforming-point-cloud-coordinates", "title": "Transforming point cloud coordinates", "body": "<p>I am required to shift the origin to the vertex of a plane obtained after segmentation using pcl. I am aware of the pcl function <code>getTransformationFromTwoUnitVectorsAndOrigin</code> which gives the transformation matrix.\nBut I am not sure how to calculate the unit vector of the planes edges.</p>\n\n<p>I able to get the plane from the point cloud. But not the line equation or unit vector of the edges. I tried to find the planes intersection on the x-z and y-z plane but using that I cannot find the vertex of the plane obtained. That's my major issue. I need the vertex of the plane to fix my origin using the gettransformationFromTwoUnitVectorsAndOrigin.</p>\n\n<p>Any suggestion on how to find the unit vectors along the plane's edges and their intersection point (for placing the origin) will be helpful. Thank you.</p>\n"}, {"tags": ["android", "c++", "android-ndk", "android.mk"], "owner": {"reputation": 1799, "user_id": 1137713, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iuRcY.jpg?s=128&g=1", "display_name": "iHowell", "link": "https://stackoverflow.com/users/1137713/ihowell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 698, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1467228629, "creation_date": 1467228236, "last_edit_date": 1467228629, "question_id": 38108410, "link": "https://stackoverflow.com/questions/38108410/android-studio-ndk-too-many-open-files-in-system-error", "title": "Android Studio NDK Too many open files in system error", "body": "<p>Currently working through compiling the <code>freetype</code> library for android ndk, but I am getting this error: </p>\n\n<pre><code>Android.mk:1: Android.mk: Too many open files in system\nAndroid.mk:6: /Development/android-sdk-macosx/ndk-bundle/build/core/clear-vars.mk: Too many open files in system\nAndroid.mk:22: /Development/android-sdk-macosx/ndk-bundle/build/core/build-shared-library.mk: Too many open files in system\n/Development/android-sdk-macosx/ndk-bundle/build/core/build-shared-library.mk:34: /Development/android-sdk-macosx/ndk-bundle/build/core/build-module.mk: Too many open files in system\n</code></pre>\n\n<p>Structure:</p>\n\n<pre><code>src/\n    main/\n        java/\n        jni/\n            freetype/\n                include/\n                src/\n                Android.mk\n                ...\n            src/\n                ...\n            Android.mk\n            Application.mk\n</code></pre>\n\n<p>jni/Android.mk</p>\n\n<pre><code>include Android.mk\nLOCAL_PATH := $(call my-dir)\n# Project\ninclude $(CLEAR_VARS)\n\nLOCAL_MODULE := sanangeles\nLOCAL_STATIC_LIBRARIES := freetype\nLOCAL_LDLIBS := -landroid -lEGL -lGLESv2 -ldl -llog\nLOCAL_CFLAGS := -DANDROID_NDK -DDISABLE_IMPORTGL\nLOCAL_SRC_FILES := \\\n    src/Gantt.cpp \\\n    src/app.c \\\n    src/importgl.c \\\n    src/Helpers/ivec2.cpp \\\n    src/Helpers/vec3.cpp \\\n    src/Renderers/BoxRenderer.cpp \\\n    src/Renderers/TextRenderer.cpp \\\n    src/Renderers/Shader.cpp\n\ninclude $(BUILD_SHARED_LIBRARY)\n</code></pre>\n\n<p>freetype/Android.mk</p>\n\n<pre><code>LOCAL_PATH := $(call my-dir)\n\ninclude $(CLEAR_VARS)\n\nFREETYPE_SRC_PATH := $(LOCAL_PATH)/\n$(info Freetype path: '$(FREETYPE_SRC_PATH)')\nLOCAL_MODULE := freetype\n\nLOCAL_CFLAGS := -DANDROID_NDK \\\n  -DFT2_BUILD_LIBRARY=1\n\nLOCAL_C_INCLUDES := \\\n  $(FREETYPE_SRC_PATH)include \\\n  $(FREETYPE_SRC_PATH)src\n\nLOCAL_SRC_FILES := \\\n $(FREETYPE_SRC_PATH)src/autofit/autofit.c \\\n $(FREETYPE_SRC_PATH)src/base/basepic.c \\\n ...\n $(FREETYPE_SRC_PATH)src/lzw/ftlzw.c\n\nLOCAL_LDLIBS := -ldl -llog\n\ninclude $(BUILD_SHARED_LIBRARY)\n</code></pre>\n\n<p>Edit:</p>\n\n<p>Problem solved, accidentally added own file recursively, instead of the correct <code>freetype/Android.mk</code>. Anyone know how to add that one?</p>\n"}, {"tags": ["c++", "matlab", "dll"], "comments": [{"owner": {"reputation": 826, "user_id": 4941775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8a797f88772a6396d0bdc46d2dab6a7?s=128&d=identicon&r=PG&f=1", "display_name": "J&#248;rgen", "link": "https://stackoverflow.com/users/4941775/j%c3%b8rgen"}, "edited": false, "score": 0, "creation_date": 1467227578, "post_id": 38108168, "comment_id": 63650120, "body": "Did you compile it as specified in step 4? It looks like the functions are not exported correctly."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1467227740, "post_id": 38108168, "comment_id": 63650210, "body": "Does Matlab know how to deal with classes these days? I&#39;ve only ever used it with a C wrapper."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1467228397, "post_id": 38108168, "comment_id": 63650593, "body": "Recommend finishing off the tutorial to ensure that you did generate the DLL correctly. Whether more recent matlab versions can interpret C++ classes or not, you can&#39;t expect much if the DLL is invalid or incomplete. Also recommend looking into matlab&#39;s mex files."}, {"owner": {"reputation": 217, "user_id": 4564152, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bea80813f05143fd5302d12e2a4d41a0?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/4564152/matt"}, "reply_to_user": {"reputation": 826, "user_id": 4941775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8a797f88772a6396d0bdc46d2dab6a7?s=128&d=identicon&r=PG&f=1", "display_name": "J&#248;rgen", "link": "https://stackoverflow.com/users/4941775/j%c3%b8rgen"}, "edited": false, "score": 0, "creation_date": 1467229675, "post_id": 38108168, "comment_id": 63651217, "body": "@J&#248;rgen I didn&#39;t realize I had to compile that separately - I just compiled that file from the command line as the comment suggested and moved the resulting dll into the appropriate directory, but still get the same error from Matlab."}, {"owner": {"reputation": 217, "user_id": 4564152, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bea80813f05143fd5302d12e2a4d41a0?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/4564152/matt"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1467229784, "post_id": 38108168, "comment_id": 63651278, "body": "@user4581301 I&#39;ll finish the tutorial to be sure it worked, but Mex files aren&#39;t really an option.  There&#39;s hundreds of files in the project I&#39;m hoping to interface Matlab with, and copy &amp; pasting all of those files and re-building them in Matlab, and debugging them, would probably take weeks, if I was ever able to finish."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1467231597, "post_id": 38108168, "comment_id": 63652221, "body": "I hear you on that. You&#39;re doomed to a bit of tweaking though. Watch out for the differences in how matlab and C++ like their memory organized because you can suffer some serious performance hits and do your best to stick to primitive datatypes when moving data back and forth between them."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1467232263, "post_id": 38108168, "comment_id": 63652519, "body": "One last note and I&#39;m not putting this up as an answer because I&#39;m still on Matlab 2008 and a lot could have changed since then. There could be a solution. But I don&#39;t think you can do this. Consider: there is no <code>Add</code> function for <code>calllib</code> to find. There is only <code>MathLibrary::Functions::Add</code>. How you specify this to matlab, I have no idea, but <code>libfunctionsview</code> may be helpful. Fortunately <code>MathLibrary::Functions::Add</code> is static so you don&#39;t need to play at passing objects around, but there are still name mangling and calling conventions to be dealt with."}, {"owner": {"reputation": 217, "user_id": 4564152, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bea80813f05143fd5302d12e2a4d41a0?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/4564152/matt"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1467247005, "post_id": 38108168, "comment_id": 63657937, "body": "@user4581301 Thanks for the note.  I think I need to learn more about C++ before I can decide what needs to be done.  I&#39;m hoping I can figure something out because this is central to what I was hired to do. Oh boy!"}, {"owner": {"reputation": 826, "user_id": 4941775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8a797f88772a6396d0bdc46d2dab6a7?s=128&d=identicon&r=PG&f=1", "display_name": "J&#248;rgen", "link": "https://stackoverflow.com/users/4941775/j%c3%b8rgen"}, "edited": false, "score": 0, "creation_date": 1467266976, "post_id": 38108168, "comment_id": 63663268, "body": "Apparently I didn&#39;t read you question properly. I don&#39;t think you can access the DLL&#39;s C++ functions/classes directly from Matlab. As noted in this <a href=\"https://se.mathworks.com/matlabcentral/newsreader/view_thread/154975\" rel=\"nofollow noreferrer\">answer from Matlab Central</a> you need to declare the DLL interface as <code>extern &quot;C&quot; {...}</code>. This is what we do when accessing C++ DLL&#39;s, a C interface, but C++ on the inside."}, {"owner": {"reputation": 826, "user_id": 4941775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8a797f88772a6396d0bdc46d2dab6a7?s=128&d=identicon&r=PG&f=1", "display_name": "J&#248;rgen", "link": "https://stackoverflow.com/users/4941775/j%c3%b8rgen"}, "edited": false, "score": 0, "creation_date": 1467268127, "post_id": 38108168, "comment_id": 63663765, "body": "Found the relevant documentation. Short answer, you can&#39;t do it directly. Read <a href=\"http://se.mathworks.com/help/matlab/matlab_external/limitations-to-shared-library-support.html\" rel=\"nofollow noreferrer\">Limitations to Shared Library Support</a>, it specifically states to declare functions with <code>extern &quot;C&quot; {...}</code>"}, {"owner": {"reputation": 217, "user_id": 4564152, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bea80813f05143fd5302d12e2a4d41a0?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/4564152/matt"}, "reply_to_user": {"reputation": 826, "user_id": 4941775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8a797f88772a6396d0bdc46d2dab6a7?s=128&d=identicon&r=PG&f=1", "display_name": "J&#248;rgen", "link": "https://stackoverflow.com/users/4941775/j%c3%b8rgen"}, "edited": false, "score": 0, "creation_date": 1467287556, "post_id": 38108168, "comment_id": 63676133, "body": "@J&#248;rgen Thanks for the pointers (pun intended).  I&#39;ll have to see what I can do with our software tools, otherwise I may have to take a Mex file route.  Thanks again!"}], "owner": {"reputation": 217, "user_id": 4564152, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bea80813f05143fd5302d12e2a4d41a0?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/4564152/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 313, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1467227297, "creation_date": 1467227297, "question_id": 38108168, "link": "https://stackoverflow.com/questions/38108168/no-functions-found-warning-importing-external-dll-file", "title": "&quot;No functions found&quot; warning importing external dll file", "body": "<p>Good afternoon,</p>\n\n<p>I'm trying to work with some C++ dll files with Matlab, and I'm trying to implement a simple test case to understand the procedure.   The dll file I'm using is copied verbatim from here: </p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/ms235636.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/ms235636.aspx</a></p>\n\n<p>I only implement up to step 5, since my hope is to call the dll file through Matlab.  After completing step 5, I copy MathLibrary.h and MathLibrary.dll to the directory I'm using for my Matlab code, and then run</p>\n\n<pre><code>[notfound,warnings]=loadlibrary('MathLibrary.dll','MathLibrary.h');\n</code></pre>\n\n<p>Upon running this I get the warning</p>\n\n<pre><code>&gt;Warning: No functions found in library. \n&gt;\n&gt;In C:\\Program Files\\MATLAB\\R2014b\\toolbox\\matlab\\general\\loadlibrary.p&gt;loadlibrary at 431\n</code></pre>\n\n<p>The cell array notfound is empty and warnings is an array with warnings = MathLibrary.h</p>\n\n<p>If I try using one of the functions from the dll, I execute the following code:</p>\n\n<pre><code>calllib('MathLibrary','Add',5,3)\n</code></pre>\n\n<p>which throws the following error</p>\n\n<pre><code>&gt;Error using calllib\n&gt;\n&gt;Method was not found.\n</code></pre>\n\n<p>I've tried Googling solutions to similar problems, but have not found solutions where I've looked (at least ones I've understood).  My C++ is weak, which may be hindering my understanding of the problem and solution.  I'm hoping to incorporate dll files from a much larger project soon, so understanding this would be a great help.  Thanks so much!</p>\n"}, {"tags": ["c++", "qt5.7"], "comments": [{"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 1, "creation_date": 1467230736, "post_id": 38108159, "comment_id": 63651739, "body": "if you&#39;re using the packages that come with ubuntu you need to install &quot;libqt5serialport5-dev&quot; ."}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "reply_to_user": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1467231599, "post_id": 38108159, "comment_id": 63652223, "body": "Thank you, thats what I needed!"}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "reply_to_user": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1467232126, "post_id": 38108159, "comment_id": 63652456, "body": "Any suggestions for &#39;quick&#39; ?"}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "reply_to_user": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1472843723, "post_id": 38108159, "comment_id": 65932723, "body": "Can anyone offer any help on this?"}], "owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 333, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1467662145, "creation_date": 1467227266, "last_edit_date": 1467662145, "question_id": 38108159, "link": "https://stackoverflow.com/questions/38108159/qt5-7-on-ubuntu16-04-qtserialport-quick", "title": "Qt5.7 on Ubuntu16.04 QT::serialport quick", "body": "<p>I have a project which I am building and developing at work on RedHat 7.2 using Qt5.6</p>\n\n<p>At home I have Ubuntu16.04 running on VirtualBox, I've installed Qt5.7, when I try to build the same project I get 1 issue:</p>\n\n<pre><code>    Unknown module(s) in QT::serialport quick\n</code></pre>\n\n<p>In my 'pro' file I have:</p>\n\n<pre><code>    QT += core gui serialport quick xml\n</code></pre>\n\n<p>How do I add the serialport support, from what I've read it suggests it should already be present:</p>\n\n<p><a href=\"https://wiki.qt.io/Qt_Serial_Port#Qt5\" rel=\"nofollow\">Qt Serial Port</a></p>\n\n<p>Thanks to @PeterT the serial port library problem has now been resolved, however 'quick' is still an issue, can anyone help with this?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 2, "creation_date": 1467226794, "post_id": 38108000, "comment_id": 63649678, "body": "<code>template &lt;typename T&gt;</code>"}, {"owner": {"reputation": 2031, "user_id": 1114498, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/28c184063aa5fb8ab1303de158fa9bc8?s=128&d=identicon&r=PG", "display_name": "Necktwi", "link": "https://stackoverflow.com/users/1114498/necktwi"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1467337567, "post_id": 38108000, "comment_id": 63702552, "body": "may I know the reason in voting to close the question?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1467337756, "post_id": 38108000, "comment_id": 63702592, "body": "yes, it was caused by a typo (<code>template&lt;T&gt;</code> should have been <code>template&lt;typename T&gt;</code>). Also, please don&#39;t edit the answer into the question"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1467227315, "creation_date": 1467227315, "answer_id": 38108173, "question_id": 38108000, "link": "https://stackoverflow.com/questions/38108000/how-to-define-a-default-typecast-operator-in-c/38108173#38108173", "title": "How to define a default typecast operator in C++", "body": "<p>Obvious but annoying problems.</p>\n\n<ol>\n<li><p>Missing <code>typename</code> in <code>operator T()</code>.</p>\n\n<pre><code>template &lt;T&gt;\noperator T();\n</code></pre>\n\n<p>needs to be</p>\n\n<pre><code>template &lt;typename T&gt;\noperator T();\n</code></pre></li>\n<li><p>Access problem.</p>\n\n<p>Either change <code>class Foo</code> to <code>struct Foo</code> or make the functions <code>public</code>.</p></li>\n<li><p>Missing <code>;</code> at the end of the class definition.</p></li>\n</ol>\n\n<p>The main problem is that you cannot specialize member function templates. However, you can overload them with equal effect.</p>\n\n<pre><code>struct Foo {\n    template &lt;typename T&gt;\n    operator T();\n\n    operator int();\n\n    operator char();\n};\n</code></pre>\n"}], "owner": {"reputation": 2031, "user_id": 1114498, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/28c184063aa5fb8ab1303de158fa9bc8?s=128&d=identicon&r=PG", "display_name": "Necktwi", "link": "https://stackoverflow.com/users/1114498/necktwi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1467367903, "creation_date": 1467226693, "last_edit_date": 1467367903, "question_id": 38108000, "link": "https://stackoverflow.com/questions/38108000/how-to-define-a-default-typecast-operator-in-c", "title": "How to define a default typecast operator in C++", "body": "<p>I have overloaded typecast operator for few types. Now I want to call particular function for all the other typecastings. How can I do it?</p>\n"}, {"tags": ["c++", "windows", "utf-8", "codepages", "boost-locale"], "answers": [{"comments": [{"owner": {"reputation": 2092, "user_id": 1969455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tbodK.jpg?s=128&g=1", "display_name": "Brandlingo", "link": "https://stackoverflow.com/users/1969455/brandlingo"}, "edited": false, "score": 0, "creation_date": 1467267856, "post_id": 38112148, "comment_id": 63663635, "body": "Under the assumption that I cannot change the function this sadly does not help. But this is still promising as the interface is too stable for change but the function only requires effort. Thanks, I&#39;ll give it a try."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "reply_to_user": {"reputation": 2092, "user_id": 1969455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tbodK.jpg?s=128&g=1", "display_name": "Brandlingo", "link": "https://stackoverflow.com/users/1969455/brandlingo"}, "edited": false, "score": 0, "creation_date": 1467438625, "post_id": 38112148, "comment_id": 63742777, "body": "The problem you describe is rather complicated, it&#39;s part of the reason Unicode was invented in the first place. I added a function to get ANSI from UTF8, it&#39;s sort of what Iverelo suggested. See also this <a href=\"http://stackoverflow.com/a/30229657/4603670\">link</a> about system language, I am not sure if that helps though."}, {"owner": {"reputation": 2092, "user_id": 1969455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tbodK.jpg?s=128&g=1", "display_name": "Brandlingo", "link": "https://stackoverflow.com/users/1969455/brandlingo"}, "edited": false, "score": 0, "creation_date": 1467611966, "post_id": 38112148, "comment_id": 63782517, "body": "Fortunately I managed to adopt your first suggestion. It allowed to keep the stable interface but change the internals. I used <code>boost::locale::conv::utf_to_utf&lt;wchar_t&gt;()</code> instead of your <code>getU()</code> though."}, {"owner": {"reputation": 2092, "user_id": 1969455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tbodK.jpg?s=128&g=1", "display_name": "Brandlingo", "link": "https://stackoverflow.com/users/1969455/brandlingo"}, "edited": false, "score": 0, "creation_date": 1467612066, "post_id": 38112148, "comment_id": 63782555, "body": "Unfortunately there still is no answer to the actual question. But you now provide a way to work around the boost limitation so I&#39;ll accept this answer."}], "tags": [], "owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "is_accepted": true, "score": 2, "last_activity_date": 1467437533, "last_edit_date": 1467437533, "creation_date": 1467246554, "answer_id": 38112148, "question_id": 38107847, "link": "https://stackoverflow.com/questions/38107847/get-the-users-codepage-name-for-functions-in-boostlocaleconv/38112148#38112148", "title": "Get the user&#39;s codepage name for functions in boost::locale::conv", "body": "<p>ANSI is deprecated so don't bother with it.</p>\n\n<p>Windows uses UTF16, you must convert from UTF8 to UTF16 using <code>MultiByteToWideChar</code>. This conversion is safe.</p>\n\n<pre><code>std::wstring getU16(const std::string &amp;str)\n{\n    if (str.empty()) return std::wstring();\n    int sz = MultiByteToWideChar(CP_UTF8, 0, &amp;str[0], (int)str.size(), 0, 0);\n    std::wstring res(sz, 0);\n    MultiByteToWideChar(CP_UTF8, 0, &amp;str[0], (int)str.size(), &amp;res[0], sz);\n    return res;\n}\n</code></pre>\n\n<p>You then use <code>_wfsopen</code> (from the link you provided) to open file with UTF16 name.</p>\n\n<pre><code>int main()\n{\n    //UTF8 source:\n    std::string filename_u8;\n\n    //This line works in VS2015 only\n    //For older version comment out the next line, obtain UTF8 from another source\n    filename_u8 = u8\"c:\\\\test\\\\__\u03b5\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac.txt\";\n\n    //convert to UTF16\n    std::wstring filename_utf16 = getU16(filename_u8);\n\n    FILE *file = NULL;\n    _wfopen_s(&amp;file, filename_utf16.c_str(), L\"w\");\n    if (file)\n    {\n        //Add BOM, optional...\n\n        //Write the file name in to file, for testing...\n        fwrite(filename_u8.data(), 1, filename_u8.length(), file);\n\n        fclose(file);\n    }\n    else\n    {\n        cout &lt;&lt; \"access denined, or folder doesn't exits...\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><hr>\nEdit, getting ANSI from UTF8, using <code>GetACP()</code></p>\n\n<pre><code>std::wstring string_to_wstring(const std::string &amp;str, int codepage)\n{\n    if (str.empty()) return std::wstring();\n    int sz = MultiByteToWideChar(codepage, 0, &amp;str[0], (int)str.size(), 0, 0);\n    std::wstring res(sz, 0);\n    MultiByteToWideChar(codepage, 0, &amp;str[0], (int)str.size(), &amp;res[0], sz);\n    return res;\n}\n\nstd::string wstring_to_string(const std::wstring &amp;wstr, int codepage)\n{\n    if (wstr.empty()) return std::string();\n    int sz = WideCharToMultiByte(codepage, 0, &amp;wstr[0], (int)wstr.size(), 0, 0, 0, 0);\n    std::string res(sz, 0);\n    WideCharToMultiByte(codepage, 0, &amp;wstr[0], (int)wstr.size(), &amp;res[0], sz, 0, 0);\n    return res;\n}\n\nstd::string get_ansi_from_utf8(const std::string &amp;utf8, int codepage)\n{\n    std::wstring utf16 = string_to_wstring(utf8, CP_UTF8);\n    std::string ansi = wstring_to_string(utf16, codepage);\n    return ansi;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2092, "user_id": 1969455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tbodK.jpg?s=128&g=1", "display_name": "Brandlingo", "link": "https://stackoverflow.com/users/1969455/brandlingo"}, "edited": false, "score": 0, "creation_date": 1467267510, "post_id": 38113990, "comment_id": 63663491, "body": "Thanks for your answer. The problem is that the locale overloads of the conversion functions don&#39;t work with the standard locales. And the charset-as-string overloads fail with the names of these locales even when striping the language_territory part."}, {"owner": {"reputation": 121, "user_id": 6521403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a9f38a9fe5d185054fea09f064a91f5?s=128&d=identicon&r=PG&f=1", "display_name": "Iverelo", "link": "https://stackoverflow.com/users/6521403/iverelo"}, "reply_to_user": {"reputation": 2092, "user_id": 1969455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tbodK.jpg?s=128&g=1", "display_name": "Brandlingo", "link": "https://stackoverflow.com/users/1969455/brandlingo"}, "edited": false, "score": 0, "creation_date": 1467304606, "post_id": 38113990, "comment_id": 63688896, "body": "The conversion functions you mention are still the boost functions? Unfortunately I do not have a lot of experience with boost locale functions. The trick I have used to go from one encoding to another in the past on Windows is to use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd319072(v=vs.85).aspx\" rel=\"nofollow noreferrer\">MultiByteToWideChar</a> to get to wide characters and then <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd374130(v=vs.85).aspx\" rel=\"nofollow noreferrer\">WideCharToMultiByte</a> to get back to a different encoding."}, {"owner": {"reputation": 2092, "user_id": 1969455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tbodK.jpg?s=128&g=1", "display_name": "Brandlingo", "link": "https://stackoverflow.com/users/1969455/brandlingo"}, "edited": false, "score": 0, "creation_date": 1467308145, "post_id": 38113990, "comment_id": 63690821, "body": "Yes, still the boost functions. I guess internally they do the same, the key question is how the MS uint code page ID is mapped to boost code page strings."}], "tags": [], "owner": {"reputation": 121, "user_id": 6521403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a9f38a9fe5d185054fea09f064a91f5?s=128&d=identicon&r=PG&f=1", "display_name": "Iverelo", "link": "https://stackoverflow.com/users/6521403/iverelo"}, "is_accepted": false, "score": 2, "last_activity_date": 1467260862, "creation_date": 1467260862, "answer_id": 38113990, "question_id": 38107847, "link": "https://stackoverflow.com/questions/38107847/get-the-users-codepage-name-for-functions-in-boostlocaleconv/38113990#38113990", "title": "Get the user&#39;s codepage name for functions in boost::locale::conv", "body": "<p>Barmak's way is the best way to do it.</p>\n\n<p>To clear up the locale stuff, the process always starts with the \"C\" locale. You can use the <a href=\"https://www.google.com/webhp?sourceid=chrome-instant&amp;ion=1&amp;espv=2&amp;ie=UTF-8#q=c%20locale\" rel=\"nofollow\">setlocale function</a> to set the locale to the system default or any arbitrary locale.</p>\n\n<pre><code>#include &lt;clocale&gt;\n\n// Get the current locale\nsetlocale(LC_ALL,NULL);\n\n// Set locale to system default\nsetlocale(LC_ALL,\"\");\n\n// Set locale to German\nsetlocale(LC_ALL,\"de-DE\");\n</code></pre>\n"}], "owner": {"reputation": 2092, "user_id": 1969455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tbodK.jpg?s=128&g=1", "display_name": "Brandlingo", "link": "https://stackoverflow.com/users/1969455/brandlingo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1341, "favorite_count": 0, "accepted_answer_id": 38112148, "answer_count": 2, "score": 3, "last_activity_date": 1467437533, "creation_date": 1467226198, "last_edit_date": 1495541769, "question_id": 38107847, "link": "https://stackoverflow.com/questions/38107847/get-the-users-codepage-name-for-functions-in-boostlocaleconv", "title": "Get the user&#39;s codepage name for functions in boost::locale::conv", "body": "<h2>The task at hand</h2>\n\n<p>I'm parsing a filename from an UTF-8 encoded XML on Windows. I need to pass that filename on to a function that I can't change. Internally it uses <a href=\"https://msdn.microsoft.com/en-us/library/8f30b0db.aspx\" rel=\"nofollow noreferrer\"><code>_fsopen()</code></a> which does not support Unicode strings.</p>\n\n<h2>Current approach</h2>\n\n<p>My current approach is to convert the filename to the user's charset hoping that the filename is representable in that encoding. I'm then using <code>boost::locale::conv::from_utf()</code> to convert from UTF-8 and I'm using <code>boost::locale::util::get_system_locale()</code> to get the name of the current locale.</p>\n\n<p><strong>Life is good?</strong></p>\n\n<p>I'm on a German system using code page <a href=\"https://msdn.microsoft.com/en-us/library/cc195054.aspx\" rel=\"nofollow noreferrer\">Windows-1252</a> thus <code>get_system_locale()</code> correctly yields <em>de_DE.windows-1252</em>. If I test the approach with a filename containing an umlaut everything works as expected.</p>\n\n<h2>The Problem</h2>\n\n<p>Just to make sure I <a href=\"http://knowledgebase.progress.com/articles/Article/4677\" rel=\"nofollow noreferrer\">switched my system locale</a> to Ukrainian which uses code page <a href=\"https://msdn.microsoft.com/en-us/library/cc195053.aspx\" rel=\"nofollow noreferrer\">Windows-1251</a>. Using some Cyrillic letter in the filename my approach fails. The reason is that <code>get_system_locale()</code> still yields <em>de_DE.windows-1252</em> which is now incorrect. </p>\n\n<p>On the other side <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd318070%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\"><code>GetACP()</code></a> correctly yields 1252 for the German locale and 1251 for the Ukrainian locale. I also know that Boost.Locale can convert to a given locale as this small test program works as I expect:</p>\n\n<pre><code>#include &lt;boost/locale.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;windows.h&gt;\n\nint main()\n{\n    std::cout &lt;&lt; \"Codepage: \" &lt;&lt; GetACP() &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Boost.Locale: \" &lt;&lt; boost::locale::util::get_system_locale() &lt;&lt; std::endl;\n\n    namespace blc = boost::locale::conv;\n    // Cyrillic small letter zhe -&gt; \\xe6 (\u0448 on 1251, \u00e6 on 1252)\n    std::string const test1251 = blc::from_utf(std::string(\"\\xd0\\xb6\"), \"windows-1251\");\n    std::cout &lt;&lt; \"1251: \" &lt;&lt; static_cast&lt;int&gt;(test1251.front()) &lt;&lt; std::endl;\n    // Latin small letter sharp s -&gt; \\xdf (\u042f on 1251, \u00df on 1252)\n    auto const test1252 = blc::from_utf(std::string(\"\\xc3\\x9f\"), \"windows-1252\");\n    std::cout &lt;&lt; \"1252: \" &lt;&lt; static_cast&lt;int&gt;(test1252.front()) &lt;&lt; std::endl;\n\n}\n</code></pre>\n\n<h2>Questions</h2>\n\n<ul>\n<li><p>How can I query the name of the user locale in a format Boost.Locale supports? Using <code>std::locale(\"\").name()</code> yields <em>German_Germany.1252</em>, using it results in a <code>boost::locale::conv::invalid_charset_error</code> exception.</p></li>\n<li><p>Is it possible that the system locale remains <em>de_DE.windows-1252</em> although I'm supposedly changing it as local admin? Similarly system language is German although my account's language is English. (Log in screen is German until I log in)</p></li>\n<li><p>should I stick with <a href=\"https://stackoverflow.com/a/2735723/1969455\">using short filenames</a>? Does not seem to work reliably though.</p></li>\n</ul>\n\n<h2>Fine-print</h2>\n\n<ul>\n<li>Compiler is MSVC18</li>\n<li>Boost is version 1.56.0, backend supposedly winapi</li>\n<li>System is Win7, system language is German, user language English</li>\n</ul>\n"}, {"tags": ["c++", "templates", "template-specialization"], "comments": [{"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1467226427, "post_id": 38107797, "comment_id": 63649465, "body": "That should work (second posted code)! Beware that older c++ compilers needs to insert space in between <code>&gt;&gt;</code> thus <code>&gt; &gt;</code>. Is <code>&lt;vector&gt;</code> header included? Post the full error messages."}, {"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "edited": false, "score": 1, "creation_date": 1467226475, "post_id": 38107797, "comment_id": 63649491, "body": "Place <code>class</code> before <code>Message</code> everywhere (both in declaration and specializations)."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1467231448, "post_id": 38107797, "comment_id": 63652126, "body": "linked answer fixed too."}, {"owner": {"reputation": 1984, "user_id": 1642677, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6c4db19dd7a5daf2cdd1352e622fc013?s=128&d=identicon&r=PG", "display_name": "audiFanatic", "link": "https://stackoverflow.com/users/1642677/audifanatic"}, "edited": false, "score": 0, "creation_date": 1467234234, "post_id": 38107797, "comment_id": 63653542, "body": "Now How would I add, say a function which returns <code>T</code> or a member of type <code>T</code>&gt;. <code>const T getKey() { return key; };</code> does not work, nor does <code>T key</code>"}], "answers": [{"tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 1, "last_activity_date": 1467226507, "creation_date": 1467226507, "answer_id": 38107936, "question_id": 38107797, "link": "https://stackoverflow.com/questions/38107797/template-specialization-c-templates-that-only-accept-certain-types-revisited/38107936#38107936", "title": "Template specialization: C++ templates that only accept certain types (revisited)", "body": "<p>You need to include the <code>class</code> keyword in the template specialization as well. I don't know why the linked answer doesn't do that.</p>\n\n<pre><code>template&lt;typename T&gt; class Message;\n\ntemplate&lt;&gt; class Message &lt;std::vector&lt;uint8_t&gt;&gt;\n{\npublic:\n\n};\n\ntemplate&lt;&gt; class Message &lt;std::string&gt;\n{\n\n};\n</code></pre>\n"}], "owner": {"reputation": 1984, "user_id": 1642677, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6c4db19dd7a5daf2cdd1352e622fc013?s=128&d=identicon&r=PG", "display_name": "audiFanatic", "link": "https://stackoverflow.com/users/1642677/audifanatic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 38107936, "answer_count": 1, "score": 1, "last_activity_date": 1467226507, "creation_date": 1467226039, "last_edit_date": 1495539855, "question_id": 38107797, "link": "https://stackoverflow.com/questions/38107797/template-specialization-c-templates-that-only-accept-certain-types-revisited", "title": "Template specialization: C++ templates that only accept certain types (revisited)", "body": "<p>I want to make a simple message template class as follows. I followed the structure verbatim from the <a href=\"https://stackoverflow.com/questions/874298/c-templates-that-accept-only-certain-types\">chosen answer posted here</a>. However, this seems to break in Visual Studio 2013. </p>\n\n<pre><code>template&lt;typename T&gt; Message;\n\ntemplate&lt;&gt; Message &lt;std::vector&lt;uint8_t&gt;&gt;\n{\npublic:\n\n};\n\ntemplate&lt;&gt; Message &lt;std::string&gt;\n{\n\n};\n</code></pre>\n\n<p>IntelliSense tells me that <code>Message is not a template</code>.</p>\n\n<p>Placing <code>class</code> before <code>Message</code> in the forward declaration results in a slightly better, but equally annoying IntelliSense error: <code>expected and identifier</code>after the opening brace <code>{</code> of each template.</p>\n\n<pre><code>template&lt;typename T&gt; class Message;\n\ntemplate&lt;&gt; Message &lt;std::vector&lt;uint8_t&gt;&gt;\n{\npublic:\n\n};\n\ntemplate&lt;&gt; Message &lt;std::string&gt;\n{\n\n};\n</code></pre>\n\n<p>I should note that all the above code is currently being placed in a header file.</p>\n"}, {"tags": ["c++", "json", "rest"], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 6525156, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CWMaLfAtPpM/AAAAAAAAAAI/AAAAAAAAlmo/GRjaBALLLac/photo.jpg?sz=128", "display_name": "Danny Lacks", "link": "https://stackoverflow.com/users/6525156/danny-lacks"}, "is_accepted": true, "score": 0, "last_activity_date": 1467253700, "creation_date": 1467253700, "answer_id": 38112996, "question_id": 38107764, "link": "https://stackoverflow.com/questions/38107764/json-phasing-with-rest-api/38112996#38112996", "title": "JSON phasing with REST API", "body": "<p><strong>Note</strong>: my answer may be wrong, it would help if you could post the output of <code>wcout &lt;&lt; obj[L\"lists\"];</code>.  Also, I am assuming you are trying to get \"name\" as in \"Board info\" and \"Mics\" and not \"READER\".  I will assume your output for <code>wcout &lt;&lt; obj[L\"lists\"];</code> is:</p>\n\n<p><code>[{\"id\":\"576973346263056c88cfe845\",\"name\":\"Board info\"},{\"id\":\"57681f5dc4864c821cc73bfb\",\"name\":\"Misc\"},{\"id\":\"576978294972d812e4a91580\",\"name\":\"thing\"},{\"id\":\"57681fdc228443c3306cc762\",\"name\":\"thing2\"},{\"id\":\"5768200b1fbf41dd2c974052\",\"name\":\"thing3\"},{\"id\":\"57681feb72ca90abb3afe170\",\"name\":\"thingy\"},{\"id\":\"57681f5dc4864c821cc73bfc\",\"name\":\"meep\"},{\"id\":\"57681f5dc4864c821cc73bfd\",\"name\":\"BannedWordsPhrases\"},{\"id\":\"57681fba60fdfbf576abaece\",\"name\":\"Errors\"}]</code></p>\n\n<p><strong>Proposed Answer</strong>: <code>obj[L\"lists\"];</code> returns a list of 9 JSON objects in this case (listed above).  You can access these JSON objects by index (0-8).  For example, according to <a href=\"http://microsoft.github.io/cpprestsdk/classweb_1_1json_1_1array.html\" rel=\"nofollow\">cpprestsdk</a>, <code>obj[L\"lists\"][0];</code> or <code>obj[L\"lists\"].at(0);</code>should return <code>{\"id\":\"576973346263056c88cfe845\",\"name\":\"Board info\"}</code>.  </p>\n\n<p>From there you can get the name, for example:</p>\n\n<p><code>obj[L\"lists\"][0][L\"name\"]</code> should return <code>Board info</code>.</p>\n"}], "owner": {"reputation": 25, "user_id": 6524260, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nDqqEwFk-oo/AAAAAAAAAAI/AAAAAAAAA60/cimcETHDk0Q/photo.jpg?sz=128", "display_name": "Matthew Bollinger", "link": "https://stackoverflow.com/users/6524260/matthew-bollinger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 38112996, "answer_count": 1, "score": 0, "last_activity_date": 1467253700, "creation_date": 1467225927, "question_id": 38107764, "link": "https://stackoverflow.com/questions/38107764/json-phasing-with-rest-api", "title": "JSON phasing with REST API", "body": "<p>I am trying to read 2nd levels in a JSON file with the REST API's Json fuctionallity <code>#include &lt;cpprest/json.h&gt;</code></p>\n\n<p>I need to get from the following JSON the name field:</p>\n\n<pre><code>{\"desc\":\"\",\"id\":\"57681f5dc4864c821cc73bfa\",\"lists\":[{\"id\":\"576973346263056c88cfe845\",\"name\":\"Board info\"},{\"id\":\"57681f5dc4864c821cc73bfb\",\"name\":\"Misc\"},{\"id\":\"576978294972d812e4a91580\",\"name\":\"thing\"},{\"id\":\"57681fdc228443c3306cc762\",\"name\":\"thing2\"},{\"id\":\"5768200b1fbf41dd2c974052\",\"name\":\"thing3\"},{\"id\":\"57681feb72ca90abb3afe170\",\"name\":\"thingy\"},{\"id\":\"57681f5dc4864c821cc73bfc\",\"name\":\"meep\"},{\"id\":\"57681f5dc4864c821cc73bfd\",\"name\":\"BannedWordsPhrases\"},{\"id\":\"57681fba60fdfbf576abaece\",\"name\":\"Errors\"}],\"name\":\"READER\"}\n</code></pre>\n\n<p>(lets call this file JSON1)\nI can get JSON1[\"lists\"] but not JSON1[\"lists\"][\"name\"].</p>\n\n<p>here is my code:</p>\n\n<pre><code>#include \"cpprest/json.h\" //how I am importing stuff\n...\n\ntypedef web::json::value JsonValue; //all of these are being uses\ntypedef web::json::value::value_type JsonValueType;\ntypedef std::wstring String;\ntypedef std::wstringstream StringStream;\n\nusing namespace utility;\nusing namespace web;\nusing namespace web::http;\nusing namespace web::http::client;\nusing namespace concurrency::streams;\n...\nint main() \n{ \n...\nweb::json::value J1 = web::json::value::parse(S);\nweb::json::value &amp;J2 = web::json::value::parse(S1);\noutput(J2);\nwfstream _file(\"jsonFile.json\");\n_file &gt;&gt; obj;\nwcout &lt;&lt; obj[L\"lists\"][L\"name\"]; // the broken line\ncout &lt;&lt; endl;\n}\n</code></pre>\n\n<p>all the functions and variables work and are correct, it functions with out the <code>[L\"name\"]</code> and with <code>[L\"lists\"]</code>.</p>\n\n<p>What am I doing wrong? </p>\n"}, {"tags": ["c++", "xcode", "for-loop", "vector", "iteration"], "comments": [{"owner": {"reputation": 109, "user_id": 5381953, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8c958eccb3c8902206834a52377f5a04?s=128&d=identicon&r=PG&f=1", "display_name": "Ivankovich", "link": "https://stackoverflow.com/users/5381953/ivankovich"}, "reply_to_user": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 0, "creation_date": 1467226075, "post_id": 38107760, "comment_id": 63649224, "body": "@JonnyHenly (i &lt; C) means that i is always less than C during execution of the loop"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1467226126, "post_id": 38107760, "comment_id": 63649268, "body": "If <code>C</code> is 3 you start at zero and iterate with values 0, 1, 2 - that <i>is</i> <i>3</i> times."}, {"owner": {"reputation": 447, "user_id": 3513509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d3550221670bd84e6d10fb63f1ef74d?s=128&d=identicon&r=PG&f=1", "display_name": "KillaBytes", "link": "https://stackoverflow.com/users/3513509/killabytes"}, "edited": false, "score": 0, "creation_date": 1467226139, "post_id": 38107760, "comment_id": 63649275, "body": "We need more information in regards to what <code>C</code> is actually is or contains. Right now, your code iterates counting from <code>0 to C-1</code>."}, {"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1467226274, "post_id": 38107760, "comment_id": 63649367, "body": "@JesperJuhl : as per OP&#39;s test case, output ends at 14, not 15 as expected for C = 16."}, {"owner": {"reputation": 109, "user_id": 5381953, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8c958eccb3c8902206834a52377f5a04?s=128&d=identicon&r=PG&f=1", "display_name": "Ivankovich", "link": "https://stackoverflow.com/users/5381953/ivankovich"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1467226321, "post_id": 38107760, "comment_id": 63649402, "body": "@JesperJuhl Yes I know that, but before downvoting if somebody sees the output in the question you shall notice that the last value of i is 14 and not 15. It should be 15. This is my question!"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1467226323, "post_id": 38107760, "comment_id": 63649404, "body": "Cannot reproduce <a href=\"https://ideone.com/r0So2k\" rel=\"nofollow noreferrer\">Demo</a>."}, {"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "edited": false, "score": 0, "creation_date": 1467226352, "post_id": 38107760, "comment_id": 63649423, "body": "@ShreeyashGotmare: What is <code>v</code>? By leaving it out, your test case runs till and including 15 as expected. I&#39;m speculating here, but if <code>v[f]</code> throws..."}, {"owner": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 0, "creation_date": 1467226448, "post_id": 38107760, "comment_id": 63649479, "body": "If that is your question, then why didn&#39;t you include it in your question?"}, {"owner": {"reputation": 109, "user_id": 5381953, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8c958eccb3c8902206834a52377f5a04?s=128&d=identicon&r=PG&f=1", "display_name": "Ivankovich", "link": "https://stackoverflow.com/users/5381953/ivankovich"}, "reply_to_user": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 0, "creation_date": 1467226528, "post_id": 38107760, "comment_id": 63649513, "body": "@JonnyHenly Done. (On a sidenote, it might be obvious.)"}, {"owner": {"reputation": 109, "user_id": 5381953, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8c958eccb3c8902206834a52377f5a04?s=128&d=identicon&r=PG&f=1", "display_name": "Ivankovich", "link": "https://stackoverflow.com/users/5381953/ivankovich"}, "edited": false, "score": 0, "creation_date": 1467226675, "post_id": 38107760, "comment_id": 63649598, "body": "Xcode wanted to me to hit the return button to get the last iteration."}], "answers": [{"tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": true, "score": 0, "last_activity_date": 1467234324, "creation_date": 1467234324, "answer_id": 38110018, "question_id": 38107760, "link": "https://stackoverflow.com/questions/38107760/c-for-loop-not-iterating-designated-number-of-times-1-iteration-less/38110018#38110018", "title": "C++ : For loop not iterating designated number of times (1 iteration less)", "body": "<p>Your loop <em>is</em> iterating <code>C</code> times. This is the classic <a href=\"https://en.wikipedia.org/wiki/Zero-based_numbering\" rel=\"nofollow\">Zero-Based Numbering</a> issue.</p>\n\n<p>Let me explain using your example where <code>C</code> is <em>16</em> and a numbered list:</p>\n\n<ol>\n<li>2 </li>\n<li>3</li>\n<li>5</li>\n<li>6</li>\n<li>8</li>\n<li>9</li>\n<li>10</li>\n<li>13</li>\n<li>14</li>\n<li>15</li>\n<li>16</li>\n<li>19</li>\n<li>20</li>\n<li>21</li>\n<li>22</li>\n<li>27</li>\n</ol>\n\n<p>So you see your lopp <em>did</em> iterate 16 times. To go from <em>0</em> to <em>16</em> would have actually been iterating one more time, so <em>17</em> times.</p>\n"}], "owner": {"reputation": 109, "user_id": 5381953, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8c958eccb3c8902206834a52377f5a04?s=128&d=identicon&r=PG&f=1", "display_name": "Ivankovich", "link": "https://stackoverflow.com/users/5381953/ivankovich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "closed_date": 1468496630, "accepted_answer_id": 38110018, "answer_count": 1, "score": -1, "last_activity_date": 1467234324, "creation_date": 1467225899, "last_edit_date": 1467226019, "question_id": 38107760, "link": "https://stackoverflow.com/questions/38107760/c-for-loop-not-iterating-designated-number-of-times-1-iteration-less", "closed_reason": "Not suitable for this site", "title": "C++ : For loop not iterating designated number of times (1 iteration less)", "body": "<p>I have a for loop and a variable C. \nThe loop begins at 0 and is expected to run C times but actually it runs C-1 times.</p>\n\n<p>Here is my code :</p>\n\n<pre><code>    vector&lt;int&gt; v(1000) //Allocated globally\n\n\n\n    int M, S, C;\n    cin&gt;&gt;M&gt;&gt;S&gt;&gt;C;\n    //cout&lt;&lt;M&lt;&lt;\" \"&lt;&lt;S&lt;&lt;\" \"&lt;&lt;C;\n    int fi=0, la=0;\n\n    for(int i=0; i&lt;C; i++)\n    {\n        int f;\n        cin&gt;&gt;f;\n\n        if(i==0l){ fi = f;}\n        v[f] = f;\n        cout&lt;&lt;i&lt;&lt;\" \"&lt;&lt;f&lt;&lt;\" \"&lt;&lt;v[f]&lt;&lt;endl;\n        if(i==C-1){ la = f;}\n    }\n</code></pre>\n\n<p>This is my test case -</p>\n\n<pre><code>3 27 16 \n        2 \n        3 \n        5 \n        6 \n        8 \n        9 \n        10 \n        13 \n        14 \n        15 \n        16 \n        19 \n        20 \n        21 \n        22 \n        27\n</code></pre>\n\n<p>Output by Xcode :</p>\n\n<pre><code>    0 2 2\n    1 3 3\n    2 5 5\n    3 6 6\n    4 8 8\n    5 9 9\n    6 10 10\n    7 13 13\n    8 14 14\n    9 15 15\n    10 16 16\n    11 19 19\n    12 20 20\n    13 21 21\n    14 22 22\n</code></pre>\n\n<p>I use Xcode on Mac if it makes a difference.\nThe variables fi and la are to find the first and the last element of the list.</p>\n\n<p>I want to know what is wrong in my code for the for loop and why is it not iterating C times.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "multithreading", "c++11", "pthreads"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1467226302, "post_id": 38107707, "comment_id": 63649387, "body": "May be you should rather looking for <a href=\"http://stackoverflow.com/questions/3095566/linux-daemonize\">something like this</a> (not portable, I know)."}, {"owner": {"reputation": 1610, "user_id": 206543, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/InXhM.png?s=128&g=1", "display_name": "Dylon", "link": "https://stackoverflow.com/users/206543/dylon"}, "edited": false, "score": 0, "creation_date": 1467227192, "post_id": 38107707, "comment_id": 63649921, "body": "Why would you want your threads to continue running after the main thread exits?  Could you just wait for them to complete first?"}, {"owner": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "reply_to_user": {"reputation": 1610, "user_id": 206543, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/InXhM.png?s=128&g=1", "display_name": "Dylon", "link": "https://stackoverflow.com/users/206543/dylon"}, "edited": false, "score": 1, "creation_date": 1467228814, "post_id": 38107707, "comment_id": 63650788, "body": "@Dylon To be honest I&#39;m hoping the standard says this isn&#39;t allowed.  Makes something I&#39;m working on simpler."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1467230986, "post_id": 38107707, "comment_id": 63651871, "body": "If the real question is if you can safely have something that is destroyed when you exit <code>main</code> that might be accessed by a running thread, the answer is no. Something destroyed after you might join that thread."}], "answers": [{"tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": false, "score": 0, "last_activity_date": 1468404783, "last_edit_date": 1468404783, "creation_date": 1467230576, "answer_id": 38109071, "question_id": 38107707, "link": "https://stackoverflow.com/questions/38107707/do-c11-threads-provide-a-way-for-detached-threads-to-continue-after-the-main-t/38109071#38109071", "title": "Do C++11 threads provide a way for detached threads to continue after the main thread exits?", "body": "<p>Historically, the <code>main()</code> function has been special - it represents the lifetime of the application. C++11 does not change this.</p>\n\n<p>When the <code>main</code> function returns, the program cleans up and terminates. That's hard-coded into the C runtime.</p>\n\n<p>Anything that will prevent <code>main</code> from retuning normally will work (but there is no portable way to terminate a thread).</p>\n\n<p>A workaround in <em>your</em> case might be just to block the main thread forever, or re-use it to do some monitoring/housekeeping.</p>\n"}, {"comments": [{"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 4, "creation_date": 1467233606, "post_id": 38109735, "comment_id": 63653214, "body": "They&#39;re not &quot;cleaned up&quot; they just stop existing. If they access any global objects between the main thread returning from main and the process actually exiting (e.g. while global destructors are running) you risk undefined behaviour. The wording you quote about <i>&quot;the implementation shall release any owned resources&quot;</i> is talking about when the detached thread exits, but returning from <code>main</code> doesn&#39;t cause that to happen, the detached threads are still running."}], "tags": [], "owner": {"reputation": 1610, "user_id": 206543, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/InXhM.png?s=128&g=1", "display_name": "Dylon", "link": "https://stackoverflow.com/users/206543/dylon"}, "is_accepted": false, "score": 0, "last_activity_date": 1467233168, "last_edit_date": 1592644375, "creation_date": 1467233168, "answer_id": 38109735, "question_id": 38107707, "link": "https://stackoverflow.com/questions/38107707/do-c11-threads-provide-a-way-for-detached-threads-to-continue-after-the-main-t/38109735#38109735", "title": "Do C++11 threads provide a way for detached threads to continue after the main thread exits?", "body": "<p>Page 1121 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf\" rel=\"nofollow noreferrer\">Working Draft, Standard for Programming Language C++</a> from 2012-01-16 seems to state that once the main thread exits, its detached threads will be cleaned up as well (unless I'm misinterpreting it):</p>\n<blockquote>\n<p>void detach();</p>\n<p>Requires: joinable() is true.</p>\n<p>Effects: The thread represented by *this continues execution without the calling thread blocking. When detach() returns, *this no longer represents the possibly continuing thread of execution. When the thread previously represented by *this ends execution, the implementation shall release any owned resources.</p>\n<p>Postcondition: get_id() == id().</p>\n<p>Throws: system_error when an exception is required (30.2.2).</p>\n<p>Error conditions:</p>\n<p>\u2014 no_such_process \u2014 if the thread is not valid.</p>\n<p>\u2014 invalid_argument \u2014 if the thread is not joinable.</p>\n</blockquote>\n"}], "owner": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 520, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1468404783, "creation_date": 1467225680, "question_id": 38107707, "link": "https://stackoverflow.com/questions/38107707/do-c11-threads-provide-a-way-for-detached-threads-to-continue-after-the-main-t", "title": "Do C++11 threads provide a way for detached threads to continue after the main thread exits?", "body": "<p>Normally, when <code>main()</code> exits, all threads are killed.  <code>pthread_exit(3)</code> says</p>\n\n<blockquote>\n  <p>To allow other threads to continue execution, the main thread should terminate by calling pthread_exit() rather than exit(3).</p>\n</blockquote>\n\n<p>Is there an equivalent C++11 API call?  Something like <code>std::this_thread::exit(0)</code>?</p>\n"}, {"tags": ["c++", "linux", "windows", "macos", "posix"], "comments": [{"owner": {"reputation": 3162, "user_id": 3756593, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c5kio.jpg?s=128&g=1", "display_name": "Rik", "link": "https://stackoverflow.com/users/3756593/rik"}, "edited": false, "score": 4, "creation_date": 1467225647, "post_id": 38107632, "comment_id": 63648976, "body": "Have you tried to using a checksum of the file?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 3162, "user_id": 3756593, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c5kio.jpg?s=128&g=1", "display_name": "Rik", "link": "https://stackoverflow.com/users/3756593/rik"}, "edited": false, "score": 0, "creation_date": 1467227826, "post_id": 38107632, "comment_id": 63650268, "body": "@Rik Well, determining the checksum would need to read the complete file, unless it&#39;s stored in some kind of header information. The latter case would allow to compare for a least noticed checksum, assumed it&#39;s updated along any write operation to that file."}], "answers": [{"tags": [], "owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "is_accepted": false, "score": 2, "last_activity_date": 1467236776, "last_edit_date": 1592644375, "creation_date": 1467236399, "answer_id": 38110504, "question_id": 38107632, "link": "https://stackoverflow.com/questions/38107632/robust-way-to-detect-if-file-has-changed/38110504#38110504", "title": "Robust way to detect if file has changed", "body": "<p>I've made this answer a community wiki so others can add their ideas for the various platforms listed in the question.</p>\n<h1>Linux</h1>\n<h1>MacOS</h1>\n<h1>Windows</h1>\n<h2>Option 1</h2>\n<p>Set up a thread that <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365261(v=vs.85).aspx\" rel=\"nofollow noreferrer\">watches the directory</a> containing the file.  When the directory changes, you'll have to check if the file you care about has actually changed.  That may mean opening and re-reading the file, (e.g., to compute the current checksum).  But since you have to do this only after a change notification, this overhead may be acceptable.</p>\n<p>I believe (but have not verified) that if someone copies a same-size, same-timestamp file over an existing file, you'll get a directory change notification.</p>\n<h2>Option 2</h2>\n<p>Hold the file open with an <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20130415-00/?p=4663\" rel=\"nofollow noreferrer\">opportunistic lock</a>.  This involves creating the lock with a call to <code>DeviceIoControl</code> and then issuing a blocking call to <code>GetOverlappedResult</code>, which will unblock when another process attempts to change the file.  Your program can the release the lock, allowing the other process to update the file, and know that the file is being changed.</p>\n"}], "owner": {"reputation": 526, "user_id": 1306600, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6e1c620db61c9f51c02618382e38d2df?s=128&d=identicon&r=PG", "display_name": "Moshev", "link": "https://stackoverflow.com/users/1306600/moshev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2965, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1467236776, "creation_date": 1467225455, "question_id": 38107632, "link": "https://stackoverflow.com/questions/38107632/robust-way-to-detect-if-file-has-changed", "title": "Robust way to detect if file has changed", "body": "<p>I <em>think</em> this question hasn't been answered for my use-case.</p>\n\n<p>We wish to detect if the user has changed a file without re-reading its contents for the purposes of caching a computation result based on the file contents. Our program is a long-running one that lets the user click a button to perform a computation based on data entered in the program and data stored in external files (sorry, I can't be more specific than that). The external data needs to be read, processed and various data structures need to be built based on it, so we try to cache those between computations to speed up re-computes when the user changes the data in the program itself, but not the data in the external files. However, if the external file has changed, we have to re-read that.</p>\n\n<p>For each external resource we're checking if the modification time and file size have changed, but that's not really all that robust and can lead to user frustration if they have e.g. fileA and fileB with the same size and timestamp and copy or fileA to fileC, use fileC as an external resource, and then copy fileB to fileC. The system preserves the modification time of the original file and the sizes are the same, so we don't re-read the external resource.</p>\n\n<p>Our program runs on Windows, macOS and Linux, is written in C++ and we're perfectly OK with using platform-specific code to detect file changes. We're interested in the most robust way to detect if the contents of a file identified by a file path have changed without actually reading the file itself.</p>\n"}, {"tags": ["c++", "gcc", "qt-creator", "code-coverage", "gcov"], "answers": [{"comments": [{"owner": {"reputation": 480, "user_id": 2464085, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bd7f1a15b8525b7e597261e057c917b7?s=128&d=identicon&r=PG", "display_name": "alayers2", "link": "https://stackoverflow.com/users/2464085/alayers2"}, "edited": false, "score": 0, "creation_date": 1467297047, "post_id": 38107657, "comment_id": 63683379, "body": "Since I was specifically using QT Creator to build my project, I just wanted to add what steps I had to take. In my test applications I added: <code>QMAKE_CXXFLAGS += -g -Wall -fprofile-arcs -ftest-coverage -O0</code> and <code>QMAKE_LFLAGS += -g -Wall -Wl,--whole-archive -lLibA1 -Wl,--no-whole-archive -fprofile-arcs -ftest-coverage -O0</code> to the .proj file, as well as <code>LIBS += -lgcov</code>. If you don&#39;t specify the libraries to include in the whole archive command and then remember to close it, you&#39;ll get lots of errors."}, {"owner": {"reputation": 2175, "user_id": 835146, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/4d8ae9107254bbb3f0c9df8d8a4f8692?s=128&d=identicon&r=PG&f=1", "display_name": "ocirocir", "link": "https://stackoverflow.com/users/835146/ocirocir"}, "edited": false, "score": 0, "creation_date": 1521466093, "post_id": 38107657, "comment_id": 85728591, "body": "Remember to add --coverage (or specific flags) also to all compilation units composing the static library and not just to the test ones."}], "tags": [], "owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "is_accepted": true, "score": 2, "last_activity_date": 1467225527, "creation_date": 1467225527, "answer_id": 38107657, "question_id": 38107459, "link": "https://stackoverflow.com/questions/38107459/generating-test-coverage-of-c-static-library-as-called-by-separate-test-classe/38107657#38107657", "title": "Generating test coverage of C++ static library as called by separate test classes", "body": "<p>From the <a href=\"https://ftp.gnu.org/old-gnu/Manuals/ld-2.9.1/html_node/ld_3.html\" rel=\"nofollow\">ld manual</a></p>\n\n<blockquote>\n  <p><code>--whole-archive</code><br>\n  For each archive mentioned on the command line after the <code>--whole-archive</code> option, include every object file in the archive\n  in the link, rather than searching the archive for the required object\n  files.</p>\n</blockquote>\n\n<p>So link your static-library into your test using <code>--whole-archive</code>, which will result in your test binary having the entire static-library, and give <code>gcov</code> visibility of the entire code </p>\n"}, {"tags": [], "owner": {"reputation": 87, "user_id": 7820869, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8c1db15fce8b015154b0d93023b3f5bc?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/7820869/robert"}, "is_accepted": false, "score": 0, "last_activity_date": 1593549840, "last_edit_date": 1593549840, "creation_date": 1593455017, "answer_id": 62644448, "question_id": 38107459, "link": "https://stackoverflow.com/questions/38107459/generating-test-coverage-of-c-static-library-as-called-by-separate-test-classe/62644448#62644448", "title": "Generating test coverage of C++ static library as called by separate test classes", "body": "<p>To be honest, you don't really need --whole-archive, it's enough to just add the following to all the staticlibs and Unit-Tests, that you want gcov information from:</p>\n<pre><code># only apply codecoverage when CodeCoverage is set and debug-mode is active\nCodeCoverage\n{\n    debug:QMAKE_CXXFLAGS_DEBUG += --coverage    # -fprofile-arcs -ftest-coverage\n    debug:QMAKE_LFLAGS_DEBUG   += --coverage    # -lgcov\n}\n</code></pre>\n<p><strong><code>--coverage</code></strong> is context-sensitive and the meaning of it depends on whether you pass it to CXXFLAGS or LFLAGS:\n<a href=\"https://gcc.gnu.org/onlinedocs/gcc/Instrumentation-Options.html#Instrumentation-Options\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/gcc/Instrumentation-Options.html#Instrumentation-Options</a></p>\n<p>Also mentioned in <a href=\"https://stackoverflow.com/a/5352713/7820869\">https://stackoverflow.com/a/5352713/7820869</a>.\nSo no need to add -fprofile-arcs or any other mixture of flags.\nIn your case, add those Flags to A1.pro, B1.pro and B2.pro.</p>\n<p>The added <strong>scope</strong> around the flags just prevent that the codecoverage-flags pollute your build in Release- or Debug-mode. Just pass &quot;CONFIG+=CodeCoverage&quot; to qmake.exe, so it will build with code-coverage:\n<a href=\"https://doc.qt.io/archives/qt-4.8/qmake-advanced-usage.html#configuration-and-scopes\" rel=\"nofollow noreferrer\">https://doc.qt.io/archives/qt-4.8/qmake-advanced-usage.html#configuration-and-scopes</a></p>\n<p>After that just <strong>check</strong> whether after compilation the *.gcno files and after running the Unit-Test's the *.gcda files have been generated in the build-directory and call <strong><code>lcov</code></strong> on them:\n<a href=\"https://gcc.gnu.org/onlinedocs/gcc/Gcov-Data-Files.html#Gcov-Data-Files\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/gcc/Gcov-Data-Files.html#Gcov-Data-Files</a></p>\n<p><strong>Additional Info</strong></p>\n<p>The stackoverflow, that helped me solving my problems I run into:\n<a href=\"https://stackoverflow.com/questions/566472/where-are-the-gcov-symbols\">Where are the gcov symbols?</a></p>\n<p>in case you are running into linker errors like (undefined reference to __gcov_init and __gcov_merge_add), watch out that you are really adding those flags to every unit:\n<a href=\"https://www.spinics.net/lists/gcchelp/msg29518.html\" rel=\"nofollow noreferrer\">https://www.spinics.net/lists/gcchelp/msg29518.html</a></p>\n"}], "owner": {"reputation": 480, "user_id": 2464085, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bd7f1a15b8525b7e597261e057c917b7?s=128&d=identicon&r=PG", "display_name": "alayers2", "link": "https://stackoverflow.com/users/2464085/alayers2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2502, "favorite_count": 0, "accepted_answer_id": 38107657, "answer_count": 2, "score": 4, "last_activity_date": 1593549840, "creation_date": 1467224885, "question_id": 38107459, "link": "https://stackoverflow.com/questions/38107459/generating-test-coverage-of-c-static-library-as-called-by-separate-test-classe", "title": "Generating test coverage of C++ static library as called by separate test classes", "body": "<p>I am using QT Creator to work on a medium-sized project in C++.</p>\n\n<p>The project structure basically looks like this</p>\n\n<ol>\n<li><p>Project</p>\n\n<ul>\n<li>Group A\n\n<ul>\n<li>Library A1</li>\n</ul></li>\n<li>Group B\n\n<ul>\n<li>Library B1</li>\n<li>Library B2</li>\n<li>...etc</li>\n</ul></li>\n<li><p>Test</p>\n\n<ul>\n<li>LibA1_Test</li>\n<li>LibB1_Test</li>\n<li>LibB2_Test</li>\n<li>...etc</li>\n</ul></li>\n</ul></li>\n</ol>\n\n<p>The libraries are tested by the executables in the test project. I've managed to compile the tests themselves with gcov enabled, and produce code coverage reports with lcov, but all that they were showing the coverage for were the test cases, not the actual code that I'm testing. I've also tried compiling the static libraries with gcov as well, but when I run the tests against those libraries it does not generate any of the gcov output files. </p>\n\n<p>How could I generate the gcov output files by linking my project libraries against the tests? I want to see if there are any gaps in my unit tests.</p>\n"}, {"tags": ["c++", "inheritance", "polymorphism", "typeid"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1467225117, "post_id": 38107362, "comment_id": 63648656, "body": "It should work. Try to create an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and post it here."}, {"owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "edited": false, "score": 0, "creation_date": 1467228414, "post_id": 38107362, "comment_id": 63650599, "body": "What do you mean by &quot;base virtual class&quot;? Does <code>Parameter</code> contain virtual function? Or it serves as a virtual base class for <code>ITypedParameter&lt;T&gt;</code>?"}, {"owner": {"reputation": 347, "user_id": 4141975, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TV4-hkODBoQ/AAAAAAAAAAI/AAAAAAAAABI/y5DsZiLLTno/photo.jpg?sz=128", "display_name": "Daniel Moodie", "link": "https://stackoverflow.com/users/4141975/daniel-moodie"}, "edited": false, "score": 0, "creation_date": 1467233688, "post_id": 38107362, "comment_id": 63653258, "body": "Parameter contains virtual functions and ITypedParameter derives from it."}, {"owner": {"reputation": 347, "user_id": 4141975, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TV4-hkODBoQ/AAAAAAAAAAI/AAAAAAAAABI/y5DsZiLLTno/photo.jpg?sz=128", "display_name": "Daniel Moodie", "link": "https://stackoverflow.com/users/4141975/daniel-moodie"}, "edited": false, "score": 0, "creation_date": 1467317801, "post_id": 38107362, "comment_id": 63696146, "body": "Unfortunately I have not been able to reproduce this error with several simplified test cases.  I&#39;ve tried simulating the lib / executable placement of the base / derived type, and I&#39;ve tried simulating the inheritance structure."}, {"owner": {"reputation": 4257, "user_id": 2407363, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/JOzMf.jpg?s=128&g=1", "display_name": "Kemin Zhou", "link": "https://stackoverflow.com/users/2407363/kemin-zhou"}, "edited": false, "score": 0, "creation_date": 1606178729, "post_id": 38107362, "comment_id": 114878557, "body": "I am using gcc 9.3.0 on ubuntu, in my case typeid(DerivedPtr) always return typeinf(Base*). Not sure it is a bug for this particular compiler version or not.  However, dynamic_cast&lt;derived*&gt;(DerivedPtr) works properly and returns not nullptr."}], "owner": {"reputation": 347, "user_id": 4141975, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TV4-hkODBoQ/AAAAAAAAAAI/AAAAAAAAABI/y5DsZiLLTno/photo.jpg?sz=128", "display_name": "Daniel Moodie", "link": "https://stackoverflow.com/users/4141975/daniel-moodie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 613, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1467224560, "creation_date": 1467224560, "question_id": 38107362, "link": "https://stackoverflow.com/questions/38107362/c-typeid-of-of-base-class-pointer-to-derived-class-is-returning-typeid-of-base", "title": "C++ typeid of of base class pointer to derived class is returning typeid of base class", "body": "<p>I have a base virtual class called <a href=\"https://github.com/dtmoodie/parameters/blob/WIP/include/parameters/Parameter.hpp\" rel=\"nofollow\">Parameter</a> which then has several templated derived classes such as <a href=\"https://github.com/dtmoodie/parameters/blob/WIP/include/parameters/TypedParameter.hpp\" rel=\"nofollow\">TypedParameter</a>.\nNow I have a function that takes in a Parameter* which needs to look up the exact type of the pointer.</p>\n\n<pre><code>void Serializer::Serialize(cereal::BinaryOutputArchive&amp; ar, Parameter* param)\n{\n    auto itr = _binary_serializers.find(Loki::TypeInfo(typeid(*param)));\n    ar(cereal::make_nvp(\"type\", std::string(typeid(*param).name())));\n    if(itr != _binary_serializers.end())\n    {\n        itr-&gt;second.second(ar, param);\n    }\n}\n</code></pre>\n\n<p>I am calling this from my unit test code with the following:</p>\n\n<pre><code>TypedParameter&lt;int&gt; test;\ntest.UpdateData(5);\n{\n    std::ofstream ofs(\"test.xml\");\n    cereal::XMLOutputArchive ar(ofs);\n    Parameters::Cereal::Serializer::instance()-&gt;Serialize(ar, &amp;test);\n}\n</code></pre>\n\n<p>In the debugger, I can see that the pointer is pointing to the correct derived type and it has all the correct derived type information displayed in the debugger, however typeid(*param).name() always returns \"class Parameters::Parameter\".</p>\n\n<p>I am using visual studio 2013x64 on windows 7.  Why can't typeid get the correct type information?</p>\n\n<p>To make things easier to understand without parsing my entire project, TypedParameter is a concrete class with the following inheritance:</p>\n\n<p>Parameter -> ITypedParameter&lt; T > -> MetaParameter&lt; T > -> TypedParameter&lt; T ></p>\n"}, {"tags": ["c++", "qt", "c++11", "c-preprocessor", "moc"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1467224599, "post_id": 38107329, "comment_id": 63648347, "body": "You probably cannot do what you want (and use <code>moc</code>). Please <b>edit your question</b> to give the actual real case and <i>motivate</i> your question."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 2617557, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4e9cb53253a98ad71e035556f36d4ad7?s=128&d=identicon&r=PG", "display_name": "fyo", "link": "https://stackoverflow.com/users/2617557/fyo"}, "edited": false, "score": 1, "creation_date": 1467225778, "post_id": 38107538, "comment_id": 63649053, "body": "Actually, i wrote macro as #define CREATE_SIGNALS signals: void error_signal(QString error); it was not working,but after Q_SIGNAL it is working now."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 57, "user_id": 2617557, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4e9cb53253a98ad71e035556f36d4ad7?s=128&d=identicon&r=PG", "display_name": "fyo", "link": "https://stackoverflow.com/users/2617557/fyo"}, "edited": false, "score": 1, "creation_date": 1467226386, "post_id": 38107538, "comment_id": 63649451, "body": "@fyo The Q_SIGNAL and Q_SLOT are guaranteed to work in all cases."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1467225148, "creation_date": 1467225148, "answer_id": 38107538, "question_id": 38107329, "link": "https://stackoverflow.com/questions/38107329/how-to-define-signals-with-macros-in-qt/38107538#38107538", "title": "How to define signals with macros in Qt", "body": "<p>Moc preprocesses the sources it works on, so your macro will work once you actually make the macro define some signals, and not regular methods.</p>\n\n<p>The following is a complete example:</p>\n\n<pre><code>#include &lt;QtCore&gt;\n#include &lt;array&gt;\n#include &lt;algorithm&gt;\n\n#define CREATE_SIGNALS\\\n   Q_SIGNAL void signal1(const QString &amp; = QString());\\\n   Q_SIGNAL void signal2(int = 0);\n\nstruct Foo : QObject {\n   CREATE_SIGNALS\n   Q_OBJECT\n};\n\nstruct Bar : QObject {\n   CREATE_SIGNALS\n   Q_OBJECT\n};\n\nint main()\n{\n   std::array&lt;int, 4&gt; s;\n   Foo foo;\n   Bar bar;\n   s.fill(0);\n   QObject::connect(&amp;foo, &amp;Foo::signal1, [&amp;]{++s[0];});\n   QObject::connect(&amp;foo, &amp;Foo::signal2, [&amp;]{++s[1];});\n   QObject::connect(&amp;bar, &amp;Bar::signal1, [&amp;]{++s[2];});\n   QObject::connect(&amp;bar, &amp;Bar::signal2, [&amp;]{++s[3];});\n   emit foo.signal1();\n   emit foo.signal2();\n   emit bar.signal1();\n   emit bar.signal2();\n   Q_ASSERT(std::all_of(std::begin(s), std::end(s), [](int val) { return val == 1; }));\n}\n\n#include \"main.moc\"\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 2617557, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4e9cb53253a98ad71e035556f36d4ad7?s=128&d=identicon&r=PG", "display_name": "fyo", "link": "https://stackoverflow.com/users/2617557/fyo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 702, "favorite_count": 0, "accepted_answer_id": 38107538, "answer_count": 1, "score": 2, "last_activity_date": 1467225791, "creation_date": 1467224442, "last_edit_date": 1467225791, "question_id": 38107329, "link": "https://stackoverflow.com/questions/38107329/how-to-define-signals-with-macros-in-qt", "title": "How to define signals with macros in Qt", "body": "<p>I try to create a some standart signal definitionsfor some classes with macros like:</p>\n\n<pre><code>#define CREATE_SIGNALS signals: void error_signal(QString error);\n</code></pre>\n\n<p>Functions are created, but moc did not create methods for these functions. It seems that moc is running before macros processed. How can i make this work?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1467225143, "post_id": 38107310, "comment_id": 63648671, "body": "BTW, Your example has UB. I mean <code>SometypeIdoNotKnow values[7]</code> then <code>for (int i=0; i &lt;= 7; i++){ </code>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1467225354, "post_id": 38107310, "comment_id": 63648793, "body": "How about instead <code>QList&lt;QLabel*&gt; labels = findChildren&lt;QLabel*&gt;();</code> Which will give you a list of all the labels that exist in the parent widget."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1467225403, "post_id": 38107310, "comment_id": 63648821, "body": "SometypeIdoNotKnow is a <code>QLabel*</code>"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1467232414, "post_id": 38107310, "comment_id": 63652590, "body": "@drescherjm Good idea, but it assumes that the all the labels are to be iterated."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1467232967, "post_id": 38107310, "comment_id": 63652880, "body": "I was thinking of that part. If you only need to iterate a subset of that you may still be able to use <code>findChildren&lt;QLabel*&gt;()</code> perhaps making use <code>QRegularExpression</code> parameter (name the labels the same base object name) and / or filter however it depends on your situation."}], "answers": [{"tags": [], "owner": {"reputation": 1574, "user_id": 3612634, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/z4pyN.png?s=128&g=1", "display_name": "tisaconundrum", "link": "https://stackoverflow.com/users/3612634/tisaconundrum"}, "is_accepted": false, "score": 0, "last_activity_date": 1467228250, "last_edit_date": 1467228250, "creation_date": 1467226402, "answer_id": 38107906, "question_id": 38107310, "link": "https://stackoverflow.com/questions/38107310/qt-gui-how-can-i-put-these-labels-into-an-array/38107906#38107906", "title": "Qt GUI how can I put these labels into an array", "body": "<p>Thank you @drescherjm for the answer.\n<br>this seems to have worked.</p>\n\n<pre><code>QLabel* values[7] = {ui-&gt;label_11, \n                     ui-&gt;label_12, \n                     ui-&gt;label_44, \n                     ui-&gt;label_43, \n                     ui-&gt;label_9,  \n                     ui-&gt;label_10, \n                     ui-&gt;label_42};\nfor (int i = 0; i &lt; 7; i++){       \n    values[i]-&gt;setVisible(false);  \n    qDebug() &lt;&lt; i;                 \n}  \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1574, "user_id": 3612634, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/z4pyN.png?s=128&g=1", "display_name": "tisaconundrum", "link": "https://stackoverflow.com/users/3612634/tisaconundrum"}, "edited": false, "score": 0, "creation_date": 1467240196, "post_id": 38109528, "comment_id": 63655995, "body": "what is up with the auto type? That is really cool how that is working :) Thank you for showing me"}, {"owner": {"reputation": 1574, "user_id": 3612634, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/z4pyN.png?s=128&g=1", "display_name": "tisaconundrum", "link": "https://stackoverflow.com/users/3612634/tisaconundrum"}, "edited": false, "score": 0, "creation_date": 1467240281, "post_id": 38109528, "comment_id": 63656025, "body": "also how can i get all the children under a certain parent? Say under <code>verticalLayout</code>"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 1574, "user_id": 3612634, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/z4pyN.png?s=128&g=1", "display_name": "tisaconundrum", "link": "https://stackoverflow.com/users/3612634/tisaconundrum"}, "edited": false, "score": 0, "creation_date": 1467302436, "post_id": 38109528, "comment_id": 63687573, "body": "@tisaconundrum A layout isn&#39;t a parent in the sense of a <code>QObject</code> parent. Iteration of widgets managed by a given layout is covered by <a href=\"http://stackoverflow.com/q/31546511/1329652\">this question</a>."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 1574, "user_id": 3612634, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/z4pyN.png?s=128&g=1", "display_name": "tisaconundrum", "link": "https://stackoverflow.com/users/3612634/tisaconundrum"}, "edited": false, "score": 1, "creation_date": 1467302515, "post_id": 38109528, "comment_id": 63687628, "body": "@tisaconundrum &quot;what is up with the auto type&quot; It&#39;s not a type. It&#39;s an instruction for the compiler to perform type inference. It is a 5+ year old feature of modern C++. You might wish to read up on C++11, it allows your code to be much more readable and concise compared to C++98."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1467232329, "creation_date": 1467232329, "answer_id": 38109528, "question_id": 38107310, "link": "https://stackoverflow.com/questions/38107310/qt-gui-how-can-i-put-these-labels-into-an-array/38109528#38109528", "title": "Qt GUI how can I put these labels into an array", "body": "<p>If your compiler is not ancient, use C++11:</p>\n\n<pre><code>// If you only want to iterate some labels\nauto const labels = {ui-&gt;label_11, ui-&gt;label_12, ui-&gt;label_44, \n                     ui-&gt;label_43, ui-&gt;label_9, ui-&gt;label_10, \n                     ui-&gt;label_42};\n// If you want to iterate all labels\nauto labels = findChildren&lt;QLabel*&gt;();\n\nfor (auto label : labels) label-&gt;hide();\n</code></pre>\n"}], "owner": {"reputation": 1574, "user_id": 3612634, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/z4pyN.png?s=128&g=1", "display_name": "tisaconundrum", "link": "https://stackoverflow.com/users/3612634/tisaconundrum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 499, "favorite_count": 0, "accepted_answer_id": 38109528, "answer_count": 2, "score": 0, "last_activity_date": 1467232329, "creation_date": 1467224385, "question_id": 38107310, "link": "https://stackoverflow.com/questions/38107310/qt-gui-how-can-i-put-these-labels-into-an-array", "title": "Qt GUI how can I put these labels into an array", "body": "<p>How can I set up my <code>labels</code> to be in an array to be called on later? I can't seem to get a hand on what type <code>labels</code> is in order to pull this off.</p>\n\n<p>What I have is this, however this would be rather ugly to maintain.\nIf I could change this</p>\n\n<pre><code>ui-&gt;label_11-&gt;setVisible(false);\nui-&gt;label_5-&gt;setVisible(false);\nui-&gt;label_12-&gt;setVisible(false);\nui-&gt;label_44-&gt;setVisible(false);\nui-&gt;label_43-&gt;setVisible(false);\nui-&gt;label_9-&gt;setVisible(false);\nui-&gt;label_10-&gt;setVisible(false);\nui-&gt;label_42-&gt;setVisible(false);\n</code></pre>\n\n<p>to this, it would be most preferable. But, perhaps I'm thinking about this in the wrong way.</p>\n\n<pre><code>SometypeIdoNotKnow values[7] = {ui-&gt;label_11,    \n                                ui-&gt;label_5,\n                                ui-&gt;label_12,\n                                ui-&gt;label_44,\n                                ui-&gt;label_43,\n                                ui-&gt;label_9,\n                                ui-&gt;label_10,\n                                ui-&gt;label_42};\n\nfor (int i=0; i &lt;= 7; i++){    \n    values[i]-&gt;setVisible(false);    \n}\n</code></pre>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1467226355, "post_id": 38107211, "comment_id": 63649428, "body": "Sound like it might be time for a Microsoft bug report (if this is really wrong; I cannot evaluate the correctness of this - not from Brasil)."}], "owner": {"reputation": 4121, "user_id": 19674, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5057291c386d12733d4123a1e277384e?s=128&d=identicon&r=PG", "display_name": "Jon Trauntvein", "link": "https://stackoverflow.com/users/19674/jon-trauntvein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1467304706, "creation_date": 1467224069, "last_edit_date": 1467304706, "question_id": 38107211, "link": "https://stackoverflow.com/questions/38107211/incorrect-output-with-stdtime-put-and-c", "title": "Incorrect output with std::time_put and %#c", "body": "<p>I have written a program that uses std::time_put to format a time stamp using the locales as follows:</p>\n\n<pre><code>typedef std::ostreambuf_iterator&lt;char, std::char_traits&lt;char&gt; &gt; iterator_type;\ntypedef std::time_put&lt;char, iterator_type&gt; time_put_type;\ntime_put_type const &amp;tp = std::use_facet&lt;time_put_type&gt;(out.getloc());\nstruct tm std_time;\niterator_type begin(std::cout);\nchar const format[] = \"#%c\";\n\n// std_time is set to a time stamp from the data received\ntp.put(begin, std::cout, ' ', &amp;std_time, format, format + strlen(format));\n</code></pre>\n\n<p>When the windows computer is configured to use the Brasilian Portuguese locale, I am getting an output for this similar to: \"quarta-feira, 29 29e junho 29e 2016 12:00\".  I would expect output like \"quarta-feira 29 de junho 2016 12:00\" instead.  This appears to be a bug in the visual c++ standard library but there may be something wrong with the way time_put is being invoked.  Has anyone else seen behaviour like this or aware of a work-around?</p>\n\n<p>I poked around some more in the regional and language settings for the operating system.  I found that the \"long date\" format defined by the operating system is </p>\n\n<pre><code>dddd, d' de 'MMMM' de 'yyyy\n</code></pre>\n\n<p>Looking at the resulting date that comes from this rule, it would look like the OS or standard library is not honouring the single quotes within the string and is interpreting the d character in \"de\" as the day of the month.</p>\n"}, {"tags": ["c++", "xml", "xml2"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 3234663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63fe7fa6e047976b6b0b480d3b772664?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek", "link": "https://stackoverflow.com/users/3234663/vivek"}, "edited": false, "score": 0, "creation_date": 1467264464, "post_id": 38110128, "comment_id": 63662250, "body": "So what basically i should do is first check if the current node type is XML_ELEMENT_NODE then i can directly use the xmlGetProp to get the value of the VT attribute? or do i still go ahead and have to check whether it is XML_ATTRIBUTE_NODE ?..and if so how i can check that.."}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1467271056, "post_id": 38110128, "comment_id": 63665334, "body": "Once you get to <code>Radii1</code> node, you can get attributes using <a href=\"http://www.xmlsoft.org/html/libxml-tree.html#xmlGetProp\" rel=\"nofollow noreferrer\"><code>xmlGetProp</code></a> function."}], "tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": true, "score": 1, "last_activity_date": 1467234743, "creation_date": 1467234743, "answer_id": 38110128, "question_id": 38107131, "link": "https://stackoverflow.com/questions/38107131/xml-read-using-libxml2-library/38110128#38110128", "title": "Xml read using libxml2 library", "body": "<p>The XML format is correct, but a node is not just an XML entity. You're seeing nodes in the XML document that represent text portions of the document; namely the whitespace -- and specifically the newlines -- between the XML entities.</p>\n\n<p>What you want to do is examine the value in cur->type, whether it's an <code>XML_ELEMENT_NODE</code>, an <code>XML_TEXT_NODE</code>; or any one of various other kinds of XML nodes, and decide what you want to do with them.</p>\n\n<p>And if you are searching for a particular attribute, like \"VT\", it would be one of the child <code>XML_ATTRIBUTE_NODE</code>s of the <code>Radii1</code> <code>XML_ELEMENT_NODE</code>.</p>\n"}], "owner": {"reputation": 69, "user_id": 3234663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63fe7fa6e047976b6b0b480d3b772664?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek", "link": "https://stackoverflow.com/users/3234663/vivek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 38110128, "answer_count": 1, "score": 0, "last_activity_date": 1467264255, "creation_date": 1467223794, "last_edit_date": 1467264255, "question_id": 38107131, "link": "https://stackoverflow.com/questions/38107131/xml-read-using-libxml2-library", "title": "Xml read using libxml2 library", "body": "<p>I have a XML file as below</p>\n\n<pre><code>&lt;root&gt;\n&lt;Radii1 VT = \"121212 121212\"/&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>I am trying to read the xml using libxml2 library.</p>\n\n<pre><code>cur = cur-&gt;xmlChildrenNode;\nwhile (cur != NULL) {\nif ((!xmlStrcmp(cur-&gt;name, (const xmlChar *)\"Radii1\"))){\n\n    }\n\ncur = cur-&gt;next;\n}\n</code></pre>\n\n<p>Now , my problem is if i am printing the cur->name, first it is giving me text then next time it will give me Radii1 and again next time will give text and then will exit the code.</p>\n\n<p>I am not sure why that is happening is the format of the xml not correct?</p>\n"}, {"tags": ["c++", "templates", "operator-overloading"], "answers": [{"comments": [{"owner": {"reputation": 539, "user_id": 6136013, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9dfd7585752c56c5272150aa4fead686?s=128&d=identicon&r=PG&f=1", "display_name": "BlindDriver", "link": "https://stackoverflow.com/users/6136013/blinddriver"}, "edited": false, "score": 0, "creation_date": 1467225714, "post_id": 38107680, "comment_id": 63649012, "body": "The thing is in my actual code I have multiple classes with the Type enum defined in them. I want to avoid having to define operator&lt;&lt; for all of them."}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "reply_to_user": {"reputation": 539, "user_id": 6136013, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9dfd7585752c56c5272150aa4fead686?s=128&d=identicon&r=PG&f=1", "display_name": "BlindDriver", "link": "https://stackoverflow.com/users/6136013/blinddriver"}, "edited": false, "score": 0, "creation_date": 1467225931, "post_id": 38107680, "comment_id": 63649138, "body": "@BlindDriver You are going to have to read up on type deduction if you want to understand why that won&#39;t work.  You will either have to write a macro to minimize the code duplication or write them out one at a time."}, {"owner": {"reputation": 539, "user_id": 6136013, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9dfd7585752c56c5272150aa4fead686?s=128&d=identicon&r=PG&f=1", "display_name": "BlindDriver", "link": "https://stackoverflow.com/users/6136013/blinddriver"}, "edited": false, "score": 0, "creation_date": 1467226084, "post_id": 38107680, "comment_id": 63649236, "body": "Yes, I&#39;ve read the post you referenced and see why my code doesn&#39;t work. I was just hoping there was an alternative. But thanks very much for your help anyway!"}], "tags": [], "owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "is_accepted": true, "score": 1, "last_activity_date": 1467225578, "last_edit_date": 1495540348, "creation_date": 1467225578, "answer_id": 38107680, "question_id": 38107125, "link": "https://stackoverflow.com/questions/38107125/overloading-operator-for-a-nested-type/38107680#38107680", "title": "overloading operator for a nested type", "body": "<p>The compiler will never be able to figure what the type <code>T</code> is supposed to be in order to instantiate the template (check out <a href=\"https://stackoverflow.com/q/25245453/1277769\">this</a> question for more on that).  Just do this:</p>\n\n<pre><code>    std::ofstream &amp; operator&lt;&lt;(std::ostream &amp; s, bar::Type t){...}\n</code></pre>\n\n<p>The <code>enum</code> you declared is public to <code>bar</code> so there's no access restriction to have to worry about in this case.</p>\n"}], "owner": {"reputation": 539, "user_id": 6136013, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9dfd7585752c56c5272150aa4fead686?s=128&d=identicon&r=PG&f=1", "display_name": "BlindDriver", "link": "https://stackoverflow.com/users/6136013/blinddriver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 38107680, "answer_count": 1, "score": 0, "last_activity_date": 1467225578, "creation_date": 1467223781, "last_edit_date": 1467225336, "question_id": 38107125, "link": "https://stackoverflow.com/questions/38107125/overloading-operator-for-a-nested-type", "title": "overloading operator for a nested type", "body": "<p>The following code builds fine but the overloaded template operator is not invoked. Why is that? The <code>main()</code> function prints <code>120</code> instead of <code>x</code>.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nnamespace foo\n{\n    struct bar\n    {\n        enum Type { x = 'x', y = 'y' };\n    };\n    template&lt;typename T&gt; std::ostream&amp; operator&lt;&lt;(std::ostream&amp; s, typename T::Type o) { return s &lt;&lt; char(o); }\n}\n\nint main()\n{\n    foo::bar::Type t{ foo::bar::x };\n    std::cout &lt;&lt; t;\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "histogram", "projection"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1467226197, "post_id": 38106954, "comment_id": 63649318, "body": "Probably can <a href=\"http://stackoverflow.com/a/32079157/5008845\">help</a>"}], "owner": {"reputation": 21, "user_id": 3440743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c69da8e4b54ed332b2b4d8e8d2c70f85?s=128&d=identicon&r=PG&f=1", "display_name": "user3440743", "link": "https://stackoverflow.com/users/3440743/user3440743"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1401, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1467223219, "creation_date": 1467223219, "question_id": 38106954, "link": "https://stackoverflow.com/questions/38106954/display-the-histogram-of-the-horizontal-and-vertical-projections-of-the-image-op", "title": "Display the histogram of the horizontal and vertical projections of the image opencv", "body": "<p>I have got the horizontal and vertical projections of the image of a silhouette{Mat shape}.  I would like to display it as a histogram . I tried normalizing and drawing with the line function But couldn't. Please help . Thanks in advance .<a href=\"http://i.stack.imgur.com/wCzO1.png\" rel=\"nofollow\">silhouette</a> </p>\n\n<pre><code>Mat ret;\nthreshold(shape,ret,0,255,CV_THRESH_BINARY_INV+CV_THRESH_OTSU);\nMat horizontal(ret.cols,1,CV_32S);//horizontal histogram\nhorizontal = Scalar::all(0);\nMat vertical(ret.rows,1,CV_32S);//vertical histogram\nvertical = Scalar::all(0);\nfor(int i=0;i&lt;ret.cols;i++)\n{\n    horizontal.at&lt;int&gt;(i,0)=countNonZero(ret(Rect(i,0,1,ret.rows)));\n}\nfor(int i=0;i&lt;ret.rows;i++)\n{\n   vertical.at&lt;int&gt;(i,0) = countNonZero(ret(Rect(0,i,ret.cols,1)));\n}\nnormalize(vertical,vertical,0,ret.rows,NORM_MINMAX);\n</code></pre>\n"}, {"tags": ["python", "c++", "boost", "boost-python", "boost-ref"], "answers": [{"tags": [], "owner": {"reputation": 633, "user_id": 833398, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/28954f09859c4f502727fddd49dd0bac?s=128&d=identicon&r=PG", "display_name": "outoftime", "link": "https://stackoverflow.com/users/833398/outoftime"}, "is_accepted": true, "score": 0, "last_activity_date": 1467225505, "last_edit_date": 1467225505, "creation_date": 1467225029, "answer_id": 38107504, "question_id": 38106936, "link": "https://stackoverflow.com/questions/38106936/why-cant-stdref-be-used-to-pass-objects-into-boost-python-modules/38107504#38107504", "title": "Why can&#39;t std::ref be used to pass objects into Boost.Python modules?", "body": "<p>Nice article about <a href=\"https://misspent.wordpress.com/2009/10/11/boost-python-and-handling-python-exceptions/\" rel=\"nofollow\">handling python exceptions in C++</a>. Any way I guess python through exception <code>AttributeError</code> because of difference in <code>reference_wrapper</code> implementations in <a href=\"http://www.boost.org/doc/libs/1_56_0/doc/html/boost/reference_wrapper.html\" rel=\"nofollow\">std</a> and <a href=\"http://en.cppreference.com/w/cpp/utility/functional/reference_wrapper\" rel=\"nofollow\">boost</a> libraries. You can see difference even in public interface. <code>std::reference_wrapper</code> has no <code>get_pointer()</code> method.</p>\n"}], "owner": {"reputation": 858, "user_id": 4267929, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/98885eca3b83031612bef15ed5b21abc?s=128&d=identicon&r=PG&f=1", "display_name": "Henricus V.", "link": "https://stackoverflow.com/users/4267929/henricus-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 1, "accepted_answer_id": 38107504, "answer_count": 1, "score": 4, "last_activity_date": 1467225505, "creation_date": 1467223162, "question_id": 38106936, "link": "https://stackoverflow.com/questions/38106936/why-cant-stdref-be-used-to-pass-objects-into-boost-python-modules", "title": "Why can&#39;t std::ref be used to pass objects into Boost.Python modules?", "body": "<p>Environment: Boost 1.61.0 compiled with Python 3.5</p>\n\n<p>The following C++ code outputs <code>12</code>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class A\n{\npublic:\n    int func() { return 12; }\n};\n\nBOOST_PYTHON_MODULE(bridge)\n{\n    using namespace boost::python;\n    class_&lt;A&gt;(\"A\", no_init)\n        .def(\"func\", &amp;A::func);\n}\n\nint main()\n{\n    A a;\n    PyImport_AppendInittab(\"bridge\", PyInit_bridge);\n    Py_Initialize();\n    using namespace boost::python;\n\n    dict dictMain = extract&lt;dict&gt;(import(\"__main__\").attr(\"__dict__\"));\n\n    import(\"bridge\").attr(\"a\") = boost::ref(a);\n    exec(\"import bridge\", dictMain);\n    exec(\"print(bridge.a.func())\", dictMain);\n}\n</code></pre>\n\n<p>However, if I replace <code>boost::ref</code> with <code>std::ref</code>, a <code>boost::python::error_already_set</code> instance is thrown.</p>\n\n<p>Why cannot <code>std::ref</code> be used here?</p>\n"}, {"tags": ["c++", "multithreading", "qt", "signals-slots", "qthread"], "answers": [{"comments": [{"owner": {"reputation": 1502, "user_id": 3511987, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ZWXHe.jpg?s=128&g=1", "display_name": "Matin Lotfaliee", "link": "https://stackoverflow.com/users/3511987/matin-lotfaliee"}, "edited": false, "score": 0, "creation_date": 1467224636, "post_id": 38107289, "comment_id": 63648382, "body": "Yep that did the work. but it needs the parent to be removed."}, {"owner": {"reputation": 1577, "user_id": 1311494, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/5uuIC.jpg?s=128&g=1", "display_name": "Murat \u015eeker", "link": "https://stackoverflow.com/users/1311494/murat-%c5%9eeker"}, "reply_to_user": {"reputation": 1502, "user_id": 3511987, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ZWXHe.jpg?s=128&g=1", "display_name": "Matin Lotfaliee", "link": "https://stackoverflow.com/users/3511987/matin-lotfaliee"}, "edited": false, "score": 0, "creation_date": 1467224742, "post_id": 38107289, "comment_id": 63648453, "body": "Why parent needs to be removed ?"}, {"owner": {"reputation": 1502, "user_id": 3511987, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ZWXHe.jpg?s=128&g=1", "display_name": "Matin Lotfaliee", "link": "https://stackoverflow.com/users/3511987/matin-lotfaliee"}, "edited": false, "score": 0, "creation_date": 1467224984, "post_id": 38107289, "comment_id": 63648582, "body": "It printed out that moveToThread can not be called for a object that has parent."}, {"owner": {"reputation": 1577, "user_id": 1311494, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/5uuIC.jpg?s=128&g=1", "display_name": "Murat \u015eeker", "link": "https://stackoverflow.com/users/1311494/murat-%c5%9eeker"}, "reply_to_user": {"reputation": 1502, "user_id": 3511987, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ZWXHe.jpg?s=128&g=1", "display_name": "Matin Lotfaliee", "link": "https://stackoverflow.com/users/3511987/matin-lotfaliee"}, "edited": false, "score": 0, "creation_date": 1467225409, "post_id": 38107289, "comment_id": 63648825, "body": "Parent doesn&#39;t need to be removed, only the parent-child relationship. From the documentation :   &quot;The child of a QObject must always be created in the thread where the parent was created. This implies, among other things, that you should never pass the QThread object (this) as the parent of an object created in the thread (since the QThread object itself was created in another thread).&quot;  Refer to : <a href=\"http://doc.qt.io/qt-5.7/threads-qobject.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5.7/threads-qobject.html</a>"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 2, "creation_date": 1467232533, "post_id": 38107289, "comment_id": 63652645, "body": "This works, but is a bad idea because <code>QThread</code> is a thread handle. Conceptually, having a handle to a resource within the controlled resource is backwards."}], "tags": [], "owner": {"reputation": 1577, "user_id": 1311494, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/5uuIC.jpg?s=128&g=1", "display_name": "Murat \u015eeker", "link": "https://stackoverflow.com/users/1311494/murat-%c5%9eeker"}, "is_accepted": false, "score": -2, "last_activity_date": 1467224339, "creation_date": 1467224339, "answer_id": 38107289, "question_id": 38106912, "link": "https://stackoverflow.com/questions/38106912/how-to-signal-a-slot-in-another-thread-in-qt/38107289#38107289", "title": "How to signal a slot in another thread in Qt", "body": "<p>Implement <code>Thread1</code> constructor like following :</p>\n\n<pre><code>Thread1(QObject* parent) { moveToThread(this); }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9778, "user_id": 474034, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zKYWU.jpg?s=128&g=1", "display_name": "lanoxx", "link": "https://stackoverflow.com/users/474034/lanoxx"}, "edited": false, "score": 0, "creation_date": 1491393056, "post_id": 38109800, "comment_id": 73530500, "body": "What if I have a <code>Worker c;</code>, which is moved to a third thread and is also connected to <code>aSignal</code>. Then emitting the signal will run the method aSlot in both workers b and c, each in their own thread. Right?"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 9778, "user_id": 474034, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zKYWU.jpg?s=128&g=1", "display_name": "lanoxx", "link": "https://stackoverflow.com/users/474034/lanoxx"}, "edited": false, "score": 0, "creation_date": 1491393986, "post_id": 38109800, "comment_id": 73531225, "body": "@lanoxx Correct."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 8, "last_activity_date": 1467233482, "creation_date": 1467233482, "answer_id": 38109800, "question_id": 38106912, "link": "https://stackoverflow.com/questions/38106912/how-to-signal-a-slot-in-another-thread-in-qt/38109800#38109800", "title": "How to signal a slot in another thread in Qt", "body": "<p>You've got it backwards. A <code>QThread</code> is a thread handle, not a thread itself. If you want to run something in another thread, it belongs in a plain <code>QObject</code> that you move to a thread. You don't need to derive from <code>QThread</code> at all! You also shouldn't move a <code>QThread</code>'s base <code>QObject</code> to the thread itself. What you do is have a handle to the thread live in the thread itself. As soon as the thread finishes, the handle becomes non-functional (a <code>QObject</code> with a null <code>thread()</code>).</p>\n\n<p>First of all, if all you need is to run some code that runs to completion (e.g. does a calculation) in a worker thread, use the thread pool and <code>QtConcurrent</code> framework. It manages all the threads for you:</p>\n\n<pre><code>#include &lt;QtConcurrent&gt;\n...\nQThread::currentThread()-&gt;setObjectName(\"main\");\nqDebug() &lt;&lt; QThread::currentThread();\nQtConcurrent::run([]{ qDebug() &lt;&lt; QThread::currentThread(); }\n</code></pre>\n\n<p>If you insist on controlling the thread's lifetime yourself, you'd do the following:</p>\n\n<pre><code>#include &lt;QtCore&gt;\nstruct Worker : QObject {\n  Q_SLOT void aSlot() { \n    qDebug() &lt;&lt; QThread::currentThread(); \n    QThread::currentThread()-&gt;quit();\n  }\n  Q_SIGNAL void aSignal();\n  Q_OBJECT\n};\n\nint main(int argc, char ** argv) {\n  QCoreApplication app{argc, argv};\n  QThread::currentThread()-&gt;setObjectName(\"main\");\n  QThread thread;\n  thread.setObjectName(\"thread\");\n  Worker a, b;\n  b.moveToThread(&amp;thread);\n  thread.start();\n  QObject::connect(&amp;a, &amp;Worker::aSignal, &amp;b, &amp;Worker::aSlot);\n  emit a.aSignal(); // the signal is emitted from the main thread\n  thread.wait();\n}\n</code></pre>\n\n<p>Finally, note that the <code>QDebug</code> class knows how to output the object's address, class and name (if set) when passed a pointer to a <code>QObject</code>. Thus, you don't need to use <code>QThread::currentThreadId()</code>, the <code>QThread::currentThread()</code> is sufficient - and you can give the threads mnemonic names since they are <code>QObject</code>s, after all.</p>\n"}], "owner": {"reputation": 1502, "user_id": 3511987, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ZWXHe.jpg?s=128&g=1", "display_name": "Matin Lotfaliee", "link": "https://stackoverflow.com/users/3511987/matin-lotfaliee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5603, "favorite_count": 2, "accepted_answer_id": 38109800, "answer_count": 2, "score": 1, "last_activity_date": 1509987863, "creation_date": 1467223045, "last_edit_date": 1509987863, "question_id": 38106912, "link": "https://stackoverflow.com/questions/38106912/how-to-signal-a-slot-in-another-thread-in-qt", "title": "How to signal a slot in another thread in Qt", "body": "<p>I have written a simple signal slot application using Qt. I want to send a signal to another thread that is runs out of the main thread.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>class Thread1 : public QThread\n{\n    Q_OBJECT\n\n\n    void run()\n    {\n        exec();\n    }\npublic:\n    Thread1(QObject* parent);\n\npublic slots:\n    void a()\n    {\n        qInfo()&lt;&lt;QThread::currentThreadId();\n    }\n};\nclass Object : public QObject\n{\n    Q_OBJECT\npublic:\n    Object(){}\n    void start()\n    {\n        qInfo()&lt;&lt;QThread::currentThreadId();\n        Thread1* thread = new Thread1(this);\n        connect(this,SIGNAL(a()),thread,SLOT(a()));\n        thread-&gt;start();\n        emit a();\n    }\n\nsignals:\n    void a();\n};\n</code></pre>\n\n<p>But it returns:</p>\n\n<pre><code>0x7f9851c988c0\n0x7f9851c988c0\n</code></pre>\n\n<p>How can I call a signal that outputs another threadID?</p>\n"}, {"tags": ["c++", "algorithm"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1467223105, "post_id": 38106891, "comment_id": 63647393, "body": "Would <code>lround()</code>&#39;ing the double before adding it to the int do what you want?"}, {"owner": {"reputation": 92569, "user_id": 400654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afc1068910df4dd83c2fc3af0255af11?s=128&d=identicon&r=PG", "display_name": "Kevin B", "link": "https://stackoverflow.com/users/400654/kevin-b"}, "edited": false, "score": 0, "creation_date": 1467230076, "post_id": 38106891, "comment_id": 63651413, "body": "<i>&quot;I&#39;m just asking which is the <b>best way</b> to implement this&quot;</i> that&#39;s too opinionated for this site."}, {"owner": {"reputation": 1453, "user_id": 687252, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R3ZZ5.jpg?s=128&g=1", "display_name": "the_candyman", "link": "https://stackoverflow.com/users/687252/the-candyman"}, "reply_to_user": {"reputation": 92569, "user_id": 400654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afc1068910df4dd83c2fc3af0255af11?s=128&d=identicon&r=PG", "display_name": "Kevin B", "link": "https://stackoverflow.com/users/400654/kevin-b"}, "edited": false, "score": 0, "creation_date": 1467230220, "post_id": 38106891, "comment_id": 63651485, "body": "@KevinB changed &quot;best way&quot; to &quot;good and robust way&quot;. Is it better?"}, {"owner": {"reputation": 92569, "user_id": 400654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afc1068910df4dd83c2fc3af0255af11?s=128&d=identicon&r=PG", "display_name": "Kevin B", "link": "https://stackoverflow.com/users/400654/kevin-b"}, "edited": false, "score": 0, "creation_date": 1467230284, "post_id": 38106891, "comment_id": 63651507, "body": "Not really. I&#39;m not sure how you could salvage this."}, {"owner": {"reputation": 1453, "user_id": 687252, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R3ZZ5.jpg?s=128&g=1", "display_name": "the_candyman", "link": "https://stackoverflow.com/users/687252/the-candyman"}, "reply_to_user": {"reputation": 92569, "user_id": 400654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afc1068910df4dd83c2fc3af0255af11?s=128&d=identicon&r=PG", "display_name": "Kevin B", "link": "https://stackoverflow.com/users/400654/kevin-b"}, "edited": false, "score": 0, "creation_date": 1467230323, "post_id": 38106891, "comment_id": 63651535, "body": "@KevinB I don&#39;t understand what&#39;s wrong with my question..."}, {"owner": {"reputation": 92569, "user_id": 400654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afc1068910df4dd83c2fc3af0255af11?s=128&d=identicon&r=PG", "display_name": "Kevin B", "link": "https://stackoverflow.com/users/400654/kevin-b"}, "edited": false, "score": 0, "creation_date": 1467230376, "post_id": 38106891, "comment_id": 63651560, "body": "If the only thing that makes your question different from the duplicate is you want the best, or a good, way of doing it, I don&#39;t think that&#39;s enough of a difference to make it not a dupe. What makes your question different, that&#39;s what you need to explain within your question."}, {"owner": {"reputation": 1453, "user_id": 687252, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R3ZZ5.jpg?s=128&g=1", "display_name": "the_candyman", "link": "https://stackoverflow.com/users/687252/the-candyman"}, "reply_to_user": {"reputation": 92569, "user_id": 400654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afc1068910df4dd83c2fc3af0255af11?s=128&d=identicon&r=PG", "display_name": "Kevin B", "link": "https://stackoverflow.com/users/400654/kevin-b"}, "edited": false, "score": 0, "creation_date": 1467230461, "post_id": 38106891, "comment_id": 63651612, "body": "@KevinB ok, but my <a href=\"http://stackoverflow.com/questions/38096660/in-which-segment-a-given-number-lies-in\">previous question</a> was marked as duplicate because I was asking how to solve the problem using floating point math. Now, I&#39;m asking how to solve the problem, not necessarily using floating point math."}, {"owner": {"reputation": 92569, "user_id": 400654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afc1068910df4dd83c2fc3af0255af11?s=128&d=identicon&r=PG", "display_name": "Kevin B", "link": "https://stackoverflow.com/users/400654/kevin-b"}, "edited": false, "score": 0, "creation_date": 1467230494, "post_id": 38106891, "comment_id": 63651629, "body": "you already have <i>an</i> answer to that, explain why you are looking for more ways to do it or why that way won&#39;t work for you."}, {"owner": {"reputation": 1453, "user_id": 687252, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R3ZZ5.jpg?s=128&g=1", "display_name": "the_candyman", "link": "https://stackoverflow.com/users/687252/the-candyman"}, "reply_to_user": {"reputation": 92569, "user_id": 400654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afc1068910df4dd83c2fc3af0255af11?s=128&d=identicon&r=PG", "display_name": "Kevin B", "link": "https://stackoverflow.com/users/400654/kevin-b"}, "edited": false, "score": 0, "creation_date": 1467230586, "post_id": 38106891, "comment_id": 63651672, "body": "@KevinB I&#39;m looking for more ways because if I use something like (int)floor(x / l), I can sometimes obtain ambiguous results as remarked in my <a href=\"http://stackoverflow.com/questions/38096660/in-which-segment-a-given-number-lies-in\">previous question</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1467230791, "post_id": 38106891, "comment_id": 63651774, "body": "If &#39;l&#39; would be a decimal (with decimal places) and <code>n*l</code> a decimal, then it becomes a different question. However your query is <code>int getSegmentId(double x, double l, int n)</code> and not <code>int getSegmentId(double x, decimal l, int n)</code>"}, {"owner": {"reputation": 1453, "user_id": 687252, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R3ZZ5.jpg?s=128&g=1", "display_name": "the_candyman", "link": "https://stackoverflow.com/users/687252/the-candyman"}, "edited": false, "score": 0, "creation_date": 1467231689, "post_id": 38106891, "comment_id": 63652259, "body": "@DieterL&#252;cking it seems it has become a philosophical problem about number representations... It sounds strange to me that this kind of problem has never been tackled and solved. I give up."}], "answers": [{"comments": [{"owner": {"reputation": 1453, "user_id": 687252, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R3ZZ5.jpg?s=128&g=1", "display_name": "the_candyman", "link": "https://stackoverflow.com/users/687252/the-candyman"}, "edited": false, "score": 0, "creation_date": 1467223437, "post_id": 38106934, "comment_id": 63647616, "body": "is it enough? Don&#39;t think it always works. See <a href=\"http://stackoverflow.com/questions/38096660/in-which-segment-a-given-number-lies-in\">this</a> and <a href=\"http://stackoverflow.com/questions/588004/is-floating-point-math-broken\">this</a>"}], "tags": [], "owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "is_accepted": false, "score": 2, "last_activity_date": 1467223154, "creation_date": 1467223154, "answer_id": 38106934, "question_id": 38106891, "link": "https://stackoverflow.com/questions/38106891/in-which-segment-a-given-floating-point-number-lies-in/38106934#38106934", "title": "In which segment a given floating point number lies in?", "body": "<p>I don't see the problem, if each segment starts at <code>i*l</code> and ends at <code>(i+1)*l</code> then</p>\n\n<pre><code>int s = static_cast&lt;int&gt;(std::floor(x / l));\n</code></pre>\n\n<p>should be enough.</p>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 6525127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hioSo.jpg?s=128&g=1", "display_name": "Apoorva K H", "link": "https://stackoverflow.com/users/6525127/apoorva-k-h"}, "is_accepted": true, "score": 1, "last_activity_date": 1467223537, "creation_date": 1467223537, "answer_id": 38107049, "question_id": 38106891, "link": "https://stackoverflow.com/questions/38106891/in-which-segment-a-given-floating-point-number-lies-in/38107049#38107049", "title": "In which segment a given floating point number lies in?", "body": "<pre><code>int getSegmentId(double x, double l, double n)\n{\n    if(x&gt;=n*l){\n        //cout&gt;&gt; \"Not in any segments! \";\n        return -1;\n    else\n        return (int) x/l ;\n}\n</code></pre>\n"}], "owner": {"reputation": 1453, "user_id": 687252, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R3ZZ5.jpg?s=128&g=1", "display_name": "the_candyman", "link": "https://stackoverflow.com/users/687252/the-candyman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 1, "closed_date": 1467223598, "accepted_answer_id": 38107049, "answer_count": 2, "score": 1, "last_activity_date": 1467230190, "creation_date": 1467222960, "last_edit_date": 1495542760, "question_id": 38106891, "link": "https://stackoverflow.com/questions/38106891/in-which-segment-a-given-floating-point-number-lies-in", "closed_reason": "Duplicate", "title": "In which segment a given floating point number lies in?", "body": "<p>Suppose to have <code>n</code> (integer) contiguous segments of length <code>l</code> (floating point). That is:</p>\n\n<pre><code>Segment 0 = [0, l)\nSegment 1 = [l, 2*l)\nSegment 2 = [2*l, 3*l)\n... \nSegment (n-1) = [(n-1)*l, n*l) \n</code></pre>\n\n<p>Given a number <code>x</code> (floating point), I want to write a function</p>\n\n<pre><code>int getSegmentId(double x, double l, int n)\n</code></pre>\n\n<p>which returns the id of the segment where <code>x</code> lies.</p>\n\n<p>I would like to do this in O(1), not O(log(n)) by checking if <code>x</code> lies in each interval.</p>\n\n<p>I think this is a very general and common problem and I guess there is one solution for this. Have you any hint for me?</p>\n\n<p><strong>Addendum</strong></p>\n\n<p>The question is not about a particular implementation of this algorithm like in the previous <a href=\"https://stackoverflow.com/questions/38096660/in-which-segment-a-given-number-lies-in\">question</a> based on floating point operations. I'm just asking which is <s>the best</s> <strong>a good and robust way</strong> to implement this.</p>\n"}, {"tags": ["c++", "c++17"], "answers": [{"comments": [{"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1467222947, "post_id": 38106815, "comment_id": 63647303, "body": "I will add <code>p.make_preferred()</code> before calling <code>filename()</code>. This just converts the path seperators to the one preferred by the os. <a href=\"http://en.cppreference.com/w/cpp/experimental/fs/path/make_preferred\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/experimental/fs/path/make_preferre&zwnj;&#8203;d</a>"}, {"owner": {"reputation": 2928, "user_id": 1603365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/K4qJN.png?s=128&g=1", "display_name": "md5i", "link": "https://stackoverflow.com/users/1603365/md5i"}, "reply_to_user": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 2, "creation_date": 1467223049, "post_id": 38106815, "comment_id": 63647361, "body": "Why?  Would path separators ever be in the result of <code>filename()</code>?  For other purposes, I could understand this."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 2, "creation_date": 1467223659, "post_id": 38106815, "comment_id": 63647745, "body": "The &quot;preferred separator&quot; is just the system default. A forward slash works just as fine on Windows."}], "tags": [], "owner": {"reputation": 2928, "user_id": 1603365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/K4qJN.png?s=128&g=1", "display_name": "md5i", "link": "https://stackoverflow.com/users/1603365/md5i"}, "is_accepted": true, "score": 7, "last_activity_date": 1467222737, "creation_date": 1467222737, "answer_id": 38106815, "question_id": 38106741, "link": "https://stackoverflow.com/questions/38106741/how-to-get-file-name-using-c17-filesystem/38106815#38106815", "title": "How to get file name using C++17 Filesystem", "body": "<p>Use the <a href=\"http://en.cppreference.com/w/cpp/filesystem/path/filename\" rel=\"noreferrer\">filename method</a>.</p>\n\n<pre><code>std::filesystem::path p(\"C:/SomeFolder/sometextfile.txt\");\nauto name = p.filename();\n</code></pre>\n"}], "owner": {"reputation": 10770, "user_id": 852063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/80fd1d68d0d2ae503cf5870e29fecae5?s=128&d=identicon&r=PG&f=1", "display_name": "Amani", "link": "https://stackoverflow.com/users/852063/amani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1324, "favorite_count": 0, "accepted_answer_id": 38106815, "answer_count": 1, "score": -1, "last_activity_date": 1467222737, "creation_date": 1467222470, "question_id": 38106741, "link": "https://stackoverflow.com/questions/38106741/how-to-get-file-name-using-c17-filesystem", "title": "How to get file name using C++17 Filesystem", "body": "<p>Suppose I have a path <code>\"C:/SomeFolder/sometextfile.txt\"</code>. How can a file name, <code>\"sometextfile.txt\"</code>, be extracted from a path using C++17 filesystem library?</p>\n"}, {"tags": ["c++", "c", "instantiation"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1467222476, "post_id": 38106718, "comment_id": 63647023, "body": "C and C++ are <b>different</b> languages . C for examples has no <code>new</code> operator. It is not clear what you plan. And C also does not support OOP, i.e. instantiation. Please read a C book."}, {"owner": {"reputation": 31, "user_id": 6520232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662da92182ee1aa5f4953fad30420613?s=128&d=identicon&r=PG&f=1", "display_name": "user10326", "link": "https://stackoverflow.com/users/6520232/user10326"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1467222531, "post_id": 38106718, "comment_id": 63647059, "body": "And hence the point of my question. Then how do I create a non-dynamically allocated object from C, that is defined in a C++ library?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1467222570, "post_id": 38106718, "comment_id": 63647083, "body": "You cannot. Write a C++ wrapper instead."}, {"owner": {"reputation": 362978, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1467222586, "post_id": 38106718, "comment_id": 63647096, "body": "@user10326 Why do you assume that you should be able to? They are different languages, after all."}, {"owner": {"reputation": 2771, "user_id": 4163321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZrgsU.gif?s=128&g=1", "display_name": "Lukas Thomsen", "link": "https://stackoverflow.com/users/4163321/lukas-thomsen"}, "edited": false, "score": 2, "creation_date": 1467222612, "post_id": 38106718, "comment_id": 63647111, "body": "Why don&#39;t you provide a C function within your C++ library which creates the object and returns a <code>void *</code> to it? This hides the <code>new</code> operator to C..."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 2, "creation_date": 1467222626, "post_id": 38106718, "comment_id": 63647121, "body": "You need to write C++ wrapper functions with C linkage to allow you to <code>new</code> and <code>delete</code> objects."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 4, "creation_date": 1467222644, "post_id": 38106718, "comment_id": 63647132, "body": "@user10326 <i>&quot;I have found several websites explaining how to create and use wrappers to access the C++ class methods.&quot;</i> And these weren&#39;t giving you sufficient answers?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 2771, "user_id": 4163321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZrgsU.gif?s=128&g=1", "display_name": "Lukas Thomsen", "link": "https://stackoverflow.com/users/4163321/lukas-thomsen"}, "edited": false, "score": 0, "creation_date": 1467222649, "post_id": 38106718, "comment_id": 63647135, "body": "@LukasThomsen: That would still be a C++ function. Just with a C interface."}, {"owner": {"reputation": 14999, "user_id": 8999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZD5Uo.jpg?s=128&g=1", "display_name": "Fabio Ceconello", "link": "https://stackoverflow.com/users/8999/fabio-ceconello"}, "edited": false, "score": 0, "creation_date": 1467222679, "post_id": 38106718, "comment_id": 63647153, "body": "You only can do that if you have a C++ compiler to compile the module containing the class. Since IAR EWARM, as you stated, is C only, what will you use to compile the C++ module? Is it g++?"}, {"owner": {"reputation": 2771, "user_id": 4163321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZrgsU.gif?s=128&g=1", "display_name": "Lukas Thomsen", "link": "https://stackoverflow.com/users/4163321/lukas-thomsen"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1467222684, "post_id": 38106718, "comment_id": 63647155, "body": "@Olaf: Yes but it&#39;ll do the trick... you won&#39;t be able to use the object though..."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1467228758, "post_id": 38106718, "comment_id": 63650767, "body": "You need to take special care that your C++ library is linked to all the required C++ runtime libraries. Also, a C program normally will not run the C++ runtime code, so you may need to link your C program with the C++ compiler if you need C++ runtime behavior (such as global constructors)."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 6520232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662da92182ee1aa5f4953fad30420613?s=128&d=identicon&r=PG&f=1", "display_name": "user10326", "link": "https://stackoverflow.com/users/6520232/user10326"}, "edited": false, "score": 0, "creation_date": 1467223360, "post_id": 38106835, "comment_id": 63647572, "body": "Hi, this is helpful, and thanks. In the calling C program, what do I cast the void pointer to, since my C program doesn&#39;t know about the class? (sorry if that&#39;s a dumb question)"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 31, "user_id": 6520232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662da92182ee1aa5f4953fad30420613?s=128&d=identicon&r=PG&f=1", "display_name": "user10326", "link": "https://stackoverflow.com/users/6520232/user10326"}, "edited": false, "score": 0, "creation_date": 1467223472, "post_id": 38106835, "comment_id": 63647628, "body": "@user10326 For any operations in the c++ class, you provide c API functions that take the handle, as mentioned. I&#39;ll add a small example."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 3, "creation_date": 1467223606, "post_id": 38106835, "comment_id": 63647715, "body": "An opaque structure pointer would probably be a better choice than a simple <code>void*</code> - You would at least have <i>some</i> type checking."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 1, "creation_date": 1467224069, "post_id": 38106835, "comment_id": 63648001, "body": "@tofro How should it look like? <code>typedef void* scrnDevPtr;</code>? Or using an empty <code>struct</code> as base?"}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1467224651, "post_id": 38106835, "comment_id": 63648390, "body": "simply <code>struct scrnDev; struct scrnDevPtr *ptr;</code> in the C part. There&#39;s nothing more that needs to be known there. The C++ part doesn&#39;t need to be knowing anything more as well, as it&#39;s <code>static_cast</code>ing away the type anyways."}, {"owner": {"reputation": 31, "user_id": 6520232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662da92182ee1aa5f4953fad30420613?s=128&d=identicon&r=PG&f=1", "display_name": "user10326", "link": "https://stackoverflow.com/users/6520232/user10326"}, "edited": false, "score": 0, "creation_date": 1467225151, "post_id": 38106835, "comment_id": 63648673, "body": "All great information, thanks. One further question with respect to overloaded operators. I have a method with overloaded operators, by number and type of variables. Would each of these methods require a static cast as in the example earlier in this post?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 31, "user_id": 6520232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662da92182ee1aa5f4953fad30420613?s=128&d=identicon&r=PG&f=1", "display_name": "user10326", "link": "https://stackoverflow.com/users/6520232/user10326"}, "edited": false, "score": 0, "creation_date": 1467225305, "post_id": 38106835, "comment_id": 63648775, "body": "@user10326 Yes, the static cast is necessary to access any members of the underlying c++ class."}, {"owner": {"reputation": 31, "user_id": 6520232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662da92182ee1aa5f4953fad30420613?s=128&d=identicon&r=PG&f=1", "display_name": "user10326", "link": "https://stackoverflow.com/users/6520232/user10326"}, "edited": false, "score": 0, "creation_date": 1467225776, "post_id": 38106835, "comment_id": 63649049, "body": "Thanks to everyone who took the time to answer! There is adequate information here to help understand and take a try on it. 8)"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 31, "user_id": 6520232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662da92182ee1aa5f4953fad30420613?s=128&d=identicon&r=PG&f=1", "display_name": "user10326", "link": "https://stackoverflow.com/users/6520232/user10326"}, "edited": false, "score": 0, "creation_date": 1467225955, "post_id": 38106835, "comment_id": 63649155, "body": "@user10326 De nada ;-). I&#39;ve already earned 50 fake internet points of reputation writing that answer. Well, I think your question is useful for future research."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 7, "last_activity_date": 1467228558, "last_edit_date": 1495539855, "creation_date": 1467222810, "answer_id": 38106835, "question_id": 38106718, "link": "https://stackoverflow.com/questions/38106718/instantiate-c-object-from-c-using-operator-new/38106835#38106835", "title": "Instantiate C++ object from C using operator new", "body": "<p>The usual way is to create some c++ function that can be called from c and returns a <code>void*</code> handle for the class allocated internally:</p>\n\n<pre><code>extern \"C\" {\n     void* createScrnDev() {\n          return new scrnDev(); \n     } \n}\n</code></pre>\n\n<p>Other functions in this wrapper API would take the handle, and cast it back to the original object instance:</p>\n\n<pre><code>extern \"C\" {\n     void blink(void* scrnDev_) {\n          static_cast&lt;scrnDev*&gt;(scrnDev_)-&gt;blink(); \n     } \n}\n</code></pre>\n\n<p>Finally you'll need a <code>destroy()</code> function to call <code>delete</code> properly:</p>\n\n<pre><code>extern \"C\" {\n     void destroyScrnDev(void* scrnDev_) {\n          delete static_cast&lt;scrnDev*&gt;(scrnDev_); \n     } \n}\n</code></pre>\n\n<hr>\n\n<p>As mentioned in comments you can also use an <a href=\"https://en.wikipedia.org/wiki/Opaque_pointer\" rel=\"nofollow noreferrer\">opaque pointer</a>, that uses a <code>struct</code> declaration  used in both languages:</p>\n\n<p><strong><code>scrnDev.h</code></strong>:</p>\n\n<pre><code> struct scrnDevHandle;\n\n scrnDevHandle* createScrnDev();\n void blink(scrnDevHandle* scrnDev_);\n void destroyScrnDev(scrnDevHandle* scrnDev_);\n</code></pre>\n\n<p><strong><code>scrnDev.cpp</code></strong>:</p>\n\n<pre><code>class scrnDev : public scrnDevHandle {\npublic:\n    scrnDev() {}\n    blink() {\n        // ...\n    }\n};\n\nextern \"C\" {\n     scrnDevHandle * createScrnDev() {\n          return new scrnDev(); \n     } \n     void blink(scrnDevHandle* scrnDev_) {\n          static_cast&lt;scrnDev*&gt;(scrnDev_)-&gt;blink(); \n     } \n     void destroyScrnDev(scrnDevHandle* scrnDev_) {\n          delete static_cast&lt;scrnDev*&gt;(scrnDev_); \n     } \n}\n</code></pre>\n\n<hr>\n\n<p><sub>You might be interested to read some more details about the <code>extern \"C\" {}</code> interfacing <a href=\"https://stackoverflow.com/questions/37927388/shall-external-c-enclose-the-declaration-or-definition-of-a-c-function/37927500#37927500\"><strong>here</strong></a></sub></p>\n"}], "owner": {"reputation": 31, "user_id": 6520232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662da92182ee1aa5f4953fad30420613?s=128&d=identicon&r=PG&f=1", "display_name": "user10326", "link": "https://stackoverflow.com/users/6520232/user10326"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 848, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1467228667, "creation_date": 1467222403, "last_edit_date": 1467228667, "question_id": 38106718, "link": "https://stackoverflow.com/questions/38106718/instantiate-c-object-from-c-using-operator-new", "title": "Instantiate C++ object from C using operator new", "body": "<p>I have created a C++ program and class, and plan to compile it to a library. I have found several websites explaining how to create and use wrappers to access the C++ class methods.</p>\n\n<p>My environment is IAR EWARM which in my case I need to use standard C. To create class instantiated objects, I am using (or will need to use) operator \"new\", i.e., for class \"scrnDev\": bLink1 = new( scrnDev );    </p>\n\n<p>I have been searching for information on how to instantiate objects using the \"new\" operator from a C program, but unable to find how this can be accomplished.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 2, "creation_date": 1467221678, "post_id": 38106423, "comment_id": 63646536, "body": "Play with the std::ios_base::flags (fixed, scientific) and precision"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1467221682, "post_id": 38106423, "comment_id": 63646542, "body": "Maybe the &quot;You don&#39;t pay for what you don&#39;t use principle&quot;. If you want double, you can ask for it."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 3, "creation_date": 1467221764, "post_id": 38106423, "comment_id": 63646596, "body": "@Galik, The title is rather misleading. There&#39;s no integer division involved."}, {"owner": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "edited": false, "score": 1, "creation_date": 1467221796, "post_id": 38106423, "comment_id": 63646612, "body": "The division does return a double. In fact, you&#39;re declaring the variable gap to be a double, and it is.  The problem is in how you&#39;re using the cout stream."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5400907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cf5536966d9119d8822bb8a311a370c?s=128&d=identicon&r=PG", "display_name": "shreyanshd", "link": "https://stackoverflow.com/users/5400907/shreyanshd"}, "edited": false, "score": 1, "creation_date": 1467222016, "post_id": 38106519, "comment_id": 63646736, "body": "Why does it print a decimal number with other set of values, such as the first example?@PeterSmith"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 3, "creation_date": 1467222813, "post_id": 38106519, "comment_id": 63647227, "body": "@ShreyanshDoshi It&#39;s defaulting to 6 digits of precision."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 7, "last_activity_date": 1467222037, "last_edit_date": 1467222037, "creation_date": 1467221705, "answer_id": 38106519, "question_id": 38106423, "link": "https://stackoverflow.com/questions/38106423/why-doesnt-c-return-a-double-on-division/38106519#38106519", "title": "Why doesn&#39;t C++ return a double on division?", "body": "<p>Everything with your <code>double</code> value is fine. The result you see is just a matter of how it's represented in the <code>std::ostream</code>.</p>\n\n<p>Use the <a href=\"http://en.cppreference.com/w/cpp/io/manip\" rel=\"nofollow\"><code>fixed</code> and <code>setprecision()</code> I/O manipulators</a>, to change the behavior of the representation:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\nint main()\n{\n    int max = 99404748;\n    int min = 925679;\n    int n = 240;\n    double gap = (max-min)/(double)(n-1);\n    cout &lt;&lt; fixed &lt;&lt; setprecision(4) &lt;&lt;gap&lt;&lt;endl;\n         // ^^^^^    ^^^^^^^^^^^^^^^\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/9ae9e93482146db9\" rel=\"nofollow\"><kbd>Live Demo</kbd></a></p>\n"}], "owner": {"reputation": 21, "user_id": 5400907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cf5536966d9119d8822bb8a311a370c?s=128&d=identicon&r=PG", "display_name": "shreyanshd", "link": "https://stackoverflow.com/users/5400907/shreyanshd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1467222037, "creation_date": 1467221359, "question_id": 38106423, "link": "https://stackoverflow.com/questions/38106423/why-doesnt-c-return-a-double-on-division", "title": "Why doesn&#39;t C++ return a double on division?", "body": "<p>I am trying to divide two integers and want the exact answer in double.\nMy code works fine for small values:</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\nint main()\n{\n    int max = 100;\n    int min = 10;\n    int n = 8;\n    double gap = (max-min)/(double)(n-1);\n    cout&lt;&lt;gap&lt;&lt;endl;\n}\n</code></pre>\n\n<p>This prints 12.8571</p>\n\n<p>But when I run this:</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\nint main()\n{\n    int max = 99404748;\n    int min = 925679;\n    int n = 240;\n    double gap = (max-min)/(double)(n-1);\n    cout&lt;&lt;gap&lt;&lt;endl;\n}\n</code></pre>\n\n<p>It prints 412046 while the actual answer is 412046.3138</p>\n\n<p>What is the reason for this behaviour? Also, how can I fix it?</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 2928, "user_id": 1603365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/K4qJN.png?s=128&g=1", "display_name": "md5i", "link": "https://stackoverflow.com/users/1603365/md5i"}, "edited": false, "score": 0, "creation_date": 1467221697, "post_id": 38106414, "comment_id": 63646553, "body": "Compiles in g++ 5.4 and 6.1 without the explicit type."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1467221796, "post_id": 38106414, "comment_id": 63646613, "body": "It compiles with GCC5, even if I don&#39;t specialize explicitly the template. What compiler are you using?"}, {"owner": {"reputation": 131, "user_id": 4016895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T0Q0J.png?s=128&g=1", "display_name": "Toppest.Of.Kek", "link": "https://stackoverflow.com/users/4016895/toppest-of-kek"}, "reply_to_user": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1467221842, "post_id": 38106414, "comment_id": 63646648, "body": "@skypjack I&#39;m using g++, it&#39;s in the question: <code>g++ (Ubuntu 4.8.4-2ubuntu1~14.04.3) 4.8.4</code>"}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1467221873, "post_id": 38106414, "comment_id": 63646661, "body": "@Toppest.Of.Kek oops, sorry, missed it. :-)"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1467221910, "post_id": 38106414, "comment_id": 63646686, "body": "Your second parameter is sketchy. It doesn&#39;t look like there&#39;s any reason to use the heavyweight <code>std::function</code> over a template parameter, and that <code>&amp;&amp;</code> disallows the user from passing an lvalue of that type."}, {"owner": {"reputation": 2928, "user_id": 1603365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/K4qJN.png?s=128&g=1", "display_name": "md5i", "link": "https://stackoverflow.com/users/1603365/md5i"}, "edited": false, "score": 0, "creation_date": 1467222225, "post_id": 38106414, "comment_id": 63646850, "body": "Some more data.  Fails in 4.8, succeeds in 4.9."}, {"owner": {"reputation": 131, "user_id": 4016895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T0Q0J.png?s=128&g=1", "display_name": "Toppest.Of.Kek", "link": "https://stackoverflow.com/users/4016895/toppest-of-kek"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1467222302, "post_id": 38106414, "comment_id": 63646895, "body": "@chris I changed the code to use a second template parameter and it worked fine, but it still makes me wonder why it won&#39;t work in 4.8 of g++"}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467222717, "post_id": 38106414, "comment_id": 63647178, "body": "It would appear to be a compiler issue, not a problem with your code.  Compiles with <code>g++ (GCC) 5.3.1 20151207 (Red Hat 5.3.1-2)</code>, along with the versions mentioned by others.  Compiles with clang, according to trygub below.  Compiles with Visual Studio 2015 (build <code>19.00.23720.0 (x86)</code>).  Even compiles with Visual Studio 2010 (which had kinda shoddy partial C++0x support), if you turn the range-based <code>for</code> into an equivalent normal <code>for</code> by manually assigning <code>VAL</code> inside the loop body, and fill the vector manually."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1467223179, "post_id": 38106414, "comment_id": 63647446, "body": "out of interest, do you want the cursor to be writeable or readonly?"}], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 4016895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T0Q0J.png?s=128&g=1", "display_name": "Toppest.Of.Kek", "link": "https://stackoverflow.com/users/4016895/toppest-of-kek"}, "edited": false, "score": 0, "creation_date": 1467221800, "post_id": 38106517, "comment_id": 63646615, "body": "Does the code compile fine without the explicit type for the where?"}], "tags": [], "owner": {"reputation": 87, "user_id": 6523434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rvv6F.png?s=128&g=1", "display_name": "trygub", "link": "https://stackoverflow.com/users/6523434/trygub"}, "is_accepted": false, "score": 0, "last_activity_date": 1467222753, "last_edit_date": 1467222753, "creation_date": 1467221703, "answer_id": 38106517, "question_id": 38106414, "link": "https://stackoverflow.com/questions/38106414/strange-template-deduction/38106517#38106517", "title": "Strange Template Deduction", "body": "<p>If I do not provide the type parameter explicitly I confirm I can reproduce the problem with g++ (Ubuntu 4.8.4-2ubuntu1~14.04.3) 4.8.4.</p>\n\n<p>This problem seems to be specific to gcc version 4.8. E.g., the code compiles with newer versions of gcc, and, on the same platform, clang++-3.6 compiles this code with the same command line parameters.</p>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 1, "last_activity_date": 1467223591, "creation_date": 1467223591, "answer_id": 38107076, "question_id": 38106414, "link": "https://stackoverflow.com/questions/38106414/strange-template-deduction/38107076#38107076", "title": "Strange Template Deduction", "body": "<p>You may be interested in a slightly more flexible version, which:</p>\n\n<ol>\n<li><p>preserves constness of the values in the source vector (depending on the constness of the vector itself)</p></li>\n<li><p>Takes any functor, no need for a <code>std::function</code>  </p></li>\n</ol>\n\n<p>-</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\ntemplate&lt;typename container_ty_, class Comp&gt;\nauto where(container_ty_&amp; V, Comp&amp;&amp; comp)\n{\n    using value_type = typename container_ty_::value_type;\n    using reference =\n    std::conditional_t&lt;\n      std::is_const&lt;container_ty_&gt;::value,\n        std::reference_wrapper&lt;const value_type&gt;,\n        std::reference_wrapper&lt;value_type&gt;\n    &gt;;\n\n    std::vector&lt;reference&gt; cursor;\n\n    for(auto&amp; VAL : V)\n        if(comp(VAL))\n            cursor.push_back(VAL);\n\n    return cursor;\n}\n\nint main(int argc, char** argv) {\n    std::vector&lt;int&gt; tVect = {0, 5, 2, 1, 7, 9};\n\n    //Why must std::vector&lt;int&gt; be passed...\n    auto vec = where(tVect, [](const int&amp; V) -&gt; bool { return V &gt; 5; });\n\n    std::for_each(vec.begin(), vec.end(), [] (int&amp; v) { std::cout &lt;&lt; v++ &lt;&lt; std::endl; });\n    std::cout &lt;&lt; std::endl;\n    std::for_each(tVect.begin(), tVect.end(), [](const int&amp; v) { std::cout &lt;&lt; v &lt;&lt; std::endl; });\n}\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 4016895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T0Q0J.png?s=128&g=1", "display_name": "Toppest.Of.Kek", "link": "https://stackoverflow.com/users/4016895/toppest-of-kek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1467223591, "creation_date": 1467221324, "question_id": 38106414, "link": "https://stackoverflow.com/questions/38106414/strange-template-deduction", "title": "Strange Template Deduction", "body": "<p>This may be a duplicate, but I haven't found the problem anywhere else yet. Given the following code:</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\ntemplate&lt;typename container_ty_&gt;\nauto where(container_ty_ const&amp; V, std::function&lt;bool(typename container_ty_::value_type const&amp;)&gt;&amp;&amp; comp) \n-&gt; std::vector&lt;std::reference_wrapper&lt;typename container_ty_::value_type&gt;&gt; {\n        std::vector&lt;std::reference_wrapper&lt;typename container_ty_::value_type&gt;&gt; cursor;\n\n        for(typename container_ty_::value_type const&amp; VAL : V)\n                if(comp(VAL))\n                        cursor.push_back(const_cast&lt;typename container_ty_::value_type&amp;&gt;(VAL));\n\n        return cursor;\n}\n\nint main(int argc, char** argv) {\n        std::vector&lt;int&gt; tVect = {0, 5, 2, 1, 7, 9};\n\n        //Why must std::vector&lt;int&gt; be passed...\n        auto vec = where&lt;std::vector&lt;int&gt;&gt;(tVect, [](const int&amp; V) -&gt; bool { return V &gt; 5; });\n\n        std::for_each(vec.begin(), vec.end(), [] (int&amp; v) { std::cout &lt;&lt; v++ &lt;&lt; std::endl; });\n        std::cout &lt;&lt; std::endl;\n        std::for_each(tVect.begin(), tVect.end(), [](int&amp; v) { std::cout &lt;&lt; v &lt;&lt; std::endl; });\n}\n</code></pre>\n\n<p>The line where <code>vec</code> is being assigned, the function where seems to need to have <code>std::vector&lt;int&gt;</code> passed into it in order to compile. if now i get:</p>\n\n<blockquote>\n  <p>testing.cpp:20:68: error: no matching function for call to \u2018<code>where(std::vector&lt;int&gt;&amp;, main(int, char**)::__lambda0)\u2019\n    auto vec = where(tVect, [](const int&amp; V) -&gt; bool { return V &gt; 5; });</code></p>\n</blockquote>\n\n<p>I suspect this is because the template is not being deduced correctly for the second argument of <code>where</code> could anyone explain to me why, i seem to be at a standstill...</p>\n\n<p>Also:\nCommand line args: <code>g++ testing.cpp -g -o testing -std=c++11 -Wall</code></p>\n\n<p>G++ version: <code>g++ (Ubuntu 4.8.4-2ubuntu1~14.04.3) 4.8.4</code></p>\n"}, {"tags": ["c++", "string", "hex"], "comments": [{"owner": {"reputation": 4007, "user_id": 1020484, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94c933a9303bcc5b6445fc9e310bcf57?s=128&d=identicon&r=PG", "display_name": "lcs", "link": "https://stackoverflow.com/users/1020484/lcs"}, "edited": false, "score": 1, "creation_date": 1467221043, "post_id": 38106305, "comment_id": 63646163, "body": "Are the values unsigned or signed?"}, {"owner": {"reputation": 325, "user_id": 3393800, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/nm7D0.jpg?s=128&g=1", "display_name": "Baffo rasta", "link": "https://stackoverflow.com/users/3393800/baffo-rasta"}, "edited": false, "score": 0, "creation_date": 1467221152, "post_id": 38106305, "comment_id": 63646225, "body": "You could simply read them as integer like this: std::cin &gt;&gt; std::hex &gt;&gt; hex1 &gt;&gt; hex2 in order to read them as hexadecimal integers and then compare them normally."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1467221154, "post_id": 38106305, "comment_id": 63646226, "body": "If the strings only contain [0-9], [a-f] or [A-F] make them lower-case (or upper-case) and compare as you do (if they have the same length)."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 3, "creation_date": 1467221211, "post_id": 38106305, "comment_id": 63646263, "body": "Are they of the same length? Then a string compare will do. Otherwise the longest will be larger, unless it contains lots of initial 0&#39;s."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1467221232, "post_id": 38106305, "comment_id": 63646277, "body": "You didn&#39;t say how to get the value.  If they are a direct representation of the underlying bits of unsigned integers, then pad the shorter one on the left with zeroes. (Or if you know they have been left stripped of zeroes, just assume the longer one is bigger)."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "reply_to_user": {"reputation": 325, "user_id": 3393800, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/nm7D0.jpg?s=128&g=1", "display_name": "Baffo rasta", "link": "https://stackoverflow.com/users/3393800/baffo-rasta"}, "edited": false, "score": 0, "creation_date": 1467221345, "post_id": 38106305, "comment_id": 63646342, "body": "@baffo rasta - I would expect integer overflow with that attempt."}, {"owner": {"reputation": 325, "user_id": 3393800, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/nm7D0.jpg?s=128&g=1", "display_name": "Baffo rasta", "link": "https://stackoverflow.com/users/3393800/baffo-rasta"}, "reply_to_user": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 1, "creation_date": 1467221492, "post_id": 38106305, "comment_id": 63646428, "body": "@KennyOstrom He could even try with strtol for converting the base and then compare, it would take less than iterating through both the strings to compare them."}, {"owner": {"reputation": 19, "user_id": 6529669, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153779538592712/picture?type=large", "display_name": "James Lovejoy", "link": "https://stackoverflow.com/users/6529669/james-lovejoy"}, "edited": false, "score": 0, "creation_date": 1467298063, "post_id": 38106305, "comment_id": 63684213, "body": "These numbers are large, probably 256 or 512 bits, unsigned."}], "answers": [{"comments": [{"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1467221404, "post_id": 38106400, "comment_id": 63646377, "body": "you failed to account for two immediate problems already mentioned in comments"}, {"owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 1, "creation_date": 1467221418, "post_id": 38106400, "comment_id": 63646389, "body": "The longer one may no necessarily be greater if it has a whole bunch of leading zeros"}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 0, "last_activity_date": 1467221291, "creation_date": 1467221291, "answer_id": 38106400, "question_id": 38106305, "link": "https://stackoverflow.com/questions/38106305/comparing-two-c-hex-strings/38106400#38106400", "title": "Comparing two C++ hex strings", "body": "<p>Start by trimming leading zeroes.</p>\n\n<p>If they are not equal length, then the longer one is greater.</p>\n\n<p>If they are equal length, then loop through them from the beginning and compare each digit. Whichever string first has a larger digit in the same location as the other is greater.\nIf you get to the end and all digits are equal, then the values are equal. </p>\n"}, {"comments": [{"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1467225990, "post_id": 38107549, "comment_id": 63649171, "body": "Comparison on size may be false, in case of leading 0s."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1467235584, "post_id": 38107549, "comment_id": 63654140, "body": "This code assumes that <code>&#39;9&#39;</code> is less than <code>&#39;a&#39;</code>, which is not required by the language definition. It also assumes that the characters <code>&#39;a&#39;</code> through <code>&#39;f&#39;</code> are encoded as ascending values, which is also not required by the language definition. Those assumptions are valid if the characters are encoded in ASCII, but such an assumption must be stated in the answer."}, {"owner": {"reputation": 1795, "user_id": 6099096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/623gR.jpg?s=128&g=1", "display_name": "Inline", "link": "https://stackoverflow.com/users/6099096/inline"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1467261947, "post_id": 38107549, "comment_id": 63661454, "body": "@PeteBecker enhanced."}], "tags": [], "owner": {"reputation": 1795, "user_id": 6099096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/623gR.jpg?s=128&g=1", "display_name": "Inline", "link": "https://stackoverflow.com/users/6099096/inline"}, "is_accepted": false, "score": 0, "last_activity_date": 1467261935, "last_edit_date": 1467261935, "creation_date": 1467225188, "answer_id": 38107549, "question_id": 38106305, "link": "https://stackoverflow.com/questions/38106305/comparing-two-c-hex-strings/38107549#38107549", "title": "Comparing two C++ hex strings", "body": "<p>If you are using <code>std::string</code>. Works for ASCII encoding.</p>\n\n<pre><code>bool hex_greater(std::string &amp;first, std::string &amp;second)\n{\n    /* Comprasions based on size */\n    int firstSize = first.size(); \n    int secondSize = second.size();\n    if(firstSize &gt; secondSize)\n        return true;\n    else if(firstSize &lt; secondSize)\n        return false;\n\n    /* Convert to lower case, for case insentitive comprasion */\n    std::transform(first.begin(), first.end(), first.begin(), ::tolower);\n    std::transform(second.begin(), second.end(), second.begin(), ::tolower);\n\n    /* Call the std::string operator&gt;(...) which compare strings lexicographically */\n    if(first &gt; second)\n        return true;\n\n    /* In other cases first hex string is not greater */\n    return false;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": 2, "last_activity_date": 1467225323, "creation_date": 1467225323, "answer_id": 38107597, "question_id": 38106305, "link": "https://stackoverflow.com/questions/38106305/comparing-two-c-hex-strings/38107597#38107597", "title": "Comparing two C++ hex strings", "body": "<p>You can do string comparison on these numbers but there are several potential problems which would have to be accounted for:</p>\n\n<ol>\n<li>A sign character (\"+0X2A\" will be ordered before \"0X0D\")</li>\n<li>The existence of a \"0X\" (\"0X2A\" will be ordered before \"0D\")</li>\n<li>The capitalization of the \"0X\" (\"0X2A\" will be ordered before \"0x0D\")</li>\n<li>The capitalization of hex digits (\"0X0D\" will be ordered before \"0X0a\")</li>\n<li>The zero padding of numbers (\"0X002A\" will be ordered before \"0X0D\")</li>\n</ol>\n\n<p>Consideration for all these conditions and their potential combinations will be a real headache. C++11 introduced the type <a href=\"http://en.cppreference.com/w/cpp/language/types#Integer_types\" rel=\"nofollow\"><code>unsigned long long int</code></a> which is at least a 64-bit unsigned integer. That gives you a whopping 16 hex characters worth of input, if your input is longer than that this won't work and you will have to parse the string.</p>\n\n<pre><code>if(stoll(hex1, 0, 16) &gt; stoll(hex2, 0, 16)\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 6529669, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153779538592712/picture?type=large", "display_name": "James Lovejoy", "link": "https://stackoverflow.com/users/6529669/james-lovejoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1571, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1467261935, "creation_date": 1467220940, "question_id": 38106305, "link": "https://stackoverflow.com/questions/38106305/comparing-two-c-hex-strings", "title": "Comparing two C++ hex strings", "body": "<p>If I have two std::strings which contain a hex value of arbitrary length, how can I compare to the two to see which one is larger in terms of value? Ideally I would like to avoid having to use a big number library.</p>\n\n<p>I would like to do something like:</p>\n\n<pre><code>if(hex1 &gt; hex2)\n{\n    //Do something\n}\n</code></pre>\n"}, {"tags": ["c++", "function", "namespaces"], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 6528941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f5820456804c8d6d55eefd190e226f3?s=128&d=identicon&r=PG&f=1", "display_name": "cottog", "link": "https://stackoverflow.com/users/6528941/cottog"}, "edited": false, "score": 0, "creation_date": 1467223319, "post_id": 38106339, "comment_id": 63647548, "body": "Awesome, thanks for the quick response. I figured that was it, but I got distracted last night and didn&#39;t get an opportunity to check. So I figured I&#39;d ask on here while on my lunch break at work."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 3, "last_activity_date": 1467221066, "creation_date": 1467221066, "answer_id": 38106339, "question_id": 38106285, "link": "https://stackoverflow.com/questions/38106285/anonymous-namespaces-functions-and-header-files/38106339#38106339", "title": "(Anonymous) Namespaces, Functions, and Header Files", "body": "<p>Move the unnamed namespace out of the other namespace:</p>\n\n<pre><code>namespace{\n    RNG rando = new RNG();\n}\n\nvoid Foo::SomeFunc(){\n    //implementation\n}\n\nvoid Foo::SomeOtherFunc(int){\n    //implementation\n}\n</code></pre>\n\n<p>It can't be accessed outside the translation unit anyways.</p>\n"}, {"tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 0, "last_activity_date": 1467221096, "creation_date": 1467221096, "answer_id": 38106354, "question_id": 38106285, "link": "https://stackoverflow.com/questions/38106285/anonymous-namespaces-functions-and-header-files/38106354#38106354", "title": "(Anonymous) Namespaces, Functions, and Header Files", "body": "<p>The anonymous namespace is a red herring. You can ignore it, it's <em>literally</em> an implementation detail.</p>\n\n<p>Yes, you can overload a function from the header in the .cpp file. However, if you would try to use the undefined half of the pair, you'd get a linker error.</p>\n"}, {"tags": [], "owner": {"reputation": 1327, "user_id": 2990896, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/hSkaq.jpg?s=128&g=1", "display_name": "cplusplusrat", "link": "https://stackoverflow.com/users/2990896/cplusplusrat"}, "is_accepted": false, "score": 2, "last_activity_date": 1467221172, "creation_date": 1467221172, "answer_id": 38106366, "question_id": 38106285, "link": "https://stackoverflow.com/questions/38106285/anonymous-namespaces-functions-and-header-files/38106366#38106366", "title": "(Anonymous) Namespaces, Functions, and Header Files", "body": "<p>The usual convention is to as far as I know is to declare the anonymous namespace at the start of the .cpp files. In your case your cpp file should look like this.</p>\n\n<pre><code>namespace{\n   RNG rando = new RNG();\n}\n\nvoid Foo::SomeFunc(){\n    //implementation\n}\n\nvoid Foo::SomeOtherFunc(int){\n    //implementation\n}\n</code></pre>\n\n<p>This way the functions should have access to rando.</p>\n"}], "owner": {"reputation": 113, "user_id": 6528941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f5820456804c8d6d55eefd190e226f3?s=128&d=identicon&r=PG&f=1", "display_name": "cottog", "link": "https://stackoverflow.com/users/6528941/cottog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 611, "favorite_count": 0, "accepted_answer_id": 38106339, "answer_count": 3, "score": 1, "last_activity_date": 1467221172, "creation_date": 1467220863, "question_id": 38106285, "link": "https://stackoverflow.com/questions/38106285/anonymous-namespaces-functions-and-header-files", "title": "(Anonymous) Namespaces, Functions, and Header Files", "body": "<p>Not sure if this question has been asked before. I searched around and couldn't find an exact answer for my scenario, but I may have missed it.</p>\n\n<p>The issue: I have a namespace in a header file, and some function prototypes inside that namespace in the header:</p>\n\n<pre><code>namespace Foo{\n    void SomeFunc();\n    void SomeOtherFunc(int);\n}\n</code></pre>\n\n<p>In the .cpp file, I want to define the functions in the namespace while also providing some protection to an random number generator they all rely on with an anonymous namespace:</p>\n\n<pre><code>namespace Foo{\n\n    namespace{\n        RNG rando = new RNG();\n    }\n\n    void SomeFunc(){\n        //implementation\n    }\n\n    void SomeOtherFunc(){\n        //implementation\n    }\n}\n</code></pre>\n\n<p>The issue I am having is that there is no guarantee that the prototypes in the header file match up to the functions I am defining in the cpp file. Everything in the namespace{} code block can just be something new added to the namespace.</p>\n\n<p>In the above code examples, SomeOtherFunc() is implemented without an argument of type int, but its declaration says it takes some argument. In actuality, it seems I overloaded the SomeOtherFunc() signature.</p>\n\n<p>I could use the following in the cpp file:</p>\n\n<pre><code>namespace Foo{\n\n    namespace{\n        RNG rando = new RNG();\n    }\n\n}\nvoid Foo::SomeFunc(){\n    //implementation\n}\n\nvoid Foo::SomeOtherFunc(int){\n    //implementation\n}\n</code></pre>\n\n<p>The compiler seems to enforce the relationship between the functions' declaration and implementation, which I like. But then the functions seemingly don't have access to the data inside the anonymous namespace.</p>\n\n<p>Am I missing something here? Is there something I could do to resolve the issues I feel are present in this implementation? I am not very well-versed in using (anonymous) namespaces, and so I apologize if this seems basic.</p>\n"}, {"tags": ["java", "android", "c++", "timer"], "answers": [{"comments": [{"owner": {"reputation": 347, "user_id": 5831714, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f8c4e4f5951302ee9c8aa1d4d672b8ed?s=128&d=identicon&r=PG&f=1", "display_name": "Sumeet Batra", "link": "https://stackoverflow.com/users/5831714/sumeet-batra"}, "edited": false, "score": 0, "creation_date": 1467312254, "post_id": 38113363, "comment_id": 63693076, "body": "Thanks this is what I was looking for!"}], "tags": [], "owner": {"reputation": 76, "user_id": 6525156, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CWMaLfAtPpM/AAAAAAAAAAI/AAAAAAAAlmo/GRjaBALLLac/photo.jpg?sz=128", "display_name": "Danny Lacks", "link": "https://stackoverflow.com/users/6525156/danny-lacks"}, "is_accepted": true, "score": 1, "last_activity_date": 1467256328, "creation_date": 1467256328, "answer_id": 38113363, "question_id": 38105951, "link": "https://stackoverflow.com/questions/38105951/create-custom-java-timer-from-c-timer/38113363#38113363", "title": "Create custom java timer from c++ timer", "body": "<p>I believe this is the answer you are looking for.  The example snippet you provided only runs the timer every minute (60 * 1000), this example runs every 100 ms and may provide better fidelity if that is what you are looking for. It will not be as fast as the C++ example which runs an infinite loop as fast as it can, but you can shorten <code>POLLING_PERIOD_MS</code> to compensate.</p>\n\n<pre><code>import java.util.Timer;\nimport java.util.TimerTask;\n\nclass TimerExample {\n    private static final int POLLING_PERIOD_MS = 100;\n    private static final int RESET_PERIOD_MS = 5133;\n\n    private static long start = System.currentTimeMillis();\n\n    public static void reset() {\n        start = System.currentTimeMillis();\n    }\n\n    public static long ms_ellapsed() {\n        return System.currentTimeMillis() - start;\n    }\n\n    public static void main(String[] args) {\n        Timer timer = new Timer();\n\n        timer.scheduleAtFixedRate(new TimerTask() {\n            @Override\n            public void run() {\n                if (TimerExample.ms_ellapsed() &gt; RESET_PERIOD_MS) {\n                    TimerExample.reset();\n                }\n            }\n        }, 0, POLLING_PERIOD_MS);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 347, "user_id": 5831714, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f8c4e4f5951302ee9c8aa1d4d672b8ed?s=128&d=identicon&r=PG&f=1", "display_name": "Sumeet Batra", "link": "https://stackoverflow.com/users/5831714/sumeet-batra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 365, "favorite_count": 0, "accepted_answer_id": 38113363, "answer_count": 1, "score": 0, "last_activity_date": 1467256328, "creation_date": 1467219788, "question_id": 38105951, "link": "https://stackoverflow.com/questions/38105951/create-custom-java-timer-from-c-timer", "title": "Create custom java timer from c++ timer", "body": "<p>I have the following implementation of a c++ custom timer, courtesy of a user from <a href=\"http://www.cplusplus.com/\" rel=\"nofollow\">http://www.cplusplus.com/</a> who's post I cannot find right now.</p>\n\n<pre><code>struct timer\n{\n    typedef std::chrono::steady_clock clock;\n    typedef std::chrono::milliseconds ms;\n\n    void reset() { start = clock::now(); }\n\n    unsigned long long ms_ellapsed() const\n    {\n        return std::chrono::duration_cast&lt;ms&gt;(clock::now() - start).count();\n    }\n\nprivate: clock::time_point start = clock::now();\n};\n</code></pre>\n\n<p>I use it in a while loop to check if x ms have ellapsed, and if so, reset to 0 ms. Here is an example:</p>\n\n<pre><code>  timer t;\n  while(true) {\n     if (t.ms_ellapsed() &gt; 5133) {\n            t.reset();\n    }\n  }\n</code></pre>\n\n<p>I want to create a similar implementation in java for an android project, but am unfamiliar with java timers. I found this code snippet of a java timer implementation: </p>\n\n<pre><code>Timer timer = new Timer();\n\ntimer.schedule( new TimerTask() {\n     public void run() {\n        // do your work \n     }\n }, 0, 60*1000);\n</code></pre>\n\n<p>Is this java implementation what I should be using to emulate the c++ timer? If so, what do I need to add to get the same functionality as the c++ timer. If not, what is a better solution?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "session", "testing", "frameworks", "catch-unit-test"], "comments": [{"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 2, "creation_date": 1467219640, "post_id": 38105783, "comment_id": 63645295, "body": "obligatory sanity check: you <i>are</i> defining <code>CATCH_CONFIG_RUNNER</code> before you <code>#include</code> catch.hpp, right?"}, {"owner": {"reputation": 10444, "user_id": 235472, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/2RJ8I.png?s=128&g=1", "display_name": "Pietro", "link": "https://stackoverflow.com/users/235472/pietro"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1467220462, "post_id": 38105783, "comment_id": 63645811, "body": "@jaggedSpire - Yes, just once, in the file where I define main(), which is not the one where I write the tests."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1467220688, "post_id": 38105783, "comment_id": 63645955, "body": "and the compilation error is in the file where you define main(), correct?"}, {"owner": {"reputation": 10444, "user_id": 235472, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/2RJ8I.png?s=128&g=1", "display_name": "Pietro", "link": "https://stackoverflow.com/users/235472/pietro"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1467221301, "post_id": 38105783, "comment_id": 63646321, "body": "No, it is in the file where I call Catch::Session()."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1467221587, "post_id": 38105783, "comment_id": 63646483, "body": "It doesn&#39;t look like you&#39;re supposed to call <code>Catch::Session()</code> outside of the file where you&#39;re defining your own main, or even construct it. The documentation explicitly says there should only ever be once instance of it: &quot;<code>Catch::Session session; &#47;&#47; There must be exactly once instance</code>&quot; Presumably, preventing it from being defined in non-main files is meant to prevent violation of that requirement."}, {"owner": {"reputation": 10444, "user_id": 235472, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/2RJ8I.png?s=128&g=1", "display_name": "Pietro", "link": "https://stackoverflow.com/users/235472/pietro"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1467221996, "post_id": 38105783, "comment_id": 63646721, "body": "You are right. I called it just once, but in a different file. Now it works. If you write it as an answer, I will accept it. Thank you!"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1467222400, "post_id": 38105783, "comment_id": 63646963, "body": "Done. Would you mind editing your question to include the information about where you were attempting to access <code>Catch::Session</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 501, "user_id": 1655153, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/5LVdR.jpg?s=128&g=1", "display_name": "Andrey Suvorov", "link": "https://stackoverflow.com/users/1655153/andrey-suvorov"}, "edited": false, "score": 0, "creation_date": 1515537538, "post_id": 38106708, "comment_id": 83335505, "body": "and what if I want to run tests multiple times per one application run, with different argc, how can ones do that, without using only one instance, that seems to be keeping arguments.."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "reply_to_user": {"reputation": 501, "user_id": 1655153, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/5LVdR.jpg?s=128&g=1", "display_name": "Andrey Suvorov", "link": "https://stackoverflow.com/users/1655153/andrey-suvorov"}, "edited": false, "score": 0, "creation_date": 1515539357, "post_id": 38106708, "comment_id": 83336114, "body": "sounds like new question material to me."}], "tags": [], "owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "is_accepted": true, "score": 4, "last_activity_date": 1467222356, "creation_date": 1467222356, "answer_id": 38106708, "question_id": 38105783, "link": "https://stackoverflow.com/questions/38105783/catch-test-framework-issue-cannot-use-catchsession/38106708#38106708", "title": "Catch test framework issue: cannot use Catch::Session()", "body": "<p>You're attempting to call the constructor of <code>Catch::Session</code> from a file where you're not defining your own <code>main</code> to execute. According to the <a href=\"https://github.com/philsquared/Catch/blob/master/docs/own-main.md\" rel=\"nofollow\">documentation on defining your own main</a>, there is supposed to be only one instance of <code>Catch::Session</code>:</p>\n\n<pre><code>Catch::Session session; // There must be exactly once instance\n</code></pre>\n\n<p>It's likely Catch is preventing construction of <code>Catch::Session</code> in translation units where it can't be used in a custom <code>main</code> definition (since that's where it's supposed to be used), to prevent exactly the mistake you've made from compiling.</p>\n"}, {"tags": [], "owner": {"reputation": 361, "user_id": 8841322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tfP3b.jpg?s=128&g=1", "display_name": "Jagger Yu", "link": "https://stackoverflow.com/users/8841322/jagger-yu"}, "is_accepted": false, "score": 1, "last_activity_date": 1600690377, "creation_date": 1600690377, "answer_id": 63992067, "question_id": 38105783, "link": "https://stackoverflow.com/questions/38105783/catch-test-framework-issue-cannot-use-catchsession/63992067#63992067", "title": "Catch test framework issue: cannot use Catch::Session()", "body": "<p>Reference to <a href=\"https://github.com/catchorg/Catch2/blob/master/docs/own-main.md\" rel=\"nofollow noreferrer\">https://github.com/catchorg/Catch2/blob/master/docs/own-main.md</a></p>\n<p>You can only provide main in the same file you defined CATCH_CONFIG_RUNNER.</p>\n<pre><code>#define CATCH_CONFIG_RUNNER\n#include &quot;catch.hpp&quot;\n\nint main( int argc, char* argv[] ) {\n  // global setup...\n\n  int result = Catch::Session().run( argc, argv );\n\n  // global clean-up...\n\n  return result;\n}\n</code></pre>\n"}], "owner": {"reputation": 10444, "user_id": 235472, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/2RJ8I.png?s=128&g=1", "display_name": "Pietro", "link": "https://stackoverflow.com/users/235472/pietro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1537, "favorite_count": 0, "accepted_answer_id": 38106708, "answer_count": 2, "score": 5, "last_activity_date": 1600690377, "creation_date": 1467219266, "last_edit_date": 1467235941, "question_id": 38105783, "link": "https://stackoverflow.com/questions/38105783/catch-test-framework-issue-cannot-use-catchsession", "title": "Catch test framework issue: cannot use Catch::Session()", "body": "<p>I get this error in a C++ file where I am writing some tests:</p>\n\n<pre><code>error: no member named 'Session' in namespace 'Catch'\n        testResult = Catch::Session().run(test_argc, test_argv);\n                     ~~~~~~~^\n</code></pre>\n\n<p>Looking at the catch.hpp single header file, I noticed that the code that should implement the Session() member function is greyed out, probably because of an #ifdef somewhere, which I cannot find.</p>\n\n<p>Is there any macro to set to use the Session class?</p>\n\n<p>Catch versions: 1.5.3 and 1.5.6.</p>\n\n<p>Reference: <a href=\"https://github.com/philsquared/Catch/blob/master/docs/own-main.md\" rel=\"noreferrer\">https://github.com/philsquared/Catch/blob/master/docs/own-main.md</a></p>\n"}, {"tags": ["c++", "multithreading", "reset"], "comments": [{"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "edited": false, "score": 3, "creation_date": 1467218883, "post_id": 38105634, "comment_id": 63644829, "body": "nit-picking: you might want to put a mutex around whatever you want to reset in another thread."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1467218970, "post_id": 38105634, "comment_id": 63644888, "body": "You don&#39;t need a <code>static</code> thread function, just use a normal member function."}, {"owner": {"reputation": 871, "user_id": 4304844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vSjQh.jpg?s=128&g=1", "display_name": "tsandy", "link": "https://stackoverflow.com/users/4304844/tsandy"}, "edited": false, "score": 1, "creation_date": 1467219214, "post_id": 38105634, "comment_id": 63645050, "body": "If this Points object is ever deleted, the reset thread will still try to access it causing an access violation. To fix this, you need to use the destructor to communicate to the reset thread that it&#39;s time to stop looping. Wait for the thread to close before returning from the destructor."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 2, "creation_date": 1467219275, "post_id": 38105634, "comment_id": 63645078, "body": "Never use a detached thread, unless you know what you are doing. Here the thread will operate on a dangling pointer as soon as the <code>Points</code> are destructed."}, {"owner": {"reputation": 13595, "user_id": 668501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f15b157200c05100d6baeb0ede510f0?s=128&d=identicon&r=PG", "display_name": "Soren", "link": "https://stackoverflow.com/users/668501/soren"}, "reply_to_user": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "edited": false, "score": 0, "creation_date": 1467219478, "post_id": 38105634, "comment_id": 63645199, "body": "@lorro -- that is not \tnit-picking at all, but the basis of everything that is wrong with this implementation -- it is not threadsafe."}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "edited": false, "score": 0, "creation_date": 1467220045, "post_id": 38105634, "comment_id": 63645546, "body": "Are you sure you want values that reset after 5 seconds? You got a whole bunch of problems. Usually you can only make sure that they will reset after AT LEAST 5 seconds. What happens to a user thats in the middle of using the values?!"}, {"owner": {"reputation": 750, "user_id": 1212565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0cc2208baa8138cdb6fc898bd298500?s=128&d=identicon&r=PG", "display_name": "David Thomas", "link": "https://stackoverflow.com/users/1212565/david-thomas"}, "edited": false, "score": 0, "creation_date": 1467220415, "post_id": 38105634, "comment_id": 63645776, "body": "A thread is not required for this.  Can you add code to the getter for Points that performs the reset (on the caller&#39;s thread) after the time has elapsed?"}, {"owner": {"reputation": 47, "user_id": 4835290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e18b7c5b8ca69e3e2ef5a9d9adb9e34b?s=128&d=identicon&r=PG&f=1", "display_name": "Anxious", "link": "https://stackoverflow.com/users/4835290/anxious"}, "edited": false, "score": 0, "creation_date": 1467222234, "post_id": 38105634, "comment_id": 63646857, "body": "@DieterL&#252;cking I have not have this problem (yet) MAYBE because I am only using one instance of Points that last during the entire run, but I agree it is something that may cause trouble in another scenario."}, {"owner": {"reputation": 13595, "user_id": 668501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f15b157200c05100d6baeb0ede510f0?s=128&d=identicon&r=PG", "display_name": "Soren", "link": "https://stackoverflow.com/users/668501/soren"}, "edited": false, "score": 3, "creation_date": 1467223271, "post_id": 38105634, "comment_id": 63647514, "body": "@Anxious -- Thread-safety problem are trolls that stick their head up when you least want them to -- it is easy (relatively) to run entire development cycles without ever seeing any only to find it all crash-and-burn once used in production.  Reason being that your development system is lightly used compared to something in production, and thread-safety issues are probabilistic in nature"}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 1, "creation_date": 1467223503, "post_id": 38105634, "comment_id": 63647655, "body": "At the very least, you probably want to make <code>number</code> a <code>std::atomic&lt;int&gt;</code> instead of <code>int</code>"}], "answers": [{"comments": [{"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1467223308, "post_id": 38105810, "comment_id": 63647544, "body": "Its impossible to tell if the OPs code is thread safe as he doesn&#39;t show the implementation of <code>Point</code> -- as long as <code>reset</code> and all other member functions of <code>Point</code> contain the necessary mutexes or atomic accesses, it might well be."}, {"owner": {"reputation": 13595, "user_id": 668501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f15b157200c05100d6baeb0ede510f0?s=128&d=identicon&r=PG", "display_name": "Soren", "link": "https://stackoverflow.com/users/668501/soren"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1467223381, "post_id": 38105810, "comment_id": 63647583, "body": "@ChrisDodd -- true, but judging from the comments and replies it is not threadsafe"}, {"owner": {"reputation": 47, "user_id": 4835290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e18b7c5b8ca69e3e2ef5a9d9adb9e34b?s=128&d=identicon&r=PG&f=1", "display_name": "Anxious", "link": "https://stackoverflow.com/users/4835290/anxious"}, "edited": false, "score": 0, "creation_date": 1467227306, "post_id": 38105810, "comment_id": 63649969, "body": "It&#39;s not exactly what I need right now but this is a good alternative for another class I have. Does it have any downsides?"}], "tags": [], "owner": {"reputation": 13595, "user_id": 668501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f15b157200c05100d6baeb0ede510f0?s=128&d=identicon&r=PG", "display_name": "Soren", "link": "https://stackoverflow.com/users/668501/soren"}, "is_accepted": false, "score": 5, "last_activity_date": 1467219802, "last_edit_date": 1467219802, "creation_date": 1467219367, "answer_id": 38105810, "question_id": 38105634, "link": "https://stackoverflow.com/questions/38105634/in-c-how-to-reset-variables-in-a-class-after-x-seconds/38105810#38105810", "title": "In C++ how to reset variables in a class after X seconds?", "body": "<p>Your code is not thread safe, and making it thread safe is probably too much to do if the rest of the code is single threaded.  Maybe you could have a simpler pattern that does not require a threaded function, like just checking if the time of 5 sec has elapsed since the creation, something like this;</p>\n\n<pre><code>class Points\n{\npublic:\n    Points() {creationtime = time(0); /* do the rest of init */ }\n    ~Points();\n    void method1() { test_and_reset(); /* do the rest of logic...*/ }\n    void method2() { test_and_reset(); /* do the rest of logic...*/ }\n\n        ...\nprivate:\n    time_t creationtime;\n    void test_and_reset() {\n          time_t now = time(0);\n          if (now &gt; creationtime + 5) { /*reset*/ }\n    }\n};\n</code></pre>\n\n<p>The above simple implementation also mean that you will not have the problem of the thread accessing invalid memory once the object is deleted, and you will not have to figure out how to kill the tread.</p>\n"}, {"comments": [{"owner": {"reputation": 15008, "user_id": 16582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=128&d=identicon&r=PG", "display_name": "ravenspoint", "link": "https://stackoverflow.com/users/16582/ravenspoint"}, "edited": false, "score": 0, "creation_date": 1467230310, "post_id": 38107081, "comment_id": 63651523, "body": "Yes, event driven is the way to go."}], "tags": [], "owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "is_accepted": false, "score": 5, "last_activity_date": 1467223935, "last_edit_date": 1467223935, "creation_date": 1467223609, "answer_id": 38107081, "question_id": 38105634, "link": "https://stackoverflow.com/questions/38105634/in-c-how-to-reset-variables-in-a-class-after-x-seconds/38107081#38107081", "title": "In C++ how to reset variables in a class after X seconds?", "body": "<p>Do it lazily. No need for threads here. Add getter (private or public), and only access the variable through  the  getter (and corresponding setter, probably).  </p>\n\n<p>In the getter, check if reset time is active (simple boolean flag to minimize overhead) and then check if enough time has passed and then reset the value. Finally return the value as in a simple getter.</p>\n\n<hr>\n\n<p>Or, if your application has event loop and event driven architecture (probably not, just adding this here for completeness), add timer event to reset the value. Still no need for threads to complicate matrers.</p>\n"}], "owner": {"reputation": 47, "user_id": 4835290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e18b7c5b8ca69e3e2ef5a9d9adb9e34b?s=128&d=identicon&r=PG&f=1", "display_name": "Anxious", "link": "https://stackoverflow.com/users/4835290/anxious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 437, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1467223935, "creation_date": 1467218812, "last_edit_date": 1467219043, "question_id": 38105634, "link": "https://stackoverflow.com/questions/38105634/in-c-how-to-reset-variables-in-a-class-after-x-seconds", "title": "In C++ how to reset variables in a class after X seconds?", "body": "<p>I need to reset some values in a class after  X seconds pass. I am using something like this, but I don't know what problems it might have:</p>\n\n<pre><code>class Points\n{\n    public:\n        Points();\n        ~Points();\n        void reset();\n        ...\n    private:\n        int number;\n        static void resetAfter5seconds(Points* points);\n};\n</code></pre>\n\n<p>Inside the contructor I initialize a detached thread:</p>\n\n<pre><code>Points::Points(){\n    thread start(resetAfter5seconds, this);\n    start.detach();\n}\n\nvoid Points::resetAfter5seconds(Points* points){\n\n   while(true){\n     std::this_thread::sleep_for( (std::chrono::seconds(5)));\n     points-&gt;reset();\n   }\n\n}\n</code></pre>\n\n<p>This works but I dont know if it is the right approach. Does it have any memory problems?, what are the alternatives?</p>\n"}, {"tags": ["python", "c++", "cryptoapi", "pyopenssl"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1467218094, "post_id": 38105117, "comment_id": 63644386, "body": "<i>Never</i> use that private key for anything <i>ever</i> again, now that you&#39;ve published it on the internet."}, {"owner": {"reputation": 77, "user_id": 1557201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6be2ce61592bb4342a77f283bb68d78e?s=128&d=identicon&r=PG", "display_name": "xpp_T", "link": "https://stackoverflow.com/users/1557201/xpp-t"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1467218867, "post_id": 38105117, "comment_id": 63644812, "body": "@JesperJuhl I have posted it here only to let anyone reproduce the same behaviour with same data. This key was generated just for this post."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1467219124, "post_id": 38105117, "comment_id": 63644992, "body": "That&#39;s fine. All I&#39;m saying is that now that you have done so, that key should <i>never</i> be used again for <i>anything</i>."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 2, "creation_date": 1467220335, "post_id": 38105117, "comment_id": 63645730, "body": "@xpp_T - I believe you need to reverse the bytes in the representation of the key. CryptoAPI uses little endian, while OpenSSL uses big endian. Its kind of a well known problem once you learn about it. There&#39;s a few Q&amp;A on Stack Overflow on the subject. Also see <a href=\"http://www.google.com/search?q=openssl+cryptoapi+reverse+bytes\" rel=\"nofollow noreferrer\">Google: openssl cryptoapi reverse bytes</a>."}, {"owner": {"reputation": 77, "user_id": 1557201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6be2ce61592bb4342a77f283bb68d78e?s=128&d=identicon&r=PG", "display_name": "xpp_T", "link": "https://stackoverflow.com/users/1557201/xpp-t"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1467220913, "post_id": 38105117, "comment_id": 63646095, "body": "@jww - I have tried this by adding <code>key_buffer.resize(key_buffer_size);   std::reverse(key_buffer.begin(), key_buffer.end());</code> before CryptDecodeObjectEx call, but it started to return <code>ASN1 bad tag value met. 0x8009310b</code> error. Anyway, I will think in that direction, thanks"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1467223430, "post_id": 38105117, "comment_id": 63647611, "body": "@xpp_T - I believe you need to do it for each big integer, and not the whole key data structure."}], "owner": {"reputation": 77, "user_id": 1557201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6be2ce61592bb4342a77f283bb68d78e?s=128&d=identicon&r=PG", "display_name": "xpp_T", "link": "https://stackoverflow.com/users/1557201/xpp-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 681, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1467220256, "creation_date": 1467217096, "last_edit_date": 1495539855, "question_id": 38105117, "link": "https://stackoverflow.com/questions/38105117/verify-rsa-signature-with-cryptoapi", "title": "Verify rsa signature with CryptoApi", "body": "<p>I'm trying to calculate message rsa signature in python 2 code using <code>rsa</code> or <code>pyopenssl</code> package and verify it with microsoft CryptoApi. Unfortunately, <code>CryptVerifySignature</code> is always reporting error <code>0x80090006: Invalid signature</code>.\nMy python code:</p>\n\n<pre><code>import rsa\nfrom OpenSSL import crypto\n\nprivate_key = \"-----BEGIN RSA PRIVATE KEY-----\\nMIICWwIBAAKBgQDFloLNqx8YZHc8D5Pk6TniJo5nwdvObNilEih2VZtTPCHooa/A\\nUhz0mqh/lOKkskDNa5RCz4iTWy7wug2v+1GGlFp9jEtYq6foVu8N9DChvc8OIVV1\\n4PgyFCCbCJOi5ccVUh5KBCyO8FtxHiS6a8wE3glSwsUGfzpMdrfKCYENRwIDAQAB\\nAoGAJOcHZwIevJ+G5WDDbm1gsiwhTJ+YPeV2UN4jUHaMm+8PJjOMb47meYipD6ru\\n6XOhRrxg5Fl+WIcfLTaSd9uoTfYIJArTPF6R2EAkcPGeil3mMSDMwqTz5eStOI/q\\nRkMryHN5lCOWkm3dWXNmT/75rnqJ4dFGE1iw5dL4OJbovQECQQDyabjCqIjsTHZW\\nIohqQaZAbO+wLvP4IgeUvJ31CR5Xms61FUUOe5WEs6GnSfZlsdzun+58DBEsjo7J\\ncqbZxTD5AkEA0KmdPO9LMSweTSqIbH72NcIuW8cQGI2oJKNLG4Ncc7GN6ElyHJ7H\\nIbRfrb2UupsLvLTDFLIrOdGWG74JGkoAPwJARGJ+tKtGtSJ835+uTAtpExOoKlOU\\nj5NKADOVe+KupJgPaBYv/P3wGBd0qvS6hcW/RbHoXSYqUh+FOF8Xoqd2QQJAJeuN\\nHbPHEGqaHx/ppv3ztJVTY25rqGql8fKTBa77sDLGPT6LtFPOkHt9H8/iJX9jxKl9\\nAlfWry09gFEqylJEdQJAHEA0/fDR+yHxxx4w9QnfbPtn0RNHQbBzKx0K37hMu/tE\\n0wxp8BFWEs5YAWWNw82ft5yOg81MH1n8iCIHzWTKrw==\\n-----END RSA PRIVATE KEY-----\\n\"\n\nmessage = \"testmessage\"\nkey = rsa.PrivateKey.load_pkcs1(private_key)\nsignature = rsa.sign(message, key, 'MD5')\n</code></pre>\n\n<p>Signature becomes aa69b87840390e6032e57f4bb... bytes, and the same signature I have via <code>openssl dgst -md5 -sign private.pem -keyform PEM message.txt</code> command</p>\n\n<p>My c++ code (short version):</p>\n\n<pre><code>const char kPublicVerifyKey[] =\n  \"-----BEGIN PUBLIC KEY-----\\n\"\n  \"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDFloLNqx8YZHc8D5Pk6TniJo5n\\n\"\n  \"wdvObNilEih2VZtTPCHooa/AUhz0mqh/lOKkskDNa5RCz4iTWy7wug2v+1GGlFp9\\n\"\n  \"jEtYq6foVu8N9DChvc8OIVV14PgyFCCbCJOi5ccVUh5KBCyO8FtxHiS6a8wE3glS\\n\"\n  \"wsUGfzpMdrfKCYENRwIDAQAB\\n\"\n  \"-----END PUBLIC KEY-----\\n\";\n\n...\n\n  std::vector&lt;unsigned char&gt; key_buffer(public_key.size);\n  DWORD key_buffer_size = key_buffer.size();\n  if (!CryptStringToBinaryA(static_cast&lt;const char*&gt;(public_key.data),\n    public_key.size, CRYPT_STRING_BASE64HEADER,\n    key_buffer.data(), &amp;key_buffer_size, NULL, NULL))\n  {\n    return false;\n  }\n\n  CERT_PUBLIC_KEY_INFO* key_info = nullptr;\n  DWORD key_info_size = 0;\n  if (!CryptDecodeObjectEx(X509_ASN_ENCODING, X509_PUBLIC_KEY_INFO,\n    key_buffer.data(), key_buffer_size,\n    CRYPT_ENCODE_ALLOC_FLAG, NULL, &amp;key_info, &amp;key_info_size))\n  {\n    return false;\n  }\n\n  HCRYPTPROV crypt_context;\n  if (!CryptAcquireContext(&amp;crypt_context, NULL, NULL,\n    PROV_RSA_FULL, CRYPT_VERIFYCONTEXT))\n  {\n    return false;\n  }\n\n  HCRYPTKEY crypt_key;\n  if (!::CryptImportPublicKeyInfo(crypt_context,\n    X509_ASN_ENCODING, key_info, &amp;crypt_key))\n  {\n    return false;\n  }\n\n  HCRYPTHASH hash;\n  if (!::CryptCreateHash(crypt_context, CALG_MD5, 0, 0, &amp;hash)) {\n    return false;\n  }\n\n  if (!::CryptHashData(hash,\n    static_cast&lt;const BYTE*&gt;(message.data), message.size, 0))\n  {\n    return false;\n  }\n\n  BOOL result = ::CryptVerifySignature(hash,\n    static_cast&lt;const BYTE*&gt;(signature.data), signature.size,\n    crypt_key, NULL, 0);\n</code></pre>\n\n<p>Why <code>CryptVerifySignature</code> think that my signature is incorrect? A found related questions (<a href=\"https://stackoverflow.com/questions/20775792/php-openssl-signed-string-not-getting-verified-by-win-cryptoapi\">php openssl signed string not getting verified by Win CryptoAPI</a>) with advice to reverse just signature or signature and public key data bytes, but doing this with signature changes nothing and reversing public key results in error <code>ASN1 bad tag value met. 0x8009310b</code> by <code>CryptDecodeObjectEx</code> function.</p>\n\n<p>Private key was generated with <code>openssl genrsa -out private.pem 1024</code> command and public was generated with <code>openssl rsa -in private.pem -inform PEM -outform PEM -pubout</code></p>\n"}, {"tags": ["c++", "class", "c++11", "inheritance", "multiple-inheritance"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1467216628, "post_id": 38104855, "comment_id": 63643448, "body": "Ca you show how you are creating the <code>ActionButton</code>s?"}, {"owner": {"reputation": 11, "user_id": 6362051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47f03fa6afe254f88bfbb3703e08330c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperChit", "link": "https://stackoverflow.com/users/6362051/superchit"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1467216754, "post_id": 38104855, "comment_id": 63643533, "body": "ActiveButton AB(1, &quot;button&quot;, &quot;square&quot;, 40, 40, &quot;delete&quot;, true);"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6362051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47f03fa6afe254f88bfbb3703e08330c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperChit", "link": "https://stackoverflow.com/users/6362051/superchit"}, "edited": false, "score": 0, "creation_date": 1467216893, "post_id": 38105020, "comment_id": 63643636, "body": "So i should call this way:  ActionButton(int i, string n, string t1, int x, int y, string t2, bool a):     Object(i, n), Button(i, n, t1, x, y), Action(i, n, t2) {active = a;}; ?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 11, "user_id": 6362051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47f03fa6afe254f88bfbb3703e08330c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperChit", "link": "https://stackoverflow.com/users/6362051/superchit"}, "edited": false, "score": 0, "creation_date": 1467216914, "post_id": 38105020, "comment_id": 63643648, "body": "@SuperChit Correct."}, {"owner": {"reputation": 11, "user_id": 6362051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47f03fa6afe254f88bfbb3703e08330c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperChit", "link": "https://stackoverflow.com/users/6362051/superchit"}, "edited": false, "score": 1, "creation_date": 1467217173, "post_id": 38105020, "comment_id": 63643827, "body": "Thank you, now it&#39;s working. But can you please tell why isn&#39;t it called when is called Action or Button? Because Object is there, so i was expecting to follow this logic."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 11, "user_id": 6362051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47f03fa6afe254f88bfbb3703e08330c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperChit", "link": "https://stackoverflow.com/users/6362051/superchit"}, "edited": false, "score": 0, "creation_date": 1467217430, "post_id": 38105020, "comment_id": 63643998, "body": "@SuperChit T.C already told you: <i>Virtual bases are constructed directly by the constructor of the most derived class.</i>"}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 5, "last_activity_date": 1467216811, "creation_date": 1467216811, "answer_id": 38105020, "question_id": 38104855, "link": "https://stackoverflow.com/questions/38104855/inheritance-wrong-call-of-constructors/38105020#38105020", "title": "Inheritance wrong call of constructors", "body": "<p>Virtual bases are constructed directly by the constructor of the most derived class.</p>\n\n<p>Your <code>ActionButton</code> constructor doesn't explicitly call <code>Object</code>'s constructor, so the default constructor is called for you.</p>\n"}], "owner": {"reputation": 11, "user_id": 6362051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47f03fa6afe254f88bfbb3703e08330c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperChit", "link": "https://stackoverflow.com/users/6362051/superchit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "closed_date": 1467217795, "accepted_answer_id": 38105020, "answer_count": 1, "score": 1, "last_activity_date": 1467216878, "creation_date": 1467216343, "last_edit_date": 1467216878, "question_id": 38104855, "link": "https://stackoverflow.com/questions/38104855/inheritance-wrong-call-of-constructors", "closed_reason": "Duplicate", "title": "Inheritance wrong call of constructors", "body": "<p>I'm implemeting this diamond inheritance:</p>\n\n<pre><code>class Object {\nprivate:\n    int id; string name;\npublic:\n    Object(){};\n    Object(int i, string n){name = n; id = i;};\n};\n\n\nclass Button: virtual public Object {\nprivate: \n    string type1;\n    int x_coord, y_coord;\npublic:\n    Button():Object(){};\n    Button(int i, string n, string ty, int x, int y):Object(i, n){\n          type = ty;\n          x_coord = x;\n          y_coord = y;};\n};\n\n\nclass Action: virtual public Object {\nprivate:\n    string type2;\npublic:\n    Action():Object(){};\n    Action(int i, string n, string t):Object(i, n){ type2 = t;};\n};\n\n\nclass ActionButton: public Button, public Action{\nprivate:\n    bool active;\npublic:\n    ActionButton():Buton(), Action(){};\n    ActionButton(int i, string n, string t1, int x, int y, string t2, bool a):\n    Button(i, n, t1, x, y), Action(i, n, t2) {active = a;};\n};\n</code></pre>\n\n<p>Everything works fine about the first three classes, but when I try to create an object of the type ActionButton, instead of calling the constructor with the parameters I wrote, it is calling the default one from the class Object. So every ButtonAction object has name an empty string and id a random value. What's wrong with my code and how can i make it work properly?</p>\n"}, {"tags": ["c++", "templates", "c++11"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1467216617, "post_id": 38104811, "comment_id": 63643437, "body": "See also <code>is_standard_layout</code>, <code>is_trivial</code> and  <code>is_fundamental</code>"}], "answers": [{"tags": [], "owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "is_accepted": true, "score": 3, "last_activity_date": 1467216737, "creation_date": 1467216737, "answer_id": 38104989, "question_id": 38104811, "link": "https://stackoverflow.com/questions/38104811/one-template-specialization-for-pods-one-for-class-hierarchy-and-error-in-other/38104989#38104989", "title": "One template specialization for PODs, one for class hierarchy and error in other cases?", "body": "<p>Try this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct A {};\nstruct B : A\n{\n    int a;\n};\ntemplate &lt;typename T&gt;\ntypename std::enable_if&lt;std::is_base_of&lt;A, T&gt;::value, void&gt;::type foo(const T&amp; derived)\n{\n    std::cout &lt;&lt; \"stuff with derived\";\n}\n\ntemplate &lt;typename T&gt;\ntypename std::enable_if&lt;std::is_fundamental&lt;T&gt;::value, void&gt;::type foo(const T&amp; pod)\n{\n    std::cout &lt;&lt; \"stuff with fundamental\";\n}\n\nint main()\n{\n    foo(7);\n    B instance;\n    foo(instance);\n}\n</code></pre>\n\n<p>The second parameter of enable_if&lt;> is the return type.</p>\n"}], "owner": {"reputation": 107, "user_id": 5720907, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ccc4d89b4bc6aa30dbd96c7c3f36cca6?s=128&d=identicon&r=PG&f=1", "display_name": "Pancake", "link": "https://stackoverflow.com/users/5720907/pancake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 38104989, "answer_count": 1, "score": 0, "last_activity_date": 1467216737, "creation_date": 1467216270, "question_id": 38104811, "link": "https://stackoverflow.com/questions/38104811/one-template-specialization-for-pods-one-for-class-hierarchy-and-error-in-other", "title": "One template specialization for PODs, one for class hierarchy and error in other cases?", "body": "<p>I'm trying to create a template which would work one way for all fundamental types, other way for all classes deriving from A and fail for everything else. Reading about SFINAE, I created such thing:</p>\n\n<pre><code>struct A {};\nstruct B : A\n{\n    int a;\n};\ntemplate &lt;typename T, typename = typename std::enable_if&lt;std::is_base_of&lt;A, T&gt;::value&gt;::type&gt;\nvoid foo(const T&amp; derived)\n{\n    std::cout &lt;&lt; \"stuff with derived\";\n}\n\ntemplate &lt;typename T, typename = typename std::enable_if&lt;std::is_fundamental&lt;T&gt;::value&gt;::type&gt;\nvoid foo(const T&amp; pod)\n{\n    std::cout &lt;&lt; \"stuff with fundamental\";\n}\n\nint main()\n{\n    foo(7);\n    B instance;\n    foo(instance);\n}\n</code></pre>\n\n<p>From what I understood, matching template types for 7 (int) fails for first case and works for second, and derived class works for first. What mistake am I doing?</p>\n"}, {"tags": ["c++", "arrays", "function", "struct", "reference"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1467216323, "post_id": 38104810, "comment_id": 63643220, "body": "Which part of the error message are you having trouble with?"}, {"owner": {"reputation": 11, "user_id": 6216026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a998aff87fba316bc86bf93f1aae3fd5?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6216026/bart"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1467216404, "post_id": 38104810, "comment_id": 63643277, "body": "I don&#39;t know why students cannot be converted."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1467216479, "post_id": 38104810, "comment_id": 63643325, "body": "Nothing specific to students. Try converting an <code>int</code> into an <code>int*</code> and you&#39;ll get the same problem."}, {"owner": {"reputation": 2264, "user_id": 603142, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/XRadr.png?s=128&g=1", "display_name": "F.bernal", "link": "https://stackoverflow.com/users/603142/f-bernal"}, "edited": false, "score": 0, "creation_date": 1467216599, "post_id": 38104810, "comment_id": 63643423, "body": "The error is clear as itself"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1467216652, "post_id": 38104810, "comment_id": 63643467, "body": "Use <code>writeStudents(A);</code> instead of <code>writeStudents(A[n]);</code>"}, {"owner": {"reputation": 11, "user_id": 6216026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a998aff87fba316bc86bf93f1aae3fd5?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6216026/bart"}, "edited": false, "score": 0, "creation_date": 1467216678, "post_id": 38104810, "comment_id": 63643483, "body": "Okay, now I understand, thank you guys!"}], "answers": [{"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 3, "last_activity_date": 1467216419, "creation_date": 1467216419, "answer_id": 38104880, "question_id": 38104810, "link": "https://stackoverflow.com/questions/38104810/c-error-cannot-convert-students-to-students-struct-array-in-functio/38104880#38104880", "title": "C++ error: cannot convert &#39;students&#39; to &#39;students*&#39;... - struct array in function", "body": "<p>When used in an expression, <code>A[n]</code> means \"the element of the array <code>A</code> at index <code>n</code>\". This is wrong for two reasons: First you get a <em>single element</em> in the array, and pass it to a function that expects the array. The second problem is that index <code>n</code> is out of bounds.</p>\n\n<p>Use just plain <code>A</code> and <code>B</code> when calling the functions, like e.g.</p>\n\n<pre><code>writeStudents(A);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "is_accepted": false, "score": 0, "last_activity_date": 1467216468, "creation_date": 1467216468, "answer_id": 38104902, "question_id": 38104810, "link": "https://stackoverflow.com/questions/38104810/c-error-cannot-convert-students-to-students-struct-array-in-functio/38104902#38104902", "title": "C++ error: cannot convert &#39;students&#39; to &#39;students*&#39;... - struct array in function", "body": "<p>How about this (as a first step)?:</p>\n\n<pre><code>writeStudents(A);\nwriteStudents(B);\nprintStudents(A, 2, 0.9);\nprintStudents(B, 3, 1.2);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1809, "user_id": 770302, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/J6ph2.png?s=128&g=1", "display_name": "Daniel A. Thompson", "link": "https://stackoverflow.com/users/770302/daniel-a-thompson"}, "is_accepted": false, "score": 0, "last_activity_date": 1467216470, "creation_date": 1467216470, "answer_id": 38104904, "question_id": 38104810, "link": "https://stackoverflow.com/questions/38104810/c-error-cannot-convert-students-to-students-struct-array-in-functio/38104904#38104904", "title": "C++ error: cannot convert &#39;students&#39; to &#39;students*&#39;... - struct array in function", "body": "<p>Here's your problem:</p>\n\n<pre><code>writeStudents(A[n]);\nwriteStudents(B[n]);\nprintStudents(A[n], 2, 0.9);\nprintStudents(B[n], 3, 1.2);\n</code></pre>\n\n<p>Try this instead:</p>\n\n<pre><code>writeStudents(A);\nwriteStudents(B);\nprintStudents(A, 2, 0.9);\nprintStudents(B, 3, 1.2);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6216026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a998aff87fba316bc86bf93f1aae3fd5?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6216026/bart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2155, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1467217958, "creation_date": 1467216268, "last_edit_date": 1467217958, "question_id": 38104810, "link": "https://stackoverflow.com/questions/38104810/c-error-cannot-convert-students-to-students-struct-array-in-functio", "title": "C++ error: cannot convert &#39;students&#39; to &#39;students*&#39;... - struct array in function", "body": "<p>When I run the code below, I find that it generates an error that I'm unsure how to fix. Could someone help me please?</p>\n\n<h3>Code</h3>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n\nusing namespace std;\n\nconst int n=5;\n\nstruct students\n{\n    string firstname;\n    float rate;\n};\n\nstudents A[n];\nstudents B[n];\n\nvoid writeStudents(students *TAB){\n    for(int i=0; i&lt;n; i++){\n        cout &lt;&lt; \"First name: \";\n        cin &gt;&gt; TAB[i].firstname;\n        cout &lt;&lt; \"Rate: \";\n        cin &gt;&gt; TAB[i].rate;\n    }\n}\n\nvoid printStudents(students *TAB, int rows, float difference){\n    float average=0;\n    for(int i=0; i&lt;n; i++){\n        average = average + TAB[i].rate;\n    }\n    average = average/n;\n    for(int i=n-rows; i&lt;n; i++){\n        if(TAB[i].rate &gt; average+difference){\n           cout &lt;&lt; TAB[i].firstname &lt;&lt; endl;\n        }\n    }\n}\n\nint main()\n{\n    writeStudents(A[n]);\n    writeStudents(B[n]);\n    printStudents(A[n], 2, 0.9);\n    printStudents(B[n], 3, 1.2);\n    return 0;\n}\n</code></pre>\n\n<h3>Console Log</h3>\n\n<pre><code>error: cannot convert 'students' to 'students*' for argument '1' to 'void writeStudents(students*)' (line 54)\nerror: cannot convert 'students' to 'students*' for argument '1' to 'void writeStudents(students*)' (line 55)\nerror: cannot convert 'students' to 'students*' for argument '1' to 'void printStudents(students*)' (line 56)\nerror: cannot convert 'students' to 'students*' for argument '1' to 'void printStudents(students*)' (line 57)\n</code></pre>\n"}, {"tags": ["c++", "c", "xcode", "image-processing", "tesseract"], "comments": [{"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 0, "creation_date": 1467219369, "post_id": 38104795, "comment_id": 63645130, "body": "It&#39;s hard to answer without details, how do you installed tesseract (binary or source?). What is the exact command line? Which is the example you are trying? And the exact error that is throwing? It&#39;s always better to provide an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1467222158, "post_id": 38104795, "comment_id": 63646810, "body": "Post the <i>exact</i> errors. Not your interpretation of them."}, {"owner": {"reputation": 133, "user_id": 4605379, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/be7c802cb14bb1a4fc26448fafa5abc0?s=128&d=identicon&r=PG&f=1", "display_name": "koushik v", "link": "https://stackoverflow.com/users/4605379/koushik-v"}, "edited": false, "score": 0, "creation_date": 1467275873, "post_id": 38104795, "comment_id": 63668177, "body": "I installed tesseract on my system using macports and i tried the simple terminal command &quot;tesseract imagename outputfile&quot; and it worked fine.Now, i need to perform the same from my project.The project is a command line project using c++ language in Xcode. I am trying to implement the example given in the link below   [link]<a href=\"https://github.com/tesseract-ocr/tesseract/wiki/APIExample#compiling-c-api-programs-on-linux\" rel=\"nofollow noreferrer\">github.com/tesseract-ocr/tesseract/wiki/&hellip;</a>"}, {"owner": {"reputation": 133, "user_id": 4605379, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/be7c802cb14bb1a4fc26448fafa5abc0?s=128&d=identicon&r=PG&f=1", "display_name": "koushik v", "link": "https://stackoverflow.com/users/4605379/koushik-v"}, "edited": false, "score": 0, "creation_date": 1467276296, "post_id": 38104795, "comment_id": 63668458, "body": "The error i got is many people said different ways to add the library files to to the project. The simplest one was #include &quot;baseapi.h&quot; but when i include the same, it asks for new file called platform.h.Hence,i downloaded the total project from github and added the platform.h but kept the number of files required kept on increasing. Hence,i wondered similar to opencv,i can add the dylib file which comprises of all files.I found the dylib and added to the project. I referenced the library files using #include &lt;Tesseract\\baseapi.h&gt; but it throws an error stating &quot;tesseract\\baseapi.h&quot; not found"}], "owner": {"reputation": 133, "user_id": 4605379, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/be7c802cb14bb1a4fc26448fafa5abc0?s=128&d=identicon&r=PG&f=1", "display_name": "koushik v", "link": "https://stackoverflow.com/users/4605379/koushik-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 328, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1467216237, "creation_date": 1467216237, "question_id": 38104795, "link": "https://stackoverflow.com/questions/38104795/tesseract-in-xcode-c-project", "title": "Tesseract in Xcode C++ project", "body": "<p>I installed tesseract on my mac and i have the libtesseract.3.dylib and libtesseract.a.I added these files to the C++ command line project and added the header # include or just #include \"baseapi.h\". It is throwing errors in both the cases. The error is file not found in the former and some other library files are missing in the latter.I added all the header files in the xcode but still it is difficult.Can someone please tell how to include tesseract in Xcode and work with it?</p>\n"}, {"tags": ["c++", "c++11", "initializer-list"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1467216265, "post_id": 38104782, "comment_id": 63643183, "body": "<code>auto c = 1;</code> is not illegal.  <code>1</code> has a type the compiler can deduce."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1467216357, "post_id": 38104782, "comment_id": 63643244, "body": "Also related: <a href=\"http://stackoverflow.com/questions/25612262/why-does-auto-x3-deduce-an-initializer-list\" title=\"why does auto x3 deduce an initializer list\">stackoverflow.com/questions/25612262/&hellip;</a>"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 2, "creation_date": 1467216637, "post_id": 38104782, "comment_id": 63643454, "body": "<code>auto c = 1</code> is valid c++. The question you linked deals with c, which is very much a different language."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1467216796, "post_id": 38104782, "comment_id": 63643563, "body": "So you&#39;re aware, C++11 requires that <code>a</code> is an initializer list. C++17 changes that to <code>int</code>, but GCC does that in C++11 regardless."}, {"owner": {"reputation": 530, "user_id": 6356045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a5e2c78aca72930bfd6d8113cbf1a72?s=128&d=identicon&r=PG&f=1", "display_name": "MaciekGrynda", "link": "https://stackoverflow.com/users/6356045/maciekgrynda"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1467218135, "post_id": 38104782, "comment_id": 63644411, "body": "@chris thanks! Can you provide some documentation for change between C++11 and C++17?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1467220740, "post_id": 38104782, "comment_id": 63645989, "body": "@MaciekGrynda, There&#39;s a bunch in Nathan&#39;s link."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1467220995, "post_id": 38104782, "comment_id": 63646142, "body": "@MaciekGrynda - Or try this question from yesterday: <a href=\"http://stackoverflow.com/questions/38060436/what-are-the-new-features-in-c17\">What are the new features in C++17?</a>"}], "owner": {"reputation": 530, "user_id": 6356045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a5e2c78aca72930bfd6d8113cbf1a72?s=128&d=identicon&r=PG&f=1", "display_name": "MaciekGrynda", "link": "https://stackoverflow.com/users/6356045/maciekgrynda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 419, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1467216191, "creation_date": 1467216191, "last_edit_date": 1495540348, "question_id": 38104782, "link": "https://stackoverflow.com/questions/38104782/using-auto-with-initializer-list", "title": "Using auto with initializer list", "body": "<p>I have question regarding interaction between auto and initializer list. Example code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\nauto a{ 1 };\nauto b = { 1 };\nauto c = 1;\n\nstd::cout &lt;&lt; typeid(a).name() &lt;&lt; std::endl;\nstd::cout &lt;&lt; typeid(b).name() &lt;&lt; std::endl;\nstd::cout &lt;&lt; typeid(c).name() &lt;&lt; std::endl;\n\nreturn 0;\n}\n</code></pre>\n\n<p>Gives output:</p>\n\n<pre><code>int\nclass std::initializer_list&lt;int&gt;\nint\n</code></pre>\n\n<p>Which is kind of confusing. I'm posting this question as a <a href=\"https://stackoverflow.com/questions/38099768/comparison-of-two-auto-variables/38100522?noredirect=1#comment63641762_38100522\">followup to this</a>. What should happen? I've did some research and it seems that <code>auto c = 1;</code> is <a href=\"https://stackoverflow.com/questions/23406212/why-does-auto-a-1-compile-in-c\">illegal now</a>, and it seems that it works because compilers allow this as a backwards compatibility patch. Does this apply also to <code>auto a{1}</code>?</p>\n"}, {"tags": ["c++", "c++11", "dst", "localtime"], "comments": [{"owner": {"reputation": 8169, "user_id": 759558, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/kz2la.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/759558/neil"}, "edited": false, "score": 0, "creation_date": 1467215481, "post_id": 38104443, "comment_id": 63642656, "body": "It is probably an environment thing too, what is your OS?"}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1467224651, "post_id": 38104443, "comment_id": 63648389, "body": "Does your environment have <code>&lt;chrono&gt;</code>?"}, {"owner": {"reputation": 31, "user_id": 6529270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f0a0e924133e44cab6ae6b141649747?s=128&d=identicon&r=PG&f=1", "display_name": "Mathias Vantieghem", "link": "https://stackoverflow.com/users/6529270/mathias-vantieghem"}, "edited": false, "score": 0, "creation_date": 1467275395, "post_id": 38104443, "comment_id": 63667909, "body": "The OS I use is Win 7 32 bits. I used &lt;chrono&gt;"}], "answers": [{"comments": [{"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 31, "user_id": 6529270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f0a0e924133e44cab6ae6b141649747?s=128&d=identicon&r=PG&f=1", "display_name": "Mathias Vantieghem", "link": "https://stackoverflow.com/users/6529270/mathias-vantieghem"}, "edited": false, "score": 0, "creation_date": 1467295886, "post_id": 38107687, "comment_id": 63682402, "body": "@MathiasVantieghem:  If you have any troubles or questions, you can chat on gitter (linked off the README at github).  Start a github issue.  Ping me here.  Or email me directly (just search for my email address, it is easy to find)."}], "tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": false, "score": 1, "last_activity_date": 1467230251, "last_edit_date": 1467230251, "creation_date": 1467225627, "answer_id": 38107687, "question_id": 38104443, "link": "https://stackoverflow.com/questions/38104443/c-stdlocaltime-daylight-saving-time-rule-dst-european-vs-american/38107687#38107687", "title": "C++ std::localtime daylight saving time rule (dst) european vs american", "body": "<p>If you have C++11 (or later) available, which includes <code>&lt;chrono&gt;</code>, and if you are willing to work with the <code>&lt;chrono&gt;</code> system.  And if you are willing to use this <a href=\"https://howardhinnant.github.io/date/tz.html\" rel=\"nofollow\">free, open-source timezone library</a>.  Then this is a very simple matter:</p>\n\n<pre><code>#include \"tz.h\"\n#include &lt;iostream&gt;\n\nint\nmain()\n{\n    using namespace date;\n    using namespace std::chrono_literals;\n    auto zt = make_zoned(\"Europe/Paris\", sys_days{2016_y/mar/19} + 18h + 56min);\n    std::cout &lt;&lt; format(\"%m/%d/%y %H:%M %Z\", zt.get_sys_time()) &lt;&lt; '\\n';\n    std::cout &lt;&lt; format(\"%m/%d/%y %H:%M %Z\", zt) &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>03/19/16 18:56 UTC\n03/19/16 19:56 CET\n</code></pre>\n\n<p>In short, you form one <code>zoned_time</code> by pairing a timezone of your choosing\n(\"Europe/Paris\"), with a <code>sys_time</code> (UTC).  Then you can format that <code>zoned_time</code> both by extracting the <code>sys_time</code> back out of it, and by formatting the <code>zoned_time</code> itself, which will use the <code>local_time</code> of the <code>zoned_time</code>.</p>\n\n<p>I attempted to use formatting that was consistent with your comments.  You could of course you any format you want.  You can also include any <code>std::locale</code> your system supports as the first argument in the calls to  <code>format</code> (which <code>%c</code> would take advantage of).</p>\n\n<p>You can also extract individual fields both from the <code>sys_time</code> and from the <code>local_time</code> if you need to, or do other date or time computations.  This is more than just a formatting library.</p>\n\n<p>If you are starting with a <code>time_t</code>, there is a static member function of <code>std::chrono::system_clock</code> to convert a <code>time_t</code> to a <code>system_clock::time_point</code>.  You can then use that <code>time_point</code> in place of <code>sys_days{2016_y/mar/19} + 18h + 56min</code> in this example:</p>\n\n<pre><code>auto zt = make_zoned(\"Europe/Paris\", system_clock::from_time_t(t));\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6529270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f0a0e924133e44cab6ae6b141649747?s=128&d=identicon&r=PG&f=1", "display_name": "Mathias Vantieghem", "link": "https://stackoverflow.com/users/6529270/mathias-vantieghem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1744, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1467230251, "creation_date": 1467215241, "question_id": 38104443, "link": "https://stackoverflow.com/questions/38104443/c-stdlocaltime-daylight-saving-time-rule-dst-european-vs-american", "title": "C++ std::localtime daylight saving time rule (dst) european vs american", "body": "<p>I've problem with use of the std::localtime function. When I transform a std::time_t to a local struct tm, it always use the american daylight saving time whereas I want to use the european one (France).</p>\n\n<p>UTC : 03/19/16 16:56 is transformed in Local : 03/19/16 18:56.</p>\n\n<p>At this date, normally, local is 17:56 (UTC+1). The DST happens on the 27th in France.\nAfter several tests, it seems that the used DST is based on the american rule : DST happens on second sunday in march.</p>\n\n<p>I've also changed the TZ environement variable, but it also fails.</p>\n\n<hr>\n\n<p>`</p>\n\n<pre><code>if( putenv( \"TZ=CET-1CEST-2,M3.5.0/2,M10.5.0/3\" ) != 0 ) { \n     std::cout &lt;&lt; \"Unable to set TZ\" &lt;&lt; std::endl; \n} else { \n   tz = getenv(\"TZ\"); \n   if (tz) std::cout &lt;&lt; tz &lt;&lt; std::endl; \n   else std::cout &lt;&lt; \"TZ not defined\" &lt;&lt; std::endl; tzset(); \n}\n\nstruct std::tm t;\nt.tm_sec = 0;\nt.tm_min = 56;\nt.tm_hour = 18;\nt.tm_mday = 19;\nt.tm_mon = 3-1;\nt.tm_year = 2016-1900;\nt.tm_isdst = -1;\nstd::time_t tt = std::mktime(&amp;t);\nstd::cout &lt;&lt; \"UTC: \" &lt;&lt; std::put_time(std::gmtime(&amp;tt), \"%c %Z\") &lt;&lt; '\\n'; // UTC : 03/19/16 16:56\nstd::cout &lt;&lt; \"local: \" &lt;&lt; std::put_time(std::localtime(&amp;tt), \"%c %Z\") &lt;&lt; '\\n'; // Local : 03/19/16 18:56 (not waited result)\n</code></pre>\n\n<p>`</p>\n\n<p>As a precision, I use the bcc32c compiler (the embarcadero C++ clang based computer). </p>\n\n<p>I hope I'm clear enough and you'll be able to help me.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c++", "opencv", "android-ndk", "android.mk"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3368457"}, "edited": false, "score": 1, "creation_date": 1467238220, "post_id": 38105317, "comment_id": 63655284, "body": "Thank you bashbug! It works perfectly now. I had to change the APP_STL parameter in my Application.mk from stlport_static to gnustl_shared as mentioned in this post <a href=\"http://stackoverflow.com/questions/34740413/using-native-opencv-3-0-0-in-android-studio-1-5-with-gradle-experimental-0-4-0\" title=\"using native opencv 3 0 0 in android studio 1 5 with gradle experimental 0 4 0\">stackoverflow.com/questions/34740413/&hellip;</a> to. I don&#39;t understand exactly why, I don&#39;t know the differences between the STL versions, that&#39;s the problem of being amateur XD"}], "tags": [], "owner": {"reputation": 546, "user_id": 2941914, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/51c67dde6fa4f806bd8133ac97c27801?s=128&d=identicon&r=PG", "display_name": "bashbug", "link": "https://stackoverflow.com/users/2941914/bashbug"}, "is_accepted": true, "score": 6, "last_activity_date": 1467218148, "last_edit_date": 1467218148, "creation_date": 1467217783, "answer_id": 38105317, "question_id": 38104404, "link": "https://stackoverflow.com/questions/38104404/android-mk-include-opencv-directory-for-native-c-compliation-with-ndk/38105317#38105317", "title": "Android.mk - Include OpenCV directory for native C++ compliation with NDK", "body": "<p>First, download <a href=\"http://opencv.org/downloads.html\" rel=\"noreferrer\">OpenCV for Android</a>. If you are only using OpenCV nativ, you have to set the following in your Android.mk file:</p>\n\n<pre><code>LOCAL_PATH := $(call my-dir)\n\nCVROOT := path_to_opencv/OpenCV-android-sdk/sdk/native/jni\n\ninclude $(CLEAR_VARS)\nOPENCV_INSTALL_MODULES:=on\nOPENCV_LIB_TYPE:=STATIC\ninclude $(CVROOT)/OpenCV.mk\n\nLOCAL_MODULE += myModule\n\nLOCAL_C_INCLUDES += path_to_your_code/bar.h\nLOCAL_SRC_FILES += path_to_your_code/bar.cpp \n\nLOCAL_CFLAGS += -std=c++11 -frtti -fexceptions -fopenmp -w\nLOCAL_LDLIBS += -llog -L$(SYSROOT)/usr/lib\nLOCAL_LDFLAGS += -fopenmp\n\ninclude $(BUILD_SHARED_LIBRARY)\n</code></pre>\n\n<p>The cool thing is that OpenCV provides the OpenCV.mk makefile and you have not to do anything ;)</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3368457"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5414, "favorite_count": 4, "accepted_answer_id": 38105317, "answer_count": 1, "score": 3, "last_activity_date": 1467218148, "creation_date": 1467215150, "last_edit_date": 1495540926, "question_id": 38104404, "link": "https://stackoverflow.com/questions/38104404/android-mk-include-opencv-directory-for-native-c-compliation-with-ndk", "title": "Android.mk - Include OpenCV directory for native C++ compliation with NDK", "body": "<p>I'm importing a C++/OpenCV code to an Android app with NDK. First of all, I have to say that I don't have studies in programming, I'm just an amateur developer, so there're many things that I don't manage (specially, things out of coding).</p>\n\n<p>I use QtCreator for my C++/OpenCV code and I wrote this line in my Project.pro:</p>\n\n<pre><code>INCLUDEPATH += path/to/OpenCV/main/dir #OpenCV-3.1.0\nLIBS += -lopencv_core -lopencv_highgui -lopencv_imgcodecs -lopencv_imgproc\n</code></pre>\n\n<p>Now, I'm trying to make a \"Hello World!\" app only to be sure that I can compile with my C++ sources.</p>\n\n<p>According to <a href=\"https://developer.android.com/ndk/guides/android_mk.html\" rel=\"nofollow noreferrer\">https://developer.android.com/ndk/guides/android_mk.html</a>, I wrote this simple Android.mk file:</p>\n\n<pre><code>LOCAL_PATH := $(call my-dir)\ninclude $(CLEAR_VARS)\n\nLOCAL_MODULE := myModule\nLOCAL_CFLAGS += -I /path/to/OpenCV/main/dir\nLOCAL_LDLIBS := -lopencv_core\nLOCAL_SRC_FILES := bar.cpp\n\ninclude $(BUILD_SHARED_LIBRARY)\n</code></pre>\n\n<p>In bar.cpp, I have:</p>\n\n<pre><code>#include &lt;opencv2/core/core.hpp&gt;\n</code></pre>\n\n<p>Just for checking that the compiler can found the sources. When I try to build my C++/OpenCV native code using ndk-build, I get:</p>\n\n<pre><code>non-system libraries in linker flags: -lopencv_core\nAndroid NDK:     This is likely to result in incorrect builds. Try using LOCAL_STATIC_LIBRARIES or LOCAL_SHARED_LIBRARIES instead to list the library dependencies of the current module\n</code></pre>\n\n<p>I tryed to use LOCAL_STATIC_LIBRARIES and LOCAL_SHARED_LIBRARIES, but no succed. Any ideas?</p>\n\n<hr>\n\n<p>P.S.:</p>\n\n<p>It's important to say that I compiled a simple Hello world using NDK (wthout including any OpenCV header) following this example <a href=\"https://gist.github.com/gnuanu/252fd406f48f7da2c1c7\" rel=\"nofollow noreferrer\">https://gist.github.com/gnuanu/252fd406f48f7da2c1c7</a>.</p>\n\n<p>There is a post here <a href=\"https://stackoverflow.com/questions/14559034/android-mk-how-to-include-ffmpeg-and-opencv\">Android.mk: how to include ffmpeg and Opencv</a>, but it has not answers and I can't solve with the info...</p>\n"}, {"tags": ["c++", "vba", "ms-word", "c++builder", "ole"], "comments": [{"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1467215315, "post_id": 38104339, "comment_id": 63642528, "body": "This isn&#39;t Embarcadero-specific --- it&#39;s almost as much of a pain in VBA!  See <a href=\"http://word.mvps.org/faqs/customization/ReplaceAnywhere.htm\" rel=\"nofollow noreferrer\">this MVP article</a>.  (PS - welcome to the site!)"}, {"owner": {"reputation": 21, "user_id": 6529181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a48c7af0e3c6fbb821dfd0c0622b685?s=128&d=identicon&r=PG&f=1", "display_name": "DMG", "link": "https://stackoverflow.com/users/6529181/dmg"}, "reply_to_user": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1467339988, "post_id": 38104339, "comment_id": 63703065, "body": "Many thanks CXWfor the answer and welcome.  I have that article and I appreciate its going to be a bit of a journey. I guess my real question atm is - How do I pass a WdStoryType Index parameter as part of the WordApplication1-&gt;ActiveDocument-&gt;StoryRanges-&gt;Item() call from C++ in Embarcadero.  It is unhappy with an OleVariant.  I am clearly not fully getting how to pass parameters in OLE calls."}, {"owner": {"reputation": 21, "user_id": 6529181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a48c7af0e3c6fbb821dfd0c0622b685?s=128&d=identicon&r=PG&f=1", "display_name": "DMG", "link": "https://stackoverflow.com/users/6529181/dmg"}, "reply_to_user": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1467342603, "post_id": 38104339, "comment_id": 63703657, "body": "This is early binding and WdStoryType is an enum declared in Word_2K.h.  For now, I just want to pass the value wdFootnotesStory = 2.  I have tried a number of variations using an OleVariant wrapper but can&#39;t get it to work.  I am clearly not getting how to pass enum parameters in OLE calls. Cheers."}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1467376615, "post_id": 38104339, "comment_id": 63720729, "body": "Would you please <a href=\"http://stackoverflow.com/posts/38104339/edit\">edit your question</a> to include the code you&#39;ve tried, and what errors you got (compile or run-time)?  I don&#39;t know the answer off-hand, but maybe seeing what <i>doesn&#39;t</i> work will give me (or another reader) some ideas.  Also, posting the key bits of what you have so far is considered good etiquette on SO. See the <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> page.  Thanks! --- One other thought - per <a href=\"https://msdn.microsoft.com/en-us/library/cc237562.aspx\" rel=\"nofollow noreferrer\">this</a>, maybe a <code>VARIANT</code> <code>VT_I4</code>?"}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1467376785, "post_id": 38104339, "comment_id": 63720831, "body": "Or <a href=\"http://docs.embarcadero.com/products/rad_studio/radstudio2007/RS2007_helpupdates/HUpdate4/EN/html/devwin32/casmarshalingdata_xml.html\" rel=\"nofollow noreferrer\">this</a>, which says use pull in the type library and use <code>Integer</code>.  (From Google results for <code>ole automation enum type embarcadero</code>.)"}, {"owner": {"reputation": 21, "user_id": 6529181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a48c7af0e3c6fbb821dfd0c0622b685?s=128&d=identicon&r=PG&f=1", "display_name": "DMG", "link": "https://stackoverflow.com/users/6529181/dmg"}, "reply_to_user": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1467387563, "post_id": 38104339, "comment_id": 63728138, "body": "Thanks CXW for all your help with this one.  I had a good look at the links you sent through.  Any other comments would be appreciated.  I have a lot to learn."}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1467388057, "post_id": 38104339, "comment_id": 63728410, "body": "Happy to help!  Please move the solution from the bottom of your question to a new answer.  Then, in a few days when the system will let you, hit the checkmark to accept that answer.  That way the question will be cleared off  the Unanswered lists, and it will be easier for others to benefit from what you&#39;ve learned."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 6529181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a48c7af0e3c6fbb821dfd0c0622b685?s=128&d=identicon&r=PG&f=1", "display_name": "DMG", "link": "https://stackoverflow.com/users/6529181/dmg"}, "is_accepted": true, "score": 0, "last_activity_date": 1467416153, "creation_date": 1467416153, "answer_id": 38155044, "question_id": 38104339, "link": "https://stackoverflow.com/questions/38104339/retrieve-and-loop-through-story-ranges-from-word-ole-using-embarcadero-c-buil/38155044#38155044", "title": "Retrieve and loop through Story Ranges from Word OLE using Embarcadero C++ (Builder)", "body": "<p>Solution: In the course of adding the code, I think I stumbled across the solution - WdStoryType::wdFootnotesStory. It appears all I was missing was the class qualifier reference.</p>\n"}], "owner": {"reputation": 21, "user_id": 6529181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a48c7af0e3c6fbb821dfd0c0622b685?s=128&d=identicon&r=PG&f=1", "display_name": "DMG", "link": "https://stackoverflow.com/users/6529181/dmg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 495, "favorite_count": 1, "accepted_answer_id": 38155044, "answer_count": 1, "score": 1, "last_activity_date": 1467416153, "creation_date": 1467214991, "last_edit_date": 1467387978, "question_id": 38104339, "link": "https://stackoverflow.com/questions/38104339/retrieve-and-loop-through-story-ranges-from-word-ole-using-embarcadero-c-buil", "title": "Retrieve and loop through Story Ranges from Word OLE using Embarcadero C++ (Builder)", "body": "<p>I have a code snippet which loops through a list of hyperlink (file link) objects (members <code>anchor</code> and <code>destination</code>) and inserts them into a selected Word document.  I can search the Word document and insert the hyperlink when it finds the target (anchor) string. I would now like to loop through all the <code>StoryRanges</code> in the Word document to ensure that no sections is missed. I can get the number of story ranges, e.g., using <code>WordApplication1-&gt;ActiveDocument-&gt;StoryRanges-&gt;Count</code>.  However, I can't pass the parameter in the correct form to actually retrieve the story range I want to search next, e.g. <code>WordApplication1-&gt;ActiveDocument-&gt;StoryRanges-&gt;Item</code>.  I have a numeric count but <code>Item</code> expects as a parameter a VBA constant with the correct type.  What am I missing? </p>\n\n<p><strong>Edit</strong> Here is  the code.  The line causing the problem is</p>\n\n<pre><code>wdFootnotesStoryID = WordApplication1-&gt;ActiveDocument-&gt;StoryRanges-&gt;Item(??????)-&gt;get_ID();\n</code></pre>\n\n<p>I previously tried to typing parameters as int, OleVariant.  The error message for OleVariant was did not match the parameter expected. I used wdFootnotesStory in an attempt to reference the enum but that came up as not defined. I tried Int values as well. </p>\n\n<p>Here is the OLESafe enum - defined in Word_2k.h</p>\n\n<pre><code>enum class WdStoryType\n{\n  wdMainTextStory = 1, \n  wdFootnotesStory = 2, \n  wdEndnotesStory = 3, \n  wdCommentsStory = 4, \n  wdTextFrameStory = 5, \n  wdEvenPagesHeaderStory = 6, \n  wdPrimaryHeaderStory = 7, \n  wdEvenPagesFooterStory = 8, \n  wdPrimaryFooterStory = 9, \n  wdFirstPageHeaderStory = 10, \n  wdFirstPageFooterStory = 11\n};\n</code></pre>\n\n<p>Here is the main code.<br>\n    //---------------------------------------------------------------------------</p>\n\n<pre><code>#include &lt;vcl.h&gt;\n#pragma hdrstop\n\n#include \"Main.h\"\n\n//---------------------------------------------------------------------------\n#pragma package(smart_init)\n#pragma link \"Word_2K_SRVR\"\n#pragma resource \"*.dfm\"\n\nstruct THyperLink\n{\n    String Anchor;\n    String FilePath;\n};\n\nTList* linkList = new TList;\n\nTForm1 *Form1;\n\n\n//---------------------------------------------------------------------------\n__fastcall TForm1::TForm1(TComponent* Owner)\n    : TForm(Owner)\n{\n    THyperLink* link = new THyperLink;\n    link-&gt;Anchor = \"ABC.0001.0002.0003\";\n    link-&gt;FilePath = \"S:\\\\Development\\\\WordLinking\\\\Test\\\\ABC.0001.0002.0003.pdf\";\n    linkList-&gt;Add(link);\n\n    THyperLink* link2 = new THyperLink;\n    link2-&gt;Anchor = \"ABC.0001.0002.0004\";\n    link2-&gt;FilePath = \"S:\\\\Development\\\\WordLinking\\\\Test\\\\ABC.0001.0002.0004.pdf\";\n    linkList-&gt;Add(link2);\n}\n\n//---------------------------------------------------------------------------\nvoid __fastcall TForm1::Button1Click(TObject *Sender)\n{\n\n    OleVariant Template = EmptyParam();\n    OleVariant NewTemplate = False;\n    OleVariant ItemIndex = 1;\n    OleVariant strToInsert = \"Insert String\";\n    OleVariant endOfLine = \"TEST\";\n    OleVariant wdStory = 6;\n    //OleVariant wdMove = 0;\n    OleVariant rng;\n\n    OleVariant strSearch;// = \"ABC.0001.0002.0003\";\n    OleVariant strLink; // = \"S:Development\\\\WordLinking\\\\Test\\\\ABC.0001.0002.0003.pdf\";\n    OleVariant lnkDoc = \"S:\\\\Development\\\\WordLinking\\\\Test\\\\ZZZ.0001.0002.0003.docx\";\n\n    OleVariant wdCharacter = \"wdCharacter\";\n    OleVariant cChars = 18;\n    OleVariant wdMove = \"wdMove\";\n    OleVariant wdTrue = true;\n\n    OleVariant wrdStoryRangeCount;\n    OleVariant wdFootnotesStoryID;\n    OleVariant rangeStory;\n    OleVariant wrdDoc;\n\n    WdStoryType wdFootnotesStory = 2;\n\n\n    try\n    {\n        WordApplication1-&gt;Connect();\n\n    }\n    catch (...)\n    {\n        ShowMessage(\"Microsoft word is not installed\");\n    }\n\n\n\n    //Make application visible\n    WordApplication1-&gt;GetDefaultInterface()-&gt;Visible = True;\n\n    //Open document to be linked\n    WordApplication1-&gt;Documents-&gt;Open(lnkDoc);\n\n    //Open new document - add to document collection in application\n    //WordApplication1-&gt;Documents-&gt;Add(Template, NewTemplate);\n\n    //go to top of the document\n    WordApplication1-&gt;Selection-&gt;HomeKey(wdStory);\n\n    for (int index = 0; index &lt;= linkList-&gt;Count-1; index++)\n    {\n        //Retrieve hyperlink object\n        THyperLink* link = reinterpret_cast&lt;THyperLink*&gt;(linkList-&gt;Items[index]);\n        strSearch = (OleVariant)link-&gt;Anchor;\n        strLink = (OleVariant)link-&gt;FilePath;\n\n        //\n        wrdStoryRangeCount = WordApplication1-&gt;ActiveDocument-&gt;StoryRanges-&gt;Count;\n\n        //WordApplication1-&gt;ActiveDocument-&gt;StoryRanges-&gt;Item(1);\n\n        wdFootnotesStoryID = WordApplication1-&gt;ActiveDocument-&gt;StoryRanges-&gt;Item(??????)-&gt;get_ID();\n        ShowMessage (\"wdFootnotesStory ID: \" + wdFootnotesStoryID);\n\n        //WordApplication1-&gt;ActiveDocument-&gt;get_\n\n        while (WordApplication1-&gt;Selection-&gt;Find-&gt;Execute(strSearch,Template,Template,Template,Template,Template,wdTrue))\n        //while (WordApplication1-&gt;ActiveDocument-&gt;StoryRanges-&gt;Item(wdFootnotesStory)-&gt;Find-&gt;Execute(strSearch,Template,Template,Template,Template,Template,wdTrue))\n        {\n            WordApplication1-&gt;Selection-&gt;Hyperlinks-&gt;Add(WordApplication1-&gt;Selection-&gt;Range,strLink,Template,Template,strSearch,Template);\n        }\n\n        //go back to top of Word document\n        WordApplication1-&gt;Selection-&gt;HomeKey(wdStory);\n    }\n\n    //Disconnect from word\n    WordApplication1-&gt;Disconnect();\n\n}\n//---------------------------------------------------------------------------\n</code></pre>\n\n<p><strong>Solution</strong>: In the course of adding the code, I think I stumbled across the solution - <code>WdStoryType::wdFootnotesStory</code>.  It appears all I was missing was the class qualifier reference.</p>\n"}, {"tags": ["c++", "algorithm", "boost"], "comments": [{"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "edited": false, "score": 2, "creation_date": 1467214999, "post_id": 38104201, "comment_id": 63642260, "body": "Why not just have a queue and let the worker threads read from it (locked), or wait for a semaphore when it&#39;s empty?"}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 0, "creation_date": 1467215382, "post_id": 38104201, "comment_id": 63642577, "body": "You want to implement load balancer and scheduler. This is not a trivial issue. Why not use one of existing workload managers?"}, {"owner": {"reputation": 437, "user_id": 1219045, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/85e07bf65e2703545b5ae566a6aecbdb?s=128&d=identicon&r=PG", "display_name": "donald", "link": "https://stackoverflow.com/users/1219045/donald"}, "reply_to_user": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "edited": false, "score": 0, "creation_date": 1467217328, "post_id": 38104201, "comment_id": 63643923, "body": "@lorro this is an async server, this will not work."}, {"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "edited": false, "score": 0, "creation_date": 1467217993, "post_id": 38104201, "comment_id": 63644334, "body": "@donald : if you mean &#39;async&#39; as &#39;threaded&#39;, then I fail to see why it wouldn&#39;t work, can you please elaborate.."}, {"owner": {"reputation": 437, "user_id": 1219045, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/85e07bf65e2703545b5ae566a6aecbdb?s=128&d=identicon&r=PG", "display_name": "donald", "link": "https://stackoverflow.com/users/1219045/donald"}, "reply_to_user": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "edited": false, "score": 1, "creation_date": 1467218863, "post_id": 38104201, "comment_id": 63644807, "body": "@lorro async is <b>NOT</b> threaded. these are two different things. in this case, it is both."}, {"owner": {"reputation": 750, "user_id": 1212565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0cc2208baa8138cdb6fc898bd298500?s=128&d=identicon&r=PG", "display_name": "David Thomas", "link": "https://stackoverflow.com/users/1212565/david-thomas"}, "reply_to_user": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "edited": false, "score": 0, "creation_date": 1467219320, "post_id": 38104201, "comment_id": 63645104, "body": "@ donald Rather than screaming at @lorro, perhaps you can explain your use of the term &quot;async&quot;.  By &quot;async&quot;, are you inferring that the request is sent to the server, the calculation is asynchornously computed, and the result is retrieved by a second request?"}, {"owner": {"reputation": 437, "user_id": 1219045, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/85e07bf65e2703545b5ae566a6aecbdb?s=128&d=identicon&r=PG", "display_name": "donald", "link": "https://stackoverflow.com/users/1219045/donald"}, "reply_to_user": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "edited": false, "score": 0, "creation_date": 1467220368, "post_id": 38104201, "comment_id": 63645747, "body": "@lorro, David,   didn&#39;t mean to scream, didn&#39;t know that emphasis constitute as one, I didn&#39;t mean to offend and I&#39;m sorry if you did.  async means that the connections to the server are async. there is a polling mechanism an so you can&#39;t wait on a queue."}, {"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "edited": false, "score": 0, "creation_date": 1467228089, "post_id": 38104201, "comment_id": 63650423, "body": "@donald : That&#39;s ok, no offense taken :). That said, I still don&#39;t see why it&#39;ll not work, I probably need more info on your current architecture. What I&#39;m proposing is to have a quick-and-dirty listener that does nothing but put the entire request in a mutex-protected queue (then listen for the next); then have N threads (or better 2*N) processing the first element of the queue. You might utilize a semaphore so that threads don&#39;t need to sleep with a timer when no request is available. This is how I&#39;d solve it, but how is <i>your</i> design different, so we could help?"}, {"owner": {"reputation": 437, "user_id": 1219045, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/85e07bf65e2703545b5ae566a6aecbdb?s=128&d=identicon&r=PG", "display_name": "donald", "link": "https://stackoverflow.com/users/1219045/donald"}, "edited": false, "score": 0, "creation_date": 1467283616, "post_id": 38104201, "comment_id": 63673560, "body": "I ended up doing something that carries some resemblance, as I was pressed for time. I&#39;ve created to async queue that behaves similar to what you&#39;ve described. this is not as good as a single queue, but I&#39;ll think of something better... thanks anyhow and again, didn&#39;t mean to offend!"}], "owner": {"reputation": 437, "user_id": 1219045, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/85e07bf65e2703545b5ae566a6aecbdb?s=128&d=identicon&r=PG", "display_name": "donald", "link": "https://stackoverflow.com/users/1219045/donald"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1467214639, "creation_date": 1467214639, "question_id": 38104201, "link": "https://stackoverflow.com/questions/38104201/perfomance-queue-in-async-programming", "title": "Perfomance queue in async programming", "body": "<p>this is more of an algorithm issue. I have an async server written in C++. it's a simple http processing special requests - providing a calculation for a product. The service creates N+1 threads for N cores machine.\nwhen the calculation goes above N, a 503 error is sent to the client. While this is technically correct, I wish to avoid this situation. A bigger machine might be implied, but, the machine is loaded in average by less then 2%, so there is no justification for that. I just want to queue the extra requests for times that the machine is less busy (a second or two is acceptable) I'm using boost for the async operation.</p>\n\n<p>Now here is the issue: If I'll queue the extra request(s) by the N+1 thread, there might be a situation in which the requests will never be picked up (if all N threads just left the queue and the N+1 thread inserts a new request) then this request will linger till the next request to free it. other option is to use the <strong>post()</strong> method. problem here that this will load the N+1 thread in case all N threads are busy. thus rendering the server unavailable.</p>\n\n<p>Simple but bad solution is to increase the number of threads. most of the time it's below the limit, but when it's passes the number of cores, the system scheduler will cap the threads which will hinder performances.</p>\n\n<p>Since every 503 cost money and the last solution will actually work, it's not terrible, but so far, this server is a show case for async programming, so I'm looking for a way to keep it like that.</p>\n\n<p>Any ideas will be welcomed!</p>\n"}, {"tags": ["c++", "xml", "tinyxml2"], "comments": [{"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "edited": false, "score": 2, "creation_date": 1467214451, "post_id": 38104069, "comment_id": 63641905, "body": "Kindly show your code."}, {"owner": {"reputation": 1830, "user_id": 1927794, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b7b26bda58eac7f333cc428421a711cd?s=128&d=identicon&r=PG", "display_name": "Arkady", "link": "https://stackoverflow.com/users/1927794/arkady"}, "edited": false, "score": 0, "creation_date": 1467214756, "post_id": 38104069, "comment_id": 63642096, "body": "open tinyxml2 tutorial and just use it."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 5273169, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/883016115109069/picture?type=large", "display_name": "\u0414\u0430\u043d\u0438\u043b\u0430 \u0413\u043e\u043b\u0443\u0431\u0446\u043e\u0432", "link": "https://stackoverflow.com/users/5273169/%d0%94%d0%b0%d0%bd%d0%b8%d0%bb%d0%b0-%d0%93%d0%be%d0%bb%d1%83%d0%b1%d1%86%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1467215184, "post_id": 38104343, "comment_id": 63642409, "body": "That&#39;s not a problem actually. I&#39;m using struct right now. I&#39;ve just used &quot;First&quot; and &quot;Second&quot; as an example, just so the code wouldn&#39;t be big for a question"}], "tags": [], "owner": {"reputation": 1185, "user_id": 971343, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/addab9dfc9ecbd0a4190b6eea9955ae5?s=128&d=identicon&r=PG", "display_name": "CppChris", "link": "https://stackoverflow.com/users/971343/cppchris"}, "is_accepted": false, "score": 0, "last_activity_date": 1467215000, "creation_date": 1467215000, "answer_id": 38104343, "question_id": 38104069, "link": "https://stackoverflow.com/questions/38104069/parse-xml-elements-in-c/38104343#38104343", "title": "Parse XML elements in C++", "body": "<p>You are defining \"double x\" twice. Try</p>\n\n<pre><code>double first_x = std::stod(First-&gt;Attribute(\"x\"));\ndouble first_y = std::stod(First-&gt;Attribute(\"y\"));\n</code></pre>\n\n<p>and</p>\n\n<pre><code>double second_x = std::stod(Second-&gt;Attribute(\"x\"));\n</code></pre>\n\n<p>Your compiler should have stopped you though, always look out for warnings!</p>\n"}], "owner": {"reputation": 83, "user_id": 5273169, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/883016115109069/picture?type=large", "display_name": "\u0414\u0430\u043d\u0438\u043b\u0430 \u0413\u043e\u043b\u0443\u0431\u0446\u043e\u0432", "link": "https://stackoverflow.com/users/5273169/%d0%94%d0%b0%d0%bd%d0%b8%d0%bb%d0%b0-%d0%93%d0%be%d0%bb%d1%83%d0%b1%d1%86%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 841, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1467215118, "creation_date": 1467214340, "last_edit_date": 1467215118, "question_id": 38104069, "link": "https://stackoverflow.com/questions/38104069/parse-xml-elements-in-c", "title": "Parse XML elements in C++", "body": "<p>I'm using tinyxml2 and I want to parse some elements from XML in C++. For example</p>\n\n<pre><code>&lt;root&gt;\n     &lt;First x=\"1\" y=\"2\"&gt;\n     &lt;Second x = \"1\"&gt;\n     &lt;Second y = \"2\"&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>I can parse only x in \"Second\" element.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"tinyxml2.h\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;iomanip&gt;\nusing namespace tinyxml2;\nusing namespace std;\nint main(){\n     tinyxml2::XMLError eResult = xml_doc.LoadFile(\"test.xml\");\n     if (eResult != tinyxml2::XML_SUCCESS) return false;\n\n     tinyxml2::XMLNode* root = xml_doc.FirstChildElement(\"root\");\n     if (root == nullptr) return false;\n\n     tinyxml2::XMLElement* First = root-&gt;FirstChildElement(\"First\");\n     if (First == nullptr) return false;\n\n     double x1 = std::stod(First-&gt;Attribute(\"x\"));\n     double y1 = std::stod(First-&gt;Attribute(\"y\"));\n\n     tinyxml2::XMLElement* Second = root-&gt;FirstChildElement(\"Second\");\n     if (Second == nullptr) return false;\n\n     double x2 = std::stod(Second-&gt;Attribute(\"x\"));\n     double y2 = std::stod(Second-&gt;Attribute(\"y\"));\n\n     system(\"pause\");\n}\n</code></pre>\n\n<p>when I'm trying same method for \"First\" element or for \"Second y\", it just shows me errors. What should I do?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1934, "user_id": 4932834, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cb44dcd4ebddfea3ede8c6d46b02795?s=128&d=identicon&r=PG&f=1", "display_name": "PcAF", "link": "https://stackoverflow.com/users/4932834/pcaf"}, "edited": false, "score": 1, "creation_date": 1467214326, "post_id": 38104037, "comment_id": 63641818, "body": "In this case, even <code>0</code> is considered as garbage."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1467214358, "post_id": 38104037, "comment_id": 63641841, "body": "How do you define &quot;garbage value&quot;?"}, {"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "edited": false, "score": 0, "creation_date": 1467214380, "post_id": 38104037, "comment_id": 63641855, "body": "Yes, use a different compiler :). Really, it&#39;s undefined for a reason, if you want a value (e.g., 0xDEADCODE, 0xDEADBEEF are popular) then just set it. Note that any decent compiler should emit a warning that a and b are used before initialized."}, {"owner": {"reputation": 1076, "user_id": 132510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db3fd6925bf6cea972323a3d2f98afe?s=128&d=identicon&r=PG", "display_name": "A. L. Flanagan", "link": "https://stackoverflow.com/users/132510/a-l-flanagan"}, "edited": false, "score": 0, "creation_date": 1467214555, "post_id": 38104037, "comment_id": 63641967, "body": "If you don&#39;t set the value, the compiler is perfectly free to put anything it wants in there, including 0. You don&#39;t explain why you want these &quot;junk values&quot;, but if you want something else you&#39;ll have to set it yourself."}, {"owner": {"reputation": 1830, "user_id": 1927794, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b7b26bda58eac7f333cc428421a711cd?s=128&d=identicon&r=PG", "display_name": "Arkady", "link": "https://stackoverflow.com/users/1927794/arkady"}, "edited": false, "score": 0, "creation_date": 1467214697, "post_id": 38104037, "comment_id": 63642054, "body": "it looks like author wants kind of random values, and that is not good idea to get them this way."}, {"owner": {"reputation": 11, "user_id": 3464879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fa9099adccbdd812346709332f17d28?s=128&d=identicon&r=PG", "display_name": "ansimon", "link": "https://stackoverflow.com/users/3464879/ansimon"}, "edited": false, "score": 0, "creation_date": 1467214735, "post_id": 38104037, "comment_id": 63642087, "body": "As Arkady says, I would like to get random values. Is it possible?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1467215003, "post_id": 38104037, "comment_id": 63642263, "body": "@ansimon Then ask how to get random or pseudo-random numbers?"}, {"owner": {"reputation": 11, "user_id": 3464879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fa9099adccbdd812346709332f17d28?s=128&d=identicon&r=PG", "display_name": "ansimon", "link": "https://stackoverflow.com/users/3464879/ansimon"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1467215302, "post_id": 38104037, "comment_id": 63642514, "body": "@juanchopanza I don&#39; want to get a random value. I want the variables not being initialized with a zero value. I researched that compiling with -O3 compiler flag would do the trick but it didn&#39;t."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1467215338, "post_id": 38104037, "comment_id": 63642541, "body": "@ansimon Your words: &quot;<i>As Arkady says, I would like to get random values.</i>&quot; Anyway, they aren&#39;t initialized. You are asking for something that can&#39;t be done."}, {"owner": {"reputation": 11, "user_id": 3464879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fa9099adccbdd812346709332f17d28?s=128&d=identicon&r=PG", "display_name": "ansimon", "link": "https://stackoverflow.com/users/3464879/ansimon"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1467215448, "post_id": 38104037, "comment_id": 63642631, "body": "@juanchopanza thanks. I don&#39;t know why, same code in Windows shows junk values but in Linux, zero values."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1467217776, "post_id": 38104037, "comment_id": 63644195, "body": "@ansimon That&#39;s the thing with undefined behaviour, it is <i>undefined</i>. If you read an uninitialized value your program is broken/undefined/has no meaning and the compiler can do whatever it likes. Solution: don&#39;t do it."}, {"owner": {"reputation": 11, "user_id": 3464879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fa9099adccbdd812346709332f17d28?s=128&d=identicon&r=PG", "display_name": "ansimon", "link": "https://stackoverflow.com/users/3464879/ansimon"}, "edited": false, "score": 0, "creation_date": 1467249670, "post_id": 38104037, "comment_id": 63658522, "body": "Thanks to everyone who took the time to answer :-)"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 2, "last_activity_date": 1467214748, "creation_date": 1467214748, "answer_id": 38104238, "question_id": 38104037, "link": "https://stackoverflow.com/questions/38104037/c-scalar-variable-set-to-zero-value/38104238#38104238", "title": "C++ scalar variable set to zero value", "body": "<p>The compiler behaves differently in this regard when building with/without optimization. I'm guessing you are building without optimization and that's why the compiler zero initializes variables.</p>\n\n<p>But, when that is said; don't go around reading uninitialized variables. That is undefined behaviour. While you may often just get a 'garbage' value, the compiler is actually free to generate whatever code it wants when it sees that your program is undefined. This includes not emitting any code at all,  emitting the code you expect as well as rewriting other parts of your program. <em>Don't</em> invoke undefined behaviour.</p>\n\n<p>If you want a random value, use the <code>&lt;random&gt;</code> facilities - <a href=\"http://en.cppreference.com/w/cpp/numeric/random\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/numeric/random</a></p>\n"}], "owner": {"reputation": 11, "user_id": 3464879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fa9099adccbdd812346709332f17d28?s=128&d=identicon&r=PG", "display_name": "ansimon", "link": "https://stackoverflow.com/users/3464879/ansimon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467214748, "creation_date": 1467214246, "question_id": 38104037, "link": "https://stackoverflow.com/questions/38104037/c-scalar-variable-set-to-zero-value", "title": "C++ scalar variable set to zero value", "body": "<p>I'm using CodeBlocks 13.12, g++ compiler and my local variables are all being initializated to 0.</p>\n\n<p>I would to know if there's a way to avoid the compiler to set 0 to all my variables. I would like to have garbage value in them.</p>\n\n<p>For example:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main(){\n  int a, b;\n  cout &lt;&lt; a &lt;&lt; \" \" &lt;&lt; b;\n  return 0;\n}\n</code></pre>\n\n<p>The output is:\n0 0</p>\n\n<p>I don't want a and b to be zero. They should contain junk values.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c++", "armadillo"], "comments": [{"owner": {"reputation": 1326, "user_id": 6432423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pE2Da.png?s=128&g=1", "display_name": "Claes Rolen", "link": "https://stackoverflow.com/users/6432423/claes-rolen"}, "edited": false, "score": 1, "creation_date": 1467218855, "post_id": 38103832, "comment_id": 63644797, "body": "Tried your code and it worked fine (using Armadillo 6.700.4). Have you tried to make a clean build?"}, {"owner": {"reputation": 3984, "user_id": 4062451, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c62a4b86f88400a422c10d43567ac3bf?s=128&d=identicon&r=PG&f=1", "display_name": "spacegoing", "link": "https://stackoverflow.com/users/4062451/spacegoing"}, "reply_to_user": {"reputation": 1326, "user_id": 6432423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pE2Da.png?s=128&g=1", "display_name": "Claes Rolen", "link": "https://stackoverflow.com/users/6432423/claes-rolen"}, "edited": false, "score": 0, "creation_date": 1467293763, "post_id": 38103832, "comment_id": 63680640, "body": "@ClaesRolen Thanks for your comment. Yeah this is so weird. What do you mean by &quot;make a clean build&quot;?"}, {"owner": {"reputation": 1326, "user_id": 6432423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pE2Da.png?s=128&g=1", "display_name": "Claes Rolen", "link": "https://stackoverflow.com/users/6432423/claes-rolen"}, "edited": false, "score": 1, "creation_date": 1467300557, "post_id": 38103832, "comment_id": 63686210, "body": "Remove all your generated .o files and compile once again to make sure  the build is based on your lastest source file version."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 9273000, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/eba102c895c8ab78dc76236e3874a74b?s=128&d=identicon&r=PG", "display_name": "gellusan", "link": "https://stackoverflow.com/users/9273000/gellusan"}, "is_accepted": false, "score": 1, "last_activity_date": 1516979353, "last_edit_date": 1516979353, "creation_date": 1516978858, "answer_id": 48463970, "question_id": 38103832, "link": "https://stackoverflow.com/questions/38103832/armadillo-randu-doesnt-work/48463970#48463970", "title": "Armadillo randu doesn&#39;t work", "body": "<p>I had a similar problem (on Windows). I commented out the following line in config.hpp </p>\n\n<pre><code>#define ARMA_USE_WRAPPER\n</code></pre>\n\n<p>and after that the randu/randn etc. commands worked correctly.</p>\n"}], "owner": {"reputation": 3984, "user_id": 4062451, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c62a4b86f88400a422c10d43567ac3bf?s=128&d=identicon&r=PG&f=1", "display_name": "spacegoing", "link": "https://stackoverflow.com/users/4062451/spacegoing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 528, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516979353, "creation_date": 1467213696, "question_id": 38103832, "link": "https://stackoverflow.com/questions/38103832/armadillo-randu-doesnt-work", "title": "Armadillo randu doesn&#39;t work", "body": "<p>I met a very strange problem. The random function of <code>armadillo</code> doesn't work. It only return zeros. For example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;armadillo&gt;\n\nusing namespace std;\nusing namespace arma;\n\nint\nmain(int argc, char **argv) {\n    // 2D field of matrices; 3D fields are also supported\n    field&lt;mat&gt; F(4, 2);\n\n    for (uword col = 0; col &lt; F.n_cols; ++col)\n        for (uword row = 0; row &lt; F.n_rows; ++row) {\n            F(row, col) = randu &lt; mat &gt; (2, 3);  // each element in field&lt;mat&gt; is a matrix\n        }\n\n    F.print(\"F:\");\n\n    return 0;\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<p>F:</p>\n\n<pre><code>[field column 0]\n        0        0        0\n        0        0        0\n\n        0        0        0\n        0        0        0\n\n        0        0        0\n        0        0        0\n\n        0        0        0\n        0        0        0\n\n\n[field column 1]\n        0        0        0\n        0        0        0\n\n        0        0        0\n        0        0        0\n\n        0        0        0\n        0        0        0\n\n        0        0        0\n        0        0        0\n</code></pre>\n\n<p>Any idea why this happens?</p>\n"}, {"tags": ["c++", "lambda"], "comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1467213803, "post_id": 38103765, "comment_id": 63641410, "body": "It&#39;s not clear what your question is, but assuming it&#39;s that you want to be able to pass any callable object to a function, then use <code>std::function&lt; returnType (param, types) &gt;</code>."}, {"owner": {"reputation": 4113, "user_id": 2126582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tVrzW.png?s=128&g=1", "display_name": "AnatolyS", "link": "https://stackoverflow.com/users/2126582/anatolys"}, "edited": false, "score": 0, "creation_date": 1467213854, "post_id": 38103765, "comment_id": 63641462, "body": "use std::function&lt;double(double*)&gt; as parameter instead of double(<i>phi)(double</i>)"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1467214226, "post_id": 38103765, "comment_id": 63641748, "body": "Also, &quot;inline function&quot; is either a misnomer or overly optimistic, since there is no way of enforcing the compiler to <code>inline</code> a function. It might inline a lambda, but it might not. Optimisation and (if using multiple TUs) especially LTO will increase your chances a lot, though."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1467215030, "post_id": 38103765, "comment_id": 63642278, "body": "...that sounds overly pessimistic, as I see <code>g++</code> inlining all manner of things in fantastic ways, and I&#39;m sure the other big compilers are the same. All I meant was that there&#39;s no way to <i>100% guarantee</i> inlining. (Since, as mentioned frequently here, the <code>inline</code> keyword is unrelated.)"}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1467231222, "post_id": 38103765, "comment_id": 63652005, "body": "If you want the speed of an inlined function, it needs to be statically known and there&#39;s no way to do that if the function is only determined dynamically. Perhaps you could use templating with a function as an argument, since that allows some polymorphism but also gives you the speed of inlined functions."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1467266445, "post_id": 38103765, "comment_id": 63663069, "body": "lambdas with captures aren&#39;t compatible with ordinary function pointers, for the same reason that non-static member functions aren&#39;t compatible with ordinary function pointers.  Use <code>std::function</code>."}], "answers": [{"tags": [], "owner": {"reputation": 29, "user_id": 3339257, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f4421c2ddb6a1674c8ca42bdb134c824?s=128&d=identicon&r=PG&f=1", "display_name": "JMS1", "link": "https://stackoverflow.com/users/3339257/jms1"}, "is_accepted": false, "score": 1, "last_activity_date": 1467284534, "creation_date": 1467284534, "answer_id": 38121234, "question_id": 38103765, "link": "https://stackoverflow.com/questions/38103765/c-writing-inline-function-to-pass-as-argument/38121234#38121234", "title": "C++ Writing inline function to pass as argument", "body": "<p>After poking around for a couple hours I found this:</p>\n\n<pre><code>std::function&lt;double(double*)&gt; phi = [&amp;generator] ( double * heatExchangerTemps ) -&gt; double\n{ /*do someting*/ };\nTwiddle twiddle(variablesSize,phi,minMax,1000000);\n</code></pre>\n\n<p>with constructor header:</p>\n\n<pre><code>Twiddle(int size, std::function&lt;double(double*)&gt; phi, Range minMax[], double maxResolution);\n</code></pre>\n\n<p>Not sure if it's the best answer, but it seems to work well.</p>\n\n<p>basically my lambda function conforms to the type <code>std::function&lt;double(double*)&gt;</code> which allows me to keep the lambda capture capability while allowing my constructor to understand what it's receiving.</p>\n"}], "owner": {"reputation": 29, "user_id": 3339257, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f4421c2ddb6a1674c8ca42bdb134c824?s=128&d=identicon&r=PG&f=1", "display_name": "JMS1", "link": "https://stackoverflow.com/users/3339257/jms1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467284534, "creation_date": 1467213532, "last_edit_date": 1467266521, "question_id": 38103765, "link": "https://stackoverflow.com/questions/38103765/c-writing-inline-function-to-pass-as-argument", "title": "C++ Writing inline function to pass as argument", "body": "<p>I'm writing a set of learning algorithms for a personal library. Learning Algorithms need two things, an input space to explore, and a way to compare one solution against another. Defining an input space is the most basic data transfer, however I'm having difficulty with passing it the rating function.</p>\n\n<p><strong>Currently my problematic code looks like this:</strong></p>\n\n<pre><code>RankineGenerator generator(tempHotWater,tempColdWater);\n\nint variablesSize = 2;\nRange minMaxVaporizer = { tempColdWater,tempHotWater };\nRange minMaxCondenser = { tempColdWater,tempHotWater };\nRange minMax[] = {minMaxVaporizer, minMaxCondenser};\n\nauto phi = [&amp;generator] ( double * heatExchangerTemps ) -&gt; double\n{\ngenerator.updateHeatExchangeTemps(heatExchangerTemps[0], heatExchangerTemps[1]);\ngenerator.runSim();\nreturn generator.getSpecificWork()/(generator.getColdWaterRelativeMass()+generator.getHotWaterRelativeMass());\n};\n\nTwiddle twiddle(variablesSize,phi,minMax,0.001);\n</code></pre>\n\n<p><strong>And my constructor header looks like:</strong></p>\n\n<pre><code>Twiddle(int size, double(*phi)(double*), Range minMax[], double minRatioDeltaPhi);\n</code></pre>\n\n<p>Where the \"phi\" lambda function is what I'm trying to pass to to the algorithm \"twiddle\"</p>\n\n<p>It doesn't necessarily need to be a lambda function, any inline function will do.</p>\n\n<p><strong>Points of concern:</strong></p>\n\n<p>Learning algorithms tend to be computation intensive so a fast solution is preferable to an easy solution.</p>\n\n<p>the function to be passed needs some way of accessing some of the information from the scope it was declared in.</p>\n\n<p>The learning algorithm needs to be universal. Passing it problem specific data isn't an option, I need to be able to plug and play with any problem. Ideally the constructor should take a form like:</p>\n\n<pre><code>constructor( nVars, ratingFunction(vars[nVars]), ranges[nVars], minImprovementSpeed)\n</code></pre>\n\n<p><strong>Update:</strong>\nIt seems I've caused some confusion. My apologies.</p>\n\n<p>Firstly I'm using the term <em>inline</em> meaning a function written in the middle of a program rather than as an independent entity. Not necessarily having anything to do with the keyword of the same name.</p>\n\n<p>Secondly what I'm trying to do is pass a function with access to some local data. For example this:</p>\n\n<pre><code>double(*phi)(double*) = [](double* heatExchangerTemps) { /*do something*/ };\n\nTwiddle twiddle(variablesSize,phi,minMax,.001);\n</code></pre>\n\n<p>with construction header:</p>\n\n<pre><code>Twiddle(int size, double (*phi)(double*) , Range minMax[], double minRatioDeltaPhi);\n</code></pre>\n\n<p>will compile but gives no access to the object \"generator\". However, when I try to capture the \"generator\" object in the lambda function:</p>\n\n<pre><code>double(*phi)(double*) = [&amp;generator](double* heatExchangerTemps) { /*do something*/ };\n</code></pre>\n\n<p>or</p>\n\n<pre><code>auto phi = [&amp;generator] ( double * heatExchangerTemps ) -&gt; double { /*do something*/ };\n</code></pre>\n\n<p>I get an error.</p>\n\n<p>I could do this:</p>\n\n<pre><code>double(*phi)(double*) = [](double* myArray)\n{\n    Generator generator(/*stuff*/);\n    // do something\n};\n</code></pre>\n\n<p>But then a new object of class \"Generator\" is created every time the function is called. Considering this function may be called 1000+ times that's not ideal. Plus now the \"Twiddle\" algorithm needs info specific to the Generator constructor which defeats the whole purpose of having a universal algorithm.</p>\n\n<p>Ideally I need to be able access a local object (in this case generator) inside the function, and pass the function as a generic argument for a constructor.</p>\n\n<p>Also it doesn't necessarily have to be a lambda function, that's just what first came to mind.</p>\n"}, {"tags": ["c++", "c++11", "visual-c++", "constexpr"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1467213437, "post_id": 38103578, "comment_id": 63641155, "body": "Maybe <code>std::array</code> doesn&#39;t have a constexpr copy constructor?"}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 2, "creation_date": 1467213637, "post_id": 38103578, "comment_id": 63641293, "body": "Remove the destructor&#39;s definition"}, {"owner": {"reputation": 3343, "user_id": 2718864, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3qOW3.png?s=128&g=1", "display_name": "nasser-sh", "link": "https://stackoverflow.com/users/2718864/nasser-sh"}, "edited": false, "score": 2, "creation_date": 1467213810, "post_id": 38103578, "comment_id": 63641423, "body": "As a sidenote, there is no need to store <code>numrows_</code> and <code>numcols_</code> as member variables. Since you have the values as template parameters already, just return those."}, {"owner": {"reputation": 3758, "user_id": 826938, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1f5fa15f4142e9ec9ade8ea8142a030a?s=128&d=identicon&r=PG", "display_name": "BigONotation", "link": "https://stackoverflow.com/users/826938/bigonotation"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 1, "creation_date": 1467213965, "post_id": 38103578, "comment_id": 63641551, "body": "@Piotr Skotnicki yes that did the trick. Thanks! If you post this as an answer I will accept it. But I don&#39;t understand why defining a destructor triggers the error?"}, {"owner": {"reputation": 3758, "user_id": 826938, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1f5fa15f4142e9ec9ade8ea8142a030a?s=128&d=identicon&r=PG", "display_name": "BigONotation", "link": "https://stackoverflow.com/users/826938/bigonotation"}, "reply_to_user": {"reputation": 3343, "user_id": 2718864, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3qOW3.png?s=128&g=1", "display_name": "nasser-sh", "link": "https://stackoverflow.com/users/2718864/nasser-sh"}, "edited": false, "score": 0, "creation_date": 1467232743, "post_id": 38103578, "comment_id": 63652753, "body": "@nasser-sh as suggested I cleaned up the code by removing unnecessary member variables for row and column size"}], "answers": [{"comments": [{"owner": {"reputation": 3758, "user_id": 826938, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1f5fa15f4142e9ec9ade8ea8142a030a?s=128&d=identicon&r=PG", "display_name": "BigONotation", "link": "https://stackoverflow.com/users/826938/bigonotation"}, "edited": false, "score": 0, "creation_date": 1467215905, "post_id": 38104223, "comment_id": 63642956, "body": "Thanks a lot for all the clarifications!"}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 7, "creation_date": 1467229659, "post_id": 38104223, "comment_id": 63651209, "body": "I like the <i>or</i>. :-)"}], "tags": [], "owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "is_accepted": true, "score": 14, "last_activity_date": 1467215039, "last_edit_date": 1467215039, "creation_date": 1467214682, "answer_id": 38104223, "question_id": 38103578, "link": "https://stackoverflow.com/questions/38103578/why-does-the-compiler-complain-about-this-not-being-a-constexpr/38104223#38104223", "title": "Why does the compiler complain about this not being a constexpr?", "body": "<p><a href=\"http://eel.is/c++draft/basic.types#10\">[basic.types]/p10</a> states that:</p>\n\n<blockquote>\n  <p>A type is a <em>literal type</em> if it is:</p>\n  \n  <ul>\n  <li><p>possibly cv-qualified <code>void</code>; or</p></li>\n  <li><p>a scalar type; or</p></li>\n  <li><p>a reference type; or</p></li>\n  <li><p>an array of literal type; or</p></li>\n  <li><p>a possibly cv-qualified class type (Clause <a href=\"http://eel.is/c++draft/class\">[class]</a>) that has all of the following properties:</p>\n  \n  <ul>\n  <li><p>it has a trivial destructor,</p></li>\n  <li><p>it is either a closure type (<a href=\"http://eel.is/c++draft/expr.prim.lambda\">[expr.prim.lambda]</a>), an aggregate type (<a href=\"http://eel.is/c++draft/dcl.init.aggr\">[dcl.init.aggr]</a>), or has at least one constexpr constructor or constructor template (possibly inherited (<a href=\"http://eel.is/c++draft/namespace.udecl\">[namespace.udecl]</a>) from a base class) that is not a copy or move constructor,</p></li>\n  <li><p>if it is a union, at least one of its non-static data members is of non-volatile literal type, and</p></li>\n  <li><p>if it is not a union, all of its non-static data members and base classes are of non-volatile literal types.</p></li>\n  </ul></li>\n  </ul>\n</blockquote>\n\n<p>where <a href=\"http://eel.is/c++draft/class.dtor#5\">[class.dtor]/p5</a> says that:</p>\n\n<blockquote>\n  <p>A destructor is trivial if it is not user-provided and if:</p>\n  \n  <p><sup>(5.4)</sup> \u2014 the destructor is not <code>virtual</code>,</p>\n  \n  <p><sup>(5.5)</sup> \u2014 all of the direct base classes of its class have trivial destructors, and</p>\n  \n  <p><sup>(5.6)</sup> \u2014 for all of the non-static data members of its class that are of class type (or array thereof), each such\n  class has a trivial destructor.</p>\n  \n  <p>Otherwise, the destructor is <em>non-trivial</em>.</p>\n</blockquote>\n\n<p>In other words, to declare a <code>constexpr</code> instance of <code>Matrix</code>, it must be a literal type, and to be a literal type, its destructor must be either <code>default</code>ed, or removed altogether, so:</p>\n\n<pre><code>~Matrix() = default;\n</code></pre>\n\n<p>or:</p>\n\n<pre> </pre>\n"}], "owner": {"reputation": 3758, "user_id": 826938, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1f5fa15f4142e9ec9ade8ea8142a030a?s=128&d=identicon&r=PG", "display_name": "BigONotation", "link": "https://stackoverflow.com/users/826938/bigonotation"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2792, "favorite_count": 2, "accepted_answer_id": 38104223, "answer_count": 1, "score": 9, "last_activity_date": 1467233631, "creation_date": 1467213029, "last_edit_date": 1467233631, "question_id": 38103578, "link": "https://stackoverflow.com/questions/38103578/why-does-the-compiler-complain-about-this-not-being-a-constexpr", "title": "Why does the compiler complain about this not being a constexpr?", "body": "<p>I am trying to learn a bit more on how to use C++ constant expressions in practice and created the following Matrix class template for illustration purposes:</p>\n\n<pre><code>#include &lt;array&gt;\n\ntemplate &lt;typename T, int numrows, int numcols&gt;\nclass Matrix{\npublic:\n    using value_type = T;\n    constexpr Matrix() : {}\n   ~Matrix(){}\n\n    constexpr Matrix(const std::array&lt;T, numrows*numcols&gt;&amp; a) :\n        values_(a){}\n\n    constexpr Matrix(const Matrix&amp; other) :\n        values_(other.values_){\n\n    }\n\n    constexpr const T&amp; operator()(int row, int col) const {\n        return values_[row*numcols+col];\n    }\n\n    T&amp; operator()(int row, int col){\n        return values_[row*numcols+col];\n    }\n\n    constexpr int rows() const {\n        return numrows;\n    }\n\n    constexpr int columns() const {\n        return numcols;\n    }\n\n\nprivate:\n    std::array&lt;T, numrows*numcols&gt; values_{};\n};\n</code></pre>\n\n<p>The idea is to have a simple Matrix class, which I can use for small matrices to evaluate Matrix expressions at compile time (note that I have not yet implemented the usual Matrix operators for addition and multiplication).</p>\n\n<p>When I try to initialize a Matrix instance as follows:</p>\n\n<pre><code>constexpr std::array&lt;double, 4&gt; a = {1,1,1,1};\nconstexpr Matrix&lt;double, 2, 2&gt; m(a);\n</code></pre>\n\n<p>I am getting the following error from the compiler (MS Visual C++ 14):</p>\n\n<pre><code>error: C2127: 'm': illegal initialization of 'constexpr' entity with a non-constant expression\n</code></pre>\n\n<p>Note sure what I am doing wrong...any help to make this work would be greatly appreciated! </p>\n"}, {"tags": ["c++", "vector", "std"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1467212712, "post_id": 38103406, "comment_id": 63640655, "body": "<a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/vector</a>"}, {"owner": {"reputation": 91, "user_id": 8263383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7x9Vy.jpg?s=128&g=1", "display_name": "VictorBian", "link": "https://stackoverflow.com/users/8263383/victorbian"}, "edited": false, "score": 0, "creation_date": 1618197643, "post_id": 38103406, "comment_id": 118520352, "body": "Note that <code>vector&lt;bool&gt;</code> is a special case, you cannot assume its size to be <code>sizeof(bool) * abc.capacity()</code>. See  <a href=\"https://en.cppreference.com/w/cpp/container/vector_bool\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/vector_bool</a>"}], "answers": [{"comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 4, "creation_date": 1467212906, "post_id": 38103463, "comment_id": 63640773, "body": "Note to reader that the size returned by <code>capazcity</code> (and by <code>size</code>) is in number of elements, not in bytes if memory."}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 1, "creation_date": 1467213096, "post_id": 38103463, "comment_id": 63640901, "body": "or more generally <code>sizeof(decltype(abc.front()) * abc.capacity)</code>"}, {"owner": {"reputation": 11532, "user_id": 5129715, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/320498457784a3110f3e256745a9a927?s=128&d=identicon&r=PG&f=1", "display_name": "mksteve", "link": "https://stackoverflow.com/users/5129715/mksteve"}, "edited": false, "score": 0, "creation_date": 1467213162, "post_id": 38103463, "comment_id": 63640943, "body": "Does the size of an object include the padding?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 11532, "user_id": 5129715, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/320498457784a3110f3e256745a9a927?s=128&d=identicon&r=PG&f=1", "display_name": "mksteve", "link": "https://stackoverflow.com/users/5129715/mksteve"}, "edited": false, "score": 0, "creation_date": 1467213217, "post_id": 38103463, "comment_id": 63640985, "body": "@mksteve yes. It does."}], "tags": [], "owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "is_accepted": true, "score": 5, "last_activity_date": 1467213779, "last_edit_date": 1467213779, "creation_date": 1467212737, "answer_id": 38103463, "question_id": 38103406, "link": "https://stackoverflow.com/questions/38103406/how-can-i-know-the-allocated-memory-size-of-a-stdvector/38103463#38103463", "title": "How can I know the allocated memory size of a std::vector?", "body": "<p>You use the member function <a href=\"http://en.cppreference.com/w/cpp/container/vector/capacity\" rel=\"nofollow\"><code>capacity()</code></a> to obtain the allocated capacity</p>\n\n<pre><code>std::vector&lt;int&gt; abc;\nabc.reserve(7);\nstd::cout &lt;&lt; abc.capacity() &lt;&lt; std::endl;\n</code></pre>\n\n<p>To get the memory allocated by in bytes, You can do:</p>\n\n<pre><code>sizeof(int) * abc.capacity();\n</code></pre>\n\n<p>This is given, that you know your <code>value_type</code> is <code>int</code>. If you don't</p>\n\n<pre><code>sizeof(decltype(abc.back())) * abc.capacity();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 0, "last_activity_date": 1467212803, "creation_date": 1467212803, "answer_id": 38103488, "question_id": 38103406, "link": "https://stackoverflow.com/questions/38103406/how-can-i-know-the-allocated-memory-size-of-a-stdvector/38103488#38103488", "title": "How can I know the allocated memory size of a std::vector?", "body": "<p>Use the <code>capacity</code> member function - <a href=\"http://en.cppreference.com/w/cpp/container/vector/capacity\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/container/vector/capacity</a></p>\n"}, {"comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1467213363, "post_id": 38103497, "comment_id": 63641097, "body": "Why suggest the second method? It&#39;s more complicated, offers no advantage to the first, and I think it&#39;s technically UB if the array does not contain at least 2 elements. The first is nice."}, {"owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "edited": false, "score": 0, "creation_date": 1467214325, "post_id": 38103497, "comment_id": 63641817, "body": "You can&#39;t depend on sizeof(abc[0]) == sizeof(T).  Operator [] can return a proxy object.  You&#39;d be better off with <code>value_type</code>."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "edited": false, "score": 1, "creation_date": 1467214733, "post_id": 38103497, "comment_id": 63642085, "body": "@CrazyEddie: In the case which you are probably thinking of, <code>vector&lt;bool&gt;</code>, you can&#39;t count on <code>sizeof(value_type) * capacity()</code> being the actual amount of memory allocated either."}, {"owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1467214905, "post_id": 38103497, "comment_id": 63642188, "body": "@BenjaminLindley - No.  A vector of any type can return a proxy if Allocator::reference is such."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "edited": false, "score": 0, "creation_date": 1467215364, "post_id": 38103497, "comment_id": 63642563, "body": "@CrazyEddie: Yes, of course. But hopefully homemade libraries don&#39;t follow the horrible example of <code>vector&lt;bool&gt;</code>. Either way, <code>sizeof(value_type)</code> doesn&#39;t help you here."}], "tags": [], "owner": {"reputation": 11532, "user_id": 5129715, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/320498457784a3110f3e256745a9a927?s=128&d=identicon&r=PG&f=1", "display_name": "mksteve", "link": "https://stackoverflow.com/users/5129715/mksteve"}, "is_accepted": false, "score": 0, "last_activity_date": 1467212822, "creation_date": 1467212822, "answer_id": 38103497, "question_id": 38103406, "link": "https://stackoverflow.com/questions/38103406/how-can-i-know-the-allocated-memory-size-of-a-stdvector/38103497#38103497", "title": "How can I know the allocated memory size of a std::vector?", "body": "<p>There are strong statements on the memory being contiguous, and so the size is </p>\n\n<pre><code>sizeof( abc[0] ) * abc.capacity();\n</code></pre>\n\n<p>or</p>\n\n<pre><code>(  (char*)(&amp;abc[1]) - (char*)(&amp;abc[0] ) ) * abc.capacity();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1566, "user_id": 4847311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90fbb34e156577e5c3a5b3b3d1b30f83?s=128&d=identicon&r=PG", "display_name": "Sven Nilsson", "link": "https://stackoverflow.com/users/4847311/sven-nilsson"}, "is_accepted": false, "score": 0, "last_activity_date": 1467213424, "creation_date": 1467213424, "answer_id": 38103724, "question_id": 38103406, "link": "https://stackoverflow.com/questions/38103406/how-can-i-know-the-allocated-memory-size-of-a-stdvector/38103724#38103724", "title": "How can I know the allocated memory size of a std::vector?", "body": "<p>Since std::vector can store complex objects (such as std::string), which have their internal memory management and may allocate additional memory, determining the total memory usage can be hard.</p>\n\n<p>For a vector containing simple objects such as <strong>int</strong>, the suggested solution using <strong>capacity</strong> and <strong>sizeof</strong> will work though.</p>\n"}, {"tags": [], "owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "is_accepted": false, "score": 1, "last_activity_date": 1467216024, "creation_date": 1467216024, "answer_id": 38104719, "question_id": 38103406, "link": "https://stackoverflow.com/questions/38103406/how-can-i-know-the-allocated-memory-size-of-a-stdvector/38104719#38104719", "title": "How can I know the allocated memory size of a std::vector?", "body": "<p>The real answer is that you can't.  Others have suggested ways that will often work, but you can't depend on <code>capacity</code> reflecting in any way the actual memory allocated.</p>\n\n<p>For one thing, the heap will often allocate more memory than was requested.  This has to do with optimizations against fragmenting, etc...  <code>vector</code> has no way of knowing how much memory was actually allocated, only what it requested.</p>\n\n<p>So <code>capacity</code> at best gives you a very rough estimate.</p>\n"}], "owner": {"reputation": 9429, "user_id": 1264018, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0338476eea2e564d77246b7234773e1?s=128&d=identicon&r=PG&f=1", "display_name": "feelfree", "link": "https://stackoverflow.com/users/1264018/feelfree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2082, "favorite_count": 0, "accepted_answer_id": 38103463, "answer_count": 5, "score": 0, "last_activity_date": 1467216024, "creation_date": 1467212601, "question_id": 38103406, "link": "https://stackoverflow.com/questions/38103406/how-can-i-know-the-allocated-memory-size-of-a-stdvector", "title": "How can I know the allocated memory size of a std::vector?", "body": "<p>I understand that we can use <code>size()</code> function to obtain the vector size, for example:</p>\n\n<pre><code>   std::vector&lt;in&gt; abc;\n   abc.resize(3);\n   abc.size();\n</code></pre>\n\n<p>The my question is how can I know the memory size of a vector? Take an example:</p>\n\n<pre><code>std::vector&lt;int&gt; abc;\nabc.reserve(7);\n//the size of memory that has been allocated for abc\n</code></pre>\n"}, {"tags": ["c++", "qt", "serial-port"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6494855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ee18196f5157377f14835befb0e4c1f?s=128&d=identicon&r=PG&f=1", "display_name": "jxb458", "link": "https://stackoverflow.com/users/6494855/jxb458"}, "edited": false, "score": 0, "creation_date": 1467368000, "post_id": 38104235, "comment_id": 63715175, "body": "Thanks this was a really helpful response!"}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1467214728, "creation_date": 1467214728, "answer_id": 38104235, "question_id": 38103405, "link": "https://stackoverflow.com/questions/38103405/readall-from-qserialport-doesnt-include-the-last-response-sent/38104235#38104235", "title": "readAll() from QSerialPort doesn&#39;t include the last response sent", "body": "<p>You might be calling <code>readAll</code> before the response is available. You should hook your code to the <code>readyRead</code> signal to be notified each time new chunk of data is ready to be read. Keep in mind that <code>readyRead</code> can be emitted with any number of bytes available to read - at a minimum, it'll be just one byte. You can't expect the data to be chunked/blocked in any particular way, since the serial port doesn't act as a message-based communication device. Your receiver code must be able to piece the data together from small chunks and act accordingly when it got all the data it needs.</p>\n\n<p>For example, suppose that the device responses have a fixed, known length. You'd only want to react when a complete response has arrived. E.g.:</p>\n\n<pre><code>class Protocol : public QObject {\n   Q_OBJECT\n   QBasicTimer m_timer;\n   QPointer&lt;QIODevice&gt; m_port;\n   int m_responseLength = 0;\n   int m_read = 0;\n   void timerEvent(QTimerEvent * ev) override {\n      if (ev-&gt;timerId() != m_timer.timerId()) return;\n      m_timer.stop();\n      emit timedOut();\n   }\n   void onData() {\n      m_read += m_port-&gt;bytesAvailable();\n      if (m_read &lt; m_responseLength)\n         return;\n      m_timer.stop();\n      emit gotResponse(m_port-&gt;read(m_responseLength));\n      m_read -= m_responseLength;\n      m_responseLength = 0;\n   }\npublic:\n   Q_SIGNAL void gotResponse(const QByteArray &amp;);\n   Q_SIGNAL void timedOut();\n   Q_SLOT void sendCommand(const QByteArray &amp; cmd, int responseLength, int cmdTimeout) {\n      m_responseLength = responseLength;\n      m_port-&gt;write(cmd);\n      m_timer.start(cmdTimeout, this);\n   }\n   explicit Protocol(QIODevice * port, QObject * parent = nullptr) :\n      QObject(parent), m_port(port) {\n      connect(m_port, &amp;QIODevice::readyRead, this, &amp;Protocol::onData);\n   }\n};\n\n...\nProtocol protocol(0,0);\nprotocol.sendCommand({\"foo\"}, 10, 500);\nQMetaObject::Connection cmd1;\ncmd1 = QObject::connect(&amp;protocol, &amp;Protocol::gotResponse, [&amp;]{\n   QObject::disconnect(cmd1);\n   qDebug() &lt;&lt; \"got response to foo\";\n});\nQObject::connect(&amp;protocol, &amp;Protocol::timedOut, []{ qDebug() &lt;&lt; \"timed out :(\"; });\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6494855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ee18196f5157377f14835befb0e4c1f?s=128&d=identicon&r=PG&f=1", "display_name": "jxb458", "link": "https://stackoverflow.com/users/6494855/jxb458"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 447, "favorite_count": 0, "accepted_answer_id": 38104235, "answer_count": 1, "score": 0, "last_activity_date": 1467219640, "creation_date": 1467212594, "last_edit_date": 1467219640, "question_id": 38103405, "link": "https://stackoverflow.com/questions/38103405/readall-from-qserialport-doesnt-include-the-last-response-sent", "title": "readAll() from QSerialPort doesn&#39;t include the last response sent", "body": "<p>I'm using Qt to control a serial device. If I send a command to my serial device, I do something like <code>serial-&gt;write(\"command \\r\\n\")</code>. I made a push button which changes the text inside a plain text widget to the response of the serial port. To get the response of the serial port, I'm using <code>serial-&gt;readAll()</code>. The problem is it shows the 2nd to last response rather than the one I was expecting. Does Qt have some sort of buffer which is keeping hold of this response?</p>\n\n<p><strong>EDIT</strong>\nI botched it by using recursion and compared the strings recieved</p>\n"}, {"tags": ["c++", "multithreading", "qt", "qthread"], "comments": [{"owner": {"reputation": 10619, "user_id": 345027, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/de94a2d703fa12904d400de1fc86c251?s=128&d=identicon&r=PG", "display_name": "king_nak", "link": "https://stackoverflow.com/users/345027/king-nak"}, "edited": false, "score": 0, "creation_date": 1467213535, "post_id": 38103323, "comment_id": 63641220, "body": "Simply connecting the <i>slot</i> <code>sendRequest()</code> to a singal should work. What are your specific problems?"}, {"owner": {"reputation": 277, "user_id": 5279923, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/1069277833091079/picture?type=large", "display_name": "Basti An", "link": "https://stackoverflow.com/users/5279923/basti-an"}, "reply_to_user": {"reputation": 10619, "user_id": 345027, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/de94a2d703fa12904d400de1fc86c251?s=128&d=identicon&r=PG", "display_name": "king_nak", "link": "https://stackoverflow.com/users/345027/king-nak"}, "edited": false, "score": 0, "creation_date": 1467219730, "post_id": 38103323, "comment_id": 63645349, "body": "my problem is that didn&#39;t know that qthread::run starts a event loop that doenst burn cpu. but now I know it :)"}], "answers": [{"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1467214859, "creation_date": 1467214859, "answer_id": 38104291, "question_id": 38103323, "link": "https://stackoverflow.com/questions/38103323/qthread-sleep-till-event/38104291#38104291", "title": "Qthread - sleep till event", "body": "<p>The thread is already sleeping and not wasting any CPU time when there's no work for it to do. You don't need to do anything special to get that behavior. It's how the default implementation of <code>QThread::run</code> behaves: it starts an event loop. When the event loop has no events to handle, it sleeps, waiting for more events.</p>\n"}], "owner": {"reputation": 277, "user_id": 5279923, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/1069277833091079/picture?type=large", "display_name": "Basti An", "link": "https://stackoverflow.com/users/5279923/basti-an"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "accepted_answer_id": 38104291, "answer_count": 1, "score": -1, "last_activity_date": 1467214859, "creation_date": 1467212403, "question_id": 38103323, "link": "https://stackoverflow.com/questions/38103323/qthread-sleep-till-event", "title": "Qthread - sleep till event", "body": "<p>I want a thread that sleeps as long as a signal is triggered in my programm.\nI created a Qthread and added my class to it</p>\n\n<pre><code>QThread* serialthread = new QThread;\nSerial*  serial = new Serial();\nserial-&gt;moveToThread(serialthread);\nconnect(serial, SIGNAL(error(QString)), this, SLOT(errorString(QString)));\nconnect(serialthread, SIGNAL(started()), serial, SLOT(process));\nconnect(serial, SIGNAL(finished()), serialthread, SLOT(quit()));\nconnect(serial, SIGNAL(finished()), serial, SLOT(deleteLater()));\nconnect(serialthread, SIGNAL(finished()), serialthread, SLOT(deleteLater()));\nserialthread-&gt;start();\n</code></pre>\n\n<p>The function serial::sendRequest() of my class should be triggered by a signal.\nThe other time I want the thread so sleep without wasting CPU-Time.</p>\n"}, {"tags": ["c++", "arrays", "sorting", "segmentation-fault", "mergesort"], "comments": [{"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "edited": false, "score": 0, "creation_date": 1467212393, "post_id": 38103251, "comment_id": 63640419, "body": "Kindly post what the debugger says when segfault occurs. Also, if you&#39;re on Linux, ./strace is your friend."}, {"owner": {"reputation": 4784, "user_id": 3848666, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aHqMh.png?s=128&g=1", "display_name": "Ken Van Hoeylandt", "link": "https://stackoverflow.com/users/3848666/ken-van-hoeylandt"}, "edited": false, "score": 0, "creation_date": 1467212400, "post_id": 38103251, "comment_id": 63640427, "body": "&quot;I&#39;ve been trying to debug it but to no avail.&quot; surely you must be able to find out at what point it crashes?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1467212671, "post_id": 38103251, "comment_id": 63640624, "body": "Start by posting a stacktrace from where it crashes - use <code>bt</code> in gdb to get that."}, {"owner": {"reputation": 1190, "user_id": 4070000, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/4c671fa7002be8d180675875a8c9148e?s=128&d=identicon&r=PG&f=1", "display_name": "orbitcowboy", "link": "https://stackoverflow.com/users/4070000/orbitcowboy"}, "edited": false, "score": 0, "creation_date": 1467217938, "post_id": 38103251, "comment_id": 63644301, "body": "Have you tried to use a static code analysis tool? These tools simply scanning your source code and find potential bugs in code. A good start could be cppcheck."}], "answers": [{"tags": [], "owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "is_accepted": true, "score": 3, "last_activity_date": 1467213013, "last_edit_date": 1467213013, "creation_date": 1467212617, "answer_id": 38103411, "question_id": 38103251, "link": "https://stackoverflow.com/questions/38103251/im-having-trouble-finding-the-segmentation-fault/38103411#38103411", "title": "I&#39;m having trouble finding the segmentation fault?", "body": "<p>Your <code>while</code> condition seems wrong.  You are looping as long as one of the two containers are not empty and then subsequently calling the <code>front()</code> member function on them.  You should probably be looping till both of them have elements in them, i.e. use <code>&amp;&amp;</code> on line 21 instead of <code>||</code>.  </p>\n\n<p>So this line </p>\n\n<pre><code>while((!buffer1.empty()) || (!buffer2.empty())) // change to &amp;&amp;\n</code></pre>\n\n<p>I am not sure if that breaks logical correctness of your code but that was the cause of the segfault (it was coming from line 25)</p>\n"}, {"comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 460, "user_id": 5508323, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Y5vooWQduas/AAAAAAAAAAI/AAAAAAAAAMg/7AzlzavOs9Q/photo.jpg?sz=128", "display_name": "Anshuman Chhabra", "link": "https://stackoverflow.com/users/5508323/anshuman-chhabra"}, "edited": false, "score": 0, "creation_date": 1467213381, "post_id": 38103462, "comment_id": 63641112, "body": "@AnshumanChhabra Bah, no problem. But try to use your debugger next time. It&#39;s loaded with helpful information."}], "tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": 1, "last_activity_date": 1467215707, "last_edit_date": 1467215707, "creation_date": 1467212736, "answer_id": 38103462, "question_id": 38103251, "link": "https://stackoverflow.com/questions/38103251/im-having-trouble-finding-the-segmentation-fault/38103462#38103462", "title": "I&#39;m having trouble finding the segmentation fault?", "body": "<p>The segfault happens on the line: <code>if (buffer1.front() &lt; buffer2.front())</code></p>\n\n<p>A <code>queue</code> is typically just implemented as a wrapper around a <code>deque</code> or <code>list</code> you can find a more descriptive caution against calling <code>front</code> in their methods that you can in <code>queue</code>'s method:</p>\n\n<blockquote>\n  <p>Calling <code>front</code> on an empty container is undefined<sup><a href=\"http://en.cppreference.com/w/cpp/container/deque/front\" rel=\"nofollow noreferrer\">[1]</a><a href=\"http://en.cppreference.com/w/cpp/container/list/front\" rel=\"nofollow noreferrer\">[2]</a></sup></p>\n</blockquote>\n\n<p>If you're running under Debug in Visual Studio, when you get a segfault it will pop up this dialog, and you can hit \"Retry\" to debug with all state preserved:</p>\n\n<p><a href=\"https://i.stack.imgur.com/hYavo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hYavo.png\" alt=\"enter image description here\"></a></p>\n\n<p>You're problem is on this line though:</p>\n\n<pre><code>while ((!buffer1.empty()) || (!buffer2.empty()))\n</code></pre>\n\n<p>That means the <code>while</code>-loop is executed if <strong>either</strong> <code>buffer1</code> <strong>or</strong> <code>buffer2</code> is non-empty. You need to change that condition to:</p>\n\n<pre><code>while (!empty(buffer1) &amp;&amp; !empty(buffer2))\n</code></pre>\n"}], "owner": {"reputation": 460, "user_id": 5508323, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Y5vooWQduas/AAAAAAAAAAI/AAAAAAAAAMg/7AzlzavOs9Q/photo.jpg?sz=128", "display_name": "Anshuman Chhabra", "link": "https://stackoverflow.com/users/5508323/anshuman-chhabra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 0, "accepted_answer_id": 38103411, "answer_count": 2, "score": 1, "last_activity_date": 1467215707, "creation_date": 1467212222, "last_edit_date": 1467212917, "question_id": 38103251, "link": "https://stackoverflow.com/questions/38103251/im-having-trouble-finding-the-segmentation-fault", "title": "I&#39;m having trouble finding the segmentation fault?", "body": "<p>I've written a program to perform mergesort on an array in C++. The program compiles fine, but when I run it, it says - \"Segmentation fault (core dumped)\" and quits. I've been trying to debug it but to no avail. I'm sure I've misused pointers somewhere (hence the segmentation fault) but can't place where. Could someone help me out? Thanks.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;queue&gt;\n#include&lt;algorithm&gt;\n#include&lt;math.h&gt;\nusing namespace std;\n\nvoid merge(int a[],int start, int middle, int end)\n{\n  int i;\n  queue&lt;int&gt; buffer1;\n  queue&lt;int&gt; buffer2;\n\n  for(i = start; i&lt;=middle; i++)\n    buffer1.push(a[i]);\n\n  for(i = middle+1; i&lt;=end; i++)\n    buffer2.push(a[i]);\n\n  i = start;\n\n  while((!buffer1.empty()) || (!buffer2.empty()))\n    {\n      if(buffer1.front() &lt; buffer2.front())\n    {\n      a[i] = buffer1.front();\n      buffer1.pop();\n      i++;\n    }\n\n      else\n    {\n      a[i] = buffer2.front();\n      buffer2.pop();\n      i++;\n    }\n    }\n\n  while(!buffer1.empty())\n    {\n      a[i] = buffer1.front();\n      buffer1.pop();\n      i++;\n    }\n\n  while(!buffer2.empty())\n    {\n      a[i] = buffer2.front();\n      buffer2.pop();\n      i++;\n    }\n\n\n}\n\nvoid mergeSort(int a[], int start, int end)\n{\n  int middle;\n\n  if(start&lt;end)\n    {\n      middle = (start+end)/2;\n      mergeSort(a,start,middle);\n      mergeSort(a,middle+1,end);\n      merge(a, start, middle, end);\n    }\n\n}\n\nint main()\n{\n  int b[6] = {7,8,0,4,5,1},s = 0, e = 5;\n\n  mergeSort(b,s,e);\n\n  for(int i = 0; i&lt;6; i++)\n    cout&lt;&lt;b[i]&lt;&lt;endl;\n\n}\n</code></pre>\n\n<p>Here is what the debugger is outputting -</p>\n\n<pre><code>execve(\"./q1\", [\"./q1\"], [/* 63 vars */]) = 0\nbrk(0)                                  = 0x1cde000\naccess(\"/etc/ld.so.nohwcap\", F_OK)      = -1 ENOENT (No such file or directory)\nmmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7fee90911000\naccess(\"/etc/ld.so.preload\", R_OK)      = -1 ENOENT (No such file or directory)\nopen(\"/etc/ld.so.cache\", O_RDONLY|O_CLOEXEC) = 3\nfstat(3, {st_mode=S_IFREG|0644, st_size=116033, ...}) = 0\nmmap(NULL, 116033, PROT_READ, MAP_PRIVATE, 3, 0) = 0x7fee908f4000\nclose(3)                                = 0\naccess(\"/etc/ld.so.nohwcap\", F_OK)      = -1 ENOENT (No such file or directory)\nopen(\"/usr/lib/x86_64-linux-gnu/libstdc++.so.6\", O_RDONLY|O_CLOEXEC) = 3\nread(3, \"\\177ELF\\2\\1\\1\\3\\0\\0\\0\\0\\0\\0\\0\\0\\3\\0&gt;\\0\\1\\0\\0\\0 \\240\\10\\0\\0\\0\\0\\0\"..., 832) = 832\nfstat(3, {st_mode=S_IFREG|0644, st_size=1566568, ...}) = 0\nmmap(NULL, 3675328, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7fee9036e000\nmprotect(0x7fee904e1000, 2093056, PROT_NONE) = 0\nmmap(0x7fee906e0000, 49152, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x172000) = 0x7fee906e0000\nmmap(0x7fee906ec000, 13504, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7fee906ec000\nclose(3)                                = 0\naccess(\"/etc/ld.so.nohwcap\", F_OK)      = -1 ENOENT (No such file or directory)\nopen(\"/lib/x86_64-linux-gnu/libgcc_s.so.1\", O_RDONLY|O_CLOEXEC) = 3\nread(3, \"\\177ELF\\2\\1\\1\\0\\0\\0\\0\\0\\0\\0\\0\\0\\3\\0&gt;\\0\\1\\0\\0\\0\\360*\\0\\0\\0\\0\\0\\0\"..., 832) = 832\nfstat(3, {st_mode=S_IFREG|0644, st_size=92504, ...}) = 0\nmmap(NULL, 2188352, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7fee90157000\nmprotect(0x7fee9016d000, 2093056, PROT_NONE) = 0\nmmap(0x7fee9036c000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x15000) = 0x7fee9036c000\nclose(3)                                = 0\naccess(\"/etc/ld.so.nohwcap\", F_OK)      = -1 ENOENT (No such file or directory)\nopen(\"/lib/x86_64-linux-gnu/libc.so.6\", O_RDONLY|O_CLOEXEC) = 3\nread(3, \"\\177ELF\\2\\1\\1\\3\\0\\0\\0\\0\\0\\0\\0\\0\\3\\0&gt;\\0\\1\\0\\0\\0`\\v\\2\\0\\0\\0\\0\\0\"..., 832) = 832\nfstat(3, {st_mode=S_IFREG|0755, st_size=1869392, ...}) = 0\nmmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7fee908f3000\nmmap(NULL, 3972864, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7fee8fd8d000\nmprotect(0x7fee8ff4d000, 2097152, PROT_NONE) = 0\nmmap(0x7fee9014d000, 24576, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x1c0000) = 0x7fee9014d000\nmmap(0x7fee90153000, 16128, PROT_READ|PROT_WRITE, `enter code here`MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7fee90153000\nclose(3)                                = 0\naccess(\"/etc/ld.so.nohwcap\", F_OK)      = -1 ENOENT (No such file or directory)\nopen(\"/lib/x86_64-linux-gnu/libm.so.6\", O_RDONLY|O_CLOEXEC) = 3\nread(3, \"\\177ELF\\2\\1\\1\\3\\0\\0\\0\\0\\0\\0\\0\\0\\3\\0&gt;\\0\\1\\0\\0\\0\\240U\\0\\0\\0\\0\\0\\0\"..., 832) = 832\nfstat(3, {st_mode=S_IFREG|0644, st_size=1084840, ...}) = 0\nmmap(NULL, 3174760, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7fee8fa85000\nmprotect(0x7fee8fb8c000, 2093056, PROT_NONE) = 0\nmmap(0x7fee8fd8b000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x106000) = 0x7fee8fd8b000\nclose(3)                                = 0\nmmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7fee908f2000\nmmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7fee908f0000\narch_prctl(ARCH_SET_FS, 0x7fee908f0740) = 0\nmprotect(0x7fee9014d000, 16384, PROT_READ) = 0\nmprotect(0x7fee8fd8b000, 4096, PROT_READ) = 0\nmprotect(0x7fee9036c000, 4096, PROT_READ) = 0\nmmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7fee908ef000\nmprotect(0x7fee906e0000, 40960, PROT_READ) = 0\nmprotect(0x604000, 4096, PROT_READ)     = 0\nmprotect(0x7fee90913000, 4096, PROT_READ) = 0\nmunmap(0x7fee908f4000, 116033)          = 0\nbrk(0)                                  = 0x1cde000\nbrk(0x1d10000)                          = 0x1d10000\n--- SIGSEGV {si_signo=SIGSEGV, si_code=SEGV_MAPERR, si_addr=0} ---\n+++ killed by SIGSEGV (core dumped) +++\nSegmentation fault (core dumped)\n</code></pre>\n"}, {"tags": ["c++", "gcc", "boost", "mingw"], "answers": [{"comments": [{"owner": {"reputation": 1425, "user_id": 216447, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d2d9435e095651a9e3a23a1da436d32?s=128&d=identicon&r=PG", "display_name": "fest", "link": "https://stackoverflow.com/users/216447/fest"}, "edited": false, "score": 5, "creation_date": 1487510688, "post_id": 38104054, "comment_id": 71808035, "body": "For boost 1.63, I had to use <code>.\\bootstrap.bat gcc</code> in step 6."}, {"owner": {"reputation": 124, "user_id": 2577088, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4KmtF.jpg?s=128&g=1", "display_name": "arthropod", "link": "https://stackoverflow.com/users/2577088/arthropod"}, "edited": false, "score": 4, "creation_date": 1494639889, "post_id": 38104054, "comment_id": 74929540, "body": "As of 1.64, <code>mingw</code> is again a toolset option but doesn&#39;t seem to work. The Boost.Build documentation (<a href=\"http://www.boost.org/build/doc/html/bbv2/reference/tools.html#bbv2.reference.tools.compiler.gcc\" rel=\"nofollow noreferrer\">link</a>) seems to recommend <code>gcc</code> option for using mingw anyway."}], "tags": [], "owner": {"reputation": 3124, "user_id": 354633, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/kx0E0.jpg?s=128&g=1", "display_name": "antred", "link": "https://stackoverflow.com/users/354633/antred"}, "is_accepted": false, "score": 14, "last_activity_date": 1499776438, "last_edit_date": 1499776438, "creation_date": 1467214291, "answer_id": 38104054, "question_id": 38103244, "link": "https://stackoverflow.com/questions/38103244/building-boost-1-61-0-with-mingw-5-3-0/38104054#38104054", "title": "Building boost 1.61.0 with MinGW 5.3.0", "body": "<p>Ok, I did get it to work, but apparently the bug in the boost build system discussed <a href=\"https://stackoverflow.com/questions/27342524/buidling-boost-error-name-clash-for-pstage-libboost-system-vc120-mt-1-58-dll/27885628#27885628\" title=\"here\">here</a> is still in boost 1.61. I worked around that by skipping the libraries that run into this problem and only building the ones that I need. Here's what worked for me.</p>\n\n<ol>\n<li>Download and unzip boost_1_61_0.7z to <strong>D:\\Dev\\Libs\\boost\\boost_1_61_0</strong></li>\n<li>Extend <strong>PATH</strong> variable to contain bin folder that contains MinGW g++.exe, and make sure no other g++.exe instances appear in <strong>PATH</strong> before this one (that actually tripped me up the first time, because several programs I've installed come packaged with their own g++ version).</li>\n<li>Open cmd window.</li>\n<li>Run <code>cd D:\\Dev\\Libs\\boost\\boost_1_61_0\\tools\\build</code></li>\n<li>Run <code>.\\bootstrap.bat</code> (if you skip this, step 6 will fail with 'Unknown toolset: mingw' ... WTF???)</li>\n<li>Run <code>.\\bootstrap.bat mingw</code></li>\n<li>Run <code>.\\b2.exe install toolset=gcc --prefix=D:\\Dev\\Libs\\boost\\boost_1_61_0\\b2_for_mingw</code></li>\n<li>Run <code>cd D:\\Dev\\Libs\\boost\\boost_1_61_0</code></li>\n<li>Run <code>set PATH=%PATH%;D:\\Dev\\Libs\\boost\\boost_1_61_0\\b2_for_mingw\\bin</code></li>\n<li>Run <code>b2 toolset=gcc --build-type=complete stage --with-filesystem --with-system</code> (since I only need the <em>filesystem</em> and <em>system</em> libraries).</li>\n</ol>\n\n<p>EDIT: For boost 1.64, step 5 must be skipped entirely, and in step 6 <code>gcc</code> needs to be specified instead of <code>mingw</code>, as pointed out in the comments by user fest.</p>\n"}, {"tags": [], "owner": {"reputation": 97, "user_id": 2018942, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/01d45c4baa46da71c9edf0387f7f7fe6?s=128&d=identicon&r=PG", "display_name": "saha", "link": "https://stackoverflow.com/users/2018942/saha"}, "is_accepted": false, "score": 2, "last_activity_date": 1533645087, "creation_date": 1533645087, "answer_id": 51726881, "question_id": 38103244, "link": "https://stackoverflow.com/questions/38103244/building-boost-1-61-0-with-mingw-5-3-0/51726881#51726881", "title": "Building boost 1.61.0 with MinGW 5.3.0", "body": "<p>The answer from @antred worked pretty well. Only changes I needed to do to compile boost 1.67.0 is follows:</p>\n\n<ul>\n<li>Instead of step 5 and 6 run <code>.\\bootstrap.bat gcc</code></li>\n<li>At step 10 run <code>b2 --build-dir=\"C:\\Program Files\\boost_1_67_0\\build\" --prefix=\"C:\\Program Files\\boost\" toolset=gcc install</code></li>\n</ul>\n"}], "owner": {"reputation": 3124, "user_id": 354633, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/kx0E0.jpg?s=128&g=1", "display_name": "antred", "link": "https://stackoverflow.com/users/354633/antred"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7423, "favorite_count": 3, "answer_count": 2, "score": 2, "last_activity_date": 1533645087, "creation_date": 1467212207, "last_edit_date": 1467212738, "question_id": 38103244, "link": "https://stackoverflow.com/questions/38103244/building-boost-1-61-0-with-mingw-5-3-0", "title": "Building boost 1.61.0 with MinGW 5.3.0", "body": "<p>Has anyone had any success in building boost 1.61.0 for Mingw? I've Googled for this, and all the suggestions that apparently worked well in the past result in errors now. It doesn't help that boost's <a href=\"http://www.boost.org/doc/libs/1_61_0/more/getting_started/windows.html#install-boost-build\" rel=\"nofollow\" title=\"Getting Started on Windows\">\"Getting Started on Windows\"</a> page is a poorly structured, incomplete mess that seems to have been getting only the most rudimentary updates for a while now (there are even a couple of dead links in there). I somehow managed to build boost 1.58 for an older MinGW version, but that was quite a while ago and I foolishly neglected to write down the individual steps required to make it work. :-\\</p>\n"}, {"tags": ["c++", "multithreading", "boost-thread"], "comments": [{"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "edited": false, "score": 0, "creation_date": 1467212284, "post_id": 38103135, "comment_id": 63640329, "body": "<a href=\"http://stackoverflow.com/questions/9094422/how-to-check-if-a-stdthread-is-still-running\" title=\"how to check if a stdthread is still running\">stackoverflow.com/questions/9094422/&hellip;</a> , long story short: use a bool."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1467220243, "post_id": 38103135, "comment_id": 63645673, "body": "<code>std::atomic&lt;bool&gt;</code> may be what you are looking for..."}], "answers": [{"tags": [], "owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "is_accepted": false, "score": 0, "last_activity_date": 1467213500, "last_edit_date": 1467213500, "creation_date": 1467212254, "answer_id": 38103263, "question_id": 38103135, "link": "https://stackoverflow.com/questions/38103135/how-to-wait-for-a-thread-to-join-only-if-it-has-been-started/38103263#38103263", "title": "How to wait for a thread to join only if it has been started", "body": "<p>It seems like you need to specify an order or priority of execution.  From your question it also seems like you have heterogenous threads (in terms of behavior) so I am going to suggest synchronization.  A <code>mutex</code> alone will likely not be enough (although in many implementations a mutex is the same as a binary semaphore).  An easy way to do this is with monitors.  <a href=\"https://en.wikipedia.org/wiki/Monitor_(synchronization)\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Monitor_(synchronization)</a></p>\n"}, {"tags": [], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "is_accepted": false, "score": 0, "last_activity_date": 1467217698, "last_edit_date": 1467217698, "creation_date": 1467213891, "answer_id": 38103900, "question_id": 38103135, "link": "https://stackoverflow.com/questions/38103135/how-to-wait-for-a-thread-to-join-only-if-it-has-been-started/38103900#38103900", "title": "How to wait for a thread to join only if it has been started", "body": "<p>To paraphrase the problem (let me know if I've misunderstood):  you've got two event handlers (A and B) that will be executed, and it's not guaranteed which one will be executed first -- the execution ordering might be (A,B) or it might be (B,A)... but in either case you'd like the system to behave <em>as if</em> the handlers had been executed in (A,B) order.</p>\n\n<p>The way I'd approach this problem is to make the handlers smarter, so that they can detect when the \"wrong\" handler has been executed first and deal with it gracefully.  In particular, when your B handler executes, it should have a way to detect if the A handler has already executed.  If B sees that A has already executed, then B can do its normal thing (i.e. join() the thread) and all is well.  On the other hand, if B finds that A has not already executed, then B should instead just set a flag (perhaps a boolean in a data structure that A will have access to?) so that when the A handler runs later on, it will know that the B handler has already been-and-gone, and therefore A will know that it cannot rely on B to do any cleanup work.  That is, when A runs, it will check the flag; if the flag was set by B, then A will also call join() before returning, since A knows that B won't be doing it later (or, alternatively, perhaps A could schedule another B event, if you prefer not to call join() directly from the A handler).</p>\n\n<p>If your A and B handlers are both being called in the same thread, then this should be straightforward to do; if A and B are being called from different threads, you'll need to be more careful to do the flag-handling in a thread-safe manner (e.g. using std::atomic or similar).</p>\n"}], "owner": {"reputation": 5854, "user_id": 338476, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/c28b92ae5611083c82d6cde165ab29c0?s=128&d=identicon&r=PG", "display_name": "tzippy", "link": "https://stackoverflow.com/users/338476/tzippy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 376, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1467217698, "creation_date": 1467211929, "question_id": 38103135, "link": "https://stackoverflow.com/questions/38103135/how-to-wait-for-a-thread-to-join-only-if-it-has-been-started", "title": "How to wait for a thread to join only if it has been started", "body": "<p>I have two events that are being fired and handled by two event handlers.\nIn <code>EventHandler2</code> a <code>boost::thread</code> is started.\nIn EventHandler2 the application is waiting for this thread to finish by calling <code>join()</code> on it.</p>\n\n<p>This has workled well on fast computers, because the event that started the thread was always fired first, before the other event that caused the application to ait for the <code>join()</code>.\nHowever, on old machines, the events are fired in different order (because there is some heavy computing to be done before <code>EventHandler2</code> is called).\nSo <code>EventHandler1</code> is called first and does not wait, since the <code>join()</code> immediately returns (thread has not been started yet, becuase the 2nd event was not fired).\nwhats the best I can do here? Do I need to lock a mutex and then wait for it before I call the <code>join()</code>. This way I make sure that the thread is started before a <code>join()</code> is called on it.\nWhats the best pattern to use in this case?\nThank you!</p>\n"}, {"tags": ["c++", "mfc"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1467212001, "post_id": 38103107, "comment_id": 63640126, "body": "Please post code as text in your question instead of giving a link."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1467219346, "post_id": 38103107, "comment_id": 63645118, "body": "What are you pressing to close the window? Once the console window is closed, your application is gone, too. You will need to start the application again (&quot;Run&quot; from Visual Studio, or double-click on the EXE)."}, {"owner": {"reputation": 11, "user_id": 6529024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dcdd7868be2fad5bdf75a0c54b46b4b?s=128&d=identicon&r=PG&f=1", "display_name": "ProStyled", "link": "https://stackoverflow.com/users/6529024/prostyled"}, "edited": false, "score": 0, "creation_date": 1467222436, "post_id": 38103107, "comment_id": 63646988, "body": "I mean if I compile my program in Windows CE, I&#39;ve Dialog Box that on Button opens Another DB. In second DB I&#39;ve got button that is showing me what I&#39;ve got in text file. And it is showing by std::cout / printf whatever. And when I press button it&#39;s shown, works fine. But when I close value of text file by X or File-&gt;Close it&#39;s closed but I can&#39;t open this one more time by Button in Dialog Box , but I have to Close my application and run it one more time. It&#39;s not normal."}], "owner": {"reputation": 11, "user_id": 6529024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dcdd7868be2fad5bdf75a0c54b46b4b?s=128&d=identicon&r=PG&f=1", "display_name": "ProStyled", "link": "https://stackoverflow.com/users/6529024/prostyled"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1467215536, "creation_date": 1467211842, "last_edit_date": 1467215536, "question_id": 38103107, "link": "https://stackoverflow.com/questions/38103107/window-of-console-does-not-open-second-time-only-once", "title": "Window of Console does not open second time only once", "body": "<p>So I have made my application in MFC, Visual C++ 2005 for Windows CE but I've got some weird problem.</p>\n\n<p>When I press button in my Dialog Box which has to show me something in Console, I mean </p>\n\n<pre><code>std::cout &lt;&lt; show_me_something;\n</code></pre>\n\n<p>It happens, I can see clearly everything I want to but when I press 'X' button to quit or in toolbar File->Close I can't open it again, it looks like Im pressing button but nothing happens.</p>\n\n<p>It's like:\n1. Press button to show me something\n2. You see what you want\n3. Close it\n4. I press again same button, because I want to see it again\n5. Still pressing button (nothing happens)</p>\n\n<p>Here is Code of Dialog Box in which it happens:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"Dialog1.h\"\n#include \"Dialog2.h\"\n#include \"Diaglo3.h\"\n#include \"tScannerDlg.h\"\n#include &lt;fstream&gt;\n#include &lt;CString&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;cstdio&gt;\n#include &lt;iostream&gt;\n\n// Dialog2 dialog\n\nIMPLEMENT_DYNAMIC(Dialog2, CDialog)\n\nDialog2::Dialog2(CWnd* pParent /*=NULL*/)\n    : CDialog(Dialog2::IDD, pParent)\n{\n\n}\n\nDialog2::~Dialog2()\n{\n}\n\nvoid Dialog2::DoDataExchange(CDataExchange* pDX)\n{\n    CDialog::DoDataExchange(pDX);\n    CWnd* pWnd = GetDlgItem(IDC_EDIT1);\n    pWnd-&gt;SetWindowText(_T(\"test8.csv\"));\n}\n\nBEGIN_MESSAGE_MAP(Dialog2, CDialog)\n    ON_BN_CLICKED(IDOK, &amp;Dialog2::OnBnClickedOk)\n    ON_BN_CLICKED(IDC_BUTTON1, &amp;Dialog2::OnBnClickedButton1)\n    ON_BN_CLICKED(IDC_BUTTON2, &amp;Dialog2::OnBnClickedButton2)\n    ON_EN_CHANGE(IDC_EDIT1, &amp;Dialog2::OnEnChangeEdit1)\n    ON_BN_CLICKED(IDOK2, &amp;Dialog2::OnBnClickedOk2)\nEND_MESSAGE_MAP()\n\n// Dialog2 message handlers\n\nvoid Dialog2::OnBnClickedOk()\n{\n    //wroc\n    Dialog1 *dlg = new Dialog1();\n\n    dlg-&gt;Create(IDD_DIALOG1, NULL);\n    dlg-&gt;ShowWindow(SW_SHOW);\n    DestroyWindow();\n}\n\nvoid Dialog2::OnBnClickedButton1()\n{  \n\n}\n\nvoid Dialog2::OnEnChangeEdit1()\n{\n    //nazwa pliku\n}\n\nvoid Dialog2::OnBnClickedButton2()\n{\n    //sprawdz\n\n    CWnd* pWnd = GetDlgItem(IDC_EDIT1);\n    CString cstr;\n    std::string s, linia;\n    std::fstream fp;\n    std::vector &lt;std::string&gt; vec;\n    std::string delimiter = \";\";\n    std::string token;\n    size_t pos = 0;\n    pWnd-&gt;GetWindowTextW(cstr);\n\n    fp.open(cstr, std::ios::in);\n    if(fp.good() == true){\n        printf(\"Cala zawartosc bazy danych:\\n\"             \n               \"----------------\\n\");\n\n        while(!fp.eof()){  \n            std::string linijka;\n            getline(fp,linijka);\n            std::cout&lt;&lt;linijka&lt;&lt;std::endl;\n        }\n        fp.close();\n    }  \n\n}\nvoid Dialog2::OnBnClickedOk2()\n{\n    DestroyWindow();\n}\n</code></pre>\n\n<p>EDIT #1:\nI forgot to write it, so I do now: I think it's like I press to close this Window (std::cout) and I'm doing it but Windows CE is thinking this window is still open so that's why I can't open it again. How do you think Can I be write? And most important, how to fix this?</p>\n"}, {"tags": ["c++", "linked-list", "singly-linked-list", "double-pointer"], "comments": [{"owner": {"reputation": 1692, "user_id": 3567987, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/76baf53b56d492314d02f39fc4da878e?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/3567987/thomas"}, "edited": false, "score": 0, "creation_date": 1467211931, "post_id": 38103076, "comment_id": 63640079, "body": "Can you link the programcode?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 1692, "user_id": 3567987, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/76baf53b56d492314d02f39fc4da878e?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/3567987/thomas"}, "edited": false, "score": 0, "creation_date": 1467212089, "post_id": 38103076, "comment_id": 63640183, "body": "@Thomas No, please no links to code. The OP should provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> in their question."}, {"owner": {"reputation": 75, "user_id": 2912627, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100002027245423/picture?type=large", "display_name": "Sarthak Bansal", "link": "https://stackoverflow.com/users/2912627/sarthak-bansal"}, "edited": false, "score": 0, "creation_date": 1467299442, "post_id": 38103076, "comment_id": 63685360, "body": "Yes I added an example code pleases do check now"}], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 6521403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a9f38a9fe5d185054fea09f064a91f5?s=128&d=identicon&r=PG&f=1", "display_name": "Iverelo", "link": "https://stackoverflow.com/users/6521403/iverelo"}, "is_accepted": true, "score": 1, "last_activity_date": 1467304239, "creation_date": 1467304239, "answer_id": 38128774, "question_id": 38103076, "link": "https://stackoverflow.com/questions/38103076/inserting-a-node-in-a-linked-list-using-double-pointers/38128774#38128774", "title": "Inserting a Node in a linked list using double pointers", "body": "<blockquote>\n  <p>Other than making the code more beautiful does this implementation\n  have any benefits efficiency wise.</p>\n</blockquote>\n\n<p>Don't have anything to compare this to so hard to say but this is about as efficient as you can remove a node from a linked list. Note that the function name Delete would be more accurate as Remove since it does not actually clean up the node it removes from the list.</p>\n\n<blockquote>\n  <p>Also how can I implement a similar approach towards inserting a node\n  to a linked list ( without keeping track of previous Node ).</p>\n</blockquote>\n\n<p>One way is to look ahead. Best shown in an example following the format of your Delete function.</p>\n\n<pre><code>void insert(Node *head, int value)\n{\n    Node *entry = head;\n    while (entry)\n    {\n        if (entry-&gt;next == NULL)\n        {\n            entry-&gt;next = new Node(NULL, value);\n            return;\n        }\n        else if (value &lt; entry-&gt;next-&gt;value)\n        {\n            entry-&gt;next = new Node(entry-&gt;next, value);\n            return;\n        }\n        entry = entry-&gt;next;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4842163"}, "is_accepted": false, "score": 2, "last_activity_date": 1516179210, "last_edit_date": 1516179210, "creation_date": 1516176452, "answer_id": 48296296, "question_id": 38103076, "link": "https://stackoverflow.com/questions/38103076/inserting-a-node-in-a-linked-list-using-double-pointers/48296296#48296296", "title": "Inserting a Node in a linked list using double pointers", "body": "<p>For insertion to the back of a list storing only the head, no tail (which would imply a small list where linear-time insertion is acceptable), you can do this by introducing the extra pointer indirection to eliminate special cases:</p>\n\n<p><strong>Simple Version (Pointers to Pointers to Nodes)</strong></p>\n\n<pre><code>void List::push_back(int value)\n{\n    // Point to the node link (pointer to pointer to node), \n    // not to the node.\n    Node** link = &amp;head;\n\n    // While the link is not null, point to the next link.\n    while (*link)\n        link = &amp;(*link)-&gt;next;\n\n    // Set the link to the new node.\n    *link = new Node(value, nullptr);\n}\n</code></pre>\n\n<p>... which you can reduce to just:</p>\n\n<pre><code>void List::push_back(int value)\n{\n    Node** link = &amp;head;\n    for (; *link; link = &amp;(*link)-&gt;next) {}\n    *link = new Node(value, nullptr);\n}\n</code></pre>\n\n<p>As opposed to, say:</p>\n\n<p><strong>Complex Version (Pointers to Nodes)</strong></p>\n\n<pre><code>void List::push_back(int value)\n{\n    if (head)\n    {\n        // If the list is not empty, walk to the back and\n        // insert there.\n        Node* node = head;\n        while (node-&gt;next)\n             node = node-&gt;next;\n        node-&gt;next = new Node(value, nullptr);\n    }\n    else\n    {\n        // If the list is empty, set the head to the new node.\n        head = new Node(value, nullptr);\n    }\n}\n</code></pre>\n\n<p>Or to be fair and remove comments:</p>\n\n<pre><code>void List::push_back(int value)\n{\n    if (head)\n    {\n        Node* node = head;\n        for (; node-&gt;next; node = node-&gt;next) {}\n        node-&gt;next = new Node(value, nullptr);\n    }\n    else\n        head = new Node(value, nullptr);\n}\n</code></pre>\n\n<p><strong>No Special Case for Simple Version</strong></p>\n\n<p>The main reason the first version doesn't have to special case empty lists is because if we imagine <code>head</code> is null:</p>\n\n<pre><code>Node** link = &amp;head; // pointer to pointer to null\nfor (; *link; link = &amp;(*link)-&gt;next) {}\n*link = new Node(value, nullptr);\n</code></pre>\n\n<p>Then the <code>for</code> loop condition is immediately false and we then assign the new node to the <code>head</code>. We don't have to check for that case separately outside the loop when we use pointers to pointers.</p>\n\n<p><strong>Insertion Sort</strong></p>\n\n<p>If you want to do an insertion sort instead of simply inserting to the back, then this:</p>\n\n<pre><code>void List::insert_sorted(int value)\n{\n    Node** link = &amp;head;\n    for (; *link &amp;&amp; (*link)-&gt;value &lt; value; link = &amp;(*link)-&gt;next) {}\n\n    // New node will be inserted to the back of the list\n    // or before the first node whose value &gt;= 'value'.\n    *link = new Node(value, *link);\n}\n</code></pre>\n\n<p><strong>Performance</strong></p>\n\n<p>As for performance, not sure it makes much difference to eliminate the extra branch, but it definitely makes the code tighter and reduces its cyclomatic complexity. The reason Linus considers this style to be \"good taste\" is because in C, you often have to write linked list logic often since it's not so easy and necessarily worthwhile to generalize linked lists since we have no class templates there, e.g., so it's handy to favor a smaller, more elegant, less error-prone way to write this stuff. Plus it demonstrates that you understand pointers quite well.</p>\n"}], "owner": {"reputation": 75, "user_id": 2912627, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100002027245423/picture?type=large", "display_name": "Sarthak Bansal", "link": "https://stackoverflow.com/users/2912627/sarthak-bansal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1587, "favorite_count": 2, "accepted_answer_id": 38128774, "answer_count": 2, "score": 0, "last_activity_date": 1516179210, "creation_date": 1467211749, "last_edit_date": 1467298933, "question_id": 38103076, "link": "https://stackoverflow.com/questions/38103076/inserting-a-node-in-a-linked-list-using-double-pointers", "title": "Inserting a Node in a linked list using double pointers", "body": "<p>I recently saw an implementation of deleting a node from a single linked list using a double pointer . Other than making the code more beautiful does this implementation have any benefits efficiency wise . Also how can I implement a similar approach towards inserting a node to a linked list ( without keeping track of previous Node ). I am really curious if there is any better algorithm out there to achieve this </p>\n\n<pre><code>Node* Delete(Node *head, int value)\n{\n    Node **pp = &amp;head; /* pointer to a pointer */\n    Node *entry = head;\n    while (entry ) \n    {\n        if (entry-&gt;value == value)\n        {\n            *pp = entry-&gt;next;\n        }\n        pp = &amp;entry-&gt;next;\n        entry = entry-&gt;next;\n    }\n    return head;\n}\n</code></pre>\n"}]