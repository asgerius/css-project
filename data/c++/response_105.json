[{"tags": ["c++", "class", "oop"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1484176661, "post_id": 41602456, "comment_id": 70407545, "body": "I don&#39;t know about what you should put in your code, but I can tell you what&#39;s missing in this <i>question</i>: your <i>code</i>. You&#39;d be amazed how effectively your <i>code</i> &quot;speaks&quot; to a wide range of readers, thereby eliminating nearly all of this paragraph and rooting only the fundamental question."}, {"owner": {"reputation": 904, "user_id": 6717168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b475396cbf62745254210e11d7b3846?s=128&d=identicon&r=PG", "display_name": "user", "link": "https://stackoverflow.com/users/6717168/user"}, "edited": false, "score": 0, "creation_date": 1484176805, "post_id": 41602456, "comment_id": 70407602, "body": "Welcome to Stack Overflow! Please edit your question to show <a href=\"http://mattgemmell.com/what-have-you-tried/\" rel=\"nofollow noreferrer\">what you have tried so far</a>. You should include a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> of the code that you are having problems with, then we can try to help with the specific problem. You should also read <a href=\"http://stackoverflow.com/help/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1484177413, "post_id": 41602456, "comment_id": 70407806, "body": "please ask a clear question giving part of code that matters you."}, {"owner": {"reputation": 1, "user_id": 7407070, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EsZolKZCs58/AAAAAAAAAAI/AAAAAAAAAB8/R4dKywo9jeY/photo.jpg?sz=128", "display_name": "iAmDannyEdward", "link": "https://stackoverflow.com/users/7407070/iamdannyedward"}, "edited": false, "score": 0, "creation_date": 1484177674, "post_id": 41602456, "comment_id": 70407884, "body": "Hello again. Sorry for the bad post, it&#39;s my first one. I have added two photos with my istream functions in each classes."}, {"owner": {"reputation": 1, "user_id": 7407070, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EsZolKZCs58/AAAAAAAAAAI/AAAAAAAAAB8/R4dKywo9jeY/photo.jpg?sz=128", "display_name": "iAmDannyEdward", "link": "https://stackoverflow.com/users/7407070/iamdannyedward"}, "edited": false, "score": 0, "creation_date": 1484177823, "post_id": 41602456, "comment_id": 70407935, "body": "The problem is : I introduce username and password from keyboard for admin, and when it is calling it, it&#39;s calling the default constructors ones not the ones I introduced"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1484178563, "post_id": 41602456, "comment_id": 70408159, "body": "Don&#39;t post pictures of text. Pos the text."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1484216138, "post_id": 41602456, "comment_id": 70422299, "body": "Welcome to Stack Overflow! Your image of text <a href=\"//meta.unix.stackexchange.com/q/4086\">isn&#39;t very helpful</a>.  It can&#39;t be read aloud or copied into an editor, and it doesn&#39;t index very well, meaning that other users with the same problem are less likely to find the answer here.  Please <a href=\"https://stackoverflow.com/posts/41602456/edit\">edit</a> your post to incorporate the relevant text directly (preferably using copy+paste to avoid transcription errors)."}], "answers": [{"tags": [], "owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "is_accepted": false, "score": 1, "last_activity_date": 1484188370, "creation_date": 1484188370, "answer_id": 41604184, "question_id": 41602456, "link": "https://stackoverflow.com/questions/41602456/overloading-istream-operator-for-a-base-class-using/41604184#41604184", "title": "Overloading istream &gt;&gt; operator for a base class using", "body": "<p>Introduce two new virtual member functions, <code>void Members::readVars(istream&amp;)</code> and <code>void Admin::readVars(istream&amp;)</code>. The second calls the first.</p>\n\n<p>Then you define only one operator, <code>istream&amp; operator &gt;&gt; (istream&amp;, Members&amp;)</code>, which  calls <code>readVars(istream&amp;)</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 7407070, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EsZolKZCs58/AAAAAAAAAAI/AAAAAAAAAB8/R4dKywo9jeY/photo.jpg?sz=128", "display_name": "iAmDannyEdward", "link": "https://stackoverflow.com/users/7407070/iamdannyedward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "answer_count": 1, "score": -6, "last_activity_date": 1484188370, "creation_date": 1484176295, "last_edit_date": 1484178116, "question_id": 41602456, "link": "https://stackoverflow.com/questions/41602456/overloading-istream-operator-for-a-base-class-using", "title": "Overloading istream &gt;&gt; operator for a base class using", "body": "<p>So I have a base class <code>Members</code> which has 1 class inheriting from it, which is <code>Admin</code>. On the <code>Members</code> class, I have 2 chars : <code>username</code> and <code>password</code>.  On the <code>Admin</code> I have 2 others, <code>city</code> and <code>job</code>. </p>\n\n<p>The problem appears when using istream. For the <code>Members</code> class, I have istream for <code>username</code> and <code>password</code>. For the <code>Admin</code> class, I used an istream with <code>in&gt;&gt;(Members)a;</code> included (to get the istream from <code>Members</code> class . When I access it in the main function, I introduce the <code>username</code> and the <code>password</code> for the new <code>Admin</code> , but then it calls the default constructor from <code>Members</code> Class. </p>\n\n<p>What should I put to get my <code>username</code> and <code>password</code> that I introduced and not the default ones ? </p>\n\n<p>Members overload</p>\n\n<p><a href=\"https://i.stack.imgur.com/XGbn2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XGbn2.png\" alt=\"enter image description here\"></a></p>\n\n<p>Admins overload</p>\n\n<p><a href=\"https://i.stack.imgur.com/X7DNr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/X7DNr.png\" alt=\"enter image description here\"></a></p>\n\n<p>Thanks </p>\n"}, {"tags": ["c++", "xml", "dom", "xerces"], "owner": {"reputation": 21, "user_id": 7407062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6aa2df7803f29d9afd3f286573915097?s=128&d=identicon&r=PG&f=1", "display_name": "Mart", "link": "https://stackoverflow.com/users/7407062/mart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1484180884, "creation_date": 1484176231, "last_edit_date": 1484180884, "question_id": 41602438, "link": "https://stackoverflow.com/questions/41602438/xerces-c-dom-parse-continuation-after-schemalocation-error", "title": "Xerces C++ DOM parse continuation after SchemaLocation error", "body": "<p>When parsing XML containing:    </p>\n\n<pre><code>xsi:schemaLocation=\"http://www.CIP4.org/JDFSchema_1_1\"\n</code></pre>\n\n<p>I correctly get an error:</p>\n\n<blockquote>\n  <p>schemaLocation does not contain namespace-location pairs</p>\n</blockquote>\n\n<p>but I want to continue processing rather than throwing an exception, as the error really doesn't matter in the context I have. I cant change the XML as another system is generating it. Is there any way to set an option to continue processing or alternatively to disable the validation?</p>\n"}, {"tags": ["c++", "namespaces"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1484177085, "post_id": 41602437, "comment_id": 70407697, "body": "It seems that namespaces in C++ are becoming what things like AbstractFactory are in Java - a way of completely obfuscating the code,"}, {"owner": {"reputation": 143, "user_id": 4116114, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/daf207e8ec838131604c5274c8e68fdd?s=128&d=identicon&r=PG&f=1", "display_name": "Bronze", "link": "https://stackoverflow.com/users/4116114/bronze"}, "edited": false, "score": 0, "creation_date": 1484180770, "post_id": 41602437, "comment_id": 70408850, "body": "Unfortunately I have to agree. I think they are a useful tool, but the pull to just make another namespace is so strong, and then you end up here."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1484180898, "post_id": 41602437, "comment_id": 70408884, "body": "I don&#39;t find the pull strong at all. If I ever come across a case where I had more than one layer of namespaces, I would definitely think very, very hard about my design. I wrote a blog article about this a wile back: <a href=\"https://punchlet.wordpress.com/2011/06/18/letter-the-sixth-belatedly/\" rel=\"nofollow noreferrer\">punchlet.wordpress.com/2011/06/18/letter-the-sixth-belatedly</a>"}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 4116114, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/daf207e8ec838131604c5274c8e68fdd?s=128&d=identicon&r=PG&f=1", "display_name": "Bronze", "link": "https://stackoverflow.com/users/4116114/bronze"}, "edited": false, "score": 0, "creation_date": 1484180843, "post_id": 41602891, "comment_id": 70408870, "body": "I thought this was the case, but I figured I should ask just in case I had missed something. Thank you for the quick reply."}], "tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": false, "score": 0, "last_activity_date": 1484178885, "creation_date": 1484178885, "answer_id": 41602891, "question_id": 41602437, "link": "https://stackoverflow.com/questions/41602437/how-to-replace-a-function-in-a-namespace/41602891#41602891", "title": "How to replace a function in a namespace?", "body": "<p>It doesn't work like that. You can't \"override a function in a namespace\".</p>\n\n<p>You could write a fake scheduler with the <em>same</em> function, and link the module under test with the fake scheduler instead of the actual scheduler, when you build the unit tests.</p>\n\n<p>Otherwise there is no way to do this in C++ without changing the code under test.</p>\n"}], "owner": {"reputation": 143, "user_id": 4116114, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/daf207e8ec838131604c5274c8e68fdd?s=128&d=identicon&r=PG&f=1", "display_name": "Bronze", "link": "https://stackoverflow.com/users/4116114/bronze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 163, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1484178885, "creation_date": 1484176229, "question_id": 41602437, "link": "https://stackoverflow.com/questions/41602437/how-to-replace-a-function-in-a-namespace", "title": "How to replace a function in a namespace?", "body": "<p>I am writing some unit tests for a module that uses a scheduler. I'm writing a fake of the scheduler so that I can examine what events have been scheduled, cancelled, etc.</p>\n\n<p>The code I'm testing calls the schedule function directly with the help of <code>using namespace X</code> calls, and the final call is <code>scheduler::schedule()</code>. So, I need to have my fake's function be the one called when that function call is made.</p>\n\n<p>I can't change the library, and I think what I need to do here is override the function in the namespace, but I'm not exactly sure how I should do this. To top it off, the scheduler is implemented elsewhere and is imported to this code project with <code>using namespace</code> calls, and the library implementation has several different <code>using namespace X</code> calls in it at each level of namespace nesting \"for backwards compatibility.\"</p>\n\n<p>How should I go about doing this?</p>\n\n<p>Basically, we have this:</p>\n\n<pre><code>namespace ndn {\nnamespace util {\nnamespace scheduler {\n\nclass Scheduler\n{\n  EventId\n  schedule();\n}\n\n} // scheduler\n} // util\n} // ndn\n</code></pre>\n\n<p>And then in my local codebase:</p>\n\n<pre><code>namespace nfd {\nnamespace scheduler {\n\nusing ndn::Scheduler;\n\nEventId\nschedule();\n\n} // scheduler\n} // nfd\n</code></pre>\n\n<p>And now, the code I'm writing looks like:</p>\n\n<pre><code>namespace nfd {\nnamespace rib {\n\nscheduler::schedule(...);\n\n} // rib\n} // nfd\n</code></pre>\n\n<p>So, what I need is that call to <code>scheduler::schedule()</code> to be for my fake. In my test case I have:</p>\n\n<pre><code>namespace nfd {\nnamespace rib {\nnamespace tests {\n\n//test code\n\n} // tests\n} // rib\n\n// Can I do this?\nnamespace scheduler {\n  EventId\n  fakeSchedule();\n} // scheduler\n\n} // nfd\n</code></pre>\n\n<p>Can I just inline another namespace call and overwrite the call there? If not, how should I fake the scheduler so that I can accomplish this?</p>\n"}, {"tags": ["c++", "oop", "inheritance"], "comments": [{"owner": {"reputation": 103, "user_id": 5963984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b606bec2b72ae5db104e1a94462be0b5?s=128&d=identicon&r=PG&f=1", "display_name": "JKreiser", "link": "https://stackoverflow.com/users/5963984/jkreiser"}, "edited": false, "score": 1, "creation_date": 1484175213, "post_id": 41602168, "comment_id": 70407034, "body": "have you tried it by yourself? i see no problem with that. also, consider what you want to achieve, this seems not to be a good idea in general."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1484175286, "post_id": 41602168, "comment_id": 70407052, "body": "You <i>can,</i> but be very careful here. If you&#39;re planning on referring to <code>B</code> objects through <code>A</code>, you might want to include a virtual destructor to get proper destruction behavior with polymorphic types in all contexts you might use them in, and have a look at <a href=\"http://stackoverflow.com/questions/274626/what-is-object-slicing\">the slicing problem.</a>"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1484175678, "post_id": 41602168, "comment_id": 70407192, "body": "@jaggedSpire Can slicing cause issues in this case? I don&#39;t think it can, but maybe I&#39;m wrong."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1484176030, "post_id": 41602168, "comment_id": 70407324, "body": "@Brian I don&#39;t think in this <i>exact</i> case, but given OP is clearly keeping their assignment operators in their base class around, when they have some data that exists only in derived classes, it struck me as a good thing to warn OP about."}], "answers": [{"comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 1, "creation_date": 1484175806, "post_id": 41602302, "comment_id": 70407236, "body": "Or <code>*static_cast&lt;A*&gt;(this)</code>"}], "tags": [], "owner": {"reputation": 669, "user_id": 7406508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8vnaf.jpg?s=128&g=1", "display_name": "Jeandey Boris", "link": "https://stackoverflow.com/users/7406508/jeandey-boris"}, "is_accepted": false, "score": 1, "last_activity_date": 1484175619, "creation_date": 1484175619, "answer_id": 41602302, "question_id": 41602168, "link": "https://stackoverflow.com/questions/41602168/can-i-access-the-base-part-of-my-object-as-if-it-were-an-object-of-its-own/41602302#41602302", "title": "Can I access the &#39;base part&#39; of my object as if it were an object of its own?", "body": "<p>In <code>/*something here*/ = A(arg1, arg2);</code>, you can cast <code>this</code> to its base type and call it's implicit assignment operator</p>\n\n<pre><code>(*((A*)this))= A(arg1, arg2);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 2, "last_activity_date": 1484176204, "creation_date": 1484176204, "answer_id": 41602433, "question_id": 41602168, "link": "https://stackoverflow.com/questions/41602168/can-i-access-the-base-part-of-my-object-as-if-it-were-an-object-of-its-own/41602433#41602433", "title": "Can I access the &#39;base part&#39; of my object as if it were an object of its own?", "body": "<blockquote>\n  <p>Can I access the 'base part' of my object as if it were an object of its own?</p>\n</blockquote>\n\n<p>Yes. It is a complete instance of the parent class, that lives inside the derived class instance.</p>\n\n<p>A pointer or a reference to the derived class is convertible to a pointer/reference to the parent.</p>\n\n<p>A non-pointer/reference i.e. a value of derived type is convertible to the parent as well, but that creates a copy of the parent subobject, just like converting any other value type to another always creates a copy.</p>\n\n<blockquote>\n  <p>Now I'd like to have a setter function for class B that acceses it's own members directly but assigns the derived members in batch using a temporary A object.</p>\n</blockquote>\n\n<p>Simply cast <code>this</code> or the dereferenced reference to the parent class type:</p>\n\n<pre><code> (A&amp;)*this = A(arg1, arg2); // or\n *(A*)this = A(arg1, arg2);\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 7406945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lcjJW.png?s=128&g=1", "display_name": "zamkot", "link": "https://stackoverflow.com/users/7406945/zamkot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 41602433, "answer_count": 2, "score": 1, "last_activity_date": 1484176204, "creation_date": 1484175017, "last_edit_date": 1484176097, "question_id": 41602168, "link": "https://stackoverflow.com/questions/41602168/can-i-access-the-base-part-of-my-object-as-if-it-were-an-object-of-its-own", "title": "Can I access the &#39;base part&#39; of my object as if it were an object of its own?", "body": "<p>Say I have a base class A and a derived class B that adds some extra members. Now I'd like to have a setter function for class B that acceses it's own members directly but assigns the derived members in batch using a temporary A object. Here's some example code:</p>\n\n<pre><code>class A\n{\npublic:\n    int x;\n    int y;\n    A(int arg1, int arg2) \n        : x(arg1), y(arg2) {}\n};\n\nclass B : public A\n{\npublic:\n    int z;\n    B(int arg1, int arg2, int arg3) \n        : A(arg1, arg2), z(arg3) {}\n    void setB(int arg1, int arg2, int arg3) {\n        /*something here*/ = A(arg1, arg2);\n        this-&gt;z = arg3;\n    }\n};\n</code></pre>\n\n<p><strong>//edit</strong>\nI guess I wasn't clear that the question isn't really \"Can I?\" but rather \"How can I?\". To be even more specific: What can I put in place of <code>/*something here*/</code> to make setB() actually work the same as:</p>\n\n<pre><code>void setB(int arg1, int arg2, int arg3) {\n    this-&gt;x = arg1;\n    this-&gt;y = arg2;\n    this-&gt;z = arg3; }\n</code></pre>\n"}, {"tags": ["c++", "rcpp"], "comments": [{"owner": {"reputation": 17516, "user_id": 1345455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DrBTs.jpg?s=128&g=1", "display_name": "coatless", "link": "https://stackoverflow.com/users/1345455/coatless"}, "edited": false, "score": 3, "creation_date": 1484175863, "post_id": 41602024, "comment_id": 70407257, "body": "I would <i>not</i> say this is purely opinion based. There are some concerns that this question does raise (inadvertently)."}], "answers": [{"tags": [], "owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "is_accepted": false, "score": 20, "last_activity_date": 1484175137, "last_edit_date": 1484175137, "creation_date": 1484174631, "answer_id": 41602087, "question_id": 41602024, "link": "https://stackoverflow.com/questions/41602024/should-i-prefer-rcppnumericvector-over-stdvector/41602087#41602087", "title": "Should I prefer Rcpp::NumericVector over std::vector?", "body": "<p>\"If unsure, just time it.\"  </p>\n\n<p>All it takes is to add these few lines to the file you already had:</p>\n\n<pre><code>/*** R\nlibrary(microbenchmark)\nx &lt;- 1.0* 1:1e7   # make sure it is numeric\nmicrobenchmark(foo(x), bar(x), times=100L)\n*/\n</code></pre>\n\n<p>Then just calling <code>sourceCpp(\"...yourfile...\")</code> generates the following result (plus warnings on signed/unsigned comparisons):</p>\n\n<pre><code>R&gt; library(microbenchmark)\n\nR&gt; x &lt;- 1.0* 1:1e7   # make sure it is numeric\n\nR&gt; microbenchmark(foo(x), bar(x), times=100L)\nUnit: milliseconds\n   expr     min      lq    mean  median      uq      max neval cld\n foo(x) 31.6496 31.7396 32.3967 31.7806 31.9186  54.3499   100  a \n bar(x) 50.9229 51.0602 53.5471 51.1811 51.5200 147.4450   100   b\nR&gt; \n</code></pre>\n\n<p>Your <code>bar()</code> solution needs to make a copy to create a <em>R</em> object in the R memory pool. <code>foo()</code> does not.  That matters for <em>large</em> vectors that you run over <em>many times</em>. Here we see a ratio of close of about 1.8.</p>\n\n<p>In practice, it may not matter if you prefer one coding style over the other etc pp.</p>\n"}, {"comments": [{"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 3, "creation_date": 1484176264, "post_id": 41602289, "comment_id": 70407389, "body": "Good answer. Should mention that <a href=\"https://github.com/dcdillon/RcppHoney\" rel=\"nofollow noreferrer\">RcppHoney</a> by @dcdillon offers sugar for <code>std::vector&lt;&gt;</code> too."}], "tags": [], "owner": {"reputation": 17516, "user_id": 1345455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DrBTs.jpg?s=128&g=1", "display_name": "coatless", "link": "https://stackoverflow.com/users/1345455/coatless"}, "is_accepted": true, "score": 27, "last_activity_date": 1484175540, "creation_date": 1484175540, "answer_id": 41602289, "question_id": 41602024, "link": "https://stackoverflow.com/questions/41602024/should-i-prefer-rcppnumericvector-over-stdvector/41602289#41602289", "title": "Should I prefer Rcpp::NumericVector over std::vector?", "body": "<blockquote>\n  <p>Are equivalent when considering their working and benchmarked performance. </p>\n</blockquote>\n\n<ol>\n<li>I doubt that the benchmarks are accurate because going from a <code>SEXP</code> to <code>std::vector&lt;double&gt;</code> requires a <em>deep</em> copy from one data structure to another. (And as I was typing this, @DirkEddelbuettel ran a microbenchmark.)</li>\n<li>The markup of the Rcpp object (e.g. <code>const Rcpp::NumericVector&amp; x</code>) is just visual sugar. By default, the object given is a pointer and as such can easily have a ripple modification effect (see below). Thus, there is no true match that exists with <code>const std::vector&lt;double&gt;&amp; x</code> that effectively \"locks\" and \"passes a references\".</li>\n</ol>\n\n<blockquote>\n  <p>Can using <code>std::vector&lt;double&gt;</code> lead to any possible problems when interacting with R?</p>\n</blockquote>\n\n<p>In short, no. The only penalty that is paid is the transference between objects.</p>\n\n<p>The gain over this transference is the fact that modifying a value of a <code>NumericVector</code> that is assigned to another <code>NumericVector</code> will not cause a domino update. In essence, each <code>std::vector&lt;T&gt;</code> is a direct copy of the other. Therefore, the following couldn't happen:</p>\n\n<pre><code>#include&lt;Rcpp.h&gt;\n\n// [[Rcpp::export]]\nvoid test_copy(){\n    NumericVector A = NumericVector::create(1, 2, 3);\n    NumericVector B = A;\n\n    Rcout &lt;&lt; \"Before: \" &lt;&lt; std::endl &lt;&lt; \"A: \" &lt;&lt; A &lt;&lt; std::endl &lt;&lt; \"B: \" &lt;&lt; B &lt;&lt; std::endl; \n\n    A[1] = 5; // 2 -&gt; 5\n\n    Rcout &lt;&lt; \"After: \" &lt;&lt; std::endl &lt;&lt; \"A: \" &lt;&lt; A &lt;&lt; std::endl &lt;&lt; \"B: \" &lt;&lt; B &lt;&lt; std::endl; \n}\n</code></pre>\n\n<p>Gives:</p>\n\n<pre><code>test_copy()\n# Before: \n# A: 1 2 3\n# B: 1 2 3\n# After: \n# A: 1 5 3\n# B: 1 5 3\n</code></pre>\n\n<blockquote>\n  <p>Is there any reason why I should prefer <code>Rcpp::NumericVector</code> over <code>std::vector&lt;double&gt;</code>?</p>\n</blockquote>\n\n<p>There are a few reasons:</p>\n\n<ol>\n<li>As hinted previously, using <code>Rcpp::NumericVector</code> avoids a <em>deep</em> copy to and fro the <em>C++</em> <code>std::vector&lt;T&gt;</code>.</li>\n<li>You gain access to the <em>sugar</em> functions.</li>\n<li>Ability to 'mark up' <em>Rcpp</em> object in <em>C++</em> (e.g. adding attributes via <code>.attr()</code>)</li>\n</ol>\n"}], "owner": {"reputation": 5942, "user_id": 3986320, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/YB28g.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/3986320/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6606, "favorite_count": 12, "accepted_answer_id": 41602289, "answer_count": 2, "score": 16, "last_activity_date": 1484175540, "creation_date": 1484174329, "question_id": 41602024, "link": "https://stackoverflow.com/questions/41602024/should-i-prefer-rcppnumericvector-over-stdvector", "title": "Should I prefer Rcpp::NumericVector over std::vector?", "body": "<p>Is there any reason why I should prefer <code>Rcpp::NumericVector</code> over <code>std::vector&lt;double&gt;</code>?</p>\n\n<p>For example, the two functions below</p>\n\n<pre><code>// [[Rcpp::export]]\nRcpp::NumericVector foo(const Rcpp::NumericVector&amp; x) {\n  Rcpp::NumericVector tmp(x.length());\n  for (int i = 0; i &lt; x.length(); i++)\n    tmp[i] = x[i] + 1.0;\n  return tmp;\n}\n\n// [[Rcpp::export]]\nstd::vector&lt;double&gt; bar(const std::vector&lt;double&gt;&amp; x) {\n  std::vector&lt;double&gt; tmp(x.size());\n  for (int i = 0; i &lt; x.size(); i++)\n    tmp[i] = x[i] + 1.0;\n  return tmp;\n}\n</code></pre>\n\n<p>Are equivalent when considering their working and benchmarked performance. I understand that Rcpp offers sugar and vectorized operations, but if it is only about taking R's vector as input and returning vector as output, then would there be any difference which one of those I use? Can using <code>std::vector&lt;double&gt;</code> lead to any possible problems when interacting with R?</p>\n"}, {"tags": ["c++", "c++11", "winapi", "hid"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 3, "creation_date": 1484174449, "post_id": 41601960, "comment_id": 70406754, "body": "You removed lots of code. All the error checking for a start. A MCVE would be nice."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1484179981, "post_id": 41601960, "comment_id": 70408623, "body": "Did you check all the values of all of the parameters or are you assuming?"}, {"owner": {"reputation": 3120, "user_id": 2012007, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3cf2a036d360f8e177696b7f811dab05?s=128&d=identicon&r=PG", "display_name": "Graznarak", "link": "https://stackoverflow.com/users/2012007/graznarak"}, "edited": false, "score": 0, "creation_date": 1484197039, "post_id": 41601960, "comment_id": 70412882, "body": "Results of all functions are verified, both by testing them in code, and validating numbers with a step-through debugger."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1484205206, "post_id": 41601960, "comment_id": 70416006, "body": "Perhaps you got that wrong. Why can&#39;t we have MCVE? Don&#39;t you want help?"}, {"owner": {"reputation": 3120, "user_id": 2012007, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3cf2a036d360f8e177696b7f811dab05?s=128&d=identicon&r=PG", "display_name": "Graznarak", "link": "https://stackoverflow.com/users/2012007/graznarak"}, "edited": false, "score": 0, "creation_date": 1484232338, "post_id": 41601960, "comment_id": 70433288, "body": "I posted the question at work and the comment at home.  I will update with an MCVE as soon as I can."}], "answers": [{"tags": [], "owner": {"reputation": 3120, "user_id": 2012007, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3cf2a036d360f8e177696b7f811dab05?s=128&d=identicon&r=PG", "display_name": "Graznarak", "link": "https://stackoverflow.com/users/2012007/graznarak"}, "is_accepted": true, "score": 0, "last_activity_date": 1484239034, "creation_date": 1484239034, "answer_id": 41618452, "question_id": 41601960, "link": "https://stackoverflow.com/questions/41601960/hid-writefile-fails-with-error-invalid-parameter/41618452#41618452", "title": "HID WriteFile fails with ERROR_INVALID_PARAMETER", "body": "<p>After communicating with the people who produce our device, I have found that the problem is that the output buffer is filled in wrong.  The two bytes that are non-zero should be the bytes at indices 1 and 2, not the bytes at indices 0 and 1.</p>\n"}], "owner": {"reputation": 3120, "user_id": 2012007, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3cf2a036d360f8e177696b7f811dab05?s=128&d=identicon&r=PG", "display_name": "Graznarak", "link": "https://stackoverflow.com/users/2012007/graznarak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 712, "favorite_count": 0, "accepted_answer_id": 41618452, "answer_count": 1, "score": -1, "last_activity_date": 1484239034, "creation_date": 1484174063, "last_edit_date": 1484235042, "question_id": 41601960, "link": "https://stackoverflow.com/questions/41601960/hid-writefile-fails-with-error-invalid-parameter", "title": "HID WriteFile fails with ERROR_INVALID_PARAMETER", "body": "<p>I am attempting to communicate with a generic HID device (not mouse or keyboard).  Following Microsoft's documentation and some example code that I found, I have gotten to the point where I believe that I can begin communicating with the device.  Unfortunately, writing to it does not work.</p>\n\n<p>The following code gets to the point where things fail.  Some cleanup code is missing or incomplete, but the code should be functional with the correct VID and PID.  Note that the hardcoded <code>1</code> in the call to <code>SetupDiEnumDeviceInterfaces</code> is the index that my device is at on my computer.</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n#include &lt;hidsdi.h&gt;\n#include &lt;SetupAPI.h&gt;\n#include &lt;cstdlib&gt;\n#include &lt;cstdint&gt;\nstd::uint16_t constexpr vid = /* My VID */;\nstd::uint16_t constexpr pid = /* My PID */;\n\nint main(int argc, char* argv[])\n{\n    GUID hidGuid;\n    HidD_GetHidGuid(&amp;hidGuid);\n    HDEVINFO info = SetupDiGetClassDevsA(&amp;hidGuid, nullptr, nullptr,\n        DIGCF_PRESENT | DIGCF_DEVICEINTERFACE);\n    if (info == INVALID_HANDLE_VALUE)\n        return 1;\n    SP_DEVICE_INTERFACE_DATA data;\n    data.cbSize = sizeof(data);\n    if (!SetupDiEnumDeviceInterfaces(info, nullptr, &amp;hidGuid, 1, &amp;data))\n        return 1;\n    DWORD requiredSize;\n    if (SetupDiGetDeviceInterfaceDetailA(info, &amp;data, nullptr, 0,\n        &amp;requiredSize, nullptr) || GetLastError() != ERROR_INSUFFICIENT_BUFFER)\n        return 1;\n    SP_DEVICE_INTERFACE_DETAIL_DATA_A* detailData =\n        static_cast&lt;SP_DEVICE_INTERFACE_DETAIL_DATA_A*&gt;(\n            std::malloc(requiredSize));\n    detailData-&gt;cbSize = sizeof(SP_DEVICE_INTERFACE_DETAIL_DATA_A);\n    if (!SetupDiGetDeviceInterfaceDetailA(info, &amp;data, detailData,\n        requiredSize, nullptr, nullptr))\n        return 1;\n    SetupDiDestroyDeviceInfoList(info);\n    HANDLE capsHandle = CreateFileA(detailData-&gt;DevicePath, 0,\n        FILE_SHARE_READ | FILE_SHARE_WRITE, nullptr,\n        OPEN_EXISTING, 0, nullptr);\n    if (capsHandle == INVALID_HANDLE_VALUE)\n        return 1;\n    HIDD_ATTRIBUTES attr;\n    attr.Size = sizeof(attr);\n    if (!HidD_GetAttributes(capsHandle, &amp;attr))\n        return 1;\n    if (attr.VendorID != vid || attr.ProductID != pid)\n        return 1;\n    PHIDP_PREPARSED_DATA preparsedData;\n    if (!HidD_GetPreparsedData(capsHandle, &amp;preparsedData))\n        return 1;\n    CloseHandle(capsHandle);\n    HIDP_CAPS caps;\n    if (HidP_GetCaps(preparsedData, &amp;caps) != HIDP_STATUS_SUCCESS)\n        return 1;\n    HidD_FreePreparsedData(preparsedData);\n    std::uint8_t* inputBuffer =\n        static_cast&lt;std::uint8_t*&gt;(std::malloc(caps.InputReportByteLength));\n    std::uint8_t* outputBuffer =\n        static_cast&lt;std::uint8_t*&gt;(std::malloc(caps.OutputReportByteLength));\n    HANDLE hidHandle = CreateFileA(detailData-&gt;DevicePath,\n        GENERIC_READ | GENERIC_WRITE, FILE_SHARE_READ | FILE_SHARE_WRITE,\n        nullptr, OPEN_EXISTING, 0, nullptr);\n    if (hidHandle == INVALID_HANDLE_VALUE)\n        return 1;\n    ZeroMemory(outputBuffer, caps.OutputReportByteLength);\n    outputBuffer[0] = 11;\n    outputBuffer[1] = 12;\n    DWORD bytesWritten;\n    if (!WriteFile(hidHandle, outputBuffer, caps.OutputReportByteLength,\n        &amp;bytesWritten, nullptr))\n    {\n        auto x = GetLastError();\n        return 1;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>This runs as expected until the call to <code>WriteFile</code>.  At that point if fails and x is assigned the value 87 (<code>ERROR_INVALID_PARAMETER</code>).  Why would this be failing?  All of the parameters seem correct to me.</p>\n"}, {"tags": ["c++", "boost", "graph"], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 5987549, "user_type": "registered", "profile_image": "https://graph.facebook.com/986123654795652/picture?type=large", "display_name": "Ben Sisson", "link": "https://stackoverflow.com/users/5987549/ben-sisson"}, "is_accepted": true, "score": 0, "last_activity_date": 1484337606, "last_edit_date": 1495535463, "creation_date": 1484337606, "answer_id": 41642567, "question_id": 41601959, "link": "https://stackoverflow.com/questions/41601959/boost-c-ordering-size-not-the-same-as-graph-size/41642567#41642567", "title": "Boost C++ - Ordering size not the same as graph size", "body": "<p>Although as in <a href=\"https://stackoverflow.com/questions/41477876/boost-graph-segmentation-fault\">Boost graph segmentation fault</a> I was calling all the functions necessary to make the graph maximal planar, I was not storing the vertices in the graph.</p>\n\n<p>To do this, use:</p>\n\n<pre><code>edge_count = 0;\nfor(boost::tie(ei, ei_end) = edges(g); ei != ei_end; ++ei)\n    put(e_index, *ei, edge_count++);\n</code></pre>\n\n<p>A completed example of starting with a singly connected graph and then embedding it can be found <a href=\"https://github.com/benmsisson/chrobak_embedding\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 33, "user_id": 5987549, "user_type": "registered", "profile_image": "https://graph.facebook.com/986123654795652/picture?type=large", "display_name": "Ben Sisson", "link": "https://stackoverflow.com/users/5987549/ben-sisson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 41642567, "answer_count": 1, "score": 0, "last_activity_date": 1484337606, "creation_date": 1484174061, "last_edit_date": 1495535463, "question_id": 41601959, "link": "https://stackoverflow.com/questions/41601959/boost-c-ordering-size-not-the-same-as-graph-size", "title": "Boost C++ - Ordering size not the same as graph size", "body": "<p>As a follow up to my question <a href=\"https://stackoverflow.com/questions/41477876/boost-graph-segmentation-fault\">Boost graph segmentation fault</a> and to the older question <a href=\"https://stackoverflow.com/questions/8299363/planar-graph-drawing-c\">Planar graph drawing C++</a>, I have a planar graph in Boost that is not maximal planar but it has at least three edges. I call <a href=\"http://www.boost.org/doc/libs/1_51_0/libs/graph/doc/make_connected.html\" rel=\"nofollow noreferrer\">make_connected</a>, <a href=\"http://www.boost.org/doc/libs/1_48_0/libs/graph/doc/make_biconnected_planar.html\" rel=\"nofollow noreferrer\">make_biconnected_planar</a> and <a href=\"http://www.boost.org/doc/libs/1_49_0/libs/graph/doc/make_maximal_planar.html\" rel=\"nofollow noreferrer\">make_maximal_planar</a> on it so that it should now be maximal planar.</p>\n\n<p>When I call <a href=\"http://www.boost.org/doc/libs/1_45_0/libs/graph/doc/planar_canonical_ordering.html\" rel=\"nofollow noreferrer\">planar_canonical_ordering</a> on it, the ordering should be the same size as the original graph, but it is not for certain graphs, which causes a segmentation fault in <a href=\"http://www.boost.org/doc/libs/1_37_0/libs/graph/doc/straight_line_drawing.html\" rel=\"nofollow noreferrer\">chrobak_payne_straight_line_drawing</a> because the ordering is of size &lt; 3.</p>\n\n<p>What I don't understand is why the planar canonical ordering is not the same size as the graph itself. Certainly, there are specific edges that could be added to the graph to increase its ordering size, as noted in the answer to the first question, but that is not a general case. If the graph is maximal planar, why is its ordering (ordering.size()) not the same size as the graph (num_vertices(g)) itself?</p>\n"}, {"tags": ["c++", "multithreading", "c++11", "atomic"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1484174144, "post_id": 41601945, "comment_id": 70406644, "body": "It isn&#39;t adequate, obviously. The quote says <i>&quot;For a single variable or memory location requiring synchronization...&quot;</i>"}, {"owner": {"reputation": 3018, "user_id": 2345484, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1899ae171c0663708dde115790f44918?s=128&d=identicon&r=PG", "display_name": "Allanqunzi", "link": "https://stackoverflow.com/users/2345484/allanqunzi"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1484174305, "post_id": 41601945, "comment_id": 70406699, "body": "@juanchopanza, well, isn&#39;t this an example the case of &quot;For a single variable or memory location requiring synchronization&quot;?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1484174403, "post_id": 41601945, "comment_id": 70406733, "body": "No, you need to synchronize the vector too."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1484174449, "post_id": 41601945, "comment_id": 70406755, "body": "Really in this case you need another flag to check if there is a thread that is running the expensive computation.  Was this example from the book or is this your own scenario?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1484174502, "post_id": 41601945, "comment_id": 70406776, "body": "@Allanqunzi No, this is a vector containing an unknown number of member variables."}, {"owner": {"reputation": 3018, "user_id": 2345484, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1899ae171c0663708dde115790f44918?s=128&d=identicon&r=PG", "display_name": "Allanqunzi", "link": "https://stackoverflow.com/users/2345484/allanqunzi"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1484174601, "post_id": 41601945, "comment_id": 70406819, "body": "@NathanOliver, it&#39;s from the book. But I didn&#39;t realize there are variables <code>rootVals</code> and <code>rootAreValid</code> are being synchronized."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1484175318, "post_id": 41601945, "comment_id": 70407060, "body": "@Allanqunzi If you found that code in the book, it&#39;s most likely meant to illustrate that <code>atomic</code> is inadequate for this."}, {"owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "edited": false, "score": 0, "creation_date": 1484175536, "post_id": 41601945, "comment_id": 70407130, "body": "Strangely enough, when I look at my copy of the book, I find no place where he uses std::atomic in his Polynomial code."}, {"owner": {"reputation": 3018, "user_id": 2345484, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1899ae171c0663708dde115790f44918?s=128&d=identicon&r=PG", "display_name": "Allanqunzi", "link": "https://stackoverflow.com/users/2345484/allanqunzi"}, "reply_to_user": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "edited": false, "score": 0, "creation_date": 1484176601, "post_id": 41601945, "comment_id": 70407528, "body": "@MikelF, I added <code>std::atomic</code> for better illustration of my question."}, {"owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "edited": false, "score": 1, "creation_date": 1484176678, "post_id": 41601945, "comment_id": 70407553, "body": "@Allanqunzi That makes sense. However, you are representing the code as directly from the book rather than modified."}], "answers": [{"comments": [{"owner": {"reputation": 3018, "user_id": 2345484, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1899ae171c0663708dde115790f44918?s=128&d=identicon&r=PG", "display_name": "Allanqunzi", "link": "https://stackoverflow.com/users/2345484/allanqunzi"}, "edited": false, "score": 0, "creation_date": 1484174467, "post_id": 41602019, "comment_id": 70406761, "body": "I see, thanks, I did&#39;t realize that there are two variables are being synchronized."}], "tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": true, "score": 2, "last_activity_date": 1484174314, "creation_date": 1484174314, "answer_id": 41602019, "question_id": 41601945, "link": "https://stackoverflow.com/questions/41601945/mutex-or-atomic-in-const-member-function/41602019#41602019", "title": "mutex or atomic in const member function", "body": "<p>In your example there are two variables being synchronized : <code>rootVals</code> and <code>rootsAreValid</code>. That particular item is referring to the case where <em>only</em> the atomic value requires synchronization. For example :</p>\n\n<pre><code>#include &lt;atomic&gt;\n\nclass foo\n{\npublic:\n    void work()\n    {\n        ++times_called;\n        /* multiple threads call this to do work */\n    }\nprivate:\n    // Counts the number of times work() was called\n    std::atomic&lt;int&gt; times_called{0};\n};\n</code></pre>\n\n<p><code>times_called</code> is the only variable in this case.</p>\n"}, {"comments": [{"owner": {"reputation": 4681, "user_id": 6651824, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LWsU0.jpg?s=128&g=1", "display_name": "LWimsey", "link": "https://stackoverflow.com/users/6651824/lwimsey"}, "edited": false, "score": 0, "creation_date": 1484349128, "post_id": 41602103, "comment_id": 70489532, "body": "Checking <code>rootsAreValid</code> (a regular bool) is unprotected (outside of the mutex) This is a classical example of a data race and therefore invalid. The problem is extended to the vector which is returned while unsynchronized with the thread that wrote to it... This results in undefined behavior"}, {"owner": {"reputation": 2487, "user_id": 5380314, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8924d6d1c2470b1d7c8190dc37ef517c?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Nasonov", "link": "https://stackoverflow.com/users/5380314/andrey-nasonov"}, "reply_to_user": {"reputation": 4681, "user_id": 6651824, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LWsU0.jpg?s=128&g=1", "display_name": "LWimsey", "link": "https://stackoverflow.com/users/6651824/lwimsey"}, "edited": false, "score": 0, "creation_date": 1484437520, "post_id": 41602103, "comment_id": 70511269, "body": "@LWimsey, there is no data race. The value <code>rootsAreValid</code> cannot change from <code>true</code> to <code>false</code>. Data race may occur when two of more threads try to calculate the vector when <code>rootsAreValid</code> is false but this part of code is guarded by mutex and additional comparison is made. The reason why the first check is unguared is performance because atomic operations consume dozens of ticks."}, {"owner": {"reputation": 4681, "user_id": 6651824, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LWsU0.jpg?s=128&g=1", "display_name": "LWimsey", "link": "https://stackoverflow.com/users/6651824/lwimsey"}, "edited": false, "score": 0, "creation_date": 1484455063, "post_id": 41602103, "comment_id": 70514389, "body": "You misunderstand what a data race is: <i>multiple threads that access the same memory location simultaneously and (at least) one of them is a writer</i>..  That applies to <code>rootsAreValid</code> and the fact that it cannot change from <code>true</code> to <code>false</code> is irrelevant. Yes, the <code>mutex</code> guarantees that only a single thread can write to the <code>vector</code>, but that does not guarantee that the <code>vector</code> is correctly synchronized to a reader thread since reader access is outside of the <code>mutex</code>............(<i>continues</i>)"}, {"owner": {"reputation": 4681, "user_id": 6651824, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LWsU0.jpg?s=128&g=1", "display_name": "LWimsey", "link": "https://stackoverflow.com/users/6651824/lwimsey"}, "edited": false, "score": 0, "creation_date": 1484455082, "post_id": 41602103, "comment_id": 70514393, "body": "(<i>continued</i>)............  Your code shows an (invalid) implementation of the <i>Double-Checked Locking Pattern</i>.  If you check your source you will find that <code>rootsAreValid</code> is not a <code>bool</code>, but a <code>std::atomic&lt;bool&gt;</code> (or equivalent). And that will exactly fix the problem (<code>std::atomic</code> is a data-race-free type) and it will cause the <code>vector</code> to be synchronized based on the implicit acquire/release semantics of (default) atomic loads &amp; stores."}, {"owner": {"reputation": 2487, "user_id": 5380314, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8924d6d1c2470b1d7c8190dc37ef517c?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Nasonov", "link": "https://stackoverflow.com/users/5380314/andrey-nasonov"}, "reply_to_user": {"reputation": 4681, "user_id": 6651824, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LWsU0.jpg?s=128&g=1", "display_name": "LWimsey", "link": "https://stackoverflow.com/users/6651824/lwimsey"}, "edited": false, "score": 0, "creation_date": 1484531519, "post_id": 41602103, "comment_id": 70534894, "body": "@LWimsey, <code>vector</code> does not need synchronized access when because it is not changed after initialization. The validity of this pattern is compiler specific due to compiler optimizations. Modern compilers should not have problems."}, {"owner": {"reputation": 2487, "user_id": 5380314, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8924d6d1c2470b1d7c8190dc37ef517c?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Nasonov", "link": "https://stackoverflow.com/users/5380314/andrey-nasonov"}, "reply_to_user": {"reputation": 4681, "user_id": 6651824, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LWsU0.jpg?s=128&g=1", "display_name": "LWimsey", "link": "https://stackoverflow.com/users/6651824/lwimsey"}, "edited": false, "score": 0, "creation_date": 1484531566, "post_id": 41602103, "comment_id": 70534907, "body": "Changing <code>rootsAreValid</code> from <code>bool</code> to <code>std::atomic&lt;bool&gt;</code> will decrease the performance."}, {"owner": {"reputation": 4681, "user_id": 6651824, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LWsU0.jpg?s=128&g=1", "display_name": "LWimsey", "link": "https://stackoverflow.com/users/6651824/lwimsey"}, "edited": false, "score": 0, "creation_date": 1484535497, "post_id": 41602103, "comment_id": 70535691, "body": "If you are worried about performance, an atomic load/acquire on X86 is as cheap as a regular load. Only on weaker platforms such as Power or ARMv7 there is a small price to pay. But I am more concerned about correctness"}, {"owner": {"reputation": 2487, "user_id": 5380314, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8924d6d1c2470b1d7c8190dc37ef517c?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Nasonov", "link": "https://stackoverflow.com/users/5380314/andrey-nasonov"}, "reply_to_user": {"reputation": 4681, "user_id": 6651824, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LWsU0.jpg?s=128&g=1", "display_name": "LWimsey", "link": "https://stackoverflow.com/users/6651824/lwimsey"}, "edited": false, "score": 0, "creation_date": 1484574408, "post_id": 41602103, "comment_id": 70552738, "body": "@LWimsey, Yes, there is no atomic load/store on x86 for <code>bool</code> type because memory read is already atomic. So <code>std::atomic&lt;bool&gt;</code> will act the same as <code>bool</code> except the case when it is wrongly optimized by a compiler. I agree that <code>std::atomic&lt;bool&gt;</code> is better in this case"}, {"owner": {"reputation": 4681, "user_id": 6651824, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LWsU0.jpg?s=128&g=1", "display_name": "LWimsey", "link": "https://stackoverflow.com/users/6651824/lwimsey"}, "edited": false, "score": 0, "creation_date": 1484675384, "post_id": 41602103, "comment_id": 70603258, "body": "There is more to <code>std::atomic</code> than just the atomicity of stores and loads. It provides memory ordering guarantees and that is why a correct DCLP implementation needs this type; It is correct now"}], "tags": [], "owner": {"reputation": 2487, "user_id": 5380314, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8924d6d1c2470b1d7c8190dc37ef517c?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Nasonov", "link": "https://stackoverflow.com/users/5380314/andrey-nasonov"}, "is_accepted": false, "score": 0, "last_activity_date": 1484574440, "last_edit_date": 1484574440, "creation_date": 1484174691, "answer_id": 41602103, "question_id": 41601945, "link": "https://stackoverflow.com/questions/41601945/mutex-or-atomic-in-const-member-function/41602103#41602103", "title": "mutex or atomic in const member function", "body": "<p>I suggest you to avoid unnecessary heavy computation using the following code:</p>\n\n<pre><code>class Polynomial {\n public:\n using RootsType = std::vector&lt;double&gt;;\n\n RootsType roots() const\n {\n   if (!rootsAreValid) { // Acquiring mutex usually is not cheap, so we check the state without locking\n     std::lock_guard&lt;std::mutex&gt; lock_guard(sync);\n     if (!rootsAreValid) // The state could changed because the mutex was not owned at the first check\n     {\n       .... // **very expensive compuation**, computing roots,\n           // store them in rootVals\n     }\n     rootsAreValid = true;\n  }\n  return rootVals;\n}\nprivate:\nmutable std::mutex sync;\nmutable std::atomic&lt;bool&gt; rootsAreValid{ false };\nmutable RootsType rootVals{};\n};\n</code></pre>\n"}], "owner": {"reputation": 3018, "user_id": 2345484, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1899ae171c0663708dde115790f44918?s=128&d=identicon&r=PG", "display_name": "Allanqunzi", "link": "https://stackoverflow.com/users/2345484/allanqunzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 542, "favorite_count": 0, "accepted_answer_id": 41602019, "answer_count": 2, "score": 0, "last_activity_date": 1484574440, "creation_date": 1484173992, "question_id": 41601945, "link": "https://stackoverflow.com/questions/41601945/mutex-or-atomic-in-const-member-function", "title": "mutex or atomic in const member function", "body": "<p>I am reading Item 16 in Scott Meyers's Effective Modern C++.\nIn the later part of the item, he says</p>\n\n<blockquote>\n  <p>For a single variable or memory location requiring synchronization, use of a <code>std::atomic</code> is adequate, but once you get to two or more variables or memory locations that require manipulation as a unit, you should reach for \n  a mutex.</p>\n</blockquote>\n\n<p>But I still don't see why it is adequate in the case of a single variable or memory location, take the polynomial example in this item</p>\n\n<pre><code>class Polynomial {\n public:\n using RootsType = std::vector&lt;double&gt;;\n RootsType roots() const\n {\n   if (!rootsAreValid) { // if cache not valid\n    .... // **very expensive compuation**, computing roots,\n         // store them in rootVals\n   rootsAreValid = true;\n  }\n return rootVals;\n}\nprivate:\nmutable  std::atomic&lt;bool&gt; rootsAreValid{ false };\nmutable RootsType rootVals{};\n};\n</code></pre>\n\n<p>My question is:</p>\n\n<p>If thread 1 is in the middle of heavily computing the <code>rootVals</code> before the <code>rootAreValid</code> gets assigned to <code>true</code>, and thread 2 also calls function <code>roots()</code>, and evaluates <code>rootAreValid</code> to <code>false</code>, then thread 2 will also steps into the heavy computation of <code>rootVals</code>, so for this case how an atomic <code>bool</code> is adequate? I still think a <code>std::lock_guard&lt;mutex&gt;</code> is needed to protect the entry to the <code>rootVals</code> computation. </p>\n"}, {"tags": ["c++", "multidimensional-array", "memmove"], "comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 2, "creation_date": 1484173544, "post_id": 41601778, "comment_id": 70406375, "body": "What does wrong results mean? We need an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1484173810, "post_id": 41601778, "comment_id": 70406510, "body": "In the second piece of code, you&#39;re using 2 arrays.  In the first piece of code, we have no idea what <code>MAX_CHANNELS</code> is, or what <code>nChannels</code> is.  So the two are not equivalent unless you hard-coded <code>2</code> for <code>MAXCHANNELS</code> and <code>nChannels</code>."}, {"owner": {"reputation": 3252, "user_id": 6131611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3789df5ff075b7a2bfa71c8e2dccd18d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/6131611/pavel"}, "edited": false, "score": 0, "creation_date": 1484173898, "post_id": 41601778, "comment_id": 70406544, "body": "What <code>stepSize</code> and <code>fftFrameSize</code> causes the error? Also what is <code>MAX_FRAME_LENGTH</code> equal to?"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1484175865, "post_id": 41601778, "comment_id": 70407262, "body": "Why are you moving the data instead of just moving the index  of which row is most recent?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7401349, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211724394095916/picture?type=large", "display_name": "John Ames", "link": "https://stackoverflow.com/users/7401349/john-ames"}, "is_accepted": false, "score": 0, "last_activity_date": 1485347787, "last_edit_date": 1485347787, "creation_date": 1484176065, "answer_id": 41602402, "question_id": 41601778, "link": "https://stackoverflow.com/questions/41601778/c-how-to-use-memmove-for-items-in-2d-array/41602402#41602402", "title": "C++ - How to use memmove for items in 2D array?", "body": "<p>I have not undertaken any coding for several years, but it looks to me that possibly you have written code that is difficult to follow logically.</p>\n\n<p>My only suggesting is to find pen and paper draw a line horizontally through the middle of the paper so that you have two sections, representing each block of memory you want to move. Make the bottom half of the paper to represent the SOURCE and the top half to represent the DESTINATION. Write the letters A, B and C in the top half vertically down the side. Then write the numbers 1, 2 and 3 vertically down the side of the bottom half.</p>\n\n<p>Then on a separate piece of paper write down the the name of the counter \"channel\" start it with value zero.</p>\n\n<p>Now cross out the letter A from the destination and put the number 1 in it place = number 1 goes from source to destination overwriting A in destination. Now increment the counter \"channel\" by 1 on the separate piece of paper. Repeat 2 more times this whole operation. Now see what's in destination and what's left in source and the value of the counter \"channel\" this will show you what is going on inside your computers memory and the counter \"channel\". Personally would be inclined to rewrite the code so that the memmove second parameter was not also named channel. Inside the square brackets. Hope this helps. Here is the function explained <a href=\"http://www.cplusplus.com/reference/cstring/memmove/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/cstring/memmove/</a>.\nDon't forget that the memmove function will continue so long as channel is &lt; nchannels. You need to write out the values in all variables during the loop, standard practice for debugging.</p>\n"}], "owner": {"reputation": 1, "user_id": 7406885, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-f5cY5x2sBXM/AAAAAAAAAAI/AAAAAAAAAqw/512nfDCy1SI/photo.jpg?sz=128", "display_name": "ivana", "link": "https://stackoverflow.com/users/7406885/ivana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 464, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485347787, "creation_date": 1484173248, "last_edit_date": 1484183863, "question_id": 41601778, "link": "https://stackoverflow.com/questions/41601778/c-how-to-use-memmove-for-items-in-2d-array", "title": "C++ - How to use memmove for items in 2D array?", "body": "<p>I have the following 2D array:</p>\n\n<pre><code>float accumulator[MAX_CHANNELS][2*MAX_FRAME_LENGTH];\n</code></pre>\n\n<p>and I keep moving the blocks of memory in my code for every channel like this:</p>\n\n<pre><code>for (int channel = 0; channel &lt; nChannels; channel++) {\n    memmove(accumulator[channel], accumulator[channel] + stepSize, fftFrameSize * 2 * sizeof(float));\n}\n</code></pre>\n\n<p>However, this gives me wrong results and I don't understand why. What is wrong with the <code>memmove</code> call that I am using?</p>\n\n<p>Alternatively, I tried using the following 1D arrays (1 for each channel)  instead and got correct results:</p>\n\n<pre><code>float accumulator1[2*MAX_FRAME_LENGTH];\nfloat accumulator2[2*MAX_FRAME_LENGTH];\n\nmemmove(accumulator1, accumulator1 + stepSize, fftFrameSize * 2 * sizeof(float));\nmemmove(accumulator2, accumulator2 + stepSize, fftFrameSize * 2 * sizeof(float));\n</code></pre>\n"}, {"tags": ["c++", "linux", "qt", "qt-creator", "ubuntu-16.04"], "comments": [{"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1484183162, "post_id": 41601776, "comment_id": 70409423, "body": "<a href=\"http://stackoverflow.com/questions/4180394/how-do-i-create-a-simple-qt-console-application-in-c\" title=\"how do i create a simple qt console application in c\">stackoverflow.com/questions/4180394/&hellip;</a> <a href=\"http://stackoverflow.com/questions/3886105/how-to-print-to-console-when-using-qt\" title=\"how to print to console when using qt\">stackoverflow.com/questions/3886105/&hellip;</a>"}, {"owner": {"reputation": 1111, "user_id": 692829, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/qQzhK.png?s=128&g=1", "display_name": "lena", "link": "https://stackoverflow.com/users/692829/lena"}, "edited": false, "score": 0, "creation_date": 1484201066, "post_id": 41601776, "comment_id": 70414229, "body": "there must be three separate questions <a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}, {"owner": {"reputation": 1513, "user_id": 6624417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a73a12db09cb90a99be14fa2bb7b6096?s=128&d=identicon&r=PG&f=1", "display_name": "E4z9", "link": "https://stackoverflow.com/users/6624417/e4z9"}, "edited": false, "score": 0, "creation_date": 1484209968, "post_id": 41601776, "comment_id": 70418341, "body": "Why should <code>&quot;.&#47;myfile.txt&quot;</code> be located near anything specific? Check the run configuration&#39;s working directory."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1484215080, "post_id": 41601776, "comment_id": 70421582, "body": "Welcome to Stack Overflow! It is preferred if you can post separate questions instead of combining your questions into one. That way, it helps the people answering your question and also others hunting for at least one of your questions. Thanks!"}], "owner": {"reputation": 23, "user_id": 7406896, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rHP6WV_42pc/AAAAAAAAAAI/AAAAAAAAK2o/GdLI5Q-jEik/photo.jpg?sz=128", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0417\u0443\u0431\u043a\u043e\u0432", "link": "https://stackoverflow.com/users/7406896/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%97%d1%83%d0%b1%d0%ba%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 248, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1484173245, "creation_date": 1484173245, "question_id": 41601776, "link": "https://stackoverflow.com/questions/41601776/qt-creator-on-ubuntu-16-04-bugs", "title": "Qt Creator on Ubuntu 16.04 Bugs", "body": "<p>I've a problem with Qt Creator. Tried to use older versions but there's the same result. now on 4.2.0 and Qt 5.7.1 and 5.8.0 installed. When I start a project (no matter what kind exactly) then there's such kind of a bugs:</p>\n\n<p>First:</p>\n\n<p>right click -> add new (or existing) file -> add or cancel</p>\n\n<p>right click -> AND!!! now \"add new\" and others \"adds\" are grayed.</p>\n\n<p>BUT after a restart it starts from the beginning. So to add each new file to project I need to restart Qt Creator...</p>\n\n<p>Second:</p>\n\n<p>When I'm trying to use C++  lib - and i write like this</p>\n\n<pre><code>std::fstream myfstr(\"./myfile.txt\", std::ios_base::out);\n\nmyfstr&lt;&lt;\"hi\";\n\nmyfstr.close;\n</code></pre>\n\n<p>the file is beeing created in my user's HOME folder but not near the project's runfile</p>\n\n<p>Third:</p>\n\n<p>I can't enable the console window((</p>\n\n<p>I'm really sorry for these maybe stupid questions, but I really spent much time trying to solve them.</p>\n\n<p>Thanks a lot for any help!!</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1484181561, "post_id": 41601766, "comment_id": 70409030, "body": "That is not an error, but a warning. Presumably. But you&#39;re not showing us verbatim so we can only guess."}], "answers": [{"tags": [], "owner": {"reputation": 3954, "user_id": 6754706, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/TZSs8.jpg?s=128&g=1", "display_name": "RAZ_Muh_Taz", "link": "https://stackoverflow.com/users/6754706/raz-muh-taz"}, "is_accepted": true, "score": 0, "last_activity_date": 1484181190, "creation_date": 1484181190, "answer_id": 41603235, "question_id": 41601766, "link": "https://stackoverflow.com/questions/41601766/unintialized-variable-but-im-trying-to-accept-an-input-for-a-variable/41603235#41603235", "title": "Unintialized variable but I&#39;m trying to accept an input for a variable?", "body": "<p>This is because you are attempting to cout the variable's data before they have been initialized. You should do this instead</p>\n\n<pre><code>cout &lt;&lt; \"Please enter part number: \" &lt;&lt; endl;\ngetline(cin, partNumber);\ncout &lt;&lt; \"Please enter part discription: \" &lt;&lt; endl;\ngetline(cin, partDiscription);\ncout &lt;&lt; \"Please enter quantity of item: \" &lt;&lt; endl;\ncin &gt;&gt; partQuantity;\n</code></pre>\n\n<p>This way you aren't trying to reference a variable that has yet to be initialized.</p>\n"}], "owner": {"reputation": 115, "user_id": 7400547, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9009c46007b5371064697fe33469ed35?s=128&d=identicon&r=PG&f=1", "display_name": "Student1860", "link": "https://stackoverflow.com/users/7400547/student1860"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 41603235, "answer_count": 1, "score": 0, "last_activity_date": 1484181543, "creation_date": 1484173207, "last_edit_date": 1484181543, "question_id": 41601766, "link": "https://stackoverflow.com/questions/41601766/unintialized-variable-but-im-trying-to-accept-an-input-for-a-variable", "title": "Unintialized variable but I&#39;m trying to accept an input for a variable?", "body": "<p>I'm trying to set up an input that takes in a price and quantity of an item and it keeps giving me the uninitialized variable error for both of them so I give them a variable of 0 under the main and yet it won't print out the input and just shows their value to be 0?</p>\n\n<pre><code>int main() {\n\nstring partNumber;\nstring partDiscription;\nint partQuantity = 0;\nint partPrice = 0;\nint getInvoiceAmount;\nclass Invoice;\n\ncout &lt;&lt; \"Please enter part number: \" &lt;&lt; partNumber &lt;&lt; endl;\ngetline(cin, partNumber);\ncout &lt;&lt; \"Please enter part discription: \" &lt;&lt; partDiscription &lt;&lt; endl;\ngetline(cin, partDiscription);\ncout &lt;&lt; \"Please enter quantity of item: \" &lt;&lt; partQuantity &lt;&lt; endl;\ncin &gt;&gt; partQuantity;\ncout &lt;&lt; \"Please enter price of item: \" &lt;&lt; partPrice &lt;&lt; endl;\n\nif (partQuantity &lt; 0)\n    partQuantity = 0;\nif (partPrice &lt; 0)\n    partPrice = 0;\n</code></pre>\n"}, {"tags": ["c++", "user-interface"], "comments": [{"owner": {"reputation": 11096, "user_id": 541208, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2dfc2e563d2150994a6e06ef37f9e7be?s=128&d=identicon&r=PG", "display_name": "TankorSmash", "link": "https://stackoverflow.com/users/541208/tankorsmash"}, "edited": false, "score": 2, "creation_date": 1484173665, "post_id": 41601748, "comment_id": 70406426, "body": "If you&#39;re looking for C++ articles or tutorials, SO&#39;s not the place. If you&#39;re looking for help with some native C++ code you&#39;ve written, could you provide that and then the issue you&#39;re running into?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1484173730, "post_id": 41601748, "comment_id": 70406454, "body": "&quot;<i>it was written in the website</i>&quot; - what website?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1484173797, "post_id": 41601748, "comment_id": 70406505, "body": "If you don&#39;t want to use something like win32, your best bet is probably to write your own OS."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1484174020, "post_id": 41601748, "comment_id": 70406593, "body": "&quot;..  companies like Microsoft and Apple use C++ for developing user interface in their OS ..&quot; well of course they had to create the GUI in <i>some</i> language. But as soon as they did, they didn&#39;t need to stick to the command line anymore. Just like modern C++ compilers are written in (you&#39;d never guess) C or C++."}, {"owner": {"reputation": 97, "user_id": 5329090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H0Hnw.png?s=128&g=1", "display_name": "Dr.Geek Nerd", "link": "https://stackoverflow.com/users/5329090/dr-geek-nerd"}, "edited": false, "score": 1, "creation_date": 1484201493, "post_id": 41601748, "comment_id": 70414365, "body": "&quot;... well of course they had to create the GUI in some language. But as...&quot;, i just wanted to know how exactly did they create using C++, what&#39;s it called."}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 5329090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H0Hnw.png?s=128&g=1", "display_name": "Dr.Geek Nerd", "link": "https://stackoverflow.com/users/5329090/dr-geek-nerd"}, "edited": false, "score": 0, "creation_date": 1484201351, "post_id": 41601861, "comment_id": 70414328, "body": "Thanks Don Reba, so how are/were these third party libraries created(Just for knowledge)."}, {"owner": {"reputation": 12666, "user_id": 49329, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cd991227ac34793b8bae42972cbb03d6?s=128&d=identicon&r=PG", "display_name": "Don Reba", "link": "https://stackoverflow.com/users/49329/don-reba"}, "reply_to_user": {"reputation": 97, "user_id": 5329090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H0Hnw.png?s=128&g=1", "display_name": "Dr.Geek Nerd", "link": "https://stackoverflow.com/users/5329090/dr-geek-nerd"}, "edited": false, "score": 1, "creation_date": 1484202224, "post_id": 41601861, "comment_id": 70414646, "body": "@Sir.Geek, third-party libraries use OS APIs; OS APIs communicate with the graphics driver; the graphics driver communicates with the device using OS kernel services; and the kernel uses assembler. It&#39;s not &quot;pure C++&quot; at any level."}], "tags": [], "owner": {"reputation": 12666, "user_id": 49329, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cd991227ac34793b8bae42972cbb03d6?s=128&d=identicon&r=PG", "display_name": "Don Reba", "link": "https://stackoverflow.com/users/49329/don-reba"}, "is_accepted": true, "score": 6, "last_activity_date": 1484173638, "creation_date": 1484173638, "answer_id": 41601861, "question_id": 41601748, "link": "https://stackoverflow.com/questions/41601748/how-to-create-userinterface-using-my-own-libraries-in-c/41601861#41601861", "title": "How to create userinterface using my own libraries in C++", "body": "<p>You can't. There are <a href=\"https://msopentech.com/blog/2015/01/28/experimenting-with-a-proposed-standard-gui-for-the-c-language/#\" rel=\"nofollow noreferrer\">some proposals</a> for including GUI in the standard library, but none made it into the standard yet. You'll have to pick a third-party library for this.</p>\n"}], "owner": {"reputation": 97, "user_id": 5329090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H0Hnw.png?s=128&g=1", "display_name": "Dr.Geek Nerd", "link": "https://stackoverflow.com/users/5329090/dr-geek-nerd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 2, "closed_date": 1484175219, "accepted_answer_id": 41601861, "answer_count": 1, "score": -3, "last_activity_date": 1484201940, "creation_date": 1484173146, "last_edit_date": 1484201940, "question_id": 41601748, "link": "https://stackoverflow.com/questions/41601748/how-to-create-userinterface-using-my-own-libraries-in-c", "closed_reason": "Needs more focus", "title": "How to create userinterface using my own libraries in C++", "body": "<p>I want to create user interface using my own libraries and not a third part library like Qt, how is that called in C++. I would also appreciate any tutorials link on this stuff.</p>\n"}, {"tags": ["c++", "arrays", "fstream"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 3, "creation_date": 1484172596, "post_id": 41601554, "comment_id": 70405969, "body": "Welcome to Stack Overflow! It sounds like you may need to learn how to use a <a href=\"https://en.wikipedia.org/wiki/Debugger\" rel=\"nofollow noreferrer\">debugger</a> to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming. Further reading: <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1484172615, "post_id": 41601554, "comment_id": 70405979, "body": "A couple of hints: Don&#39;t use explicit dynamic memory allocation, use containers like std::vector. Always check the return value of an input function such as &gt;&gt;."}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 2, "creation_date": 1484172655, "post_id": 41601554, "comment_id": 70405996, "body": "There is more code right? Its difficult to know whats wrong without seeing a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1484173302, "post_id": 41601554, "comment_id": 70406283, "body": "What is <code>(double)i &#47; 5 == (int)i &#47; 5</code> for? If you want to know if <code>i</code> is a multiple of 5, use <code>i%5 == 0</code>. And there&#39;s no need to check for <code>0</code> separately, that will be true with this test."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1484173609, "post_id": 41601554, "comment_id": 70406406, "body": "What&#39;s the point of `    if (i == 0 || (double)i / 5 == (int)i / 5)` in the first place? This means you&#39;ll only read the sex and other information after reading every 5th ID. But that&#39;s not how the file is organized."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1484176076, "post_id": 41601554, "comment_id": 70407334, "body": "You&#39;ve miscounted too, so don&#39;t be too hard on the program ;-)"}, {"owner": {"reputation": 1, "user_id": 7330780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6c51407fe72cff37ad95bc413879e54?s=128&d=identicon&r=PG&f=1", "display_name": "Sune", "link": "https://stackoverflow.com/users/7330780/sune"}, "edited": false, "score": 0, "creation_date": 1484210238, "post_id": 41601554, "comment_id": 70418502, "body": "The &#39;(double)i / 5 == (int)i / 5&#39; is for finding out if the current line is the identifier, as it will activaye every five lines then. I have tried to &#39;cout &lt;&lt; sexT&#39; where it would output &quot;male&quot; but when I put it in a if statement it returns false."}], "owner": {"reputation": 1, "user_id": 7330780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6c51407fe72cff37ad95bc413879e54?s=128&d=identicon&r=PG&f=1", "display_name": "Sune", "link": "https://stackoverflow.com/users/7330780/sune"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 156, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1484331425, "creation_date": 1484172345, "last_edit_date": 1592644375, "question_id": 41601554, "link": "https://stackoverflow.com/questions/41601554/c-if-statement-using-fstream-not-working", "title": "C++ if statement using fstream not working", "body": "<p>I'm currently doing the bunny challenge on <a href=\"http://www.cplusplus.com/forum/articles/12974/\" rel=\"nofollow noreferrer\">here</a>. I'm writing all the bunnies in a text file, and then writing their gender &amp; color into an array. I am reading the genders and ages from the text file. I have this one problem though: even though both the value 'sexT is == &quot;male&quot;', the if statement returns false.</p>\n<pre><code>void turn()\n{\nstring *bunnyArray1 = new string[numberOfElements];\nstring *bunnyArray2 = new string[numberOfElements];\nint id, males = 0, females = 0;\nstring sexT, colorT;\nfor (int i = 0; i &lt; numberOfLines; i++)\n{\n    string buffer;\n    reader &gt;&gt; id;\n    if (i == 0 || (double)i / 5 == (int)i / 5)\n    {\n        reader &gt;&gt; sexT;\n        reader &gt;&gt; colorT;\n        reader &gt;&gt; colorT;\n        if (sexT == &quot;male&quot;) { males++; }\n        else if (sexT == &quot;female&quot;) { females++; }\n        bunnyArray1[id] = sexT;\n        bunnyArray2[id] = colorT;\n        cout &lt;&lt; females &lt;&lt; &quot; &quot; &lt;&lt; males &lt;&lt; endl;\n    }\n\n}\n\n\n\n        delete[]bunnyArray1;\n        delete[]bunnyArray2;\n}\n</code></pre>\n<p>The output is following:</p>\n<pre><code>A spotted male bunny named Sean has been born.\nA black male bunny named Sean has been born.\nA spotted female bunny named Andrea has been born.\nA brown male bunny named John has been born.\nA spotted female bunny named Andrea has been born.\n0 1\n0 2\n0 3\n0 4\n0 5\n</code></pre>\n<p>So for some reason it says there is 5 males, even though there is 3. The output of the file is:</p>\n<pre><code>1\nmale\nSean\nspotted\nfalse\n2\nmale\nSean\nblack\nfalse\n3\nfemale\nAndrea\nspotted\ntrue\n4\nmale\nJohn\nbrown\nfalse\n5\nfemale\nAndrea\nspotted\nfalse\n</code></pre>\n<p>I really can't figure out why it is not working.\nThanks for reading :)</p>\n"}, {"tags": ["android", "c++", "qt", "java-native-interface"], "comments": [{"owner": {"reputation": 7002, "user_id": 2538363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a17eb0f935aaff6b21269f57ccdc1bd?s=128&d=identicon&r=PG", "display_name": "BaCaRoZzo", "link": "https://stackoverflow.com/users/2538363/bacarozzo"}, "edited": false, "score": 1, "creation_date": 1484172327, "post_id": 41601298, "comment_id": 70405857, "body": "You need a version of the lib for the right arch (arm). That&#39;s the reason why you are getting the &quot;skipping incompatible &lt;library&gt; while searching for ljvm&quot;."}, {"owner": {"reputation": 931, "user_id": 5106997, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d66d1ef88c27f499c2ce44e3a40d224f?s=128&d=identicon&r=PG&f=1", "display_name": "\u0130brahim", "link": "https://stackoverflow.com/users/5106997/%c4%b0brahim"}, "reply_to_user": {"reputation": 7002, "user_id": 2538363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a17eb0f935aaff6b21269f57ccdc1bd?s=128&d=identicon&r=PG", "display_name": "BaCaRoZzo", "link": "https://stackoverflow.com/users/2538363/bacarozzo"}, "edited": false, "score": 0, "creation_date": 1484175654, "post_id": 41601298, "comment_id": 70407183, "body": "@BaCaRoZzo, Java have got only one ljvm in amd/server/, it is libjvm.so. I can running Java code with QAndroidExtras, but I have to use pure JNI for Android SDK classes."}, {"owner": {"reputation": 7002, "user_id": 2538363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a17eb0f935aaff6b21269f57ccdc1bd?s=128&d=identicon&r=PG", "display_name": "BaCaRoZzo", "link": "https://stackoverflow.com/users/2538363/bacarozzo"}, "edited": false, "score": 1, "creation_date": 1484177791, "post_id": 41601298, "comment_id": 70407928, "body": "Yeah, I&#39;ve read about your requirement but the error you are encountering it&#39;s a matter or architecture. Can&#39;t help further, sorry."}, {"owner": {"reputation": 931, "user_id": 5106997, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d66d1ef88c27f499c2ce44e3a40d224f?s=128&d=identicon&r=PG&f=1", "display_name": "\u0130brahim", "link": "https://stackoverflow.com/users/5106997/%c4%b0brahim"}, "reply_to_user": {"reputation": 7002, "user_id": 2538363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a17eb0f935aaff6b21269f57ccdc1bd?s=128&d=identicon&r=PG", "display_name": "BaCaRoZzo", "link": "https://stackoverflow.com/users/2538363/bacarozzo"}, "edited": false, "score": 0, "creation_date": 1484228507, "post_id": 41601298, "comment_id": 70430583, "body": "@BaCaRoZzo thanks, I found a new jni.h path : <code>Android&#47;Sdk&#47;ndk-bundle&#47;platforms&#47;android-19&#47;arch-arm&#47;usr&#47;inc&zwnj;&#8203;lude&#47;</code>. I think this jni.h for Android, but I get error: <code>JNI_CreateJavaVM was not declared in this scope</code>. I included for linux-g++ (desktop) and Android into .pro file: <a href=\"https://paste.ubuntu.com/23786707/\" rel=\"nofollow noreferrer\">paste.ubuntu.com/23786707</a>"}], "owner": {"reputation": 931, "user_id": 5106997, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d66d1ef88c27f499c2ce44e3a40d224f?s=128&d=identicon&r=PG&f=1", "display_name": "\u0130brahim", "link": "https://stackoverflow.com/users/5106997/%c4%b0brahim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 269, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1484171310, "creation_date": 1484171310, "question_id": 41601298, "link": "https://stackoverflow.com/questions/41601298/qt-android-cannot-find-ljvm", "title": "Qt Android: Cannot find -ljvm", "body": "<p>I'm using <code>Qt</code> and I compiled my project for Android ARMv7, but I get this error: <code>Cannot find -ljvm</code>. Whereas I included this commands into .pro file:</p>\n\n<pre><code>android: {\n    QT += androidextras\n    INCLUDEPATH += /usr/lib/jvm/java-8-oracle/include\n    INCLUDEPATH += /usr/lib/jvm/java-8-oracle/include/linux\n    LIBS += -L/usr/lib/jvm/java-8-oracle/jre/lib/amd64/server/ -ljvm\n}\n</code></pre>\n\n<p>Also when I use <code>JNI_CreateJavaVM</code>, I get this error: <code>undefined reference to JNI_CreateJavaVM</code>. What reasons of the errors?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1484171278, "post_id": 41601255, "comment_id": 70405384, "body": "I believe that matrix.h is already a library (see <a href=\"http://www.stroustrup.com/Programming/Matrix/Matrix.h\" rel=\"nofollow noreferrer\">here</a>)."}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1484171314, "post_id": 41601255, "comment_id": 70405410, "body": "Also, how are you compiling this? It should theoretically work."}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1484171326, "post_id": 41601255, "comment_id": 70405413, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1354522/simple-c-error-undeclared-first-use-this-function\">Simple C++ Error: &quot;... undeclared (first use this function)&quot;</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1484171704, "post_id": 41601255, "comment_id": 70405586, "body": "Unable to reproduce. Check for typos and duplication of <code>MATRIX_H</code>."}, {"owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "edited": false, "score": 1, "creation_date": 1484171735, "post_id": 41601255, "comment_id": 70405597, "body": "Try #pragma once rather than a guard #ifdef and see if that fixes it.  If so, MATRIX_H is defined somewhere else."}, {"owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "edited": false, "score": 0, "creation_date": 1484171830, "post_id": 41601255, "comment_id": 70405652, "body": "If MATRIX_H is defined somewhere else, you can define it yourself in <code>main file</code> and the compiler will tell you where the other definition is.  (Of course you throw away the forced definition after you solve the problem.)"}, {"owner": {"reputation": 535, "user_id": 5113999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c182661a69960f30a88c361f4ac7da1a?s=128&d=identicon&r=PG&f=1", "display_name": "Rowen Chumacera", "link": "https://stackoverflow.com/users/5113999/rowen-chumacera"}, "edited": false, "score": 0, "creation_date": 1484186752, "post_id": 41601255, "comment_id": 70410295, "body": "How about adding <code>extern void doJob(int, int);</code> in the secondary file?"}], "owner": {"reputation": 1, "user_id": 7406797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/079915b010c194647a51e094cf0c1ef6?s=128&d=identicon&r=PG&f=1", "display_name": "GusBoi", "link": "https://stackoverflow.com/users/7406797/gusboi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 489, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1484172297, "creation_date": 1484171162, "question_id": 41601255, "link": "https://stackoverflow.com/questions/41601255/c-undeclared-first-use-of-this-function", "title": "C++, Undeclared ( first use of this function )", "body": "<p>I'm trying to make a very simple program where the user can choose how big of a matrix to create  after which it is filled with random numbers and is printed out. Super simple stuff, but still causing trouble for me as a newbie. I have tried all kinds of solutions, with different error codes and have now arrived to this error code which i can't seem to solve no matter how much i google... </p>\n\n<p>The error message in detail:</p>\n\n<blockquote>\n  <p>error: 'doJob' undeclared (first use this function)\n  error: (Each undeclared identifier is reported only once for each function it appears in.)</p>\n</blockquote>\n\n<p>I have tried different ways of solving this based on some google searching i've been doing, but it all seems to result in to a different problem. If this problem is solved somewhere else, please point me in the right direction.</p>\n\n<blockquote>\n  <p>header file</p>\n</blockquote>\n\n<pre><code>#ifndef MATRIX_H\n#define MATRIX_H\n\nvoid doJob(int x, int y);\n\n#endif // MATRIX_H\n</code></pre>\n\n<blockquote>\n  <p>main file</p>\n</blockquote>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n#include \"matrix.h\"\n\nusing namespace std;\n\nint main () {\n\nint row, column;\n\ncout&lt;&lt;\"Please enter the number of rows for your matrix\";\ncin&gt;&gt;row;\n\ncout&lt;&lt;\"Please enter the number of columns for you matrix\";\ncin&gt;&gt;column;\n\ndoJob(row, column); // this is where the error shows up\n\n}\n</code></pre>\n\n<blockquote>\n  <p>secondary file</p>\n</blockquote>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include \"matrix.h\"\n\nusing namespace std;\n\nvoid doJob (int row, int column)\n{ codecodecode...\n</code></pre>\n"}, {"tags": ["c++", "reflection", "enums"], "answers": [{"comments": [{"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1484181383, "post_id": 41602386, "comment_id": 70408989, "body": "I&#39;m going to have to adapt this to my needs, but I&#39;ll test it and see if it works."}], "tags": [], "owner": {"reputation": 317, "user_id": 1150609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67b7faebe34c651a2a93da316ac19956?s=128&d=identicon&r=PG", "display_name": "user1150609", "link": "https://stackoverflow.com/users/1150609/user1150609"}, "is_accepted": false, "score": 1, "last_activity_date": 1484176004, "creation_date": 1484176004, "answer_id": 41602386, "question_id": 41601243, "link": "https://stackoverflow.com/questions/41601243/how-can-i-get-rid-of-the-duplication-in-this-code/41602386#41602386", "title": "How can I get rid of the duplication in this code?", "body": "<p>I don't know whether this fits your case, but I can suggest something like:</p>\n\n<pre><code>// things.inc\n#ifndef GTYPE_VOID\n#define GTYPE_VOID GTYPE_DECL(gvoid)\n#endif\nGTYPE_VOID\n\n#undef GTYPE_VOID\n#ifndef GTYPE_INT\n#define GTYPE_INT GTYPE_DECL(gint)\n#endif\nGTYPE_INT\n#undef GTYPE_INT\n\n#ifndef GTYPE_FLOAT\n#define GTYPE_FLOAT GTYPE_DECL(gfloat)\n#endif\nGTYPE_FLOAT\n#undef GTYPE_FLOAT\n</code></pre>\n\n<p>You can then define the macro in the way you like, and include it in places where you need:</p>\n\n<pre><code>// things.cpp\nenum class gtypes {\n#define GTYPE_DECL(Thing) Thing,\n#include \"things.inc\"\n#undef GTYPE_DECL\n};\nconst char *as_string(gtype t) {\n  switch (t) {\n  #define GTYPE_DECL(Thing) case gtype::Thing: return #Thing;\n  #include \"things.inc\"\n  #undef GTYPE_DECL\n  }\n  // or unreachable\n  return \"(unknown)\";\n}\n</code></pre>\n\n<p>Also, you can try to use a constexpr map.</p>\n"}], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1484176004, "creation_date": 1484171094, "question_id": 41601243, "link": "https://stackoverflow.com/questions/41601243/how-can-i-get-rid-of-the-duplication-in-this-code", "title": "How can I get rid of the duplication in this code?", "body": "<p>As part of a Proof of Concept, I'm trying to trying to build code that I can use to build GLSL scripts. One of the first things I've done is create references to the GLSL types, and created a system where I can query, based on an enum (which is the type of the GLSL data type) the string-literal that represents it in GLSL code. Here's what it looks like:</p>\n\n<pre><code>#define VEC_EXPAND(name) g ## name ## 2, g ## name ## 3, g ## name ## 4\n#define MAT_EXPAND(name) VEC_EXPAND(name), VEC_EXPAND(name ## 2x), VEC_EXPAND(name ## 3x), VEC_EXPAND(name ## 4x)\n\nenum class gtype : uint32_t {\n    gvoid,\n    gbool, gint, guint, gfloat, gdouble,\n    VEC_EXPAND(bvec), VEC_EXPAND(ivec), VEC_EXPAND(uvec), VEC_EXPAND(vec), VEC_EXPAND(dvec),\n    MAT_EXPAND(mat), MAT_EXPAND(dmat),\n    gsampler2d\n};\n\n#undef VEC_EXPAND\n#undef MAT_EXPAND\n\n#define GLSL_EXPAND(name) #name\n#define VEC_EXPAND(name) GLSL_EXPAND(name ## 2), GLSL_EXPAND(name ## 3), GLSL_EXPAND(name ## 4)\n#define MAT_EXPAND(name) VEC_EXPAND(name), VEC_EXPAND(name ## 2x), VEC_EXPAND(name ## 3x), VEC_EXPAND(name ## 4x)\n\ntemplate&lt;class T, class... Tail, class Elem = typename std::decay&lt;T&gt;::type&gt;\nconstexpr std::array&lt;Elem, 1 + sizeof...(Tail)&gt; make_array(T&amp;&amp; head, Tail&amp;&amp;... values)\n{\n    return { std::forward&lt;T&gt;(head), std::forward&lt;Tail&gt;(values)... };\n}\n\n\nconstexpr auto glsl_string_array = make_array(\n    \"void\", \"bool\", \"int\", \"uint\", \"float\", \"double\",\n    VEC_EXPAND(bvec), VEC_EXPAND(ivec), VEC_EXPAND(uvec), VEC_EXPAND(vec), VEC_EXPAND(dvec),\n    MAT_EXPAND(mat), MAT_EXPAND(dmat),\n    \"sampler2d\"\n);\nconstexpr const char * to_string_literal(gtype type) {\n    return glsl_string_array[uint32_t(type)];\n}\n\nstd::string to_string(gtype type) {\n    return to_string_literal(type);\n}\n\n#undef GLSL_EXPAND\n#undef VEC_EXPAND\n#undef MAT_EXPAND\n</code></pre>\n\n<p>So far, I've had no problems with the <em>functionality</em> of the code, but that duplication of the code where I define the types as an enum, and then write them again as a string literal is definitely troubling to me. I'm going to have to add more types as well (these are hardly the only GLSL types!) and I would like to write similar code for writing OpenCL Kernel code (which will depend on similar semantics), so how can I reduce this code down so that I only need one declaration of each type?</p>\n\n<p>Also, any advice which would reduce or even eliminate my use of Macros would be appreciated.</p>\n"}, {"tags": ["c++", "keyboard", "key"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 7, "creation_date": 1484170334, "post_id": 41600981, "comment_id": 70404947, "body": "There is no cross platform way to do that. Please specify on which platform you want to develop."}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 1, "creation_date": 1484177503, "post_id": 41600981, "comment_id": 70407837, "body": "if you are on windows then consider using the APIs <code>GetAsyncKeyState()</code> and <code>GetKeyState()</code>"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 1, "creation_date": 1484177672, "post_id": 41600981, "comment_id": 70407882, "body": "Welcome to StackOverflow. Your question in its current form is not a good fit for Stack Overflow and cannot be answer within the scope of this site. Please visit the <a href=\"http://stackoverflow.com/help\">help center</a> and read the section <a href=\"http://stackoverflow.com/help/how-to-ask\">how do I ask a good question</a>."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1484216086, "post_id": 41600981, "comment_id": 70422266, "body": "There&#39;s no portable way to determine whether a program has access to a keyboard (or indeed, any I/O device)."}, {"owner": {"reputation": 238, "user_id": 7406784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/886c5804db41556693568e0c24ad4493?s=128&d=identicon&r=PG&f=1", "display_name": "snivy9014", "link": "https://stackoverflow.com/users/7406784/snivy9014"}, "edited": false, "score": 0, "creation_date": 1506249331, "post_id": 41600981, "comment_id": 79735597, "body": "Edited my question with more details (even if its long time ago)"}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1484171294, "post_id": 41601167, "comment_id": 70405396, "body": "Blocks for data, so a key will be pressed."}], "tags": [], "owner": {"reputation": 669, "user_id": 7406508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8vnaf.jpg?s=128&g=1", "display_name": "Jeandey Boris", "link": "https://stackoverflow.com/users/7406508/jeandey-boris"}, "is_accepted": false, "score": -2, "last_activity_date": 1484170787, "creation_date": 1484170787, "answer_id": 41601167, "question_id": 41600981, "link": "https://stackoverflow.com/questions/41600981/how-do-i-check-if-a-key-is-pressed-on-c/41601167#41601167", "title": "How do I check if a Key is pressed on C++", "body": "<p>Are you talking about <code>getchar</code> function?</p>\n\n<p><a href=\"http://en.cppreference.com/w/c/io/getchar\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/c/io/getchar</a></p>\n"}, {"tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 2, "last_activity_date": 1484171202, "creation_date": 1484171202, "answer_id": 41601269, "question_id": 41600981, "link": "https://stackoverflow.com/questions/41600981/how-do-i-check-if-a-key-is-pressed-on-c/41601269#41601269", "title": "How do I check if a Key is pressed on C++", "body": "<p>There is no portable function that allows to check if a key is hit and continue if not.  This is always system dependent.  </p>\n\n<p><strong>Solution for linux and other posix compliant systems:</strong></p>\n\n<p><a href=\"http://www.flipcode.com/archives/_kbhit_for_Linux.shtml\" rel=\"nofollow noreferrer\">Here, for Morgan Mattews's code</a> provide <code>kbhit()</code>  functionality in a way compatible with any POSIX compliant system. He uses the trick of desactivating buffering at termios level.</p>\n\n<p><strong>Solution for windows:</strong></p>\n\n<p>For windows, Microsoft offers <a href=\"https://msdn.microsoft.com/en-us/library/58w7c94c.aspx\" rel=\"nofollow noreferrer\"><code>_kbhit()</code></a></p>\n"}, {"comments": [{"owner": {"reputation": 1876, "user_id": 2353816, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/t5smr.jpg?s=128&g=1", "display_name": "Anders Cedronius", "link": "https://stackoverflow.com/users/2353816/anders-cedronius"}, "edited": false, "score": 2, "creation_date": 1525773316, "post_id": 41601909, "comment_id": 87478772, "body": "Out of all complex and suuper difficult answers on the net this is the one to use!"}], "tags": [], "owner": {"reputation": 402, "user_id": 7404104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0818ca2989750105d84c7735814af9?s=128&d=identicon&r=PG&f=1", "display_name": "Frank S.", "link": "https://stackoverflow.com/users/7404104/frank-s"}, "is_accepted": true, "score": 33, "last_activity_date": 1547237891, "last_edit_date": 1547237891, "creation_date": 1484173815, "answer_id": 41601909, "question_id": 41600981, "link": "https://stackoverflow.com/questions/41600981/how-do-i-check-if-a-key-is-pressed-on-c/41601909#41601909", "title": "How do I check if a Key is pressed on C++", "body": "<p>As mentioned by others there's no cross platform way to do this, but on Windows you can do it like this:</p>\n\n<p>The Code below checks if the key 'A' is down.</p>\n\n<pre><code>if(GetKeyState('A') &amp; 0x8000/*Check if high-order bit is set (1 &lt;&lt; 15)*/)\n{\n    // Do stuff\n}\n</code></pre>\n\n<p>In case of shift or similar you will need to pass one of these: <a href=\"https://msdn.microsoft.com/de-de/library/windows/desktop/dd375731(v=vs.85).aspx\" rel=\"noreferrer\">https://msdn.microsoft.com/de-de/library/windows/desktop/dd375731(v=vs.85).aspx</a></p>\n\n<pre><code>if(GetKeyState(VK_SHIFT) &amp; 0x8000)\n{\n    // Shift down\n}\n</code></pre>\n\n<p>The low-order bit indicates if key is toggled.</p>\n\n<pre><code>SHORT keyState = GetKeyState(VK_CAPITAL/*(caps lock)*/);\nbool isToggled = keyState &amp; 1;\nbool isDown = keyState &amp; 0x8000;\n</code></pre>\n\n<p>Oh and also don't forget to</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1484175715, "post_id": 41602269, "comment_id": 70407205, "body": "I consider this Posix function portable.  For example, I have used &#39;select()&#39; on vxWorks in an embedded system, and on Ubuntu Linux.  So maybe this is cross-platform despite other claims."}], "tags": [], "owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "is_accepted": false, "score": 1, "last_activity_date": 1484175487, "creation_date": 1484175487, "answer_id": 41602269, "question_id": 41600981, "link": "https://stackoverflow.com/questions/41600981/how-do-i-check-if-a-key-is-pressed-on-c/41602269#41602269", "title": "How do I check if a Key is pressed on C++", "body": "<blockquote>\n  <p>check if a key is pressed, if yes, then do stuff</p>\n</blockquote>\n\n<p>Consider 'select()', if this (reportedly Posix) function is available on your os.</p>\n\n<p>'select()' uses 3 sets of bits, which you create using functions provided (see man select, FD_SET, etc).  You probably only need create the input bits (for now)</p>\n\n<hr>\n\n<p>from man page:</p>\n\n<p>'select()' \"allow a program to monitor multiple file descriptors, waiting until one or more of the file descriptors become \"ready\" for some class of I/O operation  (e.g., input  possible). A file descriptor is considered ready if it is possible to perform a corresponding I/O operation (e.g., read(2)  without  blocking...)\"</p>\n\n<p>When select is invoked:</p>\n\n<p>a) the function looks at each fd identified in the sets, and if that fd state indicates you can do something (perhaps read, perhaps write), select will return and let you go do that ... 'all you got to do' is scan the bits, find the set bit, and take action on the fd associated with that bit.  </p>\n\n<p>The 1st set (passed into select) contains active input fd's (typically devices). Probably 1 bit in this set is all you will need.  And with only 1 fd (i.e. an input from keyboard), 1 bit, this is all quite simple.  With this return from select, you can 'do-stuff' (perhaps, after you have fetched the char).</p>\n\n<p>b) the function also has a timeout, with which you identify how much time to await a change of the fd state. If the fd state does not change, the timeout will cause 'select()' to return with a 0. (i.e. no keyboard input) Your code can do something at this time, too, perhaps an output.</p>\n\n<p>fyi - fd's are typically 0,1,2... Remembe that C uses 0 as STDIN, 1 and STDOUT.</p>\n\n<hr>\n\n<p>Simple test set up: I open a terminal (separate from my console), and type the tty command in that terminal to find its id.  The response is typically something like \"/dev/pts/0\", or 3, or 17... </p>\n\n<p>Then I get an fd to use in 'select()' by using open:</p>\n\n<pre><code>// flag options are: O_RDONLY, O_WRONLY, or O_RDWR\nint inFD = open( \"/dev/pts/5\", O_RDONLY ); \n</code></pre>\n\n<p>It is useful to cout this value. </p>\n\n<p>Here is a snippet to consider (from man select):</p>\n\n<pre><code>  fd_set rfds;\n  struct timeval tv;\n  int retval;\n\n  /* Watch stdin (fd 0) to see when it has input. */\n  FD_ZERO(&amp;rfds);\n  FD_SET(0, &amp;rfds);\n\n  /* Wait up to five seconds. */\n  tv.tv_sec = 5;\n  tv.tv_usec = 0;\n\n  retval = select(1, &amp;rfds, NULL, NULL, &amp;tv);\n  /* Don't rely on the value of tv now! */\n\n  if (retval == -1)\n      perror(\"select()\");\n  else if (retval)\n      printf(\"Data is available now.\\n\");  // i.e. doStuff()\n      /* FD_ISSET(0, &amp;rfds) will be true. */\n  else\n      printf(\"No data within five seconds.\\n\"); // i.e. key not pressed\n</code></pre>\n"}], "owner": {"reputation": 238, "user_id": 7406784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/886c5804db41556693568e0c24ad4493?s=128&d=identicon&r=PG&f=1", "display_name": "snivy9014", "link": "https://stackoverflow.com/users/7406784/snivy9014"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116201, "favorite_count": 8, "closed_date": 1484216005, "accepted_answer_id": 41601909, "answer_count": 4, "score": 19, "last_activity_date": 1547237891, "creation_date": 1484170030, "last_edit_date": 1506104228, "question_id": 41600981, "link": "https://stackoverflow.com/questions/41600981/how-do-i-check-if-a-key-is-pressed-on-c", "closed_reason": "Needs more focus", "title": "How do I check if a Key is pressed on C++", "body": "<p>How could I possibly check if a Key is pressed on Windows?</p>\n"}, {"tags": ["c++", "qt", "qt-creator"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1484169032, "post_id": 41600681, "comment_id": 70404254, "body": "Its about scope. Your window no longer exists in your first example (after the constructor finishes) while the scope in the second example is as long as main()."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "is_accepted": true, "score": 2, "last_activity_date": 1484172350, "last_edit_date": 1484172350, "creation_date": 1484169175, "answer_id": 41600783, "question_id": 41600681, "link": "https://stackoverflow.com/questions/41600681/how-to-create-and-display-the-mainwindow-outside-the-main/41600783#41600783", "title": "How to create and display the MainWindow outside the Main()?", "body": "<p>The window closes because it is local variable of the Test constructor, and when the constructor exits, its destructor gets called, which closes it. You need to make the window object a member variable of the Test class.</p>\n"}], "owner": {"reputation": 15, "user_id": 6415557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2899703b04552ffdb66d19a4e917f012?s=128&d=identicon&r=PG&f=1", "display_name": "Skydyver", "link": "https://stackoverflow.com/users/6415557/skydyver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 41600783, "answer_count": 1, "score": 0, "last_activity_date": 1484172350, "creation_date": 1484168750, "question_id": 41600681, "link": "https://stackoverflow.com/questions/41600681/how-to-create-and-display-the-mainwindow-outside-the-main", "title": "How to create and display the MainWindow outside the Main()?", "body": "<p>I've made LONG research on the web but can't find anything clear.\nI think the answer is obvious but i'm beginer in Qt.\nWhy this code doesn't work ? My windows just popup realy fast. </p>\n\n<p>Main.cpp</p>\n\n<pre><code>#include &lt;QApplication&gt;\n#include \"test.h\"\n\nint main(int argc, char *argv[])\n{\nQApplication a(argc, argv);\nTest test;\n\nreturn a.exec();\n}\n</code></pre>\n\n<p>Test.cpp</p>\n\n<pre><code>#include \"test.h\"\n\nTest::Test()\n{\n MainWindow w;\n w.show();\n}   \n</code></pre>\n\n<p>And this one work (the window keep open) :</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include &lt;QApplication&gt;\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    MainWindow w;\n    w.show();\n    return a.exec();\n}\n</code></pre>\n\n<p>Thank you !</p>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1484167674, "post_id": 41600367, "comment_id": 70403567, "body": "You&#39;re trying to access an object that has bee destroyed resulting in undefined behavior. I suggest you brush up on storage duration and object lifetime."}], "answers": [{"comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1484168318, "post_id": 41600441, "comment_id": 70403877, "body": "fragmentSource does not need to be a pointer to chars. It can remain as a string"}, {"owner": {"reputation": 60686, "user_id": 277176, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2678da280c230bccef9781b8e5fbaf80?s=128&d=identicon&r=PG", "display_name": "Yakov Galka", "link": "https://stackoverflow.com/users/277176/yakov-galka"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 3, "creation_date": 1484168393, "post_id": 41600441, "comment_id": 70403913, "body": "@RichardHodges: it has to be a pointer to char because <code>glShaderSource</code> gets a pointer to an array of pointers to chars, so you must take an address of a pointer to char, so there must be a pointer to char variable. Of course we can change <code>framentSource</code> to be an <code>std::string</code>, but then we&#39;ll need to introduce another variable and refactor some code..."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1484168580, "post_id": 41600441, "comment_id": 70403998, "body": "You can take the address at the point of the call with <code>std::addressof(fragmentSource[0])</code>. Then you never have to worry about pointer lifetime."}, {"owner": {"reputation": 60686, "user_id": 277176, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2678da280c230bccef9781b8e5fbaf80?s=128&d=identicon&r=PG", "display_name": "Yakov Galka", "link": "https://stackoverflow.com/users/277176/yakov-galka"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1484168611, "post_id": 41600441, "comment_id": 70404025, "body": "@RichardHodges: no, that expression is of type <code>const char*</code>, but we need <code>const char *const *</code>."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1484168660, "post_id": 41600441, "comment_id": 70404057, "body": "ah I see... ew!"}], "tags": [], "owner": {"reputation": 60686, "user_id": 277176, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2678da280c230bccef9781b8e5fbaf80?s=128&d=identicon&r=PG", "display_name": "Yakov Galka", "link": "https://stackoverflow.com/users/277176/yakov-galka"}, "is_accepted": true, "score": 11, "last_activity_date": 1484167774, "creation_date": 1484167774, "answer_id": 41600441, "question_id": 41600367, "link": "https://stackoverflow.com/questions/41600367/returning-stdstring-from-method-non-deterministic-behavior/41600441#41600441", "title": "Returning std::string from method non-deterministic behavior?", "body": "<p>Replace</p>\n\n<pre><code>const char* fragmentSource = tools::read_file(_fragmentShaderPath).c_str();\n</code></pre>\n\n<p>with </p>\n\n<pre><code>std::string fragmentSourceStr = tools::read_file(_fragmentShaderPath);\nconst char* fragmentSource = fragmentSourceStr.c_str();\n</code></pre>\n\n<p>and the same thing for the <code>vertexSource</code>.</p>\n\n<p>The issue is that the string you return is a temporary, so it is destroyed after you initialize <code>fragmentSource</code> with a pointer to its data, which makes <code>fragmentSource</code> point to an already destructed storage.</p>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 0, "last_activity_date": 1484169307, "creation_date": 1484169307, "answer_id": 41600815, "question_id": 41600367, "link": "https://stackoverflow.com/questions/41600367/returning-stdstring-from-method-non-deterministic-behavior/41600815#41600815", "title": "Returning std::string from method non-deterministic behavior?", "body": "<p>If it were me, I'd prefer to deal only in c++ types until we actually touch the openGL C api.</p>\n\n<p>So first I'd create a lightweight proxy function in the <code>tools</code> namespace:</p>\n\n<pre><code>namespace tools {\n\n    auto shaderSource(GLuint shaderId, const std::string&amp; source)\n    {\n        auto ptr = std::addressof(source[0]);\n        return glShaderSource(shaderId, 1, std::addressof(ptr), nullptr);\n    }\n\n}\n</code></pre>\n\n<p>Then replace the use of the raw pointer altogether:</p>\n\n<pre><code>auto fragmentSource = tools::read_file(_fragmentShaderPath);\nstd::cout &lt;&lt; \"vertext shader source: \" &lt;&lt; std::endl &lt;&lt; fragmentSource; // empty sometimes\ntools::shaderSource(fragmentShaderID, fragmentSource);\n</code></pre>\n"}], "owner": {"reputation": 302, "user_id": 1887730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bc1a18ba58c577b74afc32b37274828?s=128&d=identicon&r=PG", "display_name": "bam", "link": "https://stackoverflow.com/users/1887730/bam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 41600441, "answer_count": 2, "score": 2, "last_activity_date": 1484176672, "creation_date": 1484167469, "last_edit_date": 1484176672, "question_id": 41600367, "link": "https://stackoverflow.com/questions/41600367/returning-stdstring-from-method-non-deterministic-behavior", "title": "Returning std::string from method non-deterministic behavior?", "body": "<p>I have a method that reads a file and returns its contents as a <code>std::string</code>. I use the returned <code>std::string</code> to compile an OpenGL program. The linking fails (Compiled vertex shader was corrupt.) in some cases due to one or both of the shader parts (read file contents) being <code>NULL</code>.</p>\n\n<ul>\n<li>If I debug my code step by step everything is fine.</li>\n<li>If I print the file contents the linking seems to fail less often.</li>\n</ul>\n\n<p>Why is it behaving differently, where's my mistake?</p>\n\n<p>The <code>cout</code> at the end always prints the correct file contents:</p>\n\n<pre><code>std::string read_file(const char* filePath) {\n    std::string content;\n    std::ifstream stream(filePath, std::ios::in);\n    if (stream.is_open()) {\n        std::string line = \"\";\n        while(getline(stream, line)) {\n            content += \"\\n\" + line;\n        }\n    }\n    std::cout &lt;&lt; \"read_file \" &lt;&lt; content &lt;&lt; \"end read_file\" &lt;&lt; std::endl; // always prints the correct content\n\n    return content; // makes a copy, don't like that, unless RVO?..\n}\n</code></pre>\n\n<p>The <code>fragmentSource</code> and or the <code>vertextSource</code> are sometimes empty:</p>\n\n<pre><code>    GLuint fragmentShaderID = glCreateShader(GL_FRAGMENT_SHADER);\n    GLuint vertexShaderID = glCreateShader(GL_VERTEX_SHADER);\n\n    const char* fragmentSource = tools::read_file(_fragmentShaderPath).c_str();\n    std::cout &lt;&lt; \"vertext shader source: \" &lt;&lt; std::endl &lt;&lt; fragmentSource; // empty sometimes\n    glShaderSource(fragmentShaderID, 1, &amp;fragmentSource, NULL);\n    glCompileShader(fragmentShaderID);\n    CheckCompilation(fragmentShaderID);\n\n    const char* vertexSource = tools::read_file(_vertexShaderPath).c_str();\n    std::cout &lt;&lt; \"vertext shader source: \" &lt;&lt; std::endl &lt;&lt; vertexSource; // empty sometimes\n    glShaderSource(vertexShaderID, 1, &amp;vertexSource, NULL);\n    glCompileShader(vertexShaderID);\n    CheckCompilation(vertexShaderID);\n\n    GLuint programId = glCreateProgram();\n    glAttachShader(programId, fragmentShaderID);\n    glAttachShader(programId, vertexShaderID);\n    glLinkProgram(programId);\n\n    GLint result = GL_FALSE;\n    GLint infoLogLength;\n    glGetProgramiv(programId, GL_LINK_STATUS, &amp;result);\n    glGetProgramiv(programId, GL_INFO_LOG_LENGTH, &amp;infoLogLength);\n    if (infoLogLength &gt; 0) { // this fails sometimes, corresponding to either vertexSource or fragmentSource being empty\n        std::vector&lt;char&gt; infoLog(infoLogLength + 1);\n        glGetProgramInfoLog(programId, infoLogLength, NULL, &amp;infoLog[0]);\n        std::cout &lt;&lt; &amp;infoLog[0] &lt;&lt; std::endl;\n    }\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1484167002, "post_id": 41600198, "comment_id": 70403199, "body": "&quot;Won&#39;t all variables be assigned default value zero?&quot; No, they won&#39;t. Why would you think they should be?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7333237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d213a23b303db48e2f44a9080b8161b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aisha", "link": "https://stackoverflow.com/users/7333237/aisha"}, "edited": false, "score": 0, "creation_date": 1484271300, "post_id": 41600244, "comment_id": 70453106, "body": "This cleared a lot. Thank you!"}], "tags": [], "owner": {"reputation": 6654, "user_id": 111143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yhf9U.jpg?s=128&g=1", "display_name": "Tommy Andersen", "link": "https://stackoverflow.com/users/111143/tommy-andersen"}, "is_accepted": false, "score": 1, "last_activity_date": 1484167660, "last_edit_date": 1484167660, "creation_date": 1484167008, "answer_id": 41600244, "question_id": 41600198, "link": "https://stackoverflow.com/questions/41600198/different-initialization-values-of-variables-in-c/41600244#41600244", "title": "Different initialization values of variables in c++", "body": "<p>Static variables are zero initialized, non-static variables are not initialised, and keeps the value that incidently is in memory at the location of the variable.</p>\n\n<p>The reason why variables are not zero initialized is that it comes with a cost, it costs to initialize variables, and since C++ (and C) are high performance languages where you do not pay for what you do not use, they do not perform this initialisation.</p>\n\n<p>Statics however are free to initialize, and are therefore zero initialized. This is one of the areas where the reason why it works like this in C++ is because it works like this in C, and C++ was thought of as a next iteration of C, and therefore keeps many of the same principles.</p>\n\n<p>This is actually covered in the beginning of the Scott Meyers talk: <a href=\"https://youtu.be/48kP_Ssg2eY?t=6m11s\" rel=\"nofollow noreferrer\">\"The last thing D needs\"</a></p>\n\n<pre><code>int x;            //  x = uninitialized\nint x;            // &lt;-- in global scope: x = 0\nstatic int x;     //  x = 0\nint* x = new int; // *x = uninitialized\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7333237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d213a23b303db48e2f44a9080b8161b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aisha", "link": "https://stackoverflow.com/users/7333237/aisha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "closed_date": 1484167272, "answer_count": 1, "score": 0, "last_activity_date": 1484167660, "creation_date": 1484166829, "question_id": 41600198, "link": "https://stackoverflow.com/questions/41600198/different-initialization-values-of-variables-in-c", "closed_reason": "Duplicate", "title": "Different initialization values of variables in c++", "body": "<p>What is the default value, variables are assigned when they are not initialized?\nIn the below code, i have not initialized variables - count and j however, i am getting different values. Won't all variables be assigned default value zero?Unable to understand.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;sstream&gt;\nusing namespace std;\n\n    int main()\n    {\n    char str[] (\"Hello World!!!\");\n    char *p;\n    int i;\n    int count;\n    int j;\n\n    cout &lt;&lt; \"count is:\" &lt;&lt; count &lt;&lt; endl;\n    cout &lt;&lt;\"Value of j is \" &lt;&lt; j &lt;&lt;endl;\n\n    p=str;\n\n    for (i=0;i&lt;20;i++){\n        cout &lt;&lt; *p;\n        p++;\n    }\n\n    cout &lt;&lt; \"Length of string is:\" &lt;&lt; count &lt;&lt;endl;\n\n    }\n</code></pre>\n\n<p>o/p</p>\n\n<p>count is:4198400\nValue of j is:1\nHello World!!!\nLength of string is:4198400</p>\n"}, {"tags": ["c++", "visual-studio", "windows-10-universal"], "comments": [{"owner": {"reputation": 302, "user_id": 4603628, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UfFoC.jpg?s=128&g=1", "display_name": "aemorales1", "link": "https://stackoverflow.com/users/4603628/aemorales1"}, "edited": false, "score": 0, "creation_date": 1484168144, "post_id": 41600158, "comment_id": 70403799, "body": "have you verified that the path exists?"}, {"owner": {"reputation": 10000, "user_id": 5620055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7e3M5.jpg?s=128&g=1", "display_name": "Sunteen Wu", "link": "https://stackoverflow.com/users/5620055/sunteen-wu"}, "edited": false, "score": 0, "creation_date": 1484190292, "post_id": 41600158, "comment_id": 70411221, "body": "What&#39;s your visual studio version. What project you are creating?"}], "owner": {"reputation": 449, "user_id": 4318531, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zHivq.jpg?s=128&g=1", "display_name": "Vaderico", "link": "https://stackoverflow.com/users/4318531/vaderico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 244, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1484166687, "creation_date": 1484166687, "question_id": 41600158, "link": "https://stackoverflow.com/questions/41600158/c-microsoft-visual-studio-could-not-find-part-of-the-path", "title": "C++ - Microsoft Visual Studio - Could not find part of the path &quot;...&quot;", "body": "<p>I'm trying to create a C++ Windows Universal App on Windows 10.\nWhen I try an start a new project I get the following error message:</p>\n\n<p><a href=\"https://i.stack.imgur.com/GWQfW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GWQfW.png\" alt=\"enter image description here\"></a></p>\n\n<p>When I click OK I get this message:</p>\n\n<p><a href=\"https://i.stack.imgur.com/aVkZ0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aVkZ0.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p>If anyone could help my out I would be very grateful.</p>\n"}, {"tags": ["c++", "arrays", "algorithm", "c++11", "constexpr"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1484166895, "post_id": 41600157, "comment_id": 70403153, "body": "If the array is const, you can&#39;t change it."}, {"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1484167154, "post_id": 41600157, "comment_id": 70403287, "body": "I do not have much experience with new C++ feature but it does not make sense to declare an array constexpr if you want to modify it afterwards. Either, the array is constant or not."}, {"owner": {"reputation": 1009, "user_id": 4044399, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-so9b_hyiueo/AAAAAAAAAAI/AAAAAAAAADg/a32_3oCvIe4/photo.jpg?sz=128", "display_name": "Willy Goat", "link": "https://stackoverflow.com/users/4044399/willy-goat"}, "edited": false, "score": 0, "creation_date": 1484167477, "post_id": 41600157, "comment_id": 70403474, "body": "@latedeveloper How to I make stuff at compiletime that isn&#39;t &#39;const&#39; then?"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1484167567, "post_id": 41600157, "comment_id": 70403513, "body": "@WillyGoat - exactly... what do you want make at compile time? Duplicate a list of values in an array?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1484167678, "post_id": 41600157, "comment_id": 70403569, "body": "@Willy I don&#39;t understand what you are asking."}, {"owner": {"reputation": 1009, "user_id": 4044399, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-so9b_hyiueo/AAAAAAAAAAI/AAAAAAAAADg/a32_3oCvIe4/photo.jpg?sz=128", "display_name": "Willy Goat", "link": "https://stackoverflow.com/users/4044399/willy-goat"}, "reply_to_user": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1484168004, "post_id": 41600157, "comment_id": 70403737, "body": "@max66 I&#39;m implementing something that uses a very large array of precomputed values which wrap around once. I can&#39;t do this without printing out values and copy-pasting them into my code?"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1484168222, "post_id": 41600157, "comment_id": 70403833, "body": "@WillyGoat - a couple of other question. (1) what do you mean with &quot;very large&quot;? (2) is ok for you if the array become the member of a templare <code>struct</code>?"}, {"owner": {"reputation": 1009, "user_id": 4044399, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-so9b_hyiueo/AAAAAAAAAAI/AAAAAAAAADg/a32_3oCvIe4/photo.jpg?sz=128", "display_name": "Willy Goat", "link": "https://stackoverflow.com/users/4044399/willy-goat"}, "reply_to_user": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1484168357, "post_id": 41600157, "comment_id": 70403897, "body": "@max66 By large I mean 512 elements. I initialize the first 256, then copy them to the last 256, similar to my example. And I don&#39;t mind a <code>struct</code>"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1484168937, "post_id": 41600157, "comment_id": 70404206, "body": "@WillyGoat - the number (256*2) can be a problem (but I&#39;m not sure) but... modified my answer"}], "answers": [{"comments": [{"owner": {"reputation": 1009, "user_id": 4044399, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-so9b_hyiueo/AAAAAAAAAAI/AAAAAAAAADg/a32_3oCvIe4/photo.jpg?sz=128", "display_name": "Willy Goat", "link": "https://stackoverflow.com/users/4044399/willy-goat"}, "edited": false, "score": 0, "creation_date": 1484167013, "post_id": 41600208, "comment_id": 70403206, "body": "How do get around that? I don&#39;t mind the array being <code>const</code> at runtime, but I&#39;d like to be able to edit it programmatically at compiletime."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1484167061, "post_id": 41600208, "comment_id": 70403237, "body": "Don&#39;t make it const. Why would you make it const if you want to change it?"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 1009, "user_id": 4044399, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-so9b_hyiueo/AAAAAAAAAAI/AAAAAAAAADg/a32_3oCvIe4/photo.jpg?sz=128", "display_name": "Willy Goat", "link": "https://stackoverflow.com/users/4044399/willy-goat"}, "edited": false, "score": 0, "creation_date": 1484167156, "post_id": 41600208, "comment_id": 70403288, "body": "@WillyGoat - a <code>const</code> (<code>constexpr</code>) variable can only be initialized; you have to insert all values in initialization; and if you want to do something at compiletime, has to be <code>constexpr</code> or templape arguments."}, {"owner": {"reputation": 1009, "user_id": 4044399, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-so9b_hyiueo/AAAAAAAAAAI/AAAAAAAAADg/a32_3oCvIe4/photo.jpg?sz=128", "display_name": "Willy Goat", "link": "https://stackoverflow.com/users/4044399/willy-goat"}, "edited": false, "score": 0, "creation_date": 1484170042, "post_id": 41600208, "comment_id": 70404806, "body": "I appreciate the edit. That&#39;s some crazy c++, but I like Guillaume&#39;s solution the most. Thanks! :)"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 1009, "user_id": 4044399, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-so9b_hyiueo/AAAAAAAAAAI/AAAAAAAAADg/a32_3oCvIe4/photo.jpg?sz=128", "display_name": "Willy Goat", "link": "https://stackoverflow.com/users/4044399/willy-goat"}, "edited": false, "score": 0, "creation_date": 1484170332, "post_id": 41600208, "comment_id": 70404946, "body": "@WillyGoat - you&#39;re wellcome :)"}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 3, "last_activity_date": 1484169144, "last_edit_date": 1484169144, "creation_date": 1484166871, "answer_id": 41600208, "question_id": 41600157, "link": "https://stackoverflow.com/questions/41600157/how-do-you-copy-a-constexpr-array-to-another-constexpr-array-with-stdcopy/41600208#41600208", "title": "How do you copy a constexpr array to another constexpr array with std::copy?", "body": "<p><code>constexpr</code> imply <code>const</code>.</p>\n\n<p>Your <code>std::copy</code> try to modify a <code>const</code> variable.</p>\n\n<p><strong>--- EDIT ---</strong></p>\n\n<p>The OP ask </p>\n\n<blockquote>\n  <p>I'm implementing something that uses a very large array of precomputed values which wrap around once. I can't do this without printing out values and copy-pasting them into my code? </p>\n</blockquote>\n\n<p>What about something as follows?</p>\n\n<pre><code>#include &lt;array&gt;\n#include &lt;iostream&gt;\n\ntemplate &lt;int ... I&gt;\nstruct foo\n { std::array&lt;int, 2U*sizeof...(I)&gt; bar { { I..., I... } }; };\n\nint main()\n {\n   foo&lt;2, 3, 5, 7, 11, 13&gt; v;\n\n   for ( auto const &amp; i : v.bar )\n      std::cout &lt;&lt; i &lt;&lt; \", \";\n\n   // the for print 2, 3, 5, 7, 11, 13, 2, 3, 5, 7, 11, 13,\n\n   std::cout &lt;&lt; std::endl;\n }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11117, "user_id": 1554020, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/49118fbd7e64a00bc99b19d41e5e28e0?s=128&d=identicon&r=PG", "display_name": "yuri kilochek", "link": "https://stackoverflow.com/users/1554020/yuri-kilochek"}, "edited": false, "score": 0, "creation_date": 1484168884, "post_id": 41600642, "comment_id": 70404180, "body": "Also note that <a href=\"http://en.cppreference.com/w/cpp/container/array/begin\" rel=\"nofollow noreferrer\"><code>std::array&lt;T, n&gt;::begin()</code></a>, <a href=\"http://en.cppreference.com/w/cpp/container/array/end\" rel=\"nofollow noreferrer\"><code>std::array&lt;T, n&gt;::end()</code></a> and all other accessors are only <code>constexpr</code> since C++17."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 11117, "user_id": 1554020, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/49118fbd7e64a00bc99b19d41e5e28e0?s=128&d=identicon&r=PG", "display_name": "yuri kilochek", "link": "https://stackoverflow.com/users/1554020/yuri-kilochek"}, "edited": false, "score": 0, "creation_date": 1484168948, "post_id": 41600642, "comment_id": 70404210, "body": "@yurikilochek Indeed, I&#39;ll add that to the answer."}, {"owner": {"reputation": 1009, "user_id": 4044399, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-so9b_hyiueo/AAAAAAAAAAI/AAAAAAAAADg/a32_3oCvIe4/photo.jpg?sz=128", "display_name": "Willy Goat", "link": "https://stackoverflow.com/users/4044399/willy-goat"}, "edited": false, "score": 0, "creation_date": 1484169163, "post_id": 41600642, "comment_id": 70404334, "body": "Thanks. I really appreciate your second sentence. I&#39;ve been confused about the const-ness of <code>constexpr</code>. To me it still doesn&#39;t make sense that something has to be <code>const</code> if you want it to be evaluated at compiletime. What if you need to precompute a huge array that gets altered at runtime?"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 1009, "user_id": 4044399, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-so9b_hyiueo/AAAAAAAAAAI/AAAAAAAAADg/a32_3oCvIe4/photo.jpg?sz=128", "display_name": "Willy Goat", "link": "https://stackoverflow.com/users/4044399/willy-goat"}, "edited": false, "score": 0, "creation_date": 1484169538, "post_id": 41600642, "comment_id": 70404527, "body": "@WillyGoat I added a paragraph to the answer. Hope it helps."}], "tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": true, "score": 4, "last_activity_date": 1484169507, "last_edit_date": 1484169507, "creation_date": 1484168621, "answer_id": 41600642, "question_id": 41600157, "link": "https://stackoverflow.com/questions/41600157/how-do-you-copy-a-constexpr-array-to-another-constexpr-array-with-stdcopy/41600642#41600642", "title": "How do you copy a constexpr array to another constexpr array with std::copy?", "body": "<p>You should make a constexpr function. <code>constexpr</code> imply const, but not inside the scope of a <code>constexpr</code> function.</p>\n\n<pre><code>constexpr auto get_bar() {\n    std::array&lt;int, 6&gt; bar = {1, 2, 3, 0, 0, 0};\n\n    copy(bar.begin(), bar.end() - 3, bar.end() - 3);\n\n    return bar;\n}\n</code></pre>\n\n<p>However, you will need to write your own version of <code>copy</code> because it's not marked as <code>constexpr</code> in the standard library.</p>\n\n<p>Changing the value of a compile time array does not make sense, it's the same thing as asking the compiler to change the type of a variable at runtime. The compiler don't even exist during runtime. However, a constexpr function is executed by the compiler, so it's still make sense to ask it to mutate values. This is why the code above make sense. </p>\n\n<p>Note that most of <code>std::array</code> accessors are not <code>constexpr</code> until C++17.</p>\n"}], "owner": {"reputation": 1009, "user_id": 4044399, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-so9b_hyiueo/AAAAAAAAAAI/AAAAAAAAADg/a32_3oCvIe4/photo.jpg?sz=128", "display_name": "Willy Goat", "link": "https://stackoverflow.com/users/4044399/willy-goat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1318, "favorite_count": 0, "accepted_answer_id": 41600642, "answer_count": 2, "score": 1, "last_activity_date": 1484169619, "creation_date": 1484166685, "last_edit_date": 1484169619, "question_id": 41600157, "link": "https://stackoverflow.com/questions/41600157/how-do-you-copy-a-constexpr-array-to-another-constexpr-array-with-stdcopy", "title": "How do you copy a constexpr array to another constexpr array with std::copy?", "body": "<p>In the following code, I create an array of length 6 and initialize it with 1, 2 and 3 in the first 3 elements. Then I copy the first 3 elements to the last 3 elements. Then I print all the elements in order.</p>\n\n<pre><code>std::array&lt;int, 6&gt; bar = {1, 2, 3};\n\nint main(){\n    // Copy the first 3 elements to the last 3 elements\n    std::copy(bar.begin(), bar.end() - 3, bar.end() - 3);\n\n    // Print all the elements of bar\n    for(auto&amp; i: bar) std::cout &lt;&lt; i &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>It works fine, but when I try to make the array <code>constexpr</code> it no-longer compiles:</p>\n\n<pre><code>constexpr std::array&lt;int, 6&gt; bar = {1, 2, 3};\n\nint main(){\n    // Copy the first 3 elements to the last 3 elements\n    std::copy(bar.begin(), bar.end() - 3, bar.end() - 3); // Won't compile!\n\n    // Print all the elements of bar\n    for(auto&amp; i: bar) std::cout &lt;&lt; i &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Compiling with <code>g++ -std=c++14 main.cpp -o main</code> I get the following error message:</p>\n\n<pre><code>/usr/include/c++/5/bits/stl_algobase.h: In instantiation of \u2018_OI std::__copy_move_a(_II, _II, _OI) [with bool _IsMove = false; _II = const int*; _OI = const int*]\u2019:\n/usr/include/c++/5/bits/stl_algobase.h:438:45:   required from \u2018_OI std::__copy_move_a2(_II, _II, _OI) [with bool _IsMove = false; _II = const int*; _OI = const int*]\u2019\n/usr/include/c++/5/bits/stl_algobase.h:471:8:   required from \u2018_OI std::copy(_II, _II, _OI) [with _II = const int*; _OI = const int*]\u2019\nmain.cpp:115:53:   required from here\n/usr/include/c++/5/bits/stl_algobase.h:402:44: error: no matching function for call to \u2018std::__copy_move&lt;false, true, std::random_access_iterator_tag&gt;::__copy_m(const int*&amp;, const int*&amp;, const int*&amp;)\u2019\n                        _Category&gt;::__copy_m(__first, __last, __result);\n                                            ^\n/usr/include/c++/5/bits/stl_algobase.h:373:9: note: candidate: template&lt;class _Tp&gt; static _Tp* std::__copy_move&lt;_IsMove, true, std::random_access_iterator_tag&gt;::__copy_m(const _Tp*, const _Tp*, _Tp*) [with _Tp = _Tp; bool _IsMove = false]\n         __copy_m(const _Tp* __first, const _Tp* __last, _Tp* __result)\n         ^\n/usr/include/c++/5/bits/stl_algobase.h:373:9: note:   template argument deduction/substitution failed:\n/usr/include/c++/5/bits/stl_algobase.h:402:44: note:   deduced conflicting types for parameter \u2018_Tp\u2019 (\u2018int\u2019 and \u2018const int\u2019)\n                        _Category&gt;::__copy_m(__first, __last, __result);\n</code></pre>\n\n<p>I don't understand this error message at all. Is <code>std::copy</code> not <code>constexpr</code>? If it isn't, it should be, right? Does my code would work if <code>std::copy</code> was <code>constexpr</code>?</p>\n"}, {"tags": ["c++", "algorithm", "dynamic-programming"], "comments": [{"owner": {"reputation": 41, "user_id": 5700633, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c8b73878dd058d600a96c2afa13eec53?s=128&d=identicon&r=PG&f=1", "display_name": "coder", "link": "https://stackoverflow.com/users/5700633/coder"}, "edited": false, "score": 0, "creation_date": 1484166683, "post_id": 41599973, "comment_id": 70403055, "body": "@Josh Lee I have highlighted the portion which needs explaination.Seems you have not read the entire description so please remove the hold"}, {"owner": {"reputation": 155397, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 0, "creation_date": 1484166919, "post_id": 41599973, "comment_id": 70403162, "body": "Questions should be reasonably self-contained; your question is absolutely meaningless without the pages it links to. What if those pages go down (temporarily or permanently)? What if someone else has the same question as you, and tries to search Stack Overflow to see if it&#39;s already been answered? What if someone has limited network connectivity, and doesn&#39;t want to risk clicking on your links?"}, {"owner": {"reputation": 41, "user_id": 5700633, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c8b73878dd058d600a96c2afa13eec53?s=128&d=identicon&r=PG&f=1", "display_name": "coder", "link": "https://stackoverflow.com/users/5700633/coder"}, "reply_to_user": {"reputation": 155397, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 0, "creation_date": 1484166988, "post_id": 41599973, "comment_id": 70403190, "body": "@ks 1322 seems people donot like answering dp questions"}, {"owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "edited": false, "score": 0, "creation_date": 1484214552, "post_id": 41599973, "comment_id": 70421221, "body": "@coder, please note that posting link to <a href=\"https://www.hackerearth.com/practice/algorithms/dynamic-programming/introduction-to-dynamic-programming-1/practice-problems/algorithm/rhezo-and-prime-problems/editorial/\" rel=\"nofollow noreferrer\">editorial</a> is useless because it is locked for me and I guess for everyone here."}, {"owner": {"reputation": 41, "user_id": 5700633, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c8b73878dd058d600a96c2afa13eec53?s=128&d=identicon&r=PG&f=1", "display_name": "coder", "link": "https://stackoverflow.com/users/5700633/coder"}, "reply_to_user": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "edited": false, "score": 0, "creation_date": 1484243875, "post_id": 41599973, "comment_id": 70441198, "body": "@ks1322 my apologies i thought that editorial is open for all , have put the code here hope its fine now"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 5700633, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c8b73878dd058d600a96c2afa13eec53?s=128&d=identicon&r=PG&f=1", "display_name": "coder", "link": "https://stackoverflow.com/users/5700633/coder"}, "edited": false, "score": 0, "creation_date": 1484246967, "post_id": 41607191, "comment_id": 70442824, "body": "@ xashru thanks for such a beautiful explaination i was struggling to understand it from 3 days thanks a lot. hope i get my points back"}], "tags": [], "owner": {"reputation": 2837, "user_id": 5131287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b075fe47cb28e2f62deabe058769ea9?s=128&d=identicon&r=PG&f=1", "display_name": "xashru", "link": "https://stackoverflow.com/users/5131287/xashru"}, "is_accepted": true, "score": 0, "last_activity_date": 1484205325, "creation_date": 1484205325, "answer_id": 41607191, "question_id": 41599973, "link": "https://stackoverflow.com/questions/41599973/confusing-logic-of-dp/41607191#41607191", "title": "Confusing logic of dp", "body": "<p>Here <code>array pre</code>stands for prefix sum, <code>vector v</code> contains prime numbers below <code>MAXN</code>. First line you have commented is<br>\n<code>int p=i-v[j]-1;</code><br>\nHere <code>v[j]</code> is the <code>jth</code> prime number starting from <code>2</code>, <code>dp[i]</code> is the best possible score for first <code>i</code> problems. If you solve <code>v[j]</code> number of consecutive problems (from <code>i</code> and going backward) you are left with <code>i - v[j]</code> problems from the beginning. <code>-1</code> comes from the fact that you cannot solve the <code>(v[j] - 1) th</code> problem from <code>i</code> (backward) (if you do that you will have solved <code>v[j] + 1</code>   consecutive problems which is not prime as <code>v[j]</code> is prime).  </p>\n\n<p>Second line you have commented:<br>\n<code>dp[i]=max(dp[i],dp[p]+pre[i]-pre[p+1]);</code><br>\nIt follows from above since if you solve <code>v[j]</code> problems from <code>i</code> (backward) you get <code>pre[i]-pre[p+1]</code> points and you add that with <code>dp[p]</code> which is best result you already obtained for <code>p</code>. For example if <code>i = 10</code> and <code>v[j] = 3</code> you get <code>dp[10] = max (dp[10],dp[6]+pre[10]-pre[7])</code> which is what you would expect.</p>\n"}], "owner": {"reputation": 41, "user_id": 5700633, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c8b73878dd058d600a96c2afa13eec53?s=128&d=identicon&r=PG&f=1", "display_name": "coder", "link": "https://stackoverflow.com/users/5700633/coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 1, "accepted_answer_id": 41607191, "answer_count": 1, "score": -3, "last_activity_date": 1484205325, "creation_date": 1484165864, "last_edit_date": 1484181469, "question_id": 41599973, "link": "https://stackoverflow.com/questions/41599973/confusing-logic-of-dp", "title": "Confusing logic of dp", "body": "<p>I am trying to solve a dynamic programming question on <a href=\"https://www.hackerearth.com/practice/algorithms/dynamic-programming/introduction-to-dynamic-programming-1/practice-problems/algorithm/rhezo-and-prime-problems/description/\" rel=\"nofollow noreferrer\">hackerearth</a>.\nEven after trying to simulate the logic using pen and paper, I am unable to comprehend the solution (given in the <a href=\"https://www.hackerearth.com/practice/algorithms/dynamic-programming/introduction-to-dynamic-programming-1/practice-problems/algorithm/rhezo-and-prime-problems/editorial/\" rel=\"nofollow noreferrer\">editorial</a>).\nCan someone explain the commented lines? Any help would be greatly appreciated. I have been trying to understand it for 3 days...</p>\n\n<pre><code>#include&lt;bits/stdc++.h&gt;\nusing namespace std;\nconst int MAXN = 5e3+5;\nbool vis[MAXN];\nint ar[MAXN];\nint pre[MAXN];\nvector&lt;int&gt; v;\nint dp[MAXN];\nvoid sieve() {\n    v.push_back(2);\n    for(int i=3;i&lt;MAXN;i+=2) if(!vis[i]) {\n        v.push_back(i);\n        for(int j=i*i;j&lt;MAXN;j+=2*i) vis[j]=true;\n    }\n}\nint main() {\n    // freopen(\"TASK.in\",\"r\",stdin);    \n    // freopen(\"TASK.out\",\"w\",stdout);\n    int n;\n    cin&gt;&gt;n;\n    assert(n&lt;=5000);\n    for(int i=1;i&lt;=n;i++) {\n        scanf(\"%d\",&amp;ar[i]);\n        assert(ar[i]&lt;=100000);\n        pre[i]=pre[i-1]+ar[i];\n    }\n    sieve();\n    dp[0]=dp[1]=0;\n    for(int i=2;i&lt;=n;i++) {\n        dp[i]=dp[i-1];\n        for(int j=0;j&lt;(int)v.size() and v[j]&lt;=i;j++) {\n            int p=i-v[j]-1;//please explain this line\n            if(p==-1) dp[i]=max(dp[i],pre[i]);\n            else dp[i]=max(dp[i],dp[p]+pre[i]-pre[p+1]);// please explain this line \n        }\n    }\n    cout&lt;&lt;dp[n]&lt;&lt;endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1484166054, "post_id": 41599933, "comment_id": 70402742, "body": "Your final example is not <i>casting</i>  - doing <code>A a = b;</code> slices the <code>B</code> to an <code>A</code>, so both the static and dynamic type of <code>a</code> is an A."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1484167030, "post_id": 41599933, "comment_id": 70403217, "body": "Just a quick helpful note: you only get polymorphism in C++ when you use a <i>reference</i> or a <i>pointer</i> to an object."}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1484167497, "post_id": 41599933, "comment_id": 70403487, "body": "It&#39;s also not assignment happening at that point, even though you wrote ="}], "owner": {"reputation": 389, "user_id": 847598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e7692a5956513bcf0038801961650c5?s=128&d=identicon&r=PG", "display_name": "Windel", "link": "https://stackoverflow.com/users/847598/windel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "closed_date": 1484165951, "answer_count": 0, "score": 0, "last_activity_date": 1484166442, "creation_date": 1484165698, "last_edit_date": 1484166442, "question_id": 41599933, "link": "https://stackoverflow.com/questions/41599933/what-happens-to-a-virtual-function-when-assigning-a-subclass-to-its-superclass", "closed_reason": "Duplicate", "title": "What happens to a virtual function when assigning a subclass to its superclass?", "body": "<p>Say I have class <code>B</code> that derives from class <code>A</code>. If <code>B</code> overrides a virtual method <code>f</code> of class <code>A</code>, what exactly happens with this virtual method when I assign an instance of class <code>B</code> into an instance of class <code>A</code>?</p>\n\n<p>Most basic example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nclass A\n{\n  public:\n    virtual void f()\n    {\n      printf(\"I am A\\n\");\n    }\n};\n\nclass B : public A\n{\n  public:\n    virtual void f()\n    {\n      printf(\"I am B\\n\");\n    }\n};\n\nint main()\n{\n  // Instance of B:\n  B b;\n  b.f();\n\n  // Reference to A:\n  A&amp; a_ref = b;\n  a_ref.f();\n\n  // Assignment:\n  A a = b;\n  a.f();\n\n  return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[windel@hoefnix]$ g++ wtf.cpp\n[windel@hoefnix]$ ./a.out \nI am B\nI am B\nI am A\n</code></pre>\n\n<p>When using a reference, all is going as expected, but with a cast, I was put on the wrong foot here.</p>\n"}, {"tags": ["c++", "floating-point", "printf", "double"], "comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 2, "creation_date": 1484165795, "post_id": 41599900, "comment_id": 70402591, "body": "@RawN the C standard functions are also present in C++, and the question includes a <code>namespace</code> directive that isn&#39;t legal C. Please don&#39;t jump to conclusions."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1484166033, "post_id": 41599900, "comment_id": 70402731, "body": "P.S. although the <code>-0.00000</code> was probably caused by a value that is close to but not quite 0, the floating point format allows both +0.0 and -0.0 values."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1484167215, "post_id": 41599900, "comment_id": 70403324, "body": "@MarkRansom I stand corrected."}, {"owner": {"reputation": 17904, "user_id": 364818, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/5fd80d98f96f9adbde7876cbda181715?s=128&d=identicon&r=PG", "display_name": "Mark Lakata", "link": "https://stackoverflow.com/users/364818/mark-lakata"}, "edited": false, "score": 0, "creation_date": 1484174185, "post_id": 41599900, "comment_id": 70406655, "body": "If you tweaked your input values such that <code>k=2.5</code> instead of <code>k=2.4</code>, then your answer would come out exactly correct. <code>k=2.4</code> is where the math starts to suffer from inexactness of floating point values to store decimal values, specifically, 0.4 or 4/10s is not representable in base 2. 0.5 or 5/10 or 1/2 is exactly representable in base 2."}, {"owner": {"reputation": 1123, "user_id": 4667450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/845bd65b7ab8e1749cb1200c2e90b2e4?s=128&d=identicon&r=PG&f=1", "display_name": "Vuk Bibic", "link": "https://stackoverflow.com/users/4667450/vuk-bibic"}, "reply_to_user": {"reputation": 17904, "user_id": 364818, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/5fd80d98f96f9adbde7876cbda181715?s=128&d=identicon&r=PG", "display_name": "Mark Lakata", "link": "https://stackoverflow.com/users/364818/mark-lakata"}, "edited": false, "score": 0, "creation_date": 1484224960, "post_id": 41599900, "comment_id": 70428243, "body": "@MarkLakata I&#39;m submiting this to an online judge, therefore I can&#39;t change the test case. The given test case is the only one that I can&#39;t pass. Do you think it would work with doubles instead of floats? If yes, could you tell me why I&#39;m not able to print a double using printf?"}, {"owner": {"reputation": 1123, "user_id": 4667450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/845bd65b7ab8e1749cb1200c2e90b2e4?s=128&d=identicon&r=PG&f=1", "display_name": "Vuk Bibic", "link": "https://stackoverflow.com/users/4667450/vuk-bibic"}, "reply_to_user": {"reputation": 17904, "user_id": 364818, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/5fd80d98f96f9adbde7876cbda181715?s=128&d=identicon&r=PG", "display_name": "Mark Lakata", "link": "https://stackoverflow.com/users/364818/mark-lakata"}, "edited": false, "score": 0, "creation_date": 1484229384, "post_id": 41599900, "comment_id": 70431229, "body": "@MarkLakata I figuterd it out, I should read in doubles with %lf, but print them with %f."}], "owner": {"reputation": 1123, "user_id": 4667450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/845bd65b7ab8e1749cb1200c2e90b2e4?s=128&d=identicon&r=PG&f=1", "display_name": "Vuk Bibic", "link": "https://stackoverflow.com/users/4667450/vuk-bibic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "closed_date": 1484165645, "answer_count": 0, "score": 0, "last_activity_date": 1484198455, "creation_date": 1484165551, "last_edit_date": 1484198455, "question_id": 41599900, "link": "https://stackoverflow.com/questions/41599900/incorrect-float-division-in-c", "closed_reason": "Duplicate", "title": "Incorrect float division in C++", "body": "<p>I am trying to calculate (a<em>b)/2, where a and b are floats. I am then printing then with printf(\"%.5f\", (a</em>b)/2). The result I am expecting is 187.50000, but instead I am getting the result of 187.49997.\nThis is my code here.</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;cmath&gt;\n\nusing namespace std;\n\nfloat ax, ay, bx, by, k, n;\n\nint main()\n{\n    scanf(\"%f %f %f %f\", &amp;ax, &amp;ay, &amp;bx, &amp;by);\n    if (ay == by || ax == bx) printf(\"N\");\n    else\n    {\n        k = (by - ay)/(bx - ax);\n        n = ay - k*ax;\n\n        if (n == 0) printf(\"N\");\n        else\n        {\n            float a = abs(n);\n            float b = abs(n/k);\n            float c = sqrt(a*a+b*b);\n            printf(\"%.5f %.5f %d\", a+b+c, (a*b)/2, (k &gt; 0 ? (n &gt; 0 ? 2 : 4) : (n &gt; 0 ? 1 : 3)));\n        }\n    }\n\n\n    return 0;\n}\n</code></pre>\n\n<p>The input values I am using are:</p>\n\n<pre><code>12.5 -60 25 -90\n</code></pre>\n\n<p>For this test case, the values for the following variables are:</p>\n\n<pre><code>k = 2.4\nn = 30\na = 30\nb = 12.5\nc = 32.5\n</code></pre>\n\n<p>(a*b)/2 should obviously equal 187.5, but I still get the result of 187.49997.</p>\n\n<p>I am aware that I should always use doubles instead of floats, but I couldn't get around printing doubles with printf. The %.5lf always seems to output -0.00000. I could use some help with that problem too.</p>\n"}, {"tags": ["c++", "windows", "winapi", "enumeration"], "comments": [{"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 3, "creation_date": 1484165348, "post_id": 41599810, "comment_id": 70402354, "body": "The <code>EnumWindowsProc</code> signature is wrong. The second parameter should be <code>LPARAM</code>, not <code>LONG</code>. You also should not be casting <code>buffer</code> to <code>void*</code>, and <code>sizeof(buffer)</code> is wrong because it returns the size in bytes, not the number of characters. That should be 512 (or <code>sizeof(buffer)&#47;sizeof(buffer[0])</code>). This code should never have worked correctly."}, {"owner": {"reputation": 61, "user_id": 7406528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29932912017bc5cee4f6bab7c4d56466?s=128&d=identicon&r=PG&f=1", "display_name": "JackBoy", "link": "https://stackoverflow.com/users/7406528/jackboy"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1484165531, "post_id": 41599810, "comment_id": 70402472, "body": "@CodyGray Thanks I have updated my code both here and on my PC. I still have the binary which works from the above original code(before your corrections)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1484166361, "post_id": 41599810, "comment_id": 70402896, "body": "How are you compiling this? With MinGW C++ I get the expected results - a list of window captions."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 4, "creation_date": 1484166434, "post_id": 41599810, "comment_id": 70402940, "body": "You changed a project setting.  Project &gt; Properties &gt; General &gt; Character Set.  So now you have to use wcout instead of cout.  Do stop using TCHAR."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 3, "creation_date": 1484166439, "post_id": 41599810, "comment_id": 70402944, "body": "It appears that <code>cout</code> is interpreting <code>buffer</code> as a pointer rather than a string. If you have a Unicode build (and so <code>TCHAR</code> is actually <code>wchar_t</code>) you should use <code>wcout</code> instead."}, {"owner": {"reputation": 3522, "user_id": 4964791, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aVT1l.jpg?s=128&g=1", "display_name": "RamblinRose", "link": "https://stackoverflow.com/users/4964791/ramblinrose"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1484166832, "post_id": 41599810, "comment_id": 70403121, "body": "What @JonathanPotter said ^^. Sounds like you stepped up to a Unicode build."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1484168957, "post_id": 41599810, "comment_id": 70404218, "body": "Surely you aren&#39;t needing to support Windows 98."}, {"owner": {"reputation": 61, "user_id": 7406528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29932912017bc5cee4f6bab7c4d56466?s=128&d=identicon&r=PG&f=1", "display_name": "JackBoy", "link": "https://stackoverflow.com/users/7406528/jackboy"}, "edited": false, "score": 0, "creation_date": 1484184886, "post_id": 41599810, "comment_id": 70409797, "body": "I originally compiled this last year with codeblocks, today I compiled this with Visual Studio, which may explain why it didnt work. After changing <code>cout</code> to <code>wcout</code> like suggested above the script works."}], "owner": {"reputation": 61, "user_id": 7406528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29932912017bc5cee4f6bab7c4d56466?s=128&d=identicon&r=PG&f=1", "display_name": "JackBoy", "link": "https://stackoverflow.com/users/7406528/jackboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1484165468, "creation_date": 1484165170, "last_edit_date": 1484165468, "question_id": 41599810, "link": "https://stackoverflow.com/questions/41599810/unexpected-output-from-enumwindows-in-c", "title": "Unexpected output from EnumWindows in C++", "body": "<p>I wrote the following code one year ago to return a list of all the current windows</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;windows.h&gt;\n\nusing namespace std;\n\nBOOL CALLBACK EnumWindowsProc(HWND hwnd, LPARAM lParam)\n{\n    TCHAR buffer[512];\n    SendMessage(hwnd, WM_GETTEXT, 512, (LPARAM)(void*)buffer);\n    cout &lt;&lt; buffer &lt;&lt; endl;\n    return TRUE;\n}\n\nint main()\n{\n    EnumWindows(EnumWindowsProc, NULL);\n    return 0;\n}\n</code></pre>\n\n<p>This code worked when i originally wrote it, however now the result list I am getting is not what I expected.</p>\n\n<p>I am getting the following text repeated around 40 times.</p>\n\n<pre><code>...\n0031F6F0\n0031F6F0\n0031F6F0\n0031F6F0\n0031F6F0\n0031F6F0\n0031F6F0\n...\n</code></pre>\n\n<p>How can I change the 0031F6F0 to read each window name instead of the above, and also why would the code result have changed?</p>\n"}, {"tags": ["c++", "string", "c++11"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1484165267, "post_id": 41599788, "comment_id": 70402305, "body": "&quot; it doesn`t work&quot; Never say that in a question here. Explain what you want, and why your code does not do what you want."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1484165281, "post_id": 41599788, "comment_id": 70402316, "body": "Please <a href=\"https://stackoverflow.com/posts/41599788/edit\">edit</a> your code to contain an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1484165290, "post_id": 41599788, "comment_id": 70402324, "body": "&quot;<i>the other lines just doesn&#39;t modify anything to my string</i>&quot; - yes, they do, just not how you think. You need to use <code>reserve()</code> instead of <code>resize()</code> (and the <code>clear()</code> is redundant either way). &quot;<i>i need to pass this string to my client through a socket</i>&quot; - so what is stopping you?  A line-break delimited string is not necessary the best choice for sending the leaderboard, unless your communication protocol is all text-based to begin with. Otherwise, a binary serialization format using integers for the player count, string lengths, scores, etc would be a better choice."}, {"owner": {"reputation": 83, "user_id": 7318595, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/lGy5r.jpg?s=128&g=1", "display_name": "Darius", "link": "https://stackoverflow.com/users/7318595/darius"}, "edited": false, "score": 0, "creation_date": 1484166948, "post_id": 41599788, "comment_id": 70403171, "body": "If i make cout &lt;&lt;  leaderBord it only apperas PlayerName there.."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1484198168, "post_id": 41599788, "comment_id": 70413236, "body": "@Darius <a href=\"http://ideone.com/lhfCMy\" rel=\"nofollow noreferrer\">works fine for me</a>"}, {"owner": {"reputation": 83, "user_id": 7318595, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/lGy5r.jpg?s=128&g=1", "display_name": "Darius", "link": "https://stackoverflow.com/users/7318595/darius"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1484226054, "post_id": 41599788, "comment_id": 70428944, "body": "@RemyLebeau, it was a problem at my appliaction.. The code works in another cpp file, but when i put it into my app, it doesn`t work anymore. I solved it now :)"}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1484198287, "post_id": 41599941, "comment_id": 70413272, "body": "I would suggest using <code>std::ostringstream</code> instead. I would also suggest caching <code>myPlayer-&gt;getPlayerRoom()-&gt;playersInRoom</code> to a local reference variable, and <code>playersInRoom.at(contor)</code> to another local variable. This will make the code easier to read and maintain."}], "tags": [], "owner": {"reputation": 70, "user_id": 6065843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NGXyO.jpg?s=128&g=1", "display_name": "straceX", "link": "https://stackoverflow.com/users/6065843/stracex"}, "is_accepted": true, "score": 1, "last_activity_date": 1484198264, "last_edit_date": 1484198264, "creation_date": 1484165728, "answer_id": 41599941, "question_id": 41599788, "link": "https://stackoverflow.com/questions/41599788/construct-a-string-with-multiple-lines/41599941#41599941", "title": "Construct a string with multiple lines", "body": "<p>You can use  std::stringstream for this ;</p>\n\n<pre><code>#include &lt;sstream&gt;\n#include &lt;string&gt;\n\nstd::string leaderBoard;\nstd::stringstream sstream;\n\nfor (unsigned contor = 0; contor &lt; myPlayer-&gt;getPlayerRoom()-&gt;playersInRoom.size(); ++contor)\n{\n    sstream &lt;&lt; myPlayer-&gt;getPlayerRoom()-&gt;playersInRoom.at(contor)-&gt;getPlayerName();\n    sstream &lt;&lt; \"-----\";\n    sstream &lt;&lt; to_string(myPlayer-&gt;getPlayerRoom()-&gt;playersInRoom.at(contor)-&gt;getPlayerScore());\n    sstream &lt;&lt; '\\n';\n}\n\nleaderBoard = sstream.str();\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 7318595, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/lGy5r.jpg?s=128&g=1", "display_name": "Darius", "link": "https://stackoverflow.com/users/7318595/darius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1055, "favorite_count": 0, "accepted_answer_id": 41599941, "answer_count": 1, "score": -2, "last_activity_date": 1484198264, "creation_date": 1484165098, "last_edit_date": 1484165931, "question_id": 41599788, "link": "https://stackoverflow.com/questions/41599788/construct-a-string-with-multiple-lines", "title": "Construct a string with multiple lines", "body": "<p>I want to create a \"leaderboard\" into a string. Is this possible ? I have this code, but it doesn`t work..</p>\n\n<pre><code>string leaderBoard;\nleaderBoard.resize(1024);\nleaderBoard.clear();\n\nfor (unsigned contor = 0; contor &lt; myPlayer-&gt;getPlayerRoom()-&gt;playersInRoom.size(); ++contor){\n    leaderBoard += myPlayer-&gt;getPlayerRoom()-&gt;playersInRoom.at(contor)-&gt;getPlayerName();\n    leaderBoard += \"-----\";\n    leaderBoard += to_string(myPlayer-&gt;getPlayerRoom()-&gt;playersInRoom.at(contor)-&gt;getPlayerScore());\n    leaderBoard += '\\n';\n}\n</code></pre>\n\n<p>It puts into my leaderBoard, only the PlayerName (first line), the other lines just doesn`t modify anything to my string.\nIs this possible to create a \"leaderboard\" into a string ? I want to do this because i need to pass this string to my client through  a socket.</p>\n\n<p>PS: Final string should be only 3 lines.</p>\n"}, {"tags": ["c++", "c", "flash"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1484164857, "post_id": 41599678, "comment_id": 70402052, "body": "By reading the framework documentation."}, {"owner": {"reputation": 45, "user_id": 7399522, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/87f2a07c5256ec2cd5c43950741fba93?s=128&d=identicon&r=PG&f=1", "display_name": "Crearo Lisifi", "link": "https://stackoverflow.com/users/7399522/crearo-lisifi"}, "edited": false, "score": 0, "creation_date": 1484164944, "post_id": 41599678, "comment_id": 70402108, "body": "is there a command for ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1484165192, "post_id": 41599678, "comment_id": 70402263, "body": "For what, exactly?"}, {"owner": {"reputation": 45, "user_id": 7399522, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/87f2a07c5256ec2cd5c43950741fba93?s=128&d=identicon&r=PG&f=1", "display_name": "Crearo Lisifi", "link": "https://stackoverflow.com/users/7399522/crearo-lisifi"}, "edited": false, "score": 0, "creation_date": 1484165223, "post_id": 41599678, "comment_id": 70402282, "body": "To know the -flag option from a dylib file"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1484165304, "post_id": 41599678, "comment_id": 70402330, "body": "Do you understand the meaning of the word &quot;documentation&quot;?"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1484165306, "post_id": 41599678, "comment_id": 70402333, "body": "No, as latedeveloper said you read the documentation to know which libs you need to link against, and you read your compiler&#39;s documentation to know what flag is used for specifying libs (in this case -l$(lib_name))"}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1484166060, "last_edit_date": 1592644375, "creation_date": 1484166060, "answer_id": 41600016, "question_id": 41599678, "link": "https://stackoverflow.com/questions/41599678/how-to-know-a-link-flag-from-a-framework/41600016#41600016", "title": "How to know a link flag from a framework?", "body": "<p>The answer may depend on what compiler you use. You'll find the answer in the manual of that compiler.</p>\n<p>Here is an excerpt of one particular compilers <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Link-Options.html\" rel=\"nofollow noreferrer\">manual</a></p>\n<blockquote>\n<p>-l library</p>\n<p>... The linker searches a standard list of directories for the library, which is actually a file named liblibrary.a. The linker then uses this file as if it had been specified precisely by name.</p>\n<p>...     The only difference between using an -l option and specifying a file name is that -l surrounds library with \u2018lib\u2019 and \u2018.a\u2019 and searches several directories.</p>\n</blockquote>\n<p>The documentation fails to mention, that '.so' extended filenames are also considered.</p>\n<p>So, if this is the compiler that you are using, and if the file that you intend to link with is called <code>libSDL2main.a</code>, then you'll know that you'll need to specify <code>-lSDL2main</code> to the link command.</p>\n<hr />\n<p>A framework may provide multiple archive files. The documentation of the framework should tell you which of those files you should link with.</p>\n"}], "owner": {"reputation": 45, "user_id": 7399522, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/87f2a07c5256ec2cd5c43950741fba93?s=128&d=identicon&r=PG&f=1", "display_name": "Crearo Lisifi", "link": "https://stackoverflow.com/users/7399522/crearo-lisifi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1484166060, "creation_date": 1484164760, "question_id": 41599678, "link": "https://stackoverflow.com/questions/41599678/how-to-know-a-link-flag-from-a-framework", "title": "How to know a link flag from a framework?", "body": "<p>For example, I have SDL2/Include and SDL2/lib in my computer\nHow to know what link flags options that will be use by the compiler fir linking options ? How to know it is -lSDL2main ?</p>\n"}, {"tags": ["c++", "multithreading", "concurrency", "pthreads", "posix"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1484164206, "post_id": 41599425, "comment_id": 70401696, "body": "Where do you specify the allocated sizes of the arrays in <code>input</code>??"}, {"owner": {"reputation": 69, "user_id": 6244285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2cdb094ff2542b195d301e79c2da1c2f?s=128&d=identicon&r=PG&f=1", "display_name": "M B", "link": "https://stackoverflow.com/users/6244285/m-b"}, "reply_to_user": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1484164348, "post_id": 41599425, "comment_id": 70401769, "body": "Oh I see it now. So I have to actually declare the size of the array when using pthread? I&#39;ve changed <code>int array[];</code> to <code>int array[size];</code> and it seems like I am getting the correct result.   Is this the correct of doing it? I&#39;ve noticed that the program throws a segmentation fault if I increase the array size.   Thank you very much for your answer."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1484164616, "post_id": 41599425, "comment_id": 70401906, "body": "&quot;So I have to actually declare the size of the array when using pthread?&quot; You always have to specify it. Things like <code>int array[];</code> are only valid as function parameters."}, {"owner": {"reputation": 69, "user_id": 6244285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2cdb094ff2542b195d301e79c2da1c2f?s=128&d=identicon&r=PG&f=1", "display_name": "M B", "link": "https://stackoverflow.com/users/6244285/m-b"}, "edited": false, "score": 0, "creation_date": 1484164741, "post_id": 41599425, "comment_id": 70401976, "body": "Thank you for your reply @latedeveloper. I&#39;ve changed all the array declarations to make sure that they include their intended size and my program is working fine. Thank you guys so much for help!"}, {"owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "edited": false, "score": 0, "creation_date": 1484164807, "post_id": 41599425, "comment_id": 70402025, "body": "You should declare the size of any array before you even use it. It boggles my mind that your code doesn&#39;t crash even without the other thread."}, {"owner": {"reputation": 74, "user_id": 2212484, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d18e3c08e6f0b5b8965c7446455c7c14?s=128&d=identicon&r=PG", "display_name": "Stamatis Liatsos", "link": "https://stackoverflow.com/users/2212484/stamatis-liatsos"}, "edited": false, "score": 0, "creation_date": 1484166925, "post_id": 41599425, "comment_id": 70403164, "body": "I am not sure if this the issue but it looks like you are overwritting some part of the Memory. You have specified an array without a predefined length on the Arguments struct that you haven&#39;t allocated memory for and then on a later point you start writting values to that array.(I&#39;ve just saw the above comments, my page just refreshed after i posted mine &lt;.&lt;)"}], "answers": [{"tags": [], "owner": {"reputation": 69, "user_id": 6244285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2cdb094ff2542b195d301e79c2da1c2f?s=128&d=identicon&r=PG&f=1", "display_name": "M B", "link": "https://stackoverflow.com/users/6244285/m-b"}, "is_accepted": true, "score": 0, "last_activity_date": 1484173243, "creation_date": 1484173243, "answer_id": 41601775, "question_id": 41599425, "link": "https://stackoverflow.com/questions/41599425/posix-pthread-create-scrambles-the-values-of-variables-in-a-struct-how-to-avoid/41601775#41601775", "title": "POSIX pthread_create scrambles the values of variables in a struct, how to avoid that?", "body": "<p>Ok so if anyone's having a similar problem:</p>\n\n<p>Declare the size of arrays no matter what. It turns out that my program didn't work properly because I initialized my result arrays as <code>float result1[];</code> instead of <code>float result1[size];</code> </p>\n"}], "owner": {"reputation": 69, "user_id": 6244285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2cdb094ff2542b195d301e79c2da1c2f?s=128&d=identicon&r=PG&f=1", "display_name": "M B", "link": "https://stackoverflow.com/users/6244285/m-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 41601775, "answer_count": 1, "score": 0, "last_activity_date": 1484173243, "creation_date": 1484163872, "question_id": 41599425, "link": "https://stackoverflow.com/questions/41599425/posix-pthread-create-scrambles-the-values-of-variables-in-a-struct-how-to-avoid", "title": "POSIX pthread_create scrambles the values of variables in a struct, how to avoid that?", "body": "<p>So I have my program here:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;pthread.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n\nusing namespace std;\n\nint const size = 3;\n\n\nstruct Arguments{\n    int array[];\n    float result1[];\n    float result2[];\n};\n\n\n//void calc(int arr[], float rarr1[], float rarr2[], int size);\nvoid* calc(void *param);\n\nint main(int argc, char *argv[]){\n\n\n\n    time_t t;\n    srand((unsigned) time(&amp;t));\n\n    int arr[size][size] = {};\n    float rarr1[size][size-1] = {};\n    float rarr2[size][size-1] = {};\n\n    for(int x = 0; x &lt; size; x++){\n        for(int y = 0; y &lt; size; y++){\n            int number = rand()%10;\n            arr[x][y] = number;\n        }\n    }\n\n    for(int x = 0; x &lt; size; x++){\n        for(int y = 0; y &lt; size; y++){\n            cout &lt;&lt; arr[x][y] &lt;&lt; \" \";\n        }\n        cout &lt;&lt; endl;\n    }\n\n    cout &lt;&lt; endl;\n\n/////////////////////////////////////////\n\n    pthread_t child;\n\n    struct Arguments input;\n\n    for(int i = 0; i &lt; size; i++){\n\n        input.array[i] = arr[0][i];\n    }\n\n    pthread_create(&amp;child, NULL, calc, (void*)&amp;input);\n    pthread_join(child, NULL);\n\n    //calc(&amp;input);\n\n    for(int i = 0; i &lt; size-1; i++){\n        rarr1[0][i] = input.result1[i];\n        cout &lt;&lt; \"Test: \" &lt;&lt; rarr1[0][i] &lt;&lt; endl;   \n    }\n\n//////////////////////////////////\n\n\n    return 0;\n}\n\n//void calc(int arr[], float rarr1[], float rarr2[], int size){\n\nvoid* calc(void *param){\n\n    struct Arguments *input = (struct Arguments*)param;\n\n    int arr1[] = {};\n\n    float rarr1[] = {};\n    float rarr2[] = {};\n\n    for(int i = 0; i &lt; size; i++){\n\n        arr1[i] = input-&gt;array[i];\n    }\n\n    for(int i = 0; i &lt; size; i++){\n            int a = arr1[i];\n            int b = arr1[i+1];\n\n            int difference = a-b;\n\n            if(difference &lt; 0){\n                difference = difference * -1;\n            }\n\n            float euc = 1 + pow(difference, 2);\n            euc = sqrt(euc);\n\n            rarr1[i] = euc;\n    }\n\n    for(int i = 0; i &lt;size-1; i++){\n        input-&gt;result1[i] = rarr1[i];\n    }\n\n    for(int i = 0; i &lt;size-1; i++){\n\n        int a = arr1[i];\n        int b = arr1[i+1];\n\n        int difference = a-b;\n\n        if(difference &lt; 0){\n            difference = difference * -1;\n        }\n\n        float apar = (difference/rarr1[i]);\n\n        float result = asin(apar);\n        result = result*(180/3.14);\n\n        rarr2[i] = result;\n    }\n\n    return NULL;\n\n}\n</code></pre>\n\n<p>The important part that causes the trouble is between <code>//////</code> lines but I left the rest of the code for the context, since it might be useful. </p>\n\n<p>So I have the function <code>calc(param);</code> that does the important calculation in the program. </p>\n\n<p>It is working just fine as long as I call it myself (by actually including the function call in the code) and the test loop right after it gives the correct results.</p>\n\n<p>However, when I try to use <code>pthread_create();</code> to create a new thread that will take care of executing that function, the test loop spits out nonsense and some random huge numbers different each time.</p>\n\n<p>It's kinda weird because the code compiles either way, and literally the only thing that I change is these 2 lines.</p>\n\n<p>What am I doing wrong and why the function spits out garbage when started by the Pthread? Is there a way to fix it?</p>\n"}, {"tags": ["c++", "sqlite"], "comments": [{"owner": {"reputation": 3403, "user_id": 7135046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8f6eS.jpg?s=128&g=1", "display_name": "SergeyLebedev", "link": "https://stackoverflow.com/users/7135046/sergeylebedev"}, "edited": false, "score": 0, "creation_date": 1484163945, "post_id": 41599335, "comment_id": 70401548, "body": "I seems that your question can be solved completely in <code>SQL</code> field, but explain please more clearly what result are you trying to get"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1484163964, "post_id": 41599335, "comment_id": 70401558, "body": "Do you mean you want to do something like &quot;UPDATE accounts SET balance = balance + 100 WHERE account_id = 42&quot;?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6683825"}, "reply_to_user": {"reputation": 3403, "user_id": 7135046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8f6eS.jpg?s=128&g=1", "display_name": "SergeyLebedev", "link": "https://stackoverflow.com/users/7135046/sergeylebedev"}, "edited": false, "score": 0, "creation_date": 1484164192, "post_id": 41599335, "comment_id": 70401687, "body": "Updated! @SergeyLebedev"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6683825"}, "edited": false, "score": 0, "creation_date": 1484164195, "post_id": 41599335, "comment_id": 70401690, "body": "Yes exactly @latedeveloper, but dynamically, so we don&#39;t know balance, the amount added, or account_id. Thank you!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1484164297, "post_id": 41599335, "comment_id": 70401744, "body": "So just substitute your command line parameters for &quot;100&quot; and &quot;42&quot; in the statement in my previous comment."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6683825"}, "edited": false, "score": 0, "creation_date": 1484164824, "post_id": 41599335, "comment_id": 70402034, "body": "@latedeveloper that did not work, but thanks! I updated my question with that attempt in the code instead of my original one. Is that what you had meant?"}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1484165384, "post_id": 41599782, "comment_id": 70402383, "body": "You should also mention the space you added before <code>WHERE</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1484165455, "post_id": 41599782, "comment_id": 70402430, "body": "@Barmar I made several other changes. I did not intend this to be identical with the OP&#39;s code. Also, it&#39;s considered rude to tell people what they &quot;should&quot; do, better is to say &quot;you could have&quot;."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "is_accepted": true, "score": 0, "last_activity_date": 1484165082, "creation_date": 1484165082, "answer_id": 41599782, "question_id": 41599335, "link": "https://stackoverflow.com/questions/41599335/how-can-i-use-c-to-update-an-sqlite-row-relative-to-its-original-value/41599782#41599782", "title": "How can I use C++ to update an SQLite row relative to its original value?", "body": "<p>You cannot use the + operator to concatenate C-style strings and string literals. A quick and dirty fix:</p>\n\n<pre><code>string bal = string(\"UPDATE accounts SET balance = balance + \") + argv[1] + string( \" WHERE account_id = \" ) + argv[2];\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6683825"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 825, "favorite_count": 0, "accepted_answer_id": 41599782, "answer_count": 1, "score": 0, "last_activity_date": 1484165082, "creation_date": 1484163507, "last_edit_date": 1484164752, "question_id": 41599335, "link": "https://stackoverflow.com/questions/41599335/how-can-i-use-c-to-update-an-sqlite-row-relative-to-its-original-value", "title": "How can I use C++ to update an SQLite row relative to its original value?", "body": "<p>I am trying to update a row in a table in an SQLite database using C++, but I want to update it relative to its current value.</p>\n\n<p>This is what I have tried so far:</p>\n\n<pre><code>int val=argv[2]; \nstring bal = \"UPDATE accounts SET balance = balance + \" + argv[1] + \"WHERE account_id = \" + bal + argv[2];\n\n\nif (sqlite3_open(\"bank.db\", &amp;db) == SQLITE_OK)\n{\n    sqlite3_prepare( db, balance.c_str(), -1, &amp;stmt, NULL );//preparing the statement\n    sqlite3_step( stmt );//executing the statement\n}\n</code></pre>\n\n<p>So that the first parameter is the account_id, and the second parameter is the current balance.\nHowever, this does not work. What can I do to have the database successfully update?</p>\n\n<p>Thank you!</p>\n\n<p>EDIT: Sorry for the confusion. The primary situation is having a table with many entries, each with a unique account id. For example, one has an id of 1 with a balance of 5.</p>\n\n<p>If I run this program with the parameters \"1 5\", the balance should now be 10. If I run it again with \"1 7\", it should be 17.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1484163559, "post_id": 41599298, "comment_id": 70401326, "body": "What are you trying to accomplish?  Find the only non repeated number?"}, {"owner": {"reputation": 4007, "user_id": 1020484, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94c933a9303bcc5b6445fc9e310bcf57?s=128&d=identicon&r=PG", "display_name": "lcs", "link": "https://stackoverflow.com/users/1020484/lcs"}, "edited": false, "score": 0, "creation_date": 1484163622, "post_id": 41599298, "comment_id": 70401368, "body": "There is a function in the <code>&lt;algorithm&gt;</code> library that can be used to find ranges of equal elements. <a href=\"http://www.cplusplus.com/reference/algorithm/equal_range/\" rel=\"nofollow noreferrer\"><code>std::equal_range</code></a>"}, {"owner": {"reputation": 5, "user_id": 7395692, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c54766bcb36f83fd594095e5c7bc92ab?s=128&d=identicon&r=PG&f=1", "display_name": "user7395692", "link": "https://stackoverflow.com/users/7395692/user7395692"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1484163955, "post_id": 41599298, "comment_id": 70401552, "body": "@NathanOliver, this is what I am trying to do: evaluate the vector, remove the repeating number, evaluate it again, remove the repeating number again and so on until there is no repeating number."}, {"owner": {"reputation": 5, "user_id": 7395692, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c54766bcb36f83fd594095e5c7bc92ab?s=128&d=identicon&r=PG&f=1", "display_name": "user7395692", "link": "https://stackoverflow.com/users/7395692/user7395692"}, "reply_to_user": {"reputation": 4007, "user_id": 1020484, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94c933a9303bcc5b6445fc9e310bcf57?s=128&d=identicon&r=PG", "display_name": "lcs", "link": "https://stackoverflow.com/users/1020484/lcs"}, "edited": false, "score": 0, "creation_date": 1484164044, "post_id": 41599298, "comment_id": 70401605, "body": "@lcs, can you, please, explain how to use the function on the example number that I have written? I didn&#39;t understand from the link that you have given."}, {"owner": {"reputation": 1098, "user_id": 6497438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95d4986f27a3f0a255bf095e3b1fd3de?s=128&d=identicon&r=PG&f=1", "display_name": "evan", "link": "https://stackoverflow.com/users/6497438/evan"}, "edited": false, "score": 1, "creation_date": 1484164514, "post_id": 41599298, "comment_id": 70401859, "body": "Should 22233324 reduce to 24 or 4? (22233324 -&gt; 33324 -&gt; 24, or 22233324 -&gt; 22224 -&gt; 4?)"}, {"owner": {"reputation": 5, "user_id": 7395692, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c54766bcb36f83fd594095e5c7bc92ab?s=128&d=identicon&r=PG&f=1", "display_name": "user7395692", "link": "https://stackoverflow.com/users/7395692/user7395692"}, "edited": false, "score": 0, "creation_date": 1484164629, "post_id": 41599298, "comment_id": 70401913, "body": "22233324 -&gt; 24, first the string has to be evaluated and numbers repeating deleted, then re-evaluated and that numbers deleted and so on."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1484166563, "post_id": 41599298, "comment_id": 70402998, "body": "@user7395692 <code>for (long long i = 0 ; i &lt; v.size() ; ++i) { if (v[i] == v[i+1]</code>  - -This is clearly wrong, as <code>i+1</code> is out of bounds of the vector on the last iteration of the loop.  You can see this if <code>v.size() == 1</code>."}, {"owner": {"reputation": 5, "user_id": 7395692, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c54766bcb36f83fd594095e5c7bc92ab?s=128&d=identicon&r=PG&f=1", "display_name": "user7395692", "link": "https://stackoverflow.com/users/7395692/user7395692"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1484167071, "post_id": 41599298, "comment_id": 70403242, "body": "@PaulMcKenzie, so what can I do?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1484169696, "post_id": 41599298, "comment_id": 70404612, "body": "In your sample, why did you start by looking at <code>3</code>?  The first set of repeating values is <code>2</code> (the first two characters).  Also, given your description, you should wind up with &quot;245&quot;, not &quot;24&quot; if the input is &quot;22333333255545&quot;.  Here is the sequence of steps:  22333333255545 (removing the leadiing &quot;2&quot;) -&gt; 333333255545 (Removing the &quot;3&quot;) -&gt; 255545 (Removing the 3 repeating &quot;5&quot;) -&gt; 245.  All unique."}, {"owner": {"reputation": 5, "user_id": 7395692, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c54766bcb36f83fd594095e5c7bc92ab?s=128&d=identicon&r=PG&f=1", "display_name": "user7395692", "link": "https://stackoverflow.com/users/7395692/user7395692"}, "edited": false, "score": 0, "creation_date": 1484235542, "post_id": 41599298, "comment_id": 70435689, "body": "I want to remove just sequences of 3 or more digits."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 7395692, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c54766bcb36f83fd594095e5c7bc92ab?s=128&d=identicon&r=PG&f=1", "display_name": "user7395692", "link": "https://stackoverflow.com/users/7395692/user7395692"}, "edited": false, "score": 0, "creation_date": 1484165026, "post_id": 41599661, "comment_id": 70402155, "body": "Can you explain better, please? I&#39;m a beginner in C++."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 5, "user_id": 7395692, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c54766bcb36f83fd594095e5c7bc92ab?s=128&d=identicon&r=PG&f=1", "display_name": "user7395692", "link": "https://stackoverflow.com/users/7395692/user7395692"}, "edited": false, "score": 0, "creation_date": 1484165693, "post_id": 41599661, "comment_id": 70402550, "body": "@user7395692 I have provided some psuedo code, but this is clearly homework, so you need to be able to handle this yourself"}, {"owner": {"reputation": 5, "user_id": 7395692, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c54766bcb36f83fd594095e5c7bc92ab?s=128&d=identicon&r=PG&f=1", "display_name": "user7395692", "link": "https://stackoverflow.com/users/7395692/user7395692"}, "edited": false, "score": 0, "creation_date": 1484165837, "post_id": 41599661, "comment_id": 70402615, "body": "One more question, by &quot;reset startSeq and endSeq by rolling back to the start of the last sequence.&quot; you mean startSeq = 0 and endSeq = 0?"}, {"owner": {"reputation": 5, "user_id": 7395692, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c54766bcb36f83fd594095e5c7bc92ab?s=128&d=identicon&r=PG&f=1", "display_name": "user7395692", "link": "https://stackoverflow.com/users/7395692/user7395692"}, "edited": false, "score": 0, "creation_date": 1484166131, "post_id": 41599661, "comment_id": 70402782, "body": "And what is n? The size of the vector?"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 5, "user_id": 7395692, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c54766bcb36f83fd594095e5c7bc92ab?s=128&d=identicon&r=PG&f=1", "display_name": "user7395692", "link": "https://stackoverflow.com/users/7395692/user7395692"}, "edited": false, "score": 0, "creation_date": 1484168634, "post_id": 41599661, "comment_id": 70404033, "body": "@user7395692 No i dont mean that, i mean go back to the start of the last sequence. And n is whatever you want it to be. This is psuedo code, you need to implement something and debug it, its the only way you will learn."}], "tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": false, "score": 0, "last_activity_date": 1484165667, "last_edit_date": 1484165667, "creation_date": 1484164701, "answer_id": 41599661, "question_id": 41599298, "link": "https://stackoverflow.com/questions/41599298/verifying-if-the-elements-of-a-vector-are-the-same-on-an-undefined-range/41599661#41599661", "title": "Verifying if the elements of a vector are the same on an undefined range?", "body": "<p>This should be easy enough if you create come simple steps:</p>\n\n<ol>\n<li>Keep a reference to a start of a sequence.</li>\n<li>Keep moving forward until you dont have that sequence anymore.</li>\n<li>If when you end the sequence, your sequence references are more than the distance apart, delete the sequence. </li>\n<li>Reset your start and end sequence pointers by rolling back to the start of the last sequence.</li>\n<li>Keep going until you reach the end of the vector. </li>\n</ol>\n\n<p>Here is some Psuedo Code:</p>\n\n<pre><code>    int maxSeq = n;\n    int startSeq = 0, endSeq = 0;\n\n    while (startSeq and endSeq &lt; vector.size()) {\n        if (vector[++endSeq] != vector[startSeq]) {\n            // our sequence has ended.\n            if (endSeq - startSeq &gt; maxSeq) {\n                // our sequence is long\n                vector.erase( from startSeq to endSeq)\n                reset startSeq and endSeq by rolling back to the start of the last sequence.\n       }\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 7395692, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c54766bcb36f83fd594095e5c7bc92ab?s=128&d=identicon&r=PG&f=1", "display_name": "user7395692", "link": "https://stackoverflow.com/users/7395692/user7395692"}, "edited": false, "score": 0, "creation_date": 1484242279, "post_id": 41618373, "comment_id": 70440317, "body": "I want the program to work like this: find the first sequence, delete it. Re-evaluate the number, find the first sequence, delete it and so on."}], "tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 0, "last_activity_date": 1484570297, "last_edit_date": 1592644375, "creation_date": 1484238795, "answer_id": 41618373, "question_id": 41599298, "link": "https://stackoverflow.com/questions/41599298/verifying-if-the-elements-of-a-vector-are-the-same-on-an-undefined-range/41618373#41618373", "title": "Verifying if the elements of a vector are the same on an undefined range?", "body": "<p>Your problem is not well specified, as in the following sequence <code>222333333255545</code>, it depends on the order you proceed you'll get different results... if you begin geting <code>3</code> chars, you'll get to <code>222255545</code>, then you try with <code>2</code> and get <code>55545</code> and finally you try with <code>5</code> to get <code>45</code>.  This is different if you first try with <code>2</code> to get <code>333333255545</code>, then you try with <code>3</code> to get <code>255545</code> and finally with <code>5</code> to get <code>245</code>, which is different than the first time.</p>\n<h1>Edit after first comment.</h1>\n<p>In case you want to begin on the left (in a greedy approach), where you ask to begin on the left, you have no alternative, but find a sequence of three or more similar digits, and then begin again (on the far left side) as you can miss some data if you continue with your approach.  Your approach is a multipass where you try to find as much similar characters as you can, in each pass:</p>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nstring input = &quot;2233333324455545&quot;;\nconst int N = 3;\n\nint main()\n{\n    cout &lt;&lt; input &lt;&lt; endl;\n    bool finished;\n    int pass = 0;\n    do {\n            finished = true;\n            auto i = input.begin();\n            while (i + N &lt; input.end()) {\n                    auto j = i + 1;\n                    while (j &lt; input.end()) {\n                            if (*i != *j) break;\n                            j++;\n                    }\n                    if (j &gt;= i + N) {\n                            input.erase(i, j);\n                            finished = false;\n                    } else {\n                            i++;\n                    }\n            }\n            cout &lt;&lt; input &lt;&lt; &quot; after pass #&quot; &lt;&lt; ++pass &lt;&lt; endl;\n    } while (!finished);\n} /* main */\n</code></pre>\n<p>Which executes to:</p>\n<pre><code>$ greedy \n2233333324455545\n2224445 after pass #1\n5 after pass #2\n5 after pass #3\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 7395692, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c54766bcb36f83fd594095e5c7bc92ab?s=128&d=identicon&r=PG&f=1", "display_name": "user7395692", "link": "https://stackoverflow.com/users/7395692/user7395692"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1484570297, "creation_date": 1484163359, "question_id": 41599298, "link": "https://stackoverflow.com/questions/41599298/verifying-if-the-elements-of-a-vector-are-the-same-on-an-undefined-range", "title": "Verifying if the elements of a vector are the same on an undefined range?", "body": "<p>For example, I have the number 22333333255545. I want to remove that sequences of 3 and 5. After that, the number is 22245, so the sequence of 2 should be erased and so on, until there is no sequence of 3 or more equal numbers. I know just for the case when only 3 elements are equal, I don't know for an unknown number.</p>\n\n<p>What I have tried(every digit of the number is stored in the vector v,  vsize is the initial size of it):</p>\n\n<pre><code>for (long long i = 0 ; i &lt; v.size() ; ++i) {\n    if (v[i] == v[i+1] &amp;&amp; v[i+1] == v[i+2]) {\n        v.erase(v.begin() + i, v.begin() + i + 3);\n    }\n    vsize--;\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "member-function-pointers"], "answers": [{"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1484166305, "post_id": 41599305, "comment_id": 70402863, "body": "@Quentin Ahem, <a href=\"https://en.wikipedia.org/wiki/West_Highland_White_Terrier\" rel=\"nofollow noreferrer\">Westie</a>!"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1484166690, "post_id": 41599305, "comment_id": 70403061, "body": "Whoops. Busted cover is busted, I don&#39;t know a thing about dogs :( -- But hey, there&#39;s magic and there&#39;s C++, and it&#39;s a dog, that&#39;s like only 25% failure!"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 12, "last_activity_date": 1484163404, "creation_date": 1484163404, "answer_id": 41599305, "question_id": 41599226, "link": "https://stackoverflow.com/questions/41599226/determine-type-from-non-type-template-parameter/41599305#41599305", "title": "Determine type from non-type template parameter", "body": "<blockquote>\n  <p>Is there a way to write a template so that the types can be determined automatically from the non-type template parameter?</p>\n</blockquote>\n\n<p>In C++17, yes, thanks to <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0127r2.html\" rel=\"nofollow noreferrer\">declaring non-type template parameters with <code>auto</code></a>:</p>\n\n<pre><code>template &lt;auto x&gt;\nstruct Test {\n    decltype(x) val{x};\n};\n</code></pre>\n\n<p>Before C++17, no. You'd have to write:</p>\n\n<pre><code>template &lt;class T, T x&gt;\nstruct Test {\n    T val{x};\n};\n</code></pre>\n"}], "owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "accepted_answer_id": 41599305, "answer_count": 1, "score": 4, "last_activity_date": 1484164373, "creation_date": 1484163124, "last_edit_date": 1495541637, "question_id": 41599226, "link": "https://stackoverflow.com/questions/41599226/determine-type-from-non-type-template-parameter", "title": "Determine type from non-type template parameter", "body": "<p>I wish I could do this:</p>\n\n<pre><code>template &lt;typename T x&gt;\nstruct Test {\n    T val{x};\n};\n\nint main() {\n    Test&lt;3&gt; test;\n    return test.val;\n}\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/5628222/1460794\">But I can't. Right?</a></p>\n\n<hr>\n\n<p>I was answering a question <a href=\"https://stackoverflow.com/q/41594595/1460794\">here</a> and I use the following template:</p>\n\n<pre><code>template &lt;typename T, typename V, typename VP, V(T::*getf)(), void (T::*setf)(VP)&gt;\n</code></pre>\n\n<p>Each of the types are manually specified. But that is a duplication because <code>T</code>, <code>V</code> and <code>VP</code> are already contained in the pointers to member functions <code>getf</code> and <code>setf</code>'s types.</p>\n\n<hr>\n\n<p>But if I try a template with only</p>\n\n<pre><code>template &lt;V(T::*getf)(), void (T::*setf)(VP)&gt;\n</code></pre>\n\n<p>or </p>\n\n<pre><code>template &lt;V(T::*getf)(), void (T::*setf)(VP), typename T, typename V, typename VP&gt;\n</code></pre>\n\n<p>then the types cannot be determined.</p>\n\n<hr>\n\n<p>Next I tried specialization:</p>\n\n<pre><code>template &lt;typename T, typename T2&gt;\nstruct Accessor;\n\ntemplate &lt;typename V, typename T, typename VP&gt;\nstruct Accessor &lt;V(T::*)(), void (T::*)(VP)&gt;\n</code></pre>\n\n<p>which will determine all of the types if use </p>\n\n<pre><code>typedef Accessor&lt;\n    decltype(&amp;TargetClass::GetFoo), \n    decltype(&amp;TargetClass::SetFoo)&gt; fooAcessor;\n</code></pre>\n\n<p>But now I don't have the pointers anymore, only the types. </p>\n\n<hr>\n\n<p>Is there a way to write a template so that the types can be determined automatically from the non-type template parameter?</p>\n"}, {"tags": ["c++", "windows", "driver"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1484167442, "post_id": 41599143, "comment_id": 70403460, "body": "but you not try <i>install</i> <code>inf</code> file at all. you call <code>SetupOpenInfFile</code> - tthis function opens an INF file and returns a handle to it. and all. but open handle (which you not close !) - this is not setup"}, {"owner": {"reputation": 23, "user_id": 2809151, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d1aa9ac407d5c98c9528ec0c438dba58?s=128&d=identicon&r=PG&f=1", "display_name": "user2809151", "link": "https://stackoverflow.com/users/2809151/user2809151"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1484255994, "post_id": 41599143, "comment_id": 70447787, "body": "@RbMm - I do call SetupInstallFileEx. After I call StartService I get The system cannot find the file specified. I must mention when I install the INF file (right click -&gt; install) and use OSR driver loader it&#39;s working well. I want to do it with code."}, {"owner": {"reputation": 23, "user_id": 2809151, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d1aa9ac407d5c98c9528ec0c438dba58?s=128&d=identicon&r=PG&f=1", "display_name": "user2809151", "link": "https://stackoverflow.com/users/2809151/user2809151"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1484410873, "post_id": 41599143, "comment_id": 70502996, "body": "@RbMm - Can you please assist if you know the answer?"}], "owner": {"reputation": 23, "user_id": 2809151, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d1aa9ac407d5c98c9528ec0c438dba58?s=128&d=identicon&r=PG&f=1", "display_name": "user2809151", "link": "https://stackoverflow.com/users/2809151/user2809151"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 878, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1484212082, "creation_date": 1484162816, "last_edit_date": 1484212082, "question_id": 41599143, "link": "https://stackoverflow.com/questions/41599143/installing-drivers-inf-and-sys", "title": "Installing drivers inf and sys", "body": "<p>I am trying to install a driver of mine with windows C++. Registering and starting the service is working fine but I have troubles with installing the INF file. I've look over the internet and wrote some code but can't make it work. </p>\n\n<p>Make it short, it doesn't install the INF file. I also checked <code>GetLastError()</code> after I call <code>SetupOpenInfFile</code> and it returns 0.</p>\n\n<pre><code>SC_HANDLE hSCManager;\nSC_HANDLE hService;\nSERVICE_STATUS ss;\nSERVICE_STATUS_PROCESS status;\nHINF HInf;\nUINT ErrorLine;\nPCWSTR szInfFileName = L\"C://scanner.inf\";\nPVOID Context = NULL;\nPBOOL FileWasInUse = NULL;\n\nLPCSTR  SourceFile = \"scanner.sys\";\nLPCSTR SourcePathRoot = \"C://\";\nLPCSTR DestinationName =\"C://scanner.sys\";\nhSCManager = OpenSCManager(NULL, NULL, SC_MANAGER_CREATE_SERVICE);\nprintf(\"Load Driver\\n\");\nif (hSCManager)\n{\nHInf = SetupOpenInfFile(szInfFileName, NULL, INF_STYLE_WIN4, &amp;ErrorLine);\nPCWSTR  SourceFile2 = L\"scanner.sys\";\nPCWSTR SourcePathRoot2 = L\"C://\";\nPCWSTR DestinationName2 = L\"C://scanner.sys\";\n\nSetupInstallFileEx(HInf, NULL, SourceFile2, SourcePathRoot2,  DestinationName2, SP_COPY_FORCE_IN_USE, (PSP_FILE_CALLBACK)CopyMsgHandler, Context, &amp;FileWasInUse);    \n// no error here\nprintf(\"Create Service\\n\");\nhService = CreateService(hSCManager, L\"scanner\", L\"scanner Driver\",  SERVICE_START | DELETE | SERVICE_STOP, SERVICE_KERNEL_DRIVER, SERVICE_DEMAND_START, SERVICE_ERROR_IGNORE, L\"C://scanner.sys\", NULL, NULL, NULL, NULL, NULL);\nif (!hService)\n{\n    hService = OpenService(hSCManager, L\"scanner\", SERVICE_START | DELETE | SERVICE_STOP);\n}\nif (hService)\n{\n    printf(\"Start Service\\n\");\n    StartService(hService, 0, NULL);\n    // I get error here - The system cannot find the file specified.\n\n    printf(\"Press Enter to close service\\r\\n\");\n    getchar();\n    ControlService(hService, SERVICE_CONTROL_STOP, (LPSERVICE_STATUS)&amp;status);\n    CloseServiceHandle(hService);\n    DeleteService(hService);\n}\nCloseServiceHandle(hSCManager);\n}\n</code></pre>\n"}, {"tags": ["c++", "time", "stress-testing"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1484163090, "post_id": 41599100, "comment_id": 70401065, "body": "<code>double n = numbers.size();</code>  Why are you storing the return value of <code>size()</code> in a <code>double</code>?  Second, your loop is <code>O(n*n)</code> -- imagine if there are 1000 numbers -- you will loop a million times."}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 0, "creation_date": 1484163185, "post_id": 41599100, "comment_id": 70401126, "body": "A stress test would imply running the provided function thousands of times with different sized input, timing how long each run takes, and analyzing the results.  That seems to me like a good place to start."}, {"owner": {"reputation": 1942, "user_id": 969365, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/1EnZd.png?s=128&g=1", "display_name": "simon", "link": "https://stackoverflow.com/users/969365/simon"}, "edited": false, "score": 0, "creation_date": 1484163267, "post_id": 41599100, "comment_id": 70401180, "body": "Have they said anything about stress tests in the course, or do they just assume that everyone knows what it is? From just looking at the code I&#39;d say that the currently used algorithm is the &quot;bug&quot;. How would you do if you manually (e.g. pen and paper) want to find two numbers in a list numbers for which the product is greatest? Hint: you only need to go through the vector once and remember two things."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1484163308, "post_id": 41599100, "comment_id": 70401208, "body": "Also, make sure you build your program with optimizations turned on.   This is especially the case with Visual Studio, as vector in debug mode is notoriously slow due to iterator checking."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1484164046, "post_id": 41599100, "comment_id": 70401607, "body": "1) do an optimized build. 2) use a profiler (&#39;perf&#39; is nice on Linux). 3) heed compiler warnings related to performance (and make sure you turn up/on warnings). 4) run a tool like &#39;clang tidy&#39; and pay attention to its performance related checks/warnings."}], "owner": {"reputation": 11, "user_id": 6615765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6963316887b107531d5e5d10dd694113?s=128&d=identicon&r=PG&f=1", "display_name": "2lnk", "link": "https://stackoverflow.com/users/6615765/2lnk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 263, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1484168964, "creation_date": 1484162635, "last_edit_date": 1484168964, "question_id": 41599100, "link": "https://stackoverflow.com/questions/41599100/stress-testing-to-improve-run-time", "title": "Stress Testing to Improve Run Time", "body": "<p>I am taking an open course on Data Structures and Algorithms to get to know C++ a little better. </p>\n\n<p>Basically the code takes the two highest inputs and then multiplies them together. The code that's provided takes a long time to run. They want us to use a stress test to locate and fix the bug in the program and I do not know where to start. </p>\n\n<p>Here is the code that was provided:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\n\nint MaxPairwiseProduct(const vector&lt;int&gt;&amp; numbers) {\nint result = 0;\ndouble n = numbers.size();   \nfor (int i = 0; i &lt; n; ++i) {  \n    for (int j = i + 1; j &lt; n; ++j) { \n        if (numbers[i] * numbers[j] &gt; result) { \n            result = numbers[i] * numbers[j];\n        }\n    }\n}\nreturn result;\n}\nint main() {\n    int n;\n    cin &gt;&gt; n;\n    vector&lt;int&gt; numbers(n);\n    for (int i = 0; i &lt; n; ++i) {\n        cin &gt;&gt; numbers[i];\n    }\n\n    int result = MaxPairwiseProduct(numbers);\n    cout &lt;&lt; result &lt;&lt; \"\\n\";\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "assembly", "nasm", "extern"], "comments": [{"owner": {"reputation": 33092, "user_id": 5801661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8ENZ.jpg?s=128&g=1", "display_name": "Margaret Bloom", "link": "https://stackoverflow.com/users/5801661/margaret-bloom"}, "edited": false, "score": 0, "creation_date": 1484163274, "post_id": 41599097, "comment_id": 70401184, "body": "<code>push&#47;pop ebp</code> is not encodable in 64-bit mode. NASM will fail assembling <code>nasm_test.asm</code>. Check that the assembling is actually taking place with the correct file and result."}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1484163364, "post_id": 41599097, "comment_id": 70401236, "body": "Also your file says <code>nasm_loop.asm</code> but you link with <code>nasm_test.asm</code> instead. Which might explain why it assembles but doesn&#39;t link."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1484216187, "post_id": 41599097, "comment_id": 70422325, "body": "It is difficult to offer solutions when the problem statement is simply, &quot;it doesn&#39;t work&quot;.  Please <a href=\"https://stackoverflow.com/posts/41599097/edit\">edit</a> your question to give a more complete description of what you expected to happen and how that differs from the actual results.  See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> for hints on what makes a good explanation."}], "owner": {"reputation": 118, "user_id": 5377893, "user_type": "registered", "profile_image": "https://graph.facebook.com/1089200197764295/picture?type=large", "display_name": "foxale", "link": "https://stackoverflow.com/users/5377893/foxale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1492788451, "creation_date": 1484162631, "last_edit_date": 1492788451, "question_id": 41599097, "link": "https://stackoverflow.com/questions/41599097/linking-intel-nasm-x86-64-with-c-wont-succeed", "title": "Linking intel nasm x86_64 with C++ won&#39;t succeed", "body": "<p>I am trying to make project in C++ with some calculations in assembly. Now I am trying to make asm function work within C++, but with no success.</p>\n\n<pre class=\"lang-asm prettyprint-override\"><code>;nasm_loop.asm\n\nsection .text\n\nglobal asmfunc\n\n\nasmfunc:\n    push ebp\n    pop ebp\n    ret\n</code></pre>\n\n<p>Makefile:</p>\n\n<pre class=\"lang-make prettyprint-override\"><code>OBJS = source.cpp\n\nCC = g++\n\nCOMPILER_FLAGS = -w\n\nLINKER_FLAGS = -lSDL2\n\nOBJ_NAME = sdltest\n\nall: nasm_test.o $(OBJS)\n    nasm -f elf64 -o nasm_test.o nasm_test.asm\n    $(CC) nasm_test.o $(OBJS) $(COMPILER_FLAGS) $(LINKER_FLAGS) -o $(OBJ_NAME) \n\nnasm_test.o: nasm_test.asm\n    nasm -f elf64 -o nasm_test.o nasm_test.asm\n\n\n\n// source.cpp \nextern \"C\" void asmfunc();\n\nint main()\n{\n    //...\n    asmfunc();\n    //...\n}\n</code></pre>\n\n<p>and output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>lis@lis:~/Desktop/test2$ make\nnasm -f elf64 -o nasm_test.o nasm_test.asm\ng++ nasm_test.o source.cpp -w -lSDL2 -o sdltest \n/tmp/ccI33KiB.o: In function `main':\nsource.cpp:(.text+0x5bb): undefined reference to `asmfunc'\ncollect2: error: ld returned 1 exit status\nMakefile:12: recipe for target 'all' failed\nmake: *** [all] Error 1\n</code></pre>\n\n<p>what am I doing wrong in here? What have I missed linking those files?</p>\n\n<h1>SOLUTION</h1>\n\n<p>I just had to correct Makefile, thanks guys</p>\n\n<pre class=\"lang-make prettyprint-override\"><code>OBJS = source.cpp\n\nCC = g++\n\nCOMPILER_FLAGS = -w\n\nLINKER_FLAGS = -lSDL2\n\nOBJ_NAME = sdltest\n\nall: nasm_loop.o $(OBJS) \n    $(CC) nasm_loop.o $(OBJS) $(COMPILER_FLAGS) $(LINKER_FLAGS) -o $(OBJ_NAME) \n\nnasm_loop.o: nasm_loop.asm\n    nasm -f elf64 -o nasm_loop.o nasm_loop.asm\n</code></pre>\n"}, {"tags": ["c++", "console", "output", "cout"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1484162499, "post_id": 41599030, "comment_id": 70400754, "body": "Possibly useful: <a href=\"http://stackoverflow.com/q/2492077/583833\">Output unicode strings in Windows console app</a>"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1484162598, "post_id": 41599030, "comment_id": 70400812, "body": "<a href=\"http://importblogkit.com/2015/07/does-not-work/\" rel=\"nofollow noreferrer\">Does not work</a> is not a useful problem description."}, {"owner": {"reputation": 3277, "user_id": 5490549, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/hwaF6.png?s=128&g=1", "display_name": "IntoTheDeep", "link": "https://stackoverflow.com/users/5490549/intothedeep"}, "edited": false, "score": 0, "creation_date": 1484162785, "post_id": 41599030, "comment_id": 70400904, "body": "your links did not answer my question"}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1484198730, "post_id": 41599362, "comment_id": 70413402, "body": "Alternatively: <code>cout &lt;&lt; &quot;\\x80&quot;;</code> Alternatively, look at <code>WideCharToMultiByte()</code>"}], "tags": [], "owner": {"reputation": 718, "user_id": 4885127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d03a4283a4fb815a1f77e8793b1c94cf?s=128&d=identicon&r=PG&f=1", "display_name": "Moshe D", "link": "https://stackoverflow.com/users/4885127/moshe-d"}, "is_accepted": true, "score": 2, "last_activity_date": 1484163649, "creation_date": 1484163649, "answer_id": 41599362, "question_id": 41599030, "link": "https://stackoverflow.com/questions/41599030/how-to-really-print-euro-sign-in-c-application-console-in-windows/41599362#41599362", "title": "How to really print EURO sign in c++ application console in Windows", "body": "<p>This worked for me</p>\n\n<pre><code>SetConsoleOutputCP(1252);\ncout &lt;&lt; (char)(128);\n</code></pre>\n"}], "owner": {"reputation": 3277, "user_id": 5490549, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/hwaF6.png?s=128&g=1", "display_name": "IntoTheDeep", "link": "https://stackoverflow.com/users/5490549/intothedeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 1, "is_answered": true, "view_count": 455, "favorite_count": 0, "accepted_answer_id": 41599362, "answer_count": 1, "score": -2, "last_activity_date": 1484163649, "creation_date": 1484162350, "last_edit_date": 1484163094, "question_id": 41599030, "link": "https://stackoverflow.com/questions/41599030/how-to-really-print-euro-sign-in-c-application-console-in-windows", "title": "How to really print EURO sign in c++ application console in Windows", "body": "<p>My target is to print euro sign - \u20ac in c++ application in Windows. Methods that already tried and did not working are:</p>\n\n<pre><code>#include &lt;windows.h&gt;\nSetConsoleOutputCP(1252);\ncout &lt;&lt; \"\\u20a0\";\n</code></pre>\n\n<p>also  <code>\"\\u20a0\"</code> did not working and without <code>SetConsoleOutputCP()</code>. No working solution by far. So much forums and questions, and no straight answer....</p>\n"}, {"tags": ["c++", "visual-studio-2010"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1484161844, "post_id": 41598770, "comment_id": 70400377, "body": "You have an issue with mixing up signed <code>int</code> values and unsigned values.  That should have been obvious, but I guess not."}, {"owner": {"reputation": 3109, "user_id": 6178493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9rTzh.jpg?s=128&g=1", "display_name": "Rama", "link": "https://stackoverflow.com/users/6178493/rama"}, "edited": false, "score": 0, "creation_date": 1484165376, "post_id": 41598770, "comment_id": 70402377, "body": "What is the type for input? and how do you fill it? I think it is important here."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1484167495, "post_id": 41598770, "comment_id": 70403483, "body": "What character set are you using, ASCII or ANSI?  The ASCII character set does not contain &#200;."}], "answers": [{"comments": [{"owner": {"reputation": 2001, "user_id": 1837976, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/05804c6d5abaee9ff88ecc3db83df870?s=128&d=identicon&r=PG", "display_name": "AskMe", "link": "https://stackoverflow.com/users/1837976/askme"}, "edited": false, "score": 0, "creation_date": 1484188174, "post_id": 41600431, "comment_id": 70410687, "body": "Should I write like this: unsigned int ascii; bitset&lt;sizeof(unsigned int)*CHAR_BIT&gt; binary(ascii); Could you please tell me exactly how should i write?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 2001, "user_id": 1837976, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/05804c6d5abaee9ff88ecc3db83df870?s=128&d=identicon&r=PG", "display_name": "AskMe", "link": "https://stackoverflow.com/users/1837976/askme"}, "edited": false, "score": 0, "creation_date": 1484235008, "post_id": 41600431, "comment_id": 70435277, "body": "ASCII is 7-bit, so you can have <code>char ascii;</code>.  ANSI and Unicode need more bits so you will need to have <code>wchar_t ANSI;</code> or <code>unsigned int unicode;</code>  You question was about <code>std::bitset</code>, so I gave you an example."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1484167746, "creation_date": 1484167746, "answer_id": 41600431, "question_id": 41598770, "link": "https://stackoverflow.com/questions/41598770/bitset-equivalent-for-unsigned-int/41600431#41600431", "title": "bitset equivalent for unsigned int", "body": "<p>You have an X-Y problem.</p>\n\n<p>You should be using <em>wide</em> or <em>unicode</em> variable types.  </p>\n\n<p>The <code>std::bitset</code> that you are looking for is:<br>\n<code>std::bitset&lt;sizeof(unsigned int) * CHAR_BIT&gt;</code>.</p>\n\n<p>The <code>sizeof(unsigned int)</code> is the number of bytes in an <code>unsigned int</code>.<br>\nThe <code>CHAR_BIT</code> is the number of bits in a byte.  </p>\n"}], "owner": {"reputation": 2001, "user_id": 1837976, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/05804c6d5abaee9ff88ecc3db83df870?s=128&d=identicon&r=PG", "display_name": "AskMe", "link": "https://stackoverflow.com/users/1837976/askme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 660, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1484167746, "creation_date": 1484161532, "last_edit_date": 1484166783, "question_id": 41598770, "link": "https://stackoverflow.com/questions/41598770/bitset-equivalent-for-unsigned-int", "title": "bitset equivalent for unsigned int", "body": "<p>Writing a program to convert ANSI encoded string to binary. And my ANSI value is \u00c8.</p>\n\n<p>Here is how I'm doing this:</p>\n\n<pre><code> int ascii; //used to store ASCII number of a character\n\nint length = strlen(input);\nchar letter = NULL;\nfor(int x=0;x&lt;length;x++) //repeat until the input is read\n{\n    ascii = input[x];\n    bitset&lt;8&gt; binary(ascii);\n}\n</code></pre>\n\n<p>However, as <code>ascii</code> is int type so I'm getting the value as -56 and when finding its binary using <code>bitset</code> I'm getting 00110011(which is wrong binary value for character \u00c8). Instead I should get the value as 11001000 (correct binary for \u00c8).I understand that if the <code>ascii</code> type would be <code>unsigned int</code>, then I'll get correct binary output. However, <code>bitset</code> is not accepting <code>unsigned int</code> type; hence, is there any equivalent of <code>bitset</code> which would accept <code>unsighed int</code>? OR are there any other way to do this binary conversion?</p>\n"}, {"tags": ["c++", "ruby", "segmentation-fault", "embed"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1484163984, "post_id": 41598494, "comment_id": 70401574, "body": "You&#39;re going to need to trace a little more thoroughly than that."}, {"owner": {"reputation": 173, "user_id": 5202096, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Cj-g4-8M82g/AAAAAAAAAAI/AAAAAAAAAEI/uZarQlx71kU/photo.jpg?sz=128", "display_name": "Strelokhalfer", "link": "https://stackoverflow.com/users/5202096/strelokhalfer"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1484167950, "post_id": 41598494, "comment_id": 70403715, "body": "Hmm, some bug with JUMP_TAG"}], "answers": [{"tags": [], "owner": {"reputation": 2681, "user_id": 486990, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b0220a4b0ec42f2ddc610d0c187b1ee1?s=128&d=identicon&r=PG", "display_name": "thomthom", "link": "https://stackoverflow.com/users/486990/thomthom"}, "is_accepted": false, "score": 0, "last_activity_date": 1575489488, "creation_date": 1575489488, "answer_id": 59183799, "question_id": 41598494, "link": "https://stackoverflow.com/questions/41598494/rb-raise-in-embeded-c-cause-segmentation-fault/59183799#59183799", "title": "rb_raise in embeded c++ cause Segmentation fault", "body": "<p>Late answer, but for anyone who might come across this, uncaught Ruby exceptions will segfault your application. When embedding Ruby in your application you need to use <code>rb_protect</code> to catch the errors.</p>\n\n<p><a href=\"https://silverhammermba.github.io/emberb/c/#exceptions\" rel=\"nofollow noreferrer\">https://silverhammermba.github.io/emberb/c/#exceptions</a></p>\n\n<blockquote>\n  <p>If you\u2019re compiling a library to be loaded by Ruby, you have it easy. Any exceptions raised in the API can be rescued as usual in your Ruby code. If you want to rescue an exception in the API, you can use rb_rescue2() which is similar to Ruby\u2019s rescue.</p>\n</blockquote>\n\n<p>...</p>\n\n<blockquote>\n  <p>If you\u2019re embedding the Ruby interpreter in C, you need to be extremely careful when calling API functions that could raise exceptions: an uncaught exception will segfault the VM and kill your program. You could call rb_rescue2() with rb_eException, but there\u2019s another approach for rescuing all exceptions:\n  <a href=\"https://silverhammermba.github.io/emberb/c/#rb_protect\" rel=\"nofollow noreferrer\"><code>rb_protect</code></a></p>\n</blockquote>\n"}], "owner": {"reputation": 173, "user_id": 5202096, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Cj-g4-8M82g/AAAAAAAAAAI/AAAAAAAAAEI/uZarQlx71kU/photo.jpg?sz=128", "display_name": "Strelokhalfer", "link": "https://stackoverflow.com/users/5202096/strelokhalfer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575489488, "creation_date": 1484160616, "question_id": 41598494, "link": "https://stackoverflow.com/questions/41598494/rb-raise-in-embeded-c-cause-segmentation-fault", "title": "rb_raise in embeded c++ cause Segmentation fault", "body": "<p>I try embed ruby interpretator into my program.\nProgram work well, but if ruby get exeption(in C or ruby itself), program crash with SEGFAULT.\nExpamle:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Ruby/ruby.h\"\n#define RUBY_METH(method) reinterpret_cast&lt; VALUE ( * ) ( ... ) &gt;(method)\nusing namespace std;\n\nint main(int argc, char** argv)\n{\n    cout &lt;&lt; \"Hello world!\" &lt;&lt; endl;\n    ruby_sysinit(&amp;argc, &amp;argv);\n    RUBY_INIT_STACK;\n    ruby_init();\n    ruby_init_loadpath();\n    rb_require(\"./init\");//segfault by \"raise\"\n    rb_raise(rb_eArgError, \"Lol\");//If comment \"raise\" in init.rb, segfault\n\n    return 0;\n}\n</code></pre>\n\n<p>init.rb</p>\n\n<pre><code>p \"lol\"\nraise \n</code></pre>\n\n<p>Console output</p>\n\n<pre><code>Hello world!\n\"lol\"\n&lt;main&gt;: [BUG] Segmentation fault\nruby 1.9.3p551 (2014-11-13) [i386-mingw32]\n\n-- Control frame information -----------------------------------------------\nc:0001 p:0000 s:0002 b:0002 l:000c74 d:000c74 TOP\n\n\n-- C level backtrace information -------------------------------------------\nC:\\WINDOWS\\SYSTEM32\\ntdll.dll(ZwWaitForSingleObject+0xc) [0x76fbe5fc]\nC:\\WINDOWS\\System32\\KERNELBASE.dll(WaitForSingleObject+0x12) [0x75bdad52]\n [0x004b2789]\n [0x00402106]\n [0x00402f6f]\n [0x004f9e90]\n [0x004011ea]\nC:\\WINDOWS\\SYSTEM32\\ntdll.dll(LdrSetAppCompatDllRedirectionCallback+0x1ae9d) [0x76fee0bd]\n</code></pre>\n\n<p>Compile with GNU GCC on windows</p>\n"}, {"tags": ["c++", "oop", "login"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1484160555, "post_id": 41598396, "comment_id": 70399699, "body": "That code doesn&#39;t look like it will compile. Show the real code. Ignoring  that, <code>password =ch_password</code> ---&gt; <code>password == ch_password</code>."}, {"owner": {"reputation": 607, "user_id": 6212731, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/b67dced68f039de9d8d27acdeb04bc2c?s=128&d=identicon&r=PG&f=1", "display_name": "Anais", "link": "https://stackoverflow.com/users/6212731/anais"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1484160789, "post_id": 41598396, "comment_id": 70399836, "body": "that&#39;s it..i don&#39;t know to to make it work..."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1484167910, "post_id": 41598396, "comment_id": 70403696, "body": "Is there any chance you could research the internet for &quot;c++ login system example&quot; or &quot;stackoverflow c++ login system&quot;.  There are already a plethora of similar questions."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1484167975, "post_id": 41598396, "comment_id": 70403726, "body": "A more robust and successful login system uses the <code>std::string</code> class (see your <code>User</code> class).  Using character arrays opens a hole in your program for buffer overflows."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1484168281, "post_id": 41598396, "comment_id": 70403855, "body": "The <code>main</code> function returns an <code>int</code> to the operating system.  Always."}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 1, "last_activity_date": 1484168640, "last_edit_date": 1484168640, "creation_date": 1484168220, "answer_id": 41600548, "question_id": 41598396, "link": "https://stackoverflow.com/questions/41598396/login-system-using-classes-c/41600548#41600548", "title": "Login system using classes c++", "body": "<p>In your <code>Loginn::ptlogin</code> method, the index variable <code>x</code> is not initialized.  </p>\n\n<p>The expression:<br>\n<code>users[x].getUsername;</code></p>\n\n<p>could return anything from memory or access memory that you don't have access to; all depending on the random, uninitialized value of <code>x</code> index.</p>\n\n<p>I highly recommend using <code>std::vector</code> instead of arrays.  Also, pass the index you are referring to (or at least initialize it).  </p>\n\n<p><strong>Edit 1:  The <code>MainMenu</code> function</strong><br>\nIn order to <em>call</em> the login function, you either need to have an instance (variable) of the <code>Login</code> class or make the login function as static.  </p>\n\n<pre><code>void MainMenu(std::vector&lt;User&gt;&amp; users)\n{\n  Loginn instance;\n  instance.ptlogin(users);\n}\n</code></pre>\n\n<p>An alternative is to create the login instance in <code>main</code> and pass it to <code>MainMenu</code>:  </p>\n\n<pre><code>void MainMenu(std::vector&lt;User&gt;&amp; users,\n              Loginn&amp; instance);\n\nint main(void)\n{\n  std::vector&lt;User&gt; users;\n  Loginn instance;\n  MainMenu(users, instance);\n  return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p><strong>Edit 2:  A static method</strong><br>\nIf you have a <code>static</code> method, you don't need an instance to call the method:  </p>\n\n<pre><code>class Loginn\n{\n  public:\n    static void ptlogin(std::vector&lt;User&gt;&amp; users);\n};\n\nvoid MainMenu(std::vector&lt;User&gt;&amp; users)\n{\n  Loginn::ptLogin(users);\n}\n</code></pre>\n"}], "owner": {"reputation": 607, "user_id": 6212731, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/b67dced68f039de9d8d27acdeb04bc2c?s=128&d=identicon&r=PG&f=1", "display_name": "Anais", "link": "https://stackoverflow.com/users/6212731/anais"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6319, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1484168640, "creation_date": 1484160265, "question_id": 41598396, "link": "https://stackoverflow.com/questions/41598396/login-system-using-classes-c", "title": "Login system using classes c++", "body": "<p>Hello I try to implement a login system but I tried so many times and I still don't get it.\nI have a class user and a class login, and a test function..i tried this after a tutorial, but there it was a default username and password, and only that one worked in login, but i need to have the possibility of each user's login;</p>\n\n<pre><code>class User{\n\nprivate:\n\nchar *username;\nchar *password;\n\npublic:\nUser(){}\nUser(char *,char *p){...}\n~User();\nfriend ostream &amp;operator&lt;&lt;(ostream &amp;output, User &amp;u);\nchar* getUsername(){...};\nchar* getPassword(){...};\n};\n\nclass Loginn\n{\npublic:\n    string username;\n    string password;\n\n    Loginn()\n    {\n        username = \"\\0\";\n        password = \"\\0\";\n    }\n\n    };\n\nbool Loginn::ptlogin(User users[])\n{\n    int x;\n    string ch_username = users[x].getUsername;\n    string ch_password = users[x].getPassword;\n    cout &lt;&lt; \"Enter username::\\t\";\n    cin &gt;&gt; username;\n    cout &lt;&lt; \"Enter password::\\t\";\n    cin &gt;&gt; password;\n\n\n    if ((username == ch_username)&amp;&amp;(password =ch_password))\n    {\n        return true;\n    }\n    else\n    {\n        return false;\n    }\n}\n\n\nvoid MainMenu(User users[]);\n{\n//this is from where I want to call login function, not from main()\n}\n\nvoid main()\n{\n\n\n    User u2(\"Jamie15\",\"t3456\");\n    User u3(\"Chris\",\"fgh6\");\n\nUser users[2]={u2,u3};\n\nMainMenu(users);\n\n\n}\n</code></pre>\n\n<p>I want my login system to test if the username and password entered match to a user's password and username, my users are u2 and u3. Thank you!\nAlso, the data type from user needs to stay char, i cannot change it.</p>\n"}, {"tags": ["c++", "oop", "pointers"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 3, "creation_date": 1484160328, "post_id": 41598341, "comment_id": 70399578, "body": "<code>(IObserver*)observer</code> does not do what you think it does - and you are invoking UB"}, {"owner": {"reputation": 3182, "user_id": 5771029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1014844931887743/picture?type=large", "display_name": "Winter", "link": "https://stackoverflow.com/users/5771029/winter"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1484160405, "post_id": 41598341, "comment_id": 70399619, "body": "@UnholySheep Good to know thank you, can you explain why and what to do instead ?"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1484160476, "post_id": 41598341, "comment_id": 70399651, "body": "You need to use the proper C++ casts, e.g.: <code>dynamic_cast</code> - I fixed your example here: <a href=\"http://ideone.com/i3zUsC\" rel=\"nofollow noreferrer\">ideone.com/i3zUsC</a>"}, {"owner": {"reputation": 3182, "user_id": 5771029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1014844931887743/picture?type=large", "display_name": "Winter", "link": "https://stackoverflow.com/users/5771029/winter"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1484160512, "post_id": 41598341, "comment_id": 70399671, "body": "@UnholySheep Thank you, will look at it and learn about dynamic_cast"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1484160628, "post_id": 41598341, "comment_id": 70399742, "body": "@Winter -- Remove the cast.  What error does the compiler give you?  If it gave you an error, read it carefully.  By using a <code>C</code>-style cast such as <code>(IAOberver *)</code>, you told the compiler &quot;I&#39;m not listening to you, so shut up&quot;.  Never cast away error messages, unless you are fully aware of what the error is telling you, know the consequences, and know full well what you&#39;re doing."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1484161105, "post_id": 41598341, "comment_id": 70400002, "body": "Also, 1) why in <code>main</code> are you using <code>new</code>?  C++ is not C#.   <code>A a;</code> is all you need, and 2) Your base class is missing a virtual destructor.  If you went in and tried to <code>delete</code> that object you added to the vector, you would invoke undefined behavior if you attempt to delete it through a base class pointer."}, {"owner": {"reputation": 3182, "user_id": 5771029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1014844931887743/picture?type=large", "display_name": "Winter", "link": "https://stackoverflow.com/users/5771029/winter"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1484163894, "post_id": 41598341, "comment_id": 70401520, "body": "@PaulMcKenzie, because my main was trying to reproduce the real context. This example is a reconstruction. I was just trying to make the smallest example for it. Also, why are you so upset at people for learning ?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1484164986, "post_id": 41598341, "comment_id": 70402131, "body": "Where am I being &quot;upset&quot;?  Read compiler errors, don&#39;t mask them.  Add virtual destructor, don&#39;t use <code>new</code> unnecessarily."}], "answers": [{"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1484161415, "post_id": 41598445, "comment_id": 70400151, "body": "C-style casts do know about C++ objects, and they can perform <code>static_cast</code>s, pointer adjustments included. Only when you mess up do they degrade into a blunt <code>reinterpret_cast</code>."}], "tags": [], "owner": {"reputation": 28147, "user_id": 3857, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TOHg8.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/3857/andy"}, "is_accepted": false, "score": 3, "last_activity_date": 1484167027, "last_edit_date": 1484167027, "creation_date": 1484160459, "answer_id": 41598445, "question_id": 41598341, "link": "https://stackoverflow.com/questions/41598341/object-not-calling-the-good-method-after-casting-its-pointer-to-a-base/41598445#41598445", "title": "Object not calling the good method after casting it&#39;s pointer to a base", "body": "<p>The problem is that you are using C-style casts, when you should be using a <a href=\"http://en.cppreference.com/w/cpp/language/dynamic_cast\" rel=\"nofollow noreferrer\"><code>dynamic_cast</code></a> instead.</p>\n\n<p>C-style casts know nothing of C++ objects, and therefore they do no type checking. In order to cast between base classes in a multiple-inheritance situation, you must use a <code>dynamic_cast</code> to make sure that everything is set up correctly for the new pointer.</p>\n\n<p>If you replace all of the C-style casts in your sample to <code>dynamic_cast</code>, then it should work.</p>\n\n<p>If you want to read more about this, search for C++, v-tables, and multiple inheritance.</p>\n"}, {"comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1484161584, "post_id": 41598681, "comment_id": 70400240, "body": "Basically the problem is that programmers believe they&#39;ve outsmarted the compiler by C-style casting away the errors they receive.  Then stuff like this bites them in the end."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1484161686, "post_id": 41598681, "comment_id": 70400292, "body": "@PaulMcKenzie either that, or they don&#39;t know any better because they have been taught that casts in C++ are &quot;just like C, with the parentheses&quot;. But that&#39;s a rant for another day ;)"}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 2, "last_activity_date": 1484162242, "last_edit_date": 1484162242, "creation_date": 1484161218, "answer_id": 41598681, "question_id": 41598341, "link": "https://stackoverflow.com/questions/41598341/object-not-calling-the-good-method-after-casting-its-pointer-to-a-base/41598681#41598681", "title": "Object not calling the good method after casting it&#39;s pointer to a base", "body": "<p>At the core of your problem is a cross-cast. You have an inheritance hierarchy that looks like this:</p>\n\n<pre><code>[SomeOtherObject]     [IAObserver]\n              \\         /\n               \\       /\n            [AObserverImpl]\n</code></pre>\n\n<p>Inside <code>main()</code>, <code>observer</code> has dynamic type <code>AObserverImpl*</code>, but static type <code>SomeOtherObject*</code>. Then you try to retrieve the <code>IAObserver</code> part of the object which also contains this <code>SomeOtherObject</code>. This is called a cross-cast, a cast across the inheritance tree of an object.</p>\n\n<p>But by the time you do the cast, the information that <code>*observer</code> is actually part of an <code>AObserverImpl</code> has been lost from the type system. So the C-style cast, which is strictly static, degrades into a <code>reinterpret_cast</code> (!!). You get an <code>IAObserver*</code> that actually still points to the very same <code>SomeOtherObject</code>, and trying to then use it only leads to nasty bugs at best.</p>\n\n<p>This is the kind of reasons why you should never use a C-style cast on pointers unless you have a good reason and you know it. Had you used a <code>static_cast</code>, it would have failed to compile.</p>\n\n<p>To solve this, you need to somehow get back the lost type information to perform your cast. Two parties still have that information:</p>\n\n<p><strong>The developer</strong>:</p>\n\n<pre><code>// Downcast to AObserverImpl, then upcast along the other branch\n// The upcast is superfluous, but written here for clarity\na-&gt;addObserver(\n    static_cast&lt;IAObserver*&gt;(\n        static_cast&lt;AObserverImpl*&gt;(observer)\n    )\n);\n</code></pre>\n\n<p>And... <strong>dynamic_cast</strong>:</p>\n\n<pre><code>// dynamic_cast uses RTTI to walk the inheritance graph at runtime.\n// It will also do error checking :)\na-&gt;addObserver(dynamic_cast&lt;IAObserver*&gt;(observer));\n</code></pre>\n"}], "owner": {"reputation": 3182, "user_id": 5771029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1014844931887743/picture?type=large", "display_name": "Winter", "link": "https://stackoverflow.com/users/5771029/winter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 41598681, "answer_count": 2, "score": 1, "last_activity_date": 1484167027, "creation_date": 1484160059, "question_id": 41598341, "link": "https://stackoverflow.com/questions/41598341/object-not-calling-the-good-method-after-casting-its-pointer-to-a-base", "title": "Object not calling the good method after casting it&#39;s pointer to a base", "body": "<p>I have an issue where the method I'm trying to call isn't called and some other method is called instead. It is in a very weird and big design but I managed to do a example out of it. The example is still big the it's the smaller I've been able to do.  </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nclass IObserver \n{\n\n};\n\nclass IAObserver : public IObserver\n{\npublic:\n    virtual void someSpecificMethod(int i) = 0;\n};\n\nclass ISomeOtherObject\n{\npublic:\n    virtual void someMethodFromThatObject() = 0;\n};\n\nclass SomeOtherObject : public ISomeOtherObject\n{\npublic:\n    virtual void someMethodFromThatObject()\n    {\n        std::cout &lt;&lt; \"Some implementation from that object\" &lt;&lt; std::endl;\n    }\n};\n\nclass AObserverImpl : public IAObserver, public SomeOtherObject\n{\npublic:\n    virtual void someSpecificMethod(int i)\n    {\n        std::cout &lt;&lt; \"Some implementation \" &lt;&lt; i &lt;&lt; std::endl;\n    }\n\n    virtual void someMethodFromThatObject()\n    {\n        std::cout &lt;&lt; \"Better implementation from our object\" &lt;&lt; std::endl;\n    }\n};\n\nclass Base\n{\npublic:\n    virtual void addObserver(IObserver* observer) = 0;\n};\n\nclass A : public Base\n{\npublic:\n    virtual void addObserver(IObserver* observer)\n    {\n        m_observers.push_back((IAObserver*)observer);\n    }\n\n    void notifyObservers()\n    {\n        std::vector&lt;IAObserver*&gt;::iterator it;\n        for(it = m_observers.begin(); it != m_observers.end(); it++)\n        {\n            (*it)-&gt;someSpecificMethod(5);\n        }\n    }\n\nprivate:\n    std::vector&lt;IAObserver*&gt; m_observers;\n};\n\nint main()\n{\n    A* a = new A();\n    SomeOtherObject* observer = new AObserverImpl();\n\n    a-&gt;addObserver((IObserver*)observer);\n    a-&gt;notifyObservers(); //output: Better implementation from our object\n}\n</code></pre>\n\n<p>Here's the Ideone <a href=\"http://ideone.com/yAT6M7\" rel=\"nofollow noreferrer\">http://ideone.com/yAT6M7</a> </p>\n\n<p>So as you can see, it is supposed to call the method <code>someSpecificMethod</code> but it's calling the mehod <code>someMethodFromThatObject</code>. Any clue what's going on ? Is this object slicing ? In CLion debugger, I can't even call my <code>someSpecificMethod</code> method. How can I work around this ?</p>\n"}, {"tags": ["c++", "windows", "macos", "qt", "sqlite"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 5, "creation_date": 1484159890, "post_id": 41598267, "comment_id": 70399329, "body": "Why not? It&#39;s just a file."}, {"owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "edited": false, "score": 0, "creation_date": 1484160057, "post_id": 41598267, "comment_id": 70399430, "body": "I know, but is this path (<code>C:&#47;Users&#47;user&#47;AppData&#47;Local&#47;MyApplication&#47;</code>) an appropriate location to store this kind of file?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1484160181, "post_id": 41598267, "comment_id": 70399500, "body": "That&#39;s up to you (I don&#39;t know what you are doing with this database), but in general, yes."}, {"owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "edited": false, "score": 0, "creation_date": 1484160496, "post_id": 41598267, "comment_id": 70399663, "body": "Thanks, @latedeveloper. My database stores some data collected by the user and it should &quot;never&quot; be deleted. Actually, I need to store this database file in some folder that the user will not accidentally delete, even using &quot;cleaner&quot; applications like CCleaner or any other."}, {"owner": {"reputation": 792, "user_id": 3183610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98f2b0aff981925dc8c789fa9cfe1134?s=128&d=identicon&r=PG&f=1", "display_name": "m. c.", "link": "https://stackoverflow.com/users/3183610/m-c"}, "edited": false, "score": 1, "creation_date": 1484172387, "post_id": 41598267, "comment_id": 70405886, "body": "In our application, we use something like note 2.  QStandardPaths::writableLocation(QStandardPaths::ConfigLocat&zwnj;&#8203;ion) / databases"}], "answers": [{"comments": [{"owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "edited": false, "score": 0, "creation_date": 1492877573, "post_id": 43561175, "comment_id": 74173959, "body": "Thanks for the suggestion. It seems to be a great/better place to store the DB file but I&#39;m already storing it in <code>QStandardPaths::ConfigLocat\u200c\u200bion</code>, and I&#39;m using <b>Qt 5.3</b> and this enum was added in <b>Qt 5.4</b>."}, {"owner": {"reputation": 309, "user_id": 1339564, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b45f0e6c1abf28315f76ae8847b32ef6?s=128&d=identicon&r=PG", "display_name": "Neil Stoker", "link": "https://stackoverflow.com/users/1339564/neil-stoker"}, "reply_to_user": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "edited": false, "score": 0, "creation_date": 1492878098, "post_id": 43561175, "comment_id": 74174114, "body": "That would make it difficult to use!"}], "tags": [], "owner": {"reputation": 309, "user_id": 1339564, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b45f0e6c1abf28315f76ae8847b32ef6?s=128&d=identicon&r=PG", "display_name": "Neil Stoker", "link": "https://stackoverflow.com/users/1339564/neil-stoker"}, "is_accepted": false, "score": 1, "last_activity_date": 1492875795, "creation_date": 1492875795, "answer_id": 43561175, "question_id": 41598267, "link": "https://stackoverflow.com/questions/41598267/where-can-i-store-an-sqlite-database-on-windows-and-os-x/43561175#43561175", "title": "Where can I store an SQLite database on Windows and OS X?", "body": "<p>Does <code>QStandardPaths::AppDataLocation</code> cover your requirements for this?</p>\n\n<p>From the <a href=\"http://doc.qt.io/qt-5/qstandardpaths.html\" rel=\"nofollow noreferrer\">qt documentation</a>:</p>\n\n<blockquote>\n  <p>Returns a directory location where persistent application data can be\n  stored. This is an application-specific directory. To obtain a path to\n  store data to be shared with other applications, use\n  QStandardPaths::GenericDataLocation. The returned path is never empty.\n  On the Windows operating system, this returns the roaming path. This\n  enum value was added in Qt 5.4.</p>\n</blockquote>\n"}], "owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492875795, "creation_date": 1484159792, "last_edit_date": 1495540021, "question_id": 41598267, "link": "https://stackoverflow.com/questions/41598267/where-can-i-store-an-sqlite-database-on-windows-and-os-x", "title": "Where can I store an SQLite database on Windows and OS X?", "body": "<p>I'm developing a <strong>Qt</strong> application that will be distributed on <strong>Windows</strong> and <strong>OS X</strong>.</p>\n\n<p>The application makes use of an <strong>SQLite</strong> database. Where can I keep the database file on both systems for it not to be overridden during application updates?</p>\n\n<p><strong>Note 1</strong>:\nI already find a similar <a href=\"https://stackoverflow.com/questions/14123126/where-to-put-sqlite-database-to-keep-it-from-being-over-ridden-during-update-on\">question</a> about that for <strong>OS X</strong>. The answer was to keep it in the <code>Application Support</code> using the following command:</p>\n\n<pre><code>NSString * supportDir = [NSSearchPathForDirectoriesInDomains(NSApplicationSupportDir\u200c\u200bectory, NSUserDomainMask, YES) lastObject];\n</code></pre>\n\n<p>But I need to do that on <strong>Windows</strong> too. Should I use this command on <strong>Windows</strong> too?</p>\n\n<p><strong>Note 2</strong>:\nI'm using an INI file to store my application settings as follows:</p>\n\n<pre><code>QString path = QStandardPaths::writableLocation(QStandardPaths::ConfigLocation);\nQSettings *settings = new QSettings(path+\"/Settings.ini\", QSettings::IniFormat);\n</code></pre>\n\n<p>The <code>path</code> variable is <code>C:/Users/user/AppData/Local/MyApplication/</code> (Windows).</p>\n\n<p>Can I store the database file in the same path?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["python", "c++", "boost", "polymorphism", "boost-python"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7080206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CMb7.jpg?s=128&g=1", "display_name": "Donald Cheung", "link": "https://stackoverflow.com/users/7080206/donald-cheung"}, "edited": false, "score": 0, "creation_date": 1484392920, "post_id": 41622042, "comment_id": 70497655, "body": "Thanks for your solution, it did solved my problem. I also find the manual: <a href=\"http://www.boost.org/doc/libs/1_45_0/libs/python/doc/v2/return_internal_reference.html\" rel=\"nofollow noreferrer\">link</a>"}], "tags": [], "owner": {"reputation": 476, "user_id": 2151126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dac250064d72133812e075353b785e11?s=128&d=identicon&r=PG", "display_name": "Grisha", "link": "https://stackoverflow.com/users/2151126/grisha"}, "is_accepted": true, "score": 1, "last_activity_date": 1484251702, "creation_date": 1484251702, "answer_id": 41622042, "question_id": 41598229, "link": "https://stackoverflow.com/questions/41598229/typeerror-no-to-python-by-value-converter-found-for-c-type/41622042#41622042", "title": "TypeError: No to_python (by-value) converter found for C++ type", "body": "<p>This code works for me:</p>\n\n<pre><code>struct Base {\n    virtual ~Base() {};\n    virtual char const *hello() {\n        return \"Hello. I'm Base.\";\n    };\n};\n\nstruct Derived : Base {\n    char const *hello() {\n        return \"Hello. I'm Derived.\";\n    };\n\n    Base &amp;test(bool derived) {\n        static Base b;\n        static Derived d;\n        if (derived) {\n            return d;\n        } else {\n            return b;\n        }\n    }\n};\n\nBOOST_PYTHON_MODULE(wrapper)\n{\n    using namespace boost::python;\n    class_&lt;Base&gt;(\"Base\")\n        .def(\"hello\", &amp;Base::hello)\n        ;\n\n    class_&lt;Derived, bases&lt;Base&gt;&gt;(\"Derived\")\n        .def(\"test\", &amp;Derived::test, return_internal_reference&lt;&gt;())\n        ;\n}\n</code></pre>\n\n<p>Testing module:  </p>\n\n<pre><code>&gt;&gt;&gt; import wrapper\n&gt;&gt;&gt; d = wrapper.Derived()\n&gt;&gt;&gt; d.test(True).hello()\n\"Hello. I'm Derived.\"\n&gt;&gt;&gt; d.test(False).hello()\n\"Hello. I'm Base.\"\n&gt;&gt;&gt;\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7080206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CMb7.jpg?s=128&g=1", "display_name": "Donald Cheung", "link": "https://stackoverflow.com/users/7080206/donald-cheung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2444, "favorite_count": 1, "accepted_answer_id": 41622042, "answer_count": 1, "score": 0, "last_activity_date": 1484251702, "creation_date": 1484159649, "last_edit_date": 1495540912, "question_id": 41598229, "link": "https://stackoverflow.com/questions/41598229/typeerror-no-to-python-by-value-converter-found-for-c-type", "title": "TypeError: No to_python (by-value) converter found for C++ type", "body": "<p>I'm trying to expose my C++ Classes to Python using Boost.Python. Here is a simplyfied version of what I'm trying to do:</p>\n\n<pre><code>struct Base {\n    virtual ~Base() {};\n    virtual char const *Hello() {\n        printf(\"Base.Hello\\n\");\n        return \"Hello. I'm Base.\";\n    };\n};\n\nstruct Derived : Base {\n    char const *Hello() {\n        printf(\"Derived.Hello\\n\");\n        return \"Hello. I'm Derived.\";\n    };\n\n    Base &amp;test() {\n        printf(\"Derived.test\\n\");\n        // ...\n        // After some calculation, we get result reference `instance'\n        // `instance' can be an instance of Base or Derived.\n        // ...\n        return instance;\n    }\n};\n</code></pre>\n\n<p>I want to use above classes as follows in python:</p>\n\n<pre><code>instance = Derived()\n\n// If method test returns an instance of Base\ninstance.test().Hello() // Result: \"Hello. I'm Base.\"\n\n// If method test returns an instance of Derived\ninstance.test().Hello() // Result: \"Hello. I'm Derived.\"\n</code></pre>\n\n<p>I didn't know any nice solution to this problem. I just tried this:</p>\n\n<pre><code>struct BaseWrapper : Base, wrapper&lt;Base&gt; {\n    char const *Hello() {\n        printf(\"BaseWrapper.Hello\\n\");\n        if (override Hello = this-&gt;get_override(\"Hello\")) {\n            return Hello();\n        }\n        return Base::Hello();\n    }\n\n    char const *default_Hello() {\n        printf(\"BaseWrapper.default_Hello\\n\");\n        return this-&gt;Base::Hello();\n    }\n};\n\nstruct DerivedWrapper : Derived, wrapper&lt;Derived&gt; {\n    char const *Hello() {\n        printf(\"DerivedWrapper.Hello\\n\");\n        if (override Hello = this-&gt;get_override(\"Hello\")) {\n            return Hello();\n        }\n        return Derived::Hello();\n    }\n\n    char const *default_Hello() {\n        printf(\"DerivedWrapper.default_Hello\\n\");\n        return this-&gt;Derived::Hello();\n    }\n\n    Base &amp;test() {\n        printf(\"DerivedWrapper.test\\n\");\n        if (override Hello = this-&gt;get_override(\"test\")) {\n            return Hello();\n        }\n        return Derived::test();\n    }\n\n    Base &amp;default_test() {\n        printf(\"DerivedWrapper.default_test\\n\");\n        return this-&gt;Derived::test();\n    }\n};\n</code></pre>\n\n<p>And them, I use following code:</p>\n\n<pre><code>BOOST_PYTHON_MODULE(Wrapper) {\n    class_&lt;BaseWrapper, boost::noncopyable&gt;(\"Base\")\n                .def(\"Hello\", &amp;Base::Hello, &amp;BaseWrapper::default_Hello);\n\n    class_&lt;DerivedWrapper, boost::noncopyable, bases&lt;Base&gt; &gt;(\"Derived\")\n            .def(\"Hello\", &amp;Derived::Hello, &amp;DerivedWrapper::default_Hello)\n            .def(\"test\", &amp;Derived::test,  return_value_policy&lt;copy_non_const_reference&gt;());\n}\n</code></pre>\n\n<p>But when I compiled above code into a .so file, and used in python</p>\n\n<pre><code>derived = Wrapper.Derived() \nderived.test()\n</code></pre>\n\n<p>It throws out an exception:</p>\n\n<pre><code>TypeError: No to_python (by-value) converter found for C++ type: Base\n</code></pre>\n\n<ol>\n<li><p>This post has the same error as mine, but in a different way, it didn't help me a lot.\n<a href=\"https://stackoverflow.com/questions/5336942/boost-python-call-by-reference-typeerror-no-to-python-by-value-converter-fo\">Boost.Python call by reference : TypeError: No to_python (by-value) converter found for C++ type:</a></p></li>\n<li><p>This post solves a similar problem, but didn't help me either.\n<a href=\"https://github.com/BVLC/caffe/issues/3494\" rel=\"nofollow noreferrer\">https://github.com/BVLC/caffe/issues/3494</a></p></li>\n</ol>\n\n<p>I have two problems:</p>\n\n<ol>\n<li>If the way I tried is the right way, how to solve the TypeError problem?</li>\n<li>If I tried a wrong way, then what is the best way to solve the problem using boost.python?</li>\n</ol>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1484159558, "post_id": 41598188, "comment_id": 70399121, "body": "Did you try stepping through the code with debugger?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1484159635, "post_id": 41598188, "comment_id": 70399164, "body": "I highly recommend you use <code>std::vector</code> instead of an array.  They are easier to manage and pass to functions."}, {"owner": {"reputation": 1, "user_id": 7406159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a108932271c1bfcf2412bb71dd6d6d46?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Meeseeks", "link": "https://stackoverflow.com/users/7406159/mr-meeseeks"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1484159673, "post_id": 41598188, "comment_id": 70399190, "body": "@Algirdas Preid\u017eius I did. I&#39;m using CodeBlocks as my IDE and also used the updated version of DevC++ (By Orwell). It&#39;s not showing any errors"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1484159741, "post_id": 41598188, "comment_id": 70399228, "body": "@Mr.Meeseeks You didn&#39;t read my comment. Re-read it again. Debugger, on its own, shouldn&#39;t show any errors. It&#39;s a tool, used to step-through your application. If you did step-through it - you would&#39;ve found the issue on your own."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1484159796, "post_id": 41598188, "comment_id": 70399266, "body": "If you only have 57 records in the input file, and hardcoded your program to read 80, then the last 23 elements in your array will be incorrect. You need to check for end of the file and keep track of the size, at least if you want to continue to use arrays instead of <code>std::vector</code>."}, {"owner": {"reputation": 1, "user_id": 7406159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a108932271c1bfcf2412bb71dd6d6d46?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Meeseeks", "link": "https://stackoverflow.com/users/7406159/mr-meeseeks"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1484159826, "post_id": 41598188, "comment_id": 70399285, "body": "@thomas-matthews Sorry but it&#39;s required that arrays be used. I&#39;m not doing this for myself. I&#39;m helping a friend with her assignment."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1484159950, "post_id": 41598188, "comment_id": 70399364, "body": "Oh, and you should really take some time to <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>."}, {"owner": {"reputation": 1, "user_id": 7406159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a108932271c1bfcf2412bb71dd6d6d46?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Meeseeks", "link": "https://stackoverflow.com/users/7406159/mr-meeseeks"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1484160074, "post_id": 41598188, "comment_id": 70399446, "body": "@Someprogrammerdude So the array size should be the same as the number of students? And sorry if my question isn&#39;t concise, it&#39;s my first time on the website."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1484160202, "post_id": 41598188, "comment_id": 70399512, "body": "The size could be smaller, or larger, as long as you keep track of the <i>actual</i> number of records read. And to do that you need to return the number of records from the <code>read</code> function. And you need to handle end-of-file (and error) checking <i>properly</i>."}, {"owner": {"reputation": 1, "user_id": 7406159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a108932271c1bfcf2412bb71dd6d6d46?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Meeseeks", "link": "https://stackoverflow.com/users/7406159/mr-meeseeks"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1484160712, "post_id": 41598188, "comment_id": 70399787, "body": "@Algirdas Preid\u017eius Thanks, I&#39;ll do that."}, {"owner": {"reputation": 1, "user_id": 7406159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a108932271c1bfcf2412bb71dd6d6d46?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Meeseeks", "link": "https://stackoverflow.com/users/7406159/mr-meeseeks"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1484265145, "post_id": 41598188, "comment_id": 70451481, "body": "@Someprogrammerdude I used the getline function to get the total number of lines/students and it gives the correct answer of 57. I then used that variable to run the loop while keeping the array size the same [80] but it still messes up the student records. Can you please tell me what I&#39;m doing wrong? I used eof() too but people said getline() is a better alternative."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1484285459, "post_id": 41598188, "comment_id": 70456364, "body": "If you use <code>getline</code> (either version) you will have a <i>string</i> and not an integer value. You do convert the string into an integer value?"}, {"owner": {"reputation": 1, "user_id": 7406159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a108932271c1bfcf2412bb71dd6d6d46?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Meeseeks", "link": "https://stackoverflow.com/users/7406159/mr-meeseeks"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1484308367, "post_id": 41598188, "comment_id": 70467594, "body": "@Someprogrammerdude Thank you so much for your help so far. I&#39;ve included that new code in the middle it&#39;s inside the Stcounter() function, I&#39;m using a dummy string to skip the header line inside the grades.txt file. I tried using the total number of students as the condition for the for loops but that still won&#39;t work, so I kept the array size the same as the amount of students. My problem now is how do I use arraysize of 80 and still have the program run correctly."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7406159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a108932271c1bfcf2412bb71dd6d6d46?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Meeseeks", "link": "https://stackoverflow.com/users/7406159/mr-meeseeks"}, "edited": false, "score": 0, "creation_date": 1484162481, "post_id": 41598740, "comment_id": 70400744, "body": "I&#39;m not facing any build errors, if that&#39;s what you&#39;re trying to say."}], "tags": [], "owner": {"reputation": 1, "user_id": 7335819, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5ZAty-aqu-w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdptl6h3T6hg3nKdBirS7c3XMjqmw/photo.jpg?sz=128", "display_name": "yovel binjamin", "link": "https://stackoverflow.com/users/7335819/yovel-binjamin"}, "is_accepted": false, "score": 0, "last_activity_date": 1484161393, "creation_date": 1484161393, "answer_id": 41598740, "question_id": 41598188, "link": "https://stackoverflow.com/questions/41598188/garbage-data-when-running-this-program-student-record-program/41598740#41598740", "title": "Garbage data when running this program (Student record program)", "body": "<p>If you didnt notice in your if statement</p>\n\n<pre><code>float a;\nif(beggar&gt;&gt;record[i].idnumber&gt;&gt;record[i].firstname&gt;&gt;record[i].lastname&gt;&gt;record[i].quiz1&gt;&gt;record[i].quiz2&gt;&gt;record[i].mid1&gt;&gt;record[i].mid2&gt;&gt;record[i].homework&gt;&gt;record[i].Final)\n    a=(record[i].quiz1/10)+(record[i].quiz2/10)+((record[i].mid1*15)/100)+((record[i].mid2*15)/100)+(record[i].homework/10)+((record[i].Final*40)/100);\nrecord[i].average=a;\n</code></pre>\n\n<p>it is giving you an error that you used the variable 'a' without it being initialized. So just when you declare a as a float assign it to 0 or something else</p>\n"}], "owner": {"reputation": 1, "user_id": 7406159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a108932271c1bfcf2412bb71dd6d6d46?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Meeseeks", "link": "https://stackoverflow.com/users/7406159/mr-meeseeks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1484308107, "creation_date": 1484159507, "last_edit_date": 1484308107, "question_id": 41598188, "link": "https://stackoverflow.com/questions/41598188/garbage-data-when-running-this-program-student-record-program", "title": "Garbage data when running this program (Student record program)", "body": "<p>First off this is my own code, not copied.</p>\n\n<p>The program is supposed to read student data from a \"grades.txt\" file which has marks for quizzes, finals etc and calculate the average, assign grades, and write the names and grades students who have passed and failed to \"pass.txt\" and \"fail.txt\". \nNow the issue I face is that the total amount of students is 57. The program does stuff correctly for up to 39 students but it's always garbage values after that :(</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;cmath&gt;\n#include &lt;fstream&gt;\n#include &lt;cstdlib&gt;\n\n\nusing namespace std;\nint counter; //counts the number of students\n\nstruct STUDENT\n{\n    string firstname;\n    string lastname;\n    long idnumber;\n    int quiz1;   //10%\n    int quiz2;   //10%\n    int mid1;   //15%\n    int mid2;   //15%\n    double homework;   //10%\n    double Final;      //40%\n    double average; //to be calculated\n    char grade;  //to be calculated\n};\nvoid Stcounter()\n{\n\n    ifstream thing (\"Grades.txt\");\n    string dummy;\n    getline(thing,dummy);                    //for skipping the first line\n\n    string line;\n    int b=0;\n    while(getline(thing, line))\n        b++;\n        counter=b;\n        cout&lt;&lt;\"Total number of students is  \"&lt;&lt; counter&lt;&lt;endl;\n}\nvoid read( STUDENT record[57])\n{\n    float a;\n        ifstream thing(\"Grades.txt\");\nstring d;\ngetline(thing,d);\n\n     for(int i=0;i&lt;56;i++)\n    {\n      if( thing&gt;&gt; record[i].idnumber&gt;&gt;record[i].firstname&gt;&gt;record[i].lastname&gt;&gt;record[i].quiz1&gt;&gt;record[i].quiz2&gt;&gt;record[i].mid1&gt;&gt;record[i].mid2&gt;&gt;record[i].homework&gt;&gt;record[i].Final)\n\n   a=(record[i].quiz1/10)+(record[i].quiz2/10)+((record[i].mid1*15)/100)+((record[i].mid2*15)/100)+(record[i].homework/10)+((record[i].Final*40)/100);\n   record[i].average=a;\n   if(a&gt;=85)\n   {\n       record[i].grade='A';\n\n   }\n   else if(a&gt;=70)\n   {\n       record[i].grade='B';\n\n   }\n   else if(a&gt;=55)\n   {\n       record[i].grade='C';\n\n   }\n   else if(a&gt;=40)\n   {\n       record[i].grade='D';\n\n   }\n   else\n   {\n       record[i].grade='F';\n\n   }\n    }\n\n}\nvoid  WriteToFile (STUDENT record[57])\n{\n    ofstream p, f;\n    p.open(\"Pass.txt\");\n    f.open(\"Fail.txt\");\n    for (int i = 0; i &lt;= 56; i++)\n    {\n        if (record[i].average &gt;= 40)\n        {\n            p &lt;&lt; record[i].idnumber &lt;&lt; \" \" &lt;&lt; record[i].firstname &lt;&lt; \" \" &lt;&lt; record[i].lastname &lt;&lt; \"  passed with grade \" &lt;&lt; record[i].grade &lt;&lt;endl;\n        }\n        else\n            f &lt;&lt; record[i].idnumber &lt;&lt; \" \" &lt;&lt; record[i].firstname &lt;&lt; \" \" &lt;&lt; record[i].lastname &lt;&lt; \"  has failed\"&lt;&lt;endl;\n    }\n    p.close();\n    f.close();\n}\n//This function counts how many students got a certain grade\nvoid gradecount(STUDENT record[57])\n{\n    int c1=0,c2=0,c3=0,c4=0,c5=0;\n    for(int i=0;i&lt;57;i++)\n    {\n        if (record[i].grade=='A')\n            c1++;\n        else if(record[i].grade=='B')\n            c2++;\n        else if(record[i].grade=='C')\n            c3++;\n            else if(record[i].grade=='D')\n            c4++;\n            else\n                c5++;\n\n    }\n    cout&lt;&lt;c1&lt;&lt;\" students got A\"&lt;&lt;endl;\n    cout&lt;&lt;c2&lt;&lt;\" students got B\"&lt;&lt;endl;\n    cout&lt;&lt;c3&lt;&lt;\" students got C\"&lt;&lt;endl;\n    cout&lt;&lt;c4&lt;&lt;\" students got D\"&lt;&lt;endl;\n    cout&lt;&lt;c5&lt;&lt;\" students got F\"&lt;&lt;endl;\n}\n\n\nint main()\n{\n    STUDENT record[57];\n    read(record);\n    WriteToFile (record);\n    Stcounter();\n    gradecount(record);\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "visual-c++", "types"], "comments": [{"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 4, "creation_date": 1484159181, "post_id": 41598011, "comment_id": 70398913, "body": "That&#39;s not the way C++ works... Variables vashish when they go out of scope, full stop. After all, C++ is a compiled language, not an interpreted one..."}, {"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 0, "creation_date": 1484159273, "post_id": 41598011, "comment_id": 70398959, "body": "Presumably you&#39;ve declared this string in a function somewhere. When the function returns, the string no longer exists. Limit the scope of your objects and you limit resource usage. Don&#39;t explicitly worry about it."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "is_accepted": false, "score": 8, "last_activity_date": 1484159161, "creation_date": 1484159161, "answer_id": 41598070, "question_id": 41598011, "link": "https://stackoverflow.com/questions/41598011/how-can-i-delete-variables-in-c/41598070#41598070", "title": "How can I delete variables in C++", "body": "<p>I don't see why you want to do this, and in any case you cannot delete or otherwise remove  named variables, except in so far as they are conceptually removed for you by the compiler when they go out of scope, and actually removed when the function that contains them exits. For example:</p>\n\n<pre><code>{\n   {\n       string i_want_to_delete_this = \"I don't want this cleared, but            \ncompletely gone\";\n   }     // it's gone\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1484159405, "creation_date": 1484159405, "answer_id": 41598153, "question_id": 41598011, "link": "https://stackoverflow.com/questions/41598011/how-can-i-delete-variables-in-c/41598153#41598153", "title": "How can I delete variables in C++", "body": "<p>Automatic variables, those not using <code>malloc</code> or the <code>new</code> operator, are deleted when execution leaves a function or substatement. </p>\n\n<p>Variables declared outside a function will remain in memory until the program terminates.  </p>\n\n<p>Also, I would focus on program correctness and robustness.  Only worry about RAM or Memory usage if program doesn't fit in the memory of your platform.</p>\n\n<p>In the real world, the workplace, most data that is processed by a program and doesn't fit into memory can be split into pieces and each piece processed separately (there are a few exceptions though).  </p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1484160017, "post_id": 41598282, "comment_id": 70399412, "body": "&quot;The memory is allocated when you enter the scope of that variable&quot; - no, it is always (for all compilers I&#39;m aware of) allocated on entry to the function that contains the variable."}, {"owner": {"reputation": 19146, "user_id": 635654, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b8fb58eef98caeec6ab3366e0ac986d7?s=128&d=identicon&r=PG", "display_name": "CygnusX1", "link": "https://stackoverflow.com/users/635654/cygnusx1"}, "edited": false, "score": 3, "creation_date": 1484160287, "post_id": 41598282, "comment_id": 70399560, "body": "The maximum amount of memory needed by a function is allocated at the function entry, but how that memory is assigned to variables in different scopes - that is a different matter. If you have two scopes one after another <code>{ int x; ... } { int y; ... }</code> you are going to consume only <code>sizeof(int)</code> of stack memory, not <code>2*sizeof(int)</code>. The compiler knows that at the first <code>}</code> the memory can be reclaimed. This reclaim is &#39;free&#39; though - there is no machine instruction needed."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1484162283, "post_id": 41598282, "comment_id": 70400611, "body": "Why present <code>plain C</code> dynamic allocation when the question is about <code>C++</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1484162421, "post_id": 41598282, "comment_id": 70400703, "body": "@Cygnus That&#39;s highly compiler/optimiser dependent."}, {"owner": {"reputation": 19146, "user_id": 635654, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b8fb58eef98caeec6ab3366e0ac986d7?s=128&d=identicon&r=PG", "display_name": "CygnusX1", "link": "https://stackoverflow.com/users/635654/cygnusx1"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1484165263, "post_id": 41598282, "comment_id": 70402300, "body": "@Galik Yes, I included C++ version for completeness."}], "tags": [], "owner": {"reputation": 19146, "user_id": 635654, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b8fb58eef98caeec6ab3366e0ac986d7?s=128&d=identicon&r=PG", "display_name": "CygnusX1", "link": "https://stackoverflow.com/users/635654/cygnusx1"}, "is_accepted": true, "score": 4, "last_activity_date": 1484165194, "last_edit_date": 1484165194, "creation_date": 1484159839, "answer_id": 41598282, "question_id": 41598011, "link": "https://stackoverflow.com/questions/41598011/how-can-i-delete-variables-in-c/41598282#41598282", "title": "How can I delete variables in C++", "body": "<p>There are 3 kinds of variables. Depending on the kind you manage the memory differently.</p>\n\n<p><strong>Global Variables</strong></p>\n\n<p>These reside in a special section of your program. They appear when the program starts and dissapear when the program ends. You cannot do anything to reclaim the memory occupied by global variables.\nSome more complex constants may fall into that category as well. Your character string literal <code>\"I don't want this cleared, but completely gone\"</code> is most likely going to reside there, no matter if you copy it to <code>i_want_to_delete_this</code> variable or not.</p>\n\n<p><strong>Stack Variables</strong></p>\n\n<p>Local variables and function arguments. They appear within your code. The memory is allocated when you enter the scope of that variable, and are removed automatically when you leave the scope:</p>\n\n<pre><code>{ //beginning of the scope\n    int foo = 42; // sizeof(int) bytes allocated for foo\n    ...\n} //end of the scope. sizeof(int) bytes relaimed and may be used for other local variables\n</code></pre>\n\n<p>Note that when optimizations are on, local variables may be promoted to registers and consume no RAM memory at all.</p>\n\n<p><strong>Heap Variables</strong></p>\n\n<p>Heap is the only kind of memory you manage yourself. In plain C you allocate memory on the heap using <code>malloc</code> and free it with <code>free</code>, e.g.</p>\n\n<pre><code>int* foo = (int*)malloc(sizeof(int)); //allocate sizeof(int) bytes on the heap\n...\nfree(foo); //reclaim the memory\n</code></pre>\n\n<p>Note that the <code>foo</code> itself is a local variable, but it <em>points to</em> a portion of heap memory where you can store an integer.</p>\n\n<p>Same think in C++ would look as:</p>\n\n<pre><code>int* foo = new (int; //allocate sizeof(int) bytes on the heap\n...\ndelete foo; //reclaim the memory\n</code></pre>\n\n<p>Heap is usually used when the variable must exist much longer than the scope, usually depending on some more complex program logic.</p>\n"}], "owner": {"reputation": 394, "user_id": 6878890, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/8e0uR.jpg?s=128&g=1", "display_name": "Tommaso Thea Cioni", "link": "https://stackoverflow.com/users/6878890/tommaso-thea-cioni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6209, "favorite_count": 2, "accepted_answer_id": 41598282, "answer_count": 3, "score": 3, "last_activity_date": 1524513373, "creation_date": 1484158935, "last_edit_date": 1524513373, "question_id": 41598011, "link": "https://stackoverflow.com/questions/41598011/how-can-i-delete-variables-in-c", "title": "How can I delete variables in C++", "body": "<p>I want to free ram in my program.</p>\n\n<p>Even though I'm a novice, I really care about performance.</p>\n\n<pre><code>string i_want_to_delete_this = \"I don't want this cleared, but            \ncompletely gone\";\n/* I figured out */ i_want_to_delete_this.clear() /* simply sets the\nstring value to \"\". I want to be able to do this with every\ndatatype! I want it completely gone, not even declared anymore. */\n</code></pre>\n"}, {"tags": ["c++", "enums"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1484158931, "post_id": 41597969, "comment_id": 70398786, "body": "You will still have the problem that if you try to shift by too many bits, whatever integer type you are using to represent those bits will overflow."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1484159037, "post_id": 41597969, "comment_id": 70398841, "body": "I don&#39;t see how this gains you any extra bits."}, {"owner": {"reputation": 717, "user_id": 5309828, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9b1d938c6c7dca82919b3e00d5d43c14?s=128&d=identicon&r=PG&f=1", "display_name": "a concerned citizen", "link": "https://stackoverflow.com/users/5309828/a-concerned-citizen"}, "edited": false, "score": 0, "creation_date": 1484159216, "post_id": 41597969, "comment_id": 70398933, "body": "You are both right, I completely missed that. Is there a workaround for this? I have a ton of checks plus a monster <code>switch&#47;case</code> function that stabs me in the retina everytime aI look at it."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 2, "creation_date": 1484159502, "post_id": 41597969, "comment_id": 70399085, "body": "Next step might be to use a <code>std::bitset</code>, which can hold more than 64 bits. Or ask yourself if having more than 64 independent parameters to the code really is such a great idea."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1484159647, "post_id": 41597969, "comment_id": 70399174, "body": "Sounds to me like you may want to reconsider your design."}, {"owner": {"reputation": 717, "user_id": 5309828, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9b1d938c6c7dca82919b3e00d5d43c14?s=128&d=identicon&r=PG&f=1", "display_name": "a concerned citizen", "link": "https://stackoverflow.com/users/5309828/a-concerned-citizen"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1484159684, "post_id": 41597969, "comment_id": 70399199, "body": "@BoPersson Well, it&#39;s a long list, and it&#39;s actually paired with a <code>std::string</code> inside a <code>struct</code>, used for functions (the <code>enum</code>) and <code>QComboBox</code>es. And they&#39;re more thatn one. At this point, I could split the <code>enum</code> (and <code>struct</code>&amp;co) into something like <code>Enum1</code>, <code>Enum2</code>, etc, it would work, but I don&#39;t think it would look pretty..."}], "owner": {"reputation": 717, "user_id": 5309828, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9b1d938c6c7dca82919b3e00d5d43c14?s=128&d=identicon&r=PG&f=1", "display_name": "a concerned citizen", "link": "https://stackoverflow.com/users/5309828/a-concerned-citizen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 376, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1484158773, "creation_date": 1484158773, "question_id": 41597969, "link": "https://stackoverflow.com/questions/41597969/using-long-enum-list-with-hex-values", "title": "Using long `enum` list with hex values", "body": "<p>Suppose I have an <code>enum</code> which has more than <code>64</code> entries, and I would like to assign hex values for easier bit-hacking comparisons, such as <code>(verify &amp; (ENUM_ONE | ENUM_TWO))</code>. Since not even <code>unsigned long int</code> would be enough, is it considered bad practice if I use normal <code>enum</code> values (as in <code>ENUM_ZERO = 0</code>, <code>ENUM_ONE = 1</code>, etc) and then use <code>(verify &amp; ((1&lt;&lt;ENUM_ONE) | (1&lt;&lt;ENUM_TWO)))</code>? As I understand it, bit shifting comes cheap, and it looks like I managed to avoid conditionals, but what about the code?</p>\n"}, {"tags": ["java", "android", "c++", "java-native-interface", "superpowered"], "comments": [{"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 1, "creation_date": 1484162436, "post_id": 41597950, "comment_id": 70400717, "body": "Stack trace could help. Using <a href=\"https://developer.android.com/ndk/guides/ndk-stack.html\" rel=\"nofollow noreferrer\">ndk-stack</a> you can point to the line in C++ that failed."}, {"owner": {"reputation": 719, "user_id": 2995358, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/076e6e1653a19d63574e2afac5664ee8?s=128&d=identicon&r=PG&f=1", "display_name": "user2995358", "link": "https://stackoverflow.com/users/2995358/user2995358"}, "edited": false, "score": 1, "creation_date": 1484547233, "post_id": 41597950, "comment_id": 70538542, "body": "The fact that it works sometime and sometime it does not, is an indication with the value that is obtained at runtime. It can be the path that is being passed from Java --the &quot;url&quot; value that is used here: const char *openError = decoder-&gt;open(url, false, 0, 0);     if (openError) {         delete decoder;         return NULL;     };  In such case, this line can potentially cause SIGSEGV: env-&gt;SetFloatArrayRegion(ret, 0, 2, values);  Sprinkle the code with log messages to isolate the problem. That may pinpoint the problem."}, {"owner": {"reputation": 1164, "user_id": 4438634, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh6.googleusercontent.com/-3_4BfMpfE3g/AAAAAAAAAAI/AAAAAAAAAGE/QMNXPgIzTBw/photo.jpg?sz=128", "display_name": "Ziad Halabi", "link": "https://stackoverflow.com/users/4438634/ziad-halabi"}, "reply_to_user": {"reputation": 719, "user_id": 2995358, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/076e6e1653a19d63574e2afac5664ee8?s=128&d=identicon&r=PG&f=1", "display_name": "user2995358", "link": "https://stackoverflow.com/users/2995358/user2995358"}, "edited": false, "score": 1, "creation_date": 1484565565, "post_id": 41597950, "comment_id": 70547531, "body": "@user2995358 Thank you for your response. You have a point regarding the url. However, it is never null (the check is in the Java code). Also, it happens randomly at runtime but not on the same &quot;url&quot; item. My bet is that I am not handling memory properly so a SIGSEGV is occurring."}, {"owner": {"reputation": 719, "user_id": 2995358, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/076e6e1653a19d63574e2afac5664ee8?s=128&d=identicon&r=PG&f=1", "display_name": "user2995358", "link": "https://stackoverflow.com/users/2995358/user2995358"}, "edited": false, "score": 1, "creation_date": 1484625417, "post_id": 41597950, "comment_id": 70574357, "body": "@ZiadHalabi It need not be null, but the url may not be of the right format. SIGSEGV happens because you are accessing a memory not belonging to you or you are using uninitialized variables. Check for null for all the pointers that are supposed to get values from your decoder/analyzer methods. For ex openError is not null, initialize bpm and keyIndex before using it etc."}], "answers": [{"comments": [{"owner": {"reputation": 806, "user_id": 3942452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f1ce08507017ddddcd4224989a441ef?s=128&d=identicon&r=PG&f=1", "display_name": "Yoni Gross", "link": "https://stackoverflow.com/users/3942452/yoni-gross"}, "edited": false, "score": 0, "creation_date": 1484960225, "post_id": 41701711, "comment_id": 70740643, "body": "Seems to me that <code>ret=(float*)malloc(2*sizeof(float));</code> in SuperpoweredPlayer::getKey is never being freed. (e.g after <code>env-&gt;SetFloatArrayRegion(ret, 0, 2, values);</code>)"}, {"owner": {"reputation": 1743, "user_id": 2192832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2217d886c1805ab7398ffefb379ff71?s=128&d=identicon&r=PG", "display_name": "ivan_onys", "link": "https://stackoverflow.com/users/2192832/ivan-onys"}, "reply_to_user": {"reputation": 806, "user_id": 3942452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f1ce08507017ddddcd4224989a441ef?s=128&d=identicon&r=PG&f=1", "display_name": "Yoni Gross", "link": "https://stackoverflow.com/users/3942452/yoni-gross"}, "edited": false, "score": 0, "creation_date": 1484969846, "post_id": 41701711, "comment_id": 70742166, "body": "It is item 1 in the answer"}, {"owner": {"reputation": 806, "user_id": 3942452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f1ce08507017ddddcd4224989a441ef?s=128&d=identicon&r=PG&f=1", "display_name": "Yoni Gross", "link": "https://stackoverflow.com/users/3942452/yoni-gross"}, "edited": false, "score": 0, "creation_date": 1484997317, "post_id": 41701711, "comment_id": 70747854, "body": "Yes. I think it&#39;s not so clear that you are pointing to what is defiantly a memory leak. Maybe replace &quot;values&quot; with <code>float *values</code>, and add that this is a memory leak?"}, {"owner": {"reputation": 1743, "user_id": 2192832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2217d886c1805ab7398ffefb379ff71?s=128&d=identicon&r=PG", "display_name": "ivan_onys", "link": "https://stackoverflow.com/users/2192832/ivan-onys"}, "reply_to_user": {"reputation": 806, "user_id": 3942452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f1ce08507017ddddcd4224989a441ef?s=128&d=identicon&r=PG&f=1", "display_name": "Yoni Gross", "link": "https://stackoverflow.com/users/3942452/yoni-gross"}, "edited": false, "score": 0, "creation_date": 1485001452, "post_id": 41701711, "comment_id": 70749018, "body": "@YoniGross Done"}, {"owner": {"reputation": 1164, "user_id": 4438634, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh6.googleusercontent.com/-3_4BfMpfE3g/AAAAAAAAAAI/AAAAAAAAAGE/QMNXPgIzTBw/photo.jpg?sz=128", "display_name": "Ziad Halabi", "link": "https://stackoverflow.com/users/4438634/ziad-halabi"}, "edited": false, "score": 0, "creation_date": 1486112501, "post_id": 41701711, "comment_id": 71214882, "body": "@ivan_onys Thank you for your answer. Can you please tell me why would the order of the memory freeing matter?"}, {"owner": {"reputation": 1743, "user_id": 2192832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2217d886c1805ab7398ffefb379ff71?s=128&d=identicon&r=PG", "display_name": "ivan_onys", "link": "https://stackoverflow.com/users/2192832/ivan-onys"}, "edited": false, "score": 0, "creation_date": 1486140070, "post_id": 41701711, "comment_id": 71232340, "body": "Analyzer and decoder may still be using buffers, but buffers are already freed. One should keep buffers allocated until users of those buffers exist. The most straightforward way is to delete objects / deallocate memory in the reverse order of their allocation / creation."}], "tags": [], "owner": {"reputation": 1743, "user_id": 2192832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2217d886c1805ab7398ffefb379ff71?s=128&d=identicon&r=PG", "display_name": "ivan_onys", "link": "https://stackoverflow.com/users/2192832/ivan-onys"}, "is_accepted": false, "score": 3, "last_activity_date": 1485001431, "last_edit_date": 1485001431, "creation_date": 1484668864, "answer_id": 41701711, "question_id": 41597950, "link": "https://stackoverflow.com/questions/41597950/native-crash-sigsegv-in-android-jni/41701711#41701711", "title": "Native Crash SIGSEGV in Android JNI", "body": "<p>Please, double check that you are releasing all the memory, you are allocating AND that you release memory/delete objects in the reverse order e.g. if you created object A then B, you should delete B then A.</p>\n\n<ol>\n<li>Memory leak: <code>float* values</code> isn't freed in Java_com_superpowered_SuperpoweredPlayer_getInfo()</li>\n<li>I would free memory allocated in analyzer->getresults() first, then floatBuffer and intBuffer, then deleted analyzer and then decoder. </li>\n</ol>\n\n<p>Are you sure it is correct (and safe) to free memory allocated in analyzer->getresults() with free(), because free in the superpowered may be different from free in your code (if either is linked statically to standard C library)?</p>\n"}], "owner": {"reputation": 1164, "user_id": 4438634, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh6.googleusercontent.com/-3_4BfMpfE3g/AAAAAAAAAAI/AAAAAAAAAGE/QMNXPgIzTBw/photo.jpg?sz=128", "display_name": "Ziad Halabi", "link": "https://stackoverflow.com/users/4438634/ziad-halabi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1776, "favorite_count": 1, "answer_count": 1, "score": 6, "last_activity_date": 1485001431, "creation_date": 1484158737, "last_edit_date": 1484414190, "question_id": 41597950, "link": "https://stackoverflow.com/questions/41597950/native-crash-sigsegv-in-android-jni", "title": "Native Crash SIGSEGV in Android JNI", "body": "<p>I am getting a Native Crash <code>signal 11 (SIGSEGV), code 1 (SEGV_MAPERR)</code> randomly in my App. The App loops over files and analyses them in the C++ code and return an array of floats. This is done in an AsyncTask which runs for a while while processing the files. What am I doing wrong in the code which is leading to the crash? Or is it a Superpowered issue? Thank you. </p>\n\n<p>This is the AsyncTask doInBackground function:</p>\n\n<pre><code>protected String doInBackground(Object... urls) {\n\n            for (int i = 0; i &lt; songFiles.size(); i++) {\n                SongFile temp = songFiles.get(i);\n                try {\n                    float[] f = Analyser.getInfo(temp.getPath());\n                        if (f != null &amp;&amp; f.length &gt; 1) {\n                            ...save to DB\n                        }\n                    }\n\n                } catch (Exception e) {\n                }\n            }\n            return \"\";\n        } \n</code></pre>\n\n<p>The Function between the Java and C++ code:</p>\n\n<pre><code>extern \"C\" JNIEXPORT jfloatArray Java_com_superpowered_SuperpoweredPlayer_getInfo(JNIEnv *env, jobject instance,jstring filepath) {\n    jfloatArray ret;\n    char *Path= (char *) env-&gt;GetStringUTFChars(filepath, JNI_FALSE);\n\n    ret = (jfloatArray)env-&gt;NewFloatArray(2);\n\n    float *values = superpoweredPlayer-&gt;getKey(Path);\n\n    env-&gt;SetFloatArrayRegion(ret, 0, 2, values);\n    env-&gt;ReleaseStringUTFChars(filepath, Path);\n    return ret;\n\n}\n</code></pre>\n\n<p>The C++ function getKey:</p>\n\n<pre><code>float *SuperpoweredPlayer::getKey(char *url) {\n\n    SuperpoweredDecoder *decoder = new SuperpoweredDecoder();\n\n    //decoder initialize from the URL input\n    const char *openError = decoder-&gt;open(url, false, 0, 0);\n    if (openError) {\n        delete decoder;\n        return NULL;\n    };\n\n    // Create the analyzer.\n    SuperpoweredOfflineAnalyzer *analyzer = new SuperpoweredOfflineAnalyzer(decoder-&gt;samplerate, 0, decoder-&gt;durationSeconds);\n\n    // Create a buffer for the 16-bit integer samples coming from the decoder.\n    short int *intBuffer = (short int *)malloc(decoder-&gt;samplesPerFrame * 2 * sizeof(short int) + 16384);\n    // Create a buffer for the 32-bit floating point samples required by the effect.\n    float *floatBuffer = (float *)malloc(decoder-&gt;samplesPerFrame * 2 * sizeof(float) + 1024);\n\n    // Processing.\n    while (true) {\n\n        // Decode one frame. samplesDecoded will be overwritten with the actual decoded number of samples.\n        unsigned int samplesDecoded = decoder-&gt;samplesPerFrame;\n        if (decoder-&gt;decode(intBuffer, &amp;samplesDecoded) == SUPERPOWEREDDECODER_ERROR) break;\n        if (samplesDecoded &lt; 1) break;\n\n        // Convert the decoded PCM samples from 16-bit integer to 32-bit floating point.\n        SuperpoweredShortIntToFloat(intBuffer, floatBuffer, samplesDecoded);\n\n        // Submit samples to the analyzer.\n        analyzer-&gt;process(floatBuffer, samplesDecoded);\n\n        // Update the progress indicator.\n        // progress = (double)decoder-&gt;samplePosition / (double)decoder-&gt;durationSamples;\n    };\n\n\n\n    // Get the result.\n    unsigned char *averageWaveform = NULL, *lowWaveform = NULL, *midWaveform = NULL, *highWaveform = NULL, *peakWaveform = NULL, *notes = NULL;\n    int waveformSize, overviewSize, keyIndex;\n    char *overviewWaveform = NULL;\n    float loudpartsAverageDecibel, peakDecibel, bpm, averageDecibel, beatgridStartMs = 0;\n    analyzer-&gt;getresults(&amp;averageWaveform, &amp;peakWaveform, &amp;lowWaveform, &amp;midWaveform, &amp;highWaveform, &amp;notes, &amp;waveformSize, &amp;overviewWaveform, &amp;overviewSize, &amp;averageDecibel, &amp;loudpartsAverageDecibel, &amp;peakDecibel, &amp;bpm, &amp;beatgridStartMs, &amp;keyIndex);\n\n    float *ret;\n    ret=(float*)malloc(2*sizeof(float));\n    ret[0] = bpm;\n    ret[1] = keyIndex;\n\n    // Cleanup.\n    delete decoder;\n    delete analyzer;\n    free(intBuffer);\n    free(floatBuffer);\n\n    // Done with the result, free memory.\n    if (averageWaveform) free(averageWaveform);\n    if (lowWaveform) free(lowWaveform);\n    if (midWaveform) free(midWaveform);\n    if (highWaveform) free(highWaveform);\n    if (peakWaveform) free(peakWaveform);\n    if (notes) free(notes);\n    if (overviewWaveform) free(overviewWaveform);\n\n    return ret;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "synchronization", "std"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1484159987, "post_id": 41597821, "comment_id": 70399387, "body": "Any answer you get is going to be really long. A good start is to study up on what lock-free means. From there you can start to read the C++ standard starting with 29 Atomic operations library [atomics], and there&#39;s a lot to digest."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1484170034, "post_id": 41597821, "comment_id": 70404800, "body": "it does more than generate special machine instructions. It also prevents load/store reordering. The link to the videos in the answer below really should be followed - you&#39;ll be amazed at what you learn. You&#39;ll need 2 hours."}, {"owner": {"reputation": 754, "user_id": 2320513, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oQIvz.jpg?s=128&g=1", "display_name": "tylerjw", "link": "https://stackoverflow.com/users/2320513/tylerjw"}, "edited": false, "score": 0, "creation_date": 1484231704, "post_id": 41597821, "comment_id": 70432851, "body": "Thank you.  I will watch the videos.  I didn&#39;t realize it was so complicated."}], "answers": [{"tags": [], "owner": {"reputation": 103, "user_id": 5551730, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153257944820878/picture?type=large", "display_name": "Richard", "link": "https://stackoverflow.com/users/5551730/richard"}, "is_accepted": true, "score": 1, "last_activity_date": 1484162007, "creation_date": 1484162007, "answer_id": 41598928, "question_id": 41597821, "link": "https://stackoverflow.com/questions/41597821/what-is-a-c-atomic-variable/41598928#41598928", "title": "What is a C++ atomic variable?", "body": "<p>This topic really could fill a book. Likely you won't get any clear answers in this format.</p>\n\n<p>Check out Herb Sutters videos, these are really the clearest discussions I've seen on the topic:</p>\n\n<p><a href=\"https://herbsutter.com/2013/02/11/atomic-weapons-the-c-memory-model-and-modern-hardware/\" rel=\"nofollow noreferrer\">https://herbsutter.com/2013/02/11/atomic-weapons-the-c-memory-model-and-modern-hardware/</a></p>\n\n<p>See the links for \"Part 1\" and \"Part 2\".</p>\n"}], "owner": {"reputation": 754, "user_id": 2320513, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oQIvz.jpg?s=128&g=1", "display_name": "tylerjw", "link": "https://stackoverflow.com/users/2320513/tylerjw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1050, "favorite_count": 1, "accepted_answer_id": 41598928, "answer_count": 1, "score": 1, "last_activity_date": 1484162007, "creation_date": 1484158242, "question_id": 41597821, "link": "https://stackoverflow.com/questions/41597821/what-is-a-c-atomic-variable", "title": "What is a C++ atomic variable?", "body": "<p>Here is the documentation for std::atomic: <a href=\"http://en.cppreference.com/w/cpp/atomic/atomic\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/atomic/atomic</a></p>\n\n<p>Reading other questions what I've gathered is it generates some sort of special machine instructions (i.e. lock add) and that as a result you don't have to use a mutex around the variable.</p>\n\n<p>What I want to know is how it works and what are the limitations to using them?</p>\n"}, {"tags": ["c++", "g++", "linker-errors"], "comments": [{"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 1, "creation_date": 1484158133, "post_id": 41597744, "comment_id": 70398365, "body": "Add the <code>inline</code> keyword before test2 to get around the one definition rule."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1484158223, "post_id": 41597744, "comment_id": 70398419, "body": "Nothing to do with your problem, but names like <code>_TEST_HPP_</code> are reserved in C++. Lose the leading underscore."}, {"owner": {"reputation": 71, "user_id": 1285667, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b73bf810c709a9dfeb48aa0e523c624e?s=128&d=identicon&r=PG", "display_name": "lost", "link": "https://stackoverflow.com/users/1285667/lost"}, "edited": false, "score": 0, "creation_date": 1484158353, "post_id": 41597744, "comment_id": 70398505, "body": "@latedeveloper would TEST_HPP be fine?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1484158445, "post_id": 41597744, "comment_id": 70398550, "body": "@lost Yes, that would be fine."}, {"owner": {"reputation": 1589, "user_id": 5944798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7532aec0ae828a8c2e98970b40fd1cc7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien Lopez", "link": "https://stackoverflow.com/users/5944798/julien-lopez"}, "edited": false, "score": 0, "creation_date": 1484161900, "post_id": 41597744, "comment_id": 70400407, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/16396130/multiple-definition-of-a-function-error-even-when-using-if-guard-clauses\">Multiple definition of a function error, even when using #if guard clauses</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4791, "user_id": 1609614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lvIBD.jpg?s=128&g=1", "display_name": "Ari0nhh", "link": "https://stackoverflow.com/users/1609614/ari0nhh"}, "is_accepted": false, "score": 1, "last_activity_date": 1484158107, "creation_date": 1484158107, "answer_id": 41597784, "question_id": 41597744, "link": "https://stackoverflow.com/questions/41597744/why-am-i-getting-a-multiple-definition-error-how-do-i-fix-it/41597784#41597784", "title": "Why am I getting a &#39;multiple definition&#39; error? how do i fix it?", "body": "<p>Since <code>test.hpp</code> file is included both in <code>main.cpp</code>, and <code>test.cpp</code>, there are two implementations of <code>test2</code> function. So linker produces an error. Move function implementation to the <code>test.cpp</code> file.</p>\n"}, {"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1484158135, "creation_date": 1484158135, "answer_id": 41597795, "question_id": 41597744, "link": "https://stackoverflow.com/questions/41597744/why-am-i-getting-a-multiple-definition-error-how-do-i-fix-it/41597795#41597795", "title": "Why am I getting a &#39;multiple definition&#39; error? how do i fix it?", "body": "<p>You get it because you define (implement) the non-static and non-inline function <code>test2</code> inside the header file, and you include the header file in both source files. That means the function will be defined in both <a href=\"https://en.wikipedia.org/wiki/Translation_unit_(programming)\" rel=\"nofollow noreferrer\">translation units</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": false, "score": 0, "last_activity_date": 1484158188, "creation_date": 1484158188, "answer_id": 41597808, "question_id": 41597744, "link": "https://stackoverflow.com/questions/41597744/why-am-i-getting-a-multiple-definition-error-how-do-i-fix-it/41597808#41597808", "title": "Why am I getting a &#39;multiple definition&#39; error? how do i fix it?", "body": "<p><code>main.cpp</code> and <code>test.cpp</code> both include <code>test.hpp</code> which <em>declares</em> <code>void test()</code> and <em>defines</em> <code>void test2()</code>. By including <code>test.hpp</code> in two implementation files, you are making two copies of each definition and declaration. You may declare a function as many times as you want but you can only define it once. Move the body of <code>void test2()</code> to a seperate implementation (.cpp) file to resolve the linker error.</p>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1484158943, "creation_date": 1484158943, "answer_id": 41598013, "question_id": 41597744, "link": "https://stackoverflow.com/questions/41597744/why-am-i-getting-a-multiple-definition-error-how-do-i-fix-it/41598013#41598013", "title": "Why am I getting a &#39;multiple definition&#39; error? how do i fix it?", "body": "<p>The header <code>test.hpp</code> is included in two compilation  units. The first one is the compilation unit <code>main.cpp</code> and the second one is the compilation unit <code>test.cpp</code>.</p>\n\n<p>Functions by default have external linkage.  This means that functions with the same name and signature denote the same function in different compilation units. They shall be defined once. However in your program the definition of the function <code>test2</code> is found in two compilation units and the linker does not know what definition of the function to use.</p>\n\n<p>You could declare the function as an inline function. For example</p>\n\n<pre><code>inline void test2() { std::cerr &lt;&lt; \"test2\" &lt;&lt; std::endl; }\n</code></pre>\n\n<p>In this case it may be defined in each compilation unit.</p>\n\n<p>Or you can place in the header only the function declaration as you made with the function <code>test</code> and define it for example in <code>test.cpp</code>.</p>\n\n<p>Another way is to declare the function as having internal linkage. To do this you can define the function in the header either with the keyword static </p>\n\n<pre><code>static void test2() { std::cerr &lt;&lt; \"test2\" &lt;&lt; std::endl; }\n</code></pre>\n\n<p>or place it in unnamed name space</p>\n\n<pre><code>namespace\n{\n    void test2() { std::cerr &lt;&lt; \"test2\" &lt;&lt; std::endl; }\n}\n</code></pre>\n\n<p>In this case each compilation unit will have its own function <code>test2</code>.</p>\n"}], "owner": {"reputation": 71, "user_id": 1285667, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b73bf810c709a9dfeb48aa0e523c624e?s=128&d=identicon&r=PG", "display_name": "lost", "link": "https://stackoverflow.com/users/1285667/lost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9402, "favorite_count": 0, "accepted_answer_id": 41598013, "answer_count": 4, "score": 3, "last_activity_date": 1484158943, "creation_date": 1484157974, "question_id": 41597744, "link": "https://stackoverflow.com/questions/41597744/why-am-i-getting-a-multiple-definition-error-how-do-i-fix-it", "title": "Why am I getting a &#39;multiple definition&#39; error? how do i fix it?", "body": "<p>command given by terminal:</p>\n\n<blockquote>\n  <p>g++ main.cpp test.cpp</p>\n</blockquote>\n\n<p>Error message:</p>\n\n<blockquote>\n  <p>/tmp/ccvgRjlI.o: In function `test2()': <br>test.cpp:(.text+0x0): multiple\n  definition of `test2()'<br>\n  /tmp/ccGvwiUE.o:main.cpp:(.text+0x0): first defined here<br>\n  collect2: error: ld returned 1 exit status\n  main.cpp</p>\n</blockquote>\n\n<p>Source code:</p>\n\n<pre><code>#include \"test.hpp\"\nint main(int argc, char *argv[])\n{\n    test2();\n    return 0;\n}\n</code></pre>\n\n<p>test.hpp</p>\n\n<pre><code>#ifndef _TEST_HPP_\n#define _TEST_HPP_\n\n#include &lt;iostream&gt;\n\nvoid test();\nvoid test2() { std::cerr &lt;&lt; \"test2\" &lt;&lt; std::endl; }\n\n#endif\n</code></pre>\n\n<p>test.cpp</p>\n\n<pre><code>#include \"test.hpp\"\n\nusing std::cerr;\nusing std::endl;\n\nvoid test() { cerr &lt;&lt; \"test\" &lt;&lt; endl; }\n</code></pre>\n\n<p>btw the following compiles fine:</p>\n\n<blockquote>\n  <p>g++ main.cpp</p>\n</blockquote>\n"}, {"tags": ["c++", "windows", "driver"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 1, "creation_date": 1484158317, "post_id": 41597687, "comment_id": 70398485, "body": "You need to link to <code>Setupapi.lib</code>."}, {"owner": {"reputation": 37, "user_id": 3449011, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/56e28f5f4c6bd4eae6ce39a15f675c96?s=128&d=identicon&r=PG&f=1", "display_name": "user3449011", "link": "https://stackoverflow.com/users/3449011/user3449011"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1484159833, "post_id": 41597687, "comment_id": 70399291, "body": "@CaptainObvlious - Thanks for help. Now code is compiling and I can run it, but it doesn&#39;t install the INF file. I also checked GetLastError() after I call SetupOpenInfFile and it returns 0. Kindly reopen it."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1484159996, "post_id": 41597687, "comment_id": 70399394, "body": "Your current problem has been solved and you now have a new one. That calls for a new question not reopening an obvious dupe and changing it."}], "owner": {"reputation": 37, "user_id": 3449011, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/56e28f5f4c6bd4eae6ce39a15f675c96?s=128&d=identicon&r=PG&f=1", "display_name": "user3449011", "link": "https://stackoverflow.com/users/3449011/user3449011"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "closed_date": 1484158284, "answer_count": 0, "score": 0, "last_activity_date": 1484159982, "creation_date": 1484157778, "last_edit_date": 1484159982, "question_id": 41597687, "link": "https://stackoverflow.com/questions/41597687/c-installing-inf-and-sys", "closed_reason": "Duplicate", "title": "C++ Installing inf and sys", "body": "<p>I am trying to install a driver with windows C++.\nRegistering and starting the service is working fine but I have troubles with installing the INF file.\nI've look over the internet and wrote some code but can't make it work. \nMake it short, I just need help with installing the INF file programmly.</p>\n\n<p><strong>Make it short, it doesn't install the INF file. I also checked GetLastError() after I call SetupOpenInfFile and it returns 0.</strong>\nBtw, is there any way to get rid of the INF file? </p>\n\n<pre><code>SC_HANDLE hSCManager;\nSC_HANDLE hService;\nSERVICE_STATUS ss;\nSERVICE_STATUS_PROCESS status;\nHINF HInf;\nUINT ErrorLine;\nPCWSTR szInfFileName = L\"C://scanner.inf\";\nPVOID Context = NULL;\nPBOOL FileWasInUse = NULL;\n\nLPCSTR  SourceFile = \"scanner.sys\";\nLPCSTR SourcePathRoot = \"C://test/\";\nLPCSTR DestinationName =\"C://scanner.sys\";\nhSCManager = OpenSCManager(NULL, NULL, SC_MANAGER_CREATE_SERVICE);\nprintf(\"Load Driver\\n\");\nif (hSCManager)\n{\n    HInf = SetupOpenInfFile(szInfFileName, NULL, INF_STYLE_WIN4, &amp;ErrorLine);\n\n    printf(\"Create Service\\n\");\n    hService = CreateService(hSCManager, L\"scanner\", L\"scanner Driver\", SERVICE_START | DELETE | SERVICE_STOP, SERVICE_KERNEL_DRIVER, SERVICE_DEMAND_START, SERVICE_ERROR_IGNORE, L\"C://scanner.sys\", NULL, NULL, NULL, NULL, NULL);\n    if (!hService)\n    {\n        hService = OpenService(hSCManager, L\"scanner\", SERVICE_START | DELETE | SERVICE_STOP);\n    }\n    if (hService)\n    {\n        printf(\"Start Service\\n\");\n        StartService(hService, 0, NULL);\n        printf(\"Press Enter to close service\\r\\n\");\n        getchar();\n        ControlService(hService, SERVICE_CONTROL_STOP, (LPSERVICE_STATUS)&amp;status);\n        CloseServiceHandle(hService);\n        DeleteService(hService);\n    }\n    CloseServiceHandle(hSCManager);\n}\n</code></pre>\n"}, {"tags": ["c++", "armadillo"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1484157872, "post_id": 41597640, "comment_id": 70398253, "body": "&quot;same&quot; is not an int."}, {"owner": {"reputation": 75, "user_id": 6415046, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/10208284832430416/picture?type=large", "display_name": "Romain Martin", "link": "https://stackoverflow.com/users/6415046/romain-martin"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1484159094, "post_id": 41597640, "comment_id": 70398870, "body": "I was so focused on my vectors that I didn&#39;t notice the &#39;int&#39; part. I don&#39;t understand why &#39;same&#39; would be an int. I try typing &quot;same&quot; as the Documentation did in the example but it still doesn&#39;t work. The error is &#39;no matching function for call to &#39;conv(arma::uvec&amp;, arma::vec&amp;, const char [5])&#39;"}, {"owner": {"reputation": 3366, "user_id": 1080929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78ecd4627fdf46fc3b3a217eeb0e5104?s=128&d=identicon&r=PG", "display_name": "mtall", "link": "https://stackoverflow.com/users/1080929/mtall"}, "edited": false, "score": 0, "creation_date": 1484187209, "post_id": 41597640, "comment_id": 70410434, "body": "@RomainMartin - You&#39;re probably using an old version of Armadillo, which doesn&#39;t have the latest <code>conv()</code> function. Remove the previous version and install the <a href=\"http://arma.sourceforge.net/download.html\" rel=\"nofollow noreferrer\">latest</a> version."}, {"owner": {"reputation": 75, "user_id": 6415046, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/10208284832430416/picture?type=large", "display_name": "Romain Martin", "link": "https://stackoverflow.com/users/6415046/romain-martin"}, "reply_to_user": {"reputation": 3366, "user_id": 1080929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78ecd4627fdf46fc3b3a217eeb0e5104?s=128&d=identicon&r=PG", "display_name": "mtall", "link": "https://stackoverflow.com/users/1080929/mtall"}, "edited": false, "score": 0, "creation_date": 1484209524, "post_id": 41597640, "comment_id": 70418105, "body": "@mtall - The fact is that I already have the latest version 7.600.2 :/ Is it possible that it hasn&#39;t been installed correctly? It would be strange as I can use other functionnality without any issue. Maybe it&#39;s because I don&#39;t use the C++11 standard?"}, {"owner": {"reputation": 75, "user_id": 6415046, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/10208284832430416/picture?type=large", "display_name": "Romain Martin", "link": "https://stackoverflow.com/users/6415046/romain-martin"}, "edited": false, "score": 0, "creation_date": 1484211967, "post_id": 41597640, "comment_id": 70419552, "body": "In fact I tried the website&#39;s example and I get another error: &#39;undefined reference to &#39;wrapper_ddot_&#39;. I think that some of the packages needed for Armadillo haven&#39;t been installed or linked correctly. I&#39;ll look this way."}], "answers": [{"tags": [], "owner": {"reputation": 75, "user_id": 6415046, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/10208284832430416/picture?type=large", "display_name": "Romain Martin", "link": "https://stackoverflow.com/users/6415046/romain-martin"}, "is_accepted": false, "score": 3, "last_activity_date": 1484227022, "creation_date": 1484227022, "answer_id": 41614227, "question_id": 41597640, "link": "https://stackoverflow.com/questions/41597640/no-matching-function-for-call-to-conv-armadillo-library/41614227#41614227", "title": "No matching function for call to conv (armadillo library)", "body": "<p>Ok, finally the answer was quite simple: <code>conv()</code> doesn't allow mixed types so I had to use two <code>vec</code> instead of one <code>vec</code> and one <code>uvec</code>.</p>\n\n<p>I was pretty sure to already have tried this but maybe there was a problem with my installation at this moment.</p>\n\n<p>So I reinstalled Armadillo properly, assuring that both Lapack and BLAS where found by Armadillo.</p>\n\n<p>Then I add: <code>#define ARMA_DONT_USE_WRAPPER</code> just before <code>#include&lt;armadillo&gt;</code></p>\n\n<p>After doing this, the example of <code>conv()</code> given in the documentation worked.</p>\n\n<p>So I modified my code by converting <code>hist3</code> into a <code>vec</code>:</p>\n\n<pre><code>arma::vec hist3=arma::conv_to&lt;arma::vec&gt;::from(arma::hist(X2,nbbins));\n</code></pre>\n\n<p>Then it worked!</p>\n"}], "owner": {"reputation": 75, "user_id": 6415046, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/10208284832430416/picture?type=large", "display_name": "Romain Martin", "link": "https://stackoverflow.com/users/6415046/romain-martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 805, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1484227022, "creation_date": 1484157584, "question_id": 41597640, "link": "https://stackoverflow.com/questions/41597640/no-matching-function-for-call-to-conv-armadillo-library", "title": "No matching function for call to conv (armadillo library)", "body": "<p>I've some matlab script to translate in C++ so I decided to use the library Armadillo for the linear algebra parts.\nBut I'm blocked with the <code>conv()</code> function. I tried this:</p>\n\n<pre><code>hist2=arma::hist(X2,nbins);\narma::vec g (smoothingWindowWidth, 0.0);\nint halfWidth = smoothingWindowWidth/2;\nfor (int i=0; i&lt;smoothingWindowWidth; i++)\n{\n    int n=i - halfWidth;\n    g[i]= exp(-0.5 *((n/((double)halfWidth))*(n/((double) halfWidth))));\n}\ng=g/(arma::sum(g));\narma::vec hist3= arma::conv(hist2,g,\"same\");\n</code></pre>\n\n<p>When I try to compile I get the following error: \"<em>no matching function for call to 'conv(arma::uvec&amp;,arma::vec&amp;,int)'</em>\".</p>\n\n<p><code>hist2</code> has been defined previously as an <code>uvec</code> using the <code>hist()</code> function.\n<code>X2</code> is a <code>vec</code> and <code>nbins</code> an <code>int</code>.</p>\n\n<p>I'm not sure to understand the error: It's seems that <code>conv()</code> doesn't take <code>vec</code> or <code>uvec</code> as parameters but after checking the Armadillo website it has to.</p>\n\n<p>I tried to convert the <code>uvec</code> into <code>vec</code> but it didn't change anything.</p>\n\n<p>Thank you for your help!</p>\n"}, {"tags": ["c++", "linux", "qt", "sockets"], "comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1484158400, "post_id": 41597633, "comment_id": 70398526, "body": "You should post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of the problem code, and your exact compile/link commands, as well as the error messages.  Without those, it&#39;s very hard to tell what you&#39;re doing wrong."}, {"owner": {"reputation": 29577, "user_id": 58129, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MBBRu.jpg?s=128&g=1", "display_name": "Anthony Kong", "link": "https://stackoverflow.com/users/58129/anthony-kong"}, "edited": false, "score": 0, "creation_date": 1484180248, "post_id": 41597633, "comment_id": 70408705, "body": "So you mean you encountered this problem on platform other than linux? If so, what platform is giving you the grief now? Is it still a g++ compiler?"}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 7272953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sIBmw.jpg?s=128&g=1", "display_name": "Slay", "link": "https://stackoverflow.com/users/7272953/slay"}, "is_accepted": true, "score": 0, "last_activity_date": 1484159337, "creation_date": 1484159337, "answer_id": 41598128, "question_id": 41597633, "link": "https://stackoverflow.com/questions/41597633/qt-creator-undefined-socket-linux/41598128#41598128", "title": "Qt Creator undefined socket - Linux", "body": "<p>If you say you've \"<em>included the library</em>\", do you mean including <code>&lt;netinet/in.h&gt;</code>?</p>\n\n<p>And QtCreator is indeed an IDE. It needs to know (or be told) where to find it's toolchains and compiler. You can check this under \"Options\", \"Build &amp; Run\" with tabs for the Qt versions, Compilers, etc. Typically, it would autodetect GCC.</p>\n\n<p>But I guess it is compiling, since you got an error about sockin_addr being undefined. Otherwise, just try and build a simple \"hello world\" first.</p>\n"}, {"tags": [], "owner": {"reputation": 45, "user_id": 7406054, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4fc5e372139e6bbcc17117a7f7c578de?s=128&d=identicon&r=PG&f=1", "display_name": "Gimv30", "link": "https://stackoverflow.com/users/7406054/gimv30"}, "is_accepted": false, "score": 0, "last_activity_date": 1484159765, "creation_date": 1484159765, "answer_id": 41598258, "question_id": 41597633, "link": "https://stackoverflow.com/questions/41597633/qt-creator-undefined-socket-linux/41598258#41598258", "title": "Qt Creator undefined socket - Linux", "body": "<p>I've fixed it, I was just dumb and forgot to add one include. Thanks everyone for the help</p>\n"}], "owner": {"reputation": 45, "user_id": 7406054, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4fc5e372139e6bbcc17117a7f7c578de?s=128&d=identicon&r=PG&f=1", "display_name": "Gimv30", "link": "https://stackoverflow.com/users/7406054/gimv30"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 590, "favorite_count": 0, "closed_date": 1484184273, "accepted_answer_id": 41598128, "answer_count": 2, "score": 0, "last_activity_date": 1484159765, "creation_date": 1484157559, "last_edit_date": 1484159351, "question_id": 41597633, "link": "https://stackoverflow.com/questions/41597633/qt-creator-undefined-socket-linux", "closed_reason": "Not suitable for this site", "title": "Qt Creator undefined socket - Linux", "body": "<p>I am trying to make a server/client application and I am also trying to design a GUI interface for the client in QT. Now, I have managed to make sockets using the library . However, when I write the code into Qt Creator, it's saying that sockaddr_in was undefined even though I've included the library.(when I compile the code on linux with g++ it works fine) What could be the problem?</p>\n\n<p>This is how I declare the socket: sockaddr_in server;</p>\n\n<p>EDIT: It might be with QT Creator not having the g++ compiler? If that might be the case, how do I add it ? I am sorry but I am quite new to QT and programming in general</p>\n\n<p>I am using a \"Start\" button to start my application and this is the code inside it:</p>\n\n<pre><code>void MainWindow::on_StartButton_clicked()\n{\n       int port;\n       port=portiuse;\n       int clientsd;\n       sockaddr_in server;\n\n       if ( ( clientsd = socket(AF_INET, SOCK_STREAM, 0) ) == -1 )\n       {\n           perror(\"[client]Error\\n\");\n           return errno;\n      }\n\n      bzero (&amp;server, sizeof (server));\n\n   server.sin_family = AF_INET;\n   server.sin_addr.s_addr = inet_addr(\"127.0.0.1\");\n   server.sin_port = htons (port);\n\n   if( ( connect(clientsd, (struct sockaddr *) &amp;server, sizeof (struct sockaddr) ) ) == -1 )\n   {\n       perror(\"[client]Error()\\n\");\n       return errno;\n   }\n</code></pre>\n\n<p>}</p>\n\n<p>And these are the errors I get:</p>\n\n<p>error: 'sockaddr_in' was not declared in this scope\n        sockaddr_in server;\n        ^</p>\n\n<p>error: 'server' was not declared in this scope\n        bzero (&amp;server, sizeof (server));\n                ^</p>\n\n<p>error: 'inet_addr' was not declared in this scope\n        server.sin_addr.s_addr = inet_addr(ip);\n                                                      ^</p>\n"}, {"tags": ["android", "c++", "cocos2d-x", "google-play-games"], "comments": [{"owner": {"reputation": 11096, "user_id": 541208, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2dfc2e563d2150994a6e06ef37f9e7be?s=128&d=identicon&r=PG", "display_name": "TankorSmash", "link": "https://stackoverflow.com/users/541208/tankorsmash"}, "edited": false, "score": 0, "creation_date": 1484156769, "post_id": 41597386, "comment_id": 70397657, "body": "If you use <code>ndk-stack</code> and pass it a file with the entire trace, starting with <code>***</code> you might get an improved traceback."}, {"owner": {"reputation": 19, "user_id": 4655462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d08555540eeff66e88dbf9f0c469ecc?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Bogdanov", "link": "https://stackoverflow.com/users/4655462/ilya-bogdanov"}, "reply_to_user": {"reputation": 11096, "user_id": 541208, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2dfc2e563d2150994a6e06ef37f9e7be?s=128&d=identicon&r=PG", "display_name": "TankorSmash", "link": "https://stackoverflow.com/users/541208/tankorsmash"}, "edited": false, "score": 0, "creation_date": 1484157866, "post_id": 41597386, "comment_id": 70398250, "body": "@TankorSmash unfortunately, it&#39;s output of ndk-stack (I passed logcat result in it)"}, {"owner": {"reputation": 11096, "user_id": 541208, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2dfc2e563d2150994a6e06ef37f9e7be?s=128&d=identicon&r=PG", "display_name": "TankorSmash", "link": "https://stackoverflow.com/users/541208/tankorsmash"}, "edited": false, "score": 0, "creation_date": 1484160009, "post_id": 41597386, "comment_id": 70399404, "body": "Oh bummer, I usually get file paths."}, {"owner": {"reputation": 19, "user_id": 4655462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d08555540eeff66e88dbf9f0c469ecc?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Bogdanov", "link": "https://stackoverflow.com/users/4655462/ilya-bogdanov"}, "reply_to_user": {"reputation": 11096, "user_id": 541208, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2dfc2e563d2150994a6e06ef37f9e7be?s=128&d=identicon&r=PG", "display_name": "TankorSmash", "link": "https://stackoverflow.com/users/541208/tankorsmash"}, "edited": false, "score": 0, "creation_date": 1484161024, "post_id": 41597386, "comment_id": 70399957, "body": "@TankorSmash in other cases I had full file paths"}, {"owner": {"reputation": 4109, "user_id": 4077205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa824cf184d59d187862336dbae09183?s=128&d=identicon&r=PG&f=1", "display_name": "Clayton Wilkinson", "link": "https://stackoverflow.com/users/4077205/clayton-wilkinson"}, "edited": false, "score": 1, "creation_date": 1484174637, "post_id": 41597386, "comment_id": 70406830, "body": "Could the scene be destroyed? What is the scope of the auto scene variable?  Does it behave differently if you don&#39;t declare it but static?  Is there other ways the layer object can be destroyed so the address of the callback becomes invalid?"}], "owner": {"reputation": 19, "user_id": 4655462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d08555540eeff66e88dbf9f0c469ecc?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Bogdanov", "link": "https://stackoverflow.com/users/4655462/ilya-bogdanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1484156843, "creation_date": 1484156688, "last_edit_date": 1484156843, "question_id": 41597386, "link": "https://stackoverflow.com/questions/41597386/segv-accerr-after-room-creation-google-play-game-services", "title": "SEGV_ACCERR after room creation Google Play game services", "body": "<p>I'm writing the game with Cocos2d-x and Google Play Game Services for the networking.\nI'm creating a real time room with this code:</p>\n\n<pre><code> auto scene = BattleScene::createScene();\n    BattleScene *layer;\n    if (scene-&gt;getChildByName(\"layer\")) {\n      layer = static_cast&lt;BattleScene *&gt;(scene-&gt;getChildByName(\"layer\"));\n    } else {\n      log(\"Cannot get layer!\");\n      return;\n    }\n    log(\"Creating room...\");\n    auto gameServices = StateManager::getGameServices();\n    gpg::RealTimeRoomConfig config = gpg::RealTimeRoomConfig::Builder()\n                                         .SetMinimumAutomatchingPlayers(1)\n                                         .SetMaximumAutomatchingPlayers(1)\n                                         .Create();\n    log(\"config created\");\n    gameServices-&gt;RealTimeMultiplayer().CreateRealTimeRoom(\n        config, layer,\n        [&amp;](gpg::RealTimeMultiplayerManager::RealTimeRoomResponse const\n                &amp;response) {\n          log(\"created a room %d\", response.status);\n          if (gpg::IsSuccess(response.status)) {\n            gameServices-&gt;RealTimeMultiplayer().ShowWaitingRoomUI(\n                response.room, 1,\n                [&amp;](gpg::RealTimeMultiplayerManager::\n                        WaitingRoomUIResponse const &amp;wait_response) {\n                  log(\"WaitingRoomUIResponse\");\n                  if (IsSuccess(wait_response.status)) {\n                    log(\"Game started\");\n                    Director::getInstance()-&gt;replaceScene(scene);\n                  }\n                });\n          } else\n            log(\"Error1\");\n        });\n</code></pre>\n\n<p>But then (when second player connected) application fails with that log:</p>\n\n<pre><code>signal 11 (SIGSEGV), code 2 (SEGV_ACCERR), fault addr 00584918\nStack frame #00  pc 00584918  [heap]\nStack frame #01  pc 004d4526  /data/data/com.railon.luck/lib/libMyGame.so: Routine std::_Function_handler&lt;void (gpg::RealTimeRoom const&amp;, gpg::MultiplayerParticipant const&amp;), gpg::RealTimeEventListenerHelperImpl::RealTimeEventListenerHelperImpl(gpg::IRealTimeEventListener*)::{lambda(gpg::RealTimeRoom const&amp;, gpg::MultiplayerParticipant const&amp;)#5}&gt;::_M_invoke(std::_Any_data const&amp;, gpg::RealTimeRoom const&amp;, gpg::MultiplayerParticipant const&amp;) at libgcc2.c:?\nStack frame #02  pc 004ec9c8  /data/data/com.railon.luck/lib/libMyGame.so (_ZNKSt8functionIFvRKN3gpg12RealTimeRoomERKNS0_22MultiplayerParticipantEEEclES3_S6_): Routine std::function&lt;void (gpg::RealTimeRoom const&amp;, gpg::MultiplayerParticipant const&amp;)&gt;::operator()(gpg::RealTimeRoom const&amp;, gpg::MultiplayerParticipant const&amp;) const at ??:?\nStack frame #03  pc 004eca08  /data/data/com.railon.luck/lib/libMyGame.so: Routine std::_Function_handler&lt;void (), gpg::RealTimeEventListenerHelperImpl::WrappedRealTimeEventListener::OnParticipantStatusChanged(gpg::RealTimeRoom const&amp;, gpg::MultiplayerParticipant const&amp;)::{lambda()#1}&gt;::_M_invoke(std::_Any_data const&amp;) at libgcc2.c:?\nStack frame #04  pc 00509f6a  /data/data/com.railon.luck/lib/libMyGame.so: Routine gpg::PlatformExecuteOperation(std::function&lt;void ()&gt; const&amp;) at libgcc2.c:?\n</code></pre>\n\n<p>The problem seems to be in <code>OnParticipantStatusChanged</code> func in <code>BattleSceneClass</code>, but there is a error even when this func is empty\nDo you have some ideas?\nYes, <code>BattleScene</code> have <code>IRealTimeEventListener</code> in parents.</p>\n"}, {"tags": ["c++", "assembly", "clang"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1484156770, "post_id": 41597341, "comment_id": 70397659, "body": "Why are you looking at assembly language to debug code? Create mvce and use a debugger?"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 4, "creation_date": 1484156859, "post_id": 41597341, "comment_id": 70397713, "body": "You keep saying <i>&quot;unexpected behavior&quot;</i> but I&#39;m still unsure which behavior you aren&#39;t expecting? Could you please clarify?"}, {"owner": {"reputation": 43, "user_id": 7405859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9da2cf0845181a19f17cbb7ab827894?s=128&d=identicon&r=PG&f=1", "display_name": "CTT", "link": "https://stackoverflow.com/users/7405859/ctt"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1484157593, "post_id": 41597341, "comment_id": 70398113, "body": "@UnholySheep Sorry about that.  I have updated the post with more information."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1484157868, "post_id": 41597341, "comment_id": 70398251, "body": "the whole value_a, value_b thing that really does nothing at all is strange.  Set to 0 and compared against, but not used.  Anytime I see globals and threads, I get nervous."}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 0, "creation_date": 1484158082, "post_id": 41597341, "comment_id": 70398345, "body": "I&#39;m not very skilled with 64b ABIs, but the <code>test rax,rax</code> at the beginning is puzzling me, can&#39;t figure it out. The <code>rax</code> is supposed to be scratch register, so it&#39;s not defined whether <code>al</code> will be 0 or 1 after that <code>setns al</code>? That will later affect <code>counter_a</code> or <code>counter_b</code> is used in first iteration of loop, so it&#39;s not &quot;harmless&quot; UB IMHO. But maybe I&#39;m just overlooking something obvious."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 1, "creation_date": 1484158146, "post_id": 41597341, "comment_id": 70398376, "body": "Also pretty sure that all your compares with atomics are not thread safe.  Yes, they use atomics, but the ? operator still will occur across multiple instructions and therefore it&#39;s values can change."}, {"owner": {"reputation": 43, "user_id": 7405859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9da2cf0845181a19f17cbb7ab827894?s=128&d=identicon&r=PG&f=1", "display_name": "CTT", "link": "https://stackoverflow.com/users/7405859/ctt"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1484158634, "post_id": 41597341, "comment_id": 70398644, "body": "@MichaelDorgan Would you mind mentioning the line(s) you are talking about?  I&#39;m missing where the compares you mention are occurring."}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 0, "creation_date": 1484159757, "post_id": 41597341, "comment_id": 70399239, "body": "Did the complicated logic of <code>test_function</code> emerged after cutting out original code to provide minimal example? Because as it is now, it can be probably written in quite simpler way on C++ level, but I&#39;m not even going to try to rewrite it, if the full version requires it this weird way. (edit: removed, didn&#39;t check properly source)"}, {"owner": {"reputation": 43, "user_id": 7405859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9da2cf0845181a19f17cbb7ab827894?s=128&d=identicon&r=PG&f=1", "display_name": "CTT", "link": "https://stackoverflow.com/users/7405859/ctt"}, "reply_to_user": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 0, "creation_date": 1484160232, "post_id": 41597341, "comment_id": 70399530, "body": "@Ped7g Thanks for pointing out the complication.  It emerged when trying to get smaller test case (a straight reduction of the original actually doesn&#39;t exhibit this behavior)."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 7405859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9da2cf0845181a19f17cbb7ab827894?s=128&d=identicon&r=PG&f=1", "display_name": "CTT", "link": "https://stackoverflow.com/users/7405859/ctt"}, "edited": false, "score": 0, "creation_date": 1484160446, "post_id": 41598139, "comment_id": 70399640, "body": "Yes, that was the part I was suspicious about as well.  Do you see anywhere in the code that might allow for this to be generated?"}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "reply_to_user": {"reputation": 43, "user_id": 7405859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9da2cf0845181a19f17cbb7ab827894?s=128&d=identicon&r=PG&f=1", "display_name": "CTT", "link": "https://stackoverflow.com/users/7405859/ctt"}, "edited": false, "score": 0, "creation_date": 1484166723, "post_id": 41598139, "comment_id": 70403073, "body": "@CTT not really. If it would be <code>state</code> itself, I would expect the opposite logic (enum being A=0, B=1, while <code>al</code> is setns to 1/0 instead). I did think it may be part &quot;after receiving return value of <code>to_state()</code>, before removing it due to inline&quot;, but the inverse logic doesn&#39;t support this. So it&#39;s probably lot more complicated. I&#39;m still not even 100% sure I deciphered it correctly. Also I don&#39;t see anything UB-like in C++ sources, but I&#39;m not C++ guru. One thing to check whether the aliasing through reference is valid, but AFAIG (g=guess), it is. (So I think you hit compiler bug.. 50%?)"}, {"owner": {"reputation": 43, "user_id": 7405859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9da2cf0845181a19f17cbb7ab827894?s=128&d=identicon&r=PG&f=1", "display_name": "CTT", "link": "https://stackoverflow.com/users/7405859/ctt"}, "edited": false, "score": 1, "creation_date": 1484316837, "post_id": 41598139, "comment_id": 70472716, "body": "This did turn out to be a compiler bug.  The fix is here: <a href=\"https://reviews.llvm.org/rL291630\" rel=\"nofollow noreferrer\">reviews.llvm.org/rL291630</a>"}], "tags": [], "owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "is_accepted": true, "score": 1, "last_activity_date": 1484159364, "creation_date": 1484159364, "answer_id": 41598139, "question_id": 41597341, "link": "https://stackoverflow.com/questions/41597341/mapping-c-to-assembly/41598139#41598139", "title": "Mapping c++ to assembly", "body": "<p>I'm not 100% sure (didn't debug it, just simulation in head), but I think the both pairs <code>test rax,rax</code> + <code>setns al</code> are testing something wrong.</p>\n\n<p>Result of first depends on whether <code>rax &lt; 0</code> upon calling the function (UB), and the other test inside loop will be always \"NS\" (testing 32b address in <code>rax</code> => SF=0 => <code>al</code>=1), so fixed <code>al</code> == 1 for the remaining loops will always select the <code>counter_a</code>.</p>\n\n<p>Now I read your question, and you have the same suspicion (I did take a look at code only first).</p>\n"}], "owner": {"reputation": 43, "user_id": 7405859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9da2cf0845181a19f17cbb7ab827894?s=128&d=identicon&r=PG&f=1", "display_name": "CTT", "link": "https://stackoverflow.com/users/7405859/ctt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 41598139, "answer_count": 1, "score": 4, "last_activity_date": 1484159364, "creation_date": 1484156509, "last_edit_date": 1484157413, "question_id": 41597341, "link": "https://stackoverflow.com/questions/41597341/mapping-c-to-assembly", "title": "Mapping c++ to assembly", "body": "<p>When compiling some code with clang 3.9.1 and optimizations (-O2) I ran into some unexpected behavior at run time that I have not seen with other compilers (clang 3.8 and gcc 6.3).  </p>\n\n<p>I thought I may have some unintentional undefined behavior (compiling with ubsan removes the unexpected behavior) so I tried to simplify the program and found that one particular function seems to be causing the differences in behavior.  </p>\n\n<p>Now, I am mapping the assembly back to  c++ to see where it's going wrong to try and determine why this is occurring and there are a few portions I am having difficulty mapping back.</p>\n\n<p><a href=\"https://godbolt.org/g/ccrV7m\" rel=\"nofollow noreferrer\">Godbolt link</a></p>\n\n<p>C++:</p>\n\n<pre><code>#include &lt;atomic&gt;\n#include &lt;cstdint&gt;\n#include &lt;cstdlib&gt;\n#include &lt;thread&gt;\n#include &lt;cstdio&gt;\n\nenum class FooState { A, B };\n\nstruct Foo {\n  std::atomic&lt;std::int64_t&gt; counter{0};\n  std::atomic&lt;std::int64_t&gt; counter_a{0};\n  std::atomic&lt;std::int64_t&gt; counter_b{0};\n};\n\n//__attribute__((noinline))\nFooState to_state(const std::int64_t c) {\n  return c &gt;= 0 ? FooState::A : FooState::B;\n}\n\nstatic const int NUM_MODIFIES = 100;\n\nint value_a = 0, value_b = 0;\nFoo foo;\nstd::atomic&lt;std::int64_t&gt; total_sum{0};\n\nvoid test_function() {\n  bool done = false;\n  while (!done) {\n    const std::int64_t count =\n        foo.counter.fetch_add(1, std::memory_order_seq_cst);\n    const FooState state = to_state(count);\n\n    int &amp;val = FooState::A == state ? value_a : value_b;\n    if (val == NUM_MODIFIES) {\n      total_sum += val;\n      done = true;\n    }\n\n    std::atomic&lt;std::int64_t&gt; &amp;c =\n        FooState::A == state ? foo.counter_a : foo.counter_b;\n    c.fetch_add(1, std::memory_order_seq_cst);\n  }\n}\n</code></pre>\n\n<p>Assembly:</p>\n\n<pre><code>test_function():                     # @test_function()\n        test    rax, rax\n        setns   al\n        lock\n        inc     qword ptr [rip + foo]\n        mov     ecx, value_a\n        mov     edx, value_b\n        cmovg   rdx, rcx\n        cmp     dword ptr [rdx], 100\n        je      .LBB1_3\n        mov     ecx, foo+8\n        mov     edx, value_a\n.LBB1_2:                                # =&gt;This Inner Loop Header: Depth=1\n        test    al, 1\n        mov     eax, foo+16\n        cmovne  rax, rcx\n        lock\n        inc     qword ptr [rax]\n        test    rax, rax\n        setns   al\n        lock\n        inc     qword ptr [rip + foo]\n        mov     esi, value_b\n        cmovg   rsi, rdx\n        cmp     dword ptr [rsi], 100\n        jne     .LBB1_2\n.LBB1_3:\n        lock\n        add     qword ptr [rip + total_sum], 100\n        test    al, al\n        mov     eax, foo+8\n        mov     ecx, foo+16\n        cmovne  rcx, rax\n        lock\n        inc     qword ptr [rcx]\n        ret\n</code></pre>\n\n<p>I have found that marking <code>to_state</code> as <code>noinline</code> or changing <code>done</code> to be global seems to \"fix\" the unexpected behavior.</p>\n\n<p>The unexpected behavior I am seeing is that when counter is >= 0 then counter_a should be incremented otherwise counter_b should be incremented.  From what I can tell sometimes this is not happening, but determining exactly when/why has been difficult.  </p>\n\n<p>One part of the assembly I could use some help with are the <code>test rax, rax; setns al</code> and the <code>test al, 1</code> portions.  It seems like the initial test would not set <code>al</code> deterministically and then that value is used to determine which counter to increment, but perhaps I am misunderstanding something. </p>\n\n<p>Below is a smallish example to demonstrate this issue.  It usually hangs forever when compiled with clang 3.9 and -O2 and runs to completion otherwise.</p>\n\n<pre><code>#include &lt;atomic&gt;\n#include &lt;cstdint&gt;\n#include &lt;cstdlib&gt;\n#include &lt;thread&gt;\n#include &lt;cstdio&gt;\n\nenum class FooState { A, B };\n\nstruct Foo {\n  std::atomic&lt;std::int64_t&gt; counter{0};\n  std::atomic&lt;std::int64_t&gt; counter_a{0};\n  std::atomic&lt;std::int64_t&gt; counter_b{0};\n};\n\n//__attribute__((noinline))\nFooState to_state(const std::int64_t c) {\n  return c &gt;= 0 ? FooState::A : FooState::B;\n}\n\n//__attribute__((noinline))\nFooState to_state2(const std::int64_t c) {\n  return c &gt;= 0 ? FooState::A : FooState::B;\n}\n\nstatic const int NUM_MODIFIES = 100;\n\nint value_a = 0, value_b = 0;\nFoo foo;\nstd::atomic&lt;std::int64_t&gt; total_sum{0};\n\nvoid test_function() {\n  bool done = false;\n  while (!done) {\n    const std::int64_t count =\n        foo.counter.fetch_add(1, std::memory_order_seq_cst);\n    const FooState state = to_state(count);\n\n    int &amp;val = FooState::A == state ? value_a : value_b;\n    if (val == NUM_MODIFIES) {\n      total_sum += val;\n      done = true;\n    }\n\n    std::atomic&lt;std::int64_t&gt; &amp;c =\n        FooState::A == state ? foo.counter_a : foo.counter_b;\n    c.fetch_add(1, std::memory_order_seq_cst);\n  }\n}\n\nint main() {\n  std::thread thread = std::thread(test_function);\n\n  for (std::size_t i = 0; i &lt;= NUM_MODIFIES; ++i) {\n    const std::int64_t count =\n        foo.counter.load(std::memory_order_seq_cst);\n    const FooState state = to_state2(count);\n\n    unsigned log_count = 0;\n\n    auto &amp;inactive_val = FooState::A == state ? value_b : value_a;\n    inactive_val = i;\n\n    if (FooState::A == state) {\n      foo.counter_b.store(0, std::memory_order_seq_cst);\n      const auto accesses_to_wait_for =\n          foo.counter.exchange((std::numeric_limits&lt;std::int64_t&gt;::min)(),\n                               std::memory_order_seq_cst);\n      while (accesses_to_wait_for !=\n             foo.counter_a.load(std::memory_order_seq_cst)) {\n        std::this_thread::yield();\n\n        if(++log_count &lt;= 10) {\n          std::printf(\"#1 wait_for=%ld, val=%ld\\n\", accesses_to_wait_for, \n            foo.counter_a.load(std::memory_order_seq_cst));\n        }\n      }\n    } else {\n      foo.counter_a.store(0, std::memory_order_seq_cst);\n\n      auto temp = foo.counter.exchange(0, std::memory_order_seq_cst);\n      std::int64_t accesses_to_wait_for = 0;\n      while (temp != INT64_MIN) {\n        ++accesses_to_wait_for;\n        --temp;\n      }\n\n      while (accesses_to_wait_for !=\n             foo.counter_b.load(std::memory_order_seq_cst)) {\n        std::this_thread::yield();\n\n        if (++log_count &lt;= 10) {\n          std::printf(\"#2 wait_for=%ld, val=%ld\\n\", accesses_to_wait_for, \n            foo.counter_b.load(std::memory_order_seq_cst));\n        }\n      }\n    }\n\n    std::printf(\"modify #%lu complete\\n\", i);\n  }\n\n  std::printf(\"modifies complete\\n\");\n\n  thread.join();\n\n  const std::size_t expected_result = NUM_MODIFIES;\n  std::printf(\"%s\\n\", total_sum == expected_result ? \"ok\" : \"fail\");\n}\n</code></pre>\n"}, {"tags": ["c++", "omnet++"], "answers": [{"tags": [], "owner": {"reputation": 128, "user_id": 5095396, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a5dd1eb5125a9703adc4d6ae847b5065?s=128&d=identicon&r=PG&f=1", "display_name": "Mour_Ka", "link": "https://stackoverflow.com/users/5095396/mour-ka"}, "is_accepted": true, "score": 0, "last_activity_date": 1484324081, "last_edit_date": 1484324081, "creation_date": 1484323677, "answer_id": 41638828, "question_id": 41597319, "link": "https://stackoverflow.com/questions/41597319/omnet-adding-parameters-to-the-frames-type-length-field/41638828#41638828", "title": "Omnet++ : Adding parameters to the Frame&#39;s type/Length Field", "body": "<p>I noticed that I wasn't using the set function to set the input value to the frame. So the classifier was reading the value set by the constructor.</p>\n\n<pre><code>void EtherTrafGen::sendBurstPackets()\n{\n        etherctrl-&gt;setEtherType(etherType);\n        etherctrl-&gt;setVlanID(vlanID);\n}\n\nvoid EtherEncap::processPacketFromHigherLayer(cPacket *msg)\n{\n        if (etherctrl)\n            eth2Frame-&gt;setEtherType(etherctrl-&gt;getEtherType());\n            eth2Frame-&gt;setVlanID(etherctrl-&gt;getVlanID());\n        frame = eth2Frame;\n}\n\nvoid EtherEncap::processFrameFromMAC(EtherFrame *frame)\n{\n    if (dynamic_cast&lt;EthernetIIFrame *&gt;(frame) != nullptr)\n        {\n        etherctrl-&gt;setEtherType(((EthernetIIFrame *)frame)-&gt;getEtherType());\n        etherctrl-&gt;setVlanID(((EthernetIIFrame *)frame)-&gt;getVlanID());\n        }\n}\n\n// constructor setting the values to zeros if no values are found\nEthernetIIFrame::EthernetIIFrame(const char *name, int kind) : ::inet::EtherFrame(name,kind)\n{\n    this-&gt;setByteLength(ETHER_MAC_FRAME_BYTES);\n\n    this-&gt;etherType = 0;\n    this-&gt;vlanID = 0;\n}\n</code></pre>\n\n<p>in order to etherctrl to call the function it should be in IeeeCtrl.msg</p>\n\n<pre><code>class Ieee802Ctrl\n{\n    int etherType @enum(EtherType);   // used with ~EthernetIIFrame\n    int vlanID @enum(VlanID);\n}\n</code></pre>\n"}], "owner": {"reputation": 128, "user_id": 5095396, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a5dd1eb5125a9703adc4d6ae847b5065?s=128&d=identicon&r=PG&f=1", "display_name": "Mour_Ka", "link": "https://stackoverflow.com/users/5095396/mour-ka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 41638828, "answer_count": 1, "score": 1, "last_activity_date": 1484326671, "creation_date": 1484156422, "last_edit_date": 1484326671, "question_id": 41597319, "link": "https://stackoverflow.com/questions/41597319/omnet-adding-parameters-to-the-frames-type-length-field", "title": "Omnet++ : Adding parameters to the Frame&#39;s type/Length Field", "body": "<p>I added a parameter in EtherIIFrame with etherType and Length to be vlanID</p>\n\n<p>strangely when I took the same steps taken for the etherType just with different naming it didn't work the same way.</p>\n\n<pre><code>// Omnetpp.ini\n**.Host1.app.etherType = 0x3E8\n**.Host1.app.vlanID = 1\n\n// TraffGen.ned\nint etherType = default(0); \nint vlanID = default(0);\n\n// Etherframe.msg\nenum EtherType;\nenum VlanID;\n\npacket EthernetIIFrame extends EtherFrame\n{\n    byteLength = ETHER_MAC_FRAME_BYTES;\n    int etherType @enum(EtherType);\n    int vlanID @enum (VlanID);\n}\n\n// Ieee802Ctrl.msg\nenum EtherType\n{\n    Ether1 = 0x3E8;\n    Ether2 = 0x3E9;\n    Ether3 = 0x3EA;\n    Ether4 = 0x3EB;\n    Ether5 = 0x3EC;\n    Ether6 = 0x3ED;\n    Ether7 = 0x3EF;\n}\n\nenum VlanID\n{\n    priority1 = 1;\n    priority2 = 2;\n    priority3 = 3;\n    priority4 = 4;\n    priority5 = 5;\n    priority6 = 6;\n    priority7 = 7;   \n    priority8 = 8;\n}\n\n// FrameTypeclassifer.cc \n    if (pframe-&gt;getEtherType() == Ether1)\n        send(msg, \"queue1in\");\n\n// Framevlanvlassifier.cc\n    if (pframe-&gt;getVlanID() == priority1)\n        send(msg, \"queue1in\");\n</code></pre>\n\n<p>The difference is happening at the classifier by adding this line before the condition of the classifier in both cases</p>\n\n<pre><code>EV_DETAIL &lt;&lt; \"THE CLASSIFIER READ THE VLAN = \" &lt;&lt; pframe-&gt;getVlanID() &lt;&lt; endl;\nEV_DETAIL &lt;&lt; \"THE CLASSIFIER READ THE VLAN = \" &lt;&lt; pframe-&gt;getEtherType() &lt;&lt; endl;\n</code></pre>\n\n<p>I am getting the below results,\nin the VlanID case, the value never changes from 0 not detecting the input I am giving from ini file</p>\n\n<blockquote>\n  <p>DETAIL\n  (FrameVIDClassifier)Mysimulation.switch.eth[2].queue.classifier: THE\n  CLASSIFIER READ THE VLAN = 0</p>\n</blockquote>\n\n<p>while in the ethertype case it is detecting the ethertype in each frame correctly</p>\n\n<blockquote>\n  <p>DETAIL\n  (FrameTypeClassifier)Mysimulation.switch.eth[2].queue.classifier: THE\n  CLASSIFIER READ THE VLAN = 1000</p>\n</blockquote>\n\n<p>I tried using hex inside the .msg file but still the same so it is not the problem. </p>\n\n<p>Any idea what would be the difference?</p>\n"}, {"tags": ["c++", "optimization", "cpu"], "comments": [{"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 1, "creation_date": 1484155893, "post_id": 41597094, "comment_id": 70397065, "body": "Just my thought, if the caller want to divide by one, just do it. (I&#39;ll probably not check for <code>0</code> either)"}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1484170140, "post_id": 41597094, "comment_id": 70404865, "body": "That would be a premature optimization. When you optimize for one thing, you are pessimizing for everything else. Far more important is code clarity."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1484170417, "post_id": 41597094, "comment_id": 70404977, "body": "Just FYI, if you&#39;re gonna ask a performance question like this and you know what you&#39;re doing, it&#39;s usually a good idea to give some background to the performance issue itself. Otherwise you&#39;re just gonna get a bunch of (potentially useless) comments and answers telling you to not to optimize at all."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1484324917, "post_id": 41597094, "comment_id": 70478005, "body": "Double multiplication? No thanks. For maximum speed, this should be a 16bit fixed-point multiplication (SIMD really likes this). As for your real question, division by 1 is slow on current CPUs."}], "answers": [{"comments": [{"owner": {"reputation": 17424, "user_id": 278842, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/df6877d3f05e542ca5975b4670600f2e?s=128&d=identicon&r=PG", "display_name": "Christopher Oezbek", "link": "https://stackoverflow.com/users/278842/christopher-oezbek"}, "edited": false, "score": 0, "creation_date": 1484156140, "post_id": 41597176, "comment_id": 70397221, "body": "CollapseDepthFactor is almost always 1 (97%) of the time, still I would not want to duplicate the code if it does not lead to a performance benefit."}, {"owner": {"reputation": 17424, "user_id": 278842, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/df6877d3f05e542ca5975b4670600f2e?s=128&d=identicon&r=PG", "display_name": "Christopher Oezbek", "link": "https://stackoverflow.com/users/278842/christopher-oezbek"}, "edited": false, "score": 0, "creation_date": 1484156214, "post_id": 41597176, "comment_id": 70397274, "body": "NumPixels is usually large 512x512 up to full HD"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 17424, "user_id": 278842, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/df6877d3f05e542ca5975b4670600f2e?s=128&d=identicon&r=PG", "display_name": "Christopher Oezbek", "link": "https://stackoverflow.com/users/278842/christopher-oezbek"}, "edited": false, "score": 0, "creation_date": 1484204439, "post_id": 41597176, "comment_id": 70415645, "body": "Hmm.  If NumPixels is large, your next problem is that you&#39;ve got to get all that data from memory to the CPU and back; my intuition is that memory bandwidth will probably be the dominant factor - so still no point optimizing.  Note that my intuition about performance has been right about three times in the last 35 years - <b><i>measure</i></b>"}, {"owner": {"reputation": 17424, "user_id": 278842, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/df6877d3f05e542ca5975b4670600f2e?s=128&d=identicon&r=PG", "display_name": "Christopher Oezbek", "link": "https://stackoverflow.com/users/278842/christopher-oezbek"}, "edited": false, "score": 0, "creation_date": 1484324212, "post_id": 41597176, "comment_id": 70477547, "body": "The profiler tells me, that this is one of the bottleneck methods for our load code."}, {"owner": {"reputation": 17424, "user_id": 278842, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/df6877d3f05e542ca5975b4670600f2e?s=128&d=identicon&r=PG", "display_name": "Christopher Oezbek", "link": "https://stackoverflow.com/users/278842/christopher-oezbek"}, "edited": false, "score": 0, "creation_date": 1484324283, "post_id": 41597176, "comment_id": 70477596, "body": "I disagree with your statement entirely, measuring will not help me, because it will only give info on a single sample (my PC)."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 17424, "user_id": 278842, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/df6877d3f05e542ca5975b4670600f2e?s=128&d=identicon&r=PG", "display_name": "Christopher Oezbek", "link": "https://stackoverflow.com/users/278842/christopher-oezbek"}, "edited": false, "score": 0, "creation_date": 1484382042, "post_id": 41597176, "comment_id": 70495332, "body": "Measuring will give you more information than theoretical pontification.  It is obviously best if you can measure on a range representative of your target  platforms - but a single measurement will be more accurate than guess work."}], "tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1484155948, "creation_date": 1484155948, "answer_id": 41597176, "question_id": 41597094, "link": "https://stackoverflow.com/questions/41597094/should-division-by-one-get-a-special-case/41597176#41597176", "title": "Should division by one get a special case?", "body": "<p>As a general rule, the answer is <strong>No</strong>.  Write clear code first and optimize it later when the profiler tells you have a problem.</p>\n\n<p>The only way to answer whether this particular optimization will help in this particular hotspot is: \"measure it and see\".</p>\n\n<p>Unless <code>collapseFactorDepth</code> is almost <em>always</em> 1, or <code>numPixels</code> is very large (at least thousands and possibly more), I would not expect the optimization to help (branches are expensive).</p>\n\n<p>You are much more likely to benefit from using SSE or similar SIMD instructions.</p>\n"}, {"tags": [], "owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "is_accepted": false, "score": 0, "last_activity_date": 1484170163, "last_edit_date": 1484170163, "creation_date": 1484169845, "answer_id": 41600941, "question_id": 41597094, "link": "https://stackoverflow.com/questions/41597094/should-division-by-one-get-a-special-case/41600941#41600941", "title": "Should division by one get a special case?", "body": "<ol>\n<li>Follow @Martin Bonner's advice. Optimize when you need to.</li>\n<li>When you need to:</li>\n</ol>\n\n<hr>\n\n<pre><code>int identity(int pixel)\n{\n    return pixel;\n}\n\ntemplate&lt;int collapseFactorDepth&gt;\nint div(int pixel)\n{\n    return pixel / collapseFactorDepth;\n}\n\nstruct Div\n{\n    int collapseFactorDepth_;\n    Div(collapseFactorDepth)\n        : collapseFactorDepth(collapseFactorDepth_) {}\n    int operator()(int pixel)\n    {\n        return pixel / collapseFactorDepth_;\n    }\n};\n\ntemplate&lt;typename T&gt;\nvoid fn(int* pDataTarget, T fn)\n{    \n    for (int i = 0; i &lt; numPixels; i++)\n    {\n        pDataTarget[i] += fn(pPixelData[i]);\n    }\n}\n\nvoid fn(int* pDataTarget)\n{\n    fn(pDataTarget, identity);\n}\n\ntemplate&lt;int collapseFactorDepth&gt;\nvoid fnComp()\n{\n    fn(pDataTarget, div&lt;collapseFactorDepth&gt;);\n}\n\nvoid fn(int* pDataTarget, int collapseFactorDepth)\n{\n    fn(pDataTarget, Div(collapseFactorDepth));\n}\n</code></pre>\n\n<p>This provides you a convenient default behaviour, a compile-time divide (which <em>might</em> be faster than divide-by-int) when possible and a way (passing a <code>Div</code>) to specify runtime behaviour.</p>\n"}], "owner": {"reputation": 17424, "user_id": 278842, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/df6877d3f05e542ca5975b4670600f2e?s=128&d=identicon&r=PG", "display_name": "Christopher Oezbek", "link": "https://stackoverflow.com/users/278842/christopher-oezbek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1484324551, "creation_date": 1484155701, "last_edit_date": 1484324551, "question_id": 41597094, "link": "https://stackoverflow.com/questions/41597094/should-division-by-one-get-a-special-case", "title": "Should division by one get a special case?", "body": "<p>If we have a division by one in an inner loop, is it smart to add special case treatment to eliminate the division:</p>\n\n<p>BEFORE: </p>\n\n<pre><code>    int collapseFactorDepth...\n    for (int i = 0; i &lt; numPixels; i++)\n    {\n      pDataTarget[i] += pPixelData[i] / collapseFactorDepth;\n    }\n</code></pre>\n\n<p>AFTER:</p>\n\n<pre><code>  if (collapseFactorDepth != 1)\n  {\n    for (int i = 0; i &lt; numPixels; i++)\n    {\n      pDataTarget[i] += pPixelData[i] / collapseFactorDepth;\n    }\n  }\n  else\n  {\n    for (int i = 0; i &lt; numPixels; i++)\n    {\n      pDataTarget[i] += pPixelData[i];\n    }\n  }\n</code></pre>\n\n<p>Can the compiler reason this by itself? Do modern CPUs contain any means to optimize this?</p>\n\n<p>I am particularly interested if you consider the additional code beneficial in contrast to the performance gain (is there any?).</p>\n\n<p>Background: </p>\n\n<ul>\n<li>Numpixels is big</li>\n<li>collapseFactorDepth is 90% of the time 1</li>\n<li>Modern CPUs: Intel x86/amd64 architecture</li>\n<li>Please don't consider the wider things. The memory overhead of loading is optimized. </li>\n<li>Let's not sweat that we should probably do this as a double multiplication anyway.</li>\n</ul>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 952, "user_id": 5548598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46ca4f3bb8b45761077cbfd9a6e9d0cf?s=128&d=identicon&r=PG&f=1", "display_name": "Taelsin", "link": "https://stackoverflow.com/users/5548598/taelsin"}, "edited": false, "score": 3, "creation_date": 1484155831, "post_id": 41597066, "comment_id": 70397025, "body": "You&#39;ve defined <code>gradePoint</code> and <code>letterGrade</code> to be only 6 in size, but access them with <code>i</code> which is more than 6 when your program breaks."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1484155928, "post_id": 41597066, "comment_id": 70397084, "body": "I don&#39;t like the VLA usage however that is not the issue."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1484157743, "post_id": 41597066, "comment_id": 70398188, "body": "<code>int scores[numOfCourse];</code> -- This isn&#39;t valid C++.  C++ requires arrays to have compile-time constants to declare the number of entries, not a variable.  Use <code>std::vector&lt;int&gt; scores(numOfCourse);</code> instead."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 1, "creation_date": 1484161193, "post_id": 41597066, "comment_id": 70400040, "body": "This is why you really must learn to use the debugger. One of Its jobs is to show you where (and usually why) you crashed."}], "owner": {"reputation": 11, "user_id": 7405884, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-a9hV34UpkcU/AAAAAAAAAAI/AAAAAAAAAX0/CR9saOLR2EQ/photo.jpg?sz=128", "display_name": "Justice Otuya", "link": "https://stackoverflow.com/users/7405884/justice-otuya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1484194594, "creation_date": 1484155632, "last_edit_date": 1484194594, "question_id": 41597066, "link": "https://stackoverflow.com/questions/41597066/gpa-calculator-crash-bug-in-c", "title": "GPA calculator crash bug in c++", "body": "<p>I am a noob in programming and was told that to learn more, I need to do some project and so I started this GPA calculator that eventually prints your GPS in both 5 unit and it 4 unit equivalent. </p>\n\n<p>The problem is I created an array to hold the grade point from A-F and another array to hold the letter grade from 0-5, but after I was done it performed well until I noticed it crashes when I try to calculate for more than 6 courses, I have tried what I can do but still can't detect the bug and solve the problem all to no avail.</p>\n\n<pre><code>    #include&lt;iomanip&gt;\n    #include &lt;iostream&gt;\n    using namespace std;\n\n    int main(){\n            int numOfCourse;\n\n            cout&lt;&lt;\"insert the number of courses offered: \";\n            cin&gt;&gt;numOfCourse;\n\n            int scores[numOfCourse];//an array that stores the number of course inputed by the user\n            int creditUnit[numOfCourse];//another array that stores the credit unit of the user\n            int qualityPoint[numOfCourse];//this is gotten by multiplying the credit unit by grade point\n            int totalQualityPoint=0;\n            int totalCreditUnit=0;\n            int gradePoint[6];//predefined grade point 0-5\n            string letterGrade[6];//predefined letter grade A-F which corresponds with the grade point\n            float gradePointAverage5;//5 point GPA Scale\n            float gradePointAverage4;// 4 point GPA Scale\n\n    // Asks the user to input scores and credit load of the courses\n        for (int i=0; i&lt; numOfCourse; i++){\n            cout&lt;&lt;\"input the scores of the course: \"; \n            cin&gt;&gt;scores[i];\n            cout&lt;&lt;\" input the credit load of the course: \";\n            cin&gt;&gt;creditUnit[i];\n\n\n    //defining the gradepoint and its corresponding letter grade\n        if(scores[i] &lt;= 39){\n            gradePoint[i]=0;\n            letterGrade[i] = \"F\";       \n        } else if (scores[i] &gt;=40 &amp;&amp; scores[i] &lt;= 44){\n            gradePoint[i]=1;\n            letterGrade[i] =\"E\";\n        } else if (scores[i] &gt;=45 &amp;&amp;scores[i]&lt;= 49){\n            gradePoint[i]=2;\n            letterGrade[i] = \"D\";\n        }else if (scores[i] &gt;=50 &amp;&amp;scores[i] &lt;= 59){\n            gradePoint[i] =3;\n            letterGrade[i] = \"C\";\n        }else if (scores[i] &gt;=60 &amp;&amp;scores[i] &lt;= 69){\n            gradePoint[i]=4;\n            letterGrade[i] = \"B\";\n        }else if (scores[i]&gt;=69 &amp;&amp;scores[i] &lt;= 100){\n            gradePoint[i]=5;\n            letterGrade[i] = \"A\";\n        }else{\n            cout&lt;&lt; \"Your grade is incorrect\"&lt;&lt;endl;\n            return 0;\n        }\n    }\n\n\ncout&lt;&lt;\"Scores       Letter      Credit      Grade       QualityPoint\"&lt;&lt;endl;\n        cout&lt;&lt;\"     Grade       Unit        Point       (CU * GP)\"&lt;&lt;endl;\n\n\nfor(int i =0; i&lt;numOfCourse;i++){\n    qualityPoint[i] = creditUnit[i] *  gradePoint[i];\n\ncout&lt;&lt;scores[i] &lt;&lt;\"     \"&lt;&lt;letterGrade[i]&lt;&lt;\"        \"&lt;&lt;creditUnit[i]\n&lt;&lt;\"     \"&lt;&lt;gradePoint[i]&lt;&lt; \"        \"&lt;&lt;qualityPoint[i]&lt;&lt;endl;\n\ntotalQualityPoint=totalQualityPoint + qualityPoint[i];\ntotalCreditUnit=totalCreditUnit + creditUnit[i];\ngradePointAverage5= float(totalQualityPoint)/float(totalCreditUnit);\ngradePointAverage4 = (gradePointAverage5/5)*4;\n} \n\n    cout&lt;&lt; \"Your total Quality Point is: \"&lt;&lt;totalQualityPoint&lt;&lt;endl;\n    cout&lt;&lt; \"Your total Credit Unit is: \"&lt;&lt;totalCreditUnit&lt;&lt;endl;\n    cout&lt;&lt; \"Your Grade Point Average (GPA) on the 5 point scale is : \"&lt;&lt;setprecision(2)&lt;&lt;fixed&lt;&lt;gradePointAverage5&lt;&lt;endl;\n    cout&lt;&lt; \"Your Grade Point Average (GPA) on the 4 point scale is : \"&lt;&lt;setprecision(2)&lt;&lt;fixed&lt;&lt;gradePointAverage4&lt;&lt;endl;\n\n    }\n</code></pre>\n"}, {"tags": ["c++", "c", "arrays"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 2, "creation_date": 1484155646, "post_id": 41597039, "comment_id": 70396911, "body": "The array is being interpreted as a <i>pointer</i> inside the function, hence the problem. Even worse, you&#39;re passing <i>a single member</i> of <code>ary</code> to the function, not the whole array."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1484155673, "post_id": 41597039, "comment_id": 70396933, "body": "<code>ary</code> is pointer in <code>printAry</code>, not <code>array of int</code>."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 4, "last_activity_date": 1484155677, "creation_date": 1484155677, "answer_id": 41597085, "question_id": 41597039, "link": "https://stackoverflow.com/questions/41597039/why-am-i-iterating-less-times-than-expected/41597085#41597085", "title": "Why am I iterating less times than expected?", "body": "<p>You can't use the <code>sizeof(ary) / sizeof(ary[0])</code> idiom if <code>ary</code> is a function parameter since it will have already <em>decayed</em> into a pointer type: <code>sizeof(ary)</code> is merely the size of a pointer to <code>int</code> on your platform.</p>\n\n<p>In C, you need to pass the size information explicitly, or adopt a convention that a particular value signals the end of the array (cf. <code>'\\0'</code> in the C standard library string functions.)</p>\n\n<p>In C++, you can use a <code>std::vector</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1484155858, "post_id": 41597089, "comment_id": 70397046, "body": "If you don&#39;t mind: I&#39;ve added &quot;pointer to <code>int</code>&quot; as not all pointers <i>necessarily</i> need to be the same size."}, {"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1484155942, "post_id": 41597089, "comment_id": 70397091, "body": "@Bathsheba yes, for example pointers to functions hypothetically may have another size. Good point!"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1484156005, "post_id": 41597089, "comment_id": 70397126, "body": "It&#39;s true for primitives too, e.g. <code>sizeof(int*)</code> might be different to <code>sizeof(long*)</code>."}, {"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1484156160, "post_id": 41597089, "comment_id": 70397239, "body": "@Bathsheba is it guaranteed by the standard?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1484156201, "post_id": 41597089, "comment_id": 70397269, "body": "I wouldn&#39;t bet my job on it, but I&#39;m sure the standard allows for <code>sizeof(int*)</code> to be different to <code>sizeof(long*)</code>."}], "tags": [], "owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "is_accepted": true, "score": 4, "last_activity_date": 1484155777, "last_edit_date": 1484155777, "creation_date": 1484155691, "answer_id": 41597089, "question_id": 41597039, "link": "https://stackoverflow.com/questions/41597039/why-am-i-iterating-less-times-than-expected/41597089#41597089", "title": "Why am I iterating less times than expected?", "body": "<p>The reason is that <em>arrays decay into pointers</em>.</p>\n\n<p>Basically</p>\n\n<pre><code>void printAry(int ary[])\n</code></pre>\n\n<p>is equivalent to:</p>\n\n<pre><code>void printAry(int* ary)\n</code></pre>\n\n<p>So <code>sizeof(ary)</code> is equal to the size of pointer to <code>int</code> on your system.</p>\n"}], "owner": {"reputation": 31, "user_id": 6677201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fcbe69f1698e21dd1dd458d6975b8b2?s=128&d=identicon&r=PG&f=1", "display_name": "BrandonW000", "link": "https://stackoverflow.com/users/6677201/brandonw000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "closed_date": 1484155767, "accepted_answer_id": 41597089, "answer_count": 2, "score": 0, "last_activity_date": 1484162440, "creation_date": 1484155561, "last_edit_date": 1484162440, "question_id": 41597039, "link": "https://stackoverflow.com/questions/41597039/why-am-i-iterating-less-times-than-expected", "closed_reason": "Duplicate", "title": "Why am I iterating less times than expected?", "body": "<p>I have printed out my <code>sizeof(array)/sizeof(*array)</code> and receive the number three, but when I pass my array into my function it prints out 2 when stored into a variable and therefor iterates one less time than it should. </p>\n\n<pre><code> void printAry(int ary[])\n {\n     int size = sizeof(ary)/sizeof(ary[0]);\n       cout&lt;&lt;size;//size will print out 2! why?\n       for(int i = 0; i &lt; size;i++)\n     {\n         cout&lt;&lt;ary[i];\n     }\n }\n\n int main() {\n     int ary[3] = {1,2,3};\n     cout&lt;&lt;sizeof(ary[0]);\n\n     return 0;\n }\n</code></pre>\n\n<p>Why is it iterating one time less than expected ?</p>\n"}, {"tags": ["c++", "image", "image-processing", "gis", "image-formats"], "owner": {"reputation": 61, "user_id": 5185979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d11905287dfd26365fd3785f3a9397f?s=128&d=identicon&r=PG", "display_name": "user55937", "link": "https://stackoverflow.com/users/5185979/user55937"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 554, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1484155043, "creation_date": 1484155043, "question_id": 41596873, "link": "https://stackoverflow.com/questions/41596873/how-to-access-pixel-values-using-nitro-nitf-library-using-c-bindings", "title": "How to access pixel values using NITRO NITF library using C++ bindings", "body": "<p>I have a task to write a module to unpack <a href=\"https://en.wikipedia.org/wiki/National_Imagery_Transmission_Format\" rel=\"nofollow noreferrer\">National Imagery Transmission Format (NITF)</a> images and pass around the data in memory to various processing modules. I have chosen to use the <a href=\"https://github.com/hobu/nitro\" rel=\"nofollow noreferrer\">NITRO</a> library. I am trying to figure out how to read the image and access the pixel values, but I am having trouble. I am using the C++ bindings. </p>\n\n<p>I successfully compiled the library. Now, I am trying to use the unit tests to understand how to use the library, namely read an image and access the pixel values. There are also some examples <a href=\"http://nitro-nitf.sourceforge.net/wikka.php?wakka=NitroSnippets\" rel=\"nofollow noreferrer\">here</a>. However, the unit tests and code snippets don't perform this task directly.</p>\n\n<p>My toy example is below. I've tried variations of the code below, but I almost always get some error in <code>image_reader.read()</code>. The code below results in an error about too many bands, but if I limit the number of bands, then I don't get an error but the buffer doesn't seem to have any values in it. </p>\n\n<p>I would be grateful to anyone who could give me some guidance or tips on how to use this library to access pixel values.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"stdafx.h\"\n\n#define IMPORT_NITRO_API\n\n#include &lt;import/nitf.hpp&gt;\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    const std::string filename = \"my_image.NTF\";\n    nitf::Reader reader;\n    nitf::IOHandle io(filename.c_str());\n    nitf::Record record = reader.read(io);\n\n    nitf::List images = record.getImages();\n    nitf::ListIterator iter = images.begin(); // NITF can store more than one image - just try the first\n    nitf::ImageSegment segment = *iter; \n\n    nitf::SubWindow window; // define a subwindow for reading - try to read the whole image although it might be slow\n    unsigned int numRows = segment.getSubheader().getNumRows();\n    unsigned int numCols = segment.getSubheader().getNumCols();\n    const int band_count = segment.getSubheader().getBandCount();\n    window.setNumRows(numRows);\n    window.setNumCols(numCols);\n    window.setNumBands(band_count);\n\n    nitf::Uint32* band_list = new nitf::Uint32[band_count];\n    for (nitf::Uint32 band_number = 0; band_number &lt; band_count; band_number++)\n        band_list[band_number] = band_number;\n\n    window.setBandList(band_list);\n\n    auto image_reader = reader.newImageReader(1); // 1 seems to be the image number: nitro-master\\c\\nitf\\tests\\test_create_xmltre.c\n    std::vector&lt; std::vector&lt;nitf::Uint8&gt; &gt; buffer(band_count); // User-defined data buffers for read\n    for (nitf::Uint32 band_number = 0; band_number &lt; band_count; band_number++)\n        buffer[band_number].resize(numRows * numCols);\n\n    int padded = 0; // Returns TRUE if pad pixels may have been read\n    image_reader.read(window, (nitf::Uint8**)&amp;buffer[0], &amp;padded);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1484155601, "post_id": 41596761, "comment_id": 70396880, "body": "Can you quote <i>precisely</i> the error message you get please.  Preferably include a very short minimal program (<code>int main() {return 0;}</code> is just fine) below the two lines of code you have shown."}], "answers": [{"tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1484155716, "creation_date": 1484155716, "answer_id": 41597101, "question_id": 41596761, "link": "https://stackoverflow.com/questions/41596761/complex-h-for-other-compilers-than-a-win32-target-such-as-code-composer-studio/41597101#41597101", "title": "complex.h for other compilers than a win32 target, such as code composer studio (CCS)", "body": "<p>\"complex\" is a C++ standard header (not inherited from C) as such it doesn't have a trailing \".h\".  Try either of</p>\n\n<pre><code>#include &lt;complex&gt;\n#include \"complex\" \n</code></pre>\n\n<p>Either should work.  For more details: <a href=\"http://en.cppreference.com/w/cpp/numeric/complex\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/numeric/complex</a></p>\n"}, {"tags": [], "owner": {"reputation": 18808, "user_id": 924727, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bd2dcbbfd05a7c49cd74c7cb93e26488?s=128&d=identicon&r=PG", "display_name": "Emilio Garavaglia", "link": "https://stackoverflow.com/users/924727/emilio-garavaglia"}, "is_accepted": false, "score": 0, "last_activity_date": 1484155801, "creation_date": 1484155801, "answer_id": 41597133, "question_id": 41596761, "link": "https://stackoverflow.com/questions/41596761/complex-h-for-other-compilers-than-a-win32-target-such-as-code-composer-studio/41597133#41597133", "title": "complex.h for other compilers than a win32 target, such as code composer studio (CCS)", "body": "<p>Unless you are using an \"old days broken compiler\" like \"turbo C++\" or some MS compiler in compatibility mode, there is no <code>complex.h</code> header in C++.\nthe header is named <code>&lt;complex&gt;</code></p>\n\n<p>See <a href=\"http://en.cppreference.com/w/cpp/header/complex\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/header/complex</a></p>\n"}], "owner": {"reputation": 1, "user_id": 7405856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7ff536db087dc2415d02c5f3aec51b7?s=128&d=identicon&r=PG&f=1", "display_name": "SamJ", "link": "https://stackoverflow.com/users/7405856/samj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1484155801, "creation_date": 1484154694, "last_edit_date": 1484155524, "question_id": 41596761, "link": "https://stackoverflow.com/questions/41596761/complex-h-for-other-compilers-than-a-win32-target-such-as-code-composer-studio", "title": "complex.h for other compilers than a win32 target, such as code composer studio (CCS)", "body": "<p>I have an error about including complex.h, I use CCS 5.2.1 for programming TMS320C6713  which is the embedded processor of a DAQ module that I have. The language is generally same as C++ with some compiler differences.</p>\n\n<p>neither of these works out for me</p>\n\n<pre><code>#include &lt;complex.h&gt;\n#include \"complex.h\"  \n</code></pre>\n\n<p>I got errors such as \"can not resolve ....\" or \"can not open the ... file\"</p>\n\n<p>what is the standard library that I should include, which calls this header indirectly, or how can I write this header file myself.</p>\n"}, {"tags": ["c++", "binary", "fstream"], "comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1484154867, "post_id": 41596741, "comment_id": 70396413, "body": "While a good question, i think this is primarily opinion based. They are the same thing, just different ways to reference them."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1484155429, "post_id": 41596741, "comment_id": 70396779, "body": "My feeling is the first part is opinion based, but the second one isn&#39;t."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1484156744, "post_id": 41596741, "comment_id": 70397637, "body": "I think you may have a typo in your question. Are you really asking if <code>std::ios::beg</code> is the same as <code>std::ios::end</code>? Are you really asking if the beginning of something is the same as the end of something?"}, {"owner": {"reputation": 761, "user_id": 7198015, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/1045114908943982/picture?type=large", "display_name": "Jo&#227;o Pires", "link": "https://stackoverflow.com/users/7198015/jo%c3%a3o-pires"}, "edited": false, "score": 0, "creation_date": 1484156793, "post_id": 41596741, "comment_id": 70397673, "body": "The guy who edited my question didn&#39;t edit it well, I&#39;ll correct ;)"}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1484156934, "post_id": 41596741, "comment_id": 70397751, "body": "Yeah, that was a bad edit. Not just bad formatting, but he also fundamentally changed your question in the final paragraph."}, {"owner": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "edited": false, "score": 0, "creation_date": 1484156987, "post_id": 41596741, "comment_id": 70397787, "body": "@DagobertoPires - I&#39;m that guy, sorry. I didn&#39;t look at the examples well enough I&#39;m afraid. However, the original question was way too opinion-based."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 3, "last_activity_date": 1484154758, "creation_date": 1484154758, "answer_id": 41596786, "question_id": 41596741, "link": "https://stackoverflow.com/questions/41596741/stdiosbinary-or-stdifstreambinary-and-similar/41596786#41596786", "title": "std::ios::binary or std::ifstream::binary and similar?", "body": "<p><code>std::ios::binary</code> vs. <code>std::ifstream::binary</code> is largely down to personal choice, but I always use the more \"fundamental\" definition insofar that it's further up the inheritance tree if you get my meaning. Hence <code>std::ios::binary</code> is my choice.</p>\n\n<p>As for <code>std::ios::beg</code> and <code>your_file_stream.beg</code>, I'd plump for the former: it's pointless and obfuscating to reach a <code>static</code> member via an instance.</p>\n"}, {"tags": [], "owner": {"reputation": 18808, "user_id": 924727, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bd2dcbbfd05a7c49cd74c7cb93e26488?s=128&d=identicon&r=PG", "display_name": "Emilio Garavaglia", "link": "https://stackoverflow.com/users/924727/emilio-garavaglia"}, "is_accepted": false, "score": 1, "last_activity_date": 1484156531, "creation_date": 1484156531, "answer_id": 41597345, "question_id": 41596741, "link": "https://stackoverflow.com/questions/41596741/stdiosbinary-or-stdifstreambinary-and-similar/41597345#41597345", "title": "std::ios::binary or std::ifstream::binary and similar?", "body": "<p>They ARE the same, since <code>ifstream</code> inherit from <code>ios</code>...</p>\n\n<p>There is no \"idiom\" there. Just opinions.</p>\n\n<p>My personal one is that you shold protect you code in a way a change in the library it uses will retain you code consistency. </p>\n\n<p>So <code>your_file_stream.end</code> is always coherent to <code>your_file_stream</code> whatever it is and however it is composed in present and future versions. And even if it happens to be different respect to other stream types, will always work.</p>\n\n<p>If you don't have an instance, <code>std::ifstream::binary</code> is always coherent with <code>ifstream</code>, however it will be composed now and in the future. And will word even if it will be different from other types.</p>\n\n<p>If you're writing a polymorphic runtime-function taking <code>std::ios&amp;</code>, than <code>std::ios::binary</code> is fine.</p>\n\n<p>However it will be unlikely those things will ever be changed, so ... it does not really matters.</p>\n"}], "owner": {"reputation": 761, "user_id": 7198015, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/1045114908943982/picture?type=large", "display_name": "Jo&#227;o Pires", "link": "https://stackoverflow.com/users/7198015/jo%c3%a3o-pires"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7294, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1484156824, "creation_date": 1484154604, "last_edit_date": 1484156824, "question_id": 41596741, "link": "https://stackoverflow.com/questions/41596741/stdiosbinary-or-stdifstreambinary-and-similar", "title": "std::ios::binary or std::ifstream::binary and similar?", "body": "<p>While searching for file reading examples in C++, I notice that many examples use</p>\n\n<ul>\n<li><code>std::ios::binary</code> vs <code>std::ifstream::binary</code></li>\n<li><code>std::ios::beg</code> vs <code>your_file_stream.beg</code></li>\n<li><code>std::ios::end</code> vs <code>your_file_stream.end</code></li>\n</ul>\n\n<p>Are there any differences in these examples, and if not, why are they both included in the STL?</p>\n"}, {"tags": ["c++", "multithreading", "macos", "recursion", "grand-central-dispatch"], "comments": [{"owner": {"reputation": 83109, "user_id": 1312143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d64f50f989e564c337a8a8bd653b8e6?s=128&d=identicon&r=PG", "display_name": "Ken Thomases", "link": "https://stackoverflow.com/users/1312143/ken-thomases"}, "edited": false, "score": 0, "creation_date": 1484154693, "post_id": 41596720, "comment_id": 70396295, "body": "You don&#39;t own the threads GCD uses, so you don&#39;t get any control over them. If you need this level of control, you should use threads you create yourself using APIs like pthreads directly."}, {"owner": {"reputation": 19, "user_id": 753093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f71c0a3cdc214dfaecd52be7b477c0e?s=128&d=identicon&r=PG", "display_name": "Abraham Mart&#237;n Exp&#243;sito", "link": "https://stackoverflow.com/users/753093/abraham-mart%c3%adn-exp%c3%b3sito"}, "reply_to_user": {"reputation": 83109, "user_id": 1312143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d64f50f989e564c337a8a8bd653b8e6?s=128&d=identicon&r=PG", "display_name": "Ken Thomases", "link": "https://stackoverflow.com/users/1312143/ken-thomases"}, "edited": false, "score": 0, "creation_date": 1484229141, "post_id": 41596720, "comment_id": 70431058, "body": "OK, it seems that I have no option, I changed my code to use pthreads directly, problem solved. Thanks!"}], "owner": {"reputation": 19, "user_id": 753093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f71c0a3cdc214dfaecd52be7b477c0e?s=128&d=identicon&r=PG", "display_name": "Abraham Mart&#237;n Exp&#243;sito", "link": "https://stackoverflow.com/users/753093/abraham-mart%c3%adn-exp%c3%b3sito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 242, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1484646051, "creation_date": 1484154520, "last_edit_date": 1484646051, "question_id": 41596720, "link": "https://stackoverflow.com/questions/41596720/is-there-a-way-to-set-thread-stack-size-using-gcd", "title": "Is there a way to set thread stack size using GCD?", "body": "<p>I have a multiplatform code that has some recursive calls (running in a thread, not the main one), and in some cases the default stack size is not enough for the recursivity depth. I solve this in windows using the /STACK compiler flag:</p>\n\n<p>/STACK:2097152 (2MB, default: 1MB)</p>\n\n<p>But in OSX I use GCD. I readed that it is implemented over pthreads, but I am not able to find a way to set the threads' stack size like pthreads does (using something like pthread_attr_setstacksize).</p>\n\n<p>I tried using the linker flag -Wl,-stack_size -Wl,1000000, but it doesn't matter what amount I set here, my application always crashes at the same recursivity depth level. It seems that this only affects to the main thread, not the ones created after by GCD.</p>\n\n<p>I tried setting the system stack size throught ulimit -s 32768 (default: 8192), it does not affect to the recursivity depth level I can achieve either.</p>\n"}, {"tags": ["c++", "c", "stl"], "comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 1, "creation_date": 1484155023, "post_id": 41596689, "comment_id": 70396522, "body": "<code>std::vector&lt;FooTypes&gt; myFooTypes{ FOO_TYPE_A, FOO_TYPE_ZZ, FOO_TYPE_B, FOO_TYPE_NONE };</code>, or <code>myFooTypes.push_back(FOO_TYPE_NONE)</code>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1484156116, "post_id": 41596689, "comment_id": 70397203, "body": "Consider using <a href=\"http://en.cppreference.com/w/cpp/container/vector/data\" rel=\"nofollow noreferrer\">std::vector::data</a> instead of <code>&amp;myFooTypes.front()</code>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1484156133, "post_id": 41596689, "comment_id": 70397216, "body": "&quot;I don&#39;t want to create unnecessary mutations or copies&quot; -- if the C function expects a terminated array, then you must either copy the original vector (or at least its contents), or mutate the vector by appending a terminator.  There are no other alternatives.  You could conceivably add the terminator for the duration of the call, then remove it again."}], "answers": [{"comments": [{"owner": {"reputation": 1351, "user_id": 328316, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/8face8afbe4e34480ae1c65a232c46ca?s=128&d=identicon&r=PG", "display_name": "Ben L", "link": "https://stackoverflow.com/users/328316/ben-l"}, "edited": false, "score": 0, "creation_date": 1484931378, "post_id": 41767554, "comment_id": 70728844, "body": "NO. If I could change the api, I would. But this is not under my control."}], "tags": [], "owner": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "is_accepted": false, "score": -1, "last_activity_date": 1484927439, "creation_date": 1484927439, "answer_id": 41767554, "question_id": 41596689, "link": "https://stackoverflow.com/questions/41596689/guidelines-for-passing-stl-containers-to-c-functions/41767554#41767554", "title": "Guidelines for passing stl containers to C functions", "body": "<p>A better solution is to change the interface of <code>find_best_footype</code> to take a pointer and a length, rather than assuming a terminator.\n(if you have to maintain C compatibility for <code>find_best_footype</code>)</p>\n\n<p>Then you can write:</p>\n\n<pre><code>FooTypes foo = find_best_footype(myFooTypes.data(), myFooTypes.size(), 42); \n</code></pre>\n\n<p>and not have to change the vector. However, this will require changes elsewhere.</p>\n"}], "owner": {"reputation": 1351, "user_id": 328316, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/8face8afbe4e34480ae1c65a232c46ca?s=128&d=identicon&r=PG", "display_name": "Ben L", "link": "https://stackoverflow.com/users/328316/ben-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1484927439, "creation_date": 1484154444, "question_id": 41596689, "link": "https://stackoverflow.com/questions/41596689/guidelines-for-passing-stl-containers-to-c-functions", "title": "Guidelines for passing stl containers to C functions", "body": "<p>We're migrating to modern c++ with stl containers. But the old c with classes style persists. One of the hardest areas to refactor are the interfaces to C api's.</p>\n\n<pre><code>// foo_types_list (array terminated by FOO_TYPE_NONE)\nenum FooTypes find_best_footype(const enum FooTypes *foo_types_list,\n                                        unsigned int capabilities);\n\nstd::vector&lt;FooTypes&gt; myFooTypes{ FOO_TYPE_A, FOO_TYPE_ZZ, FOO_TYPE_B };\n\nFooTypes foo = find_best_footype( &amp;myFooTypes.front(), 42); // fail, not terminated.\n</code></pre>\n\n<p>What is the best strategy for accommodating these c-api's? I need to terminate the vector to make the call, but I don't want to create unnecessary mutations or copies?  </p>\n\n<p>If creating a copy is the only way to go, whats a simple way to make a data structure that will be compatible with the accessors in the C function?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "edited": false, "score": 0, "creation_date": 1484154409, "post_id": 41596627, "comment_id": 70396105, "body": "At the compilation or running ?"}, {"owner": {"reputation": 1, "user_id": 7405839, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-C5OEA96gtcY/AAAAAAAAAAI/AAAAAAAAAB4/vAuisYEpeA8/photo.jpg?sz=128", "display_name": "Sharp", "link": "https://stackoverflow.com/users/7405839/sharp"}, "edited": false, "score": 0, "creation_date": 1484154464, "post_id": 41596627, "comment_id": 70396144, "body": "My bad. Fixed the title. The problem occurs when running the program."}, {"owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "edited": false, "score": 1, "creation_date": 1484154612, "post_id": 41596627, "comment_id": 70396251, "body": "What is program input ?"}, {"owner": {"reputation": 1, "user_id": 7405839, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-C5OEA96gtcY/AAAAAAAAAAI/AAAAAAAAAB4/vAuisYEpeA8/photo.jpg?sz=128", "display_name": "Sharp", "link": "https://stackoverflow.com/users/7405839/sharp"}, "reply_to_user": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "edited": false, "score": 0, "creation_date": 1484154768, "post_id": 41596627, "comment_id": 70396352, "body": "A sentence. The program should change every word with an even number of letter to the symbol #"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1484154830, "post_id": 41596627, "comment_id": 70396388, "body": "Prefer to use <code>std::string</code> to avoid buffer overflows / overruns.  You can access <code>std::string</code> like an array too.  It has <code>find</code> and <code>replace</code> methods."}, {"owner": {"reputation": 3252, "user_id": 6131611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3789df5ff075b7a2bfa71c8e2dccd18d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/6131611/pavel"}, "edited": false, "score": 0, "creation_date": 1484154906, "post_id": 41596627, "comment_id": 70396443, "body": "Note that you&#39;re using at most not <code>C++</code> but <code>C</code>, as library <code>&lt;string.h&gt;</code> comes from <code>C</code>. In <code>C++</code> there is <code>&lt;string&gt;</code> that gives more easy methods to work with strings."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 3252, "user_id": 6131611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3789df5ff075b7a2bfa71c8e2dccd18d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/6131611/pavel"}, "edited": false, "score": 0, "creation_date": 1484154973, "post_id": 41596627, "comment_id": 70396481, "body": "@Pavel:  The C language doesn&#39;t have <code>cin</code> nor <code>getline</code>."}, {"owner": {"reputation": 3252, "user_id": 6131611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3789df5ff075b7a2bfa71c8e2dccd18d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/6131611/pavel"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1484155011, "post_id": 41596627, "comment_id": 70396511, "body": "@ThomasMatthews, yes, because of this I wrote <i>at most</i>"}, {"owner": {"reputation": 3252, "user_id": 6131611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3789df5ff075b7a2bfa71c8e2dccd18d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/6131611/pavel"}, "edited": false, "score": 0, "creation_date": 1484155826, "post_id": 41596627, "comment_id": 70397023, "body": "Why do you <code>cout&lt;&lt;s;</code> inside <code>for</code> if you want to do replacing and then print <code>s</code> one time? Start from moving the line to a position before <code>return 0</code>."}], "answers": [{"comments": [{"owner": {"reputation": 56, "user_id": 5031025, "user_type": "registered", "profile_image": "https://graph.facebook.com/994961553869536/picture?type=large", "display_name": "Siddharth Kumar", "link": "https://stackoverflow.com/users/5031025/siddharth-kumar"}, "edited": false, "score": 0, "creation_date": 1484154844, "post_id": 41596759, "comment_id": 70396396, "body": "for beginners it is recommended to put multiple print statements in different flow  to understand what is really happening vs what you are expecting."}], "tags": [], "owner": {"reputation": 56, "user_id": 5031025, "user_type": "registered", "profile_image": "https://graph.facebook.com/994961553869536/picture?type=large", "display_name": "Siddharth Kumar", "link": "https://stackoverflow.com/users/5031025/siddharth-kumar"}, "is_accepted": false, "score": 1, "last_activity_date": 1484154690, "creation_date": 1484154690, "answer_id": 41596759, "question_id": 41596627, "link": "https://stackoverflow.com/questions/41596627/no-output-after-running-the-program/41596759#41596759", "title": "No output after running the program", "body": "<p>the only flow of code which doesnot contain cout is </p>\n\n<pre><code>if(strchr(s,' ')) // searching for a space\n    {}\n</code></pre>\n\n<p>so debug this.</p>\n"}, {"tags": [], "owner": {"reputation": 73, "user_id": 6275653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5CrlK.jpg?s=128&g=1", "display_name": "MRazian", "link": "https://stackoverflow.com/users/6275653/mrazian"}, "is_accepted": false, "score": 0, "last_activity_date": 1493155748, "last_edit_date": 1493155748, "creation_date": 1484154982, "answer_id": 41596856, "question_id": 41596627, "link": "https://stackoverflow.com/questions/41596627/no-output-after-running-the-program/41596856#41596856", "title": "No output after running the program", "body": "<p>Your solution (algorithm) is completely wrong! First you should separate each word by space, </p>\n\n<pre>if(strchr(s,' ')) </pre>\n\n<p>then you should find length of separated word and then replace it to #. </p>\n"}, {"tags": [], "owner": {"reputation": 3252, "user_id": 6131611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3789df5ff075b7a2bfa71c8e2dccd18d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/6131611/pavel"}, "is_accepted": false, "score": 0, "last_activity_date": 1484155512, "creation_date": 1484155512, "answer_id": 41597019, "question_id": 41596627, "link": "https://stackoverflow.com/questions/41596627/no-output-after-running-the-program/41597019#41597019", "title": "No output after running the program", "body": "<p>Look what will happen if you input a single word with an even number of letters with space at end like <code>abcd\u2000</code>. Your program will search for space five times and every time do nothing.</p>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 5902707, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8b8c0e0a91192744fb1179d375d50ac?s=128&d=identicon&r=PG&f=1", "display_name": "Ika", "link": "https://stackoverflow.com/users/5902707/ika"}, "is_accepted": false, "score": 0, "last_activity_date": 1484162025, "creation_date": 1484162025, "answer_id": 41598937, "question_id": 41596627, "link": "https://stackoverflow.com/questions/41596627/no-output-after-running-the-program/41598937#41598937", "title": "No output after running the program", "body": "<p>Here is the algorithm I came up with:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nint main()\n{\n    // declare input string and read it\n    string s;\n    getline(cin, s);\n\n    // declare vector of strings to store words,\n    // and string tmp to temporarily save word\n\n    vector &lt;string&gt; vec;\n    string tmp = \"\";\n\n    // iterate through each character of input string\n\n    for(auto c : s)\n    {\n        // if there is space push the word to vector,\n        // clear tmp string\n        if (c == ' ')\n        {\n            vec.push_back(tmp);\n            tmp = \"\";\n            continue;\n        }\n\n        // add character to temporary string\n        tmp += c;\n    }\n\n    // push last word to vector\n    vec.push_back(tmp);\n\n    // clear the input string\n    s = \"\";\n\n    // iterate through each word\n    for(auto w : vec)\n    {\n        // if number of word's characters are odd\n        // just add the word itself\n        // otherwise add '#' symbol\n            (w.size() % 2) ? s += w : s += '#';\n    s += ' ';\n    }\n\n    // remove last space\n    s.erase(s.begin() + s.size() - 1, s.begin() + s.size());\n\n\n    cout &lt;&lt; s;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7405839, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-C5OEA96gtcY/AAAAAAAAAAI/AAAAAAAAAB4/vAuisYEpeA8/photo.jpg?sz=128", "display_name": "Sharp", "link": "https://stackoverflow.com/users/7405839/sharp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1493155748, "creation_date": 1484154229, "last_edit_date": 1484157029, "question_id": 41596627, "link": "https://stackoverflow.com/questions/41596627/no-output-after-running-the-program", "title": "No output after running the program", "body": "<p>To keep it short, I'm quite a beginner at c++ and I'm learning character sequences.</p>\n\n<p>Here's my problem: I'm trying to change every word with an even number of letters to a symbol ( # ), but I think that I'm approaching the problem in a bad way. I get nothing when running it.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string.h&gt;\nusing namespace std;\n\nint main()\n{\n    char s[101];\n    cin.getline(s,101);\n    int i;\n    for(int i=0; i&lt;strlen(s); i++)\n    {\n        if(strchr(s,' ')) // searching for a space\n        {}\n        else\n            if((strlen(s)%2==0)) //trying to find if the word has an even number\n            {\n                strcat(s,\"#\");         // I'm sticking the # character to the word and then deleting everything after #.\n                strcpy(s+i,s+i+1);\n                cout&lt;&lt;s;\n            }\n            else\n                cout&lt;&lt;\"Doens't exist\";\n\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "sparse-matrix", "eigen"], "answers": [{"comments": [{"owner": {"reputation": 1002, "user_id": 5770664, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dd347861d0f5a6605b49213fa2065eaf?s=128&d=identicon&r=PG&f=1", "display_name": "Armen Avetisyan", "link": "https://stackoverflow.com/users/5770664/armen-avetisyan"}, "edited": false, "score": 0, "creation_date": 1484169053, "post_id": 41600252, "comment_id": 70404265, "body": "so that means if I know the dimensions in the beginning say <code>SparseMatrix&lt;float&gt; A(m, m); A.reserve(n);</code> then <b>inner indices</b> and <b>data</b> capture <code>n</code> memory and <b>outer indices</b> captures <code>m+1</code> memory?"}, {"owner": {"reputation": 25314, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "reply_to_user": {"reputation": 1002, "user_id": 5770664, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dd347861d0f5a6605b49213fa2065eaf?s=128&d=identicon&r=PG&f=1", "display_name": "Armen Avetisyan", "link": "https://stackoverflow.com/users/5770664/armen-avetisyan"}, "edited": false, "score": 0, "creation_date": 1484235903, "post_id": 41600252, "comment_id": 70435958, "body": "The first part is true, but not the last one: memory for outer indices is allocated and initialized by the A(m,m) constructor. <code>reserve</code> does nothing with respected to outer indices."}, {"owner": {"reputation": 1002, "user_id": 5770664, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dd347861d0f5a6605b49213fa2065eaf?s=128&d=identicon&r=PG&f=1", "display_name": "Armen Avetisyan", "link": "https://stackoverflow.com/users/5770664/armen-avetisyan"}, "edited": false, "score": 0, "creation_date": 1484244927, "post_id": 41600252, "comment_id": 70441772, "body": "great thanks. perhaps you should edit &amp; include that in your answer."}], "tags": [], "owner": {"reputation": 25314, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "is_accepted": true, "score": 0, "last_activity_date": 1484167047, "creation_date": 1484167047, "answer_id": 41600252, "question_id": 41596360, "link": "https://stackoverflow.com/questions/41596360/eigen-sparsematrix-reserve-nnz/41600252#41600252", "title": "Eigen SparseMatrix reserve nnz", "body": "<p>No, the sizes of the matrix are supposed to be rather static, so <code>reserve(n)</code> allocates space for non-zeros only. If the dimension are unknown, you can start with an upper bound:</p>\n\n<pre><code>SparseMatrix&lt;float&gt; A(n,n);\n</code></pre>\n\n<p>reserve, e.g.:</p>\n\n<pre><code>A.reserve(10*n);\n</code></pre>\n\n<p>and once you're done and that you know the final size, shrink it:</p>\n\n<pre><code>A.conservativeResize(rows,cols);\n</code></pre>\n"}], "owner": {"reputation": 1002, "user_id": 5770664, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dd347861d0f5a6605b49213fa2065eaf?s=128&d=identicon&r=PG&f=1", "display_name": "Armen Avetisyan", "link": "https://stackoverflow.com/users/5770664/armen-avetisyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 649, "favorite_count": 0, "accepted_answer_id": 41600252, "answer_count": 1, "score": 0, "last_activity_date": 1484167047, "creation_date": 1484153443, "last_edit_date": 1592644375, "question_id": 41596360, "link": "https://stackoverflow.com/questions/41596360/eigen-sparsematrix-reserve-nnz", "title": "Eigen SparseMatrix reserve nnz", "body": "<p>I was wondering if the <code>reserve</code> method in <em>Eigen</em> does also allocate memory for the  <strong>outer indices</strong> and <strong>inner indices</strong> (in a 3-CSC case.)</p>\n<p>That means if I do</p>\n<pre><code>n = 1000\nSparseMatrix&lt;float&gt; A;\nA.reserve(n)\n</code></pre>\n<p>then</p>\n<ul>\n<li>allocate <code>n</code> memory for <strong>data</strong></li>\n<li>allocate <code>n</code> memory for <strong>inner indices</strong></li>\n<li>allocate <code>n+1</code> memory for <strong>outer indices</strong> (worst-case and a-priori not known)</li>\n</ul>\n<p>The documentation says only</p>\n<blockquote>\n<pre><code>void Eigen::SparseMatrix&lt;...&gt;::reserve    (Index reserveSize) \n</code></pre>\n<p>Preallocates reserveSize non zeros.</p>\n<p>Precondition: the matrix must be in compressed mode.</p>\n</blockquote>\n<hr />\n<p>Can anyone clarify this? Or tell something about the reservation policy? Thanks</p>\n"}, {"tags": ["c++", "templates", "visual-studio-2015"], "answers": [{"tags": [], "owner": {"reputation": 1923, "user_id": 3661874, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c46e7cbea4909e6811a5cb3c9e71384a?s=128&d=identicon&r=PG&f=1", "display_name": "fiveclubs", "link": "https://stackoverflow.com/users/3661874/fiveclubs"}, "is_accepted": false, "score": 0, "last_activity_date": 1484152998, "creation_date": 1484152998, "answer_id": 41596209, "question_id": 41596207, "link": "https://stackoverflow.com/questions/41596207/c-templates-not-being-rebuilt-on-code-changes-vs2015/41596209#41596209", "title": "C++ Templates not being rebuilt on code changes - VS2015", "body": "<p>If you turn off pre-compiled headers for the .cpp file associated with the header file containing the template code, the changes get detected and rebuilt.</p>\n\n<p>Do this by right-clicking the .cpp file, \"Properties\"->\"C/C++\"->\"Precompiled Header\" and select \"Not using Precompiled Headers\". You may need to do a rebuild to clear the existing .pch.</p>\n"}], "owner": {"reputation": 1923, "user_id": 3661874, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c46e7cbea4909e6811a5cb3c9e71384a?s=128&d=identicon&r=PG&f=1", "display_name": "fiveclubs", "link": "https://stackoverflow.com/users/3661874/fiveclubs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1484164883, "creation_date": 1484152998, "last_edit_date": 1484164883, "question_id": 41596207, "link": "https://stackoverflow.com/questions/41596207/c-templates-not-being-rebuilt-on-code-changes-vs2015", "title": "C++ Templates not being rebuilt on code changes - VS2015", "body": "<p>In Visual C++ 2015, I have a class that is implemented using templates, and while I do have a .cpp file for the class, most of the implementation is in the .h file. In tracking down a bug, I was adding print statements in the template, and I noticed everything that is dependent upon the template code is being rebuilt when it gets changed, but the new code changes in the template are not being reflected.</p>\n\n<p>So, I experimented, and actually introduced a syntax error in the template, and rebuilt. The change in dependency was detected, and everything rebuilt with no error!</p>\n\n<p>When I do a full solution rebuild, the code change gets detected, but not incrementally. Is there something I can do to force rebuild of the template code?</p>\n"}, {"tags": ["c++", "loops", "boost", "iterator", "containers"], "comments": [{"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1484152957, "post_id": 41596119, "comment_id": 70395181, "body": "Boost range FTW: <a href=\"http://stackoverflow.com/questions/981186/chain-iterator-for-c\">stackoverflow.com/questions/981186/chain-iterator-for-c</a>"}], "answers": [{"tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": false, "score": 1, "last_activity_date": 1484153075, "creation_date": 1484153075, "answer_id": 41596241, "question_id": 41596119, "link": "https://stackoverflow.com/questions/41596119/how-to-iterate-over-few-containers-in-sequence/41596241#41596241", "title": "How to iterate over few containers in sequence?", "body": "<p>Here's a solution that uses an <a href=\"https://en.wikipedia.org/wiki/Higher-order_function\" rel=\"nofollow noreferrer\"><em>higher-order function</em></a>:</p>\n\n<pre><code>template &lt;typename TC0, typename TC1, typename TF&gt;\nvoid forJoined(TC0&amp;&amp; c0, TC1&amp;&amp; c1, TF&amp;&amp; f)\n{\n    for(auto&amp;&amp; x : c0) f(x);\n    for(auto&amp;&amp; x : c1) f(x);\n}\n</code></pre>\n\n<p>You can use <code>forJoined</code> as follows:</p>\n\n<pre><code>std::vector&lt;int&gt; a{0, 1, 2};\nstd::vector&lt;char&gt; b{'a', 'b', 'c'};\n\nforJoined(a, b, [](auto x){ std::cout &lt;&lt; x; });\n// Will print \"012abc\".\n</code></pre>\n\n<p>As you can see <code>forJoined</code> will also work when your containers are storing elements of different types. Using a template parameter to pass <code>f</code> introduces no extra overhead <em>(<a href=\"https://vittorioromeo.info/index/blog/passing_functions_to_functions.html\" rel=\"nofollow noreferrer\">see my latest article on the subject</a>)</em>.</p>\n\n<p>You can extend this to an arbitrary number of containers by  using a <a href=\"https://en.cppreference.com/w/cpp/language/parameter_pack\" rel=\"nofollow noreferrer\"><em>variadic template</em></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1484153391, "creation_date": 1484153391, "answer_id": 41596335, "question_id": 41596119, "link": "https://stackoverflow.com/questions/41596119/how-to-iterate-over-few-containers-in-sequence/41596335#41596335", "title": "How to iterate over few containers in sequence?", "body": "<p>You can use an initializer list. For example</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;functional&gt;\n#include &lt;initializer_list&gt;\n#include &lt;functional&gt;\n\nint main() \n{\n    std::vector&lt;std::string&gt; v1 = { \"A\", \"B\", \"C\" };\n    std::vector&lt;std::string&gt; v2 = { \"X\", \"Y\", \"Z\" };\n\n    for ( const auto &amp;r : { std::cref( v1 ), std::cref( v2 ) } )\n    {\n        for ( const auto &amp;s : r.get() ) std::cout &lt;&lt; s &lt;&lt; ' ';\n    }\n\n    std::cout &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>A B C X Y Z \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 18004, "user_id": 675100, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/jTqPB.png?s=128&g=1", "display_name": "Patryk", "link": "https://stackoverflow.com/users/675100/patryk"}, "edited": false, "score": 1, "creation_date": 1484162541, "post_id": 41598994, "comment_id": 70400786, "body": "I had no idea that <a href=\"http://coliru.stacked-crooked.com\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com</a> has <code>range-v3</code> o.0"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 2, "last_activity_date": 1484162232, "creation_date": 1484162232, "answer_id": 41598994, "question_id": 41596119, "link": "https://stackoverflow.com/questions/41596119/how-to-iterate-over-few-containers-in-sequence/41598994#41598994", "title": "How to iterate over few containers in sequence?", "body": "<p>With <a href=\"https://github.com/ericniebler/range-v3\" rel=\"nofollow noreferrer\">range-v3</a>, you may do</p>\n\n<pre><code>const std::vector&lt;std::string&gt; v1{\"A\", \"B\", \"C\"}, v2{\"D\", \"E\", \"F\"};\n\nfor (const auto&amp; s : ranges::view::concat(v1, v2)) {\n    std::cout &lt;&lt; s &lt;&lt; std::endl;   \n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/53ee33b2df6a6e57\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}], "owner": {"reputation": 18004, "user_id": 675100, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/jTqPB.png?s=128&g=1", "display_name": "Patryk", "link": "https://stackoverflow.com/users/675100/patryk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "closed_date": 1484162425, "accepted_answer_id": 41598994, "answer_count": 3, "score": 3, "last_activity_date": 1484162232, "creation_date": 1484152761, "question_id": 41596119, "link": "https://stackoverflow.com/questions/41596119/how-to-iterate-over-few-containers-in-sequence", "closed_reason": "Duplicate", "title": "How to iterate over few containers in sequence?", "body": "<p>Having similar piece of code to the following:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nint main()\n{\n  std::vector&lt;std::string&gt; v1, v2;\n  for (const auto&amp; s : v1) {\n    // do something with s\n  }\n  for (const auto&amp; s : v2) {\n    // do something with s\n  }\n}\n</code></pre>\n\n<p>I would like to iterate over all elements from <code>v1</code> and <code>v2</code> in one go (and since the logic is kind of difficult in those loops I cannot use functions inside them - for the sake of this question).</p>\n\n<p>So the ideal solution would be something like:</p>\n\n<pre><code>  for (const auto&amp; s : magic(v1,v2)) {\n    // do something with s\n  }\n</code></pre>\n\n<p>obviously without allocating new container with all elements copied to it (since that solution is trivial.</p>\n\n<p>Is there anything like it e.g. in <code>boost</code>?</p>\n"}, {"tags": ["c++", "struct", "initialization", "member", "storage-duration"], "comments": [{"owner": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "edited": false, "score": 1, "creation_date": 1484152704, "post_id": 41596068, "comment_id": 70395024, "body": "a1 is default-initialized, a2 is not."}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 1, "creation_date": 1484152905, "post_id": 41596068, "comment_id": 70395153, "body": "I answered your questions except the last one, as I find it unclear. Could you rephrase it?"}, {"owner": {"reputation": 391, "user_id": 6892577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/871d574cf46242569247c7a4037df4bd?s=128&d=identicon&r=PG&f=1", "display_name": "J L", "link": "https://stackoverflow.com/users/6892577/j-l"}, "reply_to_user": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1484214771, "post_id": 41596068, "comment_id": 70421373, "body": "@VittorioRomeo You are right, I&#39;m sorry, that point was not clearly explained, I just edited it. My question was if a non-trivial constructor would also initialize (&#191;zero-initialize?) the remaining members of the struct that have not default initializers. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": false, "score": 2, "last_activity_date": 1484152888, "last_edit_date": 1495541638, "creation_date": 1484152888, "answer_id": 41596166, "question_id": 41596068, "link": "https://stackoverflow.com/questions/41596068/storage-duration-and-member-initialization-of-a-struct-in-c/41596166#41596166", "title": "Storage Duration and Member Initialization of a Struct in C++", "body": "<blockquote>\n  <p>What is the Storage Duration of Struct A? </p>\n</blockquote>\n\n<p>This question does not make sense, the storage depends on how <code>A</code> is used.</p>\n\n<hr>\n\n<blockquote>\n  <p>And that of objects a1 and a2? </p>\n</blockquote>\n\n<p><code>a1</code> has static storage. <a href=\"https://stackoverflow.com/questions/3281925/what-is-default-storage-class-for-global-variables\">See this question for more details.</a></p>\n\n<p><code>a2</code> has automatic storage.</p>\n\n<hr>\n\n<blockquote>\n  <p>And that of variables  a1.x and a2.x?</p>\n</blockquote>\n\n<p>They are stored the same way as their parent <code>A</code> instance.</p>\n\n<hr>\n\n<blockquote>\n  <p>Do the same rules apply to class and union?</p>\n</blockquote>\n\n<p>Yes.</p>\n"}, {"comments": [{"owner": {"reputation": 391, "user_id": 6892577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/871d574cf46242569247c7a4037df4bd?s=128&d=identicon&r=PG&f=1", "display_name": "J L", "link": "https://stackoverflow.com/users/6892577/j-l"}, "edited": false, "score": 0, "creation_date": 1484217218, "post_id": 41596172, "comment_id": 70423063, "body": "Regarding your last answer: Do you mean that a non trivial default constructor (compiler-generated) would initialize <code>x</code> to some value? Or are you referring to a non trivial user-defined constructor that explicitly initializes <code>x</code> in the code? I would understand obviously the latter, but not the former. Thanks."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 391, "user_id": 6892577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/871d574cf46242569247c7a4037df4bd?s=128&d=identicon&r=PG&f=1", "display_name": "J L", "link": "https://stackoverflow.com/users/6892577/j-l"}, "edited": false, "score": 1, "creation_date": 1484218306, "post_id": 41596172, "comment_id": 70423841, "body": "@JL actually, I was wrong. Non trivial default constructor doesn&#39;t necessarily value initialize all members. I&#39;ve edited the answer."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 5, "last_activity_date": 1484218423, "last_edit_date": 1592644375, "creation_date": 1484152908, "answer_id": 41596172, "question_id": 41596068, "link": "https://stackoverflow.com/questions/41596068/storage-duration-and-member-initialization-of-a-struct-in-c/41596172#41596172", "title": "Storage Duration and Member Initialization of a Struct in C++", "body": "<blockquote>\n<p>So does a1 have Static Storage Duration and does a2 have Automatic Storage Duration?</p>\n<p>The definition of Struct <code>A</code> is at global namespace ...</p>\n</blockquote>\n<p>This is irrelevant.</p>\n<blockquote>\n<p>... is at global namespace, as well as <code>a1</code> declaration</p>\n</blockquote>\n<p><code>a1</code> has static storage duration and it is zero-initialized.</p>\n<blockquote>\n<p>while <code>a2</code> declaration is at block scope</p>\n</blockquote>\n<p><code>a2</code> is a non-static block local variable. It has automatic storage duration and it is default initialized. It has an indeterminate value.</p>\n<hr />\n<blockquote>\n<p>What is the Storage Duration of Struct <code>A</code>?</p>\n</blockquote>\n<p>Types do not have storage duration. Objects do.</p>\n<blockquote>\n<p>... And that of objects <code>a1</code> and <code>a2</code>?</p>\n</blockquote>\n<p>See above.</p>\n<blockquote>\n<p>.. And that of variables <code>a1.x</code> and <code>a2.x</code>?</p>\n</blockquote>\n<p>Subobjects, including non static data members, inherit the lifetime of their superobject.</p>\n<blockquote>\n<p>... Shoud <code>a1.x</code> and <code>a2.x</code> be zero-initialized? Or are they indeterminate values?</p>\n</blockquote>\n<p><code>a1</code> is zero initialized. This includes its subobjects. <code>a2</code> is not. This includes its subobjects.</p>\n<blockquote>\n<p>Do the same rules apply to class and union?</p>\n</blockquote>\n<p>Same set of rules apply to objects of union and non-union classes as well as non class types when it comes to storage classes. There are differences in what default initialization means for different types.</p>\n<blockquote>\n<p>Does it make any difference the code in // Some Other Code? For example, if a constructor of class T &quot;has non-static members with default initializers&quot; then the default constructor can not be trivial (i.e. perform no action).</p>\n</blockquote>\n<p>A non-trivial default constructor generated by the compiler default initializes the members that have no default initializers.</p>\n"}], "owner": {"reputation": 391, "user_id": 6892577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/871d574cf46242569247c7a4037df4bd?s=128&d=identicon&r=PG&f=1", "display_name": "J L", "link": "https://stackoverflow.com/users/6892577/j-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 765, "favorite_count": 1, "accepted_answer_id": 41596172, "answer_count": 2, "score": 3, "last_activity_date": 1484218423, "creation_date": 1484152598, "last_edit_date": 1495541240, "question_id": 41596068, "link": "https://stackoverflow.com/questions/41596068/storage-duration-and-member-initialization-of-a-struct-in-c", "title": "Storage Duration and Member Initialization of a Struct in C++", "body": "<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nstruct A {\n    // Some Other Code\n    int x;\n};\n\nA a1;\n\nint main(){\n    A a2;\n    cout &lt;&lt; \"a1.x = \" &lt;&lt; a1.x &lt;&lt; endl;\n    cout &lt;&lt; \"a2.x = \" &lt;&lt; a2.x &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>C++14 Standard (ISO/IEC 14882:2014) Section 8.5, Paragraph 12:</p>\n\n<blockquote>\n  <p>If no initializer is specified for an object, the object is default-initialized. When storage for an object with automatic or dynamic storage duration is obtained, the object has an <em>indeterminate value</em>, and if no initialization is performed for the object, that object retains an indeterminate value until that value is replaced (5.17). [ Note: Objects with static or thread storage duration are zero-initialized, see 3.6.2. - end note ] </p>\n</blockquote>\n\n<p>So does <code>a1</code> have Static Storage Duration and does <code>a2</code> have Automatic Storage Duration? The definition of <code>Struct A</code> is at global namespace, as well as <code>a1</code> declaration, while <code>a2</code> declaration is at block scope (inside the <code>main()</code> function).</p>\n\n<p>Also, Section 3.6.2 says:</p>\n\n<p>Paragraph 1:</p>\n\n<blockquote>\n  <p>Non-local variables with static storage duration are initialized\n  as a consequence of program initiation.</p>\n</blockquote>\n\n<p>Paragraph 2:</p>\n\n<blockquote>\n  <p>Variables with static storage duration (3.7.1) or thread storage duration (3.7.2) shall be zero-initialized (8.5) before any other initialization takes place.</p>\n</blockquote>\n\n<p>Besides, with gcc 5.4.0 I get a warning (<code>warning: 'a2.A::x' is used uninitialized in this function [-Wuninitialized]</code>) and a random value, but with clang 3.8.0 the output is always <code>a2.x = 0</code> (zero can also be an indeterminate value). I also made other more complex experiments, with nested <code>struct</code>s and default initializations placed in <code>// Some Other Code</code>. Sometimes I get random values and other times (not a negligible number of) I get a zero. </p>\n\n<ul>\n<li><p>What is the Storage Duration of Struct <code>A</code>? And that of objects <code>a1</code> and <code>a2</code>? And that of variables <code>a1.x</code> and <code>a2.x</code>?</p></li>\n<li><p>Shoud <code>a1.x</code> and <code>a2.x</code> be zero-initialized? Or are they indeterminate values?</p></li>\n<li><p>Do the same rules apply to <code>class</code> and <code>union</code>? </p></li>\n<li><p>Does it make any difference the code in <code>// Some Other Code</code>? For example, if a class T \"has non-static members with default initializers\" (like in <code>struct A { int b = 1; int x; };</code>) then the default constructor can not be trivial (i.e. can not perform no action).  Would that non-trivial constructor also initialize <code>x</code>? <a href=\"http://en.cppreference.com/w/cpp/language/default_constructor.\" rel=\"nofollow noreferrer\">Trivial Default Constructor</a></p></li>\n</ul>\n\n<p>Interesting links:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/11516657/c-structure-initialization\">C++ Structure Initialization</a> </p>\n\n<p><a href=\"https://stackoverflow.com/questions/16782103/initializing-default-values-in-a-struct\">Initializing default values in a struct</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/1069621/are-members-of-a-c-struct-initialized-to-0-by-default\">Are members of a C++ struct initialized to 0 by default?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/15212261/default-initialization-of-pod-types-in-c\">Default initialization of POD types in C++</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/5474349/initialization-of-objects-with-static-storage-duration-in-c-vs-c\">Initialization of Objects with Static Storage Duration in C vs C++</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/10828294/c-and-c-partial-initialization-of-automatic-structure\">C and C++ : Partial initialization of automatic structure</a></p>\n\n<p><a href=\"http://www.ex-parrot.com/~chris/random/initialise.html\" rel=\"nofollow noreferrer\">How to initialize structures to all-elements-zero-or-null</a></p>\n"}, {"tags": ["c++", "buck"], "answers": [{"tags": [], "owner": {"reputation": 4637, "user_id": 104096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78f08795f4828bf807d4b866193daccc?s=128&d=identicon&r=PG", "display_name": "sdwilsh", "link": "https://stackoverflow.com/users/104096/sdwilsh"}, "is_accepted": true, "score": 2, "last_activity_date": 1484161700, "creation_date": 1484161700, "answer_id": 41598829, "question_id": 41595945, "link": "https://stackoverflow.com/questions/41595945/in-buck-how-do-i-used-the-output-of-a-genrule-as-a-header-for-a-cxx-library/41598829#41598829", "title": "In Buck, how do I used the output of a genrule as a header for a cxx_library?", "body": "<p>You just have to specify the <a href=\"https://buckbuild.com/concept/build_target.html\" rel=\"nofollow noreferrer\">build target</a> of the <a href=\"https://buckbuild.com/rule/genrule.html\" rel=\"nofollow noreferrer\"><code>genrule</code></a> in place of <code>genfile('my-header.h')</code>.</p>\n\n<pre><code>genrule(\n  name='my-header',\n  cmd='some_command.py',\n  out='my-header.h',\n)\n\ncxx_library(\n  name = 'my-library',\n  srcs = glob(['src/**/*.cpp']),\n  exported_headers = {\n    'my_header.h': ':my-header',\n  },\n  ...\n)\n</code></pre>\n"}], "owner": {"reputation": 23688, "user_id": 1256041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NJUNN.jpg?s=128&g=1", "display_name": "sdgfsdh", "link": "https://stackoverflow.com/users/1256041/sdgfsdh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 41598829, "answer_count": 1, "score": 2, "last_activity_date": 1484161700, "creation_date": 1484152162, "question_id": 41595945, "link": "https://stackoverflow.com/questions/41595945/in-buck-how-do-i-used-the-output-of-a-genrule-as-a-header-for-a-cxx-library", "title": "In Buck, how do I used the output of a genrule as a header for a cxx_library?", "body": "<p>I have a <code>genrule</code> that generates a C++ header-file using a proprietary tool. The header is then used in a <code>cxx_library</code>. Looking at code from <a href=\"http://gerrit-talks.commondatastorage.googleapis.com/buck-intro.html#16\" rel=\"nofollow noreferrer\">this presentation</a>, I have tried the following: </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>cxx_library(\n  name = 'my-library',\n  srcs = glob(['src/**/*.cpp']),\n  exported_headers = {\n    'my_header.h': genfile('my-header.h'),\n  },\n  ...\n</code></pre>\n\n<p>However, it seems that <code>genfile</code> has been deprecated. What should I use instead?</p>\n"}, {"tags": ["c++", "windows", "webrtc", "chromium"], "owner": {"reputation": 964, "user_id": 4104496, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/nvkZ6.jpg?s=128&g=1", "display_name": "Shashi Bhushan", "link": "https://stackoverflow.com/users/4104496/shashi-bhushan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 657, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1484151732, "creation_date": 1484151732, "question_id": 41595808, "link": "https://stackoverflow.com/questions/41595808/how-to-force-chromium-build-for-webrtc-to-use-gcc-instead-of-clang-for-compilati", "title": "How to force chromium build for webrtc to use GCC instead of clang for compilation", "body": "<p>As per chromium docs, chromium build system uses clang for compilation on windows machine. But I need webrtc native library compiled from minGW gcc only. So is there any way to change default compiler from clang to minGW gcc ?</p>\n\n<p>I googled for same, and found that it can be done via changing CC in build.ninja file. But I couldn't find this specific setting in build.ninja.</p>\n\n<p>Thanks,\nShashi</p>\n"}, {"tags": ["c++", "c++11", "data-files"], "comments": [{"owner": {"reputation": 539, "user_id": 5903382, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/424f8c743d148f09e0c243a8461f7898?s=128&d=identicon&r=PG", "display_name": "Ellis", "link": "https://stackoverflow.com/users/5903382/ellis"}, "edited": false, "score": 2, "creation_date": 1484151676, "post_id": 41595762, "comment_id": 70394387, "body": "Why don&#39;t ya&#39;ll post some code, darn tootin&#39;?"}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1484151947, "post_id": 41595762, "comment_id": 70394554, "body": "Ask question with your code (you must have) is always a good thing here."}, {"owner": {"reputation": 141, "user_id": 4994221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rPwd5SoOrWk/AAAAAAAAAAI/AAAAAAAAAG0/FDQhvV0laog/photo.jpg?sz=128", "display_name": "Pushkar Soni", "link": "https://stackoverflow.com/users/4994221/pushkar-soni"}, "edited": false, "score": 0, "creation_date": 1484152036, "post_id": 41595762, "comment_id": 70394613, "body": "OK I WILL EDIT IT"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1484152320, "post_id": 41595762, "comment_id": 70394798, "body": "Reading file line-by-line with <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow noreferrer\">std::getline</a>, and using <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/find\" rel=\"nofollow noreferrer\">std::string::find</a>? Or even better: reading the file word-by-word (<code>inFile &gt;&gt; str;</code>), and counting occurrences of a word."}, {"owner": {"reputation": 141, "user_id": 4994221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rPwd5SoOrWk/AAAAAAAAAAI/AAAAAAAAAG0/FDQhvV0laog/photo.jpg?sz=128", "display_name": "Pushkar Soni", "link": "https://stackoverflow.com/users/4994221/pushkar-soni"}, "reply_to_user": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 0, "creation_date": 1484152700, "post_id": 41595762, "comment_id": 70395021, "body": "@callyalater i have edited"}, {"owner": {"reputation": 141, "user_id": 4994221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rPwd5SoOrWk/AAAAAAAAAAI/AAAAAAAAAG0/FDQhvV0laog/photo.jpg?sz=128", "display_name": "Pushkar Soni", "link": "https://stackoverflow.com/users/4994221/pushkar-soni"}, "reply_to_user": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1484152720, "post_id": 41595762, "comment_id": 70395038, "body": "@appleapple please see"}, {"owner": {"reputation": 141, "user_id": 4994221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rPwd5SoOrWk/AAAAAAAAAAI/AAAAAAAAAG0/FDQhvV0laog/photo.jpg?sz=128", "display_name": "Pushkar Soni", "link": "https://stackoverflow.com/users/4994221/pushkar-soni"}, "edited": false, "score": 0, "creation_date": 1484152813, "post_id": 41595762, "comment_id": 70395089, "body": "i am new to this site please don&#39;t let me blocked for forever."}, {"owner": {"reputation": 141, "user_id": 4994221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rPwd5SoOrWk/AAAAAAAAAAI/AAAAAAAAAG0/FDQhvV0laog/photo.jpg?sz=128", "display_name": "Pushkar Soni", "link": "https://stackoverflow.com/users/4994221/pushkar-soni"}, "reply_to_user": {"reputation": 539, "user_id": 5903382, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/424f8c743d148f09e0c243a8461f7898?s=128&d=identicon&r=PG", "display_name": "Ellis", "link": "https://stackoverflow.com/users/5903382/ellis"}, "edited": false, "score": 0, "creation_date": 1484152895, "post_id": 41595762, "comment_id": 70395143, "body": "@em1382 i have posted the code"}, {"owner": {"reputation": 141, "user_id": 4994221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rPwd5SoOrWk/AAAAAAAAAAI/AAAAAAAAAG0/FDQhvV0laog/photo.jpg?sz=128", "display_name": "Pushkar Soni", "link": "https://stackoverflow.com/users/4994221/pushkar-soni"}, "edited": false, "score": 0, "creation_date": 1484152999, "post_id": 41595762, "comment_id": 70395212, "body": "oh...thanks i am blocked.i regret for my  mistake.(sorry i won&#39;t commit this in future again sorry.) please do something."}, {"owner": {"reputation": 4346, "user_id": 6375113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JHg5K.jpg?s=128&g=1", "display_name": "Bugs", "link": "https://stackoverflow.com/users/6375113/bugs"}, "edited": false, "score": 0, "creation_date": 1484153044, "post_id": 41595762, "comment_id": 70395235, "body": "The downvotes hit hard on this question. Ouch."}, {"owner": {"reputation": 141, "user_id": 4994221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rPwd5SoOrWk/AAAAAAAAAAI/AAAAAAAAAG0/FDQhvV0laog/photo.jpg?sz=128", "display_name": "Pushkar Soni", "link": "https://stackoverflow.com/users/4994221/pushkar-soni"}, "reply_to_user": {"reputation": 4346, "user_id": 6375113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JHg5K.jpg?s=128&g=1", "display_name": "Bugs", "link": "https://stackoverflow.com/users/6375113/bugs"}, "edited": false, "score": 0, "creation_date": 1484153252, "post_id": 41595762, "comment_id": 70395349, "body": "@Jinx88909 no...... i am really so000000rrrrrrryyyyyyy."}, {"owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 0, "creation_date": 1484153379, "post_id": 41595762, "comment_id": 70395427, "body": "@PushkarSoni You are checking if <code>(a++)==&#39;0&#39;</code>, but <code>a</code> is declared as an <code>int</code> and has no relationship to what is actually stored in the <code>char</code> array."}, {"owner": {"reputation": 141, "user_id": 4994221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rPwd5SoOrWk/AAAAAAAAAAI/AAAAAAAAAG0/FDQhvV0laog/photo.jpg?sz=128", "display_name": "Pushkar Soni", "link": "https://stackoverflow.com/users/4994221/pushkar-soni"}, "reply_to_user": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 0, "creation_date": 1484153490, "post_id": 41595762, "comment_id": 70395500, "body": "@callyalater thankyou very much."}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1484153933, "post_id": 41595762, "comment_id": 70395798, "body": "isn&#39;t it <code>&#39;o&#39;</code> instead of <code>&#39;0&#39;</code>?"}, {"owner": {"reputation": 141, "user_id": 4994221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rPwd5SoOrWk/AAAAAAAAAAI/AAAAAAAAAG0/FDQhvV0laog/photo.jpg?sz=128", "display_name": "Pushkar Soni", "link": "https://stackoverflow.com/users/4994221/pushkar-soni"}, "reply_to_user": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1484153954, "post_id": 41595762, "comment_id": 70395812, "body": "@appleapple yes"}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1484153999, "post_id": 41595762, "comment_id": 70395845, "body": "you never initialize the <code>count</code> and it can be anything."}, {"owner": {"reputation": 141, "user_id": 4994221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rPwd5SoOrWk/AAAAAAAAAAI/AAAAAAAAAG0/FDQhvV0laog/photo.jpg?sz=128", "display_name": "Pushkar Soni", "link": "https://stackoverflow.com/users/4994221/pushkar-soni"}, "edited": false, "score": 0, "creation_date": 1484154269, "post_id": 41595762, "comment_id": 70396004, "body": "i am going to cry...now :(:(:("}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1484154327, "post_id": 41595762, "comment_id": 70396043, "body": "do you want <code>&quot;dodo&quot;</code> to be 2 count?"}, {"owner": {"reputation": 141, "user_id": 4994221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rPwd5SoOrWk/AAAAAAAAAAI/AAAAAAAAAG0/FDQhvV0laog/photo.jpg?sz=128", "display_name": "Pushkar Soni", "link": "https://stackoverflow.com/users/4994221/pushkar-soni"}, "reply_to_user": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1484154381, "post_id": 41595762, "comment_id": 70396076, "body": "@appleapple yes and no both"}, {"owner": {"reputation": 141, "user_id": 4994221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rPwd5SoOrWk/AAAAAAAAAAI/AAAAAAAAAG0/FDQhvV0laog/photo.jpg?sz=128", "display_name": "Pushkar Soni", "link": "https://stackoverflow.com/users/4994221/pushkar-soni"}, "edited": false, "score": 0, "creation_date": 1484154498, "post_id": 41595762, "comment_id": 70396172, "body": "ok thanks now guys I will quit. no other solution"}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 1, "creation_date": 1484154734, "post_id": 41595762, "comment_id": 70396327, "body": "You cannot say both, they have different algorithm. Or are you telling us you   don&#39;t even try to understand your <b>homework</b> and waste our time?"}, {"owner": {"reputation": 141, "user_id": 4994221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rPwd5SoOrWk/AAAAAAAAAAI/AAAAAAAAAG0/FDQhvV0laog/photo.jpg?sz=128", "display_name": "Pushkar Soni", "link": "https://stackoverflow.com/users/4994221/pushkar-soni"}, "edited": false, "score": 0, "creation_date": 1484154746, "post_id": 41595762, "comment_id": 70396335, "body": "does any one have suggestion on where to study, i mean where to find questions and answers my book doesn&#39;t contain these answers only question and finding answers is difficult self study is hard"}, {"owner": {"reputation": 141, "user_id": 4994221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rPwd5SoOrWk/AAAAAAAAAAI/AAAAAAAAAG0/FDQhvV0laog/photo.jpg?sz=128", "display_name": "Pushkar Soni", "link": "https://stackoverflow.com/users/4994221/pushkar-soni"}, "reply_to_user": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1484154808, "post_id": 41595762, "comment_id": 70396373, "body": "@appleapple noooo...... i mean that i want to know algorithms for both."}, {"owner": {"reputation": 141, "user_id": 4994221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rPwd5SoOrWk/AAAAAAAAAAI/AAAAAAAAAG0/FDQhvV0laog/photo.jpg?sz=128", "display_name": "Pushkar Soni", "link": "https://stackoverflow.com/users/4994221/pushkar-soni"}, "reply_to_user": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1484154903, "post_id": 41595762, "comment_id": 70396440, "body": "@appleapple will you help? however you can quit , i have no hope left."}, {"owner": {"reputation": 141, "user_id": 4994221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rPwd5SoOrWk/AAAAAAAAAAI/AAAAAAAAAG0/FDQhvV0laog/photo.jpg?sz=128", "display_name": "Pushkar Soni", "link": "https://stackoverflow.com/users/4994221/pushkar-soni"}, "reply_to_user": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1484155004, "post_id": 41595762, "comment_id": 70396507, "body": "@appleapple i am blocked!"}, {"owner": {"reputation": 4346, "user_id": 6375113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JHg5K.jpg?s=128&g=1", "display_name": "Bugs", "link": "https://stackoverflow.com/users/6375113/bugs"}, "edited": false, "score": 0, "creation_date": 1484155252, "post_id": 41595762, "comment_id": 70396660, "body": "@PushkarSoni chill out. You have asked for a homework question to be answered and originally didn&#39;t show any code. The point of homework is to do it yourself however it&#39;s fine to place on here as long as you show you&#39;ve tried and what it is you have tried. You&#39;ve been blocked because of a poor question (probably) however some have retracted their downvotes (since the edit now shows code). You need to clearly define what it is you&#39;re after and what it is you have tried in future. Your original question attracted downvotes which it should, it was terrible. The system does the blocking, not us."}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1484155253, "post_id": 41595762, "comment_id": 70396661, "body": "@PushkarSoni well, I can not help you, as you can see, I have no privileges on that (I even don&#39;t know one can be blocked). BTW, the downvotes is not mine."}, {"owner": {"reputation": 141, "user_id": 4994221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rPwd5SoOrWk/AAAAAAAAAAI/AAAAAAAAAG0/FDQhvV0laog/photo.jpg?sz=128", "display_name": "Pushkar Soni", "link": "https://stackoverflow.com/users/4994221/pushkar-soni"}, "reply_to_user": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1484155562, "post_id": 41595762, "comment_id": 70396854, "body": "@appleapple no....i will never mind the downvotes. i am very sorryyyy. but i only want people leave this question , i am new and don&#39;t want to be blocked on my first day. i am not a troll but a student. y punish so hard?"}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1484155705, "post_id": 41595762, "comment_id": 70396950, "body": "Some hint, you probably need <code>string s;cin&gt;&gt;s;</code> for &quot;dodo&quot; -&gt; 0. And <code>char c;cin.get(c);</code> for &quot;dodo&quot; -&gt; 2."}, {"owner": {"reputation": 4346, "user_id": 6375113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JHg5K.jpg?s=128&g=1", "display_name": "Bugs", "link": "https://stackoverflow.com/users/6375113/bugs"}, "edited": false, "score": 0, "creation_date": 1484155978, "post_id": 41595762, "comment_id": 70397108, "body": "@PushkarSoni it&#39;s what people do. I didn&#39;t downvote. On the plus, I upvoted since I thought the question was valid (after the edits). You&#39;re very lucky someone has answered the question for you however. This is a professional site and you&#39;ve come across quite unprofessional with the comments. Take the time to thank them and understand what they have done. I understand their is a learning curve but it&#39;s you who has to learn so hit the Internet and get looking :) happy coding."}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 4994221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rPwd5SoOrWk/AAAAAAAAAAI/AAAAAAAAAG0/FDQhvV0laog/photo.jpg?sz=128", "display_name": "Pushkar Soni", "link": "https://stackoverflow.com/users/4994221/pushkar-soni"}, "edited": false, "score": 0, "creation_date": 1484155233, "post_id": 41596818, "comment_id": 70396652, "body": "thank you very much but i am a kid (17&#39;) and i couldn&#39;t understand the code."}, {"owner": {"reputation": 539, "user_id": 5903382, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/424f8c743d148f09e0c243a8461f7898?s=128&d=identicon&r=PG", "display_name": "Ellis", "link": "https://stackoverflow.com/users/5903382/ellis"}, "reply_to_user": {"reputation": 141, "user_id": 4994221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rPwd5SoOrWk/AAAAAAAAAAI/AAAAAAAAAG0/FDQhvV0laog/photo.jpg?sz=128", "display_name": "Pushkar Soni", "link": "https://stackoverflow.com/users/4994221/pushkar-soni"}, "edited": false, "score": 1, "creation_date": 1484155582, "post_id": 41596818, "comment_id": 70396869, "body": "@PushkarSoni Age has nothing to do it. I was posting on SO when I was 17, but I knew the difference between a good question and begging to have something handed to you."}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "reply_to_user": {"reputation": 141, "user_id": 4994221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rPwd5SoOrWk/AAAAAAAAAAI/AAAAAAAAAG0/FDQhvV0laog/photo.jpg?sz=128", "display_name": "Pushkar Soni", "link": "https://stackoverflow.com/users/4994221/pushkar-soni"}, "edited": false, "score": 0, "creation_date": 1484155757, "post_id": 41596818, "comment_id": 70396985, "body": "@PushkarSoni Code explained"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1484155976, "post_id": 41596818, "comment_id": 70397104, "body": "If you&#39;re going to suggest how to read a file, you might as well do it correctly, see <a href=\"http://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">Why is iostream::eof inside a loop condition considered wrong?</a>"}, {"owner": {"reputation": 141, "user_id": 4994221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rPwd5SoOrWk/AAAAAAAAAAI/AAAAAAAAAG0/FDQhvV0laog/photo.jpg?sz=128", "display_name": "Pushkar Soni", "link": "https://stackoverflow.com/users/4994221/pushkar-soni"}, "edited": false, "score": 0, "creation_date": 1484157992, "post_id": 41596818, "comment_id": 70398306, "body": "actually i want to count no of &#39;do&#39;s in the file."}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "reply_to_user": {"reputation": 141, "user_id": 4994221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rPwd5SoOrWk/AAAAAAAAAAI/AAAAAAAAAG0/FDQhvV0laog/photo.jpg?sz=128", "display_name": "Pushkar Soni", "link": "https://stackoverflow.com/users/4994221/pushkar-soni"}, "edited": false, "score": 0, "creation_date": 1484170533, "post_id": 41596818, "comment_id": 70405041, "body": "@PushkarSoni You will have to provide further explanation if you want to get anymore meaningful answers. The code I have above can be used to find the word <code>do</code>"}, {"owner": {"reputation": 141, "user_id": 4994221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rPwd5SoOrWk/AAAAAAAAAAI/AAAAAAAAAG0/FDQhvV0laog/photo.jpg?sz=128", "display_name": "Pushkar Soni", "link": "https://stackoverflow.com/users/4994221/pushkar-soni"}, "edited": false, "score": 0, "creation_date": 1484202558, "post_id": 41596818, "comment_id": 70414780, "body": "@smac89 exactly. but i want to count no of do&#39;s present in the file E.g. &quot;doafdo do do.dfdo.do&quot; then the program should give output - 6"}, {"owner": {"reputation": 141, "user_id": 4994221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rPwd5SoOrWk/AAAAAAAAAAI/AAAAAAAAAG0/FDQhvV0laog/photo.jpg?sz=128", "display_name": "Pushkar Soni", "link": "https://stackoverflow.com/users/4994221/pushkar-soni"}, "edited": false, "score": 0, "creation_date": 1484202794, "post_id": 41596818, "comment_id": 70414893, "body": "@smac89 actually i wasn&#39;t able to understand       found = found || ch == &#39;d&#39;; but now i understood."}], "tags": [], "owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "is_accepted": true, "score": 1, "last_activity_date": 1484252882, "last_edit_date": 1484252882, "creation_date": 1484154864, "answer_id": 41596818, "question_id": 41595762, "link": "https://stackoverflow.com/questions/41595762/data-file-handling-find-count-of-word-in-file/41596818#41596818", "title": "Data File Handling - find count of word in file", "body": "<p>The algorithm follows from what you have. Structure your while-loop like this:</p>\n\n<pre><code>while(!fin.eof()) {\n    bool found = false;    \n    do {\n        fin.get(ch);\n        found = found || ch == 'd';\n    } while (ch == 'd' &amp;&amp; fin);\n\n    if (found &amp;&amp; ch == 'o') {\n        // boom goes the dynamite\n    }\n}\n</code></pre>\n\n<p>The purpose of the <code>do-while</code> is to eliminate repeating <code>d</code>'s, so that after that loop, you simply check if the next character is <code>o</code>.</p>\n\n<h2>Note</h2>\n\n<ul>\n<li>In terms of typing, the type for <code>ch</code> should be <code>char ch</code></li>\n</ul>\n\n<h2>Explained</h2>\n\n<ul>\n<li><code>while(!fin.eof())</code>\n\n<ul>\n<li>Repeat the next few lines until we reach the end of the file</li>\n</ul></li>\n<li><code>do {</code>\n\n<ul>\n<li>Beginning of a <code>do-while</code> loop</li>\n</ul></li>\n<li><code>fin.get(ch);</code>\n\n<ul>\n<li>Read a single byte (character) from the file</li>\n</ul></li>\n<li><code>found = found || ch == 'd';</code>\n\n<ul>\n<li>Set <code>found</code> to true if we have already found a <code>d</code> or the current character is a <code>d</code></li>\n</ul></li>\n<li><code>} while (ch == 'd' &amp;&amp; fin);</code>\n\n<ul>\n<li>End of <code>do-while</code>. Repeat the loop until the last character read is not a <code>d</code> or we have reached the end of the file</li>\n</ul></li>\n<li><code>if (found &amp;&amp; ch == 'o') {</code>\n\n<ul>\n<li>If we were able to satisfy the condition for setting <code>found</code> to true and the last character we read is <code>o</code>...</li>\n</ul></li>\n<li><code>// boom goes the dynamite</code>\n\n<ul>\n<li>then we have successfully found the word <code>do</code> </li>\n</ul></li>\n</ul>\n\n<h2>Sans <a href=\"http://en.cppreference.com/w/cpp/io/basic_ios/eof\" rel=\"nofollow noreferrer\"><code>std::ios::eof</code></a></h2>\n\n<p>I won't explain this next bit, but it will follow closely with what I already posted. The goal here is to protect yourself from reading an already empty file.</p>\n\n<pre><code>while(fin &gt;&gt; ch) {\n    while(ch == 'd' &amp;&amp; fin.get(ch)) {    \n        if (ch != 'd') {\n            if (ch != 'o') {\n                break;\n            }\n            // Found it!\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 4994221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rPwd5SoOrWk/AAAAAAAAAAI/AAAAAAAAAG0/FDQhvV0laog/photo.jpg?sz=128", "display_name": "Pushkar Soni", "link": "https://stackoverflow.com/users/4994221/pushkar-soni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 0, "accepted_answer_id": 41596818, "answer_count": 1, "score": -7, "last_activity_date": 1484252882, "creation_date": 1484151606, "last_edit_date": 1592644375, "question_id": 41595762, "link": "https://stackoverflow.com/questions/41595762/data-file-handling-find-count-of-word-in-file", "title": "Data File Handling - find count of word in file", "body": "<p>I have this Homework question:</p>\n<blockquote>\n<p>Write a function in C++ to count the presence of a word '<em>do</em>' in a text file.</p>\n</blockquote>\n<h3>What I have tried:</h3>\n<p>I tried to first search the word '<em>d</em>' in the text file, then search for '<em>o</em>' if present just after it.</p>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing std::fstream;\nusing std::cout;\nusing std::ios;\n\nint main()\n{\n    char ch[10];\n    int count=0, a=0;\n    fstream f;\n    f.open(&quot;P.txt&quot;, ios::in);\n\n    while(!fin.eof())\n    {\n        fin.get(ch)\n        if (ch[a]=='d')\n        {\n            if ((a++)=='o')\n                count++;\n        } \n        a++;\n    }\n    cout &lt;&lt; &quot;the no of do's is&quot; &lt;&lt; count;\n    f.close();\n}\n</code></pre>\n<p>but this idea is completely useless. I cannot think of any other ideas. I would love to have a <strong>Hint</strong> regarding this in two scenarios:</p>\n<p>1.count the word 'do' independently existing.</p>\n<p>2.count the word 'do' present anywhere in the text.</p>\n<p>this is a data file handling question.</p>\n"}, {"tags": ["c++", "macos", "cmake", "mysql-connector"], "comments": [{"owner": {"reputation": 4179, "user_id": 7282091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea62f0d9ff8ecd926a64b74f39aa73b?s=128&d=identicon&r=PG&f=1", "display_name": "fedepad", "link": "https://stackoverflow.com/users/7282091/fedepad"}, "edited": false, "score": 0, "creation_date": 1484154870, "post_id": 41595751, "comment_id": 70396414, "body": "Have you placed the unzipped archive inside <code>Desktop&#47;example</code>?"}, {"owner": {"reputation": 2691, "user_id": 5477287, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/yKMgF.jpg?s=128&g=1", "display_name": "Babra Cunningham", "link": "https://stackoverflow.com/users/5477287/babra-cunningham"}, "reply_to_user": {"reputation": 4179, "user_id": 7282091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea62f0d9ff8ecd926a64b74f39aa73b?s=128&d=identicon&r=PG&f=1", "display_name": "fedepad", "link": "https://stackoverflow.com/users/7282091/fedepad"}, "edited": false, "score": 0, "creation_date": 1484155013, "post_id": 41595751, "comment_id": 70396513, "body": "@fedepad should this be instead of the unzipped <code>mysql-connector-c++</code>?"}, {"owner": {"reputation": 4179, "user_id": 7282091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea62f0d9ff8ecd926a64b74f39aa73b?s=128&d=identicon&r=PG&f=1", "display_name": "fedepad", "link": "https://stackoverflow.com/users/7282091/fedepad"}, "edited": false, "score": 0, "creation_date": 1484155280, "post_id": 41595751, "comment_id": 70396683, "body": "no need, I&#39;m writing up an answer you could try..."}], "answers": [{"comments": [{"owner": {"reputation": 2691, "user_id": 5477287, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/yKMgF.jpg?s=128&g=1", "display_name": "Babra Cunningham", "link": "https://stackoverflow.com/users/5477287/babra-cunningham"}, "edited": false, "score": 0, "creation_date": 1484156079, "post_id": 41597045, "comment_id": 70397176, "body": "It now states <code>ld: library not found for -lmysql-connector-c++</code>"}, {"owner": {"reputation": 4179, "user_id": 7282091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea62f0d9ff8ecd926a64b74f39aa73b?s=128&d=identicon&r=PG&f=1", "display_name": "fedepad", "link": "https://stackoverflow.com/users/7282091/fedepad"}, "reply_to_user": {"reputation": 2691, "user_id": 5477287, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/yKMgF.jpg?s=128&g=1", "display_name": "Babra Cunningham", "link": "https://stackoverflow.com/users/5477287/babra-cunningham"}, "edited": false, "score": 1, "creation_date": 1484156293, "post_id": 41597045, "comment_id": 70397330, "body": "Are you sure the name of the library is right? As I have downloaded it and the name appears to be <code>libmysqlcppconn.dylib</code> so put <code>mysqlcppconn</code> instead in  <code>target_link_libraries() </code>. I update the answer."}, {"owner": {"reputation": 4179, "user_id": 7282091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea62f0d9ff8ecd926a64b74f39aa73b?s=128&d=identicon&r=PG&f=1", "display_name": "fedepad", "link": "https://stackoverflow.com/users/7282091/fedepad"}, "reply_to_user": {"reputation": 2691, "user_id": 5477287, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/yKMgF.jpg?s=128&g=1", "display_name": "Babra Cunningham", "link": "https://stackoverflow.com/users/5477287/babra-cunningham"}, "edited": false, "score": 0, "creation_date": 1484156457, "post_id": 41597045, "comment_id": 70397444, "body": "I&#39;m glad! Happy coding!"}, {"owner": {"reputation": 2691, "user_id": 5477287, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/yKMgF.jpg?s=128&g=1", "display_name": "Babra Cunningham", "link": "https://stackoverflow.com/users/5477287/babra-cunningham"}, "edited": false, "score": 0, "creation_date": 1484156888, "post_id": 41597045, "comment_id": 70397732, "body": "Sorry, I&#39;ve just tested again and it&#39;s now not picking up <code>&lt;driver.h&gt;</code>?"}, {"owner": {"reputation": 4179, "user_id": 7282091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea62f0d9ff8ecd926a64b74f39aa73b?s=128&d=identicon&r=PG&f=1", "display_name": "fedepad", "link": "https://stackoverflow.com/users/7282091/fedepad"}, "reply_to_user": {"reputation": 2691, "user_id": 5477287, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/yKMgF.jpg?s=128&g=1", "display_name": "Babra Cunningham", "link": "https://stackoverflow.com/users/5477287/babra-cunningham"}, "edited": false, "score": 0, "creation_date": 1484157828, "post_id": 41597045, "comment_id": 70398236, "body": "you could try to add that directory too to the include directories, namely add the <code>${FULL_PATH_TO_MYSQL_CONNECTOR_CPP_DIR}&#47;include&#47;cppconn</code>. I update the answer."}, {"owner": {"reputation": 4179, "user_id": 7282091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea62f0d9ff8ecd926a64b74f39aa73b?s=128&d=identicon&r=PG&f=1", "display_name": "fedepad", "link": "https://stackoverflow.com/users/7282091/fedepad"}, "reply_to_user": {"reputation": 2691, "user_id": 5477287, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/yKMgF.jpg?s=128&g=1", "display_name": "Babra Cunningham", "link": "https://stackoverflow.com/users/5477287/babra-cunningham"}, "edited": false, "score": 0, "creation_date": 1484157947, "post_id": 41597045, "comment_id": 70398290, "body": "wait. Do you call directly &lt;driver.h&gt;?"}, {"owner": {"reputation": 2691, "user_id": 5477287, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/yKMgF.jpg?s=128&g=1", "display_name": "Babra Cunningham", "link": "https://stackoverflow.com/users/5477287/babra-cunningham"}, "edited": false, "score": 0, "creation_date": 1484158040, "post_id": 41597045, "comment_id": 70398328, "body": "Yes, should i provide driver with a path? E.g <code>&lt;mysql&#47;drive.h&gt;</code>"}, {"owner": {"reputation": 4179, "user_id": 7282091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea62f0d9ff8ecd926a64b74f39aa73b?s=128&d=identicon&r=PG&f=1", "display_name": "fedepad", "link": "https://stackoverflow.com/users/7282091/fedepad"}, "reply_to_user": {"reputation": 2691, "user_id": 5477287, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/yKMgF.jpg?s=128&g=1", "display_name": "Babra Cunningham", "link": "https://stackoverflow.com/users/5477287/babra-cunningham"}, "edited": false, "score": 1, "creation_date": 1484158582, "post_id": 41597045, "comment_id": 70398620, "body": "Check the answer, should give both options."}, {"owner": {"reputation": 4179, "user_id": 7282091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea62f0d9ff8ecd926a64b74f39aa73b?s=128&d=identicon&r=PG&f=1", "display_name": "fedepad", "link": "https://stackoverflow.com/users/7282091/fedepad"}, "reply_to_user": {"reputation": 2691, "user_id": 5477287, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/yKMgF.jpg?s=128&g=1", "display_name": "Babra Cunningham", "link": "https://stackoverflow.com/users/5477287/babra-cunningham"}, "edited": false, "score": 1, "creation_date": 1484160068, "post_id": 41597045, "comment_id": 70399438, "body": "I think I&#39;m done with the answer, one line in the second fragment was not showing up..."}], "tags": [], "owner": {"reputation": 4179, "user_id": 7282091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea62f0d9ff8ecd926a64b74f39aa73b?s=128&d=identicon&r=PG&f=1", "display_name": "fedepad", "link": "https://stackoverflow.com/users/7282091/fedepad"}, "is_accepted": true, "score": 2, "last_activity_date": 1484160021, "last_edit_date": 1484160021, "creation_date": 1484155568, "answer_id": 41597045, "question_id": 41595751, "link": "https://stackoverflow.com/questions/41595751/running-mysql-connector-with-cmake-and-c/41597045#41597045", "title": "Running mysql-connector with CMake and C++?", "body": "<p>I believe that CMake doesn't know about that directory which contains header and library as an \"include\" or \"library\" directory. One solution that you can try is to specify the include and link directories before the call</p>\n\n<pre><code>ADD_EXECUTABLE (main main.cpp)  \n</code></pre>\n\n<p>so your CMakeLists.txt should look like:</p>\n\n<pre><code>cmake_minimum_required (VERSION 3.1.0)\nproject(main)\nset(FULL_PATH_TO_MYSQL_CONNECTOR_CPP_DIR your_path_to_mysql_connectorcpp)\ninclude_directories(${FULL_PATH_TO_MYSQL_CONNECTOR_CPP_DIR}/include)\ninclude_directories(${FULL_PATH_TO_MYSQL_CONNECTOR_CPP_DIR}/include/cppconn)\nlink_directories(${FULL_PATH_TO_MYSQL_CONNECTOR_CPP_DIR}/lib)\nadd_executable(main main.cpp)\ntarget_link_libraries(main curl mysqlcppconn)\ntarget_compile_features(main PRIVATE cxx_range_for)  \n</code></pre>\n\n<p>Few notes:</p>\n\n<p>1) If you want to call <code>driver.h</code> in your sources then you should use the CMakeLists.txt <strong>above</strong>;  </p>\n\n<p>2) If you want to call <code>cppconn/driver.h</code> in your sources then you should use the CMakeLists.txt <strong>below</strong>:   </p>\n\n<pre><code>cmake_minimum_required (VERSION 3.1.0)\nproject(main)\nset(FULL_PATH_TO_MYSQL_CONNECTOR_CPP_DIR your_path_to_mysql_connectorcpp)\ninclude_directories(${FULL_PATH_TO_MYSQL_CONNECTOR_CPP_DIR}/include)\nlink_directories(${FULL_PATH_TO_MYSQL_CONNECTOR_CPP_DIR}/lib)\nadd_executable(main main.cpp)\ntarget_link_libraries(main curl mysqlcppconn)\ntarget_compile_features(main PRIVATE cxx_range_for)  \n</code></pre>\n\n<p>As your CMake will get more complex, you could also define include directories and libraries on a per target basis, but the above should be ok for the stuff you have now.</p>\n"}], "owner": {"reputation": 2691, "user_id": 5477287, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/yKMgF.jpg?s=128&g=1", "display_name": "Babra Cunningham", "link": "https://stackoverflow.com/users/5477287/babra-cunningham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4387, "favorite_count": 0, "accepted_answer_id": 41597045, "answer_count": 1, "score": 1, "last_activity_date": 1484160021, "creation_date": 1484151570, "question_id": 41595751, "link": "https://stackoverflow.com/questions/41595751/running-mysql-connector-with-cmake-and-c", "title": "Running mysql-connector with CMake and C++?", "body": "<p>I can't seem to find a solution to my CMake problem.</p>\n\n<p>I want to use mysql-connector-c++ and CURL, in my <code>/Desktop/example</code> directory I've made the following CMakeLists.txt: </p>\n\n<pre><code>cmake_minimum_required (VERSION 3.1.0)\nPROJECT (main)\nADD_EXECUTABLE (main main.cpp)\ntarget_link_libraries(main curl mysql-connector-c++)\ntarget_compile_features(main PRIVATE cxx_range_for)\n</code></pre>\n\n<p>I've included the following headers in my main.cpp:    </p>\n\n<pre><code>#include &lt;curl/curl.h&gt;\n\n#include &lt;mysql_connection.h&gt;\n#include &lt;driver.h&gt; \n#include &lt;exception.h&gt;\n#include &lt;resultset.h&gt;\n#include &lt;statement.h&gt;\n</code></pre>\n\n<p>I've downloaded the <a href=\"https://dev.mysql.com/downloads/connector/cpp/1.1.html\" rel=\"nofollow noreferrer\">zip file</a> for mysql-connector-c++, unzipped and placed this in my current directory.</p>\n\n<p>I've then run <code>cmake .</code> and <code>make</code> and the following error is generated: </p>\n\n<pre><code>fatal error: \n  'mysql_connection.h' file not found\n</code></pre>\n\n<p>This is bizarre as when I remove the mysql-connector headers, CURL works fine.</p>\n\n<p>Any Idea's as to why this is not working? </p>\n\n<p>N.B \nThe following commands run with the stated result:</p>\n\n<pre><code>g++ -std=c++14 -lcurl main.cpp  //Success\ng++ -std=c++14 -lcurl -lmysqlcppconn main.cpp //Fatal eror: 'mysql_connection.h' file not found\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 2, "creation_date": 1484151665, "post_id": 41595749, "comment_id": 70394379, "body": "It picks the closest match, the ofstream overload is closer, but ostream is valid if the other overload isn&#39;t present. See <a href=\"http://en.cppreference.com/w/cpp/language/overload_resolution\" rel=\"nofollow noreferrer\">overload resolution</a>"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1484151842, "post_id": 41595749, "comment_id": 70394496, "body": "<i>&quot;I&#39;ve done this because I want the output to a file to be different than the output to console.&quot;</i> - Sounds like a really bad idea. There is also no guarantee that <code>std::cout</code> goes into a console window. I might do <code>yourprogram.exe &gt; file.txt</code>."}], "answers": [{"tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": false, "score": 0, "last_activity_date": 1484151967, "creation_date": 1484151967, "answer_id": 41595887, "question_id": 41595749, "link": "https://stackoverflow.com/questions/41595749/how-does-the-compiler-know-which-function-to-pick-for-a-polymorphic-type/41595887#41595887", "title": "How does the compiler know which function to pick for a polymorphic type?", "body": "<p>Overload resolution always prefer an exact match when available. Since there is an exact match for <code>std::ofstream</code>, See <a href=\"http://en.cppreference.com/w/cpp/language/overload_resolution#Ranking_of_implicit_conversion_sequences\" rel=\"nofollow noreferrer\">this</a> for more information on overload resolution. The <code>std::ostream</code> also matches but has a lower priority. It will be used if all other higher priority overloads are removed, such as if you eliminate the <code>std::ofstream</code> overload.</p>\n"}, {"tags": [], "owner": {"reputation": 1707, "user_id": 3799743, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/AqPGw.jpg?s=128&g=1", "display_name": "BernardoGO", "link": "https://stackoverflow.com/users/3799743/bernardogo"}, "is_accepted": true, "score": 3, "last_activity_date": 1484152129, "creation_date": 1484152129, "answer_id": 41595932, "question_id": 41595749, "link": "https://stackoverflow.com/questions/41595749/how-does-the-compiler-know-which-function-to-pick-for-a-polymorphic-type/41595932#41595932", "title": "How does the compiler know which function to pick for a polymorphic type?", "body": "<p>In general, the candidate function whose parameters match the arguments most closely is the one that is called. </p>\n\n<p>It picks the closest match, the ofstream overload is closer, but ostream is valid if the other overload isn't present. If there is an exact match, it will go for it.</p>\n\n<p>Before overload resolution begins, the functions selected by name lookup and template argument deduction are combined to form the set of candidate functions (the exact criteria depend on the context in which overload resolution takes place)</p>\n\n<p>The argument-parameter implicit conversion sequences considered by overload resolution correspond to implicit conversions used in copy initialization (for non-reference parameters), except that when considering conversion to the implicit object parameter or to the left-hand side of assignment operator, conversions that create temporary objects are not considered.\nEach type of standard conversion sequence is assigned one of three ranks:</p>\n\n<ol>\n<li><p>Exact match: no conversion required, lvalue-to-rvalue conversion,\nqualification conversion, function pointer conversion, (since C++17)\nuser-defined conversion of class type to the same class</p></li>\n<li><p>Promotion: integral promotion, floating-point promotion</p></li>\n<li><p>Conversion: integral conversion, floating-point conversion,\nfloating-integral conversion, pointer conversion, pointer-to-member\nconversion, boolean conversion, user-defined conversion of a derived\nclass to its base</p></li>\n</ol>\n\n<p>The rank of the standard conversion sequence is the worst of the ranks of the standard conversions it holds (there may be up to three conversions)</p>\n"}, {"tags": [], "owner": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1484153167, "last_edit_date": 1484153167, "creation_date": 1484152483, "answer_id": 41596032, "question_id": 41595749, "link": "https://stackoverflow.com/questions/41595749/how-does-the-compiler-know-which-function-to-pick-for-a-polymorphic-type/41596032#41596032", "title": "How does the compiler know which function to pick for a polymorphic type?", "body": "<p><code>ofstream</code> derives from <code>ostream</code>. So, </p>\n\n<ul>\n<li><p><code>ofstream</code> object <strong>will be</strong> used wherever <code>ofstream</code> object is acceptable. Otherwise,</p></li>\n<li><p><code>ofstream</code> object <strong>can be</strong> used wherever <code>ostream</code> object is acceptable. </p></li>\n</ul>\n\n<p>C++ spec N3690  on <strong>Reference binding</strong>:</p>\n\n<blockquote>\n  <p>When a parameter of reference type binds directly (8.5.3) to an\n  argument expression, the implicit conversion sequence is the identity\n  conversion, unless the argument expression has a type that is a\n  derived class of the parameter type, in which case the implicit\n  conversion sequence is a derived-to-base Conversion (13.3.3.1).</p>\n\n<pre><code>struct A {};\nstruct B : public A {} b;\nint f(A&amp;);\nint f(B&amp;);\nint i = f(b); // calls f(B&amp;), an exact match, rather than\n            // f(A&amp;), a conversion\n</code></pre>\n</blockquote>\n\n<p>In simpler words: </p>\n\n<ul>\n<li><p>When the parameter has\na class type and the argument expression has the <em>same</em> type, the implicit conversion sequence is an <em>identity</em> conversion. </p></li>\n<li><p>When the parameter has a class type and the argument expression has a <em>derived</em> class type, the <em>implicit</em> conversion sequence is a derived-to-base Conversion from the derived class to the base class.</p></li>\n</ul>\n"}], "owner": {"reputation": 653, "user_id": 6605200, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/7nmUU.png?s=128&g=1", "display_name": "Dillydill123", "link": "https://stackoverflow.com/users/6605200/dillydill123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 41595932, "answer_count": 3, "score": 2, "last_activity_date": 1484153167, "creation_date": 1484151563, "question_id": 41595749, "link": "https://stackoverflow.com/questions/41595749/how-does-the-compiler-know-which-function-to-pick-for-a-polymorphic-type", "title": "How does the compiler know which function to pick for a polymorphic type?", "body": "<p>For example, I've overloaded <code>operator&lt;&lt;</code> in two different ways:</p>\n\n<p><code>ofstream &amp; operator&lt;&lt;(ofstream &amp; fout, const Thing &amp; t);</code></p>\n\n<p><code>ostream &amp; operator&lt;&lt;(ostream &amp; out, const Thing &amp; t);</code></p>\n\n<p>I've done this because I want the output to a file to be different than the output to console. As far as I am aware, <code>ofstream</code> is derived from <code>ostream</code>, so how does the compiler know to pick the overloaded operator with <code>ofstream</code> rather than just picking the one with <code>ostream</code> when I do something like</p>\n\n<pre><code>ofstream fout(\"file.txt\")\nfout.open();\nThing t;\nfout &lt;&lt; t;\n</code></pre>\n\n<p>Because even without the overloaded operator with <code>ofstream</code>, that code will still work with the <code>ostream</code> one.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 3700, "user_id": 2573127, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J2n1Z.png?s=128&g=1", "display_name": "IceFire", "link": "https://stackoverflow.com/users/2573127/icefire"}, "edited": false, "score": 0, "creation_date": 1484151429, "post_id": 41595673, "comment_id": 70394208, "body": "what happens if you use the same method? is it rescaled badly?"}, {"owner": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "reply_to_user": {"reputation": 3700, "user_id": 2573127, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J2n1Z.png?s=128&g=1", "display_name": "IceFire", "link": "https://stackoverflow.com/users/2573127/icefire"}, "edited": false, "score": 0, "creation_date": 1484151485, "post_id": 41595673, "comment_id": 70394247, "body": "@IceFire Yes it&#39;s scaled to square"}, {"owner": {"reputation": 3700, "user_id": 2573127, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J2n1Z.png?s=128&g=1", "display_name": "IceFire", "link": "https://stackoverflow.com/users/2573127/icefire"}, "edited": false, "score": 0, "creation_date": 1484151617, "post_id": 41595673, "comment_id": 70394347, "body": "well, there is the method <code>QComboBox::setIconSize</code> which is the maximum size an icon can have. According to documentation, smaller icons are not scaled up"}, {"owner": {"reputation": 1155, "user_id": 5986252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cabd17a359de6510f3f774ab5975f9a?s=128&d=identicon&r=PG&f=1", "display_name": "jgorostegui", "link": "https://stackoverflow.com/users/5986252/jgorostegui"}, "edited": false, "score": 0, "creation_date": 1484152737, "post_id": 41595673, "comment_id": 70395045, "body": "I have tested adding 128x128 icon and 128x32 (first image cropped) and the results is next. No rescaling occurs to me (Qt 5.7 used)  Test: <a href=\"http://i.imgur.com/le95yMK.png\" rel=\"nofollow noreferrer\">i.imgur.com/le95yMK.png</a>"}, {"owner": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "reply_to_user": {"reputation": 1155, "user_id": 5986252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cabd17a359de6510f3f774ab5975f9a?s=128&d=identicon&r=PG&f=1", "display_name": "jgorostegui", "link": "https://stackoverflow.com/users/5986252/jgorostegui"}, "edited": false, "score": 0, "creation_date": 1484155346, "post_id": 41595673, "comment_id": 70396730, "body": "@jgorosdev I got the problem: <code>setIconSize</code> shall be called before adding the items and icons..."}], "answers": [{"tags": [], "owner": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "is_accepted": true, "score": 3, "last_activity_date": 1484155421, "creation_date": 1484155421, "answer_id": 41596995, "question_id": 41595673, "link": "https://stackoverflow.com/questions/41595673/qt-add-non-square-icon-to-qcombobox/41596995#41596995", "title": "Qt Add non-square icon to QComboBox", "body": "<p>Turns out that the call to <code>QComboBox::setIconSize()</code> shall be done BEFORE adding the actual items / icons (with <code>QComboBox::addItem(QIcon&amp;, QString&amp;)</code></p>\n"}], "owner": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 1, "accepted_answer_id": 41596995, "answer_count": 1, "score": 1, "last_activity_date": 1484155421, "creation_date": 1484151344, "last_edit_date": 1495540814, "question_id": 41595673, "link": "https://stackoverflow.com/questions/41595673/qt-add-non-square-icon-to-qcombobox", "title": "Qt Add non-square icon to QComboBox", "body": "<p>How do I add a non-square Icon to a <code>QComboBox</code> item?</p>\n\n<p>For instance, adding a regular square <code>QIcon</code> is accomplished by something like this, <a href=\"https://stackoverflow.com/questions/7253976/how-do-i-add-an-icon-to-qcombobox-in-qt\">How do i add an icon to QComboBox in Qt?</a></p>\n\n<p>But I want to add an image of, say, 128 * 32 pixels</p>\n"}, {"tags": ["c++", "c++11", "templates", "static"], "comments": [{"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 6, "creation_date": 1484151218, "post_id": 41595569, "comment_id": 70394061, "body": "You are instantiating the template with 2 different <code>T</code>s, a <code>char[4]</code> (<code>&quot;one&quot;</code>) and a <code>char[6]</code> (<code>&quot;three&quot;</code>). Therefore you have 2 new types, both containing an <code>f</code>, therefore both of those <code>f</code>s must be initialised. Hence <code>createFile()</code> is called twice."}, {"owner": {"reputation": 1093, "user_id": 858071, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/3021798df81b7c46691c32291064428e?s=128&d=identicon&r=PG", "display_name": "mentalmushroom", "link": "https://stackoverflow.com/users/858071/mentalmushroom"}, "reply_to_user": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 1, "creation_date": 1484151324, "post_id": 41595569, "comment_id": 70394140, "body": "Ok, but why simple template version (without const ref) works?"}, {"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 1, "creation_date": 1484151364, "post_id": 41595569, "comment_id": 70394165, "body": "Pointer decay (you can&#39;t take an array by value). Which is not simple enough to describe in a comment. I&#39;ll let someone else describe it in an answer."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1484154515, "post_id": 41595569, "comment_id": 70396180, "body": "@mentalmushroom: Becuse it creates the same <code>const char *</code> instantiation for all literals. The reference is the critical piece in this case that makes the length of the literal part of function type."}], "answers": [{"comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1484152203, "post_id": 41595839, "comment_id": 70394729, "body": "@Quentin it cant&#39; deduce that. That would make the argument <code>const const char &amp;</code>"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1484152292, "post_id": 41595839, "comment_id": 70394789, "body": "Woops, let me try again. It deduces <code>const char[4]</code> for <code>T</code> :)"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1484152366, "post_id": 41595839, "comment_id": 70394830, "body": "@Quentin the leading const prevents it. It would be <code>const const char[4]</code> which is not legal"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1484152433, "post_id": 41595839, "comment_id": 70394878, "body": "Apparently... <a href=\"http://coliru.stacked-crooked.com/a/4cac65d2c158d2ce\" rel=\"nofollow noreferrer\">It&#39;s <code>char[4]</code></a>. I&#39;m stumped. (edit: the order of <code>const T</code> does not change anything)"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1484152549, "post_id": 41595839, "comment_id": 70394943, "body": "But, but, but.  You argue <code>test(const T&amp;)</code> will match <code>const char *</code> - and thus the static will be constructed once ... but <code>test(T&amp;)</code> will match <code>const char[N]</code>, and thus the static will be constructed twice.  The issue is that the OP reports the opposite."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1484152693, "post_id": 41595839, "comment_id": 70395017, "body": "@MartinBonner I gather OP means <code>test(T)</code>, not <code>test(T&amp;)</code>."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1484152928, "post_id": 41595839, "comment_id": 70395163, "body": "@bolov. you&#39;re right. I&#39;ve introduced a reference where I should not have. see test code."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1484153133, "post_id": 41595839, "comment_id": 70395289, "body": "@Quentin fixed the narrative."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": true, "score": 6, "last_activity_date": 1484156055, "last_edit_date": 1484156055, "creation_date": 1484151836, "answer_id": 41595839, "question_id": 41595569, "link": "https://stackoverflow.com/questions/41595569/c-static-variable-initialization-inside-a-template-function/41595839#41595839", "title": "C++ static variable initialization inside a template function", "body": "<p>The literal \"one\" is a <code>const char [4]</code>.</p>\n\n<p>this code: </p>\n\n<pre><code>test(\"one\")\n</code></pre>\n\n<p>would ideally like to call <code>test(const char (&amp;)[4])</code></p>\n\n<p>This works for <code>test(const T&amp;)</code> (because <code>const char (&amp;) [4]</code> can bind to <code>const char (const&amp;) [4]</code>).</p>\n\n<p>But it cannot work for <code>test(T t)</code> because you can't pass string literals by value. They are passed by reference.</p>\n\n<p>However, <code>const char[4]</code> can decay to <code>const char*</code>, which can match <code>template&lt;class T&gt; void func(T t)</code>.</p>\n\n<p>The proof is in the pudding:</p>\n\n<pre><code>#include &lt;cstdint&gt;\n#include &lt;iostream&gt;\n#include &lt;typeinfo&gt;\n\ntemplate &lt;typename T, std::size_t N&gt;\nvoid test_const(const T(&amp;t)[N])\n{\n    std::cout &lt;&lt; __func__ &lt;&lt; \" for literal \" &lt;&lt; t &lt;&lt; \" T is a \" &lt;&lt; typeid(T).name() &lt;&lt; \" and N is \" &lt;&lt; N &lt;&lt; std::endl;\n}\n\ntemplate &lt;typename T&gt;\nvoid test_mutable(T &amp;t)\n{\n    std::cout &lt;&lt; __func__ &lt;&lt; \" for literal \" &lt;&lt; t &lt;&lt; \" T is a \" &lt;&lt; typeid(T).name() &lt;&lt; std::endl;\n}\n\ntemplate &lt;typename T&gt;\nvoid test_const_ref(const T &amp;t)\n{\n    std::cout &lt;&lt; __func__ &lt;&lt; \" for literal \" &lt;&lt; t &lt;&lt; \" T is a \" &lt;&lt; typeid(T).name() &lt;&lt; std::endl;\n}\n\ntemplate &lt;typename T&gt;\nvoid test_copy(T t)\n{\n    std::cout &lt;&lt; __func__ &lt;&lt; \" for literal \" &lt;&lt; t &lt;&lt; \" T is a \" &lt;&lt; typeid(T).name() &lt;&lt; std::endl;\n}\n\nint main()\n{\n    test_const(\"one\");\n    test_const(\"three\");\n    test_mutable(\"one\");\n    test_mutable(\"three\");\n    test_const_ref(\"one\");\n    test_const_ref(\"three\");\n    test_copy(\"one\");\n    test_copy(\"three\");\n}\n</code></pre>\n\n<p>example results (clang):</p>\n\n<pre><code>test_const for literal one T is a c and N is 4\ntest_const for literal three T is a c and N is 6\ntest_mutable for literal one T is a A4_c\ntest_mutable for literal three T is a A6_c\ntest_const_ref for literal one T is a A4_c\ntest_const_ref for literal three T is a A6_c\ntest_copy for literal one T is a PKc\ntest_copy for literal three T is a PKc\n</code></pre>\n\n<p>Here is a version with demangled names (will compile on clang and gcc):</p>\n\n<pre><code>#include &lt;cstdint&gt;\n#include &lt;iostream&gt;\n#include &lt;typeinfo&gt;\n#include &lt;cstdlib&gt;\n#include &lt;cxxabi.h&gt;\n\nstd::string demangle(const char* name)\n{\n    int status = -1;\n    // enable c++11 by passing the flag -std=c++11 to g++\n    std::unique_ptr&lt;char, void(*)(void*)&gt; res {\n        abi::__cxa_demangle(name, NULL, NULL, &amp;status),\n        std::free\n    };\n\n    return (status==0) ? res.get() : name ;\n}\n\ntemplate &lt;typename T, std::size_t N&gt;\nvoid test_const(const T(&amp;t)[N])\n{\n    std::cout &lt;&lt; __func__ &lt;&lt; \" for literal \" &lt;&lt; t &lt;&lt; \" T is a \" &lt;&lt; demangle(typeid(T).name()) &lt;&lt; \" and N is \" &lt;&lt; N &lt;&lt; std::endl;\n}\n\ntemplate &lt;typename T&gt;\nvoid test_mutable(T &amp;t)\n{\n    std::cout &lt;&lt; __func__ &lt;&lt; \" for literal \" &lt;&lt; t &lt;&lt; \" T is a \" &lt;&lt; demangle(typeid(T).name()) &lt;&lt; std::endl;\n}\n\ntemplate &lt;typename T&gt;\nvoid test_const_ref(const T &amp;t)\n{\n    std::cout &lt;&lt; __func__ &lt;&lt; \" for literal \" &lt;&lt; t &lt;&lt; \" T is a \" &lt;&lt; demangle(typeid(T).name()) &lt;&lt; std::endl;\n}\n\ntemplate &lt;typename T&gt;\nvoid test_copy(T t)\n{\n    std::cout &lt;&lt; __func__ &lt;&lt; \" for literal \" &lt;&lt; t &lt;&lt; \" T is a \" &lt;&lt; demangle(typeid(T).name()) &lt;&lt; std::endl;\n}\n\nint main()\n{\n    test_const(\"one\");\n    test_const(\"three\");\n    test_mutable(\"one\");\n    test_mutable(\"three\");\n    test_const_ref(\"one\");\n    test_const_ref(\"three\");\n    test_copy(\"one\");\n    test_copy(\"three\");\n}\n</code></pre>\n\n<p>expected output:</p>\n\n<pre><code>test_const for literal one T is a char and N is 4\ntest_const for literal three T is a char and N is 6\ntest_mutable for literal one T is a char [4]\ntest_mutable for literal three T is a char [6]\ntest_const_ref for literal one T is a char [4]\ntest_const_ref for literal three T is a char [6]\ntest_copy for literal one T is a char const*\ntest_copy for literal three T is a char const*\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 0, "last_activity_date": 1484155095, "last_edit_date": 1484155095, "creation_date": 1484154233, "answer_id": 41596630, "question_id": 41595569, "link": "https://stackoverflow.com/questions/41595569/c-static-variable-initialization-inside-a-template-function/41596630#41596630", "title": "C++ static variable initialization inside a template function", "body": "<p>As a complement to @RichardHodges's answer that explains why different instanciations are used, it is easy to force only one, because arrays can decay to pointer with an explicit template instanciation:</p>\n\n<pre><code>test&lt;const char *&gt;(\"one\");\ntest&lt;const char *&gt;(\"two\");\ntest&lt;const char *&gt;(\"three\");\n</code></pre>\n\n<p>result in one single call of <code>createFile</code>.</p>\n\n<p>In fact (as said in comment by BoBTFish), that is exactly what happens when you write:</p>\n\n<pre><code>template &lt;typename T&gt;\nvoid test(const T t)\n</code></pre>\n\n<p>Whatever the size of the array, the array automatically decays to a <code>const char *</code> because C++ does not allow to assign directly arrays.</p>\n\n<p>BTW, <code>void main()</code> is <em>bad</em>. Always use <code>int main()</code> and an explicit return.</p>\n"}], "owner": {"reputation": 1093, "user_id": 858071, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/3021798df81b7c46691c32291064428e?s=128&d=identicon&r=PG", "display_name": "mentalmushroom", "link": "https://stackoverflow.com/users/858071/mentalmushroom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 0, "accepted_answer_id": 41595839, "answer_count": 2, "score": 7, "last_activity_date": 1484156055, "creation_date": 1484151045, "question_id": 41595569, "link": "https://stackoverflow.com/questions/41595569/c-static-variable-initialization-inside-a-template-function", "title": "C++ static variable initialization inside a template function", "body": "<p>I noticed quite a strange behavior of static variable initialization in function templates. Consider the following example:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>MyFile * createFile()\n{\n    std::cout &lt;&lt; \"createFile\" &lt;&lt; std::endl;\n    return nullptr;\n}\n\ntemplate &lt;typename T&gt;\nvoid test(const T&amp; t)\n//void test(T t)\n{\n    static MyFile *f = createFile();\n}\n\nvoid main()\n{\n    test(\"one\");\n    //test(\"two\");\n    test(\"three\");\n}\n</code></pre>\n\n<p>As long as <code>f</code> in <code>test</code> is static, I expected <code>createFile</code> to be called only once. However, it is called twice. </p>\n\n<p>Having spent some time playing around with the problem, I noticed that removing const reference from the argument in <code>test</code> fixes it. Another interesting thing is that the length of the string passed to the function also affects the initialization: when the length of parameters is equal, static variable is initialized only once, otherwise, a new initialization takes place.</p>\n\n<p>Could somebody explain this? Solutions/workarounds apart from the mentioned ones are very welcome.</p>\n"}, {"tags": ["c++", "inheritance"], "comments": [{"owner": {"reputation": 9740, "user_id": 1459996, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/df2798299346f952d526d49a27fbde4e?s=128&d=identicon&r=PG", "display_name": "Kirill Kobelev", "link": "https://stackoverflow.com/users/1459996/kirill-kobelev"}, "edited": false, "score": 1, "creation_date": 1484150580, "post_id": 41595208, "comment_id": 70393629, "body": "What is the defn of <code>QByteArray</code>? Does it have public ctor?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1484150614, "post_id": 41595208, "comment_id": 70393651, "body": "<a href=\"http://coliru.stacked-crooked.com/a/4aa086189405d1ad\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/4aa086189405d1ad</a>"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1484150645, "post_id": 41595208, "comment_id": 70393668, "body": "@LightnessRacesinOrbit Add a <code>class C : public B</code> with a constructor taking <code>A</code> ;)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1484150686, "post_id": 41595208, "comment_id": 70393699, "body": "<a href=\"http://coliru.stacked-crooked.com/a/877007ccf3972db1\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/877007ccf3972db1</a> wheeee"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1484150771, "post_id": 41595208, "comment_id": 70393757, "body": "@LightnessRacesinOrbit so this looks like the injected-class-name of <code>A</code> is leaking all the way through to <code>C</code>... But I wonder why that is the case."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1484150941, "post_id": 41595208, "comment_id": 70393883, "body": "@Quentin: Yep that&#39;s why. Well I don&#39;t think private inheritance hides names, it just makes them inaccessible. <a href=\"http://coliru.stacked-crooked.com/a/5c2e3a74932bc1d2\" rel=\"nofollow noreferrer\">The same happens with private members</a>. It does seem pretty stupid on the face of it, but there&#39;s probably a good reason."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 3, "creation_date": 1484154250, "post_id": 41595208, "comment_id": 70395989, "body": "I upvoted this question (I was once hit by a similar error), but the title is horrible. Please try to come up with more specific question titles, and don&#39;t repeat tag names in titles."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1484154814, "post_id": 41595208, "comment_id": 70396375, "body": "In all the excitement I didn&#39;t even notice that, but @Christian is absolutely right."}], "answers": [{"comments": [{"owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "edited": false, "score": 2, "creation_date": 1484150980, "post_id": 41595470, "comment_id": 70393919, "body": "Cute.  Very cute."}, {"owner": {"reputation": 791, "user_id": 2923436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d2524f0163df44338f835669e4a778?s=128&d=identicon&r=PG&f=1", "display_name": "user2923436", "link": "https://stackoverflow.com/users/2923436/user2923436"}, "edited": false, "score": 0, "creation_date": 1484151066, "post_id": 41595470, "comment_id": 70393970, "body": "Thanks very much that explains it."}, {"owner": {"reputation": 537, "user_id": 4348400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1ZO7z.jpg?s=128&g=1", "display_name": "Galen", "link": "https://stackoverflow.com/users/4348400/galen"}, "edited": false, "score": 0, "creation_date": 1484154623, "post_id": 41595470, "comment_id": 70396258, "body": "The live demos are a great way to illustrate. Please do more of this!"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 537, "user_id": 4348400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1ZO7z.jpg?s=128&g=1", "display_name": "Galen", "link": "https://stackoverflow.com/users/4348400/galen"}, "edited": false, "score": 2, "creation_date": 1484154783, "post_id": 41595470, "comment_id": 70396357, "body": "@Galen: I do it on almost every post I write of this kind ;)"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1484156491, "post_id": 41595470, "comment_id": 70397466, "body": "So the forever-deadpan LRiO <i>can</i> be amused by sufficiently unexpected name lookup bugs :&gt;"}, {"owner": {"reputation": 2943, "user_id": 2250588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67a4afaa3e67ed31d90400f2eb9a22a?s=128&d=identicon&r=PG", "display_name": "iheanyi", "link": "https://stackoverflow.com/users/2250588/iheanyi"}, "edited": false, "score": 1, "creation_date": 1484157185, "post_id": 41595470, "comment_id": 70397889, "body": "I don&#39;t think it is stupid. Let&#39;s say I have a public Q and a private Q that&#39;s part of some class. Within the class, if you try to access an unqualified Q, you&#39;d get the private one. Should the compiler ignore something being private because there happens to be something else that&#39;s public with the same (well, same human readable) name?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 4, "creation_date": 1484158796, "post_id": 41595470, "comment_id": 70398726, "body": "&quot;It all does seem pretty stupid on the face of it, but there&#39;s probably a good reason.&quot; The reason: name lookup always takes place before access control. Means that changing a member from private to public won&#39;t quietly change the meaning of your program (e.g. in your second example, one day it went from reading <code>::x</code> to <code>A::x</code>)."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1484181492, "post_id": 41595470, "comment_id": 70409009, "body": "@Barry: Yes what I mean is there&#39;s probably a good reason for that to be true"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 2943, "user_id": 2250588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67a4afaa3e67ed31d90400f2eb9a22a?s=128&d=identicon&r=PG", "display_name": "iheanyi", "link": "https://stackoverflow.com/users/2250588/iheanyi"}, "edited": false, "score": 1, "creation_date": 1484181521, "post_id": 41595470, "comment_id": 70409015, "body": "@iheanyi: I said it <i>seems</i> stupid &quot;on the face of it&quot;  ;)"}, {"owner": {"reputation": 2350, "user_id": 729513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lmrmp.jpg?s=128&g=1", "display_name": "Bludzee", "link": "https://stackoverflow.com/users/729513/bludzee"}, "edited": false, "score": 0, "creation_date": 1490023930, "post_id": 41595470, "comment_id": 72914821, "body": "I disagree with the statement &quot;This is a great bug!&quot;. As stated later in the answer, &quot;(...) there&#39;s probably a good reason.&quot;"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 37, "last_activity_date": 1484151070, "last_edit_date": 1484151070, "creation_date": 1484150766, "answer_id": 41595470, "question_id": 41595208, "link": "https://stackoverflow.com/questions/41595208/accessing-the-name-of-a-private-inherited-class-from-a-subclass/41595470#41595470", "title": "Accessing the name of a private-inherited class from a subclass", "body": "<p>This is a great bug!</p>\n\n<p>In the context of <code>C</code>, \"<code>A</code>\" means \"the <em>injected-class-name</em> <code>A</code> that I get from my base\".<br>\nYou could think of it as <code>C::B::A</code>.<br>\nOf course, that base is inaccessible due to private inheritance:</p>\n\n<pre><code>class A {};\n\nclass B : private A {\npublic:\n   B() {}\n   B(const A&amp;) {}  \n};\n\nclass C : public B {\npublic:\n   C(const A&amp;) {}\n};\n\nint main()\n{\n   A a;\n   B b(a);\n   C c(a);\n}\n\n// main.cpp:11:13: error: 'class A A::A' is inaccessible within this context\n//      C(const A&amp;) {}\n//              ^\n// main.cpp:1:9: note: declared here\n//  class A {};\n//        ^\n</code></pre>\n\n<h3>(<a href=\"http://coliru.stacked-crooked.com/a/f6687cab8caa05f2\">live demo</a>)</h3>\n\n<p>You can fix this by calling it <code>::A</code>, taking a more indirect route to actually name the exact same type:</p>\n\n<pre><code>class A {};\n\nclass B : private A {\npublic:\n   B() {}\n   B(const A&amp;) {}  \n};\n\nclass C : public B {\npublic:\n   C(const ::A&amp;) {}\n};\n\nint main()\n{\n   A a;\n   B b(a);\n   C c(a);\n}\n\n// OK\n</code></pre>\n\n<h3>(<a href=\"http://coliru.stacked-crooked.com/a/46b1fd5014667c20\">live demo</a>)</h3>\n\n<hr>\n\n<p>As an aside, the exact same logic applies to <code>private</code>ly inherited member variables:</p>\n\n<pre><code>int x = 1;\n\nclass A\n{\nprivate:\n   int x = 2;\n};\n\nclass B : A {\npublic:\n   B() { int y = x; }\n};\n\nint main()\n{\n   A a;\n   B b(a);\n}\n\n// main.cpp: In constructor 'B::B()':\n// main.cpp:11:17: error: 'int A::x' is private within this context\n//    B() { int y = x; }\n</code></pre>\n\n<h3>(<a href=\"http://coliru.stacked-crooked.com/a/5c2e3a74932bc1d2\">live demo</a>)</h3>\n\n<p>It all does seem pretty stupid on the face of it, but there's probably a good reason.</p>\n\n<hr>\n\n<p>In your case, then:</p>\n\n<pre><code>Container2(const ::QByteArray &amp;ba);\n</code></pre>\n"}], "owner": {"reputation": 791, "user_id": 2923436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d2524f0163df44338f835669e4a778?s=128&d=identicon&r=PG&f=1", "display_name": "user2923436", "link": "https://stackoverflow.com/users/2923436/user2923436"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1225, "favorite_count": 4, "answer_count": 1, "score": 30, "last_activity_date": 1484177189, "creation_date": 1484149936, "last_edit_date": 1484177189, "question_id": 41595208, "link": "https://stackoverflow.com/questions/41595208/accessing-the-name-of-a-private-inherited-class-from-a-subclass", "title": "Accessing the name of a private-inherited class from a subclass", "body": "<p>The following code fails to compile with this error with g++ and a similar error with clang.</p>\n\n<pre><code>main.cpp:16:19: error: 'QByteArray' is a private member of 'QByteArray'\n        Container2(const QByteArray &amp;ba);\n                         ^\nmain.cpp:3:18: note: constrained by private inheritance here\nclass Container1:private QByteArray\n                 ^~~~~~~~~~~~~~~~~~\n../edge-clang/qt5/include/QtCore/qbytearray.h:167:21: note: member is declared here\nclass Q_CORE_EXPORT QByteArray\n                    ^\nmain.cpp:18:30: error: 'QByteArray' is a private member of 'QByteArray'\nContainer2::Container2(const QByteArray &amp;ba):Container1(ba){}\n                             ^\nmain.cpp:3:18: note: constrained by private inheritance here\nclass Container1:private QByteArray\n                 ^~~~~~~~~~~~~~~~~~\n../edge-clang/qt5/include/QtCore/qbytearray.h:167:21: note: member is declared here\nclass Q_CORE_EXPORT QByteArray\n                    ^\n</code></pre>\n\n<p>I don't understand why this is not allowed for Container2 to inherit Container1 and initialize it through a public constructor, even though the inheritance of QByteArray is private.</p>\n\n<pre><code>#include &lt;QByteArray&gt;\n\nclass Container1:private QByteArray\n{\npublic: \n    Container1() {}\n    Container1(const QByteArray &amp;ba);\n};\n\nContainer1::Container1(const QByteArray &amp;ba):QByteArray(ba){}\n\nclass Container2:public Container1\n{\npublic:\n    Container2() {}\n    Container2(const QByteArray &amp;ba);\n};\nContainer2::Container2(const QByteArray &amp;ba):Container1(ba){}\n\nint main(int argc,char *argv[])\n{\n    QByteArray ba;\n    Container1 c1(ba);\n    Container2 c2(ba);\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "memory-leaks", "stdvector"], "answers": [{"comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1484150352, "post_id": 41595256, "comment_id": 70393464, "body": "<code>shrink_to_fit</code> isn&#39;t <b>guaranteed</b> to free any memory, either though."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1484151024, "post_id": 41595256, "comment_id": 70393943, "body": "Even <code>delete</code> isn&#39;t guaranteed to actually free any memory."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1484151341, "post_id": 41595256, "comment_id": 70394152, "body": "@PaulMcKenzie An implementation of <code>malloc</code> that behaves like a stack that never shrinks, with no-op <code>free</code> would indeed be quite fast."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1484153976, "post_id": 41595256, "comment_id": 70395827, "body": "Although technically correct, a better formulation might be <i>&quot;<code>shrink_to_fit</code> is not guaranteed to free <b>all</b> memory&quot;</i>. For example, a <code>vector&lt;char&gt;(1)</code> might not be able to shrink to 1 byte, so is allowed to keep 8 or 16 bytes if needed."}], "tags": [], "owner": {"reputation": 20213, "user_id": 147845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e225ff5beb684088f5c9131d3979a18?s=128&d=identicon&r=PG", "display_name": "You", "link": "https://stackoverflow.com/users/147845/you"}, "is_accepted": false, "score": 7, "last_activity_date": 1484150664, "last_edit_date": 1484150664, "creation_date": 1484150104, "answer_id": 41595256, "question_id": 41595134, "link": "https://stackoverflow.com/questions/41595134/does-clear-in-stdvector-generates-a-memory-leak/41595256#41595256", "title": "Does clear() in std::vector generates a memory leak?", "body": "<blockquote>\n  <p>Here people explained that the memory allocated for the elements of a std::vector is not released after calling clear(). But will this memory be free for the OS to allow other programs to use it or will it be available for my program to use it anywhere else?</p>\n</blockquote>\n\n<p>No, the memory will still be held by the <code>std::vector</code> instance, and will not be available for use by the rest of the program until the vector itself is destroyed, or <a href=\"http://en.cppreference.com/w/cpp/container/vector/shrink_to_fit\" rel=\"nofollow noreferrer\"><code>shrink_to_fit</code></a> is called<sup>1</sup>.</p>\n\n<blockquote>\n  <p>If not (if the memory continues to be allocated only for this vector and I can't access it anymore) isn't it a memory leak like the ones we have with pointers?</p>\n</blockquote>\n\n<p>Not really. The memory is still released when the vector is destroyed.</p>\n\n<blockquote>\n  <p>Then clear() when used alone like this would be totally unsafe right?</p>\n</blockquote>\n\n<p>As <strong>@user2079303</strong> eloquently put it; <em><code>clear</code> isn't inherently unsafe, but the assumption that it will free memory may be.</em></p>\n\n<p><sup>1. <em>Potentially. The call to <code>shrink_to_fit</code> is not guaranteed to free any memory.</em></sup></p>\n"}, {"comments": [{"owner": {"reputation": 20213, "user_id": 147845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e225ff5beb684088f5c9131d3979a18?s=128&d=identicon&r=PG", "display_name": "You", "link": "https://stackoverflow.com/users/147845/you"}, "edited": false, "score": 1, "creation_date": 1484150863, "post_id": 41595325, "comment_id": 70393825, "body": "I would say that the memory is guaranteed <i>not</i> to be released on a call to <code>clear</code>, since it <a href=\"http://stackoverflow.com/questions/18467624/what-does-the-standard-say-about-how-calling-clear-on-a-vector-changes-the-capac/18467916#18467916\">isn&#39;t allowed to change the capacity of the vector</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7303074"}, "edited": false, "score": 0, "creation_date": 1484151827, "post_id": 41595325, "comment_id": 70394486, "body": "&quot;If the memory continues to be allocated for the vector, then you can reuse the memory by adding new objects into the vector.&quot; Ok got it now. Of course, I didn&#39;t assume that the memory would be reused for other values for the same vector. Thanks. Thinking about it now it seems like a silly question... hahaha Should I delete it or leave it for other people see?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 2, "creation_date": 1484152078, "post_id": 41595325, "comment_id": 70394648, "body": "@MagnoSilva if it confused you, then it will surely confuse some one else as well. Best leave it here so others won&#39;t need to repeat the question."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 7, "last_activity_date": 1484150924, "last_edit_date": 1484150924, "creation_date": 1484150289, "answer_id": 41595325, "question_id": 41595134, "link": "https://stackoverflow.com/questions/41595134/does-clear-in-stdvector-generates-a-memory-leak/41595325#41595325", "title": "Does clear() in std::vector generates a memory leak?", "body": "<blockquote>\n  <p>Does clear() in std::vector generates a memory leak?</p>\n</blockquote>\n\n<p>No.</p>\n\n<blockquote>\n  <p>But will this memory be free for the OS to allow other programs to use it or will it be available for my program to use it anywhere else?</p>\n</blockquote>\n\n<p>OS can swap the memory to disk, to allow other programs to use the physical memory.</p>\n\n<blockquote>\n  <p>if the memory continues to be allocated only for this vector and I can't access it anymore</p>\n</blockquote>\n\n<p>You can reuse the memory by adding new objects into the vector. Or release it by destroying the vector. The destructor absolutely guarantees to free the memory.</p>\n\n<blockquote>\n  <p>isn't it a memory leak like the ones we have with pointers?</p>\n</blockquote>\n\n<p>No. A memory leak happens when the pointer to the memory is lost. But in this case the vector safely keeps track of the pointer, and frees it when it is destroyed.</p>\n\n<blockquote>\n  <p>Then clear() when used alone like this would be totally unsafe right?</p>\n</blockquote>\n\n<p><code>clear</code> isn't inherently unsafe, but the assumption that it will free the memory may be.</p>\n"}, {"tags": [], "owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "is_accepted": false, "score": 1, "last_activity_date": 1484151463, "last_edit_date": 1484151463, "creation_date": 1484150504, "answer_id": 41595379, "question_id": 41595134, "link": "https://stackoverflow.com/questions/41595134/does-clear-in-stdvector-generates-a-memory-leak/41595379#41595379", "title": "Does clear() in std::vector generates a memory leak?", "body": "<p>It is not a leak. Generally speaking, a leak is when resources are allocated by your program and you <strong>lose all handles</strong> to them. An even stricter definition of a leak is when this resource allocation happens repeatedly over time.</p>\n\n<p>A simple call to <code>clear</code> does not fulfill that definition, because you still have access to the <code>std::vector</code> object after the function call; the object does not simply disappear. You can still call <code>shrink_to_fit</code> on it, or <code>swap</code> it with an empty vector. And even that should not be necessary, because eventually, the <code>std::vector</code> will be destructed, and the <strong>destructor</strong> deallocates the occupied memory, or more correctly speaking, it deallocates the storage, because what happens on the OS or even hardware level is not in the scope of C++ language rules.</p>\n\n<p>If the destructor is <em>not</em> run because the <code>std::vector</code> is never destroyed due to some buggy dynamic memory handling on your part, then the existence of the <code>std::vector</code> object itself already causes a potential leak. The problem is then not with the storage handled by the <code>std::vector</code>.</p>\n\n<hr>\n\n<p>Note that <code>clear</code> still causes the <code>std::vector</code>'s <strong>elements</strong> to be destroyed immediately. This has the important effect that <em>their</em> destructors are run. So when you have, for example, a <code>std::vector&lt;std::string&gt;</code>, and you call <code>clear</code> on it, then all the individual <code>std::string</code> destructors are run, and of course <em>that</em> causes storage to be deallocated immediately, provided that there was actually some dynamic content handled by the strings (i.e. Small-String Optimisation was not used). But it's not the storage handled by <code>std::vector</code>, but the storage handled by the <code>std::string</code>s'.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7303074"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2288, "favorite_count": 0, "accepted_answer_id": 41595325, "answer_count": 3, "score": 2, "last_activity_date": 1591743292, "creation_date": 1484149717, "last_edit_date": 1591743292, "question_id": 41595134, "link": "https://stackoverflow.com/questions/41595134/does-clear-in-stdvector-generates-a-memory-leak", "title": "Does clear() in std::vector generates a memory leak?", "body": "<p>My question is pretty much an extension of this one: <a href=\"https://stackoverflow.com/questions/13944886/is-stdvector-memory-freed-upon-a-clear\">Is std::vector memory freed upon a clear?</a></p>\n\n<p>Here people explained that the memory allocated for the elements of a std::vector is not released after calling clear(). But will this memory be free for the OS to allow other programs to use it or will it be available for my program to use it anywhere else?</p>\n\n<p>If not (if the memory continues to be allocated only for this vector and I can't access it anymore) isn't it a memory leak like the ones we have with pointers? Then clear() when used alone like this would be totally unsafe right?</p>\n\n<p>I would be happy if someone could clarify me in this one. Thanks.</p>\n"}, {"tags": ["c++", "opencv", "image-processing", "colors", "computer-vision"], "answers": [{"comments": [{"owner": {"reputation": 739, "user_id": 4421382, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/cf1169dc3198dc684ba30b4b08d0bff9?s=128&d=identicon&r=PG&f=1", "display_name": "Engo", "link": "https://stackoverflow.com/users/4421382/engo"}, "edited": false, "score": 0, "creation_date": 1484251142, "post_id": 41606099, "comment_id": 70445149, "body": "Thank you, this tool is what I was looking for! :)"}], "tags": [], "owner": {"reputation": 733, "user_id": 588152, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jc5Cn.jpg?s=128&g=1", "display_name": "crodriguezo", "link": "https://stackoverflow.com/users/588152/crodriguezo"}, "is_accepted": true, "score": 3, "last_activity_date": 1484200856, "creation_date": 1484200856, "answer_id": 41606099, "question_id": 41595086, "link": "https://stackoverflow.com/questions/41595086/how-to-find-the-correct-hsv-threshold-values-of-an-object-for-opencv/41606099#41606099", "title": "How to find the correct HSV threshold values of an object for OpenCV?", "body": "<p>Take a look of this tutorial is really good! </p>\n\n<p>It create a trackbar to move the upper and lower value online and check what is the best response for your object. I used for a cylinder color coded detection and works really well.</p>\n\n<p><a href=\"http://opencv-srf.blogspot.com.au/2010/09/object-detection-using-color-seperation.html\" rel=\"nofollow noreferrer\">http://opencv-srf.blogspot.com.au/2010/09/object-detection-using-color-seperation.html</a></p>\n"}], "owner": {"reputation": 739, "user_id": 4421382, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/cf1169dc3198dc684ba30b4b08d0bff9?s=128&d=identicon&r=PG&f=1", "display_name": "Engo", "link": "https://stackoverflow.com/users/4421382/engo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2334, "favorite_count": 0, "accepted_answer_id": 41606099, "answer_count": 1, "score": 2, "last_activity_date": 1484225049, "creation_date": 1484149560, "last_edit_date": 1495541639, "question_id": 41595086, "link": "https://stackoverflow.com/questions/41595086/how-to-find-the-correct-hsv-threshold-values-of-an-object-for-opencv", "title": "How to find the correct HSV threshold values of an object for OpenCV?", "body": "<p>I am trying to find the correct lowerbounds/upperbounds threshold values of a ball, so that I can use it in the OpenCV <code>inRange</code> function. </p>\n\n<p>I've read <a href=\"https://stackoverflow.com/questions/10948589/choosing-correct-hsv-values-for-opencv-thresholding-with-inranges\">Choosing correct HSV values for OpenCV thresholding with InRangeS</a>, but I still dont understand how to do this in my case:</p>\n\n<p><a href=\"https://i.stack.imgur.com/mlU1X.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mlU1X.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>inRange function:</strong></p>\n\n<pre><code>inRange(frmHsv, Scalar(lowerH, lowerS, lowerV), Scalar(upperH, upperS, upperV), rangeRes);\n</code></pre>\n\n<p><strong>OpenCV HSV ranges:</strong></p>\n\n<p>H: 0 - 180</p>\n\n<p>S: 0 - 255</p>\n\n<p>V: 0 - 255</p>\n\n<p>How can I find <code>lowerH</code>, <code>lowerS</code>, <code>lowerV</code>, <code>upperH</code>, <code>upperS</code>, <code>upperV</code>?</p>\n"}, {"tags": ["c++", "qt", "websocket"], "answers": [{"tags": [], "owner": {"reputation": 29, "user_id": 2923002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08d8d58f7a5d6ef1c9d0a346e0bceccc?s=128&d=identicon&r=PG&f=1", "display_name": "Lingfa", "link": "https://stackoverflow.com/users/2923002/lingfa"}, "is_accepted": false, "score": 0, "last_activity_date": 1531053988, "creation_date": 1531053988, "answer_id": 51232144, "question_id": 41595073, "link": "https://stackoverflow.com/questions/41595073/sniff-qwebsocket-server-client-communication/51232144#51232144", "title": "Sniff QWebsocket Server - Client communication", "body": "<p>no, you cannot start a second server.</p>\n\n<pre>    // setup the QWebSocketServer\n    m_server = new QWebSocketServer(\"WebSocket app\", QWebSocketServer::NonSecureMode, this);\n    if (!m_server->listen(QHostAddress::LocalHost, 12345)) {\n        qFatal(\"Failed to open web socket server, probabaly caused by an existing instance!\");\n        return;\n    }\n</pre>\n"}], "owner": {"reputation": 51, "user_id": 6263456, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GD127zALltw/AAAAAAAAAAI/AAAAAAAAANA/L8U2a7j2OQg/photo.jpg?sz=128", "display_name": "Peter Bak\u0161a", "link": "https://stackoverflow.com/users/6263456/peter-bak%c5%a1a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1531053988, "creation_date": 1484149516, "last_edit_date": 1484152418, "question_id": 41595073, "link": "https://stackoverflow.com/questions/41595073/sniff-qwebsocket-server-client-communication", "title": "Sniff QWebsocket Server - Client communication", "body": "<p>I'm new to <code>QWebsocket</code>. I have created two applications, which use <code>QWebsocket</code> communication. Does anyone know if it is possible to capture the messages sent from <code>webClient</code> to <code>webServer</code> by another application on the same port? However, there is no way to change these 2 applications which communicate via web socket.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "edited": false, "score": 5, "creation_date": 1484149458, "post_id": 41595001, "comment_id": 70392891, "body": "See <a href=\"http://stackoverflow.com/questions/274626/what-is-object-slicing\">What is object slicing?</a>"}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1484149612, "post_id": 41595001, "comment_id": 70392973, "body": "simply to avoid data slicing"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1484149699, "post_id": 41595001, "comment_id": 70393029, "body": "You&#39;re not passing the object itself in Java either."}, {"owner": {"reputation": 2048, "user_id": 1116098, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/skrd5.jpg?s=128&g=1", "display_name": "Sean Francis N. Ballais", "link": "https://stackoverflow.com/users/1116098/sean-francis-n-ballais"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1484150092, "post_id": 41595001, "comment_id": 70393299, "body": "@molbdnilo In Java, you usually pass by reference but in C++, you are more explicit, right?"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1484150670, "post_id": 41595001, "comment_id": 70393684, "body": "@SeanFrancisN.Ballais in Java you <i>always</i> pass objects by reference"}, {"owner": {"reputation": 2048, "user_id": 1116098, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/skrd5.jpg?s=128&g=1", "display_name": "Sean Francis N. Ballais", "link": "https://stackoverflow.com/users/1116098/sean-francis-n-ballais"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1484150803, "post_id": 41595001, "comment_id": 70393782, "body": "@Caleth I see. So, pass by value in Java is impossible or not?"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1484150969, "post_id": 41595001, "comment_id": 70393910, "body": "you pass non-objects (int, bool, etc) by value, and objects by &quot;value of object reference&quot;"}, {"owner": {"reputation": 2048, "user_id": 1116098, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/skrd5.jpg?s=128&g=1", "display_name": "Sean Francis N. Ballais", "link": "https://stackoverflow.com/users/1116098/sean-francis-n-ballais"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1484151246, "post_id": 41595001, "comment_id": 70394082, "body": "@Caleth I get it now. Thanks!"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1484152594, "post_id": 41595001, "comment_id": 70394962, "body": "@SeanFrancisN.Ballais The word &quot;reference&quot; means subtly different things in Java and C++ (and in &quot;pass by reference&quot;). In Java, a &quot;reference&quot; is a kind of value that you can store in a variable, and these are the values passed to functions. When you &quot;pass by reference&quot;, you pass a <i>variable</i> by reference and can assign a new value to it. Java does not support pass by reference."}], "answers": [{"tags": [], "owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "is_accepted": false, "score": 3, "last_activity_date": 1484149985, "creation_date": 1484149985, "answer_id": 41595220, "question_id": 41595001, "link": "https://stackoverflow.com/questions/41595001/why-should-you-pass-a-reference-instead-of-a-value-when-passing-a-derived-class/41595220#41595220", "title": "Why should you pass a reference instead of a value when passing a derived class object to a function with a base class parameter in C++?", "body": "<p>If you pass the object by value, then a (temporary) copy of the object is pushed into the stack before the function is called.</p>\n\n<p>Since the function prototype dictates that the input argument's type is the base class, that copy contains only the \"base\" part of the object.</p>\n\n<p>In other words, the original object is \"sliced\" and your hope for polymorphism goes to waste...</p>\n"}, {"comments": [{"owner": {"reputation": 2048, "user_id": 1116098, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/skrd5.jpg?s=128&g=1", "display_name": "Sean Francis N. Ballais", "link": "https://stackoverflow.com/users/1116098/sean-francis-n-ballais"}, "edited": false, "score": 0, "creation_date": 1484209122, "post_id": 41595231, "comment_id": 70417924, "body": "So basically, passing by value would cut off the non-<code>A</code> data from <code>B</code> (which, as others have mentioned, is called object slicing) while passing by reference would allow the non-<code>A</code> data to pass &quot;through.&quot; Am I right? Also, how does a function how know many bytes its receiving represents class <code>A</code> when you are passing by reference?"}, {"owner": {"reputation": 32602, "user_id": 7050130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efd06b6898f66b91234471a40cffae45?s=128&d=identicon&r=PG", "display_name": "Mark Adelsberger", "link": "https://stackoverflow.com/users/7050130/mark-adelsberger"}, "reply_to_user": {"reputation": 2048, "user_id": 1116098, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/skrd5.jpg?s=128&g=1", "display_name": "Sean Francis N. Ballais", "link": "https://stackoverflow.com/users/1116098/sean-francis-n-ballais"}, "edited": false, "score": 1, "creation_date": 1484417668, "post_id": 41595231, "comment_id": 70505293, "body": "When you pass by reference, the function only needs to know how many bytes make up the reference in order to receive it properly.  Syntactic sugar aside, a reference is internally not much different from a pointer, so a reference-to-<code>A</code> is the same size as a reference-to-<code>B</code>.  The receiving function still only knows the layout of the <code>A</code> part of the <code>B</code> it received, but because of built-in polymorphism (i.e. the vtable for virtual functions) that&#39;s all it needs as long as the value wasn&#39;t sliced."}, {"owner": {"reputation": 2048, "user_id": 1116098, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/skrd5.jpg?s=128&g=1", "display_name": "Sean Francis N. Ballais", "link": "https://stackoverflow.com/users/1116098/sean-francis-n-ballais"}, "edited": false, "score": 0, "creation_date": 1484544124, "post_id": 41595231, "comment_id": 70537630, "body": "If you pass by reference, would object slicing still happen or not? From how I understand from the comment above, I think it will still happen since the function only knows about the layout of <code>A</code> and not the extra data in <code>B</code>."}, {"owner": {"reputation": 32602, "user_id": 7050130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efd06b6898f66b91234471a40cffae45?s=128&d=identicon&r=PG", "display_name": "Mark Adelsberger", "link": "https://stackoverflow.com/users/7050130/mark-adelsberger"}, "reply_to_user": {"reputation": 2048, "user_id": 1116098, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/skrd5.jpg?s=128&g=1", "display_name": "Sean Francis N. Ballais", "link": "https://stackoverflow.com/users/1116098/sean-francis-n-ballais"}, "edited": false, "score": 0, "creation_date": 1484662039, "post_id": 41595231, "comment_id": 70594222, "body": "No, as pointed out above, object slicing will not occur when passing by reference because the function can understand the incoming arguments without it."}, {"owner": {"reputation": 2048, "user_id": 1116098, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/skrd5.jpg?s=128&g=1", "display_name": "Sean Francis N. Ballais", "link": "https://stackoverflow.com/users/1116098/sean-francis-n-ballais"}, "edited": false, "score": 0, "creation_date": 1484707399, "post_id": 41595231, "comment_id": 70616453, "body": "So the function just needs to reserve memory for the reference?"}], "tags": [], "owner": {"reputation": 32602, "user_id": 7050130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efd06b6898f66b91234471a40cffae45?s=128&d=identicon&r=PG", "display_name": "Mark Adelsberger", "link": "https://stackoverflow.com/users/7050130/mark-adelsberger"}, "is_accepted": true, "score": 3, "last_activity_date": 1484150008, "creation_date": 1484150008, "answer_id": 41595231, "question_id": 41595001, "link": "https://stackoverflow.com/questions/41595001/why-should-you-pass-a-reference-instead-of-a-value-when-passing-a-derived-class/41595231#41595231", "title": "Why should you pass a reference instead of a value when passing a derived class object to a function with a base class parameter in C++?", "body": "<p>The reason is that <code>sizeof(A)</code> and <code>sizeof(B)</code> are not the same.  If a function  (in C++ or the like) takes a parameter by value, it must know how large the value for that parameter will be in order to interpret the values in memory correctly.  As a rough (but technically sketchy) example, suppose I have a function that takes an <code>A</code> and an <code>int</code>.  Maybe it expects the incoming values to be stored like</p>\n\n<pre><code>AAAAAAiiii\n</code></pre>\n\n<p>where the first 6 bytes are the <code>A</code> object, and the last 4 bytes are the integer value.  But I create a B, which looks something like <code>AAAAAABBBBB</code>... so now the function receives</p>\n\n<pre><code>AAAAAABBBBBiiii\n</code></pre>\n\n<p>and that's no good.  Passing either a pointer or a reference allows the function to know how many of the bytes its receiving represent that first parameter.</p>\n\n<p>So why isn't this a thing in Java?  In java objects are always handled \"by reference\"; that is, when you say</p>\n\n<pre><code>Fruit apple = new Apple();\n</code></pre>\n\n<p>you're creating a variable <code>apple</code> which is a reference to a <code>Fruit</code>.  If a java method says</p>\n\n<pre><code>public void iHaveAPenIHaveA(Fruit fruit)\n</code></pre>\n\n<p>it's going to accept a <em>reference to</em> a fruit.</p>\n\n<p>In other words, what your Java sample is doing actually is the same thing as the by-reference version of your C++ sample (the one with <code>void neverGonna(A&amp; a)</code>).</p>\n"}, {"comments": [{"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1484155042, "post_id": 41595239, "comment_id": 70396535, "body": "Actually, <code>Apple a = new Apple();</code> would be a more correct equivalent for <code>Apple a;</code> in C++. <code>Apple a;</code> alone is an uninitialised pointer and will result in compilation errors."}, {"owner": {"reputation": 2048, "user_id": 1116098, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/skrd5.jpg?s=128&g=1", "display_name": "Sean Francis N. Ballais", "link": "https://stackoverflow.com/users/1116098/sean-francis-n-ballais"}, "edited": false, "score": 0, "creation_date": 1484208483, "post_id": 41595239, "comment_id": 70417592, "body": "A bit confused on this part, &quot;In C++, the object itself is copied, and sent to the function.&quot; Wouldn&#39;t that be passing by value or am I missing something?"}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "reply_to_user": {"reputation": 2048, "user_id": 1116098, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/skrd5.jpg?s=128&g=1", "display_name": "Sean Francis N. Ballais", "link": "https://stackoverflow.com/users/1116098/sean-francis-n-ballais"}, "edited": false, "score": 0, "creation_date": 1484208837, "post_id": 41595239, "comment_id": 70417773, "body": "@SeanFrancisN.Ballais: Yes, that is pass by value."}, {"owner": {"reputation": 2048, "user_id": 1116098, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/skrd5.jpg?s=128&g=1", "display_name": "Sean Francis N. Ballais", "link": "https://stackoverflow.com/users/1116098/sean-francis-n-ballais"}, "edited": false, "score": 0, "creation_date": 1484210090, "post_id": 41595239, "comment_id": 70418408, "body": "And passing by reference would not copy the object to the function but rather a reference to that object would be sent to function. Is that right?"}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "reply_to_user": {"reputation": 2048, "user_id": 1116098, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/skrd5.jpg?s=128&g=1", "display_name": "Sean Francis N. Ballais", "link": "https://stackoverflow.com/users/1116098/sean-francis-n-ballais"}, "edited": false, "score": 0, "creation_date": 1484213949, "post_id": 41595239, "comment_id": 70420812, "body": "@SeanFrancisN.Ballais: Yes. (And to be complete: Java doesn&#39;t really have call by reference. Java always works with pointers to objects, and in a method call the pointer is sent by value.)"}, {"owner": {"reputation": 2048, "user_id": 1116098, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/skrd5.jpg?s=128&g=1", "display_name": "Sean Francis N. Ballais", "link": "https://stackoverflow.com/users/1116098/sean-francis-n-ballais"}, "edited": false, "score": 0, "creation_date": 1484215611, "post_id": 41595239, "comment_id": 70421947, "body": "I get it now. Thanks! :)"}], "tags": [], "owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "is_accepted": false, "score": 5, "last_activity_date": 1484151454, "last_edit_date": 1495541789, "creation_date": 1484150045, "answer_id": 41595239, "question_id": 41595001, "link": "https://stackoverflow.com/questions/41595001/why-should-you-pass-a-reference-instead-of-a-value-when-passing-a-derived-class/41595239#41595239", "title": "Why should you pass a reference instead of a value when passing a derived class object to a function with a base class parameter in C++?", "body": "<p>Objects in Java are referenced by pointers. (Java calls them \"references\".) If you write <code>Apple a;</code> in Java, the variable <code>a</code> is actually a pointer, pointing to an <code>Apple</code> object somewhere in memory. In C++ though, if you write <code>Apple a;</code> then the variable <code>a</code> contains the entire <code>Apple</code> object. To get pointers, you need to explicitly declare <code>a</code> to be a pointer variable, as in <code>Apple* a;</code>, or a reference, as in <code>Apple&amp; a;</code>.</p>\n\n<p>The same goes for function arguments. In Java, if you send an <code>Apple</code> to a method that expects a <code>Fruit</code> (assuming that <code>Apple</code> is a subclass of <code>Fruit</code>), what is actually sent is a pointer, and the object itself is stored somewhere else.</p>\n\n<p>In C++, the object itself is copied, and sent to the function. However, if the function expects a <code>Fruit</code> object, and you send an <code>Apple</code> object with some extra member variables in it, the <code>Apple</code> won't fit in the space that the function has to receive the <code>Fruit</code>. The <code>Apple</code> object has to be converted to a <code>Fruit</code> object, and any apple-specific extra stuff is removed. This is called <a href=\"https://stackoverflow.com/questions/274626/what-is-object-slicing\">object slicing</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "reply_to_user": {"reputation": 2048, "user_id": 1116098, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/skrd5.jpg?s=128&g=1", "display_name": "Sean Francis N. Ballais", "link": "https://stackoverflow.com/users/1116098/sean-francis-n-ballais"}, "edited": false, "score": 0, "creation_date": 1484225537, "post_id": 41595406, "comment_id": 70428609, "body": "@SeanFrancisN.Ballais: yes. but the answer is only for <code>object slicing</code> so for brevity we focus only on the OP&#39;s topic"}, {"owner": {"reputation": 2048, "user_id": 1116098, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/skrd5.jpg?s=128&g=1", "display_name": "Sean Francis N. Ballais", "link": "https://stackoverflow.com/users/1116098/sean-francis-n-ballais"}, "edited": false, "score": 0, "creation_date": 1484289563, "post_id": 41595406, "comment_id": 70457744, "body": "Yeah, I know but I just can&#39;t help notice the impending memory leak if the code is run."}], "tags": [], "owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "is_accepted": false, "score": 2, "last_activity_date": 1484211845, "last_edit_date": 1484211845, "creation_date": 1484150617, "answer_id": 41595406, "question_id": 41595001, "link": "https://stackoverflow.com/questions/41595001/why-should-you-pass-a-reference-instead-of-a-value-when-passing-a-derived-class/41595406#41595406", "title": "Why should you pass a reference instead of a value when passing a derived class object to a function with a base class parameter in C++?", "body": "<p>Because passing by value will cause object slicing. Consider this example:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass Base\n{\npublic:\n    virtual void foo()\n    {\n        cout &lt;&lt; \"Base foo()\" &lt;&lt; endl;\n    }\n};\n\nclass Derived : public Base\n{\npublic:\n    void foo()\n    {\n        cout &lt;&lt; \"Derived foo()\" &lt;&lt; endl;\n    }   \n};\n\nvoid print(Base b)\n{\n    b.foo(); // object will be sliced here\n}\n\nint main()\n{\n    Base* b = new Derived();\n    print(*b); // passing by value will cause object slicing;\n    return 0;\n}\n</code></pre>\n\n<p>Since we passed by value <code>b</code> in <code>print()</code>, there would be object slicing and the non-<code>Base</code> data in <code>b</code> will be cut off. The output would look like:</p>\n\n<pre><code>Base foo()\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>Derived foo()\n</code></pre>\n"}], "owner": {"reputation": 2048, "user_id": 1116098, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/skrd5.jpg?s=128&g=1", "display_name": "Sean Francis N. Ballais", "link": "https://stackoverflow.com/users/1116098/sean-francis-n-ballais"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 0, "accepted_answer_id": 41595231, "answer_count": 4, "score": 4, "last_activity_date": 1484211845, "creation_date": 1484149315, "last_edit_date": 1495540373, "question_id": 41595001, "link": "https://stackoverflow.com/questions/41595001/why-should-you-pass-a-reference-instead-of-a-value-when-passing-a-derived-class", "title": "Why should you pass a reference instead of a value when passing a derived class object to a function with a base class parameter in C++?", "body": "<p>If I remember correctly, in Java, we can pass a subclass to a function with a superclass. The code would look like this.</p>\n\n<pre><code>// Assume the classes were already defined, and Apple\n// and Pineapple are derived from Fruit.\nFruit apple = new Apple();\nFruit pineapple = new Pineapple();\n\npublic void iHaveAPenIHaveAn(Fruit fruit) { ... } // :)\n...\npublic static void main(String[] arg)\n{\n    iHaveAPenIHaveAn(apple); // Uh! Apple-pen.\n    iHaveAPenIHaveAn(pineapple); // Uh! Pineapple-pen.\n}\n</code></pre>\n\n<p>However, in C++, I noticed from <a href=\"https://stackoverflow.com/questions/22389580/passing-a-derived-class-reference-to-a-function-through-a-base-class-pointer\">here</a> that you need to use a reference variable of the base class (Is that the proper term?) instead of a regular variable of the base class.</p>\n\n<p>Assuming you have two classes: a base class <code>A</code>, and an <code>A</code>-derived class <code>B</code>.</p>\n\n<pre><code>class A { ... };\nclass B : A { ... };\n</code></pre>\n\n<p>If we have a <code>neverGonna()</code> function that takes in a class <code>A</code> argument, then why should the function look like this:</p>\n\n<pre><code>void neverGonna(A&amp; a) { ... }\n...\nB giveYouUp;\nneverGonna(giveYouUp);\n</code></pre>\n\n<p>instead of this?</p>\n\n<pre><code>void neverGonna(A a) { ... }\n...\nB letYouDown;\nneverGonna(letYouDown);\n</code></pre>\n\n<p>What is the reasoning behind it?</p>\n"}, {"tags": ["c++", "linux", "compilation", "include", "protocol-buffers"], "answers": [{"comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1484213783, "post_id": 41604412, "comment_id": 70420689, "body": "While this code snippet may solve the question, including an explanation of <i>how</i> and <i>why</i> this solves the problem <a href=\"//meta.stackexchange.com/q/114762\">would really help</a> to improve the quality of your post. Remember that you are answering the question for readers in the future, not just the person asking now!  Please <a href=\"https://stackoverflow.com/posts/41604412/edit\">edit</a> your answer to add explanation, and give an indication of what limitations and assumptions apply."}, {"owner": {"reputation": 8007, "user_id": 5890784, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dec46088a284202a3be71897845a669d?s=128&d=identicon&r=PG&f=1", "display_name": "Hind Forsum", "link": "https://stackoverflow.com/users/5890784/hind-forsum"}, "edited": false, "score": 1, "creation_date": 1484233895, "post_id": 41604412, "comment_id": 70434446, "body": "This missing package is what I needed. Thanks!"}, {"owner": {"reputation": 319, "user_id": 767314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56c08036f1fe699e3d40c4fbb281a0f2?s=128&d=identicon&r=PG", "display_name": "knuckles", "link": "https://stackoverflow.com/users/767314/knuckles"}, "edited": false, "score": 0, "creation_date": 1587566680, "post_id": 41604412, "comment_id": 108562357, "body": "This was also the solution for &quot;google/protobuf/any.proto: File not found.&quot; when compiling a python protobuf on ubuntu. Commenting in case it helps others find this answer."}], "tags": [], "owner": {"reputation": 2023, "user_id": 985043, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/62949a6f5ce5de6cba0b1520d99670b8?s=128&d=identicon&r=PG", "display_name": "xosp7tom", "link": "https://stackoverflow.com/users/985043/xosp7tom"}, "is_accepted": true, "score": 5, "last_activity_date": 1484216199, "last_edit_date": 1484216199, "creation_date": 1484190088, "answer_id": 41604412, "question_id": 41594991, "link": "https://stackoverflow.com/questions/41594991/compile-protobuf-client-code-on-ubuntu-but-include-file-is-not-found/41604412#41604412", "title": "compile protobuf client code on ubuntu, but include file is not found", "body": "<p>You did not install associated protobuf header and lib, which is independent from protobuf-compiler. Run:\n<code>sudo apt install libprotobuf-dev</code></p>\n"}], "owner": {"reputation": 8007, "user_id": 5890784, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dec46088a284202a3be71897845a669d?s=128&d=identicon&r=PG&f=1", "display_name": "Hind Forsum", "link": "https://stackoverflow.com/users/5890784/hind-forsum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1494, "favorite_count": 0, "accepted_answer_id": 41604412, "answer_count": 1, "score": 2, "last_activity_date": 1484216199, "creation_date": 1484149283, "question_id": 41594991, "link": "https://stackoverflow.com/questions/41594991/compile-protobuf-client-code-on-ubuntu-but-include-file-is-not-found", "title": "compile protobuf client code on ubuntu, but include file is not found", "body": "<p>I just installed google protocol buffer on my ubuntu1604:</p>\n\n<pre><code>sudo apt install protobuf-compiler\n</code></pre>\n\n<p>And tried a quick test, 1 proto file, 1 cpp file to use it, try to see the encode/decode results:</p>\n\n<pre><code>$ cat 1.proto\npackage x;\nmessage my{\nrequired string name=1;\nrequired int32 id=2;\noptional string email=3;\n}\n\n$ cat 1.cpp\n#include\"1.pb.cc\"\n#include&lt;string&gt;\n#include&lt;iostream&gt;\nusing namespace std;\nusing namespace x;\nint main()\n{\n  my p;\n  p.set_name(\"tom\");\n  p.set_id(18);\n  p.set_email(\"aa@bb.com\");\n  string s;\n  my.SerializeToString(&amp;s);\n  return 0;\n}\n</code></pre>\n\n<p>I tried to compile it, failed to find include files:</p>\n\n<pre><code>protoc 1.proto --cpp_out=./\ng++ 1.cpp 1.pb.cc -lprotobuf\n\nIn file included from 1.pb.cc:5:0,\n             from 1.cpp:1:\n1.pb.h:9:42: fatal error: google/protobuf/stubs/common.h: No such file or directory\ncompilation terminated.\nIn file included from 1.pb.cc:5:0:\n1.pb.h:9:42: fatal error: google/protobuf/stubs/common.h: No such file or directory\ncompilation terminated.\n</code></pre>\n"}, {"tags": ["c++", "linux", "gcc"], "comments": [{"owner": {"reputation": 827, "user_id": 961254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7868d9f231713ae3d68107a2f284bf73?s=128&d=identicon&r=PG", "display_name": "foolo", "link": "https://stackoverflow.com/users/961254/foolo"}, "edited": false, "score": 0, "creation_date": 1484173864, "post_id": 41594971, "comment_id": 70406533, "body": "I tried this code locally on g++ (Ubuntu 5.4.0-6ubuntu1~16.04.4) 5.4.0 20160609, using same g++ flags as you, and it works fine (it waits after !!!In thread!!!) so this must be a system specific bug."}, {"owner": {"reputation": 29, "user_id": 2054154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/510b3ec9de586dad41ecd4163f66a073?s=128&d=identicon&r=PG", "display_name": "jattman", "link": "https://stackoverflow.com/users/2054154/jattman"}, "reply_to_user": {"reputation": 827, "user_id": 961254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7868d9f231713ae3d68107a2f284bf73?s=128&d=identicon&r=PG", "display_name": "foolo", "link": "https://stackoverflow.com/users/961254/foolo"}, "edited": false, "score": 0, "creation_date": 1484208094, "post_id": 41594971, "comment_id": 70417406, "body": "Yes, given that I can also get it to work on CentOS 7 with gcc 4.8.5, that doesn&#39;t surprise me. I guess I&#39;ll have to switch me effort to putting in different library versions, and possibly a different compiler version, if no-one else has any ideas. Incidentally, if I change the timed_mutex to a plain mutex, and the condition_variable_any to a condition_variable, it works, which leads me to wonder if this isn&#39;t a manifestation of <a href=\"http://stackoverflow.com/questions/17518464/why-does-stdtimed-mutextry-lock-for-not-work\">this bug</a>"}], "answers": [{"tags": [], "owner": {"reputation": 29, "user_id": 2054154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/510b3ec9de586dad41ecd4163f66a073?s=128&d=identicon&r=PG", "display_name": "jattman", "link": "https://stackoverflow.com/users/2054154/jattman"}, "is_accepted": true, "score": 1, "last_activity_date": 1484213195, "last_edit_date": 1484213195, "creation_date": 1484212852, "answer_id": 41609248, "question_id": 41594971, "link": "https://stackoverflow.com/questions/41594971/condition-variable-wait-throws-exception/41609248#41609248", "title": "Condition variable wait throws exception", "body": "<p>OK, figured this out in the end, although it was pretty obscure. Just posting on the off-chance that anyone comes across this at a later date.</p>\n\n<p>This is a manifestation of the bug listed at <a href=\"https://rhn.redhat.com/errata/RHBA-2014-1035.html\" rel=\"nofollow noreferrer\">https://rhn.redhat.com/errata/RHBA-2014-1035.html</a>, which is relevant since I have installed the devtoolset-2-gcc package (I actually got mine from CERN) as an easy way to get gcc 4.8 on CentOS 6.</p>\n\n<p>Quoting from above link:</p>\n\n<blockquote>\n  <ul>\n  <li>Previously, the \"std::condition_variable_any\" C++11 type was defined\n  incorrectly in GCC. As a consequence, Red Hat Developer Toolset code compiled\n  with a later version of libstdc++ could fail to run on systems with an older\n  version of the library. The header file has been updated and a header-only\n  \"condition_variable_any\" has been added to be used with a\n  _GLIBCXX_DTS2_CONDITION_VARIABLE_ANY macro. When the macro is defined, compiling\n  works with any version of libstdc++. (BZ#1120929)</li>\n  </ul>\n</blockquote>\n\n<p>Therefore the solution is to define the _GLIBCXX_DTS2_CONDITION_VARIABLE_ANY macro before including condition_variable.</p>\n"}], "owner": {"reputation": 29, "user_id": 2054154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/510b3ec9de586dad41ecd4163f66a073?s=128&d=identicon&r=PG", "display_name": "jattman", "link": "https://stackoverflow.com/users/2054154/jattman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 1, "accepted_answer_id": 41609248, "answer_count": 1, "score": 1, "last_activity_date": 1484213195, "creation_date": 1484149231, "question_id": 41594971, "link": "https://stackoverflow.com/questions/41594971/condition-variable-wait-throws-exception", "title": "Condition variable wait throws exception", "body": "<p>The following code throws a std::system_error at the line setupVar.wait. The strange thing is that this happens intermittently - by removing some lines of code, it will run successfully - though not always. Note that this is stripped down from a larger block of code, so all I want it to do is stop and wait.</p>\n\n<p>I am building and running in CentOS 6 using dev-toolset2 (gcc 4.8.2), using the following commands (the code is in the file Test2.cpp):</p>\n\n<pre><code>g++ -O0 -g3 -Wall -c -fmessage-length=0 -std=c++11 -pthread -m64 -o\"src/Test2.o\" \"../src/Test2.cpp\"\ng++ -Wl,--no-as-needed -lpthread -o Test2 ./src/Test2.o\n</code></pre>\n\n<p>The other strange thing is that this works perfectly fine in CentOS 7 (gcc 4.8.5).</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;mutex&gt;\n#include &lt;condition_variable&gt;\n#include &lt;unistd.h&gt;\n\nusing namespace std;\n\nint main() {\n    cout &lt;&lt; \"!!!Start!!!\" &lt;&lt; endl;\n\n    bool flag = false;\n    std::timed_mutex setupMtx;\n    std::condition_variable_any setupVar;\n\n    std::unique_lock&lt;std::timed_mutex&gt; setupLock(setupMtx);\n\n    std::thread theThread(\n        [&amp;flag]\n        {\n            cout &lt;&lt; \"!!!In thread!!!\" &lt;&lt; endl;\n            flag = true;\n        }\n    );\n\n    sleep(1);\n    setupVar.wait(setupLock);\n\n    theThread.join();\n\n    cout &lt;&lt; \"!!!End!!!\" &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>When I run I get:</p>\n\n<pre><code>!!!Start!!!\n!!!In thread!!!\nterminate called after throwing an instance of 'std::system_error'\n  what():\nAborted (core dumped)\n</code></pre>\n\n<p>Is there anything wrong with the code per se that would cause if to throw an exception at setupVar.wait? Does anyone have any other ideas about what could be causing this problem?</p>\n\n<p>Just for further info, running ldd on the output exe gives:</p>\n\n<pre><code>    linux-vdso.so.1 =&gt;  (0x00007ffc37968000)\n    libpthread.so.0 =&gt; /lib64/libpthread.so.0 (0x00000034a8c00000)\n    libstdc++.so.6 =&gt; /usr/lib64/libstdc++.so.6 (0x00000034b2c00000)\n    libm.so.6 =&gt; /lib64/libm.so.6 (0x00000034a8800000)\n    libgcc_s.so.1 =&gt; /lib64/libgcc_s.so.1 (0x00000034b2000000)\n    libc.so.6 =&gt; /lib64/libc.so.6 (0x00000034a8400000)\n    /lib64/ld-linux-x86-64.so.2 (0x00000034a7c00000)\n</code></pre>\n"}, {"tags": ["c++", "sockets", "networking"], "comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1484149234, "post_id": 41594918, "comment_id": 70392741, "body": "Endianess is by definition a byte-order term, not a bit-order term. There is no &quot;bit order&quot; in memory, since memory addresses are in <b>byte units</b>. The only possible difference in bit-level interpretation, is by your compiler, when you&#39;re using bit-field structures. And data sent over the network does not contain this type of information."}, {"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 0, "creation_date": 1484149285, "post_id": 41594918, "comment_id": 70392781, "body": "Well that translation, if necessary, could happen at the network protocol level, not the application level. However, the network protocol doesn&#39;t know how many bytes in a packet are grouped together: (is that 2 <code>short</code>s, or 1 <code>int</code>?)"}, {"owner": {"reputation": 610, "user_id": 4748017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebe182b89b0f97849fabb1e45baa143f?s=128&d=identicon&r=PG&f=1", "display_name": "Herb", "link": "https://stackoverflow.com/users/4748017/herb"}, "edited": false, "score": 0, "creation_date": 1484149414, "post_id": 41594918, "comment_id": 70392866, "body": "Why would the program on the receiving machine think that, if it&#39;s receiving the data from the network?"}, {"owner": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "edited": false, "score": 0, "creation_date": 1484156893, "post_id": 41594918, "comment_id": 70397735, "body": "The IETF has some documents regarding bit order. For example, &quot;<i>3.2. Network Bit Order       For certain low-level protocols or compression-oriented media      types, bit-order may be an issue.  When possible, big-endian is      encouraged for consistancy with Network Byte Order.</i>&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 7015073, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9b80c598c217b55d94a5da9cd6aa0126?s=128&d=identicon&r=PG&f=1", "display_name": "LtChang", "link": "https://stackoverflow.com/users/7015073/ltchang"}, "edited": false, "score": 0, "creation_date": 1484151571, "post_id": 41595291, "comment_id": 70394316, "body": "when you say &quot;protocols&quot;, you mean those work in the physical layer?"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 125, "user_id": 7015073, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9b80c598c217b55d94a5da9cd6aa0126?s=128&d=identicon&r=PG&f=1", "display_name": "LtChang", "link": "https://stackoverflow.com/users/7015073/ltchang"}, "edited": false, "score": 0, "creation_date": 1484151790, "post_id": 41595291, "comment_id": 70394459, "body": "@HECHANG Yes. The hardware has specifications on how they should handle individual bits, and also specifications on how those bits should be presented to the CPU (and how the CPU should interpret them). So unless you&#39;re writing Metal code (i.e., you&#39;re writing those literal bit/bus interactions), those are details you don&#39;t need to know about."}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 2, "last_activity_date": 1484150202, "creation_date": 1484150202, "answer_id": 41595291, "question_id": 41594918, "link": "https://stackoverflow.com/questions/41594918/why-we-dont-care-about-bit-order/41595291#41595291", "title": "Why we don&#39;t care about bit order?", "body": "<p>\"Bit Ordering\" is specified by the protocols used to transfer data from the hardware (like your network card/port) to host memory.</p>\n\n<p>Technically, this applies in many, many cases. Like, you might wonder the same question if a Harddrive on a machine that stores bits in one order <code>01234567</code> is transferred to a machine that stores bits in the opposite order <code>76543210</code>, whether it'll read the data correctly or not.</p>\n\n<p>But the simple answer is that it always reads correctly, because the protocols used to map the hard drives to the system bus specify the exact ordering of the bits as they are \"presented\" to host memory.</p>\n\n<p>Network cards and networking hardware have a similar behavior: They have a standardized \"bit ordering\" they use in hardware, and as part of the hardware protocol, it \"presents\" those bits to the Host in whatever form the host expects them.</p>\n\n<p>\"Byte Ordering\", of course, is a separate thing, and more difficult to deal with, because network hardware and storage hardware only recognize \"streams of bytes\" (Yes, I'm oversimplifying), and don't much care for what those bytes actually mean. </p>\n\n<p>But in terms of \"Bit Ordering\", unless you're writing code \"On the Metal\", so to speak, you don't need to think about it.</p>\n"}], "owner": {"reputation": 125, "user_id": 7015073, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9b80c598c217b55d94a5da9cd6aa0126?s=128&d=identicon&r=PG&f=1", "display_name": "LtChang", "link": "https://stackoverflow.com/users/7015073/ltchang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1484155262, "creation_date": 1484149093, "last_edit_date": 1484155262, "question_id": 41594918, "link": "https://stackoverflow.com/questions/41594918/why-we-dont-care-about-bit-order", "title": "Why we don&#39;t care about bit order?", "body": "<p>Recently I've learned some Windows socket programming to achieve some socket connection stuff.</p>\n\n<p>Inside the code we use some functions like htonl(), htons() to convert our data from host byte order to network byte order, or so called big-endian, since in some machines data is stored as little-endian, like Intel's CPU as I know.</p>\n\n<p>But what I confused is that doesn't the really important thing is the bit order instead of byte?</p>\n\n<p>Since bit is the minimum unit that computers used, not byte.\nLet's say we want to pass an u_short u=18 to another machine by a machine use little-endian.</p>\n\n<p>In our machine, u's first byte, the least significant one is 2 and second byte, the most significant one is 1, let me express this by [2][1].</p>\n\n<p>So we need to call htons(u) first to convert [2][1] into [1][2] and send it to network.</p>\n\n<p>The remote machine will receive 2 first, but 2 is expressed by a sequence of bits which the machine actually receive are 0000-0010, how does the machine know this byte is 2? Won't it think 0000-0010 represents 64?(0100-0000) Do all machines store bytes in the same way?</p>\n"}, {"tags": ["c++", "argument-dependent-lookup", "boost-range"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1484149409, "post_id": 41594854, "comment_id": 70392863, "body": "Both operator should be considered. but I suppose the boost&#39;s one is more specialized that your&#39;s."}, {"owner": {"reputation": 8045, "user_id": 106064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/35d14df213a3c0ad8b0f0bb2d53476a3?s=128&d=identicon&r=PG", "display_name": "TimW", "link": "https://stackoverflow.com/users/106064/timw"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1484156942, "post_id": 41594854, "comment_id": 70397762, "body": "Why is the <code>boost::range_detail::replace_holder</code> template functions considered? There is no argument that opens the boost namespace.  There is only the template &#39;T&#39; that is from the boost namespace .  And if there is a good reason for considering it, why aren&#39;t the other boost range holder template functions not considered?"}], "answers": [{"comments": [{"owner": {"reputation": 38108, "user_id": 6610, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/635c3ea0c7b8c37ef45744b6e66dd263?s=128&d=identicon&r=PG", "display_name": "xtofl", "link": "https://stackoverflow.com/users/6610/xtofl"}, "edited": false, "score": 0, "creation_date": 1484209240, "post_id": 41598159, "comment_id": 70417975, "body": "There seems to be some ambiguity in the cppreference documented &#39;class template specialization&#39;: in this case, <code>boo&lt;decltype(filtered)&gt;</code> is clearly not a specialization, it is a class template <i>instantiation</i>."}, {"owner": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "reply_to_user": {"reputation": 38108, "user_id": 6610, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/635c3ea0c7b8c37ef45744b6e66dd263?s=128&d=identicon&r=PG", "display_name": "xtofl", "link": "https://stackoverflow.com/users/6610/xtofl"}, "edited": false, "score": 2, "creation_date": 1485113047, "post_id": 41598159, "comment_id": 70778433, "body": "@xtofl it&#39;s a specialization (well, <i>simple-template-id</i> that names a specailization), its use in a program may cause an (implicit) instantiation as per 14.7.1[temp.inst]"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 2, "last_activity_date": 1484159415, "creation_date": 1484159415, "answer_id": 41598159, "question_id": 41594854, "link": "https://stackoverflow.com/questions/41594854/why-is-adl-preferring-the-boostrange-detailoperator-over-the-local-opera/41598159#41598159", "title": "Why is adl preferring the &#39;boost::range_detail::operator|&#39; over the local &#39;operator|&#39;?", "body": "<p>According to the rules of <a href=\"http://en.cppreference.com/w/cpp/language/adl\" rel=\"nofollow noreferrer\">ADL</a>,\nnamespace and classes added in the set for overloads for <code>boo&lt;decltype(filtered)&gt;{} | xs</code> are <code>local</code> (for <code>boo</code>), <code>boost::range_detail</code> (for <code>decltype(filtered)</code>) and <code>std</code> (for <code>std::vector&lt;int&gt;</code> <code>xs</code>).</p>\n\n<p>We have in particularity:</p>\n\n<p>(As you expect, your's in <code>local</code></p>\n\n<pre><code>template&lt;typename T, typename U&gt; auto operator|(boo&lt;T&gt;, U);\n</code></pre>\n\n<p>and )</p>\n\n<p>a problematic one in <code>boost::range_detail</code>:</p>\n\n<pre><code>template &lt;class SinglePassRange&gt;\nreplaced_range&lt;const SinglePassRange&gt;\noperator|(\n    const SinglePassRange&amp;,\n    const replace_holder&lt;typename range_value&lt;SinglePassRange&gt;::type&gt;&amp;);\n</code></pre>\n\n<p>So we have the non deduced <code>range_value&lt;boo&lt;decltype(filtered)&gt;&gt;::type</code> which provokes a hard error. (The method is unfortunately not SFINAE friendly to be removed from overload set).</p>\n\n<p>Error happens before <a href=\"http://en.cppreference.com/w/cpp/language/overload_resolution\" rel=\"nofollow noreferrer\">overload_resolution</a>.</p>\n"}], "owner": {"reputation": 8045, "user_id": 106064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/35d14df213a3c0ad8b0f0bb2d53476a3?s=128&d=identicon&r=PG", "display_name": "TimW", "link": "https://stackoverflow.com/users/106064/timw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 41598159, "answer_count": 1, "score": 3, "last_activity_date": 1493478732, "creation_date": 1484148880, "last_edit_date": 1493478732, "question_id": 41594854, "link": "https://stackoverflow.com/questions/41594854/why-is-adl-preferring-the-boostrange-detailoperator-over-the-local-opera", "title": "Why is adl preferring the &#39;boost::range_detail::operator|&#39; over the local &#39;operator|&#39;?", "body": "<p>I'm trying to write an <code>operator|</code> for my template class <code>boo</code> and everything works out fine until the template class is a boost range type - like in the example a <code>boost::range::filter_range</code> - adl prefers the <code>boost::range_detail::operator|(SinglePassRange&amp; r, const replace_holder&lt;T&gt;)</code> over the local one.</p>\n\n<p>Can anyone explain why adl is preferring the overload from the boost this detailed namespace over the local namespace?</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;boost/range/adaptors.hpp&gt;\n\nnamespace local\n{\n    template&lt;typename T&gt;\n    struct boo {};\n\n    // this overload is not prefered when T is a boost::range::xxx_range\n    template&lt;typename T, typename U&gt;\n    auto operator|(boo&lt;T&gt;, U)\n    {\n        return false;\n    }\n\n    void finds_local_operator_overload()\n    {\n        std::vector&lt;int&gt; xs;\n\n        // works like expected and calls local::operator|\n        auto f = boo&lt;decltype(xs)&gt;{} | xs;\n    }\n\n    void prefers_boost_range_detail_replaced_operator_overload_instead_of_local_operator()\n    {\n        std::vector&lt;int&gt; xs;\n        // compiler error because it tries to call 'boost::range_detail::operator|'\n        auto filtered = xs | boost::adaptors::filtered([](auto &amp;&amp;x){ return x % 2; });\n        auto f = boo&lt;decltype(filtered)&gt;{} | xs;\n    }\n</code></pre>\n\n<p>}</p>\n\n<p>clang error (msvc reports almost the same):</p>\n\n<pre><code>/xxx/../../thirdparty/boost/1.60.0/dist/boost/range/value_type.hpp:26:70: error: no type named 'type' in\n      'boost::range_iterator&lt;local::boo&lt;boost::range_detail::filtered_range&lt;(lambda at\n      /xxx/Tests.cpp:221:49), std::vector&lt;int, std::allocator&lt;int&gt; &gt; &gt; &gt;, void&gt;'\n    struct range_value : iterator_value&lt; typename range_iterator&lt;T&gt;::type &gt;\n                                         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~\n/xxx/../../thirdparty/boost/1.60.0/dist/boost/range/adaptor/replaced.hpp:122:40: note: in instantiation of template class\n      'boost::range_value&lt;local::boo&lt;boost::range_detail::filtered_range&lt;(lambda at\n      /xxx/Tests.cpp:221:49), std::vector&lt;int, std::allocator&lt;int&gt; &gt; &gt; &gt; &gt;' requested\n      here\n               BOOST_DEDUCED_TYPENAME range_value&lt;SinglePassRange&gt;::type&gt;&amp; f)\n                                       ^\n/xxx/Tests.cpp:222:37: note: while substituting deduced template arguments into\n      function template 'operator|' [with SinglePassRange = local::boo&lt;boost::range_detail::filtered_range&lt;(lambda at\n      /xxx/Tests.cpp:221:49), std::vector&lt;int, std::allocator&lt;int&gt; &gt; &gt; &gt;]\n        auto f = boo&lt;decltype(filtered)&gt;{} | xs;\n</code></pre>\n"}, {"tags": ["c++", "c++11", "visual-c++", "visual-studio-2015", "constexpr"], "comments": [{"owner": {"reputation": 1070, "user_id": 6074306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd660b5800c023de3b30c914112f09c3?s=128&d=identicon&r=PG&f=1", "display_name": "n.caillou", "link": "https://stackoverflow.com/users/6074306/n-caillou"}, "edited": false, "score": 0, "creation_date": 1484148755, "post_id": 41594730, "comment_id": 70392444, "body": "You&#39;ve used the same optimization level in both cases, right?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 1070, "user_id": 6074306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd660b5800c023de3b30c914112f09c3?s=128&d=identicon&r=PG&f=1", "display_name": "n.caillou", "link": "https://stackoverflow.com/users/6074306/n-caillou"}, "edited": false, "score": 0, "creation_date": 1484148808, "post_id": 41594730, "comment_id": 70392478, "body": "@n.caillou Yes, I&#39;ve run both cases with and without optimizations."}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1484149243, "post_id": 41594730, "comment_id": 70392751, "body": "@Fran&#231;oisAndrieux: updated my answer to cover VS2015 behavior"}], "answers": [{"tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 5, "last_activity_date": 1484149234, "last_edit_date": 1484149234, "creation_date": 1484148879, "answer_id": 41594853, "question_id": 41594730, "link": "https://stackoverflow.com/questions/41594730/const-char-constexpr-evaluated-at-compile-time-and-at-run-time/41594853#41594853", "title": "const char * constexpr evaluated at compile time and at run time", "body": "<p><a href=\"https://godbolt.org/g/gPJld5\" rel=\"noreferrer\">gcc.godbolt.org</a> shows that your code is completely optimized out with both <strong>gcc 7</strong> and <strong>clang 3.9</strong>, using the <code>-std=c++11 -O1</code> flags.</p>\n\n<p>Uncommenting the <code>volatile</code> operations will obviously generate assembly instructions, but no instructions are generated for <code>skip_first_word</code> or <code>str_len</code>.</p>\n\n<hr>\n\n<p>You're correct regarding Visual Studio: using <a href=\"https://godbolt.org/g/nq8Of0\" rel=\"noreferrer\">CL 19 on gcc.beta.godbolt.org</a> shows that assembly is being generated for:</p>\n\n<pre><code>constexpr auto foo = skip_first_word(\"Hello, World!\");\nconstexpr auto foo_size = str_len(foo);\n</code></pre>\n\n<p><strong>This seems like a compiler implementation defect, as <code>constexpr</code> variables  should and could be completely computed at compile-time.</strong> Additionally, the variables are being used inside a <code>static_assert</code>, which is <strong>guaranteed to be evaluated at compile-time</strong>. This seems to suggest that the compiler is unnecessarily generating assembly for <code>skip_first_word</code> and <code>str_len</code>, even though they are never used in a run-time context.</p>\n\n<p>Manually inlining the code as follows...</p>\n\n<pre><code>static_assert(str_len(skip_first_word(\"Hello, World!\")) == 6, \"Wrong size\");\nstatic_assert(str_len(skip_first_word(\"Hello, World!\")) != 7, \"Wrong size\");\n</code></pre>\n\n<p><a href=\"https://godbolt.org/g/erls71\" rel=\"noreferrer\">...produces no extra assembly</a>.</p>\n"}], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 657, "favorite_count": 1, "accepted_answer_id": 41594853, "answer_count": 1, "score": 3, "last_activity_date": 1484203015, "creation_date": 1484148485, "last_edit_date": 1484203015, "question_id": 41594730, "link": "https://stackoverflow.com/questions/41594730/const-char-constexpr-evaluated-at-compile-time-and-at-run-time", "title": "const char * constexpr evaluated at compile time and at run time", "body": "<p>In the following example, I use <code>static_assert</code> to verify that <code>foo</code> is determined at compile time. The <code>static_assert</code> passes and I've checked with an incorrect condition that it's actually active. This implies that <code>foo</code> is known at compile time. But if I step through the code with a debugger, I see that <code>skip_first_word</code> is also executed at run time.</p>\n\n<pre><code>// Skip the first word in p_str\nconstexpr const char * skip_first_word(const char * p_str) {\n    return (*p_str == '\\0') ? p_str : \n        (*p_str == ' ') ? p_str + 1 : \n        skip_first_word(p_str + 1);\n}\n\n// constexpr to calculate the length of a string\nconstexpr size_t str_len(const char * p_str) {\n    return (*p_str == '\\0') ? 0 : str_len(p_str + 1) + 1;\n}\n\nint main()\n{\n    constexpr auto foo = skip_first_word(\"Hello, World!\");\n    constexpr auto foo_size = str_len(foo);\n    static_assert(foo_size == 6, \"Wrong size\");\n\n    // This assert successfully fails\n    // static_assert(foo_size == 7, \"Wrong size\");\n\n    // Prevent optimizations\n    for(auto ptr = foo; *ptr != '\\0'; ++ptr) {\n        volatile auto sink = ptr;\n    }\n    volatile auto sink = &amp;foo_size;\n\n    return 0;\n}\n</code></pre>\n\n<p>What's going on here? Why can't the <code>foo</code> that was calculated at compile-time be used at runtime?</p>\n\n<p>Edit: This behavior is observed with Visual Studio 2015</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1484150190, "post_id": 41594595, "comment_id": 70393367, "body": "Why not consistently use <code>const int&amp;</code> for the set functions? So then you change to <code>void SetFoo(int f)</code> and <code>template &lt;typename T, typename V, V(T::*getf)(), void (T::*setf)(const V&amp;)&gt;</code>?"}, {"owner": {"reputation": 68, "user_id": 5466338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e79aeebdf3aed173a241337a9aaf5ae9?s=128&d=identicon&r=PG&f=1", "display_name": "M.Palko", "link": "https://stackoverflow.com/users/5466338/m-palko"}, "reply_to_user": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1484151494, "post_id": 41594595, "comment_id": 70394254, "body": "I&#39;m trying to have the accessor be as flexible as possible. In practice, it will be used with not only primitive types, but also classes/structs, and pointers. Unfortunately it&#39;s not realistic to have the entire codebase use const references in all setters :/"}], "answers": [{"comments": [{"owner": {"reputation": 68, "user_id": 5466338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e79aeebdf3aed173a241337a9aaf5ae9?s=128&d=identicon&r=PG&f=1", "display_name": "M.Palko", "link": "https://stackoverflow.com/users/5466338/m-palko"}, "edited": false, "score": 0, "creation_date": 1484169772, "post_id": 41597306, "comment_id": 70404650, "body": "I was hoping there was a way to have it deduced automatically."}], "tags": [], "owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "is_accepted": false, "score": 1, "last_activity_date": 1484173575, "last_edit_date": 1484173575, "creation_date": 1484156383, "answer_id": 41597306, "question_id": 41594595, "link": "https://stackoverflow.com/questions/41594595/overloaded-template-classes/41597306#41597306", "title": "Overloaded Template Classes", "body": "<p>You could add another template parameter for the set function's parameter:</p>\n\n<pre><code>template &lt;typename T, typename V, typename VP, V(T::*getf)(), void (T::*setf)(VP)&gt;\n</code></pre>\n\n<p>And then use for both cases:</p>\n\n<pre><code>typedef Accessor&lt;TargetClass, int, int, \n    &amp;TargetClass::GetFoo, &amp;TargetClass::SetFoo&gt; fooAcessor;\n\ntypedef Accessor&lt;TargetClass, int, const int&amp;, \n    &amp;TargetClass::GetBar, &amp;TargetClass::SetBar&gt; barAcessor;\n</code></pre>\n\n<p>Full program:</p>\n\n<pre><code>template &lt;typename T, typename V, typename VP, V(T::*getf)(), void (T::*setf)(VP)&gt;\nstruct Accessor\n{\n    static V Get(T* obj)\n    {\n        return (obj-&gt;*getf)();\n    }\n\n    static void Set(T* obj, V aValue)\n    {\n        return (obj-&gt;*setf)(aValue);\n    }\n};\n\nclass TargetClass\n{\n    int foo;\n    int bar;\n\npublic:\n    TargetClass(int f, int b)\n        : foo(f)\n        , bar(b)\n    {\n    }\n\n    int GetFoo()\n    {\n        return foo;\n    }\n\n    void SetFoo(int f)\n    {\n        foo = f;\n    }\n\n    int GetBar()\n    {\n        return bar;\n    }\n\n    void SetBar(const int&amp; b)\n    {\n        bar = b;\n    }\n};\n\nint main()\n{\n    TargetClass* target = new TargetClass(5, 3);\n\n    // now has extra int parameter\n    typedef Accessor&lt;TargetClass, int, int, &amp;TargetClass::GetFoo, &amp;TargetClass::SetFoo&gt; fooAcessor;\n    fooAcessor::Set(target, 13);\n    int foo = fooAcessor::Get(target);\n\n    // Works now, because TargetClass::SetBar's function parameter was specified explicitly as const int&amp;\n    typedef Accessor&lt;TargetClass, int, const int&amp;, &amp;TargetClass::GetBar, &amp;TargetClass::SetBar&gt; barAcessor;\n    barAcessor::Set(target, 13);\n    int bar = barAcessor::Get(target);\n\n    delete target;\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 68, "user_id": 5466338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e79aeebdf3aed173a241337a9aaf5ae9?s=128&d=identicon&r=PG&f=1", "display_name": "M.Palko", "link": "https://stackoverflow.com/users/5466338/m-palko"}, "edited": false, "score": 0, "creation_date": 1484252693, "post_id": 41601894, "comment_id": 70445986, "body": "I don&#39;t currently have access to c++17, but good to know this will be supported at sometime in the future! (I had previously tried auto in the template parameter, only for the compiler to say that wasn&#39;t allowed.)"}, {"owner": {"reputation": 68, "user_id": 5466338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e79aeebdf3aed173a241337a9aaf5ae9?s=128&d=identicon&r=PG&f=1", "display_name": "M.Palko", "link": "https://stackoverflow.com/users/5466338/m-palko"}, "edited": false, "score": 0, "creation_date": 1484252780, "post_id": 41601894, "comment_id": 70446027, "body": "Also, nice trick getting the class and return types from the get and set functions!"}], "tags": [], "owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "is_accepted": true, "score": 1, "last_activity_date": 1484173754, "creation_date": 1484173754, "answer_id": 41601894, "question_id": 41594595, "link": "https://stackoverflow.com/questions/41594595/overloaded-template-classes/41601894#41601894", "title": "Overloaded Template Classes", "body": "<p>If you have access to c++17, and assuming that the proposed standard doesn't change in the meantime, you can have the types deduced automatically:</p>\n\n<pre><code>template &lt;typename F&gt;\nstruct get_types;\n\ntemplate &lt;typename T, typename V, typename... VP&gt;\nstruct get_types&lt;V(T::*)(VP...)&gt;\n{\n    using return_type = V;\n    using class_type = T;\n};\n\ntemplate &lt;auto getf, auto setf&gt;\nstruct Accessor {\n    using V = typename get_types&lt;decltype(getf)&gt;::return_type;\n    using T = typename get_types&lt;decltype(getf)&gt;::class_type;\n    static V Get(T* obj)\n    {\n        return (obj-&gt;*getf)();\n    }\n\n    static void Set(T* obj, V aValue)\n    {\n        return (obj-&gt;*setf)(aValue);\n    }\n};\n\nclass TargetClass {\n    int foo;\n    int bar;\npublic:\n    TargetClass(int f, int b)\n        : foo(f)\n        , bar(b) {}\n    int GetFoo() { return foo; }\n    void SetFoo(int f) { foo = f; }\n    int GetBar() { return bar; }\n    void SetBar(const int&amp; b) { bar = b; }\n};\n\nint main()\n{\n    TargetClass* target = new TargetClass(5, 3);\n    using fooAccessor = Accessor&lt;&amp;TargetClass::GetFoo, &amp;TargetClass::SetFoo&gt;;\n\n    fooAccessor::Set(target, 13);\n    int foo = fooAccessor::Get(target);\n\n    using barAcessor = Accessor&lt;&amp;TargetClass::GetBar, &amp;TargetClass::SetBar&gt;;\n    barAcessor::Set(target, 13);\n    int bar = barAcessor::Get(target);\n\n    delete target;\n    return foo + bar;\n}\n</code></pre>\n\n<p>As of this writing the program above <a href=\"https://godbolt.org/g/JmIWLC\" rel=\"nofollow noreferrer\">compiles on gcc 7 (snapshot)</a>.</p>\n"}], "owner": {"reputation": 68, "user_id": 5466338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e79aeebdf3aed173a241337a9aaf5ae9?s=128&d=identicon&r=PG&f=1", "display_name": "M.Palko", "link": "https://stackoverflow.com/users/5466338/m-palko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 1, "accepted_answer_id": 41601894, "answer_count": 2, "score": 2, "last_activity_date": 1484173754, "creation_date": 1484148129, "question_id": 41594595, "link": "https://stackoverflow.com/questions/41594595/overloaded-template-classes", "title": "Overloaded Template Classes", "body": "<p>I'm working on a property-like system in c++, one component of which in an accessor template class, which creates static functions I can then pass pointers of, into my property class for get an set operations.</p>\n\n<p>Here's what the accessor looks like:</p>\n\n<pre><code>template &lt;typename T, typename V, V (T::*getf)(), void (T::*setf)(V)&gt;\nstruct Accessor\n{\n    static V Get(T* obj)\n    {\n        return (obj-&gt;*getf)();\n    }\n\n    static void Set(T* obj, V aValue)\n    {\n        return (obj-&gt;*setf)(aValue);\n    }\n};\n</code></pre>\n\n<p>And a test class that I'll be using the accessor on. Note how SetFoo takes an int, where SetBar takes a const int&amp;.</p>\n\n<pre><code>class TargetClass\n{\n    int foo;\n    int bar;\n\npublic:\n    TargetClass(int f, int b)\n        : foo(f)\n        , bar(b)\n    {\n    }\n\n    int GetFoo()\n    {\n        return foo;\n    }\n\n    void SetFoo(int f)\n    {\n        foo = f;\n    }\n\n    int GetBar()\n    {\n        return bar;\n    }\n\n    void SetBar(const int&amp; b)\n    {\n        bar = b;\n    }\n};\n</code></pre>\n\n<p>And finally, here's the usage:</p>\n\n<pre><code>int main()\n{\n    TargetClass* target = new TargetClass(5, 3);\n\n    // Works great\n    typedef Accessor&lt;TargetClass, int, &amp;TargetClass::GetFoo, &amp;TargetClass::SetFoo&gt; fooAcessor;\n    fooAcessor::Set(target, 13);\n    int foo = fooAcessor::Get(target);\n\n    // Doesn't work, because TargetClass::SetBar takes a const int&amp; as an argument, instead of an int\n    typedef Accessor&lt;TargetClass, int, &amp;TargetClass::GetBar, &amp;TargetClass::SetBar&gt; barAcessor;\n\n    delete target;\n    return 0;\n}\n</code></pre>\n\n<p>I've tried \"overloading\" the Acessor struct so it's 4th argument is a const V&amp;, but that doesn't seem to work. Is what I'm trying to do here possible?</p>\n"}, {"tags": ["c++", "volatile"], "comments": [{"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1484149682, "post_id": 41594568, "comment_id": 70393017, "body": "Does Bar have a data member that is POD? So you could do something like <code>volatile double temp;</code> <code>temp = foo().getSomeDouble()</code> ?"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1484151221, "post_id": 41594568, "comment_id": 70394064, "body": "If the function <code>foo</code> has explicit side effects or if it is defined in another compilation unit (the compiler cannot know whether side effects are present), the loop should not be optimized out."}, {"owner": {"reputation": 1190, "user_id": 396803, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/975631165a4b621d5f2be7d1b1325011?s=128&d=identicon&r=PG", "display_name": "bgp2000", "link": "https://stackoverflow.com/users/396803/bgp2000"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1484153384, "post_id": 41594568, "comment_id": 70395433, "body": "@serge-ballesta foo might not have side effects and resides in a static lib. I think that aggresive link time optimization might still decide to optimize away."}, {"owner": {"reputation": 1190, "user_id": 396803, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/975631165a4b621d5f2be7d1b1325011?s=128&d=identicon&r=PG", "display_name": "bgp2000", "link": "https://stackoverflow.com/users/396803/bgp2000"}, "reply_to_user": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1484153521, "post_id": 41594568, "comment_id": 70395525, "body": "@ryanp That might work. That could then be generalized to <code>volatile Bar* tmp; tmp = &amp;result;</code>."}], "owner": {"reputation": 1190, "user_id": 396803, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/975631165a4b621d5f2be7d1b1325011?s=128&d=identicon&r=PG", "display_name": "bgp2000", "link": "https://stackoverflow.com/users/396803/bgp2000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 631, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1484148065, "creation_date": 1484148065, "last_edit_date": 1495539966, "question_id": 41594568, "link": "https://stackoverflow.com/questions/41594568/assigning-a-volatile-to-a-non-volatile-and-vice-versa", "title": "Assigning a volatile to a non-volatile and vice versa", "body": "<p>I want to profile a certain function and in order to get more reliable results I call the function in a loop. I was concerned that the compiler would see that I never use the result and optimize away my loop, so I thought I could just copy the result to a variable marked as volatile to prevent that (<a href=\"http://coliru.stacked-crooked.com/a/0efedce68a04e29d\" rel=\"nofollow noreferrer\">demo here</a>).</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;chrono&gt;\n\nstruct Bar{};\nBar foo();\n\nBar profile_foo()\n{\n    // result is marked volatile so the loop isn't optimized away\n    volatile Bar result;\n\n    for(int i = 0; i&lt; 10000; i++)\n        result = foo();\n\n    return result;\n}\n\nint main(int argc, char* argv[])\n{\n    using namespace std::chrono;\n    auto begin = high_resolution_clock::now();\n\n    auto result = profile_foo();\n\n    auto end = high_resolution_clock::now();\n    auto time_passed = duration_cast&lt;milliseconds&gt;(end-begin).count();\n\n    // validate result ...\n}\n</code></pre>\n\n<p>Turns out there is no default copy constructor/assignment operator between a volatile/non-volatile instance of a class. See <a href=\"https://stackoverflow.com/questions/17217300/why-am-i-not-provided-with-a-default-copy-constructor-from-a-volatile/17218983#17218983\" title=\"this post\">this post</a>.</p>\n\n<p>So,</p>\n\n<ol>\n<li>is there any other way to assign a non-volatile to a volatile and vice versa? Or,</li>\n<li>is there another way to tell the compiler not to optimize away the loop?</li>\n</ol>\n\n<p><strong>Note:</strong> I cannot modify the class Bar.</p>\n"}, {"tags": ["c++", "c++11", "linker", "g++"], "comments": [{"owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 0, "creation_date": 1484148748, "post_id": 41594518, "comment_id": 70392439, "body": "You can try to check the exported symbols by e.g. <code>nm -D C -g libname.so</code> to see what are the differences."}, {"owner": {"reputation": 327, "user_id": 2153848, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4e1819a51339a47b0a4f84c295895840?s=128&d=identicon&r=PG", "display_name": "jhbh", "link": "https://stackoverflow.com/users/2153848/jhbh"}, "reply_to_user": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 0, "creation_date": 1484149428, "post_id": 41594518, "comment_id": 70392876, "body": "@axalis nm lists them all as &quot;T&quot;"}, {"owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 0, "creation_date": 1484149797, "post_id": 41594518, "comment_id": 70393107, "body": "And all the failing function names are there? That would be strange. Recheck also by search (e.g. pipe to <code>less</code> and try to search for the particular function names)"}, {"owner": {"reputation": 327, "user_id": 2153848, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4e1819a51339a47b0a4f84c295895840?s=128&d=identicon&r=PG", "display_name": "jhbh", "link": "https://stackoverflow.com/users/2153848/jhbh"}, "reply_to_user": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 0, "creation_date": 1484150943, "post_id": 41594518, "comment_id": 70393885, "body": "@axalis they are all present and accounted for. piped nm output to grep and ran the so through ida. ida shows the functions are exported and have executable code. I had intended to compare the assembly of the faulty linux and working windows libraries to ensure the provider didnt goof something up, but I grabbed an obsolete version of the windows lib by accident so I will have to do that after work if the issue still isnt resolved."}], "answers": [{"tags": [], "owner": {"reputation": 327, "user_id": 2153848, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4e1819a51339a47b0a4f84c295895840?s=128&d=identicon&r=PG", "display_name": "jhbh", "link": "https://stackoverflow.com/users/2153848/jhbh"}, "is_accepted": false, "score": 0, "last_activity_date": 1484225099, "creation_date": 1484225099, "answer_id": 41613600, "question_id": 41594518, "link": "https://stackoverflow.com/questions/41594518/g-linker-undefined-reference-to-only-some-functions-not-all-from-shared-libr/41613600#41613600", "title": "g++ linker undefined reference to only some functions (not all) from shared library", "body": "<p>wrapping the #includes of the headers for the lib with extern \"C\" {} seems to have done the business.</p>\n"}], "owner": {"reputation": 327, "user_id": 2153848, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4e1819a51339a47b0a4f84c295895840?s=128&d=identicon&r=PG", "display_name": "jhbh", "link": "https://stackoverflow.com/users/2153848/jhbh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 476, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1484225099, "creation_date": 1484147904, "last_edit_date": 1484148778, "question_id": 41594518, "link": "https://stackoverflow.com/questions/41594518/g-linker-undefined-reference-to-only-some-functions-not-all-from-shared-libr", "title": "g++ linker undefined reference to only some functions (not all) from shared library", "body": "<p>I am trying to link to a 3rd party library in linux using g++\nmy g++ command is </p>\n\n<pre><code>g++ -o \"outdir/libmyLib.so.1.0\" -Wl,--trace-symbol=_foo_bar_baz -Wl,--no-undefined -Wl,-z,relro -Wl,-z,now -Wl,-z,noexecstack -shared -Wl,--verbose obj_a.o obj_b.o foobarwrapper.o   -L/usr/local/lib/foobar `pkg-config --libs gtk+-3.0` -Wl,--start-group -llots -lof -ldeps -lfoobar -lz -ldl -lm -Wl,--end-group\n</code></pre>\n\n<p>this yields an undefined reference from the linker</p>\n\n<pre><code>GNU ld (GNU Binutils for Ubuntu) 2.26.1\n1&gt;     Supported emulations:\n1&gt;      elf_x86_64\n1&gt;      elf32_x86_64\n1&gt;      elf_i386\n1&gt;      elf_iamcu\n1&gt;      i386linux\n1&gt;      elf_l1om\n1&gt;      elf_k1om\n1&gt;      i386pep\n1&gt;      i386pe\n1&gt;   using internal linker script:\n1&gt;   ==================================================\n1&gt;   /* Script for --shared -z combreloc -z now -z relro: shared library, combine &amp; sort relocs */\n1&gt;   \n1&gt;   attempt to open /usr/local/lib/foobar/libfoobar.so succeeded\n1&gt;   /usr/local/lib/foobar/libfoobar.so: definition of _foo_bar_baz\n1&gt;   /obj/x64/Debug/foobarwrapper.o: In function `foobarwrapper::ThreadEntryRoutine()':\n1&gt;   /foobarwrapper.cpp:479: undefined reference to `_foo_bar_baz()'\n1&gt;   collect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>In total there are about 30 functions that I use from this library, but only 4 of the functions generate the linker error.</p>\n\n<p>I have tried moving the -lfoobar to different places. It either makes no difference or all library functions fail to link.</p>\n\n<p>I have tried adding -lfoobar to the compilation command as per some answers/comments to similar questions, but still no love.</p>\n\n<p>What am I doing wrong here?</p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1100264"}, "edited": false, "score": 0, "creation_date": 1484151180, "post_id": 41594472, "comment_id": 70394038, "body": "data = &quot;Example data&quot;; // send data to the worker thread   data is not used"}], "answers": [{"tags": [], "owner": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "is_accepted": true, "score": 2, "last_activity_date": 1484191756, "creation_date": 1484191756, "answer_id": 41604631, "question_id": 41594472, "link": "https://stackoverflow.com/questions/41594472/how-to-ensure-wait-for-is-called-before-notify-one/41604631#41604631", "title": "How to ensure wait_for is called before notify_one", "body": "<p>Note the <a href=\"http://en.cppreference.com/w/cpp/thread/condition_variable/wait\" rel=\"nofollow noreferrer\">definition of wait</a> that uses a condition (the only wait you should ever be using):</p>\n\n<pre><code>while (!pred()) {\n    wait(lock);\n}\n</code></pre>\n\n<p>if notify was already fired it means the condition is already true (that was sequenced before notify_one in the signalling thread). So when the receiver takes the mutex and looks at pred(), it will be true and it will proceed.</p>\n"}], "owner": {"reputation": 977, "user_id": 1934675, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3fe91c1519ebe040212894af76a7b084?s=128&d=identicon&r=PG", "display_name": "noziar", "link": "https://stackoverflow.com/users/1934675/noziar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1268, "favorite_count": 0, "accepted_answer_id": 41604631, "answer_count": 1, "score": 0, "last_activity_date": 1484191756, "creation_date": 1484147776, "question_id": 41594472, "link": "https://stackoverflow.com/questions/41594472/how-to-ensure-wait-for-is-called-before-notify-one", "title": "How to ensure wait_for is called before notify_one", "body": "<p>Typical usages of condition variables look like this (see code below): <a href=\"http://en.cppreference.com/w/cpp/thread/condition_variable\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/thread/condition_variable</a>.</p>\n\n<p>However, it seems that the main thread could potentially call <code>notify_one</code> before the worker thread calls <code>wait</code>, which would result in a deadlock. Am I mistaken? If not, what is the usual workaround for this?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;thread&gt;\n#include &lt;mutex&gt;\n#include &lt;condition_variable&gt;\n\nstd::mutex m;\nstd::condition_variable cv;\nstd::string data;\nbool ready = false;\nbool processed = false;\n\nvoid worker_thread()\n{\n    // Wait until main() sends data\n    std::unique_lock&lt;std::mutex&gt; lk(m);\n    cv.wait(lk, []{return ready;});\n\n    // after the wait, we own the lock.\n    std::cout &lt;&lt; \"Worker thread is processing data\\n\";\n    data += \" after processing\";\n\n    // Send data back to main()\n    processed = true;\n    std::cout &lt;&lt; \"Worker thread signals data processing completed\\n\";\n\n    // Manual unlocking is done before notifying, to avoid waking up\n    // the waiting thread only to block again (see notify_one for details)\n    lk.unlock();\n    cv.notify_one();\n}\n\nint main()\n{\n    std::thread worker(worker_thread);\n\n    data = \"Example data\";\n    // send data to the worker thread\n    {\n        std::lock_guard&lt;std::mutex&gt; lk(m);\n        ready = true;\n        std::cout &lt;&lt; \"main() signals data ready for processing\\n\";\n    }\n    cv.notify_one();\n\n    // wait for the worker\n    {\n        std::unique_lock&lt;std::mutex&gt; lk(m);\n        cv.wait(lk, []{return processed;});\n    }\n    std::cout &lt;&lt; \"Back in main(), data = \" &lt;&lt; data &lt;&lt; '\\n';\n\n    worker.join();\n}\n</code></pre>\n"}, {"tags": ["c++", "uwp", "win-universal-app"], "answers": [{"tags": [], "owner": {"reputation": 3763, "user_id": 4585476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Xqkw.jpg?s=128&g=1", "display_name": "AVK", "link": "https://stackoverflow.com/users/4585476/avk"}, "is_accepted": true, "score": 1, "last_activity_date": 1484151320, "creation_date": 1484151320, "answer_id": 41595665, "question_id": 41594406, "link": "https://stackoverflow.com/questions/41594406/how-to-update-live-tiles-in-windows-10-using-c/41595665#41595665", "title": "How to update live tiles in windows 10 using c++", "body": "<p>Yes <code>TileUpdateManager</code> is the way to do it in Windows 10. Below is a small snippet in <code>C#</code></p>\n\n<pre><code>var updater = TileUpdateManager.CreateTileUpdaterForApplication();\nupdater.EnableNotificationQueue(true);\nXmlDocument document = new XmlDocument();\ndocument.LoadXml(content);  'content is your xml'\nTileNotification notification = new TileNotification(document);\nupdater.Update(notification);\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7339861, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bRAwn_SEKtA/AAAAAAAAAAI/AAAAAAAAKqA/utFAExqIJlg/photo.jpg?sz=128", "display_name": "Th\u1ecbnh Phan \u0110i\u1ec1n", "link": "https://stackoverflow.com/users/7339861/th%e1%bb%8bnh-phan-%c4%90i%e1%bb%81n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 41595665, "answer_count": 1, "score": 1, "last_activity_date": 1484153794, "creation_date": 1484147604, "last_edit_date": 1484153794, "question_id": 41594406, "link": "https://stackoverflow.com/questions/41594406/how-to-update-live-tiles-in-windows-10-using-c", "title": "How to update live tiles in windows 10 using c++", "body": "<p>The <code>NotificationsExtensions::TileContent</code> in windows 8.1 doesn't work in windows 10.</p>\n\n<p>Therefore, I am using TileUpdateManager for live tiles, but live tiles doesn't work.\nI am using struct like below for <code>TileUpdateManager</code> :</p>\n\n<pre><code>&lt;tile&gt;\n    &lt;visual  version='3'&gt;\n        &lt;binding template='TileSquare310x310Image' branding='name'&gt;\n            &lt;image id='1' src='ms-appx:///Assets/Tiles/310x310.png' alt='' /&gt;\n        &lt;/binding&gt;\n    &lt;/visual&gt;\n&lt;/tile&gt;\n</code></pre>\n\n<p>Is it the right way to use <code>TileUpdateManager</code> for live tiles?</p>\n\n<p>What can I use to update live tiles like NotificationsExtensions::TileContent in windows 8.1?</p>\n"}, {"tags": ["c++", "opencv", "image-processing", "computer-vision", "image-stitching"], "comments": [{"owner": {"reputation": 605, "user_id": 1688565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uYUDj.jpg?s=128&g=1", "display_name": "Abdulrahman Alhadhrami", "link": "https://stackoverflow.com/users/1688565/abdulrahman-alhadhrami"}, "edited": false, "score": 0, "creation_date": 1484213842, "post_id": 41594279, "comment_id": 70420737, "body": "Can you show us an example of how you want your result to look like?"}, {"owner": {"reputation": 2155, "user_id": 2139309, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/df1b95bd88593a9d28792231581d891f?s=128&d=identicon&r=PG", "display_name": "gasparuff", "link": "https://stackoverflow.com/users/2139309/gasparuff"}, "reply_to_user": {"reputation": 605, "user_id": 1688565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uYUDj.jpg?s=128&g=1", "display_name": "Abdulrahman Alhadhrami", "link": "https://stackoverflow.com/users/1688565/abdulrahman-alhadhrami"}, "edited": false, "score": 0, "creation_date": 1484244021, "post_id": 41594279, "comment_id": 70441283, "body": "@alhadhrami Of course. I have added some details to the question."}, {"owner": {"reputation": 605, "user_id": 1688565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uYUDj.jpg?s=128&g=1", "display_name": "Abdulrahman Alhadhrami", "link": "https://stackoverflow.com/users/1688565/abdulrahman-alhadhrami"}, "edited": false, "score": 0, "creation_date": 1484464071, "post_id": 41594279, "comment_id": 70516017, "body": "you misunderstood me. I was asking to see an example of a correct output, an output that you would like you code to create. @gasparuff"}, {"owner": {"reputation": 605, "user_id": 1688565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uYUDj.jpg?s=128&g=1", "display_name": "Abdulrahman Alhadhrami", "link": "https://stackoverflow.com/users/1688565/abdulrahman-alhadhrami"}, "edited": false, "score": 0, "creation_date": 1484464146, "post_id": 41594279, "comment_id": 70516033, "body": "In addition, can you provide the two images so that I can run tests of my own?"}, {"owner": {"reputation": 2155, "user_id": 2139309, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/df1b95bd88593a9d28792231581d891f?s=128&d=identicon&r=PG", "display_name": "gasparuff", "link": "https://stackoverflow.com/users/2139309/gasparuff"}, "reply_to_user": {"reputation": 605, "user_id": 1688565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uYUDj.jpg?s=128&g=1", "display_name": "Abdulrahman Alhadhrami", "link": "https://stackoverflow.com/users/1688565/abdulrahman-alhadhrami"}, "edited": false, "score": 0, "creation_date": 1484837589, "post_id": 41594279, "comment_id": 70682277, "body": "Hi @alhadhrami. Sorry for my late response, lots of things were going on. I&#39;ll update my question tonight and add the information you asked for. Thank you"}, {"owner": {"reputation": 2155, "user_id": 2139309, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/df1b95bd88593a9d28792231581d891f?s=128&d=identicon&r=PG", "display_name": "gasparuff", "link": "https://stackoverflow.com/users/2139309/gasparuff"}, "reply_to_user": {"reputation": 605, "user_id": 1688565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uYUDj.jpg?s=128&g=1", "display_name": "Abdulrahman Alhadhrami", "link": "https://stackoverflow.com/users/1688565/abdulrahman-alhadhrami"}, "edited": false, "score": 0, "creation_date": 1484849675, "post_id": 41594279, "comment_id": 70690179, "body": "Question is updated :-)"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1485426618, "post_id": 41594279, "comment_id": 70924761, "body": "in your desired result, are you sure about the discontinuities at that blue &quot;spikes&quot; near the middle of the images and the parts on the far-right? It looks like you want &quot;some&quot; parts to be continuous and others not, is there any rule behind this?"}, {"owner": {"reputation": 937, "user_id": 3518179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D1RwU.png?s=128&g=1", "display_name": "Flocke", "link": "https://stackoverflow.com/users/3518179/flocke"}, "edited": false, "score": 0, "creation_date": 1485456624, "post_id": 41594279, "comment_id": 70943716, "body": "You could try a Hough Algorithm for deskewing pictures to find &quot;irritations&quot; in your aligned images and repeat that algorithm until all your desired lines are ... well lined up :-)"}, {"owner": {"reputation": 2155, "user_id": 2139309, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/df1b95bd88593a9d28792231581d891f?s=128&d=identicon&r=PG", "display_name": "gasparuff", "link": "https://stackoverflow.com/users/2139309/gasparuff"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1485549415, "post_id": 41594279, "comment_id": 70987378, "body": "@Micka yes, those can be ignored. If they exceed a certain distance, they shouldn&#39;t have any impact on the transformation matrix."}, {"owner": {"reputation": 2155, "user_id": 2139309, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/df1b95bd88593a9d28792231581d891f?s=128&d=identicon&r=PG", "display_name": "gasparuff", "link": "https://stackoverflow.com/users/2139309/gasparuff"}, "reply_to_user": {"reputation": 937, "user_id": 3518179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D1RwU.png?s=128&g=1", "display_name": "Flocke", "link": "https://stackoverflow.com/users/3518179/flocke"}, "edited": false, "score": 0, "creation_date": 1485549554, "post_id": 41594279, "comment_id": 70987451, "body": "@Flocke Yeah, I stumbled across the hough algorithm yesterday and started thinking about how I could use that to solve my problem. Unfortunately I have no clue how to do that"}], "answers": [{"comments": [{"owner": {"reputation": 2155, "user_id": 2139309, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/df1b95bd88593a9d28792231581d891f?s=128&d=identicon&r=PG", "display_name": "gasparuff", "link": "https://stackoverflow.com/users/2139309/gasparuff"}, "edited": false, "score": 0, "creation_date": 1485373350, "post_id": 41833416, "comment_id": 70904290, "body": "Thanks for that input. Indeed I have checked that out but the results aren&#39;t really useful yet. I&#39;m still figuring out."}], "tags": [], "owner": {"reputation": 103, "user_id": 6917291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53822271e3fa4ef68362973194843651?s=128&d=identicon&r=PG&f=1", "display_name": "Rodrigo Maller Martins", "link": "https://stackoverflow.com/users/6917291/rodrigo-maller-martins"}, "is_accepted": false, "score": 5, "last_activity_date": 1485275438, "creation_date": 1485275438, "answer_id": 41833416, "question_id": 41594279, "link": "https://stackoverflow.com/questions/41594279/how-to-align-2-images-based-on-their-content-with-opencv/41833416#41833416", "title": "How to align 2 images based on their content with OpenCV", "body": "<p>By your images, it seems that they overlap. Since you said the <code>stitch</code> function didn't get you the desired results, implement your own stitching. I'm trying to do something close to that too. Here is a tutorial on how to implement it in c++: <a href=\"https://ramsrigoutham.com/2012/11/22/panorama-image-stitching-in-opencv/\">https://ramsrigoutham.com/2012/11/22/panorama-image-stitching-in-opencv/</a></p>\n"}, {"comments": [{"owner": {"reputation": 2155, "user_id": 2139309, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/df1b95bd88593a9d28792231581d891f?s=128&d=identicon&r=PG", "display_name": "gasparuff", "link": "https://stackoverflow.com/users/2139309/gasparuff"}, "edited": false, "score": 0, "creation_date": 1485551382, "post_id": 41889746, "comment_id": 70988379, "body": "Thanks for your valuable input. Although I don&#39;t really know how to put this theory into code. Your UPDATE 2 is something I have been thinking about as well. But I need to find out how CCF works."}, {"owner": {"reputation": 1127, "user_id": 4295805, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/g7bWV.jpg?s=128&g=1", "display_name": "Leontyev Georgiy", "link": "https://stackoverflow.com/users/4295805/leontyev-georgiy"}, "reply_to_user": {"reputation": 2155, "user_id": 2139309, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/df1b95bd88593a9d28792231581d891f?s=128&d=identicon&r=PG", "display_name": "gasparuff", "link": "https://stackoverflow.com/users/2139309/gasparuff"}, "edited": false, "score": 0, "creation_date": 1485554562, "post_id": 41889746, "comment_id": 70989960, "body": "@gasparuff CCF(A, B) == REV_FFT(FFT(A)*CONJ(FFT(B))), where A, B - input vectors of power of 2 length, fill remainders with zeroes, FFT is fast Fourier transform, and REV_FFT is a reverse one, CONJ is complex conjugate. A and B&#39;s imaginary parts are zeroes initially, real parts are greyscale values of corresponding pixel lines. CCF&#39;s result is complex too, gotta transform it to (re^2)+(im^2) for every element."}, {"owner": {"reputation": 1127, "user_id": 4295805, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/g7bWV.jpg?s=128&g=1", "display_name": "Leontyev Georgiy", "link": "https://stackoverflow.com/users/4295805/leontyev-georgiy"}, "reply_to_user": {"reputation": 2155, "user_id": 2139309, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/df1b95bd88593a9d28792231581d891f?s=128&d=identicon&r=PG", "display_name": "gasparuff", "link": "https://stackoverflow.com/users/2139309/gasparuff"}, "edited": false, "score": 0, "creation_date": 1485554640, "post_id": 41889746, "comment_id": 70990002, "body": "Maximum element of result will deliver the shift you need."}, {"owner": {"reputation": 2155, "user_id": 2139309, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/df1b95bd88593a9d28792231581d891f?s=128&d=identicon&r=PG", "display_name": "gasparuff", "link": "https://stackoverflow.com/users/2139309/gasparuff"}, "edited": false, "score": 0, "creation_date": 1485963144, "post_id": 41889746, "comment_id": 71144862, "body": "Can you show me an example of how to implement that? I&#39;m still looking for an answer :-("}], "tags": [], "owner": {"reputation": 1127, "user_id": 4295805, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/g7bWV.jpg?s=128&g=1", "display_name": "Leontyev Georgiy", "link": "https://stackoverflow.com/users/4295805/leontyev-georgiy"}, "is_accepted": false, "score": 3, "last_activity_date": 1485532042, "last_edit_date": 1485532042, "creation_date": 1485506095, "answer_id": 41889746, "question_id": 41594279, "link": "https://stackoverflow.com/questions/41594279/how-to-align-2-images-based-on-their-content-with-opencv/41889746#41889746", "title": "How to align 2 images based on their content with OpenCV", "body": "<p>You can use Hough algorithm with high threshold on two images and then compare the vertical lines on both of them - most of them should be shifted a bit, but keep the angle.</p>\n\n<p>This is what I've got from running this algorithm on one of the pictures:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Hrta7.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Hrta7.jpg\" alt=\"Houghlines algorithm on first example\"></a></p>\n\n<p>Filtering out horizontal lines should be easy(as they are represented as Vec4i), and then you can align the remaining lines together.</p>\n\n<p>Here is the example of using it in <a href=\"https://github.com/opencv/opencv/blob/master/samples/cpp/houghlines.cpp\" rel=\"nofollow noreferrer\">OpenCV's documentation</a>.</p>\n\n<p>UPDATE: another thought. Aligning the lines together can be done with the concept similar to how cross-correlation function works. Doesn't matter if picture 1 has 10 lines, and picture 2 has 100 lines, position of shift with <em>most</em> lines aligned(which is, mostly, the maximum for CCF) should be pretty close to the answer, though this might require some tweaking - for example giving weight to every line based on its length, angle, etc. Computer vision never has a direct way, huh :)</p>\n\n<p>UPDATE 2: I actually wonder if taking bottom pixels line of top image as an array 1\u00a0and top pixels line\u00a0of bottom image as array 2 and running general CCF over them, then using its maximum as shift could work too... But I think it would be a known method if it worked good.</p>\n"}], "owner": {"reputation": 2155, "user_id": 2139309, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/df1b95bd88593a9d28792231581d891f?s=128&d=identicon&r=PG", "display_name": "gasparuff", "link": "https://stackoverflow.com/users/2139309/gasparuff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2855, "favorite_count": 5, "answer_count": 2, "score": 14, "last_activity_date": 1485532042, "creation_date": 1484147298, "last_edit_date": 1485198974, "question_id": 41594279, "link": "https://stackoverflow.com/questions/41594279/how-to-align-2-images-based-on-their-content-with-opencv", "title": "How to align 2 images based on their content with OpenCV", "body": "<p>I am totally new to OpenCV and I have started to dive into it. But I'd need a little bit of help.</p>\n\n<p>So I want to combine these 2 images:</p>\n\n<p><a href=\"https://i.stack.imgur.com/48Fu2.jpg\"><img src=\"https://i.stack.imgur.com/48Fu2.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I would like the 2 images to match along their edges (ignoring the very right part of the image for now)</p>\n\n<p>Can anyone please point me into the right direction? I have tried using the <code>findTransformECC</code> function. Here's my implementation:</p>\n\n<pre><code>cv::Mat im1 = [imageArray[1] CVMat3];\ncv::Mat im2 = [imageArray[0] CVMat3];\n\n// Convert images to gray scale;\ncv::Mat im1_gray, im2_gray;\ncvtColor(im1, im1_gray, CV_BGR2GRAY);\ncvtColor(im2, im2_gray, CV_BGR2GRAY);\n\n// Define the motion model\nconst int warp_mode = cv::MOTION_AFFINE;\n\n// Set a 2x3 or 3x3 warp matrix depending on the motion model.\ncv::Mat warp_matrix;\n\n// Initialize the matrix to identity\nif ( warp_mode == cv::MOTION_HOMOGRAPHY )\n    warp_matrix = cv::Mat::eye(3, 3, CV_32F);\nelse\n    warp_matrix = cv::Mat::eye(2, 3, CV_32F);\n\n// Specify the number of iterations.\nint number_of_iterations = 50;\n\n// Specify the threshold of the increment\n// in the correlation coefficient between two iterations\ndouble termination_eps = 1e-10;\n\n// Define termination criteria\ncv::TermCriteria criteria (cv::TermCriteria::COUNT+cv::TermCriteria::EPS,   number_of_iterations, termination_eps);\n\n// Run the ECC algorithm. The results are stored in warp_matrix.\nfindTransformECC(\n                 im1_gray,\n                 im2_gray,\n                 warp_matrix,\n                 warp_mode,\n                 criteria\n                 );\n\n// Storage for warped image.\ncv::Mat im2_aligned;\n\nif (warp_mode != cv::MOTION_HOMOGRAPHY)\n    // Use warpAffine for Translation, Euclidean and Affine\n    warpAffine(im2, im2_aligned, warp_matrix, im1.size(), cv::INTER_LINEAR + cv::WARP_INVERSE_MAP);\nelse\n    // Use warpPerspective for Homography\n    warpPerspective (im2, im2_aligned, warp_matrix, im1.size(),cv::INTER_LINEAR + cv::WARP_INVERSE_MAP);\n\n\nUIImage* result =  [UIImage imageWithCVMat:im2_aligned];\nreturn result;\n</code></pre>\n\n<p>I have tried playing around with the <code>termination_eps</code> and <code>number_of_iterations</code> and increased/decreased those values, but they didn't really make a big difference.</p>\n\n<p>So here's the result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/W8rVB.jpg\"><img src=\"https://i.stack.imgur.com/W8rVB.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>What can I do to improve my result?</p>\n\n<p>EDIT: I have marked the problematic edges with red circles. The goal is to warp the bottom image and make it match with the lines from the image above: </p>\n\n<p><a href=\"https://i.stack.imgur.com/8c8P1.jpg\"><img src=\"https://i.stack.imgur.com/8c8P1.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I did a little bit of research and I'm afraid the <code>findTransformECC</code> function won't give me the result I'd like to have :-(</p>\n\n<p>Something important to add: \nI actually have an array of those image \"stripes\", 8 in this case, they all look similar to the images shown here and they all need to be processed to match the line. I have tried experimenting with the <code>stitch</code> function of OpenCV, but the results were horrible.</p>\n\n<p>EDIT:</p>\n\n<p>Here are the 3 source images:</p>\n\n<p><a href=\"https://i.stack.imgur.com/zOZyw.jpg\"><img src=\"https://i.stack.imgur.com/zOZyw.jpg\" alt=\"1\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/VEdrJ.jpg\"><img src=\"https://i.stack.imgur.com/VEdrJ.jpg\" alt=\"2\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/fn2IK.jpg\"><img src=\"https://i.stack.imgur.com/fn2IK.jpg\" alt=\"3\"></a></p>\n\n<p>The result should be something like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Op8cx.jpg\"><img src=\"https://i.stack.imgur.com/Op8cx.jpg\" alt=\"result\"></a></p>\n\n<p>I transformed every image along the lines that should match. Lines that are too far away from each other can be ignored (the shadow and the piece of road on the right portion of the image)</p>\n"}, {"tags": ["c++", "templates", "overloading", "template-specialization", "overload-resolution"], "comments": [{"owner": {"reputation": 491, "user_id": 794077, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/40ryI.jpg?s=128&g=1", "display_name": "Jordan", "link": "https://stackoverflow.com/users/794077/jordan"}, "edited": false, "score": 0, "creation_date": 1484147491, "post_id": 41594216, "comment_id": 70391626, "body": "@Rakete1111 you&#39;re right. Edited."}], "answers": [{"tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": false, "score": 5, "last_activity_date": 1484148797, "last_edit_date": 1484148797, "creation_date": 1484147771, "answer_id": 41594471, "question_id": 41594216, "link": "https://stackoverflow.com/questions/41594216/function-specialisation-overloading-rules-example/41594471#41594471", "title": "Function specialisation / overloading rules example", "body": "<p>Explanations in comments:</p>\n\n<pre><code>// the 1st primary function template, overloaded function template\ntemplate&lt;typename T&gt;\nvoid foo(T t)\n\n// full template specialization of the 1st function template with T = int*\ntemplate&lt;&gt;\nvoid foo&lt;int*&gt;(int* l)\n\n// the 2nd primary function template, overloaded function template\ntemplate&lt;typename T&gt;\nvoid foo(T* l)\n\n// non-template function, overloaded function\nvoid foo(int* l)\n\nint main()\n{\n    int x = 0;\n    foo(x);  // only match the 1st function template; the others take pointer as parameter\n    foo(&amp;x); // call the non-template function, which is prior to templates in overload resolution\n    return 0;\n}\n</code></pre>\n\n<p>See more details about <a href=\"http://en.cppreference.com/w/cpp/language/overload_resolution#Best_viable_function\" rel=\"nofollow noreferrer\">overload resolution</a> and <a href=\"http://en.cppreference.com/w/cpp/language/template_specialization\" rel=\"nofollow noreferrer\">explicit (full) template specialization</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 826, "user_id": 6275792, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-V7eW4xIbvAM/AAAAAAAAAAI/AAAAAAAAABw/NnFeMvvj2o4/photo.jpg?sz=128", "display_name": "Pavel Golubev", "link": "https://stackoverflow.com/users/6275792/pavel-golubev"}, "edited": false, "score": 0, "creation_date": 1484148498, "post_id": 41594473, "comment_id": 70392268, "body": "It is worth mentioning that overload resolution only selects a base template, so 2) can&#39;t be chosen before overload resolution. <a href=\"http://www.gotw.ca/publications/mill17.htm\" rel=\"nofollow noreferrer\">gotw.ca/publications/mill17.htm</a>"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 826, "user_id": 6275792, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-V7eW4xIbvAM/AAAAAAAAAAI/AAAAAAAAABw/NnFeMvvj2o4/photo.jpg?sz=128", "display_name": "Pavel Golubev", "link": "https://stackoverflow.com/users/6275792/pavel-golubev"}, "edited": false, "score": 0, "creation_date": 1484148625, "post_id": 41594473, "comment_id": 70392348, "body": "@VS Do you mean that the base template overload never gets selected because there is the specialization"}, {"owner": {"reputation": 826, "user_id": 6275792, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-V7eW4xIbvAM/AAAAAAAAAAI/AAAAAAAAABw/NnFeMvvj2o4/photo.jpg?sz=128", "display_name": "Pavel Golubev", "link": "https://stackoverflow.com/users/6275792/pavel-golubev"}, "edited": false, "score": 1, "creation_date": 1484148937, "post_id": 41594473, "comment_id": 70392538, "body": "&quot;Only after it&#39;s been decided which base template is going to be selected, and that choice is locked in, will the compiler look around to see if there happens to be a suitable specialization of that template available, and if so that specialization will get used.&quot; So, i mean that template specialization is looked AFTER overload."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 826, "user_id": 6275792, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-V7eW4xIbvAM/AAAAAAAAAAI/AAAAAAAAABw/NnFeMvvj2o4/photo.jpg?sz=128", "display_name": "Pavel Golubev", "link": "https://stackoverflow.com/users/6275792/pavel-golubev"}, "edited": false, "score": 0, "creation_date": 1484149034, "post_id": 41594473, "comment_id": 70392613, "body": "@VS Ah, I see what you mean. Thanks for the info :)"}, {"owner": {"reputation": 491, "user_id": 794077, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/40ryI.jpg?s=128&g=1", "display_name": "Jordan", "link": "https://stackoverflow.com/users/794077/jordan"}, "edited": false, "score": 0, "creation_date": 1484149052, "post_id": 41594473, "comment_id": 70392625, "body": "In the absence of function(4), why is function(3) given precedence over function(2). Note I numbered the functions above."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 491, "user_id": 794077, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/40ryI.jpg?s=128&g=1", "display_name": "Jordan", "link": "https://stackoverflow.com/users/794077/jordan"}, "edited": false, "score": 0, "creation_date": 1484149346, "post_id": 41594473, "comment_id": 70392824, "body": "@Jordan non-specialized templates are better matches than specialized ones"}, {"owner": {"reputation": 491, "user_id": 794077, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/40ryI.jpg?s=128&g=1", "display_name": "Jordan", "link": "https://stackoverflow.com/users/794077/jordan"}, "edited": false, "score": 0, "creation_date": 1484149634, "post_id": 41594473, "comment_id": 70392987, "body": "@Rakete1111 Am I correct in saying function(3) is trying to be a partial specialisation. But due to that not being allowed for functions, it is actually an overload? If so, is there a difference between a function overload and a template function overload?"}, {"owner": {"reputation": 826, "user_id": 6275792, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-V7eW4xIbvAM/AAAAAAAAAAI/AAAAAAAAABw/NnFeMvvj2o4/photo.jpg?sz=128", "display_name": "Pavel Golubev", "link": "https://stackoverflow.com/users/6275792/pavel-golubev"}, "reply_to_user": {"reputation": 491, "user_id": 794077, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/40ryI.jpg?s=128&g=1", "display_name": "Jordan", "link": "https://stackoverflow.com/users/794077/jordan"}, "edited": false, "score": 2, "creation_date": 1484149730, "post_id": 41594473, "comment_id": 70393054, "body": "@Jordan function(3) is not a partial specialization."}], "tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": true, "score": 1, "last_activity_date": 1484149250, "last_edit_date": 1484149250, "creation_date": 1484147780, "answer_id": 41594473, "question_id": 41594216, "link": "https://stackoverflow.com/questions/41594216/function-specialisation-overloading-rules-example/41594473#41594473", "title": "Function specialisation / overloading rules example", "body": "<p>Let's go through the first call, <code>foo(x)</code>.</p>\n\n<p><code>int</code> can't be written as a pointer, unable to deduce parameter, next</p>\n\n<pre><code>void foo(int* l);\n</code></pre>\n\n<p>Can't convert <code>int</code> to <code>int*</code> implicitly, next</p>\n\n<pre><code>template&lt;typename T&gt;\nvoid foo(T t);\n</code></pre>\n\n<p>That seems like a good match, like remember it as 2). Next</p>\n\n<pre><code>template&lt;&gt;\nvoid foo&lt;int*&gt;(int* l);\n</code></pre>\n\n<p>Can't convert <code>int</code> to <code>int*</code> implicitly, next</p>\n\n<pre><code>template&lt;typename T&gt;\nvoid foo(T* l)\n</code></pre>\n\n<p>So, the only possible match is 2), and so <code>template&lt;T&gt; foo(T)</code> is the output.</p>\n\n<hr>\n\n<p>Second call, <code>foo(&amp;x)</code>.</p>\n\n<pre><code>void foo(int* l);\n</code></pre>\n\n<p>A non-template function which matches perfectly the type of <code>x</code>. Let's remember this one.</p>\n\n<pre><code>template&lt;typename T&gt;\nvoid foo(T t);\n</code></pre>\n\n<p>Good match! But the previous one is still better, next</p>\n\n<pre><code>template&lt;&gt;\nvoid foo&lt;int*&gt;(int* l);\n</code></pre>\n\n<p>Oh, a specialization of the previous template which exactly matches the type, that's better, but 1) is still the better match. Next</p>\n\n<pre><code>template&lt;typename T&gt;\nvoid foo(T* l)\n</code></pre>\n\n<p>Better than a specialization, a template without, but doesn't beat the non-template one.</p>\n\n<p>And so, in the end, the non-template function is called. Non-templates are <em>always</em> better than templates.</p>\n"}, {"comments": [{"owner": {"reputation": 826, "user_id": 6275792, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-V7eW4xIbvAM/AAAAAAAAAAI/AAAAAAAAABw/NnFeMvvj2o4/photo.jpg?sz=128", "display_name": "Pavel Golubev", "link": "https://stackoverflow.com/users/6275792/pavel-golubev"}, "edited": false, "score": 0, "creation_date": 1484149632, "post_id": 41594841, "comment_id": 70392985, "body": "In the absence of specialized function <code>void foo(int* l)</code>, <code>template&lt;typename T&gt; void foo(T* l)</code> will be called for <code>foo(&amp;x)</code> call."}], "tags": [], "owner": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1484150504, "last_edit_date": 1484150504, "creation_date": 1484148815, "answer_id": 41594841, "question_id": 41594216, "link": "https://stackoverflow.com/questions/41594216/function-specialisation-overloading-rules-example/41594841#41594841", "title": "Function specialisation / overloading rules example", "body": "<p>Resolution of <code>foo(x)</code> is easy to spot, as there are no candidate functions other than <code>template&lt;typename T&gt; void foo(T t)</code>. </p>\n\n<p>So our problem reduces to : <strong>Why <code>void foo(int* l)</code> for <code>foo(&amp;x)</code> call?</strong></p>\n\n<ol>\n<li>To call the template method <code>template&lt;&gt; void foo&lt;int*&gt;(int* l)</code>\n, you need to call <code>foo&lt;int*&gt;(&amp;x)</code></li>\n<li><code>template&lt;typename T&gt; void foo(T* l)</code> by calling <code>foo&lt;int&gt;(&amp;x)</code></li>\n<li><code>template&lt;typename T&gt; void foo(T t)</code>  by calling <code>foo&lt;int*&gt;(&amp;x)</code></li>\n</ol>\n\n<p>As you can see, calling <code>foo(&amp;x)</code> doesn't matches with any of the above mentioned three styles of calling with explicit templates.</p>\n\n<p>Note that in the absence of specialised function <code>void foo(int* l)</code>, function call <code>foo&lt;int*&gt;(&amp;x)</code> would be resolved by a specialised <em>template-function</em> <code>template&lt;&gt; void foo&lt;int*&gt;(int* l)</code> beating a non-specialised <em>template-function</em>  <code>template&lt;typename T&gt; void foo(T t)</code></p>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 7404984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9add1d44e2bd43b6f6175f3af831bc32?s=128&d=identicon&r=PG&f=1", "display_name": "sicarii443", "link": "https://stackoverflow.com/users/7404984/sicarii443"}, "is_accepted": false, "score": 0, "last_activity_date": 1484149002, "creation_date": 1484149002, "answer_id": 41594888, "question_id": 41594216, "link": "https://stackoverflow.com/questions/41594216/function-specialisation-overloading-rules-example/41594888#41594888", "title": "Function specialisation / overloading rules example", "body": "<p>when trying to determine what function is called when overloading, the rule is: always find the function that requires the least optimization to be used.</p>\n\n<p>when foo() is called with int, the only function that can be used is the first, since you can't convert int to int*.</p>\n\n<p>when using it with int*:<br>\nfunction 4 can be used without any optimization.<br>\nfunction 3 needs to change T->int in order to run.<br>\nfunction 1 needs to change T to pointer-type, and determine that T points to int.<br>\nfunction 2 is a specialization of function 1  </p>\n\n<p>so function 4 can be used immediately, function 2 needs to update template type, and functions 1,2 needs to update template type, and object type.<br>\nso they are called in that order: 4 then 3 then 2 then 1</p>\n"}], "owner": {"reputation": 491, "user_id": 794077, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/40ryI.jpg?s=128&g=1", "display_name": "Jordan", "link": "https://stackoverflow.com/users/794077/jordan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 41594473, "answer_count": 4, "score": 5, "last_activity_date": 1484150504, "creation_date": 1484147095, "last_edit_date": 1484148408, "question_id": 41594216, "link": "https://stackoverflow.com/questions/41594216/function-specialisation-overloading-rules-example", "title": "Function specialisation / overloading rules example", "body": "<p>I understand you can't partially specialise a function template, I also understand typical function overloading.</p>\n\n<p>Where I need help is in grokking the difference between the below 4 foo() functions. I expect a few of them are different syntax for exactly the same thing?</p>\n\n<p>Could somebody more knowledgeable explain for each function what exactly is happening with regards to is it a template specialisation or overload, and how does the c++ compiler determine what to invoke?</p>\n\n<pre><code>//(1)\ntemplate&lt;typename T&gt;\nvoid foo(T t)\n{\n    cout &lt;&lt; \"template&lt;T&gt; foo(T) \" &lt;&lt; endl;\n}\n\n//(2)\ntemplate&lt;&gt;\nvoid foo&lt;int*&gt;(int* l)\n{\n    cout &lt;&lt; \"template&lt;&gt; foo&lt;int*&gt;(int*) \" &lt;&lt; endl;\n}\n\n//(3)\ntemplate&lt;typename T&gt;\nvoid foo(T* l)\n{\n    cout &lt;&lt; \"template&lt;T&gt; foo(T*) \" &lt;&lt; endl;\n}\n\n//(4)\nvoid foo(int* l)\n{\n    cout &lt;&lt; \"normal overload foo(int*) \" &lt;&lt; endl;\n}\n\nint main()\n{\n    int x = 0;\n    foo(x);\n    foo(&amp;x);\n    return 0;\n}\n</code></pre>\n\n<p>Program Output:</p>\n\n<pre><code>template&lt;T&gt; foo(T)\nnormal overload foo(int*)\n</code></pre>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1484147150, "post_id": 41594186, "comment_id": 70391390, "body": "&quot;I understand that only one user-defined conversion is allowed.&quot; I always thought that the compiler is allowed to implicitly change the type 2 times."}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "edited": false, "score": 1, "creation_date": 1484147221, "post_id": 41594186, "comment_id": 70391451, "body": "&quot;Is that a conversion compilers are allowed to do?&quot; No. The rule is clear, MSVC is wrong."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1484147923, "post_id": 41594186, "comment_id": 70391899, "body": "Does <code>&#47;Za</code> change MSVC&#39;s behaviour? I&#39;m too lazy to check and I don&#39;t necessarily recommend using the flag, I&#39;m just asking out of interest."}, {"owner": {"reputation": 8820, "user_id": 2428389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90de97b22aac97ec9a43a95412ac3692?s=128&d=identicon&r=PG", "display_name": "steveire", "link": "https://stackoverflow.com/users/2428389/steveire"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1484149564, "post_id": 41594186, "comment_id": 70392946, "body": "@ChristianHackl Yes, that does change behavior. I have updated the post."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 1, "creation_date": 1484149823, "post_id": 41594186, "comment_id": 70393122, "body": "@steveire: Thanks! It&#39;s such a pity that <code>&#47;Za</code> support does not get more attention from Microsoft. The flag removes so many ISO-standard violations, but it&#39;s incredibly to hard to use in real code because <code>&lt;windows.h&gt;</code> is not compatible with it, and it has also caused trouble with one or two standard headers in the past."}, {"owner": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 2, "creation_date": 1484608185, "post_id": 41594186, "comment_id": 70570161, "body": "Just a note to say that, while <code>&#47;Za</code> is unusable in practice, the latest MSVC 2017 RC using the new <code>&#47;permissive-</code> option correctly rejects the code (with the same error message). cc @ChristianHackl"}, {"owner": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "edited": false, "score": 1, "creation_date": 1484608466, "post_id": 41594186, "comment_id": 70570242, "body": "Regarding the question(s), I think a proper answer would essentially duplicate a lot of existing, good reference material on the difference between copy-initialization and direct-initialization, overload resolution, and implicit conversion sequences. I&#39;d say you&#39;d be better off looking those up and working through them. It will take some time; the topic is complex."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "edited": false, "score": 1, "creation_date": 1484638658, "post_id": 41594186, "comment_id": 70579014, "body": "@bogdan: Wow, that sounds great. <a href=\"https://blogs.msdn.microsoft.com/vcblog/2016/11/16/permissive-switch/\" rel=\"nofollow noreferrer\">blogs.msdn.microsoft.com/vcblog/2016/11/16/permissive-switch</a> says &quot;Visual Studio 2017 RC will feature a mode much closer to ISO C++ standards conformance than any time in its history&quot; and &quot;the /permissive- switch [...] will one day become the default mode for the Visual C++ compiler&quot;. Good news for C++ :)"}, {"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "edited": false, "score": 1, "creation_date": 1484685761, "post_id": 41594186, "comment_id": 70608699, "body": "While this was not the question, if you just wanted to make it work, add sg. like: <code>template&lt;typename T&gt; YourString(T t) : YourString(static_cast&lt;const char*&gt;(t)) {}</code>"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1484691701, "post_id": 41594186, "comment_id": 70611659, "body": "Regarding &quot;I understand that only one user-defined conversion is allowed.&quot;, that&#39;s a simplification. The now deprecated <code>std::auto_ptr</code> relied on a conversion sequence where an rvalue initializer was converted to a helper class instance, which in turn was accepted by an <code>auto_ptr</code> constructor. I put a <a href=\"http://coliru.stacked-crooked.com/a/acbea09a3046d6bb\" rel=\"nofollow noreferrer\">demo at Coliru</a>."}, {"owner": {"reputation": 8820, "user_id": 2428389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90de97b22aac97ec9a43a95412ac3692?s=128&d=identicon&r=PG", "display_name": "steveire", "link": "https://stackoverflow.com/users/2428389/steveire"}, "reply_to_user": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "edited": false, "score": 0, "creation_date": 1484698699, "post_id": 41594186, "comment_id": 70614117, "body": "@bogdan Much of SO is duplication of other sources, including official documentation."}], "answers": [{"comments": [{"owner": {"reputation": 8820, "user_id": 2428389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90de97b22aac97ec9a43a95412ac3692?s=128&d=identicon&r=PG", "display_name": "steveire", "link": "https://stackoverflow.com/users/2428389/steveire"}, "edited": false, "score": 0, "creation_date": 1484614482, "post_id": 41687158, "comment_id": 70571917, "body": "I didn&#39;t claim they were equivalent either, but you word your answer as if I did. I guess you are referring to my question about why MSVC is doing what it does. I&#39;m looking for an explanation of why an implicit conversion+implicit constructor is acceptable. Thanks for your answer, but I&#39;m looking for something meatier."}, {"owner": {"reputation": 8820, "user_id": 2428389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90de97b22aac97ec9a43a95412ac3692?s=128&d=identicon&r=PG", "display_name": "steveire", "link": "https://stackoverflow.com/users/2428389/steveire"}, "edited": false, "score": 0, "creation_date": 1484748615, "post_id": 41687158, "comment_id": 70637653, "body": "&quot;The first approach uses the constructor <code>YourString() {}</code>&quot; -- I removed this constructor (and the first case of the main code) and MSVC still accepted it by default without warning. How can what you said be true if there is no default constructor?"}, {"owner": {"reputation": 58, "user_id": 7390790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21146d8d6654287d77019210537e26bc?s=128&d=identicon&r=PG&f=1", "display_name": "Gilles Schreuder", "link": "https://stackoverflow.com/users/7390790/gilles-schreuder"}, "reply_to_user": {"reputation": 8820, "user_id": 2428389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90de97b22aac97ec9a43a95412ac3692?s=128&d=identicon&r=PG", "display_name": "steveire", "link": "https://stackoverflow.com/users/2428389/steveire"}, "edited": false, "score": 1, "creation_date": 1484755737, "post_id": 41687158, "comment_id": 70642881, "body": "I am not sure if I understand well what you mean. When you remove the first case of the main code, you remove the part that I referred to as the first approach."}], "tags": [], "owner": {"reputation": 58, "user_id": 7390790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21146d8d6654287d77019210537e26bc?s=128&d=identicon&r=PG&f=1", "display_name": "Gilles Schreuder", "link": "https://stackoverflow.com/users/7390790/gilles-schreuder"}, "is_accepted": false, "score": 0, "last_activity_date": 1484612589, "creation_date": 1484612589, "answer_id": 41687158, "question_id": 41594186, "link": "https://stackoverflow.com/questions/41594186/what-rules-govern-use-of-multiple-user-defined-conversions-between-types/41687158#41687158", "title": "What rules govern use of multiple user-defined conversions between types?", "body": "<p>First of all</p>\n\n<pre><code>YourString yoursWorks;\nyoursWorks = mys;\n</code></pre>\n\n<p>is not equivalent to</p>\n\n<pre><code>YourString yoursAlsoWorks(mys);\n</code></pre>\n\n<p>or to</p>\n\n<pre><code>YourString yoursBreaks = (const char*) mys;\n</code></pre>\n\n<p>The first approach uses the constructor </p>\n\n<pre><code>YourString() {}\n</code></pre>\n\n<p>followed by MyString's conversion operator, and YourString's \nassignment operator.</p>\n\n<p>The second approach uses the constructor</p>\n\n<pre><code>YourString(const char* ptr) {(void)ptr;}\n</code></pre>\n\n<p>and MyString's conversion operator.</p>\n\n<p>(This might be demonstrated by adding trace statements to the constructors.)</p>\n\n<p>Then, when the (const char*) cast is missing from the last statement,\nMSVC will assume that it should be added implicitly.\nWhile this looks a reasonable approach, it conflicts the description\nin Stroustrup's book The C++ Programming Language 4th edition:</p>\n\n<blockquote>\n  <p>18.4 Type Conversion\n       ... \n      explicit, that is, the conversion is only performed in a direct initialization i.e., as an initializer not using\n  a =. \n      ...</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 8820, "user_id": 2428389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90de97b22aac97ec9a43a95412ac3692?s=128&d=identicon&r=PG", "display_name": "steveire", "link": "https://stackoverflow.com/users/2428389/steveire"}, "edited": false, "score": 0, "creation_date": 1484748897, "post_id": 41688134, "comment_id": 70637855, "body": "Thanks for your answer. It seems to be that in case 2, we also need <b>both</b> a non-explicit conversion function call (to convert <code>mys</code> to <code>const char*</code>) and then a non-explicit single-argument constructor (to construct the <code>YourString</code> from a <code>const char *</code>)... Is the real difference that after doing both of those, case 3 requires a copy constructor to be called additionally?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 8820, "user_id": 2428389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90de97b22aac97ec9a43a95412ac3692?s=128&d=identicon&r=PG", "display_name": "steveire", "link": "https://stackoverflow.com/users/2428389/steveire"}, "edited": false, "score": 0, "creation_date": 1484749649, "post_id": 41688134, "comment_id": 70638441, "body": "@steveire In case 2, the single argument constructor does not have to be deduced, it&#39;s explicitly provided."}], "tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": false, "score": 1, "last_activity_date": 1484620929, "last_edit_date": 1484620929, "creation_date": 1484619833, "answer_id": 41688134, "question_id": 41594186, "link": "https://stackoverflow.com/questions/41594186/what-rules-govern-use-of-multiple-user-defined-conversions-between-types/41688134#41688134", "title": "What rules govern use of multiple user-defined conversions between types?", "body": "<p>Let's look at the rules for implicit conversions <a href=\"http://en.cppreference.com/w/cpp/language/implicit_conversion\" rel=\"nofollow noreferrer\">found here</a>. The interesting bit is this :</p>\n\n<blockquote>\n  <p>Implicit conversions are performed whenever an expression of some type T1 is used in context that does not accept that type, but accepts some other type T2; in particular: [...]when initializing a new object of type T2[...]</p>\n</blockquote>\n\n<p>And</p>\n\n<blockquote>\n  <p>A user-defined conversion consists of zero or one non-explicit single-argument constructor or non-explicit conversion function call</p>\n</blockquote>\n\n<p><strong>Case 1</strong></p>\n\n<pre><code>YourString yoursWorks;\nyoursWorks = mys;\n</code></pre>\n\n<p>In the first case, we need one non-explicit conversion function call. <code>YourString::operator=</code> expects <code>const char*</code> and is given a <code>MyString</code>. <code>MyString</code> provides a the non-explicit conversion function for this conversion.</p>\n\n<p><strong>Case 2</strong></p>\n\n<pre><code>YourString yoursAlsoWorks(mys);\n</code></pre>\n\n<p>In the second case, we again need one non-explicit conversion function call. <code>YourString::YourString</code> expects <code>const char*</code> and is given a MyString. <code>MyString</code> provides a the non-explicit conversion function for this conversion.</p>\n\n<p><strong>Case 3</strong></p>\n\n<pre><code>YourString yoursBreaks = mys;\n</code></pre>\n\n<p>The third case is different because it's not an assignment copy as it would appear. Contrary to the second case, <code>yoursBreaks</code> has not been initialized yet. You cannot call the assignment operator <code>operator=</code> on an object that hasn't been constructed yet. It's in fact an assignment by copy construction. To assign <code>mys</code> to <code>yoursBreaks</code> we need <strong>both</strong> a non-explicit conversion function call (to convert <code>mys</code> to <code>const char*</code> and <em>then</em> a non-explicit single-argument constructor (to construct the <code>YourString</code> from a <code>const char *</code>. Implicit conversions only allow for one <em>or</em> the other.</p>\n"}, {"comments": [{"owner": {"reputation": 8820, "user_id": 2428389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90de97b22aac97ec9a43a95412ac3692?s=128&d=identicon&r=PG", "display_name": "steveire", "link": "https://stackoverflow.com/users/2428389/steveire"}, "edited": false, "score": 0, "creation_date": 1484747730, "post_id": 41707564, "comment_id": 70637061, "body": "The result of <code>MyString --&gt; const char*</code> is <code>const char*</code>. There must be another change, namely <code>const char* --&gt; YourString</code>, right? Are you saying that because that is done with a <i>constructor</i> it is not a <i>conversion</i> ? If that&#39;s it, please add that to the answer. Also, it seems that part of the key here is that the case that does not work does not call <code>operator=()</code>. Is that right? If so, please make some point about that in the answer."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 8820, "user_id": 2428389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90de97b22aac97ec9a43a95412ac3692?s=128&d=identicon&r=PG", "display_name": "steveire", "link": "https://stackoverflow.com/users/2428389/steveire"}, "edited": false, "score": 0, "creation_date": 1484752190, "post_id": 41707564, "comment_id": 70640313, "body": "@steveire  I don&#39;t understand your first two questions. As for your third, yes, as noted in the answer, it&#39;s copy-initialization. I walked through what that actually means - and it does not mean <code>operator= </code>"}, {"owner": {"reputation": 8820, "user_id": 2428389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90de97b22aac97ec9a43a95412ac3692?s=128&d=identicon&r=PG", "display_name": "steveire", "link": "https://stackoverflow.com/users/2428389/steveire"}, "edited": false, "score": 0, "creation_date": 1485166238, "post_id": 41707564, "comment_id": 70795011, "body": "you said that there is one single conversion: <code>MyString --&gt; const char*</code> - however, I am not converting to <code>const char*</code> I am converting to <code>YourString</code>. So, what you said can only be half the answer. That&#39;s what &quot;my first two questions&quot; are about. Will you read them again and see if you understand them now?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 8820, "user_id": 2428389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90de97b22aac97ec9a43a95412ac3692?s=128&d=identicon&r=PG", "display_name": "steveire", "link": "https://stackoverflow.com/users/2428389/steveire"}, "edited": false, "score": 0, "creation_date": 1485176823, "post_id": 41707564, "comment_id": 70801872, "body": "@steveire In direct-initialization, you are converting <code>MyString</code> to <code>const char*</code> to invoke the <code>YourString(const char*)</code> constructor. That&#39;s one single conversion."}, {"owner": {"reputation": 8820, "user_id": 2428389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90de97b22aac97ec9a43a95412ac3692?s=128&d=identicon&r=PG", "display_name": "steveire", "link": "https://stackoverflow.com/users/2428389/steveire"}, "edited": false, "score": 0, "creation_date": 1485181815, "post_id": 41707564, "comment_id": 70805342, "body": "Then the answer to my second question is simply &#39;yes&#39; :)."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 10, "last_activity_date": 1484753422, "last_edit_date": 1484753422, "creation_date": 1484689471, "answer_id": 41707564, "question_id": 41594186, "link": "https://stackoverflow.com/questions/41594186/what-rules-govern-use-of-multiple-user-defined-conversions-between-types/41707564#41707564", "title": "What rules govern use of multiple user-defined conversions between types?", "body": "<p>tldr; The code is ill-formed, MSVC is wrong to accept it. Copy-initialization is different from direct-initialization. The layman explanation is that the initialization of <code>yoursBreaks</code> would involve two user-defined conversions (<code>MyString --&gt; const char* --&gt; YourString</code>), whereas direct-initialization involves one user-defined conversion (<code>MyString --&gt; const char*</code>), and you are allowed at most one user-defined conversion. The standardese explanation which enforces that rule is that [over.best.ics] doesn't allow for user-defined conversions in the context of copy-initialization of a class type from an unrelated class type by way of converting constructor.</p>\n\n<hr />\n\n<p>To the standard! What does:</p>\n\n<pre><code>YourString yoursBreaks = mys;\n</code></pre>\n\n<p>mean? Any time we declare a variable, that's some kind of <em>initialization</em>. In this case, it is, according to [dcl.init]:</p>\n\n<blockquote>\n  <p>The initialization that occurs in the <code>=</code> form of a <em>brace-or-equal-initializer</em> or condition (6.4), as well as in argument passing, function return, throwing an exception (15.1), handling an exception (15.3), and aggregate member initialization (8.6.1), is called <strong><em>copy-initialization</em></strong>.</p>\n</blockquote>\n\n<p>Copy-initialization is anything of the form <code>T var = expr;</code> Despite the appearance of the <code>=</code>, this never invokes <code>operator=</code>.  We always goes through either a constructor or a conversion function.</p>\n\n<p>Specifically, this case:</p>\n\n<blockquote>\n  <p>If the destination type is a (possibly cv-qualified) class type:<br>\n  \u2014 If the initializer expression is a prvalue and the cv-unqualified version of the source type is the same\n  class as the class of the destination, [...]<br>\n  \u2014 Otherwise, if the initialization is direct-initialization, or if it is copy-initialization where the\n  cv-unqualified version of the source type is the same class as, or a derived class of, the class of the\n  destination, [...]<br>\n  \u2014 Otherwise (i.e., for the remaining copy-initialization cases), user-defined conversion sequences that\n  can convert from the source type to the destination type or (when a conversion function is used) to\n  a derived class thereof are enumerated as described in 13.3.1.4, and the best one is chosen through\n  overload resolution (13.3). If the conversion cannot be done or is ambiguous, the initialization is\n  ill-formed.</p>\n</blockquote>\n\n<p>We fall into that last bullet. Let's hop over into 13.3.1.4:</p>\n\n<blockquote>\n  <p>\u2014 The converting constructors (12.3.1) of T are candidate functions.<br>\n  \u2014 When the type of the initializer expression is a class type \u201c<em>cv</em> <code>S</code>\u201d, the non-explicit conversion functions of <code>S</code> and its base classes are considered. When initializing a temporary to be bound to the first parameter\n  of a constructor where the parameter is of type \u201creference to possibly <em>cv</em>-qualified <code>T</code>\u201d and the constructor is called with a single argument in the context of direct-initialization of an object of type \u201c<em>cv2</em> <code>T</code>\u201d,\n  explicit conversion functions are also considered. <strong>Those that are not hidden within <code>S</code> and yield a type whose cv-unqualified version is the same type as <code>T</code> or is a derived class thereof are candidate functions</strong>. Conversion functions that return \u201creference to <code>X</code>\u201d return lvalues or xvalues, depending on the type\n  of reference, of type <code>X</code> and are therefore considered to yield <code>X</code> for this process of selecting candidate functions.</p>\n</blockquote>\n\n<p>The first bullet point gives us the converting constructors of <code>YourString</code>, which are:</p>\n\n<pre><code>YourString(const char* );\n</code></pre>\n\n<p>The second bullet gives us nothing. <code>MyString</code> does not have a conversion function that returns <code>YourString</code> or a class type derived from it.</p>\n\n<hr />\n\n<p>So, okay. We have one candidate constructor. Is it viable? [over.match] checks reliability via:</p>\n\n<blockquote>\n  <p>Then the best viable function is selected based on the <strong>implicit conversion sequences (13.3.3.1)</strong> needed to match each argument to the corresponding parameter of each viable function.</p>\n</blockquote>\n\n<p>and, in [over.best.ics]:</p>\n\n<blockquote>\n  <p>A well-formed implicit conversion sequence is one of the following forms:<br>\n  \u2014 a standard conversion sequence (13.3.3.1.1),<br>\n  \u2014 a user-defined conversion sequence (13.3.3.1.2), or<br>\n  \u2014 an ellipsis conversion sequence (13.3.3.1.3).</p>\n  \n  <p>However, if the target is<br>\n  \u2014 <strong>the first parameter of a constructor</strong> or<br>\n  \u2014 the implicit object parameter of a user-defined conversion function  </p>\n  \n  <p>and the constructor or user-defined conversion function is a candidate by<br>\n  \u2014 13.3.1.3, when the argument is the temporary in the second step of a class copy-initialization,<br>\n  \u2014 <strong>13.3.1.4</strong>, 13.3.1.5, or 13.3.1.6 (in all cases), or<br>\n  \u2014 the second phase of 13.3.1.7 [...]<br>\n  <strong>user-defined conversion sequences are not considered.</strong> <em>[ Note:</em> These rules prevent more than one user-defined\n  conversion from being applied during overload resolution, thereby avoiding infinite recursion. <em>\u2014end note ]</em> <em>[ Example:</em></p>\n\n<pre><code>struct Y { Y(int); };\nstruct A { operator int(); };\nY y1 = A(); // error: A::operator int() is not a candidate\n\nstruct X { };\nstruct B { operator X(); };\nB b;\nX x({b}); // error: B::operator X() is not a candidate\n</code></pre>\n  \n  <p><em>\u2014end example ]</em></p>\n</blockquote>\n\n<p>So even though there is a conversion sequence from <code>MyString</code> to <code>const char*</code>, it is not considered in this case, so this constructor is not viable.</p>\n\n<p>Since we don't have another candidate constructor, the call is ill-formed.</p>\n\n<hr />\n\n<p>The other line:</p>\n\n<pre><code>YourString yoursAlsoWorks(mys);\n</code></pre>\n\n<p>is called <em>direct-initialization</em>. We call into the 2nd bullet point of the three in the [dcl.init] block I quoted earlier, which in its entirety reads:</p>\n\n<blockquote>\n  <p>The applicable constructors are enumerated (13.3.1.3),\n  and the best one is chosen through overload resolution (13.3). The constructor so selected is called to initialize the object, with the initializer expression or expression-list as its argument(s). If no constructor applies, or the overload resolution is ambiguous, the initialization is ill-formed.</p>\n</blockquote>\n\n<p>where 13.3.1.3 indicates that constructors are enumerated from:</p>\n\n<blockquote>\n  <p>For direct-initialization\n  or default-initialization that is not in the context of copy-initialization, the candidate functions are all the constructors of the class of the object being initialized. </p>\n</blockquote>\n\n<p>Those constructors are:</p>\n\n<pre><code>YourString(const char* )        // yours\nYourString(YourString const&amp; )  // implicit\nYourString(YourString&amp;&amp; )       // implicit\n</code></pre>\n\n<p>To check the viability of the latter two functions, we re-perform overload resolution from a copy-initialization context (which fails as per the above). But for your <code>YourString(const char*)</code>, it's straightforward, there is a viable conversion function from <code>MyString</code> to <code>const char*</code>, so it's used. </p>\n\n<p>Note that there is one single conversion here: <code>MyString --&gt; const char*</code>. One conversion is fine. </p>\n"}], "owner": {"reputation": 8820, "user_id": 2428389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90de97b22aac97ec9a43a95412ac3692?s=128&d=identicon&r=PG", "display_name": "steveire", "link": "https://stackoverflow.com/users/2428389/steveire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1008, "favorite_count": 1, "accepted_answer_id": 41707564, "answer_count": 3, "score": 11, "last_activity_date": 1484753422, "creation_date": 1484147011, "last_edit_date": 1484149537, "question_id": 41594186, "link": "https://stackoverflow.com/questions/41594186/what-rules-govern-use-of-multiple-user-defined-conversions-between-types", "title": "What rules govern use of multiple user-defined conversions between types?", "body": "<p>I have this code:</p>\n\n<pre><code>class MyString\n{\npublic:\n    operator const char*() const {\n        return nullptr;\n    }\n};\n\nclass YourString\n{\npublic:\n    YourString() {}\n    YourString(const char* ptr) {\n        (void)ptr;\n    }\n\n    YourString&amp; operator=(const char* ptr)\n    {\n        return *this;\n    }\n};\n\nint main()\n{\n    MyString mys;\n\n    YourString yoursWorks;\n    yoursWorks = mys;\n\n    YourString yoursAlsoWorks(mys);\n\n    YourString yoursBreaks = mys;\n}\n</code></pre>\n\n<p>MSVC accepts it without issue. Clang-CL does not accept it:</p>\n\n<pre><code>$ \"C:\\Program Files\\LLVM\\msbuild-bin\\CL.exe\" ..\\string_conversion.cpp\n..\\string_conversion.cpp(32,13):  error: no viable conversion from 'MyString' to 'YourString'\n        YourString yoursBreaks = mys;\n                   ^             ~~~\n..\\string_conversion.cpp(10,7):  note: candidate constructor (the implicit copy constructor) not viable: no known conversion from 'MyString' to\n      'const YourString &amp;' for 1st argument\nclass YourString\n      ^\n..\\string_conversion.cpp(10,7):  note: candidate constructor (the implicit move constructor) not viable: no known conversion from 'MyString' to\n      'YourString &amp;&amp;' for 1st argument\nclass YourString\n      ^\n..\\string_conversion.cpp(14,2):  note: candidate constructor not viable: no known conversion from 'MyString' to 'const char *' for 1st argument\n        YourString(const char* ptr) {\n        ^\n..\\string_conversion.cpp(5,2):  note: candidate function\n        operator const char*() const {\n        ^\n1 error generated.\n</code></pre>\n\n<p>Nor does GCC:</p>\n\n<pre><code>$ g++.exe -std=gnu++14 ..\\string_conversion.cpp\n..\\string_conversion.cpp: In function 'int main()':\n..\\string_conversion.cpp:33:27: error: conversion from 'MyString' to non-scalar type 'YourString' requested\n  YourString yoursBreaks = mys;\n                           ^\n</code></pre>\n\n<p>I understand that only one user-defined conversion is allowed.</p>\n\n<p>However, is MSVC justified in treating the line </p>\n\n<pre><code>YourString yoursBreaks = mys;\n</code></pre>\n\n<p>as </p>\n\n<pre><code>YourString yoursBreaks(mys);\n</code></pre>\n\n<p>and accepting it? Is that a conversion compilers are allowed to do? Under what rules is it allowed/disallowed? Is there a similar rule?</p>\n\n<p>Update: With MSVC, the <code>/Za</code> flag causes the code to not be accepted.</p>\n\n<pre><code>$ \"C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\bin\\x86_amd64\\CL.exe\" /Za ..\\string_conversion.cpp\n\nstring_conversion.cpp\n..\\string_conversion.cpp(33): error C2440: 'initializing': cannot convert from 'MyString' to 'YourString'\n..\\string_conversion.cpp(33): note: No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called\n</code></pre>\n"}, {"tags": ["c++", "mfc"], "comments": [{"owner": {"reputation": 3651, "user_id": 383779, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/363c7fb07b9e121acdb8c40115b94e34?s=128&d=identicon&r=PG", "display_name": "sergiol", "link": "https://stackoverflow.com/users/383779/sergiol"}, "edited": false, "score": 0, "creation_date": 1484170704, "post_id": 41594160, "comment_id": 70405131, "body": "How much is TF_COUNT? Did you try to call <code>m_ImageList.Create(16,16,ILC_COLOR32,1,TF_COUNT);</code> instead?"}, {"owner": {"reputation": 3651, "user_id": 383779, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/363c7fb07b9e121acdb8c40115b94e34?s=128&d=identicon&r=PG", "display_name": "sergiol", "link": "https://stackoverflow.com/users/383779/sergiol"}, "edited": false, "score": 0, "creation_date": 1484170763, "post_id": 41594160, "comment_id": 70405160, "body": "Why the <code>DestroyIcon(phIcons[nImage]);</code>?"}, {"owner": {"reputation": 126, "user_id": 3465134, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/758478763/picture?type=large", "display_name": "BadJerry", "link": "https://stackoverflow.com/users/3465134/badjerry"}, "reply_to_user": {"reputation": 3651, "user_id": 383779, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/363c7fb07b9e121acdb8c40115b94e34?s=128&d=identicon&r=PG", "display_name": "sergiol", "link": "https://stackoverflow.com/users/383779/sergiol"}, "edited": false, "score": 1, "creation_date": 1484220667, "post_id": 41594160, "comment_id": 70425408, "body": "@sergiol I have created the icon with CreateIconIndirect - I need to destroy it according to <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms648062(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 126, "user_id": 3465134, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/758478763/picture?type=large", "display_name": "BadJerry", "link": "https://stackoverflow.com/users/3465134/badjerry"}, "reply_to_user": {"reputation": 3651, "user_id": 383779, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/363c7fb07b9e121acdb8c40115b94e34?s=128&d=identicon&r=PG", "display_name": "sergiol", "link": "https://stackoverflow.com/users/383779/sergiol"}, "edited": false, "score": 0, "creation_date": 1484220843, "post_id": 41594160, "comment_id": 70425533, "body": "TF_COUNT is 25 in my code - as for switching parameters, I am up o trying anything but that&#39;s far fetched (note: I tried it anyway for sanity reasons and it does not work which I feel good about :) )"}], "answers": [{"comments": [{"owner": {"reputation": 126, "user_id": 3465134, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/758478763/picture?type=large", "display_name": "BadJerry", "link": "https://stackoverflow.com/users/3465134/badjerry"}, "edited": false, "score": 0, "creation_date": 1486317571, "post_id": 42042930, "comment_id": 71282986, "body": "Thanks for the tips - I do like the fact that you are thorough. Solution 1 is not correct - you are not meant to use ILC_COLOR32 ILC_MASK together... and just ILC_COLOr32 works beautifully on a list control  Solution 2: I have added 20 times the same icon : the first 16 are OK - the 17 th on are not - there is a magic number of 16 for a CombBoxEx :) Hard to believe I know"}, {"owner": {"reputation": 6957, "user_id": 147805, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a7f61061e9e54a67cc5cea2c5b428459?s=128&d=identicon&r=PG", "display_name": "Codeguard", "link": "https://stackoverflow.com/users/147805/codeguard"}, "reply_to_user": {"reputation": 126, "user_id": 3465134, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/758478763/picture?type=large", "display_name": "BadJerry", "link": "https://stackoverflow.com/users/3465134/badjerry"}, "edited": false, "score": 0, "creation_date": 1486322250, "post_id": 42042930, "comment_id": 71284679, "body": "Not sure why you think <code>ILC_COLOR32</code> <code>ILC_MASK</code> shall not be used together. MSDN says nothing about that, and in my own example where I load 24-bit icon <code>ILC_MASK</code> solves black background. Also, I have no problems with 16 on my windows 8.1. See update."}, {"owner": {"reputation": 126, "user_id": 3465134, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/758478763/picture?type=large", "display_name": "BadJerry", "link": "https://stackoverflow.com/users/3465134/badjerry"}, "edited": false, "score": 0, "creation_date": 1486366934, "post_id": 42042930, "comment_id": 71296935, "body": "You are like St Thomas ;) I havd done what you suggested, small sample, virtual machine with hyper-g and I only get 16 transparent icons... Check the code here: <a href=\"https://db.tt/ewe3wsQ7gQ\" rel=\"nofollow noreferrer\">db.tt/ewe3wsQ7gQ</a>"}, {"owner": {"reputation": 6957, "user_id": 147805, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a7f61061e9e54a67cc5cea2c5b428459?s=128&d=identicon&r=PG", "display_name": "Codeguard", "link": "https://stackoverflow.com/users/147805/codeguard"}, "reply_to_user": {"reputation": 126, "user_id": 3465134, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/758478763/picture?type=large", "display_name": "BadJerry", "link": "https://stackoverflow.com/users/3465134/badjerry"}, "edited": false, "score": 0, "creation_date": 1486384408, "post_id": 42042930, "comment_id": 71306995, "body": "I have decided to post another answer to make it clean. PS: You should have started with giving us a minimal example."}], "tags": [], "owner": {"reputation": 6957, "user_id": 147805, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a7f61061e9e54a67cc5cea2c5b428459?s=128&d=identicon&r=PG", "display_name": "Codeguard", "link": "https://stackoverflow.com/users/147805/codeguard"}, "is_accepted": false, "score": 0, "last_activity_date": 1486322512, "last_edit_date": 1486322512, "creation_date": 1486226979, "answer_id": 42042930, "question_id": 41594160, "link": "https://stackoverflow.com/questions/41594160/cimagelist-and-ccomboboxex-limited-to-16-transparent-icons/42042930#42042930", "title": "CImageList and CComboBoxEx limited to 16 transparent icons", "body": "<p><strong>Solution 1</strong></p>\n\n<p>If you want to use transparency, you need to create image list with a mask:</p>\n\n<pre><code>m_ImageList.Create(16, 16, ILC_COLOR32 | ILC_MASK, TF_COUNT, 1)\n</code></pre>\n\n<p><strong>Solution 2</strong></p>\n\n<p>Another (worse) approach is to set the desired background color (after creating the imagelist, but before adding the icons):</p>\n\n<pre><code>m_ImageList.SetBkColor(RGB(0xFF, 0xFF, 0xFF))\n</code></pre>\n\n<p>The problem about the background color is that you will have to figure which background color to use.</p>\n\n<p><strong>The magic number of 16</strong></p>\n\n<p>I don't think your problem is about <code>CComboBoxEx</code> somehow having problems with the number <code>16</code>. Instead, I think your icons are a bit different, for example some truly 32-bit, and some in other format. You can test it like that:</p>\n\n<pre><code>m_ImageList.Create(16,16,ILC_COLOR32,TF_COUNT,1);\n\nfor (int nImage = 0; nImage &lt; TF_COUNT; nImage++)\n{\n    m_ImageList.Add(phIcons[0]);\n}\n\nm_cmbAction.SetImageList(&amp;m_ImageList);\n</code></pre>\n\n<p>This code adds the same icon multiple times. I bet you won't have any issues with that. Now, you can also try this:</p>\n\n<pre><code>m_ImageList.Create(16,16,ILC_COLOR32,TF_COUNT,1);\n\nfor (int nImage = 0; nImage &lt; TF_COUNT; nImage++)\n{\n    m_ImageList.Add(phIcons[16]);\n}\n\nm_cmbAction.SetImageList(&amp;m_ImageList);\n</code></pre>\n\n<p>And you will likely have all icons wrong.</p>\n\n<p><strong>Update 1</strong></p>\n\n<p>I do not have any issues with 16+ transparent icons on my Win8.1, so it's time to suspect that third-party software or your own code is the root of the problem. You need to prepare a minimal example of the code still containing the problem, then try it on another computer. It will be best to try on a virtual machine (you can download prebuilt one <a href=\"https://developer.microsoft.com/en-us/microsoft-edge/tools/vms/\" rel=\"nofollow noreferrer\">here</a>) to reduce all possible risks of whatever software you have installed on many machines at once. If your minimal example still shows the problem on virtual machine, zip it and share with us.</p>\n"}, {"comments": [{"owner": {"reputation": 126, "user_id": 3465134, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/758478763/picture?type=large", "display_name": "BadJerry", "link": "https://stackoverflow.com/users/3465134/badjerry"}, "edited": false, "score": 0, "creation_date": 1486386847, "post_id": 42067906, "comment_id": 71308570, "body": "You star you! I really appreciate your thoroughness and your perseverance !"}], "tags": [], "owner": {"reputation": 6957, "user_id": 147805, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a7f61061e9e54a67cc5cea2c5b428459?s=128&d=identicon&r=PG", "display_name": "Codeguard", "link": "https://stackoverflow.com/users/147805/codeguard"}, "is_accepted": true, "score": 1, "last_activity_date": 1486384352, "creation_date": 1486384352, "answer_id": 42067906, "question_id": 41594160, "link": "https://stackoverflow.com/questions/41594160/cimagelist-and-ccomboboxex-limited-to-16-transparent-icons/42067906#42067906", "title": "CImageList and CComboBoxEx limited to 16 transparent icons", "body": "<p>Author posted his code in a ZIP file:</p>\n\n<pre><code>m_ImageList.Create(16, 16, ILC_COLOR32, TF_COUNT, 1);\n\nfor (int nIcon=0; nIcon &lt; TF_COUNT; nIcon++)\n{\n    m_ImageList.Add(m_hIcon);\n}\nm_ComboBox.SetImageList(&amp;m_ImageList);\n\nCOMBOBOXEXITEM cbi;\ncbi.mask = CBEIF_IMAGE | CBEIF_INDENT | CBEIF_OVERLAY |\n    CBEIF_SELECTEDIMAGE | CBEIF_TEXT | CBEIF_LPARAM;\nint nItemCount = 0;\n\n\nfor (int nText = 0; nText &lt; TF_COUNT; nText++)\n{\n    CString strItem;\n    strItem.Format(_T(\"Item %d\"),nText);\n    cbi.iItem = nItemCount;\n    cbi.pszText = (LPTSTR)(LPCTSTR)strItem;\n    cbi.cchTextMax = strItem.GetLength();\n    cbi.iImage = nText;\n    cbi.iSelectedImage = nText;\n    cbi.iOverlay = nText;\n    cbi.iIndent = 0;\n    cbi.lParam = nText;\n    m_ComboBox.InsertItem(&amp;cbi);\n    nItemCount++;\n}\n</code></pre>\n\n<p>In this code, the error is <code>CBEIF_OVERLAY</code> and <code>cbi.iOverlay = nText</code>. Overlay image is an image drawn transparently over another image (this way, you can combine two icons). In the author's code, that is obviously not the intent.</p>\n\n<p>Finally, image lists allow <a href=\"https://msdn.microsoft.com/en-us/library/bb775227.aspx\" rel=\"nofollow noreferrer\">only up to 15 overlay icons</a>. That explains the magic 16.</p>\n"}], "owner": {"reputation": 126, "user_id": 3465134, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/758478763/picture?type=large", "display_name": "BadJerry", "link": "https://stackoverflow.com/users/3465134/badjerry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "accepted_answer_id": 42067906, "answer_count": 2, "score": 1, "last_activity_date": 1486384352, "creation_date": 1484146954, "last_edit_date": 1485951557, "question_id": 41594160, "link": "https://stackoverflow.com/questions/41594160/cimagelist-and-ccomboboxex-limited-to-16-transparent-icons", "title": "CImageList and CComboBoxEx limited to 16 transparent icons", "body": "<p>It seems that there is a limitation to 16 transparent icons you can use in a CComboBoxEx. I have the following pseudo code:</p>\n\n<pre><code>m_ImageList.Create(16,16,ILC_COLOR32,TF_COUNT,1);\n\nfor (int nImage = 0; nImage &lt; TF_COUNT; nImage++)\n{\n    m_ImageList.Add(phIcons[nImage]);\n    DestroyIcon(phIcons[nImage]);\n}\nm_cmbAction.SetImageList(&amp;m_ImageList);\n</code></pre>\n\n<p>The first 16 icons are OK - the following ones all have a black background instead of the transparency. The same code and Image list associated to a CTreeCtrl or a CListCtrl works beautifully. Any ideas?</p>\n\n<p>EDIT: I am using Visual Studio 2013</p>\n"}, {"tags": ["c++", "constructor", "initialization"], "comments": [{"owner": {"reputation": 184, "user_id": 1690417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd3e7fbf482bf3cfef0f1f3de483f59?s=128&d=identicon&r=PG", "display_name": "D Untouchable", "link": "https://stackoverflow.com/users/1690417/d-untouchable"}, "edited": false, "score": 0, "creation_date": 1484147026, "post_id": 41594044, "comment_id": 70391317, "body": "these are the basics, get hold of a good book and practice."}], "answers": [{"comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1484146960, "post_id": 41594085, "comment_id": 70391277, "body": "Any reason why not <code>std::vector</code>?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1484147166, "post_id": 41594085, "comment_id": 70391402, "body": "To me a list seems more of a natural container to model a list of subjects."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1484147835, "post_id": 41594085, "comment_id": 70391829, "body": "I&#39;d say it&#39;s impossible to say which container is more natural as long as we don&#39;t know which operations will be needed. For example, if subjects will actually be removed while iterators to other elements should remain valid."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1484146729, "creation_date": 1484146729, "answer_id": 41594085, "question_id": 41594044, "link": "https://stackoverflow.com/questions/41594044/how-can-i-initialize-with-a-constructor-an-object-from-another-class/41594085#41594085", "title": "How can I initialize with a constructor an object from another class?", "body": "<p>The way you currently have it, you'd have to write</p>\n\n<p><code>S[i] = new Subject();</code></p>\n\n<p>rather than </p>\n\n<p><code>S[i].Subject();</code></p>\n\n<p>But that burdens you with having to remember to call <code>delete</code> at some point. It would be <em>far</em> better to use </p>\n\n<p><code>std::list&lt;Subject&gt; S;</code></p>\n\n<p>in place of </p>\n\n<p><code>Subject *S[20];</code></p>\n\n<p>and then <code>push_back</code> or even the flashier <code>emplace_back</code> in place of <code>S[i].Subject();</code></p>\n\n<p>See <a href=\"http://en.cppreference.com/w/cpp/container/list\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/container/list</a></p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1484147116, "post_id": 41594179, "comment_id": 70391369, "body": "The problem with a fixed array is that there is always a girlyswot who takes 21 subjects."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1484147441, "post_id": 41594179, "comment_id": 70391597, "body": "@Bathsheba true. The greatest advantage of using a statically sized array is that one will quickly learn to appreciate dynamic data structures, when one eventually learns of them."}, {"owner": {"reputation": 17, "user_id": 5624945, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/376d35dc2b215c37fbf57d86aee80197?s=128&d=identicon&r=PG", "display_name": "user5624945", "link": "https://stackoverflow.com/users/5624945/user5624945"}, "edited": false, "score": 0, "creation_date": 1484147929, "post_id": 41594179, "comment_id": 70391905, "body": "Ok I changed the declaration of Subject to <code>Subject S[20];</code> but in the teacher constructor <code>S[i].Subject();</code> doesn&#39;t work."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 17, "user_id": 5624945, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/376d35dc2b215c37fbf57d86aee80197?s=128&d=identicon&r=PG", "display_name": "user5624945", "link": "https://stackoverflow.com/users/5624945/user5624945"}, "edited": false, "score": 0, "creation_date": 1484148049, "post_id": 41594179, "comment_id": 70391983, "body": "@user5624945 as I said, <i>The objects in the array will be constructed before the body of <code>Teacher</code> constructor is executed.</i>. You cannot call the constructor of an object that has already been constructed. Simply remove the loop."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1484148286, "last_edit_date": 1484148286, "creation_date": 1484146997, "answer_id": 41594179, "question_id": 41594044, "link": "https://stackoverflow.com/questions/41594044/how-can-i-initialize-with-a-constructor-an-object-from-another-class/41594179#41594179", "title": "How can I initialize with a constructor an object from another class?", "body": "<blockquote>\n  <p>In class Teacher a have an object Subject S[]</p>\n</blockquote>\n\n<p>No you dont: </p>\n\n<blockquote>\n<pre><code>Subject *S[20];\n</code></pre>\n</blockquote>\n\n<p><code>Teacher::S</code> is an array of pointers.</p>\n\n<blockquote>\n<pre><code>S[i].Subject();\n</code></pre>\n</blockquote>\n\n<p><code>.</code> is used for member access. Pointers do not have members, so this is syntactically wrong. Besides, you never call a constructor directly. It is called automatically as a consequence of initializing a variable, or a <em>new expression</em>.</p>\n\n<hr>\n\n<p>It seems that to want to have an array of <code>Subject</code> objects as a member instead. This is how you would declare such member:</p>\n\n<pre><code>Subject S[20];\n</code></pre>\n\n<p>The objects in the array will be constructed before the body of <code>Teacher</code> constructor is executed.</p>\n"}], "owner": {"reputation": 17, "user_id": 5624945, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/376d35dc2b215c37fbf57d86aee80197?s=128&d=identicon&r=PG", "display_name": "user5624945", "link": "https://stackoverflow.com/users/5624945/user5624945"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1484148286, "creation_date": 1484146617, "last_edit_date": 1484147424, "question_id": 41594044, "link": "https://stackoverflow.com/questions/41594044/how-can-i-initialize-with-a-constructor-an-object-from-another-class", "title": "How can I initialize with a constructor an object from another class?", "body": "<p>I'm new at learning c++ and a have stuck in constructors.I have a class <code>Teacher</code> and a Class <code>Subject</code>. In class <code>Teacher</code> a have an object <code>Subject S[]</code>. How I can initialize with constructor from class <code>Teacher</code> the <code>S[]</code>? I have tried this:\nin Teacher.h file</p>\n\n<pre><code>class Teacher \n{\n  private:\n    string name;\n    Subject *S[20];\n  public:\n    Teacher();\n}\n</code></pre>\n\n<p>in Teacher.cpp file</p>\n\n<pre><code>Teacher::Teacher()\n{\n  name=\" \";\n  for(int i=0; i&lt;20; i++)\n  {\n    S[i].Subject();\n  }\n}\n</code></pre>\n\n<p>in Subject.cpp file the Constructor is:</p>\n\n<pre><code>Subject::Subject()\n{\n  day=0;\n  hour=0;\n  for(int i=0; i&lt;10; i++)\n  {\n    classroom[i]=\" \";\n  }\n}\n</code></pre>\n"}, {"tags": ["c++", "data-structures", "tree", "binary-tree", "binary-search-tree"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1484146704, "post_id": 41594036, "comment_id": 70391109, "body": "Unrelated to your question, but don&#39;t use symbols with double leading underscores as those are reserved for the &quot;implementation&quot; (compiler and standard library). See <a href=\"http://stackoverflow.com/questions/228783/what-are-the-rules-about-using-an-underscore-in-a-c-identifier\">this question and its answers for more information</a>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1484146828, "post_id": 41594036, "comment_id": 70391195, "body": "As for your problem, take a look at your <code>__find</code> function again, and think about if all paths return a value. A compiler should have shouted warnings about it to you."}, {"owner": {"reputation": 25, "user_id": 7217517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FukcB.jpg?s=128&g=1", "display_name": "vgratian", "link": "https://stackoverflow.com/users/7217517/vgratian"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1484146840, "post_id": 41594036, "comment_id": 70391204, "body": "ok, thanks :) (I changed that in my more recents BTs)"}, {"owner": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "edited": false, "score": 1, "creation_date": 1484162105, "post_id": 41594036, "comment_id": 70400517, "body": "Review the return values for all return paths of <code>__find</code>."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 7217517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FukcB.jpg?s=128&g=1", "display_name": "vgratian", "link": "https://stackoverflow.com/users/7217517/vgratian"}, "edited": false, "score": 0, "creation_date": 1484157572, "post_id": 41595248, "comment_id": 70398098, "body": "That is not the problem, I think, because otherwise (if I didn&#39;t insert the object to the tree) traversal wouldn&#39;t work. But it does!"}, {"owner": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "reply_to_user": {"reputation": 25, "user_id": 7217517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FukcB.jpg?s=128&g=1", "display_name": "vgratian", "link": "https://stackoverflow.com/users/7217517/vgratian"}, "edited": false, "score": 0, "creation_date": 1484162242, "post_id": 41595248, "comment_id": 70400589, "body": "@vgratian This might be another problem with the code."}, {"owner": {"reputation": 25, "user_id": 7217517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FukcB.jpg?s=128&g=1", "display_name": "vgratian", "link": "https://stackoverflow.com/users/7217517/vgratian"}, "edited": false, "score": 0, "creation_date": 1484163574, "post_id": 41595248, "comment_id": 70401337, "body": "I realized now that everything works fine when I use the BT for int, the problem appears only when I feel it with strings... I am really confused now :("}], "tags": [], "owner": {"reputation": 49, "user_id": 7404984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9add1d44e2bd43b6f6175f3af831bc32?s=128&d=identicon&r=PG&f=1", "display_name": "sicarii443", "link": "https://stackoverflow.com/users/7404984/sicarii443"}, "is_accepted": false, "score": 0, "last_activity_date": 1484150087, "creation_date": 1484150087, "answer_id": 41595248, "question_id": 41594036, "link": "https://stackoverflow.com/questions/41594036/insert-find-issues-in-binary-tree/41595248#41595248", "title": "Insert/find issues in Binary Tree", "body": "<p>in your insert function, you don't actually insert the element into the tree.\nyou create a new node, and set it's parent to point to itself. also, you didn't updated the parent left/right pointers to the new node.</p>\n\n<p>take a look in the added comments:</p>\n\n<pre><code>if(element-&gt;left != NULL)\n  __insert(element-&gt;left, value);\nelse { // meaning element-&gt;left == NULL\n  element = element-&gt;left; // element = NULL\n  element = new Node&lt;B&gt;; // element = new node\n  element-&gt;data = value;\n  element-&gt;left = NULL;\n  element-&gt;right = NULL;\n  element-&gt;parent = element; // element-&gt;parent = new node.element parent point to himself\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1484204279, "post_id": 41599587, "comment_id": 70415576, "body": "You are <b><i>so</i></b> close to the problem. And <code>std::string</code> have <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/operator_cmp\" rel=\"nofollow noreferrer\">relational operators</a>."}, {"owner": {"reputation": 25, "user_id": 7217517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FukcB.jpg?s=128&g=1", "display_name": "vgratian", "link": "https://stackoverflow.com/users/7217517/vgratian"}, "edited": false, "score": 0, "creation_date": 1484223085, "post_id": 41599587, "comment_id": 70427005, "body": "Many thanks! That seemed to be the problem. It&#39;s interesting because relational operators would normally work for strings...  Anyway, I solved the problem by adding a new member to my node: unsigned int id and sorting the tree by this variable rather than std::string. This way every works fine.  I will need some time to be able to implement a Trie, obviously that would be a much better solution.  Thanks again everyone! :)"}], "tags": [], "owner": {"reputation": 19199, "user_id": 753341, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/RDsrQ.jpg?s=128&g=1", "display_name": "ApprenticeHacker", "link": "https://stackoverflow.com/users/753341/apprenticehacker"}, "is_accepted": true, "score": 0, "last_activity_date": 1484164445, "creation_date": 1484164445, "answer_id": 41599587, "question_id": 41594036, "link": "https://stackoverflow.com/questions/41594036/insert-find-issues-in-binary-tree/41599587#41599587", "title": "Insert/find issues in Binary Tree", "body": "<p>The problem lies with your find implementation:</p>\n\n<pre><code>else if(value &lt; element-&gt;data)\n  __find(element-&gt;left, value);\nelse if(value &gt; element-&gt;data)\n  __find(element-&gt;right, value);\n</code></pre>\n\n<p>This only works for types/classes for which the relational operators <code>&lt;</code> and <code>&gt;</code> are defined (in a relevant way). So it will not work whe <code>B</code> is an <code>std::string</code> for example.</p>\n\n<p>For string matching, consider using a <a href=\"https://en.wikipedia.org/wiki/Trie\" rel=\"nofollow noreferrer\">Trie</a>.</p>\n"}], "owner": {"reputation": 25, "user_id": 7217517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FukcB.jpg?s=128&g=1", "display_name": "vgratian", "link": "https://stackoverflow.com/users/7217517/vgratian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 41599587, "answer_count": 2, "score": 0, "last_activity_date": 1484164445, "creation_date": 1484146585, "last_edit_date": 1484163501, "question_id": 41594036, "link": "https://stackoverflow.com/questions/41594036/insert-find-issues-in-binary-tree", "title": "Insert/find issues in Binary Tree", "body": "<p>UPDATE: This issue only appears when I use the binary tree for strings. If I feel it with ints, everything works fine!</p>\n\n<hr>\n\n<p>A few months ago I wrote a Binary Tree implementation in C++. Everything  seemed to work okay (insert, remove, traversals, find...) and I passed my exams :) But now when I write a new class based on this binary tree class, the find method seems to be buggy, but I can't find the reason.</p>\n\n<p>Here is the issue: find returns a pointer to a node, but for some reason I can access its member variables only when this node is the root. I can't quite understand why. Something to do with poiters? Or is there something wrong in my insert function? Can someone help me, because I feel a bit lost :)</p>\n\n<p>Here is my Binary Tree interface:</p>\n\n<pre><code>template &lt;class N&gt;\nclass Node {\npublic:\n  N data;\n  Node* left;\n  Node* right;\n  Node* parent;\n};\n\ntemplate &lt;class B&gt;\nclass BinaryTree {\nprotected:\n  Node&lt;B&gt;* m_root;\n  unsigned int m_height;  // longest path in tree\n  unsigned int m_size;    // total number of nodes\n\n  // methods that support public methods of below\n  void __insert(Node&lt;B&gt;* element, B value);\n  void __inorder(Node&lt;B&gt;* element);\n  void __preorder(Node&lt;B&gt;* element);\n  void __postorder(Node&lt;B&gt;* element);\n  void __remove(Node&lt;B&gt;* element, B value);\n  void __update_parent(Node&lt;B&gt; *element);\n  void __destroy_tree(Node&lt;B&gt;* element);\n  int __get_height(Node&lt;B&gt;* element);\n  Node&lt;B&gt;* __find(Node&lt;B&gt;* element, B value);\n  Node&lt;B&gt;* __find_minimal(Node&lt;B&gt; *element);\n\npublic:\n  BinaryTree(); // Default constructor\n  ~BinaryTree(); // Default deconstructor\n  void insert(B value);\n  void inorder();\n  void preorder();\n  void postorder();\n  void remove(B value);\n  int get_size();\n  int get_height();\n  bool is_empty();\n  bool find(B value);\n  bool check_find(B value);\n};\n</code></pre>\n\n<p>Insert:</p>\n\n<pre><code>template &lt;class B&gt;\nvoid BinaryTree&lt;B&gt;::insert(B value) {      // Creates a new node in the tree with value\n  if(m_root == NULL) {\n    m_root = new Node&lt;B&gt;;   // creating the root if it's empty\n    m_root-&gt;data = value;\n    m_root-&gt;left = NULL;\n    m_root-&gt;right = NULL;\n    m_root-&gt;parent = NULL;\n  }\n  else {\n    Node&lt;B&gt;* element = m_root;\n    __insert(element, value);\n  }\n}\n\ntemplate &lt;class B&gt;\nvoid BinaryTree&lt;B&gt;::__insert(Node&lt;B&gt;* element, B value) {\n  if(value &lt; element-&gt;data) {\n    if(element-&gt;left != NULL)\n      __insert(element-&gt;left, value);\n    else {\n      element = element-&gt;left;\n      element = new Node&lt;B&gt;;\n      element-&gt;data = value;\n      element-&gt;left = NULL;\n      element-&gt;right = NULL;\n      element-&gt;parent = element;\n      m_size++;\n    }\n  }\n  else if(value &gt;= element-&gt;data) {\n    if(element-&gt;right != NULL)\n      __insert(element-&gt;right, value);\n    else {\n        element = element-&gt;right;\n        element = new Node&lt;B&gt;;\n        element-&gt;data = value;\n        element-&gt;left = NULL;\n        element-&gt;right = NULL;\n        element-&gt;parent = element;\n        m_size++;\n    }\n  }\n}\n</code></pre>\n\n<p>Find:</p>\n\n<pre><code>template &lt;class B&gt;\nNode&lt;B&gt;* BinaryTree&lt;B&gt;::__find(Node&lt;B&gt;* element, B value) {\n  if(element != NULL) {\n    if(value == element-&gt;data)\n      return element;\n    else if(value &lt; element-&gt;data)\n      __find(element-&gt;left, value);\n    else if(value &gt; element-&gt;data)\n      __find(element-&gt;right, value);\n  }\n  else\n    return NULL;\n}\n</code></pre>\n\n<p>Finally, a function that tests find. Even if the values match, it returns only True when the found node is <code>m_root</code>. Why?</p>\n\n<pre><code>template &lt;class B&gt;\nbool BinaryTree&lt;B&gt;::check_find(B value) {\n  Node&lt;B&gt;* node = __find(m_root, value);\n  if(node != NULL &amp;&amp; node-&gt;data == value)\n    return true;\n  return false;\n}\n</code></pre>\n\n<p>Why?</p>\n\n<p>More links:\nFull code of my Binary Tree implementation: \n<a href=\"https://github.com/vgratian/CS-121-Data-Structures/tree/master/graphs\" rel=\"nofollow noreferrer\">https://github.com/vgratian/CS-121-Data-Structures/tree/master/graphs</a>\nProgram where I use this Binary Tree:\n<a href=\"https://github.com/vgratian/rate-ur-prof\" rel=\"nofollow noreferrer\">https://github.com/vgratian/rate-ur-prof</a></p>\n"}, {"tags": ["c++", "debugging", "release", "tinyxml2"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 7370039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe02513545a8ea24da817a7a7e5f26a4?s=128&d=identicon&r=PG&f=1", "display_name": "Bluewave1976", "link": "https://stackoverflow.com/users/7370039/bluewave1976"}, "edited": false, "score": 0, "creation_date": 1485522678, "post_id": 41600869, "comment_id": 70971339, "body": "I tried to build the TinyXML 2 static library again and use it in my example program. I got no errors. I think a compilersetting was the problem. Thanks for your reply Jeandey."}], "tags": [], "owner": {"reputation": 669, "user_id": 7406508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8vnaf.jpg?s=128&g=1", "display_name": "Jeandey Boris", "link": "https://stackoverflow.com/users/7406508/jeandey-boris"}, "is_accepted": false, "score": 0, "last_activity_date": 1484169468, "creation_date": 1484169468, "answer_id": 41600869, "question_id": 41593889, "link": "https://stackoverflow.com/questions/41593889/why-i-get-unresolved-external-errors-when-i-want-to-link-the-release-version-of/41600869#41600869", "title": "Why I get unresolved external errors when I want to link the release version of the static library TinyXML 2 in C++ Builder Starter?", "body": "<p>Looks like your issue is linked to compiler options in release mode.\nCould you have a look on \"Exception handling\" options?</p>\n\n<p><code>___seh_personality_v0</code> and <code>__Unwind_SjLj_Register</code> are \"Exception handler\" functions.</p>\n"}], "owner": {"reputation": 25, "user_id": 7370039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe02513545a8ea24da817a7a7e5f26a4?s=128&d=identicon&r=PG&f=1", "display_name": "Bluewave1976", "link": "https://stackoverflow.com/users/7370039/bluewave1976"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 530, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1484169468, "creation_date": 1484146100, "last_edit_date": 1484153100, "question_id": 41593889, "link": "https://stackoverflow.com/questions/41593889/why-i-get-unresolved-external-errors-when-i-want-to-link-the-release-version-of", "title": "Why I get unresolved external errors when I want to link the release version of the static library TinyXML 2 in C++ Builder Starter?", "body": "<p>I got a simple question. I read that linking debug static libraries to release executables is considered a bad thing. So I compiled the static library of TinyXML 2 in release mode. Library compiled without any errors. But when I want to link the release static library library with the release version of my example application I get the following output:</p>\n\n<pre><code>Checking project dependencies...\nBuilding PrjTinyXML2_App.cbproj (Release, Win32)\nbcc32 command line for \"main.cpp\"\n  c:\\program files (x86)\\embarcadero\\studio\\18.0\\bin\\bcc32.exe -DNDEBUG -n.\\Win32\\Release -I\"C:\\Program Files \n  (x86)\\Embarcadero\\Studio\\18.0\\include\\boost_1_39\\boost\\tr1\\tr1\";\"C:\\Program Files (x86)\\Embarcadero\\Studio\\18.0\\include\\boost_1_39\";\"c:\\program files \n  (x86)\\embarcadero\\studio\\18.0\\include\";\"c:\\program files (x86)\\embarcadero\\studio\\18.0\\include\\dinkumware\";\"c:\\program files \n  (x86)\\embarcadero\\studio\\18.0\\include\\windows\\crtl\";\"c:\\program files (x86)\\embarcadero\\studio\\18.0\\include\\windows\\sdk\";\"c:\\program files \n  (x86)\\embarcadero\\studio\\18.0\\include\\windows\\rtl\";\"c:\\program files (x86)\\embarcadero\\studio\\18.0\\include\\windows\\vcl\";\"c:\\program files \n  (x86)\\embarcadero\\studio\\18.0\\include\\windows\\fmx\";C:\\Users\\Public\\Documents\\Embarcadero\\Studio\\18.0\\hpp\\Win32;\n  C:\\Users\\Public\\Documents\\Embarcadero\\Studio\\18.0\\hpp\\Win32 -Q -c -tC -C8 -o.\\Win32\\Release\\main.obj -w-par -O2 -v- -vi \n  -H=.\\Win32\\Release\\PrjTinyXML2_App.pch -H main.cpp \nbrcc32 command line for \"PrjTinyXML2_App.vrc\"\n  c:\\program files (x86)\\embarcadero\\studio\\18.0\\bin\\cgrc.exe -c65001 PrjTinyXML2_App.vrc -foPrjTinyXML2_App.res \nilink32 command line\n  c:\\program files (x86)\\embarcadero\\studio\\18.0\\bin\\ilink32.exe -G8 -L.\\Win32\\Release;\n  C:\\Users\\Donald\\Documents\\Embarcadero\\Studio\\Projects\\TinyXML2_Static_lib\\Win32\\Release;\n  C:\\Users\\Donald\\Documents\\Embarcadero\\Studio\\Projects\\TinyXML2_Static_lib\\Win32\\Debug;\"c:\\program files \n  (x86)\\embarcadero\\studio\\18.0\\lib\\win32\\release\";\"c:\\program files (x86)\\embarcadero\\studio\\18.0\\lib\\win32\\release\\psdk\";\n  C:\\Users\\Public\\Documents\\Embarcadero\\Studio\\18.0\\DCP -j.\\Win32\\Release;\n  C:\\Users\\Donald\\Documents\\Embarcadero\\Studio\\Projects\\TinyXML2_Static_lib\\Win32\\Release;\n  C:\\Users\\Donald\\Documents\\Embarcadero\\Studio\\Projects\\TinyXML2_Static_lib\\Win32\\Debug;\"c:\\program files \n  (x86)\\embarcadero\\studio\\18.0\\lib\\win32\\release\";\"c:\\program files (x86)\\embarcadero\\studio\\18.0\\lib\\win32\\release\\psdk\";\n  C:\\Users\\Public\\Documents\\Embarcadero\\Studio\\18.0\\DCP -l.\\Win32\\Release -Tpe  c0x32 .\\Win32\\Release\\main.obj , .\\Win32\\Release\\PrjTinyXML2_App.exe , \n  .\\Win32\\Release\\PrjTinyXML2_App.map , PrjTinyXML2_lib.lib import32.lib cw32.lib , , PrjTinyXML2_App.res \n[ilink32 Error] Error: Unresolved external '___seh_personality_v0' referenced from C:\\USERS\\DONALD\\DOCUMENTS\\EMBARCADERO\\STUDIO\\PROJECTS\\TINYXML2_STATIC_LIB\\WIN32\\RELEASE\\PRJTINYXML2_LIB.LIB|tinyxml2\n[ilink32 Error] Error: Unresolved external '__Unwind_SjLj_Register' referenced from C:\\USERS\\DONALD\\DOCUMENTS\\EMBARCADERO\\STUDIO\\PROJECTS\\TINYXML2_STATIC_LIB\\WIN32\\RELEASE\\PRJTINYXML2_LIB.LIB|tinyxml2\n[ilink32 Error] Error: Unresolved external '__cxxabiv1::__si_class_type_info::' referenced from C:\\USERS\\DONALD\\DOCUMENTS\\EMBARCADERO\\STUDIO\\PROJECTS\\TINYXML2_STATIC_LIB\\WIN32\\RELEASE\\PRJTINYXML2_LIB.LIB|tinyxml2\n[ilink32 Error] Error: Unresolved external '___cxa_pure_virtual' referenced from C:\\USERS\\DONALD\\DOCUMENTS\\EMBARCADERO\\STUDIO\\PROJECTS\\TINYXML2_STATIC_LIB\\WIN32\\RELEASE\\PRJTINYXML2_LIB.LIB|tinyxml2\n[ilink32 Error] Error: Unresolved external '___cpp_terminate' referenced from C:\\USERS\\DONALD\\DOCUMENTS\\EMBARCADERO\\STUDIO\\PROJECTS\\TINYXML2_STATIC_LIB\\WIN32\\RELEASE\\PRJTINYXML2_LIB.LIB|tinyxml2\n[ilink32 Error] Error: Unresolved external '__Unwind_SjLj_Unregister' referenced from C:\\USERS\\DONALD\\DOCUMENTS\\EMBARCADERO\\STUDIO\\PROJECTS\\TINYXML2_STATIC_LIB\\WIN32\\RELEASE\\PRJTINYXML2_LIB.LIB|tinyxml2\n[ilink32 Error] Error: Unresolved external 'tinyxml2::StrPair::~StrPair()' referenced from C:\\USERS\\DONALD\\DOCUMENTS\\EMBARCADERO\\STUDIO\\PROJECTS\\TINYXML2_APP\\WIN32\\RELEASE\\MAIN.OBJ\n[ilink32 Error] Error: Unresolved external '__cxxabiv1::__class_type_info::' referenced from C:\\USERS\\DONALD\\DOCUMENTS\\EMBARCADERO\\STUDIO\\PROJECTS\\TINYXML2_STATIC_LIB\\WIN32\\RELEASE\\PRJTINYXML2_LIB.LIB|tinyxml2\n[ilink32 Error] Error: Unresolved external '__Unwind_Resume' referenced from C:\\USERS\\DONALD\\DOCUMENTS\\EMBARCADERO\\STUDIO\\PROJECTS\\TINYXML2_STATIC_LIB\\WIN32\\RELEASE\\PRJTINYXML2_LIB.LIB|tinyxml2\n[ilink32 Error] Error: Unable to perform link\nFailed\nElapsed time: 00:00:02.3\n</code></pre>\n\n<p>If I compile the application with the debug static TinyXML 2 library it compiles ok. Am I doing something wrong? I use C++ Builder 10.1 Berlin Update 2 Starter.</p>\n"}, {"tags": ["c++", "c", "memory", "malloc"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1484146155, "post_id": 41593858, "comment_id": 70390720, "body": "3149454400 floats is a <b>bit</b> too much for a stack-allocated array..."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1484146195, "post_id": 41593858, "comment_id": 70390747, "body": "One reason might be that the allocated memory has to be contiguous. If there is no such large block available then the allocation will fail."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1484146257, "post_id": 41593858, "comment_id": 70390781, "body": "As for the problem with the array, remember that most compilers puts their local variables on the stack, and the stack is quite limited (the default process stack size on Linux is 8MB)."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 1, "creation_date": 1484146258, "post_id": 41593858, "comment_id": 70390783, "body": "What is your platform? linux 64-bit?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1484146353, "post_id": 41593858, "comment_id": 70390864, "body": "Also, regarding the array, it&#39;s not an allocation in the same way that <code>malloc</code> does it. It is the compiler that handles it, and it sets the size at the time of compilation (C and C++ can differ here!). An array can <i>never</i> be <code>NULL</code>."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1484146697, "post_id": 41593858, "comment_id": 70391101, "body": "One thing I noticed is you&#39;re using <code>int i</code> in your calculation. Try casting those like this maybe <code>(size_t)i * i * sizeof float</code>"}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1484146733, "post_id": 41593858, "comment_id": 70391137, "body": "I meant <code>num</code> instead of <code>i</code>"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 2, "creation_date": 1484148998, "post_id": 41593858, "comment_id": 70392592, "body": "You really should remove the C tag, seeing as how you use <code>std::cout</code> and <code>std::endl</code>. This then of course bears the question why you use <code>malloc</code> in the first place, and why <code>NULL</code> instead of <code>nullptr</code>, and why you declare variables before using them."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1484154068, "post_id": 41593858, "comment_id": 70395880, "body": "@ZanLynx Casting is not needed here as in <code>(size_t)i * i * sizeof float</code>.  <a href=\"http://stackoverflow.com/a/41595104/2410359\">Reversing</a> the order accomplishes the needed widening.  <code>sizeof (float) * i * i </code>.  At least that stops the UB of <code>int</code> overflow."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "reply_to_user": {"reputation": 7116, "user_id": 5083516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f2aeeefc1a95ddb2f19612150ccd7ba?s=128&d=identicon&r=PG&f=1", "display_name": "plugwash", "link": "https://stackoverflow.com/users/5083516/plugwash"}, "edited": false, "score": 0, "creation_date": 1484157902, "post_id": 41593858, "comment_id": 70398271, "body": "@plugwash: It&#39;s the same problem but with a different number of bits."}], "answers": [{"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1484147039, "post_id": 41593968, "comment_id": 70391324, "body": "@Stargateur Of course. It would move it from the automatic storage into the static storage. Still not a very good idea though... The startup code will have to set the whole array to zeros, which might be a bit time-consuming."}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 1, "creation_date": 1484148381, "post_id": 41593968, "comment_id": 70392197, "body": "Going slightly off topic here, but most mainstream OS&#39;s would <i>probably</i> actually manage this being a very large array in static storage without being very time consuming - they either share a &#39;zero page&#39; or have a supply of &#39;already zero&#39;d pages&#39; or only allocate a zero page when accessed. Still probably not a great idea though - large allocations should always be on the heap."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1484148793, "post_id": 41593968, "comment_id": 70392471, "body": "It&#39;s also not what the OP is doing - 3x10^9 is the result of the multiplication, but the overflow is resulting in a very different request"}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": false, "score": 2, "last_activity_date": 1484146358, "creation_date": 1484146358, "answer_id": 41593968, "question_id": 41593858, "link": "https://stackoverflow.com/questions/41593858/why-does-malloc-fail-when-there-is-enough-memory/41593968#41593968", "title": "Why does malloc() fail when there is enough memory?", "body": "<p><code>float ls[3149454400];</code> is an array with automatic storage type, which is usually allocated on the process stack. A process stack is limited by default by a value <em>much</em> smaller than 12GB you are attempting to push there. So the <em>segmentation fault</em> you are observing is caused by the stack overflow, rather than by the <code>malloc</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1484150540, "post_id": 41594029, "comment_id": 70393594, "body": "Note that with 32-bit <code>size_t</code> and using <code>size_t num = 56120;</code>, <code>(num * num)*sizeof(float)</code> is still a problem.  That product overflows 32-bit math."}], "tags": [], "owner": {"reputation": 107, "user_id": 7308775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5754f639744d2f97c5fc09b75d61530c?s=128&d=identicon&r=PG&f=1", "display_name": "Kostas", "link": "https://stackoverflow.com/users/7308775/kostas"}, "is_accepted": false, "score": 6, "last_activity_date": 1484146564, "creation_date": 1484146564, "answer_id": 41594029, "question_id": 41593858, "link": "https://stackoverflow.com/questions/41593858/why-does-malloc-fail-when-there-is-enough-memory/41594029#41594029", "title": "Why does malloc() fail when there is enough memory?", "body": "<p>This is in contrast to what others have written, but for me, changing the variable num to size_t from int allows allocation. It could be that num*num overflows the int for malloc. Doing malloc with 56120 * 56120 instead of num*num should throw an overflow error.</p>\n"}, {"comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 5, "creation_date": 1484146700, "post_id": 41594035, "comment_id": 70391103, "body": "num should be <code>size_t</code> not <code>long long</code> or even <code>unsigned int</code>."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 2, "creation_date": 1484146863, "post_id": 41594035, "comment_id": 70391216, "body": "@Stargateur actually, any type that is large enough to hold the number will do just fine.  A long, or even unsigned int which can hold a number that size will work."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 5, "creation_date": 1484146959, "post_id": 41594035, "comment_id": 70391275, "body": "@UKMonkey <code>malloc()</code> take a <code>size_t</code>, use a <code>size_t</code>. Don&#39;t mix type or you will have problem like this question..."}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 1, "creation_date": 1484147094, "post_id": 41594035, "comment_id": 70391353, "body": "@Stargateur That depends on the use case, we don&#39;t really know what <code>num</code> means in this context. Imagine it means something like &#39;the number of dimensions I&#39;m doing my calculation in&#39; then that&#39;s not a good reason to make it a <code>size_t</code>. Yes, it is used in an expression which will eventually lead to a <code>size_t</code> as memory for those dimension is allocated, but in general you dont propagate types backwards like that and make <code>num</code> a <code>size_t</code>."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 2, "creation_date": 1484147477, "post_id": 41594035, "comment_id": 70391618, "body": "@MikeVine If <code>num</code> represent the size of the array, yes it should be <code>size_t</code>. Or the OP need to cast it properly. Here you say &quot;use a long long&quot; but what if the value don&#39;t fit in a <code>long long</code> next time? You propose to change the type of <code>num</code> why don&#39;t use the proper type?"}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 1, "creation_date": 1484147966, "post_id": 41594035, "comment_id": 70391937, "body": "@Stargateur Semantically, <code>num</code> should be whatever it properly represents. What if we also had a later line which went <code>float angle = (1&#47;num) * 360.0f;</code>. This has a very similar problem. Would you also fix this by saying &#39;num should be a float&#39;? In which case it needs to be a float AND a size_t... The only way round this is by properly casting to the right type <i>at the point of use</i> and having its local type be semantically whatever makes sense no matter what its use case is later."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 1, "creation_date": 1484148697, "post_id": 41594035, "comment_id": 70392404, "body": "@Stargateur you almost certainly mix types all the time without knowing it.  unsigned int x = 5 for example mixes types."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1484154635, "post_id": 41594035, "comment_id": 70396263, "body": "@UKMonkey &quot;any type that is large enough to hold the number will do just fine.&quot; is true yet considering <code>long</code>  or <code>unsigned int</code> for a memory size calculation is not using the best type available, which is <code>size_t</code> as that is the type <code>malloc()</code> receives.  <a href=\"http://stackoverflow.com/a/41595104/2410359\">Code can check memory requirements</a> using just <code>size_t</code> and the type of <code>num</code>.  No need to introduce another type."}], "tags": [], "owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "is_accepted": false, "score": 7, "last_activity_date": 1484146582, "creation_date": 1484146582, "answer_id": 41594035, "question_id": 41593858, "link": "https://stackoverflow.com/questions/41593858/why-does-malloc-fail-when-there-is-enough-memory/41594035#41594035", "title": "Why does malloc() fail when there is enough memory?", "body": "<pre><code>int num = 56120,i,j;\nls = (float *)malloc((num * num)*sizeof(float));\n</code></pre>\n\n<p><code>num</code> * <code>num</code> is <code>56120*56120</code> which is <code>3149454400</code> which overflows a <code>signed int</code> which causes undefined behavoir.</p>\n\n<p>The reason 40000 works is that 40000*40000 is representable as an int.</p>\n\n<p>Change the type of <code>num</code> to <code>long long</code> (or even <code>unsigned int</code>)</p>\n"}, {"comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 10, "creation_date": 1484146647, "post_id": 41594041, "comment_id": 70391065, "body": "num should be <code>size_t</code> not <code>long</code>"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 2, "creation_date": 1484146712, "post_id": 41594041, "comment_id": 70391121, "body": "@Stargateur Why should it be? <code>num</code> is not a size itself, so <code>size_t</code> seems inappropriate"}, {"owner": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "edited": false, "score": 0, "creation_date": 1484146867, "post_id": 41594041, "comment_id": 70391219, "body": "Even after using <code>long</code>, it fails : <a href=\"http://code.geeksforgeeks.org/gkj53M\" rel=\"nofollow noreferrer\">code.geeksforgeeks.org/gkj53M</a>"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1484146880, "post_id": 41594041, "comment_id": 70391226, "body": "@Ctx That&#39;s what malloc is defined like. <code>size_t</code> will correspond to one of the unsigned integer types of the platform and is defined as the type of the result of the <code>sizeof</code>   operator. The beauty is that code written that way is platform independent.  <code>size_t</code>  may be defined as <code>unsigned int</code> or <code>unsigned long</code> or even <code>unsigned long long</code> depending on the <code>int</code> and address size. Of course you can use the native type, but the code may fail (as we see) on other platforms."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 7, "creation_date": 1484146909, "post_id": 41594041, "comment_id": 70391238, "body": "@Ctx <code>malloc()</code> take a <code>size_t</code>, use a <code>size_t</code>."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "edited": false, "score": 0, "creation_date": 1484146917, "post_id": 41594041, "comment_id": 70391247, "body": "@SauravSahu The site there probably has imposed some limits on how much memory a program may use there"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1484146994, "post_id": 41594041, "comment_id": 70391301, "body": "@Stargateur I still disagree, you could cast the result of <code>(num * num) * sizeof(float)</code> to <code>size_t</code> inside the malloc, but this is unnecessary."}, {"owner": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "edited": false, "score": 0, "creation_date": 1484147021, "post_id": 41594041, "comment_id": 70391315, "body": "Do you know any website where there is no limit imposed? Please let me know."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "edited": false, "score": 1, "creation_date": 1484147121, "post_id": 41594041, "comment_id": 70391371, "body": "@SauravSahu I would be surprised if there was one... Just try it locally on a machine with sufficient RAM."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 1, "creation_date": 1484147187, "post_id": 41594041, "comment_id": 70391414, "body": "@Ctx If you cast the result it will fail, you must cast <code>num</code> not the result. use cast only when you can&#39;t do something else. And when you do you have to <b>verify</b> that you can. Here <code>num</code> must be positive and inferior to <code>SIZE_MAX</code>."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 2, "creation_date": 1484147268, "post_id": 41594041, "comment_id": 70391485, "body": "@Stargateur I meant &quot;leave num as long and cast the result&quot;. num is semantically <i>not</i> a <code>size_t</code> in this program, so declaring it as one is outright misleading and wrong in my eyes."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1484147309, "post_id": 41594041, "comment_id": 70391517, "body": "@PeterA.Schneider what are you trying to say? I know this command. ulimit for data segment is unlimited by default on linux, btw."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1484147412, "post_id": 41594041, "comment_id": 70391585, "body": "@Ctx I thought you were not aware of it since you said &quot; I would be surprised if there was one [a limit on memory usage]... Just try it locally on a machine with sufficient RAM.&quot; On a properly managed server with more than one user I&#39;d actually be amazed <i>if there were no limits.</i>"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1484147539, "post_id": 41594041, "comment_id": 70391655, "body": "@PeterA.Schneider Yes, on a shared server with many users there should be such a limit, I agree. But it&#39;s not default on a vanilla linux installation."}, {"owner": {"reputation": 1521, "user_id": 5005808, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/008c946eaae26038155b08097603f230?s=128&d=identicon&r=PG&f=1", "display_name": "pfc", "link": "https://stackoverflow.com/users/5005808/pfc"}, "edited": false, "score": 0, "creation_date": 1484149295, "post_id": 41594041, "comment_id": 70392789, "body": "Oh yes. This is the right solution. I change the type of <code>num</code> to <code>long</code> and everything becomes correct. Thank you so much!"}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 5, "creation_date": 1484150559, "post_id": 41594041, "comment_id": 70393607, "body": "@Ctx <i>Use the data type <code>long</code> for <code>num</code></i>  and <i>you could cast the result of <code>(num * num) * sizeof(float)</code> to <code>size_t</code></i> Try that on Windows, where <code>long</code> is still a 32-bit <i>signed</i> value even for 64-bit applications.  Still nasty."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1484150810, "post_id": 41594041, "comment_id": 70393789, "body": "@AndrewHenle Well, you will always find a combination of &quot;value of num&quot;, &quot;datatype&quot; and &quot;platform&quot; which will fail in this context."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1484150955, "post_id": 41594041, "comment_id": 70393897, "body": "@Ctx Which is <i>why</i> such things as <code>size_t</code> exist.  You still should check for overflow, though."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1484151113, "post_id": 41594041, "comment_id": 70393994, "body": "@AndrewHenle It is definitively the wrong way to declare all variables as size_t which could somehow be part of a calculation for a malloc size. Imagine using a formula based on argc. <code>int main (size_t argc, char **argv)</code>?"}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1484151218, "post_id": 41594041, "comment_id": 70394062, "body": "@Ctx <i>It is definitively the wrong way to declare all variables as <code>size_t</code> which could somehow be part of a calculation for a malloc size. Imagine using a formula based on argc. <code>int main (size_t argc, char **argv)</code>?</i>  That&#39;s an irrelevant <a href=\"https://en.wikipedia.org/wiki/Straw_man\" rel=\"nofollow noreferrer\">strawman</a>."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1484153297, "post_id": 41594041, "comment_id": 70395376, "body": "@AndrewHenle I am sorry, but the definition of &quot;Strawman&quot; you linked is not appropriate for this situation at all. Please do not try to cover your lack of reasoning with such unfair methods. Thank you."}, {"owner": {"reputation": 8784, "user_id": 2728148, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GXsMO.png?s=128&g=1", "display_name": "Cort Ammon", "link": "https://stackoverflow.com/users/2728148/cort-ammon"}, "edited": false, "score": 1, "creation_date": 1484155557, "post_id": 41594041, "comment_id": 70396850, "body": "@Ctx I think Andrew&#39;s point is that, when facing the need to allocate memory, the type <code>size_t</code> is explicitly defined to avoid these sorts of issues.  You could do a platform-specific approach, true.  Alternatively, you could use <code>size_t</code> and get the correct result on all platforms, including future ones!  Even if you don&#39;t declare the variables as <code>size_t</code>, you should be doing your math in that type."}, {"owner": {"reputation": 1060, "user_id": 1941945, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cc3358da4e76cedadb381c2fd32f3e45?s=128&d=identicon&r=PG", "display_name": "Kahler", "link": "https://stackoverflow.com/users/1941945/kahler"}, "edited": false, "score": 0, "creation_date": 1484155678, "post_id": 41594041, "comment_id": 70396937, "body": "Time to move to chat? I won&#39;t edit the answer to <code>size_t</code> due to the arguing, but it would improve it."}, {"owner": {"reputation": 7116, "user_id": 5083516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f2aeeefc1a95ddb2f19612150ccd7ba?s=128&d=identicon&r=PG&f=1", "display_name": "plugwash", "link": "https://stackoverflow.com/users/5083516/plugwash"}, "edited": false, "score": 1, "creation_date": 1484155790, "post_id": 41594041, "comment_id": 70397002, "body": "Using &quot;long&quot; in C is generally the wrong answer, if you want something of a fixed size use one of the C99 fixed size types. If you want something that represents the maximum size of a single allocation use size_t."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 8784, "user_id": 2728148, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GXsMO.png?s=128&g=1", "display_name": "Cort Ammon", "link": "https://stackoverflow.com/users/2728148/cort-ammon"}, "edited": false, "score": 0, "creation_date": 1484156184, "post_id": 41594041, "comment_id": 70397254, "body": "@CortAmmon Yes, casting it to size_t in the calculation itself would also be an appropriate option. If this is what we all can live with, I will edit the answer to this."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 1, "creation_date": 1484158230, "post_id": 41594041, "comment_id": 70398424, "body": "@Ctx: <code>num</code> is semantically unsigned. It is meaningless to make it negative. Making it a <code>size_t</code> would make a lot of sense."}], "tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": true, "score": 22, "last_activity_date": 1484156212, "last_edit_date": 1484156212, "creation_date": 1484146604, "answer_id": 41594041, "question_id": 41593858, "link": "https://stackoverflow.com/questions/41593858/why-does-malloc-fail-when-there-is-enough-memory/41594041#41594041", "title": "Why does malloc() fail when there is enough memory?", "body": "<p>The problem is, that your calculation</p>\n\n<pre><code>(num * num) * sizeof(float)\n</code></pre>\n\n<p>is done as 32-bit signed integer calculation and the result for num=56120 is</p>\n\n<pre><code>-4582051584\n</code></pre>\n\n<p>Which is then interpreted for size_t with a very huge value</p>\n\n<pre><code>18446744069127500032\n</code></pre>\n\n<p>You do not have so much memory ;) This is the reason why <code>malloc()</code> fails.</p>\n\n<p>Cast <code>num</code> to <code>size_t</code> in the calculation of malloc, then it should work as expected.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 10, "last_activity_date": 1484150029, "last_edit_date": 1484150029, "creation_date": 1484149602, "answer_id": 41595104, "question_id": 41593858, "link": "https://stackoverflow.com/questions/41593858/why-does-malloc-fail-when-there-is-enough-memory/41595104#41595104", "title": "Why does malloc() fail when there is enough memory?", "body": "<p>As other have pointed out, <code>56120*56120</code> overflows <code>int</code> math on OP's platform.  That is undefined behavior (UB).</p>\n\n<p><code>malloc(size_t x)</code> takes a <code>size_t</code> argument and the values passed to it is best calculated using at least <code>size_t</code> math.  By reversing the multiplication order, this is accomplished.  <code>sizeof(float) * num</code> cause <code>num</code> to be widened to at least <code>size_t</code> before the multiplication.</p>\n\n<pre><code>int num = 56120,i,j;\n// ls = (float *)malloc((num * num)*sizeof(float));\nls = (float *) malloc(sizeof(float) * num * num);\n</code></pre>\n\n<p>Even though this prevents UB, This does not prevent overflow as mathematically  <code>sizeof(float)*56120*56120</code> may still exceed <code>SIZE_MAX</code>.</p>\n\n<p>Code could detect potential overflow beforehand.</p>\n\n<pre><code>if (num &lt; 0 || SIZE_MAX/sizeof(float)/num &lt; num) Handle_Error();\n</code></pre>\n\n<p>No need to cast the result of <code>malloc()</code>.<br>\nUsing the size of the referenced variable is easier to code and maintain than sizing to the type.<br>\nWhen <code>num == 0</code>, <code>malloc(0) == NULL</code> is not necessarily an out-of-memory.<br>\nAll together:</p>\n\n<pre><code>int num = 56120;\nif (num &lt; 0 || ((num &gt; 0) &amp;&amp; SIZE_MAX/(sizeof *ls)/num &lt; num)) {\n  Handle_Error();\n}\nls = malloc(sizeof *ls * num * num);\nif (ls == NULL &amp;&amp; num != 0) {\n  Handle_OOM();\n}\n</code></pre>\n"}], "owner": {"reputation": 1521, "user_id": 5005808, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/008c946eaae26038155b08097603f230?s=128&d=identicon&r=PG&f=1", "display_name": "pfc", "link": "https://stackoverflow.com/users/5005808/pfc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4568, "favorite_count": 1, "accepted_answer_id": 41594041, "answer_count": 5, "score": 15, "last_activity_date": 1484193506, "creation_date": 1484146028, "last_edit_date": 1484156332, "question_id": 41593858, "link": "https://stackoverflow.com/questions/41593858/why-does-malloc-fail-when-there-is-enough-memory", "title": "Why does malloc() fail when there is enough memory?", "body": "<p>I'm using a server with 128GB memory to do some computation. I need to <code>malloc()</code> a 2D float array of size 56120 * 56120. An example code is as follows:</p>\n\n<pre><code>int main(int argc, char const *argv[])\n{\n    float *ls;\n    int num = 56120,i,j;\n    ls = (float *)malloc((num * num)*sizeof(float));\n    if(ls == NULL){\n        cout &lt;&lt; \"malloc failed !!!\" &lt;&lt; endl;\n        while(1);\n    }\n    cout &lt;&lt; \"malloc succeeded ~~~\" &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>The code compiles successfully but when I run it, it says <code>\"malloc failed !!!\"</code>. As I calculated, it only takes about 11GB of memory to hold the whole array. Before I started the code, I checked the server and there was 110GB of free memory available. Why does the error happen?</p>\n\n<p>I also found that if I reduce <code>num</code> to, say 40000, then the malloc will succeed.</p>\n\n<p>Does this mean that there is a limit on the maximum memory that can be allocated by <code>malloc()</code>?</p>\n\n<p>Moreover, if I change the way of allocation, directly declaring a 2D float array of such size, as follows:</p>\n\n<pre><code>int main(int argc, char const *argv[])\n{\n    int num = 56120,i,j;\n    float ls[3149454400];\n    if(ls == NULL){\n        cout &lt;&lt; \"malloc failed !!!\" &lt;&lt; endl;\n        while(1);\n    }\n    cout &lt;&lt; \"malloc succeeded ~~~\" &lt;&lt; endl;\n    for(i = num - 10 ; i &lt; num; i ++){\n        for( j = num - 10; j &lt; num ; j++){\n            ls[i*num + j] = 1;\n        }\n    }\n    for(i = num - 11 ; i &lt; num; i ++){\n        for( j = num - 11; j &lt; num ; j++){\n            cout &lt;&lt; ls[i*num + j] &lt;&lt; endl;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>then I compile and run it. I get a <code>\"Segmentation fault\"</code>.</p>\n\n<p>How can I solve this?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "edited": false, "score": 1, "creation_date": 1484145977, "post_id": 41593704, "comment_id": 70390596, "body": "Not exactly a solution, <code>switch-case</code> would have been a better choice for you."}, {"owner": {"reputation": 1, "user_id": 7404268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b926407f94106b6313a0f2b2e788a21b?s=128&d=identicon&r=PG&f=1", "display_name": "Dom Dienst", "link": "https://stackoverflow.com/users/7404268/dom-dienst"}, "reply_to_user": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "edited": false, "score": 0, "creation_date": 1484146235, "post_id": 41593704, "comment_id": 70390770, "body": "Can you show me an example of this?"}, {"owner": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "edited": false, "score": 0, "creation_date": 1484146328, "post_id": 41593704, "comment_id": 70390838, "body": "For small set of possible cases, <code>switch-case</code> is O(1) TC, and more concise."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1484146736, "post_id": 41593704, "comment_id": 70391139, "body": "I think you want to return a useful value from <code>StartUpMenu</code> so you know what the choice was."}], "answers": [{"comments": [{"owner": {"reputation": 26, "user_id": 5106550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb0850b788e650fbd4763198d0412ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver Gibson", "link": "https://stackoverflow.com/users/5106550/oliver-gibson"}, "reply_to_user": {"reputation": 1, "user_id": 7404268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b926407f94106b6313a0f2b2e788a21b?s=128&d=identicon&r=PG&f=1", "display_name": "Dom Dienst", "link": "https://stackoverflow.com/users/7404268/dom-dienst"}, "edited": false, "score": 0, "creation_date": 1484146510, "post_id": 41593927, "comment_id": 70390968, "body": "could you provide the full code, unless it spreads across multiple files"}], "tags": [], "owner": {"reputation": 26, "user_id": 5106550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb0850b788e650fbd4763198d0412ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver Gibson", "link": "https://stackoverflow.com/users/5106550/oliver-gibson"}, "is_accepted": false, "score": 0, "last_activity_date": 1484146210, "creation_date": 1484146210, "answer_id": 41593927, "question_id": 41593704, "link": "https://stackoverflow.com/questions/41593704/why-will-my-opening-menu-not-work-in-c/41593927#41593927", "title": "Why will my opening menu not work in C++?", "body": "<p>You are not calling function GetNote anywhere in your code.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 7404268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b926407f94106b6313a0f2b2e788a21b?s=128&d=identicon&r=PG&f=1", "display_name": "Dom Dienst", "link": "https://stackoverflow.com/users/7404268/dom-dienst"}, "edited": false, "score": 0, "creation_date": 1484147324, "post_id": 41594169, "comment_id": 70391529, "body": "I have changed the code so now when you press 2 or 3 it moves onto the GetNote() function. What shall I do to allow the command for &#39;3&#39; to cancel the program?"}, {"owner": {"reputation": 12896, "user_id": 104774, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/gQmt5.jpg?s=128&g=1", "display_name": "stefaanv", "link": "https://stackoverflow.com/users/104774/stefaanv"}, "reply_to_user": {"reputation": 1, "user_id": 7404268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b926407f94106b6313a0f2b2e788a21b?s=128&d=identicon&r=PG&f=1", "display_name": "Dom Dienst", "link": "https://stackoverflow.com/users/7404268/dom-dienst"}, "edited": false, "score": 0, "creation_date": 1484147598, "post_id": 41594169, "comment_id": 70391693, "body": "If you return the given option, you can exit when StartupMenu() returns 3"}, {"owner": {"reputation": 1, "user_id": 7404268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b926407f94106b6313a0f2b2e788a21b?s=128&d=identicon&r=PG&f=1", "display_name": "Dom Dienst", "link": "https://stackoverflow.com/users/7404268/dom-dienst"}, "edited": false, "score": 0, "creation_date": 1484150475, "post_id": 41594169, "comment_id": 70393548, "body": "I have rectified this but now when you choose the option to continue either working with Bass or Melody, you are only allowed to input one value, what if the user wants to input more then that? How is this rectified?"}], "tags": [], "owner": {"reputation": 12896, "user_id": 104774, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/gQmt5.jpg?s=128&g=1", "display_name": "stefaanv", "link": "https://stackoverflow.com/users/104774/stefaanv"}, "is_accepted": false, "score": 2, "last_activity_date": 1484146962, "creation_date": 1484146962, "answer_id": 41594169, "question_id": 41593704, "link": "https://stackoverflow.com/questions/41593704/why-will-my-opening-menu-not-work-in-c/41594169#41594169", "title": "Why will my opening menu not work in C++?", "body": "<p>Only in option 3, you do a break from the loop, which returns from the loop so your program continues.  Option 1 and 2 (and default) just shows the choice and stays in the loop, so a new choice is asked.  You can break when option 1 and 2 are given, but you probably want to return the option so your program can act on it.</p>\n\n<p>By the way, there is a typo in your code: <code>else if (choice == 1;)</code> shouldn't contain a ';'.</p>\n"}], "owner": {"reputation": 1, "user_id": 7404268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b926407f94106b6313a0f2b2e788a21b?s=128&d=identicon&r=PG&f=1", "display_name": "Dom Dienst", "link": "https://stackoverflow.com/users/7404268/dom-dienst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1484156196, "creation_date": 1484145521, "last_edit_date": 1484156196, "question_id": 41593704, "link": "https://stackoverflow.com/questions/41593704/why-will-my-opening-menu-not-work-in-c", "title": "Why will my opening menu not work in C++?", "body": "<p>At the moment I am compiling a program to do<br>\n1.  Prompt the user to enter a fixed number of MIDI notes for melody and bass  </p>\n\n<p>This is what the opening menu is for. However, the program will not proceed to prompt the user for the notes unless option '3' is pressed which as you can see is the EXIT option. I need to implement this piece of code to allow the user to enter a series of notes for 1. Melody and then 2. Bass. Why will it not take me to the validation if I press 1. or 2. but only when I press 3.?</p>\n\n<pre><code>using namespace std;\n#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n\nusing namespace std;\n//********GET MIDI********//\nstring GetNote()\n{\n    string input;\n    int loop = 1;\n    cout &lt;&lt; \"Hello, please type in a note: \"&lt;&lt; endl;\n    cin &gt;&gt; input;\n    while (1)\n    {\n\n        if (input.length() &lt; 2 || input.length() &gt; 3) //Step 1: If note name length is less than 2 OR more than 3, return false\n        {\n        cout&lt;&lt;\"Note must be either 2 or 3 characters long!\\n\";\n        cin &gt;&gt; input;\n        }\n\n        else if (((int)input[0] &lt; 65)|| ((int)input[0] &gt; 71 )) //Step 2: The note must be/(or be) between A and G\n        {\n        cout&lt;&lt;\"The note must be between A to G!\\n\";\n        cin &gt;&gt; input;\n        }\n\n        else if (input.length() == 2 &amp;&amp; (isdigit(input[1]) == false))\n            //(isdigit(note[GetValidNote()-1]) == false) //Step 3: If true, the last character must be a digit\n        {\n        cout&lt;&lt;\"Last character must be a digit!\\n\";\n        cin &gt;&gt; input;\n        }\n        else if (input.length() == 3 &amp;&amp; (isdigit(input[2]) == false))\n            //(isdigit(note[GetValidNote()-1]) == false) //Step 3: If true, the last character must be a digit\n        {\n        cout&lt;&lt;\"Last character must be a digit!\\n\";\n        cin &gt;&gt; input;\n        }\n\n         else if (input.length() == 3 &amp;&amp; input[1] !='#') //Step 4: If note length is 3 note[1] (character 2) must be '#'.\n        {\n        cout&lt;&lt;\"Invalid sharp note\\n\";\n        cin &gt;&gt; input;\n        }\n        else\n        {\n            return input;\n        }\n    }\n\n}\n\n//********START UP MENU*******//\n\n\nint StartUpMenu()\n{\n    while (1)\n    {\n        int choice;\n\n        cout &lt;&lt;\"::menu option::\\n\\n\"\n            &lt;&lt;\"1. Bass\\n\"\n            &lt;&lt;\"2. Melody\\n\"\n            &lt;&lt;\"3. Exit\\n\"\n            &lt;&lt;\"Would you like to work with Bass or Melody first? Please enter 1 for Bass or 2 for Melody or 3 to Exit:\";\n\n        cin &gt;&gt; choice;\n\n        if(choice == 3) break;\n\n\n        else if (choice == 1)\n        {\n            system (\"CLS\");\n            cout&lt;&lt;\"1. Bass \\n\\n\";\n\n            GetNote();\n\n            system (\"PAUSE\");\n            system (\"CLS\");\n\n\n        }\n\n        else if (choice == 2)\n        {\n             system (\"CLS\");\n            cout&lt;&lt;\"2. Melody \\n\\n\";\n\n            GetNote();\n\n            system (\"PAUSE\");\n            system (\"CLS\");\n        }\n\n        else if (choice &gt; 3 || choice &lt; 1)\n        {\n            system (\"CLS\");\n            cout&lt;&lt;\"2. Melody \\n\\n\";\n            system (\"PAUSE\");\n            system (\"CLS\");\n        }\n\n    }\n\n    return 0;\n}\n\n\n//********VALIDATION FOR NOTE NAME********//\n\n\n\nint MidiStorage(string validnote)\n{\n    int MidiLetter = validnote[0] - 65;\n\n    int Note;\n    int Octave = validnote[validnote.length()-1]; //THIS IS A MATHMATICAL EQUATION TO GET THE COMPUTER TO REALISE WHAT AN OCTAVE IS USING THE MIDI NOTE CHART.\n\n    if(validnote[0] == 'A')\n\n    {\n        MidiLetter = 9;\n    }\n\n    else if (validnote[0] == 'B')\n\n    {\n        MidiLetter = 11;\n    }\n\n    else if (validnote[0] == 'C')\n\n    {\n        MidiLetter = 12;\n    }\n\n    else if (validnote[0] == 'D')\n    {\n        MidiLetter = 14;\n    }\n\n    else if (validnote[0] == 'E')\n    {\n        MidiLetter = 16;\n    }\n\n    else if (validnote[0] == 'F')\n    {\n        MidiLetter = 17;\n    }\n\n    else if (validnote[0] == 'G')\n    {\n        MidiLetter = 19;\n    }\n    /////////////////////\n\n    int midivalue = MidiLetter + (Octave * 12);\n    if(validnote.length() == 3)\n    {\n        midivalue += 1;\n    }\n\n}\n\n//Validation\n\nint main()\n{\nstring note;\n\nint midivalue;\n\nStartUpMenu(); //This function brings you to the start up menu\n\nnote = GetNote(); //This function tells the computer what note between A-G and  the user has given\n\ncout &lt;&lt; \"The note you chose is: \" &lt;&lt; note &lt;&lt; endl;\n\nMidiStorage(note);\nGetNote();\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "templates", "visual-studio-2015", "constexpr"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1484145455, "post_id": 41593649, "comment_id": 70390214, "body": "<code>constexpr</code> functions were in fact introduced in C++11."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1484145502, "post_id": 41593649, "comment_id": 70390250, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/hh567368.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/hh567368.aspx</a> They don&#39;t support extended constexpr FWIW."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1484145725, "post_id": 41593649, "comment_id": 70390392, "body": "VS doesn&#39;t have complete Expression SFINAE support yet"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1484145781, "post_id": 41593649, "comment_id": 70390424, "body": "@KerrekSB Thanks I&#39;ve updated. That just puts Visual Studio 2015 3 more years out of date."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1484145864, "post_id": 41593649, "comment_id": 70390492, "body": "Try <code>template &lt;class T,class=enable_if_t&lt;condition&lt;T&gt;()&gt;&gt; void test() { cout &lt;&lt; &quot;true\\n&quot;; }</code>?"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1484145887, "post_id": 41593649, "comment_id": 70390509, "body": "@GillBates Is this &quot;extended <code>constexpr</code>&quot; functionality? As has been pointed out this should have worked since C++11."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1484145942, "post_id": 41593649, "comment_id": 70390569, "body": "@bolov I&#39;m not sure what that means but it seems like it might be the problem."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1484146001, "post_id": 41593649, "comment_id": 70390612, "body": "@JonathanMee The main flaw in MSVC&#39;s SFINAE is not extended <code>constexpr</code>, but what they call &quot;expression SFINAE&quot;.  The biggest part that it means is that <code>decltype</code> doesn&#39;t really work with SFINAE, but what exactly it covers is not something I&#39;ve ever been able to work out.  Maybe it is causing a problem here.  But the error message makes me think that it is seeing two templates it somehow considers identical, which may be an unrelated problem.  Each version of MSVC states they have solved some &quot;expression SFINAE&quot; problems.  :/"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1484146271, "post_id": 41593649, "comment_id": 70390793, "body": "@Yakk That didn&#39;t work for me either, still gives error C2995. You can test for yourself here: <a href=\"http://rextester.com/QMEU55701\" rel=\"nofollow noreferrer\">rextester.com/QMEU55701</a>"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1484146443, "post_id": 41593649, "comment_id": 70390922, "body": "@JonathanMee it simply means that other than very simple expressions for SFINAE you can&#39;t be sure SFINAE will work on VS."}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1484146723, "post_id": 41593649, "comment_id": 70391129, "body": "@JonathanMee The solution suggested by <code>Yakk</code> works: <a href=\"http://rextester.com/XLEV56307\" rel=\"nofollow noreferrer\">rextester.com/XLEV56307</a>"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1484146959, "post_id": 41593649, "comment_id": 70391276, "body": "@SimonKraemer Actually it doesn&#39;t: <a href=\"http://rextester.com/live/OFNM72056\" rel=\"nofollow noreferrer\">rextester.com/live/OFNM72056</a> But strangely when you add in the <code>enable_if</code> on the first <code>test</code>&#39;s return it does work o.O"}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1484147086, "post_id": 41593649, "comment_id": 70391348, "body": "@JonathanMee .... Oh I missed that."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1484147122, "post_id": 41593649, "comment_id": 70391372, "body": "@SimonKraemer That just makes me more confused at what&#39;s going on here."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1484148131, "post_id": 41593649, "comment_id": 70392041, "body": "@bolov Well... this MCVE is very simple compared to <a href=\"http://stackoverflow.com/a/41592619/2642059\">what I&#39;m actually trying to do</a>. Does that count?"}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 1, "creation_date": 1484148623, "post_id": 41593649, "comment_id": 70392345, "body": "@JonathanMee I can offer you a workaround by using a template struct as proxy. <a href=\"http://rextester.com/TGMB94634\" rel=\"nofollow noreferrer\">rextester.com/TGMB94634</a>"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1484148625, "post_id": 41593649, "comment_id": 70392349, "body": "@JonathanMee yes, it means that your real example has even less chance to work on VS. Take it as it is: VS doesn&#39;t yet have support this feature. They are working on it, as Yakk said, they incrementally added support with each version. You have a few options: a) wait until they implement it in a future version, b) switch to a different compiler (this might not be a solution) c) search for a workaround (you should focus on finding a workaround)"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 5, "creation_date": 1484148658, "post_id": 41593649, "comment_id": 70392370, "body": "<a href=\"https://blogs.msdn.microsoft.com/vcblog/2016/06/07/expression-sfinae-improvements-in-vs-2015-update-3/\" rel=\"nofollow noreferrer\">blogs.msdn.microsoft.com/vcblog/2016/06/07/&hellip;</a>"}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 1, "creation_date": 1484149122, "post_id": 41593649, "comment_id": 70392670, "body": "@JonathanMee The workaround applied to your example: <a href=\"http://rextester.com/ULDFM22040\" rel=\"nofollow noreferrer\">rextester.com/ULDFM22040</a>"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1484149266, "post_id": 41593649, "comment_id": 70392763, "body": "@SimonKraemer Yup, I was just reading through all the bugs... Yikes. If you care to post as an answer I will accept shortly."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1484149328, "post_id": 41593649, "comment_id": 70392815, "body": "@T.C. Thanks that had the workaround for me, albeit a somewhat ugly one."}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1484156962, "post_id": 41593649, "comment_id": 70397775, "body": "@GillBates It looks like they have partial support for extended constexpr, but they&#39;re not all the way there yet.  <a href=\"http://ideone.com/sCPYi0\" rel=\"nofollow noreferrer\">This</a> works on <a href=\"http://webcompiler.cloudapp.net/\" rel=\"nofollow noreferrer\">the online MSVC compiler</a>, but I believe Community edition still has trouble with it (not 100% sure of this, though)."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1484157839, "post_id": 41593649, "comment_id": 70398240, "body": "@JustinTime Hmmm... I am using the community version... Though my current problem certainly extends to all versions. I thought that the compiler was consistent across all the versions anyway?"}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1484158410, "post_id": 41593649, "comment_id": 70398534, "body": "@JonathanMee I believe all of the installable versions use the same compiler, but I&#39;m not sure if the online compiler does, too; the online one at cloudapp has a different build number than the VS 2015 Update 3 one (19.10.24903.0 for Cloudapp, 14.0.25420.10 for Update 3), but I&#39;m not sure if that indicates anything more than that it&#39;s an online build.  I <i>think</i> the online one is updated more frequently than major updates are pushed to the installable versions (especially considering it was updated a bit less than a week ago), but that&#39;s honestly just a guess."}], "answers": [{"comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1484156356, "post_id": 41596518, "comment_id": 70397373, "body": "Can you help me understand what <code>counter_type</code> is doing in the template parameters? It seems completely unrelated to the other template arguments. Maybe that&#39;s the point?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1484156530, "post_id": 41596518, "comment_id": 70397495, "body": "@JonathanMee Guarantees they have different template signatures"}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1484156601, "post_id": 41596518, "comment_id": 70397546, "body": "As far as I understand it: <code>counter_type&lt;0&gt;</code> is different from <code>counter_type&lt;1&gt;</code> making the two template functions &quot;really&quot; different from another. As it is variadic (see the ellipsis) you don&#39;t have to pass anything at this position. It just helps the compiler to distinguish between the 2 functions."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1484156790, "post_id": 41596518, "comment_id": 70397669, "body": "@SimonKraemer Yeah that&#39;s what I got too. Seems like a pretty high hoop to jump through when the SFINAE should already work :("}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 3, "last_activity_date": 1484153900, "creation_date": 1484153900, "answer_id": 41596518, "question_id": 41593649, "link": "https://stackoverflow.com/questions/41593649/why-wont-visual-studio-let-me-use-a-templatized-constexpr-function-in-enable-i/41596518#41596518", "title": "Why Won&#39;t Visual Studio let me use a Templatized, constexpr Function in enable_if?", "body": "<p>The problem is that you end up with two different template <code>test</code> of the form:</p>\n\n<pre><code>template&lt;class&gt;void test()\n</code></pre>\n\n<p>and the compiler complains.  This may be related to expression SFINAE failure, where it doesn't evaluate the expression of <code>condition&lt;T&gt;()</code> \"early enough\", or fails in another way.</p>\n\n<p>Here is a workaround:</p>\n\n<pre><code>template&lt;std::size_t&gt;\nstruct counter{ enum type{}; };\n\ntemplate&lt;std::size_t N&gt;\nusing counter_type=typename counter&lt;N&gt;::type;\n\ntemplate &lt;typename T&gt;\nconstexpr bool condition() { return sizeof(T) &gt; 1; }\n\ntemplate &lt;class T,counter_type&lt;0&gt;...,class=std::enable_if_t&lt;condition&lt;T&gt;()&gt;&gt;\nvoid test() { std::cout &lt;&lt; \"true\\n\"; }\n\ntemplate &lt;class T,counter_type&lt;1&gt;...,class=std::enable_if_t&lt;!condition&lt;T&gt;()&gt;&gt;\nvoid test() { std::cout &lt;&lt; \"false\\n\"; }\n</code></pre>\n\n<p>Now the template signatures of the two different <code>test</code> differ, and the expression SFINAE evaluation of <code>condition&lt;T&gt;()</code> not working quite right doesn't cause a problem.</p>\n"}, {"comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1484155726, "post_id": 41596681, "comment_id": 70396967, "body": "Can you help me understand this? So if the <code>enable_if</code> succeeds we&#39;re compiling <code>template &lt;class T, void* = nullptr&gt; void test() { cout &lt;&lt; &quot;true\\n&quot;; }</code> that assignment in the template parameters doesn&#39;t make any sense to me."}, {"owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1484156112, "post_id": 41596681, "comment_id": 70397201, "body": "@JonathanMee: see  <a href=\"http://stackoverflow.com/questions/36499008/sfinae-works-differently-in-cases-of-type-and-non-type-template-parameters\">here</a>. Funnily, it&#39;s also Yakk who gave the answer :-)"}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 1, "creation_date": 1484156206, "post_id": 41596681, "comment_id": 70397270, "body": "Does this really work? Rextester doesn&#39;t like it: <a href=\"http://rextester.com/ZCLIE12472\" rel=\"nofollow noreferrer\">rextester.com/ZCLIE12472</a>"}, {"owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1484156477, "post_id": 41596681, "comment_id": 70397458, "body": "@SimonKraemer: thanks for the comment. <a href=\"http://coliru.stacked-crooked.com/a/3d2099231fad37aa\" rel=\"nofollow noreferrer\">coliru does</a> (and it also did before C++11 afai remember), moreover it&#39;s a basic trick ... not sure why rextester doesn&#39;t."}, {"owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1484156641, "post_id": 41596681, "comment_id": 70397568, "body": "@Yakk: seems so. (anyways I think I remember it worked for me in MSVC2015, but maybe I&#39;m wrong)"}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1484156703, "post_id": 41596681, "comment_id": 70397611, "body": "Tried it locally and it doesn&#39;t work here either. Same error."}, {"owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "edited": false, "score": 0, "creation_date": 1484157443, "post_id": 41596681, "comment_id": 70398024, "body": "Sorry, my memory was refering to a slightly different case, namely where <code>condition()</code> is directly replaced by the condition itself, i.e. here <code>(sizeof(T)&gt;1)</code>. Then it works in MSVC 2015. Otherwise, Simon&#39;s answer applies."}], "tags": [], "owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "is_accepted": false, "score": 2, "last_activity_date": 1484158705, "last_edit_date": 1484158705, "creation_date": 1484154422, "answer_id": 41596681, "question_id": 41593649, "link": "https://stackoverflow.com/questions/41593649/why-wont-visual-studio-let-me-use-a-templatized-constexpr-function-in-enable-i/41596681#41596681", "title": "Why Won&#39;t Visual Studio let me use a Templatized, constexpr Function in enable_if?", "body": "<p>Another option to @Yakk's answer:</p>\n\n<pre><code>template &lt;class T, std::enable_if_t&lt;(sizeof(T) &gt; 1)&gt;* = nullptr&gt;\nvoid test() { std::cout &lt;&lt; \"true\\n\"; }\n\ntemplate &lt;class T, std::enable_if_t&lt;!(sizeof(T) &gt; 1)&gt;* = nullptr&gt;\nvoid test() { std::cout &lt;&lt; \"false\\n\"; }\n</code></pre>\n\n<p>EDIT: just saw that this is basically the solution to which TC pointed to in the comments.</p>\n\n<p>EDIT2: corrected code to compile in MSVC2015, see comments.</p>\n"}, {"comments": [{"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1484157003, "post_id": 41597153, "comment_id": 70397799, "body": "Just as a comment to my answer: In most cases you won&#39;t even need the constexpr function and can go with the struct only. In the example above you could easily replace <code>static const bool value = condition&lt;T&gt;();</code> with <code>static const bool value = sizeof(T) &gt; 1;</code> and get rid of the constexpr function. I would say that it depends on the use case and personal preference which way to here."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1484160139, "post_id": 41597153, "comment_id": 70399480, "body": "I would never, ever trust a MSVC SFINAE case where there is <code>decltype</code> as part of the decision to fail or not; I&#39;ve seen far to many bugs, where it &quot;cache&quot;s the wrong result and gets completely insane behavior.  Maybe your &quot;go through a template type&quot; solution avoids this, but I&#39;d want to see extensive testing before I trusted it.  The &quot;incomplete support&quot; basically means &quot;it goes wrong in unpredictable ways rather than failing with an error&quot;.  It is horrid."}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1484162018, "post_id": 41597153, "comment_id": 70400476, "body": "@Yakk Good to know. In this case <code>divtype</code> should rather provide 3 specializations for the 3 overloads of <code>std::div</code>"}], "tags": [], "owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "is_accepted": true, "score": 6, "last_activity_date": 1484155887, "last_edit_date": 1495535361, "creation_date": 1484155887, "answer_id": 41597153, "question_id": 41593649, "link": "https://stackoverflow.com/questions/41593649/why-wont-visual-studio-let-me-use-a-templatized-constexpr-function-in-enable-i/41597153#41597153", "title": "Why Won&#39;t Visual Studio let me use a Templatized, constexpr Function in enable_if?", "body": "<p>The problem seems to be that MSVC14/VS2015 is not capable of correctly resolving SFINAE expressions in combination with return values of constexpr functions as template parameters.</p>\n\n<p>As a workaround you can assign the return value of your constexpr to a 'static const' member of a struct and use this member as template parameter.</p>\n\n<pre><code>#include &lt;type_traits&gt;\n#include &lt;iostream&gt;\n\nusing std::enable_if_t;\nusing std::cout;\n\ntemplate &lt;typename T&gt;\nconstexpr bool condition() { return sizeof(T) &gt; 1; }\n\ntemplate &lt;typename T&gt;\nstruct condition_ { static const bool value = condition&lt;T&gt;();};\n\ntemplate &lt;typename T&gt;\nenable_if_t&lt;condition_&lt;T&gt;::value&gt; test() { cout &lt;&lt; \"true\\n\"; }\ntemplate &lt;typename T&gt;\nenable_if_t&lt;!condition_&lt;T&gt;::value&gt; test() { cout &lt;&lt; \"false\\n\"; }\n\nint main() {\n    test&lt;int&gt;();\n    test&lt;bool&gt;();\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"http://rextester.com/VVNHB62598\" rel=\"nofollow noreferrer\">http://rextester.com/VVNHB62598</a></p>\n\n<hr>\n\n<p>You also mentioned in the comments that your actual problem appeared in another case than your MCVE (<a href=\"https://stackoverflow.com/questions/41556257/how-can-i-initialize-a-div-t-object/41592619#41592619\">How can I Initialize a div_t Object?</a>)</p>\n\n<p>For this case the workaround might look like this:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n#include &lt;cstdlib&gt;\n#include &lt;utility&gt;\n\n\ntemplate &lt;typename T&gt;\nusing divtype = decltype(std::div(std::declval&lt;T&gt;(), std::declval&lt;T&gt;()));\n\n\ntemplate &lt;typename T&gt;\nstruct condition\n{\n    static const bool value = divtype&lt;T&gt;{ 1, 0 }.quot != 0;\n};\n\n\ntemplate &lt;typename T&gt;\nstd::enable_if_t&lt;condition&lt;T&gt;::value, divtype&lt;T&gt;&gt; make_div(const T quot, const T rem) { return{ quot, rem }; }\n\ntemplate &lt;typename T&gt;\nstd::enable_if_t&lt;!condition&lt;T&gt;::value, divtype&lt;T&gt;&gt; make_div(const T quot, const T rem) { return{ rem, quot }; }\n\nint main() {\n\n    make_div&lt;int&gt;(1, 2);\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"http://rextester.com/ULDFM22040\" rel=\"nofollow noreferrer\">http://rextester.com/ULDFM22040</a></p>\n\n<hr>\n\n<p>According to this <a href=\"https://blogs.msdn.microsoft.com/vcblog/2015/06/19/c111417-features-in-vs-2015-rtm/\" rel=\"nofollow noreferrer\">Visual Studio C++ Team blog entry</a> VS2015 does not have (complete) support for <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2634.html\" rel=\"nofollow noreferrer\">Expression SFINAE</a> yet.</p>\n\n<blockquote>\n  <p>[1] We\u2019re planning to start implementing Expression SFINAE in the compiler immediately after 2015 RTM, and we\u2019re planning to deliver it in an Update to 2015, supported for production use.  (But not necessarily 2015 Update 1.  It might take longer.)</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1484157888, "post_id": 41597713, "comment_id": 70398264, "body": "Unfortunately, I can&#39;t remember exactly which blog post it was mentioned in, so I can&#39;t provide a link."}], "tags": [], "owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1484157865, "creation_date": 1484157865, "answer_id": 41597713, "question_id": 41593649, "link": "https://stackoverflow.com/questions/41593649/why-wont-visual-studio-let-me-use-a-templatized-constexpr-function-in-enable-i/41597713#41597713", "title": "Why Won&#39;t Visual Studio let me use a Templatized, constexpr Function in enable_if?", "body": "<p>This is a known MSVC issue, and was mentioned in one of their blog posts.  What's going on is that the compiler can't recognise that SFINAE makes the second version of <code>test()</code> different than the first, and it needs a little hint; a simple dummy parameter will suffice, allowing it to differentiate the two versions.</p>\n\n<pre><code>#include &lt;type_traits&gt;\n#include &lt;iostream&gt;\nusing std::enable_if_t; using std::cout;\n\ntemplate &lt;typename T&gt;\nconstexpr bool condition() { return sizeof(T) &gt; 1; }\n\n#ifdef    _MSC_VER\n    #define MSVC_DUMMY int /*msvc_dummy*/ = 0\n#else  // _MSC_VER\n    #define MSVC_DUMMY\n#endif // _MSC_VER\n\ntemplate &lt;typename T&gt;\nenable_if_t&lt;condition&lt;T&gt;()&gt; test() { cout &lt;&lt; \"true\\n\"; }\n\ntemplate &lt;typename T&gt;\nenable_if_t&lt;!condition&lt;T&gt;()&gt; test(MSVC_DUMMY) { cout &lt;&lt; \"false\\n\"; }\n\nint main() {\n    test&lt;char&gt;();\n    test&lt;int&gt;();\n}\n</code></pre>\n\n<p>This <a href=\"http://rextester.com/UENF27655\" rel=\"nofollow noreferrer\">works on MSVC</a>, with only minimal modifications to the code.  It's also easy to remove once they eventually get it working without the hint.</p>\n\n<hr>\n\n<p>If a consistent interface is desired, this can be hidden behind a helper function.</p>\n\n<pre><code>template &lt;typename T&gt;\nenable_if_t&lt;condition&lt;T&gt;()&gt; test_() { cout &lt;&lt; \"true\\n\"; }\n\ntemplate &lt;typename T&gt;\nenable_if_t&lt;!condition&lt;T&gt;()&gt; test_(MSVC_DUMMY) { cout &lt;&lt; \"false\\n\"; }\n\ntemplate &lt;typename T&gt;\nauto test() { return test_&lt;T&gt;(); }\n</code></pre>\n"}], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 733, "favorite_count": 0, "accepted_answer_id": 41597153, "answer_count": 4, "score": 8, "last_activity_date": 1484158705, "creation_date": 1484145370, "last_edit_date": 1484145701, "question_id": 41593649, "link": "https://stackoverflow.com/questions/41593649/why-wont-visual-studio-let-me-use-a-templatized-constexpr-function-in-enable-i", "title": "Why Won&#39;t Visual Studio let me use a Templatized, constexpr Function in enable_if?", "body": "<p>So I've boiled this down to the minimal, complete, verifiable example and it seems that Visual Studio 2015 just won't allow me to use a templatized, <code>constexpr</code> function in an <code>enable_if</code>.</p>\n\n<p>For example:</p>\n\n<pre><code>template &lt;typename T&gt;\nconstexpr bool condition() { return sizeof(T) &gt; 1; }\n</code></pre>\n\n<p>Gives me the error:</p>\n\n<blockquote>\n  <p>error C2995: <code>enable_if&lt;_Test,T&gt;::type test(void)</code>: function template has already been defined</p>\n</blockquote>\n\n<p>When I try to use it in substitution failure is not an error compilation like this:</p>\n\n<pre><code>template &lt;typename T&gt;\nenable_if_t&lt;condition&lt;T&gt;()&gt; test() { cout &lt;&lt; \"true\\n\"; }\n\ntemplate &lt;typename T&gt;\nenable_if_t&lt;!condition&lt;T&gt;()&gt; test() { cout &lt;&lt; \"false\\n\"; }\n</code></pre>\n\n<p>This works fine in gcc: <a href=\"http://ideone.com/m9LDdS\">http://ideone.com/m9LDdS</a>\n<br>And it works fine in Visual Studio 2015 if I remove the templatization of <code>condition</code>. I believe that <code>constexpr</code> functions were introduced in <a href=\"/questions/tagged/c%2b%2b11\" class=\"post-tag\" title=\"show questions tagged &#39;c++11&#39;\" rel=\"tag\">c++11</a>, why isn't Visual Studio 2015 supporting this? Is it a bug? </p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 0, "creation_date": 1484145238, "post_id": 41593549, "comment_id": 70390087, "body": "Why doesn&#39;t it work? What does it do or not do that it shouldn&#39;t do or should do?"}, {"owner": {"reputation": 27011, "user_id": 1490355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/296f0478cb1b6724e3f862ace601fa99?s=128&d=identicon&r=PG", "display_name": "SingerOfTheFall", "link": "https://stackoverflow.com/users/1490355/singerofthefall"}, "edited": false, "score": 0, "creation_date": 1484145637, "post_id": 41593549, "comment_id": 70390337, "body": "Make another vector for negative ints and use <code>i*(-1)</code> instead of <code>i</code> as index"}, {"owner": {"reputation": 984, "user_id": 7263672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57952930cb4ac179a1f33229455f638c?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier", "link": "https://stackoverflow.com/users/7263672/olivier"}, "edited": false, "score": 1, "creation_date": 1484145855, "post_id": 41593549, "comment_id": 70390486, "body": "Your solution 1 is not even O(N) if you put a large value in the vector (if N is the size of the vector, not the maximum value). If there are constraints on the values, put them in the question. Extending that solution to negative values is as simple as finding the minimum and subtracting it from all values, then adding it back to the final answer."}, {"owner": {"reputation": 984, "user_id": 7263672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57952930cb4ac179a1f33229455f638c?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier", "link": "https://stackoverflow.com/users/7263672/olivier"}, "edited": false, "score": 0, "creation_date": 1484149510, "post_id": 41593549, "comment_id": 70392919, "body": "Allocating the <code>V</code> vector and filling it with <code>std::iota</code> are both O(max_el)."}], "answers": [{"tags": [], "owner": {"reputation": 1399, "user_id": 2538382, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5nAgf.png?s=128&g=1", "display_name": "FrogTheFrog", "link": "https://stackoverflow.com/users/2538382/frogthefrog"}, "is_accepted": false, "score": 2, "last_activity_date": 1484149130, "creation_date": 1484149130, "answer_id": 41594932, "question_id": 41593549, "link": "https://stackoverflow.com/questions/41593549/finding-the-lowest-missing-integer-in-a-vector-containing-positive-and-negative/41594932#41594932", "title": "Finding the lowest missing integer in a vector containing positive and negative int&#39;s?", "body": "<p>My solution is to make a <code>bool</code> vector (or <code>char</code> vector just to avoid compilation warnings about casting to <code>bool</code>) which has the size of all possible elements. All elements are initialized to 0 and later are assigned to 1 which indicates that the element is not missing. All you need to do then is to find an index of the first 0 element which is the lowest missing element. </p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n\nstd::vector&lt;int&gt; A{ -1, 0, 11, 1, 10, -5 };\n\nint main() {\n    if (A.size() &gt; 1) {\n        int max_el = *std::max_element(A.begin(), A.end());\n        int min_el = *std::min_element(A.begin(), A.end());\n        int range = abs(max_el - min_el) + 1;\n\n        std::vector&lt;int&gt; V(range, 0);\n\n        for (size_t i = 0; i &lt; A.size(); i++)\n            V[A[i] - min_el] = 1;\n\n        if (*std::min_element(V.begin(), V.end()) == 0)\n            std::cout &lt;&lt; std::distance(V.begin(), std::find(V.begin(), V.end(), 0)) + min_el;\n        else\n            std::cout &lt;&lt; \"There are no missing elements\" &lt;&lt; std::endl;\n    }\n    else\n        std::cout &lt;&lt; \"There are no missing elements\" &lt;&lt; std::endl;\n\n    std::cin.get();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "is_accepted": false, "score": 3, "last_activity_date": 1484177074, "last_edit_date": 1495541789, "creation_date": 1484177074, "answer_id": 41602629, "question_id": 41593549, "link": "https://stackoverflow.com/questions/41593549/finding-the-lowest-missing-integer-in-a-vector-containing-positive-and-negative/41602629#41602629", "title": "Finding the lowest missing integer in a vector containing positive and negative int&#39;s?", "body": "<p>Your first solution seems O(max(N,M)), where I consider N the number of elements in vector A and M the size of vector V (or <em>max(A<sub>i</sub>)</em>), but you are looping through both vectors multiple times (with <code>std::min_element</code>, <code>std::max_element</code>, the <code>for</code> loop, the allocation of V and <code>std::iota</code> too).</p>\n\n<p>Besides, once corrected a couple of typos (a missing <code>;</code> and an <code>into</code> instead of <code>int</code>), your program returns the value found... from <code>main()</code>, which is a bit odd.</p>\n\n<p>Your first algorithm always searches for the lowest missing value in the range [<strong>1</strong>, max value in A], but it can be generalized to find the lowest missing element in the range [<em>min(A<sub>i</sub>)</em>,  <em>max(A<sub>i</sub>)</em>], even for negative numbers.</p>\n\n<p>My approach is similar to that of <a href=\"https://stackoverflow.com/a/41594932/4944425\">L.Senioins</a>, but I've used different library functions trying to minimize the number of loops.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;utility&gt;\n#include &lt;algorithm&gt;\n\ntemplate &lt;class ForwardIt&gt;\ntypename std::iterator_traits&lt;ForwardIt&gt;::value_type\nlowest_missing(ForwardIt first, ForwardIt last)\n{\n    if ( first == last )\n        throw std::string {\"The range is empty\"};\n    // find both min and max element with one function\n    auto result = std::minmax_element(first, last);\n\n    // range is always &gt; 0  \n    auto range = *result.second - *result.first + 1;\n    if ( range &lt; 2 )\n        throw std::string {\"Min equals max, so there are no missing elements\"};\n    std::vector&lt;bool&gt; vb(range); // the initial value of all elements is false\n\n    for (auto i = first; i != last; ++i)\n        vb[*i - *result.first] = true;\n\n    // search the first false\n    auto pos = std::find(vb.cbegin(), vb.cend(), false);\n    if ( pos == vb.cend() )  // all the elements are true\n        throw std::string {\"There are no missing elements\"};\n\n    return std::distance(vb.cbegin(), pos) + *result.first;\n}\n\ntemplate &lt;class ForwardIt&gt;\nvoid show_the_first_missing_element(ForwardIt first, ForwardIt last)\n{\n    try\n    {\n        std::cout &lt;&lt; lowest_missing(first, last) &lt;&lt; '\\n';\n    }\n    catch(const std::string &amp;msg)\n    {\n        std::cout &lt;&lt; msg &lt;&lt; '\\n';\n    }\n}\n\nint main() {\n    std::vector&lt;int&gt; a { 1, 8, 9, 6, 2, 5, 3, 0 };\n    show_the_first_missing_element(a.cbegin(), a.cend());\n\n    std::vector&lt;int&gt; b { -1, -4, 8, 1, -3, -2, 10, 0 };\n    show_the_first_missing_element(b.cbegin(), b.cend());\n    show_the_first_missing_element(b.cbegin() + b.size() / 2, b.cend());\n\n    std::vector&lt;int&gt; c { -2, -1, 0, 1, 2, 3 };\n    show_the_first_missing_element(c.cbegin(), c.cend());\n\n    std::vector&lt;int&gt; d { 3, 3, 3 };\n    show_the_first_missing_element(d.cbegin(), d.cend());\n\n    std::vector&lt;int&gt; e;\n    show_the_first_missing_element(e.cbegin(), e.cend());\n\n    return 0;\n}\n</code></pre>\n\n<p>The results outputted for my test cases are:</p>\n\n<pre>\n4\n2\n-1\nThere are no missing elements\nMin equals max, so there are no missing elements\nThe range is empty\n</pre>\n"}, {"tags": [], "owner": {"reputation": 2691, "user_id": 5477287, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/yKMgF.jpg?s=128&g=1", "display_name": "Babra Cunningham", "link": "https://stackoverflow.com/users/5477287/babra-cunningham"}, "is_accepted": true, "score": 1, "last_activity_date": 1484233038, "creation_date": 1484233038, "answer_id": 41616259, "question_id": 41593549, "link": "https://stackoverflow.com/questions/41593549/finding-the-lowest-missing-integer-in-a-vector-containing-positive-and-negative/41616259#41616259", "title": "Finding the lowest missing integer in a vector containing positive and negative int&#39;s?", "body": "<p>I'm going to try give my own question an answer, after spending sometime thinking about this:</p>\n\n<pre><code>int main()\n{\n  std::vector&lt;int&gt; A {-3, -1, 0, 1, 3, 4};\n  auto relative_pos = std::minmax_elment(A.begin(), A.end());\n  std::vector&lt;bool&gt; Litmus( *(relative_pos.second) - *(relative_pos.first), false); //Create vector of size max val - min val)\n\n  auto lowest_val = *(relative_pos.first);\n  for(auto x : A)\n  {\n     Litmus[i - lowest_val] = true;\n  }\n  auto pos = std::find(Litmus.begin(), Litmus.end(), false); //Find the first occurring false value\n  std::cout&lt;&lt; (pos - Litmus.begin()) + lower&lt;&lt;std::endl; //Print the val in A relative to false value in Litmus\n}\n</code></pre>\n\n<p>This solution works with negative numbers and is linear.</p>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 5039421, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kgGpiFJhsrM/AAAAAAAAAAI/AAAAAAAAB2g/oFd3NcF789Q/photo.jpg?sz=128", "display_name": "Sankar Balasubramanian", "link": "https://stackoverflow.com/users/5039421/sankar-balasubramanian"}, "is_accepted": false, "score": 0, "last_activity_date": 1569302677, "last_edit_date": 1569302677, "creation_date": 1569301181, "answer_id": 58073335, "question_id": 41593549, "link": "https://stackoverflow.com/questions/41593549/finding-the-lowest-missing-integer-in-a-vector-containing-positive-and-negative/58073335#58073335", "title": "Finding the lowest missing integer in a vector containing positive and negative int&#39;s?", "body": "<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n#include &lt;numeric&gt;\nint solution(vector&lt;int&gt; &amp;A) {\n    std::vector&lt;int&gt;::iterator it = std::max_element(A.begin(),A.end()); \n    try\n    {\n        sort(A.begin(),A.end());    \n        std::vector&lt;int&gt;::iterator it = std::unique(A.begin(),A.end());\n        A.resize(std::distance(A.begin(),it));\n\n        for(int i = 0, j = 1; i &lt; A.size(); i++)\n        {\n            if( A[i] != j)          \n            {\n                return j;\n            }           \n            j++;\n        }\n\n    }\n    catch(exception &amp;e)\n    {\n        std::cout&lt;&lt;e.what()&lt;&lt;std::endl;\n    }\n    return ++(*it);\n}\n</code></pre>\n"}], "owner": {"reputation": 2691, "user_id": 5477287, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/yKMgF.jpg?s=128&g=1", "display_name": "Babra Cunningham", "link": "https://stackoverflow.com/users/5477287/babra-cunningham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1607, "favorite_count": 1, "accepted_answer_id": 41616259, "answer_count": 4, "score": 5, "last_activity_date": 1569302677, "creation_date": 1484145111, "last_edit_date": 1484145737, "question_id": 41593549, "link": "https://stackoverflow.com/questions/41593549/finding-the-lowest-missing-integer-in-a-vector-containing-positive-and-negative", "title": "Finding the lowest missing integer in a vector containing positive and negative int&#39;s?", "body": "<p>I'm writing an operation to find the lowest missing element of a vector, V = 1..N + 1. This has to be performed in <strong>O(N)</strong> time complexity. </p>\n\n<p>Solution One:</p>\n\n<pre><code>std::vector&lt;int&gt; A {3,4,1,4,6,7};\n\nint main()\n{\n    int max_el = *std::max_element(A.begin(), A.end()); //Find max element\n    std::vector&lt;int&gt; V(max_el);\n    std::iota(V.begin(), V.end(), 1) //Populate V with all int's up to max element\n\n    for(unsigned into i {0}; i &lt; A.size(); i++)\n    {\n       int index = A[i] - 1;\n       if(A[i] == V[index]) //Search V in O(1)\n       {\n         V[index] = max_el; //Set each to max_el, leaving the missing int \n       }\n    }\n    return *std::min_element(V.begin(), V.end()); //Find missing int as its the lowest (hasn't been set to max_el)\n}\n\n//Output: 2\n</code></pre>\n\n<p>This works completely fine. </p>\n\n<p>However, I'm now trying to get this to work with vector containing negative int's.</p>\n\n<p>Solution Two: </p>\n\n<p>My logic is to take the same approach, however 'weight' the indexes given the size of the vector and the number of negative int's in the vector: </p>\n\n<pre><code>std::vector&lt;int&gt; A {-1, -4, -2, 0, 3, 2, 1}\nint main()\n{\n   int max_el = *std::max_element(A.begin(), A.end());\n   int min_el = *std::min_element(A.begin(), A.end());\n   int min_el_abs = abs(min_el); //Convert min element to absolute\n   int total = min_el_abs + max_el;\n\n   std::vector&lt;int&gt; V(total + 1);\n   std::iota(V.begin(), V.end(), min_el);\n   int index;\n\n   //Find amount of negative int's\n   int first_pos;\n   for(unsigned int i {0}; i &lt; A.size(); i++)\n   {\n      if(A[i] &gt;= 0) {first_pos = i; break;}\n   }\n\n   for(unsigned int i {0}; i &lt; A.size(); i++)\n   {\n      if(A[i] &lt;= 0) //If negative\n      {\n          index = (A.size() - first_pos) - abs(A[i]);\n       } else \n       {\n          index = (A[i] + 1) + first_pos;\n       }\n       if(A[i] == V[index])\n       {\n          V[index] = 0;\n       }\n    } \n    return *std::min_element(V.begin(), V.end());\n } \n\n //Output: -3\n</code></pre>\n\n<p>Solution Two fails to compare the values of the two vectors (A and V), as calculating the <code>index</code> with the above methods with a <strong>positive</strong> int doesn't work.</p>\n\n<p>1) How can I get my Solution 2 to work with unordered vector's of negative int's?</p>\n\n<p>2) How can I edit my Solution 2 to work with vectors of positive  as well as vectors with negative int's?</p>\n"}]