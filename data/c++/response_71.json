[{"tags": ["c++", "arduino"], "answers": [{"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 0, "last_activity_date": 1463662498, "creation_date": 1463662498, "answer_id": 37323847, "question_id": 37311903, "link": "https://stackoverflow.com/questions/37311903/arduino-undefined-reference-to-i2crwreadbyteunsigned-char-unsigned-char/37323847#37323847", "title": "Arduino: Undefined reference to `I2CRW::readByte(unsigned char, unsigned char)&#39;", "body": "<p>I suppose that the problem is that you have declared a class <code>IWCRW</code>, in \"i2crw.h\", with some methods (<code>writeByte()</code> and two different <code>readBytes()</code>), but you haven't implemented they.</p>\n\n<p>If you look at the cpp file (\"i2crw.cpp\", I suppose), you have implemented the constructor</p>\n\n<pre><code>I2CRW::I2CRW()\n</code></pre>\n\n<p>and three function that aren't related with <code>I2CRW</code> class</p>\n\n<pre><code>void writeByte(uint8_t address, uint8_t subAddress, uint8_t data)\n\nuint8_t readByte(uint8_t address, uint8_t subAddress)\n\nvoid readBytes(uint8_t address, uint8_t subAddress, uint8_t count, uint8_t * dest)\n</code></pre>\n\n<p>I suppose your intention was to implement the three <code>IWCRW</code> method but you have forgot the <code>I2CRW::</code> part before the name of the functions.</p>\n\n<p>Solution: correct, in cpp class file, the function implementation in method implementation </p>\n\n<pre><code>void IWCRW::writeByte(uint8_t address, uint8_t subAddress, uint8_t data)\n\nuint8_t IWCRW::readByte(uint8_t address, uint8_t subAddress)\n\nvoid IWCRW::readBytes(uint8_t address, uint8_t subAddress, uint8_t count, uint8_t * dest)\n</code></pre>\n\n<p>p.s.: sorry for my bad English.</p>\n"}], "owner": {"reputation": 11, "user_id": 6353569, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1RB0G4nYRYM/AAAAAAAAAAI/AAAAAAAAACo/2Ud04G3vrz8/photo.jpg?sz=128", "display_name": "Sahan Jayatissa", "link": "https://stackoverflow.com/users/6353569/sahan-jayatissa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 852, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554927614, "creation_date": 1463615988, "last_edit_date": 1554927614, "question_id": 37311903, "link": "https://stackoverflow.com/questions/37311903/arduino-undefined-reference-to-i2crwreadbyteunsigned-char-unsigned-char", "title": "Arduino: Undefined reference to `I2CRW::readByte(unsigned char, unsigned char)&#39;", "body": "<p>Ive been making a library as a test before I make a bigger library for my IMU code. When inlcuding the library i get the following error. </p>\n\n<pre><code>&gt; \\\\uoa.auckland.ac.nz\\engdfs\\Home\\cjay511\\Documents\\Arduino\\sketch_may19a/sketch_may19a.ino:303:\n&gt; undefined reference to `I2CRW::writeByte(unsigned char, unsigned char,\n&gt; unsigned char)'\n</code></pre>\n\n<p>It comes up whenever I call a function from my custom header file. Ive looked at the solutions on stackoverflow and things like deleting the build folder and rebuilding didnt help. </p>\n\n<p>Code (taken out the #define for the registers coz theres heaps)</p>\n\n<pre><code> #include &lt;Wire.h&gt;\n\n#include &lt;i2crw.h&gt;\n\n// Specify sensor full scale\nint Gscale = 0;\nint Ascale = 0;\nfloat AccelRes, GyroRes; // scale resolutions per LSB for the sensors\n\nint16_t accelCount[3];  // Stores the 16-bit signed accelerometer sensor output\nfloat ax, ay, az;       // Stores the real accel value in g's\nint16_t gyroCount[3];   // Stores the 16-bit signed gyro sensor output\nfloat gx, gy, gz;       // Stores the real gyro value in degrees per seconds\nfloat gyroBias[3] = {0, 0, 0}, accelBias[3] = {0, 0, 0}; // Bias corrections for gyro and accelerometer\nfloat SelfTest[6];\n\n// parameters for 6 DoF sensor fusion calculations\nfloat GyroMeasError = PI * (40.0f / 180.0f);     // gyroscope measurement error in rads/s (start at 60 deg/s), then reduce after ~10 s to 3\nfloat beta = sqrt(3.0f / 4.0f) * GyroMeasError;  // compute beta\nfloat GyroMeasDrift = PI * (2.0f / 180.0f);      // gyroscope measurement drift in rad/s/s (start at 0.0 deg/s/s)\nfloat zeta = sqrt(3.0f / 4.0f) * GyroMeasDrift;  // compute zeta, the other free parameter in the Madgwick scheme usually set to a small or zero value\nfloat deltat = 0.0f;                              // integration interval for both filter schemes\nuint32_t lastUpdate = 0, firstUpdate = 0;         // used to calculate integration interval\nuint32_t Now = 0;                                 // used to calculate integration interval\nfloat angle;\n\nuint32_t delt_t = 0; // used to control display output rate\nuint32_t count = 0;  // used to control display output rate\n\nI2CRW i2crw;\n\nvoid setup() {\n  // put your setup code here, to run once:\n\n  //Wire.begin();\n  Serial.begin(38400);\n  uint8_t c = i2crw.readByte(MPU9150_ADDRESS, WHO_AM_I);\n    // Get magnetometer calibration from AK8975A ROM\n\n  if (c == 0x68) // WHO_AM_I should always be 0x68\n  {  \n    Serial.println(\"MPU9150 is online...\");\n\n    MPU9150SelfTest(SelfTest); \n    Serial.println(\"Senpai, My acceleration trim values\");\n    Serial.print(\"x-axis self test: acceleration trim within : \"); \n    Serial.print(SelfTest[0],1); \n    Serial.println(\"% of factory value\");\n\n    Serial.print(\"y-axis self test: acceleration trim within : \"); \n    Serial.print(SelfTest[1],1); \n    Serial.println(\"% of factory value\");\n\n    Serial.print(\"z-axis self test: acceleration trim within : \"); \n    Serial.print(SelfTest[2],1); \n    Serial.println(\"% of factory value\");\n\n    Serial.println(\"Senpai, My gyration trim values\");\n    Serial.print(\"x-axis self test: gyration trim within : \"); \n    Serial.print(SelfTest[3],1); \n    Serial.println(\"% of factory value\");\n\n    Serial.print(\"y-axis self test: gyration trim within : \"); \n    Serial.print(SelfTest[4],1); \n    Serial.println(\"% of factory value\");\n\n    Serial.print(\"z-axis self test: gyration trim within : \"); \n    Serial.print(SelfTest[5],1); \n    Serial.println(\"% of factory value\");\n\n     if(SelfTest[0] &lt; 1.0f &amp;&amp; SelfTest[1] &lt; 1.0f &amp;&amp; SelfTest[2] &lt; 1.0f &amp;&amp; SelfTest[3] &lt; 1.0f &amp;&amp; SelfTest[4] &lt; 1.0f &amp;&amp; SelfTest[5] &lt; 1.0f) \n      {\n        Serial.println(\"Senpai I have Passed my Selftest!!\");\n        delay(3000);\n        calibrateMPU9150(gyroBias, accelBias); // Calibrate gyro and accelerometers, load biases in bias registers\n        Serial.println(\"My biases, senpai\");\n        Serial.print(\"Acceleration bias X: \");\n        Serial.println((int)(1000*accelBias[0]));\n        Serial.print(\"Acceleration bias Y: \");\n        Serial.println((int)(1000*accelBias[1]));\n        Serial.print(\"Acceleration bias Z: \");\n        Serial.println((int)(1000*accelBias[2]));\n\n        Serial.print(\"Gyration bias X: \");\n        Serial.println(gyroBias[0],1);\n        Serial.print(\"Gyration bias Y: \");\n        Serial.println(gyroBias[1],1);\n        Serial.print(\"Gyration bias Z: \");\n        Serial.println(gyroBias[2],1);  \n\n        delay(3000);\n        initMPU9150();\n        Serial.println(\"Awaiting command from Senpai\");\n      }\n      else\n      {\n        Serial.println(\"Senpai, You are wrong\");\n      }\n   }\n  }\n\n\nvoid loop() \n{\n if(i2crw.readByte(MPU9150_ADDRESS, INT_STATUS) &amp; 0x01)\n  {\n    Serial.println(\"Data read byte set\");\n  }\n  else\n  {\n    Serial.println(\"Data read byte NOT SET\");\n  }\n      readAccelData(accelCount);\n      //getAccelRes();\n      AccelRes = 2.0/32768.0;\n\n      readGyroData(gyroCount);\n      //getGyroRes();\n      GyroRes = 250.0/32768.0;\n\n      ax = (float)accelCount[0]*AccelRes;  \n      ay = (float)accelCount[1]*AccelRes;  \n      az = (float)accelCount[2]*AccelRes;  \n\n      gx = (float)gyroCount[0]*GyroRes;  \n      gy = (float)gyroCount[1]*GyroRes;  \n      gz = (float)gyroCount[2]*GyroRes;  \n\n      Now = micros();\n      deltat = ((Now-lastUpdate)/1000000.0f);\n      lastUpdate = Now;\n\n      angle = gz*deltat;    \n\n\n\n    Serial.print(\"average rate = \"); Serial.print(1.0f/deltat, 2); Serial.println(\" Hz\");\n      Serial.println(\"I bought Senpai the Acceleration and Gyration Values\");\n      Serial.println(\"\");\n      Serial.print(\"ax = \"); Serial.print((int)1000*ax);  \n      Serial.print(\" ay = \"); Serial.print((int)1000*ay); \n      Serial.print(\" az = \"); Serial.print((int)1000*az); Serial.println(\" mg\");\n\n      Serial.print(\"gx = \"); Serial.print( gx, 1); \n      Serial.print(\" gy = \"); Serial.print( gy, 1); \n      Serial.print(\" gz = \"); Serial.print( gz, 1); Serial.println(\" deg/s\");\n      Serial.println(\"\");\n      Serial.print(\"angle = \"); Serial.println(angle,1);\n\ndelay(1000);\n}\n\nvoid readAccelData(int16_t *acceldata)\n{\n  uint8_t rawdata[6];\n  i2crw.readBytes(MPU9150_ADDRESS, ACCEL_XOUT_H, 6, &amp;rawdata[0]);\n  acceldata[0] = (int16_t)((rawdata[0]&lt;&lt;8)|(rawdata[1]));  \n  acceldata[1] = (int16_t)((rawdata[2]&lt;&lt;8)|(rawdata[3])); \n  acceldata[2] = (int16_t)((rawdata[4]&lt;&lt;8)|(rawdata[5])); \n}\n\n\nvoid readGyroData(int16_t *gyrodata)\n{\n  uint8_t rawdata[6];\n  i2crw.readBytes(MPU9150_ADDRESS, GYRO_XOUT_H, 6, &amp;rawdata[0]);\n  gyrodata[0] = (int16_t)((rawdata[0]&lt;&lt;8)|(rawdata[1]));  \n  gyrodata[1] = (int16_t)((rawdata[2]&lt;&lt;8)|(rawdata[3])); \n  gyrodata[2] = (int16_t)((rawdata[4]&lt;&lt;8)|(rawdata[5])); \n}\n\nvoid initMPU9150()\n{\n  i2crw.writeByte(MPU9150_ADDRESS, PWR_MGMT_1, 0x01);\n  i2crw.writeByte(MPU9150_ADDRESS, CONFIG, 0x03);\n  i2crw.writeByte(MPU9150_ADDRESS, SMPLRT_DIV, 0x04);\n\n  uint8_t c = i2crw.readByte(MPU9150_ADDRESS, GYRO_CONFIG);\n   i2crw.writeByte(MPU9150_ADDRESS, GYRO_CONFIG, c &amp; ~0xE0); \n  i2crw.writeByte(MPU9150_ADDRESS, GYRO_CONFIG, c &amp; ~0x18); \n  i2crw.writeByte(MPU9150_ADDRESS, GYRO_CONFIG, c | Gscale &lt;&lt; 3);\n\n  c =  i2crw.readByte(MPU9150_ADDRESS, ACCEL_CONFIG);\n  i2crw.writeByte(MPU9150_ADDRESS, ACCEL_CONFIG, c &amp; ~0xE0); // Clear self-test bits [7:5] \n  i2crw.writeByte(MPU9150_ADDRESS, ACCEL_CONFIG, c &amp; ~0x18); // Clear AFS bits [4:3]\n  i2crw.writeByte(MPU9150_ADDRESS, ACCEL_CONFIG, c | Ascale &lt;&lt; 3);\n\n   i2crw.writeByte(MPU9150_ADDRESS, INT_PIN_CFG, 0x22);    \n   i2crw.writeByte(MPU9150_ADDRESS, INT_ENABLE, 0x01); \n}\n\nvoid calibrateMPU9150(float * dest1, float * dest2)\n{\n  uint8_t data[12];\n  uint16_t ii, packet_count, fifo_count;\n  int32_t gyro_bias[3] = {0,0,0}, accel_bias[3] = {0,0,0};\n\n  i2crw.writeByte(MPU9150_ADDRESS, PWR_MGMT_1, 0x80);\n  delay(100);\n\n  i2crw.writeByte(MPU9150_ADDRESS, PWR_MGMT_1, 0x01);  \n  i2crw.writeByte(MPU9150_ADDRESS, PWR_MGMT_2, 0x00); \n  delay(200);\n\n// Configure device for bias calculation\n  i2crw.writeByte(MPU9150_ADDRESS, INT_ENABLE, 0x00);   // Disable all interrupts\n  i2crw.writeByte(MPU9150_ADDRESS, FIFO_EN, 0x00);      // Disable FIFO\n  i2crw.writeByte(MPU9150_ADDRESS, PWR_MGMT_1, 0x00);   // Turn on internal clock source\n  i2crw.writeByte(MPU9150_ADDRESS, I2C_MST_CTRL, 0x00); // Disable I2C master\n  i2crw.writeByte(MPU9150_ADDRESS, USER_CTRL, 0x00);    // Disable FIFO and I2C master modes\n  i2crw.writeByte(MPU9150_ADDRESS, USER_CTRL, 0x0C);    // Reset FIFO and DMP\n  delay(15);\n\n// Configure MPU9150 gyro and accelerometer for bias calculation\n  i2crw.writeByte(MPU9150_ADDRESS, CONFIG, 0x01);      // Set low-pass filter to 188 Hz\n  i2crw.writeByte(MPU9150_ADDRESS, SMPLRT_DIV, 0x00);  // Set sample rate to 1 kHz\n  i2crw.writeByte(MPU9150_ADDRESS, GYRO_CONFIG, 0x00);  // Set gyro full-scale to 250 degrees per second, maximum sensitivity\n  i2crw.writeByte(MPU9150_ADDRESS, ACCEL_CONFIG, 0x00); // Set accelerometer full-scale to 2 g, maximum sensitivity\n\n  uint16_t  gyrosensitivity  = 131;   // = 131 LSB/degrees/sec\n  uint16_t  accelsensitivity = 16384;  // = 16384 LSB/g\n\n  // Configure FIFO to capture accelerometer and gyro data for bias calculation\n  i2crw.writeByte(MPU9150_ADDRESS, USER_CTRL, 0x40);   // Enable FIFO  \n  i2crw.writeByte(MPU9150_ADDRESS, FIFO_EN, 0x78);     // Enable gyro and accelerometer sensors for FIFO  (max size 1024 bytes in MPU-9150)\n  delay(80); // accumulate 80 samples in 80 milliseconds = 960 bytes\n\n// At end of sample accumulation, turn off FIFO sensor read\n  i2crw.writeByte(MPU9150_ADDRESS, FIFO_EN, 0x00);        // Disable gyro and accelerometer sensors for FIFO\n  i2crw.readBytes(MPU9150_ADDRESS, FIFO_COUNTH, 2, &amp;data[0]); // read FIFO sample count\n  fifo_count = ((uint16_t)data[0] &lt;&lt; 8) | data[1];\n  packet_count = fifo_count/12;// How many sets of full gyro and accelerometer data for averaging\n  for (ii = 0; ii &lt; packet_count; ii++) {\n    int16_t accel_temp[3] = {0, 0, 0}, gyro_temp[3] = {0, 0, 0};\n    i2crw.readBytes(MPU9150_ADDRESS, FIFO_R_W, 12, &amp;data[0]); // read data for averaging\n    accel_temp[0] = (int16_t) (((int16_t)data[0] &lt;&lt; 8) | data[1]  ) ;  // Form signed 16-bit integer for each sample in FIFO\n    accel_temp[1] = (int16_t) (((int16_t)data[2] &lt;&lt; 8) | data[3]  ) ;\n    accel_temp[2] = (int16_t) (((int16_t)data[4] &lt;&lt; 8) | data[5]  ) ;    \n    gyro_temp[0]  = (int16_t) (((int16_t)data[6] &lt;&lt; 8) | data[7]  ) ;\n    gyro_temp[1]  = (int16_t) (((int16_t)data[8] &lt;&lt; 8) | data[9]  ) ;\n    gyro_temp[2]  = (int16_t) (((int16_t)data[10] &lt;&lt; 8) | data[11]) ;\n\n    accel_bias[0] += (int32_t) accel_temp[0]; // Sum individual signed 16-bit biases to get accumulated signed 32-bit biases\n    accel_bias[1] += (int32_t) accel_temp[1];\n    accel_bias[2] += (int32_t) accel_temp[2];\n    gyro_bias[0]  += (int32_t) gyro_temp[0];\n    gyro_bias[1]  += (int32_t) gyro_temp[1];\n    gyro_bias[2]  += (int32_t) gyro_temp[2];\n\n}\n    accel_bias[0] /= (int32_t) packet_count; // Normalize sums to get average count biases\n    accel_bias[1] /= (int32_t) packet_count;\n    accel_bias[2] /= (int32_t) packet_count;\n    gyro_bias[0]  /= (int32_t) packet_count;\n    gyro_bias[1]  /= (int32_t) packet_count;\n    gyro_bias[2]  /= (int32_t) packet_count;\n\n  if(accel_bias[2] &gt; 0L) {accel_bias[2] -= (int32_t) accelsensitivity;}  // Remove gravity from the z-axis accelerometer bias calculation\n  else {accel_bias[2] += (int32_t) accelsensitivity;}\n\n// Construct the gyro biases for push to the hardware gyro bias registers, which are reset to zero upon device startup\n  data[0] = (-gyro_bias[0]/4  &gt;&gt; 8) &amp; 0xFF; // Divide by 4 to get 32.9 LSB per deg/s to conform to expected bias input format\n  data[1] = (-gyro_bias[0]/4)       &amp; 0xFF; // Biases are additive, so change sign on calculated average gyro biases\n  data[2] = (-gyro_bias[1]/4  &gt;&gt; 8) &amp; 0xFF;\n  data[3] = (-gyro_bias[1]/4)       &amp; 0xFF;\n  data[4] = (-gyro_bias[2]/4  &gt;&gt; 8) &amp; 0xFF;\n  data[5] = (-gyro_bias[2]/4)       &amp; 0xFF;\n\n// Push gyro biases to hardware registers\n  i2crw.writeByte(MPU9150_ADDRESS, XG_OFFS_USRH, data[0]);// might not be supported in MPU9150\n  i2crw.writeByte(MPU9150_ADDRESS, XG_OFFS_USRL, data[1]);\n  i2crw.writeByte(MPU9150_ADDRESS, YG_OFFS_USRH, data[2]);\n  i2crw.writeByte(MPU9150_ADDRESS, YG_OFFS_USRL, data[3]);\n  i2crw.writeByte(MPU9150_ADDRESS, ZG_OFFS_USRH, data[4]);\n  i2crw.writeByte(MPU9150_ADDRESS, ZG_OFFS_USRL, data[5]);\n\n  dest1[0] = (float) gyro_bias[0]/(float) gyrosensitivity; // construct gyro bias in deg/s for later manual subtraction\n  dest1[1] = (float) gyro_bias[1]/(float) gyrosensitivity;\n  dest1[2] = (float) gyro_bias[2]/(float) gyrosensitivity;\n\n// Construct the accelerometer biases for push to the hardware accelerometer bias registers. These registers contain\n// factory trim values which must be added to the calculated accelerometer biases; on boot up these registers will hold\n// non-zero values. In addition, bit 0 of the lower byte must be preserved since it is used for temperature\n// compensation calculations. Accelerometer bias registers expect bias input as 2048 LSB per g, so that\n// the accelerometer biases calculated above must be divided by 8.\n\n  int32_t accel_bias_reg[3] = {0, 0, 0}; // A place to hold the factory accelerometer trim biases\n  i2crw.readBytes(MPU9150_ADDRESS, XA_OFFSET_H, 2, &amp;data[0]); // Read factory accelerometer trim values\n  accel_bias_reg[0] = (int16_t) ((int16_t)data[0] &lt;&lt; 8) | data[1];\n  i2crw.readBytes(MPU9150_ADDRESS, YA_OFFSET_H, 2, &amp;data[0]);\n  accel_bias_reg[1] = (int16_t) ((int16_t)data[0] &lt;&lt; 8) | data[1];\n  i2crw.readBytes(MPU9150_ADDRESS, ZA_OFFSET_H, 2, &amp;data[0]);\n  accel_bias_reg[2] = (int16_t) ((int16_t)data[0] &lt;&lt; 8) | data[1];\n\n  uint32_t mask = 1uL; // Define mask for temperature compensation bit 0 of lower byte of accelerometer bias registers\n  uint8_t mask_bit[3] = {0, 0, 0}; // Define array to hold mask bit for each accelerometer bias axis\n\n  for(ii = 0; ii &lt; 3; ii++) {\n    if(accel_bias_reg[ii] &amp; mask) mask_bit[ii] = 0x01; // If temperature compensation bit is set, record that fact in mask_bit\n  }\n\n  // Construct total accelerometer bias, including calculated average accelerometer bias from above\n  accel_bias_reg[0] -= (accel_bias[0]/8); // Subtract calculated averaged accelerometer bias scaled to 2048 LSB/g (16 g full scale)\n  accel_bias_reg[1] -= (accel_bias[1]/8);\n  accel_bias_reg[2] -= (accel_bias[2]/8);\n\n  data[0] = (accel_bias_reg[0] &gt;&gt; 8) &amp; 0xFF;\n  data[1] = (accel_bias_reg[0])      &amp; 0xFF;\n  data[1] = data[1] | mask_bit[0]; // preserve temperature compensation bit when writing back to accelerometer bias registers\n  data[2] = (accel_bias_reg[1] &gt;&gt; 8) &amp; 0xFF;\n  data[3] = (accel_bias_reg[1])      &amp; 0xFF;\n  data[3] = data[3] | mask_bit[1]; // preserve temperature compensation bit when writing back to accelerometer bias registers\n  data[4] = (accel_bias_reg[2] &gt;&gt; 8) &amp; 0xFF;\n  data[5] = (accel_bias_reg[2])      &amp; 0xFF;\n  data[5] = data[5] | mask_bit[2]; // preserve temperature compensation bit when writing back to accelerometer bias registers\n\n  // Push accelerometer biases to hardware registers\n  i2crw.writeByte(MPU9150_ADDRESS, XA_OFFSET_H, data[0]); // might not be supported in MPU9150\n  i2crw.writeByte(MPU9150_ADDRESS, XA_OFFSET_L_TC, data[1]);\n  i2crw.writeByte(MPU9150_ADDRESS, YA_OFFSET_H, data[2]);\n  i2crw.writeByte(MPU9150_ADDRESS, YA_OFFSET_L_TC, data[3]);  \n  i2crw.writeByte(MPU9150_ADDRESS, ZA_OFFSET_H, data[4]);\n  i2crw.writeByte(MPU9150_ADDRESS, ZA_OFFSET_L_TC, data[5]);\n\n// Output scaled accelerometer biases for manual subtraction in the main program\n   dest2[0] = (float)accel_bias[0]/(float)accelsensitivity; \n   dest2[1] = (float)accel_bias[1]/(float)accelsensitivity;\n   dest2[2] = (float)accel_bias[2]/(float)accelsensitivity;\n}\n\nvoid MPU9150SelfTest(float * testdata)\n{\n  uint8_t rawData[4];\n  uint8_t selfTest[6];\n  float factoryTrim[6];\n\n  i2crw.writeByte(MPU9150_ADDRESS, ACCEL_CONFIG, 0xF0);\n  i2crw.writeByte(MPU9150_ADDRESS, GYRO_CONFIG, 0xE0);\n  delay(250);\n  rawData[0] = i2crw.readByte(MPU9150_ADDRESS, SELF_TEST_X);\n  rawData[1] = i2crw.readByte(MPU9150_ADDRESS, SELF_TEST_Y);\n  rawData[2] = i2crw.readByte(MPU9150_ADDRESS, SELF_TEST_Z);\n  rawData[3] = i2crw.readByte(MPU9150_ADDRESS, SELF_TEST_A);\n\n // Extract the acceleration test results first\n   selfTest[0] = (rawData[0] &gt;&gt; 3) | (rawData[3] &amp; 0x30) &gt;&gt; 4 ; // XA_TEST result is a five-bit unsigned integer\n   selfTest[1] = (rawData[1] &gt;&gt; 3) | (rawData[3] &amp; 0x0C) &gt;&gt; 2 ; // YA_TEST result is a five-bit unsigned integer\n   selfTest[2] = (rawData[2] &gt;&gt; 3) | (rawData[3] &amp; 0x03) ; // ZA_TEST result is a five-bit unsigned integer\n   // Extract the gyration test results first\n   selfTest[3] = rawData[0]  &amp; 0x1F ; // XG_TEST result is a five-bit unsigned integer\n   selfTest[4] = rawData[1]  &amp; 0x1F ; // YG_TEST result is a five-bit unsigned integer\n   selfTest[5] = rawData[2]  &amp; 0x1F ; // ZG_TEST result is a five-bit unsigned integer    \n\n  // Process results to allow final comparison with factory set values\n   factoryTrim[0] = (4096.0*0.34)*(pow( (0.92/0.34) , (((float)selfTest[0] - 1.0)/30.0))); // FT[Xa] factory trim calculation\n   factoryTrim[1] = (4096.0*0.34)*(pow( (0.92/0.34) , (((float)selfTest[1] - 1.0)/30.0))); // FT[Ya] factory trim calculation\n   factoryTrim[2] = (4096.0*0.34)*(pow( (0.92/0.34) , (((float)selfTest[2] - 1.0)/30.0))); // FT[Za] factory trim calculation\n   factoryTrim[3] =  ( 25.0*131.0)*(pow( 1.046 , ((float)selfTest[3] - 1.0) ));             // FT[Xg] factory trim calculation\n   factoryTrim[4] =  (-25.0*131.0)*(pow( 1.046 , ((float)selfTest[4] - 1.0) ));             // FT[Yg] factory trim calculation\n   factoryTrim[5] =  ( 25.0*131.0)*(pow( 1.046 , ((float)selfTest[5] - 1.0) ));             // FT[Zg] factory trim calculation\n\n    for (int i = 0; i &lt; 6; i++) {\n     testdata[i] = 100.0 + 100.0*((float)selfTest[i] - factoryTrim[i])/factoryTrim[i]; // Report percent differences\n   }\n}\n</code></pre>\n\n<p>Header (.h)</p>\n\n<pre><code>/* I2C library to read and Write Bytes from MPU 9150*/\n#ifndef I2CRW_h\n#define I2CRW_h\n\n#include \"Arduino.h\"\n#include &lt;Wire.h&gt;\n\nclass I2CRW\n{\npublic:\n    I2CRW();\n    void writeByte(uint8_t address, uint8_t subAddress, uint8_t data);\n    uint8_t readByte(uint8_t address, uint8_t subAddress);\n    void readBytes(uint8_t address, uint8_t subAddress, uint8_t count, uint8_t * dest);\nprivate:\n};\n#endif\n</code></pre>\n\n<p>.cpp</p>\n\n<pre><code>#include \"Arduino.h\"\n#include \"i2crw.h\"\n#include &lt;Wire.h&gt;\n\nI2CRW::I2CRW(){\n}\n\nvoid writeByte(uint8_t address, uint8_t subAddress, uint8_t data)\n {\n     Wire.beginTransmission(address);  // Initialize the Tx buffer\n    Wire.write(subAddress);           // Put slave register address in Tx buffer\n    Wire.write(data);                 // Put data in Tx buffer\n    Wire.endTransmission();           // Send the Tx buffer\n }\n\n uint8_t readByte(uint8_t address, uint8_t subAddress)\n{\n  uint8_t data; // `data` will store the register data   \n  Wire.beginTransmission(address);         // Initialize the Tx buffer\n  Wire.write(subAddress);                  // Put slave register address in Tx buffer\n  Wire.endTransmission(false);             // Send the Tx buffer, but send a restart to keep connection alive\n  Wire.requestFrom(address, (uint8_t) 1);  // Read one byte from slave register address \n  data = Wire.read();                      // Fill Rx buffer with result\n  return data;                             // Return data read from slave register\n}\n\nvoid readBytes(uint8_t address, uint8_t subAddress, uint8_t count, uint8_t * dest)\n{  \n  Wire.beginTransmission(address);   // Initialize the Tx buffer\n  Wire.write(subAddress);            // Put slave register address in Tx buffer\n  Wire.endTransmission(false);       // Send the Tx buffer, but send a restart to keep connection alive\n  uint8_t i = 0;\n        Wire.requestFrom(address, count);  // Read bytes from slave register address \n  while (Wire.available()) {\n        dest[i++] = Wire.read(); }         // Put read results in the Rx buffer\n}\n</code></pre>\n\n<p>Any help would be appreciated. Dont think you need my whole sketch but I put it up just in case.\nThanks\nSahan</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1463614490, "post_id": 37311679, "comment_id": 62144243, "body": "<code>_int8</code> is probably defined to be some type somewhere already. I can&#39;t reproduce this on wandbox."}, {"owner": {"reputation": 3120, "user_id": 2012007, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3cf2a036d360f8e177696b7f811dab05?s=128&d=identicon&r=PG", "display_name": "Graznarak", "link": "https://stackoverflow.com/users/2012007/graznarak"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1463615016, "post_id": 37311679, "comment_id": 62144349, "body": "I built Clang 3.8.0 on Windows 10 using Visual Studio 2015.  I compiled it using <code>clang.exe x.cpp</code>."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 1, "creation_date": 1463615146, "post_id": 37311679, "comment_id": 62144381, "body": "As a side note identifiers starting with an underscore followed by a capital letter are reserved by the implementation. Unless the code in question is provided by the compiler/vendor it&#39;s incorrect. See <a href=\"http://stackoverflow.com/a/228797/845568\">stackoverflow.com/a/228797/845568</a> for more information."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1463615190, "post_id": 37311679, "comment_id": 62144393, "body": "Ah, OK, reproduced with <code>-fms-extensions</code>; in that mode it treats <code>_int8</code> as a keyword, equivalent to <code>char</code>."}, {"owner": {"reputation": 3120, "user_id": 2012007, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3cf2a036d360f8e177696b7f811dab05?s=128&d=identicon&r=PG", "display_name": "Graznarak", "link": "https://stackoverflow.com/users/2012007/graznarak"}, "edited": false, "score": 0, "creation_date": 1463615410, "post_id": 37311679, "comment_id": 62144452, "body": "That makes sense.  I added <code>-fno-ms-extensions</code> and it fixed it.  Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 5, "last_activity_date": 1463615506, "creation_date": 1463615506, "answer_id": 37311847, "question_id": 37311679, "link": "https://stackoverflow.com/questions/37311679/why-cant-it-combine-with-previous-declaration-specifier/37311847#37311847", "title": "Why can&#39;t it &quot;combine with previous declaration specifier&quot;", "body": "<p>Clang on Windows has <code>-fms-extensions</code> on by default, and in that mode <a href=\"http://lists.llvm.org/pipermail/cfe-commits/Week-of-Mon-20140818/113163.html\" rel=\"noreferrer\"><code>_int8</code> is a keyword equivalent to <code>char</code></a>, because that's apparently what MSVC does.</p>\n\n<p>Disable it with <code>-fno-ms-extensions</code>.</p>\n"}], "owner": {"reputation": 3120, "user_id": 2012007, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3cf2a036d360f8e177696b7f811dab05?s=128&d=identicon&r=PG", "display_name": "Graznarak", "link": "https://stackoverflow.com/users/2012007/graznarak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1680, "favorite_count": 0, "accepted_answer_id": 37311847, "answer_count": 1, "score": 1, "last_activity_date": 1463615506, "creation_date": 1463614309, "question_id": 37311679, "link": "https://stackoverflow.com/questions/37311679/why-cant-it-combine-with-previous-declaration-specifier", "title": "Why can&#39;t it &quot;combine with previous declaration specifier&quot;", "body": "<p>I have some code that I am compiling for an embedded platform.  When I attempt to run a Clang-based tool against the code I get some errors.</p>\n\n<p>I have narrowed down the code that generates the errors to the following:</p>\n\n<pre><code>typedef int _GCC_ATTR_ALIGN_8t __attribute__((__mode__(__QI__)));\ntypedef _GCC_ATTR_ALIGN_8t _Int8t __attribute__((__aligned__(1)));\ntypedef _Int8t _Intleast8t;\ntypedef _Int8t _Intfast8t;\ntypedef _Int8t _int8;\ntypedef _Int8t int8_t;\n</code></pre>\n\n<p>The output from running clang 3.8.0 against the code is:</p>\n\n<pre><code>x.cpp:5:16: error: cannot combine with previous 'type-name' declaration\n      specifier\ntypedef _Int8t _int8;\n               ^\nx.cpp:5:1: warning: typedef requires a name [-Wmissing-declarations]\ntypedef _Int8t _int8;\n^~~~~~~~~~~~~~~~~~~~\n1 warning and 1 error generated.\n</code></pre>\n\n<p>Why does it have the issue only on the _int8 typedef and not the other typedefs?  Also, what does the error mean?</p>\n"}, {"tags": ["c++", "video", "ffmpeg", "mp4"], "comments": [{"owner": {"reputation": 8173, "user_id": 3299580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5442c85b57162abfc606d86c0083e1d?s=128&d=identicon&r=PG&f=1", "display_name": "The Dark", "link": "https://stackoverflow.com/users/3299580/the-dark"}, "edited": false, "score": 1, "creation_date": 1463615521, "post_id": 37311542, "comment_id": 62144485, "body": "<code>-framerate 2</code> is not the same as <code>-framerate 1.74659</code>, you should try testing with the exact same command line."}, {"owner": {"reputation": 156, "user_id": 2297436, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/gdLna.jpg?s=128&g=1", "display_name": "Arheisel", "link": "https://stackoverflow.com/users/2297436/arheisel"}, "reply_to_user": {"reputation": 8173, "user_id": 3299580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5442c85b57162abfc606d86c0083e1d?s=128&d=identicon&r=PG&f=1", "display_name": "The Dark", "link": "https://stackoverflow.com/users/3299580/the-dark"}, "edited": false, "score": 0, "creation_date": 1463617017, "post_id": 37311542, "comment_id": 62144843, "body": "At first, because of fps being int (later changed to float) tge command used to execute with -framerate 1 and none of the videos are playable"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1463618494, "post_id": 37311542, "comment_id": 62145192, "body": "@Arheisel <code>std::system</code> calls the command processor.  You also have <code>execv</code> and similar functions.  You may need to call the latter instead of <code>system</code>.  See <a href=\"http://stackoverflow.com/questions/1697440/difference-between-system-and-exec-in-linux\">here</a>"}, {"owner": {"reputation": 8173, "user_id": 3299580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5442c85b57162abfc606d86c0083e1d?s=128&d=identicon&r=PG&f=1", "display_name": "The Dark", "link": "https://stackoverflow.com/users/3299580/the-dark"}, "edited": false, "score": 0, "creation_date": 1463619429, "post_id": 37311542, "comment_id": 62145423, "body": "What I meant was that you are saying &quot;this command doesn&#39;t work from <code>system</code> but this <i>different</i> command works from the command line, therefore the problem is with <code>system</code>.&quot; I&#39;m saying try running the <i>exact same command</i> from the command line as the problem may be with the actual command."}, {"owner": {"reputation": 156, "user_id": 2297436, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/gdLna.jpg?s=128&g=1", "display_name": "Arheisel", "link": "https://stackoverflow.com/users/2297436/arheisel"}, "edited": false, "score": 0, "creation_date": 1463619557, "post_id": 37311542, "comment_id": 62145457, "body": "You&#39;re right, im sorry. I will try it out and post the results. I also want to try execv but i cant find any documentation of it."}, {"owner": {"reputation": 156, "user_id": 2297436, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/gdLna.jpg?s=128&g=1", "display_name": "Arheisel", "link": "https://stackoverflow.com/users/2297436/arheisel"}, "edited": false, "score": 0, "creation_date": 1463620085, "post_id": 37311542, "comment_id": 62145604, "body": "Execv is not an option as the manual says &quot;There shall be no return from a successful exec, because the calling process image is overlaid by the new process image.&quot;"}, {"owner": {"reputation": 156, "user_id": 2297436, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/gdLna.jpg?s=128&g=1", "display_name": "Arheisel", "link": "https://stackoverflow.com/users/2297436/arheisel"}, "edited": false, "score": 0, "creation_date": 1463627496, "post_id": 37311542, "comment_id": 62147286, "body": "Im thinking of forking the process and caling execve on the child, but im not sure how to archieve this correctly or know when ffmpeg has finished to continue execution"}, {"owner": {"reputation": 12172, "user_id": 2057709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0R41X.png?s=128&g=1", "display_name": "VC.One", "link": "https://stackoverflow.com/users/2057709/vc-one"}, "edited": false, "score": 0, "creation_date": 1463665419, "post_id": 37311542, "comment_id": 62169389, "body": "Does this <b><a href=\"http://unix.stackexchange.com/a/86945\">link</a></b> help you? <code>-r 1</code> before specifying the PNG files seems important. Also according to that link, 10 FPS is the lowest acceptable framerate for VLC (things might have changed since 2013, but maybe not, so test that different FPS too)"}], "answers": [{"comments": [{"owner": {"reputation": 12172, "user_id": 2057709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0R41X.png?s=128&g=1", "display_name": "VC.One", "link": "https://stackoverflow.com/users/2057709/vc-one"}, "edited": false, "score": 0, "creation_date": 1464055698, "post_id": 37327848, "comment_id": 62314777, "body": "You should mark (green tick) this as correct so others know there is a working solution."}, {"owner": {"reputation": 156, "user_id": 2297436, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/gdLna.jpg?s=128&g=1", "display_name": "Arheisel", "link": "https://stackoverflow.com/users/2297436/arheisel"}, "reply_to_user": {"reputation": 12172, "user_id": 2057709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0R41X.png?s=128&g=1", "display_name": "VC.One", "link": "https://stackoverflow.com/users/2057709/vc-one"}, "edited": false, "score": 1, "creation_date": 1464056063, "post_id": 37327848, "comment_id": 62314853, "body": "Sorry, it didnt let me at the time and i just forgot"}], "tags": [], "owner": {"reputation": 156, "user_id": 2297436, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/gdLna.jpg?s=128&g=1", "display_name": "Arheisel", "link": "https://stackoverflow.com/users/2297436/arheisel"}, "is_accepted": true, "score": 3, "last_activity_date": 1463671868, "last_edit_date": 1492086984, "creation_date": 1463671868, "answer_id": 37327848, "question_id": 37311542, "link": "https://stackoverflow.com/questions/37311542/ffmpeg-doesnt-work-when-called-from-c-system/37327848#37327848", "title": "ffmpeg doesn&#39;t work when called from c++ system", "body": "<p>Solved it!</p>\n\n<p><a href=\"https://unix.stackexchange.com/a/86945\">this</a> was the winning answer. finally got it to work using:</p>\n\n<pre><code>std::system(\"ffmpeg -threads auto -y -r 1.74659 -i /mnt/ev_ramdsk/1/%05d-capture.jpg -px_fmt yuv420p -preset ultrafast -r 10 /mnt/ev_ramdsk/1/video.mp4\");\n</code></pre>\n\n<p>Thank you very much!</p>\n"}], "owner": {"reputation": 156, "user_id": 2297436, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/gdLna.jpg?s=128&g=1", "display_name": "Arheisel", "link": "https://stackoverflow.com/users/2297436/arheisel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1418, "favorite_count": 0, "accepted_answer_id": 37327848, "answer_count": 1, "score": 0, "last_activity_date": 1463671868, "creation_date": 1463613315, "last_edit_date": 1463626849, "question_id": 37311542, "link": "https://stackoverflow.com/questions/37311542/ffmpeg-doesnt-work-when-called-from-c-system", "title": "ffmpeg doesn&#39;t work when called from c++ system", "body": "<p>I have a c++ script that coneverts a series of jpg into a .mp4 video, the command i use is the folllowing:</p>\n\n<pre><code>std::system(\"ffmpeg -threads auto -y -framerate 1.74659 -i /mnt/ev_ramdsk/1/%05d-capture.jpg -vcodec libx264 -preset ultrafast /mnt/ev_ramdsk/1/video.mp4\");\n</code></pre>\n\n<p>which produces a .mp4 video file like its supposed to except it cant be played from anywhere (tested in 2 computers and html5 video)</p>\n\n<p>But, if from the same computer where the program runs, i do:</p>\n\n<pre><code>ffmpeg -threads auto -y -framerate 2 -i %05d-capture.jpg -vcodec libx264 -preset ultrafast video.mp4\n</code></pre>\n\n<p>from the command line, the output video plays wonderfully (except in vlc, for vlc i have to use -vcodec mpeg4)</p>\n\n<p>What can possibly cause this behaviour?\ncould cp command corrupt the file? (ran after the mpeg to move it out of the ramfs)</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>As requested, i ran the whole set of commands one by one in the console exactly as the program do (the program logs every single command it runs, i just repeated them).</p>\n\n<p>The commands are:</p>\n\n<pre><code>cp -r /var/cache/zoneminder/events/1/16/05/18/23/30/00/ /mnt/ev_ramdsk/1/\nffmpeg -threads auto -y -framerate 1.76729 -i /mnt/ev_ramdsk/1/%5d-capture.jpg -preset ultrafast /mnt/ev_ramdsk/1/video.mp4\ncp /mnt/ev_ramdsk/1/video.mp4 /var/cache/evmanager/videos/1/2016_05_18_23_30_00_.mp4\n</code></pre>\n\n<p>The resulting .mp4 file can be played without any trouble. Also, is the only one with a preview image in the file explorer.</p>\n\n<p>Thank you very much!</p>\n"}, {"tags": ["c++", "generic-programming"], "comments": [{"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1463613076, "post_id": 37311487, "comment_id": 62143911, "body": "I don&#39;t understand the &quot;why&quot; question. A sequence needs that operation as one of the basic operations, i.e. &quot;remove adjacent equivalent elements&quot; is a natural basic operation for a sequence. And <code>unique</code> happens to be the implementation of that basic operation in STL."}, {"owner": {"reputation": 2318, "user_id": 1840861, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vpYSr.jpg?s=128&g=1", "display_name": "Praveen Vinny", "link": "https://stackoverflow.com/users/1840861/praveen-vinny"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1463613136, "post_id": 37311487, "comment_id": 62143923, "body": "I was doubtful since the method name is <code>unique()</code> but it removes only consecutive duplicates."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1463613160, "post_id": 37311487, "comment_id": 62143926, "body": "I.e. you don&#39;t like the <i>name</i>. You don&#39;t like the fact that the name &quot;unique&quot; was assigned to this specific functionality. It has historical roots, like UNIX <code>uniq</code> command, which also compares only adjacent lines in a stream."}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1463613215, "post_id": 37311487, "comment_id": 62143939, "body": "Does sorting the list first to get all the identical elements together fix it?  The same as on unix typing <code>cat x | sort | uniq</code>"}, {"owner": {"reputation": 2318, "user_id": 1840861, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vpYSr.jpg?s=128&g=1", "display_name": "Praveen Vinny", "link": "https://stackoverflow.com/users/1840861/praveen-vinny"}, "edited": false, "score": 1, "creation_date": 1463613280, "post_id": 37311487, "comment_id": 62143953, "body": "By unique, it means distinct values to the best of my knowledge and it&#39;s confusing. Is there some reason why the method <code>unique</code> is designed to remove just the consecutive duplicates?"}, {"owner": {"reputation": 2318, "user_id": 1840861, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vpYSr.jpg?s=128&g=1", "display_name": "Praveen Vinny", "link": "https://stackoverflow.com/users/1840861/praveen-vinny"}, "edited": false, "score": 0, "creation_date": 1463613316, "post_id": 37311487, "comment_id": 62143964, "body": "Sorting removes the ordering."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1463613354, "post_id": 37311487, "comment_id": 62143974, "body": "@Praveen Vinny: You are going in circles again. A basic operation of &quot;removing just the consecutive duplicates&quot; is absolutely needed as a basic operation. It <i>has</i> to be implemented, no question about it. So, the only question here whether it should be called <code>unique</code> or something else (like <code>unique_adj</code>, <code>unique_seq</code> etc.). The library authors decided to call it <code>unique</code>."}, {"owner": {"reputation": 13760, "user_id": 224704, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c94b60d81fde0361f2daa910a0f9a77?s=128&d=identicon&r=PG", "display_name": "Disillusioned", "link": "https://stackoverflow.com/users/224704/disillusioned"}, "edited": false, "score": 0, "creation_date": 1463613357, "post_id": 37311487, "comment_id": 62143976, "body": "There&#39;s a very important <i>why</i> ... Removing sequential duplicates is far more efficient than removing scattered duplicates. It you want to remove <i>all</i> duplicates, you can <b><i>choose</i></b> to sort first, making all duplicates sequential."}, {"owner": {"reputation": 2318, "user_id": 1840861, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vpYSr.jpg?s=128&g=1", "display_name": "Praveen Vinny", "link": "https://stackoverflow.com/users/1840861/praveen-vinny"}, "reply_to_user": {"reputation": 13760, "user_id": 224704, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c94b60d81fde0361f2daa910a0f9a77?s=128&d=identicon&r=PG", "display_name": "Disillusioned", "link": "https://stackoverflow.com/users/224704/disillusioned"}, "edited": false, "score": 0, "creation_date": 1463613448, "post_id": 37311487, "comment_id": 62144004, "body": "@CraigYoung Your comment answers the reason from the algorithmic complexity perspective. Is there some other reason?"}], "answers": [{"comments": [{"owner": {"reputation": 2318, "user_id": 1840861, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vpYSr.jpg?s=128&g=1", "display_name": "Praveen Vinny", "link": "https://stackoverflow.com/users/1840861/praveen-vinny"}, "edited": false, "score": 0, "creation_date": 1463616565, "post_id": 37311605, "comment_id": 62144744, "body": "That&#39;s well said @AnT"}, {"owner": {"reputation": 31218, "user_id": 211160, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Z2fk7.png?s=128&g=1", "display_name": "HostileFork says dont trust SE", "link": "https://stackoverflow.com/users/211160/hostilefork-says-dont-trust-se"}, "edited": false, "score": 0, "creation_date": 1463652238, "post_id": 37311605, "comment_id": 62159470, "body": "This doesn&#39;t address the &quot;why call it <code>unique</code> instead of something more explicit and longer&quot;.  The answer to which would be &quot;C++ is so far from caring about readability or coherence that after a long number of people thought and thought about the issue, they still added a keyword called <a href=\"http://en.cppreference.com/w/cpp/language/alignas\" rel=\"nofollow noreferrer\"><code>alignas</code></a>.&quot;  Try pronouncing that."}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": true, "score": 5, "last_activity_date": 1463615564, "last_edit_date": 1463615564, "creation_date": 1463613770, "answer_id": 37311605, "question_id": 37311487, "link": "https://stackoverflow.com/questions/37311487/why-listunique-removes-only-consecutive-elements-in-c/37311605#37311605", "title": "Why list::unique removes only consecutive elements in C++?", "body": "<p>Design of the standard library follows the approach of providing the user with a comprehensive set of basic, relatively minimalistic algorithmic \"building blocks\", which, if necessary, can be manually combined into more complex algorithms. Removal of consecutive equivalent elements happens to such minimalistic algorithm. Removal of non-consecutive equivalent elements in a non-ordered sequence is definitely not a minimalistic algorithm. It is not a <em>natural</em> algorithm for a non-ordered sequence.</p>\n\n<p>Typically, in order to achieve the latter in an non-ordered container the user would have to perform <code>sort</code> and then perform <code>unique</code>. Since the library already provides <code>sort</code> and <code>unique</code> as basic \"building blocks\", there's no need to provide a separate version of <code>unique</code> algorithm that would work with non-adjacent elements. In that sense <code>sort</code> and <code>unique</code> form an idiomatic pair, just like <code>remove_if</code> and <code>erase</code> in the well-known <a href=\"https://en.wikipedia.org/wiki/Erase%E2%80%93remove_idiom\" rel=\"nofollow\">erase\u2013remove idiom</a>.</p>\n\n<p>Also, the problem with implementing non-adjacent <code>unique</code> is that a \"clean\" implementation of such functionality would call for a non-reordering operation, i.e. repetitive elements should be removed, but the relative order of the remaining elements should remain unchanged. It is not possible to implement such functionality as a minimalistic \"building block\". And I'd say that  there's not much need for it, since in most practical cases the user will either be happy with <code>sort</code>-then-<code>unique</code> combination or use a different container type altogether.</p>\n"}, {"tags": [], "owner": {"reputation": 31218, "user_id": 211160, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Z2fk7.png?s=128&g=1", "display_name": "HostileFork says dont trust SE", "link": "https://stackoverflow.com/users/211160/hostilefork-says-dont-trust-se"}, "is_accepted": false, "score": 2, "last_activity_date": 1463615261, "creation_date": 1463615261, "answer_id": 37311809, "question_id": 37311487, "link": "https://stackoverflow.com/questions/37311487/why-listunique-removes-only-consecutive-elements-in-c/37311809#37311809", "title": "Why list::unique removes only consecutive elements in C++?", "body": "<p>I agree with your premise that the usage of the word <code>unique</code> is not ideal, relative to longer names perhaps as <code>consecutive_unique</code>.  <em>\"(The weirder the operation, the longer the name should be)\"</em>  I would not--myself--have thought mere <code>unique</code> a good name for this, using a longer name and then saving the short name for what you would intuit.</p>\n\n<p>So...why?  I am reminded of a <a href=\"http://hebig.org/blog/003029.php\" rel=\"nofollow\">hypothetical interview with Richard Feynman</a>, regarding the question of \"why are manhole covers round\".  I'll cite this bit:</p>\n\n<blockquote>\n  <p><strong>Interviewer:</strong> Do you believe there is a safety issue? I mean, couldn't square covers fall into the hole and hurt someone?</p>\n  \n  <p><strong>Feynman:</strong> Not likely. Square covers are sometimes used on prefabricated vaults where the access passage is also square. The cover is larger than the passage, and sits on a ledge that supports it along the entire perimeter. The covers are usually made of solid metal and are very heavy. Let's assume a two-foot square opening and a ledge width of 1-1/2 inches. In order to get it to fall in, you would have to lift one side of the cover, then rotate it 30 degrees so that the cover would clear the ledge, and then tilt the cover up nearly 45 degrees from horizontal before the center of gravity would shift enough for it to fall in. Yes, it's possible, but very unlikely. The people authorized to open manhole covers could easily be trained to do it safely.</p>\n</blockquote>\n\n<p>In this context, the why will come down to: <em>\"The people authorized to open manhole covers could easily be trained to do it safely.\"</em></p>\n\n<p>Even if a C++ function has the \"intuitive\" name, that's no protection against its behavior.  You must be cognizant of a lot of details to use a library class or function.  In a way, it's good to train you to imagine every method or function is called X... so you read to see what X actually promises contractually.</p>\n"}], "owner": {"reputation": 2318, "user_id": 1840861, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vpYSr.jpg?s=128&g=1", "display_name": "Praveen Vinny", "link": "https://stackoverflow.com/users/1840861/praveen-vinny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 0, "accepted_answer_id": 37311605, "answer_count": 2, "score": 1, "last_activity_date": 1463615564, "creation_date": 1463612906, "last_edit_date": 1495539844, "question_id": 37311487, "link": "https://stackoverflow.com/questions/37311487/why-listunique-removes-only-consecutive-elements-in-c", "title": "Why list::unique removes only consecutive elements in C++?", "body": "<p>I had found that <code>list::unique()</code> removes only consecutive elements in a list. I would like to know the reason why the method functions like this.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/4885676/remove-duplicates-from-a-listint\">Remove duplicates from a list</a> explains how to remove the duplicate elements from a list but it doesn't explain why just the consecutive elements are only removed.</p>\n\n<p>The following is my test code:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;list&gt;\n#include &lt;string&gt;\n#include &lt;utility&gt;\n\nusing namespace std;\n\nvoid print_message( const pair&lt;int,string&gt;&amp; message )\n{\n    cout &lt;&lt; message.first &lt;&lt; \" - \" &lt;&lt; message.second &lt;&lt; endl;\n}\n\nint main( )\n{\nlist&lt; pair&lt; int, string &gt; &gt; message;\nlist&lt; pair&lt; int, string &gt; &gt;::iterator ip;\n\nmessage.push_back( make_pair( 1, string(\"Test Foo One\")) );\nmessage.push_back( make_pair( 1, string(\"Test Foo Two\")) );\nmessage.push_back( make_pair( 1, string(\"Test Foo Two\")) );\nmessage.push_back( make_pair( 1, string(\"Test Foo Three\" )) );\nmessage.push_back( make_pair( 1, string(\"Test Foo Two\" )));\nmessage.push_back( make_pair( 1, string(\"Test Foo Two\")) );\n\ncout &lt;&lt; \"ORIGINAL MESSAGES\" &lt;&lt; endl;\nip = message.begin();\nwhile(ip!=message.end()) {\n        print_message(*ip);\n        ip++;\n}\n\nmessage.unique();\ncout &lt;&lt; \"\\nSEQUENTIAL DUPLICATES REMOVED\" &lt;&lt; endl;\nip = message.begin();\nwhile(ip!=message.end()) {\n        print_message(*ip);\n        ip++;\n}\n\n}\n</code></pre>\n\n<p>Why is this method <code>list::unique()</code> designed just to remove consecutive duplicate elements in the list?</p>\n"}, {"tags": ["c++", "visual-c++", "visual-studio-2015"], "comments": [{"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 3, "creation_date": 1463617182, "post_id": 37311439, "comment_id": 62144877, "body": "Unless you&#39;re trying to support a pre-90&#39;s codebase, why not use Unicode?"}, {"owner": {"reputation": 37, "user_id": 5637204, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/caa815bb9206862129bc99cfc8dd86d5?s=128&d=identicon&r=PG&f=1", "display_name": "Mr_Max", "link": "https://stackoverflow.com/users/5637204/mr-max"}, "reply_to_user": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1463619369, "post_id": 37311439, "comment_id": 62145406, "body": "I&#39;m currently writing a Huffman method text compression program, that&#39;s why my first thought was to use encoding fitting one byte. ANSI seemed to be the obvious choice, as my needs include only standard alphabet + specific Latin2 signs."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1463646514, "post_id": 37311439, "comment_id": 62155361, "body": "use UTF-8. It&#39;s the obvious choice. ANSI will become a mess if you don&#39;t understand what charset is"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1463650082, "post_id": 37311439, "comment_id": 62157907, "body": "@Mr_Max: As you&#39;re writing a compression program, <b>it really</b> doesn&#39;t matter. Huffman coding assigns a variable-length code to <code>\u0142</code> based on its frequency. The source encoding really doesn&#39;t matter, as long as your compressor knows how to get the proper input tokens (i.e. with UTF-8, you need to consider whether you want to compress bytes or characters)"}], "answers": [{"tags": [], "owner": {"reputation": 2473, "user_id": 4490706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nmMcD.jpg?s=128&g=1", "display_name": "Ton Plooij", "link": "https://stackoverflow.com/users/4490706/ton-plooij"}, "is_accepted": false, "score": 0, "last_activity_date": 1463644879, "creation_date": 1463644879, "answer_id": 37317290, "question_id": 37311439, "link": "https://stackoverflow.com/questions/37311439/encoding-of-latin-2-signs-in-vs2015/37317290#37317290", "title": "Encoding of Latin 2 signs in VS2015", "body": "<p>First check your text.txt file with a hex-editor, it should contain bytes 0x6F and 0x88 (111 and 136). When you read this file from your C++ program, output the values as int, not as char, to determine the correct values. Outputting it as a char requires an output codepage to be used consistent with what you expect. See the Properties, Options tab, Current Code page in the command prompt that runs your C++ app. It this is not CP852 it will not show the characters as you expect. </p>\n"}, {"tags": [], "owner": {"reputation": 3651, "user_id": 383779, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/363c7fb07b9e121acdb8c40115b94e34?s=128&d=identicon&r=PG", "display_name": "sergiol", "link": "https://stackoverflow.com/users/383779/sergiol"}, "is_accepted": false, "score": 0, "last_activity_date": 1466203054, "creation_date": 1466203054, "answer_id": 37891319, "question_id": 37311439, "link": "https://stackoverflow.com/questions/37311439/encoding-of-latin-2-signs-in-vs2015/37891319#37891319", "title": "Encoding of Latin 2 signs in VS2015", "body": "<p>Try with a different version of <em>fopen</em>:</p>\n\n<pre><code>FILE* plik= NULL;\nint err= _tfopen_s(&amp;plik, _T(\"Text.txt\"), _T(\"rt\"));\n\nif(err != 0 || plik == NULL)\n{\n    ASSERT(FALSE);\n    return 1;\n}\n</code></pre>\n\n<p>See also documentation:</p>\n\n<ul>\n<li><a href=\"https://msdn.microsoft.com/en-us/library/c7sskzc1.aspx\" rel=\"nofollow\">fgetc, fgetwc</a></li>\n<li><a href=\"https://msdn.microsoft.com/en-us/library/410hkeyx.aspx\" rel=\"nofollow\">_fgetchar, _fgetwchar</a></li>\n</ul>\n"}], "owner": {"reputation": 37, "user_id": 5637204, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/caa815bb9206862129bc99cfc8dd86d5?s=128&d=identicon&r=PG&f=1", "display_name": "Mr_Max", "link": "https://stackoverflow.com/users/5637204/mr-max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1466203054, "creation_date": 1463612620, "question_id": 37311439, "link": "https://stackoverflow.com/questions/37311439/encoding-of-latin-2-signs-in-vs2015", "title": "Encoding of Latin 2 signs in VS2015", "body": "<p>I'm trying to enable my C++ program to accept both \nsigns from CP852(Latin 2) in form of text written in the console, as well as loaded up from a simple text file.\nI cannot figure out what is the default encoding since either way gives me different ANSI code. \nI've set the CP to Central European (DOS) 852 \nin Advanced Save Options. </p>\n\n<p>1) casting with <code>(int)\u0142</code> gave me the number <strong>136</strong></p>\n\n<p>2) assigning to a variable <code>unsigned char sign = '\u0142'</code> and printing it on the screen with <code>cout</code> gave me the number <strong>136</strong></p>\n\n<p>3) using \"Add watch\" control to the variable containing \u0142, it shows the number <strong>179</strong></p>\n\n<p>4) while loading from a text file, <strong>179</strong> again, using this simple code</p>\n\n<pre><code>int x;\n\nFILE* plik;\nplik= fopen(\"Text.txt\", \"r\"); // It contains 2 signs, \"o\u0142\"\nwhile ((x = fgetc(plik)) != EOF)\n{\n    cout &lt;&lt; (char)x;\n}\nfclose(plik);\n</code></pre>\n\n<p>Output: \"o|\" </p>\n\n<p>My main question is, why does it handle the same sign (or am i wrong?) \"\u0142\" once as <strong>136</strong> and other time as <strong>179</strong>? How to deal with this problem? This way i cannot print and accept a sign with comparison, since their codes are different, even if what is in the file is exactly the same as in the console window. </p>\n"}, {"tags": ["c++", "templates", "inner-classes", "argument-dependent-lookup", "name-lookup"], "answers": [{"tags": [], "owner": {"reputation": 3321, "user_id": 397405, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f6c3cdf140b9b9c006556f9c949086e?s=128&d=identicon&r=PG", "display_name": "Mohammad Alaggan", "link": "https://stackoverflow.com/users/397405/mohammad-alaggan"}, "is_accepted": false, "score": 0, "last_activity_date": 1463611893, "last_edit_date": 1495541281, "creation_date": 1463611893, "answer_id": 37311332, "question_id": 37311331, "link": "https://stackoverflow.com/questions/37311331/implementing-non-member-generic-function-for-specific-nested-class-of-a-class-te/37311332#37311332", "title": "Implementing non-member generic function for specific nested class of a class template", "body": "<p>This will work: </p>\n\n<pre><code>namespace impl {\n    template &lt;int P&gt;\n    struct B {\n        auto abs() const { return 1; }\n    };\n\n    template &lt;int P&gt;\n    auto abs(B&lt;P&gt;&amp; b) {\n        return b.abs();\n    }\n}\n\ntemplate &lt;int P&gt;\nstruct A {\n    using B = impl::B&lt;P&gt;;\n    friend B;\n};\n\nint main() {\n    A&lt;3&gt;::B inner;\n    abs(inner);\n}\n</code></pre>\n\n<p>This solution uses ADL because <code>abs</code> now in the same namespace as <code>B</code>. Moreover, we avoided having <code>P</code> in a non-deduced context (<code>P</code> is not to the left of some <code>::</code> symbol) by passing the template parameter again to <code>B</code>. Unfortunately, now <code>B</code> is not a member of <code>A</code>, so if you want to give it access to <code>A</code>'s member you are going to have to make it a friend. This previous solution is due to <a href=\"https://stackoverflow.com/a/2882203/397405\">this answer</a>. We improve upon it next.</p>\n\n<p>Alternatively, if you really want <code>B</code> to be a member of <code>A</code>, then all you need is a public facade to ensure the correct redirection:</p>\n\n<pre><code>namespace impl {\n    template &lt;typename T&gt;\n    struct facade : public T {};\n\n    template &lt;typename T&gt;\n    auto abs(facade&lt;T&gt;&amp; b) { return b.abs();    }\n}\n\ntemplate &lt;int P&gt;\nstruct A {\n    struct B_ {\n        auto abs() const { return 1; }\n    };\n\n    using B = impl::facade&lt;B_ &gt;;\n};\n\nint main() {\n    A&lt;3&gt;::B inner;\n    abs(inner);\n}\n</code></pre>\n\n<p>The advantage here is that this public facade is reusable for several classes, and that it doesn't have to be a friend.</p>\n"}, {"comments": [{"owner": {"reputation": 3321, "user_id": 397405, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f6c3cdf140b9b9c006556f9c949086e?s=128&d=identicon&r=PG", "display_name": "Mohammad Alaggan", "link": "https://stackoverflow.com/users/397405/mohammad-alaggan"}, "edited": false, "score": 0, "creation_date": 1463613831, "post_id": 37311375, "comment_id": 62144102, "body": "Is there a way to keep the declaration where it is, but provide the implementation outside the class, in another source file?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 3321, "user_id": 397405, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f6c3cdf140b9b9c006556f9c949086e?s=128&d=identicon&r=PG", "display_name": "Mohammad Alaggan", "link": "https://stackoverflow.com/users/397405/mohammad-alaggan"}, "edited": false, "score": 1, "creation_date": 1463614057, "post_id": 37311375, "comment_id": 62144139, "body": "@M.Alaggan No. These instantiate into a family of non-template functions, and there&#39;s no way to spell that outside the class template definition."}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 3, "last_activity_date": 1463612427, "last_edit_date": 1463612427, "creation_date": 1463612113, "answer_id": 37311375, "question_id": 37311331, "link": "https://stackoverflow.com/questions/37311331/implementing-non-member-generic-function-for-specific-nested-class-of-a-class-te/37311375#37311375", "title": "Implementing non-member generic function for specific nested class of a class template", "body": "<pre><code>template&lt;int P&gt;\nstruct A {\n    struct B {\n        auto abs() const { return 1; }\n    };\n    friend auto abs(B const &amp;e) { return e.abs(); }\n//  ^^^^^^\n};\n</code></pre>\n\n<p>Then let ADL work its magic.</p>\n\n<p>(Defining it inside <code>B</code> is also fine. The choice's up to you.)</p>\n"}], "owner": {"reputation": 3321, "user_id": 397405, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f6c3cdf140b9b9c006556f9c949086e?s=128&d=identicon&r=PG", "display_name": "Mohammad Alaggan", "link": "https://stackoverflow.com/users/397405/mohammad-alaggan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 37311375, "answer_count": 2, "score": 1, "last_activity_date": 1463612664, "creation_date": 1463611893, "last_edit_date": 1463612664, "question_id": 37311331, "link": "https://stackoverflow.com/questions/37311331/implementing-non-member-generic-function-for-specific-nested-class-of-a-class-te", "title": "Implementing non-member generic function for specific nested class of a class template", "body": "<p>I have the following class:</p>\n\n<pre><code>template&lt;int P&gt;\nstruct A {\n    struct B {\n        auto abs() const { return 1; }\n    };\n};\n</code></pre>\n\n<p>Specifically <code>A</code> is supposed to be the finite field of integers modulo P, and <code>B</code> is the class representing elements from this finite field. Then I have a generic implementation of the extended GCD algorithm which is supposed to use the <code>abs</code> function. The problem I want the extended GCD algorithm implementation to work on basic types (int, long, etc), as well as <code>A&lt;P&gt;::B</code>. So I need to implement a non-member <code>abs</code> that will call <code>A&lt;P&gt;::B::abs</code>. I tried a three techniques, two of them don't work and one that works but is not suitable.</p>\n\n<p>Technique 1 (doesn't work): use argument-dependent lookup (ADL). Define the following <strong>inside</strong> the body of <code>A</code> but outside the body of <code>B</code>:</p>\n\n<pre><code>auto abs(B const &amp;e) { return e.abs(); }\n</code></pre>\n\n<p>It won't work since ADL looks only inside namespaces not class scopes. <strong>UPDATE</strong> : ADL doesn't work here because <code>abs</code> is an instance method. However as per T.C.'s answer, if you make it a friend function it works correctly and ADL finds it!</p>\n\n<p>Technique 2 (doesn't work): use constrained function template in global or namespace scope:</p>\n\n<pre><code>template&lt;int P&gt;\nauto abs(typename A&lt;P&gt;::B const &amp;e) { return e.abs(); }\n</code></pre>\n\n<p>This will also not work because <code>P</code> is in a non-deduced context.</p>\n\n<p>Technique 3 (works, but not satisfactory): use unconstrained function template in global or namespace scope:</p>\n\n<pre><code>template&lt;typename T&gt;\nauto abs(T const &amp;e) { return e.abs(); }\n</code></pre>\n\n<p>This works. However, it is unconstrained. I would like to restrict instantiations of this function template only to <code>A&lt;P&gt;</code> (for <code>P</code> unknown beforehand), and other class templates (for polynomial rings and field extensions). The problem is I am not sure how to use SFINAE if <code>P</code> is in a non-deduced context. </p>\n"}, {"tags": ["c++", "loops", "increment"], "comments": [{"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 1, "creation_date": 1463611971, "post_id": 37311305, "comment_id": 62143582, "body": "Possibly save each value before generating the next one, then when/if the next one violates the constraint, using the stored one?"}], "answers": [{"tags": [], "owner": {"reputation": 1613, "user_id": 456065, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/49b8a5172d9634e038c69110bfb5e480?s=128&d=identicon&r=PG", "display_name": "Sanich", "link": "https://stackoverflow.com/users/456065/sanich"}, "is_accepted": true, "score": 3, "last_activity_date": 1463898554, "last_edit_date": 1463898554, "creation_date": 1463612071, "answer_id": 37311367, "question_id": 37311305, "link": "https://stackoverflow.com/questions/37311305/finding-the-last-value-of-a-sequence-before-a-termination-value-c/37311367#37311367", "title": "Finding the last value of a sequence before a termination value C++", "body": "<p>For example:</p>\n\n<pre><code>    int last = 0;\n    for (int x = 0; x &lt; 10; x+=3)\n    {\n        last = x;\n    }\n    cout &lt;&lt; last;\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>int x = 0;\nwhile (x &lt; 10)\n{\n    x = x + 3;\n}\ncout &lt;&lt; x - 3;\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>int x = 0;\nint last = 0;\nwhile (x &lt; 10)\n{\n    last = x;\n    x = x + 3;\n}\ncout &lt;&lt; last;\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>int x = 0;\nwhile (x + 3 &lt; 10)\n{\n    x = x + 3;\n}\ncout &lt;&lt; x;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 221, "user_id": 4452804, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1usct.png?s=128&g=1", "display_name": "nitish-d", "link": "https://stackoverflow.com/users/4452804/nitish-d"}, "is_accepted": false, "score": 1, "last_activity_date": 1463612636, "creation_date": 1463612636, "answer_id": 37311445, "question_id": 37311305, "link": "https://stackoverflow.com/questions/37311305/finding-the-last-value-of-a-sequence-before-a-termination-value-c/37311445#37311445", "title": "Finding the last value of a sequence before a termination value C++", "body": "<p>If you want to see the last value, it is better to decrease it by the same amount you are incrementing it.</p>\n\n<pre><code>int x = 0;\nwhile (x + 3 &lt; 10)\n{\nx = x + 3;\n}\nx = x -3;\n</code></pre>\n\n<p>Another way to do this is to use a break statement inside the loop with a suitable condition with which you want to leave it.</p>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 6348072, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BkPOh.jpg?s=128&g=1", "display_name": "BlackB0ltz", "link": "https://stackoverflow.com/users/6348072/blackb0ltz"}, "is_accepted": false, "score": 2, "last_activity_date": 1463629686, "creation_date": 1463629686, "answer_id": 37313636, "question_id": 37311305, "link": "https://stackoverflow.com/questions/37311305/finding-the-last-value-of-a-sequence-before-a-termination-value-c/37313636#37313636", "title": "Finding the last value of a sequence before a termination value C++", "body": "<p>Using your code you can try: </p>\n\n<pre><code>int x = 0;\nwhile (x+3 &lt; 10)\n{\n    x = x + 3;\n}\ncout &lt;&lt; x;\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 6353349, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d91436e551b7b6b110b5c4d089c84100?s=128&d=identicon&r=PG&f=1", "display_name": "Bendzukic", "link": "https://stackoverflow.com/users/6353349/bendzukic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 37311367, "answer_count": 3, "score": 1, "last_activity_date": 1463898554, "creation_date": 1463611765, "question_id": 37311305, "link": "https://stackoverflow.com/questions/37311305/finding-the-last-value-of-a-sequence-before-a-termination-value-c", "title": "Finding the last value of a sequence before a termination value C++", "body": "<p>In this loop, x is incremented one too many times.</p>\n\n<pre><code>int x = 0;\nwhile (x &lt; 10)\n{\n    x = x + 3;\n}\ncout &lt;&lt; x;\n</code></pre>\n\n<p>The output for this is 12, when i want it to be 9. Generally speaking, how would I find the last value of a sequence (in this case 9)  given a restraint ( in this case 10). </p>\n"}, {"tags": ["c++", "c", "alsa"], "comments": [{"owner": {"reputation": 1542, "user_id": 1284258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2777bcec2428f4ab02612af25abaa836?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/1284258/jason"}, "edited": false, "score": 3, "creation_date": 1463611910, "post_id": 37311263, "comment_id": 62143567, "body": "40 ms is an incredibly short time and you would at most hear a pop or click."}, {"owner": {"reputation": 708, "user_id": 1743985, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/20cqM.jpg?s=128&g=1", "display_name": "kburbach", "link": "https://stackoverflow.com/users/1743985/kburbach"}, "reply_to_user": {"reputation": 1542, "user_id": 1284258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2777bcec2428f4ab02612af25abaa836?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/1284258/jason"}, "edited": false, "score": 0, "creation_date": 1463614505, "post_id": 37311263, "comment_id": 62144244, "body": "I still don&#39;t hear anything with a 250ms duration, so 12,000 frames"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1463615237, "post_id": 37311263, "comment_id": 62144404, "body": "Try decreasing the FRAMES_LEN from 48,000 down to 2,000 or so in decrements of perhaps 2,000 and see when you stop hearing what is produced."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1463618935, "post_id": 37311263, "comment_id": 62145308, "body": "Can you attach an oscilloscope to the output instead of the speaker and measure the partial sound wave that comes out?"}, {"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1463639239, "post_id": 37311263, "comment_id": 62150868, "body": "What is the period size? Are you ever calling <code>snd_pcm_drain()</code>?"}, {"owner": {"reputation": 1542, "user_id": 1284258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2777bcec2428f4ab02612af25abaa836?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/1284258/jason"}, "edited": false, "score": 0, "creation_date": 1463695519, "post_id": 37311263, "comment_id": 62187409, "body": "See this for a discussion of perceptible sounds as it relates to frequency and duration. <a href=\"http://sound.stackexchange.com/q/28163\">sound.stackexchange.com/q/28163</a>"}], "answers": [{"tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 0, "last_activity_date": 1463651696, "creation_date": 1463651696, "answer_id": 37319772, "question_id": 37311263, "link": "https://stackoverflow.com/questions/37311263/large-buffer-sizes-plays-small-size-doesnt/37319772#37319772", "title": "Large buffer sizes plays, small size doesn&#39;t", "body": "<p>This is reasonable if there is any kind of post-processing going on with a filter of length >= 1920 frames. Such filtering can drop any click sounds, for instance. The whole reason for using ALSA instead of just talking to a D/A converter is to have audio-specific processing.</p>\n"}, {"tags": [], "owner": {"reputation": 1542, "user_id": 1284258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2777bcec2428f4ab02612af25abaa836?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/1284258/jason"}, "is_accepted": false, "score": 0, "last_activity_date": 1463695586, "last_edit_date": 1492088341, "creation_date": 1463695586, "answer_id": 37334841, "question_id": 37311263, "link": "https://stackoverflow.com/questions/37311263/large-buffer-sizes-plays-small-size-doesnt/37334841#37334841", "title": "Large buffer sizes plays, small size doesn&#39;t", "body": "<p>Your logging is not lying to you. You asked it to write 1920 samples to the device and it did. Since your 48000 sample experiment played a sound that lasted for one second, your hardware must be running at 48 kHz. Assuming that, 1920 frames would last four hundredths of a second. Depending on the frequency of the sine in your sine buffer, you may not hear that. </p>\n\n<p>Here's a deeper discussion: <a href=\"https://sound.stackexchange.com/q/28163\">https://sound.stackexchange.com/q/28163</a></p>\n"}], "owner": {"reputation": 708, "user_id": 1743985, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/20cqM.jpg?s=128&g=1", "display_name": "kburbach", "link": "https://stackoverflow.com/users/1743985/kburbach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 286, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1463695586, "creation_date": 1463611502, "question_id": 37311263, "link": "https://stackoverflow.com/questions/37311263/large-buffer-sizes-plays-small-size-doesnt", "title": "Large buffer sizes plays, small size doesn&#39;t", "body": "<p>I'm having a problem getting sound output when I have a small buffer size (1920 frames). If I sample at <code>48kHz</code> and make the buffer size <code>480000</code> the sine wave plays correctly for 1 second. What I want to do it only play the sine wave for <code>40ms</code>. </p>\n\n<p>I've calculate that to be <code>48000 samples/sec * 1sec/1000ms * 40ms = 1920 frames</code>. However, when I try to call <code>snd_pcm_writei</code> with only 1920 frames nothing comes out!</p>\n\n<p>Here's the code in question:</p>\n\n<pre><code>void PCM::playSound(float freqHz, uint16_t durationMs)\n{ \n    int FRAMES_LEN=48000;\n\n    //Send the sine_buffer to sound card, with correct buffer length\n    snd_pcm_sframes_t frames = snd_pcm_writei(handle, sine_buffer, FRAMES_LEN);\n\n    if (frames &lt; 0){\n        HW_INFO() &lt;&lt; \"PCM::playSound-- snd_pcm_writei failed,trying to recover:\" \n                  &lt;&lt; snd_strerror(frames);\n        frames = snd_pcm_recover(handle, frames, 0);\n    }\n    if (frames &lt; 0) {\n        HW_INFO() &lt;&lt; \"PCM::playSound-- snd_pcm_writei recovery failed: \" \n                  &lt;&lt; snd_strerror(frames);\n    }\n    HW_INFO() &lt;&lt; \"Wrote \" &lt;&lt; frames &lt;&lt; \" frames\";\n\n    return;\n}\n</code></pre>\n\n<p>If <code>FRAMES_LEN</code> is <code>48000</code>, this code works fine and produces a sine wave that last 1 second.</p>\n\n<p>If <code>FRAMES_LEN</code> is <code>1920</code>, I cannot hear a sine wave at all, but the log states that <code>Wrote 1920 frames</code>.</p>\n\n<p>What is happening?</p>\n"}, {"tags": ["c++", "compiler-errors", "codeblocks", "wxwidgets"], "comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 5, "creation_date": 1463610710, "post_id": 37311147, "comment_id": 62143250, "body": "Sounds like you don&#39;t have C++11 enabled."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1463615044, "post_id": 37311147, "comment_id": 62144353, "body": "Exceptions are thrown. Compilation errors are printed."}, {"owner": {"reputation": 157, "user_id": 6247458, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/07882b10c91e1e95ade0bffc3ff728f0?s=128&d=identicon&r=PG&f=1", "display_name": "jaw2233", "link": "https://stackoverflow.com/users/6247458/jaw2233"}, "edited": false, "score": 0, "creation_date": 1463617583, "post_id": 37311147, "comment_id": 62144972, "body": "how would I enable c++11?"}], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 6247458, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/07882b10c91e1e95ade0bffc3ff728f0?s=128&d=identicon&r=PG&f=1", "display_name": "jaw2233", "link": "https://stackoverflow.com/users/6247458/jaw2233"}, "edited": false, "score": 0, "creation_date": 1463618948, "post_id": 37312088, "comment_id": 62145312, "body": "How would I add -std=gnu++11 to the command for compiling wxwidgets with mingw?"}, {"owner": {"reputation": 889, "user_id": 1521241, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/01090d621800a51df9188fc8cdb28178?s=128&d=identicon&r=PG", "display_name": "macroland", "link": "https://stackoverflow.com/users/1521241/macroland"}, "reply_to_user": {"reputation": 157, "user_id": 6247458, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/07882b10c91e1e95ade0bffc3ff728f0?s=128&d=identicon&r=PG&f=1", "display_name": "jaw2233", "link": "https://stackoverflow.com/users/6247458/jaw2233"}, "edited": false, "score": 0, "creation_date": 1463622611, "post_id": 37312088, "comment_id": 62146151, "body": "<a href=\"http://stackoverflow.com/questions/27285706/trouble-using-wxwidgets-3-0-2-library-under-mingw-64\" title=\"trouble using wxwidgets 3 0 2 library under mingw 64\">stackoverflow.com/questions/27285706/&hellip;</a>"}], "tags": [], "owner": {"reputation": 889, "user_id": 1521241, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/01090d621800a51df9188fc8cdb28178?s=128&d=identicon&r=PG", "display_name": "macroland", "link": "https://stackoverflow.com/users/1521241/macroland"}, "is_accepted": true, "score": 1, "last_activity_date": 1463617658, "last_edit_date": 1495540897, "creation_date": 1463617658, "answer_id": 37312088, "question_id": 37311147, "link": "https://stackoverflow.com/questions/37311147/error-is-enum-not-declared-in-this-scope-when-trying-to-compile-my-wxwidgets-p/37312088#37312088", "title": "Error &quot;is_enum not declared in this scope&quot; when trying to compile my wxWidgets program", "body": "<p>As Brian already indicated, you should enable C++11. There are two ways of doing this as you can see <a href=\"https://stackoverflow.com/questions/10613126/what-are-the-differences-between-std-c11-and-std-gnu11\">What are the differences between -std=c++11 and -std=gnu++11?</a>. </p>\n\n<p>As I remember, when compiling the whole wxWidgets library, I used -std=gnu++11 and had no problems.</p>\n"}, {"tags": [], "owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "is_accepted": false, "score": 0, "last_activity_date": 1463663783, "creation_date": 1463663783, "answer_id": 37324371, "question_id": 37311147, "link": "https://stackoverflow.com/questions/37311147/error-is-enum-not-declared-in-this-scope-when-trying-to-compile-my-wxwidgets-p/37324371#37324371", "title": "Error &quot;is_enum not declared in this scope&quot; when trying to compile my wxWidgets program", "body": "<p>Just to add to macroland comment:</p>\n\n<p>You should consider upgrading to gcc version 5.2+. This version(s) does have a full set of c++11 features, whereas previous versions have them partially.</p>\n"}], "owner": {"reputation": 157, "user_id": 6247458, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/07882b10c91e1e95ade0bffc3ff728f0?s=128&d=identicon&r=PG&f=1", "display_name": "jaw2233", "link": "https://stackoverflow.com/users/6247458/jaw2233"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 462, "favorite_count": 0, "accepted_answer_id": 37312088, "answer_count": 2, "score": -2, "last_activity_date": 1464126959, "creation_date": 1463610662, "last_edit_date": 1464126959, "question_id": 37311147, "link": "https://stackoverflow.com/questions/37311147/error-is-enum-not-declared-in-this-scope-when-trying-to-compile-my-wxwidgets-p", "title": "Error &quot;is_enum not declared in this scope&quot; when trying to compile my wxWidgets program", "body": "<p>The G++ compiler shows the following errors when I try to compile:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>C:\\wx\\include\\wx\\strvararg.h|350|error: 'is_enum' in namespace 'std' does not name a template type|\nC:\\wx\\include\\wx\\strvararg.h|354|error: 'is_enum' was not declared in this scope|\nC:\\wx\\include\\wx\\strvararg.h|354|error: template argument 1 is invalid|\n</code></pre>\n\n<p>I am using Code::Blocks for this, with a non-monolithic DLL build of wxWidgets.</p>\n\n<p>Thanks for any help!</p>\n"}, {"tags": ["c++", "algorithm", "dynamic-programming"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1463610754, "post_id": 37311139, "comment_id": 62143263, "body": "Step through your code line by line, using the debugger and check all of the variables if they contain expected values."}, {"owner": {"reputation": 9246, "user_id": 1594090, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/abcb972aecf3262918ecae1d9a3781d1?s=128&d=identicon&r=PG", "display_name": "template boy", "link": "https://stackoverflow.com/users/1594090/template-boy"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1463610833, "post_id": 37311139, "comment_id": 62143285, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I want to know if my reasoning is wrong, and if so why."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1463611071, "post_id": 37311139, "comment_id": 62143345, "body": "I can&#39;t tell if your reasoning is wrong (TL;DR didn&#39;t care), but your code obviously gives you the wrong results, such it&#39;s very likely. It&#39;s very rare the compiler goes wrong about something you didn&#39;t intend. So check your intentions first please."}, {"owner": {"reputation": 9246, "user_id": 1594090, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/abcb972aecf3262918ecae1d9a3781d1?s=128&d=identicon&r=PG", "display_name": "template boy", "link": "https://stackoverflow.com/users/1594090/template-boy"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1463611390, "post_id": 37311139, "comment_id": 62143433, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 If you didn&#39;t read the question then your comment is obviously uninformed. What if I had the correct reasoning but a faulty implementation? I explain everything in the question."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1463611812, "post_id": 37311139, "comment_id": 62143536, "body": "Post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> in 1st place please."}, {"owner": {"reputation": 2029, "user_id": 6016064, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a5c4e2adb9a67f0af1a58f9c9c651c1d?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Peters", "link": "https://stackoverflow.com/users/6016064/edward-peters"}, "edited": false, "score": 1, "creation_date": 1463611859, "post_id": 37311139, "comment_id": 62143551, "body": "&quot;If the entry is less than or equal to the number of coins, then we can take that path by adding the number of paths from the top (i-1,j) and left (i, j-1). I subtract k by 1 because the number of coins from the last entry was 1 less. &quot;  1 less? Shouldn&#39;t it be &quot;However many coins are at this square less&quot;?"}, {"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 2, "creation_date": 1463611941, "post_id": 37311139, "comment_id": 62143574, "body": "shouldn&#39;t <code>Count</code> pass on <code>k - M[i][j]</code> instead of <code>k - 1</code>"}, {"owner": {"reputation": 9246, "user_id": 1594090, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/abcb972aecf3262918ecae1d9a3781d1?s=128&d=identicon&r=PG", "display_name": "template boy", "link": "https://stackoverflow.com/users/1594090/template-boy"}, "reply_to_user": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1463612357, "post_id": 37311139, "comment_id": 62143703, "body": "@vu1p3n0x That&#39;s probably right but when I replace it I still get 0."}, {"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1463612421, "post_id": 37311139, "comment_id": 62143724, "body": "One way to test your reasoning is to try with as simple inputs as possible, e.g. 2x2 matrix of 1s and 0s or 1s and 2s, that you can easily solve by hand and compare results. Or write a brute force solution that compares every path and then compare results for various test cases against your optimal algorithm version. In this case I&#39;d also try running your algorithm with a different K, e.g. 11 or 13, in case you&#39;re off by one."}, {"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1463613111, "post_id": 37311139, "comment_id": 62143922, "body": "You need to fill in counts for the left edge and top edge: at the moment there&#39;s no way to reach 0,0. You&#39;re also using N as a vector index when that&#39;s too large, and testing M[i-1][j-1] against k when your algorithm was M[i][j]."}], "answers": [{"comments": [{"owner": {"reputation": 9246, "user_id": 1594090, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/abcb972aecf3262918ecae1d9a3781d1?s=128&d=identicon&r=PG", "display_name": "template boy", "link": "https://stackoverflow.com/users/1594090/template-boy"}, "edited": false, "score": 0, "creation_date": 1463614252, "post_id": 37311588, "comment_id": 62144194, "body": "This is a very good answer, and yes you were right about me wanting to make sure I was in bounds - that&#39;s where most of the problems came from I see."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 9246, "user_id": 1594090, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/abcb972aecf3262918ecae1d9a3781d1?s=128&d=identicon&r=PG", "display_name": "template boy", "link": "https://stackoverflow.com/users/1594090/template-boy"}, "edited": false, "score": 1, "creation_date": 1463614993, "post_id": 37311588, "comment_id": 62144345, "body": "@templateboy <i>&quot;and yes you were right about me wanting to make sure I was in bounds&quot;</i> That&#39;s what I actually expected you to figure out with the debugger when stepping through your code. Dude ...."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 9246, "user_id": 1594090, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/abcb972aecf3262918ecae1d9a3781d1?s=128&d=identicon&r=PG", "display_name": "template boy", "link": "https://stackoverflow.com/users/1594090/template-boy"}, "edited": false, "score": 0, "creation_date": 1463615762, "post_id": 37311588, "comment_id": 62144547, "body": "@templateboy <i>&quot;simply out of lethargy&quot;</i> Which one&#39;s <i>lethargy</i> first? Yours denying to thoroughly debugging your crap yourself, or mine tired of answering questions <i>&quot;debug my code for me plz&quot;</i>?"}, {"owner": {"reputation": 9246, "user_id": 1594090, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/abcb972aecf3262918ecae1d9a3781d1?s=128&d=identicon&r=PG", "display_name": "template boy", "link": "https://stackoverflow.com/users/1594090/template-boy"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1463617705, "post_id": 37311588, "comment_id": 62145015, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Nobody&#39;s asking for anyone to debug. I was asking whether or not my logic about the problem was correct (I explained my methodology in the question itself) and if not what was wrong. Just stop being lazy and read the question."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 9246, "user_id": 1594090, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/abcb972aecf3262918ecae1d9a3781d1?s=128&d=identicon&r=PG", "display_name": "template boy", "link": "https://stackoverflow.com/users/1594090/template-boy"}, "edited": false, "score": 0, "creation_date": 1463617844, "post_id": 37311588, "comment_id": 62145044, "body": "@templateboy Just stop being lazy and debug our code in 1st place please."}, {"owner": {"reputation": 9246, "user_id": 1594090, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/abcb972aecf3262918ecae1d9a3781d1?s=128&d=identicon&r=PG", "display_name": "template boy", "link": "https://stackoverflow.com/users/1594090/template-boy"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1463618026, "post_id": 37311588, "comment_id": 62145084, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Which I did."}], "tags": [], "owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "is_accepted": true, "score": 2, "last_activity_date": 1463614101, "last_edit_date": 1463614101, "creation_date": 1463613686, "answer_id": 37311588, "question_id": 37311139, "link": "https://stackoverflow.com/questions/37311139/number-of-paths-using-k-coins/37311588#37311588", "title": "Number of paths using k coins", "body": "<p>Your problems are</p>\n\n<ul>\n<li>you're initialising <code>Count[0][0][1] = 1</code> when it should be <code>Count[0][0][M[0][0]]</code> (although that's the same here)</li>\n<li>you're never filling in <code>Count[0][j]</code> or <code>Count[i][0]</code>, i.e. there's no complete path to 0,0 from any cell that you're looping over</li>\n<li>you're off-by-one with your upper indices; you want <code>&lt; N</code> in the loop and to return N-1 as the vector is zero-indexed</li>\n<li>you're testing k against <code>M[i-1][j-1]</code> in your loop not <code>M[i][j]</code></li>\n<li>you're subtracting one coin not <code>M[i][j]</code> coins (as Edward and vu1p3n0x point out in the comments)</li>\n</ul>\n\n<p>Here's a fixed loop:</p>\n\n<pre><code>for (size_t i = 0; i &lt; N; ++i) {\n  for (size_t j = 0; j &lt; N; ++j) {\n    if ((i == 0) &amp;&amp; (j == 0)) {\n      // Skip 0,0: we've populated that already\n      continue;\n    }\n    for (int k = 1; k &lt;= C; ++k) {\n      if (M[i][j] &gt;  k) Count[i][j][k] = 0;\n      if (M[i][j] &lt;= k) {\n        int ways = 0;\n        if (i &gt;= 1) ways += Count[i - 1][j][k - M[i][j]];\n        if (j &gt;= 1) ways += Count[i][j - 1][k - M[i][j]];\n        Count[i][j][k] = ways;\n      }\n    }\n  }\n}\nreturn Count[N-1][N-1][C];\n</code></pre>\n\n<p>Alternatively, maybe I misunderstood: were you deliberately counting the top-left square as 1,1 so that you didn't need to check if we were in-bounds for you i-1 and j-1 check, since there'd always be a row of zeroes to spill into? That would make sense for the return [N][N] and the M[i-1][j-1] I suppose. In that case you'd want to</p>\n\n<ul>\n<li>initialise 1,1 not 0,0 as [1][1][1] = 1, and skip 1,1 in the loop as above</li>\n<li>subtract M[i-1][j-1] coins from k now, instead of 1</li>\n<li>increase MAX_COINS by one if you do need to cope with 10x10, since otherwise you can only accept 9x9</li>\n</ul>\n"}], "owner": {"reputation": 9246, "user_id": 1594090, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/abcb972aecf3262918ecae1d9a3781d1?s=128&d=identicon&r=PG", "display_name": "template boy", "link": "https://stackoverflow.com/users/1594090/template-boy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 338, "favorite_count": 1, "accepted_answer_id": 37311588, "answer_count": 1, "score": -1, "last_activity_date": 1463614101, "creation_date": 1463610639, "last_edit_date": 1463612109, "question_id": 37311139, "link": "https://stackoverflow.com/questions/37311139/number-of-paths-using-k-coins", "title": "Number of paths using k coins", "body": "<blockquote>\n  <p>Given a matrix where every cell has some number of coins. Count number of ways to reach bottom right from top left with exactly <code>k</code> coins. We can move to <code>(i+1, j)</code> and <code>(i, j+1)</code> from a cell <code>(i, j)</code>.</p>\n  \n  <p>Example:</p>\n  \n  <p>Input:  k = 12</p>\n\n<pre><code>   mat[][] = { {1, 2, 3},\n               {4, 6, 5},\n               {3, 2, 1}\n             };\n</code></pre>\n  \n  <p>Output:\n  2 There are two paths with 12 coins</p>\n  \n  <p>1 -> 2 -> 6 -> 2 -> 1<br>\n  1 -> 2 -> 3 -> 5 -> 1</p>\n</blockquote>\n\n<p>I created a recursive definition for this:</p>\n\n<blockquote>\n  <p>Let <code>Count(i, j, k)</code> be the number of ways to get from <code>M[0][0]</code> to <code>M[i][j]</code> using <code>k</code> coins.</p>\n\n<pre><code>Count(i, j, k) = {\n   0:                                       if M[i][j] &gt; k,\n   Count(i-1, j, k-1) + Count(i, j-1, k-1): if M[i][j] &lt; k\n}\n</code></pre>\n</blockquote>\n\n<p>My reasoning for this definition is if the entry in the matrix (the number of coins) is greater than the number of coins we want (<code>k</code>), then we can't take that path, so the value in the table should be 0.</p>\n\n<p>If the entry is less than or equal to the number of coins, then we can take that path by adding the number of paths from the top <code>(i-1,j)</code> and left <code>(i, j-1)</code>. I subtract <code>k</code> by 1 because the number of coins from the last entry was 1 less.</p>\n\n<p>This is how I do it in the following dynamic programming function:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\n\n#define MAX_SIZE  10\n#define MAX_COINS 20\n\nint Count[MAX_SIZE][MAX_SIZE][MAX_COINS]; // number of ways to get from M[0][0] to M[i][j] using k coins\nstd::vector&lt;std::vector&lt;int&gt;&gt; M;\n\nint NumOfPaths(int C) {\n    size_t N = M.size();\n    // Number of paths to (0,0) with 1 coin is 1\n    Count[0][0][1] = 1;\n    // zero coins doesn't work\n    for (size_t i = 0; i &lt; N; ++i) for (size_t j = 0; j &lt; N; ++j)\n        Count[i][j][0] = 0;\n\n    // If the number of coins is greater than the max then Count[i][j][k] = 0;\n    // Otherwise Count[i][j][k] = Count[i-1][j][k-1]+Count[i][j-1][k-1]\n\n    for (size_t i = 1; i &lt;= N; ++i) {\n        for (size_t j = 1; j &lt;= N; ++j) {\n            for (int k = 1; k &lt;= C; ++k) {\n                if (M[i-1][j-1] &gt;  k) Count[i][j][k] = 0;\n                if (M[i-1][j-1] &lt;= k) Count[i][j][k] = Count[i-1][j][k-1] + Count[i][j-1][k-1];\n            }\n        }\n    }\n    return Count[N][N][C];\n}\n\nint main() {\n    M = { {1, 2, 3},\n          {4, 6, 5},\n          {3, 2, 1}\n        };\n\n    cout &lt;&lt; NumOfPaths(12);\n}\n</code></pre>\n\n<p>When I apply the function to the example given in the problem statement, it returns 0, which is incorrect.</p>\n\n<p>I'd like to know where my reasoning went wrong and how I can fix it.</p>\n"}, {"tags": ["c++", "reflection", "iterator", "iteration", "c-preprocessor"], "comments": [{"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1463610423, "post_id": 37311006, "comment_id": 62143163, "body": "this seems like anti-pattern. could you wrap this struct in a union? <code>union wrapper { float arr[1024]; pseudovector vec; };</code>"}, {"owner": {"reputation": 24428, "user_id": 421163, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/l4J7H.jpg?s=128&g=1", "display_name": "c-smile", "link": "https://stackoverflow.com/users/421163/c-smile"}, "edited": false, "score": 3, "creation_date": 1463610515, "post_id": 37311006, "comment_id": 62143190, "body": "Why not just  <code>float[1024] fa; pseudovector pv; memcpy(fa,&amp;pv, sizeof(pv));</code> ?"}, {"owner": {"reputation": 3127, "user_id": 2066079, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Jm7vU.png?s=128&g=1", "display_name": "dberm22", "link": "https://stackoverflow.com/users/2066079/dberm22"}, "reply_to_user": {"reputation": 24428, "user_id": 421163, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/l4J7H.jpg?s=128&g=1", "display_name": "c-smile", "link": "https://stackoverflow.com/users/421163/c-smile"}, "edited": false, "score": 0, "creation_date": 1479218096, "post_id": 37311006, "comment_id": 68457324, "body": "@c-smile Because this is undefined behavior"}], "answers": [{"tags": [], "owner": {"reputation": 4802, "user_id": 3852968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e803f34d50b5355d8cf39bdb4ce2932?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/3852968/andrew"}, "is_accepted": true, "score": 9, "last_activity_date": 1463610465, "creation_date": 1463610465, "answer_id": 37311109, "question_id": 37311006, "link": "https://stackoverflow.com/questions/37311006/iterate-through-struct-by-variable-name/37311109#37311109", "title": "Iterate through struct by variable name", "body": "<p>This may well be easier than you expect. First, some caveats:</p>\n\n<ol>\n<li><p>Arrays are guaranteed, by the standard, to be contiguous; that is, there's no padding inserted between them, and the array itself is aligned with the alignment requirements of the element type.</p></li>\n<li><p>Structs have no such restrictions; they can be subject to arbitrary padding. However, a given implementation (at a given version) will do this the same way in all translation units (otherwise, how else could the same structure definition be used to pass data across translation units?). The usual way this is done is fairly sane, especially when the struct contains <em>only</em> members of a single type. For such a struct, the alignment <em>usually</em> matches the largest alignment of the members, and there's <em>usually</em> no padding because all members have the same alignment.</p></li>\n</ol>\n\n<p>In your case, your array of 1024 floats and your struct with 1024 float members <em>almost certainly</em> have exactly the same memory layout. This is <em>absolutely not guaranteed by the standard</em>, but your compiler may document its struct layout rules, and you can always assert the sizes and alignments match in your unit tests (you do have unit tests, right?)</p>\n\n<p>Given those caveats, you will <em>almost certainly</em> be able to simply <code>reinterpret_cast</code> (or <code>memcpy</code>) between the two.</p>\n"}, {"comments": [{"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1463610693, "post_id": 37311115, "comment_id": 62143242, "body": "As long as you&#39;re OK with undefined behaviour."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1463610765, "post_id": 37311115, "comment_id": 62143267, "body": "Since he&#39;s sending the structure over Ethernet, he&#39;s obviously OK with that. The code to write it almost certainly makes the same assumption of contiguous data."}, {"owner": {"reputation": 3127, "user_id": 2066079, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Jm7vU.png?s=128&g=1", "display_name": "dberm22", "link": "https://stackoverflow.com/users/2066079/dberm22"}, "edited": false, "score": 0, "creation_date": 1463611307, "post_id": 37311115, "comment_id": 62143412, "body": "Nice, thanks! And this works because all the items in the struct are floats, right? If there were of mixed types (i.e. header information in each struct) this could not be used?"}, {"owner": {"reputation": 4802, "user_id": 3852968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e803f34d50b5355d8cf39bdb4ce2932?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/3852968/andrew"}, "edited": false, "score": 0, "creation_date": 1463611941, "post_id": 37311115, "comment_id": 62143575, "body": "<a href=\"http://en.cppreference.com/w/cpp/language/static_cast\" rel=\"nofollow noreferrer\"><code>static_cast</code></a> <a href=\"http://ideone.com/hu9l49\" rel=\"nofollow noreferrer\">will not perform that conversion</a> (without <a href=\"http://ideone.com/7LUMpo\" rel=\"nofollow noreferrer\">going via <code>void*</code></a>)."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 4802, "user_id": 3852968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e803f34d50b5355d8cf39bdb4ce2932?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/3852968/andrew"}, "edited": false, "score": 0, "creation_date": 1463612039, "post_id": 37311115, "comment_id": 62143606, "body": "@Andrew I admit I&#39;m not up to speed on all the C++ cast operators; what&#39;s the right one for this?"}, {"owner": {"reputation": 4802, "user_id": 3852968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e803f34d50b5355d8cf39bdb4ce2932?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/3852968/andrew"}, "edited": false, "score": 0, "creation_date": 1463612217, "post_id": 37311115, "comment_id": 62143656, "body": "<code>reinterpret_cast</code> is the only one that&#39;ll cast between unrelated types. Or <code>static_cast&lt;float*&gt;(static_cast&lt;void*&gt;(&amp;pv1));</code> which goes via <code>void*</code>. Both are technically UB but if you know the memory layout is identical you should be able to get away with it."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 3, "last_activity_date": 1463612269, "last_edit_date": 1463612269, "creation_date": 1463610492, "answer_id": 37311115, "question_id": 37311006, "link": "https://stackoverflow.com/questions/37311006/iterate-through-struct-by-variable-name/37311115#37311115", "title": "Iterate through struct by variable name", "body": "<p>You can use type punning to treat the structure as an array.</p>\n\n<pre><code>float array[1024] = { ... };\npseudovector pv1;\nfloat *f = static_cast&lt;float*&gt;(static_cast&lt;void*&gt;(&amp;pv1));\nfor (int i = 0; i &lt; 1024; i++) {\n    f[i] = array[i];\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "is_accepted": false, "score": 2, "last_activity_date": 1463612192, "creation_date": 1463612192, "answer_id": 37311386, "question_id": 37311006, "link": "https://stackoverflow.com/questions/37311006/iterate-through-struct-by-variable-name/37311386#37311386", "title": "Iterate through struct by variable name", "body": "<p>You can use preprocessor metaprogramming to create your array.  You could do something like:</p>\n\n<pre><code>#define ACCESSOR(z, n, type) &amp;type::data ## n\n\nauto arr[] = {\n    BOOST_PP_ENUM(1000, ACCESSOR, pseudovector)\n};\n</code></pre>\n\n<p>Will need to adjust ACCESSOR most likely.  It might not be legal to use <code>auto</code> here either.</p>\n\n<p>Then you do:</p>\n\n<pre><code>auto val = (pv1.*arr)[4];\n</code></pre>\n\n<p>etc...</p>\n\n<p>No UB needed.</p>\n"}, {"comments": [{"owner": {"reputation": 3966, "user_id": 2132213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a31de75b6e3603efbc437ab3475a757d?s=128&d=identicon&r=PG", "display_name": "Nick Matteo", "link": "https://stackoverflow.com/users/2132213/nick-matteo"}, "reply_to_user": {"reputation": 4802, "user_id": 3852968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e803f34d50b5355d8cf39bdb4ce2932?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/3852968/andrew"}, "edited": false, "score": 0, "creation_date": 1463665684, "post_id": 37312083, "comment_id": 62169613, "body": "@Andrew: done. FWIW, at the time I was thinking in terms of demonstrating that Hana does what&#39;s desired, by quoting the docs"}], "tags": [], "owner": {"reputation": 3966, "user_id": 2132213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a31de75b6e3603efbc437ab3475a757d?s=128&d=identicon&r=PG", "display_name": "Nick Matteo", "link": "https://stackoverflow.com/users/2132213/nick-matteo"}, "is_accepted": false, "score": 2, "last_activity_date": 1463665625, "last_edit_date": 1463665625, "creation_date": 1463617586, "answer_id": 37312083, "question_id": 37311006, "link": "https://stackoverflow.com/questions/37311006/iterate-through-struct-by-variable-name/37312083#37312083", "title": "Iterate through struct by variable name", "body": "<p>Use <a href=\"http://www.boost.org/libs/hana/\" rel=\"nofollow\">Boost.Hana</a>, if you can compile with recent versions of Clang or GCC (afaik, the only compilers supported.)</p>\n\n<p>Allow me to quote the section <a href=\"http://www.boost.org/doc/libs/1_61_0/libs/hana/doc/html/index.html#tutorial-introspection\" rel=\"nofollow\">Introspection</a> from the tutorial:</p>\n\n<blockquote>\n  <p>Static introspection, as we will discuss it here, is the ability of a\n  program to examine the type of an object at compile-time. In other\n  words, it is a programmatic interface to interact with types at\n  compile-time. For example, have you ever wanted to check whether some\n  unknown type has a member named foo? Or perhaps at some point you have\n  needed to iterate on the members of a struct?</p>\n</blockquote>\n\n<p>For <a href=\"http://www.boost.org/doc/libs/1_61_0/libs/hana/doc/html/index.html#tutorial-introspection-adapting\" rel=\"nofollow\">introspecting user-defined types</a> you do have to define the struct with Hana, but this is not much different than defining a struct otherwise:</p>\n\n<pre><code>struct pseudovector {\n   BOOST_HANA_DEFINE_STRUCT(pseudovector,\n    (float, data1),\n    (float, data2),\n    \u2026\n  );\n};\n</code></pre>\n\n<p>And you should easily be able to modify whatever macros you have to generate your current struct, to generate this one instead.</p>\n\n<p>This adds a nested struct to <code>pseudovector</code>, which consists only of a static member function. It does not affect POD-ness, size, or data layout.</p>\n\n<p>Then you can iterate through it as in this example:</p>\n\n<pre><code>pseudovector pv;\n\nhana::for_each(pv, [](auto pair) {\n  std::cout &lt;&lt; hana::to&lt;char const*&gt;(hana::first(pair)) &lt;&lt; \": \"\n            &lt;&lt; hana::second(pair) &lt;&lt; std::endl;\n});\n</code></pre>\n\n<p>Here, <code>pair</code>'s members are a hana compile-time string (the member name) and the value. If you'd rather have your lambda take two arguments (the name and the value), use <code>hana::fuse</code>:</p>\n\n<pre><code>hana::for_each(pv, hana::fuse([](auto name, auto member) {\n  std::cout &lt;&lt; hana::to&lt;char const*&gt;(name) &lt;&lt; \": \" &lt;&lt; member &lt;&lt; std::endl;\n}));\n</code></pre>\n"}], "owner": {"reputation": 3127, "user_id": 2066079, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Jm7vU.png?s=128&g=1", "display_name": "dberm22", "link": "https://stackoverflow.com/users/2066079/dberm22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2292, "favorite_count": 0, "accepted_answer_id": 37311109, "answer_count": 4, "score": 6, "last_activity_date": 1479226678, "creation_date": 1463609862, "last_edit_date": 1495542284, "question_id": 37311006, "link": "https://stackoverflow.com/questions/37311006/iterate-through-struct-by-variable-name", "title": "Iterate through struct by variable name", "body": "<p>UPDATE: 6 months later, and I just came across this answer: <a href=\"https://stackoverflow.com/a/40590471/2066079\">Is it legal to index into a struct?: Answer by Slava</a> . I think this is a MUCH better solution than any of the ones provided here, as there is absolutely no undefined behavior. Hopefully this helps the next person, since it is already too late for me to implement.</p>\n\n<hr>\n\n<p><strong>Before you comment telling me to use an array or vector, or any form of container instead, it is a hard truth that I cannot. I know, this would be solved with an array, and any solution otherwise is pretty \"hacky\". I would love to use a container, but I absolutely cannot.</strong></p>\n\n<p>I am a mid-level developer at a very large corporation, and we are using a company-wide library for sending data over ethernet. There are various reasons for why it cannot support arrays/vectors, and instead, uses structs of POD (Plain Old Data - chars, floats, ints, bools). I start with an array of floats that I must use to fill a struct with the same number of floats. Since the purpose of this library is to send messages over ethernet, I only need to do the iteration twice - once on the send and one on the receive. All other times, this data is stored as an array. I know - I should be serializing the arrays and sending them as is, but I repeat - I absolutely cannot. </p>\n\n<p>I have a <code>float[1024]</code>, and must iterate through the array and fill the following struct:</p>\n\n<pre><code>struct pseudovector\n{\n    float data1;\n    float data2;\n    float data3;\n    ...\n    float data1024;\n}\n</code></pre>\n\n<p>I am already generating this struct with <a href=\"https://stackoverflow.com/questions/18441431/boost-pp-repeat-with-array\">BOOST_PP_REPEAT</a> and <a href=\"https://stackoverflow.com/questions/18483572/how-can-i-use-a-macro-for-collecting-variable-names/18483867#18483867\">BOOST_PP_SEQ_FOR_EACH_I</a> so that I do not have to write out all 1024 floats, and it increases maintainability/extensibility.</p>\n\n<p>In the same fashion, I have tried iterating through the struct via pre-compiler <code>##</code> concatination (<a href=\"https://stackoverflow.com/a/29020943/2066079\">https://stackoverflow.com/a/29020943/2066079</a>), but as this is done at pre-compiler time, it cannot be used for run-time getting/setting.</p>\n\n<p>I have looked at implementing reflection such as <a href=\"https://stackoverflow.com/questions/41453/how-can-i-add-reflection-to-a-c-application\">How can I add reflection to a C++ application?</a> and <a href=\"https://github.com/billyquith/ponder\" rel=\"nofollow noreferrer\">Ponder Library</a>, but both approaches requires you to explicitly write out each item that can be reflected upon. In that case, I might as well just create a <code>std::map&lt;string, float&gt;</code> and iterate in a for loop via string/integer concatenation: </p>\n\n<pre><code>for(i=0;i&lt;1024;i++)\n{\n    array[i] = map.get(std::string(\"data\")+(i+1))\n}\n</code></pre>\n\n<p>Can anyone recommend a cleaner solution that does not require me to write out in excess of 1024 lines of code? Your help is appreciated!</p>\n\n<p><strong>Again, I repeat - I absolutely cannot use an array/vector of any sort.</strong></p>\n"}, {"tags": ["c++", "c++11", "gcc", "clang", "language-lawyer"], "answers": [{"comments": [{"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1463636316, "post_id": 37311097, "comment_id": 62149672, "body": "@Barry Thank you, I was to open a bug for clang yesterday, but I&#39;ve not been able to find/understand the right section of the reference. Still to learn <i>how</i> to read it correctly... :-("}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1463636395, "post_id": 37311097, "comment_id": 62149700, "body": "@T.C. So, you are saying that&#39;s actually a <i>bug of the language</i>? :-)"}, {"owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "reply_to_user": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 1, "creation_date": 1463642061, "post_id": 37311097, "comment_id": 62152484, "body": "@skypjack : Was. Both of those DRs&#39; solutions were incorporated into C++11."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 0, "creation_date": 1474998288, "post_id": 37311097, "comment_id": 66759856, "body": "@ildjarn Right, <i>was</i>. Wrong term. Thanks."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 15, "last_activity_date": 1463611715, "last_edit_date": 1463611715, "creation_date": 1463610385, "answer_id": 37311097, "question_id": 37310866, "link": "https://stackoverflow.com/questions/37310866/operator-cast-gcc-and-clang-which-compiler-is-right/37311097#37311097", "title": "Operator cast, GCC and clang: which compiler is right?", "body": "<p>I believe this is clang bug (submitted as <a href=\"https://llvm.org/bugs/show_bug.cgi?id=27807\">#27807</a>)</p>\n\n<p>From <a href=\"http://eel.is/c++draft/basic.lookup.classref#7\">[basic.lookup.classref]</a>:</p>\n\n<blockquote>\n  <p>If the <em>id-expression</em> is a <em>conversion-function-id</em>, its <em>conversion-type-id</em> is first looked up in the class of the\n  object expression and the name, if found, is used. Otherwise it is looked up in the context of the entire\n  <em>postfix-expression</em>. In each of these lookups, only names that denote types or templates whose specializations\n  are types are considered. <em>[ Example:</em></p>\n\n<pre><code>struct A { };\nnamespace N {\n    struct A {\n        void g() { }\n        template &lt;class T&gt; operator T();\n    };\n}\n\nint main() {\n    N::A a;\n    a.operator A(); // calls N::A::operator N::A\n}\n</code></pre>\n  \n  <p><em>\u2014end example ]</em></p>\n</blockquote>\n\n<p>In <code>t = s.operator T();</code>, <code>T</code> is first looked up in the class of <code>S</code>, which should find your typedef and hence end up calling <code>operator int()</code>. </p>\n"}], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 322, "favorite_count": 0, "accepted_answer_id": 37311097, "answer_count": 1, "score": 15, "last_activity_date": 1463615123, "creation_date": 1463609134, "last_edit_date": 1463615123, "question_id": 37310866, "link": "https://stackoverflow.com/questions/37310866/operator-cast-gcc-and-clang-which-compiler-is-right", "title": "Operator cast, GCC and clang: which compiler is right?", "body": "<p>Consider the following code:</p>\n\n<pre><code>struct S {\n    using T = int;\n    operator T() { return 42; }\n};\n\nint main() {\n    S s;\n    S::T t = s;\n    // Is the following line correct?\n    t = s.operator T();\n}\n</code></pre>\n\n<p>It compiles with GCC (4.9/5.1/6.1), but it fails to compile with clang (3.8/3.7).<br>\nThe error returned is:</p>\n\n<blockquote>\n  <p>error: unknown type name 'T'; did you mean 'S::T'?</p>\n</blockquote>\n\n<p>Which compiler is right in this case and why?</p>\n\n<p><strong>Note</strong></p>\n\n<p>Solving it is a matter of qualifying <code>T</code>:</p>\n\n<pre><code>t = s.operator S::T();\n</code></pre>\n\n<p>The question is not about how to make it work.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 1449, "user_id": 5361456, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4b6a9a3c7b529ca94380acfeac705aee?s=128&d=identicon&r=PG&f=1", "display_name": "Archie Gertsman", "link": "https://stackoverflow.com/users/5361456/archie-gertsman"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1463609103, "post_id": 37310809, "comment_id": 62142696, "body": "It&#39;s a TMAPI, no pointer."}, {"owner": {"reputation": 1449, "user_id": 5361456, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4b6a9a3c7b529ca94380acfeac705aee?s=128&d=identicon&r=PG&f=1", "display_name": "Archie Gertsman", "link": "https://stackoverflow.com/users/5361456/archie-gertsman"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1463609192, "post_id": 37310809, "comment_id": 62142722, "body": "Ahh, you got me. I changed the parameter to <code>&amp;this-&gt;tmapi</code> and it works now. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 3, "last_activity_date": 1463609244, "creation_date": 1463609244, "answer_id": 37310891, "question_id": 37310809, "link": "https://stackoverflow.com/questions/37310809/passing-in-a-reference-of-a-member-of-this-into-a-parameter-of-stdthread/37310891#37310891", "title": "Passing in a reference of a member of &#39;this&#39; into a parameter of std::thread", "body": "<p><code>nameChange</code> takes a <code>TMAPI *</code>. You are trying to pass it a <code>TMAPI</code>. Hence the super cryptic error:</p>\n\n<pre><code>error: no type named 'type' in 'class std::result_of&lt;void (*(TMAPI))(TMAPI*)&gt;\n</code></pre>\n\n<p>The <code>result_of</code> metafunction is used like <code>result_of&lt;F(Args...)&gt;</code>. In this case, that type indicates that you're trying to call a <code>void(*)(TMAPI*)</code> with a <code>TMAPI</code> - which is not a valid thing to do.</p>\n\n<p>So just pass a pointer like the function expects:</p>\n\n<pre><code>std::thread id(nameChange, &amp;this-&gt;tmapi);\n</code></pre>\n"}], "owner": {"reputation": 1449, "user_id": 5361456, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4b6a9a3c7b529ca94380acfeac705aee?s=128&d=identicon&r=PG&f=1", "display_name": "Archie Gertsman", "link": "https://stackoverflow.com/users/5361456/archie-gertsman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 37310891, "answer_count": 1, "score": 0, "last_activity_date": 1463609244, "creation_date": 1463608832, "question_id": 37310809, "link": "https://stackoverflow.com/questions/37310809/passing-in-a-reference-of-a-member-of-this-into-a-parameter-of-stdthread", "title": "Passing in a reference of a member of &#39;this&#39; into a parameter of std::thread", "body": "<p>I need to write a function that isn't part of my class <code>MainWindow</code> (this is a Qt project) so that it can be used in a thread, but I also need it to use a member of <code>MainWindow</code> inside it. Here is the code I have written:</p>\n\n<pre><code>void nameChange(TMAPI *tmapi) {\n    tmapi-&gt;writeString(0x001bbbc2c, qPrintable(n));\n}\n\nvoid MainWindow::on_button_clicked() {\n    std::thread id(nameChange, this-&gt;tmapi);\n    id.join();\n}\n</code></pre>\n\n<p>I get two errors from this (they are the same error but point to different lines of code in the file <code>&lt;functional&gt;</code>): </p>\n\n<pre><code>error: no type named 'type' in 'class std::result_of&lt;void (*(TMAPI))(TMAPI*)&gt;\n</code></pre>\n\n<p>Calling <code>nameChange</code> like this seems to work:</p>\n\n<pre><code>TMAPI tmapi;\nstd::thread id(nameChange, &amp;tmapi);\n</code></pre>\n\n<p>How can I get the first way to work where I pass in the current object's (<code>this</code>'s) instance of tmapi? Thanks. </p>\n"}, {"tags": ["c++", "algorithm", "stl", "combinations", "permutation"], "comments": [{"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1463609226, "post_id": 37310678, "comment_id": 62142735, "body": "<a href=\"http://stackoverflow.com/questions/127704/algorithm-to-return-all-combinations-of-k-elements-from-n\" title=\"algorithm to return all combinations of k elements from n\">stackoverflow.com/questions/127704/&hellip;</a>"}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1463609254, "post_id": 37310678, "comment_id": 62142747, "body": "<a href=\"http://stackoverflow.com/questions/9430568/generating-combinations-in-c\" title=\"generating combinations in c\">stackoverflow.com/questions/9430568/&hellip;</a>"}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1463609293, "post_id": 37310678, "comment_id": 62142759, "body": "<a href=\"http://stackoverflow.com/questions/12991758/creating-all-possible-k-combinations-of-n-items-in-c\" title=\"creating all possible k combinations of n items in c\">stackoverflow.com/questions/12991758/&hellip;</a>"}, {"owner": {"reputation": 3966, "user_id": 2132213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a31de75b6e3603efbc437ab3475a757d?s=128&d=identicon&r=PG", "display_name": "Nick Matteo", "link": "https://stackoverflow.com/users/2132213/nick-matteo"}, "reply_to_user": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 2, "creation_date": 1463609723, "post_id": 37310678, "comment_id": 62142896, "body": "@AlanStokes: all those questions concern combinations; this question is about permutations."}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 3, "creation_date": 1463610049, "post_id": 37310678, "comment_id": 62143019, "body": "It&#39;s about permuting combinations. And the OP knows how to permute, which just leaves finding the combinations. Hence &quot;I&#39;m looking for an STL way of doing this [...] rather than writing my own combinations function&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1463610910, "post_id": 37311091, "comment_id": 62143308, "body": "Seems obvious now that you say it, +1."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 2, "last_activity_date": 1463615360, "last_edit_date": 1463615360, "creation_date": 1463610345, "answer_id": 37311091, "question_id": 37310678, "link": "https://stackoverflow.com/questions/37310678/c-stl-next-permutation-with-combination/37311091#37311091", "title": "C++ STL Next Permutation with Combination", "body": "<p>This is not the most efficient possible algorithm but it's easy. You must start with the elements sorted. To get the next k-permutation, reverse the last n-k elements and then try to get the next permutation. The first k elements are the next k-permutation.</p>\n"}, {"tags": [], "owner": {"reputation": 434, "user_id": 5495780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B5FPt.jpg?s=128&g=1", "display_name": "Mircea Baja", "link": "https://stackoverflow.com/users/5495780/mircea-baja"}, "is_accepted": false, "score": 3, "last_activity_date": 1463613998, "creation_date": 1463613998, "answer_id": 37311642, "question_id": 37310678, "link": "https://stackoverflow.com/questions/37310678/c-stl-next-permutation-with-combination/37311642#37311642", "title": "C++ STL Next Permutation with Combination", "body": "<p>There is currently (as of 2016) no single STD function to do that. The closest you have is the proposal from <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2639.pdf\" rel=\"nofollow\">http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2639.pdf</a></p>\n\n<p>The function you want is called <code>next_partial_permutation</code> and looks like (from N2639):</p>\n\n<pre><code>template  &lt;class  BidirectionalIterator &gt;\nbool next_partial_permutation(\n  BidirectionalIterator  first ,\n  BidirectionalIterator  middle ,\n  BidirectionalIterator  last)\n{\n  std::reverse(middle , last);\n  return std::next_permutation(first , last);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13136, "user_id": 4081336, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XXiEG.jpg?s=128&g=1", "display_name": "Leandro Caniglia", "link": "https://stackoverflow.com/users/4081336/leandro-caniglia"}, "is_accepted": false, "score": 1, "last_activity_date": 1463707717, "last_edit_date": 1463707717, "creation_date": 1463707133, "answer_id": 37336479, "question_id": 37310678, "link": "https://stackoverflow.com/questions/37310678/c-stl-next-permutation-with-combination/37336479#37336479", "title": "C++ STL Next Permutation with Combination", "body": "<p>Here is an algorithm written in Smalltalk.</p>\n\n<p>The idea of the algorithm is to consider the lexicographic order of arrays of length <code>m</code> with elements between <code>1</code> and <code>n</code>. Given any such <code>array</code>, the method <code>next</code> replaces <code>array</code> with its next partial permutation in said order.</p>\n\n<p>I've created a class with three instance variables</p>\n\n<pre><code>array       the current permutation of length m\nm           the size of array\ncomplement  the SortedCollection of integers not in array\n</code></pre>\n\n<p>The instance creation method <code>m:n:</code> works as follows</p>\n\n<pre><code>m: length n: limit\n  m := length.\n  array := (1 to: m) asArray.\n  complement := (m + 1 to: limit) asSortedCollection\n</code></pre>\n\n<p>In this class the method <code>next</code> modifies the <code>array</code> so that it will now hold the next permutation.</p>\n\n<p>It might be worth mentioning that the algorithm is not recursive.</p>\n\n<p>The method <code>next</code> answers with <code>nil</code> iff <code>array</code> contains the last permutation in the order (i.e., <code>array = (n, n-1, ...., n-m+1)</code>.</p>\n\n<p>To compute all permutations start with <code>array = (1 ... m)</code> and send <code>next</code> until the answer is <code>nil</code>.</p>\n\n<pre><code>next\n  | index max h a c |\n  index := self lastDecreasingIndex.\n  max := complement max.\n  h := (index to: m) findLast: [:i | (array at: i) &lt; max] ifAbsent: nil.\n  h isNil\n    ifTrue: [\n      index = 1 ifTrue: [^nil].\n      a := array at: index - 1.\n      index to: m do: [:i | complement add: (array at: i)].\n      c := complement detect: [:cj | a &lt; cj].\n      array at: index - 1 put: c.\n      complement remove: c; add: a.\n      index to: m do: [:i | array at: i put: complement removeFirst]]\n    ifFalse: [\n      h := h + index - 1.\n      a := array at: h.\n      c := complement detect: [:ci | a &lt; ci].\n      array at: h put: c.\n      complement remove: c; add: a.\n      h + 1 to: m do: [:i | complement add: (array at: i)].\n      h + 1 to: m do: [:i | array at: i put: complement removeFirst]]\n</code></pre>\n\n<p>Where</p>\n\n<pre><code>lastDecreasingIndex\n  | index |\n  index := m.\n  [(array at: index - 1) &gt; (array at: index)] whileTrue: [\n    index := index - 1.\n    index = 1 ifTrue: [^1]].\n  ^index\n</code></pre>\n"}], "owner": {"reputation": 2202, "user_id": 3357481, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100006348219116/picture?type=large", "display_name": "Mutating Algorithm", "link": "https://stackoverflow.com/users/3357481/mutating-algorithm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1748, "favorite_count": 2, "answer_count": 3, "score": 8, "last_activity_date": 1463707717, "creation_date": 1463608206, "question_id": 37310678, "link": "https://stackoverflow.com/questions/37310678/c-stl-next-permutation-with-combination", "title": "C++ STL Next Permutation with Combination", "body": "<p>I know that I can use <code>std::next_permutation</code> on some container containing the elements <code>[1, 2, 3]</code> which would generate 6 permutations of this sequence. What I would like to do is given some set <code>[1, 2, 3, 4, 5, 6]</code> generate all possible permutations of size 3. So for this example, <code>[4, 3, 2]</code> would be one of the permutations resulting from this criteria. I'm looking for an STL way of doing this (if possible) rather than writing my own combinations function. Any particular STL implementation I should be reading about ?</p>\n"}, {"tags": ["c++", "qt", "cmake", "vtk", "qvtkwidget"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1463610867, "post_id": 37310601, "comment_id": 62143295, "body": "<b><i>I&#39;m using qt 5.6 and vtk 5.8.</i></b> These are incompatible. vtk-5.X does not support any version of <code>Qt5</code>. You must use <code>Qt4</code>."}, {"owner": {"reputation": 36, "user_id": 1311363, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/59f12d9105fc61805d06b374791ad43a?s=128&d=identicon&r=PG", "display_name": "Pendar", "link": "https://stackoverflow.com/users/1311363/pendar"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1463611166, "post_id": 37310601, "comment_id": 62143373, "body": "Can I just compile vtk5.8 with qt4 but then use the qvtkwidget in my qt5.6 project?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1463613410, "post_id": 37310601, "comment_id": 62143989, "body": "Then you can&#39;t use the Qt support in vtk. If you can use vtk-7."}], "owner": {"reputation": 36, "user_id": 1311363, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/59f12d9105fc61805d06b374791ad43a?s=128&d=identicon&r=PG", "display_name": "Pendar", "link": "https://stackoverflow.com/users/1311363/pendar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 573, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1463607896, "creation_date": 1463607896, "question_id": 37310601, "link": "https://stackoverflow.com/questions/37310601/cmake-cant-find-qt-when-building-vtk", "title": "Cmake can&#39;t find qt when building vtk", "body": "<p>I am getting the following error while trying to build vtk with qt support:</p>\n\n<pre><code> CMake Error at CMakeLists.txt:370 (MESSAGE):\n   Qt 4.5.0 or greater not found.  Please check the QT_QMAKE_EXECUTABLE\n   variable.\n</code></pre>\n\n<p>this is how I am running cmake:</p>\n\n<pre><code>mkdir vtk-build &amp;&amp; cd vtk-build\ncmake -DVTK_QT_VERSION:STRING=5 \\\n      -DQT_QMAKE_EXECUTABLE:PATH=/home/pendar/Qt/5.6/gcc_64/bin/qmake \\\n      -DVTK_Group_Qt:BOOL=ON \\\n      -DCMAKE_PREFIX_PATH:PATH=/home/pendar/Qt/5.6/gcc_64/lib/cmake  \\\n      -DBUILD_SHARED_LIBS:BOOL=ON \\\n      ../VTK\n</code></pre>\n\n<p>I also tried setting these settings to on:</p>\n\n<pre><code>  VTK_USE_QT:BOOL=ON \\\n  VTK_USE_GUISUPPORT:BOOL=ON \\\n  BUILD_SHARED_LIBS:BOOL=ON \\\n  VTK_USE_RENDERING:BOOL=ON \\\n</code></pre>\n\n<p>which didn't work.</p>\n\n<p>I'm using qt 5.6 and vtk 5.8.</p>\n"}, {"tags": ["c++", "visual-studio-2012", "libraries"], "answers": [{"comments": [{"owner": {"reputation": 353, "user_id": 1384636, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/81277ca5462a19c3bd8a32778a3d42f0?s=128&d=identicon&r=PG", "display_name": "user1384636", "link": "https://stackoverflow.com/users/1384636/user1384636"}, "edited": false, "score": 0, "creation_date": 1463634916, "post_id": 37313004, "comment_id": 62149182, "body": "I add them as reference: right click on the project &gt; Reference... &gt; ADD &gt; project. Shouldn&#39;t this be enough?"}, {"owner": {"reputation": 133, "user_id": 6353786, "user_type": "registered", "profile_image": "https://graph.facebook.com/706390866130735/picture?type=large", "display_name": "Clay Brooks", "link": "https://stackoverflow.com/users/6353786/clay-brooks"}, "reply_to_user": {"reputation": 353, "user_id": 1384636, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/81277ca5462a19c3bd8a32778a3d42f0?s=128&d=identicon&r=PG", "display_name": "user1384636", "link": "https://stackoverflow.com/users/1384636/user1384636"}, "edited": false, "score": 0, "creation_date": 1463657813, "post_id": 37313004, "comment_id": 62163382, "body": "It should.  But it will not set the building order."}, {"owner": {"reputation": 133, "user_id": 6353786, "user_type": "registered", "profile_image": "https://graph.facebook.com/706390866130735/picture?type=large", "display_name": "Clay Brooks", "link": "https://stackoverflow.com/users/6353786/clay-brooks"}, "reply_to_user": {"reputation": 353, "user_id": 1384636, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/81277ca5462a19c3bd8a32778a3d42f0?s=128&d=identicon&r=PG", "display_name": "user1384636", "link": "https://stackoverflow.com/users/1384636/user1384636"}, "edited": false, "score": 0, "creation_date": 1463660731, "post_id": 37313004, "comment_id": 62165536, "body": "Now that I&#39;ve had a chance to look at my vs solution, I don&#39;t see Reference in the right click menu.  You can easily check the project dependencies by going to the Common Properties section of the solution, right click solution-&gt;Properties.  Here you can set what projects depend on what, this is totally separate from designating what projects link to what libraries."}, {"owner": {"reputation": 353, "user_id": 1384636, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/81277ca5462a19c3bd8a32778a3d42f0?s=128&d=identicon&r=PG", "display_name": "user1384636", "link": "https://stackoverflow.com/users/1384636/user1384636"}, "edited": false, "score": 0, "creation_date": 1463672907, "post_id": 37313004, "comment_id": 62175491, "body": "yes, that&#39;s what I meant: even by setting the project dependencies they dont see each other classes nor libraries. It&#39;s like this &quot;dependency&quot; option is just for decoration."}, {"owner": {"reputation": 133, "user_id": 6353786, "user_type": "registered", "profile_image": "https://graph.facebook.com/706390866130735/picture?type=large", "display_name": "Clay Brooks", "link": "https://stackoverflow.com/users/6353786/clay-brooks"}, "reply_to_user": {"reputation": 353, "user_id": 1384636, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/81277ca5462a19c3bd8a32778a3d42f0?s=128&d=identicon&r=PG", "display_name": "user1384636", "link": "https://stackoverflow.com/users/1384636/user1384636"}, "edited": false, "score": 0, "creation_date": 1463673667, "post_id": 37313004, "comment_id": 62176054, "body": "I&#39;m not sure what the References thing does, I&#39;ve never used or seen that before."}, {"owner": {"reputation": 353, "user_id": 1384636, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/81277ca5462a19c3bd8a32778a3d42f0?s=128&d=identicon&r=PG", "display_name": "user1384636", "link": "https://stackoverflow.com/users/1384636/user1384636"}, "edited": false, "score": 0, "creation_date": 1463674294, "post_id": 37313004, "comment_id": 62176454, "body": "I used for to include .dll"}, {"owner": {"reputation": 133, "user_id": 6353786, "user_type": "registered", "profile_image": "https://graph.facebook.com/706390866130735/picture?type=large", "display_name": "Clay Brooks", "link": "https://stackoverflow.com/users/6353786/clay-brooks"}, "reply_to_user": {"reputation": 353, "user_id": 1384636, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/81277ca5462a19c3bd8a32778a3d42f0?s=128&d=identicon&r=PG", "display_name": "user1384636", "link": "https://stackoverflow.com/users/1384636/user1384636"}, "edited": false, "score": 0, "creation_date": 1463674353, "post_id": 37313004, "comment_id": 62176483, "body": "Gotcha.  Any sort of include of header files/libraries does not set the build order.  Has to be done the way I described."}], "tags": [], "owner": {"reputation": 133, "user_id": 6353786, "user_type": "registered", "profile_image": "https://graph.facebook.com/706390866130735/picture?type=large", "display_name": "Clay Brooks", "link": "https://stackoverflow.com/users/6353786/clay-brooks"}, "is_accepted": false, "score": 0, "last_activity_date": 1463625101, "creation_date": 1463625101, "answer_id": 37313004, "question_id": 37310578, "link": "https://stackoverflow.com/questions/37310578/visual-studio-link-projects-together-and-test/37313004#37313004", "title": "Visual Studio, link projects together and test", "body": "<p>Based off of the few errors you gave us, it sounds like AlgorithmFacade needs to have Algorithm.lib in its linker->Input section.  AlgorithmTest needs to have Algorithm.lib in its linker->Input section as well, and possibly AlgorithmFacade.lib.  I'm still not sure what projects use what.  </p>\n\n<p>What else you may be running in to is a build order issue.  If you right click on your solution name in the solution explorer and drop down to properties, you'll see a project dependency section.  AlgorithmFacade depends on Algorithm.  AlgorithmTest also depends on Algorithm.</p>\n\n<p>Also, make sure any changes you make are applied to both the release and debug versions of your build, or any other builds you may have.  This can be the cause of massive headaches.  </p>\n"}], "owner": {"reputation": 353, "user_id": 1384636, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/81277ca5462a19c3bd8a32778a3d42f0?s=128&d=identicon&r=PG", "display_name": "user1384636", "link": "https://stackoverflow.com/users/1384636/user1384636"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463625101, "creation_date": 1463607770, "question_id": 37310578, "link": "https://stackoverflow.com/questions/37310578/visual-studio-link-projects-together-and-test", "title": "Visual Studio, link projects together and test", "body": "<p>I'm seriously losing my mind. I've been developing in Linux for the past five years, so I'm kinda new to the visual studio / microsoft world. </p>\n\n<p>Here is the problem: I have</p>\n\n<ul>\n<li>a project consisting of four classes, linked to the ITK library, to implements some functionalities such as IO, data transform and so on. This will compile in a static library or .lib (let's call it <strong>Algorithm</strong>);</li>\n<li>a project that defines public high-level function calls, which is based on the static library above (let's call it <strong>AlgorithmFacade</strong>)</li>\n<li>a UnitTest project to test the classes of Alogirthm (let's call it <strong>AlgorithmTest</strong>)</li>\n</ul>\n\n<p>Now, this is what I do</p>\n\n<ul>\n<li>I create a solution to contain them all</li>\n<li>I link the ITK libraries in Algorithm (i.e. fill up the fields: Include, Additional Dependencies and Additional Library Dependency) </li>\n<li>#include the classes header I want to use in the AlgorithmFacade project</li>\n<li>link the ITK libraries in AlgorithmFacade in the same manner as I did for Algorithm, otherwise it complains that it cannot find \"itkImage\" and stuff like that</li>\n<li>Do the exact same thing for the AlorithmTest</li>\n<li>Run the test</li>\n<li>Get 970 warnings of all possibile kinds</li>\n<li>Follow the urban legend that warnings can be ignored</li>\n<li>Get an error like \"I dont find the code for Algorithm.lib\"</li>\n<li>Despair. </li>\n</ul>\n\n<p>I kinda have the feeling that I'm over'engineering it. But if I try to write unit tests, facade and implementation all in one project VS complains.  </p>\n\n<ul>\n<li>Is there a better solution? </li>\n<li>do I have to include every time all the libraries from scratch? </li>\n<li>Cant I just do a project that includes these libraries and unit tests and subprojects that <em>automatically</em> inherit those libraries? </li>\n</ul>\n\n<p>PS I'm using native C++ and not the CLR. </p>\n\n<p>PPS I'm using Visual Studio 2012</p>\n"}, {"tags": ["c++", "opengl", "geometry-shader"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1463606814, "post_id": 37310355, "comment_id": 62141776, "body": "Definitely looks like depth buffer clipping."}, {"owner": {"reputation": 151, "user_id": 2557276, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/eb272702a465a7355d30b1b0dfeaff1f?s=128&d=identicon&r=PG", "display_name": "Illia", "link": "https://stackoverflow.com/users/2557276/illia"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1463606900, "post_id": 37310355, "comment_id": 62141808, "body": "I am new to the OpenGL. How would you suggest to fix it?"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1463607252, "post_id": 37310355, "comment_id": 62141974, "body": "@Illia You probably need to add a Projection Matrix in the Vertex Shader, as it looks like you&#39;re lacking one right now."}, {"owner": {"reputation": 151, "user_id": 2557276, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/eb272702a465a7355d30b1b0dfeaff1f?s=128&d=identicon&r=PG", "display_name": "Illia", "link": "https://stackoverflow.com/users/2557276/illia"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1463607614, "post_id": 37310355, "comment_id": 62142114, "body": "@Xirema Thank you for you comment but I do have proj matrix in my Vertex shader. I just added the code my vertex shader. Or do you mean something different?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1463609347, "post_id": 37310355, "comment_id": 62142778, "body": "@Illia: Why are you outputting <i>matrices</i> from your vertex shader? Why not just make them <i>uniforms</i> that the GS can access?"}], "answers": [{"tags": [], "owner": {"reputation": 151, "user_id": 2557276, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/eb272702a465a7355d30b1b0dfeaff1f?s=128&d=identicon&r=PG", "display_name": "Illia", "link": "https://stackoverflow.com/users/2557276/illia"}, "is_accepted": false, "score": 1, "last_activity_date": 1463612017, "creation_date": 1463612017, "answer_id": 37311356, "question_id": 37310355, "link": "https://stackoverflow.com/questions/37310355/geometry-shader-calculated-lines-disappear-on-camera-move/37311356#37311356", "title": "Geometry shader calculated lines disappear on camera move", "body": "<p>If anyone else runs into this issue the solution is the following:</p>\n\n<pre><code>glm::perspective(45.0f, m_aspectRatio, m_zNear, m_zFar);\n</code></pre>\n\n<p>I originally had my m_zNear equal to 0.1 but when switched it to 1.0, the lines stopped disappearing. I am not completely sure why is that. If any one knows please share it.</p>\n"}, {"tags": [], "owner": {"reputation": 832, "user_id": 1659229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TLOTm.jpg?s=128&g=1", "display_name": "Nox", "link": "https://stackoverflow.com/users/1659229/nox"}, "is_accepted": false, "score": 1, "last_activity_date": 1463622459, "creation_date": 1463622459, "answer_id": 37312658, "question_id": 37310355, "link": "https://stackoverflow.com/questions/37310355/geometry-shader-calculated-lines-disappear-on-camera-move/37312658#37312658", "title": "Geometry shader calculated lines disappear on camera move", "body": "<p>Have you try to google zFar zNear? <a href=\"http://bfy.tw/5puO\" rel=\"nofollow\">Here you go</a>.</p>\n\n<p>Or at least trying to google that miraculous helping glm::perspective(...) function?</p>\n"}, {"tags": [], "owner": {"reputation": 1796, "user_id": 2377013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68ec2205c71a8c8c6d5ede9dcf277f8d?s=128&d=identicon&r=PG&f=1", "display_name": "jparimaa", "link": "https://stackoverflow.com/users/2377013/jparimaa"}, "is_accepted": true, "score": 1, "last_activity_date": 1491495403, "last_edit_date": 1495540459, "creation_date": 1491495403, "answer_id": 43260581, "question_id": 37310355, "link": "https://stackoverflow.com/questions/37310355/geometry-shader-calculated-lines-disappear-on-camera-move/43260581#43260581", "title": "Geometry shader calculated lines disappear on camera move", "body": "<p>Referring to the answer by Illia May 18 '16 at 22:53</p>\n\n<blockquote>\n  <p>I originally had my m_zNear equal to 0.1 but when switched it to 1.0, the lines stopped disappearing. I am not completely sure why is that. If any one knows please share it</p>\n</blockquote>\n\n<p>The disappearing line is about depth buffer clipping. The vertex is <a href=\"http://www.songho.ca/opengl/gl_projectionmatrix.html\" rel=\"nofollow noreferrer\">projected</a> (multiplied with MV<strong>P</strong>-matrix) and then the vertex position is changed AFTER the projection in geometry shader (GS). These changes in GS causes the z-value to fall outside <a href=\"https://stackoverflow.com/questions/17269686/why-do-we-need-perspective-division\">normalized device coordinates</a> (NDC) in perspective division. With a larger <code>zNear</code> value the projected z-value is smaller so it does not fall outside NDC. Though if the value of <code>MAGNITUDE</code> in GS was large enough the lines would be clipped anyway even with a larger <code>zNear</code>. One option to fix this is to do projection in GS.</p>\n"}], "owner": {"reputation": 151, "user_id": 2557276, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/eb272702a465a7355d30b1b0dfeaff1f?s=128&d=identicon&r=PG", "display_name": "Illia", "link": "https://stackoverflow.com/users/2557276/illia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 43260581, "answer_count": 3, "score": 0, "last_activity_date": 1491495403, "creation_date": 1463606725, "last_edit_date": 1463607543, "question_id": 37310355, "link": "https://stackoverflow.com/questions/37310355/geometry-shader-calculated-lines-disappear-on-camera-move", "title": "Geometry shader calculated lines disappear on camera move", "body": "<p>I draw vertex normals using geometry shader. Everything shows up as expected except that when I move the camera some lines partially disappear. First, I thought this was due to the frustrum size but I have other objects in the scene bigger than this one drawn just fine.</p>\n\n<p><a href=\"http://i.stack.imgur.com/EIret.png\" rel=\"nofollow\">Before movement</a></p>\n\n<p><a href=\"http://i.stack.imgur.com/JBI3r.png\" rel=\"nofollow\">After movement</a></p>\n\n<p>If anyone could give me any pointer how to get rid of this effect of line disappearing, I would really appreciate it.</p>\n\n<p><strong>Below is the code of my geometry shader</strong></p>\n\n<pre><code>#version 330 core\n\n\nlayout (triangles) in;\nlayout (line_strip, max_vertices = 6) out;\n\nin Data{\n    vec4 position;\n    vec4 t_position;\n    vec4 normal;\n    vec2 texCoord;\n    vec4 color;\n    mat4 mvp;\n    mat4 view;\n    mat4 mv;\n} received[];\n\n\nout Data{\n   vec4 color;\n   vec2 uv;\n   vec4 normal;\n   vec2 texCoord;\n   mat4 view;\n} gdata;\n\n\nconst float MAGNITUDE = 1.5f;\n\nvoid GenerateLine(int index) {\n    const vec4 green = vec4(0.0f, 1.0f, 0.0f, 1.0f);\n    const vec4 blue = vec4(0.0f, 0.0f, 1.0f, 1.0f);\n\n    gl_Position = received[index].t_position;\n    //gdata.color = received[index].color;\n    gdata.color = green;\n    EmitVertex();\n\n    gl_Position = received[index].t_position + received[index].normal * MAGNITUDE;\n    //gdata.color = received[index].color;\n    gdata.color = blue;\n    EmitVertex();\n\n    EndPrimitive();\n}\n\nvoid main() {\n    GenerateLine(0); // First vertex normal\n    GenerateLine(1); // Second vertex normal\n    GenerateLine(2); // Third vertex normal\n}\n</code></pre>\n\n<p><strong>Vertex Shader</strong></p>\n\n<pre><code>#version 330\n\n\nlayout(location = 0) in vec3 Position;\nlayout(location = 1) in vec2 TexCoord;\nlayout(location = 2) in vec3 Normal;\n\nout Data{\n    vec4 position;\n    vec4 t_position;\n    vec4 normal;\n    vec2 texCoord;\n    vec4 color;\n    mat4 mvp;\n    mat4 view;\n    mat4 mv;\n} vdata;\n\n//MVP\nuniform mat4 model;\nuniform mat4 projection;\nuniform mat4 view;\n\nvoid main() {\n    vdata.position = vec4(Position, 1.0f);\n    vdata.normal = view * model * vec4(Normal, 0.0);\n    vdata.texCoord = TexCoord;\n\n    vdata.view = view;\n\n    vec4 modelColor = vec4(0.8f, 0.8f, 0.8f, 1.0f);\n    vdata.color = modelColor;\n\n    vdata.mvp = projection * view * model;\n    vdata.mv = view * model;\n    vdata.t_position = vdata.mvp * vdata.position;\n\n    gl_Position = vdata.t_position;\n};\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 1, "creation_date": 1463606590, "post_id": 37310279, "comment_id": 62141674, "body": "It looks like you&#39;re trying to typedef a function."}, {"owner": {"reputation": 2664, "user_id": 1862101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e069875829ca4da3cd8895e468c64409?s=128&d=identicon&r=PG", "display_name": "brian beuning", "link": "https://stackoverflow.com/users/1862101/brian-beuning"}, "edited": false, "score": 1, "creation_date": 1463607055, "post_id": 37310279, "comment_id": 62141876, "body": "You can override (localize) typedef by moving them into the class.  But C++ requires virtual functions to have the same signature and the return type is part of the signature.  What is your real question?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1463607074, "post_id": 37310279, "comment_id": 62141883, "body": "How would you use this function given a pointer to BaseClass?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1463607092, "post_id": 37310279, "comment_id": 62141893, "body": "Calling <code>base-&gt;Func()</code> on a <code>BaseClass*</code> needs to give you a <code>BPtr</code>. A <code>DPtr</code> is not a <code>BPtr</code>. How do you expect this to work? Just make a <code>Func2()</code>?"}, {"owner": {"reputation": 129, "user_id": 578465, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f3388f247328aad3ee4ca25a1cfed4fe?s=128&d=identicon&r=PG&f=1", "display_name": "sdeveloper", "link": "https://stackoverflow.com/users/578465/sdeveloper"}, "edited": false, "score": 0, "creation_date": 1463607348, "post_id": 37310279, "comment_id": 62142015, "body": "It is a design question. Functionality wise the Func() does very similar thing in both base and derived class. In fact that is the reason to have an abstract base class because all it&#39;s derived classes are doing similar but subtly different things. I would like to avoid creating another function but will do that as last resort."}, {"owner": {"reputation": 21240, "user_id": 951423, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/UlSg8.png?s=128&g=1", "display_name": "Pixelchemist", "link": "https://stackoverflow.com/users/951423/pixelchemist"}, "edited": false, "score": 0, "creation_date": 1463608067, "post_id": 37310279, "comment_id": 62142277, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/8967303/override-a-member-function-with-different-return-type\">Override a member function with different return type</a>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1463608689, "post_id": 37310279, "comment_id": 62142537, "body": "&quot;does very similar thing&quot; Sorting an array of ints is very similar to sorting an array of doubles. Maybe you need a template."}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 578465, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f3388f247328aad3ee4ca25a1cfed4fe?s=128&d=identicon&r=PG&f=1", "display_name": "sdeveloper", "link": "https://stackoverflow.com/users/578465/sdeveloper"}, "edited": false, "score": 0, "creation_date": 1463607634, "post_id": 37310441, "comment_id": 62142123, "body": "S&lt;T, tuple&lt;T,T&gt;&gt; is an extension on S&lt;T,T&gt; as it treats the variable created with the second type as a pair. In future I may have need to treat variables of both first and second types as different data structures but the underlying algorithm in which they are used is very similar. To give more context to the question, you can think of S as a node in a tree which is encapsulating certain features of the tree in which it will be used. The features vary from tree to tree."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "reply_to_user": {"reputation": 129, "user_id": 578465, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f3388f247328aad3ee4ca25a1cfed4fe?s=128&d=identicon&r=PG&f=1", "display_name": "sdeveloper", "link": "https://stackoverflow.com/users/578465/sdeveloper"}, "edited": false, "score": 0, "creation_date": 1463608233, "post_id": 37310441, "comment_id": 62142353, "body": "My gut feeling says this approach is brittle but you could have a  valid approach nonetheless. Questions/suggestions: As far as types are concerned, isn&#39;t <code>S</code> a template like <code>tuple</code>? Now, what you can do is to use type traits to partially specialize <code>S</code> so that <code>S&lt;T1,T2&gt;</code> with <code>T2</code> being a tuple like <code>S&lt;T3,T4&gt;</code> itself then derives from <code>S&lt;T1,T3&gt;</code>. However, also consider using variadic templates and <code>S&lt;T1,T2,T3&gt;</code> as extension to <code>S&lt;T1,T2&gt;</code>. I&#39;d have to dive much deeper into your design and desires in order to give a definitive answer though. Happy hacking!"}, {"owner": {"reputation": 129, "user_id": 578465, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f3388f247328aad3ee4ca25a1cfed4fe?s=128&d=identicon&r=PG&f=1", "display_name": "sdeveloper", "link": "https://stackoverflow.com/users/578465/sdeveloper"}, "edited": false, "score": 0, "creation_date": 1463608411, "post_id": 37310441, "comment_id": 62142428, "body": "Yes, something like that might work. I&#39;ll look into variadic templates as you suggest."}], "tags": [], "owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "is_accepted": false, "score": 4, "last_activity_date": 1463607154, "creation_date": 1463607154, "answer_id": 37310441, "question_id": 37310279, "link": "https://stackoverflow.com/questions/37310279/overriding-typedefs-in-c/37310441#37310441", "title": "Overriding typedefs in C++", "body": "<p>Firstly, the smart pointers: They don't have a common baseclass (just as <code>vector&lt;baseclass&gt;</code> is not a baseclass of <code>vector&lt;derived&gt;</code>), so covariant return types won't work.</p>\n\n<p>Secondly, even if you replaced the smart pointers with raw pointers, different instantiations of a class template don't share a common base either (like vector and smart pointers), so you're out of luck.</p>\n\n<p>Note that different instantiations of class templates can actually derive from one another, so if <code>S&lt;double,double&gt;</code> was a baseclass for <code>S&lt;double,tuple&lt;double,double&gt;&gt;</code>, you could use covariant returns, but that seems like a wonky approach.</p>\n\n<p>In summary, I think you should describe why you think that an <code>S&lt;T,tuple&lt;T,T&gt;&gt;</code> could be treated like an <code>S&lt;T,T&gt;</code>, which seems the underlying assumption in your code.</p>\n"}, {"tags": [], "owner": {"reputation": 1139, "user_id": 6266602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0fa60ab2c1ac1b185db45679cabe8c9?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas B Preusser", "link": "https://stackoverflow.com/users/6266602/thomas-b-preusser"}, "is_accepted": false, "score": 2, "last_activity_date": 1463607201, "creation_date": 1463607201, "answer_id": 37310456, "question_id": 37310279, "link": "https://stackoverflow.com/questions/37310279/overriding-typedefs-in-c/37310456#37310456", "title": "Overriding typedefs in C++", "body": "<p>Whatever <code>DerivedClass::Func</code> returns must be a subtype of what <code>BaseClass::Func</code> returns. Otherwise, <code>DerivedClass</code> is obviously <strong>not</strong> a specialization of <code>BaseClass</code>.</p>\n\n<p>What makes you build this inheritance relationship in the first place? Without it, you could just make the return type of <code>Func</code> a template parameter.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1463608181, "last_edit_date": 1495540364, "creation_date": 1463607468, "answer_id": 37310515, "question_id": 37310279, "link": "https://stackoverflow.com/questions/37310279/overriding-typedefs-in-c/37310515#37310515", "title": "Overriding typedefs in C++", "body": "<p>First of all, I think you probably meant to make <code>Base::Func()</code> a <code>virtual</code> member function.</p>\n\n<pre><code>class BaseClass\n{\n  public:\n    virtual BPtr Func() = 0;\n // ^^^ Missing \n};\n</code></pre>\n\n<p>Re:</p>\n\n<blockquote>\n  <p>Ideally I would like to be able to return an override <code>typedef</code> in the derived class but can't do that in C++.</p>\n</blockquote>\n\n<p>You can override the <code>typedef</code> in the derived class but that does not necessarily make it a valid return type of the <code>virtual</code> member function.</p>\n\n<p>For instance, if I have:</p>\n\n<pre><code>struct Foo\n{\n   typedef int return_type;\n\n   virtual return_type func() = 0;\n};\n\nstruct Bar : Foo\n{\n   typedef double return_type;\n\n   virtual return_type func() override { return 1.0; }\n};\n</code></pre>\n\n<p>You should get a compiler error. Just because I use <code>return_type</code> in both the base class and the derived class does not make them suitable to be used as the return type of the <code>virtual</code> member function.</p>\n\n<p>The return type in an overridden implementation can be <a href=\"https://stackoverflow.com/questions/3516889/covariant-return-types\">covariant type</a>, not any old type. A <code>typedef</code> is just an alias. It's not a true type.</p>\n\n<p>Re:</p>\n\n<blockquote>\n  <p>How do I fix this dilemma?</p>\n</blockquote>\n\n<p>You'll have to rethink your return types. You cannot use <code>boost::shared_pointer&lt;S&lt;double, std::tuple&lt;double, double&gt;&gt;&gt;</code> for the return type in the derived class when the return type in the base class is <code>boost::shared_pointer&lt;S&lt;double, double&gt;&gt;</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 21240, "user_id": 951423, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/UlSg8.png?s=128&g=1", "display_name": "Pixelchemist", "link": "https://stackoverflow.com/users/951423/pixelchemist"}, "is_accepted": false, "score": 0, "last_activity_date": 1463829209, "last_edit_date": 1463829209, "creation_date": 1463608363, "answer_id": 37310713, "question_id": 37310279, "link": "https://stackoverflow.com/questions/37310279/overriding-typedefs-in-c/37310713#37310713", "title": "Overriding typedefs in C++", "body": "<p>An (abstract) base class with virtual functions is used to provide the interface for the derived classes. You cannot have the same function return different (more precisily non-covariant) things depending on the derived type because the user has a contract with the base class.</p>\n\n<p>If I have a </p>\n\n<pre><code>Base * p = /* get whatever derived instance here */;\n</code></pre>\n\n<p>it might very well be the case that I cannot even tell what actual derived type is hidden behind the pointer.</p>\n\n<p>Therefore, if <code>Func</code> is declared as </p>\n\n<pre><code>boost::shared_ptr&lt;S&lt;double, double&gt;&gt; Func();\n</code></pre>\n\n<p>I'd expect it to return <code>boost::shared_ptr&lt;S&lt;double, double&gt;&gt;</code> and not something that depends on the actual derived type.</p>\n\n<p>The reason is simple: If some derived type would be added that returns something that is incompatible with my code it would break my implementation with<strong>out</strong> the interface being changed at all.</p>\n\n<p>It would work however, if <code>S&lt;double, std::tuple&lt;double, double&gt;&gt;</code> would derive from <code>S&lt;double, double&gt;</code>.</p>\n\n<p>You cannot get around that restriction with typedefs because they are just alias names for the types they refer to. With a typedef like <code>using BPtr = boost::shared_ptr&lt;S&lt;double, double&gt;&gt;;</code>, this declaration:</p>\n\n<pre><code>BPtr foo();\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>boost::shared_ptr&lt;S&lt;double, double&gt;&gt; foo();\n</code></pre>\n\n<p>it is just less typing involved if the typedef is used repeatedly.</p>\n"}], "owner": {"reputation": 129, "user_id": 578465, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f3388f247328aad3ee4ca25a1cfed4fe?s=128&d=identicon&r=PG&f=1", "display_name": "sdeveloper", "link": "https://stackoverflow.com/users/578465/sdeveloper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3110, "favorite_count": 1, "answer_count": 4, "score": 3, "last_activity_date": 1463829209, "creation_date": 1463606342, "last_edit_date": 1463606732, "question_id": 37310279, "link": "https://stackoverflow.com/questions/37310279/overriding-typedefs-in-c", "title": "Overriding typedefs in C++", "body": "<p>I have a generic struct</p>\n\n<pre><code>template&lt;typename X, typename Y&gt;\nstruct S\n{\n\n};\n</code></pre>\n\n<p>Then there is an abstract class which returns shared pointer to above struct in a pure virtual function. One of the derived classes also implements this function but needs to return pointer to S with different instantiated type:</p>\n\n<pre><code>typedef boost::shared_pointer&lt;S&lt;double, double&gt;&gt; BPtr;\nclass BaseClass\n{\n  public:\n    BPtr Func() = 0;\n};\n\ntypedef boost::shared_pointer&lt;S&lt;double, std::tuple&lt;double, double&gt;&gt;&gt;    Dptr;\nclass DerivedClass : public BaseClass\n{\n   public:\n      DPtr Func() {}\n}\n</code></pre>\n\n<p>Ideally I would like to be able to return an override typedef in the derived class but can't do that in C++. </p>\n\n<p>How do I fix this dilemma?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1463606376, "post_id": 37310245, "comment_id": 62141572, "body": "Does this compile?  If it does are you using MSVS?"}, {"owner": {"reputation": 16720, "user_id": 340554, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7332c248b2542b58427e9717962549d9?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/340554/adrian"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1463606402, "post_id": 37310245, "comment_id": 62141584, "body": "Yes, its Visual Studio 2005"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1463606462, "post_id": 37310245, "comment_id": 62141618, "body": "OK.  Do note that this is non-standard code.  MSVS allows this but this will not work on most other compilers."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1463606558, "post_id": 37310245, "comment_id": 62141657, "body": "Provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please."}], "answers": [{"comments": [{"owner": {"reputation": 16720, "user_id": 340554, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7332c248b2542b58427e9717962549d9?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/340554/adrian"}, "edited": false, "score": 0, "creation_date": 1463606651, "post_id": 37310312, "comment_id": 62141701, "body": "Can this cause a memory leak ? when using the reference to a temporary ?"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 16720, "user_id": 340554, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7332c248b2542b58427e9717962549d9?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/340554/adrian"}, "edited": false, "score": 0, "creation_date": 1463606795, "post_id": 37310312, "comment_id": 62141766, "body": "@Kobe Not a memory leak but certainly UB if you use that reference."}, {"owner": {"reputation": 7072, "user_id": 1816262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IcKpN.png?s=128&g=1", "display_name": "OMGtechy", "link": "https://stackoverflow.com/users/1816262/omgtechy"}, "edited": false, "score": 0, "creation_date": 1463611323, "post_id": 37310312, "comment_id": 62143417, "body": "MSVC (Visual Studio) does something well define here, but it is indeed compiler dependant and not standards comformant"}], "tags": [], "owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "is_accepted": true, "score": 6, "last_activity_date": 1463607227, "last_edit_date": 1495542706, "creation_date": 1463606503, "answer_id": 37310312, "question_id": 37310245, "link": "https://stackoverflow.com/questions/37310245/returning-a-vector-by-value-into-a-reference/37310312#37310312", "title": "Returning a vector by value into a reference", "body": "<p>Your compiler should complain of that code.</p>\n\n<p>This statement:</p>\n\n<pre><code>std::vector&lt;Info*&gt; &amp;filteredInfo= filter(m_Direction);\n</code></pre>\n\n<p>is a bad idea where <code>filter</code> is:</p>\n\n<pre><code>std::vector&lt;Info*&gt; filter(int direction);\n</code></pre>\n\n<p>You are trying to create a reference to a temporary object. Even if it succeeds with your compiler, its illegal.</p>\n\n<p>You should use:</p>\n\n<pre><code>std::vector&lt;Info*&gt; filteredInfo= filter(m_Direction);\n</code></pre>\n\n<p>Its as efficient as you want. Either a <code>move</code> operation (C++11) will happen there or <a href=\"https://stackoverflow.com/questions/12953127/what-are-copy-elision-and-return-value-optimization\">Return Value Optimization</a> will kick in. For your implementation of <code>filter</code>, it should be RVO on optimized builds <em>(it depends on your compiler quality though)</em> .</p>\n\n<p>However, you should note that you are copying raw pointers into your vector, I hope you have a correct ownership model? If not, I advice you to use a smart pointer.</p>\n"}, {"tags": [], "owner": {"reputation": 1485, "user_id": 2229960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/62652e679c426edd1a718d4dd9de6d66?s=128&d=identicon&r=PG", "display_name": "Eissa N.", "link": "https://stackoverflow.com/users/2229960/eissa-n"}, "is_accepted": false, "score": 2, "last_activity_date": 1463607045, "creation_date": 1463607045, "answer_id": 37310421, "question_id": 37310245, "link": "https://stackoverflow.com/questions/37310245/returning-a-vector-by-value-into-a-reference/37310421#37310421", "title": "Returning a vector by value into a reference", "body": "<p>Here is what happens:</p>\n\n<ol>\n<li><code>std::vector&lt;Info*&gt; new_buffer;</code> creates an object locally.</li>\n<li><code>return new_buffer;</code> moves <code>new_buffer</code> to a temporary object when <code>filter(m_Direction)</code> is called.</li>\n<li>Now if you call <code>std::vector&lt;Info*&gt; filteredInfo= filter(m_Direction);</code> the temprary object will be moved to <code>filteredInfo</code> so there is no unnecessary copies and it's the most efficient way.</li>\n<li>But, if you call <code>std::vector&lt;Info*&gt; &amp;filteredInfo= filter(m_Direction);</code> then <code>filteredInfo</code> is bound to a temporary object, which is a terrible idea and most compilers will complain about this.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "is_accepted": false, "score": 2, "last_activity_date": 1463672100, "last_edit_date": 1495539844, "creation_date": 1463611200, "answer_id": 37311218, "question_id": 37310245, "link": "https://stackoverflow.com/questions/37310245/returning-a-vector-by-value-into-a-reference/37311218#37311218", "title": "Returning a vector by value into a reference", "body": "<p>Here you're correctly puzzled because there are two independent weird facts mixing in:</p>\n\n<ul>\n<li>Your compiler allows a non-const reference to be bound to a temporary. This historically was a mistake in Microsoft compilers and is not permitted by the standard. That code should not compile.</li>\n<li>The standard however, strangely enough, actually allows binding <code>const</code> references to temporaries and has a special rule for that: the temporary object will not be destroyed immediately (like it would happen normally) but its life will be extended to the life of the reference.</li>\n</ul>\n\n<p>In code:</p>\n\n<pre><code>std::vector&lt;int&gt; foo() {\n    std::vector&lt;int&gt; x{1,2,3};\n    return x;\n}\n\nint main() {\n    const std::vector&lt;int&gt;&amp; x = foo(); // legal\n    for (auto&amp; item : x) {\n        std::cout &lt;&lt; x &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>The reason for this apparently absurd rule about binding const references to temporaries is that in C++ there is a very common \"pattern\"(1) of passing const references instead of values for parameters, even when identity is irrelevant. If you combine this (anti)-pattern with implicit conversion what happens is that for example:</p>\n\n<pre><code>void foo(const std::string&amp; x) { ... }\n</code></pre>\n\n<p>wouldn't be callable with</p>\n\n<pre><code>foo(\"Hey, you\");\n</code></pre>\n\n<p>without the special rule, because the <code>const char *</code> (literal) is implicitly converted to a temporary <code>std::string</code> and passed as parameter bound to a const reference.</p>\n\n<p>(1) The pattern is indeed quite bad from a philosophical point of view because a value is a value and a reference is a reference: the two are logically distinct concepts. <a href=\"https://stackoverflow.com/a/4705871/320726\">A const reference is <strong>not</strong> a value and confusing the two can be the source of very subtle bugs</a>. C++ however is performance-obsessed and, especially before move semantics, passing const references was considered a \"smart\" way of passing values, despite being a problem because of lifetime and aliasing issues and for making things harder for the optimizer. With a modern compiler passing a reference should be used only for \"big\" objects, especially ones that are <strong>not</strong> constructed on the fly to be passed or when you're actually interested in object identity and not in just object value.</p>\n"}], "owner": {"reputation": 16720, "user_id": 340554, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7332c248b2542b58427e9717962549d9?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/340554/adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 653, "favorite_count": 0, "accepted_answer_id": 37310312, "answer_count": 3, "score": 3, "last_activity_date": 1463672100, "creation_date": 1463606216, "question_id": 37310245, "link": "https://stackoverflow.com/questions/37310245/returning-a-vector-by-value-into-a-reference", "title": "Returning a vector by value into a reference", "body": "<p>I have the following code:</p>\n\n<pre><code>std::vector&lt;Info*&gt; filter(int direction)\n{\n    std::vector&lt;Info*&gt; new_buffer;\n    for(std::vector&lt;Info*&gt;::iterator it=m_Buffer.begin();it&lt;m_Buffer.end();it++)\n    {\n        if(((*it)-&gt;direction == direction)\n        {\n            new_buffer.push_back(*it);\n        }\n    }\n\n    return new_buffer;\n}\n\nstd::vector&lt;Info*&gt; &amp;filteredInfo= filter(m_Direction);\n</code></pre>\n\n<p>Can someone explain what is happening here ? Would the filter method return by value create a temporary and filteredInfo never gets destroyed because its a reference ?</p>\n\n<p>Not sure if I understand correctly. What is the diference between filteredInfo being a reference and not being one in this case ?</p>\n"}, {"tags": ["c++", "api", "z3", "smt"], "answers": [{"comments": [{"owner": {"reputation": 1729, "user_id": 1618465, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e9867486a678f1a5ddc2929c25c2a53?s=128&d=identicon&r=PG", "display_name": "user1618465", "link": "https://stackoverflow.com/users/1618465/user1618465"}, "edited": false, "score": 0, "creation_date": 1463983240, "post_id": 37375244, "comment_id": 62277533, "body": "How can I specify that I want the size for the symbolic variable with name <code>SymVar_0</code> and not from other one?"}, {"owner": {"reputation": 7764, "user_id": 869966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de76b0a45b1c27f08ec1c8e23153588?s=128&d=identicon&r=PG", "display_name": "Christoph Wintersteiger", "link": "https://stackoverflow.com/users/869966/christoph-wintersteiger"}, "reply_to_user": {"reputation": 1729, "user_id": 1618465, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e9867486a678f1a5ddc2929c25c2a53?s=128&d=identicon&r=PG", "display_name": "user1618465", "link": "https://stackoverflow.com/users/1618465/user1618465"}, "edited": false, "score": 0, "creation_date": 1464001950, "post_id": 37375244, "comment_id": 62288249, "body": "The preferred way is to have that constant in an expression beforehand. As there is no symbol table, you can&#39;t look up the constants, but you can `cheat&#39; by knowing the name and sort of the variable; that allows you to construct the same expression via mk_const, but it will only work if you get the name and sort exactly right."}, {"owner": {"reputation": 7764, "user_id": 869966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de76b0a45b1c27f08ec1c8e23153588?s=128&d=identicon&r=PG", "display_name": "Christoph Wintersteiger", "link": "https://stackoverflow.com/users/869966/christoph-wintersteiger"}, "reply_to_user": {"reputation": 1729, "user_id": 1618465, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e9867486a678f1a5ddc2929c25c2a53?s=128&d=identicon&r=PG", "display_name": "user1618465", "link": "https://stackoverflow.com/users/1618465/user1618465"}, "edited": false, "score": 0, "creation_date": 1464101096, "post_id": 37375244, "comment_id": 62339680, "body": "Given some BV type, Z3_get_bv_sort_size(ctx, TYPE)); You need to know the name and the type of the variable, so you can just call the function on them."}], "tags": [], "owner": {"reputation": 7764, "user_id": 869966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de76b0a45b1c27f08ec1c8e23153588?s=128&d=identicon&r=PG", "display_name": "Christoph Wintersteiger", "link": "https://stackoverflow.com/users/869966/christoph-wintersteiger"}, "is_accepted": true, "score": 1, "last_activity_date": 1464101430, "last_edit_date": 1495535340, "creation_date": 1463925203, "answer_id": 37375244, "question_id": 37310176, "link": "https://stackoverflow.com/questions/37310176/z3-getting-the-size-of-a-symbolic-variable-c-api/37375244#37375244", "title": "z3 getting the size of a symbolic variable C++ API", "body": "<p>The function called <a href=\"http://z3prover.github.io/api/html/group__capi.html#ga84c6e60f3bcb941fd41fd6b317430c20\" rel=\"nofollow noreferrer\">Z3_get_bv_sort_size</a> should do the job. Note that this is a C (not C++) function, so you have to supply the context as well. </p>\n\n<p>In the interest of other users facing similar issues: There is no symbol table in Z3 that lets you look up the types of names. You can create one yourself by running over all the subexpressions and recording all the symbols and their types encountered while doing so. For an example in Python, see <a href=\"https://stackoverflow.com/questions/14080398/z3py-how-to-get-the-list-of-variables-from-a-formula\">Z3py: how to get the list of variables from a formula?</a>.</p>\n"}], "owner": {"reputation": 1729, "user_id": 1618465, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e9867486a678f1a5ddc2929c25c2a53?s=128&d=identicon&r=PG", "display_name": "user1618465", "link": "https://stackoverflow.com/users/1618465/user1618465"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 37375244, "answer_count": 1, "score": 0, "last_activity_date": 1464101430, "creation_date": 1463605949, "question_id": 37310176, "link": "https://stackoverflow.com/questions/37310176/z3-getting-the-size-of-a-symbolic-variable-c-api", "title": "z3 getting the size of a symbolic variable C++ API", "body": "<p>I'm using <code>Z3_parse_smtlib2_string</code> to parse a smtlib2 formula. The fomula looks like:</p>\n\n<pre><code>(set-logic QF_AUFBV)(declare-fun SymVar_0 () (_ BitVec 32))(declare-fun SymVar_1 () (_ BitVec 8))...\n</code></pre>\n\n<p>I parse it using:</p>\n\n<pre><code>Z3_ast ast = Z3_parse_smtlib2_string(ctx, (Z3_string)formula, 0, 0, 0, 0, 0, 0);\n</code></pre>\n\n<p>Let say that I want now to get the size of <code>SymVar_0</code> (it should return 32). How can I do so?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++", "g++", "inline"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 7, "creation_date": 1463605599, "post_id": 37310099, "comment_id": 62141205, "body": "<code>inline</code> doesn&#39;t change the semantics of what happens in a function."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1463605894, "post_id": 37310099, "comment_id": 62141348, "body": "Think of it like copy and pasting the code into the call site but wrapping it with <code>{}</code> to create a &quot;function scope&quot;."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1463606014, "post_id": 37310099, "comment_id": 62141397, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1018853/why-is-the-use-of-alloca-not-considered-good-practice\">Why is the use of alloca() not considered good practice?</a>"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1463606709, "post_id": 37310099, "comment_id": 62141735, "body": "perhaps have a look at the execute-around idiom, instead."}, {"owner": {"reputation": 530, "user_id": 4024569, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2cd6926eca618981f80bac1aee811788?s=128&d=identicon&r=PG&f=1", "display_name": "sig_seg_v", "link": "https://stackoverflow.com/users/4024569/sig-seg-v"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1463607282, "post_id": 37310099, "comment_id": 62141990, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1, this isn&#39;t a question of whether it&#39;s good practice to use <code>alloca()</code> or not. I didn&#39;t write the api, I&#39;m just using it.  Whoever voted to close, I&#39;d be happy to clarify this question if I knew where your confusion lay."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1463608104, "post_id": 37310099, "comment_id": 62142301, "body": "@NathanOliver that would be different... <code>alloca</code> space typically lasts until the end of the enclosing function, not the enclosing block. <a href=\"http://stackoverflow.com/questions/5407546/memory-allocated-with-alloca-gets-freed-at-end-of-function-or-at-end-of-scope\" title=\"memory allocated with alloca gets freed at end of function or at end of scope\">stackoverflow.com/questions/5407546/&hellip;</a>"}, {"owner": {"reputation": 530, "user_id": 4024569, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2cd6926eca618981f80bac1aee811788?s=128&d=identicon&r=PG&f=1", "display_name": "sig_seg_v", "link": "https://stackoverflow.com/users/4024569/sig-seg-v"}, "edited": false, "score": 0, "creation_date": 1463608962, "post_id": 37310099, "comment_id": 62142645, "body": "@sleeptightpupper I didn&#39;t write the code that uses <code>alloca</code>, and the linked &quot;good practice&quot; question and answers don&#39;t seem to mention inline functions, or much on the use of <code>alloca</code> at all. I&#39;m not writing new code that contains <code>alloca</code>, and I&#39;m not advocating that practice. Leaving memory management up to the compiler and avoiding &quot;copy/paste&quot; code duplications are both good practices where possible, if I am not mistaken."}], "answers": [{"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1484587072, "post_id": 37310346, "comment_id": 70560502, "body": "Scope is irrelevant; it refers to the region of source code in which an identifier is visible at compile time. It&#39;s about lifetime / storage duration."}], "tags": [], "owner": {"reputation": 1139, "user_id": 6266602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0fa60ab2c1ac1b185db45679cabe8c9?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas B Preusser", "link": "https://stackoverflow.com/users/6266602/thomas-b-preusser"}, "is_accepted": false, "score": 4, "last_activity_date": 1463606662, "creation_date": 1463606662, "answer_id": 37310346, "question_id": 37310099, "link": "https://stackoverflow.com/questions/37310099/if-a-variable-is-allocated-on-the-stack-in-an-inline-function-using-alloca-is-i/37310346#37310346", "title": "If a variable is allocated on the stack in an inline function using alloca, is its reference valid after the inline function returns?", "body": "<p>Declaring a function <code>inline</code> does not extend the scope of the contained variables to the scope, into which it is expanded. So, whatever <code>alloca</code> allocates is not at all guaranteed to be valid in the context that has called the <em>function</em> <code>uses_alloca</code>. If you use the <em>macro</em> <code>func_alloca</code>, you are fine because the macro text is literally expanded in place. However, the use of <code>alloca</code> itself is typically considered a bad practice.</p>\n"}, {"tags": [], "owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "is_accepted": false, "score": 5, "last_activity_date": 1463608862, "creation_date": 1463608862, "answer_id": 37310817, "question_id": 37310099, "link": "https://stackoverflow.com/questions/37310099/if-a-variable-is-allocated-on-the-stack-in-an-inline-function-using-alloca-is-i/37310817#37310817", "title": "If a variable is allocated on the stack in an inline function using alloca, is its reference valid after the inline function returns?", "body": "<p>If you're using GCC, the <em>intended</em> behavior is that functions with <code>alloca</code> in them aren't inlined automatically. From <a href=\"https://github.com/gcc-mirror/gcc/blob/master/gcc/tree-inline.c#L3560\" rel=\"noreferrer\"><code>tree-inline</code></a>:</p>\n\n<pre><code>  /* Refuse to inline alloca call unless user explicitly forced so as\n this may change program's memory overhead drastically when the\n function using alloca is called in loop.  In GCC present in\n SPEC2000 inlining into schedule_block cause it to require 2GB of\n RAM instead of 256MB.  Don't do so for alloca calls emitted for\n VLA objects as those can't cause unbounded growth (they're always\n wrapped inside stack_save/stack_restore regions.  */\n</code></pre>\n\n<p>This of course doesn't take into account:</p>\n\n<ul>\n<li>Bugs</li>\n<li>The compiler inlining functions anyways because it's not perfect</li>\n<li>Optimization switches, attributes</li>\n<li>Bad luck</li>\n</ul>\n\n<p>The <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Inline.html\" rel=\"noreferrer\">GCC manual page</a> on inline warns that inlined functions are ill-suited for <code>alloca</code> and <a href=\"https://stackoverflow.com/questions/1018853/why-is-the-use-of-alloca-not-considered-good-practice\">Why is the use of alloca() not considered good practice?</a> has a few horror stories as well.</p>\n\n<p>Essentially if you're worried that inlining may affect the semantics of your code, don't rely on it.</p>\n"}], "owner": {"reputation": 530, "user_id": 4024569, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2cd6926eca618981f80bac1aee811788?s=128&d=identicon&r=PG&f=1", "display_name": "sig_seg_v", "link": "https://stackoverflow.com/users/4024569/sig-seg-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1224, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1548384899, "creation_date": 1463605545, "last_edit_date": 1548384899, "question_id": 37310099, "link": "https://stackoverflow.com/questions/37310099/if-a-variable-is-allocated-on-the-stack-in-an-inline-function-using-alloca-is-i", "title": "If a variable is allocated on the stack in an inline function using alloca, is its reference valid after the inline function returns?", "body": "<p>I know that the compiler <em>may</em>, not <em>shall</em> unroll <code>inline</code> functions into the calling function to avoid the overhead associated with calling out-of-line functions. I also know, however, that <code>inline</code> functions are linked differently than out-of-line functions, so I can't expect them to act the same way, exactly.</p>\n\n<p>While I am actually using C++, I'm developing a program using an api in which it is convenient to make use of C macros that look something like:</p>\n\n<pre><code>#define func_alloca(ptr) do { *ptr = alloca(size); memset(*ptr, 0, size); }\n</code></pre>\n\n<p>In the interest of not repeating code several times in different functions, it would be useful for me to be able to functionalize a series of these <code>alloca</code> calls. My question is, (in gcc specifically, since <code>alloca</code> is implementation-defined,) can I initialize variables on the stack using <code>alloca</code>, inside an <code>inline</code> function, and count on them to work outside? Here's an example of what I want to do:</p>\n\n<pre><code>inline void uses_alloca(type*&amp; ptr){\n    // do stuff\n    func_alloca(ptr);\n}\n\nvoid calls_inline(){\n    type *local_ptr;\n    uses_alloca(local_ptr);\n    // is local_ptr valid?\n}\n</code></pre>\n\n<p>If it does work, will it <em>always</em> work? As in, not only when the compiler chooses to unroll the <code>inline</code> function into the calling function?</p>\n\n<p>Edit:</p>\n\n<p>My guess is that this probably <em>will</em> work in fact, since the <code>alloca</code> call is already valid outside the <code>do{}</code> local scope contained in the macro, and since, if I understand correctly, a function doesn't actually have a different level of scope in C++ than a <code>do{}</code> block. My question remains: is this the way <code>alloca</code> is supposed to work in gcc? Is this defined behavior?</p>\n"}, {"tags": ["c++", "c", "gcc"], "comments": [{"owner": {"reputation": 20746, "user_id": 1233251, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/cI9GF.png?s=128&g=1", "display_name": "E_net4 says don&#39;t copy that", "link": "https://stackoverflow.com/users/1233251/e-net4-says-dont-copy-that"}, "edited": false, "score": 0, "creation_date": 1463605205, "post_id": 37309971, "comment_id": 62141007, "body": "By locations, do you mean machines, or just file system paths to the source?"}, {"owner": {"reputation": 178, "user_id": 249266, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b2d900524d894648e01c6c21e9a097d6?s=128&d=identicon&r=PG", "display_name": "LordOphidian", "link": "https://stackoverflow.com/users/249266/lordophidian"}, "reply_to_user": {"reputation": 20746, "user_id": 1233251, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/cI9GF.png?s=128&g=1", "display_name": "E_net4 says don&#39;t copy that", "link": "https://stackoverflow.com/users/1233251/e-net4-says-dont-copy-that"}, "edited": false, "score": 0, "creation_date": 1463605312, "post_id": 37309971, "comment_id": 62141054, "body": "Just different file system paths. So for instance if I pull the source code out of our CM tool into directory A and build I get one checksum, but then if I pull another copy into directory B the checksum will be different, only in this one spot."}, {"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1463605400, "post_id": 37309971, "comment_id": 62141102, "body": "Typically, you will have a build system that produces an &quot;official&quot; binary so you can just distribute and compare to that one. But, I too would like to know why the binaries are different"}, {"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 3, "creation_date": 1463606294, "post_id": 37309971, "comment_id": 62141532, "body": "@LordOphidian My magic ball tells me the differing section you left out of your question is <code>.note.gnu.build-id</code>. The whole point of <a href=\"https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Developer_Guide/compiling-build-id.html\" rel=\"nofollow noreferrer\">build-id</a> is to solve the exact problem you mention. If <code>eu-readelf -n</code> produces different build-id&#39;s for your binaries, then you have a problem."}, {"owner": {"reputation": 178, "user_id": 249266, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b2d900524d894648e01c6c21e9a097d6?s=128&d=identicon&r=PG", "display_name": "LordOphidian", "link": "https://stackoverflow.com/users/249266/lordophidian"}, "reply_to_user": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1463607237, "post_id": 37309971, "comment_id": 62141965, "body": "@sleeptightpupper That seems to be it. Thanks! Now I just need to find a way to prevent it from being different so when my QA builds it they get the same checksum."}, {"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1463607429, "post_id": 37309971, "comment_id": 62142046, "body": "No way to tell without more information about your build process."}], "answers": [{"tags": [], "owner": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "is_accepted": true, "score": 4, "last_activity_date": 1463617996, "creation_date": 1463617996, "answer_id": 37312123, "question_id": 37309971, "link": "https://stackoverflow.com/questions/37309971/differences-in-binaries-produced-by-gcc-for-the-same-code-base-for-different-pat/37312123#37312123", "title": "Differences in binaries produced by gcc for the same code base for different paths", "body": "<p>As sleep tight pupper said, the differing section is the <code>build-id</code>.</p>\n\n<p>You could avoid having the <code>build-id</code> section generated by passing <code>-Wl,--build-id=none</code> on linking or you could strip it from the ELF with <code>strip --remove-section=.note.gnu.build-id</code>.</p>\n"}], "owner": {"reputation": 178, "user_id": 249266, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b2d900524d894648e01c6c21e9a097d6?s=128&d=identicon&r=PG", "display_name": "LordOphidian", "link": "https://stackoverflow.com/users/249266/lordophidian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 916, "favorite_count": 0, "accepted_answer_id": 37312123, "answer_count": 1, "score": 2, "last_activity_date": 1463617996, "creation_date": 1463605029, "question_id": 37309971, "link": "https://stackoverflow.com/questions/37309971/differences-in-binaries-produced-by-gcc-for-the-same-code-base-for-different-pat", "title": "Differences in binaries produced by gcc for the same code base for different paths", "body": "<p>I've got a code base (C and C++) that when compiled will produce binaries with different checksums, even after <code>strip</code> has been run on the binaries.</p>\n\n<p>Doing a diff of the binaries in hex produced the following lines as the only difference:</p>\n\n<p>Binary from Location 1:</p>\n\n<pre><code>00000170: 0300 0000 474e 5500 7645 15ec 09f5 2b56  ....GNU.vE....+V\n00000180: 0679 e9a4 d49d 29e0 7de8 fb5b 0300 0000  .y....).}..[....\n</code></pre>\n\n<p>Binary from Location 2:</p>\n\n<pre><code>00000170: 0300 0000 474e 5500 cf2a 4316 2262 679d  ....GNU..*C.\"bg.\n00000180: 5691 b91a 52a8 29d2 45e8 c204 0300 0000  V...R.).E.......\n</code></pre>\n\n<p>Seems to me like this must be a checksum or something like that. I would suspect a timestamp, except if I clean and then do a rebuild in the same directory, the binaries will have the same checksum.</p>\n\n<p>Does anyone know what this could be? I'd like to make sure my binaries have the same checksum even when build in different locations so they can be verified by my QA organization.</p>\n"}, {"tags": ["c++", "linux", "mongodb"], "comments": [{"owner": {"reputation": 2664, "user_id": 1862101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e069875829ca4da3cd8895e468c64409?s=128&d=identicon&r=PG", "display_name": "brian beuning", "link": "https://stackoverflow.com/users/1862101/brian-beuning"}, "edited": false, "score": 0, "creation_date": 1463607621, "post_id": 37309555, "comment_id": 62142116, "body": "Sleeping is never a good way to get best performance.  56 bytes * 100,000 writes per second is 5.6 MB/s.  One disk can do that if you treat it right (few seeks).  If MongoDB will treat the disk right, you would need to test.  When you profile the code, where is the time spent?"}, {"owner": {"reputation": 853, "user_id": 1464937, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YjsfO.png?s=128&g=1", "display_name": "musasabi", "link": "https://stackoverflow.com/users/1464937/musasabi"}, "reply_to_user": {"reputation": 2664, "user_id": 1862101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e069875829ca4da3cd8895e468c64409?s=128&d=identicon&r=PG", "display_name": "brian beuning", "link": "https://stackoverflow.com/users/1862101/brian-beuning"}, "edited": false, "score": 0, "creation_date": 1463671782, "post_id": 37309555, "comment_id": 62174600, "body": "<code>opreport</code> says 18% of time is spent getting data items, while 10% is spent in libstdc++ (no location information) and 2% is spent in libc&#39;s fwrite. I guess that vindicates Mongo and the rest, doesn&#39;t it? Looks like this mechanism for distributing information needs retooling."}], "owner": {"reputation": 853, "user_id": 1464937, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YjsfO.png?s=128&g=1", "display_name": "musasabi", "link": "https://stackoverflow.com/users/1464937/musasabi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1463603852, "creation_date": 1463603440, "last_edit_date": 1463603852, "question_id": 37309555, "link": "https://stackoverflow.com/questions/37309555/mongodb-c-driver-efficiency", "title": "MongoDB C driver efficiency", "body": "<p>I'm trying to write a program whose job it is to go into shared memory, retrieve a piece of information (a <code>struct</code> 56 bytes in size), then parse that struct lightly and write it to a database.</p>\n\n<p>The catch is that it needs to do this several dozens of thousands of times per second. I'm running this on a dedicated Ubuntu 14.04 server with dual Xeon X5677's and 32GB RAM. Also, Mongo is running PerconaFT as its storage engine. I am making an uneducated guess here, but say worst case load scenario would be 100,000 writes per second.</p>\n\n<p>Shared memory is populated by another program who's reading information from a real time data stream, so I can't necessarily reproduce scenarios.</p>\n\n<p>First... is Mongo the right choice for this task?</p>\n\n<p>Next, this is the code that I've got right now. It starts with creating a list of collections (the list of items I want to record data points on is fixed) and then retrieving data from shared memory until it catches a signal.</p>\n\n<pre><code>int main()\n{\n  //these deal with navigating shared memory\n  uint latestNotice=0, latestTurn=0, latestPQ=0, latestPQturn=0;\n  symbol_data *notice = nullptr;\n  bool done = false;\n\n  //this is our 56 byte struct\n  pq item;\n\n  uint64_t today_at_midnight; //since epoch, in milliseconds\n  {\n    time_t seconds = time(NULL);\n    today_at_midnight = seconds/(60*60*24);\n    today_at_midnight *= (60*60*24*1000);\n  }\n\n  //connect to shared memory\n  infob=info_block_init();\n  uint32_t used_symbols = infob-&gt;used_symbols;\n  getPosition(latestNotice, latestTurn);\n\n  //fire up mongo\n  mongoc_client_t *client = nullptr;\n  mongoc_collection_t *collections[used_symbols];\n  mongoc_collection_t *collection = nullptr;\n  bson_error_t error;\n  bson_t *doc = nullptr;\n\n  mongoc_init();\n  client = mongoc_client_new(\"mongodb://localhost:27017/\");\n\n  for(uint32_t symbol = 0; symbol &lt; used_symbols; symbol++)\n  {\n    collections[symbol] = mongoc_client_get_collection(client, \"scribe\",\n                                         (infob-&gt;sd+symbol)-&gt;getSymbol());\n  }\n\n  //this will be used later to sleep one millisecond\n  struct timespec ts;\n  ts.tv_sec=0;\n  ts.tv_nsec=1000000;\n\n  while(continue_running) //becomes false if a signal is caught\n  {\n    //check that new info is available in shared memory\n    //sleep 1ms if it isn't\n    while(!getNextNotice(&amp;notice,latestNotice,latestTurn)) nanosleep(&amp;ts, NULL);\n\n    //get the new info\n    done=notice-&gt;getNextItem(item, latestPQ, latestPQturn);\n    if(done) continue;\n\n    //just some simple array math to make sure we're on the right collection\n    collection = collections[notice - infob-&gt;sd];\n\n    //switch on the item type and parse it accordingly\n    switch(item.tp)\n    {\n      case pq::pq_event:\n        doc = BCON_NEW(\n                       //decided to use this instead of std::chrono\n                       \"ts\", BCON_DATE_TIME(today_at_midnight + item.ts),\n                       //item.pr is a uint64_t, and the guidance I've read on mongo\n                       //advises using strings for those values\n                       \"pr\", BCON_UTF8(std::to_string(item.pr).c_str()),\n                       \"sz\", BCON_INT32(item.sz),\n                       \"vn\", BCON_UTF8(venue_labels[item.vn]),\n                       \"tp\", BCON_UTF8(\"e\")\n                      );\n        if(!mongoc_collection_insert(collection, MONGOC_INSERT_NONE, doc, NULL, &amp;error))\n        {\n          LOG(1,\"Mongo Error: \"&lt;&lt;error.message&lt;&lt;endl);\n        }\n        break;\n      //obviously, several other cases go here, but they all look the\n      //same, using BCON macros for their data.\n      default:\n        LOG(1,\"got unknown type = \"&lt;&lt;item.tp&lt;&lt;endl);\n        break;\n    }\n  }\n\n  //clean up once we break from the while()\n  if(doc != nullptr) bson_destroy(doc);\n\n  for(uint32_t symbol = 0; symbol &lt; used_symbols; symbol++)\n  {\n    collection = collections[symbol];\n    mongoc_collection_destroy(collection);\n  }\n\n  if(client != nullptr) mongoc_client_destroy(client);\n  mongoc_cleanup();\n\n  return 0;\n}\n</code></pre>\n\n<p>My second question is: is this the fastest way to do this? The retrieval from shared memory isn't perfect, but this program is getting way behind its supply of data, far moreso than I need it to be. So I'm looking for obvious mistakes with regards to efficiency or technique when speed is the goal.</p>\n\n<p>Thanks in advance. =)</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1463603457, "post_id": 37309486, "comment_id": 62140154, "body": "If you have a derived class without virtual functions, you are doing it wrong."}, {"owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1463604093, "post_id": 37309486, "comment_id": 62140438, "body": "@n.m. I&#39;d rather say if there isn&#39;t any derived class with a virtual functions, you are doing it wrong. Single classes can use the default behavior implemented in the base class."}], "answers": [{"tags": [], "owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "is_accepted": false, "score": 0, "last_activity_date": 1463604201, "last_edit_date": 1463604201, "creation_date": 1463603850, "answer_id": 37309668, "question_id": 37309486, "link": "https://stackoverflow.com/questions/37309486/a-list-with-the-same-type-as-the-class-its-contained-within/37309668#37309668", "title": "A list with the same type as the class it&#39;s contained within", "body": "<p>The common way is to use CRTP:</p>\n\n<pre><code>namespace events {\n    template&lt;typename Derived&gt;\n    class Event {\n        public:\n            static const std::list&lt;bool (*)(Derived)&gt; listeners;\n            void post(Derived event)\n            {\n                 static_cast&lt;Derived&amp;&gt;(*this).post(event);\n            }\n    };\n\n    class ExampleEvent : Event&lt;ExampleEvent&gt; {\n        int eventData;\n        void post(ExampleEvent event)\n        {\n             //implement post\n        }\n    };\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 512, "user_id": 5059201, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/hes4w.jpg?s=128&g=1", "display_name": "Sam McCreery", "link": "https://stackoverflow.com/users/5059201/sam-mccreery"}, "edited": false, "score": 0, "creation_date": 1463604260, "post_id": 37309685, "comment_id": 62140540, "body": "Maybe it wasn&#39;t clear, but the idea is that each of the listener functions is called when post is called. So, if I raise an event, all the listeners in that event class are notified (unless one cancels the event by returning <code>true</code>)."}, {"owner": {"reputation": 1204, "user_id": 6175422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f3b916a1e5d6c8c14fd7fba892f87ad?s=128&d=identicon&r=PG", "display_name": "Vadim Key", "link": "https://stackoverflow.com/users/6175422/vadim-key"}, "reply_to_user": {"reputation": 512, "user_id": 5059201, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/hes4w.jpg?s=128&g=1", "display_name": "Sam McCreery", "link": "https://stackoverflow.com/users/5059201/sam-mccreery"}, "edited": false, "score": 0, "creation_date": 1463604689, "post_id": 37309685, "comment_id": 62140757, "body": "@SamM why not use EventHandler with the list of events, and in EventHandler post iterate over the list and call their post which is virtual?"}], "tags": [], "owner": {"reputation": 1204, "user_id": 6175422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f3b916a1e5d6c8c14fd7fba892f87ad?s=128&d=identicon&r=PG", "display_name": "Vadim Key", "link": "https://stackoverflow.com/users/6175422/vadim-key"}, "is_accepted": false, "score": 0, "last_activity_date": 1463604922, "last_edit_date": 1463604922, "creation_date": 1463603896, "answer_id": 37309685, "question_id": 37309486, "link": "https://stackoverflow.com/questions/37309486/a-list-with-the-same-type-as-the-class-its-contained-within/37309685#37309685", "title": "A list with the same type as the class it&#39;s contained within", "body": "<p>Just use virtual functions:</p>\n\n<pre><code>namespace events {\n    class EventHandler {\n        public:\n            static const std::list&lt;Event*&gt; listeners;\n            void post() {\n                for (Event * listener : listeners) {\n                   if (listener-&gt;post()) break;\n                }\n            }\n    };\n\n    class BaseEvent {\n    public:\n       virtual bool post() = 0;\n       virtual ~BaseEvent() {}\n    };\n\n    class ExampleEvent : public BaseEvent { // use public inheritance\n        int eventData;\n    public:\n        virtual bool post() override {\n           if (eventData == 0) return true;\n           return false;\n        }\n    };\n}\n</code></pre>\n"}], "owner": {"reputation": 512, "user_id": 5059201, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/hes4w.jpg?s=128&g=1", "display_name": "Sam McCreery", "link": "https://stackoverflow.com/users/5059201/sam-mccreery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1463604922, "creation_date": 1463603205, "question_id": 37309486, "link": "https://stackoverflow.com/questions/37309486/a-list-with-the-same-type-as-the-class-its-contained-within", "title": "A list with the same type as the class it&#39;s contained within", "body": "<p>I'm trying to create a simple events system, which will have many different events. So, I've tried to create an event class which allows you to register functions, taking the correct type of event, and returning a boolean.</p>\n\n<p>What I want is that the method <code>post</code> in any subclass of <code>Event</code> will take that subclass rather than <code>Event</code>, and the functions in the list <code>listeners</code> in each subclass should take the correct subclass type. Here's the code I already have, which forces the function to cast to the correct event type:</p>\n\n<p><strong>events.h:</strong></p>\n\n<pre><code>namespace events {\n    class Event {\n        public:\n            static const std::List&lt;bool (*)(Event)&gt; listeners;\n            void post(Event event);\n    }\n\n    class ExampleEvent : Event {\n        int eventData;\n    }\n}\n</code></pre>\n\n<p><strong>events.cpp:</strong></p>\n\n<pre><code>namespace events {\n    void Event::post(Event event) {\n        for(int i = 0; i &lt; listeners.size(); i++) {\n            if(listeners[i](event)) return;\n        }\n    }\n}\n</code></pre>\n\n<p>Is there some way I can get this to work with subclassed events without having to do the following?</p>\n\n<pre><code>bool handleExample(Event event) {\n    ExampleEvent exampleEvent = (ExampleEvent)event;\n    std::cout &lt;&lt; exampleEvent.eventData &lt;&lt; std::endl;\n    return false;\n}\n\n// Somewhere else in the code\nExampleEvent::listeners.push_back(&amp;handleExample);\n</code></pre>\n\n<p>I apologise for any incorrect code, I don't quite have the rules of the language perfect yet.</p>\n"}, {"tags": ["c++", "string", "class", "crash"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1463606296, "post_id": 37309282, "comment_id": 62141533, "body": "Why not simply use <code>std::vector&lt;T&gt;</code> as a member of <code>Buffer</code>?  Then just have <code>Buffer::operator[]</code> simply call <code>vector::resize()</code> if the buffer is not large enough?"}, {"owner": {"reputation": 47, "user_id": 6352116, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-km3IuD1opo4/AAAAAAAAAAI/AAAAAAAAAD8/o3yPbTw8bOM/photo.jpg?sz=128", "display_name": "Peter Gellert", "link": "https://stackoverflow.com/users/6352116/peter-gellert"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1463606498, "post_id": 37309282, "comment_id": 62141633, "body": "sadly, we are forbidden to use STL in this homework."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1463606676, "post_id": 37309282, "comment_id": 62141715, "body": "Well, you 1) Can&#39;t copy buffers around safely, and 2) You can&#39;t call <code>operator []</code> in a function that uses a <code>const</code> Buffer.  I leave it for your teacher (or yourself) to address those issues.  Also, not to even use <code>std::string</code> in this day and age of C++ is simply outrageous."}], "answers": [{"tags": [], "owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "is_accepted": false, "score": 1, "last_activity_date": 1463603391, "last_edit_date": 1495541280, "creation_date": 1463603391, "answer_id": 37309539, "question_id": 37309282, "link": "https://stackoverflow.com/questions/37309282/c-deprecated-conversion-from-string-constant-to-char/37309539#37309539", "title": "C++ deprecated conversion from string constant to &#39;char*&#39; []", "body": "<p>You're attempting to store a string literal in a <code>char*</code> variable - indicating that it is writable.</p>\n\n<p>A string literal will typically be stored in the read only data segment of your application binary (See <a href=\"https://stackoverflow.com/questions/2589949/c-string-literals-where-do-they-go\">this question</a>)</p>\n\n<p>From the <a href=\"http://c-faq.com/decl/strlitinit.html\" rel=\"nofollow noreferrer\">C++ FAQ</a> </p>\n\n<blockquote>\n  <p>...it turns into an unnamed, static array of characters, and this unnamed array may be stored in read-only memory, and which therefore cannot necessarily be modified</p>\n</blockquote>\n\n<p>Attempting to write to a memory location in the read-only data segment will cause your program to terminate - hence the crash.</p>\n"}, {"tags": [], "owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "is_accepted": true, "score": 1, "last_activity_date": 1463603672, "creation_date": 1463603672, "answer_id": 37309621, "question_id": 37309282, "link": "https://stackoverflow.com/questions/37309282/c-deprecated-conversion-from-string-constant-to-char/37309621#37309621", "title": "C++ deprecated conversion from string constant to &#39;char*&#39; []", "body": "<p><code>\"hey\"</code> is a string literal and so the compiler stores it in a different part of the executable which is likely to be stored in write-protected memory along with all other strings. As a result, in C++, in a pointer context it evaluates to <code>const char*</code>.</p>\n\n<p>The solution is to declare</p>\n\n<pre><code>Buffer&lt;const char*&gt; s(20,\"s.txt\",\"rw\"); \n\n\ntemplate&lt;class T&gt;\nclass Buffer\n{\n\n    unsigned int siz;\n    T *data;\n\n\npublic:\n\n    ///constructor(size,filename,openmode)\n    Buffer(unsigned int s,const char* n, const char* m):siz(s)\n    {\n        data= new T[siz];\n    }\n\n    ///destructor\n    ~Buffer()\n    {\n        delete[] data;\n    }\n\n    ///operator[]\n    T&amp; operator[](unsigned int i)\n    {\n        if(i&gt;siz-1)\n        {\n            unsigned int newsize=siz*2;\n            T* tmp=new T[newsize];\n            for(unsigned int j = 0; j &lt; siz; j++)\n            {\n                tmp[j] = data[j];\n            }\n            siz=newsize;\n            delete[] data;\n            data=tmp;\n        }\n        return data[i];\n    }\n};     \n\nint main() {\n    Buffer&lt;char*&gt; s(20,\"s.txt\",\"rw\");    //20 long char*\n    for(unsigned int i=0;i&lt;24;i++){   //it overwrites the size of s after default 20\n        s[i]=\"hey\";\n    }\n}\n</code></pre>\n\n<p>Live demo: <a href=\"http://ideone.com/Dgdcui\" rel=\"nofollow\">http://ideone.com/Dgdcui</a></p>\n"}], "owner": {"reputation": 47, "user_id": 6352116, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-km3IuD1opo4/AAAAAAAAAAI/AAAAAAAAAD8/o3yPbTw8bOM/photo.jpg?sz=128", "display_name": "Peter Gellert", "link": "https://stackoverflow.com/users/6352116/peter-gellert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1097, "favorite_count": 0, "accepted_answer_id": 37309621, "answer_count": 2, "score": 2, "last_activity_date": 1463603672, "creation_date": 1463602458, "question_id": 37309282, "link": "https://stackoverflow.com/questions/37309282/c-deprecated-conversion-from-string-constant-to-char", "title": "C++ deprecated conversion from string constant to &#39;char*&#39; []", "body": "<p>Whenever I try to run my code I get these error lines. It also seems like that sometimes it crashes the program. Is that possible or something else causes the crash? \nThe error code comes to these lines: </p>\n\n<pre><code>Buffer&lt;char*&gt; s(20,\"s.txt\",\"rw\");    //20 long char*\n   for(unsigned int i=0;i&lt;24;i++){   //it overwrites the size of s after default 20\n    s[i]=\"hey\";         //error here: \"deprecated conversion from string constant to 'char*'\"   \n</code></pre>\n\n<p>The class looks like this(deleted the unimportant parts\":</p>\n\n<pre><code>template&lt;class T&gt;\nclass Buffer:public File_ptr\n{\n\n    unsigned int siz;\n    T *data;\n\n\npublic:\n\n    ///constructor(size,filename,openmode)\n    Buffer(unsigned int s,const char* n, const char* m):File_ptr(n,m),siz(s)\n    {\n        data= new T[siz];\n       /* for(unsigned int i=0; i&lt;siz; ++i)\n        {\n            data[i]=0;\n        }; */\n    };\n\n    ///destructor\n    ~Buffer()\n    {\n        delete[] data;\n    }\n\n    ///operator[]\n    T&amp; operator[](unsigned int i)\n    {\n        if(i&gt;siz-1)\n        {\n            unsigned int newsize=siz*2;\n            T* tmp=new T[newsize];\n            for(unsigned int j = 0; j &lt; siz; j++)\n            {\n                tmp[j] = data[j];\n            }\n            siz=newsize;\n            delete[] data;\n            data=tmp;\n        };\n        return data[i];\n\n};     \n</code></pre>\n\n<p>Any idea why I get the error?\nThanks in advance!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 2, "creation_date": 1463602509, "post_id": 37309265, "comment_id": 62139677, "body": "Why are you <code>return</code>ing some trash from the loop??? In order to <i>learn C++</i>, you first need to actually <i>learn</i> how <code>while</code> loops work and much more. After you learn this, try dealing with these problems."}, {"owner": {"reputation": 30577, "user_id": 476496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85197b0087c5bee323d2690c977878f8?s=128&d=identicon&r=PG", "display_name": "Vincent Savard", "link": "https://stackoverflow.com/users/476496/vincent-savard"}, "edited": false, "score": 4, "creation_date": 1463602540, "post_id": 37309265, "comment_id": 62139695, "body": "What do you think the <code>return</code> statement does?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1463602680, "post_id": 37309265, "comment_id": 62139767, "body": "&quot;I&#39;m just going around in circles&quot;. Because of the <code>return</code> statement, you&#39;re not. :)"}, {"owner": {"reputation": 43, "user_id": 6340758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d349bc0ac95d9ce6d7e9fb738705f8a9?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Haigh", "link": "https://stackoverflow.com/users/6340758/edward-haigh"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1463602909, "post_id": 37309265, "comment_id": 62139891, "body": "@ForceBru, because if I don&#39;t apply what I learn immediately to something then I won&#39;t remember it. Certainly I will remember this more than by reading about while loops in a book. Thank you for both of your responses, I think I understand the return function now, I was overcomplicating it."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1463603025, "post_id": 37309265, "comment_id": 62139949, "body": "@EdwardHaigh <i>Overcomplicating</i> hits it right twice. <code>return sum_3, i;</code> introducing the <i>comma operator</i> is quite weird."}, {"owner": {"reputation": 3739, "user_id": 1268048, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/naEf9.jpg?s=128&g=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/1268048/phil"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1463603125, "post_id": 37309265, "comment_id": 62139991, "body": "@ForceBru I really don&#39;t understand why you couldn&#39;t give a constructive response instead of belittling the OP.  After all, I believe everyone has to start learning somewhere, and if when someone asks for help they get insults that&#39;s not very encouraging."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1463603804, "post_id": 37309265, "comment_id": 62140307, "body": "Debugger.  Use a debugger.  With a debugger, you would spot this in less time it took to write this post, publish it and wait for an answer."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "reply_to_user": {"reputation": 3739, "user_id": 1268048, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/naEf9.jpg?s=128&g=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/1268048/phil"}, "edited": false, "score": 0, "creation_date": 1463665811, "post_id": 37309265, "comment_id": 62169714, "body": "@Phil, where did you see insults here? OP should just first <i>learn the basics of C++</i> and only then he should try writing this code."}], "answers": [{"comments": [{"owner": {"reputation": 19090, "user_id": 138772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32504cb73cc05b26335a43219fff3a79?s=128&d=identicon&r=PG", "display_name": "JAB", "link": "https://stackoverflow.com/users/138772/jab"}, "edited": false, "score": 1, "creation_date": 1463602756, "post_id": 37309319, "comment_id": 62139811, "body": "Though in C++11 and with the proper return type for the function, <code>return {sum_3, i};</code> would properly return a constructed object holding those two values (and would result in a compilation error otherwise)."}, {"owner": {"reputation": 43, "user_id": 6340758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d349bc0ac95d9ce6d7e9fb738705f8a9?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Haigh", "link": "https://stackoverflow.com/users/6340758/edward-haigh"}, "edited": false, "score": 0, "creation_date": 1463602770, "post_id": 37309319, "comment_id": 62139816, "body": "I completely misunderstood what &#39;return&#39; did. I thought it returned the value from the while loop into the variables. Am I right in saying that return should only be used once in the main() function then?"}, {"owner": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "edited": false, "score": 0, "creation_date": 1463602795, "post_id": 37309319, "comment_id": 62139836, "body": "And judging by the question text, the while condition should probably be <code>while(i * 3 &lt; 1000)</code>."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "reply_to_user": {"reputation": 43, "user_id": 6340758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d349bc0ac95d9ce6d7e9fb738705f8a9?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Haigh", "link": "https://stackoverflow.com/users/6340758/edward-haigh"}, "edited": false, "score": 1, "creation_date": 1463603094, "post_id": 37309319, "comment_id": 62139977, "body": "@EdwardHaigh Only use <code>return</code> when you have reached a point where you wish to leave the current function. You could use it early in main to test some condition: e.g. <code>if (sum_3 &gt; 10000) { cout &lt;&lt; &quot;sum_3 is too large. ending\\n&quot;; return 0; }</code>"}], "tags": [], "owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "is_accepted": false, "score": 7, "last_activity_date": 1463604130, "last_edit_date": 1463604130, "creation_date": 1463602586, "answer_id": 37309319, "question_id": 37309265, "link": "https://stackoverflow.com/questions/37309265/why-does-this-basic-while-loop-written-in-c-not-work/37309319#37309319", "title": "Why does this basic while loop written in c++ not work?", "body": "<p>The <code>return</code> keyword leaves the current function, not just the current scope.</p>\n\n<pre><code>    return sum_3, i;\n</code></pre>\n\n<p>doesn't do what you think it does, either. You can only <code>return</code> a single object. The reason the line compiles is that C++ has a <code>,</code> operator which evaluates the expression on the left, discards the result, and then evaluates the expression on the right. So</p>\n\n<pre><code>    return sum_3, i;\n</code></pre>\n\n<p>simply returns <code>i</code>.</p>\n\n<p>Because the loop is in main, <code>return</code>ing also ends the program.</p>\n\n<p>Your code should probably just look like this:</p>\n\n<pre><code>while ( sum_3 &lt; 1000 ) {\n    sum_3 = sum_3 + (i * 3);\n    i++;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 392, "user_id": 5872887, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5_bX8s1yfyY/AAAAAAAAAAI/AAAAAAAAAUY/pUz2FxX24XI/photo.jpg?sz=128", "display_name": "Ronaldo Felipe", "link": "https://stackoverflow.com/users/5872887/ronaldo-felipe"}, "is_accepted": false, "score": 0, "last_activity_date": 1463602821, "creation_date": 1463602821, "answer_id": 37309370, "question_id": 37309265, "link": "https://stackoverflow.com/questions/37309265/why-does-this-basic-while-loop-written-in-c-not-work/37309370#37309370", "title": "Why does this basic while loop written in c++ not work?", "body": "<p>You should not return unless you want to get off your function, in this case is the main function.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main() {\n    int sum_3 = 0;\n    int i = 1;\n\n    while ( sum_3 &lt; 1000 ) {// I'd use a 'for' here, if I were you\n        sum_3 += (i * 3); //is the same for sum_3 = sum_3 + (i * 3);\n        i++;\n   }\n\n    std::cout &lt;&lt; sum_3 &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 172, "user_id": 6241837, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PsE2v.jpg?s=128&g=1", "display_name": "Benjamin Racette", "link": "https://stackoverflow.com/users/6241837/benjamin-racette"}, "is_accepted": false, "score": 0, "last_activity_date": 1463602834, "creation_date": 1463602834, "answer_id": 37309375, "question_id": 37309265, "link": "https://stackoverflow.com/questions/37309265/why-does-this-basic-while-loop-written-in-c-not-work/37309375#37309375", "title": "Why does this basic while loop written in c++ not work?", "body": "<p>What needs to be smaller than 1000? The total or the individual multiples of 3?</p>\n\n<p>If what you want is the total to not exceed 1000, then just remove the line \"return sum_3, i\" and you're good to go.</p>\n\n<p>If what you wanted was to sum all multiples of 3 that are also smaller than 1000 (but the total can exceed 1000) then you need to also change the while condition to \"(i*3)&lt;1000\" instead of \"sum_3&lt;1000\".</p>\n"}], "owner": {"reputation": 43, "user_id": 6340758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d349bc0ac95d9ce6d7e9fb738705f8a9?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Haigh", "link": "https://stackoverflow.com/users/6340758/edward-haigh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 3, "score": -8, "last_activity_date": 1463604130, "creation_date": 1463602414, "question_id": 37309265, "link": "https://stackoverflow.com/questions/37309265/why-does-this-basic-while-loop-written-in-c-not-work", "title": "Why does this basic while loop written in c++ not work?", "body": "<p>I am attempting to learn C++ by tackling the Project Euler challanges. I am currently stuck on the first project where my while loop does not work. I have looked at it for over half an hour now but just can't see any issues with it, even though it's incredibly basic. </p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main() {\n    int sum_3 = 0;\n    int i = 1;\n\n    while ( sum_3 &lt; 1000 ) {\n        sum_3 = sum_3 + (i * 3);\n        i++;\n        return sum_3, i;\n   }\n\n        std::cout &lt;&lt; sum_3 &lt;&lt; std::endl;\n        return 0;\n}\n</code></pre>\n\n<p>I am trying to sum every number which is a multiple of 3 but smaller than 1000. I have re-written the program, entered print statements to try and troubleshoot it, but I'm just going around in circles now.</p>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1463603780, "post_id": 37309226, "comment_id": 62140297, "body": "You did try <code>positional_options.add( &quot;to-list-B&quot;, -1 );</code>, right?"}, {"owner": {"reputation": 1658, "user_id": 1171783, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/uV3kB.jpg?s=128&g=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/1171783/julien"}, "reply_to_user": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1463604434, "post_id": 37309226, "comment_id": 62140640, "body": "It would work if both list options are on the command line, but if I omit <code>to-list-A</code> then everything goes to <code>B</code> (see my edit). Moreover the documentation says that two calls to <code>add</code> with the value <code>-1</code> should not work: <a href=\"http://www.boost.org/doc/libs/1_61_0/doc/html/boost/program_options/positional_opt_idp13499152.html#idp187622176-bb\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_61_0/doc/html/boost/program_options/&hellip;</a>"}], "owner": {"reputation": 1658, "user_id": 1171783, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/uV3kB.jpg?s=128&g=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/1171783/julien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 880, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1463604287, "creation_date": 1463602313, "last_edit_date": 1463604287, "question_id": 37309226, "link": "https://stackoverflow.com/questions/37309226/how-to-have-multiple-positional-options-with-boostprogram-options", "title": "How to have multiple positional options with boost::program_options", "body": "<p>I write a program receiving two list of files as arguments:</p>\n\n<pre><code>$ program --to-list-A a b c --to-list-B d e f g\n</code></pre>\n\n<p>I would like to allow other options to appear anywhere on the command line and to keep these files grouped in the last occurence of the list arguments\u00a0:</p>\n\n<pre><code>$ program --to-list-A a b c --to-list-B d e f --some-option g\n</code></pre>\n\n<p>Both command lines should produce a list <code>A</code> with <code>a</code>, <code>b</code> and <code>c</code> and a list <code>B</code> with <code>d</code>, <code>e</code>, <code>f</code> and <code>g</code>.</p>\n\n<p>Is this possible to achieve this with <code>boost::program_options</code>? So far I could not manage to add <code>g</code> to <code>B</code> in the second case. Here is the test code I use\u00a0:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#include &lt;boost/program_options.hpp&gt;\n\nint main( int argc, char** argv )\n{\n  boost::program_options::options_description command_line_options;\n\n  command_line_options.add_options()\n    ( \"some-option\", \"boolean option\" )\n    ( \"to-list-A\",\n      boost::program_options::value&lt; std::vector&lt; std::string &gt; &gt;()\n      -&gt;multitoken() )\n    ( \"to-list-B\",\n      boost::program_options::value&lt; std::vector&lt; std::string &gt; &gt;()\n      -&gt;multitoken() );\n\n  boost::program_options::positional_options_description positional_options;\n  positional_options.add( \"to-list-A\", -1 );\n\n  boost::program_options::variables_map arguments;\n  boost::program_options::store\n    ( boost::program_options::command_line_parser( argc, argv )\n      .options( command_line_options ).positional( positional_options ).run(),\n      arguments );\n\n  std::cout &lt;&lt; \"in A:\";\n\n  if ( arguments.count( \"to-list-A\" ) != 0 )\n    for ( const auto&amp; s\n            : arguments[ \"to-list-A\" ].as&lt; std::vector&lt; std::string &gt; &gt;() )\n      std::cout &lt;&lt; ' ' &lt;&lt; s;\n\n  std::cout &lt;&lt; '\\n';\n\n  std::cout &lt;&lt; \"in B:\";\n\n  if ( arguments.count( \"to-list-B\" ) != 0 )\n    for ( const auto&amp; s\n            : arguments[ \"to-list-B\" ].as&lt; std::vector&lt; std::string &gt; &gt;() )\n      std::cout &lt;&lt; ' ' &lt;&lt; s;\n\n  std::cout &lt;&lt; '\\n';\n\n  return 0;\n}\n</code></pre>\n\n<p><strong>Edit</strong>: I would like <code>to-list-A' to be implicit for the first files, i.e the following command line should place</code>a<code>,</code>b<code>and</code>c<code>in</code>A` too:</p>\n\n<pre><code>$ program a b c --to-list-B d e f --some-option g\n</code></pre>\n"}, {"tags": ["c++", "c++11", "compiler-errors"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1463602390, "post_id": 37309172, "comment_id": 62139620, "body": "Please show the full error message."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1463603450, "post_id": 37309172, "comment_id": 62140152, "body": "<code>using namespace std;</code> got you. Compiles just fine, well two signed/unsigned comparison warnings, without it."}, {"owner": {"reputation": 853, "user_id": 2506915, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6cbabe9a4b97888a4b666c88c50ad786?s=128&d=identicon&r=PG", "display_name": "Montaldo", "link": "https://stackoverflow.com/users/2506915/montaldo"}, "edited": false, "score": 0, "creation_date": 1463603935, "post_id": 37309172, "comment_id": 62140367, "body": "Just some notes. Don&#39;t use using namespace std, this is very error prone. Also use const std::string&amp; word. This is good practice and saves you a lot of ctor calls."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1463607943, "post_id": 37309914, "comment_id": 62142232, "body": "Zut. Forgot I&#39;d added #include&lt;string&gt; before removing the <code>using namespace std;</code>. Both changes were needed to build under VS 2015."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 2, "last_activity_date": 1463607130, "last_edit_date": 1495542706, "creation_date": 1463604767, "answer_id": 37309914, "question_id": 37309172, "link": "https://stackoverflow.com/questions/37309172/vc-error-no-operator-matches-these-operands-but-it-works-with-other-comp/37309914#37309914", "title": "VC++ error &quot;no operator &lt;&lt; matches these operands&quot;, but it works with other compilers", "body": "<blockquote>\n  <p>but from some reason it worked with barely any problems when running it with g++ -std=c++11 and an online compiler ...</p>\n</blockquote>\n\n<p>I'd suspect you've been missing to </p>\n\n<pre><code>#include &lt;string&gt;\n</code></pre>\n\n<p>while using <code>std::string</code> extensively in your code.</p>\n\n<p>Always include standard c++ headers corresponding to the classes/functions you are using in your code.</p>\n\n<p>Some compilers will just work with forward declarations of <code>std::string</code> in header files like <code>iostream</code>, others will actually include the <code>string</code> header.</p>\n\n<hr>\n\n<p>Also note: </p>\n\n<pre><code>using namespace std;\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/q/1452721/14065\">isn't such a good idea</a> in most cases. Better explicitly use the <code>std::</code> scope for what you meant to call.</p>\n"}], "owner": {"reputation": 103, "user_id": 5419963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c768d3da6caf65389259160751816dad?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/5419963/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 37309914, "answer_count": 1, "score": 2, "last_activity_date": 1463615181, "creation_date": 1463602113, "last_edit_date": 1463615181, "question_id": 37309172, "link": "https://stackoverflow.com/questions/37309172/vc-error-no-operator-matches-these-operands-but-it-works-with-other-comp", "title": "VC++ error &quot;no operator &lt;&lt; matches these operands&quot;, but it works with other compilers", "body": "<p>This program doesn't compile in Visual C++, but from some reason it worked with barely any problems when running it with g++ -std=c++11 and an online compiler(of course,when I comment the #include \"stdafx.h\").</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;istream&gt;\n#include &lt;fstream&gt;\n#include &lt;unordered_map&gt;\n#include &lt;map&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nclass Hashmap\n{\nstd::multimap&lt;char, string&gt; htmap;\n\npublic:\nvoid put(char key, const string value)\n{\n    pair&lt;char, string&gt; m(key, value);\n    this-&gt;htmap.insert(pair&lt;char, string&gt;(key, value));\n}\n\n\nint isIn(char c, vector&lt;char&gt; v)\n{\n    for (auto s : v)\n        if (c == s)\n            return 0;\n    return 1;\n}\n\nconst void get(char key, string word)\n{\n    int j = word.length();\n    vector&lt;char&gt; v;\n    vector&lt;char&gt; v2;\n    multimap&lt;char, string&gt;::const_iterator Values = this-&gt;htmap.find(key);\n    int Number = this-&gt;htmap.count(key);\n    for (int q = 0; q &lt; Number; q++)\n    {\n        int j = word.length();\n        int ok = 1;\n        string a = Values-&gt;second;\n        for (int k = 0; k&lt; word.length(); k++)\n            v2.push_back(word[k]);\n        for (int i = 0; i&lt; a.length(); ++i)\n        {\n            if (isIn(a[i], v2) == 1)\n                ok = 0;\n        }\n        v.clear();\n        v2.clear();\n        if (ok == 1)\n        {\n            cout &lt;&lt; \"Word Found: \"&lt;&lt; Values-&gt;second &lt;&lt; endl; // Error Here\n        }\n        ++Values;\n    }\n}\nvoid find(const string word)\n{\n    string s;\n    int j = word.length();\n    for (int k = 0; k&lt;j; k++)\n    {\n        char c = word[k];\n        this-&gt;get(c, word);\n    }\n}\n};\n\nvoid read(Hashmap t)\n{\nstring key, value;\nifstream f(\"in.txt\");\nwhile (f &gt;&gt; key) // Error Here\n{\n    for (auto i : key)\n        t.put(i, key);\n}\nstring word;\ncout &lt;&lt; \"Word: \";\nstd::cin &gt;&gt; word; // Error Here\nt.find(word);\nf.close();\n}\n\nint main()\n{\n    Hashmap t;\n    string word;\n    read(t);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 5685, "user_id": 5240004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8eFV.jpg?s=128&g=1", "display_name": "theB", "link": "https://stackoverflow.com/users/5240004/theb"}, "edited": false, "score": 0, "creation_date": 1463602649, "post_id": 37309130, "comment_id": 62139749, "body": "You really should be checking the return values from <i>all</i> of those API calls to make sure that things are working."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1463602965, "post_id": 37309130, "comment_id": 62139918, "body": "Beyond the scanf error you do do error checking, you use TCHAR which is long obsolete, you use raw Win32 IO rather than C++ IO and write an uninitialized struct."}, {"owner": {"reputation": 15, "user_id": 5598716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5ae4598a833681031358683c2d29eb5?s=128&d=identicon&r=PG&f=1", "display_name": "VCib", "link": "https://stackoverflow.com/users/5598716/vcib"}, "edited": false, "score": 0, "creation_date": 1463603794, "post_id": 37309130, "comment_id": 62140305, "body": "I am supposed to be using raw Win32 methods whenever possible. I wouldn&#39;t be using these if I had a choice. Will add error checking."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5598716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5ae4598a833681031358683c2d29eb5?s=128&d=identicon&r=PG&f=1", "display_name": "VCib", "link": "https://stackoverflow.com/users/5598716/vcib"}, "edited": false, "score": 0, "creation_date": 1463602822, "post_id": 37309240, "comment_id": 62139848, "body": "Changed, added. Now reads: First-chance exception at 0x77D22312 (ntdll.dll) in SysLab4.exe: 0xC0000005: Access violation writing location 0xFEFEFF1E."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "reply_to_user": {"reputation": 15, "user_id": 5598716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5ae4598a833681031358683c2d29eb5?s=128&d=identicon&r=PG&f=1", "display_name": "VCib", "link": "https://stackoverflow.com/users/5598716/vcib"}, "edited": false, "score": 0, "creation_date": 1463603889, "post_id": 37309240, "comment_id": 62140340, "body": "Are you ignoring the compiler warnings or do you not have the Output window open?"}, {"owner": {"reputation": 15, "user_id": 5598716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5ae4598a833681031358683c2d29eb5?s=128&d=identicon&r=PG&f=1", "display_name": "VCib", "link": "https://stackoverflow.com/users/5598716/vcib"}, "edited": false, "score": 0, "creation_date": 1463606612, "post_id": 37309240, "comment_id": 62141684, "body": "Changed count to DWORD. Still getting access violations...the compiler only warns about signed/unsigned mismatch in lines 105 and 121, and conversion to SHORT in 122. <a href=\"http://pastebin.com/yTYeav8d\" rel=\"nofollow noreferrer\">Full code here</a>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1463608140, "post_id": 37309240, "comment_id": 62142313, "body": "VCib, at this point you&#39;re moving the goal post. Recommend a making a new question with <a href=\"http://stackoverflow.com/help/mcve\">a minimal complete and verifiable example</a>. That or fire up the debugger that came with your development environment and <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">start debugging</a>."}], "tags": [], "owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "is_accepted": false, "score": 0, "last_activity_date": 1463613293, "last_edit_date": 1463613293, "creation_date": 1463602347, "answer_id": 37309240, "question_id": 37309130, "link": "https://stackoverflow.com/questions/37309130/access-violation-when-writing-struct-to-file/37309240#37309240", "title": "Access violation when writing struct to file", "body": "<p>This line</p>\n\n<pre><code>cout &lt;&lt; \"Book count: \";  wscanf_s(L\"%i\", count);\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>cout &lt;&lt; \"Book count: \";  wscanf_s(L\"%i\", &amp;count);\n</code></pre>\n\n<p>You should probably also check that the file opened:</p>\n\n<pre><code>HANDLE hFile = CreateFile(_TEXT(\"C:\\\\Students\\\\book.dat\"), GENERIC_WRITE, 0, NULL, OPEN_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL);\nif (hFile == INVALID_HANDLE_VALUE) {\n    cerr &lt;&lt; \"Unable to open file\\n\";\n    exit(1);\n}\n</code></pre>\n\n<p>--- Edit ---</p>\n\n<p>With your code as-is Visual Studio gives the following warnings:</p>\n\n<blockquote>\n  <p>c:\\dev\\test\\test.cpp(14): warning C4477: 'wscanf_s' : format string '%i' requires an argument of type 'int *', but variadic argument 1 has type 'SHORT *'</p>\n  \n  <p>c:\\dev\\test\\test.cpp(14): note: consider using '%hi' in the format string</p>\n</blockquote>\n\n<p>What this means is that</p>\n\n<pre><code>cout &lt;&lt; \"Book count: \";  wscanf_s(L\"%i\", &amp;count);\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>cout &lt;&lt; \"Book count: \";  wscanf_s(L\"%hi\", &amp;count);\n</code></pre>\n\n<p>or you should make count a DWORD.</p>\n"}, {"tags": [], "owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "is_accepted": false, "score": 0, "last_activity_date": 1463619404, "creation_date": 1463619404, "answer_id": 37312280, "question_id": 37309130, "link": "https://stackoverflow.com/questions/37309130/access-violation-when-writing-struct-to-file/37312280#37312280", "title": "Access violation when writing struct to file", "body": "<p>The access violation is because you're calling <code>FindClose</code> on a handle opened with <code>CreateFile</code>. <code>FindClose</code> is only for closing handles obtained via <code>FindFirstFile</code>.</p>\n\n<p>You need to call <code>CloseHandle</code> instead.</p>\n"}], "owner": {"reputation": 15, "user_id": 5598716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5ae4598a833681031358683c2d29eb5?s=128&d=identicon&r=PG&f=1", "display_name": "VCib", "link": "https://stackoverflow.com/users/5598716/vcib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1463619404, "creation_date": 1463601958, "question_id": 37309130, "link": "https://stackoverflow.com/questions/37309130/access-violation-when-writing-struct-to-file", "title": "Access violation when writing struct to file", "body": "<p>I have a \"book\" struct containing the author, name and count of available books.</p>\n\n<pre><code>struct book {\n    TCHAR author[32];\n    TCHAR name[32];\n    SHORT count;\n    void insert() {\n        cout &lt;&lt; \"Book author: \"; wscanf_s(L\"%s\", author, _countof(author));\n        cout &lt;&lt; \"Book name: \"; wscanf_s(L\"%s\", name, _countof(name));\n        cout &lt;&lt; \"Book count: \";  wscanf_s(L\"%i\", count);\n    }\n    void get() {\n        cout &lt;&lt; \"Book info: \" &lt;&lt; endl;\n        wprintf(L\"\\nAuthor - %s\", author);\n        wprintf(L\"\\nName - %s\", name);\n        wprintf(L\"\\nCount - %i\", count);\n        cout &lt;&lt; endl;\n    }\n};\n</code></pre>\n\n<p>The task has me make a DAT file, and then add \"books\" inside it.</p>\n\n<pre><code>HANDLE hFile = CreateFile(_TEXT(\"C:\\\\Students\\\\book.dat\"), GENERIC_WRITE, 0, NULL, OPEN_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL);\nSetFilePointer(hFile, 0, 0, FILE_END);\nbook newBook;\nDWORD bytesWritten;\nnewBook.insert();\nWriteFile(hFile, &amp;newBook, sizeof(book), &amp;bytesWritten, NULL);\nFindClose(hFile);\n</code></pre>\n\n<p>However, whenever I do this, I get an error:</p>\n\n<blockquote>\n  <p>Access violation writing location 0xFFFFFEFE.</p>\n</blockquote>\n\n<p>What am I doing wrong here?</p>\n"}, {"tags": ["c++", "c++11", "vector", "stdvector"], "comments": [{"owner": {"reputation": 4646, "user_id": 168683, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6c60cfdf4426b0067801bff11e836430?s=128&d=identicon&r=PG&f=1", "display_name": "Fozi", "link": "https://stackoverflow.com/users/168683/fozi"}, "edited": false, "score": 0, "creation_date": 1463602293, "post_id": 37309103, "comment_id": 62139569, "body": "I don&#39;t see your copy constructor. It should be <code>Struct(const Struct &amp;other)</code>."}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "reply_to_user": {"reputation": 4646, "user_id": 168683, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6c60cfdf4426b0067801bff11e836430?s=128&d=identicon&r=PG&f=1", "display_name": "Fozi", "link": "https://stackoverflow.com/users/168683/fozi"}, "edited": false, "score": 0, "creation_date": 1463602338, "post_id": 37309103, "comment_id": 62139592, "body": "@Fozi: Good point. I assume I&#39;d get the default one, but it was before I added my 2 arguments constructor. Let me check."}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "reply_to_user": {"reputation": 4646, "user_id": 168683, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6c60cfdf4426b0067801bff11e836430?s=128&d=identicon&r=PG&f=1", "display_name": "Fozi", "link": "https://stackoverflow.com/users/168683/fozi"}, "edited": false, "score": 0, "creation_date": 1463602438, "post_id": 37309103, "comment_id": 62139640, "body": "@Fozi: nope, that did not help."}, {"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 2, "creation_date": 1463604681, "post_id": 37309103, "comment_id": 62140752, "body": "Deleting a function doesn&#39;t remove it from overload resolution. So naturally calling a deleted function results in an error. Or is your question why you can&#39;t copy something that isn&#39;t copyable?"}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "reply_to_user": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1463604846, "post_id": 37309103, "comment_id": 62140826, "body": "@sleeptightpupper: the question must be clear enough since the others get it."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1463609542, "post_id": 37309103, "comment_id": 62142839, "body": "It doesn&#39;t make a whole lot of sense to have a class that is copy-constructable but not copy-assignable (is it copyable or not?)..."}, {"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 1, "creation_date": 1463609732, "post_id": 37309103, "comment_id": 62142903, "body": "@ChrisDodd: Seems perfectly reasonable to me. Copy-construction just means &quot;I will copy the other thing and then exist&quot;, copy-assignment is &quot;I will become the other thing&quot;. Consider an immutable property-bag class."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "reply_to_user": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 0, "creation_date": 1463611191, "post_id": 37309103, "comment_id": 62143378, "body": "@GManNickG: No, copy-assignment is &quot;I will copy this other thing, replacing my previous state&quot;.  An immutable object is just <code>const</code> -- independent of any constructors or assignment operators.  Of course, C++ has no good way of expressing &quot;all instances of this class should be const&quot;, but it&#39;s not that clear to me that makes a lot of sense either.  &quot;I will become this other thing&quot; is move construction/assignment,"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 1, "creation_date": 1463611701, "post_id": 37309103, "comment_id": 62143509, "body": "@ChrisDodd You just classified all lambdas as making no sense :)"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1463611858, "post_id": 37309103, "comment_id": 62143550, "body": "@M.M Assuming that you mean destroy + recreate in place, that doesn&#39;t work with <code>const</code>-qualified things (see [basic.life]/8)."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1463612294, "post_id": 37309103, "comment_id": 62143686, "body": "@T.C.: well yes, the way lambdas are defined in the C++ standard is fairly non-sensical, and the deleted copy assignment operator is just one part of that."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1463623584, "post_id": 37309103, "comment_id": 62146408, "body": "@T.C. OK. So the workaround has to be not using <code>const</code> members in the first place then."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1463603507, "post_id": 37309410, "comment_id": 62140177, "body": "more likely to take <code>rhs</code> by const reference (and have separate move-assignment operator)"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1463603665, "post_id": 37309410, "comment_id": 62140251, "body": "I don&#39;t think &quot;allocate&quot; and &quot;room&quot; are the correct words here. It&#39;s more like &quot;construct enough targets&quot;."}, {"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1463604218, "post_id": 37309410, "comment_id": 62140516, "body": "This example is overly simplified and doesn&#39;t even use the allocator, making it a non-sequitor."}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "edited": false, "score": 1, "creation_date": 1463604802, "post_id": 37309410, "comment_id": 62140810, "body": "Moot point. Re-allocating the memory and using placement new for items would also be linear complexity, and would not rely on assignment. In fact, I&#39;m not even sure re-allocation would be strictly necessary."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "edited": false, "score": 0, "creation_date": 1463605121, "post_id": 37309410, "comment_id": 62140955, "body": "@VioletGiraffe I updated the answer a little.  The point is the standard mandates that <code>T</code> must be copyAssignable."}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "edited": false, "score": 0, "creation_date": 1463607473, "post_id": 37309410, "comment_id": 62142060, "body": "So does it specifically say that <code>T</code> must only be CopyAssignable for vector assignment to work, but not in order to construct the vector and insert elements?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "edited": false, "score": 0, "creation_date": 1463608322, "post_id": 37309410, "comment_id": 62142392, "body": "@VioletGiraffe It says it has to be CopyInsertable and CopyAssignable."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 3, "last_activity_date": 1463604832, "last_edit_date": 1463604832, "creation_date": 1463602916, "answer_id": 37309410, "question_id": 37309103, "link": "https://stackoverflow.com/questions/37309103/why-is-it-impossible-to-assign-to-a-vector-of-objects-that-themselves-lack-copy/37309410#37309410", "title": "Why is it impossible to assign to a vector of objects that themselves lack copy operator?", "body": "<p>A <code>std::vector</code> is a allocator-aware container.  If we look at the spec for that(table 99) we have <code>a = t</code> where <code>a</code> is a non-const lvalue and <code>t</code> is a lvalue or const rvalue and it requires</p>\n\n<blockquote>\n  <p>T is CopyInsertable into X and <strong>CopyAssignable</strong>. post: a == t</p>\n</blockquote>\n\n<p><sup>Emphasis mine</sup></p>\n\n<p>Where <code>T</code> is the <code>value_type</code> of <code>X</code>(the container).  It also states that the operation is linear.  Since <code>T</code> needs to be <a href=\"http://en.cppreference.com/w/cpp/concept/CopyAssignable\" rel=\"nofollow\">CopyAssignable</a> and <code>Struct</code> is not CopyAssignable it is not required to work.</p>\n\n<p>This implies that the assignment operation would look something like:</p>\n\n<pre><code>std::vector&lt;T&gt;&amp; operator=(const std::vector&lt;T&gt;&amp; rhs)\n{\n    // allocate enough room for data if needed\n    for (std::size_t i = 0; i &lt; rhs.size(); ++i)\n        data[i] = rhs.data[i];\n    return *this;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "is_accepted": false, "score": 0, "last_activity_date": 1463610121, "creation_date": 1463610121, "answer_id": 37311053, "question_id": 37309103, "link": "https://stackoverflow.com/questions/37309103/why-is-it-impossible-to-assign-to-a-vector-of-objects-that-themselves-lack-copy/37311053#37311053", "title": "Why is it impossible to assign to a vector of objects that themselves lack copy operator?", "body": "<p>You may find this function informative, from libc++. In particular, note the call to <code>std::copy</code>.</p>\n\n<pre><code>template &lt;class _Tp, class _Allocator&gt;\ntemplate &lt;class _ForwardIterator&gt;\ntypename enable_if\n&lt;\n    __is_forward_iterator&lt;_ForwardIterator&gt;::value &amp;&amp;\n    is_constructible&lt;\n       _Tp,\n       typename iterator_traits&lt;_ForwardIterator&gt;::reference&gt;::value,\n    void\n&gt;::type\nvector&lt;_Tp, _Allocator&gt;::assign(_ForwardIterator __first, _ForwardIterator __last)\n{\n    size_type __new_size = static_cast&lt;size_type&gt;(_VSTD::distance(__first, __last));\n    if (__new_size &lt;= capacity())\n    {\n        _ForwardIterator __mid = __last;\n        bool __growing = false;\n        if (__new_size &gt; size())\n        {\n            __growing = true;\n            __mid =  __first;\n            _VSTD::advance(__mid, size());\n        }\n        pointer __m = _VSTD::copy(__first, __mid, this-&gt;__begin_);\n        if (__growing)\n            __construct_at_end(__mid, __last, __new_size - size());\n        else\n            this-&gt;__destruct_at_end(__m);\n    }\n    else\n    {\n        deallocate();\n        allocate(__recommend(__new_size));\n        __construct_at_end(__first, __last, __new_size);\n    }\n}\n</code></pre>\n\n<p><code>operator =</code> just calls <code>assign(r.begin(), r.end())</code> after fixing up the allocator if they differ.</p>\n"}, {"comments": [{"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "edited": false, "score": 0, "creation_date": 1463635296, "post_id": 37312987, "comment_id": 62149314, "body": "The first answer that actually answers my question, and makes sense. Thank you!  &quot;Reducing allocations/deallocations is one of the most important optimizations that exist today.&quot; - I shall remember that."}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "edited": false, "score": 0, "creation_date": 1463635394, "post_id": 37312987, "comment_id": 62149349, "body": "Somehow I did not think of copying it the way you suggested. But I did think about this, though, and it works: <code>v2.swap(std::vector&lt;Struct&gt;(v1));</code>"}, {"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1463671270, "post_id": 37312987, "comment_id": 62174205, "body": "why not <code>v2.clear(); v2.insert(v2.begin(), v1.begin(), v1.end());</code> to safe on the conditional logic inside <code>push_back()</code>?"}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 2, "creation_date": 1463673230, "post_id": 37312987, "comment_id": 62175727, "body": "@TemplateRex:  <code>vector&lt;T&gt;::insert</code> requires <code>T</code> to be MoveAssignable (and in this particular example, CopyAssignable as well), which <code>Struct</code> is not."}, {"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1463676673, "post_id": 37312987, "comment_id": 62177843, "body": "Hm, that seems like a gap in the vector interface. I find it surprising that there is no ranged in-place construct member (apart from the constructor). Do you know of any proposals on this?"}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1463679152, "post_id": 37312987, "comment_id": 62179138, "body": "@TemplateRex:  I am not aware of any proposals in this area at the moment.  I question that such a proposal would be successful.   In the no-reallocation case, <code>vector::insert</code> must &quot;make a hole&quot; to put the new element in.  This &quot;hole&quot; is a constructed but moved from <code>value_type</code>.  In the process of making this hole, <code>value_type</code> will be move assigned (say from the &quot;hole&quot; to v[hole+1]).  This is true before we even start to talk about how to fill in the hole with the newly inserted element(s)."}, {"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1463680006, "post_id": 37312987, "comment_id": 62179635, "body": "I was thinking of bypasing <code>insert</code> altogether with a member <code>construct(first, last)</code>, similar to the ranged  <code>assign</code> member. It would simply call the allocator::construct in a loop, with a single capacity check upfront."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1463687070, "post_id": 37312987, "comment_id": 62183491, "body": "@TemplateRex:  This would also be easy to write yourself as a namespace scope function (using <code>clear</code>, <code>distance</code>, <code>reserve</code>, and <code>push_back</code>)."}, {"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1463689130, "post_id": 37312987, "comment_id": 62184574, "body": "Sure, but <code>push_back</code> will still have per-element conditional logic to check for within-capacity (branch prediction has its limits). A class-member could bypass that and do <code>clear</code>, <code>distance</code> and then a loop doing in-place construction (through the allocator&#39;s <code>construct</code>). I think it would be nice if every <code>vector</code> member that works on single elements (such as <code>push_back</code>) had a ranged-counterpart with the same type requirements that could amortize all the allocation overhead and eliminate duplicated conditional logic. AFAICS, there is no such member for <code>push_back</code>."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1463690278, "post_id": 37312987, "comment_id": 62185141, "body": "A paper with timing comparisons would be interesting to read."}], "tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": true, "score": 5, "last_activity_date": 1463667534, "last_edit_date": 1463667534, "creation_date": 1463624987, "answer_id": 37312987, "question_id": 37309103, "link": "https://stackoverflow.com/questions/37309103/why-is-it-impossible-to-assign-to-a-vector-of-objects-that-themselves-lack-copy/37312987#37312987", "title": "Why is it impossible to assign to a vector of objects that themselves lack copy operator?", "body": "<blockquote>\n  <p>Is that some kind of an optimization to avoid re-allocating the vector's memory block?..</p>\n</blockquote>\n\n<p>Almost.  It is an optimization to avoid re-allocating whatever memory blocks might be present in <code>vector</code>'s <code>value_type</code>.  That is, it is a global assumption that assignment can be more efficient than destruction followed by copy construction.</p>\n\n<p>For example consider <code>vector&lt;string&gt;</code> assignment, for two equal sized <code>vector</code>s, and a bunch of equal sized <code>string</code>s in each spot in the <code>vector</code>:</p>\n\n<pre><code>v2 = v1;\n</code></pre>\n\n<p>All this operation has to do is <code>memcpy</code> each <code>string</code>.  No allocations at all.  Reducing allocations/deallocations is one of the most important optimizations that exist today.</p>\n\n<p>However, all is not lost for your <code>Struct</code>.  What you want to do is instruct the <code>vector</code> that you do not wish to assign your <code>Struct</code>s, but instead destruct them, and then copy construct them from <code>v1</code>.  The syntax for doing this is:</p>\n\n<pre><code>v2.clear();\nfor (const auto&amp; x : v1)\n    v2.push_back(x);\n</code></pre>\n\n<p>As noted in the comments below, you can also copy construct <code>v1</code>,  and then <code>swap</code> with the copy.  You either need to create a temporary local copy of <code>v1</code>, or you need to use <code>v1</code> on the \"lhs\" of member swap:</p>\n\n<pre><code>std::vector&lt;Struct&gt;(v1).swap(v2);\n</code></pre>\n\n<p>I personally find this hard to read.  In C++11/14 I prefer this alternative which involves move assignment:</p>\n\n<pre><code>v2 = std::vector&lt;Struct&gt;(v1);\n</code></pre>\n\n<p>These alternatives are easier on the eyes.  But the first alternative, using <code>clear()</code> and <code>push_back</code> is going to be the most efficient on average.  This is because the first alternative is the only one that has a chance of reusing <code>capacity()</code> in <code>v2</code>.  The other two <em>always</em> recreate new <code>capacity()</code> in the copy of <code>v1</code> and throw away <code>v2</code>'s existing <code>capacity()</code>.</p>\n"}], "owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1229, "favorite_count": 1, "accepted_answer_id": 37312987, "answer_count": 3, "score": 12, "last_activity_date": 1495283584, "creation_date": 1463601875, "last_edit_date": 1495283584, "question_id": 37309103, "link": "https://stackoverflow.com/questions/37309103/why-is-it-impossible-to-assign-to-a-vector-of-objects-that-themselves-lack-copy", "title": "Why is it impossible to assign to a vector of objects that themselves lack copy operator?", "body": "<p>I have a vector of structures that are copy-constructible, but non-assignable:</p>\n\n<pre><code>struct Struct\n{\n    inline Struct(const std::string&amp; text, int n) : _text(text), _n(n) {}\n    inline Struct(const Struct&amp; other) : _text(other._text), _n(other._n) {}\n\n    const std::string _text;\n    const int _n;\n\n    Struct&amp; operator=(const Struct&amp;) = delete;\n};\n</code></pre>\n\n<p>It all worked fine. In fact, I could even pass the <code>std::vector&lt;Struct&gt;</code> around by value as a return value of a function. And yet, this fails:</p>\n\n<pre><code>std::vector&lt;TextFragment&gt; v1, v2;\nv2 = v1;\n</code></pre>\n\n<p>The error, of course, is:</p>\n\n<blockquote>\n  <p>error: C2280: 'Struct &amp;Struct ::operator =(const Struct &amp;)' :\n  attempting to reference a deleted function</p>\n</blockquote>\n\n<p>I don't understand why it tries to invoke that. Is that some kind of an optimization to avoid re-allocating the vector's memory block?..</p>\n"}, {"tags": ["c++", "mfc"], "answers": [{"tags": [], "owner": {"reputation": 3651, "user_id": 383779, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/363c7fb07b9e121acdb8c40115b94e34?s=128&d=identicon&r=PG", "display_name": "sergiol", "link": "https://stackoverflow.com/users/383779/sergiol"}, "is_accepted": false, "score": 1, "last_activity_date": 1463612570, "last_edit_date": 1495540350, "creation_date": 1463612570, "answer_id": 37311433, "question_id": 37309042, "link": "https://stackoverflow.com/questions/37309042/remove-untitled-from-main-frame-window-caption/37311433#37311433", "title": "Remove &quot;Untitled - &quot; from main frame window caption", "body": "<p>From my own answer on <a href=\"https://stackoverflow.com/a/35495606/383779\">https://stackoverflow.com/a/35495606/383779</a></p>\n\n<p>I had a similar problem in the past. The cause of main window's title text changing back is the function <a href=\"https://msdn.microsoft.com/en-us/library/cc665641.aspx\" rel=\"nofollow noreferrer\">CFrameWndEx::OnUpdateFrameTitle</a>. As it is virtual, you can override it on your own derived class to have the behaviour you want. It is a solution that worked for me.</p>\n"}, {"tags": [], "owner": {"reputation": 13842, "user_id": 2790621, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/b7bSs.jpg?s=128&g=1", "display_name": "xMRi", "link": "https://stackoverflow.com/users/2790621/xmri"}, "is_accepted": true, "score": 2, "last_activity_date": 1463644789, "last_edit_date": 1463644789, "creation_date": 1463644612, "answer_id": 37317202, "question_id": 37309042, "link": "https://stackoverflow.com/questions/37309042/remove-untitled-from-main-frame-window-caption/37317202#37317202", "title": "Remove &quot;Untitled - &quot; from main frame window caption", "body": "<p><code>OnCreate</code> is simply too late. You have to modify the style before the window is created. Just remove <code>FWS_ADDTOTITLE</code> in <code>PreCreateWindow</code>.</p>\n\n<p>This is fairly well documented <a href=\"https://msdn.microsoft.com/en-us/library/x07xt611.aspx\" rel=\"nofollow\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7933247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db8711cb09955adb80c45bba63cf8273?s=128&d=identicon&r=PG&f=1", "display_name": "Runner", "link": "https://stackoverflow.com/users/7933247/runner"}, "is_accepted": false, "score": 1, "last_activity_date": 1615841293, "creation_date": 1615841293, "answer_id": 66645439, "question_id": 37309042, "link": "https://stackoverflow.com/questions/37309042/remove-untitled-from-main-frame-window-caption/66645439#66645439", "title": "Remove &quot;Untitled - &quot; from main frame window caption", "body": "<p>I'm not sure if this is too late but you have a typo in your question</p>\n<pre><code>lpCreateStruct-&gt;cx &amp;= ~FWS_ADDTOTITLE;\n</code></pre>\n<p>That should be</p>\n<pre><code>lpCreateStruct-&gt;style &amp;= ~FWS_ADDTOTITLE;\n</code></pre>\n<p>And you need to add it in the PreCreateWindow function not the OnCreate function.</p>\n"}], "owner": {"reputation": 1105, "user_id": 320881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb54fab6422dafe7d7eb33508b5f85a1?s=128&d=identicon&r=PG", "display_name": "netcat", "link": "https://stackoverflow.com/users/320881/netcat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 867, "favorite_count": 0, "accepted_answer_id": 37317202, "answer_count": 3, "score": 3, "last_activity_date": 1615841293, "creation_date": 1463601595, "last_edit_date": 1463644676, "question_id": 37309042, "link": "https://stackoverflow.com/questions/37309042/remove-untitled-from-main-frame-window-caption", "title": "Remove &quot;Untitled - &quot; from main frame window caption", "body": "<p>I have an MFC document application where I want to remove the \"Untitled - \" from the caption.</p>\n\n<p>It way my understanding that I need to remove the 'AddToTitle' property from the window style, and then I can set the title, and the'untitled' string would not be added.</p>\n\n<p>I tried the following, but it does not work.</p>\n\n<pre><code>int CMainFrame::OnCreate(LPCREATESTRUCT lpCreateStruct)\n{\n ...\n\n    lpCreateStruct-&gt;cx &amp;= ~FWS_ADDTOTITLE;\n    this-&gt;SetTitle(L\"The New Title\");\n}\n</code></pre>\n\n<p>Anyone know how to remove 'Untitled' from the main window title?</p>\n\n<p>Thanks, <br> -Matt</p>\n"}, {"tags": ["c++", "opencv", "geometry", "least-squares"], "answers": [{"tags": [], "owner": {"reputation": 453, "user_id": 5128148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e9952b45bc2ee14566935d8d86eb02b?s=128&d=identicon&r=PG&f=1", "display_name": "LBerger", "link": "https://stackoverflow.com/users/5128148/lberger"}, "is_accepted": true, "score": 0, "last_activity_date": 1463846979, "creation_date": 1463846979, "answer_id": 37365248, "question_id": 37308917, "link": "https://stackoverflow.com/questions/37308917/least-square-for-circle-in-c/37365248#37365248", "title": "Least Square for Circle in c++", "body": "<p>If set of points is symetric best way is to sum x and y and you will find center and then calculate mean distance between center and set of point to have radius</p>\n"}, {"tags": [], "owner": {"reputation": 303, "user_id": 5655370, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/94afdc259800c3bb96f15fd1d42b1c94?s=128&d=identicon&r=PG&f=1", "display_name": "j.doe", "link": "https://stackoverflow.com/users/5655370/j-doe"}, "is_accepted": false, "score": 0, "last_activity_date": 1464035279, "last_edit_date": 1492085955, "creation_date": 1464035279, "answer_id": 37399971, "question_id": 37308917, "link": "https://stackoverflow.com/questions/37308917/least-square-for-circle-in-c/37399971#37399971", "title": "Least Square for Circle in c++", "body": "<p>This is a circle regression problem Im sure that you can ask <a href=\"https://math.stackexchange.com/\">https://math.stackexchange.com/</a></p>\n\n<p>Even there is an example this site</p>\n"}], "owner": {"reputation": 303, "user_id": 5655370, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/94afdc259800c3bb96f15fd1d42b1c94?s=128&d=identicon&r=PG&f=1", "display_name": "j.doe", "link": "https://stackoverflow.com/users/5655370/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 623, "favorite_count": 0, "accepted_answer_id": 37365248, "answer_count": 2, "score": 0, "last_activity_date": 1464035279, "creation_date": 1463601120, "last_edit_date": 1463605502, "question_id": 37308917, "link": "https://stackoverflow.com/questions/37308917/least-square-for-circle-in-c", "title": "Least Square for Circle in c++", "body": "<p><a href=\"https://i.stack.imgur.com/dPp5P.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dPp5P.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I should find this \u00e7ember equation and I wrote a four code for this, but they half code not completed (I cant complete it :()\nFirst of all I wrote a code for finding these black points coordinate :</p>\n\n<pre><code>  Mat img=imread(\"n.jpg\");\nMat thresh;\nthreshold(img,thresh,150,500,THRESH_BINARY_INV);\n//  int point[thresh.rows][thresh.cols];\nvector&lt;int&gt; x,y;\n    for(int i = 0; i &lt; thresh.rows; ++i) {\n        for(int j = 0; j &lt; thresh.cols; ++j) {\n            int b = int(thresh.at&lt;cv::Vec3b&gt;(i,j)[0]);//burada biz b g r yi k\u0131saca yazabilmek i\u00e7in tan\u0131mlad\u0131k\n            int g = int(thresh.at&lt;cv::Vec3b&gt;(i,j)[1]);\n            int r = int(thresh.at&lt;cv::Vec3b&gt;(i,j)[2]);\n        //cout&lt;&lt;b&lt;&lt;\" \"&lt;&lt;g&lt;&lt;\" \"&lt;&lt;r&lt;&lt;endl;\n    //  cout&lt;&lt;i&lt;&lt;\" \"&lt;&lt;j&lt;&lt;endl;\n        if(b==255&amp;&amp;g==255&amp;&amp;r==255)\n        {\n            x.push_back(i);\n            y.push_back(j);\n\n        cout&lt;&lt;i&lt;&lt;\"  \"&lt;&lt;j&lt;&lt;endl;\n    }\n                //cout&lt;&lt;b&lt;&lt;\"  \"&lt;&lt;g&lt;&lt;\"  \"&lt;&lt;r&lt;&lt;endl;\n    }\n\n}\n</code></pre>\n\n<p>And than \n1)I wrote a determinant code for finding circle with given 3 point </p>\n\n<pre><code>   float determinant(float arr[][3])\n{\n    float det=0.0;\n    int i;\n    for(i=0;i&lt;3;i++)\n      det = det + (arr[0][i]*(arr[1][(i+1)%3]*arr[2][(i+2)%3] - arr[1][(i+2)%3]*arr[2][(i+1)%3]));\n      return det;\n}\n\n\nint main()\n{\n    float matris1[3][3],matris2[3][3],matris3[3][3];\n    float x[3],y[3];//x1,x2,x3/y1,y2,y3\n    int i,j;\n\n    printf(\"x1 x2 ve x3 u giriniz\\n\");\n    scanf(\"%f%f%f\",&amp;x[0],&amp;x[1],&amp;x[2]);\n\n    printf(\"y1 y2 ve y3 u giriniz\\n\");\n    scanf(\"%f%f%f\",&amp;y[0],&amp;y[1],&amp;y[2]);\n    //matris1 i olu\u015fturma\n    for(i=0;i&lt;3;i++)\n    for(j=0;j&lt;3;j++)\n    if(j==0)\n    matris1[i][j]=pow(x[i],2)+pow(y[i],2);\n    else if(j==1)\n    matris1[i][j]=y[i];\n    else \n    matris1[i][j]=1;\n\n    //matris2 yi olu\u015fturma\n    for(i=0;i&lt;3;i++)\n    for(j=0;j&lt;3;j++)\n    if(j==0)\n    matris2[i][j]=x[i];\n    else if(j==1)\n    matris2[i][j]=y[i];\n    else \n    matris2[i][j]=1;\n\n    //matris3 yi olu\u015fturma\n    for(i=0;i&lt;3;i++)\n    for(j=0;j&lt;3;j++)\n    if(j==0)\n    matris3[i][j]=x[i];\n    else if(j==1)\n    matris3[i][j]=pow(x[i],2)+pow(y[i],2);\n    else \n    matris3[i][j]=1;\n\n    //matris1 i ve determinant\u0131n\u0131 yazd\u0131rma\n    for(i=0;i&lt;3;i++)\n    {\n    for(j=0;j&lt;3;j++)\n    {\n        printf(\"%.2f \",matris1[i][j]);\n    }\n    printf(\"\\n\");\n    }\n    printf(\"Determinanti1 =%.2f \\n\\n\",determinant(matris1));\n    for(i=0;i&lt;3;i++)\n    {\n    for(j=0;j&lt;3;j++)\n    {\n        printf(\"%.2f \",matris2[i][j]);\n    }\n    printf(\"\\n\");\n    }\n    printf(\"Determinanti2 =%.2f \\n\\n\",determinant(matris2));\n\n    //matris3 i ve determinant\u0131n\u0131 yazd\u0131rma\n    for(i=0;i&lt;3;i++)\n    {\n    for(j=0;j&lt;3;j++)\n    {\n        printf(\"%.2f \",matris3[i][j]);\n    }\n    printf(\"\\n\");\n    }\n    printf(\"Determinanti3 =%.2f \\n\\n\",determinant(matris3));\n    float a,b;\n    a=determinant(matris1)/(2*determinant(matris2));\n    b=determinant(matris3)/(2*determinant(matris2));\n    printf(\"%.2f \",a);\n    printf(\"%.2f \",b);\n    float yaricap;\n\n\n    yaricap=sqrt((x[0]-a)*(x[0]-a)+(y[0]-b)*(y[0]-b));\n\n       printf(\"yaricap =%.2f \\n\\n\",yaricap);\n      }\n</code></pre>\n\n<p>But this code for 3 point but I have lots of point and I cant implemented \n2)This code for least squares:</p>\n\n<pre><code>typedef struct {\n  double x, y;\n} Point2;\nint CircleFit(int N, Point2 * P, double *pa, double *pb, double *pr)\n{\n\n  const int maxIterations = 256;\n  const double tolerance = 1e-06;\n\n  double a, b, r;\n\n\n  int i, j;\n  double xAvr = 0.0;\n  double yAvr = 0.0;\n\n  for (i = 0; i &lt; N; i++) {\n    xAvr += P[i].x;\n    yAvr += P[i].y;\n  }\n  xAvr /= N;\n  yAvr /= N;\n\n\n  a = xAvr;\n  b = yAvr;\n\n  for (j = 0; j &lt; maxIterations; j++) {\n\n    double a0 = a;\n    double b0 = b;\n\n\n    double LAvr = 0.0;\n    double LaAvr = 0.0;\n    double LbAvr = 0.0;\n\n    for (i = 0; i &lt; N; i++) {\n      double dx = P[i].x - a;\n      double dy = P[i].y - b;\n      double L = sqrt(dx * dx + dy * dy);\n      if (fabs(L) &gt; tolerance) {\n        LAvr += L;\n        LaAvr -= dx / L;\n        LbAvr -= dy / L;\n      }\n    }\n    LAvr /= N;\n    LaAvr /= N;\n    LbAvr /= N;\n\n    a = xAvr + LAvr * LaAvr;\n    b = yAvr + LAvr * LbAvr;\n    r = LAvr;\n\n    if (fabs(a - a0) &lt;= tolerance &amp;&amp; fabs(b - b0) &lt;= tolerance)\n      break;\n  }\n\n  *pa = a;\n  *pb = b;\n  *pr = r;\n\n  return (j &lt; maxIterations ? j : -1);\n}\n\nenum {\n  M_SHOW_CIRCLE, M_CIRCLE_INFO, M_RESET_POINTS, M_QUIT\n};\n</code></pre>\n\n<p>But I dont kow how I can combeine my points and this ??\nThanks your advanced</p>\n"}, {"tags": ["c++", "recursion", "return"], "comments": [{"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1463600314, "post_id": 37308418, "comment_id": 62138564, "body": "What if <code>pos &gt; inputString.length()</code> is true?"}, {"owner": {"reputation": 691, "user_id": 4860035, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/795f9dcc75abc394cba9a788fcd2db30?s=128&d=identicon&r=PG&f=1", "display_name": "Podo", "link": "https://stackoverflow.com/users/4860035/podo"}, "reply_to_user": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1463600419, "post_id": 37308418, "comment_id": 62138617, "body": "Then it would just return 0? Obviously, when I call the method I pass the pos parameter a 0. A string can&#39;t hold a length value of -1, can it?"}], "answers": [{"comments": [{"owner": {"reputation": 691, "user_id": 4860035, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/795f9dcc75abc394cba9a788fcd2db30?s=128&d=identicon&r=PG&f=1", "display_name": "Podo", "link": "https://stackoverflow.com/users/4860035/podo"}, "edited": false, "score": 0, "creation_date": 1463599773, "post_id": 37308481, "comment_id": 62138256, "body": "How does the recursion know that it&#39;s finished when the 0 is called? Any method I have encountered thus far ends with a return method, however this one has multiple returns. Do methods with an int return type end when the value 0 is returned?  Also, returns in recursions are additive? Can they be multiplicative or divisive as well?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1463599915, "post_id": 37308481, "comment_id": 62138334, "body": "<i>&quot;How does the recursion know that it&#39;s finished when the 0 is called?&quot;</i> That&#39;s done in the body of the 1st <code>if()</code> statement. It simply returns, without adding another recursive call."}, {"owner": {"reputation": 691, "user_id": 4860035, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/795f9dcc75abc394cba9a788fcd2db30?s=128&d=identicon&r=PG&f=1", "display_name": "Podo", "link": "https://stackoverflow.com/users/4860035/podo"}, "edited": false, "score": 0, "creation_date": 1463600324, "post_id": 37308481, "comment_id": 62138571, "body": "@tobi303 Aaaah. I didn&#39;t really think of it that way. The return 0 effectively comes outside of the recursion. The recursion only takes place as long as it&#39;s not equal to strlen. Once it is equal to it, it returns 0, causing it to not keep going in the recursion. The stacks then finish their thang, get down to the base case, and then 0 is added to whatever was returned within the recursion."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 691, "user_id": 4860035, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/795f9dcc75abc394cba9a788fcd2db30?s=128&d=identicon&r=PG&f=1", "display_name": "Podo", "link": "https://stackoverflow.com/users/4860035/podo"}, "edited": false, "score": 0, "creation_date": 1463600509, "post_id": 37308481, "comment_id": 62138669, "body": "@JeffreyDilley yes, take my example, the final sum for eg <code>calcSum(3)</code> you only get when the call to <code>calcSum(3)</code> finally returns, but to do so the recursion first has to stop which happens at the call <code>calcSum(1)</code>. Only when the function is not called again the stack will be unwinded"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 691, "user_id": 4860035, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/795f9dcc75abc394cba9a788fcd2db30?s=128&d=identicon&r=PG&f=1", "display_name": "Podo", "link": "https://stackoverflow.com/users/4860035/podo"}, "edited": false, "score": 0, "creation_date": 1463602654, "post_id": 37308481, "comment_id": 62139753, "body": "@JeffreyDilley May be my answer, which tries to break down what&#39;s happening, helps to make that behavior clearer."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1463603047, "post_id": 37308481, "comment_id": 62139960, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 definitely a better explanation while my answer could need an edit ...i am just too lazy at the moment ;)"}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": true, "score": 3, "last_activity_date": 1463600022, "last_edit_date": 1463600022, "creation_date": 1463599547, "answer_id": 37308481, "question_id": 37308418, "link": "https://stackoverflow.com/questions/37308418/how-are-return-results-computed-in-a-recursive-function/37308481#37308481", "title": "How are return results computed in a recursive function?", "body": "<p>The last return </p>\n\n<pre><code>return 0;\n</code></pre>\n\n<p>is only the last time the function is called during the recursion. This is needed to stop the recursion at some point. For the call before this last one one of the other return statements is executed, e.g:</p>\n\n<pre><code>return 1 + frequency(ch, inputString, pos + 1);\n</code></pre>\n\n<p>Thus the 0 is added up to the 1 and any previous results of the recursion.</p>\n\n<p>PS:\nAs long as the function return statement calls the function again the recursion continues. Only when the return simply returns something (without calling the fucntion again) the recursion stops.</p>\n\n<p>Here is a more simple example that calculates the sum of all integers up to N:</p>\n\n<pre><code>int calcSum(int N){\n\n    if ( N == 1 ) return 1;          // recursion stops here\n\n    return N + calcSum( N-1 );       // otherwise continue to add up \n\n}\n</code></pre>\n\n<p>Multiple return statements in one function are not special to recursion. The function just returns on the first return it encounters. </p>\n"}, {"comments": [{"owner": {"reputation": 691, "user_id": 4860035, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/795f9dcc75abc394cba9a788fcd2db30?s=128&d=identicon&r=PG&f=1", "display_name": "Podo", "link": "https://stackoverflow.com/users/4860035/podo"}, "edited": false, "score": 0, "creation_date": 1463599866, "post_id": 37308547, "comment_id": 62138306, "body": "So then yes, a return 0 effectively &quot;pops&quot; a stack, which is what ends it?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 691, "user_id": 4860035, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/795f9dcc75abc394cba9a788fcd2db30?s=128&d=identicon&r=PG&f=1", "display_name": "Podo", "link": "https://stackoverflow.com/users/4860035/podo"}, "edited": false, "score": 0, "creation_date": 1463599982, "post_id": 37308547, "comment_id": 62138371, "body": "@JeffreyDilley <i>&quot;which is what ends it?&quot;</i> When the stack is empty, no more popping can be done."}], "tags": [], "owner": {"reputation": 1485, "user_id": 2229960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/62652e679c426edd1a718d4dd9de6d66?s=128&d=identicon&r=PG", "display_name": "Eissa N.", "link": "https://stackoverflow.com/users/2229960/eissa-n"}, "is_accepted": false, "score": 0, "last_activity_date": 1463599791, "creation_date": 1463599791, "answer_id": 37308547, "question_id": 37308418, "link": "https://stackoverflow.com/questions/37308418/how-are-return-results-computed-in-a-recursive-function/37308547#37308547", "title": "How are return results computed in a recursive function?", "body": "<p>Think of a recursive calls as a stack of function calls. At some point it may hit <code>return 0;</code> This mean that one of the function calls on the stack is completed. Thus an element on the stack is popped. The function's <em>final</em> return happens when the stack is empty.</p>\n"}, {"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 2, "last_activity_date": 1463608852, "last_edit_date": 1463608852, "creation_date": 1463600848, "answer_id": 37308847, "question_id": 37308418, "link": "https://stackoverflow.com/questions/37308418/how-are-return-results-computed-in-a-recursive-function/37308847#37308847", "title": "How are return results computed in a recursive function?", "body": "<blockquote>\n  <p><strong>So, how does it know when to stop?</strong></p>\n</blockquote>\n\n<p>When no more recursive calls are added from a particular branch in the recursively called function it will stop, and the call stack will be cleared with returning values in the reverse order of the calls were issued (<a href=\"https://en.wikipedia.org/wiki/Stack_(C%2B%2B)\" rel=\"nofollow\">LIFO</a>). That's done here:</p>\n\n<pre><code>if (pos == inputString.length()) {\n    return 0;\n}\n</code></pre>\n\n<p>Any of the other branches call the function recursively and take a step down in the call stack:</p>\n\n<pre><code>if (inputString[pos] == ch) {\n    return 1 + frequency(ch, inputString, pos + 1);\n            // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ \n}\nelse {\n    return frequency(ch, inputString, pos+1);\n        // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ \n}\n</code></pre>\n\n<blockquote>\n  <ul>\n  <li>Does <code>return 0;</code> end any method with return type int?</li>\n  </ul>\n</blockquote>\n\n<p>Yes, and it will do for any return types that can be initialized with <code>0</code></p>\n\n<blockquote>\n  <ul>\n  <li>And if so, why does it still return the value of <code>2</code>, when the final return says return <code>0</code>?</li>\n  </ul>\n</blockquote>\n\n<p>Because the results of the recursive call results were accumulated on the stack:</p>\n\n<pre><code>   return 1 + frequency(ch, inputString, pos + 1);\n//          ^ the result of the operation will be saved on the stack when the call returns\n</code></pre>\n\n<p>... and you see the final result of the (first) recursive call in your driver function.</p>\n\n<hr>\n\n<p>BTW, the much cheaper implementation by means of performance and memory usage would be a simple loop. There aren't any drawbacks regarding the linear time behavior anyway:</p>\n\n<pre><code>int frequency(char ch, string input) {\n   int result = 0;\n   for(int pos = 0; pos &lt; input.size(); ++pos) {\n        if (input[pos] == ch) {\n           ++result;\n        }\n    }\n    return result;\n}\n</code></pre>\n"}], "owner": {"reputation": 691, "user_id": 4860035, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/795f9dcc75abc394cba9a788fcd2db30?s=128&d=identicon&r=PG&f=1", "display_name": "Podo", "link": "https://stackoverflow.com/users/4860035/podo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1937, "favorite_count": 0, "accepted_answer_id": 37308481, "answer_count": 3, "score": 1, "last_activity_date": 1463608852, "creation_date": 1463599346, "last_edit_date": 1463604084, "question_id": 37308418, "link": "https://stackoverflow.com/questions/37308418/how-are-return-results-computed-in-a-recursive-function", "title": "How are return results computed in a recursive function?", "body": "<p>I thought up to this point in time, that I understood how a return works, but once I got into the recursions, I suppose I'm a bit more lost than the originally thought.</p>\n\n<p>Suppose, I have a function for count, that how many times a char pops up in a string.</p>\n\n<pre><code>int frequency(char ch, string input, int pos) {\n   if (pos == inputString.length()) {\n      return 0;\n   }\n\n   if (inputString[pos] == ch) {\n      return 1 + frequency(ch, inputString, pos + 1);\n   }\n   else {\n      return frequency(ch, inputString, pos+1);\n   }\n}\n</code></pre>\n\n<p>If I were to pass to it, the string \"Jeff\" and looking for \"f\", it returns a value of <code>2</code>. </p>\n\n<p><strong>So, how does it know when to stop?</strong></p>\n\n<ul>\n<li><p>Does <code>return 0</code> end any method with return type <code>int</code>? </p></li>\n<li><p>And if so, why does it still return the value of <code>2</code>, when the <em>final</em> return says return <code>0</code>?   </p></li>\n</ul>\n"}, {"tags": ["c++", "constructor", "constants", "copy-constructor"], "comments": [{"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 1, "creation_date": 1463599507, "post_id": 37308386, "comment_id": 62138101, "body": "I don&#39;t see you using <code>i</code> ..."}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 1, "creation_date": 1463599716, "post_id": 37308386, "comment_id": 62138223, "body": "You insert a <code>...something...</code> blackbox in your example which makes it impossible to deduce anything. I doubt you get an error at <code>assign_image</code>. <code>r</code> is already a non-const reference."}, {"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 1, "creation_date": 1463599725, "post_id": 37308386, "comment_id": 62138228, "body": "are you sure? their source shows <code>dlib::assign_image()</code> takes a const <code>src_img</code> parameter. <a href=\"http://dlib.net/dlib/image_transforms/assign_image_abstract.h.html#assign_image\" rel=\"nofollow noreferrer\">dlib.net/dlib/image_transforms/&hellip;</a> or are you using some older version"}, {"owner": {"reputation": 1037, "user_id": 1973451, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6839e9e6ab24cdf1100ba930d86201b4?s=128&d=identicon&r=PG", "display_name": "volperossa", "link": "https://stackoverflow.com/users/1973451/volperossa"}, "edited": false, "score": 0, "creation_date": 1463600030, "post_id": 37308386, "comment_id": 62138401, "body": "I have corrected my question. sorry"}, {"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 2, "creation_date": 1463600151, "post_id": 37308386, "comment_id": 62138475, "body": "ok, so what about <code>const dlib::array2d&lt;dlib::rgb_pixel&gt;&amp; r = i.v;</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 28147, "user_id": 3857, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TOHg8.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/3857/andy"}, "reply_to_user": {"reputation": 1037, "user_id": 1973451, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6839e9e6ab24cdf1100ba930d86201b4?s=128&d=identicon&r=PG", "display_name": "volperossa", "link": "https://stackoverflow.com/users/1973451/volperossa"}, "edited": false, "score": 1, "creation_date": 1463600438, "post_id": 37308472, "comment_id": 62138633, "body": "@volperossa I haven&#39;t tried it, but I assume it would work with references as well. I can see it not working with instances though (since that would cause an object copy)."}], "tags": [], "owner": {"reputation": 28147, "user_id": 3857, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TOHg8.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/3857/andy"}, "is_accepted": true, "score": 5, "last_activity_date": 1463599530, "creation_date": 1463599530, "answer_id": 37308472, "question_id": 37308386, "link": "https://stackoverflow.com/questions/37308386/c-copy-constructor-that-uses-a-function-with-non-const-parameters/37308472#37308472", "title": "C++ : copy constructor that uses a function with non-const parameters", "body": "<p>Assuming that you can't change <code>dlib::assign_image()</code> to take a <code>const Immagine</code>, and you are sure that it won't actually change anything, then I would use a <a href=\"http://en.cppreference.com/w/cpp/language/const_cast\">const_cast</a> to remove the const-ness from <code>i</code>.</p>\n\n<p>In general it is best to not use <code>const_cast</code> if you have another option, but IMO <code>const_cast</code> is best used when calling legacy code that isn't const correct, but your code is.</p>\n"}], "owner": {"reputation": 1037, "user_id": 1973451, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6839e9e6ab24cdf1100ba930d86201b4?s=128&d=identicon&r=PG", "display_name": "volperossa", "link": "https://stackoverflow.com/users/1973451/volperossa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 37308472, "answer_count": 1, "score": 0, "last_activity_date": 1463599978, "creation_date": 1463599227, "last_edit_date": 1463599978, "question_id": 37308386, "link": "https://stackoverflow.com/questions/37308386/c-copy-constructor-that-uses-a-function-with-non-const-parameters", "title": "C++ : copy constructor that uses a function with non-const parameters", "body": "<p>I need to make a copy constructor for my class <code>Immagine</code> like this:</p>\n\n<pre><code>Immagine::Immagine(Immagine&amp; i)\n{\n  ...\n}\n</code></pre>\n\n<p>obviusly, when I try to call it, i have something like:\n <code>error: invalid initialization of non-const reference of type \u2018Immagine&amp;\u2019 from an rvalue of type \u2018Immagine\u2019</code> because I would declare it as:</p>\n\n<pre><code>Immagine::Immagine(const Immagine&amp; i)\n{\n  ...\n}\n</code></pre>\n\n<p>but I can't do it because, to iniatialize an Immagine member object, I use a function </p>\n\n<pre><code>Immagine::Immagine(const Immagine&amp; i)\n{\n  dlib::array2d&lt;dlib::rgb_pixel&gt;&amp; r=i.v; //v is a member of type dlib::array2d&lt;dlib::rgb_pixel&gt;\n  dlib::assign_image(this-&gt;dlib_immagine,r);\n}\n</code></pre>\n\n<p>function <code>dlib::assign_image(dst,src)</code> is a package-function and copies <code>src</code> into <code>dst</code> but is declared without <code>const</code> at <code>src</code> parameter,so if I declare <code>i</code> as <code>const</code> I get an error ... How can I solve this?</p>\n"}, {"tags": ["c++", "oop", "inheritance"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 4, "creation_date": 1463598616, "post_id": 37308184, "comment_id": 62137619, "body": "Rather use a <code>std::vector&lt;std::unique_ptr&lt;base&gt;&gt; a;</code>."}, {"owner": {"reputation": 25, "user_id": 6118711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d5lnm.jpg?s=128&g=1", "display_name": "braga", "link": "https://stackoverflow.com/users/6118711/braga"}, "edited": false, "score": 0, "creation_date": 1463598653, "post_id": 37308184, "comment_id": 62137638, "body": "I don&#39;t know how could i add to the array different classes and then, when i want to show their info, how could i know if they are first class or second class;"}, {"owner": {"reputation": 3370, "user_id": 2819650, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd1c2520461767f78a63e6cfb6431b1c?s=128&d=identicon&r=PG&f=1", "display_name": "coredump", "link": "https://stackoverflow.com/users/2819650/coredump"}, "edited": false, "score": 1, "creation_date": 1463598682, "post_id": 37308184, "comment_id": 62137653, "body": "You can&#39;t put different types in one array, but you can make an array of pointers to base type, i.e. <code>unique_ptr&lt;base&gt;</code>, then you can your function on each element. But you&#39;ll need to declare <code>getInfo()</code> inside bace class too."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1463598737, "post_id": 37308184, "comment_id": 62137690, "body": "@braga <i>&quot; how could i know if they are first class or second class;&quot;</i> You don&#39;t need to. That&#39;s what (virtual) polymorphism is for."}, {"owner": {"reputation": 25, "user_id": 6118711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d5lnm.jpg?s=128&g=1", "display_name": "braga", "link": "https://stackoverflow.com/users/6118711/braga"}, "edited": false, "score": 0, "creation_date": 1463598811, "post_id": 37308184, "comment_id": 62137723, "body": "So i would simply do something like array[5] = new first(&quot;John&quot;,true); ?"}, {"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 0, "creation_date": 1463598958, "post_id": 37308184, "comment_id": 62137794, "body": "Why at SO everyone recommends new and modern programming elements to newcomer? Come on, no one of you recommending <code>vector</code>, <code>unique_ptr</code> did know about it when you started learning C++. Give new guys a break!"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1463599210, "post_id": 37308184, "comment_id": 62137946, "body": "Neither existed when I started programming in C++. Probably one of the reasons I&#39;m so screwed up today."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "reply_to_user": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 1, "creation_date": 1463599216, "post_id": 37308184, "comment_id": 62137951, "body": "@Ajay because it&#39;s far, far easier to learn modern c++ than c with classes, or at least it&#39;s far less effort to get it right..."}, {"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1463599342, "post_id": 37308184, "comment_id": 62138019, "body": "@jaggedSpire, that&#39;s not true. If you want to learn classes, grab a Java or C# book. C++ guys need to know the details. You cant throw them a vector or a unqiue_ptr. It doesn&#39;t work that way. Now or then, they will hit the wall for not knowing behind-the-scene details, program will crash, and they will curse C++"}, {"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1463599803, "post_id": 37308184, "comment_id": 62138275, "body": "@user4581301, Oh so you admit that you might have learnt it well by obscure syntax of <code>std::unique_ptr&lt;base[]&gt;</code>, and would have fixed complex error thrown by compiler? I strongly doubt that. None of data-structure book will teach pointers, DS elements etc. that way."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "reply_to_user": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 2, "creation_date": 1463599937, "post_id": 37308184, "comment_id": 62138352, "body": "@Ajay please do give an example where a newbie might crash and burn for not knowing the details behind vector and unique_ptr, because I really can&#39;t think of one where they wouldn&#39;t also crash and burn given a c-style array. C++ is a language where you can control how low-level your program is, and choose to double down to the metal only when and where you <i>need</i> to do so. While low-level details are exceedingly useful, and while the ability to make use of them <i>is</i> one of the benefits of the language, newbies always, always make the mistake of too little abstraction rather than too much."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 2, "creation_date": 1463600364, "post_id": 37308184, "comment_id": 62138586, "body": "The low-level details of c++ should be taught <i>after</i> a basic understanding of the general <i>interface</i> is provided. Say you&#39;re trying to teach how passing variables into functions works. Would a vector or a c-style array present a less confusing face to a newbie when passed by value into a function? A <i>vector</i>, because altering it won&#39;t alter the vector passed as an argument. This whole argument is based off of the idea that people by and large need to know little details of c++, but that&#39;s not really true. C++ has <i>1300</i> pages of details in its specification."}, {"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1463600466, "post_id": 37308184, "comment_id": 62138647, "body": "@jaggedSpire, a <code>unique_ptr</code> holding a pointer to an stack allocated object. `\tint n; \tauto ptr = &amp;n; \tunique_ptr&lt;int&gt; up(ptr);`"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1463600511, "post_id": 37308184, "comment_id": 62138672, "body": "Most of these details are little bits and pieces created with the Principle Of Least Surprise, <i>specifically so</i> newbies don&#39;t get surprised and have to delve into details, more than they absolutely have to."}, {"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1463600668, "post_id": 37308184, "comment_id": 62138756, "body": "@jaggedSpire, Don&#39;t need much of text. I gave very simple example for how a newbie can enter into trouble land."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "reply_to_user": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 0, "creation_date": 1463600669, "post_id": 37308184, "comment_id": 62138758, "body": "@Ajay As long as the newbie has some understanding of pointers or references I don&#39;t see how that could be a problem. Altering the contents alters the contents. Altering the target alters the target."}, {"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1463600724, "post_id": 37308184, "comment_id": 62138787, "body": "@jaggedSpire, Exactly! That&#39;s my point buddy - the person needs to know the BASICS. You cannot throw <code>vector</code> without telling them what a stack memory and what a heap memory is!"}], "answers": [{"comments": [{"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1463599106, "post_id": 37308273, "comment_id": 62137873, "body": "@user4581301, Doesn&#39;t matter at this stage. Let the guy learn something. I would have advised him to allocate memory for pointer using <code>new</code> instead of having array of size <code>100</code>. Or may be <code>make_unique&lt;base[]&gt;</code>. I tried to keep things simple. Why at SO, everyone wants to show off their mastery?"}, {"owner": {"reputation": 461, "user_id": 3763426, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g5ZY8.jpg?s=128&g=1", "display_name": "kevr", "link": "https://stackoverflow.com/users/3763426/kevr"}, "edited": false, "score": 1, "creation_date": 1463599475, "post_id": 37308273, "comment_id": 62138081, "body": "Take a read here to learn about how new and delete works. new without delete will leak memory.  <a href=\"http://www.learncpp.com/cpp-tutorial/69-dynamic-memory-allocation-with-new-and-delete/\" rel=\"nofollow noreferrer\">learncpp.com/cpp-tutorial/&hellip;</a>"}], "tags": [], "owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "is_accepted": true, "score": 0, "last_activity_date": 1463599573, "last_edit_date": 1463599573, "creation_date": 1463598832, "answer_id": 37308273, "question_id": 37308184, "link": "https://stackoverflow.com/questions/37308184/array-of-different-classes/37308273#37308273", "title": "Array of different classes", "body": "<p>You need to call <code>new</code> with appropriate class type, like this:</p>\n\n<pre><code>int main()\n{\n    base* a[100];\n    a[0] = new first(\"Janit\", false);\n    a[1] = new second(\"Romeo\", true);\n    return 0;\n}\n</code></pre>\n\n<p>But, while printing it's up to you on how to determine what <code>a[i]</code> type is! Later you can free the memory by just calling <code>delete</code> for each element:</p>\n\n<pre><code>delete a[i];\n</code></pre>\n\n<p>It is NOT equivalent to any of these:</p>\n\n<pre><code>delete []a;\ndelete a;\ndelete []a[i];\n</code></pre>\n\n<p>Note that this is just starting point for you to proceed, and not a complete solution.</p>\n"}], "owner": {"reputation": 25, "user_id": 6118711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d5lnm.jpg?s=128&g=1", "display_name": "braga", "link": "https://stackoverflow.com/users/6118711/braga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "accepted_answer_id": 37308273, "answer_count": 1, "score": 0, "last_activity_date": 1463599573, "creation_date": 1463598455, "last_edit_date": 1463598900, "question_id": 37308184, "link": "https://stackoverflow.com/questions/37308184/array-of-different-classes", "title": "Array of different classes", "body": "<p>I recently started learning object-oriented programming and now i have some difficulties. All i have to do is to put in an array different classes that inherit the same base, and then show on the screen all members of the array with their specific characteristics. My array should look like:</p>\n\n<pre><code>[first person1(\"John\",true)] [second person2(\"Michael\",false)] [first person3(\"Tanya\",false)], ...;\n</code></pre>\n\n<p>Then i want to show all members of the array using method getInfo(), something like:</p>\n\n<pre><code>for(int i=0;i &lt; numberOfElements;i++) array[i].getInfo();  \n// where numberOfElements will be incremented in the constructor\n</code></pre>\n\n<p>How could i do this?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nclass base\n{\n    protected: string name;\n    public: virtual string getName()=0;\n};\n\nclass first:public base\n{\n    protected: bool Medic;\n    public: first(string Name=\"\",bool check=false) {name=Name; Medic=check;};\n    public: virtual string getName() {return name;};\n    public: bool isMedic() {return Medic;};\n    public: void getInfo() \n    {\n        cout &lt;&lt; endl &lt;&lt; name; \n        if(Medic) cout &lt;&lt; \" is medic.\";\n        else cout &lt;&lt; \" is not a medic.\";\n    };\n\n};\n\nclass second:public base\n{\n    protected: bool Janitor;\n    public: second(string Name=\"\",bool check=false) {name=Name; Janitor=check;};\n    public: virtual string getName() {return name;};\n    public: bool isMedic() {return Janitor;};\n    public: void getInfo() \n    {\n        cout &lt;&lt; endl &lt;&lt; name; \n        if(Medic) cout &lt;&lt; \" is a janitor.\";\n        else cout &lt;&lt; \" is not a janitor.\";\n    };\n};\n\nint main()\n{\n    base* a[100];\n    // Code\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "class", "user-interface", "interface"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1463597599, "post_id": 37307887, "comment_id": 62137059, "body": "It shouldn&#39;t be the responsibility of the <code>ride</code> function to create derived instances. This is what a factory is for. Turning a string into a specific Car instance is a single responsibility."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1463598100, "post_id": 37307887, "comment_id": 62137323, "body": "It seems silly to derive from <code>Car</code> for each manufacture out there.  I would just have a <code>Car</code> class and let it store its make and model as a <code>std::string</code> data member."}], "answers": [{"comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1463599347, "post_id": 37308156, "comment_id": 62138022, "body": "The OP is using C++11; <code>override</code> is a safe bet."}, {"owner": {"reputation": 33, "user_id": 6117136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/267a6f5f3b36292b912b9e6990d0978c?s=128&d=identicon&r=PG&f=1", "display_name": "user298182", "link": "https://stackoverflow.com/users/6117136/user298182"}, "edited": false, "score": 0, "creation_date": 1463600006, "post_id": 37308156, "comment_id": 62138388, "body": "What if my class is templates class, would be that still valid option?"}, {"owner": {"reputation": 2184, "user_id": 1112010, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/2c06679b27da6bbc84a4bf036da82648?s=128&d=identicon&r=PG", "display_name": "Mukul Gupta", "link": "https://stackoverflow.com/users/1112010/mukul-gupta"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1463600294, "post_id": 37308156, "comment_id": 62138554, "body": "@chris: Agreed. Removed the override."}, {"owner": {"reputation": 2184, "user_id": 1112010, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/2c06679b27da6bbc84a4bf036da82648?s=128&d=identicon&r=PG", "display_name": "Mukul Gupta", "link": "https://stackoverflow.com/users/1112010/mukul-gupta"}, "reply_to_user": {"reputation": 33, "user_id": 6117136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/267a6f5f3b36292b912b9e6990d0978c?s=128&d=identicon&r=PG&f=1", "display_name": "user298182", "link": "https://stackoverflow.com/users/6117136/user298182"}, "edited": false, "score": 0, "creation_date": 1463600306, "post_id": 37308156, "comment_id": 62138563, "body": "@user298182 A class using templates makes no difference."}], "tags": [], "owner": {"reputation": 2184, "user_id": 1112010, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/2c06679b27da6bbc84a4bf036da82648?s=128&d=identicon&r=PG", "display_name": "Mukul Gupta", "link": "https://stackoverflow.com/users/1112010/mukul-gupta"}, "is_accepted": true, "score": 0, "last_activity_date": 1463600166, "last_edit_date": 1463600166, "creation_date": 1463598379, "answer_id": 37308156, "question_id": 37307887, "link": "https://stackoverflow.com/questions/37307887/common-design-interface-for-child-classes-of-base-class-c/37308156#37308156", "title": "Common design interface for child classes of base class c++", "body": "<p>I think you should use a factory method to instantiate the derived class based on the model and then use the base pointer to call the derived methods (<code>ride()</code>).</p>\n\n<pre><code>Car{\npublic:\n  static Car* Factory(std::string type = \"mercedes\") {\n  if( type == \"mercedes\")\n    return std::make_shared&lt;Mercedes&gt;();\n  else if( type == \"bmw\" ) \n    return std::make_shared&lt;BMW&gt;();\n  }\n  virtual int ride();\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>Car *car = Car::Factory(\"mercedes\");\ncar-&gt;ride();\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 6117136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/267a6f5f3b36292b912b9e6990d0978c?s=128&d=identicon&r=PG&f=1", "display_name": "user298182", "link": "https://stackoverflow.com/users/6117136/user298182"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 37308156, "answer_count": 1, "score": 1, "last_activity_date": 1463600166, "creation_date": 1463597442, "question_id": 37307887, "link": "https://stackoverflow.com/questions/37307887/common-design-interface-for-child-classes-of-base-class-c", "title": "Common design interface for child classes of base class c++", "body": "<p>I have virtual class Car. \nFrom this class there are different Child classes. </p>\n\n<p>In my interface, I have function </p>\n\n<pre><code>   ride(std::string type = \"mercedes\")\n</code></pre>\n\n<p>Function takes parameter type and based on this, it decides, which  car is instantiated and perform ride. \nCurrently, I do something like following: </p>\n\n<pre><code>ride(std::string type = \"mercedes\")\n{\n  if(type ==\"btw\")\n{\n  auto car = std::make_shared&lt;BMW&gt;();\n  car.ride();\n\n}\nelse if(type ==\"audi\")\n{\n  auto car = std::make_shared&lt;Audi&gt;();\n  car.ride();\n}\n default\n{\n  auto car = std::make_shared&lt;Mercedes &gt;();\n  car.ride();\n}\n}\n</code></pre>\n\n<p>What would be way to instantiate Car before if-else-loop and then just assign proper type?</p>\n\n<p>Many thanks! </p>\n"}, {"tags": ["c++", "linux", "gtk3", "glade"], "comments": [{"owner": {"reputation": 3524, "user_id": 4085019, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/NAJQz.jpg?s=128&g=1", "display_name": "PseudoAj", "link": "https://stackoverflow.com/users/4085019/pseudoaj"}, "edited": false, "score": 1, "creation_date": 1463597645, "post_id": 37307860, "comment_id": 62137081, "body": "Can you please post your code for reference."}, {"owner": {"reputation": 13, "user_id": 6352683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84fa6096cec150086f3f79b2955bef81?s=128&d=identicon&r=PG&f=1", "display_name": "Mik", "link": "https://stackoverflow.com/users/6352683/mik"}, "reply_to_user": {"reputation": 3524, "user_id": 4085019, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/NAJQz.jpg?s=128&g=1", "display_name": "PseudoAj", "link": "https://stackoverflow.com/users/4085019/pseudoaj"}, "edited": false, "score": 0, "creation_date": 1463597758, "post_id": 37307860, "comment_id": 62137145, "body": "Sure <a href=\"https://github.com/MegamanBitch/psw-manager\" rel=\"nofollow noreferrer\">github.com/MegamanBitch/psw-manager</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1463597774, "post_id": 37307860, "comment_id": 62137152, "body": "Did you recompile the program on those other distributions?  If not, are you sure they all have compatible versions of your runtime dependencies? Or did you bundle all your runtime dependencies with the application and ensure it would use your bundled versions (usually done by using the <code>-rpath</code> linker option with a relative path based on <code>$ORIGIN</code> pointing to the bundled libraries)?"}, {"owner": {"reputation": 13, "user_id": 6352683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84fa6096cec150086f3f79b2955bef81?s=128&d=identicon&r=PG&f=1", "display_name": "Mik", "link": "https://stackoverflow.com/users/6352683/mik"}, "edited": false, "score": 0, "creation_date": 1463597853, "post_id": 37307860, "comment_id": 62137191, "body": "Yes, i did make cleanAll and i recompiled with no problems. Here&#39;s the makefile <a href=\"https://github.com/MegamanBitch/psw-manager/blob/master/Makefile\" rel=\"nofollow noreferrer\">github.com/MegamanBitch/psw-manager/blob/master/Makefile</a>"}, {"owner": {"reputation": 2664, "user_id": 1862101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e069875829ca4da3cd8895e468c64409?s=128&d=identicon&r=PG", "display_name": "brian beuning", "link": "https://stackoverflow.com/users/1862101/brian-beuning"}, "edited": false, "score": 0, "creation_date": 1463599064, "post_id": 37307860, "comment_id": 62137847, "body": "Older ubuntu use the nouveau video driver for Nvidia cards.  That driver does not support CUDA."}, {"owner": {"reputation": 2664, "user_id": 1862101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e069875829ca4da3cd8895e468c64409?s=128&d=identicon&r=PG", "display_name": "brian beuning", "link": "https://stackoverflow.com/users/1862101/brian-beuning"}, "edited": false, "score": 0, "creation_date": 1463599145, "post_id": 37307860, "comment_id": 62137899, "body": "Always check for API calls returning error codes.  They will tell you why it is failing."}, {"owner": {"reputation": 13, "user_id": 6352683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84fa6096cec150086f3f79b2955bef81?s=128&d=identicon&r=PG&f=1", "display_name": "Mik", "link": "https://stackoverflow.com/users/6352683/mik"}, "reply_to_user": {"reputation": 2664, "user_id": 1862101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e069875829ca4da3cd8895e468c64409?s=128&d=identicon&r=PG", "display_name": "brian beuning", "link": "https://stackoverflow.com/users/1862101/brian-beuning"}, "edited": false, "score": 0, "creation_date": 1463599547, "post_id": 37307860, "comment_id": 62138129, "body": "@brianbeuning it doesn&#39;t work also on the newest Mint. I don&#39;t get any error when i run the program."}], "owner": {"reputation": 13, "user_id": 6352683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84fa6096cec150086f3f79b2955bef81?s=128&d=identicon&r=PG&f=1", "display_name": "Mik", "link": "https://stackoverflow.com/users/6352683/mik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1463597904, "creation_date": 1463597361, "last_edit_date": 1463597904, "question_id": 37307860, "link": "https://stackoverflow.com/questions/37307860/c-gtk-program-wont-start-on-ubuntu-14-04-or-mint-17-3", "title": "C++ GTK program won&#39;t start on Ubuntu 14.04 or Mint 17.3", "body": "<p>I made a program written in C++, I used Glade to make the GUI. The program compile just fine and it works with no problems under Fedora 23.\nHere's the problem: if i try to run this program on Ubuntu 14.04 or Mint 17.3 it just doesn't start. I launch the program with \"./Name\" (yes i have permission) but nothing seems to appears. I tried with the command top but i can't even see the name of my program. \nI tried with a simple program (open a windows that says Hello World) and it works, i can't understand why.\nNote that i have installed all the dependencies and that the program compile with no error, of course.</p>\n\n<p>PS: on Ubuntu 16.04 it works, this doesn't make any sense to me. </p>\n\n<p>Here's the code <a href=\"https://github.com/MegamanBitch/psw-manager\" rel=\"nofollow\">https://github.com/MegamanBitch/psw-manager</a></p>\n"}, {"tags": ["c++", "audio", "streaming", "pjsip"], "comments": [{"owner": {"reputation": 815, "user_id": 1062529, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/45ab00a3c94559dae294166cf9232f3f?s=128&d=identicon&r=PG", "display_name": "nicolaspanel", "link": "https://stackoverflow.com/users/1062529/nicolaspanel"}, "edited": false, "score": 1, "creation_date": 1464514009, "post_id": 37307749, "comment_id": 62510470, "body": "like JMR said, it seems possible to do such things using <a href=\"http://www.pjsip.org/pjmedia/docs/html/structpjmedia__aud__stream.htm\" rel=\"nofollow noreferrer\">pjmedia_aud_stream</a> (more info <a href=\"http://www.pjsip.org/pjmedia/docs/html/group__audio__device__api.htm\" rel=\"nofollow noreferrer\">here</a>)"}, {"owner": {"reputation": 755, "user_id": 4337247, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c48767cadf455120c393a3a6a224a6e0?s=128&d=identicon&r=PG&f=1", "display_name": "JMR", "link": "https://stackoverflow.com/users/4337247/jmr"}, "edited": false, "score": 0, "creation_date": 1464521173, "post_id": 37307749, "comment_id": 62512450, "body": "I updated my answer according, to you comment."}, {"owner": {"reputation": 755, "user_id": 4337247, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c48767cadf455120c393a3a6a224a6e0?s=128&d=identicon&r=PG&f=1", "display_name": "JMR", "link": "https://stackoverflow.com/users/4337247/jmr"}, "edited": false, "score": 0, "creation_date": 1464558220, "post_id": 37307749, "comment_id": 62523962, "body": "if my answer helped in some way you could accept the answer as coorect."}], "answers": [{"comments": [{"owner": {"reputation": 815, "user_id": 1062529, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/45ab00a3c94559dae294166cf9232f3f?s=128&d=identicon&r=PG", "display_name": "nicolaspanel", "link": "https://stackoverflow.com/users/1062529/nicolaspanel"}, "edited": false, "score": 0, "creation_date": 1464262349, "post_id": 37457691, "comment_id": 62418370, "body": "No, the entire point is to retrieve/send audio data using streams instead of files. Thank you anyway!"}, {"owner": {"reputation": 755, "user_id": 4337247, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c48767cadf455120c393a3a6a224a6e0?s=128&d=identicon&r=PG&f=1", "display_name": "JMR", "link": "https://stackoverflow.com/users/4337247/jmr"}, "reply_to_user": {"reputation": 815, "user_id": 1062529, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/45ab00a3c94559dae294166cf9232f3f?s=128&d=identicon&r=PG", "display_name": "nicolaspanel", "link": "https://stackoverflow.com/users/1062529/nicolaspanel"}, "edited": false, "score": 0, "creation_date": 1464270357, "post_id": 37457691, "comment_id": 62424221, "body": "<a href=\"http://www.pjsip.org/pjmedia/docs/html/group__audio__device__api.htm\" rel=\"nofollow noreferrer\">pjsip.org/pjmedia/docs/html/group__audio__device__api.htm</a> see this, maybe can help you. &quot;Working with audio streams&quot;"}], "tags": [], "owner": {"reputation": 755, "user_id": 4337247, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c48767cadf455120c393a3a6a224a6e0?s=128&d=identicon&r=PG&f=1", "display_name": "JMR", "link": "https://stackoverflow.com/users/4337247/jmr"}, "is_accepted": false, "score": -2, "last_activity_date": 1464521615, "last_edit_date": 1464521615, "creation_date": 1464257181, "answer_id": 37457691, "question_id": 37307749, "link": "https://stackoverflow.com/questions/37307749/pjsip-pjsua2-stream-audiomediaplayer-audiomediarecorder/37457691#37457691", "title": "PJSIP/PJSUA2 - stream AudioMediaPlayer / AudioMediaRecorder", "body": "<p>Do you want something like this <a href=\"http://www.pjsip.org/pjmedia/docs/html/page_pjmedia_samples_playfile_c.htm\" rel=\"nofollow\">http://www.pjsip.org/pjmedia/docs/html/page_pjmedia_samples_playfile_c.htm</a> ?</p>\n\n<p>--Updated--</p>\n\n<p>The solution as suggested by the user:</p>\n\n<p><a href=\"http://www.pjsip.org/pjmedia/docs/html/group__audio__device__api.htm\" rel=\"nofollow\">http://www.pjsip.org/pjmedia/docs/html/group__audio__device__api.htm</a></p>\n\n<p>To start the audio stream:</p>\n\n<pre><code>status = pjmedia_aud_stream_start(stream);\n</code></pre>\n\n<p>To stop the stream:</p>\n\n<pre><code>status = pjmedia_aud_stream_stop(stream);\n</code></pre>\n\n<p>And to destroy the stream:</p>\n\n<pre><code>status = pjmedia_aud_stream_destroy(stream);\n\nInfo: The following shows how to retrieve the capability value of the stream (in this case, the current output volume setting).\n// Volume setting is an unsigned integer showing the level in percent.\nunsigned vol;\nstatus = pjmedia_aud_stream_get_cap(stream,\nPJMEDIA_AUD_DEV_CAP_OUTPUT_VOLUME_SETTING,\n&amp;vol);\nInfo: And following shows how to modify the capability value of the stream (in this case, the current output volume setting).\n// Volume setting is an unsigned integer showing the level in percent.\nunsigned vol = 50;\nstatus = pjmedia_aud_stream_set_cap(stream,\nPJMEDIA_AUD_DEV_CAP_OUTPUT_VOLUME_SETTING,\n&amp;vol);\n</code></pre>\n"}], "owner": {"reputation": 815, "user_id": 1062529, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/45ab00a3c94559dae294166cf9232f3f?s=128&d=identicon&r=PG", "display_name": "nicolaspanel", "link": "https://stackoverflow.com/users/1062529/nicolaspanel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1337, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1464521615, "creation_date": 1463596979, "last_edit_date": 1463874241, "question_id": 37307749, "link": "https://stackoverflow.com/questions/37307749/pjsip-pjsua2-stream-audiomediaplayer-audiomediarecorder", "title": "PJSIP/PJSUA2 - stream AudioMediaPlayer / AudioMediaRecorder", "body": "<p>According to <a href=\"http://www.pjsip.org/docs/book-latest/PJSUA2Doc.pdf\" rel=\"nofollow\">PJSIP/PJSUA2 documentation</a>, the way to retrieve/send audio data is to use AudioMediaRecorder/AudioMediaPlayer which write/read data to/from file.</p>\n\n<p>Is there a way to do that with streams and buffers?</p>\n"}, {"tags": ["c++", "inheritance", "dynamic-cast", "virtual-functions"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1463597286, "post_id": 37307587, "comment_id": 62136905, "body": "An alternative to your <code>type()</code> member would be to just attempt a dynamic_cast to Kid1, then Kid2 ... KidN and see which one succeeds. Not pretty. Simply pointing out that it <i>is</i> an alternative."}, {"owner": {"reputation": 853, "user_id": 2506915, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6cbabe9a4b97888a4b666c88c50ad786?s=128&d=identicon&r=PG", "display_name": "Montaldo", "link": "https://stackoverflow.com/users/2506915/montaldo"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1463598497, "post_id": 37307587, "comment_id": 62137547, "body": "@JesperJuhl I toyed with that idea as well but cant ignore the uglyness"}], "answers": [{"comments": [{"owner": {"reputation": 853, "user_id": 2506915, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6cbabe9a4b97888a4b666c88c50ad786?s=128&d=identicon&r=PG", "display_name": "Montaldo", "link": "https://stackoverflow.com/users/2506915/montaldo"}, "edited": false, "score": 0, "creation_date": 1463598108, "post_id": 37307845, "comment_id": 62137328, "body": "Thanks for the answer. Your suggestion basically means that 50% of the casts will fail. Isnt that very undesirable?"}, {"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "reply_to_user": {"reputation": 853, "user_id": 2506915, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6cbabe9a4b97888a4b666c88c50ad786?s=128&d=identicon&r=PG", "display_name": "Montaldo", "link": "https://stackoverflow.com/users/2506915/montaldo"}, "edited": false, "score": 0, "creation_date": 1463598580, "post_id": 37307845, "comment_id": 62137601, "body": "You said that you need to distinguish them in your code, that&#39;s undesiderable too since it prevents polymorphism from doing its work. This is an XY problem. First explain why and how you need to distinguish them so that we can provide suitable solutions."}], "tags": [], "owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "is_accepted": false, "score": 2, "last_activity_date": 1463597313, "creation_date": 1463597313, "answer_id": 37307845, "question_id": 37307587, "link": "https://stackoverflow.com/questions/37307587/alternatives-to-dynamic-cast-in-class-hierarchy/37307845#37307845", "title": "Alternatives to dynamic_cast in class hierarchy", "body": "<p>You don't need <code>dynamic_cast</code>, <code>dynamic_cast</code> already use internal runtime type information to determine if it's able to cast the passed pointer/reference to the desired type but you are already checking it through the <code>type()</code> method. A <code>static_cast</code> is enough in your situation, as you are already providing RTTI by yourself.</p>\n\n<p>Or alternatively you could just remove the type() method and use directly <code>dynamic_cast</code>, which yields <code>nullptr</code> if it's not able to cast the object to your desired type.</p>\n\n<p>If you really want to avoid such things then you are forced to encapsulate the behavior desired into <code>virtual</code> methods such that wherever you need to use a <code>Kid1</code> or <code>Kid2</code>, you will have different implementation without the need to really distinguishing between the two, just by letting polymorphism do its work.</p>\n"}, {"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1463597635, "post_id": 37307924, "comment_id": 62137073, "body": "<code>static_cast</code> and implicit conversions will also shift the pointer correctly, when moving up and down the class hierarchy, including with multiple inheritance.  It&#39;s cross-casts that cannot work without <code>dynamic_cast</code>."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 1, "creation_date": 1463646591, "post_id": 37307924, "comment_id": 62155422, "body": "@CemKalyoncu it is not &quot;safe&quot; <i>in the presence of virtual inheritance</i> in the sense that the compiler will not allow it. This quite often means it is perfectly safe to use in practice; you will get a compile-time error if it is not."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1463670793, "post_id": 37307924, "comment_id": 62173850, "body": "@CemKalyoncu: Please don&#39;t use ideone for snippets.  They delete them, despite their terms of service saying that they will be hosted &quot;forever&quot;."}, {"owner": {"reputation": 12531, "user_id": 173347, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dslxd.png?s=128&g=1", "display_name": "Cem Kalyoncu", "link": "https://stackoverflow.com/users/173347/cem-kalyoncu"}, "edited": false, "score": 0, "creation_date": 1463683840, "post_id": 37307924, "comment_id": 62181763, "body": "That sample shows a case where no compiler error is given but the code works in correctly. That said it is not confined to MI only. It is for using static_cast for down casting."}, {"owner": {"reputation": 12531, "user_id": 173347, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dslxd.png?s=128&g=1", "display_name": "Cem Kalyoncu", "link": "https://stackoverflow.com/users/173347/cem-kalyoncu"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1463683904, "post_id": 37307924, "comment_id": 62181796, "body": "@BenVoigt Ok, which site you recommend?"}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1463736803, "post_id": 37307924, "comment_id": 62202751, "body": "@CemKalyoncu if you mean that casting to the <i>wrong</i> object type is possible, and breaks the type system, yes, <code>static_cast</code> is unsafe. But that is very different to what you are saying in your answer. <code>static_cast</code> will &quot;shift the pointer as necessary&quot; just as <code>dynamic_cast</code> does. The type-unsafe nature of <code>static_cast</code> doesn&#39;t cause a problem if you can be sure that the object you are casting is of the correct type."}, {"owner": {"reputation": 12531, "user_id": 173347, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dslxd.png?s=128&g=1", "display_name": "Cem Kalyoncu", "link": "https://stackoverflow.com/users/173347/cem-kalyoncu"}, "edited": false, "score": 0, "creation_date": 1463739870, "post_id": 37307924, "comment_id": 62204795, "body": "I wasn&#39;t talking about dynamic_cast in that comment, if you read it all it ends with saying &quot;It is for using static_cast for down casting.&quot;. I was trying to make a point that static_cast is not much safer than reinterpret_cast while performing down casting."}], "tags": [], "owner": {"reputation": 12531, "user_id": 173347, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dslxd.png?s=128&g=1", "display_name": "Cem Kalyoncu", "link": "https://stackoverflow.com/users/173347/cem-kalyoncu"}, "is_accepted": true, "score": 3, "last_activity_date": 1463597572, "creation_date": 1463597572, "answer_id": 37307924, "question_id": 37307587, "link": "https://stackoverflow.com/questions/37307587/alternatives-to-dynamic-cast-in-class-hierarchy/37307924#37307924", "title": "Alternatives to dynamic_cast in class hierarchy", "body": "<p>In multiple inheritance, dynamic_cast will shift the pointer as necessary and is a must. Therefore, getting rid of it is dangerous. If your system extends to a point where it uses MI somewhere down, you might get all sorts of strange behaviour.</p>\n"}, {"comments": [{"owner": {"reputation": 853, "user_id": 2506915, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6cbabe9a4b97888a4b666c88c50ad786?s=128&d=identicon&r=PG", "display_name": "Montaldo", "link": "https://stackoverflow.com/users/2506915/montaldo"}, "edited": false, "score": 0, "creation_date": 1463600014, "post_id": 37308508, "comment_id": 62138392, "body": "Thanks for your input. I am basically doing this with an extra piece of knowledge. I could do what @Jack suggest and simply &quot;try&quot;."}, {"owner": {"reputation": 1934, "user_id": 4932834, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cb44dcd4ebddfea3ede8c6d46b02795?s=128&d=identicon&r=PG&f=1", "display_name": "PcAF", "link": "https://stackoverflow.com/users/4932834/pcaf"}, "reply_to_user": {"reputation": 853, "user_id": 2506915, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6cbabe9a4b97888a4b666c88c50ad786?s=128&d=identicon&r=PG", "display_name": "Montaldo", "link": "https://stackoverflow.com/users/2506915/montaldo"}, "edited": false, "score": 0, "creation_date": 1463600895, "post_id": 37308508, "comment_id": 62138855, "body": "@Montaldo When you need to distinguish between them why are you using pointer to Base?"}, {"owner": {"reputation": 853, "user_id": 2506915, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6cbabe9a4b97888a4b666c88c50ad786?s=128&d=identicon&r=PG", "display_name": "Montaldo", "link": "https://stackoverflow.com/users/2506915/montaldo"}, "edited": false, "score": 0, "creation_date": 1463602084, "post_id": 37308508, "comment_id": 62139464, "body": "The self registering structure requires a common base type in order to be build from the factory. That is on one hand a blessing and beauty but the costs are this."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1463738378, "post_id": 37308508, "comment_id": 62203849, "body": "Carefully reading OP&#39;s question reveals why this answer is unfeasible. There is a base class <code>Base</code>, two subclasses <code>Kid1</code> and <code>Kid2</code>, which have further subclasses. OP only needs to differentiate between instances of <code>Kid1</code> and <code>Kid2</code> (<i>including</i> instances of their respective subtypes); your answer instead shows how to check the <i>most derived</i> type. (You could still use <code>typeid</code> in a suitable solution, but it would need to look different to your answer)."}, {"owner": {"reputation": 1934, "user_id": 4932834, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cb44dcd4ebddfea3ede8c6d46b02795?s=128&d=identicon&r=PG&f=1", "display_name": "PcAF", "link": "https://stackoverflow.com/users/4932834/pcaf"}, "edited": false, "score": 0, "creation_date": 1463740684, "post_id": 37308508, "comment_id": 62205327, "body": "Thanks, I&#39;ll edit my answer. BTW: How would you do it (correctly) with <code>typeid</code>."}], "tags": [], "owner": {"reputation": 1934, "user_id": 4932834, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cb44dcd4ebddfea3ede8c6d46b02795?s=128&d=identicon&r=PG&f=1", "display_name": "PcAF", "link": "https://stackoverflow.com/users/4932834/pcaf"}, "is_accepted": false, "score": 0, "last_activity_date": 1497474307, "last_edit_date": 1497474307, "creation_date": 1463599637, "answer_id": 37308508, "question_id": 37307587, "link": "https://stackoverflow.com/questions/37307587/alternatives-to-dynamic-cast-in-class-hierarchy/37308508#37308508", "title": "Alternatives to dynamic_cast in class hierarchy", "body": "<p>Maybe you could use <code>typeid</code> operator. Because:</p>\n\n<p>N3337 5.2.8/2 says:</p>\n\n<blockquote>\n  <p>When typeid is applied to a glvalue expression <strong>whose type is a polymorphic class type</strong> (10.3), the result refers\n  to a std::type_info object representing the type of the <strong>most derived object (1.8) (that is, the dynamic\n  type) to which the glvalue refers</strong> ....</p>\n</blockquote>\n\n<p>Example:</p>\n\n<pre><code>struct Base\n{\n    virtual void f(){} //to ensure that Base is polymorphic object\n};\n\nstruct Derived: Base{};\n\nstruct AnotherDerived: Base{};\n\n\n\nint main()\n{\n    Base *ptr = new AnotherDerived;\n\n    if(typeid(*ptr) == typeid(Derived)) //Do not forget to dereference pointer, otherwise typeid() will return type_info for pointer itself\n    {\n         cout &lt;&lt; \"ptr is pointing to object of type Derived\" &lt;&lt; endl;\n    }\n\n    if (typeid(*ptr) == typeid(AnotherDerived))\n    {\n        cout &lt;&lt; \"ptr is pointing to object of type AnotherDerived\" &lt;&lt; endl;\n    }\n\n}\n</code></pre>\n\n<p>However if you have to distinguish between them in your code why are you using pointer to Base? What about separating code where you are using only <code>Base</code> properties and code where are you using specific properties of your child classes? That's the whole point of polymorphism.</p>\n\n<p>EDIT: \nAs davmac pointed out. It will work only if these subclasses will be most derived classes.</p>\n"}, {"comments": [{"owner": {"reputation": 1934, "user_id": 4932834, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cb44dcd4ebddfea3ede8c6d46b02795?s=128&d=identicon&r=PG&f=1", "display_name": "PcAF", "link": "https://stackoverflow.com/users/4932834/pcaf"}, "edited": false, "score": 0, "creation_date": 1463733536, "post_id": 37317655, "comment_id": 62200432, "body": "EDIT: I don&#39;t think this is good solution. <code>Base</code> shouldn&#39;t care about it&#39;s derived classes. What will you do when you want to create new class (deriving from <code>Base</code>)? You will have to create function for every derived class?"}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "reply_to_user": {"reputation": 1934, "user_id": 4932834, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cb44dcd4ebddfea3ede8c6d46b02795?s=128&d=identicon&r=PG&f=1", "display_name": "PcAF", "link": "https://stackoverflow.com/users/4932834/pcaf"}, "edited": false, "score": 0, "creation_date": 1463735027, "post_id": 37317655, "comment_id": 62201506, "body": "@PcAF if you are using dynamic casts you are already in a situation where you care about derived classes. If the possibility exists that even <i>more</i> derived classes that you will need to differentiate will exist in the future, you already have a design problem that extends far beyond adding a few methods to the base class."}, {"owner": {"reputation": 1934, "user_id": 4932834, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cb44dcd4ebddfea3ede8c6d46b02795?s=128&d=identicon&r=PG&f=1", "display_name": "PcAF", "link": "https://stackoverflow.com/users/4932834/pcaf"}, "edited": false, "score": 0, "creation_date": 1463735865, "post_id": 37317655, "comment_id": 62202091, "body": "Yes, you&#39;re right that when you have to use <code>dynamic_cast</code> you are in situation where you care about derived classes. However you care about it in specifcic context where you need to use properties of that derived class.  I don&#39;t think that you will have to use derived classes everywhere where <code>Base</code> is used."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "reply_to_user": {"reputation": 1934, "user_id": 4932834, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cb44dcd4ebddfea3ede8c6d46b02795?s=128&d=identicon&r=PG&f=1", "display_name": "PcAF", "link": "https://stackoverflow.com/users/4932834/pcaf"}, "edited": false, "score": 0, "creation_date": 1463736246, "post_id": 37317655, "comment_id": 62202363, "body": "@PcAF sure, and in those cases, you don&#39;t need to call the added methods. BTW one benefit of having &quot;caster&quot; methods is that they don&#39;t actually have to return the same object; this gives you some leeway for later design changes that a cast <i>doesn&#39;t</i>. Your free to have your own preferences but please accept that every decision comes with its own trade-offs. I personally prefer to avoid casts where possible."}, {"owner": {"reputation": 1934, "user_id": 4932834, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cb44dcd4ebddfea3ede8c6d46b02795?s=128&d=identicon&r=PG&f=1", "display_name": "PcAF", "link": "https://stackoverflow.com/users/4932834/pcaf"}, "edited": false, "score": 0, "creation_date": 1463738577, "post_id": 37317655, "comment_id": 62204000, "body": "I don&#39;t want to force you to use other solution. If you are comfortable with your solution use it. However I am commenting just because I want to find out benefits of other solutions and if they are comfortable to me I will use it."}], "tags": [], "owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "is_accepted": false, "score": 0, "last_activity_date": 1463645976, "creation_date": 1463645976, "answer_id": 37317655, "question_id": 37307587, "link": "https://stackoverflow.com/questions/37307587/alternatives-to-dynamic-cast-in-class-hierarchy/37317655#37317655", "title": "Alternatives to dynamic_cast in class hierarchy", "body": "<p>I generally prefer to be able to get a handle to the desired type without using a cast. This means adding methods to the Base class:</p>\n\n<pre><code>virtual Kid1 *asKid1()\n{\n    return null;\n}\n\nvirtual Kid2 *asKid2()\n{\n    return null;\n}\n</code></pre>\n\n<p>The subclasses then override these as appropriate:</p>\n\n<pre><code>// (in Kid1)\nvirtual Kid1 *asKid1() override\n{\n    return this;\n}\n</code></pre>\n\n<p>Although your <code>Base</code> class is still being \"polluted\" with extra methods, only these two methods are required, even if the subclasses are expanded in the future.</p>\n\n<p>(You can have them return references rather than pointers, in which case they should throw an exception by default).</p>\n"}, {"tags": [], "owner": {"reputation": 175, "user_id": 3325279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9gbSP.jpg?s=128&g=1", "display_name": "Quokka", "link": "https://stackoverflow.com/users/3325279/quokka"}, "is_accepted": false, "score": 2, "last_activity_date": 1463706556, "last_edit_date": 1495535344, "creation_date": 1463706556, "answer_id": 37336399, "question_id": 37307587, "link": "https://stackoverflow.com/questions/37307587/alternatives-to-dynamic-cast-in-class-hierarchy/37336399#37336399", "title": "Alternatives to dynamic_cast in class hierarchy", "body": "<p>You could try the <a href=\"https://en.wikipedia.org/wiki/Visitor_pattern\" rel=\"nofollow noreferrer\">Visitor pattern</a>.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/255214/when-should-i-use-the-visitor-design-pattern\">When should I use the Visitor Design Pattern?</a></p>\n"}], "owner": {"reputation": 853, "user_id": 2506915, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6cbabe9a4b97888a4b666c88c50ad786?s=128&d=identicon&r=PG", "display_name": "Montaldo", "link": "https://stackoverflow.com/users/2506915/montaldo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2253, "favorite_count": 0, "accepted_answer_id": 37307924, "answer_count": 5, "score": 4, "last_activity_date": 1497520195, "creation_date": 1463596429, "last_edit_date": 1497520195, "question_id": 37307587, "link": "https://stackoverflow.com/questions/37307587/alternatives-to-dynamic-cast-in-class-hierarchy", "title": "Alternatives to dynamic_cast in class hierarchy", "body": "<p>I have a class structure with loads of different child classes all inheriting from the same abstract base class. This base class is there because all these classes self register at compile time to a factory from which they are built. This is really neat and keeps me from the burden of maintaining a huge switch or any other flow mechanism somewhere down stream. </p>\n\n<pre><code>              +---------------+\n              |     Base      |\n              +--+---------+--+\n                 |         |\n         +-------+-+     +-+-------+\n         |  Kid1   |     |  Kid2   |\n         +----+----+     +----+----+\n              |               |\n  +---+---+---+               +---+---+---+\n  |   |   |   | ...           |   |   |   | ....\n</code></pre>\n\n<p>However, these <code>Kid1</code> and <code>Kid2</code> classes are different and the issue is that I have to distinguish between them somewhere in my code and the only thing I have is a <code>Base</code> pointer. I did not want to bother the factory with this and keep that as simple as possible.</p>\n\n<p>The way I solved this right now is by having <code>Base</code> being somewhat aware of the two siblings. It has a virtual method <code>type()</code> which returns an enum type distinguishing between <code>Kid1</code> and <code>Kid2</code>. Both kids override this <em>(basically saying I am KidX)</em> such that I know with whom I am dealing. This type is then used to <code>dynamic_cast</code> <code>Base</code> to either of the kids and the program proceeds.</p>\n\n<p>However, is this the right approach? </p>\n\n<p>I could for example add some more <code>virtual</code> methods to base, on the one hand polluting it with methods only one part of the hierarchy uses but on the other hand saving me the <code>dynamic_cast</code>. </p>\n\n<p>Any thoughts?</p>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 13216, "user_id": 860034, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4cefa7d82ece8f3984f6b262ba4095e?s=128&d=identicon&r=PG", "display_name": "gview", "link": "https://stackoverflow.com/users/860034/gview"}, "edited": false, "score": 0, "creation_date": 1463596374, "post_id": 37307450, "comment_id": 62136415, "body": "Adding &amp; only works on *nix systems."}, {"owner": {"reputation": 12531, "user_id": 173347, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dslxd.png?s=128&g=1", "display_name": "Cem Kalyoncu", "link": "https://stackoverflow.com/users/173347/cem-kalyoncu"}, "edited": false, "score": 0, "creation_date": 1463596412, "post_id": 37307450, "comment_id": 62136439, "body": "and not even in system command, bash interprets &amp;."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1463596469, "post_id": 37307450, "comment_id": 62136477, "body": "I would use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682425(v=vs.85).aspx\" rel=\"nofollow noreferrer\">CreateProcess</a>"}], "answers": [{"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 5, "last_activity_date": 1463598493, "last_edit_date": 1463598493, "creation_date": 1463596264, "answer_id": 37307531, "question_id": 37307450, "link": "https://stackoverflow.com/questions/37307450/spawn-console-window-without-locking-application/37307531#37307531", "title": "Spawn console window without locking application", "body": "<blockquote>\n  <p>The problem is the export could take up to an hour or more and I don't want to lock up the application.</p>\n</blockquote>\n\n<p><a href=\"http://en.cppreference.com/w/c/program/system\" rel=\"nofollow\"><code>system()</code></a> calls are executed synchronously and block the calling thread until finished. </p>\n\n<p>Look for <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682425(v=vs.85).aspx\" rel=\"nofollow\"><code>CreateProcess()</code></a> to interact with the winapi directly, or use <a href=\"https://en.wikibooks.org/wiki/C_Programming/POSIX_Reference/unistd.h/fork\" rel=\"nofollow\"><code>fork()</code></a> and some function from the <a href=\"https://en.wikibooks.org/wiki/C_Programming/POSIX_Reference/unistd.h/exec\" rel=\"nofollow\"><code>exec()</code></a> family to <em>spawn</em> an asynchronously running child process.</p>\n\n<hr>\n\n<p>Another (portable) solution is to use a separate <a href=\"http://en.cppreference.com/w/cpp/thread/thread\" rel=\"nofollow\"><code>std::thread</code></a> in your application, that issues the <code>system()</code> call:</p>\n\n<pre><code>std::string command;\ncommand += \"\\\"\" + INSTALL_DIR + \"export.exe\\\"\";\ncommand += \" -id \" +  processID;\n\nstd::thread t([](const std::string&amp; command){\n        system(command.c_str());\n    }, command);\nstd::cout &lt;&lt; \"main thread\" &lt;&lt; std::endl;\n</code></pre>\n\n<p>But you need to at least join that thread before your application exits:</p>\n\n<pre><code>t.join();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12531, "user_id": 173347, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dslxd.png?s=128&g=1", "display_name": "Cem Kalyoncu", "link": "https://stackoverflow.com/users/173347/cem-kalyoncu"}, "is_accepted": false, "score": 0, "last_activity_date": 1463596318, "creation_date": 1463596318, "answer_id": 37307548, "question_id": 37307450, "link": "https://stackoverflow.com/questions/37307450/spawn-console-window-without-locking-application/37307548#37307548", "title": "Spawn console window without locking application", "body": "<p>&amp; works within the shell (command prompt). What you should do is to create a new thread using <code>CreateThread</code> or if you use C++11 <code>std::thread</code>, and call the new command from there. I would recommend not to use system command though: <a href=\"http://www.cplusplus.com/forum/articles/11153/\" rel=\"nofollow\">http://www.cplusplus.com/forum/articles/11153/</a></p>\n"}], "owner": {"reputation": 59, "user_id": 2339575, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Frzpd.jpg?s=128&g=1", "display_name": "Mike McLennan", "link": "https://stackoverflow.com/users/2339575/mike-mclennan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "closed_date": 1463597523, "accepted_answer_id": 37307531, "answer_count": 2, "score": 2, "last_activity_date": 1463598493, "creation_date": 1463595958, "question_id": 37307450, "link": "https://stackoverflow.com/questions/37307450/spawn-console-window-without-locking-application", "closed_reason": "Duplicate", "title": "Spawn console window without locking application", "body": "<p>I am trying to spawn a console window to run another executable from my application based on some data selected by the user. It's a pretty simple setup right now.</p>\n\n<pre><code>std::string command;\n{\n    command += \"\\\"\" + INSTALL_DIR + \"export.exe\\\"\";\n    command += \" -id \" +  processID;\n}\nsystem(command.c_str());\n</code></pre>\n\n<p>The problem is the export could take up to an hour or more and I don't want to lock up the application. I have seen mention that using \"&amp;\" at the end of your command would accomplish this (like: \"c:\\some\\path\\export.exe -id 19998 &amp;\") but it's not working for me. </p>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["c++", "visual-studio", "intel", "eigen"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1463596469, "post_id": 37307428, "comment_id": 62136476, "body": "Looks like a compiler bug to me. <code>operand types are: float * Eigen::Matrix&lt;double, 1, 200, 1, 1, 200&gt;</code>. Why would it ever think about <code>float</code>?"}, {"owner": {"reputation": 188, "user_id": 1139273, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d98c84020d48cb2bb2ffd665e3850b84?s=128&d=identicon&r=PG&f=1", "display_name": "AmirC", "link": "https://stackoverflow.com/users/1139273/amirc"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1463597098, "post_id": 37307428, "comment_id": 62136808, "body": "Agree! I swap the operands and it works now (y_pred * learning_rate). Isn&#39;t weird?"}, {"owner": {"reputation": 1871, "user_id": 2959973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52108f521e54d0dcc1850d6edc467211?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Weggerle", "link": "https://stackoverflow.com/users/2959973/alexander-weggerle"}, "edited": false, "score": 0, "creation_date": 1463746048, "post_id": 37307428, "comment_id": 62208780, "body": "What version of the Intel Compiler are you using? I&#39;ve tried it with 16.0 and didn&#39;t saw this error."}], "answers": [{"comments": [{"owner": {"reputation": 188, "user_id": 1139273, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d98c84020d48cb2bb2ffd665e3850b84?s=128&d=identicon&r=PG&f=1", "display_name": "AmirC", "link": "https://stackoverflow.com/users/1139273/amirc"}, "edited": false, "score": 0, "creation_date": 1463679291, "post_id": 37328061, "comment_id": 62179222, "body": "Thanks for you reply. But the main question is how come C++ compiler that operation (without raising any error), but Intel Compiler can not handle it."}], "tags": [], "owner": {"reputation": 513, "user_id": 2658323, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fd58250dd25aa5f9edfeb265c8516299?s=128&d=identicon&r=PG", "display_name": "user2658323", "link": "https://stackoverflow.com/users/2658323/user2658323"}, "is_accepted": false, "score": 0, "last_activity_date": 1463672421, "creation_date": 1463672421, "answer_id": 37328061, "question_id": 37307428, "link": "https://stackoverflow.com/questions/37307428/intel-c-compiler-and-eigen/37328061#37328061", "title": "Intel C++ Compiler and Eigen", "body": "<p>You can explicitly perform a scalar computation:</p>\n\n<pre><code>cout &lt;&lt; learning_rate * y_pred.array() &lt;&lt; endl;\n</code></pre>\n"}], "owner": {"reputation": 188, "user_id": 1139273, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d98c84020d48cb2bb2ffd665e3850b84?s=128&d=identicon&r=PG&f=1", "display_name": "AmirC", "link": "https://stackoverflow.com/users/1139273/amirc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 294, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1463672421, "creation_date": 1463595907, "last_edit_date": 1463596015, "question_id": 37307428, "link": "https://stackoverflow.com/questions/37307428/intel-c-compiler-and-eigen", "title": "Intel C++ Compiler and Eigen", "body": "<p>I am trying to compile my code, which has matrix multiplication, with intel C++ compiler. For the matrix multiplication, I am using <a href=\"http://eigen.tuxfamily.org/dox/TopicUsingIntelMKL.html\" rel=\"nofollow\">Eigen</a> library. This is the sample code. I am using VS2013 with the latest version of Eigen library.</p>\n\n<pre><code>#define EIGEN_USE_MKL_ALL\n#include &lt;Eigen/Dense&gt;\nusing namespace Eigen;\n\nint main()\n{\n  Matrix&lt;double, 1, 200, RowMajor&gt; y_pred;\n  y_pred.setRandom(); // Eigen library function\n  double learning_rate = 0.5;\n  cout &lt;&lt; learning_rate * y_pred &lt;&lt; endl;\n  return 1;\n}\n</code></pre>\n\n<p>When I am using intel C++ compiler I get the following error:</p>\n\n<pre><code>1&gt;error : more than one operator \"*\" matches these operands:\n1&gt;              function \"Eigen::operator*(const double &amp;, const Eigen::MatrixBase&lt;Eigen::Matrix&lt;double, 1, 200, 1, 1, 200&gt;&gt; &amp;)\"\n1&gt;              function \"Eigen::operator*(const std::complex&lt;double&gt; &amp;, const Eigen::MatrixBase&lt;Eigen::Matrix&lt;double, 1, 200, 1, 1, 200&gt;&gt; &amp;)\"\n1&gt;              function \"Eigen::internal::operator*(const float &amp;, const Eigen::Matrix&lt;std::complex&lt;float&gt;, -1, -1, 0, -1, -1&gt; &amp;)\"\n1&gt;              function \"Eigen::internal::operator*(const float &amp;, const Eigen::Matrix&lt;std::complex&lt;float&gt;, -1, 1, 0, -1, 1&gt; &amp;)\"\n1&gt;              function \"Eigen::internal::operator*(const float &amp;, const Eigen::Matrix&lt;std::complex&lt;float&gt;, 1, -1, 1, 1, -1&gt; &amp;)\"\n1&gt;              function \"Eigen::internal::operator*(const float &amp;, const Eigen::Matrix&lt;Eigen::scomplex, -1, -1, 1, -1, -1&gt; &amp;)\"\n1&gt;              operand types are: float * Eigen::Matrix&lt;double, 1, 200, 1, 1, 200&gt;\n1&gt;              y_pred = learning_rate * y_pred;\n</code></pre>\n"}, {"tags": ["c++", "boost", "stdmap", "boost-variant"], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 5953802, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/efc8816c1805ac2cbcf27d957e81fbcc?s=128&d=identicon&r=PG&f=1", "display_name": "ZincFur", "link": "https://stackoverflow.com/users/5953802/zincfur"}, "edited": false, "score": 0, "creation_date": 1463598369, "post_id": 37307864, "comment_id": 62137484, "body": "I am trying to create a heterogeneous map of template objects using boost::variant. I wanted to understand how to use the static_visitor to get a pointer to the objects and so I used it within the constructor. Both, t and dim are still size_t objects and so it should not be any different?. However, it still throws the same error. Specifically, the following error is confusing to me. 21:22:  error: cannot convert &#39;A::C&lt;1ul&gt;*&#39; to &#39;A::C&lt;2ul&gt;*&#39; in return  In member function &#39;A::C&lt;dim&gt;* A::C&lt;dim&gt;::operator()(A::C&lt;t&gt;*) const [with long unsigned int t = 1ul; long unsigned int dim = 2ul]&#39;:"}, {"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "reply_to_user": {"reputation": 49, "user_id": 5953802, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/efc8816c1805ac2cbcf27d957e81fbcc?s=128&d=identicon&r=PG&f=1", "display_name": "ZincFur", "link": "https://stackoverflow.com/users/5953802/zincfur"}, "edited": false, "score": 1, "creation_date": 1463600534, "post_id": 37307864, "comment_id": 62138685, "body": "see comment I put right of <code>return s;</code>. If you change this to <code>return nullptr;</code> you won&#39;t have any errors. However I bet this is not what you want... Just try to remember that <code>C&lt;1&gt;</code> and <code>C&lt;2&gt;</code> are not in any way related types - the fact that both are instantions of the same class template does not change this fact..."}, {"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "reply_to_user": {"reputation": 49, "user_id": 5953802, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/efc8816c1805ac2cbcf27d957e81fbcc?s=128&d=identicon&r=PG&f=1", "display_name": "ZincFur", "link": "https://stackoverflow.com/users/5953802/zincfur"}, "edited": false, "score": 0, "creation_date": 1463600880, "post_id": 37307864, "comment_id": 62138848, "body": "But you might relate <code>C&lt;1&gt;</code> and <code>C&lt;2&gt;</code> by introducing base class - like CBase - and use <code>CBase*</code> as return value of your operator and parameter to <code>boost::static_visitor</code>- that should work"}, {"owner": {"reputation": 49, "user_id": 5953802, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/efc8816c1805ac2cbcf27d957e81fbcc?s=128&d=identicon&r=PG&f=1", "display_name": "ZincFur", "link": "https://stackoverflow.com/users/5953802/zincfur"}, "edited": false, "score": 0, "creation_date": 1463602076, "post_id": 37307864, "comment_id": 62139459, "body": "That works! Thank you. Now, since I have a base class pointer I have to do a type case to access x, like, static_cast&lt;C&lt;2&gt;*&gt;(boost::apply_visitor(C&lt;2&gt;(), matrices[&quot;Bb&quot;]))-&gt;x. I would like to access the member variables without knowing the types."}, {"owner": {"reputation": 49, "user_id": 5953802, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/efc8816c1805ac2cbcf27d957e81fbcc?s=128&d=identicon&r=PG&f=1", "display_name": "ZincFur", "link": "https://stackoverflow.com/users/5953802/zincfur"}, "edited": false, "score": 0, "creation_date": 1463602418, "post_id": 37307864, "comment_id": 62139631, "body": "So, the idea is to access the x variable (This will be a Eigen matrix of templated size) through either of the pointers, Aasd or Bbsd from outside the class using something like ObjA[input]. &quot;input&quot; is a string variable that holds &quot;Aa&quot; or &quot;Bb&quot; accordingly. Since it is going to be a heterogeneous map, I thought of overloading the &quot;[]&quot; operator and giving access to either of the pointers based on the input string. Any thoughts or ideas?"}, {"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "reply_to_user": {"reputation": 49, "user_id": 5953802, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/efc8816c1805ac2cbcf27d957e81fbcc?s=128&d=identicon&r=PG&f=1", "display_name": "ZincFur", "link": "https://stackoverflow.com/users/5953802/zincfur"}, "edited": false, "score": 0, "creation_date": 1463647082, "post_id": 37307864, "comment_id": 62155766, "body": "It could work as you described for heterogeneous containers. But consider to put into base class all operations that are common  - so you wouldn&#39;t need to downcast. It is not always possible - but it is more &quot;object oriented&quot; way... You could also consider to use visitor or double-dispatch design pattern..."}], "tags": [], "owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "is_accepted": true, "score": 1, "last_activity_date": 1463601133, "last_edit_date": 1463601133, "creation_date": 1463597377, "answer_id": 37307864, "question_id": 37307252, "link": "https://stackoverflow.com/questions/37307252/unable-to-access-template-objects-using-boostapply-visitor/37307864#37307864", "title": "Unable to access template objects using boost::apply_visitor", "body": "<p>All visitor functions must follow the scheme defined by base class:  <code>boost::static_visitor&lt;C&lt;dim&gt; *&gt;</code>.</p>\n\n<p>That means return value of <code>operator()</code> must be always <code>C&lt;dim&gt; *</code> not <code>C&lt;t&gt;*</code> - see:</p>\n\n<pre><code>template&lt;size_t dim&gt;\nstruct C : boost::static_visitor&lt;C&lt;dim&gt; *&gt; {\n\n   template &lt;size_t t&gt;\n    C&lt;dim&gt; * operator()(C&lt;t&gt; *s) const {\n  //  ^^^ - not t, must be as static_visitor parameter few lines above\n      std::cout&lt;&lt;s-&gt;x&lt;&lt;std::endl;\n      return s; // of course this part will have problems to compile\n                // e.g. pointers to C&lt;2&gt; and C&lt;1&gt; are not convertible\n    }\n</code></pre>\n\n<hr>\n\n<p>As I put in comments in right of <code>return s</code>- this does not compile - because compiler cannot covert <code>C&lt;1&gt;</code> to <code>C&lt;2&gt;</code>. </p>\n\n<p>What you might do to solve this, is to introduce base class - like below:</p>\n\n<pre><code>struct CBase {\n   int x;\n};\n\ntemplate&lt;size_t dim&gt;\nstruct C : CBase, boost::static_visitor&lt;CBase*&gt; {\n\n   C() : CBase{dim} {}\n\n   template &lt;size_t t&gt;\n    CBase* operator()(C&lt;t&gt; *s) const {\n      std::cout&lt;&lt;s-&gt;x&lt;&lt;std::endl;\n      return s; \n    }\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 5953802, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/efc8816c1805ac2cbcf27d957e81fbcc?s=128&d=identicon&r=PG&f=1", "display_name": "ZincFur", "link": "https://stackoverflow.com/users/5953802/zincfur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 37307864, "answer_count": 1, "score": 1, "last_activity_date": 1463601133, "creation_date": 1463595229, "question_id": 37307252, "link": "https://stackoverflow.com/questions/37307252/unable-to-access-template-objects-using-boostapply-visitor", "title": "Unable to access template objects using boost::apply_visitor", "body": "<p>I am learning about boost::variant and accessing its members using apply_visitor. So, I wrote the following example.\nI have pointers to templated objects as my class members. I would like to access them using apply_visitor.</p>\n\n<pre><code>//Example program\n#include &lt;iostream&gt;\n#include &lt;map&gt;\n#include &lt;string&gt;\n#include &lt;boost/shared_ptr.hpp&gt;\n#include &lt;boost/variant.hpp&gt;\n#include &lt;boost/any.hpp&gt;\n\nclass A {\n    template&lt;size_t dim&gt;\n    struct C : boost::static_visitor&lt;C&lt;dim&gt; *&gt;{\n        int x;\n        C() {\n          x = dim;\n        }\n        template &lt;size_t t&gt;\n        C&lt;t&gt; * operator()(C&lt;t&gt; *s) const {\n          std::cout&lt;&lt;s-&gt;x&lt;&lt;std::endl;\n          return s;\n        }\n    };\n public: \n    C&lt;1&gt;* Aasd;\n    C&lt;2&gt;* Bbsd;\n    std::map&lt;std::string, boost::variant&lt;C&lt;2&gt; *, C&lt;1&gt; * &gt; &gt; matrices;    \n\n    A() {\n        Aasd = new C&lt;1&gt;;\n        Bbsd = new C&lt;2&gt;;\n    matrices.insert(std::make_pair(\"Bb\", Bbsd));\n\n   boost::apply_visitor(C&lt;2&gt;(), matrices[\"Bb\"]);\n   //   boost::apply_visitor(C&lt;1&gt;(), matrices[\"Aa\"]);\n   }\n\n    ~A() {\n     delete Aasd;\n     delete Bbsd;\n    }        \n};\n\nint main()\n{    \n  A a;\n  return 0;\n}\n</code></pre>\n\n<p>The error that I get from compiling the above is</p>\n\n<pre><code>In file included from /usr/include/boost/variant.hpp:17:0,\n                 from 8:\n/usr/include/boost/variant/variant.hpp: In instantiation of 'boost::detail::variant::invoke_visitor&lt;Visitor&gt;::result_type boost::detail::variant::invoke_visitor&lt;Visitor&gt;::internal_visit(T&amp;, int) [with T = A::C&lt;1ul&gt;*; Visitor = const A::C&lt;2ul&gt;; boost::detail::variant::invoke_visitor&lt;Visitor&gt;::result_type = A::C&lt;2ul&gt;*]':\n/usr/include/boost/variant/detail/visitation_impl.hpp:130:9:   required from 'typename Visitor::result_type boost::detail::variant::visitation_impl_invoke_impl(int, Visitor&amp;, VoidPtrCV, T*, mpl_::true_) [with Visitor = boost::detail::variant::invoke_visitor&lt;const A::C&lt;2ul&gt; &gt;; VoidPtrCV = void*; T = A::C&lt;1ul&gt;*; typename Visitor::result_type = A::C&lt;2ul&gt;*; mpl_::true_ = mpl_::bool_&lt;true&gt;]'\n/usr/include/boost/variant/detail/visitation_impl.hpp:173:9:   required from 'typename Visitor::result_type boost::detail::variant::visitation_impl_invoke(int, Visitor&amp;, VoidPtrCV, T*, NoBackupFlag, int) [with Visitor = boost::detail::variant::invoke_visitor&lt;const A::C&lt;2ul&gt; &gt;; VoidPtrCV = void*; T = A::C&lt;1ul&gt;*; NoBackupFlag = boost::variant&lt;A::C&lt;2ul&gt;*, A::C&lt;1ul&gt;*&gt;::has_fallback_type_; typename Visitor::result_type = A::C&lt;2ul&gt;*]'\n/usr/include/boost/variant/detail/visitation_impl.hpp:256:5:   required from 'typename Visitor::result_type boost::detail::variant::visitation_impl(int, int, Visitor&amp;, VoidPtrCV, mpl_::false_, NoBackupFlag, Which*, step0*) [with Which = mpl_::int_&lt;0&gt;; step0 = boost::detail::variant::visitation_impl_step&lt;boost::mpl::l_iter&lt;boost::mpl::l_item&lt;mpl_::long_&lt;2l&gt;, A::C&lt;2ul&gt;*, boost::mpl::l_item&lt;mpl_::long_&lt;1l&gt;, A::C&lt;1ul&gt;*, boost::mpl::l_end&gt; &gt; &gt;, boost::mpl::l_iter&lt;boost::mpl::l_end&gt; &gt;; Visitor = boost::detail::variant::invoke_visitor&lt;const A::C&lt;2ul&gt; &gt;; VoidPtrCV = void*; NoBackupFlag = boost::variant&lt;A::C&lt;2ul&gt;*, A::C&lt;1ul&gt;*&gt;::has_fallback_type_; typename Visitor::result_type = A::C&lt;2ul&gt;*; mpl_::false_ = mpl_::bool_&lt;false&gt;]'\n/usr/include/boost/variant/variant.hpp:2367:13:   required from 'static typename Visitor::result_type boost::variant&lt;T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, T17, T18, T19&gt;::internal_apply_visitor_impl(int, int, Visitor&amp;, VoidPtrCV) [with Visitor = boost::detail::variant::invoke_visitor&lt;const A::C&lt;2ul&gt; &gt;; VoidPtrCV = void*; T0_ = A::C&lt;2ul&gt;*; T1 = A::C&lt;1ul&gt;*; T2 = boost::detail::variant::void_; T3 = boost::detail::variant::void_; T4 = boost::detail::variant::void_; T5 = boost::detail::variant::void_; T6 = boost::detail::variant::void_; T7 = boost::detail::variant::void_; T8 = boost::detail::variant::void_; T9 = boost::detail::variant::void_; T10 = boost::detail::variant::void_; T11 = boost::detail::variant::void_; T12 = boost::detail::variant::void_; T13 = boost::detail::variant::void_; T14 = boost::detail::variant::void_; T15 = boost::detail::variant::void_; T16 = boost::detail::variant::void_; T17 = boost::detail::variant::void_; T18 = boost::detail::variant::void_; T19 = boost::detail::variant::void_; typename Visitor::result_type = A::C&lt;2ul&gt;*]'\n/usr/include/boost/variant/variant.hpp:2378:13:   required from 'typename Visitor::result_type boost::variant&lt;T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, T17, T18, T19&gt;::internal_apply_visitor(Visitor&amp;) [with Visitor = boost::detail::variant::invoke_visitor&lt;const A::C&lt;2ul&gt; &gt;; T0_ = A::C&lt;2ul&gt;*; T1 = A::C&lt;1ul&gt;*; T2 = boost::detail::variant::void_; T3 = boost::detail::variant::void_; T4 = boost::detail::variant::void_; T5 = boost::detail::variant::void_; T6 = boost::detail::variant::void_; T7 = boost::detail::variant::void_; T8 = boost::detail::variant::void_; T9 = boost::detail::variant::void_; T10 = boost::detail::variant::void_; T11 = boost::detail::variant::void_; T12 = boost::detail::variant::void_; T13 = boost::detail::variant::void_; T14 = boost::detail::variant::void_; T15 = boost::detail::variant::void_; T16 = boost::detail::variant::void_; T17 = boost::detail::variant::void_; T18 = boost::detail::variant::void_; T19 = boost::detail::variant::void_; typename Visitor::result_type = A::C&lt;2ul&gt;*]'\n/usr/include/boost/variant/variant.hpp:2401:52:   required from 'typename Visitor::result_type boost::variant&lt;T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, T17, T18, T19&gt;::apply_visitor(Visitor&amp;) [with Visitor = const A::C&lt;2ul&gt;; T0_ = A::C&lt;2ul&gt;*; T1 = A::C&lt;1ul&gt;*; T2 = boost::detail::variant::void_; T3 = boost::detail::variant::void_; T4 = boost::detail::variant::void_; T5 = boost::detail::variant::void_; T6 = boost::detail::variant::void_; T7 = boost::detail::variant::void_; T8 = boost::detail::variant::void_; T9 = boost::detail::variant::void_; T10 = boost::detail::variant::void_; T11 = boost::detail::variant::void_; T12 = boost::detail::variant::void_; T13 = boost::detail::variant::void_; T14 = boost::detail::variant::void_; T15 = boost::detail::variant::void_; T16 = boost::detail::variant::void_; T17 = boost::detail::variant::void_; T18 = boost::detail::variant::void_; T19 = boost::detail::variant::void_; typename Visitor::result_type = A::C&lt;2ul&gt;*]'\n/usr/include/boost/variant/detail/apply_visitor_unary.hpp:76:43:   required from 'typename Visitor::result_type boost::apply_visitor(const Visitor&amp;, Visitable&amp;) [with Visitor = A::C&lt;2ul&gt;; Visitable = boost::variant&lt;A::C&lt;2ul&gt;*, A::C&lt;1ul&gt;*&gt;; typename Visitor::result_type = A::C&lt;2ul&gt;*]'\n34:51:   required from here\n/usr/include/boost/variant/variant.hpp:1048:32: error: cannot convert 'A::C&lt;1ul&gt;*' to 'boost::detail::variant::invoke_visitor&lt;const A::C&lt;2ul&gt; &gt;::result_type {aka A::C&lt;2ul&gt;*}' in return\n         return visitor_(operand);\n</code></pre>\n\n<p>It compiles and works fine if I remove C&lt;1> * from the boost::variant declaration. </p>\n\n<p>Any suggestions would be highly appreciated.</p>\n"}, {"tags": ["c++", "c", "mpi"], "comments": [{"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 1, "creation_date": 1463601413, "post_id": 37307026, "comment_id": 62139134, "body": "Before diving into the excellent linked question/answer, I would strongly encourage you to familiarize yourself with the basic principles of MPI: independent processes and explicit communication via messages. Think if you can design your application around these principles, or ask if you are stuck."}, {"owner": {"reputation": 331, "user_id": 5565262, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f59e2578cecb7dc62aa09467bc6291a5?s=128&d=identicon&r=PG&f=1", "display_name": "mnmbs", "link": "https://stackoverflow.com/users/5565262/mnmbs"}, "reply_to_user": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1463603329, "post_id": 37307026, "comment_id": 62140091, "body": "I am trying to calculate pi in a master-slave like way. The result i am getting is 4 times the expected result as i am using 4 processes and i think that the problem is that the task counter is increased by every process."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1463604928, "post_id": 37307026, "comment_id": 62140863, "body": "There are actually many examples on how to use MPI for computing pi out there."}, {"owner": {"reputation": 331, "user_id": 5565262, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f59e2578cecb7dc62aa09467bc6291a5?s=128&d=identicon&r=PG&f=1", "display_name": "mnmbs", "link": "https://stackoverflow.com/users/5565262/mnmbs"}, "reply_to_user": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1463605078, "post_id": 37307026, "comment_id": 62140933, "body": "Yes but not using a master slave and i cannot figure out how to keep the master process out of the calculation and still get the correct result"}], "answers": [{"tags": [], "owner": {"reputation": 1848, "user_id": 2290151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7491ff3c0c23e578432bb1ebd93e2c?s=128&d=identicon&r=PG", "display_name": "renefritze", "link": "https://stackoverflow.com/users/2290151/renefritze"}, "is_accepted": false, "score": 0, "last_activity_date": 1463597096, "creation_date": 1463597096, "answer_id": 37307774, "question_id": 37307026, "link": "https://stackoverflow.com/questions/37307026/mpi-one-counter-for-all-the-process/37307774#37307774", "title": "MPI one counter for all the process", "body": "<p>There is no automatically global counter with MPI. I think you will have to communicate the increments to the counter manually. </p>\n"}], "owner": {"reputation": 331, "user_id": 5565262, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f59e2578cecb7dc62aa09467bc6291a5?s=128&d=identicon&r=PG&f=1", "display_name": "mnmbs", "link": "https://stackoverflow.com/users/5565262/mnmbs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 280, "favorite_count": 0, "closed_date": 1463599118, "answer_count": 1, "score": 0, "last_activity_date": 1463598332, "creation_date": 1463594430, "last_edit_date": 1463598332, "question_id": 37307026, "link": "https://stackoverflow.com/questions/37307026/mpi-one-counter-for-all-the-process", "closed_reason": "Duplicate", "title": "MPI one counter for all the process", "body": "<p>I am experimenting with MPI and so far I have this small program that computes a simple sum:</p>\n\n<pre><code>#include &lt;mpi.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(int argc, char *argv[]){\nint i=0, myid, nproc,N=5;\ndouble result=0.0,res;\n\nMPI_Init(&amp;argc, &amp;argv);\nMPI_Comm_rank(MPI_COMM_WORLD, &amp;myid);\nMPI_Comm_size(MPI_COMM_WORLD, &amp;nproc);\n\nMPI_Bcast(&amp;N, 1, MPI_INT, 0, MPI_COMM_WORLD);\n\nwhile (i&lt;N) { \n    result += i;\n    i++;\n\n    printf(\"process %d i %d\\n\",myid,i);\n    MPI_Reduce(&amp;result, &amp;res, 1, MPI_DOUBLE,MPI_SUM, 0, MPI_COMM_WORLD);\n}\nif (myid == 0)\n{\n    printf(\"result = %lf\\n\", res);\n}\nMPI_Finalize();\n\n}\n</code></pre>\n\n<p>Based on the results from the print, I can see that <code>i</code> reaches the limit (5) for every process. How can I configure it to keep something like a global counter so that <code>i</code> reaches the limit only one time for all processes?</p>\n"}, {"tags": ["c++", "popen", "ls"], "comments": [{"owner": {"reputation": 153, "user_id": 1580428, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/702d92a4359b2f877c5400678ea22535?s=128&d=identicon&r=PG&f=1", "display_name": "georges", "link": "https://stackoverflow.com/users/1580428/georges"}, "reply_to_user": {"reputation": 14193, "user_id": 183203, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf9ec57f64280ffe34ddd221d5c5151f?s=128&d=identicon&r=PG", "display_name": "antlersoft", "link": "https://stackoverflow.com/users/183203/antlersoft"}, "edited": false, "score": 0, "creation_date": 1463594719, "post_id": 37306982, "comment_id": 62135504, "body": "Perfect! thank you so much, @antlersoft"}], "answers": [{"tags": [], "owner": {"reputation": 17902, "user_id": 116273, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cc60634738ece15d1de4738110c76aa8?s=128&d=identicon&r=PG", "display_name": "erenon", "link": "https://stackoverflow.com/users/116273/erenon"}, "is_accepted": false, "score": 0, "last_activity_date": 1463594666, "creation_date": 1463594666, "answer_id": 37307096, "question_id": 37306982, "link": "https://stackoverflow.com/questions/37306982/cpp-popen-get-ls-error/37307096#37307096", "title": "cpp popen get ls error", "body": "<blockquote>\n  <p>Conversely, reading from the stream reads the command's\n         standard output</p>\n</blockquote>\n\n<p><a href=\"http://man7.org/linux/man-pages/man3/popen.3.html\" rel=\"nofollow\">http://man7.org/linux/man-pages/man3/popen.3.html</a></p>\n\n<p>You are reading the standard input of the invoked program, which is empty. The error message is written to the standard output. Try executing <code>ls 2&gt;&amp;1</code>.</p>\n"}], "owner": {"reputation": 153, "user_id": 1580428, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/702d92a4359b2f877c5400678ea22535?s=128&d=identicon&r=PG&f=1", "display_name": "georges", "link": "https://stackoverflow.com/users/1580428/georges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 247, "favorite_count": 0, "closed_date": 1463594746, "answer_count": 1, "score": 0, "last_activity_date": 1463594666, "creation_date": 1463594238, "question_id": 37306982, "link": "https://stackoverflow.com/questions/37306982/cpp-popen-get-ls-error", "closed_reason": "Duplicate", "title": "cpp popen get ls error", "body": "<p>I have a directory that when i run a ls command on, I know that it spits out an error like so:</p>\n\n<pre><code>ls: reading directory /mydir: Input/output error\n</code></pre>\n\n<p>I want to be able to detect that there was an IO error in my code. </p>\n\n<p>This is what i've tried:</p>\n\n<pre><code>void readLs(const std::string&amp; name)\n{\n    stringstream ss;\n    ss &lt;&lt; \"ls \" &lt;&lt; name;\n    FILE* apipe = popen(ss.str().c_str(), \"r\");\n    if(apipe == NULL)\n    {\n            cout &lt;&lt; \"Error opening popen\" &lt;&lt; endl;\n            return;\n    }\n    char line[256];\n    cout &lt;&lt; __FILE__ &lt;&lt; \" \" &lt;&lt; __LINE__ &lt;&lt; endl; //This is line 46\n    while (  fgets( line, 256 , apipe) )\n    {\n            string temp(line);\n            cout &lt;&lt; \"This is line: \" &lt;&lt; temp &lt;&lt; endl;\n            memset(line, 0, 256);\n    }\n    cout &lt;&lt; __FILE__ &lt;&lt; \" \" &lt;&lt; __LINE__ &lt;&lt; endl; //This is line 53\n    pclose(apipe);\n}\n\n\ntest.cpp 46\nls: reading directory /mydir: Input/output error\ntest.cpp 53\n</code></pre>\n\n<p>The error message prints out to the screen but i don't get the error message when reading from the pipe. </p>\n\n<p>Thanks,</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1463594481, "post_id": 37306979, "comment_id": 62135371, "body": "Does the <a href=\"http://en.cppreference.com/w/cpp/container/priority_queue\" rel=\"nofollow noreferrer\">Documentation</a> not help?"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 1, "creation_date": 1463594508, "post_id": 37306979, "comment_id": 62135390, "body": "The <code>priority_queue</code> has to save data somehow, and it uses a <code>vector</code> for that. You can also use a <code>list</code> or anything else that fulfills the requirements. You never manage these underlying containers, <code>priority_queue</code> does that for you."}], "answers": [{"comments": [{"owner": {"reputation": 499, "user_id": 5325102, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/iZeNv.jpg?s=128&g=1", "display_name": "Francisco Gallego Salido", "link": "https://stackoverflow.com/users/5325102/francisco-gallego-salido"}, "edited": false, "score": 0, "creation_date": 1463594656, "post_id": 37307044, "comment_id": 62135469, "body": "But the priority_queue wasn&#39;t implemented as a heap? Why then using a vector? I think I&#39;m missin something..."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 499, "user_id": 5325102, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/iZeNv.jpg?s=128&g=1", "display_name": "Francisco Gallego Salido", "link": "https://stackoverflow.com/users/5325102/francisco-gallego-salido"}, "edited": false, "score": 0, "creation_date": 1463594789, "post_id": 37307044, "comment_id": 62135540, "body": "@FranciscoGallegoSalido, it is implemented as a heap, but where do you think the contents of the heap are stored? They have to be stored somewhere, they don&#39;t just float around magically inside your computer."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 499, "user_id": 5325102, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/iZeNv.jpg?s=128&g=1", "display_name": "Francisco Gallego Salido", "link": "https://stackoverflow.com/users/5325102/francisco-gallego-salido"}, "edited": false, "score": 1, "creation_date": 1463594795, "post_id": 37307044, "comment_id": 62135541, "body": "@FranciscoGallegoSalido: A heap is usually implemented as a way to look at the objects inside a linear list. Look a the <code>std::make_heap()</code> function, for example, that will build such a heap in any container."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1463594956, "post_id": 37307044, "comment_id": 62135628, "body": "<code>priority_queue</code> requires random access, so <code>std::list</code> is no good."}, {"owner": {"reputation": 499, "user_id": 5325102, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/iZeNv.jpg?s=128&g=1", "display_name": "Francisco Gallego Salido", "link": "https://stackoverflow.com/users/5325102/francisco-gallego-salido"}, "edited": false, "score": 0, "creation_date": 1463594998, "post_id": 37307044, "comment_id": 62135644, "body": "Okay, I thought the heap was implemented as a pure binary tree and not with a container from the STL. This clarifies my doubts!"}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 499, "user_id": 5325102, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/iZeNv.jpg?s=128&g=1", "display_name": "Francisco Gallego Salido", "link": "https://stackoverflow.com/users/5325102/francisco-gallego-salido"}, "edited": false, "score": 1, "creation_date": 1463595461, "post_id": 37307044, "comment_id": 62135888, "body": "@FranciscoGallegoSalido: Since a heap tree is always complete, it makes sense to store it in a linear list, where the children of node <code>n</code> are at positions <code>2*n + 1</code> and <code>2*n + 2</code>, IIRC."}], "tags": [], "owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "is_accepted": true, "score": 7, "last_activity_date": 1463595033, "last_edit_date": 1463595033, "creation_date": 1463594495, "answer_id": 37307044, "question_id": 37306979, "link": "https://stackoverflow.com/questions/37306979/what-are-underlying-containers/37307044#37307044", "title": "What are underlying containers?", "body": "<p><code>std::priority_queue</code> is not really a container, but a <em>container adaptor</em>, that is, it takes a container and build upon it a different interface.</p>\n\n<p>The <em>underlying container</em> is, naturally, the container that it adapts. By using the C++ template magic you can change the <code>std::vector</code> into <code>std::deque</code> and everything will just work.</p>\n\n<p>About what container to use, the same rationale of <code>std::vector</code> vs <code>std::deque</code> applies: the <code>std::priority_queue</code> part does not contain the values, it just presents them in a peculiar way.</p>\n"}, {"tags": [], "owner": {"reputation": 292363, "user_id": 37213, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG", "display_name": "duffymo", "link": "https://stackoverflow.com/users/37213/duffymo"}, "is_accepted": false, "score": 1, "last_activity_date": 1463594518, "creation_date": 1463594518, "answer_id": 37307051, "question_id": 37306979, "link": "https://stackoverflow.com/questions/37306979/what-are-underlying-containers/37307051#37307051", "title": "What are underlying containers?", "body": "<p>This suggests to me that the priority queue data structure is using a vector to hold onto the values.  It's being sorted using the greater method so that higher values appear first in the vector, decreasing in order as you go.</p>\n\n<p>It could use another data structure if that made sense, but in this case it chose to use a vector.</p>\n"}], "owner": {"reputation": 499, "user_id": 5325102, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/iZeNv.jpg?s=128&g=1", "display_name": "Francisco Gallego Salido", "link": "https://stackoverflow.com/users/5325102/francisco-gallego-salido"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 566, "favorite_count": 1, "accepted_answer_id": 37307044, "answer_count": 2, "score": 0, "last_activity_date": 1463595033, "creation_date": 1463594227, "question_id": 37306979, "link": "https://stackoverflow.com/questions/37306979/what-are-underlying-containers", "title": "What are underlying containers?", "body": "<p>I was using priority_queue's in a project, and I decided to use a functor for the initialization, but looking on the internet I found this:</p>\n\n<pre><code>std::priority_queue&lt;int, std::vector&lt;int&gt;, std::greater&lt;int&gt; &gt; pq;\n</code></pre>\n\n<p>I already used it and works, but I'm not really sure why the <code>std::vector&lt;int&gt;</code> is used there and what <strong>underlying containers</strong> are and how you manage them (I looked for information, but I don't get the idea).</p>\n"}, {"tags": ["c++", "operator-overloading", "bit-manipulation", "bitwise-operators", "unions"], "comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1463594573, "post_id": 37306963, "comment_id": 62135430, "body": "There&#39;s a special rule that when all options within a union are structure types that share &quot;an initial common subsequence&quot; of members, those members can be accessed irregardless of which option was most recently written."}, {"owner": {"reputation": 3163, "user_id": 3250340, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/vZRom.jpg?s=128&g=1", "display_name": "Antoine C.", "link": "https://stackoverflow.com/users/3250340/antoine-c"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1463594616, "post_id": 37306963, "comment_id": 62135444, "body": "Thank you I wasn&#39;t aware at all of that rule"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1463594676, "post_id": 37306963, "comment_id": 62135479, "body": "The funniness in <code>operator=</code> has two parts: everything before the first <code>|</code> preserves the unrelated bits, everything after copies the new value into the corresponding bits.  And there&#39;s a special behavior implemented that for multibit areas, the right number of matching least-significant bits of the new value are copied and high-order bits are ignored, while for single-bit areas, they act like a boolean where it becomes set if the input is non-zero (any bit set)."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1463594822, "post_id": 37306963, "comment_id": 62135555, "body": "BTW there may be some trouble related to the <code>raw</code> member, because it doesn&#39;t have class type, even though it matches the &quot;initial common subsequence&quot; of the other options, formally that rule doesn&#39;t cover it."}, {"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1463598129, "post_id": 37306963, "comment_id": 62137342, "body": "@BenVoigt Would putting <code>RegBit&lt;0, 8&gt;</code> as first instead of` <code>u8</code> make the rule is followed?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "edited": false, "score": 0, "creation_date": 1463598188, "post_id": 37306963, "comment_id": 62137373, "body": "@PiotrNycz: Yes, that would be a valid way of getting and setting all bits at once.  On the other hand, it wouldn&#39;t let you get a <code>u8&amp;</code> (or <code>u8*</code>) to the data, so it&#39;s not quite as &quot;raw&quot; as the current approach."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5870134"}, "edited": false, "score": 0, "creation_date": 1463615778, "post_id": 37306963, "comment_id": 62144556, "body": "At first I thought the title to this question was: <code>Unicorns in c++ and bitwise operations</code>..."}], "answers": [{"comments": [{"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 3163, "user_id": 3250340, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/vZRom.jpg?s=128&g=1", "display_name": "Antoine C.", "link": "https://stackoverflow.com/users/3250340/antoine-c"}, "edited": false, "score": 0, "creation_date": 1463607427, "post_id": 37310191, "comment_id": 62142044, "body": "@LoveMetal thanks for this feedback.  i&#39;m never sure it&#39;s clear enough when I explain step by step such bitwise operations, because it quickly becomes very wordy."}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 4, "last_activity_date": 1463607346, "last_edit_date": 1463607346, "creation_date": 1463605990, "answer_id": 37310191, "question_id": 37306963, "link": "https://stackoverflow.com/questions/37306963/unions-in-c-and-bitwise-operations/37310191#37310191", "title": "Unions in c++ and bitwise operations", "body": "<h2>How does the operator= work ?</h2>\n\n<p>When you write <code>P.r2 = 1;</code> , the assignment operator for the r2 member gets invoked.  So it would have the effect of <code>P.r2.operator= (1);</code> which returns a reference to <code>P.r2</code>.   </p>\n\n<p>Let's analyze the assignment details in the specialized template with <code>bitno=2</code>, <code>nbits=1</code> and <code>T</code> being <code>u8</code>:  </p>\n\n<pre><code>mask = (1u &lt;&lt; nbits) - 1u   \n     = (1 shifted by 1 bits, aka binary 10) - 1\n     = binary 1  (i.e.  it's a binary number with the n lowest bits set)\n</code></pre>\n\n<p>Let's analyse the full expression step by step.  First the left part:  </p>\n\n<pre><code>mask &lt;&lt; bitno ===&gt; binary 100\n~(mask &lt;&lt; bitno)  ===&gt; binary 1..1011  (aka the bit bitno is set to 0, counting from least significant bit) \n(data &amp; ~(mask &lt;&lt; bitno))  ===&gt; the bit bitno is set to 0 in data (thanks to the bitwise &amp;)  \n</code></pre>\n\n<p>Now the right part of the expression: </p>\n\n<pre><code>(nbits &gt; 1 ? val &amp; mask : !!val) is a conditional operator:  \n   if nbits &gt;1 is true, then it's val&amp;mask, aka the n lowest bits of val\n   if not, then it's !!val, aka \"not not val\" which evalauates to 0 if val is 0 and 1 if val is not 0.  \nIn our case, it's the second alternative so 0 or 1 depending on val.  \n((nbits &gt; 1 ? val &amp; mask : !!val) &lt;&lt; bitno)  then shifts the 0 or the 1 by 2 bits.  \n</code></pre>\n\n<p>Now finally combining all this: </p>\n\n<pre><code>data = (data &amp; ~(mask &lt;&lt; bitno)) | ((nbits &gt; 1 ? val &amp; mask : !!val) &lt;&lt; bitno);\n\n      = (data with the bit bitno set to 0) ored with (val expressed on one bit in the bit bitno, counting from the least significant )\n</code></pre>\n\n<p>Otherwise stated, as a bit value 0 ored with a bit value x gives as results a bit value x, this expression sets the bit bitno to val (val being handled as a bool).  </p>\n\n<h2>But what is the union supposed to do ?</h2>\n\n<p>The union handles all its members (which are all of the same type <code>u8</code>) in the same memory location.  </p>\n\n<p>So what would be according to you the expected output of the following:  </p>\n\n<pre><code>P.raw=0; \nP.r2=1; \nP.r3=0;  \nP.r4=1;  \ncout &lt;&lt; (int)P.raw &lt;&lt;endl;  \n</code></pre>\n\n<p>The optimist who wrote your code snippet certainly expects a result of 20  (aka binary 10100).  That may work like this on many compilers.  But in reality this is ABSOLUTELY NOT GUARANTEED according to the standard:   </p>\n\n<blockquote>\n  <p><strong>9.5/1:</strong> In a union, at most one of the non-static data members can be active at any time, that is, the value of <strong>at most one of the\n  non-static data members can be stored in a union at any time</strong>.</p>\n</blockquote>\n\n<p>Otherwise stated, if you store something in r2  you're not sure that you will find back the same value in r4. The only thing that is sure is that if you store something in r2 and do not store anything else in the other members, you'll find back in r2 what you've stored there.  </p>\n\n<h2>Alternatives to the union</h2>\n\n<p>If you need to ensure portability,  you could consider using either <a href=\"http://en.cppreference.com/w/cpp/utility/bitset\" rel=\"nofollow\"><code>std::bitset</code></a> or standard <a href=\"http://en.cppreference.com/w/cpp/language/bit_field\" rel=\"nofollow\">bitfields</a>.  </p>\n"}], "owner": {"reputation": 3163, "user_id": 3250340, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/vZRom.jpg?s=128&g=1", "display_name": "Antoine C.", "link": "https://stackoverflow.com/users/3250340/antoine-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1074, "favorite_count": 0, "accepted_answer_id": 37310191, "answer_count": 1, "score": 3, "last_activity_date": 1463607346, "creation_date": 1463594194, "question_id": 37306963, "link": "https://stackoverflow.com/questions/37306963/unions-in-c-and-bitwise-operations", "title": "Unions in c++ and bitwise operations", "body": "<p>I have seen the following structure in a source code.</p>\n\n<pre><code>template&lt;unsigned bitno, unsigned nbits = 1, typename T = u8&gt;\nstruct RegBit\n{\n    T data;\n    enum { mask = (1u &lt;&lt; nbits) - 1u };\n    template&lt;typename T2&gt;\n    RegBit&amp; operator=(T2 val)\n    {\n        data = (data &amp; ~(mask &lt;&lt; bitno)) | ((nbits &gt; 1 ? val &amp; mask : !!val) &lt;&lt; bitno);\n        return *this;\n    }\n    operator unsigned() const { return (data &gt;&gt; bitno) &amp; mask; }\n};\n\nunion {\n    u8 raw;\n    RegBit&lt;0&gt; r0;\n    RegBit&lt;1&gt; r1;\n    RegBit&lt;2&gt; r2;\n    RegBit&lt;3&gt; r3;\n    RegBit&lt;6&gt; r6;\n    RegBit&lt;7&gt; r7;\n} P;\n</code></pre>\n\n<p>After a first reading, I found out that an <code>unsigned</code> cast of an object whose type is <code>RegBit</code> will return the bit number <code>bitno + 1</code> of <code>data</code>.</p>\n\n<p>However, I don't understand how the <code>=</code> overloaded operator is handled. I mean that I understand the syntax, but not what the bitwise operation is meant to do.</p>\n\n<p>And last thing, if you run the code and affect a value to <code>P.raw</code>, you'll notice that <em>\u2200 i \u2208 [0;7], <code>P.ri.data = P.raw</code></em>. </p>\n\n<p>How is that possible ?\nOf course then, the code does what it's suppose to do imho, ie: <em>\u2200 i \u2208 [0;7], <code>(unsigned)P.ri</code> is the (i+1)th bit of <code>P.raw</code>.</em> </p>\n"}, {"tags": ["c++", "string", "datetime", "lua"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1463596261, "post_id": 37306895, "comment_id": 62136346, "body": "There&#39;s a <code>std::get_time</code> function that&#39;s meant to make it easier to parse time and date strings."}], "answers": [{"tags": [], "owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "is_accepted": false, "score": 2, "last_activity_date": 1463595516, "last_edit_date": 1463595516, "creation_date": 1463595200, "answer_id": 37307246, "question_id": 37306895, "link": "https://stackoverflow.com/questions/37306895/c-converting-a-string-to-a-time-t-variable/37307246#37307246", "title": "C++ Converting A String to a time_t variable", "body": "<p>The code you posted is correct. </p>\n\n<p>This leads me to believe that your input string (<code>startTime</code>) is not in the format you are expecting, and therefore <code>sscanf</code> cannot parse out the values.</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n    std::string startTime = \"2016/05/18 13:10:00\";\n\n    time_t tStart;\n    int yy, month, dd, hh, mm, ss;\n    struct tm whenStart;\n    const char *zStart = startTime.c_str();\n\n    sscanf(zStart, \"%d/%d/%d %d:%d:%d\", &amp;yy, &amp;month, &amp;dd, &amp;hh, &amp;mm, &amp;ss);\n    whenStart.tm_year = yy - 1900;\n    whenStart.tm_mon = month - 1;\n    whenStart.tm_mday = dd;\n    whenStart.tm_hour = hh;\n    whenStart.tm_min = mm;\n    whenStart.tm_sec = ss;\n    whenStart.tm_isdst = -1;\n\n    tStart = mktime(&amp;whenStart);\n\n    std::cout &lt;&lt; tStart &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<blockquote>\n  <p><code>1463595000</code></p>\n</blockquote>\n\n<p>Have you sanity checked your inputs?</p>\n\n<p>Please note that you can check the return value of <a href=\"http://en.cppreference.com/w/cpp/io/c/fscanf\" rel=\"nofollow\"><code>sscanf</code></a> to verify if it worked as you expected.</p>\n\n<blockquote>\n  <p><strong>Return value</strong><br>\n  Number of receiving arguments successfully assigned, or EOF if read failure occurs before the first receiving argument was assigned.</p>\n</blockquote>\n\n<p>If the return value is not 6, then the input string is incorrect.</p>\n\n<pre><code>int num_args = sscanf(zStart, \"%d/%d/%d %d:%d:%d\", &amp;yy, &amp;month, &amp;dd, &amp;hh, &amp;mm, &amp;ss);\nif (num_args != 6)\n{\n    std::cout &lt;&lt; \"error in format string \" &lt;&lt; startTime &lt;&lt; '\\n';\n    return 1;\n}\n</code></pre>\n\n<p>As a rule of thumb you shouldn't ever assume that your inputs will be correct. As such, <a href=\"https://en.wikipedia.org/wiki/Defensive_programming\" rel=\"nofollow\">defensive programming</a> is a good habit to get into.</p>\n"}], "owner": {"reputation": 11, "user_id": 4504289, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-c8TwLKO_kZo/AAAAAAAAAAI/AAAAAAAAAE4/e_to5eImYL0/photo.jpg?sz=128", "display_name": "Adam F", "link": "https://stackoverflow.com/users/4504289/adam-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11239, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463595516, "creation_date": 1463593919, "last_edit_date": 1495540364, "question_id": 37306895, "link": "https://stackoverflow.com/questions/37306895/c-converting-a-string-to-a-time-t-variable", "title": "C++ Converting A String to a time_t variable", "body": "<p>I'm working on a C++ function that is supposed to figure out if a specified event happened between two time points. The event name, start datetime, and end datetime are all passed in from Lua as strings. Because of that, I need to parse my datetime strings into time_t variables. Based on what I've seen on StackOverflow and other forums, this code should work:</p>\n\n<pre><code>time_t tStart;\nint yy, month, dd, hh, mm, ss;\nstruct tm whenStart = {0};\nconst char *zStart = startTime.c_str();\n\nsscanf(zStart, \"%d/%d/%d %d:%d:%d\", &amp;yy, &amp;month, &amp;dd, &amp;hh, &amp;mm, &amp;ss);\nwhenStart.tm_year = yy - 1900;\nwhenStart.tm_mon = month - 1;\nwhenStart.tm_mday = dd;\nwhenStart.tm_hour = hh;\nwhenStart.tm_min = mm;\nwhenStart.tm_sec = ss;\nwhenStart.tm_isdst = -1;\n\ntStart = mktime(&amp;whenStart);\n</code></pre>\n\n<p>However, tStart appears to be assigned the value of -1 here. If I use strftime to reconstruct a string from whenStart, that tm structure appears to have been made completely correctly. Somehow mktime() is not liking the structure, I think. What is wrong with this code?</p>\n\n<p>Also, before you answer, know that I already tried using a strptime() call. For reasons that are unclear to me, this function gets rejected with an \"undefined reference to 'strptime'\" error. The <a href=\"http://linux.die.net/man/3/strptime\" rel=\"nofollow noreferrer\">various</a> <a href=\"https://stackoverflow.com/questions/35234152/strptime-giving-implicit-declaration-and-undefined-reference\">descriptions</a> <a href=\"https://www.ibm.com/support/knowledgecenter/ssw_ibm_i_72/rtref/strpti.htm\" rel=\"nofollow noreferrer\">I've</a> <a href=\"https://stackoverflow.com/questions/9403015/given-a-date-time-as-a-string-what-is-the-best-way-to-know-if-it-was-dst-at-tha\">found</a> for how to fix this problem only serve to destroy the rest of the code base I'm working with, so I would rather avoid messing with _XOPEN_SOURCE or similar redefinitions.</p>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["c++", "mutex"], "comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1463594291, "post_id": 37306884, "comment_id": 62135281, "body": "This is a problem with copying (and assignment), not with creating multiple instances.  When copying happens, what do you want to relationship between copies to be?  They can either each get their own unrelated mutex, or you can use <code>shared_ptr&lt;mutex&gt;</code> to have all copies share a single mutex."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1463594435, "post_id": 37306884, "comment_id": 62135346, "body": "It its really easy to copy an object without meaning to. Common ways are you call a function that takes your object by value, you stuff the object into a container like <code>vector</code>, <code>map</code>, or <code>list</code>, and you copy an object that contains your object. Anyway, unable to reproduce with forced copy of a chopped-down version of <code>FileSystem</code>. You may need to edit your question and <a href=\"http://stackoverflow.com/help/mcve\">provide the great and glorious MCVE.</a>"}, {"owner": {"reputation": 420, "user_id": 1762311, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e0f07ea8b740559778f1f276ff209333?s=128&d=identicon&r=PG", "display_name": "Simon Klaver", "link": "https://stackoverflow.com/users/1762311/simon-klaver"}, "edited": false, "score": 0, "creation_date": 1463594475, "post_id": 37306884, "comment_id": 62135365, "body": "I am not seeing how copying occurs here, that&#39;s a particular part of my question. Aside from that, I guess a shared mutex could be nice. How do I implement that?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1463594678, "post_id": 37306884, "comment_id": 62135483, "body": "D&#39;oh! My brain&#39;s off. No <code>operator=</code> Possible <a href=\"http://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">Rule of Three violation</a>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1463595002, "post_id": 37306884, "comment_id": 62135645, "body": "If you want to know where you are copying, you may be able to find out by hacking your <code>FileSystem</code> to delete <code>operator=</code>: <code>Filesystem&amp; operator=(const Filesystem &amp;src) = delete;</code>. Do the same with your copy constructor, build and read the &quot;called from&quot; trace in the error message (if there is one)."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 2, "creation_date": 1463595225, "post_id": 37306884, "comment_id": 62135769, "body": "@SimonKlaver The error you posted contains the code <code>rsmap[origUrl] = Robotsparser(origUrl);</code> which copies a Robotsparser object. Which you cannot do if that object contains a mutex."}, {"owner": {"reputation": 420, "user_id": 1762311, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e0f07ea8b740559778f1f276ff209333?s=128&d=identicon&r=PG", "display_name": "Simon Klaver", "link": "https://stackoverflow.com/users/1762311/simon-klaver"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1463595273, "post_id": 37306884, "comment_id": 62135795, "body": "@user4581301 Your linked question about the Rule Of Three solved it. I guess we can flag this as a duplicate? EDIT: Hold your horses, maybe my code doesn&#39;t do what I want."}, {"owner": {"reputation": 420, "user_id": 1762311, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e0f07ea8b740559778f1f276ff209333?s=128&d=identicon&r=PG", "display_name": "Simon Klaver", "link": "https://stackoverflow.com/users/1762311/simon-klaver"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1463595338, "post_id": 37306884, "comment_id": 62135825, "body": "@nos It should create a new object. It doesn&#39;t?"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 2, "creation_date": 1463595690, "post_id": 37306884, "comment_id": 62136016, "body": "It creates 2 objects, the <code>Robotsparser(origUrl)</code> object on the right hand side,  and another object in <code>rsmap[origUrl]</code> on the left hand side. Then it &quot;copies&quot;, via the assignment operator, the right hand object of the = into the left hand object."}], "answers": [{"tags": [], "owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "is_accepted": true, "score": 2, "last_activity_date": 1463596669, "last_edit_date": 1463596669, "creation_date": 1463594521, "answer_id": 37307053, "question_id": 37306884, "link": "https://stackoverflow.com/questions/37306884/how-to-have-multiple-objects-of-a-class-with-an-stdmutex/37307053#37307053", "title": "How to have multiple objects of a class with an std::mutex?", "body": "<p>Your <em>error</em> means that there is an assignment operation trying to happen somewhere...</p>\n\n<p>In your <code>Filesystem</code> class, the compiler didn't complain of the copy constructor:</p>\n\n<pre><code> Filesystem(const Filesystem&amp;) : fsMut() {} //because there is no copying of fsMut here\n</code></pre>\n\n<p>But, the compiler generates a copy assignment operator for you since you didn't define one. And in the compiler generated one, it calls the copy assignment operator of each member.</p>\n\n<p>For what I think your intent are: You should define all your Copy/Move Assignment operators (and Constructors), and make sure you do not try to copy/move the mutex owned by any of the instances.</p>\n\n<pre><code> Filesystem(const Filesystem&amp; f2)\n {\n      std::lock_guard&lt;std::mutex&gt; lk2(f2.fsMut);\n      /*do your stuff but do not copy f2.fsMut*/\n }\n\n Filesystem(Filesystem&amp;&amp; f2)\n {\n      std::lock_guard&lt;std::mutex&gt; lk2(f2.fsMut);\n      /*do your stuff but do not move f2.fsMut*/\n }\n\n Filesystem&amp; operator = (const Filesystem&amp;) \n {\n    std::lock(this-&gt;fsMut, f2.fsMut);\n    std::lock_guard&lt;std::mutex&gt; lk1(this-&gt;fsMut, std::adopt_lock);\n    std::lock_guard&lt;std::mutex&gt; lk2(f2.fsMut, std::adopt_lock);\n\n      //do your stuff but do not copy fsMut\n       return *this;\n }\n\n Filesystem&amp; operator = (Filesystem&amp;&amp; f2) \n {\n    std::lock(this-&gt;fsMut, f2.fsMut);\n    std::lock_guard&lt;std::mutex&gt; lk1(this-&gt;fsMut, std::adopt_lock);\n    std::lock_guard&lt;std::mutex&gt; lk2(f2.fsMut, std::adopt_lock);\n\n       //do your stuff but do not move fsMut\n       return *this;\n }\n</code></pre>\n\n<p>Full illustration here: <a href=\"http://coliru.stacked-crooked.com/a/75d03fd564f8b570\" rel=\"nofollow\">http://coliru.stacked-crooked.com/a/75d03fd564f8b570</a>\nAlso, consider using, <a href=\"http://en.cppreference.com/w/cpp/thread/lock_guard\" rel=\"nofollow\"><code>lock_guard</code></a>'s on both mutexes and <a href=\"http://en.cppreference.com/w/cpp/thread/lock\" rel=\"nofollow\"><code>std::lock</code></a> to lock both mutexes in the copy/move assignment operators.</p>\n\n<p>Though I still have my reservations on your intent, I saw a member declaration like: </p>\n\n<pre><code>mutable std::mutex fsMut;\n</code></pre>\n\n<p>The use of <code>mutable</code> is to modify members from a <code>const</code> member function; here its typically for being able to lock/unlock the mutex from a <code>const</code> member function.</p>\n"}, {"tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": false, "score": 0, "last_activity_date": 1463596294, "creation_date": 1463596294, "answer_id": 37307539, "question_id": 37306884, "link": "https://stackoverflow.com/questions/37306884/how-to-have-multiple-objects-of-a-class-with-an-stdmutex/37307539#37307539", "title": "How to have multiple objects of a class with an std::mutex?", "body": "<p>What does the first bit of the error say?</p>\n\n<pre><code>htmlparser.cpp: In member function \u2018strSet Htmlparser::parseLinks(std::__cxx11::string, std::__cxx11::string, std::__cxx11::string)\u2019:\nhtmlparser.cpp:10:39: error: use of deleted function \u2018Robotsparser&amp; Robotsparser::operator=(const Robotsparser&amp;)\u2019\n  rsmap[origUrl] = Robotsparser(origUrl);\n</code></pre>\n\n<p>It says that in <code>Htmlparser::parseLinks</code>, on this line</p>\n\n<pre><code>  rsmap[origUrl] = Robotsparser(origUrl);\n</code></pre>\n\n<p>you're using a copy assignment operator that doesn't exist.</p>\n\n<p>The <em>reason it doesn't exist</em> is that the compiler didn't generate it for you, because it can't, because the <code>mutex</code> member of your class isn't copyable.</p>\n\n<p>However, your real question is why the compiler is trying to use this in the first place:</p>\n\n<blockquote>\n  <p>So I am not copying or moving the class afaik</p>\n</blockquote>\n\n<p>but you can see, on the line the compiler quoted, an assignment. You haven't shown what <code>rsmap</code> is, but looking at operator[] for <a href=\"http://en.cppreference.com/w/cpp/container/map/operator_at\" rel=\"nofollow\"><code>std::map</code></a> shows that it default constructs an element, returns a reference to the new value, and then your code copy-assigns to it. The same is true for <a href=\"http://en.cppreference.com/w/cpp/container/unordered_map/operator_at\" rel=\"nofollow\"><code>std::unordered_map</code></a>.</p>\n\n<p>If your class isn't copyable or assignable, you can't do this - you need to construct the object in place. The <a href=\"http://en.cppreference.com/w/cpp/container/unordered_map/emplace\" rel=\"nofollow\"><code>emplace</code></a> method does this, giving code something like:</p>\n\n<pre><code>rsmap.emplace(origUrl, origUrl);\n</code></pre>\n\n<p>Alternatively, you can keep your existing code and write the copy/move constructors and assignment operators.</p>\n"}], "owner": {"reputation": 420, "user_id": 1762311, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e0f07ea8b740559778f1f276ff209333?s=128&d=identicon&r=PG", "display_name": "Simon Klaver", "link": "https://stackoverflow.com/users/1762311/simon-klaver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 532, "favorite_count": 0, "accepted_answer_id": 37307053, "answer_count": 2, "score": 1, "last_activity_date": 1463596669, "creation_date": 1463593863, "last_edit_date": 1495541280, "question_id": 37306884, "link": "https://stackoverflow.com/questions/37306884/how-to-have-multiple-objects-of-a-class-with-an-stdmutex", "title": "How to have multiple objects of a class with an std::mutex?", "body": "<p>I have the following error:</p>\n\n<pre><code>filesystem.hpp:11:7: error: use of deleted function \u2018std::mutex&amp; std::mutex::operator=(const std::mutex&amp;)\u2019\nIn file included from /usr/include/c++/6.1.1/mutex:44:0,\n                 from includes.hpp:11,\n                 from htmlparser.hpp:4,\n                 from htmlparser.cpp:1:\n/usr/include/c++/6.1.1/bits/std_mutex.h:98:12: note: declared here\n     mutex&amp; operator=(const mutex&amp;) = delete;\n            ^~~~~~~~\n</code></pre>\n\n<p>...about which there are already some questions asked (like <a href=\"https://stackoverflow.com/questions/30340029/copy-class-with-stdmutex\">this one</a> and <a href=\"https://stackoverflow.com/questions/24272641/how-to-use-a-stdmutex-in-a-class-context\">that one</a>). Based on these I tried the following class code:</p>\n\n<pre><code>class Filesystem {\n    private:\n        std::string dir = getCurrentPath();\n        mutable std::mutex fsMut;\n    public:\n        Filesystem() {}\n        ~Filesystem() {}\n        Filesystem(const Filesystem&amp;) : fsMut() { }\n\n        //Few more functions\n};\n</code></pre>\n\n<p>...which sadly enough doesn't work (or even change the errors).</p>\n\n<p>Now how does my code differ from the previously mentioned questions: In two classes I have in the <code>private</code> section the declaration <code>Filesystem fs;</code>. Which in my opinion would be totally fine, however, while for one class it passes for the other class this error is returned (along with the errors how that class and <code>Filesystem</code> are deleted implicitly).<br>\nSo I am not copying or moving the class afaik, but what does go wrong then? And how can I alter my code to make it work?</p>\n\n<p>EDIT:<br>\nFull error:</p>\n\n<pre><code>htmlparser.cpp: In member function \u2018strSet Htmlparser::parseLinks(std::__cxx11::string, std::__cxx11::string, std::__cxx11::string)\u2019:\nhtmlparser.cpp:10:39: error: use of deleted function \u2018Robotsparser&amp; Robotsparser::operator=(const Robotsparser&amp;)\u2019\n  rsmap[origUrl] = Robotsparser(origUrl);\n                                       ^\nIn file included from htmlparser.hpp:5:0,\n                 from htmlparser.cpp:1:\nrobotsparser.hpp:7:7: note: \u2018Robotsparser&amp; Robotsparser::operator=(const Robotsparser&amp;)\u2019 is implicitly deleted because the default definition would be ill-formed:\n class Robotsparser {\n       ^~~~~~~~~~~~\nrobotsparser.hpp:7:7: error: use of deleted function \u2018Filesystem&amp; Filesystem::operator=(const Filesystem&amp;)\u2019\nIn file included from robotsparser.hpp:5:0,\n                 from htmlparser.hpp:5,\n                 from htmlparser.cpp:1:\nfilesystem.hpp:11:7: note: \u2018Filesystem&amp; Filesystem::operator=(const Filesystem&amp;)\u2019 is implicitly deleted because the default definition would be ill-formed:\n class Filesystem {\n       ^~~~~~~~~~\nfilesystem.hpp:11:7: error: use of deleted function \u2018std::mutex&amp; std::mutex::operator=(const std::mutex&amp;)\u2019\nIn file included from /usr/include/c++/6.1.1/mutex:44:0,\n                 from includes.hpp:11,\n                 from htmlparser.hpp:4,\n                 from htmlparser.cpp:1:\n/usr/include/c++/6.1.1/bits/std_mutex.h:98:12: note: declared here\n     mutex&amp; operator=(const mutex&amp;) = delete;\n            ^~~~~~~~\n</code></pre>\n\n<p>And the other classes:</p>\n\n<pre><code>class Robotsparser {\n    private:\n        std::string url;\n        Filesystem fs;\n    public:\n        Robotsparser(std::string u) : url(u) {}\n        ~Robotsparser() {}\n};\n\nclass A {\n    private:\n        std::mutex crawlMut;\n        Filesystem fs;\n    public:\n        A(std::string);\n};\n</code></pre>\n\n<p>Class <code>A</code> is compiled earlier in the Makefile, which might explain why it gives the error at class <code>Robotsparser</code>.</p>\n"}, {"tags": ["c++", "dlopen", "rhel6"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1463593736, "post_id": 37306798, "comment_id": 62135001, "body": "Which versions of the C library and of the kernel? Please <b>edit your question</b> to improve it. See also <a href=\"http://man7.org/linux/man-pages/man5/proc.5.html\" rel=\"nofollow noreferrer\">proc(5)</a>"}, {"owner": {"reputation": 206, "user_id": 4914961, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2b05aad7fc74b0f7d0a54517056c242c?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Rossert", "link": "https://stackoverflow.com/users/4914961/amir-rossert"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1463640132, "post_id": 37306798, "comment_id": 62151293, "body": "I have updated the question, please let me know if you need more details."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1463641818, "post_id": 37306798, "comment_id": 62152322, "body": "You don&#39;t give your libc version. Perhaps you might try <a href=\"http://musl-libc.org/\" rel=\"nofollow noreferrer\">musl-libc</a>. Also, did you ask your sysadmin (or support)? Probably something can be configured to give access to <code>&#47;proc&#47;self&#47;auxv</code> without root permission. On my Debian system, I can access it."}, {"owner": {"reputation": 206, "user_id": 4914961, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2b05aad7fc74b0f7d0a54517056c242c?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Rossert", "link": "https://stackoverflow.com/users/4914961/amir-rossert"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1463642991, "post_id": 37306798, "comment_id": 62153110, "body": "Adedd ldd (GNU libc) 2.12 to the question, i will check on the permission issue."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1463643951, "post_id": 37306798, "comment_id": 62153729, "body": "Your kernel and libc are really old; I would suggest to upgrade your distribution to something more recent (current RHEL is at least 7). Otherwise, call your support line."}, {"owner": {"reputation": 206, "user_id": 4914961, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2b05aad7fc74b0f7d0a54517056c242c?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Rossert", "link": "https://stackoverflow.com/users/4914961/amir-rossert"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1463644016, "post_id": 37306798, "comment_id": 62153775, "body": "Another thing is that my .so file is using libproc, may this cases this error?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1463644060, "post_id": 37306798, "comment_id": 62153802, "body": "No, <code>&#47;proc&#47;self&#47;auxv</code> is provided by the kernel. I strongly recommend upgrading your system."}], "owner": {"reputation": 206, "user_id": 4914961, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2b05aad7fc74b0f7d0a54517056c242c?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Rossert", "link": "https://stackoverflow.com/users/4914961/amir-rossert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 321, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1463642930, "creation_date": 1463593555, "last_edit_date": 1463642930, "question_id": 37306798, "link": "https://stackoverflow.com/questions/37306798/dlopen-proc-self-auxv-permission-denied-rhel6", "title": "dlopen /proc/self/auxv: Permission denied RHEL6", "body": "<p>I have an executable that  need to load an .so file. </p>\n\n<p>Everything is working on Ubunto and RHEL5 but on RHEL6 I'm getting this error on dlopen:\n/proc/self/auxv: Permission denied</p>\n\n<p>If I'm running the executable with root it is working without this error message. </p>\n\n<p>void *handle = dlopen(file_path.c_str(), RTLD_LAZY | RTLD_GLOBAL);</p>\n\n<p>Red Hat Enterprise Linux Server release 6.7 (Santiago)</p>\n\n<p>kernel: 2.6.32-573.26.1.el6.x86_64</p>\n\n<p>gcc (GCC) 4.4.7</p>\n\n<p>ldd (GNU libc) 2.12</p>\n\n<p>What does this file stands for and is there any way to resolve this?</p>\n"}, {"tags": ["c++", "hash", "stl"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 3, "creation_date": 1463592808, "post_id": 37306477, "comment_id": 62134476, "body": "Undefined behavior, as usual, includes &quot;appearing to work&quot;."}, {"owner": {"reputation": 805, "user_id": 2561271, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fadedae50933313f16ab31a67723bee8?s=128&d=identicon&r=PG", "display_name": "Benjamin Pritchard", "link": "https://stackoverflow.com/users/2561271/benjamin-pritchard"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1463596750, "post_id": 37306477, "comment_id": 62136629, "body": "@T.C. Hence wanting to know whether this was defined behavior or not..."}], "answers": [{"comments": [{"owner": {"reputation": 805, "user_id": 2561271, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fadedae50933313f16ab31a67723bee8?s=128&d=identicon&r=PG", "display_name": "Benjamin Pritchard", "link": "https://stackoverflow.com/users/2561271/benjamin-pritchard"}, "edited": false, "score": 1, "creation_date": 1463602744, "post_id": 37308265, "comment_id": 62139803, "body": "My initial confusion was because I thought I was re-defining something (which would violate ODR and shouldn&#39;t compile). Even though I am actually adding a definition, it still violates this rule. (And yes, I am very well aware that undefined behavior may still work sometimes)."}], "tags": [], "owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "is_accepted": true, "score": 1, "last_activity_date": 1463598806, "creation_date": 1463598806, "answer_id": 37308265, "question_id": 37306477, "link": "https://stackoverflow.com/questions/37306477/re-defining-stdhash-template-struct/37308265#37308265", "title": "Re-defining std::hash template struct", "body": "<blockquote>\n  <p><strong>17.6.4.2.1 Namespace std [namespace.std]</strong> </p>\n  \n  <p>1 The behavior of a C++ program is undefined if it adds declarations or definitions to\n  <code>namespace std</code> or to a namespace within <code>namespace std</code> unless otherwise\n  specified. A program may add a template specialization for any\n  standard library template to <code>namespace std</code> only if the declaration\n  depends on a user-defined type and the specialization meets the\n  standard library requirements for the original template and is not\n  explicitly prohibited.</p>\n</blockquote>\n\n<p>Since you redefined a general template that already exists to <code>namespace std</code>, you have undefined behavior. And that includes as @T.C. mentions in the comments, that the program works fine.</p>\n"}], "owner": {"reputation": 805, "user_id": 2561271, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fadedae50933313f16ab31a67723bee8?s=128&d=identicon&r=PG", "display_name": "Benjamin Pritchard", "link": "https://stackoverflow.com/users/2561271/benjamin-pritchard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 559, "favorite_count": 1, "accepted_answer_id": 37308265, "answer_count": 1, "score": 0, "last_activity_date": 1463598806, "creation_date": 1463592586, "last_edit_date": 1463594775, "question_id": 37306477, "link": "https://stackoverflow.com/questions/37306477/re-defining-stdhash-template-struct", "title": "Re-defining std::hash template struct", "body": "<p>Normally, if a hash is needed for a new type, <code>std::hash</code> must be specialized. I wrote a test hashing library and would like to use it for all types not already specialized by the standard library.</p>\n\n<p>I tried the following with gcc/4.9.3 and clang/3.7.0. To my surprise, it works.</p>\n\n<pre><code>#include &lt;utility&gt;\n#include &lt;functional&gt;\n#include &lt;iostream&gt;\n\nnamespace std {\n\ntemplate&lt;typename T&gt;\nclass hash\n{\n    public:\n        size_t operator()(const T &amp; obj)\n        {\n            return 99;\n        }\n};\n}\n\nint main(void)\n{\n    int i = 10;\n    std::pair&lt;int, int&gt; pi{22,33};\n\n    std::hash&lt;int&gt; hi;\n    std::hash&lt;std::pair&lt;int, int&gt;&gt; hpi;\n\n    std::cout &lt;&lt; \"Hash of int: \" &lt;&lt; hi(i) &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"Hash of int pair: \" &lt;&lt; hpi(pi) &lt;&lt; \"\\n\";\n    return 0;\n}\n</code></pre>\n\n<p>The hash of the integer is the integer itself (which is the standard library version) and the hash of the pair is 99.</p>\n\n<p>So two questions.</p>\n\n<ol>\n<li><p>Why does it work? the templated version of <code>std::hash</code> should already be declared. (My only guess is it's in a deeper namespace, which gets forwarded)</p></li>\n<li><p>Is this standard behavior?</p></li>\n</ol>\n\n<p>Edit: Answer to question 1 - <code>template&lt;typename T&gt; struct hash</code> is declared, but doesn't seem to be defined anywhere. That is why I can define it.</p>\n"}, {"tags": ["c++", "templates", "explicit-instantiation"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 5, "creation_date": 1463592546, "post_id": 37306446, "comment_id": 62134332, "body": "<code>#include &quot;test_tpl.cpp&quot;</code>?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1463592631, "post_id": 37306446, "comment_id": 62134371, "body": "Where does the claim in your last sentence come from?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1463592888, "post_id": 37306446, "comment_id": 62134525, "body": "Also see: <a href=\"http://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file\">Why can templates only be implemented in the header file?</a>"}, {"owner": {"reputation": 8220, "user_id": 3305546, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/G2mbe.png?s=128&g=1", "display_name": "Yves", "link": "https://stackoverflow.com/users/3305546/yves"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1463593947, "post_id": 37306446, "comment_id": 62135121, "body": "@SergeyA  if not, we will get link error, right?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1463594212, "post_id": 37306446, "comment_id": 62135242, "body": "<i>@Thomas</i> See @Nathan&#39;s link, that&#39;s not the right way to do it."}, {"owner": {"reputation": 8220, "user_id": 3305546, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/G2mbe.png?s=128&g=1", "display_name": "Yves", "link": "https://stackoverflow.com/users/3305546/yves"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1463595296, "post_id": 37306446, "comment_id": 62135806, "body": "@NathanOliver  thanks for your link but we could include cpp in the head file just like the accepted answer said, right? If not we have to define each instantiation for the template, is this really a good idea? what if we dont know all of the types of instantiations?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1463595962, "post_id": 37306446, "comment_id": 62136162, "body": "Normally one should never include a cpp file.  If you want a separate implementation files the I suggest you use the way that is laid out in the accepted answer."}, {"owner": {"reputation": 8220, "user_id": 3305546, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/G2mbe.png?s=128&g=1", "display_name": "Yves", "link": "https://stackoverflow.com/users/3305546/yves"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1463596202, "post_id": 37306446, "comment_id": 62136311, "body": "@NathanOliver  Yeah. I just read the link in that accepted answer. I should use the c++ key word <code>export</code> for this."}], "answers": [{"comments": [{"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 0, "creation_date": 1463595616, "post_id": 37307087, "comment_id": 62135979, "body": "If you don&#39;t include the CPP file in header, or don&#39;t implement all of template class in header, this process will only enable <code>&lt;int&gt;</code> for <code>func</code> only, and would give linker errors."}, {"owner": {"reputation": 8220, "user_id": 3305546, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/G2mbe.png?s=128&g=1", "display_name": "Yves", "link": "https://stackoverflow.com/users/3305546/yves"}, "reply_to_user": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 0, "creation_date": 1463596039, "post_id": 37307087, "comment_id": 62136214, "body": "@Ajay  Exactly. So it seems that explicit instantiation can limit the instantiations when users use the template. If we don&#39;t want to limit it, I think we have to include the CPP file in header."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 8220, "user_id": 3305546, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/G2mbe.png?s=128&g=1", "display_name": "Yves", "link": "https://stackoverflow.com/users/3305546/yves"}, "edited": false, "score": 0, "creation_date": 1463599814, "post_id": 37307087, "comment_id": 62138276, "body": "@Thomas: Don&#39;t include cpp file, rename it for include as .inl, .hxx ."}, {"owner": {"reputation": 8220, "user_id": 3305546, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/G2mbe.png?s=128&g=1", "display_name": "Yves", "link": "https://stackoverflow.com/users/3305546/yves"}, "edited": false, "score": 0, "creation_date": 1463608647, "post_id": 37307087, "comment_id": 62142515, "body": "@ you mean I just rename the file as <code>test_tpl.hxx</code>? May I know why? Is there any difference?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 8220, "user_id": 3305546, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/G2mbe.png?s=128&g=1", "display_name": "Yves", "link": "https://stackoverflow.com/users/3305546/yves"}, "edited": false, "score": 0, "creation_date": 1463613042, "post_id": 37307087, "comment_id": 62143903, "body": "@Thomas: cpp files are files to compile, so even if <i>name.exe</i> would also &quot;work&quot;, you should not use misleading extensions."}, {"owner": {"reputation": 8220, "user_id": 3305546, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/G2mbe.png?s=128&g=1", "display_name": "Yves", "link": "https://stackoverflow.com/users/3305546/yves"}, "edited": false, "score": 0, "creation_date": 1463614555, "post_id": 37307087, "comment_id": 62144251, "body": "@Jarod42  OK, got it."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 1, "last_activity_date": 1463594627, "creation_date": 1463594627, "answer_id": 37307087, "question_id": 37306446, "link": "https://stackoverflow.com/questions/37306446/c-what-is-explicit-instantiation/37307087#37307087", "title": "c++: what is explicit instantiation", "body": "<p>You will have explicit instantiation with</p>\n\n<p>//test_tpl.h</p>\n\n<pre><code>template&lt;typename T&gt;\nclass Test_tpl\n{\npublic:\n    void func();\n};\n</code></pre>\n\n<p>//test_tpl.cpp</p>\n\n<pre><code>#include \"test_tpl.h\"\n\ntemplate&lt;typename T&gt;\nvoid Test_tpl&lt;T&gt;::func(){} // in cpp, so only available here\n\ntemplate void Test_tpl&lt;int&gt;::func(); // Explicit instantiation here.\n                                     // Available elsewhere.\n</code></pre>\n\n<p>//a.cpp\n    #include \"test_tpl.h\"</p>\n\n<pre><code>// use class Test_tpl&lt;int&gt; here\n</code></pre>\n\n<p>//b.cpp\n    #include \"test_tpl.h\"</p>\n\n<pre><code>// use class Test_tpl&lt;int&gt; here\n</code></pre>\n"}], "owner": {"reputation": 8220, "user_id": 3305546, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/G2mbe.png?s=128&g=1", "display_name": "Yves", "link": "https://stackoverflow.com/users/3305546/yves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 37307087, "answer_count": 1, "score": 1, "last_activity_date": 1463595559, "creation_date": 1463592473, "last_edit_date": 1463595559, "question_id": 37306446, "link": "https://stackoverflow.com/questions/37306446/c-what-is-explicit-instantiation", "title": "c++: what is explicit instantiation", "body": "<p>I'm reading the book C++ primer 5th edition and I got this:<br></p>\n\n<blockquote>\n  <p>The fact that instantiations are generated when a template is used (\u00a7\n  16.1.1, p. 656) means that the same instantiation may appear in multiple object files. When two or more separately compiled source\n  files use the same template with the same template arguments, there is\n  an instantiation of that template in each of those files.</p>\n</blockquote>\n\n<p>I'm not sure if I got it correctly so I made an example here:<br></p>\n\n<pre><code>//test_tpl.h\ntemplate&lt;typename T&gt;\nclass Test_tpl\n{\npublic:\n    void func();\n};\n\n#include \"test_tpl.cpp\"\n\n\n//test_tpl.cpp\ntemplate&lt;typename T&gt;\nvoid Test_tpl&lt;T&gt;::func(){}\n\n\n//a.cpp\n#include \"test_tpl.h\"\n\n// use class Test_tpl&lt;int&gt; here\n\n\n//b.cpp\n#include \"test_tpl.h\"\n\n// use class Test_tpl&lt;int&gt; here\n</code></pre>\n\n<p>According to the paragraph above, in this example, Test_tpl is instantiated(<code>Test_tpl&lt;int&gt;</code>) twice. Now if we use explicit instantiation, <code>Test_tpl&lt;int&gt;</code> should be instantiated only once, but I don't know how to use this technique for this example.</p>\n"}, {"tags": ["c++", "visual-studio", "mpi"], "comments": [{"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 0, "creation_date": 1463592908, "post_id": 37306369, "comment_id": 62134539, "body": "You need to change the code, and update appropriate <code>MPI_*</code> function call"}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "reply_to_user": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 0, "creation_date": 1463598766, "post_id": 37306369, "comment_id": 62137705, "body": "@Ajay No, this has nothing to do with the calls inside the application."}, {"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 0, "creation_date": 1463598895, "post_id": 37306369, "comment_id": 62137765, "body": "Then what is <code>mpiexec.exe</code> ? I don&#39;t think it is relevant to VS"}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 1, "creation_date": 1463599247, "post_id": 37306369, "comment_id": 62137964, "body": "Please note that MPI is about having multiple processes (also called ranks), not threads. I fixed it in your question,  but make sure to not confuse the two."}, {"owner": {"reputation": 559, "user_id": 4714510, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Gu5uj.png?s=128&g=1", "display_name": "RevakoOA", "link": "https://stackoverflow.com/users/4714510/revakooa"}, "reply_to_user": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 0, "creation_date": 1463604957, "post_id": 37306369, "comment_id": 62140876, "body": "@Ajay, I told that mpiexec.exe is my workaroud, but it&#39;s unuseful and I want to know better way. It really has no relation to VS."}], "answers": [{"tags": [], "owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "is_accepted": true, "score": 1, "last_activity_date": 1463607497, "last_edit_date": 1463607497, "creation_date": 1463604641, "answer_id": 37309885, "question_id": 37306369, "link": "https://stackoverflow.com/questions/37306369/how-to-set-number-of-processes-in-mpi-in-visualstudio/37309885#37309885", "title": "How to set number of processes in MPI in VisualStudio?", "body": "<p>Those are separate processes, not threads. So as far as I can see there are two options:</p>\n\n<ol>\n<li><p>Start processes running, look at the ids in process explorer and attach VS debugger to selected one.</p></li>\n<li><p>Try to use windbg, along the lines</p>\n\n<pre><code>mpiexec.exe -n 4 windbg program.exe\n</code></pre></li>\n</ol>\n\n<p>(it might need launching via <code>start</code>)</p>\n"}], "owner": {"reputation": 559, "user_id": 4714510, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Gu5uj.png?s=128&g=1", "display_name": "RevakoOA", "link": "https://stackoverflow.com/users/4714510/revakooa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2065, "favorite_count": 0, "closed_date": 1464281189, "accepted_answer_id": 37309885, "answer_count": 1, "score": 1, "last_activity_date": 1463607497, "creation_date": 1463592240, "last_edit_date": 1463605797, "question_id": 37306369, "link": "https://stackoverflow.com/questions/37306369/how-to-set-number-of-processes-in-mpi-in-visualstudio", "closed_reason": "Duplicate", "title": "How to set number of processes in MPI in VisualStudio?", "body": "<p>When I press start in VisualStudio my MPI project executes only with one process. </p>\n\n<p>I can build it and then run in console </p>\n\n<blockquote>\n  <p>mpiexec.exe -n 4 program.exe</p>\n</blockquote>\n\n<p>and program running with 4 processes. But I want to be able to debug it. </p>\n\n<p>Where/How can I set an option for number of processes in VS?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1463591892, "post_id": 37306228, "comment_id": 62133964, "body": "Your function declares the parameter <code>G</code> to be an <code>int</code>, but you are calling the function with an argument of type <code>int[4][4]</code>. That doesn&#39;t make sense."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1463592189, "creation_date": 1463592189, "answer_id": 37306351, "question_id": 37306228, "link": "https://stackoverflow.com/questions/37306228/main-cpp6312-error-invalid-conversion-from-int-4-to-int-fpermissi/37306351#37306351", "title": "main.cpp:63:12: error: invalid conversion from &#39;int (*)[4]&#39; to &#39;int&#39; [-fpermissive]. What am I doing wrong?", "body": "<p>You are using <code>G</code> as a 2D array in <code>dfs</code>. The declaration of the function should reflect that. Instead of</p>\n\n<pre><code>void dfs(int ,int );\n</code></pre>\n\n<p>use</p>\n\n<pre><code>void dfs(int (*G)[4], int k);\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 5615399, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/f06b17f967608e32d251a2f562d1b800?s=128&d=identicon&r=PG&f=1", "display_name": "UserMeli", "link": "https://stackoverflow.com/users/5615399/usermeli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1463592189, "creation_date": 1463591780, "last_edit_date": 1463591975, "question_id": 37306228, "link": "https://stackoverflow.com/questions/37306228/main-cpp6312-error-invalid-conversion-from-int-4-to-int-fpermissi", "title": "main.cpp:63:12: error: invalid conversion from &#39;int (*)[4]&#39; to &#39;int&#39; [-fpermissive]. What am I doing wrong?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;limits.h&gt;\n#include &lt;iostream&gt;\n\n#define V 5\nusing namespace std;\n\nvoid dfs(int ,int );\nint kante(int, int);//edge\nint G[V][V];// Graph\nint i;\nint mark[10];// mark the vertex, if it's been visited\nint S[V]; // Stack, with the nodes\nint ps; // counter of nodes in S\nint j,Kn; \nint l;\n\nvoid dfs(int G,int k){\n    for(int j=1; j&lt;=V; j++)\n       mark[j]=0; // initialise all nodes as unvisited\nS[1]=k;  // starting node=k\nps=1; // S has one element\nwhile(ps&gt;0){\n    Kn==S[ps]; \n    for(int i=1;i&lt;=V;i++){// check for neighbour\n        if (mark[i]==1) ps=ps-1; // already visited--&gt;delete the node from S\n        else\n            if(mark[i]==0)// not visited\n            {\n                if ((G[i][Kn]!=0) || (G[Kn][i]!=0)){// Kn adjacent with i\n                    dfs(G,i); // do the same for node i\n                    mark[i]=1; // mark it as visited\n                    ps++;\n                    S[ps]=i; // put it in stack\n                }\n            }\n    }\n\n   }\n   }\n\n\nint main(){\nint G[4][4]={{0,1,1,0},\n             {0,0,1,0},\n             {1,0,0,1},\n             {0,0,0,1},\n};\ncout&lt;&lt;\"Tiefensuche, startknoten 0:\\n\"&lt;&lt;endl; // DFS, starting node\n\ndfs(G,0); // applied dfs on starting node 0 \n\n\nreturn 0;\n}\n</code></pre>\n\n<p>I don't understand why this doesn't work. This code should be traversing the graph in the depth by visiting all the nodes. How can I redefine the Graph(Matrix) so that it can be passed as a parameter to the function dfs. \nI get the following errors:</p>\n\n<pre><code>main.cpp:42:29: error: invalid types 'int[int]' for array subscript\n                     if ((G[i][Kn]!=0) || (G[Kn][i]!=0)){\n                             ^\nmain.cpp:42:47: error: invalid types 'int[int]' for array subscript\n                     if ((G[i][Kn]!=0) || (G[Kn][i]!=0)){\n                                               ^\nmain.cpp: In function 'int main()':\nmain.cpp:63:12: error: invalid conversion from 'int (*)[4]' to 'int' [-fpermissive]\n     dfs(G,0); \n            ^\nmain.cpp:30:6: note:   initializing argument 1 of 'void dfs(int, int)'\n void dfs(int G,int k){\n</code></pre>\n"}, {"tags": ["c++", "icc"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1463591686, "post_id": 37306154, "comment_id": 62133845, "body": "Get rid of the <code>= 0</code> part in the first example?  Is this your code or someone else?"}, {"owner": {"reputation": 13, "user_id": 6352219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7d3ee1804a1c450f0b64744232767c5?s=128&d=identicon&r=PG&f=1", "display_name": "D. Mann", "link": "https://stackoverflow.com/users/6352219/d-mann"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1463591830, "post_id": 37306154, "comment_id": 62133925, "body": "This is 3rd party library code, so someone else&#39;s. I&#39;m concerned if I get rid of the 0 initialization value, I&#39;ll create a bug."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 2, "creation_date": 1463591913, "post_id": 37306154, "comment_id": 62133971, "body": "<code>0</code> and <code>std::list&lt;BVNode&lt;ON_BoundingBox&gt;*&gt;</code> are different types, and the latter is not constructible from the former (except when <i>explicitly</i> invoking a compatible c&#39;tor). This is a bug that no compliant compiler should know how to translate anyway."}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "edited": false, "score": 0, "creation_date": 1463591916, "post_id": 37306154, "comment_id": 62133973, "body": "Anything that&#39;s relying on that default is broken"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1463592035, "post_id": 37306154, "comment_id": 62134047, "body": "I would suggest getting a different library then.  If they have code like that then there is bound to be other issues."}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "edited": false, "score": 0, "creation_date": 1463592064, "post_id": 37306154, "comment_id": 62134065, "body": "In <a href=\"http://diyhpl.us/~bryan/irc/brlcad/include/brep.h\" rel=\"nofollow noreferrer\">this header file</a>, the <code>= 0</code> jas been removed, perhaps you&#39;re using an old version?"}, {"owner": {"reputation": 13, "user_id": 6352219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7d3ee1804a1c450f0b64744232767c5?s=128&d=identicon&r=PG&f=1", "display_name": "D. Mann", "link": "https://stackoverflow.com/users/6352219/d-mann"}, "edited": false, "score": 0, "creation_date": 1463592226, "post_id": 37306154, "comment_id": 62134157, "body": "These are some good observations. So are you saying it should be fine to just drop the default initialization value, since it&#39;s not the right type, anyway?"}, {"owner": {"reputation": 13, "user_id": 6352219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7d3ee1804a1c450f0b64744232767c5?s=128&d=identicon&r=PG&f=1", "display_name": "D. Mann", "link": "https://stackoverflow.com/users/6352219/d-mann"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1463592291, "post_id": 37306154, "comment_id": 62134196, "body": "@NathanOliver, getting another library simply isn&#39;t an option."}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "edited": false, "score": 0, "creation_date": 1463592300, "post_id": 37306154, "comment_id": 62134198, "body": "It&#39;s definitely not the right type - hence the compiler error. Instead of editing the file, perhaps you should upgrade. I see the latest version is <a href=\"https://sourceforge.net/projects/brlcad/files/BRL-CAD%20for%20Linux/\" rel=\"nofollow noreferrer\">7.24.2</a> - what version are you running?"}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "edited": false, "score": 0, "creation_date": 1463592383, "post_id": 37306154, "comment_id": 62134240, "body": "I just downloaded the <a href=\"https://sourceforge.net/projects/brlcad/files/BRL-CAD%20Source/7.24.2/\" rel=\"nofollow noreferrer\">source for 7.24.2</a> and the signature has been fixed. <code>.&#47;include&#47;brep.h:964:    bool intersectsHierarchy(ON_Ray&amp; ray, std::list&lt;BVNode&lt;ON_BoundingBox&gt;*&gt;&amp; results);</code>"}, {"owner": {"reputation": 13, "user_id": 6352219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7d3ee1804a1c450f0b64744232767c5?s=128&d=identicon&r=PG&f=1", "display_name": "D. Mann", "link": "https://stackoverflow.com/users/6352219/d-mann"}, "reply_to_user": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "edited": false, "score": 0, "creation_date": 1463592813, "post_id": 37306154, "comment_id": 62134480, "body": "@SteveLorimer, thanks for pointing out the change in later versions. I made the change in the header for the version I&#39;m using and it fixed the compilation error problem. The reason we haven&#39;t yet updated to the latest version, is because we&#39;re linking to the static library libbrlcad.a and the new build process no longer produces that library, no matter what configuration settings I&#39;ve tried. Any ideas how to handle that?"}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "edited": false, "score": 0, "creation_date": 1463594725, "post_id": 37306154, "comment_id": 62135508, "body": "There are a bunch of prebuilt downloads on the site - are you sure you can&#39;t get the library from there? Otherwise you could build from source. I don&#39;t know what your build process is, so I can&#39;t be more helpful I&#39;m afraid"}], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1463668527, "post_id": 37306645, "comment_id": 62171994, "body": "<i>&quot;You can only pass a variable by reference not a const value&quot;</i> - You can very well bind a reference to an integer literal. You cannot bind an lvalue reference to a constant, but it&#39;s irrelevant, whether this constant is an integer literal, or a const variable."}], "tags": [], "owner": {"reputation": 805, "user_id": 3857473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fef4a561dd16de766dce81f87f345e74?s=128&d=identicon&r=PG&f=1", "display_name": "Vikash Kesarwani", "link": "https://stackoverflow.com/users/3857473/vikash-kesarwani"}, "is_accepted": true, "score": -1, "last_activity_date": 1463593082, "creation_date": 1463593082, "answer_id": 37306645, "question_id": 37306154, "link": "https://stackoverflow.com/questions/37306154/fix-3rd-party-library-code-initialization-of-a-class-member-function-reference-p/37306645#37306645", "title": "Fix 3rd party library code initialization of a class member function reference parameter with a constant", "body": "<p>remove the  <code>= 0</code> part -</p>\n\n<ol>\n<li>You cannot assign 0 to a list</li>\n<li>You can only pass a variable by reference not a <code>const</code> value</li>\n</ol>\n"}], "owner": {"reputation": 13, "user_id": 6352219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7d3ee1804a1c450f0b64744232767c5?s=128&d=identicon&r=PG&f=1", "display_name": "D. Mann", "link": "https://stackoverflow.com/users/6352219/d-mann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 37306645, "answer_count": 1, "score": 0, "last_activity_date": 1463593082, "creation_date": 1463591537, "question_id": 37306154, "link": "https://stackoverflow.com/questions/37306154/fix-3rd-party-library-code-initialization-of-a-class-member-function-reference-p", "title": "Fix 3rd party library code initialization of a class member function reference parameter with a constant", "body": "<p>When compiling a 3rd party library, I get \"error: initial value of reference to non-const must be an lvalue\". The error is occurring in a C++ Class definition in this declaration of a member function:</p>\n\n<pre><code>bool intersectsHierarchy(ON_Ray&amp; ray, std::list&lt;BVNode&lt;ON_BoundingBox&gt;*&gt;&amp; results = 0);\n</code></pre>\n\n<p>Based on information I found on the web, I tried to make the initialized parameter be const, as follows:</p>\n\n<pre><code>bool intersectsHierarchy(ON_Ray&amp; ray, const std::list&lt;BVNode&lt;ON_BoundingBox&gt;*&gt;&amp; results = 0);\n</code></pre>\n\n<p>But that just causes another compilation error.</p>\n\n<p>Any ideas how to best fix this and get my library to compile?</p>\n"}, {"tags": ["c++", "algorithm", "math"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1463591565, "post_id": 37306116, "comment_id": 62133782, "body": "Is this a different question from <a href=\"http://stackoverflow.com/q/37300684\">stackoverflow.com/q/37300684</a>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5448913"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1463591650, "post_id": 37306116, "comment_id": 62133830, "body": "Absolutely, after solving the first issue with calculating EMA&#39;s (thanks to Rakete1111) I am now focused on the algorithm itself."}], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 2579438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/849e4c356152bd70c8bd1fe9d6be866b?s=128&d=identicon&r=PG", "display_name": "Olivier", "link": "https://stackoverflow.com/users/2579438/olivier"}, "is_accepted": false, "score": 0, "last_activity_date": 1513475330, "last_edit_date": 1513475330, "creation_date": 1513473898, "answer_id": 47851458, "question_id": 37306116, "link": "https://stackoverflow.com/questions/37306116/coding-the-pq-rule-using-exponential-moving-average-in-c/47851458#47851458", "title": "Coding the P&amp;Q rule using Exponential Moving Average in C++", "body": "<p>P and Q are thresholds or EMA variations between two dates in that case.</p>\n\n<p>P will be the variation between the first observation and the current one. If P is positive then you can assume the trend is up and down for P&lt;0. </p>\n\n<p>Q is a variation of EMA too but used to know when to close a position, it is the difference between the highest (lowest) EMA value from the first observation and the current one for an up (down) trend.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5448913"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513475330, "creation_date": 1463591407, "question_id": 37306116, "link": "https://stackoverflow.com/questions/37306116/coding-the-pq-rule-using-exponential-moving-average-in-c", "title": "Coding the P&amp;Q rule using Exponential Moving Average in C++", "body": "<p>I am developing a small trading robot using C++ as an exercise. He will receive at first basic information such as our capital, and day to day stock values (represented as iterations).</p>\n\n<p>Here is my <code>Trade</code> class:</p>\n\n<pre><code>class   Trade\n{\nprivate:\n  int                   capital_;\n  int                   days_; // Total number of days of available stock prices                                       \n  int                   daysInTrading_; // Increments as days go by.                                                   \n  std::list&lt;int&gt;        stockPrices_; // Contains stock prices day after day.                                          \n  int                   currentStock_; // Current stock we are dealing with.                                           \n  int                   lastStock_; // Last stock dealt with                                                           \n  int                   trend_;                                          \n  int                   numOfStocks_; // Amount of stock options in our possession\n  float                 EMA_; // Exponential Moving Average                                                            \n  float                 lastEMA_; // Last EMA                                                                          \n\npublic:\n// functions                              \n};\n</code></pre>\n\n<p>As you can tell from the last two attributes, I am using the Exponential Moving Average principle with a Trend Following Algorithm.</p>\n\n<p>I've read about it through this paper <a href=\"http://www.cis.umac.mo/~fstasp/paper/jetwi2011.pdf\" rel=\"nofollow\">http://www.cis.umac.mo/~fstasp/paper/jetwi2011.pdf</a> (mainly on page 3) and wish to implement the Pseudo code they have shared with us; it goes like such:</p>\n\n<pre><code>Repeat  \nCompute EMA(T)  \nIf no position opened \n   If EMA(T) &gt;= P\n      If trend is going up \n        Open a long position \n      Else if trend is going down  \n        Open a short position \nElse if any position is opened \n   If EMA(\u00acT) &gt;= Q\n     Close position \n   If end of market  \n     Close all opened position \nUntil market close \n</code></pre>\n\n<p>And here's how I've gone about it so far:</p>\n\n<pre><code>void    Trade::scanTrend()\n{                 \n  if (this-&gt;numOfStocks_ == 0) // If no position is opened\n    {\n      this-&gt;EMA_ = this-&gt;calcEMA(); // Calculates the EMA\n      if (this-&gt;EMA_ &gt;= this-&gt;currentStock_) //  If EMA(T) &gt;= P\n        {\n          if (this-&gt;EMA_ &gt; this-&gt;lastEMA_) // If trend is going up\n            // Trend is going up, open a long position\n          else if (this-&gt;EMA_ &lt; this-&gt;lastEMA_) // If trend is going down\n            // Trend is going down, open a short position                                                                                  \n        }\n    }\n  else // Else if any position is opened \n    {\n      this-&gt;EMA_ = this-&gt;calcEMA();\n      // How may I represent closing positions?\n    }\n  this-&gt;lastEMA_ = this-&gt;EMA_;\n}\n</code></pre>\n\n<p>My problem comes from not understanding the act of \"opening\" and \"closing\" a position. Does it have anything to do with buying or selling stock? Does what I have so far seem fitting with the pseudo code?</p>\n"}, {"tags": ["c++", "class", "oop", "vector", "struct"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 3673393, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/100000915090493/picture?type=large", "display_name": "ivanciprian", "link": "https://stackoverflow.com/users/3673393/ivanciprian"}, "edited": false, "score": 0, "creation_date": 1463591417, "post_id": 37306097, "comment_id": 62133685, "body": "Yeap, I have just figured that out. Dumb me..Thanks!"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 83, "user_id": 3673393, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/100000915090493/picture?type=large", "display_name": "ivanciprian", "link": "https://stackoverflow.com/users/3673393/ivanciprian"}, "edited": false, "score": 0, "creation_date": 1463591440, "post_id": 37306097, "comment_id": 62133702, "body": "@epanicafrate no problem, feel free to mark as the correct answer."}], "tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": true, "score": 3, "last_activity_date": 1463591564, "last_edit_date": 1463591564, "creation_date": 1463591362, "answer_id": 37306097, "question_id": 37306024, "link": "https://stackoverflow.com/questions/37306024/vector-within-struct-within-class/37306097#37306097", "title": "Vector within struct within class", "body": "<p><code>Articole</code> is a <code>std::vector</code> and <code>std::vector</code> has no member <code>Nume</code>. The error is very clear. You need to get an element from the <code>std::vector</code> <code>Articole</code>:</p>\n\n<pre><code>Object.Articole[x].Nume[j]\n</code></pre>\n\n<p>Just make sure that element at index <code>x</code> exists (or use <code>.at(</code> or iterators or anything else, see <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow\"><code>std::vector</code> here</a>). </p>\n"}], "owner": {"reputation": 83, "user_id": 3673393, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/100000915090493/picture?type=large", "display_name": "ivanciprian", "link": "https://stackoverflow.com/users/3673393/ivanciprian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 37306097, "answer_count": 1, "score": 0, "last_activity_date": 1463591564, "creation_date": 1463591169, "question_id": 37306024, "link": "https://stackoverflow.com/questions/37306024/vector-within-struct-within-class", "title": "Vector within struct within class", "body": "<p>So, I have this struct:</p>\n\n<pre><code>struct Articol\n{\nvector &lt;char*&gt; Nume;\nchar* Titlu;\nint An;\nvector &lt;int&gt; Pagini;\n};\n</code></pre>\n\n<p>and this class:</p>\n\n<pre><code>class Bibliografie\n{\nint nr_art, nr_carti, nr_pagini;\nvector &lt;Articol&gt; Articole;\n};\n</code></pre>\n\n<p>and the following line of code:</p>\n\n<pre><code>cout &lt;&lt; Object.Articole.Nume[j] &lt;&lt; \" \";\n</code></pre>\n\n<p>that generates this error:</p>\n\n<pre><code>error: \u2018class std::vector&lt;Articol&gt;\u2019 has no member named \u2018Nume\u2019\n</code></pre>\n\n<p>How can I fix that?</p>\n"}, {"tags": ["c++", "stringstream", "ofstream", "ziparchive"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1463590597, "post_id": 37305757, "comment_id": 62133241, "body": "No it&#39;s not possible in standard C++, you need support from some external library to handle ZIP archives."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1463590809, "post_id": 37305757, "comment_id": 62133346, "body": "You&#39;ll need to write your own functions (e.g. a <code>std::streambuf</code> wrapper) on top of the <code>lzma</code> or <code>7z</code> libraries."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 2, "creation_date": 1463591156, "post_id": 37305757, "comment_id": 62133519, "body": "FWIW, I know the <a href=\"https://bitbucket.org/wbenny/ziplib/wiki/Home\" rel=\"nofollow noreferrer\">ZipLib</a> library is capable of a stream to an individual file."}], "answers": [{"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 0, "last_activity_date": 1463593957, "last_edit_date": 1463593957, "creation_date": 1463592689, "answer_id": 37306509, "question_id": 37305757, "link": "https://stackoverflow.com/questions/37305757/setting-stdofstream-to-zip-archived-file/37306509#37306509", "title": "Setting std::ofstream to zip archived file", "body": "<blockquote>\n  <p>can i do something like :</p>\n\n<pre><code>std::ofstream ostr(\"/tmp/data.zip/data1.log\", std::ios::binary);\n</code></pre>\n  \n  <p>and start pushing data using the '&lt;&lt;' operator ?</p>\n</blockquote>\n\n<p>No, that's not possible.<br>\nAlso note the <a href=\"http://en.cppreference.com/w/cpp/io/basic_ostream/operator_ltlt2\" rel=\"nofollow\"><code>std::ostream&amp; operator&lt;&lt;(std::ostream&amp;,const T&amp;)</code></a> operator is explicitly reserved for text formatted output, not to write binary data.</p>\n\n<p>To achieve such you would need a <a href=\"http://en.cppreference.com/w/cpp/io/basic_streambuf\" rel=\"nofollow\"><code>std::streambuf</code></a> implementation, that wraps the incoming character data to a file that is (finally?) compressed and added to  the archive.</p>\n\n<p>The C++ standard library has no notion how to magically interact with binary <code>.zip</code> files.</p>\n\n<p>Also what would you mean <em>\"start pushing data\"</em>? A <code>.zip</code> archive also contains information about particular compressed file names and their relative paths.</p>\n\n<p>How would you interact with the <code>std::ofstream</code> interface to specify which file's data to add actually?</p>\n\n<hr>\n\n<p>You should research on c++ wrappers for the <a href=\"http://7-zip.org/sdk.html\" rel=\"nofollow\">LZMA/7zip</a> library, that let you control adding files to archives.</p>\n"}], "owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1015, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1463593957, "creation_date": 1463590311, "question_id": 37305757, "link": "https://stackoverflow.com/questions/37305757/setting-stdofstream-to-zip-archived-file", "title": "Setting std::ofstream to zip archived file", "body": "<p>I'd like to write some files directly to zip archive file (rather that creating them first on some folder and copy them to the archive on the second stage). \nTherefore, i'm wondering if there's an option to set the ofstream to point directly on the file inside the archive. </p>\n\n<p>for example, say i have archive in /tmp called data.zip, and inside it there's a file data1.log</p>\n\n<p>can i do something like :</p>\n\n<pre><code>std::ofstream ostr(\"/tmp/data.zip/data1.log\", std::ios::binary);\n</code></pre>\n\n<p>and start pushing data using the '&lt;&lt;' operator ? </p>\n\n<p>thanks,</p>\n"}, {"tags": ["c++", "file-io", "ifstream"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1463590577, "post_id": 37305722, "comment_id": 62133224, "body": "You should read about why <a href=\"http://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\"><code>while (!file.eof())</code> is always wrong</a>."}, {"owner": {"reputation": 1, "user_id": 5904091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd9884b3bf44f55ad205de5de8b24e05?s=128&d=identicon&r=PG&f=1", "display_name": "user5904091", "link": "https://stackoverflow.com/users/5904091/user5904091"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1463590906, "post_id": 37305722, "comment_id": 62133403, "body": "I&#39;m successfully reading the entire file into my vector ( I have checked this), so is this is not my issue, though it is something I will read more into as it seems more of just a c++ best practice."}, {"owner": {"reputation": 237, "user_id": 2475001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4a1c8f24170d74a620eab3dd8684dc4?s=128&d=identicon&r=PG", "display_name": "ponayz", "link": "https://stackoverflow.com/users/2475001/ponayz"}, "edited": false, "score": 0, "creation_date": 1463591601, "post_id": 37305722, "comment_id": 62133805, "body": "have you try to check the badbit set by the open when it fails ? are you sure the path are correct ?"}, {"owner": {"reputation": 1, "user_id": 5904091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd9884b3bf44f55ad205de5de8b24e05?s=128&d=identicon&r=PG&f=1", "display_name": "user5904091", "link": "https://stackoverflow.com/users/5904091/user5904091"}, "edited": false, "score": 0, "creation_date": 1463591983, "post_id": 37305722, "comment_id": 62134006, "body": "The badbit for every single open returns 1, and yes im positive the paths are correct."}], "owner": {"reputation": 1, "user_id": 5904091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd9884b3bf44f55ad205de5de8b24e05?s=128&d=identicon&r=PG&f=1", "display_name": "user5904091", "link": "https://stackoverflow.com/users/5904091/user5904091"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1463590213, "creation_date": 1463590213, "question_id": 37305722, "link": "https://stackoverflow.com/questions/37305722/opening-list-of-files-with-same-ifstream-only-the-last-file-in-the-list-success", "title": "Opening list of files with same ifstream, only the last file in the list successfully opens", "body": "<p>I have a text file containing a list of files seperated by line.\nI'm trying to open each file, and then process the data within each, however the ONLY file that successfully opens is the LAST file in the list. Any idea why this is happening? </p>\n\n<p>input file looks like this:</p>\n\n<pre><code>Microsoft Office Professional Plus 2010.txt\nMicrosoft Office OneNote MUI (English) 2010.txt\nMicrosoft Office InfoPath MUI (English) 2010.txt\nMicrosoft Office 2010 Primary Interop Assemblies.txt\nMicrosoft Office Access MUI (English) 2010.txt\n</code></pre>\n\n<p>Source code:</p>\n\n<pre><code>void loadCVEDescription(char* CVEDescList) {\n    vector&lt;string&gt; fileList;\n    ifstream inputFile(CVEDescList);\n    string descfile = \"\";\n\n    while(!inputFile.eof()){\n        getline(inputFile,descfile);\n        descfile = \"C:\\\\path\\\\path\\\\\" + descfile;\n        fileList.push_back(descfile);\n    }\n    inputFile.close();\n\n    for(size_t t = 0; t &lt; fileList.size(); t++){\n        ifstream dataFile;\n        string pname = descfile.substr(descfile.find_last_of(\"\\\\\")+1,descfile.find(\".txt\"));\n        int i = findProductIndex(pname);\n/*\n  findProductIndex(string pname) searches product[] and returns the index \n  at which products[i].productName matches pname\n*/\n         dataFile.open(fileList[t]);\n         if(dataFile.is_open()){\n             cout &lt;&lt; fileList[t] &lt;&lt; \" success\" &lt;&lt; endl;\n        }\n\n        dataFile.close();\n        dataFile.clear();\n\n    }\n\n}\n</code></pre>\n\n<p>The ONLY file which successfully opens is the LAST one in the input file.</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 9, "creation_date": 1463590040, "post_id": 37305626, "comment_id": 62132923, "body": "Why not make an vector that has 0-9 in it, shuffle it and then grab the first 4 elements?"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1463590154, "post_id": 37305626, "comment_id": 62132988, "body": "You probably want <a href=\"http://en.cppreference.com/w/cpp/algorithm/find\" rel=\"nofollow noreferrer\"><code>std::find</code></a>. Look at what <a href=\"http://en.cppreference.com/w/cpp/header/algorithm\" rel=\"nofollow noreferrer\">algortihms</a> are available and what <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>vector</code></a> has to offer."}, {"owner": {"reputation": 57, "user_id": 5810997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/I1eei.jpg?s=128&g=1", "display_name": "B.Sabres15", "link": "https://stackoverflow.com/users/5810997/b-sabres15"}, "edited": false, "score": 0, "creation_date": 1463590402, "post_id": 37305626, "comment_id": 62133120, "body": "Honestly, because I haven&#39;t learned how to shuffle a vector. This is an exercise from a book I&#39;m reading and they want you to use randint(). Also I will need to know how because the other part of the program is supposed to have the user enter their own four numbers to try to guess my four numbers. On top of that they have to guess the numbers in the correct order as well. So I&#39;m going to need to be able to test again like this throughout the program. Im stumped right now."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 5810997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/I1eei.jpg?s=128&g=1", "display_name": "B.Sabres15", "link": "https://stackoverflow.com/users/5810997/b-sabres15"}, "edited": false, "score": 0, "creation_date": 1463591089, "post_id": 37305715, "comment_id": 62133482, "body": "I am sure you guys are both correct, std:: hasn&#39;t been taught yet, so I will have to do some research on that. I&#39;m sure they wanted me to use what has been covered thus far, but that gives me another way that I can research which is never bad. Thanks guys!"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 57, "user_id": 5810997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/I1eei.jpg?s=128&g=1", "display_name": "B.Sabres15", "link": "https://stackoverflow.com/users/5810997/b-sabres15"}, "edited": false, "score": 1, "creation_date": 1463591666, "post_id": 37305715, "comment_id": 62133837, "body": "@B.Sabres15 Well if you&#39;re using a vector, then thats <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a>. Most of the <a href=\"http://en.cppreference.com/w/cpp/container\" rel=\"nofollow noreferrer\">standard containers</a> have a similar interface (set if member functions), so if you can use one then learning another is not so much work."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 8, "last_activity_date": 1463590515, "last_edit_date": 1463590515, "creation_date": 1463590197, "answer_id": 37305715, "question_id": 37305626, "link": "https://stackoverflow.com/questions/37305626/generate-a-set-of-unique-elements-in-range/37305715#37305715", "title": "Generate a set of unique elements in range", "body": "<p>How about using <a href=\"http://en.cppreference.com/w/cpp/container/unordered_set\" rel=\"nofollow\"><code>std::unordered_set</code></a> to store the numbers? Add to it as long as the size is less than four (in e.g. a loop).</p>\n\n<p>If you need it in a vector then you can create the vector after generating the numbers in the set.</p>\n"}, {"tags": [], "owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "is_accepted": false, "score": 0, "last_activity_date": 1463590962, "creation_date": 1463590962, "answer_id": 37305956, "question_id": 37305626, "link": "https://stackoverflow.com/questions/37305626/generate-a-set-of-unique-elements-in-range/37305956#37305956", "title": "Generate a set of unique elements in range", "body": "<p>You can use <code>lower_bound</code> to find the right insertion point to keep your vector in order.  Then you can use <code>binary_search</code> to tell if any element is in the vector before you do the insert.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1463592263, "post_id": 37306091, "comment_id": 62134180, "body": "Or just use std::shuffle"}, {"owner": {"reputation": 4506, "user_id": 3344612, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/jwgap.jpg?s=128&g=1", "display_name": "Teivaz", "link": "https://stackoverflow.com/users/3344612/teivaz"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1463592706, "post_id": 37306091, "comment_id": 62134419, "body": "I&#39;ve added limit to the loop so it can be stopped earlier than reaches the end of vector."}, {"owner": {"reputation": 57, "user_id": 5810997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/I1eei.jpg?s=128&g=1", "display_name": "B.Sabres15", "link": "https://stackoverflow.com/users/5810997/b-sabres15"}, "edited": false, "score": 0, "creation_date": 1463594896, "post_id": 37306091, "comment_id": 62135596, "body": "Thank you this is very helpful!"}], "tags": [], "owner": {"reputation": 4506, "user_id": 3344612, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/jwgap.jpg?s=128&g=1", "display_name": "Teivaz", "link": "https://stackoverflow.com/users/3344612/teivaz"}, "is_accepted": true, "score": 1, "last_activity_date": 1463600226, "last_edit_date": 1463600226, "creation_date": 1463591350, "answer_id": 37306091, "question_id": 37305626, "link": "https://stackoverflow.com/questions/37305626/generate-a-set-of-unique-elements-in-range/37306091#37306091", "title": "Generate a set of unique elements in range", "body": "<p>What you are looking for is a shuffle algorithm of <a href=\"https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle\" rel=\"nofollow\">Fisher-Yets</a></p>\n\n<p>You create an array of elements <code>{0, 1, 2, 3, 4, 5, 6, 7, 8, 9}</code>\n. Then walk through each element swapping it with a random index in range</p>\n\n<pre><code>std::vector&lt;int&gt; GenerateRandomUniqueNumbers(int len)\n{\n    if(len &gt; 10) // Early exit\n        return std::vector&lt;int&gt;();\n\n    std::vector&lt;int&gt; range(10);\n    std::iota(range.begin(), range.end(), 0); \n    // or just\n    // std::vector&lt;int&gt; range = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9};\n\n    for(int i = 0; i &lt; len; ++i) \n    {\n        int j = random() % range.size();\n        std::swap(range[i], range[j]);\n    }\n    range.resize(len);\n    return range;\n}\n</code></pre>\n\n<p>And then get first four elements of your array <code>Range</code>.</p>\n\n<p>You can limit for loop to only four iterations.</p>\n"}], "owner": {"reputation": 57, "user_id": 5810997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/I1eei.jpg?s=128&g=1", "display_name": "B.Sabres15", "link": "https://stackoverflow.com/users/5810997/b-sabres15"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 37306091, "answer_count": 3, "score": 2, "last_activity_date": 1463600226, "creation_date": 1463589907, "last_edit_date": 1463598599, "question_id": 37305626, "link": "https://stackoverflow.com/questions/37305626/generate-a-set-of-unique-elements-in-range", "title": "Generate a set of unique elements in range", "body": "<p>To start I am just learning C++. </p>\n\n<p>I am trying to create a vector of four different ints ranging from 0:9. I am using a seed and randint() function to get different random numbers each time the program is ran. The problem I have is after receiving the random number how do I confirm that value isn't already held in the vector. Example of my code. </p>\n\n<pre><code>int seed()\n{\n    // Produce computers numbers\n    int seed;\n    int x;\n    cout &lt;&lt; \"Please enter any Integer!\\n\";\n    cin &gt;&gt; x;\n    seed = randint(x) % 10;\n    return seed;\n}\n\nint main ()\n{\n    while(keys.size() !=4)\n    {\n        key = seed();\n    }\n}\n</code></pre>\n\n<p>As you can see int key now holds the random number but I don't want to use keys.push_back(key) until I confirm that key is unique from any other number currently held in the vector. </p>\n"}, {"tags": ["c++", "inheritance", "polymorphism"], "comments": [{"owner": {"reputation": 55713, "user_id": 26095, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WLsjF.jpg?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/26095/sean"}, "edited": false, "score": 0, "creation_date": 1463590057, "post_id": 37305587, "comment_id": 62132928, "body": "You&#39;re not initializing <code>value1</code> and <code>value2</code> in your constructors."}, {"owner": {"reputation": 524, "user_id": 6033411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9db812a6ea291d3c74b97613d59c32d8?s=128&d=identicon&r=PG&f=1", "display_name": "galsh83", "link": "https://stackoverflow.com/users/6033411/galsh83"}, "edited": false, "score": 1, "creation_date": 1463590193, "post_id": 37305587, "comment_id": 62133009, "body": "Both ExtendedParser and Parser define a member with the same name  &#39;header&#39;. You don&#39;t have to redefine it in ExtendedParser"}, {"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 0, "creation_date": 1463590202, "post_id": 37305587, "comment_id": 62133014, "body": "In your example code you never set <code>value1</code> so it&#39;s unclear what non-zero value it should be."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1463590231, "post_id": 37305587, "comment_id": 62133031, "body": "Whats with all of the pointers?  There does not seem to be a reason in the example code to need pointers."}, {"owner": {"reputation": 261, "user_id": 3655057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0c7d6590243bc0d5b3a1146e85c26e2e?s=128&d=identicon&r=PG", "display_name": "whiteShadow", "link": "https://stackoverflow.com/users/3655057/whiteshadow"}, "edited": false, "score": 0, "creation_date": 1463590823, "post_id": 37305587, "comment_id": 62133353, "body": "Ok, so I modified the code to be a bit more realistic (but I cannot put the original code as it&#39;s way too big). Why is this a problem to use pointers ?"}, {"owner": {"reputation": 261, "user_id": 3655057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0c7d6590243bc0d5b3a1146e85c26e2e?s=128&d=identicon&r=PG", "display_name": "whiteShadow", "link": "https://stackoverflow.com/users/3655057/whiteshadow"}, "edited": false, "score": 0, "creation_date": 1463591715, "post_id": 37305587, "comment_id": 62133863, "body": "If I don&#39;t put &#39;header&#39; with an ExtendedHeaderType in the ExtendedParser, then I cannot set value2 in ExtendedParser::Parse(). I get an error message saying HeaderType doesn&#39;t have a value2 member."}], "answers": [{"comments": [{"owner": {"reputation": 261, "user_id": 3655057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0c7d6590243bc0d5b3a1146e85c26e2e?s=128&d=identicon&r=PG", "display_name": "whiteShadow", "link": "https://stackoverflow.com/users/3655057/whiteshadow"}, "edited": false, "score": 0, "creation_date": 1463659886, "post_id": 37310639, "comment_id": 62164892, "body": "Thanks a lot for your answer. That&#39;s indeed what I ended using (composition). But I&#39;m not really familiar with decorator design pattern, so I will have a look at it. Thanks again :)"}], "tags": [], "owner": {"reputation": 524, "user_id": 6033411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9db812a6ea291d3c74b97613d59c32d8?s=128&d=identicon&r=PG&f=1", "display_name": "galsh83", "link": "https://stackoverflow.com/users/6033411/galsh83"}, "is_accepted": true, "score": 1, "last_activity_date": 1463608772, "last_edit_date": 1463608772, "creation_date": 1463608035, "answer_id": 37310639, "question_id": 37305587, "link": "https://stackoverflow.com/questions/37305587/extending-base-class-while-preserving-original-methods/37310639#37310639", "title": "Extending base class while preserving original methods", "body": "<p>Inheritance cannot redefine a field to change its type - so what your code does, essentially, is create a class ExtendedParser, with two fields:</p>\n\n<ol>\n<li>Parser::header of type HeaderType*</li>\n<li>ExtendedParser::header of type ExtendedHeaderType*</li>\n</ol>\n\n<p>The reason you are getting 0 in value1, is because Parse in ExtendedParser calls Parse on the base class which updates value1 of Parser::header. Then it updates value2 in ExtendedParser::header.</p>\n\n<p>Then you call getHeader which returns ExtendedParser::header, and indeed, its value1 field was never touched so you get 0.</p>\n\n<p>There are several ways to achieve what I think you want to do. One would be not to redefine header in ExtendedParser, but you\u2019ll have to downcast header to ExtendedHeaderType in ExtendedParser::Parse. Another way would be to use composition instead of inheritance (see the <a href=\"https://en.wikipedia.org/wiki/Decorator_pattern\" rel=\"nofollow\">decorator</a> design pattern), both for Parser and HeaderType.</p>\n"}], "owner": {"reputation": 261, "user_id": 3655057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0c7d6590243bc0d5b3a1146e85c26e2e?s=128&d=identicon&r=PG", "display_name": "whiteShadow", "link": "https://stackoverflow.com/users/3655057/whiteshadow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 37310639, "answer_count": 1, "score": 0, "last_activity_date": 1463608772, "creation_date": 1463589780, "last_edit_date": 1463599454, "question_id": 37305587, "link": "https://stackoverflow.com/questions/37305587/extending-base-class-while-preserving-original-methods", "title": "Extending base class while preserving original methods", "body": "<p>I'm having some issue creating an extended parser of another class.\nHere is a schematic version of what I have</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass HeaderType{\npublic:\n  HeaderType(){ this-&gt;value1 = 0; }\n  double getValue1(){return this-&gt;value1;}\n  void setValue1(double v){ this-&gt;value1 = v; }\nprotected:\n  double value1;\n};\n\nclass Parser{\npublic:\n  Parser() { this-&gt;header = new HeaderType(); }\n  virtual ~Parser() {};\n\n  virtual void Parse(){ this-&gt;header-&gt;setValue1(10); }\n  HeaderType* getHeader(){return this-&gt;header;}\n\nprotected:\n  HeaderType* header;\n};\n\nclass ExtendedHeaderType : public HeaderType{\npublic:\n  ExtendedHeaderType(){ this-&gt;value2 = 0; }\n  double getValue2(){return this-&gt;value2;}\n  void setValue2(double v){ this-&gt;value2 = v; }\nprotected:\n  double value2;\n};\n\nclass ExtendedParser : public Parser{\npublic:\n  ExtendedParser() : Parser() { this-&gt;header = new ExtendedHeaderType(); }\n  virtual ~ExtendedParser(){ delete this-&gt;header; }\n  ExtendedHeaderType* getHeader(){return this-&gt;header;} \n  virtual void Parse(){ Parser::Parse(); this-&gt;header-&gt;setValue2(20); }\nprotected:\n  ExtendedHeaderType* header;\n};\n\nint main()\n{\n  ExtendedParser* parser = new ExtendedParser();\n  parser-&gt;Parse();\n  ExtendedHeaderType* header = parser-&gt;getHeader();\n  double value = header-&gt;getValue1();  \n\n  std::cerr &lt;&lt; \"Value: \" &lt;&lt; value &lt;&lt; std::endl;\n\n  return 0;\n}\n</code></pre>\n\n<p>However, when I do that, getValue1() always return 0, I don't really understand why.\nWhen I do parser->Parse(), it should call Parser::Parse(), which set the value1 to 10, and when I do getValue1(), then it should return 10, not 0.\nI don't really understand why this is happening.</p>\n\n<p>Thank you.</p>\n\n<p><strong>Edit:</strong> When I use this code and call header->getValue1() in the main it returns 0, however calling header->getValue2() returns 20 (as expected).</p>\n\n<p><strong>Edit 2:</strong> Actually I think what I'm trying to do is not possible (or at least not in a clean way). I think instead I will have to create a HeaderType, and an ExtendedHeaderType but that is not a derived class of HeaderType, and create a instance of each in the ExtendedParser.\nIMO it would be better to be able to 'extend' a class, but I think in term of memory it's difficult, because the base class is allocated first, then the derived class, but then it's difficult for a derived class to modify the data type of the base class, as it will require a different amount of memory.</p>\n"}, {"tags": ["c++", "linux", "gtk", "glade"], "answers": [{"comments": [{"owner": {"reputation": 371, "user_id": 6352081, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-djR7EK9utWk/AAAAAAAAAAI/AAAAAAAAAG0/eTQTK8KINhw/photo.jpg?sz=128", "display_name": "Kedar Brooks", "link": "https://stackoverflow.com/users/6352081/kedar-brooks"}, "edited": false, "score": 0, "creation_date": 1463598755, "post_id": 37305535, "comment_id": 62137700, "body": "tried the different compile code and it had the same results. Im trying to save Qt as a last resort but if its easier i could move to gtkmm if it would save me problems down the line."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 371, "user_id": 6352081, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-djR7EK9utWk/AAAAAAAAAAI/AAAAAAAAAG0/eTQTK8KINhw/photo.jpg?sz=128", "display_name": "Kedar Brooks", "link": "https://stackoverflow.com/users/6352081/kedar-brooks"}, "edited": false, "score": 0, "creation_date": 1463601700, "post_id": 37305535, "comment_id": 62139277, "body": "Perhaps <code>-rdynamic</code> should be given first, <i>before</i> <code>-o Project_Thoth</code>; BTW, if you code in C only (including your things, so <code>printf</code>, no <code>cout &lt;&lt;</code>) the compilation time would be faster since C++ code compiles slowly."}, {"owner": {"reputation": 371, "user_id": 6352081, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-djR7EK9utWk/AAAAAAAAAAI/AAAAAAAAAG0/eTQTK8KINhw/photo.jpg?sz=128", "display_name": "Kedar Brooks", "link": "https://stackoverflow.com/users/6352081/kedar-brooks"}, "edited": false, "score": 0, "creation_date": 1463610738, "post_id": 37305535, "comment_id": 62143259, "body": "yea, i might just go with just using C because i know that works. Thank you for the help."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 0, "last_activity_date": 1463601667, "last_edit_date": 1463601667, "creation_date": 1463589624, "answer_id": 37305535, "question_id": 37305423, "link": "https://stackoverflow.com/questions/37305423/c-gtk-warning-could-not-find-signal-handler-did-you-compile-with-rdyn/37305535#37305535", "title": "(C++) Gtk-WARNING **: Could not find signal handler&#39;. Did you compile with -rdynamic?", "body": "<p>The message is giving a good suggestion: compile (actually link) with <code>-rdynamic</code> so compile your your code with:</p>\n\n<pre><code> g++ -rdynamic  -o Project_Thoth -Wall -g main.cpp \\\n     $(pkg-config --cflags --libs gtk+-3.0 gmodule-2.0 )\n</code></pre>\n\n<p>BTW, I strongly recommend avoiding a space in your executable name. So <code>Project_Thoth</code> not <code>\"Project Thoth\"</code>. Also, don't forget to ask for warnings (with <code>-Wall</code> at least, perhaps also <em>add</em> <code>-Wextra</code>) and debug info (<code>-g</code>), which is very useful, notably to debug your program with <code>gdb</code> debugger (or to hunt memory leaks with <code>valgrind</code>).</p>\n\n<p>Once the program is debugged, for benchmarking purposes, you might ask the compiler to optimize (so add <code>-O2</code>).</p>\n\n<p>BTW, if you really want to use GTK with C++ (not just C), consider <a href=\"http://www.gtkmm.org/\" rel=\"nofollow\">gtkmm</a>. But you could code your GTK program in plain C99 (so no <code>cout</code>, but <code>printf</code>). And perhaps even consider a switch to <a href=\"http://qt.io/\" rel=\"nofollow\">Qt</a> (another widget toolkit, in C++), if C++ is important to you.</p>\n\n<p>If coding in C++ with GTK (not gtkmm), better declare as <code>extern \"C\"</code> <em>all</em> your GTK related code.</p>\n"}], "owner": {"reputation": 371, "user_id": 6352081, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-djR7EK9utWk/AAAAAAAAAAI/AAAAAAAAAG0/eTQTK8KINhw/photo.jpg?sz=128", "display_name": "Kedar Brooks", "link": "https://stackoverflow.com/users/6352081/kedar-brooks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3557, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463601667, "creation_date": 1463589311, "last_edit_date": 1463596972, "question_id": 37305423, "link": "https://stackoverflow.com/questions/37305423/c-gtk-warning-could-not-find-signal-handler-did-you-compile-with-rdyn", "title": "(C++) Gtk-WARNING **: Could not find signal handler&#39;. Did you compile with -rdynamic?", "body": "<p>I'm new to C++ GUI programming with GTK+, and I'm having a issue with getting the signal handler for one of my buttons to work, upon compiling and running I receive the following warning. Does anyone know if I'm doing something incorrectly or missing something?   </p>\n\n<p>(Project Thoth:4359): Gtk-WARNING **: Could not find signal handler 'on_login_clicked'.  Did you compile with -rdynamic?</p>\n\n<p>This is my cpp file </p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;cstdio&gt;\n#include &lt;string&gt;\n#include &lt;gtk/gtk.h&gt;\n#include &lt;iostream&gt;\nextern \"C\"\nusing namespace std;\n\nint main(int argc, char *argv[])\n{\nGtkEntry *e1;//textbox1\nGtkEntry *e2;//textbox2\nGtkEntry *e3;//textbox3\n\nGtkBuilder *gtkBuilder;\nGtkWidget *window;\n\ngtk_init(&amp;argc, &amp;argv);\n\ngtkBuilder = gtk_builder_new();\ngtk_builder_add_from_file(gtkBuilder, \"Unsaved 1.glade\", NULL);\nwindow = GTK_WIDGET(gtk_builder_get_object(gtkBuilder, \"Login\"));\n\ngtk_builder_connect_signals(gtkBuilder, window);\n\ng_object_unref(G_OBJECT(gtkBuilder));\ngtk_widget_show(window);\ngtk_main();\ncout &lt;&lt; \"Login window loaded\";\nreturn 0;\n}\n\nG_MODULE_EXPORT void  on_login_clicked()\n{\nprintf(\"Request Detected\\n\");\nGtkBuilder  *gtkBuilder;\nGtkWidget *window;\n\ngtkBuilder = gtk_builder_new();\ngtk_builder_add_from_file(gtkBuilder, \"Unsaved 1.glade\", NULL);\n\nGtkEntry *e1;\nGtkEntry *e2;\ne1 = GTK_ENTRY( gtk_builder_get_object( gtkBuilder, \"user1\" ));\ne2 = GTK_ENTRY( gtk_builder_get_object( gtkBuilder, \"pass\"));\ngtk_builder_connect_signals(gtkBuilder, e1);\nconst char *home;\nhome = gtk_entry_get_text(e1);\ncout &lt;&lt; home;\n}\n</code></pre>\n\n<p>and my glade file</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!-- Generated with glade 3.18.3 --&gt;\n&lt;interface&gt;\n  &lt;requires lib=\"gtk+\" version=\"3.0\"/&gt;\n  &lt;object class=\"GtkApplicationWindow\" id=\"Login\"&gt;\n    &lt;property name=\"can_focus\"&gt;False&lt;/property&gt;\n    &lt;property name=\"window_position\"&gt;center&lt;/property&gt;\n    &lt;property name=\"default_width\"&gt;400&lt;/property&gt;\n    &lt;property name=\"default_height\"&gt;300&lt;/property&gt;\n    &lt;signal name=\"destroy\" handler=\"on_window_destroy\" swapped=\"no\"/&gt;\n    &lt;child&gt;\n      &lt;object class=\"GtkLayout\" id=\"layout1\"&gt;\n        &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n        &lt;property name=\"can_focus\"&gt;False&lt;/property&gt;\n        &lt;child&gt;\n          &lt;object class=\"GtkLabel\" id=\"Label\"&gt;\n            &lt;property name=\"width_request\"&gt;100&lt;/property&gt;\n            &lt;property name=\"height_request\"&gt;80&lt;/property&gt;\n            &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n            &lt;property name=\"can_focus\"&gt;False&lt;/property&gt;\n            &lt;property name=\"label\" translatable=\"yes\"&gt;Project Thoth\n&lt;/property&gt;\n            &lt;property name=\"angle\"&gt;0.089999999999999997&lt;/property&gt;\n            &lt;attributes&gt;\n              &lt;attribute name=\"weight\" value=\"bold\"/&gt;\n            &lt;/attributes&gt;\n          &lt;/object&gt;\n          &lt;packing&gt;\n            &lt;property name=\"x\"&gt;156&lt;/property&gt;\n            &lt;property name=\"y\"&gt;14&lt;/property&gt;\n          &lt;/packing&gt;\n        &lt;/child&gt;\n        &lt;child&gt;\n          &lt;object class=\"GtkEntry\" id=\"user1\"&gt;\n            &lt;property name=\"width_request\"&gt;166&lt;/property&gt;\n            &lt;property name=\"height_request\"&gt;80&lt;/property&gt;\n            &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n            &lt;property name=\"can_focus\"&gt;True&lt;/property&gt;\n          &lt;/object&gt;\n          &lt;packing&gt;\n            &lt;property name=\"x\"&gt;128&lt;/property&gt;\n            &lt;property name=\"y\"&gt;72&lt;/property&gt;\n          &lt;/packing&gt;\n        &lt;/child&gt;\n        &lt;child&gt;\n          &lt;object class=\"GtkLabel\" id=\"label1\"&gt;\n            &lt;property name=\"width_request\"&gt;100&lt;/property&gt;\n            &lt;property name=\"height_request\"&gt;80&lt;/property&gt;\n            &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n            &lt;property name=\"can_focus\"&gt;False&lt;/property&gt;\n            &lt;property name=\"label\" translatable=\"yes\"&gt;Username: \n&lt;/property&gt;\n          &lt;/object&gt;\n          &lt;packing&gt;\n            &lt;property name=\"x\"&gt;121&lt;/property&gt;\n            &lt;property name=\"y\"&gt;52&lt;/property&gt;\n          &lt;/packing&gt;\n        &lt;/child&gt;\n        &lt;child&gt;\n          &lt;object class=\"GtkEntry\" id=\"pass\"&gt;\n            &lt;property name=\"width_request\"&gt;166&lt;/property&gt;\n            &lt;property name=\"height_request\"&gt;84&lt;/property&gt;\n            &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n            &lt;property name=\"can_focus\"&gt;True&lt;/property&gt;\n          &lt;/object&gt;\n          &lt;packing&gt;\n            &lt;property name=\"x\"&gt;129&lt;/property&gt;\n            &lt;property name=\"y\"&gt;130&lt;/property&gt;\n          &lt;/packing&gt;\n        &lt;/child&gt;\n        &lt;child&gt;\n          &lt;object class=\"GtkLabel\" id=\"label3\"&gt;\n            &lt;property name=\"width_request\"&gt;100&lt;/property&gt;\n            &lt;property name=\"height_request\"&gt;80&lt;/property&gt;\n            &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n            &lt;property name=\"can_focus\"&gt;False&lt;/property&gt;\n            &lt;property name=\"label\" translatable=\"yes\"&gt;Password:\n\n&lt;/property&gt;\n          &lt;/object&gt;\n          &lt;packing&gt;\n            &lt;property name=\"x\"&gt;117&lt;/property&gt;\n            &lt;property name=\"y\"&gt;123&lt;/property&gt;\n          &lt;/packing&gt;\n        &lt;/child&gt;\n        &lt;child&gt;\n          &lt;object class=\"GtkButton\" id=\"button1\"&gt;\n            &lt;property name=\"label\" translatable=\"yes\"&gt;Login&lt;/property&gt;\n            &lt;property name=\"width_request\"&gt;70&lt;/property&gt;\n            &lt;property name=\"height_request\"&gt;29&lt;/property&gt;\n            &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n            &lt;property name=\"can_focus\"&gt;True&lt;/property&gt;\n            &lt;property name=\"receives_default\"&gt;True&lt;/property&gt;\n            &lt;property name=\"relief\"&gt;half&lt;/property&gt;\n            &lt;signal name=\"clicked\" handler=\"on_login_clicked\" swapped=\"no\"/&gt;\n          &lt;/object&gt;\n          &lt;packing&gt;\n            &lt;property name=\"x\"&gt;171&lt;/property&gt;\n            &lt;property name=\"y\"&gt;191&lt;/property&gt;\n          &lt;/packing&gt;\n        &lt;/child&gt;\n        &lt;child&gt;\n          &lt;object class=\"GtkLabel\" id=\"label2\"&gt;\n            &lt;property name=\"width_request\"&gt;105&lt;/property&gt;\n            &lt;property name=\"height_request\"&gt;35&lt;/property&gt;\n            &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n            &lt;property name=\"can_focus\"&gt;False&lt;/property&gt;\n            &lt;property name=\"label\" translatable=\"yes\"&gt;save info login ?&lt;/property&gt;\n          &lt;/object&gt;\n          &lt;packing&gt;\n            &lt;property name=\"x\"&gt;154&lt;/property&gt;\n            &lt;property name=\"y\"&gt;227&lt;/property&gt;\n          &lt;/packing&gt;\n        &lt;/child&gt;\n        &lt;child&gt;\n          &lt;object class=\"GtkSwitch\" id=\"switch1\"&gt;\n            &lt;property name=\"width_request\"&gt;74&lt;/property&gt;\n            &lt;property name=\"height_request\"&gt;23&lt;/property&gt;\n            &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n            &lt;property name=\"can_focus\"&gt;True&lt;/property&gt;\n          &lt;/object&gt;\n          &lt;packing&gt;\n            &lt;property name=\"x\"&gt;166&lt;/property&gt;\n            &lt;property name=\"y\"&gt;263&lt;/property&gt;\n          &lt;/packing&gt;\n        &lt;/child&gt;\n      &lt;/object&gt;\n    &lt;/child&gt;\n  &lt;/object&gt;\n&lt;/interface&gt;\n</code></pre>\n\n<p>also for compiling i used the following flags </p>\n\n<pre><code>g++ -o \"Project Thoth\" main.cpp $(pkg-config --cflags --libs gtk+-3.0 gmodule-2.0 )\n</code></pre>\n\n<p>Thanks in advance for any help.</p>\n"}, {"tags": ["c++", "qt", "qt5", "qvboxlayout"], "comments": [{"owner": {"reputation": 1132, "user_id": 6318750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SPLlL.jpg?s=128&g=1", "display_name": "someoneinthebox", "link": "https://stackoverflow.com/users/6318750/someoneinthebox"}, "edited": false, "score": 0, "creation_date": 1463591000, "post_id": 37305348, "comment_id": 62133437, "body": "The parent of layout must be ui&#39;s central widget."}], "answers": [{"tags": [], "owner": {"reputation": 1132, "user_id": 6318750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SPLlL.jpg?s=128&g=1", "display_name": "someoneinthebox", "link": "https://stackoverflow.com/users/6318750/someoneinthebox"}, "is_accepted": true, "score": 1, "last_activity_date": 1463591422, "creation_date": 1463591422, "answer_id": 37306122, "question_id": 37305348, "link": "https://stackoverflow.com/questions/37305348/qt-button-added-on-menu-bar/37306122#37306122", "title": "qt button added on menu bar", "body": "<p>I think code must be change to:</p>\n\n<pre><code>mRootLayout = new QVBoxLayout(ui-&gt;centralWidget);\nmRootLayout-&gt;addWidget(new QPushButton(\"Button1\", this));\nmRootLayout-&gt;addWidget(new QPushButton(\"Button2\", this));\n</code></pre>\n\n<p>It's not necessary do <code>setLayout()</code>.</p>\n"}], "owner": {"reputation": 4835, "user_id": 2704885, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/nGr5K.jpg?s=128&g=1", "display_name": "Boldijar Paul", "link": "https://stackoverflow.com/users/2704885/boldijar-paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1114, "favorite_count": 0, "accepted_answer_id": 37306122, "answer_count": 1, "score": 0, "last_activity_date": 1463591422, "creation_date": 1463589104, "question_id": 37305348, "link": "https://stackoverflow.com/questions/37305348/qt-button-added-on-menu-bar", "title": "qt button added on menu bar", "body": "<p>I'm trying to add buttons to a vertical layout in QT.</p>\n\n<pre><code>MainWindow::MainWindow(QWidget *parent)\n    : QMainWindow(parent)\n{\n    ui.setupUi(this);\n\n    mRootLayout = new QVBoxLayout(this);\n    setLayout(mRootLayout);\n\n    mRootLayout-&gt;addWidget(new QPushButton(\"Button1\", this));\n    mRootLayout-&gt;addWidget(new QPushButton(\"Button2\", this));\n\n}\n</code></pre>\n\n<p>I have 2 problems\n1. The buttons are created on top of the menu bar\n2. The buttons are not one under the other one.</p>\n\n<p>I'm using a QVBoxLayout.</p>\n\n<p><a href=\"https://i.stack.imgur.com/m9Pk4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/m9Pk4.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1463589899, "post_id": 37305336, "comment_id": 62132842, "body": "I&#39;ll bet that the <code>compare</code> function is messing up the map."}, {"owner": {"reputation": 1, "user_id": 6352036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a79f843ea96ae03671b5ce7e2124755?s=128&d=identicon&r=PG&f=1", "display_name": "Swaggaaa", "link": "https://stackoverflow.com/users/6352036/swaggaaa"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1463590107, "post_id": 37305336, "comment_id": 62132963, "body": "@PeteBecker in which way? I&#39;ll update posting the compare function."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1463590208, "post_id": 37305336, "comment_id": 62133019, "body": "What would be most useful is a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1463592654, "post_id": 37305336, "comment_id": 62134385, "body": "Think you&#39;re looking in the wrong direction, Swaggaaa. A <code>std::map</code> that&#39;s keyed by <code>std::string</code> is provided a comparator function that compares <code>Autor</code>, not <code>std::string</code>. This is pretty odd behaviour that won&#39;t compile. I&#39;d fix this first and see if it makes the bizzarro iterator message goes away."}, {"owner": {"reputation": 1, "user_id": 6352036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a79f843ea96ae03671b5ce7e2124755?s=128&d=identicon&r=PG&f=1", "display_name": "Swaggaaa", "link": "https://stackoverflow.com/users/6352036/swaggaaa"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1463595402, "post_id": 37305336, "comment_id": 62135857, "body": "@user4581301 sorry if I didn&#39;t explain myself correctly, as the error is happening in runtime not during compiling. However if I compile it without <code>-D_GLIBCXX_DEBUG</code> the code works perfectly.   I don&#39;t quite understand what you say regarding the key as I&#39;m doing a find with the specified key and it&#39;s being found. However when it has to return the actual class <code>Autor</code>, the program crashes with the previously specified error."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1463596020, "post_id": 37305336, "comment_id": 62136199, "body": "Can&#39;t understand how you got that to compile. Here&#39;s a quick hack cut of what I think you&#39;ve got and what should happen: <a href=\"http://ideone.com/2nWLfg\" rel=\"nofollow noreferrer\">ideone.com/2nWLfg</a>"}, {"owner": {"reputation": 12531, "user_id": 173347, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dslxd.png?s=128&g=1", "display_name": "Cem Kalyoncu", "link": "https://stackoverflow.com/users/173347/cem-kalyoncu"}, "edited": false, "score": 0, "creation_date": 1463596024, "post_id": 37305336, "comment_id": 62136201, "body": "c++0x is depreciated, give c++11 a try. There might be an incompatibility between c++0x and libc++"}, {"owner": {"reputation": 1, "user_id": 6352036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a79f843ea96ae03671b5ce7e2124755?s=128&d=identicon&r=PG&f=1", "display_name": "Swaggaaa", "link": "https://stackoverflow.com/users/6352036/swaggaaa"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1463596987, "post_id": 37305336, "comment_id": 62136753, "body": "@user4581301 The class structure shows how it&#39;s defined in the header. In the constructor it&#39;s declared as such: map&lt;string, Autor, compare&gt; autors(); (Notice the parenthesis in the end)."}, {"owner": {"reputation": 1, "user_id": 6352036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a79f843ea96ae03671b5ce7e2124755?s=128&d=identicon&r=PG&f=1", "display_name": "Swaggaaa", "link": "https://stackoverflow.com/users/6352036/swaggaaa"}, "reply_to_user": {"reputation": 12531, "user_id": 173347, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dslxd.png?s=128&g=1", "display_name": "Cem Kalyoncu", "link": "https://stackoverflow.com/users/173347/cem-kalyoncu"}, "edited": false, "score": 0, "creation_date": 1463597059, "post_id": 37305336, "comment_id": 62136790, "body": "@CemKalyoncu I tried compiling it with c++11, same error. The only parameter that saves me from getting it is the D_GLIBCXX_DEBUG one, but It&#39;s a must in my project."}, {"owner": {"reputation": 1, "user_id": 6352036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a79f843ea96ae03671b5ce7e2124755?s=128&d=identicon&r=PG&f=1", "display_name": "Swaggaaa", "link": "https://stackoverflow.com/users/6352036/swaggaaa"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1463597618, "post_id": 37305336, "comment_id": 62137064, "body": "@user4581301 just to make it more clear:   <code>Cjt_Autors::Cjt_Autors() {</code>     <code>autors = map&lt;string, Autor, compare&gt;();</code>     <code>autorTriat = map&lt;string, Autor, compare&gt;::iterator();</code>     <code>countRef = map&lt;string, int&gt;();</code>     <code>bTriat = false;</code> <code>}</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1463598540, "post_id": 37305336, "comment_id": 62137574, "body": "Two points: 1. <code>autors = map&lt;string, Autor, compare&gt;();</code> is unncecessary. The compiler did this for you already when it set up the object before entering the constructor&#39;s body. 2. That shouldn&#39;t make a bit of difference. <code>std::map</code> is going to call the comparator with <code>std::string</code> because the key type is <code>std::string</code>. The comparator accepts only <code>Autor</code>, so you should get a type mismatch and a failed build."}], "owner": {"reputation": 1, "user_id": 6352036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a79f843ea96ae03671b5ce7e2124755?s=128&d=identicon&r=PG&f=1", "display_name": "Swaggaaa", "link": "https://stackoverflow.com/users/6352036/swaggaaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1463595229, "creation_date": 1463589078, "last_edit_date": 1463595229, "question_id": 37305336, "link": "https://stackoverflow.com/questions/37305336/getting-error-when-returning-a-dereferenced-iterator", "title": "Getting error when returning a dereferenced iterator", "body": "<p>I'm trying to return a dereferenced iterator in my code and it's giving me the following error:</p>\n\n<pre><code>`Attempt to copy-construct an iterator from a singular iterator.`\n</code></pre>\n\n<p>The piece of code that is giving me this error is the following one:</p>\n\n<pre><code>Autor Cjt_Autors::get_autor(const string &amp; nom) {\n    map&lt;string, Autor, compare&gt;::iterator it = autors.find(nom);\n    if (it != autors.end())\n        return it-&gt;second;\n    return Autor();\n}\n</code></pre>\n\n<p>The error is happening in runtime just when I'm compiling my code on g++ with the following parameters: <code>-D_GLIBCXX_DEBUG -ansi -O2 -Wall -Wextra -Wno-uninitialized -Wno-sign-compare -std=c++0x</code></p>\n\n<p>I tried running it without the -D_GLIBCXX_DEBUG parameter and it worked, but it's a must on my project so I don't know how to fix this. However, the function returned what it had to in run-time.</p>\n\n<p>I have tried the same code on Windows with Visual Studio and it was working flawlessly. I hope somebody can find the flaw in my code that keeps making it break, as I have been trying to find a solution for it for hours and I don't know how to proceed.</p>\n\n<p>The problem is not dereferencing the iterator itself, as I have just tried putting this before the return:\n<code>cout &lt;&lt; it-&gt;second.get_ntextos() &lt;&lt; endl;</code>\nAnd it prints the value correctly, so the crash is definitely happening on the return.</p>\n\n<p>EDIT:Compare function used in the map.</p>\n\n<pre><code>struct compare\n{\n    bool operator()(const Autor&amp; a, const Autor&amp; b) const {\n        return a.get_nom() &lt; b.get_nom();\n    }\n};\n</code></pre>\n\n<p>Class structure:</p>\n\n<pre><code>class Cjt_Autors\n{\nprivate:\n    map&lt;string, Autor, compare&gt; autors; //Ordenat per nom\n    map&lt;string, Autor, compare&gt;::iterator autorTriat;\n    bool bTriat;\n    map&lt;string, int&gt; countRef;\n\n    static bool check_inicials(const map&lt;string, Autor, compare&gt;::iterator &amp; ita, const string &amp; ref);\n</code></pre>\n\n<p>There are lots of public functions. If you guys want me to post them I'll do it as well.\nThe function is called with the following parameter:\n\"Mario Bunge\" without the quotation marks. </p>\n"}, {"tags": ["c++", "arrays", "loops", "crash", "resize"], "answers": [{"tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": true, "score": 0, "last_activity_date": 1463589090, "creation_date": 1463589090, "answer_id": 37305340, "question_id": 37305265, "link": "https://stackoverflow.com/questions/37305265/c-array-resize-crash/37305340#37305340", "title": "C++ Array Resize crash", "body": "<p>You are getting a segmentation fault, because you are deleting memory twice.</p>\n\n<pre><code>data=tmp;\ndelete[] tmp;\n</code></pre>\n\n<p>Here, you assign <code>data</code> the memory location of <code>tmp</code>. So far so good, <code>data</code> and <code>tmp</code> point to the same memory region. But now you <code>delete[] temp;</code>, and so the memory region is deleted. But because <code>data</code> is also pointing to it, <code>data</code> is also no longer valid to be used as pointer (like <code>tmp</code>).</p>\n\n<p>Then, with <code>return data[i];</code> you are trying to access that memory, but you deleted it! So you get a segmentation fault. </p>\n\n<p>You can fix this by <strong>not</strong> <code>delete[] tmp;</code>, because then <code>data</code> points to a valid memory location, and everything is good :)</p>\n"}, {"tags": [], "owner": {"reputation": 1139, "user_id": 6266602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0fa60ab2c1ac1b185db45679cabe8c9?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas B Preusser", "link": "https://stackoverflow.com/users/6266602/thomas-b-preusser"}, "is_accepted": false, "score": 0, "last_activity_date": 1463589164, "creation_date": 1463589164, "answer_id": 37305366, "question_id": 37305265, "link": "https://stackoverflow.com/questions/37305265/c-array-resize-crash/37305366#37305366", "title": "C++ Array Resize crash", "body": "<p>You delete your fresh array still referenced by <code>tmp</code> in the <code>operator[]</code>. As this is the new array referenced by <code>data</code>, you inevitably run into trouble.</p>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 0, "last_activity_date": 1463589233, "creation_date": 1463589233, "answer_id": 37305392, "question_id": 37305265, "link": "https://stackoverflow.com/questions/37305265/c-array-resize-crash/37305392#37305392", "title": "C++ Array Resize crash", "body": "<p>You have a couple issues.  The first issue is that you delete the memory that <code>tmp</code> points to which is also what <code>data</code> now points to.  This means the next time the array grows you are accessing a deleted pointer which is undefined behavior.</p>\n\n<p>A second issue is that <code>if(i&gt;siz)</code> checks is <code>i</code> is past the end of the array but you never check to see <code>i</code> is also greater than <code>newsize</code>.  You need to set <code>newsize</code> to the largest of <code>siz * 2</code> and <code>i</code>.  Also it is is un-intuitive for the operator[] to grow the container.  When you call <code>[]</code> with a size larger than the container has that should be an error instead of re-sizing the array.</p>\n"}], "owner": {"reputation": 47, "user_id": 6352116, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-km3IuD1opo4/AAAAAAAAAAI/AAAAAAAAAD8/o3yPbTw8bOM/photo.jpg?sz=128", "display_name": "Peter Gellert", "link": "https://stackoverflow.com/users/6352116/peter-gellert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 37305340, "answer_count": 3, "score": 0, "last_activity_date": 1463589233, "creation_date": 1463588835, "question_id": 37305265, "link": "https://stackoverflow.com/questions/37305265/c-array-resize-crash", "title": "C++ Array Resize crash", "body": "<p>I have a simple array class that uses template and have a size. I want to Resize it whenever it's full, but my program keeps crashing. \nthe code is like this: </p>\n\n<pre><code>    template&lt;class T&gt;\nclass Buffer:public File_ptr\n{\n\n    unsigned int siz;\n    T *data;\n\n\npublic:\n\n    ///konstruktor(size,filename,openmode)\n    Buffer(unsigned int s=50,const char* n, const char* m):File_ptr(n,m),siz(s)\n    {\n        data= new T[siz];\n        for(unsigned int i=0; i&lt;siz; ++i)\n        {\n            data[i]=0;\n        };\n    };\n\n    ///destruktor\n    ~Buffer()\n    {\n        delete[] data;\n    }\n\n    ///operator[]\n    T&amp; operator[](unsigned int i)\n    {\n        if(i&gt;siz)\n        {\n            unsigned int newsize=siz*2;\n            T* tmp=new T[newsize];\n            for(unsigned int j = 0; j &lt; siz; j++)\n            {\n                tmp[j] = data[j];\n            }\n            siz=newsize;\n            delete[] data;\n            data=tmp;\n            delete[] tmp;\n        };\n        return data[i];\n    }\n\n};  \n</code></pre>\n\n<p>the error comes at the operator[].(at least i think).\nThe main program is like this :</p>\n\n<pre><code>int main()\n{\n   Buffer&lt;int&gt; k(20,\"k.txt\",\"w\");\n   Buffer&lt;char*&gt; s(20,\"s.txt\",\"w\");\n   k.printfile(\"HEY\");\n   s.printfile(5);\n   for(unsigned int i=0;i&lt;23;i++){\n    s[i]=\"Hey\";\n    cout &lt;&lt; s[i] &lt;&lt; endl;\n   }\n\n\nreturn 0;\n}\n</code></pre>\n\n<p>Any help would be great! :)\nThanks!</p>\n"}, {"tags": ["c++", "c", "runtime"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1463588614, "post_id": 37305124, "comment_id": 62132108, "body": "Totally depends on how the OS is providing the arguments to the process. If you don&#39;t have an OS, just provide <code>argc</code> as <code>0</code> and <code>argv</code> as <code>NULL</code>."}, {"owner": {"reputation": 1659, "user_id": 4767670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9dda5bf53c264228a2cd807e9167dc9c?s=128&d=identicon&r=PG", "display_name": "NoImaginationGuy", "link": "https://stackoverflow.com/users/4767670/noimaginationguy"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1463588744, "post_id": 37305124, "comment_id": 62132185, "body": "How can I figure out what value I should use for each OS? Is there something which explains it? Like a list or something like that"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1463588800, "post_id": 37305124, "comment_id": 62132233, "body": "Providing a <code>_start</code> at all is not portable in the first place. Good luck making it work for every OS."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1463588831, "post_id": 37305124, "comment_id": 62132252, "body": "This is not for the weak of heart. Imagine the multitutde of tasks you need to perform in _start! Calling constructors is just of them. How about binding dynamic objects?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 3, "creation_date": 1463588834, "post_id": 37305124, "comment_id": 62132255, "body": "You are deep into compiler-specific stuff. What is the actual problem that you&#39;re trying to solve?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1463589042, "post_id": 37305124, "comment_id": 62132369, "body": "@osnapitzkindle May be <a href=\"http://learningpearls.blogspot.de/2011/02/start-function-inside-c.html\" rel=\"nofollow noreferrer\">this</a> helps a bit."}, {"owner": {"reputation": 1659, "user_id": 4767670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9dda5bf53c264228a2cd807e9167dc9c?s=128&d=identicon&r=PG", "display_name": "NoImaginationGuy", "link": "https://stackoverflow.com/users/4767670/noimaginationguy"}, "edited": false, "score": 0, "creation_date": 1463589085, "post_id": 37305124, "comment_id": 62132395, "body": "I&#39;m writing a compiler and I need to write the runtime library my programs will link against. It&#39;s just normal it&#39;s not portable lol, providing a _start for each platform is not a problem. I already knew it and I&#39;ll definitely do it. I just need to know if I can maybe write it in C just to try before writing it in assembly for each platform."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1463589086, "post_id": 37305124, "comment_id": 62132397, "body": "@PeteBecker Sounds like the OP want&#39;s to solve the static initialization fiasko."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1463589386, "post_id": 37305124, "comment_id": 62132565, "body": "@osnapitzkindle - okay, so you&#39;re legitimately deep into compiler-specific stuff. &lt;g&gt;"}, {"owner": {"reputation": 1659, "user_id": 4767670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9dda5bf53c264228a2cd807e9167dc9c?s=128&d=identicon&r=PG", "display_name": "NoImaginationGuy", "link": "https://stackoverflow.com/users/4767670/noimaginationguy"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1463589654, "post_id": 37305124, "comment_id": 62132709, "body": "@PeteBecker yes, I&#39;m developing a new language and I&#39;m really interested in such things"}], "owner": {"reputation": 1659, "user_id": 4767670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9dda5bf53c264228a2cd807e9167dc9c?s=128&d=identicon&r=PG", "display_name": "NoImaginationGuy", "link": "https://stackoverflow.com/users/4767670/noimaginationguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 183, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1463590234, "creation_date": 1463588429, "last_edit_date": 1463590200, "question_id": 37305124, "link": "https://stackoverflow.com/questions/37305124/how-to-get-arg0-from-start-implementation", "title": "How to get arg0 from _start() implementation?", "body": "<p>I need to implement my <code>_start()</code> function in C, so I can manage my own global constructors and call my <code>main()</code> function as I want.</p>\n\n<p>My problem is when I have to get command line arguments and the <code>argc</code> value. Some time ago I saw something like this using an <code>arg0</code> value which should point to the first arg:</p>\n\n<pre><code>extern int main(int argc, const char *argv[]);\n\nvoid _start() {\n  // calling all the global ctors here\n\n  exit(main(/* something i don't rememebr as argc */, &amp;arg0));\n}\n</code></pre>\n\n<p>How can I get that <code>arg0</code>? And how do I get the <code>argc</code> value from the command line?</p>\n\n<p><strong>UPDATE:</strong>\nWith \"global constructors\" I mean functions which initializes any global variable. Like <code>int x = doit();</code> the call to function <code>doit()</code> is enclosed in a global constructor which will be called before <code>main</code> (in the <code>_start()</code> actually).</p>\n"}, {"tags": ["c++", "multithreading", "random", "openmp"], "comments": [{"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 3, "creation_date": 1463589083, "post_id": 37305104, "comment_id": 62132394, "body": "Yes, you need a separate generator instance for every thread."}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 2, "creation_date": 1463594247, "post_id": 37305104, "comment_id": 62135256, "body": "Check slide 132 on... <a href=\"http://openmp.org/mp-documents/omp-hands-on-SC08.pdf\" rel=\"nofollow noreferrer\">openmp.org/mp-documents/omp-hands-on-SC08.pdf</a>"}, {"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 1, "creation_date": 1463597348, "post_id": 37305104, "comment_id": 62136943, "body": "take a look at <code>jump</code> for xoroshiro128+ (<a href=\"http://xoroshiro.di.unimi.it/xoroshiro128plus.c\" rel=\"nofollow noreferrer\">xoroshiro.di.unimi.it/xoroshiro128plus.c</a>)"}], "answers": [{"tags": [], "owner": {"reputation": 933, "user_id": 3760500, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/PSCMI.png?s=128&g=1", "display_name": "nawfel bgh", "link": "https://stackoverflow.com/users/3760500/nawfel-bgh"}, "is_accepted": true, "score": 1, "last_activity_date": 1463654959, "last_edit_date": 1495542239, "creation_date": 1463654959, "answer_id": 37321005, "question_id": 37305104, "link": "https://stackoverflow.com/questions/37305104/how-to-generate-random-numbers-in-a-thread-safe-way-with-openmp/37321005#37321005", "title": "How to generate random numbers in a thread safe way with OpenMP", "body": "<p>Since the actual code passes the random engine to many functions (Each generating integers and real numbers from different distributions), I went with the array of generator per thread because it imposes least changes to the code base:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;omp.h&gt;\n#include &lt;vector&gt;\n#include &lt;random&gt;\nusing namespace std;\n\nint main() {\n    random_device r;\n    std::vector&lt;std::default_random_engine&gt; generators;\n    for (int i = 0, N = omp_get_max_threads(); i &lt; N; ++i) {\n        generators.emplace_back(default_random_engine(r()));\n    }\n\n    int N = 1000;\n    vector&lt;int&gt; v(N);\n\n    #pragma omp parallel for\n    for (int i = 0; i &lt; N; ++i) {\n        // Get the generator based on thread id\n        default_random_engine&amp; engine = generators[omp_get_thread_num()];\n        // Perform heavy calculations\n        uniform_int_distribution&lt;int&gt; uniform_dist(1, 100);\n        v[i] = uniform_dist(engine); // I assume this is thread unsafe\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Keep in mind that this code assumes that the function <code>omp_set_num_threads</code> never gets called in the program. If that was to happen, it will be possible for threads to get numbers (<code>omp_get_thread_num()</code>) greater than the old <code>omp_get_max_threads()</code> which would cause buffer overflow bugs.</p>\n\n<p>And sadly, this solution assumes an implementation detail which is not required by the standard <a href=\"https://stackoverflow.com/questions/37307627/how-can-i-get-the-maximum-number-of-openmp-threads-that-may-be-created-during-th/37309280#comment62153145_37309280\">as explained in this other comment</a>.</p>\n"}], "owner": {"reputation": 933, "user_id": 3760500, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/PSCMI.png?s=128&g=1", "display_name": "nawfel bgh", "link": "https://stackoverflow.com/users/3760500/nawfel-bgh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1930, "favorite_count": 0, "accepted_answer_id": 37321005, "answer_count": 1, "score": 3, "last_activity_date": 1463654959, "creation_date": 1463588361, "last_edit_date": 1463596924, "question_id": 37305104, "link": "https://stackoverflow.com/questions/37305104/how-to-generate-random-numbers-in-a-thread-safe-way-with-openmp", "title": "How to generate random numbers in a thread safe way with OpenMP", "body": "<p>Before parallelization, I was creating one <code>default_random_engine</code> object outside the loop since creating such objects isn't cheap. And I was reusing it inside the loop.</p>\n\n<p>When parallelizing with <code>OpenMP</code>, I noticed that <code>uniform_dist(engine)</code> takes a mutable reference to the random engine which I assume isn't thread safe.\nThe program isn't crashing but I worry about its correctness.</p>\n\n<p>I assume that <code>random_device</code> is thread safe so I could just move the definition of <code>default_random_engine</code> inside the loop but I don't want to create a random engine object every iteration since I read that that isn't cheap.</p>\n\n<p>I think that an other way would be to create an array (of size: the number of threads) of <code>default_random_engine</code> objects and use OpenMP functions to select the right object at the start of each iteration based on thread ids.</p>\n\n<p>Is there a better way?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;random&gt;\nusing namespace std;\n\nint main() {\n    int N = 1000;\n    vector&lt;int&gt; v(N);\n    random_device r;\n    default_random_engine engine(r());\n\n    #pragma omp parallel for\n    for (int i = 0; i &lt; N; ++i) {\n         uniform_int_distribution&lt;int&gt; uniform_dist(1, 100);\n         // Perform heavy calculations\n         v[i] = uniform_dist(engine); // I assume this is thread unsafe\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "clang", "abstract-syntax-tree"], "answers": [{"comments": [{"owner": {"reputation": 23688, "user_id": 1256041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NJUNN.jpg?s=128&g=1", "display_name": "sdgfsdh", "link": "https://stackoverflow.com/users/1256041/sdgfsdh"}, "edited": false, "score": 0, "creation_date": 1463667455, "post_id": 37306326, "comment_id": 62171132, "body": "Thanks for the pointers. For future readers, I found clang::IntegerLiteral a good class to start with."}], "tags": [], "owner": {"reputation": 40, "user_id": 2797295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V0oDN.jpg?s=128&g=1", "display_name": "Malte Langkabel", "link": "https://stackoverflow.com/users/2797295/malte-langkabel"}, "is_accepted": true, "score": 1, "last_activity_date": 1463592113, "creation_date": 1463592113, "answer_id": 37306326, "question_id": 37305054, "link": "https://stackoverflow.com/questions/37305054/how-should-i-create-a-clang-nameddecl-instance/37306326#37306326", "title": "How should I create a Clang NamedDecl instance?", "body": "<p>The <code>NamedDecl</code> is used by Clang as a base class for more specific decls that are named (e.g. <code>ValueDecl</code>, <code>TypeDecl</code>, ...) which are still mostly base classes for more specific Decl kinds. Thus Clang doesn't want you to create a NamedDecl directly and urges you to create something more specific. </p>\n\n<p>If for example the decl you want to create an object for represents a class you should create a <code>RecordDecl</code> or a <code>XCCRecordDecl</code>.</p>\n\n<p>Of course you can circumvent this mechanism by deriving from <code>clang::NamedDecl</code> and making the constructor of the derived class public.</p>\n"}], "owner": {"reputation": 23688, "user_id": 1256041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NJUNN.jpg?s=128&g=1", "display_name": "sdgfsdh", "link": "https://stackoverflow.com/users/1256041/sdgfsdh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 37306326, "answer_count": 1, "score": 0, "last_activity_date": 1463592113, "creation_date": 1463588221, "question_id": 37305054, "link": "https://stackoverflow.com/questions/37305054/how-should-i-create-a-clang-nameddecl-instance", "title": "How should I create a Clang NamedDecl instance?", "body": "<p>As a learning exercise, I am trying to build a C++ AST in code using the Clang classes directly. </p>\n\n<p>The <code>NamedDecl</code> constructor is <code>protected</code>.</p>\n\n<p>How can I create a <code>NamedDecl</code> instance? </p>\n"}, {"tags": ["c++", "clang", "c++14", "c++17"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1463588258, "post_id": 37305015, "comment_id": 62131880, "body": "As a side note, VS 2015 compiles it just fine"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1463588458, "post_id": 37305015, "comment_id": 62132008, "body": "Clearly a bug. C++1z relaxed constraints on non-type template arguments, so presumably a different code path (that doesn&#39;t trigger the bug) is used."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 4, "creation_date": 1463588582, "post_id": 37305015, "comment_id": 62132086, "body": "It&#39;s apparently treated like a null pointer: <a href=\"http://coliru.stacked-crooked.com/a/966a61826b6d73f9\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/966a61826b6d73f9</a>. This isn&#39;t sane behavior."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1463588977, "post_id": 37305015, "comment_id": 62132327, "body": "Does the standard make any guarantees about misaligned pointers in the first place? If it isn&#39;t legal to have an int at address 42, there&#39;s no reason to allow taking its address. (I saw something similar taking the addresses of members in a packed struct, but of course packed structs are an extension in the first place)."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1463588984, "post_id": 37305015, "comment_id": 62132331, "body": "@T.C., what made you even think that was a possibility?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1463595416, "post_id": 37305015, "comment_id": 62135863, "body": "@Rakete1111 In what way is compiling the above code best described as &quot;just fine&quot;."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1463595474, "post_id": 37305015, "comment_id": 62135895, "body": "@Yakk what I meant was that it compiles without errors, unrelated to the fact that the compiler may be wrong about it"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1463595510, "post_id": 37305015, "comment_id": 62135919, "body": "@RSahu Asking clang what it thought <code>f</code>&#39;s type is (also, checking how it mangles that type)."}, {"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1463596053, "post_id": 37305015, "comment_id": 62136223, "body": "I may be completely off the mark..but I think for the C++11/14 case it&#39;s doing a <a href=\"https://github.com/llvm-mirror/clang/blob/deaa0006eedb4fa540726ef36cdd7c71853d6504/lib/AST/ExprConstant.cpp#L5038\" rel=\"nofollow noreferrer\"><code>CK_IntegralToPointer</code></a> cast, which explains the <code>nullptr</code> and for the C++1z case it&#39;s doing a <a href=\"https://github.com/llvm-mirror/clang/blob/deaa0006eedb4fa540726ef36cdd7c71853d6504/lib/AST/ExprConstant.cpp#L4998\" rel=\"nofollow noreferrer\"><code>CK_AddressSpaceConversion</code></a> cast."}, {"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1463596148, "post_id": 37305015, "comment_id": 62136274, "body": "<a href=\"https://github.com/llvm-mirror/clang/blob/9821058530c8aa4d14cfadb324194245032a1c91/lib/Sema/SemaTemplate.cpp#L4876\" rel=\"nofollow noreferrer\">CheckTemplateArgument</a> also suggests different behavior for C++1z and C++11, but I haven&#39;t gotten anywhere with that."}], "answers": [{"tags": [], "owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "is_accepted": false, "score": 2, "last_activity_date": 1463598404, "creation_date": 1463598404, "answer_id": 37308168, "question_id": 37305015, "link": "https://stackoverflow.com/questions/37305015/reinterpret-cast-a-template-non-type-parameter-clang-c14-vs-c1z/37308168#37308168", "title": "Reinterpret cast a template non-type parameter: clang c++14 vs c++1z", "body": "<p>Using <a href=\"http://gcc.godbolt.org/#\" rel=\"nofollow\">godbolt</a> demonstrates that in <code>-std=c++1z</code> mode Clang 3.5.1 accepts the code but 3.6.0 rejects it. The <a href=\"http://llvm.org/releases/3.6.0/tools/clang/docs/ReleaseNotes.html#id1\" rel=\"nofollow\">changelog</a> indicates that this version was when support for C++1z features were added, namely \"Constant evaluation for all non-type template arguments\". My guess is that C++11 and C++14 mode use the C++11 rules while C++1z mode uses the C++1z/latest draft rules. Of course, the fact that the program is considered valid in C++11/14 mode is a bug in of itself.</p>\n\n<p>Here are some bug reports with similar (but not directly related) cases:</p>\n\n<p><a href=\"https://llvm.org/bugs/show_bug.cgi?id=18043\" rel=\"nofollow\">Bug 18043 - allow arbitrary address constant expressions as non-type template arguments as an extension</a></p>\n\n<p><a href=\"https://llvm.org/bugs/show_bug.cgi?id=10398\" rel=\"nofollow\">Bug 10398 - Clang won't accept a null pointer constant as a non-type template argument</a></p>\n\n<p><a href=\"https://llvm.org/bugs/show_bug.cgi?id=10396\" rel=\"nofollow\">Bug 10396 - clang crashes during name mangling with  as non-type template parameter</a></p>\n\n<p><a href=\"https://llvm.org/bugs/show_bug.cgi?id=9700\" rel=\"nofollow\">Bug 9700 - Null pointer not accepted as non-type template argument</a></p>\n"}], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "answer_count": 1, "score": 14, "last_activity_date": 1463598404, "creation_date": 1463588115, "last_edit_date": 1463596460, "question_id": 37305015, "link": "https://stackoverflow.com/questions/37305015/reinterpret-cast-a-template-non-type-parameter-clang-c14-vs-c1z", "title": "Reinterpret cast a template non-type parameter: clang c++14 vs c++1z", "body": "<p>Consider the following code:</p>\n\n<pre><code>template &lt;int* &gt; struct foo { };\n\nint main() {\n    foo&lt;(int*)42&gt; f;\n    (void)f;\n}\n</code></pre>\n\n<p>When compiling on clang 3.8.0 with <code>-std=c++11</code> or <code>-std=c++14</code>, the program compiles. When compiling with <code>-std=c++1z</code>, it errors with:</p>\n\n<pre><code>main.cpp:4:9: error: non-type template argument is not a constant expression\n    foo&lt;(int*)42&gt; f;\n        ^~~~~~~~\n</code></pre>\n\n<p>gcc 5.3.0 does not compile the code regardless of C++ mode, which I believe to be correct. What is the difference in clang between C++14 and C++1z and why does it accept the code? Did something change in C++1z that is relevant here?</p>\n"}, {"tags": ["c++", "random"], "comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 2, "creation_date": 1463587620, "post_id": 37304764, "comment_id": 62131422, "body": "&quot;such a task&quot; - which part of the task? currently it is a very broad question..."}, {"owner": {"reputation": 4516, "user_id": 1937198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b97a3ec92aed1c16e35c1bf532465d6b?s=128&d=identicon&r=PG", "display_name": "user1937198", "link": "https://stackoverflow.com/users/1937198/user1937198"}, "edited": false, "score": 1, "creation_date": 1463587642, "post_id": 37304764, "comment_id": 62131432, "body": "Do you need actual integer values, or would approximate values be okay? If approximate values are usable, then doubles should handle it, otherwise you need an arbitrary precision number library. <a href=\"http://stackoverflow.com/questions/310276/how-to-handle-arbitrarily-large-integers\" title=\"how to handle arbitrarily large integers\">stackoverflow.com/questions/310276/&hellip;</a>"}, {"owner": {"reputation": 55713, "user_id": 26095, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WLsjF.jpg?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/26095/sean"}, "edited": false, "score": 0, "creation_date": 1463587678, "post_id": 37304764, "comment_id": 62131456, "body": "What sort of datatype will you use manipulating such a large number?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1463587684, "post_id": 37304764, "comment_id": 62131461, "body": "There&#39;s a variety of <a href=\"http://en.cppreference.com/w/cpp/numeric/random\" rel=\"nofollow noreferrer\">random number functions in the Standard Library</a>. Have you evaluated any of these? If you use the right one for your problem, like one that generates 64 bits worth of pure random data with an even distribution, you could concatenate multiple smaller random numbers together to build a much larger one."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 1, "creation_date": 1463587863, "post_id": 37304764, "comment_id": 62131595, "body": "\u201cIs it plausible\u201d \u2014 yes, cryptography libraries need such large, random numbers as par for the course. However, they use special maths libraries to deal with this range."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1463588263, "post_id": 37304764, "comment_id": 62131885, "body": "<i>&quot;If so, how would I write the code to accomplish such a task?&quot;</i> That&#39;s definitely <i>too broad</i>. Stack Overflow isn&#39;t a code writing service! Period. I don&#39;t get which moron upvoted that question."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1463590380, "post_id": 37304764, "comment_id": 62133107, "body": "You could just use the random number functions of the GMP library : <a href=\"https://gmplib.org/manual/Integer-Random-Numbers.html\" rel=\"nofollow noreferrer\">gmplib.org/manual/Integer-Random-Numbers.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 1, "last_activity_date": 1463588331, "creation_date": 1463588331, "answer_id": 37305092, "question_id": 37304764, "link": "https://stackoverflow.com/questions/37304764/generating-very-large-random-numbers-in-c/37305092#37305092", "title": "Generating very large random numbers in c++", "body": "<p>This task, in itself, is pretty trivial. The hardest part is probably just choosing how to represent your large number. For the moment, let's assume an array of 4 <code>unsigned long long</code> (each of which is guaranteed to hold at least 64 bits, so 4 must be at least 256 bits).</p>\n\n<pre><code>struct big_num { \n    unsigned long long data[4];\n};\n\nbig_num gen_random() { \n    big_num ret;\n    std::mt19937_64 gen;\n\n    for (int i=0; i&lt;4; i++)\n        ret[i] = gen();\n    return ret;\n}\n</code></pre>\n\n<p>As is probably obvious from this, the size is pretty much irrelevant. We're basically just producing some number of random bits (64 of them at a time) and pushing them into some sort of container, then returning the container.</p>\n\n<p>The only trick to using this basic idea with a different \"container\" of your choice is getting to the container's representation of the bits, so you can manipulate the individual <code>long</code>, <code>long long</code> (or whatever) components used to store the value. Since the largest type (guaranteed to be) built into C or C++ is 64 bits, it's pretty much guaranteed that any way of storing a number larger than that is going to do it by storing some number of smaller objects that can be represented with a native type.</p>\n"}], "owner": {"reputation": 25, "user_id": 6351988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88bc5349e57d24b603accfe1b4e31732?s=128&d=identicon&r=PG&f=1", "display_name": "kless135", "link": "https://stackoverflow.com/users/6351988/kless135"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 510, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1463588331, "creation_date": 1463587392, "question_id": 37304764, "link": "https://stackoverflow.com/questions/37304764/generating-very-large-random-numbers-in-c", "title": "Generating very large random numbers in c++", "body": "<p>I'm working with an algorithm and would like to do some statistics on it with some very large random numbers. I would like the numbers generated to come from the interval [2^255, 2^256], but it would be equivalent to generate a number in [0,2^255].</p>\n\n<p>I'm working in C++ but I'm very new to programming and only know the basics. Is this even a plausible thing to do (in terms of memory and computing power)? I've seen other posts dealing with 2^32 and 2^64, but haven't found anything quite this big. The only computations I'll be doing with these numbers are comparison, division, and subtraction.</p>\n\n<p>If so, how would I write the code to accomplish such a task?</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 1727, "user_id": 3972491, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/55d53db51fad366ae18c3cc83d1428ac?s=128&d=identicon&r=PG", "display_name": "mmostajab", "link": "https://stackoverflow.com/users/3972491/mmostajab"}, "edited": false, "score": 0, "creation_date": 1463587560, "post_id": 37304746, "comment_id": 62131385, "body": "Is it possible to overload the casting operator to do the copying for me?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 1727, "user_id": 3972491, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/55d53db51fad366ae18c3cc83d1428ac?s=128&d=identicon&r=PG", "display_name": "mmostajab", "link": "https://stackoverflow.com/users/3972491/mmostajab"}, "edited": false, "score": 2, "creation_date": 1463587707, "post_id": 37304746, "comment_id": 62131483, "body": "@mmostajab You cannot overload the casting operator.  You could write a function to hide the loop."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 1727, "user_id": 3972491, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/55d53db51fad366ae18c3cc83d1428ac?s=128&d=identicon&r=PG", "display_name": "mmostajab", "link": "https://stackoverflow.com/users/3972491/mmostajab"}, "edited": false, "score": 0, "creation_date": 1463588640, "post_id": 37304746, "comment_id": 62132121, "body": "@mmostajab That works.  You could template it to make it more generic.  You could also use the <a href=\"http://stackoverflow.com/a/37305009/4342498\">solution</a> provided by <a href=\"http://stackoverflow.com/users/962089/chris\">chris</a> which looks very good."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 2, "last_activity_date": 1463587573, "last_edit_date": 1463587573, "creation_date": 1463587360, "answer_id": 37304746, "question_id": 37304691, "link": "https://stackoverflow.com/questions/37304691/stdarrayfloat-4-to-stdarraydouble-4-casting/37304746#37304746", "title": "std::array&lt;float, 4&gt; to std::array&lt;double, 4&gt; casting", "body": "<p>No you cannot cast one to the other.  They are two unrelated types.  You need to loop through the source array and set each corresponding element in the destination array.</p>\n\n<pre><code>std::array&lt;float, 4&gt; float_array{ 0.0f, 10.0f, 20.0f, 30.0f };\n\nstd::array&lt;double, 4&gt; double_array;\n\nfor (std::size_t i = 0; i &lt; float_array.size(); ++i)\n    double_array[i] = float_array[i]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "is_accepted": true, "score": 2, "last_activity_date": 1463588095, "creation_date": 1463588095, "answer_id": 37305009, "question_id": 37304691, "link": "https://stackoverflow.com/questions/37304691/stdarrayfloat-4-to-stdarraydouble-4-casting/37305009#37305009", "title": "std::array&lt;float, 4&gt; to std::array&lt;double, 4&gt; casting", "body": "<p>You can make a function for it: <kbd><a href=\"http://coliru.stacked-crooked.com/a/c72914cab321f64d\" rel=\"nofollow\">live sample</a></kbd></p>\n\n<pre><code>template&lt;typename Dest, typename Src, std::size_t N, std::size_t... Is&gt;\nauto convert_array_to_impl(const std::array&lt;Src, N&gt; &amp;src, std::index_sequence&lt;Is...&gt;) {\n    return std::array&lt;Dest, N&gt;{{static_cast&lt;Dest&gt;(src[Is])...}};\n}\n\ntemplate&lt;typename Dest, typename Src, std::size_t N&gt;\nauto convert_array_to(const std::array&lt;Src, N&gt; &amp;src) {\n    return convert_array_to_impl&lt;Dest&gt;(src, std::make_index_sequence&lt;N&gt;());\n}\n...\nauto double_array = convert_array_to&lt;double&gt;(float_array);\n</code></pre>\n\n<p>The advantage of this function implementation over a loop is that it will work when the destination type is not default-constructible. If this will never be the case, the loop in the other answer is a bit more straightforward.</p>\n"}, {"comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1463589356, "post_id": 37305208, "comment_id": 62132545, "body": "Yes, sorry, meant use <code>std::copy</code>."}], "tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": false, "score": 0, "last_activity_date": 1463589157, "last_edit_date": 1463589157, "creation_date": 1463588676, "answer_id": 37305208, "question_id": 37304691, "link": "https://stackoverflow.com/questions/37304691/stdarrayfloat-4-to-stdarraydouble-4-casting/37305208#37305208", "title": "std::array&lt;float, 4&gt; to std::array&lt;double, 4&gt; casting", "body": "<p>The types are not the same, thus you can't merely cast one type to another.</p>\n\n<p>You can use the <code>std::copy</code> algorithm function instead of the loop.</p>\n\n<pre><code>#include &lt;algorithm&gt;\n//..\nstd::array&lt;float, 4&gt; f4;\nstd::array&lt;double, 4&gt; d4;\n\n//.. float to double\nstd::copy(f4.begin(), f4.end(), d4.begin()); \n\n// double to float\nstd::copy(d4.begin(), d4.end(), f4.begin()); \n</code></pre>\n"}], "owner": {"reputation": 1727, "user_id": 3972491, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/55d53db51fad366ae18c3cc83d1428ac?s=128&d=identicon&r=PG", "display_name": "mmostajab", "link": "https://stackoverflow.com/users/3972491/mmostajab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 427, "favorite_count": 0, "accepted_answer_id": 37305009, "answer_count": 3, "score": 1, "last_activity_date": 1463589157, "creation_date": 1463587198, "question_id": 37304691, "link": "https://stackoverflow.com/questions/37304691/stdarrayfloat-4-to-stdarraydouble-4-casting", "title": "std::array&lt;float, 4&gt; to std::array&lt;double, 4&gt; casting", "body": "<p>Is it possible to cast a <code>std::array&lt;float, 4&gt;</code> to <code>std::array&lt;double, 4&gt;</code>?</p>\n\n<p>for example:</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/d62b3846618e4f81\" rel=\"nofollow\">http://coliru.stacked-crooked.com/a/d62b3846618e4f81</a></p>\n"}, {"tags": ["c++", "regex", "stl"], "comments": [{"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1463588072, "post_id": 37304460, "comment_id": 62131736, "body": "do you know the <code>strInput</code> that triggers the stack overflow?"}, {"owner": {"reputation": 23367, "user_id": 78162, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1497a61bc7f673e30f224a3df61a6742?s=128&d=identicon&r=PG", "display_name": "BlueMonkMN", "link": "https://stackoverflow.com/users/78162/bluemonkmn"}, "reply_to_user": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1463588144, "post_id": 37304460, "comment_id": 62131787, "body": "@vu1p3n0x Yes, but I&#39;m not sure how to share such a large input string. I don&#39;t want to put 8 MB of text in the question."}, {"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1463588470, "post_id": 37304460, "comment_id": 62132014, "body": "your regex is bounded by line (<code>&quot;^...$&quot;</code>) Is the file all one line? or is there a single line that triggers it? or is it only when processing the whole file at once what triggers it?"}, {"owner": {"reputation": 23367, "user_id": 78162, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1497a61bc7f673e30f224a3df61a6742?s=128&d=identicon&r=PG", "display_name": "BlueMonkMN", "link": "https://stackoverflow.com/users/78162/bluemonkmn"}, "reply_to_user": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1463590954, "post_id": 37304460, "comment_id": 62133426, "body": "I added a link to a page on regex101 that includes the shortest version of the input string that causes the error."}, {"owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 1, "creation_date": 1463591217, "post_id": 37304460, "comment_id": 62133559, "body": "IMO you should replace this complicated regex by a loop over the lines - <code>std::find_if</code> for &quot;create (view|proc)&quot;, <code>std::find_if</code> for &quot;go&quot;, grab everything in-between and do your replacement this way."}, {"owner": {"reputation": 23367, "user_id": 78162, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1497a61bc7f673e30f224a3df61a6742?s=128&d=identicon&r=PG", "display_name": "BlueMonkMN", "link": "https://stackoverflow.com/users/78162/bluemonkmn"}, "reply_to_user": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 0, "creation_date": 1463591345, "post_id": 37304460, "comment_id": 62133633, "body": "@SebastianRedl Unfortunately I&#39;m very unfamiliar with STL. If you could demonstrate that in an answer, I&#39;d love to try it."}, {"owner": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 1, "creation_date": 1463592983, "post_id": 37304460, "comment_id": 62134574, "body": "Is this me or you just want to change <code>create</code> to <code>alter</code> for each procedure/view ?"}, {"owner": {"reputation": 23367, "user_id": 78162, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1497a61bc7f673e30f224a3df61a6742?s=128&d=identicon&r=PG", "display_name": "BlueMonkMN", "link": "https://stackoverflow.com/users/78162/bluemonkmn"}, "reply_to_user": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 0, "creation_date": 1463593158, "post_id": 37304460, "comment_id": 62134666, "body": "@ThomasAyoub I think that sums it up."}, {"owner": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 0, "creation_date": 1463593651, "post_id": 37304460, "comment_id": 62134954, "body": "It might be naive, but isn&#39;t <a href=\"https://regex101.com/r/hF0uP8/1\" rel=\"nofollow noreferrer\">this</a> an acceptable solution (even if it doesn&#39;t solve the SOE)?"}], "answers": [{"comments": [{"owner": {"reputation": 23367, "user_id": 78162, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1497a61bc7f673e30f224a3df61a6742?s=128&d=identicon&r=PG", "display_name": "BlueMonkMN", "link": "https://stackoverflow.com/users/78162/bluemonkmn"}, "edited": false, "score": 0, "creation_date": 1463593836, "post_id": 37306681, "comment_id": 62135063, "body": "The &quot;\\b&quot; at the beginning seems to be preventing the STL regex from matching a <code>create</code> at the beginning of a line for some reason. Need a double \\\\ I assume."}, {"owner": {"reputation": 23367, "user_id": 78162, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1497a61bc7f673e30f224a3df61a6742?s=128&d=identicon&r=PG", "display_name": "BlueMonkMN", "link": "https://stackoverflow.com/users/78162/bluemonkmn"}, "edited": false, "score": 0, "creation_date": 1463594101, "post_id": 37306681, "comment_id": 62135185, "body": "It seems this solution is still going to be far too slow. If I were writing C# code I would split it up by &quot;\\ngo\\n&quot; and replace in each component. But I don&#39;t know how to do that in STL. It&#39;s been running more than a minute and still not done, and I think VB6 was able to do this in less than a minute by processing it one line at a time (I&#39;m rewriting some old code). I thought I could simplify the code by processing it all at once, but the cost turns out to be too high. I don&#39;t even know how to split up text into lines with STL."}, {"owner": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "reply_to_user": {"reputation": 23367, "user_id": 78162, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1497a61bc7f673e30f224a3df61a6742?s=128&d=identicon&r=PG", "display_name": "BlueMonkMN", "link": "https://stackoverflow.com/users/78162/bluemonkmn"}, "edited": false, "score": 0, "creation_date": 1463594676, "post_id": 37306681, "comment_id": 62135480, "body": "So maybe splitting as suggested in <a href=\"http://stackoverflow.com/a/13172514\">this SO answer</a> would help? The text portions to be replaced do not appear to span lines."}, {"owner": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "reply_to_user": {"reputation": 23367, "user_id": 78162, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1497a61bc7f673e30f224a3df61a6742?s=128&d=identicon&r=PG", "display_name": "BlueMonkMN", "link": "https://stackoverflow.com/users/78162/bluemonkmn"}, "edited": false, "score": 0, "creation_date": 1463595195, "post_id": 37306681, "comment_id": 62135754, "body": "The demo from the abovementioned answer adjusted to your sample input is online <a href=\"http://ideone.com/GsKGyJ\" rel=\"nofollow noreferrer\">here</a>"}], "tags": [], "owner": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "is_accepted": false, "score": 2, "last_activity_date": 1463595298, "last_edit_date": 1463595298, "creation_date": 1463593215, "answer_id": 37306681, "question_id": 37304460, "link": "https://stackoverflow.com/questions/37304460/stack-overflow-during-stdregex-replace/37306681#37306681", "title": "Stack overflow during std::regex_replace", "body": "<p>The following trimmed-down version of your regex saves about 20% of processing steps according to regex101 (see <a href=\"https://regex101.com/r/cJ6oA4/2\" rel=\"nofollow\">here</a>).</p>\n\n<pre><code>\\\\bcreate[ \\t]+(view|procedure|proc)[ \\t]+(.+)\\n(((?![ \\t]*go[ \\t]*).*\\n)+)[ \\t]*go[ \\t]*\n</code></pre>\n\n<p>Modifications:</p>\n\n<ul>\n<li>inline anchors removed: you are expressly testing for newline characters</li>\n<li>repetition operator for the db object keywords removed - a repetition at this point would make the original script syntactically invalid.</li>\n<li>initial whitespace pattern replaced by word boundary (note the double backslash - the escape sequence is for the regex engine, not for the compiler)  </li>\n</ul>\n\n<p>If you can be sure that ...</p>\n\n<ul>\n<li><p>the <code>create ...</code> statements do not occur in string literals, and</p></li>\n<li><p>you do not need to distinguish between  <code>create ...</code> statements followed by a <code>go</code> or not (eg. because all statements are trailed by a <code>go</code>)</p></li>\n</ul>\n\n<p>...it might even be easier to just replace these strings:</p>\n\n<pre><code>std::basic_regex&lt;TCHAR&gt; reProc(\"\\bcreate[ \\t]+(view|procedure|proc)\");\nstd::basic_string&lt;TCHAR&gt; replace = _T(\"ALTER $1\");\nreturn std::regex_replace(strInput, reProc, replace);\n</code></pre>\n\n<p>(<a href=\"https://regex101.com/r/cP9fD1/2\" rel=\"nofollow\">Here</a> is a demo for the latter approach - reduces the steps to a little more than 1/4 th).</p>\n"}, {"tags": [], "owner": {"reputation": 23367, "user_id": 78162, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1497a61bc7f673e30f224a3df61a6742?s=128&d=identicon&r=PG", "display_name": "BlueMonkMN", "link": "https://stackoverflow.com/users/78162/bluemonkmn"}, "is_accepted": true, "score": 1, "last_activity_date": 1463606769, "last_edit_date": 1495539850, "creation_date": 1463606769, "answer_id": 37310363, "question_id": 37304460, "link": "https://stackoverflow.com/questions/37304460/stack-overflow-during-stdregex-replace/37310363#37310363", "title": "Stack overflow during std::regex_replace", "body": "<p>It turns out that STL regular expressions are tragic under-performers versus Perl (about 100 times slower if you can believe <a href=\"https://stackoverflow.com/a/37016671/78162\">https://stackoverflow.com/a/37016671/78162</a>), so it's apparently necessary to absolutely minimize the use of regular expressions in STL/C++ when performance is a serious concern. (The degree to which C++/STL under-performs here blew my mind considering I presume C++ to generally be one of the more performant languages). I ended up passing the file stream to read one line at a time and only run the expression on lines that needed processing like this:</p>\n\n<pre><code>   std::basic_string&lt;TCHAR&gt; result;\n   std::basic_string&lt;TCHAR&gt; line;\n   std::basic_regex&lt;TCHAR&gt; reProc(_T(\"^[ \\t]*create[ \\t]+(view|procedure|proc)+[ \\t]+(.+)$\"), std::regex::optimize);\n   std::basic_string&lt;TCHAR&gt; replace = _T(\"ALTER $1 $2\");\n\n   do {\n      std::getline(input, line);\n      int pos = line.find_first_not_of(_T(\" \\t\"));\n      if ((pos != std::basic_string&lt;TCHAR&gt;::npos) \n          &amp;&amp; (_tcsnicmp(line.substr(pos, 6).data(), _T(\"create\"), 6)==0))\n         result.append(std::regex_replace(line, reProc, replace));\n      else\n         result.append(line);\n      result.append(_T(\"\\n\"));\n   } while (!input.eof());\n   return result;\n</code></pre>\n"}], "owner": {"reputation": 23367, "user_id": 78162, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1497a61bc7f673e30f224a3df61a6742?s=128&d=identicon&r=PG", "display_name": "BlueMonkMN", "link": "https://stackoverflow.com/users/78162/bluemonkmn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 0, "accepted_answer_id": 37310363, "answer_count": 2, "score": 4, "last_activity_date": 1463606769, "creation_date": 1463586504, "last_edit_date": 1463590243, "question_id": 37304460, "link": "https://stackoverflow.com/questions/37304460/stack-overflow-during-stdregex-replace", "title": "Stack overflow during std::regex_replace", "body": "<p>I'm trying to execute the following C++ STL-based code to replace text in a relatively large SQL script (~8MB):</p>\n\n<pre><code>std::basic_regex&lt;TCHAR&gt; reProc(\"^[ \\t]*create[ \\t]+(view|procedure|proc)+[ \\t]+(.+)$\\n((^(?![ \\t]*go[ \\t]*).*$\\n)+)^[ \\t]*go[ \\t]*$\");\nstd::basic_string&lt;TCHAR&gt; replace = _T(\"ALTER $1 $2\\n$3\\ngo\");\nreturn std::regex_replace(strInput, reProc, replace);\n</code></pre>\n\n<p>The result is a stack overflow, and it's hard to find information about that particular error on this particular site since that's also the name of the site.</p>\n\n<p><strong>Edit:</strong> I am using Visual Studio 2013 Update 5</p>\n\n<p><strong>Edit 2:</strong> The original file is over 23,000 lines. I cut the file down to 3,500 lines and still get the error. When I cut it by another ~50 lines down to 3,456 lines, the error goes away. If I put just those cut lines into the file, the error is still gone. This suggests that the error is not related to specific text, but just too much of it.</p>\n\n<p><strong>Edit 3:</strong> A full <em>working</em> example is demonstrated operating properly here:\n<a href=\"https://regex101.com/r/iD1zY6/1\" rel=\"nofollow\">https://regex101.com/r/iD1zY6/1</a>\nIt doesn't work in that STL code, though.</p>\n"}, {"tags": ["c++", "global-variables", "constants"], "comments": [{"owner": {"reputation": 479, "user_id": 2763060, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/yBb54.png?s=128&g=1", "display_name": "ranu", "link": "https://stackoverflow.com/users/2763060/ranu"}, "edited": false, "score": 1, "creation_date": 1463586593, "post_id": 37304437, "comment_id": 62130759, "body": "Make <code>au8FrameBuffer</code> a char pointer and then, after reading the config file, point to the allocated <code>char[FRAME_SIZE]</code>"}, {"owner": {"reputation": 2174, "user_id": 5398184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe5626580b435c284cf0605e15f32?s=128&d=identicon&r=PG", "display_name": "Biruk Abebe", "link": "https://stackoverflow.com/users/5398184/biruk-abebe"}, "edited": false, "score": 1, "creation_date": 1463586617, "post_id": 37304437, "comment_id": 62130772, "body": "Since you are using a static array its size has to be known at compile time. You could instead use a character pointer in the structure and dynamically create the array on the heap after you calculated its size."}], "answers": [{"tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1463586923, "creation_date": 1463586923, "answer_id": 37304586, "question_id": 37304437, "link": "https://stackoverflow.com/questions/37304437/initialize-size-of-char-in-struct-depending-on-file-reading-conditions/37304586#37304586", "title": "Initialize size of char in struct depending on file reading conditions", "body": "<p>Instead of a char array, use a <code>std::vector&lt;char&gt;</code> which you can set to the right size with a constructor call, or with <code>resize</code>.  When you need a pointer use <code>&amp;buf[0]</code></p>\n"}, {"tags": [], "owner": {"reputation": 2174, "user_id": 5398184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe5626580b435c284cf0605e15f32?s=128&d=identicon&r=PG", "display_name": "Biruk Abebe", "link": "https://stackoverflow.com/users/5398184/biruk-abebe"}, "is_accepted": true, "score": 1, "last_activity_date": 1463595723, "creation_date": 1463595723, "answer_id": 37307370, "question_id": 37304437, "link": "https://stackoverflow.com/questions/37304437/initialize-size-of-char-in-struct-depending-on-file-reading-conditions/37307370#37307370", "title": "Initialize size of char in struct depending on file reading conditions", "body": "<p>You could use a character pointer in the structure and dynamically create the array on the heap after you calculated its size.   </p>\n\n<pre><code> typedef struct {\n  ...\n  unsigned char* au8FrameBuffer; \n  ...\n}tstrFrameRawData;\n\n....\n\nFRAME_SIZE=frameWidth*frameHeight;\ntstrFrameRawData.au8FrameBuffer=new unsigned char[FRAME_SIZE];//dynamically created the array\n\n ....\n//delete[] tstrFrameRawData.au8FrameBuffer;//delete it once you are done\n</code></pre>\n"}], "owner": {"reputation": 207, "user_id": 6197148, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c0e02975ce2cc589261ecc9eb88d7795?s=128&d=identicon&r=PG&f=1", "display_name": "Dinendal", "link": "https://stackoverflow.com/users/6197148/dinendal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 37307370, "answer_count": 2, "score": 1, "last_activity_date": 1463595723, "creation_date": 1463586423, "question_id": 37304437, "link": "https://stackoverflow.com/questions/37304437/initialize-size-of-char-in-struct-depending-on-file-reading-conditions", "title": "Initialize size of char in struct depending on file reading conditions", "body": "<p>I would like to initialize this :</p>\n\n<p>toto.cpp</p>\n\n<pre><code>typedef struct {\n  ...\n  unsigned char au8FrameBuffer[FRAME_SIZE]; \n  ...\n}tstrFrameRawData;\n</code></pre>\n\n<p>But the frame size depends on the configuration written in a file.</p>\n\n<p>main.cpp</p>\n\n<pre><code>string cameraSource = configFile.getItem(\"CAMERA_SOURCE\");\nif (cameraSource == \"CAMERA_WGA\")\n          {\n                frameFormat = FDESC_u8FORMAT_GRAY_8BIT_752_480;\n                frameWidth = 752;\n                frameHeight = 480;\n</code></pre>\n\n<p><code>FRAME_SIZE</code> is <code>frameWidth*frameHeight</code>, those are global variables.</p>\n\n<p>But since <code>unsigned char au8FrameBuffer[FRAME_SIZE]</code> is waiting for a constant FRAME_SIZE I don't know how to pass it.</p>\n"}, {"tags": ["c++", "opencv", "anpr"], "answers": [{"comments": [{"owner": {"reputation": 3177, "user_id": 1233618, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/faa72d8869e75b70d575fc23169b2a05?s=128&d=identicon&r=PG", "display_name": "TTGroup", "link": "https://stackoverflow.com/users/1233618/ttgroup"}, "edited": false, "score": 0, "creation_date": 1463658100, "post_id": 37304931, "comment_id": 62163548, "body": "thank you! I tried to use Erosion, It&#39;s ok for this image with the proper parameter. But It make lost some foreground pixels of other blobs, so It&#39;s not good way to apply for this case. Any more suggestion for me? Thank you!"}], "tags": [], "owner": {"reputation": 1529, "user_id": 3650053, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QLEdE.jpg?s=128&g=1", "display_name": "Shangtong Zhang", "link": "https://stackoverflow.com/users/3650053/shangtong-zhang"}, "is_accepted": false, "score": 1, "last_activity_date": 1463587863, "creation_date": 1463587863, "answer_id": 37304931, "question_id": 37304401, "link": "https://stackoverflow.com/questions/37304401/how-to-extract-the-numbers-in-license-plate/37304931#37304931", "title": "How to extract the numbers in license plate?", "body": "<p>You may want to use eroding.\nErosion can remove some part of image. It's very likely that erosion can remove the connection part between plate bound and letter.\n<a href=\"http://docs.opencv.org/2.4/doc/tutorials/imgproc/erosion_dilatation/erosion_dilatation.html\" rel=\"nofollow\">http://docs.opencv.org/2.4/doc/tutorials/imgproc/erosion_dilatation/erosion_dilatation.html</a>\n<a href=\"http://homepages.inf.ed.ac.uk/rbf/HIPR2/erode.htm\" rel=\"nofollow\">http://homepages.inf.ed.ac.uk/rbf/HIPR2/erode.htm</a></p>\n"}], "owner": {"reputation": 3177, "user_id": 1233618, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/faa72d8869e75b70d575fc23169b2a05?s=128&d=identicon&r=PG", "display_name": "TTGroup", "link": "https://stackoverflow.com/users/1233618/ttgroup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 786, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463587863, "creation_date": 1463586328, "question_id": 37304401, "link": "https://stackoverflow.com/questions/37304401/how-to-extract-the-numbers-in-license-plate", "title": "How to extract the numbers in license plate?", "body": "<p>I'm using <code>OpenCV</code> to implement ANPR program.</p>\n\n<p>I tried to extract the numbers in the plate. The sample code is below</p>\n\n<pre><code>adaptiveThreshold(src_gray, binary_image, THESHOLD_MAX, ADAPTIVE_THRESH_GAUSSIAN_C, CV_THRESH_BINARY_INV, BLOCK_SIZE, MEAN_OFFSET);\n\nCvBlobs blobs;\nIplImage binary = binary_image;\nIplImage *labelImg = cvCreateImage(cvGetSize(&amp;binary), IPL_DEPTH_LABEL, 1);\nunsigned int result = cvLabel(&amp;binary, labelImg, blobs);\ncvReleaseImage(&amp;labelImg);\ncvFilterByArea(blobs, DETECT_BLOB_AREA_MIN, DETECT_BLOB_AREA_MAX);\n</code></pre>\n\n<p>Everything is almost OK with the <code>adaptiveThreshold()</code> and `cvLabel(), however there are some images give the ouput of adaptiveThreshold() is not good, the following is an example.</p>\n\n<p><a href=\"https://i.stack.imgur.com/QSe7m.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QSe7m.png\" alt=\"enter image description here\"></a></p>\n\n<p>There are 3 letters in the plate (that are bounded with the Red rectangles).</p>\n\n<p>there 3 letter cannot detect with cvLabel() because they are stick with plate bound. In this case, my algorithm cannot extract these letter.</p>\n\n<p>Someone tell me there are any way to extract those 3 letter in this case?</p>\n\n<p>Thank you very much! </p>\n"}, {"tags": ["c++", "casting", "type-punning"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1463586272, "post_id": 37304359, "comment_id": 62130523, "body": "Why do you need to go there and back again?"}, {"owner": {"reputation": 1529, "user_id": 3650053, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QLEdE.jpg?s=128&g=1", "display_name": "Shangtong Zhang", "link": "https://stackoverflow.com/users/3650053/shangtong-zhang"}, "edited": false, "score": 2, "creation_date": 1463586484, "post_id": 37304359, "comment_id": 62130680, "body": "use reinterpret_cast?"}, {"owner": {"reputation": 10784, "user_id": 620863, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-Mqgo9PO_taA/AAAAAAAAAAI/AAAAAAAAABM/8h3wY8pcFbg/photo.jpg?sz=128", "display_name": "Anne Quinn", "link": "https://stackoverflow.com/users/620863/anne-quinn"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1463586538, "post_id": 37304359, "comment_id": 62130722, "body": "@NathanOliver - tbh, laziness.  There&#39;s an edge case where there can be a negative index into an array, and I don&#39;t want to write the machinery into the pipeline to deal with it"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 1, "creation_date": 1463586575, "post_id": 37304359, "comment_id": 62130747, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/26036504/converting-signed-to-unsigned-and-vice-versa\">Converting Signed to Unsigned and vice versa</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1463586670, "post_id": 37304359, "comment_id": 62130808, "body": "Ah.  You may to to give this a read: <a href=\"http://stackoverflow.com/questions/13150449/efficient-unsigned-to-signed-cast-avoiding-implementation-defined-behavior\" title=\"efficient unsigned to signed cast avoiding implementation defined behavior\">stackoverflow.com/questions/13150449/&hellip;</a>"}, {"owner": {"reputation": 10784, "user_id": 620863, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-Mqgo9PO_taA/AAAAAAAAAAI/AAAAAAAAABM/8h3wY8pcFbg/photo.jpg?sz=128", "display_name": "Anne Quinn", "link": "https://stackoverflow.com/users/620863/anne-quinn"}, "reply_to_user": {"reputation": 1529, "user_id": 3650053, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QLEdE.jpg?s=128&g=1", "display_name": "Shangtong Zhang", "link": "https://stackoverflow.com/users/3650053/shangtong-zhang"}, "edited": false, "score": 0, "creation_date": 1463586744, "post_id": 37304359, "comment_id": 62130870, "body": "@SlardarZhang - will <code>signedVar == *reinterpret_cast&lt;int32*&gt;(&amp;(*reinterpret_cast&lt;uint32*&gt;(&amp;sign&zwnj;&#8203;edVar)));</code> always be true? (wacky code but y&#39;know what I mean!)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1463586767, "post_id": 37304359, "comment_id": 62130881, "body": "@JonathanMee I do not think that works in all cases.  If your machine does not have a twos-compliment signed integer(this is not required) I do not think it works."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 1529, "user_id": 3650053, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QLEdE.jpg?s=128&g=1", "display_name": "Shangtong Zhang", "link": "https://stackoverflow.com/users/3650053/shangtong-zhang"}, "edited": false, "score": 0, "creation_date": 1463587037, "post_id": 37304359, "comment_id": 62131049, "body": "@SlardarZhang <code>static_cast</code> is what you want see standard section 4.7.2 You do not want <code>reinterpret_cast</code> see standard section 5.2.10.3."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1463587214, "post_id": 37304359, "comment_id": 62131161, "body": "@NathanOliver Fascinating, I&#39;ve been digging through the standard and it seems you&#39;re right without 2&#39;s compliment truncation can occur."}], "answers": [{"tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": true, "score": 2, "last_activity_date": 1463586736, "creation_date": 1463586736, "answer_id": 37304527, "question_id": 37304359, "link": "https://stackoverflow.com/questions/37304359/signed-integer-to-unsigned-and-back/37304527#37304527", "title": "Signed integer to unsigned and back?", "body": "<p>If your machine uses 1s-complement or sign-magnitude arithmetic (which is allowed by the C standard at least; not sure about C++), then this double conversion will convert the value -0 into 0.  If your machine uses 2s complement, then this will be fine.</p>\n\n<p>That said, I'm not aware of any machine built in the last 30 years that uses anything other than 2s complement for arithmetic.</p>\n"}], "owner": {"reputation": 10784, "user_id": 620863, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-Mqgo9PO_taA/AAAAAAAAAAI/AAAAAAAAABM/8h3wY8pcFbg/photo.jpg?sz=128", "display_name": "Anne Quinn", "link": "https://stackoverflow.com/users/620863/anne-quinn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 588, "favorite_count": 0, "accepted_answer_id": 37304527, "answer_count": 1, "score": 1, "last_activity_date": 1463589798, "creation_date": 1463586209, "last_edit_date": 1463589798, "question_id": 37304359, "link": "https://stackoverflow.com/questions/37304359/signed-integer-to-unsigned-and-back", "title": "Signed integer to unsigned and back?", "body": "<p>I would like to store a signed <code>int32</code> into an unsigned <code>uint32</code> such that I can extract a <code>int32</code> from it later.  The value of the <code>uint32</code> itself isn't used when it stores an integer like this, but I can't use a union in this case unfortunately. The way I currently do this is by simply converting it:</p>\n\n<pre><code>int32  signedVar   = -500;\nuint32 unsignedVar = uint32(signedVar);\nfunc(int32(unsignedVar)); // should supply the function with -500\n</code></pre>\n\n<p>This appears to work, but I'm afraid it might not be portable, and that there might be needless conversions happening behind the scenes for what I'm hoping is a no-op.</p>\n\n<p>Is -500 or any other negative number guaranteed to survive this conversion? If not, is there a \"painless\" (none of the types are changed, only the conversion method) alternative?</p>\n\n<p>Edit: I'm most concerned with making sure the value in <code>int32</code> is preserved in a <code>uint32</code> so it can be used as a <code>int32</code> of the same value later, the <code>uint32</code> version is never used.  (editing because SO asked me to explain how this isn't a duplicate of another question; it doesn't specify what the results of the conversion should look like, or that it needs to be symmetrical like this, making it too general to be applied here) </p>\n"}, {"tags": ["c++", "overloading", "operator-keyword"], "comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 1, "creation_date": 1463586443, "post_id": 37304303, "comment_id": 62130648, "body": "You&#39;ll need to either 1) Have a common <code>Doctor</code> method that will return the values you need to compare and write your greater than operator in the <code>Doctor</code> class 2) Write <code>bool FullTimeDoctor::operator&gt;(const FullTimeDoctor&amp;)</code>, <code>bool FullTimeDoctor::operator&gt;(const PartTimeDoctor&amp;)</code>, <code>bool PartTimeDoctor::operator&gt;(const FullTimeDoctor&amp;)</code>, and <code>bool PartTimeDoctor::operator&gt;(const PartTimeDoctor&amp;)</code>"}, {"owner": {"reputation": 1139, "user_id": 6266602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0fa60ab2c1ac1b185db45679cabe8c9?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas B Preusser", "link": "https://stackoverflow.com/users/6266602/thomas-b-preusser"}, "edited": false, "score": 0, "creation_date": 1463586854, "post_id": 37304303, "comment_id": 62130944, "body": "Shouldn&#39;t <code>calcTotalPayment()</code> return some numeric value? It appears that its result should be decisive for the comparison. If so, make it virtual and implement <code>bool operator&gt;(Doctor const &amp;a, Doctor const &amp;b)</code>."}], "owner": {"reputation": 11, "user_id": 6351843, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dsGlHErDV7E/AAAAAAAAAAI/AAAAAAAAAqM/SrgdUjvWOwM/photo.jpg?sz=128", "display_name": "Atakan \u015eeno\u011flu", "link": "https://stackoverflow.com/users/6351843/atakan-%c5%9eeno%c4%9flu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 311, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1463586528, "creation_date": 1463586043, "question_id": 37304303, "link": "https://stackoverflow.com/questions/37304303/c-greater-than-operator-overloading-with-three-classes", "title": "C++ Greater Than Operator Overloading with Three Classes", "body": "<p>For my exam practice I am trying to overload \">\" operator to check if left handside is bigger than right handside.</p>\n\n<p>It needs to compare salaries from two different classes. But only PartTimeDoctor class has \"salary\" variable. FullTimeDoctor class has \"baseSalary\" variable which calculated differently from \"salary\".</p>\n\n<p>The original question is,</p>\n\n<p>Overload \u2018greater than\u2019 operator as a global function which gets two Doctor objects as parameters and returns true if the left hand side doctor object earns more than that of right hand side doctor.  </p>\n\n<p>Base class:</p>\n\n<pre><code>class Doctor {\n\nprotected:\n    string name, surname, expertise;\n\npublic:\n\n    Doctor();\n    void print();\n    void calcTotalPayment();\n};\n</code></pre>\n\n<p>Inherited Class:</p>\n\n<pre><code>class FullTimeDoctor : public Doctor {\n\nprivate:\n\n    int baseSalary;\n    int feeShift;\n\npublic:\n\n    void setBaseSalary(int);\n    int getBaseSalary();\n\n    void setFeeShift(int);\n    int getFeeShift();\n\n    FullTimeDoctor();\n\n    void print();\n\n    void calcTotalPayment();\n\n};\n</code></pre>\n\n<p>Inherited Class</p>\n\n<pre><code>class PartTimeDoctor : public Doctor {\n\nprivate:\n\n    int feePerEx;\n    int numOfEx;\n    int salary;\n\npublic:\n\n    PartTimeDoctor();\n\n    void setFeePerEx(int);\n    int getFeePerEx();\n\n    void setNumOfEx(int);\n    int getNumOfEx();\n\n    void calcTotalPayment();\n\n    void print();\n};\n</code></pre>\n\n<p>I did not add cpp files here but they are all ok. So how can I do this overloading? Thanks in advance.</p>\n"}, {"tags": ["c++", "hashmap"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1463585993, "post_id": 37304179, "comment_id": 62130359, "body": "related/maybe dupe: <a href=\"http://stackoverflow.com/questions/535317/checking-value-exist-in-a-stdmap-c\" title=\"checking value exist in a stdmap c\">stackoverflow.com/questions/535317/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4678, "user_id": 4089949, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cd972e12c05d5e13dd8a6acd0025781e?s=128&d=identicon&r=PG&f=1", "display_name": "Agaz Wani", "link": "https://stackoverflow.com/users/4089949/agaz-wani"}, "edited": false, "score": 0, "creation_date": 1463586322, "post_id": 37304302, "comment_id": 62130565, "body": "Thanks , Is <code>Boost.Bimap</code> fast as <code>std::unordered_map</code>"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 4678, "user_id": 4089949, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cd972e12c05d5e13dd8a6acd0025781e?s=128&d=identicon&r=PG&f=1", "display_name": "Agaz Wani", "link": "https://stackoverflow.com/users/4089949/agaz-wani"}, "edited": false, "score": 0, "creation_date": 1463586469, "post_id": 37304302, "comment_id": 62130666, "body": "@AaghazHussain It cannot possibly be."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1464020190, "post_id": 37304302, "comment_id": 62300403, "body": "It probably isn&#39;t <i>quite</i> as fast, but it is probably not far off (in other words O(1), rather than O(n))."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 3, "last_activity_date": 1463586040, "creation_date": 1463586040, "answer_id": 37304302, "question_id": 37304179, "link": "https://stackoverflow.com/questions/37304179/how-to-access-value-of-a-key-in-hash-map/37304302#37304302", "title": "How to access value of a key in hash map", "body": "<blockquote>\n  <p>How to make it work otherwise like <code>hashmap[300]</code> to give <code>\"Apple\"</code>.</p>\n</blockquote>\n\n<p>Hash maps are unidirectional: <code>key --&gt; value</code>. If you need both directions to be fast, you'll need a different data structure (like <a href=\"http://www.boost.org/doc/libs/1_61_0/libs/bimap/doc/html/index.html\" rel=\"nofollow\">Boost.Bimap</a>).</p>\n\n<p>If you just want that lookup to work period and are okay with linear performance, than you can just use <code>std::find_if</code>:</p>\n\n<pre><code>auto it = std::find_if(hashmap.begin(), hashmap.end(),\n    [](auto const&amp; pr){ return pr.second == 300; });\nif (it != hashmap.end()) {\n    std::cout &lt;&lt; \"Key for 300: \" &lt;&lt; it-&gt;first;\n}\n</code></pre>\n\n<p>There's nothing in <code>std::unordered_map</code> that based on looking up values. </p>\n"}, {"tags": [], "owner": {"reputation": 8788, "user_id": 6866309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CFXxE.jpg?s=128&g=1", "display_name": "Pavan Chandaka", "link": "https://stackoverflow.com/users/6866309/pavan-chandaka"}, "is_accepted": false, "score": 0, "last_activity_date": 1565290721, "creation_date": 1565290721, "answer_id": 57419117, "question_id": 37304179, "link": "https://stackoverflow.com/questions/37304179/how-to-access-value-of-a-key-in-hash-map/57419117#57419117", "title": "How to access value of a key in hash map", "body": "<p>There is no direct access as you expected.</p>\n\n<p>One of the ways is to use <code>std::find_if</code>. </p>\n\n<pre><code>//DATA\nstd::unordered_map&lt;std::string,int&gt; hashmap = {\n\n            {\"Apple\", 300},\n            {\"Banana\",60},\n            {\"Orange\",70}\n};\n\n\n//FIND BASED ON GIVEN INPUT\nconst auto&amp; foundItem = std::find_if(hashmap.begin(),hashmap.end(),\n                [](const std::pair&lt;std::string,int&gt;&amp; item)\n                {\n                    return item.second == 300;\n                });\n\nstd::cout&lt;&lt;foundItem-&gt;first&lt;&lt;std::endl;\n</code></pre>\n\n<p>And moreover, when you are looking for value in a unordered map, there is a possibility of another key having similar value. </p>\n\n<p>for example another element <code>{\"grape\",300}</code>. If you want all the keys with value 300....</p>\n\n<pre><code>//DATA\nstd::unordered_map&lt;std::string,int&gt; hashmap = {\n\n              {\"Apple\", 300},\n              {\"Banana\",60},\n              {\"Orange\",70},\n              {\"Grape\",300}\n};\n\n//RESULT\nstd::vector&lt;std::string&gt; foundValues;\n\n//FIND BASED ON GIVEN INPUT\nstd::for_each(hashmap.begin(),hashmap.end(),\n                 [&amp;foundValues](const std::pair&lt;std::string,int&gt;&amp; item)\n                 {\n                       if(item.second == 300)\n                           foundValues.push_back(item.first);\n\n                 });\n\n //JUST TO TEST\n std::cout&lt;&lt;foundValues[0]&lt;&lt;\"   \"&lt;&lt;foundValues[1]&lt;&lt;std::endl;\n</code></pre>\n"}], "owner": {"reputation": 4678, "user_id": 4089949, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cd972e12c05d5e13dd8a6acd0025781e?s=128&d=identicon&r=PG&f=1", "display_name": "Agaz Wani", "link": "https://stackoverflow.com/users/4089949/agaz-wani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3307, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1565290721, "creation_date": 1463585687, "last_edit_date": 1463585953, "question_id": 37304179, "link": "https://stackoverflow.com/questions/37304179/how-to-access-value-of-a-key-in-hash-map", "title": "How to access value of a key in hash map", "body": "<p>I am trying to access the value of particular hash key. The example code is below. <a href=\"http://cpp.sh/2qikc\" rel=\"nofollow\">Test Here</a></p>\n\n<pre><code>// unordered_map::at\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;unordered_map&gt;\n\nint main ()\n{\n  std::unordered_map&lt;std::string,int&gt; hashmap = {\n                { \"Apple\", 300},\n                { \"Banana\", 60},\n                { \"Orange\", 70 } };\n\n  std::cout &lt;&lt; \"Value :\" &lt;&lt; hashmap[300]&lt;&lt;std::endl;\n\n  return 0;\n}\n</code></pre>\n\n<p>However when I try to access key of a particular value, it works fine, like <code>hashmap[\"Apple\"]</code>, it give <code>300</code> i,e the key of <code>Apple</code>. How to make it work otherwise like <code>hashmap[300]</code> to give \"Apple\" .</p>\n"}, {"tags": ["c++", "eclipse", "arrayfire"], "owner": {"reputation": 21, "user_id": 6351588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d9d59e7554df62c70524333667136ef?s=128&d=identicon&r=PG&f=1", "display_name": "Osmell Machado", "link": "https://stackoverflow.com/users/6351588/osmell-machado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1463585532, "creation_date": 1463585532, "question_id": 37304102, "link": "https://stackoverflow.com/questions/37304102/setting-up-eclipse-for-arrayfire-on-linux", "title": "Setting up Eclipse for ArrayFire on Linux", "body": "<p>I am trying to set up Eclipse (Mars 2.0) on Ubuntu 14.04 in order to compile and run C/C++ applications with ArrayFire utilities. I have already installed ArrayFire on my computer in /opt/ARRAYFIRE/arrayfire-3 and I'm trying first a very simple example using Eclipse to test ArrayFire performance.</p>\n\n<p>I have created a simple C++ test code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;arrayfire.h&gt;\n\nusing namespace af;\nusing namespace std;\n\nint main() {\n\n    const int N = 5;\n    int nBytes = N * sizeof(int);\n    int hostarr[N] = {3,1,4,1,5};\n    float f[8] = {1,2,4,8,16,32,64,128};\n\n    af::array aux(2,4,f);\n\n    cout &lt;&lt; \"Well done!!!\" &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>I followed all the installation instructions of ArrayFire (including the prerequisites). Then, I set the ArrayFire headers \"include\" (-l) and libraries \"lib\" (-L) installed directories paths on the Eclipse project C/C++ Build Settings:</p>\n\n<p>For my specific case:</p>\n\n<ul>\n<li>In GCC C++ Compiler -> Includes: /opt/ARRAYFIRE/arrayfire-3/include</li>\n<li>In GCC C Compiler -> Includes: /opt/ARRAYFIRE/arrayfire-3/include</li>\n<li>In GCC C++ Linker -> Libraries: /opt/ARRAYFIRE/arrayfire-3/lib</li>\n</ul>\n\n<p>This is the normal procedure that I always have done for a new lib. However, when I trying to compile with gcc the next error ocurs:</p>\n\n<pre><code>Invoking: GCC C++ Linker\ng++ -L/opt/AMDAPPSDK-3.0/lib -L/opt/ARRAYFIRE/arrayfire-3/lib -o \"classifier\"  ./src/classifier.o   -lOpenCL\n./src/classifier.o: En la funci\u00f3n `main':\n/home/ECLIPSE/classifier/Debug/../src/classifier.cpp:23: referencia a `af::array::array&lt;float&gt;(long long, long long, float const*, af_source)' sin definir\n/home/ECLIPSE/classifier/Debug/../src/classifier.cpp:26: referencia a `af::array::~array()' sin definir\n/home/ECLIPSE/classifier/Debug/../src/classifier.cpp:26: referencia a `af::array::~array()' sin definir\ncollect2: error: ld devolvi\u00f3 el estado de salida 1\n</code></pre>\n\n<p>(sorry for the spanish) \"sin definir\" = is not defined.</p>\n\n<p>I know that the header are well-linked because I can see the declaration and Compiler works good, however the Linker fails.</p>\n\n<p>Does anyone have any idea what could be the problem or what's happening?</p>\n"}, {"tags": ["c++", "templates", "pointers"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1463585987, "post_id": 37303968, "comment_id": 62130354, "body": "FWIW, g++ fails at that line too."}, {"owner": {"reputation": 999, "user_id": 98328, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/XgbPP.jpg?s=128&g=1", "display_name": "Charlie Skilbeck", "link": "https://stackoverflow.com/users/98328/charlie-skilbeck"}, "edited": false, "score": 0, "creation_date": 1463587592, "post_id": 37303968, "comment_id": 62131409, "body": "It&#39;s defined in a system header as ((GPIO_TypeDef *) GPIOC_BASE)"}, {"owner": {"reputation": 999, "user_id": 98328, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/XgbPP.jpg?s=128&g=1", "display_name": "Charlie Skilbeck", "link": "https://stackoverflow.com/users/98328/charlie-skilbeck"}, "edited": false, "score": 0, "creation_date": 1463587633, "post_id": 37303968, "comment_id": 62131427, "body": "Hence the cast to uint32 in the template instantiation"}], "answers": [{"comments": [{"owner": {"reputation": 999, "user_id": 98328, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/XgbPP.jpg?s=128&g=1", "display_name": "Charlie Skilbeck", "link": "https://stackoverflow.com/users/98328/charlie-skilbeck"}, "edited": false, "score": 0, "creation_date": 1463586931, "post_id": 37304238, "comment_id": 62130993, "body": "I can make it work this way, but it&#39;s very grim. The address of foo is coming from a system header which has a (foo *) cast on it, so I have to explicitly cast it to a uint32 (or similar) and then back again in the template function. I was hoping to avoid this..."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1463587298, "post_id": 37304238, "comment_id": 62131222, "body": "Initialization of <code>f</code> there is ill-formed for the same reason that passing in <code>FOO_ADDR</code> is ill-formed. gcc bug for allowing it (clang is correct in rejecting)."}, {"owner": {"reputation": 19146, "user_id": 635654, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b8fb58eef98caeec6ab3366e0ac986d7?s=128&d=identicon&r=PG", "display_name": "CygnusX1", "link": "https://stackoverflow.com/users/635654/cygnusx1"}, "edited": false, "score": 0, "creation_date": 1463588226, "post_id": 37304238, "comment_id": 62131853, "body": "Doing anything with <code>f</code> with a hardcoded address is undefined behavior anyway. What matters is if OP can do it that way with <i>his</i> particular compiler."}], "tags": [], "owner": {"reputation": 19146, "user_id": 635654, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b8fb58eef98caeec6ab3366e0ac986d7?s=128&d=identicon&r=PG", "display_name": "CygnusX1", "link": "https://stackoverflow.com/users/635654/cygnusx1"}, "is_accepted": false, "score": 0, "last_activity_date": 1463588251, "last_edit_date": 1463588251, "creation_date": 1463585871, "answer_id": 37304238, "question_id": 37303968, "link": "https://stackoverflow.com/questions/37303968/using-an-absolute-pointer-address-as-a-template-argument/37304238#37304238", "title": "using an absolute pointer address as a template argument", "body": "<p>Have you try casting the pointer address to and from <code>uintptr_t</code>, which is an unsigned integer capable of holding a pointer value?\nThe type is defined in a standard header <code>&lt;cstdint&gt;</code> but it is only optional. If it does not exist in your version of C++, try <code>size_t</code> instead.</p>\n\n<p>A full example would then look like:</p>\n\n<pre><code>#include &lt;cstdint&gt;\n\nclass foo\n{\n    int baz;\n};\n\ntemplate&lt;uintptr_t addr&gt; class bar\n{\n    constexpr static const foo* f = (foo*)(addr);\npublic:\n    bar() {}\n    void update() {  }\n};\n\n#define FOO_ADDR ((uintptr_t)0x80103400)\n\nint main() {\n    bar&lt;FOO_ADDR&gt; myFoo;\n}\n</code></pre>\n\n<p>The obvious drawback is that there is no typechecking at the template parameter. You pass a value which will hopefully refer to <code>foo</code> object and not a different one.</p>\n\n<p>Not to mention that we are in the undefined behavior world as far as the standard goes....</p>\n\n<hr>\n\n<p>You seem to be able to compile with the line</p>\n\n<pre><code>constexpr static const foo* f = reinterpret_cast&lt;foo*&gt;(addr);\n</code></pre>\n\n<p>with at least some of the compilers as well (<a href=\"http://coliru.stacked-crooked.com/a/5af62bedecf2d75a\" rel=\"nofollow\">http://coliru.stacked-crooked.com/a/5af62bedecf2d75a</a>)</p>\n\n<hr>\n\n<p>If your compiler rejects casting in the context of <code>constexpr</code> as it is ill-formed (as per Barry's comment) you can define it as a regular <code>static const</code> variable:</p>\n\n<pre><code>template&lt;uintptr_t addr&gt;\nclass bar\n{\n    static const foo* f;\npublic:\n    bar() {}\n    void update() {  }\n};\n\ntemplate&lt;uintptr_t addr&gt;\nconst foo* bar&lt;addr&gt;::f = reinterpret_cast&lt;foo*&gt;(addr);\n</code></pre>\n\n<p>Less ideal but solves that problem hopefully.</p>\n"}, {"comments": [{"owner": {"reputation": 19146, "user_id": 635654, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b8fb58eef98caeec6ab3366e0ac986d7?s=128&d=identicon&r=PG", "display_name": "CygnusX1", "link": "https://stackoverflow.com/users/635654/cygnusx1"}, "edited": false, "score": 0, "creation_date": 1463586491, "post_id": 37304416, "comment_id": 62130685, "body": "You explain why it doesn&#39;t work, but provide no viable alternative solution."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1463586932, "post_id": 37304416, "comment_id": 62130994, "body": "@Barry, that proposed solution does not work for me in g++ 4.9.3. Perhaps it is valid in C++14."}, {"owner": {"reputation": 999, "user_id": 98328, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/XgbPP.jpg?s=128&g=1", "display_name": "Charlie Skilbeck", "link": "https://stackoverflow.com/users/98328/charlie-skilbeck"}, "edited": false, "score": 0, "creation_date": 1463587035, "post_id": 37304416, "comment_id": 62131047, "body": "Casting to/from ints does work, I was just hoping for something more elegant. Thanks all."}, {"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1463587052, "post_id": 37304416, "comment_id": 62131059, "body": "The original code compiles fine in Clang, fails in GCC. On the other hand, <code>constexpr foo* f = FOO_ADDR;</code> fails in Clang, compiles fine in GCC."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1463587191, "post_id": 37304416, "comment_id": 62131148, "body": "@Barry, I was testing with <code>template &lt;foo* f&gt; struct bar {};</code>."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1463587216, "post_id": 37304416, "comment_id": 62131162, "body": "@sleeptightpupper Original code fails in both. gcc is wrong for allowing initialization of <code>f</code> there."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1463587250, "post_id": 37304416, "comment_id": 62131189, "body": "@RSahu Sorry, was very unclear in what I meant by passing the address."}, {"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1463587377, "post_id": 37304416, "comment_id": 62131261, "body": "@Barry Doesn&#39;t seem to be the case for <a href=\"http://coliru.stacked-crooked.com/a/4b609c998e458b53\" rel=\"nofollow noreferrer\">Clang 3.8</a>"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1463588628, "post_id": 37304416, "comment_id": 62132116, "body": "@sleeptightpupper That&#39;s a <a href=\"http://stackoverflow.com/q/37305015/2069064\">bug in clang</a>."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 5, "last_activity_date": 1463587234, "last_edit_date": 1463587234, "creation_date": 1463586364, "answer_id": 37304416, "question_id": 37303968, "link": "https://stackoverflow.com/questions/37303968/using-an-absolute-pointer-address-as-a-template-argument/37304416#37304416", "title": "using an absolute pointer address as a template argument", "body": "<p>The declaration <code>bar&lt;(foo*)0x80103400&gt; myFoo;</code> is ill-formed because non-type template arguments must be a constant expression, from [temp.arg.nontype]:</p>\n\n<blockquote>\n  <p>A <em>template-argument</em> for a non-type <em>template-parameter</em> shall be a converted constant expression (5.20) of the type of the <em>template-parameter</em>.</p>\n</blockquote>\n\n<p>And the argument you are passing is not, from [expr.const]:</p>\n\n<blockquote>\n  <p>A conditional-expression e is a core constant expression unless the evaluation of e, following the rules of the\n  abstract machine (1.9), would evaluate one of the following expressions:<br>\n  \u2014 [...]<br>\n  \u2014 a <code>reinterpret_cast</code> (5.2.10);<br>\n  \u2014 [...]</p>\n</blockquote>\n\n<p>The declaration <code>bar&lt;(foo*)0&gt; huh</code> works since it does not involve a cast, it's simply a null pointer of type <code>foo*</code> (<code>0</code> is special) and so it is a valid constant expression. </p>\n\n<hr />\n\n<p>You could instead simply pass in the address as a template non-type parameter:</p>\n\n<pre><code>template &lt;uintptr_t address&gt;\nstruct bar { ... };\n\nbar&lt;0x8013400&gt; myFooWorks;\n</code></pre>\n\n<p>That is viable.</p>\n"}, {"comments": [{"owner": {"reputation": 19146, "user_id": 635654, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b8fb58eef98caeec6ab3366e0ac986d7?s=128&d=identicon&r=PG", "display_name": "CygnusX1", "link": "https://stackoverflow.com/users/635654/cygnusx1"}, "edited": false, "score": 0, "creation_date": 1463586968, "post_id": 37304430, "comment_id": 62131015, "body": "You explain why it doesn&#39;t work, but provide no viable alternative solution."}], "tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": false, "score": -2, "last_activity_date": 1463586410, "creation_date": 1463586410, "answer_id": 37304430, "question_id": 37303968, "link": "https://stackoverflow.com/questions/37303968/using-an-absolute-pointer-address-as-a-template-argument/37304430#37304430", "title": "using an absolute pointer address as a template argument", "body": "<p>First, don't use c-style casts. It doesn't make it explicit what is does.</p>\n\n<p>Second, you will realize that in order to cast an arbitrary number into a pointer, you need to use <code>reinterpret_cast</code>. This sort of cast is not allowed in constexpr expressions.</p>\n\n<p>Since template parameters are only possible with constant expressions, an arbitrary number as a pointer is not possible.</p>\n\n<p>The case where 0 is possible is because 0 is convertible to nullptr, which is constant expression.</p>\n"}, {"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1463586550, "post_id": 37304432, "comment_id": 62130730, "body": "For what it&#39;s worth, that section doesn&#39;t look like that anymore."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1463586718, "post_id": 37304432, "comment_id": 62130850, "body": "I see that it has changed a lot in C++14."}, {"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1463587247, "post_id": 37304432, "comment_id": 62131183, "body": "Reiterating my comment on other answer: &quot;The original code compiles fine in Clang, fails in GCC. On the other hand, constexpr foo* f = FOO_ADDR; fails in Clang, compiles fine in GCC.&quot; I would refrain from making absolute statements &quot;The compiler is able to detect that 0x80103400 is not the address of a variable&quot;."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1463587714, "post_id": 37304432, "comment_id": 62131488, "body": "@sleeptightpupper, that&#39;s the case for g++. It&#39;s unclear to me whether they are right in failing to compile that line of code."}, {"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1463587952, "post_id": 37304432, "comment_id": 62131657, "body": "@RSahu Considering the differing reasons between yours and Barry&#39;s answer and the inconsistent behavior in the two compilers I&#39;m hesitant to make exact claims. Either way, OP added real code to his question. I doubt that OP &quot;needs&quot; to pass around the address of a port to templates."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1463587548, "last_edit_date": 1592644375, "creation_date": 1463586410, "answer_id": 37304432, "question_id": 37303968, "link": "https://stackoverflow.com/questions/37303968/using-an-absolute-pointer-address-as-a-template-argument/37304432#37304432", "title": "using an absolute pointer address as a template argument", "body": "<p>From the C++11 Standard (emphasis mine):</p>\n<blockquote>\n<p><strong>14.3.2 Template non-type arguments</strong></p>\n<p>1 A <em>template-argument</em> for a non-type, non-template <em>template-parameter</em> shall be one of:</p>\n<p>\u2014 for a non-type <em>template-parameter</em> of integral or enumeration type, a converted constant expression (5.19) of the type of the <em>template-parameter</em>; or</p>\n<p>\u2014 the name of a non-type <em>template-parameter</em>; or</p>\n<p>\u2014 a constant expression (5.19) <strong>that designates the address of an object with static storage duration and external or internal linkage</strong> or a function with external or internal linkage, including function templates and function <em>template-ids</em> but excluding non-static class members, expressed (ignoring parentheses) as <code>&amp;</code> <em>id-expression</em>, except that the <code>&amp;</code> may be omitted if the name refers to a function or array and shall be omitted if the corresponding <em>template-parameter</em> is a reference; or</p>\n<p>\u2014 a constant expression that evaluates to a <strong>null pointer value</strong> (4.10); or</p>\n</blockquote>\n<p>When compiled with <code>g++ -Wall</code>, I get the following error:</p>\n<pre><code>error: \u20182148545536u\u2019 is not a valid template argument for \u2018foo*\u2019 because it is not the address of a variable\n    bar&lt;FOO_ADDR&gt; myFoo;        // fails with non-integral argument\n                       ^ \n</code></pre>\n<p>It seems that the compiler is able to detect that <code>0x80103400</code> is <em>not</em> the address of a variable, it's just a constant expression.</p>\n"}, {"comments": [{"owner": {"reputation": 999, "user_id": 98328, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/XgbPP.jpg?s=128&g=1", "display_name": "Charlie Skilbeck", "link": "https://stackoverflow.com/users/98328/charlie-skilbeck"}, "edited": false, "score": 0, "creation_date": 1531286612, "post_id": 51255197, "comment_id": 89533034, "body": "Nice. Sadly I don&#39;t have <code>constexpr</code> but I like it."}], "tags": [], "owner": {"reputation": 11138, "user_id": 1015327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d71e011fc61cad60c5ffc9bf48c5ef?s=128&d=identicon&r=PG", "display_name": "JimmyB", "link": "https://stackoverflow.com/users/1015327/jimmyb"}, "is_accepted": false, "score": 5, "last_activity_date": 1531303270, "last_edit_date": 1531303270, "creation_date": 1531178059, "answer_id": 51255197, "question_id": 37303968, "link": "https://stackoverflow.com/questions/37303968/using-an-absolute-pointer-address-as-a-template-argument/51255197#51255197", "title": "using an absolute pointer address as a template argument", "body": "<p>Facing the same problem (on an STM32), as a work-around I found function pointer template parameters, like so:</p>\n\n<pre><code>template&lt;GPIO_TypeDef* PORT(), uint32 BIT, uint32 RATE&gt;\nclass LedToggle\n{\n    public:\n\n    void Update()\n    {\n        // ...\n        PORT()-&gt;BSRR = mSetReset &amp; mask;\n        // ...\n    }\n};\n\nconstexpr GPIO_TypeDef* Port_C() {\n  return PORTC;\n}\n\nLedToggle&lt;Port_C, 13, 1023&gt; led;\n</code></pre>\n\n<p>Notice that we use a <em>function</em> pointer as template parameter, to a function that returns the desired actual pointer. Inside that function casts are allowed; and since the function is declared <code>constexpr</code> the compiler may (should) optimize away the actual function call and use the function's return value like a literal.</p>\n"}, {"comments": [{"owner": {"reputation": 999, "user_id": 98328, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/XgbPP.jpg?s=128&g=1", "display_name": "Charlie Skilbeck", "link": "https://stackoverflow.com/users/98328/charlie-skilbeck"}, "edited": false, "score": 0, "creation_date": 1576781346, "post_id": 59397770, "comment_id": 105018109, "body": "I like this although sadly the compiler (Keil ARM C/C++ Compiler version V5.06 update 1 (build 61)) doesn&#39;t support enum classes"}], "tags": [], "owner": {"reputation": 31, "user_id": 9086323, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6mrCB4nY7Qc/AAAAAAAAAAI/AAAAAAAAAZw/IaOH5pyQ91I/photo.jpg?sz=128", "display_name": "Dan Green", "link": "https://stackoverflow.com/users/9086323/dan-green"}, "is_accepted": false, "score": 2, "last_activity_date": 1576692118, "creation_date": 1576692118, "answer_id": 59397770, "question_id": 37303968, "link": "https://stackoverflow.com/questions/37303968/using-an-absolute-pointer-address-as-a-template-argument/59397770#59397770", "title": "using an absolute pointer address as a template argument", "body": "<p>Casting to/from ints works, but as pointed out, it's dangerous. Another solution similar to JimmyB's is to use enum classes instead of function pointers. The enum class member values are set to the device addresses as specified inthe vendor-supplied header. For instance, for the STM32 series, ST provides a header with the following defined:</p>\n\n<pre><code>// Vendor-supplied device header file (example)\n\n#define GPIOA_BASE = 0x40001000\n#define GPIOB_BASE = 0x40002000\n//    etc...\n</code></pre>\n\n<p>In your code, create an enum class:</p>\n\n<pre><code>#include &lt;vendor-supplied-device-header.h&gt;\n\nenum class GPIO : uint32_t {\n    A = GPIOA_BASE, \n    B = GPIOB_BASE, \n    C = GPIOC_BASE, \n    D = GPIOD_BASE, \n    E = GPIOE_BASE,\n    F = GPIOF_BASE,\n    G = GPIOG_BASE,\n    #ifdef GPIOH_BASE   //optional: wrap each member in an #ifdef to improve portability\n    H = GPIOH_BASE,\n    #endif\n    //.. etc\n};\n</code></pre>\n\n<p>To avoid multiple messy casts, just do it once in the class using a private method. For example then your LedToggle class would be written like this:</p>\n\n<pre><code>template&lt;GPIOPORT PORT, uint8_t PIN, uint32_t RATE&gt; class LedToggle\n{\n    static_assert(PIN &lt; 15, \"Only pin numbers 0 - 15 are valid\");\n\n    volatile auto GPIOPort(GPIOPORT PORT) {\n        return reinterpret_cast&lt;GPIO_TypeDef *&gt;(port_);\n    }\n\n    uint32_t mTicks;\n    uint32_t mSetReset;\n\n    public:\n\n    LedToggle()\n    {\n        mTicks = 0;\n        mSetReset = 1 &lt;&lt; PIN;\n    }\n\n    void Update()\n    {\n        uint32 mask = ((mTicks++ &amp; RATE) - 1) &gt;&gt; 31;\n        GPIOPort(PORT)-&gt;BSRR = mSetReset &amp; mask;\n        mSetReset ^= ((1 &lt;&lt; PIN) | (1 &lt;&lt; (PIN + 16))) &amp; mask;\n    }\n};\n\nLedToggle&lt;GPIO::C, 13, 1023&gt; led;\n</code></pre>\n\n<p>The benefit of this method is that the class users are forced to use only members of the GPIO enum class, therefore invalid addresses are prohibited.</p>\n\n<p>You can use enum classes for any of the template parameters, for instance you could replace the PIN parameter with an enum class whose members are set to the vendor's specified GPIO_PIN_1, GPIO_PIN_2, etc. Then you'd write:</p>\n\n<pre><code>LedToggle&lt;GPIO::C, Pin::_13, 1023&gt; \n</code></pre>\n"}], "owner": {"reputation": 999, "user_id": 98328, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/XgbPP.jpg?s=128&g=1", "display_name": "Charlie Skilbeck", "link": "https://stackoverflow.com/users/98328/charlie-skilbeck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2309, "favorite_count": 2, "accepted_answer_id": 37304416, "answer_count": 6, "score": 12, "last_activity_date": 1576692118, "creation_date": 1463585161, "last_edit_date": 1463587191, "question_id": 37303968, "link": "https://stackoverflow.com/questions/37303968/using-an-absolute-pointer-address-as-a-template-argument", "title": "using an absolute pointer address as a template argument", "body": "<p>I have a template class which takes as its first template argument a foo * pointer. I'd like to instantiate one of these with a foo located at an absolute address, like so:</p>\n\n<pre><code>class foo\n{\n    int baz;\n};\n\ntemplate&lt;foo *f&gt; class bar\n{\npublic:\n    bar() {}\n    void update() { /* ... */ }\n};\n\n// ....\n\n#define FOO_ADDR ((foo *)0x80103400)\n#define FOO_NULL ((foo *)0)\n\nfoo testFoo;\n\nbar&lt;FOO_ADDR&gt; myFoo;        // fails with non-integral argument\nbar&lt;FOO_NULL&gt; huh;          // compiles, I was surprised by this\nbar&lt;&amp;testFoo&gt; test;         // compiles as expected (but not useful)\n</code></pre>\n\n<p>Does anyone know if it's possible without resorting to the linker and getting FOO_ADDR to be defined with external linkage?</p>\n\n<p>This is with the Keil ARM C/C++ Compiler version V5.06 update 1 (build 61), I've tried switching on C++11 mode but (apart from throwing a load of new errors in the system headers) it didn't change the behaviour.</p>\n\n<p>Update: here's the proposed solution (with the real code this time) using int casts</p>\n\n<pre><code>template&lt;uint32 PORT, uint32 BIT, uint32 RATE&gt; class LedToggle\n{\n    uint32 mTicks;\n    uint32 mSetReset;\n\n    public:\n\n    LedToggle()\n    {\n        mTicks = 0;\n        mSetReset = 1 &lt;&lt; BIT;\n    }\n\n    void Update()\n    {\n        uint32 mask = ((mTicks++ &amp; RATE) - 1) &gt;&gt; 31;\n        ((GPIO_TypeDef *)PORT)-&gt;BSRR = mSetReset &amp; mask;\n        mSetReset ^= ((1 &lt;&lt; BIT) | (1 &lt;&lt; (BIT + 16))) &amp; mask;\n    }\n};\n\nLedToggle&lt;(uint32)GPIOC, 13, 1023&gt; led;\n</code></pre>\n\n<p>It's pretty ugly, but it does work. I'd be interested to hear if anyone can improve on it?</p>\n"}, {"tags": ["c++", "r", "makefile", "rcpp", "rinside"], "answers": [{"tags": [], "owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "is_accepted": false, "score": 1, "last_activity_date": 1463598384, "creation_date": 1463598384, "answer_id": 37308158, "question_id": 37303796, "link": "https://stackoverflow.com/questions/37303796/rinside-and-qtcreator/37308158#37308158", "title": "RInside and QtCreator", "body": "<p>Use via QtCreator is a little outside our supported specs.  </p>\n\n<p>I would suggest the following:</p>\n\n<ul>\n<li>Build the <em>existing and working</em> Qt example in <code>examples/qt</code> via <code>qmake; make</code></li>\n<li>Use it settings to tweak what you get from QtCreator</li>\n<li>If there is something you think you can generalise, consider submitting it as a pull request.</li>\n</ul>\n"}], "owner": {"reputation": 11, "user_id": 6351628, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-r9SZucb6nSE/AAAAAAAAAAI/AAAAAAAAAGw/rogBU59axSU/photo.jpg?sz=128", "display_name": "Patrick Augeau", "link": "https://stackoverflow.com/users/6351628/patrick-augeau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463598384, "creation_date": 1463584658, "question_id": 37303796, "link": "https://stackoverflow.com/questions/37303796/rinside-and-qtcreator", "title": "RInside and QtCreator", "body": "<p>I experience a problem with compiling a project written with QtCreator. The first thing is that the project works fine under OS X (were it was developped first), and doesn't compile under Linux (Mint). We first had to correct issues due to the fact that Linux is case sensitive while OS X isn't. </p>\n\n<p>Now, we get a problem we can't solve. </p>\n\n<p>We use the RInside API and it looks like a linking problem. Whatever we try, we get the followwing error :</p>\n\n<pre><code>/home/patrick/Taf/rthing/src/IHM/main.cpp:8: erreur : undefined reference to `RInside::RInside(int, char const* const*, bool, bool, bool)'\n</code></pre>\n\n<p>Here are some elements of the project. </p>\n\n<p>3 lines of the makefile, including calls to RInside : </p>\n\n<pre><code>CXXFLAGS      = -pipe -Wno-unused-parameter -I/usr/share/R/include -I/home/patrick/R/x86_64-pc-linux-gnu-library/3.0/Rcpp/include -I/home/patrick/R/x86_64-pc-linux-gnu-library/3.0/RInside/include -g -std=gnu++0x -Wall -W -D_REENTRANT -fPIC $(DEFINES)\nINCPATH       = -I../IHM -I. -I-I/home/patrick/R/x86_64-pc-linux-gnu-library/3.0/Rcpp/include -I-I/home/patrick/R/x86_64-pc-linux-gnu-library/3.0/RInside/include -I../../../../Qt/5.6/gcc_64/include -I../../../../Qt/5.6/gcc_64/include/QtSvg -I../../../../Qt/5.6/gcc_64/include/QtWidgets -I../../../../Qt/5.6/gcc_64/include/QtGui -I../../../../Qt/5.6/gcc_64/include/QtCore -I. -I../../../../Qt/5.6/gcc_64/mkspecs/linux-g++\nLFLAGS        = -L/usr/lib/R/lib -lR -lblas -llapack -L/home/patrick/R/x86_64-pc-linux-gnu-library/3.0/RInside/lib -lRInside -Wl,-rpath,/home/patrick/R/x86_64-pc-linux-gnu-library/3.0/RInside/lib -Wl,-z,origin -Wl,-rpath,\\$$ORIGIN -Wl,-rpath,/home/patrick/Qt/5.6/gcc_64/lib\n</code></pre>\n\n<p>Referring to those lines of the .pro file : </p>\n\n<pre><code>RINSIDEINCL =           $$system($$R_HOM/bin/Rscript -e \\'RInside:::CxxFlags\\(\\)\\')\nRINSIDELIBS =           $$system($$R_HOM/bin/Rscript -e \\'RInside:::LdFlags\\(\\)\\')\n\npatrick@petitchat:/usr/lib/R/bin$ Rscript -e 'Rcpp:::CxxFlags()'\n</code></pre>\n\n<p>gives :</p>\n\n<pre><code>-I/home/patrick/R/x86_64-pc-linux-gnu-library/3.0/Rcpp/include\n</code></pre>\n\n<p>and</p>\n\n<pre><code>Rscript -e 'Rcpp:::LdFlags()'\n</code></pre>\n\n<p>gives nothing (that's the case on the Mac too).</p>\n\n<p>If someone can help, I'm available to give some more information about the project. </p>\n"}, {"tags": ["c++", "class", "sfml"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 1, "creation_date": 1463584406, "post_id": 37303678, "comment_id": 62129200, "body": "Does your <code>CollisionSystem</code> include the Player class through an <code>#include</code>?"}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1463584407, "post_id": 37303678, "comment_id": 62129202, "body": "How did you declare <code>pSprite</code>? You&#39;ve posted incomplete code"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 3, "creation_date": 1463584488, "post_id": 37303678, "comment_id": 62129267, "body": "Please post a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>. It&#39;s better than describing the code in English."}, {"owner": {"reputation": 45, "user_id": 5923167, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-z-8x0kiT3J0/AAAAAAAAAAI/AAAAAAAAADc/1g2-wN0gFHQ/photo.jpg?sz=128", "display_name": "D4RKS0UL23", "link": "https://stackoverflow.com/users/5923167/d4rks0ul23"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1463584640, "post_id": 37303678, "comment_id": 62129366, "body": "@GillBates <code>CollisionSystem</code>and <code>Player</code>both include each other"}, {"owner": {"reputation": 45, "user_id": 5923167, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-z-8x0kiT3J0/AAAAAAAAAAI/AAAAAAAAADc/1g2-wN0gFHQ/photo.jpg?sz=128", "display_name": "D4RKS0UL23", "link": "https://stackoverflow.com/users/5923167/d4rks0ul23"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1463585207, "post_id": 37303678, "comment_id": 62129758, "body": "@Rakete1111 Thank you ^^ This solved my problem!"}], "owner": {"reputation": 45, "user_id": 5923167, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-z-8x0kiT3J0/AAAAAAAAAAI/AAAAAAAAADc/1g2-wN0gFHQ/photo.jpg?sz=128", "display_name": "D4RKS0UL23", "link": "https://stackoverflow.com/users/5923167/d4rks0ul23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "closed_date": 1463585509, "answer_count": 0, "score": 0, "last_activity_date": 1463584317, "creation_date": 1463584317, "question_id": 37303678, "link": "https://stackoverflow.com/questions/37303678/c-syntax-error-identifier", "closed_reason": "Duplicate", "title": "C++ - syntax error: identifier", "body": "<p>I created a class \"Player\". In this class I declare an object \"CollisionSystem\", whose constructor looks like this: </p>\n\n<pre><code>CollisionSystem(Player *player, std::list&lt;Rock*&gt; *lRock, std::list&lt;Water*&gt; *lWater);\n</code></pre>\n\n<p>I made a pointer <code>CollisionSystem *pSystem</code> and in player's constructor I said</p>\n\n<p><code>pSystem = new CollisionSystem(pSprite, pRock-&gt;getRocks(), pWater-&gt;getWater())</code></p>\n\n<p>It now says \"syntax error: identifier \"Player\". in the line, where I declare the constructor of CollisionSystem. Why does it say that (it says it 4 times, always for the same code line)</p>\n"}, {"tags": ["c++", "qt", "protocol-buffers"], "answers": [{"comments": [{"owner": {"reputation": 893, "user_id": 4884487, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/5K2bp.jpg?s=128&g=1", "display_name": "SebNag", "link": "https://stackoverflow.com/users/4884487/sebnag"}, "edited": false, "score": 0, "creation_date": 1463642240, "post_id": 37309171, "comment_id": 62152605, "body": "I actually tested <code>DebugString()</code> yesterday but did not have any output (empty string). However, today this just works perfectly fine..."}], "tags": [], "owner": {"reputation": 1018, "user_id": 4942917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d3a1b71b8aa7cb4ee8bdd533cb4c4a?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Cozzette", "link": "https://stackoverflow.com/users/4942917/adam-cozzette"}, "is_accepted": true, "score": 2, "last_activity_date": 1463602101, "creation_date": 1463602101, "answer_id": 37309171, "question_id": 37303512, "link": "https://stackoverflow.com/questions/37303512/fast-way-to-parse-and-print-a-google-protobuffer/37309171#37309171", "title": "Fast way to Parse and Print a Google Protobuffer", "body": "<p>If you just want to get a human-readable representation of the protocol buffer, you can call its <code>DebugString()</code> (or <code>ShortDebugString()</code>) method. You can read more about those methods in the <code>Message</code> class documentation <a href=\"https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.message#Message\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 893, "user_id": 4884487, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/5K2bp.jpg?s=128&g=1", "display_name": "SebNag", "link": "https://stackoverflow.com/users/4884487/sebnag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1082, "favorite_count": 0, "accepted_answer_id": 37309171, "answer_count": 1, "score": 0, "last_activity_date": 1463602101, "creation_date": 1463583897, "question_id": 37303512, "link": "https://stackoverflow.com/questions/37303512/fast-way-to-parse-and-print-a-google-protobuffer", "title": "Fast way to Parse and Print a Google Protobuffer", "body": "<p>I receive a <a href=\"https://developers.google.com/protocol-buffers/docs/reference/cpp/\" rel=\"nofollow\">Google Protobuffer</a> and save it in a <a href=\"http://doc.qt.io/qt-4.8/qbytearray.html\" rel=\"nofollow\">QByteArray</a>. \nNow I parse the received data into the respective protobuff with </p>\n\n<pre><code>::proto::dummy * protobuffer; \nQByteArray * ByteArray;\n\n//receive Data\n...\n\nprotobuffer-&gt;ParseFromArray(ByteArray-&gt;data(), ByteArray-&gt;size);\nif(protobuffer-&gt;has_XY) /* print it to Log */; \n</code></pre>\n\n<p>Since my protobuffer has several data fields I want to avoid enquirying every entry as showing in the approach above. Is there any fast way to print all of the information of the protobuffer?</p>\n"}, {"tags": ["c++", "multithreading", "boost", "mutex", "boost-mutex"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1463583900, "post_id": 37303342, "comment_id": 62128826, "body": "Not sure why you are puzzled. shared_mutex is always going to be slower than normal mutex, RW-lock is extra on top of normal lock. As an excercise, try implementing RW lock yourself."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1463583971, "post_id": 37303342, "comment_id": 62128892, "body": "Why are you getting the times in the threads?  Shouldn&#39;t you just just get the start time before the two loops in <code>read_test</code> and then get the end time after the last loop exits?"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1463584199, "post_id": 37303342, "comment_id": 62129043, "body": "@NathanOliver I want to make sure that the start time is recorded only after all threads are running, and I don&#39;t want to include time waiting for threads to start in that."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1463584288, "post_id": 37303342, "comment_id": 62129118, "body": "@SergeyA In this test I&#39;m not even using the W part of the lock. I&#39;m timing <b>only</b> the reads. If that&#39;s slower than every thread waiting its turn, what&#39;s the point of using a RW-lock at all?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1463584546, "post_id": 37303342, "comment_id": 62129310, "body": "@Max But you do not know when all the threads end then.  If you only get the start and stop from the first thread you may not be getting the correct results.  Since the thread creation and destruction should be a constant it should not hurt the result to include that in both test cases."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1463584867, "post_id": 37303342, "comment_id": 62129511, "body": "@NathanOliver The creation/destruction is not constant if I&#39;m comparing across different numbers of threads, which this test is also used for. Also the barriers around the start/end time ensure that the end time is only recorded once all threads have finished work."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1463587874, "post_id": 37303342, "comment_id": 62131605, "body": "Do you have writers at all?"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1463588617, "post_id": 37303342, "comment_id": 62132110, "body": "@MaximEgorushkin just check the repo. All writes occur before any reads and before the benchmark timer is started."}], "answers": [{"tags": [], "owner": {"reputation": 355, "user_id": 5626113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f52f9a936db5fcd6209c84215001f85?s=128&d=identicon&r=PG&f=1", "display_name": "user3104201", "link": "https://stackoverflow.com/users/5626113/user3104201"}, "is_accepted": false, "score": -3, "last_activity_date": 1463584387, "creation_date": 1463584387, "answer_id": 37303698, "question_id": 37303342, "link": "https://stackoverflow.com/questions/37303342/boostshared-mutex-slower-than-a-coarse-stdmutex-on-linux/37303698#37303698", "title": "boost::shared_mutex slower than a coarse std::mutex on Linux", "body": "<p>Few notes: </p>\n\n<ol>\n<li><p>If your data structure is suffering from high contention, using the same data structure with lock free implementation is highly recommend</p></li>\n<li><p>Reader-Writer locks usually bring performance boost when reads are common,but writes are rare. Philosophicly speaking, if the lock has to determine if other thread caught the lock in either with read mode or write mode, it is slower than simply wait for the lock to be released. So if reads are common and writes are rare,other threads are not being blocked .\nIf writes are common, not only the threads are blocked, but they have to perform extra logic to figure out how is locking what.</p></li>\n</ol>\n\n<p>So for summery, your examples use the lock in a bad way. And also, use lock free programing if performance concures you.</p>\n"}, {"tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": true, "score": 10, "last_activity_date": 1463592441, "creation_date": 1463592441, "answer_id": 37306432, "question_id": 37303342, "link": "https://stackoverflow.com/questions/37303342/boostshared-mutex-slower-than-a-coarse-stdmutex-on-linux/37306432#37306432", "title": "boost::shared_mutex slower than a coarse std::mutex on Linux", "body": "<p>It turns out that <code>boost::shared_mutex</code> is <a href=\"https://svn.boost.org/trac/boost/ticket/11798\" rel=\"noreferrer\">\"suboptimal\"</a> on Linux.</p>\n\n<blockquote>\n  <p>The current (as of boost 1.59) implementation of boost::shared_mutex for 'pthread' is pretty suboptimal as it's using a heavyweight mutex to guard the internal mutex state... [when access concurrency is high] the shared mutex is effectively exclusive.</p>\n</blockquote>\n\n<p>Hooray for boost and the many hours of my life it has stolen.</p>\n"}], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1879, "favorite_count": 1, "accepted_answer_id": 37306432, "answer_count": 2, "score": 5, "last_activity_date": 1463592441, "creation_date": 1463583522, "last_edit_date": 1463589724, "question_id": 37303342, "link": "https://stackoverflow.com/questions/37303342/boostshared-mutex-slower-than-a-coarse-stdmutex-on-linux", "title": "boost::shared_mutex slower than a coarse std::mutex on Linux", "body": "<p>I have a <code>std::unordered_map</code> which is subjected to a very read-heavy workload from multiple threads. I could use a <code>std::mutex</code> for synchronization, but since concurrent reads should be fine, I wanted to use a <code>boost::shared_mutex</code> instead. To test the performance improvement, I first pre-populate a map with a bunch of values and then have a bunch of threads run a <a href=\"https://github.com/silverhammermba/sanity/blob/master/read_test.h\" rel=\"noreferrer\">read test</a>:</p>\n\n<pre><code>for (int i = 0; i &lt; iters; ++i) map.count(random_uint(0, key_max));\n</code></pre>\n\n<p>I run this for my <a href=\"https://github.com/silverhammermba/sanity/blob/master/std_coarse.h\" rel=\"noreferrer\">coarse-lock implementation</a> where <code>count</code> is protected by <code>std::lock_guard&lt;std::mutex&gt;</code> and for my <a href=\"https://github.com/silverhammermba/sanity/blob/master/std_rwboost.h\" rel=\"noreferrer\">shared-lock implementation</a> where it is protected by <code>boost::shared_lock&lt;boost::shared_mutex&gt;</code>.</p>\n\n<p>On my Arch Linux x86_64 system with GCC 6.1.1 the <code>boost::shared_lock</code> version is <strong>always slower!</strong> On my friend's Windows 10 system with MSVC 2013, the <code>boost::shared_lock</code> is <strong>always faster!</strong>\nThe complete, compilable code is on github: <a href=\"https://github.com/silverhammermba/sanity\" rel=\"noreferrer\">https://github.com/silverhammermba/sanity</a></p>\n\n<h2>Edit</h2>\n\n<p>This seems to be a platform-specific issue. See above. I would really appreciate if anyone else could build and run this code and report whether they saw a positive output (<code>shared_lock</code> is faster) or negative (course mutex is faster) and what platform you're using.</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 3, "creation_date": 1463582852, "post_id": 37303003, "comment_id": 62127946, "body": "Perhaps <code>int Arr1[5];</code> should be <code>string Arr1[5];</code>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1463583127, "post_id": 37303003, "comment_id": 62128179, "body": "You can&#39;t index an array with a <code>std::string</code>. What you actually need for this is a <code>std::map&lt;std::string,int&gt;</code>."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1463583312, "post_id": 37303003, "comment_id": 62128335, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 - two arrays works just fine. Especially since that&#39;s what the assignment requires."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1463587750, "post_id": 37303003, "comment_id": 62131513, "body": "@PeteBecker I know well, I&#39;ve been referring to the indexing style."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4931649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LEPmO.jpg?s=128&g=1", "display_name": "Martyn", "link": "https://stackoverflow.com/users/4931649/martyn"}, "edited": false, "score": 0, "creation_date": 1463606516, "post_id": 37303222, "comment_id": 62141642, "body": "I fixed it without using the std, apparently you CAN add strings to arrays. Apparently nobody gave me the simple version of it so thanks for the effort tho."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 1, "user_id": 4931649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LEPmO.jpg?s=128&g=1", "display_name": "Martyn", "link": "https://stackoverflow.com/users/4931649/martyn"}, "edited": false, "score": 0, "creation_date": 1463606852, "post_id": 37303222, "comment_id": 62141790, "body": "@mar it is easy. We broke it up for you. For each step, look up on the internet and StackOverflow on how to do it. You will finish it yourself in less than an hour. You should not expect someone to give you the whole thing at once."}, {"owner": {"reputation": 1, "user_id": 4931649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LEPmO.jpg?s=128&g=1", "display_name": "Martyn", "link": "https://stackoverflow.com/users/4931649/martyn"}, "edited": false, "score": 0, "creation_date": 1463606989, "post_id": 37303222, "comment_id": 62141843, "body": "I have been searching but some were too advanced and notice that this is my first time programming, so I dont intend to use very advanced code in the upcoming finals (still in highschool). Although thanks for breaking it down and making it clear!"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 1, "user_id": 4931649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LEPmO.jpg?s=128&g=1", "display_name": "Martyn", "link": "https://stackoverflow.com/users/4931649/martyn"}, "edited": false, "score": 0, "creation_date": 1463607111, "post_id": 37303222, "comment_id": 62141899, "body": "@mar I added more details. Good luck"}], "tags": [], "owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "is_accepted": false, "score": 3, "last_activity_date": 1463607049, "last_edit_date": 1463607049, "creation_date": 1463583247, "answer_id": 37303222, "question_id": 37303003, "link": "https://stackoverflow.com/questions/37303003/how-to-add-a-string-to-array-in-a-simple-way-c/37303222#37303222", "title": "How to add a string to array in a simple way - C++", "body": "<p>I am not going to do your assignment for your. But I will fix your errors and help you approach your solution:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n   std::string Names[5]; // don't use \"namespace std\", use std:: instead\n   int Salaries[5]; // use proper variable names\n\n   for (int i = 0; i &lt; 5; i++) \n   {\n       std::cin &gt;&gt; Names[i] &gt;&gt; Salaries[i];\n   }\n\n   /* \n   Breaking down the steps:\n   1 - now you have the data, structured and ready\n       Names and Salaries // Done\n   2 - start from here // Next do this\n       find max salary // Search on how to find the max value in an array and save its index\n       ....\n   3 - find the employee // later\n       // use the saved index and get the value from this array\n       ....\n   4 - display or save or what is required // later, std::cout\n   */\n\n   return 0;\n}\n</code></pre>\n\n<p>What you need to think of:</p>\n\n<p>Find maximum in <code>Salaries[]</code> and save the <em><code>INDEX</code></em> of what you find, then go to <code>Names[]</code> and get whatever <code>Names[]</code> has a value in that <em><code>INDEX</code></em>.</p>\n"}], "owner": {"reputation": 1, "user_id": 4931649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LEPmO.jpg?s=128&g=1", "display_name": "Martyn", "link": "https://stackoverflow.com/users/4931649/martyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "closed_date": 1463589230, "answer_count": 1, "score": -8, "last_activity_date": 1463607049, "creation_date": 1463582691, "question_id": 37303003, "link": "https://stackoverflow.com/questions/37303003/how-to-add-a-string-to-array-in-a-simple-way-c", "closed_reason": "Needs details or clarity", "title": "How to add a string to array in a simple way - C++", "body": "<p>So I have this problem my teacher gave me which is: Enter the names and salaries of 5 employees into two arrays and print the name of the employee who has the highest salary.</p>\n\n<p>Im not sure how to input a string to an array and link it to the other array, this is what I wrote:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\n\nint main()\n{\nint salary, x, y;\nstring name;\nint Arr1[5];\nint Arr2[5];\nx = 0;\ny = 0;\nfor (int i = 0; i &lt;= 5; i++) {\n    cin &gt;&gt; Arr1[name];\n    cin &gt;&gt; Arr2[x];\n    if (x &gt; y) {\n        x = y;\n    }\n}\ncout &lt;&lt; \"Employee\" &lt;&lt; Arr1[name]&lt;&lt; \"has the biggest salary of:\" &lt;&lt; y &lt;&lt; endl;\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "windows", "powershell"], "comments": [{"owner": {"reputation": 103396, "user_id": 712649, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tP0yV.jpg?s=128&g=1", "display_name": "Mathias R. Jessen", "link": "https://stackoverflow.com/users/712649/mathias-r-jessen"}, "edited": false, "score": 0, "creation_date": 1463583591, "post_id": 37302976, "comment_id": 62128576, "body": "What exactly is the script doing?"}, {"owner": {"reputation": 55713, "user_id": 26095, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WLsjF.jpg?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/26095/sean"}, "edited": false, "score": 0, "creation_date": 1463583772, "post_id": 37302976, "comment_id": 62128731, "body": "Win32S was a set of libraries that allowed some 32bit applications to run on 16 bit Windows 3.1. This won&#39;t be the cause of the problem."}, {"owner": {"reputation": 163, "user_id": 2334917, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bee0cddbe169ea18964e7e28b361f4c?s=128&d=identicon&r=PG", "display_name": "Aeron", "link": "https://stackoverflow.com/users/2334917/aeron"}, "reply_to_user": {"reputation": 55713, "user_id": 26095, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WLsjF.jpg?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/26095/sean"}, "edited": false, "score": 1, "creation_date": 1463647477, "post_id": 37302976, "comment_id": 62156038, "body": "@Sean : indeed, but this is the only article from Microsoft about this problem, so that&#39;s my only idea for now :("}, {"owner": {"reputation": 163, "user_id": 2334917, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bee0cddbe169ea18964e7e28b361f4c?s=128&d=identicon&r=PG", "display_name": "Aeron", "link": "https://stackoverflow.com/users/2334917/aeron"}, "reply_to_user": {"reputation": 103396, "user_id": 712649, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tP0yV.jpg?s=128&g=1", "display_name": "Mathias R. Jessen", "link": "https://stackoverflow.com/users/712649/mathias-r-jessen"}, "edited": false, "score": 0, "creation_date": 1463648387, "post_id": 37302976, "comment_id": 62156662, "body": "@MathiasR.Jessen : I added a line of code that produced the problem."}], "owner": {"reputation": 163, "user_id": 2334917, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bee0cddbe169ea18964e7e28b361f4c?s=128&d=identicon&r=PG", "display_name": "Aeron", "link": "https://stackoverflow.com/users/2334917/aeron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 304, "favorite_count": 0, "closed_date": 1463616655, "answer_count": 0, "score": 2, "last_activity_date": 1463648572, "creation_date": 1463582620, "last_edit_date": 1463648572, "question_id": 37302976, "link": "https://stackoverflow.com/questions/37302976/powershell-error-r6016", "closed_reason": "Not suitable for this site", "title": "PowerShell error R6016", "body": "<p>I'm currently creating a powershell script dedicated to install some softs for my job.</p>\n\n<p>The script will call a cmd that calls a ps1 that will install (or uninstall) the software.</p>\n\n<p>However, on some of the computers that uses my script, it gets the following error :</p>\n\n<pre><code>Microsoft Visual C++ Runtime Library\nRuntime Error!\n\nProgram: C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\powershell.exe\n\nR6016\n- not enough space for thread data\n</code></pre>\n\n<p>Looking for this error on the internet, I found the following link :</p>\n\n<p><a href=\"https://support.microsoft.com/en-us/kb/126709\" rel=\"nofollow\">https://support.microsoft.com/en-us/kb/126709</a></p>\n\n<p>It says :</p>\n\n<blockquote>\n  <p>Spawning and closing an application repeatedly succeeds around 60\n  times, then the spawn fails with this error: R6016 - not enough space\n  for thread data</p>\n</blockquote>\n\n<p>Indeed, sometimes when I try to make around 60 install / uninstall using my script, I get this error.</p>\n\n<p>But I don't understand how I could apply the resolution : what is Win32s ? How could I free the \"TLS\" ?</p>\n\n<p>Is there something I should do when I spawn or exit a PowerShell ? Is it because a cmd is always calling a ps1 ?</p>\n\n<blockquote>\n  <p>EDIT :</p>\n</blockquote>\n\n<p>I finally found how to generate the error with a simple line of code from a cmd :</p>\n\n<p><code>powershell -noprofile -command \"[Environment]::Exit($host.version.major)\"</code></p>\n\n<p>This should give me with an \"echo %errorlevel%\" the major version of PowerShell (usually 3,4,5) and sometimes, it gives me \"255\" and this event \"R6016\" inserted in the event viewer System.</p>\n\n<p>Thank you to anyone who can help me solve this problem.</p>\n"}, {"tags": ["c++", "windows", "mfc"], "answers": [{"comments": [{"owner": {"reputation": 637, "user_id": 2857792, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/DAZRf.jpg?s=128&g=1", "display_name": "Mangs", "link": "https://stackoverflow.com/users/2857792/mangs"}, "edited": false, "score": 0, "creation_date": 1463641938, "post_id": 37303894, "comment_id": 62152405, "body": "Thank you for the response, this helps a lot. But since I use <code>BS_MULTILINE</code> I haven&#39;t tried the first part. But when I run the second part of the answer I do get different result on <code>ht</code>. However, <code>sz.cx</code> is 13 in both cases. Am I missing something?"}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "reply_to_user": {"reputation": 637, "user_id": 2857792, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/DAZRf.jpg?s=128&g=1", "display_name": "Mangs", "link": "https://stackoverflow.com/users/2857792/mangs"}, "edited": false, "score": 0, "creation_date": 1463642280, "post_id": 37303894, "comment_id": 62152638, "body": "With the image on the left, it looks like theme is endabled; therefore <code>ht</code> is valid and <code>sz.cx</code> will be 13. With the image on the right, it looks like theme is not enabled; therefore <code>ht</code> is <code>NULL</code> and <code>sz.cx</code> will be 15."}, {"owner": {"reputation": 637, "user_id": 2857792, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/DAZRf.jpg?s=128&g=1", "display_name": "Mangs", "link": "https://stackoverflow.com/users/2857792/mangs"}, "edited": false, "score": 0, "creation_date": 1463643391, "post_id": 37303894, "comment_id": 62153358, "body": "You&#39;re right about <code>ht</code>, valid and <code>NULL</code>, however <code>sz.cx</code> is 13 whether it&#39;s valid or not. But you&#39;ve helped a lot and I can move on from here. I really appreciate it, thank you!"}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "reply_to_user": {"reputation": 637, "user_id": 2857792, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/DAZRf.jpg?s=128&g=1", "display_name": "Mangs", "link": "https://stackoverflow.com/users/2857792/mangs"}, "edited": false, "score": 0, "creation_date": 1463645947, "post_id": 37303894, "comment_id": 62154975, "body": "I am on Windows 10, in which theme is always active, so <code>sz.cx</code> is always 13 (I think Windows 8 is the same). On Windows XP/Vista/7, if theme is not active, <code>ht</code> will be <code>NULL</code> and <code>sz.cx</code> will be 13."}], "tags": [], "owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "is_accepted": true, "score": 2, "last_activity_date": 1463603174, "last_edit_date": 1463603174, "creation_date": 1463584955, "answer_id": 37303894, "question_id": 37302896, "link": "https://stackoverflow.com/questions/37302896/different-result-on-laptop-and-stationary-computer/37303894#37303894", "title": "Different result on laptop and stationary computer", "body": "<p>If target window is Vista or higher, use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb775961%28v=vs.85%29.aspx\" rel=\"nofollow\">BCM_GETIDEALSIZE</a> to find the minimum size. But check box cannot have multi-line flag (<code>BS_MULTILINE</code>). For example</p>\n\n<pre><code>m_checkBox.SetWindowText(L\"long text xxx xxx xxx xxx xxx xxx\");\nSIZE sz;\nif (Button_GetIdealSize(m_checkBox.m_hWnd, &amp;sz) &amp;&amp; sz.cx &gt; 0 &amp;&amp; sz.cy &gt; 0)\n{\n    m_checkBox.SetWindowPos(0, 0, 0, sz.cx, sz.cy, SWP_NOZORDER|SWP_NOMOVE);\n}\nelse\n{\n    //use another method ...\n}\n</code></pre>\n\n<p>Otherwise, modify your code and instead of supplying <code>18</code> pixels for checkbox width, use \n<code>GetSystemMetrics</code> to find the check box width (this results in 15 pixels in default DPI, so you have to add few more pixels for text padding). </p>\n\n<p>Use <code>GetThemePartSize</code> if theme is active. For example:</p>\n\n<pre><code>CClientDC dc(this);\nSIZE sz;\nHTHEME ht = OpenThemeData(m_hWnd, L\"Button\");\nif (ht)\n{\n    GetThemePartSize(ht, dc, BP_CHECKBOX, CBS_CHECKEDNORMAL, NULL, TS_TRUE, &amp;sz);\n    CloseThemeData(ht);\n    //sz.cx is 13 pixels in default DPI\n}\nelse\n{\n    sz.cx = GetSystemMetrics(SM_CXMENUCHECK);\n    //sz.cx is 15 pixels in default DPI\n}\n</code></pre>\n\n<p>Screen resolution is not relevant here. The posted images suggest that both displays have the same DPI settings. Note that if DPI settings changes, and your application is <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dn469266%28v=vs.85%29.aspx\" rel=\"nofollow\">DPI aware</a> then <code>sz.cx</code> will be different.</p>\n"}], "owner": {"reputation": 637, "user_id": 2857792, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/DAZRf.jpg?s=128&g=1", "display_name": "Mangs", "link": "https://stackoverflow.com/users/2857792/mangs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 37303894, "answer_count": 1, "score": 2, "last_activity_date": 1463603174, "creation_date": 1463582459, "last_edit_date": 1463583380, "question_id": 37302896, "link": "https://stackoverflow.com/questions/37302896/different-result-on-laptop-and-stationary-computer", "title": "Different result on laptop and stationary computer", "body": "<p>The code below calculates the size of a the rect holding the text to a checkbox. Code works fine when i'm using a stationary computer with monitors with different screen resolution. But when I run the exact same code on a laptop with an external monitor connected the box is too small. Laptop screen res is 1680x1050 and the monitor is 1920x1080.</p>\n\n<p>pclRect has the same values no matter which computer I run it on.</p>\n\n<p>Anybody's got an idea how to solve this?</p>\n\n<p>Results:</p>\n\n<p><a href=\"https://i.stack.imgur.com/P5eal.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/P5eal.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/aTN04.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aTN04.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>void CForm::SetSize(CWnd *pCWnd, CRect *pclRect)\n{       \n    CDC *pclDC = m_pclPanel-&gt;GetDC();\n\n    CFont* font = pCWnd-&gt;GetFont();\n    LOGFONT logFont;\n    font-&gt;GetLogFont(&amp;logFont);\n\n    CString str;\n    pCWnd-&gt;GetWindowText(str);//Get controller text\n\n    CClientDC dc(pCWnd);\n    dc.SelectObject(font);\n\n    int iWidth;\n    int iHeight;\n\n    long lFontSize = -MulDiv(logFont.lfHeight, GetDeviceCaps(pclDC-&gt;m_hDC, LOGPIXELSY), 72);\n\n    iWidth = dc.GetTextExtent(str).cx; //Get controller text length\n    iWidth += GetExtraWidth(); //This adds 18 to the width since it's the width of the checkbox itself\n    iHeight = abs(lFontSize) + GetExtraHeight();\n\n    pclRect-&gt;bottom = pclRect-&gt;top + iHeight;\n    pclRect-&gt;right = pclRect-&gt;left + iWidth;\n\n    pCWnd-&gt;MoveWindow(pclRect);\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "qt", "visual-c++", "visual-studio-2015"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1463582624, "post_id": 37302704, "comment_id": 62127755, "body": "Dependency Walker hasn&#39;t been updated in <b>years</b>. It doesn&#39;t understand the Universal CRT at all, and will give false positives as well as false negatives. Don&#39;t use it. To get reliable diagnostics, enable the <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff556886.aspx\" rel=\"nofollow noreferrer\">show loader snaps</a> flag using <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff549557.aspx\" rel=\"nofollow noreferrer\">GFlags</a>."}, {"owner": {"reputation": 497, "user_id": 1006821, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/395e13a5f57eb8cc2d05a05619dd62b1?s=128&d=identicon&r=PG", "display_name": "Vivian Lobo", "link": "https://stackoverflow.com/users/1006821/vivian-lobo"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1463582683, "post_id": 37302704, "comment_id": 62127798, "body": "Fair enough, but strangely after I installed VC++ 2013 it sorted the problem."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1463582698, "post_id": 37302704, "comment_id": 62127810, "body": "<b><i>Why do I need VC++ 2012 and 2013 when I now use only Visual Studio 2015?</i></b> Did you rebuild all of your dependent libraries / dlls with Visual Studio 2015 (including Qt)?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1463582768, "post_id": 37302704, "comment_id": 62127876, "body": "<b><i>I installed VC++ 2013 it sorted the problem</i></b> I say this will cause UB. It is not generally safe to mix and match different versions of Visual Studio in the same application because of different implementations of the standard library and having more than 1 CRT."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1463582919, "post_id": 37302704, "comment_id": 62128011, "body": "I have answered a similar question here: <a href=\"http://stackoverflow.com/a/19860574/487892\">stackoverflow.com/a/19860574/487892</a>"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1463582950, "post_id": 37302704, "comment_id": 62128038, "body": "@drescherjm: That depends on the DLL interfaces.  It&#39;s entirely possible to have DLLs built with multiple runtime versions all load in the same process and work correctly, as long as usage of the runtime is internal to each DLL and the exports are pure &quot;C&quot; style.  (Of course, the wrinkle is Qt, since it isn&#39;t pure C style)"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1463583001, "post_id": 37302704, "comment_id": 62128084, "body": "Fully agreed. The dlls would have to isolate themselves for this to be safe."}, {"owner": {"reputation": 497, "user_id": 1006821, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/395e13a5f57eb8cc2d05a05619dd62b1?s=128&d=identicon&r=PG", "display_name": "Vivian Lobo", "link": "https://stackoverflow.com/users/1006821/vivian-lobo"}, "edited": false, "score": 0, "creation_date": 1463583039, "post_id": 37302704, "comment_id": 62128115, "body": "Yes, I use only KDSoap and QT and I built KDSoap using VS2015 itself. Downloaded the msvc2015 version of QT from the official site."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1463584277, "post_id": 37302704, "comment_id": 62129112, "body": "<b><i>I built KDSoap using VS2015 itself</i></b> I would go back and verify that you used the correct CMake generator when generating the Visual Studio project. If this was the same folder as a previous build I would do a totally clean build by wiping out the build folder and reconfiguring."}, {"owner": {"reputation": 497, "user_id": 1006821, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/395e13a5f57eb8cc2d05a05619dd62b1?s=128&d=identicon&r=PG", "display_name": "Vivian Lobo", "link": "https://stackoverflow.com/users/1006821/vivian-lobo"}, "edited": false, "score": 0, "creation_date": 1463584398, "post_id": 37302704, "comment_id": 62129191, "body": "Thank you for the replies, I am guessing the best thing to do is go back and rebuild using a clean env with VS2015 and then it will be clean of the older redist rubbish."}], "answers": [{"tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": false, "score": 2, "last_activity_date": 1463582880, "creation_date": 1463582880, "answer_id": 37303089, "question_id": 37302704, "link": "https://stackoverflow.com/questions/37302704/vc-redistributable-2012-or-2013-or-2015/37303089#37303089", "title": "VC++ Redistributable 2012 or 2013 or 2015?", "body": "<ol>\n<li><p>You are using DLLs linked to the older runtime.  You can use Dependency Walker on your development machine to track this down, shouldn't need to install any tools on a customer machine for that.</p></li>\n<li><p>Migrate all the files shipped with your application to a version built against VC++ 2015.</p></li>\n<li><p>You didn't provide any details that could reveal the reason.</p></li>\n<li><p>For DLLs other than the language runtime library, you can use delay-loading and then be able to trap failure to load the library.  You can't effectively delay-load msvcr*.dll though.  One option would be to create a very thin EXE that uses no support DLL at all (either use pure Win32 API, or statically link the runtime) which does nothing except install an error handler and then load your main program which is now in the form of a DLL.  Loading your main program DLL should be done either using delay-load linking or <code>LoadLibrary()</code>+<code>GetProcAddress()</code> -- either one will allow catching errors.  This main program DLL would be free to import the runtime DLLs as usual.</p></li>\n</ol>\n"}], "owner": {"reputation": 497, "user_id": 1006821, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/395e13a5f57eb8cc2d05a05619dd62b1?s=128&d=identicon&r=PG", "display_name": "Vivian Lobo", "link": "https://stackoverflow.com/users/1006821/vivian-lobo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 580, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463582880, "creation_date": 1463582011, "question_id": 37302704, "link": "https://stackoverflow.com/questions/37302704/vc-redistributable-2012-or-2013-or-2015", "title": "VC++ Redistributable 2012 or 2013 or 2015?", "body": "<p>I have an application written in QT. Previously I was using Visual Studio 2012 and Qt 5.3.1 after which I recently upgraded to Visual Studio 2015 and QT 5.6. I would previously provide msvcp110 and msvcr110 as part of the installation (I know that wasn't the best practice but I got away with it). </p>\n\n<p>After upgrading I had to now install VC++ 2015 because of the changes with VS 2015. I don't mind the changes and currently providing redist packages to be installed. </p>\n\n<p>The problem I am facing is that, I do have to provide VC++ 2012 as well and recently running the software in Windows 8.1 Pro, I was asked to provide VC++ 2013 as well (never used VS2013 for compiling). The diagnosis was from dependency walker and google. Not only that, I had to install x86 and x64 of all the 3 versions of VC++ for the software to start (wouldn't even start to be honest). </p>\n\n<ol>\n<li>Why do I need VC++ 2012 and 2013 when I now use only Visual Studio 2015?</li>\n<li>How do I get rid of the other redist packages? Is it some code I have written which is dependent? If yes any chance I can find out?</li>\n<li>Why do I need to provide both the 32 and 64 bit versions when I compile strictly in the 64 bit compiler?</li>\n<li>Any way to diagnose without dependency walker? Can there be some logging when the application refuses to start at all?</li>\n</ol>\n\n<p>Apologies for the long post, but any light here can restore my sanity. </p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "strict-aliasing"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1463582102, "post_id": 37302691, "comment_id": 62127345, "body": "The other way around is not allowed."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1496963103, "post_id": 37302691, "comment_id": 75891121, "body": "All of these are UB (not sure what you meant by &quot;obviously correct&quot;)"}], "answers": [{"comments": [{"owner": {"reputation": 322, "user_id": 6049796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/84a091eb4e10af942d3de4432607a319?s=128&d=identicon&r=PG&f=1", "display_name": "Euri Pinhollow", "link": "https://stackoverflow.com/users/6049796/euri-pinhollow"}, "edited": false, "score": 1, "creation_date": 1512153252, "post_id": 37302929, "comment_id": 82157318, "body": "Bringing some terms and quotes would be nice."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 1, "last_activity_date": 1463582519, "creation_date": 1463582519, "answer_id": 37302929, "question_id": 37302691, "link": "https://stackoverflow.com/questions/37302691/what-are-the-strict-aliasing-rules-when-casting-from-a-char-array/37302929#37302929", "title": "What are the strict aliasing rules when casting *from* a char array?", "body": "<p>First of all, absence of warning is not a guarantee of correctness! gcc is getting better and better at spotting problematic code, but it is still not a static analyzing tool (and those are not perfect either!)</p>\n\n<p>Second of all, yes, you are not allowed to access char array through a pointer to other type. </p>\n"}], "owner": {"reputation": 1253, "user_id": 697683, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6065c081ec0bdeb9b6fe803054c3afbf?s=128&d=identicon&r=PG", "display_name": "user697683", "link": "https://stackoverflow.com/users/697683/user697683"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 461, "favorite_count": 1, "answer_count": 1, "score": 6, "last_activity_date": 1463584010, "creation_date": 1463581971, "question_id": 37302691, "link": "https://stackoverflow.com/questions/37302691/what-are-the-strict-aliasing-rules-when-casting-from-a-char-array", "title": "What are the strict aliasing rules when casting *from* a char array?", "body": "<p>I'm confused by the strict aliasing rules when it comes to casting a char array to other types. I know that it is permitted to cast any object <em>to</em> a char array, but I'm not sure what happens the other way around.</p>\n\n<p>Take a look at this:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\nusing namespace std;\n\nstruct{\n    alignas (int) char buf[sizeof(int)]; //correct?\n} buf1;\n\nalignas(int) char buf2[sizeof(int)]; //incorrect?\n\nstruct{\n    float f; //obviously incorrect\n} buf3;\n\ntypename std::aligned_storage&lt;sizeof(int), alignof(int)&gt;::type buf4; //obviously correct\n\nint main()\n{\n    reinterpret_cast&lt;int&amp;&gt;(buf1) = 1;\n    *reinterpret_cast&lt;int*&gt;(buf2) = 1;\n    reinterpret_cast&lt;int&amp;&gt;(buf3) = 1;\n    reinterpret_cast&lt;int&amp;&gt;(buf4) = 1;\n}\n</code></pre>\n\n<p>Compiling using g++-5.3.0 results in warnings only on the second and third line of main:</p>\n\n<pre><code>$ g++ -fsyntax-only -O3 -std=c++14 -Wall main.cpp \nmain.cpp: In function \u2018int main()\u2019:\nmain.cpp:25:30: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing]\n  *reinterpret_cast&lt;int*&gt;(buf2) = 1;\n                              ^\nmain.cpp:26:29: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing]\n  reinterpret_cast&lt;int&amp;&gt;(buf3) = 1;\n                             ^\n</code></pre>\n\n<p>Is gcc correct in that lines 1 and 4 are correct, while lines 2 and 3 are not? I'm fairly sure line 4 is correct (that's what <code>aligned_storage</code> is for), but what are the rules at play here?</p>\n"}, {"tags": ["c++", "class", "alignment", "eigen"], "owner": {"reputation": 332, "user_id": 5633841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KYJOv.jpg?s=128&g=1", "display_name": "Dino", "link": "https://stackoverflow.com/users/5633841/dino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 627, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1463645750, "creation_date": 1463581968, "last_edit_date": 1463645750, "question_id": 37302685, "link": "https://stackoverflow.com/questions/37302685/eigen-alignment-in-nested-classes", "title": "Eigen alignment in nested classes", "body": "<p>I try to run a program that uses Eigen (3.2.92) compiled with GCC 6.1.1. However, on startup it crashes due to an alignment issue:</p>\n\n<pre><code>#3  0x00007ffff4669c82 in __GI___assert_fail (assertion=0x7ffff74319b8 \"(reinterpret_cast&lt;size_t&gt;(eigen_unaligned_array_assert_workaround_gcc47(array)) &amp; (31)) == 0 &amp;&amp; \\\"this assertion is explained here: \\\" \\\"http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAss\"..., file=0x7ffff7431688 \"/usr/include/eigen3/Eigen/src/Core/DenseStorage.h\", line=128, function=0x7ffff74340a0 &lt;Eigen::internal::plain_array&lt;double, 4, 0, 32&gt;::plain_array()::__PRETTY_FUNCTION__&gt; \"Eigen::internal::plain_array&lt;T, Size, MatrixOrArrayOptions, 32&gt;::plain_array() [with T = double; int Size = 4; int MatrixOrArrayOptions = 0]\") at assert.c:101\n#4  0x00007ffff7399821 in Eigen::internal::plain_array&lt;double, 4, 0, 32&gt;::plain_array (this=0x89ed70) at /usr/include/eigen3/Eigen/src/Core/DenseStorage.h:128\n#5  0x00007ffff739861e in Eigen::DenseStorage&lt;double, 4, 2, 2, 0&gt;::DenseStorage (this=0x89ed70) at /usr/include/eigen3/Eigen/src/Core/DenseStorage.h:187\n#6  0x00007ffff73a7d37 in Eigen::PlainObjectBase&lt;Eigen::Matrix&lt;double, 2, 2, 0, 2, 2&gt; &gt;::PlainObjectBase (this=0x89ed70) at /usr/include/eigen3/Eigen/src/Core/PlainObjectBase.h:457\n#7  0x00007ffff73b3720 in Eigen::Matrix&lt;double, 2, 2, 0, 2, 2&gt;::Matrix (this=0x89ed70) at /usr/include/eigen3/Eigen/src/Core/Matrix.h:259\n#8  0x00007ffff73b35a5 in svo::Matcher::Matcher (this=0x89ec90) at /home/user/ros2/catkin_ws/src/rpg_svo/svo/include/svo/matcher.h:106\n#9  0x00007ffff73b1b33 in svo::Reprojector::Reprojector (this=0x89ec30, cam=0x884820, map=...) at /home/user/ros2/catkin_ws/src/rpg_svo/svo/src/reprojector.cpp:34\n#10 0x00007ffff72e0e62 in svo::FrameHandlerMono::FrameHandlerMono (this=0x89eb10, cam=0x884820) at /home/user/ros2/catkin_ws/src/rpg_svo/svo/src/frame_handler_mono.cpp:37\n#11 0x000000000040f70a in svo::VoNode::VoNode() ()\n#12 0x000000000040bf05 in main ()\n</code></pre>\n\n<p>These are the relevant code parts:</p>\n\n<pre><code>class Matcher {\npublic:\n  EIGEN_MAKE_ALIGNED_OPERATOR_NEW\n  Matrix2d A_cur_ref_;\n  Matcher() = default;   // &lt;--- matcher.h:106\n};\n\nclass Reprojector {\npublic:\n  EIGEN_MAKE_ALIGNED_OPERATOR_NEW\n  Reprojector(...)   // &lt;--- reprojector.cpp:34\n  {...}\nprivate:\n  Matcher matcher_;\n};\n\nclass FrameHandlerMono : public FrameHandlerBase {\npublic:\n  EIGEN_MAKE_ALIGNED_OPERATOR_NEW\n  FrameHandlerMono(...) :\n    reprojector_(...)   // &lt;--- frame_handler_mono.cpp:37\n  {...}\nprotected:\n  Reprojector reprojector_;\n};\n\nclass VoNode\n{\npublic:\n  svo::FrameHandlerMono* vo_;\n  VoNode() {\n    vo_ = new svo::FrameHandlerMono(...);\n  }\n};\n\nint main() {\n  svo::VoNode vo_node;\n  return 0;\n}\n</code></pre>\n\n<p>The comments mark the lines where gdb reported the error.</p>\n\n<p>I had a look at the <a href=\"http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html\" rel=\"nofollow\">mentioned website</a>, but I think the EIGEN_MAKE_ALIGNED_OPERATOR_NEW macro is involved where required. In addition, I added the macro also to the VoNode class, but that did not fix the error.</p>\n\n<p><strong>Update</strong></p>\n\n<p>I compiled the program on a similar machine using GCC 4.8.4 and Eigen 3.2.0 and everything worked just fine. Does the newer GCC (or C++14 as the new default) handle alignment different than the old one?</p>\n\n<p><strong>Update 2</strong></p>\n\n<p>I just figured out that Eigen 3.2.92 actually is Eigen 3.3-beta incorporating some <a href=\"http://eigen.tuxfamily.org/index.php?title=3.3\" rel=\"nofollow\">changes</a>. Using Eigen 3.2.8 I have been able to compile and run the software successfully. However, I still have no idea why 3.3 causes those alignment errors.</p>\n"}, {"tags": ["c++", "c++11", "vector", "c++14", "reference-wrapper"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 9, "creation_date": 1463582074, "post_id": 37302678, "comment_id": 62127325, "body": "<code>reserve()</code> doesn&#39;t create objects.  What if you did <code>resize()</code> instead?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 3, "creation_date": 1463583080, "post_id": 37302678, "comment_id": 62128137, "body": "Almost none of the what you wrote in your question has anything to do with your question..."}, {"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1463587405, "post_id": 37302678, "comment_id": 62131282, "body": "@Barry feel free to edit then..."}, {"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1463587682, "post_id": 37302678, "comment_id": 62131460, "body": "@Barry or propose improvements..."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1463587780, "post_id": 37302678, "comment_id": 62131531, "body": "@101010 Reduced. Feel free to rollback if you dislike the new reading."}, {"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1463588277, "post_id": 37302678, "comment_id": 62131890, "body": "@Barry No I trust your judgement as I am a fan of yours and I&#39;m convinced of your solid C++ knowledge, but It would be highly appreciated if you could spare some of your valuable time to explain, briefly of course, the reasons why these wordings aren&#39;t related. Thanks either way."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1463588780, "post_id": 37302678, "comment_id": 62132216, "body": "@101010 Sure. Your question is really: why can I <code>reserve</code> a <code>vector&lt;reference_wrapper&lt;T&gt;&gt;</code>. The first section is about references, but you don&#39;t have any references. The second section is explaining what <code>reference_wrapper</code> is - but that&#39;s also not really relevant since your question would be just as valid for reserving a vector of <code>struct foo { foo(int ) };</code>"}], "answers": [{"comments": [{"owner": {"reputation": 355, "user_id": 5626113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f52f9a936db5fcd6209c84215001f85?s=128&d=identicon&r=PG&f=1", "display_name": "user3104201", "link": "https://stackoverflow.com/users/5626113/user3104201"}, "reply_to_user": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1463583867, "post_id": 37303070, "comment_id": 62128807, "body": "Without causing re-allication when adding new N units"}, {"owner": {"reputation": 355, "user_id": 5626113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f52f9a936db5fcd6209c84215001f85?s=128&d=identicon&r=PG&f=1", "display_name": "user3104201", "link": "https://stackoverflow.com/users/5626113/user3104201"}, "reply_to_user": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1463584456, "post_id": 37303070, "comment_id": 62129238, "body": "I rephrased the sentence"}], "tags": [], "owner": {"reputation": 355, "user_id": 5626113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f52f9a936db5fcd6209c84215001f85?s=128&d=identicon&r=PG&f=1", "display_name": "user3104201", "link": "https://stackoverflow.com/users/5626113/user3104201"}, "is_accepted": true, "score": 12, "last_activity_date": 1463659498, "last_edit_date": 1463659498, "creation_date": 1463582839, "answer_id": 37303070, "question_id": 37302678, "link": "https://stackoverflow.com/questions/37302678/reserve-a-vector-of-reference-wrapper-objects-how-it-is-possible/37303070#37303070", "title": "Reserve a vector of reference_wrapper objects, how it is possible?", "body": "<p><code>reserve</code> only allocates uninitialized block of memory enough to fit <code>N</code> units without causing reallocation when pushing <code>N</code> new elements.</p>\n\n<p><code>reserve</code> doesn't build any new elements. Worst case it only moves/copies already created ones.</p>\n"}, {"comments": [{"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 3, "creation_date": 1463583141, "post_id": 37303138, "comment_id": 62128199, "body": "Do you have any idea how old the SGI STL is?"}, {"owner": {"reputation": 1529, "user_id": 3650053, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QLEdE.jpg?s=128&g=1", "display_name": "Shangtong Zhang", "link": "https://stackoverflow.com/users/3650053/shangtong-zhang"}, "reply_to_user": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1463583257, "post_id": 37303138, "comment_id": 62128284, "body": "@sleeptightpupper As it&#39;s old, it&#39;s easy to read, and I believe the basic idea of STL doesn&#39;t change much."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 1, "creation_date": 1463583257, "post_id": 37303138, "comment_id": 62128287, "body": "This is only a single (and old) implementation of a specification. I believe a reference to the specification this code implements would be more appropriate (and more generally applicable) here, especially since the odds of OP <i>using</i> the implementation you&#39;re posting here are low."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 1, "creation_date": 1463584707, "post_id": 37303138, "comment_id": 62129408, "body": "@jaggedSpire This implementation doesn&#39;t implement a the C++ <code>std</code>: the C++ <code>std</code> was based off of this implementation!  While it is not authorative, the fact that it is one of the simplest and easiest to read ways to understand what many <code>std</code> types do is a big plus in its column.  There may and will be differences, but ease of reading can trump exact correctness in many cases."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1463584825, "post_id": 37303138, "comment_id": 62129482, "body": "@Yakk Oh neat! I didn&#39;t know that."}], "tags": [], "owner": {"reputation": 1529, "user_id": 3650053, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QLEdE.jpg?s=128&g=1", "display_name": "Shangtong Zhang", "link": "https://stackoverflow.com/users/3650053/shangtong-zhang"}, "is_accepted": false, "score": 3, "last_activity_date": 1463583010, "creation_date": 1463583010, "answer_id": 37303138, "question_id": 37302678, "link": "https://stackoverflow.com/questions/37302678/reserve-a-vector-of-reference-wrapper-objects-how-it-is-possible/37303138#37303138", "title": "Reserve a vector of reference_wrapper objects, how it is possible?", "body": "<p>You can refer to <a href=\"https://www.sgi.com/tech/stl/download.html\" rel=\"nofollow\">SGI STL</a> implementation</p>\n\n<p>In stl_vector.h:</p>\n\n<pre><code>void reserve(size_type __n) {\n    if (capacity() &lt; __n) {\n      const size_type __old_size = size();\n      iterator __tmp = _M_allocate_and_copy(__n, _M_start, _M_finish);\n      destroy(_M_start, _M_finish);\n      _M_deallocate(_M_start, _M_end_of_storage - _M_start);\n      _M_start = __tmp;\n      _M_finish = __tmp + __old_size;\n      _M_end_of_storage = _M_start + __n;\n    }\n  }\n\nvoid resize(size_type __new_size) { resize(__new_size, _Tp()); }\n</code></pre>\n\n<p>reserve doesn't create new element, however resize does.</p>\n"}, {"tags": [], "owner": {"reputation": 396, "user_id": 3304954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdf9ee2cfa68625969280f5098899092?s=128&d=identicon&r=PG", "display_name": "blelbach", "link": "https://stackoverflow.com/users/3304954/blelbach"}, "is_accepted": false, "score": 2, "last_activity_date": 1463647095, "creation_date": 1463647095, "answer_id": 37318056, "question_id": 37302678, "link": "https://stackoverflow.com/questions/37302678/reserve-a-vector-of-reference-wrapper-objects-how-it-is-possible/37318056#37318056", "title": "Reserve a vector of reference_wrapper objects, how it is possible?", "body": "<p><code>vector::reserve(N)</code> simply pre-allocates storage capacity for <code>N</code> elements. The vector constructor you are using is the \"default fill\" constructor - it <em>creates</em> <code>N</code> default-constructor elements and inserts them into the container.</p>\n\n<p>E.g.</p>\n\n<pre><code>vector&lt;T&gt; v;\nv.reserve(N);\nassert(0 == v.size());\nassert(N &gt;= v.capacity());\n</code></pre>\n\n<p>vs</p>\n\n<pre><code>vector&lt;T&gt; v(N);\nassert(N == v.size());\nassert(N &gt;= v.capacity());\n</code></pre>\n\n<p>Per 23.3.6.3.p2 [vector.capacity] of the C++17 working draft, <code>vector::reserve()</code> only requires that <code>T</code> is <code>MoveInsertable</code> into <code>*this</code>. The constructor in question is specified in 23.3.6.2.p3 [vector.cons], and requires that <code>T</code> shall be <code>DefaultInsertable</code> into <code>*this</code>.</p>\n\n<p><code>reference_wrapper&lt;&gt;</code> is <code>MoveInsertable</code> but not <code>DefaultInsertable</code> (it cannot be default constructed, as you mentioned). For the exact definitions of these concepts, see 23.2.1.p15 [containers.requirements.general].</p>\n"}], "owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 995, "favorite_count": 0, "accepted_answer_id": 37303070, "answer_count": 3, "score": 5, "last_activity_date": 1463659498, "creation_date": 1463581961, "last_edit_date": 1463587753, "question_id": 37302678, "link": "https://stackoverflow.com/questions/37302678/reserve-a-vector-of-reference-wrapper-objects-how-it-is-possible", "title": "Reserve a vector of reference_wrapper objects, how it is possible?", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/utility/functional/reference_wrapper/reference_wrapper\" rel=\"nofollow\"><code>std::reference_wrapper</code></a> isn't default constructable. So I can't write any of:</p>\n\n<pre><code>std::vector&lt;std::reference_wrapper&lt;int&gt;&gt; vec(10);\nstd::array&lt;std::reference_wrapper&lt;int&gt;, 3&gt; arr;\n</code></pre>\n\n<p>However, and to my surprise, you can invoke the <a href=\"http://en.cppreference.com/w/cpp/container/vector/reserve\" rel=\"nofollow\"><code>std::vector::reserve</code></a> member function of a vector of <code>std::reference_wrapper</code> objects and effectively change its capacity.</p>\n\n<pre><code>std::vector&lt;std::reference_wrapper&lt;int&gt;&gt; vec;  \nvec.reserve(10);\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/52850b56bb1b1161\" rel=\"nofollow\"><strong>Live Demo</strong></a></p>\n\n<p>How is this possible since <code>std::reference_wrapper</code> has no default constructor?</p>\n"}, {"tags": ["c++", "c", "visual-studio-2010", "visual-studio-2013", "systemc"], "answers": [{"tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 1, "last_activity_date": 1463581901, "creation_date": 1463581901, "answer_id": 37302645, "question_id": 37302459, "link": "https://stackoverflow.com/questions/37302459/systemc-library-cant-be-opened-with-vs-2013/37302645#37302645", "title": "systemc library can&#39;t be opened with vs 2013", "body": "<p>From your second link, the reason why you don't have the library is simple: because you didn't build it. You should have the source files to build the library.</p>\n"}], "owner": {"reputation": 132, "user_id": 4326134, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9113a261c134dd228e6cd7a4e016f9a1?s=128&d=identicon&r=PG&f=1", "display_name": "akaAlso", "link": "https://stackoverflow.com/users/4326134/akaalso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463581901, "creation_date": 1463581424, "question_id": 37302459, "link": "https://stackoverflow.com/questions/37302459/systemc-library-cant-be-opened-with-vs-2013", "title": "systemc library can&#39;t be opened with vs 2013", "body": "<p>I am new to systemc programming.For the installation, <a href=\"https://www.youtube.com/watch?v=0N7571XnkRQ\" rel=\"nofollow\">I followed this tutorial to install and startup.</a> I am trying to build a simple main program. However I am getting the error</p>\n\n<blockquote>\n  <p>error LNK1104: cannot open file \"systemc.lib\".</p>\n</blockquote>\n\n<p>Now with a simple directory search, I am not finding the file. However it seems that removing it causes more damages. \n <a href=\"http://forums.accellera.org/topic/2237-systemc-using-visual-studio-2013/\" rel=\"nofollow\">According to this poste</a> The fact that the tutorial is for vs2010 and I am using vs2013 shouldn't be a problem.</p>\n\n<p>How do I move foward. What should I do. Here is the code:</p>\n\n<pre><code>// Hello_world is module name\nSC_MODULE(hello_world) {\n SC_CTOR(hello_world) {\n    // Nothing in constructor \n }\n void say_hello() {\n    //Print \"Hello World\" to the console.\n    cout &lt;&lt; \"Hello World.\\n\";\n    }\n};\n\n// sc_main in top level function like in C++ main \nint sc_main(int argc, char* argv[]) {\nhello_world hello(\"HELLO\");\n// Print the hello world\n hello.say_hello();\n return(0);\n}\n</code></pre>\n"}, {"tags": ["c++", "cuda", "convolution", "cudnn"], "comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 2, "creation_date": 1463582028, "post_id": 37302344, "comment_id": 62127285, "body": "We&#39;re not psychic. What &quot;should&quot; the results be, and what are the results? Do try with <b>really</b> simple problems first, such as an all-zero or all-one input, and with just a single element set to one."}], "answers": [{"tags": [], "owner": {"reputation": 6761, "user_id": 802362, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e1ed0c2043db6eb30095426cd8f96692?s=128&d=identicon&r=PG", "display_name": "Baptiste Wicht", "link": "https://stackoverflow.com/users/802362/baptiste-wicht"}, "is_accepted": true, "score": 3, "last_activity_date": 1463648183, "creation_date": 1463648183, "answer_id": 37318426, "question_id": 37302344, "link": "https://stackoverflow.com/questions/37302344/how-to-compute-a-full-convolution-with-nvidia-cudnn/37318426#37318426", "title": "How to compute a &#39;full&#39; convolution with NVIDIA cuDNN?", "body": "<p>I got it. By default, they consider that the weights have been flipped before the operation. Therefore, it must be configured as a CUDNN_CROSS_CORRELATION instead of a CUDNN_CONVOLUTION.</p>\n"}], "owner": {"reputation": 6761, "user_id": 802362, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e1ed0c2043db6eb30095426cd8f96692?s=128&d=identicon&r=PG", "display_name": "Baptiste Wicht", "link": "https://stackoverflow.com/users/802362/baptiste-wicht"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1509, "favorite_count": 1, "accepted_answer_id": 37318426, "answer_count": 1, "score": 0, "last_activity_date": 1463648183, "creation_date": 1463581074, "last_edit_date": 1463582110, "question_id": 37302344, "link": "https://stackoverflow.com/questions/37302344/how-to-compute-a-full-convolution-with-nvidia-cudnn", "title": "How to compute a &#39;full&#39; convolution with NVIDIA cuDNN?", "body": "<p>I'm testing the NVIDIA cuDNN library on simple problems. I'm trying to achieve something that I thought would be simple, doing a 'full' convolution. I have been able to compute a 'valid' convolution with the forward algorithm without too much problems, but I'm unable to do the same with the backward algorithm for the 'full' convolution. </p>\n\n<p>I've prepared the tensors for my input, kernel and convolution and tried: </p>\n\n<pre><code>cudnnConvolutionBackwardData(handle.get(),\n    alpha, //Set to 1.0\n    filter, //Filter descriptor\n    kernel_gpu_memory,\n    input_tensor, //The input tensor descriptor\n    input_gpu_memory,\n    convolution, //The convolution descriptor\n    conv_algo, //Obtained with getConvolutionBackwardDataAlgorithm\n    workspace_cpu_memory, \n    workspace_size, //Obtained with getConvolutionBackwardDataWorkspaceSize\n    beta, //Set to 0.0\n    output_tensor, //The output tensor descriptor\n    conv_gpu_memory);\n</code></pre>\n\n<p>I have checked the return of all CUDA calls and I have no errors, but the result are not the results of the correct 'full' convolution. I'm comparing the obtained results with the 'full' convolution of matlab. </p>\n\n<p>I guess that this does not do what I'm expecting. Should I try the convolutionBackwardFilter algorithm ?</p>\n\n<p>How can I perform a 'full' convolution with cudnn ? </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1463580652, "post_id": 37302138, "comment_id": 62126219, "body": "<i>I have certain doubts when wrong format strings are used in sprintf</i> -- It is undefined behavior to do this.  No need to ruminate on this."}, {"owner": {"reputation": 2113, "user_id": 1927176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d4YlH.jpg?s=128&g=1", "display_name": "fnc12", "link": "https://stackoverflow.com/users/1927176/fnc12"}, "edited": false, "score": 0, "creation_date": 1463580971, "post_id": 37302138, "comment_id": 62126485, "body": "Because this is <code>C standart library</code>. Use <code>cout</code> - it auto detects type and doesn&#39;t need format specifiers"}, {"owner": {"reputation": 3528, "user_id": 509614, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f541aec9a9f53fed5b470a31a1112418?s=128&d=identicon&r=PG", "display_name": "Dennis", "link": "https://stackoverflow.com/users/509614/dennis"}, "edited": false, "score": 0, "creation_date": 1463581158, "post_id": 37302138, "comment_id": 62126637, "body": "<code>cout</code> is not as easy to use for many use-cases (e.g. printing a numeric value or pointer as a specific sized hex value with &#39;.&#39; as the padding). Plus it does not print to a string, in which cases you would need a string stream."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1463581913, "post_id": 37302138, "comment_id": 62127192, "body": "Note that this is not only <code>sprintf</code>, but <code>printf</code>, <code>scanf</code>, <code>snprintf</code>, etc. -- undefined behavior.   How about <code>char ch = &#39;x&#39;; sprintf(temp, &quot;%f&quot;, ch);</code>?  The <code>sprintf</code> call is expecting a variable that is <code>sizeof(float)</code> bytes in size, but gets a variable that is 1 byte in size.  So where is sprintf()  going to grab the extra bytes from?  It could be that the stack is used"}], "answers": [{"tags": [], "owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "is_accepted": false, "score": 3, "last_activity_date": 1463580810, "creation_date": 1463580810, "answer_id": 37302229, "question_id": 37302138, "link": "https://stackoverflow.com/questions/37302138/adding-wrong-format-type-in-sprintf/37302229#37302229", "title": "Adding wrong format type in sprintf", "body": "<p>Because the function has no idea what types you are sending it unless you give the proper parameters.</p>\n\n<p>Variadic functions by definition don't have any type information for the undefined arguments and must themselves determine what to get from the given data. </p>\n"}, {"comments": [{"owner": {"reputation": 1605, "user_id": 2508277, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/qfYIb.png?s=128&g=1", "display_name": "Unda", "link": "https://stackoverflow.com/users/2508277/unda"}, "edited": false, "score": 0, "creation_date": 1463583447, "post_id": 37302242, "comment_id": 62128441, "body": "Compilers may check the params types against the format string and issue a warning, but that&#39;s it ..."}], "tags": [], "owner": {"reputation": 5572, "user_id": 3375670, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/dftd9.jpg?s=128&g=1", "display_name": "Robert Kock", "link": "https://stackoverflow.com/users/3375670/robert-kock"}, "is_accepted": false, "score": 2, "last_activity_date": 1463580832, "creation_date": 1463580832, "answer_id": 37302242, "question_id": 37302138, "link": "https://stackoverflow.com/questions/37302138/adding-wrong-format-type-in-sprintf/37302242#37302242", "title": "Adding wrong format type in sprintf", "body": "<p>The <code>sprintf</code> function has a varargs parameter list.<br>\nThe compiler usually doesn't parse the second argument (the format string) in order to determine the type of the successive parameters.<br>\nImplicit conversion is therefore not possible.</p>\n"}], "owner": {"reputation": 193, "user_id": 2664174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/1xkUs.jpg?s=128&g=1", "display_name": "C0D3R", "link": "https://stackoverflow.com/users/2664174/c0d3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 413, "favorite_count": 0, "closed_date": 1463593464, "answer_count": 2, "score": 3, "last_activity_date": 1463580832, "creation_date": 1463580598, "question_id": 37302138, "link": "https://stackoverflow.com/questions/37302138/adding-wrong-format-type-in-sprintf", "closed_reason": "Duplicate", "title": "Adding wrong format type in sprintf", "body": "<p>I have certain doubts when wrong format strings are used in sprintf. Lets say for example %f is used as format specifier for an integer. Why is it not doing an implicit conversion?\nConsider the following program.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string&gt;\nusing namespace std;\nint main()\n{\n    int i = 0;\n    char temp[50];int a = 1;\n    sprintf( temp, \"%f\",a);\n    puts(temp);\n    return 1;\n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "boost-optional"], "comments": [{"owner": {"reputation": 4233, "user_id": 422489, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/49387eb044ecdf82163c77f78d6325d0?s=128&d=identicon&r=PG", "display_name": "Adam Badura", "link": "https://stackoverflow.com/users/422489/adam-badura"}, "edited": false, "score": 0, "creation_date": 1463610001, "post_id": 37302124, "comment_id": 62143002, "body": "Accidentally while looking for other things I just stumbled upon &quot;Coercion by Member Template&quot; idiom (<a href=\"https://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Coercion_by_Member_Template\" rel=\"nofollow noreferrer\">en.wikibooks.org/wiki/More_C%2B%2B_Idioms/&hellip;</a>) which fits nicely in this particular case. However <code>optional</code> (unlike <code>shared_ptr</code> for example) doesn&#39;t support it."}], "answers": [{"comments": [{"owner": {"reputation": 2673, "user_id": 4558644, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b6c0ca1e65b6c1e58eae9dc635702243?s=128&d=identicon&r=PG&f=1", "display_name": "mkmostafa", "link": "https://stackoverflow.com/users/4558644/mkmostafa"}, "edited": false, "score": 0, "creation_date": 1463581089, "post_id": 37302328, "comment_id": 62126578, "body": "I thought the same about slicing but I thought that it might be storing references to the optional values not copies?"}, {"owner": {"reputation": 4233, "user_id": 422489, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/49387eb044ecdf82163c77f78d6325d0?s=128&d=identicon&r=PG", "display_name": "Adam Badura", "link": "https://stackoverflow.com/users/422489/adam-badura"}, "reply_to_user": {"reputation": 2673, "user_id": 4558644, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b6c0ca1e65b6c1e58eae9dc635702243?s=128&d=identicon&r=PG&f=1", "display_name": "mkmostafa", "link": "https://stackoverflow.com/users/4558644/mkmostafa"}, "edited": false, "score": 0, "creation_date": 1463583193, "post_id": 37302328, "comment_id": 62128239, "body": "@mkmostafa I have edited my answer to provide more details. And also to explain original answer after you changed code in your question. Changed in a way making my original answer totally incorrect... If you would like to store the original object you might use mechanizm simialr to Boost.Any (Boost.Any itself will not be useful as well). Possibly Boost.TypeErasure has already something like this."}], "tags": [], "owner": {"reputation": 4233, "user_id": 422489, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/49387eb044ecdf82163c77f78d6325d0?s=128&d=identicon&r=PG", "display_name": "Adam Badura", "link": "https://stackoverflow.com/users/422489/adam-badura"}, "is_accepted": false, "score": -1, "last_activity_date": 1464029002, "last_edit_date": 1464029002, "creation_date": 1463581029, "answer_id": 37302328, "question_id": 37302124, "link": "https://stackoverflow.com/questions/37302124/boost-optional-recognizes-inheritance/37302328#37302328", "title": "boost optional recognizes inheritance?", "body": "<p>Even if it would work (which is likely buy I haven't checked) it would cause slicing. Only <code>Base</code> part would be stored in optional.</p>\n\n<p>optional keeps internally a buffer of the size needed to store <code>Base</code>. And even if <code>Base</code> would be of the same size as <code>Derived</code> (as in your case) still it would store only <code>Base</code>.</p>\n\n<hr>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Above answer was given for the original question which contained following code:</p>\n\n<pre><code>int main () {\n  boost::optional x(Derived());\n  func(x);\n}\n</code></pre>\n\n<p>Such code is not correct because of two reasons:</p>\n\n<ol>\n<li><code>boost::optional</code> requires template argument</li>\n<li>Even with the template argument it would still be function declaration.</li>\n</ol>\n\n<p>I have ignored those issues and assumed that something like this was meant:</p>\n\n<pre><code>int main () {\n  boost::optional&lt;Base&gt; x = Derived();\n  func(x);\n}\n</code></pre>\n\n<p>While that code does compile (at least Visual Studio 2013 and Boost 1.60) and causes slicing. As can be seen by running following program:</p>\n\n<pre><code>#include &lt;boost/optional.hpp&gt;\n#include &lt;iostream&gt;\n\nclass Base\n{\npublic:\n    virtual ~Base() { std::cout &lt;&lt; \"~Base\" &lt;&lt; std::endl; }\n};\n\nclass Derived : public Base\n{\npublic:\n    virtual ~Derived() { std::cout &lt;&lt; \"~Derived\" &lt;&lt; std::endl; }\n};\n\nint main()\n{\n    boost::optional&lt;Base&gt; x = Derived();\n}\n</code></pre>\n\n<p>which produces output</p>\n\n<pre>\n~Derived\n~Base\n~Base\n</pre>\n\n<p>The second <code>~Base</code> shows that <code>optional</code> destroyes <code>Base</code> object rather than <code>Derived</code> object. (The <code>~Derived</code> is from the temporary object <code>Derived()</code> as is the first <code>~Base</code>.)</p>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 4, "last_activity_date": 1463581452, "last_edit_date": 1463581452, "creation_date": 1463581132, "answer_id": 37302359, "question_id": 37302124, "link": "https://stackoverflow.com/questions/37302124/boost-optional-recognizes-inheritance/37302359#37302359", "title": "boost optional recognizes inheritance?", "body": "<p>No, it won't work. <code>func</code> takes an lvalue reference to <code>boost::optional&lt;Base&gt;</code>. That means it can accept an lvalue of type <code>boost::optional&lt;Base&gt;</code>, an lvalue of a type that derives publicly and unambiguously from <code>boost::optional&lt;Base&gt;</code>, or some other type that has an <code>operator boost::optional&lt;Base&gt;&amp;()</code>. None of those is true of <code>boost::optional&lt;Derived&gt;</code>. Class templates are not coviarant in the C++ type system - <code>boost::optional&lt;Derived&gt;</code> does not inherit from <code>boost::optional&lt;Base&gt;</code>.</p>\n\n<hr />\n\n<p>It would be a different story if <code>func</code> took its argument by value. If it looked like:</p>\n\n<pre><code>void func(boost::optional&lt;Base&gt; ) { }\n</code></pre>\n\n<p>In that case, you <em>could</em> call <code>func</code> with a <code>boost::optional&lt;Derived&gt;</code>. But that converting constructor is marked <code>explicit</code>, so you would have to write:</p>\n\n<pre><code>func(boost::optional&lt;Base&gt;{x});\n</code></pre>\n\n<p>It's good that this is explicit - you are marking clear that you are (potentially) slicing <code>x</code>. </p>\n"}], "owner": {"reputation": 2673, "user_id": 4558644, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b6c0ca1e65b6c1e58eae9dc635702243?s=128&d=identicon&r=PG&f=1", "display_name": "mkmostafa", "link": "https://stackoverflow.com/users/4558644/mkmostafa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 666, "favorite_count": 1, "accepted_answer_id": 37302359, "answer_count": 2, "score": 4, "last_activity_date": 1464029002, "creation_date": 1463580552, "last_edit_date": 1463581147, "question_id": 37302124, "link": "https://stackoverflow.com/questions/37302124/boost-optional-recognizes-inheritance", "title": "boost optional recognizes inheritance?", "body": "<pre><code>class Base {};\nclass Derived : public Base {};\n\nvoid func(boost::optional&lt;Base&gt;&amp;) {}\n\nint main () {\n  boost::optional&lt;Derived&gt; x;\n  func(x);\n}\n</code></pre>\n\n<p>will func accept both optionals: base and derived?</p>\n"}, {"tags": ["c++", "language-lawyer", "c++14", "gcc6"], "comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1463580648, "post_id": 37301946, "comment_id": 62126215, "body": "Interestingly, <code>foo::baz mybaz</code> does compile in gcc as well."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1463581071, "post_id": 37301946, "comment_id": 62126562, "body": "Indeed, <code>foo::baz mybaz</code> is only said to be ambiguous with <code>clang</code>."}], "answers": [{"comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1463584015, "post_id": 37303140, "comment_id": 62128923, "body": "My answer appears to be wrong according to the paragraph 2. Could you also elaborate on the name <code>foo::baz</code> in global namespace? It fails to compile in clang, while no diagnostic is shown by gcc."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1463585147, "post_id": 37303140, "comment_id": 62129707, "body": "That is indeed similar to the thoughts I had, what I am still struggling with is how <code>[namespace.udir]</code> plays into this as pointed out earlier by user2079303. Also thanks for reporting the bug."}, {"owner": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "reply_to_user": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1463630016, "post_id": 37303140, "comment_id": 62147932, "body": "@Zulan [namespace.udir]/6 Begins &quot;If name lookup finds a declaration for a name in two different namespaces...&quot;, since lookup of either <code>::foo</code> or <code>::foo::baz</code> only finds a single declaration in a single namespace, it does not apply."}, {"owner": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1463631932, "post_id": 37303140, "comment_id": 62148360, "body": "@user2079303 I&#39;m reasonably sure <code>foo::baz</code> is ill-formed, I&#39;ve added some analysis to the answer. (The unqualified lookup rules make qualified name lookup look simple - get it? &quot;look&quot; simple? - so I&#39;m not as sure of my footing here.)"}], "tags": [], "owner": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "is_accepted": true, "score": 9, "last_activity_date": 1463631813, "last_edit_date": 1592644375, "creation_date": 1463583027, "answer_id": 37303140, "question_id": 37301946, "link": "https://stackoverflow.com/questions/37301946/global-scope-resolution-in-the-presence-of-using-namespace/37303140#37303140", "title": "Global scope resolution in the presence of using namespace", "body": "<p>[namespace.qual] is fairly straightforward:</p>\n<blockquote>\n<p>1 If the <em>nested-name-specifier</em> of a <em>qualified-id</em> nominates a namespace (including the case where the <em>nested-name-specifier</em> is <code>::</code>, i.e., nominating the global namespace), the name specified after the <em>nested-name-specifier</em> is looked up in the scope of the namespace. The names in a <em>template-argument</em> of a <em>template-id</em> are looked up in the context in which the entire <em>postfix-expression</em> occurs.</p>\n<p>2 For a namespace <code>X</code> and name <code>m</code>, the namespace-qualified lookup set S(<code>X</code>,<code>m</code>) is defined as follows: Let S<sub>0</sub>(<code>X</code>,<code>m</code>) be the set of all declarations of <code>m</code> in <code>X</code> and the inline namespace set of <code>X</code> (7.3.1). If S<sub>0</sub>(<code>X</code>,<code>m</code>) is not empty, S(<code>X</code>,<code>m</code>) is S<sub>0</sub>(<code>X</code>,<code>m</code>); otherwise, S(<code>X</code>,<code>m</code>) is the union of S(N<sub>i</sub>,<code>m</code>) for all namespaces N<sub>i</sub> nominated by <em>using-directives</em> in <code>X</code> and its inline namespace set.</p>\n<p>3 Given <code>X::m</code> (where <code>X</code> is a user-declared namespace), or given <code>::m</code> (where <code>X</code> is the global namespace), if S(<code>X</code>,<code>m</code>) is the empty set, the program is ill-formed. Otherwise, if S(<code>X</code>,<code>m</code>) has exactly one member, or if the context of the reference is a <em>using-declaration</em> (7.3.3), S(<code>X</code>,<code>m</code>) is the required set of declarations of <code>m</code>. Otherwise if the use of <code>m</code> is not one that allows a unique declaration to be chosen from S(<code>X</code>,<code>m</code>), the program is ill-formed.</p>\n</blockquote>\n<p><code>::foo</code> is a <em>qualified-id</em> with <em>nested-name-specifier</em> <code>::</code>, so the name <code>foo</code> is looked up in global scope.</p>\n<p>S<sub>0</sub>(<code>::</code>,<code>foo</code>) contains the single declaration for <code>namespace foo</code> since there are no other declarations of <code>foo</code> in the namespace, and it has no inline namespaces. Since S<sub>0</sub>(<code>::</code>,<code>foo</code>) is not empty, S(<code>::</code>,<code>foo</code>) is S<sub>0</sub>(<code>::</code>,<code>foo</code>). (Note that since S<sub>0</sub>(<code>::</code>,<code>foo</code>) is not empty, namespaces nominated by using directives are never examined.)</p>\n<p>Since S(<code>::</code>,<code>foo</code>) has exactly one element, that declaration is used for <code>::foo</code>.</p>\n<p>The name <code>::foo::baz</code> is therefore a <em>qualified-id</em> with <em>nested-name-specifier</em> <code>::foo</code> that nominates a namespace. There is again a single declaration of <code>baz</code> in namespace <code>::foo</code>, so the name <code>::foo::baz</code> refers to the <code>class baz</code> declaration.</p>\n<p>The behavior you observe in GCC 6+ is in fact a bug, filed as <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=71173\" rel=\"nofollow noreferrer\">GCC PR 71173</a>.</p>\n<p>EDIT: Lookup of <code>foo::baz</code> when it appears at global scope, a la:</p>\n<pre><code>foo::baz bang;\n</code></pre>\n<p>first requires a lookup of <code>foo</code> as an unqualified name. [basic.lookup.qual]/1 says this lookup only sees &quot;namespaces, types, and templates whose specializations are types.&quot; [basic.scope.namespace]/1 tells us about namespace members and their scopes:</p>\n<blockquote>\n<p>The declarative region of a <em>namespace-definition</em> is its <em>namespace-body</em>. Entities declared in a <em>namespace-body</em> are said to be members of the namespace, and names introduced by these declarations into the declarative region of the namespace are said to be member names of the namespace. A namespace member name has namespace scope. Its potential scope includes its namespace from the name\u2019s point of declaration onwards; and for each <em>using-directive</em> that nominates the member\u2019s namespace, the member\u2019s potential scope includes that portion of the potential scope of the <em>using-directive</em> that follows the member\u2019s point of declaration.</p>\n</blockquote>\n<p>[basic.lookup.unqual]/4 tells us that the declaration of <code>namespace foo</code> is visible:</p>\n<blockquote>\n<p>A name used in global scope, outside of any function, class or user-declared namespace, shall be declared before its use in global scope.</p>\n</blockquote>\n<p>and para 2 says that <code>class foo</code> is also visible here:</p>\n<blockquote>\n<p>The declarations from the namespace nominated by a <em>using-directive</em> become visible in a namespace enclosing the <em>using-directive</em>; see 7.3.4. For the purpose of the unqualified name lookup rules described in 3.4.1, the declarations from the namespace nominated by the <em>using-directive</em> are considered members of that enclosing namespace.</p>\n</blockquote>\n<p>Since two declarations of different <code>foo</code> entities from differing namespaces are found, [namespace.udir]/6 tells us the use of <code>foo</code> is ill-formed:</p>\n<blockquote>\n<p>If name lookup finds a declaration for a name in two different namespaces, and the declarations do not declare the same entity and do not declare functions, the use of the name is ill-formed.</p>\n</blockquote>\n<p>Our name lookup for <code>foo::baz</code> dies before ever getting to <code>baz</code>.</p>\n"}], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 376, "favorite_count": 3, "accepted_answer_id": 37303140, "answer_count": 1, "score": 13, "last_activity_date": 1463631813, "creation_date": 1463580182, "last_edit_date": 1463584746, "question_id": 37301946, "link": "https://stackoverflow.com/questions/37301946/global-scope-resolution-in-the-presence-of-using-namespace", "title": "Global scope resolution in the presence of using namespace", "body": "<p>Consider the following code:</p>\n\n<pre><code>namespace foo {\n  namespace bar {\n    class foo {};\n  }\n  class baz {};\n}\nusing namespace foo::bar;\n\n::foo::baz mybaz;\n</code></pre>\n\n<p>Is this code valid?\nOr is <code>::foo</code> ambiguous?\nOr does <code>::foo</code> refer to the <code>class foo</code>, such that there is no <code>::foo::baz</code>.</p>\n\n<p>When it comes to compilers, <code>gcc 6.1.1</code> seems to think the latter:</p>\n\n<pre><code>scope.cpp:9:8: error: \u2018baz\u2019 in \u2018class foo::bar::foo\u2019 does not name a type\n ::foo::baz mybaz;\n        ^~~\n</code></pre>\n\n<p>On the other hand <code>gcc 5.3.1</code>, <code>clang 3.8.0</code>, and the intel compiler 16.0.3 do not yield any warnings or errors.</p>\n\n<p>I suspect that under 3.4.3.2.2 of the C++14 standard, this should be valid and not ambiguous, but I am not quite sure.</p>\n\n<p>Edit: In addition, for <code>foo::baz mybaz</code> only clang reports an ambiguous error.</p>\n"}, {"tags": ["c++", "algorithm", "ternary-operator"], "comments": [{"owner": {"reputation": 55713, "user_id": 26095, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WLsjF.jpg?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/26095/sean"}, "edited": false, "score": 0, "creation_date": 1463580640, "post_id": 37301934, "comment_id": 62126212, "body": "The ternary operator is tricky in this scenario as you don&#39;t want to evaluate the <code>true</code> and <code>false</code> part and push them onto the stack, so the only part that should be evaluated is the part that maps to the outcome of the comparison."}, {"owner": {"reputation": 731, "user_id": 4600847, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/2hdPz.jpg?s=128&g=1", "display_name": "tobilocker", "link": "https://stackoverflow.com/users/4600847/tobilocker"}, "reply_to_user": {"reputation": 55713, "user_id": 26095, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WLsjF.jpg?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/26095/sean"}, "edited": false, "score": 0, "creation_date": 1463580846, "post_id": 37301934, "comment_id": 62126386, "body": "@Sean i could either live with using <code>0</code> and <code>not 0</code> to evaluate the ternary expression or parsing the ternary expression first to then evaluate the left arithmetic expression but i&#39;m really stuck on this one for now. Edit: i would actually prefer a solution for parsing something like <code>A&lt;B?C:D</code>, where A, B, C, D can be a valid arithmetic expression which then can be evaluated"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1463580926, "post_id": 37301934, "comment_id": 62126452, "body": "Don&#39;t tag C++ questions as C. Don&#39;t tag C questions as C++. Only tag a question with both if it&#39;s about the differences in the languages. (Removed the C tag.)"}, {"owner": {"reputation": 731, "user_id": 4600847, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/2hdPz.jpg?s=128&g=1", "display_name": "tobilocker", "link": "https://stackoverflow.com/users/4600847/tobilocker"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1463581026, "post_id": 37301934, "comment_id": 62126526, "body": "@DevSolar Thanks for pointing out. That must have been slipped in within the suggestions. Sry"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1463653574, "post_id": 37301934, "comment_id": 62160385, "body": "The shunting-yard algorithm will handle relational operators without any problem whatsoever but it is not designed for ternary operators, function calls, and so on. Time to look at a parser-generator solution."}, {"owner": {"reputation": 731, "user_id": 4600847, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/2hdPz.jpg?s=128&g=1", "display_name": "tobilocker", "link": "https://stackoverflow.com/users/4600847/tobilocker"}, "edited": false, "score": 0, "creation_date": 1463654066, "post_id": 37301934, "comment_id": 62160727, "body": "It handles functions without problems"}], "owner": {"reputation": 731, "user_id": 4600847, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/2hdPz.jpg?s=128&g=1", "display_name": "tobilocker", "link": "https://stackoverflow.com/users/4600847/tobilocker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 510, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1463652605, "creation_date": 1463580157, "last_edit_date": 1495541763, "question_id": 37301934, "link": "https://stackoverflow.com/questions/37301934/evaluate-mixed-arithmetic-and-conditional-infix-expressions", "title": "Evaluate mixed arithmetic and conditional infix expressions", "body": "<p>I have implemented <a href=\"https://en.wikipedia.org/wiki/Shunting-yard_algorithm\" rel=\"nofollow noreferrer\">shunting-yard algorithm</a> to parse arithmetic string-expressions from infix to postfix-notation.\nI now also want to parse expressions with <a href=\"http://en.cppreference.com/w/cpp/language/operator_comparison\" rel=\"nofollow noreferrer\">relational operators</a> and <a href=\"http://en.cppreference.com/w/cpp/language/operator_other#Conditional_operator\" rel=\"nofollow noreferrer\">Ternary conditional</a>. Considering <a href=\"http://en.cppreference.com/w/cpp/language/operator_precedence\" rel=\"nofollow noreferrer\">C++ Operator Precedence</a> i added those operators with the lowest precedence and <code>right-associativity</code> for <code>?</code> and <code>:</code> and the second-lowest and <code>left-associativity</code> for <code>&gt;</code> and <code>&lt;</code>.</p>\n\n<p>When i now parse an expression like: <code>A&gt;B?C:D</code> (where A, B, C and D can be any valid arithmetic expression) i would expect: <code>A B &gt; C D : ?</code>, but i get <code>A B C D : ? &lt;</code>. When i use Parentheses to evaluate the Condition first <code>(A&gt;B)?C:D</code> it works. A mixed expression like <code>(1+2&lt;3+4)?C:D</code> gives me <code>1 2 + 3 4 + &lt; C D : ?</code> which seems also legit to me. <code>(A&lt;B)?5+6:C</code> gives me <code>A B &lt; 5 6 : + ?</code> which again is messed up. Again, <code>(A&lt;B)?(5+6):C</code> would fix that.</p>\n\n<p><em>As stated in the comments, evaluating conditions first and the proceed with the left arithmetic expression would also be fine. But i really did not stumble upon an algorithm for evaluating expressions with relational and ternary operators in my research yet. Any help, even if pointing out an algorithm would be very appreciated</em></p>\n\n<p>Here is the implementation of shunting-yard:</p>\n\n<pre><code>QQueue&lt;QString&gt; ShuntingYard::infixToPostfixWithConditionals(const QString&amp; expression)\n{\n    QStack&lt;QString&gt; stack;\n    QQueue&lt;QString&gt; queue;\n    QString token;\n    QStringList tokens = splitExpression(expression);\n    Q_FOREACH(QString token, tokens)\n    {\n        if (isDefineOrNumber(token))\n            queue.enqueue(token);\n        if (isFunction(token))\n            stack.push(token);\n        if (isOperator(token))\n        {\n            while (!stack.isEmpty() &amp;&amp; isOperator(stack.top()) &amp;&amp; isLeftAssociativeOperator(token) &amp;&amp; !hasHigherPrecedence(token, stack.top()))\n                queue.enqueue(stack.pop());\n            stack.push(token);\n        }\n        if (isLeftParenthese(token))\n            stack.push(token);\n        else if (isRightParenthese(token))\n        {\n            while (!isLeftParenthese(stack.top()))\n            {\n                if (stack.isEmpty())\n                    break;\n                if (isOperator(stack.top()))\n                    queue.enqueue(stack.pop());\n            }\n            stack.pop();\n            if (isFunction(stack.top()))\n                queue.enqueue(stack.pop());\n        }\n    }\n    while (!stack.isEmpty())\n    {\n        if (isLeftParenthese(stack.top()))\n            break;\n        queue.enqueue(stack.pop());\n    }\n    return queue;\n}\n</code></pre>\n\n<p><strong>EDIT: made code and description more concise for readabilility</strong></p>\n\n<p><strong>Another EDIT: Treating ?: as left-associative gave me the expected output</strong></p>\n\n<p><em>Now, regarding <a href=\"https://stackoverflow.com/questions/7407273/why-is-the-conditional-operator-right-associative\">this</a> question about the associativity of ternary conditionals. If i input <code>a&lt;b?a:b?c:d</code> i get <code>a b &lt; a b c d : ? : ?</code>, where <code>a &lt; b</code> will be evaluated first, which is correct, due to its higher precedence, but then <code>b ? c : d</code> will be evaluated first, which is the correct right-to-left order. Confusing.</em></p>\n"}, {"tags": ["c++", "boost", "metaprogramming", "c++14", "boost-hana"], "comments": [{"owner": {"reputation": 155, "user_id": 2417774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3e28fcff33afd3cfb2242c4ae49b72c?s=128&d=identicon&r=PG", "display_name": "llonesmiz", "link": "https://stackoverflow.com/users/2417774/llonesmiz"}, "edited": false, "score": 3, "creation_date": 1463586038, "post_id": 37301621, "comment_id": 62130384, "body": "The edit in <a href=\"http://stackoverflow.com/a/34711884/2417774\">this answer</a>  by Louis Dionne may be useful (also the discussion in the comments)."}, {"owner": {"reputation": 8223, "user_id": 805579, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0d2eb3294e0905aa3c750998db351ddc?s=128&d=identicon&r=PG", "display_name": "Niall Douglas", "link": "https://stackoverflow.com/users/805579/niall-douglas"}, "edited": false, "score": 0, "creation_date": 1463656256, "post_id": 37301621, "comment_id": 62162312, "body": "He&#39;s probably avoided explicit view support because that&#39;s all changing in C++ 2x what with range based STL v2 and gsl::span&lt;T&gt; et al"}], "answers": [{"tags": [], "owner": {"reputation": 1567, "user_id": 800347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Buq1.jpg?s=128&g=1", "display_name": "Jason Rice", "link": "https://stackoverflow.com/users/800347/jason-rice"}, "is_accepted": false, "score": 3, "last_activity_date": 1464045989, "last_edit_date": 1464045989, "creation_date": 1464045099, "answer_id": 37401974, "question_id": 37301621, "link": "https://stackoverflow.com/questions/37301621/is-there-an-equivalent-of-view-concept-from-boost-fusion-in-boost-hana/37401974#37401974", "title": "Is there an equivalent of View concept from Boost.Fusion in Boost.Hana?", "body": "<p>As far as views are concerned, there are some undocumented features in <code>boost/hana/experimental/view.hpp</code> so they certainly appear to be on the horizon for Boost.Hana.</p>\n\n<p>The current problem with <code>Struct</code> is that it is <code>Foldable</code> on key value pairs. In <code>hana::unpack</code> it will put each value from your struct in a pair, creating a copy. Your solution using <code>hana::accessors</code> is currently the way to go IMO.</p>\n\n<p>Note that there is currently an open issue for this: <a href=\"https://github.com/boostorg/hana/issues/175\" rel=\"nofollow\">https://github.com/boostorg/hana/issues/175</a></p>\n"}, {"tags": [], "owner": {"reputation": 2976, "user_id": 627587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b7225df5b0728daa170646a5c5a4bfda?s=128&d=identicon&r=PG", "display_name": "Louis Dionne", "link": "https://stackoverflow.com/users/627587/louis-dionne"}, "is_accepted": true, "score": 4, "last_activity_date": 1464126295, "creation_date": 1464126295, "answer_id": 37424435, "question_id": 37301621, "link": "https://stackoverflow.com/questions/37301621/is-there-an-equivalent-of-view-concept-from-boost-fusion-in-boost-hana/37424435#37424435", "title": "Is there an equivalent of View concept from Boost.Fusion in Boost.Hana?", "body": "<p>Jason is correct in saying that there is experimental support for views in Hana. The problem you encounter is a common one, and Hana does not currently address it in an elegant way. I hope that adding views to Hana will make this problem go away by providing both by-value and by-reference semantics to all algorithms where that makes sense. But adding this in a coherent manner is non-trivial, hence the experimental state of the feature.</p>\n\n<p>That being said, you can solve your problem by either using accessors (as you show in your question), or by iterating on the keys associated to the members of the struct instead:</p>\n\n<pre><code>#include &lt;boost/hana.hpp&gt;\n#include &lt;iostream&gt;\nnamespace hana = boost::hana;\n\nstruct Foo {\n    Foo() = default;\n    Foo(const Foo&amp;) { std::cout &lt;&lt; \"copy\" &lt;&lt; std::endl; }\n    Foo(Foo&amp;&amp;) { std::cout &lt;&lt; \"move\" &lt;&lt; std::endl; }\n};\n\nstruct Struct {\n    BOOST_HANA_DEFINE_STRUCT(Struct,\n        (Foo, foo)\n    );\n};\n\nint main() {\n    Struct s;\n    hana::for_each(hana::keys(s), [&amp;s](const auto&amp; key) {\n        const auto&amp; member = hana::at_key(s, key); // No copying\n    });\n}\n</code></pre>\n\n<p>If you want to manipulate the members themselves as a sequence, but do not want to copy them, you can create a sequence of references as follows:</p>\n\n<pre><code>#include &lt;boost/hana.hpp&gt;\n#include &lt;iostream&gt;\nnamespace hana = boost::hana;\n\nstruct Foo {\n    Foo() = default;\n    Foo(const Foo&amp;) { std::cout &lt;&lt; \"copy\" &lt;&lt; std::endl; }\n    Foo(Foo&amp;&amp;) { std::cout &lt;&lt; \"move\" &lt;&lt; std::endl; }\n};\n\nstruct Struct {\n    BOOST_HANA_DEFINE_STRUCT(Struct,\n        (Foo, foo)\n    );\n};\n\nint main() {\n    Struct s;\n    auto members = hana::transform(hana::keys(s), [&amp;s](auto const&amp; key) {\n        return std::ref(hana::at_key(s, key));\n    });\n}\n</code></pre>\n\n<p><code>members</code> will then be a sequence of <code>std::reference_wrapper</code>s that you can carry around, but you'll have to use <code>.get()</code> when accessing them. In a future version of Hana, <code>hana::members</code> would probably return a view of key/value pairs, where the value is a reference to the original member. But there are a couple of issues that must be resolved before this is possible.</p>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 6652, "user_id": 609063, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/de1fedbe165b2e0e1390927804cfe62c?s=128&d=identicon&r=PG", "display_name": "lizarisk", "link": "https://stackoverflow.com/users/609063/lizarisk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 333, "favorite_count": 0, "accepted_answer_id": 37424435, "answer_count": 2, "score": 4, "last_activity_date": 1464126295, "creation_date": 1463579409, "last_edit_date": 1463599932, "question_id": 37301621, "link": "https://stackoverflow.com/questions/37301621/is-there-an-equivalent-of-view-concept-from-boost-fusion-in-boost-hana", "title": "Is there an equivalent of View concept from Boost.Fusion in Boost.Hana?", "body": "<p>I was trying to iterate over a user-defined struct with <code>hana::for_each</code> and noticed that it gets copied/moved, while <code>Boost.Fusion</code> allows you to iterate on the original struct in-place.</p>\n\n<p>I didn't find anything like a <code>View</code> concept from <code>Boost.Fusion</code> in <code>Boost.Hana</code>. How do I apply transformations to sequences without copying/moving them every time?</p>\n\n<pre><code>#include &lt;boost/hana.hpp&gt;\n#include &lt;iostream&gt;\n\nstruct Foo {\n    Foo() = default;\n    Foo(const Foo&amp;) { std::cout &lt;&lt; \"copy\" &lt;&lt; std::endl; }\n    Foo(Foo&amp;&amp;) { std::cout &lt;&lt; \"move\" &lt;&lt; std::endl; }\n};\n\nstruct Struct {\n    BOOST_HANA_DEFINE_STRUCT(Struct,\n        (Foo, foo)\n    );\n};\n\nint main() {\n    Struct s;\n    auto m = boost::hana::members(s); // copy constructor invoked\n}\n</code></pre>\n\n<p>UPDATE: I tried to use <code>hana::transform</code> to apply <code>std::ref</code> to the members, but <code>Struct</code> is not a <code>Functior</code>, so <code>transform</code> is not applicable in this case. I was able to achieve the desired behavior using <code>hana::accessors</code>, but it looks a bit hacky to me. I wish there was a way to create views.</p>\n\n<pre><code>hana::for_each(hana::accessors&lt;Struct&gt;(), [&amp;s](const auto&amp; accessor) {\n    const auto&amp; member = hana::second(accessor)(s); // No copying\n});\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 7, "creation_date": 1463578443, "post_id": 37301160, "comment_id": 62124599, "body": "I think because you have user defined types specifically <code>CatersianLocation</code> and whatever <code>RadioSignal</code> and <code>RadioDevice</code> is they need to define the less than operator <code>&lt;</code> for the comparator in the <code>map</code> to order the elements correctly, see related: <a href=\"http://stackoverflow.com/questions/1102392/stdmaps-with-user-defined-types-as-key\" title=\"stdmaps with user defined types as key\">stackoverflow.com/questions/1102392/&hellip;</a> or you can define a comparator functor as suggested in the linked question"}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1463578821, "post_id": 37301324, "comment_id": 62124880, "body": "For completness, two other options would be to specialize <code>less</code> for <code>CartesianLocation</code> or defined <code>operator&lt;</code> for it."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1463578870, "post_id": 37301324, "comment_id": 62124911, "body": "@SergeyA can you really specialize <code>less</code>?? I thought you can&#39;t do that for <code>std</code> functions.."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1463579121, "post_id": 37301324, "comment_id": 62125083, "body": "Yes, you can. There is a special exception - while you can&#39;t define new names inside <code>std</code>, you can provide specializations. Also, your member <code>operator&lt;</code> definition is incorrect."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1463579259, "post_id": 37301324, "comment_id": 62125195, "body": "@SergeyA oh, didn&#39;t know that. But it doesn&#39;t apply to templates, right?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1463579806, "post_id": 37301324, "comment_id": 62125629, "body": "@SergeyA - you can specialize templates in <code>std</code> <b>for user-defined types</b>."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1463579808, "post_id": 37301324, "comment_id": 62125632, "body": "The two-argument <code>operator&lt;</code> needs to be a free function. If it&#39;s a member it should take one argument and be <code>const</code>."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1463580282, "post_id": 37301324, "comment_id": 62125962, "body": "@PeteBecker, of course, and this is something I forgot to mention in my comment."}, {"owner": {"reputation": 299, "user_id": 4225953, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7PZmu.jpg?s=128&g=1", "display_name": "Tarun", "link": "https://stackoverflow.com/users/4225953/tarun"}, "edited": false, "score": 0, "creation_date": 1463667879, "post_id": 37301324, "comment_id": 62171494, "body": "Don&#39;t know but using below code, I could able to solve my issue:"}], "tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": true, "score": 4, "last_activity_date": 1581794683, "last_edit_date": 1581794683, "creation_date": 1463578621, "answer_id": 37301324, "question_id": 37301160, "link": "https://stackoverflow.com/questions/37301160/invalid-operands-to-binary-expression-const-and-const/37301324#37301324", "title": "Invalid operands to binary expression (&#39;const&#39; and &#39;const&#39; )", "body": "<p>You are not providing a comparator for <code>std::map</code>, and so it uses <code>std::less</code>. But <code>std::less</code> doesn't have an overload for <code>CartesianLocation</code> (and <code>CartesianLocation</code> doesn't have an <code>operator&lt;</code>), so you get an error. </p>\n\n<p>You can add an <code>operator&lt;</code>:</p>\n\n<pre><code>struct CartesianLocation\n{\n    //Other stuff\n    bool operator&lt;(const CartesianLocation&amp; loc2) const\n    {\n        //Return true if this is less than loc2\n    }\n};\n</code></pre>\n\n<p>Another way is to define a custom comparator, for example:</p>\n\n<pre><code>struct comp\n{\n    bool operator()(const CartesianLocation&amp; loc1, const CartesianLocation&amp; loc2) const\n    {\n        //Compare the 2 locations, return true if loc1 is less than loc2\n    }\n};\n</code></pre>\n\n<p>Then you can pass it to <code>std::map</code>:</p>\n\n<pre><code>std::map&lt;CartesianLocation, std::list&lt;RadioSignal&lt;RadioDevice&gt;&gt;, comp&gt; radioMap;\n</code></pre>\n"}], "owner": {"reputation": 299, "user_id": 4225953, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7PZmu.jpg?s=128&g=1", "display_name": "Tarun", "link": "https://stackoverflow.com/users/4225953/tarun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6263, "favorite_count": 0, "closed_date": 1463619034, "accepted_answer_id": 37301324, "answer_count": 1, "score": 7, "last_activity_date": 1581794683, "creation_date": 1463578249, "last_edit_date": 1581791515, "question_id": 37301160, "link": "https://stackoverflow.com/questions/37301160/invalid-operands-to-binary-expression-const-and-const", "closed_reason": "Duplicate", "title": "Invalid operands to binary expression (&#39;const&#39; and &#39;const&#39; )", "body": "<p>I am a C++ noob,  so please don\u2019t mind if you find this question silly</p>\n\n<p>I am declaring map in C++ a below:</p>\n\n<pre><code>std::map&lt;CartesianLocation, std::list&lt;RadioSignal&lt;RadioDevice&gt;&gt;&gt; radioMap;\n</code></pre>\n\n<p>Full code:</p>\n\n<p>Don't know but using below code, I could able to solve my issue </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class RadioMap:public std::iterator_traits&lt;CartesianLocation&gt;, public Cloneable&lt;RadioMap&gt; {\nprivate:\n    std::map&lt;const CartesianLocation*, const std::list&lt;RadioSignal&lt;RadioDevice&gt;&gt;*&gt; radioMap;\n    std::vector&lt;RadioDevice&gt; radioDevices;\n\npublic:\n    void add(const CartesianLocation *location, const std::list&lt;RadioSignal&lt;RadioDevice&gt;&gt; *observedSignals){\n        radioMap[location] = observedSignals;\n}\n</code></pre>\n\n<p>On this line <code>radioMap[location] = observedSignals;</code> I am ended with this error </p>\n\n<blockquote>\n  <p>\u201cInvalid operands to binary expression ('const CartesianLocation' and\n  'const CartesianLocation\u2019)\u201d on struct _LIBCPP_TYPE_VIS_ONLY less :\n  binary_function&lt;_Tp, _Tp, bool> {\n      _LIBCPP_CONSTEXPR_AFTER_CXX11 _LIBCPP_INLINE_VISIBILITY \n      bool operator()(const _Tp&amp; __x, const _Tp&amp; __y) const\n          {return __x &lt; __y;} };</p>\n</blockquote>\n\n<p>Any idea where I may be wrong?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 11418, "user_id": 741595, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a7a0996d629052539c4f7e05e844ed16?s=128&d=identicon&r=PG", "display_name": "Nicholas Smith", "link": "https://stackoverflow.com/users/741595/nicholas-smith"}, "edited": false, "score": 3, "creation_date": 1463577627, "post_id": 37300847, "comment_id": 62123998, "body": "Have you got the <code>Q_OBJECT</code> macro in your classes?"}, {"owner": {"reputation": 23, "user_id": 4526322, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/34f9b9c9ca4e42c46a651de5984cd105?s=128&d=identicon&r=PG&f=1", "display_name": "Nabeeha Deedar", "link": "https://stackoverflow.com/users/4526322/nabeeha-deedar"}, "reply_to_user": {"reputation": 11418, "user_id": 741595, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a7a0996d629052539c4f7e05e844ed16?s=128&d=identicon&r=PG", "display_name": "Nicholas Smith", "link": "https://stackoverflow.com/users/741595/nicholas-smith"}, "edited": false, "score": 0, "creation_date": 1463578172, "post_id": 37300847, "comment_id": 62124422, "body": "Yes, i do have in myslots.h"}, {"owner": {"reputation": 11885, "user_id": 2257050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VknAq.png?s=128&g=1", "display_name": "thuga", "link": "https://stackoverflow.com/users/2257050/thuga"}, "edited": false, "score": 0, "creation_date": 1463578672, "post_id": 37300847, "comment_id": 62124769, "body": "You cannot pass arguments inside the <code>connect</code> statement. You can only do that when you emit signals: <code>emit mySignal(&amp;a);</code>."}, {"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1463578714, "post_id": 37300847, "comment_id": 62124805, "body": "You want to pass the local variable <code>a</code> as an argument to the slot? This cannot work, as the local variable no longer exists when the slot is called. What you could do is connecting the <code>clicked</code> signal to a slot in class <code>A</code>, and from this slot emit a new signal, including <code>this</code> as the argument."}], "answers": [{"comments": [{"owner": {"reputation": 3754, "user_id": 4732082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781cea048e688814961606ddf35c5881?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/4732082/anonymous"}, "edited": false, "score": 0, "creation_date": 1463594503, "post_id": 37301340, "comment_id": 62135383, "body": "Note: passing a reference to a local variable in a signal is a Bad Thing."}], "tags": [], "owner": {"reputation": 566, "user_id": 4667104, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-rGRu3uu46Vg/AAAAAAAAAAI/AAAAAAAAAS4/sFeLdQuPwdU/photo.jpg?sz=128", "display_name": "Elvis Teixeira", "link": "https://stackoverflow.com/users/4667104/elvis-teixeira"}, "is_accepted": false, "score": 2, "last_activity_date": 1463594688, "last_edit_date": 1463594688, "creation_date": 1463578649, "answer_id": 37301340, "question_id": 37300847, "link": "https://stackoverflow.com/questions/37300847/using-another-class-object-for-signal-and-slots-inside-qt/37301340#37301340", "title": "using another class object for signal and slots inside qt", "body": "<p>Some issues:</p>\n\n<p>1 - When tou derive from QObject, always put the Q_OBJECT macro in the private section of your class, do something like</p>\n\n<pre><code>class MyClass: public QObject {\n    Q_OBJECT\npublic:\n   ...\n</code></pre>\n\n<p>this Q_OBJECT macro is important for classes that have signals and slots.</p>\n\n<p>2 - In the connect statement you have to tell Qt the type of the parameters, not the names you use, that is, if you slot function is</p>\n\n<pre><code>void myslots::clickButton(A &amp;a);\n</code></pre>\n\n<p>The you connect to it with</p>\n\n<pre><code>connect(emiterObject, SIGNAL(someSignal(A)), targetObject, SLOT(clickButton(A)));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1132, "user_id": 6318750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SPLlL.jpg?s=128&g=1", "display_name": "someoneinthebox", "link": "https://stackoverflow.com/users/6318750/someoneinthebox"}, "is_accepted": false, "score": 2, "last_activity_date": 1463578687, "creation_date": 1463578687, "answer_id": 37301349, "question_id": 37300847, "link": "https://stackoverflow.com/questions/37300847/using-another-class-object-for-signal-and-slots-inside-qt/37301349#37301349", "title": "using another class object for signal and slots inside qt", "body": "<p>This will not work. In <strong>SIGNAL</strong> or <strong>SLOT</strong> must be a type, not an object or its reference. I mean this</p>\n\n<pre><code>QObject::connect(button, SIGNAL(clicked()), &amp;ms, SLOT(clickButton(&amp;a)));\n</code></pre>\n\n<p>must be</p>\n\n<pre><code>QObject::connect(button, SIGNAL(clicked()), &amp;ms, SLOT(clickButton(A)));\n</code></pre>\n\n<p>But then you must catch another error - where is A in your <strong>SIGNAL</strong>? Why do you use A in the signal at all?</p>\n"}, {"tags": [], "owner": {"reputation": 485, "user_id": 3457295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8A0LZ.jpg?s=128&g=1", "display_name": "jonjonas68", "link": "https://stackoverflow.com/users/3457295/jonjonas68"}, "is_accepted": false, "score": 1, "last_activity_date": 1463581869, "creation_date": 1463581869, "answer_id": 37302629, "question_id": 37300847, "link": "https://stackoverflow.com/questions/37300847/using-another-class-object-for-signal-and-slots-inside-qt/37302629#37302629", "title": "using another class object for signal and slots inside qt", "body": "<p>Since Qt 5.x you are able to use a lambda expression as slot.</p>\n\n<p>So your connect statement should look like:</p>\n\n<pre><code>QObject::connect(button, &amp;QPushButton::clicked, [a, ms](){ms.clickButton(&amp;a);});\n</code></pre>\n\n<p>But, using <code>a</code> and <code>ms</code> as local variables is not realy a good thing, as stated by Karsten Koop.</p>\n"}, {"tags": [], "owner": {"reputation": 3426, "user_id": 6337767, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aMhtl.jpg?s=128&g=1", "display_name": "kemis", "link": "https://stackoverflow.com/users/6337767/kemis"}, "is_accepted": false, "score": 0, "last_activity_date": 1463592581, "creation_date": 1463592581, "answer_id": 37306475, "question_id": 37300847, "link": "https://stackoverflow.com/questions/37300847/using-another-class-object-for-signal-and-slots-inside-qt/37306475#37306475", "title": "using another class object for signal and slots inside qt", "body": "<p>The error is in your :</p>\n\n<pre><code>QObject::connect(button, SIGNAL(clicked()), &amp;ms, SLOT(clickButton(&amp;a)));\n</code></pre>\n\n<p>it has to be:</p>\n\n<pre><code>QObject::connect(button, SIGNAL(clicked(A)), &amp;ms, SLOT(clickButton(A)));\n</code></pre>\n\n<p>the type that you send in the SIGNAL must be in SLOT that receives that type.</p>\n"}], "owner": {"reputation": 23, "user_id": 4526322, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/34f9b9c9ca4e42c46a651de5984cd105?s=128&d=identicon&r=PG&f=1", "display_name": "Nabeeha Deedar", "link": "https://stackoverflow.com/users/4526322/nabeeha-deedar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1335, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1463594688, "creation_date": 1463577456, "last_edit_date": 1463578440, "question_id": 37300847, "link": "https://stackoverflow.com/questions/37300847/using-another-class-object-for-signal-and-slots-inside-qt", "title": "using another class object for signal and slots inside qt", "body": "<p>Consider the following scenario:</p>\n\n<p>I have integrated QT in my c++ app. I wish to enter Data from a GUI rather than terminal. For this purpose, i created a function for QT. My dialog window consists of three text lines and a button, upon the click of which i want to call a particular method of some other class. I am having trouble with SINGAL and SLOTS.</p>\n\n<p>Consider the following files:</p>\n\n<pre><code>main.cpp has \na.h -&gt; a.cpp\n\na.cpp has \na.h\nmyslots.h\n</code></pre>\n\n<p>and the QT app method inside a.cpp as: </p>\n\n<pre><code>int A::inputData(){\n...\nA a\nmyslots ms;\nQObject::connect(button, SIGNAL(clicked()), &amp;ms, SLOT(clickButton(&amp;a)));\n....\n}\n</code></pre>\n\n<p>myslots.h has:</p>\n\n<pre><code>a.h and inherited from A as:\nclass myslots : public QObject, public A {\nQ_OBJECT\npublic slots:\n    void clickButton(A &amp;a);\nsignals:\n    void buttonClicked();\n};\n</code></pre>\n\n<p>myslots.cpp has:</p>\n\n<pre><code>myslots.h and the following method\nvoid myslots::clickButton(A &amp;a) {\n        cout &lt;&lt;\"I am called successfully\"&lt;&lt;endl;\n        a.perform_action(-2.3, 4.5, 4.4);\n        emit this-&gt;buttonClicked();\n}\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>QObject::connect: No such slot myslots::clickButton(&amp;a)\n</code></pre>\n\n<p>Actually i want to pass three double values from three textlines say: 1.3, 2.4, 4.5 to a function by clicking the button, where the function to be called is in another class that is inherited by myslots.h and accepts three parameters.</p>\n\n<p>Currently am just testing whether i am able to call the function properly or not but am not.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["android", "c++", "android-intent", "android-binder"], "comments": [{"owner": {"reputation": 507, "user_id": 4993180, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/EAtti.jpg?s=128&g=1", "display_name": "Striker", "link": "https://stackoverflow.com/users/4993180/striker"}, "edited": false, "score": 0, "creation_date": 1463609629, "post_id": 37300703, "comment_id": 62142865, "body": "All android projects should have a manifest file. The compiler will not know how to build the apk otherwise. Ex 1 has the manifest in root folder under accessories. Ex2 is just a code fragment.Ex3 has the manifest in the root directory."}, {"owner": {"reputation": 2862, "user_id": 3162918, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fbb2a2e14cbdbb41402af48b63b1504b?s=128&d=identicon&r=PG&f=1", "display_name": "bendaf", "link": "https://stackoverflow.com/users/3162918/bendaf"}, "edited": false, "score": 0, "creation_date": 1464095319, "post_id": 37300703, "comment_id": 62335324, "body": "Why you don&#39;t just call a java method and create the intent there?"}, {"owner": {"reputation": 615, "user_id": 58945, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7172db5bbd4269ad3fb60aa597ae960d?s=128&d=identicon&r=PG", "display_name": "Cumatru", "link": "https://stackoverflow.com/users/58945/cumatru"}, "edited": false, "score": 0, "creation_date": 1464174923, "post_id": 37300703, "comment_id": 62373801, "body": "for performance reasons"}, {"owner": {"reputation": 615, "user_id": 58945, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7172db5bbd4269ad3fb60aa597ae960d?s=128&d=identicon&r=PG", "display_name": "Cumatru", "link": "https://stackoverflow.com/users/58945/cumatru"}, "edited": false, "score": 0, "creation_date": 1464188705, "post_id": 37300703, "comment_id": 62384593, "body": "I&#39;ve reverse engineered the Parcel sent from Java to Java as a Bundle extra, and the difference was that it has no type for the keys. If i try to do the same from native to Java, the unpack works, i get the values, but i also get an exception like:  New hash -906279820 is before end of array hash 97440432 at index 1 key mySecondKey"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 4368743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34053e1161dc73e5207482a85df35743?s=128&d=identicon&r=PG&f=1", "display_name": "Si-hwan Kim", "link": "https://stackoverflow.com/users/4368743/si-hwan-kim"}, "is_accepted": false, "score": 0, "last_activity_date": 1499207324, "last_edit_date": 1499207324, "creation_date": 1499150084, "answer_id": 44898529, "question_id": 37300703, "link": "https://stackoverflow.com/questions/37300703/bundle-inside-intent-from-native-cpp-application-using-binder/44898529#44898529", "title": "Bundle inside Intent from Native cpp application using Binder", "body": "<p>remove code below:</p>\n\n<pre><code>data.writeInt32(VAL_STRING); /* type for key */\n</code></pre>\n\n<p>the key type is not needed because it is always a string. This field is not marshalled, then don't unmarshall it.</p>\n"}], "owner": {"reputation": 615, "user_id": 58945, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7172db5bbd4269ad3fb60aa597ae960d?s=128&d=identicon&r=PG", "display_name": "Cumatru", "link": "https://stackoverflow.com/users/58945/cumatru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 931, "favorite_count": 1, "answer_count": 1, "score": 10, "last_activity_date": 1521842625, "creation_date": 1463577156, "last_edit_date": 1521842625, "question_id": 37300703, "link": "https://stackoverflow.com/questions/37300703/bundle-inside-intent-from-native-cpp-application-using-binder", "title": "Bundle inside Intent from Native cpp application using Binder", "body": "<p>I'm trying to call an intent from native cpp code.\nBasically, from what i've understand, i have to compose a Parcel to match the exact deserialization sequence from frameworks/base/core/java/android/app/ActivityManagerNative.java ; case BROADCAST_INTENT_TRANSACTION.</p>\n\n<p>The progress so far is that i've received the intent in a Java app, but i have some problem with the bundle payload. I've debugged the Java app and it seems that it reads garbage as an int instead of reading the int which holds the type for the keys of the bundle.</p>\n\n<pre><code>W/System.err( 1386): java.lang.RuntimeException: Parcel android.os.Parcel@71aa5c5: Unmarshalling unknown type code 6815843 at offset 12\nW/System.err( 1386):    at android.os.Parcel.readValue(Parcel.java:2228)\nW/System.err( 1386):    at android.os.Parcel.readArrayMapInternal(Parcel.java:2485)\nW/System.err( 1386):    at android.os.BaseBundle.unparcel(BaseBundle.java:221\n</code></pre>\n\n<p>Here is the native code used</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;binder/IBinder.h&gt;\n#include &lt;binder/IServiceManager.h&gt;\n#include &lt;binder/Parcel.h&gt;\n#include &lt;utils/String8.h&gt;\n#include &lt;assert.h&gt;\n\nnamespace android {\n\nstatic const int BROADCAST_INTENT_TRANSACTION = IBinder::FIRST_CALL_TRANSACTION + 13;\n\nint send_intent()\n{\n    int NULL_TYPE_ID = 0;\n\n    sp&lt;IServiceManager&gt; sm = defaultServiceManager();\n    sp&lt;IBinder&gt; am = sm-&gt;checkService(String16(\"activity\"));\n    assert(am != NULL);\n\n    Parcel data, reply;\n    data.writeInterfaceToken(String16(\"android.app.IActivityManager\"));\n    data.writeStrongBinder(NULL);\n\n    /*intent*/\n\n    data.writeString16(String16(\"com.etc.etc.receiver\")); /* action */\n\n    data.writeInt32(NULL_TYPE_ID); /* mData */\n    data.writeString16(NULL, 0); /* type */\n    data.writeInt32(0); /* flags */\n    data.writeString16(NULL, 0); /* package name  */\n    data.writeString16(NULL, 0); /* ComponentName - class */\n\n    data.writeInt32(0); /*  no source bounds */\n    data.writeInt32(0); /* no categories  */\n\n    /* skip categories */\n\n    data.writeInt32(0); /* no selector  */\n    data.writeInt32(0); /* no clip data  */\n    data.writeInt32(0); /* content user hint */\n\n\n    { /* Extras Bundle */\n        data.writeInt32(0); /* dummy, will hold length */\n\n        data.writeInt32(0x4C444E42); // 'B' 'N' 'D' 'L'\n        int oldPos = data.dataPosition();\n        { /* writeMapInternal */\n            data.writeInt32(2); /* writeMapInternal - size in pairs */\n\n            data.writeInt32(VAL_STRING); /* type for key */\n            data.writeString16(String16(\"first\")); /* key */\n            data.writeInt32(VAL_INTEGER); /* type for value */\n            data.writeInt32(1337); /* value */\n\n            data.writeInt32(VAL_STRING); /* type for key */\n            data.writeString16(String16(\"second\")); /* key */\n            data.writeInt32(VAL_INTEGER);   /* type for value */\n            data.writeInt32(1338); /* value */\n\n\n        }\n        int newPos = data.dataPosition();\n        data.setDataPosition(oldPos - 8); /* eight bytes: size integer + bundle integer  */\n        int difference = newPos - oldPos;\n        data.writeInt32(difference); /* total length of the bundle */\n\n        data.setDataPosition(newPos);\n    }\n\n    data.writeString16(NULL, 0); /* resolvedType */\n    data.writeStrongBinder(NULL); /* resultTo */\n    data.writeInt32(-1);          /* resultCode */\n    data.writeString16(NULL, 0);  /* resultData */\n    data.writeInt32(-1);        /* result extras */\n\n    data.writeString16(NULL, 0);  /* grant all permissions */\n    data.writeInt32(0); /* appOp */\n    data.writeInt32(0); /* serialized */\n    data.writeInt32(0); /* sticky */\n    data.writeInt32(0); /* userid */\n\n    status_t ret = am-&gt;transact(BROADCAST_INTENT_TRANSACTION, data, &amp;reply);\n\n    if (ret == NO_ERROR)\n    {\n        int32_t exceptionCode = reply.readExceptionCode();\n        if (!exceptionCode)\n        {\n            ALOGD(\"sendBroadcast succeed\\n\");\n        }\n        else\n        {\n            // An exception was thrown back; fall through to return failure\n            ALOGE(\"sendBroadcastcaught exception %d\\n\", exceptionCode);\n        }\n    }\n    else\n    {\n        ALOGD(\"am-&gt;transact returned: %d\", ret);\n    }\n\n    return 0;\n}\n};\n</code></pre>\n"}, {"tags": ["c++", "math"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1463577734, "post_id": 37300684, "comment_id": 62124087, "body": "<code>2&#47;(this-&gt;daysInTrading_ + 1)</code> -- This truncates since it is integer division.  Is this what you want to do?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5448913"}, "edited": false, "score": 0, "creation_date": 1463583384, "post_id": 37301155, "comment_id": 62128392, "body": "Thank you very much for your help, I have read the following paper: <a href=\"http://www.cis.umac.mo/~fstasp/paper/jetwi2011.pdf\" rel=\"nofollow noreferrer\">cis.umac.mo/~fstasp/paper/jetwi2011.pdf</a> about Trend Following Algorithms and saw the principle on page 3. Also, what value should your a take? Truly a random value between 0 and 1 or is there an explanation behind it?"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1463583540, "post_id": 37301155, "comment_id": 62128538, "body": "@ChristopherK. I didn&#39;t mean random as in random, but in whatever you choose. It depends really on what you want to have. See the quote (I use <code>a</code>, Wikipedia uses alpha)"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1463583591, "post_id": 37301155, "comment_id": 62128577, "body": "@ChristopherK. Use the algorithm you linked, it might be more accurate than wikipedia :)"}], "tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": false, "score": 1, "last_activity_date": 1463583612, "last_edit_date": 1463583612, "creation_date": 1463578240, "answer_id": 37301155, "question_id": 37300684, "link": "https://stackoverflow.com/questions/37300684/implementing-exponential-moving-average-in-c/37301155#37301155", "title": "Implementing Exponential Moving Average in C++", "body": "<p>The operation is wrong, as you noticed.</p>\n\n<p><em><strong>Disclaimer</strong></em> I got this algorithm from <a href=\"https://en.wikipedia.org/wiki/Moving_average\" rel=\"nofollow\">wikipedia</a>, and as such might no be accurate. <a href=\"http://www.cis.umac.mo/~fstasp/paper/jetwi2011.pdf\" rel=\"nofollow\">Here</a> (page 3) might be a better one, but I can't judge, I never used those algorithms and so have no idea what I'm talking about :)</p>\n\n<blockquote>\n  <p><code>c(EMA) = y(EMA) + a * (c(price) - y(EMA))</code></p>\n  \n  <ul>\n  <li><code>c(EMA)</code> is current EMA</li>\n  <li><code>y(EMA)</code> is previous EMA</li>\n  <li><code>a</code> is some \"random\" value between 0 and 1</li>\n  <li><code>c(price)</code> is current price</li>\n  </ul>\n</blockquote>\n\n<p>But you did almost the same thing:</p>\n\n<blockquote>\n  <p><code>c(EMA) = (c(price) - y(EMA) * b) + y(EMA)</code></p>\n</blockquote>\n\n<p>I don't know why you did <code>2 / daysInTrading_ + 1</code>, but this will not always be a value between 0 and 1 (actually, it might even be most of the time 0, because those are all intergers).</p>\n\n<p>You put a parenthesis at the wrong place (after <code>b</code>, and not after <code>y(EMA)</code>).</p>\n\n<p>So the operation will now look like this:</p>\n\n<p><strong><code>lastEMA_ + 0.5 * (currentStock_ - lastEMA_)</code></strong></p>\n\n<hr>\n\n<p>For the first <code>lastEMA_</code>, according to <a href=\"https://en.wikipedia.org/wiki/Moving_average\" rel=\"nofollow\">Wikipedia</a>:</p>\n\n<blockquote>\n  <p>S<sub>1</sub> is undefined. S<sub>1</sub> may be initialized in a number of different ways, most commonly by setting S<sub>11</sub> [<em>First element in the list</em>], though other techniques exist, such as setting S<sub>1</sub> to an average of the first 4 or 5 observations. </p>\n  \n  <p>The importance of the S<sub>1</sub> initialisations effect on the resultant moving average depends on \u03b1; smaller \u03b1 values make the choice of S<sub>1</sub> relatively more important than larger \u03b1 values, since a higher \u03b1 discounts older observations faster.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 56, "user_id": 6101858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18a0da4301edbb2b630b52e694d518ef?s=128&d=identicon&r=PG&f=1", "display_name": "Seth Merickel", "link": "https://stackoverflow.com/users/6101858/seth-merickel"}, "is_accepted": true, "score": 4, "last_activity_date": 1463584738, "creation_date": 1463584738, "answer_id": 37303818, "question_id": 37300684, "link": "https://stackoverflow.com/questions/37300684/implementing-exponential-moving-average-in-c/37303818#37303818", "title": "Implementing Exponential Moving Average in C++", "body": "<p>I believe you are missing a parentheses in you calcEMA function.  It helps to break the expression up into smaller expressions with temporary variables to hold intermediate results.</p>\n\n<pre><code>int Trade::calcEMA()\n{       \n   auto mult = 2/(timePeriod_ + 1);\n   auto rslt = (currentStock_ - lastEMA_) * mult + lastEMA_;      \n   return rslt;\n}\n</code></pre>\n\n<p>Also, as PaulMcKenzie pointed out in the comments, you are using ints to do floating point math.  You should consider using floats or doubles to avoid truncation. </p>\n\n<p>An EMA like yours is defined for a time period, called timePeriod_ above.  While  daysInTrading_ is less or equal to timePeriod_, lastEMA_ should just be set to a normal average.  Once daysInTrading_ is greater than your timePeriod_ you can start calling your calcEMA function with lastEMA_ properly initialized.  Remember to update lastEMA_ after each call to calcEMA.  Here is a possible implementation:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;list&gt;\n#include &lt;iostream&gt;\n\n// calculate a moving average\ndouble calcMA(double previousAverage, unsigned int previousNumDays, double newStock)\n{\n   auto rslt = previousNumDays * previousAverage + newStock;\n   return rslt / (previousNumDays + 1.0);\n}\n\n// calculate an exponential moving average\ndouble calcEMA(double previousAverage, int timePeriod, double newStock)\n{\n   auto mult = 2.0 / (timePeriod + 1.0);\n   auto rslt = (newStock - previousAverage) * mult + previousAverage;\n   return rslt;\n}\n\nclass Trade\n{\n   unsigned int timePeriod_ = 5;\n   double lastMA_ = 0.0;\n   std::list&lt;double&gt; stockPrices_;\n\npublic:\n\n   void addStock(double newStock)\n   {\n      stockPrices_.push_back(newStock);\n      auto num_days = stockPrices_.size(); \n\n      if (num_days &lt;= timePeriod_)\n         lastMA_ = calcMA(lastMA_, num_days - 1, newStock);\n      else\n         lastMA_ = calcEMA(lastMA_, num_days - 1, newStock);\n   }\n\n   double getAverage() const { return lastMA_; }\n};\n\nint main()\n{\n   std::vector&lt;double&gt; stocks =\n     {1000, 1100, 1200, 1300, 1400, 1500, 1400, 1300, 1200, 1100, 1000};\n\n   Trade trade;\n   for (auto stock : stocks)\n      trade.addStock(stock);\n\n   std::cout &lt;&lt; \"Average: \" &lt;&lt; trade.getAverage() &lt;&lt; std::endl;\n\n   return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 347, "user_id": 3703564, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ce08c066d9952bec8c92bda3928d58a?s=128&d=identicon&r=PG&f=1", "display_name": "theGreatKatzul", "link": "https://stackoverflow.com/users/3703564/thegreatkatzul"}, "is_accepted": false, "score": 1, "last_activity_date": 1485636986, "creation_date": 1485636986, "answer_id": 41914751, "question_id": 37300684, "link": "https://stackoverflow.com/questions/37300684/implementing-exponential-moving-average-in-c/41914751#41914751", "title": "Implementing Exponential Moving Average in C++", "body": "<p>There are generally two accepted forms of EMA.</p>\n\n<p>The traditional:</p>\n\n<pre><code>m = 2/(1+n)                               // where n &gt;= 1\nEMA = m * currentPrice + (1-m) * previousEMA\n\nrf the Wilder:\n\nm = 1/n                                   // where n &gt;= 1\nEMA Wilder = m * currentPrice + (1-m) * previousEMA\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5448913"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8688, "favorite_count": 1, "accepted_answer_id": 37303818, "answer_count": 3, "score": 4, "last_activity_date": 1485636986, "creation_date": 1463577119, "question_id": 37300684, "link": "https://stackoverflow.com/questions/37300684/implementing-exponential-moving-average-in-c", "title": "Implementing Exponential Moving Average in C++", "body": "<p>I am developing a small trading robot as an exercise. He receives stock prices day after day (represented as iterations).</p>\n\n<p>Here's what my <code>Trade</code> class looks like:</p>\n\n<pre><code>class   Trade\n{\nprivate:\n  int                   capital_;\n  int                   days_; // Total number of days of available stock prices                                       \n  int                   daysInTrading_; // Increments as days go by.                                                   \n  std::list&lt;int&gt;        stockPrices_; // Contains stock prices day after day.                                          \n  int                   currentStock_; // Current stock we are dealing with.                                           \n  int                   lastStock_; // Last stock dealt with                                                           \n  int                   trend_; // Either {-1; 0; 1} depending on the trend.                                           \n  int                   numOfStocks_; // Number of stocks in our possession\n  int                   EMA_; // Exponential Moving Average                                                            \n  int                   lastEMA_; // Last EMA                                                                          \n\npublic:\n    // functions\n};\n</code></pre>\n\n<p>As you can see from my last two attributes, I wish to implement an Exponential Moving Average as part of a Trend Following Algorithm.</p>\n\n<p>But I think I didn't quite understand how to implement it; here's my <code>calcEMA</code> function that simply calculates the <code>EMA</code>:</p>\n\n<pre><code>int     Trade::calcEMA()\n{\n  return ((this-&gt;currentStock_ - this-&gt;lastEMA_\n           * (2/(this-&gt;daysInTrading_ + 1)))\n          + this-&gt;lastEMA_);\n}\n</code></pre>\n\n<p>But when my stock values (passed in a file) are like such:</p>\n\n<pre><code>1000, 1100, 1200, 1300, 1400, 1500, 1400, 1300, 1200, 1100, 1000\n</code></pre>\n\n<p>As to make sure my EMA makes sense, and well... it does not !</p>\n\n<p>Where did I go wrong on the operation?</p>\n\n<p>Aditionally, what value should I give <code>lastEMA</code> if it's the first time I call <code>calcEMA</code>?</p>\n"}]