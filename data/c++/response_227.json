[{"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 1477, "user_id": 5899776, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/64b8e28377778d1b8ad57198ba46c319?s=128&d=identicon&r=PG&f=1", "display_name": "van dench", "link": "https://stackoverflow.com/users/5899776/van-dench"}, "edited": false, "score": 0, "creation_date": 1557964503, "post_id": 56159032, "comment_id": 98946669, "body": "This code won\u2019t compile."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1557971179, "post_id": 56159032, "comment_id": 98947750, "body": "<code>int sum = std::accumulate(magic_square[i].begin(), magic_square[i].end(), 0);</code> -- That replaces the entire inner loop."}], "answers": [{"comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1557971054, "post_id": 56159306, "comment_id": 98947737, "body": "<code>auto sum= 0; &#47;&#47; Auto with integer defaults to int     for(const auto&amp; number: row) {         sum+= number;</code> -- You should mention that this entire loop could have been replaced using <code>std::accumulate</code>."}, {"owner": {"reputation": 963, "user_id": 7471267, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4GGWfiRBWAY/AAAAAAAAAAI/AAAAAAAAAFo/awzT9uvFc5E/photo.jpg?sz=128", "display_name": "Mirko", "link": "https://stackoverflow.com/users/7471267/mirko"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1557972987, "post_id": 56159306, "comment_id": 98948017, "body": "@PaulMcKenzie That&#39;s true, I though of it, but as he was explicitly asking for range based loops, I didn&#39;t."}], "tags": [], "owner": {"reputation": 963, "user_id": 7471267, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4GGWfiRBWAY/AAAAAAAAAAI/AAAAAAAAAFo/awzT9uvFc5E/photo.jpg?sz=128", "display_name": "Mirko", "link": "https://stackoverflow.com/users/7471267/mirko"}, "is_accepted": true, "score": 0, "last_activity_date": 1557966815, "creation_date": 1557966815, "answer_id": 56159306, "question_id": 56159032, "link": "https://stackoverflow.com/questions/56159032/how-do-i-rewrite-this-code-using-range-based-for-loops/56159306#56159306", "title": "How do I rewrite this code using range-based for loops?", "body": "<p>There you go:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nint main()\n{\n  static constexpr auto SUM= 34;\n  vector&lt;vector&lt;int&gt;&gt; magic_square= {\n    { 1, 14,  4, 15},\n    { 8, 11,  5, 10}, \n    {13,  2, 16,  3},\n    {12,  7,  9,  6}\n  };\n\n  for (const auto&amp; row: magic_square) { // auto not to type the type, \n                                        // const because you do read only and &amp;\n                                        // to use reference and avoid copying\n    auto sum= 0; // Auto with integer defaults to int\n    for(const auto&amp; number: row) { // Now for every number on the row\n        sum+= number;\n    }\n    if (sum != SUM) {\n        return 1;\n    }\n  }\n  cout &lt;&lt; \"Square is magic\" &lt;&lt; endl;\n  return 0;\n}\n</code></pre>\n\n<p>You can run it in: <a href=\"https://ideone.com/JQ346v\" rel=\"nofollow noreferrer\">https://ideone.com/JQ346v</a></p>\n"}, {"tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": false, "score": 1, "last_activity_date": 1557971521, "creation_date": 1557971521, "answer_id": 56159741, "question_id": 56159032, "link": "https://stackoverflow.com/questions/56159032/how-do-i-rewrite-this-code-using-range-based-for-loops/56159741#56159741", "title": "How do I rewrite this code using range-based for loops?", "body": "<p>You could eliminate the inner loop altogether by using <code>std::accumulate</code> and simply have the outer loop be range-based:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;numeric&gt;\n\nint main()\n{ \n   std::vector&lt;std::vector&lt;int&gt;&gt; magic_square = {{1, 14, 4, 15}, {8, 11, 5, 10}, {13, 2, 16, 3}, {12, 7, 9, 6}};\n   for (auto&amp; v : magic_square)\n   {\n      if ( std::accumulate(v.begin(), v.end(), 0) != 34 )\n        return-1;\n   }\n   std::cout &lt;&lt; \"Square is magic\\n\";\n   return 0;\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/ac1410d8719d154e\" rel=\"nofollow noreferrer\">Live Example</a></p>\n"}], "owner": {"reputation": 57, "user_id": 11472545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2740cb72c9dd2364d1ac0842ace6d67?s=128&d=identicon&r=PG&f=1", "display_name": "need_halp", "link": "https://stackoverflow.com/users/11472545/need-halp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 56159306, "answer_count": 2, "score": 0, "last_activity_date": 1557971521, "creation_date": 1557964150, "last_edit_date": 1557966124, "question_id": 56159032, "link": "https://stackoverflow.com/questions/56159032/how-do-i-rewrite-this-code-using-range-based-for-loops", "title": "How do I rewrite this code using range-based for loops?", "body": "<p>I am new to C++ and now I have been introduced to C++11. I find the syntax very different and I need some help rewriting the following code.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nint main()\n{ \n  vector&lt;vector&lt;int&gt; &gt; magic_square ={{1, 14, 4, 15}, {8, 11, 5, 10}, \n{13, 2, 16, 3}, {12, 7, 9, 6}};\n  for(inti=0; i&lt;magic_square.size(); i++)\n {\n   int sum(0); \n   for(intj=0; j&lt;magic_square[i].size(); j++)\n        sum += magic_square[i][j];\n   if(sum!=34)\n        return-1;\n}\n   cout &lt;&lt; \"Square is magic\" &lt;&lt; endl;\n   return0;\n}\n</code></pre>\n"}, {"tags": ["python", "c++", "pickle", "swig", "built-in"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1558010698, "post_id": 56159001, "comment_id": 98964244, "body": "Can you also post the generated mymodule.py?"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1558010945, "post_id": 56159001, "comment_id": 98964428, "body": "As an aside, you may need <code>%newobject A_str</code> to avoid a memory leak"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1558011530, "post_id": 56159001, "comment_id": 98964820, "body": "You may also want to check the return of <code>PyTuple_New</code> to make sure it didn&#39;t return <code>NULL</code>. Also, there is a memory leak there."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1558011669, "post_id": 56159001, "comment_id": 98964912, "body": "In <code>__getstate__</code> and <code>__setstate__</code>, I&#39;m surprised that SWIG didn&#39;t have any errors because <code>*self</code> should be <code>$self</code>"}, {"owner": {"reputation": 25, "user_id": 11503327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce9c9cb33b430948811a32c5431c9fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Ratafia", "link": "https://stackoverflow.com/users/11503327/ratafia"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1558022295, "post_id": 56159001, "comment_id": 98971451, "body": "You&#39;re right. I tried to focus on the issue, but for production needs, all the checks you mention would be present. Thanks."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1558022618, "post_id": 56159001, "comment_id": 98971611, "body": "Thanks for the update. I don&#39;t see <code>class A</code> defined in <code>mymodule.py</code>, though"}, {"owner": {"reputation": 25, "user_id": 11503327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce9c9cb33b430948811a32c5431c9fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Ratafia", "link": "https://stackoverflow.com/users/11503327/ratafia"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1558025814, "post_id": 56159001, "comment_id": 98973147, "body": "I think that class A only lives in the _mymodule.so library.since it is a builtin. Am i wrong ?"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1558026249, "post_id": 56159001, "comment_id": 98973341, "body": "Sorry I didn&#39;t realize you were using <code>-builtin</code>. Can I see what it looks like without it?"}, {"owner": {"reputation": 25, "user_id": 11503327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce9c9cb33b430948811a32c5431c9fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Ratafia", "link": "https://stackoverflow.com/users/11503327/ratafia"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1558028940, "post_id": 56159001, "comment_id": 98974635, "body": "I&#39;ve edited the post as requested. I must mention that without the -builtin flag, everything works fine. So the problem seems to be in the usage of both the buitlin feature and pickle."}], "owner": {"reputation": 25, "user_id": 11503327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce9c9cb33b430948811a32c5431c9fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Ratafia", "link": "https://stackoverflow.com/users/11503327/ratafia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 327, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1558028788, "creation_date": 1557963870, "last_edit_date": 1558028788, "question_id": 56159001, "link": "https://stackoverflow.com/questions/56159001/fail-to-serialize-a-c-class-wrapped-with-swig-using-pickle", "title": "Fail to serialize a C++ class wrapped with SWIG using pickle", "body": "<p>For the needs of my daily work, I have to wrap with SWIG some C++ classes located in a DSO. Everything was fine until I decided for performance reasons to use Python buffer protocol, that leads me to use the -builtin flag of the SWIG tool. I've managed to get thing working but when I try to serialize/deserialize with pickle my wrapped classes, I get the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"test.py\", line 23, in &lt;module&gt;\n    s = pickle.dumps(a) # crash here\n_pickle.PicklingError: Can't pickle &lt;class 'mymodule.A'&gt;: attribute lookup A on imp failed\n</code></pre>\n\n<p>Here is a MWE exposing the issue.</p>\n\n<p>First, the SWIG interface file <code>mymodule.i</code> wraps an inlined C++ class A.</p>\n\n<pre><code>// File mymodule.i\n%module mymodule\n\n%feature(\"python:tp_str\")  A \"A_str\" ;\n%feature(\"python:tp_repr\") A \"A_str\" ;\n%{\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n\n// forward declarations\nclass A ;\nstatic std::ostream &amp; operator &lt;&lt; (std::ostream &amp;, const A &amp;) ;\nstatic int  A_getI(const A &amp;) ;\nstatic void A_setI(A &amp;, int) ;\n\nclass A\n{\n  int i_ ;\npublic:\n  A(int i) : i_(i) {}\n  friend std::ostream &amp; operator &lt;&lt; (std::ostream &amp;, const A &amp;) ;\n  friend int  A_getI(const A &amp;) ;\n  friend void A_setI(A &amp;, int) ;\n} ;\n\nstd::ostream &amp; operator &lt;&lt; (std::ostream &amp; os, const A &amp; a)\n{\n  return os &lt;&lt; \"A(\" &lt;&lt; a.i_ &lt;&lt; \")\" ;\n}\n\nint A_getI(const A &amp; a)\n{\n  return a.i_ ;\n}\n\nvoid A_setI(A &amp; a, int i)\n{\n  a.i_ = i ;\n}\n\nstatic PyObject * A_str(SwigPyObject * obj)\n{\n  A * p_a = reinterpret_cast&lt;A *&gt;(obj-&gt;ptr) ;\n  std::ostringstream oss ;\n  oss &lt;&lt; *p_a ;\n  return PyUnicode_FromString(oss.str().c_str()) ;\n}\n\n%}\n\nclass A\n{\npublic:\n  A(int i) ;\n} ;\n\n%extend A\n{\n  PyObject * __getstate__()\n  {\n    PyObject * tuple = PyTuple_New(1) ;\n    PyTuple_SetItem(tuple, 0, PyLong_FromLong(A_getI(*self))) ;\n    return tuple ;\n  }\n  void __setstate__(PyObject * state)\n  {\n    if (PyTuple_Check(state)) {\n      PyObject * val = PyTuple_GetItem(state, 0) ;\n      if (PyLong_Check(val)) {\n        int i = (int) PyLong_AsLong(val) ;\n        A_setI(*self, i) ;\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>Then, the <code>test.py</code> I use:</p>\n\n<pre><code>#!/usr/bin/env python3\n# File: test.py\n\nfrom mymodule import *\n\n# a first object a\na = A(10)\nprint(\"a=\",a)\n\n# we manually get the internal state of a\nsa = a.__getstate__()\nprint(\"sa=\",sa)\n\n# a second object b with a different internal state\nb = A(-1)\nprint(\"b=\",b)\n\n# we manually set a's internal state to b\nb.__setstate__(sa)\nprint(\"b=\",b)\n\n# now we try to dump a's state using pickle...\nimport pickle\ns = pickle.dumps(a) # crash here\nprint(s)\n</code></pre>\n\n<p>I compile the module:</p>\n\n<pre><code>swig3.0 -python -py3 -c++ -builtin -o mymodulePYTHON_wrap.cxx mymodule.i\ng++ -D_mymodule_EXPORTS -DSWIG_REV=\"\" -fPIC -I/usr/include/python3.4m -std=c++11 -o mymodulePYTHON_wrap.cxx.o -c mymodulePYTHON_wrap.cxx\ng++ -fPIC -shared -Wl,-soname,_mymodule.so -o _mymodule.so mymodulePYTHON_wrap.cxx.o\n</code></pre>\n\n<p>I run the test:</p>\n\n<pre><code>python3 test.py\n</code></pre>\n\n<p>And I get the following output:</p>\n\n<pre><code>a= A(10)\nsa= (10,)\nb= A(-1)\nb= A(10)\nTraceback (most recent call last):\n  File \"test.py\", line 23, in &lt;module&gt;\n    s = pickle.dumps(a) # crash here\n_pickle.PicklingError: Can't pickle &lt;class 'mymodule.A'&gt;: attribute lookup A on imp failed\n</code></pre>\n\n<p><strong>What is the reason of the error ?</strong></p>\n\n<p>How can I solve my problem ?</p>\n\n<p>I've also tried to:</p>\n\n<ul>\n<li>read the SWIG and the Python documentation</li>\n<li>search the Web</li>\n<li>read most of the articles related to this problem on SO but without better knowledge (the closer to my problem seems to be <a href=\"https://stackoverflow.com/questions/32295313/serialize-swig-extension-with-dill\">Serialize SWIG extension with dill</a> except that Mark McKems' answer leaves me hopeless, <a href=\"https://stackoverflow.com/questions/19855156/whats-the-exact-usage-of-reduce-in-pickler/19874769#19874769\">What's the exact usage of __reduce__ in Pickler</a>, <a href=\"https://stackoverflow.com/questions/36301322/pickle-cython-class-with-c-pointers\">Pickle Cython Class with C pointers</a>)</li>\n<li>use a <code>__reduce__</code> method returning what's expected (it worked) but the same error occurs</li>\n<li>use dill instead of pickle, the same</li>\n<li>change the protocol to the highest, the same</li>\n</ul>\n\n<p>The versions of the my tools are quite old because I have to use a Debian jessie:</p>\n\n<ul>\n<li>Python 3.4.2</li>\n<li>G++ 4.9.2</li>\n<li>SWIG 3.0.2</li>\n</ul>\n\n<p>I'm stuck. Any help would be appreciated.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>The <code>mymodule.py</code> file generated by SWIG (WITH <code>-builtin</code> flag):</p>\n\n<pre><code># This file was automatically generated by SWIG (http://www.swig.org).\n# Version 3.0.2\n#\n# Do not make changes to this file unless you know what you are doing--modify\n# the SWIG interface file instead.\n\n\n\n\n\nfrom sys import version_info\nif version_info &gt;= (2,6,0):\n    def swig_import_helper():\n        from os.path import dirname\n        import imp\n        fp = None\n        try:\n            fp, pathname, description = imp.find_module('_mymodule', [dirname(__file__)])\n        except ImportError:\n            import _mymodule\n            return _mymodule\n        if fp is not None:\n            try:\n                _mod = imp.load_module('_mymodule', fp, pathname, description)\n            finally:\n                fp.close()\n            return _mod\n    _mymodule = swig_import_helper()\n    del swig_import_helper\nelse:\n    import _mymodule\ndel version_info\nfrom _mymodule import *\ntry:\n    _swig_property = property\nexcept NameError:\n    pass # Python &lt; 2.2 doesn't have 'property'.\ndef _swig_setattr_nondynamic(self,class_type,name,value,static=1):\n    if (name == \"thisown\"): return self.this.own(value)\n    if (name == \"this\"):\n        if type(value).__name__ == 'SwigPyObject':\n            self.__dict__[name] = value\n            return\n    method = class_type.__swig_setmethods__.get(name,None)\n    if method: return method(self,value)\n    if (not static):\n        self.__dict__[name] = value\n    else:\n        raise AttributeError(\"You cannot add attributes to %s\" % self)\n\ndef _swig_setattr(self,class_type,name,value):\n    return _swig_setattr_nondynamic(self,class_type,name,value,0)\n\ndef _swig_getattr(self,class_type,name):\n    if (name == \"thisown\"): return self.this.own()\n    method = class_type.__swig_getmethods__.get(name,None)\n    if method: return method(self)\n    raise AttributeError(name)\n\ndef _swig_repr(self):\n    try: strthis = \"proxy of \" + self.this.__repr__()\n    except: strthis = \"\"\n    return \"&lt;%s.%s; %s &gt;\" % (self.__class__.__module__, self.__class__.__name__, strthis,)\n\ntry:\n    _object = object\n    _newclass = 1\nexcept AttributeError:\n    class _object : pass\n    _newclass = 0\n\n\n\n# This file is compatible with both classic and new-style classes.\n</code></pre>\n\n<p>The <code>mymodule.py</code> file WITHOUT <code>-builtin</code> SWIG flag:</p>\n\n<pre><code># This file was automatically generated by SWIG (http://www.swig.org).\n# Version 3.0.2\n#\n# Do not make changes to this file unless you know what you are doing--modify\n# the SWIG interface file instead.\n\n\n\n\n\nfrom sys import version_info\nif version_info &gt;= (2,6,0):\n    def swig_import_helper():\n        from os.path import dirname\n        import imp\n        fp = None\n        try:\n            fp, pathname, description = imp.find_module('_mymodule', [dirname(__file__)])\n        except ImportError:\n            import _mymodule\n            return _mymodule\n        if fp is not None:\n            try:\n                _mod = imp.load_module('_mymodule', fp, pathname, description)\n            finally:\n                fp.close()\n            return _mod\n    _mymodule = swig_import_helper()\n    del swig_import_helper\nelse:\n    import _mymodule\ndel version_info\ntry:\n    _swig_property = property\nexcept NameError:\n    pass # Python &lt; 2.2 doesn't have 'property'.\ndef _swig_setattr_nondynamic(self,class_type,name,value,static=1):\n    if (name == \"thisown\"): return self.this.own(value)\n    if (name == \"this\"):\n        if type(value).__name__ == 'SwigPyObject':\n            self.__dict__[name] = value\n            return\n    method = class_type.__swig_setmethods__.get(name,None)\n    if method: return method(self,value)\n    if (not static):\n        self.__dict__[name] = value\n    else:\n        raise AttributeError(\"You cannot add attributes to %s\" % self)\n\ndef _swig_setattr(self,class_type,name,value):\n    return _swig_setattr_nondynamic(self,class_type,name,value,0)\n\ndef _swig_getattr(self,class_type,name):\n    if (name == \"thisown\"): return self.this.own()\n    method = class_type.__swig_getmethods__.get(name,None)\n    if method: return method(self)\n    raise AttributeError(name)\n\ndef _swig_repr(self):\n    try: strthis = \"proxy of \" + self.this.__repr__()\n    except: strthis = \"\"\n    return \"&lt;%s.%s; %s &gt;\" % (self.__class__.__module__, self.__class__.__name__, strthis,)\n\ntry:\n    _object = object\n    _newclass = 1\nexcept AttributeError:\n    class _object : pass\n    _newclass = 0\n\n\nclass A(_object):\n    __swig_setmethods__ = {}\n    __setattr__ = lambda self, name, value: _swig_setattr(self, A, name, value)\n    __swig_getmethods__ = {}\n    __getattr__ = lambda self, name: _swig_getattr(self, A, name)\n    __repr__ = _swig_repr\n    def __init__(self, *args): \n        this = _mymodule.new_A(*args)\n        try: self.this.append(this)\n        except: self.this = this\n    def __getstate__(self) -&gt; \"PyObject *\" : return _mymodule.A___getstate__(self)\n    def __setstate__(self, *args) -&gt; \"void\" : return _mymodule.A___setstate__(self, *args)\n    __swig_destroy__ = _mymodule.delete_A\n    __del__ = lambda self : None;\nA_swigregister = _mymodule.A_swigregister\nA_swigregister(A)\n\n# This file is compatible with both classic and new-style classes.\n</code></pre>\n"}, {"tags": ["c++", "sdl"], "comments": [{"owner": {"reputation": 11664, "user_id": 207791, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c9ffc6f77d7f8ee002acd0e9ebc872f2?s=128&d=identicon&r=PG", "display_name": "Victor Sergienko", "link": "https://stackoverflow.com/users/207791/victor-sergienko"}, "edited": false, "score": 0, "creation_date": 1557962724, "post_id": 56158759, "comment_id": 98946315, "body": "I&#39;m afraid if you decided to manage windows, then SDL leaves it up to you. What if you want to open another window when last one is closed? SDL will emit the signal for single-window apps, or when a &quot;quit application&quot; hotkey is present, and that&#39;s it."}, {"owner": {"reputation": 675, "user_id": 3259789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a55f2fc4903a6c4cc3d4554c7a970d41?s=128&d=identicon&r=PG&f=1", "display_name": "rAndom69", "link": "https://stackoverflow.com/users/3259789/random69"}, "edited": false, "score": 0, "creation_date": 1557965011, "post_id": 56158759, "comment_id": 98946759, "body": "Android based development: Memory leaks are solved when application (process) quits. Application should not attempt to free used memory as that is more CPU expensive. In other words don&#39;t attempt to solve stuff which doesn&#39;t matter. We were tought many invalid things in classes."}, {"owner": {"reputation": 3116, "user_id": 2498790, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/991601e5d41d9d84ab7e196382ea8108?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2498790/alex"}, "edited": false, "score": 0, "creation_date": 1557968785, "post_id": 56158759, "comment_id": 98947339, "body": "there is no leak, is a <code>double free</code> (<code>in main () at main.cpp:36</code>), perhaps the windows are already destroyed, see the updated answer, good luck"}], "answers": [{"comments": [{"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1557964673, "post_id": 56159070, "comment_id": 98946699, "body": "You appear to be confusing the <code>SDL_QUIT</code> event with the unrelated <code>SDL_Quit</code> function."}, {"owner": {"reputation": 3116, "user_id": 2498790, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/991601e5d41d9d84ab7e196382ea8108?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2498790/alex"}, "reply_to_user": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1557965685, "post_id": 56159070, "comment_id": 98946872, "body": "I don&#39;t, I think <code>SDL_Quit()</code> is what inject a <code>SDL_QUIT</code> event (I&#39;m checking), but apparently there could be different sources, are you ignoring or filtering the quit event?"}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1557966115, "post_id": 56159070, "comment_id": 98946946, "body": "You aren&#39;t allowed to check for events anymore after you choose to call <code>SDL_Quit()</code>."}], "tags": [], "owner": {"reputation": 3116, "user_id": 2498790, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/991601e5d41d9d84ab7e196382ea8108?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2498790/alex"}, "is_accepted": false, "score": 0, "last_activity_date": 1557967571, "last_edit_date": 1592644375, "creation_date": 1557964487, "answer_id": 56159070, "question_id": 56158759, "link": "https://stackoverflow.com/questions/56158759/why-does-sdl-doesnt-emit-sdl-quit-when-last-windows-closed/56159070#56159070", "title": "Why does SDL doesn&#39;t emit SDL_QUIT when last windows closed", "body": "<p>I think <code>SDL_QUIT</code> is only an hook called if you call <a href=\"https://wiki.libsdl.org/SDL_Quit\" rel=\"nofollow noreferrer\">SDL_Quit()</a>, to give the user the opportunity to do some <em>quit stuff</em>, the manual:</p>\n<blockquote>\n<p>You should call this function even if you have already shutdown each initialized subsystem with SDL_QuitSubSystem(). It is safe to call this function even in the case of errors in initialization</p>\n<p>You can use this function with atexit() to ensure that it is run when your application is shutdown, but it is not wise to do this from a library or other dynamically loaded code</p>\n</blockquote>\n<p>To catch a window close event see <a href=\"https://wiki.libsdl.org/SDL_WindowEvent\" rel=\"nofollow noreferrer\">SDL_WindowEvent</a>, <code>SDL_WINDOWEVENT</code> and <code>SDL_WINDOWEVENT_CLOSE</code>, the id of the closing window is given as argument.</p>\n<pre><code> *  \\file SDL_quit.h\n *\n *  An ::SDL_QUIT event is generated when the user tries to close the application\n *  window.  If it is ignored or filtered out, the window will remain open.\n *  If it is not ignored or filtered, it is queued normally and the window\n *  is allowed to close.  When the window is closed, screen updates will\n *  complete, but have no effect.\n *\n *  SDL_Init() installs signal handlers for SIGINT (keyboard interrupt)\n *  and SIGTERM (system termination request), if handlers do not already\n *  exist, that generate ::SDL_QUIT events as well.  There is no way\n *  to determine the cause of an ::SDL_QUIT event, but setting a signal\n *  handler in your application will override the default generation of\n *  quit events for that signal.\n *\n *  \\sa SDL_Quit()\n</code></pre>\n<p><a href=\"https://wiki.libsdl.org/SDL_EventType#SDL_QUIT\" rel=\"nofollow noreferrer\">SDL_EventType#SDL_QUIT</a></p>\n<blockquote>\n<p>An SDL_QUIT event is generated when the user clicks on the close button of the last existing window.</p>\n</blockquote>\n<p>You shouldn't call <code>SDL_Quit()</code> in the destructor, but only once before leaving the application (is suggested to use it with <code>atexit()</code>)</p>\n<pre><code>--- a/main.cpp\n+++ b/main.cpp\n@@ -32,17 +32,18 @@ int main() {\n \n     }\n \n-\n     // Delete Windows\n-    delete window;\n-    delete window2;\n-    delete window3;\n+    // delete window;\n+    // delete window2;\n+    // delete window3;\n \n     // reset pointer\n     window = nullptr;\n     window2 = nullptr;\n     window3 = nullptr;\n \n+    SDL_Quit();\n+\n     // Close Program properly\n     return 0;  \n }\n--- a/video/window.cpp\n+++ b/video/window.cpp\n@@ -51,7 +51,7 @@ Window::~Window() {\n     // Shutdown if last window closed\n     if(this-&gt;windows.empty()) {\n         // Shutdown Video System\n-        SDL_Quit();\n+        // SDL_Quit();\n         std::cout &lt;&lt; &quot;shuted down Video&quot; &lt;&lt; std::endl;\n     }\n }\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user11503395"}, "is_accepted": true, "score": 1, "last_activity_date": 1557997668, "creation_date": 1557997668, "answer_id": 56164842, "question_id": 56158759, "link": "https://stackoverflow.com/questions/56158759/why-does-sdl-doesnt-emit-sdl-quit-when-last-windows-closed/56164842#56164842", "title": "Why does SDL doesn&#39;t emit SDL_QUIT when last windows closed", "body": "<p>Thank you o11c,</p>\n\n<p>Your answer was the riddles solution.\nI just put SDL_Quit() out of the Destructor. This obviously blocked the Event Handler to catch SDL_QUIT. So I put it to the constructor in atexit()</p>\n\n<p>After that (don't know why before not) I got an Segfault when deleting the window pointer in main. I deleted that and just set them all to nullptr.</p>\n\n<p>Now the WindowManager works properly. Thank you for your help</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11503395"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 490, "favorite_count": 0, "accepted_answer_id": 56164842, "answer_count": 2, "score": 2, "last_activity_date": 1557997668, "creation_date": 1557961820, "last_edit_date": 1557967545, "question_id": 56158759, "link": "https://stackoverflow.com/questions/56158759/why-does-sdl-doesnt-emit-sdl-quit-when-last-windows-closed", "title": "Why does SDL doesn&#39;t emit SDL_QUIT when last windows closed", "body": "<p>I'm writing a Game Engine just for practice but I still stuck with the first chellange. The Window Manager.</p>\n\n<p><a href=\"https://github.com/thebenius/SDL\" rel=\"nofollow noreferrer\">https://github.com/thebenius/SDL</a></p>\n\n<p>I've created a GitHub Repo to show you the code but don't worry. Its not much. But I absolutely don't know where is my mistake.</p>\n\n<p>In the Code I create three Windows and I Manage the input for SDL_QUIT to stop the game loop and for SDL_WINDOWEVENT_CLOSE to close the windows.\nEverything works fine until the last window is closed. As far as I know, now the SDL_QUIT Event must be emitted by SDL. But the Gameloop goes on.</p>\n\n<p>I think I maybe have a kind of memory leak and there is still a windows saved. But I checked the window stack (Window::windows hashmap) it is empty. And also the variables in main are cleared.</p>\n\n<p>I also tried to additionally clear the window and renderer variable in the hash map</p>\n\n<p>Window::~Window() {</p>\n\n<pre><code>// Delete Window and Renderer\nSDL_DestroyRenderer(Window::windows[this-&gt;windowID]-&gt;renderer);\nSDL_DestroyWindow(Window::windows[this-&gt;windowID]-&gt;window);\n\nWindow::windows[this-&gt;windowID]-&gt;renderer = nullptr;\nWindow::windows[this-&gt;windowID]-&gt;window = nullptr;\n\n// Delete Window from map\nWindow::windows.erase(this-&gt;windowID);\n\n// Delete Window and Renderer\nSDL_DestroyRenderer(this-&gt;renderer);\nSDL_DestroyWindow(this-&gt;window);\n\n// Reset Pointer\nthis-&gt;renderer = nullptr;\nthis-&gt;window = nullptr;\n</code></pre>\n\n<p>Nothing worked.</p>\n\n<p>I'm new in C++ and SDL. I hope you can help me out.</p>\n"}, {"tags": ["c++", "xcode", "csv"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1557961327, "post_id": 56158672, "comment_id": 98946069, "body": "&quot;What am I missing to successfully write into this .csv file?&quot; I&#39;m not sure. What exactly is the problem you&#39;re having? Could you be more specific?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1557961435, "post_id": 56158672, "comment_id": 98946096, "body": "Either <code>myfile.open (&quot;example.csv&quot;);</code> is failing, which you are not checking for, or the Current Working Directory of the calling process is not what you are expecting, so <code>&quot;example.csv&quot;</code> gets written in some other folder.  You should never use relative file paths, always use absolute paths.  And add error checking."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1557963192, "post_id": 56158672, "comment_id": 98946399, "body": "Check that the call to <code>open()</code> worked ( add <code>if (myfile) {std::cerr &lt;&lt; &quot;Error\\n&quot;;}</code>). If you are using an IDE it will &quot;probably&quot; be run in the same directory as the IDE (so look there for the &#39;example.csv&#39;). You can try specifying a full path  &quot;/tmp/example.csv&quot; or you can change the current working directory. <a href=\"https://stackoverflow.com/questions/3485166/change-the-current-working-directory-in-c\" title=\"change the current working directory in c\">stackoverflow.com/questions/3485166/&hellip;</a>"}, {"owner": {"reputation": 21, "user_id": 11349414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8d59ec582a1acec2ed8b7ad8ed3b19?s=128&d=identicon&r=PG&f=1", "display_name": "Garrett Strealy", "link": "https://stackoverflow.com/users/11349414/garrett-strealy"}, "edited": false, "score": 1, "creation_date": 1557964682, "post_id": 56158672, "comment_id": 98946701, "body": "Using an absolute file path fixed the issue. Thank you all"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1557964714, "post_id": 56158672, "comment_id": 98946709, "body": "Unable to reproduce problem.  The code compiled, created and wrote the expected 5 lines of content ... the location of the new file is the default directory where the code was compiled and run."}], "owner": {"reputation": 21, "user_id": 11349414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8d59ec582a1acec2ed8b7ad8ed3b19?s=128&d=identicon&r=PG&f=1", "display_name": "Garrett Strealy", "link": "https://stackoverflow.com/users/11349414/garrett-strealy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1967, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1557961354, "creation_date": 1557961088, "last_edit_date": 1557961354, "question_id": 56158672, "link": "https://stackoverflow.com/questions/56158672/writing-to-csv-file-in-c", "title": "Writing to .csv file in C++", "body": "<p>I'm trying to output data to a <code>.csv</code> file, but when I run the program it does not change the output file. It is as if I have not run the program at all. It builds successfully.</p>\n\n<p>I created this project in XCode. The <code>\".xcodeproject\"</code> and <code>\"example.csv\"</code> files are located in the working directory (<strong>Desktop</strong> -> <strong>ofstream</strong>). <code>\"main.cpp\"</code> is located in <strong>Desktop</strong> -> <strong>ofstream</strong> -> <strong>ofstream</strong> and is the only file in that folder. I am using \"Release\" for builds.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nint main( int argc, char* argv[] )\n{\n    std::ofstream myfile;\n    myfile.open (\"example.csv\");\n    myfile &lt;&lt; \"This is the first cell in the first column.\\n\";\n    myfile &lt;&lt; \"a,b,c,\\n\";\n    myfile &lt;&lt; \"c,s,v,\\n\";\n    myfile &lt;&lt; \"1,2,3.456\\n\";\n    myfile &lt;&lt; \"semi;colon\";\n    myfile.close();\n    return 0;\n}\n</code></pre>\n\n<p>What am I missing to successfully write into this <code>.csv</code> file?</p>\n"}, {"tags": ["c++", "graph"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1557960789, "post_id": 56158637, "comment_id": 98945966, "body": "<code>0xCDCDCDCDCD</code> = Uninitialized heap memory. <a href=\"https://stackoverflow.com/questions/127386/in-visual-studio-c-what-are-the-memory-allocation-representations\" title=\"in visual studio c what are the memory allocation representations\">stackoverflow.com/questions/127386/&hellip;</a>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 7, "creation_date": 1557960968, "post_id": 56158637, "comment_id": 98946008, "body": "In the <code>Graph()</code> constructor, <code>A = (LinkedList *)malloc(sizeof(LinkedList)*vertex);</code> needs to be <code>A = new LinkedList[vertex];</code> instead. <code>malloc()</code> does not call constructors, <code>new</code> does. And don&#39;t forget to <code>delete[] A</code> in <code>~Graph()</code>. Though, you really should be using <code>std::vector&lt;LinkedList&gt;</code> and not use <code>new[]</code> at all: <code>vector&lt;LinkedList&gt; A; ... A.resize(vertex);</code> Then you don&#39;t have to worry about <code>delete[]</code>, and you can still use <code>A[u]</code> to access individual lists."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1557961321, "post_id": 56158637, "comment_id": 98946068, "body": "Wikipedia keeps a good <a href=\"https://en.wikipedia.org/wiki/Magic_number_(programming)#Magic_debug_values\" rel=\"nofollow noreferrer\">list of magic programming values</a>. When you get an insane, but highly repetitious number like 0xCDCDCDCDCD, look it up. There will probably be offsets from an origin and other little details that make the least significant end look a little fuzzy, but you can usually get a lot of helpful information."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1557961531, "post_id": 56158637, "comment_id": 98946120, "body": "Addendum to @RemyLebeau &#39;s comment: Make sure your <code>LinkedList</code> properly observes the <a href=\"https://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">Rule of Three or the Rule of Five</a> before trying to place it in a <code>std::vector</code>. Worth doing this anyway because It&#39;s quite a nasty surprise if you accidentally copy a non-observing object."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1557961598, "post_id": 56158637, "comment_id": 98946128, "body": "@user4581301 Good point. Though a better option is to simply get rid of <code>LinkedList</code> and use <code>std::list</code> instead."}, {"owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 1, "creation_date": 1557961623, "post_id": 56158637, "comment_id": 98946135, "body": "+1 for <code>std::vector</code>. And while you are at it, replace your buggy <code>LinkedList</code> by <code>std::list&lt;int&gt;</code> as well. In fact, list might not even be a best structure for this job, as std::vector will likely perform better despite possible reallocations (cache locality will most likely beat the list&#39;s pointer chasing)."}, {"owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 0, "creation_date": 1557961896, "post_id": 56158637, "comment_id": 98946185, "body": "(so to clarify, vector of vectors of ints would be my choice, no list at all ;-] )"}, {"owner": {"reputation": 350, "user_id": 9723461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8fd01cd442e062d643682e3ac4d3b10?s=128&d=identicon&r=PG&f=1", "display_name": "MPops", "link": "https://stackoverflow.com/users/9723461/mpops"}, "reply_to_user": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 0, "creation_date": 1557962636, "post_id": 56158637, "comment_id": 98946299, "body": "@axalis come on, man. you know he&#39;s doing this for a school assignment. they are supposed to use those data structures to learn programming principles. This is equivalent to a kid asking for help on a book report, and you laughing at them and saying &quot;Look at all these book reports already written about this book! Why you trying to re-write it, silly kid!!1&quot; Just stop."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 350, "user_id": 9723461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8fd01cd442e062d643682e3ac4d3b10?s=128&d=identicon&r=PG&f=1", "display_name": "MPops", "link": "https://stackoverflow.com/users/9723461/mpops"}, "edited": false, "score": 0, "creation_date": 1557963391, "post_id": 56158637, "comment_id": 98946442, "body": "@MPops that&#39;s probably the correct read, but there&#39;s no reason not to bring up <code>std::list</code> or a better-suited library container on the off chance the asker is too unfamiliar with the language to know the option is available."}, {"owner": {"reputation": 963, "user_id": 7471267, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4GGWfiRBWAY/AAAAAAAAAAI/AAAAAAAAAFo/awzT9uvFc5E/photo.jpg?sz=128", "display_name": "Mirko", "link": "https://stackoverflow.com/users/7471267/mirko"}, "edited": false, "score": 2, "creation_date": 1557967529, "post_id": 56158637, "comment_id": 98947151, "body": "If they&#39;re teaching this instead of the use of std::vector and std::list, they&#39;re doing it wrong."}, {"owner": {"reputation": 53, "user_id": 8035944, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fdebdb6f49cb41dff0567142dad99a53?s=128&d=identicon&r=PG&f=1", "display_name": "Energizer7", "link": "https://stackoverflow.com/users/8035944/energizer7"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1557996680, "post_id": 56158637, "comment_id": 98956185, "body": "@RemyLebeau Ty, your code works :)"}, {"owner": {"reputation": 350, "user_id": 9723461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8fd01cd442e062d643682e3ac4d3b10?s=128&d=identicon&r=PG&f=1", "display_name": "MPops", "link": "https://stackoverflow.com/users/9723461/mpops"}, "reply_to_user": {"reputation": 963, "user_id": 7471267, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4GGWfiRBWAY/AAAAAAAAAAI/AAAAAAAAAFo/awzT9uvFc5E/photo.jpg?sz=128", "display_name": "Mirko", "link": "https://stackoverflow.com/users/7471267/mirko"}, "edited": false, "score": 1, "creation_date": 1558042659, "post_id": 56158637, "comment_id": 98980352, "body": "@Mirko They are implementing an undirected graph for a school project. They must be making assignments wrong too, because these have been implemented before. What a waste of time."}], "owner": {"reputation": 53, "user_id": 8035944, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fdebdb6f49cb41dff0567142dad99a53?s=128&d=identicon&r=PG&f=1", "display_name": "Energizer7", "link": "https://stackoverflow.com/users/8035944/energizer7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1557960730, "creation_date": 1557960730, "question_id": 56158637, "link": "https://stackoverflow.com/questions/56158637/how-to-fix-read-access-violation-in-linked-list", "title": "How to fix &#39;read access violation&#39; in linked list", "body": "<p>I have implemented an undirected graph using LinkedList. My problem is that I get read acces violation (p was 0xCDCDCDCDCD) for every LinkedList function.</p>\n\n<pre><code>class LinkedList {\n\npublic:\n\n    Node *start;\n    LinkedList() { start = NULL; } //default constructor\n\n    //---------------------------------\n\n    ~LinkedList() //destructor\n\n    {\n\n        Node *temp;\n        while (start)\n\n        {\n\n            temp = start-&gt;next;\n            delete start;\n            start = temp;\n\n        }\n\n    }\n    //----------------------------------\n    //get the address of first node of the linked list\n\n    Node* getStart() { return start; }\n\n    //---------------------------------\n    //insert an element into linked list\n\n    void insert(int data)\n\n    {\n\n        Node *ptr = new Node(data);\n        if (start == NULL)\n\n        {\n\n            start = ptr;\n\n        }\n\n        else\n\n        {\n\n            Node *temp = start;\n\n            while (temp-&gt;next)\n\n                temp = temp-&gt;next;\n\n            temp-&gt;next = ptr;\n\n        }\n\n    }\n\n    //---------------------------------\n    bool findNode(int data) {\n        Node *p = start;\n        while (p)\n\n        {\n\n            if (p-&gt;info == data)\n                return true;\n\n            p = p-&gt;next;\n\n        }\n        return false;\n    }\n\n\n};\n</code></pre>\n\n<p>Then i have implemented Graph class like that:</p>\n\n<pre><code>class Graph {\n\nprivate:\n    LinkedList *A;\n    int vertex;\n    int edges;\n\npublic:\n    Graph(int vertex) {\n        this-&gt;vertex = vertex;\n        edges = 0;\n        A = (LinkedList *)malloc(sizeof(LinkedList)*vertex);\n    }\n    void insertEdge(int u, int v) {\n        if (A[u].findNode(v) == false) {\n            A[u].insert(v);\n            A[v].insert(u);\n            edges++;\n        }\n    }\n};\n</code></pre>\n\n<p>And the Node:</p>\n\n<pre><code>class Node {\n    friend class LinkedList;\n    int info;\n    Node *next;\n    Node() //default constructor\n    {\n        info = 0;\n        next = 0;\n    }\n    Node(int item) //parameterized constructor\n\n    { \n        info = item;\n        next = 0; \n    }\n\n};\n</code></pre>\n\n<p>Main:</p>\n\n<pre><code>int main()\n\n{\n    Graph G(7);\n    G.insertEdge(1, 3);\n    G.insertEdge(4, 6);\n    G.displayGraph();\n    return 0;\n}\n</code></pre>\n\n<p>I'm not exactly sure what is going on but, every time I try to debug it it'll send me to the function for pointer.</p>\n"}, {"tags": ["python", "c++", "tensorflow", "protocol-buffers"], "answers": [{"tags": [], "owner": {"reputation": 6608, "user_id": 867889, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/766cbf5cffe9872f58f00c994cd34a3f?s=128&d=identicon&r=PG", "display_name": "y.selivonchyk", "link": "https://stackoverflow.com/users/867889/y-selivonchyk"}, "is_accepted": false, "score": 1, "last_activity_date": 1557978514, "creation_date": 1557978514, "answer_id": 56160539, "question_id": 56158456, "link": "https://stackoverflow.com/questions/56158456/tensorflow-model-how-to-identify-input-output-nodes-name-from-a-proto-buff-file/56160539#56160539", "title": "Tensorflow model: How to identify input/output nodes name from a proto buff file?", "body": "<p>I can not provide a full answer.</p>\n\n<p>Yet, to identify an input node you typically be searching for a node with operation \"placeholder\". There might be more than one, especially when a sophisticated optimizer or drop-out layer are used.</p>\n\n<p>When it comes to outputs it is even worth: every node is essentially an output. I can recommend 2 options here: be looking for an operation with an expected output name, like softmax. Or parse the whole file definition and find terminal nodes. The nodes that are not used in any other operation.</p>\n\n<p>One other option would be to load graph, save a checkpoint and study it in tensorboard.</p>\n\n<p>I am not aware of a programming tool capable of nicely representing tf.graph for python queries.</p>\n\n<p>In case you are willing to produce .pb file you can use help of this answer: <a href=\"https://stackoverflow.com/questions/43517959/given-a-tensor-flow-model-graph-how-to-find-the-input-node-and-output-node-name\">Given a tensor flow model graph, how to find the input node and output node names</a></p>\n"}], "owner": {"reputation": 17078, "user_id": 3993270, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/1bee661ad7451ff3107ca6954560a06c?s=128&d=identicon&r=PG&f=1", "display_name": "Edamame", "link": "https://stackoverflow.com/users/3993270/edamame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557978514, "creation_date": 1557959313, "question_id": 56158456, "link": "https://stackoverflow.com/questions/56158456/tensorflow-model-how-to-identify-input-output-nodes-name-from-a-proto-buff-file", "title": "Tensorflow model: How to identify input/output nodes name from a proto buff file?", "body": "<p>I am using OpenAI baselines to train an RL (deepq)model.The inputs are 19 features:</p>\n\n<pre><code>observation_space = spaces.Box(0, 100, (19, 1), dtype=np.float_)\n</code></pre>\n\n<p>, and the output is:</p>\n\n<pre><code>action_space =spaces.Discrete(6)\n</code></pre>\n\n<p>All the model variables from:</p>\n\n<pre><code>for i, var in enumerate(saver._var_list):\n    print('Var {}: {}'.format(i, var))\n</code></pre>\n\n<p>are like:</p>\n\n<pre><code>Var 0: &lt;tf.Variable 'deepq/eps:0' shape=() dtype=float32_ref&gt;\nVar 1: &lt;tf.Variable 'deepq/q_func/mlp_fc0/w:0' shape=(19, 64) dtype=float32_ref&gt;\nVar 2: &lt;tf.Variable 'deepq/q_func/mlp_fc0/b:0' shape=(64,) dtype=float32_ref&gt;\nVar 3: &lt;tf.Variable 'deepq/q_func/mlp_fc1/w:0' shape=(64, 64) dtype=float32_ref&gt;\nVar 4: &lt;tf.Variable 'deepq/q_func/mlp_fc1/b:0' shape=(64,) dtype=float32_ref&gt;\nVar 5: &lt;tf.Variable 'deepq/q_func/action_value/fully_connected/weights:0' shape=(64, 256) dtype=float32_ref&gt;\nVar 6: &lt;tf.Variable 'deepq/q_func/action_value/fully_connected/biases:0' shape=(256,) dtype=float32_ref&gt;\nVar 7: &lt;tf.Variable 'deepq/q_func/action_value/fully_connected_1/weights:0' shape=(256, 6) dtype=float32_ref&gt;\nVar 8: &lt;tf.Variable 'deepq/q_func/action_value/fully_connected_1/biases:0' shape=(6,) dtype=float32_ref&gt;\nVar 9: &lt;tf.Variable 'deepq/q_func/state_value/fully_connected/weights:0' shape=(64, 256) dtype=float32_ref&gt;\nVar 10: &lt;tf.Variable 'deepq/q_func/state_value/fully_connected/biases:0' shape=(256,) dtype=float32_ref&gt;\nVar 11: &lt;tf.Variable 'deepq/q_func/state_value/fully_connected_1/weights:0' shape=(256, 1) dtype=float32_ref&gt;\nVar 12: &lt;tf.Variable 'deepq/q_func/state_value/fully_connected_1/biases:0' shape=(1,) dtype=float32_ref&gt;\nVar 13: &lt;tf.Variable 'deepq/target_q_func/mlp_fc0/w:0' shape=(19, 64) dtype=float32_ref&gt;\nVar 14: &lt;tf.Variable 'deepq/target_q_func/mlp_fc0/b:0' shape=(64,) dtype=float32_ref&gt;\nVar 15: &lt;tf.Variable 'deepq/target_q_func/mlp_fc1/w:0' shape=(64, 64) dtype=float32_ref&gt;\nVar 16: &lt;tf.Variable 'deepq/target_q_func/mlp_fc1/b:0' shape=(64,) dtype=float32_ref&gt;\nVar 17: &lt;tf.Variable 'deepq/target_q_func/action_value/fully_connected/weights:0' shape=(64, 256) dtype=float32_ref&gt;\nVar 18: &lt;tf.Variable 'deepq/target_q_func/action_value/fully_connected/biases:0' shape=(256,) dtype=float32_ref&gt;\nVar 19: &lt;tf.Variable 'deepq/target_q_func/action_value/fully_connected_1/weights:0' shape=(256, 6) dtype=float32_ref&gt;\nVar 20: &lt;tf.Variable 'deepq/target_q_func/action_value/fully_connected_1/biases:0' shape=(6,) dtype=float32_ref&gt;\nVar 21: &lt;tf.Variable 'deepq/target_q_func/state_value/fully_connected/weights:0' shape=(64, 256) dtype=float32_ref&gt;\nVar 22: &lt;tf.Variable 'deepq/target_q_func/state_value/fully_connected/biases:0' shape=(256,) dtype=float32_ref&gt;\nVar 23: &lt;tf.Variable 'deepq/target_q_func/state_value/fully_connected_1/weights:0' shape=(256, 1) dtype=float32_ref&gt;\nVar 24: &lt;tf.Variable 'deepq/target_q_func/state_value/fully_connected_1/biases:0' shape=(1,) dtype=float32_ref&gt;\nVar 25: &lt;tf.Variable 'deepq_1/beta1_power:0' shape=() dtype=float32_ref&gt;\nVar 26: &lt;tf.Variable 'deepq_1/beta2_power:0' shape=() dtype=float32_ref&gt;\nVar 27: &lt;tf.Variable 'deepq/deepq/q_func/mlp_fc0/w/Adam:0' shape=(19, 64) dtype=float32_ref&gt;\nVar 28: &lt;tf.Variable 'deepq/deepq/q_func/mlp_fc0/w/Adam_1:0' shape=(19, 64) dtype=float32_ref&gt;\nVar 29: &lt;tf.Variable 'deepq/deepq/q_func/mlp_fc0/b/Adam:0' shape=(64,) dtype=float32_ref&gt;\nVar 30: &lt;tf.Variable 'deepq/deepq/q_func/mlp_fc0/b/Adam_1:0' shape=(64,) dtype=float32_ref&gt;\nVar 31: &lt;tf.Variable 'deepq/deepq/q_func/mlp_fc1/w/Adam:0' shape=(64, 64) dtype=float32_ref&gt;\nVar 32: &lt;tf.Variable 'deepq/deepq/q_func/mlp_fc1/w/Adam_1:0' shape=(64, 64) dtype=float32_ref&gt;\nVar 33: &lt;tf.Variable 'deepq/deepq/q_func/mlp_fc1/b/Adam:0' shape=(64,) dtype=float32_ref&gt;\nVar 34: &lt;tf.Variable 'deepq/deepq/q_func/mlp_fc1/b/Adam_1:0' shape=(64,) dtype=float32_ref&gt;\nVar 35: &lt;tf.Variable 'deepq/deepq/q_func/action_value/fully_connected/weights/Adam:0' shape=(64, 256) dtype=float32_ref&gt;\nVar 36: &lt;tf.Variable 'deepq/deepq/q_func/action_value/fully_connected/weights/Adam_1:0' shape=(64, 256) dtype=float32_ref&gt;\nVar 37: &lt;tf.Variable 'deepq/deepq/q_func/action_value/fully_connected/biases/Adam:0' shape=(256,) dtype=float32_ref&gt;\nVar 38: &lt;tf.Variable 'deepq/deepq/q_func/action_value/fully_connected/biases/Adam_1:0' shape=(256,) dtype=float32_ref&gt;\nVar 39: &lt;tf.Variable 'deepq/deepq/q_func/action_value/fully_connected_1/weights/Adam:0' shape=(256, 6) dtype=float32_ref&gt;\nVar 40: &lt;tf.Variable 'deepq/deepq/q_func/action_value/fully_connected_1/weights/Adam_1:0' shape=(256, 6) dtype=float32_ref&gt;\nVar 41: &lt;tf.Variable 'deepq/deepq/q_func/action_value/fully_connected_1/biases/Adam:0' shape=(6,) dtype=float32_ref&gt;\nVar 42: &lt;tf.Variable 'deepq/deepq/q_func/action_value/fully_connected_1/biases/Adam_1:0' shape=(6,) dtype=float32_ref&gt;\nVar 43: &lt;tf.Variable 'deepq/deepq/q_func/state_value/fully_connected/weights/Adam:0' shape=(64, 256) dtype=float32_ref&gt;\nVar 44: &lt;tf.Variable 'deepq/deepq/q_func/state_value/fully_connected/weights/Adam_1:0' shape=(64, 256) dtype=float32_ref&gt;\nVar 45: &lt;tf.Variable 'deepq/deepq/q_func/state_value/fully_connected/biases/Adam:0' shape=(256,) dtype=float32_ref&gt;\nVar 46: &lt;tf.Variable 'deepq/deepq/q_func/state_value/fully_connected/biases/Adam_1:0' shape=(256,) dtype=float32_ref&gt;\nVar 47: &lt;tf.Variable 'deepq/deepq/q_func/state_value/fully_connected_1/weights/Adam:0' shape=(256, 1) dtype=float32_ref&gt;\nVar 48: &lt;tf.Variable 'deepq/deepq/q_func/state_value/fully_connected_1/weights/Adam_1:0' shape=(256, 1) dtype=float32_ref&gt;\nVar 49: &lt;tf.Variable 'deepq/deepq/q_func/state_value/fully_connected_1/biases/Adam:0' shape=(1,) dtype=float32_ref&gt;\nVar 50: &lt;tf.Variable 'deepq/deepq/q_func/state_value/fully_connected_1/biases/Adam_1:0' shape=(1,) dtype=float32_ref&gt;\n</code></pre>\n\n<p>And the output of the model is saved using</p>\n\n<pre><code>tf.train.write_graph(sess.graph_def, './model', 'my_deepq.pbtxt')\n</code></pre>\n\n<p>as a proto buff file. The profo buff file looks something like below. How do I identify the names of inputs node(layer) and output node (layer) from this proto buff file? Thanks!</p>\n\n<pre><code>node {\n  name: \"deepq/observation\"\n  op: \"Placeholder\"\n  attr {\n    key: \"dtype\"\n    value {\n      type: DT_DOUBLE\n    }\n  }\n  attr {\n    key: \"shape\"\n    value {\n      shape {\n        dim {\n          size: -1\n        }\n        dim {\n          size: 19\n        }\n        dim {\n          size: 1\n        }\n      }\n    }\n  }\n}\nnode {\n  name: \"deepq/ToFloat\"\n  op: \"Cast\"\n  input: \"deepq/observation\"\n  attr {\n    key: \"DstT\"\n    value {\n      type: DT_FLOAT\n    }\n  }\n  attr {\n    key: \"SrcT\"\n    value {\n      type: DT_DOUBLE\n    }\n  }\n  attr {\n    key: \"Truncate\"\n    value {\n      b: false\n    }\n  }\n}\n\n :\n :\n\nnode {\n  name: \"save/Assign_49\"\n  op: \"Assign\"\n  input: \"deepq_1/beta1_power\"\n  input: \"save/RestoreV2:49\"\n  attr {\n    key: \"T\"\n    value {\n      type: DT_FLOAT\n    }\n  }\n  attr {\n    key: \"_class\"\n    value {\n      list {\n        s: \"loc:@deepq/q_func/action_value/fully_connected/biases\"\n      }\n    }\n  }\n  attr {\n    key: \"use_locking\"\n    value {\n      b: true\n    }\n  }\n  attr {\n    key: \"validate_shape\"\n    value {\n      b: true\n    }\n  }\n}\nnode {\n  name: \"save/Assign_50\"\n  op: \"Assign\"\n  input: \"deepq_1/beta2_power\"\n  input: \"save/RestoreV2:50\"\n  attr {\n    key: \"T\"\n    value {\n      type: DT_FLOAT\n    }\n  }\n  attr {\n    key: \"_class\"\n    value {\n      list {\n        s: \"loc:@deepq/q_func/action_value/fully_connected/biases\"\n      }\n    }\n  }\n  attr {\n    key: \"use_locking\"\n    value {\n      b: true\n    }\n  }\n  attr {\n    key: \"validate_shape\"\n    value {\n      b: true\n    }\n  }\n}\n\n:\n:\nnode {\n  name: \"deepq_1/group_deps_1\"\n  op: \"NoOp\"\n  input: \"^deepq_1/Adam\"\n}\nnode {\n  name: \"deepq_1/group_deps_2\"\n  op: \"NoOp\"\n  input: \"^deepq_1/group_deps\"\n}\nnode {\n  name: \"deepq_1/group_deps_3\"\n  op: \"NoOp\"\n}\nnode {\n  name: \"init\"\n  op: \"NoOp\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected/biases/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected/biases/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected/weights/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected/weights/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected_1/biases/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected_1/biases/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected_1/weights/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected_1/weights/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc0/b/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc0/b/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc0/w/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc0/w/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc1/b/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc1/b/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc1/w/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc1/w/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected/biases/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected/biases/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected/weights/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected/weights/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected_1/biases/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected_1/biases/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected_1/weights/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected_1/weights/Adam_1/Assign\"\n  input: \"^deepq/eps/Assign\"\n  input: \"^deepq/q_func/action_value/fully_connected/biases/Assign\"\n  input: \"^deepq/q_func/action_value/fully_connected/weights/Assign\"\n  input: \"^deepq/q_func/action_value/fully_connected_1/biases/Assign\"\n  input: \"^deepq/q_func/action_value/fully_connected_1/weights/Assign\"\n  input: \"^deepq/q_func/mlp_fc0/b/Assign\"\n  input: \"^deepq/q_func/mlp_fc0/w/Assign\"\n  input: \"^deepq/q_func/mlp_fc1/b/Assign\"\n  input: \"^deepq/q_func/mlp_fc1/w/Assign\"\n  input: \"^deepq/q_func/state_value/fully_connected/biases/Assign\"\n  input: \"^deepq/q_func/state_value/fully_connected/weights/Assign\"\n  input: \"^deepq/q_func/state_value/fully_connected_1/biases/Assign\"\n  input: \"^deepq/q_func/state_value/fully_connected_1/weights/Assign\"\n  input: \"^deepq/target_q_func/action_value/fully_connected/biases/Assign\"\n  input: \"^deepq/target_q_func/action_value/fully_connected/weights/Assign\"\n  input: \"^deepq/target_q_func/action_value/fully_connected_1/biases/Assign\"\n  input: \"^deepq/target_q_func/action_value/fully_connected_1/weights/Assign\"\n  input: \"^deepq/target_q_func/mlp_fc0/b/Assign\"\n  input: \"^deepq/target_q_func/mlp_fc0/w/Assign\"\n  input: \"^deepq/target_q_func/mlp_fc1/b/Assign\"\n  input: \"^deepq/target_q_func/mlp_fc1/w/Assign\"\n  input: \"^deepq/target_q_func/state_value/fully_connected/biases/Assign\"\n  input: \"^deepq/target_q_func/state_value/fully_connected/weights/Assign\"\n  input: \"^deepq/target_q_func/state_value/fully_connected_1/biases/Assign\"\n  input: \"^deepq/target_q_func/state_value/fully_connected_1/weights/Assign\"\n  input: \"^deepq_1/beta1_power/Assign\"\n  input: \"^deepq_1/beta2_power/Assign\"\n}\nnode {\n  name: \"init_1\"\n  op: \"NoOp\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected/biases/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected/biases/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected/weights/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected/weights/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected_1/biases/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected_1/biases/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected_1/weights/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected_1/weights/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc0/b/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc0/b/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc0/w/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc0/w/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc1/b/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc1/b/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc1/w/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc1/w/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected/biases/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected/biases/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected/weights/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected/weights/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected_1/biases/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected_1/biases/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected_1/weights/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected_1/weights/Adam_1/Assign\"\n  input: \"^deepq/eps/Assign\"\n  input: \"^deepq/q_func/action_value/fully_connected/biases/Assign\"\n  input: \"^deepq/q_func/action_value/fully_connected/weights/Assign\"\n  input: \"^deepq/q_func/action_value/fully_connected_1/biases/Assign\"\n  input: \"^deepq/q_func/action_value/fully_connected_1/weights/Assign\"\n  input: \"^deepq/q_func/mlp_fc0/b/Assign\"\n  input: \"^deepq/q_func/mlp_fc0/w/Assign\"\n  input: \"^deepq/q_func/mlp_fc1/b/Assign\"\n  input: \"^deepq/q_func/mlp_fc1/w/Assign\"\n  input: \"^deepq/q_func/state_value/fully_connected/biases/Assign\"\n  input: \"^deepq/q_func/state_value/fully_connected/weights/Assign\"\n  input: \"^deepq/q_func/state_value/fully_connected_1/biases/Assign\"\n  input: \"^deepq/q_func/state_value/fully_connected_1/weights/Assign\"\n  input: \"^deepq/target_q_func/action_value/fully_connected/biases/Assign\"\n  input: \"^deepq/target_q_func/action_value/fully_connected/weights/Assign\"\n  input: \"^deepq/target_q_func/action_value/fully_connected_1/biases/Assign\"\n  input: \"^deepq/target_q_func/action_value/fully_connected_1/weights/Assign\"\n  input: \"^deepq/target_q_func/mlp_fc0/b/Assign\"\n  input: \"^deepq/target_q_func/mlp_fc0/w/Assign\"\n  input: \"^deepq/target_q_func/mlp_fc1/b/Assign\"\n  input: \"^deepq/target_q_func/mlp_fc1/w/Assign\"\n  input: \"^deepq/target_q_func/state_value/fully_connected/biases/Assign\"\n  input: \"^deepq/target_q_func/state_value/fully_connected/weights/Assign\"\n  input: \"^deepq/target_q_func/state_value/fully_connected_1/biases/Assign\"\n  input: \"^deepq/target_q_func/state_value/fully_connected_1/weights/Assign\"\n  input: \"^deepq_1/beta1_power/Assign\"\n  input: \"^deepq_1/beta2_power/Assign\"\n}\nnode {\n  name: \"init_2\"\n  op: \"NoOp\"\n}\nnode {\n  name: \"save/filename/input\"\n  op: \"Const\"\n  attr {\n    key: \"dtype\"\n    value {\n      type: DT_STRING\n    }\n  }\n  attr {\n    key: \"value\"\n    value {\n      tensor {\n        dtype: DT_STRING\n        tensor_shape {\n        }\n        string_val: \"model\"\n      }\n    }\n  }\n}\nnode {\n  name: \"save/filename\"\n  op: \"PlaceholderWithDefault\"\n  input: \"save/filename/input\"\n  attr {\n    key: \"dtype\"\n    value {\n      type: DT_STRING\n    }\n  }\n  attr {\n    key: \"shape\"\n    value {\n      shape {\n      }\n    }\n  }\n}\nnode {\n  name: \"save/Const\"\n  op: \"PlaceholderWithDefault\"\n  input: \"save/filename\"\n  attr {\n    key: \"dtype\"\n    value {\n      type: DT_STRING\n    }\n  }\n  attr {\n    key: \"shape\"\n    value {\n      shape {\n      }\n    }\n  }\n}\nnode {\n  name: \"save/SaveV2/tensor_names\"\n  op: \"Const\"\n  attr {\n    key: \"dtype\"\n    value {\n      type: DT_STRING\n    }\n  }\n  attr {\n    key: \"value\"\n    value {\n      tensor {\n        dtype: DT_STRING\n        tensor_shape {\n          dim {\n            size: 51\n          }\n        }\n        string_val: \"deepq/deepq/q_func/action_value/fully_connected/biases/Adam\"\n        string_val: \"deepq/deepq/q_func/action_value/fully_connected/biases/Adam_1\"\n        string_val: \"deepq/deepq/q_func/action_value/fully_connected/weights/Adam\"\n        string_val: \"deepq/deepq/q_func/action_value/fully_connected/weights/Adam_1\"\n        string_val: \"deepq/deepq/q_func/action_value/fully_connected_1/biases/Adam\"\n        string_val: \"deepq/deepq/q_func/action_value/fully_connected_1/biases/Adam_1\"\n        string_val: \"deepq/deepq/q_func/action_value/fully_connected_1/weights/Adam\"\n        string_val: \"deepq/deepq/q_func/action_value/fully_connected_1/weights/Adam_1\"\n        string_val: \"deepq/deepq/q_func/mlp_fc0/b/Adam\"\n        string_val: \"deepq/deepq/q_func/mlp_fc0/b/Adam_1\"\n        string_val: \"deepq/deepq/q_func/mlp_fc0/w/Adam\"\n        string_val: \"deepq/deepq/q_func/mlp_fc0/w/Adam_1\"\n        string_val: \"deepq/deepq/q_func/mlp_fc1/b/Adam\"\n        string_val: \"deepq/deepq/q_func/mlp_fc1/b/Adam_1\"\n        string_val: \"deepq/deepq/q_func/mlp_fc1/w/Adam\"\n        string_val: \"deepq/deepq/q_func/mlp_fc1/w/Adam_1\"\n        string_val: \"deepq/deepq/q_func/state_value/fully_connected/biases/Adam\"\n        string_val: \"deepq/deepq/q_func/state_value/fully_connected/biases/Adam_1\"\n        string_val: \"deepq/deepq/q_func/state_value/fully_connected/weights/Adam\"\n        string_val: \"deepq/deepq/q_func/state_value/fully_connected/weights/Adam_1\"\n        string_val: \"deepq/deepq/q_func/state_value/fully_connected_1/biases/Adam\"\n        string_val: \"deepq/deepq/q_func/state_value/fully_connected_1/biases/Adam_1\"\n        string_val: \"deepq/deepq/q_func/state_value/fully_connected_1/weights/Adam\"\n        string_val: \"deepq/deepq/q_func/state_value/fully_connected_1/weights/Adam_1\"\n        string_val: \"deepq/eps\"\n        string_val: \"deepq/q_func/action_value/fully_connected/biases\"\n        string_val: \"deepq/q_func/action_value/fully_connected/weights\"\n        string_val: \"deepq/q_func/action_value/fully_connected_1/biases\"\n        string_val: \"deepq/q_func/action_value/fully_connected_1/weights\"\n        string_val: \"deepq/q_func/mlp_fc0/b\"\n        string_val: \"deepq/q_func/mlp_fc0/w\"\n        string_val: \"deepq/q_func/mlp_fc1/b\"\n        string_val: \"deepq/q_func/mlp_fc1/w\"\n        string_val: \"deepq/q_func/state_value/fully_connected/biases\"\n        string_val: \"deepq/q_func/state_value/fully_connected/weights\"\n        string_val: \"deepq/q_func/state_value/fully_connected_1/biases\"\n        string_val: \"deepq/q_func/state_value/fully_connected_1/weights\"\n        string_val: \"deepq/target_q_func/action_value/fully_connected/biases\"\n        string_val: \"deepq/target_q_func/action_value/fully_connected/weights\"\n        string_val: \"deepq/target_q_func/action_value/fully_connected_1/biases\"\n        string_val: \"deepq/target_q_func/action_value/fully_connected_1/weights\"\n        string_val: \"deepq/target_q_func/mlp_fc0/b\"\n        string_val: \"deepq/target_q_func/mlp_fc0/w\"\n        string_val: \"deepq/target_q_func/mlp_fc1/b\"\n        string_val: \"deepq/target_q_func/mlp_fc1/w\"\n        string_val: \"deepq/target_q_func/state_value/fully_connected/biases\"\n        string_val: \"deepq/target_q_func/state_value/fully_connected/weights\"\n        string_val: \"deepq/target_q_func/state_value/fully_connected_1/biases\"\n        string_val: \"deepq/target_q_func/state_value/fully_connected_1/weights\"\n        string_val: \"deepq_1/beta1_power\"\n        string_val: \"deepq_1/beta2_power\"\n      }\n    }\n  }\n}\nnode {\n  name: \"save/SaveV2/shape_and_slices\"\n  op: \"Const\"\n  attr {\n    key: \"dtype\"\n    value {\n      type: DT_STRING\n    }\n  }\n  attr {\n    key: \"value\"\n    value {\n      tensor {\n        dtype: DT_STRING\n        tensor_shape {\n          dim {\n            size: 51\n          }\n        }\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n      }\n    }\n  }\n}\n\n:\n:\nnode {\n  name: \"save/restore_all\"\n  op: \"NoOp\"\n  input: \"^save/Assign\"\n  input: \"^save/Assign_1\"\n  input: \"^save/Assign_10\"\n  input: \"^save/Assign_11\"\n  input: \"^save/Assign_12\"\n  input: \"^save/Assign_13\"\n  input: \"^save/Assign_14\"\n  input: \"^save/Assign_15\"\n  input: \"^save/Assign_16\"\n  input: \"^save/Assign_17\"\n  input: \"^save/Assign_18\"\n  input: \"^save/Assign_19\"\n  input: \"^save/Assign_2\"\n  input: \"^save/Assign_20\"\n  input: \"^save/Assign_21\"\n  input: \"^save/Assign_22\"\n  input: \"^save/Assign_23\"\n  input: \"^save/Assign_24\"\n  input: \"^save/Assign_25\"\n  input: \"^save/Assign_26\"\n  input: \"^save/Assign_27\"\n  input: \"^save/Assign_28\"\n  input: \"^save/Assign_29\"\n  input: \"^save/Assign_3\"\n  input: \"^save/Assign_30\"\n  input: \"^save/Assign_31\"\n  input: \"^save/Assign_32\"\n  input: \"^save/Assign_33\"\n  input: \"^save/Assign_34\"\n  input: \"^save/Assign_35\"\n  input: \"^save/Assign_36\"\n  input: \"^save/Assign_37\"\n  input: \"^save/Assign_38\"\n  input: \"^save/Assign_39\"\n  input: \"^save/Assign_4\"\n  input: \"^save/Assign_40\"\n  input: \"^save/Assign_41\"\n  input: \"^save/Assign_42\"\n  input: \"^save/Assign_43\"\n  input: \"^save/Assign_44\"\n  input: \"^save/Assign_45\"\n  input: \"^save/Assign_46\"\n  input: \"^save/Assign_47\"\n  input: \"^save/Assign_48\"\n  input: \"^save/Assign_49\"\n  input: \"^save/Assign_5\"\n  input: \"^save/Assign_50\"\n  input: \"^save/Assign_6\"\n  input: \"^save/Assign_7\"\n  input: \"^save/Assign_8\"\n  input: \"^save/Assign_9\"\n}\nversions {\n  producer: 27\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "camera", "glm-math", "arcball"], "answers": [{"tags": [], "owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "is_accepted": false, "score": 0, "last_activity_date": 1557962345, "last_edit_date": 1557962345, "creation_date": 1557961141, "answer_id": 56158681, "question_id": 56158278, "link": "https://stackoverflow.com/questions/56158278/arcball-camera-how-to-obtain-right-direction-and-up/56158681#56158681", "title": "Arcball Camera: how to obtain right, direction and up", "body": "<p>Following a moving object is matter of pointing the camera to that object. This is what typical <code>lookAt</code> function does. See the maths <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/gluLookAt.xml\" rel=\"nofollow noreferrer\">here</a> and then use <code>glm::lookAt()</code>.</p>\n\n<p>The 'Arcball' technic is for rotating with the mouse. See some maths <a href=\"https://www.khronos.org/opengl/wiki/Object_Mouse_Trackball\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>The idea is to get two vectors (first, second) from positions on screen. For each vector, <code>X,Y</code> are taking depending on pixels \"travelled\" by mouse and the size of the window. <code>Z</code> is calculated by 'trackball' maths. With these two vectors (after normalizing them), its cross product gives the axis of rotation in <em>camera coordinates</em>, and its dot product gives the angle. Now, you can rotate the camera by <code>glm::rotate()</code></p>\n\n<p>If you go another route (e.g. calculating camera matrix on your own), then the \"up\" direction of the camera must be updated by yourself. Remember it's perpendicular to the other two axis of the camera.</p>\n"}], "owner": {"reputation": 33, "user_id": 10409201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2843fa3e1f1b938132f50449c72a879c?s=128&d=identicon&r=PG&f=1", "display_name": "ero.rom", "link": "https://stackoverflow.com/users/10409201/ero-rom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 815, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557962345, "creation_date": 1557958045, "last_edit_date": 1557959441, "question_id": 56158278, "link": "https://stackoverflow.com/questions/56158278/arcball-camera-how-to-obtain-right-direction-and-up", "title": "Arcball Camera: how to obtain right, direction and up", "body": "<p>I'm trying to implement a camera that follows a moving object. I've implemented these functions:</p>\n\n<pre><code>void Camera::espheric_yaw(float degrees, glm::vec3 center_point)\n{\n\n    float lim_yaw = glm::radians(89.0f);\n    float radians = glm::radians(degrees);\n    absoluteYaw += radians;\n\n    ... clamp absoluteYaw\n\n    float radius = 10.0f;\n    float camX = cos(absoluteYaw) * cos(absoluteRoll) * radius;\n    float camY = sin(absoluteRoll)* radius;\n    float camZ = sin(absoluteYaw) * cos(absoluteRoll) * radius;\n    eyes.x = camX;\n    eyes.y = camY;\n    eyes.z = camZ;\n    lookAt = center_point;\n    view = glm::normalize(lookAt - eyes);\n    up = glm::vec3(0, 1, 0);\n    right = glm::normalize(glm::cross(view, up));\n\n}\n</code></pre>\n\n<p>I want to use this function (and the pitch version) for a camera that follows a moving 3d model. Right now, it works when the center_point is the (0,1,0). I think i'm getting the position right but the up vector is clearly not always (0,1,0).</p>\n\n<p>How can I get my up, view and right vector for the camera? And then, if I update the eyes position of the camera this way, how will my camera move when the other object (centered at center_position parameter) moves?</p>\n\n<p>The idea is to update this each time I have mouse input with centered_value = center of the moving object. Then use gluLookAt with view, eyes and up values of my camera (and lookAt which will be eyes+view).</p>\n"}, {"tags": ["c++", "linker", "fltk"], "comments": [{"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 1, "creation_date": 1557958121, "post_id": 56158232, "comment_id": 98945368, "body": "You need to actually <i>define</i> (implement/write a function body for) <code>Fl_Inputc(int, int, int, int, const char*);</code>at some point before your code can call that function."}, {"owner": {"reputation": 25, "user_id": 4332260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/888e620fc43aa61df85cfacdfd2fa9ae?s=128&d=identicon&r=PG&f=1", "display_name": "cbcalvin", "link": "https://stackoverflow.com/users/4332260/cbcalvin"}, "reply_to_user": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1558008056, "post_id": 56158232, "comment_id": 98962638, "body": "How do I get Fl_Inputc to inherit the functionality defined by Fl_Input (except for the destructor)?  That is the question that is the question I am asking."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1558023114, "post_id": 56158232, "comment_id": 98971869, "body": "that reads like a different question altogether from what you\u2019ve posted. You\u2019ve <i>declared</i> your own constructors inside your class, which prevents those of the base class from being used. If you simply remove them, you should expect the base class\u2019 constructors to be inherited"}, {"owner": {"reputation": 25, "user_id": 4332260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/888e620fc43aa61df85cfacdfd2fa9ae?s=128&d=identicon&r=PG&f=1", "display_name": "cbcalvin", "link": "https://stackoverflow.com/users/4332260/cbcalvin"}, "reply_to_user": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1558028558, "post_id": 56158232, "comment_id": 98974484, "body": "Thanks @alter I got to the above example trying to get by a mismatch in the number of arguments.  I will post a new question with that example."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 4332260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/888e620fc43aa61df85cfacdfd2fa9ae?s=128&d=identicon&r=PG&f=1", "display_name": "cbcalvin", "link": "https://stackoverflow.com/users/4332260/cbcalvin"}, "edited": false, "score": 0, "creation_date": 1558127933, "post_id": 56158288, "comment_id": 99011963, "body": "Thanks @cj.vaughter.  And I declared it to try and get a matching function profile.  The real solution to the problem (even though I asked the wrong question) is to inherit the construtors from the base class with the using-declaration  <code>using Fl_Input::Fl_Input;</code> to inherit the constructors. See code added above."}, {"owner": {"reputation": 238, "user_id": 11467100, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E4y2B.png?s=128&g=1", "display_name": "cj.vaughter", "link": "https://stackoverflow.com/users/11467100/cj-vaughter"}, "reply_to_user": {"reputation": 25, "user_id": 4332260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/888e620fc43aa61df85cfacdfd2fa9ae?s=128&d=identicon&r=PG&f=1", "display_name": "cbcalvin", "link": "https://stackoverflow.com/users/4332260/cbcalvin"}, "edited": false, "score": 0, "creation_date": 1558128278, "post_id": 56158288, "comment_id": 99012064, "body": "Ah, I see. Difficult to determine what exactly you were trying to do. Glad you got it figured out."}], "tags": [], "owner": {"reputation": 238, "user_id": 11467100, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E4y2B.png?s=128&g=1", "display_name": "cj.vaughter", "link": "https://stackoverflow.com/users/11467100/cj-vaughter"}, "is_accepted": false, "score": 1, "last_activity_date": 1557958110, "creation_date": 1557958110, "answer_id": 56158288, "question_id": 56158232, "link": "https://stackoverflow.com/questions/56158232/what-is-missing-from-the-link-that-results-in-the-undefined-reference/56158288#56158288", "title": "What is missing from the link that results in the undefined reference?", "body": "<p>The linker can't find the definition for <code>Fl_Inputc(int left, int up, int width, int height, const char* label=0);</code> because you haven't <strong>defined</strong> it, you've only <strong>declared</strong> it.</p>\n"}], "owner": {"reputation": 25, "user_id": 4332260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/888e620fc43aa61df85cfacdfd2fa9ae?s=128&d=identicon&r=PG&f=1", "display_name": "cbcalvin", "link": "https://stackoverflow.com/users/4332260/cbcalvin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "closed_date": 1557961848, "answer_count": 1, "score": -2, "last_activity_date": 1558032779, "creation_date": 1557957743, "last_edit_date": 1558032779, "question_id": 56158232, "link": "https://stackoverflow.com/questions/56158232/what-is-missing-from-the-link-that-results-in-the-undefined-reference", "closed_reason": "Duplicate", "title": "What is missing from the link that results in the undefined reference?", "body": "<p>To investigate another problem (free() error at program end), I tried to override the destructor of the FLTK Fl_Input class.\nThe code compiles but fails in the link with an undefined reference.</p>\n\n<p>I have looked at a number of examples but am not understanding the answers enough to know what I need to change to fix the problem.\nWhile this program will not reproduce the  free() problem, if the Fl_Input objects (and Fl_Output objects) produce messages, I can determine which one is being freed invalidly.</p>\n\n<pre><code>#include &lt;FL/Fl.H&gt;\n#include &lt;FL/Fl_Input.H&gt;\n#include &lt;iostream&gt;\n\n\nclass Fl_Inputc:public Fl_Input\n{\n  public:\n    Fl_Inputc();\n    Fl_Inputc(int left, int up, int width, int height, const char* label=0);\n    ~Fl_Inputc()\n    {\n//   std::cout &lt;&lt;  \" Inputc destroyed \" &lt;&lt; std::endl;\n    };\n};\n\nFl_Inputc input1( 90, 10, 180, 20, \"     Input : \");\n\nint main(int argc, char **argv) {\n  return Fl::run();\n}\n</code></pre>\n\n<p>I expected a clean compile and link with a modified destructor and everything else inherited but instead got: </p>\n\n<pre><code>cbc:~/Projects/fltk/Tut/Potthast$ fltk-config --compile 07example4b.cxx \ng++ -I/usr/include/cairo -I/usr/include/glib-2.0\n-I/usr/lib/x86_64-linux-gnu/glib-2.0/include \n-I/usr/include/pixman-1 -I/usr/include/freetype2 \n-I/usr/include/libpng12 -I/usr/include/freetype2 \n-I/usr/include/cairo -I/usr/include/glib-2.0 \n-I/usr/lib/x86_64-linux-gnu/glib-2.0/include \n-I/usr/include/pixman-1 -I/usr/include/freetype2 \n-I/usr/include/libpng12 -g -O2 -fvisibility-inlines-hidden \n-D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_THREAD_SAFE -D_REENTRANT \n-o '07example4b' '07example4b.cxx' -Wl,-Bsymbolic-functions -lfltk \n-lX11\n/tmp/cc423i4F.o: In function `__static_initialization_and_destruction_0':\n/Projects/fltk/Tut/Potthast/07example4b.cxx:17: undefined reference \nto `Fl_Inputc::Fl_Inputc(int, int, int, int, char const*)' \ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>To resolve this using the suggestion from @alter igel I used a using statement to get the constructors from the base class.</p>\n\n<pre><code>#include &lt;FL/Fl.H&gt;\n#include &lt;FL/Fl_Input.H&gt;\n#include &lt;iostream&gt;\n\n\nclass Fl_Inputc:public Fl_Input\n{\n    public:\n    using Fl_Input::Fl_Input;\n    ~Fl_Inputc()\n    {\n     std::cout &lt;&lt;  \" Inputc destroyed \" &lt;&lt; std::endl;\n        };\n};\n\nFl_Input  input0( 90, 10, 180, 20, \"     Input0: \");\nFl_Inputc input1( 90, 40, 180, 20, \"     Input1: \");\n\nint main(int argc, char **argv) {\n  return Fl::run();\n}\n</code></pre>\n"}, {"tags": ["c++", "matrix", "visual-c++"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1557957138, "post_id": 56158033, "comment_id": 98945110, "body": "Ditch that code. Use something like BLAS which is part of the boost distribution. Inverting a matrix is surprisingly trivial computationally (you don&#39;t do it the way you were taught at school but use LU decomposition)."}, {"owner": {"reputation": 675, "user_id": 3259789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a55f2fc4903a6c4cc3d4554c7a970d41?s=128&d=identicon&r=PG&f=1", "display_name": "rAndom69", "link": "https://stackoverflow.com/users/3259789/random69"}, "edited": false, "score": 0, "creation_date": 1557957177, "post_id": 56158033, "comment_id": 98945122, "body": "3d matrix has easier solution than 5d. google and determinant is Your friend."}, {"owner": {"reputation": 675, "user_id": 3259789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a55f2fc4903a6c4cc3d4554c7a970d41?s=128&d=identicon&r=PG&f=1", "display_name": "rAndom69", "link": "https://stackoverflow.com/users/3259789/random69"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1557957284, "post_id": 56158033, "comment_id": 98945152, "body": "@Bathsheba man, thanks, I&#39;m really long out of school :) learned something new."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 675, "user_id": 3259789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a55f2fc4903a6c4cc3d4554c7a970d41?s=128&d=identicon&r=PG&f=1", "display_name": "rAndom69", "link": "https://stackoverflow.com/users/3259789/random69"}, "edited": false, "score": 0, "creation_date": 1557957561, "post_id": 56158033, "comment_id": 98945222, "body": "@rAndom69: Out of interest, I&#39;ve put a &quot;sketch&quot; answer below."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 3, "last_activity_date": 1557957910, "last_edit_date": 1557957910, "creation_date": 1557957525, "answer_id": 56158186, "question_id": 56158033, "link": "https://stackoverflow.com/questions/56158033/i-need-help-adapting-a-code-to-work-out-a-3x3-matrix-and-displaying-the-identity/56158186#56158186", "title": "I need help adapting a code to work out a 3x3 matrix and displaying the identity matrix?", "body": "<p>(I'll retract if the community shows it doesn't like this answer).</p>\n\n<p>Computationally you don't calculate the inverse of a matrix like you were taught to at school; as the algorithm performs terribly for higher dimensions.</p>\n\n<p>This is how I compute the inverse of a matrix. I use the BLAS distribution from Boost. I wrap the matrix class in my own <code>matrixT</code> but here's the code to demonstrate the incremental simplicity:</p>\n\n<pre><code>// Inversion operator\nmatrixT I() const\n{\n     matrixT A(*this);\n     boost::numeric::ublas::permutation_matrix&lt;std::size_t&gt; pm(rows());\n     if (boost::numeric::ublas::lu_factorize(A, pm)){\n         throw \"matrix is singular\";\n     }\n     matrixT ret = identity_matrix(rows());\n     boost::numeric::ublas::lu_substitute(A, pm, ret);\n     return ret;\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 10818478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12ceb96b2bd02b3deb214e0f2564adc0?s=128&d=identicon&r=PG&f=1", "display_name": "Cinna", "link": "https://stackoverflow.com/users/10818478/cinna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "closed_date": 1557983977, "accepted_answer_id": 56158186, "answer_count": 1, "score": -1, "last_activity_date": 1557957910, "creation_date": 1557956616, "question_id": 56158033, "link": "https://stackoverflow.com/questions/56158033/i-need-help-adapting-a-code-to-work-out-a-3x3-matrix-and-displaying-the-identity", "closed_reason": "Not suitable for this site", "title": "I need help adapting a code to work out a 3x3 matrix and displaying the identity matrix?", "body": "<p>Hi I have already programmed on c++ to solve a 3x3 matrix. However I also need to show that multiplying a matrix by it's inverse will give the unit matrix. I have found this code that does this but it's very complicated and for a 5x5 matrix. I was hoping someone could adapt it and explain it for me, I'm new to coding and struggling. With this code it has no option for you to input your code and im unsure of how to edit it to do this and to make it for a 3x3 matrix. Any help will be appreciated thank you.</p>\n\n<p>I have got the code from this link and is using it on microsoft visual studio.</p>\n\n<p><a href=\"https://www.sanfoundry.com/cpp-program-find-inverse-matrix/\" rel=\"nofollow noreferrer\">https://www.sanfoundry.com/cpp-program-find-inverse-matrix/</a></p>\n"}, {"tags": ["c++", "llvm", "libc++"], "comments": [{"owner": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "edited": false, "score": 0, "creation_date": 1557960095, "post_id": 56157966, "comment_id": 98945833, "body": "I&#39;m not sure why you tagged this with &quot;libc++&quot;, since I see no standard library bits here."}, {"owner": {"reputation": 95, "user_id": 11486686, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UVIO0rVCK3U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdz-vgMbGumVVF74MTAGeqZkyrnEA/mo/photo.jpg?sz=128", "display_name": "John Galt", "link": "https://stackoverflow.com/users/11486686/john-galt"}, "reply_to_user": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "edited": false, "score": 0, "creation_date": 1557960989, "post_id": 56157966, "comment_id": 98946014, "body": "@MarshallClow because that is the error i got. And it confuses me quiet a lot as well. I was hoping someone with advanced knowledge will be able to explain why does this happen, I am sure that llvm itself uses libc++ at some point"}, {"owner": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "edited": false, "score": 0, "creation_date": 1557972159, "post_id": 56157966, "comment_id": 98947902, "body": "<code>libc++abi</code> is a support library that handles things like exception unwinding etc for libc++."}], "owner": {"reputation": 95, "user_id": 11486686, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UVIO0rVCK3U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdz-vgMbGumVVF74MTAGeqZkyrnEA/mo/photo.jpg?sz=128", "display_name": "John Galt", "link": "https://stackoverflow.com/users/11486686/john-galt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1557956250, "creation_date": 1557956250, "question_id": 56157966, "link": "https://stackoverflow.com/questions/56157966/llvm-libcabi-dylib-pure-virtual-function-called-and-unexpected-behavior", "title": "LLVM libc++abi.dylib: Pure virtual function called and unexpected behavior", "body": "<p>I am writing a main function that is supposed to call other functions, and , but I am getting this error \n<code>libc++abi.dylib: Pure virtual function called!</code></p>\n\n<p>the way i inject function calls into main function is : </p>\n\n<pre><code>Type * returnType = Type::getInt32Ty(TheContext);\n    std::vector&lt;Type *&gt; argTypes(0, Type::getInt32Ty(TheContext));\n\n    FunctionType * functionType = FunctionType::get(returnType, argTypes, false);\n    Function * function = Function::Create(functionType, Function::ExternalLinkage, \"main\", TheModule.get());\n    function-&gt;getBasicBlockList().clear();\n    BasicBlock * BB = BasicBlock::Create(TheContext, \"entry\", function);\n\n    Builder.SetInsertPoint(BB);\n    for (const auto &amp; call : calls) {\n        Builder.CreateCall(call.first, call.second, \"call\");\n    }\n    Builder.CreateRet(Builder.getInt32(0));\n    verifyFunction(*function);\n</code></pre>\n\n<p>and if i run this for loop, i get mentioned error \nbut generated IR seems to be fine, except for some reason it calls \"calltmp? instead of \"call\" do you know how can i fix this ? </p>\n\n<pre><code>declare i32 @writeln(i32)\n\ndefine i32 @a() {\nentry:\n  ret i32 3\n}\n\nine i32 @__anon_call() {\nentry:\n  %calltmp = call i32 @a()\n  %calltmp1 = call i32 @writeln(i32 %calltmp)\n  ret i32 %calltmp1\n\nentry2:                                           ; No predecessors!\n  %calltmp3 = call i32 @a()\n  %calltmp4 = call i32 @writeln(i32 %calltmp3)\n  ret i32 %calltmp4\n}\n\ndefine i32 @main() {\nentry:\n  %call = call i32 @a()\n  %call1 = call i32 @writeln(i32 %calltmp)\n  %call2 = call i32 @a()\n  %call3 = call i32 @writeln(i32 %calltmp3)\n  ret i32 0\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 675, "user_id": 3259789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a55f2fc4903a6c4cc3d4554c7a970d41?s=128&d=identicon&r=PG&f=1", "display_name": "rAndom69", "link": "https://stackoverflow.com/users/3259789/random69"}, "edited": false, "score": 0, "creation_date": 1557956421, "post_id": 56157938, "comment_id": 98944915, "body": "Please provide simulation code. As sidenote, &quot;What I want is to be able to writing and reading data to the object while is running inside the thread. Is this the way to go?&quot; Depends on workload which You did not specify. What you really have to understand is how threads work and performance tradeoffs. These are IMO best learned on lowest level - assembly."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1557956488, "post_id": 56157938, "comment_id": 98944936, "body": "related/dupe: <a href=\"https://stackoverflow.com/questions/42894629/correct-use-of-functor-for-c-stl-thread\" title=\"correct use of functor for c stl thread\">stackoverflow.com/questions/42894629/&hellip;</a>"}, {"owner": {"reputation": 2658, "user_id": 3264295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LtN8l.png?s=128&g=1", "display_name": "mukunda", "link": "https://stackoverflow.com/users/3264295/mukunda"}, "edited": false, "score": 0, "creation_date": 1557956657, "post_id": 56157938, "comment_id": 98944978, "body": "There are a lot of things to be aware of when writing threaded code, particularly proper synchronization between threads. I&#39;m assuming that your problem in particular is that you&#39;re copying the simulation, and the thread is working with a copy, but there are still other issues with synchronization that can cause undefined behavior from both threads using <code>count</code>."}, {"owner": {"reputation": 6006, "user_id": 444423, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cde8758b981f38410371c4c7a9d3a784?s=128&d=identicon&r=PG", "display_name": "Killrazor", "link": "https://stackoverflow.com/users/444423/killrazor"}, "edited": false, "score": 0, "creation_date": 1557958363, "post_id": 56157938, "comment_id": 98945433, "body": "Edited! As you may know, is a simplification to do not write a lot of code."}, {"owner": {"reputation": 6006, "user_id": 444423, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cde8758b981f38410371c4c7a9d3a784?s=128&d=identicon&r=PG", "display_name": "Killrazor", "link": "https://stackoverflow.com/users/444423/killrazor"}, "reply_to_user": {"reputation": 2658, "user_id": 3264295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LtN8l.png?s=128&g=1", "display_name": "mukunda", "link": "https://stackoverflow.com/users/3264295/mukunda"}, "edited": false, "score": 0, "creation_date": 1557958974, "post_id": 56157938, "comment_id": 98945585, "body": "@mukunda I edited my post. When I try to pass as reference I get an error. What I interpret is that passing as reference has been marked as deleted."}], "answers": [{"comments": [{"owner": {"reputation": 6006, "user_id": 444423, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cde8758b981f38410371c4c7a9d3a784?s=128&d=identicon&r=PG", "display_name": "Killrazor", "link": "https://stackoverflow.com/users/444423/killrazor"}, "edited": false, "score": 0, "creation_date": 1557991457, "post_id": 56158523, "comment_id": 98953331, "body": "Thanks for your advice. Now thread is working I could start learning about the problems with multithreading and access to resources"}], "tags": [], "owner": {"reputation": 331, "user_id": 10756290, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGzIs.png?s=128&g=1", "display_name": "salchint", "link": "https://stackoverflow.com/users/10756290/salchint"}, "is_accepted": false, "score": 1, "last_activity_date": 1557959824, "creation_date": 1557959824, "answer_id": 56158523, "question_id": 56157938, "link": "https://stackoverflow.com/questions/56157938/read-write-information-to-class-in-another-thread/56158523#56158523", "title": "Read/Write information to class in another thread", "body": "<p>The example section of <a href=\"https://en.cppreference.com/w/cpp/thread/thread/thread\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/thread/thread/thread</a> demonstrates how to pass a class' member function and a reference to an instance of that class to a <code>std::thread</code>. See <code>std::thread t5(&amp;foo::bar, &amp;f);</code> in that sample coding.</p>\n\n<p>This way you should be able to share one instance of <code>sim::Simulation</code> from your sample coding between the two threads. <em>BUT</em> this will open doors for all kinds of synchronization problems and races on the shared object/fields. So take care when you go beyond sharing just an <code>count</code>, which I presume is from an atomicly writable type. </p>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 8351526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b15d66bc22d8fdea1bd1f904aca1cee5?s=128&d=identicon&r=PG", "display_name": "devin", "link": "https://stackoverflow.com/users/8351526/devin"}, "is_accepted": true, "score": 1, "last_activity_date": 1557970008, "last_edit_date": 1557970008, "creation_date": 1557969765, "answer_id": 56159570, "question_id": 56157938, "link": "https://stackoverflow.com/questions/56157938/read-write-information-to-class-in-another-thread/56159570#56159570", "title": "Read/Write information to class in another thread", "body": "<p><code>std::thread thread(&amp;simulation);</code> thread initialization error</p>\n\n<p>Here is a similar example</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class Simulation {\npublic:\n    Simulation() : count(0), isRunning(true) {}\n\n    void Simulation::run() {\n        while (isRunning) {\n            std::cout &lt;&lt; \"Processing information\" &lt;&lt; std::endl;\n            count++;\n        }\n    }\n\n    void Simulation::dispose() { isRunning = false; }\n\n    int Simulation::getCount() { return count; }\n\nprivate:\n    int count;\n    bool isRunning;\n}\n\nint mian() {\n\n    Simulation simulation;\n    std::thread thread(&amp;Simulation::run, &amp;simulation);\n    while (simulation.getCount() &lt; 15) {\n        // wait\n    }\n    simulation.dispose();\n    simulation.join();\n    cout &lt;&lt; simulation.getCount() &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 6006, "user_id": 444423, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cde8758b981f38410371c4c7a9d3a784?s=128&d=identicon&r=PG", "display_name": "Killrazor", "link": "https://stackoverflow.com/users/444423/killrazor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 56159570, "answer_count": 2, "score": 0, "last_activity_date": 1557970008, "creation_date": 1557956100, "last_edit_date": 1557958609, "question_id": 56157938, "link": "https://stackoverflow.com/questions/56157938/read-write-information-to-class-in-another-thread", "title": "Read/Write information to class in another thread", "body": "<p>maybe I'm completely lost but I'm trying to learn threads in c++ and this code is not working quite well:</p>\n\n<p>The relevant code is</p>\n\n<pre><code>TEST_F(TestSimulation, run_could_be_closed) {\n    sim::Simulation simulation;\n    std::thread thread(simulation);\n    while (simulation.getCount() &lt; 15000) {\n        // wait\n    }\n    simulation.dispose();\n}\n</code></pre>\n\n<pre><code>void sim::Simulation::run() {  \n    while (isRunning) {\n        std::cout &lt;&lt; \"Processing information\" &lt;&lt; std::endl;\n        count++;\n    }\n}\n\nvoid sim::Simulation::dispose() {\n    isRunning = false;\n}\n\nint sim::Simulation::getCount() {\n    return count;\n}\nvoid sim::Simulation::operator()() {\n    init();\n    run();\n}\n</code></pre>\n\n<p>Seems that the Thread class creates a copy of the object sent as parameter, so when I call <code>simulation.getCount()</code> in main thread, it always returns 0.</p>\n\n<p>When I try to pass as reference <code>std::thread thread(&amp;simulation);</code> I get an error </p>\n\n<pre><code>/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/thread:336:5: error: attempt to use a deleted function\n    __invoke(_VSTD::move(_VSTD::get&lt;1&gt;(__t)), _VSTD::move(_VSTD::get&lt;_Indices&gt;(__t))...);\n</code></pre>\n\n<p>What I want is to be able to writing and reading data to the object while is running inside the thread. Is this the way to go?</p>\n"}, {"tags": ["c++", "templates", "overloading", "operator-keyword"], "comments": [{"owner": {"reputation": 980, "user_id": 10185183, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oUA_ZF9CW5c/AAAAAAAAAAI/AAAAAAAACX0/TLhc82gWtsI/photo.jpg?sz=128", "display_name": "arsdever", "link": "https://stackoverflow.com/users/10185183/arsdever"}, "edited": false, "score": 0, "creation_date": 1557957532, "post_id": 56157903, "comment_id": 98945214, "body": "What is the question?"}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1557957639, "post_id": 56157903, "comment_id": 98945245, "body": "Pleas show us the matrix class you have written."}, {"owner": {"reputation": 31, "user_id": 11374098, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5boaSwkHgNk/AAAAAAAAAAI/AAAAAAAAGCw/q6p7sJNAkgs/photo.jpg?sz=128", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0412\u043b\u0430\u0434\u0438\u0441\u043b\u0430\u0432\u043e\u0432", "link": "https://stackoverflow.com/users/11374098/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%92%d0%bb%d0%b0%d0%b4%d0%b8%d1%81%d0%bb%d0%b0%d0%b2%d0%be%d0%b2"}, "reply_to_user": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1557958270, "post_id": 56157903, "comment_id": 98945402, "body": "@Beta <code>c++  template&lt;typename T, int M, int N&gt; class SimMatrix { private:     T a[N &#47; 2 * (N + 1)];     int k; public:     SimMatrix();     &#47;&#47;**************     class Row{     private:         SimMatrix *m;         int i;     public:         Row(SimMatrix *m, int i);         T&amp; operator[] (int j)     };      SimMatrix::Row operator[] (int i)     {         return Row(this, i);     }     &#47;&#47;**************     Row operator[] (int i); ... };  </code>"}, {"owner": {"reputation": 31, "user_id": 11374098, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5boaSwkHgNk/AAAAAAAAAAI/AAAAAAAAGCw/q6p7sJNAkgs/photo.jpg?sz=128", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0412\u043b\u0430\u0434\u0438\u0441\u043b\u0430\u0432\u043e\u0432", "link": "https://stackoverflow.com/users/11374098/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%92%d0%bb%d0%b0%d0%b4%d0%b8%d1%81%d0%bb%d0%b0%d0%b2%d0%be%d0%b2"}, "reply_to_user": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1557958348, "post_id": 56157903, "comment_id": 98945430, "body": "@Beta sorry that it is without newlines, idk how to do it in comments"}, {"owner": {"reputation": 31, "user_id": 11374098, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5boaSwkHgNk/AAAAAAAAAAI/AAAAAAAAGCw/q6p7sJNAkgs/photo.jpg?sz=128", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0412\u043b\u0430\u0434\u0438\u0441\u043b\u0430\u0432\u043e\u0432", "link": "https://stackoverflow.com/users/11374098/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%92%d0%bb%d0%b0%d0%b4%d0%b8%d1%81%d0%bb%d0%b0%d0%b2%d0%be%d0%b2"}, "reply_to_user": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1557958442, "post_id": 56157903, "comment_id": 98945455, "body": "@Beta if it will be better, here it is on Pastebin <a href=\"https://pastebin.com/AwaJmW0S\" rel=\"nofollow noreferrer\">pastebin.com/AwaJmW0S</a>"}, {"owner": {"reputation": 12572, "user_id": 8534008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8f2af9937cac66f08b6ee6e4219cc0d?s=128&d=identicon&r=PG&f=1", "display_name": "GBlodgett", "link": "https://stackoverflow.com/users/8534008/gblodgett"}, "edited": false, "score": 2, "creation_date": 1557959325, "post_id": 56157903, "comment_id": 98945670, "body": "Please <a href=\"https://stackoverflow.com/posts/56157903/edit\">edit</a> your question to include the code"}], "owner": {"reputation": 31, "user_id": 11374098, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5boaSwkHgNk/AAAAAAAAAAI/AAAAAAAAGCw/q6p7sJNAkgs/photo.jpg?sz=128", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0412\u043b\u0430\u0434\u0438\u0441\u043b\u0430\u0432\u043e\u0432", "link": "https://stackoverflow.com/users/11374098/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%92%d0%bb%d0%b0%d0%b4%d0%b8%d1%81%d0%bb%d0%b0%d0%b2%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1557988325, "creation_date": 1557955910, "last_edit_date": 1557988325, "question_id": 56157903, "link": "https://stackoverflow.com/questions/56157903/how-to-get-i-j-th-element-of-symmetric-matrix-using-operator", "title": "How to get i, j -th element of symmetric matrix using operator[]", "body": "<p>I have a symmetric matrix, represented as in this question ( <a href=\"https://stackoverflow.com/questions/3187957/how-to-store-a-symmetric-matrix\">How to store a symmetric matrix?</a> ). And I need to get i, j elements of it using overloaded operator[]</p>\n\n<p>In the question above there are some options with methods, but not operator. So, I tried to search for something else. I saw, how to do this thing on a common matrix, but there is no information about matrix, represented in vector</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int fromMatrixToVector(int i, int j, int N)\n{\n   if (i &lt;= j)\n      return i * N - (i - 1) * i / 2 + j - i;\n   else\n      return j * N - (j - 1) * j / 2 + i - j;\n}\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename T, int M, int N&gt;\nclass SimMatrix\n{\nprivate:\n    T a[N / 2 * (N + 1)];\n    int k;\n\npublic:\n    SimMatrix();\n    //**************\n    class Row{\n    private:\n        SimMatrix *m;\n        int i;\n    public:\n        Row(SimMatrix *m, int i);\n        T&amp; operator[] (int j)\n    };\n\n    SimMatrix::Row operator[] (int i)\n    {\n        return Row(this, i);\n    }\n    //**************\n...\n    Row operator[] (int i);\n   };\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-code", "sfml"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 12242443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd22c4051ea0df6c52e35eb6d9400d87?s=128&d=identicon&r=PG&f=1", "display_name": "Hannoy", "link": "https://stackoverflow.com/users/12242443/hannoy"}, "is_accepted": false, "score": 0, "last_activity_date": 1571508840, "last_edit_date": 1571508840, "creation_date": 1571507163, "answer_id": 58466392, "question_id": 56157829, "link": "https://stackoverflow.com/questions/56157829/visual-studio-code-sfml-libraries-not-found/58466392#58466392", "title": "Visual Studio Code - SFML libraries not found", "body": "<p>You should try to put <code>SFML-2.5.1-macos-clang/include/**</code> instead of <code>SFML-2.5.1-macos-clang/include/SFML/</code> in <code>includePath</code>.</p>\n"}], "owner": {"reputation": 81, "user_id": 11506519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3155d977e29a159fe4d998c25beb14d6?s=128&d=identicon&r=PG&f=1", "display_name": "achandra03", "link": "https://stackoverflow.com/users/11506519/achandra03"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 653, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1571508840, "creation_date": 1557955491, "question_id": 56157829, "link": "https://stackoverflow.com/questions/56157829/visual-studio-code-sfml-libraries-not-found", "title": "Visual Studio Code - SFML libraries not found", "body": "<p>I'm trying to experiment with SFML in VScode, but the libraries aren't being found for me. </p>\n\n<p>I've tried changing the <code>c_cpp_properties.json</code> file to add the libraries to the <code>includePath</code>, but they're still not being found.</p>\n\n<p>This is the main class:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;Window.hpp&gt;\n#include &lt;Graphics.hpp&gt;\n\n\n\nint main()\n{\n    // create the window\n    sf::RenderWindow window(sf::VideoMode(800, 600), \"My window\");\n\n    // run the program as long as the window is open\n    while (window.isOpen())\n    {\n        // check all the window's events that were triggered since the last iteration of the loop\n        sf::Event event;\n        while (window.pollEvent(event))\n        {\n            // \"close requested\" event: we close the window\n            if (event.type == sf::Event::Closed)\n                window.close();\n        }\n\n        // clear the window with black color\n        window.clear(sf::Color::Black);\n\n        // draw everything here...\n        // window.draw(...);\n\n        // end the current frame\n        window.display();\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Here's the properties file:</p>\n\n<pre><code>{\n    \"configurations\": [\n        {\n            \"name\": \"Mac\",\n            \"includePath\": [\n                \"/Users/arnavchandra/Desktop/tic/SFML-2.5.1-macos-clang/include/SFML/\"\n            ],\n            \"defines\": [],\n            \"macFrameworkPath\": [\n                \"/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.14.sdk/System/Library/Frameworks\"\n            ],\n            \"compilerPath\": \"/usr/bin/clang\",\n            \"cStandard\": \"c11\",\n            \"cppStandard\": \"c++17\",\n            \"intelliSenseMode\": \"clang-x64\"\n        }\n    ],\n    \"version\": 4\n}\n</code></pre>\n\n<p>For <code>#include &lt;iostream&gt;</code>, I'm getting this error:</p>\n\n<p><code>#include errors detected. Please update your includePath. Squiggles are disabled for this translation unit (/Users/arnavchandra/Desktop/tic/main.cpp).\n</code></p>\n\n<p>For <code>#include &lt;Graphics.hpp&gt;</code>, I'm getting this error:</p>\n\n<p><code>cannot open source file \"SFML/Window.hpp\" (dependency of \"Graphics.hpp\")\n</code></p>\n\n<p>When I run it, I get this error:</p>\n\n<p><code>main.cpp:2:10: fatal error: 'Window.hpp' file not found\n1 error generated.</code></p>\n"}, {"tags": ["c++", "visual-studio", "c++17", "codeblocks"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 8, "creation_date": 1557955557, "post_id": 56157827, "comment_id": 98944631, "body": "Does you book actually have <code>if(int a {2}, int b {2}</code> in it?  If so throw it out and get one from <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">here</a>."}, {"owner": {"reputation": 9, "user_id": 10732266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fad648661d6b37c14f52449cf5a91d61?s=128&d=identicon&r=PG&f=1", "display_name": "Ujiro Oduokpe", "link": "https://stackoverflow.com/users/10732266/ujiro-oduokpe"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1557955631, "post_id": 56157827, "comment_id": 98944660, "body": "I&#39;m currently using Visual Studio 2019 and the latest version of codeblocks on my machine"}, {"owner": {"reputation": 9, "user_id": 10732266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fad648661d6b37c14f52449cf5a91d61?s=128&d=identicon&r=PG&f=1", "display_name": "Ujiro Oduokpe", "link": "https://stackoverflow.com/users/10732266/ujiro-oduokpe"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1557955724, "post_id": 56157827, "comment_id": 98944690, "body": "NathanOliver The actual code is if(int a {2}, int b {2}; a&lt;b) {cout &lt;&lt; &quot;a is less than b&quot; &lt;&lt; endl;}"}, {"owner": {"reputation": 21426, "user_id": 2495283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ef72b32709062aa479476844515073?s=128&d=identicon&r=PG", "display_name": "Claies", "link": "https://stackoverflow.com/users/2495283/claies"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1557955823, "post_id": 56157827, "comment_id": 98944726, "body": "Agree with @NathanOliver;  that code is completely flawed."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 3, "creation_date": 1557955827, "post_id": 56157827, "comment_id": 98944729, "body": "Remove the 2nd <code>int</code> and it will compile live:  <a href=\"https://godbolt.org/z/YOy5zF\" rel=\"nofollow noreferrer\">godbolt.org/z/YOy5zF</a>    See <i>&quot;If Statements with Initializer&quot;</i>  here <a href=\"https://en.cppreference.com/w/cpp/language/if\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/if</a>"}, {"owner": {"reputation": 9, "user_id": 10732266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fad648661d6b37c14f52449cf5a91d61?s=128&d=identicon&r=PG&f=1", "display_name": "Ujiro Oduokpe", "link": "https://stackoverflow.com/users/10732266/ujiro-oduokpe"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1557956141, "post_id": 56157827, "comment_id": 98944826, "body": "Thanks @NathanOliver for repharsing my post. I think it is properly presented now."}, {"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 3, "creation_date": 1557956221, "post_id": 56157827, "comment_id": 98944857, "body": "Have you tried what compiler suggests? Add <code>&#47;std:C++17</code> to compiler options"}, {"owner": {"reputation": 9, "user_id": 10732266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fad648661d6b37c14f52449cf5a91d61?s=128&d=identicon&r=PG&f=1", "display_name": "Ujiro Oduokpe", "link": "https://stackoverflow.com/users/10732266/ujiro-oduokpe"}, "reply_to_user": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1557957639, "post_id": 56157827, "comment_id": 98945244, "body": "@Amadeus How can I do that?"}, {"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1558030465, "post_id": 56157827, "comment_id": 98975295, "body": "@UjiroOduokpe A simple search gives me: <a href=\"https://stackoverflow.com/questions/41308933/how-to-enable-c17-compiling-in-visual-studio\" title=\"how to enable c17 compiling in visual studio\">stackoverflow.com/questions/41308933/&hellip;</a>"}], "owner": {"reputation": 9, "user_id": 10732266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fad648661d6b37c14f52449cf5a91d61?s=128&d=identicon&r=PG&f=1", "display_name": "Ujiro Oduokpe", "link": "https://stackoverflow.com/users/10732266/ujiro-oduokpe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 201, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1557955597, "creation_date": 1557955477, "last_edit_date": 1557955597, "question_id": 56157827, "link": "https://stackoverflow.com/questions/56157827/my-c-compiler-does-not-compile-an-if-while-and-for-statement-with-a-var", "title": "My C++ Compiler does not compile an &quot;if&quot; &quot;while&quot;, and &quot;for&quot; statement with a variable declarations in it", "body": "<p>I'm currently learning C++17 from the book \"C++17 from beginner to professional\". In the control statements part of the book, I was told that one can declare variables to be used in an if statement inside the if round braces of the if statement i.e something like this </p>\n\n<pre><code>if(int a {2}, int b {2}; a&lt;b) {cout &lt;&lt; a &lt;&lt; endl;}\n</code></pre>\n\n<p>when I tried that using Code::Blocks it told me it was expecting a ')' before the ';' token. However in the book, there was nothing as such.</p>\n\n<p>On VisualStudio it was telling me </p>\n\n<blockquote>\n  <p>\"language feature 'init-statements in if/switch' requires C++ project compiler flag '/std:C++17'** </p>\n</blockquote>\n\n<p>In particular I was trying to run the code below.</p>\n\n<pre><code>char input;\ncin &gt;&gt; input;\nif (auto lower{ static_cast&lt;char&gt;(std::tolower(input)) }; lower &gt;= 'a' &amp;&amp; lower &lt;= 'z') {\n std::cout &lt;&lt; \"You've entered the letter '\" &lt;&lt; lower &lt;&lt; '\\'' &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 3, "creation_date": 1557955073, "post_id": 56157728, "comment_id": 98944480, "body": "Uh, Code Snippet 2 has no return statement, and is undefined behavior. Any decent compiler will issue a warning or maybe even an error for that."}, {"owner": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "edited": false, "score": 1, "creation_date": 1557955356, "post_id": 56157728, "comment_id": 98944566, "body": "And even if you put missing <code>return *this</code> in code snippet 2, then something like <code>Position p1, p2; ...; (p2 = p1).x = 5;</code> will behave differently between the two snippets."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 5, "creation_date": 1557955489, "post_id": 56157728, "comment_id": 98944606, "body": "The second snippet is better once obvious bug of not returning the value is fixed."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1557955628, "post_id": 56157728, "comment_id": 98944657, "body": "Both snippets are wrong. <code>operator=</code> must return <code>*this</code> by reference, so the 1st snippet is wrong because it returns <code>*this</code> by value instead, and the 2nd snippet is wrong because it does not <code>return</code> anything at all. The correct implementation should be more like this: <code>Position&amp; Position::operator=(Position pos) { this-&gt;x = pos.x; this-&gt;y = pos.y; return *this; }</code>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1557955881, "post_id": 56157728, "comment_id": 98944754, "body": "@RemyLebeau technically speaking, snippet 1 is not wrong (there is no requirement for assignment operator to return value by reference, or to return anything at all for this matter), it is just not idiomatic for multiple reasons."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1557956015, "post_id": 56157728, "comment_id": 98944791, "body": "@SergeyA see <a href=\"https://en.cppreference.com/w/cpp/language/operator_assignment\" rel=\"nofollow noreferrer\">Assignment operators</a> and <a href=\"https://stackoverflow.com/questions/4421706/\">What are the basic rules and idioms for operator overloading?</a>"}, {"owner": {"reputation": 963, "user_id": 7471267, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4GGWfiRBWAY/AAAAAAAAAAI/AAAAAAAAAFo/awzT9uvFc5E/photo.jpg?sz=128", "display_name": "Mirko", "link": "https://stackoverflow.com/users/7471267/mirko"}, "edited": false, "score": 0, "creation_date": 1557968537, "post_id": 56157728, "comment_id": 98947312, "body": "Also, I think argument should be <code>(const Position&amp; pos)</code> to avoid copying, that&#39;s more common."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1558012137, "post_id": 56157728, "comment_id": 98965251, "body": "Isn&#39;t your link a clear duplicate?"}], "answers": [{"tags": [], "owner": {"reputation": 3331, "user_id": 8038186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72ac0cc4d0f1414caf2172751b2ded50?s=128&d=identicon&r=PG&f=1", "display_name": "KoralK", "link": "https://stackoverflow.com/users/8038186/koralk"}, "is_accepted": true, "score": 2, "last_activity_date": 1557956745, "creation_date": 1557956745, "answer_id": 56158055, "question_id": 56157728, "link": "https://stackoverflow.com/questions/56157728/this-pointer-return-by-value-vs-return-by-reference/56158055#56158055", "title": "this pointer - return by value vs return by reference", "body": "<p>Pay attention to this post that @RemyLebeau mentioned before you choose the option that you want:  <a href=\"https://stackoverflow.com/questions/4421706/what-are-the-basic-rules-and-idioms-for-operator-overloading\">What are the basic rules and idioms for operator overloading?</a></p>\n\n<p>Example of differences between the two:</p>\n\n<pre><code>class Position1 {\npublic:\n    int x, y;\n\n    Position1 operator=(Position1 pos)\n    {\n        this-&gt;x = pos.x;\n        this-&gt;y = pos.y;\n        return *this;\n    }\n};\n\nclass Position2 {\npublic:\n    int x, y;\n\n    Position2&amp; operator=(Position2 pos)\n    {\n        this-&gt;x = pos.x;\n        this-&gt;y = pos.y;\n        return *this;\n    }\n};\n\nint main() {\n    Position1 p11, p12;\n    Position2 p21, p22;\n\n    //Position1 *p13 = &amp;(p12 = p11); // Compilation error: Taking address of temporary object..\n    p21.y = 20;\n    p21.x = 10;\n    Position2 *p23 = &amp;(p22 = p21); // Working - the `temporary object` is a reference to non temporary object.\n    p23-&gt;x = 99;\n    p23-&gt;y = 84;\n    cout &lt;&lt; p21.x &lt;&lt; \" \" &lt;&lt; p21.y; // didn't change\n    cout &lt;&lt; p22.x &lt;&lt; \" \" &lt;&lt; p22.y; // changed\n    cout &lt;&lt; p23-&gt;x &lt;&lt; \" \" &lt;&lt; p23-&gt;y; // changed\n\n    //===================================================\n\n    //(p12 = p11).y = 3; // Compiling error: Expression is not assignable\n    (p22 = p21).y = 3; // works\n    cout &lt;&lt; p21.x &lt;&lt; \" \" &lt;&lt; p21.y &lt;&lt; endl; // didn't change\n    cout &lt;&lt; p22.x &lt;&lt; \" \" &lt;&lt; p22.y &lt;&lt; endl; // changed\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 5228094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1310cecdc225fc918f5de1c0b82e574c?s=128&d=identicon&r=PG&f=1", "display_name": "Rejoy Mathews", "link": "https://stackoverflow.com/users/5228094/rejoy-mathews"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 56158055, "answer_count": 1, "score": -2, "last_activity_date": 1557956745, "creation_date": 1557954934, "last_edit_date": 1557955581, "question_id": 56157728, "link": "https://stackoverflow.com/questions/56157728/this-pointer-return-by-value-vs-return-by-reference", "title": "this pointer - return by value vs return by reference", "body": "<p>Pertaining to the <code>this</code> pointer, I wanted someone's opinion whether the below 2 snippets of code implement the same functionality or not.</p>\n\n<pre><code>Position Position::operator = (Position pos)\n{\n     this-&gt;x = pos.x;\n     this-&gt;y = pos.y;\n     return *this;\n}\n</code></pre>\n\n<p></p>\n\n<pre><code>Position &amp; Position::operator = (Position pos)\n{\n     this-&gt;x = pos.x;\n     this-&gt;y = pos.y;\n}\n</code></pre>\n\n<p>I know that the 1st snippet is more commonly used. However, I want to confirm if the 2nd snippet does the same functionality as I am passing a reference to the <code>this</code> object using <code>&amp;</code>.</p>\n"}, {"tags": ["c++", "c", "visual-studio"], "comments": [{"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1557955198, "post_id": 56157726, "comment_id": 98944516, "body": "If there is a &quot;way&quot; that someone else has already fathomed, it&#39;s probably just a block of <code>#define</code> statements to copy and paste into your code."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1557955241, "post_id": 56157726, "comment_id": 98944526, "body": "By not using Visual C? What could be easier than adding the definitions to the source code?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1557955325, "post_id": 56157726, "comment_id": 98944556, "body": "Suck it up. You can&#39;t have <i>that</i> many projects for <code>_CRT_SECURE_NO_WARNINGS</code> addition to be that much of a headache? It&#39;s how the toolset works I&#39;m afraid."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1557955357, "post_id": 56157726, "comment_id": 98944567, "body": "<code>Using the safe variants of the functions isn&#39;t an option for me.</code> care to elaborate?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1557955443, "post_id": 56157726, "comment_id": 98944589, "body": "They aren&#39;t all safer - because it is widely misunderstood how to use them. Such as the even more dangerous <code>scanf_s</code> when using <code>%c</code> and <code>%s</code> and <code>%[]</code>"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1557955453, "post_id": 56157726, "comment_id": 98944592, "body": "I sympathize with you. When I was working with VS, I had a check list of about 10 things I needed to do every time I created a new project. _CRT_SECURE_NO_WARNINGS was definitely on the list."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1557955628, "post_id": 56157726, "comment_id": 98944656, "body": "My standard definitions are <code>#define _CRT_SECURE_NO_WARNINGS</code> and <code>#define _CRT_SECURE_NO_DEPRECATE</code> and <code>#define _CRT_NONSTDC_NO_DEPRECATE</code> (and <code>#define _USE_MATH_DEFINES</code>). I use a standard framework that contains them. Extra work: NULL."}, {"owner": {"reputation": 87, "user_id": 8319548, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uQtW8DDYLIE/AAAAAAAAAAI/AAAAAAAAADM/AlOJOwc6Y5Y/photo.jpg?sz=128", "display_name": "LightningShock", "link": "https://stackoverflow.com/users/8319548/lightningshock"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1557955843, "post_id": 56157726, "comment_id": 98944733, "body": "@WeatherVane doing nothing after setting it up once is the easiest. Also definitions are not an option for me either."}, {"owner": {"reputation": 87, "user_id": 8319548, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uQtW8DDYLIE/AAAAAAAAAAI/AAAAAAAAADM/AlOJOwc6Y5Y/photo.jpg?sz=128", "display_name": "LightningShock", "link": "https://stackoverflow.com/users/8319548/lightningshock"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1557955878, "post_id": 56157726, "comment_id": 98944752, "body": "@SergeyA I&#39;m doing school projects and I&#39;m obligated to have the code portable and use certain standard libraries."}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1557955969, "post_id": 56157726, "comment_id": 98944778, "body": "@LightningShock The <code>#define</code> statements won&#39;t break compatibility with other compilers"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1557956013, "post_id": 56157726, "comment_id": 98944788, "body": "It is easier to start from <i>somewhere</i> rather than retyping everything. Mine has those <code>#define</code> definitions and a list of <code>#include</code> files. It&#39;s easier to remove those not needed than to keep typing them in in every project, and the task is no different with those definitions as well as the <code>#include</code> headers."}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 8319548, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uQtW8DDYLIE/AAAAAAAAAAI/AAAAAAAAADM/AlOJOwc6Y5Y/photo.jpg?sz=128", "display_name": "LightningShock", "link": "https://stackoverflow.com/users/8319548/lightningshock"}, "edited": false, "score": 0, "creation_date": 1573752303, "post_id": 56158600, "comment_id": 103995880, "body": "This one does it for me, thanks, but instead I just added my preprocessor definition on an empty C++ project and saved it as a template and it works wonders!"}], "tags": [], "owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "is_accepted": true, "score": 2, "last_activity_date": 1557960457, "creation_date": 1557960457, "answer_id": 56158600, "question_id": 56157726, "link": "https://stackoverflow.com/questions/56157726/how-to-disable-deprecation-warnings-for-c-c-compiler-globally-in-visual-studio/56158600#56158600", "title": "How to disable deprecation warnings for C/C++ compiler globally in Visual Studio 2019?", "body": "<p>You can create custom project templates in Visual Studio, so you should be able to create one of these with whatever <code>#defines</code> you want pre-configured in the properties page.</p>\n\n<p>MS documentation is <a href=\"https://docs.microsoft.com/en-us/visualstudio/ide/how-to-create-project-templates?view=vs-2019\" rel=\"nofollow noreferrer\">here</a> and a guy called Srinivasa Rao Dhulipalla has blogged about it <a href=\"https://www.ecanarys.com/Blogs/ArticleID/180/Create-custom-project-templates-in-Visual-Studio\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 87, "user_id": 8319548, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uQtW8DDYLIE/AAAAAAAAAAI/AAAAAAAAADM/AlOJOwc6Y5Y/photo.jpg?sz=128", "display_name": "LightningShock", "link": "https://stackoverflow.com/users/8319548/lightningshock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 895, "favorite_count": 0, "accepted_answer_id": 56158600, "answer_count": 1, "score": -1, "last_activity_date": 1557960457, "creation_date": 1557954919, "question_id": 56157726, "link": "https://stackoverflow.com/questions/56157726/how-to-disable-deprecation-warnings-for-c-c-compiler-globally-in-visual-studio", "title": "How to disable deprecation warnings for C/C++ compiler globally in Visual Studio 2019?", "body": "<p>I want to have deprecation warnings(C4996, the ones caused by calling functions like strcpy) disabled by default in all C/C++ projects in Visual Studio 2019.</p>\n\n<p>There are several ways on the internet on how to do it, but they are all on a per-project basis, the most straightforward way is to add _CRT_SECURE_NO_WARNINGS to the preprocessor definitions. But I want to achieve this effect automatically, without having to fiddle with the project setting each time I make a new project.</p>\n\n<p>I know there must be a way. I don't care how \"hacky\" the method is. Using the safe variants of the functions isn't an option for me.</p>\n"}, {"tags": ["c++", "boost", "multi-index", "boost-multi-index"], "comments": [{"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1557956820, "post_id": 56157722, "comment_id": 98945017, "body": "I may be reading it wrong but <a href=\"https://stackoverflow.com/questions/11558399/deleting-from-a-boost-multiindex\" title=\"deleting from a boost multiindex\">stackoverflow.com/questions/11558399/&hellip;</a> seems to say that erase is a member of an index and not a container.  Is it a duplicate?  Something else to look at: <a href=\"https://stackoverflow.com/questions/12579000/erase-element-per-key-from-multi-index-container-with-composite-key\" title=\"erase element per key from multi index container with composite key\">stackoverflow.com/questions/12579000/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1625, "user_id": 1139436, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a519e31546fe630d93d69728906be8e5?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/1139436/jon"}, "edited": false, "score": 0, "creation_date": 1558025593, "post_id": 56163717, "comment_id": 98973042, "body": "Yes, that rather subtle detail is what had escaped me."}], "tags": [], "owner": {"reputation": 4756, "user_id": 213114, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wWib4.jpg?s=128&g=1", "display_name": "Joaqu&#237;n M L&#243;pez Mu&#241;oz", "link": "https://stackoverflow.com/users/213114/joaqu%c3%adn-m-l%c3%b3pez-mu%c3%b1oz"}, "is_accepted": true, "score": 0, "last_activity_date": 1558121346, "last_edit_date": 1558121346, "creation_date": 1557993792, "answer_id": 56163717, "question_id": 56157722, "link": "https://stackoverflow.com/questions/56157722/unable-to-remove-element-from-boost-multi-index-container/56163717#56163717", "title": "Unable to remove element from boost multi_index_container++", "body": "<p>Rather than</p>\n\n<pre><code>mapDb.erase(clientIter);\n</code></pre>\n\n<p>you have to write</p>\n\n<pre><code>clientView.erase(clientIter);\n</code></pre>\n\n<p>Remember that each index (view) has its own iterator type, and you can't freely interchange them. As a convenience, the container itself (<code>mapDb</code> here) behaves like its first (#0) index, so <code>mapDb.erase</code> can only accept an iterator for <code>serverView</code>.</p>\n"}], "owner": {"reputation": 1625, "user_id": 1139436, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a519e31546fe630d93d69728906be8e5?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/1139436/jon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 56163717, "answer_count": 1, "score": 0, "last_activity_date": 1558121346, "creation_date": 1557954906, "question_id": 56157722, "link": "https://stackoverflow.com/questions/56157722/unable-to-remove-element-from-boost-multi-index-container", "title": "Unable to remove element from boost multi_index_container++", "body": "<p>Building on CentOS 7, g++ 4.8.5-28. Language standard: C++03</p>\n\n<p>Working sample: <a href=\"https://godbolt.org/z/ijSFrK\" rel=\"nofollow noreferrer\">https://godbolt.org/z/ijSFrK</a></p>\n\n<p>In the method RemoveMapping, the call to <code>mapDb.erase(clientIter);</code> is failing (see sample code in link for the actual code and the compile error). I am wondering if it is because of the multiple ordered indexes which are both using composite keys and key extractor methods?</p>\n"}, {"tags": ["c++", "class", "oop", "virtual"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1531591"}, "edited": false, "score": 0, "creation_date": 1557953419, "post_id": 56157359, "comment_id": 98943854, "body": "This code does not compile"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1557953507, "post_id": 56157359, "comment_id": 98943886, "body": "Look at the return type of <code>foo</code>.  Notice anything missing?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1557954430, "post_id": 56157359, "comment_id": 98944237, "body": "<code>foo()</code> returns an <code>A</code> object <i>by value</i>, not <i>by reference</i>, so a <i>copy</i> of <code>input</code> is being returned, and that copy requires the copy constructor to be called."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 11327435, "user_type": "registered", "profile_image": "https://graph.facebook.com/2332678793451674/picture?type=large", "display_name": "ZAX9732", "link": "https://stackoverflow.com/users/11327435/zax9732"}, "edited": false, "score": 0, "creation_date": 1557953933, "post_id": 56157513, "comment_id": 98944058, "body": "so return input; is like saying // myA = myOtherB(input); i mean when we return an object, the other object will receive it with the copy constructor right?"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 85, "user_id": 11327435, "user_type": "registered", "profile_image": "https://graph.facebook.com/2332678793451674/picture?type=large", "display_name": "ZAX9732", "link": "https://stackoverflow.com/users/11327435/zax9732"}, "edited": false, "score": 0, "creation_date": 1557960136, "post_id": 56157513, "comment_id": 98945838, "body": "well, <code>myA</code> is already constructed, so the <code>myA</code> call operator is called with the copy as parameter"}], "tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": true, "score": 2, "last_activity_date": 1557953798, "creation_date": 1557953798, "answer_id": 56157513, "question_id": 56157359, "link": "https://stackoverflow.com/questions/56157359/why-did-the-copy-operator-get-called/56157513#56157513", "title": "Why did the copy operator get called?", "body": "<blockquote>\n  <p>At the last line <code>myA = foo(myOtherB);</code>, the function will return type an object of type B</p>\n</blockquote>\n\n<p>Not true. Your function returns an object of type <code>A</code> by value. That means, any value you feed this object to be constructed with will be used to construct a new object of that exact type. So in other words:</p>\n\n<pre><code>int foo(float a) {\n    return a + 0.5;\n}\n\nint u;\n\nu = foo(9.3);\n\n// u has a value of 10\n</code></pre>\n\n<p>Don't expect <code>u</code> to hold a value that a int cannot.</p>\n\n<p>Same thing if you use user defined types:</p>\n\n<pre><code>A foo(A&amp; input) {\n input.foo();\n return input; // this expression returns a new A\n               // using the value of `input`\n}\n\nA myA;\n\nmyA = foo(myOtherB);\n\n// why would `myA` be anything else than the value of an A?\n</code></pre>\n\n<hr>\n\n<p>So then, what happen here?</p>\n\n<blockquote>\n<pre><code>B foo()\n A copy ctor //what calls this?\n A op=\n</code></pre>\n</blockquote>\n\n<pre><code>A foo(A&amp; input) {\n input.foo(); // prints B foo, virtual call. a reference to A that\n              // points to an object of subclass type B\n\n return input; // copy `input` into the return value object\n}\n</code></pre>\n\n<p>Then, the operator= gets called.</p>\n"}, {"comments": [{"owner": {"reputation": 85, "user_id": 11327435, "user_type": "registered", "profile_image": "https://graph.facebook.com/2332678793451674/picture?type=large", "display_name": "ZAX9732", "link": "https://stackoverflow.com/users/11327435/zax9732"}, "edited": false, "score": 0, "creation_date": 1557954554, "post_id": 56157546, "comment_id": 98944279, "body": "so return input; is like saying // myA = myOtherB(input); or returns to an object will always invoke the copy constructor"}, {"owner": {"reputation": 238, "user_id": 11467100, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E4y2B.png?s=128&g=1", "display_name": "cj.vaughter", "link": "https://stackoverflow.com/users/11467100/cj-vaughter"}, "reply_to_user": {"reputation": 85, "user_id": 11327435, "user_type": "registered", "profile_image": "https://graph.facebook.com/2332678793451674/picture?type=large", "display_name": "ZAX9732", "link": "https://stackoverflow.com/users/11327435/zax9732"}, "edited": false, "score": 0, "creation_date": 1557955045, "post_id": 56157546, "comment_id": 98944466, "body": "A function returning an object creates a temporary object using the copy constructor. Then the <code>=</code> operator assigns the temporary object to yours."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1557961750, "post_id": 56157546, "comment_id": 98946160, "body": "@cj.vaughter Actually, that&#39;s not true, see Guillaume Racicot&#39;s answer, especially the last part.  It&#39;s the fact that <code>foo</code> returns a copy of its input parameter that generates the call to <code>A</code>&#39;s copy constructor.  Otherwise, the copy would be <a href=\"https://en.cppreference.com/w/cpp/language/copy_elision\" rel=\"nofollow noreferrer\">elided</a>."}, {"owner": {"reputation": 238, "user_id": 11467100, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E4y2B.png?s=128&g=1", "display_name": "cj.vaughter", "link": "https://stackoverflow.com/users/11467100/cj-vaughter"}, "edited": false, "score": 0, "creation_date": 1557963546, "post_id": 56157546, "comment_id": 98946481, "body": "Wow, not sure how I overlooked that, it&#39;s literally right there in the quote. Thanks for pointing that out."}], "tags": [], "owner": {"reputation": 238, "user_id": 11467100, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E4y2B.png?s=128&g=1", "display_name": "cj.vaughter", "link": "https://stackoverflow.com/users/11467100/cj-vaughter"}, "is_accepted": false, "score": 0, "last_activity_date": 1557954168, "last_edit_date": 1592644375, "creation_date": 1557953916, "answer_id": 56157546, "question_id": 56157359, "link": "https://stackoverflow.com/questions/56157359/why-did-the-copy-operator-get-called/56157546#56157546", "title": "Why did the copy operator get called?", "body": "<p>See <a href=\"https://en.cppreference.com/w/cpp/language/copy_constructor\" rel=\"nofollow noreferrer\">cppreference</a></p>\n<p>Specifically:</p>\n<blockquote>\n<p>The copy constructor is called whenever an object is initialized (by direct-initialization or copy-initialization) from another object of the same type (unless overload resolution selects a better match or the call is elided), which includes</p>\n<ul>\n<li>initialization: T a = b; or T a(b);, where b is of type T;</li>\n<li>function argument passing: f(a);, where a is of type T and f is void f(T t);</li>\n<li><strong>function return: return a; inside a function such as T f(), where a is of type T, which has no move constructor.</strong></li>\n</ul>\n</blockquote>\n"}], "owner": {"reputation": 85, "user_id": 11327435, "user_type": "registered", "profile_image": "https://graph.facebook.com/2332678793451674/picture?type=large", "display_name": "ZAX9732", "link": "https://stackoverflow.com/users/11327435/zax9732"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 56157513, "answer_count": 2, "score": 0, "last_activity_date": 1557954168, "creation_date": 1557953052, "last_edit_date": 1557953864, "question_id": 56157359, "link": "https://stackoverflow.com/questions/56157359/why-did-the-copy-operator-get-called", "title": "Why did the copy operator get called?", "body": "<p>At the last line <code>myA = foo(myOtherB);</code>, the function will return type an object of type A, thus; it will be like saying `myA = input, But why is the copy constructor is being?</p>\n\n<p>output:</p>\n\n<pre><code>B foo()\n A copy ctor //what calls this?\n A op=\n</code></pre>\n\n<p>For a copy constructor to be called we will have to use the assignment operator during initialization such as: <code>B newB = myOtherB;</code></p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass A {\npublic:\n A() { cout &lt;&lt; \"A ctor\" &lt;&lt; endl; }\n A(const A&amp; a) { cout &lt;&lt; \"A copy ctor\" &lt;&lt; endl; }\n virtual ~A() { cout &lt;&lt; \"A dtor\" &lt;&lt; endl; }\n virtual void foo() { cout &lt;&lt; \"A foo()\" &lt;&lt; endl; }\n virtual A&amp; operator=(const A&amp; rhs) { cout &lt;&lt; \"A op=\" &lt;&lt; endl; }\n};\n\nclass B : public A {\npublic:\n B() { cout &lt;&lt; \"B ctor\" &lt;&lt; endl; }\n virtual ~B() { cout &lt;&lt; \"B dtor\" &lt;&lt; endl; }\n virtual void foo() { cout &lt;&lt; \"B foo()\" &lt;&lt; endl; }\n protected:\n A mInstanceOfA; // don't forget about me!\n};\n\nA foo(A&amp; input) {\n input.foo();\n return input;\n}\nint main() {\n B myB;\n B myOtherB;\n A myA;\n myOtherB = myB;\n myA = foo(myOtherB);\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "language-lawyer"], "comments": [{"owner": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "edited": false, "score": 0, "creation_date": 1557952624, "post_id": 56157240, "comment_id": 98943565, "body": "What do you mean by generate, cast?"}, {"owner": {"reputation": 610, "user_id": 5596200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ad4f6608569fcbe4907bf196df92aa1?s=128&d=identicon&r=PG&f=1", "display_name": "shay", "link": "https://stackoverflow.com/users/5596200/shay"}, "edited": false, "score": 1, "creation_date": 1557952655, "post_id": 56157240, "comment_id": 98943586, "body": "Maybe. How will you generate the vector of <code>std::int64_t</code>?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1557952814, "post_id": 56157240, "comment_id": 98943642, "body": "What do you mean &#39;generate&#39;? If you mean &#39;cast&#39;, your original integers would either be smaller or equal than maximum value representable by <code>int64</code> (and in this case identical to original <code>uint64_t</code> numbers), or your program will exhibit undefined behavior, and anything can happen."}, {"owner": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 5, "creation_date": 1557952988, "post_id": 56157240, "comment_id": 98943697, "body": "@SergeyA Casting unsigned type to a signed type is not undefined behaviour. Overflowing signed integer is, not casting to it."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "edited": false, "score": 2, "creation_date": 1557953180, "post_id": 56157240, "comment_id": 98943777, "body": "@Resurrection casting integrals into unrepresentable ranges is undefined, and this is exactly what I have said."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1557953679, "post_id": 56157240, "comment_id": 98943959, "body": "Not all values representable by <code>uint64_t</code> can be represented by <code>int64_t</code>"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1557954594, "post_id": 56157240, "comment_id": 98944291, "body": "@JesperJuhl As stated, it seems that this question is about the <i>uniqueness</i> of the transformation, rather than the resulting values."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1558017120, "post_id": 56157240, "comment_id": 98968423, "body": "But we can&#39;t make that guarantee as for many values of uint64 the result in int64 is not defined. In most implementations they will just generate corresponding unique negative numbers, but a compiler is allowed to set them all to MAX_INT_64 or zero, or clear the sign bit - making them not unique versus the inrange values, or exception, or delete the contents of your hard disk, or anything really. If you cause the next extinction event, don&#39;t come running to me! BTW, this is a much better excuse than the dog ate my homework."}], "answers": [{"comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1557953598, "post_id": 56157418, "comment_id": 98943925, "body": "Isn&#39;t it implementation-defined?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1557953637, "post_id": 56157418, "comment_id": 98943937, "body": "@HolyBlackCat the first case is defined by the standard. Assigning an unsigned integer type to a signed integer type is well-defined as long as the value of the unsigned integer does not exceed the acceptable range of the signed integer type. The second case is <i>undefined</i> by the standard and indeed depends on to compiler implementation."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 3, "creation_date": 1557953808, "post_id": 56157418, "comment_id": 98944007, "body": "@SergeyA The answer says the behavior is undefined, but it&#39;s implementation-defined. <a href=\"https://en.cppreference.com/w/cpp/language/implicit_conversion#Numeric_conversions\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/&hellip;</a>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1557953868, "post_id": 56157418, "comment_id": 98944032, "body": "@HolyBlackCat bad choice of words, I meant it is not defined. I edited for clarity."}, {"owner": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "edited": false, "score": 4, "creation_date": 1557954414, "post_id": 56157418, "comment_id": 98944230, "body": "I am sorry but your wording is still misleading. &quot;not defined in the Standard&quot; is the same as saying it is &quot;undefined&quot; and is incorrect because standard defines it as &quot;implementation defined&quot; and since C++20 defines it directly. &quot;Anything can happen&quot; is at least misleading because it is used exclusively when describing undefined behaviour which this case is not."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "edited": false, "score": 0, "creation_date": 1557954932, "post_id": 56157418, "comment_id": 98944414, "body": "@Resurrection I have no interest in splitting hairs. In my view, it is not defined in the Standard (because it is not), and it is up to implementation to do what it wants - thus anything can happen, since OP doesn&#39;t tag any specific implementation. My answer doesn&#39;t account for C++ 20, because it is not published, and without any specific C++ dialect tags I assume latest published standard."}, {"owner": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "edited": false, "score": 3, "creation_date": 1557955333, "post_id": 56157418, "comment_id": 98944560, "body": "@SergeyA The &quot;not defined in the standard&quot; and &quot;anything can happen&quot; expressions are used often when talking about C++ and they have very clear and precise meaning which is different than what you are trying to convey in your answer. That is why I consider it misleading especially for people without such a strong grasp of a language. May I propose an edit or do you prefer to keep it this way?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "edited": false, "score": 0, "creation_date": 1557955399, "post_id": 56157418, "comment_id": 98944582, "body": "@Resurrection I prefer it to keep this way, thanks."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 1, "last_activity_date": 1557953824, "last_edit_date": 1557953824, "creation_date": 1557953334, "answer_id": 56157418, "question_id": 56157240, "link": "https://stackoverflow.com/questions/56157240/will-unique-values-in-uint64-t-also-be-unique-in-int64-t/56157418#56157418", "title": "Will unique values in uint64_t also be unique in int64_t", "body": "<p>With given code two possible scenario exists:</p>\n\n<ul>\n<li>All elements of original vector <code>unsignedVec</code> are lesser than or equal to <code>std::numeric_limits&lt;int64_t&gt;::max()</code>. In this case target vector elements would be identical to original vector elements, and all their properties would be preserved.</li>\n<li>There are elements in the original vector which are greater than <code>std::numeric_limits&lt;int64_t&gt;::max()</code>. In this case program behavior is not defined in the Standard, is left up to the implementation, and anything can happen.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "is_accepted": false, "score": 3, "last_activity_date": 1557959702, "last_edit_date": 1557959702, "creation_date": 1557953742, "answer_id": 56157501, "question_id": 56157240, "link": "https://stackoverflow.com/questions/56157240/will-unique-values-in-uint64-t-also-be-unique-in-int64-t/56157501#56157501", "title": "Will unique values in uint64_t also be unique in int64_t", "body": "<p>The values ending up in <code>signedVec</code> using</p>\n\n<pre><code>std::vector&lt;std::int64_t&gt; signedVec( unsignedVec.begin(), unsignedVec.end() );\n</code></pre>\n\n<p>will be implementation-defined in C++11 if the corresponding value in <code>unsignedVec</code> is larger than what <code>std::int64_t</code> can represent. Otherwise, the value will be the same <a href=\"https://timsong-cpp.github.io/cppwp/n3337/conv.integral#3\" rel=\"nofollow noreferrer\">[conv.integral]/3</a>:</p>\n\n<blockquote>\n  <p>If the destination type is signed, the value is unchanged if it can be represented in the destination type (and bit-field width); otherwise, the value is implementation-defined.</p>\n</blockquote>\n\n<p>Note: C++11 inherits the definition of <code>std::int64_t</code> from C99 via <a href=\"https://timsong-cpp.github.io/cppwp/n3337/headers#4\" rel=\"nofollow noreferrer\">[headers]/4</a>. <code>int64_t</code> is specified in C99 [7.18.1.1]/1 as (emphasis mine; thanks to <a href=\"https://stackoverflow.com/users/4944425/bob\">@Bob__</a> for pointing this out):</p>\n\n<blockquote>\n  <p>The typedef name <code>intN_t</code> designates a signed integer type with width <em>N</em>, <strong>no padding bits, and a two\u2019s complement representation</strong>.</p>\n</blockquote>\n\n<p>and [7.18.1.1]/3</p>\n\n<blockquote>\n  <p>These types are optional. However, if an implementation provides integer types with widths of 8, 16, 32, or 64 bits, no padding bits, and (for the signed types) that have a two\u2019s complement representation, it shall define the corresponding typedef names.</p>\n</blockquote>\n\n<p>So while it is technically still implementation-defined, it is very unlikely that the values will not be unique if the code compiles (which it only will if <code>std::int64_t</code> is defined, as that is optional). Since <code>int64_t</code> is specified to have a two's-complement representation and is only defined if the implementation can support that, for the conversion to behave in any other than the expected way would be very surprising. I've never heard of a compiler where it would not behave as expected. Furthermore, as pointed out in the <a href=\"https://stackoverflow.com/a/56157558/2064761\">answer by @HolyBlackCat</a>, the desired behavior will be required starting with C++20 <a href=\"http://eel.is/c++draft/conv.integral#3\" rel=\"nofollow noreferrer\">[conv.integral]/3</a>\u2026</p>\n"}, {"comments": [{"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 3, "creation_date": 1557954122, "post_id": 56157558, "comment_id": 98944130, "body": "If <a href=\"https://en.cppreference.com/w/cpp/types/integer\" rel=\"nofollow noreferrer\">this</a> is correct, an <code>int64_t</code> is a &quot;signed integer type with width of exactly 64 bits <b>with no padding bits and using 2&#39;s complement for negative values</b> (provided only if the implementation directly supports the type)&quot; Can we assume that if it is provided, it is <i>always</i> 2&#39;s complement?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1557954826, "post_id": 56157558, "comment_id": 98944372, "body": "@Bob__ I&#39;ve checked the standard and the page is correct. Huh, I didn&#39;t know that was required. But I think I&#39;ll leave &quot;any sensible two&#39;s complement platform&quot; wording for clarity."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1557954969, "post_id": 56157558, "comment_id": 98944430, "body": "Well, in that case, I guess that a quote from the standard may be a good addition to your answer ;)"}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "reply_to_user": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1557955560, "post_id": 56157558, "comment_id": 98944633, "body": "@Bob__ very good catch, I totally forgot about that! I guess, based on that, one can argue that it&#39;s unique even on C++11. I added what I believe to be the relevant quotes to my answer if anyone&#39;s interested\u2026"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 0, "creation_date": 1557955588, "post_id": 56157558, "comment_id": 98944641, "body": "@MichaelKenze Well, it says &quot;implementation-defined&quot;. Even if it&#39;s 2&#39;s complement, the conversion is still implementation-defined."}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 0, "creation_date": 1557955665, "post_id": 56157558, "comment_id": 98944677, "body": "@HolyBlackCat hm, I guess you&#39;re technically correct\u2026"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1557955698, "post_id": 56157558, "comment_id": 98944686, "body": "@Bob__ You mean a quote saying <code>int*_t</code> are 2&#39;s complement? Eh, I don&#39;t think it adds anything to the answer. It&#39;s implementation-defined pre-C++20 either way."}], "tags": [], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "is_accepted": true, "score": 8, "last_activity_date": 1557955738, "last_edit_date": 1557955738, "creation_date": 1557953991, "answer_id": 56157558, "question_id": 56157240, "link": "https://stackoverflow.com/questions/56157240/will-unique-values-in-uint64-t-also-be-unique-in-int64-t/56157558#56157558", "title": "Will unique values in uint64_t also be unique in int64_t", "body": "<blockquote>\n  <p>will it be guaranteed to be unique?</p>\n</blockquote>\n\n<p>Formally it's implementation-defined, but on any sensible platform it should be unique.</p>\n\n<p><sup>(Especially given that <code>int64_t</code> <a href=\"https://en.cppreference.com/w/cpp/types/integer\" rel=\"nofollow noreferrer\">has to be</a> 2's complement if it's provided.)</sup></p>\n\n<p>Since C++20 it <em>has</em> to be unique.</p>\n\n<hr>\n\n<blockquote>\n  <p><a href=\"https://en.cppreference.com/w/cpp/language/implicit_conversion#Numeric_conversions\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/language/implicit_conversion#Numeric_conversions</a></p>\n  \n  <p>If the destination type is signed, the value does not change if the source integer can be represented in the destination type. [Otherwise the result is implementation-defined (until C++20)] [the unique value of the destination type equal to the source value modulo 2<sup>n</sup>\n   where n is the number of bits used to represent the destination type. (since C++20)].</p>\n</blockquote>\n"}], "owner": {"reputation": 5458, "user_id": 311148, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b0922ad7a0d0aff5b1200fa928e67c26?s=128&d=identicon&r=PG", "display_name": "veda", "link": "https://stackoverflow.com/users/311148/veda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "accepted_answer_id": 56157558, "answer_count": 3, "score": 5, "last_activity_date": 1558179702, "creation_date": 1557952525, "last_edit_date": 1558179702, "question_id": 56157240, "link": "https://stackoverflow.com/questions/56157240/will-unique-values-in-uint64-t-also-be-unique-in-int64-t", "title": "Will unique values in uint64_t also be unique in int64_t", "body": "<p>Given a vector of unique (<code>std::uint64_t</code> type) integers, if I cast vector of (<code>std::uint64_t</code> type) to vector of (<code>std::int64_t</code> type) integers, will it be guaranteed to be unique?</p>\n\n<p>Casting like this</p>\n\n<pre><code>std::vector&lt;std::uint64_t&gt; unsignedVec;\nstd::vector&lt;std::int64_t&gt; signedVec( unsignedVec.begin(), unsignedVec.end() );\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "visual-c++"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1557953933, "post_id": 56157237, "comment_id": 98944057, "body": "If this is the code in Form2.h then you almost certainly created a circular dependency between the .h files.  Since Form1.h has an #include &quot;Form2.h&quot;.  Such are the hazards of C++, it uses a single-pass compilation model.  You have to do the normal C++ song and dance and move that code to Form2.cpp.   Which can #include both.  Otherwise one of the standard reasons why everybody recommends you don&#39;t write Winforms code in C++/CLI.  And worth noting that it is almost always wrong to have a second window re-create the first window again."}, {"owner": {"reputation": 11, "user_id": 7363294, "user_type": "registered", "profile_image": "https://graph.facebook.com/937768149686660/picture?type=large", "display_name": "Nemanja Milenovic", "link": "https://stackoverflow.com/users/7363294/nemanja-milenovic"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1557955142, "post_id": 56157237, "comment_id": 98944499, "body": "I just read about &quot; circular dependency &quot;  and I think you are right that&#39;s case.I don&#39;t have knowledge about that(They don&#39;t teach us about that in high school),i will study that i try to fix my problem.Thank you."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1557955279, "post_id": 56157237, "comment_id": 98944539, "body": "Talk to your teacher, you shouldn&#39;t be doing this.  Or don&#39;t and make all the mistakes you need to make to become a good programmer, quite okay with me."}], "owner": {"reputation": 11, "user_id": 7363294, "user_type": "registered", "profile_image": "https://graph.facebook.com/937768149686660/picture?type=large", "display_name": "Nemanja Milenovic", "link": "https://stackoverflow.com/users/7363294/nemanja-milenovic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1557952506, "creation_date": 1557952506, "question_id": 56157237, "link": "https://stackoverflow.com/questions/56157237/cannot-connect-open-first-form-from-second", "title": "Cannot connect open First Form from Second", "body": "<p>I cannot open my First Form from Second ,also i cannot pass variables between forms...I can open first form and then from there i can open second form but not vice versa.I got a lot of nonsense errors for example \"StreamWriter is not declared\" but that worked before i tried to connect Second and First form.</p>\n\n<p>I tried something in linker options(tbh i'm not very familiar with that),i tried to pass values with globals variables but that also didn't work.</p>\n\n<pre><code>//Part of include code\n#pragma once\n#include \"Form1.h\"\n//When i tried to open form1\nprivate: System::Void button3_Click(System::Object^  sender, System::EventArgs^  e) {\nForm1^ f1 = gcnew Form1();\n f1-&gt;Show();\n}\n</code></pre>\n\n<p>I expect to open form1 from form2,and pass variables between them.</p>\n"}, {"tags": ["c++", "rotation", "sprite", "sfml"], "answers": [{"tags": [], "owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "is_accepted": true, "score": 2, "last_activity_date": 1557953934, "last_edit_date": 1557953934, "creation_date": 1557953561, "answer_id": 56157465, "question_id": 56157231, "link": "https://stackoverflow.com/questions/56157231/sfml-how-to-solve-sprite-quality-drop-when-rotating-a-sprite-in-sfml/56157465#56157465", "title": "SFML: How to solve sprite quality drop when rotating a sprite in sfml", "body": "<p>Those artifacts appear to be from a lack of smoothing, which is great for pixel art, but not so great for vector art and things that rotate.</p>\n\n<p>To enable smoothing, simply find the <code>sf::Texture</code>(s) for each body part, and call <code>setSmooth(true)</code> on each one.</p>\n\n<p><a href=\"https://www.sfml-dev.org/tutorials/2.5/graphics-sprite.php\" rel=\"nofollow noreferrer\">Official documentation here</a></p>\n\n<p>The difference lies in how each on-screen pixel (or <em>fragment</em>) of the the texture will be rendered when the texture coordinates it maps onto fall inbetween texture pixels (or <em>texels</em>). Such misalignment occurs easily when you perform scaling, fractional translation, and rotation.</p>\n\n<p>With smoothing turned on, each fragment is rendered by interpolating several texels that are nearest to its calculated texture coordinates. If a fragment's texture coordinates fall between texels, then you'll see a tiny amount of blending happening.</p>\n\n<p>Otherwise, with smoothing disabled, each fragment is rendered simply by choosing the single texel closest to its calculated texture coordinates, and performs no interpolation. In this case, when a fragment's texture coordinates fall between texels, simply one or the other texel is chosen. This results in the jagged, blocky rotation artifacts you are seeing.</p>\n\n<p>Note that for things like densely-packed spritesheets, smoothing can have the effect of neighbouring texture data \"bleeding\" into the current sprite.</p>\n"}], "owner": {"reputation": 25, "user_id": 7317926, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-Ya4hywlfEcA/AAAAAAAAAAI/AAAAAAAAABk/rZnkcRAhCAg/photo.jpg?sz=128", "display_name": "Ozan Deniz", "link": "https://stackoverflow.com/users/7317926/ozan-deniz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 56157465, "answer_count": 1, "score": 1, "last_activity_date": 1557953934, "creation_date": 1557952452, "question_id": 56157231, "link": "https://stackoverflow.com/questions/56157231/sfml-how-to-solve-sprite-quality-drop-when-rotating-a-sprite-in-sfml", "title": "SFML: How to solve sprite quality drop when rotating a sprite in sfml", "body": "<p>The image on the link below consists of 20+ images(each body part and armor type in seperate files). This character is animated in the software called \"Spriter\".  The code takes spriter's output file (.scml) then calculates the body parts' and armor parts' positions and rotations every frame. </p>\n\n<p>When there is no rotation, everything draws smoothly but when there are rotating parts , sprites get drawn a little distorted as seen on the gif below: </p>\n\n<p>Here's <a href=\"https://giphy.com/gifs/WUylxRJl5wclgj2uvY\" rel=\"nofollow noreferrer\">the gif</a></p>\n\n<p>Can this distortion problem be solved?</p>\n"}, {"tags": ["c++", "parsing", "boost-spirit"], "answers": [{"comments": [{"owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 1, "creation_date": 1557960674, "post_id": 56158327, "comment_id": 98945942, "body": "I must say, I like what you did with the &#39;as&#39; wrapper and how it puts the attribute out in front where you can see it."}, {"owner": {"reputation": 27, "user_id": 2881080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/551689fc10c06baf8093e990deffa2f5?s=128&d=identicon&r=PG&f=1", "display_name": "user2881080", "link": "https://stackoverflow.com/users/2881080/user2881080"}, "edited": false, "score": 0, "creation_date": 1557960823, "post_id": 56158327, "comment_id": 98945977, "body": "Thanks a lot for the excellent explanation and for taking time to code it up."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 1, "last_activity_date": 1557958377, "creation_date": 1557958377, "answer_id": 56158327, "question_id": 56157223, "link": "https://stackoverflow.com/questions/56157223/how-to-move-results-parsed-results-into-a-struct-using-spirit-x3/56158327#56158327", "title": "How to move results parsed results into a struct using spirit x3", "body": "<h2>Fusion Adapt</h2>\n\n<p>One issue is the adaptations: you're supplying types but spelling them as forward declarations of types in the global namespace:</p>\n\n<pre><code>BOOST_FUSION_ADAPT_STRUCT(ast::argument, (struct identifier, typeName) (struct identifier, value))\nBOOST_FUSION_ADAPT_STRUCT(ast::function_call, (struct identifier, name) (struct identifier, arguments))\nBOOST_FUSION_ADAPT_STRUCT(ast::function_prototype, (struct identifier, returnType) (struct identifier, name) (std::list&lt;struct argument&gt;, arguments))\n</code></pre>\n\n<p>It <em>might</em> be okay to fix by replacing with e.g. <code>ast::identifier</code>, but why bother? You can definitely use the c++11 variation and let the compiler figure out the types:</p>\n\n<pre><code>BOOST_FUSION_ADAPT_STRUCT(ast::identifier, name)\nBOOST_FUSION_ADAPT_STRUCT(ast::argument, typeName, value)\nBOOST_FUSION_ADAPT_STRUCT(ast::function_call, name, arguments)\nBOOST_FUSION_ADAPT_STRUCT(ast::function_prototype, returnType, name, arguments)\n</code></pre>\n\n<h2>RAW</h2>\n\n<p>The second cinch is <code>x3::raw[]</code>. The <code>raw</code> directive exposes an iterator range as the attribute, and that's not compatible with the bound attribute type (e.g. <code>ast::identifier</code>).</p>\n\n<p>In this particular case, you ARE parsing (compare with my remark from <a href=\"https://stackoverflow.com/a/56150603/85371\">the previous answer</a>, where you weren't parsing, and only matching). So you need to match up the synthesized attribute with the target attribute type:</p>\n\n<pre><code>auto const identifier_def = x3::lexeme[(x3::alpha | x3::char_('_')) &gt;&gt; *(x3::alnum | x3::char_('_'))];\n</code></pre>\n\n<h2>Single-Element Sequences</h2>\n\n<p>There's a lingering issue with Qi/X3 that causes attribute propagation of single-element sequences to get confused. In this case it helps if you simply make <code>identifier</code> parse into <code>std::string</code> (and fusion <em>will</em> correctly assign that to <code>ast::identifier</code> from there):</p>\n\n<pre><code>auto const identifier_def = x3::lexeme[(x3::alpha | x3::char_('_')) &gt;&gt; *(x3::alnum | x3::char_('_'))];\n</code></pre>\n\n<p>Dropping the rest of the <code>rawp[]</code> directives makes it compile:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/272544bbadbee6fd\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#define BOOST_SPIRIT_X3_DEBUG\n#include &lt;boost/spirit/home/x3.hpp&gt;\n#include &lt;boost/fusion/adapted.hpp&gt;\n#include &lt;boost/fusion/include/io.hpp&gt;\n#include &lt;boost/spirit/home/x3/support/ast/variant.hpp&gt;\n#include &lt;list&gt;\n#include &lt;iostream&gt;\n\nnamespace x3 = boost::spirit::x3;\nnamespace ascii = boost::spirit::x3::ascii;\nusing boost::spirit::x3::ascii::space;\n\nnamespace ast {\nstruct identifier {\n    std::string name;\n};\n\nstruct argument {\n    identifier typeName;\n    identifier value;\n};\n\nstruct function_call {\n    identifier name;\n    std::list&lt;argument&gt; arguments;\n};\n\nstruct function_prototype {\n    identifier returnType;\n    identifier name;\n    std::list&lt;argument&gt; arguments;\n};\n} // namespace ast\n\nBOOST_FUSION_ADAPT_STRUCT(ast::identifier, name)\nBOOST_FUSION_ADAPT_STRUCT(ast::argument, typeName, value)\nBOOST_FUSION_ADAPT_STRUCT(ast::function_call, name, arguments)\nBOOST_FUSION_ADAPT_STRUCT(ast::function_prototype, returnType, name, arguments)\n\nnamespace parser\n{\n    struct identifier_class;\n    typedef x3::rule&lt;identifier_class, std::string&gt; identifier_type;\n    identifier_type const identifier = \"identifier\";\n    auto const identifier_def = x3::lexeme[(x3::alpha | x3::char_('_')) &gt;&gt; *(x3::alnum | x3::char_('_'))];\n    BOOST_SPIRIT_DEFINE(identifier)\n\n    struct argument_class;\n    typedef x3::rule&lt;argument_class, ast::argument&gt; argument_type;\n    argument_type const argument = \"argument\";\n    auto const argument_def = identifier &gt;&gt; identifier;\n    BOOST_SPIRIT_DEFINE(argument)\n\n    struct function_call_class;\n    typedef x3::rule&lt;function_call_class, ast::function_call&gt; function_call_type;\n    function_call_type const function_call = \"function_call\";\n    auto const function_call_def = identifier &gt;&gt; '(' &gt; -(argument % ',') &gt; ')';\n    BOOST_SPIRIT_DEFINE(function_call)\n\n    struct function_prototype_class;\n    typedef x3::rule&lt;function_prototype_class, ast::function_prototype&gt; function_prototype_class_type;\n    function_prototype_class_type const function_prototype = \"function_prototype\";\n    auto const function_prototype_def =\n        identifier &gt;&gt; identifier &gt;&gt; '(' &gt; -(argument % ',') &gt;&gt; x3::expect[')'] &gt;&gt; ';';\n    BOOST_SPIRIT_DEFINE(function_prototype)\n\n    auto const functionProtos = +function_prototype;\n}\n\nnamespace Application {\nclass Parser {\n\n  public:\n    void functionParser(const std::string&amp; input) {\n        if (0) {\n            ast::identifier output;\n            x3::phrase_parse(input.begin(), input.end(), parser::identifier, x3::space, output);\n        }\n        if (0) {\n            ast::argument output;\n            x3::phrase_parse(input.begin(), input.end(), parser::argument, x3::space, output);\n        }\n        if (0) {\n            ast::function_call output;\n            x3::phrase_parse(input.begin(), input.end(), parser::function_call, x3::space, output);\n        }\n        if (0) {\n            ast::function_prototype output;\n            x3::phrase_parse(input.begin(), input.end(), parser::function_prototype, x3::space, output);\n        }\n        {\n            std::vector&lt;ast::function_prototype&gt; output;\n            x3::phrase_parse(input.begin(), input.end(), parser::functionProtos, x3::space, output);\n            std::cout &lt;&lt; \"success: \" &lt;&lt; output.size() &lt;&lt; \" prototypes parsed\\n\";\n        }\n    }\n};\n} // namespace parser\n\nint main()\n{\n    Application::Parser p;\n    p.functionParser(\"void foo(int a); float bar(double b, char c);\");\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>success: 2 prototypes parsed\n</code></pre>\n\n<h2>SIMPLIFY</h2>\n\n<p>As long as you don't share rules across translation units OR require recursive rules, there is no need for the define/macros. Instead simplify:</p>\n\n<pre><code>auto const identifier         = as&lt;std::string&gt;(\"identifier\", x3::lexeme[(x3::alpha | x3::char_('_')) &gt;&gt; *(x3::alnum | x3::char_('_'))]);\nauto const argument           = as&lt;ast::argument&gt;(\"argument\", identifier &gt;&gt; identifier);\nauto const function_call      = as&lt;ast::function_call&gt;(\"function_call\", identifier &gt;&gt; '(' &gt; -(argument % ',') &gt; ')');\nauto const function_prototype = as&lt;ast::function_prototype&gt;(\"function_prototype\",\n    identifier &gt;&gt; identifier &gt;&gt; '(' &gt; -(argument % ',') &gt;&gt; x3::expect[')'] &gt;&gt; ';');\n</code></pre>\n\n<p>That's using a very simple shorthand to type the rule attirbutes:</p>\n\n<pre><code>template &lt;typename T&gt; auto as = [](auto name, auto p) { return x3::rule&lt;struct _, T&gt; {name} = p; };\n</code></pre>\n\n<p>See it <strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/0fce3275f5051bb7\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>//#define BOOST_SPIRIT_X3_DEBUG\n#include &lt;boost/spirit/home/x3.hpp&gt;\n#include &lt;boost/fusion/adapted.hpp&gt;\n#include &lt;list&gt;\n#include &lt;iostream&gt;\n\nnamespace x3 = boost::spirit::x3;\nusing boost::spirit::x3::ascii::space;\n\nnamespace ast {\n    struct identifier {\n        std::string name;\n    };\n\n    struct argument {\n        identifier typeName;\n        identifier value;\n    };\n\n    struct function_call {\n        identifier name;\n        std::list&lt;argument&gt; arguments;\n    };\n\n    struct function_prototype {\n        identifier returnType;\n        identifier name;\n        std::list&lt;argument&gt; arguments;\n    };\n} // namespace ast\n\nBOOST_FUSION_ADAPT_STRUCT(ast::identifier, name)\nBOOST_FUSION_ADAPT_STRUCT(ast::argument, typeName, value)\nBOOST_FUSION_ADAPT_STRUCT(ast::function_call, name, arguments)\nBOOST_FUSION_ADAPT_STRUCT(ast::function_prototype, returnType, name, arguments)\n\nnamespace parser\n{\n    template &lt;typename T&gt; auto as = [](auto name, auto p) { return x3::rule&lt;struct _, T&gt; {name} = p; };\n\n    auto const identifier         = as&lt;std::string&gt;(\"identifier\", x3::lexeme[(x3::alpha | x3::char_('_')) &gt;&gt; *(x3::alnum | x3::char_('_'))]);\n    auto const argument           = as&lt;ast::argument&gt;(\"argument\", identifier &gt;&gt; identifier);\n    auto const function_call      = as&lt;ast::function_call&gt;(\"function_call\", identifier &gt;&gt; '(' &gt; -(argument % ',') &gt; ')');\n    auto const function_prototype = as&lt;ast::function_prototype&gt;(\"function_prototype\",\n        identifier &gt;&gt; identifier &gt;&gt; '(' &gt; -(argument % ',') &gt;&gt; x3::expect[')'] &gt;&gt; ';');\n\n    auto const functionProtos = +function_prototype;\n}\n\nnamespace Application {\n    class Parser {\n\n        public:\n            void functionParser(const std::string&amp; input) {\n                std::vector&lt;ast::function_prototype&gt; output;\n                x3::phrase_parse(input.begin(), input.end(), parser::functionProtos, x3::space, output);\n                std::cout &lt;&lt; \"success: \" &lt;&lt; output.size() &lt;&lt; \" prototypes parsed\\n\";\n            }\n    };\n} // namespace parser\n\nint main()\n{\n    Application::Parser p;\n    p.functionParser(\"void foo(int a); float bar(double b, char c);\");\n}\n</code></pre>\n\n<p>Which also prints</p>\n\n<pre><code>success: 2 prototypes parsed\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 2881080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/551689fc10c06baf8093e990deffa2f5?s=128&d=identicon&r=PG&f=1", "display_name": "user2881080", "link": "https://stackoverflow.com/users/2881080/user2881080"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 56158327, "answer_count": 1, "score": 1, "last_activity_date": 1557958377, "creation_date": 1557952412, "question_id": 56157223, "link": "https://stackoverflow.com/questions/56157223/how-to-move-results-parsed-results-into-a-struct-using-spirit-x3", "title": "How to move results parsed results into a struct using spirit x3", "body": "<p>I want to parse an input buffer containing function prototypes into a vector of function prototypes. I have created a function prototype struct that has 3 members: returnType, name and argument list. I am running into a compiler error that complains that it is unable to move the parsed results into the struct. Am I missing something?</p>\n\n<pre><code>//#define BOOST_SPIRIT_X3_DEBUG\n#include &lt;boost/spirit/home/x3.hpp&gt;\n#include &lt;boost/fusion/adapted.hpp&gt;\n#include &lt;boost/fusion/adapted/struct/adapt_struct.hpp&gt;\n#include &lt;boost/config/warning_disable.hpp&gt;\n#include &lt;boost/fusion/include/io.hpp&gt;\n#include &lt;boost/spirit/home/x3/support/ast/variant.hpp&gt;\n#include &lt;list&gt;\n#include &lt;iostream&gt;\n\nnamespace x3 = boost::spirit::x3;\nnamespace ascii = boost::spirit::x3::ascii;\nusing boost::spirit::x3::ascii::space;\n\nnamespace ast {\nstruct identifier {\n    std::string name;\n};\n\nstruct argument {\n    identifier typeName;\n    identifier value;\n};\n\nstruct function_call {\n    identifier name;\n    std::list&lt;argument&gt; arguments;\n};\n\nstruct function_prototype {\n    identifier returnType;\n    identifier name;\n    std::list&lt;argument&gt; arguments;\n};\n} // namespace ast\n\nBOOST_FUSION_ADAPT_STRUCT(ast::identifier, (std::string, name))\nBOOST_FUSION_ADAPT_STRUCT(ast::argument, (struct identifier, typeName) (struct identifier, value))\nBOOST_FUSION_ADAPT_STRUCT(ast::function_call, (struct identifier, name) (struct identifier, arguments))\nBOOST_FUSION_ADAPT_STRUCT(ast::function_prototype, (struct identifier, returnType) (struct identifier, name) (std::list&lt;struct argument&gt;, arguments))\n\nnamespace parser\n{\n    struct identifier_class;\n    typedef x3::rule&lt;identifier_class, ast::identifier&gt; identifier_type;\n    identifier_type const identifier = \"identifier\";\n    auto const identifier_def = x3::raw[x3::lexeme[(x3::alpha | '_') &gt;&gt; *(x3::alnum | '_')]];\n    BOOST_SPIRIT_DEFINE(identifier)\n\n    struct argument_class;\n    typedef x3::rule&lt;argument_class, ast::argument&gt; argument_type;\n    argument_type const argument = \"argument\";\n    auto const argument_def = x3::raw[identifier &gt;&gt; identifier];\n    BOOST_SPIRIT_DEFINE(argument)\n\n    struct function_call_class;\n    typedef x3::rule&lt;function_call_class, ast::function_call&gt; function_call_type;\n    function_call_type const function_call = \"function_call\";\n    auto const function_call_def = x3::raw[identifier &gt;&gt; '(' &gt; -(argument % ',') &gt; ')'];\n    BOOST_SPIRIT_DEFINE(function_call)\n\n    struct function_prototype_class;\n    typedef x3::rule&lt;function_prototype_class, ast::function_prototype&gt; function_prototype_class_type;\n    function_prototype_class_type const function_prototype = \"function_prototype\";\n    auto const function_prototype_def =\n    x3::raw[identifier &gt;&gt; identifier &gt;&gt; '(' &gt; -(argument % ',') &gt; ')'];\n    BOOST_SPIRIT_DEFINE(function_prototype)\n\n    auto const functionProtos = function_prototype &gt;&gt; *(function_prototype);\n}\n\nnamespace Application {\nclass Parser {\n\n  public:\n    void functionParser(const std::string&amp; input) {\n        std::vector&lt;ast::function_call&gt; output;\n        x3::phrase_parse(input.begin(), input.end(), parser::functionProtos, x3::space, output);\n        std::cout &lt;&lt; \"success\\n\";\n    }\n};\n} // namespace parser\n</code></pre>\n"}, {"tags": ["c++", "inheritance"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1557952060, "post_id": 56157097, "comment_id": 98943319, "body": "Don&#39;t declare <code>x</code> in the child class."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1557952095, "post_id": 56157097, "comment_id": 98943334, "body": "@JohnnyMopp then it would not compile"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1557952208, "post_id": 56157097, "comment_id": 98943384, "body": "@Slava I didn&#39;t notice it was <code>private</code>. OP could change that to <code>protected</code>."}, {"owner": {"reputation": 57, "user_id": 11402154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5e81a02e5eae01a1a3da0aaeedc44ca?s=128&d=identicon&r=PG&f=1", "display_name": "AlinaChuj", "link": "https://stackoverflow.com/users/11402154/alinachuj"}, "edited": false, "score": 0, "creation_date": 1557952473, "post_id": 56157097, "comment_id": 98943501, "body": "Ok. Thanks. I forgot about it. :P"}, {"owner": {"reputation": 57, "user_id": 11402154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5e81a02e5eae01a1a3da0aaeedc44ca?s=128&d=identicon&r=PG&f=1", "display_name": "AlinaChuj", "link": "https://stackoverflow.com/users/11402154/alinachuj"}, "edited": false, "score": 0, "creation_date": 1557952594, "post_id": 56157097, "comment_id": 98943551, "body": "I think I need a little break xD"}], "answers": [{"tags": [], "owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "is_accepted": false, "score": 1, "last_activity_date": 1557952265, "last_edit_date": 1557952265, "creation_date": 1557952150, "answer_id": 56157169, "question_id": 56157097, "link": "https://stackoverflow.com/questions/56157097/my-setter-doesnt-work-in-new-class-inheritance/56157169#56157169", "title": "My setter doesn&#39;t work in new class (inheritance)", "body": "<p>The variables <code>x</code> and <code>y</code> declared in <code>new_class</code> are <em>shadowing</em> the variables with the same names declared in <code>base_class</code>. This means that in any member method of <code>new_class</code>, the name <code>x</code> refers to <code>new_class::x</code> and <strong>not</strong> <code>base_class::x</code>.</p>\n\n<p>Simply remove these lines from the <code>new_class</code> definition:</p>\n\n<pre><code>int x;\nint y;\n</code></pre>\n\n<p>And make the same members in the <code>base_class</code> <code>protected</code> instead of <code>private</code> so that the <code>new_class</code> also has access:</p>\n\n<pre><code>class base_class{\nprotected:\n    int x;\n    int y;\n</code></pre>\n\n<hr>\n\n<p>Note: your code has a memory leak, since you never <code>delete object</code> after allocating it. Always <code>delete</code> what you <code>new</code>, and don't use <code>new</code> unless you really need to.</p>\n"}], "owner": {"reputation": 57, "user_id": 11402154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5e81a02e5eae01a1a3da0aaeedc44ca?s=128&d=identicon&r=PG&f=1", "display_name": "AlinaChuj", "link": "https://stackoverflow.com/users/11402154/alinachuj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1557952340, "creation_date": 1557951827, "question_id": 56157097, "link": "https://stackoverflow.com/questions/56157097/my-setter-doesnt-work-in-new-class-inheritance", "title": "My setter doesn&#39;t work in new class (inheritance)", "body": "<p>This is my code. I created base class and in constructor set x=0. Next I used <code>virtual set_x() = 0</code>. And I created set_x() in new class. Output:</p>\n\n<p><code>set x</code> \n<code>100</code>\n<code>DONE. Let's check.  0500</code></p>\n\n<p>Why I got 0500 not 100500?</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include &lt;QApplication&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nstruct invalid_file_handler : std::runtime_error{\n    using runtime_error::runtime_error;\n};\nclass base_class{\nprivate:\n    int x;\n    int y;\npublic:\n    virtual void set_x()=0;\n    void set_y(){\n        this-&gt;y=500;\n    }\n    int get_x(){\n        return (this-&gt;x);\n    }\n    int get_y(){\n        return (this-&gt;y);\n    }\n    base_class(){\n      this-&gt;x=0;\n      this-&gt;y=0;\n    }\n};\n\nclass new_class :public base_class{\npublic:\n    void set_x();\nprivate:\n    int z;\n    int x;\n    int y;\n};\n\nvoid new_class::set_x(){\n    cout &lt;&lt; \"set x \" &lt;&lt; endl;\n    this-&gt;x=100;\n    cout &lt;&lt; this-&gt;x &lt;&lt; endl &lt;&lt; \"DONE. Let's check.  \";\n}\n\nint main()\n{\n\n    ifstream my_open_file;\n    string file_path = \"/home/wojtek/Pulpit/elo.odt\";\n    try{\n        my_open_file.open(\"/home/wojtek/Pulpit/elo.odt\");\n        my_open_file.close();\n    }catch (std::runtime_error &amp;e){\n        cerr &lt;&lt; \"Hello Xd XD chua\" &lt;&lt; endl;\n        cerr &lt;&lt; e.what();\n    }\n    ofstream myfile;\n    try{\n    myfile.open (\"/home/wojtek/Pulpit/example.txt\");\n    myfile &lt;&lt; \"Writing this to a file.\\n\";\n    myfile.close();\n    }\n    catch(invalid_file_handler &amp;e){\n        cerr &lt;&lt; \"Hello!\" &lt;&lt; endl;\n    }\n    new_class *object = new new_class();\n    object-&gt;set_x();\n    cout &lt;&lt; object-&gt;get_x();\n    object-&gt;set_y();\n    cout &lt;&lt; object-&gt;get_y();\n    //base_class object;\n    //cout &lt;&lt; object.get_y();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "qtmultimedia"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1557951449, "post_id": 56156936, "comment_id": 98943072, "body": "Maybe your &quot;other players&quot; are just more forgiving about semi-broken files.."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9088793"}, "edited": false, "score": 0, "creation_date": 1557953742, "post_id": 56156936, "comment_id": 98943976, "body": "Are all of the files that can&#39;t be played of the same extension? For example, does it play any OGG successfully, or none? None, some, or all of the MP3? The <code>mediaStatusChanged</code> and <code>error</code> signals can give you more information about failures, but the code above is ignoring all possible results except <code>QMediaPlayer::LoadedMedia</code>."}, {"owner": {"reputation": 1, "user_id": 11495429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a591e207dee1e644d7eea4a08f65195?s=128&d=identicon&r=PG&f=1", "display_name": "Dushess", "link": "https://stackoverflow.com/users/11495429/dushess"}, "edited": false, "score": 0, "creation_date": 1557954923, "post_id": 56156936, "comment_id": 98944410, "body": "Player can play some mp3 files. I converted mp3 files that player cant play to wav and it played all of them correctly."}, {"owner": {"reputation": 1, "user_id": 11495429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a591e207dee1e644d7eea4a08f65195?s=128&d=identicon&r=PG&f=1", "display_name": "Dushess", "link": "https://stackoverflow.com/users/11495429/dushess"}, "edited": false, "score": 0, "creation_date": 1557955853, "post_id": 56156936, "comment_id": 98944736, "body": "I also didn&#39;t get any  qt errors (FormatError,AccesDeniedError, ResourceError, ServiceMissingError) when opening those files."}], "owner": {"reputation": 1, "user_id": 11495429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a591e207dee1e644d7eea4a08f65195?s=128&d=identicon&r=PG&f=1", "display_name": "Dushess", "link": "https://stackoverflow.com/users/11495429/dushess"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 260, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1557955876, "creation_date": 1557951103, "last_edit_date": 1557955876, "question_id": 56156936, "link": "https://stackoverflow.com/questions/56156936/cant-load-music-file-with-qmediaplayer", "title": "Cant load music file with QMediaPlayer", "body": "<p>I am creating media player with qt5. Code below works fine ( it open file dialog, load one song and play it after loading) but it can't play some MP3 files. These files are not damaged or something like this, I can open them with other media players. I noticed that the most of them are larger than 20 mB. Please help me if you find the solution. </p>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n#include &lt;QFile&gt;\n#include &lt;QFileDialog&gt;\n#include &lt;QDebug&gt;\n#include &lt;iostream&gt;\nMainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n    connect(&amp;player, &amp;QMediaPlayer::mediaStatusChanged,\n            this, [&amp;](QMediaPlayer::MediaStatus status){\n\n        if(status == QMediaPlayer::LoadedMedia)    //play if loaded\n            player.play();\n    });\n    connect(&amp;player , QOverload&lt;QMediaPlayer::Error&gt;::of(&amp;QMediaPlayer::error),   // notify about errors\n        [=](QMediaPlayer::Error error){\n\n        if (error==QMediaPlayer::ResourceError)\n           qDebug(\"resource\");\n        if (error==QMediaPlayer::FormatError)\n\n           qDebug(\"format\");\n        if (error==QMediaPlayer::AccessDeniedError)\n            qDebug(\"acces\");\n        if (error==QMediaPlayer::ServiceMissingError)\n            qDebug(\"service\");\n\n    });\n\n}\n\nMainWindow::~MainWindow()\n{\n    delete ui;\n}\n\nvoid MainWindow::on_pushButton_clicked()\n\n{   QString file= QFileDialog::getOpenFileName();  //select file\n    player.setMedia(QUrl::fromLocalFile(file)); // load\n\n\n}\n</code></pre>\n"}, {"tags": ["c++", "rapidjson"], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 9733085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47c35fd964e021148df97c72899c4c0e?s=128&d=identicon&r=PG&f=1", "display_name": "Seeker", "link": "https://stackoverflow.com/users/9733085/seeker"}, "is_accepted": false, "score": 0, "last_activity_date": 1557968474, "creation_date": 1557968474, "answer_id": 56159448, "question_id": 56156705, "link": "https://stackoverflow.com/questions/56156705/how-to-modify-the-json-data-using-rapidjson-by-modifying-it-to-a-different-schem/56159448#56159448", "title": "How to modify the JSON data using RapidJSON by modifying it to a different schema", "body": "<p>Found a way to do it. It works!</p>\n\n<pre><code>            rapidjson::Document doc, newDoc;\n            rapidjson::Document::AllocatorType&amp; alloc = doc.GetAllocator();\n            doc.Parse(str); // str contains the JSON data\n\n            Value&amp; results = doc[\"area_data\"][\"update_results\"];\n\n            Value newResults(kArrayType);\n\n            newResults.CopyFrom(results, alloc);\n\n            doc.AddMember(\"results\", newResults, alloc);\n            doc.RemoveMember(\"area_data\");\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 9733085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47c35fd964e021148df97c72899c4c0e?s=128&d=identicon&r=PG&f=1", "display_name": "Seeker", "link": "https://stackoverflow.com/users/9733085/seeker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 264, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557968474, "creation_date": 1557950009, "question_id": 56156705, "link": "https://stackoverflow.com/questions/56156705/how-to-modify-the-json-data-using-rapidjson-by-modifying-it-to-a-different-schem", "title": "How to modify the JSON data using RapidJSON by modifying it to a different schema", "body": "<p>I have to modify a JSON data to a different schema using RapidJson. I can modify a Value objects name and value but I could not find the right examples so that I can modify the JSON by rearranging the nodes.</p>\n\n<p>I tried by creating a new document and adding the Value taken from the other document but it is not working.</p>\n\n<pre><code>    rapidjson::Document doc1, doc2;\n            rapidjson::Document::AllocatorType&amp; alloc = doc1.GetAllocator();\n            doc1.Parse(str); // str contains the JSON data\n\n            Value statusObj(doc1[\"status\"], alloc);\n            Value resultsObj(doc1[\"area_data\"][\"update_results\"], alloc);\n\n            doc2.SetObject();\n            doc2.AddMember(\"status\", statusObj, alloc);\n            doc2.AddMember(\"results\", resultsObj, alloc);\n\n//doc1 - This is the inout JSON\n{\n    \"status\": {},\n    \"area_data\":\n    {\n        \"\"\n        \"update_results\":[]\n    }\n}\n\n//doc2 - This is what am trying to create\n{\n    \"status\": {},\n    \"results\":[]    //update_results from doc 1\n}\n</code></pre>\n"}, {"tags": ["c++", "debugging", "macros", "c-preprocessor"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1557949436, "post_id": 56156441, "comment_id": 98942251, "body": "Providing call site information (line and file) is not doable with any C++ technique I know of but preprocessor. This is a reason why there is a macro at the heart of many logging frameworks I worked with. What you could do is to take the method accept file and line as variables and print them, and call this method through invocation macro."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1557949567, "post_id": 56156441, "comment_id": 98942305, "body": "No standard feature allows this. Your best bet is to capture the information at the call site. Callstack introspection is not easy in C++."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1557949681, "post_id": 56156441, "comment_id": 98942357, "body": "The logging framework I have to work with daily takes file/line number as first two arguments of every log function call. So all calls look like <code>log_debug(__FILE__, __LINE__, &quot;message&quot;);</code>. Not great, but it does the job.."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1557949861, "post_id": 56156441, "comment_id": 98942444, "body": "You might be interested in the proposed <a href=\"https://en.cppreference.com/w/cpp/experimental/source_location\" rel=\"nofollow noreferrer\"><code>std::experimental::source_location</code></a>."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1557950116, "post_id": 56156441, "comment_id": 98942542, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1: A full stacktrace is far more than asked for. Anyway, <code>source_location</code> might become an interesting new alternative."}], "answers": [{"tags": [], "owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "is_accepted": true, "score": 2, "last_activity_date": 1557962979, "creation_date": 1557962979, "answer_id": 56158892, "question_id": 56156441, "link": "https://stackoverflow.com/questions/56156441/c-is-it-possible-to-use-macros-to-have-a-class-function-print-from-where-it-is/56158892#56158892", "title": "C++ is it possible to use macros to have a class function print from where it is called?", "body": "<p>If you're using GCC, this has been available from GCC 4.8:</p>\n\n<pre><code>#include &lt;cstdio&gt;\n\nstruct Foo\n{\n    void debug(const char *file=__builtin_FILE(), int line=__builtin_LINE(), const char *function=__builtin_FUNCTION())\n    {\n        printf(\"%s:%d: called from %s\\n\", file, line, function);\n    }\n};\n\nint main()\n{\n    Foo().debug();\n}\n</code></pre>\n"}], "owner": {"reputation": 5185, "user_id": 6202327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AFtrB.png?s=128&g=1", "display_name": "Makogan", "link": "https://stackoverflow.com/users/6202327/makogan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 56158892, "answer_count": 1, "score": 0, "last_activity_date": 1557962979, "creation_date": 1557948654, "last_edit_date": 1557952526, "question_id": 56156441, "link": "https://stackoverflow.com/questions/56156441/c-is-it-possible-to-use-macros-to-have-a-class-function-print-from-where-it-is", "title": "C++ is it possible to use macros to have a class function print from where it is called?", "body": "<p>Assume I have a class definition like this:</p>\n\n<pre><code>class A {\n    void method();\n}\n</code></pre>\n\n<p>Assume I need to find where this method is called directly from C++ (i.e gdb and company are rulled out, so is throwing an exception)</p>\n\n<p>One could naively define the following:</p>\n\n<pre><code>class A {\n    //void method();\n    void method() { print(__FILE__ + \": \" + __LINE__) };\n}\n</code></pre>\n\n<p>This will however print the file and line of the current method, not the file and line of where the method is called.</p>\n\n<p>If instead of OOP our code was procedural once could convert:</p>\n\n<pre><code>void method();\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>#define method() { print(__FILE__ + \": \" + __LINE__) };\n</code></pre>\n\n<p>The above works because method takes in no parameters, so it;s easy for the peprocessor to change all instances of the method to our new debugging code.</p>\n\n<p>However this is not very general. With OOP we can have classes A, B, C and D all overwriting the method, thus overprinting information for unrelated classes. </p>\n\n<p>Even if only class A implements <code>method()</code> if the function takes any parameters, now we get a new issue: <code>method(int i)</code> would require a regular expression to be replaced since we have no prior knowledge of the variable names bassed into the method. i.e the pattern <code>a.method(variable);</code>  cannot be statically matched by a constant define, we would need to match regular expressions.</p>\n\n<p>Does anyone know if it is possible to trick the compiler into resolving the <code>__FILE__</code> and <code>__LINE__</code> macros at the call rather than the definition?</p>\n\n<p>EDIT:</p>\n\n<p>The question marked as duplicate is from 2010, I think it's worth keeping this one open, 9 years seems more than enough time for new potential answers to be given to this question.</p>\n\n<p>for example <code>std::experimental::source_location</code> doesn't appear in the question.</p>\n\n<p>I would like this question to be reopened</p>\n"}, {"tags": ["c++", "parsing", "lemon"], "comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1557958285, "post_id": 56156201, "comment_id": 98945408, "body": "Not my downvote, but I guess that it would have been better to have provided a bit more context for potential answerers who are not totally aware of how Lemon generates code. In particular, seeing your <code>%type</code> declarations wouldn&#39;t have hurt at all."}], "answers": [{"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 1, "last_activity_date": 1557959342, "last_edit_date": 1557959342, "creation_date": 1557958196, "answer_id": 56158302, "question_id": 56156201, "link": "https://stackoverflow.com/questions/56156201/how-do-i-fix-error-call-to-implicitly-deleted-default-constructor-of-yyminort/56158302#56158302", "title": "How do I fix &quot;error: call to implicitly-deleted default constructor of &#39;YYMINORTYPE&#39;&quot; in lemon?", "body": "<p>Lemon is primarily intended to generate C code, but (like flex and lex) the parser it generates can be compiled with C++ provided your semantic types are simple enough. In particular, the various semantic types are joined together into a <code>union</code> and instances of this <code>union</code> are default-constructed (when the parser stack is created). As a consequence, every individual semantic type must have a default constructor, and <code>std::tuple</code> does not define one. So you can't use a <code>std::tuple</code> as a semantic type.</p>\n\n<p>That's not the only restriction. Stack elements may be copied by <code>realloc</code>, so the types should be trivially copyable. In short, they should basically look like C types, which excludes most of the C++ standard library.</p>\n\n<p>In this particular case, you could use a <code>struct</code> with two members instead of a <code>tuple</code>.</p>\n\n<p>Note that the Lemon documentation says nothing about C++ compatibility, so it is certainly possible that future changes (to C++ or to the lemon parser) will not preserve this compatibility.</p>\n"}], "owner": {"reputation": 199, "user_id": 8099902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80b4602c934601c2287be38867f66468?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTurtle", "link": "https://stackoverflow.com/users/8099902/coffeeturtle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 56158302, "answer_count": 1, "score": -1, "last_activity_date": 1557959342, "creation_date": 1557947557, "question_id": 56156201, "link": "https://stackoverflow.com/questions/56156201/how-do-i-fix-error-call-to-implicitly-deleted-default-constructor-of-yyminort", "title": "How do I fix &quot;error: call to implicitly-deleted default constructor of &#39;YYMINORTYPE&#39;&quot; in lemon?", "body": "<p>When I compile my lemon grammar. I get the following error.</p>\n\n<pre><code>src/grammar.c:949:21: error: call to implicitly-deleted default constructor of\n      'YYMINORTYPE'\n        YYMINORTYPE yylhsminor;\n                    ^\nsrc/grammar.c:111:38: note: default constructor of '' is implicitly deleted because\n      variant field 'yy13' has a non-trivial default constructor\n  std::tuple&lt;bool, IdentifierNode *&gt; yy13;\n                                     ^\nsrc/grammar.c:1178:15: error: call to implicitly-deleted default constructor of\n      'YYMINORTYPE'\n  YYMINORTYPE yyminorunion;\n              ^\nsrc/grammar.c:111:38: note: default constructor of '' is implicitly deleted because\n      variant field 'yy13' has a non-trivial default constructor\n  std::tuple&lt;bool, IdentifierNode *&gt; yy13;\n                                     ^\n2 errors generated.\n</code></pre>\n\n<p>Can anyone help? Thanks in advance.</p>\n"}, {"tags": ["java", "c++", "swig"], "owner": {"reputation": 75, "user_id": 2177366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2331c3e38435be0727ecc732fadd00ed?s=128&d=identicon&r=PG", "display_name": "getchar", "link": "https://stackoverflow.com/users/2177366/getchar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1558114677, "creation_date": 1557946137, "last_edit_date": 1558114677, "question_id": 56155892, "link": "https://stackoverflow.com/questions/56155892/how-to-wrap-userdefinedtype-getobject-and-populate-java-container-from-a-memb", "title": "How to wrap UserDefinedType* getObject() and populate Java container from a member of type const uint16_t* of the returned object", "body": "<p>I have the following <code>struct</code> which contains a data member <code>pixeldata_</code> which is a pointer to an array of short ints. Size of this array is width * height.</p>\n\n<pre><code>struct Frame\n{\npublic:\n    const uint16_t* getPixelData()\n    {\n        return this-&gt;pixeldata_;\n    }\n    int getWidth() { return this-&gt;width_; }\n    int getHeight(){ return this-&gt;height_; }\n    void setPixelData(const uint16_t* pixeldata)\n    {\n        this-&gt;pixeldata_ = pixeldata;\n    }\n    int getSize(){ return this-&gt;width_*this-&gt;height_; }\nprivate:\n    const uint16_t* pixeldata_{nullptr};\n    int width_ {0}; // typically 640 for our use case\n    int height_{0}; // typically 480 for our use case\n};\n</code></pre>\n\n<p>Using <code>%include \"stdint.i\"</code> creates an opaque pointer of type <code>SWIGTYPE_p_unsigned_short</code> which I cannot dereference. How can I copy that array into a Java container favorably an ArrayList of <code>unsigned short</code></p>\n\n<p>So, how would I wrap the following code for Java and access the member <code>pixeldata_</code> and retrieve the array of short ints from C++ layer to Java containers?</p>\n\n<pre><code>Frame* Sensor::getFrame();\nFrame* frame = getFrame();\nauto pixel_data = frame-&gt;getPixelData();\nfor (auto pixel : pixel_data)\n{\n// possibly create an image or texture \n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "multi-index", "boost-multi-index"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1557946338, "post_id": 56155889, "comment_id": 98940922, "body": "Unrelated, but why don&#39;t you install <a href=\"https://access.redhat.com/documentation/en-us/red_hat_developer_toolset/8/html/8.0_release_notes/dts8.0_release\" rel=\"nofollow noreferrer\">devtoolset-8</a> and get yourself a fairly modern compiler (gcc 8.2) with C++17 support and full support from your distribution? Staying with the ancient gcc 4.8 stock compiler seems like an exercise in masochism."}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 1, "creation_date": 1557946825, "post_id": 56155889, "comment_id": 98941133, "body": "Please post an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, preferably with a godbolt link.  Your error line numbers don&#39;t even line up with your sample code."}, {"owner": {"reputation": 1625, "user_id": 1139436, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a519e31546fe630d93d69728906be8e5?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/1139436/jon"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1557947757, "post_id": 56155889, "comment_id": 98941555, "body": "@JesperJuhl There are internal reasons why this is the compiler in play."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1557948745, "post_id": 56155889, "comment_id": 98941976, "body": "@Jon Fine. I was just trying to point you in a direction of less pain. \ud83d\ude42 And RedHat actually fully supports linking objects build with the stock compiler with objects built with <code>devtoolset</code> (in <i>most</i> cases), so you may be able to overcome some of those &quot;internal reasons&quot; \ud83d\ude09"}, {"owner": {"reputation": 1625, "user_id": 1139436, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a519e31546fe630d93d69728906be8e5?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/1139436/jon"}, "reply_to_user": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1557948989, "post_id": 56155889, "comment_id": 98942080, "body": "@xaxxon  Done as requested."}], "answers": [{"comments": [{"owner": {"reputation": 1625, "user_id": 1139436, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a519e31546fe630d93d69728906be8e5?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/1139436/jon"}, "edited": false, "score": 0, "creation_date": 1557954407, "post_id": 56157036, "comment_id": 98944226, "body": "That did the trick.  I was actually placing the view creation in a constructor defined in my cpp file, but commented them out due to all of the errors I was seeing."}], "tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": true, "score": 2, "last_activity_date": 1557951567, "creation_date": 1557951567, "answer_id": 56157036, "question_id": 56155889, "link": "https://stackoverflow.com/questions/56155889/boost-multi-index-container-not-compiling/56157036#56157036", "title": "boost multi_index_container not compiling", "body": "<p>The map index types are not default constructible, you need to change them to references and initialise them in your constructor:</p>\n\n<pre><code>class MappingClass\n{\nprivate:\n    // Define an object of the mapping db type.\n    mapDb_t mapDb;\n\n    // Index iterators.\n    mapDb_by_clientAid::iterator clientIter;\n    mapDb_by_serverAid::iterator serverIter;\n\n    // Index views.\n    mapDb_by_serverAid&amp; serverView;\n    mapDb_by_clientAid&amp; clientView;\n\npublic:\n    MappingClass()\n    :serverView( mapDb.get&lt; 0 &gt;() ),\n     clientView( mapDb.get&lt; 1 &gt;() ) { };\n    ~MappingClass() { };\n};\n</code></pre>\n\n<p>Note you also need to move <code>mapDb</code> to before the views so that it is initialised first.</p>\n"}], "owner": {"reputation": 1625, "user_id": 1139436, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a519e31546fe630d93d69728906be8e5?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/1139436/jon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 56157036, "answer_count": 1, "score": 0, "last_activity_date": 1557951567, "creation_date": 1557946120, "last_edit_date": 1557948903, "question_id": 56155889, "link": "https://stackoverflow.com/questions/56155889/boost-multi-index-container-not-compiling", "title": "boost multi_index_container not compiling", "body": "<p>Trying to follow the boost docs on the usage of this, but am running into a snag.</p>\n\n<p>Building on CentOS 7, g++ 4.8.5-28. Language standard: <strong>C++03</strong></p>\n\n<p>Working sample: <a href=\"https://godbolt.org/z/KPvjS_\" rel=\"nofollow noreferrer\">https://godbolt.org/z/KPvjS_</a></p>\n\n<p>My Code:</p>\n\n<pre><code>#include &lt;boost/multi_index_container.hpp&gt;\n#include &lt;boost/multi_index/sequenced_index.hpp&gt;\n#include &lt;boost/multi_index/ordered_index.hpp&gt;\n#include &lt;boost/multi_index/identity.hpp&gt;\n#include &lt;boost/multi_index/member.hpp&gt;\n#include &lt;boost/multi_index/composite_key.hpp&gt;\n\nusing namespace ::boost;\nusing namespace ::boost::multi_index;\n\ntypedef unsigned char UInt8;\ntypedef unsigned int UInt32;\ntypedef UInt8 ACCESSID[16];\n\nclass AccessID\n{\npublic:\n    AccessID();\n    AccessID(const AccessID &amp; id);\n    const std::size_t GetHash() const { return hashId;}\n\nprivate:\n    ACCESSID id;\n    std::size_t hashId;\n};\n\nstruct map_entry\n{\n    UInt32          subject_hash;\n    UInt32          container;\n    AccessID        clientAccessId;\n    AccessID        serverAccessId;\n\n    map_entry( UInt32   parmHash\n             , UInt32   parmContainer\n             , AccessID &amp;parmClientAccessId\n             , AccessID &amp;parmServerAccessId )\n        : subject_hash( parmHash )\n        , container( parmContainer )\n        , clientAccessId( parmClientAccessId )\n        , serverAccessId( parmServerAccessId )\n    {\n    }\n};\n\nstruct clientAccessId_extractor\n{\n    typedef std::size_t result_type;\n    result_type operator ()( const map_entry &amp;e ) const\n    {\n        // Hash is a boost::hash value.\n        return e.clientAccessId.GetHash();\n    }\n};\n\nstruct serverAccessId_extractor\n{\n    typedef std::size_t result_type;\n    result_type operator ()( const map_entry &amp;e ) const\n    {\n        return e.serverAccessId.GetHash();\n    }\n};\n\n// Define the mapping relationships; like a \"database\" of sorts.\ntypedef multi_index_container&lt;\n    map_entry,\n    indexed_by&lt;\n        // Former \"global\" view.\n        ordered_unique&lt;\n            composite_key&lt;\n                map_entry,\n                member&lt; map_entry, UInt32, &amp;map_entry::container &gt;,\n                serverAccessId_extractor\n            &gt;\n        &gt;,\n\n        // Regular lookup.\n        ordered_unique&lt;\n            composite_key&lt;\n                map_entry,\n                member&lt; map_entry, UInt32, &amp;map_entry::subject_hash &gt;,\n                member&lt; map_entry, UInt32, &amp;map_entry::container &gt;,\n                clientAccessId_extractor\n            &gt;\n        &gt;\n    &gt;\n&gt; mapDb_t;\n\n// Typedef the index types for easier reading.\ntypedef mapDb_t::nth_index&lt; 0 &gt;::type mapDb_by_serverAid;\ntypedef mapDb_t::nth_index&lt; 1 &gt;::type mapDb_by_clientAid;\n\nclass MappingClass\n{\nprivate:\n\n    // Index views.\n    mapDb_by_serverAid serverView;\n    mapDb_by_clientAid clientView;\n\n    // Index iterators.\n    mapDb_by_clientAid::iterator clientIter;\n    mapDb_by_serverAid::iterator serverIter;\n\n    // Define an object of the mapping db type.\n    mapDb_t mapDb;\n\npublic:\n    MappingClass() { };\n    ~MappingClass() { };\n};\n</code></pre>\n\n<p>And the error output from trying to compile:</p>\n\n<pre><code>$ g++ -fPIC -x c++ -c -Wno-unused-local-typedefs -Wall -Werror -O2 -m64 -D__EXTENSIONS__ -U_RWSTD_MULTI_THREAD -U_REENTRANT -DUSE_PTHREADS -DNDEBUG -DGCCBOOL -U_THREAD_SAFE -I/home/jearle/git//Open-Source/boost/1.51.0/common  test_mi2.cpp -o test_mi2.o\ntest_mi2.cpp: In constructor \u2018MappingClass::MappingClass()\u2019:\ntest_mi2.cpp:110:20: error: no matching function for call to \u2018boost::multi_index::detail::ordered_index&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, serverAccessId_extractor&gt;, std::less&lt;boost::multi_index::composite_key_result&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, serverAccessId_extractor&gt; &gt; &gt;, boost::multi_index::detail::nth_layer&lt;1, map_entry, boost::multi_index::indexed_by&lt;boost::multi_index::ordered_unique&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, serverAccessId_extractor&gt; &gt;, boost::multi_index::ordered_unique&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::subject_hash&gt;, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, clientAccessId_extractor&gt; &gt; &gt;, std::allocator&lt;map_entry&gt; &gt;, boost::mpl::vector0&lt;mpl_::na&gt;, boost::multi_index::detail::ordered_unique_tag&gt;::ordered_index( \u2019\n     MappingClass() { };\n                    ^\ntest_mi2.cpp:110:20: note: candidates are:\nIn file included from test_mi2.cpp:3:0:\n/home/jearle/git//Open-Source/boost/1.51.0/common/boost/multi_index/ordered_index.hpp:542:3: note: boost::multi_index::detail::ordered_index&lt;KeyFromValue, Compare, SuperMeta, TagList, Category&gt;::ordered_index(const boost::multi_index::detail::ordered_index&lt;KeyFromValue, Compare, SuperMeta, TagList, Category&gt;&amp;) [with KeyFromValue = boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, serverAccessId_extractor&gt;; Compare = std::less&lt;boost::multi_index::composite_key_result&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, serverAccessId_extractor&gt; &gt; &gt;; SuperMeta = boost::multi_index::detail::nth_layer&lt;1, map_entry, boost::multi_index::indexed_by&lt;boost::multi_index::ordered_unique&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, serverAccessId_extractor&gt; &gt;, boost::multi_index::ordered_unique&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::subject_hash&gt;, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, clientAccessId_extractor&gt; &gt; &gt;, std::allocator&lt;map_entry&gt; &gt;; TagList = boost::mpl::vector0&lt;mpl_::na&gt;; Category = boost::multi_index::detail::ordered_unique_tag]\n   ordered_index(\n   ^\n/home/jearle/git//Open-Source/boost/1.51.0/common/boost/multi_index/ordered_index.hpp:542:3: note:   candidate expects 1 argument, 0 provided\n/home/jearle/git//Open-Source/boost/1.51.0/common/boost/multi_index/ordered_index.hpp:534:3: note: boost::multi_index::detail::ordered_index&lt;KeyFromValue, Compare, SuperMeta, TagList, Category&gt;::ordered_index(const ctor_args_list&amp;, const allocator_type&amp;) [with KeyFromValue = boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, serverAccessId_extractor&gt;; Compare = std::less&lt;boost::multi_index::composite_key_result&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, serverAccessId_extractor&gt; &gt; &gt;; SuperMeta = boost::multi_index::detail::nth_layer&lt;1, map_entry, boost::multi_index::indexed_by&lt;boost::multi_index::ordered_unique&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, serverAccessId_extractor&gt; &gt;, boost::multi_index::ordered_unique&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::subject_hash&gt;, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, clientAccessId_extractor&gt; &gt; &gt;, std::allocator&lt;map_entry&gt; &gt;; TagList = boost::mpl::vector0&lt;mpl_::na&gt;; Category = boost::multi_index::detail::ordered_unique_tag; boost::multi_index::detail::ordered_index&lt;KeyFromValue, Compare, SuperMeta, TagList, Category&gt;::ctor_args_list = boost::tuples::cons&lt;boost::tuples::tuple&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, serverAccessId_extractor&gt;, std::less&lt;boost::multi_index::composite_key_result&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, serverAccessId_extractor&gt; &gt; &gt;, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type&gt;, boost::tuples::cons&lt;boost::tuples::tuple&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::subject_hash&gt;, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, clientAccessId_extractor&gt;, std::less&lt;boost::multi_index::composite_key_result&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::subject_hash&gt;, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, clientAccessId_extractor&gt; &gt; &gt;, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type&gt;, boost::tuples::null_type&gt; &gt;; typename SuperMeta::type::ctor_args_list = boost::tuples::cons&lt;boost::tuples::tuple&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::subject_hash&gt;, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, clientAccessId_extractor&gt;, std::less&lt;boost::multi_index::composite_key_result&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::subject_hash&gt;, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, clientAccessId_extractor&gt; &gt; &gt;, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type&gt;, boost::tuples::null_type&gt;; boost::multi_index::detail::ordered_index&lt;KeyFromValue, Compare, SuperMeta, TagList, Category&gt;::allocator_type = std::allocator&lt;map_entry&gt;]\n   ordered_index(const ctor_args_list&amp; args_list,const allocator_type&amp; al):\n   ^\n/home/jearle/git//Open-Source/boost/1.51.0/common/boost/multi_index/ordered_index.hpp:534:3: note:   candidate expects 2 arguments, 0 provided\n/home/jearle/git//Open-Source/boost/1.51.0/common/boost/multi_index/ordered_index.hpp:558:3: error: \u2018boost::multi_index::detail::ordered_index&lt;KeyFromValue, Compare, SuperMeta, TagList, Category&gt;::~ordered_index() [with KeyFromValue = boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, serverAccessId_extractor&gt;; Compare = std::less&lt;boost::multi_index::composite_key_result&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, serverAccessId_extractor&gt; &gt; &gt;; SuperMeta = boost::multi_index::detail::nth_layer&lt;1, map_entry, boost::multi_index::indexed_by&lt;boost::multi_index::ordered_unique&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, serverAccessId_extractor&gt; &gt;, boost::multi_index::ordered_unique&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::subject_hash&gt;, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, clientAccessId_extractor&gt; &gt; &gt;, std::allocator&lt;map_entry&gt; &gt;; TagList = boost::mpl::vector0&lt;mpl_::na&gt;; Category = boost::multi_index::detail::ordered_unique_tag]\u2019 is protected\n   ~ordered_index()\n   ^\ntest_mi2.cpp:110:20: error: within this context\n     MappingClass() { };\n                    ^\ntest_mi2.cpp:110:20: error: no matching function for call to \u2018boost::multi_index::detail::ordered_index&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::subject_hash&gt;, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, clientAccessId_extractor&gt;, std::less&lt;boost::multi_index::composite_key_result&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::subject_hash&gt;, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, clientAccessId_extractor&gt; &gt; &gt;, boost::multi_index::detail::nth_layer&lt;2, map_entry, boost::multi_index::indexed_by&lt;boost::multi_index::ordered_unique&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, serverAccessId_extractor&gt; &gt;, boost::multi_index::ordered_unique&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::subject_hash&gt;, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, clientAccessId_extractor&gt; &gt; &gt;, std::allocator&lt;map_entry&gt; &gt;, boost::mpl::vector0&lt;mpl_::na&gt;, boost::multi_index::detail::ordered_unique_tag&gt;::ordered_index()\u2019\ntest_mi2.cpp:110:20: note: candidates are:\nIn file included from test_mi2.cpp:3:0:\n/home/jearle/git//Open-Source/boost/1.51.0/common/boost/multi_index/ordered_index.hpp:542:3: note: boost::multi_index::detail::ordered_index&lt;KeyFromValue, Compare, SuperMeta, TagList, Category&gt;::ordered_index(const boost::multi_index::detail::ordered_index&lt;KeyFromValue, Compare, SuperMeta, TagList, Category&gt;&amp;) [with KeyFromValue = boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::subject_hash&gt;, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, clientAccessId_extractor&gt;; Compare = std::less&lt;boost::multi_index::composite_key_result&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::subject_hash&gt;, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, clientAccessId_extractor&gt; &gt; &gt;; SuperMeta = boost::multi_index::detail::nth_layer&lt;2, map_entry, boost::multi_index::indexed_by&lt;boost::multi_index::ordered_unique&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, serverAccessId_extractor&gt; &gt;, boost::multi_index::ordered_unique&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::subject_hash&gt;, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, clientAccessId_extractor&gt; &gt; &gt;, std::allocator&lt;map_entry&gt; &gt;; TagList = boost::mpl::vector0&lt;mpl_::na&gt;; Category = boost::multi_index::detail::ordered_unique_tag]\n   ordered_index(\n   ^\n/home/jearle/git//Open-Source/boost/1.51.0/common/boost/multi_index/ordered_index.hpp:542:3: note:   candidate expects 1 argument, 0 provided\n/home/jearle/git//Open-Source/boost/1.51.0/common/boost/multi_index/ordered_index.hpp:534:3: note: boost::multi_index::detail::ordered_index&lt;KeyFromValue, Compare, SuperMeta, TagList, Category&gt;::ordered_index(const ctor_args_list&amp;, const allocator_type&amp;) [with KeyFromValue = boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::subject_hash&gt;, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, clientAccessId_extractor&gt;; Compare = std::less&lt;boost::multi_index::composite_key_result&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::subject_hash&gt;, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, clientAccessId_extractor&gt; &gt; &gt;; SuperMeta = boost::multi_index::detail::nth_layer&lt;2, map_entry, boost::multi_index::indexed_by&lt;boost::multi_index::ordered_unique&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, serverAccessId_extractor&gt; &gt;, boost::multi_index::ordered_unique&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::subject_hash&gt;, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, clientAccessId_extractor&gt; &gt; &gt;, std::allocator&lt;map_entry&gt; &gt;; TagList = boost::mpl::vector0&lt;mpl_::na&gt;; Category = boost::multi_index::detail::ordered_unique_tag; boost::multi_index::detail::ordered_index&lt;KeyFromValue, Compare, SuperMeta, TagList, Category&gt;::ctor_args_list = boost::tuples::cons&lt;boost::tuples::tuple&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::subject_hash&gt;, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, clientAccessId_extractor&gt;, std::less&lt;boost::multi_index::composite_key_result&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::subject_hash&gt;, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, clientAccessId_extractor&gt; &gt; &gt;, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type&gt;, boost::tuples::null_type&gt;; typename SuperMeta::type::ctor_args_list = boost::tuples::null_type; boost::multi_index::detail::ordered_index&lt;KeyFromValue, Compare, SuperMeta, TagList, Category&gt;::allocator_type = std::allocator&lt;map_entry&gt;]\n   ordered_index(const ctor_args_list&amp; args_list,const allocator_type&amp; al):\n   ^\n/home/jearle/git//Open-Source/boost/1.51.0/common/boost/multi_index/ordered_index.hpp:534:3: note:   candidate expects 2 arguments, 0 provided\n/home/jearle/git//Open-Source/boost/1.51.0/common/boost/multi_index/ordered_index.hpp:558:3: error: \u2018boost::multi_index::detail::ordered_index&lt;KeyFromValue, Compare, SuperMeta, TagList, Category&gt;::~ordered_index() [with KeyFromValue = boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::subject_hash&gt;, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, clientAccessId_extractor&gt;; Compare = std::less&lt;boost::multi_index::composite_key_result&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::subject_hash&gt;, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, clientAccessId_extractor&gt; &gt; &gt;; SuperMeta = boost::multi_index::detail::nth_layer&lt;2, map_entry, boost::multi_index::indexed_by&lt;boost::multi_index::ordered_unique&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, serverAccessId_extractor&gt; &gt;, boost::multi_index::ordered_unique&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::subject_hash&gt;, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, clientAccessId_extractor&gt; &gt; &gt;, std::allocator&lt;map_entry&gt; &gt;; TagList = boost::mpl::vector0&lt;mpl_::na&gt;; Category = boost::multi_index::detail::ordered_unique_tag]\u2019 is protected\n   ~ordered_index()\n   ^\ntest_mi2.cpp:110:20: error: within this context\n     MappingClass() { };\n                    ^\nIn file included from test_mi2.cpp:3:0:\n/home/jearle/git//Open-Source/boost/1.51.0/common/boost/multi_index/ordered_index.hpp: In destructor \u2018MappingClass::~MappingClass()\u2019:\n/home/jearle/git//Open-Source/boost/1.51.0/common/boost/multi_index/ordered_index.hpp:558:3: error: \u2018boost::multi_index::detail::ordered_index&lt;KeyFromValue, Compare, SuperMeta, TagList, Category&gt;::~ordered_index() [with KeyFromValue = boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, serverAccessId_extractor&gt;; Compare = std::less&lt;boost::multi_index::composite_key_result&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, serverAccessId_extractor&gt; &gt; &gt;; SuperMeta = boost::multi_index::detail::nth_layer&lt;1, map_entry, boost::multi_index::indexed_by&lt;boost::multi_index::ordered_unique&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, serverAccessId_extractor&gt; &gt;, boost::multi_index::ordered_unique&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::subject_hash&gt;, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, clientAccessId_extractor&gt; &gt; &gt;, std::allocator&lt;map_entry&gt; &gt;; TagList = boost::mpl::vector0&lt;mpl_::na&gt;; Category = boost::multi_index::detail::ordered_unique_tag]\u2019 is protected\n   ~ordered_index()\n   ^\ntest_mi2.cpp:111:21: error: within this context\n     ~MappingClass() { };\n                     ^\nIn file included from test_mi2.cpp:3:0:\n/home/jearle/git//Open-Source/boost/1.51.0/common/boost/multi_index/ordered_index.hpp:558:3: error: \u2018boost::multi_index::detail::ordered_index&lt;KeyFromValue, Compare, SuperMeta, TagList, Category&gt;::~ordered_index() [with KeyFromValue = boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::subject_hash&gt;, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, clientAccessId_extractor&gt;; Compare = std::less&lt;boost::multi_index::composite_key_result&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::subject_hash&gt;, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, clientAccessId_extractor&gt; &gt; &gt;; SuperMeta = boost::multi_index::detail::nth_layer&lt;2, map_entry, boost::multi_index::indexed_by&lt;boost::multi_index::ordered_unique&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, serverAccessId_extractor&gt; &gt;, boost::multi_index::ordered_unique&lt;boost::multi_index::composite_key&lt;map_entry, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::subject_hash&gt;, boost::multi_index::member&lt;map_entry, unsigned int, &amp;map_entry::container&gt;, clientAccessId_extractor&gt; &gt; &gt;, std::allocator&lt;map_entry&gt; &gt;; TagList = boost::mpl::vector0&lt;mpl_::na&gt;; Category = boost::multi_index::detail::ordered_unique_tag]\u2019 is protected\n   ~ordered_index()\n   ^\ntest_mi2.cpp:111:21: error: within this context\n     ~MappingClass() { };\n                     ^\n</code></pre>\n\n<p>I don't really understand what the boost errors are, here. What have I missed?</p>\n"}, {"tags": ["python", "c++"], "comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1557946077, "post_id": 56155749, "comment_id": 98940822, "body": "Try <code>ldd &#47;Users&#47;joe&#47;Downloads&#47;EkPyTransportDist&#47;PyTransport&#47;PyTrans&#47;&#47;&zwnj;&#8203;lib&#47;python&#47;PyTransNe&zwnj;&#8203;wEk.so</code>. Or if I&#39;m not mistaking, that looks like an <i>OSX</i> path. There try <code>otool -L &#47;Users&#47;joe&#47;Downloads&#47;EkPyTransportDist&#47;PyTransport&#47;PyTrans&#47;&#47;&zwnj;&#8203;lib&#47;python&#47;PyTransNe&zwnj;&#8203;wEk.so</code>."}, {"owner": {"reputation": 1, "user_id": 11278492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae9788623e0fc6d27c69c6f0aaa244f6?s=128&d=identicon&r=PG&f=1", "display_name": "J. Wraga", "link": "https://stackoverflow.com/users/11278492/j-wraga"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1557946272, "post_id": 56155749, "comment_id": 98940900, "body": "It is OSX (I should have clarified). Output is     <code>&#47;usr&#47;lib&#47;libstdc++.6.dylib (compatibility version 7.0.0, current version 104.1.0) \t&#47;usr&#47;lib&#47;libSystem.B.dylib (compatibility version 1.0.0, current version 1252.250.1)</code>"}, {"owner": {"reputation": 1, "user_id": 11278492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae9788623e0fc6d27c69c6f0aaa244f6?s=128&d=identicon&r=PG&f=1", "display_name": "J. Wraga", "link": "https://stackoverflow.com/users/11278492/j-wraga"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1558028028, "post_id": 56155749, "comment_id": 98974237, "body": "Any ideas @CristiFati ?"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1558028089, "post_id": 56155749, "comment_id": 98974259, "body": "What&#39;s the same command output on the machine where it works?"}, {"owner": {"reputation": 1, "user_id": 11278492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae9788623e0fc6d27c69c6f0aaa244f6?s=128&d=identicon&r=PG&f=1", "display_name": "J. Wraga", "link": "https://stackoverflow.com/users/11278492/j-wraga"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1558028307, "post_id": 56155749, "comment_id": 98974372, "body": "My computer is not working at the moment (getting repaired today) but I am almost certain it was the same. (That is, the output on my machine, for the original code, which runs without this import error)"}], "owner": {"reputation": 1, "user_id": 11278492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae9788623e0fc6d27c69c6f0aaa244f6?s=128&d=identicon&r=PG&f=1", "display_name": "J. Wraga", "link": "https://stackoverflow.com/users/11278492/j-wraga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1557945518, "creation_date": 1557945518, "question_id": 56155749, "link": "https://stackoverflow.com/questions/56155749/import-error-trying-to-understand-the-symbol-that-is-not-being-found", "title": "Import Error: Trying to understand the symbol that is not being found", "body": "<p>I am modifying someone else's code, and getting an error that the original code does not give me. After setting up a file called PyTransNewEk.so, I try to import it, leading to </p>\n\n<pre><code>ImportError: dlopen(/Users/joe/Downloads/EkPyTransportDist/PyTransport/PyTrans//lib/python/PyTransNewEk.so, 2): Symbol not found: __Z8r8_rkf45PFvdPdS_S_S_S_S_S_S_bEiS_S_S_dS_diS_S_S_\nReferenced from: /Users/joe/Downloads/EkPyTransportDist/PyTransport/PyTrans//lib/python/PyTransNewEk.so\nExpected in: flat namespace\nin /Users/joe/Downloads/EkPyTransportDist/PyTransport/PyTrans//lib/python/PyTransNewEk.so \n</code></pre>\n\n<p>I have seen some similar issues online, eg issues with linking with boost.python, but in that case \"boost\" appeared in the symbol. I notice the integrator I'm using \"rkf45\" appears in it, but I don't understand what it means.</p>\n"}, {"tags": ["c++", "makefile", "cmake"], "comments": [{"owner": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "edited": false, "score": 0, "creation_date": 1557948574, "post_id": 56155681, "comment_id": 98941908, "body": "Btw, I was not able to reproduce it, either with <code>2.8</code> or <code>3.14</code>"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "edited": false, "score": 0, "creation_date": 1557948647, "post_id": 56155681, "comment_id": 98941940, "body": "Hmm...what&#39;s your gcc version?"}, {"owner": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "edited": false, "score": 0, "creation_date": 1557948699, "post_id": 56155681, "comment_id": 98941960, "body": "<code>GNU Make 4.1</code>, <code>cmake 3.14.20190309-gba3e8</code>, <code>g++ (Ubuntu 7.4.0-1ubuntu1~18.04) 7.4.0</code>"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "edited": false, "score": 0, "creation_date": 1557948779, "post_id": 56155681, "comment_id": 98941986, "body": "@R2RT - Mine are all identical. (well my cmake has today&#39;s date because I tried recompiling it..but still 3.14)"}, {"owner": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "edited": false, "score": 0, "creation_date": 1557948812, "post_id": 56155681, "comment_id": 98942004, "body": "By any chance, don&#39;t you have two copies of <code>includeme.h</code> file?"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "edited": false, "score": 0, "creation_date": 1557948859, "post_id": 56155681, "comment_id": 98942029, "body": "No, just the one.  You did the whole subdirectory, object thing?  That&#39;s definitely necessary to reproduce the problem.  Works fine if you just have a static lib that includes a header outside its path."}, {"owner": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "edited": false, "score": 0, "creation_date": 1557949131, "post_id": 56155681, "comment_id": 98942128, "body": "Just a copy of your code. <a href=\"https://wetransfer.com/downloads/082d4ad9425cd185af5c546b74e7c98b20190515193804/48dd7d\" rel=\"nofollow noreferrer\">wetransfer.com/downloads/&hellip;</a>"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "edited": false, "score": 0, "creation_date": 1557949862, "post_id": 56155681, "comment_id": 98942445, "body": "@R2RT - Your unzipped code reproduced the problem on my system...fascinating..."}, {"owner": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "edited": false, "score": 0, "creation_date": 1557949980, "post_id": 56155681, "comment_id": 98942492, "body": "Well, maybe try actual edit, not just <code>touch</code> call. This and your filesystem are my last suspects. Ouch, but <code>ninja</code> works... Idk what&#39;s happening"}], "answers": [{"comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1557947343, "post_id": 56156116, "comment_id": 98941358, "body": "Updated to 3.14 minimum, retested.  I&#39;ll look into the other stuff.  I think add_library isn&#39;t broken in the original, but the include_directories is used.."}, {"owner": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1557947868, "post_id": 56156116, "comment_id": 98941606, "body": "@zzxyz <code>add_library</code> syntax is simple, it expects name, (optionally) type and sources. <code>submod</code> is not source. <a href=\"https://cmake.org/cmake/help/v3.14/command/add_library.html#id2\" rel=\"nofollow noreferrer\">cmake.org/cmake/help/v3.14/command/add_library.html#id2</a> @downvoters, how can I improve this answer?"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1557948931, "post_id": 56156116, "comment_id": 98942055, "body": "ps--I think I had to set the linker language because of my broken add_library call."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1557949483, "post_id": 56156116, "comment_id": 98942272, "body": "&quot;Barking up the wrong tree&quot; was useful.  See the addition to my question :)"}, {"owner": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1557949894, "post_id": 56156116, "comment_id": 98942459, "body": "@zzxyz I&#39;ve adjusted answer to your edits, if part before &quot;=== Obsolete fixups for original code ===&quot;, if it somehow explains part of your post which I tried to answer &quot;Key being I&#39;ve explicitly added a header to the source list and editing it still does not cause anything to get recompiled. &quot;, do you mind to accept it?"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1557950304, "post_id": 56156116, "comment_id": 98942618, "body": "my depend.make looks except that the header file is missing.  I&#39;m guessing this is some toolchain problem resulting from my upgrade from 16.04.  I think this has answered my question as far as it was possible to answer it :)"}, {"owner": {"reputation": 2653, "user_id": 1028434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a340b89a8b4efdb83da69d6cc93caac7?s=128&d=identicon&r=PG", "display_name": "fdk1342", "link": "https://stackoverflow.com/users/1028434/fdk1342"}, "edited": false, "score": 0, "creation_date": 1557951156, "post_id": 56156116, "comment_id": 98942952, "body": "LOL, your last guess is my answer.  Try using a relative path."}, {"owner": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1557951211, "post_id": 56156116, "comment_id": 98942980, "body": "Yep, I just learned that. @zzxyz, I have to ask you to unaccept my answer."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1557951480, "post_id": 56156116, "comment_id": 98943084, "body": "As mentioned in my question, using a relative path fixed nothing.  Tried this code on my WSL installation (fresh 18.04 rather than upgraded from 16.04) and everything worked as expected.  Oh...sorry, let me try explicit...still, seems like a toolchain issue"}, {"owner": {"reputation": 2653, "user_id": 1028434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a340b89a8b4efdb83da69d6cc93caac7?s=128&d=identicon&r=PG", "display_name": "fdk1342", "link": "https://stackoverflow.com/users/1028434/fdk1342"}, "edited": false, "score": 0, "creation_date": 1557951752, "post_id": 56156116, "comment_id": 98943188, "body": "@R2RT Thank you, I appreciate it. But let&#39;s just update your answer to just modify that it&#39;s CMake that generates the dependencies for the Makefile generator.  I can&#39;t reproduce the issue with OP example and never had the time to go through <code>cmDependsC.cxx</code> to reproduce the issue to better understand it."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1557951944, "post_id": 56156116, "comment_id": 98943277, "body": "Relative path did not fix anything.  Hand editing the cmake files did not fix anything.  The problem seems to be my <code>gnu make</code> or some system setting it is using.  Problem is the make toolchain on the machine in question.  The answer one edit ago was the best answer to MY question, which unfortunately I understand is unlikely to be useful to others."}, {"owner": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "edited": false, "score": 0, "creation_date": 1557952136, "post_id": 56156116, "comment_id": 98943351, "body": "Yeah, I am glad that I have helped, but there is no value to trespassing readers. I doubt I can write anything more than in linked SO question. I will edit it again then, to at least be a proper SO answer."}, {"owner": {"reputation": 2653, "user_id": 1028434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a340b89a8b4efdb83da69d6cc93caac7?s=128&d=identicon&r=PG", "display_name": "fdk1342", "link": "https://stackoverflow.com/users/1028434/fdk1342"}, "edited": false, "score": 0, "creation_date": 1557960320, "post_id": 56156116, "comment_id": 98945872, "body": "FYI, <code>ninja</code> relies on gcc (using -MMD and -MF) or whatever compiler you are using to generate a properly formatted file for the object file so <code>ninja</code> can include it in <code>depfile</code> parameter.  Not all supported versions of <code>make</code> and compilers are able to generate these kinds of files which is probably the main reason CMake has it&#39;s own dependency scanner. <a href=\"https://ninja-build.org/manual.html#ref_headers\" rel=\"nofollow noreferrer\">ninja-build.org/manual.html#ref_headers</a>"}, {"owner": {"reputation": 2623, "user_id": 666057, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/818dc2df03cd2f1ca7d6e6e701052f0c?s=128&d=identicon&r=PG", "display_name": "Anne van Rossum", "link": "https://stackoverflow.com/users/666057/anne-van-rossum"}, "edited": false, "score": 0, "creation_date": 1571913053, "post_id": 56156116, "comment_id": 103400704, "body": "Is there a way to have <code>cmake</code> not using its &quot;internal mechanism&quot; for <code>make</code>? After a refactoring when header files are removed, I often encounter that its &quot;internal mechanism&quot; to track dependencies is not updating correctly. I&#39;d prefer to have <code>make</code> to handle dependencies, not <code>cmake</code>."}, {"owner": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "reply_to_user": {"reputation": 2623, "user_id": 666057, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/818dc2df03cd2f1ca7d6e6e701052f0c?s=128&d=identicon&r=PG", "display_name": "Anne van Rossum", "link": "https://stackoverflow.com/users/666057/anne-van-rossum"}, "edited": false, "score": 0, "creation_date": 1571914265, "post_id": 56156116, "comment_id": 103401387, "body": "@AnnevanRossum I really doubt you can disable it. You could ask it as independent SO question. Only thing I can recommend is to file a bug report on CMake site and to try switching to <code>ninja</code> as core generator."}], "tags": [], "owner": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "is_accepted": true, "score": 4, "last_activity_date": 1557952864, "last_edit_date": 1557952864, "creation_date": 1557947221, "answer_id": 56156116, "question_id": 56155681, "link": "https://stackoverflow.com/questions/56155681/cmake-make-object-dependency-issue-not-rebuilding-when-header-changes/56156116#56156116", "title": "cmake/make (OBJECT) dependency issue--not rebuilding when header changes", "body": "<p>My initial answer was: </p>\n\n<blockquote>\n  <p>You are most likely barking at wrong tree. Source-to-header\n  dependencies are not managed by CMake, but underlying generator, as\n  headers do not take part of libraries compilation directly. In your\n  case it is make duty to detect dirty header and rebuild .cpp file.\n  Headers can be listed in sources, but it only makes them visible in\n  few IDEs and adds sanity check whenever they exist.</p>\n</blockquote>\n\n<p>But for case of <code>GNU make</code> it is not exactly the truth. Newer tools, like <code>ninja</code> are able to emit source-to-header dependencies when they compile code. So CMake only tracks down library-to-source dependencies and underlying tool keeps track of source-to-header.</p>\n\n<p>For <code>make</code>, CMake uses its internal mechanism to create depend.make files for object .cpp.o files. The algorithm is not perfect and may fail for absolute paths passed by <code>include_directories</code>.</p>\n\n<p>For reference, initially (after generation step) it creates <code>depend.make</code> files with comment:</p>\n\n<pre><code># Empty dependencies file for submod.\n# This may be replaced when dependencies are built.\n</code></pre>\n\n<p>Once make is called and objects are built first time, the file gets filled with:</p>\n\n<pre><code># CMAKE generated file: DO NOT EDIT!\n# Generated by \"Unix Makefiles\" Generator, CMake Version 3.14\n\nsubmod/CMakeFiles/submod.dir/compileme.cpp.o: ../includeme.h\nsubmod/CMakeFiles/submod.dir/compileme.cpp.o: ../submod/compileme.cpp\n\n</code></pre>\n\n<p>Thanks @Fred, for making me read all about it.</p>\n\n<p>Also this issue was already discussed on SO: <a href=\"https://stackoverflow.com/questions/7461000/handling-header-files-dependencies-with-cmake/26741728#26741728\">Handling header files dependencies with cmake</a></p>\n\n<p>And historical reading: <a href=\"http://www.aosabook.org/en/cmake.html\" rel=\"nofollow noreferrer\">http://www.aosabook.org/en/cmake.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "edited": false, "score": 0, "creation_date": 1557949474, "post_id": 56156350, "comment_id": 98942267, "body": "As stated in my answer, CMake does not track source-header dependencies. It only prepares <code>depend.make</code> files for object files with comment <code># Empty dependencies file for submod. # This may be replaced when dependencies are built. </code>"}, {"owner": {"reputation": 2653, "user_id": 1028434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a340b89a8b4efdb83da69d6cc93caac7?s=128&d=identicon&r=PG", "display_name": "fdk1342", "link": "https://stackoverflow.com/users/1028434/fdk1342"}, "reply_to_user": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "edited": false, "score": 1, "creation_date": 1557950874, "post_id": 56156350, "comment_id": 98942840, "body": "@R2RT You stated that &quot;Source-to-header dependencies are not managed by CMake&quot;. Of course it manages the dependencies.  CMake generates and populates <code>depends.make</code> using the command <code>cmake -E cmake_depends &quot;Unix Makefiles&quot; ...</code>. And in turn <code>make</code> uses the contents of <code>depends.make</code> to determine when to regenerate the object file.  If CMake doesn&#39;t include the required file in <code>depends.make</code> then it won&#39;t be rebuilt which is the problem OP is saying they are having."}, {"owner": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "edited": false, "score": 0, "creation_date": 1557951134, "post_id": 56156350, "comment_id": 98942941, "body": "Yep, I read digged to it I am wrong... I  had no idea <code>make</code> is not able to emit dependencies and thought it works like in <code>Ninja</code>. Given that, your answer is correct, not mine. <a href=\"http://www.aosabook.org/en/cmake.html\" rel=\"nofollow noreferrer\">aosabook.org/en/cmake.html</a>"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1557952117, "post_id": 56156350, "comment_id": 98943343, "body": "Weird.  Ok...So cmake is still likely the culprit.  Also upvoted this answer"}, {"owner": {"reputation": 2653, "user_id": 1028434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a340b89a8b4efdb83da69d6cc93caac7?s=128&d=identicon&r=PG", "display_name": "fdk1342", "link": "https://stackoverflow.com/users/1028434/fdk1342"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1557952387, "post_id": 56156350, "comment_id": 98943458, "body": "@zzxyz Unfortunately I&#39;ve not been able to reproduce the issue with the example.  I&#39;ve tried to replicate the same build structure, file contents, and also tried using an in-source build and out-of-source build. But for me <code>includeme.h</code> was always included in <code>depend.make</code>."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1557952690, "post_id": 56156350, "comment_id": 98943596, "body": "Yeah, can&#39;t reproduce this on my WSL install either.  Pretty bizarre breakage, because the &quot;problem machine&quot; is doing....quite sophisticated builds on a regular basis without issue.  Thanks very much for the help"}], "tags": [], "owner": {"reputation": 2653, "user_id": 1028434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a340b89a8b4efdb83da69d6cc93caac7?s=128&d=identicon&r=PG", "display_name": "fdk1342", "link": "https://stackoverflow.com/users/1028434/fdk1342"}, "is_accepted": false, "score": 2, "last_activity_date": 1557948311, "creation_date": 1557948311, "answer_id": 56156350, "question_id": 56155681, "link": "https://stackoverflow.com/questions/56155681/cmake-make-object-dependency-issue-not-rebuilding-when-header-changes/56156350#56156350", "title": "cmake/make (OBJECT) dependency issue--not rebuilding when header changes", "body": "<p>I'm just going by memory from the last time I've looked at how CMake generates the file dependencies for \"source files\" when using the Makefile generator.</p>\n\n<p>The step \"Scanning dependencies\" is when CMake scans the \"source files\" and creates a dependency build rules for that \"source file\".  It does this using REGEXs and a few other rules (it skips some of the pre-processing rules).  It tends to skip what it considers a system header file which can include a file that is found when using an absolute include path. Think of it as a false positive.</p>\n\n<p>The usual workarounds are to not use <code>include_directories()</code> and avoid absolute paths for when using <code>target_include_directories()</code>.  So try using <code>target_include_directories( submod PRIVATE .. )</code> instead.</p>\n"}, {"tags": [], "owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "is_accepted": false, "score": 0, "last_activity_date": 1572036937, "last_edit_date": 1572036937, "creation_date": 1557968605, "answer_id": 56159462, "question_id": 56155681, "link": "https://stackoverflow.com/questions/56155681/cmake-make-object-dependency-issue-not-rebuilding-when-header-changes/56159462#56159462", "title": "cmake/make (OBJECT) dependency issue--not rebuilding when header changes", "body": "<p>Fred and R2RT both led me to the correct answer for <em>my</em> problem.  My cmake build (a pull from the main github repo), was the issue.  I switched to the distro build and this issue disappeared.  I'm not quite sure why my build was a problem, but....there you have it.  (cmake v. went from 3.14 to 3.10, but I believe <em>my</em> build of cmake 3.14 was the problem vs 3.14 specifically)</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12525267, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-g9jnGyTuRk8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reOtJonDRV6QFRAKIeNhwYYQndo9Q/photo.jpg?sz=128", "display_name": "Stef fen", "link": "https://stackoverflow.com/users/12525267/stef-fen"}, "is_accepted": false, "score": 0, "last_activity_date": 1576157841, "creation_date": 1576157841, "answer_id": 59305867, "question_id": 56155681, "link": "https://stackoverflow.com/questions/56155681/cmake-make-object-dependency-issue-not-rebuilding-when-header-changes/59305867#59305867", "title": "cmake/make (OBJECT) dependency issue--not rebuilding when header changes", "body": "<p>Have a similar problem too. Building object libraries with cmake, ninja and gcc causes a rebuild even without changes, if I switch the compiler to another one, some changes in the headers doesn't get detected and ninja thinks there is nothing to do.</p>\n\n<p>I then switched to GNU make and now everything works as expected, although it is a bit slow compared to ninja. For me, this looks like a bug.</p>\n"}], "owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1677, "favorite_count": 0, "accepted_answer_id": 56156116, "answer_count": 4, "score": 4, "last_activity_date": 1576157841, "creation_date": 1557945241, "last_edit_date": 1557949355, "question_id": 56155681, "link": "https://stackoverflow.com/questions/56155681/cmake-make-object-dependency-issue-not-rebuilding-when-header-changes", "title": "cmake/make (OBJECT) dependency issue--not rebuilding when header changes", "body": "<p>I've managed to reproduce an issue I'm having with a much larger project.  I think this is as minimal as I can make it</p>\n\n<p>Key being I've <em>explicitly</em> added a header to the source list and editing it still does not cause anything to get recompiled.  </p>\n\n<pre><code>~/src/test2/_build\u00a3 cat ../CMakeLists.txt\ncmake_minimum_required (VERSION 3.14)\nset (CMAKE_CXX_STANDARD 11)\n# various explicit CXX sets are necessary for this tiny project and don't exist in larger original\nproject(moduletest CXX)\nset (HEADER_DIR \"${CMAKE_CURRENT_SOURCE_DIR}\")\nadd_subdirectory(submod)\nadd_library(moduletest_static STATIC \"$&lt;TARGET_OBJECTS:submod&gt;\")\nset_target_properties(moduletest_static PROPERTIES LINKER_LANGUAGE CXX)\n\n~/src/test2/_build\u00a3 cat ../submod/CMakeLists.txt\ninclude_directories (${HEADER_DIR})\nadd_library(submod OBJECT compileme.cpp ../includeme.h)\n\n~/src/test2/_build\u00a3 cat ../submod/compileme.cpp\n#include \"includeme.h\"\nint function()\n{\n  return 5;\n}\n</code></pre>\n\n<p>Make output is as follows:</p>\n\n<pre><code>~/src/test2/_build\u00a3 touch ../submod/compileme.cpp\n~/src/test2/_build\u00a3 make\n[ 50%] Building CXX object submod/CMakeFiles/submod.dir/compileme.cpp.o\n[ 50%] Built target submod\n[100%] Linking CXX static library libmoduletest_static.a\n[100%] Built target moduletest_static\n~/src/test2/_build\u00a3 touch ../includeme.h\n~/src/test2/_build\u00a3 make\n[ 50%] Built target submod\n[100%] Built target moduletest_static\n</code></pre>\n\n<p>If I remove the use of <code>include_directories</code>, and just <code>#include \"../includeme.h\"</code> in my cpp file, everything works correctly, regardless of my <code>add_library</code> call.  (But this is definitely not an option in my real project)</p>\n\n<p>I should also note that the \"Scanning dependencies of target submod\" is something of a red herring.  In my larger project, I tried touching a single cpp file so that this occurred.  Other cpp files that should have compiled still did not.</p>\n\n<p>Use of <code>target_include_directories</code> did not fix anything, regardless of absolute/relative paths.</p>\n\n<p>Problem goes away with <code>cmake -GNinja ..</code></p>\n"}, {"tags": ["c++", "complexity-theory"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1557945065, "post_id": 56155598, "comment_id": 98940357, "body": "do you want to count the number of iterations or do you want to know the asymptotic complexity?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 3, "creation_date": 1557945092, "post_id": 56155598, "comment_id": 98940373, "body": "Honestly, the <i>worst</i> case scenario is passing a null <code>list</code> to this function, in which case the entire thing degenerates into a festival of undefined behavior. Regardless, this is little more than a linked list enumeration, and as such the asymptotic complexity is O(n). The number of actual statements executed (which you shouldn&#39;t care about as much as the complexity) is entirely dependent on evaluation of members, and we&#39;re not privy to that."}, {"owner": {"reputation": 19, "user_id": 6274909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d444ad1706e82fe7937548956fd22945?s=128&d=identicon&r=PG&f=1", "display_name": "ShippyDippy", "link": "https://stackoverflow.com/users/6274909/shippydippy"}, "edited": false, "score": 0, "creation_date": 1557945176, "post_id": 56155598, "comment_id": 98940414, "body": "Specifically, find the number of iteration for this while loop"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1557945256, "post_id": 56155598, "comment_id": 98940450, "body": "if it is about counting then simply add a counter, increment it at the top of the loop and print it at the end of the function"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 2, "creation_date": 1557945272, "post_id": 56155598, "comment_id": 98940460, "body": "Yikes I thought <code>item&lt;loc-&gt;</code> was a typo in a template declaration at first. Please add some whitespace!"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1557945341, "post_id": 56155598, "comment_id": 98940495, "body": "@ShippyDippy That specific question isn&#39;t answerable with only what you&#39;ve shown. Assuming a valid list was passed in, it could jettison on the very first iteration. Or... somewhere in the middle, or reach the end. Your question states &quot;what would be the <i>worst</i> case scenario&quot;. Your comment above states, &quot;find the number of iterations&quot;. Those can be the same value in <i>one</i> case: enumerating the full list; otherwise they will differ."}, {"owner": {"reputation": 19, "user_id": 6274909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d444ad1706e82fe7937548956fd22945?s=128&d=identicon&r=PG&f=1", "display_name": "ShippyDippy", "link": "https://stackoverflow.com/users/6274909/shippydippy"}, "edited": false, "score": 0, "creation_date": 1557945775, "post_id": 56155598, "comment_id": 98940690, "body": "This question is something I would have to figure out on paper. I&#39;m guessing the number of iterations would depend on the size of the list?"}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1557946503, "post_id": 56155598, "comment_id": 98940984, "body": "Oops, I confused &quot;operation count&quot; with &quot;iteration count&quot;. I deleted my answer since it dealt with iteration count."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1557946588, "post_id": 56155598, "comment_id": 98941029, "body": "please consider that number of iterations, absolute count of operations and asymptotic complexity are different things. One can write algorithms that wildy differ in those three metrics"}], "answers": [{"tags": [], "owner": {"reputation": 3902, "user_id": 10302746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5ySG.png?s=128&g=1", "display_name": "Lev M.", "link": "https://stackoverflow.com/users/10302746/lev-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1557948207, "creation_date": 1557948207, "answer_id": 56156325, "question_id": 56155598, "link": "https://stackoverflow.com/questions/56155598/how-to-find-the-number-of-iteration-in-this-while-loop-operation-count/56156325#56156325", "title": "How to find the number of iteration in this while loop - operation count", "body": "<p>This looks like a school exercise or a homework question.\nThe fact that you need to answer on paper, pretty much confirms that.</p>\n\n<p>So what you are looking for is probably \"<a href=\"https://en.wikipedia.org/wiki/Big_O_notation\" rel=\"nofollow noreferrer\">Big O</a>\" complexity.\nAnd in that case, you are looking at a simple 0 .. n loop, which you claim to know, since at most, the loop can run over the entire list.</p>\n\n<p>The name of the condition variable <code>more</code> and the condition it self are a clear clue that the code is nothing more than a linier search on a sorted list.</p>\n"}], "owner": {"reputation": 19, "user_id": 6274909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d444ad1706e82fe7937548956fd22945?s=128&d=identicon&r=PG&f=1", "display_name": "ShippyDippy", "link": "https://stackoverflow.com/users/6274909/shippydippy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "accepted_answer_id": 56156325, "answer_count": 1, "score": 0, "last_activity_date": 1557948207, "creation_date": 1557944891, "last_edit_date": 1557945821, "question_id": 56155598, "link": "https://stackoverflow.com/questions/56155598/how-to-find-the-number-of-iteration-in-this-while-loop-operation-count", "title": "How to find the number of iteration in this while loop - operation count", "body": "<p>I'm confused about how to do the operation count for a while loop specifically the number of iterations.\nI do understand how to find the number of iteration for a regular loop (from 0 to n) and also for binary search (log2n) but this piece of code utilizes the case of true and false. the number of iteration would depend on if \"more\" is true and \"found\" is false.</p>\n\n<p>What would be the worst case scenario for this? the item is not found?\nIn the code below, the commented parts are the operation count for that line.</p>\n\n<p>List is a linked list structure of N nodes:</p>\n\n<pre><code>void FindItem(Node *list, Item item, Node *&amp;loc, bool &amp;found){\n    bool more = true;                 // 1\n    loc = list; found = false;        // 2\n    while (more &amp;&amp; !found) {          // (number of iterations)\n        if (item &lt; loc-&gt;info)         // 2 * (number of iteration)\n            more = false;             // (0 or 1)*number of iterations\n        else if (item == loc-&gt;info)   // 2 * (number of iteration)\n            found=true;               // (0 or 1)*number of iterations\n        else {\n            loc = loc-&gt;next;          // (0 or 2) * (number of iteration)\n            more = (loc != NULL);     // (0 or 2)*number of iterations\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c#", "c++", "windows", "gpio"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 6501116, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xaXpPSOgeOk/AAAAAAAAAAI/AAAAAAAAAEA/1RN4XpcbB8g/photo.jpg?sz=128", "display_name": "Nick Delbar", "link": "https://stackoverflow.com/users/6501116/nick-delbar"}, "edited": false, "score": 0, "creation_date": 1557983715, "post_id": 56158108, "comment_id": 98950242, "body": "Thank you very much. That clarifies a lot."}], "tags": [], "owner": {"reputation": 238, "user_id": 11467100, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E4y2B.png?s=128&g=1", "display_name": "cj.vaughter", "link": "https://stackoverflow.com/users/11467100/cj-vaughter"}, "is_accepted": false, "score": 0, "last_activity_date": 1557957070, "creation_date": 1557957070, "answer_id": 56158108, "question_id": 56155499, "link": "https://stackoverflow.com/questions/56155499/how-to-communicate-with-gpio-on-windows-win-10-for-non-raspberry-device/56158108#56158108", "title": "How to communicate with GPIO on windows (Win 10) for non raspberry device?", "body": "<p>You cannot use BIOS interrupts when the CPU is in protected mode, which all modern operating systems use. Looking at the manual for your board, it seems the example you're using is meant for bare-metal applications. </p>\n\n<p>As far as using C#, it looks like the GpioController class is only supported on Windows IoT.</p>\n\n<p>It should be possible to use the IO by interfacing with the driver, but information about that is difficult to find, so you may be out of luck.</p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 6501116, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xaXpPSOgeOk/AAAAAAAAAAI/AAAAAAAAAEA/1RN4XpcbB8g/photo.jpg?sz=128", "display_name": "Nick Delbar", "link": "https://stackoverflow.com/users/6501116/nick-delbar"}, "is_accepted": true, "score": 1, "last_activity_date": 1558389034, "last_edit_date": 1558389034, "creation_date": 1558386453, "answer_id": 56228197, "question_id": 56155499, "link": "https://stackoverflow.com/questions/56155499/how-to-communicate-with-gpio-on-windows-win-10-for-non-raspberry-device/56228197#56228197", "title": "How to communicate with GPIO on windows (Win 10) for non raspberry device?", "body": "<p>Just wanted to give an update if anyone is trying to do something similar. In the end, I needed to get the SDK from the motherboard manufacturer. (IEI)</p>\n\n<p>There was a small bug in the BIOS, but they were nice enough to give me a patch to the BIOS, and after updating the BIOS version, the SDK worked perfectly.</p>\n\n<p><img src=\"https://i.imgur.com/BvghBI0.png\" alt=\"Final Result\"></p>\n"}], "owner": {"reputation": 61, "user_id": 6501116, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xaXpPSOgeOk/AAAAAAAAAAI/AAAAAAAAAEA/1RN4XpcbB8g/photo.jpg?sz=128", "display_name": "Nick Delbar", "link": "https://stackoverflow.com/users/6501116/nick-delbar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1237, "favorite_count": 1, "accepted_answer_id": 56228197, "answer_count": 2, "score": 0, "last_activity_date": 1611686858, "creation_date": 1557944517, "last_edit_date": 1558389023, "question_id": 56155499, "link": "https://stackoverflow.com/questions/56155499/how-to-communicate-with-gpio-on-windows-win-10-for-non-raspberry-device", "title": "How to communicate with GPIO on windows (Win 10) for non raspberry device?", "body": "<p>I have a motherboard (KINO-DH310) with windows 10, the GPIO controller displays under <strong>Device Manager</strong> -> <strong>System devices</strong> -> <strong>Interl(R) Serial IO GPIO Host Controller</strong>. </p>\n\n<p>How am I supposed to begin simple I/O with this controller? I've tried different strategies, different programming languages, but to no affect. The majority of examples / sample code I see online are for the raspberry pi, and don't seem to work for me. Is there a concept I'm not grasping?</p>\n\n<p><img src=\"https://i.imgur.com/YgB1YQZ.png\" alt=\"GPIO Controller\"></p>\n\n<p>I've tried toggling the output pins to low and high using assembly (from C++ application)</p>\n\n<p><strong>KINO-DH310 recommended assembly:</strong> Digital Output is 1001b</p>\n\n<pre><code>MOV AX, 6F09H ;setting the digital port as output\nMOV BL, 09H   ;digital value is 09H\nINT 15H\n</code></pre>\n\n<p><strong>My C++ Code:</strong></p>\n\n<pre><code>__asm {\nmov AX, 6F09H\nmov BL, 00H\nINT 15H        &lt;--- Generates \"Access Violation reading location 0xFFFFFFFF\" error\n};\n</code></pre>\n\n<p>This always generates an access violation because you could potentially access memory that would harm the system. Is there a way to suppress this?</p>\n\n<p><strong>My C# Code:</strong></p>\n\n<pre><code>var gpio = GpioController.GetDefault();\n\nif (gpio == null)\n    return;      &lt;--- Always returns null\n</code></pre>\n\n<p>Always generates null. I was hoping since I could see it in device manager, Windows could detect it has access to a GPIO Controller.</p>\n\n<p>Any clarification would be greatly appreciated, even if the answer would be Windows doesn't support it (which I'm hoping is not the case)</p>\n"}, {"tags": ["c++", "exception", "boost", "boost-asio"], "owner": {"reputation": 375, "user_id": 27338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0133cf7937a5fb4a6a4bb557e711dcf6?s=128&d=identicon&r=PG", "display_name": "amosk", "link": "https://stackoverflow.com/users/27338/amosk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1558091443, "creation_date": 1557944373, "last_edit_date": 1558091443, "question_id": 56155452, "link": "https://stackoverflow.com/questions/56155452/exception-safety-for-overlapped-boost-coroutines", "title": "Exception safety for overlapped Boost coroutines", "body": "<p>The following code spawns 2 functions as Asio handlers (which use Boost.Coroutine under the hood) on the same thread.\nEach function throws and catches an exception in such an order so that the code in the catch blocks overlaps due to coroutine context switching, as follows:</p>\n\n<pre><code>fn1 throw\nfn1 start catch\nfn2 throw\nfn1 end catch\nfn2 end catch\n</code></pre>\n\n<p>And as it turns out (according to the log below), when the fn1's catch ends the exception object from the fn2 is destroyed, and when fn2's catch ends the exception object from fn1 is destroyed.\nEffectively this means the catch block must not access its exception object after it was interrupted by other coroutines.\nIs this an expected behavior or a bug in the compiler / Boost?\nIs it safe at all to use context switching in a catch blocks like that?</p>\n\n<p>GCC 4.8.5, 4.9.2, 8.2.0, Clang 5.0.0, Boost 1.55, 1.66, Linux, x86_64</p>\n\n<p>The test code:</p>\n\n<pre><code>#define BOOST_COROUTINES_NO_DEPRECATION_WARNING\n#define BOOST_COROUTINE_NO_DEPRECATION_WARNING\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;boost/asio/spawn.hpp&gt;\n#include &lt;boost/asio/io_service.hpp&gt;\n#include &lt;boost/asio/steady_timer.hpp&gt;\n\nnamespace ba = boost::asio;\n\nba::io_service io_service;\n\n#define LOG_TRACE(x) do { std::cout &lt;&lt; x &lt;&lt; std::endl; } while (0)\n\nclass MyEx: public std::runtime_error {\npublic:\n    MyEx(std::string msg)\n        : std::runtime_error(msg)\n    {\n        LOG_TRACE(\"MyEx \" &lt;&lt; msg &lt;&lt; \" addr=\" &lt;&lt; (void*)this);\n    }\n    ~MyEx()\n    {\n        LOG_TRACE(\"~MyEx \" &lt;&lt; what() &lt;&lt; \" addr=\" &lt;&lt; (void*)this);\n    }\n};\n\nvoid throw_ex(size_t n)\n{\n    throw MyEx(\"exception \" + std::to_string(n));\n}\n\nvoid sleep_ms(size_t ms, ba::yield_context yield)\n{\n    ba::steady_timer timer(io_service);\n    timer.expires_from_now(std::chrono::milliseconds(ms));\n    timer.async_wait(yield);\n}\n\nvoid* curr_ex()\n{\n    auto ep = std::current_exception();\n    return *reinterpret_cast&lt;void**&gt;(&amp;ep);\n}\n\nvoid fn1(ba::yield_context yield)\n{\n    try {\n        sleep_ms(100, yield);\n        throw_ex(1);\n    }\n    catch (const MyEx&amp; e) {\n        LOG_TRACE(\"1: catch start \" &lt;&lt; e.what() &lt;&lt; \" curr_ex=\" &lt;&lt; curr_ex());\n        sleep_ms(300, yield);\n        LOG_TRACE(\"1: catch end, curr_ex=\" &lt;&lt; curr_ex());\n    }\n}\n\nvoid fn2(ba::yield_context yield)\n{\n    try {\n        sleep_ms(200, yield);\n        throw_ex(2);\n    }\n    catch (const MyEx&amp; e) {\n        LOG_TRACE(\"2: catch start \" &lt;&lt; e.what() &lt;&lt; \" curr_ex=\" &lt;&lt; curr_ex());\n        sleep_ms(300, yield);\n        LOG_TRACE(\"2: catch end, curr_ex=\" &lt;&lt; curr_ex());\n    }\n}\n\n\nint main ()\n{\n    ba::spawn(io_service, [](ba::yield_context yield){ fn1(yield); });\n    ba::spawn(io_service, [](ba::yield_context yield){ fn2(yield); });\n    io_service.run();\n    return 0;\n}\n</code></pre>\n\n<p>The output:</p>\n\n<pre><code>MyEx exception 1 addr=0x21fafe0\n1: catch start exception 1 curr_ex=0x21fafe0\nMyEx exception 2 addr=0x21fb080\n2: catch start exception 2 curr_ex=0x21fb080\n1: catch end, curr_ex=0x21fb080\n~MyEx exception 2 addr=0x21fb080\n2: catch end, curr_ex=0x21fafe0\n~MyEx exception 1 addr=0x21fafe0\n</code></pre>\n"}, {"tags": ["c++", "rest", "nlohmann-json"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1557944820, "post_id": 56155428, "comment_id": 98940259, "body": "&quot;As expected, it threw an error. &quot; what is the error? did you also try something where you didn not expect an error?"}, {"owner": {"reputation": 56, "user_id": 9075248, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vtsFYUO0OrI/AAAAAAAAAAI/AAAAAAAAAIs/YcmxhmvGGOE/photo.jpg?sz=128", "display_name": "RavianXReaver", "link": "https://stackoverflow.com/users/9075248/ravianxreaver"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1557948168, "post_id": 56155428, "comment_id": 98941732, "body": "@formerlyknownas_463035818 The error that it threw was : System.Runtime.InteropServices.SEHException (0x80004005): External component has thrown an exception. The error was thrown from the json.hpp which is a component of nlohmann"}, {"owner": {"reputation": 56, "user_id": 9075248, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vtsFYUO0OrI/AAAAAAAAAAI/AAAAAAAAAIs/YcmxhmvGGOE/photo.jpg?sz=128", "display_name": "RavianXReaver", "link": "https://stackoverflow.com/users/9075248/ravianxreaver"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1557949135, "post_id": 56155428, "comment_id": 98942130, "body": "@formerlyknownas_463035818 I figured it out(check my answer)  =) thank you for the help!"}], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 9075248, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vtsFYUO0OrI/AAAAAAAAAAI/AAAAAAAAAIs/YcmxhmvGGOE/photo.jpg?sz=128", "display_name": "RavianXReaver", "link": "https://stackoverflow.com/users/9075248/ravianxreaver"}, "is_accepted": true, "score": 3, "last_activity_date": 1557949090, "creation_date": 1557949090, "answer_id": 56156516, "question_id": 56155428, "link": "https://stackoverflow.com/questions/56155428/how-do-i-convert-cprs-get-response-into-a-json-object/56156516#56156516", "title": "How do i convert cpr&#39;s get response into a json object?", "body": "<p>I did play around a bit with the code and finally figured it out. \nBasically what i wanted to do was to convert a \"JSON String\" into a JSON Object.\nI achieved it by using the method <code>nlohmann::json::parse();</code></p>\n\n<pre><code>Json j = Json::parse(r.text);\nstring xx = j[\"token\"];\n</code></pre>\n"}], "owner": {"reputation": 56, "user_id": 9075248, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vtsFYUO0OrI/AAAAAAAAAAI/AAAAAAAAAIs/YcmxhmvGGOE/photo.jpg?sz=128", "display_name": "RavianXReaver", "link": "https://stackoverflow.com/users/9075248/ravianxreaver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 634, "favorite_count": 0, "accepted_answer_id": 56156516, "answer_count": 1, "score": 0, "last_activity_date": 1557949090, "creation_date": 1557944263, "last_edit_date": 1557944446, "question_id": 56155428, "link": "https://stackoverflow.com/questions/56155428/how-do-i-convert-cprs-get-response-into-a-json-object", "title": "How do i convert cpr&#39;s get response into a json object?", "body": "<p>I was looking for a easy to understand library that make HTTP REST Requests in C++ and then i came across CPR. I was successfully able to get the response from the server but i find it difficult to access the returned JSON object. </p>\n\n<p>API Get Request: </p>\n\n<pre><code>auto r = cpr::Get(cpr::Url{ \"https://example.net/api/token\" },\n        cpr::Parameters{ {\"username\", login}, {\"password\", password}, \n  {\"hwid\", \"TestChecker\"}, {\"obt\", \"1\"}});\n    r.status_code;                 \n    r.header[\"application/json\"];      \n    r.text;\n</code></pre>\n\n<p>I tried to pass <code>r.text</code> into <code>nlohmann::json j = r.text;</code> and access the particular object i wanted like this <code>string xx = j[\"token\"];</code>\nAs expected, it threw an error. </p>\n\n<p>I'd really appreciate it if anyone could tell me how to achieve what i failed to do.</p>\n\n<p>Edit : Added References</p>\n\n<p>CPR : <a href=\"https://www.codeproject.com/Articles/1244632/Making-HTTP-REST-Request-in-Cplusplus\" rel=\"nofollow noreferrer\">https://www.codeproject.com/Articles/1244632/Making-HTTP-REST-Request-in-Cplusplus</a></p>\n\n<p>nlohmann/json : <a href=\"https://github.com/nlohmann/json\" rel=\"nofollow noreferrer\">https://github.com/nlohmann/json</a></p>\n"}, {"tags": ["c++", "numpy", "pypy"], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 10027078, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-G-Ikj5jrVIA/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7p_eZHCDNgvKLypvlb7xkE67CeBsA/mo/photo.jpg?sz=128", "display_name": "JanB", "link": "https://stackoverflow.com/users/10027078/janb"}, "edited": false, "score": 0, "creation_date": 1558000351, "post_id": 56160305, "comment_id": 98958408, "body": "thanks for your suggestions! Sadly, using the 32bit Command Line of VS2019 did not resolve the issue. I updated the question above, it seems that I am missing some libraries in the PyPy/libs folder. Any idea on what to install that it finds these?"}, {"owner": {"reputation": 91, "user_id": 10027078, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-G-Ikj5jrVIA/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7p_eZHCDNgvKLypvlb7xkE67CeBsA/mo/photo.jpg?sz=128", "display_name": "JanB", "link": "https://stackoverflow.com/users/10027078/janb"}, "edited": false, "score": 0, "creation_date": 1558006595, "post_id": 56160305, "comment_id": 98961817, "body": "It seems my missing libraries are exactly those linear algebrea back ends you mentioned. Do I actually need both OpenBLAS and MKL? How can I point PyPy to recognize these? Would following this guide <a href=\"https://github.com/isaar/MSolve/wiki/How-to-install-Intel-MKL-on-windows\" rel=\"nofollow noreferrer\">link</a> help? Because I am guessing that I already have one of these libraries installed, I just need to somehow make PyPy recognize them"}], "tags": [], "owner": {"reputation": 1519, "user_id": 2802665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfc7a7a79851f14df65447c32711fc07?s=128&d=identicon&r=PG&f=1", "display_name": "mattip", "link": "https://stackoverflow.com/users/2802665/mattip"}, "is_accepted": false, "score": 1, "last_activity_date": 1557976545, "creation_date": 1557976545, "answer_id": 56160305, "question_id": 56154988, "link": "https://stackoverflow.com/questions/56154988/how-to-let-pypy-recognize-linear-algebra-intel-mkl-openblas-libraries-enviro/56160305#56160305", "title": "How to let PyPy recognize linear algebra (Intel MKL, OpenBLAS) libraries? Environmental variables issue?", "body": "<p>The prompt you get when you run PyPy indicates which compiler it was built with, not which compiler is found. Even if PyPy could find the compiler it is looking for, building NumPy locally on windows will result in a slower version of NumPy. NumPy really needs a linear algebra back end like OpenBLAS or Intel's MKL, and getting those installed is tricky. Now for your questions:</p>\n\n<ol>\n<li><p>You could start up the Visual Studio Command Line for 32 bit compilers and then run PyPy in that DOS window, I am pretty sure then NumPy will build (but the result will be slower than a vnedor-provided binary wheel).</p></li>\n<li><p>The end result is exactly the same. SystemVariable will set that for all users, UserVariable only for you.</p></li>\n<li><p>Yes, probably. I don't have 2019, only 2017.</p></li>\n<li><p>PyPy uses the services provided by setuptools and distutils just as regular CPython does. So the answers to that are the same as the answers you find for CPython.</p></li>\n<li><p>The <code>-m</code> means \"load this module\" so you are loading the pip <strong>module</strong> and running its code. Without the <code>-m</code> you are running a <strong>file</strong> named <code>pip</code> which does not exist on your path</p></li>\n<li><p>The path forward is to make PyPy a first class citizen in the python world. Please urge the projects themselves (pandas, numpy, scipy ...) to provide wheels for PyPy, as well as asking Anaconda to provide a PyPy variant.</p></li>\n</ol>\n"}], "owner": {"reputation": 91, "user_id": 10027078, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-G-Ikj5jrVIA/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7p_eZHCDNgvKLypvlb7xkE67CeBsA/mo/photo.jpg?sz=128", "display_name": "JanB", "link": "https://stackoverflow.com/users/10027078/janb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1558006878, "creation_date": 1557942205, "last_edit_date": 1558006878, "question_id": 56154988, "link": "https://stackoverflow.com/questions/56154988/how-to-let-pypy-recognize-linear-algebra-intel-mkl-openblas-libraries-enviro", "title": "How to let PyPy recognize linear algebra (Intel MKL, OpenBLAS) libraries? Environmental variables issue?", "body": "<p>I have a working Python 3.6 Version installed and wanted to try out PyPy for a heuristic algorithm. I installed PyPy using this guide: <a href=\"https://stackoverflow.com/questions/9893317/how-to-use-pypy-on-windows\">How to use PyPy on Windows?</a> and got it to run and also install e.g. the openpyxl module via: <code>pypy3 -m pip install openpyxl</code></p>\n\n<p>However, when trying to install numpy or pandas I get the following error messsage: </p>\n\n<p><em>\"error: Microsoft Visual C++ 14.1 is required. Get it with Microsoft Visual C++ Build Tools\": <a href=\"https://visualstudio.microsoft.com/downloads/\" rel=\"nofollow noreferrer\">https://visualstudio.microsoft.com/downloads/</a>\"</em></p>\n\n<p>I tried all of the following solutions: <a href=\"https://stackoverflow.com/questions/29846087/microsoft-visual-c-14-0-is-required-unable-to-find-vcvarsall-bat\">Microsoft Visual C++ 14.0 is required (Unable to find vcvarsall.bat)</a>\nnamely:</p>\n\n<ol>\n<li>Updated Setuptools <code>pypy3 -m pip install --upgrade setuptools</code></li>\n<li>Installed various kinds of Microsoft Visual Studio/Build Tools as mentioned in the comments of that question.</li>\n<li>Tried to install numpy using the binary only option\n<code>pypy3 -m pip install --only-binary :all:numpy</code></li>\n<li>Tried updating setuptools and installing numpy from the VS command prompt.</li>\n</ol>\n\n<p>None of these worked for me. The best I came up with was that it might have to do with the environment variables. In the PyPy doc (<a href=\"http://doc.pypy.org/en/latest/windows.html\" rel=\"nofollow noreferrer\">http://doc.pypy.org/en/latest/windows.html</a>) it says: </p>\n\n<p><em>\"The installation will set the VS140COMNTOOLS environment variable, this is key to distutils/setuptools finding the compiler\"</em></p>\n\n<p>I could not find this variable in the Systemvariables or Uservariables.\nSo I tried making a new <strong>SYSTEMVARIABLE</strong> with name = <strong>VS140COMNTOOLS</strong> and Value = <strong>C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\BuildTools\\Common7\\Tools</strong>. That is the path where on my machine the <strong>VsDevCmd.bat</strong> is located, which I think is responsible for setting the environment variable during installation of Microsoft Visual Studio.</p>\n\n<p>This did change my error message but only made it worse/longer. Also, when I type <code>python</code> or <code>pypy3</code> in my command prompt I get the following:</p>\n\n<p>!<a href=\"https://imgur.com/a/QvD3n4j\" rel=\"nofollow noreferrer\">https://imgur.com/a/QvD3n4j</a></p>\n\n<p>Which according to this post <a href=\"https://stackoverflow.com/questions/53202006/what-is-the-difference-between-these-two-lines-msc-v-1900-64-bit-amd64-and-ms\">What is the difference between these two lines, MSC v.1900 64 bit (AMD64) and MSC v.1914 32 bit (Intel)</a> show that I have a C++ compiler installed?</p>\n\n<p>My questions are:</p>\n\n<ol>\n<li>Does the Name of the environmental variable (\"VS140COMNTOOLS\") matter? I assume it is for VisualStudio14 but the Value leads to VisualStudio19.</li>\n<li>Is it right to use a SYSTEMVARIABLE and not a USER VARIABLE to point to the compiler? </li>\n<li>If I need Microsoft Visual C++ 14.1, are/should all newer versions also be feasible?</li>\n<li>Is my environmental variable actually pointing to the right directory? What needs to be in such a directory to make PyPy recognize a C++ compiler?</li>\n<li>Why do I have to type <code>pypy3 -m pip install &lt;Package&gt;</code>? instead of <code>pypy3 pip install &lt;Package&gt;</code> which only results in a \"FilenotFoundError\"?</li>\n<li>How do i get PyPy to recognize the compiler and install numpy or pandas correctly?</li>\n</ol>\n\n<p><strong>EDIT 1</strong></p>\n\n<p>Using the <em>\"x86 Native Tools Command Prompt for VS 2019\"</em> and trying <code>pypy3 -m pip install numpy</code> did not work. I also found this question <a href=\"https://stackoverflow.com/questions/55310564/how-can-i-install-numpy-on-pypy-on-my-64-bit-computer-running-windows-64-bit\">how can I install numpy on pypy on my 64 bit computer running Windows 64 bit?</a> and since I could not find the respective environmental variable: <a href=\"https://i.stack.imgur.com/b5ErD.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/b5ErD.jpg\" alt=\"Environmental Variables\"></a>\nI set it using <code>set VS140COMNTOOLS=C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\BuildTools\\VC\\Auxiliary\\Build\"</code> and tried both: <code>pypy3 -m pip install numpy</code> and <code>pypy3 -m pip install numpy -v</code>. Sadly, that also did not resolve the issue and the error message still is: <a href=\"https://i.stack.imgur.com/pFx4Q.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pFx4Q.jpg\" alt=\"enter image description here\"></a> and later on saying that no Microsoft Visual C++ 14.1 is installed.</p>\n\n<p><strong>The error message points out it does not find several libraries in my PyPy/libs folder. Does anyone know what I need to install that it finds these libraries?</strong>  </p>\n\n<p>@mattip\nSpeed does not really matter in my case, since I actually don't use numpy for calculations. However I use pandas for data storage which requires numpy to be installed first.</p>\n\n<p>Is it easier to install PyPy in a virtual environment, or will I face the same issues there?</p>\n"}, {"tags": ["c++", "templates", "conditional-compilation"], "comments": [{"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1557942249, "post_id": 56154984, "comment_id": 98939130, "body": "Sometimes a plain #ifdef works better than all type trait bells and whistles."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1557942278, "post_id": 56154984, "comment_id": 98939144, "body": "Did you have a look at what SFINAE can do for you?"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1557942469, "post_id": 56154984, "comment_id": 98939238, "body": "I don&#39;t see the reason in doing this in compile-time. Try plain <code>if</code> statements, member variables and a constructor. You&#39;re doing Qt, not a nuclear power plant."}, {"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 0, "creation_date": 1557942793, "post_id": 56154984, "comment_id": 98939405, "body": "Because it&#39;s generic, the class which it&#39;s using (EditorDialog) can have different constructors. It is intended to work with any class passed. With simple if statements, some constructors might not meet the requirements of having the optional second and third parameters, or they could be different types all together. The example I gave is all one class (CreateFormulaDialog), but it should be able to work with other classes, which take different type and number of parameters to its constructors.  I have also looked at the post this is marked as a duplicate of, but it does not seem to help."}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1557943213, "post_id": 56154984, "comment_id": 98939590, "body": "The first answer there explains the exact same problem, the second one shows how to resolve it."}, {"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 1, "creation_date": 1557943216, "post_id": 56154984, "comment_id": 98939592, "body": "I&#39;ve modified the question a bit, after a bit more of a thorough look at the difference between this question, and the linked topic."}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 1, "creation_date": 1557943781, "post_id": 56154984, "comment_id": 98939841, "body": "Try <code>return this-&gt;createEditorHidden( parent );</code> and make sure that your SFINAE conditions are disjunctive (which is not the case between the 2nd and 3rd overload - typo?). Lastly, <code>std::enable_if</code> can be written in much shorter form (the second template parameter does not matter here, keep the default <code>void</code>): <code>std::enable_if&lt;condition&gt;::type* = 0</code> or <code>= nullptr</code>. Since C++17, you can also drop <code>typename</code> if using <code>std::enable_if_t</code>."}, {"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 0, "creation_date": 1557943786, "post_id": 56154984, "comment_id": 98939843, "body": "Ugh. Never mind, I figured it out. I needed <code>bool</code> as the type parameter of <code>std::enable_if</code> not <code>QWidget*</code>. Got it at the same time as you posted that, basically. Just used bool instead, but same idea in the end."}], "owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "closed_date": 1557942274, "answer_count": 0, "score": 0, "last_activity_date": 1557943666, "creation_date": 1557942181, "last_edit_date": 1557943666, "question_id": 56154984, "link": "https://stackoverflow.com/questions/56154984/how-to-conditionally-compile-member-functions-of-a-template-class", "closed_reason": "Duplicate", "title": "How to conditionally compile member functions of a template class?", "body": "<p>I am attempting to make a generic class, which conditionally calls a function based on the number of parameters supplied to the class. I've been using std::enable_if, but to no avail. </p>\n\n<p>I have tried a variety of different things using three functions (for 2 optional class parameters). I have read many different posts here on stack overflow, which is how I got to what I am currently using, however I am still getting errors. </p>\n\n<pre><code>#include &lt;qsqldatabase.h&gt;\n\ntemplate&lt;class EditorDialog, typename FirstOpt = void, typename SecondOpt = void&gt;\nclass GenericItemDelegate : public QItemDelegate {\npublic:\n    explicit GenericItemDelegate( QSqlDatabase &amp;connection, QObject *parent = 0 ) : QItemDelegate( parent ), connection( connection ) {}\nprotected:\n    QWidget *createEditor( QWidget *parent, const QStyleOptionViewItem &amp;option, const QModelIndex &amp;index ) const override {\n        return createEditorHidden( parent );\n    }\n    void setEditorData( QWidget *editor, const QModelIndex &amp;index ) const override {\n        EditorDialog *dialog = static_cast&lt;EditorDialog *&gt;( editor );\n        dialog-&gt;loadData( index.data( Qt::ItemDataRole::UserRole ) );\n    }\n    void setModelData( QWidget *editor, QAbstractItemModel *model, const QModelIndex &amp;index ) const override {\n        EditorDialog *dialog = static_cast&lt;EditorDialog *&gt;( editor );\n        if ( dialog-&gt;result() == QDialog::Accepted ) {\n            model-&gt;setData( index, QVariant::fromValue( dialog-&gt;getData() ) );\n        }\n    }\nprivate:\n\n    template&lt;typename f = FirstOpt, typename s = SecondOpt, typename std::enable_if&lt;std::is_void&lt;f&gt;::value &amp;&amp; std::is_void&lt;s&gt;::value, QWidget *&gt;::type = true&gt;\n    QWidget *createEditorHidden( QWidget *parent ) const {\n        return new EditorDialog( connection, parent );\n    }\n    template&lt;typename f = FirstOpt, typename s = SecondOpt, typename std::enable_if&lt;!std::is_void&lt;f&gt;::value &amp;&amp; !std::is_void&lt;s&gt;::value, QWidget *&gt;::type = true&gt;\n    QWidget * createEditorHidden( QWidget * parent ) const {\n        return new EditorDialog( connection, parent, FirstOpt );\n    }\n    template&lt;typename f = FirstOpt, typename s = SecondOpt, typename std::enable_if&lt;!std::is_void&lt;f&gt;::value &amp;&amp; !std::is_void&lt;s&gt;::value, QWidget *&gt;::type = true&gt;\n    QWidget * createEditorHidden( QWidget * parent ) const {\n        return new EditorDialog( connection, parent, FirstOpt, SecondOpt );\n    }\n\n\n    QSqlDatabase connection;\n};\n</code></pre>\n\n<p>What I am currently getting with the above is <code>error C2672: 'GenericItemDelegate&lt;CreateFormulaDialog,void,void&gt;::createEditorHidden': no matching overloaded function found</code> which does not make sense to me, since (in this case) both template parameters are void.</p>\n\n<p>Effectively, in the end, I would want objects created with <code>GenericItemDelegate&lt;CreateFormulaDialog&gt;</code> to call the first template function, <code>GenericItemDelegate&lt;CreateFormulaDialog, true&gt;</code> to call the second template function, and <code>GenericItemDelegate&lt;CreateFormulaDialog,true,false&gt;</code> to call the third. </p>\n\n<p>Hopefully I'm making sense. I've spent the last few hours working on this, and my brain is just not working anymore.</p>\n"}, {"tags": ["c++", "qt", "types", "qvariant"], "comments": [{"owner": {"reputation": 11, "user_id": 11192820, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8Yr4YZ0fNPk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf5Rbsa8mWKFigeyyauCF6xaC8Qsg/mo/photo.jpg?sz=128", "display_name": "ratloser", "link": "https://stackoverflow.com/users/11192820/ratloser"}, "edited": false, "score": 0, "creation_date": 1557942766, "post_id": 56154868, "comment_id": 98939389, "body": "of course, Qvariant can contain more types, but why should I use QJsonvalue if there is the alternative QVariant?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1557944473, "post_id": 56154868, "comment_id": 98940105, "body": "JsonValue is a specialized type that only allows certain types of data indicated in the standard json as strings, numbers, booleans, etc."}, {"owner": {"reputation": 11, "user_id": 11192820, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8Yr4YZ0fNPk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf5Rbsa8mWKFigeyyauCF6xaC8Qsg/mo/photo.jpg?sz=128", "display_name": "ratloser", "link": "https://stackoverflow.com/users/11192820/ratloser"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1557944728, "post_id": 56154868, "comment_id": 98940213, "body": "Ok, I think I got it now. QJsonvalue is not that different from QVariant, but it has some small advantages. Like you said... just JSON Values inside. And what I found out right before, QJsonvalue are strictly typed -&gt; you can&#39;t do any implicit conversions.    Thanks for helping @eyllanesc"}, {"owner": {"reputation": 1205, "user_id": 2846068, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kHfXv.jpg?s=128&g=1", "display_name": "MasterAler", "link": "https://stackoverflow.com/users/2846068/masteraler"}, "edited": false, "score": 0, "creation_date": 1557945648, "post_id": 56154868, "comment_id": 98940640, "body": "Everything mentioned above is true and aside from that you can store some Qt-specific types in QVariant or register your own and store it. They may not be easily serializable to Json but could be stored in QVariant."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9310322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/319ecc53adba3b60e06d34eddcf77609?s=128&d=identicon&r=PG&f=1", "display_name": "norrr", "link": "https://stackoverflow.com/users/9310322/norrr"}, "is_accepted": false, "score": 0, "last_activity_date": 1585787621, "creation_date": 1585787621, "answer_id": 60982481, "question_id": 56154868, "link": "https://stackoverflow.com/questions/56154868/difference-between-qjsonvalue-and-qvariant/60982481#60982481", "title": "Difference between QJsonValue and QVariant?", "body": "<p><strong>QVariant</strong> give you more flexibility in manipulating data.</p>\n"}], "owner": {"reputation": 11, "user_id": 11192820, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8Yr4YZ0fNPk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf5Rbsa8mWKFigeyyauCF6xaC8Qsg/mo/photo.jpg?sz=128", "display_name": "ratloser", "link": "https://stackoverflow.com/users/11192820/ratloser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1585787621, "creation_date": 1557941790, "last_edit_date": 1557999827, "question_id": 56154868, "link": "https://stackoverflow.com/questions/56154868/difference-between-qjsonvalue-and-qvariant", "title": "Difference between QJsonValue and QVariant?", "body": "<p>I'm working with Qt and JSON. Now, I have two options: <code>QVariant</code> and <code>QJsonValue</code>. I don't get the point in which they are different?</p>\n\n<p>I know QVariant has some more methods and <code>QJsonValue</code> has the is*** methods(where <code>QVariant</code> has type).\nBut is there any other main difference (maybe speed)? If no: Why are there two classes which can do nearly the same?</p>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1557940195, "post_id": 56154440, "comment_id": 98938229, "body": "This question should be better posted at <a href=\"https://codereview.stackexchange.com/\">SE Code Review</a> (supposed your code already works as intended)."}, {"owner": {"reputation": 675, "user_id": 3259789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a55f2fc4903a6c4cc3d4554c7a970d41?s=128&d=identicon&r=PG&f=1", "display_name": "rAndom69", "link": "https://stackoverflow.com/users/3259789/random69"}, "edited": false, "score": 0, "creation_date": 1557940243, "post_id": 56154440, "comment_id": 98938246, "body": "Ask your class users what they want and if it&#39;s nothing move on to another project? :P"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1557940516, "post_id": 56154440, "comment_id": 98938378, "body": "I wouldn&#39;t use separate types for <code>dimensional_pos</code> and <code>dimensional_size</code>. You could use a single class (<code>vec3</code> is a common name)."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1557940801, "post_id": 56154440, "comment_id": 98938502, "body": "If you don&#39;t need to implement anything else then don&#39;t!"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1557944331, "post_id": 56154440, "comment_id": 98940045, "body": "@LightnessRacesinOrbit i first thought that the question is opinion-based, but then your comment is the correct answer"}, {"owner": {"reputation": 26, "user_id": 11505421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e83bdaadfdcd86c075443c0a11d191b0?s=128&d=identicon&r=PG&f=1", "display_name": "Silverous Black", "link": "https://stackoverflow.com/users/11505421/silverous-black"}, "reply_to_user": {"reputation": 675, "user_id": 3259789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a55f2fc4903a6c4cc3d4554c7a970d41?s=128&d=identicon&r=PG&f=1", "display_name": "rAndom69", "link": "https://stackoverflow.com/users/3259789/random69"}, "edited": false, "score": 0, "creation_date": 1557979946, "post_id": 56154440, "comment_id": 98949337, "body": "@rAndom69 I don&#39;t have any users yet so I can&#39;t really ask anyone yet"}, {"owner": {"reputation": 26, "user_id": 11505421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e83bdaadfdcd86c075443c0a11d191b0?s=128&d=identicon&r=PG&f=1", "display_name": "Silverous Black", "link": "https://stackoverflow.com/users/11505421/silverous-black"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1557980417, "post_id": 56154440, "comment_id": 98949419, "body": "@HolyBlackCat I only separated them so I won&#39;t be confused with their purpose. &#39;&#39;&#39;dimensional_pos&#39;&#39;&#39; is for positions in a dimensional space and &#39;&#39;&#39;dimensional_size&#39;&#39;&#39; is for the size... I&#39;ll try to implement an unified class for them. Thank you~"}], "owner": {"reputation": 26, "user_id": 11505421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e83bdaadfdcd86c075443c0a11d191b0?s=128&d=identicon&r=PG&f=1", "display_name": "Silverous Black", "link": "https://stackoverflow.com/users/11505421/silverous-black"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1557940079, "creation_date": 1557940079, "question_id": 56154440, "link": "https://stackoverflow.com/questions/56154440/recommendations-to-improve-a-3d-vector-based-class", "title": "Recommendations to Improve a 3D vector-based class", "body": "<p>The code is otherwise working but I think I lack some more things to implement, I just don't know what exactly to implement. Some recommendations please.</p>\n\n<p>Probably efficacy?</p>\n\n<p>Made the following implementations:</p>\n\n<p>//Functions</p>\n\n<blockquote>\n  <p>Resize resize()<br>\n  Assign assign()<br>\n  Access access()<br>\n  Move move()<br>\n  Find get_pos()<br>\n  Copy to 2D vector copy()<br>\n  Copy to 1D vector copy()<br></p>\n</blockquote>\n\n<p>//Operators</p>\n\n<blockquote>\n  <p>Insert &lt;&lt;<br>\n  Extract >><br>\n  Equate =<br></p>\n</blockquote>\n\n<p>//matrix.h</p>\n\n<pre><code>#pragma once\n#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n#include &lt;vector&gt;\n#include \"dimensional_size.h\"\nusing namespace std;\n#define _MATRIX_H_\n\ntemplate&lt;typename type, size_t _breadth = 0, size_t _height = 0, size_t _width = 0&gt;\nclass matrix {\npublic:\n    matrix();\n    ~matrix();\n    void resize(size_t new_breadth, size_t new_height = 0, size_t new_width = 0);\n    void assign(type obj, pos z, pos y, pos x);\n    type access(pos z=0, pos y = 0, pos x = 0);\n    void move(dimensional_pos&lt;type&gt; old_pos, dimensional_pos&lt;type&gt; new_pos);\n    size_t get_capacity();\n    vector&lt;vector&lt;type&gt; &gt;&amp; copy(vector&lt;vector&lt;type&gt; &gt; dest, pos z = 0, pos y = 0, pos dest_z = 0);\n    vector&lt;type&gt;&amp; copy(vector&lt;type&gt; dest, pos z = 0, pos y = 0);\n    dimensional_pos&lt;type&gt; get_loc(type&amp; t);\n    void operator&lt;&lt;(type t);\n    void operator&gt;&gt;(type t);\n    matrix&lt;type, _breadth, _width, _height&gt; operator=(matrix&lt;type, _breadth, _height, _width&gt; obj);\nprivate:\n    dimensional_size&lt;_breadth, _height, _width&gt; size_obj;\n    vector&lt;vector&lt;vector&lt;type&gt; &gt; &gt; dat;\n};\n</code></pre>\n\n<p>//dimensional_size.h</p>\n\n<p>dimensional_size.h provides data structure \"dimensional_size\" and class \"dimensional_pos\" with type definition of \"pos\" as an unsigned long long integer</p>\n\n<pre><code>#pragma once\n#include &lt;iostream&gt;\n#include &lt;stdarg.h&gt;\n#include &lt;vector&gt;\n#define _DIMENSIONAL_SIZE_H_ \nusing namespace std;\n\ntemplate&lt;size_t z, size_t y, size_t x&gt;\nstruct dimensional_size {\n    dimensional_size();\n    ~dimensional_size();\n    size_t get_capacity();\n    size_t get_breadth();\n    size_t get_height();\n    size_t get_width();\n    void up_size(size_t z = 0, size_t y = 0, size_t x = 0);\nprivate:\n    size_t absolute_x;\n    size_t absolute_y;\n    size_t absolute_z;\n};\n\ntemplate&lt;typename type&gt;\nclass dimensional_pos {\npublic:\n    dimensional_pos();\n    dimensional_pos(pos z = 0, pos y = 0, pos x = 0);\n    ~dimensional_pos();\n    dimensional_pos&amp; get_pos(vector&lt;type&gt; stream, type&amp; t);\n    dimensional_pos&amp; get_pos(vector&lt;vector&lt;type&gt; &gt; stream, type&amp; t);\n    dimensional_pos&amp; get_pos(vector&lt;vector&lt;vector&lt;type&gt; &gt; &gt; stream, type&amp; t);\n    pos get_z();\n    pos get_y();\n    pos get_z();\nprivate:\n    pos absolute_x;\n    pos absolute_y;\n    pos absolute_z;\n};\n</code></pre>\n\n<p>Sample style of scaling through a vector to find an object of a type</p>\n\n<pre><code>template&lt;typename type&gt;\ndimensional_pos&lt;type&gt;&amp; dimensional_pos&lt;type&gt;::get_pos(vector&lt;vector&lt;vector&lt;type&gt; &gt; &gt; stream, type&amp; t) {\n    dimensional_pos&lt;type&gt; obj;\n    for (pos i = 0; i &lt; stream.size(); i++) {\n        for (pos j = 0; j &lt; stream[i].size(); j++) {\n            for (pos k = 0; k &lt; stream[i][j].size(); k++) {\n                if (t == stream[i][j][k]) {\n                    obj(i, j, k);\n                    return obj;\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>No errors whatsoever.</p>\n"}, {"tags": ["c++", "floating-point"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1557940327, "post_id": 56154395, "comment_id": 98938284, "body": "More reading (if you are interested - not my blog):  <a href=\"https://randomascii.wordpress.com/2013/02/07/float-precision-revisited-nine-digit-float-portability/\" rel=\"nofollow noreferrer\">randomascii.wordpress.com/2013/02/07/&hellip;</a>  The whole series is very informative."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1557962265, "post_id": 56154395, "comment_id": 98946236, "body": "To be clear, it is not &quot;difference between our numbers&quot;, but <i>relative</i> &quot;difference between our numbers&quot; -relative to the magnitude of the operands/result.  It can get complicated."}], "answers": [{"comments": [{"owner": {"reputation": 24793, "user_id": 1798593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be41e365336e709f1bfc2c9866eac8e9?s=128&d=identicon&r=PG", "display_name": "Patricia Shanahan", "link": "https://stackoverflow.com/users/1798593/patricia-shanahan"}, "edited": false, "score": 0, "creation_date": 1558031453, "post_id": 56159047, "comment_id": 98975802, "body": "Are you sure about excluding billions? Many engineering and scientific applications solve systems of a few thousand equations."}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 24793, "user_id": 1798593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be41e365336e709f1bfc2c9866eac8e9?s=128&d=identicon&r=PG", "display_name": "Patricia Shanahan", "link": "https://stackoverflow.com/users/1798593/patricia-shanahan"}, "edited": false, "score": 0, "creation_date": 1558032760, "post_id": 56159047, "comment_id": 98976440, "body": "@PatriciaShanahan: I am just being conservative about what is \u201cordinary,\u201d limiting it to applications a human would use interactively, to make the point that 4 is way too low even for conservative meanings."}], "tags": [], "owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 3, "last_activity_date": 1557964271, "last_edit_date": 1592644375, "creation_date": 1557964271, "answer_id": 56159047, "question_id": 56154395, "link": "https://stackoverflow.com/questions/56154395/select-ulp-value-in-float-comparison/56159047#56159047", "title": "Select ULP value in float comparison", "body": "<p>It is wrong. Very wrong. Consider that every operation can accumulate some error\u2014\u00bd ULP is the maximum (in round-to-nearest mode), so \u00bc might be an average. So 17 operations are enough to accumulate more than 4 ULP of error just from average effects.<sup>1</sup> Today\u2019s computers do billions of operations per second. How many operations will a program do between its inputs and some later comparison? That depends on the program, but it could be zero, dozens, thousands, or millions just for \u201cordinary\u201c use. (Let\u2019s say we exclude billions because then it gets slow for a human to use, so we can call that special-purpose software, not ordinary.)</p>\n<p>But that is not all. Suppose we add a few numbers around 1 and then subtract a number that happens to be around the sum. Maybe the adds get a total error around 2 ULP. But when we subtract, the result might be around 2<sup>\u221210</sup> instead of around 1. So the ULP of 2<sup>\u221210</sup> is 1024 times smaller than the ULP of 1. That error that is 2 ULP relative to 1 is 2048 ULP relative to the result of the subtraction. Oops! 4 ULP will not cut it. It would need to be 4 ULP of some of the other numbers involved, not the ULP of the result.</p>\n<p>In fact, characterizing the error is difficult in general and is the subject of an entire field of study, <a href=\"https://en.wikipedia.org/wiki/Numerical_analysis\" rel=\"nofollow noreferrer\">numerical analysis</a>. 4 is not the answer.</p>\n<h2>Footnote</h2>\n<p><sup>1</sup> Errors will vary in direction, so some will cancel out. The behavior might be modeled as a random walk, and the average error might be proportional to the square root of the number of operations performed.</p>\n"}], "owner": {"reputation": 20129, "user_id": 2944616, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4JSYv.png?s=128&g=1", "display_name": "greywolf82", "link": "https://stackoverflow.com/users/2944616/greywolf82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 56159047, "answer_count": 1, "score": 1, "last_activity_date": 1557964271, "creation_date": 1557939903, "question_id": 56154395, "link": "https://stackoverflow.com/questions/56154395/select-ulp-value-in-float-comparison", "title": "Select ULP value in float comparison", "body": "<p>I've read several resource on the network and I understood there's no a single value or universal parameters when we compare float numbers. I've read <a href=\"https://stackoverflow.com/questions/17333/what-is-the-most-effective-way-for-float-and-double-comparison\">from here</a> several replies and I found the code from Google test to compare the floats. I want to better understand the meaning of ULP and its value. Reading comments from source code I read:</p>\n\n<blockquote>\n  <p>The maximum error of a single floating-point operation is 0.5 units in\n  the last place.  On Intel CPU's, all floating-point calculations are\n  done with 80-bit precision, while double has 64 bits.  Therefore, 4\n  should be enough for ordinary use.</p>\n</blockquote>\n\n<p>It's not really clear why \"therefore 4 should be enough\". Can anyone explain why? From my understanding we are saying that we can tolerate 4*10^-6 or 4*10^-15 as difference between our numbers to say if they are the same or not, taking into account the number of significant digits of float (6/7) or double (15/16). Is it correct?</p>\n"}, {"tags": ["c++", "c", "global"], "comments": [{"owner": {"reputation": 675, "user_id": 3259789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a55f2fc4903a6c4cc3d4554c7a970d41?s=128&d=identicon&r=PG&f=1", "display_name": "rAndom69", "link": "https://stackoverflow.com/users/3259789/random69"}, "edited": false, "score": 0, "creation_date": 1557939190, "post_id": 56154169, "comment_id": 98937798, "body": "Static or dynamic linkage?"}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1557939277, "post_id": 56154169, "comment_id": 98937837, "body": "Please show in your question the commands you use to compile and link the code."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1557939300, "post_id": 56154169, "comment_id": 98937841, "body": "This answer specifically: <a href=\"https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix/12574420#12574420\" title=\"what is an undefined reference unresolved external symbol error and how do i fix\">stackoverflow.com/questions/12573816/&hellip;</a>"}, {"owner": {"reputation": 640, "user_id": 3793674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62a5746c9da4b2293984258875ce00e1?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisD", "link": "https://stackoverflow.com/users/3793674/chrisd"}, "edited": false, "score": 0, "creation_date": 1557939359, "post_id": 56154169, "comment_id": 98937861, "body": "In the header you&#39;ve defined <code>x</code> as a <code>const int</code> and in the source file as a plain <code>int</code>. Was that a typo? Also, it&#39;s more usual to wrap the <code>#include</code> with an  <code>extern &quot;C&quot;</code> in the cpp sources."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1557939417, "post_id": 56154169, "comment_id": 98937887, "body": "The argument <code>int x</code> takes precedence over the global variable <code>int x = 5;</code> Which is to say that the correctness of your code depends on code that you haven&#39;t shown. See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 41, "user_id": 11317528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b838aa544e65f67ef13fda50749ede14?s=128&d=identicon&r=PG&f=1", "display_name": "jdhabez", "link": "https://stackoverflow.com/users/11317528/jdhabez"}, "reply_to_user": {"reputation": 640, "user_id": 3793674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62a5746c9da4b2293984258875ce00e1?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisD", "link": "https://stackoverflow.com/users/3793674/chrisd"}, "edited": false, "score": 0, "creation_date": 1557939585, "post_id": 56154169, "comment_id": 98937956, "body": "@ChrisD yes, it is a typo sorry. I&#39;ve tried moving the extern &quot;C&quot; to the cpp source as well."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 11317528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b838aa544e65f67ef13fda50749ede14?s=128&d=identicon&r=PG&f=1", "display_name": "jdhabez", "link": "https://stackoverflow.com/users/11317528/jdhabez"}, "edited": false, "score": 0, "creation_date": 1557939439, "post_id": 56154224, "comment_id": 98937897, "body": "but I am doing that..."}], "tags": [], "owner": {"reputation": 552, "user_id": 11038454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/118900695ae8e562f696c0dd14feb0d7?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/11038454/tony"}, "is_accepted": false, "score": 0, "last_activity_date": 1557939226, "creation_date": 1557939226, "answer_id": 56154224, "question_id": 56154169, "link": "https://stackoverflow.com/questions/56154169/trouble-linking-c-global-variables-with-c-code/56154224#56154224", "title": "Trouble linking C global variables with C++ code", "body": "<p>You need to link the .o file where you have that value defined. Compile time, the compiler would not worry about the value. but at link time, compiler is trying to find the value among all the .o and linked libraries. if it cannot find, you will get that error.</p>\n"}], "owner": {"reputation": 41, "user_id": 11317528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b838aa544e65f67ef13fda50749ede14?s=128&d=identicon&r=PG&f=1", "display_name": "jdhabez", "link": "https://stackoverflow.com/users/11317528/jdhabez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "closed_date": 1557939221, "answer_count": 1, "score": -1, "last_activity_date": 1557939226, "creation_date": 1557938993, "question_id": 56154169, "link": "https://stackoverflow.com/questions/56154169/trouble-linking-c-global-variables-with-c-code", "closed_reason": "Duplicate", "title": "Trouble linking C global variables with C++ code", "body": "<p>I am working on a project that utilizes C source code to call upon a C++ function that is also linked to a C++ library. I have been able to allow for my C code to call on the C++ function, however I also want my C++ function to have access to the global variables defined in the C source code. I currently get errors when linking the C/C++ code .o files. The error messages go through each of the .o files that use these global variables and states \"undefined reference to..\"</p>\n\n<p>This isn't the exact code or anything but basically a very simple of example of what I am trying to do. The constants.h file also gets used by other C code.</p>\n\n<p>constants.h</p>\n\n<pre><code>#ifdef __cplusplus\nextern \"C\" {\n#endif\n\nextern const int x;\n\n#ifdef __cplusplus\n}\n#end if\n</code></pre>\n\n<p>constants.c</p>\n\n<pre><code>int x = 5;\n</code></pre>\n\n<p>mycppcode.cpp</p>\n\n<pre><code>#include \"constants.h\"\n\nvoid print_x(int x){\n\n    printf(\"%d\", x);\n\n};\n</code></pre>\n"}, {"tags": ["c++", "winapi", "visual-c++", "mfc", "internet-explorer-8"], "comments": [{"owner": {"reputation": 675, "user_id": 3259789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a55f2fc4903a6c4cc3d4554c7a970d41?s=128&d=identicon&r=PG&f=1", "display_name": "rAndom69", "link": "https://stackoverflow.com/users/3259789/random69"}, "edited": false, "score": 0, "creation_date": 1557939007, "post_id": 56154105, "comment_id": 98937713, "body": "I smell malware. Hope you have AV solution installed during development. :P"}, {"owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "reply_to_user": {"reputation": 675, "user_id": 3259789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a55f2fc4903a6c4cc3d4554c7a970d41?s=128&d=identicon&r=PG&f=1", "display_name": "rAndom69", "link": "https://stackoverflow.com/users/3259789/random69"}, "edited": false, "score": 0, "creation_date": 1557943015, "post_id": 56154105, "comment_id": 98939507, "body": "The problem is not related to any security issues. It&#39;s just a programming exercise."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 1, "creation_date": 1557945806, "post_id": 56154105, "comment_id": 98940701, "body": "See OldNewThing blog: &quot;<a href=\"https://devblogs.microsoft.com/oldnewthing/20130610-00/?p=4133\" rel=\"nofollow noreferrer\">A big little program: Monitoring Internet Explorer and Explorer windows, part 1: Enumeration</a>&quot;"}, {"owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1557948168, "post_id": 56154105, "comment_id": 98941731, "body": "@zett42 thank you for the suggestion. That is a proper way to get URL in IE but it uses the COM/ATL stack and therefore not so practical. I&#39;ve tried adding the GetBrowserInfo function in the article but one of the required header files <code>atlalloc.h</code> was unavailable on my VC++ 6 and VC++2010 Express environment."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 3, "creation_date": 1557950147, "post_id": 56154105, "comment_id": 98942550, "body": "What kind of add-on exactly?  If it is a BHO (Browser Helper Object) then it has direct access to the browser&#39;s <code>IWebBrowser2</code> interface and can simply query that for its current URL within having to resort to accessing the UI controls at all."}, {"owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1557954693, "post_id": 56154105, "comment_id": 98944323, "body": "@RemyLebeau  It pulls the current URL and manipulates some part of it for ease of navigation; so it&#39;s a BHO. I&#39;ve given a try to the <code>IWebBrowser2</code>&#39;s <code>get_LocationURL</code> property (or method?) like this: <code>char strCurURL[255];</code> <code>HRESULT temp = m_pBrowser-&gt;get_LocationURL((BSTR*) strCurURL);</code> <code>::SendMessage(hMyEditControl,WM_SETTEXT,0,(long)strCurURL);</code> But the <code>strCurURL</code> appears incorrectly. How to arrange it? <code>hMyEditControl</code> is a normal Edit control."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1557954899, "post_id": 56154105, "comment_id": 98944402, "body": "@Romario you can&#39;t typecast a <code>TCHAR[]</code> buffer into a <code>BSTR*</code> like that. <code>get_LocationURL()</code> allocates and returns a new <code>BSTR</code>, you need to <i>copy/convert</i> that string into your buffer as needed and then free the <code>BSTR</code> when done. <code>BSTR bstrURL; HRESULT temp = m_pBrowser-&gt;get_LocationURL(&amp;bstrURL); &#47;* use bstrURL as needed ... *&#47; SysFreeString(bstrURL);</code> If your Edit control is a Unicode window, you don&#39;t even need the buffer at all: <code>BSTR bstrURL; HRESULT temp = m_pBrowser-&gt;get_LocationURL(&amp;bstrURL); SendMessage(hMyEditControl, WM_SETTEXT, 0, (LPARAM)bstrURL); SysFreeString(bstrURL);</code>"}, {"owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1557957056, "post_id": 56154105, "comment_id": 98945088, "body": "@RemyLebeau  That kind of conversion: <code>char *p = _com_util::ConvertBSTRToString(bstrURL);</code> solved the problem <code>::SendMessage(hMyEditControl,WM_SETTEXT,0,(long)p);</code> now displays correctly. That counts as an accepted answer too, so thank you but could you still comment more on the reasons why one cannot get this URL from the UI controls? Particularly when it&#39;s possible to do it on IE 7?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 3, "creation_date": 1557957149, "post_id": 56154105, "comment_id": 98945113, "body": "@Romario Because that is not the right way to do it, even in IE7.  Just because it <i>could</i> be done that way does not mean it <i>should</i> be done that way. There is a reason why a BHO has direct access to the underlying WebBrowser object, the BHO should not rely on any particular UI representation of the WebBrowser object."}], "answers": [{"tags": [], "owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "is_accepted": true, "score": 0, "last_activity_date": 1565788084, "creation_date": 1565788084, "answer_id": 57495376, "question_id": 56154105, "link": "https://stackoverflow.com/questions/56154105/getting-current-url-of-internet-explorer-8-programatically/57495376#57495376", "title": "Getting current URL of Internet Explorer 8 programatically", "body": "<p>After applying @Remy Lebeau's suggestion <code>char *p = _com_util::ConvertBSTRToString(bstrURL);</code> , <code>::SendMessage(hMyEditControl,WM_SETTEXT,0,(long)p);</code> started to display correctly.</p>\n\n<p>And this explains why the IE 7 way of getting the URL from the UI controls doesn't work on IE 8:</p>\n\n<pre><code>Because that is not the right way to do it, even in IE7. \nJust because it could be done that way does not mean it should be done that way.\nThere is a reason why a BHO has direct access to the underlying WebBrowser object,\nthe BHO should not rely on any particular UI representation of the WebBrowser object.\n</code></pre>\n\n<p>So that's the accepted answer.</p>\n"}], "owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 57495376, "answer_count": 1, "score": 0, "last_activity_date": 1565788084, "creation_date": 1557938718, "last_edit_date": 1557942942, "question_id": 56154105, "link": "https://stackoverflow.com/questions/56154105/getting-current-url-of-internet-explorer-8-programatically", "title": "Getting current URL of Internet Explorer 8 programatically", "body": "<p>I'm developing a simple Internet Explorer add-on and I'm trying to get the current URL of the Address Bar of the IE 8 using the series of (example) <code>HWND handle = FindWindowEx(parent_handle,0,\"AddressDisplay Control\",NULL);</code></p>\n\n<p>in the following order:</p>\n\n<pre><code>1- IEFrame\n2- WorkerW\n3- ReBarWindow32\n4- Address Band Root\n5- Edit \n5- (alternatively) AddressDisplay Control\n</code></pre>\n\n<p>I've determined this series of controls using the winspy++ 1.6</p>\n\n<p>The code I'm trying to get the current URL is:</p>\n\n<pre><code>TCHAR currentURL[255];\n::GetWindowText(handle_to_the_Edit_or_AddressDisplay_control, currentURL, 255);\n</code></pre>\n\n<p>However it sets nothing into the currentURL array.</p>\n\n<p>This method, with the names and series of controls slightly changed, used to work in earlier versions \u0131f IE, I could easliy get the current URL,  but for IE 8  I've unable to get it.</p>\n\n<p>What should I do? Thanks</p>\n\n<p>Note: I've searched many pages and posts. No luck.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1557938494, "post_id": 56154043, "comment_id": 98937446, "body": "Make the function protected, so only inheriting classes can access it."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1557938547, "post_id": 56154043, "comment_id": 98937476, "body": "You may want to research <code>friend</code>."}, {"owner": {"reputation": 1, "user_id": 9754285, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sRiZIqdJP24/AAAAAAAAAAI/AAAAAAAAByY/LtBNcBziFEk/photo.jpg?sz=128", "display_name": "Louarn", "link": "https://stackoverflow.com/users/9754285/louarn"}, "edited": false, "score": 1, "creation_date": 1557938828, "post_id": 56154043, "comment_id": 98937624, "body": "Jesper Juhl I already did, I mentionned it : &quot;I thought of making Window a friend of WindowImage, but in my research I read that doing that is a bad practice&quot;"}, {"owner": {"reputation": 1, "user_id": 9754285, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sRiZIqdJP24/AAAAAAAAAAI/AAAAAAAAByY/LtBNcBziFEk/photo.jpg?sz=128", "display_name": "Louarn", "link": "https://stackoverflow.com/users/9754285/louarn"}, "edited": false, "score": 0, "creation_date": 1557938898, "post_id": 56154043, "comment_id": 98937655, "body": "Michael Chourdakis but I don&#39;t want the Window class to be a WindowImage"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1557938967, "post_id": 56154043, "comment_id": 98937691, "body": "<code>friend</code> classes/functions are not a bad practice on their own, but they <i>usually</i> indicate a design problem. If you want limit visibility of a function only to some classes, there&#39;s something strange going on. Maybe you should rethink your design? <i>Why</i> does <code>Window</code> need a handle to <code>WindowImage</code>? <i>Why</i> the user should not be able to get that handle? Can <code>WindowImage</code> do what <code>Window</code> needs the handle for?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1557939035, "post_id": 56154043, "comment_id": 98937728, "body": "@Louarn It&#39;s &quot;bad practice&quot; as in &quot;don&#39;t do it when you have better options&quot;. But sometimes you don&#39;t have better options and <code>friend</code> is just the tool you need. In those cases, <i>use it</i>."}, {"owner": {"reputation": 1, "user_id": 9754285, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sRiZIqdJP24/AAAAAAAAAAI/AAAAAAAAByY/LtBNcBziFEk/photo.jpg?sz=128", "display_name": "Louarn", "link": "https://stackoverflow.com/users/9754285/louarn"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1557939633, "post_id": 56154043, "comment_id": 98937981, "body": "@Yksisarvinen Thanks for the replies, now I&#39;m thinking about why I should/shoudn&#39;t let the user access that handle. To clarify a bit, the handle is WinApi stuff, but as I&#39;m making a library to simplifiy it I was not sure it was a good idea to expose this kind of things."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1557939890, "post_id": 56154043, "comment_id": 98938093, "body": "@Louarn Yes, using <code>friend</code> relations is considered bad practice for good reasons. Here I proposed a way to come over this dilemma: <a href=\"https://stackoverflow.com/questions/27492132/how-can-i-remove-refactor-a-friend-dependency-declaration-properly\">How can I remove/refactor a &#171;friend&#187; dependency declaration properly?</a>. Hope that helps."}, {"owner": {"reputation": 1, "user_id": 9754285, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sRiZIqdJP24/AAAAAAAAAAI/AAAAAAAAByY/LtBNcBziFEk/photo.jpg?sz=128", "display_name": "Louarn", "link": "https://stackoverflow.com/users/9754285/louarn"}, "edited": false, "score": 0, "creation_date": 1557942114, "post_id": 56154043, "comment_id": 98939062, "body": "So I just did some more research, I looked at SFML&#39;s source code and it is using <code>friend</code> to access the cursor handle. I guess I&#39;m not the only one with this problem"}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1557939929, "post_id": 56154323, "comment_id": 98938113, "body": "See my comment on the OP&#39;s question to show alternatives for <code>friend</code>."}, {"owner": {"reputation": 1, "user_id": 9754285, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sRiZIqdJP24/AAAAAAAAAAI/AAAAAAAAByY/LtBNcBziFEk/photo.jpg?sz=128", "display_name": "Louarn", "link": "https://stackoverflow.com/users/9754285/louarn"}, "edited": false, "score": 0, "creation_date": 1557939968, "post_id": 56154323, "comment_id": 98938140, "body": "Thanks ! I&#39;ll use that for now, until I find a new design"}], "tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1557939620, "creation_date": 1557939620, "answer_id": 56154323, "question_id": 56154043, "link": "https://stackoverflow.com/questions/56154043/how-can-i-make-a-class-that-can-access-anothers-class-function-without-the-user/56154323#56154323", "title": "How can I make a class that can access another&#39;s class function without the user being able to access that function?", "body": "<p><code>friend</code> is the tool for this job.</p>\n\n<p>The only reason that <code>friend</code> might be bad practice, is that it may indicate a design flaw; maybe you shouldn't be doing things this way at all?</p>\n\n<p>If you want <code>Window</code> to be able to call <code>getHandle</code>, but no other private functions, you can do that too.  You make <code>getHandle</code> a public function, but make it take a (probably default and unused) argument which is of a type that has a private constructor, and make <em>that</em> class be the friend of Window.</p>\n\n<pre><code>class Window;\nclass WindowImage;\n\nclass WindowFriendToken {\n  WindowFriendToken() == default;  // Constructor is private but otherwise normal\n  friend class WindowImage;  // So that other functions in WindowImage can call getHandle\n  friend class Window;       // So functions in Window can call getHandle.\n};\n\nclass WindowImage {\npublic:\n    int getHandle(const WindowFriendToken&amp; ={});\n    .\n    .\n    .\n};\n\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9754285, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sRiZIqdJP24/AAAAAAAAAAI/AAAAAAAAByY/LtBNcBziFEk/photo.jpg?sz=128", "display_name": "Louarn", "link": "https://stackoverflow.com/users/9754285/louarn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1557939620, "creation_date": 1557938434, "question_id": 56154043, "link": "https://stackoverflow.com/questions/56154043/how-can-i-make-a-class-that-can-access-anothers-class-function-without-the-user", "title": "How can I make a class that can access another&#39;s class function without the user being able to access that function?", "body": "<p>I'm working on a small WinApi library, but that does not affect the problem. I have a class called Window, and a class called WindowImage (for cursors and icons). I would like my Window class to be able to access a function inside of WindowImage called getHandle, but I don't want the user of my library to access this function.</p>\n\n<p>I thought of making Window a friend of WindowImage, but in my research I read that doing that is a bad practice.\nI also looked up Proxy Class's, but it doesn't seem to be a solution to my problem from what I understand of it.</p>\n"}, {"tags": ["c#", "c++", ".net", "interop", "pinvoke"], "comments": [{"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 4, "creation_date": 1557938092, "post_id": 56153927, "comment_id": 98937241, "body": "Recompile the C++ app as a DLL. Or, call it with command line arguments to call specific functions. The same would be valid even if you would call it from a C++ app."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1557938140, "post_id": 56153927, "comment_id": 98937282, "body": "Restructure the c++ executable, that you have the core functions in a DLL, and run them from a relatively thin <code>main()</code> function. Thus they can be used in both projects. Also using c++-cli could save you a lot of headaches, and you may be able to avoid the <code>PInvoke()</code> completely (there are a lot of pitfalls, and implementing all the marshalling correctly isn&#39;t easy)."}], "answers": [{"tags": [], "owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "is_accepted": false, "score": 2, "last_activity_date": 1557940923, "creation_date": 1557940923, "answer_id": 56154647, "question_id": 56153927, "link": "https://stackoverflow.com/questions/56153927/how-to-p-invoke-a-c-executable-into-c/56154647#56154647", "title": "How to p/Invoke a c++ executable into C#", "body": "<blockquote>\n  <p>However, it sounds like the starting point for a C++ application to be p/Invoked is that it needs to be a DLL. I do not have a DLL and rather have this executable.</p>\n</blockquote>\n\n<p>For p/invoke you need to compile the functionality that you need into a DLL. You cannot load an executable file into another process. </p>\n\n<p>You could run the executable in another process and communicate with it via some form of IPC. One such option would be an out of process COM server. </p>\n\n<p>However I suspect that the easiest route is to compile the code as a DLL. </p>\n"}, {"comments": [{"owner": {"reputation": 238, "user_id": 11467100, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E4y2B.png?s=128&g=1", "display_name": "cj.vaughter", "link": "https://stackoverflow.com/users/11467100/cj-vaughter"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1558020645, "post_id": 56157825, "comment_id": 98970609, "body": "Care to explain the downvote? I agree a DLL is a better idea, but that wasn&#39;t the question."}], "tags": [], "owner": {"reputation": 238, "user_id": 11467100, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E4y2B.png?s=128&g=1", "display_name": "cj.vaughter", "link": "https://stackoverflow.com/users/11467100/cj-vaughter"}, "is_accepted": false, "score": 0, "last_activity_date": 1557955475, "creation_date": 1557955475, "answer_id": 56157825, "question_id": 56153927, "link": "https://stackoverflow.com/questions/56153927/how-to-p-invoke-a-c-executable-into-c/56157825#56157825", "title": "How to p/Invoke a c++ executable into C#", "body": "<p>DLLs and EXEs are both Windows PE files, so either one will work just fine.\nYou just need to make sure the functions you want to call are properly exported.</p>\n\n<p>You'll need to create C wrapper functions for everything you want to export though.\nAdd <code>extern \"C\" __declspec(dllexport)</code> to their prototypes, and use them to call your desired C++ code.</p>\n"}], "owner": {"reputation": 8122, "user_id": 280772, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ac6e884cd370d2091c1ed5253fb127aa?s=128&d=identicon&r=PG", "display_name": "Lost", "link": "https://stackoverflow.com/users/280772/lost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1557955475, "creation_date": 1557937990, "question_id": 56153927, "link": "https://stackoverflow.com/questions/56153927/how-to-p-invoke-a-c-executable-into-c", "title": "How to p/Invoke a c++ executable into C#", "body": "<p>I have a C++ application which is g++ compiled executable from a .cpp file. Now I want to call the methods in this .cpp file or/executable into my C# application. </p>\n\n<p>I was looking into different ways to be able to do it and I came across P/Invoke. However, it sounds like the starting point for a C++ application to be p/Invoked is that it needs to be a DLL. I do not have a DLL and rather have this executable. </p>\n\n<p>What can I do so that this code is reference-able in my C# P/Invoke layer? </p>\n"}, {"tags": ["c++", "debugging", "runtime"], "comments": [{"owner": {"reputation": 675, "user_id": 3259789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a55f2fc4903a6c4cc3d4554c7a970d41?s=128&d=identicon&r=PG&f=1", "display_name": "rAndom69", "link": "https://stackoverflow.com/users/3259789/random69"}, "edited": false, "score": 0, "creation_date": 1557938368, "post_id": 56153917, "comment_id": 98937383, "body": "Compile time is always best IMHO. You might also create &quot;log&quot; of accesses. On linux this can be done via backtrace. <a href=\"http://man7.org/linux/man-pages/man3/backtrace.3.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man3/backtrace.3.html</a>. Ad &quot;which method will ACTUALLY&quot; this can <i>actually</i> change in time. If methods are unused remove them."}, {"owner": {"reputation": 5185, "user_id": 6202327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AFtrB.png?s=128&g=1", "display_name": "Makogan", "link": "https://stackoverflow.com/users/6202327/makogan"}, "reply_to_user": {"reputation": 675, "user_id": 3259789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a55f2fc4903a6c4cc3d4554c7a970d41?s=128&d=identicon&r=PG&f=1", "display_name": "rAndom69", "link": "https://stackoverflow.com/users/3259789/random69"}, "edited": false, "score": 0, "creation_date": 1557939305, "post_id": 56153917, "comment_id": 98937843, "body": "The thing is, this is for debugging, not for architecture design, I need to know when the field is changed TODAY, to figure out the source of the error, not to diagnose the quality of the code base."}, {"owner": {"reputation": 675, "user_id": 3259789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a55f2fc4903a6c4cc3d4554c7a970d41?s=128&d=identicon&r=PG&f=1", "display_name": "rAndom69", "link": "https://stackoverflow.com/users/3259789/random69"}, "edited": false, "score": 0, "creation_date": 1557939436, "post_id": 56153917, "comment_id": 98937896, "body": "Yup I realized later it&#39;s library used by ctypes. backtrace might help You, we used to use it log accesses to mutexes when we were switching from recursive to non-recursive ones over 50+ products. You just need to use version with symbols (which you would need in other cases anyway). Although it obviously won&#39;t give you stack trace of python... Maybe specify better your case for this."}, {"owner": {"reputation": 1404, "user_id": 10496710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5cb3d11da053d8e1e94ef99a27ca6af?s=128&d=identicon&r=PG&f=1", "display_name": "B. Go", "link": "https://stackoverflow.com/users/10496710/b-go"}, "edited": false, "score": 0, "creation_date": 1559737734, "post_id": 56153917, "comment_id": 99512354, "body": "A profiler should also let you know which methods were called, no?"}], "answers": [{"comments": [{"owner": {"reputation": 5185, "user_id": 6202327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AFtrB.png?s=128&g=1", "display_name": "Makogan", "link": "https://stackoverflow.com/users/6202327/makogan"}, "edited": false, "score": 0, "creation_date": 1557939227, "post_id": 56154011, "comment_id": 98937818, "body": "No it is the f field in any arbitrary instance of class A"}], "tags": [], "owner": {"reputation": 19146, "user_id": 635654, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b8fb58eef98caeec6ab3366e0ac986d7?s=128&d=identicon&r=PG", "display_name": "CygnusX1", "link": "https://stackoverflow.com/users/635654/cygnusx1"}, "is_accepted": false, "score": 1, "last_activity_date": 1557938300, "creation_date": 1557938300, "answer_id": 56154011, "question_id": 56153917, "link": "https://stackoverflow.com/questions/56153917/how-to-track-all-places-where-a-class-variable-is-modified-by-external-code/56154011#56154011", "title": "How to track all places where a class variable is modified by external code?", "body": "<p>Is it <code>f</code> of one particular object of class <code>A</code>?</p>\n\n<p>If yes, you can set up a <a href=\"http://sourceware.org/gdb/download/onlinedocs/gdb/Set-Watchpoints.html#Set-Watchpoints\" rel=\"nofollow noreferrer\">memory watch</a>. It will break the program whenever memory at a given address (occupied by your field <code>f</code>) is changed.</p>\n\n<p>It may make your program go slower, but it may be worth it in your case.</p>\n"}, {"tags": [], "owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "is_accepted": false, "score": 2, "last_activity_date": 1557944681, "last_edit_date": 1557944681, "creation_date": 1557938355, "answer_id": 56154026, "question_id": 56153917, "link": "https://stackoverflow.com/questions/56153917/how-to-track-all-places-where-a-class-variable-is-modified-by-external-code/56154026#56154026", "title": "How to track all places where a class variable is modified by external code?", "body": "<p>On Intel (and perhaps some other) platforms, gdb supports the notion of <em>watchpoints</em>, i.e. a hardware breakpoint that fires when a particular memory location is written to.</p>\n\n<p>The syntax for setting a watchpoint (without the square brackets) is:</p>\n\n<pre><code>watch -location [expr]\n</code></pre>\n\n<p>so in your case, something like:</p>\n\n<pre><code>watch -location my_object.f\n</code></pre>\n\n<p>Then run your code and note where it breaks into the debugger.</p>\n\n<p>Documentation <a href=\"https://ftp.gnu.org/old-gnu/Manuals/gdb/html_node/gdb_29.html\" rel=\"nofollow noreferrer\">here</a> and <a href=\"http://sourceware.org/gdb/onlinedocs/gdb/Set-Watchpoints.html\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"comments": [{"owner": {"reputation": 5185, "user_id": 6202327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AFtrB.png?s=128&g=1", "display_name": "Makogan", "link": "https://stackoverflow.com/users/6202327/makogan"}, "edited": false, "score": 1, "creation_date": 1557939397, "post_id": 56154041, "comment_id": 98937878, "body": "The problem with this is, if the field uses any other operator, now the wrapper must modify those operators as well.  e.g, the compiler won;t know how to execute multiplication or subtraction with an integer wrapper.  Although i like this approach a lot"}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "reply_to_user": {"reputation": 5185, "user_id": 6202327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AFtrB.png?s=128&g=1", "display_name": "Makogan", "link": "https://stackoverflow.com/users/6202327/makogan"}, "edited": false, "score": 0, "creation_date": 1557939539, "post_id": 56154041, "comment_id": 98937934, "body": "@Makogan Sure, the wrapper must support all operators/functions that <code>Field</code> does.  But it simply passes those operations/functions to <code>data_</code> and returns the result after logging the event."}, {"owner": {"reputation": 5185, "user_id": 6202327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AFtrB.png?s=128&g=1", "display_name": "Makogan", "link": "https://stackoverflow.com/users/6202327/makogan"}, "edited": false, "score": 0, "creation_date": 1557939801, "post_id": 56154041, "comment_id": 98938060, "body": "I know, as I said I like this approach a lot, I am just thinking it may be a bit cumbersome for data types that overload a lot of operators, like primitives or mathematical classes like matrices and vectors"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1557940942, "post_id": 56154041, "comment_id": 98938577, "body": "It is. But then that&#39;s why you should have encapsulated accessors to begin with. If you didn&#39;t have 100 functions all modifying a primitive on their own then this wouldn&#39;t have been a problem ;)"}, {"owner": {"reputation": 5185, "user_id": 6202327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AFtrB.png?s=128&g=1", "display_name": "Makogan", "link": "https://stackoverflow.com/users/6202327/makogan"}, "edited": false, "score": 0, "creation_date": 1557941101, "post_id": 56154041, "comment_id": 98938652, "body": "Blame the author of the code base, I am just debugging it : p"}, {"owner": {"reputation": 5185, "user_id": 6202327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AFtrB.png?s=128&g=1", "display_name": "Makogan", "link": "https://stackoverflow.com/users/6202327/makogan"}, "edited": false, "score": 0, "creation_date": 1557941617, "post_id": 56154041, "comment_id": 98938855, "body": "I think you may have a typo, should it not be:  <code>data_ = new_f.f;</code>   ???"}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "reply_to_user": {"reputation": 5185, "user_id": 6202327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AFtrB.png?s=128&g=1", "display_name": "Makogan", "link": "https://stackoverflow.com/users/6202327/makogan"}, "edited": false, "score": 0, "creation_date": 1557959486, "post_id": 56154041, "comment_id": 98945701, "body": "@Makogan Yes indeed, now fixed. Thanks"}], "tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": true, "score": 3, "last_activity_date": 1557960073, "last_edit_date": 1557960073, "creation_date": 1557938412, "answer_id": 56154041, "question_id": 56153917, "link": "https://stackoverflow.com/questions/56153917/how-to-track-all-places-where-a-class-variable-is-modified-by-external-code/56154041#56154041", "title": "How to track all places where a class variable is modified by external code?", "body": "<p>Instead of using <code>Field</code> directly, use a wrapper that lets you know whenever <code>f</code> is modified.  Something like (<strong>very</strong> crudely):</p>\n\n<pre><code>class FieldLogWhenModified\n{\n    Field data_;\npublic:\n    FieldLogWhenModified(Field f) : data_(f) {}\n    FieldLogWhenModified&amp; operator=(const FieldLogWhenModified&amp; new_f)\n    {\n        data_ = new_f.data_;\n        // log or alert user in some way\n        return *this;\n    }\n</code></pre>\n\n<p>And/or perhaps:</p>\n\n<pre><code>    Field&amp; operator=(const Field&amp; new_data)\n    {\n        data_ = new_data;\n        // log or alert user in some way\n        return data_;\n    }\n</code></pre>\n"}], "owner": {"reputation": 5185, "user_id": 6202327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AFtrB.png?s=128&g=1", "display_name": "Makogan", "link": "https://stackoverflow.com/users/6202327/makogan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 56154041, "answer_count": 3, "score": 5, "last_activity_date": 1557960073, "creation_date": 1557937940, "question_id": 56153917, "link": "https://stackoverflow.com/questions/56153917/how-to-track-all-places-where-a-class-variable-is-modified-by-external-code", "title": "How to track all places where a class variable is modified by external code?", "body": "<p>Assume I have a class definition like this:</p>\n\n<pre><code>class A {\nprivate:\n    Field f;\npublic:\n   /*A hundred methods all of which modify f*/\n\n    m1();\n    m2();\n    ...\n    m100();\n}\n</code></pre>\n\n<p>We know before hand that all of these methods, if called, will modify f.</p>\n\n<p>Assume you have a very spaghetti code base.</p>\n\n<p>You need to find at runtime if and where f is actually modified. </p>\n\n<p>You could use gdb, set a break point at every single method and see where execution stops and then unwind the stack to see which method called any of the m*() methods. This is very slow, prone to human error and not necessarily possible in a code base using emscripten, or where python calls the C++ binary after setting some state...</p>\n\n<p>You could comment out all such methods and explore all places in the code where the compiler complains. This is, imho much worse than the prior, and it does do it at runtime, so it's harder to determine which method will ACTUALLY be called.</p>\n\n<p>Similar as the above, you could mark all the above methods as deprecated, but it has more or less the same problems.</p>\n\n<p>Does anyone have a suggestion on determining when and where the field actually gets modified?</p>\n"}, {"tags": ["c++", "vector", "std", "eigen"], "comments": [{"owner": {"reputation": 259, "user_id": 7886227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hec3U.jpg?s=128&g=1", "display_name": "Dr t", "link": "https://stackoverflow.com/users/7886227/dr-t"}, "edited": false, "score": 2, "creation_date": 1557938306, "post_id": 56153816, "comment_id": 98937358, "body": "First:  provide a complete example...Second:  test your approach by initializing your matrix with an initialization list instead of a loop...Third:  do some research, maybe starting here:  <a href=\"https://www.quantstart.com/articles/Eigen-Library-for-Matrix-Algebra-in-C\" rel=\"nofollow noreferrer\">quantstart.com/articles/Eigen-Library-for-Matrix-Algebra-in-&zwnj;&#8203;C</a>"}, {"owner": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "edited": false, "score": 2, "creation_date": 1557938850, "post_id": 56153816, "comment_id": 98937630, "body": "What is the problem ? Compilation error ? Bad results ?"}, {"owner": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "edited": false, "score": 2, "creation_date": 1557940481, "post_id": 56153816, "comment_id": 98938367, "body": "I implemented your code: it works! The problem must be in the code not shown!"}, {"owner": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "edited": false, "score": 1, "creation_date": 1558014229, "post_id": 56153816, "comment_id": 98966629, "body": "Have you read the doc page on <a href=\"https://eigen.tuxfamily.org/dox/group__LeastSquares.html\" rel=\"nofollow noreferrer\">Solving linear least squares systems</a>?"}, {"owner": {"reputation": 69, "user_id": 8658701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a57c6cb24843d5f59f3bac6f2fd6a161?s=128&d=identicon&r=PG&f=1", "display_name": "Dhruvin Naik", "link": "https://stackoverflow.com/users/8658701/dhruvin-naik"}, "edited": false, "score": 0, "creation_date": 1558111748, "post_id": 56153816, "comment_id": 99005968, "body": "I think matrix initialization went fine. Ax = b is solved and Eigen library returns Matrix for x (even though it should be a vector in my case). My conversion of this matrix to std::vector was messed up.  I have to do something like this.\tstd::vector&lt;std::vector&lt;double&gt;&gt; v;  \tfor (int i = 0; i &lt; eig_ans.rows(); ++i) \t{ \t\tconst double* begin = &amp;eig_ans.row(i).data()[0]; \t\tv.push_back(std::vector&lt;double&gt;(begin, begin + eig_ans.cols())); \t}  \tfor (int i = 0; i &lt; eig_ans.rows(); ++i) \t\tfor (int j = 0; j &lt; eig_ans.cols(); ++j) \t\t\tans.push_back(v[i][j]);"}, {"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 0, "creation_date": 1558428395, "post_id": 56153816, "comment_id": 99087707, "body": "You &quot;think matrix initialization went fine&quot;, but nobody else can be sure about that, since you neither pasted your complete code (check how/why to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>), nor say what actually went wrong with your code (as has been commented before)."}, {"owner": {"reputation": 69, "user_id": 8658701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a57c6cb24843d5f59f3bac6f2fd6a161?s=128&d=identicon&r=PG&f=1", "display_name": "Dhruvin Naik", "link": "https://stackoverflow.com/users/8658701/dhruvin-naik"}, "edited": false, "score": 0, "creation_date": 1558574067, "post_id": 56153816, "comment_id": 99149694, "body": "Uploaded the full code."}], "owner": {"reputation": 69, "user_id": 8658701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a57c6cb24843d5f59f3bac6f2fd6a161?s=128&d=identicon&r=PG&f=1", "display_name": "Dhruvin Naik", "link": "https://stackoverflow.com/users/8658701/dhruvin-naik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 689, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1558486273, "creation_date": 1557937544, "last_edit_date": 1558486273, "question_id": 56153816, "link": "https://stackoverflow.com/questions/56153816/solving-ax-b-with-eigen-library-in-c", "title": "Solving Ax = b with Eigen library in c++", "body": "<p>I am trying to Solve Ax = b using least square method. I am using Eigen library to solve this. The input to my function are Matrix A (<code>vector&lt;vector&lt;double&gt;&gt;</code>) and RhS <code>vector&lt;double&gt;</code> b. I need to convert these to <code>Eigen::MatrixXd</code> and Eigen::VectorXd. I could convert b easily to <code>Eigen::VectorXd</code>. But I am not able to form the <code>Eigen::MatrixXd</code>. </p>\n\n<p>Thanks for your answer in advance. </p>\n\n<pre><code>Eigen::MatrixXd ConvertToEigenMatrix(std::vector&lt;std::vector&lt;double&gt;&gt; data)\n{\n    Eigen::MatrixXd eMatrix(data.size(), data[0].size());\n    for (int i = 0; i &lt; data.size(); ++i)\n        eMatrix.row(i) = Eigen::VectorXd::Map(&amp;data[i][0], data[0].size());\n    return eMatrix;\n}\n\nstd::vector&lt;double&gt; SolveUsingEigen(const std::vector&lt;std::vector&lt;double&gt;&gt;&amp; A, const std::vector&lt;double&gt;&amp; b)\n{\n    std::vector&lt;double&gt; ans;\n    if (A.size() != b.size())\n    {\n        std::cout &lt;&lt; \"Invalid output\" &lt;&lt; std::endl;\n        return ans;\n    }\n    ans.reserve(b.size());\n    Eigen::VectorXd b_eig = Eigen::Map&lt;Eigen::VectorXd, Eigen::Unaligned&gt;(const_cast&lt;double*&gt;(b.data()), b.size());\n    Eigen::MatrixXd A_eig = ConvertToEigenMatrix(A);\n\n    // Eigen::MatrixXd eig_ans = A_eig.colPivHouseholderQr().solve(b_eig);\n\n    Eigen::MatrixXd eig_ans = A_eig.bdcSvd(Eigen::ComputeThinU | Eigen::ComputeThinV).solve(b_eig);\n\n    std::vector&lt;std::vector&lt;double&gt;&gt; v;\n\n    for (int i = 0; i &lt; eig_ans.rows(); ++i)\n    {\n        const double* begin = &amp;eig_ans.row(i).data()[0];\n        v.push_back(std::vector&lt;double&gt;(begin, begin + eig_ans.cols()));\n    }\n\n    for (int i = 0; i &lt; eig_ans.rows(); ++i)\n        for (int j = 0; j &lt; eig_ans.cols(); ++j)\n            ans.push_back(v[i][j]);\n\n    return ans;\n}\n</code></pre>\n"}, {"tags": ["c++", "qcustomplot"], "answers": [{"tags": [], "owner": {"reputation": 876, "user_id": 2694600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1159282db2099a32934d1a742d4b1ece?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier", "link": "https://stackoverflow.com/users/2694600/olivier"}, "is_accepted": true, "score": 0, "last_activity_date": 1557937859, "creation_date": 1557937859, "answer_id": 56153892, "question_id": 56153781, "link": "https://stackoverflow.com/questions/56153781/how-to-draw-graph-for-a-trajectory-which-goes-left-and-right-in-x-axis/56153892#56153892", "title": "How to draw graph for a trajectory which goes left and right in x axis?", "body": "<p>The <code>QCPGraph</code> seems to be used for sorted data with only value per key. From QCustomPlot documentation, it looks like the <a href=\"https://www.qcustomplot.com/documentation/classQCPCurve.html\" rel=\"nofollow noreferrer\">QCPCurve</a> would be a better match in order to plot a trajectory graph (multiple value for the same key).</p>\n\n<p>From the <code>QCPCurve</code> description:</p>\n\n<blockquote>\n  <p>Unlike QCPGraph, plottables of this type may have multiple points with the same key coordinate, so their visual representation can have loops. This is realized by introducing a third coordinate t, which defines the order of the points described by the other two coordinates x and y.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 11505294, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157221174445489/picture?type=large", "display_name": "Marie-eve Cyr", "link": "https://stackoverflow.com/users/11505294/marie-eve-cyr"}, "is_accepted": false, "score": 0, "last_activity_date": 1557940520, "creation_date": 1557940520, "answer_id": 56154550, "question_id": 56153781, "link": "https://stackoverflow.com/questions/56153781/how-to-draw-graph-for-a-trajectory-which-goes-left-and-right-in-x-axis/56154550#56154550", "title": "How to draw graph for a trajectory which goes left and right in x axis?", "body": "<p>here my new code with olivier help. its work!</p>\n\n<pre><code>QCustomPlot *customPlot = ui-&gt;qcp_trajectory;\n\ncustomPlot-&gt;xAxis2-&gt;setVisible(true);\ncustomPlot-&gt;xAxis2-&gt;setLabel(\"X-Position (pixel)\");\ncustomPlot-&gt;xAxis2-&gt;setRange(0, mModelPtr-&gt;frameSize().width());\ncustomPlot-&gt;xAxis2-&gt;grid()-&gt;setVisible(true);\n\ncustomPlot-&gt;xAxis-&gt;setRange(0, mModelPtr-&gt;frameSize().width());\ncustomPlot-&gt;yAxis-&gt;setLabel(\"Y-Position (pixel)\");\ncustomPlot-&gt;yAxis-&gt;setRange(0, mModelPtr-&gt;frameSize().height());\ncustomPlot-&gt;yAxis-&gt;setRangeReversed(true);\n\ncustomPlot-&gt;yAxis2-&gt;setVisible(true);\ncustomPlot-&gt;yAxis2-&gt;setRange(0, mModelPtr-&gt;frameSize().height());\ncustomPlot-&gt;yAxis2-&gt;grid()-&gt;setVisible(true);\ncustomPlot-&gt;yAxis2-&gt;setRangeReversed(true);\n\ncustomPlot-&gt;addGraph(customPlot-&gt;xAxis2, customPlot-&gt;yAxis);\n\n// create empty curve objects:\nQCPCurve *trajectory = new QCPCurve(customPlot-&gt;xAxis2, customPlot-&gt;yAxis);\n\n// generate the curve data points:\nconst int pointCount = mModelPtr-&gt;points().size();\nQVector&lt;QCPCurveData&gt; datatrajectory(pointCount);\nQVector&lt;QVector&lt;double&gt;&gt; data = createDataMap(mModelPtr-&gt;points());\n\nfor (int i = 0; i &lt; pointCount ; ++i)\n{\n    datatrajectory[i] = QCPCurveData(i, data.at(0).at(i), data.at(1).at(i));\n\n}\n\ntrajectory-&gt;data()-&gt;set(datatrajectory, true);\nsetTheme(customPlot, false);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11505294, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157221174445489/picture?type=large", "display_name": "Marie-eve Cyr", "link": "https://stackoverflow.com/users/11505294/marie-eve-cyr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 56153892, "answer_count": 2, "score": 0, "last_activity_date": 1557940520, "creation_date": 1557937395, "last_edit_date": 1557938365, "question_id": 56153781, "link": "https://stackoverflow.com/questions/56153781/how-to-draw-graph-for-a-trajectory-which-goes-left-and-right-in-x-axis", "title": "How to draw graph for a trajectory which goes left and right in x axis?", "body": "<p>i want to draw a trajectory in x and y of a car in a parking lot.</p>\n\n<p>the trajectory in x is not always in the same direction. sometime the car will go left.</p>\n\n<p>the problem here is:  sometime (not always!)  the graph will no go left in x axis. You can see the two different result on the image <a href=\"https://imgur.com/Z53fNkt\" rel=\"nofollow noreferrer\">https://imgur.com/Z53fNkt</a></p>\n\n<p>any idea why?</p>\n\n<p>the image at left is what i expect. at right is the same values , but i continue to plot data a little longer. </p>\n\n<pre><code>void TrackingResultsView::setupTrajectoryPlot()\n{\nQCustomPlot *customPlot = ui-&gt;qcp_trajectory;\n\ncustomPlot-&gt;xAxis2-&gt;setVisible(true);\ncustomPlot-&gt;xAxis2-&gt;setLabel(\"X-Position (pixel)\");\ncustomPlot-&gt;xAxis2-&gt;setRange(0, mModelPtr-&gt;frameSize().width());\ncustomPlot-&gt;xAxis2-&gt;grid()-&gt;setVisible(true);\n\ncustomPlot-&gt;xAxis-&gt;setRange(0, mModelPtr-&gt;frameSize().width());\ncustomPlot-&gt;yAxis-&gt;setLabel(\"Y-Position (pixel)\");\ncustomPlot-&gt;yAxis-&gt;setRange(0, mModelPtr-&gt;frameSize().height());\ncustomPlot-&gt;yAxis-&gt;setRangeReversed(true);\n\ncustomPlot-&gt;yAxis2-&gt;setVisible(true);\ncustomPlot-&gt;yAxis2-&gt;setRange(0, mModelPtr-&gt;frameSize().height());\ncustomPlot-&gt;yAxis2-&gt;grid()-&gt;setVisible(true);\ncustomPlot-&gt;yAxis2-&gt;setRangeReversed(true);\ncustomPlot-&gt;addGraph(customPlot-&gt;xAxis2, customPlot-&gt;yAxis);\n\nQVector&lt;QVector&lt;double&gt;&gt; data = createDataMap(mModelPtr-&gt;points());\ncustomPlot-&gt;graph()-&gt;setData(data.at(0), data.at(1), true);\n\nsetTheme(customPlot, false);\n}\n</code></pre>\n\n<p>thank you</p>\n\n<p>(english is not my first langage)</p>\n"}, {"tags": ["c++", "c++14", "sfinae", "typetraits", "template-argument-deduction"], "answers": [{"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1557940309, "post_id": 56153989, "comment_id": 98938276, "body": "<code>Eigen::Matrix</code> takes a bunch of <code>int</code>s after the first type."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1557940988, "post_id": 56153989, "comment_id": 98938599, "body": "@Barry Oh, I see. Not familiar with <code>Eigen</code>. Modified the answer to match a single type and a pack of <code>int</code>s."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "reply_to_user": {"reputation": 2581, "user_id": 5141304, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dH8FwSGAMts/AAAAAAAAAAI/AAAAAAAAABY/L6D_xatTkV4/photo.jpg?sz=128", "display_name": "Cruz Jean", "link": "https://stackoverflow.com/users/5141304/cruz-jean"}, "edited": false, "score": 0, "creation_date": 1557947843, "post_id": 56153989, "comment_id": 98941595, "body": "@CruzJean I think <code>is_eigen</code> and <code>is_eigen_v</code> would make sense. It would follow the pattern of <code>std::is_same</code> for example. The type (true/fale_type) is not really relevant here, and the <code>_t</code> helpers in the standard library usually retrieves a relevant typedef/using."}, {"owner": {"reputation": 167, "user_id": 4610716, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/318e46619794c838204b4c6acc4775dd?s=128&d=identicon&r=PG&f=1", "display_name": "lesurp", "link": "https://stackoverflow.com/users/4610716/lesurp"}, "edited": false, "score": 0, "creation_date": 1558010312, "post_id": 56153989, "comment_id": 98963986, "body": "Thanks for the answer, that solved my issue (and saved me some frustration). Does it work because the type deduction works differently for classes than it does for functions?"}, {"owner": {"reputation": 2581, "user_id": 5141304, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dH8FwSGAMts/AAAAAAAAAAI/AAAAAAAAABY/L6D_xatTkV4/photo.jpg?sz=128", "display_name": "Cruz Jean", "link": "https://stackoverflow.com/users/5141304/cruz-jean"}, "edited": false, "score": 0, "creation_date": 1558013122, "post_id": 56153989, "comment_id": 98965943, "body": "@super Right, I realized my mistake after the edit period elapsed. The <code>_t</code> form is typically for the <code>typename whatever&lt;T&gt;::type</code> idiom."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "reply_to_user": {"reputation": 167, "user_id": 4610716, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/318e46619794c838204b4c6acc4775dd?s=128&d=identicon&r=PG&f=1", "display_name": "lesurp", "link": "https://stackoverflow.com/users/4610716/lesurp"}, "edited": false, "score": 0, "creation_date": 1558018543, "post_id": 56153989, "comment_id": 98969309, "body": "@lesurp This works because the false version will match any type, and the true version will match only types with the pattern <code>Eigen::Matrix&lt;T, Is...&gt;</code>. Since the true version is more specialized, it will be preferred when applicable. As max66 shows in his answer functions can also be used. There the rule is that between overloaded templates, the most exact match to the passed in argument will be selected. The principles are very similar."}], "tags": [], "owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "is_accepted": true, "score": 5, "last_activity_date": 1557940911, "last_edit_date": 1557940911, "creation_date": 1557938180, "answer_id": 56153989, "question_id": 56153768, "link": "https://stackoverflow.com/questions/56153768/constexpr-check-of-a-type/56153989#56153989", "title": "constexpr check of a type", "body": "<p>You can use partial specialization to match a <code>Eigen::Matrix&lt;...&gt;</code> like so</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct is_eigen_impl : std::false_type {};\n\ntemplate &lt;typename T, int... Is&gt;\nstruct is_eigen_impl&lt;Eigen::Matrix&lt;T, Is...&gt;&gt; : std::true_type {};\n\ntemplate &lt;typename T&gt;\nconstexpr bool is_eigen = is_eigen_impl&lt;T&gt;::value;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1557939059, "post_id": 56154047, "comment_id": 98937739, "body": "Notice that class inherited from Eigen matrix is also considered as same in your version. So not exactly the same as super&#39;s answer."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1557940380, "post_id": 56154047, "comment_id": 98938311, "body": "You don&#39;t need the dummy int/long parameter here."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1557942197, "post_id": 56154047, "comment_id": 98939100, "body": "@Barry - because the second is a better match; you&#39;re right; thanks. I&#39;ll simplify."}, {"owner": {"reputation": 167, "user_id": 4610716, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/318e46619794c838204b4c6acc4775dd?s=128&d=identicon&r=PG&f=1", "display_name": "lesurp", "link": "https://stackoverflow.com/users/4610716/lesurp"}, "edited": false, "score": 0, "creation_date": 1558010376, "post_id": 56154047, "comment_id": 98964035, "body": "Interesting solution. However we don&#39;t inherit from those classes therefore I&#39;ll stick with the other answer :)"}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 1, "last_activity_date": 1557942247, "last_edit_date": 1557942247, "creation_date": 1557938443, "answer_id": 56154047, "question_id": 56153768, "link": "https://stackoverflow.com/questions/56153768/constexpr-check-of-a-type/56154047#56154047", "title": "constexpr check of a type", "body": "<p>If I understand correctly, you trying to obtain something as follows (caution: code not tested)</p>\n\n<pre><code>template &lt;typename T&gt;\nconstexpr std::false_type is_eigen_helper (T const &amp;);\n\ntemplate &lt;typename T, int ... Is&gt;\nconstexpr std::true_type is_eigen_helper (Eigen::Matrix&lt;T, Is...&gt; const &amp;);\n\ntemplate &lt;typename T&gt;\nconstexpr auto is_eigen { decltype(is_eigen_helper(std::declval&lt;T&gt;()))::value };\n</code></pre>\n\n<p>In this case <code>is_eigen&lt;T&gt;</code> is a template variable, so is required C++14.</p>\n\n<p>In C++11 you can define <code>is_eigen&lt;T&gt;</code> as a type</p>\n\n<pre><code>template &lt;typename T&gt;\nusing is_eigen = decltype(is_eigen_helper(std::declval&lt;T&gt;()));\n</code></pre>\n\n<p>so you can use <code>is_eigen&lt;T&gt;::value</code> to check if <code>T</code> is an <code>Eigen::Matrix</code>.</p>\n\n<p>p.s.: template specialization, as in super's answer, is another (maybe better) way to do almost the same thing.</p>\n\n<p>But, as pointed by Jarod42, there is a difference. </p>\n\n<p>With my solution you obtain that <code>is_eigen&lt;T&gt;</code> (or <code>is_eigen&lt;T&gt;::value</code>, in C++11) is <code>true</code> when <code>T</code> is a <code>Eigen::Matrix</code> of some type <strong>or</strong> a class that inherits from some <code>Eigen::Matrix</code> class.</p>\n\n<p>With super's solution you get that <code>is_eigen&lt;T&gt;::value</code> is <code>true</code> only if <code>T</code> is an <code>Eigen::Matrix</code>. When <code>T</code> inherit from an <code>Eigen::Matrix</code>, <code>is_eigen&lt;T&gt;</code> is <code>false</code>.</p>\n\n<p>See you what is better for your needs.</p>\n"}], "owner": {"reputation": 167, "user_id": 4610716, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/318e46619794c838204b4c6acc4775dd?s=128&d=identicon&r=PG&f=1", "display_name": "lesurp", "link": "https://stackoverflow.com/users/4610716/lesurp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1382, "favorite_count": 0, "accepted_answer_id": 56153989, "answer_count": 2, "score": 0, "last_activity_date": 1557942247, "creation_date": 1557937354, "last_edit_date": 1557938794, "question_id": 56153768, "link": "https://stackoverflow.com/questions/56153768/constexpr-check-of-a-type", "title": "constexpr check of a type", "body": "<p>I'm trying to overload some function based on whether or not I'm passing an Eigen matrix to them, and I wanted to make myself some nice <code>constexpr</code> function to improve readability.</p>\n\n<p>For that I decided to emulate the implementation of <code>std::is_same</code> given on <a href=\"https://en.cppreference.com/w/cpp/types/is_same\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/types/is_same</a></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;class T, class U&gt;\nstruct is_same : std::false_type {};\n\ntemplate&lt;class T&gt;\nstruct is_same&lt;T, T&gt; : std::true_type {};\n</code></pre>\n\n<p>And I told myself sure, easy enough:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;typename T&gt;\nbool constexpr is_eigen() { return false; }\n\ntemplate &lt;typename T, typename Eigen::Matrix&lt;typename T::Scalar,\n                                             T::RowsAtCompileTime,\n                                             T::ColsAtCompileTime,\n                                             T::Options,\n                                             T::MaxRowsAtCompileTime,\n                                             T::MaxColsAtCompileTime&gt;&gt;\nbool constexpr is_eigen() { return true; }\n</code></pre>\n\n<p>However my Eigen types resolve to the first template specialization, not the first (putting a dummy <code>typename U</code> doesn't help).</p>\n\n<p>I also tried something like:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;typename T, bool is_it = std::is_same&lt;T,\n                                                Eigen::Matrix&lt;typename T::Scalar,\n                                                              T::RowsAtCompileTime,\n                                                              T::ColsAtCompileTime,\n                                                              T::Options,\n                                                              T::MaxRowsAtCompileTime,\n                                                              T::MaxColsAtCompileTime&gt;&gt;::value&gt;\nbool constexpr is_eigen() { return is_it; }\n\ntemplate &lt;typename T, typename = std::enable_if_t&lt;!std::is_class&lt;T&gt;::value&gt;&gt;\nbool constexpr is_eigen() { return false; }\n</code></pre>\n\n<p>But for non-Eigen classes the first overload doesn't resolve, and trying anything to change that means Eigen will still hit the false branch</p>\n\n<p>Basically, any default branch I come up with gets taken even for Eigen-types. I hate SFINAE :(</p>\n"}, {"tags": ["android", "c++", "cmake", "android-ndk", "ninja"], "answers": [{"comments": [{"owner": {"reputation": 10161, "user_id": 8034839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N8r2x.jpg?s=128&g=1", "display_name": "shizhen", "link": "https://stackoverflow.com/users/8034839/shizhen"}, "edited": false, "score": 0, "creation_date": 1557992361, "post_id": 56159721, "comment_id": 98953880, "body": "Here is my personal NDK example, hope it is helpful for your case: <a href=\"https://github.com/russell-shizhen/JniExample\" rel=\"nofollow noreferrer\">github.com/russell-shizhen/JniExample</a>"}, {"owner": {"reputation": 1077, "user_id": 2593148, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/BbN40.jpg?s=128&g=1", "display_name": "Fran&#231;ois Legrand", "link": "https://stackoverflow.com/users/2593148/fran%c3%a7ois-legrand"}, "edited": false, "score": 1, "creation_date": 1557999292, "post_id": 56159721, "comment_id": 98957757, "body": "Thank you shizhen, yes it is!"}], "tags": [], "owner": {"reputation": 10161, "user_id": 8034839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N8r2x.jpg?s=128&g=1", "display_name": "shizhen", "link": "https://stackoverflow.com/users/8034839/shizhen"}, "is_accepted": true, "score": 3, "last_activity_date": 1557971291, "creation_date": 1557971291, "answer_id": 56159721, "question_id": 56153559, "link": "https://stackoverflow.com/questions/56153559/how-to-build-an-android-project-with-ninja/56159721#56159721", "title": "How to build an Android project with Ninja?", "body": "<p>Android NDK uses CMake to build projects, but instead of run <code>ninja</code> separately, you should run below gradle command to trigger your NDK project build.</p>\n\n<pre><code>./gradlew externalNativeBuild\n</code></pre>\n\n<p>Internally, CMake will use the ninja build system to compile and link the C/C++ sources for your apps.</p>\n"}], "owner": {"reputation": 1077, "user_id": 2593148, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/BbN40.jpg?s=128&g=1", "display_name": "Fran&#231;ois Legrand", "link": "https://stackoverflow.com/users/2593148/fran%c3%a7ois-legrand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 947, "favorite_count": 0, "accepted_answer_id": 56159721, "answer_count": 1, "score": 0, "last_activity_date": 1557971427, "creation_date": 1557936510, "last_edit_date": 1557971427, "question_id": 56153559, "link": "https://stackoverflow.com/questions/56153559/how-to-build-an-android-project-with-ninja", "title": "How to build an Android project with Ninja?", "body": "<p>I have an Android project with a <code>app/src/CMakeLists.txt</code> file like this </p>\n\n<pre><code>cmake_minimum_required(VERSION 3.4.1)\n\nadd_library( # Specifies the name of the library.\n             native-lib\n\n             # Sets the library as a shared library.\n             SHARED\n\n             # Provides a relative path to your source file(s).\n             main/cpp/native-lib.cpp )\n</code></pre>\n\n<p>I also have a <code>app/src/main/cpp/native-lib.cpp</code> file in my project.</p>\n\n<p>When I run <code>ninja</code> in a terminal I get this error</p>\n\n<pre><code>ninja: error: loading 'build.ninja': No such file or directory\n</code></pre>\n\n<p>I'm not familiar with the NDK and I'm trying to run the project with <a href=\"https://ninja-build.org/\" rel=\"nofollow noreferrer\">ninja</a> but I'm not able to find any clear documentation or example.</p>\n"}, {"tags": ["c++", "multithreading", "c++11", "parallel-processing"], "comments": [{"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 1, "creation_date": 1557936124, "post_id": 56153441, "comment_id": 98936339, "body": "You can have the other thread waiting for a condition variable and awake on that, then execute the function you want based on some flags you will have set. In Windows, you can also have a message queue and post a message (not the for loop you have created, but GetMessage()). For simple multithreading calculations you can also use future/promise."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1557936788, "post_id": 56153441, "comment_id": 98936662, "body": "Create 4 threads and let them wait for a condition variable. Every time you have work ready for one of the threads, call <code>notify_one</code>."}, {"owner": {"reputation": 17, "user_id": 11468892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92ce3f8da831141b666a35aaeb809700?s=128&d=identicon&r=PG&f=1", "display_name": "hmmmmmm", "link": "https://stackoverflow.com/users/11468892/hmmmmmm"}, "reply_to_user": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1557936804, "post_id": 56153441, "comment_id": 98936671, "body": "@MichaelChourdakis If i check for the flags, I&#39;ll still have to use while loop though, right? If you don&#39;t mind, could you elaborate please more?"}, {"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1557936860, "post_id": 56153441, "comment_id": 98936693, "body": "The point is that, by using these &quot;waiting&quot; objects, the for loop won&#39;t consume system resources. If you wait on the condition variable, then while waiting the thread won&#39;t eat the CPU. You will do a for loop, but inside that you would be checking for the condition variable, and if it&#39;s set, <i>then</i> check the flags."}, {"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1557936967, "post_id": 56153441, "comment_id": 98936744, "body": "Some more info in one of my older articles <a href=\"https://www.codeproject.com/Articles/540912/Cplusplus-11-Threads-Make-your-multitasking-life-e\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 1263, "user_id": 3938402, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3db2c7bcda762ef0a3017108b1446094?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/3938402/harry"}, "edited": false, "score": 0, "creation_date": 1557937165, "post_id": 56153441, "comment_id": 98936831, "body": "You can use condition variables to synchronize the threads. If you are working on linux you can use pthread_cond_wait and pthread_cond_signal functions to achieve"}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1557939035, "post_id": 56153441, "comment_id": 98937726, "body": "Often, the <i>best</i> way to ensure that certain things happen in a certain order is to do all of those things in a single thread. E.g., if you want to do a, then b, then c; write <code>a(...); b(...); c(...);</code>. You say that you want to do things in different threads, but why? Your example shows some structure from your program, but it doesn&#39;t help anybody to understand what problem you actually are trying to solve."}], "answers": [{"comments": [{"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1557939555, "post_id": 56154069, "comment_id": 98937942, "body": "Why not use a proper guard for the mutex? If <code>messages_shared.append()</code> throws, the mutex will be locked forever if you do like above. <code>std::lock_guard&lt;std::mutex&gt; guard(message_mutex); messages_shared.append(u_message);</code> and then you don&#39;t need to manually unlock it. It also looks like noone is waiting for a condition variable so at least one thread will be spinning like crazy."}, {"owner": {"reputation": 709, "user_id": 11457806, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wc3qEDo5ANY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcgo0uvIoS5_y24ibXeT6SlWWoQ7Q/mo/photo.jpg?sz=128", "display_name": "Israel dela Cruz", "link": "https://stackoverflow.com/users/11457806/israel-dela-cruz"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1557939768, "post_id": 56154069, "comment_id": 98938042, "body": "That&#39;s true. But as it&#39;s not the main topic of the question. I used the most explicit way to use mutex, because I don&#39;t know if the op knows about it."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1557940275, "post_id": 56154069, "comment_id": 98938261, "body": "OP seemed pretty concerned about performance so wasting a processor on spinning when it could be doing other things (like tending to the OS) won&#39;t do well.  Also, lock guards and condition variables is almost a must when dealing with threads so I&#39;m sure OP will pick up on what they are good for if you bring them into your example."}, {"owner": {"reputation": 709, "user_id": 11457806, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wc3qEDo5ANY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcgo0uvIoS5_y24ibXeT6SlWWoQ7Q/mo/photo.jpg?sz=128", "display_name": "Israel dela Cruz", "link": "https://stackoverflow.com/users/11457806/israel-dela-cruz"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1557943267, "post_id": 56154069, "comment_id": 98939613, "body": "I&#39;ve edited my answer to use <code>lock_guard</code>. But I can&#39;t think of a way to implement conditional variable without making the program a single execution program with no way of starting up new threads later on."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1557943670, "post_id": 56154069, "comment_id": 98939803, "body": "Good. About <code>condition_variable</code>s When someone puts a message in <code>messages_shared</code> it could <code>notify_one</code> and the main thread could wait on that instead of trying to fetch messages that aren&#39;t there over and over again."}, {"owner": {"reputation": 709, "user_id": 11457806, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wc3qEDo5ANY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcgo0uvIoS5_y24ibXeT6SlWWoQ7Q/mo/photo.jpg?sz=128", "display_name": "Israel dela Cruz", "link": "https://stackoverflow.com/users/11457806/israel-dela-cruz"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1557944806, "post_id": 56154069, "comment_id": 98940246, "body": "I&#39;ve thought about that. But if all the worker threads finishes, then the program will be idle forever. Unless there&#39;s some kind of way to send an event to this program without a spinning thread, then I&#39;ll just stick with my answer because if I put that, the practicality of my answer will be lost."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1557945016, "post_id": 56154069, "comment_id": 98940331, "body": "Well, you have made a message queue so that&#39;d be one way to communicate, or the queue could have a shutdown flag associated with it etc."}, {"owner": {"reputation": 709, "user_id": 11457806, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wc3qEDo5ANY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcgo0uvIoS5_y24ibXeT6SlWWoQ7Q/mo/photo.jpg?sz=128", "display_name": "Israel dela Cruz", "link": "https://stackoverflow.com/users/11457806/israel-dela-cruz"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1557945217, "post_id": 56154069, "comment_id": 98940429, "body": "But then the sender of that message would have to be spinning continuously too right? Why not just do it here."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1557945480, "post_id": 56154069, "comment_id": 98940568, "body": "No, it woulden&#39;t. You already have most of the basic stuff in place. <code>messages_shared.append()</code> + <code>notify_one</code>. Only the main process is interested in extracting from <code>messages_shared</code> and would have to wait for that notification."}, {"owner": {"reputation": 709, "user_id": 11457806, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wc3qEDo5ANY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcgo0uvIoS5_y24ibXeT6SlWWoQ7Q/mo/photo.jpg?sz=128", "display_name": "Israel dela Cruz", "link": "https://stackoverflow.com/users/11457806/israel-dela-cruz"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1557946851, "post_id": 56154069, "comment_id": 98941150, "body": "Yeah I see now what you mean, I&#39;m sure op is interested in the use of conditional variable. But this is as far as my answer could go."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1557946884, "post_id": 56154069, "comment_id": 98941162, "body": "Fair enough :-)"}], "tags": [], "owner": {"reputation": 709, "user_id": 11457806, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wc3qEDo5ANY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcgo0uvIoS5_y24ibXeT6SlWWoQ7Q/mo/photo.jpg?sz=128", "display_name": "Israel dela Cruz", "link": "https://stackoverflow.com/users/11457806/israel-dela-cruz"}, "is_accepted": true, "score": 1, "last_activity_date": 1557943063, "last_edit_date": 1557943063, "creation_date": 1557938525, "answer_id": 56154069, "question_id": 56153441, "link": "https://stackoverflow.com/questions/56153441/calling-a-method-in-another-thread-after-a-thread-is-finished/56154069#56154069", "title": "Calling a method in another thread after a thread is finished", "body": "<p>Others are telling you to use message queue because that's the safest way to do it. Your program must have at least a main thread that the user(you or end-user) can interact with. This main thread will be looping for as long as your program runs. You do your message processing here</p>\n\n<pre><code>// this is not actually running the result now\n// this only sends it to the main thread that will run the result\nvoid runTheResult(vector&lt;double&gt;&amp; u){ \n\n    //process 'u' and launch a thread. \n    // @NOTE Launching a thread again will not be beneficial as it will still be blocked \n    // by the mutex\n\n    // convert/store vector into Message. To make it usable for other types\n    // or you can just change Message to double\n    Message u_message = to_message(u)\n\n    std::lock_guard&lt;std::mutex&gt; lock(message_mutex);\n    messages_shared.append(u_message);\n\n};\n\nvoid method() // runs on worker thread\n{\n    for(...){\n\n    //put the calculations in vector&lt;double&gt;result\n\n    };\n\n    runTheResult(result);\n}\n\nvoid getMessages_safe(std::vector&lt;Messages&gt;&amp; outMessages_safe)\n{\n    // as Ted Lyngo suggests, using lock_guard is best practice. See edit for alternative\n    std::lock_guard&lt;std::mutex&gt; lock(message_mutex);\n    outMessages_safe = messages_shared;\n    messages_shared.clear();\n}\n\nstd::vector&lt;Message&gt; messages_shared;\nstd::mutex message_mutex;\n\nvoid main() { // this runs on the very first thread of the program\n  while (isProgramRunning)\n  {\n      std::vector&lt;Message&gt; messages_safe; // safe to access by this thread only\n      getMessages_safe(messages_safe);\n\n      // dispatch messages to whoever needs it\n\n      // launch worker thread\n  }\n}\n\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 11468892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92ce3f8da831141b666a35aaeb809700?s=128&d=identicon&r=PG&f=1", "display_name": "hmmmmmm", "link": "https://stackoverflow.com/users/11468892/hmmmmmm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 56154069, "answer_count": 1, "score": 0, "last_activity_date": 1557943063, "creation_date": 1557935987, "last_edit_date": 1557936130, "question_id": 56153441, "link": "https://stackoverflow.com/questions/56153441/calling-a-method-in-another-thread-after-a-thread-is-finished", "title": "Calling a method in another thread after a thread is finished", "body": "<p>I'm trying to parallelize my program, but since I'm very new to threads, I'm facing some problems.</p>\n\n<p>I have two methods which are part of the same class. One of the methods does some calculations in a for loop and pushes the results in a vector, other method (runTheResult) takes the vector and launches a thread using the obtained vector. I wish to launch another thread for running the next obtained result every time runTheResult is done with a result while limiting the maximum number of threads at a time to 4.</p>\n\n<p>The structure of my program is like: </p>\n\n<pre><code>void runTheResult(vector&lt;double&gt;&amp; u){\n\n//process 'u' and launch a thread \n\n\n};\n\nvoid method(){\n\nfor(...){\n\n//calculate\n\n    for(...){\n\n    //put the calculations in vector&lt;double&gt;result\n\n    };\n\n    runTheResult(result); \n\n};\n\n};\n</code></pre>\n\n<p>I've googled about this a lot and one of the solutions is to maintain a message que. The problem with this, however, is if I implement a que, I'll have to check the que with another thread periodically in a while loop. If I use while loop like <code>while(true){//check for new messages if number of threads is less than five}</code>, I'll lose a lot of processing power and if I choose to put the loop to sleep if condition is not met, I waste processing power. The functions I'm running in threads take 2-5 seconds each and I've to process ~1k to 50k of them so even a second of delay per loop is a lot.</p>\n\n<p>Is it possible to run runTheResultin another thread every time runTheResult is done? or is there better way to do this? </p>\n"}, {"tags": ["c++", "visual-studio-2017", "char"], "comments": [{"owner": {"reputation": 675, "user_id": 3259789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a55f2fc4903a6c4cc3d4554c7a970d41?s=128&d=identicon&r=PG&f=1", "display_name": "rAndom69", "link": "https://stackoverflow.com/users/3259789/random69"}, "edited": false, "score": 0, "creation_date": 1557935674, "post_id": 56153318, "comment_id": 98936068, "body": "Remove const before const char * window_title or add const into init_setup(..., const char *windowName)"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1557935807, "post_id": 56153318, "comment_id": 98936166, "body": "Please <a href=\"https://stackoverflow.com/editing-help#code\">format your code properly</a>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1557935873, "post_id": 56153318, "comment_id": 98936207, "body": "There is no need to double space between code lines."}, {"owner": {"reputation": 7027, "user_id": 1735922, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a82aaa47327bba0f9657c32ce20c8914?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1735922/john"}, "edited": false, "score": 0, "creation_date": 1557935897, "post_id": 56153318, "comment_id": 98936215, "body": "See related/duplicate: <a href=\"https://stackoverflow.com/q/59670/1735922\">stackoverflow.com/q/59670/1735922</a>"}, {"owner": {"reputation": 1, "user_id": 11480257, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-99KKNvLgHUo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcTN0xQMbKo9ECT75y_BkNsdF1jrQ/mo/photo.jpg?sz=128", "display_name": "Archita Vasuki", "link": "https://stackoverflow.com/users/11480257/archita-vasuki"}, "edited": false, "score": 0, "creation_date": 1557936072, "post_id": 56153318, "comment_id": 98936303, "body": "it works thanks! :3"}], "owner": {"reputation": 1, "user_id": 11480257, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-99KKNvLgHUo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcTN0xQMbKo9ECT75y_BkNsdF1jrQ/mo/photo.jpg?sz=128", "display_name": "Archita Vasuki", "link": "https://stackoverflow.com/users/11480257/archita-vasuki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 404, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1557944508, "creation_date": 1557935573, "last_edit_date": 1557944508, "question_id": 56153318, "link": "https://stackoverflow.com/questions/56153318/how-to-fix-argument-of-type-const-char-is-incompatible-with-parameter-of-t", "title": "how to fix : argument of type &quot;const char *&quot; is incompatible with parameter of type &quot;char *&quot;?", "body": "<p>I got this error while doing OpenGL project </p>\n\n<blockquote>\n  <p>const char * is incompatible with parameter of type char *</p>\n</blockquote>\n\n<pre><code>//  variables representing the window size\nint window_width = 706;\nint window_height = 706;\n//  variable representing the window title\nconst char *window_title = \"Snake\";\nvoid init_setup(int width, int height, char *windowName)\n{\n    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);\n    centerOnScreen();\n    glutInitWindowSize(window_width, window_height);// init. window size\n    glutInitWindowPosition(window_x, window_y); // init. window position\n    glutCreateWindow(windowName);   // window name\n    glutReshapeFunc(reshape_handler);  // sets the reshape call back\n}    // end of init_setup()\n\nint main(int argc, char **argv)\n{\nglutInit(&amp;argc, argv);\ninit_setup(window_width, window_height, window_title); //ERROR OCCURS HERE\nglutMainLoop();\n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "runtime-error", "boost-multiprecision"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1557934922, "post_id": 56153071, "comment_id": 98935646, "body": "did you print the string to see what it contains in case of the error?"}, {"owner": {"reputation": 11, "user_id": 6849970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/593026c925caf6f0cce4e3e59ce88e9b?s=128&d=identicon&r=PG", "display_name": "Jed", "link": "https://stackoverflow.com/users/6849970/jed"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1557935194, "post_id": 56153071, "comment_id": 98935815, "body": "Yes, it just contains numbers."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1557935232, "post_id": 56153071, "comment_id": 98935831, "body": "would be good to see if the error can be reproduced. I&#39;d suggest to remove the randomness and use the string as input directly"}, {"owner": {"reputation": 11, "user_id": 6849970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/593026c925caf6f0cce4e3e59ce88e9b?s=128&d=identicon&r=PG", "display_name": "Jed", "link": "https://stackoverflow.com/users/6849970/jed"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1557935454, "post_id": 56153071, "comment_id": 98935952, "body": "Looks like cpp_int expects strings without leading zeros. I think that&#39;s where the issue is."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1557935579, "post_id": 56153071, "comment_id": 98936017, "body": "in general, randomness and testing dont go that well together, once you know there is a problem you want to know exactly where, not just &quot;randomly it crashes&quot;. Often being able to reproduce the problem is already half way to solving it"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1557935753, "post_id": 56153071, "comment_id": 98936126, "body": "hm that sounds plausible, but I also couldnt find anything on that in the documentation..."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1557938940, "post_id": 56153071, "comment_id": 98937681, "body": "@Jed&#39;s theory appears to be correct, see: <a href=\"https://wandbox.org/permlink/erxWPeSsVz43IuXi\" rel=\"nofollow noreferrer\">wandbox.org/permlink/erxWPeSsVz43IuXi</a>"}], "owner": {"reputation": 11, "user_id": 6849970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/593026c925caf6f0cce4e3e59ce88e9b?s=128&d=identicon&r=PG", "display_name": "Jed", "link": "https://stackoverflow.com/users/6849970/jed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1557935111, "creation_date": 1557934595, "last_edit_date": 1557935111, "question_id": 56153071, "link": "https://stackoverflow.com/questions/56153071/cpp-int-boost-runtime-error-unexpected-content-found-while-parsing-character", "title": "cpp_int (boost) runtime error: Unexpected content found while parsing character string", "body": "<p>I'm getting the following runtime error with boost::multiprecision::cpp_int:</p>\n\n<pre><code>terminate called after throwing an instance of 'boost::wrapexcept&lt;std::runtime_error&gt;'\nwhat():  Unexpected content found while parsing character string.\n</code></pre>\n\n<p>The function randomCppInt generates a random cpp_int of a specified length. The program just loops through displaying these but terminates with the error randomly - sometimes on the first pass through the loop, othertimes after a few iterations. I can't seem to identify where I'm going wrong.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;cstdlib&gt;\n#include &lt;ctime&gt;\n#include &lt;boost/multiprecision/cpp_int.hpp&gt;\n\nusing namespace boost::multiprecision; \nusing namespace std;\n\n// Generates a random cpp_int of specified length.\ncpp_int randomCppInt(cpp_int length)\n{\n    // Seed RNG with time.\n    srand(time(0));\n    string num = \"\";\n\n    // Iterate for length\n    for (cpp_int i = 0; i &lt; length; i++)\n    {\n        // Random char from '0' to '9'\n        char ch = (rand() % 10) + 48;\n        // Add to string.\n        num += ch;\n    }\n\n    // Init new cpp_int using string and return to caller.\n    cpp_int result(num);\n    return result;\n}\n\n\nint main()\n{\n\n    // For testing, just generate randoms and cout for now.\n    while (true)\n    {\n        cpp_int num = randomCppInt(5432);\n        cout &lt;&lt; num &lt;&lt; endl;    \n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1557934118, "post_id": 56152902, "comment_id": 98935186, "body": "<code>SaveUser(User, ...)</code> is accepting a <code>User</code> by <i>value</i>. Try a reference instead."}, {"owner": {"reputation": 121, "user_id": 11497237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/099999d2b0a56677384c84334ed40b51?s=128&d=identicon&r=PG&f=1", "display_name": "Imre_talpa", "link": "https://stackoverflow.com/users/11497237/imre-talpa"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1557934665, "post_id": 56152902, "comment_id": 98935498, "body": "@AndyG stiil don&#39;t work"}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1557934677, "post_id": 56152902, "comment_id": 98935506, "body": "@AndyG passing user by value to save may not be ideal, but I don&#39;t think it&#39;s actually wrong.  Passing it by value to Prefix, however...."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 2, "creation_date": 1557934827, "post_id": 56152902, "comment_id": 98935592, "body": "You also have a lot of warnings: <code>if(count = num_people)</code> doesn&#39;t look correct for example. Can you turn on more compilation warnings?"}, {"owner": {"reputation": 121, "user_id": 11497237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/099999d2b0a56677384c84334ed40b51?s=128&d=identicon&r=PG&f=1", "display_name": "Imre_talpa", "link": "https://stackoverflow.com/users/11497237/imre-talpa"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1557935065, "post_id": 56152902, "comment_id": 98935739, "body": "@TedLyngmo I don&#39;t have warnings when i compile, I use VS 19."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1557935641, "post_id": 56152902, "comment_id": 98936054, "body": "That&#39;s bad. You can put your code on <a href=\"https://godbolt.org/\" rel=\"nofollow noreferrer\">Godbolt</a> and try it with different compilers. Did you really mean <code>if(count = num_people)</code> and not <code>if(count == num_people)</code>? With the right warning options turned on, that, and other problems, like shadowing variables, would be found."}, {"owner": {"reputation": 121, "user_id": 11497237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/099999d2b0a56677384c84334ed40b51?s=128&d=identicon&r=PG&f=1", "display_name": "Imre_talpa", "link": "https://stackoverflow.com/users/11497237/imre-talpa"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1557935752, "post_id": 56152902, "comment_id": 98936125, "body": "@TedLyngmo No, no your correction was fine, I modified the program."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1557935825, "post_id": 56152902, "comment_id": 98936181, "body": "Ok, but what I mean is that the compiler should be able to help you find easy mistakes like that. I&#39;m surprised VS didn&#39;t catch that (and the shadowing variables). See if you can turn on warning level 4  <code>&#47;W4</code>.  Perhaps that helps a littlle."}, {"owner": {"reputation": 121, "user_id": 11497237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/099999d2b0a56677384c84334ed40b51?s=128&d=identicon&r=PG&f=1", "display_name": "Imre_talpa", "link": "https://stackoverflow.com/users/11497237/imre-talpa"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1557935950, "post_id": 56152902, "comment_id": 98936250, "body": "@TedLyngmo First time I made the program in CodeBlocks and i don&#39;t receive warnings and I move  up to VS and still no warnings. I expect from CodeBlocks to miss this errors."}, {"owner": {"reputation": 121, "user_id": 11497237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/099999d2b0a56677384c84334ed40b51?s=128&d=identicon&r=PG&f=1", "display_name": "Imre_talpa", "link": "https://stackoverflow.com/users/11497237/imre-talpa"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1557936140, "post_id": 56152902, "comment_id": 98936345, "body": "@TedLyngmo Can you give me an idea what  to modify in SaveToFile() because when i call it , saves all users on a single line in file. But SaveUser() work properly, the main diference between them is that SaveUser() save only 1 input user and SaveToFile save all after a modification."}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1557936325, "post_id": 56152902, "comment_id": 98936440, "body": "Don&#39;t make changes to your question based on the answers.   That makes it not make sense."}, {"owner": {"reputation": 121, "user_id": 11497237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/099999d2b0a56677384c84334ed40b51?s=128&d=identicon&r=PG&f=1", "display_name": "Imre_talpa", "link": "https://stackoverflow.com/users/11497237/imre-talpa"}, "reply_to_user": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1557936424, "post_id": 56152902, "comment_id": 98936488, "body": "@xaxxon But i specified this error too."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1557936935, "post_id": 56152902, "comment_id": 98936729, "body": "@lmre Hard to say. I&#39;d redesign it so that a <code>User</code> only can load/save itself to an open stream, I&#39;d then move out all the functions dealing with the whole list of users to a new class (<code>UserList</code>) that should contain a <code>std::vector&lt;User&gt;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 11497237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/099999d2b0a56677384c84334ed40b51?s=128&d=identicon&r=PG&f=1", "display_name": "Imre_talpa", "link": "https://stackoverflow.com/users/11497237/imre-talpa"}, "edited": false, "score": 0, "creation_date": 1557936360, "post_id": 56153074, "comment_id": 98936453, "body": "Thanks for suggestion about SaveUser()."}], "tags": [], "owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "is_accepted": true, "score": 1, "last_activity_date": 1557934612, "creation_date": 1557934612, "answer_id": 56153074, "question_id": 56152902, "link": "https://stackoverflow.com/questions/56152902/my-function-dont-take-over-the-variable-value-from-other-function/56153074#56153074", "title": "My function don&#39;t take over the variable value from other function", "body": "<p>The problem is that <code>void User::Prefix(User person, int num_people)</code> takes <code>person</code> by <em>value</em>, so it makes a copy of the person, changes the copy, then the copy goes away when the function ends.  The original was never changed.</p>\n\n<p>Instead, you want:</p>\n\n<pre><code>void User::Prefix(User &amp; person, int num_people)\n</code></pre>\n\n<p>To have a <em>reference</em> to the person specified, which will be affected by the changes you make inside the function.</p>\n\n<p>Also, I recommend you change your saveuser to be:</p>\n\n<pre><code>void User::SaveUser(User const &amp; person, int &amp;num_people) const\n</code></pre>\n\n<p>just to avoid making extra copies of the User object, but it's not incorrect the way you currently have it, I don't think.</p>\n"}], "owner": {"reputation": 121, "user_id": 11497237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/099999d2b0a56677384c84334ed40b51?s=128&d=identicon&r=PG&f=1", "display_name": "Imre_talpa", "link": "https://stackoverflow.com/users/11497237/imre-talpa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 56153074, "answer_count": 1, "score": 0, "last_activity_date": 1557936336, "creation_date": 1557934031, "last_edit_date": 1557936336, "question_id": 56152902, "link": "https://stackoverflow.com/questions/56152902/my-function-dont-take-over-the-variable-value-from-other-function", "title": "My function don&#39;t take over the variable value from other function", "body": "<p>I have a program to create a phone book in a file. Some of my functions don't work or don't work properly. </p>\n\n<p><strong>user.h</strong></p>\n\n<pre><code>#pragma once\n#include &lt;string&gt;\n#include &lt;vector&gt;\nusing namespace std;\nclass User\n{private:\n   string firstname, lastname, country, city, street;\n   string phone;\npublic:\n    string prefix;\n  void ReadAllUsers(User[], int&amp;);\n  void SaveUser(User, int&amp;);\n  void SaveToFile(const User[], int);\n  void AddName(User[], int&amp;);\n  void ListAllUsers(const User[], int&amp;);\n  void Prefix(User, int);\n  void ChangePhone(User[], int&amp;);\n  void Help();\n  void DeleteUser(User[], int&amp;);\n  bool Search(string x) \n{\nreturn (phone.find(x) != string::npos);\n}\n};\n</code></pre>\n\n<p><strong>user.cpp</strong></p>\n\n<pre><code>#include \"User.h\"\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#pragma warning(disable:4996)\nusing namespace std;\n\nconst string PHONEBOOK_FILENAME = \"phonebook.txt\";\n\nvoid User::Help()\n{cout&lt;&lt;\"\\nWELCOME TO THE APPLICATION!\\n\";\n cout&lt;&lt;\"Press 0 to display on the screen all records that are saved in the file(phonebook.txt)\\n\";\n cout&lt;&lt;\"Press 1 to add 1 or more new record(s) in file(phonebook.txt)\\n\";\n cout&lt;&lt;\"Press 2 to delete permanently a record from file(phonebook.txt)\\n\";\n cout&lt;&lt;\"Press 3 to sort users from file(phonebook.txt) by name and display them on the screen\\n\";\n cout&lt;&lt;\"Press 4 to edit a user phone number and save it after in file(phonebook.txt)\\n\";\n cout&lt;&lt;\"Press 5 for help\\n\";\n cout&lt;&lt;\"Press 6 to exit the application\\n\";\n}\n\nvoid User::ReadAllUsers(User people[], int &amp;num_people)\n\n{\n    ifstream f;\n\n    f.open(PHONEBOOK_FILENAME.c_str());\n\n    if (f.fail())\n{\n  cout &lt;&lt; \"Unable to open file \" &lt;&lt; endl;\n  return ;\n}\n    int i = 0;\n\n    while (!f.eof() &amp;&amp; i &lt; 100)\n\n    {   getline(f, people[i].firstname);\n        getline(f, people[i].lastname);\n        getline(f, people[i].phone);\n        getline(f, people[i].country);\n        getline(f, people[i].city);\n        getline(f, people[i].street);\n        i++;\n    }\nnum_people = i;\n\nf.close();\n\n}\n\n//Add country prefix to the phone number\nvoid User::Prefix(User person, int num_people)\n{string filecountry;\nifstream f;\n    f.open(\"prefix.txt\");\n    {\n    while (getline(f, filecountry))\n  {\n      if (person.country == filecountry )\n      {\n         f.ignore();//next line\n         f &gt;&gt; person.prefix;\n        }\n    }\nf.close();\n  }\n}\nvoid User::SaveUser(User person, int &amp;num_people)\n{\nofstream f(PHONEBOOK_FILENAME.c_str(), ios::app ) ;\n    if (f.fail())\n    cout &lt;&lt; \"Unable to open file \" &lt;&lt; endl;\n        else\n        f &lt;&lt; person.firstname &lt;&lt; \" \" &lt;&lt;  person.lastname &lt;&lt; \" \" &lt;&lt; person.country &lt;&lt;  \" \" &lt;&lt; person.city &lt;&lt; \" \" &lt;&lt; person.street &lt;&lt; \" \" &lt;&lt; person.prefix &lt;&lt; \"-\" &lt;&lt; person.phone &lt;&lt; endl;\ncout &lt;&lt; \"\\nThe user was added\\n\";\n}\n//Save data after a modification or after a user delete\nvoid User::SaveToFile(const User people[], int num_people)\n\n{ofstream f;\nf.open(PHONEBOOK_FILENAME.c_str());\n\n for(int i = 0; i &lt; num_people; i++)\n\n    {\n\n        f &lt;&lt; people[i].firstname &lt;&lt; \" \" &lt;&lt; people[i].lastname &lt;&lt; \" \" &lt;&lt;  people[i].country &lt;&lt; \" \" &lt;&lt; people[i].city &lt;&lt; \" \" &lt;&lt; people[i].street &lt;&lt; \" \" &lt;&lt; people[i].prefix &lt;&lt; \" \" &lt;&lt; people[i].phone &lt;&lt; endl;\n}\n}\n// Read user data from the keyboard, add a new contact to the array\nvoid User::AddName(User people[],int &amp;num_people)\n{User person; \n    cout &lt;&lt;\"Enter the user's first name: \";\n    cin &gt;&gt; person.firstname;\n\n    cout &lt;&lt;\"Enter the user's last name: \";\n    cin &gt;&gt; person.lastname;\n\n    cout &lt;&lt;\"Enter the user's country: \";\n    cin &gt;&gt; person.country;\n\n    cout &lt;&lt;\"Enter the user's city: \";\n    cin &gt;&gt; person.city;\n\n    cout &lt;&lt;\"Enter the user's street: \";\n    cin &gt;&gt; person.street;\n\n    cout &lt;&lt;\"Enter the user's phone number: \";\n    cin &gt;&gt; person.phone;\n\n    Prefix(person, num_people);\n\n    cout &lt;&lt;\"The prefix is \" &lt;&lt; person.prefix;\n\n        for(int i = 0; i &lt; num_people; i++)\n\n    {\n\n        if( i + 1  == num_people)\n\n            people[num_people] = person;\n\n    }\nSaveUser(person, num_people);\n\n   num_people++;\n\n}\n// Ask the for person's name to change, find the person in the array and\n// change it to the new phone number.  Then save the new data to file by\n// calling SaveToFile.\nvoid User::ChangePhone(User people[], int &amp;num_people)\n{\nUser person;\nint count;\n\ncout &lt;&lt;\"Enter name to change: \";\ncin &gt;&gt; person.firstname;\n\nfor(count = 0; count &lt; num_people; count++)\n\n    {\n\n        if(people[count].Search(person.firstname))\n\n        {   cout &lt;&lt;endl&lt;&lt; people[count].firstname&lt;&lt;endl;\n\ncout &lt;&lt;\"Current number\"&lt;&lt;people[count].phone;\ncout &lt;&lt; \"\\nNew number: \";\n\ncin &gt;&gt; people[count].phone;\n\nSaveToFile(people,num_people);\ncout &lt;&lt;\"\\n\\nNew number Saved.\";\nreturn;\n }\n}\nif(count = num_people)\n\n        cout &lt;&lt;\"\\nName not found.\\n\";\n\n}\n\nvoid User::DeleteUser(User people[], int &amp;num_people)\n{string phone;\nint count = 0;\nifstream f;\nf.open(\"phonebook.txt\");\ncout &lt;&lt; \"Input the phone of user that you want to delete \";\ncin &gt;&gt; phone;\n\nfor(count = 0; count &lt; num_people; count++)\n\n    {\n\n        if(people[count].Search(phone))\n\n        {   cout &lt;&lt;endl&lt;&lt; people[count].phone&lt;&lt;endl;\npeople[count].firstname = people[count].lastname = people[count].phone = people[count].country = people[count].city = people[count].street = \" \";\n        }\nSaveToFile(people,num_people);\ncout &lt;&lt;\"\\n\\nUser deleted.\";\nreturn;}\nf.close();\n}\n\n</code></pre>\n\n<p>The function Prefix()(this is to add automatically a country prefix for phone number, this is read from a file) is working but the value of person.prefix it's not taken by SaveUser(), so the value is not wrote in file.The function SaveToFile() save all users on single line in file.\nAnd functions ChangePhone() and DeleteUser don't working.</p>\n"}, {"tags": ["c++", "llvm", "unique-ptr", "llvm-c++-api"], "comments": [{"owner": {"reputation": 309, "user_id": 8723329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb48604cc29c70e53189e174b4e28959?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathon K", "link": "https://stackoverflow.com/users/8723329/jonathon-k"}, "edited": false, "score": 1, "creation_date": 1557936487, "post_id": 56152803, "comment_id": 98936516, "body": "The constructor wants a <code>std::unique_pointer&lt;module&gt;</code> not <code>module*</code>.  You will have to explicitly create a unique_pointer assuming <code>Module* module;</code> something like <code>ThreadSafeModule tsm(std::unique_pointer(module), tsc);</code> might work (I haven&#39;t tested it)"}, {"owner": {"reputation": 25603, "user_id": 45843, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/55f76441107f14055f95e08bb7bd01df?s=128&d=identicon&r=PG&f=1", "display_name": "rwallace", "link": "https://stackoverflow.com/users/45843/rwallace"}, "reply_to_user": {"reputation": 309, "user_id": 8723329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb48604cc29c70e53189e174b4e28959?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathon K", "link": "https://stackoverflow.com/users/8723329/jonathon-k"}, "edited": false, "score": 0, "creation_date": 1557938379, "post_id": 56152803, "comment_id": 98937384, "body": "<code>std::unique_ptr&lt;Module&gt;(module)</code> gives an error message &#39;attempting to reference a deleted function&#39;"}, {"owner": {"reputation": 25603, "user_id": 45843, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/55f76441107f14055f95e08bb7bd01df?s=128&d=identicon&r=PG&f=1", "display_name": "rwallace", "link": "https://stackoverflow.com/users/45843/rwallace"}, "reply_to_user": {"reputation": 309, "user_id": 8723329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb48604cc29c70e53189e174b4e28959?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathon K", "link": "https://stackoverflow.com/users/8723329/jonathon-k"}, "edited": false, "score": 0, "creation_date": 1557938424, "post_id": 56152803, "comment_id": 98937405, "body": "<code>make_unique(module)</code> gives an error message &#39;no matching overloaded function found&#39;"}, {"owner": {"reputation": 309, "user_id": 8723329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb48604cc29c70e53189e174b4e28959?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathon K", "link": "https://stackoverflow.com/users/8723329/jonathon-k"}, "edited": false, "score": 2, "creation_date": 1557939858, "post_id": 56152803, "comment_id": 98938076, "body": "Do you create <code>module</code>?  you could try <code>unique_ptr&lt;Module&gt; module = make_unique&lt;Module&gt;(args...)</code> instead of <code>Module* module = new Module(args...)</code>  I&#39;m curious which method is deleted.  <code>make_unique</code> doesn&#39;t convert an exiting pointer into a unique pointer it creates a new pointer."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 1, "creation_date": 1557941515, "post_id": 56152803, "comment_id": 98938823, "body": "I don\u2019t have a MCVE to test, but you might try <code>ThreadSafeModule tsm( std::unique_ptr&lt;Module&gt;(module), tsc );</code> if the default deleter is safe to use.  From the error messages, it looks to me as if there\u2019s an incompatibility between MS and Google headers such that <code>std::unique_ptr&lt;llvm::Module&gt;</code> tries to call a function that <code>Module</code> explicitly deletes."}], "answers": [{"comments": [{"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 1, "creation_date": 1557946934, "post_id": 56155490, "comment_id": 98941187, "body": "Ah! My suggestion from the comments no longer works in C++17 because prvalues are no longer moved from. In C++11, they were. You might still prefer <code>hreadSafeModule tsm( std::move(std::unique_ptr&lt;Module&gt;(module)), tsc );</code>as this is a little shorter and doesn\u2019t leave behind a dangling unspecified <code>unique_ptr</code>."}], "tags": [], "owner": {"reputation": 25603, "user_id": 45843, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/55f76441107f14055f95e08bb7bd01df?s=128&d=identicon&r=PG&f=1", "display_name": "rwallace", "link": "https://stackoverflow.com/users/45843/rwallace"}, "is_accepted": false, "score": 1, "last_activity_date": 1557944488, "creation_date": 1557944488, "answer_id": 56155490, "question_id": 56152803, "link": "https://stackoverflow.com/questions/56152803/threadsafemodule-constructor-strangeness/56155490#56155490", "title": "ThreadSafeModule constructor strangeness", "body": "<p>Thanks to preejackie on #llvm for the answer: turns out the <code>unique_ptr</code> must be separately constructed and then moved:</p>\n\n<pre><code>std::unique_ptr&lt;Module&gt; up(module);\nThreadSafeModule tsm(std::move(up), tsc);\n</code></pre>\n"}], "owner": {"reputation": 25603, "user_id": 45843, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/55f76441107f14055f95e08bb7bd01df?s=128&d=identicon&r=PG&f=1", "display_name": "rwallace", "link": "https://stackoverflow.com/users/45843/rwallace"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1557944488, "creation_date": 1557933680, "last_edit_date": 1557941736, "question_id": 56152803, "link": "https://stackoverflow.com/questions/56152803/threadsafemodule-constructor-strangeness", "title": "ThreadSafeModule constructor strangeness", "body": "<p>I'm trying to call an LLVM API that wants a <code>ThreadSafeModule</code> when I have a <code>Module*</code>. I look up <code>ThreadSafeModule</code> and it has these constructors:</p>\n\n<pre><code>ThreadSafeModule(ThreadSafeModule &amp;&amp;Other) = default;\n\n/// Construct a ThreadSafeModule from a unique_ptr&lt;Module&gt; and a\n/// unique_ptr&lt;LLVMContext&gt;. This creates a new ThreadSafeContext from the\n/// given context.\nThreadSafeModule(std::unique_ptr&lt;Module&gt; M, std::unique_ptr&lt;LLVMContext&gt; Ctx)\n    : M(std::move(M)), TSCtx(std::move(Ctx)) {}\n\n/// Construct a ThreadSafeModule from a unique_ptr&lt;Module&gt; and an\n/// existing ThreadSafeContext.\nThreadSafeModule(std::unique_ptr&lt;Module&gt; M, ThreadSafeContext TSCtx)\n    : M(std::move(M)), TSCtx(std::move(TSCtx)) {}\n</code></pre>\n\n<p>The second or third seem suitable, so I try several variations:</p>\n\n<pre><code>ThreadSafeContext tsc;\n\nThreadSafeModule tsm(*module, tsc);\nThreadSafeModule tsm(module, tsc);\nThreadSafeModule tsm(std::move(*module), tsc);\nThreadSafeModule tsm(std::move(module), tsc);\nauto tsm = new ThreadSafeModule(*module, tsc);\nauto tsm = new ThreadSafeModule(module, tsc);\n</code></pre>\n\n<p>and the above with an <code>LLVMContext*</code> instead of a <code>ThreadSafeContext</code>, and in all cases I get basically the same error message:</p>\n\n<pre><code>jit.cpp(21): error C2664: 'llvm::orc::ThreadSafeModule::ThreadSafeModule(const llvm::orc::ThreadSafeModule &amp;)': cannot convert argument 1 from 'llvm::Module *' to 'std::unique_ptr&lt;llvm::Module,std::default_delete&lt;_Ty&gt;&gt;'\n    with\n    [\n        _Ty=llvm::Module\n    ]\njit.cpp(21): note: Constructor for class 'std::unique_ptr&lt;llvm::Module,std::default_delete&lt;_Ty&gt;&gt;' is declared 'explicit'\n    with\n    [\n        _Ty=llvm::Module\n    ]\n</code></pre>\n\n<p>The first part of the error message seems to be saying it is for some reason trying to call the copy constructor, but that seems to be contradicted by the next part.</p>\n\n<p>Any idea what's going on with this, and what the correct incantation would be?</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Separate line for this works as far as it goes:</p>\n\n<pre><code>std::unique_ptr&lt;Module&gt; up(module);\n</code></pre>\n\n<p>But then this still fails:</p>\n\n<pre><code>ThreadSafeModule tsm(up, tsc);\n</code></pre>\n\n<p>with a slightly different error message:</p>\n\n<pre><code>jit.cpp(23): error C2280: 'std::unique_ptr&lt;llvm::Module,std::default_delete&lt;_Ty&gt;&gt;::unique_ptr(const std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt; &amp;)': attempting to reference a deleted function\n    with\n    [\n        _Ty=llvm::Module\n    ]\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\include\\memory(2337): note: see declaration of 'std::unique_ptr&lt;llvm::Module,std::default_delete&lt;_Ty&gt;&gt;::unique_ptr'\n    with\n    [\n        _Ty=llvm::Module\n    ]\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\include\\memory(2337): note: 'std::unique_ptr&lt;llvm::Module,std::default_delete&lt;_Ty&gt;&gt;::unique_ptr(const std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt; &amp;)': function was explicitly deleted\n    with\n    [\n        _Ty=llvm::Module\n    ] (compiling source file jit.cpp)\n</code></pre>\n"}, {"tags": ["c++", "pointers", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1557933587, "post_id": 56152712, "comment_id": 98934856, "body": "So many leaks... have you heard of <code>std::vector</code>?"}, {"owner": {"reputation": 706, "user_id": 4070330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de272559ba2ec727fe9b3108afa222f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kashpur", "link": "https://stackoverflow.com/users/4070330/andrew-kashpur"}, "edited": false, "score": 1, "creation_date": 1557933628, "post_id": 56152712, "comment_id": 98934877, "body": "you call srand multiple times, you should call it once"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1557933931, "post_id": 56152712, "comment_id": 98935079, "body": "Modern C++ programs shouldn&#39;t be written this way.  There is <code>std::vector</code> -- please use that instead of <code>new[]</code>."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1557933945, "post_id": 56152712, "comment_id": 98935085, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">What is The Rule of Three?</a>"}, {"owner": {"reputation": 41, "user_id": 11334242, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z-xfy7537ag/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfoSxWd9sskF3FrKyG_PAm19NudiA/mo/photo.jpg?sz=128", "display_name": "Hardik Sharma", "link": "https://stackoverflow.com/users/11334242/hardik-sharma"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1557934129, "post_id": 56152712, "comment_id": 98935194, "body": "@PaulMcKenzie I could not understand. where should I use std::vector instead of new. apologies for mistunderstanding."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1557934281, "post_id": 56152712, "comment_id": 98935281, "body": "<code>char *genes;</code> would be <code>std::vector&lt;char&gt; genes;</code> then <code>genes = new char[length];</code> would be <code>genes.resize(length);</code>.  No need for <code>delete[]</code>.  You could also throw away <code>length</code>, since a vector knows its own size by the <code>genes.size()</code>.  So many things become simpler, and frankly, faster since you wouldn&#39;t constantly be calling on the allocator each and every time <code>initialize</code> is called."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 11334242, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z-xfy7537ag/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfoSxWd9sskF3FrKyG_PAm19NudiA/mo/photo.jpg?sz=128", "display_name": "Hardik Sharma", "link": "https://stackoverflow.com/users/11334242/hardik-sharma"}, "edited": false, "score": 0, "creation_date": 1557934394, "post_id": 56152884, "comment_id": 98935352, "body": "To be honest, I have never heard of unique pointer before. The code that you used, I literally couldn&#39;t understand. Is there any reference where I could learn more about    std::default_random_engine  and     std::uniform_int_distribution&lt;int&gt;"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 41, "user_id": 11334242, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z-xfy7537ag/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfoSxWd9sskF3FrKyG_PAm19NudiA/mo/photo.jpg?sz=128", "display_name": "Hardik Sharma", "link": "https://stackoverflow.com/users/11334242/hardik-sharma"}, "edited": false, "score": 0, "creation_date": 1557934508, "post_id": 56152884, "comment_id": 98935414, "body": "@HardikSharma yes, on <a href=\"https://en.cppreference.com/w/cpp/numeric/random\" rel=\"nofollow noreferrer\">cppreference</a>"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 41, "user_id": 11334242, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z-xfy7537ag/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfoSxWd9sskF3FrKyG_PAm19NudiA/mo/photo.jpg?sz=128", "display_name": "Hardik Sharma", "link": "https://stackoverflow.com/users/11334242/hardik-sharma"}, "edited": false, "score": 0, "creation_date": 1557934877, "post_id": 56152884, "comment_id": 98935618, "body": "@HardikSharma I don&#39;t think it&#39;s a good idea. You can join the cpplang slack lf you wish to communicate directly. Also don&#39;t hesitate to ask other questions on stack overflow. I usually tend to hang around these places."}, {"owner": {"reputation": 41, "user_id": 11334242, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z-xfy7537ag/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfoSxWd9sskF3FrKyG_PAm19NudiA/mo/photo.jpg?sz=128", "display_name": "Hardik Sharma", "link": "https://stackoverflow.com/users/11334242/hardik-sharma"}, "edited": false, "score": 0, "creation_date": 1557935020, "post_id": 56152884, "comment_id": 98935713, "body": "when I ran the program , it threw following errors,      C:\\Users\\Admin\\Desktop\\programs\\c++\\genetic algo to evolve a      sentence\\main.cpp|15|error: &#39;unique_ptr&#39; in namespace &#39;std&#39; does not name a template type  and a numerous more that were no brainer. this was the first one. can you specify what&#39;s going on my compiler."}, {"owner": {"reputation": 1249, "user_id": 1480324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb95325b1a2501c9b470488180adf2ff?s=128&d=identicon&r=PG", "display_name": "Wutz", "link": "https://stackoverflow.com/users/1480324/wutz"}, "edited": false, "score": 0, "creation_date": 1557935039, "post_id": 56152884, "comment_id": 98935727, "body": "In this case wouldn&#39;t a vector make the job easier than the unique_ptr? This seems like exactly the kind of task it exists for."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 1249, "user_id": 1480324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb95325b1a2501c9b470488180adf2ff?s=128&d=identicon&r=PG", "display_name": "Wutz", "link": "https://stackoverflow.com/users/1480324/wutz"}, "edited": false, "score": 1, "creation_date": 1557935082, "post_id": 56152884, "comment_id": 98935748, "body": "@Wutz yes I know, but I didn&#39;t want to change the code too much."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 41, "user_id": 11334242, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z-xfy7537ag/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfoSxWd9sskF3FrKyG_PAm19NudiA/mo/photo.jpg?sz=128", "display_name": "Hardik Sharma", "link": "https://stackoverflow.com/users/11334242/hardik-sharma"}, "edited": false, "score": 0, "creation_date": 1557935131, "post_id": 56152884, "comment_id": 98935775, "body": "@HardikSharma comments are not meant for error messages."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 41, "user_id": 11334242, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z-xfy7537ag/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfoSxWd9sskF3FrKyG_PAm19NudiA/mo/photo.jpg?sz=128", "display_name": "Hardik Sharma", "link": "https://stackoverflow.com/users/11334242/hardik-sharma"}, "edited": false, "score": 0, "creation_date": 1557935465, "post_id": 56152884, "comment_id": 98935961, "body": "@HardikSharma I updated the answer with corrected code and live example."}, {"owner": {"reputation": 41, "user_id": 11334242, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z-xfy7537ag/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfoSxWd9sskF3FrKyG_PAm19NudiA/mo/photo.jpg?sz=128", "display_name": "Hardik Sharma", "link": "https://stackoverflow.com/users/11334242/hardik-sharma"}, "edited": false, "score": 0, "creation_date": 1557996683, "post_id": 56152884, "comment_id": 98956189, "body": "@GuillaumeRacicot  The program works just fine for generating the random strings. However I get the same set of the string array every time I run the program. Can you help me out ?"}, {"owner": {"reputation": 41, "user_id": 11334242, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z-xfy7537ag/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfoSxWd9sskF3FrKyG_PAm19NudiA/mo/photo.jpg?sz=128", "display_name": "Hardik Sharma", "link": "https://stackoverflow.com/users/11334242/hardik-sharma"}, "edited": false, "score": 0, "creation_date": 1557997196, "post_id": 56152884, "comment_id": 98956456, "body": "@GuillaumeRacicot also when I read the reference of random header file that you provided, I could understand much of the things. There was a class (I suppose) namely std::default_random_engine that needs a std::random_device object to initialize its obect, the problem is when I ran this code in my program certain errors occured , one of them was like <code>class std::random_device has no member named &#39;generate&#39; ;</code>"}], "tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": false, "score": 1, "last_activity_date": 1557935362, "last_edit_date": 1557935362, "creation_date": 1557933976, "answer_id": 56152884, "question_id": 56152712, "link": "https://stackoverflow.com/questions/56152712/getting-the-same-string-gene-array-in-every-object-in-the-array-dna-dynamical/56152884#56152884", "title": "Getting the same string (gene array) in every object in the array dna (dynamically allocated)", "body": "<p>You should use the new random API and use a proper random engine:</p>\n\n<pre><code>class DNA {\nprivate:\n    int length;\n    std::unique_ptr&lt;char[]&gt; genes;\n\n    static std::default_random_engine random;\n\npublic:\n    DNA() : length{0}, genes{} {}\n\n    void initialize(int len) {\n        this-&gt; length = len;\n        this-&gt; genes = std::make_unique&lt;char[]&gt;(length);\n\n        std::uniform_int_distribution&lt;std::size_t&gt; distribution{0, sampleSpace.size() - 1};\n        for (int i = 0; i &lt; length; i++) {\n            genes[i] = sampleSpace.at(distribution(random));\n        }\n    }\n\n    void show() {\n        for (int i = 0; i &lt; length; i++) {\n            cout&lt;&lt;genes[i];\n        }\n        cout&lt;&lt;endl;\n    }\n};\n</code></pre>\n\n<p>This will initialize a <code>std::default_random_engine</code> and use a proper number distribution. Also, I changed the code for unique pointer.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/8c40156ecdd9bf70\" rel=\"nofollow noreferrer\">Here's a live example</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 11334242, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z-xfy7537ag/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfoSxWd9sskF3FrKyG_PAm19NudiA/mo/photo.jpg?sz=128", "display_name": "Hardik Sharma", "link": "https://stackoverflow.com/users/11334242/hardik-sharma"}, "edited": false, "score": 0, "creation_date": 1557998149, "post_id": 56153379, "comment_id": 98957006, "body": "Thanks for the program. It worked fine in generating the random string vectors on top of sampleSpace and made a lot of things easier. However there still a problem : the same set of string vector is generated every time I run the program. I&#39;d be glad I you could help me generating the random set of string vector on every other execution."}], "tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": false, "score": 1, "last_activity_date": 1557935762, "creation_date": 1557935762, "answer_id": 56153379, "question_id": 56152712, "link": "https://stackoverflow.com/questions/56152712/getting-the-same-string-gene-array-in-every-object-in-the-array-dna-dynamical/56153379#56153379", "title": "Getting the same string (gene array) in every object in the array dna (dynamically allocated)", "body": "<p>To piggyback on the answer given, here is the equivalent answer, but using <code>std::vector</code> and <code>std::generate</code>:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;ctime&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;random&gt;\n\nstd::string sampleSpace(\"ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz\");\n\nclass DNA \n{\n    private:\n        std::vector&lt;char&gt; genes;\n\n    public:\n        void initialize(int len) \n        {\n            static std::default_random_engine random;\n            genes.resize(len);\n            std::uniform_int_distribution&lt;size_t&gt; distribution{0, sampleSpace.length()-1};\n            sampleSpace.at(distribution(random));\n            std::generate(genes.begin(), genes.end(), [&amp;] () \n                          { return sampleSpace.at(distribution(random)); });\n        }\n\n        void show() \n        {\n           for (auto&amp; v : genes)\n                std::cout &lt;&lt; v;\n            std::cout &lt;&lt; \"\\n\";\n        }\n};\n\nint main() \n{\n    DNA dna[10];\n    for (int i = 0; i &lt; 10; i++) \n        dna[i].initialize(10);\n    for (int i = 0; i &lt; 10; i++) \n        dna[i].show();\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/414f2568895dd446\" rel=\"nofollow noreferrer\">Live Example</a></p>\n\n<p>Note that <code>length</code> is also no longer needed.</p>\n"}], "owner": {"reputation": 41, "user_id": 11334242, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z-xfy7537ag/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfoSxWd9sskF3FrKyG_PAm19NudiA/mo/photo.jpg?sz=128", "display_name": "Hardik Sharma", "link": "https://stackoverflow.com/users/11334242/hardik-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1558005679, "creation_date": 1557933440, "last_edit_date": 1558005679, "question_id": 56152712, "link": "https://stackoverflow.com/questions/56152712/getting-the-same-string-gene-array-in-every-object-in-the-array-dna-dynamical", "title": "Getting the same string (gene array) in every object in the array dna (dynamically allocated)", "body": "<p>I have created a class called DNA, having a no argument constructor and two member functions namely initialize() and show(). The problem is when I create an\narray using new operator and call the initialize function on every object using a for loop, instead of getting different string in the member variable \"genes\", I am getting the exactly the same set of characters (array) in the genes in every object in the array. Although I seed the srand() function before initialization of the string, there is no effect seen of it.</p>\n\n<p>The code below.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;ctime&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nstring sampleSpace(\"ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz\");\n\nclass DNA {\nprivate:\n    int length;\n    char *genes;\n\npublic:\n    DNA() {\n        length = 0;\n        genes = new char[length];\n    }\n\n    void initialize(int len) {\n        srand(unsigned(time(NULL)));\n        this -&gt; length = len;\n        delete genes;\n        this -&gt; genes = new char[length];\n\n        for (int i = 0; i &lt; length; i++) {\n            *(genes + i) = sampleSpace.at(rand() % sampleSpace.length());\n        }\n    }\n\n    void show() {\n        for (int i = 0; i &lt; length; i++) {\n            cout&lt;&lt;*(genes + i);\n        }\n        cout&lt;&lt;endl;\n    }\n};\n\nint main() {\n    DNA *dna = new DNA[10];\n    DNA *temp = dna;\n    for (int i = 0; i &lt; 10; i++) {\n        (*temp).initialize(10);\n        temp++;\n    }\n    temp = dna;\n    for (int i = 0; i &lt; 10; i++) {\n        (*temp).show();\n        temp++;\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c#", "c++", "task-parallel-library", "pinvoke", "std-future"], "comments": [{"owner": {"reputation": 334, "user_id": 3310091, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8877adc61cf6b57f0d9a23a69ca170a6?s=128&d=identicon&r=PG&f=1", "display_name": "Camadas", "link": "https://stackoverflow.com/users/3310091/camadas"}, "edited": false, "score": 0, "creation_date": 1557934069, "post_id": 56152684, "comment_id": 98935160, "body": "Don&#39;t know if this will help, but the check this link: <a href=\"https://docs.microsoft.com/en-us/dotnet/standard/parallel-programming/how-to-return-a-value-from-a-task\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/dotnet/standard/parallel-programmin&zwnj;&#8203;g/&hellip;</a>"}, {"owner": {"reputation": 1249, "user_id": 1480324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb95325b1a2501c9b470488180adf2ff?s=128&d=identicon&r=PG", "display_name": "Wutz", "link": "https://stackoverflow.com/users/1480324/wutz"}, "edited": false, "score": 0, "creation_date": 1557934532, "post_id": 56152684, "comment_id": 98935428, "body": "I&#39;m confused as to your suggestion of using <code>std::async</code> to solve this. Is there some obvious solution with <code>std::async</code> that I&#39;m not seeing? Because as I see it you will have to inherit .NETs <code>Task</code> and override the Wait methods to internally wait for the cpp future or something like that. I&#39;m not even sure it&#39;s doable right now."}, {"owner": {"reputation": 1127, "user_id": 1082492, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9d9dbf72ffca81be4a50712c29414c5d?s=128&d=identicon&r=PG", "display_name": "shmuelie", "link": "https://stackoverflow.com/users/1082492/shmuelie"}, "reply_to_user": {"reputation": 1249, "user_id": 1480324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb95325b1a2501c9b470488180adf2ff?s=128&d=identicon&r=PG", "display_name": "Wutz", "link": "https://stackoverflow.com/users/1480324/wutz"}, "edited": false, "score": 0, "creation_date": 1557934745, "post_id": 56152684, "comment_id": 98935555, "body": "@Wutz I added more to clarify what I meant. Hope that helps?"}, {"owner": {"reputation": 1249, "user_id": 1480324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb95325b1a2501c9b470488180adf2ff?s=128&d=identicon&r=PG", "display_name": "Wutz", "link": "https://stackoverflow.com/users/1480324/wutz"}, "edited": false, "score": 0, "creation_date": 1557935292, "post_id": 56152684, "comment_id": 98935863, "body": "A little, but I don&#39;t see what that would accomplish. You&#39;d basically have a wrapper function that starts a &quot;waiter&quot; thread to wait for the actual work to be done. But how do you wait for the waiter thread to be done? Basically, even if you do make a second thread with <code>std::async</code>, how does the result get back to C#? Unless you start a Task in C# that calls a C++ function which then waits for the future. But then you don&#39;t use <code>std::async</code> at all. Was that what you meant?"}, {"owner": {"reputation": 1127, "user_id": 1082492, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9d9dbf72ffca81be4a50712c29414c5d?s=128&d=identicon&r=PG", "display_name": "shmuelie", "link": "https://stackoverflow.com/users/1082492/shmuelie"}, "edited": false, "score": 0, "creation_date": 1557936556, "post_id": 56152684, "comment_id": 98936544, "body": "I would pass a function pointer to a method that would call <code>SetResult</code> on a Task from the C# to the C++. Let me try clarifying some more in the question"}, {"owner": {"reputation": 1249, "user_id": 1480324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb95325b1a2501c9b470488180adf2ff?s=128&d=identicon&r=PG", "display_name": "Wutz", "link": "https://stackoverflow.com/users/1480324/wutz"}, "edited": false, "score": 0, "creation_date": 1557991972, "post_id": 56152684, "comment_id": 98953639, "body": "That does make it more clear, it&#39;s basically the same as my idea of starting a thread in C# and using a C++ method to wait for the future. Thanks for clarifying! I thought I had some basic misunderstanding :)"}], "answers": [{"comments": [{"owner": {"reputation": 1127, "user_id": 1082492, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9d9dbf72ffca81be4a50712c29414c5d?s=128&d=identicon&r=PG", "display_name": "shmuelie", "link": "https://stackoverflow.com/users/1082492/shmuelie"}, "edited": false, "score": 0, "creation_date": 1557939595, "post_id": 56154291, "comment_id": 98937962, "body": "yeah, you have pretty much read my mind. The COM idea is interesting but I need to be cross platform so no COM."}, {"owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "reply_to_user": {"reputation": 1127, "user_id": 1082492, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9d9dbf72ffca81be4a50712c29414c5d?s=128&d=identicon&r=PG", "display_name": "shmuelie", "link": "https://stackoverflow.com/users/1082492/shmuelie"}, "edited": false, "score": 0, "creation_date": 1557943901, "post_id": 56154291, "comment_id": 98939888, "body": "BTW, HRESULT codes are cross-platform, I\u2019m using them with native interop on ARM Linux. The runtime marshals E_INVALIDARG and the rest of them just fine, despite no COM support. On C++ side, I have <code>typedef uint32_t HRESULT;</code>"}, {"owner": {"reputation": 1127, "user_id": 1082492, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9d9dbf72ffca81be4a50712c29414c5d?s=128&d=identicon&r=PG", "display_name": "shmuelie", "link": "https://stackoverflow.com/users/1082492/shmuelie"}, "edited": false, "score": 0, "creation_date": 1558006554, "post_id": 56154291, "comment_id": 98961793, "body": "Yeah, lifetime management wouldn&#39;t be fun. I left it out of my example above to save space."}], "tags": [], "owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "is_accepted": false, "score": 2, "last_activity_date": 1557943852, "last_edit_date": 1557943852, "creation_date": 1557939480, "answer_id": 56154291, "question_id": 56152684, "link": "https://stackoverflow.com/questions/56152684/how-to-adapt-a-c-stdfuture-return-value-to-a-c-system-threading-tasks-task/56154291#56154291", "title": "How to adapt a C++ std::future return value to a C# System.Threading.Tasks.Task?", "body": "<p>Marshalling asynchronous completion or failure is relatively easy part. I would personally use a COM interface implemented in C#, marked <code>[InterfaceType( ComInterfaceType.InterfaceIsIUnknown )]</code>, with 2 methods like <code>setCompleted()</code> and <code>setFailed( HRESULT status )</code>, and pass it when I start the task, but that\u2019s a matter of taste.</p>\n\n<p>The problem is that C++ multithreading implementation is lacking.</p>\n\n<p>Boost is better in that regard, it\u2019s <code>future</code> class has <code>then</code> <a href=\"https://www.boost.org/doc/libs/1_70_0/doc/html/thread/synchronization.html#thread.synchronization.futures.reference.unique_future\" rel=\"nofollow noreferrer\">method that can be used</a> to propagate the status without blocking the thread.</p>\n\n<p>Currently, standard C++ futures don\u2019t offer anything comparable. I think you're out of luck.</p>\n\n<p>If you can modify that C++ library, change the API to something that makes more sense, i.e. can notify about the completion in non-blocking manner.</p>\n\n<hr>\n\n<p>Without COM, lifetime management is complicated. After you\u2019ve launched the async task but before it completes, someone on C# side needs to retain that function pointer. Here\u2019s a possible solution, note how it uses GCHandle to make callback outlive the task:</p>\n\n<pre><code>[UnmanagedFunctionPointer( CallingConvention.Cdecl )]\ndelegate void pfnTaskCallback( int hResult );\n\n[DllImport( \"my.dll\" )]\nstatic extern void launch( [MarshalAs( UnmanagedType.FunctionPtr )] pfnTaskCallback completed );\n\npublic static async Task runAsync()\n{\n    var tcs = new TaskCompletionSource&lt;bool&gt;();\n    pfnTaskCallback pfn = delegate ( int hr )\n    {\n        if( hr &gt;= 0 )   // SUCEEDED\n            tcs.SetResult( true );\n        else\n            tcs.SetException( Marshal.GetExceptionForHR( hr ) );\n    };\n    var gch = GCHandle.Alloc( pfn, GCHandleType.Normal );\n\n    try\n    {\n        launch( pfn );\n        await tcs.Task;\n    }\n    finally\n    {\n        gch.Free();\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1127, "user_id": 1082492, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9d9dbf72ffca81be4a50712c29414c5d?s=128&d=identicon&r=PG", "display_name": "shmuelie", "link": "https://stackoverflow.com/users/1082492/shmuelie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 601, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1557943852, "creation_date": 1557933358, "last_edit_date": 1557937571, "question_id": 56152684, "link": "https://stackoverflow.com/questions/56152684/how-to-adapt-a-c-stdfuture-return-value-to-a-c-system-threading-tasks-task", "title": "How to adapt a C++ std::future return value to a C# System.Threading.Tasks.Task?", "body": "<p>I am wrapping a C++ library to be used from .NET. There are functions in the C++ API that return <code>std::future</code>. I want to have the .NET proxy classes return <code>System.Threading.Tasks.Task</code>.</p>\n\n<p>I thought of adding a replacement method on the C++ side that would take in a function pointer in addition to the methods parameters. I could then start up a new thread (using <code>std::async</code> for example) and have that wait on <code>std::future::get</code>. Once <code>std::future::get</code> returned I could call the passed in function pointer. On the C# side I would pass the a pointer to a function that would complete the returned Task. Something like:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>Task CallCpp(int a, int b) {\n  TaskCompletionSource&lt;int&gt; tcs;\n  Action callback = () =&gt; tcs.SetResult(0);\n  IntPtr callbackPtr = Marshal.GetFunctionPointerForDelegate(callback);\n  CppMethod(callbackPtr, a, b);\n  return tcs.Task;\n}\n[DllExport]\nexternal void CppMethod(IntPtr callback, int a, int b);\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void CppMethod(void (*callback)(), int a, int b) {\n  std::future f = realmethod(a, b);\n  std::async([&amp;]{ f.get; callback(); });\n}\n\nstd::future realmethod(int a, int b);\n</code></pre>\n\n<p>(Yes, the code has memory management issues. It should be enough to get the idea across though)</p>\n"}, {"tags": ["c++", "arduino", "arduino-uno"], "comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 2, "creation_date": 1557933744, "post_id": 56152672, "comment_id": 98934951, "body": "Since the color space is in three dimensions if you just want to go through all the values you could use a Hilbert curve, for example. Might not look that great. It depends on why you want to go through them all and how."}], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 0, "last_activity_date": 1557935332, "creation_date": 1557935332, "answer_id": 56153257, "question_id": 56152672, "link": "https://stackoverflow.com/questions/56152672/how-to-cycle-through-full-rgb-spectrum-smoothly/56153257#56153257", "title": "How to cycle through FULL RGB spectrum smoothly", "body": "<p>Sure you can visit every point in a 256^3 space continuously.</p>\n\n<p>The easiest way is to start with a line, then turn a line into a plane, then turn a plane into a cube.</p>\n\n<pre><code>struct simple_generator {\n  int current = 0;\n  int min = 0;\n  int max = 255;\n  int direction = 1;\n  bool advance() // returns false iff we hit the end\n  {\n    if (current + direction &gt; max || current+direction &lt; min) {\n      direction = -direction;\n      return false;\n    }\n    current += direction;\n    return true;\n   }\n };\n</code></pre>\n\n<p>now let's make a generator from this.</p>\n\n<pre><code>template&lt;std::size_t N&gt;\nstruct shape_generator {\n  simple_generator state[N];\n  int operator[](std::size_t i) const { return state[i].current; }\n  bool advance() {\n    for (std::size_t i = 0; i &lt; N; ++i) {\n      if (state[i].advance())\n        return true;\n    }\n    return false;\n  }\n};\n</code></pre>\n\n<p>now what this does it advances the first simple generator until it overflows (which causes the generator stand still and reverse directions).  If it overflows, it \"recursively\" advances the next one.</p>\n\n<p>If every generator overflows, it returns false.  Otherwise it returns true.</p>\n\n<p>This will generate a pretty boring curve, as it mostly looks like \"blue goes to top, then back down, back to top, and back down\".  Only after many cycles does any green show up.  And only after many cycles of green does any red show up.</p>\n\n<p>A fancier one would use an approximation of a real space-filling curve, like the Hilbert curve.  But that should work</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/c48eb993ff617b97\" rel=\"nofollow noreferrer\">Live example with a max of 5</a>, because running it for 256^3 elements seems rude.</p>\n"}], "owner": {"reputation": 15, "user_id": 7880969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d95233da12c3349dadfe3519857f8400?s=128&d=identicon&r=PG&f=1", "display_name": "Rnovice", "link": "https://stackoverflow.com/users/7880969/rnovice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 281, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557935332, "creation_date": 1557933311, "question_id": 56152672, "link": "https://stackoverflow.com/questions/56152672/how-to-cycle-through-full-rgb-spectrum-smoothly", "title": "How to cycle through FULL RGB spectrum smoothly", "body": "<p>I'm trying to cycle through the RGB spectrum smoothly, but so far I've only been able to make code that either goes through 768 colors (256*3) smoothly or goes through 16777216 colors (256^3) with discrete jumps.</p>\n\n<p>Here's the code that runs smoothly:</p>\n\n<pre><code>void loop() { \n  setColor(255,0,0);\n  setColor(255,255,0);\n  setColor(0,255,0);\n  setColor(0,255,255);\n  setColor(0,0,255);\n  setColor(255,0,255);\n}\n\nvoid setColor(int red, int green, int blue) {\n  while ( r != red ) {\n    if ( r &lt; red ) r += 1;\n    if ( r &gt; red ) r -= 1;\n    _setColor();\n    delay(10);\n  }\n  while ( g != green){\n    if ( g &lt; green ) g += 1;\n    if ( g &gt; green ) g -= 1;\n    _setColor();\n    delay(10);\n  }\n  while ( b != blue){\n    if ( b &lt; blue ) b += 1;\n    if ( b &gt; blue ) b -= 1;\n    _setColor();\n    delay(10);\n  }\n}\n\n\nvoid _setColor() {\n  analogWrite(redPin, r);\n  analogWrite(greenPin, g);\n  analogWrite(bluePin, b); \n}\n</code></pre>\n\n<p>Here's the code that runs through every RGB value:</p>\n\n<pre><code>void loop() { \n  for (r = 0; r &lt;= 255; r++) {\n    for (g = 0; g &lt;= 255; g++) {\n      for (b = 0; b &lt;= 255; ++) {\n        analogWrite(redPin, r);\n        analogWrite(greenPin, g);\n        analogWrite(bluePin, b); \n      }\n    }\n}\n</code></pre>\n\n<p>The smooth code will never combine values in between the max/min of the colors, i.e. I never get anything like [128,64,72], only outputs like [255,64,0] or [0,0,72].</p>\n\n<p>The discrete code runs through every blue value, then increases the green value, and starts back at 0 for blue, i.e. [0,0,254] -> [0,0,255] -> [0,1,0] -> [0,1,1] which creates discrete jumps.</p>\n\n<p>I'm trying to get a smooth cycle which goes through every possible RGB value, is that even possible?</p>\n"}, {"tags": ["c++", "optimization", "quicksort", "loop-unrolling"], "comments": [{"owner": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "edited": false, "score": 0, "creation_date": 1557934709, "post_id": 56152668, "comment_id": 98935524, "body": "I&#39;m not a big fan of template metaprogramming, but then again I&#39;m not a big fan of manual optimizations either. Isn&#39;t this one of those cases where you may want to use templates to let the compiler generate this <i>for</i> you?"}, {"owner": {"reputation": 23, "user_id": 11504938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7666fbbd80bb3378dacc7244a7e8023?s=128&d=identicon&r=PG&f=1", "display_name": "jaytlang", "link": "https://stackoverflow.com/users/11504938/jaytlang"}, "reply_to_user": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "edited": false, "score": 0, "creation_date": 1557934969, "post_id": 56152668, "comment_id": 98935673, "body": "I&#39;ve heard of this here and there and it seems like a great idea - I&#39;m really unfamiliar with the concept/implementation though. I&#39;ll research further but how might one go about creating a template for this?"}, {"owner": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "edited": false, "score": 0, "creation_date": 1557935144, "post_id": 56152668, "comment_id": 98935781, "body": "I&#39;d like to give an example but I&#39;m afraid things may get mixed up. Perhaps we should use this question to solve the problem with the loop in the first place; then if you have working code you can post a separate question here (or on CodeReview) and I&#39;ll be happy to provide a templated version."}, {"owner": {"reputation": 23, "user_id": 11504938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7666fbbd80bb3378dacc7244a7e8023?s=128&d=identicon&r=PG&f=1", "display_name": "jaytlang", "link": "https://stackoverflow.com/users/11504938/jaytlang"}, "reply_to_user": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "edited": false, "score": 0, "creation_date": 1557935479, "post_id": 56152668, "comment_id": 98935969, "body": "Okay! Once I&#39;m able to get this proof of concept working and see how it impacts instruction counts, I&#39;ll ask about templating and see how much further we can go with it. Thanks!"}, {"owner": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "edited": false, "score": 0, "creation_date": 1558008210, "post_id": 56152668, "comment_id": 98962724, "body": "I couldn&#39;t leave it alone, so I did it anyway, sorry :-)  <a href=\"https://godbolt.org/z/M4b050\" rel=\"nofollow noreferrer\">godbolt.org/z/M4b050</a>"}, {"owner": {"reputation": 23, "user_id": 11504938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7666fbbd80bb3378dacc7244a7e8023?s=128&d=identicon&r=PG&f=1", "display_name": "jaytlang", "link": "https://stackoverflow.com/users/11504938/jaytlang"}, "reply_to_user": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "edited": false, "score": 0, "creation_date": 1558187009, "post_id": 56152668, "comment_id": 99022163, "body": "That&#39;s awesome - and it seems really simple to write too. Thank you! Will try later today and see it in action with the RISC compiler."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 11504938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7666fbbd80bb3378dacc7244a7e8023?s=128&d=identicon&r=PG&f=1", "display_name": "jaytlang", "link": "https://stackoverflow.com/users/11504938/jaytlang"}, "edited": false, "score": 0, "creation_date": 1557938524, "post_id": 56153788, "comment_id": 98937462, "body": "Thank you -- this runs well! The loop unrolled nicely, and for my benchmarking array I saw a decrease from 228,000 cycles to 188,000 cycles to sort. This is incredibly helpful!"}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "reply_to_user": {"reputation": 23, "user_id": 11504938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7666fbbd80bb3378dacc7244a7e8023?s=128&d=identicon&r=PG&f=1", "display_name": "jaytlang", "link": "https://stackoverflow.com/users/11504938/jaytlang"}, "edited": false, "score": 0, "creation_date": 1557955872, "post_id": 56153788, "comment_id": 98944742, "body": "@jaytlang - This is Lomuto partition, which is OK for random data, but if there are a lot of duplicates or if the data is significantly pre-ordered (or reversed), <a href=\"https://en.wikipedia.org/wiki/Quicksort#Hoare_partition_scheme\" rel=\"nofollow noreferrer\">Hoare partition</a> will be faster, and there isn&#39;t any point in unfolding it&#39;s tight loops, as there a conditional branch involved either way."}], "tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": true, "score": 0, "last_activity_date": 1557937884, "last_edit_date": 1557937884, "creation_date": 1557937412, "answer_id": 56153788, "question_id": 56152668, "link": "https://stackoverflow.com/questions/56152668/manual-loop-unrolling-within-a-c-introsort-runs-incorrectly/56153788#56153788", "title": "Manual loop unrolling within a C++ Introsort Runs Incorrectly", "body": "<p>This example code works, about 11% faster in 64 bit mode (more registers). The compiler optimized the compare and conditional copy of pj[...] via tmp to use a register (and it cycled through registers to allow some overlap).</p>\n\n<pre><code>int * Partition(int *plo, int *phi)\n{\n    int *pi = plo;\n    int *pj = plo;\n    int pvt = *phi;\n    int tmp;\n    int *ph8 = phi - 8;\n    for (pj = plo; pj &lt; ph8; pj += 8)\n    {\n        if (pj[0] &lt; pvt)\n        {\n            tmp = pj[0];\n            pj[0] = *pi;\n            *pi = tmp;\n            ++pi;\n        }\n        if (pj[1] &lt; pvt)\n        {\n            tmp = pj[1];\n            pj[1] = *pi;\n            *pi = tmp;\n            ++pi;\n        }\n        if (pj[2] &lt; pvt)\n        {\n            tmp = pj[2];\n            pj[2] = *pi;\n            *pi = tmp;\n            ++pi;\n        }\n        if (pj[3] &lt; pvt)\n        {\n            tmp = pj[3];\n            pj[3] = *pi;\n            *pi = tmp;\n            ++pi;\n        }\n        if (pj[4] &lt; pvt)\n        {\n            tmp = pj[4];\n            pj[4] = *pi;\n            *pi = tmp;\n            ++pi;\n        }\n        if (pj[5] &lt; pvt)\n        {\n            tmp = pj[5];\n            pj[5] = *pi;\n            *pi = tmp;\n            ++pi;\n        }\n        if (pj[6] &lt; pvt)\n        {\n            tmp = pj[6];\n            pj[6] = *pi;\n            *pi = tmp;\n            ++pi;\n        }\n        if (pj[7] &lt; pvt)\n        {\n            tmp = pj[7];\n            pj[7] = *pi;\n            *pi = tmp;\n            ++pi;\n        }\n    }\n    for (; pj &lt; phi; ++pj)\n    {\n        if (*pj &lt; pvt)\n        {\n            tmp = *pj;\n            *pj = *pi;\n            *pi = tmp;\n            ++pi;\n        }\n    }\n    tmp  = *phi;\n    *phi = *pi;\n    *pi  = tmp;\n    return pi;\n}\n\nvoid QuickSort(int *plo, int *phi)\n{\nint *p;\n    if (plo &lt; phi)\n    {\n        p = Partition(plo, phi);\n        QuickSort(plo, p-1);\n        QuickSort(p+1, phi);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11504938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7666fbbd80bb3378dacc7244a7e8023?s=128&d=identicon&r=PG&f=1", "display_name": "jaytlang", "link": "https://stackoverflow.com/users/11504938/jaytlang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 56153788, "answer_count": 1, "score": 1, "last_activity_date": 1557937884, "creation_date": 1557933302, "last_edit_date": 1557934272, "question_id": 56152668, "link": "https://stackoverflow.com/questions/56152668/manual-loop-unrolling-within-a-c-introsort-runs-incorrectly", "title": "Manual loop unrolling within a C++ Introsort Runs Incorrectly", "body": "<p>I'm writing a simple in-place introsort in C++, in which I'm trying to manually unroll a loop within the partition function for the sake of optimization. The program, which I'll include below, compiles but isn't able to sort a random list correctly.</p>\n\n<p>This program is being compiled down for RISC-V architecture, and even under -Ofast, (riscv-64-unknown-elf-gcc) gcc doesn't seem to be unrolling the loop on its own, making a manual check every cycle through to ensure the end condition is met. I'd like to space this check out to try and maximize performance - it's my understanding that some compilers wind up doing this by default. </p>\n\n<p>I've tried breaking this loop up into chunks of 5, to prove the concept before I go further (perhaps with multiple segments, e.g. try going through groups of 32 then try going through groups of 16 etc.), then doing the last few elements of the array as I have previously. Before unrolling the program worked fine, but now the sort fails and I'm not sure how to proceed.</p>\n\n<p>Here's the partition function in question:</p>\n\n<pre><code>int* partition(int *startptr, int *endptr) {\n    int x = *endptr; // threshold\n    int *j, tmp, tmp2, *i = startptr - 1;\n    for (j = startptr; j+5 &lt; endptr; j+=5) {\n\n        int pj = *j;\n        if (pj &lt;= x) {\n            i += 1;\n            tmp = *i;\n            *i = pj;\n            *j = tmp;\n        }\n\n        pj = j[1];\n        if (pj &lt;= x) {\n            i += 1;\n            tmp = *i;\n            *i = pj;\n            *j = tmp; }\n\n        pj = j[2];\n        if (pj &lt;= x) {\n            i += 1;\n            tmp = *i;\n            *i = pj;\n            *j = tmp; }\n\n        pj = j[3];\n        if (pj &lt;= x) {\n            i += 1;\n            tmp = *i;\n            *i = pj;\n            *j = tmp; }\n\n        pj = j[4];\n        if (pj &lt;= x) {\n            i += 1;\n            tmp = *i;\n            *i = pj;\n            *j = tmp; }\n        }\n\n    j -= 5; \n    for (int *y = j; y &lt; endptr; y++) {\n        int py = y[0];\n        if (py &lt;= x) {\n            i += 1;\n            tmp = *i;\n            *i = py;\n            *y = tmp;\n            } \n        }\n\n    int *incrementedi = i + 1;\n    tmp = *incrementedi;   //p[i+1]\n    tmp2 = *endptr; //p[end]\n    *endptr = tmp;\n    *incrementedi = tmp2;\n    return i + 1;\n }\n</code></pre>\n\n<p>At the end of the program, I print out the array and loop through, asserting that's it in ascending order as anticipated. The output appears sorted in small chunks, but it's not fully accurate, and I'm not sure how to proceed. Thank you!</p>\n\n<hr>\n\n<p>Edit for clarification: I'm verifying that the loop is not in fact unrolling by looking at the output of ...-gcc -S. The partition function is inlining nicely but it still performs the check over every iteration.</p>\n\n<p>It's worth noting that I'm using pointers whenever possible for a similar reason - the compiler isn't optimizing for the instruction savings we get when we don't have to convert array indices to actual pointers.</p>\n"}, {"tags": ["c++", "opengl", "lighting", "opengl-compat"], "comments": [{"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1557933403, "post_id": 56152563, "comment_id": 98934743, "body": "Since you are using legacy (non modern) OpenGL API you can use <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/gluLookAt.xml\" rel=\"nofollow noreferrer\">gluLookAt</a> to move eye position instead of moving model."}, {"owner": {"reputation": 27, "user_id": 11010889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1O4-jF45Qlk/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPnR4hyUvU2mUY9n_OfZSmqLNQqzQ/mo/photo.jpg?sz=128", "display_name": "zombunny", "link": "https://stackoverflow.com/users/11010889/zombunny"}, "reply_to_user": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1557933837, "post_id": 56152563, "comment_id": 98935009, "body": "The camera I am referring to moves using gluLookAt already"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1557935548, "post_id": 56152563, "comment_id": 98936001, "body": "@zombunny This dots on the ceiling are the specular highlights, isn&#39;t it. The specular light depends on the light position, the normal vector and the viewing direction. Thspecualr highlights have to change when you change the point of view."}, {"owner": {"reputation": 27, "user_id": 11010889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1O4-jF45Qlk/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPnR4hyUvU2mUY9n_OfZSmqLNQqzQ/mo/photo.jpg?sz=128", "display_name": "zombunny", "link": "https://stackoverflow.com/users/11010889/zombunny"}, "edited": false, "score": 0, "creation_date": 1557935818, "post_id": 56152563, "comment_id": 98936177, "body": "Ah I can see that being the issue, does this mean I will just have to live with it?"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1557936474, "post_id": 56152563, "comment_id": 98936510, "body": "@zombunny Yes. Do you have some kind of reflecting sphere? Lit it by a point light and move around it, then you can see the natural effect which is tried to be emulated by the <a href=\"https://en.wikipedia.org/wiki/Blinn%E2%80%93Phong_reflection_model\" rel=\"nofollow noreferrer\">Blinn\u2013Phong reflection model</a>. Of course the effect is poor, especially at the <a href=\"https://en.wikipedia.org/wiki/Gouraud_shading\" rel=\"nofollow noreferrer\">Gouraud shading</a> of the deprecated OpenGL fixed function light model."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 11010889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1O4-jF45Qlk/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPnR4hyUvU2mUY9n_OfZSmqLNQqzQ/mo/photo.jpg?sz=128", "display_name": "zombunny", "link": "https://stackoverflow.com/users/11010889/zombunny"}, "edited": false, "score": 0, "creation_date": 1557933663, "post_id": 56152696, "comment_id": 98934897, "body": "I have tried your suggestion but it does not seem to have made any visible difference"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "reply_to_user": {"reputation": 27, "user_id": 11010889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1O4-jF45Qlk/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPnR4hyUvU2mUY9n_OfZSmqLNQqzQ/mo/photo.jpg?sz=128", "display_name": "zombunny", "link": "https://stackoverflow.com/users/11010889/zombunny"}, "edited": false, "score": 0, "creation_date": 1557938850, "post_id": 56152696, "comment_id": 98937631, "body": "This dots on the ceiling are the specular highlights, isn&#39;t it. The specular light depends on the light position, the normal vector and the viewing direction. The specualr highlights have to change when you change the point of view."}], "tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 2, "last_activity_date": 1557942515, "last_edit_date": 1557942515, "creation_date": 1557933390, "answer_id": 56152696, "question_id": 56152563, "link": "https://stackoverflow.com/questions/56152563/how-to-stop-positional-light-moving-with-camera/56152696#56152696", "title": "How to stop positional light moving with camera", "body": "<p>When the light position is set by <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/glLight.xml\" rel=\"nofollow noreferrer\"><code>glLightfv(GL_LIGHT0, GL_POSITION, pos)</code></a>, then <code>pos</code> is multiplied by the current model view matrix. </p>\n\n<p>The intensity of the ambient light (<code>Ia</code>), diffuse light (<code>Id</code>) and specular light (<code>Is</code>), of the <a href=\"https://en.wikipedia.org/wiki/Blinn%E2%80%93Phong_reflection_model\" rel=\"nofollow noreferrer\">Blinn\u2013Phong reflection model</a> is calculated as follows: </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>N  ... norlmal vector \nL  ... light vector (from the vertex position to the light) \nV  ... view vector (from the vertex position to the eye)\nsh ... shininess\n\nH     = normalize(V + L)\nNdotH = max(dot(N, H), 0.0)\n\nIa    = 1\nId    = max(dot(N, L), 0.0)\nIs    = pow(NdotH, sh)\n</code></pre>\n\n<p>So the ambient light (<code>GL_AMBIENT</code>) is independent of any direction.  </p>\n\n<p>The diffuse light (<code>GL_DIFFUSE</code>) depends on the normal vector of the surface (<code>N</code>) and the direction of the incident light (<code>L</code>). It stays constant on the lit surface, independent on the point of view.</p>\n\n<p>The specular light (<code>GL_SPECULAR</code>) depends on the surfaces normal vector (<code>N</code>), the light direction (<code>L</code>). and the viewing direction (<code>V</code>). This causes that the specular highlights change, when you move in the scene, because the viewing direction to the lit surfaces changes.</p>\n\n<p>Further note that the light calculations in the deprecated OpenGL fixed function light model are done per vertex (<a href=\"https://en.wikipedia.org/wiki/Gouraud_shading\" rel=\"nofollow noreferrer\">Gouraud Shading</a>). The calculated light is interpolated on the area, between the the corners of the primitives. A <em>modern</em> implementation would be to do the light calculation per fragment (<a href=\"https://en.wikipedia.org/wiki/Phong_shading\" rel=\"nofollow noreferrer\">Phong shading</a>). \nGouraud Shading cause the spotted look of the specular highlights at the ceiling and may increase an unexpected look. Tessellating the areas in smaller peaces may improve that, but the best solution would be to switch to <em>modern</em> OpenGL write a <a href=\"https://www.khronos.org/opengl/wiki/Shader\" rel=\"nofollow noreferrer\">Shader</a> and implement a per fragment light model for your needs.</p>\n"}, {"tags": [], "owner": {"reputation": 1629, "user_id": 2927848, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7e21a18807ebac8e078272cfdeb6b7dd?s=128&d=identicon&r=PG&f=1", "display_name": "Chase R Lewis", "link": "https://stackoverflow.com/users/2927848/chase-r-lewis"}, "is_accepted": false, "score": 0, "last_activity_date": 1557944963, "creation_date": 1557944963, "answer_id": 56155618, "question_id": 56152563, "link": "https://stackoverflow.com/questions/56152563/how-to-stop-positional-light-moving-with-camera/56155618#56155618", "title": "How to stop positional light moving with camera", "body": "<p>Your pop your matrix right before setting the lighting position. As a result your position of your light is always what you set it too. You are then multiplying everything else by your View Matrix I assume. The View matrix essentially transforms the world into the view of the camera. Essentially a camera doesn't move, the world moves around the camera. Since the light is not multiplied by this view matrix ALSO you get a light that appears to maintain a constant position relative to the camera.</p>\n"}], "owner": {"reputation": 27, "user_id": 11010889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1O4-jF45Qlk/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPnR4hyUvU2mUY9n_OfZSmqLNQqzQ/mo/photo.jpg?sz=128", "display_name": "zombunny", "link": "https://stackoverflow.com/users/11010889/zombunny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "accepted_answer_id": 56152696, "answer_count": 2, "score": 1, "last_activity_date": 1558644647, "creation_date": 1557932994, "last_edit_date": 1558644647, "question_id": 56152563, "link": "https://stackoverflow.com/questions/56152563/how-to-stop-positional-light-moving-with-camera", "title": "How to stop positional light moving with camera", "body": "<p>When I rotate and/or move the camera in my openGL project, it is almost as if there is a spotlight moving with it, however I have set up my gl light to be positional and given it a static position.</p>\n\n<pre><code>void Lighting::Display()\n{\n    glPushMatrix();\n\n    glTranslatef(0.f, yoffset, 0.f); // move to start\n    glTranslatef(0.f, ceilHeight * scale[0], 0.f);\n    DrawLight();\n\n    glDisable(GL_LIGHTING);\n\n    glPushAttrib(GL_ALL_ATTRIB_BITS);\n    // Match colour of sphere to diffuse colour of light\n    glColor4fv(specular);\n    glTranslatef(0.f, -10.0f * scale[1], 0.f);\n    glutSolidSphere(5.0f * scale[0], 25, 25);\n\n    glPopAttrib();\n    glPopMatrix();\n    // Re-enable lighting after light source has been drawn\n    glEnable(GL_LIGHTING);\n\n    // Set properties GL_LIGHT0\n    glLightfv(GL_LIGHT0, GL_AMBIENT, ambient);\n    glLightfv(GL_LIGHT0, GL_DIFFUSE, diffuse);\n    glLightfv(GL_LIGHT0, GL_SPECULAR, specular);\n    //glLightf(GL_LIGHT0, GL_LINEAR_ATTENUATION, 0.0001f);\n\n    GLfloat pos[4] = { 0.f, 950.f, 0.f, 1.f };\n    glLightfv(GL_LIGHT0, GL_POSITION, pos);\n\n    // enable GL_LIGHT0 with these defined properties\n    glEnable(GL_LIGHT0);\n}\n</code></pre>\n\n<p>I expected to have a single source of light hanging in the centre of the scene, with light being emitted equally in all directions from its position \nhowever a trail of light seems to be emitted as a spotlight instead.</p>\n\n<p>Here is an image showcasing the issue: </p>\n\n<p><a href=\"https://i.imgur.com/tX7iTtZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.imgur.com/tX7iTtZ.png\" alt=\"\"></a></p>\n\n<p>As you can see there is an odd line of light being emitted.</p>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 1, "creation_date": 1557932732, "post_id": 56152442, "comment_id": 98934320, "body": "This is too complicated for stack overflow, I guess."}, {"owner": {"reputation": 1717, "user_id": 8690361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3678a10e6bc70a207a4a458c76b04c08?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/8690361/steve"}, "edited": false, "score": 2, "creation_date": 1557932780, "post_id": 56152442, "comment_id": 98934343, "body": "What exactly is the question?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1557932872, "post_id": 56152442, "comment_id": 98934418, "body": "can you break the problem down to one specific question? If not this is too braod I am afraid"}, {"owner": {"reputation": 11, "user_id": 11504589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26322d1456a8a247006cc4ff0de15192?s=128&d=identicon&r=PG&f=1", "display_name": "Archimedes724", "link": "https://stackoverflow.com/users/11504589/archimedes724"}, "edited": false, "score": 0, "creation_date": 1557934652, "post_id": 56152442, "comment_id": 98935491, "body": "I have x, y, z coordinates and would like to use them to create a 3D image, how do I edit this code to do that?"}, {"owner": {"reputation": 11, "user_id": 11504589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26322d1456a8a247006cc4ff0de15192?s=128&d=identicon&r=PG&f=1", "display_name": "Archimedes724", "link": "https://stackoverflow.com/users/11504589/archimedes724"}, "edited": false, "score": 0, "creation_date": 1557939023, "post_id": 56152442, "comment_id": 98937720, "body": "I edited the question so hopefully it is more precise. I would like to modify this code to create a 3D image instead of a 2D one"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 11504589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26322d1456a8a247006cc4ff0de15192?s=128&d=identicon&r=PG&f=1", "display_name": "Archimedes724", "link": "https://stackoverflow.com/users/11504589/archimedes724"}, "is_accepted": false, "score": 0, "last_activity_date": 1559582503, "creation_date": 1559582503, "answer_id": 56431912, "question_id": 56152442, "link": "https://stackoverflow.com/questions/56152442/how-to-create-a-3d-image-using-x-y-z-coordinates/56431912#56431912", "title": "How to create a 3D image using x y z coordinates", "body": "<p>It is impossible to create a 3D model using this code. This code is outputting a .ps file which does not support 3D figures. </p>\n"}], "owner": {"reputation": 11, "user_id": 11504589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26322d1456a8a247006cc4ff0de15192?s=128&d=identicon&r=PG&f=1", "display_name": "Archimedes724", "link": "https://stackoverflow.com/users/11504589/archimedes724"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 233, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1559582503, "creation_date": 1557932626, "last_edit_date": 1557938552, "question_id": 56152442, "link": "https://stackoverflow.com/questions/56152442/how-to-create-a-3d-image-using-x-y-z-coordinates", "title": "How to create a 3D image using x y z coordinates", "body": "<p>I was given code that generates a 2D image using x, y, z coordinates from data, <strong>I want to modify this code to create a 3D image</strong> instead. (Code source: <a href=\"https://physiology.arizona.edu/people/secomb/netflow\" rel=\"nofollow noreferrer\">https://physiology.arizona.edu/people/secomb/netflow</a>) </p>\n\n<p>The code down below creates a 2D image, <strong><em>using the x y z coordinates from the data I would like to modify the code to create a 3D image</em></strong></p>\n\n<p>For example: \nTurn this <a href=\"https://www.researchgate.net/figure/A-2D-meshed-model-of-the-flow-network-in-GAMBIT_fig12_266171604\" rel=\"nofollow noreferrer\">https://www.researchgate.net/figure/A-2D-meshed-model-of-the-flow-network-in-GAMBIT_fig12_266171604</a> </p>\n\n<p>into this <a href=\"https://www.researchgate.net/figure/Single-phase-two-component-flow-in-a-blood-vessel-network-One-dimensional-elements-are_fig4_283761787\" rel=\"nofollow noreferrer\">https://www.researchgate.net/figure/Single-phase-two-component-flow-in-a-blood-vessel-network-One-dimensional-elements-are_fig4_283761787</a></p>\n\n<p>Here is the C++ code, I am using it in visual studio 2019 </p>\n\n<pre><code>\n/**********************************************************\npicturenetwork.cpp - project network on z = 0 plane\nLabels nodes with nodvar and segments with segvar (must be float)\nColors segments according to segvar\nGenerates a postscript file\nVersion for NetFlowV1, TWS Oct. 2012\n***********************************************************/\n#define _CRT_SECURE_NO_DEPRECATE\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n#include \"nrutil.h\"\n\nvoid picturenetwork(float *nodvar, float *segvar, const char fname[])\n{\n    extern int nseg,nnod;\n    extern int *segtyp,*ista,*iend;\n    extern float *diam,**cnode;\n    int k,iseg,inod,ilevel,nlevel = 100;\n    float xmin,xmax,ymin,ymax,xs,ys,zs,picfac,red,green,blue,xz,xzmin,xzmax, zzmin, zzmax;\n    float diamfac = 1.,zcoord,zbottom,ztop,zmin,zmax;\n    FILE *ofp;\n\n//Determine range of x,y,z values\n    xmin = 1.e6;\n    xmax = -1.e6;\n    ymin = 1.e6;\n    ymax = -1.e6;\n    zmin = 1.e6;\n    zmax = -1.e6;\n    for(inod=1; inod&lt;=nnod; inod++){\n        xmin = FMIN(xmin,cnode[1][inod]);\n        xmax = FMAX(xmax,cnode[1][inod]);\n        ymin = FMIN(ymin,cnode[2][inod]);\n        ymax = FMAX(ymax,cnode[2][inod]);\n        zmin = FMIN(zmin,cnode[3][inod]);\n        zmax = FMAX(zmax,cnode[3][inod]);\n    }\n    zmin -= 1.; //make sure everything is included\n    zmax += 1.;\n\n    picfac = FMIN(500./(xmax - xmin),700./(ymax - ymin));\n    ofp = fopen(fname, \"w\");\n\n    fprintf(ofp, \"%%!PS-Adobe-2.0\\n\");\n    fprintf(ofp, \"%%%%Pages: 1\\n\");\n    fprintf(ofp, \"%%%%EndComments\\n\");\n    fprintf(ofp, \"%%%%Page: 1 1\\n\");\n    fprintf(ofp, \"/mx {%g sub %g mul 50 add} def\\n\",xmin,picfac);\n    fprintf(ofp, \"/my {%g sub %g mul 50 add} def\\n\",ymin,picfac);\n    fprintf(ofp, \"/cf {closepath fill} def\\n\");\n    fprintf(ofp, \"/cs {closepath stroke} def\\n\");\n    fprintf(ofp, \"/m {moveto} def\\n\");\n    fprintf(ofp, \"/n {newpath} def\\n\");\n    fprintf(ofp, \"/l {lineto} def\\n\");\n    fprintf(ofp, \"/sl {setlinewidth} def\\n\");\n    fprintf(ofp, \"/sc {setrgbcolor} def\\n\");\n    fprintf(ofp, \"/s {stroke} def\\n\");\n    fprintf(ofp, \"/Times-Roman findfont\\n\");\n    fprintf(ofp, \"8 scalefont\\n\");\n    fprintf(ofp, \"setfont\\n\");\n\n    fprintf(ofp, \"newpath\\n\");\n    fprintf(ofp, \"%g mx %g my m\\n\",xmin,ymin);\n    fprintf(ofp, \"%g mx %g my l\\n\",xmax,ymin);\n    fprintf(ofp, \"%g mx %g my l\\n\",xmax,ymax);\n    fprintf(ofp, \"%g mx %g my l\\n\",xmin,ymax);\n    fprintf(ofp, \"closepath\\n\");\n    fprintf(ofp, \"stroke\\n\");\n\n    fprintf(ofp, \"/Times-Roman findfont\\n\");\n    fprintf(ofp, \"4 scalefont\\n\");\n    fprintf(ofp, \"setfont\\n\");\n\n//plot vessels colored according to segvar, in order from bottom to top according to z-coordinate\n    xzmin = 1.e6;\n    xzmax = -1.e6;\n    for(iseg=1; iseg&lt;=nseg; iseg++) if(segtyp[iseg] == 4 || segtyp[iseg] == 5){\n        xzmin = FMIN(xzmin,segvar[iseg]);\n        xzmax = FMAX(xzmax,segvar[iseg]);\n    }\n    for(ilevel=1; ilevel&lt;=nlevel; ilevel++){\n        zbottom = zmin + (ilevel-1)*(zmax - zmin)/nlevel;\n        ztop = zmin + ilevel*(zmax - zmin)/nlevel;\n        for(iseg=1; iseg&lt;=nseg; iseg++) if(segtyp[iseg] == 4 || segtyp[iseg] == 5){\n            zcoord = (cnode[3][ista[iseg]] + cnode[3][iend[iseg]])/2.;\n            if(zcoord &gt;= zbottom &amp;&amp; zcoord &lt; ztop){\n                if(xzmin != xzmax) xz = (segvar[iseg] - xzmin)/(xzmax - xzmin);\n                else xz = 0.75;\n                blue = FMIN(FMAX(1.5-4.*fabs(xz-0.25), 0.), 1.);//Set up colors using Matlab 'jet' scheme\n                green= FMIN(FMAX(1.5-4.*fabs(xz-0.5), 0.), 1.);\n                red  = FMIN(FMAX(1.5-4.*fabs(xz-0.75), 0.), 1.);\n                fprintf(ofp,\"%f %f %f sc\\n\",red,green,blue);\n                fprintf(ofp,\"%g sl\\n\",picfac*diam[iseg]*diamfac);//line widths scaled up by diamfac\n                fprintf(ofp, \"%g mx %g my m \", cnode[1][ista[iseg]],cnode[2][ista[iseg]],cnode[3][ista[iseg]]);\n                fprintf(ofp, \"%g mx %g my l s \\n\", cnode[1][iend[iseg]],cnode[2][iend[iseg]],cnode[3][iend[iseg]]);\n            }\n        }\n    }\n\n</code></pre>\n\n<p>The image created is a .ps file, so far there are no errors. The <strong>main issue is the image produced is 2D and not 3D</strong>. The image is of vessels of varying colors.</p>\n"}, {"tags": ["c#", "c++", "c++-cli"], "comments": [{"owner": {"reputation": 94444, "user_id": 1663001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NBllQ.jpg?s=128&g=1", "display_name": "DavidG", "link": "https://stackoverflow.com/users/1663001/davidg"}, "edited": false, "score": 0, "creation_date": 1557931329, "post_id": 56152000, "comment_id": 98933425, "body": "What does this have to do with C#?"}, {"owner": {"reputation": 11, "user_id": 11375480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7faa01b1377af0b106c700d0894b8ab7?s=128&d=identicon&r=PG&f=1", "display_name": "builderblock", "link": "https://stackoverflow.com/users/11375480/builderblock"}, "reply_to_user": {"reputation": 94444, "user_id": 1663001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NBllQ.jpg?s=128&g=1", "display_name": "DavidG", "link": "https://stackoverflow.com/users/1663001/davidg"}, "edited": false, "score": 1, "creation_date": 1557931439, "post_id": 56152000, "comment_id": 98933484, "body": "C++/CLI, C++ interoperation between C#."}, {"owner": {"reputation": 94444, "user_id": 1663001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NBllQ.jpg?s=128&g=1", "display_name": "DavidG", "link": "https://stackoverflow.com/users/1663001/davidg"}, "edited": false, "score": 0, "creation_date": 1557931465, "post_id": 56152000, "comment_id": 98933515, "body": "There is no C# here though."}, {"owner": {"reputation": 94444, "user_id": 1663001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NBllQ.jpg?s=128&g=1", "display_name": "DavidG", "link": "https://stackoverflow.com/users/1663001/davidg"}, "edited": false, "score": 3, "creation_date": 1557931509, "post_id": 56152000, "comment_id": 98933545, "body": "However, you really need to give us a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> here, nobody wants to debug your code for you."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1557934205, "post_id": 56152000, "comment_id": 98935238, "body": "The byteArray variable is not initialized, nor does it contain the data you want to send.  You&#39;re not yet confident with C++/CLI syntax, this program does not require it.  Maybe you should do this in C# instead."}], "owner": {"reputation": 11, "user_id": 11375480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7faa01b1377af0b106c700d0894b8ab7?s=128&d=identicon&r=PG&f=1", "display_name": "builderblock", "link": "https://stackoverflow.com/users/11375480/builderblock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "closed_date": 1571245117, "answer_count": 0, "score": 0, "last_activity_date": 1557931220, "creation_date": 1557931220, "question_id": 56152000, "link": "https://stackoverflow.com/questions/56152000/c-cli-systemnullreferenceexception-where-is-it-originating-from", "closed_reason": "Duplicate", "title": "C++/CLI System::NullReferenceException - Where is it originating from?", "body": "<p>I am creating a simple client to connect to server, send it some data, and have it echoed back to the client.</p>\n\n<p>However, when I enter the port and attempt connection, a NullReferenceException is being thrown. I have looked everywhere, and can't find where it is originating from.</p>\n\n<p>Thanks!</p>\n\n<p>Here is the code for the client:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;string.h&gt;\n#include \"client.h\"\n\nusing namespace System::Text;\nusing namespace client;\n\nint main(array&lt;System::String ^&gt; ^args) {\n    IPAddress^                  IP_obj;\n    IPEndPoint^                 ipEndPoint;\n    Socket^                     client_sock;\n    NetworkStream^              netStream;\n    BinaryWriter^               bw;\n    BinaryReader^               br;\n    std::string                 ip_address;\n    unsigned int                port;\n    System::String^             data;\n    System::String^             result;\n    array&lt;unsigned char&gt;^       byteArray; \n    int                         bytes;\n\n    // mainly server port &amp; address input stuff... boring\n    Console::WriteLine(\"Input host to connect to (IPv4 format): \");\n    client_functions::setIP(IP_obj);\n    Console::WriteLine(\"Input port (must be between {0} amd {1}): \", IPEndPoint::MinPort, IPEndPoint::MaxPort); std::cin &gt;&gt; port;\n    if (port &lt; IPEndPoint::MinPort || port &gt; IPEndPoint::MaxPort) {\n        Console::WriteLine(\"Invalid port... exiting.\");\n        exit(CLIENT_INVALID_PORT);\n    }\n\n    // client connection handlers\n    client_functions::setEndPoint(ipEndPoint, port, IP_obj);\n    client_functions::createSocket(client_sock);\n    client_functions::connectSocket(client_sock, ipEndPoint);\n    client_functions::setupNetStream(netStream, br, bw, client_sock);\n\n    while (true) {\n        // ask user for data to input\n        Console::Write(\"Data: \");\n        data = Console::ReadLine();\n        if (data == \"/E\") {\n            break;\n        }\n\n        // begin sending data\n        bw-&gt;Write(byteArray, 0, byteArray-&gt;Length);\n        Console::WriteLine(\"Sent data: {0}\", data);\n\n        // begin reading data\n        bytes = br-&gt;Read(byteArray, 0, byteArray-&gt;Length);\n        result = String::Empty; result = Encoding::ASCII-&gt;GetString(byteArray, 0, bytes);\n\n        // print received data\n        Console::WriteLine(\"Received data: {0}\", result);\n    }\n\n    // begin client shutdown process\n    client_sock-&gt;Shutdown(SocketShutdown::Both);\n    Console::WriteLine(\"Notifying server we are shutting down...\");\n    client_sock-&gt;Close();\n    netStream-&gt;Close();\n    Console::WriteLine(\"Shutting client down...\");\n    exit(CLIENT_SUCCESS);\n}\n\n...and here is the namespace structure I use for functions and errors:\n/*\n    [i]API[/i] for client related functions and information\n*/\n\nusing namespace System;\nusing namespace System::Net;\nusing namespace System::Net::Sockets;\nusing namespace System::IO;\nusing namespace System::Threading;\n\nnamespace client {\n    // quite self-explanatory...\n    enum client_errors {\n        CLIENT_SUCCESS = 0x00, // successful\n        CLIENT_INVALID_PORT = 0x01, // thrown if an invalid port is entered\n        CLIENT_IOEXCEPTION = 0x02, // thrown if an IO exception occurs (waste of an error)\n        CLIENT_SOCKET_ERROR = 0x03, // thrown if unable to connect to host\n        CLIENT_INVALID_ADDRESS = 0x04 // thrown if an invalid IP address is entered\n    };\n\n    ref class client_functions {\n    public: // set the IP to connect to via their input address and IPAddress object\n    static void setIP(IPAddress^ &amp;IPAddress_obj) {\n        try {\n            IPAddress_obj = IPAddress::Parse(Console::ReadLine());\n        } catch (FormatException^ e) {\n            exit(CLIENT_INVALID_ADDRESS);\n        }\n    }\n        // for user to set IP endpoint to eventually connect to\n    static void setEndPoint(IPEndPoint^ &amp;IPEP_obj, unsigned port, IPAddress^ ip_obj) {\n        IPEP_obj = gcnew IPEndPoint(ip_obj, port);\n    }\n        // for user to create a TCP Stream socket, could add more prototypes but meh\n    static void createSocket(Socket^ &amp;sock) {\n        sock = gcnew Socket(AddressFamily::InterNetwork, SocketType::Stream, ProtocolType::Tcp);\n    }\n        // for user to connect to host defined in EndPoint object\n    static void connectSocket(Socket^ sock, IPEndPoint^ IPEP_obj) {\n        try {\n            sock-&gt;Connect(IPEP_obj);\n        } catch (SocketException^ e) {\n            Console::WriteLine(\"Error connecting to host...\");\n            exit(CLIENT_SOCKET_ERROR);\n        }\n    }\n        // for user to setup the netstream to read and write to the stream\n    static void setupNetStream(NetworkStream^ &amp;netstream, BinaryReader^ &amp;bReader, BinaryWriter^ &amp;bWriter, Socket^ sock) {\n        netstream = gcnew NetworkStream(sock);\n        bReader = gcnew BinaryReader(netstream);\n        bWriter = gcnew BinaryWriter(netstream);\n    }\n        // \n    static void messageToBytes(System::String^ dataToSend, array&lt;unsigned char&gt;^ &amp;data) {\n        data = Text::ASCIIEncoding::ASCII-&gt;GetBytes(dataToSend);\n    }\n    };\n}```\n</code></pre>\n"}, {"tags": ["c++", "ld"], "answers": [{"tags": [], "owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "is_accepted": true, "score": 0, "last_activity_date": 1557941631, "last_edit_date": 1557941631, "creation_date": 1557940964, "answer_id": 56154655, "question_id": 56151965, "link": "https://stackoverflow.com/questions/56151965/g-error-with-lxnt-flag-after-xlnt-is-installed/56154655#56154655", "title": "G++ error with -lxnt flag after xlnt is installed", "body": "<p>The target you are building <code>BOF-debug-static</code> is evidently one that requests \neither a fully static linkage, with the <code>-static</code> linkage option, or possibly one that\nrequests static linkage specifically of <code>libxlnt</code>, with a linkage option such as:</p>\n\n<pre><code>-Wl,-Bstatic -lxlnt -Wl,-Bdynamic\n</code></pre>\n\n<p>Since, as you observed, <code>libxlnt</code> by default provides only a shared/dynamic library <code>libzlint.so</code> ( -> <code>libzlint.so.X.Y.Z)</code>,\nand no static library <code>libzlnt.a</code>, the linker ignores the the shared library when\nrequired to link <code>-lxlnt</code> statically and says:</p>\n\n<pre><code>/usr/bin/ld: cannot find -lxlnt\n</code></pre>\n\n<p>You cannot link a shared library statically.</p>\n\n<p>However, if you configure the CMake build system with:</p>\n\n<pre><code>cmake -DSTATIC=ON [your previous options...]\n</code></pre>\n\n<p>then <code>make</code> will build a static library and running <code>make install</code> (as root) will create <code>/usr/local/lib/libxlnt.a</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 11470887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67475a1bd68a6c91d22d94508a90ccbe?s=128&d=identicon&r=PG&f=1", "display_name": "jaysun_n", "link": "https://stackoverflow.com/users/11470887/jaysun-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 56154655, "answer_count": 1, "score": 0, "last_activity_date": 1557941839, "creation_date": 1557931120, "last_edit_date": 1557941839, "question_id": 56151965, "link": "https://stackoverflow.com/questions/56151965/g-error-with-lxnt-flag-after-xlnt-is-installed", "title": "G++ error with -lxnt flag after xlnt is installed", "body": "<p>I am trying to install the xlnt library on Ubuntu 18. I have installed xlnt exactly as the <a href=\"https://github.com/tfussell/xlnt/blob/master/docs/introduction/Installation.md\" rel=\"nofollow noreferrer\">instructions</a> say on the repo. When I try to compile my code, the following error pops up:</p>\n\n<pre><code>/usr/bin/ld: cannot find -lxlnt\ncollect2: error: ld returned 1 exit status\nmakefile:204: recipe for target 'BOF-debug-static' failed\nmake: *** [BOF-debug-static] Error 1\n</code></pre>\n\n<p>I have been installing other libraries to get the code working, and I've noticed that the other libraries are creating .a files at /usr/local/lib along with a few other .la, and .so files. When I install xlnt, it is not creating any .a files, but does create a .so and .so.1.2 files. Not sure if that is relevant, but it's something I've noticed.</p>\n\n<p>How do I make xlnt discoverable to g++ and get the -lxlnt flag to work?</p>\n"}, {"tags": ["c++", "c", "casting", "signed", "unsigned-char"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1557930916, "post_id": 56151841, "comment_id": 98933152, "body": "Note that <code>char</code> may be <code>signed</code> or <code>unsigned</code> (up to your implementation) and in both case <code>char</code> is a distinct type from both <code>signed char</code> and <code>unsigned char</code>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1557931031, "post_id": 56151841, "comment_id": 98933222, "body": "Generally you should treat any C-style cast as a red flag that you&#39;re doing something wrong."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1557931065, "post_id": 56151841, "comment_id": 98933242, "body": "As for your problem, can you please copy-paste the <i>full</i> and *complete error output, including any possible informational notes."}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 4, "creation_date": 1557931150, "post_id": 56151841, "comment_id": 98933303, "body": "Please, provide <a href=\"https://stackoverflow.com/help/reprex\">MCVE</a>. In general, you should have no problem with casting to <code>const char *</code>."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1557931337, "post_id": 56151841, "comment_id": 98933430, "body": "Why don&#39;t you try to <code>CANMessage(id, reintepret_cast&lt;char*&gt;(&amp;data[0]), len) </code>. In fact there is no binary difference between <code>char</code> and <code>uint8_t</code> data types. Both are 8-bits, so casting is safe if you working with arrays of characters or some RGBA pixmaps. Off cause if you are working with integer values, i.e. you have something like <code>if(a[i] &gt; b[i])</code> you&#39;d better not to cast."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1557931351, "post_id": 56151841, "comment_id": 98933437, "body": "<code>reinterpret_cast&lt;const char*&gt;(dta.data())</code> and <code>static_cast&lt;char&gt;(dta.size())</code> could do it."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1557931373, "post_id": 56151841, "comment_id": 98933448, "body": "What is <code>uint_8</code>?"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1557931523, "post_id": 56151841, "comment_id": 98933551, "body": "@Eljay Good catch. :-) Eskey: Your code does not match the error message."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1557931980, "post_id": 56151841, "comment_id": 98933867, "body": "I could not reproduce the problem with your example (with missing parts to make it complete): <a href=\"http://coliru.stacked-crooked.com/a/1b54a11a5b0a341f\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/1b54a11a5b0a341f</a>"}, {"owner": {"reputation": 97, "user_id": 11351033, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nd9yqoe_Cg0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reRdqRtKvVSDu6uhcXcNU9htaoq-Q/mo/photo.jpg?sz=128", "display_name": "Eskey Eski", "link": "https://stackoverflow.com/users/11351033/eskey-eski"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1557933694, "post_id": 56151841, "comment_id": 98934924, "body": "@eerorika I was only able to reproduce it inside a C++98 mbed compiler, I tried my problem in visual studio and it was fine, with no errors, I didn&#39;t mention it as just the small mbed environment can check it using that online compiler. I ended up taking a different approach, my foo function now takes char* and I cast to char* when I call instead (char*)&amp;dta[0]. CANMessage can therefore just use the foo&#39;s char*. I was able to solve my problem, and luckily char* is just a buffer so casting should be harmless, per Michael&#39;s explanation, luckily."}], "answers": [{"comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1557933382, "post_id": 56152216, "comment_id": 98934725, "body": "Both C and C++ require that all flavors of <code>char</code> be at least 8 bits. That comes from the definition of <code>CHAR_BIT</code> in <code>&lt;limits.h&gt;</code> which comes into C++ through <code>&lt;climits&gt;</code>."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1557934069, "post_id": 56152216, "comment_id": 98935159, "body": "@PeteBecker I don&#39;t know of any systems where <code>char</code>s have less than 8 bits myself, but there are plenty of other discussions here on SO mentioning both 6 and 7 bit char historical machines. One can probably disregard those Today though :-) ... but even if both <code>uint8_t</code> and <code>char</code> have 8 bits - they are not necessarily bit compatible as  Fran&#231;ois Andrieux points out."}], "tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": false, "score": 1, "last_activity_date": 1557934142, "last_edit_date": 1557934142, "creation_date": 1557931841, "answer_id": 56152216, "question_id": 56151841, "link": "https://stackoverflow.com/questions/56151841/change-uint8-t-to-char/56152216#56152216", "title": "Change uint8_t* to char*?", "body": "<p>Since you are in an environment where <code>std::uint8_t</code> is available, the <code>char</code> types must be max 8 bits, but just to make sure you're not on a machine with 7 bit char's, add a <code>static_assert</code>.</p>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/language/reinterpret_cast\" rel=\"nofollow noreferrer\">reinterpret_cast</a> the <code>uint8_t*</code> to <code>const char*</code> and <a href=\"https://en.cppreference.com/w/cpp/language/static_cast\" rel=\"nofollow noreferrer\">static_cast</a> the size (<code>size_t</code>) of the vector to <code>char</code>.</p>\n\n<pre><code>void foo(unsigned _id, const std::vector&lt;uint8_t&gt;&amp; dta) {\n    static_assert(CHAR_BIT == 8, \"Strange char\");\n\n    CANMessage(\n        _id,\n        reinterpret_cast&lt;const char*&gt;(dta.data()),\n        static_cast&lt;char&gt;(dta.size())\n    );\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1557932386, "post_id": 56152217, "comment_id": 98934122, "body": "&quot;<code>std::uint8_t</code> is equal to <code>unsigned char</code>&quot; Is this required? Could it legally be an extended integer type?"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1557932719, "post_id": 56152217, "comment_id": 98934311, "body": "@Fran&#231;oisAndrieux if <code>std::uint8_t</code> exists then <code>unsigned char</code> must be an unsigned 8-bit type. If <code>CHAR_BIT &gt; 8</code> then uint8_t can&#39;t exist"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1557932827, "post_id": 56152217, "comment_id": 98934382, "body": "@phuclv I agree that if <code>std::uint8_t</code> is defined, necessarily <code>unsigned char</code> is a compatible candidate for it. What I&#39;m wondering is if it&#39;s required that <code>std::uint8_t</code> actually be <code>unsigned char</code>. I don&#39;t see why an implementation would do otherwise, even if another <code>unsigned</code> 8 bit integer type is provided. You might as well just define it to be <code>unsigned char</code> but I&#39;m not sure if it <i>has</i> to."}, {"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1557932888, "post_id": 56152217, "comment_id": 98934424, "body": "<code>std::uint8_t</code> is a defined type, <code>unsigned char</code> is a built in type. Defined types must somehow be defined with the aid of build in types. If not using <code>unsigned char</code>, what else could be used?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1557932962, "post_id": 56152217, "comment_id": 98934471, "body": "@MichaelChourdakis It could be an <a href=\"https://timsong-cpp.github.io/cppwp/basic.fundamental#def:extended_signed_integer_type\" rel=\"nofollow noreferrer\">extended integer type</a>, they qualify as a fundamental integer type. For example, my compiler might have a <code>__unsigned_byte</code> type or something for reasons I can&#39;t imagine. Edit : There&#39;s also <code>char8_t</code> that has the same size, signedness and alignment as <code>unsigned char</code> since C++20."}, {"owner": {"reputation": 97, "user_id": 11351033, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nd9yqoe_Cg0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reRdqRtKvVSDu6uhcXcNU9htaoq-Q/mo/photo.jpg?sz=128", "display_name": "Eskey Eski", "link": "https://stackoverflow.com/users/11351033/eskey-eski"}, "edited": false, "score": 0, "creation_date": 1557933298, "post_id": 56152217, "comment_id": 98934680, "body": "@MichaelChourdakis Okay I see. It must be a buffer as I have already successfully used casting to char to send a message using the can protocol. Preferably the API would be unsigned char*, unfortunately this isn&#39;t the case."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1557933324, "post_id": 56152217, "comment_id": 98934695, "body": "@Fran&#231;oisAndrieux Not having 8-bit <code>char</code> types but having fixed-width 8-bit extended <code>int</code> types would be somewhat <i>strange</i>.  But yeah, it seems legal."}], "tags": [], "owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "is_accepted": true, "score": 2, "last_activity_date": 1557932427, "last_edit_date": 1557932427, "creation_date": 1557931841, "answer_id": 56152217, "question_id": 56151841, "link": "https://stackoverflow.com/questions/56151841/change-uint8-t-to-char/56152217#56152217", "title": "Change uint8_t* to char*?", "body": "<p><code>std::uint8_t</code> \u03b9s equal to <code>unsigned char</code>.</p>\n\n<p>This is different from plain char or signed char, but all of them are 8 bit, therefore casting would techically work.</p>\n\n<p>It's common that many functions that would otherwise need a \"buffer\" have a <code>char*</code> in their definition instead of the proper <code>unsigned char*</code>. Therefore, casting would most probably be harmless.</p>\n\n<p>In the case that the function actually wants characters but not a buffer, then you have a problem because the types are different, and whether you will have an issue or not is undefined.</p>\n"}], "owner": {"reputation": 97, "user_id": 11351033, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nd9yqoe_Cg0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reRdqRtKvVSDu6uhcXcNU9htaoq-Q/mo/photo.jpg?sz=128", "display_name": "Eskey Eski", "link": "https://stackoverflow.com/users/11351033/eskey-eski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 415, "favorite_count": 0, "accepted_answer_id": 56152217, "answer_count": 2, "score": 0, "last_activity_date": 1557934142, "creation_date": 1557930704, "last_edit_date": 1557932789, "question_id": 56151841, "link": "https://stackoverflow.com/questions/56151841/change-uint8-t-to-char", "title": "Change uint8_t* to char*?", "body": "<p>I have an API which requests a <code>char*</code>, this is my API function:</p>\n\n<pre><code>CANMessage(unsigned _id,  const char* _data, char _len = 8)\n</code></pre>\n\n<p>More information available here: <a href=\"https://os.mbed.com/docs/mbed-os/v5.11/mbed-os-api-doxy/classmbed_1_1_c_a_n_message.html\" rel=\"nofollow noreferrer\">https://os.mbed.com/docs/mbed-os/v5.11/mbed-os-api-doxy/classmbed_1_1_c_a_n_message.html</a></p>\n\n<p>I would like to call this function from within another function, but I am getting confused about <code>const char*</code> and casting. I want to call this function from function <code>foo()</code>, like so:</p>\n\n<pre><code>void foo(unsigned int id, /*???*/ data, char len) {\n    CANMessage(id, data, len)\n}\n</code></pre>\n\n<p>So I need to pass id, data and len to function foo. My problem is that the <code>data</code> coming in is a <code>uint8_t</code> type. I got a vector of <code>uint8_t</code>, where the address of the first element is the one I need to pass:</p>\n\n<pre><code>vector&lt;uint8_t&gt; dta;\n</code></pre>\n\n<p>Which I tried to pass as <code>&amp;dta[0]</code>: <code>foo(idNo, &amp;dta[0], length)</code></p>\n\n<p>With the foo function as so:</p>\n\n<pre><code>void foo(unsigned int id, uint8_t* data, char len) {\n    CANMessage(id, (char*)data, len)\n}\n</code></pre>\n\n<p>But I get \"Argument of type std::uint8_t * is incompatible with parameter of type char*</p>\n\n<p>How do I pass it as <code>const char*</code> when function <code>foo</code>, which calls it, accepts <code>uint8_t*</code>?</p>\n\n<p>Please note I can't change types, dta has to stay <code>vector&lt;uint8_t&gt;</code>.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 1, "creation_date": 1557930609, "post_id": 56151795, "comment_id": 98932955, "body": "Renaming is not possible when files reside in different volumes, because the file directory on each volume is different. It&#39;s like &quot;renaming&quot; a tomato from one fridge to another, somehow you must transfer it first. When it&#39;s one volume, renaming only changes an index."}, {"owner": {"reputation": 1200, "user_id": 3765267, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ea840c89a478be4904a6e78f29f22eb2?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Dyagilev", "link": "https://stackoverflow.com/users/3765267/alexander-dyagilev"}, "reply_to_user": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 1, "creation_date": 1557930650, "post_id": 56151795, "comment_id": 98932981, "body": "I know it! I&#39;m talking about c++ rename function implementation! Read question please."}, {"owner": {"reputation": 70686, "user_id": 11683, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d4d284c3c214d52f004df795aee394e3?s=128&d=identicon&r=PG", "display_name": "GSerg", "link": "https://stackoverflow.com/users/11683/gserg"}, "edited": false, "score": 1, "creation_date": 1557930701, "post_id": 56151795, "comment_id": 98933019, "body": "<code>Is there a way to avoid this?</code> - determine if the paths belong to different drives before calling rename, and if they do, do not call rename?"}, {"owner": {"reputation": 1200, "user_id": 3765267, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ea840c89a478be4904a6e78f29f22eb2?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Dyagilev", "link": "https://stackoverflow.com/users/3765267/alexander-dyagilev"}, "edited": false, "score": 1, "creation_date": 1557930733, "post_id": 56151795, "comment_id": 98933040, "body": "Is there a crossplatform way to determine this? I don&#39;t think it&#39;s a simple task."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1557930741, "post_id": 56151795, "comment_id": 98933042, "body": "Just check if the paths have the same volume before calling the fucntion"}, {"owner": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 0, "creation_date": 1557931063, "post_id": 56151795, "comment_id": 98933241, "body": "&quot;drives&quot; are a concept peculiar to windows. This won&#39;t happen on *nix OSs (like Linux, osx, Android), so just check it when you determine you&#39;re on windows."}, {"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 3, "creation_date": 1557931116, "post_id": 56151795, "comment_id": 98933278, "body": "It&#39;s volumes, not letter drives. Even if linux, a &quot;rename&quot; will still copy+delete if the file is to be placed on a different volume, no matter the mount point."}, {"owner": {"reputation": 70686, "user_id": 11683, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d4d284c3c214d52f004df795aee394e3?s=128&d=identicon&r=PG", "display_name": "GSerg", "link": "https://stackoverflow.com/users/11683/gserg"}, "edited": false, "score": 0, "creation_date": 1557931165, "post_id": 56151795, "comment_id": 98933314, "body": "In order to call <code>rename</code>, you must first compose the paths according to the rules of the OS, as it is stated in the documentation. Hence, you must be aware prior to calling <code>rename</code> which OS you are on, so that you can follow the path composition rules. Hence, you should be able to tell from the paths whether they belong to the same volume, by picking the way of telling that corresponds to the OS."}, {"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "reply_to_user": {"reputation": 70686, "user_id": 11683, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d4d284c3c214d52f004df795aee394e3?s=128&d=identicon&r=PG", "display_name": "GSerg", "link": "https://stackoverflow.com/users/11683/gserg"}, "edited": false, "score": 0, "creation_date": 1557931219, "post_id": 56151795, "comment_id": 98933368, "body": "@GSerg this is generally not easy on cases when mount points are, in linux how do you know if /etc and /dev are belonging to the same volume? You <i>cannot</i> deduce volume information from just a path."}, {"owner": {"reputation": 70686, "user_id": 11683, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d4d284c3c214d52f004df795aee394e3?s=128&d=identicon&r=PG", "display_name": "GSerg", "link": "https://stackoverflow.com/users/11683/gserg"}, "reply_to_user": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1557931330, "post_id": 56151795, "comment_id": 98933427, "body": "@MichaelChourdakis I understand you cannot deduce from paths alone, but there must be a platform-specific way to ask the OS, and you should be able to pick the correct platform-specific way because you have to be aware of your OS before calling <code>rename</code>. E.g. for Windows it would be <a href=\"https://devblogs.microsoft.com/oldnewthing/20170707-00/?p=96555\" rel=\"nofollow noreferrer\">devblogs.microsoft.com/oldnewthing/20170707-00/?p=96555</a>."}, {"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "reply_to_user": {"reputation": 70686, "user_id": 11683, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d4d284c3c214d52f004df795aee394e3?s=128&d=identicon&r=PG", "display_name": "GSerg", "link": "https://stackoverflow.com/users/11683/gserg"}, "edited": false, "score": 0, "creation_date": 1557931396, "post_id": 56151795, "comment_id": 98933465, "body": "@GSerg yes, in Windows there is <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/fileapi/nf-fileapi-getvolumepathnamew\" rel=\"nofollow noreferrer\">GetVolumePathNameW</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1200, "user_id": 3765267, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ea840c89a478be4904a6e78f29f22eb2?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Dyagilev", "link": "https://stackoverflow.com/users/3765267/alexander-dyagilev"}, "edited": false, "score": 1, "creation_date": 1557930915, "post_id": 56151872, "comment_id": 98933150, "body": "What about macOS, Linux, Android?"}, {"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "reply_to_user": {"reputation": 1200, "user_id": 3765267, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ea840c89a478be4904a6e78f29f22eb2?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Dyagilev", "link": "https://stackoverflow.com/users/3765267/alexander-dyagilev"}, "edited": false, "score": 0, "creation_date": 1557930982, "post_id": 56151872, "comment_id": 98933193, "body": "Someone that knows these OSes might post an answer, if it exists."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 1200, "user_id": 3765267, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ea840c89a478be4904a6e78f29f22eb2?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Dyagilev", "link": "https://stackoverflow.com/users/3765267/alexander-dyagilev"}, "edited": false, "score": 0, "creation_date": 1557937477, "post_id": 56151872, "comment_id": 98936973, "body": "@AlexanderDyagilev I don&#39;t think you&#39;ll have that problem there. This &#39;feature&#39; of <code>rename</code> is specific to Windows."}, {"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 1, "creation_date": 1557937526, "post_id": 56151872, "comment_id": 98936992, "body": "@PaulSanders it&#39;s the same &quot;feature&quot; no matter the OS. It&#39;s physical limitation."}], "tags": [], "owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "is_accepted": false, "score": 2, "last_activity_date": 1557932127, "last_edit_date": 1557932127, "creation_date": 1557930830, "answer_id": 56151872, "question_id": 56151795, "link": "https://stackoverflow.com/questions/56151795/forbid-rename-to-copy-a-file/56151872#56151872", "title": "Forbid &quot;rename&quot; to copy a file", "body": "<p>If in Windows, you can use <a href=\"https://docs.microsoft.com/el-gr/windows/desktop/api/winbase/nf-winbase-movefileexa\" rel=\"nofollow noreferrer\">MoveFileEx</a> without MOVEFILE_COPY_ALLOWED.\nYou can also use <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/fileapi/nf-fileapi-getvolumepathnamew\" rel=\"nofollow noreferrer\">GetVolumePathNameW</a> to determine whether source and destination belong to the same volume and, therefore, if a copy would be (probably) needed or not. </p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1557945496, "post_id": 56155233, "comment_id": 98940573, "body": "I like this! That <code>cppmain</code> is nice too (if a little copy/allocate-happy - do a <code>string_view</code> version!)"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1557945668, "post_id": 56155233, "comment_id": 98940648, "body": ":-) Thank&#39;s! Yes, not the most effective program startup, but nice to deal with afterwards. Will look into a <code>string_view</code> version."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1557945877, "post_id": 56155233, "comment_id": 98940729, "body": "<a href=\"https://coliru.stacked-crooked.com/a/43a1a34c2bd9fb6e\" rel=\"nofollow noreferrer\">Boom!</a> Drop-in. :) Sadly the vector still allocates but only once and only cheaply so yay"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1557946252, "post_id": 56155233, "comment_id": 98940888, "body": ":-D Nice, but I&#39;d rather have <code>std::string&amp;</code> or <code>filesystem::path&amp;</code> as arguments to <code>my_rename</code>. Perhaps solvable without too much fuzz."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1557962295, "post_id": 56155233, "comment_id": 98946246, "body": "Why do you want to create a <code>std::string</code> when you don&#39;t need to? A <code>std::string_view</code> can be created from a literal or from an existing <code>std::string</code>, so you don&#39;t lose any functionality but potentially lose a completely unnecessary and very temporary dynamic allocation and string copy! That&#39;s why they added it :) IMO a <code>const std::string&amp;</code> function arg should pretty much always be a <code>const std::string_view</code> now. Exceptions include reeeeeally tight loops on platforms where adding a &quot;length&quot; argument (i.e. one pointer+size, versus just a reference i.e. pointer) is prohibitive.. but that&#39;s rare"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1557996668, "post_id": 56155233, "comment_id": 98956179, "body": "Oh, ok, makes sense! Updated! Excellent, I&#39;ll use this pattern in the future."}], "tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": true, "score": 3, "last_activity_date": 1557996591, "last_edit_date": 1557996591, "creation_date": 1557943358, "answer_id": 56155233, "question_id": 56151795, "link": "https://stackoverflow.com/questions/56151795/forbid-rename-to-copy-a-file/56155233#56155233", "title": "Forbid &quot;rename&quot; to copy a file", "body": "<p>You could try to create a hard link to the new destination. If it fails, it fails. If it succeeds, you remove the original file. I verified that this works for files (not directories) on Linux (g++ 8.3.1 and clang++ 7.0.1) and Windows (VS2019) and expect it to work on most of the other modern OS:es too. C++17 (or <code>boost</code> for older compilers) is required.</p>\n\n<pre><code>#include &lt;filesystem&gt;\n#include &lt;iostream&gt;\n#include &lt;string_view&gt;\n#include &lt;vector&gt;\n\nbool my_rename(const std::string_view from, const std::string_view to,\n               std::error_code&amp; ec)\n{\n    // create hard link\n    std::filesystem::create_hard_link(from, to, ec);\n\n    if(ec) return false; // it failed\n\n    // remove the original\n    return std::filesystem::remove(from, ec);\n}\n\nint cppmain(const std::string_view program, std::vector&lt;std::string_view&gt; args) {\n    if(args.size() != 2) {\n        std::cerr &lt;&lt; \"USAGE: \" &lt;&lt; program &lt;&lt; \" &lt;source&gt; &lt;target&gt;\\n\";\n        return 1;\n    }\n\n    std::error_code ec;\n\n    if(my_rename(args[0], args[1], ec) == false) {\n        std::cerr &lt;&lt; program &lt;&lt; \": \" &lt;&lt; ec &lt;&lt; \"\\n\";\n        return 1;\n    }\n\n    return 0;\n}\n\nint main(int argc, char* argv[]) {\n    return cppmain(argv[0], {argv + 1, argv + argc});\n}\n</code></pre>\n"}], "owner": {"reputation": 1200, "user_id": 3765267, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ea840c89a478be4904a6e78f29f22eb2?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Dyagilev", "link": "https://stackoverflow.com/users/3765267/alexander-dyagilev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "accepted_answer_id": 56155233, "answer_count": 2, "score": 1, "last_activity_date": 1557996591, "creation_date": 1557930558, "question_id": 56151795, "link": "https://stackoverflow.com/questions/56151795/forbid-rename-to-copy-a-file", "title": "Forbid &quot;rename&quot; to copy a file", "body": "<p><a href=\"http://www.cplusplus.com/reference/cstdio/rename/\" rel=\"nofollow noreferrer\">rename</a> actually copies file (at least on <code>Windows 10</code> platform) if the <code>newname</code> points to a different drive. </p>\n\n<p>Is there a way to avoid this? I would like it to just fail in this case.</p>\n\n<p>Let's suppose I want to move 100 GB file. I would like to just rename it, if possible. If not - I would like to use my own copy function and show the user progress of the operation.</p>\n"}, {"tags": ["c++", "odbc", "zlib", "kylin"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11531199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b34a5c55e53664797301c5a035217c95?s=128&d=identicon&r=PG&f=1", "display_name": "edouardzyc", "link": "https://stackoverflow.com/users/11531199/edouardzyc"}, "is_accepted": false, "score": 0, "last_activity_date": 1558407329, "creation_date": 1558407329, "answer_id": 56230477, "question_id": 56151733, "link": "https://stackoverflow.com/questions/56151733/kylin-odbc-driver-c-solution-fails-to-build/56230477#56230477", "title": "Kylin odbc driver C++ solution fails to build", "body": "<p>The Error looks like your <strong><em>zlibstat.lib</em></strong> cannot be found.</p>\n\n<p>Please check whether <strong><em>ZLIB_HOME</em></strong> is set in Environment Variables and whether project zlib is well compiled.</p>\n\n<p>You can verify with check in file <strong><em>Common.vcxproj</em></strong> .<br>\nFor example you want to build with Release|x64, please check whether can find <strong><em>zlibstat.lib</em></strong> in location $(ZLIB_HOME)\\contrib\\vstudio\\vc11\\x64\\ZlibStatRelease.</p>\n"}], "owner": {"reputation": 11, "user_id": 5461183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52231122caa0bf57b376d58d1fd7a20f?s=128&d=identicon&r=PG&f=1", "display_name": "markopolo", "link": "https://stackoverflow.com/users/5461183/markopolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1558407329, "creation_date": 1557930421, "last_edit_date": 1557935591, "question_id": 56151733, "link": "https://stackoverflow.com/questions/56151733/kylin-odbc-driver-c-solution-fails-to-build", "title": "Kylin odbc driver C++ solution fails to build", "body": "<p>I am unable to build <strong>Kylin ODBC</strong> C++ solution. </p>\n\n<p>I followed the instructions found <a href=\"https://github.com/apache/kylin/blob/master/odbc/README.m\" rel=\"nofollow noreferrer\">here</a>, unfortunately, I get an error when I try to build the solution.</p>\n\n<p>I am getting the below error message:</p>\n\n<blockquote>\n  <p>Error LNK1181 cannot open input file\n  'zlibstat.lib'    Common  C:\\Users\\user1\\Documents\\Visual Studio\n  2015\\Projects\\kylin-master\\odbc\\Common\\LINK   1</p>\n</blockquote>\n\n<p>When I include the <code>zlibstat.lib</code> file, I get an error message saying that it is already included.</p>\n"}, {"tags": ["c++", "utf-8", "arduino", "3d"], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 11476601, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DgAbVfyM4xY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcn1Myf3ndVM2G28okwsVNfBB_Yag/mo/photo.jpg?sz=128", "display_name": "jane hannah", "link": "https://stackoverflow.com/users/11476601/jane-hannah"}, "edited": false, "score": 0, "creation_date": 1557991624, "post_id": 56151796, "comment_id": 98953431, "body": "Thank you so much! this helps me to understand. I&#39;m sorry i&#39;m quite a beginner"}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 1, "last_activity_date": 1557930561, "creation_date": 1557930561, "answer_id": 56151796, "question_id": 56151655, "link": "https://stackoverflow.com/questions/56151655/explanation-needed-for-some-lines-of-program-from-lcd-liquid-crystal-program/56151796#56151796", "title": "Explanation needed for some lines of program from LCD liquid crystal program", "body": "<p>Generalized, <code>a |= b</code> is equal to <code>a = a | b</code>.</p>\n\n<p>For your code, the expresison</p>\n\n<pre><code>retval |= (digitalRead(_data_pins[i]) == HIGH)?(1 &lt;&lt; i):0;\n</code></pre>\n\n<p>is equal to</p>\n\n<pre><code>retval = retval | (digitalRead(_data_pins[i]) == HIGH)?(1 &lt;&lt; i):0;\n</code></pre>\n\n<p>That is, <code>retval</code> itself isn't compared to anything. Instead it's previous value is used  with a bitwise OR and the result of that is assigned back to <code>retval</code>.</p>\n\n<p>And if we rewrite the conditional expression into an <code>if else</code> statement, it would be like</p>\n\n<pre><code>if (digitalRead(_data_pins[i]) == HIGH)\n    retval = retval | (1 &lt;&lt; i);\nelse\n    retval = retval | 0;\n</code></pre>\n\n<p>This should hopefully be much easier to understand.</p>\n"}], "owner": {"reputation": 37, "user_id": 11476601, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DgAbVfyM4xY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcn1Myf3ndVM2G28okwsVNfBB_Yag/mo/photo.jpg?sz=128", "display_name": "jane hannah", "link": "https://stackoverflow.com/users/11476601/jane-hannah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 56151796, "answer_count": 1, "score": 1, "last_activity_date": 1557930561, "creation_date": 1557930203, "last_edit_date": 1557930434, "question_id": 56151655, "link": "https://stackoverflow.com/questions/56151655/explanation-needed-for-some-lines-of-program-from-lcd-liquid-crystal-program", "title": "Explanation needed for some lines of program from LCD liquid crystal program", "body": "<p>Can someone explain with what will the retval be compared to (bitwise OR) at the end? I dont understand this line of program</p>\n\n<pre><code>for (int i = 0; i &lt; n; i++) {\n    retval |= (digitalRead(_data_pins[i]) == HIGH)?(1 &lt;&lt; i):0;\n  }\n</code></pre>\n"}, {"tags": ["c++", "codeblocks", "wxwidgets"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1557930332, "post_id": 56151628, "comment_id": 98932742, "body": "Just call <code>TextCtrl1-&gt;GetValue()</code> like you do in the first function?"}, {"owner": {"reputation": 13, "user_id": 8622633, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155013016151309/picture?type=large", "display_name": "smarch", "link": "https://stackoverflow.com/users/8622633/smarch"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1557932505, "post_id": 56151628, "comment_id": 98934180, "body": "from another frame ? I don&#39;t think so"}, {"owner": {"reputation": 13, "user_id": 8622633, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155013016151309/picture?type=large", "display_name": "smarch", "link": "https://stackoverflow.com/users/8622633/smarch"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1557933377, "post_id": 56151628, "comment_id": 98934720, "body": "To make it works, I had to declare wxString test1 and test2 at the top which is pretty ugly..."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1557933903, "post_id": 56151628, "comment_id": 98935057, "body": "No you don&#39;t. You can use the result of the call directly when calling your next function. As in e.g. <code>mynewwindow-&gt;TextCtrl1-&gt;ChangeValue(TextCtrl1-&gt;GetValue());</code>. <i>Experiment!</i>"}, {"owner": {"reputation": 13, "user_id": 8622633, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155013016151309/picture?type=large", "display_name": "smarch", "link": "https://stackoverflow.com/users/8622633/smarch"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1557934831, "post_id": 56151628, "comment_id": 98935595, "body": "whenever you reference textctrl1, it&#39;s within its context. I have two frames with a textctrl named textctrl1. And btw declaring those 2 variables globally make it works...ugly"}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1557939519, "post_id": 56151628, "comment_id": 98937924, "body": "Better names would make the code easier to read. Showing your declarations would also lead to less confusion."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1557939711, "post_id": 56151628, "comment_id": 98938014, "body": "Your question would be easier to understand if you were to describe what you are trying to accomplish, using the code to <i>help</i> explain. (Rather than relying on the non-working code as the primary way of conveying what you are trying to accomplish.) Try to explain in broad terms, at a high level where you don&#39;t need to refer to variable names."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1557940616, "post_id": 56151628, "comment_id": 98938419, "body": "Inside a member function of the <code>test12052019Frame</code> class, the symbol <code>TextCtrl1</code> will always reference <code>test12052019Frame::TextCtrl1</code>. In fact, <code>TextCtrl1-&gt;GetValue()</code> is actually equal to <code>this-&gt;TextCtrl1-&gt;GetValue()</code>."}, {"owner": {"reputation": 13, "user_id": 8622633, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155013016151309/picture?type=large", "display_name": "smarch", "link": "https://stackoverflow.com/users/8622633/smarch"}, "edited": false, "score": 0, "creation_date": 1557942042, "post_id": 56151628, "comment_id": 98939028, "body": "what the famous &#39;this&#39; ?!?! i will modify accordingly &#39;this&#39;"}, {"owner": {"reputation": 13, "user_id": 8622633, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155013016151309/picture?type=large", "display_name": "smarch", "link": "https://stackoverflow.com/users/8622633/smarch"}, "edited": false, "score": 0, "creation_date": 1557942621, "post_id": 56151628, "comment_id": 98939315, "body": "&#39;this&#39; refer to current instance in the event OnTreeCtrl1ItemActivated(wxTreeEvent&amp; event) I need variables test1 and test2 from event OnButton1Click"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1557987057, "post_id": 56151628, "comment_id": 98951368, "body": "It seems you could use <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list/388282#388282\">some good books</a> to read."}, {"owner": {"reputation": 13, "user_id": 8622633, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155013016151309/picture?type=large", "display_name": "smarch", "link": "https://stackoverflow.com/users/8622633/smarch"}, "edited": false, "score": 0, "creation_date": 1558010353, "post_id": 56151628, "comment_id": 98964018, "body": "agree, I&#39;m a C programmer, C++ is new to me and playing around with wxwidgets and RAD tools is a little bit to much"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8622633, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155013016151309/picture?type=large", "display_name": "smarch", "link": "https://stackoverflow.com/users/8622633/smarch"}, "edited": false, "score": 0, "creation_date": 1558104866, "post_id": 56155664, "comment_id": 99002884, "body": "I&#39;m about to update code with mysql functionalities... and the youtube link (video) is updated."}], "tags": [], "owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "is_accepted": false, "score": 0, "last_activity_date": 1557945151, "creation_date": 1557945151, "answer_id": 56155664, "question_id": 56151628, "link": "https://stackoverflow.com/questions/56151628/accessing-variables-outside-scoop-wxsmith-project-c/56155664#56155664", "title": "Accessing variables outside scoop (wxSmith Project c++)", "body": "<p>Name the controls in the frame class declaration:</p>\n\n<pre><code>class MyFrame : public wxFrame\n{\n    .... ctors, etc\n\n    wxTextCtrl *texctrl_user;\n    wxTextCtrl *texctrl_pass;\n\n    wxButton *button1;\n\n    //Function for button handling\n    void OnButton1Click(wxCommandEvent&amp; event);\n    ....\n};\n</code></pre>\n\n<p>Create the controls at MyFrame ctor, or similar</p>\n\n<pre><code>texctrl_user = new wxTextCtrl(....);\ntexctrl_pass = new wxTextCtrl(....);\n\nbutton1 = new wxButton(.......);\n</code></pre>\n\n<p>And bind the button click handler:</p>\n\n<pre><code>button1 -&gt;Bind(wxEVT_BUTTON, &amp;MyFrame::OnButton1Click, this, button1-&gt;GetId());\n</code></pre>\n\n<p>Now, because the function <em>and</em> the textctrls are members of the same class, any one is accesible from inside the class:</p>\n\n<pre><code>void MyFrame::OnButton1Click(wxCommandEvent&amp; event)\n{\n    wxString str_user = texctrl_user-&gt;GetValue();\n    wxString str_pass = texctrl_pass-&gt;GetValue();\n    ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "is_accepted": false, "score": 0, "last_activity_date": 1558036581, "creation_date": 1558036581, "answer_id": 56175770, "question_id": 56151628, "link": "https://stackoverflow.com/questions/56151628/accessing-variables-outside-scoop-wxsmith-project-c/56175770#56175770", "title": "Accessing variables outside scoop (wxSmith Project c++)", "body": "<p>@smarch,</p>\n\n<ol>\n<li>Asking the user for credentials will better be done in the dialog and not a frame. </li>\n<li>Inn the dialog instance create 2 functions that will return text control 1 and text control 2. Make those functions public, while keeping the control itself private (or protected - depends on the RAD tool you use).</li>\n<li><p>In the main frame do the following:</p>\n\n<p>void MainFrame::AskForCredentials()\n{\n    MyCredentialsDialog dlg;\n    int result = dlg.ShowModal();\n    if( result == wxID_OK )\n    {\n        wxString userID = dlg.GetUserIDCtrl()->GetValue();\n        wxString pass = dlg.GetPasswordCtrl()->GetValue();\n    }\n}</p></li>\n<li><p>Test\n5.Enjoy.</p></li>\n</ol>\n"}], "owner": {"reputation": 13, "user_id": 8622633, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155013016151309/picture?type=large", "display_name": "smarch", "link": "https://stackoverflow.com/users/8622633/smarch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1558105632, "creation_date": 1557930102, "last_edit_date": 1558105632, "question_id": 56151628, "link": "https://stackoverflow.com/questions/56151628/accessing-variables-outside-scoop-wxsmith-project-c", "title": "Accessing variables outside scoop (wxSmith Project c++)", "body": "<p>I'm learning C++ with wxSmith inside CodeBlocks.</p>\n\n<p>I've built an app with two frames and I need to access variables in the top level window.</p>\n\n<pre><code>void test12052019Frame::OnButton1Click(wxCommandEvent&amp; event)\n{\nwxString test1 = \"\";\nwxString test2 = \"\";\n\ntest1 = TextCtrl1-&gt;GetValue();\ntest2 = TextCtrl2-&gt;GetValue();\n\n// compare/parse userid/password\n// Access ERP system and get credential schema\n// build the treeview\n\nif(test1 == \"titou\" &amp;&amp; test2 == \"123123\"){\n// todo auth. against Mysql\n    wxMessageBox(\"You're in !!\\n\");\n    TreeCtrl1-&gt;Show();\n    TreeCtrl1-&gt;ExpandAll();\n}else\n    wxMessageBox(\"You're out !!\\nWrong userid/password\");\n}\nvoid test12052019Frame::OnTreeCtrl1ItemActivated(wxTreeEvent&amp; event)\n{\n//TreeCtrl1 is my tree\n//when I click on any option of my tree\n//it activate a wxMessageBox with the label\n//of the option selected...\n//just let go your imagination :)\n\nNewFrameActivities *mynewwindow = new NewFrameActivities(this);\n\nwxString thelabel;\nwxTreeItemId test3;\n\ntest3 = TreeCtrl1-&gt;GetSelection();\nthelabel = TreeCtrl1-&gt;GetItemText(test3);\n\nwxMessageBox(thelabel);\n\nmynewwindow-&gt;SetLabel(thelabel);\n//mynewwindow-&gt;StaticBox1-&gt;SetLabel(tosomething...);\n\n//I have a textctrl in this event (textctrl1) and\n//textctrl(textctrl1) in another event \n\nmynewwindow-&gt;TextCtrl1-&gt;ChangeValue(\"thetest\\nsetvalue\\n\");\nmynewwindow-&gt;Show(TRUE);\n}\n</code></pre>\n\n<p>I need to know the username from the first event\n(top level window, textctrl1)\n<a href=\"https://www.youtube.com/watch?v=pz2AJOLbEXc\" rel=\"nofollow noreferrer\">Visual demo</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/etXFD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/etXFD.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 451, "user_id": 11254500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60b4acb4348382c3e7a72e95bebcea67?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Sun", "link": "https://stackoverflow.com/users/11254500/jeff-sun"}, "edited": false, "score": 0, "creation_date": 1557930225, "post_id": 56151616, "comment_id": 98932653, "body": "@Fran&#231;oisAndrieux Thank you but I am not just focusing on this specific case. I am considering the general situation."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1557930724, "post_id": 56151616, "comment_id": 98933029, "body": "Related : <a href=\"https://stackoverflow.com/questions/17644816/is-it-possible-to-get-the-function-pointer-of-a-built-in-standard-operator\">Is it possible to get the function pointer of a built-in standard operator?</a>."}], "answers": [{"tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 43, "last_activity_date": 1557942248, "last_edit_date": 1557942248, "creation_date": 1557930146, "answer_id": 56151634, "question_id": 56151616, "link": "https://stackoverflow.com/questions/56151616/is-it-possible-to-pass-a-pointer-to-an-operator-as-an-argument-like-a-pointer-to/56151634#56151634", "title": "Is it possible to pass a pointer to an operator as an argument like a pointer to a function?", "body": "<p>You cannot obtain a pointer to a built-in operator. But fortunately, the standard library provides function objects for all standard operators. In your case, that object's name is <code>std::greater</code>:</p>\n\n<pre><code>sort (arr, arr + N, std::greater&lt;int&gt;{});\n</code></pre>\n\n<p>Since C++14, you can even omit the argument type and it will be deduced from how the object is used:</p>\n\n<pre><code>sort (arr, arr + N, std::greater&lt;&gt;{});\n</code></pre>\n\n<p>And since C++17, the empty <code>&lt;&gt;</code> can be omitted too:</p>\n\n<pre><code>sort (arr, arr + N, std::greater{});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1773, "user_id": 8805095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4948ba17681551aa212dbc7be9bff40?s=128&d=identicon&r=PG&f=1", "display_name": "Moia", "link": "https://stackoverflow.com/users/8805095/moia"}, "is_accepted": false, "score": 4, "last_activity_date": 1557930461, "creation_date": 1557930461, "answer_id": 56151755, "question_id": 56151616, "link": "https://stackoverflow.com/questions/56151616/is-it-possible-to-pass-a-pointer-to-an-operator-as-an-argument-like-a-pointer-to/56151755#56151755", "title": "Is it possible to pass a pointer to an operator as an argument like a pointer to a function?", "body": "<p>You cannot do that, but you can use a lambda directly inside the sort, or store the lambda itself in a variable if you need to pass the comparator around</p>\n\n<pre><code>sort (arr, arr + N, [](int a, int b){ return a &gt; b; });\n</code></pre>\n\n<p>or</p>\n\n<pre><code>auto comp = [](int a, int b){ return a &gt; b; };\nsort (arr, arr + N, comp);\n</code></pre>\n\n<p>or as suggested you can use the <code>std::greater</code></p>\n\n<pre><code>sort (arr, arr + N, std::greater&lt;&gt;{});\n</code></pre>\n"}], "owner": {"reputation": 451, "user_id": 11254500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60b4acb4348382c3e7a72e95bebcea67?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Sun", "link": "https://stackoverflow.com/users/11254500/jeff-sun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1545, "favorite_count": 2, "accepted_answer_id": 56151634, "answer_count": 2, "score": 34, "last_activity_date": 1557942248, "creation_date": 1557930063, "last_edit_date": 1557930439, "question_id": 56151616, "link": "https://stackoverflow.com/questions/56151616/is-it-possible-to-pass-a-pointer-to-an-operator-as-an-argument-like-a-pointer-to", "title": "Is it possible to pass a pointer to an operator as an argument like a pointer to a function?", "body": "<p><strong>I am considering the general case, the following is just a simple example encountered which is easy to handle but has evoked my thoughts.</strong></p>\n\n<p>For example, I am using the <code>sort()</code> function of <code>&lt;algorithm&gt;</code>.\nInstead of defining a function as </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>bool cmp (int n1, int n2)\n{\n    return n1 &gt; n2;\n}\n</code></pre>\n\n<p>and</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>sort (arr, arr + N, cmp);\n</code></pre>\n\n<p>in the main function, I am wondering whether I can pass a pointer to the operator <code>&gt;</code>, just as what I do to a pointer to a function, to the sort function. If so, how do I implement it?</p>\n"}, {"tags": ["c++", "r", "rcpp"], "comments": [{"owner": {"reputation": 120, "user_id": 10149231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8356c8ce62c9b458bb73cd1e1113a934?s=128&d=identicon&r=PG&f=1", "display_name": "inferator", "link": "https://stackoverflow.com/users/10149231/inferator"}, "edited": false, "score": 4, "creation_date": 1557930529, "post_id": 56151466, "comment_id": 98932886, "body": "I think there are some misconceptions here. What you refer to as &#39;C++&#39; syntax is in fact Armadillo-specific. It&#39;s a great library for matrix algebra in C++, and it is really well-documented here <a href=\"http://arma.sourceforge.net/docs.html\" rel=\"nofollow noreferrer\">arma.sourceforge.net/docs.html</a>."}], "answers": [{"comments": [{"owner": {"reputation": 120, "user_id": 10149231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8356c8ce62c9b458bb73cd1e1113a934?s=128&d=identicon&r=PG&f=1", "display_name": "inferator", "link": "https://stackoverflow.com/users/10149231/inferator"}, "edited": false, "score": 3, "creation_date": 1557942734, "post_id": 56154761, "comment_id": 98939373, "body": "Rcpp itself does not introduce matrix multiplications. Access to libraries like Armadillo or GSL does. Rcpp just provides classes that allow you to interact with R objects from cpp."}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 2, "creation_date": 1557946258, "post_id": 56154761, "comment_id": 98940890, "body": "Correct, and a deliberate choice as Rcpp is busy enough being <i>an interface package</i> also function as a linear algebra package which (Rcpp)Armadillo and (Rcpp)Eigen already do rather well."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "reply_to_user": {"reputation": 120, "user_id": 10149231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8356c8ce62c9b458bb73cd1e1113a934?s=128&d=identicon&r=PG&f=1", "display_name": "inferator", "link": "https://stackoverflow.com/users/10149231/inferator"}, "edited": false, "score": 0, "creation_date": 1557950826, "post_id": 56154761, "comment_id": 98942825, "body": "@inferator Fair enough. I did try to avoid saying what&#39;s in Rcpp and what&#39;s in Armadillo, but I guess I did not go far enough. The answer is now down to one mention of Rcpp."}], "tags": [], "owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "is_accepted": false, "score": 1, "last_activity_date": 1557950699, "last_edit_date": 1557950699, "creation_date": 1557941393, "answer_id": 56154761, "question_id": 56151466, "link": "https://stackoverflow.com/questions/56151466/how-to-do-the-matrix-product-of-two-matrices-in-r-and-c-respectively/56154761#56154761", "title": "How to do the matrix product of two matrices in R and C++ respectively", "body": "<p>R and C++ are different languages. There is no reason to expect them to share syntax. You should be more surprised when the syntax matches than when it differs.</p>\n\n<p>That being said, when you have a package, like Rcpp, that integrates languages, there usually is some attempt to make the syntax consistent. So why not use the same operator as R in this case? Because it is not possible. The list of operators in C++ is fixed, and <code>%*%</code> is not on that list. The operator <code>*</code> is on the list, though, so that operator could be chosen. Always better to choose something that can be chosen than to have nothing work. :)</p>\n\n<p>(In case it got missed along the way: C++ has no native support for matrix operations. There is no matrix multiplication \"in C++\", only in specific libraries, such as Armadillo.)</p>\n"}], "owner": {"reputation": 105, "user_id": 11192191, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8kJDDgGx4Jw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rduljiQPQTf-pQ-S479KyID0Xe90Q/mo/photo.jpg?sz=128", "display_name": "Emil Krabbe", "link": "https://stackoverflow.com/users/11192191/emil-krabbe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557950699, "creation_date": 1557929617, "last_edit_date": 1557941409, "question_id": 56151466, "link": "https://stackoverflow.com/questions/56151466/how-to-do-the-matrix-product-of-two-matrices-in-r-and-c-respectively", "title": "How to do the matrix product of two matrices in R and C++ respectively", "body": "<p>I have a question on why matrix multiplication is <code>%*%</code> in R but just <code>*</code> in C++.</p>\n\n<p>Example:</p>\n\n<p>in R script:</p>\n\n<pre><code>FunR &lt;- function(mX, mY) {\n  mZ = mX %*% mY\n  mZInv = solve(mZ)\n  return(mZInv)\n}\n</code></pre>\n\n<p>in C++ script:</p>\n\n<pre><code>  // [[Rcpp::depends(RcppArmadillo)]]\n#include &lt;RcppArmadillo.h&gt;\n  using namespace Rcpp;\n  using namespace arma;\n\n  // [[Rcpp::export]]\n  mat FunC(mat mX, mat mY) { \n    mat mZ = mX * mY;\n    mat mZInv = mZ.i();\n   return mZInv; \n  }\n</code></pre>\n\n<p>I ask because C++ can be easily incorporated into R documents.</p>\n\n<p>Also, the \"*\" character is used to multiply matrices in R but it is not the standard matrix product as we know it. How are you supposed to know this stuff?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1557929601, "post_id": 56151425, "comment_id": 98932236, "body": "Does std::cout actually output the exact contents of the vector?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1557929655, "post_id": 56151425, "comment_id": 98932269, "body": "The code you show would not create the output you show. Please try to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to show us, together with the actual and expected output."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1557929724, "post_id": 56151425, "comment_id": 98932324, "body": "Also note that what you&#39;re doing with <code>while (ss.good()) { ...}</code> is almost equivalent to <code>while (!ss.eof()) { ... }</code> <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-i-e-while-stream-eof-cons\">which is almost always wrong</a> (as is your condition)."}], "answers": [{"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1557929732, "post_id": 56151475, "comment_id": 98932327, "body": "If your answer is a link to another question or answer, the correct course of action is to instead vote to close this question as a duplicate of the one you would link."}, {"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1557929784, "post_id": 56151475, "comment_id": 98932366, "body": "It&#39;s not exactly the same question, he didn&#39;t realize that the issue was the std::cout precision."}], "tags": [], "owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "is_accepted": false, "score": 0, "last_activity_date": 1557929662, "creation_date": 1557929662, "answer_id": 56151475, "question_id": 56151425, "link": "https://stackoverflow.com/questions/56151425/reading-more-precision-values-into-vector/56151475#56151475", "title": "Reading more precision values into vector", "body": "<p>Your problem is that std::cout sets the precision.</p>\n\n<p>Solution from <a href=\"https://stackoverflow.com/questions/554063/how-do-i-print-a-double-value-with-full-precision-using-cout\">this SO question</a> using std::fixed.</p>\n\n<pre><code>double d = 3.14159265358979;\ncout.precision(17);\ncout &lt;&lt; \"Pi: \" &lt;&lt; fixed &lt;&lt; d &lt;&lt; endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 173, "user_id": 8681249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f6473eed1deafe1a41bc3466cd9f97?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/8681249/john"}, "is_accepted": false, "score": 0, "last_activity_date": 1557929666, "creation_date": 1557929666, "answer_id": 56151477, "question_id": 56151425, "link": "https://stackoverflow.com/questions/56151425/reading-more-precision-values-into-vector/56151477#56151477", "title": "Reading more precision values into vector", "body": "<p>Have you tried  setprecision?</p>\n\n<p><a href=\"http://www.cplusplus.com/reference/iomanip/setprecision/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/iomanip/setprecision/</a></p>\n"}], "owner": {"reputation": 1080, "user_id": 3796318, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/81dd46d5632e55d7c74690e2867111d8?s=128&d=identicon&r=PG&f=1", "display_name": "DrunkenMaster", "link": "https://stackoverflow.com/users/3796318/drunkenmaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 1, "closed_date": 1557929641, "answer_count": 2, "score": 0, "last_activity_date": 1557930575, "creation_date": 1557929476, "last_edit_date": 1557930575, "question_id": 56151425, "link": "https://stackoverflow.com/questions/56151425/reading-more-precision-values-into-vector", "closed_reason": "Duplicate", "title": "Reading more precision values into vector", "body": "<p>I am trying to parse a string line which has comma separated values in and keep in the Vector. The challenge is that i m unable to retain the precision values after certain position. Below is the code which i am trying. </p>\n\n<pre><code>  string name = \"1, 0, -23.5346 -412.13647, 0, 11.2, 0.4, -2233.12345, 0, 0, 0, 567.46436, 0, 0, 1.654321, 0.1232\"\n\n\n   stringstream ss(name);\n    vector&lt;string&gt; result;\n    int cc=0;\n\n    while (ss.good ()) {\n            string val;\n            getline (ss, val, ',');\n            cout &lt;&lt;\"value for \"&lt;&lt;cc&lt;&lt; \" is \"&lt;&lt;std::stod(val)&lt;&lt;endl;\n            result.push_back(val);\n            cout &lt;&lt;\"cc \"&lt;&lt; cc; \n            cc++;\n\n    }    \n</code></pre>\n\n<p>The output i received is </p>\n\n<pre><code>value for 1 is 1\nvalue for 2 is 0\nvalue for 3 is -23.5346\nvalue for 4 is -412.136\nvalue for 5 is 0\nvalue for 6 is 11.2\nvalue for 7 is 0.4\nvalue for 8 is -2233.12\nvalue for 9 is 0\nvalue for 10 is 0\nvalue for 11 is 0\nvalue for 12 is 567.464\nvalue for 13 is 0\nvalue for 14 is 0\nvalue for 15 is 1.65432\nvalue for 16 is 0.1232\n</code></pre>\n\n<p>In the above code, I am unable to retrain the precision values, for example instead of -412.13647, the value -412.136 is stored. How can i Resolve this issue? </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 2, "creation_date": 1557929411, "post_id": 56151364, "comment_id": 98932100, "body": "So, what is the question?"}, {"owner": {"reputation": 73, "user_id": 7476499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea70ec3b839c641cdd2ab3ea73bda79a?s=128&d=identicon&r=PG", "display_name": "user7476499", "link": "https://stackoverflow.com/users/7476499/user7476499"}, "reply_to_user": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 0, "creation_date": 1557929496, "post_id": 56151364, "comment_id": 98932162, "body": "I only wonder if it&#39;s correct:in the code bihind,A &amp;get1() returns an l-value,A get2() return an r-value."}, {"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 2, "creation_date": 1557929587, "post_id": 56151364, "comment_id": 98932225, "body": "That depends what you want to do with the result."}, {"owner": {"reputation": 2673, "user_id": 11292489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cucr6.jpg?s=128&g=1", "display_name": "Gilles-Philippe Paill&#233;", "link": "https://stackoverflow.com/users/11292489/gilles-philippe-paill%c3%a9"}, "edited": false, "score": 0, "creation_date": 1557929588, "post_id": 56151364, "comment_id": 98932226, "body": "@user7476499 That is right. <code>int &amp; f()</code> returns a reference and <code>int f()</code> returns a copy."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 2, "creation_date": 1557929760, "post_id": 56151364, "comment_id": 98932340, "body": "@user7476499: &quot;<i>I still don&#39;t figure out how the &amp; work in the compiler.</i>&quot; You shouldn&#39;t. You should focus on what the language says about the code, what the code means. Trying to retroactively understand C++ by looking at the assembly output is not going to work well. The compiler has way too much freedom to make optimizations, alterations, reordering, and even out-right omissions, so long as the program&#39;s behavior doesn&#39;t change from what the standard says."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1557929892, "post_id": 56151364, "comment_id": 98932445, "body": "@user7476499 <i>How</i> references work is up to the implementation of the language you are using. Trying to understand how it works under the hood may be interesting but it&#39;s not relevant to c++ in a general sense. It may very well not be true in other versions of your compiler or other compilers. But most importantly it may lead you to believe things about the language that it does not guarantee. It&#39;s not because your implementation does something with references that it&#39;s safe to assume every other implementation will."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 6, "last_activity_date": 1557929628, "creation_date": 1557929628, "answer_id": 56151468, "question_id": 56151364, "link": "https://stackoverflow.com/questions/56151364/whats-the-difference-returning-and-not/56151468#56151468", "title": "What&#39;s the difference returning &amp; and not?", "body": "<p>The version of <code>at</code> that returns a reference allows you to modify the member datum <code>data</code> via that reference:</p>\n\n<pre><code>mymay.at() = 1;\n</code></pre>\n\n<p>will set <code>data</code> in the instance of <code>mymay</code> to 1. So <code>mymay.at()</code> is an <em>l-value</em>: i.e. it can be placed on the left hand side of an assignment.</p>\n\n<p>The version of <code>at</code> that returns a value will not allow you to do that. It's not an <em>l-value</em>.</p>\n\n<hr>\n\n<p>Your second point, an <em>l-value</em> cannot bind to an <em>rvalue reference</em> <code>&amp;&amp;</code> wheres an <em>anonymous temporary</em> can. Overload resolution for your <code>cout</code> is unambiguous which accounts for the output of your program.</p>\n"}], "owner": {"reputation": 73, "user_id": 7476499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea70ec3b839c641cdd2ab3ea73bda79a?s=128&d=identicon&r=PG", "display_name": "user7476499", "link": "https://stackoverflow.com/users/7476499/user7476499"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 56151468, "answer_count": 1, "score": 0, "last_activity_date": 1557935697, "creation_date": 1557929316, "last_edit_date": 1557935697, "question_id": 56151364, "link": "https://stackoverflow.com/questions/56151364/whats-the-difference-returning-and-not", "title": "What&#39;s the difference returning &amp; and not?", "body": "<p>I still haven't figured out how the <code>&amp;</code> works in the compiler.</p>\n\n<p>To figure it out, I tried disassembling the code below:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>private:\n        int data;\npublic:\nint&amp; at()\n{\n    return data;\n}\nint at()\n{\n    return data;\n}\n\nconst int&amp; result = mymay.at(); //call the two functions\n</code></pre>\n\n<p>I find that <code>int&amp; at()</code> returns an address, and <code>int at()</code> returns a value; the compiler first writes the value to a memory, then \"result\"'s address was set to it.\nSo I understand that <code>int at()</code> will return a copied one.\nI also understand that it's best practice to write <code>friend ostream&amp; operator&lt;&lt;(ostream &amp;os , const A &amp;obj)</code> </p>\n\n<p>But I wonder if it's correct: in the below code, <code>A &amp;get1()</code> returns an <code>l-value</code>, and <code>A get2()</code> returns an <code>r-value</code>.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\nusing namespace std;\nclass A\n{\npublic:\n    A &amp;get1(){\n        return *this;\n    }\n    A get2(){\n        return *this;\n    }\n    friend ostream&amp; operator&lt;&lt;(ostream &amp;os , A &amp;obj){\n        cout&lt;&lt;\"An l-value function called.\"&lt;&lt;endl;\n        return os;\n    }\n    friend ostream&amp; operator&lt;&lt;(ostream &amp;os , A &amp;&amp;obj){\n        cout&lt;&lt;\"An r-value function called.\"&lt;&lt;endl;\n        return os;\n    }\n};\nint main()\n{\n    A tmp;\n    cout&lt;&lt;\"get1: \"&lt;&lt;tmp.get1()&lt;&lt;\"get2: \"&lt;&lt;tmp.get2()&lt;&lt;endl;\n    return 0;\n}\n\n</code></pre>\n\n<p>Actual results:</p>\n\n<pre><code>An l-value function called.\nAn r-value function called.\n</code></pre>\n"}, {"tags": ["c++", "segmentation-fault", "valgrind", "shared-ptr", "smart-pointers"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1557929256, "post_id": 56151291, "comment_id": 98931983, "body": "Please try to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> which replicates the problem, and which you can show to us. It&#39;s not really a problem in the <code>B::foo</code> function itself, but how you call it (or rather, what you pass to it as argument)."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1557931890, "post_id": 56151291, "comment_id": 98933802, "body": "You can&#39;t turn a raw pointer into a shared pointer if somebody else owns the object that it points to.  I find it helps to think of a <code>shared_ptr</code> as a shared <i>object</i> and not as a pointer at all."}, {"owner": {"reputation": 229, "user_id": 1986879, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/2089c1e7d95748d29b0a452f141177ce?s=128&d=identicon&r=PG&f=1", "display_name": "Alonbs", "link": "https://stackoverflow.com/users/1986879/alonbs"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1557933632, "post_id": 56151291, "comment_id": 98934879, "body": "@molbdnilo: So just to be clear, I can&#39;t pass the raw pointer, because I will then have to &#39;make it shared&#39;, which is not allowed, since it is already owned by a different shared_ptr."}, {"owner": {"reputation": 2673, "user_id": 11292489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cucr6.jpg?s=128&g=1", "display_name": "Gilles-Philippe Paill&#233;", "link": "https://stackoverflow.com/users/11292489/gilles-philippe-paill%c3%a9"}, "edited": false, "score": 3, "creation_date": 1557934171, "post_id": 56151291, "comment_id": 98935223, "body": "@Alonbs That&#39;s correct. The second shared_ptr will not know about the first one, so both shared_ptr will think it owns the object and try to delete it."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1557934244, "post_id": 56151291, "comment_id": 98935264, "body": "@Alonbs Exactly. Theft is bad."}, {"owner": {"reputation": 229, "user_id": 1986879, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/2089c1e7d95748d29b0a452f141177ce?s=128&d=identicon&r=PG&f=1", "display_name": "Alonbs", "link": "https://stackoverflow.com/users/1986879/alonbs"}, "edited": false, "score": 0, "creation_date": 1557934436, "post_id": 56151291, "comment_id": 98935381, "body": "great! Thanks.."}], "answers": [{"tags": [], "owner": {"reputation": 229, "user_id": 1986879, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/2089c1e7d95748d29b0a452f141177ce?s=128&d=identicon&r=PG&f=1", "display_name": "Alonbs", "link": "https://stackoverflow.com/users/1986879/alonbs"}, "is_accepted": false, "score": 1, "last_activity_date": 1557934063, "creation_date": 1557934063, "answer_id": 56152918, "question_id": 56151291, "link": "https://stackoverflow.com/questions/56151291/uninitialized-value-when-dealing-with-shared-ptr/56152918#56152918", "title": "Uninitialized value when dealing with shared_ptr", "body": "<p>Ok, I found the problem, and it's no related to smart pointers at all, but since I'm new to this - I thought it might be. \nI'll leave this answer for future references. This is what I did (simplified):</p>\n\n<pre><code>class A{\n\nprivate:\n\n    shared_ptr&lt;const int&gt; _num;\n\npublic:\n    A()\n    {\n        _num = make_shared&lt;const int&gt;(5);\n    }\n\n    const shared_ptr&lt;const int&gt;&amp; getNum() const {return _num; }\n\n    void printNum()\n    {\n        cout &lt;&lt; *_num.get() &lt;&lt; endl;\n    }\n};\n\nclass B\n{\n\n\npublic:\n\n    struct C{\n        C() : _num(nullptr){}\n        void boo(shared_ptr&lt;const int&gt; &amp; num) { _num = num;}\n        shared_ptr&lt;const int&gt; _num;\n    };\n\n    B() {}\n\n    void foo(shared_ptr&lt;const int&gt;&amp; num)\n    {\n        cs.reserve(2);\n        for (uint32_t i = 0; i &lt; 2 ; ++i) {\n\n            cs.push_back(C()); // This was missing.\n            cs[i].boo(num);\n        }\n    }\n\n    void printCNum()\n    {\n        for (C c : cs) {\n            cout &lt;&lt; *c._num.get() &lt;&lt; endl;\n        }\n    }\n\nprivate:\n\n    vector&lt;C&gt; cs;\n};\n\n\nint main()\n{\n    A a{};\n    shared_ptr&lt;const int&gt; xx = a.getNum();\n\n    B b{};\n    b.foo(xx);\n\n    a.printNum();\n    b.printCNum();\n\n}\n</code></pre>\n\n<p>Silly me, I thought that when you reserve a vector of Objects (not pointers/references) it also calls their constructor. It turn out it's not. Specifically, I increased the capacity of the vector, but not its size. </p>\n"}], "owner": {"reputation": 229, "user_id": 1986879, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/2089c1e7d95748d29b0a452f141177ce?s=128&d=identicon&r=PG&f=1", "display_name": "Alonbs", "link": "https://stackoverflow.com/users/1986879/alonbs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557934063, "creation_date": 1557929120, "question_id": 56151291, "link": "https://stackoverflow.com/questions/56151291/uninitialized-value-when-dealing-with-shared-ptr", "title": "Uninitialized value when dealing with shared_ptr", "body": "<p>I'm sure this is very simple, but I'm rather new to smart pointers, and I couldn't find an answer to this.</p>\n\n<p>Scenario is very simple:\nI have a class A, that holds a shared_ptr to some object X:</p>\n\n<pre><code>class A{\n    shared_ptr&lt;const X&gt; _asX;\n}\n</code></pre>\n\n<p>now after a series of function calls, I'm creating a new object of type B, that also holds this X. something like:</p>\n\n<pre><code>class B {\nprivate:\n    shared_ptr&lt;const X&gt; _bsX;\npublic:\n    B(): _bsX(nullptr) // - maybe this is problematic {}\n    foo(shared_ptr&lt;const X&gt;&amp; x)\n    {\n        _bsX = x;\n        // The line above gives me undefined behavior, \n        // and when I run valgrind I get \"Conditional jump or move\n        // depends on uninitialized value(s)\",\n        // telling me this is not the correct way to do things. \n    }\n</code></pre>\n\n<p>Note that it is deliberate the foo really sets the value of _bsX and not the constructor. </p>\n\n<p>So as stated above - depending on the compiler, I something get segmentation faults - which usually means some value was not initialized, and later confirmed by valgrind. </p>\n\n<p>So what should I do - I've tried using 'reset' etc. but I got so confused I'm asking for your help. \nCould it be the const ? or the pass by reference ? or the '=' operator. </p>\n\n<p>And while we're at it - should I be passing X with its wrapper (the shared_ptr) to foo, or should I pass the raw pointer, and then make it shared ? if so - could you please give an example. I tried that as well, and got errors. </p>\n"}, {"tags": ["c++", "runtime-error"], "comments": [{"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 3, "creation_date": 1557928977, "post_id": 56151206, "comment_id": 98931786, "body": "Run it inside a debugger and check the call stack."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1557929057, "post_id": 56151206, "comment_id": 98931845, "body": "If this is Visual Stuido, break into the debugger and use the Stack Frame combo box (should be on the toolbar when debugging) to switch to the line of your code that caused the problem."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 11497790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9fd0414d7d8da668dca8a25263c5d64?s=128&d=identicon&r=PG&f=1", "display_name": "ashe_lam", "link": "https://stackoverflow.com/users/11497790/ashe-lam"}, "edited": false, "score": 0, "creation_date": 1557930389, "post_id": 56151303, "comment_id": 98932786, "body": "Ok I&#39;ve read that I can access the call stack while it is debugging, however my debugging take about one second to complete so I don&#39;t have time to find the call stack feature... is there another way to access it? I am using Visual Studio Community by the way."}, {"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "reply_to_user": {"reputation": 49, "user_id": 11497790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9fd0414d7d8da668dca8a25263c5d64?s=128&d=identicon&r=PG&f=1", "display_name": "ashe_lam", "link": "https://stackoverflow.com/users/11497790/ashe-lam"}, "edited": false, "score": 0, "creation_date": 1557930518, "post_id": 56151303, "comment_id": 98932879, "body": "I didn&#39;t understand what you meant, what does it mean that your debugging takes one second to complete? When an exception occurs, program stops."}, {"owner": {"reputation": 49, "user_id": 11497790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9fd0414d7d8da668dca8a25263c5d64?s=128&d=identicon&r=PG&f=1", "display_name": "ashe_lam", "link": "https://stackoverflow.com/users/11497790/ashe-lam"}, "edited": false, "score": 0, "creation_date": 1557930840, "post_id": 56151303, "comment_id": 98933092, "body": "Hmm well when I run the debugger, I don&#39;t get any errors. I only got the error when I ran my code using the necessary command."}, {"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "reply_to_user": {"reputation": 49, "user_id": 11497790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9fd0414d7d8da668dca8a25263c5d64?s=128&d=identicon&r=PG&f=1", "display_name": "ashe_lam", "link": "https://stackoverflow.com/users/11497790/ashe-lam"}, "edited": false, "score": 0, "creation_date": 1557930937, "post_id": 56151303, "comment_id": 98933169, "body": "Run your code with that command <i>inside</i> the debugger. If it&#39;s a command line, then pass it through Visual studio options."}, {"owner": {"reputation": 49, "user_id": 11497790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9fd0414d7d8da668dca8a25263c5d64?s=128&d=identicon&r=PG&f=1", "display_name": "ashe_lam", "link": "https://stackoverflow.com/users/11497790/ashe-lam"}, "edited": false, "score": 0, "creation_date": 1557931490, "post_id": 56151303, "comment_id": 98933531, "body": "I&#39;m sorry, could you possibly walk me through this perhaps?"}], "tags": [], "owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "is_accepted": false, "score": 0, "last_activity_date": 1557929464, "last_edit_date": 1557929464, "creation_date": 1557929157, "answer_id": 56151303, "question_id": 56151206, "link": "https://stackoverflow.com/questions/56151206/how-can-i-find-where-my-coding-error-is-from-this-debug-assertion-failed-erro/56151303#56151303", "title": "How can I find where my coding error is from this &quot;Debug Assertion Failed!&quot; error?", "body": "<p>Lots of runtime errors do not happen exactly where the error originated, but somewhere after that with the aid of the debugging tools you use.</p>\n\n<p>For example, if you attempt to write to a <code>std::vector</code> past its size, then the debugging version of it might have bounds checking and throw an exception on that (debuggers also insert stack frame traps to check buffer overruns etc).</p>\n\n<p>This exception does not occur at the precise line of the error, but at the code that follows.</p>\n\n<p>You use the <em>Call Stack</em> feature of the debugger, to find exactly where the error is. </p>\n\n<p>Example:</p>\n\n<pre><code>vector&lt;int&gt; x(10);\nx[10] = 1; // Calls vector::operator[] \n     // in vector::operator[]\n     if(i &gt;= size())\n          throw; // This is where the exception is thrown\n</code></pre>\n\n<p>The call stack would help you go from the <code>throw</code> line to the <code>x[10] = 1</code> line in which the error originated.</p>\n"}], "owner": {"reputation": 49, "user_id": 11497790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9fd0414d7d8da668dca8a25263c5d64?s=128&d=identicon&r=PG&f=1", "display_name": "ashe_lam", "link": "https://stackoverflow.com/users/11497790/ashe-lam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557929464, "creation_date": 1557928824, "question_id": 56151206, "link": "https://stackoverflow.com/questions/56151206/how-can-i-find-where-my-coding-error-is-from-this-debug-assertion-failed-erro", "title": "How can I find where my coding error is from this &quot;Debug Assertion Failed!&quot; error?", "body": "<p>I just ran my code through the terminal and a \"Debug Assertion Failed!\" error popped up that says \"vector subscript out of range\". This is the first time I've ever encountered this kind of error, so I'm not sure how to find where the error is in my code. Perhaps it is something obvious since I'm pretty new to C++, and I'm not very good at finding where errors are. Below is the code I have, so please let me know if you find what needs to be corrected. Thanks!</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nstruct Node {\n    int data;\n    Node* right, * down;\n};\n\nNode* construct(vector&lt;vector&lt;int&gt;&gt; arr, size_t i, size_t j, size_t m, size_t n)\n{\n    if (i &gt; n - 1 || j &gt; m - 1)\n        return NULL;\n    Node * temp = new Node();\n    temp-&gt;data = arr[i][j];\n    temp-&gt;right = construct(arr, i, j + 1, m, n);\n    temp-&gt;down = construct(arr, i + 1, j, m, n);\n    return temp;\n}\n\nvoid display(Node * head)\n{\n    Node* Rp;\n\n    Node* Dp = head;\n\n    // loop till node-&gt;down is not NULL \n    while (Dp) {\n        Rp = Dp;\n\n        // loop till node-&gt;right is not NULL \n        while (Rp) {\n            cout &lt;&lt; Rp-&gt;data &lt;&lt; \" \";\n            Rp = Rp-&gt;right;\n        }\n        cout &lt;&lt; \"\\n\";\n        Dp = Dp-&gt;down;\n    }\n}\n\nint main(int argc, char* argv[])\n{\n\n\n    if ((argc == 2) &amp;&amp; (string(argv[1]) == \"-Stack\"))\n    {\n        int K;\n        cin &gt;&gt; K; //getting the number of rooms from the text file\n\n\n\n        for (int i = 0; i &lt; K; ++i) //a loop for each room\n        {\n            int M = 0; // initializing rows variable\n            int N = 0; // initializing columns variable\n            cin &gt;&gt; M &gt;&gt; N;\n\n\n            vector&lt;vector&lt;int&gt; &gt; matrix(M); //give a matrix with a dimension M*N with all elements set to 0\n            for (int i = 0; i &lt; M; i++)\n                matrix[i].resize(N);\n\n            for (int i = 0; i &lt; M; i++) //adding each row to the matrix\n            {\n                for (int j = 0; j &lt; N; j++) //adding each column to the matrix\n                {\n                    cin &gt;&gt; matrix[i][j]; //putting all the elements in the matrix\n                }\n            }\n\n            size_t m = M, n = N;\n            Node* head = construct(matrix, 0, 0, m, n);\n            display(head);\n            return 0;\n\n        }\n\n    }\n    else if ((argc == 2) &amp;&amp; (string(argv[1]) == \"-Queue\"))\n    {\n        int K;\n        cin &gt;&gt; K; //this grabs the number of rooms in the dungeon\n        cout &lt;&lt; K;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "string", "templates", "vector"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1557929336, "post_id": 56151117, "comment_id": 98932047, "body": "offtopic: if it is only either <code>double</code>s or <code>string</code>s using simple overloads  is sufficient"}, {"owner": {"reputation": 1042, "user_id": 3906918, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a30818a57c11c6d808f4b9ea824e255?s=128&d=identicon&r=PG", "display_name": "fabian", "link": "https://stackoverflow.com/users/3906918/fabian"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1557930257, "post_id": 56151117, "comment_id": 98932686, "body": "@Harry Thanks for your answer! Your suggestion does indeed work. However, if I generalize the script the program fails again. For example, if I change the input <code>inp</code> to be a <code>vector</code> of <code>string</code> instead of a <code>vector</code> of <code>double</code> the other branch of the if statement in <code>doesnt_work</code> causes problems."}], "answers": [{"comments": [{"owner": {"reputation": 1042, "user_id": 3906918, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a30818a57c11c6d808f4b9ea824e255?s=128&d=identicon&r=PG", "display_name": "fabian", "link": "https://stackoverflow.com/users/3906918/fabian"}, "edited": false, "score": 0, "creation_date": 1557929791, "post_id": 56151365, "comment_id": 98932370, "body": "@Yaak, thanks for your kind and detailed answer. There&#39;s a lot to learn for me from that."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 3, "last_activity_date": 1557931201, "last_edit_date": 1557931201, "creation_date": 1557929322, "answer_id": 56151365, "question_id": 56151117, "link": "https://stackoverflow.com/questions/56151117/type-inference-for-stdstring-in-template-function-fails/56151365#56151365", "title": "Type Inference for std::string in Template Function Fails", "body": "<pre><code>template &lt;typename T&gt;\nvoid now_works(vector&lt;std::string&gt;&amp; vs, vector&lt;double&gt;&amp; vd, vector&lt;T&gt;&amp; inp) {\n  if constexpr (std::is_same&lt;T, double&gt;::value)\n    vd.push_back(inp[0]);\n  else if constexpr (std::is_same&lt;T, std::string&gt;::value)\n    vs.push_back(inp[0]);  // Line 18:  no error\n}\n</code></pre>\n\n<p>your problem is that all branches are compiled even if they aren't run.</p>\n\n<p><code>if constexpr</code> makes them compiled, then discards them at compile time, ignoring any type errors.</p>\n\n<p>The code that worked, everything could convert even if not run, so it compiled.</p>\n\n<p>The code that didn't work, the conversion you wanted to exclude is illegal, so it failed at compile time.</p>\n\n<p>Note that <code>if constexpr</code> only works because the branching clause is a compile-time constant, and because it is in a template, and the clause is dependent on the template parameters, and the code that is invalid is also dependent on the template parameters.</p>\n\n<p>If you don't have <code>if constexpr</code> yet because you are stuck on an old version of C++, you will be forced to do something ugly like tag dispatching or SFINAE with helper functions or something more arcane.</p>\n"}], "owner": {"reputation": 1042, "user_id": 3906918, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a30818a57c11c6d808f4b9ea824e255?s=128&d=identicon&r=PG", "display_name": "fabian", "link": "https://stackoverflow.com/users/3906918/fabian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 56151365, "answer_count": 1, "score": 3, "last_activity_date": 1557931201, "creation_date": 1557928561, "question_id": 56151117, "link": "https://stackoverflow.com/questions/56151117/type-inference-for-stdstring-in-template-function-fails", "title": "Type Inference for std::string in Template Function Fails", "body": "<p>I am trying to learn c++ templates. One function in a script compiles, whilst a seemingly similar function fails. The entire script is:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;string&gt;\n#include &lt;vector&gt;\nusing std::vector;\n\ntemplate &lt;typename T&gt;\nvoid works(vector&lt;int&gt;&amp; vi, vector&lt;double&gt;&amp; vd, vector&lt;T&gt;&amp; inp) {\n    if (std::is_same&lt;T, double&gt;::value)\n        vd.push_back(inp[0]);\n    else if (std::is_same&lt;T, int&gt;::value)\n        vi.push_back(inp[0]);\n}\n\ntemplate &lt;typename T&gt;\nvoid doesnt_work(vector&lt;std::string&gt;&amp; vs, vector&lt;double&gt;&amp; vd, vector&lt;T&gt;&amp; inp) {\n    if (std::is_same&lt;T, double&gt;::value)\n        vd.push_back(inp[0]);\n    else if (std::is_same&lt;T, std::string&gt;::value)\n        vs.push_back(inp[0]);  // Line 18:  no matching member function\n}\n\nint main() {\n    vector&lt;double&gt; d = {2, 3, 4};\n    vector&lt;double&gt; doubles;\n    vector&lt;std::string&gt; strings;\n    vector&lt;int&gt; ints;\n    doesnt_work(strings, doubles, d);  // Line 26: Comment out and script runs\n    works(ints, doubles, d);\n    return 0;\n}\n</code></pre>\n\n<p>The function <code>works</code> takes the two vectors <code>vi</code> and <code>vd</code> containing <code>int</code> and <code>double</code> as references, as well as a third vector with elements of type T. I then try to check for the type of <code>T</code> and push the first element of the vector <code>inp</code> into either <code>vi</code> or <code>vd</code>. In contrast, the function <code>doesnt_work</code> causes problems. Instead of accepting a vector of <code>int</code> as parameter, it accepts a vector of <code>std::string</code>. I can run the entire script when I comment out line 26. Otherwise, <code>clang++</code> tells me that </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>error: no matching member function for call to 'push_back'\n        vs.push_back(inp[0]);\n</code></pre>\n\n<p>Does somebody kindly have any idea what I am doing wrong? I do not understand why the program cannot access the function <code>push_back</code> of the vector <code>vs</code>.  </p>\n"}, {"tags": ["c++", "c++11", "c++14"], "comments": [{"owner": {"reputation": 5586, "user_id": 3309610, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4329755c47f01a17242610d2fac65859?s=128&d=identicon&r=PG", "display_name": "bremen_matt", "link": "https://stackoverflow.com/users/3309610/bremen-matt"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1557928802, "post_id": 56151112, "comment_id": 98931670, "body": "I am aware of that."}, {"owner": {"reputation": 252, "user_id": 5364211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ixqyo.jpg?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5364211/tom"}, "edited": false, "score": 0, "creation_date": 1557928889, "post_id": 56151112, "comment_id": 98931728, "body": "template template?"}, {"owner": {"reputation": 5586, "user_id": 3309610, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4329755c47f01a17242610d2fac65859?s=128&d=identicon&r=PG", "display_name": "bremen_matt", "link": "https://stackoverflow.com/users/3309610/bremen-matt"}, "reply_to_user": {"reputation": 252, "user_id": 5364211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ixqyo.jpg?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5364211/tom"}, "edited": false, "score": 0, "creation_date": 1557928958, "post_id": 56151112, "comment_id": 98931774, "body": "I don&#39;t see how a template template parameter helps here because it would not let me force the template template parameter to be a specific type (e.g. a vector). All that would let me do is perhaps suggest a default type. To my understanding..."}], "answers": [{"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1557929315, "post_id": 56151349, "comment_id": 98932028, "body": "What if <code>T</code> doesn&#39;t have <code>value_type</code>? Edit : I guess it will fail anyway, but you won&#39;t get the nice error message."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1557929440, "post_id": 56151349, "comment_id": 98932122, "body": "You&#39;ll need to write <code>std::vector&lt;typename T::value_type&gt;</code> instead of <code>std::vector&lt;T::value_type&gt;</code>."}, {"owner": {"reputation": 5586, "user_id": 3309610, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4329755c47f01a17242610d2fac65859?s=128&d=identicon&r=PG", "display_name": "bremen_matt", "link": "https://stackoverflow.com/users/3309610/bremen-matt"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1557929566, "post_id": 56151349, "comment_id": 98932213, "body": "I just saw the question you linked to. You are absolutely right this question is a duplicate. The answer to that question is much more general"}], "tags": [], "owner": {"reputation": 5586, "user_id": 3309610, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4329755c47f01a17242610d2fac65859?s=128&d=identicon&r=PG", "display_name": "bremen_matt", "link": "https://stackoverflow.com/users/3309610/bremen-matt"}, "is_accepted": false, "score": 0, "last_activity_date": 1557929289, "creation_date": 1557929289, "answer_id": 56151349, "question_id": 56151112, "link": "https://stackoverflow.com/questions/56151112/force-the-user-to-pass-a-template-parameter-of-a-known-type-which-is-itself-temp/56151349#56151349", "title": "Force the user to pass a template parameter of a known type which is itself templated", "body": "<p>Got it </p>\n\n<pre><code>template &lt;typename T&gt;\nstruct Foo {\n    static_assert( std::is_same&lt;T,std::vector&lt;T::value_type&gt;&gt;::value, \"T is not a vector you idiot\" );\n};\n</code></pre>\n"}], "owner": {"reputation": 5586, "user_id": 3309610, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4329755c47f01a17242610d2fac65859?s=128&d=identicon&r=PG", "display_name": "bremen_matt", "link": "https://stackoverflow.com/users/3309610/bremen-matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "closed_date": 1557929324, "answer_count": 1, "score": 0, "last_activity_date": 1557929289, "creation_date": 1557928550, "question_id": 56151112, "link": "https://stackoverflow.com/questions/56151112/force-the-user-to-pass-a-template-parameter-of-a-known-type-which-is-itself-temp", "closed_reason": "Duplicate", "title": "Force the user to pass a template parameter of a known type which is itself templated", "body": "<p>Suppose I have a class </p>\n\n<pre><code>template &lt;typename T&gt;\nstruct Foo {\n    T data;\n};\n</code></pre>\n\n<p>where I want to enforce the fact that <code>T</code> is a known templated type. For instance, suppose that I want <code>T</code> to be a <code>std::vector</code> of something. Now one way to handle this problem would be to redefine the class so that the template parameter is also the template parameter of the data function: </p>\n\n<pre><code>template &lt;typename S&gt;\nstruct Foo {\n    std::vector&lt;S&gt; data;\n};\n</code></pre>\n\n<p>I do not want to do that. In this specific case, it feels more natural to require the user to construct a <code>foo</code> object like this:</p>\n\n<pre><code>Foo&lt;T&lt;S&gt;&gt; f;\n</code></pre>\n\n<p>which, in the case where we want <code>T</code> to be a <code>vector</code>, looks like </p>\n\n<pre><code>Foo&lt;std::vector&lt;S&gt;&gt; f;\n</code></pre>\n\n<p>Is there anyway to keep the first form of the class, which requiring that <code>T</code> be of a specific class? Perhaps a <code>static_assert</code>? </p>\n"}, {"tags": ["c++", "windows", "winapi", "truetype"], "comments": [{"owner": {"reputation": 3035, "user_id": 1413244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BaB5H.png?s=128&g=1", "display_name": "jwezorek", "link": "https://stackoverflow.com/users/1413244/jwezorek"}, "edited": false, "score": 0, "creation_date": 1557928057, "post_id": 56150586, "comment_id": 98931202, "body": "I&#39;m not sure what you are asking for. If GetFontData(...) gives you what you want then select the font into an HDC and call it."}, {"owner": {"reputation": 283, "user_id": 7064452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fD8Jv.jpg?s=128&g=1", "display_name": "MC \u0394T", "link": "https://stackoverflow.com/users/7064452/mc-%ce%94t"}, "reply_to_user": {"reputation": 3035, "user_id": 1413244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BaB5H.png?s=128&g=1", "display_name": "jwezorek", "link": "https://stackoverflow.com/users/1413244/jwezorek"}, "edited": false, "score": 0, "creation_date": 1557928995, "post_id": 56150586, "comment_id": 98931800, "body": "@jwezorek But having a HDC implies setting up and/or binding to some sort of rendering context, no? Which I don&#39;t have and don&#39;t need. I&#39;m not doing anything like that, I don&#39;t even have a window."}, {"owner": {"reputation": 4915, "user_id": 11128312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ufn85.jpg?s=128&g=1", "display_name": "Strive Sun", "link": "https://stackoverflow.com/users/11128312/strive-sun"}, "edited": false, "score": 0, "creation_date": 1557976423, "post_id": 56150586, "comment_id": 98948634, "body": "What exactly do you mean by &quot;post&quot; table?"}, {"owner": {"reputation": 283, "user_id": 7064452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fD8Jv.jpg?s=128&g=1", "display_name": "MC \u0394T", "link": "https://stackoverflow.com/users/7064452/mc-%ce%94t"}, "edited": false, "score": 0, "creation_date": 1557979984, "post_id": 56150586, "comment_id": 98949344, "body": "It&#39;s one of the &quot;tables&quot; in the TrueType font file format, identified by the string &quot;post&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1557951910, "post_id": 56151699, "comment_id": 98943264, "body": "From <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/wingdi/nf-wingdi-createfontw\" rel=\"nofollow noreferrer\">CreateFont</a>: <i>&quot;Because available fonts can vary from system to system, do not assume that the selected font is always the same as the requested font. For example, if you request a font named Palatino, but no such font is available on the system, the font mapper will substitute a font that has similar attributes but a different name.&quot;</i>"}, {"owner": {"reputation": 3035, "user_id": 1413244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BaB5H.png?s=128&g=1", "display_name": "jwezorek", "link": "https://stackoverflow.com/users/1413244/jwezorek"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1558020937, "post_id": 56151699, "comment_id": 98970767, "body": "OP states that the font is installed and he only has its name. Given that it is installed CreateFont is guaranteed to create some version of it, there could however be multiple versions, I guess. Youd have to distinguish there by taking more care in the other parameters you provide to CreateFont betyond the font name because they will affect the matching logic"}], "tags": [], "owner": {"reputation": 3035, "user_id": 1413244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BaB5H.png?s=128&g=1", "display_name": "jwezorek", "link": "https://stackoverflow.com/users/1413244/jwezorek"}, "is_accepted": true, "score": 2, "last_activity_date": 1557944319, "last_edit_date": 1557944319, "creation_date": 1557930324, "answer_id": 56151699, "question_id": 56150586, "link": "https://stackoverflow.com/questions/56150586/getting-truetype-font-post-table-from-font-name/56151699#56151699", "title": "Getting TrueType font &quot;post&quot; table from font name", "body": "<p>You <em>can</em> call GetFontData(...) without having a window or GUI, e.g. from a command line program, by just making a dummy device context on the fly and selecting a font into it</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n#include &lt;vector&gt;\n\nstd::vector&lt;unsigned char&gt; GetFontDataByName(const wchar_t* font_name)\n{\n    HDC hdc = CreateCompatibleDC(NULL);\n\n    auto font = CreateFont(0, 0, 0, 0,\n        FW_NORMAL, FALSE, FALSE, FALSE,\n        ANSI_CHARSET, OUT_DEFAULT_PRECIS,\n        CLIP_DEFAULT_PRECIS, DEFAULT_QUALITY,\n        DEFAULT_PITCH,\n        font_name);\n    SelectObject(hdc, font);\n    auto num_bytes = GetFontData(hdc, 0, 0, NULL, 0);\n    std::vector&lt;unsigned char&gt; font_data(num_bytes);\n    auto result = GetFontData(hdc, 0, 0, &amp;(font_data[0]), num_bytes);\n\n    DeleteDC(hdc);\n\n    return font_data;\n}\n\nint main()\n{\n    auto font_data = GetFontDataByName(L\"Times New Roman\");\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 283, "user_id": 7064452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fD8Jv.jpg?s=128&g=1", "display_name": "MC \u0394T", "link": "https://stackoverflow.com/users/7064452/mc-%ce%94t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "accepted_answer_id": 56151699, "answer_count": 1, "score": 2, "last_activity_date": 1557944319, "creation_date": 1557926914, "question_id": 56150586, "link": "https://stackoverflow.com/questions/56150586/getting-truetype-font-post-table-from-font-name", "title": "Getting TrueType font &quot;post&quot; table from font name", "body": "<p>I am trying to extract the \"post\" table from an installed TrueType font, which I know only by name. How can I achieve this?</p>\n\n<p>I have seen the <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/wingdi/nf-wingdi-getfontdata\" rel=\"nofollow noreferrer\"><code>GetFontData</code></a> function, which seems to do almost exactly what I want, except that it gets the font data from the device context's currently loaded font. In my case though I do not have a device context, only the font name.<br>\nAdditionally I have seen similar queries such as <a href=\"https://stackoverflow.com/q/2227264/7064452\">this</a>, for looking up and retrieving the entire font file, but this seems unnecessarily inefficient and long-winded, given that Windows <em>can</em> already load and parse the font data (as we see for <code>GetFontData</code>). Furthermore I don't need the whole file, just the \"post\" table. Is there really no way except implementing it all myself?</p>\n"}, {"tags": ["c++", "dependencies", "linker-errors", "pacman-package-manager", "opencv4"], "comments": [{"owner": {"reputation": 1, "user_id": 11166349, "user_type": "registered", "profile_image": "https://graph.facebook.com/357926225059324/picture?type=large", "display_name": "Utkarsha Khanal", "link": "https://stackoverflow.com/users/11166349/utkarsha-khanal"}, "edited": false, "score": 0, "creation_date": 1557926897, "post_id": 56150527, "comment_id": 98930433, "body": "i used <code>pkg-config --cflags --libs opencv4</code> because there was not opencv.pc file on /usr/pkgconfig/. opencv4.pc file contains the same content as opencv.pc so there is no problem in this file."}], "answers": [{"tags": [], "owner": {"reputation": 1872, "user_id": 2104472, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/18805ffb0c3acfbd23cd6c84951afafc?s=128&d=identicon&r=PG&f=1", "display_name": "Vladislav Ivanishin", "link": "https://stackoverflow.com/users/2104472/vladislav-ivanishin"}, "is_accepted": false, "score": 0, "last_activity_date": 1557933077, "creation_date": 1557933077, "answer_id": 56152596, "question_id": 56150527, "link": "https://stackoverflow.com/questions/56150527/i-am-getting-linking-error-while-compilong-opencv4-basic-program/56152596#56152596", "title": "I am getting linking error while compilong opencv4 basic program?", "body": "<p>opencv libraries themselves are there but <code>libopencv_viz.so</code> requires some symbols from the vtk library, which is listed as an <a href=\"https://wiki.archlinux.org/index.php/PKGBUILD#optdepends\" rel=\"nofollow noreferrer\">optional dependency</a> in opencv's <code>PKGBUILD</code>. </p>\n\n<p>You should either just install it yourself (e.g. <code>pacman -S [--asdeps] vtk</code>), or complain to <code>PKGBUILD</code> maintaintes if you think the dependency should be made non-optional.</p>\n"}], "owner": {"reputation": 1, "user_id": 11166349, "user_type": "registered", "profile_image": "https://graph.facebook.com/357926225059324/picture?type=large", "display_name": "Utkarsha Khanal", "link": "https://stackoverflow.com/users/11166349/utkarsha-khanal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 602, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557936687, "creation_date": 1557926773, "last_edit_date": 1557936687, "question_id": 56150527, "link": "https://stackoverflow.com/questions/56150527/i-am-getting-linking-error-while-compilong-opencv4-basic-program", "title": "I am getting linking error while compilong opencv4 basic program?", "body": "<p>I installed the OpenCV with the Pacman command. But i am getting hundred of lines of linking error. I compiled my program with the command</p>\n\n<pre><code>gcc example.cpp -o example `pkg-config --cflags --libs opencv4`\n</code></pre>\n\n<p>and the small part of the linking error is as follows.</p>\n\n<pre><code>usr/bin/ld: /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/../../../../lib/libopencv_viz.so: undefined reference to `vtkRenderingFreeType_AutoInit_Destruct()'\n/usr/bin/ld: /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/../../../../lib/libopencv_viz.so: undefined reference to `vtkInteractorStyle::StartTwoPointer()'\n/usr/bin/ld: /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/../../../../lib/libopencv_viz.so: undefined reference to `vtkInteractorStyle::EndZoom()'\n/usr/bin/ld: /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/../../../../lib/libopencv_viz.so: undefined reference to `vtkSmartPointerBase::operator=(vtkObjectBase*)'\n/usr/bin/ld: /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/../../../../lib/libopencv_viz.so: undefined reference to `vtkOStrStreamWrapper::freeze(int)'\n/usr/bin/ld: /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/../../../../lib/libopencv_viz.so: undefined reference to `vtkCamera::SetUserTransform(vtkHomogeneousTransform*)'\n/usr/bin/ld: /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/../../../../lib/libopencv_viz.so: undefined reference to `vtkCommand::UnRegister()'\n/usr/bin/ld: /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/../../../../lib/libopencv_viz.so: undefined reference to `vtkRenderer::New()'\n/usr/bin/ld: /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/../../../../lib/libopencv_viz.so: undefined reference to `vtkInteractorStyle::StartDolly()'\n/usr/bin/ld: /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/../../../../lib/libopencv_viz.so: undefined reference to `vtkRenderer::SetActiveCamera(vtkCamera*)'\n/usr/bin/ld: /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/../../../../lib/libopencv_viz.so: undefined reference to `vtkInteractorObserver::ReleaseFocus()'\n/usr/bin/ld: /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/../../../../lib/libopencv_viz.so: undefined reference to `vtkInteractorObserver::ComputeDisplayToWorld(double, double, double, double*)'\n/usr/bin/ld: /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/../../../../lib/libopencv_viz.so: undefined reference to `vtkAlgorithm::Update(vtkInformation*)'\n/usr/bin/ld: /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/../../../../lib/libopencv_viz.so: undefined reference to `vtkMatrix4x4::New()'\n</code></pre>\n"}, {"tags": ["c++", "json", "visual-studio-code", "mingw"], "comments": [{"owner": {"reputation": 2236, "user_id": 11384392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j5bfH.jpg?s=128&g=1", "display_name": "Das_Geek", "link": "https://stackoverflow.com/users/11384392/das-geek"}, "edited": false, "score": 1, "creation_date": 1557928381, "post_id": 56150443, "comment_id": 98931404, "body": "You&#39;ll probably find <a href=\"https://stackoverflow.com/questions/41847967/during-startup-program-exited-with-code-0xc0000139\">this question</a> useful"}], "owner": {"reputation": 43, "user_id": 10428909, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-j76vFTg7BE0/AAAAAAAAAAI/AAAAAAAAA_s/oejHTjzkC6Y/photo.jpg?sz=128", "display_name": "Forever Beginner", "link": "https://stackoverflow.com/users/10428909/forever-beginner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 601, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1557929124, "creation_date": 1557926468, "last_edit_date": 1557929124, "question_id": 56150443, "link": "https://stackoverflow.com/questions/56150443/i-cant-start-debugging-with-gdb-from-mingw", "title": "I can&#39;t start debugging with gdb from mingw", "body": "<p>I'm following <a href=\"https://code.visualstudio.com/docs/cpp/config-mingw\" rel=\"nofollow noreferrer\">this guide</a> about using mingw with c++ in VSCode, but I got stuck in the step that has me start debugging. The VSCode console gave me this error:</p>\n\n<blockquote>\n  <p>ERROR: Unable to start debugging. GDB exited unexpectedly.\n  The program 'G:\\ccompiler\\projects\\helloworld\\helloworld.exe' has exited with code 0 (0x00000000).</p>\n  \n  <p>ERROR: During startup program exited with code 0xc0000139.</p>\n</blockquote>\n\n<p>Can someone help me fix this issue? My code and JSON files are exactly the same as the guide's except for my compiler and debugger path to the mingw folder.</p>\n\n<p>My <code>launch.json</code>: </p>\n\n<pre><code>{\n    \"version\": \"0.2.0\",\n     \"configurations\": [\n\n         {\n             \"name\": \"(gdb) Launch\",\n             \"type\": \"cppdbg\",\n             \"request\": \"launch\",\n             \"program\": \"${workspaceFolder}/helloworld.exe\",\n             \"args\": [],\n             \"stopAtEntry\": true,\n             \"cwd\": \"${workspaceFolder}\",\n             \"environment\": [],\n             \"externalConsole\": false,\n             \"MIMode\": \"gdb\",\n             \"miDebuggerPath\": \"G:/ccompiler/mingw32/bin/gdb.exe\",\n             \"setupCommands\": [\n                 {\n                     \"description\": \"Enable pretty-printing for gdb\",\n                     \"text\": \"-enable-pretty-printing\",\n                     \"ignoreFailures\": true\n                 }\n             ]\n         }\n     ]\n }\n</code></pre>\n\n<p>My source code: </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint main()\n{\n\n    vector&lt;string&gt; msg {\"Hello\", \"C++\", \"World\", \"from\", \"VS Code!\"};\n\n    for (const string&amp; word : msg)\n    {\n        cout &lt;&lt; word &lt;&lt; \" \";\n    }\n    cout &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "winapi", "libcurl"], "comments": [{"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 1, "creation_date": 1557926505, "post_id": 56150358, "comment_id": 98930138, "body": "On Linux build libcurl with NSS support. On Windows build libcurl with schannel support and disable openssl. Look <a href=\"https://curl.haxx.se/docs/sslcerts.html\" rel=\"nofollow noreferrer\">here</a> for more details."}, {"owner": {"reputation": 43751, "user_id": 93747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf187b5b45c400649ed7f946e8f00d6?s=128&d=identicon&r=PG", "display_name": "Daniel Stenberg", "link": "https://stackoverflow.com/users/93747/daniel-stenberg"}, "edited": false, "score": 0, "creation_date": 1557958958, "post_id": 56150358, "comment_id": 98945581, "body": "If you&#39;re on macOS or Windows, you can build with the native TLS libraries and use their native cert stores. If you&#39;re on Linux, you need to use a separate CA cert file but your Linux distributions provide/update them..."}], "answers": [{"tags": [], "owner": {"reputation": 6168, "user_id": 10611792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r727s.jpg?s=128&g=1", "display_name": "Drake Wu", "link": "https://stackoverflow.com/users/10611792/drake-wu"}, "is_accepted": false, "score": 0, "last_activity_date": 1557989602, "creation_date": 1557989602, "answer_id": 56162466, "question_id": 56150358, "link": "https://stackoverflow.com/questions/56150358/https-is-not-supported-in-libcurl-window-alertnative-than-using-curlopt-cainfo/56162466#56162466", "title": "Https is not supported in libcurl window alertnative than using CURLOPT_CAINFO", "body": "<p>For Windows,</p>\n\n<p>If you want to use windows own \"CA certificate\", You need to rebuild curl to with schannel backend instead(aka \"winssl\"). It will access from windows cert store by default. Openssl does not support to use windows system certificate on its own(see this <a href=\"https://stackoverflow.com/questions/37551409/configure-curl-to-use-default-system-cert-store\">answer</a>), and must specify the certificate in PEM format, or set the default certificate when building libcurl with parameter <code>--with-ca-bundle</code> and <code>--with-ca-path</code>.</p>\n\n<p>For Linux,</p>\n\n<p>According to the <a href=\"https://curl.haxx.se/docs/sslcerts.html\" rel=\"nofollow noreferrer\">document</a>:</p>\n\n<blockquote>\n  <p>If libcurl was built with NSS support, then depending on the OS\n  distribution, it is probably required to take some additional steps to\n  use the system-wide CA cert db. RedHat ships with an additional\n  module, libnsspem.so, which enables NSS to read the OpenSSL PEM CA\n  bundle.</p>\n</blockquote>\n"}], "owner": {"reputation": 76, "user_id": 7478155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c18e7fc944fd1396ebeb66fe42d8982?s=128&d=identicon&r=PG&f=1", "display_name": "stormForce", "link": "https://stackoverflow.com/users/7478155/stormforce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557989602, "creation_date": 1557926210, "question_id": 56150358, "link": "https://stackoverflow.com/questions/56150358/https-is-not-supported-in-libcurl-window-alertnative-than-using-curlopt-cainfo", "title": "Https is not supported in libcurl window alertnative than using CURLOPT_CAINFO", "body": "<p>We are using libcurl (7.3.6) in our application. API call for \"Https URL\" giving \"curle_ssl_cacert error\". I have been able to resolve this using </p>\n\n<pre><code>    curl_easy_setopt(curl, CURLOPT_CAINFO, \"PATH\\\\curl-ca-bundle.crt\"); \n</code></pre>\n\n<p>but we don't want to maintain this file in our application. Is there any way we can directly access from OS or from an alternative location?</p>\n"}, {"tags": ["c++", "c", "pointers", "structure", "fread"], "comments": [{"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1557925396, "post_id": 56149988, "comment_id": 98929418, "body": "Post the code you tried.  It&#39;s impossible to know what&#39;s wrong without seeing your code."}, {"owner": {"reputation": 1025, "user_id": 1080000, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/KKv1g.jpg?s=128&g=1", "display_name": "Vishwadeep Singh", "link": "https://stackoverflow.com/users/1080000/vishwadeep-singh"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1557926285, "post_id": 56149988, "comment_id": 98930003, "body": "@AndrewHenle Thanks for replying. Please check my code"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1557926541, "post_id": 56149988, "comment_id": 98930164, "body": "If you want to write the data with one fwrite call you&#39;ll need to construct a buffer in memory with the data in a suitable format as described in the answers below. You need to write the string data, not the pointer, and you need to know the length, neither of which is possible in one fwrite call using that struct."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1557926712, "post_id": 56149988, "comment_id": 98930294, "body": "You should choose one language which for this code looks like C."}, {"owner": {"reputation": 1025, "user_id": 1080000, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/KKv1g.jpg?s=128&g=1", "display_name": "Vishwadeep Singh", "link": "https://stackoverflow.com/users/1080000/vishwadeep-singh"}, "edited": false, "score": 0, "creation_date": 1557926766, "post_id": 56149988, "comment_id": 98930330, "body": "Thanks. c++ and c, both can fullfill my goal. hence thought of asking both experts"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1557926843, "post_id": 56149988, "comment_id": 98930393, "body": "If you want a C++ answer then why are you using <code>fwrite</code> and <code>struct st varr;</code>?"}, {"owner": {"reputation": 1025, "user_id": 1080000, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/KKv1g.jpg?s=128&g=1", "display_name": "Vishwadeep Singh", "link": "https://stackoverflow.com/users/1080000/vishwadeep-singh"}, "edited": false, "score": 0, "creation_date": 1557926883, "post_id": 56149988, "comment_id": 98930422, "body": "using cstdlib header"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1557926958, "post_id": 56149988, "comment_id": 98930467, "body": "You are writing pointer values to a file. This doesn&#39;t make sense. Read the chapter dealing with pointers in your C text book first."}], "answers": [{"comments": [{"owner": {"reputation": 1025, "user_id": 1080000, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/KKv1g.jpg?s=128&g=1", "display_name": "Vishwadeep Singh", "link": "https://stackoverflow.com/users/1080000/vishwadeep-singh"}, "edited": false, "score": 0, "creation_date": 1557926036, "post_id": 56150141, "comment_id": 98929828, "body": "thanks for your reply. Is there any way i can write in one step? and also read in one step. Because, 2-3 steps is costing me much for several files in a loop. If it can happen in one read and write will optimize my code."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 1025, "user_id": 1080000, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/KKv1g.jpg?s=128&g=1", "display_name": "Vishwadeep Singh", "link": "https://stackoverflow.com/users/1080000/vishwadeep-singh"}, "edited": false, "score": 1, "creation_date": 1557926129, "post_id": 56150141, "comment_id": 98929891, "body": "Nonsense. &quot;optimize my code&quot;. You are just lazy in typing? The above is the way to proceed."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 1025, "user_id": 1080000, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/KKv1g.jpg?s=128&g=1", "display_name": "Vishwadeep Singh", "link": "https://stackoverflow.com/users/1080000/vishwadeep-singh"}, "edited": false, "score": 1, "creation_date": 1557926275, "post_id": 56150141, "comment_id": 98929998, "body": "@VishwadeepSingh You&#39;re asking <i>how</i> to do basic IO.  Don&#39;t worry about optimizing yet."}, {"owner": {"reputation": 1025, "user_id": 1080000, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/KKv1g.jpg?s=128&g=1", "display_name": "Vishwadeep Singh", "link": "https://stackoverflow.com/users/1080000/vishwadeep-singh"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1557926393, "post_id": 56150141, "comment_id": 98930077, "body": "@AndrewHenle no, doing fwrite in one step is my goal, along with the string saved in char *"}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 1025, "user_id": 1080000, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/KKv1g.jpg?s=128&g=1", "display_name": "Vishwadeep Singh", "link": "https://stackoverflow.com/users/1080000/vishwadeep-singh"}, "edited": false, "score": 2, "creation_date": 1557926836, "post_id": 56150141, "comment_id": 98930388, "body": "@VishwadeepSingh Do you even know how <code>fwrite()</code> works and how to optimize that?  Do you know how your filesystem works and how to optimize that?  Do you know how your disk controller(s) work and how to optimize the way you do IO to take advantage of their particular performance characteristics?  Do you know how your disk(s) themselves work?  And if you do, do you know how much faster your &quot;optimized&quot; IO would be?  <b>Write clear, understandable code.</b>  Don&#39;t worry about optimizing until you have a known performance problem to solve. Then if it&#39;s an IO problem, go buy a faster disk."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 1025, "user_id": 1080000, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/KKv1g.jpg?s=128&g=1", "display_name": "Vishwadeep Singh", "link": "https://stackoverflow.com/users/1080000/vishwadeep-singh"}, "edited": false, "score": 0, "creation_date": 1557927246, "post_id": 56150141, "comment_id": 98930656, "body": "@VishwadeepSingh you cannot do this with a single <code>fwrite</code> and there are no &quot;tricks&quot;. Do as suggested in this answer, it&#39;s the best you can do. Worry about optimisation later. That&#39;s the professional way of approaching things. If the structure was with <code>char p[MAXLENTH]</code> instead of <code>char *p</code>, then, and only then you can do a single <code>fwrite</code> and a single <code>fread</code>."}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 4, "last_activity_date": 1557927854, "last_edit_date": 1557927854, "creation_date": 1557925574, "answer_id": 56150141, "question_id": 56149988, "link": "https://stackoverflow.com/questions/56149988/read-structure-from-binary-file-having-pointer-pointed-to-memory/56150141#56150141", "title": "read structure from binary file having pointer pointed to memory", "body": "<p>There is no use writing this to a binary file. A text file would suffice.</p>\n\n<p>However, if this is your homework assignment (or so), I suggest you proceed as follows:</p>\n\n<ul>\n<li><p>write the length as an integer;</p></li>\n<li><p>write <code>len</code> bytes of the string. This does not include a terminating null.</p></li>\n</ul>\n\n<p>When reading back:</p>\n\n<ul>\n<li><p>read the integer length;</p></li>\n<li><p>allocate memory of this length <em>plus one byte</em></p></li>\n<li><p>read the string into that memory and <em>add the terminating null</em>.</p></li>\n</ul>\n\n<p>Fill your structure with this length and the pointer to allocated memory.</p>\n\n<hr>\n\n<p>In your comments you keep iterating you want to read and write in one step. <em>With your current data structure that is not possible</em> because the character string wil always be somewhere else in memory and <code>fwrite</code> can only write a contiguous block of memory.</p>\n\n<p>However, would you change your data structure to:</p>\n\n<pre><code>struct st{\n    char p[128];\n    int len;\n};\n</code></pre>\n\n<p>then you <em>can</em> write and read in one go because now the struct is a contiguous memory block. But now the string is limited to this 128 bytes(or any size you make it).</p>\n"}, {"comments": [{"owner": {"reputation": 1025, "user_id": 1080000, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/KKv1g.jpg?s=128&g=1", "display_name": "Vishwadeep Singh", "link": "https://stackoverflow.com/users/1080000/vishwadeep-singh"}, "edited": false, "score": 0, "creation_date": 1557926113, "post_id": 56150154, "comment_id": 98929877, "body": "no saving the address will not help. Hence i am finding a way to write the whole structure in a binary in one fwrite, with the string as well. Is there any way i can do"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1557926247, "post_id": 56150154, "comment_id": 98929970, "body": "Change <code>char *</code> to <code>char []</code>?"}, {"owner": {"reputation": 1025, "user_id": 1080000, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/KKv1g.jpg?s=128&g=1", "display_name": "Vishwadeep Singh", "link": "https://stackoverflow.com/users/1080000/vishwadeep-singh"}, "edited": false, "score": 0, "creation_date": 1557926342, "post_id": 56150154, "comment_id": 98930040, "body": "i cannot change the structure"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "reply_to_user": {"reputation": 1025, "user_id": 1080000, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/KKv1g.jpg?s=128&g=1", "display_name": "Vishwadeep Singh", "link": "https://stackoverflow.com/users/1080000/vishwadeep-singh"}, "edited": false, "score": 0, "creation_date": 1557926405, "post_id": 56150154, "comment_id": 98930087, "body": "@VishwadeepSingh Then you have to have two <code>fwrite</code> ."}, {"owner": {"reputation": 1025, "user_id": 1080000, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/KKv1g.jpg?s=128&g=1", "display_name": "Vishwadeep Singh", "link": "https://stackoverflow.com/users/1080000/vishwadeep-singh"}, "reply_to_user": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1557926471, "post_id": 56150154, "comment_id": 98930122, "body": "there cannot be any other way? @kiranBiradar"}, {"owner": {"reputation": 71, "user_id": 9102657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cbcf538013f60f41df07644fcce36b9?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Dipak", "link": "https://stackoverflow.com/users/9102657/luis-dipak"}, "edited": false, "score": 0, "creation_date": 1557926567, "post_id": 56150154, "comment_id": 98930180, "body": "Nope, mate: a) fwrite(  fp, &quot;%d&quot;, strlen(p) ); b) fputs(fp, p); or fwrite( fp, &quot;%s&quot;, p );"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "reply_to_user": {"reputation": 1025, "user_id": 1080000, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/KKv1g.jpg?s=128&g=1", "display_name": "Vishwadeep Singh", "link": "https://stackoverflow.com/users/1080000/vishwadeep-singh"}, "edited": false, "score": 0, "creation_date": 1557926600, "post_id": 56150154, "comment_id": 98930206, "body": "@VishwadeepSingh Nope, you know the reason."}, {"owner": {"reputation": 1025, "user_id": 1080000, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/KKv1g.jpg?s=128&g=1", "display_name": "Vishwadeep Singh", "link": "https://stackoverflow.com/users/1080000/vishwadeep-singh"}, "edited": false, "score": 0, "creation_date": 1557926818, "post_id": 56150154, "comment_id": 98930368, "body": "Thanks. I knew logically it is not possible. I thought any trick or something might be available."}], "tags": [], "owner": {"reputation": 71, "user_id": 9102657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cbcf538013f60f41df07644fcce36b9?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Dipak", "link": "https://stackoverflow.com/users/9102657/luis-dipak"}, "is_accepted": false, "score": 1, "last_activity_date": 1557925607, "creation_date": 1557925607, "answer_id": 56150154, "question_id": 56149988, "link": "https://stackoverflow.com/questions/56149988/read-structure-from-binary-file-having-pointer-pointed-to-memory/56150154#56150154", "title": "read structure from binary file having pointer pointed to memory", "body": "<p>I would suggest saving the strlen(p) first, followed by all the chars pointed by char *p. If you try to fwrite the struct as it is, you'll end up (in the file) with the value for the address with regrads to the first char. You do not want to save the address of the 1st char, do you?</p>\n"}, {"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1557928935, "post_id": 56150676, "comment_id": 98931754, "body": "It&#39;s your answer, so it&#39;s up to you to find a solution. It could be done with a similar trick as for the write part."}], "tags": [], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "is_accepted": true, "score": 0, "last_activity_date": 1557935147, "last_edit_date": 1557935147, "creation_date": 1557927218, "answer_id": 56150676, "question_id": 56149988, "link": "https://stackoverflow.com/questions/56149988/read-structure-from-binary-file-having-pointer-pointed-to-memory/56150676#56150676", "title": "read structure from binary file having pointer pointed to memory", "body": "<p>If you are so much concerned about not having two <code>fwrite</code> you can have wrapper structure with zero length array.</p>\n\n<pre><code> struct st_wrap {\n         int len; \n         char p[0];\n };\n\nstruct st_wrap *temp= malloc (sizeof (struct st_wrap ) + strlen(varr.p)+1);\ntemp-&gt;len = strlen(varr.p);\n\n//Copy the data\nstrcpy(temp-&gt;p,varr.p);\n\n//Then write it to file\nfwrite(temp,sizeof(struct st_wrap)+strlen(varr.p),1,p);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9606, "user_id": 3677097, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8c49e598194e53b9aba3a195da387a5?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas DM", "link": "https://stackoverflow.com/users/3677097/andreas-dm"}, "is_accepted": false, "score": 0, "last_activity_date": 1557931626, "last_edit_date": 1557931626, "creation_date": 1557930619, "answer_id": 56151813, "question_id": 56149988, "link": "https://stackoverflow.com/questions/56149988/read-structure-from-binary-file-having-pointer-pointed-to-memory/56151813#56151813", "title": "read structure from binary file having pointer pointed to memory", "body": "<p>Assuming you have written the length and string to binary file:</p>\n\n<pre><code>FILE* fp = fopen(\"file.bin\", \"wb\");\n\n/* writing */\nst str = { .p = \"foo\", .len = 3 };\nfwrite((char*)(&amp;str.len), sizeof(str.len), sizeof(str.len), fp);\nfwrite(str.p, str.len, str.len, fp);\n</code></pre>\n\n<p>You can now (in a different context) read the content from file into the struct object:</p>\n\n<pre><code>FILE* fp = fopen(\"file.bin\", \"rb\");\nst str;\n/* read length */\nfread((char*)&amp;str.len, sizeof(str.len), sizeof(str.len), fp);\n/* allocate enough space */\nstr.p = malloc((str.len + 1) * sizeof(char));\n/* read string */\nfread(str.p, str.len + 1, str.len + 1, fp);\n</code></pre>\n\n<p>Remember to free memory when you're done with <code>p</code>:</p>\n\n<pre><code>free(str.p);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1025, "user_id": 1080000, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/KKv1g.jpg?s=128&g=1", "display_name": "Vishwadeep Singh", "link": "https://stackoverflow.com/users/1080000/vishwadeep-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1557989876, "creation_date": 1557989876, "answer_id": 56162521, "question_id": 56149988, "link": "https://stackoverflow.com/questions/56149988/read-structure-from-binary-file-having-pointer-pointed-to-memory/56162521#56162521", "title": "read structure from binary file having pointer pointed to memory", "body": "<p>I tried lot of ways, but @kiran Biradar's answer helped me a lot. hence displaying the working code here. </p>\n\n<p>WriteBinaryFile.cpp</p>\n\n<pre><code>    struct st_wrap {\n            int len;\n            int crc;\n            char p[0]; \n    };\n\n\n    int main ()\n    {\n            char p[100] = \"Hello World\";\n            struct st_wrap *temp= (struct st_wrap*) malloc (sizeof (struct st_wrap ) + strlen(p)+1);\n            temp-&gt;len = strlen(p);\n            temp-&gt;crc = 400;\n            strcpy(temp-&gt;p,p);\n            cout &lt;&lt; temp-&gt;p &lt;&lt; endl;\n            cout &lt;&lt; temp-&gt;len &lt;&lt; endl;\n            cout &lt;&lt; temp-&gt;crc &lt;&lt; endl;\n\n            FILE *p1;\n            p1=fopen(\"binary.dat\",\"wb\");\n            fwrite(temp,sizeof(struct st_wrap)+strlen(p),1,p1);\n            fclose(p1);\n\n    }\n</code></pre>\n\n<p>ReadBinaryFile.cpp</p>\n\n<pre><code>struct st_wrap {\n        int len;\n        int crc;\n        char p[0];\n};\n\n\nint main ()\n{\n        struct st_wrap *vw;\n        FILE *f=fopen(\"binary.dat\",\"rb\");\n        fseek(f, 0, SEEK_END);\n        long int filesize = ftell(f);\n        fseek(f, 0, SEEK_SET);\n        vw = (struct st_wrap*) malloc (filesize);\n        fread(vw,filesize,1,f);\n        cout &lt;&lt; vw-&gt;len &lt;&lt; endl;\n        cout &lt;&lt; vw-&gt;p &lt;&lt; endl;\n        cout &lt;&lt; vw-&gt;crc &lt;&lt; endl;\n        return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1025, "user_id": 1080000, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/KKv1g.jpg?s=128&g=1", "display_name": "Vishwadeep Singh", "link": "https://stackoverflow.com/users/1080000/vishwadeep-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 830, "favorite_count": 0, "accepted_answer_id": 56150676, "answer_count": 5, "score": 0, "last_activity_date": 1557989876, "creation_date": 1557925169, "last_edit_date": 1557926258, "question_id": 56149988, "link": "https://stackoverflow.com/questions/56149988/read-structure-from-binary-file-having-pointer-pointed-to-memory", "title": "read structure from binary file having pointer pointed to memory", "body": "<pre><code>struct st {\n        char *p;\n        int len;\n};\n</code></pre>\n\n<p>this is the structure which i need to write to a binary file, along with the string which is saved in </p>\n\n<p><code>char *p</code> </p>\n\n<p>I am supposed to write a binary file with the char array data. After writing to binary file. Is should also be able to read it in the same structure from binary file.</p>\n\n<p>I tried using FSEEK_END to get the binary size, and doing fread according to file size, but it is not saving string. Please suggest. Any help/suggestion/pointer would be appreciated.</p>\n\n<p>thanks in advance.</p>\n\n<p>sample code:</p>\n\n<pre><code> struct st {\n         char *p;\n         int len; \n };\n\n struct st varr;\n varr.len = 100;\n varr.p = new char[gen];\n strcpy(varr.p, \"Hello World\");\n\n FILE *p;\n p=fopen(\"address\",\"wb\");\n fwrite(&amp;varr,sizeof(struct st),1,p);\n fclose(p); \n</code></pre>\n\n<p>this will write me the pointer to the binary file. But i want to write here whole string, but the point is, it should done with one fwrite.</p>\n"}, {"tags": ["python", "c++", "keras"], "owner": {"reputation": 93, "user_id": 9923611, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JUV1SF1RUec/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0Mq6SnV1rI1n-Z8wLhtSrAG8iQtQ/mo/photo.jpg?sz=128", "display_name": "Sidharth Agarwal", "link": "https://stackoverflow.com/users/9923611/sidharth-agarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "closed_date": 1557926069, "answer_count": 0, "score": 1, "last_activity_date": 1558505341, "creation_date": 1557925112, "last_edit_date": 1558505341, "question_id": 56149964, "link": "https://stackoverflow.com/questions/56149964/keras-model-for-text-prediction-from-python-to-c", "closed_reason": "Duplicate", "title": "Keras Model for text-prediction from Python to C++", "body": "<p>I have created LSTM network using Keras for next word prediction based on the context of the previous words in a sentence. I have written the code in Python, but have to deploy it with existing code of C++. So how to translate this chunk of code to C++ as I am new to it and I have been using built-in functions in python for the same.</p>\n\n<p>I have been trying to convert each and every line of python code to C++ but that is consuming a lot of time, also I am not even able to read hdf5 and pkl files in C++.\nPython Code :</p>\n\n<pre><code>    from pickle import load\n    from keras.models import load_model\n    from keras.preprocessing.sequence import pad_sequences\n\n\ndef generate_seq(model, tokenizer, seq_length, seed_text, no_next_words):\n    result = []\n    in_text = seed_text\n\n    for _ in range(no_next_words):\n        # encode the text as integer\n        encoded = tokenizer.texts_to_sequences([in_text])[0]\n        # convert sequences to a fixed length\n        encoded = pad_sequences([encoded], maxlen=seq_length, truncating='pre')\n        # predict probabilities for each word\n        yhat = model.predict_classes(encoded, verbose=0)\n        # map predicted word index to word\n        out_word = ''\n        for word, index in tokenizer.word_index.items():\n            if index == yhat:\n                out_word = word\n                break\n        # append to input\n        in_text += ' ' + out_word\n        result.append(out_word)\n    return ' '.join(result)\n\n# load the model\nmodel = load_model('model_chat2_3.h5')\n\n# load the tokenizer\ntokenizer = load(open('tokenizer_chat2_3.pkl', 'rb'))\n\n# generate new text\nwhile(True):\n  inp = input(\"Enter:\")\n  generated = generate_seq(model, tokenizer, 2,inp, 1)\n  print(generated)\n</code></pre>\n\n<p>C++ code :</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;typeinfo&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main(int argc, const char * argv[]) {\nifstream myReadFile,myReadFile2;\n\nmyReadFile.open(\"/Users/Apple/New word_prediction/word_prediction/data/colab models/chat2_2/tokenizer_chat2_2.pkl\");\nmyReadFile2.open(\"/Users/Apple/New word_prediction/word_prediction/data/colab models/chat2_2/model_chat2_2.h5\");\n        char output[1200];\n        if (myReadFile.is_open()) {\n\n            while (!myReadFile.eof()) {\n                myReadFile &gt;&gt; output;\n                cout&lt;&lt;output&lt;&lt;endl;\n    }\n        }\n        myReadFile.close();\n        myReadFile2.close();\n        return 0;\n\n    }\n</code></pre>\n\n<p>The output of C++ comes out to be some encoded string.</p>\n\n<p>I tried referring to the previous answers but all of them are built very specifically to their use-cases.\nFor e.g :\n<a href=\"https://stackoverflow.com/questions/36720498/convert-keras-model-to-c\">Convert Keras model to C++</a>.\nBasically, I have built keras model using LSTM networks(hidden layers: LSTM) while in the above link, it's built for CNN network, with completely different architecture. If I follow the above link I will have to completely change the code.\nAlso in the other similar repositories, they work for CNN for image processing, but in my use case, I have to predict next words based on the context of previous words, through LSTM network. \nThis model has good accuracy on the console, but it has to be tested on the real-time keyboard of mobile applications.</p>\n\n<p>So my question is that if there is a method or tool through which I can convert some of the code to C++ or at least how can I read the keras model built on LSTM network(model_chat2_3.h5) and tokenizer_chat2_3.pkl files into C++.\nAlso if someone can guide me to directly deploy the keras model on the mobile application, to work as a keyboard. Again all existing repositories are made to deploy CNN based models on the mobile app to do image related things</p>\n\n<p>I am new to C++ so not able to write the complete code for it, as I have a time constraint. Any sort of help is appreciated!</p>\n"}, {"tags": ["c++", "eigen"], "comments": [{"owner": {"reputation": 52185, "user_id": 1782792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e8dde1ee800b9687983617bbea3cb9b?s=128&d=identicon&r=PG&f=1", "display_name": "jdehesa", "link": "https://stackoverflow.com/users/1782792/jdehesa"}, "edited": false, "score": 0, "creation_date": 1557926045, "post_id": 56149926, "comment_id": 98929835, "body": "Is something like this faster? <code>Eigen::MatrixXf car = ((a.transpose().array().rowwise() * a.colwise().sum()).colwise() * a.rowwise().sum()).matrix()</code>."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 2, "creation_date": 1557926059, "post_id": 56149926, "comment_id": 98929841, "body": "You honestly expect multiplying an 8000x8000 matrix by a 16000x8000 to be fast?    Unless you know something about the structure of the matrix, and that something can be exploited, your chances of getting decent speed will be remote."}, {"owner": {"reputation": 43, "user_id": 11504197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f7ac3da5325f9654116cd49b8cfac55?s=128&d=identicon&r=PG&f=1", "display_name": "j_natt", "link": "https://stackoverflow.com/users/11504197/j-natt"}, "edited": false, "score": 1, "creation_date": 1557931494, "post_id": 56149926, "comment_id": 98933536, "body": "I did not expect it to be fast. I was hoping that I was overlooking something incredibly easy and obvious. It looks like I was. Thank you for the comment!"}], "answers": [{"tags": [], "owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "is_accepted": true, "score": 6, "last_activity_date": 1557927093, "creation_date": 1557927093, "answer_id": 56150635, "question_id": 56149926, "link": "https://stackoverflow.com/questions/56149926/matrix-multiplication-optimization/56150635#56150635", "title": "Matrix multiplication optimization", "body": "<p>You are doing way too much work here. If you have diagonal matrices, only store the diagonal (and directly use that for products). Once you store a diagonal matrix in a square matrix, the information of the structure is lost to Eigen.</p>\n\n<p>Also, you don't need to store the transposed variant of <code>a</code>, just use <code>a.transpose()</code> inside a product (that is only a minor issue here ...)</p>\n\n<pre><code>// setup matrices\nint size = 8000;\n\nEigen::MatrixXf a(size*2,size);\n\n// fill matrix a....\na.setRandom();\n\nEigen::VectorXf r = a.rowwise().sum(); // diagonal matrix of row sums of a\nEigen::VectorXf c = a.colwise().sum(); // diagonal matrix of col sums of a\n\nEigen::MatrixXf car = c.asDiagonal() * a.transpose() * r.asDiagonal();\n</code></pre>\n\n<p>Finally, of course make sure to compile with optimization enabled, and enable vectorization if available (with gcc or clang compile with <code>-O2 -march=native</code>).</p>\n"}], "owner": {"reputation": 43, "user_id": 11504197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f7ac3da5325f9654116cd49b8cfac55?s=128&d=identicon&r=PG&f=1", "display_name": "j_natt", "link": "https://stackoverflow.com/users/11504197/j-natt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 56150635, "answer_count": 1, "score": 4, "last_activity_date": 1557927093, "creation_date": 1557925004, "last_edit_date": 1557925120, "question_id": 56149926, "link": "https://stackoverflow.com/questions/56149926/matrix-multiplication-optimization", "title": "Matrix multiplication optimization", "body": "<p>I am performing a series of matrix multiplications with fairly large matrices. To run through all of these operations takes a long time, and I need my program to do this in a large loop. I was wondering if anyone has any ideas to speed this up? I just started using Eigen, so I have very limited knowledge.</p>\n\n<p>I was using ROOT-cern's built in TMatrix class, but the speed for performing the matrix operations is very poor. I set up some diagonal matrices using Eigen with the hope that it handled the multiplication operation in a more optimal way. It may, but I cannot really see the performance difference.</p>\n\n<pre><code>// setup matrices\nint size = 8000;\n\nEigen::MatrixXf a(size*2,size);\n\n// fill matrix a....\n\nEigen::MatrixXf r(2*size,2*size); // diagonal matrix of row sums of a\n\n// fill matrix r\n\nEigen::MatrixXf c(size,size); // diagonal matrix of col sums of a\n\n// fill matrix c\n\n// transpose a in place\na.transposeInPlace();\n\nEigen::MatrixXf c_dia;\nc_dia = c.diagonal().asDiagonal();\n\nEigen::MatrixXf r_dia;\nr_dia = r.diagonal().asDiagonal();\n\n// calc car\nEigen::MatrixXf car;\ncar = c_dia*a*r_dia;\n</code></pre>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1557924961, "post_id": 56149773, "comment_id": 98929126, "body": "Look at <a href=\"https://en.cppreference.com/w/cpp/algorithm/for_each\" rel=\"nofollow noreferrer\">std::for_each</a> and use execution policy <code>std::execution::par</code>. I&#39;ll create a &quot;good&quot; amount of threads."}, {"owner": {"reputation": 3837, "user_id": 1749713, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PqPOy.png?s=128&g=1", "display_name": "Micha\u0142 Walenciak", "link": "https://stackoverflow.com/users/1749713/micha%c5%82-walenciak"}, "edited": false, "score": 0, "creation_date": 1557925183, "post_id": 56149773, "comment_id": 98929267, "body": "Take a look at OpenMP."}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1557925393, "post_id": 56149773, "comment_id": 98929415, "body": "Create a concurrent queue with work items and spawn 20 threads that pull work off the queue. If the queue is empty, have the threads exit."}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 1, "creation_date": 1557925575, "post_id": 56149773, "comment_id": 98929527, "body": "<a href=\"https://stackoverflow.com/questions/15752659/thread-pooling-in-c11\" title=\"thread pooling in c11\">stackoverflow.com/questions/15752659/thread-pooling-in-c11</a> is a very relevant answer for this question, too."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 1, "creation_date": 1557925660, "post_id": 56149773, "comment_id": 98929593, "body": "The optimal degree of parallelism can be determined by calling <code>std::thread::hardware_concurrency()</code>. Just create a pool of that many threads and a work queue (with a mutex)."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1557925865, "post_id": 56149773, "comment_id": 98929712, "body": "&quot;<i>optimal</i>&quot; differs though. Sometimes it&#39;s one thread less than <code>hardware_concurrency()</code> and sometimes it may be bigger than that."}], "answers": [{"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": false, "score": 0, "last_activity_date": 1557925346, "creation_date": 1557925346, "answer_id": 56150054, "question_id": 56149773, "link": "https://stackoverflow.com/questions/56149773/in-a-c-multithread-application-set-the-max-number-of-concurrent-thread/56150054#56150054", "title": "In a c++ multithread application set the max number of concurrent thread", "body": "<p>The C++ version would probably look like this:</p>\n\n<pre><code>std::vector&lt;workpackage&gt; workpackages;\n\nstd::for_each(std::execution::par, workpackages.begin(), workpackages.end(), [](auto&amp; wp) {\n    // work with workpackage \"wp\" here\n});\n</code></pre>\n\n<p>... but you can't decide how many threads it'll use. If you want more control you can create threads manuallly with <code>std::thread</code> and just count how many you have running.</p>\n"}], "owner": {"reputation": 90, "user_id": 6926833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/au29G.jpg?s=128&g=1", "display_name": "Alessandro Ciurlo", "link": "https://stackoverflow.com/users/6926833/alessandro-ciurlo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 248, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557932918, "creation_date": 1557924583, "question_id": 56149773, "link": "https://stackoverflow.com/questions/56149773/in-a-c-multithread-application-set-the-max-number-of-concurrent-thread", "title": "In a c++ multithread application set the max number of concurrent thread", "body": "<p>I work in a Windows environment (Visual Studio 2019). I want to create a c++ application that has to perform many times: let's say 10000 times. \nI want to implement this using multiple threads and, of coursem I want to limit the number of the concurrent threads let's say 20. \nIn other words I want to do the same thing that in a c# application I can easy do with the parallel instruction:</p>\n\n<pre><code>public class Program\n{\n    private static void Main(string[] args)\n    {      \n       ParallelOptions opt = new ParallelOptions();\n       opt.MaxDegreeOfParallelism = 20;\n        Parallel.For(0, 10000, opt, i =&gt;\n        {\n            // Do the task\n        });\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "shared-libraries"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 0, "creation_date": 1557924250, "post_id": 56149540, "comment_id": 98928630, "body": "Two-stage approach? Use a small, stable library for LD_PRELOAD, then load the big one from there."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 0, "creation_date": 1557924260, "post_id": 56149540, "comment_id": 98928640, "body": "Also, why would updating a library crash whatever has it loaded? The running code keeps the old file open, the new code gets the new file."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1557924299, "post_id": 56149540, "comment_id": 98928666, "body": "<i>otherwise they will crash on library replacement (which is expected)</i> Only if your update process overwrites the existing library.  Delete it first."}, {"owner": {"reputation": 71, "user_id": 1091474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb8da284967d1bebe569fea7599473e8?s=128&d=identicon&r=PG", "display_name": "hydrechan", "link": "https://stackoverflow.com/users/1091474/hydrechan"}, "edited": false, "score": 0, "creation_date": 1557924422, "post_id": 56149540, "comment_id": 98928755, "body": "Arkadiy, Andrew, I tried deleting it first, but it crashes process anyway"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1557924422, "post_id": 56149540, "comment_id": 98928756, "body": "Write the new library version to a temporary file (on the same disk) and move it into the correct place. Should be no risk of crashes (or anyone failing to load it)."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1557925261, "post_id": 56149540, "comment_id": 98929319, "body": "@hydrechan This seems relevant:  <a href=\"https://unix.stackexchange.com/questions/74165/how-to-upgrade-shared-library-without-crash\" title=\"how to upgrade shared library without crash\">unix.stackexchange.com/questions/74165/&hellip;</a>"}, {"owner": {"reputation": 71, "user_id": 1091474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb8da284967d1bebe569fea7599473e8?s=128&d=identicon&r=PG", "display_name": "hydrechan", "link": "https://stackoverflow.com/users/1091474/hydrechan"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1557926465, "post_id": 56149540, "comment_id": 98930120, "body": "@AndrewHenle, yeah, I&#39;ve read it and this is exactly what I currently do: 1. unlink/rm existing one; 2. put new one into same location."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 1091474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb8da284967d1bebe569fea7599473e8?s=128&d=identicon&r=PG", "display_name": "hydrechan", "link": "https://stackoverflow.com/users/1091474/hydrechan"}, "edited": false, "score": 0, "creation_date": 1557924630, "post_id": 56149716, "comment_id": 98928884, "body": "I tried to unlink/delete original library before placing the update - still crashes the processes. Can I diagnose what is the actual cause of the crash - accessing mmapped file that was deleted or maybe something else?"}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 71, "user_id": 1091474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb8da284967d1bebe569fea7599473e8?s=128&d=identicon&r=PG", "display_name": "hydrechan", "link": "https://stackoverflow.com/users/1091474/hydrechan"}, "edited": false, "score": 0, "creation_date": 1557925585, "post_id": 56149716, "comment_id": 98929541, "body": "gdb should be able to see it just fine as long as the process is still running. You could also keep a hard link to the old file around, or even just a copy."}, {"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "reply_to_user": {"reputation": 71, "user_id": 1091474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb8da284967d1bebe569fea7599473e8?s=128&d=identicon&r=PG", "display_name": "hydrechan", "link": "https://stackoverflow.com/users/1091474/hydrechan"}, "edited": false, "score": 3, "creation_date": 1557926447, "post_id": 56149716, "comment_id": 98930112, "body": "@hydrechan the normal upgrade process on all linux distributions involves replacing libraries that are being used by processes, and it never crashed one (the old one is kept around as an anonymous inode by the filesystem driver until it is no longer used). Something fishy is going on within your lib, and you should debug that."}, {"owner": {"reputation": 71, "user_id": 1091474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb8da284967d1bebe569fea7599473e8?s=128&d=identicon&r=PG", "display_name": "hydrechan", "link": "https://stackoverflow.com/users/1091474/hydrechan"}, "edited": false, "score": 0, "creation_date": 1557926831, "post_id": 56149716, "comment_id": 98930380, "body": "I tried to make a test loop where it is being updated over and over, and it doesn&#39;t crash using either method (rm+cp, cp+mv). But this is artificial case because I&#39;m replacing old file with the identical copy. I will build multiple versions of the library and will try replacing versions randomly at high pace in the loop."}], "tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": false, "score": 1, "last_activity_date": 1557924418, "creation_date": 1557924418, "answer_id": 56149716, "question_id": 56149540, "link": "https://stackoverflow.com/questions/56149540/linux-shared-library-that-unloads-itself/56149716#56149716", "title": "Linux shared library that unloads itself", "body": "<p>I think you have some misunderstandings, and what you're asking for just doesn't make sense:</p>\n\n<blockquote>\n  <p>Inside my library ctor code, I check if the process I'm in is the one I need and do necessary hooking, otherwise it's a no-op and library is just a dead weight.</p>\n</blockquote>\n\n<p>And the work to unload it, rather than just leaving it there doing nothing, it <strong>more</strong> weight.</p>\n\n<blockquote>\n  <p>Unload is required for update procedure - if library is to be updated, it shouldn't be loaded into long-running processes - otherwise they will crash on library replacement (which is expected).</p>\n</blockquote>\n\n<p>This can only happen if you erroneously <em>overwrite</em> the library file, rather than <em>replacing</em> the file. The latter can be performed by installing a temp file to the same directory and performing the <code>rename</code> function (equivalently, the <code>mv</code> command) with the old file as the target.</p>\n\n<blockquote>\n  <p>And if there are other methods for automatically and reliably hooking glibc calls on the early stage</p>\n</blockquote>\n\n<p>Your focus on \"reliably\" sounds suspiciously close to wanting to use this mechanism to impose policy/access control in a way that potentially malicious applications can't get around. This is <strong>fundamentally impossible</strong> at the library level. You would need to run them in some kind of real sandbox to achieve that (e.g. by replacing the files with wrapper scripts that invoke them in the appropriate sandbox).</p>\n"}], "owner": {"reputation": 71, "user_id": 1091474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb8da284967d1bebe569fea7599473e8?s=128&d=identicon&r=PG", "display_name": "hydrechan", "link": "https://stackoverflow.com/users/1091474/hydrechan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557924418, "creation_date": 1557923866, "last_edit_date": 1557924041, "question_id": 56149540, "link": "https://stackoverflow.com/questions/56149540/linux-shared-library-that-unloads-itself", "title": "Linux shared library that unloads itself", "body": "<p>My goal is to hook several glibc functions inside a certain group of processes located at specific path. There are multiple methods to do so (gdb, strace, etc). But I need it to be made automatically and reliably on earliest stage so I won't miss a single call. So I decided to go with <code>LD_PRELOAD</code> method. And I need it to be done automatically without any user intervention, so injecting <code>LD_PRELOAD</code> into environment is kinda fragile and may be overridden by user. So I decided to specify my library inside <code>/etc/ld.so.preload</code> - this works just fine.</p>\n\n<p>Inside my library ctor code, I check if the process I'm in is the one I need and do necessary hooking, otherwise it's a no-op and library is just a dead weight.</p>\n\n<pre><code>__attribute__((constructor)) void my_lib_ctor()\n{\n  if (is_relevant_process())\n  {\n    do_the_wiring();\n  }\n}\n</code></pre>\n\n<p>The library does not export any symbols and everything inside is hidden by default (<code>-fvisibility=hidden</code> compiler flag), so there are no any real dependencies to my library from any process. So in case of injection into unrelated process it can be safely unloaded.</p>\n\n<p>Unload is required for update procedure - if library is to be updated, it shouldn't be loaded into long-running processes - otherwise they will crash on library replacement (which is expected). Processes of interest are short-lived and user-started, so impact on them is negligible.</p>\n\n<p>The problem is - I don't know how to unload it safely. I was thinking about <code>dlclose</code>, but calling it from the library itself will result it returning from the call back to the library code which will be already unloaded.</p>\n\n<p>And if there are other methods for <em>automatically and reliably</em> hooking glibc calls on the early stage (before app's <code>main()</code> execution) without touching the app of interest itself, I'll be glad if you let me know about them (slight modification of OS configs, e.g. preload, is OK). Thanks!</p>\n"}, {"tags": ["c++", "eclipse", "opencv", "java-native-interface", "windows-10"], "comments": [{"owner": {"reputation": 1069, "user_id": 3283333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2363a3623beb1efba518c1896bc92e66?s=128&d=identicon&r=PG&f=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/3283333/christian"}, "edited": false, "score": 0, "creation_date": 1558103821, "post_id": 56149472, "comment_id": 99002315, "body": "Did you try to use <code>#include &quot;opencv2&#47;core.hpp&quot;</code> instead of <code>#include &lt;opencv2&#47;core.hpp&gt;</code> ?"}, {"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1558106771, "post_id": 56149472, "comment_id": 99003915, "body": "Wher you are trying to build your project, use the verbose mode and look to see what it is missing. That way you can see if your configuration is being applied"}], "answers": [{"tags": [], "owner": {"reputation": 413, "user_id": 429773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c1ee264b4eef8a20be46d8c54c15dc7?s=128&d=identicon&r=PG", "display_name": "Steven", "link": "https://stackoverflow.com/users/429773/steven"}, "is_accepted": false, "score": 3, "last_activity_date": 1558120274, "creation_date": 1558120274, "answer_id": 56192275, "question_id": 56149472, "link": "https://stackoverflow.com/questions/56149472/how-to-configure-opencv-in-eclipse-for-java-developers-with-plugin-cdt/56192275#56192275", "title": "How to configure opencv in Eclipse for Java developers with plugin CDT?", "body": "<p>You need two projects, one C++, one java.  </p>\n\n<p>The JNI tutorial is demonstrating how to call C++ from java via generating the required C++ headers with the javac/javah tool.  In the example, they were done with java portion so they converted it to a C++ project.  </p>\n\n<p>Follow the instructions in <a href=\"https://docs.opencv.org/2.4.13.4/doc/tutorials/introduction/linux_eclipse/linux_eclipse.html\" rel=\"nofollow noreferrer\">https://docs.opencv.org/2.4.13.4/doc/tutorials/introduction/linux_eclipse/linux_eclipse.html</a> for setting up a new C++ project with opencv and independently create a new java project for your java source.  When you use javac to generate the headers, instead of specifying the \".\" path on the command line, specify a path to your C++ project.  </p>\n\n<p>You will need to make sure that the Java System.loadLibrary(\"YourC++LibraryName\") call can find the shared library created by the C++ project (and that the C++ project builds a shared library).  </p>\n"}], "owner": {"reputation": 136, "user_id": 11469309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42d7c6bbb078276babcaeac5e08591ed?s=128&d=identicon&r=PG&f=1", "display_name": "Moshe", "link": "https://stackoverflow.com/users/11469309/moshe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "answer_count": 1, "score": 11, "last_activity_date": 1558120274, "creation_date": 1557923628, "last_edit_date": 1558111190, "question_id": 56149472, "link": "https://stackoverflow.com/questions/56149472/how-to-configure-opencv-in-eclipse-for-java-developers-with-plugin-cdt", "title": "How to configure opencv in Eclipse for Java developers with plugin CDT?", "body": "<p>I'm making a CBIR program in Java. </p>\n\n<p>For the actual image processing, I'm using the C++ file (with his header) that we got in a course that I did in my CS degree in the university.</p>\n\n<p>I used JNI to connect the Java files to the C++ files by following <a href=\"https://www3.ntu.edu.sg/home/ehchua/programming/java/JavaNativeInterface.html#zz-5.3\" rel=\"noreferrer\">this tutorial</a>.</p>\n\n<p>I was trying to find a tutorial for configuring OpenCV in \"Eclipse for Java developers with plugin CDT\" but couldn't find.</p>\n\n<p>In this tutorial:\n<a href=\"https://docs.opencv.org/2.4.13.4/doc/tutorials/introduction/linux_eclipse/linux_eclipse.html\" rel=\"noreferrer\">https://docs.opencv.org/2.4.13.4/doc/tutorials/introduction/linux_eclipse/linux_eclipse.html</a></p>\n\n<p>in step 8, I need to go to \"Tool Settings\" tab in Eclipse but I don't have it.</p>\n\n<p>This tutorial say to open a C++ project but I need a Java project (because most of my files are in Java). </p>\n\n<p>When I create a C++ project, I do see the \"Tool Settings\" tab.</p>\n\n<p>But I already converted my project to C++ project as part of that JNI tutorial, so I thought that it's the same as creating a new C++ Project.</p>\n\n<p>The instructions for converting to C++ project was in step 2 in that tutorial:</p>\n\n<blockquote>\n  <p>Step 2: Convert the Java Project to C/C++ Makefile Project\n  Right-click on the \"HelloJNI\" Java project \u21d2 New \u21d2 Other... \u21d2 Convert to a >C/C++ Project (Adds C/C++ Nature) \u21d2 Next.</p>\n  \n  <p>The \"Convert to a C/C++ Project\" dialog appears. In \"Project type\", select >\"Makefile Project\" \u21d2 In \"Toolchains\", select \"MinGW GCC\" \u21d2 Finish.</p>\n  \n  <p>Now, you can run this project as a Java as well as C/C++ project.</p>\n</blockquote>\n\n<p>Any pointer for how to solve this problem?</p>\n"}, {"tags": ["c++", "templates", "naming"], "comments": [{"owner": {"reputation": 1778, "user_id": 9063139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bze7O.png?s=128&g=1", "display_name": "Martin Morterol", "link": "https://stackoverflow.com/users/9063139/martin-morterol"}, "edited": false, "score": 2, "creation_date": 1557923820, "post_id": 56149433, "comment_id": 98928382, "body": "are you looking for &quot;type traits&quot; ?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1557923873, "post_id": 56149433, "comment_id": 98928422, "body": "Does this actually work?  It doesn&#39;t look like it should compile to me.  How are you using it?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1557923939, "post_id": 56149433, "comment_id": 98928460, "body": "Almost looks like you are trying to build an <a href=\"https://en.wikipedia.org/wiki/Expression_templates\" rel=\"nofollow noreferrer\">expression template</a>"}, {"owner": {"reputation": 701, "user_id": 3624086, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/261dfa50adc05771f401feeecbbe8d72?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Fehrs", "link": "https://stackoverflow.com/users/3624086/martin-fehrs"}, "edited": false, "score": 0, "creation_date": 1557924269, "post_id": 56149433, "comment_id": 98928649, "body": "Maybe type traits is the correct term. The more I think about it, the more it sounds right."}, {"owner": {"reputation": 701, "user_id": 3624086, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/261dfa50adc05771f401feeecbbe8d72?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Fehrs", "link": "https://stackoverflow.com/users/3624086/martin-fehrs"}, "edited": false, "score": 0, "creation_date": 1557924719, "post_id": 56149433, "comment_id": 98928952, "body": "I added a usage example."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 1, "creation_date": 1557924987, "post_id": 56149433, "comment_id": 98929148, "body": "&quot;Type trait&quot; sounds like a good choice. You should also look into what <a href=\"https://www.boost.org/doc/libs/1_70_0/libs/mpl/doc/refmanual/metafunctions.html\" rel=\"nofollow noreferrer\">Boost.MPL</a> calls &quot;metafunction&quot;."}, {"owner": {"reputation": 701, "user_id": 3624086, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/261dfa50adc05771f401feeecbbe8d72?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Fehrs", "link": "https://stackoverflow.com/users/3624086/martin-fehrs"}, "edited": false, "score": 0, "creation_date": 1557925505, "post_id": 56149433, "comment_id": 98929485, "body": "I go with metafunction. It sounds more general then type trait. In my simple example the first element of a pair could be seen as trait. But what if i want to reverse a type list? This does not sound like a trait."}], "owner": {"reputation": 701, "user_id": 3624086, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/261dfa50adc05771f401feeecbbe8d72?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Fehrs", "link": "https://stackoverflow.com/users/3624086/martin-fehrs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1557924634, "creation_date": 1557923501, "last_edit_date": 1557924634, "question_id": 56149433, "link": "https://stackoverflow.com/questions/56149433/name-for-structs-classes-doing-compile-time-calculations", "title": "Name for structs/classes, doing compile time calculations", "body": "<p>I like to comment my template libary sources. It provides type containers and functionality to work with them. For example:</p>\n\n<pre><code>template &lt;class TypePair&gt;\nstruct first;\n\ntemplate &lt;class TypePair&gt;\nusing first_t = typename first&lt;TypePair&gt;::type;\n\ntemplate &lt;\n    template &lt;class, class&gt; class TypePair,\n    class First,\n    class Second\n&gt;\nstruct first&lt;TypePair&lt;First, Second&gt;&gt;\n{\n    using type = First;\n};\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>using my_pair = type_pair&lt;int, double&gt;;\nusing first_entry = first_t&lt;my_pair&gt;;\nstatic_assert(std::is_same_v&lt;int, first_entry &gt;);\n</code></pre>\n\n<p>It is a compile time calculation over types. How do I call such a thing? Is there a common word for this? I know about type traits but I do not thing this term is correct here.</p>\n\n<p>Thanks in advance,\nMartin</p>\n"}, {"tags": ["c++", "windows", "credential-providers"], "comments": [{"owner": {"reputation": 141, "user_id": 10413236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hYXzFol29vk/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DV_R5xQu7hXaWUg1X2HF31nd08XIw/mo/photo.jpg?sz=128", "display_name": "Kianii", "link": "https://stackoverflow.com/users/10413236/kianii"}, "edited": false, "score": 0, "creation_date": 1557924773, "post_id": 56149411, "comment_id": 98928984, "body": "LogonUI ? Windows Version ? If you can&#39;t see the tile of the default Credential Provider, you most likely disabled it."}, {"owner": {"reputation": 13, "user_id": 11418391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmS7V.jpg?s=128&g=1", "display_name": "rashid", "link": "https://stackoverflow.com/users/11418391/rashid"}, "reply_to_user": {"reputation": 141, "user_id": 10413236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hYXzFol29vk/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DV_R5xQu7hXaWUg1X2HF31nd08XIw/mo/photo.jpg?sz=128", "display_name": "Kianii", "link": "https://stackoverflow.com/users/10413236/kianii"}, "edited": false, "score": 0, "creation_date": 1557925987, "post_id": 56149411, "comment_id": 98929796, "body": "No, the problem is how to call(fire) another &quot;credential&quot; (in this question windows credential) and exit current credential? the problem is about any windows version. Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 141, "user_id": 10413236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hYXzFol29vk/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DV_R5xQu7hXaWUg1X2HF31nd08XIw/mo/photo.jpg?sz=128", "display_name": "Kianii", "link": "https://stackoverflow.com/users/10413236/kianii"}, "is_accepted": false, "score": 0, "last_activity_date": 1557932489, "last_edit_date": 1557932489, "creation_date": 1557931496, "answer_id": 56152100, "question_id": 56149411, "link": "https://stackoverflow.com/questions/56149411/how-to-call-default-windows-credential-in-my-code/56152100#56152100", "title": "How to call default windows credential in my code?", "body": "<p>LogonUI searches for all 'enabled' credential provider on the system and call GetCredentialCount to get all credentials for each particular Provider.</p>\n\n<p>One thing you can do is calling ICredentialProviderEvents::CredentialsChanged which will ask logonUI to 'refresh' the tiles. \nYou can disable your provider and enable the default one in some way before calling the event.</p>\n\n<p>Another way to do it is to implement your own password credential in your provider i guess. This way, you can choose the index of the credential compared to the others.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 11418391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmS7V.jpg?s=128&g=1", "display_name": "rashid", "link": "https://stackoverflow.com/users/11418391/rashid"}, "edited": false, "score": 0, "creation_date": 1558851374, "post_id": 56165396, "comment_id": 99231988, "body": "Thanks a lot! please clear me how can i access to *pcpgsr variable and change it in a CommandLinkClicked(DWORD dwFieldID)? i only can access it, when  GetSerialization() is called by provider."}, {"owner": {"reputation": 886, "user_id": 3868464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3JnBN.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3868464/alexander"}, "reply_to_user": {"reputation": 13, "user_id": 11418391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmS7V.jpg?s=128&g=1", "display_name": "rashid", "link": "https://stackoverflow.com/users/11418391/rashid"}, "edited": false, "score": 0, "creation_date": 1559547020, "post_id": 56165396, "comment_id": 99440517, "body": "Inside of event handler <code>CommandLinkClicked</code> you have no chances, only inside of <code>GetSerialization</code>."}], "tags": [], "owner": {"reputation": 886, "user_id": 3868464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3JnBN.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3868464/alexander"}, "is_accepted": true, "score": 2, "last_activity_date": 1558529212, "last_edit_date": 1558529212, "creation_date": 1557999306, "answer_id": 56165396, "question_id": 56149411, "link": "https://stackoverflow.com/questions/56149411/how-to-call-default-windows-credential-in-my-code/56165396#56165396", "title": "How to call default windows credential in my code?", "body": "<p>In new scenario of Microsoft Windows's Credential Providers, you can't direct which other provider user must use to log on to the system.   </p>\n\n<p>The only thing you can do is to force logon using your own provider or decline logon using your provider.</p>\n\n<p>To do this you must:</p>\n\n<ol>\n<li><p>Set <code>pdwDefault</code> to any useful value and <code>pbAutoLogonWithDefault</code> to <code>true</code> inside of call to <code>GetCredentialCount</code>.</p></li>\n<li><p>Set the <code>CREDENTIAL_PROVIDER_GET_SERIALIZATION_RESPONSE *pcpgsr</code> parameter inside of <code>GetSerialization</code> method to one of the following values:</p>\n\n<ul>\n<li><code>CPGSR_RETURN_CREDENTIAL_FINISHED</code> - to do auto-logon,</li>\n<li><code>CPGSR_RETURN_NO_CREDENTIAL_FINISHED</code> - to cancel logon UI process.</li>\n</ul></li>\n</ol>\n\n<p>In any case your provider (tile) will loose the focus. Check out this <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/credentialprovider/ne-credentialprovider-credential_provider_get_serialization_response\" rel=\"nofollow noreferrer\">doc</a>.</p>\n\n<p><strong>Update</strong></p>\n\n<p>You can remove your provider from entire logon process by returning <code>E_NOTIMPL</code> value from inside of the call to <code>SetUsageScenario</code> method.</p>\n\n<p>User and/or Logon UI will be forced to use any other existing provider(s).</p>\n"}], "owner": {"reputation": 13, "user_id": 11418391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmS7V.jpg?s=128&g=1", "display_name": "rashid", "link": "https://stackoverflow.com/users/11418391/rashid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 570, "favorite_count": 2, "accepted_answer_id": 56165396, "answer_count": 2, "score": 1, "last_activity_date": 1558529212, "creation_date": 1557923425, "last_edit_date": 1557924474, "question_id": 56149411, "link": "https://stackoverflow.com/questions/56149411/how-to-call-default-windows-credential-in-my-code", "title": "How to call default windows credential in my code?", "body": "<p>I have my own implementation of \"windows credential provider\".<br>\nIn some scenarios my custom credential must switch to windows default credential and the user must see the \"windows credential provider\" to do the login process.<br>\nHow can I exit my own \"credential\" and call the default \"windows credential\"?</p>\n"}, {"tags": ["c++", "split"], "comments": [{"owner": {"reputation": 23, "user_id": 9767241, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WEca5vpHXqw/AAAAAAAAAAI/AAAAAAAAHlM/Jbvkt6Y3rW0/photo.jpg?sz=128", "display_name": "Valerie Andy", "link": "https://stackoverflow.com/users/9767241/valerie-andy"}, "edited": false, "score": 0, "creation_date": 1557923073, "post_id": 56149284, "comment_id": 98927897, "body": "I get a invalid operand to binary error as well I think it&#39;s because im using string.h and string in my directives"}, {"owner": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "edited": false, "score": 0, "creation_date": 1557923505, "post_id": 56149284, "comment_id": 98928180, "body": "You will get useful information and better methods here: <a href=\"https://stackoverflow.com/questions/5607589/right-way-to-split-an-stdstring-into-a-vectorstring\" title=\"right way to split an stdstring into a vectorstring\">stackoverflow.com/questions/5607589/&hellip;</a>"}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "edited": false, "score": 1, "creation_date": 1557923552, "post_id": 56149284, "comment_id": 98928218, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5607589/right-way-to-split-an-stdstring-into-a-vectorstring\">Right way to split an std::string into a vector&lt;string&gt;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "is_accepted": false, "score": 1, "last_activity_date": 1557923860, "creation_date": 1557923860, "answer_id": 56149539, "question_id": 56149284, "link": "https://stackoverflow.com/questions/56149284/how-to-split-string-read-from-text-file-into-array-using-c/56149539#56149539", "title": "How to split string read from text file into array using c++", "body": "<p>So, a few things to fix.  Firstly, arrays and <code>NUM</code> are kind of limiting - you have to fix up NUM whenever you change the input string, so C++ provides <code>std::vector</code> which can resize itself to however many strings it finds.  Secondly, you want to call <code>strtok</code> until it returns <code>nullptr</code> once, and you can do that with one loop.  With both your <code>for</code> and <code>NUM</code> you call <code>strtok</code> too many times - even after it has returned <code>nullptr</code>.  Next, to put the <code>token</code> into a <code>std::string</code>, you would assign using <code>my_string = token;</code> rather than <code>(\"%s\\n\", token) &gt;&gt; my_string</code> - which is a broken mix of <code>printf()</code> formatting and C++ streaming notation.  Lastly, to print the elements you've extracted, you can use another loop.  All these changes are illustrated below.</p>\n\n<pre><code>char str[] = \"ab,cd,ef,gh,ij\";\nstd::vector&lt;std::string&gt; strings;\nchar* token = strtok(str, \",\");\nwhile ((token != nullptr))\n{\n    strings.push_back(token);\n    token = strtok(NULL, \",\");\n}\nfor (const auto&amp; s : strings)\n    cout &gt;&gt; s &gt;&gt; '\\n';\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "is_accepted": false, "score": 2, "last_activity_date": 1557924082, "creation_date": 1557924082, "answer_id": 56149600, "question_id": 56149284, "link": "https://stackoverflow.com/questions/56149284/how-to-split-string-read-from-text-file-into-array-using-c/56149600#56149600", "title": "How to split string read from text file into array using c++", "body": "<p>In C++ you can read a file line by line and directly get a <code>std::string</code>.</p>\n\n<p>You will found below an example I made with a <code>split()</code> proposal as you requested, and a <code>main()</code> example of reading a file:</p>\n\n<p><strong>Example</strong></p>\n\n<p><em>data file:</em></p>\n\n<pre><code>ab,cd,ef,gh\nij,kl,mn\n</code></pre>\n\n<p><em>c++ code:</em></p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nstd::vector&lt;std::string&gt; split(const std::string &amp; s, char c);\n\nint main()\n{\n    std::string file_path(\"data.txt\"); // I assumed you have that kind of file\n    std::ifstream in_s(file_path);\n\n    std::vector &lt;std::vector&lt;std::string&gt;&gt; content;\n\n    if(in_s)\n    {\n        std::string line;\n        std::vector &lt;std::string&gt; vec;\n        while(getline(in_s, line))\n        {\n            for(const std::string &amp; str : split(line, ','))\n                vec.push_back(str);\n            content.push_back(vec);\n            vec.clear();\n        }\n\n        in_s.close();\n    }\n    else\n        std::cout &lt;&lt; \"Could not open: \" + file_path &lt;&lt; std::endl;\n\n    for(const std::vector&lt;std::string&gt; &amp; str_vec : content)\n    {\n        for(unsigned int i = 0; i &lt; str_vec.size(); ++i)\n            std::cout &lt;&lt; str_vec[i] &lt;&lt; ((i == str_vec.size()-1) ? (\"\") : (\" : \"));\n        std::cout &lt;&lt; std::endl;\n    }\n\n    return 0;\n}\n\nstd::vector&lt;std::string&gt; split(const std::string &amp; s, char c)\n{\n    std::vector&lt;std::string&gt; splitted;\n\n    std::string word;\n    for(char ch : s)\n    {\n        if((ch == c) &amp;&amp; (!word.empty()))\n        {\n            splitted.push_back(word);\n            word.clear();\n        }\n        else\n            word += ch;\n    }\n    if(!word.empty())\n        splitted.push_back(word);\n\n    return splitted;\n}\n</code></pre>\n\n<p><em>output:</em></p>\n\n<blockquote>\n  <p>ab : cd : ef : gh<br/>\n  ij : kl : mn </p>\n</blockquote>\n\n<p>I hope it will help.</p>\n"}, {"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 0, "last_activity_date": 1557924294, "creation_date": 1557924294, "answer_id": 56149671, "question_id": 56149284, "link": "https://stackoverflow.com/questions/56149284/how-to-split-string-read-from-text-file-into-array-using-c/56149671#56149671", "title": "How to split string read from text file into array using c++", "body": "<p>Your code is overly complicated and wrong.</p>\n\n<p>You probably want this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;string.h&gt;\n\nusing namespace std;\nint main() {\n  char str[] = \"ab,cd,ef,gh,ij\";  //\" ex str in place of file contents/fstream sFile;\"\n  const int NUM = 5;\n  string sArr[NUM];//empty array\n  char *token = strtok(str, \",\");\n\n  int max = 0;\n  while ((token != NULL)) {\n    sArr[max++] = token;\n    token = strtok(NULL, \",\");\n  }\n\n  for (int i = 0; i &lt; max; i++)\n    cout &lt;&lt; sArr[i] &lt;&lt; \"\\n\";\n\n  return 0;\n}\n</code></pre>\n\n<p>This code is still poor and no bound checking is done.</p>\n\n<p>But anyway, you should rather do it the C++ way as suggested in the other answers.</p>\n"}, {"tags": [], "owner": {"reputation": 773, "user_id": 4837295, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/caad108425c978df5eb8f4fdd800fb7d?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr G", "link": "https://stackoverflow.com/users/4837295/piotr-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1557924522, "creation_date": 1557924522, "answer_id": 56149750, "question_id": 56149284, "link": "https://stackoverflow.com/questions/56149284/how-to-split-string-read-from-text-file-into-array-using-c/56149750#56149750", "title": "How to split string read from text file into array using c++", "body": "<p>Use <code>boost::split</code></p>\n\n<pre><code>    #include &lt;boost/algorithm/string.hpp&gt;\n    [...]          \n    std::vector&lt;std::string&gt; strings;\n    std::string val(\"ab,cd,ef,gh,ij\");\n    boost::split(strings, val, boost::is_any_of(\",\"));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1263, "user_id": 3938402, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3db2c7bcda762ef0a3017108b1446094?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/3938402/harry"}, "is_accepted": false, "score": 0, "last_activity_date": 1557925674, "last_edit_date": 1557925674, "creation_date": 1557925236, "answer_id": 56150018, "question_id": 56149284, "link": "https://stackoverflow.com/questions/56149284/how-to-split-string-read-from-text-file-into-array-using-c/56150018#56150018", "title": "How to split string read from text file into array using c++", "body": "<p>You could do something like this</p>\n\n<pre><code>std::string str = \"ab,cd,ef,gh,ij\";\nstd::vector&lt;std::string&gt; TokenList;\n\nstd::string::size_type lastPos = 0;\nstd::string::size_type pos  = str.find_first_of(',', lastPos);\n\nwhile(pos != std::string::npos)\n{\n    std::string temp(str, lastPos, pos - lastPos);\n    TokenList.push_back(temp);\n    lastPos = pos + 1;\n    pos  = str.find_first_of(',', lastPos);\n}\n\nif(lastPos != str.size())\n{\n    std::string temp(str, lastPos, str.size());\n    TokenList.push_back(temp);\n}\n\nfor(int i = 0; i &lt; TokenList.size(); i++)\n    std::cout &lt;&lt; TokenList.at(i) &lt;&lt; std::endl;\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9767241, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WEca5vpHXqw/AAAAAAAAAAI/AAAAAAAAHlM/Jbvkt6Y3rW0/photo.jpg?sz=128", "display_name": "Valerie Andy", "link": "https://stackoverflow.com/users/9767241/valerie-andy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1605, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1557925674, "creation_date": 1557922976, "question_id": 56149284, "link": "https://stackoverflow.com/questions/56149284/how-to-split-string-read-from-text-file-into-array-using-c", "title": "How to split string read from text file into array using c++", "body": "<p>I want to split the strings on each line of my text file into an array, similar to the split() function in python. my desired syntax is a loop that enters every split-string into the next index of an array, \nso for example if my string:\n\"ab,cd,ef,gh,ij\"</p>\n\n<p>, every time I encounter a comma then I would:\ndatafile >> arr1[i]</p>\n\n<p>and my array would end up:\narr1 = [ab,cd,ef,gh,ij]</p>\n\n<p>a mock code without reading a text file is provided below </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;string&gt;\nusing namespace std;\nint main(){\n    char str[] = \"ab,cd,ef,gh,ij\";  //\" ex str in place of file contents/fstream sFile;\"\n    const int NUM = 5;\n    string sArr[NUM];//empty array\n    char *token = strtok(str, \",\");\n    for (int i=0; i &lt; NUM; i++)\n        while((token!=NULL)){\n            (\"%s\\n\", token) &gt;&gt; sArr[i];\n            token = strtok(NULL, \",\");\n         }\n    cout &gt;&gt; sArr;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "reference"], "comments": [{"owner": {"reputation": 8101, "user_id": 7691729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2568514188dfa24ecc3c1884e481834?s=128&d=identicon&r=PG&f=1", "display_name": "Quimby", "link": "https://stackoverflow.com/users/7691729/quimby"}, "edited": false, "score": 0, "creation_date": 1557922708, "post_id": 56149137, "comment_id": 98927648, "body": "<code>foo(A());</code> Should not work. What compiler are you using?"}, {"owner": {"reputation": 5009, "user_id": 1455108, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zaRtd.jpg?s=128&g=1", "display_name": "Jo&#227;o Paulo", "link": "https://stackoverflow.com/users/1455108/jo%c3%a3o-paulo"}, "reply_to_user": {"reputation": 8101, "user_id": 7691729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2568514188dfa24ecc3c1884e481834?s=128&d=identicon&r=PG&f=1", "display_name": "Quimby", "link": "https://stackoverflow.com/users/7691729/quimby"}, "edited": false, "score": 0, "creation_date": 1557922742, "post_id": 56149137, "comment_id": 98927676, "body": "I&#39;m using Visual Studio 2015 (v140)."}, {"owner": {"reputation": 2673, "user_id": 11292489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cucr6.jpg?s=128&g=1", "display_name": "Gilles-Philippe Paill&#233;", "link": "https://stackoverflow.com/users/11292489/gilles-philippe-paill%c3%a9"}, "edited": false, "score": 1, "creation_date": 1557922770, "post_id": 56149137, "comment_id": 98927689, "body": "Visual Studio accepts this code, but not gcc. You should consider adding <code>const</code> for better portability."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1557922771, "post_id": 56149137, "comment_id": 98927691, "body": "remove <i>permissive</i> extension."}, {"owner": {"reputation": 5009, "user_id": 1455108, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zaRtd.jpg?s=128&g=1", "display_name": "Jo&#227;o Paulo", "link": "https://stackoverflow.com/users/1455108/jo%c3%a3o-paulo"}, "edited": false, "score": 0, "creation_date": 1557923192, "post_id": 56149137, "comment_id": 98927981, "body": "the /permissive- is just for VS 2017+? Right?"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1557923210, "post_id": 56149137, "comment_id": 98927991, "body": "MSVC has for a long time incorrectly allowed that, and hasn&#39;t fixed it entirely in order to avoid breaking older code, but there are now settings to switch it to the correct behavior."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1557923753, "post_id": 56149137, "comment_id": 98928353, "body": "@Jo&#227;oPaulo It looks like yes, <code>&#47;permissive-</code> is only known by 2017 and later. But <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/zc-referencebinding-enforce-reference-binding-rules?view=vs-2015\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/cpp/build/reference/&hellip;</a> doesn&#39;t mention any versions, so maybe manually adding <code>&#47;Zc:referenceBinding</code> to the compile command line would work."}], "owner": {"reputation": 5009, "user_id": 1455108, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zaRtd.jpg?s=128&g=1", "display_name": "Jo&#227;o Paulo", "link": "https://stackoverflow.com/users/1455108/jo%c3%a3o-paulo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "closed_date": 1557923205, "answer_count": 0, "score": 0, "last_activity_date": 1557922932, "creation_date": 1557922465, "question_id": 56149137, "link": "https://stackoverflow.com/questions/56149137/passing-a-struct-instance-to-function-not-throwing-error", "closed_reason": "Duplicate", "title": "Passing a struct instance to function not throwing error", "body": "<p>I have this situation:</p>\n\n<pre><code>struct A {};\n\nvoid foo(A&amp; a) {};\nvoid boo(const A&amp; a) {};\n\nvoid foo(int&amp; a) {};\nvoid boo(const int&amp; a) {};\n\nint main() {\n    foo(A()); //ok... but why?\n    boo(A()); //ok\n\n    foo(5); //error\n    boo(5); //ok\n\n    return 0;\n}\n</code></pre>\n\n<p>Why <code>foo(A())</code> works while <code>foo(5)</code> does not? Wouldn't it be the same situation? Is <code>A()</code> on <code>foo(A())</code> an <code>rvalue</code>? Can I consider <code>A()</code> in this situation a temporary object?</p>\n"}, {"tags": ["c++", "r"], "comments": [{"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1557922197, "post_id": 56148973, "comment_id": 98927332, "body": "<code>vector</code> resizes automatically if you <code>push_back</code> or <code>emplace_back</code> elements to it"}], "answers": [{"tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": false, "score": 2, "last_activity_date": 1557922582, "creation_date": 1557922582, "answer_id": 56149167, "question_id": 56148973, "link": "https://stackoverflow.com/questions/56148973/how-to-increase-the-length-of-a-sequence-of-numbers-in-vector/56149167#56149167", "title": "How to increase the length of a sequence of numbers in vector", "body": "<pre><code>auto size = a.size();\nif (l &gt;= size) {\n    auto last = a.back();\n    for (auto i = 0; i &lt; size; ++i)\n        a.push_back(a[i] + last);\n}\n</code></pre>\n\n<p>Something like the above? Tons of variations on this are possible.</p>\n"}, {"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": false, "score": 2, "last_activity_date": 1557922852, "creation_date": 1557922852, "answer_id": 56149248, "question_id": 56148973, "link": "https://stackoverflow.com/questions/56148973/how-to-increase-the-length-of-a-sequence-of-numbers-in-vector/56149248#56149248", "title": "How to increase the length of a sequence of numbers in vector", "body": "<p>You might want to consider the possibility that <code>l</code> is larger than <code>size() * 2</code>:</p>\n\n<pre><code>while(l &gt;= a.size()) { // loop until l &lt; s.size()\n    size_t elements = a.size();\n    auto last_element = a.back();\n    for(size_t e = 0; e &lt; elements; ++e)\n        a.push_back(a[e] + last_element);\n}\n</code></pre>\n"}], "owner": {"reputation": 369, "user_id": 8760639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0ff3c5361cb77e0edf2b6017152bfed?s=128&d=identicon&r=PG&f=1", "display_name": "user-2147482565", "link": "https://stackoverflow.com/users/8760639/user-2147482565"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1557922852, "creation_date": 1557921938, "question_id": 56148973, "link": "https://stackoverflow.com/questions/56148973/how-to-increase-the-length-of-a-sequence-of-numbers-in-vector", "title": "How to increase the length of a sequence of numbers in vector", "body": "<p>I'm trying to make a rewrite the following lines of code of R in C++</p>\n\n<pre><code>if (l &gt; length(a)) {\n  a &lt;- c(a, a + a[length(a)])\n}\n</code></pre>\n\n<p>Here a is a sequence and l is an integer. I just want to check if l is out of index of a (i.e. a[l] is not defined), and if so I want to extend the vector by concatenating it with a + a[length(a)].</p>\n\n<p>In C++ I have:</p>\n\n<pre><code>if (l &gt;= a.size()) {\n  a.resize(2*a.size());\n\n}\n</code></pre>\n\n<p>Here I have '>=' since indices start from 0, but I'm not sure how to initialise my new values.</p>\n\n<p>As an example if a = (0.1, 0.2, 0.3) and l = 4, then I want to change a to </p>\n\n<pre><code>a = (0.1, 0.2, 0.3, (0.1+0.3), (0.2+0.3), (0.3+0.3)) \n  = (0.1, 0.2, 0.3, 0.4, 0.5, 0.6)\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1557921456, "post_id": 56148803, "comment_id": 98926849, "body": "Initialize them in your class&#39;s constructor."}, {"owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1557921499, "post_id": 56148803, "comment_id": 98926875, "body": "@drescherjm Will they simply become private members when I initialize them?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1557921528, "post_id": 56148803, "comment_id": 98926894, "body": "You put them in the private section. So they are private."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 1, "creation_date": 1557921606, "post_id": 56148803, "comment_id": 98926955, "body": "<code>gtsam::ISAM2Params _parameters();</code> is not a member object, it is a member function, which takes no arguments and returns a <code>gtsam::ISAM2Params</code>."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1557921643, "post_id": 56148803, "comment_id": 98926975, "body": "You may want to read about uniform initialization."}, {"owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1557921756, "post_id": 56148803, "comment_id": 98927058, "body": "@mch I just checked the header file, you are right."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1557921757, "post_id": 56148803, "comment_id": 98927060, "body": "Also read about Vexing parse."}, {"owner": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "edited": false, "score": 0, "creation_date": 1557922134, "post_id": 56148803, "comment_id": 98927292, "body": "this isn&#39;t really about private. consider clarifying the title"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "reply_to_user": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "edited": false, "score": 0, "creation_date": 1557922219, "post_id": 56148803, "comment_id": 98927349, "body": "I agree with @sp2danny the problem really has nothing to do with private. It would be the same if it was in the public section."}, {"owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "reply_to_user": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "edited": false, "score": 0, "creation_date": 1557922288, "post_id": 56148803, "comment_id": 98927397, "body": "@sp2danny Yes agree."}], "answers": [{"comments": [{"owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "edited": false, "score": 0, "creation_date": 1557921802, "post_id": 56148873, "comment_id": 98927086, "body": "Cheers, but what should I leave in a private section when declaring the members?"}, {"owner": {"reputation": 1575, "user_id": 3056501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/215f27224256fccc7e3083d0d248cac6?s=128&d=identicon&r=PG&f=1", "display_name": "divinas", "link": "https://stackoverflow.com/users/3056501/divinas"}, "edited": false, "score": 1, "creation_date": 1557921940, "post_id": 56148873, "comment_id": 98927186, "body": "Also, please be sure to respect the order of declaration, as class members are initialized in their order of declaration, regardless of the order in which you write them out in your constructor."}, {"owner": {"reputation": 10627, "user_id": 1537925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U8DRJ.png?s=128&g=1", "display_name": "The Vee", "link": "https://stackoverflow.com/users/1537925/the-vee"}, "reply_to_user": {"reputation": 1575, "user_id": 3056501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/215f27224256fccc7e3083d0d248cac6?s=128&d=identicon&r=PG&f=1", "display_name": "divinas", "link": "https://stackoverflow.com/users/3056501/divinas"}, "edited": false, "score": 0, "creation_date": 1557922117, "post_id": 56148873, "comment_id": 98927282, "body": "Thanks @divinas, I had that in the answer but put more emphasis on it. Also thanks @drescherjm!"}, {"owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "edited": false, "score": 0, "creation_date": 1557922202, "post_id": 56148873, "comment_id": 98927338, "body": "Okay I get it so declaring the objects with a default constructor should work. When initializing, are you redeclaring the object?"}, {"owner": {"reputation": 10627, "user_id": 1537925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U8DRJ.png?s=128&g=1", "display_name": "The Vee", "link": "https://stackoverflow.com/users/1537925/the-vee"}, "reply_to_user": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "edited": false, "score": 0, "creation_date": 1557922318, "post_id": 56148873, "comment_id": 98927414, "body": "@Edmund No, you&#39;re initializing it. It still needs to be declared, before or after this, but without initializer. This replaces the role of in-class <code>object{...}</code> and will work (with appropriate parameters to constructors) even if the objects don&#39;t allow default initialization, e.g., have default constructors deleted."}, {"owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "edited": false, "score": 0, "creation_date": 1557922400, "post_id": 56148873, "comment_id": 98927465, "body": "@TheVee Okay I remembered now! The actual initialization comes at the constructor"}, {"owner": {"reputation": 10627, "user_id": 1537925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U8DRJ.png?s=128&g=1", "display_name": "The Vee", "link": "https://stackoverflow.com/users/1537925/the-vee"}, "reply_to_user": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "edited": false, "score": 0, "creation_date": 1557922516, "post_id": 56148873, "comment_id": 98927522, "body": "@Edmund Declaration, you mean? If so, yes, and it can even appear before, this makes no difference. The initialization, as in, initializing the objects to a sensible state, actually takes place before the body of the constructor, so you can use them in it already."}], "tags": [], "owner": {"reputation": 10627, "user_id": 1537925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U8DRJ.png?s=128&g=1", "display_name": "The Vee", "link": "https://stackoverflow.com/users/1537925/the-vee"}, "is_accepted": true, "score": 4, "last_activity_date": 1557922948, "last_edit_date": 1557922948, "creation_date": 1557921596, "answer_id": 56148873, "question_id": 56148803, "link": "https://stackoverflow.com/questions/56148803/how-can-i-declare-an-object-in-a-class-that-needs-another-in-its-constructor/56148873#56148873", "title": "How can I declare an object in a class, that needs another in its constructor?", "body": "<p>Initialize your second object in the constructor (or better both):</p>\n\n<pre><code>FactorGraph::FactorGraph()\n    : _parameters{}, _isam{_parameters}\n{ }\n</code></pre>\n\n<p>The initialization happens in the same order in which the members are listed in your class (regardless of the order of this list(!), so it's a good idea to keep the same order here, your compiler may even warn you otherwise), which here guarantees that <code>_isam</code> won't get anything uninitialized. (I'm not aware of such guarantees if you just define your objects in your class declaration.)</p>\n\n<p>From the comments, thanks @drescherjm: In your class, just declare your objects <strong>without initializers</strong>:</p>\n\n<pre><code>class FactorGraph\n{\nprivate:\n    gtsam::ISAM2Params _parameters;\n    gtsam::ISAM2 _isam;\n</code></pre>\n\n<p>When you declare them without initializers, they should be initialized in the constructor instead. They do not need to be default-constructible in order to do this, the objects gets initialized only once (in the constructor)</p>\n\n<p>Then if you have more constructors, don't forget to either do that everywhere or forward to this one:</p>\n\n<pre><code>FactorGraph(int) : FactorGraph{}, /* other initializers */ { }\n</code></pre>\n"}], "owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 56148873, "answer_count": 1, "score": 2, "last_activity_date": 1557993297, "creation_date": 1557921358, "last_edit_date": 1557993297, "question_id": 56148803, "link": "https://stackoverflow.com/questions/56148803/how-can-i-declare-an-object-in-a-class-that-needs-another-in-its-constructor", "title": "How can I declare an object in a class, that needs another in its constructor?", "body": "<p>I want to declare two objects from two different classes inside my private section of my class. The problem I have is that the second object should take the first object in a constructor. So here is the example of my class private section:</p>\n\n<pre><code>class FactorGraph\n{\nprivate:\n    gtsam::ISAM2Params _parameters();\n    gtsam::ISAM2 _isam(_parameters);\n</code></pre>\n\n<p>The _parameters object should be passed as an argument for the _isam object but from my knowledge that will not be possible as C++ does not allow this. Is there a slick way to do so? </p>\n"}, {"tags": ["c++", "g++"], "answers": [{"comments": [{"owner": {"reputation": 952, "user_id": 10877953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/344f31504d52c6d3af2fb9113fdb62d8?s=128&d=identicon&r=PG&f=1", "display_name": "Xu Hui", "link": "https://stackoverflow.com/users/10877953/xu-hui"}, "edited": false, "score": 0, "creation_date": 1557922507, "post_id": 56149018, "comment_id": 98927517, "body": "It did help,Thanks a lot! Could you tell me why we also need shared library A? My understanding is that:  in <code>B_2::fun()</code> , we call <code>new A_2</code>, and how to do <code>new A_2</code> is in <code>libA</code>, so we need library A. Am I right?"}], "tags": [], "owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "is_accepted": true, "score": 10, "last_activity_date": 1557924455, "last_edit_date": 1557924455, "creation_date": 1557922071, "answer_id": 56149018, "question_id": 56148734, "link": "https://stackoverflow.com/questions/56148734/strange-undefined-reference-to-vtable/56149018#56149018", "title": "strange undefined reference to `vtable", "body": "<p>Provide as well the shared library A when compiling the library B.</p>\n\n<pre><code>g++ B_1.cpp B_2.cpp  -L . -lA  -fPIC -shared -o libB.so\n</code></pre>\n\n<p>To put it simply (I'm no expert in the subject), the ld linker used by g++ under the hood is the one reporting the undefined symbols. When compiling main, unresolved symbols in libB are not resolved by providing libA because all symbols used <strong>explicitly</strong> by main are resolved using libB.</p>\n\n<p>By default : </p>\n\n<ul>\n<li>when compiling an executable, ld fails if there are undefined symbols</li>\n<li>when compiling a library, ld doesnt fail if there are undefined symbols</li>\n</ul>\n\n<p>The later allow you to do a lot of flexible stuff, among which is circular dependencies between libraries (here libA could also depend on libB).</p>\n\n<p>To fail at the second step, you need to explicitly tell the linker to fail if there undefined symbols, using <code>-z defs</code>. </p>\n\n<pre><code>g++ B1.cpp B2.cpp -z defs -fPIC -shared -o libB.so\n</code></pre>\n\n<blockquote>\n  <p>/tmp/cchjkdnAk.o: In function <code>A_2::A_2()':\n  B2.cpp:(.text._ZN3A_2C2Ev[_ZN3A_2C5Ev]+0x1b): undefined reference to\n  </code>vtable for A_2' collect2: error: ld returned 1 exit status</p>\n</blockquote>\n\n<p>Your compilation directive would have worked if main.cpp was written as :</p>\n\n<pre><code>#include \"A_2.h\"\n#include \"B_1.h\"\nint main()\n{\n    A_1 *ptr = new A_2;\n    B_1 b1(\"name\");\n}\n</code></pre>\n\n<p>libA would have been loaded to resolve symbols in main, and those symbols would have been used for the missing symbols of libB.</p>\n\n<p><a href=\"https://www.linuxjournal.com/article/6463\" rel=\"noreferrer\">for more information : there is a nice article on the linux journal which goes deeper on the symbol resolution</a> </p>\n"}], "owner": {"reputation": 952, "user_id": 10877953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/344f31504d52c6d3af2fb9113fdb62d8?s=128&d=identicon&r=PG&f=1", "display_name": "Xu Hui", "link": "https://stackoverflow.com/users/10877953/xu-hui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 797, "favorite_count": 2, "accepted_answer_id": 56149018, "answer_count": 1, "score": 12, "last_activity_date": 1557924455, "creation_date": 1557921140, "last_edit_date": 1557921905, "question_id": 56148734, "link": "https://stackoverflow.com/questions/56148734/strange-undefined-reference-to-vtable", "title": "strange undefined reference to `vtable", "body": "<p>I have trapped in <code>\"undefined reference to vtable...\"</code> for a whole day.</p>\n\n<p>Actually, I have seen many answer deal with  <code>\"undefined reference to vtable...\"</code></p>\n\n<p>For example:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/47506721/undefined-reference-to-vtable-transaction\">undefined reference to vtable &quot;Transaction&quot;</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/12020462/undefined-reference-to-vtable\">Undefined reference to vtable</a></p>\n\n<p><a href=\"https://gcc.gnu.org/faq.html#vtables\" rel=\"noreferrer\">https://gcc.gnu.org/faq.html#vtables</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/3065154/undefined-reference-to-vtable\">Undefined reference to vtable</a></p>\n\n<p>Some people's problem is forget to write virtual function, others are forget to add the .cpp file into build directory. But I think I have notice that.</p>\n\n<h1>I want to do the follow step:</h1>\n\n<ul>\n<li>I want compile class <code>A_1</code> and <code>A_2</code> to a shared library <code>libA</code>. <code>A_2</code> is derived from <code>A_1</code>.</li>\n</ul>\n\n<p>A_1.h</p>\n\n<pre><code>#ifndef include_A_1_h\n#define include_A_1_h\nclass A_1\n{\npublic:\n    A_1() {}\n    virtual ~A_1() {} // not pure-virtual function has defined\n    virtual void print() = 0;\n\nprivate:\n};\n#endif\n</code></pre>\n\n<p>A_2.h</p>\n\n<pre><code>#ifndef include_A_2_h\n#define include_A_2_h\n#include \"A_1.h\"\n\nclass A_2 : public A_1\n{\npublic:\n    A_2() {}\n    ~A_2() {}\n    virtual void print();\n\nprivate:\n};\n#endif\n</code></pre>\n\n<p>A_2.cpp</p>\n\n<pre><code>#include \"A_2.h\"\n\nvoid A_2::print()\n{\n    // empty\n}\n</code></pre>\n\n<ul>\n<li>I want compile class <code>B_1</code> and <code>B_2</code> to a shared library <code>libB</code>. <code>B_1</code> and <code>B_2</code> is independent.</li>\n</ul>\n\n<p>B_1.h</p>\n\n<pre><code>#ifndef include_B_1_h\n#define include_B_1_h\n\n#include &lt;iostream&gt;\n#include &lt;string.h&gt;\n\nclass B_1\n{\npublic:\n    B_1(const std::string &amp;path);\n    ~B_1();\n\nprivate:\n};\n#endif\n</code></pre>\n\n<p>B_1.cpp</p>\n\n<pre><code>#include \"B_1.h\"\n\nB_1::B_1(const std::string &amp;path)\n{\n}\n\nB_1::~B_1()\n{\n}\n</code></pre>\n\n<p>B_2.h</p>\n\n<pre><code>#ifndef include_B_2_h\n#define include_B_2_h\n\nclass B_2\n{\npublic:\n    B_2() {}\n    ~B_2() {}\n    void fun();\n\n    private:\n    };\n\n#endif\n</code></pre>\n\n<p>B_2.cpp</p>\n\n<pre><code>#include \"B_2.h\"\n#include \"A_1.h\"\n#include \"A_2.h\"\n\nvoid B_2::fun()\n{\n    A_1 *ptr = new A_2;\n}\n</code></pre>\n\n<ul>\n<li>I want to using two shared library in <code>main.cpp</code>. At here, some thing goes wrong. </li>\n</ul>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"B_1.h\"\nint main()\n{\n    B_1 b1(\"name\");\n}\n</code></pre>\n\n<p>I am using the follow command to compile:</p>\n\n<pre><code>g++ A_2.cpp -fPIC -shared -o libA.so\ng++ B_1.cpp B_2.cpp -fPIC -shared -o libB.so\ng++ main.cpp -L . -lA -lB\n</code></pre>\n\n<p>The compiler said that:</p>\n\n<pre><code>./libB.so: undefined reference to `vtable for A_2'\n</code></pre>\n\n<p>You can see many empty functions, because I ignore some irrelevant code. But in this case, It still have the error. </p>\n\n<p>Could any one help me? Thanks.</p>\n"}, {"tags": ["c++", "inheritance"], "answers": [{"comments": [{"owner": {"reputation": 1641, "user_id": 1329075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34e5fc21fefdb23ecfbf381cf5cce26d?s=128&d=identicon&r=PG", "display_name": "neu-rah", "link": "https://stackoverflow.com/users/1329075/neu-rah"}, "edited": false, "score": 0, "creation_date": 1557921504, "post_id": 56148738, "comment_id": 98926876, "body": "to elaborate a bit on @bruno answer, now that you know about virtual, consider a virtual <code>display</code> function specific to each class that knows about the class details and that uses the class members."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 1641, "user_id": 1329075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34e5fc21fefdb23ecfbf381cf5cce26d?s=128&d=identicon&r=PG", "display_name": "neu-rah", "link": "https://stackoverflow.com/users/1329075/neu-rah"}, "edited": false, "score": 0, "creation_date": 1557921745, "post_id": 56148738, "comment_id": 98927044, "body": "@neu-rah yes this an other way. The initial code of the OP is so <i>strange</i>"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 1641, "user_id": 1329075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34e5fc21fefdb23ecfbf381cf5cce26d?s=128&d=identicon&r=PG", "display_name": "neu-rah", "link": "https://stackoverflow.com/users/1329075/neu-rah"}, "edited": false, "score": 0, "creation_date": 1557922085, "post_id": 56148738, "comment_id": 98927264, "body": "@neu-rah anyway I not follow that solution because the OP wants &quot;<i>using derived class data members from base class method</i>&quot;, and to call the display of B in an operation of B and same for C is far of the OP request ;-)"}], "tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": true, "score": 3, "last_activity_date": 1557922306, "last_edit_date": 1592644375, "creation_date": 1557921150, "answer_id": 56148738, "question_id": 56148591, "link": "https://stackoverflow.com/questions/56148591/using-derived-class-data-members-from-base-class-method/56148738#56148738", "title": "using derived class data members from base class method", "body": "<p>define a virtual getter like</p>\n<pre><code>virtual int getCord() const { return cord; }\n</code></pre>\n<p>in each class and call it in <em>display</em></p>\n<pre><code>void display(){ cout &lt;&lt; getCord() &lt;&lt;endl; }\n</code></pre>\n<p>and in the constructor of B and C you also need to replace</p>\n<blockquote>\n<pre><code>A a;\na.display();\n</code></pre>\n</blockquote>\n<p>just by</p>\n<pre><code>display();\n</code></pre>\n<p>else there is no chance you access to the value of the sub classes explicitly calling display on an instance of A</p>\n<hr />\n<blockquote>\n<p>using derived class data members from base class method</p>\n</blockquote>\n<p>This is because of that I let the redefinition of <em>cord</em> in B and C, but I do not recommend you to do that kind of redefinition in 'real' codes ;-)</p>\n"}, {"comments": [{"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1557922703, "post_id": 56148774, "comment_id": 98927645, "body": "hello, removing <i>cord</i> from B and C there is not anymore &quot;<i>derived class data members</i>&quot; (it is a base class member) so it is not &quot;<i>using derived class data members from base class method</i>&quot; as requested by the OP, no ? ;-) You corrected the strangeness from the OP code, but you do not answer to the question finally ... if I well understand ^^"}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1557923336, "last_edit_date": 1557923336, "creation_date": 1557921234, "answer_id": 56148774, "question_id": 56148591, "link": "https://stackoverflow.com/questions/56148591/using-derived-class-data-members-from-base-class-method/56148774#56148774", "title": "using derived class data members from base class method", "body": "<p>Lets take the <code>B</code> constructor:</p>\n\n<pre><code>B(){\n    A a;\n    a.display();\n}\n</code></pre>\n\n<p>In it you create a completely separate object <code>a</code> of type <code>A</code>, and call <code>display</code> on it. That <code>display</code> call will be using the <code>a</code> object, not knowing anything about the <code>B</code> class or its totally separate <code>cord</code> member variable at all.</p>\n\n<p>One possible way to solve this is to create a constructor of <code>A</code> that takes the value of <code>cord</code> as an argument, pass the \"correct\" value in the <code>B</code> constructor initializer list, and then call the <code>display</code> function on <em>this</em> object:</p>\n\n<pre><code>struct A{\n    A() = default;\n\n    explicit A(int c)\n        : cord(c)\n    {\n    }\n\n    display(){\n        cout&lt;&lt;cord&lt;&lt;endl;\n    }\n\n    int cord = 25;\n};\n\nstruct B : A{\n    B()\n        : A(30)\n    {\n        display();  // Equivalent to this-&gt;display();\n    }\n};\n</code></pre>\n\n<p>Of course, you need to do something similar for the <code>C</code> class (or structure).</p>\n\n<p>Note that I removed the member variable <code>cord</code> from the <code>B</code> class. That's because if you declare a new member variable with the same name as a member variable in a base class, then you effectively create a completely new member variable that is unrelated to the one in the parent class. And for the simple example you show there's no need to \"override\" the member variable, as it already exists in all child-classes as well.</p>\n"}], "owner": {"reputation": 123, "user_id": 10127623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1574d8082da0352f190c8d887349c214?s=128&d=identicon&r=PG&f=1", "display_name": "Nnnnn", "link": "https://stackoverflow.com/users/10127623/nnnnn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 535, "favorite_count": 0, "accepted_answer_id": 56148738, "answer_count": 2, "score": 1, "last_activity_date": 1557923336, "creation_date": 1557920708, "question_id": 56148591, "link": "https://stackoverflow.com/questions/56148591/using-derived-class-data-members-from-base-class-method", "title": "using derived class data members from base class method", "body": "<p>So i have been trying to use derived class data members from the base class and i am not able to figure out how to do that. I see a way to do this as just passing the member i need in parameter when i call the base class method but i was just thinking that there should be another way to do that. So i have replicated this as below.</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\nclass B;\nclass A{\n    public:\n    display(){\n        cout&lt;&lt;cord&lt;&lt;endl;\n    }\n    int cord = 25;\n};\n\nclass B : public A{\n    public:\n    B(){\n        A a;\n        a.display();\n    }\n    int cord = 30;\n};\n\nclass C : public A{\n    public:\n    C(){\n        A a;\n        a.display();\n    }\n    int cord = 35;\n};\n\nint main(){\n    B b;\n    C c;\n    B.display();\n\n}\n</code></pre>\n\n<p>The above code as giving output as </p>\n\n<pre><code>25\n25\n25\n</code></pre>\n\n<p>What i want it to give out is </p>\n\n<pre><code>30\n35\n30\n</code></pre>\n\n<p>Every way to do this will be appreciated, whatever is better and if you want to me add something or anything ask in comments, i'll do right away.</p>\n"}, {"tags": ["c++", "windows", "winapi", "share"], "comments": [{"owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "edited": false, "score": 0, "creation_date": 1557919993, "post_id": 56148133, "comment_id": 98925967, "body": "Does level 0 and 1 work? 502 can require admin rights."}, {"owner": {"reputation": 241, "user_id": 8632386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104279ac6b6fcffcad290e7c5ec43dd8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom13000", "link": "https://stackoverflow.com/users/8632386/tom13000"}, "reply_to_user": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "edited": false, "score": 0, "creation_date": 1557920531, "post_id": 56148133, "comment_id": 98926294, "body": "@Anders no, I tried with several values, but that makes me the same mistake every time"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1557921877, "post_id": 56148133, "comment_id": 98927139, "body": "Your attempt to convert ANSI encoding to UTF-16 encoding is destined to fail. You&#39;ll want to implement a real conversion, calling <code>MultiByteToWideChar</code> or <code>_mbtowcs</code>."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1557924170, "post_id": 56148133, "comment_id": 98928588, "body": "Use the L prefix on your string literal to avoid having to do any conversion"}, {"owner": {"reputation": 241, "user_id": 8632386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104279ac6b6fcffcad290e7c5ec43dd8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom13000", "link": "https://stackoverflow.com/users/8632386/tom13000"}, "edited": false, "score": 0, "creation_date": 1557924563, "post_id": 56148133, "comment_id": 98928852, "body": "@llnspectable I tried your solution : int wchars_num = MultiByteToWideChar( CP_UTF8 , 0 , netname.c_str() , -1, nullptr , 0 );     wchar_t wstr[wchars_num];     MultiByteToWideChar( CP_UTF8 , 0 , netname.c_str() , -1, wstr , wchars_num );     pwsNetName=wstr; but it returns the same error code"}, {"owner": {"reputation": 241, "user_id": 8632386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104279ac6b6fcffcad290e7c5ec43dd8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom13000", "link": "https://stackoverflow.com/users/8632386/tom13000"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1557924635, "post_id": 56148133, "comment_id": 98928887, "body": "@DavidHeffernan I tried your solution : LPWSTR pwsNetName=L&quot;\\\\\\\\PCRT-S35521\\\\sharedFolder&quot;; but it returns the same error code"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1557924708, "post_id": 56148133, "comment_id": 98928947, "body": "At least you can stop messing around with conversions now. Perhaps it would be nice to see your best effort code in an update."}, {"owner": {"reputation": 241, "user_id": 8632386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104279ac6b6fcffcad290e7c5ec43dd8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom13000", "link": "https://stackoverflow.com/users/8632386/tom13000"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1557926878, "post_id": 56148133, "comment_id": 98930415, "body": "@DavidHeffernan I updated my code with both tests I did."}], "answers": [{"comments": [{"owner": {"reputation": 241, "user_id": 8632386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104279ac6b6fcffcad290e7c5ec43dd8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom13000", "link": "https://stackoverflow.com/users/8632386/tom13000"}, "edited": false, "score": 0, "creation_date": 1557935838, "post_id": 56151489, "comment_id": 98936187, "body": "thank you for your answer. I have read the documentation incorrectly. I thought I had to put the network path."}], "tags": [], "owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "is_accepted": true, "score": 2, "last_activity_date": 1557929690, "creation_date": 1557929690, "answer_id": 56151489, "question_id": 56148133, "link": "https://stackoverflow.com/questions/56148133/function-netsharegetinfo-return-always-2310-this-share-doesnt-exist/56151489#56151489", "title": "Function NetShareGetInfo return always 2310 (This share doesn&#39;t exist)", "body": "<p>The documentation says that if the first argument, the server name, is <code>NULL</code> then the local computer is used. That is why your code is returning <code>NERR_NetNameNotFound</code>.</p>\n\n<p>As well as that, you are passing the final parameter incorrectly. You need an extra level of indirection because the function allocates the buffer. </p>\n\n<p>It should look something like this:</p>\n\n<pre><code>NET_API_STATUS pStatus;\nSHARE_INFO_2 *pBuffer;\npStatus = NetShareGetInfo(L\"PCRT-S35521\", L\"sharedFolder\", 2, (LPBYTE)&amp;pBuffer);\n</code></pre>\n\n<p>Remember to follow the instruction given in the documentation to destroy the buffer:</p>\n\n<blockquote>\n  <p>This buffer is allocated by the system and must be freed using the <code>NetApiBufferFree</code> function.</p>\n</blockquote>\n"}], "owner": {"reputation": 241, "user_id": 8632386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104279ac6b6fcffcad290e7c5ec43dd8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom13000", "link": "https://stackoverflow.com/users/8632386/tom13000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 56151489, "answer_count": 1, "score": -1, "last_activity_date": 1557929690, "creation_date": 1557919192, "last_edit_date": 1557929150, "question_id": 56148133, "link": "https://stackoverflow.com/questions/56148133/function-netsharegetinfo-return-always-2310-this-share-doesnt-exist", "title": "Function NetShareGetInfo return always 2310 (This share doesn&#39;t exist)", "body": "<p>I want to recover the properties of a shared folder. I use the NetShareGetInfo function but it returns a 2310 error to me. This folder does not exist.\nHere is my code:</p>\n\n<pre><code> NET_API_STATUS pStatus;\n SHARE_INFO_2 pBuffer;\n //here status return 2310 -  This shared resource does not exist.\n pStatus=NetShareGetInfo(nullptr,  L\"\\\\\\\\PCRT-S35521\\\\sharedFolder\", 2, reinterpret_cast&lt;LPBYTE*&gt;(&amp;pBuffer));\n</code></pre>\n\n<p>Does anyone know where this problem could come from? Because the network path is correct and the rights are correct</p>\n"}, {"tags": ["c++", "c++11", "templates", "boost"], "answers": [{"tags": [], "owner": {"reputation": 183, "user_id": 7917281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eWPOD.jpg?s=128&g=1", "display_name": "vainman", "link": "https://stackoverflow.com/users/7917281/vainman"}, "is_accepted": false, "score": 0, "last_activity_date": 1557921099, "last_edit_date": 1557921099, "creation_date": 1557920960, "answer_id": 56148669, "question_id": 56147852, "link": "https://stackoverflow.com/questions/56147852/how-to-use-template-within-template-in-c11/56148669#56148669", "title": "How to use template within template in C++11?", "body": "<p>Got it ,after read the source code, I read the comments in  teardown.hpp, I forget include <code>#include &lt;boost/beast/websocket/ssl.hpp&gt;</code>.</p>\n"}], "owner": {"reputation": 183, "user_id": 7917281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eWPOD.jpg?s=128&g=1", "display_name": "vainman", "link": "https://stackoverflow.com/users/7917281/vainman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1557921099, "creation_date": 1557918328, "question_id": 56147852, "link": "https://stackoverflow.com/questions/56147852/how-to-use-template-within-template-in-c11", "title": "How to use template within template in C++11?", "body": "<p>I use boost to create a websocket server. Because we need ws and wss, two versions, so I write code like below.\nBut when I build it, said \"error C2338: Unknown Socket type in async_teardown.\"</p>\n\n<p>I guess it's becuuse T1 . </p>\n\n<p>file 1 iSession.h\n'''</p>\n\n<pre><code>//\n// Created by p00451414 on 2019/5/14.\n//\n\n#ifndef ESDK_MSP_ISESSION_H\n#define ESDK_MSP_ISESSION_H\n#pragma once\n#include \"stdfax.h\"\n\n\ntemplate&lt;typename T&gt;\nclass iSession :public std::enable_shared_from_this &lt;iSession&lt;T&gt;&gt; {\npublic:\n    /*explicit\n        iSession(boost::asio::ip::tcp::socket);\n    explicit\n        iSession(boost::asio::ip::tcp::socket, boost::asio::ssl::context&amp;);*/\n\n    iSession() {\n        ws_ = NULL;\n        strand_ = NULL;\n        buffer_ = new boost::beast::multi_buffer();\n    }\n    ~iSession() {\n        delete buffer_;\n        buffer_ = NULL;\n        delete strand_;\n        strand_ = NULL;\n        delete ws_;\n        ws_ = NULL;\n\n    }\n\npublic:\n    boost::beast::websocket::stream&lt;T&gt; *ws_=NULL;\n    boost::asio::strand&lt;boost::asio::io_context::executor_type&gt; *strand_=NULL;\n    boost::beast::multi_buffer *buffer_=NULL;\npublic:\n    void virtual run() = 0;\n\n    void process() {\n        auto sp = shared_from_this();\n\n        ws_-&gt;async_read(*buffer_, boost::asio::bind_executor(*strand_, [&amp;, sp](boost::system::error_code ec2,\n            std::size_t bytes_transferred2) {\n            boost::ignore_unused(bytes_transferred2);\n            if (ec2) {\n                //   fail(ec, \"read\");\n            }\n\n\n            if (ec2 == boost::beast::websocket::error::closed) {\n                return;\n            }\n            ws_-&gt;text(ws_-&gt;got_text());\n            ws_-&gt;async_write(buffer_-&gt;data(), boost::asio::bind_executor(*strand_, [&amp;, sp](boost::system::error_code ec3,\n                std::size_t bytes_transferred3) {\n                boost::ignore_unused(bytes_transferred3);\n                if (ec3) {\n                    //   return fail(ec, \"write\");\n                }\n\n\n                // Clear the buffer\n                buffer_-&gt;consume(buffer_-&gt;size());\n                process();\n            }));\n\n        }));\n    }\n\n};\n\n\n#endif //ESDK_MSP_ISESSION_H\n</code></pre>\n\n<p>'''</p>\n\n<p>file2 NormalSession.h\n'''</p>\n\n<pre><code>//\n// Created by p00451414 on 2019/5/14.\n//\n\n#ifndef ESDK_MSP_NORMALSESSION_H\n#define ESDK_MSP_NORMALSESSION_H\n\n\n\n#include \"iSession.h\"\n\nclass NormalSession : public iSession&lt;boost::asio::ip::tcp::socket&gt; {\npublic:\n    NormalSession(boost::asio::ip::tcp::socket);\n\n    ~NormalSession();\n\npublic:\n\n\n    void run();\n};\n\n\n#endif //ESDK_MSP_NORMALSESSION_H\n</code></pre>\n\n<p>'''</p>\n\n<p>file 3 SslSession.h\n'''</p>\n\n<pre><code>//\n// Created by p00451414 on 2019/5/14.\n//\n\n#ifndef ESDK_MSP_SSLSESSION_H\n#define ESDK_MSP_SSLSESSION_H\n\n\n#include &lt;memory&gt;\n#include &lt;boost/asio/ip/tcp.hpp&gt;\n\n\n#include \"iSession.h\"\n\n\nclass SslSession : public iSession&lt;boost::asio::ssl::stream&lt;boost::asio::ip::tcp::socket&amp;&gt;&gt; {\npublic:\n    SslSession(boost::asio::ip::tcp::socket, boost::asio::ssl::context &amp;);\n\n    ~SslSession(void);\n\npublic:\n    void on_handshake(boost::system::error_code);\n\n    //void on_accept(boost::system::error_code);\n\n    //void do_read();\n\n    //void on_read(boost::system::error_code, std::size_t);\n\n    //void on_write(boost::system::error_code, std::size_t);\n\n    void run();\n\nprivate:\n    boost::asio::ip::tcp::socket* socket_;\n};\n\n\n#endif //ESDK_MSP_SSLSESSION_H\n</code></pre>\n\n<p>'''</p>\n\n<p>I guess it's becuuse my SslSession with T1 template.\nBecause my class NormalSession could run when SslSession commented.</p>\n\n<p>So how to fix this error and how to use template within template?</p>\n\n<p>more Msg </p>\n\n<blockquote>\n  <p>more msg</p>\n</blockquote>\n\n<p>'''</p>\n\n<p>F:\\boost_1_69_0\\boost_1_69_0\\boost/beast/websocket/teardown.hpp(103): error C2338: Unknown Socket type in async_teardown.\nF:\\boost_1_69_0\\boost_1_69_0\\boost/beast/websocket/impl/read.ipp(680): note: \u53c2\u89c1\u5bf9\u6b63\u5728\u7f16\u8bd1\u7684\u51fd\u6570 \u6a21\u677f \u5b9e\u4f8b\u5316\u201cvoid boost::beast::websocket::async_teardown::read_some_op>::mutable_buffers_type,boost::beast::websocket::stream::read_op>::process::,boost::asio::strand>>>>(boost::beast::websocket::role_type,Socket &amp;,TeardownHandler &amp;&amp;)\u201d\u7684\u5f15\u7528\n        with\n        [\n            NextLayer=boost::asio::ssl::stream,\n            DynamicBuffer=boost::beast::multi_buffer,\n            Socket=boost::asio::ssl::stream,\n            TeardownHandler=boost::beast::websocket::stream,true>::read_some_op>::mutable_buffers_type,boost::beast::websocket::stream,true>::read_op>::process::,boost::asio::strand>>>\n        ]\nF:\\boost_1_69_0\\boost_1_69_0\\boost/beast/websocket/impl/read.ipp(173): note: \u7f16\u8bd1 \u7c7b \u6a21\u677f \u6210\u5458\u51fd\u6570 \"void boost::beast::websocket::stream::read_some_op>::mutable_buffers_type,boost::beast::websocket::stream::read_op::process::,boost::asio::strand>>>::operator ()(boost::beast::error_code,size_t,bool)\" \u65f6\n        with\n        [\n            T=boost::asio::ssl::stream,\n            DynamicBuffer=boost::beast::multi_buffer\n        ]\nF:\\boost_1_69_0\\boost_1_69_0\\boost/beast/websocket/impl/read.ipp(821): note: \u53c2\u89c1\u5bf9\u6b63\u5728\u7f16\u8bd1\u7684\u51fd\u6570 \u6a21\u677f \u5b9e\u4f8b\u5316\u201cvoid boost::beast::websocket::stream::read_some_op>::mutable_buffers_type,boost::beast::websocket::stream::read_op::process::,boost::asio::strand>>>::operator ()(boost::beast::error_code,size_t,bool)\u201d\u7684\u5f15\u7528\n        with\n        [\n            T=boost::asio::ssl::stream,\n            DynamicBuffer=boost::beast::multi_buffer\n        ]\nF:\\boost_1_69_0\\boost_1_69_0\\boost/beast/websocket/impl/read.ipp(821): note: \u53c2\u89c1\u5bf9\u6b63\u5728\u7f16\u8bd1\u7684 \u7c7b \u6a21\u677f \u5b9e\u4f8b\u5316 \"boost::beast::websocket::stream::read_some_op>::mutable_buffers_type,boost::beast::websocket::stream::read_op::process::,boost::asio::strand>>>\" \u7684\u5f15\u7528\n        with\n        [\n            T=boost::asio::ssl::stream,\n            DynamicBuffer=boost::beast::multi_buffer\n        ]\nF:\\boost_1_69_0\\boost_1_69_0\\boost/beast/websocket/impl/read.ipp(802): note: \u7f16\u8bd1 \u7c7b \u6a21\u677f \u6210\u5458\u51fd\u6570 \"void boost::beast::websocket::stream::read_op::process::,boost::asio::strand>>::operator ()(boost::beast::error_code,size_t)\" \u65f6\n        with\n        [\n            T=boost::asio::ssl::stream,\n            DynamicBuffer=boost::beast::multi_buffer\n        ]\nF:\\boost_1_69_0\\boost_1_69_0\\boost/beast/websocket/impl/read.ipp(899): note: \u53c2\u89c1\u5bf9\u6b63\u5728\u7f16\u8bd1\u7684\u51fd\u6570 \u6a21\u677f \u5b9e\u4f8b\u5316\u201cvoid boost::beast::websocket::stream::read_op::process::,boost::asio::strand>>::operator ()(boost::beast::error_code,size_t)\u201d\u7684\u5f15\u7528\n        with\n        [\n            T=boost::asio::ssl::stream,\n            DynamicBuffer=boost::beast::multi_buffer\n        ]\nF:\\boost_1_69_0\\boost_1_69_0\\boost/beast/websocket/impl/read.ipp(899): note: \u53c2\u89c1\u5bf9\u6b63\u5728\u7f16\u8bd1\u7684 \u7c7b \u6a21\u677f \u5b9e\u4f8b\u5316 \"boost::beast::websocket::stream::read_op::process::,boost::asio::strand>>\" \u7684\u5f15\u7528\n        with\n        [\n            T=boost::asio::ssl::stream,\n            DynamicBuffer=boost::beast::multi_buffer\n        ]\nf:\\msp\\esdk_icp\\source\\esdk_msp\\msp_s\\src\\websocket\\iSession.h(69): note: \u53c2\u89c1\u5bf9\u6b63\u5728\u7f16\u8bd1\u7684\u51fd\u6570 \u6a21\u677f \u5b9e\u4f8b\u5316\u201cvoid boost::beast::websocket::stream::async_read::process::,boost::asio::strand>>(DynamicBuffer &amp;,ReadHandler &amp;&amp;)\u201d\u7684\u5f15\u7528\n        with\n        [\n            T=boost::asio::ssl::stream,\n            DynamicBuffer=boost::beast::multi_buffer,\n            ReadHandler=boost::asio::executor_binder>::process::,boost::asio::strand>\n        ]\nf:\\msp\\esdk_icp\\source\\esdk_msp\\msp_s\\src\\websocket\\iSession.h(44): note: \u53c2\u89c1\u5bf9\u6b63\u5728\u7f16\u8bd1\u7684\u51fd\u6570 \u6a21\u677f \u5b9e\u4f8b\u5316\u201cvoid boost::beast::websocket::stream::async_read::process::,boost::asio::strand>>(DynamicBuffer &amp;,ReadHandler &amp;&amp;)\u201d\u7684\u5f15\u7528\n        with\n        [\n            T=boost::asio::ssl::stream,\n            DynamicBuffer=boost::beast::multi_buffer,\n            ReadHandler=boost::asio::executor_binder>::process::,boost::asio::strand>\n        ]\nf:\\msp\\esdk_icp\\source\\esdk_msp\\msp_s\\src\\websocket\\iSession.h(41): note: \u7f16\u8bd1 \u7c7b \u6a21\u677f \u6210\u5458\u51fd\u6570 \"void iSession>::process(void)\" \u65f6\nF:\\MSP\\eSDK_ICP\\Source\\eSDK_MSP\\MSP_S\\src\\websocket\\SslSession.cpp(44): note: \u53c2\u89c1\u5bf9\u6b63\u5728\u7f16\u8bd1\u7684\u51fd\u6570 \u6a21\u677f \u5b9e\u4f8b\u5316\u201cvoid iSession>::process(void)\u201d\u7684\u5f15\u7528\nf:\\msp\\esdk_icp\\source\\esdk_msp\\msp_s\\src\\websocket\\SslSession.h(16): note: \u53c2\u89c1\u5bf9\u6b63\u5728\u7f16\u8bd1\u7684 \u7c7b \u6a21\u677f \u5b9e\u4f8b\u5316 \"iSession>\" \u7684\u5f15\u7528\nF:\\boost_1_69_0\\boost_1_69_0\\boost/beast/core/string.hpp(103): note: \u53c2\u89c1\u5bf9\u6b63\u5728\u7f16\u8bd1\u7684 \u7c7b \u6a21\u677f \u5b9e\u4f8b\u5316 \"boost::basic_string_view>\" \u7684\u5f15\u7528\nNMAKE : fatal error U1077: \u201cD:\\VS2017\\VC\\Tools\\MSVC\\14.16.27023\\bin\\Hostx64\\x64\\cl.exe\u201d: \u8fd4\u56de\u4ee3\u7801\u201c0x2\u201d\nStop.\nNMAKE : fatal error U1077: \u201cD:\\VS2017\\VC\\Tools\\MSVC\\14.16.27023\\bin\\Hostx64\\x64\\nmake.exe\u201d: \u8fd4\u56de\u4ee3\u7801\u201c0x2\u201d\nStop.\nNMAKE : fatal error U1077: \u201cD:\\VS2017\\VC\\Tools\\MSVC\\14.16.27023\\bin\\Hostx64\\x64\\nmake.exe\u201d: \u8fd4\u56de\u4ee3\u7801\u201c0x2\u201d\nStop.\nNMAKE : fatal error U1077: \u201cD:\\VS2017\\VC\\Tools\\MSVC\\14.16.27023\\bin\\Hostx64\\x64\\nmake.exe\u201d: \u8fd4\u56de\u4ee3\u7801\u201c0x2\u201d\nStop.</p>\n\n<p>'''</p>\n"}, {"tags": ["c++", "function-call", "define-syntax"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1557918184, "post_id": 56147741, "comment_id": 98924979, "body": "This looks like a really bad idea. Why do you use macros? Please create an <a href=\"https://stackoverflow.com/help/reprex\">MCVE</a>. How do you use the macro? Where do you use the macro? With what parameter? What is the context? <code>code analysis tool shows me</code> - what tool? and what is the exact warning message, including filename and line number?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 4, "creation_date": 1557918734, "post_id": 56147741, "comment_id": 98925294, "body": "The unsequencedness shouldn&#39;t matter. Silly warning. Just disable it!"}, {"owner": {"reputation": 7481, "user_id": 2527795, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8359590ce3a66e5c58407ae5c83c9bbe?s=128&d=identicon&r=PG&f=1", "display_name": "vll", "link": "https://stackoverflow.com/users/2527795/vll"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 5, "creation_date": 1557919216, "post_id": 56147741, "comment_id": 98925552, "body": "@KamilCuk &quot;Why do you use macros?&quot; - should be obvious from the code that he wants to include the function name in every log message, which necessitates a macro."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1557924359, "post_id": 56147741, "comment_id": 98928709, "body": "I&#39;m guessing that you want to allow further chaining of <code>&lt;&lt;</code>? (Such as <code>SYSTEM_LOG(&quot;foo&quot;) &lt;&lt; 123 &lt;&lt; &quot;abc&quot;;</code>)"}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 1, "creation_date": 1557926107, "post_id": 56147741, "comment_id": 98929875, "body": "Since macros are resolved at (or, traditionally, <i>before</i>) compile time, splitting the macro can\u2019t possibly introduce ordering on a runtime operation."}, {"owner": {"reputation": 133, "user_id": 8733599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8de2fd48d62ed1cd066b05311578bbe4?s=128&d=identicon&r=PG&f=1", "display_name": "Sharky", "link": "https://stackoverflow.com/users/8733599/sharky"}, "edited": false, "score": 0, "creation_date": 1558014011, "post_id": 56147741, "comment_id": 98966506, "body": "Thank you for all answers. In the future, this code will be exchanged with a proper logger (company generic c++ logger) but I wanted to know if the warning was an issue for the coming release. For now I will try to justify the warning."}], "owner": {"reputation": 133, "user_id": 8733599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8de2fd48d62ed1cd066b05311578bbe4?s=128&d=identicon&r=PG&f=1", "display_name": "Sharky", "link": "https://stackoverflow.com/users/8733599/sharky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1557918570, "creation_date": 1557917993, "last_edit_date": 1557918570, "question_id": 56147741, "link": "https://stackoverflow.com/questions/56147741/unsequenced-function-calls-error-for-a-define", "title": "Unsequenced function calls: error for a #define", "body": "<p>A static code analysis tool shows me that I have an unsequenced function calls for a define. Want to get rid of the warning.</p>\n\n<p>It complains that I use Logging() and get_id() (two functions, only one allowed) in the last define.</p>\n\n<pre><code>#define MSG_FORMAT(x) \" [thread: \" &lt;&lt; std::this_thread::get_id() &lt;&lt; \"] [\" &lt;&lt; __func__ &lt;&lt; \"] \" &lt;&lt; x\n\n#define SYSTEM_LOG(x) loa::peer::Logging() &lt;&lt; MSG_FORMAT(x)\n</code></pre>\n\n<p>How can I modify the defines to avoid the warning? As you see I have already tried to split them into two defines.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 4, "creation_date": 1557918066, "post_id": 56147718, "comment_id": 98924915, "body": "Unfortunately, C++ does not work this way. At least not without a massive amount of overloading and various other things that only create confusion and results in extremely convoluted code. Don&#39;t try to make C++ work like some other programming language. A class method is a class method. A class member is a class member. They don&#39;t really want to be each other."}, {"owner": {"reputation": 1125, "user_id": 11042630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uj0vR.png?s=128&g=1", "display_name": "skratchi.at", "link": "https://stackoverflow.com/users/11042630/skratchi-at"}, "edited": false, "score": 0, "creation_date": 1557918151, "post_id": 56147718, "comment_id": 98924966, "body": "Is it necessary to save it in an <code>std::vector</code> as well? Another comment on how you want to access the variables, are you sure you don&#39;t want to use a <code>get</code>- and <code>set</code>-function? In my eyes, please correct me, this would violently break the paradigm of data encapsulation."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 3, "creation_date": 1557918423, "post_id": 56147718, "comment_id": 98925117, "body": "Don&#39;t use references here, you&#39;re wasting memory for syntax sugar. It&#39;s a bad idea. Instead, do <code>T x, y;</code> and overload <code>operator[]</code> for array-like access."}, {"owner": {"reputation": 73, "user_id": 3994291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f25f490f878349b11df0bd4bbdedc3e2?s=128&d=identicon&r=PG", "display_name": "Davinatoratoe", "link": "https://stackoverflow.com/users/3994291/davinatoratoe"}, "reply_to_user": {"reputation": 1125, "user_id": 11042630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uj0vR.png?s=128&g=1", "display_name": "skratchi.at", "link": "https://stackoverflow.com/users/11042630/skratchi-at"}, "edited": false, "score": 0, "creation_date": 1557919465, "post_id": 56147718, "comment_id": 98925686, "body": "@skratchi.at The base class <code>VecBase</code> allows for a variable sized vector (vector2, vector3, etc.) The <code>Vec2</code> class extends the functionality of that by allowing easy access through <code>.x</code> and <code>.y</code> when the number of components is 2 - that&#39;s the plan at least."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1557922845, "post_id": 56147718, "comment_id": 98927737, "body": "Aside: <code>T&amp; x() const</code> is rather suspicious. Why can you modify part of a <code>const Vec2</code>? prefer <code>const T&amp; x() const; T&amp; x();</code>"}], "answers": [{"tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 1, "last_activity_date": 1557920012, "last_edit_date": 1557920012, "creation_date": 1557918319, "answer_id": 56147846, "question_id": 56147718, "link": "https://stackoverflow.com/questions/56147718/can-i-set-a-class-member-variable-to-the-result-of-a-class-function/56147846#56147846", "title": "Can I set a class member variable to the result of a class function?", "body": "<blockquote>\n  <p>I want to be able to access the component using a member variable</p>\n</blockquote>\n\n<p>Then simply use a <code>struct</code> (or <code>class</code> with <code>public</code> members):</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct Vector\n{ \n    T x;\n    T y;\n};\n\nVector&lt;int&gt; v;\nv.x = 42;\nv.y = data[2];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 3994291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f25f490f878349b11df0bd4bbdedc3e2?s=128&d=identicon&r=PG", "display_name": "Davinatoratoe", "link": "https://stackoverflow.com/users/3994291/davinatoratoe"}, "edited": false, "score": 0, "creation_date": 1557924611, "post_id": 56148392, "comment_id": 98928875, "body": "Well that could work! Thanks. The reason I have a base class is because there&#39;s going to be more behaviour (normalisation, dot product, cross product, operator overloading) etc. and I am trying to avoid re-writing functions in multiple classes that are only slightly different."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 73, "user_id": 3994291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f25f490f878349b11df0bd4bbdedc3e2?s=128&d=identicon&r=PG", "display_name": "Davinatoratoe", "link": "https://stackoverflow.com/users/3994291/davinatoratoe"}, "edited": false, "score": 0, "creation_date": 1557940775, "post_id": 56148392, "comment_id": 98938490, "body": "@Davinatoratoe Don&#39;t those operations have to be different for different orders anyway?"}, {"owner": {"reputation": 73, "user_id": 3994291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f25f490f878349b11df0bd4bbdedc3e2?s=128&d=identicon&r=PG", "display_name": "Davinatoratoe", "link": "https://stackoverflow.com/users/3994291/davinatoratoe"}, "edited": false, "score": 0, "creation_date": 1557957290, "post_id": 56148392, "comment_id": 98945155, "body": "No, I have most of them working in any order so far :)"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 4, "last_activity_date": 1557920027, "creation_date": 1557920027, "answer_id": 56148392, "question_id": 56147718, "link": "https://stackoverflow.com/questions/56147718/can-i-set-a-class-member-variable-to-the-result-of-a-class-function/56148392#56148392", "title": "Can I set a class member variable to the result of a class function?", "body": "<p>Your reference member approach can work:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Vec2 : public VecBase&lt;T, 2&gt;\n{\npublic:\n    Vec2() : x(this-&gt;data[0]), y(this-&gt;data[1]) {}\n\n    T&amp; x;\n    T&amp; y;\n};\n</code></pre>\n\n<p>However, now you have a user-defined constructor. Plus there's still going to be a dereference under the bonnet. Personally I'd avoid this over-complication entirely, if possible.</p>\n\n<p>Although I understand that you want to implement the guts of it all in a generic way, and that your base can't \"automatically\" name the members in a nice mathsy way, consider whether you really need this. Why not just a couple of <code>Vec2</code>, <code>Vec3</code> types that literally just have direct members in them? Do you really need anything more?</p>\n\n<p>Having <code>T</code> as a template parameter is a good idea though.</p>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 3994291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f25f490f878349b11df0bd4bbdedc3e2?s=128&d=identicon&r=PG", "display_name": "Davinatoratoe", "link": "https://stackoverflow.com/users/3994291/davinatoratoe"}, "edited": false, "score": 0, "creation_date": 1557924737, "post_id": 56149354, "comment_id": 98928961, "body": "Yeah, this is for an assignment that requires accessing the components via a variable, not a function. :( I&#39;d love to do it that way if I could haha"}], "tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": false, "score": 0, "last_activity_date": 1557923249, "creation_date": 1557923249, "answer_id": 56149354, "question_id": 56147718, "link": "https://stackoverflow.com/questions/56147718/can-i-set-a-class-member-variable-to-the-result-of-a-class-function/56149354#56149354", "title": "Can I set a class member variable to the result of a class function?", "body": "<p>You can achieve almost what you want <em>without</em> the reference members. You can assign to the result of <code>x()</code>.</p>\n\n<pre><code>Vec2&lt;int&gt; vector;\nvector.x() = 20;\nvector.y() = 40;\n</code></pre>\n\n<p>Note that you shouldn't allow modifying through a <code>const Vec2</code>, so overload <code>x</code> and <code>y</code> based on the const qualification.</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Vec2 : public VecBase&lt;T, 2&gt;\n{\npublic:\n    const T&amp; x() const { return data[0]; }\n    const T&amp; y() const { return data[1]; }\n\n    T&amp; x() { return data[0]; }\n    T&amp; y() { return data[1]; }\n};\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 3994291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f25f490f878349b11df0bd4bbdedc3e2?s=128&d=identicon&r=PG", "display_name": "Davinatoratoe", "link": "https://stackoverflow.com/users/3994291/davinatoratoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 56148392, "answer_count": 3, "score": 1, "last_activity_date": 1557923249, "creation_date": 1557917922, "last_edit_date": 1557919825, "question_id": 56147718, "link": "https://stackoverflow.com/questions/56147718/can-i-set-a-class-member-variable-to-the-result-of-a-class-function", "title": "Can I set a class member variable to the result of a class function?", "body": "<p>I have two functions in a <code>Vector</code> class, <code>x()</code> and <code>y()</code> that return the corresponding component from the vector. I want to be able to access the component using a member variable instead (or as well).</p>\n\n<p>Previously I made <code>x</code> and <code>y</code> pointers that point directly into the array of components, <code>data</code> - but this isn't a good solution because someone could change the pointer, right? And it would need to be dereferenced every time it is used.</p>\n\n<p>I cannot use a union due to how my classes are structured.</p>\n\n<p>Currently my idea is to have the member variables <code>x</code> and <code>y</code> return the result of functions <code>x()</code> and <code>y()</code>. Is this a feasible solution?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;typename T&gt;\nclass Vec2 : public VecBase&lt;T, 2&gt;\n{\npublic:\n    T&amp; x = x();     //Doesn't work but is what I'm trying to achieve\n    T&amp; y = y();\n\n    T&amp; x() const { return data[0]; }\n    T&amp; y() const { return data[1]; }\n}\n</code></pre>\n\n<p>EDIT: Should have made it more obvious - <code>VecBase</code> is a variable sized vector (vector2, vector3, etc.). <code>Vec2</code> adds <code>x</code> and <code>y</code> when the size is 2 to make accessing the components easier. It's hard to show without pasting all the code. Ha.</p>\n\n<p>The outcome I want is to basically be able to access the components of the vector easily like so:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Vec2&lt;int&gt; vector;\nvector.x = 20;\nvector.y = 40;\n</code></pre>\n\n<p>The functions <code>x()</code> and <code>y()</code> aren't necessary in the solution.</p>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["c++", "opengl", "wavefront"], "comments": [{"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 2, "creation_date": 1557917462, "post_id": 56147401, "comment_id": 98924569, "body": "Changing the perspective is something you do in the actual render call, not in the mesh. The vertex shader code should contain code that takes input from an <code>in</code> vertex attribute and assigns it to <code>gl_Position</code>. Apply your transformation there, preferably by way of a <code>mat4</code> uniform that embodies the translation. If all this is Chinese to you, post your shader code (and drawing code) so we can give concrete advice."}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 1, "creation_date": 1557919433, "post_id": 56147401, "comment_id": 98925670, "body": "That setup is very standard: you have three uniform matrices, one for Projection, View and Model. See <a href=\"https://open.gl/transformations\" rel=\"nofollow noreferrer\">open.gl</a> for a discussion on what each of these matrices does and how they work together, but the short gist is that you should set the <code>M</code> matrix&#39;s rotation part to the identity matrix and its translation part to <code>(0,-1,0)</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9717641"}, "reply_to_user": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1557919693, "post_id": 56147401, "comment_id": 98925799, "body": "It works now, you guys are amazing, thank you so much!"}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1557932074, "post_id": 56147401, "comment_id": 98933927, "body": "Wavefront is already parsed, you&#39;r function just binding this data to the shader GPU program. Check the code which transferring  M,V and P matrices as uniforms. You need to translate View matrix. P.S. it is better idea to transfer pre- multipled MVP matrix to shared to improve rendering performance."}], "answers": [{"tags": [], "owner": {"reputation": 1012, "user_id": 3919121, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b623e00f7668e7d6e74fa445d899d525?s=128&d=identicon&r=PG&f=1", "display_name": "diego.martinez", "link": "https://stackoverflow.com/users/3919121/diego-martinez"}, "is_accepted": false, "score": 0, "last_activity_date": 1557917511, "creation_date": 1557917511, "answer_id": 56147598, "question_id": 56147401, "link": "https://stackoverflow.com/questions/56147401/understanding-code-drawing-obj-in-modern-opengl-and-setting-different-positions/56147598#56147598", "title": "Understanding code drawing .obj in modern OpenGL and setting different positions", "body": "<p>If your problem is \"how can I move the obj in space\" it is done (in modern opengl) using Translation matrix and the MVP matrix in a shader (Model View Projection) matrix. \nYour code alone, just sets up the vertices on the gpu to be drawn, but does not draw at all. </p>\n\n<p>You will need a glDrawElements operation after choosing the buffer. \nAlso, you will need to set up the shader and the matrices or the obj will always be rendered on the origin point (0.,0.).</p>\n\n<p>If you have the glDraw, you need to show the shader you are using. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9717641"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1557931692, "creation_date": 1557916895, "last_edit_date": 1557931692, "question_id": 56147401, "link": "https://stackoverflow.com/questions/56147401/understanding-code-drawing-obj-in-modern-opengl-and-setting-different-positions", "title": "Understanding code drawing .obj in modern OpenGL and setting different positions", "body": "<p>I'm watching modern OpenGL tutorial and I don't fully understand code that draws .obj file. I mean it works pretty nice but I've got a little problem with changing position of displayed object.</p>\n\n<p>Vertex arrays are generated by glGenVertexArrays() and I think there is the line I should change, but don't know how.</p>\n\n<p>There's code I use:</p>\n\n<pre><code>Mesh::Mesh(const std::string&amp; fileName)\n{\n    InitMesh(OBJModel(fileName).ToIndexedModel());\n}\n\nvoid Mesh::InitMesh(const IndexedModel&amp; model)\n{\n    m_numIndices = model.indices.size();\n\n    glGenVertexArrays(1, &amp;m_vertexArrayObject);\n    glBindVertexArray(m_vertexArrayObject);\n\n    glGenBuffers(NUM_BUFFERS, m_vertexArrayBuffers);\n\n    glBindBuffer(GL_ARRAY_BUFFER, m_vertexArrayBuffers[POSITION_VB]);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(model.positions[0]) * model.positions.size(), &amp;model.positions[0], GL_STATIC_DRAW);\n    glEnableVertexAttribArray(0);\n    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, 0);\n\n    glBindBuffer(GL_ARRAY_BUFFER, m_vertexArrayBuffers[TEXCOORD_VB]);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(model.texCoords[0]) * model.texCoords.size(), &amp;model.texCoords[0], GL_STATIC_DRAW);\n    glEnableVertexAttribArray(1);\n    glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, 0, 0);\n\n    glBindBuffer(GL_ARRAY_BUFFER, m_vertexArrayBuffers[NORMAL_VB]);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(model.normals[0]) * model.normals.size(), &amp;model.normals[0], GL_STATIC_DRAW);\n    glEnableVertexAttribArray(2);\n    glVertexAttribPointer(2, 3, GL_FLOAT, GL_FALSE, 0, 0);\n\n    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, m_vertexArrayBuffers[INDEX_VB]);\n    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(model.indices[0]) * model.indices.size(), &amp;model.indices[0], GL_STATIC_DRAW);\n\n    glBindVertexArray(0);\n}\n</code></pre>\n\n<p>My object is drawing from (0,0,0) position and I want it to be translated (-1.0f) on the Y axis. I know how to translate matrixes but don't know how to manage with .obj.</p>\n\n<p>EDIT:\nThanks for your answers</p>\n\n<p>My vs code looks as follow:</p>\n\n<pre><code>#version 330\n\nuniform mat4 P;\nuniform mat4 V;\nuniform mat4 M;\n\n\nlayout (location=0) in vec4 vertex;\nlayout (location=2) in vec2 texCoord; \n\nout vec2 i_tc;\n\nvoid main(void) {\n    gl_Position=P*V*M*vertex;\n    i_tc=texCoord;\n}\n</code></pre>\n"}, {"tags": ["c++", "promise", "future"], "comments": [{"owner": {"reputation": 2298, "user_id": 7699037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae22aa9776941949ddf401f3eb7fc318?s=128&d=identicon&r=PG&f=1", "display_name": "Mike van Dyke", "link": "https://stackoverflow.com/users/7699037/mike-van-dyke"}, "edited": false, "score": 2, "creation_date": 1557917028, "post_id": 56147196, "comment_id": 98924312, "body": "Can you show an example where it would make sense to call <code>set_value</code> before <code>get_future</code>?"}, {"owner": {"reputation": 11371, "user_id": 481061, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c4876d67fda212cee59d97ac5a676c2d?s=128&d=identicon&r=PG", "display_name": "Felix Dombek", "link": "https://stackoverflow.com/users/481061/felix-dombek"}, "reply_to_user": {"reputation": 2298, "user_id": 7699037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae22aa9776941949ddf401f3eb7fc318?s=128&d=identicon&r=PG&f=1", "display_name": "Mike van Dyke", "link": "https://stackoverflow.com/users/7699037/mike-van-dyke"}, "edited": false, "score": 0, "creation_date": 1557918173, "post_id": 56147196, "comment_id": 98924974, "body": "@mike Let&#39;s say I create a promise, pass it to some other thread (e.g. by capturing it by reference in a lambda which is then executed on some thread), and then basically do promise.get_future().get()."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1557923595, "post_id": 56147196, "comment_id": 98928243, "body": "@FelixDombek Are you sure that doesn&#39;t have a data race?"}, {"owner": {"reputation": 11371, "user_id": 481061, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c4876d67fda212cee59d97ac5a676c2d?s=128&d=identicon&r=PG", "display_name": "Felix Dombek", "link": "https://stackoverflow.com/users/481061/felix-dombek"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1557924262, "post_id": 56147196, "comment_id": 98928642, "body": "@Caleth I don&#39;t think it matters. If set_value can be called <i>after</i> the call to get_future, then get() will just either wait or return immediately. So no matter whether the thread executes first or second, this line should be safe."}], "answers": [{"tags": [], "owner": {"reputation": 2151, "user_id": 5902079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4df4530b8e41c66ac12d17f96cd70c6c?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Gordon", "link": "https://stackoverflow.com/users/5902079/dmitry-gordon"}, "is_accepted": true, "score": 2, "last_activity_date": 1558020510, "last_edit_date": 1558020510, "creation_date": 1557918133, "answer_id": 56147786, "question_id": 56147196, "link": "https://stackoverflow.com/questions/56147196/does-promise-get-future-have-to-be-called-before-setting-a-value/56147786#56147786", "title": "Does promise.get_future() have to be called before setting a value?", "body": "<p>As far as I see there is no such limitation. The only two cases when <code>std::promise::set_value</code> leads to error are:</p>\n\n<ol>\n<li><p>Promise object has no shared state (this can occur when promise object is being moved):</p>\n\n<pre><code>promise&lt;int&gt; p;\nauto p2 = std::move(p);\np.set_value(42); // error\n</code></pre></li>\n<li><p>The shared state already stores a value or exception:</p>\n\n<pre><code>promise&lt;int&gt; p;\np.set_value(0);\np.set_value(42); // error\n</code></pre>\n\n<p>or</p>\n\n<pre><code>promise&lt;int&gt; p;\ntry \n{\n    throw std::runtime_error(\"Some error\");\n} \ncatch(...) \n{\n    p.set_exception(std::current_exception());\n    p.set_value(42); // error\n}\n</code></pre></li>\n</ol>\n\n<p>But there is no limitation for <code>get_future</code> to be called before.</p>\n"}], "owner": {"reputation": 11371, "user_id": 481061, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c4876d67fda212cee59d97ac5a676c2d?s=128&d=identicon&r=PG", "display_name": "Felix Dombek", "link": "https://stackoverflow.com/users/481061/felix-dombek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 423, "favorite_count": 0, "accepted_answer_id": 56147786, "answer_count": 1, "score": 5, "last_activity_date": 1558020510, "creation_date": 1557916252, "question_id": 56147196, "link": "https://stackoverflow.com/questions/56147196/does-promise-get-future-have-to-be-called-before-setting-a-value", "title": "Does promise.get_future() have to be called before setting a value?", "body": "<p>From <a href=\"http://www.cplusplus.com/reference/future/promise/get_future/\" rel=\"noreferrer\">http://www.cplusplus.com/reference/future/promise/get_future/</a>:</p>\n\n<blockquote>\n  <p>After this function has been called, the promise is expected to make its shared state ready at some point [...]</p>\n</blockquote>\n\n<p>I'm unsure if this implies that this order of operations is mandatory:</p>\n\n<ol>\n<li>get_future()</li>\n<li>set_value()</li>\n</ol>\n\n<p>Would it also be possible to get the future from the promise only after a value has been set?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 5, "creation_date": 1557916026, "post_id": 56147060, "comment_id": 98923710, "body": "Its undefined behaviour, you are returning an address to an object which no longer exists after the call to f() ends."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1557916032, "post_id": 56147060, "comment_id": 98923713, "body": "<code>return &amp;node;</code>: Dangling pointer innit."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 4, "creation_date": 1557916076, "post_id": 56147060, "comment_id": 98923743, "body": "All local variables vanish as soon as the function they are declare in returns. That&#39;s what the compiler is telling you. It&#39;s actually more than a warning, because this is always wrong."}, {"owner": {"reputation": 413, "user_id": 10518032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d91471cd13b1f82257c4311a9e213753?s=128&d=identicon&r=PG&f=1", "display_name": "nm_tp", "link": "https://stackoverflow.com/users/10518032/nm-tp"}, "edited": false, "score": 2, "creation_date": 1557916159, "post_id": 56147060, "comment_id": 98923804, "body": "I believe that, in gcc, it will not be cleared, just overwritten in the next function call. Since you are accessing <code>node-&gt;x</code> and <code>node-&gt;y</code> in main, with no other function called after <code>f</code>, nothing had a chance to overwrite the values. The first printf probably does the overwrite so that the second one gets rubbish or an error."}, {"owner": {"reputation": 22489, "user_id": 3208297, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/KzpAh.jpg?s=128&g=1", "display_name": "blue_note", "link": "https://stackoverflow.com/users/3208297/blue-note"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1557916168, "post_id": 56147060, "comment_id": 98923810, "body": "@Jabberwocky: that&#39;s my point. It does not. It printst the correct result for 1-2 times, and after that it vanishes."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1557916204, "post_id": 56147060, "comment_id": 98923833, "body": "<i>It printst the correct result for 1-2 times</i> Undefined behavior is undefined."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1557916205, "post_id": 56147060, "comment_id": 98923834, "body": "The behaviour is undefined - so it can print whatever it likes, or not."}, {"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 1, "creation_date": 1557916209, "post_id": 56147060, "comment_id": 98923840, "body": "why does it matter when it disappears? its UB."}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 1, "creation_date": 1557916220, "post_id": 56147060, "comment_id": 98923852, "body": "Its never cleared. Accessing that stack variable is undefined behavoir and so technically anything can happen, including somewhat contradictory things such as printing the value twice gives different answerts.  On a more technical level, although you shouldn&#39;t rely on this but its sometimes interesting to understand whats actually happening, is that the space that the variable in is still unused and so you can access it to call printf on it. However, the call to <code>printf</code> itself uses stack and writes over the value you left behind and were erronesouly accessing."}, {"owner": {"reputation": 187, "user_id": 3733334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e39a8a702cb94d44e344727625120f1?s=128&d=identicon&r=PG&f=1", "display_name": "mcabreb", "link": "https://stackoverflow.com/users/3733334/mcabreb"}, "edited": false, "score": 1, "creation_date": 1557916572, "post_id": 56147060, "comment_id": 98924064, "body": "It&#39;s undefined behaviour, so it can do whatever it pleases. It could even erase your hard drive. Check <a href=\"https://stackoverflow.com/questions/18506029/can-undefined-behavior-erase-the-hard-drive\" title=\"can undefined behavior erase the hard drive\">stackoverflow.com/questions/18506029/&hellip;</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1557916593, "post_id": 56147060, "comment_id": 98924074, "body": "In this case the &quot;correct&quot; result is just a mirage"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1557918322, "post_id": 56147060, "comment_id": 98925048, "body": "@blue_note -- Unlike other languages you may have used, C++ has a concept called <i>undefined behavior</i>.   Think of it this way -- if you had your drivers license revoked, does that mean you can&#39;t get into a car and drive it?  Just because something is illegal doesn&#39;t mean you are stopped from doing it.  The thing you need to be aware of is that anything can happen doing the illegal action.  You may be stopped by a policeman after driving the car 100 feet, or you could drive for years and not be stopped.  Your program could crash right away, or run for years and not show any issues."}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1557960691, "post_id": 56147060, "comment_id": 98945946, "body": "A number of comments here comment on \u201cundefined behavior\u201d and imply or suggest the causes cannot be known or that inquiry is pointless. These comments are misguided at best. First, \u201cundefined behavior\u201d in the C standard merely means the standard imposes no requirements. There are other causes than the C standard, and it is worth inquiring about these, because it is useful to know how compilers work, how various features of C can be or are typically implemented, and how hardware works.\u2026"}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1557960813, "post_id": 56147060, "comment_id": 98945975, "body": "\u2026 For example, the pattern of an object apparently having a desired value immediately after a function return but not after a successive call is a big clue that there is a bug of returning the address of a local object. So knowledge of this pattern, and its cause in how the stack is used, can aid debugging. Additionally, understanding how the compiler uses the stack to implement function calls and local objects can aid in designing good programs or, ultimately, implementing compilers.\u2026"}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1557960965, "post_id": 56147060, "comment_id": 98946006, "body": "\u2026 We should understand that many people who ask these questions are not trying to learn what the C standard says about the situation but about how software and hardware is acting. The author of this question gives indications of this: they acknowledge the compiler warning and acknowledge the use and alteration of the stack. This curiosity should be satisfied: Imparting knowledge, not just of the <b>abstract</b> C model but of <b>actual</b> implementation is a good thing. The knowledge is valuable and useful and should not be fobbed off as \u201cundefined behavior.\u201d"}], "owner": {"reputation": 22489, "user_id": 3208297, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/KzpAh.jpg?s=128&g=1", "display_name": "blue_note", "link": "https://stackoverflow.com/users/3208297/blue-note"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "closed_date": 1557916139, "answer_count": 0, "score": 1, "last_activity_date": 1557916266, "creation_date": 1557915860, "last_edit_date": 1557916266, "question_id": 56147060, "link": "https://stackoverflow.com/questions/56147060/c-when-is-function-stack-cleared", "closed_reason": "Duplicate", "title": "C: when is function stack cleared?", "body": "<p>I wrote the following code </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include \"stdio.h\"\n\nstruct node {\n    int x;\n    int y;\n};\ntypedef struct node Node;\n\nNode * f() {\n    Node node = {1, 2};\n    return &amp;node;\n}\n\nint main() {\n    Node *node = f();\n    printf(\"(%d, %d)\", node-&gt;x, node-&gt;y);\n    printf(\"(%d, %d)\", node-&gt;x, node-&gt;y);\n}\n</code></pre>\n\n<p>During compilation, I get <code>warning: address of stack memory associated with local variable 'node' returned</code> warning. </p>\n\n<p>However, the <code>printf</code> </p>\n\n<ul>\n<li>prints the correct result the first time</li>\n<li>prints the wrong result the second time</li>\n</ul>\n\n<p>This brings me to my question: <strong>when exactly</strong> is the stack of the call to <code>f()</code> cleared??</p>\n"}]