[{"tags": ["c++", "visual-studio-2013"], "comments": [{"owner": {"reputation": 748, "user_id": 5835431, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7b4b4de71c3ae7cdc87459fc2b67833b?s=128&d=identicon&r=PG&f=1", "display_name": "Deedee Megadoodoo", "link": "https://stackoverflow.com/users/5835431/deedee-megadoodoo"}, "edited": false, "score": 0, "creation_date": 1574922917, "post_id": 59080006, "comment_id": 104402223, "body": "If this project uses CMake as a build system, you can generate a Visual Studio project and then open it. You don&#39;t need to build the entire project unless there are some some interesting files that are generated at build-time."}], "answers": [{"tags": [], "owner": {"reputation": 64, "user_id": 11097806, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g8Hlf.png?s=128&g=1", "display_name": "Xantopp", "link": "https://stackoverflow.com/users/11097806/xantopp"}, "is_accepted": false, "score": 0, "last_activity_date": 1574932659, "last_edit_date": 1574932659, "creation_date": 1574932154, "answer_id": 59085191, "question_id": 59080006, "link": "https://stackoverflow.com/questions/59080006/possible-to-go-to-definition-without-building-code/59085191#59085191", "title": "Possible to Go to Definition without building code?", "body": "<p>I had the same problem, externel build was not helpfull, since MSVC does not explore the <code>\\*.pdb</code> file - it stores it's intellisense-data inside a file <code>\\*.VC.db</code> or <code>\\*.VC.opendb</code>.</p>\n\n<p>For me (using VC 2015) it was helpfull to add the appropriate include-directories (however it took a while to find them and determine the correct order ;-)). After this step the red underlines under the include directive disapeared and code navigation was possible.</p>\n\n<p>Inside of the DEVENV you just right-click your Project in the \"ProjectExplorer(Projektmappen-Explorer)\"-pane, choose \"Properties(Eigenschaften)\" and search for \"VC+ directories\", \"include directories(Includeverzeichnisse)\" and edit them.</p>\n\n<p>I strongly recommend to rework the include-directories in a text-editor. To do so close your Project, open the <code>\\*.vcproj</code>/<code>\\*.vcxproj</code> file in a text editor search the include path and replace it by a relative ones.</p>\n"}], "owner": {"reputation": 1, "user_id": 5467118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d73a919fc9be4a9dbdeecea26062150?s=128&d=identicon&r=PG&f=1", "display_name": "Elora", "link": "https://stackoverflow.com/users/5467118/elora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574932659, "creation_date": 1574898992, "question_id": 59080006, "link": "https://stackoverflow.com/questions/59080006/possible-to-go-to-definition-without-building-code", "title": "Possible to Go to Definition without building code?", "body": "<p>I am using Visual Studio 2013 mainly to read embedded C++ code from a project with an external build system. The project has a complex build process using multiple cmake files and scripts and compilation and linking takes place in command line and I can\u2019t (or its too tiresome) to build it within Visual Studio. </p>\n\n<p>Is it still possible to still use the code navigation features of VS like Go To Definition/Declaration etc. if I cannot build the project? If so how can I do this?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++", "sdl"], "comments": [{"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 1, "creation_date": 1574901368, "post_id": 59079977, "comment_id": 104397426, "body": "Why do you call <code>SDL_Init()</code> &amp; <code>SystemManager::Initialize()</code> twice?  Why aren&#39;t you setting <code>PlayerPong</code>&#39;s <code>m_window_renderer</code> member to something sensible?"}, {"owner": {"reputation": 13, "user_id": 11749127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20201f5d9ff1b6e91db10631ca2eeea0?s=128&d=identicon&r=PG&f=1", "display_name": "NotVerySmart", "link": "https://stackoverflow.com/users/11749127/notverysmart"}, "reply_to_user": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1574902036, "post_id": 59079977, "comment_id": 104397559, "body": "Well, its simple, I&#39;m bad st SDL, what should I do?"}, {"owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 0, "creation_date": 1575375150, "post_id": 59079977, "comment_id": 104537820, "body": "Try going through the LazyFoo tutorials just to get the basics.  They are very simple and introduce one feature at a time.  <a href=\"https://lazyfoo.net/tutorials/SDL/\" rel=\"nofollow noreferrer\">lazyfoo.net/tutorials/SDL</a>"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11749127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20201f5d9ff1b6e91db10631ca2eeea0?s=128&d=identicon&r=PG&f=1", "display_name": "NotVerySmart", "link": "https://stackoverflow.com/users/11749127/notverysmart"}, "edited": false, "score": 1, "creation_date": 1577422305, "post_id": 59402811, "comment_id": 105165805, "body": "I am forever in debt to you... Thank you so much for this answer! I asked this question countless times on other websites, and nobody seemed to care enough to answer in a manner that wasn&#39;t either berating, knowledgable, or sometimes even complete. However, You put it all together in a respectful way! Luckily, before I read your answer, I found a decent way of rendering on to my window. But this is far more effective! Thank you so much!"}], "tags": [], "owner": {"reputation": 63, "user_id": 11443052, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-s_rVH23xZIM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcqA-WqvR4moaEf-XDTCoB0N7BvmA/mo/photo.jpg?sz=128", "display_name": "Noah Lewis", "link": "https://stackoverflow.com/users/11443052/noah-lewis"}, "is_accepted": true, "score": 0, "last_activity_date": 1576729537, "last_edit_date": 1576729537, "creation_date": 1576724912, "answer_id": 59402811, "question_id": 59079977, "link": "https://stackoverflow.com/questions/59079977/why-isnt-my-c-code-rendering-an-sdl-rectangle/59402811#59402811", "title": "Why isn&#39;t my C++ code rendering an SDL rectangle?", "body": "<p>First, if you do not understand my written explanation, I can create video and explain line by line how to fix your code. </p>\n\n<p>So, there are many errors with your code. In the first part of the explanation I will explain why it does not work. In the second part, I will show you the correct way of writing your header files as well as some other problems. In the third part I will give you the code to make it work.</p>\n\n<p>PART 1: Why your code isn't working</p>\n\n<p>The first thing I noticed is that you are calling some functions twice on accident. If you check the return value of a function in a conditional, the function is called.</p>\n\n<pre><code>SDL_Init(SDL_INIT_VIDEO);\nif (SDL_Init(SDL_INIT_VIDEO) != 0) \n</code></pre>\n\n<p>For instance in this code you call SDL_Init(SDL_INIT_VIDEO) twice. Instead delete the first and just call the function in the conditional. You also do that here:</p>\n\n<pre><code>System.Initialize();\nif (System.Initialize() == false)\n</code></pre>\n\n<p>Keep in mind, as of now, if your code were to run you would not be able to exit the window, because you are not checking if the window should be closed.</p>\n\n<p>You also need to go back and learn how inheritance. When you draw the rectangle you pass in the window pointer from the inherited SystemManager. The problem is that this is a copy of the window pointer. Instead you should pass in the render pointer when you call the player render function. If you look at my example code at the bottom I do this.</p>\n\n<p>Define the function like this:</p>\n\n<pre><code>void Player_Draw(SDL_Renderer* render) {\n    SDL_SetRenderDrawColor(render, 255, 255, 255, 255);\n    SDL_RenderFillRect(render, &amp;pong1);\n}\n</code></pre>\n\n<p>Call the function like this:</p>\n\n<pre><code>SDL_RenderClear(System.m_window_renderer);\n</code></pre>\n\n<p>PART 2: Other things you happen to be doing incorrectly</p>\n\n<p>First fix the issues I described previously.</p>\n\n<p>You are using header files in a way that most people say you shouldn't. You are defining the class function inside the header. Instead, you should create a second file with the .c extension that defines the class functions.</p>\n\n<p>Here is a link that will show you the proper way to write header fies:\n<a href=\"https://www.learncpp.com/cpp-tutorial/89-class-code-and-header-files/\" rel=\"nofollow noreferrer\">https://www.learncpp.com/cpp-tutorial/89-class-code-and-header-files/</a></p>\n\n<p>Also, when you init sdl, you should check the if the return value is less than zero instead of !0. It's a little nit picky so you can ignore this if you want.</p>\n\n<p>Example:</p>\n\n<pre><code>if (SDL_Init(SDL_INIT_VIDEO) &lt; 0)\n</code></pre>\n\n<p>PART 3: The fixed code</p>\n\n<p>I fixed your code and put it all into one c file. Here is the fixed code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;SDL2/SDL.h&gt;\n\nclass SystemManager {\n    const int SCREEN_WIDTH = 1000;\n    const int SCREEN_HEIGHT = 800;\n\n    public:\n    SDL_Window* m_window = nullptr;\n    SDL_Renderer* m_window_renderer = nullptr;\n\n    bool running = true;\n    bool Initialize() {\n\n        if (SDL_Init(SDL_INIT_VIDEO) != 0) {\n            printf(\"SDL could not initialize! SDL Error: %s \\n\", SDL_GetError());\n\n            return false;\n        }\n        else {\n            m_window = SDL_CreateWindow(\"Pong\", SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, SCREEN_WIDTH, SCREEN_HEIGHT, SDL_WINDOW_SHOWN);\n            m_window_renderer = SDL_CreateRenderer(m_window, -1, SDL_RENDERER_PRESENTVSYNC);\n\n            if (m_window == NULL) {\n                printf(\"SDL Window could not be constructed! SDL Error: %s \\n\", SDL_GetError());\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n\n    void Render() {\n        SDL_SetRenderDrawColor(m_window_renderer, 0, 0, 0, 255);\n        SDL_RenderPresent(m_window_renderer);\n    }\n};\n\nclass Player : public SystemManager {\n    int y_axis = 400;\n    SDL_Rect pong1;\n\n    public:\n\n    Player(){\n        pong1.w = 100;\n        pong1.h = 100;\n        pong1.x = 100;\n        pong1.y = 100;\n    }\n\n    void Player_Draw(SDL_Renderer* render) {\n        SDL_SetRenderDrawColor(render, 255, 255, 255, 255);\n        SDL_RenderFillRect(render, &amp;pong1);\n    }\n\n\n\n    void Inputs() {\n\n    }\n};\n\nint main(int argc, char* argv[]) {\n    SystemManager System;\n    Player PlayerPong;\n\n    if (System.Initialize() == false) {\n        return -1;\n    }\n\n\n\n    while (System.running == true) {\n        SDL_SetRenderDrawColor(System.m_window_renderer, 0, 0, 0, 255);\n        SDL_RenderClear(System.m_window_renderer);\n        PlayerPong.Player_Draw(System.m_window_renderer);\n        System.Render();\n    }\n\n    SDL_DestroyWindow(System.m_window);\n    SDL_DestroyRenderer(System.m_window_renderer);\n    SDL_Quit();\n\n    return 0;\n}\n</code></pre>\n\n<p>If you are using linux, you can compile with:</p>\n\n<pre><code>g++ Main.cpp -lSDL2\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11749127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20201f5d9ff1b6e91db10631ca2eeea0?s=128&d=identicon&r=PG&f=1", "display_name": "NotVerySmart", "link": "https://stackoverflow.com/users/11749127/notverysmart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 59402811, "answer_count": 1, "score": 0, "last_activity_date": 1576729537, "creation_date": 1574898821, "question_id": 59079977, "link": "https://stackoverflow.com/questions/59079977/why-isnt-my-c-code-rendering-an-sdl-rectangle", "title": "Why isn&#39;t my C++ code rendering an SDL rectangle?", "body": "<p>I'm new to using SDL with C++ and was trying to create a little Pong game as a project, too bad I can't actually render a rectangle! I have tried to figure out whats wrong, but I need somebody who actually knows SDL in depth help me. This is the code I am working with:</p>\n\n<p>SystemManager.h</p>\n\n<pre><code>#pragma once\n#include &lt;SDL.h&gt;\n#include &lt;cstdio&gt;\n\nclass SystemManager {\nconst int SCREEN_WIDTH = 1000;\nconst int SCREEN_HEIGHT = 800;\n\npublic:\nSDL_Window* m_window = nullptr;\nSDL_Renderer* m_window_renderer = nullptr;\n\nbool running = true;\n\n\n\nbool Initialize() {\n    SDL_Init(SDL_INIT_VIDEO);\n\n    if (SDL_Init(SDL_INIT_VIDEO) != 0) {\n        printf(\"SDL could not initialize! SDL Error: %s \\n\", SDL_GetError());\n\n        return false;\n    }\n    else {\n        m_window = SDL_CreateWindow(\"Pong\", SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, SCREEN_WIDTH, SCREEN_HEIGHT, SDL_WINDOW_BORDERLESS);\n        m_window_renderer = SDL_CreateRenderer(m_window, -1, SDL_RENDERER_PRESENTVSYNC);\n\n        if (m_window == NULL) {\n            printf(\"SDL Window could not be constructed! SDL Error: %s \\n\", SDL_GetError());\n\n            return false;\n        }\n    }\n\n\n\n    return true;\n}\n\n\nvoid Render() {\n    SDL_SetRenderDrawColor(m_window_renderer, 0, 0, 0, 255);\n    SDL_RenderPresent(m_window_renderer);\n}\n};\n</code></pre>\n\n<p>Player.h</p>\n\n<pre><code>#pragma once\n\n#include \"SystemManager.h\"\n\n\n\nclass Player : public SystemManager {\nint y_axis = 400;\n\npublic:\nvoid Player_Draw() {\n    SDL_SetRenderDrawColor(m_window_renderer, 0, 0, 0, 255);\n    SDL_RenderClear(m_window_renderer);\n\n\n\n    SDL_Rect pong1;\n\n    pong1.w = 30;\n    pong1.h = 50;\n    pong1.x = 970;\n    pong1.y = 400;\n\n    SDL_SetRenderDrawColor(m_window_renderer, 255, 255, 255, 255);\n    SDL_RenderFillRect(m_window_renderer, &amp;pong1);\n}\n\n\n\nvoid Inputs() {\n\n}\n};\n</code></pre>\n\n<p>And Main.cpp</p>\n\n<pre><code>#include &lt;SDL.h&gt;\n\n#include \"Player.h\"\n\n\n\nint main(int argc, char* argv[]) {\nSystemManager System;\nPlayer PlayerPong;\n</code></pre>\n\n<p>Might somebody help explain to me what I'm doing wrong?</p>\n\n<pre><code>System.Initialize();\n\nif (System.Initialize() == false) {\n    return -1;\n}\n\n\n\nwhile (System.running == true) {\n    PlayerPong.Player_Draw();\n    System.Render();\n}\n\n\n\nSDL_DestroyWindow(System.m_window);\nSDL_DestroyRenderer(System.m_window_renderer);\nSDL_Quit();\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "regex", "string"], "comments": [{"owner": {"reputation": 459, "user_id": 6838293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc846feadb6dcfe1832b873803941fd?s=128&d=identicon&r=PG&f=1", "display_name": "borievka", "link": "https://stackoverflow.com/users/6838293/borievka"}, "edited": false, "score": 0, "creation_date": 1574899217, "post_id": 59079958, "comment_id": 104397019, "body": "Hi, please paste your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">mwe</a> with the usage of your regex"}], "answers": [{"comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1574899818, "post_id": 59080076, "comment_id": 104397138, "body": "Using raw string literals for regular expressions makes the backslashes a lot easier to manage, btw - no escaping needed."}], "tags": [], "owner": {"reputation": 459, "user_id": 6838293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc846feadb6dcfe1832b873803941fd?s=128&d=identicon&r=PG&f=1", "display_name": "borievka", "link": "https://stackoverflow.com/users/6838293/borievka"}, "is_accepted": true, "score": 1, "last_activity_date": 1574900759, "last_edit_date": 1574900759, "creation_date": 1574899634, "answer_id": 59080076, "question_id": 59079958, "link": "https://stackoverflow.com/questions/59079958/how-do-i-extract-the-value-from-a-string-using-regex/59080076#59080076", "title": "How do I extract the value from a string using Regex", "body": "<p>You need to correctly escape control characters inside your regex.\n<code>[\\n\\r]</code> in <code>john \\?[\\n\\r]+FRED: (.*)</code> is matching <code>newline</code> and <code>carriage return</code>. Probably what you want is <code>\\\\r\\\\n</code>, so you can match it in the string.</p>\n\n<p>The correct regex should be: <code>john \\?[\\\\n\\\\r]+FRED: (.*)</code></p>\n\n<p>This is a great tool where you can visualize regex: <a href=\"https://regex101.com/r/qaRy5Z/1/\" rel=\"nofollow noreferrer\">https://regex101.com/r/qaRy5Z/1/</a></p>\n\n<p>EDIT:\nAfter comment suggestion, you can also use raw string literal so you can omit double backslashing:</p>\n\n<pre><code> std::regex re(R\"( john \\?[\\n\\r]+FRED: (.*))\");\n</code></pre>\n\n<p><a href=\"https://gcc.godbolt.org/z/U2AbTb\" rel=\"nofollow noreferrer\">https://gcc.godbolt.org/z/U2AbTb</a></p>\n"}], "owner": {"reputation": 103, "user_id": 598301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/180ce781fddb4743c616a14f907ce222?s=128&d=identicon&r=PG&f=1", "display_name": "Doug", "link": "https://stackoverflow.com/users/598301/doug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 59080076, "answer_count": 1, "score": 0, "last_activity_date": 1574900759, "creation_date": 1574898694, "question_id": 59079958, "link": "https://stackoverflow.com/questions/59079958/how-do-i-extract-the-value-from-a-string-using-regex", "title": "How do I extract the value from a string using Regex", "body": "<p>I'm trying to extract the number 9 from following string using regex;</p>\n\n<p>\" john ?\\n\\r\\n\\rFRED: 9\"</p>\n\n<p>My regex is </p>\n\n<p>\" john \\?[\\n\\r]+FRED: (.*)\"</p>\n\n<p>The \\n and \\r are newline and return characters (white space) and bbviously \"(.*) is the capturing group.</p>\n\n<p>Its not working though! I'm guessing because of something really obvious.</p>\n\n<p>By the way I know the obvious way to do this is to just search the string for the \":\" and then get the number that way but I'm learning regex and I've spent quite a bit of time on this and it would be good\nto know what I'm doing wrong.</p>\n"}, {"tags": ["c++", "lambda", "lru"], "comments": [{"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "edited": false, "score": 0, "creation_date": 1574898143, "post_id": 59079877, "comment_id": 104396750, "body": "What is the real error message?"}, {"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "edited": false, "score": 0, "creation_date": 1574898275, "post_id": 59079877, "comment_id": 104396792, "body": "That cannot be the entire error message."}, {"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "edited": false, "score": 0, "creation_date": 1574898315, "post_id": 59079877, "comment_id": 104396807, "body": "Add it to your original post."}, {"owner": {"reputation": 4691, "user_id": 12345656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8bf964ac051a25737d03906e89e2b36?s=128&d=identicon&r=PG&f=1", "display_name": "n314159", "link": "https://stackoverflow.com/users/12345656/n314159"}, "edited": false, "score": 2, "creation_date": 1574898531, "post_id": 59079877, "comment_id": 104396866, "body": "The return type of <code>find</code> is an iterator not a pair. You have to dereference it. (If it is not <code>end()</code>!) See <a href=\"https://en.cppreference.com/w/cpp/container/unordered_map/find\" rel=\"nofollow noreferrer\">here</a> for documentation. The object you want should be <code>mycache.find(key)-&gt;second</code>."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 2, "creation_date": 1574898818, "post_id": 59079877, "comment_id": 104396929, "body": "Please have a look at how to make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "owner": {"reputation": 81, "user_id": 8513831, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154940006383657/picture?type=large", "display_name": "Sarah De-Paz", "link": "https://stackoverflow.com/users/8513831/sarah-de-paz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574907597, "creation_date": 1574898021, "last_edit_date": 1574907597, "question_id": 59079877, "link": "https://stackoverflow.com/questions/59079877/create-a-foreach-function-while-using-a-lambda-function", "title": "Create a foreach function while using a lambda function", "body": "<p>I have created a simulation of a LRU cache which is defined as described bellow:</p>\n\n<p><code>unordered_map&lt;string, std::pair&lt;T, std::list&lt;string&gt;::iterator&gt;&gt; mycache;</code></p>\n\n<p>Meaning, I also have a data member in the cache class called <code>list&lt;string&gt; mylist;</code></p>\n\n<p>The priorities of the cache to use LRU algorithm is on the <code>list&lt;string&gt;</code>.</p>\n\n<p>I need to create a <code>foreach</code> function using a lambda function to print out the items (<code>T objects</code>) in the cache according to their priorities (<strong>their order in <code>mylist</code></strong>).</p>\n\n<p>I did manage to print-out the items of the map:</p>\n\n<pre><code>template class &lt;p&gt;\n  void foreach(p func) {\n    for (typename std::unordered_map&lt;string, pair&lt;T, list&lt;string&gt;::iterator&gt;&gt;::iterator it = mycache.begin();\n         it != mycache.end(); ++it) {\n      func(it-&gt;second.first);\n    }\n  }\n</code></pre>\n\n<p>When I tried to do it on the list:</p>\n\n<pre><code> void foreach(const function&lt;void(T&amp;)&gt; func) {\n    for (auto key:priorityQueue) {\n      pair&lt;T, list&lt;string&gt;::iterator&gt; mypair = mycache.find(key);\n      T obj = mypair.first;\n      func(obj);\n    }\n  }\n</code></pre>\n\n<p>This fails to <strong>compile</strong> and says there's an issue with the <code>mypair</code>.\nerror is the following:</p>\n\n<pre><code>error: conversion from \u2018std::unordered_map&lt;std::__cxx11::basic_string&lt;char&gt;, std::pair&lt;Student, std::_List_iterator&lt;std::__cxx11::basic_string&lt;char&gt; &gt; &gt;, std::hash&lt;std::__cxx11::basic_string&lt;char&gt; &gt;, std::equal_to&lt;std::__cxx11::basic_string&lt;char&gt; &gt;, std::allocator&lt;std::pair&lt;const std::__cxx11::basic_string&lt;char&gt;, std::pair&lt;Student, std::_List_iterator&lt;std::__cxx11::basic_string&lt;char&gt; &gt; &gt; &gt; &gt; &gt;::iterator {aka std::__detail::_Node_iterator&lt;std::pair&lt;const std::__cxx11::basic_string&lt;char&gt;, std::pair&lt;Student, std::_List_iterator&lt;std::__cxx11::basic_string&lt;char&gt; &gt; &gt; &gt;, false, true&gt;}\u2019 to non-scalar type \u2018std::pair&lt;Student, std::_List_iterator&lt;std::__cxx11::basic_string&lt;char&gt; &gt; &gt;\u2019 requested\n       pair&lt;T, list&lt;string&gt;::iterator&gt; mypair = mycache.find(key);\n</code></pre>\n\n<p><em>Where is my bug?</em></p>\n"}, {"tags": ["c++", "algorithm", "sorting", "quicksort"], "answers": [{"tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 2, "last_activity_date": 1574898707, "creation_date": 1574898707, "answer_id": 59079962, "question_id": 59079863, "link": "https://stackoverflow.com/questions/59079863/how-does-the-quicksort-function-work-in-a-quicksort-algorithm/59079962#59079962", "title": "How does the quicksort function work in a quicksort algorithm?", "body": "<p>The partition function places the pivot element in place and returns the index to the pivot element. The next two calls exclude the element, and in the worst case, one call will be for zero elements, the other for n-1 elements, and continuing with the worst case, the size of what is passed on only decreases by 1 element for each level of recursion, with time complexity O(n^2). The best case is if the pivot ends up in the middle, with an even split on each level of recursion, or near even split for time complexity O(n log(n)).</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 12448592, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBNx12i3Mj2k0YxSZKHhG8Q7-pNNCW06DiC_pG2ew=k-s128", "display_name": "DCFitz", "link": "https://stackoverflow.com/users/12448592/dcfitz"}, "edited": false, "score": 0, "creation_date": 1574899555, "post_id": 59079966, "comment_id": 104397085, "body": "And when a partition (let&#39;s say partition A) is partitioned again into 2 smaller partitions (A1 and A2), both of these will require to be partitioned again, until, as you said, there are too few elements for the IF statement to be true. After the first partition A is partitioned into the 2 smaller partitions, both recursive calls are computed? (For the values smaller and bigger than the pivot). To explain better, the code will work like this: 1) run call function for A1 2) Run call function for A2? Or does the code deal with A1 until it cannot be partitioned again, then move to A2?"}, {"owner": {"reputation": 33, "user_id": 12448592, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBNx12i3Mj2k0YxSZKHhG8Q7-pNNCW06DiC_pG2ew=k-s128", "display_name": "DCFitz", "link": "https://stackoverflow.com/users/12448592/dcfitz"}, "edited": false, "score": 0, "creation_date": 1574899906, "post_id": 59079966, "comment_id": 104397153, "body": "From what I know, the machine will try to go down the rabbit hole as much as it requires to get an answer before moving on. That&#39;s why my initial impression was that A1 will be partitioned until it cannot anymore, but then what happened to partition A2? It jumps back to it? So it&#39;s mostly the order in which the code is processed that makes me not understand the process. (Also thanks for answering)"}, {"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "reply_to_user": {"reputation": 33, "user_id": 12448592, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBNx12i3Mj2k0YxSZKHhG8Q7-pNNCW06DiC_pG2ew=k-s128", "display_name": "DCFitz", "link": "https://stackoverflow.com/users/12448592/dcfitz"}, "edited": false, "score": 1, "creation_date": 1574900939, "post_id": 59079966, "comment_id": 104397339, "body": "You are correct that QS uses a depth-first approach so that, after the initial partitioning, the left partition is fully sorted (by recursion) before the right partition is processed."}], "tags": [], "owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "is_accepted": true, "score": 3, "last_activity_date": 1574933382, "last_edit_date": 1574933382, "creation_date": 1574898721, "answer_id": 59079966, "question_id": 59079863, "link": "https://stackoverflow.com/questions/59079863/how-does-the-quicksort-function-work-in-a-quicksort-algorithm/59079966#59079966", "title": "How does the quicksort function work in a quicksort algorithm?", "body": "<p><code>if (low &lt; high) will always be true.</code></p>\n\n<p>Not correct. It will be true on the first call, but QuickSort calls itself recursive with progressively smaller intervals between <code>low</code> and <code>high</code>. This <code>if</code> is why the algorithm eventually terminates - you ask about that below.</p>\n\n<p><code>Pi will be equal to the returned value of the partition funcion (i+1)</code></p>\n\n<p>Right. <code>pi</code> is short for pivot index, i.e. the location where the chosen pivot ended up after partitioning.</p>\n\n<p><code>And what if at this point the values are still not sorted?</code></p>\n\n<p>After partitioning, you know that no value in the left partition is greater than the pivot value and that no value in the right partition is less than the pivot value. That's all you know, and all the algorithm needs to know in order to eventually succeed. Each partition is recursively partitioned until it only has one element in it.</p>\n\n<p><code>when will this loop situation stop?</code></p>\n\n<p>See my first point.</p>\n"}], "owner": {"reputation": 33, "user_id": 12448592, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBNx12i3Mj2k0YxSZKHhG8Q7-pNNCW06DiC_pG2ew=k-s128", "display_name": "DCFitz", "link": "https://stackoverflow.com/users/12448592/dcfitz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 59079966, "answer_count": 2, "score": 3, "last_activity_date": 1574933382, "creation_date": 1574897870, "last_edit_date": 1574898692, "question_id": 59079863, "link": "https://stackoverflow.com/questions/59079863/how-does-the-quicksort-function-work-in-a-quicksort-algorithm", "title": "How does the quicksort function work in a quicksort algorithm?", "body": "<p>I've understood how the partitioning part is done in the quicksort algorithm, but I'm having trouble understanding the quicksort recursive function. Could someone please explain to me step by step how it works? I'm pasting here the C++ code.</p>\n\n<pre><code>using namespace std;\n\nvoid swap(int* a, int* b) {\n    int temp = *a;\n    *a = *b;\n    *b = temp;\n}\n\nint partition(int myArray[], int low, int high) {\n    int i = (low - 1);\n    int pivot = myArray[high];\n\n    for (int j = low; j &lt;= high - 1; j++) {\n        if (myArray[j] &lt; pivot) {\n            i++;\n            swap(&amp;myArray[i], &amp;myArray[j]);\n        }\n    }\n    swap(&amp;myArray[i + 1], &amp;myArray[high]);\n    return (i + 1);\n}\n\nvoid quickSort(int myArray[], int low, int high) {\n\n    if (low &lt; high) {\n        int pi = partition(myArray, low, high);\n\n        quickSort(myArray, low, pi - 1);\n        quickSort(myArray, pi + 1, high);\n    }\n}\n\nvoid cinArray(int myArray[], int n) {\n    for (int p = 0; p &lt; n; p++) {\n        cin &gt;&gt; myArray[p];\n    }\n}\n\nvoid print(int myArray[], int n) {\n    for (int z = 0; z &lt; n; z++) {\n        cout &lt;&lt; myArray[z] &lt;&lt; \"\\t\";\n    }\n}\n\nint main() {\n    int myArray[10];\n    int size = sizeof(myArray) / sizeof(myArray[0]);\n    cout &lt;&lt; \"Write 10 numbers: \";\n    cinArray(myArray, size);\n    quickSort(myArray, 0, size - 1);\n    print(myArray, size);\n    return 0;\n}\n</code></pre>\n\n<p>My logic by far (step by step) is the following: </p>\n\n<ol>\n<li><code>if (low &lt; high)</code> will always be true. The first time, the\nlow (0) and high (9) values are taken from the int main.</li>\n<li>Pi will be equal to the returned value of the partition funcion\n(i+1), and I suppose that in order to return that value the function\nhas to run first.</li>\n<li>We call the quicksort function giving new arguments for the function twice. Once for\nthe values before and once for the values after i+1 from the original partitioning. I want to focus on what happens on the first one, the one that has the values before i+1.</li>\n<li>Function starts again, the if statement is true (always is), pi calls the function partition and returns i+1, pi is equal to i+1. And what if at this point the values are still not sorted? I suppose the quicksort function restarts again (It feels like a loop). But since the IF statement will always be true, when will this loop situation stop? </li>\n<li>Also, assuming my logic at point 4 is correct, how is the code run the first time? Does it start with the first <code>quickSort(myArray, low, pi - 1);</code> function call and loops until something stops it and then does the same for the second call <code>quickSort(myArray, pi + 1, high);</code>? Or does it partition before i+1 then after i+1 and restarts the function? </li>\n</ol>\n\n<p>I know it's a basic question, but I'm really having a hard time wraping my head around this algorithm. </p>\n"}, {"tags": ["c++", "visual-studio-code", "g++", "printf", "mingw"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1574897066, "post_id": 59079677, "comment_id": 104396502, "body": "If downloading &quot;mingw&quot; make sure you actually get mingw-w64, not mingw.org"}, {"owner": {"reputation": 49, "user_id": 11076262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d953374a03243285613b388d31afc58?s=128&d=identicon&r=PG&f=1", "display_name": "Hudie", "link": "https://stackoverflow.com/users/11076262/hudie"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1574897613, "post_id": 59079677, "comment_id": 104396636, "body": "I downloaded the &quot;MinGW-W64-install.exe&quot; from <a href=\"https://sourceforge.net/projects/mingw-w64/files/\" rel=\"nofollow noreferrer\">sourceforge.net/projects/mingw-w64/files</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1574897726, "post_id": 59079677, "comment_id": 104396658, "body": "The message suggests you defined a function called vsnprintf in the <code>equation.cpp</code> file . It would improve the question to post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal, Reproducible Example</a>"}, {"owner": {"reputation": 324, "user_id": 4918576, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ra910xa1L7w/AAAAAAAAAAI/AAAAAAAAAQ0/QgWEGVSrlbM/photo.jpg?sz=128", "display_name": "Roberto C. Rodriguez-Hidalgo", "link": "https://stackoverflow.com/users/4918576/roberto-c-rodriguez-hidalgo"}, "edited": false, "score": 1, "creation_date": 1578545168, "post_id": 59079677, "comment_id": 105475171, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/43294488/mingw-g-multiple-definition-of-vsnprintf-when-using-to-string\">MinGW g++: Multiple definition of vsnprintf when using to_string</a>"}], "owner": {"reputation": 49, "user_id": 11076262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d953374a03243285613b388d31afc58?s=128&d=identicon&r=PG&f=1", "display_name": "Hudie", "link": "https://stackoverflow.com/users/11076262/hudie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 500, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1578543252, "creation_date": 1574896533, "last_edit_date": 1574922080, "question_id": 59079677, "link": "https://stackoverflow.com/questions/59079677/mingw-terminal-output-multiple-definition-of-vsnprintf", "title": "Mingw Terminal Output: multiple definition of &#39;vsnprintf&#39;", "body": "<p>I'm trying to get Mingw to work for VSCode at the moment, I've install all the packages from a Mingw download website and set the bin folder \"C:\\MinGW\\bin\" in my Environmental Variables.\nI set up a basic \"Hello World\" single source file and I was able to get the correct output. However now I'm trying to work on a project for school that contains multiple files and when I try to run this code I'm getting the following output in my terminal:</p>\n\n<pre><code>c:/mingw/bin/../lib/gcc/mingw32/8.2.0/../../../../mingw32/bin/ld.exe: c:/mingw/bin/../lib/gcc/mingw32/8.2.0/../../../libmingwex.a(vsnprintf.o):(.text+0x0): multiple definition of `vsnprintf'; C:\\Users\\tommy\\AppData\\Local\\Temp\\ccA3ybsU.o:equation.cpp:(.text$vsnprintf[_vsnprintf]+0x0): first defined here\nc:/mingw/bin/../lib/gcc/mingw32/8.2.0/../../../../mingw32/bin/ld.exe: c:/mingw/bin/../lib/gcc/mingw32/8.2.0/../../../libmingw32.a(main.o):(.text.startup+0xb0): undefined reference to `WinMain@16'\ncollect2.exe: error: ld returned 1 exit status\n</code></pre>\n\n<p>Not exactly sure how to go about fixing this, if someone could point me in the right direction.</p>\n"}, {"tags": ["c++", "arrays", "struct"], "comments": [{"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1574896682, "post_id": 59079676, "comment_id": 104396423, "body": "Select either the C tag or the C++ tag."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1574897395, "post_id": 59079676, "comment_id": 104396589, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/23143624/c-return-array-of-structs\">C++ Return Array of Structs</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1574897484, "post_id": 59079676, "comment_id": 104396608, "body": "@VladfromMoscow why did you re-tag this to C? The title says C++."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1574897633, "post_id": 59079676, "comment_id": 104396641, "body": "@Chipster Because he is always using the keyword struct with the structure type identifier. It seems it is a C code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1574898211, "post_id": 59079676, "comment_id": 104396764, "body": "@VladfromMoscow while this does seem like C, it could be because a former C programmer is programming in C++. Unfortunately, the title is all we have to go on right now."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1574898301, "post_id": 59079676, "comment_id": 104396800, "body": "@Chipster There is another problem with the C++ code. Variable length arrays is not a standard feature.:)"}], "answers": [{"comments": [{"owner": {"reputation": 13984, "user_id": 501126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/839de8a602b21abf36e020bcb32959fe?s=128&d=identicon&r=PG", "display_name": "nemequ", "link": "https://stackoverflow.com/users/501126/nemequ"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1574897044, "post_id": 59079704, "comment_id": 104396496, "body": "It&#39;s just to explain how to fix <i>the problem they asked about</i>, not all the other problems in the code (I see several)."}, {"owner": {"reputation": 13984, "user_id": 501126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/839de8a602b21abf36e020bcb32959fe?s=128&d=identicon&r=PG", "display_name": "nemequ", "link": "https://stackoverflow.com/users/501126/nemequ"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1574897172, "post_id": 59079704, "comment_id": 104396522, "body": "How so?  AFAICT it just doesn&#39;t fix the existing problems (other than the one they were asking about)\u2026 all I did was move the declaration outside the loop."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1574897271, "post_id": 59079704, "comment_id": 104396561, "body": "Note: The redeclaring the struct <code>point</code> could also be a problem in C++."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1574897275, "post_id": 59079704, "comment_id": 104396562, "body": "@nemequ You may not declare an array with unspecified number of elements and zero initializers."}, {"owner": {"reputation": 13984, "user_id": 501126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/839de8a602b21abf36e020bcb32959fe?s=128&d=identicon&r=PG", "display_name": "nemequ", "link": "https://stackoverflow.com/users/501126/nemequ"}, "edited": false, "score": 0, "creation_date": 1574897355, "post_id": 59079704, "comment_id": 104396579, "body": "Which isn&#39;t a new problem.  The same problem existed in the original code."}], "tags": [], "owner": {"reputation": 13984, "user_id": 501126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/839de8a602b21abf36e020bcb32959fe?s=128&d=identicon&r=PG", "display_name": "nemequ", "link": "https://stackoverflow.com/users/501126/nemequ"}, "is_accepted": true, "score": 1, "last_activity_date": 1574897687, "last_edit_date": 1574897687, "creation_date": 1574896710, "answer_id": 59079704, "question_id": 59079676, "link": "https://stackoverflow.com/questions/59079676/how-to-return-array-of-structs-in-c/59079704#59079704", "title": "How to return array of structs in C++?", "body": "<p>The problem here is that you're declaring <code>mypoint</code> <strong>inside</strong> of the for loop, so it's out of scope for the return value.  Try moving the declaration to before the for loop.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct point mypoint[]={};\nfor(int i=0;i&lt;n;i++){\n  // ...\n}\nreturn mypoint;\n</code></pre>\n\n<p>Of course, that's not the only problem with your code.  Honestly, I'm not sure exactly what you're trying to do here, but if you're declaring an array on the stack you also need to provide a length:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct point mypoint[n + 1]={};\nfor(int i=0;i&lt;n;i++){\n  // ...\n}\nreturn mypoint;\n</code></pre>\n\n<p>And <code>mypoint</code> is an array of <code>struct point</code>, not a single <code>struct point</code>, but you are returning a single <code>struct point</code>.  Either return the whole array or return the element you want:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct point mypoint[n + 1]={};\nfor(int i=0;i&lt;n;i++){\n  // ...\n}\nreturn mypoint[0];\n</code></pre>\n\n<p>The other possibility is that you don't really want <code>mypoint</code> to be an array, in which case you should just declare it as <code>struct point mypoint;</code> (outside the loop). Maybe something like</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct point lineangle(int x1, int y1, int x2, int y2, int n){\n    double angle=360/n, s,c;\n    int rotated_x,rotated_y;\n    struct point mypoint;\n    DDA(x1,y1,x2,y2);\n    for(int i=0;i&lt;n;i++){\n        c = cos(angle*3.14/180);\n        s = sin(angle*3.14/180);\n\n        rotated_x= (x1 +((x2-x1)*c-(y2-y1)*s));\n        rotated_y= (y1 +((x2-x1)*s+(y2-y1)*c));\n\n        struct point mypoint[]={};\n\n        mypoint.x = rotated_x;\n        mypoint.y = rotated_y;\n//      DDA(x1,y1,rotated_x,rotated_y);\n        x2=rotated_x;\n        y2=rotated_y;\n    }\n\n    return mypoint;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 161, "user_id": 12442552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5VH8n.jpg?s=128&g=1", "display_name": "KyIe LiebIer", "link": "https://stackoverflow.com/users/12442552/kyie-liebier"}, "is_accepted": false, "score": 1, "last_activity_date": 1574897490, "last_edit_date": 1574897490, "creation_date": 1574897090, "answer_id": 59079764, "question_id": 59079676, "link": "https://stackoverflow.com/questions/59079676/how-to-return-array-of-structs-in-c/59079764#59079764", "title": "How to return array of structs in C++?", "body": "<p>You are declaring mypoint inside of the loop, it should be before the loop. In addition to this, the array also needs a size, if you have an undetermined size you might need a different datatype like a vector. Lastly, I think you should only be using <code>point mypoint...</code> instead of <code>struct point mypoint...</code>. What you currently have would create a struct of structs, however even this will not compile since you have already used the name \u201cpoint\u201d to define your original struct and you cannot use it again.</p>\n"}, {"tags": [], "owner": {"reputation": 927, "user_id": 11876201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a07428013837e21b446ccfe8bddab7e9?s=128&d=identicon&r=PG", "display_name": "phoenixstudio", "link": "https://stackoverflow.com/users/11876201/phoenixstudio"}, "is_accepted": false, "score": 0, "last_activity_date": 1574898149, "creation_date": 1574898149, "answer_id": 59079891, "question_id": 59079676, "link": "https://stackoverflow.com/questions/59079676/how-to-return-array-of-structs-in-c/59079891#59079891", "title": "How to return array of structs in C++?", "body": "<p>1)add typedef to your declaration\n2)your function return an array (pointer)\n3) move mypoint declaration outsize the loop and use malloc</p>\n\n<pre><code>typedef struct point\n{\n int x;\n int y;\n};\n\n\nstruct point* lineangle(int x1, int y1, int x2, int y2, int n){\ndouble angle=360/n, s,c;\nint rotated_x,rotated_y;\nDDA(x1,y1,x2,y2);\nint i;\nstruct point* mypoint = malloc(n*sizeof(struct point));\nfor(i=0;i&lt;n;i++){\nc = cos(angle*3.14/180);\ns = sin(angle*3.14/180);\nrotated_x= (x1 +((x2-x1)*c-(y2-y1)*s));\nrotated_y= (y1 +((x2-x1)*s+(y2-y1)*c));\nmypoint[i].x=x1;\nmypoint[i].y=y1;\nmypoint[i+1].x = rotated_x;\nmypoint[i+1].y = rotated_y;\n//DDA(x1,y1,rotated_x,rotated_y);\nx2=rotated_x;\ny2=rotated_y;\n}\nreturn mypoint;\n}\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 11966983, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCqXtU7SEhKxNnQbq3eLzsPqjpRdSM4w4OxBzkM3A=k-s128", "display_name": "Velia Sagita Putri", "link": "https://stackoverflow.com/users/11966983/velia-sagita-putri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 59079704, "answer_count": 3, "score": 0, "last_activity_date": 1574900064, "creation_date": 1574896530, "last_edit_date": 1574900064, "question_id": 59079676, "link": "https://stackoverflow.com/questions/59079676/how-to-return-array-of-structs-in-c", "title": "How to return array of structs in C++?", "body": "<p>The error is say :\n'mypoint' is not declare in this scope.</p>\n\n<p>my struct is </p>\n\n<pre><code>struct point\n{\n   int x;\n   int y;\n};\n</code></pre>\n\n<p>and my code is :</p>\n\n<pre><code>struct point lineangle(int x1, int y1, int x2, int y2, int n){\n    double angle=360/n, s,c;\n    int rotated_x,rotated_y;\n    DDA(x1,y1,x2,y2);\n    for(int i=0;i&lt;n;i++){\n        c = cos(angle*3.14/180);\n        s = sin(angle*3.14/180);\n\n        rotated_x= (x1 +((x2-x1)*c-(y2-y1)*s));\n        rotated_y= (y1 +((x2-x1)*s+(y2-y1)*c));\n\n        struct point mypoint[]={};\n\n        mypoint[i].x=x1;\n        mypoint[i].y=y1;\n        mypoint[i+1].x = rotated_x;\n        mypoint[i+1].y = rotated_y;\n//      DDA(x1,y1,rotated_x,rotated_y);\n        x2=rotated_x;\n        y2=rotated_y;\n    }\n\n    return mypoint;\n}\n</code></pre>\n\n<p>i was declare but it not detected.</p>\n"}, {"tags": ["c++", "list", "compiler-errors", "iterator"], "comments": [{"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 4, "creation_date": 1574896600, "post_id": 59079663, "comment_id": 104396406, "body": "You want <code>const_iterator</code> instead of <code>iterator</code>, or use <code>auto</code>"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1574896698, "post_id": 59079663, "comment_id": 104396428, "body": "Assuming you have C++11 or better available, <code>auto</code> is a lot easier than <code>std::list&lt;const Item*&gt;::const_iterator</code>."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1574898025, "post_id": 59079663, "comment_id": 104396727, "body": "The error message is self-explanatory.  A <code>iterator</code> and a <code>const_iterator</code> are different types, and an <code>iterator</code> can&#39;t be used on a <code>const</code> container (since it provides a means to change elements).      Either remove the <code>const</code> qualifier from the function, or use <code>const_iterator</code> rather than <code>iterator</code>.   Or  (C++11 and later) use <code>auto</code> (which will, in effect, pick the iterator based on whether the container is <code>const</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1574898211, "last_edit_date": 1574898211, "creation_date": 1574897561, "answer_id": 59079820, "question_id": 59079663, "link": "https://stackoverflow.com/questions/59079663/c-list-iterator-cant-be-initlaized/59079820#59079820", "title": "C++ List Iterator cant be initlaized", "body": "<p>The function is a constant member function</p>\n\n<pre><code>double Character::getTotalWeight() const\n</code></pre>\n\n<p>So the data member <code>playerInventory.inventory</code> is considered as a constant data member. As a result you may not use a non-constant iterator.</p>\n\n<p>Write instead</p>\n\n<pre><code>for (list&lt;const Item*&gt;::const_iterator i = playerInventory.inventory.cbegin(); i != playerInventory.inventory.cend(); i++) {\n</code></pre>\n\n<p>That is the member function <code>begin</code> returna <code>const_iterator</code> while you are trying to assign it to <code>iterator</code> and there is no corresponding conversion from the first iterator type to the second iterator type.</p>\n"}], "owner": {"reputation": 11, "user_id": 9647481, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-u10EKCSd2Sg/AAAAAAAAAAI/AAAAAAAAAck/514pr7nPDfA/photo.jpg?sz=128", "display_name": "PirateCody", "link": "https://stackoverflow.com/users/9647481/piratecody"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1574898211, "creation_date": 1574896411, "question_id": 59079663, "link": "https://stackoverflow.com/questions/59079663/c-list-iterator-cant-be-initlaized", "title": "C++ List Iterator cant be initlaized", "body": "<p>I have two functions in my Character class:</p>\n\n<pre><code>void Character::dropItem(const Item &amp; item)\n{\n    for (list&lt;const Item*&gt;::iterator i = playerInventory.inventory.begin(); i != playerInventory.inventory.end(); i++) {\n        if ((*i) == &amp;item) {\n            playerInventory.inventory.erase(i);\n            break;\n        }\n    }\n}\n\ndouble Character::getTotalWeight() const\n{\n    for (list&lt;const Item*&gt;::iterator i = playerInventory.inventory.begin(); i != playerInventory.inventory.end(); i++) {\n\n    }\n}\n</code></pre>\n\n<p>However, Visual Studio gives me an error</p>\n\n<pre><code>Error   C2440   'initializing': cannot convert from 'std::_List_const_iterator&lt;std::_List_val&lt;std::_List_simple_types&lt;_Ty&gt;&gt;&gt;' to 'std::_List_iterator&lt;std::_List_val&lt;std::_List_simple_types&lt;_Ty&gt;&gt;&gt;'\n</code></pre>\n\n<p>on playerInventory in the first statement of the for loop in getTotalWeight().\nI can't figure out why this error is occurring, because it's literally the same loop as the function just above it. Any insight is appreciated.</p>\n"}, {"tags": ["c++", "algorithm", "sorting", "binary-search"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1574896561, "post_id": 59079660, "comment_id": 104396396, "body": "<b><i>fails two testcases with a wrong answer</i></b> Please add those to your question."}, {"owner": {"reputation": 27, "user_id": 10330298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c64897224823d4966ea6a135ee967e4?s=128&d=identicon&r=PG&f=1", "display_name": "3xpl017", "link": "https://stackoverflow.com/users/10330298/3xpl017"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1574896618, "post_id": 59079660, "comment_id": 104396409, "body": "That&#39;s the issue, it does not give you the testcases. So we can&#39;t debug."}], "answers": [{"tags": [], "owner": {"reputation": 27, "user_id": 10330298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c64897224823d4966ea6a135ee967e4?s=128&d=identicon&r=PG&f=1", "display_name": "3xpl017", "link": "https://stackoverflow.com/users/10330298/3xpl017"}, "is_accepted": true, "score": 0, "last_activity_date": 1574924950, "creation_date": 1574924950, "answer_id": 59083411, "question_id": 59079660, "link": "https://stackoverflow.com/questions/59079660/solving-wormholes-zco-2012/59083411#59083411", "title": "Solving Wormholes (ZCO 2012)", "body": "<p>Correct code:  </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;\n#include &lt;bits/stdc++.h&gt;\n#define loop(i,n) for(int i=0;i&lt;n;++i)\n#define FOR(i,a,b) for (int i = a; i &lt; b; ++i)\n#define ll long long\n#define inf 9223372036854775807\n#define printgrid(arr,m,n){cout&lt;&lt;\"[\";for(int i=0;i&lt;m;++i){if(i!=0)cout&lt;&lt;\" \";cout&lt;&lt;\"[\";for(int j=0;j&lt;n;++j){cout&lt;&lt;arr[i][j];if(j!=n-1)cout&lt;&lt;\" \";}cout&lt;&lt;\"]\";if(i!=m-1)cout&lt;&lt;endl;}cout&lt;&lt;\"]\"&lt;&lt;endl;}\nusing namespace std;\n\n\nint searchl(int *arr,int s,int v)\n{\n    int l=0;\n    int r=s-1;\n    while(l&lt;=r)\n    {\n        int m = (l+r)/2;\n        if (arr[m] == v) return v;\n        if(arr[m]&lt;v)\n        {\n            l = m + 1;\n        } else {\n            r = m - 1;\n        }\n    }\n    if (r&lt;0) return -1;\n    return arr[r];\n}\n\nint searchh(int *arr,int s,int v)\n{\n    int l=0;\n    int r=s-1;\n    while(l&lt;=r)\n    {\n        int m = (l+r)/2;\n        if (arr[m] == v) return v;\n        if(arr[m]&lt;v)\n        {\n            l = m + 1;\n        } else {\n            r = m - 1;\n        }\n    }\n    if(l&gt;s-1) return -1;\n    return arr[l];\n}\n\n\nint main() {\n    cin.sync_with_stdio(false);\n    cin.tie(NULL);\n    int n,x,y;\n    cin&gt;&gt;n&gt;&gt;x&gt;&gt;y;\n    vector&lt;pair&lt;int,int&gt;&gt; v(n);\n    int a[x];\n    int b[y];\n    loop(i,n) cin &gt;&gt; v[i].first &gt;&gt; v[i].second;\n    loop(i,x) cin &gt;&gt; a[i];\n    loop(i,y) cin &gt;&gt; b[i];\n    sort(a,a+x);\n    sort(b,b+y);\n\n    int mn = 0x7fffffff;\n\n    int l;\n    int u;\n\n    loop(i,n)\n    {\n        l = searchl(a,x,v[i].first);\n        u = searchh(b,y,v[i].second);\n        if(u==-1 or l==-1) continue;\n        mn = min(mn,(u-l+1));\n    }\n    cout &lt;&lt; mn &lt;&lt; endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 10330298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c64897224823d4966ea6a135ee967e4?s=128&d=identicon&r=PG&f=1", "display_name": "3xpl017", "link": "https://stackoverflow.com/users/10330298/3xpl017"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 59083411, "answer_count": 1, "score": -2, "last_activity_date": 1574924950, "creation_date": 1574896393, "last_edit_date": 1574896666, "question_id": 59079660, "link": "https://stackoverflow.com/questions/59079660/solving-wormholes-zco-2012", "title": "Solving Wormholes (ZCO 2012)", "body": "<h2>Description:</h2>\n\n<p>The year is 2102 and today is the day of ZCO. This year there are N contests and the starting and ending times of each contest is known to you. You have to participate in exactly one of these contests. Different contests may overlap. The duration of different contests might be different.</p>\n\n<p>There is only one examination centre. There is a wormhole V that transports you from your house to the examination centre and another wormhole W that transports you from the examination centre back to your house. Obviously, transportation through a wormhole does not take any time; it is instantaneous. But the wormholes can be used at only certain fixed times, and these are known to you.</p>\n\n<p>So, you use a V wormhole to reach the exam centre, possibly wait for some time before the next contest begins, take part in the contest, possibly wait for some more time and then use a W wormhole to return back home. If you leave through a V wormhole at time t1 and come back through a W wormhole at time t2, then the total time you have spent is (t2 - t1 + 1). Your aim is to spend as little time as possible overall while ensuring that you take part in one of the contests.</p>\n\n<p>You can reach the centre exactly at the starting time of the contest, if possible. And you can leave the examination centre the very second the contest ends, if possible. You can assume that you will always be able to attend at least one contest\u2013that is, there will always be a contest such that there is a V wormhole before it and a W wormhole after it.</p>\n\n<p>For instance, suppose there are 3 contests with (start,end) times (15,21), (5,10), and (7,25), respectively. Suppose the V wormhole is available at times 4, 14, 25, 2 and the W wormhole is available at times 13 and 21. In this case, you can leave by the V wormhole at time 14, take part in the contest from time 15 to 21, and then use the W wormhole at time 21 to get back home. Therefore the time you have spent is (21 - 14 + 1) = 8. You can check that you cannot do better than this.</p>\n\n<h2>Input:</h2>\n\n<p>The first line contains 3 space separated integers N, X, and Y, where N is the number of contests, X is the number of time instances when wormhole V can be used and Y is the number of time instances when wormhole W can be used. The next N lines describe each contest. Each of these N lines contains two space separated integers S and E, where S is the starting time of the particular contest and E is the ending time of that contest, with S &lt; E. The next line contains X space separated integers which are the time instances when the wormhole V can be used. The next line contains Y space separated integers which are the time instances when the wormhole W can be used.</p>\n\n<h2>Output:</h2>\n\n<p>Print a single line that contains a single integer, the minimum time needed to be spent to take part in a contest.</p>\n\n<h2>My code:</h2>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;\n#include &lt;bits/stdc++.h&gt;\n#define loop(i,n) for(int i=0;i&lt;n;++i)\n#define FOR(i,a,b) for (int i = a; i &lt; b; ++i)\n#define ll long long\n#define inf 9223372036854775807\n#define printgrid(arr,m,n){cout&lt;&lt;\"[\";for(int i=0;i&lt;m;++i){if(i!=0)cout&lt;&lt;\" \";cout&lt;&lt;\"[\";for(int j=0;j&lt;n;++j){cout&lt;&lt;arr[i][j];if(j!=n-1)cout&lt;&lt;\" \";}cout&lt;&lt;\"]\";if(i!=m-1)cout&lt;&lt;endl;}cout&lt;&lt;\"]\"&lt;&lt;endl;}\nusing namespace std;\n\n\nint searchl(int *arr,int s,int v)\n{\n    int l=0;\n    int r=s-1;\n    while(l&lt;=r)\n    {\n        int m = (l+r)/2;\n        if (arr[m] == v) return v;\n        if(arr[m]&lt;v)\n        {\n            l = m + 1;\n        } else {\n            r = m - 1;\n        }\n    }\n    if (r&lt;0) r=0;\n    return arr[r];\n}\n\nint searchh(int *arr,int s,int v)\n{\n    int l=0;\n    int r=s-1;\n    while(l&lt;=r)\n    {\n        int m = (l+r)/2;\n        if (arr[m] == v) return v;\n        if(arr[m]&lt;v)\n        {\n            l = m + 1;\n        } else {\n            r = m - 1;\n        }\n    }\n    if(l&gt;s-1) l=s-1;\n    return arr[l];\n}\n\n\nint main() {\n    int n,x,y;\n    cin&gt;&gt;n&gt;&gt;x&gt;&gt;y;\n    vector&lt;pair&lt;int,int&gt;&gt; v(n);\n    int a[x];\n    int b[y];\n    loop(i,n) cin &gt;&gt; v[i].first &gt;&gt; v[i].second;\n    loop(i,x) cin &gt;&gt; a[i];\n    loop(i,y) cin &gt;&gt; b[i];\n    sort(a,a+x);\n    sort(b,b+y);\n\n    int mn = 0x7fffffff;\n\n    int l;\n    int u;\n\n    loop(i,n)\n    {\n        l = searchl(a,x,v[i].first);\n        u = searchh(b,y,v[i].second);\n        mn = min(mn,(u-l+1));\n    }\n    cout &lt;&lt; mn &lt;&lt; endl;\n}\n</code></pre>\n\n<p>What I tried is I use binary search for the lower range and upper range. and return the closest integer in the list. This should result in the lowest difference. This code AC's in 90% of the testcases however fails two testcases with a wrong answer.</p>\n"}, {"tags": ["c++", "visual-studio", "pointers", "memory"], "comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 2, "creation_date": 1574896327, "post_id": 59079641, "comment_id": 104396348, "body": "The solution is virtually always to not pass around pointers or references to base classes that don&#39;t have the methods you need."}, {"owner": {"reputation": 123, "user_id": 6217440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57ea60d9ff4628b674a27ce3213a3646?s=128&d=identicon&r=PG&f=1", "display_name": "Yea okay", "link": "https://stackoverflow.com/users/6217440/yea-okay"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1574896526, "post_id": 59079641, "comment_id": 104396390, "body": "@MooingDuck how come? I see why references but with pointers i can statically cast and get the methods i need.. its not too late to change how I pass around things but I need the parent class to be passed around because I never know what kind of event is getting thrown up. How should i pass these events?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1574896551, "post_id": 59079641, "comment_id": 104396394, "body": "You can statically cast references just like you do pointers.  <code>const MouseMovedEvent&amp; childEvent = static_cast&lt;const MouseMovedEvent&amp;&gt;(e);</code>  But it&#39;s not recommended. You almost always want to pass around objects that have methods you can call without casting."}, {"owner": {"reputation": 123, "user_id": 6217440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57ea60d9ff4628b674a27ce3213a3646?s=128&d=identicon&r=PG&f=1", "display_name": "Yea okay", "link": "https://stackoverflow.com/users/6217440/yea-okay"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1574896599, "post_id": 59079641, "comment_id": 104396405, "body": "@MooingDuck const references can be casted to children?"}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 1, "creation_date": 1574896630, "post_id": 59079641, "comment_id": 104396414, "body": "@Luke It&#39;s a sign of bad code design if you pass around a base class, but need to convert them to the correct child class to be able to use them."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1574896643, "post_id": 59079641, "comment_id": 104396416, "body": "Yes, const references can be cast to children exactly like pointers to const.  Though in both cases you almost certainly want <code>dynamic_cast</code>. But again: I&#39;ve been a professional programmer for 10+ years, and only used <code>dynamic_cast</code> like three times."}, {"owner": {"reputation": 123, "user_id": 6217440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57ea60d9ff4628b674a27ce3213a3646?s=128&d=identicon&r=PG&f=1", "display_name": "Yea okay", "link": "https://stackoverflow.com/users/6217440/yea-okay"}, "edited": false, "score": 0, "creation_date": 1574896698, "post_id": 59079641, "comment_id": 104396427, "body": "So how should I approach something like this? I have mouse events, key events, etc and they all share code. How could I possibly avoid passing around the parent?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1574896741, "post_id": 59079641, "comment_id": 104396440, "body": "@Luke: <code>Event-&gt;dispatch()</code> fires itself as a <code>MouseMovedEvent</code> into your <code>MouseMovedEventHandler</code>."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1574896774, "post_id": 59079641, "comment_id": 104396445, "body": "You could use the visitor pattern, or you could make sure that the base class has virtual functions that works for all you child-classes to name a couple of ways."}, {"owner": {"reputation": 123, "user_id": 6217440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57ea60d9ff4628b674a27ce3213a3646?s=128&d=identicon&r=PG&f=1", "display_name": "Yea okay", "link": "https://stackoverflow.com/users/6217440/yea-okay"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1574896933, "post_id": 59079641, "comment_id": 104396472, "body": "@MooingDuck You have been super insightful. Please post the info you shared as an answer as this is exactly how i should be doing this. I need to create a dispatcher per event. Thank you so much you answered much more than you know you did. @ super I like the idea of that but key events couldnt possibly share methods with mousePosition events because things like getX() make no sense for key strokes."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 1, "creation_date": 1574900174, "post_id": 59079641, "comment_id": 104397203, "body": "Note: You&#39;re only allowed to cast like you do if you <b>know for certain</b> it is truly a pointer to that type--as opposed to a pointer to some other derived type. Otherwise, you&#39;re playing with undefined behavior."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 2, "creation_date": 1574900289, "post_id": 59080112, "comment_id": 104397219, "body": "Also worth noting it that this is only possible if you know for sure it is an object of that type and not some other derived type. Otherwise, that&#39;s undefined behavior if I&#39;m not mistaken."}], "tags": [], "owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "is_accepted": true, "score": 1, "last_activity_date": 1574899975, "creation_date": 1574899975, "answer_id": 59080112, "question_id": 59079641, "link": "https://stackoverflow.com/questions/59079641/converting-const-reference-of-parent-class-into-a-derived-child-object/59080112#59080112", "title": "Converting const reference of parent class into a derived child object", "body": "<p>To answer the direct question: you can cast a reference exactly like you cast a pointer.</p>\n\n<pre><code>const MouseMovedEvent&amp; childEvent = static_cast&lt;const MouseMovedEvent&amp;&gt;(e);\n</code></pre>\n\n<p>However, when casting from a parent to a child, you almost always want to prefer <code>dynamic_cast</code>. Be aware that if the cast is wrong, <code>dynamic_cast</code> will throw a <code>std::bad_cast</code> exception, (which is a good thing, because otherwise it just causes your program to start doing completely undefined \"random\" things)</p>\n\n<p>It's also worth noting that you <em>should not do this</em>.  You should always be interacting with classes that have the methods you need to interact with them. If you need to cast to a child, it's almost certain that you've designed this in an awkward way, and that there's a much cleaner design. Since you've clarified that you're working with Events, the solution is often something like a <code>Event-&gt;dispatch()</code>, which fires itself as a <code>MouseMovedEvent</code> into your <code>MouseMovedEventHandler</code>. </p>\n"}], "owner": {"reputation": 123, "user_id": 6217440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57ea60d9ff4628b674a27ce3213a3646?s=128&d=identicon&r=PG&f=1", "display_name": "Yea okay", "link": "https://stackoverflow.com/users/6217440/yea-okay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 59080112, "answer_count": 1, "score": 0, "last_activity_date": 1574899975, "creation_date": 1574896184, "last_edit_date": 1574896498, "question_id": 59079641, "link": "https://stackoverflow.com/questions/59079641/converting-const-reference-of-parent-class-into-a-derived-child-object", "title": "Converting const reference of parent class into a derived child object", "body": "<p>I have many events in my program that all inherit from <code>Entity</code>. I am struggling to figure out how to convert this back to one of the children such as <code>MouseMovedEvent</code>. <code>Entity</code> is passed around as\n<code>const Entity&amp; e</code> and I need some way to access the getters in MouseMovedEvent. I was thinking I could just cast <code>Entity</code> to <code>MouseMovedEvent</code> but I have tried like 6 different ways to effect. </p>\n\n<p>Worst case scenario I was thinking of making the parameter for Event into <code>const Event* e</code> and then doing </p>\n\n<p><code>const MouseMovedEvent* childEvent = static_cast&lt;const MouseMovedEvent*&gt;(e);</code></p>\n\n<p>and this would work but I am worried that throwing around pointers could get a bit messy. I am hoping to make the const reference method work (or even just reference because I don't NEED them to be constant) but I am unsure how to accomplish this.</p>\n\n<p>Any help or direction on how to accomplish passing around parent Event objects is appreciated.</p>\n"}, {"tags": ["c++", "windows", "debugging", "memory"], "comments": [{"owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 1, "creation_date": 1574896389, "post_id": 59079610, "comment_id": 104396363, "body": "Have you tried a try-catch?   In MS C++, it does catch the ones that are newed but not the ones on the stack.  I don&#39;t know about cygwin/mingw GNU C++ or the other C++ compilers available on the windows platforms."}, {"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 3, "creation_date": 1574896788, "post_id": 59079610, "comment_id": 104396450, "body": "Use <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/memoryapi/nf-memoryapi-readprocessmemory\" rel=\"nofollow noreferrer\">ReadProcessMemory</a> - you&#39;ll need to anyway. It does not crash the target app but simply returns failure in case the memory address isn&#39;t valid for reading."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 1, "creation_date": 1574924151, "post_id": 59079610, "comment_id": 104402667, "body": "@cup: <code>try catch</code> is for C++ exceptions, not access violations. But it&#39;s not an access violation either, as the comment above explains."}], "answers": [{"tags": [], "owner": {"reputation": 820, "user_id": 12062017, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXiJu.jpg?s=128&g=1", "display_name": "Pickle Rick", "link": "https://stackoverflow.com/users/12062017/pickle-rick"}, "is_accepted": true, "score": 1, "last_activity_date": 1574921072, "creation_date": 1574921072, "answer_id": 59082647, "question_id": 59079610, "link": "https://stackoverflow.com/questions/59079610/scrub-through-memory-arbitrarily-while-avoiding-read-access-violations/59082647#59082647", "title": "Scrub through memory arbitrarily while avoiding Read Access Violations", "body": "<p><a href=\"https://docs.microsoft.com/en-us/windows/win32/api/memoryapi/nf-memoryapi-virtualqueryex\" rel=\"nofollow noreferrer\">VirtualQueryEx</a> can be used to iterate all pages of any process you have access to in order to check page protection.  </p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/windows/win32/api/psapi/nf-psapi-queryworkingsetex\" rel=\"nofollow noreferrer\">QueryWorkingSetEx</a> is similar but filtered to <em>paged in memory</em>, otherwise known as the <a href=\"https://docs.microsoft.com/en-us/windows/win32/memory/working-set\" rel=\"nofollow noreferrer\">working set</a>, and can provide more detailed information.  </p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/windows/win32/api/memoryapi/nf-memoryapi-readprocessmemory\" rel=\"nofollow noreferrer\">ReadProcessMemory</a> is, at its most basic, a memcpy wrapped in an exception handler from kernel. You won't ever crash using this (properly) and can check <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/errhandlingapi/nf-errhandlingapi-getlasterror\" rel=\"nofollow noreferrer\">GetLastError</a> to see why any failures happened.</p>\n"}], "owner": {"reputation": 10784, "user_id": 620863, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-Mqgo9PO_taA/AAAAAAAAAAI/AAAAAAAAABM/8h3wY8pcFbg/photo.jpg?sz=128", "display_name": "Anne Quinn", "link": "https://stackoverflow.com/users/620863/anne-quinn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 59082647, "answer_count": 1, "score": 0, "last_activity_date": 1574921072, "creation_date": 1574895996, "question_id": 59079610, "link": "https://stackoverflow.com/questions/59079610/scrub-through-memory-arbitrarily-while-avoiding-read-access-violations", "title": "Scrub through memory arbitrarily while avoiding Read Access Violations", "body": "<p>I'm writing a debugging tool that takes a memory address from another process and displays the memory there and also all of the memory around it.  Ordinarily, reading memory like this can cause a Read Access Violation depending on the address, but I don't want to crash if the user scrubs into memory the process doesn't own, or picks a weird address.</p>\n\n<p>Given an address, even something sure to fail like <code>0x00000000</code>, how can I try to access it without aborting my program if it's in violation?</p>\n"}, {"tags": ["c++", "pthreads", "mutex"], "comments": [{"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 2, "creation_date": 1574895546, "post_id": 59079489, "comment_id": 104396154, "body": "Which gets released first? The memory occupied by the static variable <code>mutex</code> or the the global <code>Object</code>.  This might be bordering on undefined behavior. It&#39;s also why I pretty much ban global objects from my team.  Having code of any significance run after <code>main</code> returns is a debugging nightmare when something goes wrong."}, {"owner": {"reputation": 349, "user_id": 5076774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b534aeeef0c7bdf167bf9cb64a34e3fd?s=128&d=identicon&r=PG&f=1", "display_name": "scg", "link": "https://stackoverflow.com/users/5076774/scg"}, "reply_to_user": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1574898264, "post_id": 59079489, "comment_id": 104396789, "body": "I don&#39;t think there&#39;s an order or undefined behavior issue here because pthread_mutex_t is trivially destructable. If there&#39;s an issue, it&#39;s just that &#39;mutex&#39; isn&#39;t cleaned up. I agree about global objects (in most cases at least), but for various reasons I&#39;m still interested in the problem of creating a thread-safe function that can be safely called at any point in program execution (log() in this example)."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1574899928, "post_id": 59079489, "comment_id": 104397157, "body": "Why not use standard C++ threads and mutexes and let their internals handle such details?"}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1574901784, "post_id": 59079489, "comment_id": 104397507, "body": "@shawn - I believe it&#39;s even more risky to replace <code>pthread_mutex_t</code> with <code>std::mutex</code> because the latter doesn&#39;t have a trivial destructor.  If the mutex in the logging function destructs before the <code>Object</code> instance, you&#39;re going to have issues <code>~Object</code> attempts to log.  That&#39;s why it <b>might</b> be safe to do what the OP is showing.  I&#39;ll try to elaborate more when I answer."}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 1, "creation_date": 1574902122, "post_id": 59079489, "comment_id": 104397577, "body": "@scg - Although my comment above speaks to my aversion of using global objects (as you indicate in your post too), I think what you have is safe and OK. I don&#39;t have time to write an full answer now, but I&#39;ll try to something a bit more formal tonight."}, {"owner": {"reputation": 349, "user_id": 5076774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b534aeeef0c7bdf167bf9cb64a34e3fd?s=128&d=identicon&r=PG&f=1", "display_name": "scg", "link": "https://stackoverflow.com/users/5076774/scg"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1574902358, "post_id": 59079489, "comment_id": 104397613, "body": "@Shawn: As selbie alluded to, std::mutex isn&#39;t (necessarily) trivially destructible, and so wouldn&#39;t be a suitable solution here. As to why I&#39;m using pthread mutexes, I&#39;m working in a context that uses pthreads. I think C++ thread features will generally be using the underlying thread model and therefore be compatible with it, but I&#39;m still a little wary (perhaps irrationally) of &#39;mixing and matching&#39; C++ thread features with pthread features."}], "answers": [{"tags": [], "owner": {"reputation": 61707, "user_id": 5597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/014ef33a9f0e7e3ac5a12e7446d2d619?s=128&d=identicon&r=PG", "display_name": "Anthony Williams", "link": "https://stackoverflow.com/users/5597/anthony-williams"}, "is_accepted": true, "score": 1, "last_activity_date": 1575017959, "creation_date": 1575017959, "answer_id": 59101662, "question_id": 59079489, "link": "https://stackoverflow.com/questions/59079489/destruction-of-pthread-mutexes-and-deinitialization-order-in-c/59101662#59101662", "title": "Destruction of pthread mutexes and deinitialization order in C++", "body": "<p>Since initializing with <code>PTHREAD_MUTEX_INITIALIZER</code> is equivalent to calling <code>pthread_mutex_init</code>, it is OK to call <code>pthread_mutex_destroy</code> to destroy such a mutex.</p>\n\n<p>However, <strong>calling <code>pthread_mutex_destroy</code> is not required</strong>; the resources will be reclaimed by the OS at program exit. Since it is an object with a trivial destructor, it is not destroyed as part of static cleanup at program exit, and so is safe to use until the end of the program.</p>\n"}], "owner": {"reputation": 349, "user_id": 5076774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b534aeeef0c7bdf167bf9cb64a34e3fd?s=128&d=identicon&r=PG&f=1", "display_name": "scg", "link": "https://stackoverflow.com/users/5076774/scg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 59101662, "answer_count": 1, "score": 0, "last_activity_date": 1575017959, "creation_date": 1574895210, "question_id": 59079489, "link": "https://stackoverflow.com/questions/59079489/destruction-of-pthread-mutexes-and-deinitialization-order-in-c", "title": "Destruction of pthread mutexes and deinitialization order in C++", "body": "<p>It seems fairly common to have pthread mutexes that are intended to exist until the end of a program's lifetime. Often these are created using <code>PTHREAD_MUTEX_INITIALIZER</code>.</p>\n\n<p>Here's a short but complete code example showing what I'm referring to:</p>\n\n<pre><code>#include &lt;pthread.h&gt;\n\n#include &lt;iostream&gt;\n\nvoid log(char const * const message) {\n    static pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;\n\n    pthread_mutex_lock(&amp;mutex);\n    std::cout &lt;&lt; message &lt;&lt; std::endl;\n    pthread_mutex_unlock(&amp;mutex);\n}\n\nstruct Object final {\n    Object() { log(\"Object::Object()\"); }\n    ~Object() { log(\"Object::~Object()\"); }\n};\n\nObject const object;\n\nint main(int const argc, const char * argv[]) {\n    log(\"main()\");\n\n    // Here the program would enter a main loop, with log() potentially being\n    // called from multiple threads at various times.\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Object::Object()\nmain()\nObject::~Object()\n</code></pre>\n\n<p>Error-checking and RAII wrapping for the lock are omitted for brevity.</p>\n\n<p>This example includes a thread-safe (at least that's the intent) logging function that's intended to be available throughout the lifetime of the program, including during deinitialization of objects with static storage duration, possibly (although not in this case) across multiple translation units, meaning that deinitialization order may be indeterminate.</p>\n\n<p>The issue is that there's no opportunity to safely destroy the mutex, as it may be needed at any point in the program's lifetime. (In practice I don't intend to have objects with static storage duration and nontrivial destructors, but I'm interested in addressing the issue nonetheless.)</p>\n\n<p>The first question that arises is whether mutexes initialized using <code>PTHREAD_MUTEX_INITIALIZER</code> need to be destroyed using <code>pthread_mutex_destroy()</code>. At least some versions of the <a href=\"https://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_mutex_destroy.html\" rel=\"nofollow noreferrer\">documentation</a> include this wording:</p>\n\n<blockquote>\n  <p>In cases where default mutex attributes are appropriate, the macro\n  PTHREAD_MUTEX_INITIALIZER can be used to initialize mutexes. The\n  effect shall be equivalent to dynamic initialization by a call to\n  pthread_mutex_init() with parameter attr specified as NULL, except\n  that no error checks are performed.</p>\n</blockquote>\n\n<p>This suggests that if <code>pthread_mutex_destroy()</code> is expected to be called on mutexes initialized using <code>pthread_mutex_init()</code>, then it's expected to be called on mutexes initialized using <code>PTHREAD_MUTEX_INITIALIZER</code> as well.</p>\n\n<p>However, in searching online and here on Stack Overflow, I've found disagreement as to whether it's required. For example, <a href=\"https://stackoverflow.com/questions/29295021/destroy-static-mutex-and-rwlock-initializers\">here</a> someone offers the following quote from a book on Linux development:</p>\n\n<blockquote>\n  <p>It is not necessary to call pthread_mutex_destroy() on a mutex that\n  was statically initialized using PTHREAD_MUTEX_INITIALIZER.</p>\n</blockquote>\n\n<p>On the other hand, in <a href=\"https://stackoverflow.com/questions/14721229/is-it-necessary-to-call-pthread-mutex-destroy-on-a-mutex\">this thread</a> it's argued that explicitly destroying such a mutex is in fact required.</p>\n\n<p>I've also seen it argued that it's not necessary to clean up mutexes in these sorts of circumstances regardless of how they're initialized because the resources will be reclaimed anyway. (This would presumably be the same logic behind the 'construct on first use and deliberately leak memory' idiom sometimes used for singletons and other objects with static storage duration.)</p>\n\n<p>I found a number of other threads that touch on the subject, with a mix of opinions on if/how mutexes should be destroyed. I'll also mention that I believe I've seen production code from credible sources that initializes mutexes with <code>PTHREAD_MUTEX_INITIALIZER</code> and never destroys them.</p>\n\n<p>I've gone into some detail here as a matter of due diligence, but my question is (I think) fairly simple. It would be useful to have mutexes that are available from initialization to the very end of the program's lifetime. I suspect not cleaning up such mutexes wouldn't cause any problems, but that approach troubles me. And even though some say mutexes initialized using <code>PTHREAD_MUTEX_INITIALIZER</code> don't need to be cleaned up, that seems contrary to the documentation and to various claims made by others.</p>\n\n<p>In summary, is there a safe and reasonable way to manage pthread mutexes that are intended to be available until the end of a program's lifetime? Is there any standard best practice here that I've failed to stumble upon in my search?</p>\n"}, {"tags": ["c++", "c++14"], "answers": [{"tags": [], "owner": {"reputation": 11200, "user_id": 1055395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6778daa107272cbbf6bc69c6c24683?s=128&d=identicon&r=PG&f=1", "display_name": "Anatolii", "link": "https://stackoverflow.com/users/1055395/anatolii"}, "is_accepted": true, "score": 0, "last_activity_date": 1574895159, "creation_date": 1574895159, "answer_id": 59079477, "question_id": 59079476, "link": "https://stackoverflow.com/questions/59079476/unable-to-see-the-code-line-throwing-an-exception/59079477#59079477", "title": "Unable to see the code line throwing an exception", "body": "<p>One way is to use a variadic template function that re-throws the given exception. Template arguments include <code>id</code> and exception arguments. <code>id</code> is a unique number that will be used for identifying a line of code on which the exception is thrown. Arguments are used for creating and re-throwing the exception. So, the code could be as follows:</p>\n\n<pre><code>template&lt;uint32_t id, class... Arguments&gt;\nvoid rethrow(Arguments&amp;&amp;... args) {\n    std::rethrow_exception(std::make_exception_ptr(std::logic_error(std::forward&lt;Arguments&gt;(args)...)));\n}\n\nint main() {\n    bool isOdd = std::rand() &amp; 1;\n    if (isOdd) {\n        rethrow&lt;1&gt;(\"An exception for the odd numbers!\");\n    } else {\n        rethrow&lt;2&gt;(\"An exception for the even numbers!\");\n    }\n} \n</code></pre>\n\n<p>After I recompiled the code and checked the back trace then in my case <code>id = 1</code>:</p>\n\n<pre><code>frame #9: 0x0000000100000c65 test.o`void rethrow&lt;1u, char const (&amp;) [34]&gt;(char const (&amp;&amp;&amp;) [34]) + 69\n</code></pre>\n\n<p>So, an exception was thrown from </p>\n\n<pre><code>rethrow&lt;1&gt;(\"An exception for the odd numbers!\");\n</code></pre>\n"}], "owner": {"reputation": 11200, "user_id": 1055395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6778daa107272cbbf6bc69c6c24683?s=128&d=identicon&r=PG&f=1", "display_name": "Anatolii", "link": "https://stackoverflow.com/users/1055395/anatolii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "closed_date": 1575063488, "accepted_answer_id": 59079477, "answer_count": 1, "score": 0, "last_activity_date": 1575062831, "creation_date": 1574895159, "last_edit_date": 1575062831, "question_id": 59079476, "link": "https://stackoverflow.com/questions/59079476/unable-to-see-the-code-line-throwing-an-exception", "closed_reason": "Duplicate", "title": "Unable to see the code line throwing an exception", "body": "<p>When I compile my code using <code>g++</code> with optimisation level <code>o3</code> and then debug it using <code>lldb</code> until the crash occurs there\u2019s no code line that throws an exception in the back trace. I don't want to use <code>-g</code> flag because my source code doesn't have to be visible in production. </p>\n\n<p>Let's consider a simple case:</p>\n\n<p><strong>test.cpp</strong></p>\n\n<pre><code>int main() {\n    bool isOdd = std::rand() &amp; 1;\n    if (isOdd) {\n        throw std::logic_error(\"An exception for the odd number was thrown!\");\n    } else {\n        throw std::logic_error(\"An exception for the even number was thrown!\");\n    }\n}\n</code></pre>\n\n<p>Then I compile it </p>\n\n<pre><code> g++ -o3 -std=c++14 -o test.o test.cpp\n</code></pre>\n\n<p>And view the back trace with the following set of commands:</p>\n\n<pre><code>lldb test.o\nr\nbt\n</code></pre>\n\n<p>But the back trace is not really helpful as it doesn't contain the code line throwing the exception or a string message that is passed to <code>logic_error</code> (<code>\"An exception for the odd number was thrown!\"</code> or <code>\"An exception for the even number was thrown!\"</code>):</p>\n\n<pre><code>...\nframe #7: 0x00007fff5011f26f libc++abi.dylib`__cxa_throw + 121\nframe #8: 0x0000000100000e11 test.o`main + 113\nframe #9: 0x00007fff5215d015 libdyld.dylib`start + 1\n...\n</code></pre>\n\n<p>Is there a way to overcome this limitation without using any external libraries?</p>\n\n<p>I'm using <code>MacOS</code> and <code>g++</code> as a compiler and <code>LLDB</code> as a debugging tool.</p>\n"}, {"tags": ["c++", "networking", "tcp", "sdl-net"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1574895379, "post_id": 59079432, "comment_id": 104396112, "body": "Why/how is the application layer intermixing messages?  TCP/IP just transports your application&#39;s messages.  You need to look into why your application is trying to send another message when a message (terrain data) is currently in progress."}, {"owner": {"reputation": 182, "user_id": 10697016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89abbf4eeb301932c532f703493de80e?s=128&d=identicon&r=PG&f=1", "display_name": "ThatGuyAgain", "link": "https://stackoverflow.com/users/10697016/thatguyagain"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1574895956, "post_id": 59079432, "comment_id": 104396249, "body": "Well i do not know, but the data is sent when i call the Client.sendData() method which send all of the data, i use this function twice so i would expect that it sends the number array and then the &quot;disconect&quot; message. But the number array beeing big i think it is sent in several pieces. And the Server.readData() methode just prints the received data. Sould i wait for a server response after sending the terrain data?"}, {"owner": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "edited": false, "score": 2, "creation_date": 1574900267, "post_id": 59079432, "comment_id": 104397211, "body": "TCP doesn&#39;t send messages, it sends streams of data that it segments to fit the MSS, and reassembles the segments into a stream on the other end. It will simply mash all your messages together, and it has no idea about any message boundary, so it may deliver partial messages to the destination application at any given time, but all data will eventually be sent to the application in order. There are transport protocols designed for messages (UDP, SCTP, etc.), but not TCP."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1574915348, "post_id": 59079432, "comment_id": 104400054, "body": "You are ignoring the count returned by the read function/method. You can&#39;t assume that every read fills the buffer, or doesn&#39;t reach end of stream, or doesn&#39;t fail."}], "answers": [{"comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1574971235, "post_id": 59094692, "comment_id": 104424602, "body": "&#39;However ... and then fills up the remainimg space of the char array with the previous data received&#39;: this is fantasy. It doesn&#39;t do any such thing. It doesn&#39;t disturb the previous content beyond the count of data actually received, and returns the count, which you are ignoring. Solution: don&#39;t. Don&#39;t use the byte array beyond the count returned. You don&#39;t need the extra copy step."}, {"owner": {"reputation": 182, "user_id": 10697016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89abbf4eeb301932c532f703493de80e?s=128&d=identicon&r=PG&f=1", "display_name": "ThatGuyAgain", "link": "https://stackoverflow.com/users/10697016/thatguyagain"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1574975520, "post_id": 59094692, "comment_id": 104425757, "body": "It is not fantasy i always define a new char (in the code: char stream[1400];) but when i call readStream(char* data, int* size, const TCPsocket&amp; clientSocket) it fills up the char stream with previous data, this is a fact not fantasy, maybee the data in SDLNet_TCP_Recv(clientSocket, data, 1400); is not flushed but this was not what i was refering to. Why do you say i do not need a copy steep? i wish to read a packet which i seperate by &#39;\\n&#39;."}, {"owner": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "edited": false, "score": 0, "creation_date": 1574999456, "post_id": 59094692, "comment_id": 104430144, "body": "You are using the wrong tool for the job. Do not try to drive a nail with a screwdriver. TCP is not made for messages. There are message protocols designed to do what you want. SCTP is message oriented, and it has many TCP features. There was, at one time, a Transactional TCP, but it never took off, and it has been deprecated."}, {"owner": {"reputation": 182, "user_id": 10697016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89abbf4eeb301932c532f703493de80e?s=128&d=identicon&r=PG&f=1", "display_name": "ThatGuyAgain", "link": "https://stackoverflow.com/users/10697016/thatguyagain"}, "edited": false, "score": 0, "creation_date": 1575044135, "post_id": 59094692, "comment_id": 104447744, "body": "So using TCP for sending information such as the player position/speed/... isn&#39;t good? Here i used a big array of numbers but it was just a test. I was just trying to do the same as in this tutorial: <a href=\"https://www.youtube.com/watch?v=iJfC4-yNnzY\" rel=\"nofollow noreferrer\">youtube.com/watch?v=iJfC4-yNnzY</a>"}], "tags": [], "owner": {"reputation": 182, "user_id": 10697016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89abbf4eeb301932c532f703493de80e?s=128&d=identicon&r=PG&f=1", "display_name": "ThatGuyAgain", "link": "https://stackoverflow.com/users/10697016/thatguyagain"}, "is_accepted": false, "score": 0, "last_activity_date": 1574966258, "creation_date": 1574966258, "answer_id": 59094692, "question_id": 59079432, "link": "https://stackoverflow.com/questions/59079432/how-to-send-large-chunks-of-data-using-a-tcp-connection/59094692#59094692", "title": "How to send large chunks of data using a tcp connection", "body": "<p>The problem was comming from the read function. I thought that if i gave it a NULL char array it would fill it up with the incoming data and then stop. However it fills in the char array using the incoming data and then fills up the remaining space of the char array with the pr\u00e9vious data received. (if the incoming data was shorter then the previous). As pointed out user207421 using the size of received data is needed. The fix was actualy simple, the read function returns the size of the received data and 0 or less if there was a connection error.</p>\n\n<p>The fix:</p>\n\n<p>(Although this code will print the data correcly in order packet seperation might still be needed for data processing)</p>\n\n<pre><code>bool Server::readStream(char* data, int* size, const TCPsocket&amp; clientSocket)\n      {\n        *size = SDLNet_TCP_Recv(clientSocket, data, 1400);\n        return *size &gt; 0;\n      }\n\n      bool Server::addStream(Pointer&lt;char&gt;* pointer, const TCPsocket&amp; clientSocket)\n      {\n        std::cout &lt;&lt; \"adding stream\" &lt;&lt; std::endl;\n        char stream[1400];\n        int streamSize;\n        if(!readStream(stream, &amp;streamSize, clientSocket))\n        {\n          return false;\n        }\n\n        int currentSize = 0;\n        if(pointer-&gt;value() != NULL)\n        {\n          currentSize = strlen(pointer-&gt;value());\n        }\n\n        std::cout &lt;&lt; \"creating ptr: \" &lt;&lt; currentSize &lt;&lt; \":\" &lt;&lt; streamSize &lt;&lt; std::endl;\n        Pointer&lt;char&gt; newPointer(new char[currentSize + streamSize + 1]);\n        std::cout &lt;&lt; \"copying old values\" &lt;&lt; std::endl;\n        for(int i=0;i&lt;currentSize;i++)\n        {\n          *(newPointer.value() + i) = *(pointer-&gt;value() + i);\n        }\n\n        std::cout &lt;&lt; \"copying new values\" &lt;&lt; std::endl;\n        for(int i=0;i&lt;streamSize;i++)\n        {\n          *(newPointer.value() + currentSize + i) = *(stream + i);\n        }\n        std::cout &lt;&lt; \"adding end point\" &lt;&lt; std::endl;\n        *(newPointer.value() + currentSize + streamSize) = '\\0';\n        *pointer = newPointer;\n        std::cout &lt;&lt; \"done stream\" &lt;&lt; std::endl;\n        return true;\n      }\n\n      bool Server::readData(const TCPsocket&amp; clientSocket)\n      {\n\n        std::cout &lt;&lt; \"START DATA READING\" &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"-------------------------------------------\" &lt;&lt; std::endl;\n        Pointer&lt;char&gt; pointer;\n        if(!addStream(&amp;pointer, clientSocket))\n        {\n          std::cout &lt;&lt; \"RECEIVING DATA FAILED\" &lt;&lt; std::endl;\n          return false;\n        }\n\n        while(*(pointer.value() + strlen(pointer.value()) - 1) != '\\n')\n        {\n          if(!addStream(&amp;pointer, clientSocket))\n          {\n            std::cout &lt;&lt; \"RECEIVING DATA FAILED\" &lt;&lt; std::endl;\n            return false;\n          }\n        }\n        std::cout &lt;&lt; \"data received: \" &lt;&lt; pointer.value() &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"-------------------------------------------\" &lt;&lt; std::endl;\n        return true;\n      }\n</code></pre>\n"}], "owner": {"reputation": 182, "user_id": 10697016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89abbf4eeb301932c532f703493de80e?s=128&d=identicon&r=PG&f=1", "display_name": "ThatGuyAgain", "link": "https://stackoverflow.com/users/10697016/thatguyagain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 467, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574966258, "creation_date": 1574894760, "last_edit_date": 1574895696, "question_id": 59079432, "link": "https://stackoverflow.com/questions/59079432/how-to-send-large-chunks-of-data-using-a-tcp-connection", "title": "How to send large chunks of data using a tcp connection", "body": "<p>I am curently trying to add a multiplayer system to my game engine. To do so i decided to use the TCP approch. Since i am already using the SDL2 library i decided to use the SDL2-net library for networking.</p>\n\n<p>I wish to send data to the server and vice versa. Sending small amounts of data isn't a problem however when i want to send a big chunk of data, a piece of terrain for example, the client will receiver will might get some other data mixed in between the terrain data which is of course not wanted. I am no expert in networking so there might be some basic concepts that i do not know of, and i would be more than happy to know if there is a solution to this \"problem\".</p>\n\n<p>Thanks for your help!</p>\n\n<p>In the following code a client sends a large array of numbers(in Client constructor) to a server and also a message when the client object gets destroyed(in Client destructor) but these two messages get mixed up.</p>\n\n<p>Client.h</p>\n\n<pre><code>#ifndef CLIENT_H\n#define CLIENT_H\n\n#include &lt;SDL2/SDL_net.h&gt;\n\nnamespace gt\n{\n  namespace ns\n  {\n    namespace networking\n    {\n      class Client\n      {\n      private:\n        TCPsocket socket;\n        SDLNet_SocketSet socketSet;\n\n        void sendData(const char*) const;\n      public:\n        Client(const char*, int);\n        ~Client();\n\n        void checkIncomingData();\n      };\n    }\n  }\n}\n\n#endif\n</code></pre>\n\n<p>Client.cpp</p>\n\n<pre><code>#include \"Client.h\"\n\n#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n\nnamespace gt\n{\n  namespace ns\n  {\n    namespace networking\n    {\n      Client::Client(const char* address, int port)\n      {\n        SDLNet_Init();\n        IPaddress ip;\n        if(SDLNet_ResolveHost(&amp;ip, address, port) == -1)\n        {\n          std::cout &lt;&lt; \"Client connection error!\" &lt;&lt; std::endl;\n        }\n        socket = SDLNet_TCP_Open(&amp;ip);\n        if(socket == NULL)\n        {\n          std::cout &lt;&lt; \"Client connection error! (wrong ip address?)\" &lt;&lt; std::endl;\n        }\n        socketSet = SDLNet_AllocSocketSet(1);\n        SDLNet_TCP_AddSocket(socketSet, socket);\n        sendData(\"&lt;for the sake of simlicity i removed the numbers that were here&gt;\\n\");\n      }\n\n      Client::~Client()\n      {\n        sendData(\"Client disconecting!\\n\");\n        SDLNet_TCP_Close(socket);\n        SDLNet_FreeSocketSet(socketSet);\n        SDLNet_Quit();\n      }\n\n      void Client::sendData(const char* data) const\n      {\n        int size = strlen(data);\n        int sentsize = 0;\n        while(sentsize &lt; size)\n        {\n          sentsize+=SDLNet_TCP_Send(socket, data + sentsize, size - sentsize);\n        }\n      }\n\n      void Client::checkIncomingData()\n      {\n        while(SDLNet_CheckSockets(socketSet,0) &gt; 0)\n        {\n          if(SDLNet_SocketReady(socket))\n          {\n            char data[1400];\n            SDLNet_TCP_Recv(socket, data, 1400);\n            std::cout &lt;&lt; \"data received: \" &lt;&lt; data &lt;&lt; std::endl;\n          }\n        }\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>Server.h</p>\n\n<pre><code>#ifndef SERVER_H\n#define SERVER_H\n\n#include &lt;SDL2/SDL_net.h&gt;\n\n#include \"ClientData.h\"\n\n#include \"../utils/ArrayList.h\"\n\nnamespace gt\n{\n  namespace ns\n  {\n    namespace networking\n    {\n      class Server\n      {\n      private:\n        int maxClients;\n\n        IPaddress ip;\n        TCPsocket socket;\n        ArrayList&lt;ClientData&gt; clients;\n        SDLNet_SocketSet clientsSet;\n\n        int currentId;\n\n        void removeClient(int);\n        void checkNewConnection();\n        void checkIncomingData();\n        void checkTimeouts(float);\n        bool readData(const TCPsocket&amp;);\n      public:\n        Server(int, int);\n        ~Server();\n\n        void update(float);\n      };\n    }\n  }\n}\n\n#endif\n</code></pre>\n\n<p>Server.cpp</p>\n\n<pre><code>#include \"Server.h\"\n\n#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n\nnamespace gt\n{\n  namespace ns\n  {\n    namespace networking\n    {\n      Server::Server(int maxClients, int port)\n      {\n        this-&gt;maxClients = maxClients;\n\n        clientsSet = SDLNet_AllocSocketSet(maxClients);\n\n        SDLNet_ResolveHost(&amp;ip, NULL, port);\n        socket = SDLNet_TCP_Open(&amp;ip);\n\n        currentId = 1;\n      }\n\n      Server::~Server()\n      {\n        SDLNet_FreeSocketSet(clientsSet);\n        SDLNet_TCP_Close(socket);\n      }\n\n      void Server::removeClient(int index)\n      {\n        SDLNet_TCP_DelSocket(clientsSet, clients[index].getSocket());\n        clients.remove(index);\n      }\n\n      void Server::checkNewConnection()\n      {\n        TCPsocket clientSocket = SDLNet_TCP_Accept(socket);\n        if(clientSocket)\n        {\n          if(clients.size() &lt; maxClients)\n          {\n            SDLNet_TCP_AddSocket(clientsSet, clientSocket);\n            ClientData data(currentId, clientSocket);\n            clients.add(data);\n            std::cout &lt;&lt; \"new connection id: \" &lt;&lt; currentId &lt;&lt; std::endl;\n            currentId++;\n          }\n          else\n          {\n            //no more space!\n          }\n        }\n      }\n\n      void Server::checkIncomingData()\n      {\n        while(SDLNet_CheckSockets(clientsSet, 0) &gt; 0)\n        {\n          for(int i=0;i&lt;clients.size();i++)\n          {\n            if(SDLNet_SocketReady(clients[i].getSocket()))\n            {\n              if(readData(clients[i].getSocket()))\n              {\n                clients[i].timer.reset();\n              }\n              else\n              {\n                removeClient(i);\n              }\n            }\n          }\n        }\n      }\n\n      void Server::checkTimeouts(float timePassed)\n      {\n        for(int i=0;i&lt;clients.size();i++)\n        {\n          clients[i].timer.update(timePassed);\n          if(clients[i].timer.getTime() &gt; 5.0)\n          {\n            removeClient(i);\n          }\n        }\n      }\n\n      void Server::update(float timePassed)\n      {\n        checkNewConnection();\n        checkIncomingData();\n        checkTimeouts(timePassed);\n      }\n\n      bool Server::readData(const TCPsocket&amp; clientSocket)\n      {\n        char data[1400];\n        int size = SDLNet_TCP_Recv(clientSocket, data, 1400);\n        if(size &lt;= 0)\n        {\n          std::cout &lt;&lt; \"RECEIVING DATA FAILED: \" &lt;&lt; size &lt;&lt; std::endl;\n          return false;\n        }\n        std::cout &lt;&lt; data &lt;&lt; std::endl;\n\n        while(data[strlen(data) - 1] != '\\n')\n        {\n          size = SDLNet_TCP_Recv(clientSocket, data, 1400);\n          if(size &lt;= 0)\n          {\n            std::cout &lt;&lt; \"RECEIVING DATA FAILED: \" &lt;&lt; size &lt;&lt; std::endl;\n            return false;\n          }\n          std::cout &lt;&lt; data &lt;&lt; std::endl;\n        }\n        return true;\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>what i get in the server terminal when i create the Client object and delete right after(the array in code is bigger i just chose the interesting part of the output):</p>\n\n<pre><code> 0.1519227 -0.002553641 -0.3744464 0.1526676 0 -0.06999236 0.1529192 0.002553701 -0.06999236 0.1526677 0.005009293 -0.06999236 0.1519228 0.007272362 -0.06999236 0.1507131 0.009255945 -0.06999236 0.149085\n2 0.01088386 -0.06999236 0.1471016 0.01209348 -0.06999236 0.1448385 0.01283836 -0.06999236 0.142383 0.01308989 -0.06999236 0.1398292 0.01283836 -0.06999236 0.1372755 0.01209348 -0.06999236 0.13482 0.01088386 -0.06999236 0.1325569 0.009255945 -0.06999236 0.1305733 0.007272362 -0.06999236 0.1289454 0.005009293 -0.06999236 0.1277357 0.002553701 -0.06999236 0.1269909 0 -0.06999236 0.1267393 -0.002553701 -0.06999236 0.1269909 -0.005009293 -0.06999236 0.1277357 -0.007272362 -0.06999236 0.1289454 -0.009255945 -0.06999236 0.1305733 -0.01088386 -0.06999236 0.1325569 -0.01209348 -0.06999236 0.13482 -0.01283836 -0.06999236 0.1372755 -0.01308989 -0.06999236 0.1398293 -0.01283836 -0.06999236 0.142383 -0.01209348 -0.06999236 0.1448386 -0.01088386 -0.06999236 0.1471017\n.1269907 -0.005009293 -0.3744465 0.1277357 -0.007272362 -0.3744464 0.1289453 -0.009255945 -0.3744465 0.1305732 -0.01088386 -0.3744464 0.1325568 -0.01209348 -0.3744465 0.1348199 -0.01283836 -0.3744465 0.1372755 -0.01308989 -0.3744465 0.1398292 -0.01283836 -0.3744464 0.1423829 -0.01209348 -0.3744464 0.1448385 -0.01088386 -0.3744465 0.1471015 -0.009255945 -0.3744464 0.1490852 -0.007272303 -0.3744464 0.150713 -0.005009233 -0.3744464 0.1519227 -0.002553641 -0.3744464 0.1526676 0 -0.06999236 0.1529192 0.002553701 -0.06999236 0.1526677 0.005009293 -0.06999236 0.1519228 0.007272362 -0.06999236 0.1507131 0.009255945 -0.06999236 0.149085\nClient disconecting! &lt;- this message is received in the number array!\n236 0.1471016 0.01209348 -0.06999236 0.1448385 0.01283836 -0.06999236 0.142383 0.01308989 -0.06999236 0.1398292 0.01283836 -0.06999236 0.1372755 0.01209348 -0.06999236 0.13482 0.01088386 -0.06999236 0.1325569 0.009255945 -0.06999236 0.1305733 0.007272362 -0.06999236 0.1289454 0.005009293 -0.06999236 0.1277357 0.002553701 -0.06999236 0.1269909 0 -0.06999236 0.1267393 -0.002553701 -0.06999236 0.1269909 -0.005009293 -0.06999236 0.1277357 -0.007272362 -0.06999236 0.1289454 -0.009255945 -0.06999236 0.1305733 -0.01088386 -0.06999236 0.1325569 -0.01209348 -0.06999236 0.13482 -0.01283836 -0.06999236 0.1372755 -0.01308989 -0.06999236 0.1398293 -0.01283836 -0.06999236 0.142383 -0.01209348 -0.06999236 0.1448386 -0.01088386 -0.06999236 0.1471017\n.1269907 -0.005009293 -0.3744465 0.1277357 -0.007272362 -0.3744464 0.1289453 -0.009255945 -0.3744465 0.1305732 -0.01088386 -0.3744464 0.1325568 -0.01209348 -0.3744465 0.1348199 -0.01283836 -0.3744465 0.1372755 -0.01308989 -0.3744465 0.1398292 -0.01283836 -0.3744464 0.1423829 -0.01209348 -0.3744464 0.1448385 -0.01088386 -0.3744465 0.1471015 -0.009255945 -0.3744464 0.1490852 -0.007272303 -0.3744464 0.150713 -0.005009233 -0.3744464 0.1519227 -0.002553641 -0.3744464 0.1526676 0 -0.06999236 0.1529192 0.002553701 -0.06999236 0.1526677 0.005009293 -0.06999236 0.1519228 0.007272362 -0.06999236 0.1507131 0.009255945 -0.06999236 0.149085\n</code></pre>\n"}, {"tags": ["c++", "user-interface", "msdn"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1574893661, "post_id": 59079242, "comment_id": 104395633, "body": "MS Windows has drawing messages for all the components of a window.  If you don&#39;t handle them you get the default look.  If you want to handle them you can change the look of your window.  eg <code>WM_NCPAINT</code>  <a href=\"https://docs.microsoft.com/en-us/windows/win32/gdi/wm-ncpaint\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows/win32/gdi/wm-ncpaint</a>   Also read <a href=\"https://docs.microsoft.com/en-us/windows/win32/controls/user-controls-intro\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows/win32/controls/&hellip;</a> for controls"}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 2, "creation_date": 1574893731, "post_id": 59079242, "comment_id": 104395658, "body": "It&#39;s absolutely easy to create a custom window without borders or other usual decoration.  If you&#39;re using something like DirectX you may even be forced to do it that way."}, {"owner": {"reputation": 121, "user_id": 5253162, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-71m8yPrn5PU/AAAAAAAAAAI/AAAAAAAAAB4/2Yvy5HS9A-M/photo.jpg?sz=128", "display_name": "Tirous", "link": "https://stackoverflow.com/users/5253162/tirous"}, "edited": false, "score": 0, "creation_date": 1574893733, "post_id": 59079242, "comment_id": 104395660, "body": "OHHHHHH.... so it&#39;s a skin?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1574894039, "post_id": 59079242, "comment_id": 104395754, "body": "Or just host an HTML control in a window (frame or frame-less) and use HTML and CSS"}], "owner": {"reputation": 121, "user_id": 5253162, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-71m8yPrn5PU/AAAAAAAAAAI/AAAAAAAAAB4/2Yvy5HS9A-M/photo.jpg?sz=128", "display_name": "Tirous", "link": "https://stackoverflow.com/users/5253162/tirous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1574893388, "creation_date": 1574893388, "question_id": 59079242, "link": "https://stackoverflow.com/questions/59079242/how-do-things-like-steam-and-the-blizzard-launcher-create-a-gui-without-using-th", "title": "How do things like Steam and the Blizzard Launcher create a GUI without using the default OS window?", "body": "<p>When you open up Steam or something like the Blizzard Launcher, you'll notice quickly that they don't use the default Operating System window style. Their window frame, buttons, etc. are all custom and fancy.</p>\n\n<p>I understand more or less how to create a window in C++ using the tools given by Microsoft (for Windows) or equivalent for other OSes, but I've not a clue how these fancy custom windows are created.</p>\n\n<p>My brain is telling me that it must be some fancy trick using borderless windows, but that feels to much like a hack to me, something a big fancy tech company wouldn't have to cheat to pull off.</p>\n\n<p>Thus I ask, assuming we're on Windows (just cuz bring in other OSes will complicate things), what exactly are these companies doing to achieve this fancy custom window affect? Is it some super low level thing a casual C++ hobbyist like me will never be able to do, or is it some fancy part of the windows tool set I can just look up on MSDN?</p>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 3, "creation_date": 1574895820, "post_id": 59079196, "comment_id": 104396214, "body": "Don&#39;t use identifiers that start with underscore followed by an uppercase letter. These are reserved for the implementation in all contexts (in particular, they could be <code>#define</code>-d)."}], "answers": [{"comments": [{"owner": {"reputation": 5287, "user_id": 1813169, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/wTAkF.jpg?s=128&g=1", "display_name": "MTCoster", "link": "https://stackoverflow.com/users/1813169/mtcoster"}, "edited": false, "score": 0, "creation_date": 1575132423, "post_id": 59079353, "comment_id": 104466369, "body": "I think this might be the cleanest solution using only the STL. Still kicking myself for missing that last <code>::type</code>, but then I never thought of using <code>decltype</code> for this. I\u2019m going to have to go away and experiment some more with <code>decltype</code>!"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 5287, "user_id": 1813169, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/wTAkF.jpg?s=128&g=1", "display_name": "MTCoster", "link": "https://stackoverflow.com/users/1813169/mtcoster"}, "edited": false, "score": 0, "creation_date": 1575139277, "post_id": 59079353, "comment_id": 104468062, "body": "@MTCoster - yes, <code>decltype()</code> is very useful in this sort of problems."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 3, "last_activity_date": 1574895908, "last_edit_date": 1574895908, "creation_date": 1574894141, "answer_id": 59079353, "question_id": 59079196, "link": "https://stackoverflow.com/questions/59079196/triangularizing-a-tuple/59079353#59079353", "title": "Triangularizing a tuple", "body": "<p>Maybe someone can make it in a simpler way... but what about as follows?</p>\n\n<pre><code>template &lt;typename T, std::size_t ... Is&gt;\nauto gtt_helper (std::index_sequence&lt;Is...&gt;)\n -&gt; std::tuple&lt;std::tuple_element_t&lt;Is, T&gt;...&gt;;\n\ntemplate &lt;typename ... Ts, std::size_t ... Is&gt;\nauto getTriTuple (std::index_sequence&lt;Is...&gt;)\n -&gt; std::tuple&lt;decltype(gtt_helper&lt;std::tuple&lt;Ts...&gt;&gt;\n                        (std::make_index_sequence&lt;Is&gt;{}))...&gt;;\n\ntemplate &lt;typename ... Ts&gt;\nusing triTuple\n  = decltype(getTriTuple&lt;Ts...&gt;(std::index_sequence_for&lt;Ts...&gt;{}));\n</code></pre>\n\n<p>The following is a full compiling C++14 example</p>\n\n<pre><code>#include &lt;type_traits&gt;\n#include &lt;utility&gt;\n#include &lt;tuple&gt;\n\ntemplate &lt;typename T, std::size_t ... Is&gt;\nauto gtt_helper (std::index_sequence&lt;Is...&gt;)\n -&gt; std::tuple&lt;std::tuple_element_t&lt;Is, T&gt;...&gt;;\n\ntemplate &lt;typename ... Ts, std::size_t ... Is&gt;\nauto getTriTuple (std::index_sequence&lt;Is...&gt;)\n -&gt; std::tuple&lt;decltype(gtt_helper&lt;std::tuple&lt;Ts...&gt;&gt;\n                        (std::make_index_sequence&lt;Is&gt;{}))...&gt;;\n\ntemplate &lt;typename ... Ts&gt;\nusing triTuple\n  = decltype(getTriTuple&lt;Ts...&gt;(std::index_sequence_for&lt;Ts...&gt;{}));\n\nint main () \n {\n   using T0 = triTuple&lt;char, int, long, long long&gt;;\n   using T1 = std::tuple&lt;std::tuple&lt;&gt;,\n                         std::tuple&lt;char&gt;,\n                         std::tuple&lt;char, int&gt;,\n                         std::tuple&lt;char, int, long&gt;&gt;;\n\n   static_assert( std::is_same&lt;T0, T1&gt;::value, \"!\" );\n }\n</code></pre>\n\n<p>To respond to your question (\"What have I missed here?\"), you have missed a <code>typename</code> and a <code>::type</code> in <code>triangularize</code></p>\n\n<p>It seems to me that the right version should be</p>\n\n<pre><code>template &lt;class... _Pack&gt;\nstruct triangularize {\n// ..........VVVVVVVV  add typename\nusing type = typename _triangularize_impl&lt;std::tuple&lt;_Pack...&gt;,\n                                          std::index_sequence_for&lt;_Pack...&gt;&gt;::type ;\n// and add ::type ..........................................................^^^^^^\n};\n</code></pre>\n\n<p>Unfortunately, your (corrected) code seems to works with clang++ but not with g++; I suspect a g++ bug but I'm not sure.</p>\n"}, {"comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1574895662, "post_id": 59079499, "comment_id": 104396178, "body": "The OP wants the last template argument to be unused. e.g. <code>triangularize_t&lt;int, char&gt;</code> is <code>tuple&lt;tuple&lt;&gt;, tuple&lt;int&gt;&gt;</code>."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1574895788, "post_id": 59079499, "comment_id": 104396204, "body": "@aschepler That&#39;s kinda weird, to pass in an argument that&#39;s never used. Why not just make <code>triangularize_t&lt;int&gt;</code> do that? But anyway, that&#39;s an easy fix - we can  <code>mp_pop_back</code> the initial list (or the result)."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1575049142, "post_id": 59079499, "comment_id": 104449567, "body": "@aschepler Added a <a href=\"https://stackoverflow.com/a/59109096/2069064\">new answer</a> that does that - this time actually as a one liner :-)"}, {"owner": {"reputation": 5201, "user_id": 11638718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/359a4a973e6a1f850f94f71bf09a47f6?s=128&d=identicon&r=PG&f=1", "display_name": "\u5eb7\u6853\u744b", "link": "https://stackoverflow.com/users/11638718/%e5%ba%b7%e6%a1%93%e7%91%8b"}, "edited": false, "score": 0, "creation_date": 1575050590, "post_id": 59079499, "comment_id": 104450031, "body": "@Barry wow, nice... but according to <a href=\"https://godbolt.org/z/vYjKHm\" rel=\"nofollow noreferrer\">origin solution</a>, could you tell me which compiler I should believe?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 5201, "user_id": 11638718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/359a4a973e6a1f850f94f71bf09a47f6?s=128&d=identicon&r=PG&f=1", "display_name": "\u5eb7\u6853\u744b", "link": "https://stackoverflow.com/users/11638718/%e5%ba%b7%e6%a1%93%e7%91%8b"}, "edited": false, "score": 2, "creation_date": 1575127513, "post_id": 59079499, "comment_id": 104465010, "body": "@\u5eb7\u6853\u744b clang is correct. There is a pack there to expand, gcc just doesn&#39;t see it."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 3, "last_activity_date": 1574895597, "last_edit_date": 1574895597, "creation_date": 1574895237, "answer_id": 59079499, "question_id": 59079196, "link": "https://stackoverflow.com/questions/59079196/triangularizing-a-tuple/59079499#59079499", "title": "Triangularizing a tuple", "body": "<p>With <a href=\"https://www.boost.org/doc/libs/develop/libs/mp11/doc/html/mp11.html\" rel=\"nofollow noreferrer\">Boost.Mp11</a> this is... unfortunately not a one-liner. It takes a couple lines instead.</p>\n\n<p>We define one function to perform a single action: given a list of everything and the next element, append that one (that is, this takes us from the <code>N</code>th solution to the <code>N+1</code>st solution):</p>\n\n<pre><code>template &lt;typename L, typename T&gt;\nusing add_one = mp_push_back&lt;L, mp_push_back&lt;mp_back&lt;L&gt;, T&gt;&gt;;\n</code></pre>\n\n<p>And now fold over that - which just applies that binary function for each argument in turn:</p>\n\n<pre><code>template &lt;typename... Ts&gt;\nusing triangularize_t = mp_fold&lt;mp_list&lt;Ts...&gt;, tuple&lt;tuple&lt;&gt;&gt;, add_one&gt;;\n</code></pre>\n\n<p>And check that it's <a href=\"https://godbolt.org/z/3EYmZF\" rel=\"nofollow noreferrer\">correct</a>:</p>\n\n<pre><code>static_assert(std::is_same_v&lt;triangularize_t&lt;&gt;,\n    tuple&lt;tuple&lt;&gt;&gt;&gt;);\nstatic_assert(std::is_same_v&lt;triangularize_t&lt;int&gt;,\n    tuple&lt;tuple&lt;&gt;, tuple&lt;int&gt;&gt;&gt;);\nstatic_assert(std::is_same_v&lt;triangularize_t&lt;int, char&gt;,\n    tuple&lt;tuple&lt;&gt;, tuple&lt;int&gt;, tuple&lt;int, char&gt;&gt;&gt;);\n</code></pre>\n\n<hr />\n\n<p>We can generalize this to work on <em>any</em> class template instead of <em>solely</em> tuple by changing <code>triangularize</code> to use an input list and deduce its initial value from the input argument:</p>\n\n<pre><code>template &lt;typename L&gt;\nusing triangularize_t = mp_fold&lt;L, mp_push_back&lt;mp_clear&lt;L&gt;, mp_clear&lt;L&gt;&gt;, add_one&gt;;\n</code></pre>\n\n<p>Which also <a href=\"https://godbolt.org/z/aEkS6j\" rel=\"nofollow noreferrer\">allows</a>:</p>\n\n<pre><code>static_assert(std::is_same_v&lt;triangularize_t&lt;mp_list&lt;int, char&gt;&gt;,\n    mp_list&lt;mp_list&lt;&gt;, mp_list&lt;int&gt;, mp_list&lt;int, char&gt;&gt;&gt;);\n</code></pre>\n\n<p>Or whatever other lists you might want to use (notably not <code>variant</code>, since <code>variant&lt;&gt;</code> is ill-formed).</p>\n"}, {"tags": [], "owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "is_accepted": false, "score": 1, "last_activity_date": 1574896288, "last_edit_date": 1574896288, "creation_date": 1574895770, "answer_id": 59079581, "question_id": 59079196, "link": "https://stackoverflow.com/questions/59079196/triangularizing-a-tuple/59079581#59079581", "title": "Triangularizing a tuple", "body": "<p>We can avoid having to use any <code>index_sequence</code>s by utilizing partial specialization with multiple parameter packs.</p>\n\n<pre><code>#include &lt;tuple&gt;\n\ntemplate &lt;typename Tuple, typename LastTuple, typename First, typename... Rest&gt;\nstruct triangulate;\n\ntemplate &lt;typename Tuple, typename LastTuple, typename Last&gt;\nstruct triangulate&lt;Tuple, LastTuple, Last&gt; {\n    using type = Tuple;\n};\n\ntemplate &lt;typename First, typename Second, typename... TupleTypes, typename... LastTupleTypes, typename... Rest&gt;\nstruct triangulate&lt;std::tuple&lt;TupleTypes...&gt;, std::tuple&lt;LastTupleTypes...&gt;, First, Second, Rest...&gt; {\n    using next = std::tuple&lt;LastTupleTypes..., First&gt;;\n    using type = typename triangulate&lt;std::tuple&lt;TupleTypes..., next&gt;, next, Second, Rest...&gt;::type;\n};\n\ntemplate &lt;typename... T&gt;\nusing triangularize_t = typename triangulate&lt;std::tuple&lt;std::tuple&lt;&gt;&gt;, std::tuple&lt;&gt;, T...&gt;::type;\n</code></pre>\n\n<p>Passing the end product as the first parameter (<code>std::tuple&lt;std::tuples...&gt;&gt;</code>), and the second parameter is the last <code>std::tuple&lt;...&gt;</code> we used.</p>\n\n<p>We then recursively add the next parameter to the last tuple, and add that tuple to the end of the end-result.</p>\n"}, {"comments": [{"owner": {"reputation": 5287, "user_id": 1813169, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/wTAkF.jpg?s=128&g=1", "display_name": "MTCoster", "link": "https://stackoverflow.com/users/1813169/mtcoster"}, "edited": false, "score": 0, "creation_date": 1575132515, "post_id": 59109096, "comment_id": 104466390, "body": "Wow, this is impressive! I\u2019ve accepted max66\u2019s answer because I didn\u2019t want to add a dependency on this project, but given how powerful Boost.Mp11 is looking I\u2019ll definitely check it out for future use."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 5287, "user_id": 1813169, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/wTAkF.jpg?s=128&g=1", "display_name": "MTCoster", "link": "https://stackoverflow.com/users/1813169/mtcoster"}, "edited": false, "score": 0, "creation_date": 1575174328, "post_id": 59109096, "comment_id": 104474448, "body": "@MTCoster Mp11 is awesome, I think it&#39;s the best metaprogramming library. If you&#39;re at all skeptical, I have a lot of other answers on here that solve all sorts of problems with a &quot;With Mp11, this is a one-liner&quot; answer. Can&#39;t speak of it highly enough. (And if you&#39;re concerned about Boost as a whole for whatever reason, you can get Mp11 standalone.)"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 2, "last_activity_date": 1575127485, "last_edit_date": 1575127485, "creation_date": 1575049108, "answer_id": 59109096, "question_id": 59079196, "link": "https://stackoverflow.com/questions/59079196/triangularizing-a-tuple/59109096#59109096", "title": "Triangularizing a tuple", "body": "<p>With <a href=\"https://www.boost.org/doc/libs/develop/libs/mp11/doc/html/mp11.html\" rel=\"nofollow noreferrer\">Boost.Mp11</a> this is a one-liner. I just didn't try hard enough last time. Also this solution matches OP's exact specification:</p>\n\n<pre><code>template &lt;typename... Ts&gt;\nusing triangularize_t =\n    mp_transform_q&lt;\n        mp_bind_front&lt;mp_take, std::tuple&lt;Ts...&gt;&gt;,\n        mp_rename&lt;mp_iota_c&lt;sizeof...(Ts)&gt;, std::tuple&gt;\n        &gt;;\n</code></pre>\n\n<p>Lemme explain what this does, assuming <code>Ts...</code> is <code>&lt;int, char&gt;</code>.</p>\n\n<ul>\n<li><code>mp_iota_c&lt;sizeof...(Ts)&gt;</code> gives the sequence <code>mp_list&lt;mp_int&lt;0&gt;, mp_int&lt;1&gt;&gt;</code>.</li>\n<li><code>mp_rename</code> swaps out one \"list\" type for another, in this case <code>mp_list</code> for <code>std::tuple</code> so you get <code>std::tuple&lt;mp_int&lt;0&gt;, mp_int&lt;1&gt;&gt;</code>.</li>\n<li><code>mp_bind_front&lt;mp_take, std::tuple&lt;Ts...&gt;&gt;</code> creates a metafunction on the fly that will take an argument and apply it to <code>mp_take</code> on the full <code>tuple&lt;Ts...&gt;</code>. <code>mp_take</code> takes the first <code>N</code> things from the given list. If we passed in <code>mp_int&lt;1&gt;</code> to this, on our initial <code>tuple&lt;int, char&gt;</code>, we'd get <code>tuple&lt;int&gt;</code>.</li>\n<li><code>mp_transform_q</code> calls the provided metafunction on each element in the list. We take our <code>tuple&lt;mp_int&lt;0&gt;, mp_int&lt;1&gt;&gt;</code> and expand it out into <code>tuple&lt;mp_take&lt;tuple&lt;int, char&gt;, mp_int&lt;0&gt;&gt;, mp_take&lt;tuple&lt;int, char&gt;, mp_int&lt;1&gt;&gt;&gt;</code> which is <code>tuple&lt;tuple&lt;&gt;, tuple&lt;int&gt;&gt;</code>. As desired.</li>\n</ul>\n\n<hr />\n\n<p>To change this into my other answer (which triangularizes <code>&lt;int&gt;</code> into <code>tuple&lt;tuple&lt;&gt;, tuple&lt;int&gt;&gt;</code>), we can change <code>sizeof...(Ts)</code> into <code>sizeof...(Ts)+1</code>.</p>\n\n<p>To extend this to support <em>any</em> list type (not just <code>tuple</code>), we can change the metafunction here to take a list instead of a pack and use the provided list type as a solution. In some respects, this makes the solution easier:</p>\n\n<pre><code>template &lt;typename L&gt;\nusing triangularize_t =\n    mp_transform_q&lt;\n        mp_bind_front&lt;mp_take, L&gt;,\n        mp_append&lt;mp_clear&lt;L&gt;, mp_iota&lt;mp_size&lt;L&gt;&gt;&gt;\n        &gt;;\n\ntemplate &lt;typename... Ts&gt;\nusing triangularize_t = triangularize_list&lt;std::tuple&lt;Ts...&gt;&gt;;\n</code></pre>\n\n<p>The awkward part here is the <code>mp_append&lt;mp_clear&lt;L&gt;, mp_iota&lt;mp_size&lt;L&gt;&gt;&gt;</code>. Basically, we need the sequence list to have the same list type as the original list. Before, we could use <code>mp_rename</code> because we know we needed a tuple. But now, we don't have the list as a class template - just have an instance of it. There might be a better way to do this than <code>mp_append&lt;mp_clear&lt;L&gt;, U&gt;</code>... but this is what I have so far. </p>\n"}], "owner": {"reputation": 5287, "user_id": 1813169, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/wTAkF.jpg?s=128&g=1", "display_name": "MTCoster", "link": "https://stackoverflow.com/users/1813169/mtcoster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 59079353, "answer_count": 4, "score": 6, "last_activity_date": 1575127485, "creation_date": 1574893099, "last_edit_date": 1574894049, "question_id": 59079196, "link": "https://stackoverflow.com/questions/59079196/triangularizing-a-tuple", "title": "Triangularizing a tuple", "body": "<p>I\u2019ve been trying to upgrade (and slightly adapt) <a href=\"https://stackoverflow.com/questions/9132487/transform-tuple-to-triangular-tuple\">this solution from 2012</a> using modern features of C++.</p>\n\n<p>My goal is actually slightly simpler than in that question; I\u2019d like this:</p>\n\n<pre><code>triangularize_t&lt;T0, T1, ..., TN-1, TN&gt;\n</code></pre>\n\n<p>To be equivalent to this:</p>\n\n<pre><code>std::tuple&lt;\n  std::tuple&lt;&gt;,\n  std::tuple&lt;T0&gt;,\n  std::tuple&lt;T0, T1&gt;,\n  ...\n  std::tuple&lt;T0, T1, ..., TN-1&gt;\n&gt;\n\n</code></pre>\n\n<p>Such that <code>std::tuple_element_t&lt;N, result&gt;</code> has <code>N</code> elements. The type <code>TN</code> should not appear anywhere in the output.</p>\n\n<p>Here\u2019s what I\u2019ve worked up to so far:</p>\n\n<pre><code>template &lt;class _Tuple, class _Seq&gt;\nstruct _tuple_head;\ntemplate &lt;class _Tuple, size_t... _N&gt;\nstruct _tuple_head&lt;_Tuple, std::index_sequence&lt;_N...&gt;&gt; {\n    using type = std::tuple&lt;std::tuple_element_t&lt;_N, _Tuple&gt;...&gt;;\n};\n\n\ntemplate &lt;class _Tuple, class _Seq&gt;\nstruct _triangularize_impl;\ntemplate &lt;class _Tuple, size_t... _N&gt;\nstruct _triangularize_impl&lt;_Tuple, std::index_sequence&lt;_N...&gt;&gt; {\n    using type = std::tuple&lt;typename _tuple_head&lt;_Tuple, std::make_index_sequence&lt;_N&gt;&gt;::type...&gt;;\n};\n\n\ntemplate &lt;class... _Pack&gt;\nstruct triangularize {\n    using type = _triangularize_impl&lt;std::tuple&lt;_Pack...&gt;, std::index_sequence_for&lt;_Pack...&gt;&gt;;\n};\n\n\ntemplate &lt;class... _Pack&gt;\nusing triangularize_t = typename triangularize&lt;_Pack...&gt;::type;\n</code></pre>\n\n<p>However, it doesn\u2019t quite seem to be expanding the way I\u2019d expect it to.  Using <code>triangularize_t&lt;int, float&gt;</code> as a test, error messages seem to report that the output for <code>std::get&lt;0&gt;</code> and <code>1</code> return these types (identical for some reason).</p>\n\n<pre><code>_triangularize_impl&lt;tuple&lt;std::__1::tuple&lt;int, float&gt; &gt;, __make_integer_seq&lt;integer_sequence, unsigned long, 1UL&gt; &gt;\n\n_triangularize_impl&lt;tuple&lt;std::__1::tuple&lt;int, float&gt; &gt;, __make_integer_seq&lt;integer_sequence, unsigned long, 1UL&gt; &gt;\n</code></pre>\n\n<p>What have I missed here?</p>\n"}, {"tags": ["c++", "tic-tac-toe"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1574892650, "post_id": 59079084, "comment_id": 104395305, "body": "It would be helpful if you added a) the exact compiler error messages b) your attempt at making squares global. However, it&#39;s probably easier to make it a variable in main and pass it to the other two functions"}, {"owner": {"reputation": 446, "user_id": 10224443, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xUCwH.jpg?s=128&g=1", "display_name": "urbanSoft", "link": "https://stackoverflow.com/users/10224443/urbansoft"}, "edited": false, "score": 0, "creation_date": 1574892787, "post_id": 59079084, "comment_id": 104395344, "body": "You&#39;re using <code>square</code> within <code>Game()</code> although it&#39;s a local variable in <code>Spielerfeld()</code>."}, {"owner": {"reputation": 11, "user_id": 12448436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14f6b8c1ac0d536b89f4c79d4c986f19?s=128&d=identicon&r=PG&f=1", "display_name": "Zodiac", "link": "https://stackoverflow.com/users/12448436/zodiac"}, "edited": false, "score": 0, "creation_date": 1574893111, "post_id": 59079084, "comment_id": 104395445, "body": "Sry i forgot that. that are the errors                                                                                                     tictactoe.cpp:31:5: error: \u2018sqaure\u2019 was not declared in this scope      sqaure[6] == mark;                                                                                                                tictactoe.cpp:49:51: error: \u2018sqaure\u2019 was not declared in this scope    cout &lt;&lt; square[1] &lt;&lt; &quot;|&quot; &lt;&lt; square[2] &lt;&lt; &quot;|&quot; &lt;&lt; sqaure[3]"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1574893580, "post_id": 59079084, "comment_id": 104395605, "body": "According to the classics, a properer Tic Tac Toe program <a href=\"https://ideone.com/k4xRds\" rel=\"nofollow noreferrer\">looks something like this</a>."}, {"owner": {"reputation": 11, "user_id": 12448436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14f6b8c1ac0d536b89f4c79d4c986f19?s=128&d=identicon&r=PG&f=1", "display_name": "Zodiac", "link": "https://stackoverflow.com/users/12448436/zodiac"}, "edited": false, "score": 0, "creation_date": 1574893729, "post_id": 59079084, "comment_id": 104395654, "body": "thanks bro that was really helpful my game works."}, {"owner": {"reputation": 997, "user_id": 5903546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/090029ba7b6c1adda964f65d37898526?s=128&d=identicon&r=PG&f=1", "display_name": "lfgtm", "link": "https://stackoverflow.com/users/5903546/lfgtm"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1574893742, "post_id": 59079084, "comment_id": 104395666, "body": "@user4581301 lol, doesn&#39;t beat an evening of good ol &quot;global thermonuclear war&quot; though."}, {"owner": {"reputation": 721, "user_id": 10073327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6095e3ce3253310251450dc1fe85529e?s=128&d=identicon&r=PG&f=1", "display_name": "FailingCoder", "link": "https://stackoverflow.com/users/10073327/failingcoder"}, "edited": false, "score": 0, "creation_date": 1574899527, "post_id": 59079084, "comment_id": 104397080, "body": "@Zodiac Your first comment: We cannot see line numbers. Please add pointers to what and where these lines are."}], "answers": [{"tags": [], "owner": {"reputation": 362, "user_id": 11936229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11da23565b039811f58b2beecf7493b3?s=128&d=identicon&r=PG&f=1", "display_name": "BTables", "link": "https://stackoverflow.com/users/11936229/btables"}, "is_accepted": false, "score": 0, "last_activity_date": 1574893758, "creation_date": 1574893758, "answer_id": 59079303, "question_id": 59079084, "link": "https://stackoverflow.com/questions/59079084/tictactoe-game-variable-not-declared-in-the-scope/59079303#59079303", "title": "tictactoe game variable not declared in the scope", "body": "<p>Simple issue you have. In C++ there's a difference between the <code>==</code> operator and <code>=</code> operator. Simply put, <code>==</code> is used for equality <em>comparison</em> and <code>=</code> used for variable assignment. All of those lines that say <code>square[i] == mark;</code> should instead say <code>square[i] = mark;</code></p>\n"}, {"tags": [], "owner": {"reputation": 124, "user_id": 11322525, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4l3liclV_qg/AAAAAAAAAAI/AAAAAAAAEyA/O1gj0hbVhGw/photo.jpg?sz=128", "display_name": "Alireza Abbasi", "link": "https://stackoverflow.com/users/11322525/alireza-abbasi"}, "is_accepted": false, "score": 2, "last_activity_date": 1574895981, "last_edit_date": 1574895981, "creation_date": 1574894822, "answer_id": 59079437, "question_id": 59079084, "link": "https://stackoverflow.com/questions/59079084/tictactoe-game-variable-not-declared-in-the-scope/59079437#59079437", "title": "tictactoe game variable not declared in the scope", "body": "<p>1) Square is a local variable in Spielerfeld() function and it destroy after end of function so you can not use it.</p>\n\n<p>2) you defined \"Square\" as a built in array and the built in array elements start with zero index. So when you want to access to first element you should use Square[0].</p>\n\n<p>I defined Square as a global variable and modify your code.\nNow try it. </p>\n\n<pre><code>\n#include &lt;iostream&gt;\n\nusing namespace std;\nvoid Game();\nvoid Spielerfeld();\nint square[9] = { 1, 2, 3, 4, 5, 6, 7, 8, 9 };\n\nvoid Game() \n{\n    int player = 0;\n    int choice = 0;\n    char mark = 0;\n\n    Spielerfeld();\n    do {\n\n        cout &lt;&lt; \"Wer ist als erstes in der Reihe\\n\" &lt;&lt; choice;\n        player = 1;\n        cout &lt;&lt; \"Player:\" &lt;&lt; player &lt;&lt; \"Gebe eine nummer ein\";\n        cin &gt;&gt; choice;\n        mark = (player); 'X'; 'O';\n        if (choice == 1 &amp;&amp; square[0] == 1)\n            square[0] = mark;\n        else if (choice == 2 &amp;&amp; square[1] == 2)\n            square[1] = mark;\n        else if (choice == 3 &amp;&amp; square[2] == 2)\n            square[2] = mark;\n        else if (choice == 4 &amp;&amp; square[3] == 4)\n            square[3] = mark;\n        else if (choice == 5 &amp;&amp; square[4] == 5)\n            square[4] = mark;\n        else if (choice == 6 &amp;&amp; square[5] == 6)\n            square[5] = mark;\n        else if (choice == 7 &amp;&amp; square[6] == 7)\n            square[6] = mark;\n        else if (choice == 8 &amp;&amp; square[7] == 8)\n            square[7] = mark;\n        else if (choice == 9 &amp;&amp; square[8] == 9)\n            square[8] = mark;\n    } while (choice == 9);\n}\n\n\nvoid Spielerfeld() {\n\n    int i;\n\n    for (i = 0; i &lt; 9; i++) \n    {\n        cout &lt;&lt; square[i] &lt;&lt; endl;\n    }\n\n    cout &lt;&lt; square[0] &lt;&lt; \"|\" &lt;&lt; square[1] &lt;&lt; \"|\" &lt;&lt; square[2];\n    cout &lt;&lt; \"-----------|--------\";\n    cout &lt;&lt; square[3] &lt;&lt; \"|\" &lt;&lt; square[4] &lt;&lt; \"|\" &lt;&lt; square[5];\n    cout &lt;&lt; \"-----------|--------\";\n    cout &lt;&lt; square[6] &lt;&lt; \"|\" &lt;&lt; square[7] &lt;&lt; \"|\" &lt;&lt; square[8];\n\n}\n\nint main() \n{\n    Spielerfeld();\n    Game();\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12448436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14f6b8c1ac0d536b89f4c79d4c986f19?s=128&d=identicon&r=PG&f=1", "display_name": "Zodiac", "link": "https://stackoverflow.com/users/12448436/zodiac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "closed_date": 1574916940, "answer_count": 2, "score": -1, "last_activity_date": 1574898468, "creation_date": 1574892368, "last_edit_date": 1574898468, "question_id": 59079084, "link": "https://stackoverflow.com/questions/59079084/tictactoe-game-variable-not-declared-in-the-scope", "closed_reason": "Not suitable for this site", "title": "tictactoe game variable not declared in the scope", "body": "<p>Hello I am new to c++ and I wanted to build a tictactoe game, but when I compile the game it gives me always this error that my variable was not declared in the scope. Then I tried to make square as a global variable but that gave me to errors.</p>\n\n<p>Can anybody help me in this?</p>\n\n<pre><code>include &lt;iostream&gt;\n\nusing namespace std;\nvoid Game();\nvoid Spielerfeld();\n\nvoid Game(){\n        int player;\n        int choice;\n        char mark;\n\n        Spielerfeld();\n        do{\n\n            cout &lt;&lt; \"Wer ist als erstes in der Reihe\\n\" &lt;&lt; choice;\n            player = 1;\n            cout &lt;&lt; \"Player:\" &lt;&lt; player &lt;&lt; \"Gebe eine nummer ein\";\n            cin &gt;&gt; choice;\n            mark = (player);'X';'O';\n            if(choice == 1 &amp;&amp; square[1] == '1')\n                square[1] == mark;\n            else if(choice == 2 &amp;&amp; square[2] == '2')\n                square[2] = mark;\n            else if(choice == 3 &amp;&amp; square[3] == \"2\")\n                square[3] = mark;\n            else if(choice == 4 &amp;&amp; square[4] == '4')\n                sqaure[4] = mark;\n            else if(choice == 5 &amp;&amp; square[5] ==  \"5\")\n                sqaure[5] == mark;\n            else if(choice == 6 &amp;&amp; square[6] ==  \"6\")\n                sqaure[6] == mark;\n            else if(choice == 7 &amp;&amp; square[7] ==  \"7\")\n                sqaure[7] == mark;\n            else if(choice == 8 &amp;&amp; square[8] ==  \"8\")\n                sqaure[8] == mark;\n            else if(choice == 9 &amp;&amp; square[9] ==  \"9\")\n                sqaure[9] == mark;\n            }while(choice == 9);\n}\n\n\n void Spielerfeld(){\n    int square[10] = {1, 2, 3, 4, 5, 6, 7, 8, 9};\n    int i;\n    for(i=0; i&lt;10; i++){\n        cout &lt;&lt; square[i] &lt;&lt; endl;\n    }\n\n    cout &lt;&lt; square[1] &lt;&lt; \"|\" &lt;&lt; square[2] &lt;&lt; \"|\" &lt;&lt; sqaure[3];\n    cout &lt;&lt; \"-----------|--------\";\n    cout &lt;&lt; square[4] &lt;&lt; \"|\" &lt;&lt; square[5] &lt;&lt; \"|\" &lt;&lt; sqaure[6];\n    cout &lt;&lt; \"-----------|--------\";\n    cout &lt;&lt; square[7] &lt;&lt; \"|\" &lt;&lt; square[8] &lt;&lt; \"|\" &lt;&lt; sqaure[9];\n }\n\nint main(){\n    Spielerfeld();``\n    Game();\n}\n</code></pre>\n"}, {"tags": ["c++", "windows", "video", "embed"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1574892685, "post_id": 59079062, "comment_id": 104395317, "body": "<a href=\"https://balau82.wordpress.com/2012/02/19/linking-a-binary-blob-with-gcc/\" rel=\"nofollow noreferrer\">balau82.wordpress.com/2012/02/19/linking-a-binary-blob-with-&zwnj;&#8203;gcc</a>"}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1574894299, "post_id": 59079156, "comment_id": 104395833, "body": "That is helpful, but... You&#39;ve produced a link-only answer. You can salvage it by summarizing the contents of the link so that future askers can recreate the information or find a related link when the original link rots."}], "tags": [], "owner": {"reputation": 1, "user_id": 12272319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/170b84c11dcb7a4b0e6614db5757d9ab?s=128&d=identicon&r=PG&f=1", "display_name": "tourist", "link": "https://stackoverflow.com/users/12272319/tourist"}, "is_accepted": false, "score": 0, "last_activity_date": 1574892849, "creation_date": 1574892849, "answer_id": 59079156, "question_id": 59079062, "link": "https://stackoverflow.com/questions/59079062/is-there-anyway-to-compile-memorize-a-webm-mp4-file-into-an-exe-program-c/59079156#59079156", "title": "Is there anyway to compile/memorize a webm/mp4 file into an .exe program? (C++)", "body": "<p>This previous question looks like it would be helpful for your case: <a href=\"https://stackoverflow.com/questions/4864866/c-c-with-gcc-statically-add-resource-files-to-executable-library\">C/C++ with GCC: Statically add resource files to executable/library</a></p>\n"}], "owner": {"reputation": 11, "user_id": 12448163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5a38a3fb73ecd1acd950418c368668f?s=128&d=identicon&r=PG&f=1", "display_name": "Schmleh", "link": "https://stackoverflow.com/users/12448163/schmleh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "closed_date": 1574892450, "answer_count": 1, "score": 0, "last_activity_date": 1574892849, "creation_date": 1574892264, "question_id": 59079062, "link": "https://stackoverflow.com/questions/59079062/is-there-anyway-to-compile-memorize-a-webm-mp4-file-into-an-exe-program-c", "closed_reason": "Duplicate", "title": "Is there anyway to compile/memorize a webm/mp4 file into an .exe program? (C++)", "body": "<p>Might be a stupid question.</p>\n\n<p>I'm making a C++ windows.h application, and I'd like for it to play a short video. It would be nice if I could somehow(?) compile the video into the program \u2014 I plan on sending the exe to others, it'd be nice if I didn't have to send the video with it as a separate file for the exe to load in at runtime.</p>\n\n<p>I'm running Windows 10, writing and compiling with just Emacs and g++.</p>\n"}, {"tags": ["c++", "vector", "stl", "std"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1574892238, "post_id": 59078998, "comment_id": 104395164, "body": "Create a temporary vector, build its contents, then use it to construct <code>v2</code>. Or, define and implement a custom iterator class that iterates over all contents of <code>v1</code> and the new values, and use the <code>std::vector</code> constructor that&#39;s a template which takes a sequence defined by a beginning and an ending iterator."}, {"owner": {"reputation": 45, "user_id": 12381406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/140b304d12937fbb7a2d48c8dd7bad0d?s=128&d=identicon&r=PG&f=1", "display_name": "emm", "link": "https://stackoverflow.com/users/12381406/emm"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1574893134, "post_id": 59078998, "comment_id": 104395454, "body": "I currently have a function that combines <code>v1</code> and the additional values and returns a new vector to construct with, but I am asking if there might be  a more elegant solution for this problem"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1574894279, "post_id": 59078998, "comment_id": 104395825, "body": "Oh, in that case your question would be off-topic for stackoverflow, and should be closed as such. &quot;More elegant&quot; is obviously opinion-based, by definition; and opinion-based questions would be off-topic, unfortunately."}, {"owner": {"reputation": 45, "user_id": 12381406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/140b304d12937fbb7a2d48c8dd7bad0d?s=128&d=identicon&r=PG&f=1", "display_name": "emm", "link": "https://stackoverflow.com/users/12381406/emm"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1574894701, "post_id": 59078998, "comment_id": 104395934, "body": "I disagree, the &quot;more elegant&quot; solution should make use of the tools that the standard library offers in this context and I am not sure how to implement that without creating my own functions or classes"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1574894933, "post_id": 59078998, "comment_id": 104396013, "body": "There&#39;s nothing in the C++ library for this."}, {"owner": {"reputation": 45, "user_id": 12381406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/140b304d12937fbb7a2d48c8dd7bad0d?s=128&d=identicon&r=PG&f=1", "display_name": "emm", "link": "https://stackoverflow.com/users/12381406/emm"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1574895253, "post_id": 59078998, "comment_id": 104396089, "body": "That is my guess too, but I am not too sure about that"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1574898103, "post_id": 59078998, "comment_id": 104396743, "body": "C++20 will have constexpr vectors"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1574898148, "post_id": 59078998, "comment_id": 104396751, "body": "Consider using <code>array</code> instead of <code>vector</code> if that will suit your needs (those already have constexpr compatibility). The main benefit of <code>vector</code> is runtime resizeability but declaring as <code>const</code> discards that ability."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1574898454, "post_id": 59078998, "comment_id": 104396847, "body": "The reason I&#39;m confident that there&#39;s nothing like this in the C++ library is because something like this can only be done in two ways. 1) A dedicated vector constructor, and I&#39;m pretty sure there isn&#39;t one; 2) A fundamental part of C++ language&#39;s grammar and syntax that I&#39;m pretty sure doesn&#39;t exist. There are no other possibilities."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 12381406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/140b304d12937fbb7a2d48c8dd7bad0d?s=128&d=identicon&r=PG&f=1", "display_name": "emm", "link": "https://stackoverflow.com/users/12381406/emm"}, "edited": false, "score": 0, "creation_date": 1574893982, "post_id": 59079227, "comment_id": 104395739, "body": "thank you for your time answering this question, I already have the problem solved exactly the way you described it, but my question is, whether there might be a more elegant solution to this problem like <code>const std::vector&lt;int&gt; v2{v1, 5, 6, 7, 8, 9};</code>"}, {"owner": {"reputation": 19910, "user_id": 8012646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T8yOZ.png?s=128&g=1", "display_name": "\u30ed\u30fc\u30a6", "link": "https://stackoverflow.com/users/8012646/%e3%83%ad%e3%83%bc%e3%82%a6"}, "reply_to_user": {"reputation": 45, "user_id": 12381406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/140b304d12937fbb7a2d48c8dd7bad0d?s=128&d=identicon&r=PG&f=1", "display_name": "emm", "link": "https://stackoverflow.com/users/12381406/emm"}, "edited": false, "score": 0, "creation_date": 1574894089, "post_id": 59079227, "comment_id": 104395776, "body": "@emm The other approach I can think of is to create your own type that takes a vector and an <code>initializer_list</code> at construction and provides the <code>begin()</code> and <code>end()</code> member functions."}], "tags": [], "owner": {"reputation": 19910, "user_id": 8012646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T8yOZ.png?s=128&g=1", "display_name": "\u30ed\u30fc\u30a6", "link": "https://stackoverflow.com/users/8012646/%e3%83%ad%e3%83%bc%e3%82%a6"}, "is_accepted": false, "score": 0, "last_activity_date": 1575052907, "last_edit_date": 1575052907, "creation_date": 1574893265, "answer_id": 59079227, "question_id": 59078998, "link": "https://stackoverflow.com/questions/59078998/create-a-const-stdvector-with-another-const-stdvector-and-additional-values/59079227#59079227", "title": "Create a const std::vector with another const std::vector and additional values", "body": "<p>Consider the following convenience function template, <code>make_vector()</code>:</p>\n\n<pre><code>template&lt;typename T&gt;\nstd::vector&lt;T&gt; make_vector(const std::vector&lt;T&gt;&amp; v, std::initializer_list&lt;T&gt; l) {\n   std::vector&lt;T&gt; u(v);\n   u.insert(u.end(), l.begin(), l.end());\n   return u;\n}\n</code></pre>\n\n<p>It creates a temporary vector <code>u</code>, which contains the elements of the vector passed to the function and the elements of the <code>initializer_list</code>.</p>\n\n<p>Note that it usually makes little sense for the convenience function to return a <code>const</code> object by value (for example, the returned object can't be moved). Therefore, the convenience function above returns a non-<code>const</code> vector instead, i.e., <code>std::vector&lt;T&gt;</code>. You can, however, initialize a <code>const</code> vector with this returned non-<code>const</code> vector, and it will be move initialized.</p>\n\n<pre><code>auto main() -&gt; int {\n   const std::vector&lt;int&gt; u{1, 2, 3};\n   auto const v = make_vector(u, {4, 5, 6});\n\n   for (auto elem: v)\n      std::cout &lt;&lt; elem &lt;&lt; ' ';\n   std::cout &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>The output:</p>\n\n<pre><code>1 2 3 4 5 6 \n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 12381406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/140b304d12937fbb7a2d48c8dd7bad0d?s=128&d=identicon&r=PG&f=1", "display_name": "emm", "link": "https://stackoverflow.com/users/12381406/emm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1575052907, "creation_date": 1574891899, "question_id": 59078998, "link": "https://stackoverflow.com/questions/59078998/create-a-const-stdvector-with-another-const-stdvector-and-additional-values", "title": "Create a const std::vector with another const std::vector and additional values", "body": "<p>Consider a const vector <code>v1</code></p>\n\n<pre><code>const std::vector&lt;int&gt; v1{0, 1, 2, 3, 4};\n</code></pre>\n\n<p>I want to create a new const vector <code>v2</code> with the contents of vector <code>v1</code> with additional values like so:</p>\n\n<pre><code>const std::vector&lt;int&gt; v1{0, 1, 2, 3, 4};\nconst std::vector&lt;int&gt; v2{v1, 5, 6, 7, 8, 9};\n</code></pre>\n\n<p>How could I do this?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "edited": false, "score": 3, "creation_date": 1574892116, "post_id": 59078988, "comment_id": 104395139, "body": "What is the question ?"}, {"owner": {"reputation": 428, "user_id": 12246397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LkYoR.jpg?s=128&g=1", "display_name": "MerMonkey", "link": "https://stackoverflow.com/users/12246397/mermonkey"}, "edited": false, "score": 0, "creation_date": 1574892306, "post_id": 59078988, "comment_id": 104395190, "body": "You want to change this loop to function or what? <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1574893958, "post_id": 59078988, "comment_id": 104395731, "body": "Sorta related: I find <code>std::map</code> handy here. If you map a <code>string</code> to a function that performs the correct behaviour for that string, you can <code>getline(cin, input); menumap[input]();</code> some extra wrapping for validation is highly recommended."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1574907959, "post_id": 59078988, "comment_id": 104398587, "body": "<code>while (input != &quot;n&quot;, &quot;s&quot;, &quot;e&quot;, &quot;w&quot;)</code> doesn&#39;t do what you think it does. You should be using <code>while (getline(cin, input))</code> instead."}], "answers": [{"tags": [], "owner": {"reputation": 800, "user_id": 12078969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466261c5018ba62c55f65c1746441dc2?s=128&d=identicon&r=PG&f=1", "display_name": "Ivanovic", "link": "https://stackoverflow.com/users/12078969/ivanovic"}, "is_accepted": true, "score": 1, "last_activity_date": 1574902723, "creation_date": 1574902723, "answer_id": 59080393, "question_id": 59078988, "link": "https://stackoverflow.com/questions/59078988/how-to-have-all-options-in-one-function/59080393#59080393", "title": "How to have all options in one function?", "body": "<p>You see different approaches of using functions in here,\nthats how I would solve this.\nYou can focus on adding new questions in the main() part and doesn't have to write\nall the if-requests over and over. </p>\n\n\n\n<pre class=\"lang-c++ prettyprint-override\"><code>    #include &lt;iostream&gt;\n    #include &lt;string&gt;\n\n    using namespace std;\n\n    void help();\n    void stats();\n\n    string check(string input,string n,string s, string w, string e)\n    {\n    string result;\n    if (input == \"n\"){\n        result = n;}\n\n    else if (input == \"s\"){\n        result = s;}\n\n    else if (input == \"w\"){\n        result = w;}\n\n    else if (input == \"e\"){\n        result = e;}\n\n    else if (input == \"help\"){\n        cout &lt;&lt; \"help\" &lt;&lt; endl;} //help()\n\n    else if (input == \"stats\"){\n        cout &lt;&lt; \"stats\" &lt;&lt; endl;} // stats()\n\n    else if (input == \"exit\"){\n        result = \"exit\";}\n\n    else\n        cout &lt;&lt; \"Sorry I am not Siri I don't understand. Try again\" &lt;&lt; endl;\n\n\n    return result;\n    }\n\n    string call()\n    {\n        string input;\n        cout &lt;&lt; \"Where do you want to go? n s w e\" &lt;&lt; endl;\n        getline(cin, input);\n        return input;\n    }\n\n    int main()\n    {\n        bool slope = false;\n        string input, result;\n\n        input = call();\n        result = check(input,\"outside\",\"dTable\", \"You just ran into a wall\", \"You sit on the sofa. Congratulations\");\n\n        while (slope != true)\n        {\n\n            if(result == \"house\")//room1\n          {\n            cout &lt;&lt; \"You are in the house\" &lt;&lt; endl;\n            input = call();\n            result = check(input,\"outside\",\"dTable\", \"You just ran into a wall\", \"You sit on the sofa. Congratulations\");\n          }\n            else if(result == \"outside\")//room2\n          {\n            cout &lt;&lt; \"You are outside\"&lt;&lt; endl;\n            input = call();\n            result = check(input,\"You just ran into a wall\", \"house\",\"dTable\", \"You sit on the sofa. Congratulations\");\n          }\n            else if(result == \"dTable\")//room3\n          {\n            cout &lt;&lt; \"You are dTable\" &lt;&lt; endl;\n            input = call();\n            result = check(input,\"You just ran into a wall\", \"You sit on the sofa. Congratulations\",\"outside\",\"house\");\n          } ///adding one room after another and connect it with each other\n            else if(result == \"exit\")\n          {\n              slope = true;\n          }\n            else\n          {\n                cout &lt;&lt; result &lt;&lt; endl;\n                input = call();\n                //some winning or loosing message here\n          }\n        }\n        return 0;\n    }\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 8151704, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8g4KjTX1ZX8/AAAAAAAAAAI/AAAAAAAAACo/owckecFrMUI/photo.jpg?sz=128", "display_name": "Elevate", "link": "https://stackoverflow.com/users/8151704/elevate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 59080393, "answer_count": 1, "score": 0, "last_activity_date": 1574902723, "creation_date": 1574891854, "last_edit_date": 1574892189, "question_id": 59078988, "link": "https://stackoverflow.com/questions/59078988/how-to-have-all-options-in-one-function", "title": "How to have all options in one function?", "body": "<p>So i'm making a text adventure game and I want to be able to have a function which has all the inputs in it. So instead of every time me making an if statement to check for every direction I can just put a function that has all of that in it. How do I make this?</p>\n\n<pre><code>    string input;\n    while (input != \"n\", \"s\", \"e\", \"w\")\n    { \n        getline(cin, input);\n        if (input == \"n\")\n        {\n            dTable();\n        }\n        if (input == \"e\")\n        {\n            cout &lt;&lt; \"You sit on the sofa. Congratulations\" &lt;&lt; endl;\n        }\n        if (input == \"w\")\n        {\n            cout &lt;&lt; \"You just ran into a wall\" &lt;&lt; endl;\n        }\n        if (input == \"s\")\n        {\n            outsideHouse();\n        }\n        if (input == \"stats\")\n        {\n            stats();\n        }\n        if (input == \"help\")\n        {\n            help();\n        }\n        else\n        {\n            cout &lt;&lt; \"Sorry I am not Siri I don't understand\" &lt;&lt; endl;\n            getline(cin, input);\n        }\n        break;\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "winapi", "delete-file"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7075574"}, "edited": false, "score": 0, "creation_date": 1574892002, "post_id": 59078979, "comment_id": 104395106, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1048592/how-to-check-if-a-file-has-been-opened-by-another-application-in-c\">How to check if a file has been opened by another application in C++?</a>"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 1, "creation_date": 1574893377, "post_id": 59078979, "comment_id": 104395536, "body": "If files are already open you usually can&#39;t delete them anyway."}, {"owner": {"reputation": 446, "user_id": 10224443, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xUCwH.jpg?s=128&g=1", "display_name": "urbanSoft", "link": "https://stackoverflow.com/users/10224443/urbansoft"}, "edited": false, "score": 1, "creation_date": 1574893407, "post_id": 59078979, "comment_id": 104395549, "body": "Maybe you could use <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/fileapi/nf-fileapi-createfilea\" rel=\"nofollow noreferrer\">CreateFile</a> with <i>desired access</i> <code>0</code> and <i>share mode</i> <code>OPEN_EXISTING</code>. Then you have to check the failing reason. If it doesn&#39;t fail; close and delete."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1574893556, "post_id": 59078979, "comment_id": 104395593, "body": "<a href=\"https://devblogs.microsoft.com/oldnewthing/20120217-00/?p=8283\" rel=\"nofollow noreferrer\">How do I find out which process has a file open?</a> But really, that just introduces another TOCTTOU race. Why not just attempt to delete it? The system already does what you&#39;re trying to replicate."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1574906639, "post_id": 59078979, "comment_id": 104398322, "body": "@JonathanPotter you can delete a file that is in use (rights permitting), it just won&#39;t actually be deleted until all open handles to it have been closed."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 446, "user_id": 10224443, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xUCwH.jpg?s=128&g=1", "display_name": "urbanSoft", "link": "https://stackoverflow.com/users/10224443/urbansoft"}, "edited": false, "score": 0, "creation_date": 1574906876, "post_id": 59078979, "comment_id": 104398373, "body": "@urbanSoft that is the way to go. You could also delete the file before closing your exclusive handle to it, or use <code>NtSetInformationFile(FileDispositionInformation)</code>, to avoid a race condition where somebody else could open the file after it is closed and before it is deleted."}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1574921011, "post_id": 59078979, "comment_id": 104401608, "body": "Honestly, you can just write a batch file that does something like <code>rd %temp%\\* &#47;s</code>. Files and directories that are in use won&#39;t be deleted. Mission accomplished with a one-line script."}], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1574936116, "post_id": 59083702, "comment_id": 104408396, "body": "A file being in use doesn&#39;t mean that you cannot call <code>DeleteFile</code> on it. If all open handles to the file have passed the <code>FILE_SHARE_DELETE</code> share mode, an attempt to delete the file will not result in a <code>ERROR_SHARING_VIOLATION</code> error."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1575464818, "post_id": 59083702, "comment_id": 104574799, "body": "@IInspectable if they have, they presumably don&#39;t care if someone deletes it."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1575472565, "post_id": 59083702, "comment_id": 104579494, "body": "@cal: I was commenting solely on the inaccuracy of the statement."}], "tags": [], "owner": {"reputation": 13842, "user_id": 2790621, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/b7bSs.jpg?s=128&g=1", "display_name": "xMRi", "link": "https://stackoverflow.com/users/2790621/xmri"}, "is_accepted": false, "score": 1, "last_activity_date": 1574926265, "creation_date": 1574926265, "answer_id": 59083702, "question_id": 59078979, "link": "https://stackoverflow.com/questions/59078979/c-how-do-i-make-it-so-my-program-wouldnt-delete-files-that-are-in-use/59083702#59083702", "title": "C++ How do I make it so my program wouldn&#39;t delete files that are in use?", "body": "<p>Catch the exception Just ignore the error and continue. Or use the second form and pass an <code>error_code</code> argument. Than you get no exception and you can check the reason why it failed.</p>\n\n<p>If the file is in use you get an error. So you can't delete it. If you have no rights you can't delete it too.</p>\n\n<p>Checking the usage first is a race condition. After the check, the file might get closed and you may be able to delete it safely. There is no difference in checking first and than delete it or trying to delete it and it fails.</p>\n"}, {"tags": [], "owner": {"reputation": 446, "user_id": 10224443, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xUCwH.jpg?s=128&g=1", "display_name": "urbanSoft", "link": "https://stackoverflow.com/users/10224443/urbansoft"}, "is_accepted": true, "score": 0, "last_activity_date": 1575464599, "creation_date": 1575464599, "answer_id": 59176707, "question_id": 59078979, "link": "https://stackoverflow.com/questions/59078979/c-how-do-i-make-it-so-my-program-wouldnt-delete-files-that-are-in-use/59176707#59176707", "title": "C++ How do I make it so my program wouldn&#39;t delete files that are in use?", "body": "<p>Here's what I came up with. A recursive delete function which uses <code>CreateFile</code>. My original comment</p>\n\n<blockquote>\n  <p>Maybe you could use CreateFile with desired access 0 and share mode OPEN_EXISTING. Then you have to check the failing reason. If it doesn't fail; close and delete.</p>\n</blockquote>\n\n<p>wasn't 100% correct. <em>dwDesiredAccess</em> should be <code>0</code>, <em>dwShareMode</em> should be <code>FILE_SHARE_DELETE</code>, <em>dwCreationDisposition</em> should be <code>OPEN_EXISTING</code> and <em>dwFlagsAndAttributes</em> should be <code>FILE_FLAG_DELETE_ON_CLOSE</code>. If then a valid handle is received the last <code>CloseHandle</code> on the file will lead to deletion (see <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/fileapi/nf-fileapi-createfilea#file_flag_delete_on_close\" rel=\"nofollow noreferrer\">here</a>).</p>\n\n<p>Here's an example:</p>\n\n<pre><code>#define WIN32_LEAN_AND_MEAN\n#include &lt;Windows.h&gt;\n#include &lt;tchar.h&gt;\n#include &lt;iostream&gt;\n#include &lt;filesystem&gt;\n\n#ifdef _UNICODE\nauto&amp; cout = std::wcout;\n#else\nusing std::cout;\n#endif // _UNICODE\nusing std::endl;\nnamespace fs=std::filesystem;\n\nvoid deleteRecursive(const fs::path&amp; path);\nvoid tryDeleteFile(const fs::path&amp; path);\n\nint main(int argc, char* argv[])\n{\n    TCHAR tempDir[255];\n    GetEnvironmentVariable(_T(\"TEMP\"), tempDir, 255);\n    deleteRecursive(fs::path(tempDir));\n    return 0;\n}\n\nvoid deleteRecursive(const fs::path&amp; path)\n{\n    fs::directory_iterator dirs(path);\n    for (const auto&amp; entry : dirs)\n    {\n        const auto&amp; path = entry.path();\n        if (entry.is_directory())\n        {\n            deleteRecursive(path);\n            if (fs::is_empty(path))\n            {\n                if (!RemoveDirectory(path.c_str()))\n                {\n                    cout &lt;&lt; _T(\"Can't delete dir: \") &lt;&lt; path &lt;&lt; endl;\n                }\n            }\n        }\n        else\n        {\n            tryDeleteFile(path);\n        }\n    }\n}\n\nvoid tryDeleteFile(const fs::path&amp; path)\n{\n    const auto file = path.c_str();\n    HANDLE fileHandle = CreateFile(\n        file,                      // lpFileName,\n        0,                         // dwDesiredAccess,\n        FILE_SHARE_DELETE,         // dwShareMode,\n        NULL,                      // lpSecurityAttributes,\n        OPEN_EXISTING,             // dwCreationDisposition,\n        FILE_FLAG_DELETE_ON_CLOSE, // dwFlagsAndAttributes,\n        NULL                       // hTemplateFile\n    );\n    if (fileHandle == INVALID_HANDLE_VALUE)\n    {\n        DWORD lastErr = GetLastError();\n        if (lastErr != ERROR_FILE_NOT_FOUND) // gone in the mean time\n        {\n            cout &lt;&lt; _T(\"Can't delete file: \") &lt;&lt; file &lt;&lt; endl;\n        }\n    }\n    else\n    {\n        CloseHandle(fileHandle);\n    }\n}\n</code></pre>\n\n<p><code>tryDeleteFile</code> contains the crucial part.</p>\n"}], "owner": {"reputation": 91, "user_id": 12429008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/geJUM.png?s=128&g=1", "display_name": "Frappy", "link": "https://stackoverflow.com/users/12429008/frappy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 59176707, "answer_count": 2, "score": 0, "last_activity_date": 1575466035, "creation_date": 1574891821, "last_edit_date": 1575466035, "question_id": 59078979, "link": "https://stackoverflow.com/questions/59078979/c-how-do-i-make-it-so-my-program-wouldnt-delete-files-that-are-in-use", "title": "C++ How do I make it so my program wouldn&#39;t delete files that are in use?", "body": "<p>So basically, I'm listing all of the files in my temp directory, and then deleting them. Obviously, some of the files are in use and the program itself is using the files that it's deleting. I tried fiddling around with <code>SHFileOperation</code> with no success. (tbh I got no idea how to use it). How do I make it check if the file is in use by another program before deleting it? Thanks!</p>\n\n<p>This is giving me the error: <code>fs::remove_all(entry.path());</code></p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;Windows.h&gt;\n#include &lt;filesystem&gt;\n#include &lt;lmcons.h&gt;\n#include &lt;fileapi.h&gt;\n#include \"cColors.h\"\nusing namespace std;\n\nnamespace fs = filesystem;\nchar type;\n\nint main()\n{\n    SetConsoleTextAttribute(h, 15);\n\n    while (true)\n    {\n        cout &lt;&lt; \"[~] Are you sure you want to run Windows Cleaner? [Y/N]\";\n        cin &gt;&gt; type;\n\n        if (type == 'n')\n        {\n            break;\n            exit(0);\n        }\n        else if (type == 'y')\n        {\n            cout &lt;&lt; \"[#] Cleaning temp directory\\n\";\n\n            for (const auto&amp; entry : fs::directory_iterator(fs::temp_directory_path()))\n            {\n                cout &lt;&lt; \"[#] Deleting \" &lt;&lt; entry.path();\n                fs::remove_all(entry.path()); //This is giving me the error\n            }       \n        }\n        else\n        {\n            break;\n            exit(0);\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "ncurses"], "answers": [{"comments": [{"owner": {"reputation": 1471, "user_id": 3655463, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c567c095653589d1b50f37aeb72dbab1?s=128&d=identicon&r=PG&f=1", "display_name": "Mateusz Wojtczak", "link": "https://stackoverflow.com/users/3655463/mateusz-wojtczak"}, "edited": false, "score": 0, "creation_date": 1574897769, "post_id": 59079158, "comment_id": 104396665, "body": "Is there any way to know that ctrl+s was pressed?"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "reply_to_user": {"reputation": 1471, "user_id": 3655463, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c567c095653589d1b50f37aeb72dbab1?s=128&d=identicon&r=PG&f=1", "display_name": "Mateusz Wojtczak", "link": "https://stackoverflow.com/users/3655463/mateusz-wojtczak"}, "edited": false, "score": 0, "creation_date": 1574897935, "post_id": 59079158, "comment_id": 104396706, "body": "None that I&#39;m aware of."}], "tags": [], "owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "is_accepted": false, "score": 2, "last_activity_date": 1574892854, "creation_date": 1574892854, "answer_id": 59079158, "question_id": 59078885, "link": "https://stackoverflow.com/questions/59078885/ncurses-ctrl-s-hangs-getch/59079158#59079158", "title": "Ncurses CTRL + s hangs getch()", "body": "<p>I believe you're experiencing <a href=\"https://en.wikipedia.org/wiki/Software_flow_control\" rel=\"nofollow noreferrer\">XOFF/XON flow control</a>. <kbd>Ctrl</kbd><kbd>S</kbd> is XOFF, and stops output until <kbd>Ctrl</kbd><kbd>Q</kbd> (XON) is sent. You can probably resume your program by typing <kbd>Ctrl</kbd><kbd>Q</kbd>.</p>\n\n<p>This is not an issue with your code. It's happening at the terminal level.</p>\n"}, {"comments": [{"owner": {"reputation": 1471, "user_id": 3655463, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c567c095653589d1b50f37aeb72dbab1?s=128&d=identicon&r=PG&f=1", "display_name": "Mateusz Wojtczak", "link": "https://stackoverflow.com/users/3655463/mateusz-wojtczak"}, "edited": false, "score": 0, "creation_date": 1577124247, "post_id": 59090547, "comment_id": 105100360, "body": "Is there a way to honor signals handling routines in raw mode? I need to ignore ctrl+s but allow ctrl+c. Thanks"}, {"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "reply_to_user": {"reputation": 1471, "user_id": 3655463, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c567c095653589d1b50f37aeb72dbab1?s=128&d=identicon&r=PG&f=1", "display_name": "Mateusz Wojtczak", "link": "https://stackoverflow.com/users/3655463/mateusz-wojtczak"}, "edited": false, "score": 1, "creation_date": 1577136214, "post_id": 59090547, "comment_id": 105103817, "body": "Use <a href=\"https://invisible-island.net/ncurses/man/curs_inopts.3x.html#h3-cbreak\" rel=\"nofollow noreferrer\"><code>cbreak</code></a> rather than <code>raw</code>, then."}], "tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": true, "score": 4, "last_activity_date": 1574952215, "last_edit_date": 1574952215, "creation_date": 1574949487, "answer_id": 59090547, "question_id": 59078885, "link": "https://stackoverflow.com/questions/59078885/ncurses-ctrl-s-hangs-getch/59090547#59090547", "title": "Ncurses CTRL + s hangs getch()", "body": "<p>When you start curses using <a href=\"https://invisible-island.net/ncurses/man/ncurses.3x.html#h3-Initialization\" rel=\"nofollow noreferrer\"><code>initscr</code></a>, the terminal is in <em>cooked mode</em>, which honors XON/XOFF.  In the curses manual pages, that is referred to as <em>\"flow control characters\"</em>; <a href=\"https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/termios.h.html\" rel=\"nofollow noreferrer\">POSIX</a> refers to it as <em>\"output control\"</em>:</p>\n\n<pre><code>IXON\n    Enable start/stop output control.\n</code></pre>\n\n<p>If you call <a href=\"https://invisible-island.net/ncurses/man/curs_inopts.3x.html#h3-raw_noraw\" rel=\"nofollow noreferrer\"><code>raw</code></a>, that turns XON/XOFF <strong><em>off</em></strong>, and you can use <kbd><em>control</em></kbd><strong><code>S</code></strong>:</p>\n\n<pre><code>#include &lt;curses.h&gt;\n#include &lt;iostream&gt;\n\nint main() {\n    initscr();\n    raw(); // possibly what you intended\n    keypad(stdscr, TRUE);\n    timeout(-1);\n    int c = getch();\n    std::cout &lt;&lt; c &lt;&lt; std::endl;\n    endwin();\n}\n</code></pre>\n\n<p>Your application could call <code>tcgetattr</code> to determine if the underlying XON/XOFF mode is set, but that would not help in determining if curses has raw-mode set:</p>\n\n<ul>\n<li>curses always sets the terminal to raw mode,</li>\n<li>curses simulates cooked/raw mode for your application, and</li>\n<li>curses has no function that your application could call to find the current state.</li>\n</ul>\n"}], "owner": {"reputation": 1471, "user_id": 3655463, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c567c095653589d1b50f37aeb72dbab1?s=128&d=identicon&r=PG&f=1", "display_name": "Mateusz Wojtczak", "link": "https://stackoverflow.com/users/3655463/mateusz-wojtczak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 59090547, "answer_count": 2, "score": 1, "last_activity_date": 1578210755, "creation_date": 1574891197, "last_edit_date": 1578210755, "question_id": 59078885, "link": "https://stackoverflow.com/questions/59078885/ncurses-ctrl-s-hangs-getch", "title": "Ncurses CTRL + s hangs getch()", "body": "<p>Why in this simple program:</p>\n\n<pre><code>#include &lt;curses.h&gt;\n#include &lt;iostream&gt;\n\nint main() {\n    initscr();\n    keypad(stdscr, TRUE);\n    timeout(-1);\n    int c = getch();\n    std::cout &lt;&lt; c &lt;&lt; std::endl;\n    endwin();\n}\n</code></pre>\n\n<p>Pressing <kbd>ctrl</kbd> + <kbd>s</kbd> hangs it?</p>\n"}, {"tags": ["c++", "c++11", "pointers", "reference"], "comments": [{"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1574890187, "post_id": 59078662, "comment_id": 104394452, "body": "@Evg I wouldn&#39;t .. recommend that."}, {"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1574890302, "post_id": 59078662, "comment_id": 104394511, "body": "@Evg The context of the question is too small to suggest a solution that is guaranteed to be valid."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1574890308, "post_id": 59078662, "comment_id": 104394514, "body": "Store a reference in a pointer?? That makes no sense."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1574891543, "post_id": 59078730, "comment_id": 104394948, "body": "Not sure how I became the accepted answer. I like yours better than my own."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1574891608, "post_id": 59078730, "comment_id": 104394979, "body": "@Chipster, got to respect the OP&#39;s feeling on that :)"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 9, "last_activity_date": 1574890379, "creation_date": 1574890379, "answer_id": 59078730, "question_id": 59078662, "link": "https://stackoverflow.com/questions/59078662/how-do-we-store-a-reference-to-an-object-in-the-pointer/59078730#59078730", "title": "How do we store a reference to an object in the pointer?", "body": "<p>Syntactically speaking, you would need to use:</p>\n\n<pre><code>void setSmth(Type&amp; toBePassed) {\n  myObjP = &amp;toBePassed; // Addressof operator rather than dereference operator.\n}\n</code></pre>\n\n<h3>Word of Caution</h3>\n\n<p>When using such a mechanism, you'll have to be very careful when you dereference <code>myObjP</code>. If the object passed to <code>setSmth</code> is not alive, dereferencing <code>myObjP</code> will cause undefined behavior.</p>\n\n<p>There are more robust mechanisms in the language but it's hard to suggest anything without additional context.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "is_accepted": true, "score": 1, "last_activity_date": 1574908293, "last_edit_date": 1574908293, "creation_date": 1574890508, "answer_id": 59078753, "question_id": 59078662, "link": "https://stackoverflow.com/questions/59078662/how-do-we-store-a-reference-to-an-object-in-the-pointer/59078753#59078753", "title": "How do we store a reference to an object in the pointer?", "body": "<p><code>toBePassed</code> is a reference, not a pointer. So you actually need the <code>&amp;</code> operator (address of operator), not the <code>*</code> operator (dereference operator):</p>\n\n<pre><code>myObjP = &amp;toBePassed;\n</code></pre>\n\n<p>Note: You're not really storing a reference in a pointer. You're just storing a regular pointer to the object that is being referenced.</p>\n"}, {"tags": [], "owner": {"reputation": 124, "user_id": 11322525, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4l3liclV_qg/AAAAAAAAAAI/AAAAAAAAEyA/O1gj0hbVhGw/photo.jpg?sz=128", "display_name": "Alireza Abbasi", "link": "https://stackoverflow.com/users/11322525/alireza-abbasi"}, "is_accepted": false, "score": 1, "last_activity_date": 1574890760, "creation_date": 1574890760, "answer_id": 59078806, "question_id": 59078662, "link": "https://stackoverflow.com/questions/59078662/how-do-we-store-a-reference-to-an-object-in-the-pointer/59078806#59078806", "title": "How do we store a reference to an object in the pointer?", "body": "<p>You can try it.\nyou should use &amp; operator for pass address to pointer.</p>\n\n<pre><code>double* myObjP;\n\nvoid setSmth(double&amp; toBePassed) \n{\n    myObjP = &amp;toBePassed;\n};\n\nint main()\n{\n    double testValue{8.0};\n    setSmth(testValue);\n\n    if (testValue == *myObjP)\n    {\n        cout &lt;&lt; \"We store a reference to an object in the pointer\\n\";\n        cout &lt;&lt; \"testValue ==&gt; \" &lt;&lt; testValue &lt;&lt; \"   \" &lt;&lt; \"*myObjP ==&gt; \" &lt;&lt; *myObjP&lt;&lt;std::endl;\n    }\n\n    std::getchar();\n\n}\n</code></pre>\n"}], "owner": {"reputation": 365, "user_id": 9422122, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blasq.jpg?s=128&g=1", "display_name": "Dmitriy Shin", "link": "https://stackoverflow.com/users/9422122/dmitriy-shin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 59078753, "answer_count": 3, "score": 0, "last_activity_date": 1574908293, "creation_date": 1574889991, "last_edit_date": 1574890327, "question_id": 59078662, "link": "https://stackoverflow.com/questions/59078662/how-do-we-store-a-reference-to-an-object-in-the-pointer", "title": "How do we store a reference to an object in the pointer?", "body": "<p>I am thinking of this solution, but not sure if it is correct.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Type* myObjP;\n\nvoid setSmth(Type&amp; toBePassed) {\n  myObjP = *toBePassed;\n};\n</code></pre>\n"}, {"tags": ["c++", "opencv", "cmake", "c-preprocessor"], "answers": [{"tags": [], "owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "is_accepted": true, "score": 2, "last_activity_date": 1574891247, "last_edit_date": 1574891247, "creation_date": 1574890677, "answer_id": 59078792, "question_id": 59078631, "link": "https://stackoverflow.com/questions/59078631/how-to-handle-not-finding-opencv-in-source-code/59078792#59078792", "title": "How to handle not finding OpenCV in source code", "body": "<p>You can use CMake to <em>forward</em> the <code>OpenCV_Found</code> CMake definition to your C++ source code. You can use a <a href=\"https://cmake.org/cmake/help/latest/manual/cmake-generator-expressions.7.html#boolean-generator-expressions\" rel=\"nofollow noreferrer\">generator expression</a> in <a href=\"https://cmake.org/cmake/help/latest/command/target_compile_definitions.html\" rel=\"nofollow noreferrer\"><code>target_compile_definitions()</code></a> like this:</p>\n\n<pre><code>add_executable(MyExe ${MY_SOURCES})\ntarget_compile_definitions(MyExe PUBLIC $&lt;$&lt;BOOL:${OpenCV_Found}&gt;:OpenCV_Found&gt;)\n</code></pre>\n\n<p>This will add <code>OpenCV_Found</code> as a pre-processor definition to the <code>MyExe</code> target when the <code>${OpenCV_Found}</code> CMake variable evaluates to True. When the CMake variable <code>${OpenCV_Found}</code> evaluates to False (case-insensitive equal of <code>0</code>, <code>FALSE</code>, <code>OFF</code>, <code>N</code>, <code>NO</code>, <code>IGNORE</code>, or <code>NOTFOUND</code>), the <code>OpenCV_Found</code> pre-processor definition is omitted.</p>\n"}], "owner": {"reputation": 15, "user_id": 3195992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd06721c67cfd35fe66d2d45f49aaf72?s=128&d=identicon&r=PG", "display_name": "gRoMBi", "link": "https://stackoverflow.com/users/3195992/grombi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 59078792, "answer_count": 1, "score": 0, "last_activity_date": 1574893286, "creation_date": 1574889821, "last_edit_date": 1574893286, "question_id": 59078631, "link": "https://stackoverflow.com/questions/59078631/how-to-handle-not-finding-opencv-in-source-code", "title": "How to handle not finding OpenCV in source code", "body": "<p>I have built a C++ library that depends on OpenCV. However, sometimes I don't need to use OpenCV, and I compile the code without it.</p>\n\n<p>The idea is, when the <code>OpenCV_Found</code> variable in CMake is true, there would be a pre-processor variable similar to the <code>OpenCV_Found</code> variable, but in the C++ code. In other words, I want to do something like this:</p>\n\n<pre><code>#ifdef OpenCV_Found\n#include &lt;opencv2/core/core.hpp&gt;\n#endif\n</code></pre>\n\n<p>My question is: </p>\n\n<p>Does OpenCV provide a similar variable like that? Or do I have to define it manually, and send it to the target compilation flags? </p>\n"}, {"tags": ["c++", "string", "oop"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 6, "creation_date": 1574889023, "post_id": 59078454, "comment_id": 104394054, "body": "The problem isn&#39;t the string, it&#39;s the <code>int</code>s. You can&#39;t pass an <code>int</code> literal to a function that takes a <code>int&amp;</code>."}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1574889111, "post_id": 59078454, "comment_id": 104394091, "body": "To answer the title, a string literal is an array of constant characters (in C++). The compiler is correct. (In C, the elements do not have the <code>const</code> attribute but are practically constant because the behavior upon attempting to modify them is not defined by the standard.)"}, {"owner": {"reputation": 115, "user_id": 8338615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/971aac686c830f2fb36f66efe5a70b63?s=128&d=identicon&r=PG", "display_name": "SuperSim135", "link": "https://stackoverflow.com/users/8338615/supersim135"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1574889207, "post_id": 59078454, "comment_id": 104394128, "body": "@FredLarson Is there a better alternative?"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 3, "creation_date": 1574889268, "post_id": 59078454, "comment_id": 104394150, "body": "Why are you passing them by reference? If you&#39;re intending to modify them, you can&#39;t do that to literals. If you&#39;re not, you don&#39;t need to pass them by reference."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1574951337, "post_id": 59078454, "comment_id": 104416597, "body": "Minor point: I think you mistyped the error message. The type of <code>&quot;Title&quot;</code> is <code>const char[6]</code>, not <code>const char[5]</code>. There&#39;s an implied <code>&#39;\\0&#39;</code> at the end of the string."}], "answers": [{"comments": [{"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1574889443, "post_id": 59078519, "comment_id": 104394209, "body": "It&#39;s OK to pass by const reference if it&#39;s a template function and you don&#39;t know if making a copy will be expensive or not."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1574889499, "post_id": 59078519, "comment_id": 104394221, "body": "@MarkRansom True"}], "tags": [], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": true, "score": 8, "last_activity_date": 1574889941, "last_edit_date": 1574889941, "creation_date": 1574889194, "answer_id": 59078519, "question_id": 59078454, "link": "https://stackoverflow.com/questions/59078454/why-does-my-compiler-percieve-a-string-to-be-a-const-char/59078519#59078519", "title": "Why does my compiler percieve a string to be a const char[]?", "body": "<p>You are passing <a href=\"https://stackoverflow.com/questions/3601602/what-are-rvalues-lvalues-xvalues-glvalues-and-prvalues\"><em>rvalue</em>s</a> (960 and 540) as an argument to the constructor that takes <code>int&amp;</code> references. This is forbidden. The only time you can bind a rvalue to a reference is when the reference is marked <code>const</code>, e.g. <code>const int&amp;</code> (or when you have a <a href=\"https://en.cppreference.com/w/cpp/language/reference#Forwarding_references\" rel=\"nofollow noreferrer\">forwarding reference</a>; see also Scott Meyers' <a href=\"https://isocpp.org/blog/2012/11/universal-references-in-c11-scott-meyers\" rel=\"nofollow noreferrer\">excellent post</a> (just replace <em>universal</em> by <em>forwarding</em>, as that's how those references are now called in the C++ standard)).</p>\n\n<p><code>std::string</code> has <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/basic_string\" rel=\"nofollow noreferrer\">an implicit conversion from <code>const char*</code></a> (ctor #5 in the link), to which the <code>const char[5]</code> type of <code>label</code> decays to, so the string part is OK.</p>\n\n<p>BTW, do not pass fundamental types by <code>const</code> reference. It doesn't save anything, and may prevent optimization. Pass by <code>const</code> reference only when the objects to be passed are expensive to copy (or when you deal with template code, see @Mark's comment). In your case just pass them by value</p>\n\n<pre><code>PixelPlane::PixelPlane(int width, int height, const std::string&amp; label)\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1574890283, "post_id": 59078582, "comment_id": 104394502, "body": "For the sake of completeness, do you have a source stating that string literals are const arrays? Everything I&#39;ve seen so far says they&#39;re <code>const char *</code>, though experience has shown me it&#39;s an array."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1574890412, "post_id": 59078582, "comment_id": 104394555, "body": "@Chipster added a link. &quot;The type of an unprefixed string literal is const char[N]&quot;"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1574890496, "post_id": 59078582, "comment_id": 104394582, "body": "@Chipster seems like everything you have seen so far was wrong ;) arrays are not pointers. However typically you write <code>const char * my_string = &quot;Hello world&quot;</code> because array can decay to pointers"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1574890647, "post_id": 59078582, "comment_id": 104394637, "body": "Oh, I&#39;m sure everything I&#39;ve seen so far is wrong. It&#39;d just be nice to see the right thing once in a while ;). I had already up-voted your answer anyway, because it was a good answer even without the link, but thanks for the link."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1574890964, "post_id": 59078582, "comment_id": 104394744, "body": "@Chipster didnt want to come across as arrogant. Actually I am at a complete loss when the topic is c-arrays, string literals being <code>const char[N]</code> is about everything I know for sure"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1574891301, "post_id": 59078582, "comment_id": 104394857, "body": "@Chipster then nevermind, its just too easy to misunderstand or be misunderstood"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1574892411, "post_id": 59078582, "comment_id": 104395218, "body": "A fun thing when arrays stay arrays (passing them by array reference): <code>template &lt;class T, size_t N&gt; void f(T (&amp;arr)[N]){std::cout &lt;&lt; &quot;I&#39;m an array of &quot; &lt;&lt; N &lt;&lt; &quot; elements\\n&quot;;}</code>, see <a href=\"http://coliru.stacked-crooked.com/a/99d8fb44fb4355a3\" rel=\"nofollow noreferrer\">this</a>."}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 3, "last_activity_date": 1574890391, "last_edit_date": 1574890391, "creation_date": 1574889544, "answer_id": 59078582, "question_id": 59078454, "link": "https://stackoverflow.com/questions/59078454/why-does-my-compiler-percieve-a-string-to-be-a-const-char/59078582#59078582", "title": "Why does my compiler percieve a string to be a const char[]?", "body": "<p>This</p>\n\n<pre><code>PixelPlane::PixelPlane(int&amp; width, int&amp; height, const std::string&amp; label)\n</code></pre>\n\n<p>is trying to say: \"Pass me a reference to two integers, because I want to modify them\"</p>\n\n<p>Informally speaking, you cannot modify <code>960</code> or <code>540</code>. That doesnt make sense. And because it doesnt make sense the language forbids you do pass <code>960</code> or <code>540</code> where a (non-const) reference is expected. </p>\n\n<p>More formally, <code>960</code> and <code>540</code> are rvalues. They dont have names, they cannot be assigned to. </p>\n\n<p>Solution: change the constructor to take <code>const int&amp;</code> or even better just <code>int</code> (assuming the parameters are not modified).</p>\n\n<blockquote>\n  <p>Why does my compiler percieve a string to be a const char[]?</p>\n</blockquote>\n\n<p>String literals arent <code>std::string</code>s. <code>\"Title\"</code> really is a <code>const char[5]</code> (see eg <a href=\"https://en.cppreference.com/w/cpp/language/string_literal\" rel=\"nofollow noreferrer\">here</a>).</p>\n"}], "owner": {"reputation": 115, "user_id": 8338615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/971aac686c830f2fb36f66efe5a70b63?s=128&d=identicon&r=PG", "display_name": "SuperSim135", "link": "https://stackoverflow.com/users/8338615/supersim135"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 59078519, "answer_count": 2, "score": 1, "last_activity_date": 1574890391, "creation_date": 1574888898, "question_id": 59078454, "link": "https://stackoverflow.com/questions/59078454/why-does-my-compiler-percieve-a-string-to-be-a-const-char", "title": "Why does my compiler percieve a string to be a const char[]?", "body": "<p>Constructor</p>\n\n<pre><code>PixelPlane::PixelPlane(int&amp; width, int&amp; height, const std::string&amp; label)\n</code></pre>\n\n<p>Whenever I initialize the object with the following arguments</p>\n\n<pre><code>PixelPlane pixel_plane(960, 540, \"Title\");\n</code></pre>\n\n<p>Visual Studio underlines the <code>960</code> argument and displays the message <code>No instance of constructor \"PixelPlane::PixelPlane matches the argument list. Argument types are: (int, int, const char[5])</code>. I saw someone do something similar without errors <a href=\"https://www.youtube.com/watch?v=1nfuYMXjZsA\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=1nfuYMXjZsA</a>. Have I done something wrong or have I just overlooked something?</p>\n"}, {"tags": ["c++", "locking", "thread-synchronization", "stdmutex"], "comments": [{"owner": {"reputation": 49, "user_id": 6641952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdbb95f684d1b259e0c143b49eb52d6a?s=128&d=identicon&r=PG&f=1", "display_name": "Sclaker", "link": "https://stackoverflow.com/users/6641952/sclaker"}, "edited": false, "score": 0, "creation_date": 1574892790, "post_id": 59078389, "comment_id": 104395345, "body": "Is the solution above good or I have to involve conditional var?"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 6641952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdbb95f684d1b259e0c143b49eb52d6a?s=128&d=identicon&r=PG&f=1", "display_name": "Sclaker", "link": "https://stackoverflow.com/users/6641952/sclaker"}, "edited": false, "score": 0, "creation_date": 1574899950, "post_id": 59078426, "comment_id": 104397164, "body": "Thx.I coded the condition variable solution and it 150% more code than the above one, but I can sleep better at night, :-) Basically, instead of a single mutex, I added one bool and one condition_variable in extra - put them into a single struct and allocate it once in heap ... you can imagine the rest of it."}], "tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": false, "score": 5, "last_activity_date": 1574888787, "last_edit_date": 1592644375, "creation_date": 1574888787, "answer_id": 59078426, "question_id": 59078389, "link": "https://stackoverflow.com/questions/59078389/c-sync-between-two-threads-using-a-mutex-without-using-conditional-variable/59078426#59078426", "title": "C++ sync between two threads using a mutex without using conditional variable", "body": "<p>A standard <code>std::mutex</code> cannot be unlocked by a thread other than the one that locked it. It's undefined behavior to try.</p>\n<p>From <a href=\"https://en.cppreference.com/w/cpp/thread/mutex/unlock\" rel=\"noreferrer\">cppreference</a> on <code>std::mutex::unlock</code> :</p>\n<blockquote>\n<p>Unlocks the mutex.</p>\n<p>The mutex must be locked by the current thread of execution, otherwise, the behavior is undefined.</p>\n</blockquote>\n<p>For this reason your proposed strategy doesn't work with <code>std::mutex</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 6641952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdbb95f684d1b259e0c143b49eb52d6a?s=128&d=identicon&r=PG&f=1", "display_name": "Sclaker", "link": "https://stackoverflow.com/users/6641952/sclaker"}, "edited": false, "score": 0, "creation_date": 1574894183, "post_id": 59078714, "comment_id": 104395800, "body": "try_lock has the same above mentioned limitations as lock - even with spurious false return headache as I read"}, {"owner": {"reputation": 179, "user_id": 717599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9155f436265f2c7f84a670b23c3f9bf2?s=128&d=identicon&r=PG", "display_name": "bialy", "link": "https://stackoverflow.com/users/717599/bialy"}, "reply_to_user": {"reputation": 49, "user_id": 6641952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdbb95f684d1b259e0c143b49eb52d6a?s=128&d=identicon&r=PG&f=1", "display_name": "Sclaker", "link": "https://stackoverflow.com/users/6641952/sclaker"}, "edited": false, "score": 0, "creation_date": 1574922771, "post_id": 59078714, "comment_id": 104402172, "body": "So if you want to stick to stdlib you can use recursive_mutex: [<a href=\"https://en.cppreference.com/w/cpp/thread/recursive_mutex][1]\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/thread/recursive_mutex][1]</a>  But it is still not perfect:  <code>The maximum number of times that a recursive_mutex may be locked is unspecified, but after that number is reached, calls to lock will throw std::system_error and calls to try_lock will return false.</code>"}], "tags": [], "owner": {"reputation": 179, "user_id": 717599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9155f436265f2c7f84a670b23c3f9bf2?s=128&d=identicon&r=PG", "display_name": "bialy", "link": "https://stackoverflow.com/users/717599/bialy"}, "is_accepted": false, "score": 0, "last_activity_date": 1574890273, "creation_date": 1574890273, "answer_id": 59078714, "question_id": 59078389, "link": "https://stackoverflow.com/questions/59078389/c-sync-between-two-threads-using-a-mutex-without-using-conditional-variable/59078714#59078714", "title": "C++ sync between two threads using a mutex without using conditional variable", "body": "<p>Maybe try_lock? You can use spinlock. Sometrhing like:</p>\n\n<pre><code>while(mutex.try_lock()) \n    sleep(100);\n</code></pre>\n\n<p>will not crash and will block until first thread unlocks mutex.\n<a href=\"https://en.cppreference.com/w/cpp/thread/mutex/try_lock\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/thread/mutex/try_lock</a></p>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 6641952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdbb95f684d1b259e0c143b49eb52d6a?s=128&d=identicon&r=PG&f=1", "display_name": "Sclaker", "link": "https://stackoverflow.com/users/6641952/sclaker"}, "is_accepted": false, "score": 0, "last_activity_date": 1574901039, "creation_date": 1574901039, "answer_id": 59080220, "question_id": 59078389, "link": "https://stackoverflow.com/questions/59078389/c-sync-between-two-threads-using-a-mutex-without-using-conditional-variable/59080220#59080220", "title": "C++ sync between two threads using a mutex without using conditional variable", "body": "<p>The best/easiest solution I see is using boost::barrier;\nexcept it is not as flexible - for example you cannot add timeout behavior which is typically needed.</p>\n"}], "owner": {"reputation": 49, "user_id": 6641952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdbb95f684d1b259e0c143b49eb52d6a?s=128&d=identicon&r=PG&f=1", "display_name": "Sclaker", "link": "https://stackoverflow.com/users/6641952/sclaker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1574903113, "creation_date": 1574888621, "last_edit_date": 1574903113, "question_id": 59078389, "link": "https://stackoverflow.com/questions/59078389/c-sync-between-two-threads-using-a-mutex-without-using-conditional-variable", "title": "C++ sync between two threads using a mutex without using conditional variable", "body": "<p>I have one thread that needs to be blocked until something happens in another thread. It sounds very typical and I have this solution.</p>\n\n<pre><code>//thread 1\nmux.lock();\n//send work to another thread\nmux.lock(); //will likely block which I want\n\n//thread 2\n//get the work sent over from thread 1\n//work on it, then\nmux.unlock(); //unblock thread 1 - all good\n</code></pre>\n\n<p>This works fine seemingly on Linux and it does not need a conditional var - except C++ standard says it is undefined behavior to acquire the lock in the same thread twice - which I do in thread 1.</p>\n"}, {"tags": ["c++", "winapi", "com", "event-handling", "iactivescript"], "answers": [{"comments": [{"owner": {"reputation": 6792, "user_id": 254343, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YEat6.png?s=128&g=1", "display_name": "amn", "link": "https://stackoverflow.com/users/254343/amn"}, "edited": false, "score": 0, "creation_date": 1574945825, "post_id": 59084520, "comment_id": 104413594, "body": "Thank you for this! Alright, even if I implement <code>IConnectionPoint</code> and related interfaces, what exactly gets me to being able to identify script objects that support <code>addEventListener</code>, <code>dispatchEvent</code> and <code>Event</code> and use these APIs? Can you elaborate on that? Does Active Script magically implement <code>addEventListener</code> and/or <code>dispatchEvent</code> on any object that is a <code>IDispatch</code> and a <code>IConnectionPoint</code> (for example)?"}, {"owner": {"reputation": 13842, "user_id": 2790621, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/b7bSs.jpg?s=128&g=1", "display_name": "xMRi", "link": "https://stackoverflow.com/users/2790621/xmri"}, "reply_to_user": {"reputation": 6792, "user_id": 254343, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YEat6.png?s=128&g=1", "display_name": "amn", "link": "https://stackoverflow.com/users/254343/amn"}, "edited": false, "score": 0, "creation_date": 1574948932, "post_id": 59084520, "comment_id": 104415227, "body": "I can&#39;t tell you what the Scripting Engine does in detail. Just debug one of the samples I gave to you. I can telll you it works easily."}], "tags": [], "owner": {"reputation": 13842, "user_id": 2790621, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/b7bSs.jpg?s=128&g=1", "display_name": "xMRi", "link": "https://stackoverflow.com/users/2790621/xmri"}, "is_accepted": false, "score": 1, "last_activity_date": 1574929601, "creation_date": 1574929601, "answer_id": 59084520, "question_id": 59078272, "link": "https://stackoverflow.com/questions/59078272/how-to-implement-event-dispatching-from-a-windows-script-host-to-a-script/59084520#59084520", "title": "How to implement event dispatching from a Windows Script host to a script", "body": "<p>You need to create an object that implements events (see <code>IConnectionPoint</code>).</p>\n\n<p>After starting the script you can call <code>AddNamedItem</code>. The script now knows the interface of you object. If it implements it can register to this events when the state changes to <code>SCRIPTSTATE_CONNECTED</code>.</p>\n\n<p>If an event is fired, the script will receive the event and will execute the appropriate code section.</p>\n\n<p>There are old samples: </p>\n\n<ul>\n<li>Q168214 SAMPLE: MFCAXS (you might find it in the wayback engine) </li>\n<li>And there is a sample here in <a href=\"https://www.codeproject.com/Articles/2830/Macro-Scripting-Language-Support-MFC\" rel=\"nofollow noreferrer\">code project</a>  </li>\n<li>For ATL samples for Events look <a href=\"https://docs.microsoft.com/en-us/cpp/atl/adding-an-event-atl-tutorial-part-5?view=vs-2019\" rel=\"nofollow noreferrer\">here</a> </li>\n</ul>\n"}], "owner": {"reputation": 6792, "user_id": 254343, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YEat6.png?s=128&g=1", "display_name": "amn", "link": "https://stackoverflow.com/users/254343/amn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575037009, "creation_date": 1574888002, "last_edit_date": 1575037009, "question_id": 59078272, "link": "https://stackoverflow.com/questions/59078272/how-to-implement-event-dispatching-from-a-windows-script-host-to-a-script", "title": "How to implement event dispatching from a Windows Script host to a script", "body": "<p>I have a C++ COM (multi-threaded apartment model) application that I build with Visual C++ 2019. I am playing with the COM-based Active Script interfaces and classes. I have a JavaScript (\"JScript\" really, CLSID <code>{F414C260-6AC0-11CF-B6D1-00AA00BBBB58}</code>) Active Script COM object created and set up. Everything works surprisingly well (for something that is falling into obscurity, unfortunately).</p>\n\n<p>Is there an idiomatic approach to registering and calling event listeners where a script can use an API like like <a href=\"https://dom.spec.whatwg.org/#dom-eventtarget-addeventlistener\" rel=\"nofollow noreferrer\">https://dom.spec.whatwg.org/#dom-eventtarget-addeventlistener</a> and where I can dispatch events from the script host (C++)? To clarify, I am well able to call <code>IDispatch</code> interface methods from scripts, I want to call script functions that were passed earlier with such methods to the program, from the program. <code>GetScriptDispatch</code> is something else -- it lets me call methods available in the global script namespace, but I need to call functions that I pass to a proxied (from the script) \"addEventListener\" method.</p>\n\n<p>I depend on this functionality because I want to dispatch events. Basically I want <code>addEventListener</code> to be available on certain proxied (e.g. objects added to script namespace with <code>AddNamedItem</code>) objects and I need to call event listeners added through calls to that method, when certain events in the C++ application happen.</p>\n\n<p>I have read something about <code>IConnectionPoint</code>, and the Active Script documentation briefly mentions \"event sinks\" a couple of times, without there being examples on how and for what these can be used for. There is also the <a href=\"https://docs.microsoft.com/en-us/scripting/winscript/reference/ibindeventhandler-bindhandler\" rel=\"nofollow noreferrer\"><code>IBindEventHandler</code></a> interface, without much explanation again as to what to use it for.</p>\n\n<p>I understand this is ancient stuff, but I like COM and Active Script interface has several implementations, which to me adds utility.</p>\n"}, {"tags": ["c++", "encryption", "openssl"], "comments": [{"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 2, "creation_date": 1574889115, "post_id": 59078269, "comment_id": 104394093, "body": "Your code is a big mess, with all kinds of buffers being created at bad positions etc. Please clean that up before posting. What are you actually trying to accomplish? Why are you using low level signature generation operations in the first place?"}, {"owner": {"reputation": 31, "user_id": 9535937, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FwzeeGDtPY0/AAAAAAAAAAI/AAAAAAAACas/TruFPb3HptQ/photo.jpg?sz=128", "display_name": "Sumnayono", "link": "https://stackoverflow.com/users/9535937/sumnayono"}, "reply_to_user": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1574890613, "post_id": 59078269, "comment_id": 104394627, "body": "I would like no one to be able to replace the server with another one to prevent someone from giving a fake JSON file because if he could change his client. And what is the high level signature ?"}, {"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1574890820, "post_id": 59078269, "comment_id": 104394700, "body": "<a href=\"https://wiki.openssl.org/index.php/EVP_Signing_and_Verifying\" rel=\"nofollow noreferrer\">EVP</a>! Note that there is no shame in signing hashes either, if that&#39;s your worry (but I&#39;m guessing here)."}, {"owner": {"reputation": 31, "user_id": 9535937, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FwzeeGDtPY0/AAAAAAAAAAI/AAAAAAAACas/TruFPb3HptQ/photo.jpg?sz=128", "display_name": "Sumnayono", "link": "https://stackoverflow.com/users/9535937/sumnayono"}, "edited": false, "score": 0, "creation_date": 1574964404, "post_id": 59078269, "comment_id": 104422562, "body": "Okay, thanks to you. I&#39;m going to go on the EVP. And sorry for the title, I was in a hurry."}], "owner": {"reputation": 31, "user_id": 9535937, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FwzeeGDtPY0/AAAAAAAAAAI/AAAAAAAACas/TruFPb3HptQ/photo.jpg?sz=128", "display_name": "Sumnayono", "link": "https://stackoverflow.com/users/9535937/sumnayono"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574957658, "creation_date": 1574887983, "last_edit_date": 1574957658, "question_id": 59078269, "link": "https://stackoverflow.com/questions/59078269/openssl-rsa-decryption-dont-work-with-the-same-c-string", "title": "OpenSSL rsa decryption don&#39;t work with the same c-string", "body": "<p>I'm trying to make a file checker program that fetch enrypted hash from a JSON file. I'm using Qt and OpenSSL so its a mix of C/C++. I have succeeded in fetching encrypted hash but when I tried to derypt them it don't work however when I encrypt it direcly in the same program it work even if the to string are equals.</p>\n\n<p>As with this code :</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void RSAFileCheckerInfoFetcher::decrypt() \n{\n\n    char *key = \"Public Key\";\n\n    RSA * publicKey = nullptr;\n    BIO *keybio;\n    keybio = BIO_new_mem_buf(key, -1);\n    publicKey  = PEM_read_bio_RSA_PUBKEY(keybio, &amp;publicKey, NULL, NULL);\n\n    RSA * privateKey = nullptr;\n    FILE * fp = fopen(\"path to private key\", \"rb\");//making a private key to test\n    privateKey = PEM_read_RSAPrivateKey(fp, &amp;privateKey, NULL, NULL);;\n\n    char *plainText = \"puMcJaBzbovqZPaaLC4jxw==\";//the first hash i have in the JSON file\n    unsigned char decrypted[400];\n    char encrypted2[400]; //reencrypt to test\n\n    QByteArray encryptedHash = encryptedHashes.first();\n    char  encrypted [400]; //encrypted hash\n    strcpy(encrypted, encryptedHash.data());//encryptedHash.data():encrypted hash from JSON\n\n\n    //encrypt to test\n    int encrypted_length = RSA_private_encrypt(strlen(plainText), reinterpret_cast&lt;unsigned char*&gt;(plainText), reinterpret_cast&lt;unsigned char *&gt;(encrypted2), privateKey, 1);\n    if (encrypted_length == -1)\n    {\n        exit(0);\n    }\n\n    printf(\"Encrypted text =%s\\n\", encrypted);\n    printf(\"Encrypted length =%d\\n\", encrypted_length);\n\n    //decrypt the encrypted hash from the JSON file\n    int decrypted_length = RSA_public_decrypt(encrypted_length, reinterpret_cast&lt;unsigned char *&gt;(encrypted), decrypted, publicKey, 1);//Je d\u00e9chiffre le hash obtenue \u00e0 partir du fichier JSON\n    if (decrypted_length == -1)\n    {\n        std::cout &lt;&lt; \"Don't work\" &lt;&lt; std::endl;\n    }\n    else\n    {\n        printf(\"Decrypted Text =%s\\n\", decrypted);\n        printf(\"Decrypted Length =%d\\n\", decrypted_length);\n    }\n\n    //decrypt encrypted hash to test\n    decrypted_length = RSA_public_decrypt(encrypted_length, reinterpret_cast&lt;unsigned char *&gt;(encrypted2), decrypted, publicKey, 1);//Dechiffre le hash chiffr\u00e9 pour le test\n    if (decrypted_length == -1)\n    {\n        std::cout &lt;&lt; \"Don't work\" &lt;&lt; std::endl;\n    }\n    else\n    {\n        printf(\"Decrypted Text =%s\\n\", decrypted);\n        printf(\"Decrypted Length =%d\\n\", decrypted_length);\n    }\n    if (strcmp(encrypted, encrypted2) == 0)\n        std::cout &lt;&lt; \"encrypted = encrypted2\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>The output is :\n`</p>\n\n<pre><code>Encrypted text =&lt;)qO\u00ac\u00fe\u00ac\u2551\u00e2c\u00ea9lmi\u00d1\u00df1+p\u00b2\u00f7!\u00e2}j\u00be8\nEncrypted length =128\nDon't work\nDecrypted Text =puMcJaBzbovqZPaaLC4jxw==\nDecrypted Length =24\nencrypted = encrypted2\n</code></pre>\n\n<p>`</p>\n"}, {"tags": ["c++", "opengl", "parallel-processing", "glut"], "comments": [{"owner": {"reputation": 41, "user_id": 3786459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c4b5ef809ea309e799fcdcc0cab6be?s=128&d=identicon&r=PG&f=1", "display_name": "kelloaos", "link": "https://stackoverflow.com/users/3786459/kelloaos"}, "edited": false, "score": 0, "creation_date": 1574888077, "post_id": 59078257, "comment_id": 104393659, "body": "i another program e.g. i calculated my alien-sprite after a key detection...i think through idle() display is called everytime nothing else is called ... but for this code it would change the structure .. it wouldnt be that bad ... but i cant imagine that opengl is that unflexible.. but ok there are improvements i guess. maybe sdl is smarter ?"}], "answers": [{"comments": [{"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "edited": false, "score": 2, "creation_date": 1574918368, "post_id": 59081837, "comment_id": 104400819, "body": "Good answer, but I&#39;d suggest ditching glut entirely and going with a real framework like GLFW."}, {"owner": {"reputation": 41, "user_id": 3786459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c4b5ef809ea309e799fcdcc0cab6be?s=128&d=identicon&r=PG&f=1", "display_name": "kelloaos", "link": "https://stackoverflow.com/users/3786459/kelloaos"}, "edited": false, "score": 0, "creation_date": 1574962789, "post_id": 59081837, "comment_id": 104421997, "body": "thank you ! wow ... yes i think this were good answers like 3Dave said ! .... i think i need such a &quot;real&quot; framework .. because it will be maybe easier in the beginning for me. the 3 options you mentioned are to complicated for me. ... ok but the disadvantage would be, that i have to understand &quot;frameworks&quot; xD i dont know about it... oh .. maybe i really a have to look for one of your 3 solutions xD"}, {"owner": {"reputation": 41, "user_id": 3786459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c4b5ef809ea309e799fcdcc0cab6be?s=128&d=identicon&r=PG&f=1", "display_name": "kelloaos", "link": "https://stackoverflow.com/users/3786459/kelloaos"}, "edited": false, "score": 0, "creation_date": 1574963195, "post_id": 59081837, "comment_id": 104422124, "body": "Ah .. maybe for you it is easy and you maybe told me it implicit etc. but void glutPostRedisplay (void); is a really interesting part of openGL for me i think. i could run everytime a code ... yes it is the main loop you mentioned... a yeah but then you are right it is no more parellel.. ok but for my case it will  maybe enough   ..void idle(){ \tcout&lt;&lt;&quot;lol&quot;&lt;&lt;endl; }"}], "tags": [], "owner": {"reputation": 6746, "user_id": 8185995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02d69271095c22ec7a2f5cad43ea3ac0?s=128&d=identicon&r=PG&f=1", "display_name": "robthebloke", "link": "https://stackoverflow.com/users/8185995/robthebloke"}, "is_accepted": true, "score": 2, "last_activity_date": 1574915896, "creation_date": 1574915896, "answer_id": 59081837, "question_id": 59078257, "link": "https://stackoverflow.com/questions/59078257/how-to-run-program-parallel-to-opengl/59081837#59081837", "title": "how to run program parallel to opengl", "body": "<p>When you call glutMainLoop(), your program will enter a loop that looks a bit like:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void glutMainLoop()\n{\n  while(true)\n  {\n    MSG msg = getWindowEvent();\n    switch(msg)\n    {\n    case QUIT: exit(0); break; //&lt; NOTE: method never returns!!\n    /* snip */\n    }\n  }\n}\n</code></pre>\n\n<p>Which is the reason you cannot run any code after glutMainLoop() has been called. If you just want to run the code at the bottom of main once (at the point of app startup), then simply move glutMainLoop() from your routine setup func, to be the very last call in main(). If you want to run that code <em>at the same time</em> as updating the GL window, you have a couple of options:</p>\n\n<ol>\n<li>Just run the std::cin code whenever you want (as a response to a keypress, etc). It will cause the OpenGL window to freeze whilst that code is run, simply because it's a single threaded application, so the redraw can't happen until you've finished. </li>\n<li>Use the glut keypress/keyrelease callbacks to fill a global std::string with the entered text (one key press at a time). When you detect enter, parse and process your op codes form the global string. Do not call cin, and render the text on screen via OpenGL (or, if you are extremely lazy, call glutSetWindowTitle, which avoids the need to find code to render a font on screen - although glut can help out there!)</li>\n<li>Create a second thread for the std::cin based code (if that's something you really want to do?). You then have to deal with the bother of threading, which is probably overkill in this case imho. </li>\n</ol>\n\n<p>Personally, I'd go for option 2. </p>\n"}], "owner": {"reputation": 41, "user_id": 3786459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c4b5ef809ea309e799fcdcc0cab6be?s=128&d=identicon&r=PG&f=1", "display_name": "kelloaos", "link": "https://stackoverflow.com/users/3786459/kelloaos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 288, "favorite_count": 1, "closed_date": 1574916706, "accepted_answer_id": 59081837, "answer_count": 1, "score": 0, "last_activity_date": 1574915896, "creation_date": 1574887936, "last_edit_date": 1574891799, "question_id": 59078257, "link": "https://stackoverflow.com/questions/59078257/how-to-run-program-parallel-to-opengl", "closed_reason": "Needs more focus", "title": "how to run program parallel to opengl", "body": "<p>i want to run opengl and i also want that my c code is executed... xD\nAfter the window is created no code is executed... is this normal ?\nor do i need just to understand opengl a bit better :D</p>\n\n<p>Maybe i need to put my c code in some opengl loop xD like into the idle function^^</p>\n\n<pre><code>//============================================================================\n// Name        : cpu_Emulation_19-10-13.cpp\n// Author      : \n// Version     :\n// Copyright   : Your copyright notice\n// Description : Hello World in C++, Ansi-style\n//============================================================================\n//https://fms.komkon.org/EMUL8/HOWTO.html\n\n// todo: iam programming the dissambler which just checks my given in commands.. 1927 - 31.10.2019\n#include &lt;iostream&gt;\n#include &lt;stdint.h&gt;\n#include \"C8Klasse.h\"\n#include \"Cartridge.h\"\n#include &lt;stdio.h&gt;\n#include &lt;GL/glut.h&gt;\n#include &lt;intrin.h&gt; // damit kann man zyklen auslesen...https://stackoverflow.com/questions/13772567/how-to-get-the-cpu-cycle-count-in-x86-64-from-c\nusing namespace std;\n//  Windows\n//#ifdef _WIN32\n\n// what does this whole thing: it ist a Chip8 Interpreter\nunsigned short int memory[1000]; // annahem\nvoid initMemory() {\n    memory[0] = 0;\n    memory[1] = 1;\n}\nvoid display() {\n\n}\nvoid glutInitRoutines() {\n    glutInitWindowSize(64, 32);\n    glutCreateWindow(\"Chip8 V5\");\n    glutDisplayFunc(display); // die obige Funktion display wird als Bildchirm behandler bekanntgemacht\n    //glutSpecialFunc( process_Normal_Keys);\n    glClear(GL_COLOR_BUFFER_BIT);\n    glMatrixMode(GL_PROJECTION);\n    glLoadIdentity();\n    gluOrtho2D(0.0, 32.0, 64.0, 0.0);\n    //glutIdleFunc( idle);\n    glutMainLoop();\n    //void glutIdleFunc(void (*func)(void)\n}\n\nint main(int argc, char **argv) {\n    //screen\n    glutInit(&amp;argc, argv);\n    glutInitRoutines(); // initialisation for opengGL window\n    //screen end\n    char rom_name[] = \"img Fishie.ch8\";\n\n    // #Start Chip8\n    C8Klasse c8; // lege interpreter an\n    c8.initSpeicher(); // initialisiere den Speicher zu 0\n    // #Setup cartridge\n    Cartridge testCartridge; // declare a Cartridge ( its the rom with the game data !!\n    testCartridge.readInOpcodeFromFileInArray(rom_name); // reads opcode of a data-file (should be in workspace) into an intern array\n    testCartridge.printOpcode();\n    // # Cartridgecode to Chip8 Memory\n    c8.setOpCode(testCartridge);// here the Opcode of the game is passed to the c8 CPU ( Cartridge -&gt;internal memory )!\n    c8.printMemory(); // here the c8 internal memory is printed out, should be same form 0x200 to 0xfff with cartridge , since the game has been read in !\n    c8.printMemory(0x200); // prints memory by starting at given paramater address !\n\n    cout &lt;&lt; \"\\n please press enter to continue with the program !\" &lt;&lt; endl;\n    cin.get();\n    cout &lt;&lt; \"enter\" &lt;&lt; endl;\n    unsigned short int counter = 0x00; // ein zykluscounter - z\u00e4hlt zeit bis zum n\u00e4chsten unsigned short interrupt....\n    unsigned short int opCode = 0;\n    //##########################################################   main loop\n    c8.setPC(0x200); // starte mit dem PC auf Adresse 0x200 !\n    for (int i = 0; i &lt; testCartridge.getOpcodeLength(); i++) {\n        // opCOde is a unsigned short int ( 16 Bit ) the memory is just 8 Bit ! so please make some bit-amipulation: executableOpcode=(opcode1 &lt;&lt;8) | (opcode2)\n        opCode = ((unsigned short int) ((c8.getMemAtPC() &amp; (0xff))) &lt;&lt; 8);\n        c8.incrementPCCounter(1); // increment PC\n        opCode = opCode | (((unsigned short int) (c8.getMemAtPC() &amp; (0xff))));\n        c8.incrementPCCounter(1); // increment PC -- for the next round\n        c8.dissembler(opCode); // so if the opcode variable is fille with 2 Bytes please run the dissembler !\n        cout &lt;&lt; \"\\ncurrent pc: 0x\" &lt;&lt; hex &lt;&lt; c8.getPC();\n        //      cout &lt;&lt; \", the read out OpCode is:0x\" &lt;&lt; hex &lt;&lt; opCode; // show opcode.\n        printf(\" the read OpCode is: 0x%04x\", opCode);\n        cin.get();\n        // man muss bei den Befehlen unterscheiden:  befehle fangen mit einer fixen Zahl an und haben dann variablen!\n        // man muss deswegen zuerst schauen welche zahl am Anfang steht oder , man muss nach einer Zahlenkombinatuon suchen\n        //Befehle: http://devernay.free.fr/hacks/chip8/C8TECH10.HTM\n        //Hex to ASCII converter : https://www.rapidtables.com/convert/number/hex-to-ascii.html\n    }\n    return 0;\n}\n/*\n *\n All instructions are 2 bytes long and are stored most-significant-byte first.\n In memory, the first byte of each instruction should be located at an even addresses.\n 3.1 - Standard Chip-8 Instructions\n 00E0 - CLS\n 00EE - RET\n 0nnn - SYS addr\n 1nnn - JP addr\n 2nnn - CALL addr\n 3xkk - SE Vx, byte\n 4xkk - SNE Vx, byte\n 5xy0 - SE Vx, Vy\n 6xkk - LD Vx, byte\n 7xkk - ADD Vx, byte\n 8xy0 - LD Vx, Vy\n 8xy1 - OR Vx, Vy\n 8xy2 - AND Vx, Vy\n 8xy3 - XOR Vx, Vy\n 8xy4 - ADD Vx, Vy\n 8xy5 - SUB Vx, Vy\n 8xy6 - SHR Vx {, Vy}\n 8xy7 - SUBN Vx, Vy\n 8xyE - SHL Vx {, Vy}\n 9xy0 - SNE Vx, Vy\n Annn - LD I, addr\n Bnnn - JP V0, addr\n Cxkk - RND Vx, byte\n Dxyn - DRW Vx, Vy, nibble\n Ex9E - SKP Vx\n ExA1 - SKNP Vx\n Fx07 - LD Vx, DT\n Fx0A - LD Vx, K\n Fx15 - LD DT, Vx\n Fx18 - LD ST, Vx\n Fx1E - ADD I, Vx\n Fx29 - LD F, Vx\n Fx33 - LD B, Vx\n Fx55 - LD [I], Vx\n Fx65 - LD Vx, [I]\n 3.2 - Super Chip-48 Instructions\n 00Cn - SCD nibble\n 00FB - SCR\n 00FC - SCL\n 00FD - EXIT\n 00FE - LOW\n 00FF - HIGH\n Dxy0 - DRW Vx, Vy, 0\n Fx30 - LD HF, Vx\n Fx75 - LD R, Vx\n Fx85 - LD Vx, R\n * */\n</code></pre>\n"}, {"tags": ["c++", "graph", "depth-first-search"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1574888162, "post_id": 59078192, "comment_id": 104393698, "body": "Unrelated: <code>adj = new list&lt;int&gt;[V];</code> is a bad idea. You almost never want to dynamically allocate a <code>list</code> or any other library container. They exist in large part to eliminate the need for such memory management. Automatically allocate the <code>list</code> and let it handle things as you add and remove items. Similarly there is no need for <code>forwardPath = new int[V];</code> when <code>std::vector</code> is available. forwardPath as a global variable is a bad idea as well. You can only safely have one <code>Graph</code> if it&#39;s global. This should probably be a local <code>vector</code> returned from the function that computes the path."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1574888264, "post_id": 59078192, "comment_id": 104393747, "body": "Answer the question &quot;How do you distinguish an inbound edge from an outbound edge?&quot; and you&#39;ll have your solution."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1574890077, "post_id": 59078192, "comment_id": 104394414, "body": "<code>bool *visited = new bool[V];</code> -- Memory leak.  You could have just used <code>std::vector&lt;bool&gt; visited(V)</code>;"}], "owner": {"reputation": 28, "user_id": 12008009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0dc8f9655a12b495db199a162575888?s=128&d=identicon&r=PG", "display_name": "Emrah Sariboz", "link": "https://stackoverflow.com/users/12008009/emrah-sariboz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574955122, "creation_date": 1574887598, "last_edit_date": 1574955122, "question_id": 59078192, "link": "https://stackoverflow.com/questions/59078192/forward-path-for-each-vertex", "title": "Forward Path for each vertex", "body": "<p>A <strong>forward path</strong> from vertex v is a path that ends in a sink node. Write an O(n) algorithm to detect number of forward path for each vertex.</p>\n\n<p><strong>The logic I can think of</strong></p>\n\n<p>I created an array with the total number of vertexes and initialized them o zero.</p>\n\n<p>Right before the DFS explore, I tried to write</p>\n\n<pre><code> if(v has no outgoing edge)\n       forwardPath[v] += 1\n</code></pre>\n\n<p>However, I am not really sure how I can implement the if statement. </p>\n\n<p><strong>What I did</strong></p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;list&gt;\nusing namespace std;\n\n// Graph class represents a directed graph\n// using adjacency list representation\nstatic int *forwardPath;\nclass Graph\n{\npublic:\n    int V;    // No. of vertices\n\n    // Pointer to an array containing\n    // adjacency lists\n    list&lt;int&gt; *adj;\n\n    // A recursive function used by DFS\n    void DFSUtil(int v, bool visited[]);\npublic:\n    Graph(int V);   // Constructor\n\n    // function to add an edge to graph\n    void addEdge(int v, int w);\n\n    // DFS traversal of the vertices\n    // reachable from v\n    void DFS(int v);\n\n    void printGraph(int V);\n};\n\nGraph::Graph(int V)\n{\n    this-&gt;V = V;\n    adj = new list&lt;int&gt;[V];\n    forwardPath = new int[V];\n    for(int i=0; i&lt;V; i++){\n        forwardPath[i] = 0;\n    }\n}\n\nvoid Graph::addEdge(int v, int w)\n{\n    adj[v].push_back(w); // Add w to v\u2019s list.\n}\n\nvoid Graph::DFSUtil(int v, bool visited[])\n{\n    // Mark the current node as visited and\n    // print it\n\n    visited[v] = true;\n\n    cout &lt;&lt; v &lt;&lt; \" \";\n\n    // Recur for all the vertices adjacent\n    // to this vertex\n    list&lt;int&gt;::iterator i;\n    for (i = adj[v].begin(); i != adj[v].end(); ++i)\n        if (!visited[*i]){\n            forwardPath[v] += 1;\n            DFSUtil(*i, visited);\n        }\n}\n\n// DFS traversal of the vertices reachable from v.\n// It uses recursive DFSUtil()\nvoid Graph::DFS(int v)\n{\n    // Mark all the vertices as not visited\n    bool *visited = new bool[V];\n    for (int i = 0; i &lt; V; i++)\n        visited[i] = false;\n\n    // Call the recursive helper function\n    // to print DFS traversal\n    DFSUtil(v, visited);\n}\n\nvoid printForwardPath(){\n    for(int i=0; i&lt;5; i++){\n        cout&lt;&lt;forwardPath[i]&lt;&lt; \" \";\n    }\n\n    cout&lt;&lt;endl;\n}\n\nvoid Graph:: printGraph(int V){\n    list&lt;int&gt; :: iterator it;\n    for(int i=0; i&lt;V; i++){\n        cout&lt;&lt;i &lt;&lt;\"--&gt;\";\n        for(int node:adj[i])\n            cout&lt;&lt;node&lt;&lt;\",\";\n        cout &lt;&lt; endl;\n    }\n}\n\n// Driver code\nint main()\n{\n    // Create a graph given in the above diagram\n    Graph g(6);\n    g.addEdge(0, 1);\n    g.addEdge(0, 2);\n    g.addEdge(2, 3);\n    g.addEdge(2, 5);\n    g.addEdge(3, 4);\n\n    g.printGraph(6);\n\n    cout&lt;&lt;\"BELOW IS DFS \"&lt;&lt;endl;\n\n    cout&lt;&lt;endl;\n\n    cout &lt;&lt; \"Following is Depth First Traversal\"\n            \" (starting from vertex 0) \\n\";\n    g.DFS(0);\n    cout&lt;&lt;endl;\n\n    cout&lt;&lt;\"**********\"&lt;&lt;endl;\n\n    cout &lt;&lt; \"Number of forward path\\n\"\n            \"in the graph \\n\";\n\n    printForwardPath();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers", "reference", "copy-constructor", "move-constructor"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1574887519, "post_id": 59078134, "comment_id": 104393439, "body": "why do you use pointers everywhere? In your code there is no obvious reason for using a single pointer"}, {"owner": {"reputation": 3596, "user_id": 1753435, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b81cf3b8c8432e0bcac7322120a09b56?s=128&d=identicon&r=PG", "display_name": "andreee", "link": "https://stackoverflow.com/users/1753435/andreee"}, "edited": false, "score": 0, "creation_date": 1574887550, "post_id": 59078134, "comment_id": 104393450, "body": "If you&#39;ve just begun learning C++, please learn &quot;proper&quot; C++ and do not use raw pointers (not at this point in time)! Also avoid rvalue references <code>&amp;&amp;</code> if you don&#39;t know what they do! I suggest you change your tutorial/teacher/learning resource as quick as possible!"}, {"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 1, "creation_date": 1574887596, "post_id": 59078134, "comment_id": 104393475, "body": "Is there a reason why you are dynamically allocating everything?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1574887611, "post_id": 59078134, "comment_id": 104393481, "body": "Recommended reading: <a href=\"https://stackoverflow.com/questions/6500313/why-should-c-programmers-minimize-use-of-new\">Why should C++ programmers minimize use of &#39;new&#39;?</a>"}, {"owner": {"reputation": 3596, "user_id": 1753435, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b81cf3b8c8432e0bcac7322120a09b56?s=128&d=identicon&r=PG", "display_name": "andreee", "link": "https://stackoverflow.com/users/1753435/andreee"}, "edited": false, "score": 0, "creation_date": 1574887668, "post_id": 59078134, "comment_id": 104393506, "body": "FWIW, I really support this: <a href=\"https://www.youtube.com/watch?v=YnWhqhNdYyk\" rel=\"nofollow noreferrer\">youtube.com/watch?v=YnWhqhNdYyk</a>"}, {"owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "edited": false, "score": 2, "creation_date": 1574887674, "post_id": 59078134, "comment_id": 104393509, "body": "Use <code>&amp;</code> in range-based for."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1574887798, "post_id": 59078134, "comment_id": 104393555, "body": "Also recommended: <a href=\"https://stackoverflow.com/questions/228783/what-are-the-rules-about-using-an-underscore-in-a-c-identifier\">What are the rules about using an underscore in a C++ identifier?</a>. It&#39;s rare that an identifier like <code>_MOVIES_H_</code> will cause you problems, but when it does, the error messages and program behaviour are utterly bizarre."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 1, "creation_date": 1574888797, "post_id": 59078134, "comment_id": 104393972, "body": "Side note: your move constructor is wrong, if I&#39;m not mistaken. It leaks memory."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1574888859, "post_id": 59078134, "comment_id": 104393985, "body": "Also, don&#39;t use pointers unless completely necessary. It will make your life a lot easier."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1574888899, "post_id": 59078134, "comment_id": 104394004, "body": "Your move constructor has to call an allocation function three times (because it invokes <code>Movie(*source.name, *source.rating, *source.watched)</code>). Nothing has actually been moved, everything has been copied, defeating the entire point of using pointers."}, {"owner": {"reputation": 13, "user_id": 12448192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d8229200a7e32d8fe11a91d7c5cf82c?s=128&d=identicon&r=PG&f=1", "display_name": "DarkSideOfTheMoon", "link": "https://stackoverflow.com/users/12448192/darksideofthemoon"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1574890651, "post_id": 59078134, "comment_id": 104394641, "body": "@formerlyknownas_463035818 I was under the impression for non-primative types pointers should be used? as it is more efficient to pass the pointer than to copy the value?"}, {"owner": {"reputation": 13, "user_id": 12448192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d8229200a7e32d8fe11a91d7c5cf82c?s=128&d=identicon&r=PG&f=1", "display_name": "DarkSideOfTheMoon", "link": "https://stackoverflow.com/users/12448192/darksideofthemoon"}, "reply_to_user": {"reputation": 3596, "user_id": 1753435, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b81cf3b8c8432e0bcac7322120a09b56?s=128&d=identicon&r=PG", "display_name": "andreee", "link": "https://stackoverflow.com/users/1753435/andreee"}, "edited": false, "score": 0, "creation_date": 1574890799, "post_id": 59078134, "comment_id": 104394690, "body": "@andreee thanks for the advice! I&#39;m actually currently doing a course, I know the lectures on smart pointers are coming up, but I guess they&#39;ve decided to teach raw pointers first. I&#39;ve only used rvalue references for my move constructor here, is my implementation incorrect? or is it that these shouldn&#39;t be used and am being taught outdated concepts?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1574890862, "post_id": 59078134, "comment_id": 104394716, "body": "thats only partly correct, but to keep it simple: This is wrong. Especially for your members there is no point in using pointers. When you want to avoid copies you pass references around"}, {"owner": {"reputation": 13, "user_id": 12448192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d8229200a7e32d8fe11a91d7c5cf82c?s=128&d=identicon&r=PG&f=1", "display_name": "DarkSideOfTheMoon", "link": "https://stackoverflow.com/users/12448192/darksideofthemoon"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1574890992, "post_id": 59078134, "comment_id": 104394749, "body": "@user4581301 interesting thanks for the link. I&#39;ve been taught that I should always define my header files <i>CLASS_H</i> and that it&#39;s common practice"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1574893351, "post_id": 59078134, "comment_id": 104395527, "body": "<code>CLASS_H</code> is fine. <code>_CLASS_H</code> is not. Violates the no <code>_&lt;capital letter&gt;</code> prefix at any scope rule (and the <code>_</code> prefix at file scope rule, not that it matters)."}, {"owner": {"reputation": 3596, "user_id": 1753435, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b81cf3b8c8432e0bcac7322120a09b56?s=128&d=identicon&r=PG", "display_name": "andreee", "link": "https://stackoverflow.com/users/1753435/andreee"}, "edited": false, "score": 0, "creation_date": 1574919518, "post_id": 59078134, "comment_id": 104401144, "body": "I would say that the resources are outdates. And in any case, I wouldn&#39;t consider rvalue references a topic for a beginner&#39;s C++ introduction..."}], "answers": [{"tags": [], "owner": {"reputation": 191, "user_id": 7322284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ah4Ex.jpg?s=128&g=1", "display_name": "Saisai3396", "link": "https://stackoverflow.com/users/7322284/saisai3396"}, "is_accepted": true, "score": 3, "last_activity_date": 1574888362, "creation_date": 1574888362, "answer_id": 59078346, "question_id": 59078134, "link": "https://stackoverflow.com/questions/59078134/c-updating-value-in-pointer-gets-overridden/59078346#59078346", "title": "C++ - Updating value in pointer gets overridden", "body": "<p>Change<code>for(auto movie : *movies)</code>  to <code>for(auto&amp; movie : *movies)</code> to update the original movie objects. Otherwise, you're only updating copies of the movie objects. </p>\n"}], "owner": {"reputation": 13, "user_id": 12448192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d8229200a7e32d8fe11a91d7c5cf82c?s=128&d=identicon&r=PG&f=1", "display_name": "DarkSideOfTheMoon", "link": "https://stackoverflow.com/users/12448192/darksideofthemoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 59078346, "answer_count": 1, "score": 1, "last_activity_date": 1574888362, "creation_date": 1574887328, "question_id": 59078134, "link": "https://stackoverflow.com/questions/59078134/c-updating-value-in-pointer-gets-overridden", "title": "C++ - Updating value in pointer gets overridden", "body": "<p>I've recently begun learning C++ and I'm having some trouble updating a pointer in my <code>Movie</code> class. I've got a feeling I have an issue somewhere in my Move/Copy constructors but have been trying to solve this issue for hours, swapping pointers to references to values and finally coming here for help.</p>\n\n<p>I have a class <code>Movie</code>, which contains a string name, string rating and int watched member variables. Another class <code>Movies</code>, holds a vector of the movies. On movie, my method <code>increment_watched</code> is supposed to increment the int watched by one, the value <em>does</em> get incremented but it seems like the value is not saved. The <code>display_all_movies</code> method in Movies, which simply displays the movies that it stores holds the old value for watched. I know the issue is probably something really small but I haven't been able to work out why the value isn't being saved.</p>\n\n<p>If someone could explain why the pointer value seems to be getting overridden I'd appreciate it greatly. Thanks in advance!</p>\n\n<p>Code is below, there is some debug couts in there.</p>\n\n<p>Movie.h</p>\n\n<pre><code>#ifndef _MOVIE_H_\n#define _MOVIE_H_\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nclass Movie {\nprivate:\n    std::string *name;\n    std::string *rating;\n    int *watched;\npublic:\n    std::string get_name();\n    std::string get_rating();\n    int get_watched();\n    void increment_watched();\n    Movie(std::string name, std::string rating, int watched_val); // normal constructor\n    Movie(const Movie &amp;source); // copy constructor\n    Movie(Movie &amp;&amp;source); // move constructor\n    ~Movie();\n\n};\n\n#endif // _MOVIE_H_\n</code></pre>\n\n<p>Movie.cpp</p>\n\n<pre><code>#include \"Movie.h\"\n\nstd::string Movie::get_name() {\n    return *name;\n}\n\nstd::string Movie::get_rating() {\n    return *rating;\n}\n\nint Movie::get_watched() {\n    return *watched;\n}\n\nvoid Movie::increment_watched() {\n    std::cout &lt;&lt; *watched &lt;&lt; std::endl;\n    (*watched)++; // TODO FIX!\n    std::cout &lt;&lt; *watched &lt;&lt; std::endl;\n}\n\nMovie::Movie(std::string name, std::string rating, int watched_val) \n    : name{nullptr}, rating{nullptr}, watched{nullptr}{   \n    std::cout &lt;&lt; \"Creating movie \" &lt;&lt; watched_val &lt;&lt; \" with normal constructor\" &lt;&lt; std::endl; \n    this-&gt;name = new std::string{name};\n    this-&gt;rating = new std::string{rating};\n    this-&gt;watched = new int{watched_val};\n\n}\n\nMovie::Movie(const Movie &amp;source) \n    : Movie(*source.name, *source.rating, *source.watched) {\n        std::cout &lt;&lt; \"Creating movie \" &lt;&lt; *source.watched &lt;&lt; \" with copy constructor\" &lt;&lt; std::endl; \n\n}\n\nMovie::Movie(Movie &amp;&amp;source)\n    : Movie(*source.name, *source.rating, *source.watched) {\n        std::cout &lt;&lt; \"Creating movie \" &lt;&lt; *source.watched &lt;&lt; \" with move constructor\" &lt;&lt; std::endl; \n        source.name = nullptr;\n        source.rating = nullptr;\n        source.watched = nullptr;\n}\n\nMovie::~Movie() {\n        delete name;\n        delete rating;\n        delete watched;\n}\n</code></pre>\n\n<p>Movies.h</p>\n\n<pre><code>#ifndef _MOVIES_H_\n#define _MOVIES_H_\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include \"Movie.h\"\n\nclass Movies {\nprivate:\n    static int count;\n    std::vector&lt;Movie&gt; *movies;\npublic:\n    void add_movie(std::string &amp;&amp;name, std::string &amp;&amp;rating, int &amp;&amp;watch);\n    void increment_movie_count(std::string &amp;&amp;name);\n    void display_all_movies();\n    void count_movies();\n    Movies();\n    Movies(const Movie &amp;source); // copy constructor\n    Movies(Movie &amp;&amp;source); // move constructor\n    ~Movies();\n\n};\n\n#endif // _MOVIES_H_\n</code></pre>\n\n<p>Movies.cpp</p>\n\n<pre><code>#include \"Movies.h\"\n\nint Movies::count = 0;\n\nvoid Movies::add_movie(std::string &amp;&amp;name, std::string &amp;&amp;rating, int &amp;&amp;watch) {\n    bool contains {false};\n\n    for(auto movie : *movies) {\n        if(movie.get_name() == name) {\n            contains = true;\n        }\n    }\n    if(!contains) {\n        movies-&gt;push_back(Movie{name, rating, watch});\n        count++;\n    }\n}\n\nvoid Movies::increment_movie_count(std::string &amp;&amp;name) {\n    for(auto movie : *movies) {\n        if(movie.get_name() == name) {\n            movie.increment_watched();\n        }\n    }\n\n}\n\nvoid Movies::display_all_movies() {\n    for(auto movie : *movies) {\n        std::cout &lt;&lt; \"Title \" &lt;&lt; movie.get_name() &lt;&lt; \" Rating \" &lt;&lt; movie.get_rating() &lt;&lt; \" Watched \" &lt;&lt; movie.get_watched() &lt;&lt; std::endl;\n    }\n}\n\nvoid Movies::count_movies() {\n    std::cout &lt;&lt; \"There are \" &lt;&lt; count &lt;&lt; \" movies \" &lt;&lt; std::endl; \n}\n\nMovies::Movies() {\n    movies = new std::vector&lt;Movie&gt;{};\n}\n\nMovies::~Movies() {\n    delete movies;\n}\n</code></pre>\n\n<p>And finally main.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Movies.h\"\n\nusing std::cout;\nusing std::endl;\n\nint main() {\n\n    Movies *my_movies;\n\n\n    my_movies = new Movies();\n\n    (*my_movies).count_movies();\n\n    my_movies-&gt;add_movie(\"Big\", \"PG-13\", 2);\n    my_movies-&gt;increment_movie_count(\"Big\");\n\n    my_movies-&gt;display_all_movies();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "svg", "drawrectangle"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1574887251, "post_id": 59078077, "comment_id": 104393332, "body": "Too many possibilities on how best to do this and too little information to narrow down those possibilities, but the basis for the solutions is all the same: Convert the given coordinates to the top left corner and then call the same function."}], "answers": [{"tags": [], "owner": {"reputation": 191, "user_id": 7322284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ah4Ex.jpg?s=128&g=1", "display_name": "Saisai3396", "link": "https://stackoverflow.com/users/7322284/saisai3396"}, "is_accepted": true, "score": 0, "last_activity_date": 1574887576, "creation_date": 1574887576, "answer_id": 59078188, "question_id": 59078077, "link": "https://stackoverflow.com/questions/59078077/draw-rectangles-with-any-defined-point/59078188#59078188", "title": "Draw Rectangles with any defined point", "body": "<p>Transform all the points in question to top left point and use the same code. For transforming for each point type you can use a switch, if/else or function calls. For example if it is a mid point or top right point, you can define them as follows </p>\n\n<pre><code>void Svgfile::addRectangleTopRight(int x1,int y1,int width,int height, std::string color)\n{\n   addRectangle(x1-width, x2, width, height, color) ;       \n}\n\nvoid Svgfile::addRectangleMid(int x1,int y1,int width,int height, std::string color)\n{\n   addRectangle(x1-width/2, x2-height/2, width, height, color) ;       \n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12448225, "user_type": "registered", "profile_image": "https://graph.facebook.com/946561302396889/picture?type=large", "display_name": "Subeshan Koneswaran", "link": "https://stackoverflow.com/users/12448225/subeshan-koneswaran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 59078188, "answer_count": 1, "score": -2, "last_activity_date": 1574887576, "creation_date": 1574887056, "question_id": 59078077, "link": "https://stackoverflow.com/questions/59078077/draw-rectangles-with-any-defined-point", "title": "Draw Rectangles with any defined point", "body": "<p>hello I'm in engineering student and I'm currently working on C++ project. I need to draw a couple of rectangles with this function but I can only draw them by defining the same top left corner. I'd like to draw rectangles by defining one of the 9 points of the recangle ( middle center, middle left , middle right, top right , top left, Bottom center\u2026).\ncould you please help me ?</p>\n\n<pre><code>void Svgfile::addRectangle(int x1,int y1,int width,int height, std::string color)\n{\n          m_ostrm &lt;&lt; \"&lt;polygon points=\\\" \"\n            &lt;&lt; x1 &lt;&lt; \",\" &lt;&lt; y1 &lt;&lt; \" \"\n            &lt;&lt; x1+width &lt;&lt; \",\" &lt;&lt; y1 &lt;&lt; \" \"\n            &lt;&lt; x1+width &lt;&lt; \",\" &lt;&lt; y1+height &lt;&lt; \" \"\n            &lt;&lt; x1 &lt;&lt; \",\" &lt;&lt; y1+height &lt;&lt; \" \"\n            &lt;&lt; x1 &lt;&lt; \",\" &lt;&lt; y1\n            &lt;&lt; \"\\\" style=\\\"fill:\" &lt;&lt; color\n            &lt;&lt; \"\\\" /&gt;\\n\";\n}\n\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-code", "g++", "mingw"], "answers": [{"tags": [], "owner": {"reputation": 605, "user_id": 7128840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RdNYI.jpg?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/7128840/adam"}, "is_accepted": false, "score": 0, "last_activity_date": 1574888567, "creation_date": 1574888567, "answer_id": 59078378, "question_id": 59077986, "link": "https://stackoverflow.com/questions/59077986/vscode-terminal-giving-output-g-is-not-recognized-as-an-internal-or-externa/59078378#59078378", "title": "VScode Terminal giving output: &#39;g++&#39; is not recognized as an internal or external command, operable program or batch file", "body": "<p>Replace</p>\n\n<pre><code>    \"compilerPath\": \"C:\\\\MinGW\\\\bin\\\\gcc.exe\",\n</code></pre>\n\n<p>With</p>\n\n<pre><code>    \"compilerPath\": \"C:\\\\MinGW\\\\bin\\\\g++.exe\",\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 11076262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d953374a03243285613b388d31afc58?s=128&d=identicon&r=PG&f=1", "display_name": "Hudie", "link": "https://stackoverflow.com/users/11076262/hudie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 462, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574888567, "creation_date": 1574886563, "question_id": 59077986, "link": "https://stackoverflow.com/questions/59077986/vscode-terminal-giving-output-g-is-not-recognized-as-an-internal-or-externa", "title": "VScode Terminal giving output: &#39;g++&#39; is not recognized as an internal or external command, operable program or batch file", "body": "<p>I first installed the Mingw from <a href=\"https://osdn.net/projects/mingw/downloads/68260/mingw-get-setup.exe/\" rel=\"nofollow noreferrer\">https://osdn.net/projects/mingw/downloads/68260/mingw-get-setup.exe/</a> and downloaded all the packages and set C:\\MinGW\\bin as a new path in my Environmental System Variables. I open my command prompt and type \"g++ --version\" which gives me the output \"g++ (MinGW.org GCC-8.2.0-5) 8.2.0\" So I believe this means so far I'm follow the correct path. </p>\n\n<p>My problem arises while I'm in VSCode trying to compile a basic hello world file. In the terminal I input \"g++ main.cpp\" however this gets me the output \"'g++' is not recognized as an internal or external command,\noperable program or batch file.\" Does this have to do with how one of my .json files are set up? I've included the following c_cpp_poperties, launch, and task code.</p>\n\n<p>Thank you.</p>\n\n<p>c_cpp_properties.json:</p>\n\n<pre><code>{\n\"configurations\": [\n    {\n        \"name\": \"Win32\",\n        \"includePath\": [\n            \"${workspaceFolder}/**\"\n        ],\n        \"defines\": [\n            \"_DEBUG\",\n            \"UNICODE\",\n            \"_UNICODE\"\n        ],\n        \"compilerPath\": \"C:\\\\MinGW\\\\bin\\\\gcc.exe\",\n        \"cStandard\": \"c11\",\n        \"cppStandard\": \"c++17\",\n        \"intelliSenseMode\": \"gcc-x64\"\n    }\n],\n\"version\": 4}\n</code></pre>\n\n<p>launch.json:</p>\n\n<pre><code>{\n\"version\": \"0.2.0\",\n\"configurations\": [\n    {\n        \"name\": \"C++ Compiler\",\n        \"type\": \"cppvsdbg\",\n        \"request\": \"launch\",\n        \"program\": \"C:/MinGW/bin\",\n        \"args\": [],\n        \"stopAtEntry\": false,\n        \"cwd\": \"${workspaceFolder}\",\n        \"environment\": [],\n        \"externalConsole\": true\n    },\n]}\n</code></pre>\n\n<p>task.json:</p>\n\n<pre><code>{\n\"version\": \"2.0.0\",\n\"tasks\": [\n  {\n    \"label\": \"build hello world\",\n    \"type\": \"shell\",\n    \"command\": \"C:/MinGW/bin/g++\",\n    \"args\": [\n      \"-g\",\n      \"-o\",\n      \"helloworld\",\n      \"helloworld.cpp\"\n    ],\n    \"group\": {\n      \"kind\": \"build\",\n      \"isDefault\": true\n    }\n  }\n]}\n</code></pre>\n"}, {"tags": ["c++", "windows", "winapi"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12448163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5a38a3fb73ecd1acd950418c368668f?s=128&d=identicon&r=PG&f=1", "display_name": "Schmleh", "link": "https://stackoverflow.com/users/12448163/schmleh"}, "edited": false, "score": 0, "creation_date": 1574895492, "post_id": 59078144, "comment_id": 104396138, "body": "I&#39;ve downloaded gstreamer, but I&#39;m not really sure what to include or where the files are, or if I need to put it in $PATH. I&#39;m also not sure where I would put this code. Just in the WndProc?"}, {"owner": {"reputation": 179, "user_id": 717599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9155f436265f2c7f84a670b23c3f9bf2?s=128&d=identicon&r=PG", "display_name": "bialy", "link": "https://stackoverflow.com/users/717599/bialy"}, "reply_to_user": {"reputation": 11, "user_id": 12448163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5a38a3fb73ecd1acd950418c368668f?s=128&d=identicon&r=PG&f=1", "display_name": "Schmleh", "link": "https://stackoverflow.com/users/12448163/schmleh"}, "edited": false, "score": 0, "creation_date": 1574926658, "post_id": 59078144, "comment_id": 104403595, "body": "@Schmleh You can use example I created here <a href=\"https://github.com/bialasjaroslaw/gstreamer_overlay\" rel=\"nofollow noreferrer\">github.com/bialasjaroslaw/gstreamer_overlay</a>"}], "tags": [], "owner": {"reputation": 179, "user_id": 717599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9155f436265f2c7f84a670b23c3f9bf2?s=128&d=identicon&r=PG", "display_name": "bialy", "link": "https://stackoverflow.com/users/717599/bialy"}, "is_accepted": false, "score": 0, "last_activity_date": 1574887749, "last_edit_date": 1574887749, "creation_date": 1574887359, "answer_id": 59078144, "question_id": 59077956, "link": "https://stackoverflow.com/questions/59077956/streaming-a-webm-video-from-a-url-into-a-c-windows-h-application/59078144#59078144", "title": "Streaming a webm video from a URL into a C++ windows.h application", "body": "<p>Use gstreamer with uridecodebin (you need to set uri property). It might be needed to add extra autovideoconvert and/or videoscale element between src and sink.</p>\n\n<pre><code>GstElement *pipeline = gst_pipeline_new (\"xvoverlay\");\nGstElement *src = gst_element_factory_make (\"uridecodebin\", NULL);\nGstElement *sink = gst_element_factory_make (\"d3dvideosink\", NULL);\n\ng_object_set (G_OBJECT (src), \"uri\",\"some_url\", NULL);\n\ngst_bin_add_many (GST_BIN (pipeline), src, sink, NULL);\ngst_element_link (src, sink);\ngst_video_overlay_set_window_handle (GST_VIDEO_OVERLAY (sink), (guintptr)hwnd);\nGstStateChangeReturn sret = gst_element_set_state (pipeline,\n  GST_STATE_PLAYING);\n</code></pre>\n\n<p>If you have gstreamer installed test your setup using:</p>\n\n<pre><code>gst-launch-1.0 uridecodebin uri=\"http://dl5.webmfiles.org/big-buck-bunny_trailer.webm\" ! d3dvideosink\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6168, "user_id": 10611792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r727s.jpg?s=128&g=1", "display_name": "Drake Wu", "link": "https://stackoverflow.com/users/10611792/drake-wu"}, "edited": false, "score": 0, "creation_date": 1575366080, "post_id": 59082996, "comment_id": 104532639, "body": "Did this help? Please feel free to contact me if there is any issue."}], "tags": [], "owner": {"reputation": 6168, "user_id": 10611792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r727s.jpg?s=128&g=1", "display_name": "Drake Wu", "link": "https://stackoverflow.com/users/10611792/drake-wu"}, "is_accepted": false, "score": 1, "last_activity_date": 1574922930, "creation_date": 1574922930, "answer_id": 59082996, "question_id": 59077956, "link": "https://stackoverflow.com/questions/59077956/streaming-a-webm-video-from-a-url-into-a-c-windows-h-application/59082996#59082996", "title": "Streaming a webm video from a URL into a C++ windows.h application", "body": "<p>This <a href=\"https://github.com/microsoft/Windows-classic-samples/tree/master/Samples/Win7Samples/multimedia/mediafoundation/SimplePlay\" rel=\"nofollow noreferrer\">sample</a> used <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/mfplay/nf-mfplay-imfpmediaplayer-createmediaitemfromurl\" rel=\"nofollow noreferrer\"><code>IMFPMediaPlayer::CreateMediaItemFromURL</code></a>, You can directly pass the URL to the function <a href=\"https://github.com/microsoft/Windows-classic-samples/blob/master/Samples/Win7Samples/multimedia/mediafoundation/SimplePlay/winmain.cpp#L452\" rel=\"nofollow noreferrer\"><code>PlayMediaFile</code></a>, like:</p>\n\n<pre><code>WCHAR uri[] = L\"http://dl5.webmfiles.org/big-buck-bunny_trailer.webm\";\nhr = PlayMediaFile(hwnd, uri);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12448163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5a38a3fb73ecd1acd950418c368668f?s=128&d=identicon&r=PG&f=1", "display_name": "Schmleh", "link": "https://stackoverflow.com/users/12448163/schmleh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1574922930, "creation_date": 1574886389, "last_edit_date": 1574887218, "question_id": 59077956, "link": "https://stackoverflow.com/questions/59077956/streaming-a-webm-video-from-a-url-into-a-c-windows-h-application", "title": "Streaming a webm video from a URL into a C++ windows.h application", "body": "<p>I'm using C++ to make my own windows application. There's a .webm video I'd like to play within this application, but I'd like to play it from a URL, as opposed to loading it in from the same directory that I'd put my .exe in. I'm running Windows 10, and just using Emacs and g++ to write/compile.</p>\n\n<p>Does anyone know how I can accomplish this? What include's do I need, is it possible, etc.?</p>\n\n<p>Note: the webm video can be converted to mp4 as well.</p>\n\n<p>For clarification, by \"windows application\", I mean one of these:</p>\n\n<pre><code>HWND hwnd = CreateWindowEx(0, CLASS_NAME, L\"WindowName\", WS_OVERLAPPEDWINDOW, CW_USEDEFAULT,  CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, NULL, NULL, hInstance, NULL);\n</code></pre>\n\n<p>I'd like to keep using this, since I can make a nice, borderless window with it!</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1574886300, "post_id": 59077917, "comment_id": 104392983, "body": "please include code in the question."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1574886354, "post_id": 59077917, "comment_id": 104393008, "body": "...and as you already have a solution it is unclear what is your question"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1574886388, "post_id": 59077917, "comment_id": 104393029, "body": "You attempt to <code>pop_back()</code> in <code>Calculate()</code>, which is declared as <code>const</code>. You can&#39;t modify the current object from a <code>const</code> method."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1574887004, "post_id": 59077917, "comment_id": 104393243, "body": "Unrelated. Prefer <a href=\"https://en.wikipedia.org/wiki/Composition_over_inheritance\" rel=\"nofollow noreferrer\">Composition over inheritance</a>."}], "answers": [{"tags": [], "owner": {"reputation": 3596, "user_id": 1753435, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b81cf3b8c8432e0bcac7322120a09b56?s=128&d=identicon&r=PG", "display_name": "andreee", "link": "https://stackoverflow.com/users/1753435/andreee"}, "is_accepted": false, "score": 5, "last_activity_date": 1574886601, "creation_date": 1574886601, "answer_id": 59077995, "question_id": 59077917, "link": "https://stackoverflow.com/questions/59077917/stdlist-push-back-and-pop-front-giving-a-const-error/59077995#59077995", "title": "std::list push_back() and pop_front() giving a const error", "body": "<p>You're attempting to call <code>this-&gt;pop_back()</code> and <code>this-&gt;push_back()</code>, respectively, within a <code>const</code> method.</p>\n\n<p>Remove the <code>const</code> qualifier from <code>Mean::Calculate()</code> <a href=\"https://godbolt.org/z/wTxbb_\" rel=\"noreferrer\">and the code will compile</a>. </p>\n"}], "owner": {"reputation": 9, "user_id": 12448155, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDHAIPvmBql-WT7dRQgTvAMmU-tqvGvY_KxpJpz=k-s128", "display_name": "Ian McDowell", "link": "https://stackoverflow.com/users/12448155/ian-mcdowell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1574886703, "creation_date": 1574886201, "last_edit_date": 1574886703, "question_id": 59077917, "link": "https://stackoverflow.com/questions/59077917/stdlist-push-back-and-pop-front-giving-a-const-error", "title": "std::list push_back() and pop_front() giving a const error", "body": "<p>I am working on a coding project and have hit a bit of a snag. When I try to make it, I get these errors: </p>\n\n<pre><code>src/mean.cc:26:12: error: passing \u2018const csce240::Mean\u2019 as \u2018this\u2019 argument discards qualifiers [-fpermissive]\n   pop_back();\n            ^\nIn file included from /usr/include/c++/7/list:63:0,\n                 from inc/mean.h:9,\n                 from src/mean.cc:2:\n/usr/include/c++/7/bits/stl_list.h:1152:7: note:   in call to \u2018void std::__cxx11::list&lt;_Tp, _Alloc&gt;::pop_back() [with _Tp = double; _Alloc = std::allocator&lt;double&gt;]\u2019\n       pop_back() _GLIBCXX_NOEXCEPT\n       ^~~~~~~~\nsrc/mean.cc:33:29: error: passing \u2018const csce240::Mean\u2019 as \u2018this\u2019 argument discards qualifiers [-fpermissive]\n   push_front(tempList.back());\n                             ^\nIn file included from /usr/include/c++/7/list:63:0,\n                 from inc/mean.h:9,\n                 from src/mean.cc:2:\n/usr/include/c++/7/bits/stl_list.h:1067:7: note:   in call to \u2018void std::__cxx11::list&lt;_Tp, _Alloc&gt;::push_front(const value_type&amp;) [with _Tp = double; _Alloc = std::allocator&lt;double&gt;; std::__cxx11::list&lt;_Tp, _Alloc&gt;::value_type = double]\u2019\n       push_front(const value_type&amp; __x)\n       ^~~~~~~~~~\n</code></pre>\n\n<p>The closest solution I could find was to add const to the end of the function definition, however that was already in the definition to start with. Here is are the .h and .cc files:</p>\n\n<pre><code>// Copyright 2019 Ian McDowell\n#ifndef _CSCE240_HW_HW6_INC_MEAN_H //NOLINT\n#define _CSCE240_HW_HW6_INC_MEAN_H //NOLINT\n\n/* This class inherits from the Statistic class such that it may be used\n * polymorphically.\n */\n#include &lt;statistic.h&gt;\n#include &lt;list&gt;\n\nnamespace csce240 {\n\nclass Mean : public std::list&lt;double&gt;, public Statistic {\n public:\n\n  /* Stores data (datum) such than an average may be calculated.\n   * - NOTE: You do not necessarily need to store each datum.\n   */\n  void Collect(double datum);\n\n  /* Returns the mean of the data (datum) from the Collect method.\n   */\n  double Calculate() const;\n};\n\n} // namespace csce240\n\n#endif //NOLINT\n</code></pre>\n\n<p>----------------------Mean.cc-----------------------------</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// Copyright 2019 Ian McDowell\n#include &lt;mean.h&gt;\nusing std::list;\n\nnamespace csce240 {\n\nvoid Mean::Collect(double datum) {\n    push_front(datum);\n}\n\ndouble Mean::Calculate() const {\n    list&lt;double&gt; tempList;\n    int i = 0;\n    double temp;\n    double avg = 0;\n\n    while (!empty()) {\n        temp = back();\n        avg += temp;\n        tempList.push_front(temp);\n        pop_back();\n        ++i;\n    }\n\n    avg = avg / i;\n\n    while(!tempList.empty()) {\n        push_front(tempList.back());\n        tempList.pop_back();\n    }\n\n    return avg;\n}\n\n\n} // namespace csce240\n</code></pre>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 2, "creation_date": 1574886219, "post_id": 59077895, "comment_id": 104392953, "body": "<code>vect[</code> <b><code>j</code></b> <code>]</code>."}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 41, "user_id": 12433057, "user_type": "registered", "profile_image": "https://graph.facebook.com/161287011630361/picture?type=large", "display_name": "Joseph Ali", "link": "https://stackoverflow.com/users/12433057/joseph-ali"}, "edited": false, "score": 2, "creation_date": 1574886530, "post_id": 59077920, "comment_id": 104393089, "body": "@JosephAli first of all I wouldnt use such a strong word ;), but then note that the problem is not that you made a typo, this happens all the time even to experienced coders, the problem is that then you didnt do anything to diagnose what is going wrong, eg using a debugger could have helped"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 41, "user_id": 12433057, "user_type": "registered", "profile_image": "https://graph.facebook.com/161287011630361/picture?type=large", "display_name": "Joseph Ali", "link": "https://stackoverflow.com/users/12433057/joseph-ali"}, "edited": false, "score": 0, "creation_date": 1574887439, "post_id": 59077920, "comment_id": 104393407, "body": "@JosephAli Longer and more descriptive variable names also helps. <code>i</code> and <code>j</code> are traditional and thus &quot;Descriptive&quot;, but they look a lot alike and are pretty close on the keyboard, practically inviting this sort of mistake."}], "tags": [], "owner": {"reputation": 2673, "user_id": 11292489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cucr6.jpg?s=128&g=1", "display_name": "Gilles-Philippe Paill&#233;", "link": "https://stackoverflow.com/users/11292489/gilles-philippe-paill%c3%a9"}, "is_accepted": true, "score": 2, "last_activity_date": 1574886214, "creation_date": 1574886214, "answer_id": 59077920, "question_id": 59077895, "link": "https://stackoverflow.com/questions/59077895/c-vector-isnt-showing-any-values-i-inserted/59077920#59077920", "title": "c++ vector isn&#39;t showing any values i inserted", "body": "<p><code>cout&lt;&lt;vect[i];</code> should be<br>\n<code>cout&lt;&lt;vect[j];</code> since the iterator is <code>j</code>.</p>\n"}], "owner": {"reputation": 41, "user_id": 12433057, "user_type": "registered", "profile_image": "https://graph.facebook.com/161287011630361/picture?type=large", "display_name": "Joseph Ali", "link": "https://stackoverflow.com/users/12433057/joseph-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "closed_date": 1574887290, "accepted_answer_id": 59077920, "answer_count": 1, "score": -2, "last_activity_date": 1574886214, "creation_date": 1574886101, "question_id": 59077895, "link": "https://stackoverflow.com/questions/59077895/c-vector-isnt-showing-any-values-i-inserted", "closed_reason": "Not suitable for this site", "title": "c++ vector isn&#39;t showing any values i inserted", "body": "<p>So I am trying to convert string to int and then store the int into vector. But when I do that and i create a for loop to display what I have stored in the vector, all i get is 0000. here is my code:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;sstream&gt;\n#include&lt;vector&gt;\nusing namespace std;\nint main() {\nstd::string str = \"&lt;4: 3 2 1&gt;\";\nvector&lt;int&gt; vect; \nchar c;\nint found;\nsize_t i = 0;\nfor ( ; i &lt; str.length(); i++ )\n{\n    if ( isdigit(str[i]) )\n    {\n       c=str[i];\n       found = c-'0';\n       cout&lt;&lt;found&lt;&lt;endl;\n       vect.push_back(found);\n    }\n}\nfor(int j=0;j&lt;vect.size();j++)\n{\n    cout&lt;&lt;vect[i];\n}\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "gcc", "arduino", "compilation"], "comments": [{"owner": {"reputation": 1527, "user_id": 3518383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GjBCE.jpg?s=128&g=1", "display_name": "Juraj", "link": "https://stackoverflow.com/users/3518383/juraj"}, "edited": false, "score": 1, "creation_date": 1574923046, "post_id": 59077871, "comment_id": 104402268, "body": "<a href=\"https://groups.google.com/a/arduino.cc/forum/#!topic/developers/Ny82s7t11Vc\" rel=\"nofollow noreferrer\">groups.google.com/a/arduino.cc/forum/#!topic/developers/&hellip;</a>"}, {"owner": {"reputation": 157, "user_id": 11465149, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ejUuNxiWoqY/AAAAAAAAAAI/AAAAAAAABKY/y9L_jp184Ng/photo.jpg?sz=128", "display_name": "Giorgos Xou", "link": "https://stackoverflow.com/users/11465149/giorgos-xou"}, "reply_to_user": {"reputation": 1527, "user_id": 3518383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GjBCE.jpg?s=128&g=1", "display_name": "Juraj", "link": "https://stackoverflow.com/users/3518383/juraj"}, "edited": false, "score": 0, "creation_date": 1574943188, "post_id": 59077871, "comment_id": 104412166, "body": "@Juraj thanks (: ! Do you have by any Chance any idea on how I could fix this issue instead of downgrading From 7.3.0 toolchain to an older one? or a way of switching between 7.3.0 and older versions (on arduino ide)?"}], "answers": [{"tags": [], "owner": {"reputation": 1341, "user_id": 1556746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e5304b618f68709a0e74e4dcb8c4c3e?s=128&d=identicon&r=PG", "display_name": "emacs drives me nuts", "link": "https://stackoverflow.com/users/1556746/emacs-drives-me-nuts"}, "is_accepted": false, "score": 2, "last_activity_date": 1576762872, "creation_date": 1576762872, "answer_id": 59410968, "question_id": 59077871, "link": "https://stackoverflow.com/questions/59077871/programming-attiny10-with-arduino-ld-exe-errors/59410968#59410968", "title": "Programming ATtiny10 with Arduino ( &quot;ld.exe&quot; errors)", "body": "<p>The linker is using the wrong multilib.  This can happen because you are supplying the linker with the wrong options, or because the installation is broken (or both).</p>\n\n<p>First step in tracking down such issues is adding -v to the compiler driver's options (avr-gcc or avr-g++ in this case) to see which options are passed to the sub-processes.</p>\n"}], "owner": {"reputation": 157, "user_id": 11465149, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ejUuNxiWoqY/AAAAAAAAAAI/AAAAAAAABKY/y9L_jp184Ng/photo.jpg?sz=128", "display_name": "Giorgos Xou", "link": "https://stackoverflow.com/users/11465149/giorgos-xou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1605911783, "creation_date": 1574885941, "last_edit_date": 1605911783, "question_id": 59077871, "link": "https://stackoverflow.com/questions/59077871/programming-attiny10-with-arduino-ld-exe-errors", "title": "Programming ATtiny10 with Arduino ( &quot;ld.exe&quot; errors)", "body": "<h1>\ud83e\udd14 Issue</h1>\n<p>I am trying to compile a sketch in &quot;Arduino IDE 1.8.9&quot; for ATtiny10 and i am always getting these errors:</p>\n<ul>\n<li><strong>When</strong> Using <a href=\"https://github.com/vitasimek/attiny10core\" rel=\"nofollow noreferrer\"><strong>ATTiny10 Core</strong></a></li>\n</ul>\n<pre><code>&quot;C:\\\\Users\\\\gxous\\\\AppData\\\\Local\\\\Arduino15\\\\packages\\\\arduino\\\\tools\\\\avr-gcc\\\\7.3.0-atmel3.6.1-arduino5/bin/avr-gcc&quot; -w -Os -g -flto -fuse-linker-plugin -Wl,--gc-sections -mmcu=attiny10 -o &quot;C:\\\\Users\\\\gxous\\\\AppData\\\\Local\\\\Temp\\\\arduino_build_433979/testat10_nov26a.ino.elf&quot; &quot;C:\\\\Users\\\\gxous\\\\AppData\\\\Local\\\\Temp\\\\arduino_build_433979\\\\sketch\\\\testat10_nov26a.ino.cpp.o&quot; &quot;C:\\\\Users\\\\gxous\\\\AppData\\\\Local\\\\Temp\\\\arduino_build_433979/core\\\\core.a&quot; &quot;-LC:\\\\Users\\\\gxous\\\\AppData\\\\Local\\\\Temp\\\\arduino_build_433979&quot; -lm\nc:/users/gxous/appdata/local/arduino15/packages/arduino/tools/avr-gcc/7.3.0-atmel3.6.1-arduino5/bin/../lib/gcc/avr/7.3.0/../../../../avr/bin/ld.exe: cannot find crtattiny10.o: No such file or directory\n\nc:/users/gxous/appdata/local/arduino15/packages/arduino/tools/avr-gcc/7.3.0-atmel3.6.1-arduino5/bin/../lib/gcc/avr/7.3.0/../../../../avr/bin/ld.exe: skipping incompatible c:/users/gxous/appdata/local/arduino15/packages/arduino/tools/avr-gcc/7.3.0-atmel3.6.1-arduino5/bin/../lib/gcc/avr/7.3.0/../../../../avr/lib\\libm.a when searching for -lm\n\nc:/users/gxous/appdata/local/arduino15/packages/arduino/tools/avr-gcc/7.3.0-atmel3.6.1-arduino5/bin/../lib/gcc/avr/7.3.0/../../../../avr/bin/ld.exe: cannot find -lm\n\nc:/users/gxous/appdata/local/arduino15/packages/arduino/tools/avr-gcc/7.3.0-atmel3.6.1-arduino5/bin/../lib/gcc/avr/7.3.0/../../../../avr/bin/ld.exe: skipping incompatible c:/users/gxous/appdata/local/arduino15/packages/arduino/tools/avr-gcc/7.3.0-atmel3.6.1-arduino5/bin/../lib/gcc/avr/7.3.0\\libgcc.a when searching for -lgcc\n\nc:/users/gxous/appdata/local/arduino15/packages/arduino/tools/avr-gcc/7.3.0-atmel3.6.1-arduino5/bin/../lib/gcc/avr/7.3.0/../../../../avr/bin/ld.exe: cannot find -lgcc\n\nc:/users/gxous/appdata/local/arduino15/packages/arduino/tools/avr-gcc/7.3.0-atmel3.6.1-arduino5/bin/../lib/gcc/avr/7.3.0/../../../../avr/bin/ld.exe: skipping incompatible c:/users/gxous/appdata/local/arduino15/packages/arduino/tools/avr-gcc/7.3.0-atmel3.6.1-arduino5/bin/../lib/gcc/avr/7.3.0/../../../../avr/lib\\libm.a when searching for -lm\n\nc:/users/gxous/appdata/local/arduino15/packages/arduino/tools/avr-gcc/7.3.0-atmel3.6.1-arduino5/bin/../lib/gcc/avr/7.3.0/../../../../avr/bin/ld.exe: cannot find -lm\n\nc:/users/gxous/appdata/local/arduino15/packages/arduino/tools/avr-gcc/7.3.0-atmel3.6.1-arduino5/bin/../lib/gcc/avr/7.3.0/../../../../avr/bin/ld.exe: skipping incompatible c:/users/gxous/appdata/local/arduino15/packages/arduino/tools/avr-gcc/7.3.0-atmel3.6.1-arduino5/bin/../lib/gcc/avr/7.3.0/../../../../avr/lib\\libc.a when searching for -lc\n\nc:/users/gxous/appdata/local/arduino15/packages/arduino/tools/avr-gcc/7.3.0-atmel3.6.1-arduino5/bin/../lib/gcc/avr/7.3.0/../../../../avr/bin/ld.exe: cannot find -lc\n\nc:/users/gxous/appdata/local/arduino15/packages/arduino/tools/avr-gcc/7.3.0-atmel3.6.1-arduino5/bin/../lib/gcc/avr/7.3.0/../../../../avr/bin/ld.exe: cannot find -lattiny10\n\ncollect2.exe: error: ld returned 1 exit status\n\nexit status 1\nError compiling for board ATtiny10/9/5/4.\n</code></pre>\n<ul>\n<li><strong>When</strong> Using <a href=\"https://make.kosakalab.com/make/electronic-work/arduino_tpi_en/\" rel=\"nofollow noreferrer\"><strong>bitduino10</strong></a></li>\n</ul>\n<pre><code>...\nsame errors\n...\nError compiling for board ATtiny10 (bitDuino10-arduinoTPI).\n</code></pre>\n<h1>\ud83d\udccb Infos</h1>\n<ul>\n<li><a href=\"https://make.kosakalab.com/make/electronic-work/arduino_tpi_en/\" rel=\"nofollow noreferrer\">ATtiny10 Dev Environment on Arduino IDE</a></li>\n<li><em><code>&quot;file&gt;preferences&quot;</code></em></li>\n</ul>\n<pre><code>  https://kimio-kosaka.github.io/bitDuino10-arduinoTPI/package_bitDuino10-arduinoTPI_index.json\n  https://raw.githubusercontent.com/vitasimek/attiny10core/master/package_attiny10core_index.json\n</code></pre>\n<h1>\ud83d\udc9b Outro</h1>\n<p>if i wasn't informative enough about the issue, please let me know</p>\n<p>Any idea?</p>\n<p>Thanks in advance,</p>\n<p>George</p>\n<h1>UPDATE</h1>\n<p>What i actually did <em>(although not the solution you might expect)</em> , was just to install permanently an older version of Arduino IDE, as mentioned <a href=\"https://make.kosakalab.com/make/electronic-work/arduino_tpi_en/\" rel=\"nofollow noreferrer\">here</a> and used in <a href=\"https://github.com/GiorgosXou/ATtinyHearring\" rel=\"nofollow noreferrer\">my project</a> too.</p>\n"}, {"tags": ["c++", "c++14", "virtual-functions"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1574885575, "post_id": 59077794, "comment_id": 104392691, "body": "There&#39;s not enough context to say anything, so please try to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to show us. Perhaps refresh about <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a>, as well as <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1574885610, "post_id": 59077794, "comment_id": 104392708, "body": "It doesn&#39;t look like you call getTile at all, in this code. I&#39;m assuming wherever you do call it, use used a syntax that specifies which class to call it on, rather than virtual lookup."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1574885631, "post_id": 59077794, "comment_id": 104392720, "body": "Double check that in the base class, the <code>getTile()</code> method has the <code>virtual</code> keyword in its declaration, and that its signature matches the signature of your subclass-method <i>exactly</i> (including with respect to the presence/absence of a <code>const</code> keyword at the end of the signature)"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1574885811, "post_id": 59077794, "comment_id": 104392803, "body": "&quot;The calls to qDebug are not made and nothing is printed&quot; - are you sure the <code>qDebug</code> output is going where you expect it to? Your IDE may be intercepting it, it may have been redirected to a file, the output may be going to <code>std::cerr</code> and you only check <code>std::cout</code> (or vice versa). Lots of things could be happening that don&#39;t all mean that the code is not running."}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 0, "creation_date": 1574885820, "post_id": 59077794, "comment_id": 104392810, "body": "What object are you calling <code>getTile</code> on?  Could you be <a href=\"https://stackoverflow.com/questions/274626/what-is-object-slicing\">slicing</a> your original object?"}, {"owner": {"reputation": 1155, "user_id": 6449910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OvekE.jpg?s=128&g=1", "display_name": "SeSodesa", "link": "https://stackoverflow.com/users/6449910/sesodesa"}, "reply_to_user": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1574885860, "post_id": 59077794, "comment_id": 104392827, "body": "@JeremyFriesner The <code>virtual</code> keyword is there, and there is no <code>const</code> at the end of the signature. To my eyes, the declarations are exactly the same, no includign the class specifier (<code>iObjectManager</code> vs <code>ObjectManager</code>)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1574887942, "post_id": 59077794, "comment_id": 104393606, "body": "Could you add your declaration of <code>tile</code> and <code>lockObjectManager</code> along with whatever value you set them to?"}], "answers": [{"comments": [{"owner": {"reputation": 1155, "user_id": 6449910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OvekE.jpg?s=128&g=1", "display_name": "SeSodesa", "link": "https://stackoverflow.com/users/6449910/sesodesa"}, "edited": false, "score": 0, "creation_date": 1574931638, "post_id": 59077990, "comment_id": 104405893, "body": "This might be it. I&#39;ve just discovered, that my Objectmanager is destroiyed right after its initialization. For some reason my main window is not keeping it alive, even though the <code>ObjectManager</code> is set as its member variable right at the initialization of said window."}], "tags": [], "owner": {"reputation": 191, "user_id": 7322284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ah4Ex.jpg?s=128&g=1", "display_name": "Saisai3396", "link": "https://stackoverflow.com/users/7322284/saisai3396"}, "is_accepted": false, "score": 1, "last_activity_date": 1574886578, "creation_date": 1574886578, "answer_id": 59077990, "question_id": 59077794, "link": "https://stackoverflow.com/questions/59077794/why-isnt-my-implementation-of-a-virtual-function-being-called-in-this-case/59077990#59077990", "title": "Why isn&#39;t my implementation of a virtual function being called in this case?", "body": "<p>Make sure OBJECTMANAGER.lock() is returning an instance of the derived ObjectManager class. If it is returning iObjectManager(), it will call its base version of getTile(), not the overloaded one.</p>\n"}], "owner": {"reputation": 1155, "user_id": 6449910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OvekE.jpg?s=128&g=1", "display_name": "SeSodesa", "link": "https://stackoverflow.com/users/6449910/sesodesa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574931917, "creation_date": 1574885437, "last_edit_date": 1574931917, "question_id": 59077794, "link": "https://stackoverflow.com/questions/59077794/why-isnt-my-implementation-of-a-virtual-function-being-called-in-this-case", "title": "Why isn&#39;t my implementation of a virtual function being called in this case?", "body": "<p>I have access to an interface, that implements the virtual method <code>iObjectManager::getTile(const Course::ObjectId &amp;id) = 0</code>. I've reimplemented said method in an inherited <code>class ObjectManager:public Course::iObjectManager</code> as follows:</p>\n\n<pre><code>std::shared_ptr&lt;Course::TileBase&gt; getTile(const Course::ObjectId &amp;id) override;\n\nstd::shared_ptr&lt;Course::TileBase&gt; ObjectManager::getTile(const Course::ObjectId &amp;id)\n{\n  qDebug() &lt;&lt; \"Looking for tile based on ID...\\n\";\n  for (unsigned i = 0; i &lt; getMapSize(); i++) {\n    for (unsigned j = 0; j &lt; getMapSize(); j++) {\n      std::shared_ptr&lt;BoardPiece&gt; tile = getGameMap().at(i).at(j);\n      if (tile-&gt;ID == id) {\n        qDebug() &lt;&lt; \"Tile found.\\n\";\n        return std::move(tile);\n      }\n    }\n  }\n  qDebug() &lt;&lt; \"No tile with given index...\\n\";\n  return nullptr;\n}\n</code></pre>\n\n<p>The issue arises, when the course side code calls <code>getTile</code>: nothing happens. The calls to <code>qDebug</code> are not made and nothing is printed. Why would the function fail to get called (or the one lacking an implementation get called) even though I've implemented the function properly (I think)?</p>\n\n<p>The functio is called as follows:</p>\n\n<pre><code>tile = lockObjectManager()-&gt;getTile(ID);\n</code></pre>\n\n<p>where <code>lockObjectManager</code>  is defined as</p>\n\n<pre><code>std::shared_ptr&lt;iObjectManager&gt; GameObject::lockObjectManager() const\n{\n    std::shared_ptr&lt;iObjectManager&gt; handler = OBJECTMANAGER.lock();\n    Q_ASSERT(handler);\n    return handler;\n}\n</code></pre>\n\n<h2>Edit</h2>\n\n<p>I've just discovered, that my <code>ObjectManager</code> is destroyed right after its initialization. This is weird, as I have it set as a member of my <code>MainWindow</code> right at the start of its construction, but it is also given to my <code>GameEventHandler</code> as an initialization parameter, and the <code>gameEventHandler</code> does not die either (based on my <code>qDebug</code>ging):</p>\n\n<pre><code>GOManager_ = std::make_shared&lt;ObjectManager&gt;(playerAges_);\nGEHandler_ = std::make_shared&lt;GameEventHandler&gt;(GOManager_);\n</code></pre>\n\n<p>Either the main window of the eventhandler (or both) should be keeping the objectmanager alive, but they are not... Is this because I've not provided an assignment operator, as described <a href=\"https://stackoverflow.com/questions/8872074/why-is-this-destructor-being-called-immediately-after-creation\">here</a>?</p>\n"}, {"tags": ["c++", "c", "windows", "winapi", "windows-10"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1574888277, "post_id": 59077703, "comment_id": 104393754, "body": "I can&#39;t work out what exactly you are doing. We have some fragments of code, talk of close buttons, and some off site videos. A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would be ideal."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1574907193, "post_id": 59077703, "comment_id": 104398437, "body": "From that video, it looks like Discord is using a custom UI and window management. And its animated as well.  So, when the user &quot;closes&quot; the window to hide it, Discord knows to hide the window and disable it.  When you consequently re-show the window, Discord is likely not taking into account that the window was shown without user interaction, and so does not re-enable the window. Just goes to show why you shouldn&#39;t be messing around with someone else&#39;s window behind their back. What are you trying to accomplish in the first place?"}, {"owner": {"reputation": 11, "user_id": 12350954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1393a0c3d0bc59fa91d2dd9818391053?s=128&d=identicon&r=PG&f=1", "display_name": "stade", "link": "https://stackoverflow.com/users/12350954/stade"}, "edited": false, "score": 0, "creation_date": 1574929038, "post_id": 59077703, "comment_id": 104404599, "body": "Discord is just an example, the problem happens with any program. I&#39;m trying to accomplish site wrapper (using <a href=\"https://github.com/jiahaog/nativefier\" rel=\"nofollow noreferrer\">nativefier</a>) and I need global hotkey to show/hide it."}, {"owner": {"reputation": 4915, "user_id": 11128312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ufn85.jpg?s=128&g=1", "display_name": "Strive Sun", "link": "https://stackoverflow.com/users/11128312/strive-sun"}, "edited": false, "score": 0, "creation_date": 1574932164, "post_id": 59077703, "comment_id": 104406199, "body": "Maybe you can <a href=\"https://stackoverflow.com/questions/21706428/click-system-tray-icon-python-win32\">simulate click system tray icon</a>, but I think it&#39;s going to be not easy."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1574982397, "post_id": 59077703, "comment_id": 104427302, "body": "@stade &quot;<i>the problem happens with any program</i>&quot; - I seriously doubt that. Most apps should be able to handle this kind of code just fine. Unless Microsoft has broken something severely at the API layer in Windows 10"}], "owner": {"reputation": 11, "user_id": 12350954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1393a0c3d0bc59fa91d2dd9818391053?s=128&d=identicon&r=PG&f=1", "display_name": "stade", "link": "https://stackoverflow.com/users/12350954/stade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1574884961, "creation_date": 1574884961, "question_id": 59077703, "link": "https://stackoverflow.com/questions/59077703/winapi-how-to-hide-show-a-third-party-program-window", "title": "Winapi how to hide/show a third-party program window?", "body": "<p>I'm trying to hide/show a third-party program (e.g. Discord):</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;windows.h&gt;\n\nvoid show_hide(HWND window)\n{\n    if (IsWindowVisible(window) == TRUE) {\n        ShowWindow(window, SW_HIDE);\n    } else {\n        ShowWindow(window, SW_SHOW);\n    }\n}\n\nBOOL CALLBACK enum_windows_cb(HWND window, const LPARAM lParam)\n{\n    const char* target = \"Discord\";\n\n    char title[255];\n\n    if (GetWindowText(window, title, sizeof(title))) {\n\n        if (strcmpi(title, target) == 0) {\n            show_hide(window);\n            return FALSE;\n        }\n    }\n    return TRUE;    \n}\n\nint main(int argc, char *argv[])\n{\n    EnumWindows(&amp;enum_windows_cb, 0);\n    return 0;\n}\n\n\n</code></pre>\n\n<p>It's work fine, but if I hide a third-party program by click on close button, my program shows frozen window, until I press the tray icon.</p>\n\n<p>Video demonstration:\n<a href=\"https://www.youtube.com/watch?v=P-_Fi-Dew1w\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=P-_Fi-Dew1w</a></p>\n\n<p>I also wrote message log through microsoft spy++ <a href=\"https://pastebin.com/YwGt88yh\" rel=\"nofollow noreferrer\">https://pastebin.com/YwGt88yh</a></p>\n\n<p>It recorded three actions: click on close button hides program, click on tray icon shows program,  and my program tries to show window.</p>\n\n<p>I also tried to add these functions one by one after ShowWindow:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>SetForegroundWindow(window);\nSendMessage(window, WM_SYSCOMMAND, SC_RESTORE, 0);\nUpdateWindow(window);\nRedrawWindow(window, 0, nil, RDW_INVALIDATE or RDW_ALLCHILDREN or RDW_UPDATENOW or RDW_FRAME);\nSendMessage(window, WM_ACTIVATEAPP, TRUE, GetWindowThreadProcessId(window, 0));\n</code></pre>\n\n<p>But it did not help. What did I do wrong?\nI use windows 10.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1574885023, "post_id": 59077684, "comment_id": 104392489, "body": "<code>std::greater</code> lives in the <code>functional</code> header. Did you remember to <code>#include &lt;functional&gt;</code> ?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1574885112, "post_id": 59077684, "comment_id": 104392523, "body": "<code>std::greater&lt;int&gt;</code> is the <i>class</i> not an instance as needed for the default argument. And since the <code>PRED</code> type already is the correct type you could use <code>PRED()</code> as the object for the default argument."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1574885136, "post_id": 59077684, "comment_id": 104392533, "body": "It should be <code>PRED comp = std::greater&lt;int&gt;{}</code>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1574885182, "post_id": 59077684, "comment_id": 104392548, "body": "And for future questions please read about <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a> as well as <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>, and try to create a proper <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to show us. And include all the errors you get from building, copy-pasted in full and complete as text."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 12279037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7ba8907758c32956e98bbfc9cc093f1?s=128&d=identicon&r=PG&f=1", "display_name": "kino92", "link": "https://stackoverflow.com/users/12279037/kino92"}, "edited": false, "score": 0, "creation_date": 1574886990, "post_id": 59077791, "comment_id": 104393235, "body": "This is exactly what i wanted. Thought i start of with &lt;int&gt; to make it easy on myself. But I guess I was missing the crucial PRED comp = PRED(). Thank you"}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 2, "last_activity_date": 1574885393, "creation_date": 1574885393, "answer_id": 59077791, "question_id": 59077684, "link": "https://stackoverflow.com/questions/59077684/using-default-predicate-for-sort-with-templates-c/59077791#59077791", "title": "Using default predicate for sort with templates. C++", "body": "<p>You probably want to do this:</p>\n\n<pre><code>template &lt;typename type, typename PRED = std::greater&lt;T&gt;&gt;\nvoid push(type e, PRED comp = PRED()) {\n    // ...\n}\n</code></pre>\n\n<p>Use <code>std::greater&lt;T&gt;</code> as the default template argument, so that it will work even when <code>T</code> is not <code>int</code>.</p>\n\n<p>Use <code>PRED()</code> as the default value for the <code>comp</code> argument, so that it will work even if the user specifies some other default-constructible predicate type, like <code>std::less&lt;T&gt;</code>.</p>\n"}], "owner": {"reputation": 19, "user_id": 12279037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7ba8907758c32956e98bbfc9cc093f1?s=128&d=identicon&r=PG&f=1", "display_name": "kino92", "link": "https://stackoverflow.com/users/12279037/kino92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 59077791, "answer_count": 1, "score": 1, "last_activity_date": 1574885393, "creation_date": 1574884853, "question_id": 59077684, "link": "https://stackoverflow.com/questions/59077684/using-default-predicate-for-sort-with-templates-c", "title": "Using default predicate for sort with templates. C++", "body": "<p>I'm trying to define the class template as shown below </p>\n\n<pre><code>template &lt;typename T&gt; class test{\n       std::list&lt;T&gt; container;\n       public:\n       template &lt;typename type, typename PRED = std::greater&lt;int&gt;&gt;\n        void push(type e, PRED comp = std::greater&lt;int&gt;) {\n            container.push_back(e);\n            container.sort(comp);\n        }\n\n};\n</code></pre>\n\n<p>From main I want to be able to tell sort how the sorting should be done. But I also want sort to use std::greater if nothing is specified. The code above is telling me that std::greater is illegal.</p>\n"}, {"tags": ["c++", "windows", "winapi", "delete-file"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 1, "creation_date": 1574885386, "post_id": 59077670, "comment_id": 104392621, "body": "Use a <code>directory_iterator</code> and delete the contents yourself (call <code>remove_all</code> on each member of the folder), or delete the whole thing and then recreate the folder."}], "answers": [{"tags": [], "owner": {"reputation": 459, "user_id": 6838293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc846feadb6dcfe1832b873803941fd?s=128&d=identicon&r=PG&f=1", "display_name": "borievka", "link": "https://stackoverflow.com/users/6838293/borievka"}, "is_accepted": false, "score": 4, "last_activity_date": 1574890335, "creation_date": 1574890335, "answer_id": 59078723, "question_id": 59077670, "link": "https://stackoverflow.com/questions/59077670/c-delete-all-files-and-subfolders-but-keep-the-directory-itself/59078723#59078723", "title": "C++ Delete all files and subfolders but keep the directory itself", "body": "<p>If you can use <a href=\"https://en.cppreference.com/w/cpp/header/filesystem\" rel=\"nofollow noreferrer\">std::filesystem</a>, the solution could be following:</p>\n\n<pre><code>#include &lt;filesystem&gt;\n\nnamespace fs = std::filesystem;\n\nvoid delete_dir_content(const fs::path&amp; dir_path) {\n    for (auto&amp; path: fs::directory_iterator(dir_path)) {\n        fs::remove_all(path);\n    }\n}\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3035, "user_id": 1413244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BaB5H.png?s=128&g=1", "display_name": "jwezorek", "link": "https://stackoverflow.com/users/1413244/jwezorek"}, "is_accepted": true, "score": 4, "last_activity_date": 1574890686, "creation_date": 1574890686, "answer_id": 59078794, "question_id": 59077670, "link": "https://stackoverflow.com/questions/59077670/c-delete-all-files-and-subfolders-but-keep-the-directory-itself/59078794#59078794", "title": "C++ Delete all files and subfolders but keep the directory itself", "body": "<p><code>std::filesystem::remove_all( path )</code> will recursively delete a folder at <code>path</code> <em>and</em> it will delete the file if <code>path</code> refers to a file not a directory.</p>\n\n<p>so</p>\n\n<pre><code>void deleteDirectoryContents(const std::string&amp; dir_path)\n{\n    for (const auto&amp; entry : std::filesystem::directory_iterator(dir_path)) \n        std::filesystem::remove_all(entry.path());\n}\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 12429008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/geJUM.png?s=128&g=1", "display_name": "Frappy", "link": "https://stackoverflow.com/users/12429008/frappy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3389, "favorite_count": 1, "accepted_answer_id": 59078794, "answer_count": 2, "score": 2, "last_activity_date": 1574890686, "creation_date": 1574884794, "question_id": 59077670, "link": "https://stackoverflow.com/questions/59077670/c-delete-all-files-and-subfolders-but-keep-the-directory-itself", "title": "C++ Delete all files and subfolders but keep the directory itself", "body": "<p>I need to delete everything in my temporary folder. I know I can use <code>filesystem::remove_all</code> and <code>filesystem::remove_all_dir</code> but that would mean the program will also delete the temp folder itself which is not what I want of course. I couldn't find an answer for this that was C++ so if you guys could help, that'd be nice.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1574885010, "post_id": 59077667, "comment_id": 104392482, "body": "The code you&#39;e shown here should work (though there are several superfluous header includes, they shouldn&#39;t matter. I suspect you&#39;re having integration issues with VSCode more than anything else. Compile this from a command prompt with clang++, run it from the shell, and it should work."}, {"owner": {"reputation": 23, "user_id": 12448013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/206e3a43b428111285dc415fb404924b?s=128&d=identicon&r=PG&f=1", "display_name": "Little_Cash", "link": "https://stackoverflow.com/users/12448013/little-cash"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1574885160, "post_id": 59077667, "comment_id": 104392541, "body": "Could you maybe explain more, I am pretty new to coding. What do you mean by clang++ and shell?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1574885415, "post_id": 59077667, "comment_id": 104392633, "body": "The VSCode website would do a far better job of explaining how that IDE works better than I ever could, as would any number of how-to sites covering how to develop c and c++ code projects using VCSode on a variety of platforms (including mac). Regardless, as I said, that code looks acceptable."}], "answers": [{"tags": [], "owner": {"reputation": 124, "user_id": 11322525, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4l3liclV_qg/AAAAAAAAAAI/AAAAAAAAEyA/O1gj0hbVhGw/photo.jpg?sz=128", "display_name": "Alireza Abbasi", "link": "https://stackoverflow.com/users/11322525/alireza-abbasi"}, "is_accepted": true, "score": 0, "last_activity_date": 1574889143, "creation_date": 1574889143, "answer_id": 59078508, "question_id": 59077667, "link": "https://stackoverflow.com/questions/59077667/taking-in-input-with-spaces-using-stdgetline-in-c/59078508#59078508", "title": "Taking in input with spaces using std::getline() in c++", "body": "<p>I executed your code and it worked.\nMaybe you can not see your result because you run with .exe!</p>\n\n<p>please Add \"std::getchar()\" to end of your code and try it again.</p>\n\n<pre><code>int main()\n{\n        std::string name;\n\n        std::cout &lt;&lt; \"Please, enter the name of your nation: \";\n        std::getline(std::cin, name);\n        std::cout &lt;&lt; \"General Williams: \" &lt;&lt; name &lt;&lt; \" is a great name!\\n\";\n        std::getchar();\n\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 12448013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/206e3a43b428111285dc415fb404924b?s=128&d=identicon&r=PG&f=1", "display_name": "Little_Cash", "link": "https://stackoverflow.com/users/12448013/little-cash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 59078508, "answer_count": 1, "score": 1, "last_activity_date": 1574889143, "creation_date": 1574884781, "question_id": 59077667, "link": "https://stackoverflow.com/questions/59077667/taking-in-input-with-spaces-using-stdgetline-in-c", "title": "Taking in input with spaces using std::getline() in c++", "body": "<p>I am pretty new to coding in c++, and I am using Visual Studio Code on MAC. I have tried to find the right code so that I can enter a string with spaces, but everything that I tried hasn't worked. I tried <code>std::getline(std::cin, name)</code>, but when I ran the code, and it came time to input the name, it just showed nothing where the name should have been. I don't know if there is something wrong with Visual Studio Code, or if there is just a little bit of code that I am missing. Here is the code that I am having a problem with.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;cmath&gt;\n#include &lt;sstream&gt;\n#include &lt;string.h&gt;\n\nint main (){\n\nstd::string name;\n\nstd::cout &lt;&lt; \"Please, enter the name of your nation: \";\nstd::getline(std::cin, name);\nstd::cout &lt;&lt; \"General Williams: \" &lt;&lt; name &lt;&lt; \" is a great name!\\n\";\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "memory"], "comments": [{"owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "edited": false, "score": 1, "creation_date": 1574885030, "post_id": 59077653, "comment_id": 104392492, "body": "I believe that a 2D statically-allocated array must be consecutive in memory by definition (i.e., by he language standard). And since its dimensions are known during compilation-time, this operation should therefore be well defined (to do exactly what you&#39;re expecting it to)."}, {"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 2, "creation_date": 1574885109, "post_id": 59077653, "comment_id": 104392522, "body": "No, this is undefined behaviour."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1574886906, "post_id": 59077653, "comment_id": 104393208, "body": "In C++, it&#39;s not enough to get the address of something. It&#39;s often important how you <i>got</i> that address. One of the big reasons for this is to helps compilers in reasoning about code to perform better optimizations. While it seems like the address you get from <code>a[0][4]</code> will always be that of <code>a[1][1]</code> doing it that way violates the rules of the language. For example, maybe the compiler could see that nothing every gets written to the elements of <code>a[1]</code> after it&#39;s initialized (there is no assignment to an element of <code>a[1]</code>) and could optimize the code to just <code>std::cout&lt;&lt;5&lt;&lt;std::endl;</code>."}], "owner": {"reputation": 719, "user_id": 6151155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdcd194bd6e80992f88f0a2325774d5?s=128&d=identicon&r=PG&f=1", "display_name": "Lassie", "link": "https://stackoverflow.com/users/6151155/lassie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "closed_date": 1574885857, "answer_count": 0, "score": 2, "last_activity_date": 1574886336, "creation_date": 1574884720, "last_edit_date": 1574886336, "question_id": 59077653, "link": "https://stackoverflow.com/questions/59077653/is-it-allowed-to-access-the-second-row-of-a-2d-array-from-the-first", "closed_reason": "Duplicate", "title": "Is it allowed to access the second row of a 2d array from the first?", "body": "<p>Suppose we have the following program:</p>\n\n<pre><code>#include &lt;iostream&gt;\nint main()\n{\n    int a[2][3]{{1, 2, 3},\n                {4, 5, 6}};\n    a[0][4] = -50;\n    std::cout &lt;&lt; a[1][1] &lt;&lt; std::endl; // prints -50\n}\n</code></pre>\n\n<p>Is this guaranteed to work or it is undefined behavior?\nAs long as I know it is guaranteed that <code>&amp;a[0][2] + 1 == &amp;a[1][0]</code>, but on the other side <code>a[0]</code> is an array itself and the valid indices for it are <code>0..2</code>.</p>\n\n<p>Edit: If it is forbidden by the standard, is there any specific reason to be forbidden? The 'duplicate' question does not answer that. I need to know the technical reason behind this. Why would it be worse if it was allowed?</p>\n"}, {"tags": ["c++", "operator-overloading", "operators"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 6, "creation_date": 1574883559, "post_id": 59077388, "comment_id": 104391875, "body": "So you can do things like <code>a * (b += c);</code>. The built in compound operators return values; so should overloaded ones to avoid confusing people."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1574884904, "post_id": 59077388, "comment_id": 104392445, "body": "@Shawn Though I wouldn&#39;t recommend chaining too many mutative operators together. I believe chaining 2 or more mutative operators is unspecified behavior."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1574885029, "post_id": 59077687, "comment_id": 104392491, "body": "That last one, while probably true, is weird. Normally, you should do it the other way around."}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1574885131, "post_id": 59077687, "comment_id": 104392529, "body": "@Chipster, <a href=\"https://en.cppreference.com/w/cpp/language/operators#Binary_arithmetic_operators\" rel=\"nofollow noreferrer\">not really</a>."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1574885134, "post_id": 59077687, "comment_id": 104392531, "body": "@Chipster What, define the compound version in terms of the non-compound operator?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1574885252, "post_id": 59077687, "comment_id": 104392581, "body": "Reread <a href=\"https://stackoverflow.com/a/4421719/10957435\">this question</a> more closely, and realized I am wrong. So never mind."}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 5, "last_activity_date": 1574885039, "last_edit_date": 1574885039, "creation_date": 1574884880, "answer_id": 59077687, "question_id": 59077388, "link": "https://stackoverflow.com/questions/59077388/overloading-compound-assignment-operators-in-c/59077687#59077687", "title": "Overloading compound assignment operators in C++", "body": "<p>Several reasons.</p>\n\n<p>That's what the builtin <code>+=</code> and friends do; your overloaded version better act the same without a really good reason and documentation of the fact, or else people who use it expecting it to act like the built in ones will get upset.</p>\n\n<p>The builtin ones act that way to allow them to be used as part of a larger expression like <code>a + (b += c)</code>.</p>\n\n<p>It makes defining an overloaded <code>operator+()</code> in terms of <code>operator+=()</code> and a copy constructor easy. Consider</p>\n\n<pre><code>class foo {\n  foo&amp; operator+=(const foo &amp;b) {\n    // Do stuff\n    return *this;\n  }\n};\nfoo operator+(foo a, const foo &amp;b) { // First argument passed by value, second by reference\n  return a += b;\n}\n</code></pre>\n\n<p>Making the compound operators class members and the plain operators freestanding is a common style suggestion; it allows the first argument to be of a different type as long as it can be converted to a <code>foo</code>: <code>foo b; foo a = 1 + b;</code></p>\n\n<p>(All examples are very contrived for demonstration purposes)</p>\n"}, {"tags": [], "owner": {"reputation": 95, "user_id": 11923505, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-C6rwhQ11j2c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9jkyB24w3AUZ5sNzK1lOdvZn_Uw/photo.jpg?sz=128", "display_name": "C. R. Ward", "link": "https://stackoverflow.com/users/11923505/c-r-ward"}, "is_accepted": false, "score": -1, "last_activity_date": 1574885124, "creation_date": 1574885124, "answer_id": 59077735, "question_id": 59077388, "link": "https://stackoverflow.com/questions/59077388/overloading-compound-assignment-operators-in-c/59077735#59077735", "title": "Overloading compound assignment operators in C++", "body": "<p>It is because the <code>operator +=</code> has to be a <code>left-hand-expression</code>.</p>\n\n<p>For instance, in <code>a += ...;</code> there is no way the result of the evaluation of this expression won't be a <code>left-hand-expression</code> (i.e., <code>a += b + c + d;</code>).</p>\n"}], "owner": {"reputation": 33, "user_id": 12447977, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fnVd6_udOAs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfQyFlCySMrCMP7lPq_uiDHzPu3MQ/photo.jpg?sz=128", "display_name": "Alpha Canis Majoris", "link": "https://stackoverflow.com/users/12447977/alpha-canis-majoris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 59077687, "answer_count": 2, "score": 3, "last_activity_date": 1574885124, "creation_date": 1574883423, "question_id": 59077388, "link": "https://stackoverflow.com/questions/59077388/overloading-compound-assignment-operators-in-c", "title": "Overloading compound assignment operators in C++", "body": "<p>Why is it necessary when we overload the += operator to return a reference to the class?\nwhy the prototype is for instance  <code>ClassName&amp; operator += (const ClassName&amp; instance)</code> instead of<br>\n<code>void operator += (const ClassName&amp; instance)</code> ?</p>\n"}, {"tags": ["c++", "arrays", "pointers", "inheritance", "virtual-functions"], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1574884242, "creation_date": 1574884242, "answer_id": 59077557, "question_id": 59077272, "link": "https://stackoverflow.com/questions/59077272/pointer-array-of-parent-class-having-a-pure-virtual-function-and-object-type-of/59077557#59077557", "title": "pointer array of parent class having a pure virtual function and object type of pointer array", "body": "<p>If I have understood you correctly you need something like the following</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass shape\n{\n    public:\n        virtual float boundary_length() const = 0;\n        virtual ~shape() = default;\n};\n\nclass rectangle: public shape\n{\n    public:\n        rectangle( float length, float width ) : length( length ), width( width )\n        {\n        }\n        float boundary_length() const override\n        {\n            return 2*(length+width);\n        }\n    protected:\n        float length, width;\n};\n\nclass circle: public shape\n{\n    public:\n        circle( float radius ) : radius( radius )\n        {\n        }\n        float boundary_length() const override\n        {\n            return 2*(3.14*radius);\n        }\n\n    private:\n        float radius;\n};\n\n//...\n\nint main(void) \n{\n    const size_t N = 10;    \n    shape * a[N] =\n    {\n        new rectangle( 10.0f, 10.0f ), new circle( 5.0f )\n    };\n\n    for ( auto s = a; *s != nullptr; ++s )\n    {\n        std::cout &lt;&lt; ( *s )-&gt;boundary_length() &lt;&lt; '\\n';\n    }        \n\n    for ( auto s = a; *s != nullptr; ++s )\n    {\n        delete *s;\n    }        \n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>40\n31.4\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12447961, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBSft4tagHy5orVizwjNHgiZAlaXkV_w_-Pruqv=k-s128", "display_name": "Sirat e mustkeem", "link": "https://stackoverflow.com/users/12447961/sirat-e-mustkeem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1574884242, "creation_date": 1574882986, "question_id": 59077272, "link": "https://stackoverflow.com/questions/59077272/pointer-array-of-parent-class-having-a-pure-virtual-function-and-object-type-of", "title": "pointer array of parent class having a pure virtual function and object type of pointer array", "body": "<p>here in the main function i want to make a pointer array. object type should change every time. \nSomething like this.\nshape* a[10]=new rectangle;\nbut i want to make a[0] rectangle type. a[1] circle type and so on.</p>\n\n<pre><code>class shape\n{\n    public:\n        virtual float boundary_length()=0;\n};\nclass rectangle: public shape\n{\n    public:\n        float boundary_length()\n        {\n            cout&lt;&lt;\"Boundary length of rectangle\"&lt;&lt;endl;\n            return 2*(length+width);\n        }\n};\nclass circle: public shape\n{\n\n    public:\n        float boundary_length()\n        {\n            return 2*(3.14*radius);\n        }   \n};\nclass triangle: public shape\n{\n        float boundary_length()\n        {\n            return (base+perp+hyp);\n        }\n};\nint main()\n{\n    shape* a=new rectangle;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 95, "user_id": 11923505, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-C6rwhQ11j2c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9jkyB24w3AUZ5sNzK1lOdvZn_Uw/photo.jpg?sz=128", "display_name": "C. R. Ward", "link": "https://stackoverflow.com/users/11923505/c-r-ward"}, "edited": false, "score": 0, "creation_date": 1574884153, "post_id": 59077134, "comment_id": 104392139, "body": "Well, you can move <code>x</code>, <code>y</code>, or <code>x,y</code> <code>step</code>(<code>s</code>) at a <code>unit</code> of <code>time</code>, correct?"}], "answers": [{"comments": [{"owner": {"reputation": 1148, "user_id": 5383521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/01531ac40d262787ab7659f7220505df?s=128&d=identicon&r=PG&f=1", "display_name": "flowit", "link": "https://stackoverflow.com/users/5383521/flowit"}, "edited": false, "score": 1, "creation_date": 1574883186, "post_id": 59077229, "comment_id": 104391702, "body": "Something to add: The shortest path between all 3 points (or N points, if you generalize the problem) is the sum of all shortest paths between all consecutive points. Unfortunately, I can&#39;t give a mathematical proof of that. This is no longer true if you&#39;re allowed to visit the points in arbitrary order."}], "tags": [], "owner": {"reputation": 8797, "user_id": 12270289, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-f90bXHFopV0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfStPF8S5OWF3hBzDu-oJeTx3xOfQ/photo.jpg?sz=128", "display_name": "Klaycon", "link": "https://stackoverflow.com/users/12270289/klaycon"}, "is_accepted": true, "score": 7, "last_activity_date": 1574883565, "last_edit_date": 1574883565, "creation_date": 1574882778, "answer_id": 59077229, "question_id": 59077134, "link": "https://stackoverflow.com/questions/59077134/minimum-time-visiting-all-points-understanding/59077229#59077229", "title": "Minimum Time Visiting All Points: Understanding", "body": "<p>Since you can move diagonally, the number of moves is bound <strong>only</strong> by the longest dimension, either <code>x</code> or <code>y</code>. Think about it: If the next node is <code>+10x</code> and <code>-5y</code> away, it's going to take exactly 10 steps, because you can only move 1 <code>x</code> at a time and the difference in <code>y</code> is made up by diagonal moves during the process of overcoming the difference in <code>x</code>.</p>\n\n<p>This detail is expressed clearly by your code:</p>\n\n<p>if <code>dy = abs(points[i][1] - points[i - 1][1])</code></p>\n\n<p>and <code>dx = abs(points[i][0] - points[i - 1][0])</code></p>\n\n<p>you can find precisely how many steps it will take by taking whichever of <code>dx</code> and <code>dy</code> is larger, because the smaller difference will be overcome by diagonal steps to get to the larger anyway.\nHence, you have:</p>\n\n<p><code>ans += max(dy, dx)</code></p>\n\n<p>and this is guaranteed to always give you the correct number of steps for each pair of points. And as @flowit pointed out, the shortest path between each consecutive pair of points is guaranteed to be the shortest path for the entire set of points, hence you get the correct overall answer.</p>\n"}, {"tags": [], "owner": {"reputation": 135, "user_id": 11135300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efb6de9a3dfec134c5ade23b5be4a11f?s=128&d=identicon&r=PG&f=1", "display_name": "Chris94549", "link": "https://stackoverflow.com/users/11135300/chris94549"}, "is_accepted": false, "score": 1, "last_activity_date": 1595558485, "creation_date": 1595558485, "answer_id": 63065953, "question_id": 59077134, "link": "https://stackoverflow.com/questions/59077134/minimum-time-visiting-all-points-understanding/63065953#63065953", "title": "Minimum Time Visiting All Points: Understanding", "body": "<p>If anyone else is struggling with this, just draw the points out on paper and manually count the different ways to move between the points.\nYou will immediately grasp that the shortest distance is the longest of the X or Y side, because moving diagonally is counted as 1, i.e. the same as an X or Y movement.</p>\n"}, {"tags": [], "owner": {"reputation": 25, "user_id": 2986249, "user_type": "registered", "profile_image": "https://graph.facebook.com/569148583/picture?type=large", "display_name": "user2986249", "link": "https://stackoverflow.com/users/2986249/user2986249"}, "is_accepted": false, "score": 0, "last_activity_date": 1603761587, "creation_date": 1603761587, "answer_id": 64547094, "question_id": 59077134, "link": "https://stackoverflow.com/questions/59077134/minimum-time-visiting-all-points-understanding/64547094#64547094", "title": "Minimum Time Visiting All Points: Understanding", "body": "<pre><code>class Solution:\n    def minTimeToVisitAllPoints(self, points: List[List[int]]) -&gt; int:\n        path = 0\n        for i in range(len(points) -1):\n            path += max(abs(points[i][0] - points[i+1][0]), abs(points[i][1] - points[i+1][1])) \n        return path\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8280740, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-m7AyuOB1EJw/AAAAAAAAAAI/AAAAAAAAAHc/ZGGSXzvmuC8/photo.jpg?sz=128", "display_name": "Vasantha Bhanu", "link": "https://stackoverflow.com/users/8280740/vasantha-bhanu"}, "is_accepted": false, "score": 0, "last_activity_date": 1613601992, "creation_date": 1613601992, "answer_id": 66251053, "question_id": 59077134, "link": "https://stackoverflow.com/questions/59077134/minimum-time-visiting-all-points-understanding/66251053#66251053", "title": "Minimum Time Visiting All Points: Understanding", "body": "<p>If someone is still confused there, essentially the core logic is</p>\n<p>max_distance = max(abs(x2-x1), abs(y2-y1))</p>\n<p>This max_distance number gives the number of seconds from point 1 = [x1, y1] to point 2 = [x2, y2].</p>\n<p>Then, you repeat the same logic for point 2 and point 3 and so on.</p>\n<p>Finally you add all the max_distances, which should give you the answer</p>\n"}], "owner": {"reputation": 43, "user_id": 5355649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5202c5be3475156474964b899212ae4?s=128&d=identicon&r=PG&f=1", "display_name": "jaya tyagi", "link": "https://stackoverflow.com/users/5355649/jaya-tyagi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1447, "favorite_count": 0, "accepted_answer_id": 59077229, "answer_count": 4, "score": 4, "last_activity_date": 1613601992, "creation_date": 1574882331, "question_id": 59077134, "link": "https://stackoverflow.com/questions/59077134/minimum-time-visiting-all-points-understanding", "title": "Minimum Time Visiting All Points: Understanding", "body": "<p>I was trying to solve a question from leetcode - \"Minimum Time Visiting All Points\". Below is the description of the problem - </p>\n\n<p>On a plane there are n points with integer coordinates points[i] = [xi, yi]. Your task is to find the minimum time in seconds to visit all points.</p>\n\n<p>You can move according to the next rules:</p>\n\n<p>In one second always you can either move vertically, horizontally by one unit or diagonally (it means to move one unit vertically and one unit horizontally in one second).\nYou have to visit the points in the same order as they appear in the array.</p>\n\n<pre><code>Input: points = [[1,1],[3,4],[-1,0]]\nOutput: 7\nExplanation: One optimal path is [1,1] -&gt; [2,2] -&gt; [3,3] -&gt; [3,4] -&gt; [2,3] -&gt; [1,2] -&gt; [0,1] -&gt; [-1,0]   \nTime from [1,1] to [3,4] = 3 seconds \nTime from [3,4] to [-1,0] = 4 seconds\nTotal time = 7 seconds\n</code></pre>\n\n<p>By solving a few examples i was able to solve the question in this way - </p>\n\n<pre><code>ans += max(abs(points[i][1] - points[i - 1][1]), abs(points[i][0] - points[i - 1][0]))\n</code></pre>\n\n<p>by looping 'i' from 1 to points.size() but i am unable to understand this problem intuitively. \nCan someone please help me in internalizing this problem?</p>\n"}, {"tags": ["python", "c++", "overloading", "cpython", "python-c-api"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1574882977, "post_id": 59076682, "comment_id": 104391588, "body": "&quot;on failure, it returns false and raises the appropriate exception&quot; - you can do that in Python? Today I learned. Raise an exception <i>and</i> return a value. Interresting."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1574883044, "post_id": 59076682, "comment_id": 104391633, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. You haven&#39;t shown us how <code>TypeObj</code> is intantiated"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1574883148, "post_id": 59076682, "comment_id": 104391689, "body": "@JesperJuhl: As far as I understand, it&#39;s akin to using error codes. E.g., <code>PyErr_SetString</code>"}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1574883578, "post_id": 59076682, "comment_id": 104391881, "body": "@JesperJuhl <code>PyArg_ParseTuple</code> is a C function. It returns a C 0 value if something goes wrong, and then sets the Python exception state.  This isn&#39;t something you can do in Python - it&#39;s just how Python exceptions are implemented in C."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1574883913, "post_id": 59076682, "comment_id": 104392034, "body": "@DavidW thank you for the explanation."}], "answers": [{"comments": [{"owner": {"reputation": 170, "user_id": 9844113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9371365555a8538f7ace5f1df3cb41d1?s=128&d=identicon&r=PG&f=1", "display_name": "A student", "link": "https://stackoverflow.com/users/9844113/a-student"}, "edited": false, "score": 0, "creation_date": 1574884144, "post_id": 59077393, "comment_id": 104392134, "body": "How would I represent CustomObject as a PyObject* class?"}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "reply_to_user": {"reputation": 170, "user_id": 9844113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9371365555a8538f7ace5f1df3cb41d1?s=128&d=identicon&r=PG&f=1", "display_name": "A student", "link": "https://stackoverflow.com/users/9844113/a-student"}, "edited": false, "score": 1, "creation_date": 1574884309, "post_id": 59077393, "comment_id": 104392198, "body": "Ah - <code>CustomObject</code> is a <code>PyTypeObject</code>. You just need to cast it: <code>(PyObject*)&amp;CustomObject</code>. A <code>PyTypeObject</code> is a variant of <code>PyObject</code> so that&#39;s fine."}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "reply_to_user": {"reputation": 170, "user_id": 9844113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9371365555a8538f7ace5f1df3cb41d1?s=128&d=identicon&r=PG&f=1", "display_name": "A student", "link": "https://stackoverflow.com/users/9844113/a-student"}, "edited": false, "score": 1, "creation_date": 1574884397, "post_id": 59077393, "comment_id": 104392234, "body": "Careful - I missed a <code>&amp;</code>. Make sure you copy the right edit!"}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "reply_to_user": {"reputation": 170, "user_id": 9844113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9371365555a8538f7ace5f1df3cb41d1?s=128&d=identicon&r=PG&f=1", "display_name": "A student", "link": "https://stackoverflow.com/users/9844113/a-student"}, "edited": false, "score": 0, "creation_date": 1574887971, "post_id": 59077393, "comment_id": 104393620, "body": "Final comment: since you&#39;re using C++ you might prefer a C++-style cast <code>reinterpret_cast&lt;PyObject*&gt;(&amp;CustomObject)</code>. It&#39;ll run exactly the same, but some people prefer it as being clearer."}], "tags": [], "owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "is_accepted": true, "score": 2, "last_activity_date": 1574890296, "last_edit_date": 1574890296, "creation_date": 1574883461, "answer_id": 59077393, "question_id": 59076682, "link": "https://stackoverflow.com/questions/59076682/cpython-overloaded-functions/59077393#59077393", "title": "CPython &#39;overloaded&#39; functions", "body": "<p>I'd probably just use <code>PyArg_ParseTuple</code> to get a generic unspecified object, and then handle the object types later with <code>Py*_Check</code>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>if (!PyArg_ParseTuple(args, \"O\", &amp;object)) {\n    return NULL;\n}\nif (PyObject_IsInstance(object, (PyObject*)&amp;PyType)) { // or a more specific function if one exists\n    std::cout &lt;&lt; \"Object function\\n\";\n} else if (PyUnicode_Check(object)) {\n    std::cout &lt;&lt; \"String function\\n\";\n} else {\n    // set an error, return NULL\n}\n</code></pre>\n\n<p>The reason for this is that the Python \"ask forgiveness, not permission\" pattern of</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>try:\n    something()\nexcept SomeException:\n    somethingElse()\n</code></pre>\n\n<p>doesn't translate very well into C, and involves quite a bit of code to handle the exceptions. If you <em>really</em> want to do it that way then you need to call <code>PyErr_Clear</code> before the second <code>PyArg_ParseTuple</code>, and ideally you should check it's the exception you think, and not something else entirely.</p>\n"}], "owner": {"reputation": 170, "user_id": 9844113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9371365555a8538f7ace5f1df3cb41d1?s=128&d=identicon&r=PG&f=1", "display_name": "A student", "link": "https://stackoverflow.com/users/9844113/a-student"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 59077393, "answer_count": 1, "score": 0, "last_activity_date": 1574890296, "creation_date": 1574880319, "last_edit_date": 1574883664, "question_id": 59076682, "link": "https://stackoverflow.com/questions/59076682/cpython-overloaded-functions", "title": "CPython &#39;overloaded&#39; functions", "body": "<p>I am trying to overload a python extension function that would take either a object or a string.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>typedef struct\n{\n  PyObject_HEAD\n} CustomObject;\n\nPyObject* customFunction(CustomObject* self, PyObject* args);\n\nPyMethodDef methods[] =\n{\n {\"customFunction\", (PyCFunction) customFunction, METH_VARAGS, \"A custom function\"},\n {NULL}\n}\n\nPyTypeObject TypeObj =\n{\n  PyVarObject_HEAD_INIT(NULL, 0)\n  .tp_name = \"customModule.CustomObject\",\n  .tp_doc = \"Custom Object\",\n  .tp_basicsize = sizeof(CustomObject),\n  .tp_itemsize = 0,\n  .tp_flags = Py_TPFLAGS_DEFAULT,\n  .tp_methods = methods,\n}\n\n// Area of problem\nPyObject* customFunction(CustomObject* self, PyObject* args)\n{\n  const char* string;\n  PyObject* object;\n  if (PyArg_ParseTuple(args, \"O!\", &amp;TypeObj, &amp;object)) // TypeObj is the PyTypeObject fpr CustomObject\n  {\n    std::cout &lt;&lt; \"Object function\\n\"\n    // Do whatever and return PyObject*\n  }\n  else if (PyArg_ParseTuple(args, \"s\", &amp;string))\n  {\n    std::cout &lt;&lt; \"String function\\n\"\n    // Do whatever and return PyObject*\n  }\n  return PyLong_FromLong(0); // In case nothing above works\n}\n</code></pre>\n\n<p>In python I have a try except for the function and I get this error <code>Error: &lt;built-in method customFunction of CustomModule.CustomObject object at 0xmemoryadress&gt; returned a result with an error set</code></p>\n\n<p>Here are the Python docs for this PyArg_ParseTuple:</p>\n\n<blockquote>\n  <p>int PyArg_ParseTuple(PyObject *args, const char *format, ...)</p>\n  \n  <p>Parse the parameters of a function that takes only positional parameters into local variables. Returns true on success; on failure, it returns false and raises the appropriate exception</p>\n</blockquote>\n\n<p>I am guessing that PyArg_ParseTuple is setting an error, which is causing the entire function not to work (I do have customFunction in my method table for the module, I am just omitting that code). If I have the following Python:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import CustomModule\n\ntry:\n  CustomModule.customFunction(\"foo\")\nexcept Exception as e:\n  print(\"Error:\", e)\n</code></pre>\n\n<p><code>String function</code> does get outputted, so the code in the string if statement does work, but I assume the error occurs because PyArg_ParseTuple for the object failed, so it returns an error (not 100% sure if this is correct).</p>\n\n<p>Is there a way I can prevent PyArg_ParseTuple() from raising an error, is there another function, or is there a better way to 'overload' my custom functions?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1574880713, "post_id": 59076644, "comment_id": 104390738, "body": "Recommendation: Use descriptive identifiers for your variables.. <code>t</code>, for example, contains no information about what the variable represents and how it should be used. This makes the code harder to read and thus debug and maintain. Time spent making your code descriptive saves time later."}, {"owner": {"reputation": 13, "user_id": 12423928, "user_type": "registered", "profile_image": "https://graph.facebook.com/3023724147655191/picture?type=large", "display_name": "Konstantinos Kon", "link": "https://stackoverflow.com/users/12423928/konstantinos-kon"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1574880894, "post_id": 59076644, "comment_id": 104390805, "body": "Thank Everyone for your quick answer!Your help was so helpful"}], "answers": [{"tags": [], "owner": {"reputation": 215, "user_id": 9872907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UXr1t.jpg?s=128&g=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/9872907/kai"}, "is_accepted": false, "score": 3, "last_activity_date": 1574880355, "creation_date": 1574880355, "answer_id": 59076690, "question_id": 59076644, "link": "https://stackoverflow.com/questions/59076644/how-can-i-make-the-class-forum-work-with-strings-in-c/59076690#59076690", "title": "how can i make the class Forum work with strings in c++?", "body": "<p>Your <code>Forum</code> constructor doesn't match what you're trying to give it. 2 <code>strings</code>, then <code>ints</code>, whereas the constructor takes 3 <code>strings</code>.</p>\n\n<pre><code>Forum(string s,string th,string c...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 12423928, "user_type": "registered", "profile_image": "https://graph.facebook.com/3023724147655191/picture?type=large", "display_name": "Konstantinos Kon", "link": "https://stackoverflow.com/users/12423928/konstantinos-kon"}, "edited": false, "score": 0, "creation_date": 1574880804, "post_id": 59076728, "comment_id": 104390769, "body": "OMG! Thanks a lot!! ha ha ha ! You the best!"}], "tags": [], "owner": {"reputation": 191, "user_id": 7322284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ah4Ex.jpg?s=128&g=1", "display_name": "Saisai3396", "link": "https://stackoverflow.com/users/7322284/saisai3396"}, "is_accepted": false, "score": 1, "last_activity_date": 1574880493, "creation_date": 1574880493, "answer_id": 59076728, "question_id": 59076644, "link": "https://stackoverflow.com/questions/59076644/how-can-i-make-the-class-forum-work-with-strings-in-c/59076728#59076728", "title": "how can i make the class Forum work with strings in c++?", "body": "<p>Simply because you're missing a string parameter in that function call. \n<code>Forum f1=Forum(\"info\",\"kostas\", &lt;string missing here&gt;, 2005,2,220,\"info1\",\"nikos\",2006,\"hello\");</code></p>\n"}], "owner": {"reputation": 13, "user_id": 12423928, "user_type": "registered", "profile_image": "https://graph.facebook.com/3023724147655191/picture?type=large", "display_name": "Konstantinos Kon", "link": "https://stackoverflow.com/users/12423928/konstantinos-kon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1574880493, "creation_date": 1574880121, "question_id": 59076644, "link": "https://stackoverflow.com/questions/59076644/how-can-i-make-the-class-forum-work-with-strings-in-c", "title": "how can i make the class Forum work with strings in c++?", "body": "<p>Hello i i get [Error] no matching function for call to 'Forum::Forum(const char [5], const char [7], int, int, int, const char [6], const char [6], int, const char [6])' at </p>\n\n<p>Forum f1=Forum(\"info\",\"kostas\",2005,2,220,\"info1\",\"nikos\",2006,\"hello\");</p>\n\n<p>!!! I am new in object oriented programming so i don't know how to use string! What happens here?? Thank you very much!</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\nusing namespace std;\n\nclass Post{\n\n    int postNumber;\n    string title;\n    string creator;\n    int dateOfCreation;\n    string text;\n\n    public:\n        Post(int p=1,string t=\"first\",string c=\"kostas\",int da=2012, string te=\"text\"){\n\n            postNumber=p;\n            title=t;\n            creator=c;\n            dateOfCreation=da;\n            text=te;\n\n            cout&lt;&lt;\"I just created a post with\"&lt;&lt;\"Post number: \"&lt;&lt;postNumber&lt;&lt;' '&lt;&lt;\"Title: \"&lt;&lt;title\n            &lt;&lt;title&lt;&lt;\"with the name of creator: \"&lt;&lt;creator&lt;&lt;\"and date of creation: \"&lt;&lt;dateOfCreation\n            &lt;&lt;text&lt;&lt;endl;\n\n        }\n        ~Post(){\n            cout&lt;&lt;\"Post number\"&lt;&lt;postNumber&lt;&lt;\"is about to be destroyed\"&lt;&lt;endl;\n        }\n\n        void print(){\n            cout&lt;&lt;postNumber&lt;&lt;' '&lt;&lt;title&lt;&lt;' '&lt;&lt;creator&lt;&lt;' '&lt;&lt;dateOfCreation&lt;&lt;' '&lt;&lt;text&lt;&lt;endl;\n\n        }\n\n};\n\nclass Thread{\n    std::string thema;\n    std::string creator;\n    int dateOfCreation;\n    int numberOfPost;\n\n    public:\n        Thread(string t=\"xrhisimes plhrofories\",string c=\"kostas\",int d=2015,int n=0){\n\n            thema=t;\n            creator=c;\n            dateOfCreation=d;\n            numberOfPost=n;\n\n            cout&lt;&lt;\"I just created a Threat with\"&lt;&lt;\"thema: \"&lt;&lt;thema&lt;&lt;' '\n            &lt;&lt;\"name of creator: \"&lt;&lt;creator&lt;&lt;' '&lt;&lt;\"date of creation: \"&lt;&lt;dateOfCreation&lt;&lt;' '\n            &lt;&lt;\"and with number of post: \"&lt;&lt;numberOfPost&lt;&lt;endl;\n        }\n        ~Thread(){\n            cout&lt;&lt;\"Theat with subject: \"&lt;&lt;thema&lt;&lt;\"is about to be destroyed \"&lt;&lt;endl;\n        }\n\n        void print(){\n            cout&lt;&lt;thema&lt;&lt;' '&lt;&lt;creator&lt;&lt;' '&lt;&lt;dateOfCreation&lt;&lt;' '&lt;&lt;numberOfPost&lt;&lt;endl;\n        }\n\n};\n\nclass Forum{\n    Post*post;\n    Thread*thread;\n    std::string subject;\n\n    public:\n        Forum(string s=\"antikeimenostrafis programmatismos\"){\n            subject=s;\n            cout&lt;&lt;\"Forum was just created with subject: \"&lt;&lt;subject&lt;&lt;endl;\n            post=new Post;\n            thread= new Thread;\n\n            post-&gt;print();\n            thread-&gt;print();\n        }\n        Forum(string s,string th,string c,int d, int n,\n        int p, string t, string cr, int da, string te){\n\n            cout&lt;&lt;\"Forum was just created with subject: \"&lt;&lt;subject&lt;&lt;'\\n'&lt;&lt;endl;\n\n            post=new Post(p,t,cr,da,te);\n            thread=new Thread(th,c,d,n);\n\n            post-&gt;print();\n            thread-&gt;print();\n        }\n};\n\nint main(){\n    Forum f1=Forum(\"info\",\"kostas\",2005,2,220,\"info1\",\"nikos\",2006,\"hello\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers", "g++", "language-lawyer", "c-strings"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1574879891, "post_id": 59076583, "comment_id": 104390403, "body": "Why use a C-style array in the first place? Why not <code>std::array</code>?"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1574879976, "post_id": 59076583, "comment_id": 104390433, "body": "@WeatherVane that should be an answer"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1574880166, "post_id": 59076583, "comment_id": 104390512, "body": "Which langauge are you asking about?"}, {"owner": {"reputation": 9988, "user_id": 1806289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c9778d5cd689a99bc776f771a67b1bfb?s=128&d=identicon&r=PG", "display_name": "Vilhelm Gray", "link": "https://stackoverflow.com/users/1806289/vilhelm-gray"}, "edited": false, "score": 0, "creation_date": 1574880233, "post_id": 59076583, "comment_id": 104390533, "body": "I&#39;m asking about C++, since the standard doesn&#39;t seem to agree with the result of my code."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1574880292, "post_id": 59076583, "comment_id": 104390555, "body": "@Vilhelm Gray I can not reproduce the problem."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1574880309, "post_id": 59076583, "comment_id": 104390560, "body": "I misread the code, thinking it was a <code>[2][2]</code> array, so mybad deleted comments and answer. What&#39;s the point of a <code>[2][1]</code> array anyway?"}, {"owner": {"reputation": 9988, "user_id": 1806289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c9778d5cd689a99bc776f771a67b1bfb?s=128&d=identicon&r=PG", "display_name": "Vilhelm Gray", "link": "https://stackoverflow.com/users/1806289/vilhelm-gray"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1574880393, "post_id": 59076583, "comment_id": 104390600, "body": "@WeatherVane Sorry, that&#39;s my fault as well since I had a typo in the original version. I&#39;m using <code>[2][1]</code> for the sake of illustration, not for any practical reason: it&#39;s a forced example to illustrate the issue."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1574880412, "post_id": 59076583, "comment_id": 104390608, "body": "Which compiler and compiler version are you using specifically?"}, {"owner": {"reputation": 9988, "user_id": 1806289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c9778d5cd689a99bc776f771a67b1bfb?s=128&d=identicon&r=PG", "display_name": "Vilhelm Gray", "link": "https://stackoverflow.com/users/1806289/vilhelm-gray"}, "edited": false, "score": 0, "creation_date": 1574880441, "post_id": 59076583, "comment_id": 104390623, "body": "<code>g++ (Gentoo 9.2.0-r2 p3) 9.2.0</code>"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1574880551, "post_id": 59076583, "comment_id": 104390666, "body": "I cannot reproduce this with clang 8.0, nor gcc 8.3, nor vc14, fwiw (the latter isn&#39;t 17 compliant, but wth; why not try)."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1574880688, "post_id": 59076583, "comment_id": 104390723, "body": "How is a nullptr not a valid pointer to an empty string literal? Seems reasonable to me."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 2, "creation_date": 1574880757, "post_id": 59076583, "comment_id": 104390757, "body": "@super an empty string has one character: the terminator. When you print it, it outputs a valid nothing."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 3, "creation_date": 1574880823, "post_id": 59076583, "comment_id": 104390776, "body": "This is probably just a GCC 9 regression. You should report it and see what they say."}, {"owner": {"reputation": 9988, "user_id": 1806289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c9778d5cd689a99bc776f771a67b1bfb?s=128&d=identicon&r=PG", "display_name": "Vilhelm Gray", "link": "https://stackoverflow.com/users/1806289/vilhelm-gray"}, "reply_to_user": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1574880855, "post_id": 59076583, "comment_id": 104390789, "body": "@super <i>5.13.5 paragraph 14</i> states that a string literal will have at least <code>\\0</code> appended."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1574880882, "post_id": 59076583, "comment_id": 104390801, "body": "<a href=\"https://tio.run/##PU5BCoMwELznFUtKQasB7aUHa6HvsB7CRm1Ak5BEL5KvN01L6TALMwOzDBrDJsQYD1LhvIoBrui8kPpGCGrlPOCTWzg5b@/Wdue@q3toYYedjlrTUCZBQ2gIkcrDwqXKNi1FDjuBBGNTPGb0aB4@naIl/D5VfeLf1R@XN9@OHfxqFVQNCTG@cJz55CJLo1osivoSmRkEV15iZNsb\" rel=\"nofollow noreferrer\">tio.run/&hellip;</a>"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 2, "creation_date": 1574881043, "post_id": 59076583, "comment_id": 104390853, "body": "g++ does this, clang doesn&#39;t: <a href=\"https://gcc.godbolt.org/z/XkZcVy\" rel=\"nofollow noreferrer\">gcc.godbolt.org/z/XkZcVy</a> Looks like a g++ bug."}, {"owner": {"reputation": 9988, "user_id": 1806289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c9778d5cd689a99bc776f771a67b1bfb?s=128&d=identicon&r=PG", "display_name": "Vilhelm Gray", "link": "https://stackoverflow.com/users/1806289/vilhelm-gray"}, "edited": false, "score": 0, "creation_date": 1574881139, "post_id": 59076583, "comment_id": 104390892, "body": "I think everyone is right, this looks like a regression in g++ 9 since it&#39;s not there in previous versions. I&#39;ll try reporting to the g++ developers and see what they say."}, {"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 0, "creation_date": 1574884465, "post_id": 59076583, "comment_id": 104392262, "body": "I&#39;m late to the party, but please keep us informed of what they say. :)"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1574901357, "post_id": 59076583, "comment_id": 104397425, "body": "@VilhelmGray: Can you post a link to the bug report? (<a href=\"https://gcc.gnu.org/bugzilla/\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla</a> is the bug tracker for gcc/g++.)"}, {"owner": {"reputation": 9988, "user_id": 1806289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c9778d5cd689a99bc776f771a67b1bfb?s=128&d=identicon&r=PG", "display_name": "Vilhelm Gray", "link": "https://stackoverflow.com/users/1806289/vilhelm-gray"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1574904137, "post_id": 59076583, "comment_id": 104397925, "body": "@KeithThompson Account creation on the GCC bugzilla site is restricted, so I submitted an email request that will hopefully be fulfilled by tomorrow. For now, I have opened a bug report on Gentoo: <a href=\"https://bugs.gentoo.org/701364\" rel=\"nofollow noreferrer\">bugs.gentoo.org/701364</a>"}], "answers": [{"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1574907965, "post_id": 59080120, "comment_id": 104398590, "body": "From the comments on the question, it&#39;s a regression in g++ 9, reported on Gentoo: <a href=\"https://bugs.gentoo.org/701364\" rel=\"nofollow noreferrer\">bugs.gentoo.org/701364</a>"}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1574900095, "creation_date": 1574900095, "answer_id": 59080120, "question_id": 59076583, "link": "https://stackoverflow.com/questions/59076583/why-does-an-empty-string-literal-in-a-multidimensional-array-decay-to-a-null-poi/59080120#59080120", "title": "Why does an empty string literal in a multidimensional array decay to a null pointer?", "body": "<p>There is no such decay ; the output you observed is a compiler bug.</p>\n\n<p>(Yes this is a short answer but there is nothing else to add).</p>\n"}, {"tags": [], "owner": {"reputation": 9988, "user_id": 1806289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c9778d5cd689a99bc776f771a67b1bfb?s=128&d=identicon&r=PG", "display_name": "Vilhelm Gray", "link": "https://stackoverflow.com/users/1806289/vilhelm-gray"}, "is_accepted": true, "score": 2, "last_activity_date": 1575046173, "creation_date": 1575046173, "answer_id": 59108544, "question_id": 59076583, "link": "https://stackoverflow.com/questions/59076583/why-does-an-empty-string-literal-in-a-multidimensional-array-decay-to-a-null-poi/59108544#59108544", "title": "Why does an empty string literal in a multidimensional array decay to a null pointer?", "body": "<p>This behavior is not correct, and in this case is the result of a regression in <strong>GCC</strong>: <a href=\"https://gcc.gnu.org/PR90947\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/PR90947</a></p>\n\n<p>The regression has been fixed for <strong>GCC version 9.3</strong> and should hopefully make it back to the earlier versions affected as well.</p>\n"}], "owner": {"reputation": 9988, "user_id": 1806289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c9778d5cd689a99bc776f771a67b1bfb?s=128&d=identicon&r=PG", "display_name": "Vilhelm Gray", "link": "https://stackoverflow.com/users/1806289/vilhelm-gray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 1, "accepted_answer_id": 59108544, "answer_count": 2, "score": 8, "last_activity_date": 1575046233, "creation_date": 1574879773, "last_edit_date": 1575046233, "question_id": 59076583, "link": "https://stackoverflow.com/questions/59076583/why-does-an-empty-string-literal-in-a-multidimensional-array-decay-to-a-null-poi", "title": "Why does an empty string literal in a multidimensional array decay to a null pointer?", "body": "<p>I want to define a multidimensional C-string array, initialized by several string literals. In <strong>C</strong> I would do the following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nconst char *strArr[2][1] = { {\"foo\"}, {\"\"}};\n\nint main(void) {\n    printf(\"%p\\t%p\\n\", strArr[0][0], strArr[1][0]);\n    return 0;\n}\n</code></pre>\n\n<p>Compiling with <code>gcc -std=c18 -pedantic test.c</code> and executing results in:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ ./a.out \n0x55d95410f004  0x55d95410f008\n</code></pre>\n\n<p>As I expect, the empty string literal in <code>strArr[1][0]</code> decays to a valid pointer.</p>\n\n<hr>\n\n<p>However, when I try the same code in <strong>C++</strong>:</p>\n\n<pre><code>#include &lt;cstdio&gt;\n\nconst char *strArr[2][1] = { {\"foo\"}, {\"\"}};\n\nint main(void) {\n    printf(\"%p\\t%p\\n\", strArr[0][0], strArr[1][0]);\n    return 0;\n}\n</code></pre>\n\n<p>Compiling with <code>g++ -std=c++17 -pedantic test.cpp</code> and executing results in:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ ./a.out \n0x55c61494d004  (nil)\n</code></pre>\n\n<p>Here, the empty string literal in <code>strArr[1][0]</code> decays to a null pointer. <strong>Why does this happen in C++?</strong></p>\n\n<hr>\n\n<p>In the C++17 standard, I see the following in <em>5.13.5 paragraph 16</em>:</p>\n\n<blockquote>\n  <p>Ordinary string literals and UTF-8 string literals are also referred to as narrow string literals. A narrow string literal has type \u201carray of n const char\u201d, where n is the size of the string as defined below, and has static storage duration (6.7).</p>\n</blockquote>\n\n<p>This seems to indictate that an empty string literal, being an ordinary string literal, should have static storage duration. So why would an empty string literal decay to a null pointer?</p>\n"}, {"tags": ["c++", "buffer", "direct3d12"], "answers": [{"tags": [], "owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "is_accepted": true, "score": 0, "last_activity_date": 1575224591, "creation_date": 1575224591, "answer_id": 59128572, "question_id": 59076582, "link": "https://stackoverflow.com/questions/59076582/what-is-map-default-buffer-on-direct3d-12-0/59128572#59128572", "title": "What is &quot;Map Default Buffer&quot; on Direct3D 12.0?", "body": "<p>This optional feature was introduced with Direct3D 11.2. Most Feature Level 11.0 or better devices with WDDM 1.3 or later drivers support it, although you still have to check that it's supported with <code>CheckFeatureSupport</code>. That means you should have a fallback path that doesn't use it if needed.</p>\n\n<p>This feature was covered at the 2013 Build event. The video is on <a href=\"https://channel9.msdn.com/Events/Build/2013/3-062\" rel=\"nofollow noreferrer\">Channel 9</a>.</p>\n\n<p>It is designed to improve texture streaming scenarios allowing you to use Map DISCARD style updates directly on a DEFAULT resource without having to copy it to a staging resource first.</p>\n"}], "owner": {"reputation": 39, "user_id": 12134401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f799bd5180c00e2deca93bd7f0abc302?s=128&d=identicon&r=PG&f=1", "display_name": "L1-Cache", "link": "https://stackoverflow.com/users/12134401/l1-cache"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 59128572, "answer_count": 1, "score": 0, "last_activity_date": 1575224591, "creation_date": 1574879759, "question_id": 59076582, "link": "https://stackoverflow.com/questions/59076582/what-is-map-default-buffer-on-direct3d-12-0", "title": "What is &quot;Map Default Buffer&quot; on Direct3D 12.0?", "body": "<p>On <a href=\"https://docs.microsoft.com/en-us/windows/win32/direct3d11/overviews-direct3d-11-devices-downlevel-intro\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/win32/direct3d11/overviews-direct3d-11-devices-downlevel-intro</a> I see the feature \"Map Default Buffer\" which is an optional feature since feature level 11_0. What can I make with this?\nWhich advantages provide this feature?\nWhich GPUs support it?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1574879828, "post_id": 59076549, "comment_id": 104390373, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> into your question. As well as some inpout samples (short ones and long ones) with the expected output. You can <a href=\"https://stackoverflow.com/posts/59076549/edit\">edit</a> your question."}, {"owner": {"reputation": 929, "user_id": 4253931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b751517b9a663cda1d8ab07027bb59a?s=128&d=identicon&r=PG&f=1", "display_name": "eike", "link": "https://stackoverflow.com/users/4253931/eike"}, "edited": false, "score": 0, "creation_date": 1574880310, "post_id": 59076549, "comment_id": 104390561, "body": "Why did you decide to store numbers as strings when <code>int</code> exists?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1574880357, "post_id": 59076549, "comment_id": 104390584, "body": "These are very big numbers. I assume part of the task of this problem is to implement your own big number arithmetic."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7803674"}, "reply_to_user": {"reputation": 929, "user_id": 4253931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b751517b9a663cda1d8ab07027bb59a?s=128&d=identicon&r=PG&f=1", "display_name": "eike", "link": "https://stackoverflow.com/users/4253931/eike"}, "edited": false, "score": 0, "creation_date": 1574880398, "post_id": 59076549, "comment_id": 104390602, "body": "@eike Because we have a memory limit of 32mb"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1574880459, "post_id": 59076549, "comment_id": 104390633, "body": "You could do this with a vector of <code>ints</code> and use less memory however it will be more complicated."}, {"owner": {"reputation": 929, "user_id": 4253931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b751517b9a663cda1d8ab07027bb59a?s=128&d=identicon&r=PG&f=1", "display_name": "eike", "link": "https://stackoverflow.com/users/4253931/eike"}, "edited": false, "score": 1, "creation_date": 1574880824, "post_id": 59076549, "comment_id": 104390778, "body": "@AdamSo\u0142tan But when you store each digit in a char, you waste most of those 8 bits. Since <code>log_2(10^100000 * 2) &#47; 8</code> equals about 41524. Each number needs about 41kb space, when stored in the usual integer format, but with a char for each digit, you need 100000bytes = 100kb for each number."}, {"owner": {"reputation": 929, "user_id": 4253931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b751517b9a663cda1d8ab07027bb59a?s=128&d=identicon&r=PG&f=1", "display_name": "eike", "link": "https://stackoverflow.com/users/4253931/eike"}, "edited": false, "score": 0, "creation_date": 1574881146, "post_id": 59076549, "comment_id": 104390895, "body": "<a href=\"https://github.com/faheel/BigInt\" rel=\"nofollow noreferrer\">github.com/faheel/BigInt</a> solves this in a header only library that should not be a problem for your 32mb binary limit. If you don&#39;t want to / aren&#39;t allowed to use libraries, you could look at the source and implement something similar for yourself"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1574900278, "post_id": 59076549, "comment_id": 104397214, "body": "real bigint libraries never store each digit as a char. <a href=\"https://stackoverflow.com/a/23840686/995714\">They deal with bigger bases</a> like 2&#179;&#178; or 2\u2076\u2074 for 32 and 64-bit computers respectively for maximum speed and minimum overhead (virtually zero). In case fast input/output is needed then base 10\u2079 or 10&#185;\u2079 for 32 and 64-bit PCs is used instead"}], "answers": [{"tags": [], "owner": {"reputation": 1602, "user_id": 250826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e7ee10e2c270d217eb7eec6be9bb53?s=128&d=identicon&r=PG", "display_name": "ahans", "link": "https://stackoverflow.com/users/250826/ahans"}, "is_accepted": true, "score": 0, "last_activity_date": 1574893681, "creation_date": 1574893681, "answer_id": 59079289, "question_id": 59076549, "link": "https://stackoverflow.com/questions/59076549/adding-negative-and-positive-numbers-up-to-10100000/59079289#59079289", "title": "Adding negative and positive numbers up to 10^100000", "body": "<p>While I think your overall approach is totally reasonable for this problem, your implementation seems a bit too complicated. Trying to solve this myself, I came up with this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;limits&gt;\n#include &lt;random&gt;\n#include &lt;string&gt;\n\nbool greater(const std::string&amp; a, const std::string&amp; b)\n{\n    if (a.length() == b.length()) return a &gt; b;\n    return a.length() &gt; b.length();\n}\n\nstd::string add(std::string a, std::string b)\n{\n    std::string out;\n\n    bool aNeg = a[0] == '-';\n    if (aNeg) a.erase(0, 1);\n    bool bNeg = b[0] == '-';\n    if (bNeg) b.erase(0, 1);\n\n    bool resNeg = aNeg &amp;&amp; bNeg;\n    if (aNeg ^ bNeg &amp;&amp; (aNeg &amp;&amp; greater(a, b) || bNeg &amp;&amp; greater(b, a)))\n    {\n        resNeg = true;\n        std::swap(a, b);\n    }\n\n    int i = a.length() - 1;\n    int j = b.length() - 1;\n    int carry = 0;\n    while (i &gt;= 0 || j &gt;= 0)\n    {\n        const int digitA = (i &gt;= 0) ? a[i] - '0' : 0;\n        const int digitB = (j &gt;= 0) ? b[j] - '0' : 0;\n        const int sum = (aNeg == bNeg ? digitA + digitB : (bNeg ? digitA - digitB : digitB - digitA)) + carry;\n        carry = 0;\n        if (sum &gt;= 10) carry = 1;\n        else if (sum &lt; 0) carry = -1;\n\n        out = std::to_string((sum + 20) % 10) + out;\n\n        i--;\n        j--;\n    }\n    if (carry) out = '1' + out;\n    while (out[0] == '0') out.erase(0, 1);\n    if (resNeg) out = '-' + out;\n    return out;\n}\n\n\nvoid test()\n{\n    std::random_device rd;\n    std::mt19937 gen(rd());\n    std::uniform_int_distribution&lt;&gt; dis(-std::numeric_limits&lt;int32_t&gt;::max(), std::numeric_limits&lt;int32_t&gt;::max());\n    for (int i = 0; i &lt; 1000000; ++i)\n    {\n        const int64_t a = dis(gen);\n        const int64_t b = dis(gen);\n        const auto expected = std::to_string(a + b);\n        const auto actual = add(std::to_string(a), std::to_string(b));\n        if (actual != expected) {\n            std::cout &lt;&lt; \"mismatch expected: \" &lt;&lt; expected &lt;&lt; std::endl;\n            std::cout &lt;&lt; \"mismatch actual  : \" &lt;&lt; actual &lt;&lt; std::endl;\n            std::cout &lt;&lt; \"                a: \" &lt;&lt; a &lt;&lt; std::endl;\n            std::cout &lt;&lt; \"                b: \" &lt;&lt; b &lt;&lt; std::endl;\n        }\n    }\n}\n\nint main()\n{\n    test();\n}\n</code></pre>\n\n<p>It can potentially be further optimized, but the main points are:</p>\n\n<ul>\n<li>If the sign of both numbers is the same, we can do simple written addition. If both are negative, we simply prepend <code>-</code> at the end.</li>\n<li>If the signs are different, we do written subtraction. If the minuend is greater than the subtrahend, there's no issue, we know that the result will be positive. If, however, the subtrahend is greater, we have to reformulate the problem. For example, <code>123 - 234</code> we would formulate as <code>-(234 - 123)</code>. The inner part we can solve using regular written subtraction, after which we prepend <code>-</code>.</li>\n</ul>\n\n<p>I test this with random numbers for which we can calculate the correct result using regular integer arithmetic. Since it doesn't fail for those, I'm pretty confident it also works correctly for larger inputs. An approach like this could also help you uncover cases where your implementation fails.</p>\n\n<p>Other than that, I think you should use a known failing case with a debugger or simply print statements for the intermediate steps to see where it fails. The only small differences in the failing example you posted could point at some issue with handling a carry-over.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7803674"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 59079289, "answer_count": 1, "score": 0, "last_activity_date": 1574893681, "creation_date": 1574879591, "question_id": 59076549, "link": "https://stackoverflow.com/questions/59076549/adding-negative-and-positive-numbers-up-to-10100000", "title": "Adding negative and positive numbers up to 10^100000", "body": "<p>I've been trying to solve this problem (from school) for just about a week now. We're given two numbers, from -(10^100000) to +that.</p>\n\n<p>Of course the simplest solution is to implement written addition, so that's what I did. I decided, that I would store the numbers as strings, using two functions:</p>\n\n<pre><code>int ti(char a) { // changes char to int\n    int output = a - 48;\n    return output;\n}\n\nchar tc(int a) { // changes int to char\n    char output = a + 48;\n    return output;\n}\n</code></pre>\n\n<p>This way I can store negative digits, like -2. With that in mind I implemented a toMinus function:</p>\n\n<pre><code>void toMinus(std::string &amp;a) { // 123 -&gt; -1 -2 -3\n    for (auto &amp;x : a) {\n        x = tc(-ti(x));\n    }\n}\n</code></pre>\n\n<p>I also created a changeSize function, which adds 0 to the beginning of the number until they are both their max size + 1 and removeZeros, which removes leading zeros:</p>\n\n<pre><code>void changeSize(std::string &amp;a, std::string &amp;b) {\n    size_t exp_size = std::max(a.size(), b.size()) + 2;\n    while (a.size() != exp_size) {\n        a = '0' + a;\n    }\n\n    while (b.size() != exp_size) {\n        b = '0' + b;\n    }\n}\n\nvoid removeZeros(std::string &amp;a) {\n    int i = 0;    \n    for (; i &lt; a.size(); i++) {\n        if (a[i] != '0') {\n            break;\n        }\n    }\n    a.erase(0, i);\n    if (a.size() == 0) {\n        a = \"0\";\n    }\n}\n</code></pre>\n\n<p>After all that, I created the main add() function:</p>\n\n<pre><code>std::string add(std::string &amp;a, std::string &amp;b) {\n    bool neg[2] = {false, false};\n    bool out_negative = false;\n    if (a[0] == '-') {\n        neg[0] = true;\n        a.erase(0, 1);\n    }\n    if (b[0] == '-') {\n        neg[1] = true;\n        b.erase(0, 1);\n    }\n\n    changeSize(a, b);\n\n    if (neg[0] &amp;&amp; !(neg[1] &amp;&amp; neg[0])) {\n        toMinus(a);\n    }\n    if(neg[1] &amp;&amp; !(neg[1] &amp;&amp; neg[0])) {\n        toMinus(b);\n    }\n\n    if (neg[1] &amp;&amp; neg[0]) {\n        out_negative = true;\n    }\n\n    // Addition\n    for (int i = a.size() - 1; i &gt; 0; i--) {\n        int _a = ti(a[i]);\n        int _b = ti(b[i]);\n        int out = _a + _b;\n        if (out &gt;= 10) {\n            a[i - 1] += out / 10;\n        } else if (out &lt; 0) {\n            if (abs(out) &lt; 10) {\n                a[i - 1]--;\n            } else {\n                a[i - 1] += abs(out) / 10;\n            }\n            if (i != 1)\n                out += 10;\n        }\n\n        a[i] = tc(abs(out % 10));\n    }\n\n    if (ti(a[0]) == -1) { // Overflow\n        out_negative = true;\n        a[0] = '0';\n        a[1]--;\n\n        for (int i = 2; i &lt; a.size(); i++) {\n            if (i == a.size() - 1) {\n                a[i] = tc(10 - ti(a[i]));\n            } else {\n                a[i] = tc(9 - ti(a[i]));\n            }\n        }\n    }\n\n    if (neg[0] &amp;&amp; neg[1]) {\n        out_negative = true;\n    }\n\n    removeZeros(a);\n\n    if (out_negative) {\n        a = '-' + a;\n    }\n\n    return a;\n}\n</code></pre>\n\n<p>This program works in most cases, although our school checker found that it doesn't - like instead of</p>\n\n<pre><code>-4400547114413430129608370706728634555709161366260921095898099024156859909714382493551072616612065064\n</code></pre>\n\n<p>it returned</p>\n\n<pre><code>-4400547114413430129608370706728634555709161366260921095698099024156859909714382493551072616612065064\n</code></pre>\n\n<p>I can't find what the problem is. Please help and thank you in advance.</p>\n\n<p><a href=\"https://pastebin.com/5aBaha5a\" rel=\"nofollow noreferrer\">Full code on pastebin</a></p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 10787773, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ydoWErjkELk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-imyh7TkyQBAZyzFwLOuanIQ5AQDQ/mo/photo.jpg?sz=128", "display_name": "tin tan", "link": "https://stackoverflow.com/users/10787773/tin-tan"}, "edited": false, "score": 0, "creation_date": 1574887313, "post_id": 59076650, "comment_id": 104393353, "body": "But, isn&#39;t this a matter of choice whether I should modify my parameters to be constant or not? What does the &quot;const&quot; keyword indicate here?"}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "reply_to_user": {"reputation": 49, "user_id": 10787773, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ydoWErjkELk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-imyh7TkyQBAZyzFwLOuanIQ5AQDQ/mo/photo.jpg?sz=128", "display_name": "tin tan", "link": "https://stackoverflow.com/users/10787773/tin-tan"}, "edited": false, "score": 0, "creation_date": 1574893223, "post_id": 59076650, "comment_id": 104395487, "body": "It is a matter of choice. The reason I say should is because the idiomatic way of writing an <code>operator+</code> is to not modify the parameter. If I used your class and wrote <code>test3 = test1 + test2</code> and that modified either of <code>test1&#47;test2</code> I would be very surprised. I will update the answer with a more detailed explanation."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1574898770, "post_id": 59076650, "comment_id": 104396913, "body": "Terminology - <code>const int&amp;</code> is also an lvalue reference; you can say &quot;const lvalue reference&quot; or &quot;non-const lvalue reference&quot; to distinguish."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1574899016, "post_id": 59076650, "comment_id": 104396975, "body": "@M.M Noted, not sure where/what in my answer you feel is misusing terminology though."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1574899143, "post_id": 59076650, "comment_id": 104397006, "body": "@super in the first two paragraphs for example, it implies that an lvalue reference is incorrect (but the correct fix is also an lvalue reference, just a const one) . Or maybe by &quot;accepts an lvalue reference&quot; you mean &quot;accepts only an lvalue&quot; ."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1574899410, "post_id": 59076650, "comment_id": 104397055, "body": "@M.M Oh, I see. I meant &quot;lvalue-reference&quot;, not &quot;const lvalue-reference&quot;. I&#39;m not used to hearing it used as refering to either one of the two."}, {"owner": {"reputation": 49, "user_id": 10787773, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ydoWErjkELk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-imyh7TkyQBAZyzFwLOuanIQ5AQDQ/mo/photo.jpg?sz=128", "display_name": "tin tan", "link": "https://stackoverflow.com/users/10787773/tin-tan"}, "edited": false, "score": 0, "creation_date": 1575021518, "post_id": 59076650, "comment_id": 104437281, "body": "So, even temporary allocated locations in the memory for hosting the value returned by functions are considered rvalues, too?  I thought only literals like (5, c) which do not have a memory location rvalues."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "reply_to_user": {"reputation": 49, "user_id": 10787773, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ydoWErjkELk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-imyh7TkyQBAZyzFwLOuanIQ5AQDQ/mo/photo.jpg?sz=128", "display_name": "tin tan", "link": "https://stackoverflow.com/users/10787773/tin-tan"}, "edited": false, "score": 0, "creation_date": 1575032816, "post_id": 59076650, "comment_id": 104442535, "body": "@tintan Loosely speaking, anything that you can&#39;t refer to with a name is an rvalue."}], "tags": [], "owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "is_accepted": true, "score": 2, "last_activity_date": 1574899453, "last_edit_date": 1574899453, "creation_date": 1574880163, "answer_id": 59076650, "question_id": 59076523, "link": "https://stackoverflow.com/questions/59076523/constructors-for-automatic-type-conversion-when-passing-a-built-in-type-variable/59076650#59076650", "title": "Constructors for Automatic Type Conversion when passing a built-in type variable to a &quot;+&quot; operator function having only one class-type argument", "body": "<p>The reason you get a compilation error is because <code>operator+</code> accepts a non-const lvalue-reference.</p>\n\n<p>If you change the signature of the operator to take a <code>const test&amp;</code> it will be able to bind to an rvalue and this will compile.</p>\n\n<pre><code>test operator +(const test&amp; sub) {\n    ...\n}\n</code></pre>\n\n<p>Since the method does not modify <code>sub</code> it should take a const-ref.</p>\n\n<p><strong>Edit:</strong>\nThe <code>const</code> keyword makes an important difference here because of the value category. First let's look at a simple example.</p>\n\n<pre><code>void foo(int&amp; i) {\n    i = 5;\n}\n\nint b;\n\nfoo(b); //this is ok\nfoo(7); //this is not ok\n</code></pre>\n\n<p>We specified that we wanted an lvalue reference. That means we can pass in a variable, but not a temporary. In this case the temporary is a literal, but it could also be the return value from another function.</p>\n\n<p>If we go back to your question, when you write <code>obj1 + x</code> you are already aware that there is a conversion happening from <code>int</code> to <code>test</code>. The returned value of that conversion is a temporary value.</p>\n\n<p>If we want to handle an rvalue (a temporary) we need to use an rvalue-reference.</p>\n\n<pre><code>void foo(int&amp;&amp; i) {\n    i = 5;\n}\n\nint x;\n\nfoo(x); // Now this will fail instead\nfoo(5); // This will however work\n</code></pre>\n\n<p>When we use a <code>const&amp;</code> we are saying that we will not modify the value, and since we have promised to not modify it, it does not really matter if it's a temporary or not. We are only going to read from it anyway.</p>\n\n<p>That's why a <code>const&amp;</code> can bind to either an lvalue or and rvalue.</p>\n\n<pre><code>void foo(const int&amp; i) {\n    std::cout &lt;&lt; i;\n}\n\nint x = 7;\n\nfoo(x); // This will work\nfoo(17); // This will also work\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 10787773, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ydoWErjkELk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-imyh7TkyQBAZyzFwLOuanIQ5AQDQ/mo/photo.jpg?sz=128", "display_name": "tin tan", "link": "https://stackoverflow.com/users/10787773/tin-tan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 59076650, "answer_count": 1, "score": 1, "last_activity_date": 1574899453, "creation_date": 1574879504, "question_id": 59076523, "link": "https://stackoverflow.com/questions/59076523/constructors-for-automatic-type-conversion-when-passing-a-built-in-type-variable", "title": "Constructors for Automatic Type Conversion when passing a built-in type variable to a &quot;+&quot; operator function having only one class-type argument", "body": "<p>I have the following code: </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std; \n\nclass test {\npublic:\n    test() {\n        for (int i = 0; i &lt; 5; i++)\n            this-&gt;arr[i] = 0; \n    }\n    test(int val) {\n        for (int i = 0; i &lt; 5; i++)\n            this-&gt;arr[i] = val;\n    }\n    test(int* a) {\n        for (int i = 0; i &lt; 5; i++) \n            this-&gt;arr[i] = a[i]; \n    }\n    test operator +(test&amp; sub) {\n        int arr1[5];\n        for (int i = 0; i &lt; 5; i++) {\n            arr1[i] = this-&gt;arr[i] + sub.arr[i];\n        }\n        return test(arr1);\n    }\n    void display() {\n        cout &lt;&lt; \"The array is: \"; \n        for (int i = 0; i &lt; 5; i++) {\n            cout &lt;&lt; this-&gt;arr[i] &lt;&lt; \"\\t\"; \n        }\n    }\nprivate: \n    int arr[5];\n};\n\nint main() {\n    int x = 5;\n    test obj1(5), obj2(1); \n    obj2 = obj1 + x; //Error here\n    obj2.display();\n    return 0; \n}\n</code></pre>\n\n<p>Which seeks to test overloading the \"+\" operator by adding the \"arr\" member variable of two objects, return an object with the result and assign it to obj2 in the main function. However, according to the book, \"Absolute C++\", it is also possible to pass an integer to the \"+\" function, as it is now, by first converting the integer, through a constructor in the \"test\" class, to \"test\" type given that this constructor accepts variable of type integer as its argument. Then, the resultant object which has the value of \"x\" will be passed to the \"+\" function and it would work as it should.</p>\n\n<p>However, the code doesn't compile and I get an error for trying this: There's no \"+\" operator matching these operands. So, what could possibly be the problem in my code in interpreting the book's details?</p>\n"}, {"tags": ["c++", "visual-studio", "opencv"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1574881127, "post_id": 59076407, "comment_id": 104390887, "body": "Maybe you need to file a bug report with your minimal example code and image."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1574889160, "post_id": 59076407, "comment_id": 104394107, "body": "It&#39;s interesting that the error points to VC 2107 sources instead of 2019 but your binaries are vc15. With that said there is supposed to be binary compatibility between VS2015 to 2019."}], "answers": [{"tags": [], "owner": {"reputation": 156, "user_id": 11872892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097a1964eeb59445181a721534b5a004?s=128&d=identicon&r=PG&f=1", "display_name": "Suarez Zhou", "link": "https://stackoverflow.com/users/11872892/suarez-zhou"}, "is_accepted": false, "score": 0, "last_activity_date": 1575008829, "last_edit_date": 1575008829, "creation_date": 1575008002, "answer_id": 59099583, "question_id": 59076407, "link": "https://stackoverflow.com/questions/59076407/opencv-houghtransformp-does-not-work-cpp-visual-studio-2019/59099583#59099583", "title": "OpenCV houghTransformP does not work (CPP, Visual Studio 2019)", "body": "<p>Try to compile your project in release mode.</p>\n\n<p><a href=\"https://i.stack.imgur.com/gUQi0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gUQi0.png\" alt=\"enter image description here\"></a></p>\n\n<p>My property setting is as follow: I added opencv_world310.lib. This file is for release mode, and opencv_world310d.lib is for Debug mode. I guess you didn't pay attention to the configuration of debug and release modes when you first used OpenCV, which led to this error.</p>\n"}], "owner": {"reputation": 1, "user_id": 12290780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9902ae78b27f705b0bfad6a7d4cadf10?s=128&d=identicon&r=PG&f=1", "display_name": "erni27", "link": "https://stackoverflow.com/users/12290780/erni27"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575008829, "creation_date": 1574879078, "last_edit_date": 1574889061, "question_id": 59076407, "link": "https://stackoverflow.com/questions/59076407/opencv-houghtransformp-does-not-work-cpp-visual-studio-2019", "title": "OpenCV houghTransformP does not work (CPP, Visual Studio 2019)", "body": "<p>I'm trying to use following method: </p>\n\n<pre><code>// Probabilistic Line Transform\nvector&lt;Vec4i&gt; linesP; // will hold the results of the detection\nHoughLinesP(dst, linesP, 1, CV_PI/180, 50, 50, 10 ); // runs the actual detection\n</code></pre>\n\n<p>I'm using excatly the same code like in the OpenCV documentation from here <a href=\"https://docs.opencv.org/3.4/d9/db0/tutorial_hough_lines.html\" rel=\"nofollow noreferrer\">OpenCV Documentation</a>.\nI struggle with following error: </p>\n\n<p><img src=\"https://i.stack.imgur.com/08y1C.png\" alt=\"Error which appeared\"></p>\n\n<p>Don't know how to handle with it. I was looking for the solution but I couldn't find anything. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1574879545, "post_id": 59076395, "comment_id": 104390250, "body": "are you looking for <code>if(myc == &#39;\\n&#39;) break;</code>? Or alternatively <code>while((cin &gt;&gt; myc) &amp;&amp; (myc != &#39;\\n&#39;))</code>?"}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1574884729, "post_id": 59076395, "comment_id": 104392377, "body": "@user253751 That doesn&#39;t work because <code>std::istream::operator&gt;&gt;</code> is formatted read and skips newline."}], "answers": [{"tags": [], "owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "is_accepted": true, "score": 0, "last_activity_date": 1574884787, "last_edit_date": 1574884787, "creation_date": 1574879535, "answer_id": 59076534, "question_id": 59076395, "link": "https://stackoverflow.com/questions/59076395/determining-the-end-of-user-char-input-c/59076534#59076534", "title": "determining the end of user char input c++", "body": "<p>You have to check for line break but you can't do it with <code>std::istream::operator&gt;&gt;</code> because it is formatted read and skips newline. Use </p>\n\n<pre><code>char myc;\nwhile ((myc = cin.get()) != '\\n')\n   dosomething(myc);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1574879897, "creation_date": 1574879897, "answer_id": 59076605, "question_id": 59076395, "link": "https://stackoverflow.com/questions/59076395/determining-the-end-of-user-char-input-c/59076605#59076605", "title": "determining the end of user char input c++", "body": "<p>To read a stream character-wise use <a href=\"https://en.cppreference.com/w/cpp/io/basic_istream/get\" rel=\"nofollow noreferrer\"><code>std::basic_istream&lt;CharT,Traits&gt;::get</code></a> function:</p>\n\n<pre><code>for(char c; std::cin.get(c);) {\n    std::cout &lt;&lt; c;\n}\n</code></pre>\n"}], "owner": {"reputation": 36, "user_id": 5720680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60e5f214ad28f0492368f1be4b96ba6?s=128&d=identicon&r=PG&f=1", "display_name": "Soheil_r", "link": "https://stackoverflow.com/users/5720680/soheil-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 59076534, "answer_count": 2, "score": -1, "last_activity_date": 1574884787, "creation_date": 1574879023, "question_id": 59076395, "link": "https://stackoverflow.com/questions/59076395/determining-the-end-of-user-char-input-c", "title": "determining the end of user char input c++", "body": "<p>i want to proccess user input which is a line of string. with string library it's just easy as <code>cin &gt;&gt; mystring;</code> , but for performance reasons, i'd like to process a character at a time without saving previous characters or using any kind of arrays. so i wrote this code:</p>\n\n<pre><code>char myc;\nwhile(cin &gt;&gt; myc){\n   dosomething(myc);\n}\n</code></pre>\n\n<p>but after writing a line of string as input and hitting enter, it processes input characters and still waits for more input characters to come.\ni also used <code>cin.eof()</code> and <code>while(myc)</code> but none of them worked.</p>\n"}, {"tags": ["c++", "qt", "qml", "qt5"], "answers": [{"comments": [{"owner": {"reputation": 1816, "user_id": 10150736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bed9cdb705538c68aa60a67d628d1cc0?s=128&d=identicon&r=PG&f=1", "display_name": "Emanuele", "link": "https://stackoverflow.com/users/10150736/emanuele"}, "edited": false, "score": 0, "creation_date": 1574880907, "post_id": 59076711, "comment_id": 104390810, "body": "thank you very much for reading my question :) . Could you please explain better you answer putting in more detail what in the code should be modified?"}, {"owner": {"reputation": 179, "user_id": 717599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9155f436265f2c7f84a670b23c3f9bf2?s=128&d=identicon&r=PG", "display_name": "bialy", "link": "https://stackoverflow.com/users/717599/bialy"}, "reply_to_user": {"reputation": 1816, "user_id": 10150736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bed9cdb705538c68aa60a67d628d1cc0?s=128&d=identicon&r=PG&f=1", "display_name": "Emanuele", "link": "https://stackoverflow.com/users/10150736/emanuele"}, "edited": false, "score": 1, "creation_date": 1574883154, "post_id": 59076711, "comment_id": 104391694, "body": "I put some code in my repository: <a href=\"https://github.com/bialasjaroslaw/ProgressBar/tree/master\" rel=\"nofollow noreferrer\">github.com/bialasjaroslaw/ProgressBar/tree/master</a>  The only thing you need to add is to connect QFutureWatcher signal to something that will emit progressChanged(): <a href=\"https://doc.qt.io/qt-5/qfuturewatcher.html#progressValueChanged\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qfuturewatcher.html#progressValueChanged</a>  I will add it in couple minutes."}, {"owner": {"reputation": 3580, "user_id": 3246449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Oh5uF.jpg?s=128&g=1", "display_name": "Maxim Paperno", "link": "https://stackoverflow.com/users/3246449/maxim-paperno"}, "edited": false, "score": 0, "creation_date": 1574888141, "post_id": 59076711, "comment_id": 104393687, "body": "The <code>volatile</code> is there (I presume) so that the compiler doesn&#39;t optimize out the whole loop because otherwise it can tell the variable <code>v</code> is never actually used. The exact behavior will depend on compiler and optimization level, but it&#39;s safer to be sure. It&#39;s fairly common practice in benchmarks and test loops like this. A benchmark can return some pretty amazing results when the compiler got rid of all the actual code...  :-)"}, {"owner": {"reputation": 179, "user_id": 717599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9155f436265f2c7f84a670b23c3f9bf2?s=128&d=identicon&r=PG", "display_name": "bialy", "link": "https://stackoverflow.com/users/717599/bialy"}, "edited": false, "score": 0, "creation_date": 1574890800, "post_id": 59076711, "comment_id": 104394691, "body": "I prefer Chandler&#39;s trick with asm volatile :) <a href=\"https://www.youtube.com/watch?v=nXaxk27zwlk&amp;feature=youtu.be&amp;t=42m42s\" rel=\"nofollow noreferrer\">youtube.com/&hellip;</a>"}, {"owner": {"reputation": 1816, "user_id": 10150736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bed9cdb705538c68aa60a67d628d1cc0?s=128&d=identicon&r=PG&f=1", "display_name": "Emanuele", "link": "https://stackoverflow.com/users/10150736/emanuele"}, "edited": false, "score": 0, "creation_date": 1574891241, "post_id": 59076711, "comment_id": 104394833, "body": "@bialy, thank you very much, I see what you mean. it works, however I don&#39;t see you used the property <code>Q_INVOKABLE</code> in the example"}, {"owner": {"reputation": 1816, "user_id": 10150736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bed9cdb705538c68aa60a67d628d1cc0?s=128&d=identicon&r=PG&f=1", "display_name": "Emanuele", "link": "https://stackoverflow.com/users/10150736/emanuele"}, "reply_to_user": {"reputation": 3580, "user_id": 3246449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Oh5uF.jpg?s=128&g=1", "display_name": "Maxim Paperno", "link": "https://stackoverflow.com/users/3246449/maxim-paperno"}, "edited": false, "score": 0, "creation_date": 1574891575, "post_id": 59076711, "comment_id": 104394965, "body": "@MaximPaperno, yes exactly, I was doing some benchmark test on a long running cycle but needed to implement it in <code>QML</code>. The <code>volatile</code> I used to be safer than sure :)"}, {"owner": {"reputation": 179, "user_id": 717599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9155f436265f2c7f84a670b23c3f9bf2?s=128&d=identicon&r=PG", "display_name": "bialy", "link": "https://stackoverflow.com/users/717599/bialy"}, "reply_to_user": {"reputation": 1816, "user_id": 10150736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bed9cdb705538c68aa60a67d628d1cc0?s=128&d=identicon&r=PG&f=1", "display_name": "Emanuele", "link": "https://stackoverflow.com/users/10150736/emanuele"}, "edited": false, "score": 0, "creation_date": 1574923079, "post_id": 59076711, "comment_id": 104402277, "body": "@Emanuele <code>Q_INVOKABLE</code> is used to mark a function as a callable from QML context. Other way is to implement is as a slot (which I did in this case). <a href=\"https://doc.qt.io/qt-5/qtqml-cppintegration-exposecppattributes.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qtqml-cppintegration-exposecppattributes.html</a>"}], "tags": [], "owner": {"reputation": 179, "user_id": 717599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9155f436265f2c7f84a670b23c3f9bf2?s=128&d=identicon&r=PG", "display_name": "bialy", "link": "https://stackoverflow.com/users/717599/bialy"}, "is_accepted": true, "score": 2, "last_activity_date": 1574880453, "creation_date": 1574880453, "answer_id": 59076711, "question_id": 59076386, "link": "https://stackoverflow.com/questions/59076386/qt5-qml-how-to-properly-connect-a-progressbar-with-button-for-long-running-lo/59076711#59076711", "title": "Qt5 - QML: How to properly connect a ProgressBar with Button for long-running loop calculation", "body": "<p>Q_PROPERTY is designed to easier read/write/react to variable change (C++ side) on the QML side. To complete your example with variable read/write/notify add correct getter/setter (signal is already ok).</p>\n\n<pre><code>float progress();\nvoid setProgress(float);\n</code></pre>\n\n<p>If you want to call a function from QML mark it Q_INVOKABLE instead.\nAlso what is the point of volatile in your code?</p>\n\n<p>So to sum up, mark your iteration function as a Q_INVOKABLE. It will increment some internal progress value and then emit progressChanged(). This should cause QML side to update.</p>\n"}], "owner": {"reputation": 1816, "user_id": 10150736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bed9cdb705538c68aa60a67d628d1cc0?s=128&d=identicon&r=PG&f=1", "display_name": "Emanuele", "link": "https://stackoverflow.com/users/10150736/emanuele"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "accepted_answer_id": 59076711, "answer_count": 1, "score": 1, "last_activity_date": 1574880453, "creation_date": 1574878999, "question_id": 59076386, "link": "https://stackoverflow.com/questions/59076386/qt5-qml-how-to-properly-connect-a-progressbar-with-button-for-long-running-lo", "title": "Qt5 - QML: How to properly connect a ProgressBar with Button for long-running loop calculation", "body": "<p>I am connecting a <code>ProgressBar</code> to two <code>Buttons</code>. The <code>ProgressBar</code> will do a computation of a loop as soon as I push the button. The computation will be erased if I will push the other button. I still haven't implemented the <code>pause</code> button.</p>\n\n<p>The print screen of what I am trying to achieve is below and in case needed the whole code of the <strong>minimal verifiable example</strong> is available <a href=\"https://bitbucket.org/ERaggi/pbar/src/master/\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<p><img src=\"https://i.imgur.com/fv62JSX.png\" alt=\"pbar\"></p>\n\n<p><strong>The problem</strong> is that as soon as I connect the <code>ProgressBar</code> with my <code>main.cpp</code> file I have a bunch of errors all that look like the following: \n<code>class ProgressDialog has no member named...</code></p>\n\n<p><img src=\"https://i.imgur.com/LRJQZAC.png\" alt=\"error\"></p>\n\n<p>code is below:</p>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include &lt;QGuiApplication&gt;\n#include &lt;QQmlApplicationEngine&gt;\n#include &lt;QQuickView&gt;\n#include \"progressbardialog.h\"\n\nint main(int argc, char *argv[])\n{\n    QCoreApplication::setAttribute(Qt::AA_EnableHighDpiScaling);\n    QGuiApplication app(argc, argv);\n\n    QQuickView view;\n    ProgressBarDialog progressDialog;\n\n    // One way but it does not work\n    // engine.rootContext()-&gt;setContextProperty(\"control\", QVariant::fromValue(progressDialog.refModel()));\n    // Another way but this also does not work\n    view.setSource(QUrl::fromLocalFile(\"main.qml\"));\n\n    QQmlApplicationEngine engine;\n    const QUrl url(QStringLiteral(\"qrc:/main.qml\"));\n    QObject::connect(&amp;engine, &amp;QQmlApplicationEngine::objectCreated,\n                     &amp;app, [url](QObject *obj, const QUrl &amp;objUrl) {\n        if (!obj &amp;&amp; url == objUrl)\n            QCoreApplication::exit(-1);\n    }, Qt::QueuedConnection);\n    engine.load(url);\n\n    return app.exec();\n}\n</code></pre>\n\n<p><strong>progressbardialog.h</strong></p>\n\n<pre><code>#ifndef PROGRESSBARDIALOG_H\n#define PROGRESSBARDIALOG_H\n\n#include &lt;QObject&gt;\n#include &lt;QFutureWatcher&gt;\n\nclass ProgressBarDialog : public QObject\n{\n    Q_OBJECT\n    Q_PROPERTY(float progress READ progress WRITE setProgress NOTIFY progressChanged)\npublic:\n    ProgressBarDialog();\n    float progress(int &amp;iterator);\n    // I will use this as a reference to pass to main.cpp using setContextProperty()\n    QObject &amp;refModel()\n    {\n        return m_Model;\n    }\n\npublic Q_SLOTS:\n    void startComputation();\n    void cancelComputation();\nsignals:\n    void progressChanged();\nprivate:\n    int m_progressValue;\n    QObject m_Model;\n    QFutureWatcher&lt;void&gt; m_futureWatcher;\n};\n\n#endif // PROGRESSBARDIALOG_H\n</code></pre>\n\n<p><strong>progressbardialog.cpp</strong></p>\n\n<pre><code>#include \"progressbardialog.h\"\n#include &lt;QtConcurrent/QtConcurrentMap&gt;\n\n\nProgressBarDialog::ProgressBarDialog()\n{}\n\nvoid spin(int &amp;iteration)\n{\n    const int work = 1000 * 1000 * 40;\n    volatile int v = 0;\n    for(int j = 0; j &lt; work; ++j)\n        ++v;\n}\n\nfloat ProgressBarDialog::progress(int &amp;iterator)\n{\n    (void) iterator;\n    const int work = 1000 * 1000 * 40;\n    volatile int v = 0;\n    for(int j = 0; j &lt; work; ++j)\n        ++v;\n    emit progressChanged();\n}\n\nvoid ProgressBarDialog::startComputation()\n{\n    // Prepare the vector\n    QVector&lt;int&gt; vector;\n    for(int i = 0; i &lt; 40; ++i)\n        vector.append(i);\n    const QFuture&lt;void&gt; future = QtConcurrent::map(vector, spin);\n    m_futureWatcher.setFuture(future);\n}\n\nvoid ProgressBarDialog::cancelComputation()\n{\n    m_futureWatcher.cancel();\n}\n</code></pre>\n\n<p>and finally the <strong>main.qml</strong></p>\n\n<pre><code>import QtQuick 2.12                    // for the Item\nimport QtQuick.Controls 2.12           // for ApplicationWindow\nimport QtQuick.Layouts 1.12\n\nApplicationWindow {\n    visible: true\n    width: 440\n    height: 480\n    title: qsTr(\"Progress Bar\")\n    ColumnLayout {\n            spacing: 10\n            width: parent.width\n        GroupBox {\n            id: box1\n            title: \"Start - Stop\"\n            font.pointSize: 20\n            Layout.alignment: parent.width\n            spacing: 10\n            GridLayout {\n                width: parent.width\n                columns: 1\n                RowLayout {\n                    spacing: 200\n                    Layout.fillWidth: true\n                    Layout.fillHeight: false\n                    Button {\n                        id: buttonStart\n                        text: \"Start\"\n                        font.pointSize: 15\n                        enabled: !progressDialog.active\n                        onClicked: progressDialog.startComputation()\n                    }\n                    Button {\n                        id: buttonFinish\n                        text: \"Finish\"\n                        font.pointSize: 15\n                        enabled: progressDialog.cancelComputation()\n                    }\n                }\n            }\n        }\n        GroupBox {\n            id: boxprogress\n            title: \"Progressbar\"\n            font.pointSize: 20\n            Layout.alignment: parent.width\n            spacing: 10\n            GridLayout {\n                width: parent.width\n                columns: 1\n                RowLayout {\n                    Layout.fillWidth: true\n                    Layout.fillHeight: false\n                    ProgressBar {\n                        id: progressbar_id\n                        Layout.fillWidth: true\n                        Layout.fillHeight: true\n                        width: parent.width\n\n                        // These are hard-coded values to confirm it is working\n                        from: 0\n                        to: 100\n                        value: 5\n                        onValueChanged: {\n                            console.log(\"Progressbar value changed: \", progressbar_id.value)\n                        }\n                        onVisibleChanged: {\n                            console.log(\"Progressbar visibility changed: \", progressbar_id.visible)\n                        }\n                    }\n                    Connections {\n                        target: progressDialog\n                        onProgressChanged: progressbar_id.value = progress;\n                    }\n                    // This is working if clicking on the progressbar\n                    MouseArea {\n                        anchors.fill: parent\n                        onClicked: progressbar_id.value += 5;\n                    }\n                }\n            }\n    }\n}\n}\n</code></pre>\n\n<p><strong>What I tried so far</strong> :</p>\n\n<p><strong>1)</strong> In order to prove myself that the <code>ProgressBarDialog</code> is correctly working I tried it before as a stand alone <code>main.qml</code> using hard-coded values (which I left in the code so you can see what I have done). But as soon as I started implementing it in the <code>.cpp</code> file and setting the <code>Q_PROPERTY</code> I received all the errors I posted on the second screenshot.</p>\n\n<p><strong>2)</strong> I am sure about the procedure taken so far because: a) According to the <a href=\"https://doc.qt.io/qt-5/qfuturewatcher.html\" rel=\"nofollow noreferrer\">official documentation</a> and from <a href=\"https://stackoverflow.com/questions/12527141/how-can-i-use-a-qfuturewatcher-with-qtconcurrentrun-without-a-race-condition\">this post</a> because I will need to check the process of a long running operations; b) According to <a href=\"https://doc.qt.io/qt-5/qtconcurrent.html#map\" rel=\"nofollow noreferrer\">QtConcurrent</a> the process has a better possibility to be checked, and that is exactly what I did using <code>QtConcurrent::map()</code></p>\n\n<p><strong>3)</strong> I am using the following statement in the <strong>progressbardialog.h</strong> to make sure that the object is correctly connected and listens to the <code>QML</code> file:</p>\n\n<pre><code>QObject &amp;refModel()\n{\n    return m_Model;\n}\n</code></pre>\n\n<p>But this did n't show and substancial improvements. Therefore digging more into the process I was thinking that it should have been the case to use <code>setContextProperty()</code>, whih cled me to the next point.</p>\n\n<p><strong>4)</strong> According to the <a href=\"https://doc.qt.io/qt-5/qqmlcontext.html#setContextProperty\" rel=\"nofollow noreferrer\">official documentation</a> and according to <a href=\"https://stackoverflow.com/questions/28924622/diiference-between-setcontextproperty-and-setproperty-of-object\">this post here</a> I thought I would have fix the error, but it still remains.</p>\n\n<p>I am runnign out of ideas and anyone who may have had this problem, please point to the right direction for a possible solution.</p>\n"}, {"tags": ["c++", "oop", "memory-management"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1574878491, "post_id": 59076229, "comment_id": 104389772, "body": "It happens automatically when the life-time of the variable <code>pixel_plane</code> ends, which happens when the scope ends. That leads to the objects destruction and the memory being released (in an implementation-defined manner)."}, {"owner": {"reputation": 319, "user_id": 9189743, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BMSVCRwAURQ/AAAAAAAAAAI/AAAAAAAACiU/EhhX5wjv0qI/photo.jpg?sz=128", "display_name": "Cristopher Rosales", "link": "https://stackoverflow.com/users/9189743/cristopher-rosales"}, "edited": false, "score": 0, "creation_date": 1574878496, "post_id": 59076229, "comment_id": 104389773, "body": "If the object has a proper destructor, you don&#39;t need to. See: <a href=\"https://stackoverflow.com/questions/4036394/how-do-i-call-the-classs-destructor\" title=\"how do i call the classs destructor\">stackoverflow.com/questions/4036394/&hellip;</a>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1574878506, "post_id": 59076229, "comment_id": 104389778, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/441831/calling-delete-on-variable-allocated-on-the-stack\">Calling delete on variable allocated on the stack</a>"}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 4, "creation_date": 1574878527, "post_id": 59076229, "comment_id": 104389783, "body": "Why the vote down? The question is properly presented. You should not vote people down just because you know the answer, they do not, and you think it is elementary. <b>Every</b> student of C++ needs to learn the answer to this, so it is useful information for many people."}, {"owner": {"reputation": 115, "user_id": 8338615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/971aac686c830f2fb36f66efe5a70b63?s=128&d=identicon&r=PG", "display_name": "SuperSim135", "link": "https://stackoverflow.com/users/8338615/supersim135"}, "edited": false, "score": 0, "creation_date": 1574878723, "post_id": 59076229, "comment_id": 104389873, "body": "Is the memory automatically freed if <code>pixel_plane</code> is defined globally?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1574878840, "post_id": 59076229, "comment_id": 104389924, "body": "@SuperSim135 Yes, when the process terminates."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1574879439, "post_id": 59076229, "comment_id": 104390203, "body": "@SuperSim135: That&#39;s a different question."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1574879861, "post_id": 59076229, "comment_id": 104390389, "body": "Handy reading: <a href=\"https://en.cppreference.com/w/cpp/language/storage_duration\" rel=\"nofollow noreferrer\">Storage class specifiers</a> All of this is informative, but the section on Storage Duration is most relevant."}], "answers": [{"comments": [{"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1574879558, "post_id": 59076415, "comment_id": 104390260, "body": "Storage is freed when execution of the associated block ends, not when scope ends. Scope does not have any end in time, just in place. Scope is <b>where</b> in source code identifiers are visible. Storage duration or lifetime is <b>when</b> during program execution objects exist. An automatic object ceases to exist when execution of its associated block ends (and not merely when program control temporarily leaves the block, as when a subroutine is called)."}], "tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": false, "score": 3, "last_activity_date": 1574879596, "last_edit_date": 1574879596, "creation_date": 1574879121, "answer_id": 59076415, "question_id": 59076229, "link": "https://stackoverflow.com/questions/59076229/how-should-i-deallocate-the-memory-of-an-object-created-without-using-the-new/59076415#59076415", "title": "How should I deallocate the memory of an object created without using the &quot;new&quot; keyword?", "body": "<p><code>pixel_plane</code> is a variable with automatic storage duration (i.e. a normal local variable).</p>\n\n<p>It will be freed when execution of the enclosing scope ends (i.e. when the function returns).</p>\n\n<hr>\n\n<p>This is an example of a local variable that doesn't have automatic storage duration.</p>\n\n<pre><code>void my_function()\n{\n    static PixelPlane pixel_plane(960, 540, \"TITLE\");\n    // pixel_plane has static storage duration - it is not freed until the program exits.\n    // Also, it's only allocated once.\n}\n</code></pre>\n\n<hr>\n\n<p>This is an example of an enclosing scope that is not a function:</p>\n\n<pre><code>int main(void)\n{\n    PixelPlane outer_pixel_plane(960, 540, \"TITLE\");\n\n    {\n        PixelPlane inner_pixel_plane(960, 540, \"TITLE\");\n    } // inner_pixel_plane freed here\n\n    // other code could go here before the end of the function\n\n} // outer_pixel_plane freed here\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 8338615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/971aac686c830f2fb36f66efe5a70b63?s=128&d=identicon&r=PG", "display_name": "SuperSim135", "link": "https://stackoverflow.com/users/8338615/supersim135"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1574879596, "creation_date": 1574878373, "question_id": 59076229, "link": "https://stackoverflow.com/questions/59076229/how-should-i-deallocate-the-memory-of-an-object-created-without-using-the-new", "title": "How should I deallocate the memory of an object created without using the &quot;new&quot; keyword?", "body": "<p>If I create an object without using the \"new\" keyword, how should I free its memory?</p>\n\n<p>Example:</p>\n\n<pre><code>#include \"PixelPlane.h\"\n\nint main(void)\n{\n     PixelPlane pixel_plane(960, 540, \"TITLE\");\n     //How should the memory of this object be freed?\n}\n\n\n</code></pre>\n"}, {"tags": ["c++", "class", "rotation", "parameter-passing"], "comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 2, "creation_date": 1574878444, "post_id": 59076207, "comment_id": 104389750, "body": "1. The code as presented doesn&#39;t compile.  2. Decide if a function should modify the existing object, or return a new one.  Doing both is almost always an error."}, {"owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "edited": false, "score": 0, "creation_date": 1574878858, "post_id": 59076207, "comment_id": 104389938, "body": "Welcome to Stackoverflow! What does the code <b>output</b>? What is the <i>desired</i> output?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1574879187, "post_id": 59076207, "comment_id": 104390095, "body": "What does the error say?"}], "answers": [{"tags": [], "owner": {"reputation": 179, "user_id": 717599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9155f436265f2c7f84a670b23c3f9bf2?s=128&d=identicon&r=PG", "display_name": "bialy", "link": "https://stackoverflow.com/users/717599/bialy"}, "is_accepted": false, "score": 0, "last_activity_date": 1574878419, "creation_date": 1574878419, "answer_id": 59076245, "question_id": 59076207, "link": "https://stackoverflow.com/questions/59076207/rotating-a-point-around-the-origin-in-cpp/59076245#59076245", "title": "Rotating a point around the origin in cpp?", "body": "<p>Documentation says that angle is in radians:\n<a href=\"http://www.cplusplus.com/reference/cmath/cos/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/cmath/cos/</a></p>\n\n<p>To convert angles to radians just</p>\n\n<pre><code>double angle_radians = angle_degrees / (180.0 / M_PI);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 191, "user_id": 7322284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ah4Ex.jpg?s=128&g=1", "display_name": "Saisai3396", "link": "https://stackoverflow.com/users/7322284/saisai3396"}, "is_accepted": false, "score": 1, "last_activity_date": 1574879547, "last_edit_date": 1574879547, "creation_date": 1574879158, "answer_id": 59076427, "question_id": 59076207, "link": "https://stackoverflow.com/questions/59076207/rotating-a-point-around-the-origin-in-cpp/59076427#59076427", "title": "Rotating a point around the origin in cpp?", "body": "<p>A few issues in the code. You are returning Point(x, y) on roa() while the function returns a double which makes it unable to compile. If you want to rotate the same point, you are already setting x and y values in roa(), no need to reassign the whole variable at <code>a = a.roa(50)</code>. Just do <code>a.roa()</code> with roa() modified as follows:</p>\n\n<pre><code>void roa(double angle) \n{ \n  double new_x = x*cos(angle) - y*sin(angle);\n  double new_y = x*sin(angle) + y*cos(angle); // mistake here as well\n  x = new_x;\n  y = new_y;\n}\n</code></pre>\n\n<p>Finally, as bialy pointed out, the angle should be in radians not degrees!</p>\n"}], "owner": {"reputation": 11, "user_id": 12447608, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LmkkRP8vB6s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3remL55q54j9Tive2-0NSy6fSOQqUw/photo.jpg?sz=128", "display_name": "Vincent Dumaij", "link": "https://stackoverflow.com/users/12447608/vincent-dumaij"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1574884256, "creation_date": 1574878293, "last_edit_date": 1574884256, "question_id": 59076207, "link": "https://stackoverflow.com/questions/59076207/rotating-a-point-around-the-origin-in-cpp", "title": "Rotating a point around the origin in cpp?", "body": "<p>I want to rotate a point around the origin but I keep getting errors. The mathematical part is solid but the code seems to fail when I want it to update the x and y values from the specific points. Can you guys help me?</p>\n\n<p>Kind regards,\nVincent</p>\n\n<pre><code>\n#include &lt;cmath&gt;\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n\n\nclass Point\n{\npublic:\n\n    double x, y;\n    // constructors\n\n    Point()\n        : x(0), y(0)\n    {} \n\n    Point(double X, double Y)\n        : x(X), y(Y)\n    {}\n\n    double roa(double angle) \n    { \n        double new_x = x*cos(angle) - y*sin(angle);\n        double new_y = x*sin(angle) + y*sin(angle);\n        x = new_x;\n        y = new_y;\n\n        return Point(x,y);\n    }\n};\n\nint main()\n{\n    Point a(2,2); \n    a = a.roa(50);\n    std::cout &lt;&lt; a &lt;&lt; std::endl;\n\n    return 0\n}\n</code></pre>\n\n<p>Solved! Thx for your help guys. You can find the new code below:</p>\n\n<pre><code>\n#include &lt;cmath&gt;\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n\n\nclass Point\n{\npublic:\n\n    double x, y;\n    // constructors\n\n    Point()\n        : x(0), y(0)\n    {} \n\n    Point(double X, double Y)\n        : x(X), y(Y)\n    {}\n\n    Point roa(double angle) \n    {\n        double angle_rad = angle / (180/M_PI);\n\n        double new_x = x*cos(angle_rad) - y*sin(angle_rad);\n        double new_y = x*sin(angle_rad) + y*cos(angle_rad);\n\n        double x = new_x;\n        double y = new_y;\n\n        Point p;\n        p.x = new_x;\n        p.y = new_y;\n\n        return p;\n\n    }\n};\n\nint main()\n{\n    Point a(2,2); \n    a = a.roa(360);\n    std::cout &lt;&lt; a &lt;&lt; std::endl;\n\n    return 0\n}\n\n\n</code></pre>\n"}, {"tags": ["c++", "vector", "median"], "comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 3, "creation_date": 1574878327, "post_id": 59076186, "comment_id": 104389698, "body": "What purpose does <code>check</code> serve?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1574878394, "post_id": 59076186, "comment_id": 104389727, "body": "Especially considering that <code>check</code> is uninitialized and therefore have an <i>indeterminate</i> value, leading to <i>undefined behavior</i> when you use it."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1574878539, "post_id": 59076186, "comment_id": 104389789, "body": "Why not just <code>std::nth_element(vec.begin(), vec.begin() + vec.size()&#47;2, vec.end());     std::cout &lt;&lt; &quot;The median is &quot; &lt;&lt; vec[vec.size()&#47;2] &lt;&lt; &#39;\\n&#39;;</code> ?"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1574878708, "post_id": 59076186, "comment_id": 104389866, "body": "@JesperJuhl He already have a sorted data. Now he has a problem to handle case of odd or even size of data."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1574879499, "post_id": 59076186, "comment_id": 104390228, "body": "@MarekR it&#39;s sorted in <i>this</i> case, yes. But I wanted to present a <i>general</i> solution that does not <i>depend</i> on pre-sorted data. As for even vs odd size, I don&#39;t believe you need to handle that beyond what I proposed. For an even number of elements, you have to pick either the element before or after the mid point, but which one you pick doesn&#39;t really matter and my solution consistently picks the lower. Which should be fine. The only corner case to handle is an empty vector."}], "answers": [{"tags": [], "owner": {"reputation": 701, "user_id": 3124438, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ae8d252e1dfaa06bc5dd3ec9c902a4a2?s=128&d=identicon&r=PG&f=1", "display_name": "Spandyie", "link": "https://stackoverflow.com/users/3124438/spandyie"}, "is_accepted": true, "score": 1, "last_activity_date": 1574880427, "last_edit_date": 1574880427, "creation_date": 1574879112, "answer_id": 59076412, "question_id": 59076186, "link": "https://stackoverflow.com/questions/59076186/c-unable-to-get-the-correct-answer-for-median-value/59076412#59076412", "title": "C++ Unable to get the correct answer for median value", "body": "<p>I rewrote your code and cleaned up some unnecessary variable. I per-calculated the array size <code>n</code> and the midpoint <code>centerElement</code>. You do not want to repeatedly do this calculation specially in scenarios where you have a very large array. </p>\n\n<p>I also removed the boolean variable <code>check</code>, which is completely unnecessary. You can find simply compare the output of modulus operation by comparing it with <code>0</code></p>\n\n<pre><code>    #include &lt;iostream&gt;\n    #include &lt;vector&gt;\n    using namespace std;\n\n    int main()\n\n{\n    vector&lt;double&gt; vec;    \n    vec.push_back(2);\n    vec.push_back(6);\n    vec.push_back(8);\n    vec.push_back(100);\n    auto n = vec.size();\n    auto centerElement = n/2;\n\n    double median;\n    if(n%2 == 0)\n    {\n        median=(vec[centerElement - 1] + vec[centerElement]) / 2;\n    }\n    else{\n         median=vec[(centerElement)];\n    }\n    cout&lt;&lt;median;\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 12433057, "user_type": "registered", "profile_image": "https://graph.facebook.com/161287011630361/picture?type=large", "display_name": "Joseph Ali", "link": "https://stackoverflow.com/users/12433057/joseph-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 59076412, "answer_count": 1, "score": 0, "last_activity_date": 1574880427, "creation_date": 1574878234, "question_id": 59076186, "link": "https://stackoverflow.com/questions/59076186/c-unable-to-get-the-correct-answer-for-median-value", "title": "C++ Unable to get the correct answer for median value", "body": "<p>Ok so I created a program that takes in a vector and calculates the median. Although im getting the correct median value for odd number, im not getting the same for even. here is my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nint main()\n{\n    bool check;\n    cout&lt;&lt;\"Hello World\";\n    vector&lt;double&gt; vec;\n\n    vec.push_back(2);\n    vec.push_back(6);\n    vec.push_back(8);\n    vec.push_back(62);\n\n    double median;\n    if(check==vec.size()%2)\n    {\n        median=(vec[vec.size() / 2 - 1] + vec[vec.size() / 2]) / 2;\n    }\n    else{\n         median=vec[(vec.size() / 2.0)];\n    }\n    cout&lt;&lt;median;\n    return 0;\n}\n</code></pre>\n\n<p>so when i checked online, the correct answer should be 7 but I get 8.. And this happens only for the even number calculation.. what am i doing wrong i dont get it</p>\n"}, {"tags": ["c++", "function", "vector", "window", "controls"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1574877879, "post_id": 59076006, "comment_id": 104389521, "body": "What line of your code caused this? Use the Stack Frame on the toolbar to figure out."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1574878000, "post_id": 59076006, "comment_id": 104389562, "body": "You probably want to show the implementation of <code>Subscribe()</code> and <code>OnLoadEvent()</code>"}, {"owner": {"reputation": 17, "user_id": 8425059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b4b102dc74f3e172f842edadaad7393?s=128&d=identicon&r=PG", "display_name": "BraunBerry", "link": "https://stackoverflow.com/users/8425059/braunberry"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1574878303, "post_id": 59076006, "comment_id": 104389689, "body": "The implementation of <code>Subscribe()</code> is pointed out in the <code>Event</code> class and <code>OnLoadEvent()</code> is currently empty."}, {"owner": {"reputation": 17, "user_id": 8425059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b4b102dc74f3e172f842edadaad7393?s=128&d=identicon&r=PG", "display_name": "BraunBerry", "link": "https://stackoverflow.com/users/8425059/braunberry"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1574878671, "post_id": 59076006, "comment_id": 104389850, "body": "I&#39;m sorry but I had to reduce the complexity of the whole system to 10% for this post."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1576085225, "post_id": 59076006, "comment_id": 104786953, "body": "Don&#39;t add <code>solved</code> to the question title. Press the green tick on the left of your answer to mark the problem as solved."}], "answers": [{"tags": [], "owner": {"reputation": 17, "user_id": 8425059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b4b102dc74f3e172f842edadaad7393?s=128&d=identicon&r=PG", "display_name": "BraunBerry", "link": "https://stackoverflow.com/users/8425059/braunberry"}, "is_accepted": true, "score": 0, "last_activity_date": 1574879157, "creation_date": 1574879157, "answer_id": 59076426, "question_id": 59076006, "link": "https://stackoverflow.com/questions/59076006/trouble-with-a-gui-toolkit-in-c-passing-lambdas-into-a-vector-of-stdfunctio/59076426#59076426", "title": "Trouble with a GUI toolkit in C++. Passing lambdas into a vector of std::function", "body": "<p>I've got it. The problem was that I bound my event method the event of my control before this control has been created at all.</p>\n"}], "owner": {"reputation": 17, "user_id": 8425059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b4b102dc74f3e172f842edadaad7393?s=128&d=identicon&r=PG", "display_name": "BraunBerry", "link": "https://stackoverflow.com/users/8425059/braunberry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 59076426, "answer_count": 1, "score": 0, "last_activity_date": 1576085198, "creation_date": 1574877529, "last_edit_date": 1576085198, "question_id": 59076006, "link": "https://stackoverflow.com/questions/59076006/trouble-with-a-gui-toolkit-in-c-passing-lambdas-into-a-vector-of-stdfunctio", "title": "Trouble with a GUI toolkit in C++. Passing lambdas into a vector of std::function", "body": "<p>The problem I have is kind of difficult to describe but I will do my best to make it understandable.</p>\n\n<p>I am creating a C++ GUI toolkit similar to the Windows Forms System in C#. The whole system is event based. My <code>Event</code> class consists of a vector of <code>std::function</code>'s, which acts as a list of subscriber functions, and some utility methods.</p>\n\n<pre><code>template&lt;class T&gt;\nclass Event\n{\npublic:\n\n  Event() {}\n  ~Event() {}\n\n  void Raise(T context)\n  {\n    for(std::function&lt;void(T&amp;)&gt; subscriber : Subscribers)\n    {\n      subscriber(context);\n    }\n  }\n\n  void Subscribe(std::function&lt;void(T&amp;)&gt; subscriber)\n  {\n    try { Subscribers.push_back(subscriber); } catch (std::exception) { /*...*/ }\n  }\n\nprivate:\n\n  std::vector&lt;std::function&lt;void(T&amp;)&gt;&gt;&gt; Subscribers;\n\n}\n</code></pre>\n\n<p>My project contains an <code>EventProvider</code> class which provides a bunch of events to all derived classes.</p>\n\n<pre><code>class EventProvider\n{\npublic:\n\n  Event&lt;LoadEventContext&gt; LoadEvent;\n  // ...\n  // ...\n\n}\n</code></pre>\n\n<p>Also like in Windows Forms I have a <code>Window</code> class and a <code>Control</code> class. Both of them inherit <code>EventProvider</code>. Like in C# the actual Window class where all functionalities are defined must inherit the <code>Window</code> class.</p>\n\n<pre><code>class Control : public EventProvider { /*...*/ }\n\nclass Window : public EventProvider { /*...*/ }\n\nclass MyWindow : public Window { /*...*/ }\n</code></pre>\n\n<p>In my <code>MyWindow</code> class I am binding methods to the events of the Window via lambdas. Binding methods of the <code>MyWindow</code> class to events of the <code>MyWindow</code> class works just fine. Also binding a control's member function to an event of <code>MyWindow</code> works without problems. In Windows Forms all event methods of the controls are also contained in the Window class. The same I wanted to do in my project. So the <code>MyWindow</code> class contains the instances of my controls, it's own event methods and the event methods of my controls. But when I try to bind a control event function to a control event I am getting a runtime error.</p>\n\n<pre><code>// ===  MyWindow.hpp  ===\n\n#ifndef __MY_WINDOW_HPP__\n#define __MY_WINDOW_HPP__\n\n#include &lt;Control.hpp&gt;\n#include &lt;Window.hpp&gt;\n\nclass MyWindow : public Window\n{\npublic:\n\n  MyWindow();\n  ~MyWindow();\n\nprivate:\n\n  Control* button = nullptr;\n\n  void OnLoadEvent(LoadEventContext&amp; context);\n  void button_OnLoadEvent(LoadEventContext&amp; context);\n\n}\n\n#endif\n\n\n\n// ===  MyWindow.cpp ===\n\n#include &lt;MyWindow.hpp&gt;\n\nMyWindow::MyWindow()\n{\n  button = new Control();\n\n  LoadEvent.Subscribe([&amp;](LoadEventContext&amp; context) { OnLoadEvent(context); }); // WORKS\n  LoadEvent.Subscribe([&amp;](LoadEventContext&amp; context) { button-&gt;OnLoadEvent(context); }); // WORKS\n\n  button-&gt;OnLoadEvent.Subscribe([&amp;](LoadEventContext&amp; context) { OnLoadEvent(context); }); // Runtime Error\n}\n\nMyWindow::~MyWindow() { /*...*/ }\n\nMyWindow::OnLoadEvent(LoadEventContext&amp; context) { /*...*/ }\n\nMyWindow::button_OnLoadEvent(LoadEventContext&amp; context) { /*...*/ }\n\n//\n</code></pre>\n\n<p>When <code>MyWindow</code> calls the control's load event to add the lambda function to the event's vector of subscriber functions a read access violation is thrown in the stl's <code>vector</code> class.</p>\n\n<p><a href=\"https://i.stack.imgur.com/6m1Q8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6m1Q8.png\" alt=\"enter image description here\"></a></p>\n\n<p>This line of code called the event to add the lambda function:</p>\n\n<pre><code>button-&gt;OnLoadEvent.Subscribe([&amp;](LoadEventContext&amp; context) { OnLoadEvent(context); }); // Runtime Error\n</code></pre>\n\n<p>and this one in the <code>Event</code> class caused the error:</p>\n\n<pre><code>try { Subscribers.push_back(subscriber); } catch (std::exception) { /*...*/ }\n</code></pre>\n\n<p>I am still not very advanced in programming with function pointers, functors, functionoids and all that stuff. Nevertheless I hope I pointed out my problem clearly enough for you and I hope that anyone can help me with this issue.</p>\n"}, {"tags": ["c++", "c++11", "casting", "std", "stdstring"], "comments": [{"owner": {"reputation": 3839, "user_id": 9171697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/475b59ee1312dc014fbe1eebcd91d307?s=128&d=identicon&r=PG&f=1", "display_name": "Meowmere", "link": "https://stackoverflow.com/users/9171697/meowmere"}, "edited": false, "score": 0, "creation_date": 1574877868, "post_id": 59076004, "comment_id": 104389513, "body": "If there is to be a conversion operator from <code>std::string</code> to <code>const char*</code>, what would the lifetime of the resulting array of <code>char</code> be?"}, {"owner": {"reputation": 3839, "user_id": 9171697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/475b59ee1312dc014fbe1eebcd91d307?s=128&d=identicon&r=PG&f=1", "display_name": "Meowmere", "link": "https://stackoverflow.com/users/9171697/meowmere"}, "edited": false, "score": 0, "creation_date": 1574878118, "post_id": 59076004, "comment_id": 104389611, "body": "...And if your string check methods are not from some 3rd-party libraries, then pass a <code>const std::string&amp;</code> instead."}, {"owner": {"reputation": 22432, "user_id": 634919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4a87fe094961af20263d8e7ff445b2?s=128&d=identicon&r=PG", "display_name": "Nate Eldredge", "link": "https://stackoverflow.com/users/634919/nate-eldredge"}, "reply_to_user": {"reputation": 3839, "user_id": 9171697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/475b59ee1312dc014fbe1eebcd91d307?s=128&d=identicon&r=PG&f=1", "display_name": "Meowmere", "link": "https://stackoverflow.com/users/9171697/meowmere"}, "edited": false, "score": 0, "creation_date": 1574878123, "post_id": 59076004, "comment_id": 104389614, "body": "@KaenbyouRin: Why couldn&#39;t it be the same lifetime as for <code>.c_str()</code>?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1574878584, "post_id": 59076004, "comment_id": 104389806, "body": "<i>I like to know pro&#39;s and con&#39;s for having and not-having such cast.</i> -- You say that &quot;these issues are possible to solve&quot;, <a href=\"https://stackoverflow.com/questions/492061/why-doesnt-stdstring-provide-implicit-conversion-to-char\">but at the cost of unexpected surprises</a>"}], "answers": [{"comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1574879623, "post_id": 59076387, "comment_id": 104390292, "body": "And this doesn&#39;t even get into the issues of lifetime, since the resulting pointer is only valid while that particular string exists. With implicit conversions, it becomes a bit easier to violate the lifetime problems."}, {"owner": {"reputation": 651, "user_id": 1165590, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/05ae818f8f3faa8ffb4c19d732ac01d3?s=128&d=identicon&r=PG", "display_name": "Baj Mile", "link": "https://stackoverflow.com/users/1165590/baj-mile"}, "edited": false, "score": 0, "creation_date": 1574882633, "post_id": 59076387, "comment_id": 104391461, "body": "Good points. But would you like to discuss it? You first example can be resolved with deleting bool operator. I will put the code in the question."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 651, "user_id": 1165590, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/05ae818f8f3faa8ffb4c19d732ac01d3?s=128&d=identicon&r=PG", "display_name": "Baj Mile", "link": "https://stackoverflow.com/users/1165590/baj-mile"}, "edited": false, "score": 0, "creation_date": 1574886398, "post_id": 59076387, "comment_id": 104393034, "body": "@BajMile: This is not a forum; we don&#39;t do discussion here."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 651, "user_id": 1165590, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/05ae818f8f3faa8ffb4c19d732ac01d3?s=128&d=identicon&r=PG", "display_name": "Baj Mile", "link": "https://stackoverflow.com/users/1165590/baj-mile"}, "edited": false, "score": 0, "creation_date": 1574886879, "post_id": 59076387, "comment_id": 104393202, "body": "@BajMile There is a chat for discussion: <a href=\"https://chat.stackoverflow.com/rooms/10/loungec\">chat.stackoverflow.com/rooms/10/loungec</a> (but there is some sort of minimal rep requirement)"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 6, "last_activity_date": 1574880715, "last_edit_date": 1574880715, "creation_date": 1574879003, "answer_id": 59076387, "question_id": 59076004, "link": "https://stackoverflow.com/questions/59076004/why-stdstring-does-not-have-explicit-const-char-cast/59076387#59076387", "title": "Why std::string does not have (explicit) const char* cast", "body": "<blockquote>\n  <p>I like to know pro's and con's for having and not-having such cast.</p>\n</blockquote>\n\n<p>Con: Implicit conversions often have behaviour that is surprising to the programmer.</p>\n\n<p>For example, what would you expect from following program?</p>\n\n<pre><code>std::string some_string = \"\";\nif (some_string)\n    std::cout &lt;&lt; \"true\";\nelse\n    std::cout &lt;&lt; \"false\";\n</code></pre>\n\n<p>Should the program be ill-formed because <code>std::string</code> is has no conversion to <code>bool</code>? Should the result depend on the content of the string? Would most programmers have the same expectation?</p>\n\n<p>With the current <code>std::string</code>, the above would be ill-formed because there is no such conversion. This is good. Whatever the programmer expected, they'll find out their misunderstanding when they attempt to compile.</p>\n\n<p>If <code>std::string</code> had a conversion to a pointer, then there would also be a conversion sequence to bool through the conversion to pointer. The above program would be well-formed. And the program would print <code>true</code> regardless of the content of the string, since <code>c_str</code> is never null. What if programmer instead expected that empty string would be false? What if they never intended either behaviour, but used a string there by accident?</p>\n\n<p>What about the following program?</p>\n\n<pre><code>std::string some_string = \"\";\nstd::cout &lt;&lt; some_string + 42;\n</code></pre>\n\n<p>Would you expect the program to be ill-formed because there is no such operator for string and <code>int</code>?</p>\n\n<p>If there was implicit conversion to <code>char*</code>, the above would have undefined behaviour because it does pointer arithmetic and accesses the string buffer outside of its bounds.</p>\n\n<hr>\n\n<blockquote>\n<pre><code>// all below will not compile with \nstrlen(s);\n</code></pre>\n</blockquote>\n\n<p>This is actually a good thing. Most of the time, you don't want to call <code>strlen(s)</code>. Usually, you should use <code>s.size()</code> because it is asymptotically faster. The need for <code>strlen(s.c_str())</code> is so rare, that the little bit of verbosity is insignificant.</p>\n\n<p>Forcing the use of <code>.c_str()</code> is great because it shows the reader of the program that it is not a <code>std::string</code> that is passed to the function / operator, but a <code>char*</code>. With implicit conversion, it is not possible to distinguish one from the other.</p>\n\n<hr>\n\n<blockquote>\n  <p>... creates some problems when writing generic routines and templates.</p>\n</blockquote>\n\n<p>Such problems are not insurmountable.</p>\n"}, {"comments": [{"owner": {"reputation": 651, "user_id": 1165590, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/05ae818f8f3faa8ffb4c19d732ac01d3?s=128&d=identicon&r=PG", "display_name": "Baj Mile", "link": "https://stackoverflow.com/users/1165590/baj-mile"}, "edited": false, "score": 0, "creation_date": 1574883997, "post_id": 59077077, "comment_id": 104392077, "body": "Thanks for sharing this. Things has changed since C++98, we can also argue why the class has to be responsible that someone is holding invalid pointers to part of its content. This is responsibility of the user of the class. With c_str() access to internal buffer.is anyway exported."}, {"owner": {"reputation": 3839, "user_id": 9171697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/475b59ee1312dc014fbe1eebcd91d307?s=128&d=identicon&r=PG&f=1", "display_name": "Meowmere", "link": "https://stackoverflow.com/users/9171697/meowmere"}, "reply_to_user": {"reputation": 651, "user_id": 1165590, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/05ae818f8f3faa8ffb4c19d732ac01d3?s=128&d=identicon&r=PG", "display_name": "Baj Mile", "link": "https://stackoverflow.com/users/1165590/baj-mile"}, "edited": false, "score": 0, "creation_date": 1574892588, "post_id": 59077077, "comment_id": 104395280, "body": "@BajMile Because conversion is idiomatically expected to yield a  &quot;deep copy&quot; of the original object (converted of course), not a view on the original object (like <code>std::string_view</code>)."}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 4, "last_activity_date": 1574884029, "last_edit_date": 1574884029, "creation_date": 1574882020, "answer_id": 59077077, "question_id": 59076004, "link": "https://stackoverflow.com/questions/59076004/why-stdstring-does-not-have-explicit-const-char-cast/59077077#59077077", "title": "Why std::string does not have (explicit) const char* cast", "body": "<p>If by \"having a cast\" you mean a <em>user defined conversion operator</em>, then the reason it does not have it is: to prevent you from using it implicitly, possibly inadvertently. </p>\n\n<p>Historically, unpleasant consequences of an inadvertent use of such conversion stem the fact that in the original <code>std::string</code> (per C++98 specification) the operation was <em>heavy</em> and <em>dangerous</em>. </p>\n\n<ul>\n<li><p>The original <code>std::string</code> was not trivially convertible to <code>const char *</code>, since the string object was not originally intended/required to store a null-terminator character. Under those circumstances, conversion to <code>const char *</code> was a potentially <em>heavy</em> operation that generally allocated an independent buffer and copied the entire controlled sequence to that buffer.</p></li>\n<li><p>The independent buffer mentioned above (if used) had potentially \"unexpected\" lifetime. Any modifying operation on the original <code>std::string</code> object triggered invalidation/deallocation of that buffer, rendering previously returned pointers invalid.</p></li>\n</ul>\n\n<p>It is never a good idea to implement such heavy and dangerous operations as implicitly-invokable conversion operators.</p>\n\n<p>The original C++ standard (C++98) did not have such feature as <code>explicit</code> conversion operators. (They first appeared in C++11.) A dedicated named member function was the only way to somehow make the conversion <em>explicit</em> in C++98.</p>\n\n<p>Today, in modern C++, we can define a conversion operator and still prevent it from being used implicitly (by using <code>explicit</code> keyword). One can argue that under such circumstances implementing the conversion by an operator is a reasonable approach. But I'd still argue that it is not a good idea. Even though the modern <code>std::string</code> is required to store its null-terminator (i.e. <code>c_str()</code> no longer produces an independent buffer), the pointer returned by the conversion to <code>const char *</code> is still \"dangerous\": many modification operations applied to <code>std::string</code> object may (and will) invalidate this pointer. To emphasize the fact that this is not a mere safe and innocent conversion, but rather an operation that produces a potentially dangerous pointer, it is quite reasonable to implement it by a named function.</p>\n"}], "owner": {"reputation": 651, "user_id": 1165590, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/05ae818f8f3faa8ffb4c19d732ac01d3?s=128&d=identicon&r=PG", "display_name": "Baj Mile", "link": "https://stackoverflow.com/users/1165590/baj-mile"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1575542627, "creation_date": 1574877524, "last_edit_date": 1575542627, "question_id": 59076004, "link": "https://stackoverflow.com/questions/59076004/why-stdstring-does-not-have-explicit-const-char-cast", "title": "Why std::string does not have (explicit) const char* cast", "body": "<p>I like to know pro's and con's for having and not-having such cast. At several places including here on Stack Overflow I can see that the <code>const char*</code> cast is considered bad idea but I am not sure why?</p>\n\n<p>Lack of the <code>(const char*)</code> and forcing to always use <code>c_str()</code> cast creates some problems when writing generic routines and templates.</p>\n\n<pre><code>void CheckStr(const char* s)\n{\n}\n\nint main()\n{\n    std::string s = \"Hello World!\";\n\n    // all below will not compile with \n    // Error: No suitable conversion function from \"std::string\" to \"const char *\" exists!\n    //CheckStr(s);             \n    //CheckStr((const char*)s);  \n    // strlen(s);\n\n    // the only way that works\n    CheckStr(s.c_str());\n    size_t n = strlen(s.c_str());\n    return 0;\n}\n</code></pre>\n\n<p>For example, if I have a large number of text processing functions that accept <code>const char*</code> as input and I want to be able to use <code>std::string</code> each time I have to use <code>c_str()</code>. But in this way a template function can't be used for both <code>std::string</code> and <code>const char*</code> without additional efforts. </p>\n\n<p>As a problem I can see some operator overloading issues but these are possible to solve.</p>\n\n<p>For example, as [eerorika] pointed, with allowing implicit cast to pointer we are allowing involuntary the string class to be involved in boolean expressions. But we can easily solve this with deleting the bool operator. Even further, the cast operator can be forced to be explicit:</p>\n\n<pre><code>class String\n{\npublic:\n    String() {}\n    String(const char* s) { m_str = s; }\n    const char* str() const  { return m_str.c_str(); }\n    char* str()  { return &amp;m_str[0]; }\n    char operator[](int pos) const { return m_str[pos]; }\n    char&amp; operator[](int pos) { return m_str[pos]; }\n    explicit operator const char*() const { return str(); }  // cast operator\n    operator bool() const = delete;\n\nprotected:\n    std::string m_str;\n};\n\nint main()\n{\n    String s = \"Hello\";\n    string s2 = \"Hello\";\n    if(s)  // will not compile:  it is a deleted function\n    {\n        cout &lt;&lt; \"Bool is allowed \" &lt;&lt; endl;\n    }\n\n    CheckStr((const char*)s);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "opencv"], "comments": [{"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1574878016, "post_id": 59075944, "comment_id": 104389572, "body": "Apparently there\u2019s a race condition which you avoid by using a lock. Is that what you were asking?"}, {"owner": {"reputation": 1358, "user_id": 5357986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rea6W.jpg?s=128&g=1", "display_name": "Oliort", "link": "https://stackoverflow.com/users/5357986/oliort"}, "reply_to_user": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1574881008, "post_id": 59075944, "comment_id": 104390841, "body": "@mkrieger1, no, I&#39;m asking why do I need that lock? Why is there the race condition?"}, {"owner": {"reputation": 436, "user_id": 1423491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VwVhg.png?s=128&g=1", "display_name": "John Sheridan", "link": "https://stackoverflow.com/users/1423491/john-sheridan"}, "edited": false, "score": 1, "creation_date": 1574882185, "post_id": 59075944, "comment_id": 104391309, "body": "See the Detailed Description NOTE section on this link.  <a href=\"https://docs.opencv.org/master/d9/df3/classcv_1_1cuda_1_1Stream.html\" rel=\"nofollow noreferrer\">docs.opencv.org/master/d9/df3/classcv_1_1cuda_1_1Stream.html</a>  It seems to imply that calling the same API with different data (as you are doing when you call calc(...) can result in problems with GPU memory being updated by other async tasks before a previous task has finished with it."}, {"owner": {"reputation": 1358, "user_id": 5357986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rea6W.jpg?s=128&g=1", "display_name": "Oliort", "link": "https://stackoverflow.com/users/5357986/oliort"}, "reply_to_user": {"reputation": 436, "user_id": 1423491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VwVhg.png?s=128&g=1", "display_name": "John Sheridan", "link": "https://stackoverflow.com/users/1423491/john-sheridan"}, "edited": false, "score": 0, "creation_date": 1574889170, "post_id": 59075944, "comment_id": 104394115, "body": "@JohnSheridan So what should I do to achieve concurrent optical flow calculation? Is it possible to do at all? May my mutex protected calc() call be a temporary fix for the problem or are there any more proper solutions?"}, {"owner": {"reputation": 1358, "user_id": 5357986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rea6W.jpg?s=128&g=1", "display_name": "Oliort", "link": "https://stackoverflow.com/users/5357986/oliort"}, "reply_to_user": {"reputation": 436, "user_id": 1423491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VwVhg.png?s=128&g=1", "display_name": "John Sheridan", "link": "https://stackoverflow.com/users/1423491/john-sheridan"}, "edited": false, "score": 0, "creation_date": 1574889407, "post_id": 59075944, "comment_id": 104394194, "body": "@JohnSheridan also that note seems to be about enquing same api calls with different data to the same Stream. But I use separate Stream&#39;s for separate threads."}, {"owner": {"reputation": 436, "user_id": 1423491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VwVhg.png?s=128&g=1", "display_name": "John Sheridan", "link": "https://stackoverflow.com/users/1423491/john-sheridan"}, "edited": false, "score": 0, "creation_date": 1575045226, "post_id": 59075944, "comment_id": 104448155, "body": "@Oliort apologies for the delay in responding. I&#39;ve been travelling. You pose great questions that are beyond my ability to answer. I was just observing that your calls to calc() are effectively asynchronous, with the GPU as the common resource. The docs indicate that different operation types don&#39;t overlap in terms of their usage of GPU memory, and the seeming implication from that clarification in the docs is that a single call type will at least partially use the same GPU memory. This seems incredibly restrictive, so there is every possibility that I&#39;m totally wrong on this."}, {"owner": {"reputation": 1358, "user_id": 5357986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rea6W.jpg?s=128&g=1", "display_name": "Oliort", "link": "https://stackoverflow.com/users/5357986/oliort"}, "edited": false, "score": 1, "creation_date": 1575247516, "post_id": 59075944, "comment_id": 104490767, "body": "My colleague posted this to OpenCV repo and it was marked as bug: <a href=\"https://github.com/opencv/opencv/issues/16013\" rel=\"nofollow noreferrer\">github.com/opencv/opencv/issues/16013</a>"}, {"owner": {"reputation": 436, "user_id": 1423491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VwVhg.png?s=128&g=1", "display_name": "John Sheridan", "link": "https://stackoverflow.com/users/1423491/john-sheridan"}, "edited": false, "score": 0, "creation_date": 1575324710, "post_id": 59075944, "comment_id": 104520597, "body": "Good to have the bug reference. Might help anyone else who hits this issue."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 1, "creation_date": 1592351725, "post_id": 59075944, "comment_id": 110393768, "body": "This is an exemplary question: minimal, to the point, and totally reproducible. Kudos! And your contribution led to a bug being fixed. Thank you for your effort in making OpenCV better for all of us! Signed, a user about a month away from having to run parallel optical flow problems. You saved me some headache!!"}], "answers": [{"tags": [], "owner": {"reputation": 1808, "user_id": 7724939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89dd0b319756f1e0dc1d7bff5d223d88?s=128&d=identicon&r=PG&f=1", "display_name": "nglee", "link": "https://stackoverflow.com/users/7724939/nglee"}, "is_accepted": true, "score": 1, "last_activity_date": 1592349633, "creation_date": 1592349633, "answer_id": 62419047, "question_id": 59075944, "link": "https://stackoverflow.com/questions/59075944/why-do-i-get-corrupted-results-if-i-run-gpu-dense-optical-flow-algorithm-concurr/62419047#62419047", "title": "Why do I get corrupted results if I run GPU dense optical flow algorithm concurrently?", "body": "<p>This issue is now resolved by <a href=\"https://github.com/opencv/opencv/pull/17556\" rel=\"nofollow noreferrer\">this PR</a>, and will be reflected in next release of OpenCV.</p>\n"}], "owner": {"reputation": 1358, "user_id": 5357986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rea6W.jpg?s=128&g=1", "display_name": "Oliort", "link": "https://stackoverflow.com/users/5357986/oliort"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 0, "accepted_answer_id": 62419047, "answer_count": 1, "score": 2, "last_activity_date": 1592349633, "creation_date": 1574877290, "last_edit_date": 1574881127, "question_id": 59075944, "link": "https://stackoverflow.com/questions/59075944/why-do-i-get-corrupted-results-if-i-run-gpu-dense-optical-flow-algorithm-concurr", "title": "Why do I get corrupted results if I run GPU dense optical flow algorithm concurrently?", "body": "<p>While using OpenCV CUDA dense optical flow in parallel I noticed that <em>sometimes</em> I get corrupted optical flow results, though I run it on different <code>cuda::GpuMat</code>s and in separate <code>cuda::Stream</code>s with separate <code>Algorithm</code> instances.</p>\n\n<p>After some experiments with the code I found out that if I protect <code>DenseOpticalFlow::calc()</code> call with <code>mutex</code> or run only one thread, I <em>always</em> get correct (not corrupted) results.</p>\n\n<p>I reduced my code to minimum reproducible example where I run optical flow algorithm on same input images multiple times in multiple threads:</p>\n\n<pre><code>#include &lt;thread&gt;\n#include &lt;vector&gt;\n#include &lt;opencv2/opencv.hpp&gt;\n\nusing namespace std;\nusing namespace cv;\n\nint main() {\n    Mat frames[2] = { imread(\"im0.jpg\"), imread(\"im1.jpg\") };\n    for (int i = 0; i &lt; 2; i++) cvtColor(frames[i], frames[i], COLOR_BGR2GRAY);\n    Size frameSize = frames[0].size();\n\n    vector&lt;thread&gt; workers;\n    mutex m;\n\n    for (int id = 0; id &lt; 2; ++id) // 2 threads\n        workers.emplace_back([&amp;, id]()\n    { // lambda\n        // Separate Stream, Algorithm and GpuMats for each thread\n        auto algoGpu = cuda::OpticalFlowDual_TVL1::create();\n        cuda::Stream stream; \n        cuda::GpuMat optFlow(frameSize, CV_32FC2);\n        cuda::GpuMat gpuFrame[2] = {\n            cuda::GpuMat(frameSize, CV_8UC1),\n            cuda::GpuMat(frameSize, CV_8UC1) \n        };\n        Mat downloaded, converted;\n        Mat channels[2] = { Mat(), Mat() };\n\n        for (int i = 0; i &lt; 2; ++i) gpuFrame[i].upload(frames[i], stream);\n\n        for (int i = 0; i &lt; 1000; i++) { // run 1000 times with SAME input\n            {\n                //unique_lock&lt;mutex&gt; l(m); // WORKS OK IF UNCOMMENTED !!!!!\n                algoGpu-&gt;calc(gpuFrame[0], gpuFrame[1], optFlow, stream);\n            }\n\n            if (id == 0) { // show results from same single thread\n                optFlow.download(downloaded, stream);\n                stream.waitForCompletion();\n\n                split(downloaded, channels);\n                channels[0].convertTo(converted, CV_8UC1, 100, 128);\n                imshow(\"flow\", converted);\n                waitKey(1);\n            }\n        }\n\n        stream.waitForCompletion();\n    });\n\n    for (auto&amp; worker : workers) worker.join();\n    return 0;\n}\n</code></pre>\n\n<p>If I uncomment <code>//unique_lock&lt;mutex&gt; l(m);</code> I get same valid result image for every call. But if I leave it commented, approximately half of the results are corrupted.</p>\n\n<p>Input images:</p>\n\n<p><img src=\"https://i.imgur.com/hXwUVaP.jpg\" alt=\"im0\">\n<img src=\"https://i.imgur.com/IHR3SfG.jpg\" alt=\"im1\"></p>\n\n<p>Correct result:</p>\n\n<p><img src=\"https://i.imgur.com/UHReRy9.jpg\" alt=\"correct\"></p>\n\n<p>Examples of corrupted result:</p>\n\n<p><img src=\"https://i.imgur.com/FDNkA3N.jpg\" alt=\"corrupt1\">\n<img src=\"https://i.imgur.com/hlKY9D1.jpg\" alt=\"corrupt2\"></p>\n\n<p>I use OpenCV 4.0 with CUDA 10.1.</p>\n"}, {"tags": ["c++", "recursion", "binary-search-tree"], "comments": [{"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 4, "creation_date": 1574876471, "post_id": 59075669, "comment_id": 104388854, "body": "I would avoid the global variable <code>n</code>. It&#39;s quite wrong using global variables with side effects in the recursion..."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1574876478, "post_id": 59075669, "comment_id": 104388859, "body": "I suggest you try to find a solution where <code>n</code> is a <i>local</i> variable instead of global."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1574876501, "post_id": 59075669, "comment_id": 104388870, "body": "At first, you <i>absolutely</i> should define n as a local variable of <code>countNodes</code>. Then by <i>assigning</i> n as result of recursive call, you lose previous information. You&#39;d need <code>+=</code> instead..."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1574876527, "post_id": 59075669, "comment_id": 104388886, "body": "Also by doing <code>n = ...</code> followed by <code>n = ...</code> you lose the first assignment."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1574876954, "post_id": 59075669, "comment_id": 104389089, "body": "Actually, you can do it really simple: <code>return root == nullptr ? 0 : 1 + count(root-&gt;left) + count(root-&gt;right);</code> \u2013 the null-check in next recursive call compensates the dropped check for children being available. <code>1 + ...</code> counts current node itself, which replaces the <code>n = n + 1</code> you have now."}, {"owner": {"reputation": 3839, "user_id": 9171697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/475b59ee1312dc014fbe1eebcd91d307?s=128&d=identicon&r=PG&f=1", "display_name": "Meowmere", "link": "https://stackoverflow.com/users/9171697/meowmere"}, "edited": false, "score": 0, "creation_date": 1574877004, "post_id": 59075669, "comment_id": 104389110, "body": "<code>struct node*</code> is pretty much C. If you are writing c++, omit the <code>struct</code> keyword. (i.e. use <code>node*</code> instead)"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1574877166, "post_id": 59075669, "comment_id": 104389181, "body": "Are you aware that <code>std::set</code> (or <code>std::map</code>) actually is a binary search tree as well? Typically implemented as red-black-tree, so you won&#39;t get degenerate trees either... (degenerate tree: what would your implementation produce on inserting <i>sorted</i> data???)."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1574877442, "post_id": 59075669, "comment_id": 104389313, "body": "Off-topic: You should prefer C++ <i>keywords</i> (<code>nullptr</code>) over old (obsolete?) C <i>macros</i> (<code>NULL</code>)."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1574877599, "post_id": 59075669, "comment_id": 104389392, "body": "You should replace <code>getNode</code> function with a constructor: <code>node(int data) : data(data), left(nullptr), right(nullptr) { }</code> \u2013 then you&#39;d create new nodes by simply <code>return new node(data);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1574877762, "post_id": 59075996, "comment_id": 104389463, "body": "Actually, you don&#39;t even need those two if&#39;s, if you drop them, the null-check for root in recursive call will catch up and thus resulting in n += 0..."}], "tags": [], "owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "is_accepted": false, "score": 4, "last_activity_date": 1574877901, "last_edit_date": 1574877901, "creation_date": 1574877471, "answer_id": 59075996, "question_id": 59075669, "link": "https://stackoverflow.com/questions/59075669/counting-number-of-nodes-in-binary-search-tree-c/59075996#59075996", "title": "Counting number of nodes in Binary Search Tree C++", "body": "<p>You are overwritting the value of n</p>\n\n<pre><code>    n=CountNodes(root-&gt;left);\n</code></pre>\n\n<p>You should be adding the count from the sub tree.</p>\n\n<pre><code>    n = n + CountNodes(root-&gt;left);\n</code></pre>\n\n<p>There is also another bug in that you are counting this node twice if the node has a left and right tree and never counting it if the node has no subtrees.</p>\n\n<pre><code>if(root-&gt;left!=NULL)\n{\n    n=n+1;                      // Adding one for this node.\n    n=CountNodes(root-&gt;left);\n}\n\nif(root-&gt;right!=NULL)\n{\n    n=n+1;                      // Adding one for this node again?\n    n=CountNodes(root-&gt;right);\n}\n</code></pre>\n\n<p>I think you should be doing:</p>\n\n<pre><code>if(root-&gt;left!=NULL)\n{\n    n = n + CountNodes(root-&gt;left);\n}\n\nif(root-&gt;right!=NULL)\n{\n    n = n + CountNodes(root-&gt;right);\n}\nn = n + 1;\n</code></pre>\n\n<p>The next thing is that you check for null on entry into the function. So you don't need to test for null before doing a recursive call.</p>\n\n<pre><code>n = n + CountNodes(root-&gt;left);\nn = n + CountNodes(root-&gt;right);\nn = n + 1;\n</code></pre>\n\n<p>We can then simplify this to:</p>\n\n<pre><code>int CountNodes(node* root)\n{\n    if (root == nullptr) {\n        return 0;\n    }\n    return 1 + CountNodes(root-&gt;left) + CountNodes(root-&gt;right);\n}\n</code></pre>\n"}], "owner": {"reputation": 831, "user_id": 2270903, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/H2VYt.jpg?s=128&g=1", "display_name": "Reno", "link": "https://stackoverflow.com/users/2270903/reno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1130, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1574877901, "creation_date": 1574876244, "question_id": 59075669, "link": "https://stackoverflow.com/questions/59075669/counting-number-of-nodes-in-binary-search-tree-c", "title": "Counting number of nodes in Binary Search Tree C++", "body": "<p>I am struggling to understand why the function <code>CountNodes()</code> below counts all the nodes in a BST. </p>\n\n<p>If we assume we have the following BST:</p>\n\n<pre><code>            20\n          /   \\\n         10    30\n        /  \\  /  \\\n       5  15 25  35\n\n</code></pre>\n\n<p>If I call <code>CountNodes(pointer to root node 20);</code> then wouldn't the relevant <code>if</code> statement:</p>\n\n<pre><code>    if(root-&gt;left!=NULL)\n    {\n        n=n+1;\n        n=CountNodes(root-&gt;left);\n    }\n</code></pre>\n\n<p>simply look at node <code>10</code> and say, yes it is not null, add 1 to the counter <code>n</code>, and then call <code>CountNodes(pointer to 10)</code> which would then just send us down the left branch again to <code>5</code>. Then when at <code>5</code> the <code>left</code> and <code>right</code> variables are <code>NULL</code> and hence the whole <code>CountNodes</code> function just returns <code>n</code> equal to <code>int 3</code>.</p>\n\n<p>I guess I am struggling to understand exactly when the value of the argument to <code>CountNodes</code> is updated. Do we look <code>right</code> and check if its <code>NULL</code> and update the counter before we update the argument value in the first recursive call to <code>CountNodes(pointer to 10)</code> in the left look even though the right look appears after the left recursive call in the code? </p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\nint n=1;\n\nstruct node\n{\n    int data;\n    node* left;\n    node* right;\n};\n\nstruct node* getNode(int data)\n{\n    node* newNode=new node();\n    newNode-&gt;data=data;\n    newNode-&gt;left=NULL;\n    newNode-&gt;right=NULL;\n    return newNode;\n}\n\nstruct node* Insert(struct node* root, int data)\n{\n    if (root == NULL)\n        return getNode(data);\n\n    if (data &lt; root-&gt;data)\n        root-&gt;left  = Insert(root-&gt;left, data);\n\n    else if (data &gt; root-&gt;data)\n        root-&gt;right = Insert(root-&gt;right, data);\n\n    return root;\n}\n\n\nint CountNodes(node*root)\n{\n    if(root==NULL)\n        return 0;\n\n    if(root-&gt;left!=NULL)\n    {\n        n=n+1;\n        n=CountNodes(root-&gt;left);\n    }\n\n    if(root-&gt;right!=NULL)\n    {\n        n=n+1;\n        n=CountNodes(root-&gt;right);\n    }\n    return n;\n}\n\nint main()\n{  \n    node* root=NULL;\n    root=Insert(root,10);\n    Insert(root,5);\n    Insert(root,20);\n    Insert(root,4);\n    Insert(root,8);\n    Insert(root,15);\n    Insert(root,25);\n    cout&lt;&lt;\"Total No. of Nodes in the BST = \"&lt;&lt;CountNodes(root)&lt;&lt;endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1574876329, "post_id": 59075647, "comment_id": 104388795, "body": "<code>c</code> is a single <code>char</code> that you read from user input. It cannot be <code>s</code>, <code>t</code>, <code>o</code> and <code>p</code> at the same time, but thats the only case where you modify <code>i</code>"}, {"owner": {"reputation": 19, "user_id": 12447469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCaStMcAWGfGdWUk8wh9bAaPtNWPBwjWLUSc28T=k-s128", "display_name": "Amariei Sebastian Lucian", "link": "https://stackoverflow.com/users/12447469/amariei-sebastian-lucian"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1574876508, "post_id": 59075647, "comment_id": 104388874, "body": "it has to be only one time, each of the above letters. Once c becomes s, the first if is locked , then if it becomes t the second if locks open because of the vector becoming s until c becomes the wrong letter and resets the vectors"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 3, "creation_date": 1574876586, "post_id": 59075647, "comment_id": 104388907, "body": "It can&#39;t &quot;become&quot; anything; you read one character then never change it"}, {"owner": {"reputation": 19, "user_id": 12447469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCaStMcAWGfGdWUk8wh9bAaPtNWPBwjWLUSc28T=k-s128", "display_name": "Amariei Sebastian Lucian", "link": "https://stackoverflow.com/users/12447469/amariei-sebastian-lucian"}, "edited": false, "score": 0, "creation_date": 1574876668, "post_id": 59075647, "comment_id": 104388946, "body": "it is in a loop, it reads character by character, updating the  vectors"}, {"owner": {"reputation": 19, "user_id": 12447469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCaStMcAWGfGdWUk8wh9bAaPtNWPBwjWLUSc28T=k-s128", "display_name": "Amariei Sebastian Lucian", "link": "https://stackoverflow.com/users/12447469/amariei-sebastian-lucian"}, "edited": false, "score": 2, "creation_date": 1574876722, "post_id": 59075647, "comment_id": 104388977, "body": "for example, if c is &#39;s&#39; then the first if gets unlocked and makes the vector v[1] =&#39;s&#39; and the if remains open until c has the wrong value"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1574877232, "post_id": 59075647, "comment_id": 104389207, "body": "Maybe you should edit your question and better explain what exactly you expect the behavior of your code to be. I know your logic can&#39;t possibly work but I am not 100% sure what you want to happen."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1574877359, "post_id": 59075647, "comment_id": 104389275, "body": "@drescherjm The array (&quot;vector&quot;) holds the characters of &quot;stop&quot; that have already been typed. Or rather, it&#39;s meant to."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1574877449, "post_id": 59075647, "comment_id": 104389316, "body": "You type <code>s</code> and now c contains &#39;s&#39;. The computer checks whether c contains &#39;s&#39;. It does so it runs the if statement. The computer sets <code>v[1]=&#39;s&#39;;</code>. The computer then checks whether c contains &#39;t&#39; or v[2] contains &#39;t&#39;. It does not so the computer runs the &#39;else&#39; statement which sets <code>v[1]=0;</code> again. End result: nothing happens."}, {"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 1, "creation_date": 1574877540, "post_id": 59075647, "comment_id": 104389358, "body": "Also <code>v</code> is never initialized, so it contains random values."}, {"owner": {"reputation": 19, "user_id": 12447469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCaStMcAWGfGdWUk8wh9bAaPtNWPBwjWLUSc28T=k-s128", "display_name": "Amariei Sebastian Lucian", "link": "https://stackoverflow.com/users/12447469/amariei-sebastian-lucian"}, "edited": false, "score": 0, "creation_date": 1574878307, "post_id": 59075647, "comment_id": 104389692, "body": "ah yes, thats true, i am starting to wonder why didn  i see this until now"}, {"owner": {"reputation": 3101, "user_id": 2027196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90b1ba74298036dc163149d485268fa4?s=128&d=identicon&r=PG", "display_name": "JohnFilleau", "link": "https://stackoverflow.com/users/2027196/johnfilleau"}, "edited": false, "score": 0, "creation_date": 1574878310, "post_id": 59075647, "comment_id": 104389694, "body": "Do you just want to write code that checks if the characters &#39;s&#39;, &#39;t&#39;, &#39;o&#39;, and &#39;p&#39; were entered in order followed by a single hit of the return key? Or do you have to have the return key pressed in between characters? Because there are easier ways to achieve what you&#39;re aiming for."}, {"owner": {"reputation": 19, "user_id": 12447469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCaStMcAWGfGdWUk8wh9bAaPtNWPBwjWLUSc28T=k-s128", "display_name": "Amariei Sebastian Lucian", "link": "https://stackoverflow.com/users/12447469/amariei-sebastian-lucian"}, "edited": false, "score": 0, "creation_date": 1574878443, "post_id": 59075647, "comment_id": 104389748, "body": "i added break in every if, it works now by stopping the chain when the correct value has been detected"}, {"owner": {"reputation": 19, "user_id": 12447469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCaStMcAWGfGdWUk8wh9bAaPtNWPBwjWLUSc28T=k-s128", "display_name": "Amariei Sebastian Lucian", "link": "https://stackoverflow.com/users/12447469/amariei-sebastian-lucian"}, "edited": false, "score": 0, "creation_date": 1574878477, "post_id": 59075647, "comment_id": 104389766, "body": "it works now, thanks to everyone that helped me."}], "answers": [{"tags": [], "owner": {"reputation": 179, "user_id": 717599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9155f436265f2c7f84a670b23c3f9bf2?s=128&d=identicon&r=PG", "display_name": "bialy", "link": "https://stackoverflow.com/users/717599/bialy"}, "is_accepted": false, "score": 2, "last_activity_date": 1574878209, "creation_date": 1574878209, "answer_id": 59076178, "question_id": 59075647, "link": "https://stackoverflow.com/questions/59075647/my-c-loop-doesnt-stop-when-i-tell-it-to-do-it-through-the-console/59076178#59076178", "title": "My c++ loop doesn&#39;t stop when i tell it to do it through the console", "body": "<p>That should the work and is not indented hell code. It assumes that you are entering one character at a time.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main(int argc, char const *argv[])\n{\n    char keyword[] = \"stop\";\n    char* matching_char = keyword;\n    char char_from_user;\n    while(*matching_char != '\\0')\n    {\n        std::cin.get(char_from_user);\n        // Reset if different character\n        if(*matching_char != char_from_user)\n            matching_char = keyword;\n\n        // Increment position of match\n        if(*matching_char == char_from_user)\n            ++matching_char;\n        // Ignore rest in buffer\n        std::cin.ignore();\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 12447469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCaStMcAWGfGdWUk8wh9bAaPtNWPBwjWLUSc28T=k-s128", "display_name": "Amariei Sebastian Lucian", "link": "https://stackoverflow.com/users/12447469/amariei-sebastian-lucian"}, "edited": false, "score": 0, "creation_date": 1574878709, "post_id": 59076258, "comment_id": 104389867, "body": "tanks it helped alot"}], "tags": [], "owner": {"reputation": 191, "user_id": 7322284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ah4Ex.jpg?s=128&g=1", "display_name": "Saisai3396", "link": "https://stackoverflow.com/users/7322284/saisai3396"}, "is_accepted": false, "score": 0, "last_activity_date": 1574878475, "creation_date": 1574878475, "answer_id": 59076258, "question_id": 59075647, "link": "https://stackoverflow.com/questions/59075647/my-c-loop-doesnt-stop-when-i-tell-it-to-do-it-through-the-console/59076258#59076258", "title": "My c++ loop doesn&#39;t stop when i tell it to do it through the console", "body": "<p>Following your logic, you just need to assign the v array values after each if/else condition otherwise it will just get immediately reassigned to 0. For example, you first assign v[1] = 's', and then right after you assign it to v[1] = 0, because the if returns false in first iteration. The following code should solve the problem.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n  char c,v[5];\n  int i=0;\n    while(i!=1)\n    {\n        cin.get(c);\n        if(c=='s' || v[1]=='s')\n        {\n            if(c=='t' || v[2]=='t')\n            {\n                if(c=='o' || v[3]=='o')\n                {\n                    if(c=='p' || v[4]=='p')\n                    {\n                        v[4]='p';\n                        v[1]=v[2]=v[3]=v[4]=0;\n                        i=1;\n                    }\n                    else\n                        v[1]=v[2]=v[3]=0;\n                    v[3]='o';\n                }\n                else\n                    v[1]=v[2]=0;\n                v[2]='t';\n            }\n            else\n              v[1]=0;\n            v[1]='s';\n        }\n        if (i==1)\n            break;\n    }\n    return 0;\n  }\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 12447469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCaStMcAWGfGdWUk8wh9bAaPtNWPBwjWLUSc28T=k-s128", "display_name": "Amariei Sebastian Lucian", "link": "https://stackoverflow.com/users/12447469/amariei-sebastian-lucian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1574878475, "creation_date": 1574876131, "last_edit_date": 1574878201, "question_id": 59075647, "link": "https://stackoverflow.com/questions/59075647/my-c-loop-doesnt-stop-when-i-tell-it-to-do-it-through-the-console", "title": "My c++ loop doesn&#39;t stop when i tell it to do it through the console", "body": "<p>I have made a loop which should encrypt the phrases I tell it to, but didn't finish because of the problem. It should detect when I say \"stop\" in the console and shut down the loop. It doesn't work.\nWhat i want it to do is to detect if i said stop and break the loop. I shouldn t get any random missfires from getting the letters s t o p from other words. As you can see, every time there is a letter out of order, it resets the vectors which locks all of the ifs until 'c' gets the correct letters in the correct order.</p>\n\n<pre><code>using namespace std;\n\nint main()\n{\n  char c,v[5];\n  int i=0;\n    while(i!=1)\n    {\n        cin.get(c);\n        if(c=='s' or v[1]=='s')\n        {\n            v[1]='s';\n            if(c=='t' or v[2]=='t')\n            {\n                v[2]='t';\n                if(c=='o' or v[3]=='o')\n                {\n                    v[3]='o';\n                    if(c=='p' or v[4]=='p')\n                    {\n                        v[4]='p';\n                        v[1]=v[2]=v[3]=v[4]=0;\n                        i=1;\n                    }\n                    else\n                        v[1]=v[2]=v[3]=0;\n                }\n                else\n                    v[1]=v[2]=0;\n            }\n            else\n              v[1]=0;\n        }\n        cout&lt;&lt;c;\n        if (i==1)\n            break;\n    }\n    return 0;\n  }\n</code></pre>\n"}, {"tags": ["c++", "recursion"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1574875965, "post_id": 59075531, "comment_id": 104388633, "body": "what is the problem? I dont know how to answer this without spoiling all the fun for you"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1574876048, "post_id": 59075531, "comment_id": 104388669, "body": "hint: in your current function, what does it cause to stop at the first element? what does it cause to start with the last element? Identify those two and replace it with starting at <code>high</code> and stopping at <code>low</code>"}, {"owner": {"reputation": 60, "user_id": 10724618, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tHGaTkMCWO0/AAAAAAAAAAI/AAAAAAAAAEU/wzN36-Q5nnw/photo.jpg?sz=128", "display_name": "Elchavo18", "link": "https://stackoverflow.com/users/10724618/elchavo18"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1574876498, "post_id": 59075531, "comment_id": 104388869, "body": "I&#39;m still a bit confused as of now in my driver code n is represented as the sizeof(A)/ sizeof(A[0]) this gives the size of the length of the array. So should I just replace the n part of my current code with the low and the high??"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1574887085, "post_id": 59075531, "comment_id": 104393276, "body": "what driver code? Should you? I dont know, because I dont know the code. What happens when you try?"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user12415838"}, "is_accepted": true, "score": 1, "last_activity_date": 1575408485, "last_edit_date": 1575408485, "creation_date": 1574900352, "answer_id": 59080148, "question_id": 59075531, "link": "https://stackoverflow.com/questions/59075531/recursive-function-to-find-max-value-between-2-integers/59080148#59080148", "title": "Recursive Function to find Max value between 2 integers", "body": "<p><strong>update:</strong> C++17 now defines a function <a href=\"https://en.cppreference.com/w/cpp/iterator/size\" rel=\"nofollow noreferrer\">std::size</a> that can return the size of an array.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iterator&gt;\n\nusing namespace std;\n\nint findMaxRec(const int[] A, const int &amp;n)\n{\n  if (n &lt;= 0) throw \"error: array is empty...\";\n  if (n == 1) return A[0];\n  return std::max(A[n - 1], findMaxRec(A, (n - 1)));\n}\n\nint findMaxRec(const int[] A)\n{\n  return findMaxRec(A, std::size(A));\n}\n\nconst int&amp; findMaxRec(const int &amp;i)\n{\n  return i;\n}\n</code></pre>\n\n<p>If you dont have C++17, would you consider using a list?</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;list&gt;\n\nint findMaxRec(const std::list&lt;int&gt; &amp;L)\n{\n  if (L.size() == 0) throw \"error: list is empty...\";\n  return (*std::max_element(L.begin(), L.end()));\n}\n</code></pre>\n\n<p><code>findMaxBetwen</code> can be implemented as a function template:</p>\n\n<pre><code>template&lt;typename T&gt; int findMaxBetwen(const T &amp;data, int low, int high)\n{\n  int i = findMaxRec(data);\n  if (i &lt;= low) return low;\n  if (i &gt;= high) return high;\n  return i;\n}\n\n//....\n\nint main(int argc, char** argv)\n{\n  std::list&lt;int&gt; a = {5, 6, 7, 8, 10};\n  cout &lt;&lt; findMaxBetween(a, 5, 8) &lt;&lt; '\\n'; // output is 8\n\n  int b[5] = {5, 6, 7, 8, 10};\n  cout &lt;&lt; findMaxBetween(b, 5, 8) &lt;&lt; '\\n'; // output is 8\n\n  int c = 7;\n  cout &lt;&lt; findMaxBetween(c, 5, 8) &lt;&lt; '\\n'; // output is 7\n}\n</code></pre>\n\n<p>Learn more about function templates at <a href=\"https://en.cppreference.com/w/cpp/language/function_template\" rel=\"nofollow noreferrer\">cppreference</a></p>\n"}], "owner": {"reputation": 60, "user_id": 10724618, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tHGaTkMCWO0/AAAAAAAAAAI/AAAAAAAAAEU/wzN36-Q5nnw/photo.jpg?sz=128", "display_name": "Elchavo18", "link": "https://stackoverflow.com/users/10724618/elchavo18"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 59080148, "answer_count": 1, "score": 0, "last_activity_date": 1575408485, "creation_date": 1574875672, "question_id": 59075531, "link": "https://stackoverflow.com/questions/59075531/recursive-function-to-find-max-value-between-2-integers", "title": "Recursive Function to find Max value between 2 integers", "body": "<p>I'm trying to create a recursive function that finds the maximum number in an array between a low and a high integers.</p>\n\n<p>I have tried this function that helps find the maximum element in array recursively. I'm just having trouble on how to add to the function that takes in a low and a high integers to find the max between those 2.</p>\n\n<pre><code>int findMaxRec(int A[], int n) \n{ \n    // if n = 0 means whole array has been traversed \n    if (n == 1) \n        return A[0]; \n    return max(A[n-1], findMaxRec(A, n-1)); \n} \n</code></pre>\n\n<p>the goal is to have a function that looks something like this:</p>\n\n<pre><code>int findMaxBetwen(int A[], int low, int high){\n      //Here is where I need help integrating if lets say the array is A[] = 5,6,7,8\n      // Call findMaxBetwen(A[], 5, 8) and the output gives 7 because that is the max between the 3 \n      //integers.\n}\n</code></pre>\n"}, {"tags": ["c++", "x86", "crash", "osdev"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 2, "creation_date": 1574875399, "post_id": 59075453, "comment_id": 104388360, "body": "It knows because the CPU told it."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1574876058, "post_id": 59075453, "comment_id": 104388675, "body": "Typically, you get hardware (CPU, DMA, ...) interrupts (IRQ). These are handled by the OS directly. As the name tells, they interrupt the normal CPU processing and switch to some specific interrupt service routine (ISR). Within, OS can check which process was active when the interrupt occured (by inspecting thread scheduling table) and e. g. send a signal to (POSIX)."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1574876203, "post_id": 59075453, "comment_id": 104388734, "body": "That&#39;s not the most common way to crash, but it is one way."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1574877982, "post_id": 59075453, "comment_id": 104389552, "body": "note: I assume this is about x86 because only x86 has an EIP register."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1574878234, "post_id": 59075911, "comment_id": 104389662, "body": "Side note: Exceptions as used here have absolutely nothing to do with C++ exceptions. They occur beneath the C++ runtime and cannot be caught with a <code>try</code>/<code>catch</code> block."}, {"owner": {"reputation": 9461, "user_id": 8422330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c0f90445d03447c587d1e595d531f69?s=128&d=identicon&r=PG&f=1", "display_name": "prl", "link": "https://stackoverflow.com/users/8422330/prl"}, "edited": false, "score": 0, "creation_date": 1574905697, "post_id": 59075911, "comment_id": 104398169, "body": "Even in 64-bit mode, RSP is still loaded from the TSS."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1574934191, "post_id": 59075911, "comment_id": 104407270, "body": "Specifically, code fetch from a not-present or not-executable page will result in a <code>#PF</code> x86 hardware exception, handled by the kernel.  If the page-fault handler decides it was an <i>invalid</i> page fault, the kernel delivers a Unix SIGSEGV signal to the process, or the Windows equivalent. (Other kinds of HW page faults can be: hard (load the page from the swap/pagefile) or soft (allocate a new physical page of zeros to back this virtual page, or similar no-I/O-required mismatches between HW page tables and logical process memory)"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1574948364, "post_id": 59075911, "comment_id": 104414920, "body": "The TSS isn&#39;t obsolete. It may have had some of its fields repurposed for the interrupt stack table. The TSS is still the only way to restrict individual IO port accesses through the IO port bitmap. What has been removed in long mode is hardware task switching which happened to rely on the TSS."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 1, "creation_date": 1574960306, "post_id": 59075911, "comment_id": 104421067, "body": "As for the statement <i>&quot;Pushes the values of SS, ESP&quot;</i>. This is true if there is a transition between rings in <b>protected mode</b>. If an exception occurs while at ring 0 the TSS isn&#39;t consulted and the current ring 0 stack pointer is used. The behaviour is different when in long mode."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1574961657, "post_id": 59075911, "comment_id": 104421606, "body": "@MichaelPetch I added the last line. Are you happy?"}], "tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": true, "score": 6, "last_activity_date": 1574972146, "last_edit_date": 1574972146, "creation_date": 1574877197, "answer_id": 59075911, "question_id": 59075453, "link": "https://stackoverflow.com/questions/59075453/how-does-os-detect-a-crash-of-a-process/59075911#59075911", "title": "How does OS detect a crash of a process", "body": "<p>On an x86-compatible processor, when EIP points to a page which does not have read permission, a page that is not mapped, an invalid instruction, or when a valid instruction tries to access a memory page without permission, or a page that is not mapped, or a divide instruction sees that the denominator is zero, or an <code>INT</code> instruction is executed, or <a href=\"https://wiki.osdev.org/Exceptions\" rel=\"nofollow noreferrer\">a bunch of other things</a>, it <em>raises an exception</em>. In the case of an exception occuring in protected mode when the current privilege level (CPL) is > 0, <a href=\"https://alex.dzyoba.com/blog/os-interrupts/\" rel=\"nofollow noreferrer\">the following things occur:</a></p>\n\n<ul>\n<li><p>Loads the values for SS and ESP from a memory section called the <a href=\"https://en.wikipedia.org/wiki/Task_state_segment\" rel=\"nofollow noreferrer\">task state segment</a>.</p></li>\n<li><p>Pushes the values of SS, ESP, EFLAGS, CS and EIP onto the stack. The SS and ESP values are the previous ones, not the new ones from the TSS.</p></li>\n<li><p>Some exceptions also push an error code onto the stack.</p></li>\n<li><p>Gets the values for CS and EIP from the <a href=\"https://wiki.osdev.org/IDT\" rel=\"nofollow noreferrer\">interrupt descriptor table</a> and puts these values in CS and EIP.</p></li>\n</ul>\n\n<p>Note that the kernel has set up these tables and segments in advance.</p>\n\n<p>Then:</p>\n\n<ul>\n<li>The kernel decides what to do with the exception. This depends on the specific kernel. Usually, it decides to kill your program. On Linux, you can override this default using <em>signal handling</em> and on Windows you can override it using <em>Structured Exception Handling</em>.</li>\n</ul>\n\n<p><em>(This is not an exhaustive reference to x86 exception handling. This is a brief overview of the most common case.)</em></p>\n"}, {"comments": [{"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1575306354, "post_id": 59140680, "comment_id": 104513454, "body": "<code>hardware exception</code> would probably be better described as a <code>cpu exception</code> . A hardware exception could suggest some external event outside the CPU like some kind of Non Maskable Interrupt etc signalling some kind of hardware issue."}, {"owner": {"reputation": 2493, "user_id": 15304, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f814654faae23dc2e0d7da97ead044b8?s=128&d=identicon&r=PG", "display_name": "PypeBros", "link": "https://stackoverflow.com/users/15304/pypebros"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1575449673, "post_id": 59140680, "comment_id": 104566538, "body": "@MichaelPetch I&#39;m afraid we&#39;ll have to pick our own terminology here, as [ <a href=\"https://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-software-developer-vol-3a-part-1-manual.pdf#G11.1553\" rel=\"nofollow noreferrer\">intel.com/content/dam/www/public/us/en/documents/manuals/&hellip;</a> ] simply calls them &quot;exceptions&quot;, ignoring potential conflict with software constructs such as C++ exceptions. I picked &quot;hardware&quot; to contrast them with those purely-software things. &quot;CPU&quot; could work too, although -- to my knowledge -- no other piece of hardware could create one. (NMI is still called &quot;interrupt&quot; in the exception &amp; interrupts table)"}], "tags": [], "owner": {"reputation": 2493, "user_id": 15304, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f814654faae23dc2e0d7da97ead044b8?s=128&d=identicon&r=PG", "display_name": "PypeBros", "link": "https://stackoverflow.com/users/15304/pypebros"}, "is_accepted": false, "score": 1, "last_activity_date": 1575295930, "creation_date": 1575295930, "answer_id": 59140680, "question_id": 59075453, "link": "https://stackoverflow.com/questions/59075453/how-does-os-detect-a-crash-of-a-process/59140680#59140680", "title": "How does OS detect a crash of a process", "body": "<p>The detailed answer <a href=\"https://stackoverflow.com/a/59075911/15304\">https://stackoverflow.com/a/59075911/15304</a> from @user253751 is there for you to know all that you may want to know.</p>\n\n<p>A word of context might help though: processor usually proceeds to the next instruction after each instruction is over, but there are cases where it will suddenly start a completely unrelated instruction. This is called an <strong>interrupt</strong>, and is widely used to support device operations or get some code called at periodic intervals.</p>\n\n<p>In an interrupt handler, we have to save the full processor state so that the interrupted code can be safely resumed after we're done with device-specific code.</p>\n\n<p>The <strong>hardware exception</strong> mechanism used to know that a process is trying to do something that is impossible/invalid given the current configuration extensively borrows interrupts mechanisms, but it also has to take care of a context switch between (presumably) user-level code for the \"faulty\" process and kernel-level code that will handle the fault. That context switch is the reason why we see stack pointers re-loaded and task state segment involved in the description of hardware exceptions that have much simpler definitions (e.g. exectue instruction at address 0xfffff000) on other architectures.</p>\n\n<p>Note that having a hardware exception doesn't necessarily means that the process crashed. The exception handler in the kernel will usually have to compare some information (what address we tried to access, what object is mapped at this address, etc.) and either does useful job (bring one more page of a mapped file into memory) and resume the process, or calls it an invalid access. </p>\n"}], "owner": {"reputation": 65, "user_id": 8252073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f728a6cf17e5ff1fc30901d63a0f1a7b?s=128&d=identicon&r=PG&f=1", "display_name": "user8252073", "link": "https://stackoverflow.com/users/8252073/user8252073"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 59075911, "answer_count": 2, "score": 1, "last_activity_date": 1575295930, "creation_date": 1574875334, "last_edit_date": 1574877972, "question_id": 59075453, "link": "https://stackoverflow.com/questions/59075453/how-does-os-detect-a-crash-of-a-process", "title": "How does OS detect a crash of a process", "body": "<p>How does OS know that EIP is no longer a valid/legal instruction and that application has crashed? How does it know when to generate the crash dump data?</p>\n"}, {"tags": ["c++", "templates", "functor", "unordered-set"], "comments": [{"owner": {"reputation": 1073, "user_id": 10794806, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GKvpJsipy5o/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hXsT0KoMOXyLso6Ie2mfwllaD7zQ/mo/photo.jpg?sz=128", "display_name": "Gaurav Dhiman", "link": "https://stackoverflow.com/users/10794806/gaurav-dhiman"}, "edited": false, "score": 0, "creation_date": 1574875880, "post_id": 59075409, "comment_id": 104388592, "body": "I would say don&#39;t pollute std namespace unless default hash function is very good for the custom type. when you specialize <code>std::hash</code> struct you are basically providing a default if we don&#39;t take messing with namepace <code>std</code> into account."}], "answers": [{"tags": [], "owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "is_accepted": true, "score": 1, "last_activity_date": 1574912621, "creation_date": 1574912621, "answer_id": 59081421, "question_id": 59075409, "link": "https://stackoverflow.com/questions/59075409/hashable-type-with-overwritten-operators-or-external-functors/59081421#59081421", "title": "Hashable type with overwritten operators or external functors", "body": "<p>Attaching the behavior to the type allows for code like</p>\n\n<pre><code>template&lt;template&lt;class&gt; Set,class T&gt;\nauto organizeWithSet(\u2026);\n\n/* elsewhere */ {\n  organizeWithSet&lt;std::unordered_set,MyType&gt;(\u2026);\n  organizeWithSet&lt;std::set,MyType&gt;(\u2026);\n}\n</code></pre>\n\n<p>which obviously cannot pass custom function objects.</p>\n\n<p>That said, it is possible to define</p>\n\n<pre><code>template&lt;class T&gt;\nusing MyUnorderedSet=std::unordered_set&lt;T, MyTypeHash,MyTypeCompare&gt;;\n</code></pre>\n\n<p>and use that as a template template argument, although that introduces yet another name and might be considered less readable.</p>\n\n<p>Otherwise, you have to consider that your <code>operator==</code> is simultaneously the default for <code>std::unordered_set</code> and <code>std::find</code>, among others; if the equivalence you want for these purposes varies, you probably want named comparators.  On the other hand, if one suffices, C++20 might even let you define it merely with <code>=default</code>.</p>\n"}], "owner": {"reputation": 1148, "user_id": 5383521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/01531ac40d262787ab7659f7220505df?s=128&d=identicon&r=PG&f=1", "display_name": "flowit", "link": "https://stackoverflow.com/users/5383521/flowit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 59081421, "answer_count": 1, "score": 2, "last_activity_date": 1574912621, "creation_date": 1574875114, "question_id": 59075409, "link": "https://stackoverflow.com/questions/59075409/hashable-type-with-overwritten-operators-or-external-functors", "title": "Hashable type with overwritten operators or external functors", "body": "<p>To use a custom type in a <code>std::unordered_set</code> I have to options.</p>\n\n<p>1) Implement the <code>==</code> operator for my type and specialize <code>std::hash</code></p>\n\n<pre><code>struct MyType {\n    int x;\n\n    bool operator==(const MyType&amp; o) {\n        return this.x == o.x;\n    }\n};\n\nnamespace std\n{\ntemplate&lt;&gt;\nstruct hash&lt;MyType&gt; {\n    size_t operator()(const MyType&amp; o) const {\n        return hash&lt;int&gt;()(o.x);\n    }\n};\n}\n\nstd::unordered_set&lt;MyType&gt; mySet;\n</code></pre>\n\n<p>Or 2), provide functor classes:</p>\n\n<pre><code>struct MyTypeHash {\n    size_t operator()(const MyType&amp; o) const {\n        return std::hash&lt;int&gt;()(o.x);\n    }\n};\n\nstruct MyTypeCompare {\n  bool operator()(const MyType&amp; o1, const MyType&amp; o2) const {\n    return o1.x == o2.x;\n  }\n};\n\nstd::unordered_set&lt;MyType, MyTypeHash, MyTypeCompare&gt; mySet;\n</code></pre>\n\n<p>The second approach lets me choose new behaviour for every new instantion of <code>std::unordered_set</code>, while with the first approach the behaviour as being part of the type itself will always be the same.</p>\n\n<p>Now, if I know that I only ever want a single behaviour (I'll never define two different comparators for <code>MyType</code>), which approach is to be preferred? What other differences exist between those two?</p>\n"}, {"tags": ["c++", "data-structures", "heap", "priority-queue", "binary-heap"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1574875450, "post_id": 59075372, "comment_id": 104388385, "body": "Make sure to build your code with optimizations <i>enabled</i> before benchmarking performance."}, {"owner": {"reputation": 21, "user_id": 12334609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79f089e6740641599e4112d53365aa25?s=128&d=identicon&r=PG&f=1", "display_name": "greenbanzai", "link": "https://stackoverflow.com/users/12334609/greenbanzai"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1574875608, "post_id": 59075372, "comment_id": 104388457, "body": "@JesperJuhl What does that mean? I&#39;m not an experienced programmer, it&#39;s a task for school and it&#39;s required that polling until the heap is empty takes no time."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1574877766, "post_id": 59075372, "comment_id": 104389466, "body": "@Jurek To enable optimization in Visual Studio? Go to the menu, &quot;Build&quot;, &quot;Configuration Manager&quot;, and set the &quot;Active solution configuration&quot; to &quot;Release&quot;. If you&#39;re not using Visual Studio then google it I suppose."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1574878162, "post_id": 59075372, "comment_id": 104389633, "body": "@Jurek it means that you should make sure to tell your compiler to optimize the code when building it. How to do that varies from compiler to compiler. For GCC and clang, add the <code>-O2</code> or <code>-O3</code> option, for Visual Studio ask for a &quot;release&quot; build. Most/all compilers produce unoptimized binaries by default, and those can be terribly slow (but can provide a better debugging experience)."}, {"owner": {"reputation": 21, "user_id": 12334609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79f089e6740641599e4112d53365aa25?s=128&d=identicon&r=PG&f=1", "display_name": "greenbanzai", "link": "https://stackoverflow.com/users/12334609/greenbanzai"}, "edited": false, "score": 0, "creation_date": 1574879572, "post_id": 59075372, "comment_id": 104390265, "body": "Oh, that&#39;s what you mean, I didn&#39;t mention that but I am running my program on &#39;release&#39; build."}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1574887075, "post_id": 59075372, "comment_id": 104393269, "body": "In general, it will take longer to remove 10^7 elements from the heap than it will to add 10^7 elements. How long does adding take? For your other problem, the &quot;Childless element&quot; message, you could simply add a breakpoint to that line in the debugger, and then examine the stack trace when the breakpoint is hit. Don&#39;t know how to use the debugger? Now is the perfect time to learn."}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1574887385, "post_id": 59075372, "comment_id": 104393383, "body": "Also, your <code>leftChild</code> function uses <code>floor(2*parentInd+1)</code>. No need for <code>floor</code> there. And in your <code>getParent</code> function, there&#39;s no need for <code>floor</code>. Integer division automatically truncates."}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1574887655, "post_id": 59075372, "comment_id": 104393501, "body": "Note also that running a &quot;release&quot; build from within the Visual Studio IDE (typically by pressing F5) can be slow because the debugger is attached. You have to &quot;run without debugging.&quot;"}, {"owner": {"reputation": 21, "user_id": 12334609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79f089e6740641599e4112d53365aa25?s=128&d=identicon&r=PG&f=1", "display_name": "greenbanzai", "link": "https://stackoverflow.com/users/12334609/greenbanzai"}, "edited": false, "score": 0, "creation_date": 1574887883, "post_id": 59075372, "comment_id": 104393590, "body": "I did a little research and I learned that deleting elements is usually a little longer. After some changes in the code I managed to removing time to around 4,8 seconds from 6,5. That is true I&#39;m not good at using the debugger and I will put some effort to learn it. Thank you all for valuable tips!"}], "answers": [{"tags": [], "owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "is_accepted": false, "score": 1, "last_activity_date": 1574914091, "creation_date": 1574914091, "answer_id": 59081629, "question_id": 59075372, "link": "https://stackoverflow.com/questions/59075372/c-poll-operation-in-my-max-binary-heap-working-terribly-slow/59081629#59081629", "title": "C++ Poll operation in my max binary heap working terribly slow", "body": "<p>The \"Childless element\" message can occur in the <code>leftChild</code> and <code>rightChild</code> functions when the parent index is less than or equal to the heap size. From examining your code, I'd say it happens when you try to delete the last node in the heap. Consider your <code>delMax</code> function (I've removed the dead and commented-out code):</p>\n\n<pre><code>T delMax()\n{\n    if (heap.size() == 0)\n    {\n        return -1;\n    }\n    T temp = heap[0];\n    heap[0] = heap.at(heap.size()-1);\n    heap.pop_back();\n    heapifydown(0);\n    return temp;\n}\n</code></pre>\n\n<p>When the heap size is 1, then the call to <code>heap.pop_back()</code> removes the last element and the size is now 0. You then call <code>heapifydown(0)</code>.</p>\n\n<p><code>heapifydown</code> calls <code>leftChild</code> and <code>rightChild</code>, and both of them contain this code:</p>\n\n<pre><code>if (heap.size() &lt;= parentInd)\n{\n    cout &lt;&lt; \"Childless element!\" &lt;&lt; endl;\n    return -1;\n}\nelse\n</code></pre>\n\n<p><code>heap.size()</code> returns 0, because the heap is empty. And <code>parentInd</code> is 0 because that's the value of the parameter you passed. Thus, \"Childless element\" is printed.</p>\n\n<p>I'm kind of surprised that the code even works, because both <code>leftChild</code> and <code>rightChild</code> are returning -1, and <code>heapifyDown</code> doesn't check the return value. As a result, the code to compute the largest child will report that <code>heap.size() &gt; left</code>, and it will compare <code>heap[-1]</code> with <code>heap[0]</code>, and could potentially corrupt your program's memory heap. It depends on what's in memory just before the start of your array.</p>\n\n<p>My recommendation would be to modify your <code>leftChild</code> function to, simply:</p>\n\n<pre><code>return (parentInd * 2) + 1;\n</code></pre>\n\n<p>And make a similar modification to <code>rightChild</code>.</p>\n\n<p>In your <code>heapifyDown</code> function, return if the left child is beyond the heap's bounds:</p>\n\n<pre><code>void heapifydown(int index) {\n    int left;\n    int right;\n    int largest = index;\n\n    left = leftChild(index);\n    if (heap.size() &lt;= left) {\n        // left child index is outside range of the heap.\n        // node has no children, so return.\n        return;\n    }\n\n    if (heap[left] &gt; heap[index]) {\n        largest = left;\n    }\n\n    right = rightChild(index);\n    if (heap.size() &gt; right &amp;&amp; heap[right] &gt; heap[largest])\n    {\n        largest = right;\n    }\n    if (largest != index)\n    {\n        int temp = heap[index];\n        heap[index] = heap[largest];\n        heap[largest] = temp;\n        heapifydown(largest);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 12334609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79f089e6740641599e4112d53365aa25?s=128&d=identicon&r=PG&f=1", "display_name": "greenbanzai", "link": "https://stackoverflow.com/users/12334609/greenbanzai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574914091, "creation_date": 1574874975, "question_id": 59075372, "link": "https://stackoverflow.com/questions/59075372/c-poll-operation-in-my-max-binary-heap-working-terribly-slow", "title": "C++ Poll operation in my max binary heap working terribly slow", "body": "<p>I'm implementing a max binary heap in C++ and it seems to work fine.</p>\n\n<p>However, when I'm repeating poll operation (<strong>delMax</strong> method in my code) until the heap if empty it takes way too long, it's longer than building the heap itself, in case of 10^7 elements it's around 6 seconds while I was told it should take almost no time.</p>\n\n<p>Moreover, between printing heap summary and printing removing time I'm getting \"<strong>Childless element!</strong>\" printed twice (from <strong>leftChild</strong> and <strong>rightChild</strong> methods) but I have no idea where that comes from as those methods have not been called there.</p>\n\n<p>My code:</p>\n\n<pre><code>  #include \"pch.h\"\n  #include &lt;iostream&gt;\n  #include \"time.h\"\n  #include &lt;random&gt;\n  #include &lt;string&gt;\n  #include &lt;functional&gt;\n  #include &lt;vector&gt;\n using namespace std;\n template &lt;typename T&gt;\n class BinaryHeap;\n\ntemplate &lt;typename T&gt;\nclass BinaryHeap\n{\nvector &lt;T&gt; heap;\nint getParent(int childInd)\n{\n    if (heap.size() == 0)\n    {\n        return -1;\n    }\n    //int parent = 0;\n    int parent = floor((childInd - 1) / 2);\n    if (heap.size() &lt;= childInd)\n    {\n        cout &lt;&lt; \"No such element!\" &lt;&lt; endl;\n        return -1;\n    }\n    else\n        return parent;\n}\nint leftChild(int parentInd)\n{\n    int left = floor(2 * parentInd + 1);\n    if (heap.size() &lt;= parentInd)\n    {\n        cout &lt;&lt; \"Childless element!\" &lt;&lt; endl;\n        return -1;\n    }\n    else\n        return left;\n}\nint rightChild(int parentInd)\n{\n    int right = (2 * parentInd + 2);\n    if (heap.size() &lt;= parentInd)\n    {\n        cout &lt;&lt; \"Childless element!\" &lt;&lt; endl;\n        return -1;\n    }\n    else\n        return right;\n}\nvoid heapifydown(int index)\n{\n    int left = leftChild(index);\n    int right = rightChild(index);\n    int largest = index;\n    if (heap.size() &gt; left&amp;&amp;heap[left] &gt; heap[index])\n    {\n        largest = left;\n    }\n    if (heap.size() &gt; right&amp;&amp; heap[right] &gt; heap[largest])\n    {\n        largest = right;\n    }\n    if (largest != index)\n    {\n        int temp = heap[index];\n        heap[index] = heap[largest];\n        heap[largest] = temp;\n        heapifydown(largest);\n    }\n}\nvoid heapifyup(int index)\n{\n    int p = getParent(index);\n    if (heap.size() &gt; index&amp;&amp; heap[p] &lt; heap[index])\n    {\n        int temp = heap[index];\n        heap[index] = heap[p];\n        heap[p] = temp;\n        heapifyup(p);\n    }\n}\n\npublic:\nBinaryHeap() {};\n~BinaryHeap()\n{\n    heap.clear();\n}\nvoid addElement(T el)\n{\n    heap.push_back(el);\n    int index = heap.size() - 1;\n    heapifyup(index);\n}\nvoid printHeap()\n{\n    if (heap.size() == 0)\n    {\n        cout &lt;&lt; \"Empty heap!\" &lt;&lt; endl;\n        return;\n    }\n    for (int i = 0; i &lt; heap.size(); i++)\n    {\n\n        cout &lt;&lt; heap[i] &lt;&lt; endl;\n    }\n}\nT delMax()\n{\n    if (heap.size() == 0)\n    {\n        return -1;\n    }\n    T temp = heap[0];\n    T temp2 = heap[0];\n    heap[0] = heap.at(heap.size()-1);\n    heap.pop_back();\n    //T parent = 0;\n    //T child = 2 * parent + 2;\n    heapifydown(0);\n    return temp;\n    //delete &amp;temp;\n}\nvoid clearHeap()\n{\n    for (int i = heap.size(); i &gt; 0; --i)\n    {\n        heap.pop_back();\n    }\n}\nvoid print()\n{\n    if (heap.size() == 0)\n    {\n        cout &lt;&lt; \"Empty heap!\" &lt;&lt; endl;\n        return;\n    }\n    cout &lt;&lt; \"Size: \" &lt;&lt; heap.size()&lt;&lt;endl;\n    cout &lt;&lt; \" Root: \" &lt;&lt; heap[0] &lt;&lt; endl;\n    cout &lt;&lt; \"L. child: \" &lt;&lt; heap[1] &lt;&lt; endl;\n    cout &lt;&lt; \"R. Child: \" &lt;&lt; heap[2] &lt;&lt; endl;\n    cout &lt;&lt; \"3 last elements: \" &lt;&lt; heap[heap.size()-3] &lt;&lt;\n    \" \"&lt;&lt;heap[heap.size() - 2]&lt;&lt;\n    \" \"&lt;&lt;heap[heap.size() - 1]&lt;&lt;endl;\n}\n};\nint randomInt()\n{\nstatic default_random_engine generator{ 10 };\nstatic uniform_int_distribution&lt;int&gt; rozklad{ 0, 11000000 };\nstatic function&lt;int()&gt; los{ bind(rozklad, generator) };\nint l = los();\nreturn l;\n}\nint main()\n{\nBinaryHeap&lt;int&gt;*bh = new BinaryHeap&lt;int&gt;();\nconst int MAX_ORDER = 7; // maksymalny rzad wielkosci dodawanych danych\nfor (int i = 1; i &lt;= MAX_ORDER; i++)\n{\n    const int n = pow(10, i);\n    clock_t start1 = clock();\n    for (int i = 0; i &lt; n; i++)\n    {\n        int el = randomInt();\n        bh-&gt;addElement(el);\n    }\n    clock_t stop1 = clock();\n    double adding_time = (stop1 - start1) / (double)CLOCKS_PER_SEC;\n    cout &lt;&lt; \"Adding time: \" &lt;&lt; adding_time &lt;&lt; \"s\" &lt;&lt; endl;\n    bh-&gt;print();\n    clock_t start2 = clock();\n    for (int j = 0; j &lt; n; j++)\n    {\n        int out = bh-&gt;delMax();\n        //cout &lt;&lt; \"WyciagniEty: \"&lt;&lt;bh-&gt;delMax()&lt;&lt;endl;\n        //delete &amp;out;\n    }\n    clock_t stop2 = clock();\n    double polling_time = (stop2 - start2) / (double)CLOCKS_PER_SEC;\n    cout &lt;&lt; \"Removing time: \" &lt;&lt; polling_time &lt;&lt; \"s\" &lt;&lt; endl;\n    bh-&gt;print();\n    bh-&gt;clearHeap();\n}\ndelete bh;\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "formatting", "fmt"], "comments": [{"owner": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 2, "creation_date": 1574875463, "post_id": 59075300, "comment_id": 104388390, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 36538, "user_id": 471164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/45d4a7ba0fb8e789356f5da87536444d?s=128&d=identicon&r=PG", "display_name": "vitaut", "link": "https://stackoverflow.com/users/471164/vitaut"}, "edited": false, "score": 0, "creation_date": 1575647792, "post_id": 59096272, "comment_id": 104648800, "body": "You shouldn&#39;t be mixing two versions of {fmt} in your code. Either define <code>SPDLOG_FMT_EXTERNAL</code> as tobi_s suggested or use spdlog&#39;s version."}], "tags": [], "owner": {"reputation": 1, "user_id": 12447334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79a532f261a1f17134d71cd70a046632?s=128&d=identicon&r=PG&f=1", "display_name": "M1loseph", "link": "https://stackoverflow.com/users/12447334/m1loseph"}, "is_accepted": false, "score": -1, "last_activity_date": 1574976087, "creation_date": 1574976087, "answer_id": 59096272, "question_id": 59075300, "link": "https://stackoverflow.com/questions/59075300/fmt-stdstring-displayed-as-numbers/59096272#59096272", "title": "fmt std::string displayed as numbers", "body": "<p>I found the reason. It was because I included <code>spdlog</code> before <code>fmt</code></p>\n\n<p>BEFORE</p>\n\n<pre><code>#include \"../log/Log.h\"\n#include \"fmt/format.h\"\n</code></pre>\n\n<p>AFTER</p>\n\n<pre><code>#include \"fmt/format.h\"\n#include \"../log/Log.h\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 875, "user_id": 8680401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c72fdd411ebd51da79e2182b8cbb6226?s=128&d=identicon&r=PG", "display_name": "tobi_s", "link": "https://stackoverflow.com/users/8680401/tobi-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1575695587, "last_edit_date": 1575695587, "creation_date": 1575455060, "answer_id": 59173786, "question_id": 59075300, "link": "https://stackoverflow.com/questions/59075300/fmt-stdstring-displayed-as-numbers/59173786#59173786", "title": "fmt std::string displayed as numbers", "body": "<p>You are not giving enough information to debug this but it may be the case that your copy of fmtlib and the one in spdlog don't like each other. spdlog offers a cmake configuration variable to prevent this from happening, namely (from my cmake file)</p>\n\n<pre><code>set(SPDLOG_FMT_EXTERNAL ON CACHE BOOL \"Use common fmtlib\")\n</code></pre>\n\n<p>You might want to try this.</p>\n"}], "owner": {"reputation": 1, "user_id": 12447334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79a532f261a1f17134d71cd70a046632?s=128&d=identicon&r=PG&f=1", "display_name": "M1loseph", "link": "https://stackoverflow.com/users/12447334/m1loseph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1575695587, "creation_date": 1574874656, "last_edit_date": 1574962848, "question_id": 59075300, "link": "https://stackoverflow.com/questions/59075300/fmt-stdstring-displayed-as-numbers", "title": "fmt std::string displayed as numbers", "body": "<p>I tried to format a simple string that will be displayed in the console</p>\n\n<pre><code>    long long duration = end - start;\n\n    double ms = static_cast&lt;double&gt;(duration) * 0.001;\n\n    std::string resoult = fmt::format(\"{} =&gt; Duration: {} micro, {} ms\", m_Info.c_str(), duration, ms);\n    AE_TRACE(resoult);\n</code></pre>\n\n<p>where m_Info is std::string, duration is long long and ms is double.\nThe resoult looks like this:\n<code>-9891888000000.0 =&gt; Duration: 49172 micro, 412316861 ms</code></p>\n\n<p>The std::string was displayed as random numbers and ms was supposed to be 49,172.</p>\n\n<p>I tried \n<code>\"{:s} =&gt; Duration: {:d} micro, {:f} ms\"</code></p>\n\n<p>but that resoulted in <code>fmt::format_errror</code>. I used the same library in other file in the same project and didn't get such errors.</p>\n\n<p>EDIT</p>\n\n<p>I used some other fmt functions in the same part of code</p>\n\n<pre><code>    long long duration = end - start;\n\n    double ms = duration * 0.001;\n\n    std::string test = \"test\";\n\n    fmt::memory_buffer temp;\n\n    fmt::format_to(temp, \"{} {} {}\", test, duration, ms);\n\n    AE_TRACE(fmt::format(\"{} {} {}\", test, duration, ms));\n    AE_TRACE(temp.data());\n    AE_TRACE(\"{} {} {}\"_format(test, duration, ms));\n    AE_TRACE(test);\n</code></pre>\n\n<p>In all of them <code>std::string</code> and <code>double</code> were displayed as some random numbers.\nThe last function printed the unformatted <code>std::string</code> correctly, same happened when I tried it with <code>long long</code> and <code>double</code>.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 2156, "user_id": 3476954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fb810a12cd393949bca88e4b0cdba75?s=128&d=identicon&r=PG&f=1", "display_name": "Mansoor", "link": "https://stackoverflow.com/users/3476954/mansoor"}, "edited": false, "score": 0, "creation_date": 1574874720, "post_id": 59075255, "comment_id": 104388056, "body": "Add the error message to the question."}, {"owner": {"reputation": 231, "user_id": 12296330, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4aUMpMgO5nc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdReW7JiBDNYLj69KtVK2AqpYytYQ/photo.jpg?sz=128", "display_name": "Stu", "link": "https://stackoverflow.com/users/12296330/stu"}, "edited": false, "score": 2, "creation_date": 1574874840, "post_id": 59075255, "comment_id": 104388105, "body": "At a guess, since there isn&#39;t nearly enough detail about the error here to say for certain... Try adding <code>#include &lt;cstdint&gt;</code>."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 6, "creation_date": 1574874906, "post_id": 59075255, "comment_id": 104388139, "body": "Your question is unclear. Are you asking why old compilers have bugs that get fixed in later versions, or what?"}, {"owner": {"reputation": 4966, "user_id": 9883438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e9176c9238126b88b11234a86f45cbe?s=128&d=identicon&r=PG&f=1", "display_name": "sebrockm", "link": "https://stackoverflow.com/users/9883438/sebrockm"}, "edited": false, "score": 1, "creation_date": 1574875300, "post_id": 59075255, "comment_id": 104388321, "body": "I&#39;m missing some effort narrowing down the error a little bit. If anyone&#39;s interested, <a href=\"https://godbolt.org/z/2XJV7b\" rel=\"nofollow noreferrer\">here</a> it is."}], "answers": [{"comments": [{"owner": {"reputation": 14052, "user_id": 1513286, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kUz60.png?s=128&g=1", "display_name": "snoopy", "link": "https://stackoverflow.com/users/1513286/snoopy"}, "edited": false, "score": 0, "creation_date": 1574878909, "post_id": 59075894, "comment_id": 104389965, "body": "It&#39;s an online competitive programming website, it is their compiler"}], "tags": [], "owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "is_accepted": true, "score": 1, "last_activity_date": 1574877466, "last_edit_date": 1574877466, "creation_date": 1574877122, "answer_id": 59075894, "question_id": 59075255, "link": "https://stackoverflow.com/questions/59075255/template-argument-was-not-declared-in-this-scope/59075894#59075894", "title": "template argument was not declared in this scope", "body": "<p>This would seem to be GCC <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=57887\" rel=\"nofollow noreferrer\">bug 57887</a>, which seems to have been fixed in 4.9.0. I would suggest updating your compiler to something remotely not ancient&hellip;</p>\n\n<p>If you cannot update your compiler for some reason (you really should update your compiler), a workaround would seem to be to avoid the in-class member initializer and use the constructor's initializer list instead:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class Jollo\n{\nprivate:\n    template&lt;int c&gt;\n    struct Player\n    {\n        int cards[c];\n        int nsize;\n\n        Player() : nsize(c) {}\n    };\n};\n</code></pre>\n\n<p>working example <a href=\"https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(fontScale:14,j:1,lang:c%2B%2B,source:&#39;class+Jollo%0A%7B%0Aprivate:%0A++++template+%3Cint+c%3E%0A++++struct+Player%0A++++%7B%0A++++++++int+cards%5Bc%5D%3B%0A++++++++int+nsize%3B%0A%0A++++++++Player()+:+nsize(c)+%7B%7D%0A++++%7D%3B%0A%7D%3B%0A&#39;),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;C%2B%2B+source+%231&#39;,t:&#39;0&#39;)),k:50.78431372549021,l:&#39;4&#39;,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((h:compiler,i:(compiler:g485,filters:(b:&#39;0&#39;,binary:&#39;1&#39;,commentOnly:&#39;0&#39;,demangle:&#39;0&#39;,directives:&#39;0&#39;,execute:&#39;0&#39;,intel:&#39;0&#39;,libraryCode:&#39;1&#39;,trim:&#39;1&#39;),fontScale:14,lang:c%2B%2B,libs:!(),options:&#39;-O2+-std%3Dc%2B%2B11&#39;,source:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;x86-64+gcc+4.8.5+(Editor+%231,+Compiler+%231)+C%2B%2B&#39;,t:&#39;0&#39;)),header:(),k:49.21568627450981,l:&#39;4&#39;,m:100,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;)),l:&#39;2&#39;,m:100,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),version:4\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 14052, "user_id": 1513286, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kUz60.png?s=128&g=1", "display_name": "snoopy", "link": "https://stackoverflow.com/users/1513286/snoopy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 59075894, "answer_count": 1, "score": 0, "last_activity_date": 1574877466, "creation_date": 1574874489, "question_id": 59075255, "link": "https://stackoverflow.com/questions/59075255/template-argument-was-not-declared-in-this-scope", "title": "template argument was not declared in this scope", "body": "<p>Why am I having issues compiling this in <code>g++ 4.8.5, -std=c++11 -O2 -lm</code>?</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;array&gt;\n#include &lt;iostream&gt;\n#include &lt;iterator&gt;\n#include &lt;numeric&gt;\n#include &lt;sstream&gt;\n#include &lt;utility&gt;\n\ntemplate&lt;uint_fast32_t N&gt;\nclass Jollo\n{\nprivate:\n    template&lt;uint_fast32_t c&gt;\n    struct Player\n    {\n        int_fast32_t cards[c]; // This line is OK!\n        uint_fast32_t nsize = c; // error 'c' was not declared in this scope\n        friend std::istream&amp; operator&gt;&gt;(std::istream&amp; is, Player&amp; p)\n        {\n            for(auto&amp; i : p.cards){\n                is &gt;&gt; i;\n            }\n            return is;\n        }\n\n    };\nprivate:\n    enum JP_ID{ JPID_PRINCE = N+1, JPID_PRINCESS, JPID_NONE };\n    Player&lt;2&gt; m_Prince;\n    Player&lt;3&gt; m_Princess;\n    int_fast32_t deck[N];\n    constexpr static int_fast32_t RoundsToWin {2};\n    int_fast32_t NextAvailableCard(const JP_ID&amp; idPlayer, int_fast32_t lastPlayedCard = 0);\npublic:\n    Jollo&lt;N&gt;(){\n        static_assert( N&gt;4, \"Invalid deck size - JolloManager\");\n    }\n\n    bool Read();\n    int_fast32_t GetWinningCard();\n};\n\ntemplate&lt;uint_fast32_t N&gt;\nbool Jollo&lt;N&gt;::Read()\n{\n    static std::string line;\n    std::getline(std::cin, line);\n    std::istringstream issline(line);\n    issline &gt;&gt; m_Princess;\n    issline &gt;&gt; m_Prince;\n    return (m_Princess.cards[0] != 0);\n}\n\ntemplate&lt;uint_fast32_t N&gt;\nint_fast32_t Jollo&lt;N&gt;::NextAvailableCard(const JP_ID&amp; idPlayer, int_fast32_t lastPlayedCard)\n{\n    if(idPlayer == JPID_PRINCE)\n    {\n        for(int_fast32_t i{0}; i&lt;m_Prince.nsize; ++i) {\n\n            if(deck[m_Prince.cards[i] - 1] != JPID_PRINCE){\n               deck[m_Prince.cards[i] - 1] =  JPID_PRINCE;\n               return m_Prince.cards[i];\n            }\n        }\n    } else\n    if(idPlayer == JPID_PRINCESS)\n    {\n        for(int_fast32_t i{0}; i&lt;m_Princess.nsize; ++i) {\n            if(deck[m_Princess.cards[i] - 1] != JPID_PRINCESS &amp;&amp; deck[m_Princess.cards[i] - 1] &gt; lastPlayedCard) {\n               deck[m_Princess.cards[i] - 1] =  JPID_PRINCESS;\n               return m_Princess.cards[i];\n            }\n        }\n        //no card was higher, return lowest available card\n        for(int_fast32_t i{0}; i&lt;m_Princess.nsize; ++i) {\n            if(deck[m_Princess.cards[i] - 1] != JPID_PRINCESS) {\n               deck[m_Princess.cards[i] - 1] =  JPID_PRINCESS;\n               return m_Princess.cards[i];\n            }\n        }\n    }\n\n    for(uint_fast32_t i{0}; i&lt;N; i++)\n    {\n        if(deck[i] != JPID_PRINCE &amp;&amp; deck[i] != JPID_PRINCESS &amp;&amp; deck[i] &gt; lastPlayedCard ) {\n            return deck[i];\n        }\n    }\n    return -1;\n}\n\ntemplate&lt;uint_fast32_t N&gt;\nint_fast32_t Jollo&lt;N&gt;::GetWinningCard()\n{\n    std::iota(deck, deck + N, 1);\n    std::sort(m_Prince.cards, m_Prince.cards + m_Prince.nsize, std::greater&lt;int_fast32_t&gt;());\n    std::sort(m_Princess.cards, m_Princess.cards + m_Princess.nsize);\n\n    int_fast32_t princeWins {0};\n    int_fast32_t princessWins {0};\n\n    for(int_fast32_t round {0}; round &lt; RoundsToWin; ++round) //play two first rounds\n    {\n        int_fast32_t princeCard = NextAvailableCard(JPID_PRINCE);\n        int_fast32_t princessCard = NextAvailableCard(JPID_PRINCESS, princeCard);\n\n        if(princessCard &gt; princeCard){\n            ++princessWins;\n        } else {\n            ++princeWins;\n        }\n    }\n    int_fast32_t lastPrincessCard = NextAvailableCard(JPID_PRINCESS); //important to flip the last card on the deck before continuing\n    if(princessWins == RoundsToWin){\n        return -1;\n    }\n    if(princeWins == RoundsToWin){\n        return NextAvailableCard(JPID_NONE);\n    }\n    return NextAvailableCard(JPID_NONE, lastPrincessCard);\n}\n\nint main()\n{\n    Jollo&lt;52u&gt; jollo;\n    while(true)\n    {\n        if(!jollo.Read()) {\n            break;\n        }\n        std::cout &lt;&lt; jollo.GetWinningCard() &lt;&lt; '\\n';\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I can compile it on almost any other g++ version with c++11 flags.</p>\n"}, {"tags": ["c++", "templates", "symbolic-math"], "comments": [{"owner": {"reputation": 1073, "user_id": 10794806, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GKvpJsipy5o/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hXsT0KoMOXyLso6Ie2mfwllaD7zQ/mo/photo.jpg?sz=128", "display_name": "Gaurav Dhiman", "link": "https://stackoverflow.com/users/10794806/gaurav-dhiman"}, "edited": false, "score": 0, "creation_date": 1574879673, "post_id": 59075239, "comment_id": 104390311, "body": "you can see <a href=\"https://en.wikipedia.org/wiki/Expression_templates\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Expression_templates</a>. however syntax will be a awkward if you are not accustomed to it, you can make it somewhat better by <code>constexpr</code> objects and operators."}, {"owner": {"reputation": 951, "user_id": 24819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WzfL.png?s=128&g=1", "display_name": "axelclk", "link": "https://stackoverflow.com/users/24819/axelclk"}, "edited": false, "score": 0, "creation_date": 1574895669, "post_id": 59075239, "comment_id": 104396182, "body": "Maybe you can create your own preprocessor program? Something similar as described here for <a href=\"https://github.com/axkr/java_codegen\" rel=\"nofollow noreferrer\">Java math expressions</a>"}, {"owner": {"reputation": 3365, "user_id": 2564696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bfecfacff3f61943083d01444ade243?s=128&d=identicon&r=PG", "display_name": "dmuir", "link": "https://stackoverflow.com/users/2564696/dmuir"}, "edited": false, "score": 0, "creation_date": 1575126774, "post_id": 59075239, "comment_id": 104464809, "body": "You might want to search for &quot;automatic differentiation&quot; on the web, and cppad in particular."}], "owner": {"reputation": 11, "user_id": 9319441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d37d2842528ba76a103df0a15dd1f513?s=128&d=identicon&r=PG&f=1", "display_name": "simplet", "link": "https://stackoverflow.com/users/9319441/simplet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1574874430, "creation_date": 1574874430, "question_id": 59075239, "link": "https://stackoverflow.com/questions/59075239/c-pre-runtime-symbolic-differentiation", "title": "C++ pre-runtime symbolic differentiation", "body": "<p>Suppose I want to implement a gradient descent based optimizer of some function f(x),\nwhich is a combination of simple functions: +,*,sin,cos (leaving out / for simplicity)</p>\n\n<p>Is there a way, using templates to symbolically calculate the derivative and make a function f'(x)\nin C++, then use the function and its gradient at runtime to optimize it.</p>\n\n<p>I'm comfortable with symbolic mathematics, so that isn't the focus of the question.\nI could write a parser and input the function as a string, expanding it dynamically at runtime, but especially for more complex functions, this is liable to be slow.</p>\n\n<p>If there's a way to produce the function at compile time, that would be awesome.</p>\n"}, {"tags": ["c++", "memory", "shared-ptr"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 3, "creation_date": 1574874092, "post_id": 59075067, "comment_id": 104387729, "body": "You&#39;re copying the pointer, not what it points to."}, {"owner": {"reputation": 387, "user_id": 7725203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37c6a243e01e63bc4a8efe01ced80888?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis Winters", "link": "https://stackoverflow.com/users/7725203/alexis-winters"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1574874433, "post_id": 59075067, "comment_id": 104387928, "body": "I would assume that the copy constructor for a shared_ptr does not copy what the pointer points to. But my concern here is that both <code>this-&gt; bar</code> and <code>bar</code> in the constructor of Foo are the same reference meaning that there is really only one shared_ptr object in memory, but I have 2 variables referencing that shared_ptr."}, {"owner": {"reputation": 6260, "user_id": 10933809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IR53l.jpg?s=128&g=1", "display_name": "Oblivion", "link": "https://stackoverflow.com/users/10933809/oblivion"}, "edited": false, "score": 1, "creation_date": 1574874642, "post_id": 59075067, "comment_id": 104388023, "body": "@AlexMussell your code is ok. There is one object referenced by multiple shared_ptr. You can use use_count to explore what is going on: <a href=\"https://en.cppreference.com/w/cpp/memory/shared_ptr/use_count\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/memory/shared_ptr/use_count</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1574963976, "post_id": 59075067, "comment_id": 104422410, "body": "@Shawn Stop answering in comments"}], "answers": [{"tags": [], "owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "is_accepted": true, "score": 2, "last_activity_date": 1574874564, "last_edit_date": 1574874564, "creation_date": 1574874222, "answer_id": 59075172, "question_id": 59075067, "link": "https://stackoverflow.com/questions/59075067/c-stdshared-ptr-is-operator-overloaded-to-use-copy-constructor/59075172#59075172", "title": "C++ std::shared_ptr, is operator= overloaded to use copy constructor?", "body": "<p>Both the copy constructor and the assignment operator will make the receiver share ownership with the one you pass in. However they perform that internally internally is an implementation detail.</p>\n\n<p>Of course, if <code>this-&gt;bar</code> was managing something, then it would release its shared ownership of it (and if it is the last one owning it, whatever <code>Bar</code> was there will get deleted).</p>\n\n<blockquote>\n  <p>But my concern here is that both this-> bar and bar in the constructor of Foo are the same reference meaning that there is really only one shared_ptr object in memory, but I have 2 variables referencing that shared_ptr. </p>\n</blockquote>\n\n<p>They are not references, <code>bar</code> and <code>this-&gt;bar</code> are two different <code>std::shared_ptr</code> objects that, after the assignment, will point (internally) to the same place in memory (but they are still two different objects). However, <code>std::shared_ptr</code> is a class that knows how many other <code>std::shared_ptr</code>s are pointing to it (<em>shared ownership</em>) and will properly delete the object only once all of the others are gone (so only the last <code>std::shared_ptr</code> will destroy it).</p>\n"}, {"tags": [], "owner": {"reputation": 6260, "user_id": 10933809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IR53l.jpg?s=128&g=1", "display_name": "Oblivion", "link": "https://stackoverflow.com/users/10933809/oblivion"}, "is_accepted": false, "score": 1, "last_activity_date": 1574874293, "creation_date": 1574874293, "answer_id": 59075195, "question_id": 59075067, "link": "https://stackoverflow.com/questions/59075067/c-stdshared-ptr-is-operator-overloaded-to-use-copy-constructor/59075195#59075195", "title": "C++ std::shared_ptr, is operator= overloaded to use copy constructor?", "body": "<p>Here <code>this-&gt;bar</code> hold a strong reference to whatever <code>bar</code> manages:</p>\n\n<pre><code>Foo(std::shared_ptr&lt;Bar&gt; bar)\n    {\n        this-&gt;bar = bar;\n    }\n</code></pre>\n\n<p>There is no copy going on here, you are just incrementing the reference count of <code>shared_ptr</code> by assigning <code>bar</code> to the member. </p>\n\n<p>And yes the pointer you have as member is valid, as the lifetime is managed by the <code>shared_ptr</code>. </p>\n"}], "owner": {"reputation": 387, "user_id": 7725203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37c6a243e01e63bc4a8efe01ced80888?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis Winters", "link": "https://stackoverflow.com/users/7725203/alexis-winters"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 59075172, "answer_count": 2, "score": 1, "last_activity_date": 1574874564, "creation_date": 1574873796, "last_edit_date": 1574874448, "question_id": 59075067, "link": "https://stackoverflow.com/questions/59075067/c-stdshared-ptr-is-operator-overloaded-to-use-copy-constructor", "title": "C++ std::shared_ptr, is operator= overloaded to use copy constructor?", "body": "<p>If I do the following:</p>\n\n<pre><code>class Foo\n{\n    std::shared_ptr&lt;Bar&gt; bar;\n    Foo(std::shared_ptr&lt;Bar&gt; bar)\n    {\n        this-&gt;bar = bar;\n    }\n}\n</code></pre>\n\n<pre><code>std::shared_ptr&lt;Foo&gt; func()\n{\n    std::shared_ptr&lt;Bar&gt; bar_ptr(new Bar());\n    std::shared_ptr&lt;Foo&gt; foo_ptr(new Foo(bar_ptr));\n    return foo_ptr;\n}\n</code></pre>\n\n<p>Will <code>foo_ptr</code> in <code>func()</code> have a valid pointer in its member variable bar? It seems that it only would if when setting <code>this-&gt;bar = bar</code> that the constructor parameter gets copied. Is the = operator for <code>std::shared_ptr</code> overridden to call the copy constructor always?</p>\n"}, {"tags": ["c++", "windows", "mouseevent", "screenshot", "sendinput"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1574873141, "post_id": 59074766, "comment_id": 104387220, "body": "That would depend on what GUI library/framework you are using."}, {"owner": {"reputation": 11, "user_id": 8385615, "user_type": "registered", "profile_image": "https://graph.facebook.com/1358573207541761/picture?type=large", "display_name": "Shreyal Rana", "link": "https://stackoverflow.com/users/8385615/shreyal-rana"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1574873371, "post_id": 59074766, "comment_id": 104387348, "body": "I am using VS 2019.. Want to use windows library but if there are else available, please guide me"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1574874532, "post_id": 59074766, "comment_id": 104387978, "body": "Qt would work cross platform. SFML or SDL are also cross platform options. Or you could use native Win32 and be locked to Windows. Other options also exist, but those 3 I have personal experience with and feel confident recommending."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1574886799, "post_id": 59074766, "comment_id": 104393174, "body": "<code>GetCursorPos</code>, you also want DPI compatibility"}], "answers": [{"tags": [], "owner": {"reputation": 70, "user_id": 2733837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a68db816e58d0ff50f62f826d941699f?s=128&d=identicon&r=PG&f=1", "display_name": "Valeca", "link": "https://stackoverflow.com/users/2733837/valeca"}, "is_accepted": false, "score": 0, "last_activity_date": 1575313049, "last_edit_date": 1575313049, "creation_date": 1575311142, "answer_id": 59144715, "question_id": 59074766, "link": "https://stackoverflow.com/questions/59074766/how-to-get-mouse-cursor-cordinates-when-left-click-is-pressed-and-when-left-clic/59144715#59144715", "title": "How to Get Mouse Cursor Cordinates when left click is pressed and when left click is released in C++?", "body": "<p>You need to create Windows Desktop Application, not a console application, as in your case.Then, for your main Window you need to implement message handler for mouse, where you can handle mouse button clicks, and get position coordinates. Check for WTL samples.</p>\n"}], "owner": {"reputation": 11, "user_id": 8385615, "user_type": "registered", "profile_image": "https://graph.facebook.com/1358573207541761/picture?type=large", "display_name": "Shreyal Rana", "link": "https://stackoverflow.com/users/8385615/shreyal-rana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575313049, "creation_date": 1574872698, "last_edit_date": 1575313031, "question_id": 59074766, "link": "https://stackoverflow.com/questions/59074766/how-to-get-mouse-cursor-cordinates-when-left-click-is-pressed-and-when-left-clic", "title": "How to Get Mouse Cursor Cordinates when left click is pressed and when left click is released in C++?", "body": "<p>I am trying to create snipping tool for college project I am trying to work on: where user can take screenshot of area mouse covered and stretched while clicked.</p>\n\n<p>For example : When left mouse is clicked : It gets cordinates x,y axis and when mouse is released it gets x,y axis. I cannot find any code or event function in SendInput() as well. Help.</p>\n\n<p>For creating screenshot and adding into Clipboard I am using this code : </p>\n\n<pre><code>void screenshot(POINT a, POINT b)\n{\n    // copy screen to bitmap\n    HDC     hScreen = GetDC(NULL);\n    HDC     hDC = CreateCompatibleDC(hScreen);\n    HBITMAP hBitmap = CreateCompatibleBitmap(hScreen, abs(b.x - a.x), abs(b.y - a.y));\n    HGDIOBJ old_obj = SelectObject(hDC, hBitmap);\n    BOOL    bRet = BitBlt(hDC, 0, 0, abs(b.x - a.x), abs(b.y - a.y), hScreen, a.x, a.y, SRCCOPY);\n\n\n\n    // save bitmap to clipboard\n    OpenClipboard(NULL);\n    EmptyClipboard();\n    SetClipboardData(CF_BITMAP, hBitmap);\n    CloseClipboard();\n\n    // clean up\n    SelectObject(hDC, old_obj);\n    DeleteDC(hDC);\n    ReleaseDC(NULL, hScreen);\n    DeleteObject(hBitmap);\n}\n\nint main()\n{\n    POINT a, b;\n    a.x = 0;\n    a.y = 0;\n\n    b.x = 10000;\n    b.y = 10000;\n\n    screenshot(a, b);\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1574876587, "post_id": 59074610, "comment_id": 104388910, "body": "it seems that you&#39;re drawing on the sub-image, but the coordinates of the rectangle refer to the whole image. If so, you&#39;re drawing, but outside your sub-image"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12447080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1738e76b28e9051faad1d2fc18c59e22?s=128&d=identicon&r=PG&f=1", "display_name": "atabb", "link": "https://stackoverflow.com/users/12447080/atabb"}, "is_accepted": false, "score": 0, "last_activity_date": 1574874014, "creation_date": 1574874014, "answer_id": 59075130, "question_id": 59074610, "link": "https://stackoverflow.com/questions/59074610/opencv-unable-to-draw-lines-on-image/59075130#59075130", "title": "Opencv unable to draw lines on image", "body": "<p>`I don't have the reputation to comment, but I have clarifying questions/comments:</p>\n\n<p>You mention drawing a line, but it seems that you are drawing a rectangle:</p>\n\n<pre><code>rectangle(clone, Point(rect.x, rect.y),\n                      Point(rect.x + rect.width, rect.y + rect.height),\n                      Scalar(255, 0, 0), 2);\n</code></pre>\n\n<p>Then, you are extracting a bounding box </p>\n\n<pre><code> auto clone = best_viola_jones(rect);\n</code></pre>\n\n<p>Here, I think that Rect is a Rect2d, it is not declared.</p>\n\n<p>Then, you are drawing using the <code>rect</code> coordinates.  It may be that <code>Point(rect.x, rect.y)</code> is larger than clone's height and width.  </p>\n\n<p>If you output the size of clone and the coordinates you are trying to write on it, I think that this would be helpful debugging.  And perhaps you need to write the <code>circles</code> and <code>lines</code> variables instead of <code>rect</code>.</p>\n"}], "owner": {"reputation": 2932, "user_id": 7212809, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VlOyJEUeeSc/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jExBae7iJ2ALFtcMj_6BCoHGTMgw/mo/photo.jpg?sz=128", "display_name": "nz_21", "link": "https://stackoverflow.com/users/7212809/nz-21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574874014, "creation_date": 1574872115, "last_edit_date": 1574872545, "question_id": 59074610, "link": "https://stackoverflow.com/questions/59074610/opencv-unable-to-draw-lines-on-image", "title": "Opencv unable to draw lines on image", "body": "<p>I am trying to draw some shapes in opencv c++</p>\n\n<p>I first extract a bounding box then draw a line in that box. My expecatation is that this line will be reflected in the original image. </p>\n\n<p>My code is like so:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;opencv/cv.h&gt;\n#include &lt;opencv/highgui.h&gt;\n#include &lt;opencv/cxcore.h&gt;\n#include &lt;math.h&gt;\n#include &lt;array&gt;\n#include &lt;unordered_set&gt;\n\nusing namespace cv;\nusing namespace std;\n\nvoid draw(Mat&amp; frame){\n auto best_viola_jones = frame.clone();\n\n\n    auto violaJonesDetections = get_detections();\n\n           for (auto &amp;rect: violaJonesDetections) {\n        auto clone = best_viola_jones(rect);\n\n        auto circles = get_circles();\n        auto lines = get_lines();\n\n        if (dartboardDetected(circles, lines, rect)) {\n            counter += 1;\n            cout &lt;&lt; \"detected\" &lt;&lt; endl;\n\n            rectangle(clone, Point(rect.x, rect.y),\n                      Point(rect.x + rect.width, rect.y + rect.height),\n                      Scalar(255, 0, 0), 2);\n\n\n        }\n\n    }\n\n    cout &lt;&lt; \"Total dartboards detected: \" &lt;&lt; counter;\n\n\n    imwrite(\"result/best_viola_jones.jpg\", best_viola_jones);\n}\n</code></pre>\n\n<p>It is detecting my object but not drawing anything out. </p>\n\n<p>I have banged my head against the wall to solve this. Could someone offer some guidance?</p>\n"}, {"tags": ["c++", "arrays", "matrix"], "comments": [{"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1574872354, "post_id": 59074576, "comment_id": 104386800, "body": "Please make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and fix your indentation."}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1574872422, "post_id": 59074576, "comment_id": 104386829, "body": "What do you mean by &quot;It breaks on the last &quot;for&quot; cycle&quot;? How did you find out? Which line exactly is the place where it &quot;breaks&quot;?"}], "answers": [{"tags": [], "owner": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "is_accepted": false, "score": 0, "last_activity_date": 1574874391, "creation_date": 1574874391, "answer_id": 59075224, "question_id": 59074576, "link": "https://stackoverflow.com/questions/59074576/spiral-matrix-breaks-on-the-last-for-loop-and-doesnt-show-anything/59075224#59075224", "title": "spiral matrix breaks on the last &quot;for&quot; loop and doesn&#39;t show anything", "body": "<p>There were simply some little mistakes on the bounds of the loops (the bounds of the spiral). Here is a slightly modified programme.</p>\n\n<p>PS: Note that you should avoid to use VMA <code>int A[n][n]</code> which is C, not C++. </p>\n\n<pre><code>#include&lt;iostream&gt;\n//using namespace std;\n\nint main()\n{\n    int n;\n    std::cout &lt;&lt; \"Enter the size of the array :\";\n    std::cin &gt;&gt; n;                                \n    int A[n][n];\n    int y = n, k = 1,p = 0,i;    \n\n    while(k&lt;= n*n)                      \n    {\n        for(i=p;i &lt; y;i++)     \n        {\n            A[y-1][i]=k++;\n        }\n        for(i=y - 2;i &gt;= p;i--)      \n        {\n            A[i][y-1]=k++;\n        }\n        for(i = y - 2;i &gt;= p;i--)         \n        {\n            A[p][i]=k++;\n        }\n        for(i = p + 1;i &lt; y-1; i++)      \n        {\n            A[i][p]=k++;\n        }\n        p++;\n        y--;\n\n    }\n    if(!n%2)                      \n    {\n        A[(n+1)/2][(n+1)/2]=n*n; \n    }\n    for(i=0;i&lt;n;i++)             \n    {\n        for(int j=0;j&lt;n;j++)\n        {\n            std::cout&lt;&lt;A[i][j]&lt;&lt;\"\\t\";\n        }\n        std::cout &lt;&lt; \"\\n\";\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12420960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/13Dj3.jpg?s=128&g=1", "display_name": "lovache", "link": "https://stackoverflow.com/users/12420960/lovache"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574874391, "creation_date": 1574872032, "question_id": 59074576, "link": "https://stackoverflow.com/questions/59074576/spiral-matrix-breaks-on-the-last-for-loop-and-doesnt-show-anything", "title": "spiral matrix breaks on the last &quot;for&quot; loop and doesn&#39;t show anything", "body": "<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    int n;\n    cout&lt;&lt;\"Enter the size of the array :\";\n    cin&gt;&gt;n;                                \n    int A[n][n];\n    int y=n,k=1,p=0,i;    \n\n\n\nwhile(k&lt;=n*n)                      \n{\n    for(i=p;i &lt; y;i++)     \n    {\n        A[y-1][i]=k++;\n    }\n    for(i=y - 2;i &gt; p;i--)      \n    {\n        A[i][y-1]=k++;\n    }\n    for(i=y - 2;i &gt; p;i--)         \n    {\n        A[p][i]=k++;\n    }\n    for(i = p + 1;i &lt; y; i++)      \n    {\n        A[i][p]=k++;\n    }\n    p++;\n    y--;\n\n}\nif(!n%2)                      \n{\n    A[(n+1)/2][(n+1)/2]=n*n; \n}\nfor(i=0;i&lt;n;i++)             \n{\n    for(int j=0;j&lt;n;j++)\n    {\n        cout&lt;&lt;A[i][j]&lt;&lt;\"\\t\";\n    }\n    cout&lt;&lt;endl;\n}\nreturn 0;\n</code></pre>\n\n<p>I need to do a spiral matrix the way like this > <a href=\"https://i.stack.imgur.com/dNzOP.png\" rel=\"nofollow noreferrer\">enter image description here</a>.\nIt breaks on the last \"for\" cycle and just doesn't show anything;;; Still, it shows up if I'm replacing one of the loop's statements;; I would be grateful if you point me where's my mistake!</p>\n\n<p>(this code is a modified one brought from here <a href=\"https://www.includehelp.com/cpp-programs/print-a-spiral-matrix.aspx\" rel=\"nofollow noreferrer\">https://www.includehelp.com/cpp-programs/print-a-spiral-matrix.aspx</a>)</p>\n"}, {"tags": ["c++", "linux", "g++", "shared-libraries"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1574872324, "post_id": 59074460, "comment_id": 104386780, "body": "One question per stackoverflow.com question, please. Each question must be a specific question. &quot;How do I do X&quot;, where X is some major task, is not a specific question. This is not what stackoverflow.com is for, this is not a tutorial site."}, {"owner": {"reputation": 55, "user_id": 12446168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efa5385fb2124d54fef49e54155f2b96?s=128&d=identicon&r=PG&f=1", "display_name": "Rainer H.", "link": "https://stackoverflow.com/users/12446168/rainer-h"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1574872730, "post_id": 59074460, "comment_id": 104386994, "body": "I&#39;m really sorry for that. I have changed my post."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 1, "creation_date": 1574872844, "post_id": 59074460, "comment_id": 104387055, "body": "@RainerH. You made your question even broader. I did try to answer question (1), but now that isn&#39;t there anymore."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 12446168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efa5385fb2124d54fef49e54155f2b96?s=128&d=identicon&r=PG&f=1", "display_name": "Rainer H.", "link": "https://stackoverflow.com/users/12446168/rainer-h"}, "edited": false, "score": 0, "creation_date": 1574876163, "post_id": 59074770, "comment_id": 104388709, "body": "Many thanks for your reply! I have changed the namespace in the interceptor implementation and recompiled the source code. Now I understand how to compile and link that program (previously I have tried out different compiling and linking instructions). I have another question: how to wrap the foo::print_text() function in interceptor such that some text is printed before and after the original function is executed?"}], "tags": [], "owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "is_accepted": false, "score": 2, "last_activity_date": 1574873218, "last_edit_date": 1574873218, "creation_date": 1574872702, "answer_id": 59074770, "question_id": 59074460, "link": "https://stackoverflow.com/questions/59074460/how-to-create-implement-an-interceptor-library-correctly-in-c/59074770#59074770", "title": "How to create/implement an interceptor library correctly in C++?", "body": "<p>To link <code>main.o</code> with <code>foo.so</code> do e.g.:</p>\n\n<pre><code>g++ -o main main.o foo.so\n</code></pre>\n\n<p>If you then try to run</p>\n\n<pre><code>./main\n</code></pre>\n\n<p>you will get an error, because <code>foo.so</code> is not in the system library path where the dynamic linker looks for it. We can tell it to look in the current folder as well:</p>\n\n<pre><code>$ LD_LIBRARY_PATH=. ./main\nNumber: 13\n\nHello World!\n</code></pre>\n\n<p>Now with the <code>interceptor.so</code>:</p>\n\n<pre><code>$ LD_LIBRARY_PATH=. LD_PRELOAD=interceptor.so ./main\nNumber: 13\n\nHello World!\n</code></pre>\n\n<p>As you can see nothing changed. This is because your <code>interceptor.so</code> does not actually contain definitions for <code>foo::get_number</code> and <code>foo::print_text</code>. It contains definitions for <code>interceptor::get_number</code> and <code>interceptor::print_text</code>, but these are never called by <code>main</code>!</p>\n\n<p><code>interceptor.cpp</code> should implement the same functions as <code>foo.cpp</code>, so after replacing <code>namespace interceptor</code> with <code>namespace foo</code> everywhere and recompiling:</p>\n\n<pre><code>$ LD_LIBRARY_PATH=. LD_PRELOAD=interceptor.so ./main\nNumber: 333\n\nHello World!\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 12446168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efa5385fb2124d54fef49e54155f2b96?s=128&d=identicon&r=PG&f=1", "display_name": "Rainer H.", "link": "https://stackoverflow.com/users/12446168/rainer-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 2, "answer_count": 1, "score": 0, "last_activity_date": 1574873218, "creation_date": 1574871675, "last_edit_date": 1574872616, "question_id": 59074460, "link": "https://stackoverflow.com/questions/59074460/how-to-create-implement-an-interceptor-library-correctly-in-c", "title": "How to create/implement an interceptor library correctly in C++?", "body": "<p>This is my very firt post! I have implemented a small C++ program which uses the foo-implementation as a shared library. The shared library contains two functions: <code>get_number()</code> and <code>print_text()</code>.</p>\n\n<p>The goal is that a interceptor library (shared library) changes the functions of the foo-library, such that</p>\n\n<ul>\n<li><code>get_number()</code> should be replaced with a function that always returns 333.</li>\n<li><code>print_text()</code> should be wrapped so that some text is printed before and after the original function is executed.</li>\n</ul>\n\n<p>The source code is the following:</p>\n\n<p><strong>foo.hpp</strong></p>\n\n<pre><code>#ifndef _FOO_HPP\n#define _FOO_HPP\n\nnamespace foo {\n\n    int get_number();\n\n    void print_text();\n\n}\n\n#endif\n</code></pre>\n\n<p><strong>foo.cpp</strong></p>\n\n<pre><code>#include \"foo.hpp\"\n\n#include &lt;iostream&gt;\n\nnamespace foo {\n\n    int get_number()\n    {\n        return 13;\n    }\n\n    void print_text()\n    {\n        std::cout &lt;&lt; \"Hello World!\" &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p><strong>interceptor.hpp</strong></p>\n\n<pre><code>#ifndef _INTERCEPTOR_HPP\n#define _INTERCEPTOR_HPP\n\n#include &lt;iostream&gt;\n\nnamespace interceptor {\n\n    int get_number();\n\n    void print_text();\n\n}\n\n#endif\n</code></pre>\n\n<p><strong>interceptor.cpp</strong></p>\n\n<pre><code>#include \"interceptor.hpp\"\n\nnamespace interceptor {\n\n    int get_number()\n    {\n        return 333;\n    }\n\n    void print_text()\n    {\n        // Print here some text.\n        std::cout &lt;&lt; \"Hello World!\" &lt;&lt; std::endl;\n        // Print here some test.\n    }\n}\n</code></pre>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#include \"foo.hpp\"\n\nint main(void)\n{\n    std::cout &lt;&lt; \"Number: \" &lt;&lt; foo::get_number() &lt;&lt; \"\\n\" &lt;&lt; std::endl;\n    foo::print_text();\n\n    return 0;\n}\n</code></pre>\n\n<p>Running the main-executable with and without the interceptor library could look like this:</p>\n\n<pre><code>$ ./main\nNumber: 13\n\nHello World!\n\n$ LD_PRELOAD=$PWD/interceptor.so ./main\nNumber: 333\n\nHi before\nHello World!\nBye after\n</code></pre>\n\n<p>I'm a beginner in shared libraries and in interceptor libraries. </p>\n\n<p>I hope that someone can help me with my problem.</p>\n"}, {"tags": ["c++", "c++14", "rvalue-reference"], "comments": [{"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 2, "creation_date": 1574872179, "post_id": 59074443, "comment_id": 104386704, "body": "If <code>MyType</code> is non-copyable and non-movable, you can only pass it by reference: <code>std::thread t(Run, std::ref(m));</code>."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1574872181, "post_id": 59074443, "comment_id": 104386705, "body": "You can&#39;t. <code>std::thread</code> does not work this way. The only thing you can pass is ordinary lvalue references that get wrapped in <code>std::reference_wrapper</code>."}, {"owner": {"reputation": 4691, "user_id": 12345656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8bf964ac051a25737d03906e89e2b36?s=128&d=identicon&r=PG&f=1", "display_name": "n314159", "link": "https://stackoverflow.com/users/12345656/n314159"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1574872440, "post_id": 59074443, "comment_id": 104386841, "body": "@SamVarshavchik Sorry if this is to big of a question for the comments: Why does <code>std::thread</code> not work this way? A priori it seems certainly possible to just perfect-forward everything (and the constructor explicitly goes around this by using <code>std::decay</code>)."}, {"owner": {"reputation": 1326, "user_id": 3884862, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3a96c04421620eb2ef052513984c2827?s=128&d=identicon&r=PG&f=1", "display_name": "theadnangondal", "link": "https://stackoverflow.com/users/3884862/theadnangondal"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1574872455, "post_id": 59074443, "comment_id": 104386848, "body": "@SamVarshavchik is there any alternative way to transfer ownership of an object to another thread ?"}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 1, "creation_date": 1574872503, "post_id": 59074443, "comment_id": 104386869, "body": "<a href=\"https://en.cppreference.com/w/cpp/thread/thread/thread\" rel=\"nofollow noreferrer\">&quot;The arguments to the thread function are moved or copied by value. If a reference argument needs to be passed to the thread function, it has to be wrapped (e.g. with <code>std::ref</code> or <code>std::cref</code>).&quot;</a>"}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1574872535, "post_id": 59074443, "comment_id": 104386887, "body": "You deleted move constructor and move assignment. How do you wan to transfer it then?"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1574872606, "post_id": 59074443, "comment_id": 104386917, "body": "By definition, all parameters to a new execution thread function are moved/copied by value. That&#39;s how <code>std::thread</code> works. There&#39;s nothing you can do about it. Either pass it by reference, and make sure that the object does not go out of scope in its original execution thread until the new execution thread finishes using it, or instantiate it in dynamic scope, and use <code>std::unique_ptr</code>, or something similar."}, {"owner": {"reputation": 1326, "user_id": 3884862, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3a96c04421620eb2ef052513984c2827?s=128&d=identicon&r=PG&f=1", "display_name": "theadnangondal", "link": "https://stackoverflow.com/users/3884862/theadnangondal"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1574873749, "post_id": 59074443, "comment_id": 104387556, "body": "@SamVarshavchik I tried this with unique_ptr and to my surprise it now works. This leads me to ask how does this works in this scenerio as for unique_ptr also the copy constructors are deleted. (and for my case even though I allow move constructor it doesn&#39;t work) .."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1574874891, "post_id": 59074443, "comment_id": 104388133, "body": "unique_ptr&#39;s move constructor is sufficient. The unique_ptr is moved into the execution thread&#39;s parameter."}, {"owner": {"reputation": 1326, "user_id": 3884862, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3a96c04421620eb2ef052513984c2827?s=128&d=identicon&r=PG&f=1", "display_name": "theadnangondal", "link": "https://stackoverflow.com/users/3884862/theadnangondal"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1574875132, "post_id": 59074443, "comment_id": 104388243, "body": "@SamVarshavchik what I dont understand is that even if I enable move constructor in my class. It still gives an error."}], "answers": [{"comments": [{"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1574872939, "post_id": 59074740, "comment_id": 104387124, "body": "If we add a move constructor to OP&#39;s class and declare <code>void Run(MyType)</code>, will <code>std::thread t(Run, std::move(m));</code> work correctly?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 1, "creation_date": 1574873932, "post_id": 59074740, "comment_id": 104387646, "body": "@Evg By the standard, yes.  Under some versions of MSVC which had bugs here, no."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 0, "last_activity_date": 1574872583, "creation_date": 1574872583, "answer_id": 59074740, "question_id": 59074443, "link": "https://stackoverflow.com/questions/59074443/thread-with-rvalue-reference-of-an-object/59074740#59074740", "title": "thread with rvalue reference of an object", "body": "<p>What is going on is that <code>std::thread</code> copies its arguments into something tuple-like, then in the thread invokes the function with those arguments.</p>\n\n<p>In your specific case, the thread doesn't outlive the scope the <code>std::thread</code> object is created in.  This is not typical.</p>\n\n<p>The easiest way to get what you want to work is:</p>\n\n<pre><code>MyType m{100};\nstd::thread t([&amp;]{ Run(std::move(m)); });\nt.join();\n</code></pre>\n\n<p>where you pass in a lambda and manage copying and lifetime yourself.</p>\n\n<p>Note that if this thread outlives the scope where <code>m</code> is created, this is going to follow a dangling reference.</p>\n\n<pre><code>std::thread t([pm=std::make_unique&lt;MyType&gt;(100)]() mutable { Run(std::move(*pm)); });\n</code></pre>\n\n<p>is a version where I create the object directly on the heap, then use a smart pointer to carry it around with the thread.  A correctly written <code>std::thread</code> should only require its callable be movable (an incorrectly written one will store it in a std function can generate build errors here; you can swap unique ptr for shared ptr for modest additional overhead but get it to compile on a non-standard-compliant std thread).</p>\n\n<hr>\n\n<p>My general rule of thumb is to <em>not</em> use the INVOKE-based threading helpers, but rather use no-argument lambdas and handle the argument storage and passing myself.</p>\n\n<p>The threading APIs come from boost in a pre-lambda era of C++; lambdas are something you really should master anyhow, and can replace having to gain expertise in the quirks of INVOKE based APIs (even knowing what INVOKE is is something you don't need to know!)</p>\n\n<p>(<code>std::invoke</code>, and <code>std::apply</code>, OTOH, are awesome, even though they are INVOKE; my main complaint is the violation of SRP (single responsibility principle), where we mix threading constructs with invocation constructs.)</p>\n"}, {"tags": [], "owner": {"reputation": 1326, "user_id": 3884862, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3a96c04421620eb2ef052513984c2827?s=128&d=identicon&r=PG&f=1", "display_name": "theadnangondal", "link": "https://stackoverflow.com/users/3884862/theadnangondal"}, "is_accepted": true, "score": 1, "last_activity_date": 1574874032, "creation_date": 1574874032, "answer_id": 59075133, "question_id": 59074443, "link": "https://stackoverflow.com/questions/59074443/thread-with-rvalue-reference-of-an-object/59075133#59075133", "title": "thread with rvalue reference of an object", "body": "<p>Thanks to @<a href=\"https://stackoverflow.com/users/3943312/sam-varshavchik\">SamVarshavchik</a> I have it working now with <code>std::unique_ptr</code></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\nclass MyType {\npublic:\n    explicit MyType(int m) : myint_(m) {}\n    MyType(const MyType&amp; ) = delete;\n    MyType ( MyType&amp;&amp; ) = delete;\n    MyType operator = (const MyType&amp; ) = delete;\n    MyType operator = (const MyType&amp;&amp;) = delete;\n\nprivate:\n   int myint_;\n};\n\nvoid Run(std::unique_ptr&lt;MyType&gt;&amp;&amp; t) {\n  // do somthing with t.     \n}\n\nint main()\n{\n    auto m = std::make_unique&lt;MyType&gt;(100);\n    std::thread t(Run, std::move(m));\n    t.join();\n    return 0;\n}\n</code></pre>\n\n<p>Follow up question: unique_ptr is not copyable and is only moveable. How does it works with it but not for my data type (even though I make it moveable) ??</p>\n"}], "owner": {"reputation": 1326, "user_id": 3884862, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3a96c04421620eb2ef052513984c2827?s=128&d=identicon&r=PG&f=1", "display_name": "theadnangondal", "link": "https://stackoverflow.com/users/3884862/theadnangondal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 59075133, "answer_count": 2, "score": 1, "last_activity_date": 1574874032, "creation_date": 1574871598, "question_id": 59074443, "link": "https://stackoverflow.com/questions/59074443/thread-with-rvalue-reference-of-an-object", "title": "thread with rvalue reference of an object", "body": "<p>I have a function which accepts an rvalue reference of on object and I want to run this function in a <code>std::thread</code>. Following piece of code</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\nclass MyType {\npublic:\n    explicit MyType(int m) : myint_(m) {}\n    MyType(const MyType&amp; ) = delete;\n    MyType ( MyType&amp;&amp; ) = delete;\n    MyType operator = (const MyType&amp; ) = delete;\n    MyType operator = (const MyType&amp;&amp;) = delete;\n\nprivate:\n   int myint_;\n};\n\nvoid Run(const MyType&amp;&amp; t) {\n  // do somthing with t.     \n}\n\nint main()\n{\n    MyType m{100};\n    std::thread t(Run, std::move(m));\n    t.join();\n    return 0;\n}\n\n</code></pre>\n\n<p>I have deleted the default move and copy constructor. In my case it might be possible to define a default move constructor but I would not like to have a copy constructor because <code>sizeof(MyType)</code> can be big and I am concerned about the memory when the copy constructors are called.</p>\n\n<p>I need advice on how to achieve this.</p>\n\n<p>Regards.</p>\n"}, {"tags": ["c++", "memory-alignment"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 4, "creation_date": 1574871340, "post_id": 59074271, "comment_id": 104386283, "body": "&quot;<i>the real addresses of the two arrays are not consistent with the them</i>&quot; Yes, they are. Just because something happens to be aligned to 16-byte boundaries doesn&#39;t mean that it&#39;s not also aligned to 2 or 1 byte boundaries."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1574871446, "post_id": 59074271, "comment_id": 104386337, "body": "Got not 16 byte aligned <a href=\"http://coliru.stacked-crooked.com/a/5b8143ed97d5cd83\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1574871660, "post_id": 59074271, "comment_id": 104386440, "body": "@Jarod42 Seems gcc aligns them to 16 bytes until gcc 6.3 based on my godbolt testing. (You have gcc 9.2 there.)"}, {"owner": {"reputation": 179, "user_id": 717599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9155f436265f2c7f84a670b23c3f9bf2?s=128&d=identicon&r=PG", "display_name": "bialy", "link": "https://stackoverflow.com/users/717599/bialy"}, "edited": false, "score": 0, "creation_date": 1574879531, "post_id": 59074271, "comment_id": 104390243, "body": "This might be an answer <a href=\"https://stackoverflow.com/questions/41719845/memory-alignment-in-c-c\" title=\"memory alignment in c c\">stackoverflow.com/questions/41719845/memory-alignment-in-c-c</a>"}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1574883562, "post_id": 59074271, "comment_id": 104391877, "body": "The compiler might be setting up 16-byte alignment so that it can (potentially) use SSE instructions on your data for certain operations."}, {"owner": {"reputation": 606, "user_id": 5717865, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/XlrCH.jpg?s=128&g=1", "display_name": "jinge", "link": "https://stackoverflow.com/users/5717865/jinge"}, "edited": false, "score": 0, "creation_date": 1574996874, "post_id": 59074271, "comment_id": 104429652, "body": "I have another question, can you take a look? <a href=\"https://stackoverflow.com/questions/59098246/why-is-dynamically-allocated-memory-always-16-bytes-aligned\" title=\"why is dynamically allocated memory always 16 bytes aligned\">stackoverflow.com/questions/59098246/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "is_accepted": true, "score": 3, "last_activity_date": 1574904667, "last_edit_date": 1574904667, "creation_date": 1574902632, "answer_id": 59080382, "question_id": 59074271, "link": "https://stackoverflow.com/questions/59074271/why-are-all-arrays-aligned-to-16-bytes-on-my-implementation/59080382#59080382", "title": "Why are all arrays aligned to 16 bytes on my implementation?", "body": "<p>I have found <a href=\"https://gcc.gnu.org/ml/gcc-patches/2017-03/msg00263.html\" rel=\"nofollow noreferrer\">this</a> patch.</p>\n\n<p>This seems to have been a bug for x86_64 fixed in GCC 6.4.</p>\n\n<p>The System V x86-64 ABI requires aggregate types (such as arrays and <code>struct</code>s) to be aligned to at least 16 bytes if they are at least 16 bytes large. According to a comment in the ABI specification this is meant to facilitate use of SSE instructions.</p>\n\n<p>GCC seem to have mistakenly applied that rule to aggregates of size 16 bits (instead of bytes) and larger.</p>\n\n<p>I suggest you upgrade your compiler to a more recent GCC version.</p>\n\n<hr>\n\n<p>This is however only an optimization issue, not a correctness one. There is nothing wrong with stricter alignment for the variables and (as with the mentioned SSE) overalignment may have performance benefits in some situations that outweight the cost of the wasted stack memory.</p>\n"}], "owner": {"reputation": 606, "user_id": 5717865, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/XlrCH.jpg?s=128&g=1", "display_name": "jinge", "link": "https://stackoverflow.com/users/5717865/jinge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 1, "accepted_answer_id": 59080382, "answer_count": 1, "score": 5, "last_activity_date": 1574993889, "creation_date": 1574870997, "last_edit_date": 1574993889, "question_id": 59074271, "link": "https://stackoverflow.com/questions/59074271/why-are-all-arrays-aligned-to-16-bytes-on-my-implementation", "title": "Why are all arrays aligned to 16 bytes on my implementation?", "body": "<p>My very simple code shows below</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdalign.h&gt;\n\nint main() {\n    char array_char[2] = {'a', 'b'};\n    float array_float[2] = {1, 2};\n    std::cout &lt;&lt; \"alignof(array_char): \" &lt;&lt; alignof(array_char) &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"alignof(array_float): \" &lt;&lt; alignof(array_float) &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"address of array_char: \" &lt;&lt; (void *) array_char &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"address of array_float: \" &lt;&lt; array_float &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>The output of this code is</p>\n\n<blockquote>\n  <p>alignof(array_char): 1</p>\n  \n  <p>alignof(array_float): 4</p>\n  \n  <p>address of array_char: 0x7fff5e8ec580</p>\n  \n  <p>address of array_float: 0x7fff5e8ec570</p>\n</blockquote>\n\n<p>The results of <code>alignof</code> operator is under expectation, but the real addresses of the two arrays are not consistent with them. No matter how many times I tried, the addresses are always 16 bytes aligned.</p>\n\n<p>I'm using gcc 5.4.0 on Ubuntu 16.04 with Intel CORE i5 7th Gen CPU.</p>\n"}, {"tags": ["c++", "class", "inheritance", "overriding", "virtual-inheritance"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 2, "creation_date": 1574870904, "post_id": 59074181, "comment_id": 104386035, "body": "Nope, this is very well defined behavior: infinite recursion. This cannot be done in C++ without redesigning something about these classes, or doing some ugly stuff that would fail a code review."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 1, "creation_date": 1574871022, "post_id": 59074181, "comment_id": 104386094, "body": "How should <code>A::get_next</code> decide when to call <code>C::vf()</code> vs <code>B::vf()</code>?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1574872867, "post_id": 59074181, "comment_id": 104387069, "body": "This conceptualised whadjamajing doesn&#39;t make much sense. Please describe your real problem."}, {"owner": {"reputation": 23, "user_id": 12446704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f7451eeccce591a86a2eb2d940e58e9?s=128&d=identicon&r=PG&f=1", "display_name": "imwhocodes", "link": "https://stackoverflow.com/users/12446704/imwhocodes"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1574877815, "post_id": 59074181, "comment_id": 104389483, "body": "@n.&#39;pronouns&#39;m. Need to implement CRC on top of Arduino Serials (using template for which serial) one option would be to have class CRC (C in example) inherit from Stream and a reference to Stream/serial object passed at the constructor, then would be like <code>int C::vf() {return serial_recived_from_constructor.get_next() + 1; };</code> but this seem pretty ugly and idea was more like a conceptualized question;  Also for reference <code>virtual int A::vf();</code> in the reality is <code>virtual int Stream::read();</code> of the Arduino Core"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1574879848, "post_id": 59074181, "comment_id": 104390384, "body": "Please show the actual code in the question itself."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1575409635, "post_id": 59074181, "comment_id": 104555531, "body": "Do you use virtual inheritance anywhere?"}], "answers": [{"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1574871261, "post_id": 59074266, "comment_id": 104386240, "body": "@Renat: <code>A::get_next</code> is indeed not virtual, but call virtual method."}, {"owner": {"reputation": 23, "user_id": 12446704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f7451eeccce591a86a2eb2d940e58e9?s=128&d=identicon&r=PG&f=1", "display_name": "imwhocodes", "link": "https://stackoverflow.com/users/12446704/imwhocodes"}, "edited": false, "score": 0, "creation_date": 1574876684, "post_id": 59074266, "comment_id": 104388957, "body": "I\u2019m going to try this it tomorrow, is this different from using \u201cstatic_cast&lt;B *&gt;(this*).get_next();\u201d ?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 23, "user_id": 12446704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f7451eeccce591a86a2eb2d940e58e9?s=128&d=identicon&r=PG&f=1", "display_name": "imwhocodes", "link": "https://stackoverflow.com/users/12446704/imwhocodes"}, "edited": false, "score": 1, "creation_date": 1574881886, "post_id": 59074266, "comment_id": 104391194, "body": "@imwhocodes: I do a (sliced) <b>copy</b>. In your version, casting <code>this</code> do <code>B*</code> does nothing for the dynamic dispatch."}, {"owner": {"reputation": 23, "user_id": 12446704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f7451eeccce591a86a2eb2d940e58e9?s=128&d=identicon&r=PG&f=1", "display_name": "imwhocodes", "link": "https://stackoverflow.com/users/12446704/imwhocodes"}, "edited": false, "score": 0, "creation_date": 1575283642, "post_id": 59074266, "comment_id": 104501616, "body": "Doing a copy was not an option, I ended up changing the pattern (going to update the answer later), anyway rating this answer as correct for giving me an actual possible solution, the conciseness and the use of the keywords that put me in the right direction to properly understand the problem, thanks"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 2, "last_activity_date": 1574870987, "creation_date": 1574870987, "answer_id": 59074266, "question_id": 59074181, "link": "https://stackoverflow.com/questions/59074181/cpp-inheritance-virtual-method-resolution-order/59074266#59074266", "title": "cpp inheritance virtual method resolution order", "body": "<p><code>B::get_next()</code> still has dynamic dispatch inside that function.</p>\n\n<p>If possible and appropriate, you might <strong>slice</strong> your object:</p>\n\n<pre><code>class C : public B {\n\n    int vf() override\n    {\n        return B(*this).get_next() + 1;\n    }\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 12446704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f7451eeccce591a86a2eb2d940e58e9?s=128&d=identicon&r=PG&f=1", "display_name": "imwhocodes", "link": "https://stackoverflow.com/users/12446704/imwhocodes"}, "edited": false, "score": 0, "creation_date": 1574878703, "post_id": 59074985, "comment_id": 104389863, "body": "As I said A and B are inside an external library that I can&#39;t edit, also as I tried to explain with the arrows at the end I understood why the recursion happen, my question was about a way to limit the virtual resolution scope of the <code>int C::vf(){ return B::get_next() + 1; };</code> having <code>B::get_next()</code> using <b>only B own function overload</b>, like the splicing suggested by @Jarod42"}], "tags": [], "owner": {"reputation": 191, "user_id": 7322284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ah4Ex.jpg?s=128&g=1", "display_name": "Saisai3396", "link": "https://stackoverflow.com/users/7322284/saisai3396"}, "is_accepted": false, "score": 0, "last_activity_date": 1574873492, "creation_date": 1574873492, "answer_id": 59074985, "question_id": 59074181, "link": "https://stackoverflow.com/questions/59074181/cpp-inheritance-virtual-method-resolution-order/59074985#59074985", "title": "cpp inheritance virtual method resolution order", "body": "<p>When you call C::get_next(), it actually calls A::get_next(), which then calls vf() which is overloaded in C. After that B::get_next() is called which again actually just calls A::get_next() resulting in vf() (again overloaded in C not B) call again and repeats. You cannot really achieve what you want with such a confusing design. If you want this kind of call:\n<code>A::get_next() -&gt; C::vf() -&gt; A::get_next() -&gt; B::vf()</code></p>\n\n<p>You might have to rewrite some code of that base class like this:</p>\n\n<pre><code>int vf(){\n  return B::vf() * 2 + 1;\n}\n</code></pre>\n\n<p>which basically just ends up as\n<code>A::get_next() -&gt; C::vf() -&gt; B::vf()</code> and actually makes more sense in C++.</p>\n"}], "owner": {"reputation": 23, "user_id": 12446704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f7451eeccce591a86a2eb2d940e58e9?s=128&d=identicon&r=PG&f=1", "display_name": "imwhocodes", "link": "https://stackoverflow.com/users/12446704/imwhocodes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 1, "accepted_answer_id": 59074266, "answer_count": 2, "score": 2, "last_activity_date": 1574873492, "creation_date": 1574870679, "question_id": 59074181, "link": "https://stackoverflow.com/questions/59074181/cpp-inheritance-virtual-method-resolution-order", "title": "cpp inheritance virtual method resolution order", "body": "<p>long time reader first time asking here</p>\n\n<p>I'm trying to extend the functionality of an external library by inherit from it.</p>\n\n<p>In the library there is a base class and one that derive from it and implements some low level functions, then there is my implementation derived from the latter.</p>\n\n<p><strong>Here is a trivial conceptualized code example of the implementation:</strong></p>\n\n<p><em>The base class:</em></p>\n\n<pre><code> class A {\n\n    virtual int vf() = 0;\n\n    int get_next(){\n        return vf() * 2; \n    } \n};\n</code></pre>\n\n<p><em>The derived class:</em></p>\n\n<pre><code>class B : public A {\n\n    virtual int vf(){\n        return 1;\n    }\n\n};\n</code></pre>\n\n<p><em>My extension to the library:</em></p>\n\n<pre><code>class C : public B {\n\n    int vf(){\n        return B::get_next() + 1;\n    }\n\n};\n</code></pre>\n\n<p><strong>Then I want to call:</strong></p>\n\n<pre><code>C::get_next();\n</code></pre>\n\n<p>But this result in a recursive function call:</p>\n\n<pre><code>C::get_next() = A::get_next() -&gt; C::vf() -&gt; A::get_next() -&gt; C::vf() -&gt; A::get_next() -&gt; C::vf() -&gt; A::get_next() -&gt; C::vf() ... and so on\n</code></pre>\n\n<p>What i would like to happen:</p>\n\n<pre><code>C::get_next() = A::get_next() -&gt; C::vf() -&gt; A::get_next() -&gt; B::vf() end of call trace\n</code></pre>\n\n<p>Is this possible? I'm doing something wrong in the implementation or hitting some undefined behavior or similar?</p>\n"}, {"tags": ["android", "c++", "cmake", "cross-compiling", "clion"], "owner": {"reputation": 11, "user_id": 11049546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c04e9852ebf9f3d711dea52a17f8c359?s=128&d=identicon&r=PG&f=1", "display_name": "Gravlok", "link": "https://stackoverflow.com/users/11049546/gravlok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1574871985, "creation_date": 1574870549, "last_edit_date": 1574871985, "question_id": 59074141, "link": "https://stackoverflow.com/questions/59074141/custom-command-requires-calling-cmake-three-times-to-have-desired-output", "title": "Custom command requires calling CMake three times to have desired output", "body": "<p>My project is fairly simple. I have an app that includes a library written based on integration platfrom so it looks something like this:</p>\n\n<pre><code>My app\n\n  ----&gt; Extension\n\n        ----&gt; Main library\n</code></pre>\n\n<p>The app is cross-compiled to Android. All of them are based on CMake. I'm using CLion as an IDE. I've added a profile with custom toolchain required to build for Android (that is clang, clang++ for apropiate platform, cmake from Android SDK and make from Android NDK r20b). Problem is I have to call CMake 3 times (reload it in CLion) before it generates all of the files needed. Whole file is listed below.</p>\n\n<p>On the first run it ignores the fact it is build for android (doesn't go into if (ANDROID) ) and copies the prebuilt sub-executable for linux (default)</p>\n\n<p>On the second run it ignores the needed <em>android.toolchain.cmake</em> and when build on this stage it fails to add android headers to search path BUT chooses correct prebuilt sub-executable</p>\n\n<p>On the the third run it uses the <em>android.toolchain.cmake</em> file AND chooses correct sub-executable.</p>\n\n<p>After that I can hit build and everything compiles correctly.</p>\n\n<p>The CMake I have:</p>\n\n<pre><code>add_executable(androidApp main.cpp)\n\ntarget_include_directories(androidApp\n        PUBLIC\n        ../submodules/exten/src/libraries/main_lib/lib/include\n        ../submodules/exten/src/libraries/main_lib/sdk/rlogging/include) //Headers from main library\n\ntarget_link_libraries(androidApp\n        PRIVATE\n        exten) //Extension\n\ninstall(TARGETS androidApp DESTINATION ${CMAKE_SOURCE_DIR}/bin)\ninstall(FILES ../submodules/exten/src/libraries/main_lib/integration_app/resources/someFile.zip DESTINATION ${CMAKE_SOURCE_DIR}/bin)\ninstall(FILES ../resources/someFile2.zip DESTINATION ${CMAKE_SOURCE_DIR}/bin/resources)\n\nfile(MAKE_DIRECTORY ${CMAKE_SOURCE_DIR}/bin/bootsafe)\nfile(WRITE ${CMAKE_SOURCE_DIR}/bin/bootsafe/dummy \"\") //Required dir\n\nadd_custom_command(TARGET dongleApp POST_BUILD\n        COMMAND ${CMAKE_SOURCE_DIR}/ndk/android-ndk-r20b/toolchains/llvm/prebuilt/linux-x86_64/arm-linux-androideabi/bin/strip --strip-debug dongleApp\n        WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}\n        COMMENT \"Stripping debug symbols\")\n\nif (ANDROID)\n    target_link_libraries(androidApp\n            PRIVATE\n            log)\nendif (ANDROID) //Linking android lib\n\n</code></pre>\n\n<p>On different CMake (on the main library level) here's how the choosing on correct prebuilt is written</p>\n\n<pre><code>if(NOT ANDROID)\n    set(PREBUILD_NAME \"linux\")\nelse()\n    if(ANDROID_ABI STREQUAL \"x86_64\")\n        set(PREBUILD_NAME \"android-x86\")\n    else()\n        set(PREBUILD_NAME \"android-arm\")\n    endif()\nendif()\n</code></pre>\n\n<p>The command that is used to generate makefiles:</p>\n\n<pre><code>/home/gravlok/companyName/app_v2/sdk/cmake/3.10.2.4988404/bin/cmake \n-DCMAKE_BUILD_TYPE=Debug\n-DCMAKE_MAKE_PROGRAM=/home/gravlok/companyName/app_v2/ndk/android-ndk-r20b/prebuilt/linux-x86_64/bin/make\n-DCMAKE_C_COMPILER=/home/gravlok/companyName/app_v2/ndk/android-ndk-r20b/toolchains/llvm/prebuilt/linux-x86_64/bin/armv7a-linux-androideabi28-clang\n-DCMAKE_CXX_COMPILER=/home/gravlok/companyName/app_v2/ndk/android-ndk-r20b/toolchains/llvm/prebuilt/linux-x86_64/bin/armv7a-linux-androideabi28-clang++\n-DANDROID=ON\n-DCMAKE_TOOLCHAIN_FILE=/home/gravlok/companyName/app_v2/ndk/android-ndk-r20b/build/cmake/android.toolchain.cmake -DANDROID_PLATFORM=android-28\n-G \"CodeBlocks - Unix Makefiles\"\n/home/gravlok/companyName/app_v2\n</code></pre>\n\n<p>Why do I need to run it 3 times in order to configure correctly?</p>\n"}, {"tags": ["c++", "qt", "qthread", "qtconcurrent"], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 9663907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234a98ea5e2beb4fad69554866ebe40b?s=128&d=identicon&r=PG&f=1", "display_name": "Mandeep", "link": "https://stackoverflow.com/users/9663907/mandeep"}, "edited": false, "score": 0, "creation_date": 1574936499, "post_id": 59086212, "comment_id": 104408571, "body": "Thank You, I tried it this time it did not stop the QtConcurrent as it keeps on running. How to make sure first qt concurrent is stopeed and then another thread is stopped /  quit."}], "tags": [], "owner": {"reputation": 8919, "user_id": 8873508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uDHi.png?s=128&g=1", "display_name": "p-a-o-l-o", "link": "https://stackoverflow.com/users/8873508/p-a-o-l-o"}, "is_accepted": true, "score": 1, "last_activity_date": 1574935447, "creation_date": 1574935447, "answer_id": 59086212, "question_id": 59074068, "link": "https://stackoverflow.com/questions/59074068/how-to-close-the-programme-when-running-a-qtconcurrent-from-another-thread-in-qt/59086212#59086212", "title": "How to close the programme when running a qtconcurrent from another thread in qt", "body": "<p>What probably happens here: the signal <code>toStop_Signal</code> which is meant to quit <code>l_newThread</code> is never delivered, because when it's emitted the event loop is already dead and gone. Hence, your program is stuck waiting for the thread in <code>l_newThread.wait();</code>.</p>\n\n<p>I don't fully get why you start this thread at all, just to use <code>QtConcurrent::run</code> right after and span yet another thread ...</p>\n\n<p>Anyway, once you're sure your worker has stopped (and you are, according to the output you posted), you can safely quit the (basically useless) thread directly in your <code>main</code>:</p>\n\n<pre><code>int result = app.exec();\n\nl_newThread.exit(); //just quit it\nl_newThread.wait();\n\nreturn result;\n</code></pre>\n\n<p>Then you can get rid of this connection:</p>\n\n<pre><code>QObject::connect(l_handler,&amp;handler::toStop_Signal,&amp;l_newThread, &amp;QThread::quit);\n</code></pre>\n\n<p>and (I guess) of the handler altogether.</p>\n"}], "owner": {"reputation": 175, "user_id": 9663907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234a98ea5e2beb4fad69554866ebe40b?s=128&d=identicon&r=PG&f=1", "display_name": "Mandeep", "link": "https://stackoverflow.com/users/9663907/mandeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 59086212, "answer_count": 1, "score": 1, "last_activity_date": 1574935447, "creation_date": 1574870315, "last_edit_date": 1574888465, "question_id": 59074068, "link": "https://stackoverflow.com/questions/59074068/how-to-close-the-programme-when-running-a-qtconcurrent-from-another-thread-in-qt", "title": "How to close the programme when running a qtconcurrent from another thread in qt", "body": "<p>I am running a programme that has multithreading . The programme firstly has a main / UI thread running in it. In this programme I have a worker and handler class.</p>\n\n<p>The worker class is having a simulate function which simply generates the random number. The simulate function continuously generates the number without blocking any thread i.e. via Qtconcurrent.</p>\n\n<p>From the main/UI thread I have put this worker class into new thread. The handler class is running in main /UI thread and is responsible to communicate with worker class running in other thread via signal slot.</p>\n\n<p><strong>So far everything is ok.</strong></p>\n\n<p>Problem starts when i try to close the programme by simply clicking on app cross button. <strong>The\nprogramme sort of hangs it does not close</strong>. However when i dont put worker in another class and run worker class from same main /UI thread then there is no problem and  programme exits with 0.</p>\n\n<p><strong>So my question is how to stop Qtconcurrent is another thread and finally close the another thread aswell</strong>.</p>\n\n<p>Thank You.</p>\n\n<p>main.cpp</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    QCoreApplication::setAttribute(Qt::AA_EnableHighDpiScaling);\n\n    QGuiApplication app(argc, argv);\n\n    QQmlApplicationEngine engine;\n\n    QThread l_newThread;\n\n    Worker* l_worker = new Worker();\n    handler * l_handler = new handler();\n\n    l_worker-&gt;moveToThread(&amp;l_newThread);\n\n    QObject::connect(&amp;l_newThread, &amp;QThread::started, l_worker, &amp;Worker::Init);\n\n    QObject::connect(l_handler,&amp;handler::toStop_Signal,&amp;l_newThread, &amp;QThread::quit);\n    QObject::connect(l_worker, &amp;Worker::toStop_Signal_Worker, l_handler,&amp;handler::toStop_Slot);\n    QObject::connect(&amp;app,&amp;QCoreApplication::aboutToQuit, l_worker, &amp;Worker::stop);\n   // QObject::connect(&amp;app,&amp;QCoreApplication::aboutToQuit, &amp;l_newThread, &amp;QThread::quit);\n\n    l_newThread.start();\n   // l_worker-&gt;Init();\n\n    engine.load(QUrl(QStringLiteral(\"qrc:/main.qml\")));\n\n    if (engine.rootObjects().isEmpty())\n        return -1;\n\n    int result = app.exec();\n\n    l_newThread.wait();\n\n    return result;\n}\n</code></pre>\n\n<p>worker.cpp</p>\n\n<pre><code>#include \"worker.h\"\n\nWorker::Worker(QObject *parent) : QObject(parent)\n{\n\n}\n\nvoid Worker:: Init()\n{\n    m_simulation = true;\n    simulate();\n}\n\nvoid Worker::simulate()\n{\n    QtConcurrent::run([this]{\n        QRandomGenerator generator;\n\n        while (m_simulation) {\n\n\n            qint32 t = generator.bounded(0,100);\n            qDebug() &lt;&lt; t;\n\n\n            qDebug() &lt;&lt; \"sleeping for 1 second\";\n            QThread::sleep(1);\n        }\n\n        if (!m_simulation) {\n            qDebug() &lt;&lt; \"Killing the concurrent thread\";\n            //  QThread::currentThread()-&gt;exit();\n            emit toStop_Signal_Worker();\n        }\n    });\n\n}\n\nvoid Worker::stop()\n{\n    m_simulation = false;\n}\n</code></pre>\n\n<p>handler.cpp</p>\n\n<pre><code>#include \"handler.h\"\n\nhandler::handler(QObject *parent) : QObject(parent)\n{\n\n}\n\nvoid handler::toStop_Slot()\n{\n    emit toStop_Signal();\n}\n</code></pre>\n\n<p>results</p>\n\n<blockquote>\n<pre><code>QML debugging is enabled. Only use this in a safe environment.\n19\nsleeping for 1 second\n55\nsleeping for 1 second\n70\nsleeping for 1 second\n69\nsleeping for 1 second\nKilling the concurrent thread\n</code></pre>\n</blockquote>\n"}, {"tags": ["c++", "sockets", "network-programming"], "comments": [{"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1574869984, "post_id": 59073750, "comment_id": 104385521, "body": "Are you sure that you want to ask about C++ rather than C? Because the looks more like C than C++."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1574870257, "post_id": 59073750, "comment_id": 104385657, "body": "<code>getaddrinfo</code> already gives you the IP address. It&#39;s not clear what you expect to accomplish by apparently converting it into a <code>char</code> string, then immediately back to the same exact IP address, via <code>inet_pton</code>. This is like printing out an E-mail, scanning it, on a wood table, and forwarding the attachment."}, {"owner": {"reputation": 411, "user_id": 11225028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a362b5c8966644c015c1db766488541f?s=128&d=identicon&r=PG&f=1", "display_name": "Luk", "link": "https://stackoverflow.com/users/11225028/luk"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1574871824, "post_id": 59073750, "comment_id": 104386523, "body": "@SamVarshavchik: I came across code that makes use of inet_pton: <code>if (inet_pton(AF_INET, split[9].c_str(), buf)) {</code> . So, the <code>split[9].c_str()</code> is some string read from a file. And this string - in the way the code is right now - needs to be an IP in dotted decimal form. But i want this string to be &quot;myPC&quot;. When it is &quot;myPC&quot; and I run the code given in my question, would this work - in theory?"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1574871988, "post_id": 59073750, "comment_id": 104386609, "body": "You missed my point. You don&#39;t need &quot;myPC&quot;, you already have myPC&#39;s IP address from <code>getaddrinfo()</code>."}, {"owner": {"reputation": 411, "user_id": 11225028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a362b5c8966644c015c1db766488541f?s=128&d=identicon&r=PG&f=1", "display_name": "Luk", "link": "https://stackoverflow.com/users/11225028/luk"}, "edited": false, "score": 0, "creation_date": 1574872648, "post_id": 59073750, "comment_id": 104386947, "body": "oh, I see. Thx for pointing that out!"}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 0, "last_activity_date": 1574874166, "last_edit_date": 1574874166, "creation_date": 1574873701, "answer_id": 59075046, "question_id": 59073750, "link": "https://stackoverflow.com/questions/59073750/how-to-replace-inet-pton-with-getaddrinfo/59075046#59075046", "title": "How to replace inet_pton with getaddrinfo", "body": "<blockquote>\n<pre><code>char host[256];\n...\nreturn host; \n</code></pre>\n</blockquote>\n\n<p>You return pointer to an automatic array. The array is destroyed automatically at the end of the scope and therefore you return a dangling pointer. The behaviour of indirecting through a dangling pointer is undefined.</p>\n\n<p>Furthermore, by failing to call <code>freeaddrinfo</code>, you leak memory.</p>\n\n<p><code>getaddrinfo</code> returns a list of <code>sockaddr</code>, which already contain the IP in byte form. Example of how to get it out:</p>\n\n<pre><code>for (; infoptr; infoptr = infoptr-&gt;ai_next) {\n    if (infoptr-&gt;ai_family == AF_INET) {\n        assert(infoptr-&gt;ai_addrlen == sizeof(sockaddr_in));\n        sockaddr_in addr;\n        std::memcpy(&amp;addr, infoptr-&gt;ai_addr, sizeof addr);\n        std::memcpy(buf, addr.sin_addr, sizeof addr.sin_addr);\n        break;\n    }\n}\n</code></pre>\n\n<p>If you're very clever, there might in theory be a way to use offsetof to get rid of the intermediary memcpy to local <code>sockaddr_in</code>.</p>\n"}], "owner": {"reputation": 411, "user_id": 11225028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a362b5c8966644c015c1db766488541f?s=128&d=identicon&r=PG&f=1", "display_name": "Luk", "link": "https://stackoverflow.com/users/11225028/luk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 382, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1574874166, "creation_date": 1574869250, "question_id": 59073750, "link": "https://stackoverflow.com/questions/59073750/how-to-replace-inet-pton-with-getaddrinfo", "title": "How to replace inet_pton with getaddrinfo", "body": "<p>Consider the inet_pton function:</p>\n\n<pre><code>#include &lt;arpa/inet.h&gt;\nint inet_pton(int af, const char *src, void *dst)\n</code></pre>\n\n<p>As far as I understand, this function takes an IP-address string in dotted decimal form as input (src) and converts this string to byte form, which is required by some network programming tasks. In fact, src gets converted to a struct in_addr which is copied to dst (provided af = AF_INET). And within this struct, there should be an entry of the IP address in byte form (pls correct me if I am wrong!). </p>\n\n<p>I want to be able to use inet_pton but instead of giving src in dotted decimal form, I want to give a name that can be resolved by my DNS server. </p>\n\n<p>Example: \nInstead of <code>inet_pton(AF_INET, \"10.70.1.114\", buf)</code> I want to use <code>inet_pton(AF_INET, \"myPC\", buf)</code></p>\n\n<p>I was thinking, maybe I can use <code>getaddrinfo</code> and <code>getnameinfo</code> before to resolve my name. I was thinking of a function like this:</p>\n\n<pre><code>char* resolvename(const char* name)\n{\n    struct addrinfo *infoptr, hints;\n    char host[256];\n\n    hints.ai_family=AF_INET;\n    int result = getaddrinfo(name,NULL,&amp;hints,&amp;infoptr);\n    if(result){\n        fprintf(stderr, \"getaddrinfo: %s\\n\", gai_stderror(result));\n        exit(1);\n        }\n    getnameinfo(infoptr-&gt;ai_addr, infoptr-&gt;ai_addrlen, host, sizeof(host), NULL, 0, NI_NUMERICHOST);\n\n    return host; \n\n}\n</code></pre>\n\n<p>I should then be able to do sth like this:</p>\n\n<pre><code>mySrc = resolvename(\"myPC\");\ninet_pton(AF_INET, mySrc, buf);\n</code></pre>\n\n<p>Does this make any sense at all? Just saying: I have no experience in network programming whatsoever. All of these functions are very new to me, so pls enlighten me! </p>\n"}, {"tags": ["c++", "code-coverage", "ninja", "meson-build", "catch2"], "comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1574869401, "post_id": 59073589, "comment_id": 104385174, "body": "install Gcovr then add <code>-Db_coverage=true</code> to your meson command line. Is there something specific you dont understand?"}, {"owner": {"reputation": 2389, "user_id": 6404771, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rNDY5dVXj_Q/AAAAAAAAAAI/AAAAAAAAAEk/DPyxQ2krQn4/photo.jpg?sz=128", "display_name": "Antonio La Marra", "link": "https://stackoverflow.com/users/6404771/antonio-la-marra"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1574935498, "post_id": 59073589, "comment_id": 104408033, "body": "I&#39;ve installed Gcovr, and run meson build --reconfigure -Db_coverage=true, then in the build folder I run the meson test command, but no coverage file has been generated"}], "answers": [{"tags": [], "owner": {"reputation": 9057, "user_id": 356838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90065346901c2d8730bedf54a2d248df?s=128&d=identicon&r=PG", "display_name": "pmod", "link": "https://stackoverflow.com/users/356838/pmod"}, "is_accepted": true, "score": 1, "last_activity_date": 1575070366, "last_edit_date": 1575070366, "creation_date": 1575069985, "answer_id": 59111938, "question_id": 59073589, "link": "https://stackoverflow.com/questions/59073589/how-to-perform-code-coverage-in-c-using-meson/59111938#59111938", "title": "How to perform code coverage in C++ using meson?", "body": "<p>You should use one of coverage related targets: <strong>coverage-text</strong>, <strong>coverage-html</strong>, <strong>coverage-xml</strong> as described <a href=\"https://mesonbuild.com/howtox.html#producing-a-coverage-report\" rel=\"nofollow noreferrer\">here</a>. Or just <strong>coverage</strong> that tries all of these if possible:</p>\n\n<pre><code>$ ninja coverage -C builddir\n</code></pre>\n\n<p>Results are written to <em>./builddir/meson-logs</em> directory.</p>\n\n<p>Note that to produce html coverage reports you need <strong>lcov</strong> and <strong>genhtml</strong> binaries which are installed by <strong>lcov</strong> package.</p>\n"}], "owner": {"reputation": 2389, "user_id": 6404771, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rNDY5dVXj_Q/AAAAAAAAAAI/AAAAAAAAAEk/DPyxQ2krQn4/photo.jpg?sz=128", "display_name": "Antonio La Marra", "link": "https://stackoverflow.com/users/6404771/antonio-la-marra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 784, "favorite_count": 0, "accepted_answer_id": 59111938, "answer_count": 1, "score": 2, "last_activity_date": 1575070366, "creation_date": 1574868665, "question_id": 59073589, "link": "https://stackoverflow.com/questions/59073589/how-to-perform-code-coverage-in-c-using-meson", "title": "How to perform code coverage in C++ using meson?", "body": "<p>I'm using meson and ninja as build system in my C++ project and I've configured catch2 as testing framework. \nI was wondering how to perform code coverage with the tests that I've written. \nI read this page, <a href=\"https://mesonbuild.com/Unit-tests.html\" rel=\"nofollow noreferrer\">https://mesonbuild.com/Unit-tests.html</a> but seems pretty unclear to me, can anybody help?</p>\n"}, {"tags": ["c++", "visual-studio", "dll", "linker"], "comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1574869731, "post_id": 59073422, "comment_id": 104385361, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/58605032/linking-a-library-fails-with-link1181-on-vs17\">Linking a library fails with LINK1181 on VS17</a>"}, {"owner": {"reputation": 523, "user_id": 5980792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35a65cfc6348cf92108fb7e492803481?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias Br&#246;samle", "link": "https://stackoverflow.com/users/5980792/tobias-br%c3%b6samle"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1574870796, "post_id": 59073422, "comment_id": 104385974, "body": "@Alan: I tried defining STREAMINGLIB_EXPORTS, but it didn&#39;t work. Also, I do not have linker error 1181. The accepted answer suggests building the streaming lib fox x64, but honestly, I don&#39;t exactly know how I should do that missing the .cpp files."}, {"owner": {"reputation": 523, "user_id": 5980792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35a65cfc6348cf92108fb7e492803481?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias Br&#246;samle", "link": "https://stackoverflow.com/users/5980792/tobias-br%c3%b6samle"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1574871185, "post_id": 59073422, "comment_id": 104386193, "body": "I honestly do not think it&#39;s a duplicate of the linked question. There, the .lib file could not be found, which doesn&#39;t seem to be a problem here. In my case, only static methods are problematic while linking."}, {"owner": {"reputation": 1233, "user_id": 11872808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29d7b759b09573f7750c178d99015eca?s=128&d=identicon&r=PG&f=1", "display_name": "Jeaninez - MSFT", "link": "https://stackoverflow.com/users/11872808/jeaninez-msft"}, "edited": false, "score": 0, "creation_date": 1574907488, "post_id": 59073422, "comment_id": 104398493, "body": "As far as I&#39;m concerned you may not define static members of the class. A static class member must have a unique definition, or it will violate the one-definition rule. A static class member that can&#39;t be defined inline must be defined in one source file by using its fully qualified name. If it isn&#39;t defined at all, the linker generates LNK2019. And you might also define the symbol as static and then reference it outside the file.For more details I suggest you could refer to the link:<a href=\"https://docs.microsoft.com/en-us/cpp/error-messages/tool-errors/linker-tools-error-lnk2019?view=vs-2019\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/cpp/error-messages/tool-errors&zwnj;&#8203;/&hellip;</a>"}, {"owner": {"reputation": 523, "user_id": 5980792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35a65cfc6348cf92108fb7e492803481?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias Br&#246;samle", "link": "https://stackoverflow.com/users/5980792/tobias-br%c3%b6samle"}, "edited": false, "score": 0, "creation_date": 1574925988, "post_id": 59073422, "comment_id": 104403315, "body": "@MSFT: But it should be compiled in the lib, right? I mean, ADTF itself also uses the same library, i.e. it should work in principal."}, {"owner": {"reputation": 1233, "user_id": 11872808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29d7b759b09573f7750c178d99015eca?s=128&d=identicon&r=PG&f=1", "display_name": "Jeaninez - MSFT", "link": "https://stackoverflow.com/users/11872808/jeaninez-msft"}, "edited": false, "score": 0, "creation_date": 1575339762, "post_id": 59073422, "comment_id": 104524143, "body": "I suggest you could try to add the code: <code>#pragma comment(lib, &quot;adtfstreamingD_280.lib&quot;);</code>"}, {"owner": {"reputation": 523, "user_id": 5980792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35a65cfc6348cf92108fb7e492803481?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias Br&#246;samle", "link": "https://stackoverflow.com/users/5980792/tobias-br%c3%b6samle"}, "reply_to_user": {"reputation": 1233, "user_id": 11872808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29d7b759b09573f7750c178d99015eca?s=128&d=identicon&r=PG&f=1", "display_name": "Jeaninez - MSFT", "link": "https://stackoverflow.com/users/11872808/jeaninez-msft"}, "edited": false, "score": 0, "creation_date": 1575901767, "post_id": 59073422, "comment_id": 104711594, "body": "@Jeaninez-MSFT: this is already done by the included header file."}], "answers": [{"tags": [], "owner": {"reputation": 523, "user_id": 5980792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35a65cfc6348cf92108fb7e492803481?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias Br&#246;samle", "link": "https://stackoverflow.com/users/5980792/tobias-br%c3%b6samle"}, "is_accepted": true, "score": 0, "last_activity_date": 1575901711, "creation_date": 1575901711, "answer_id": 59250959, "question_id": 59073422, "link": "https://stackoverflow.com/questions/59073422/how-to-solve-linker-error-in-c-when-only-static-methods-are-affected/59250959#59250959", "title": "How to solve linker error in C++ when only static methods are affected?", "body": "<p>Despite all the comments to my question and the linked answers, I was not able to make it work using just Visual Studio. </p>\n\n<p>However, after setting up a CMake project, it worked out of the box. So I guess the easiest way to make the ADTF streaming library work is creating a CMake project. </p>\n\n<p>As the streaming library is located in external/adtf-streaminglib, the following two lines of code are all that's necessary in CMake:</p>\n\n<pre><code>find_package(ADTF_STREAMING 2.8.0 PATHS ${CMAKE_CURRENT_SOURCE_DIR}/external/adtf-streaminglib REQUIRED)\ntarget_link_libraries(TARGET ${ADTF_STREAMING_LIB})\n</code></pre>\n\n<p>The variable <code>${ADTF_STREAMING_LIB}</code> is defined by the found package. I have no idea why I couldn't link the library correctly with Visual Studio, I can only guess that using CMake, some more parameters are set that I could not find in Visual Studio or that are not available there.</p>\n"}], "owner": {"reputation": 523, "user_id": 5980792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35a65cfc6348cf92108fb7e492803481?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias Br&#246;samle", "link": "https://stackoverflow.com/users/5980792/tobias-br%c3%b6samle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 59250959, "answer_count": 1, "score": 0, "last_activity_date": 1575901711, "creation_date": 1574868188, "last_edit_date": 1574870944, "question_id": 59073422, "link": "https://stackoverflow.com/questions/59073422/how-to-solve-linker-error-in-c-when-only-static-methods-are-affected", "title": "How to solve linker error in C++ when only static methods are affected?", "body": "<p>I'm using an external library that I do not have control over, more precisely ADTF streaming library.\nI linked to this library in Visual Studio 2019 (using VS 2010 Platform Toolset). To do so, I added the include directory to </p>\n\n<pre><code>ProjectName -&gt; Properties -&gt; C/C++ -&gt; General, \n</code></pre>\n\n<p>the path to the folder containing the lib to </p>\n\n<pre><code>ProjectName -&gt; Properties -&gt; Linker -&gt; General \n</code></pre>\n\n<p>and the name of the lib (adtfstreamingD_280.lib) to </p>\n\n<pre><code>ProjectName -&gt; Properties -&gt; Linker -&gt; Input.\n</code></pre>\n\n<p>No I get a linker error but only for static class methods, there is no linker error for non-static methods. Does anyone know how to resolve such a problem? Any help would be very appreciated.</p>\n\n<p>My Code:</p>\n\n<p>header file:</p>\n\n<pre><code>#ifndef _DAT_HANDLER_H_\n#define _DAT_HANDLER_H_\n\n#include &lt;string&gt;\n#include &lt;stdint.h&gt;\n\n#include \"adtf_streaming.h\"\n\nclass DatHandler\n{\npublic:\n    DatHandler();\n    ~DatHandler();\n    void Load(std::string datFilePath);\n    int32_t GetNumOfStreams();\n\nprotected:\n\nprivate:\n    // Resources are handled by ADTF\n    adtfstreaming::IADTFFileReader* m_fileReader;   \n\n};\n#endif // _DAT_HANDLER_H_\n</code></pre>\n\n<p>cpp file:</p>\n\n<pre><code>#include \"DatHandler.h\"\n\nDatHandler::DatHandler() : m_fileReader(nullptr)\n{\n    // do nothing\n}\n\nDatHandler::~DatHandler()\n{\n    if (nullptr != m_fileReader)\n    {\n        m_fileReader-&gt;Close();\n        adtfstreaming::IADTFFileReader::Release(m_fileReader);\n    }\n}\n\nint32_t DatHandler::GetNumOfStreams()\n{\n    int32_t streamCount;\n    tResult res = m_fileReader-&gt;GetStreamCount(streamCount);\n    if (IS_FAILED(res))\n    {\n        return -1;\n    }\n    return streamCount;\n}\n\nvoid DatHandler::Load(std::string path)\n{\n    if (nullptr == m_fileReader)\n    {\n        m_fileReader = adtfstreaming::IADTFFileReader::Create();\n    }\n    else\n    {\n        m_fileReader-&gt;Close();\n    }\n    m_fileReader-&gt;Open(path.c_str());\n}\n</code></pre>\n\n<p>The errors (in German, don't know how to get Error output in English):</p>\n\n<pre><code>Error   LNK2019 Verweis auf nicht aufgel\u00f6stes externes Symbol \"\"__declspec(dllimport) public: static long __cdecl adtfstreaming::IADTFFileReader::Release(class adtfstreaming::IADTFFileReader *)\" (__imp_?Release@IADTFFileReader@adtfstreaming@@SAJPAV12@@Z)\" in Funktion \"\"public: __thiscall DatHandler::~DatHandler(void)\" (??1DatHandler@@QAE@XZ)\".\n\nError   LNK2019 Verweis auf nicht aufgel\u00f6stes externes Symbol \"\"__declspec(dllimport) public: static class adtfstreaming::IADTFFileReader * __cdecl adtfstreaming::IADTFFileReader::Create(void)\" (__imp_?Create@IADTFFileReader@adtfstreaming@@SAPAV12@XZ)\" in Funktion \"\"public: void __thiscall DatHandler::Load(class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;)\" (?Load@DatHandler@@QAEXV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z)\".\n\nError   LNK1120 2 nicht aufgel\u00f6ste externe Verweise.    \n</code></pre>\n\n<p><strong>Edit:</strong> Maybe I also should have mentioned that I only have ADTF streaming library 2.8.0 available.</p>\n"}, {"tags": ["c++", "windows", "winapi"], "answers": [{"comments": [{"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 2, "creation_date": 1574868100, "post_id": 59073368, "comment_id": 104384503, "body": "<code>filesystem</code> library is not an experimental - it&#39;s a part of C++17: <a href=\"https://en.cppreference.com/w/cpp/experimental/fs\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/experimental/fs</a> ."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1574868368, "post_id": 59073368, "comment_id": 104384660, "body": "Doesn&#39;t matter, has the same &quot;problem&quot;."}, {"owner": {"reputation": 144, "user_id": 2982586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56dea6792e3195dcbaff4e46505f4dae?s=128&d=identicon&r=PG&f=1", "display_name": "Math Lover", "link": "https://stackoverflow.com/users/2982586/math-lover"}, "edited": false, "score": 0, "creation_date": 1574868471, "post_id": 59073368, "comment_id": 104384718, "body": "Ok you can use like std::filesystem::remove"}, {"owner": {"reputation": 4513, "user_id": 1810087, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/T2x51.jpg?s=128&g=1", "display_name": "user1810087", "link": "https://stackoverflow.com/users/1810087/user1810087"}, "edited": false, "score": 1, "creation_date": 1574868699, "post_id": 59073368, "comment_id": 104384841, "body": "@Val_MagicStar <code>remove_all</code> ;)   And you should edit your answer..."}, {"owner": {"reputation": 144, "user_id": 2982586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56dea6792e3195dcbaff4e46505f4dae?s=128&d=identicon&r=PG&f=1", "display_name": "Math Lover", "link": "https://stackoverflow.com/users/2982586/math-lover"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1574872006, "post_id": 59073368, "comment_id": 104386615, "body": "@Lightness Races with Monica I agree with you, but since you and others already did an exhaustive comment, I didn&#39;t want to repeat the same things, and i just corrected what I wrote before."}], "tags": [], "owner": {"reputation": 144, "user_id": 2982586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56dea6792e3195dcbaff4e46505f4dae?s=128&d=identicon&r=PG&f=1", "display_name": "Math Lover", "link": "https://stackoverflow.com/users/2982586/math-lover"}, "is_accepted": false, "score": 0, "last_activity_date": 1574868807, "last_edit_date": 1574868807, "creation_date": 1574868023, "answer_id": 59073368, "question_id": 59073292, "link": "https://stackoverflow.com/questions/59073292/c-how-do-i-delete-files-with-rmdir/59073368#59073368", "title": "C++ How do I delete files with _rmdir?", "body": "<p>You can use:</p>\n\n<pre><code>std::filesystem::remove_all(\"path/myDirectory\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 1, "last_activity_date": 1574868265, "creation_date": 1574868265, "answer_id": 59073446, "question_id": 59073292, "link": "https://stackoverflow.com/questions/59073292/c-how-do-i-delete-files-with-rmdir/59073446#59073446", "title": "C++ How do I delete files with _rmdir?", "body": "<blockquote>\n  <p>Do I still need to list all of the files in a directory in order to delete it with _rmdir?</p>\n</blockquote>\n\n<p>Why don't you simply read <a href=\"https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/rmdir-wrmdir?view=vs-2019\" rel=\"nofollow noreferrer\">the documentation</a>?</p>\n\n<p>It says:</p>\n\n<blockquote>\n  <p>The _rmdir function deletes the directory specified by dirname. <strong>The directory must be empty</strong>, and it must not be the current working directory or the root directory.</p>\n</blockquote>\n\n<p>That's pretty much the case for any \"remove directory\" functionality. It's what your Windows Explorer UI is doing behind the scenes when you hit delete on your keyboard.</p>\n\n<p>This is also the case for <a href=\"https://en.cppreference.com/w/cpp/filesystem/remove\" rel=\"nofollow noreferrer\"><code>std::filesystem::remove</code></a>, but <code>std::filesystem::remove_all</code> will do all that recursion for you.</p>\n"}, {"comments": [{"owner": {"reputation": 91, "user_id": 12429008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/geJUM.png?s=128&g=1", "display_name": "Frappy", "link": "https://stackoverflow.com/users/12429008/frappy"}, "edited": false, "score": 0, "creation_date": 1574868856, "post_id": 59073458, "comment_id": 104384903, "body": "I don&#39;t have filesystem. I think it&#39;s only for C++14 or 17"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 91, "user_id": 12429008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/geJUM.png?s=128&g=1", "display_name": "Frappy", "link": "https://stackoverflow.com/users/12429008/frappy"}, "edited": false, "score": 0, "creation_date": 1574869067, "post_id": 59073458, "comment_id": 104385010, "body": "@Frappy Yes, it&#39;s for C++17. Which C++ version are you using? If you are using Visual Studio 2019 (and I think even in Visual Studio 2017), you can switch to C++17 to enable <code>std::filesystem</code>."}, {"owner": {"reputation": 91, "user_id": 12429008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/geJUM.png?s=128&g=1", "display_name": "Frappy", "link": "https://stackoverflow.com/users/12429008/frappy"}, "edited": false, "score": 1, "creation_date": 1574869226, "post_id": 59073458, "comment_id": 104385084, "body": "Yes, I just switched to the latest available version of C++ and it works! Thanks!"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 1, "creation_date": 1574870754, "post_id": 59073458, "comment_id": 104385955, "body": "It would be worth testing what VC++ considers to be a symlink in Windows. Is it only an actual symbolic link that&#39;s created via <code>CreateSymbolicLinkW</code> -- i.e. strict POSIX compliance -- or does it also skip traversing directory mount points (i.e. junctions), which a Unix implementation would typically traverse? System shells in Windows (e.g. CMD, Explorer) do not traverse directory mount points (or any name-surrogate reparse point) when recursively deleting a tree. I would guess that VC++ <code>remove_all</code> behaves the same as a system shell."}], "tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": true, "score": 4, "last_activity_date": 1574899211, "last_edit_date": 1574899211, "creation_date": 1574868283, "answer_id": 59073458, "question_id": 59073292, "link": "https://stackoverflow.com/questions/59073292/c-how-do-i-delete-files-with-rmdir/59073458#59073458", "title": "C++ How do I delete files with _rmdir?", "body": "<p>You probably want the C++17 function <a href=\"https://en.cppreference.com/w/cpp/filesystem/remove\" rel=\"nofollow noreferrer\">std::filesystem::remove_all</a> which deletes the contents of the directory and the contents of all its subdirectories, recursively, then deletes the directory itself as if by repeatedly applying the POSIX remove. Symlinks are not followed (symlink is removed, not its target).</p>\n\n<hr>\n\n<p><strong>Edit:</strong> As Eryk Sun pointed out in the comments, it's good to test that the recursive removal does not follow Windows junctions, which would lead to unwanted removal of everything the junction points at.</p>\n\n<p>I made a test that used <code>std::filesystem::create_directory_symlink</code> to create a symlink and then use the WinAPI to check if that symlink became a junction, which it reportedly did - a junction has the <code>FILE_ATTRIBUTE_REPARSE_POINT</code> attribute and the reparse point tag <code>IO_REPARSE_TAG_MOUNT_POINT</code>. Interestingly it also had the <code>IO_REPARSE_TAG_SYMLINK</code> tag. When using normal <code>DOS</code> commands I noticed that the link was indeed reported as a plain <code>&lt;SYMLINKD&gt;</code> and not a <code>&lt;JUNCTION&gt;</code>. </p>\n\n<p>I then used <code>MKLINK /J</code> to create a junction. That junction was indeed reported as a <code>&lt;JUNCTION&gt;</code> by <code>DOS</code> and running <code>std::filesystem::remove_all()</code> on it removed it, but not what it pointed at.</p>\n\n<p>I also downloaded the sysinternals <a href=\"https://docs.microsoft.com/en-us/sysinternals/downloads/junction\" rel=\"nofollow noreferrer\">Junction</a> utility and used that to create a junction.</p>\n\n<p>That junction was also reported as a <code>&lt;JUNCTION&gt;</code> by <code>DOS</code>, but running <code>std::filesystem::remove_all()</code> on it had another effect. It did <strong>not</strong> remove it (or what it pointed at).</p>\n\n<p>So <code>remove_all()</code> should be safe with regards to junctions - but perhaps even <em>too</em> safe. I didn't try to find out what the difference was between the <code>MKLINK</code> junction and the junction created by the sysinternals utility.</p>\n"}], "owner": {"reputation": 91, "user_id": 12429008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/geJUM.png?s=128&g=1", "display_name": "Frappy", "link": "https://stackoverflow.com/users/12429008/frappy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 375, "favorite_count": 0, "accepted_answer_id": 59073458, "answer_count": 3, "score": 1, "last_activity_date": 1574899211, "creation_date": 1574867742, "question_id": 59073292, "link": "https://stackoverflow.com/questions/59073292/c-how-do-i-delete-files-with-rmdir", "title": "C++ How do I delete files with _rmdir?", "body": "<p>I made a simple program that deletes files, however, I don't know how to delete a directory. I saw a few posts saying I need to list all of the files in that directory, delete those files, and then delete the directory/folder itself. However, somebody suggested using _rmdir which as far as I understand, deletes a directory without any problems, however, it doesn't. Do I still need to list all of the files in a directory in order to delete it with _rmdir? Thanks!</p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;Windows.h&gt;\n#include &lt;direct.h&gt;\nusing namespace std;\n\nHANDLE h = GetStdHandle(STD_OUTPUT_HANDLE);\n\ninline bool fileExists(const string&amp; filepath) {\n    struct stat buffer;\n    return (stat(filepath.c_str(), &amp;buffer) == 0);\n}\n\nint main()\n{\n    string filePath;\n    string fileAttribute;\n\n    cout &lt;&lt; \"[~] Enter a path to delete: \";\n    getline(cin, filePath);\n    cout &lt;&lt; \"\\n[#] Checking if path exists..\";\n    if (fileExists(filePath) == 1)\n    {\n        if (GetFileAttributes(filePath.c_str()) == FILE_ATTRIBUTE_DIRECTORY)\n        {\n            cout &lt;&lt; \"\\n[!] Directory found!\";\n            _rmdir(filePath.c_str());\n            cout &lt;&lt; \"\\n[#] Deleting directory..\";\n        }\n        else\n        {\n            cout &lt;&lt; \"\\n[!] File found!\";\n            remove(filePath.c_str());\n            cout &lt;&lt; \"\\n[#] Deleting file..\";\n        }\n\n        if (fileExists(filePath) == 0) \n        {\n            SetConsoleTextAttribute(h, 10);\n            cout &lt;&lt; \"\\n[!] Deletetion successful!\";\n            SetConsoleTextAttribute(h, 15);\n        }\n        else\n        {\n            SetConsoleTextAttribute(h, 12);\n            cout &lt;&lt; \"\\n[!] Deletion unsuccessful!\";\n            SetConsoleTextAttribute(h, 15);\n        }\n    }\n}   \n</code></pre>\n"}, {"tags": ["c++", "performance"], "comments": [{"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1574869454, "post_id": 59073290, "comment_id": 104385199, "body": "<code>perf</code> can also annotate the assembly or source per instruction/line with the counter. What in particular is the problem with it?"}, {"owner": {"reputation": 136, "user_id": 3368517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf42aa934e01e92ea3b465c5f1f95b7?s=128&d=identicon&r=PG&f=1", "display_name": "FloriUni", "link": "https://stackoverflow.com/users/3368517/floriuni"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1574869543, "post_id": 59073290, "comment_id": 104385239, "body": "Okay. Then I missed this opportunity. I&#39;ll give it a try. Perfing the whole application will produce too much &quot;noise&quot; ... I&#39;m only interested in the performance of a single part of my code"}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1574869579, "post_id": 59073290, "comment_id": 104385259, "body": "Try <code>man perf-record</code> and <code>man perf-annotate</code>."}], "owner": {"reputation": 136, "user_id": 3368517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf42aa934e01e92ea3b465c5f1f95b7?s=128&d=identicon&r=PG&f=1", "display_name": "FloriUni", "link": "https://stackoverflow.com/users/3368517/floriuni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1574867730, "creation_date": 1574867730, "question_id": 59073290, "link": "https://stackoverflow.com/questions/59073290/read-fp-arith-inst-retired-scalar-single", "title": "Read fp_arith_inst_retired.scalar_single", "body": "<p>I've got a quite complex C++ program and would like to read the fp_arith_inst_retired.scalar_single PMU of my processor before/after a code block so I can calculate different flop values for this region.</p>\n\n<p>Is there beside using perf a suitable way doing this? Perf measures the complete executable and that's quite a lot ... </p>\n"}, {"tags": ["c++", "c", "assembly", "flags"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1574867028, "post_id": 59073016, "comment_id": 104383916, "body": "Unrelated to your question, but instead of <code>if (condition) return true; else return false</code>; you could just have <code>return condition;</code>"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1574870054, "post_id": 59073016, "comment_id": 104385550, "body": "Did you look at the assembly code?"}], "answers": [{"tags": [], "owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 10, "last_activity_date": 1574896694, "last_edit_date": 1574896694, "creation_date": 1574867350, "answer_id": 59073166, "question_id": 59073016, "link": "https://stackoverflow.com/questions/59073016/why-assembly-function-called-from-c-give-different-result-in-flags-if-addition/59073166#59073166", "title": "Why assembly function called from C++ give different result in flags if addition made with two variables or one variable and one numeric literal?", "body": "<p>Any expectation about how the compiler chooses to implement the C <code>+</code> operator in terms of asm is unfounded.  Some tuning options could make it prefer <code>lea</code> instead of <code>add</code> which doesn't set flags.  (For GCC this is in fact the case with <code>-mtune=atom</code>).</p>\n\n<p>With optimization enabled, it might do it in a different order, not right before that non-inline function call.</p>\n\n<p><strong>Or for <code>+1</code> specifically, MSVC might have chosen <a href=\"https://www.felixcloutier.com/x86/inc\" rel=\"nofollow noreferrer\"><code>inc</code></a> which doesn't modify CF.</strong>  That looks like the case here, given that your FLAGS result differs only in the low bit.  (<a href=\"https://en.wikipedia.org/wiki/FLAGS_register\" rel=\"nofollow noreferrer\">CF is the lowest bit</a>).  For that bit, you're reading whatever value happened to be left in CF before the <code>inc</code>.  The other bits are written by <code>inc</code>.</p>\n\n<p>You can check the compiler-generated asm by single-stepping with a debugger, or put it on <a href=\"https://godbolt.org/\" rel=\"nofollow noreferrer\">https://godbolt.org/</a></p>\n\n<hr>\n\n<p>And there's also no reason to assume that that FLAGS are still set from the asm for <code>+</code> by the time execution reaches your function call.  Even inline asm can't reliably do this.  <strong>If you want to read FLAGS from <code>add</code>, the <code>add</code> needs to be in your asm, not compiler-generated.</strong></p>\n\n<p>The optimizer does <em>not</em> consider the FLAG results of previous C statements to be an input to function calls, or an observable side-effect at all (except for compiler-generated code that intentionally reads FLAGS results, e.g. <code>jnz</code> after an add to implement <code>if(foo)</code>)</p>\n"}], "owner": {"reputation": 15, "user_id": 4212129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jufEC.jpg?s=128&g=1", "display_name": "froli78", "link": "https://stackoverflow.com/users/4212129/froli78"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 59073166, "answer_count": 1, "score": 0, "last_activity_date": 1574896694, "creation_date": 1574866820, "last_edit_date": 1574867414, "question_id": 59073016, "link": "https://stackoverflow.com/questions/59073016/why-assembly-function-called-from-c-give-different-result-in-flags-if-addition", "title": "Why assembly function called from C++ give different result in flags if addition made with two variables or one variable and one numeric literal?", "body": "<p>Please help me if someone can!</p>\n\n<p>I've written a 3 row Assembly code to get back the value of RFLAGS:</p>\n\n<pre><code>PUBLIC x64rflags\n.code\n; Caller C++ function prototype: unsigned long long int x64rflags();\nx64rflags PROC     \n    pushfq          ; RFLAGS into stack\n    pop rax         ; RAX = RFLAGS\n    ret    \nx64rflags ENDP\nEnd\n</code></pre>\n\n<p>which I use in a C++ library to check flags from C++ programs:</p>\n\n<pre><code>//The RFLAGS query function. Result in unsigned long long int value.\nextern \"C\"\n{\n    unsigned long long int x64rflags();\n}\n\n//The FLAGS bits decimal values\nenum\n{\n    FLAGS_CF = 1, //Carry\n    FLAGS_PF = 4, //Parity\n    FLAGS_AF = 16, //Adjust (Auxiliary carry)\n    FLAGS_ZF = 64, //Zero\n    FLAGS_SF = 128, //Sign\n    FLAGS_TF = 256, //Trap\n    FLAGS_IF = 512, //Interrupt enable\n    FLAGS_DF = 1024, //Direction\n    FLAGS_OF = 2048, //Overflow\n    FLAGS_IOPL_LOW = 4096, //I/O privilege level low bit\n    FLAGS_IOPL_HIGH = 8192, //I/O privilege level high bit\n    FLAGS_NT = 16384, //Nested task\n    FLAGS_RF = 65536, //Resume\n    FLAGS_VM = 131072, //Virtual 8086 mode\n    FLAGS_AC = 262144, //Alignment Check\n    FLAGS_VIF = 524288, //Virtual interrupt\n    FLAGS_VIP = 1048576, //Virtual interrupt Pending\n    FLAGS_ID = 2097152, //CPUID available\n};\n\n//The compare function of RFLAGS and inpected values\nbool flagschk(unsigned long long int flags, unsigned long long int flagsToChk)\n{\n    if (flagsToChk == (flagsToChk &amp; flags))\n    {\n        return true;\n    }\n    else\n    {\n        return false;\n    }\n}\n</code></pre>\n\n<p>And here my C++ testprogram:</p>\n\n<pre><code>#define _UNICODE\n#define UNICODE\n\n#include &lt;iostream&gt;\n#include &lt;windows.h&gt;\n#include &lt;string&gt;\n#include &lt;x64rflags.h&gt;\n\nusing namespace std;\ntypedef unsigned long long int ulli;\n\nint main()\n{\n    SetConsoleOutputCP(1250); //ANSI Central European; Central European (Windows)\n\n    ulli ullia, ullib, ullir, actrflags;\n    std::string stro1, stro2;\n\n    ullia = 0xffffffffffffffff;\n    ullib = 1;\n    ullir = ullia + ullib; //CF\n    actrflags = x64rflags(); //CALL THE RFLAGS RETURNER ASM FUNCTION\n    printf(\"1 Result: %llu\\n\", ullir);\n    stro1 = \"1 The value of actrflags: \";\n    stro2 = std::to_string(unsigned long long int(actrflags));\n    stro1.append(stro2);\n    stro1.append(\"\\n\");\n    printf(stro1.c_str());\n\n\n    if(flagschk(actrflags, FLAGS_CF))\n    {\n        printf(\"1 condparam = TRUE\\n\\n\");\n    }\n    else\n    {\n        printf(\"1 condparam = FALSE\\n\\n\");\n    }\n//*/\n    ullia = 0xffffffffffffffff;\n    ullir = ullia + 1; //CF\n    actrflags = x64rflags(); //CALL THE RFLAGS RETURNER ASM FUNCTION\n    printf(\"2 Result: %llu\\n\", ullir);\n    stro1 = \"2 The value of actrflags: \";\n    stro2 = std::to_string(unsigned long long int(actrflags));\n    stro1.append(stro2);\n    stro1.append(\"\\n\");\n    printf(stro1.c_str());\n\n\n    if(flagschk(actrflags, FLAGS_CF))\n    {\n        printf(\"2 condparam = TRUE\\n\\n\");\n    }\n    else\n    {\n        printf(\"2 condparam = FALSE\\n\\n\");\n    }\n\n    return 0;\n}\n\n</code></pre>\n\n<p>My problem is that it gives me diffrent result on the two probe.\nThe first which use variables work as expected: Raise the Carry and Give back \"TRUE\"</p>\n\n<p>The second which use one variable and one numeric literal don't raise Carry.</p>\n\n<p><a href=\"https://i.stack.imgur.com/VDSRF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VDSRF.png\" alt=\"enter image description here\"></a></p>\n\n<p>Additional info:\nThe Assembly code compiled by ml64 with option /c\nThe C++ code written in Code::Blocks, compiled with MSVC 2019.\nThe program running on Intel x64Arch (core i7).\nThe programs (in theory) use the default (x64 ABI) calling conventions.\nIf I don't use the \"=\" in the adding expression before the rflags query that not work in both case. (I guess then the MSVC handling the addition as \"NOP\" and give back the last carry independently from the addition...)</p>\n\n<p>Someone can explain what couse this anomaly?</p>\n"}, {"tags": ["c++", "string", "recursion", "c-strings"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 6, "creation_date": 1574866747, "post_id": 59072943, "comment_id": 104383737, "body": "why are you still struggling when the code works as expected? What is the problem?"}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 2, "creation_date": 1574866770, "post_id": 59072943, "comment_id": 104383753, "body": "Are you just asking how to use <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow noreferrer\">std::getline()</a>?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1574866838, "post_id": 59072943, "comment_id": 104383801, "body": "is the problem that you get the &quot;wrong&quot; length for eg &quot;This is a sentence with several seperate words and cout will only read the first word, while you should use getline to read the full line&quot; ? If yes you should mention that in the question"}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1574866879, "post_id": 59072943, "comment_id": 104383832, "body": "You haven&#39;t declared what <code>sentence</code> is! Sorry - missed the <code>&#47;&#47;</code> bit in your code."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1574866927, "post_id": 59072943, "comment_id": 104383850, "body": "<code>cin &gt;&gt; sentence;</code> won&#39;t work. Specifically it reads up until the first whitespace.  The bug is not in the code that is shown. You probably want to use <code>std::getline()</code> as suggested in the comments above."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1574867238, "post_id": 59072943, "comment_id": 104384053, "body": "Why do you have as the title &quot;recursive version of strlen&quot;, but your issue has absolutely nothing to do with this?   The issue with misidentifying the problem is that persons will search for &quot;recursive version of strlen&quot;, and come across this thread that has to do with reading input."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1574867353, "post_id": 59072943, "comment_id": 104384108, "body": "Related: <a href=\"https://stackoverflow.com/questions/9469264/c-cin-only-reads-the-first-word\">https://stackoverflow.com/questions/9469264/c-cin-only-reads&zwnj;&#8203;-the-first-word</a>"}, {"owner": {"reputation": 7, "user_id": 12446497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6667688c602b0b4a858f1349964336a?s=128&d=identicon&r=PG&f=1", "display_name": "user12446497", "link": "https://stackoverflow.com/users/12446497/user12446497"}, "edited": false, "score": 0, "creation_date": 1574867736, "post_id": 59072943, "comment_id": 104384329, "body": "Please forgive my newbie post.  This is my first programming class and my first post for help.  so if I use  char sentence[500]; cin.getline(sentence, 500) // I get an Access violation writing location  I am not sure what to use as my variable and my user input."}, {"owner": {"reputation": 1000, "user_id": 2119377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/658d809fd5cca51330dd21dfa2474fd0?s=128&d=identicon&r=PG", "display_name": "Wolfgang Brehm", "link": "https://stackoverflow.com/users/2119377/wolfgang-brehm"}, "edited": false, "score": 0, "creation_date": 1574867833, "post_id": 59072943, "comment_id": 104384371, "body": "If you want to compare the first charactor of s with &#39;\\0&#39; then you need to dereference s first. I think you want <code>if (*s == &#39;\\0&#39;)</code>"}, {"owner": {"reputation": 1000, "user_id": 2119377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/658d809fd5cca51330dd21dfa2474fd0?s=128&d=identicon&r=PG", "display_name": "Wolfgang Brehm", "link": "https://stackoverflow.com/users/2119377/wolfgang-brehm"}, "edited": false, "score": 0, "creation_date": 1574868027, "post_id": 59072943, "comment_id": 104384468, "body": "try <code>string line; getline(cin,line); cout &lt;&lt; str_length(line.c_str()) &lt;&lt; endl;</code>"}, {"owner": {"reputation": 7, "user_id": 12446497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6667688c602b0b4a858f1349964336a?s=128&d=identicon&r=PG&f=1", "display_name": "user12446497", "link": "https://stackoverflow.com/users/12446497/user12446497"}, "edited": false, "score": 0, "creation_date": 1574868606, "post_id": 59072943, "comment_id": 104384781, "body": "if (*s == &#39;\\0&#39;) -- along with cin.getline(sentence, 500) -- seems to be operating properly.  But on the second cycle after choice it is skipping the cin.getline and going straight to cin &gt;&gt; choice.  I will see if I can figure out why that is happenin now.  Thanks for your help!"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1574868927, "post_id": 59072943, "comment_id": 104384942, "body": "Releated to the new problem: <a href=\"https://stackoverflow.com/questions/21567291/why-does-stdgetline-skip-input-after-a-formatted-extraction\">https://stackoverflow.com/questions/21567291/why-does-stdget&zwnj;&#8203;line-skip-input-afte&zwnj;&#8203;r-a-formatted-extrac&zwnj;&#8203;tion</a>"}, {"owner": {"reputation": 7, "user_id": 12446497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6667688c602b0b4a858f1349964336a?s=128&d=identicon&r=PG&f=1", "display_name": "user12446497", "link": "https://stackoverflow.com/users/12446497/user12446497"}, "edited": false, "score": 0, "creation_date": 1574869783, "post_id": 59072943, "comment_id": 104385391, "body": "I had this fixed yesterday with cin.ignore();  Thank you for the link though, it saved me a bit of time remembering after I read it."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 12446497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6667688c602b0b4a858f1349964336a?s=128&d=identicon&r=PG&f=1", "display_name": "user12446497", "link": "https://stackoverflow.com/users/12446497/user12446497"}, "edited": false, "score": 0, "creation_date": 1574872778, "post_id": 59073947, "comment_id": 104387020, "body": "Although this works and I tried it out in my code.  I&#39;m not sure if I can use this method.  It varies from the instructors comment of &quot;the function will looks like this: int str_length(char s[])&quot;  I like your way better as it will not limit the length of the string.  ."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 7, "user_id": 12446497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6667688c602b0b4a858f1349964336a?s=128&d=identicon&r=PG&f=1", "display_name": "user12446497", "link": "https://stackoverflow.com/users/12446497/user12446497"}, "edited": false, "score": 0, "creation_date": 1574874015, "post_id": 59073947, "comment_id": 104387685, "body": "@user12446497 If you need then you may redeclare the function like int str_length( char s[] ); though this declaration is not good because it  confuses readers. For example they can think that the function changes the ;passed string."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1574869899, "creation_date": 1574869899, "answer_id": 59073947, "question_id": 59072943, "link": "https://stackoverflow.com/questions/59072943/recursive-version-of-strlen-in-c-strings-c/59073947#59073947", "title": "Recursive version of strlen in c Strings c++", "body": "<p>There is already the standard C function <code>strlen</code> that has the following declaration</p>\n\n<pre><code>size_t strlen( const char *s );\n</code></pre>\n\n<p>So your recursive function should have the same declaration. It can be implemented the following way</p>\n\n<pre><code>size_t strlen( const char *s )\n{\n    return *s == '\\0' ? 0 : 1 + strlen( s + 1 );\n}\n</code></pre>\n\n<p>A program that tests the function can look like</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;limits&gt;\n\nsize_t strlen( const char *s )\n{\n    return *s == '\\0' ? 0 : 1 + strlen( s + 1 );\n}\n\nint main()\n{\n    char choice;\n\n    do\n    {\n        std::cout &lt;&lt; \"Enter a sentence: \";\n\n        std::string sentence;\n\n        std::getline( std::cin, sentence );\n\n        std::cout &lt;&lt; \"The length of the sentence is \"\n                  &lt;&lt; strlen( sentence.c_str() )\n                  &lt;&lt; '\\n';\n\n        std::cout &lt;&lt; \"Do you want to have another run (Y/N)? \";\n\n        std::cin &gt;&gt; choice;\n        std::cin.ignore( std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n' );\n    } while ( choice == 'y' || choice == 'Y' );        \n}\n</code></pre>\n\n<p>Its output might be</p>\n\n<pre><code>Enter a sentence: Hello user12446497\nThe length of the sentence is 18\nDo you want to have another run (Y/N)? n\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 12446497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6667688c602b0b4a858f1349964336a?s=128&d=identicon&r=PG&f=1", "display_name": "user12446497", "link": "https://stackoverflow.com/users/12446497/user12446497"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1574869899, "creation_date": 1574866594, "question_id": 59072943, "link": "https://stackoverflow.com/questions/59072943/recursive-version-of-strlen-in-c-strings-c", "title": "Recursive version of strlen in c Strings c++", "body": "<p>I am struggling with an assignment for my first c++ class.  I am hoping someone can help me in the right direction.  I need to write a \"recursive version of strlen in c strings.\"  According to my handout, my function should look like this, \"int str_length(char s[])\".  </p>\n\n<p>My main problem is trying to get the user to enter a string or cstring of an undetermined length and use it for the function call.  I would really appreciate all the help and direction I can get.  </p>\n\n<p>I have played around with my code so much now that I am rather lost.  It would seem I would fix one issue and create a new one.  I think I have my function written correctly but here is the code if there is a better/correct way of doing it.  </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstring&gt; //included both until I find my solution\n#include &lt;string&gt;\nusing namespace std;\n\n\n//string or char sentence;  This part of my struggle\nchar choice = 'Y';\nint str_length(char s[]);\n\n\nint main()\n{\n\n    while ((choice != 'n') &amp;&amp; (choice != 'N'))\n    {\n\n        cout &lt;&lt; \"Enter a sentence. \";\n        //user entry cin, getline etc\n        cout &lt;&lt; sentence;\n        //cout &lt;&lt; str_length(sentence);\n        cout &lt;&lt; endl;\n\n        cout &lt;&lt; \"Do you want to have another run? Y/N \";\n        cin &gt;&gt; choice; \n    }\n\n}\n\n\n\nint str_length(char s[])\n{\n    // if we reach at the end of the string \n    if (s == '\\0')\n    {\n        return 0;\n    }\n    else\n    {\n        return 1 + str_length(s + 1);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "directx-11", "shadow-mapping"], "owner": {"reputation": 13, "user_id": 7314174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M4v9F.jpg?s=128&g=1", "display_name": "Konomira", "link": "https://stackoverflow.com/users/7314174/konomira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1575215908, "creation_date": 1574866459, "last_edit_date": 1575215908, "question_id": 59072897, "link": "https://stackoverflow.com/questions/59072897/dx11-directional-light-shadow-map-depth-value-always-returns-1", "title": "DX11 - Directional light shadow map depth value always returns 1", "body": "<p>I'm working on a graphics program in DirectX11 which takes a heightmap, manipulates a plane based on the heightmap, calculates the normals, and lights the scene with a directional light.  I'm trying to get shadow mapping to work with the directional light, but whenever I do the depth test in the pixel shader it always returns 1, instead of the expected value.</p>\n\n<p>Here's my main pixel shader</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Texture2D t0 : register(t0);\nTexture2D t1 : register(t1);\n\nSamplerState s0 : register(s0);\nSamplerState s1 : register(s1);\n\ncbuffer LightBuffer : register(b0)\n{\n    float4 diffuseColour;\n    float3 lightDirection;\n    float padding;    \n}\n\nstruct InputType\n{\n    float4 position : SV_POSITION;\n    float4 tex: TEXCOORD0;\n    float3 normal : normal;\n    float4 lightViewPos : TEXCOORD1;\n};\n\nfloat4 calculateLighting(float3 lightDirection, float3 normal, float4 diffuse)\n{\n    float intensity = saturate(dot(normal, lightDirection));\n    float4 colour = saturate(diffuse * intensity);\n    return colour;\n}\n\nfloat4 main(InputType input) : SV_TARGET\n{\n    float depthValue;\n    float lightDepthValue;\n    float shadowMapBias = 0.005f;\n    float4 colour = float4(0.f, 0.f, 0.f, 1);\n    float4 textureColour = t0.Sample(s0, input.tex.xy);\n\n    float2 pTexCoord = input.lightViewPos.xy / input.lightViewPos.w;\n    pTexCoord *= float2(0.5, -0.5);\n    pTexCoord += float2(0.5, 0.5);\n\n    if (pTexCoord.x &lt; 0.0f || pTexCoord.x &gt; 1.0f ||\n        pTexCoord.y &lt; 0.0f || pTexCoord.y &gt; 1.0f)\n    {\n        return textureColour;\n    }\n\n    depthValue = t1.Sample(s1, pTexCoord).r;\n\n    lightDepthValue = input.lightViewPos.z / input.lightViewPos.w;\n    lightDepthValue -= shadowMapBias;\n\n    if (lightDepthValue &lt; depthValue)\n    {\n        //colour = float4(1, 1, 1, 1);\n        colour = calculateLighting(-lightDirection, input.normal, diffuseColour);\n    }\n\n    // This is a test to see what the depth value outputs as\n    if (depthValue == 0)\n        return float4(1, 0, 1, 1);\n    else if (depthValue == 1)\n        return float4(1, 1, 1, 1); // Always returns this\n    else\n        return float4(0, 1, 0, 1);\n    //return float4(depthValue, depthValue, depthValue, 1.0f);\n    // return saturate(colour * textureColour);\n}\n</code></pre>\n\n<p>My depth vertex shader:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Texture2D t0 : register(t0);\nSamplerState s0 : register(s0);\n\ncbuffer MatrixBuffer : register(b0)\n{\n    matrix worldMatrix;\n    matrix viewMatrix;\n    matrix projectionMatrix;\n}\n\nstruct InputType\n{\n    float4 position : position;\n    float2 tex : TEXCOORD0;\n};\n\nstruct OutputType\n{\n    float4 position : SV_POSITION;\n    float4 depthPosition : TEXCOORD0;\n};\n\nOutputType main(InputType input)\n{\n    OutputType output;\n    output.position = mul(input.position, worldMatrix);\n    if (t0.SampleLevel(s0, input.tex, 0).r &gt; 0.05f)\n        output.position.y += (t0.SampleLevel(s0, input.tex, 0).r * 50.0f);\n\n    output.position = mul(output.position, viewMatrix);\n    output.position = mul(output.position, projectionMatrix);\n\n    output.depthPosition = output.position;\n\n    return output;\n}\n</code></pre>\n\n<p>And my depth pixel shader:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct InputType\n{\n    float4 position : SV_POSITION;\n    float4 depthPosition : TEXCOORD0;\n};\n\nfloat4 main(InputType input) : SV_Target\n{\n    float depthValue;\n    depthValue = input.depthPosition.z / input.depthPosition.w;\n    return float4(depthValue, depthValue, depthValue, 1.0f);\n}\n</code></pre>\n\n<p>I know the depth data is being written to the render texture correctly as I have a preview of it on the screen <a href=\"https://i.stack.imgur.com/bOXtM.png\" rel=\"nofollow noreferrer\">current view + normals shown to demonstrate topography instead of a flat white plane</a>.</p>\n"}, {"tags": ["c++", "boost", "statistics"], "comments": [{"owner": {"reputation": 1212, "user_id": 1587755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6bfa53480be2aca93ac528eda21a7d3?s=128&d=identicon&r=PG", "display_name": "Taekahn", "link": "https://stackoverflow.com/users/1587755/taekahn"}, "edited": false, "score": 0, "creation_date": 1574869274, "post_id": 59072845, "comment_id": 104385115, "body": "Your setup functions aren&#39;t doing anything. You seem to be making this more convoluted than it needs to be."}, {"owner": {"reputation": 448, "user_id": 7502962, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c95c170717376e69bbc06f775dd79ee8?s=128&d=identicon&r=PG&f=1", "display_name": "KGB91", "link": "https://stackoverflow.com/users/7502962/kgb91"}, "reply_to_user": {"reputation": 1212, "user_id": 1587755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6bfa53480be2aca93ac528eda21a7d3?s=128&d=identicon&r=PG", "display_name": "Taekahn", "link": "https://stackoverflow.com/users/1587755/taekahn"}, "edited": false, "score": 0, "creation_date": 1574870306, "post_id": 59072845, "comment_id": 104385685, "body": "I am trying to set the parameters so that I can access the distribution later on without having to specify them another time."}], "owner": {"reputation": 448, "user_id": 7502962, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c95c170717376e69bbc06f775dd79ee8?s=128&d=identicon&r=PG&f=1", "display_name": "KGB91", "link": "https://stackoverflow.com/users/7502962/kgb91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574866318, "creation_date": 1574866318, "question_id": 59072845, "link": "https://stackoverflow.com/questions/59072845/use-boostmathdistribution-within-a-class", "title": "Use boost::math::distribution within a class", "body": "<p>I have made a pretty simple program that is supposed to get the quantiles of different distributions. In my main file I create a class object for each distribution and then use a <code>setup void</code> inside the class to set the parameters for each distribution (for instance for the normal distribution I want to set the mean and variance). Then I want to the the quantile value by calling <code>GetDraw</code> with the confidence interval specified when I call the <code>double</code>.</p>\n\n<p>I use the <code>boost</code> package for the distributions.</p>\n\n<p>The problem is that I get different values for some distribution if I use the class instead of printing the value directly to the console (the first value is the value I get from the class, the second value is the value I get without the class):</p>\n\n<pre><code>Normal: 1.64485\nNormal: 1.64485\nBinomal: 1\nBinomal: 422\nBeta: 0.95\nBeta: 1\nexponential_distribution: 2.99573\nexponential_distribution: 1.49787\n</code></pre>\n\n<p>Do you have any idea why I get this strange result?</p>\n\n<p>This is my main.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;random&gt;\n#include &lt;boost/math/distributions.hpp&gt;\n\n#include \"Random.h\"\n\nint main()\n    {\n        double q;\n\n        //NORMAL\n        Normaldist RandomNormal;\n        RandomNormal.Setup(0, 1);\n        q = RandomNormal.GetDraw(0.95);\n        std::cout &lt;&lt; \"Normal: \" &lt;&lt; q &lt;&lt; std::endl;\n\n        boost::math::normal dist(0.0, 1.0); //https://stackoverflow.com/questions/5565228/quantile-functions-in-boost-c\n        q = quantile(dist, 0.95);\n        std::cout &lt;&lt; \"Normal: \" &lt;&lt; q &lt;&lt; std::endl;\n\n\n        //Binomial\n        Binomialdist RandomBinomial;\n        RandomBinomial.Setup(509, 0.8);\n        q = RandomBinomial.GetDraw(0.95);\n        std::cout &lt;&lt; \"Binomal: \" &lt;&lt; q &lt;&lt; std::endl;\n\n        q = quantile(boost::math::binomial(509, 0.8), 0.95);\n        std::cout &lt;&lt; \"Binomal: \" &lt;&lt; q &lt;&lt; std::endl;\n\n\n        //BETA\n        Betadist RandomBeta;\n        RandomBeta.Setup(1, 0.1);\n        q = RandomBeta.GetDraw(0.95);\n        std::cout &lt;&lt; \"Beta: \" &lt;&lt; q &lt;&lt; std::endl;\n\n        q = boost::math::ibeta_inv(1, 0.1, 0.95);\n        std::cout &lt;&lt; \"Beta: \" &lt;&lt; q &lt;&lt; std::endl;\n\n\n        //Exponential\n        Exponentialdist RandomExp;\n        RandomExp.Setup(2);\n        q = RandomExp.GetDraw(0.95);\n        std::cout &lt;&lt; \"exponential_distribution: \" &lt;&lt; q &lt;&lt; std::endl;\n\n        const auto lbda = 2.0;\n        q = quantile(boost::math::exponential_distribution&lt;&gt; { lbda }, 0.95);\n        std::cout &lt;&lt; \"exponential_distribution: \" &lt;&lt; q &lt;&lt; std::endl;\n\n    return(0);\n    }\n</code></pre>\n\n<p>This is my Random.h:</p>\n\n<pre><code>#ifndef RANDOM_H_INCLUDED\n#define RANDOM_H_INCLUDED\n\n#include &lt;iostream&gt;\n#include &lt;random&gt;\n#include &lt;boost/math/distributions.hpp&gt;\n\nclass DistributionClass {\n            protected:\n                boost::math::normal_distribution&lt;&gt; NormalDistribution; //https://stackoverflow.com/questions/5565228/quantile-functions-in-boost-c\n                boost::math::binomial_distribution&lt;&gt; BinomialDistribution; //https://valelab4.ucsf.edu/svn/3rdpartypublic/boost/libs/math/doc/sf_and_dist/html/math_toolkit/dist/dist_ref/dists/binomial_dist.html\n                boost::math::beta_distribution&lt;&gt; BetaDistribution;\n                boost::math::exponential_distribution&lt;&gt; ExponentialDistribution;\n        };\n\n        class Normaldist: public DistributionClass {\n            public:\n                void Setup(double mean, double variance);\n                double GetDraw(double r);\n        };\n\n        class Binomialdist: public DistributionClass {\n            public:\n                void Setup(double n, double p);\n                double GetDraw(double r);\n        };\n\n        class Betadist: public DistributionClass {\n            public:\n                void Setup(double a, double b);\n                double GetDraw(double r);\n        };\n\n        class Exponentialdist: public DistributionClass {\n            public:\n                void Setup(double lbda);\n                double GetDraw(double r);\n        };\n</code></pre>\n\n<p>This is my Random.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;random&gt;\n#include &lt;boost/math/distributions.hpp&gt;\n\n#include \"Random.h\"\n\n\n    void Normaldist::Setup(double mean, double variance) {\n        boost::math::normal_distribution&lt;&gt; NormalDistribution(mean, variance);\n    }\n\n    double Normaldist::GetDraw(double r) {\n        return(quantile(NormalDistribution, r));\n    }\n\n\n    void Binomialdist::Setup(double n, double p) {\n        boost::math::binomial_distribution&lt;&gt; BinomialDistribution(n, p);\n    }\n\n    double Binomialdist::GetDraw(double r) {\n        return(quantile(BinomialDistribution, r)); //boost::math::binomial(509, 0.8)\n    }\n\n\n    void Betadist::Setup(double a, double b) { //boost.org/doc/libs/1_51_0/libs/math/doc/sf_and_dist/html/math_toolkit/dist/dist_ref/dists/beta_dist.html\n        boost::math::beta_distribution&lt;&gt; BetaDistribution(a, b);\n    }\n\n    double Betadist::GetDraw(double r) {\n        return(quantile(BetaDistribution, r));\n    }\n\n\n    void Exponentialdist::Setup(double lbda) {\n        boost::math::exponential_distribution&lt;&gt; ExponentialDistribution(lbda);\n    }\n\n    double Exponentialdist::GetDraw(double r) { //https://stackoverflow.com/questions/38201740/generate-a-exponential-distribution-for-a-set-of-data-using-boost-c\n        return(quantile(ExponentialDistribution, r));\n    }\n\n    #endif // RANDOM_H_INCLUDED\n</code></pre>\n"}, {"tags": ["c++", "memory", "memory-management", "allocator"], "comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1574865913, "post_id": 59072665, "comment_id": 104383246, "body": "<code>Allocator::Allocator() { Allocator(100); }</code> won&#39;t do what you expect it to do: It creates a temporary that is destroyed immediately after leaving the constructor \u2013 and leaves your constructed object uninitialised. You most likely wanted constructor delegation instead: <code>Allocator() : Allocator(100) { }</code>"}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1574865962, "post_id": 59072665, "comment_id": 104383276, "body": "<code>Allocator::Allocator</code> dereferences the <code>head</code> pointer without initializing it."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1574866287, "post_id": 59072665, "comment_id": 104383463, "body": "<i>If you happen to notice any other bugs or severe mistakes</i> Well, unless this is a typo <code>Allocator::Allocator() { Allocator(100); }</code>, this should never have been written if you&#39;re going to do something advanced like create an allocator."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1574867098, "post_id": 59072665, "comment_id": 104383957, "body": "<code>dl_l new_block; &#47;* ... *&#47; add_to_list(ptr-&gt;prev, &amp;new_block, ptr);</code> \u2013 you add a pointer to a local variable, which will get destroyed on exiting the function \u2013 leaving a dangling pointer inside your list..."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1574867494, "post_id": 59072665, "comment_id": 104384177, "body": "By the way, this is not Java. You don&#39;t need to do <code>Test t = Test();</code> all the time, just writing <code>Test t;</code> will already create a new, valid object, calling the default constructor. Similarly, you can pass parameters to: <code>Allocator a(100);</code>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1574867566, "post_id": 59072665, "comment_id": 104384224, "body": "@OP -- Why do I get the impression that you&#39;re writing C++ by attempting to use another language (Java maybe) as a guide?  That never works out ok."}, {"owner": {"reputation": 318, "user_id": 5757418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ef3924d3d4ae25ac11efc58646139e?s=128&d=identicon&r=PG&f=1", "display_name": "Don Draper", "link": "https://stackoverflow.com/users/5757418/don-draper"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1574867831, "post_id": 59072665, "comment_id": 104384369, "body": "@PaulMcKenzie, your impression is spot on. The closest to C++ I had to work with was C#. And even that exposure was very brief. For the most part, I use Python."}, {"owner": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "edited": false, "score": 0, "creation_date": 1574867905, "post_id": 59072665, "comment_id": 104384402, "body": "By the way, you don&#39;t need to <code>typedef</code> a C++ <code>struct</code> to be able to use it."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1574868172, "post_id": 59072665, "comment_id": 104384558, "body": "Where did you get that dl_list from anyway? In C++, there&#39;s already <code>std::list</code>, which implements that already \u2013 and with clean C++ interface, so usage is <i>much</i> simpler <i>and</i> safer..."}, {"owner": {"reputation": 318, "user_id": 5757418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ef3924d3d4ae25ac11efc58646139e?s=128&d=identicon&r=PG&f=1", "display_name": "Don Draper", "link": "https://stackoverflow.com/users/5757418/don-draper"}, "edited": false, "score": 0, "creation_date": 1574868259, "post_id": 59072665, "comment_id": 104384613, "body": "If I understood the assignment correctly, we need to use a custom doubly-linked list interface and then implement a free-list allocator. Based on my experience with C++, imagine what I felt when I heard that :)"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1574868497, "post_id": 59072665, "comment_id": 104384735, "body": "This dl_list seems to be a C implementation. There are some impacts then, but they don&#39;t seem to apply here, as you can create all your nodes from C++ via <code>new</code>. I assume that you are not allowed to modify dl_list, so you&#39;ll probably have to live with not having constructors and destructors available..."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1574868602, "post_id": 59072665, "comment_id": 104384777, "body": "To avoid memory leaks, make sure that once you don&#39;t need a node any more you delete it again. That&#39;s something you don&#39;t have to care for in python or C#, but C++ doesn&#39;t come with a garbage collector!"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1574868612, "post_id": 59072665, "comment_id": 104384786, "body": "Your <code>alloc</code> looks pretty strange to me. You <i>do</i> find a node with sufficient space and create a new one in consequence? Wouldn&#39;t you rather use the one just found and only create a new one if there wasn&#39;t one free? And only return null if creation failed?"}], "answers": [{"comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1574866291, "post_id": 59072757, "comment_id": 104383466, "body": "That&#39;s undefined behaviour, malloc does not produce a valid object, so you&#39;d actually need do a placement new before using it."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1574866400, "post_id": 59072757, "comment_id": 104383530, "body": "Better would be writing a constructor for <code>dl_list</code> and set members there. Then all we&#39;d need would be <code>head = new dl_list();</code>"}, {"owner": {"reputation": 318, "user_id": 5757418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ef3924d3d4ae25ac11efc58646139e?s=128&d=identicon&r=PG&f=1", "display_name": "Don Draper", "link": "https://stackoverflow.com/users/5757418/don-draper"}, "edited": false, "score": 0, "creation_date": 1574866755, "post_id": 59072757, "comment_id": 104383745, "body": "@DavidSchwartz, can you please elaborate a bit more in your answer. I added the <code>head = NULL</code> line, but there is still no output."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 318, "user_id": 5757418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ef3924d3d4ae25ac11efc58646139e?s=128&d=identicon&r=PG&f=1", "display_name": "Don Draper", "link": "https://stackoverflow.com/users/5757418/don-draper"}, "edited": false, "score": 0, "creation_date": 1574866938, "post_id": 59072757, "comment_id": 104383859, "body": "@DonDraper With <code>head = NULL</code> followed by <code>head-&gt;next = ...</code> you don&#39;t use uninitialised pointer any more, but dereference a null pointer \u2013 still leading to crash. If you want to set the next/prev pointers, you need a valid object, so create one..."}, {"owner": {"reputation": 318, "user_id": 5757418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ef3924d3d4ae25ac11efc58646139e?s=128&d=identicon&r=PG&f=1", "display_name": "Don Draper", "link": "https://stackoverflow.com/users/5757418/don-draper"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1574867207, "post_id": 59072757, "comment_id": 104384030, "body": "@Aconcagua, must be a stupid question, but do you mean I should instantiate a dl_list object first?"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 318, "user_id": 5757418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ef3924d3d4ae25ac11efc58646139e?s=128&d=identicon&r=PG&f=1", "display_name": "Don Draper", "link": "https://stackoverflow.com/users/5757418/don-draper"}, "edited": false, "score": 0, "creation_date": 1574867335, "post_id": 59072757, "comment_id": 104384100, "body": "@DonDraper Of course. Objects don&#39;t appear just out of nothing. But don&#39;t use local variables, as in <code>alloc</code>, that will get destroyed again after exiting constructor!"}, {"owner": {"reputation": 318, "user_id": 5757418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ef3924d3d4ae25ac11efc58646139e?s=128&d=identicon&r=PG&f=1", "display_name": "Don Draper", "link": "https://stackoverflow.com/users/5757418/don-draper"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1574867426, "post_id": 59072757, "comment_id": 104384140, "body": "@Aconcagua, <code>head = new dl_list()</code>, is that the right way?"}, {"owner": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "reply_to_user": {"reputation": 318, "user_id": 5757418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ef3924d3d4ae25ac11efc58646139e?s=128&d=identicon&r=PG&f=1", "display_name": "Don Draper", "link": "https://stackoverflow.com/users/5757418/don-draper"}, "edited": false, "score": 0, "creation_date": 1574867532, "post_id": 59072757, "comment_id": 104384203, "body": "@DonDraper Yes but you need to define a constructor for <code>dl_list</code> beforehand (that will initialize the members properly). Then you will be able to write <code>head = new dl_list;</code> safely."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "edited": false, "score": 0, "creation_date": 1574867596, "post_id": 59072757, "comment_id": 104384244, "body": "@Fareanor Well, there&#39;s an implicit default constructor, it won&#39;t initialise the members, but as this is done afterwards anyway, that won&#39;t be a tragedy..."}, {"owner": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1574867638, "post_id": 59072757, "comment_id": 104384275, "body": "@Aconcagua Yes of course, but it would be safer to initialize pointers members to <code>nullptr</code> explicitly."}, {"owner": {"reputation": 318, "user_id": 5757418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ef3924d3d4ae25ac11efc58646139e?s=128&d=identicon&r=PG&f=1", "display_name": "Don Draper", "link": "https://stackoverflow.com/users/5757418/don-draper"}, "edited": false, "score": 0, "creation_date": 1574867695, "post_id": 59072757, "comment_id": 104384306, "body": "@After adding <code>head = new dl_list()</code>, I get Assertion Error at the first assert-statement. That must an implementation error then?"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "edited": false, "score": 0, "creation_date": 1574867740, "post_id": 59072757, "comment_id": 104384334, "body": "@Fareanor Agree (see comments of mine above). But if looking at dl_list.h, it looks pretty much like being designed for C. Well, I don&#39;t consider it a good idea to intermix C and C++ that closely anyway..."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 318, "user_id": 5757418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ef3924d3d4ae25ac11efc58646139e?s=128&d=identicon&r=PG&f=1", "display_name": "Don Draper", "link": "https://stackoverflow.com/users/5757418/don-draper"}, "edited": false, "score": 0, "creation_date": 1574868008, "post_id": 59072757, "comment_id": 104384460, "body": "@DonDraper You mean you uncommented that again? That might be a consequence of the local variable pushed into your list as dangling pointer (see comment to question). Maybe the value got overwritten already and the block isn&#39;t seen as occupied any more. Actually, <i>anything</i> could happen, as you introduced undefined behaviour already that way..."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1574868092, "post_id": 59072757, "comment_id": 104384500, "body": "Why are you trying to allocate a block in the constructor? Nobody is asking for a block. Do you just want to start with one free block for some reason? If so, why not call the code that allocates a block rather than repeating the logic?"}, {"owner": {"reputation": 318, "user_id": 5757418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ef3924d3d4ae25ac11efc58646139e?s=128&d=identicon&r=PG&f=1", "display_name": "Don Draper", "link": "https://stackoverflow.com/users/5757418/don-draper"}, "edited": false, "score": 0, "creation_date": 1574868400, "post_id": 59072757, "comment_id": 104384679, "body": "The idea, at least the way I see it, is to first allocate a contiguous block of memory (with malloc) and then do free/defrag/realloc etc. That said, my understanding of the logic might be totally wrong. Hence, all the issues and bugs."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1574868603, "post_id": 59072757, "comment_id": 104384779, "body": "Okay, that makes sense. The code seems to be quite thoroughly busted then, I mean dozens of bugs. Why does <code>Allocator::Allocator</code> allocate an extra allocator? Why does <code>Allocator::alloc</code> store the address of an object that immediately goes away? Why does <code>Allocator::alloc</code> not modify the block it found leaving it on the list?"}, {"owner": {"reputation": 318, "user_id": 5757418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ef3924d3d4ae25ac11efc58646139e?s=128&d=identicon&r=PG&f=1", "display_name": "Don Draper", "link": "https://stackoverflow.com/users/5757418/don-draper"}, "edited": false, "score": 1, "creation_date": 1574869137, "post_id": 59072757, "comment_id": 104385042, "body": "@DavidSchwartz, I guess that answering those questions requires much more knowledge of C++ than I currently have. So, unless asking to spoon-feed the bugs and workarounds to me is an option, I will have to take some time learning C++ to get a proper understanding."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 1, "last_activity_date": 1574866313, "last_edit_date": 1574866313, "creation_date": 1574866028, "answer_id": 59072757, "question_id": 59072665, "link": "https://stackoverflow.com/questions/59072665/why-does-nothing-happen-after-instantiation-c-memory-allocator-implementatio/59072757#59072757", "title": "Why does nothing happen after instantiation? (C++ memory allocator implementation)", "body": "<p>You never assign <code>head</code> a value, yet you dereference it in the constructor with <code>head-&gt;next = nullptr;</code>. Most likely, head is <code>NULL</code> or points to garbage, causing a fault when you try to access the <code>next</code> pointer.</p>\n\n<p>Look at this code:</p>\n\n<pre><code>Allocator::Allocator(size_t size) {\n\n    memory = (char*)malloc(size);\n\n    head-&gt;next = nullptr;\n    head-&gt;prev = nullptr;\n    head-&gt;size = size;\n    head-&gt;block = memory;\n    head-&gt;state = FREE;\n}\n</code></pre>\n\n<p>You haven't set <code>head</code> to point to anything at all. What do you think <code>head-&gt;next</code> is here?</p>\n\n<p>I suspect you meant this:</p>\n\n<pre><code>Allocator::Allocator(size_t size) {\n    head = NULL;\n}\n</code></pre>\n\n<p>There's no reason to allocate a block here since nothing wants a pointer to one.</p>\n"}], "owner": {"reputation": 318, "user_id": 5757418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ef3924d3d4ae25ac11efc58646139e?s=128&d=identicon&r=PG&f=1", "display_name": "Don Draper", "link": "https://stackoverflow.com/users/5757418/don-draper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574866313, "creation_date": 1574865697, "question_id": 59072665, "link": "https://stackoverflow.com/questions/59072665/why-does-nothing-happen-after-instantiation-c-memory-allocator-implementatio", "title": "Why does nothing happen after instantiation? (C++ memory allocator implementation)", "body": "<p>This is quite a strange assignment for a C++ course that I recently got. The idea is to implement a simple memory allocator in C++ using a doubly-linked list. My C++ is only limited to solving problems on Codeforces, so I have no idea why nothing seems to get printed. Here's the code:</p>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"tests.h\"\n\nint main() {\n    Tests tests = Tests();\n    tests.run();\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>allocator.cpp</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"allocator.h\"\n\nvoid* CleverPtr::get() const {\n    return data;\n}\n\nAllocator::Allocator() {\n\n    Allocator(100);//100 Bite\n}\n\nAllocator::Allocator(size_t size) {\n\n    memory = (char*)malloc(size);\n\n    head-&gt;next = nullptr;\n    head-&gt;prev = nullptr;\n    head-&gt;size = size;\n    head-&gt;block = memory;\n    head-&gt;state = FREE;\n}\n\nCleverPtr Allocator::alloc(size_t size) {\n\n    dl_l *ptr = head;\n    bool find = false;\n\n    while (ptr){\n        if (ptr-&gt;state == FREE and ptr-&gt;size &gt;= size) {\n            find = true;\n            break;\n        }\n        ptr = ptr-&gt;next;\n    }\n\n    if (find) {\n        dl_l new_block;\n        new_block.next = nullptr;\n        new_block.prev = nullptr;\n        new_block.block = ptr-&gt;block;\n        new_block.size = size;\n        new_block.state = OCCUPIED;\n\n        ptr-&gt;block = (char*)((uintptr_t)(ptr-&gt;block) + size);\n\n        add_to_list(ptr-&gt;prev, &amp;new_block, ptr);\n\n        return CleverPtr(new_block.block);\n    }\n\n    return CleverPtr(nullptr);\n}\nvoid Allocator::free(CleverPtr &amp;ptr) {\n    dl_l * node = (dl_l*)((char *)ptr.get() - offsetof(dl_l, block));\n\n    node-&gt;state = FREE;\n}\n\nvoid Allocator::defrag() {\n    dl_l *ptr = head;\n\n    while(ptr) {\n        if (ptr-&gt;next) {\n            if (ptr-&gt;state == FREE and ptr-&gt;next-&gt;state == FREE) {\n                ptr-&gt;size += ptr-&gt;next-&gt;size;\n                remove_from_list(ptr-&gt;next);\n            }\n        }\n        ptr = ptr-&gt;next;\n    }\n}\n\nstd::list&lt;dl_l*&gt; Allocator::show_busy_blocks() const {\n    dl_l *ptr = head;\n\n    std::list&lt;dl_l*&gt; busy_blocks = std::list&lt;dl_l*&gt;();\n\n    while(ptr) {\n        if (ptr-&gt;state == OCCUPIED) {\n            busy_blocks.push_back(ptr);\n        }\n        ptr = ptr-&gt;next;\n    }\n\n    return busy_blocks;\n}\n\nstd::list&lt;dl_l*&gt; Allocator::show_free_blocks() const {\n    dl_l *ptr = head;\n\n    std::list&lt;dl_l*&gt; free_blocks = std::list&lt;dl_l*&gt;();\n\n    while(ptr) {\n        if (ptr-&gt;state == FREE) {\n            free_blocks.push_back(ptr);\n        }\n        ptr = ptr-&gt;next;\n    }\n\n    return free_blocks;\n}\n</code></pre>\n\n<p><strong>tests.cpp</strong></p>\n\n<pre><code>#include &lt;cassert&gt;\n#include \"tests.h\"\n\n\nvoid Tests::run() {\n\n    Allocator allocator = Allocator(100);\n\n    //CleverPtr ptr = allocator.alloc(10);\n\n    //std::list&lt;dl_l*&gt; busy_blocks = allocator.show_busy_blocks();\n\n    //assert(busy_blocks.size()==1);\n    cout &lt;&lt; \"Test 1\" &lt;&lt; endl;\n\n    //CleverPtr ptr1 = allocator.alloc(10);\n   // std::list&lt;dl_l*&gt; busy_blocks1 = allocator.show_busy_blocks();\n    //assert(busy_blocks1.size()==2);\n    cout &lt;&lt; \"Test 2\" &lt;&lt; endl;\n\n   // CleverPtr ptr2 = allocator.alloc(10);\n   // std::list&lt;dl_l*&gt; busy_blocks2 = allocator.show_busy_blocks();\n    //assert(busy_blocks2.size()==3);\n    cout &lt;&lt; \"Test 3\" &lt;&lt; endl;\n\n   // allocator.free(ptr1);\n    //std::list&lt;dl_l*&gt; free_blocks = allocator.show_free_blocks();\n    //assert(free_blocks.size()==2);\n    cout &lt;&lt; \"Test 4\" &lt;&lt; endl;\n\n    //allocator.free(ptr2);\n    //std::list&lt;dl_l*&gt; free_blocks1 = allocator.show_free_blocks();\n   // assert(free_blocks1.size()==3);\n    cout &lt;&lt; \"Test 5\" &lt;&lt; endl;\n\n    //allocator.defrag();\n    //std::list&lt;dl_l*&gt; free_blocks2 = allocator.show_free_blocks();\n    //assert(free_blocks1.size()==1);\n    cout &lt;&lt; \"Test 6\" &lt;&lt; endl;\n\n    cout &lt;&lt; \"Tests done successfully\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p><strong>allocator.h</strong></p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;list&gt;\n#include &lt;cstdio&gt;\n#include \"dl_list.h\"\n\n#ifndef ALLOCATORLT_ALLOCATOR_H\n#define ALLOCATORLT_ALLOCATOR_H\n\ntypedef struct{\n    int* offset;\n    int size;\n} block;\n\nusing namespace std;\n\nclass CleverPtr {\n    void* data;\n\npublic:\n    void* get() const;\n    explicit CleverPtr(void* data): data(data){}\n};\n\nclass Allocator {\n    private:\n        char* memory;\n        dl_l* head;\n\n\n\n    public:\n        Allocator();\n        explicit Allocator(size_t size);\n\n        std::list&lt;dl_l*&gt; show_busy_blocks() const;\n        std::list&lt;dl_l*&gt; show_free_blocks() const;\n\n        CleverPtr alloc(size_t size);\n        void free(CleverPtr&amp;);\n        void defrag();\n};\n\n\n#endif //ALLOCATORLT_ALLOCATOR_H\n</code></pre>\n\n<p><strong>dl_list.h</strong></p>\n\n<pre><code>#include &lt;cstdint&gt;\n\n#ifndef ALLOCATORLT_LIST_H\n#define ALLOCATORLT_LIST_H\n\n#endif //ALLOCATORLT_LIST_H\nenum STATES {FREE, OCCUPIED};\n\ntypedef struct dl_list {\n    struct dl_list *next;\n    struct dl_list *prev;\n    int size;\n    char * block;\n    int state;\n} dl_l;\n\nstatic void add_to_list(dl_l *prev_node, dl_l *new_node, dl_l *next_node) {\n    if (prev_node) {\n        prev_node-&gt;next = new_node;\n        new_node-&gt;prev = prev_node;\n    }\n\n    if (next_node) {\n        next_node-&gt;prev = new_node;\n        new_node-&gt;next = next_node;\n    }\n}\n\nstatic void remove_from_list(dl_l *node) {\n    if (node-&gt;prev)\n        node-&gt;prev-&gt;next = node-&gt;next;\n\n    if (node-&gt;next)\n        node-&gt;next-&gt;prev = node-&gt;prev;\n}\n</code></pre>\n\n<p><strong>tests.h</strong></p>\n\n<pre><code>#include \"allocator.h\"\n\n#ifndef ALLOCATORLT_TESTS_H\n#define ALLOCATORLT_TESTS_H\n\n\nclass Tests {\n\npublic:\n    void run();\n};\n\n\n#endif //ALLOCATORLT_TESTS_H\n</code></pre>\n\n<p>I had to insert all the code so that the issue can be replicated. As you can see, I commented out all the lines of code in <code>tests.cpp</code> since they have no effect on the output anyway. </p>\n\n<p>All the <code>cout</code>s after the <code>Allocator allocator = Allocator(100);</code> line are ignored, which means that something is wrong with that constructor call. I have no idea what exactly, though. </p>\n\n<p>Can someone please help me out with that? </p>\n\n<p>P.S. If you happen to notice any other bugs or severe mistakes (I suspect there are some), please let me know. Thanks</p>\n"}, {"tags": ["c++", "windows", "scheduled-tasks", "taskscheduler"], "answers": [{"tags": [], "owner": {"reputation": 159, "user_id": 2400781, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/86c9cf8add5aff12ade1d07b89e07f70?s=128&d=identicon&r=PG", "display_name": "drem1lin", "link": "https://stackoverflow.com/users/2400781/drem1lin"}, "is_accepted": true, "score": 0, "last_activity_date": 1574949149, "creation_date": 1574949149, "answer_id": 59090424, "question_id": 59072374, "link": "https://stackoverflow.com/questions/59072374/why-do-i-get-a-success-code-when-i-start-a-task-but-it-does-nothing/59090424#59090424", "title": "Why do I get a success code when I start a task, but it does nothing?", "body": "<p>Today morning I tried to run task with replacing launch trigger, and same time fixed some task settings. And all worked good, and after all I started to test my program on Win 7 and all were great, but on Win10 i got some interesting issue, task created with another last launch time (on Win7 field empty, on Win 10 message - \"Task never launched before\") and i tried to use IRegisteredTask::Run method, and it's worked! I tested on other OSes and run method working. I paste my code sample, maybe it canbe usefull for somebody.</p>\n\n<pre><code>HRESULT GetTaskDefinition(ITaskService* pService, const std::wstring&amp; fullTaskName, ITaskDefinition** pTask)\n{\n    ITaskFolder* pFolder = nullptr;\n    IRegisteredTask* pRegTask = nullptr;\n    HRESULT hr = pService-&gt;Connect(_variant_t(), _variant_t(), _variant_t(), _variant_t());\n    if (FAILED(hr))\n        return hr;\n\n    const std::wstring taskFolder = fullTaskName.substr(0, fullTaskName.find_last_of(L'\\\\'));\n    const std::wstring taskName = fullTaskName.substr(fullTaskName.find_last_of(L'\\\\') + 1);\n    hr = pService-&gt;GetFolder(_bstr_t(taskFolder.c_str()), &amp;pFolder);\n    if (FAILED(hr))\n        return hr;\n\n    hr = pFolder-&gt;GetTask(SysAllocString(L\"RegIdleBackup\"), &amp;pRegTask);\n    pFolder-&gt;Release();\n    if (FAILED(hr))\n        return hr;\n\n    hr = pRegTask-&gt;get_Definition(pTask);\n    return hr;\n}\n\nHRESULT ChangeTaskSettings(ITaskDefinition* pTaskDef)\n {\n    ITaskSettings* pTaskSettings = nullptr;\n    HRESULT hr = pTaskDef-&gt;get_Settings(&amp;pTaskSettings);\n    if (FAILED(hr))\n        return hr;\n    hr = pTaskSettings-&gt;put_AllowDemandStart(VARIANT_TRUE);\n    hr = pTaskSettings-&gt;put_MultipleInstances(TASK_INSTANCES_PARALLEL);\n    hr = pTaskSettings-&gt;put_RunOnlyIfIdle(VARIANT_FALSE);\n    hr = pTaskSettings-&gt;put_StartWhenAvailable(VARIANT_TRUE);\n    hr = pTaskSettings-&gt;put_StopIfGoingOnBatteries(VARIANT_FALSE);\n    hr = pTaskSettings-&gt;put_Enabled(VARIANT_FALSE);\n    hr = pTaskSettings-&gt;put_DisallowStartIfOnBatteries(VARIANT_FALSE);\n    hr = pTaskDef-&gt;put_Settings(pTaskSettings);\n    pTaskSettings-&gt;Release();\n    return hr;\n}\n\nFILETIME AddSecondsToFIleTime(FILETIME ft, unsigned seconds)\n{\n    FILETIME res;\n#define _SECONDS ((__int64) 10000000) //100 ns intervals in second\n    ULONGLONG tmp = (static_cast&lt;ULONGLONG&gt;(ft.dwHighDateTime) &lt;&lt; 32) + ft.dwLowDateTime + seconds*_SECONDS;\n    res.dwLowDateTime = static_cast&lt;DWORD&gt;(tmp &amp; 0xFFFFFFFF);\n    res.dwHighDateTime = static_cast&lt;DWORD&gt;(tmp &gt;&gt; 32);\n    return res;\n}\n\nstd::wstring GetTaskLaunchTimeWstring(SYSTEMTIME st, unsigned wait_interval)\n{\n    FILETIME ft;\n    SystemTimeToFileTime(&amp;st, &amp;ft);\n    ft = AddSecondsToFIleTime(ft, wait_interval);\n    FileTimeToSystemTime(&amp;ft, &amp;st);\n    std::stringstream ss;\n    ss &lt;&lt; std::setfill('0') &lt;&lt; std::setw(2) &lt;&lt; st.wYear &lt;&lt; \"-\" &lt;&lt; \n        std::setfill('0') &lt;&lt; std::setw(2) &lt;&lt; st.wMonth &lt;&lt; \"-\" &lt;&lt; \n        std::setfill('0') &lt;&lt; std::setw(2) &lt;&lt; st.wDay &lt;&lt; \"T\" &lt;&lt;\n        std::setfill('0') &lt;&lt; std::setw(2) &lt;&lt; st.wHour &lt;&lt; \":\" &lt;&lt;\n        std::setfill('0') &lt;&lt; std::setw(2) &lt;&lt; st.wMinute &lt;&lt; \":\" &lt;&lt; \n        std::setfill('0') &lt;&lt; std::setw(2) &lt;&lt; st.wSecond;\n    std::string str = ss.str();\n    return std::wstring(str.begin(), str.end());\n}\n\nHRESULT ChangeTaskTriggers(ITaskDefinition* pTaskDef, const std::wstring&amp; LaunchTimeStr)\n {\n    ITriggerCollection* pTriggersCollection = nullptr;\n    HRESULT hr = pTaskDef-&gt;get_Triggers(&amp;pTriggersCollection);\n    hr = pTriggersCollection-&gt;Clear();\n\n    ITrigger* pTrigger = nullptr;\n    hr = pTriggersCollection-&gt;Create(TASK_TRIGGER_TIME, &amp;pTrigger);\n    pTriggersCollection-&gt;Release();\n    if (FAILED(hr))\n        return hr;\n\n    ITimeTrigger* pTimeTrigger = nullptr;\n    hr = pTrigger-&gt;QueryInterface(IID_ITimeTrigger, reinterpret_cast&lt;void**&gt;(&amp;pTimeTrigger));\n    pTrigger-&gt;Release();\n    if (FAILED(hr))\n        return hr;\n\n    hr = pTimeTrigger-&gt;put_Id(_bstr_t(L\"Trigger\"));\n    hr = pTimeTrigger-&gt;put_Enabled(VARIANT_TRUE);\n    hr = pTimeTrigger-&gt;put_StartBoundary(_bstr_t(LaunchTimeStr.c_str()));\n    pTimeTrigger-&gt;Release();\n\n    return hr;\n }\n\nHRESULT RegisterTask(ITaskService* pService, ITaskDefinition* pTaskDef, const std::wstring&amp; fullTaskName)\n{\n    ITaskFolder* pFolder = nullptr;\n    HRESULT hr = pService-&gt;Connect(_variant_t(), _variant_t(), _variant_t(), _variant_t());\n    if (FAILED(hr))\n        return hr;\n\n    const std::wstring taskFolder = fullTaskName.substr(0, fullTaskName.find_last_of(L'\\\\'));\n    const std::wstring taskName = fullTaskName.substr(fullTaskName.find_last_of(L'\\\\') + 1);\n\n    hr = pService-&gt;GetFolder(_bstr_t(taskFolder.c_str()), &amp;pFolder);\n    pService-&gt;Release();\n    if (FAILED(hr))\n        return hr;\n\n\n    IRegisteredTask* pRegisteredTAsk = nullptr;\n    hr = pFolder-&gt;DeleteTask(_bstr_t(taskName.c_str()), 0);\n    hr = pFolder-&gt;RegisterTaskDefinition(_bstr_t(taskName.c_str()),\n        pTaskDef,\n        TASK_CREATE_OR_UPDATE,\n        _variant_t(),\n        _variant_t(),\n        TASK_LOGON_SERVICE_ACCOUNT,\n        _variant_t(L\"\"),\n        &amp;pRegisteredTAsk);\n\n    if (SUCCEEDED(hr))\n    {\n        pRegisteredTAsk-&gt;put_Enabled(VARIANT_TRUE);\n        pRegisteredTAsk-&gt;Release();\n    }\n\n    return hr;\n}\n\nHRESULT CreateModifiedTaskCopy(const std::wstring&amp; fullTaskName, const std::wstring&amp; copyName, unsigned seconds_to_start)\n{\n    ITaskService* pService = nullptr;\n    ITaskDefinition* pTaskDef = nullptr;\n    HRESULT hr = CoCreateInstance(CLSID_TaskScheduler, nullptr, CLSCTX_INPROC_SERVER, IID_ITaskService, (void**)&amp;pService);\n    if (FAILED(hr))\n        return hr;\n\n    hr = GetTaskDefinition(pService, fullTaskName, &amp;pTaskDef);\n    if (FAILED(hr))\n    {\n        pService-&gt;Release();\n        return hr;\n    }\n\n    hr = ChangeTaskSettings(pTaskDef);\n\n    SYSTEMTIME st;\n    GetLocalTime(&amp;st);\n    const std::wstring launchStr = GetTaskLaunchTimeWstring(st, seconds_to_start);\n    hr = ChangeTaskTriggers(pTaskDef, launchStr);\n    hr = RegisterTask(pService, pTaskDef, copyName);\n\n    pTaskDef-&gt;Release();\n    pService-&gt;Release();\n\n    return hr;\n}\n\nHRESULT WaitUntilTaskCompleted(const std::wstring&amp; fullTaskName, unsigned taskTimeout, unsigned maxWaitTime)\n{\n    ITaskService* pService = nullptr;\n    HRESULT hr = CoCreateInstance(CLSID_TaskScheduler, nullptr, CLSCTX_INPROC_SERVER, IID_ITaskService, (void**)&amp;pService);\n    if (FAILED(hr))\n        return hr;\n\n    pService-&gt;Connect(_variant_t(), _variant_t(), _variant_t(), _variant_t());\n    if (FAILED(hr))\n    {\n        pService-&gt;Release();\n        return hr;\n    }\n\n    const std::wstring taskFolder = fullTaskName.substr(0, fullTaskName.find_last_of(L'\\\\'));\n    const std::wstring taskName = fullTaskName.substr(fullTaskName.find_last_of(L'\\\\') + 1);\n    ITaskFolder* pFolder = nullptr;\n    hr = pService-&gt;GetFolder(_bstr_t(taskFolder.c_str()), &amp;pFolder);\n    pService-&gt;Release();\n    if (FAILED(hr))\n        return hr;\n\n    IRegisteredTask* pTask = nullptr;\n    hr = pFolder-&gt;GetTask(_bstr_t(taskName.c_str()), &amp;pTask);\n    if (FAILED(hr))\n    {\n        pFolder-&gt;Release();\n        return hr;\n    }\n\n    DATE lastRun;\n    unsigned tries = 0;\n    do \n    {\n        Sleep(1000);\n        hr = pTask-&gt;get_LastRunTime(&amp;lastRun);\n        tries++;\n        if (tries &gt; maxWaitTime)\n            break;\n    } while (hr == SCHED_S_TASK_HAS_NOT_RUN);\n\n    return tries &gt; maxWaitTime? SCHED_E_INVALID_TASK :S_OK;\n}\n\nHRESULT DeleteTask(const std::wstring&amp; fullTaskName)\n{\n    ITaskService* pService = nullptr;\n    HRESULT hr = CoCreateInstance(CLSID_TaskScheduler, nullptr, CLSCTX_INPROC_SERVER, IID_ITaskService, (void**)&amp;pService);\n    if (FAILED(hr))\n        return hr;\n\n    pService-&gt;Connect(_variant_t(), _variant_t(), _variant_t(), _variant_t());\n    if (FAILED(hr))\n    {\n        pService-&gt;Release();\n        return hr;\n    }\n\n    const std::wstring taskFolder = fullTaskName.substr(0, fullTaskName.find_last_of(L'\\\\'));\n    const std::wstring taskName = fullTaskName.substr(fullTaskName.find_last_of(L'\\\\') + 1);\n    ITaskFolder* pFolder = nullptr;\n    hr = pService-&gt;GetFolder(_bstr_t(taskFolder.c_str()), &amp;pFolder);\n    pService-&gt;Release();\n    if (FAILED(hr))\n        return hr;\n\n    hr = pFolder-&gt;DeleteTask(_bstr_t(taskName.c_str()), 0);\n    pFolder-&gt;Release();\n\n    return hr;\n}\n\nHRESULT RunTask(const std::wstring&amp; fullTaskName)\n{\n    ITaskService* pService = nullptr;\n    HRESULT hr = CoCreateInstance(CLSID_TaskScheduler, nullptr, CLSCTX_INPROC_SERVER, IID_ITaskService, (void**)&amp;pService);\n    if (FAILED(hr))\n        return hr;\n\n    pService-&gt;Connect(_variant_t(), _variant_t(), _variant_t(), _variant_t());\n    if (FAILED(hr))\n    {\n        pService-&gt;Release();\n        return hr;\n    }\n\n    const std::wstring taskFolder = fullTaskName.substr(0, fullTaskName.find_last_of(L'\\\\'));\n    const std::wstring taskName = fullTaskName.substr(fullTaskName.find_last_of(L'\\\\') + 1);\n    ITaskFolder* pFolder = nullptr;\n    hr = pService-&gt;GetFolder(_bstr_t(taskFolder.c_str()), &amp;pFolder);\n    pService-&gt;Release();\n    if (FAILED(hr))\n        return hr;\n\n    IRegisteredTask* pTask = nullptr;\n    hr = pFolder-&gt;GetTask(_bstr_t(taskName.c_str()), &amp;pTask);\n    pFolder-&gt;Release();\n\n    IRunningTask* pRunTask = nullptr;\n    pTask-&gt;Run(_variant_t(), &amp;pRunTask);\n    pTask-&gt;Release();\n    pRunTask-&gt;Release();\n\n    return hr;\n}\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    HRESULT hr = CoInitializeEx(nullptr, COINIT_MULTITHREADED);\n    if (FAILED(hr))\n        return hr;\n\n    hr = CoInitializeSecurity(nullptr, -1, nullptr, nullptr, RPC_C_AUTHN_LEVEL_PKT_PRIVACY, RPC_C_IMP_LEVEL_IMPERSONATE, nullptr, 0, nullptr);\n    if (FAILED(hr))\n    {\n        CoUninitialize();\n        return hr;\n    }\n    const unsigned seconds_to_start = 30;\n    hr = CreateModifiedTaskCopy(L\"\\\\Microsoft\\\\Windows\\\\Registry\\\\RegIdleBackup\", L\"\\\\Microsoft\\\\Windows\\\\Registry\\\\MyTask\", seconds_to_start);\n    if (FAILED(hr))\n    {\n        CoUninitialize();\n        return hr;\n    }\n    RunTask(L\"\\\\Microsoft\\\\Windows\\\\Registry\\\\MyTask\");\n    hr = WaitUntilTaskCompleted(L\"\\\\Microsoft\\\\Windows\\\\Registry\\\\MyTask\", seconds_to_start, seconds_to_start * 4);\n\n    hr = DeleteTask(L\"\\\\Microsoft\\\\Windows\\\\Registry\\\\MyTask\");\n\n    CoUninitialize();\n\n    printf(\"All ok!\\r\\n\");\n    return hr;\n}\n</code></pre>\n"}], "owner": {"reputation": 159, "user_id": 2400781, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/86c9cf8add5aff12ade1d07b89e07f70?s=128&d=identicon&r=PG", "display_name": "drem1lin", "link": "https://stackoverflow.com/users/2400781/drem1lin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 59090424, "answer_count": 1, "score": 0, "last_activity_date": 1574949149, "creation_date": 1574864855, "question_id": 59072374, "link": "https://stackoverflow.com/questions/59072374/why-do-i-get-a-success-code-when-i-start-a-task-but-it-does-nothing", "title": "Why do I get a success code when I start a task, but it does nothing?", "body": "<p>Please help me to solve a problem. I'm trying to copy a system RegIdleBackup task and launch the copied task. I successfully copied task with ITaskService api, and change some settings in it. And after all i tried to Run this task, and I got return code <em>S_OK</em>, but task info didn't changed in Task Scheduler window and backup files didn't update. I can manually run this task from task sheduler and my copied task works good. My problem is with launch method, but i can't find it. Thank you.</p>\n\n<p>Here is my code</p>\n\n<pre><code>HRESULT GetTask(ITaskService* pService, const std::wstring&amp; fullTaskName, IRegisteredTask** pTask)\n{\n    ITaskFolder* pFolder = nullptr;\n    HRESULT hr = pService-&gt;Connect(_variant_t(), _variant_t(), _variant_t(), _variant_t());\n    if (FAILED(hr))\n        return hr;\n\n    const std::wstring taskFolder = fullTaskName.substr(0, fullTaskName.find_last_of(L'\\\\'));\n    const std::wstring taskName = fullTaskName.substr(fullTaskName.find_last_of(L'\\\\') + 1);\n    hr = pService-&gt;GetFolder(_bstr_t(taskFolder.c_str()), &amp;pFolder);\n    if (FAILED(hr))\n        return hr;\n\n    hr = pFolder-&gt;GetTask(SysAllocString(L\"RegIdleBackup\"), pTask);\n    pFolder-&gt;Release();\n    return hr;\n}\n\nHRESULT CreateTaskCopy(ITaskService* pService, IRegisteredTask* pTask, const std::wstring&amp; fullTaskName)\n{\n    ITaskFolder* pFolder = nullptr;\n    HRESULT hr = pService-&gt;Connect(_variant_t(), _variant_t(), _variant_t(), _variant_t());\n    if (FAILED(hr))\n        return hr;\n\n    const std::wstring taskFolder = fullTaskName.substr(0, fullTaskName.find_last_of(L'\\\\'));\n    const std::wstring taskName = fullTaskName.substr(fullTaskName.find_last_of(L'\\\\') + 1);\n    hr = pService-&gt;GetFolder(_bstr_t(taskFolder.c_str()), &amp;pFolder);\n    pService-&gt;Release();\n\n    if (FAILED(hr))\n        return hr;\n\n    ITaskDefinition* pTaskDef = nullptr;\n    ITaskSettings* pTaskSettings = nullptr;\n    IRegisteredTask* iTask = nullptr;\n    hr = pTask-&gt;get_Definition(&amp;pTaskDef);\n    if (FAILED(hr))\n        goto exit;\n    hr = pTaskDef-&gt;get_Settings(&amp;pTaskSettings);\n    if (FAILED(hr))\n        goto exit;\n    hr = pTaskSettings-&gt;put_AllowDemandStart(_variant_t(TRUE));\n    if (FAILED(hr))\n        goto exit;\n    hr = pTaskSettings-&gt;put_MultipleInstances(TASK_INSTANCES_PARALLEL);\n    if (FAILED(hr))\n        goto exit;\n\n    hr = pTaskDef-&gt;put_Settings(pTaskSettings);\n    if (FAILED(hr))\n        goto exit;\n    pTaskSettings-&gt;Release();\n    pTaskSettings = nullptr;\n\n    hr = pFolder-&gt;DeleteTask(_bstr_t(taskName.c_str()), 0);\n    hr = pFolder-&gt;RegisterTaskDefinition(_bstr_t(taskName.c_str()),\n        pTaskDef,\n        TASK_CREATE_OR_UPDATE,\n        _variant_t(),\n        _variant_t(),\n        TASK_LOGON_SERVICE_ACCOUNT,\n        _variant_t(L\"\"),\n        &amp;iTask);\n\nexit:\n    if (pTaskSettings)\n        pTaskSettings-&gt;Release();\n    if (iTask)\n        iTask-&gt;Release();\n    if (pTaskDef)\n        pTaskDef-&gt;Release();\n    return hr;\n}\n\nHRESULT CopyTask(const std::wstring&amp; fullTaskName, const std::wstring&amp; copyName)\n{\n    ITaskService* pService = nullptr;\n    IRegisteredTask* pTask = nullptr;\n    HRESULT hr = CoCreateInstance(CLSID_TaskScheduler, nullptr, CLSCTX_INPROC_SERVER, IID_ITaskService, (void**)&amp;pService);\n    if (FAILED(hr))\n        return hr;\n\n    hr = GetTask(pService, fullTaskName, &amp;pTask);\n    if (FAILED(hr))\n        goto exit;\n\n    hr = CreateTaskCopy(pService, pTask, copyName);\n\nexit:\n    if(pService)\n        pService-&gt;Release();\n    if (pTask)\n        pTask-&gt;Release();\n    return hr;\n}\n\nHRESULT StartTask(const std::wstring&amp; fullTaskName)\n{\n    ITaskService* pService = nullptr;\n    HRESULT hr = CoCreateInstance(CLSID_TaskScheduler, nullptr, CLSCTX_INPROC_SERVER, IID_ITaskService, (void**)&amp;pService);\n    if (FAILED(hr))\n        return hr;\n\n    pService-&gt;Connect(_variant_t(), _variant_t(), _variant_t(), _variant_t());\n    if (FAILED(hr))\n    {\n        pService-&gt;Release();\n        return hr;\n    }\n\n    const std::wstring taskFolder = fullTaskName.substr(0, fullTaskName.find_last_of(L'\\\\'));\n    const std::wstring taskName = fullTaskName.substr(fullTaskName.find_last_of(L'\\\\') + 1);\n    ITaskFolder* pFolder = nullptr;\n    hr = pService-&gt;GetFolder(_bstr_t(taskFolder.c_str()), &amp;pFolder);\n    pService-&gt;Release();\n    if (FAILED(hr))\n        return hr;\n\n    IRegisteredTask* pTask = nullptr;\n    pFolder-&gt;GetTask(_bstr_t(taskName.c_str()), &amp;pTask);\n    pFolder-&gt;Release();\n\n    IRunningTask* pRunningTask = nullptr;\n    hr = pTask-&gt;RunEx(_variant_t(),0,0, _bstr_t(L\"S-1-5-18\"), &amp;pRunningTask);\n    pTask-&gt;Release();\n\n    return hr;\n}\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    HRESULT hr = CoInitializeEx(nullptr, COINIT_MULTITHREADED);\n    if (FAILED(hr))\n        return hr;\n\n    hr = CoInitializeSecurity(nullptr, -1, nullptr, nullptr, RPC_C_AUTHN_LEVEL_PKT_PRIVACY, RPC_C_IMP_LEVEL_IMPERSONATE, nullptr, 0, nullptr);\n    if (FAILED(hr))\n        return hr;\n\n    hr = CopyTask(L\"\\\\Microsoft\\\\Windows\\\\Registry\\\\RegIdleBackup\", L\"\\\\Microsoft\\\\Windows\\\\Registry\\\\MyTask\");\n    hr = StartTask(L\"\\\\Microsoft\\\\Windows\\\\Registry\\\\MyTask\");\n\n    CoUninitialize();\n    return hr;\n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "windows-10", "visual-studio-2019"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1574864535, "post_id": 59072134, "comment_id": 104382389, "body": "<i>&quot;...Is Boost 1.71.0 version compatible with visual studio 2019?...&quot;</i>? Yes.  You have configured the include path incorrectly.  Add the directory structure and what path you added to MSVS to the question please."}, {"owner": {"reputation": 1, "user_id": 7082959, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-n-ho0yZzT3U/AAAAAAAAAAI/AAAAAAAACSg/ohHAkrj3kWo/photo.jpg?sz=128", "display_name": "Vijay Shejal", "link": "https://stackoverflow.com/users/7082959/vijay-shejal"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1574864909, "post_id": 59072134, "comment_id": 104382637, "body": "@RichardCritten Hi, I have added the path information in the question."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1574865368, "post_id": 59072134, "comment_id": 104382920, "body": "I think your include dir is wrong. Does <code>C:\\libraries\\boost_1_71_0\\boost\\iostreams\\tee.hpp</code> exist?"}], "answers": [{"tags": [], "owner": {"reputation": 124, "user_id": 11322525, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4l3liclV_qg/AAAAAAAAAAI/AAAAAAAAEyA/O1gj0hbVhGw/photo.jpg?sz=128", "display_name": "Alireza Abbasi", "link": "https://stackoverflow.com/users/11322525/alireza-abbasi"}, "is_accepted": false, "score": 0, "last_activity_date": 1574871418, "creation_date": 1574871418, "answer_id": 59074391, "question_id": 59072134, "link": "https://stackoverflow.com/questions/59072134/getting-error-for-boost-1-71-0-library-with-visual-studio-2019-on-windows-10/59074391#59074391", "title": "Getting error for Boost 1.71.0 library with Visual Studio 2019 on windows 10", "body": "<p>you should Add include directory to your project:\nRight click on The project then:</p>\n\n<p>properties  ==>\nC/C++    ==>   Additional include directory      ==> C:\\libraries\\boost_1_71_0\\include</p>\n"}], "owner": {"reputation": 1, "user_id": 7082959, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-n-ho0yZzT3U/AAAAAAAAAAI/AAAAAAAACSg/ohHAkrj3kWo/photo.jpg?sz=128", "display_name": "Vijay Shejal", "link": "https://stackoverflow.com/users/7082959/vijay-shejal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 211, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574871418, "creation_date": 1574864076, "last_edit_date": 1574864814, "question_id": 59072134, "link": "https://stackoverflow.com/questions/59072134/getting-error-for-boost-1-71-0-library-with-visual-studio-2019-on-windows-10", "title": "Getting error for Boost 1.71.0 library with Visual Studio 2019 on windows 10", "body": "<p>I am using the latest Boost library version(1.71.0) with Visual Studio 2019 on Windows 10 but I am getting the error while compiling the example code. Is Boost 1.71.0 version compatible with visual studio 2019?</p>\n\n<p>Installation process:</p>\n\n<blockquote>\n  <p>1) Downloaded the latest package from <a href=\"https://www.boost.org/\" rel=\"nofollow noreferrer\">https://www.boost.org/</a></p>\n  \n  <p>2) Extracted the package and ran the \"bootstrap.bat\" file in cmd.</p>\n  \n  <p>3) Ran ./b2</p>\n  \n  <p>4) Provided the path of created library and include folder in visual studio.</p>\n  \n  <blockquote>\n    <p>Include Dir: C:\\libraries\\boost_1_71_0</p>\n    \n    <p>Lib Dir: C:\\libraries\\boost_1_71_0\\stage\\lib</p>\n  </blockquote>\n</blockquote>\n\n<p>Error:  <strong>fatal error C1083: Cannot open include file: 'boost/iostreams/tee.hpp':</strong></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 8, "creation_date": 1574864042, "post_id": 59072105, "comment_id": 104382090, "body": "why would you declare it as static when you dont want it to be alive for the duration of the program?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1574864059, "post_id": 59072105, "comment_id": 104382097, "body": "The answer is basically no. You cannot delete a static object, you can only delete objects that have been created with <code>new</code>. And yes, as long as an object exists, it occupies memory."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1574864067, "post_id": 59072105, "comment_id": 104382103, "body": "You cannot delete the static object"}, {"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 0, "creation_date": 1574864171, "post_id": 59072105, "comment_id": 104382165, "body": "You could use a static pointer instead. You can also call the destructor of the static object, but can&#39;t free it&#39;s memory."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 7, "creation_date": 1574864199, "post_id": 59072105, "comment_id": 104382187, "body": "You can have a <code>static</code> <i>pointer</i> to a dynamically allocated object. The <i>pointer</i> would have a life-time for the duration of the program, but the object it points to can be created and destroyed multiple times."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 1, "creation_date": 1574864214, "post_id": 59072105, "comment_id": 104382195, "body": "@churill calling destructor of static object would lead to UB"}, {"owner": {"reputation": 607, "user_id": 11205473, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-e2QagE3M10o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdhLHiSw77o3MkHX86h0frNwn3yDw/mo/photo.jpg?sz=128", "display_name": "User 10482", "link": "https://stackoverflow.com/users/11205473/user-10482"}, "edited": false, "score": 0, "creation_date": 1574864725, "post_id": 59072105, "comment_id": 104382523, "body": "Thanks for the replies. I added a few details to the question. The author is using this to his advantage to implement a &quot;Phoenix&quot; Singleton. A very large Singleton class of this type would consume a large chunk of memory for the duration of program, which I am worried about. (assuming no way to release the memory)"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1574865181, "post_id": 59072105, "comment_id": 104382803, "body": "Use a static <code>std::unique_ptr</code> to hold (and own) the phoenix object."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1574865206, "post_id": 59072105, "comment_id": 104382821, "body": "Don&#39;t worry about it. Most likely it&#39;s doing it&#39;s own dynamic allocations and deallocations, with a <i>miniscule</i> static footprint. Even if it isn&#39;t you may find a &quot;large&quot; static size that&#39;s still well within the capability of your computer."}], "answers": [{"comments": [{"owner": {"reputation": 607, "user_id": 11205473, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-e2QagE3M10o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdhLHiSw77o3MkHX86h0frNwn3yDw/mo/photo.jpg?sz=128", "display_name": "User 10482", "link": "https://stackoverflow.com/users/11205473/user-10482"}, "edited": false, "score": 0, "creation_date": 1574869244, "post_id": 59072332, "comment_id": 104385095, "body": "Extrapolating, I assume it means &#39;Yes&#39; to my question. Maybe I have to shy away from the implementation of Singleton in the book. I have different phases in my program and during one of which I need a large Singleton object. If the memory is forever occupied for the remainder of the program, then it is as good as a leaked. I will look up other Singleton patterns that obviate the use of static. Thanks."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 607, "user_id": 11205473, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-e2QagE3M10o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdhLHiSw77o3MkHX86h0frNwn3yDw/mo/photo.jpg?sz=128", "display_name": "User 10482", "link": "https://stackoverflow.com/users/11205473/user-10482"}, "edited": false, "score": 0, "creation_date": 1574871822, "post_id": 59072332, "comment_id": 104386521, "body": "@User10482 I would rather suggest you to reconsider if you really need a singleton. A singleton that does not live for the duration of the program doesnt really sound like a singleton. Actually I encountered many singletons, but up to today not a single one that really required to be a singleton"}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": true, "score": 4, "last_activity_date": 1574865351, "last_edit_date": 1574865351, "creation_date": 1574864713, "answer_id": 59072332, "question_id": 59072105, "link": "https://stackoverflow.com/questions/59072105/freeing-static-object-memory-completely/59072332#59072332", "title": "Freeing static object memory completely", "body": "<blockquote>\n  <p>If so, creating large static objects would mean it's memory is lost forever (till life of program ends)</p>\n</blockquote>\n\n<p>This sounds as if it was a downside of static objects. Not sure, but maybe you missed the point. Sometimes you need an object to be alive for the whole duration of the program. How do you ensure that? You make it a static object, because...</p>\n\n<blockquote>\n  <p>C++ guarantees that static objects memory lasts for the duration of the program</p>\n</blockquote>\n\n<p>If you don\u2019t want the object to be alive for the whole duration of the program, then don\u2019t make it static.</p>\n"}], "owner": {"reputation": 607, "user_id": 11205473, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-e2QagE3M10o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdhLHiSw77o3MkHX86h0frNwn3yDw/mo/photo.jpg?sz=128", "display_name": "User 10482", "link": "https://stackoverflow.com/users/11205473/user-10482"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 59072332, "answer_count": 1, "score": 0, "last_activity_date": 1574865351, "creation_date": 1574863964, "last_edit_date": 1574864544, "question_id": 59072105, "link": "https://stackoverflow.com/questions/59072105/freeing-static-object-memory-completely", "title": "Freeing static object memory completely", "body": "<p>Going through <em>Modern C++ Design</em> book, I came across this when the author talks about Singletons.</p>\n\n<blockquote>\n  <p>C++ guarantees that static objects memory lasts for the duration of the program</p>\n</blockquote>\n\n<p>(He uses this to ensure its always possible to recreate the \"Phoneix\" Singleton)</p>\n\n<p>Is it the case that I can delete the static object but can never release it's memory?\nIf so, creating large static objects would mean it's memory is lost forever (till life of program ends)</p>\n"}, {"tags": ["c++", "pthreads"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1574863941, "post_id": 59072072, "comment_id": 104382040, "body": "using posix threads didnt suddenly get unsafe, just because now C++ also has threads and mutexes. Do you have a particular situation in mind that could be problematic?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1574864082, "post_id": 59072072, "comment_id": 104382118, "body": "On a POSIX platform it&#39;s very likely that all thread and synchronization classes are implemented using pthreads."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1574864250, "post_id": 59072072, "comment_id": 104382226, "body": "There is about 100% chance that your C++ implementation of std::thread and friends is a thin wrapper around pthreads. There most likely will be full compatibility."}], "answers": [{"tags": [], "owner": {"reputation": 1073, "user_id": 10794806, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GKvpJsipy5o/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hXsT0KoMOXyLso6Ie2mfwllaD7zQ/mo/photo.jpg?sz=128", "display_name": "Gaurav Dhiman", "link": "https://stackoverflow.com/users/10794806/gaurav-dhiman"}, "is_accepted": true, "score": 1, "last_activity_date": 1574887227, "last_edit_date": 1574887227, "creation_date": 1574865056, "answer_id": 59072450, "question_id": 59072072, "link": "https://stackoverflow.com/questions/59072072/standard-cpp-data-structures-and-pthread-mutex/59072450#59072450", "title": "Standard cpp data structures and pthread mutex?", "body": "<p>Thread library in C++ provides higher level abstractions and other useful synchronization mechanisms, If your compiler supports C++11 or newever C++ standard features, In my opinion you should use  C++11 thread library and experience beauty of RAII when managing shared resources.</p>\n\n<p>I don't have much experience with pthreads, but <code>pthread_mutex</code> has same semantics as <code>std::mutex</code> and to answer your question </p>\n\n<blockquote>\n  <p>Is usage of <code>pthread mutex</code> safe or only the standard library threading infrastructure (like <code>std::mutex</code>) can guarantee proper memory inter thread memory consistency</p>\n</blockquote>\n\n<p>As I mentioned semantically they are same and you can build a locable abstraction (class with <code>try_lock</code>, <code>unlock</code>, <code>lock</code> methods) on top of <code>pthread_mutex</code> easily, it comes down to how you use both, for example </p>\n\n<ul>\n<li>If you are causing data races or not</li>\n<li>If you are using <code>lock_guard</code>,\n<code>unique_lock</code> or not, Because if you don't use RAII in addition to similar problems as in C for resource management,\nC++ statements can throw exception which will cause threads to\ndeadlock if mutex is not unlocked.</li>\n</ul>\n\n<p>Besides this there are bunch of other useful stuff available like <code>std::recursive_mutex</code>, <code>std::shared_mutex</code>, <code>std::future</code>s, <code>std::promise</code>s etc.</p>\n"}], "owner": {"reputation": 8857, "user_id": 3414900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KlvbC.jpg?s=128&g=1", "display_name": "bartop", "link": "https://stackoverflow.com/users/3414900/bartop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 59072450, "answer_count": 1, "score": 0, "last_activity_date": 1574887227, "creation_date": 1574863842, "question_id": 59072072, "link": "https://stackoverflow.com/questions/59072072/standard-cpp-data-structures-and-pthread-mutex", "title": "Standard cpp data structures and pthread mutex?", "body": "<p>In one of the projects I am working on migration from C to C++. A lot of the C code uses pthread and mutex associated with this library for multithreading. I want to perform possibly step by step, incremental migration. I wanted to start with the data structures as they are most obvious but they would need to be synchronized using pthread mutex. Is usage of pthread mutex safe or only the standard library threading infrastructure (like <code>std::mutex</code>) can guarantee proper memory interthread memory consistency?</p>\n"}, {"tags": ["c++", "ruby", "macos", "rubygems"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1574864616, "post_id": 59071881, "comment_id": 104382438, "body": "I&#39;m using Ruby 2.6.5 (as you are) and successfully installed sassc-2.2.1.gem.  I have Xcode 11.2.1 installed."}, {"owner": {"reputation": 5139, "user_id": 954422, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2542652a616dc8d395194890b4f92a0d?s=128&d=identicon&r=PG", "display_name": "viplezer", "link": "https://stackoverflow.com/users/954422/viplezer"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1574864659, "post_id": 59071881, "comment_id": 104382471, "body": "All the same here, I suspect that something got misconfigured on my machine :/"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1574864737, "post_id": 59071881, "comment_id": 104382530, "body": "Something very wrong with your toolchain there. Have you tried reinstalling it?"}, {"owner": {"reputation": 5139, "user_id": 954422, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2542652a616dc8d395194890b4f92a0d?s=128&d=identicon&r=PG", "display_name": "viplezer", "link": "https://stackoverflow.com/users/954422/viplezer"}, "edited": false, "score": 0, "creation_date": 1574865060, "post_id": 59071881, "comment_id": 104382721, "body": "I reinstalled both XCode and Command Line tools, but nothing helped so far"}, {"owner": {"reputation": 5139, "user_id": 954422, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2542652a616dc8d395194890b4f92a0d?s=128&d=identicon&r=PG", "display_name": "viplezer", "link": "https://stackoverflow.com/users/954422/viplezer"}, "edited": false, "score": 0, "creation_date": 1574865180, "post_id": 59071881, "comment_id": 104382802, "body": "I had some strange symlinks in my /usr/local/include folder. I removed all of them and the issue seems to be solved"}], "answers": [{"comments": [{"owner": {"reputation": 4636, "user_id": 340354, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/ee3aedbe2f83c480b993af431c15a5b7?s=128&d=identicon&r=PG", "display_name": "scrrr", "link": "https://stackoverflow.com/users/340354/scrrr"}, "edited": false, "score": 0, "creation_date": 1587163657, "post_id": 59072909, "comment_id": 108411588, "body": "Thank you! This also solves my non-ruby/c++ conan dependency build problems."}], "tags": [], "owner": {"reputation": 5139, "user_id": 954422, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2542652a616dc8d395194890b4f92a0d?s=128&d=identicon&r=PG", "display_name": "viplezer", "link": "https://stackoverflow.com/users/954422/viplezer"}, "is_accepted": true, "score": 5, "last_activity_date": 1574866490, "creation_date": 1574866490, "answer_id": 59072909, "question_id": 59071881, "link": "https://stackoverflow.com/questions/59071881/problems-with-c-and-gems-on-osx-catalina/59072909#59072909", "title": "Problems with C++ and gems on OSX Catalina", "body": "<p>Turned out that I had a bunch of weird symlinks in my <code>/usr/local/include</code> folder.\nI removed the whole folder and reinstalled Homebrew and everything went back to normal again. </p>\n"}, {"comments": [{"owner": {"reputation": 619, "user_id": 4140007, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/12d4f9e02df2e3f94ac8bd1f90894e34?s=128&d=identicon&r=PG&f=1", "display_name": "Valar Morghulis", "link": "https://stackoverflow.com/users/4140007/valar-morghulis"}, "edited": false, "score": 0, "creation_date": 1610770635, "post_id": 63089082, "comment_id": 116243594, "body": "This saved my day, thanks!"}, {"owner": {"reputation": 14220, "user_id": 136598, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/55c76f58f63ba7cbb85658158b3a82f8?s=128&d=identicon&r=PG&f=1", "display_name": "gaefan", "link": "https://stackoverflow.com/users/136598/gaefan"}, "edited": false, "score": 0, "creation_date": 1612965958, "post_id": 63089082, "comment_id": 116930435, "body": "I tried a bunch of things and this worked for me.  Also takes 2 seconds."}, {"owner": {"reputation": 609, "user_id": 2850811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42393f7e26c5503e7fd26debae1de537?s=128&d=identicon&r=PG", "display_name": "micahbf", "link": "https://stackoverflow.com/users/2850811/micahbf"}, "edited": false, "score": 0, "creation_date": 1613409854, "post_id": 63089082, "comment_id": 117061076, "body": "I get: <code>xcode-select: error: invalid developer directory &#39;&#47;Applications&#47;Xcode.app&#39;</code>"}, {"owner": {"reputation": 741, "user_id": 1841680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/285cb297cf41c630884d8399e466c97a?s=128&d=identicon&r=PG", "display_name": "mimsugara", "link": "https://stackoverflow.com/users/1841680/mimsugara"}, "edited": false, "score": 0, "creation_date": 1613836762, "post_id": 63089082, "comment_id": 117201869, "body": "Probably you never installed Xcode?"}], "tags": [], "owner": {"reputation": 741, "user_id": 1841680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/285cb297cf41c630884d8399e466c97a?s=128&d=identicon&r=PG", "display_name": "mimsugara", "link": "https://stackoverflow.com/users/1841680/mimsugara"}, "is_accepted": false, "score": 4, "last_activity_date": 1595684945, "last_edit_date": 1595684945, "creation_date": 1595684636, "answer_id": 63089082, "question_id": 59071881, "link": "https://stackoverflow.com/questions/59071881/problems-with-c-and-gems-on-osx-catalina/63089082#63089082", "title": "Problems with C++ and gems on OSX Catalina", "body": "<p>Found the solution through a <a href=\"https://forums.swift.org/t/is-anyone-else-getting-this-error-when-building-the-compiler-from-master-on-macos/36113/2\" rel=\"nofollow noreferrer\">swift forum</a> it worked with me it seems that somehow the commandline tools got corrupted or just deprecated.</p>\n<p>TL;DR;</p>\n<ol>\n<li>Remove CommandLine Tools directory: <code>sudo rm -rf /Library/Developer/CommandLineTools</code></li>\n<li>Recreate with: <code>sudo xcode-select -s /Applications/Xcode.app</code></li>\n</ol>\n"}], "owner": {"reputation": 5139, "user_id": 954422, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2542652a616dc8d395194890b4f92a0d?s=128&d=identicon&r=PG", "display_name": "viplezer", "link": "https://stackoverflow.com/users/954422/viplezer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1017, "favorite_count": 0, "accepted_answer_id": 59072909, "answer_count": 2, "score": 6, "last_activity_date": 1595684945, "creation_date": 1574863199, "question_id": 59071881, "link": "https://stackoverflow.com/questions/59071881/problems-with-c-and-gems-on-osx-catalina", "title": "Problems with C++ and gems on OSX Catalina", "body": "<p>I am trying to install a new gem with:</p>\n\n<pre><code>gem install sassc\n</code></pre>\n\n<p>But it fails with C++ issues:</p>\n\n<pre><code>current directory: /usr/local/lib/ruby/gems/2.6.0/gems/sassc-2.2.0/ext\n/usr/local/opt/ruby/bin/ruby -I /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0 -r ./siteconf20191127-10955-52fjdl.rb extconf.rb\ncreating Makefile\n\ncurrent directory: /usr/local/lib/ruby/gems/2.6.0/gems/sassc-2.2.0/ext\nmake \"DESTDIR=\" clean\n\ncurrent directory: /usr/local/lib/ruby/gems/2.6.0/gems/sassc-2.2.0/ext\nmake \"DESTDIR=\"\ncompiling ./libsass/src/units.cpp\nIn file included from ./libsass/src/units.cpp:3:\nIn file included from ./libsass/src/units.hpp:4:\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:314:9: error: no member named 'signbit' in the global namespace\nusing ::signbit;\n      ~~^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:315:9: error: no member named 'fpclassify' in the global namespace\nusing ::fpclassify;\n      ~~^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:316:9: error: no member named 'isfinite' in the global namespace; did you mean 'finite'?\nusing ::isfinite;\n      ~~^\n/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/math.h:749:12: note: 'finite' declared here\nextern int finite(double)\n           ^\nIn file included from ./libsass/src/units.cpp:3:\nIn file included from ./libsass/src/units.hpp:4:\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:317:9: error: no member named 'isinf' in the global namespace\nusing ::isinf;\n      ~~^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:318:9: error: no member named 'isnan' in the global namespace\nusing ::isnan;\n      ~~^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:319:9: error: no member named 'isnormal' in the global namespace\nusing ::isnormal;\n      ~~^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:320:7: error: no member named 'isgreater' in the global namespace; did you mean '::std::greater'?\nusing ::isgreater;\n      ^~\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/functional:728:29: note: '::std::greater' declared here\nstruct _LIBCPP_TEMPLATE_VIS greater : binary_function&lt;_Tp, _Tp, bool&gt;\n                            ^\nIn file included from ./libsass/src/units.cpp:3:\nIn file included from ./libsass/src/units.hpp:4:\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:321:7: error: no member named 'isgreaterequal' in the global namespace; did you mean '::std::greater_equal'?\nusing ::isgreaterequal;\n      ^~\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/functional:757:29: note: '::std::greater_equal' declared here\nstruct _LIBCPP_TEMPLATE_VIS greater_equal : binary_function&lt;_Tp, _Tp, bool&gt;\n                            ^\nIn file included from ./libsass/src/units.cpp:3:\nIn file included from ./libsass/src/units.hpp:4:\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:322:9: error: no member named 'isless' in the global namespace\nusing ::isless;\n      ~~^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:323:9: error: no member named 'islessequal' in the global namespace\nusing ::islessequal;\n      ~~^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:324:9: error: no member named 'islessgreater' in the global namespace\nusing ::islessgreater;\n      ~~^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:325:9: error: no member named 'isunordered' in the global namespace\nusing ::isunordered;\n      ~~^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:326:9: error: no member named 'isunordered' in the global namespace\nusing ::isunordered;\n      ~~^\n13 errors generated.\nmake: *** [units.o] Error 1\n\nmake failed, exit code 2\n</code></pre>\n\n<p>I've tried everything I found on SO but nothing helped so far</p>\n"}, {"tags": ["c++", "bit-manipulation"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 3, "creation_date": 1574862871, "post_id": 59071750, "comment_id": 104381375, "body": "Unsigned cannot be negative, so not sure what you mean by &quot;correct result&quot;"}, {"owner": {"reputation": 446, "user_id": 10224443, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xUCwH.jpg?s=128&g=1", "display_name": "urbanSoft", "link": "https://stackoverflow.com/users/10224443/urbansoft"}, "edited": false, "score": 0, "creation_date": 1574862880, "post_id": 59071750, "comment_id": 104381381, "body": "This is because the <a href=\"https://en.wikipedia.org/wiki/Two%27s_complement\" rel=\"nofollow noreferrer\">Two&#39;s complement</a> is used to represent negative numbers."}, {"owner": {"reputation": 4691, "user_id": 12345656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8bf964ac051a25737d03906e89e2b36?s=128&d=identicon&r=PG&f=1", "display_name": "n314159", "link": "https://stackoverflow.com/users/12345656/n314159"}, "edited": false, "score": 4, "creation_date": 1574862961, "post_id": 59071750, "comment_id": 104381424, "body": "Use <code>|</code> instead of <code>+</code>. Then the higher 16 bit are exactly the bits of <code>high</code> and the lower those of <code>low</code>. You can get those back by shifting left by 16 for <code>high</code> and by left and right shifting for <code>low</code>. Note that, arithmetically the resulting number has not a direct correspondence to the input. It works for storing those two in 32 bit. If you want a special combination of those two you have to do something different depending on the result you want."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 4691, "user_id": 12345656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8bf964ac051a25737d03906e89e2b36?s=128&d=identicon&r=PG&f=1", "display_name": "n314159", "link": "https://stackoverflow.com/users/12345656/n314159"}, "edited": false, "score": 2, "creation_date": 1574863060, "post_id": 59071750, "comment_id": 104381491, "body": "@n314159 in this context replacing <code>+</code> with <code>|</code> will not change anything at all"}, {"owner": {"reputation": 4691, "user_id": 12345656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8bf964ac051a25737d03906e89e2b36?s=128&d=identicon&r=PG&f=1", "display_name": "n314159", "link": "https://stackoverflow.com/users/12345656/n314159"}, "edited": false, "score": 0, "creation_date": 1574863491, "post_id": 59071750, "comment_id": 104381753, "body": "Ah, yes sry, you have to get rid of the 1s that potentially are in front of the casted <code>low</code>. Not sure if shifting or and&#39;ing is the easier solution. But conceptually, this should work, since the last 16 bit of the <code>int32_t</code> are the bits of the input <code>int16_t</code>, or am I mistaken?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 6, "creation_date": 1574863655, "post_id": 59071750, "comment_id": 104381857, "body": "What do you expect from <code>combined(-1, -42)</code> then?"}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1574863875, "post_id": 59071750, "comment_id": 104381986, "body": "Please provide examples of input number pairs and desired &quot;correct&quot; result. Start with the one by Jarod42. Provide examples of positive/positive, positive/negative, negative/positive, negative/negative. Combine with low values and high values (i.e. close to 16bit maximum value and close to 0); for a total of 16 different pairs. Making those examples might help you find the solution yourself."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1574864555, "post_id": 59071750, "comment_id": 104382398, "body": "Depends what you want it to do........"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 1, "creation_date": 1574865149, "post_id": 59071750, "comment_id": 104382774, "body": "I do not understand question for me this code woks as expected: <a href=\"https://wandbox.org/permlink/QwU03dSdndhgciyM\" rel=\"nofollow noreferrer\">wandbox.org/permlink/QwU03dSdndhgciyM</a>"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1574865277, "post_id": 59071750, "comment_id": 104382863, "body": "Could it be that your original function parameters are <i>signed</i> 16-bit integers? If so, then just cast them to <i>unsigned</i> 16-bit integers <i>before</i> casting them to unsigned 32-bit ones to get around sign extension."}, {"owner": {"reputation": 33, "user_id": 10023119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OjXRTsaJVlE/AAAAAAAAAAI/AAAAAAAAFcA/GCH529Tw0jQ/photo.jpg?sz=128", "display_name": "SoraPro", "link": "https://stackoverflow.com/users/10023119/sorapro"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1574877736, "post_id": 59071750, "comment_id": 104389452, "body": "@Aconcagua Good guess, that was the issue all along."}], "answers": [{"comments": [{"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 2, "creation_date": 1574864039, "post_id": 59072086, "comment_id": 104382088, "body": "what is the purpose of <code>&amp; 0xFFFF</code> when you used unsigned types?"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 1, "creation_date": 1574865224, "post_id": 59072086, "comment_id": 104382829, "body": "Ok look like OP question is confusing, since his code just works as expected: <a href=\"https://wandbox.org/permlink/QwU03dSdndhgciyM\" rel=\"nofollow noreferrer\">wandbox.org/permlink/QwU03dSdndhgciyM</a>"}, {"owner": {"reputation": 1073, "user_id": 10794806, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GKvpJsipy5o/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hXsT0KoMOXyLso6Ie2mfwllaD7zQ/mo/photo.jpg?sz=128", "display_name": "Gaurav Dhiman", "link": "https://stackoverflow.com/users/10794806/gaurav-dhiman"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1574866218, "post_id": 59072086, "comment_id": 104383421, "body": "@MarekR i think <code>0xFFFF</code> mask is used to select lower 16 bits only and to discard remaining bits, however OP&#39;s question is absurd as this point."}], "tags": [], "owner": {"reputation": 1925, "user_id": 2865757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dcfe7782349d59e50b1fa196f9c6669?s=128&d=identicon&r=PG&f=1", "display_name": "Zefick", "link": "https://stackoverflow.com/users/2865757/zefick"}, "is_accepted": false, "score": 1, "last_activity_date": 1574864284, "last_edit_date": 1574864284, "creation_date": 1574863894, "answer_id": 59072086, "question_id": 59071750, "link": "https://stackoverflow.com/questions/59071750/how-can-i-combine-two-16-bit-values-into-a-single-32-bit-value-when-either-one-i/59072086#59072086", "title": "How can I combine two 16-bit values into a single 32-bit value when either one is negative?", "body": "<p>Does this do what you need:</p>\n\n<pre><code>uint32_t combined(uint16_t low, uint16_t high) {\n    return (static_cast&lt;uint32_t&gt;(high) &lt;&lt; 16) | ((static_cast&lt;uint32_t&gt;(low)) &amp; 0xFFFF);\n}\n</code></pre>\n\n<p>As I understand, leading 1s after converting negative number to <code>int</code> make a problem. They can are removed by <code>... &amp; 0xFFFF</code>.</p>\n\n<p><code>&amp;</code> is bitwice <code>and</code> operation. <code>0xFFFF</code> is the same as <code>0x0000FFFF</code> but shorter and <code>a &amp; 0xFFFF</code> means \"make first (high) 16 bit of <code>a</code> 0s and leave the rest as it is\".</p>\n"}, {"comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1574878380, "post_id": 59076037, "comment_id": 104389720, "body": "I&#39;m a bit puzzled about your expectations... <code>combined(-1, -1)</code> results in <code>0xfffeffff</code>. My expectations would have been <code>0xffffffff</code> instead. Or similarly, <code>combined(-1, 1)</code> gives <code>0x0000ffff</code>, while I&#39;d have expected <code>0x0001ffff</code>"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1574879146, "post_id": 59076037, "comment_id": 104390078, "body": "Well, you still get a bijection that way. Actually, you add -1 to high, if low is negative. Hopefully, you have considered this when calculating back the two original values..."}], "tags": [], "owner": {"reputation": 33, "user_id": 10023119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OjXRTsaJVlE/AAAAAAAAAAI/AAAAAAAAFcA/GCH529Tw0jQ/photo.jpg?sz=128", "display_name": "SoraPro", "link": "https://stackoverflow.com/users/10023119/sorapro"}, "is_accepted": false, "score": 0, "last_activity_date": 1574877671, "creation_date": 1574877671, "answer_id": 59076037, "question_id": 59071750, "link": "https://stackoverflow.com/questions/59071750/how-can-i-combine-two-16-bit-values-into-a-single-32-bit-value-when-either-one-i/59076037#59076037", "title": "How can I combine two 16-bit values into a single 32-bit value when either one is negative?", "body": "<p>It turns out the logic in the OP was fine but the data types I chose to use were incorrect based on my inputs (I realized this after slava's first reply). Below is the updated function:</p>\n\n<pre><code>int32_t combined(int16_t low, int16_t high)\n{\n  return (static_cast&lt;uint32_t&gt;(high) &lt;&lt; 16) + static_cast&lt;uint32_t&gt;(low);\n}\n</code></pre>\n\n<p>This now works as expected. </p>\n"}], "owner": {"reputation": 33, "user_id": 10023119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OjXRTsaJVlE/AAAAAAAAAAI/AAAAAAAAFcA/GCH529Tw0jQ/photo.jpg?sz=128", "display_name": "SoraPro", "link": "https://stackoverflow.com/users/10023119/sorapro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 602, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1574877671, "creation_date": 1574862735, "question_id": 59071750, "link": "https://stackoverflow.com/questions/59071750/how-can-i-combine-two-16-bit-values-into-a-single-32-bit-value-when-either-one-i", "title": "How can I combine two 16-bit values into a single 32-bit value when either one is negative?", "body": "<p>I have found several threads on Stack Overflow demonstrating how to combine two 16-bit values into a 32-bit value when both operands are positive numbers but I have come to discover these do not work if either operand is negative. </p>\n\n<p>Here is what I am currently working with:</p>\n\n<pre><code>uint32_t combined(uint16_t low, uint16_t high)\n{\n  return (static_cast&lt;uint32_t&gt;(high) &lt;&lt; 16) + static_cast&lt;uint32_t&gt;(low);\n}\n</code></pre>\n\n<p>This returns the correct value only when <code>high</code> and <code>low</code> are positive. How can I modify this function to return the correct result when one or both arguments are negative?</p>\n"}, {"tags": ["c++", "vector", "allocation"], "comments": [{"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1574862473, "post_id": 59071549, "comment_id": 104381130, "body": "Usually &quot;Whenever a reference is bound to a temporary or to a subobject thereof, the lifetime of the temporary is extended to match the lifetime of the reference&quot;. Please see: <a href=\"https://en.cppreference.com/w/cpp/language/reference_initialization\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/reference_initialization</a> ."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 1, "creation_date": 1574864790, "post_id": 59071549, "comment_id": 104382571, "body": "@vahancho Be very careful with your use of the term &quot;usually&quot; there. In fact, the number of times it doesn&#39;t happen outweighs the number of times that it does."}], "answers": [{"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 3, "last_activity_date": 1574862571, "creation_date": 1574862571, "answer_id": 59071702, "question_id": 59071549, "link": "https://stackoverflow.com/questions/59071549/can-i-keep-vector-data-even-after-out-of-scope/59071702#59071702", "title": "Can I keep vector data even after out of scope", "body": "<p>A pointer to an array on the stack will not keep the array alive, I suppose thats the same in C. Now a vector is not an array. It is a wrapper around a heap allocated array which frees the memory of the array when it goes out of scope. </p>\n\n<blockquote>\n  <p>... because a pointer to it is still saved it will still be kept?</p>\n</blockquote>\n\n<p>No! A pointer or reference to a <code>std::vector</code> will not keep the vector alive. The canonical wrong example is:</p>\n\n<pre><code>std::vector&lt;T&gt;&amp; foo() {\n    std::vector&lt;T&gt; x;\n    return x;\n}                      // baaam !\n</code></pre>\n\n<p>The reference returned from the function is dangling. YOu cannot do anything with it. The correct way would be to return by value and rely on return value optimization:</p>\n\n<pre><code>std::vector&lt;T&gt; foo() {\n    std::vector&lt;T&gt; x;\n    return x;\n}\n</code></pre>\n\n<p>If you do:</p>\n\n<pre><code>auto y = foo();\n</code></pre>\n\n<p>No copying is involved, thanks to NRVO.</p>\n\n<p>PS: Compilers should warn you about returning a reference to a local variable. </p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 7230475, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154561575736014/picture?type=large", "display_name": "Shadi Iskander", "link": "https://stackoverflow.com/users/7230475/shadi-iskander"}, "edited": false, "score": 0, "creation_date": 1574862988, "post_id": 59071742, "comment_id": 104381443, "body": "THanks.. that answers my question.. in C I also dont really allocate the array itself, but shared memory and use the array syntax to access it. This can be done then via std::shared_ptr&lt;std::vector&lt;...&gt;&gt; I assume"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1574863716, "post_id": 59071742, "comment_id": 104381892, "body": "Side note: <i>&#39;method&#39;</i> is Java terminology, C++ doesn&#39;t know that term..."}, {"owner": {"reputation": 8101, "user_id": 9199167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BqdLV.jpg?s=128&g=1", "display_name": "Max Vollmer", "link": "https://stackoverflow.com/users/9199167/max-vollmer"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1574864056, "post_id": 59071742, "comment_id": 104382096, "body": "@Aconcagua Thanks! My pesky Java past gets me everytime ^^"}], "tags": [], "owner": {"reputation": 8101, "user_id": 9199167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BqdLV.jpg?s=128&g=1", "display_name": "Max Vollmer", "link": "https://stackoverflow.com/users/9199167/max-vollmer"}, "is_accepted": true, "score": 4, "last_activity_date": 1574864032, "last_edit_date": 1574864032, "creation_date": 1574862708, "answer_id": 59071742, "question_id": 59071549, "link": "https://stackoverflow.com/questions/59071549/can-i-keep-vector-data-even-after-out-of-scope/59071742#59071742", "title": "Can I keep vector data even after out of scope", "body": "<p><code>std::vector</code> frees the memory it holds when it is destroyed. Holding a reference to an object that gets destroyed is very bad. Accessing it is UB. General rule: Do not store references, only use them where you can be sure that the object exists for the entire scope, e.g. as parameter of a function.</p>\n\n<p>If you want to keep a <em>copy</em> of the data, simply copy the <code>std::vector</code>. No reference needed.</p>\n\n<p>If you want to be able to access the data from different locations, and have it live as long as at least one location still has a reference/pointer to it, don't use <code>std::vector</code>, use <code>std::shared_ptr</code>.</p>\n\n<p>If you want to combine the benefits of <code>std::vector</code> with the benefits of shared memory that lives until the last place lets go of it, combine them: <code>std::shared_ptr&lt;std::vector&lt;...&gt;&gt;</code>.</p>\n\n<p>If you want to have the <code>std::vector</code> live in one place for a bit, and then live in another place but not in the first place anymore, use <em>move semantics</em>:</p>\n\n<pre><code>std::vector&lt;int&gt; foo = {1, 2, 3};\nstd::vector&lt;int&gt; bar = std::move(foo); // bar now holds the data that foo held, foo is empty, no copy was performed\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 1, "last_activity_date": 1574864907, "creation_date": 1574864907, "answer_id": 59072388, "question_id": 59071549, "link": "https://stackoverflow.com/questions/59071549/can-i-keep-vector-data-even-after-out-of-scope/59072388#59072388", "title": "Can I keep vector data even after out of scope", "body": "<blockquote>\n  <p>No if I do the same with vectors, I initialize a vector, pass it by reference, then keep the reference saved somewhere. After the initial method that actually created the vector goes out of scope, would it be destoryed?</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<blockquote>\n  <p>or because a pointer to it is still saved it will still be kept?</p>\n</blockquote>\n\n<p>No.</p>\n\n<hr>\n\n<p>You can have dangling pointers in C++ just like you can in C. It's exactly the same.</p>\n\n<p>This is also often the case for references (though in some cases the lifetime of the object is extended for a little bit).</p>\n\n<p>It is true that the vector's <em>data</em> is internally managed by the vector, but that's by-the-by since you're asking about the vector itself. Forget the vector and ask the same question about an <code>int</code>, then you'll realise the answer is just as you'd expect it to be in C.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12447080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1738e76b28e9051faad1d2fc18c59e22?s=128&d=identicon&r=PG&f=1", "display_name": "atabb", "link": "https://stackoverflow.com/users/12447080/atabb"}, "is_accepted": false, "score": 0, "last_activity_date": 1574872549, "creation_date": 1574872549, "answer_id": 59074733, "question_id": 59071549, "link": "https://stackoverflow.com/questions/59071549/can-i-keep-vector-data-even-after-out-of-scope/59074733#59074733", "title": "Can I keep vector data even after out of scope", "body": "<p>The existing answers are good, will add here:</p>\n\n<pre><code>block A\n{\nvector&lt;int&gt; my_vec(10, 0);\n//...something...\n}\nblock B\n</code></pre>\n\n<p>The my_vec vector will go out of scope and be destroyed at the closing bracket.  Now that's stl (Standard Template Library) vectors.</p>\n\n<p>You can also use C-style arrays (but with different syntax).  For very large arrays, I have found the allocation time with a dynamically-allocated array to be faster than STL vectors.  </p>\n\n<pre><code>//static, goes out of scope and memory handled at the end of code block\nint arr0[10];\n\n//dynamic, not destroyed unless delete called.\nint* arr1 = new int[10];\n//...work with arr1...\ndelete [] arr1;\n</code></pre>\n\n<p>Just like in C, you need to take care of de-allocating any memory you create using <code>new</code>.  </p>\n"}], "owner": {"reputation": 37, "user_id": 7230475, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154561575736014/picture?type=large", "display_name": "Shadi Iskander", "link": "https://stackoverflow.com/users/7230475/shadi-iskander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 739, "favorite_count": 0, "accepted_answer_id": 59071742, "answer_count": 4, "score": 1, "last_activity_date": 1574872549, "creation_date": 1574862042, "last_edit_date": 1574865137, "question_id": 59071549, "link": "https://stackoverflow.com/questions/59071549/can-i-keep-vector-data-even-after-out-of-scope", "title": "Can I keep vector data even after out of scope", "body": "<p>I come from a C background. I used to allocate memory/array, for example, sending it to somewhere else, and the pointer stayed there, even after, the scope where it was allocated was destroyed.</p>\n\n<p>Now, if I do the same with vectors : initialize, pass it by reference, and then keep that reference saved somewhere. After the initial method, that actually created the vector, goes out of scope, would it be destroyed ? Or as the pointer to it is still saved, it will be kept.</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 5, "creation_date": 1574861317, "post_id": 59071283, "comment_id": 104380474, "body": "In the specific case of <code>basic_string</code>, that&#39;s just <code>typename str::CharT</code>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1574861337, "post_id": 59071283, "comment_id": 104380491, "body": "Using <code>typeof</code> or <code>typeid</code> or other such techniques to select between functionality is often a sign of bad design. Can&#39;t you use overloading or template specialization instead? Or as mentioned, the <code>CharT</code> type of the string itself?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1574863326, "post_id": 59071283, "comment_id": 104381642, "body": "its not the &quot;base&quot; type, but a template parameter. And <code>std::unsigned string</code> is <code>std::basic_string&lt;unsigned char&gt;</code> ?"}, {"owner": {"reputation": 48092, "user_id": 136208, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a30f566f1b7c9ae44cf245138850ba4?s=128&d=identicon&r=PG", "display_name": "AProgrammer", "link": "https://stackoverflow.com/users/136208/aprogrammer"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1574864825, "post_id": 59071283, "comment_id": 104382594, "body": "@Quentin: <code>value_type</code> not <code>CharT</code>."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1100264"}, "edited": false, "score": 0, "creation_date": 1574866705, "post_id": 59071402, "comment_id": 104383717, "body": "That worked to declare a char/uchar. What if I also need to declare a string/ustring?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1574866902, "post_id": 59071402, "comment_id": 104383842, "body": "@Johnny declare <code>std::basic_string&lt;Chr&gt;</code>."}], "tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": true, "score": 7, "last_activity_date": 1574863442, "last_edit_date": 1574863442, "creation_date": 1574861534, "answer_id": 59071402, "question_id": 59071283, "link": "https://stackoverflow.com/questions/59071283/deducing-the-base-type-from-a-template-parameter/59071402#59071402", "title": "Deducing the base type from a template parameter", "body": "<p>If you only want <code>std::basic_string</code> parameterised by different character types, say so:</p>\n\n<pre><code>template &lt;typename Chr&gt;\nvoid exampleFunc(std::vector&lt;std::basic_string&lt;Chr&gt;&gt; &amp;vec) ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "is_accepted": false, "score": 0, "last_activity_date": 1574861704, "creation_date": 1574861704, "answer_id": 59071457, "question_id": 59071283, "link": "https://stackoverflow.com/questions/59071283/deducing-the-base-type-from-a-template-parameter/59071457#59071457", "title": "Deducing the base type from a template parameter", "body": "<p>What if you write it like:</p>\n\n<pre><code>template &lt;typename str&gt;\nvoid exampleFunc(std::vector&lt;str&gt; &amp;vec)\n{\n  if constexpr (std::is_base_of&lt;str, std::string&gt;::value)\n  {\n    char c;\n    // ...\n  }\n  else\n  {\n    // ...\n  }\n  // ... code ...\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1100264"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 59071402, "answer_count": 2, "score": 1, "last_activity_date": 1574863442, "creation_date": 1574861183, "last_edit_date": 1574863369, "question_id": 59071283, "link": "https://stackoverflow.com/questions/59071283/deducing-the-base-type-from-a-template-parameter", "title": "Deducing the base type from a template parameter", "body": "<p>Visual Studio 2017, C++ with C++17</p>\n\n<p>Is there any way to use a template parameter and deduce the base type?</p>\n\n<p>Example: If the template parameter is <code>std::string</code> I want to declare a <code>char</code> inside the function.\nIf the template parameter is <code>std::basic_string&lt;unsigned char&gt;</code> I want to declare an <code>unsigned char</code> inside the function:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;typeinfo&gt;\n\nusing namespace std;\n\ntypedef unsigned char uchar;\ntypedef basic_string&lt;uchar&gt; ustring;\n\ntemplate &lt;typename str&gt;\nvoid exampleFunc(vector&lt;str&gt; &amp;vec)\n{\n    // Pseudo-code to be evaluated at ***compile time***\n    if (typeof(str) == ustring)\n        uchar c;\n    if (typeof(str) == string)\n        char c;\n\n    // ... code ...\n}\nint main()\n{\n    vector&lt;string&gt; vec;\n    vector&lt;ustring&gt; uvec;\n\n    exampleFunc(vec);\n    exampleFunc(uvec);\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "dll"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 3, "creation_date": 1574861273, "post_id": 59071228, "comment_id": 104380453, "body": "Dependency walker does not work correctly with windows 10. <a href=\"https://stackoverflow.com/questions/33604738/dependency-walker-with-kernel32-dll-on-windows-10\">https://stackoverflow.com/questions/33604738/dependency-walk&zwnj;&#8203;er-with-kernel32-dll&zwnj;&#8203;-on-windows-10</a>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1574861364, "post_id": 59071228, "comment_id": 104380505, "body": "I recommend using vcpkg for this. It has opencv and works with Visual Studio 2019."}, {"owner": {"reputation": 331, "user_id": 7183609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ebef960068dd428fcecfc845e0b8911?s=128&d=identicon&r=PG&f=1", "display_name": "wes", "link": "https://stackoverflow.com/users/7183609/wes"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1574862388, "post_id": 59071228, "comment_id": 104381072, "body": "@drescherjm thank you, I will check it out now"}], "answers": [{"tags": [], "owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "is_accepted": false, "score": 0, "last_activity_date": 1574864754, "last_edit_date": 1574864754, "creation_date": 1574863933, "answer_id": 59072099, "question_id": 59071228, "link": "https://stackoverflow.com/questions/59071228/opencv-x86-missing-a-few-hunderd-dlls/59072099#59072099", "title": "OpenCV x86 missing a few hunderd DLL&#39;s", "body": "<p>Next to the <code>lib</code> directory, there should be a <code>bin</code> directory that contains the OpenCV DLLs. As already mentioned in the comments, the Dependency Walker build found on the official website does, unfortunately, not work correctly on Windows 10. The missing DLLs it reports are not going to be accurate.</p>\n\n<p>There are multiple ways to get more info on an error 0xc000007b. First of all, the error should show up in the <a href=\"https://en.wikipedia.org/wiki/Event_Viewer\" rel=\"nofollow noreferrer\">Windows event log</a> as a System event where clicking on it should reveal some additional detail on what exactly failed to load. Apart from that, there is a flag you can set to turn on \"loader snaps\". The presence of this flag will make the Windows loader print debug output on what exactly is going on during the loading process. More on that <a href=\"https://blogs.msdn.microsoft.com/junfeng/2006/11/20/debugging-loadlibrary-failures/\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>When you start your application, a process has to be created for it to run in. Creating a process requires that the Windows loader map your .exe as well as any DLLs it might need into the process' address space. DLLs are generally referred to in an .exe by name, not by full path. The Windows loader will follow <a href=\"https://docs.microsoft.com/en-us/windows/win32/dlls/dynamic-link-library-search-order#search-order-for-desktop-applications\" rel=\"nofollow noreferrer\">a quite elaborate search process</a> in order to locate the DLL that is to be used by your process. The <code>bin</code> directory next to your <code>lib</code> directory will not be one of the directories searched by the Windows loader unless specifically instructed to do so.</p>\n\n<p>By default, the first directory in which the loader will look for a DLL is the directory that contains the binary that is currently being loaded. The loader also looks in the directories listed in the <code>PATH</code> environment variable. Two common ways to solve this problem are to either copy all the necessary DLLs into the directory where .exe file lives, or to add the directory that contains the DLLs to the <code>PATH</code> environment variable&hellip;</p>\n"}], "owner": {"reputation": 331, "user_id": 7183609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ebef960068dd428fcecfc845e0b8911?s=128&d=identicon&r=PG&f=1", "display_name": "wes", "link": "https://stackoverflow.com/users/7183609/wes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 216, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1574864754, "creation_date": 1574861011, "question_id": 59071228, "link": "https://stackoverflow.com/questions/59071228/opencv-x86-missing-a-few-hunderd-dlls", "title": "OpenCV x86 missing a few hunderd DLL&#39;s", "body": "<p>I'm making an application in C++ where I need to use OpenCV x86. I use OpenCV 4.1.2, which I compiled and build my self by using CMake and visual studio 2019. During the configure/generation of the OpenCV files, I did not use the extra modules in <code>opencv_contrib</code> as this resulted in large amounts of errors during the build of OpenCV x86. When I run OpenCV x64 (did not need to build this my self) I do not get any errors, but I do need to make this application is x86.</p>\n\n<p>I have added the include and lib path into the vs 2019 C++ solution, and I have added the OpenCV_world412d.lib file. When I build the application, I do not receive any errors, but when I run the application, I get the following error: <code>The application was unable to start correctly (0xc000007b).</code> I downloaded dependency walker, and to my surprise, I'm missing hundreds of DLLs according to dependency walker (500 different DLLs).</p>\n\n<p>Of course, it's not feasible to show all the DLLs I'm missing here, but there are two big categories and a few lone DLLs that I'm missing. See the list below.</p>\n\n<ul>\n<li>API-ms-win -*</li>\n<li>DMENTERPRISEDIAGNOSTICS.DLL</li>\n<li>EFSCORE.DLL</li>\n<li>EMCLIENT.DLL</li>\n<li>EXT-MS-*</li>\n<li>IESHIMS.DLL</li>\n<li>NGCRECOVERY.DLL</li>\n<li>WFDSCONMGR.DLL</li>\n<li>WPAXHOLDER.DLL</li>\n</ul>\n\n<p>To see the full list of DLLs I'm missing, please find them here: <a href=\"https://gist.github.com/wsvdyk/8487a12129818c04bdd354d4701deb2b\" rel=\"nofollow noreferrer\">GitHub Gist</a></p>\n\n<p>This is the code that I use to test out OpenCV</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;opencv2/opencv.hpp&gt;\n\nusing namespace cv;\n\nint main()\n{\n    Mat image = Mat::zeros(300, 600, CV_8UC3);\n    circle(image, Point(250, 150), 100, Scalar(0, 255, 128), -100);\n    circle(image, Point(350, 150), 100, Scalar(255, 255, 255), -100);\n    imshow(\"Display Window\", image);\n    waitKey(0);\n    return 0;\n}\n</code></pre>\n\n<p>Not sure if this is relevant to this issue. I'm using a Windows 10 64bit laptop to create the application and run dependency walker.</p>\n\n<p>I hope I have given enough information about this issue, if not please say so.</p>\n"}, {"tags": ["c++", "debugging", "segmentation-fault", "clion"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1574859198, "post_id": 59070673, "comment_id": 104379299, "body": "You have plenty of memory leaks with the code you show, but nothing that could lead to a crash. If you used the debugger in CLion, where in your code does it tell you the crash happens?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1574863010, "post_id": 59070673, "comment_id": 104381464, "body": "<i>It works correctly when I run the program, but during the debug I get a SIGSEGV Signal (Segmentation Fault) in one of the methods.</i> -- Which means that it doesn&#39;t work correctly.  Also, we have no idea where, when, or how this code is called, we have no idea the value of <code>rows</code> or <code>cols</code>, etc.  Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 1212, "user_id": 1587755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6bfa53480be2aca93ac528eda21a7d3?s=128&d=identicon&r=PG", "display_name": "Taekahn", "link": "https://stackoverflow.com/users/1587755/taekahn"}, "edited": false, "score": 0, "creation_date": 1574869830, "post_id": 59070673, "comment_id": 104385422, "body": "I&#39;ve actually had clion crash in debug mode on allocation as well. Try. Debugging from the command line. If it works (it did for me) its clion."}], "answers": [{"tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": true, "score": 1, "last_activity_date": 1574859677, "last_edit_date": 1574859677, "creation_date": 1574859291, "answer_id": 59070737, "question_id": 59070673, "link": "https://stackoverflow.com/questions/59070673/program-received-segmentation-fault-while-debug-in-clion/59070737#59070737", "title": "Program received Segmentation fault while debug in CLion", "body": "<p>No need for this nested loop. You only need one loop to allocate memory for this jagged array:</p>\n\n<pre><code>int main() {\n    int rows = 5, cols = 10;\n    double **newTable;\n    newTable = new double *[rows];\n    for (int i = 0; i &lt; rows; ++i) \n        newTable[i] = new double[cols];\n\n    for (int i = 0; i &lt; rows; ++i)\n        delete newTable[i];\n    delete newTable;\n}\n</code></pre>\n\n<p>The way your code is now it will leak memory, but that alone won't cause a segmentation fault. There might be a mistake with how you're freeing the memory, too.</p>\n\n<hr>\n\n<p>Also, since this is C++, may I recommend using <code>std::vector</code> instead?</p>\n\n<pre><code>#include &lt;vector&gt;\nint main() {\n    std::vector&lt;std::vector&lt;double&gt;&gt; newTable(5, std::vector&lt;double&gt;(10));\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 12424762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79e51442c3f658e6a1a72c877de9b0ed?s=128&d=identicon&r=PG&f=1", "display_name": "ilyashn", "link": "https://stackoverflow.com/users/12424762/ilyashn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1384, "favorite_count": 0, "accepted_answer_id": 59070737, "answer_count": 1, "score": 1, "last_activity_date": 1574865413, "creation_date": 1574859089, "last_edit_date": 1574865413, "question_id": 59070673, "link": "https://stackoverflow.com/questions/59070673/program-received-segmentation-fault-while-debug-in-clion", "title": "Program received Segmentation fault while debug in CLion", "body": "<p>I have the challenge to implement simplex-method (or simplex algorithm). Simplex-method is a popular algorithm for linear programming which is based on rebuilding matrices. My program should return an optimal solution. I have a C++ project in Clion. It works correctly when I run the program, but during the debug I get a SIGSEGV Signal (Segmentation Fault) in one of the methods. It happens when I try to allocate memory for the matrix. Here is the part of code:   </p>\n\n<pre><code>double **newTable;\n    newTable = new double *[rows];\n    for (int i = 0; i &lt; rows; ++i) {\n        for (int j = 0; j &lt; cols; ++j) {\n            newTable[i] = new double [cols];\n        }\n    }\n</code></pre>\n\n<p>I free the memory at the end of the method using delete[], but it doesn\u2019t work. \nI\u2019ve already tried to run the program in another IDE (CodeBlocks), but it works properly too, and I have no idea why it happens and where the problem occurs. </p>\n"}]