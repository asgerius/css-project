[{"tags": ["c++", "cmake", "compilation", "fedora"], "answers": [{"tags": [], "owner": {"reputation": 650, "user_id": 2821567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7c236cc7222b5646f94e05c7c8fe985?s=128&d=identicon&r=PG", "display_name": "stellarhopper", "link": "https://stackoverflow.com/users/2821567/stellarhopper"}, "is_accepted": false, "score": 0, "last_activity_date": 1544565515, "creation_date": 1544565515, "answer_id": 53732950, "question_id": 53642640, "link": "https://stackoverflow.com/questions/53642640/undefined-reference-to-uuid-generateuuid-1-0/53732950#53732950", "title": "undefined reference to `uuid_generate@UUID_1.0&#39;", "body": "<p>You must've uninstalled libuuid-devel, try reinstalling it:</p>\n\n<pre><code>dnf install libuuid-devel\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10752066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e20fcf401189a18c0a2fac20ba704979?s=128&d=identicon&r=PG&f=1", "display_name": "Argo", "link": "https://stackoverflow.com/users/10752066/argo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2887, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1544565515, "creation_date": 1544054366, "question_id": 53642640, "link": "https://stackoverflow.com/questions/53642640/undefined-reference-to-uuid-generateuuid-1-0", "title": "undefined reference to `uuid_generate@UUID_1.0&#39;", "body": "<p>I'm working on a git project (c++), until this afternoon, everything was fine. I could compile without any problem. (I should point out that I work under Fedora 29) A major change in cmake took place earlier. My version of cmake that I was using was then apparently no longer sufficient. So I had to update my cmake (something I had never done before, and apparently I had to do wrong.... First, I made:</p>\n\n<pre><code>sudo dnf remove cmake\n</code></pre>\n\n<p>Then I installed the latest version of cmake directly for download on the official website <a href=\"https://cmake.org/download/\" rel=\"nofollow noreferrer\">https://cmake.org/download/</a> (3.13.1)</p>\n\n<p>Okay, the installation apparently went well. cmake 3.13.1 works...</p>\n\n<p>Now I'm trying to recompile the project and then this error appears</p>\n\n<pre><code>/usr/bin/ld: //usr/lib64/libSM.so.6: undefined reference to `uuid_generate@UUID_1.0'\n/usr/bin/ld: //usr/lib64/libSM.so.6: undefined reference to `uuid_unparse_lower@UUID_1.0'\n</code></pre>\n\n<p>Here, is the more complete error:</p>\n\n<pre><code> [ 69%] Linking CXX executable ../../../../../Build/bin/DecimaterGui\n/usr/bin/ld: //usr/lib64/libSM.so.6: undefined reference to `uuid_generate@UUID_1.0'\n/usr/bin/ld: //usr/lib64/libSM.so.6: undefined reference to `uuid_unparse_lower@UUID_1.0'\ncollect2: error: ld a retourn\u00e9 le statut de sortie 1\nmake[5]: *** [src/OpenMesh/Apps/Decimating/DecimaterGui/CMakeFiles/DecimaterGui.dir/build.make:192: Build/bin/DecimaterGui] Error 1\nmake[4]: *** [CMakeFiles/Makefile2:814: src/OpenMesh/Apps/Decimating/DecimaterGui/CMakeFiles/DecimaterGui.dir/all] Error 2\nmake[3]: *** [Makefile:152: all] Error 2\nmake[2]: *** [CMakeFiles/OpenMesh.dir/build.make:111: OpenMesh-prefix/src/OpenMesh-stamp/OpenMesh-build] Error 2\nmake[1]: *** [CMakeFiles/Makefile2:137: CMakeFiles/OpenMesh.dir/all] Error 2\nmake: *** [Makefile:84: all] Error 2\n</code></pre>\n\n<p>The problem is that when I did</p>\n\n<pre><code>sudo dnf remove cmake\n</code></pre>\n\n<p>I went too fast, and I probably deleted other packets that were useful... Apparently, dnf also deletes dependent packets...  I think that's where the problem comes from, but that's just a hypothesis... </p>\n\n<p>I don't know if it's really useful but in the project, we use other git projects as sub-modules (like OpenMesh, Assimp...). If I just make a make, the error appears with OpenMesh (precisely the bin DecimaterGui). But if I compile with make -j 4, the error also appears with other libraries (and other bin). </p>\n\n<p>I may have searched the Internet, but I couldn't find any solutions. Or at least the solution to my problem. So, if someone can point me in the right direction, that would be really cool!</p>\n\n<p>I hope I was quite precise and that my English was sufficiently clear. Thank you in advance for your answers. </p>\n"}, {"tags": ["c++", "arrays", "pointers", "function-pointers", "selection-sort"], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1544053883, "creation_date": 1544053883, "answer_id": 53642561, "question_id": 53642517, "link": "https://stackoverflow.com/questions/53642517/c-trying-to-finish-up-a-quick-program-but-im-not-sure-where-i-went-wrong/53642561#53642561", "title": "(C++) Trying to finish up a quick program but I&#39;m not sure where I went wrong?", "body": "<p>Remove the <code>*</code> from your function parameters:</p>\n\n<pre><code>void arrSelectionSort( double arr[], int size );\ndouble testAverage( double arr[], int size );\n</code></pre>\n\n<p>You want to pass in an array of <code>double</code> values, not an array of <code>double*</code> pointers.</p>\n\n<p>And then, inside of <code>arrSelectionSort()</code>, get rid of the uses of <code>*</code> since you want to sort values, not sort pointers:</p>\n\n<pre><code>void arrSelectionSort( double arr[], int size ) { \n\n    int startScan, minIndex; \n    double minElement; \n\n    for ( startScan = 0; startScan &lt; ( size - 1 ); startScan++ ) { \n\n        minIndex = startScan; \n        minElement = arr[startScan]; \n\n        for ( int index = startScan + 1; index &lt; size; index ++ ) { \n\n            if (arr[index] &lt; minElement) {\n\n                minElement = arr[index]; \n                minIndex = index;  \n            }\n\n        }\n\n        arr[minIndex] = arr[startScan]; \n        arr[startScan] = minElement; \n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 10752064, "user_type": "registered", "profile_image": "https://graph.facebook.com/2283481844996176/picture?type=large", "display_name": "Christian Dominguez", "link": "https://stackoverflow.com/users/10752064/christian-dominguez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 53642561, "answer_count": 1, "score": 1, "last_activity_date": 1544053883, "creation_date": 1544053565, "last_edit_date": 1544053766, "question_id": 53642517, "link": "https://stackoverflow.com/questions/53642517/c-trying-to-finish-up-a-quick-program-but-im-not-sure-where-i-went-wrong", "title": "(C++) Trying to finish up a quick program but I&#39;m not sure where I went wrong?", "body": "<p>The program description is below. When I try to compile, I get errors saying <code>'cannot convert 'double' to 'double**' for argument</code>. </p>\n\n<blockquote>\n  <p>Write a program that dynamically allocates an array large enough to hold a user-defined number of test scores. Once all the scores are entered, the array should be passed to a function that sorts them in ascending order. Another function should be called that calculates the average score. The program should display the sorted list of scores and averages with appropriate headings.</p>\n</blockquote>\n\n<p>NOTE: I am fairly new to using pointers in C++ and I do realize that the error in my code may be fairly easy for some to spot, so please do go easy. Also, if there are any suggestions as to what I can improve on or where I might find additional references to pointers, that would be great!  </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n\nusing namespace std; \n\n//Function Prototypes\nvoid arrSelectionSort( double *[], int );\ndouble testAverage( double *[], int );\n\nint main() { \n\n    double *testScores; //To dynamically allocate an array\n\n    int numTest;    //To hold the number of test - size of array\n    int count;      //Counter variable\n\n\n    //User input\n    cout &lt;&lt;\"Please enter the number of test scores: \";\n    cin &gt;&gt; numTest; \n\n    //Dynamically allocate an array for test scores \n    testScores = new double[numTest];\n\n    //Obtain the individual test scores from user\n    cout &lt;&lt; \"\\nEnter each test score.\\n\";\n    for ( count = 0; count &lt; numTest; count++ ) { \n\n        cout &lt;&lt; \"Test \" &lt;&lt; ( count + 1 ) &lt;&lt; \": \" &lt;&lt; endl; \n        cin &gt;&gt; testScores[count];\n\n    }\n\n    //Function call to sorting algorithm \n    arrSelectionSort( testScores, numTest );\n\n\n    //Display sorted array\n    cout &lt;&lt; \"Here are the sorted test scores.\\n\";\n    for ( int x = 0; x &lt; numTest; x++ ) { \n\n        cout &lt;&lt; \"\\nTest \" &lt;&lt; (x+1) &lt;&lt; \": \" &lt;&lt; testScores[x];\n\n    } \n\n\n    //Display average of all test scores\n    cout &lt;&lt;\"\\nAverage of all test scores is: \" &lt;&lt; testAverage( testScores, numTest );\n\n\n    //Free up allocated memory\n    delete  [] testScores;\n    testScores = 0; \n\n    return 0;\n}\n\nvoid arrSelectionSort( double *arr[], int size ) { \n\n    int startScan, minIndex; \n    double *minElement; \n\n    for ( startScan = 0; startScan &lt; ( size - 1 ); startScan++ ) { \n\n        minIndex = startScan; \n        minElement = arr[startScan]; \n\n        for ( int index = startScan + 1; index &lt; size; index ++ ) { \n\n            if (*(arr[index]) &lt; *minElement) {\n\n                minElement = arr[index]; \n                minIndex = index;  \n            }\n\n        }\n\n        arr[minIndex] = arr[startScan]; \n        arr[startScan] = minElement; \n    }\n}\n\ndouble testAverage( double *arr[], int size ) { \n\n    double average;\n    double total; \n\n    //Accumulating Loop\n    for ( int count = 0; count &lt; size; count++ ) { \n\n        total += arr[count];\n    }\n\n    average = total/size; \n\n    return average; \n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "graph-theory"], "answers": [{"comments": [{"owner": {"reputation": 1071, "user_id": 6721847, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/efhLp.jpg?s=128&g=1", "display_name": "monadoboi", "link": "https://stackoverflow.com/users/6721847/monadoboi"}, "edited": false, "score": 0, "creation_date": 1544093516, "post_id": 53645795, "comment_id": 94157770, "body": "Thank you for explaining it and writing it out very clearly! It worked perfectly :)"}], "tags": [], "owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "is_accepted": true, "score": 1, "last_activity_date": 1544078728, "last_edit_date": 1544078728, "creation_date": 1544077950, "answer_id": 53645795, "question_id": 53642199, "link": "https://stackoverflow.com/questions/53642199/boost-find-maximum-matching-edges-in-a-graph/53645795#53645795", "title": "Boost - Find maximum matching edges in a graph", "body": "<p>All you need to do is create <em>read-write property map</em> and pass it as second argument to </p>\n\n<pre><code>template &lt;typename Graph, typename MateMap&gt;\nbool checked_edmonds_maximum_cardinality_matching(const Graph&amp; g, MateMap mate);\n</code></pre>\n\n<p>You can create ordinary <em>std::map</em> where key and value are vertex descriptors and adapts it by <code>associative_property_map</code> in order to use it with <em>checked_edmonds_maximum_cardinality_matching</em>. From this map you can read all edges which create maximum cardinality of your graph. </p>\n\n<pre><code>// Return the set of edges that form a maximum matching in graph g\n   typedef graph_traits&lt;Graph&gt;::vertex_descriptor VD;\n\n   std::map&lt;VD,  VD&gt; match;\n   boost::associative_property_map&lt; std::map&lt;VD,VD&gt; &gt; mapAdapter(match);\n\n   bool rc = checked_edmonds_maximum_cardinality_matching(g,mapAdapter);\n   if (rc)\n   {\n      std::set&lt;graph_traits&lt;Graph&gt;::edge_descriptor&gt; edges;\n      for (auto&amp; i : match)\n      {\n        std::pair&lt;Graph::edge_descriptor,bool&gt; e = boost::edge(i.first,i.second,g);\n        if (e.second)\n            edges.insert(e.first);\n        std::cout &lt;&lt; i.first &lt;&lt; \" is matched to \" &lt;&lt; i.second &lt;&lt; std::endl;\n      }\n\n      // print edges\n      for (auto&amp; e : edges)\n          std::cout &lt;&lt; \"edge: \" &lt;&lt; e &lt;&lt; std::endl;\n   }\n</code></pre>\n\n<p>As output you can see:</p>\n\n<pre><code>0 is matched to 1\n1 is matched to 0\n2 is matched to 3\n3 is matched to 2\n4 is matched to 5\n5 is matched to 4\nedge: (0,1)\nedge: (2,3)\nedge: (4,5)\n</code></pre>\n"}], "owner": {"reputation": 1071, "user_id": 6721847, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/efhLp.jpg?s=128&g=1", "display_name": "monadoboi", "link": "https://stackoverflow.com/users/6721847/monadoboi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 53645795, "answer_count": 1, "score": 1, "last_activity_date": 1544078728, "creation_date": 1544051405, "question_id": 53642199, "link": "https://stackoverflow.com/questions/53642199/boost-find-maximum-matching-edges-in-a-graph", "title": "Boost - Find maximum matching edges in a graph", "body": "<p>I am a Boost (and C++) newbie, going through the <a href=\"https://www.boost.org/doc/libs/1_46_1/libs/graph/doc/quick_tour.html\" rel=\"nofollow noreferrer\">graph library tutorial</a>. I can create a graph and give it vertices and edges. I would like to use maximum cardinality matching in Boost to return a set of edges that form the maximum matching in the graph. </p>\n\n<p>I have looked through <code>max_cardinality_matching.hpp</code>, but am not quite sure how to use it, or which functions to use, to return the maximum matching set of edges. </p>\n\n<p>Here is my code so far:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;boost/graph/max_cardinality_matching.hpp&gt;\n#include &lt;boost/graph/adjacency_list.hpp&gt;\n#include &lt;boost/graph/graph_traits.hpp&gt;\n\nusing namespace boost;\n\n\nint main(int argc, const char * argv[]) {\n    // create a typedef for the Graph type\n    typedef adjacency_list&lt;vecS, vecS, bidirectionalS&gt; Graph;\n\n    // Make convenient labels for the vertices\n    enum { A, B, C, D, E, F, N };\n    const int num_vertices = N;\n//    const char* name = \"ABCDE\";\n\n    // writing out the edges in the graph\n    typedef std::pair&lt;int, int&gt; Edge;\n    Edge edge_array[] =\n    { Edge(A,B), Edge(B,C), Edge(C,D), Edge(D,E), Edge(E,F) };\n//    const int num_edges = sizeof(edge_array)/sizeof(edge_array[0]);\n\n    // declare a graph object and add the edges\n    Graph g(edge_array, edge_array + sizeof(edge_array) / sizeof(Edge), num_vertices);\n\n    // get the property map for vertex indices\n    // property_map&lt;Graph, property type&gt;\n    typedef property_map&lt;Graph, vertex_index_t&gt;::type IndexMap;\n    IndexMap index = get(vertex_index, g);\n\n    // Create an iterator for vertices\n    typedef graph_traits&lt;Graph&gt;::vertex_iterator vertex_iter;\n    std::cout &lt;&lt; \"vertices(g) = \";\n\n    // Vertices returns a pair of vertex iterators\n    // The first iter points to the beginning of the vertices\n    // The second points past the end\n    std::pair&lt;vertex_iter, vertex_iter&gt; vp;\n\n    // vertices() returns the vertices in graph g\n    for (vp = vertices(g); vp.first != vp.second; ++vp.first)\n        std::cout &lt;&lt; index[*vp.first] &lt;&lt;  \" \";\n    std::cout &lt;&lt; std::endl;\n\n    graph_traits&lt;Graph&gt;::edge_iterator ei, ei_end;\n    std::cout &lt;&lt; \"edges(g) = \";\n    // For each tuple of vertices (an edge), till the end of the edge list ...\n    for (tie(ei, ei_end) = edges(g); ei != ei_end; ++ei)\n        // ... print out the source and target vertices in the edge\n        std::cout &lt;&lt; \"(\" &lt;&lt; index[source(*ei, g)] &lt;&lt; \",\" &lt;&lt; index[target(*ei, g)] &lt;&lt; \") \";\n    std::cout &lt;&lt; std::endl;\n\n    // Return the set of edges that form a maximum matching in graph g\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers", "recursion", "counter", "function-pointers"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 2, "creation_date": 1544051409, "post_id": 53642189, "comment_id": 94143729, "body": "Can you add a parameter to the function?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1544051596, "post_id": 53642189, "comment_id": 94143792, "body": "Call a &quot;helper&quot; recursive function that takes a count parameter from <code>lindh</code>."}, {"owner": {"reputation": 133, "user_id": 4129587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6212f1f530613edcfbaff1001d4894e7?s=128&d=identicon&r=PG&f=1", "display_name": "Philipp Mildenberger", "link": "https://stackoverflow.com/users/4129587/philipp-mildenberger"}, "edited": false, "score": 0, "creation_date": 1544051656, "post_id": 53642189, "comment_id": 94143803, "body": "are static variables allowed? If then just add a static int c = 0; ++i; for the addition. You have to clear the counter at the beginning of the function though. and the function is not threadsafe in this case"}, {"owner": {"reputation": 21, "user_id": 10470061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tOcgqxmqOOM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWGUAPeh7nz_tIyOrlK3XAArFDdqg/mo/photo.jpg?sz=128", "display_name": "Arthur Johnson", "link": "https://stackoverflow.com/users/10470061/arthur-johnson"}, "edited": false, "score": 0, "creation_date": 1544051807, "post_id": 53642189, "comment_id": 94143846, "body": "Scott , yes i am allowed to  change the function as much as necessary"}, {"owner": {"reputation": 21, "user_id": 10470061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tOcgqxmqOOM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWGUAPeh7nz_tIyOrlK3XAArFDdqg/mo/photo.jpg?sz=128", "display_name": "Arthur Johnson", "link": "https://stackoverflow.com/users/10470061/arthur-johnson"}, "edited": false, "score": 0, "creation_date": 1544051868, "post_id": 53642189, "comment_id": 94143872, "body": "Philipp, but how can i access to this counter from the main function?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1544051955, "post_id": 53642189, "comment_id": 94143890, "body": "@ArthurJohnson -- Read my comment.  There is no need to define the counter in the main function or even globally."}, {"owner": {"reputation": 21, "user_id": 10470061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tOcgqxmqOOM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWGUAPeh7nz_tIyOrlK3XAArFDdqg/mo/photo.jpg?sz=128", "display_name": "Arthur Johnson", "link": "https://stackoverflow.com/users/10470061/arthur-johnson"}, "edited": false, "score": 0, "creation_date": 1544052215, "post_id": 53642189, "comment_id": 94143952, "body": "Paul, what do you mean by helper recursive function? so i have to make another function that just counts the number of recursive calls?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1544052317, "post_id": 53642189, "comment_id": 94143977, "body": "In general, if you have a recursive function that is called with <code>n</code> arguments, and you actually need to recursively do things with more than <code>n</code> arguments, you create an overloaded version of the recursive function that takes the additional arguments.  The original &quot;recursive&quot; function calls the overloaded function recursively."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1544052469, "post_id": 53642189, "comment_id": 94144022, "body": "Also, your function returns a <code>lindh</code> value.  Maybe your function should return a <code>std::pair&lt;long, int&gt;</code> so as to include both <code>lindh</code> and <code>count</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10470061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tOcgqxmqOOM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWGUAPeh7nz_tIyOrlK3XAArFDdqg/mo/photo.jpg?sz=128", "display_name": "Arthur Johnson", "link": "https://stackoverflow.com/users/10470061/arthur-johnson"}, "edited": false, "score": 0, "creation_date": 1544052120, "post_id": 53642293, "comment_id": 94143930, "body": "but then i have to give the count to the function in every recursive call again, is this a problem?"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "reply_to_user": {"reputation": 21, "user_id": 10470061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tOcgqxmqOOM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWGUAPeh7nz_tIyOrlK3XAArFDdqg/mo/photo.jpg?sz=128", "display_name": "Arthur Johnson", "link": "https://stackoverflow.com/users/10470061/arthur-johnson"}, "edited": false, "score": 0, "creation_date": 1544052288, "post_id": 53642293, "comment_id": 94143973, "body": "I don&#39;t see it as a problem."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 21, "user_id": 10470061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tOcgqxmqOOM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWGUAPeh7nz_tIyOrlK3XAArFDdqg/mo/photo.jpg?sz=128", "display_name": "Arthur Johnson", "link": "https://stackoverflow.com/users/10470061/arthur-johnson"}, "edited": false, "score": 0, "creation_date": 1544053309, "post_id": 53642293, "comment_id": 94144252, "body": "@ArthurJohnson if the compiler can get away with it, a reference parameter won&#39;t even have any overhead."}], "tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": true, "score": 3, "last_activity_date": 1544052007, "creation_date": 1544052007, "answer_id": 53642293, "question_id": 53642189, "link": "https://stackoverflow.com/questions/53642189/number-of-additions-in-a-recursive-function-without-using-global-variables-in-c/53642293#53642293", "title": "Number of additions in a recursive function without using global variables in c++", "body": "<p>You can change the function signature to be:</p>\n\n<pre><code>long lindh(unsigned int n, int &amp;count) \n</code></pre>\n\n<p>Pass it the variable you want the count to end up in, in both the initial call and every recursive one.  Increment <code>count</code> in the appropriate places.</p>\n"}, {"tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": false, "score": 2, "last_activity_date": 1544053304, "last_edit_date": 1544053304, "creation_date": 1544052118, "answer_id": 53642313, "question_id": 53642189, "link": "https://stackoverflow.com/questions/53642189/number-of-additions-in-a-recursive-function-without-using-global-variables-in-c/53642313#53642313", "title": "Number of additions in a recursive function without using global variables in c++", "body": "<p>You can define an overloaded <code>lindh</code> function that takes two arguments.  The overloaded function takes two parameters, while the version called from <code>main</code> is the \"base\" function that just delegates to the overloaded function.</p>\n\n<p>In addition, since you need to return both a <code>lin</code> value and <code>count</code>, you can return a <code>std::pair&lt;long, int&gt;</code> to denote the <code>lin</code> value and count.  This eliminates the need for a global variable, </p>\n\n<p>Here is an example:</p>\n\n<pre><code>#include &lt;utility&gt;\n#include &lt;iostream&gt;\n\n\nlong lindh(unsigned int n, int &amp;count) \n{\n  long lin = 0;\n  if (n == 1 || n == 2) {\n    lin = 1;\n  } else {\n    ++count;\n    lin = 1 * lindh(n - 1, count) + 3 * lindh(n - 2, count);\n  }\n  return lin;\n}\n\nstd::pair&lt;long,int&gt; lindh(unsigned int n) \n{  \n   int count = 0;\n   return {lindh(n, count), count};\n} \n\nint main() \n{\n   auto b = lindh(24);\n   std::cout &lt;&lt; \"lindhauer = \" &lt;&lt; b.first &lt;&lt; \"\\ncount = \" &lt;&lt; b.second &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p><a href=\"https://www.ideone.com/BbSmsW\" rel=\"nofollow noreferrer\">Live Example</a></p>\n"}], "owner": {"reputation": 21, "user_id": 10470061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tOcgqxmqOOM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWGUAPeh7nz_tIyOrlK3XAArFDdqg/mo/photo.jpg?sz=128", "display_name": "Arthur Johnson", "link": "https://stackoverflow.com/users/10470061/arthur-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 0, "accepted_answer_id": 53642293, "answer_count": 2, "score": 0, "last_activity_date": 1544060709, "creation_date": 1544051317, "last_edit_date": 1544060709, "question_id": 53642189, "link": "https://stackoverflow.com/questions/53642189/number-of-additions-in-a-recursive-function-without-using-global-variables-in-c", "title": "Number of additions in a recursive function without using global variables in c++", "body": "<p>I have to implement a counter that counts the number of additions in this recursive function, but i am not allowed to use global variables. Do you know how to do that? For example if the function has to call itself free times then my counter has to be put on three at the end of the function just before the return.  </p>\n\n<pre><code>long lindh(unsigned int n) {\n\n  long lin = 0;\n  if (n == 1 || n == 2) {\n    lin = 1;\n  } else {\n    lin = 1 * lindh(n - 1) + 3 * lindh(n - 2);\n  }\n\n  return lin;\n}\n\nint main() {\n  long b = 0;\n  b = lindh(24);\n\n  cout &lt;&lt; \"lindhauer \" &lt;&lt; b &lt;&lt; endl;\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "c++17", "variadic-templates"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1544052194, "post_id": 53642124, "comment_id": 94143944, "body": "Please clarify your specific problem or add additional details to highlight exactly what you need. As it&#39;s currently written, it\u2019s hard to tell exactly what you&#39;re asking."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1544053038, "post_id": 53642124, "comment_id": 94144195, "body": "@Barry: he wants to put the types coded into the type <code>Pack&lt;T1, T2, ...&gt;</code> to a function signature: <code>Dispatch(T1 t1, T2 t2, ...)</code>."}, {"owner": {"reputation": 1215, "user_id": 2712726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/BRddb.jpg?s=128&g=1", "display_name": "Patrick Fromberg", "link": "https://stackoverflow.com/users/2712726/patrick-fromberg"}, "edited": false, "score": 1, "creation_date": 1544053321, "post_id": 53642124, "comment_id": 94144255, "body": "Not clear to me either. Maybe write the code with 1,2 and 3 types in the variadic type parameter list and then we can see howto generalize that to any number of template arguments. In any case I expect your example code to compile, otherwise I will not look into it."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 2, "creation_date": 1544055948, "post_id": 53642124, "comment_id": 94144942, "body": "Note in C++17 you can usually replace <code>template &lt;class T, T Value&gt;</code> with <code>template &lt;auto Value&gt;</code>."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1544064215, "post_id": 53642124, "comment_id": 94146740, "body": "How many events does your system have?  What utility is there in hetrogenous events sharing one storage location?  Why use enums for event ids, why not the actual event objects?  Why <code>Event&lt; Resource::EventId, Resource::EventId::OnUpdate &gt;::Dispatch</code> instead of <code>Event::OnUpdate::Dispatch</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "is_accepted": false, "score": 1, "last_activity_date": 1544053416, "creation_date": 1544053416, "answer_id": 53642499, "question_id": 53642124, "link": "https://stackoverflow.com/questions/53642124/unpack-variadic-template-parameter-pack-into-function-signature/53642499#53642499", "title": "Unpack variadic template parameter pack into function signature", "body": "<p>the code you provided wasn't complete so i couldn't integrate the solution in your example.</p>\n\n<p>you can use a base class to extract the parameter pack from Pack&lt;...> and expand it in a function in the base class</p>\n\n<pre><code>template&lt;typename ...&gt;\nclass Pack {};\n\ntemplate&lt;typename&gt;\nclass test_base;\n\ntemplate&lt;typename ... Args&gt;\nclass test_base&lt;Pack&lt;Args...&gt;&gt; {\n    public:\n    void Dispatcher(Args... args) {\n        //implemntation\n    }\n};\n\ntemplate&lt;typename ... Args&gt;\nclass test : public test_base&lt;Pack&lt;Args...&gt;&gt; {\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 0, "last_activity_date": 1544058872, "last_edit_date": 1544058872, "creation_date": 1544057859, "answer_id": 53643080, "question_id": 53642124, "link": "https://stackoverflow.com/questions/53642124/unpack-variadic-template-parameter-pack-into-function-signature/53643080#53643080", "title": "Unpack variadic template parameter pack into function signature", "body": "<p>Not sure to understand (and I can try to compile because your example is too incomplete) but seems to me that you can pass through an additional typename template parameter, with a default value, and a specialization.</p>\n\n<p>I mean... something as</p>\n\n<pre><code>template &lt;typename Id, Id id, typename = typename EventInfo&lt;Id, id&gt;::Data&gt;\nclass Event;\n\ntemplate &lt;typename Id, Id id, typename ... DataUnpacked&gt;\nclass Event&lt;Id, id, Pack&lt;DataUnpacked...&gt;&gt;\n {\n   // ...\n\n   public:\n      static void Dispatch (DataUnpacked ... data)\n       {\n         // ...\n       }\n };\n</code></pre>\n\n<p>This way, when you create a variable <code>Event&lt;EventId, EventId::someId&gt;</code>, it's defaulted to <code>Event&lt;EventId, EventId::someId, typename EventInfo&lt;EventId, EventId::someId&gt;::Data&gt;</code> that is <code>Event&lt;EventId, EventId::someId, Pack&lt;Ts...&gt;&gt;</code> for some <code>Ts...</code> variadic list.</p>\n\n<p>The specialization permit to intercept that <code>Ts...</code> list (as <code>DataUnpacked...</code>, following your example) and use it in the <code>Dispatch()</code> signature.</p>\n\n<p>Off Topic Suggestion: as observed by aschepler, you tagged C++17 so you can use <code>auto</code> template values; so the code can be simply</p>\n\n<pre><code>template &lt;auto id, typename = typename EventInfo&lt;id&gt;::Data&gt;\nclass Event;\n\ntemplate &lt;auto id, typename ... DataUnpacked&gt;\nclass Event&lt;id, Pack&lt;DataUnpacked...&gt;&gt;\n {\n   // ...\n\n   public:\n      static void Dispatch (DataUnpacked ... data)\n       {\n         // ...\n       }\n };\n</code></pre>\n\n<p>if also <code>EventInfo</code> receive an <code>auto id</code>.</p>\n"}], "owner": {"reputation": 9, "user_id": 2327013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGrJA.jpg?s=128&g=1", "display_name": "Adam Krause", "link": "https://stackoverflow.com/users/2327013/adam-krause"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 518, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1544058872, "creation_date": 1544051008, "question_id": 53642124, "link": "https://stackoverflow.com/questions/53642124/unpack-variadic-template-parameter-pack-into-function-signature", "title": "Unpack variadic template parameter pack into function signature", "body": "<p>I've created class for dispatching and handling events in a small library. My goal is to make it as easy as possible to use, avoiding macro pollution. Events are registered in compile time, listeners are subscribing from events in runtime. Both are identified by enums in <code>Resource</code> namespace. <code>Pack</code> is storage for variadic template parameters. <code>EventInfo</code> is way to tell what parameters we are going to use in <code>Listener</code> and <code>Event</code>. Code:</p>\n\n<pre><code>namespace Resource \n{\n    enum class Resource::EventId;\n    enum class Resource::ListenerId;\n}\n\ntemplate&lt; class EventId, EventId id &gt;\nstruct EventInfo;\n\ntemplate&lt; class... Args &gt;\nstruct Pack\n{\n};\n\ntemplate&lt; class ListenerId_, class... EventData &gt;\nstruct Listener\n{\n    using ListenerId = ListenerId_;\n\n    ListenerId Id = ListenerId::Undefined;\n    bool IsEnabled = false;\n    std::function&lt; void( EventData... ) &gt; Callback = nullptr;\n};\n\ntemplate&lt; class ListenerId_, class... EventData &gt;\nstruct EventInfoHelper\n{\n    using Data = Pack&lt; EventData... &gt;;\n    using Listener = typename Listener&lt; ListenerId_, EventData... &gt;;\n    using ListenerId = typename Listener::ListenerId;\n};\n\n#define REGISTER_EVENT_W_ARGS( NAME, ... ) \\\ntemplate&lt;&gt; \\\nstruct EventInfo&lt; Resource::EventId, Resource::EventId::NAME &gt; \\\n{ \\\npublic: \\\n    using Hlpr = EventInfoHelper&lt; Resource::ListenerId, __VA_ARGS__ &gt;; \\\n    using Data = Hlpr::Data; \\\n    using Listener = Hlpr::Listener; \\\n    using ListenerId = Hlpr::ListenerId; \\\n};\n\nREGISTER_EVENT_W_ARGS( OnUpdate, const sf::Time&amp; );\n// ... macro undef here\n\ntemplate&lt; class Id, Id id &gt;\nclass Event\n{\npublic:\n    using Data = typename EventInfo&lt; Id, id &gt;::Data;\n    using Listener = typename EventInfo&lt; Id, id &gt;::Listener;\n    using ListenerId = typename EventInfo&lt; Id, id &gt;::ListenerId;\n\n    template&lt; class... DataUnpacked, class = std::enable_if_t&lt; std::is_same&lt; Pack&lt; DataUnpacked... &gt;, Data &gt;::value &gt; &gt;\n    static void Dispatch( DataUnpacked... data )\n    {\n        for( auto&amp; listener : m_listeners )\n        {\n            CHECK( listener.Id != ListenerId::Undefined );\n            if( listener.IsEnabled )\n            {\n                CHECK( listener.Callback != nullptr );\n                listener.Callback( data... );\n            }\n        }\n    }\n\n    // ...\nprivate:\n    static std::vector&lt; Listener &gt; m_listeners;\n};\n</code></pre>\n\n<p>Current use case:</p>\n\n<pre><code>Event&lt; Resource::EventId, Resource::EventId::OnUpdate &gt;::Dispatch&lt; const sf::Time&amp; &gt;( dt );\n</code></pre>\n\n<p>Desired (parameter deduction from <code>EventInfo::Data</code>):</p>\n\n<pre><code>Event&lt; Resource::EventId, Resource::EventId::OnUpdate &gt;::Dispatch( dt );\n</code></pre>\n\n<p>Question is how to implement <code>Dispatch</code> with parameters registered in <code>EventInfo::Data</code> as <code>Pack&lt; Args... &gt;</code> arguments?</p>\n"}, {"tags": ["c++", "visual-studio", "com"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1544190206, "post_id": 53642089, "comment_id": 94198816, "body": "#include requires C++.  Don&#39;t be misled by the IntelliSense parser, it will complain about a missing .tlh file at first.  Use Build &gt; Build to ensure the .tlh file is generated."}], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 3127177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03966e5b8fd46188ecec29c86ad8d06d?s=128&d=identicon&r=PG", "display_name": "Erhy", "link": "https://stackoverflow.com/users/3127177/erhy"}, "is_accepted": false, "score": 0, "last_activity_date": 1544191851, "last_edit_date": 1544191851, "creation_date": 1544191523, "answer_id": 53671162, "question_id": 53642089, "link": "https://stackoverflow.com/questions/53642089/how-to-use-idl-from-application-for-unmanaged-c/53671162#53671162", "title": "how to use IDL from application for unmanaged C++", "body": "<p>I done it like as Kim Gr\u00e4sman advised in\n<a href=\"https://stackoverflow.com/a/1854637/3127177\">https://stackoverflow.com/a/1854637/3127177</a></p>\n\n<p>Here my way for the application TheServerApp :</p>\n\n<p>all with installed <strong>Microsoft Visual Studio Community 2017</strong></p>\n\n<p>with <strong>command line</strong></p>\n\n<p>Search and execute <strong>vcvars32.bat</strong></p>\n\n<p>then execute </p>\n\n<p><strong>oleview</strong></p>\n\n<p>(if it makes problem the first time oleview.exe has to been executed as administrator)</p>\n\n<p>in oleview window choose View TypeLibs</p>\n\n<p>and open TheServerApp.exe</p>\n\n<p>and then <strong>File -> Save As</strong></p>\n\n<p>So the <strong>IDL definitions</strong> are stored in TheServerApp.<strong>idl</strong></p>\n\n<p><strong>cd</strong> where TheServerApp.IDL is located</p>\n\n<p>and execute </p>\n\n<p><strong>midl</strong> TheServerApp.IDL</p>\n\n<p>because I got the errors</p>\n\n<p>TheServerApp.IDL(481) : error MIDL2025 : syntax error : expecting a type specification near \"single\"</p>\n\n<p>Client\\TheServerApp.IDL(481) : error MIDL2026 : cannot recover from earlier syntax errors; aborting compilation</p>\n\n<p>I edited TheServerApp.IDL and replaced all words single with double </p>\n\n<p>( see <a href=\"https://docs.microsoft.com/en-us/windows/desktop/midl/midl-predefined-and-base-types\" rel=\"nofollow noreferrer\">here</a> )</p>\n\n<p>Now the execution of <strong>midl</strong> TheServerApp**.IDL**</p>\n\n<p>results in the file TheServerApp**.tlb**</p>\n\n<p>because #import TheServerApp.tlb in the Visual Studio project reports an error</p>\n\n<p>write a small program imports.cpp in your project with the content:</p>\n\n<pre><code>// file to import with full path\n**#import** \" ... /**TheServerApp.tlb**\"\nint main(int argc, char* argv[])\n{\n}\n</code></pre>\n\n<p>and in Command Line with executed vcvars32.bat as above</p>\n\n<p>execute \n<strong>cl ./imports.cpp</strong></p>\n\n<p>which generates TheServerApp**.tlh** and TheServerApp**.tli**</p>\n\n<p>in .cpp I included</p>\n\n<pre><code>#include \"./TheServerApp.tlh\"\n#include \"./TheServerApp.tli\"\n</code></pre>\n\n<p>I generated also TheServerApp.dll, but don't know it will be needed further</p>\n\n<p>tlbimp TheServerApp.tlb</p>\n\n<p>which reports</p>\n\n<p>TlbImp : Type library imported to TheServerApp.dll</p>\n\n<p>so there is also the file TheServerApp.dll </p>\n\n<p>for the next steps I have to study more</p>\n\n<p>Erhy</p>\n"}], "owner": {"reputation": 76, "user_id": 3127177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03966e5b8fd46188ecec29c86ad8d06d?s=128&d=identicon&r=PG", "display_name": "Erhy", "link": "https://stackoverflow.com/users/3127177/erhy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 388, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544191851, "creation_date": 1544050825, "question_id": 53642089, "link": "https://stackoverflow.com/questions/53642089/how-to-use-idl-from-application-for-unmanaged-c", "title": "how to use IDL from application for unmanaged C++", "body": "<p>the .exe of the application allows to dump IDL-definitions to a .IDL file.</p>\n\n<p>with <strong>midl</strong> I can create a <strong>.tlb</strong> file.</p>\n\n<p>But in C-compiler with the\n<strong>#import</strong> statement\nI got the <strong>error</strong> \n<strong>cannot open source file</strong> ... <strong>.tlh</strong></p>\n\n<p>How to fix it?</p>\n\n<p>In VS Visual Basic project I'm able to use this application with the COM-Interface, but have other troubles with.</p>\n\n<p>Thank you for advice\nErhy</p>\n"}, {"tags": ["c++", "c", "pthreads", "conditional-statements", "mutex"], "comments": [{"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1544049832, "post_id": 53641838, "comment_id": 94143193, "body": "You&#39;re retrieving a random number from 100, and checking if it&#39;s below 13, which it has a ~10% chance of being, whereas when you are checking for it being above 8, you&#39;ve got a 90% chance of it being correct. I&#39;d say you haven&#39;t got your thread running correctly, or perhaps it&#39;s just very slow. You should try to attach your debugger and step through the code and see what&#39;s going on. It&#39;s likely you have some deadlock going on, which happens rarely but is more visible when the value isn&#39;t added"}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1544049867, "post_id": 53641838, "comment_id": 94143206, "body": "Also consider ditching <code>pthread</code> and just use <code>std::thread</code> and <code>std::mutex</code> instead."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10605163"}, "edited": false, "score": 0, "creation_date": 1544050061, "post_id": 53641838, "comment_id": 94143279, "body": "Are you sure you are asking about C++ rather than C? Except for some omitted <code>struct</code> specifiers you are using no C++ specific features or standard library at all."}, {"owner": {"reputation": 13, "user_id": 9597744, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Svijlg1XBeo/AAAAAAAAAAI/AAAAAAAAAYU/ti4h1hTwCsc/photo.jpg?sz=128", "display_name": "Branislav Kram&#225;r", "link": "https://stackoverflow.com/users/9597744/branislav-kram%c3%a1r"}, "edited": false, "score": 0, "creation_date": 1544050576, "post_id": 53641838, "comment_id": 94143450, "body": "in variable randomValue should be values from 1 to 20, so probability of value greater than 8 should be the same to probability of value less than 13, shouldn&#180;t it?"}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 1, "creation_date": 1544050992, "post_id": 53641838, "comment_id": 94143587, "body": "It sort of suggests that <code>rand()</code> is not very random (a known issue). Also this is really C code. Nearly everything you do has a better C++ alternative. <code>std::vector</code>, <code>std::thread</code>, <code>std::mutex</code>, <code>std::conditional_variable</code>, <code>std::random</code>"}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1544051566, "post_id": 53641838, "comment_id": 94143785, "body": "Also your <code>funProducent()</code> stops after a hundred numbers. If the <code>funKonzument()</code> is in the condition variable at this time there is no way to release it. So its can get stuck (because the <code>pthread_cond_signal()</code> is only conditionally called in <code>funProducent()</code>"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1544052871, "post_id": 53641838, "comment_id": 94144151, "body": "You are also not protecting yourself agaist spurious wakes on the <code>pthread_cond_wait</code>calls. &quot;<i>Spurious wakeups from the pthread_cond_wait() or pthread_cond_timedwait() functions may occur. Since the return from pthread_cond_wait() or pthread_cond_timedwait() does not imply anything about the value of this predicate, the predicate should be re-evaluated upon such return</i>&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": true, "score": 1, "last_activity_date": 1544055341, "creation_date": 1544055341, "answer_id": 53642747, "question_id": 53641838, "link": "https://stackoverflow.com/questions/53641838/c-c-threads-magic-difference-in-condition/53642747#53642747", "title": "C/C++ threads magic difference in condition", "body": "<p>You are probably suffering from spurious wakes and some problem with the junk counter. I just removed that counter and added a cond wait loop function (and a little lock context manager) and then the hangings seems to have stopped.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;stdexcept&gt;\n#include &lt;functional&gt;\n\n#define BUFFER_LIMIT 20\n\nstruct struktura{\n    pthread_mutex_t mutex;\n    pthread_cond_t bufferNotFull;\n    pthread_cond_t bufferNotEmpty;\n    int bufferIndex;\n    char * buffer;\n};\n\n// a lock context manager\nclass mlock {\n    pthread_mutex_t* mtx;\npublic:\n    mlock(pthread_mutex_t&amp; Mtx) :\n        mtx(&amp;Mtx)\n    {\n        int rv=pthread_mutex_lock(mtx);\n        if(rv) throw std::runtime_error(std::to_string(rv));\n    }\n    mlock(const mlock&amp;) = delete;\n    mlock(mlock&amp;&amp;) = delete;\n    mlock&amp; operator=(const mlock&amp;) = delete;\n    mlock&amp; operator=(mlock&amp;&amp;) = delete;\n    ~mlock() {\n        pthread_mutex_unlock(mtx);\n    }\n};\n\n// silly loop to take care of spurious wakes\nvoid cwait(pthread_cond_t&amp; c, pthread_mutex_t&amp; m, std::function&lt;bool()&gt; f) {\n    while(f()) pthread_cond_wait(&amp;c, &amp;m);\n}\n\nvoid* funProducent(void *arg){\n    struktura* data = static_cast&lt;struktura*&gt;(arg);\n    int i = 0;\n    while(i &lt; 100) {\n        mlock dummy(data-&gt;mutex);\n        cwait(data-&gt;bufferNotFull, data-&gt;mutex, [&amp;](){return data-&gt;bufferIndex == BUFFER_LIMIT - 1;});\n\n        int randomValue = (rand() % 20) + 1;\n        if( randomValue &lt; 13 ){\n            data-&gt;buffer[++data-&gt;bufferIndex] = 'a';\n            printf(\"%2d : Producent at index %d added %c\\n\", i, data-&gt;bufferIndex, data-&gt;buffer[data-&gt;bufferIndex]);\n            i++;\n            pthread_cond_signal(&amp;data-&gt;bufferNotEmpty);\n        }\n    }\n    printf(\"producent is done\\n\");\n    return nullptr;\n}\n\nvoid* funKonzument(void *arg){\n    struktura* data = static_cast&lt;struktura*&gt;(arg);\n    int i = 0;\n    while(i &lt; 100) {\n        mlock dummy(data-&gt;mutex);\n        cwait(data-&gt;bufferNotEmpty, data-&gt;mutex, [&amp;](){return data-&gt;bufferIndex&lt;0;});\n\n        printf(\"\\t\\t\\t%2d : Konzument at index %d consumed %c\\n\", i, data-&gt;bufferIndex, data-&gt;buffer[data-&gt;bufferIndex]);\n        data-&gt;bufferIndex--;\n        i++;\n        pthread_cond_signal(&amp;data-&gt;bufferNotFull);\n    }\n    printf(\"\\t\\t\\tkonzument is done\\n\");\n    return nullptr;\n}\n\nint main() {\n    pthread_t threadProducent, threadKonzument;\n    struktura threadData;\n    threadData.buffer = (char *) malloc(sizeof(char) * BUFFER_LIMIT);\n    threadData.bufferIndex = -1;\n    threadData.bufferNotFull = PTHREAD_COND_INITIALIZER;\n    threadData.bufferNotEmpty = PTHREAD_COND_INITIALIZER;\n    threadData.mutex = PTHREAD_MUTEX_INITIALIZER;\n\n    pthread_create(&amp;threadProducent, NULL, funProducent, &amp;threadData);\n    pthread_create(&amp;threadKonzument, NULL, funKonzument, &amp;threadData);\n\n    pthread_join(threadProducent, NULL);\n    pthread_join(threadKonzument, NULL);\n\n    free(threadData.buffer);\n    pthread_mutex_destroy(&amp;threadData.mutex);\n    pthread_cond_destroy(&amp;threadData.bufferNotFull);\n    pthread_cond_destroy(&amp;threadData.bufferNotEmpty);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9597744, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Svijlg1XBeo/AAAAAAAAAAI/AAAAAAAAAYU/ti4h1hTwCsc/photo.jpg?sz=128", "display_name": "Branislav Kram&#225;r", "link": "https://stackoverflow.com/users/9597744/branislav-kram%c3%a1r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 53642747, "answer_count": 1, "score": 0, "last_activity_date": 1544088095, "creation_date": 1544049482, "last_edit_date": 1544088095, "question_id": 53641838, "link": "https://stackoverflow.com/questions/53641838/c-c-threads-magic-difference-in-condition", "title": "C/C++ threads magic difference in condition", "body": "<p>I wanted to write simple multithread app in C/C++. Function funProducent produces 100 values and if random generated value is in given range, char is added to buffer. Function funKonzument comsumes values from buffer. Here is my code:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;pthread.h&gt;\n\n#define BUFFER_LIMIT 20\n\nstruct struktura{\n    pthread_mutex_t mutex;\n    pthread_cond_t bufferNotFull;\n    pthread_cond_t bufferNotEmpty;\n    int bufferIndex;\n    char * buffer;\n    int junk;\n};\n\nvoid * funProducent(void *arg){\n    struktura * data = (struktura *) arg;\n    int i = 0;\n    while (i &lt; 100) {\n        pthread_mutex_lock(&amp;data-&gt;mutex);\n        if(data-&gt;bufferIndex == BUFFER_LIMIT - 1){\n            pthread_cond_wait(&amp;data-&gt;bufferNotFull, &amp;data-&gt;mutex);\n        }\n        int randomValue = (rand() % 20) + 1;\n        if( randomValue &lt; 13 ){\n            data-&gt;buffer[++data-&gt;bufferIndex] = 'a';\n            printf(\"%2d : Producent at index %d added %c\\n\", i, data-&gt;bufferIndex, data-&gt;buffer[data-&gt;bufferIndex]);\n            pthread_cond_signal(&amp;data-&gt;bufferNotEmpty);\n        } else {\n            data-&gt;junk++;\n        }\n        pthread_mutex_unlock(&amp;data-&gt;mutex);\n        i++;\n    }\n    printf(\"producent is done\\n\");\n}\n\nvoid * funKonzument(void *arg){\n    struktura * data = (struktura *) arg;\n    int i = 0;\n    while (i + data-&gt;junk &lt; 100) {  \n        printf(\"%d\\n\", i + data-&gt;junk);\n        pthread_mutex_lock(&amp;data-&gt;mutex);\n        if(data-&gt;bufferIndex &lt; 0){\n            pthread_cond_wait(&amp;data-&gt;bufferNotEmpty, &amp;data-&gt;mutex);\n        }\n        printf(\"%2d : Konzument at index %d consumed %c\\n\", i, data-&gt;bufferIndex, data-&gt;buffer[data-&gt;bufferIndex]);\n        data-&gt;bufferIndex--;\n        pthread_cond_signal(&amp;data-&gt;bufferNotFull);\n        pthread_mutex_unlock(&amp;data-&gt;mutex);\n        i++;\n    }\n    printf(\"konzument is done\\n\");\n}\n\nint main(int argc, char** argv) {\n\npthread_t threadProducent, threadKonzument;\nstruktura threadData;\nthreadData.buffer = (char *) malloc(sizeof(char) * BUFFER_LIMIT);\nthreadData.bufferIndex = -1;\nthreadData.bufferNotFull = PTHREAD_COND_INITIALIZER;\nthreadData.bufferNotEmpty = PTHREAD_COND_INITIALIZER;\nthreadData.mutex = PTHREAD_MUTEX_INITIALIZER;\nthreadData.junk = 0;\n\npthread_create(&amp;threadProducent, NULL, funProducent, &amp;threadData);\npthread_create(&amp;threadKonzument, NULL, funKonzument, &amp;threadData);\n\npthread_join(threadProducent, NULL);\npthread_join(threadKonzument, NULL);\n\nfree(threadData.buffer);\npthread_mutex_destroy(&amp;threadData.mutex);\npthread_cond_destroy(&amp;threadData.bufferNotFull);\npthread_cond_destroy(&amp;threadData.bufferNotEmpty);\nreturn 0;\n}\n</code></pre>\n\n<p>When I try to run this code, sometimes it stucks in funKonzument at this line:</p>\n\n<pre><code>pthread_cond_wait(&amp;data-&gt;bufferNotEmpty, &amp;data-&gt;mutex);\n</code></pre>\n\n<p>But...when I change condition in funProducent method from:</p>\n\n<pre><code>if( randomValue &lt; 13 )\n</code></pre>\n\n<p>to</p>\n\n<pre><code>if( randomValue &gt; 8 )\n</code></pre>\n\n<p>everything works fine. Is anyone able to explain me what magic difference is between this two conditions?</p>\n"}, {"tags": ["c++", "rest", "delphi", "post", "c++builder"], "comments": [{"owner": {"reputation": 139, "user_id": 1486418, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b01375ad18f4fe01728de9b2af0f9338?s=128&d=identicon&r=PG", "display_name": "mesutuk", "link": "https://stackoverflow.com/users/1486418/mesutuk"}, "edited": false, "score": 0, "creation_date": 1544049294, "post_id": 53641790, "comment_id": 94143015, "body": "By the way, I did use Bearer Token when TOAuth2Authenticator was not around."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1544054412, "post_id": 53641790, "comment_id": 94144554, "body": "Please show your actual code, sounds like maybe you are not populating the <code>TRESTRequest</code> correctly."}, {"owner": {"reputation": 139, "user_id": 1486418, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b01375ad18f4fe01728de9b2af0f9338?s=128&d=identicon&r=PG", "display_name": "mesutuk", "link": "https://stackoverflow.com/users/1486418/mesutuk"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1544056837, "post_id": 53641790, "comment_id": 94145127, "body": "I found it... pls see the pictures below"}], "answers": [{"tags": [], "owner": {"reputation": 139, "user_id": 1486418, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b01375ad18f4fe01728de9b2af0f9338?s=128&d=identicon&r=PG", "display_name": "mesutuk", "link": "https://stackoverflow.com/users/1486418/mesutuk"}, "is_accepted": false, "score": 2, "last_activity_date": 1544057867, "last_edit_date": 1544057867, "creation_date": 1544057137, "answer_id": 53642982, "question_id": 53641790, "link": "https://stackoverflow.com/questions/53641790/delphi-cbuilder-10-2-3-restrequest-post/53642982#53642982", "title": "Delphi / C++Builder 10.2.3 RESTRequest POST", "body": "<p>After some playing around, the answer should be as follows.</p>\n\n<pre><code>String StrBody=\"{\\\"Key\\\": \\\"A123\\\",\\\"Total\\\": 100.00,\\\"Deductions\\\": 100.00}\";\n\nSubmitAuthenticator-&gt;AccessToken = StrAccessToken;\n\nSubmitRESTClient-&gt;BaseURL = \"https://testsite.com\";\n\nSubmitRESTRequest-&gt;Method = Rest::Types::rmPOST;\nSubmitRESTRequest-&gt;Params-&gt;Items[0]-&gt;Value = StrBody;\nSubmitRESTRequest-&gt;Execute();\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/jBisX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jBisX.png\" alt=\"image\"></a></p>\n"}], "owner": {"reputation": 139, "user_id": 1486418, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b01375ad18f4fe01728de9b2af0f9338?s=128&d=identicon&r=PG", "display_name": "mesutuk", "link": "https://stackoverflow.com/users/1486418/mesutuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 469, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544057867, "creation_date": 1544049210, "last_edit_date": 1544054385, "question_id": 53641790, "link": "https://stackoverflow.com/questions/53641790/delphi-cbuilder-10-2-3-restrequest-post", "title": "Delphi / C++Builder 10.2.3 RESTRequest POST", "body": "<p>Does anyone have experience with <code>TRESTRequest</code> components? I am trying to <code>POST</code> a JSON string in the request body.</p>\n\n<p>If I do not use <code>TOAuth2Authenticator</code>, it return back a <code>MISSING_CREDENTIALS</code> error.  When I try to use <code>TOAuth2Authenticator</code> linked to the <code>TRESTClient</code>, with an <code>access_token</code>, it gives me this error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/u14TP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/u14TP.png\" alt=\"image\"></a></p>\n\n<p>I did the same request with POSTMAN, it work fine. And also, it works fine with <code>TIdHTTP</code> as well.  But not with <code>TRESTRequest</code>.</p>\n\n<p>Please let me know if you have experience before I report it as a bug.</p>\n"}, {"tags": ["c++", "time", "synchronization", "ntp"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1544050662, "post_id": 53641659, "comment_id": 94143478, "body": "That seems to be an excessively frequent update rate for a time sync that &#39;s typically only good to a couple milliseconds. If you can let us know why you&#39;re doing this maybe someone can offer a better suggestion."}, {"owner": {"reputation": 1477, "user_id": 5899776, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/64b8e28377778d1b8ad57198ba46c319?s=128&d=identicon&r=PG&f=1", "display_name": "van dench", "link": "https://stackoverflow.com/users/5899776/van-dench"}, "edited": false, "score": 0, "creation_date": 1544053128, "post_id": 53641659, "comment_id": 94144218, "body": "You should really only by synchronizing with an NTP when your internal clock gets out of sync. If you clock is getting out of sync once a minute that sounds like a problem that should be resolved properly. Also if you need to sync multiple devices together, why not just sync them together instead of relying on an NTP."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1544056926, "post_id": 53641659, "comment_id": 94145152, "body": "How close together is &quot;at the same time&quot; for you? if it&#39;s milliseconds, NTP isn&#39;t good enough. If it&#39;s tenths of seconds NTP  might be good enough. If it&#39;s seconds, you&#39;re probably doing just fine."}, {"owner": {"reputation": 23, "user_id": 7161755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18b57693528620331118c7207515ceec?s=128&d=identicon&r=PG&f=1", "display_name": "matteof93", "link": "https://stackoverflow.com/users/7161755/matteof93"}, "edited": false, "score": 0, "creation_date": 1544080312, "post_id": 53641659, "comment_id": 94150987, "body": "I want to monitor particular packet traffic on wifi, so I have a bunch of ESP32 boards that monitor the network and each minute send some data to a computer that makes statistics with the data. Each board must label each captured packet with a timestamp, so let&#39;s say packet P must be labeled with the same timestamp by all boards. Accepted error (timestamp difference between different boards) is around 100 ms. I tried simply to synch each board indipendently with a NTP server and everything works perfectly. I can&#39;t suppose to be always connected to internet so\u2026(see next comment)"}, {"owner": {"reputation": 23, "user_id": 7161755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18b57693528620331118c7207515ceec?s=128&d=identicon&r=PG&f=1", "display_name": "matteof93", "link": "https://stackoverflow.com/users/7161755/matteof93"}, "edited": false, "score": 0, "creation_date": 1544080609, "post_id": 53641659, "comment_id": 94151100, "body": "I can&#39;t suppose to be always connected to internet so I designed a three-step synch where at the first attempt I try with a real NTP server, the second attempt is done with a local NTP server (the same PC that collects data from the boards and elaborates them) and finally if NTP does not work I have another function to syncrhonize manually the boards with the PC. The main problem is that I need to be able to check if the query to the real NTP server was successful in order to decide if I need to query the local NTP server and then, if NTP didn&#39;t work at all, to perform manual synch."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1544120235, "post_id": 53641659, "comment_id": 94173211, "body": "You may be better off always using the PC as the timing master. All of the nodes reaching across the Internet increases the likelihood of the nodes receiving greatly different times, but if everyone gets their time from a master over a controlled local network, the real time might be a little more skewed because the master isn&#39;t a high stratum time server (but it could be with a little work!), but the times on the nodes will have a much more predictable path to the local master and should be much more tightly synchronized with that master and each other."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1544121084, "post_id": 53641659, "comment_id": 94173596, "body": "If the Internet is lost and the master starts to drift, the nodes are still kept in synch with the master and share a common time base without potentially a big hic-up when switching from Internet time to the local master (they&#39;re always on the local master) and no switch-over makes for a simpler system."}, {"owner": {"reputation": 23, "user_id": 7161755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18b57693528620331118c7207515ceec?s=128&d=identicon&r=PG&f=1", "display_name": "matteof93", "link": "https://stackoverflow.com/users/7161755/matteof93"}, "edited": false, "score": 0, "creation_date": 1544132106, "post_id": 53641659, "comment_id": 94178276, "body": "Well I managed to add a couple of lines in the source code of LWIP which is the library used by the ESP32 board to implement the &quot;networking stack&quot;, with this modification each time the SNTP procotol gets the correct time from the server I set a flag, so I am able to check if SNTP was successful or not. Then I decided to keep the previous scheme (NTP from pool, local NTP, manual synch) only because this is an assignment for a course in my university and the specifications clearly say that the system should work also in absence of internet connection and a local server is not mentioned..."}, {"owner": {"reputation": 23, "user_id": 7161755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18b57693528620331118c7207515ceec?s=128&d=identicon&r=PG&f=1", "display_name": "matteof93", "link": "https://stackoverflow.com/users/7161755/matteof93"}, "edited": false, "score": 0, "creation_date": 1544132449, "post_id": 53641659, "comment_id": 94178420, "body": "Moreover I can&#39;t suppose to have a local NTP server because I am working on Windows so to set up the Windows Time service also as NTP server I need to modify the registry, add inbound and outbound exceptions to the firewall on UDP port 123 and so on....this is something that I can do to test the system but if the user (the professor that evaluates the project in this case) tells me that he does not want to open ports on his pc and so on well I am screwed so I need to keep a backup plan and that&#39;s it: go for NTP from NTP pool, if failure go to local NTP, if NTP not available synch manually."}, {"owner": {"reputation": 23, "user_id": 7161755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18b57693528620331118c7207515ceec?s=128&d=identicon&r=PG&f=1", "display_name": "matteof93", "link": "https://stackoverflow.com/users/7161755/matteof93"}, "edited": false, "score": 0, "creation_date": 1544132682, "post_id": 53641659, "comment_id": 94178513, "body": "And incredibly I must say it works well and I see that timestamps (related to the same packet, let&#39;s say probe request by a specific device that uses its real MAC address) put by different boards are coherent with a time difference in general of 3\\4 milliseconds but most of the time they are within 2 milliseconds of difference....and frankly this is strange, I did not think that NTP was good enough to synch devices with this precision in fact at the early stages I didn&#39;t even consider the possibility of using NTP for this task."}], "owner": {"reputation": 23, "user_id": 7161755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18b57693528620331118c7207515ceec?s=128&d=identicon&r=PG&f=1", "display_name": "matteof93", "link": "https://stackoverflow.com/users/7161755/matteof93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 299, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544049831, "creation_date": 1544048485, "last_edit_date": 1544049831, "question_id": 53641659, "link": "https://stackoverflow.com/questions/53641659/c-how-to-force-ntp-update-every-few-minutes-and-check-if-the-update-was-succes", "title": "C++ how to force NTP update every few minutes and check if the update was successful", "body": "<p>I am writing a piece of code for a small device that has to perform cyclic NTP synchronization with an interval of 1 minute (more or less).\nSo this is what I do:</p>\n\n<pre><code>sntp_setoperatingmode(SNTP_OPMODE_POLL);\nif(sntp_getoperatingmode() != SNTP_OPMODE_POLL){\n    ESP_LOGE(TAG, \"Error setting SNTP operating mode...\");\n    return false;\n}\nsntp_setservername(0, (char*)NTP_SERVER);\nsntp_init(); \ntime(&amp;now);\nlocaltime_r(&amp;now, &amp;timeinfo);\nwhile(timeinfo.tm_year &lt; (2018 - 1900)){\n    vTaskDelay(1000 / portTICK_PERIOD_MS); // give some time to NTP...\n    time(&amp;now);\n    localtime_r(&amp;now, &amp;timeinfo);\n}\nsntp_stop();\n</code></pre>\n\n<p>First NTP synch is easy and goes well, from the second synch the problem will be that the system time will already be more or less equal to what I expect (for sure the tm_year value) so I do not have a way to understand if the new synch with NTP is working or if I am still reading the system time set at the previous iteration (for example 1 minute before).\nIs there any way to tell if NTP is synchronizing correctly?</p>\n\n<p>For sure I could set the system time in the past just before beginning a new synch with NTP so the condition on tm_year would hold but I would like to preserve the integrity of the system time just in case of a failure by NTP.</p>\n\n<p>Any idea?</p>\n\n<p>EDIT: I have many devices that must do the same thing at the same time so I need them to be synchronized as frequently as possible with the same NTP server. Since I can't suppose to have access to a real NTP server (because my devices won't be always connected to the web) I wrote a function that at the beginning tries to synch only on a server from the NTP pool, then I try with a local server (that I know to be always reachable). Obviously the problem is that all devices must synch with the same NTP server and I must be able to check if the synch with the real NTP server was successful or not before going on with the optional query to the local NTP server.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1544047247, "post_id": 53641405, "comment_id": 94142306, "body": "In <code>int value = 0, searchForInt, size = 0; int numsArray[size];</code>, ask yourself, how many elements can <code>numsArray</code> hold."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10605163"}, "edited": false, "score": 2, "creation_date": 1544047366, "post_id": 53641405, "comment_id": 94142355, "body": "Arrays have fixed size. You need to give this fixed size at the declaration <code>int numArray[size];</code>. You cannot increase the size later. If you want to do that use <code>std::vector</code> with its <code>push_back</code> method instead of the array."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1544047406, "post_id": 53641405, "comment_id": 94142370, "body": "<code>numsArray[size] = value;</code> will always fail, because legal locations in the array are 0 to size-1."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1544047503, "post_id": 53641405, "comment_id": 94142402, "body": "My advice is use <code>std::vector&lt;int&gt; numsArray;</code> instead of <code>int numsArray[size];</code>  then change <code>numsArray[size] = value;</code> to <code>numsArray.push_back(value).</code> also make sure you add <code>#include &lt;vector&gt;</code>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1544048653, "post_id": 53641405, "comment_id": 94142784, "body": "BTW, you get random numbers because of Undefined Behavior. You declared your array to store 0 items. Putting any more than <code>0</code> items in the array is UB."}], "answers": [{"tags": [], "owner": {"reputation": 417, "user_id": 6327684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WwIzz.gif?s=128&g=1", "display_name": "J. Willus", "link": "https://stackoverflow.com/users/6327684/j-willus"}, "is_accepted": false, "score": 1, "last_activity_date": 1544048641, "creation_date": 1544048641, "answer_id": 53641692, "question_id": 53641405, "link": "https://stackoverflow.com/questions/53641405/element-of-array-giving-random-num-c/53641692#53641692", "title": "Element of array giving random num c++", "body": "<p>Like the other comments say, use <code>std::vector</code>. You are using undefined behavior when loading numbers into your array.</p>\n\n<pre><code>int value, searchForInt = 0;\nstd::vector&lt;int&gt; numsArray;\n\nwhile (inFile &gt;&gt; value)\n{\n    numsArray.push_back(value);\n}\n// ...\ncout &lt;&lt; \"This array has \" &lt;&lt; numsArray.size() &lt;&lt; \" items.\" &lt;&lt; endl;\ncout &lt;&lt; \"The array entered by the user is as follows: \";\n\nfor (int i = 0; i &lt; numsArray.size(); i++)\n{\n    cout &lt;&lt; numsArray[i] &lt;&lt; \" \";\n}\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 8996858, "user_type": "registered", "profile_image": "https://graph.facebook.com/1992053827742415/picture?type=large", "display_name": "Renan Hiramatsu", "link": "https://stackoverflow.com/users/8996858/renan-hiramatsu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1544048641, "creation_date": 1544047183, "last_edit_date": 1544047739, "question_id": 53641405, "link": "https://stackoverflow.com/questions/53641405/element-of-array-giving-random-num-c", "title": "Element of array giving random num c++", "body": "<pre><code>int main() {\n\n    ifstream inFile(\"nums-1.txt\");\n\n    // Checks if the file opened successfully\n    if (inFile.fail())\n        cout &lt;&lt; \"Fail to open the file!\" &lt;&lt; endl;\n\n    int value = 0, searchForInt, size = 0;\n    int numsArray[size];\n\n    // Assigns each values to the array and determine size\n    while (inFile &gt;&gt; value)\n    {\n        numsArray[size] = value;\n        size++;\n    }\n\n    cout &lt;&lt; \"Enter an integer to search for:\" &lt;&lt; endl;\n    cin &gt;&gt; searchForInt;\n\n    cout &lt;&lt; \"This array has \" &lt;&lt; size &lt;&lt; \" items.\" &lt;&lt; endl;\n    cout &lt;&lt; \"The array entered by the user is as follows: \";\n\n    for (int i = 0; i &lt; size; i++)\n    {\n        cout &lt;&lt; numsArray[i] &lt;&lt; \" \";\n    }\n\n\n    inFile.close();\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>The array entered by the user is as follows: 22 -4 5 100 39 20 -1348122768 32767 -1348122768 32767 -1348122768 32767\n</code></pre>\n\n<p>What I want to output:</p>\n\n<pre><code>The array entered by the user is as follows: 22 -4 5 100 39 20 88 10 55 3 10 78 &lt;- These are the values in the secondary file.\n</code></pre>\n\n<p>I have a few 12 values in the file that I opened (nums-1.txt) and it's reading with no problem. The problem is when I try to output the whole array through a for loop, it displays until the 8th element and after that it displays random numbers for the element 9-12.</p>\n"}, {"tags": ["c++", "opengl", "glm-math"], "comments": [{"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 1, "creation_date": 1544056912, "post_id": 53641340, "comment_id": 94145148, "body": "This is a very inaccurate way to do this. There are more precise formulas to rotate a vector to another. There is no need to use any trigonometric function. Basically you calculate <code>acos</code> (which is inaccurate around one!), then glm::rotate will calculate <code>sin</code>/<code>cos</code> of this. This is a lot of unnecessary calculation, which makes the routine inaccurate and slow. A simpler, faster, more accurate version can be easily derived with using trigonometric identities."}], "answers": [{"tags": [], "owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "is_accepted": false, "score": 3, "last_activity_date": 1544057069, "last_edit_date": 1544057069, "creation_date": 1544055749, "answer_id": 53642796, "question_id": 53641340, "link": "https://stackoverflow.com/questions/53641340/rotation-accuracy-error-builds-up-too-fast/53642796#53642796", "title": "Rotation accuracy error builds up too fast?", "body": "<p>If you just want to continue rotating along the same axis, then it would probably be best to just increment the rotation angle around that axis and recompute a new matrix from that angle every time. Note that you can directly <a href=\"https://en.wikipedia.org/wiki/Rotation_matrix#Rotation_matrix_from_axis_and_angle\" rel=\"nofollow noreferrer\">compute a matrix for rotation around an arbitrary axis</a>. Building rotations from Euler Angles, for example, is generally neither necessary nor a great solution (singularities, numerically not ideal, behavior not very intuitive). There is an overload of <code>glm::rotate()</code> that takes an axis and an angle that you could use for that.</p>\n\n<p>If you really have to concatenate many arbitrary rotations around arbitrary axes, then using Quaternions to represent your rotations would potentially be numerically more stable. Since you're already using GLM, you could just use the <a href=\"https://glm.g-truc.net/0.9.9/api/a01370.html\" rel=\"nofollow noreferrer\">quaternions</a> in there. You might find <a href=\"http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-17-quaternions/#quaternions\" rel=\"nofollow noreferrer\">this tutorial</a> useful.</p>\n"}, {"tags": [], "owner": {"reputation": 4450, "user_id": 318857, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/55ee19d0dd775596dbca5ba1cd92d6ad?s=128&d=identicon&r=PG", "display_name": "fluffy", "link": "https://stackoverflow.com/users/318857/fluffy"}, "is_accepted": false, "score": 1, "last_activity_date": 1544057558, "creation_date": 1544057558, "answer_id": 53643046, "question_id": 53641340, "link": "https://stackoverflow.com/questions/53641340/rotation-accuracy-error-builds-up-too-fast/53643046#53643046", "title": "Rotation accuracy error builds up too fast?", "body": "<p>Floating-point multiplication isn't as precise as you think, and every time you multiply two floating-point numbers you lose precision -- quite rapidly, as you have discovered.</p>\n\n<p>Generally you want to store your transforms not as the result matrix, but as the steps required to get that matrix; for example, if you are doing only a single-axis transform, you store your transform as the angle and recompute the matrix each time. However, if multiple axes are involved, this gets very complicated very quickly.</p>\n\n<p>Another approach is to use an underlying representation of the transform that can itself be transformed precisely. <a href=\"https://en.wikipedia.org/wiki/Quaternion\" rel=\"nofollow noreferrer\">Quaternions</a> are very popular for this (per <a href=\"https://stackoverflow.com/a/53642796/318857\">Michael Kenzel's answer</a>), but another approach that can be easier to visualize is to use a pair of vectors that represent the transform in a way that you can reconstitute a normalized matrix. For example, you can think of your rotation as a pair of vectors, <code>forward</code> and <code>up</code>. From this you can compute your transformation matrix with e.g.:</p>\n\n<pre><code>z_axis = normalize(forward);\nx_axis = normalize(cross(up, forward));\ny_axis = normalize(cross(forward, x_axis));\n</code></pre>\n\n<p>and then you build your transform matrix from these vectors; given those axes and a <code>pos</code> for your position the (column-major) OpenGL matrix will be:</p>\n\n<pre><code>{ x_axis.x, x_axis.y, x_axis.z, 0,\n  y_axis.x, y_axis.y, y_axis.z, 0,\n  z_axis.x, z_axis.y, z_axis.z, 0,\n  pos.x,    pos.y,    pos.z,    1 }\n</code></pre>\n\n<p>Similarly, you can renormalize a transform matrix by extracting the Z and Y vectors from your matrix as <code>direction</code> and <code>up</code>, respectively, and reconstructing a new matrix from them.</p>\n\n<p>This does take a lot more computational complexity than using quaternions, but I find it much easier to wrap my head around.</p>\n"}], "owner": {"reputation": 501, "user_id": 4083078, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/54cb2765c41c930e79afcc184c78b1f1?s=128&d=identicon&r=PG&f=1", "display_name": "Octo", "link": "https://stackoverflow.com/users/4083078/octo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1544057558, "creation_date": 1544046872, "last_edit_date": 1544047352, "question_id": 53641340, "link": "https://stackoverflow.com/questions/53641340/rotation-accuracy-error-builds-up-too-fast", "title": "Rotation accuracy error builds up too fast?", "body": "<p>When applying rotations one after another, precision errors accumulate.</p>\n\n<p>But I am surprised of how fast the error builds up.</p>\n\n<p>In this example I am comparing 2 transformations that are equivalent in theory.</p>\n\n<p>In practice I get 0.02 degrees error by doing just 2 rotations instead of one.</p>\n\n<p>I was expecting the error to be lower.</p>\n\n<p>Is there a way to make the result of these 2 transformations closer? Other than using double precision variables.</p>\n\n<pre><code>#include &lt;glm/gtx/rotate_vector.hpp&gt;\n\ndouble RadToDeg(double rad) \n{\n    return rad * 180.0 / M_PI;\n}\n\nconst glm::vec3 UP(0, 0, 1);\n\nvoid CompareRotations()\n{\n    glm::vec3 v0 = UP;\n    glm::vec3 v1 = glm::normalize((glm::vec3(0.0491, 0.0057, 0.9987)));\n    glm::vec3 v2 = glm::normalize((glm::vec3(0.0493, 0.0057, 0.9987)));\n\n    glm::vec3 axis_0_to_1 = glm::cross(v0, v1);\n    glm::vec3 axis_1_to_2 = glm::cross(v1, v2);\n    glm::vec3 axis_global = glm::cross(v0, v2);\n\n    float angle_0_to_1 = RadToDeg(acos(glm::dot(v0, v1)));\n    float angle_1_to_2 = RadToDeg(acos(glm::dot(v1, v2)));\n    float angle_global = RadToDeg(acos(glm::dot(v0, v2)));\n\n    glm::vec3 v_step = UP;\n    v_step = glm::rotate(v_step, angle_0_to_1, axis_0_to_1);\n    v_step = glm::rotate(v_step, angle_1_to_2, axis_1_to_2);\n\n    glm::vec3 v_glob = UP;\n    v_glob = glm::rotate(v_glob, angle_global, axis_global);\n\n    float angle = RadToDeg(acos(glm::dot(v_step, v_glob)));\n    if (angle &gt; 0.01)\n    {\n       printf(\"error\");\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "class", "templates"], "comments": [{"owner": {"reputation": 417, "user_id": 6327684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WwIzz.gif?s=128&g=1", "display_name": "J. Willus", "link": "https://stackoverflow.com/users/6327684/j-willus"}, "edited": false, "score": 0, "creation_date": 1544047723, "post_id": 53641154, "comment_id": 94142473, "body": "Why not use an <code>std::map&lt;ID, Employee&gt;</code>?"}, {"owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "edited": false, "score": 0, "creation_date": 1544050547, "post_id": 53641154, "comment_id": 94143436, "body": "Your Employee constructor, being an out-of-class definition in the header, will cause link errors if more than one .cpp file is compiled that includes your header.  (The function will be defined in every translation unit that includes your header.)  You have 3 choices: 1) define it inside the class declaration, 2) declare it &quot;inline&quot;, or move it into a single .cpp file."}, {"owner": {"reputation": 11, "user_id": 10751601, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cTag1BPSQnY/AAAAAAAAAAI/AAAAAAAAABA/2xaVmvEc8xQ/photo.jpg?sz=128", "display_name": "ObjectBeginner", "link": "https://stackoverflow.com/users/10751601/objectbeginner"}, "reply_to_user": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "edited": false, "score": 0, "creation_date": 1544050960, "post_id": 53641154, "comment_id": 94143576, "body": "Thanks @ChrisUzdavinis. Surely it would be a problem soon so much thanks!"}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1544134763, "post_id": 53641154, "comment_id": 94179351, "body": "&quot;Making new friends&quot; by &quot;Dan Saks&quot; explains the details about this really well"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10751601, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cTag1BPSQnY/AAAAAAAAAAI/AAAAAAAAABA/2xaVmvEc8xQ/photo.jpg?sz=128", "display_name": "ObjectBeginner", "link": "https://stackoverflow.com/users/10751601/objectbeginner"}, "edited": false, "score": 0, "creation_date": 1544128265, "post_id": 53641448, "comment_id": 94176704, "body": "I made a post below. If you have a moment please help :)"}, {"owner": {"reputation": 11, "user_id": 10751601, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cTag1BPSQnY/AAAAAAAAAAI/AAAAAAAAABA/2xaVmvEc8xQ/photo.jpg?sz=128", "display_name": "ObjectBeginner", "link": "https://stackoverflow.com/users/10751601/objectbeginner"}, "edited": false, "score": 0, "creation_date": 1544134700, "post_id": 53641448, "comment_id": 94179323, "body": "Ok, made an edit to the first post! Sorry for the post before, im new there :D"}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "reply_to_user": {"reputation": 11, "user_id": 10751601, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cTag1BPSQnY/AAAAAAAAAAI/AAAAAAAAABA/2xaVmvEc8xQ/photo.jpg?sz=128", "display_name": "ObjectBeginner", "link": "https://stackoverflow.com/users/10751601/objectbeginner"}, "edited": false, "score": 0, "creation_date": 1544134912, "post_id": 53641448, "comment_id": 94179397, "body": "@ObjectBeginner in class <code>Employee</code>, the second argument for <code>operator&lt;&lt;</code> should be <code>const Employee&amp;</code>, not <code>const map_template&lt;Key, T&gt;&amp;</code>. The operator that I provided in the answer will work when declared inside <code>map_template</code> class."}], "tags": [], "owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "is_accepted": false, "score": 2, "last_activity_date": 1544047813, "last_edit_date": 1544047813, "creation_date": 1544047419, "answer_id": 53641448, "question_id": 53641154, "link": "https://stackoverflow.com/questions/53641154/how-to-add-an-operator-for-templated-class/53641448#53641448", "title": "How to add an operator&lt;&lt; for templated class?", "body": "<p>You want:</p>\n\n<pre><code>template &lt;class Key, class T&gt;\nstd::ostream&amp; operator &lt;&lt; (std::ostream&amp; out, const map_template&lt;Key, T&gt;&amp; map) {\n    // your logic on how to output the map here...\n    return out;\n}\n</code></pre>\n\n<p>so your <code>operator&lt;&lt;</code> will work with <code>map_template</code> of any specialization.</p>\n\n<p>Obviously, your <code>friend</code> approach would also be suitable, plus you would actually drop the unnecessary <code>template</code> line. If you place your <code>operator &lt;&lt;</code> declaration inside your class, this:</p>\n\n<pre><code>friend std::ostream&amp; operator &lt;&lt; (std::ostream&amp; out, const map_template&lt;Key, T&gt;&amp; map) {\n    // your logic on how to output the map here..\n    return out;\n}\n</code></pre>\n\n<p>will do just fine. Notice the lack of repeated <code>template &lt;class Key, class T&gt;</code>. Inside your class - those template types are visible and thus you can use them.</p>\n"}], "owner": {"reputation": 11, "user_id": 10751601, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cTag1BPSQnY/AAAAAAAAAAI/AAAAAAAAABA/2xaVmvEc8xQ/photo.jpg?sz=128", "display_name": "ObjectBeginner", "link": "https://stackoverflow.com/users/10751601/objectbeginner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544134530, "creation_date": 1544045989, "last_edit_date": 1544134530, "question_id": 53641154, "link": "https://stackoverflow.com/questions/53641154/how-to-add-an-operator-for-templated-class", "title": "How to add an operator&lt;&lt; for templated class?", "body": "<p>I need to add operator&lt;&lt; to make my cout working.</p>\n\n<p>Code template.cpp:</p>\n\n<pre><code>#include \"maptemplate.h\"\n\nint main(void)\n{\ntypedef unsigned int ID;                            //Identification number of Employee\nmap_template&lt;ID,Employee&gt; Database;                 //Database of employees\n\nDatabase.Add(761028073,Employee(\"Jan Kowalski\",\"salesman\",28));     //Add first employee: name: Jan Kowalski, position: salseman, age: 28,\nDatabase.Add(510212881,Employee(\"Adam Nowak\",\"storekeeper\",54));    //Add second employee: name: Adam Nowak, position: storekeeper, age: 54\nDatabase.Add(730505129,Employee(\"Anna Zaradna\",\"secretary\",32));    //Add third employee: name: Anna Zaradna, position: secretary, age: 32\n\n//cout &lt;&lt; Database &lt;&lt; endl;                         //Print databese\n\n//map_template&lt;ID,Employee&gt; NewDatabase = Database; //Make a copy of database\n\nEmployee* pE;\npE = Database.Find(510212881);       //Find employee using its ID\npE-&gt;Position = \"salesman\";          //Modify the position of employee\npE = Database.Find(761028073);     //Find employee using its ID\npE-&gt;Age = 29;             //Modify the age of employee\n\n//Database = NewDatabase;    //Update original database\n\n///cout &lt;&lt; Database &lt;&lt; endl;  //Print original database\ncout&lt;&lt;\"Wszystko dziala\"&lt;&lt;endl;\n}\n</code></pre>\n\n<p>Code: template.h</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\n// Pocz\u0105tek klasy Employee bez template\nclass Employee\n{\n private:\n public:\n Employee(string Name, string Position, int Age);\n string Name;\n int Age;\n string Position;\n\n}; // koniec klasy employee\n\n// Dodanie p\u00f3l Name, Age, Position\nEmployee::Employee(string Name, string Position, int Age)\n{\nthis-&gt;Name = Name;\nthis-&gt;Age = Age;\nthis-&gt;Position = Position;\n}\n\ntemplate &lt;class Key, class T&gt; // template &lt;klucze, dane pracownikow&gt;\nclass map_template\n{\nprivate:\nvector&lt;Key&gt; keys; // vector do przechowywania unikalnych kluczy pracownik\u00f3w\nvector&lt;T&gt; content; // vector do przechowywania danych pracownik\u00f3w\npublic:\nmap_template()\n{\n}\nvoid Add(Key key, T t);\nT* Find(Key key);\n}; // koniec klasy map_template\n\n// Dodanie do bazy (Add)\ntemplate &lt;class Key, class T&gt;\nvoid map_template&lt;Key, T&gt;::Add(Key key, T t)\n{\nkeys.push_back(key);\ncontent.push_back(t);\n}\n// Szukanie w bazie (Find)\ntemplate &lt;class Key, class T&gt;\nT* map_template&lt;Key, T&gt;::Find(Key key)\n     {\n      for (unsigned int i = 0; i &lt; keys.size(); i++)\n        if (keys[i] == key)\n        {\n            return &amp;content.at(i);\n        }\n    return nullptr;\n}\n</code></pre>\n\n<p>I was thinking how i should look at it. Its my first time using templates so i dont know how operator&lt;&lt; should look like. </p>\n\n<p>Was thinking about something like:</p>\n\n<pre><code>friend ostream &amp; operator&lt;&lt; (ostream &amp; s, teamplate&lt;something&gt;); \n</code></pre>\n\n<p>But dont really know how to add it.\nI need</p>\n\n<pre><code>cout &lt;&lt; Database &lt;&lt; endl;  \n</code></pre>\n\n<p>to work properly.\nSorry for some polish language comments.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>I tried putting this friend declaration in the class Employee but i keep getting errors :(\ncode:</p>\n\n<pre><code>class Employee\n{\nprivate:\n\npublic:\nEmployee(string Name, string Position, int Age);\nstring Name;\nint Age;\nstring Position;\nfriend ostream &amp;operator &lt;&lt; (ostream &amp;out, const map_template&lt;Key, T&gt; &amp;map);\n}\n</code></pre>\n\n<p>errors:</p>\n\n<pre><code> maptemplate.h:49:63: error: \u2018Key\u2019 was not declared in this scope\n friend ostream &amp;operator &lt;&lt; (ostream &amp;out, const map_template&lt;Key, T&gt; &amp;map);\n                                                           ^~~\n maptemplate.h:49:68: error: \u2018T\u2019 was not declared in this scope\n friend ostream &amp;operator &lt;&lt; (ostream &amp;out, const map_template&lt;Key, T&gt; &amp;map);\n                                                                ^\n maptemplate.h:49:69: error: template argument 1 is invalid\n friend ostream &amp;operator &lt;&lt; (ostream &amp;out, const map_template&lt;Key, T&gt; &amp;map);\n                                                                 ^\n maptemplate.h:49:69: error: template argument 2 is invalid\n maptemplate.h: In instantiation of \u2018std::ostream&amp; operator&lt;&lt;(std::ostream&amp;, const                     \n map_template&lt;Key, T&gt;&amp;):\n</code></pre>\n\n<p>Should i change the declaration or what? I know that Key and T are in private. Maybe thats the case?\nAnyone can help?\nI'm a begginer so :/</p>\n"}, {"tags": ["c++", "vivado-hls"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9358242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/167373276188c055aa6667330af98565?s=128&d=identicon&r=PG", "display_name": "Sean Nijjar", "link": "https://stackoverflow.com/users/9358242/sean-nijjar"}, "edited": false, "score": 0, "creation_date": 1544478658, "post_id": 53695593, "comment_id": 94282945, "body": "Indeed, this does seem to get some of my scenarios to synthesize. However, I hope that this doesn&#39;t cause the &quot;object&quot;/module to lose state between ap_start signals or between cycles. Base on UG902 (v.2018.2, pg.382) the provided example of class instantiation specifies the static keyword: <code>static CFir&lt;coef_t, data_t, acc_t&gt; fir1;</code>. I assume this is to persist state of the &quot;object&quot;/module, but I don&#39;t see the UG make any mention of <i>why</i> either way. I&#39;ll get back to this about whether or not the static keyword affects module state persistence in this case. Thank you for your help :)"}, {"owner": {"reputation": 4345, "user_id": 46192, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/76fb4d5b2112870b4bc4232ace7fc375?s=128&d=identicon&r=PG", "display_name": "haggai_e", "link": "https://stackoverflow.com/users/46192/haggai-e"}, "reply_to_user": {"reputation": 3, "user_id": 9358242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/167373276188c055aa6667330af98565?s=128&d=identicon&r=PG", "display_name": "Sean Nijjar", "link": "https://stackoverflow.com/users/9358242/sean-nijjar"}, "edited": false, "score": 0, "creation_date": 1544510009, "post_id": 53695593, "comment_id": 94290716, "body": "I believe that you&#39;re right, and using a non-static object will not persist state between ap_start signals. Perhaps you can try putting the persistent state in a different variable that you can then pass to the X object&#39;s Run() method or to its constructor."}, {"owner": {"reputation": 3, "user_id": 9358242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/167373276188c055aa6667330af98565?s=128&d=identicon&r=PG", "display_name": "Sean Nijjar", "link": "https://stackoverflow.com/users/9358242/sean-nijjar"}, "edited": false, "score": 0, "creation_date": 1544552279, "post_id": 53695593, "comment_id": 94313827, "body": "It seems like this behaviour (not supporting stream refs in this case) is probably a bug on Vivado&#39;s end, so I think your second suggestion is the approach I will take. If you can include that comment content (in case anyone else has this problem) in your answer I will accept it :) Thank you"}], "tags": [], "owner": {"reputation": 4345, "user_id": 46192, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/76fb4d5b2112870b4bc4232ace7fc375?s=128&d=identicon&r=PG", "display_name": "haggai_e", "link": "https://stackoverflow.com/users/46192/haggai-e"}, "is_accepted": true, "score": 0, "last_activity_date": 1544620358, "last_edit_date": 1544620358, "creation_date": 1544381540, "answer_id": 53695593, "question_id": 53641059, "link": "https://stackoverflow.com/questions/53641059/vivado-hls-class-with-member-of-type-hlsstreamint-leads-to-error-constant/53695593#53695593", "title": "Vivado HLS class with member of type hls::stream&lt;int&gt;&amp; leads to error: &quot;Constant &#39;&#39; has an unsynthesizable type ...&quot;", "body": "<p>I'm not sure about the underlying mechanism, but removing the <code>static</code> qualifier allows Vivado HLS 2018.2 to synthesize the example. This however makes a new instance of <code>X</code> on every top function invocation, so its fields do not persist. The example below solves that by adding another static variable in the top function for persistence and passing it by reference to <code>X</code>'s constructor.</p>\n\n<pre><code>#include &lt;hls_stream.h&gt;\n#include &lt;ap_int.h&gt;\n\nusing hls_int = ap_uint&lt;32&gt;;\n\nstruct State\n{\n    hls_int counter;\n};\n\nclass X\n{\n  private:\n    hls::stream&lt;hls_int&gt; &amp;s1;\n    hls::stream&lt;hls_int&gt; &amp;s2;\n    State&amp; state;\n\n  public:\n    X(hls::stream&lt;hls_int&gt; &amp;_s1, hls::stream&lt;hls_int&gt; &amp;_s2, State&amp; _state) :\n        s1(_s1), s2(_s2), state(_state)\n    {}\n\n    void Run()\n    {\n        hls_int s = s2.read();\n        s1.write(s + state.counter++);\n    }\n};\n\nvoid ModuleX(hls::stream&lt;hls_int&gt; &amp;s1, hls::stream&lt;hls_int&gt; &amp;s2)\n{\n    #pragma HLS INTERFACE ap_ctrl_none PORT=return\n    #pragma HLS STREAM VARIABLE=s1 DEPTH=1\n    #pragma HLS STREAM VARIABLE=s2 DEPTH=1\n\n    static State state {0};\n    X x {s1, s2, state};\n\n    x.Run();\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9358242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/167373276188c055aa6667330af98565?s=128&d=identicon&r=PG", "display_name": "Sean Nijjar", "link": "https://stackoverflow.com/users/9358242/sean-nijjar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 746, "favorite_count": 0, "accepted_answer_id": 53695593, "answer_count": 1, "score": 0, "last_activity_date": 1544620358, "creation_date": 1544045405, "question_id": 53641059, "link": "https://stackoverflow.com/questions/53641059/vivado-hls-class-with-member-of-type-hlsstreamint-leads-to-error-constant", "title": "Vivado HLS class with member of type hls::stream&lt;int&gt;&amp; leads to error: &quot;Constant &#39;&#39; has an unsynthesizable type ...&quot;", "body": "<p>I'm trying to see if it is possible to instantiate a class in vivado_hls that has hls::stream&lt;> reference members so that I can directly read/write the stream without having to pass the stream as an argument down the call chain.</p>\n\n<p>NOTE: This is in vivado_hls 2018.2 and the top level module for this project is \"ModuleX\"\nConsider the simplified scenario below:</p>\n\n<pre><code>#include &lt;hls_stream.h&gt;\n#include &lt;ap_int.h&gt;\n\nusing hls_int = ap_uint&lt;32&gt;;\n\nclass X\n{\n  private:\n    hls::stream&lt;hls_int&gt; &amp;s1;\n    hls::stream&lt;hls_int&gt; &amp;s2;\n\n  public:\n    X(hls::stream&lt;hls_int&gt; &amp;_s1, hls::stream&lt;hls_int&gt; &amp;_s2) :\n        s1(_s1), s2(_s2)\n    {}\n\n    void Run()\n    {\n        hls_int s = s2.read();\n        hls_int out = s * 2;\n        s1.write(out);\n    }\n};\n\nvoid ModuleX(hls::stream&lt;hls_int&gt; &amp;s1, hls::stream&lt;hls_int&gt; &amp;s2)\n{\n    #pragma HLS INTERFACE ap_ctrl_none PORT=return\n    #pragma HLS STREAM VARIABLE=s1 DEPTH=1\n    #pragma HLS STREAM VARIABLE=s2 DEPTH=1\n\n    static X x {s1, s2};\n\n    x.Run();\n}\n</code></pre>\n\n<p>With this approach, I get the following error: <code>ERROR: [SYNCHK 200-11] ClassWithStreamRefs.cpp:18: Constant 'x.s2.V.V' has an unsynthesizable type 'i32P*' (possible cause(s): pointer to pointer or global pointer).</code></p>\n\n<p>I understand that under-the-hood, the compiler is probably storing the reference as a pointer-to the stream, but that should be a bug with the tooling for this scenario as far as I'm considered since it is blocking, what I see as valid HLS.</p>\n\n<p>Hopefully there is another way to implement what I'm looking for (references, not values are stored in the class).</p>\n\n<p>Something else I tried that worked is below. However, it's highly undesirable because the approach adds 2 clock cycles of latency (1 each at the ingress and egress - for no good reason).</p>\n\n<pre><code>#include &lt;hls_stream.h&gt;\n#include &lt;ap_int.h&gt;\n\nusing hls_int = ap_uint&lt;32&gt;;\n\nclass X\n{\n  public:\n    hls::stream&lt;hls_int&gt; s1;\n    hls::stream&lt;hls_int&gt; s2;\n    X()\n    {\n        #pragma HLS STREAM VARIABLE=s1 DEPTH=1\n        #pragma HLS STREAM VARIABLE=s2 DEPTH=1\n    }\n\n    void Run()\n    {\n        hls_int s = s2.read();\n        hls_int out = s * 2;\n        s1.write(out);\n    }\n};\n\nvoid ModuleX(hls::stream&lt;hls_int&gt; &amp;s1, hls::stream&lt;hls_int&gt; &amp;s2)\n{\n    #pragma HLS INTERFACE ap_ctrl_none PORT=return\n    #pragma HLS INLINE\n    static X x;\n\n    x.s2.write(s2.read());\n    x.Run();\n    s1.write(x.s1.read());\n}\n</code></pre>\n\n<p>Here's a sample tcl script (although it's basically just autogenerated by vivado_hls)</p>\n\n<pre><code>open_project ClassWithStreamRef\nset_top ModuleX\nadd_files ClassWithStreamRefs.cpp -cflags \"-std=c++11\"\nopen_solution \"solution1\"\nset_part {xczu19eg-ffvc1760-2-i} -tool vivado\ncreate_clock -period 10 -name default\ncsynth_design\n</code></pre>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 3, "creation_date": 1544044818, "post_id": 53640896, "comment_id": 94141342, "body": "To use C++ you need to be a good speller, and always use either &quot;ierat&quot; or &quot;iterat&quot;, but not both. Spelling is crucial, when it comes to C++."}, {"owner": {"reputation": 2310, "user_id": 9185253, "user_type": "registered", "profile_image": "https://graph.facebook.com/114451586026362/picture?type=large", "display_name": "Maestro", "link": "https://stackoverflow.com/users/9185253/maestro"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1544045114, "post_id": 53640896, "comment_id": 94141478, "body": "@SamVarshavchik: I didn&#39;t get what you mean?"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1544045271, "post_id": 53640896, "comment_id": 94141557, "body": "It means that your original question spelled the class as <code>ierat</code> in one place and <code>iterat</code> in the other case. Unfortunately computers aren&#39;t smart enough to recognize typos and fix it themselves. It&#39;s up to carbon-based life-forms to make sure that everything is spelled correctly all the time. I think I briefly saw that typo corrected but reverted because of a colliding question edit. So, either the current version of the question is correct, and you need to fix your spelling; or the shown code is not the real code with the error, but manually typed-in fake code. Wondering which is the case."}, {"owner": {"reputation": 2310, "user_id": 9185253, "user_type": "registered", "profile_image": "https://graph.facebook.com/114451586026362/picture?type=large", "display_name": "Maestro", "link": "https://stackoverflow.com/users/9185253/maestro"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1544045745, "post_id": 53640896, "comment_id": 94141762, "body": "@SamVarshavchik: That is because the class is a bit big thus I wrote it manually which contains some spell mistakes. But no it is edited."}, {"owner": {"reputation": 1485, "user_id": 138264, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mZr81.png?s=128&g=1", "display_name": "natersoz", "link": "https://stackoverflow.com/users/138264/natersoz"}, "edited": false, "score": 0, "creation_date": 1544046095, "post_id": 53640896, "comment_id": 94141925, "body": "Best to just spell it out &#39;iterator&#39; - it is what every one else is used to seeing and they will know exactly what you mean: A forward non-const iterator."}, {"owner": {"reputation": 2310, "user_id": 9185253, "user_type": "registered", "profile_image": "https://graph.facebook.com/114451586026362/picture?type=large", "display_name": "Maestro", "link": "https://stackoverflow.com/users/9185253/maestro"}, "reply_to_user": {"reputation": 1485, "user_id": 138264, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mZr81.png?s=128&g=1", "display_name": "natersoz", "link": "https://stackoverflow.com/users/138264/natersoz"}, "edited": false, "score": 0, "creation_date": 1544046589, "post_id": 53640896, "comment_id": 94142100, "body": "@natersoz: Ok I edited it now as you suggested."}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1544047111, "post_id": 53640896, "comment_id": 94142268, "body": "Please don&#39;t keep editing the question."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1544047138, "post_id": 53640896, "comment_id": 94142275, "body": "You need to use <code>typename</code> outside of a <code>class Template</code> that uses a nested class or struct to declare it a type!"}], "answers": [{"tags": [], "owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "is_accepted": false, "score": 5, "last_activity_date": 1544047066, "last_edit_date": 1544047066, "creation_date": 1544045382, "answer_id": 53641054, "question_id": 53640896, "link": "https://stackoverflow.com/questions/53640896/how-to-implement-a-member-function-outside-the-generic-class-that-returns-an-emb/53641054#53641054", "title": "How to implement a member function outside the generic class that returns an embedded type?", "body": "<p>You need to add <code>typename</code> this way:</p>\n\n<pre><code>template&lt;class T&gt;\ntypename vec&lt;T&gt;::iterator vec&lt;T&gt;::begin() { // typename here is necessary\n\n    iteraror tmp;\n    tmp.elem = elem;\n\n    return tmp;\n} \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "is_accepted": false, "score": 4, "last_activity_date": 1544049139, "last_edit_date": 1544049139, "creation_date": 1544047538, "answer_id": 53641474, "question_id": 53640896, "link": "https://stackoverflow.com/questions/53640896/how-to-implement-a-member-function-outside-the-generic-class-that-returns-an-emb/53641474#53641474", "title": "How to implement a member function outside the generic class that returns an embedded type?", "body": "<p>Your compiler errors explains exactly what is happening:</p>\n\n<blockquote>\n  <p>And I get the warning:</p>\n\n<pre><code>Severity    Code    Description Project File Line \nWarning C4346   iterator': dependent name is not a type.\n</code></pre>\n  \n  <p>And an error:</p>\n\n<pre><code>Severity    Code    Description Project File    Line\nError   C2061   syntax error: identifier 'iterator'.\n</code></pre>\n</blockquote>\n\n<hr>\n\n<p>The compiler doesn't know whether <code>vec&lt;T&gt;::iterator</code> is a <code>member variable</code> of <code>vec&lt;T&gt;</code> or a <code>nested type</code>.</p>\n\n<p>We must use <code>typename</code> to remove this ambiguity as user <code>Raindrop7</code> has shown in their answer. They showed you how to fix your compiler error where I've explained why you are getting it.</p>\n\n<p>Without <code>typename</code> the code will generate ambiguous code!</p>\n\n<p>With the function outside of the class being as is:</p>\n\n<blockquote>\n<pre><code>template&lt;class T&gt;\nvec&lt;T&gt;::iterator vec&lt;T&gt;::begin() {\n\n    vec&lt;T&gt;::iterator tmp;\n    tmp.elem = elem;\n\n    return tmp;\n}\n</code></pre>\n</blockquote>\n\n<p>Here is why it is producing ambiguity:</p>\n\n<p>Did you mean:</p>\n\n<blockquote>\n<pre><code>vec&lt;t&gt;::iterator as in\n\ntemplate&lt;typename T&gt;\nclass vec {\npublic:\n    T iterator; \n};\n</code></pre>\n  \n  <p>Or </p>\n\n<pre><code>vec&lt;t&gt;::iterator as in \n\ntemplate&lt;typename T&gt;\nclass vec { \npublic:\n    struct iterator { \n    }; \n};\n</code></pre>\n</blockquote>\n\n<p>Due to the fact that <code>iterator</code> is a <code>class</code> or <code>struct</code> you must <code>define</code> it as a <code>type</code>, and this is where <code>typename</code> comes into play. This allows the compiler to resolve the <code>ambiguity</code> by giving the compiler a hint that <code>iterator</code> is a <code>type</code> and not a <code>member</code>. Thus it will force the compiler to use this:</p>\n\n<pre><code>template&lt;typename T&gt;\nclass vec {\npublic:\n    struct iterator {\n    };\n};\n</code></pre>\n\n<p>instead of this:</p>\n\n<pre><code>template&lt;typename T&gt;\nclass vec {\npublic:\n    T iterator;\n};\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/53357852/1757805\">Here</a> is another <code>Q/A</code> that would have produced a similar compiler error.</p>\n"}], "owner": {"reputation": 2310, "user_id": 9185253, "user_type": "registered", "profile_image": "https://graph.facebook.com/114451586026362/picture?type=large", "display_name": "Maestro", "link": "https://stackoverflow.com/users/9185253/maestro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 3, "answer_count": 2, "score": 1, "last_activity_date": 1544049139, "creation_date": 1544044680, "last_edit_date": 1544047336, "question_id": 53640896, "link": "https://stackoverflow.com/questions/53640896/how-to-implement-a-member-function-outside-the-generic-class-that-returns-an-emb", "title": "How to implement a member function outside the generic class that returns an embedded type?", "body": "<p>I am trying to simulate <code>class vector</code> and its <code>iterator</code> so this is the problem:</p>\n\n<pre><code>template&lt;class T&gt;\nclass vec {\n    public:\n        vec();\n    vec(const int);\n    virtual ~vec();\n\n    T* getElem()const;\n    const int size()const;\n\n    void resize(const int);\n    void print()const;\n\n    T&amp; operator[](int);\n\n\n    struct iterator {\n        T* elem;\n        iterator* operator++();\n    };\n\n    iterator begin();\n    iterator end();\n\nprivate:\n    T* elem;\n    int sz;\n};\n</code></pre>\n\n<p>Now I need to implement <code>iterator begin();</code> outside the class <code>vec</code>:</p>\n\n<pre><code>template&lt;class T&gt;\n vec&lt;T&gt;::iterator vec&lt;T&gt;::begin() {\n\n    vec&lt;T&gt;::iterator tmp;\n    tmp.elem = elem;\n\n    return tmp;\n}\n</code></pre>\n\n<p>And I get the warning:</p>\n\n<pre><code>Severity    Code    Description Project File Line \nWarning C4346   iterator': dependent name is not a type.\n</code></pre>\n\n<p>And an error:</p>\n\n<pre><code>Severity    Code    Description Project File    Line\nError   C2061   syntax error: identifier 'iterator'.\n</code></pre>\n"}, {"tags": ["c++", "qt", "signals", "qobject", "qmap"], "comments": [{"owner": {"reputation": 2126, "user_id": 3558278, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/bCVxE.jpg?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/3558278/deep"}, "edited": false, "score": 0, "creation_date": 1544044913, "post_id": 53640741, "comment_id": 94141378, "body": "Just create in your app global extern(?) QObject for emit some signals and use this object when you need connect (queued connections for threads) or/and emit signals ( emit mySignalsObject.foo() )."}], "answers": [{"tags": [], "owner": {"reputation": 389, "user_id": 4711135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tIVG2.jpg?s=128&g=1", "display_name": "Alexander Chernin", "link": "https://stackoverflow.com/users/4711135/alexander-chernin"}, "is_accepted": true, "score": 1, "last_activity_date": 1544078974, "creation_date": 1544078974, "answer_id": 53645982, "question_id": 53640741, "link": "https://stackoverflow.com/questions/53640741/how-can-i-make-a-qmap-object-emit-a-signal-when-qmapinsert-is-called/53645982#53645982", "title": "How can I make a QMap object emit a signal when `QMap::insert(...)` is called?", "body": "<p>It's easy:</p>\n\n<pre><code>class MyMap : public QObject\n{\n     Q_OBJECT;\npublic slots:\n    void insert(... key, ... value)\n    {\n        _map.insert(key, value);\n        emit isInserted(key);\n    }\nsignals:\n    void isInserted(... key);\nprivate:\n    QMap&lt;..., ...&gt; _map;\n}\n</code></pre>\n"}], "owner": {"reputation": 1672, "user_id": 2158002, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/OiczH.jpg?s=128&g=1", "display_name": "Akiva", "link": "https://stackoverflow.com/users/2158002/akiva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 373, "favorite_count": 0, "accepted_answer_id": 53645982, "answer_count": 1, "score": -1, "last_activity_date": 1544078974, "creation_date": 1544044036, "question_id": 53640741, "link": "https://stackoverflow.com/questions/53640741/how-can-i-make-a-qmap-object-emit-a-signal-when-qmapinsert-is-called", "title": "How can I make a QMap object emit a signal when `QMap::insert(...)` is called?", "body": "<p>Pretty straightforward question. </p>\n\n<p><code>QMap</code> does not inherit <code>QObject</code>, so I'd like to know if there is an easy Qt Way of making it <code>emit mySignal(MyEnum state)</code>.</p>\n\n<p>If you are asking why I do not just emit a signal in my code when I call the function <code>QMap::insert(...)</code>, its because this is done in a template... which \"\"\"I think\"\"\" is impossible:</p>\n\n<p><a href=\"http://doc.qt.io/archives/qt-4.8/templates.html\" rel=\"nofollow noreferrer\">http://doc.qt.io/archives/qt-4.8/templates.html</a></p>\n\n<p>If it helps, the <code>QMap</code> object I am using is global, and will be used between threads.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1544044403, "post_id": 53640723, "comment_id": 94141165, "body": "Where is your code to reproduce the error?"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1544044620, "post_id": 53640723, "comment_id": 94141260, "body": "... specifically, without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, it is logically impossible to determine what the problem is. The best you can hope for is random guesses. I suppose that if one&#39;s fine with random guesses, this is good enough, but if you hope for a reasonable chance of getting a correct explanation, an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> is required."}, {"owner": {"reputation": 571, "user_id": 4096272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345c800d1d42a321a26ce5033e75f437?s=128&d=identicon&r=PG&f=1", "display_name": "Tony J", "link": "https://stackoverflow.com/users/4096272/tony-j"}, "edited": false, "score": 0, "creation_date": 1544045081, "post_id": 53640723, "comment_id": 94141460, "body": "Post the ctor code for both classes. Are SFLRibbonBarEx and SFLCaptionBarEx typedefs?"}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1544045153, "post_id": 53640723, "comment_id": 94141505, "body": "Not sure if it would make a difference or not; but in your base class you have declared Ribbon then Caption, but in your inherited class you have declared Caption then Ribbon. I don&#39;t know if the ordering of these would make such a difference, but try reversing the order of the declarations in your derived class and see if you get the same kind of error."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1544045382, "post_id": 53640723, "comment_id": 94141611, "body": "I have both Visual Studio 2013 and 17 on my pc. If you are able to post your entire working 2013 solution and source to github I could try it on my machine in 2013 first to see it working then try to port it over to 2017 to see if I could produce similar results."}, {"owner": {"reputation": 178, "user_id": 2073267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/IXBta.jpg?s=128&g=1", "display_name": "Doug Porter", "link": "https://stackoverflow.com/users/2073267/doug-porter"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1544045573, "post_id": 53640723, "comment_id": 94141689, "body": "@samVarshavchik I&#39;ll see if I can reproduce this in a minimal case."}, {"owner": {"reputation": 178, "user_id": 2073267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/IXBta.jpg?s=128&g=1", "display_name": "Doug Porter", "link": "https://stackoverflow.com/users/2073267/doug-porter"}, "reply_to_user": {"reputation": 571, "user_id": 4096272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345c800d1d42a321a26ce5033e75f437?s=128&d=identicon&r=PG&f=1", "display_name": "Tony J", "link": "https://stackoverflow.com/users/4096272/tony-j"}, "edited": false, "score": 0, "creation_date": 1544045612, "post_id": 53640723, "comment_id": 94141706, "body": "@tonyJ Neither SFLRibbonBarEx nor SFLCaptionBarEx are typedefs."}, {"owner": {"reputation": 178, "user_id": 2073267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/IXBta.jpg?s=128&g=1", "display_name": "Doug Porter", "link": "https://stackoverflow.com/users/2073267/doug-porter"}, "reply_to_user": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1544045697, "post_id": 53640723, "comment_id": 94141741, "body": "@francisCugler I&#39;ve tried changing the order, but had same result either way.  I&#39;ve still got VS2013 on my machine and the code works (and I couldn&#39;t share the code anyway).  If I can reproduce it in a small example I&#39;ll share that."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1544046843, "post_id": 53640723, "comment_id": 94142183, "body": "@DougPorter Okay I wasn&#39;t sure if the order of the declarations might of made a difference between compiler versions or not. As of the sharing of code that is understandable due to copy right in many cases. But to have an example to play around with on my own machine to compare between versions of Visual Studio would enable me to try and help you to resolve your current issue or problem."}, {"owner": {"reputation": 178, "user_id": 2073267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/IXBta.jpg?s=128&g=1", "display_name": "Doug Porter", "link": "https://stackoverflow.com/users/2073267/doug-porter"}, "reply_to_user": {"reputation": 571, "user_id": 4096272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345c800d1d42a321a26ce5033e75f437?s=128&d=identicon&r=PG&f=1", "display_name": "Tony J", "link": "https://stackoverflow.com/users/4096272/tony-j"}, "edited": false, "score": 0, "creation_date": 1544048500, "post_id": 53640723, "comment_id": 94142742, "body": "@tonyj Sorry, forgot the constructor part of your comment.  My derived class does not have a constructor.  I posted the constructor for the base class, SFLFluentUI, in an edit in my post."}, {"owner": {"reputation": 571, "user_id": 4096272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345c800d1d42a321a26ce5033e75f437?s=128&d=identicon&r=PG&f=1", "display_name": "Tony J", "link": "https://stackoverflow.com/users/4096272/tony-j"}, "edited": false, "score": 2, "creation_date": 1544054126, "post_id": 53640723, "comment_id": 94144469, "body": "My gut feeling without more code is that there is a problem of the derived class being sliced, or m_wndCaptionBar wasn&#39;t constructed properly. Alternatively, it could be in DerivedFluentUI::ImplRibbonBar(), where you memory stomped m_wndCaptionBar. Again without more code, it&#39;s really hard to say."}], "owner": {"reputation": 178, "user_id": 2073267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/IXBta.jpg?s=128&g=1", "display_name": "Doug Porter", "link": "https://stackoverflow.com/users/2073267/doug-porter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1554321537, "creation_date": 1544043978, "last_edit_date": 1554321537, "question_id": 53640723, "link": "https://stackoverflow.com/questions/53640723/member-object-address-seems-to-change-when-accessed-from-inherited-class", "title": "Member object address seems to change when accessed from inherited class", "body": "<p>My code is C++ under Visual Studio 2017.  It worked correctly under VS2013, but after upgrading to VS2017 fails in 32-bit builds (but still works in 64-bit builds).</p>\n\n<pre><code>class DerivedFluentUI: public SFLFluentUI\n{\n    friend CMainFrame;\n\nprotected:\n    virtual BOOL ImplCaptionBar (CWnd* pParentWnd);\n    virtual BOOL ImplRibbonBar (CWnd* pParentWnd, BOOL bCreateAppButton = TRUE, BOOL bCreateBackstageFileTab = FALSE) {return m_wndRibbonBar.Create(pParentWnd);}\n};\n</code></pre>\n\n<p>The base class, with much code removed (it's 200 lines long), is:</p>\n\n<pre><code>class SFLFluentUI\n{\nprotected:\n    virtual BOOL ImplRibbonBar(CWnd* pParentWnd, BOOL bCreateAppButton = TRUE, BOOL bCreateBackstageFileTab = FALSE);\n    virtual BOOL ImplCaptionBar(CWnd* pParentWnd);\n\n    SFLRibbonBarEx              m_wndRibbonBar;\n    SFLCaptionBarEx             m_wndCaptionBar;\n};\n</code></pre>\n\n<p>In DerivedFluentUI::ImplCaptionBar, I call (among other things):</p>\n\n<pre><code>m_wndCaptionBar.Create (...)\n</code></pre>\n\n<p>which crashes in 32 bit builds.</p>\n\n<p>When I step into the call to <code>m_wndCaptionBar.Create</code> in the debugger, I see that the \"this\" pointer is not equal to the address of <code>m_wndCaptionBar</code> (as viewed from <code>ImplCaptionBar</code>).  Last time I checked, they were 0x10d46538 and 0x10d46530, so 8 bytes apart.</p>\n\n<p>If I step into the similar call in <code>DerivedFluentUI::ImplRibbonBar()</code> to <code>m_wndRibbonBar.Create</code>, the \"this\" pointer is the same as the address of <code>m_wndRibbonBar</code> and it executes successfully.</p>\n\n<p>Stranger still, if I do this in a 64 bit build, then this all works as expected, and the \"this\" pointer in the call to <code>m_wndCaptionBar.Create</code> is equal to <code>&amp;m_wndCaptionBar</code> (as viewed from <code>DerivedFluentUI::ImplCaptionBar</code>) .</p>\n\n<p>If I call <code>__super::ImplCaptionBar (...)</code> (which itself calls <code>m_wndCaptionBar.Create</code>) from <code>DerivedFluentUI::ImplCaptionBar</code>, then it works correctly, even in 32-bit builds.</p>\n\n<p>I'm clearly misunderstanding something, as I have no idea why this might happen.</p>\n\n<p>Help?!</p>\n\n<p>Edit, per request:\nDerivedFluentUI does not have a constructor or destructor, simply overrides those 2 virtual functions.</p>\n\n<p>Constructor for base class, SFLFluentUI:</p>\n\n<pre><code>SFLFluentUI::SFLFluentUI(void)\n{\n    m_pMainPanel                    = NULL;\n    m_bLoadedFromResource           = FALSE;\n    m_bRibbonInitialized            = FALSE;\n    m_bFreqCmdPanels                = FALSE;\n    m_bFreqCmdPanelsInitialized     = FALSE;\n    m_bIsUsingMainApplicationButton = FALSE;\n    m_bIsBackstageFileTabCreated    = FALSE;\n    m_pBackstagePropertySheet       = NULL;\n    m_bIsBackstageFileWindowVisible = FALSE;\n    m_bRibbonMinimizedBeforeBackstage = FALSE;\n    m_bHasSysMenu                   = FALSE;\n\n    if (NULL == g_FluentUI)\n    {\n        g_FluentUI = this;\n    }\n}\n</code></pre>\n\n<p>**Edit 12/6/2018</p>\n\n<p>This is using the Stingray libraries from RogueWave. I was able to reproduce this in a sample of theirs, which is about as minimal as it gets for a large UI library like we're talking about.  Posting it here doesn't make much sense since you'd need their libraries to run it, but it does mean that I can involve RogueWave technical support.</p>\n\n<p>I'll update the case when they / we figure something out.</p>\n\n<p>**Edit 12/7/2018</p>\n\n<p>The crash seems to be OS dependent.  </p>\n\n<p>Windows 7:  Does not crash (tested on 2 machines)</p>\n\n<p>Windows 10: Crashes (tested on 2 machines, 3rd pending)\nWindows Server 2012:  Crashes (tested on 1 machine)</p>\n\n<p>I update in case this suggests to anyone some obscure setting or possible chant or incantation I might throw at the issue.  I'm certainly to the point where chanting seems like good science to me (though I must admit that shouting at my machine hasn't fixed things...).</p>\n\n<p>**Edit 4/3/2019</p>\n\n<p>I never figured this out.  Eventually gave up and redesigned things to avoid using DerivedFluentUI, instead modifying the code in the Stingray library to do what I want.  I'm not pleased with this, but...</p>\n\n<p>If anyone ever has insight into this, please update the case.  I'd love to know the problem. </p>\n"}, {"tags": ["c++", "list-initialization", "deleted-functions", "defaulted-functions"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1544043371, "post_id": 53640546, "comment_id": 94140675, "body": "I can&#39;t see how 1 compiles. <code>StructTest&lt;int&gt; A{};</code> needs the default constructor."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1544043496, "post_id": 53640546, "comment_id": 94140728, "body": "And yet it does!"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1544043630, "post_id": 53640546, "comment_id": 94140788, "body": "@user4581301 Yes, it compiles. I am writing an answer now why."}, {"owner": {"reputation": 127, "user_id": 8842602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54e174b9d22c048f2f152a9790bd66c2?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/8842602/andy"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1544043735, "post_id": 53640546, "comment_id": 94140849, "body": "Hi @user4581301, I think that it&#39;s using direct-list-initialization for A, so does not need a default constructor, but I&#39;m not totaly sure(hence the final line in the question!)!"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1544043751, "post_id": 53640546, "comment_id": 94140854, "body": "aggregate of nothing. Didn&#39;t even consider that. Sneaky."}, {"owner": {"reputation": 127, "user_id": 8842602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54e174b9d22c048f2f152a9790bd66c2?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/8842602/andy"}, "edited": false, "score": 0, "creation_date": 1544046296, "post_id": 53640546, "comment_id": 94141996, "body": "Thank you NathanOliver, SergeyA, and Eljay for expanding my knowledge!"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1544051381, "post_id": 53640546, "comment_id": 94143718, "body": "Cases 2 and 2+4 use list init for A, not default constructor.  Also you say that case 1+4 uses default constructor but it clearly doesn&#39;t since that constructor is deleted."}], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 8842602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54e174b9d22c048f2f152a9790bd66c2?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/8842602/andy"}, "edited": false, "score": 0, "creation_date": 1544045058, "post_id": 53640677, "comment_id": 94141450, "body": "Hi @NathanOliver, Thank you very much! I had missed the bit about the non default/deleted constructors and the agrigate classes.  I do have one further question about your answer though, the 1+4 and 2+5 cases, do these both call exactly the same constructors? I&#39;d tried to read the C++ reference again, and I&#39;d started to convince myself that 1+4 performs agrigate initialisation for A and A1 (as the defaulr constructor is delete by line 1), but 2+4 calls the default constructor for A, and aggregate initialization for A1?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1544045065, "post_id": 53640677, "comment_id": 94141456, "body": "Note that what OP <i>calls List init</i> actually is list initialization. Indeed, it is aggregate initialization as well to be precise. Aggregate initialization is a form of list initialization."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 127, "user_id": 8842602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54e174b9d22c048f2f152a9790bd66c2?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/8842602/andy"}, "edited": false, "score": 0, "creation_date": 1544045519, "post_id": 53640677, "comment_id": 94141664, "body": "@Andy In 2 + 4 it is still aggregate initialized, it is just that it will use the default member initializer: <a href=\"https://timsong-cpp.github.io/cppwp/dcl.init.aggr#5.1\" rel=\"nofollow noreferrer\">timsong-cpp.github.io/cppwp/dcl.init.aggr#5.1</a>"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 9, "last_activity_date": 1544045617, "last_edit_date": 1544045617, "creation_date": 1544043686, "answer_id": 53640677, "question_id": 53640546, "link": "https://stackoverflow.com/questions/53640546/c11-deleted-defaulted-constructors/53640677#53640677", "title": "C++11 deleted/defaulted constructors", "body": "<blockquote>\n  <p>1, Compiles. List init's for A and A1, and the default copy constructor for A2</p>\n</blockquote>\n\n<p>What you call <em>List init</em> in this case is actually <a href=\"https://en.cppreference.com/w/cpp/language/aggregate_initialization\" rel=\"noreferrer\">aggregate initialization</a> because <code>StructTest</code> is an aggregate.  This is allowed because the presence of an explicitly defaulted or deleted constructor still makes the class an aggregate.</p>\n\n<blockquote>\n  <p>2, Compiles. Default constructor for A and list init A1?, and the default copy constructor for A2</p>\n</blockquote>\n\n<p><code>A1</code> is aggregate initialized like what happened in 1.  The rest it correct</p>\n\n<blockquote>\n  <p>1 + 3 or 2 + 3, Fails to compile because of the deleted copy constructor for A2</p>\n</blockquote>\n\n<p>This is the expected behavior since the copy constructor is marked as deleted.</p>\n\n<blockquote>\n  <p>1 + 4, Compiles. Default constructor for A and list init A1?, and the default copy constructor for A2</p>\n</blockquote>\n\n<p>Again, aggregate initialization for <code>A</code> and <code>A1</code></p>\n\n<blockquote>\n  <p>2 + 4, Compiles. Default constructor for A and list init A1?, and the default copy constructor for A2</p>\n</blockquote>\n\n<p><code>A</code> and <code>A1</code> will be aggregate initialized but it will use the default member initializer of <code>Var</code> when initializing <code>A</code> per <a href=\"https://timsong-cpp.github.io/cppwp/dcl.init.aggr#5.1\" rel=\"noreferrer\">[dcl.init.aggr]/5.1</a></p>\n\n<blockquote>\n  <p>1 + 5, Fails to compile. Says A is missing(deleted) a default constructor, and no matching constructor for A1?</p>\n</blockquote>\n\n<p>5 is a user provided non defaulted or deleted constructor.  This means <code>StructTest</code> is no longer an aggregate and you cannot aggregate initialize it anymore.</p>\n\n<blockquote>\n  <p>2 + 5, Fails to compile. No matching constructor for A1?</p>\n</blockquote>\n\n<p>Same reason as 1 + 5</p>\n"}, {"comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1544044865, "post_id": 53640744, "comment_id": 94141360, "body": "Also related, <a href=\"https://en.cppreference.com/w/cpp/types/is_aggregate\" rel=\"nofollow noreferrer\">std::is_aggregate</a>."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 3, "last_activity_date": 1544044042, "creation_date": 1544044042, "answer_id": 53640744, "question_id": 53640546, "link": "https://stackoverflow.com/questions/53640546/c11-deleted-defaulted-constructors/53640744#53640744", "title": "C++11 deleted/defaulted constructors", "body": "<p>What you refer to as <code>list init</code> is actually called aggregate initialization. Your class is an aggregate in all cases but when you uncomment line 5 - at which point it stops being an aggregate. An aggregate class is a class where <em>all</em> constructors are either defaulted (explicitly or implicitly) or deleted. You have only one non-defaulted, non-deleted constructor, so unless you uncomment this, your class remains an aggregate.</p>\n\n<p>With this in mind, most of your example revolve around aggregate initialization, except the case where you explicitly prohibit copy by deleting copy-constructor or add non-defaulted copy-constructor and make the class non-aggregate.</p>\n\n<p>More on aggregate and aggregate initialization: <a href=\"https://en.cppreference.com/w/cpp/language/aggregate_initialization\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/language/aggregate_initialization</a></p>\n"}, {"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 6, "last_activity_date": 1544051674, "creation_date": 1544051674, "answer_id": 53642242, "question_id": 53640546, "link": "https://stackoverflow.com/questions/53640546/c11-deleted-defaulted-constructors/53642242#53642242", "title": "C++11 deleted/defaulted constructors", "body": "<p>(This is additional information to the other answers)</p>\n\n<p>The behaviour of this code is different for C++11, C++14/17, and C++20! Due to the changing definition of <em>aggregate</em>.</p>\n\n<p>In C++11 the class was not an aggregate because it has a <em>brace-or-equal-initializer</em> (the <code>= -1</code>), so case 1 would not compile.</p>\n\n<p>In C++14 and 17 , the class is an aggregate, the other answers cover this case.</p>\n\n<p>In C++20 the class will not be an aggregate again because there is a new rule that any user-declared constructor disqualifies a class from being an aggregate;  so case 1 will stop compiling again, and in case 2, <code>StructTest&lt;int&gt; A1{1};</code> will not compile due to too many arguments to the constructor, etc.</p>\n"}], "owner": {"reputation": 127, "user_id": 8842602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54e174b9d22c048f2f152a9790bd66c2?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/8842602/andy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 1, "accepted_answer_id": 53640677, "answer_count": 3, "score": 4, "last_activity_date": 1544051674, "creation_date": 1544043091, "last_edit_date": 1544046032, "question_id": 53640546, "link": "https://stackoverflow.com/questions/53640546/c11-deleted-defaulted-constructors", "title": "C++11 deleted/defaulted constructors", "body": "<p>I'm a bit confused about how/why the constructors are called in C++11 and C++17.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\n//---\n\ntemplate&lt;typename T&gt;\nstruct StructTest\n{\npublic:\n  const T Var = -1;\n\n  //---\n\n  // constexpr StructTest() = delete;  // 1\n  // constexpr StructTest() = default; // 2\n\n  // constexpr StructTest(const StructTest &amp;Source) = delete;                  // 3\n  // constexpr StructTest(const StructTest &amp;Source) = default;                 // 4\n  // constexpr StructTest(const StructTest &amp;Source) {cout &lt;&lt; \"Copy\" &lt;&lt; endl;}; // 5\n};\n\n//---\n\nStructTest&lt;int&gt; A{};\nStructTest&lt;int&gt; A1{1};\nStructTest&lt;int&gt; A2(A);\n\n//---\n\nint main(void)\n{\n  return(0);\n};\n</code></pre>\n\n<p>So I'm confused by what happens when I uncomment some combination of lines (and compiling with the c++17 standard flag with clang):</p>\n\n<ul>\n<li>1, Compiles. List init's for <code>A</code> and <code>A1</code>, and the default copy constructor for <code>A2</code></li>\n<li>2, Compiles. Default constructor for <code>A</code> and list init <code>A1</code>(?), and the default copy constructor for A2</li>\n<li>1 + 3 or 2 + 3, Fails to compile because of the deleted copy constructor for <code>A2</code></li>\n<li>1 + 4, Compiles. Default constructor for <code>A</code> and list init A1(?), and the default copy constructor for <code>A2</code></li>\n<li>2 + 4, Compiles. Default constructor for <code>A</code> and list init <code>A1</code>(?), and the default copy constructor for A2</li>\n<li>1 + 5, Fails to compile. Says <code>A</code> is missing(deleted) a default constructor, and no matching constructor for <code>A1</code>?</li>\n<li>2 + 5, Fails to compile. No matching constructor for <code>A1</code>?</li>\n</ul>\n\n<p>I think I understand most of this, but I'm confused why the 1 + 5, and 2 + 5 compiles fail. Could anyone explain the logic the compiler is using to select the constructors that it's going to use, and why it fails to compile?</p>\n\n<p>If the constructors that I think are being called in the other cases are wrong, could you also point out what is being called, and why?</p>\n"}, {"tags": ["c++", "raster", "gdal"], "comments": [{"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1544654136, "post_id": 53640262, "comment_id": 94357664, "body": "Make a raster with all <code>1</code>s, you&#39;ll soon see who is right and why the other is wrong."}, {"owner": {"reputation": 3765, "user_id": 1086511, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f137c8bccd23ae845550c5e95c1e31b?s=128&d=identicon&r=PG", "display_name": "Rodrigo", "link": "https://stackoverflow.com/users/1086511/rodrigo"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1544731912, "post_id": 53640262, "comment_id": 94390565, "body": "@MarkSetchell Well, I&#39;ve done that and could see that turning the <code>&lt;=</code> back to <code>&lt;</code> the calculation was exactly the same as GRASS GIS. It doesn&#39;t explain, however, why I got different results in the first trial."}, {"owner": {"reputation": 130, "user_id": 4343520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc964bcebf325b4cbf61050ab4788980?s=128&d=identicon&r=PG&f=1", "display_name": "TinfoilPancakes", "link": "https://stackoverflow.com/users/4343520/tinfoilpancakes"}, "edited": false, "score": 1, "creation_date": 1544894040, "post_id": 53640262, "comment_id": 94440603, "body": "I&#39;m not an expert on GDAL or GRASS GIS however I notice you are rounding your column and rows. Could that be the issue?"}, {"owner": {"reputation": 3765, "user_id": 1086511, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f137c8bccd23ae845550c5e95c1e31b?s=128&d=identicon&r=PG", "display_name": "Rodrigo", "link": "https://stackoverflow.com/users/1086511/rodrigo"}, "reply_to_user": {"reputation": 130, "user_id": 4343520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc964bcebf325b4cbf61050ab4788980?s=128&d=identicon&r=PG&f=1", "display_name": "TinfoilPancakes", "link": "https://stackoverflow.com/users/4343520/tinfoilpancakes"}, "edited": false, "score": 0, "creation_date": 1544936207, "post_id": 53640262, "comment_id": 94448373, "body": "@TinfoilPancakes I need to round, because I&#39;m translating a <code>float</code> into an <code>int</code> after a division. If I don&#39;t round, I&#39;ll get only the integer part of the division result, which could be like a <code>floor</code> or a <code>ceiling</code> (depending on the hemisphere), or even something worst, if it did the cast into <code>int</code> in the beginning of a complex operation."}], "answers": [{"comments": [{"owner": {"reputation": 3765, "user_id": 1086511, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f137c8bccd23ae845550c5e95c1e31b?s=128&d=identicon&r=PG", "display_name": "Rodrigo", "link": "https://stackoverflow.com/users/1086511/rodrigo"}, "edited": false, "score": 0, "creation_date": 1545432102, "post_id": 53835676, "comment_id": 94629972, "body": "Sorry, I was out of town and couldn&#39;t test your solution or give you the points you probably deserved."}], "tags": [], "owner": {"reputation": 4936, "user_id": 102852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd1a03727472c03ab6628d437a24e00?s=128&d=identicon&r=PG", "display_name": "alex vasi", "link": "https://stackoverflow.com/users/102852/alex-vasi"}, "is_accepted": false, "score": 3, "last_activity_date": 1545144835, "creation_date": 1545144835, "answer_id": 53835676, "question_id": 53640262, "link": "https://stackoverflow.com/questions/53640262/how-to-count-a-rasters-pixels-with-a-certain-value-inside-a-given-rectangle-in/53835676#53835676", "title": "How to count a raster&#39;s pixels with a certain value inside a given rectangle in C++ with GDAL?", "body": "<p>It looks like a rounding error, you need to round down your column and row indexes. It's easier to reason if you think about every raster pixel as a rectangular region. For example, first pixel of your raster spans from <code>(x, y)</code> to <code>(x + width, y + height)</code>.</p>\n\n<pre><code>rx = geoTransf[0];\nrx_size = geoTransf[1]; // you got geoTransf[1] and geoTransf[5] swapped!\nry = geoTransf[3];    \nry_size = geoTransf[5];\n// assert, that geoTrans[2] and geoTrans[4] are zero\n\ncol_first = floor((x0 - rx) / rx_size));\ncol_last = floor((x1 - rx) / rx_size));\nrow_first = floor((y0 - ry) / ry_size));\nrow_last = floor((y1 - ry) / ry_size));\n\nfor (int y = row_first; y &lt;= row_last; ++y) {\n    poBand-&gt;ReadBlock(col_first, y, data);\n    for (int x = 0; x &lt;= col_last - col_first; ++x) {\n         data[x];\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3765, "user_id": 1086511, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f137c8bccd23ae845550c5e95c1e31b?s=128&d=identicon&r=PG", "display_name": "Rodrigo", "link": "https://stackoverflow.com/users/1086511/rodrigo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 515, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1545144835, "creation_date": 1544041846, "last_edit_date": 1544629652, "question_id": 53640262, "link": "https://stackoverflow.com/questions/53640262/how-to-count-a-rasters-pixels-with-a-certain-value-inside-a-given-rectangle-in", "title": "How to count a raster&#39;s pixels with a certain value inside a given rectangle in C++ with GDAL?", "body": "<p>In C++ is there a function to count all the pixels with a certain value inside a given rectangle (xmin, ymin, xmax, ymax), using GDAL library? Or I'll have to read each block and count them all pixel by pixel? I have searched, but only found a few Python scripts that do that.</p>\n\n<p>I did it for myself (it's a boolean raster - 0/1 - and I'm counting the \"1\" pixels), but the result is different from that given in GRASS GIS r.report function (via QGIS).</p>\n\n<pre><code>long long openTIF(string ftif,double x0,double y0,double x1,double y1) {\n    long long sum = 0;\n    GDALDataset *poDataset;\n    GDALAllRegister();\n    poDataset = (GDALDataset*)GDALOpen(ftif.c_str(),GA_ReadOnly);\n    if (poDataset == NULL) {\n        cout &lt;&lt; \"Error reading raster '\" &lt;&lt; ftif &lt;&lt; \"'\\n\";\n        exit(1);\n    }\n    int tx=poDataset-&gt;GetRasterXSize(),\n        ty=poDataset-&gt;GetRasterYSize();\n    double geoTransf[6], rx0=0, ry0=0, rx1=0, ry1=0;\n    if (poDataset-&gt;GetGeoTransform(geoTransf) == CE_None) {\n        rx0 = geoTransf[0];\n        ry0 = geoTransf[3]-ty*geoTransf[1];\n        rx1 = geoTransf[0]-tx*geoTransf[5];\n        ry1 = geoTransf[3];\n    } else {\n        exit(2);\n    }\n    int nBlockXSize,nBlockYSize;\n    GDALRasterBand *poBand;\n    poBand = poDataset-&gt;GetRasterBand(1);\n    poBand-&gt;GetBlockSize(&amp;nBlockXSize,&amp;nBlockYSize);\n    uint32_t i;\n    int y,\n        col0 = round((rx0-x0)/geoTransf[5]),\n        col1 = round((rx0-x1)/geoTransf[5]),\n        row0 = round((ry1-y1)/geoTransf[1]),\n        row1 = round((ry1-y0)/geoTransf[1]);\n    CPLErr error;\n    uint8_t *data = (uint8_t*)CPLMalloc(nBlockXSize*nBlockYSize);\n    GDALDataType type = poBand-&gt;GetRasterDataType();\n    if (type == GDT_Byte) {\n        cout &lt;&lt; \"Byte\" &lt;&lt; endl;\n    }\n    for (y=row0; y&lt;row1; y++) {\n        error = poBand-&gt;ReadBlock(0,y,data);\n        if (error &gt; 0) {\n            cout &lt;&lt; \"Error reading data block.\\n\";\n            exit(3);\n        }\n        for (i=col0; i&lt;col1; i++) {\n            sum += (uint8_t)data[i];\n        }\n    }\n    CPLFree(data);\n    return sum;\n}\n</code></pre>\n\n<p>For this given raster, and the given coordinates (precision %.8f), GRASS GIS r.report function is reporting 28096011 pixels with value 1, while my sum is giving 28094709 (difference = -1302). With other coordinates r.report gives 5605458, my sum gives 5604757 (difference = -701). Any idea what may be going on?</p>\n\n<p>EDIT: Since my sum was always smaller than GRASS GIS r.report, I though of including the last row and column, changing the lines</p>\n\n<pre><code>    for (y=row0; y&lt;row1; y++) {\n        for (i=col0; i&lt;col1; i++) {\n</code></pre>\n\n<p>to</p>\n\n<pre><code>    for (y=row0; y&lt;=row1; y++) {\n        for (i=col0; i&lt;=col1; i++) {\n</code></pre>\n\n<p>but now, with another set of coordinates, r.report gives 249707, while my sum gives 250157 (difference = +450).</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1544041558, "post_id": 53640164, "comment_id": 94139838, "body": "This is a staggering amount of code for us to review. Can you boil this down to a more <i>minimal</i> example that demonstrates the precise nature of your problem?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1544041777, "post_id": 53640164, "comment_id": 94139950, "body": "This looks somewhat overcomplicated to me."}, {"owner": {"reputation": 11, "user_id": 8710541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9387b26bf565d44fa2406288c217b901?s=128&d=identicon&r=PG&f=1", "display_name": "Corey B.", "link": "https://stackoverflow.com/users/8710541/corey-b"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1544042003, "post_id": 53640164, "comment_id": 94140062, "body": "@tadman I have simplified the code to what I&#39;m asking"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1544042049, "post_id": 53640164, "comment_id": 94140095, "body": "<code>vector&lt;T&gt; v = accumulate(v.begin(), v.end(), 0)&#47;v.size();</code> accumulate has a nasty pitfall in that the return type is deduced from the last parameter, hence you should not use a <code>0</code> there (and it does not return a vector)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1544042173, "post_id": 53640164, "comment_id": 94140139, "body": "the only <code>elems</code> i can find is a local variable to some other method, i guess the <code>StatTracker</code> should keep a copy or reference of the data to analyse"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1544042495, "post_id": 53640164, "comment_id": 94140280, "body": "btw its good to know that you have functions for testing, but I dont think they are related to the problem, cant you remove them? Please read about <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1544043390, "post_id": 53640164, "comment_id": 94140684, "body": "well, I read again and actually the test method has a critical hint: <code>tracker.Add(*it);</code> you should implement an <code>Add</code> method to add the elements to be analysed later. Either make it simply push the elements to a vector that you have to add as member, or already do some of the calculations while adding elements (eg the sum)"}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 1, "last_activity_date": 1544043948, "creation_date": 1544043948, "answer_id": 53640721, "question_id": 53640164, "link": "https://stackoverflow.com/questions/53640164/how-to-take-the-mean-of-a-vector-no-matter-what-is-inside/53640721#53640721", "title": "How to take the mean of a vector no matter what is inside?", "body": "<p>Here is some code that calculates the mean of a vector.\nRestrictions: </p>\n\n<ol>\n<li>Data type must support addition.</li>\n<li>Data type must support division.</li>\n<li>Data type must support assignment of zero.  </li>\n</ol>\n\n<p>The Code:  </p>\n\n<pre><code>   template &lt;typename Data&gt;\n    Data Mean(const std::vector&lt;Data&gt;&amp; v)\n    {\n      Data sum = 0;\n      const size_t length = v.length();\n      for (size_t i = 0; i &lt; length; ++i)\n      {\n        sum += v[i];\n      }\n      return sum / length;\n    }\n</code></pre>\n\n<p>This uses the primitive <code>for</code> loop to sum up the elements in the vector.  </p>\n\n<p>The result depends on how division is defined for the data type.  For example, floating point will return a different result than an integral type.  </p>\n"}], "owner": {"reputation": 11, "user_id": 8710541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9387b26bf565d44fa2406288c217b901?s=128&d=identicon&r=PG&f=1", "display_name": "Corey B.", "link": "https://stackoverflow.com/users/8710541/corey-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1544043948, "creation_date": 1544041420, "last_edit_date": 1544041975, "question_id": 53640164, "link": "https://stackoverflow.com/questions/53640164/how-to-take-the-mean-of-a-vector-no-matter-what-is-inside", "title": "How to take the mean of a vector no matter what is inside?", "body": "<p>I'm working on a homework problem that requires me to find the basic statistics on data-classes. I'm currently working on finding the mean but not sure how to set it up because of the way the given files are structured.</p>\n\n<p>Here is what I was given:</p>\n\n<pre><code>/* Copyright 2018 test_stat_tracker.cc */\n\n#include &lt;cstddef&gt;\n// using size_t\n#include &lt;iostream&gt;\nusing std::cout;\nusing std::endl;\n#include &lt;vector&gt;\nusing std::vector;\n\n#include \"../hw7/stat_tracker.h\"\nusing csce240::StatTracker;\n\n\nconst int kInt_elems[] = {1, 2, 1, 5, 7, 2, 9};\nconst size_t kInt_elem_count = 7;\nconst int kInt_elem_mean = 3;  // actually 27/7\nconst int kInt_elem_median = 2;\nconst int kInt_elem_mode[] = {1, 2};\n\n\n/* Calculates the actual mean, prints the expected and actual values, and\n *   returns whether they are the same.\n */\ntemplate &lt;class T&gt;\nbool TestMean(const StatTracker&lt;T&gt;&amp; tracker, const T&amp; expected) {\n  T actual = tracker.Mean();\n  cout &lt;&lt; \"Expected mean: \" &lt;&lt; expected\n      &lt;&lt; \", Actual mean: \" &lt;&lt; actual;\n  return actual == expected;\n}\n\nvoid TestIntStats() {\n  vector&lt;int&gt; elems;\n  elems.assign(kInt_elems, kInt_elems + kInt_elem_count);\n\n  StatTracker&lt;int&gt; tracker;\n  for (auto it = elems.begin(); it != elems.end(); ++it)\n    tracker.Add(*it);\n\n  if (!TestMean(tracker, kInt_elem_mean))\n    cout &lt;&lt; \": FAILED\\n\";\n  else\n    cout &lt;&lt; \": PASSED\\n\";\n}\n\n\nint main(int argc, char* argv[]) {\n  TestIntStats();\n\n  return 0;\n} \n</code></pre>\n\n<p>Now this is what I have managed in my .h and .cc files:</p>\n\n<pre><code>/* Copyright 2018\n *\n * stat_tracker.h \n */    \n\n#ifndef _HW7_STAT_TRACKER_H_  // NOLINT\n#define _HW7_STAT_TRACKER_H_  // NOLINT\n#include &lt;ostream&gt;\nusing std::cout;\nusing std::endl;\n#include &lt;vector&gt;\n#include &lt;numeric&gt;\nusing std::accumulate;\n\nnamespace csce240 {\n\ntemplate &lt;class T&gt;\nclass StatTracker  {\n public:\n  const T Mean() const;  // T = T + T and T = T / int must be defined\n  // T a, b; a += b; DON'T DO THIS\n};\n}  // namespace csce240\n\n#include \"../hw7/stat_tracker.cc\"  // comment out\n\n#endif /* _HW7_STAT_TRACKER_H_ */  // NOLINT \n</code></pre>\n\n<p>And my .cc file</p>\n\n<pre><code>/* Copyright 2018\n *\n * stat_tracker.cc \n */\n// #include \"stat_tracker.h\"  // NOLINT\nnamespace csce240 {\n\ntemplate&lt;class T&gt;\nconst T StatTracker&lt;T&gt;::Mean() const {\n  auto v(elems);\n  vector&lt;T&gt; v = accumulate(v.begin(), v.end(), 0)/v.size();\n  return T();\n}\n\n}  // namespace csce240\n\n#include \"stat_tracker.h\"\n</code></pre>\n\n<p>At the moment I am working on getting the mean to work, but I keep receiving an error that <code>elems</code> was not declared. I can't initialize <code>kInt_elems</code> in my <code>.cc</code> because my professor will be using his own test class with different numbers. </p>\n\n<p>I am very lost and need a little direction on how to set up this function.</p>\n"}, {"tags": ["c++", "range"], "comments": [{"owner": {"reputation": 1829, "user_id": 2187015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2be67c478bd88613dfecad541b287ddd?s=128&d=identicon&r=PG", "display_name": "Abdurrahim", "link": "https://stackoverflow.com/users/2187015/abdurrahim"}, "edited": false, "score": 1, "creation_date": 1544042212, "post_id": 53639962, "comment_id": 94140160, "body": "When will they start to merge something that matters before synthetic sugars :) Anyhow I bet bit better than boost ones: <a href=\"https://www.boost.org/doc/libs/1_37_0/libs/range/doc/examples.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_37_0/libs/range/doc/examples.html</a>  All I want to ask when concepts are coming :)) 2050? I remember they were rejecting designated initializers with similar reasons... Maybe we will get designated initializers when HalfLife3 comes and modules when HalfLife4 comes but we will get new named parameter idiom version 2.0 beta instead. I dont even bother standard sockets I lost all the hope already... Need to listen wasted years..."}, {"owner": {"reputation": 2371, "user_id": 4140668, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/50c0905a6e33a9fa6f7e050c09ed1277?s=128&d=identicon&r=PG", "display_name": "lz96", "link": "https://stackoverflow.com/users/4140668/lz96"}, "reply_to_user": {"reputation": 1829, "user_id": 2187015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2be67c478bd88613dfecad541b287ddd?s=128&d=identicon&r=PG", "display_name": "Abdurrahim", "link": "https://stackoverflow.com/users/2187015/abdurrahim"}, "edited": false, "score": 0, "creation_date": 1544049209, "post_id": 53639962, "comment_id": 94142982, "body": "@Abdurrahim Concept is already approved and this proposal is heavily based on it. Designated initializer is also accepted (but only with the same order as declaration). Modules is &quot;almost ready&quot; and expected to get passed in the next meeting."}], "answers": [{"comments": [{"owner": {"reputation": 2371, "user_id": 4140668, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/50c0905a6e33a9fa6f7e050c09ed1277?s=128&d=identicon&r=PG", "display_name": "lz96", "link": "https://stackoverflow.com/users/4140668/lz96"}, "edited": false, "score": 1, "creation_date": 1544048942, "post_id": 53641139, "comment_id": 94142883, "body": "A quick search in the proposal shows that only <code>take</code> and <code>reverse</code> exist in the proposal. No <code>drop</code>, <code>slice</code> or <code>stride</code> : ("}, {"owner": {"reputation": 2371, "user_id": 4140668, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/50c0905a6e33a9fa6f7e050c09ed1277?s=128&d=identicon&r=PG", "display_name": "lz96", "link": "https://stackoverflow.com/users/4140668/lz96"}, "edited": false, "score": 0, "creation_date": 1544050396, "post_id": 53641139, "comment_id": 94143391, "body": "Moreover, range-v3 does not support Concept. A more up-to-date implementation, as mentioned in the proposal, is <a href=\"https://github.com/CaseyCarter/cmcstl2\" rel=\"nofollow noreferrer\">CMCSTL2</a>. Sadly the merged proposal varies from both of them in many ways. I can foresee another round of fragmentation."}], "tags": [], "owner": {"reputation": 417, "user_id": 6327684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WwIzz.gif?s=128&g=1", "display_name": "J. Willus", "link": "https://stackoverflow.com/users/6327684/j-willus"}, "is_accepted": false, "score": 3, "last_activity_date": 1544047285, "last_edit_date": 1544047285, "creation_date": 1544045918, "answer_id": 53641139, "question_id": 53639962, "link": "https://stackoverflow.com/questions/53639962/how-to-implement-python-like-slicing-in-c20-ranges-ts/53641139#53641139", "title": "How to implement Python-like slicing in C++20 Ranges TS?", "body": "<p>Here are all the snippets I was able to come up to match your examples, please take these as hints as how to use the <a href=\"https://github.com/ericniebler/range-v3\" rel=\"nofollow noreferrer\">current</a> implementation of the TS.</p>\n\n<pre><code>std::vector&lt;int&gt; elements{0, 1, 2, 3, 4, 5, 6, 7, 8, 9};\n\n// First five elements\nstd::vector&lt;int&gt; a = elements | ranges::view::take(5);\n\n// From the 5-th elements to the end\nstd::vector&lt;int&gt; b = elements | ranges::view::drop(5);\n\n// The 2nd and 3rd elements\nstd::vector&lt;int&gt; c = elements | ranges::view::slice(2, 4);\n\n// The first 3 elements, in reverse\nstd::vector&lt;int&gt; d = elements | ranges::view::take(3) | ranges::view::reverse;\n\n// Elements 2-4 inclusive, reversed, and then taking every 2nd element\nstd::vector&lt;int&gt; e = elements | ranges::view::slice(2, 5) | ranges::view::reverse | ranges::view::stride(2);\n</code></pre>\n"}], "owner": {"reputation": 2371, "user_id": 4140668, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/50c0905a6e33a9fa6f7e050c09ed1277?s=128&d=identicon&r=PG", "display_name": "lz96", "link": "https://stackoverflow.com/users/4140668/lz96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1544047285, "creation_date": 1544040394, "question_id": 53639962, "link": "https://stackoverflow.com/questions/53639962/how-to-implement-python-like-slicing-in-c20-ranges-ts", "title": "How to implement Python-like slicing in C++20 Ranges TS?", "body": "<p><a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p0896r3.pdf\" rel=\"nofollow noreferrer\">The ranges TS</a> has been merged into C++20. I was wondering what is the best way to implement Python-like slicing operations with that proposal? To be specific, assume <code>a</code> is a <code>vector&lt;int&gt;</code>, how to implement:</p>\n\n<ul>\n<li><code>a[:5]</code>(first 5 elements)</li>\n<li><code>a[5:]</code>(from the 5-th elements to the end)</li>\n<li><code>a[2:4]</code>(the 2nd and the 3rd elements)</li>\n<li><code>a[2::-1]</code> (a[2], a[1], a[0])</li>\n<li><code>a[4:1:-2]</code> (a[4], a[2])</li>\n</ul>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1544039574, "post_id": 53639737, "comment_id": 94138967, "body": "First check if <code>A</code> exists in <code>B</code>.  That will let you know if it is possible.  Then you can use that position to calculate how many times <code>A</code> would need to appear."}, {"owner": {"reputation": 1, "user_id": 9023015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44737afab31816a899b466df6e75553f?s=128&d=identicon&r=PG&f=1", "display_name": "ines", "link": "https://stackoverflow.com/users/9023015/ines"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1544040319, "post_id": 53639737, "comment_id": 94139299, "body": "Thank you ! I did that and I changed the for loop to a while loop                        while (B.find(A) == string::npos) Now I&#39;m not sure how to break out of it if there is no sub string."}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1544042688, "post_id": 53639737, "comment_id": 94140358, "body": "<code>break</code> in the line after <code>return -1</code>? What do you expect that to do? You should set a higher warning level when compiling and check the compiler warnings."}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1544042847, "post_id": 53639737, "comment_id": 94140428, "body": "Isn&#39;t your question better suited for <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1544046184, "post_id": 53639737, "comment_id": 94141946, "body": "&quot;<i>It is giving the right output but I think the loop that I have on it could be improved</i>&quot; - such questions do indeed belong on <a href=\"https://codereview.stackexchange.com/\">CodeReview</a>, not on StackOverflow."}], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 9169946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k4Jnu.jpg?s=128&g=1", "display_name": "aeroyorch", "link": "https://stackoverflow.com/users/9169946/aeroyorch"}, "is_accepted": false, "score": 0, "last_activity_date": 1544043319, "last_edit_date": 1544043319, "creation_date": 1544041892, "answer_id": 53640269, "question_id": 53639737, "link": "https://stackoverflow.com/questions/53639737/is-this-a-good-way-to-break-out-of-the-while-loop-if-there-is-not-substring/53640269#53640269", "title": "Is this a good way to break out of the while loop if there is not substring?", "body": "<p>You could use recursively the method <code>string::find(const std::string&amp; str, size_t pos = 0)</code> while its returned value would be equal to <code>std::string::npos</code>:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint findthestring(const std::string&amp; substr, const std::string&amp; str)\n{\n    size_t times = 1;\n    std::string temp(substr);\n    while (temp.find(str) == std::string::npos) { // while not found\n        times++;\n        if (times &gt; 10) {\n            return -1;\n        }\n        temp += substr; // concatenate string\n    }\n    return times;\n}\n\nint main()\n{\n    int times = findthestring(\"abcd\", \"cdabc\");\n    std::cout &lt;&lt; \"Number of Times: \" &lt;&lt; times;\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9023015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44737afab31816a899b466df6e75553f?s=128&d=identicon&r=PG&f=1", "display_name": "ines", "link": "https://stackoverflow.com/users/9023015/ines"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1544046154, "creation_date": 1544039425, "last_edit_date": 1544046154, "question_id": 53639737, "link": "https://stackoverflow.com/questions/53639737/is-this-a-good-way-to-break-out-of-the-while-loop-if-there-is-not-substring", "title": "Is this a good way to break out of the while loop if there is not substring?", "body": "<p>I'm working on this small code. It is giving the right output but I think the loop that I have on it could be improved.</p>\n\n<blockquote>\n  <p>Question 1: Given a string <code>A</code> consisting of <code>n</code> characters, and a string <code>B</code> consisting of <code>m</code> characters, write a function that will return the number of times <code>A</code> must be stated such that <code>B</code> is a substring of the repeated <code>A</code>. If <code>B</code> can never be a substring, return <code>-1</code>.</p>\n  \n  <p>Example:</p>\n\n<pre><code>A = \"abcd\"\nB = \"cdabcdab\"\n</code></pre>\n  \n  <p>The function should return 3 because after stating <code>A</code> 3 times, getting <code>\"abcdabcdabcd\"</code>, <code>B</code> is now a substring of <code>A</code>.</p>\n  \n  <p>You can assume that <code>n</code> and <code>m</code> are integers in the range <code>[1, 1000]</code>.</p>\n</blockquote>\n\n<p>This is my code: </p>\n\n<pre><code>#include \"pch.h\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;istream&gt;\n\nusing namespace std;\nint findthestring(string A, string B)\n{\n    string original = B;\n    int times = 1 ;\n    if (B.find(A) != string::npos)\n    {\n        cout &lt;&lt; \"String Found\\n\";\n        times =1;\n\n    }\n    for (unsigned int i = 0; i &lt; (10 * A.length());i++)\n    {\n        cout &lt;&lt; \"String not Found\\n\";\n        B = B + original;\n        times = times + 1;\n        if (times&gt;10)\n        {\n            return -1;\n            break;\n        }\n    }\n\n    return times;   \n}\n\nint main()\n{\n    int times = findthestring(\"cdabcdab\",\"abcd\");\n    cout &lt;&lt; \"Number of Times: \" &lt;&lt; times;\n    return 0;\n}\n</code></pre>\n\n<p>On this code, I have the loop run for 10 times, if there is no sub string, then the loop breaks out and returns 1.</p>\n\n<p>Is there a better way to do that?</p>\n"}, {"tags": ["c++", "c++11", "templates", "circular-dependency", "forward-declaration"], "comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1544039155, "post_id": 53639595, "comment_id": 94138787, "body": "Why does <code>BaseException</code> need to know about <code>BaseList</code> and <code>HeplString</code>?"}, {"owner": {"reputation": 195, "user_id": 3514658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccddea88daa20a66f6fdcbf561ee249d?s=128&d=identicon&r=PG", "display_name": "wget", "link": "https://stackoverflow.com/users/3514658/wget"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1544039299, "post_id": 53639595, "comment_id": 94138861, "body": "<code>BaseException</code> is internally using an <code>HeplString</code> in order to store the custom error message. Therefore, <code>BaseException</code> is implicitly making use of <code>BaseList</code> via the use of <code>HeplString</code>."}, {"owner": {"reputation": 874, "user_id": 3352222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6lYp.jpg?s=128&g=1", "display_name": "ravnsgaard", "link": "https://stackoverflow.com/users/3352222/ravnsgaard"}, "edited": false, "score": 2, "creation_date": 1544039790, "post_id": 53639595, "comment_id": 94139061, "body": "You seem to come full circle here. The ring <i>must</i> be broken somewhere. You can never create a data member with only a forward declaration, but you <i>can</i> create a pointer or reference to it. This means the instance will have to live somewhere else though."}, {"owner": {"reputation": 195, "user_id": 3514658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccddea88daa20a66f6fdcbf561ee249d?s=128&d=identicon&r=PG", "display_name": "wget", "link": "https://stackoverflow.com/users/3514658/wget"}, "reply_to_user": {"reputation": 874, "user_id": 3352222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6lYp.jpg?s=128&g=1", "display_name": "ravnsgaard", "link": "https://stackoverflow.com/users/3352222/ravnsgaard"}, "edited": false, "score": 0, "creation_date": 1544040451, "post_id": 53639595, "comment_id": 94139359, "body": "@ravnsgaard Using a reference is something I have seen as well among the proposed solutions, but with the current use case, I don&#39;t know how I could implement this in an elegant OOP manner :-/"}, {"owner": {"reputation": 874, "user_id": 3352222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6lYp.jpg?s=128&g=1", "display_name": "ravnsgaard", "link": "https://stackoverflow.com/users/3352222/ravnsgaard"}, "edited": false, "score": 0, "creation_date": 1544041392, "post_id": 53639595, "comment_id": 94139741, "body": "@wget Hmm... Untested, but... <code>BaseException</code> <i>needs</i> <code>HeplString</code>, so you cannot just forward declare that, but <code>HeplString</code> can make do with a forward declaration of <code>HeplList</code>. You are only returning it from one member function; that only requires a declaration, not a definition."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1544044869, "post_id": 53639595, "comment_id": 94141363, "body": "Hint: The definition of <code>HeplString</code> <i>class</i> probably doesn&#39;t require the definition of anything else.  Only it&#39;s method definitions. That class can be your root."}, {"owner": {"reputation": 195, "user_id": 3514658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccddea88daa20a66f6fdcbf561ee249d?s=128&d=identicon&r=PG", "display_name": "wget", "link": "https://stackoverflow.com/users/3514658/wget"}, "reply_to_user": {"reputation": 874, "user_id": 3352222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6lYp.jpg?s=128&g=1", "display_name": "ravnsgaard", "link": "https://stackoverflow.com/users/3352222/ravnsgaard"}, "edited": false, "score": 0, "creation_date": 1544542063, "post_id": 53639595, "comment_id": 94308075, "body": "@ravnsgaard Unfortunately I have an explode() method in my class HeplString which manipulates the HeplList&lt;HeplString&gt; object directly, so I cannot even not forward declare it. I followed this example to understand better the situation: <a href=\"https://stackoverflow.com/a/553869/3514658\">stackoverflow.com/a/553869/3514658</a>"}, {"owner": {"reputation": 195, "user_id": 3514658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccddea88daa20a66f6fdcbf561ee249d?s=128&d=identicon&r=PG", "display_name": "wget", "link": "https://stackoverflow.com/users/3514658/wget"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1544542236, "post_id": 53639595, "comment_id": 94308209, "body": "@MooingDuck same explanation as above. I&#39;m manipulating <code>HeplList&lt;HeplString&gt;</code>, so I do actually require inclusion.  How can I solve this? I tried to break the loop by using references, but this is not working. Also subclassing <code>HeplString</code> and craft a class called <code>HeplStringExploded</code> to replace <code>HeplList&lt;HeplString&gt;</code> doesn&#39;t help either (unless I&#39;m proceeding badly here)."}, {"owner": {"reputation": 874, "user_id": 3352222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6lYp.jpg?s=128&g=1", "display_name": "ravnsgaard", "link": "https://stackoverflow.com/users/3352222/ravnsgaard"}, "edited": false, "score": 1, "creation_date": 1544544566, "post_id": 53639595, "comment_id": 94309707, "body": "You need to keep your declarations and definitions clearly separated. The <code>HeplString</code> <i>declaration</i> only needs a forward declaration of <code>HeplList</code>; the <i>definition</i> needs the full definition of <code>HeplList</code>."}, {"owner": {"reputation": 195, "user_id": 3514658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccddea88daa20a66f6fdcbf561ee249d?s=128&d=identicon&r=PG", "display_name": "wget", "link": "https://stackoverflow.com/users/3514658/wget"}, "reply_to_user": {"reputation": 874, "user_id": 3352222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6lYp.jpg?s=128&g=1", "display_name": "ravnsgaard", "link": "https://stackoverflow.com/users/3352222/ravnsgaard"}, "edited": false, "score": 0, "creation_date": 1544791794, "post_id": 53639595, "comment_id": 94411260, "body": "@ravnsgaard Like I said, this is exactly what I did :). I removed <code>#include &quot;HeplList.hpp&quot;</code> from <code>HeplString.hpp</code> and replaced it by the forward declaration <code>template&lt;class T&gt; class HeplList;</code>, but the <code>HeplString.cpp</code> complains with these error: <a href=\"https://gist.github.com/wget/2d9d156953e3e29abd94e023c54a0a98\" rel=\"nofollow noreferrer\">gist.github.com/wget/2d9d156953e3e29abd94e023c54a0a98</a>"}, {"owner": {"reputation": 195, "user_id": 3514658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccddea88daa20a66f6fdcbf561ee249d?s=128&d=identicon&r=PG", "display_name": "wget", "link": "https://stackoverflow.com/users/3514658/wget"}, "reply_to_user": {"reputation": 874, "user_id": 3352222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6lYp.jpg?s=128&g=1", "display_name": "ravnsgaard", "link": "https://stackoverflow.com/users/3352222/ravnsgaard"}, "edited": false, "score": 0, "creation_date": 1544791884, "post_id": 53639595, "comment_id": 94411310, "body": "@ravnsgaard These are the two files concerned by this issue: <a href=\"https://github.com/wget/hepl-2-cpp/blob/master/src/HeplList.hpp\" rel=\"nofollow noreferrer\">github.com/wget/hepl-2-cpp/blob/master/src/HeplList.hpp</a> and <a href=\"https://github.com/wget/hepl-2-cpp/blob/master/src/HeplString.hpp\" rel=\"nofollow noreferrer\">github.com/wget/hepl-2-cpp/blob/master/src/HeplString.hpp</a>"}, {"owner": {"reputation": 195, "user_id": 3514658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccddea88daa20a66f6fdcbf561ee249d?s=128&d=identicon&r=PG", "display_name": "wget", "link": "https://stackoverflow.com/users/3514658/wget"}, "edited": false, "score": 0, "creation_date": 1545143667, "post_id": 53639595, "comment_id": 94518562, "body": "@ravnsguard Thanks for your latest comment. Rethinking to that sentence after a good night put me on track. :)"}], "answers": [{"comments": [{"owner": {"reputation": 195, "user_id": 3514658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccddea88daa20a66f6fdcbf561ee249d?s=128&d=identicon&r=PG", "display_name": "wget", "link": "https://stackoverflow.com/users/3514658/wget"}, "edited": false, "score": 0, "creation_date": 1545143505, "post_id": 53835192, "comment_id": 94518478, "body": "The commit that fixed my issue: <a href=\"https://github.com/wget/hepl-2-cpp/commit/ac144652c5e0146f6dce1294503dfeee16812e6c\" rel=\"nofollow noreferrer\">github.com/wget/hepl-2-cpp/commit/&hellip;</a>"}], "tags": [], "owner": {"reputation": 195, "user_id": 3514658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccddea88daa20a66f6fdcbf561ee249d?s=128&d=identicon&r=PG", "display_name": "wget", "link": "https://stackoverflow.com/users/3514658/wget"}, "is_accepted": true, "score": 1, "last_activity_date": 1545143281, "creation_date": 1545143281, "answer_id": 53835192, "question_id": 53639595, "link": "https://stackoverflow.com/questions/53639595/how-to-fix-a-c-cyclical-dependency-with-forward-declaration-in-template-class/53835192#53835192", "title": "How to fix a C++ cyclical dependency with forward declaration in template class header", "body": "<ul>\n<li>Add <code>#include \"BaseException.hpp\"</code> to <code>BaseList.hpp</code></li>\n<li>Add <code>#include \"HeplList.hpp\"</code> to <code>HeplString.cpp</code></li>\n<li>Add the forward declaration <code>template&lt;class T&gt; class HeplList;</code> to <code>HeplString.hpp</code></li>\n<li>Now, you may need to modify some of your other classes which weren't including the <code>BaseList.hpp</code> header because they were relying on the header <code>HeplString.hpp</code> to do this for them.</li>\n</ul>\n"}], "owner": {"reputation": 195, "user_id": 3514658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccddea88daa20a66f6fdcbf561ee249d?s=128&d=identicon&r=PG", "display_name": "wget", "link": "https://stackoverflow.com/users/3514658/wget"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 0, "accepted_answer_id": 53835192, "answer_count": 1, "score": 0, "last_activity_date": 1545143281, "creation_date": 1544038900, "question_id": 53639595, "link": "https://stackoverflow.com/questions/53639595/how-to-fix-a-c-cyclical-dependency-with-forward-declaration-in-template-class", "title": "How to fix a C++ cyclical dependency with forward declaration in template class header", "body": "<p>For teaching purposes in my applied oriented object courses, we are asked to develop a fully featured C++ application without using the STL nor any string manipulation functions from cstring (SDL for GUI will be involved in a later stage).</p>\n\n<p>While redeveloping simple String and list container hierarchy classes, I encountered a cyclical dependency issue. Previously, I fixed these kind of issues using forward declaration. However, this time, things do not go as expected and this problem kept me busy for a few evenings now.</p>\n\n<p>Here is a simple UML diagram of the issue I have.</p>\n\n<p><a href=\"https://i.stack.imgur.com/0nVMV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0nVMV.png\" alt=\"UML diagram\"></a></p>\n\n<p>Every class has their own <code>.cpp</code> and <code>.hpp</code> files, except for <code>BaseListItemNotFoundException</code> I declare with a <code>using</code> statement above the <code>BaseList</code> class declaration.</p>\n\n<pre><code>class BaseListItemNotFoundException: BaseException {\n    using BaseException::BaseException;\n};\n</code></pre>\n\n<p>Even if this doesn't add any added pieces of info (IMHO), let me precise <code>BaseList</code> and <code>HeplList</code> classes are actually template classes defined using <code>.ipp</code> and <code>.hpp</code>.</p>\n\n<p>I omitted some other classes involved to restrict the environment to a minimal working example (iterator and Cell generic class hierarchy used as payload for the lists). Header protections using <code>define</code> and <code>ifndef</code> conditions have been removed for clarity.</p>\n\n<p>Here are a snipped of the files:</p>\n\n<p><code>BaseList.hpp</code>:</p>\n\n<pre><code>#include &lt;cstddef&gt;\n#include &lt;iostream&gt;\n#include \"Cell.hpp\"\n\nclass HeplString; // Forward declaration\n\n#include \"BaseException.hpp\"\nclass BaseListItemNotFoundException: BaseException {\n    using BaseException::BaseException;\n};\n\ntemplate&lt;class T&gt;\nclass BaseList {\n    // code\n};\n</code></pre>\n\n<p><code>HeplList.hpp</code>:</p>\n\n<pre><code>#include &lt;cstddef&gt;\n#include \"BaseList.hpp\"\n#include \"Cell.hpp\"\n\ntemplate&lt;class T&gt;\nclass HeplList : public BaseList&lt;T&gt; {\n    // code\n};\n\n#include \"HeplList.ipp\"\n</code></pre>\n\n<p><code>HeplString.hpp</code>:</p>\n\n<pre><code>#include &lt;cstddef&gt;\n#include &lt;iostream&gt;\n#include &lt;ostream&gt;\n#include &lt;fstream&gt;\n#include \"HeplList.hpp\"\n\nclass HeplString {\n    // code\n};\n</code></pre>\n\n<p><code>BaseException.hpp</code>:</p>\n\n<pre><code>#include \"HeplString.hpp\"\n#include \"BaseList.hpp\"\n\nclass BaseException {\n    // code\n};\n</code></pre>\n\n<p>The main issue I have with this example is errors like this one:</p>\n\n<pre><code>src/tests/../BaseException.hpp:9:20: error: field \u2018msg\u2019 has incomplete type \u2018HeplString\u2019\n         HeplString msg;\n                    ^~~\nIn file included from src/tests/../HeplList.hpp:5,\n                 from src/tests/../HeplString.hpp:9,\n                 from src/tests/test.cpp:2:\nsrc/tests/../BaseList.hpp:9:7: note: forward declaration of \u2018class HeplString\u2019\n class HeplString;\n       ^~~~~~~~~~\n</code></pre>\n\n<p>I don't understand what I'm doing wrong here. Reading other similar issues didn't help.</p>\n\n<p>My git repository with the full code is available here, if needed: <a href=\"https://github.com/wget/hepl-2-cpp\" rel=\"nofollow noreferrer\">https://github.com/wget/hepl-2-cpp</a></p>\n"}, {"tags": ["c++", "c++11", "matrix"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1544039015, "post_id": 53639591, "comment_id": 94138740, "body": "Well, what would you rather have, faster execution, or slightly more development time?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 5, "creation_date": 1544039274, "post_id": 53639591, "comment_id": 94138845, "body": "Don&#39;t, use a 1D vector with 3D indexing."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3849502"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1544039534, "post_id": 53639591, "comment_id": 94138952, "body": "@NathanOliver since this operation will happen only one time during the program life-time so loosing some time is OK. I would prefer flexibility and readability for code maintenance.  Especially, I am going to use this matrix later for multiplication with vectors. The current design choice now is to avoid using external libraries as there are plenty of Linear Algebra frameworks that can do what I want and even boost library can do that."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1544049965, "post_id": 53639591, "comment_id": 94143243, "body": "You can look at <code>GLM</code>&#39;s math library that is designed to do linear algebra that closely resembles <code>OpenGL</code>&#39;s <code>GLSL</code> shader language. The library itself is an all inclusive headers only library. There is no linking involved, all you have to do is include the headers into your project-solution and use the appropriate headers to start using it. It includes all of the needed functions for doing affine transformations, matrix and vector calculations. You can read their header files to see how they implemented their matrix and vector classes, and functions. <a href=\"https://glm.g-truc.net/0.9.8/index.html\" rel=\"nofollow noreferrer\">glm.g-truc.net/0.9.8/index.html</a>"}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1544050007, "post_id": 53639591, "comment_id": 94143263, "body": "...continued... However this may be slightly different than what your requirements are since most of <code>GLM</code>&#39;s matrices are of the <code>MxN</code> variety, but could serve as a reference of a good starting point. You would just have to expand this into 3D."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3849502"}, "reply_to_user": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1544051156, "post_id": 53639591, "comment_id": 94143640, "body": "@FrancisCugler I would prefer to do everything using STL not relying on 3rd party library. I am already aware of many linear algerbra libraries that can do this in the same way MATLAB does it."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1544062358, "post_id": 53639591, "comment_id": 94146296, "body": "@IoT Yes true, but they could help you with possible implementations and code design, just substitute the STL where needed."}], "answers": [{"tags": [], "owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "is_accepted": false, "score": 1, "last_activity_date": 1544069787, "last_edit_date": 1544069787, "creation_date": 1544066680, "answer_id": 53644169, "question_id": 53639591, "link": "https://stackoverflow.com/questions/53639591/implementing-a-3d-matrix-in-c-using-nested-stdvector/53644169#53644169", "title": "Implementing a 3D Matrix in C++ using Nested std::vector", "body": "<p>I don't know if this will help you to achieve what you are after but this is a Matrix class that I have started to build using modern C++ features; such as <code>variadic templates</code>. The Matrix Class is self contained into a single header file.</p>\n\n<pre><code>#ifndef MATRIX_H\n#define MATRIX_H\n\n#include &lt;cstddef&gt;  // std::size_t\n#include &lt;numeric&gt;  // std::accumulate\n#include &lt;vector&gt;\n\nnamespace /*Your namespace name here*/ {\n\ntemplate&lt;typename Type, std::size_t... Dims&gt;\nclass Matrix {\npublic:\n    static const std::size_t numDims_ = sizeof...(Dims);\n\nprivate:\n    std::size_t numElements_;\n\n    std::vector&lt;Type&gt; elements_;\n    std::vector&lt;std::size_t&gt; strides_;\n\npublic:\n    Matrix() noexcept;\n\n    template&lt;typename... Args&gt;\n    Matrix(Args&amp;&amp;... args) noexcept;\n\n    const Type&amp; operator[](std::size_t idx) const;\n\n    std::size_t numElements() const { return elements_.size(); }\n\n    const std::vector&lt;std::size_t&gt;&amp; strides() const { return strides_; }\n    const std::vector&lt;Type&gt;&amp; elements() const { return elements_; }\n};\n\ntemplate&lt;typename Type, std::size_t... Dims&gt;\nMatrix&lt;Type, Dims...&gt;::Matrix() noexcept :\n    strides_({ Dims... }) {\n    using std::begin;\n    using std::end;\n    auto mult = std::accumulate(begin(strides_), end(strides_), 1, std::multiplies&lt;&gt;());\n    numElements_ = mult;\n    elements_.resize(numElements_);\n}\n\ntemplate&lt;typename Type, std::size_t... Dims&gt;\ntemplate&lt;typename... Args&gt;\nMatrix&lt;Type, Dims...&gt;::Matrix(Args&amp;&amp;... args) noexcept :\n    elements_({ args... }),\n    strides_({ Dims... }) {\n    numElements_ = elements_.size();\n}\n\ntemplate&lt;typename T, std::size_t... d&gt;\nconst T&amp; Matrix&lt;T, d...&gt;::operator[](std::size_t idx) const {\n    if (idx &gt; numElements_)\n        throw std::runtime_error(\"Invalid index\");\n    return elements_[idx];\n}\n\n} // Your namespace name here\n#endif MATRIX_H\n</code></pre>\n\n<p>And a small sample program using it:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;exception&gt;\n\n#include \"Matrix.h\"\n\nint main() {    \n    try {\n        using /*your namespace name here*/;\n        Matrix&lt;double, 2, 2, 2&gt; mat( 1.0 ,1.1, 1.2, 1.3,\n                                     1.4, 1.5, 1.6, 1.7 );\n\n        // Print the elements from the use of getting the vector\n        for (auto&amp; e : mat.elements()) {\n            std::cout &lt;&lt; e &lt;&lt; \" \";\n        }\n        std::cout &lt;&lt; '\\n';\n\n        // Print the elements from the use of using operator[]\n        for ( std::size_t n = 0; n &lt; mat.numElements(); n++ ) {\n            std::cout &lt;&lt; mat[n] &lt;&lt; \" \";\n        }\n        std::cout &lt;&lt; '\\n';\n\n        // Print out the strides\n        std::cout &lt;&lt; \"Number of strides: \" &lt;&lt; mat.numDims_ &lt;&lt; '\\n';\n        for (auto&amp; s : mat.strides()) {\n            std::cout &lt;&lt; s &lt;&lt; \" \";\n        }\n        std::cout &lt;&lt; '\\n';\n\n    } catch ( std::exception&amp; e ) {\n        std::cerr &lt;&lt; e.what();\n        return EXIT_FAILURE;\n    }    \n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p><em>-Output-</em></p>\n\n<pre><code> 1 1.1 1.2 1.3 1.4 1.5 1.6 1.7\n 1 1.1 1.2 1.3 1.4 1.5 1.6 1.7\n Number of strides: 3\n 2 2 2\n</code></pre>\n\n<hr>\n\n<p>This class is far from complete as it is only just the containing shell of any arbitrary Dimensional Size of Any MxNx...Zx... Matrix. In the template argument list it expects a single <code>Type</code>: <code>int</code>, <code>float</code>, <code>char</code>, <code>user defined</code> etc. The variadic arguments for the tempale arguments after the <code>Type</code> determines how many Dimensions this matrix has, and the dimensional size of each dimension. Examples:</p>\n\n<pre><code>Matrix&lt;type,1&gt; = a 1 matrix which in essence would be a scalar\nMatrix&lt;type,1,2&gt; = a 1x2 matrix and would be considered a vector\nMatrix&lt;type,3,1&gt; = a 3x1 matrix and would be considered a vector\nMatrix&lt;type,2,2&gt; = a 2x2 matrix\nMatrix&lt;type,3,4&gt; = a 3x4 matrix\nMatrix&lt;type,3,3,3&gt; = a 3x3x3 Matrix (3D-Matrix) and has 27 elements\nMatrix&lt;type,3,4,5,3,2&gt; = a 3x4x5x3x2 (5D - Matrix) and has 360 elements\n\n// The number of elements will always equal the product of all of the strides.\n// When creating an arbitrary matrix size; careful consideration needs to be taken\n// when it comes to how many dimensions and the size of that dimension. Even lower\n// dimensional matrices can explode in the amount of elements...\nMatrix&lt;type, 128, 356, 242&gt; = a 128x356x242 (3D - Matrix) but has 11,027,456 elements\n\n// It is the Matrix's user defined variadic constructor that the number of arguments \n// in the parameter list that has to equal the total amount of elements defined by \n// the product of all of its strides.\n</code></pre>\n\n<p>When working with higher dimensional matrices it is hard to visualize them, but they can easily be managed with the use of the <code>strides</code> vector. We can use these for proper indexing.</p>\n\n<p>The challenging aspect of this design approach is being able to implement the actual arithmetic-computational operators. For this if we have two different matrices that have different strides, they will be treated as different types... and this is just with simple matrix arithmetic; when it comes to matrix multiplication things even get harder because the edges of Matrix A and Matrix B have to be of the same size. Ex: 4x2 * 2x3 would give a 4x3 Matrix. And this is only a 2D matrix issue, when getting into 3D, 4D, ... ND matrices the notation even gets harder. However this template approach does allow the code to be more generic and readable to be self contained into a single class as opposed to having many different matrix classes for various matrix sizes...</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3849502"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 721, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544069787, "creation_date": 1544038892, "last_edit_date": 1544051072, "question_id": 53639591, "link": "https://stackoverflow.com/questions/53639591/implementing-a-3d-matrix-in-c-using-nested-stdvector", "title": "Implementing a 3D Matrix in C++ using Nested std::vector", "body": "<p>I have a 3D Matrix with the MxNxL elements. Both M and N are known at the compile time. Whereas, L is variable and depends on user's input. But it will be provided at the beginning of the program and will never change during the life time of the program. I want to implement this Matrix in C++11 and I want to give the user the flexibility to rotate the 3D Matrix along both the the 1st and 2nd dimension of the matrix. </p>\n\n<p>I would like to know what is the best and most efficient design option to implement this Matrix?</p>\n\n<p>I have seen the below solution which uses <code>std::vector</code>. With <code>std::vector</code> the user can rotate any dimension using <code>std::rotate</code>. The solution is taken from this <a href=\"https://stackoverflow.com/questions/32675130/c-a-3-d-data-structure-should-i-use-vector-of-pointers-or-vector-of-vector/32675151#32675151\">thread</a>. However, <a href=\"https://stackoverflow.com/users/3093378/vsoftco\">vsoftco</a> mentions that it is not good to use nested vector but rather make it linear. But since I have the requirement of rotating across dimension, having linear array will make the processing hard.</p>\n\n<pre><code>#include &lt;vector&gt;\n\n#define M_SIZE 360\n#define N_SIZE 180 \n\ntemplate&lt;typename T&gt;\nusing vec = std::vector&lt;T&gt;;\n\nint main()\n{\n    uint16_t L;\n    std::cin &lt;&lt; L;\n    vec&lt;vec&lt;vec&lt;double&gt;&gt;&gt; v{M_SIZE, vec&lt;vec&lt;double&gt;&gt;{N_SIZE, vec&lt;double&gt;{L}}};\n}\n</code></pre>\n\n<p>Again, using dynamic c array is a possible solution but <code>std::rotate</code> would only work on the last dimension of the 3D Matrix.</p>\n\n<p><strong>Note:</strong> I would prefer to do this without relying on a third party library.</p>\n"}, {"tags": ["python", "c++", "qt", "pyqt4", "python-sip"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10751101, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Y-KNXHt2bpc/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-g3z21pPucFD2QcV544TW0JDsQ4_g/mo/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/10751101/alex"}, "edited": false, "score": 0, "creation_date": 1544293512, "post_id": 53643227, "comment_id": 94227725, "body": "I have a question.. After &#39;make install&#39;  mymodule.so copied to  /usr/lib/python3/dist-packages/mymodule.so and mymodule.sip copied to  /usr/share/sip/mymodule/mymodule.sip  When I try to import mymodule from Python script I get error:  Traceback (most recent call last):   File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt; ImportError: libmymodule.so.1: cannot open shared object file: No such file or directory.  If I copy libmymodule.so.1 to /usr/lib/python3/dist-packages I can import mymodule without error.  What am I doing wrong?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 23, "user_id": 10751101, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Y-KNXHt2bpc/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-g3z21pPucFD2QcV544TW0JDsQ4_g/mo/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/10751101/alex"}, "edited": false, "score": 0, "creation_date": 1544294022, "post_id": 53643227, "comment_id": 94227895, "body": "my project does not generate any mymodule but FooModule.sp and PyFooModule.so, have you tried my code first?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 23, "user_id": 10751101, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Y-KNXHt2bpc/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-g3z21pPucFD2QcV544TW0JDsQ4_g/mo/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/10751101/alex"}, "edited": false, "score": 0, "creation_date": 1544295404, "post_id": 53643227, "comment_id": 94228272, "body": "You must have 2 groups of binaries: those of C ++, in my example libFooModule.so, libFooModule.so.1, libFooModule.so.1.0 and libFooModule.so.1.0.0 that are installed in /usr/lib and another created by SIP called PyFooModule.so that in my case install it in /usr/lib/python3.7/site-packages/ in addition to the .sip file"}, {"owner": {"reputation": 23, "user_id": 10751101, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Y-KNXHt2bpc/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-g3z21pPucFD2QcV544TW0JDsQ4_g/mo/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/10751101/alex"}, "edited": false, "score": 0, "creation_date": 1544305645, "post_id": 53643227, "comment_id": 94230982, "body": "OK, I understand, I thought I need only one lib, which is generated from the *.sip file. libFooModule.so.1 is also needed for work."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 23, "user_id": 10751101, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Y-KNXHt2bpc/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-g3z21pPucFD2QcV544TW0JDsQ4_g/mo/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/10751101/alex"}, "edited": false, "score": 0, "creation_date": 1544306064, "post_id": 53643227, "comment_id": 94231107, "body": "@Alex the .so generated by SIP is a wrapper for .so generated by the Qt project, so the .so of SIP depends on the .so generated by Qt. You can verify it using ldd."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 0, "last_activity_date": 1544059123, "creation_date": 1544059123, "answer_id": 53643227, "question_id": 53639514, "link": "https://stackoverflow.com/questions/53639514/how-can-i-make-a-python-module-of-two-or-more-c-qt-classes-using-sip/53643227#53643227", "title": "How can I make a python module of two or more C++/Qt classes using SIP?", "body": "<p>It is better to structure a project when a module is developed, in this case I will use the following:</p>\n\n<pre><code>\u251c\u2500\u2500 configure.py\n\u251c\u2500\u2500 examples\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 main.py\n\u251c\u2500\u2500 sip\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 base.sip\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 derived.sip\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 pyfoomodule.sip\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 base.cpp\n    \u251c\u2500\u2500 base.h\n    \u251c\u2500\u2500 derived.cpp\n    \u251c\u2500\u2500 derived.h\n    \u251c\u2500\u2500 foomodule_global.h\n    \u2514\u2500\u2500 FooModule.pro\n</code></pre>\n\n<p>base.sip and derived.sip does not create a module, it only defines the class:</p>\n\n<p><strong>base.sip</strong></p>\n\n<pre><code>%Import QtCore/QtCoremod.sip\nclass Base: public QObject\n{\n%TypeHeaderCode\n#include \"base.h\"\n%End\npublic:\n    Base(QObject *parent=nullptr);\n    virtual QString doStuff();\n};\n</code></pre>\n\n<p><strong>derived.sip</strong></p>\n\n<pre><code>%Import QtCore/QtCoremod.sip\nclass Derived: public Base\n{\n%TypeHeaderCode\n#include \"derived.h\"\n%End\npublic:\n    Derived(QObject *parent=nullptr);\n    QString doStuff();\n};\n</code></pre>\n\n<p>and in pyfoomodule.sip the project is created including the other .sip</p>\n\n<p><strong>pyfoomodule.sip</strong></p>\n\n<pre><code>%Module(name=PyFooModule, call_super_init=True, keyword_arguments=\"Optional\")\n%DefaultMetatype PyQt4.QtCore.pyqtWrapperType\n%DefaultSupertype sip.simplewrapper\n%Include base.sip\n%Include derived.sip\n</code></pre>\n\n<p>I have also created a script that is responsible for compiling the project.</p>\n\n<p><strong>configure.py</strong></p>\n\n<pre><code>from PyQt4.QtCore import PYQT_CONFIGURATION as pyqt_config\nfrom distutils import sysconfig\nimport os, sipconfig, sys\n\n\nclass HostPythonConfiguration(object):\n    def __init__(self):\n        self.platform=sys.platform\n        self.version=sys.hexversion&gt;&gt;8\n\n        self.inc_dir=sysconfig.get_python_inc()\n        self.venv_inc_dir=sysconfig.get_python_inc(prefix=sys.prefix)\n        self.module_dir=sysconfig.get_python_lib(plat_specific=1)\n\n        if sys.platform=='win32':\n            self.data_dir=sys.prefix\n            self.lib_dir=sys.prefix+'\\\\libs'\n        else:\n            self.data_dir=sys.prefix+'/share'\n            self.lib_dir=sys.prefix+'/lib'\n\nclass TargetQtConfiguration(object):\n    def __init__(self, qmake):\n        pipe=os.popen(' '.join([qmake, '-query']))\n\n        for l in pipe:\n            l=l.strip()\n\n            tokens=l.split(':', 1)\n            if isinstance(tokens, list):\n                if len(tokens) != 2:\n                    error(\"Unexpected output from qmake: '%s'\\n\" % l)\n\n                name,value=tokens\n            else:\n                name=tokens\n                value=None\n\n            name=name.replace('/', '_')\n            setattr(self, name, value)\n\n        pipe.close()        \n\nif __name__==\"__main__\":\n    from argparse import ArgumentParser\n\n    parser=ArgumentParser(description=\"Configure PyAnalogClock module.\")\n    parser.add_argument(\n        '-q', '--qmake',\n        dest=\"qmake\",\n        type=str,\n        default=\"qmake-qt4\",\n        help=\"Path to qmake executable\"\n    )\n    parser.add_argument(\n        '-s', '--sip-extras',\n        dest=\"sip_extras\",\n        type=str,\n        default=\"\",\n        help=\"Extra arguments to sip\"\n    )\n    args=parser.parse_args()\n\n    qmake_exe=args.qmake\n    if not qmake_exe.endswith('qmake-qt4'):\n        qmake_exe=os.path.join(qmake_exe,'qmake')\n\n    if os.system(' '.join([qmake_exe, '-v']))!=0:\n\n        if sys.platform=='win32':\n            print(\"Make sure you have a working Qt qmake on your PATH.\")\n        else:\n            print(\n                \"Use the --qmake argument to explicitly specify a \"\n                \"working Qt qmake.\"\n            )\n        exit(1)\n\n    sip_args=args.sip_extras\n\n    pyconfig=HostPythonConfiguration()\n    py_sip_dir=os.path.join(pyconfig.data_dir, 'sip', 'PyQt4')\n    sip_inc_dir=pyconfig.venv_inc_dir\n\n    qtconfig=TargetQtConfiguration(qmake_exe)\n\n    inc_dir=os.path.abspath(os.path.join(\".\",\"src\"))\n    lib_dir=inc_dir\n\n    sip_files_dir=os.path.abspath(os.path.join(\".\",\"sip\"))\n    output_dir =os.path.abspath(os.path.join(\".\", \"modules\"))\n    build_file=\"pyfoomodule.sbf\"\n    build_path = os.path.join(output_dir, build_file)\n\n    if not os.path.exists(output_dir): os.mkdir(output_dir)\n    sip_file = os.path.join(sip_files_dir, \"pyfoomodule.sip\")\n\n    config=sipconfig.Configuration()    \n\n    cmd=\" \".join([\n        config.sip_bin,\n        pyqt_config['sip_flags'],\n        sip_args,\n        '-I', sip_files_dir,\n        '-I', py_sip_dir,\n        '-I', config.sip_inc_dir,\n        '-I', inc_dir,\n        \"-c\", output_dir,\n        \"-b\", build_path,\n        \"-w\",\n        \"-o\",\n        sip_file,\n    ])\n\n    print(cmd)\n    if os.system(cmd)!=0: sys.exit(1)\n\n    installs = []\n    installs.append([os.path.join(sip_files_dir, \"pyfoomodule.sip\"), \n        os.path.join(config.default_sip_dir, \"PyFooModule\")])\n\n    makefile=sipconfig.SIPModuleMakefile(\n        config,\n        build_file,\n        dir=output_dir,\n        installs=installs\n    )\n\n    makefile.extra_defines+=['MYMODULE_LIBRARY','QT_CORE_LIB', 'QT_GUI_LIB']\n    makefile.extra_include_dirs+=[os.path.abspath(inc_dir), qtconfig.QT_INSTALL_HEADERS]\n    makefile.extra_lib_dirs+=[qtconfig.QT_INSTALL_LIBS, os.path.join('..','src')]\n    makefile.extra_libs+=['FooModule']\n\n    if sys.platform=='darwin':\n        makefile.extra_cxxflags+=['-F'+qtconfig.QT_INSTALL_LIBS]        \n        makefile.extra_include_dirs+=[\n            os.path.join(qtconfig.QT_INSTALL_LIBS,'QtCore.framework','Headers'),\n            os.path.join(qtconfig.QT_INSTALL_LIBS,'QtGui.framework','Headers')\n        ]\n\n        makefile.extra_lflags+=[      \n            '-F'+qtconfig.QT_INSTALL_LIBS,\n            \"-framework QtGui\",\n            \"-framework QtCore\",\n            \"-framework DiskArbitration\",\n            \"-framework IOKit\",\n            \"-framework OpenGL\",\n            \"-framework AGL\",\n        ]\n\n    else:\n        makefile.extra_include_dirs+=[\n            os.path.join(qtconfig.QT_INSTALL_HEADERS, \"QtCore\"),\n            os.path.join(qtconfig.QT_INSTALL_HEADERS, \"QtGui\"),\n        ]\n        makefile.extra_lib_dirs+=[os.path.join('..','src','release')]\n        # makefile.extra_libs+=['Qt4Core','Qt4Gui']\n\n    makefile.generate()\n\n    sipconfig.ParentMakefile(\n        configuration = config,\n        subdirs = [\"src\", output_dir],\n    ).generate()\n\n    os.chdir(\"src\")    \n    qmake_cmd=qmake_exe\n    if sys.platform==\"win32\": qmake_cmd+=\" -spec win32-msvc2010\"\n    print()\n    print(qmake_cmd)\n    os.system(qmake_cmd)\n    sys.exit()\n</code></pre>\n\n<p>Then execute the following commands:</p>\n\n<pre><code>python configure.py --qmake /path/of/qmake\nmake \nsudo make install\n</code></pre>\n\n<p>And finally an example of how to use it:</p>\n\n<pre><code>from PyQt4 import QtCore\nfrom PyFooModule import Base, Derived\n\nclass PyDerived(Base):\n    def doStuff(self):\n        return \"PyDerived\"\n\nif __name__ == '__main__':\n    print(\"==============================\")\n    b = Base()\n    pd = PyDerived()\n    d = Derived()\n    print(\"b.doStuff(): \", b.doStuff())\n    print(\"pd.doStuff(): \", pd.doStuff())\n    print(\"d.doStuff(): \", d.doStuff())\n    print(\"==============================\")\n    print(\"Base is subclass of QObject: \", issubclass(Base, QtCore.QObject))\n    print(\"PyDerived is subclass of Base: \", issubclass(PyDerived, Base))\n    print(\"Derived is subclass of Base: \", issubclass(Derived, Base))\n    print(\"==============================\")\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>==============================\nb.doStuff():  Base\npd.doStuff():  PyDerived\nd.doStuff():  Derived\n==============================\nBase is subclass of QObject:  True\nPyDerived is subclass of Base:  True\nDerived is subclass of Base:  True\n==============================\n</code></pre>\n\n<p>The complete example can be found <a href=\"https://github.com/eyllanesc/stackoverflow/tree/master/questions/53639514\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 23, "user_id": 10751101, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Y-KNXHt2bpc/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-g3z21pPucFD2QcV544TW0JDsQ4_g/mo/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/10751101/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "accepted_answer_id": 53643227, "answer_count": 1, "score": 1, "last_activity_date": 1564573677, "creation_date": 1544038464, "last_edit_date": 1564573677, "question_id": 53639514, "link": "https://stackoverflow.com/questions/53639514/how-can-i-make-a-python-module-of-two-or-more-c-qt-classes-using-sip", "title": "How can I make a python module of two or more C++/Qt classes using SIP?", "body": "<p>I have two C++/Qt classes (A.h, A.cpp, B.h, B.cpp):</p>\n\n<pre><code>class A : public QObject\n{\n    // bla-bla\n};\nclass B : public A\n{\n    // bla-bla\n};\n</code></pre>\n\n<p>And I want to use in Python classes A and B something like this:</p>\n\n<pre><code>import mymodule\n\nclass MyB(mymodule.B):\n    pass\n\na = mymodule.A()\n</code></pre>\n\n<p>I can make a module with one class and successfully use it in Python, but I don't understand what to do with 2 classes or more.</p>\n\n<p>This is how my files for building module look for one class:</p>\n\n<p>*.pro:</p>\n\n<pre><code>TEMPLATE = lib\n\nCONFIG   += qt warn_on release\n\nHEADERS  = A.h\nSOURCES  = A.cpp\nTARGET   = mymodule\n\nDESTDIR  = /home/alex/tmp/lib\n</code></pre>\n\n<p>*.sip:</p>\n\n<pre><code>%Module A 0\n\n%Import QtCore/QtCoremod.sip\n\nclass A : QObject\n{\n%TypeHeaderCode\n#include \"A.h\"\n%End\n\npublic:\n  A();\n\n// bla-bla\n};\n</code></pre>\n\n<p>configure.py:</p>\n\n<pre><code>import os\nimport sipconfig\nfrom PyQt4 import pyqtconfig\n\nbuild_file = \"A.sbf\"\n\nconfig = pyqtconfig.Configuration()\n\nqt_sip_flags = config.pyqt_sip_flags\n\nos.system(\" \".join([config.sip_bin, \"-c\", \".\", \"-b\", build_file, \"-I\", \nconfig.pyqt_sip_dir, qt_sip_flags, \"A.sip\"]))\n\ninstalls = []\ninstalls.append([\"A.sip\", os.path.join(config.default_sip_dir, \"A\")])\n\nmakefile = pyqtconfig.QtCoreModuleMakefile(\n                      configuration=config,\n                      build_file=build_file,\n                      installs=installs)\n\nmakefile.LFLAGS.append(\"-L/home/alex/tmp/lib\")\nmakefile.extra_libs = [\"A\"]\n\nmakefile.generate()\n</code></pre>\n\n<p>After running Makefile I have \"A\" module that I can use in Python.\nHow to make 2 or more classes in one python module?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 2, "creation_date": 1544037838, "post_id": 53639368, "comment_id": 94138230, "body": "Please don&#39;t use rand. At least if you use proper <code>random</code> facilities, you know the extent of your numbers, instead of perhaps a failure somewhere here."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1544038458, "post_id": 53639368, "comment_id": 94138474, "body": "Check <code>RAND_MAX</code> It&#39;s allowable for the largest number provided to be 32767, far too small to be of use to you."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1544038738, "post_id": 53639368, "comment_id": 94138607, "body": "Sounds like  <a href=\"https://en.cppreference.com/w/cpp/numeric/random/discrete_distribution\" rel=\"nofollow noreferrer\"><code>std::discrete_distribution</code></a> might be what you are looking for."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1544039361, "post_id": 53639368, "comment_id": 94138888, "body": "Why generate random numbers at all? Why not simply use <code>i</code> as the roll? This will let you build and test the program without introducing any random element. You should be able to verify that you get exactly the results you&#39;d predict. For example, with 1000-9999 in the population, you&#39;d expect exactly one person to get a score of 2. And you&#39;d know their ID beforehand"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1544041310, "post_id": 53639368, "comment_id": 94139704, "body": "Short answer: <code>srand(time(NULL))</code> is an awful way to seed random values, it&#39;s way too predictable, and <code>rand()</code> itself is <i>barely</i> random and shouldn&#39;t be used in C++."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1544040637, "post_id": 53639907, "comment_id": 94139417, "body": "<i>ints span from \u20132,147,483,648 to 2,147,483,647</i> is incorrect. C++ only specifies the minimum size, 16 bits, and that <code>int</code> cannot be larger than <code>long</code>. The <a href=\"https://en.cppreference.com/w/cpp/language/types\" rel=\"nofollow noreferrer\">cppreference page on fundamental data types</a> covers this in more detail. The maximum size of <code>RAND_MAX</code> is likewise not specified, only the minimum, 32767 or 15 bits."}, {"owner": {"reputation": 96, "user_id": 10712815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/796eaa3f0a90efbcb800d64b2c8dd65c?s=128&d=identicon&r=PG&f=1", "display_name": "Sam P", "link": "https://stackoverflow.com/users/10712815/sam-p"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1544041326, "post_id": 53639907, "comment_id": 94139713, "body": "Ah yes, I was assuming it was using a 32 bit compiler for the limits."}], "tags": [], "owner": {"reputation": 96, "user_id": 10712815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/796eaa3f0a90efbcb800d64b2c8dd65c?s=128&d=identicon&r=PG&f=1", "display_name": "Sam P", "link": "https://stackoverflow.com/users/10712815/sam-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1544041456, "last_edit_date": 1544041456, "creation_date": 1544040124, "answer_id": 53639907, "question_id": 53639368, "link": "https://stackoverflow.com/questions/53639368/random-number-generator-with-probably-based-on-dice-sides-in-the-millions/53639907#53639907", "title": "Random number generator with probably based on dice sides in the millions", "body": "<p>This issue does not have to do with the type ranges for the variables, as ints span from \u20132,147,483,648 to 2,147,483,647 (with a 32bit compiler, see comment below).</p>\n\n<p>The error here is that the rand() function only returns up to a maximum number defined in the stdlib.h file, which is 32767. You should use the standard random library header to generate your random number. I recommend taking a look at this answer to see how to do that easily, <a href=\"https://stackoverflow.com/questions/37396278/how-to-generate-very-large-random-number-in-c/37396515\">How to generate very Large random number in c++</a></p>\n\n<p>Edit: See user4581301's comment below. I had assumed the ints type range, but it would probably be safest to use long here to ensure the large numbers you are trying to get can fit in the variable.</p>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 1, "last_activity_date": 1544045260, "creation_date": 1544045260, "answer_id": 53641033, "question_id": 53639368, "link": "https://stackoverflow.com/questions/53639368/random-number-generator-with-probably-based-on-dice-sides-in-the-millions/53641033#53641033", "title": "Random number generator with probably based on dice sides in the millions", "body": "<p><code>rand</code> comes from the dark ages when programmers had to grub around in the muck to get every last bit they could. If they had an 8-bit CPU they celebrated. For 16 bits, they sacrificed their firstborn. Good thing that I was child number two, eh?</p>\n\n<p>Nah. Just kidding. My dad was an accountant. My big brother's fine.</p>\n\n<p>Anyway, <code>rand</code> may not be sufficient to generate the numbers you need. Some implementations still cap the output at 15 bits, matching the best positive value you were going to get from an integer back in the old days. <code>rand</code> also had to be fast on severely resource-constrained computers and as a result it makes assumptions and requires usage patterns that <a href=\"https://channel9.msdn.com/Events/GoingNative/2013/rand-Considered-Harmful\" rel=\"nofollow noreferrer\">flat-out suck</a>.</p>\n\n<p>Fast forward to today where integers are sometimes 64 bit and you may have more computing power in your pocket than the whole world had when C was first written. We can do a whole lot better. You could use <a href=\"https://en.cppreference.com/w/cpp/numeric/random/uniform_int_distribution\" rel=\"nofollow noreferrer\"><code>std::uniform_int_distribution</code></a> as an almost drop-in replacement for <code>rand</code> that will generate numbers the size you need, but we can do even better than that.</p>\n\n<p>Note: All I've done here is modify <a href=\"https://en.cppreference.com/w/cpp/numeric/random/discrete_distribution\" rel=\"nofollow noreferrer\">the example code from <code>std::discrete_distribution</code></a> to use different weights for the purpose of this demonstration.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;map&gt;\n#include &lt;random&gt;\n\nint main()\n{\n    std::random_device rd;\n    std::mt19937 gen(rd());\n    std::discrete_distribution&lt;&gt; d({ 1.0, \n                                     1.0 / 1000.0, \n                                     1.0 / 10000.0, \n                                     1.0 / 100000.0 });\n    std::map&lt;int, int&gt; m;\n    for (int n = 0; n&lt;10000000; ++n) {\n        ++m[d(gen)];\n    }\n    for (auto p : m) {\n        std::cout &lt;&lt; p.first + 1 &lt;&lt; \" generated \" &lt;&lt; p.second &lt;&lt; \" times\\n\";\n    }\n}\n</code></pre>\n\n<p>This does all of the magic for you and spits out 1 through 4 in proportion with the given weights. Virtually all of the code needed in the Asker's program to select the number of elements that could be controlled are gone.</p>\n\n<p>This is really close and probably close enough, but as you can see, sums up to a combined weight of slightly over 1. Ooops. Not quite what you've coded where if you have a 1 in 100000 event it supersedes the 1 in 10000, 1 in 1000, and 1 in 1 events. We want something that looks more like </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;map&gt;\n#include &lt;random&gt;\n\nint main()\n{\n    std::random_device rd;\n    std::mt19937 gen(rd());\n    std::discrete_distribution&lt;&gt; d({ 100000 - 1000, \n                                     1000 - 100,\n                                     100 - 1, \n                                     1});\n    std::map&lt;int, int&gt; m;\n    for (int n = 0; n&lt;1000000; ++n) {\n        ++m[d(gen)];\n    }\n    for (auto p : m) {\n        std::cout &lt;&lt; p.first + 1 &lt;&lt; \" generated \" &lt;&lt; p.second &lt;&lt; \" times\\n\";\n    }\n}\n</code></pre>\n\n<p>Caveats: </p>\n\n<p>Make certain that <code>random_device</code> provides a useful seed on your system. MinGW's <code>random_device</code> implementation has an annoying habit of always returning 0, a perfectly valid random number but still useless if you get it all of the time (it's effectively a <a href=\"https://xkcd.com/221/\" rel=\"nofollow noreferrer\">Randall Number Generator</a>).</p>\n"}], "owner": {"reputation": 17, "user_id": 9558631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbab993978e9f1cfa2286fdfa7ed0977?s=128&d=identicon&r=PG&f=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/9558631/bryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1544075065, "creation_date": 1544037774, "last_edit_date": 1544075065, "question_id": 53639368, "link": "https://stackoverflow.com/questions/53639368/random-number-generator-with-probably-based-on-dice-sides-in-the-millions", "title": "Random number generator with probably based on dice sides in the millions", "body": "<p>I'm trying to create a program that is designed to determine how many elements a video game character can control. In this setting, the general population can control at least 1 element. But I want 1 out of every 1000 people to have 2 elements they can control, 1 out of every 10,000 people can control 3 elements and 1 out of every 100,000 people can control 4. </p>\n\n<p>The program start by asking how many are in the population. This will equal how many sides the die has. Then, it loops through, generating random numbers and then outputting how many people can control how many elements. </p>\n\n<p>I run into an issue that I think had to do with my data type. Even if I put in a population of 1,000,000 the loop iterates a million times but never rolls numbers beyond 5 digits. so a population beyond 99,999 could technically never have 3 or 4 elements. It doesn't seem to go beyond 50k ish and I remember reading that one of the data types only does 65k-ish numbers. Is that the cause? What data types should I use to be able to roll random numbers between 0 and millions?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;ctime&gt;\n#include &lt;iomanip&gt;\n\nusing namespace std;\n\n\nint main()\n{\n    int min = 1, max, sides, roll;\n    double oneCounter = 0.0, twoCounter = 0.0, threeCounter = 0.0, fourCounter = 0.0;\n\n    unsigned long seed = time(0);\n    srand(seed);\n    cout &lt;&lt; \"How many characters would you like to generate?: \";\n    cin &gt;&gt; sides;\n    max = sides;\n\n    cout &lt;&lt; \"\\n\";\n\n    for (int i = 0; i &lt; sides; i++)\n    {\n        roll = rand() % (max - min + 1) + min;\n\n        if (roll % 100000 == 0)\n        {\n            cout &lt;&lt; roll &lt;&lt; \": You will have 4 elements\" &lt;&lt;endl;\n            fourCounter++;\n        }\n        else if (roll % 10000 == 0)\n        {\n            cout &lt;&lt; roll &lt;&lt; \": You will have 3 elements\" &lt;&lt;endl;\n            threeCounter++;\n        }\n        else if (roll % 1000 == 0)\n        {\n            cout &lt;&lt; roll &lt;&lt; \": You will have 2 elements\" &lt;&lt;endl;\n            twoCounter++;\n        }\n        else\n        {\n            cout &lt;&lt; roll &lt;&lt; \": You will have 1 element.\" &lt;&lt;endl;\n            oneCounter++;\n        }\n    }\n\n    cout &lt;&lt; left;\n    cout &lt;&lt; \"\\n==============================\" &lt;&lt;endl;\n    cout &lt;&lt;setw(11) &lt;&lt; \"Potential\"\n         &lt;&lt; setw(10) &lt;&lt; \"QTY\"\n         &lt;&lt; setw(10) &lt;&lt; \"Pct\"\n         &lt;&lt; endl;\n    cout &lt;&lt; \"==============================\" &lt;&lt;endl;\n    cout &lt;&lt; setw(11) &lt;&lt; \"Single: \" \n         &lt;&lt; setw(10) &lt;&lt; oneCounter\n         &lt;&lt; setw(10) &lt;&lt; (oneCounter/sides)*100 &lt;&lt;endl;\n\n    cout &lt;&lt; setw(11) &lt;&lt; \"Double: \" \n         &lt;&lt; setw(10) &lt;&lt; twoCounter \n         &lt;&lt; setw(10) &lt;&lt; (twoCounter/sides)*100 &lt;&lt;endl;\n\n    cout &lt;&lt; setw(11) &lt;&lt; \"Triple: \" \n         &lt;&lt; setw(10) &lt;&lt; threeCounter \n         &lt;&lt; setw(10) &lt;&lt; (threeCounter/sides)*100 &lt;&lt;endl;\n\n    cout &lt;&lt; setw(11) &lt;&lt; \"Quadruple: \" \n         &lt;&lt; setw(10) &lt;&lt; fourCounter \n         &lt;&lt; setw(10) &lt;&lt; (fourCounter/sides)*100 &lt;&lt;endl;\n\n\n    cout &lt;&lt; \"\\n\\n\";\n    return 0;\n}\n</code></pre>\n\n<p>I have included a screen shot of the results when done for a population (sides) of 100,000 people. The probabilities looks fine, but the numbers are never more than 5 digits long. </p>\n\n<p><a href=\"https://i.stack.imgur.com/p1U9v.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/p1U9v.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "switch-statement"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 3, "creation_date": 1544037690, "post_id": 53639317, "comment_id": 94138173, "body": "Forgot about the <code>break</code> statement in <code>switch</code>es?"}, {"owner": {"reputation": 571, "user_id": 4096272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345c800d1d42a321a26ce5033e75f437?s=128&d=identicon&r=PG&f=1", "display_name": "Tony J", "link": "https://stackoverflow.com/users/4096272/tony-j"}, "edited": false, "score": 1, "creation_date": 1544037800, "post_id": 53639317, "comment_id": 94138215, "body": "Just not have a default case, or do nothing in the default case."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1544037991, "post_id": 53639317, "comment_id": 94138285, "body": "The Twelve Days of <a href=\"https://en.wikipedia.org/wiki/Duff%27s_device\" rel=\"nofollow noreferrer\">Duff&#39;s Device</a>."}], "answers": [{"tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": true, "score": 4, "last_activity_date": 1544037859, "creation_date": 1544037859, "answer_id": 53639386, "question_id": 53639317, "link": "https://stackoverflow.com/questions/53639317/omit-default-case-in-c-switch-case/53639386#53639386", "title": "Omit default case in C++ switch case", "body": "<p>You are forgetting the <code>break</code> statement.  If there is no <code>break</code> statement, the logic will just flow into the next <code>case</code>, as it was doing with all of the other <code>cases</code> (12, 11, 10, etc.).</p>\n\n<pre><code> case 2: gift += \"two turtle doves \";\n case 1:\n    if(i &gt; 1) \n      gift += \"and \";\n    gift += \"a partrige in a pear tree\";\n break;  // &lt;-- Missing\n\n default: gift = \"a logic error\";\n</code></pre>\n"}], "owner": {"reputation": 28, "user_id": 10475168, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ikPV9tdkly0/AAAAAAAAAAI/AAAAAAAAA0E/AJVB76jjWCU/photo.jpg?sz=128", "display_name": "Bartosz ", "link": "https://stackoverflow.com/users/10475168/bartosz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 53639386, "answer_count": 1, "score": -1, "last_activity_date": 1544037859, "creation_date": 1544037562, "question_id": 53639317, "link": "https://stackoverflow.com/questions/53639317/omit-default-case-in-c-switch-case", "title": "Omit default case in C++ switch case", "body": "<p>I am trying to write a program that prints the 12 days of Christmas song.  Is there a way to not execute the default block of a switch?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main() {\n    string day[] = {\"first\", \"second\", \"third\", \"fourth\", \"fifth\", \"sixth\", \"seventh\", \"eith\", \"ninth\", \"tenth\", \"eleventh\", \"twelth\"};\n\n    for (int i = 1 ; i &lt;= 12 ; i++) {\n        string gift = \"\";\n\n        switch (i) {\n            case 12: gift += \"twelve durmmers drumming, \";\n            case 11: gift += \"eleven pipers piping, \";\n            case 10: gift += \"ten lords a-leaping, \";\n            case 9: gift += \"nine ladies dancing, \";\n            case 8: gift += \"eight maids a-milking, \";\n            case 7: gift += \"seven swans a-swimming, \";\n            case 6: gift += \"six geese a-laying, \";\n            case 5: gift += \"five golden rings, \";\n            case 4: gift += \"four calling birds, \";\n            case 3: gift += \"three french hens, \";\n            case 2: gift += \"two turtle doves \";\n            case 1:\n                if(i &gt; 1) {\n                    gift += \"and \";\n                }\n                gift += \"a partrige in a pear tree\";\n            **default: gift = \"a logic error\";/// SHOULD NEVER EXECUTE**\n        }\n\n        cout &lt;&lt; \"On the \" &lt;&lt; day[i - 1] &lt;&lt; \" day of Chirstmas my true love gave to me \" &lt;&lt; gift &lt;&lt; \".\" &lt;&lt; endl;\n    }\n\n    system(\"pause\");\n\n    return 0;\n}\n</code></pre>\n\n<p>The output prints this instead of the song:</p>\n\n<p>On the first day of Chirstmas my true love gave to me a logic error.<br/>    On the second day of Chirstmas my true love gave to me a logic error.<br/>    On the third day of Chirstmas my true love gave to me a logic error.<br/>    On the fourth day of Chirstmas my true love gave to me a logic error.<br/>    On the fifth day of Chirstmas my true love gave to me a logic error.<br/>    On the sixth day of Chirstmas my true love gave to me a logic error.<br/>    On the seventh day of Chirstmas my true love gave to me a logic error. On the eigth day of Chirstmas my true love gave to me a logic error.<br/> On the ninth day of Chirstmas my true love gave to me a logic error.<br/> On the tenth day of Chirstmas my true love gave to me a logic    error.<br/> On the eleventh day of Chirstmas my true love gave to me a    logic error.<br/> On the twelth day of Chirstmas my true love gave to me a    logic error.<br/> Press any key to continue . . .</p>\n"}, {"tags": ["c#", "c++", "windows", "active-directory"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1544057282, "post_id": 53639302, "comment_id": 94145242, "body": "How have you concluded that your implementations weren&#39;t fast enough? And why are you obsessed with finding the <i>fastest</i> way to do something as opposed to a solution that is fast enough? Before moving forward you need to profile your implementation. That will both give you baseline performance data as well as allow you to see, what&#39;s limiting you. For all we know you could be limited by a resource outside your control."}], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 7016967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1Nb1tdGhGNs/AAAAAAAAAAI/AAAAAAAABTg/GXJ-sCh0nPo/photo.jpg?sz=128", "display_name": "Cade Bryant", "link": "https://stackoverflow.com/users/7016967/cade-bryant"}, "edited": false, "score": 0, "creation_date": 1544130168, "post_id": 53640368, "comment_id": 94177523, "body": "Thanks, I&#39;ll try that out and see how well it performs!"}], "tags": [], "owner": {"reputation": 28745, "user_id": 1202807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e09276b9edb245e928e7163b27b15691?s=128&d=identicon&r=PG", "display_name": "Gabriel Luci", "link": "https://stackoverflow.com/users/1202807/gabriel-luci"}, "is_accepted": false, "score": 0, "last_activity_date": 1544104060, "last_edit_date": 1544104060, "creation_date": 1544042325, "answer_id": 53640368, "question_id": 53639302, "link": "https://stackoverflow.com/questions/53639302/programmatically-retrieving-active-directory-data-faster-than-csvde-or-net/53640368#53640368", "title": "Programmatically retrieving Active Directory data faster than CSVDE or .NET", "body": "<p>.NET's <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.directoryservices\" rel=\"nofollow noreferrer\"><code>System.DirectoryServices</code></a> namespace (e.g. <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.directoryservices.directoryentry\" rel=\"nofollow noreferrer\"><code>DirectoryEntry</code></a>/<a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.directoryservices.directorysearcher\" rel=\"nofollow noreferrer\"><code>DirectorySearcher</code></a>) is a wrapper over the native Windows Active Directory Services Interface (<a href=\"https://docs.microsoft.com/en-us/windows/desktop/adsi/using-adsi\" rel=\"nofollow noreferrer\">ADSI</a>). The only performance hit is that it's a wrapper (the .NET component on top of the native C++).</p>\n\n<p>But that's not where the performance bottleneck is. Whenever you're doing reports from AD, the biggest performance hit is from the network requests, so the key to performance is to keep network requests to a minimum and/or run the report as close to a domain controller as possible to minimize the round-trip time.</p>\n\n<p>The <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.directoryservices.accountmanagement\" rel=\"nofollow noreferrer\"><code>System.DirectoryServices.AccountManagement</code></a> namespace (e.g. <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.directoryservices.accountmanagement.userprincipal\" rel=\"nofollow noreferrer\"><code>UserPrincipal</code></a>) is a wrapper on top of <code>System.DirectoryServices</code> and, in my experience, is horribly slow because you lose control of how many requests go out to AD (for example, it routinely gets <em>all</em> attributes for AD objects even if you never use them).</p>\n\n<p>If you want performance, use <code>System.DirectoryServices</code>. There are a few things to keep in mind to keep performance up:</p>\n\n<ol>\n<li>When using <code>DirectorySearcher</code>, <em>always</em> add something to <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.directoryservices.directorysearcher.propertiestoload\" rel=\"nofollow noreferrer\"><code>PropertiesToLoad</code></a>. If you ask for nothing, it will return all attributes that have a value.</li>\n<li><code>DirectoryEntry</code> uses a property cache. If you access <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.directoryservices.directoryentry.properties\" rel=\"nofollow noreferrer\"><code>DirectoryEntry.Properties</code></a>, it will check to see if it has the property in its cache already. If not, it will ask AD for every attribute with a value. To avoid this, you can populate the cache with specific attributes by using <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.directoryservices.directoryentry.refreshcache\" rel=\"nofollow noreferrer\"><code>DirectoryEntry.RefreshCache()</code></a>, like this:</li>\n</ol>\n\n\n\n<pre><code>de.RefreshCache(new[] {\"company\", \"sAMAccountName\"});\nvar company = de.Properties[\"company\"]?.Value as string;\nvar username = de.Properties[\"sAMAccountName\"].Value as string;\n</code></pre>\n\n<ol start=\"3\">\n<li>Because of 1 &amp; 2, when going through the results of a search, don't use <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.directoryservices.searchresult.getdirectoryentry\" rel=\"nofollow noreferrer\"><code>SearchResult.GetDirectoryEntry()</code></a> just for the purpose of reading <code>Properties</code>. Otherwise, you'll end up going back to AD to get attributes that you could have gotten during the search. Use <code>PropertiesToLoad</code> instead.</li>\n<li>If you're doing a report, you're likely looping over many accounts, which is a lot of processing. This means that .NET's garbage collector won't have time to run until the loop ends. So make sure you dispose of <code>DirectoryEntry</code> objects you create (either manually, or put them in a <code>using</code> statement) before you move on to the next account. Otherwise your program will consume a ton of memory (this happened to me).</li>\n<li>When using <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.directoryservices.directorysearcher.findall\" rel=\"nofollow noreferrer\"><code>DirectorySearcher.FindAll()</code></a>, make sure you dispose of the results (again, either by calling <code>.Dispose()</code> or put it in a <code>using</code> statement). The documentation says that you will end up with memory leaks if you don't.</li>\n</ol>\n\n<p>There is probably more than can be said, but it depends on exactly what you're doing.</p>\n"}], "owner": {"reputation": 157, "user_id": 7016967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1Nb1tdGhGNs/AAAAAAAAAAI/AAAAAAAABTg/GXJ-sCh0nPo/photo.jpg?sz=128", "display_name": "Cade Bryant", "link": "https://stackoverflow.com/users/7016967/cade-bryant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1544104060, "creation_date": 1544037523, "question_id": 53639302, "link": "https://stackoverflow.com/questions/53639302/programmatically-retrieving-active-directory-data-faster-than-csvde-or-net", "title": "Programmatically retrieving Active Directory data faster than CSVDE or .NET", "body": "<p>I'm a developer looking for the most performant way to retrieve Active Directory data from a domain controller.  In the past, I've experimented with the .NET API, and I've also used the CSVDE and LDIFDE command-line tools.  </p>\n\n<p>Is there is a more efficient and high-performance way do this programmatically?  I'm willing even to use C++ to do system-level programming, if necessary.</p>\n\n<p>The reason I'm asking is that I'm building an application that looks for, and reports on, potential security issues on a client's Windows network.</p>\n"}, {"tags": ["c++", "templates", "name-lookup"], "comments": [{"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1544037064, "post_id": 53639166, "comment_id": 94137916, "body": "It&#39;s still a type mismatch, is it not?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1544037297, "post_id": 53639166, "comment_id": 94138036, "body": "I&#39;m tempted to say this is a bug but I&#39;m not sure.  clang and gcc both error but MSVS compiles fine.  <code>return (sp-&gt;conflict) &lt; 0;</code> gets it to compile with both clang and gcc."}, {"owner": {"reputation": 11407, "user_id": 286340, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/bd79db38b077342f501463815b8b9813?s=128&d=identicon&r=PG", "display_name": "Nate", "link": "https://stackoverflow.com/users/286340/nate"}, "edited": false, "score": 1, "creation_date": 1544037319, "post_id": 53639166, "comment_id": 94138047, "body": "Very literally, I suppose, but the &quot;error&quot; to me is tied to intent: it isn&#39;t the programmer&#39;s intent that 0 ought to be a type, but rather that <code>conflict</code> should be referring to the field."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1544038071, "post_id": 53639166, "comment_id": 94138320, "body": "Compilers do not read programmer&#39;s intent, they read programmer&#39;s code."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1544038172, "post_id": 53639166, "comment_id": 94138370, "body": "No, <a href=\"http://coliru.stacked-crooked.com/a/3d6e67699e0fcf37\" rel=\"nofollow noreferrer\">this sample code</a> may be interesting.  The one with <code>sp-&gt;conflict&lt;T&gt;</code> becomes correct.  (and yes, yours has a <code>0;</code> instead of <code>T&gt;::x;</code>, but the compiler shouldn&#39;t have to look that far ahead to know if <code>&lt;</code> starts a template parameter list, or is <code>operator&lt;</code>.)"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 7, "creation_date": 1544038394, "post_id": 53639166, "comment_id": 94138456, "body": "This is a variant of <a href=\"https://wg21.link/CWG1835\" rel=\"nofollow noreferrer\">core issue 1835</a>."}], "answers": [{"tags": [], "owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": true, "score": 7, "last_activity_date": 1544140547, "last_edit_date": 1544140547, "creation_date": 1544040271, "answer_id": 53639931, "question_id": 53639166, "link": "https://stackoverflow.com/questions/53639166/what-is-this-template-parsing-conflict-called/53639931#53639931", "title": "What is this template parsing conflict called?", "body": "<p>As <a href=\"https://stackoverflow.com/questions/53639166/what-is-this-template-parsing-conflict-called/53639931#comment94138456_53639166\">T.C. pointed out</a> this is the subject of <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#1835\" rel=\"nofollow noreferrer\">CWG active issue 1835</a> which says:</p>\n\n<blockquote>\n  <p>According to 6.4.5 [basic.lookup.classref] paragraph 1,</p>\n  \n  <blockquote>\n    <p>In a class member access expression (8.2.5 [expr.ref]), if the . or -> token is immediately followed by an identifier followed by a &lt;, the identifier must be looked up to determine whether the &lt; is the\n    beginning of a template argument list (17.2 [temp.names]) or a\n    less-than operator. The identifier is first looked up in the class of\n    the object expression. If the identifier is not found, it is then\n    looked up in the context of the entire postfix-expression and shall\n    name a class template. </p>\n  </blockquote>\n  \n  <p>Given</p>\n\n<pre><code>   template&lt;typename T&gt; T end(T);\n   template&lt;typename T&gt;\n   bool Foo(T it) {\n     return it-&gt;end &lt; it-&gt;end;\n   }\n</code></pre>\n  \n  <p>since it is dependent and thus end cannot be looked up in the class of\n  the object expression, it is looked up in the context of the\n  postfix-expression. This lookup finds the function template, making\n  the expression ill-formed.</p>\n  \n  <p>One possibility might be to limit the lookup to the class of the\n  object expression when the object expression is dependent.</p>\n</blockquote>\n\n<p>A fix is to use <code>()</code>:</p>\n\n<pre><code>return (sp-&gt;conflict) &lt; 0;\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/p50xnV\" rel=\"nofollow noreferrer\">see it live on godbolt</a></p>\n"}], "owner": {"reputation": 11407, "user_id": 286340, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/bd79db38b077342f501463815b8b9813?s=128&d=identicon&r=PG", "display_name": "Nate", "link": "https://stackoverflow.com/users/286340/nate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 1, "accepted_answer_id": 53639931, "answer_count": 1, "score": 9, "last_activity_date": 1544140547, "creation_date": 1544036902, "last_edit_date": 1544074609, "question_id": 53639166, "link": "https://stackoverflow.com/questions/53639166/what-is-this-template-parsing-conflict-called", "title": "What is this template parsing conflict called?", "body": "<p>I am getting an issue compiling this minimal example with g++ 7.3</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct conflict\n{\n};\n\ntemplate&lt;typename T&gt;\nstruct s\n{\n    int conflict;\n};\n\ntemplate&lt;typename T&gt;\nbool go()\n{\n    s&lt;T&gt;* sp;\n    return sp-&gt;conflict &lt; 0;\n}\n</code></pre>\n\n<p>The actual error message is less than revealing:</p>\n\n<pre><code>|| test.cpp: In function \u2018bool go()\u2019:\ntest.cpp|16 col 24| error: type/value mismatch at argument 1 in template parameter list for \u2018template&lt;class T&gt; struct conflict\u2019\n||   return sp-&gt;conflict &lt; 0;\n||                         ^\ntest.cpp|16 col 24| note:   expected a type, got \u20180\u2019\n</code></pre>\n\n<p>In truth the compiler is trying to instantiate the <code>conflict</code> template instead of comparing the <code>conflict</code> field.</p>\n\n<p>Does this error have a name?</p>\n\n<p>Also, I fixed it by swapping the comparison to use <code>&gt;</code>.  Is there a better way?</p>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1544038988, "post_id": 53638922, "comment_id": 94138728, "body": "I&#39;m having trouble understanding what the actual question is. Since it compiles - what is the actual behavior and what is the desired behavior?"}, {"owner": {"reputation": 1215, "user_id": 2712726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/BRddb.jpg?s=128&g=1", "display_name": "Patrick Fromberg", "link": "https://stackoverflow.com/users/2712726/patrick-fromberg"}, "edited": false, "score": 0, "creation_date": 1544049985, "post_id": 53638922, "comment_id": 94143258, "body": "Coincidentally this example uses <code>optional</code> but this question is otherwise unrelated to <code>optional</code> and unrelated to any specific C++ version. I would remove tag <code>c++17</code> and add tag <code>linker</code>."}, {"owner": {"reputation": 1215, "user_id": 2712726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/BRddb.jpg?s=128&g=1", "display_name": "Patrick Fromberg", "link": "https://stackoverflow.com/users/2712726/patrick-fromberg"}, "edited": false, "score": 0, "creation_date": 1544119773, "post_id": 53638922, "comment_id": 94173010, "body": "I deleted my answer because the question is quite different now compared to what it was initially."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10133158"}, "reply_to_user": {"reputation": 1215, "user_id": 2712726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/BRddb.jpg?s=128&g=1", "display_name": "Patrick Fromberg", "link": "https://stackoverflow.com/users/2712726/patrick-fromberg"}, "edited": false, "score": 0, "creation_date": 1544188384, "post_id": 53638922, "comment_id": 94197817, "body": "@PatrickFromberg , no it is not different it is the same issue. Barry just removed all the cruft. the tag C++17 stays and the tag &#39;linker&#39; you requested still does not make any sense here."}], "answers": [{"comments": [{"owner": {"reputation": 1215, "user_id": 2712726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/BRddb.jpg?s=128&g=1", "display_name": "Patrick Fromberg", "link": "https://stackoverflow.com/users/2712726/patrick-fromberg"}, "edited": false, "score": 0, "creation_date": 1544113826, "post_id": 53654466, "comment_id": 94170007, "body": "So it is legal that a free function declaration can serve as declaration of a friend function? I now vaguely believe to remember that I saw code in the STL that depends on that feature. Can you remind me where please?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 1215, "user_id": 2712726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/BRddb.jpg?s=128&g=1", "display_name": "Patrick Fromberg", "link": "https://stackoverflow.com/users/2712726/patrick-fromberg"}, "edited": false, "score": 0, "creation_date": 1544114321, "post_id": 53654466, "comment_id": 94170253, "body": "@PatrickFromberg I don&#39;t understand the question. You can friend already-existing functions, and you can provide a declaration for a friend function you declared within a class definition."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10133158"}, "edited": false, "score": 0, "creation_date": 1544115380, "post_id": 53654466, "comment_id": 94170837, "body": "@Barry thanks this is simple and works too. I already made it a regular function in my problem inducing code."}, {"owner": {"reputation": 1215, "user_id": 2712726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/BRddb.jpg?s=128&g=1", "display_name": "Patrick Fromberg", "link": "https://stackoverflow.com/users/2712726/patrick-fromberg"}, "edited": false, "score": 0, "creation_date": 1544125699, "post_id": 53654466, "comment_id": 94175492, "body": "@Barry, the thing I did not know was that you can declare the friend function outside of the class without the class name qualification and friend specification. But I see now that this makes sense."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10133158"}, "edited": false, "score": 0, "creation_date": 1544188670, "post_id": 53654466, "comment_id": 94197960, "body": "If one makes <code>friend operator &lt;&lt;</code> , inside A::X that would also work. the issue I was having is I could not do that since my nested type name was std::optional&lt;T&gt;, in that case the way out is indeed to declare the requested operator where name lookup can find it."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 2, "last_activity_date": 1544109460, "creation_date": 1544109460, "answer_id": 53654466, "question_id": 53638922, "link": "https://stackoverflow.com/questions/53638922/streaming-operator-overloading-for-nested-type-names-inside-templates/53654466#53654466", "title": "streaming operator overloading for nested type names inside templates", "body": "<p>Here's a simpler reproduction:</p>\n\n<pre><code>namespace A {\n  struct X { };\n}\n\nnamespace B {\n  struct Y {\n    A::X x;\n\n    // #1\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, A::X) {\n      return os;\n    }\n\n    // #2\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, Y y) {\n      return os &lt;&lt; y.x; // error: no match for operator&lt;&lt;\n    }\n  };\n}\n</code></pre>\n\n<p>This is because of how name lookup works. When you declare and define a namespace-scope friend function like this, that function can <em>only</em> be found by argument-dependent lookup of its arguments. It is never found by regular unqualified lookup.</p>\n\n<p>But the function you're declaring in <code>#1</code> isn't actually in the associated namespace of any of its arguments - the function is declared in <code>namespace B</code>, but its two arguments are in <code>namespace std</code> and <code>namespace A</code>, respectively. As a result, when we write <code>os &lt;&lt; y.x</code>, no matching candidates are found by regular unqualified lookup and then no candidates are found by argument-dependent lookup either - <code>#1</code> is not in the right namespace. Hence, no candidates.</p>\n\n<p>The shortest solution is to just add a namespace-scope declaration of <code>#1</code> outside of <code>struct Y</code>:</p>\n\n<pre><code>namespace B {\n  std::ostream&amp; operator&lt;&lt;(std::ostream&amp;, A::X);\n\n  struct Y { ... };\n}\n</code></pre>\n\n<p>Now, this function can be found by regular unqualified lookup, so the call in <code>#2</code> works. But really, there's no reason to have declared <code>#1</code> as a friend function with <code>B::Y</code> (it in no way refers to <code>B::Y</code>), so just declare it externally. It also doesn't work very well as a streaming operator, so probably just make it a regular function instead. </p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10133158"}, "is_accepted": false, "score": 0, "last_activity_date": 1544259188, "last_edit_date": 1544259188, "creation_date": 1544190189, "answer_id": 53670811, "question_id": 53638922, "link": "https://stackoverflow.com/questions/53638922/streaming-operator-overloading-for-nested-type-names-inside-templates/53670811#53670811", "title": "streaming operator overloading for nested type names inside templates", "body": "<p>Just building on top of Barry's simplification of the question and then on top of his answer.</p>\n\n<pre><code>namespace {\n\n    using namespace std;\n\n    namespace A {\n        struct X { \n            // #1 --&gt; SOLUTION to problem #1 \n            // friend operator is here in the scope where\n            // name lookup can find it, declared and defined\n            friend wostream&amp; operator&lt;&lt;(wostream&amp; os, X) {\n                return os &lt;&lt; L\"A::X\" ;\n            }\n        };\n    }\n\n    namespace B {\n        struct Y {\n            A::X x;\n\n            // #1 --&gt; PROBLEM: name lookup can not find this \n            // as it is in the scope unrelated to A::X\n            /*\n            friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, A::X) {\n                return os;\n            }\n            */\n\n            // #2\n            friend wostream&amp; operator&lt;&lt;(wostream&amp; os, Y y) {\n                // &lt;&lt; y.x is normally found inside the \n                // type of x and that is A::X\n                return os &lt;&lt; L\"\\nB::Y --&gt; \" &lt;&lt; y.x; \n            }\n        };\n    }\n\n    void test_barry() {\n        B::Y by_;\n\n        wcout &lt;&lt; by_;\n    }\n}\n</code></pre>\n\n<p>This is for the situations when we can insert the necessary friend operator inside the nested type. Otherwise please see Barry's answer.</p>\n\n<p>For further education opportunity perhaps <a href=\"https://web.mst.edu/~nmjxv3/articles/templates.html\" rel=\"nofollow noreferrer\">this is a good start</a>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10133158"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1544259188, "creation_date": 1544035909, "last_edit_date": 1544114554, "question_id": 53638922, "link": "https://stackoverflow.com/questions/53638922/streaming-operator-overloading-for-nested-type-names-inside-templates", "title": "streaming operator overloading for nested type names inside templates", "body": "<p>The following code does not compile:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n#include &lt;optional&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nnamespace dbj {\n\n    template&lt; typename K, typename V &gt;\n    class top final {\n        static_assert(\n          ! is_same_v&lt;K,V&gt;, \n          \" to make things simpler K and V must be different types\"\n        );\n    public:\n        // nested type names\n        using key_type = optional&lt;K&gt;;\n        using val_type = optional&lt;V&gt;;\n        using type = top;\n\n    private:\n        key_type key_{};\n        val_type val_{};\n    public:\n        top() = delete;\n        explicit top(K k, V v) : key_(k), val_(v) {}\n\n    private:    \n        // PROBLEM A: not found by \n        // friend wostream &amp; operator &lt;&lt; (wostream &amp; os, type top_) \n        friend wostream &amp; operator &lt;&lt; (wostream &amp; os, key_type key_arg_ ) {\n            return os &lt;&lt; L\"\\nK  : \" &lt;&lt; key_arg_.value_or(K{});\n        }\n\n        // PROBLEM B: not found by\n        // friend wostream &amp; operator &lt;&lt; (wostream &amp; os, type top_) \n        friend wostream &amp; operator &lt;&lt; ( wostream &amp; os, val_type val_arg_ ) {\n            return os &lt;&lt; L\"\\nV  : \" &lt;&lt; val_arg_.value_or(V{});\n        }\n\n        // found no problem\n        friend wostream &amp; operator &lt;&lt; (wostream &amp; os, type top_) \n        {\n            // ISSUE D: this is not looking for overloads in the immediate scope\n            // i.e. inside the template class\n            // this is first looking for operator declaration inside namespace dbj\n            return os &lt;&lt; L\"\\n\\nprinting dbj::top&lt;K,V&gt; : \" &lt;&lt; top_.key_ &lt;&lt; L\",\" &lt;&lt; top_.val_;\n        }\n\n    }; // top\n} // dbj ns\n\nusing top_type = dbj::top&lt;wstring, int&gt;;\n\nextern \"C\"  int test_operator_overloading_puzzle()\n{\n    top_type top_{ L\"the key\", 42 };\n    std::wcout &lt;&lt; top_ &lt;&lt; std::endl;\n    return 1;\n}\n</code></pre>\n\n<p>Also available here: <a href=\"https://wandbox.org/permlink/jMKpn6CKFL2cyceO\" rel=\"nofollow noreferrer\">https://wandbox.org/permlink/jMKpn6CKFL2cyceO</a></p>\n\n<p>Every compiler complains that within the streaming operator for <code>type top_</code>, no match is found for streaming <code>top_.key</code> (marked ISSUE D in the code above). Why can't lookup find the two streaming functions I declared directly above them?</p>\n"}, {"tags": ["c++", "type-conversion"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1544033420, "post_id": 53638268, "comment_id": 94136264, "body": "This is begging for troubles. Keep it simple."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1544033541, "post_id": 53638268, "comment_id": 94136313, "body": "<i>The logic of my current code:</i> -- You cannot take an existing object <code>foo</code>, and turn it into a different object <code>bar</code>.  A <code>foo</code> is a <code>foo</code>, a <code>bar</code> is a <code>bar</code>.  You need to take a step back and come up with a better design.  Maybe a single class with a member that determines what &quot;powers&quot; the class has.  Change the &quot;powers&quot; member, then you wwould make Clark Kent into Superman."}, {"owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "edited": false, "score": 0, "creation_date": 1544033732, "post_id": 53638268, "comment_id": 94136387, "body": "Do not touch this and do not call the destructor."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1544034076, "post_id": 53638268, "comment_id": 94136578, "body": "how many Supermans / ClarkKents do you have in the game? It really sounds as if you should rething your design, maybe Superman and ClarkKent are two instances of the same class? Maybe you dont want to create a new instance but they are actually the same (did you ever see Superman and ClarkKent in the same room? ;)"}, {"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 1, "creation_date": 1544034357, "post_id": 53638268, "comment_id": 94136717, "body": "Sounds more like you want to have an entity that has a role like Clark or Superman, and that you don\u2019t want to change the entity itself but just it\u2019s role/abilities."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1544034665, "post_id": 53638268, "comment_id": 94136864, "body": "This is absolutely an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">X Y Problem</a>.  You should talk about <i>what you&#39;re trying to do</i>, instead of <i>why your solution doesn&#39;t seem to be possible</i>."}], "answers": [{"comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1544033878, "post_id": 53638421, "comment_id": 94136462, "body": "But frankly, your classes are code smells. The last time I checked, there was only one Clark Kent and one Superman; not a bunch of them."}, {"owner": {"reputation": 159, "user_id": 8331708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bed9bf3fdf643e45f9a7f924bed7d1d?s=128&d=identicon&r=PG&f=1", "display_name": "Gasper J.", "link": "https://stackoverflow.com/users/8331708/gasper-j"}, "edited": false, "score": 0, "creation_date": 1544034728, "post_id": 53638421, "comment_id": 94136896, "body": "thank you guys. I guess I really need to redesign my code. A simple bool variable seems to be a much better option in this case."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 159, "user_id": 8331708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bed9bf3fdf643e45f9a7f924bed7d1d?s=128&d=identicon&r=PG&f=1", "display_name": "Gasper J.", "link": "https://stackoverflow.com/users/8331708/gasper-j"}, "edited": false, "score": 0, "creation_date": 1544034909, "post_id": 53638421, "comment_id": 94136974, "body": "@GasperJ. Yeah. You can&#39;t change something&#39;s type, and you certainly can&#39;t do it via assignment :)"}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": 0, "last_activity_date": 1544033810, "creation_date": 1544033810, "answer_id": 53638421, "question_id": 53638268, "link": "https://stackoverflow.com/questions/53638268/convert-data-type-a-of-class-object-c/53638421#53638421", "title": "Convert data type a of class object (C++)", "body": "<p>Keep it simple and don't play tricks you don't understand with your objects.</p>\n\n<pre><code>Superman ClartkKent::turnInto() {\n    return {getName(), getMaxHP(), getDamage()};\n}\n</code></pre>\n\n<p>At the callee:</p>\n\n<pre><code>ClartkKent some_guy{...};\nauto some_other_guy = some_guy.tunInto();\n</code></pre>\n\n<p>Or if you need something fancy:</p>\n\n<pre><code>using NotBatman = std::variant&lt;ClartkKent, Superman&gt;;\nNotBatman some_guy = ClartkKent{...};\nusing std::swap;\nswap(some_guy, some_guy.tunInto());\n</code></pre>\n\n<p>IDK</p>\n"}], "owner": {"reputation": 159, "user_id": 8331708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bed9bf3fdf643e45f9a7f924bed7d1d?s=128&d=identicon&r=PG&f=1", "display_name": "Gasper J.", "link": "https://stackoverflow.com/users/8331708/gasper-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1544033861, "creation_date": 1544033208, "last_edit_date": 1544033861, "question_id": 53638268, "link": "https://stackoverflow.com/questions/53638268/convert-data-type-a-of-class-object-c", "title": "Convert data type a of class object (C++)", "body": "<p>I am writing a game in which one Object has an ability to turn into an object of another class (e.g. Clark Kent -> Superman). I would like to know what is the most efficient way to implement this.</p>\n\n<p>The logic of my current code:\nI have created a <code>turnInto()</code> function inside the ClarkKent class. The <code>turnInto</code> function calls the constructor of Superman class, passing all needed infos to it. The next step is to assign the address of Superman object to the current ClarkKent object.</p>\n\n<pre><code>void ClarkKent::turnInto() {\n    Superman sMan(getName(), getMaxHP(), getDamage());\n    &amp;(*this) = &amp;w; // &lt;- error here\n    this-&gt;ClarkKent::~ClarkKent();\n}\n</code></pre>\n\n<p>As you might have guessed, the compiler gives an error that the expression is not assignable. Not sure how to find a correct solution to this.</p>\n"}, {"tags": ["c++", "c++11", "lambda"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1544033240, "post_id": 53638253, "comment_id": 94136178, "body": "<code>F&amp;</code> is a non-<code>const</code> lvalue reference, it cannot bind to your temporary lambda. Use <code>F const &amp;</code> or <code>F&amp;&amp;</code>."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1544033330, "post_id": 53638253, "comment_id": 94136218, "body": "dup: <a href=\"https://stackoverflow.com/q/1565600/5470596\">stackoverflow.com/q/1565600/5470596</a> ?"}], "answers": [{"tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": true, "score": 1, "last_activity_date": 1544033280, "creation_date": 1544033280, "answer_id": 53638283, "question_id": 53638253, "link": "https://stackoverflow.com/questions/53638253/c-lambda-as-templated-parameter-of-a-function-not-working/53638283#53638283", "title": "C++ lambda as templated parameter of a function not working", "body": "<p><code>maybe</code> takes an lvalue reference:</p>\n\n<pre><code>maybe(R&amp; result, F&amp; lambda)\n</code></pre>\n\n<p>C++ forbids a non-const lvalue reference to be bound to a temporary. Add a const.</p>\n\n<pre><code>maybe(R&amp; result, F const&amp; lambda)\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 1467519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7068ed507bade2f13bb473957394275?s=128&d=identicon&r=PG&f=1", "display_name": "knelson", "link": "https://stackoverflow.com/users/1467519/knelson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 53638283, "answer_count": 1, "score": -1, "last_activity_date": 1544033280, "creation_date": 1544033149, "question_id": 53638253, "link": "https://stackoverflow.com/questions/53638253/c-lambda-as-templated-parameter-of-a-function-not-working", "title": "C++ lambda as templated parameter of a function not working", "body": "<p>I'm trying to pass a lambda into a parameter in the maybe() function, which is working strangely.  Code is below:</p>\n\n<pre><code>template&lt;typename R, typename F&gt;\nvoid maybe(R&amp; result, F&amp; lambda) {\n    if (0 == result) {  \n        result = lambda();\n    }\n}\n\nauto l = [&amp;]() {\n    return adi_uart_Open(deviceNum, ADI_UART_DIR_BIDIRECTION, &amp;memory, ADI_UART_BIDIR_DMA_MEMORY_SIZE, &amp;handle);\n};\n</code></pre>\n\n<p>If I call </p>\n\n<pre><code>maybe(result, l);\n</code></pre>\n\n<p>then everything works just fine.  However, if I put the lamba into the function directly, like:</p>\n\n<pre><code>maybe(result, [&amp;](){return adi_uart_Open(deviceNum, ADI_UART_DIR_BIDIRECTION, &amp;memory, ADI_UART_BIDIR_DMA_MEMORY_SIZE, &amp;handle);});\n</code></pre>\n\n<p>then I get the following error:</p>\n\n<blockquote>\n  <p>error: no instance of function template \"maybe\" matches the argument list</p>\n</blockquote>\n\n<p>I'd use std::function instead of templates, but it's not available on the embedded device i'm working on.</p>\n"}, {"tags": ["python", "c++", "docker", "websocket"], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 9020213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e768a5756ac7af79e46af5ac658a1e?s=128&d=identicon&r=PG&f=1", "display_name": "lars250698", "link": "https://stackoverflow.com/users/9020213/lars250698"}, "is_accepted": false, "score": 0, "last_activity_date": 1544054173, "creation_date": 1544054173, "answer_id": 53642607, "question_id": 53638163, "link": "https://stackoverflow.com/questions/53638163/python-websockets-malformed-http-message-when-trying-to-connect-to-server-in/53642607#53642607", "title": "Python websockets: &quot;Malformed HTTP message&quot; when trying to connect to server in Docker container", "body": "<p>The issue was that I was running an older version of boost in my Docker container as on my local machine. I solved the issue by installing the boost headers from source.</p>\n"}], "owner": {"reputation": 23, "user_id": 9020213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e768a5756ac7af79e46af5ac658a1e?s=128&d=identicon&r=PG&f=1", "display_name": "lars250698", "link": "https://stackoverflow.com/users/9020213/lars250698"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 803, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544054173, "creation_date": 1544032790, "last_edit_date": 1544049430, "question_id": 53638163, "link": "https://stackoverflow.com/questions/53638163/python-websockets-malformed-http-message-when-trying-to-connect-to-server-in", "title": "Python websockets: &quot;Malformed HTTP message&quot; when trying to connect to server in Docker container", "body": "<p>I'm currently writing a server application which communicates to clients using websockets. I want to deploy the server in a Docker container. To test the connection, I wrote a client in Python. When running the server without Docker on my local system, the client can connect, send and receive messages without a problem. As soon as I run the server in a Docker container though, the client fails to connect with the following error message:</p>\n\n<pre><code>Traceback (most recent call last):   File \"./client-ws.py\", line 40, in &lt;module&gt;\n    asyncio.get_event_loop().run_until_complete(loop(msg, sockaddr))   File \"/usr/lib/python3.7/asyncio/base_events.py\", line 573, in run_until_complete\n    return future.result()   File \"./client-ws.py\", line 11, in loop\n    async with websockets.connect(sockaddr) as sock:   File \"/usr/lib/python3.7/site-packages/websockets/py35/client.py\", line 2, in __aenter__\n    return await self   File \"/usr/lib/python3.7/site-packages/websockets/py35/client.py\", line 20, in __await_impl__\n    extra_headers=protocol.extra_headers,   File \"/usr/lib/python3.7/site-packages/websockets/client.py\", line 283, in handshake\n    status_code, response_headers = yield from self.read_http_response()   File \"/usr/lib/python3.7/site-packages/websockets/client.py\", line 92, in read_http_response\n    raise InvalidMessage(\"Malformed HTTP message\") from exc websockets.exceptions.InvalidMessage: Malformed HTTP message\n</code></pre>\n\n<p>Here's my client's code:</p>\n\n<pre><code>async def loop(msg, sockaddr):\n    async with websockets.connect(sockaddr) as sock:\n        while True:\n            print(\"Sending position {}\".format(i))\n            message = '{\\\"type\\\" : \\\"PositionUpdate\\\",\\\"position\\\": {\\\"latitude\\\": ' + msg[i][0] +',\\\"longitude\\\": ' + msg[i][1] + ',\\\"elevation\\\": ' + msg[i][2] + ',\\\"speed\\\": ' + msg[i][3] + '}}'\n            await sock.send(message)\n            print(await sock.recv())\n            i += 1\n            if i &gt;= len(msg):\n                i = 0\n            time.sleep(1)\n\n\nparser = argparse.ArgumentParser()\n\nparser.add_argument('--host', help='The host to which the socket should bind', required=True)\nparser.add_argument('--port', help='The port to which the socket should bind', required=True)\nparser.add_argument('--file', help='Path to the coordinate resource file. The file should have the following structure: latitude,longitude,elevation,speed;latitude,longitude,...', required=True)\nargs = parser.parse_args()\nfile = open(args.file, 'r')\nlocationsStr = file.read()\nlocations = locationsStr.split(';')\nmsg = []\nfor l in locations:\n    tmp = l.split(',')\n    msg.append(tmp)\nsockaddr = \"ws://\" + args.host + \":\" + args.port\n\ni = 0\n\nasyncio.get_event_loop().run_until_complete(loop(msg, sockaddr))\n</code></pre>\n\n<p>On my server, which is written in C++, I use the library websocketpp to open a websocket. I can't post all of the server's code, but here is how I open the websocket:</p>\n\n<pre><code>broadcastServer::broadcastServer(SpatMessageHandler spatHandler, MapMessageHandler mapHandler,\n                                 ClearSpatCache spatCclear, ClearMapCache mapCclear) {\n    this-&gt;spatHandler = spatHandler;\n    this-&gt;mapHandler = mapHandler;\n    this-&gt;spatCclear = spatCclear;\n    this-&gt;mapCclear = mapCclear;\n\n    m_server.init_asio();\n    m_server.clear_access_channels(websocketpp::log::alevel::all);\n    m_server.set_open_handler(bind(&amp;broadcastServer::onOpen, this, ::_1));\n    m_server.set_close_handler(bind(&amp;broadcastServer::onClose, this, ::_1));\n    m_server.set_message_handler(bind(&amp;broadcastServer::onMessage, this, ::_1, ::_2));\n}\n\n...\n\nvoid broadcastServer::run(uint16_t port) {\n    m_server.listen(port);\n    m_server.start_accept();\n    m_server.run();\n}\n</code></pre>\n\n<p>As far as I can judge, websocketpp binds to 0.0.0.0 by default. I run the docker container with the following command:</p>\n\n<p><code>sudo docker run -p 9001:9001 -it $dockerhash</code></p>\n\n<p><em>EDIT</em>: I've just looked if something's wrong with the websocket in the container. Executing <code>netstat -an</code> inside the container shows, that the websocket didn't even bind to a port.</p>\n"}, {"tags": ["c++", "c++17"], "answers": [{"comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 3, "creation_date": 1544033024, "post_id": 53638207, "comment_id": 94136082, "body": "And formally, template argument deduction is performed when the name of a class template is used as the type of an object being constructed."}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 5, "last_activity_date": 1544032965, "creation_date": 1544032965, "answer_id": 53638207, "question_id": 53638143, "link": "https://stackoverflow.com/questions/53638143/class-template-argument-deduction-of-member-variables/53638207#53638207", "title": "Class template argument deduction of member variables", "body": "<ol>\n<li>Nobody, IIRC, proposed it.</li>\n<li>Presumably for the same reason we don't deduce anything from default member initializers: they are not always used - a constructor can override them by explicitly specify a different initializer.</li>\n</ol>\n"}], "owner": {"reputation": 53, "user_id": 9927755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6659aba20ffc8c8b346c85fc5206c4ee?s=128&d=identicon&r=PG&f=1", "display_name": "Becon", "link": "https://stackoverflow.com/users/9927755/becon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 53638207, "answer_count": 1, "score": 5, "last_activity_date": 1544032965, "creation_date": 1544032710, "question_id": 53638143, "link": "https://stackoverflow.com/questions/53638143/class-template-argument-deduction-of-member-variables", "title": "Class template argument deduction of member variables", "body": "<p>In C++17 I am allowed to use <code>Foo</code> in the following example without empty template argument brackets thanks to class template argument deduction:</p>\n\n<pre><code>template&lt;typename T = int&gt;\nstruct Foo{};\n\nint main(){\n    Foo f;    // before C++17 you had to write \"Foo&lt;&gt; f;\"\n}\n</code></pre>\n\n<p>Why am I not allowed to use the same syntax for class members?</p>\n\n<pre><code>template&lt;typename T = int&gt;\nstruct Foo{};\n\nstruct Foo2{\n    Foo f{};  ///&lt; error: invalid use of template-name 'Foo' without an argument list\n};\n\nint main(){\n    Foo2 f2;\n}\n</code></pre>\n"}, {"tags": ["c++", "ide", "simd"], "comments": [{"owner": {"reputation": 2310, "user_id": 3656081, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/69071f1a4855e7a35b785ca46e150962?s=128&d=identicon&r=PG&f=1", "display_name": "tangy", "link": "https://stackoverflow.com/users/3656081/tangy"}, "edited": false, "score": 0, "creation_date": 1544032525, "post_id": 53637886, "comment_id": 94135844, "body": "one way could be to setup X2Go/NXClient or some other VNC server-client setup. Then you can get a GUI to your server and develop there directly?"}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 2, "creation_date": 1544033102, "post_id": 53637886, "comment_id": 94136117, "body": "I don&#39;t understand the question. Compilation is not the same thing as execution. The ide does not have to be on the same machine as the target compilation."}, {"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 0, "creation_date": 1544044851, "post_id": 53637886, "comment_id": 94141357, "body": "Can you tell you IDE that <code>__AVX512F__</code> is defined? Then it should be smart enough to parse the corresponding header -- if not try a different IDE."}], "answers": [{"tags": [], "owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 2, "last_activity_date": 1544067779, "creation_date": 1544067779, "answer_id": 53644322, "question_id": 53637886, "link": "https://stackoverflow.com/questions/53637886/coding-on-insufficient-hardware/53644322#53644322", "title": "Coding on insufficient hardware", "body": "<p>First of all, you don't need your desktop to support AVX512 to edit source and <em>compile</em> an executable that requires AVX512.  If you can edit / compile locally, and run/debug on the server, you're fine.</p>\n\n<hr>\n\n<p>You can debug locally by configuring your IDE to run your program under an emulator that supports AVX512.  <a href=\"https://software.intel.com/en-us/articles/intel-software-development-emulator\" rel=\"nofollow noreferrer\">Intel's Software Development Emulator (SDE)</a> would be a good choice.  It can act as a GDB-remote so you should be able to debug a program running inside it.</p>\n\n<p>Or another option is to use a compat intrinsics header file that defines the AVX512 intrinsics, and <code>__m512i</code>, in terms of AVX2 types and intrinsics.  So your source code can be compiled for real AVX512, or it can be compiled for AVX2 (slow but you can debug it.)</p>\n\n<p>Apparently Intel actually publishes a <code>avxintrin-emu.h</code> header for developing AVX code on a machine with only SSE4: <a href=\"https://stackoverflow.com/questions/2708501/intel-avx-intrinsics-any-compatibility-library-out\">Intel AVX intrinsics: any compatibility library out?</a> I think @Mysticial mentioned doing the same thing for AVX512, but I can't find any mention of that with google.</p>\n\n<p>Agner Fog's nice VCL wrapper library (GPL license) has this compat thing for 512 and 256-bit vectors, but only for VCL types, not for the underlying Intel intrinsics which I assume you want to use.  <a href=\"https://www.agner.org/optimize/#vectorclass\" rel=\"nofollow noreferrer\">https://www.agner.org/optimize/#vectorclass</a></p>\n\n<hr>\n\n<p>Near duplicates - </p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/458869/developing-for-new-instruction-sets\">developing for new instruction sets</a></li>\n</ul>\n"}], "owner": {"reputation": 361, "user_id": 10750848, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OjwC2GFnC84/AAAAAAAAAAI/AAAAAAAAACs/uuek3B_ubhA/photo.jpg?sz=128", "display_name": "Clebo Sevic", "link": "https://stackoverflow.com/users/10750848/clebo-sevic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 2, "accepted_answer_id": 53644322, "answer_count": 1, "score": -2, "last_activity_date": 1544067779, "creation_date": 1544031604, "question_id": 53637886, "link": "https://stackoverflow.com/questions/53637886/coding-on-insufficient-hardware", "title": "Coding on insufficient hardware", "body": "<p>I am currently coding with SIMD instructions in C++ and trying to use an IDE which shows errors, spelling mistakes, etc whilst coding in real-time. The Problem is, that i am using AVX512 Instructions, which are not supported by my hardware, only the server i use for compiling. Is there a way to code in an IDE with errorchecking, etc without the interference of the AVX512-functions hindering the compiler?</p>\n"}, {"tags": ["c++", "string", "raspberry-pi3", "uint8t"], "comments": [{"owner": {"reputation": 5397, "user_id": 2193020, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/aa10d01a3d48851073bd61877a56b5a7?s=128&d=identicon&r=PG", "display_name": "hnefatl", "link": "https://stackoverflow.com/users/2193020/hnefatl"}, "edited": false, "score": 0, "creation_date": 1544031484, "post_id": 53637769, "comment_id": 94135340, "body": "Usually it&#39;s a good idea to print a newline (<code>std::cout &lt;&lt; s &lt;&lt; std::endl</code>) after each line of output to ensure it&#39;s <a href=\"https://www.gnu.org/software/libc/manual/html_node/Flushing-Buffers.html\" rel=\"nofollow noreferrer\">flushed</a> (forced to be output). This shouldn&#39;t be an issue as unflushed streams <a href=\"https://stackoverflow.com/questions/15911517/is-there-a-guarantee-of-stdout-auto-flush-before-exit-how-does-it-work\">should be flushed on exit automatically</a>, but it&#39;s worth trying."}, {"owner": {"reputation": 1999, "user_id": 4694757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UOLpM.png?s=128&g=1", "display_name": "i_thamary", "link": "https://stackoverflow.com/users/4694757/i-thamary"}, "edited": false, "score": 0, "creation_date": 1544032142, "post_id": 53637769, "comment_id": 94135651, "body": "This may it be helpful how to convert from byte to string:  <a href=\"https://stackoverflow.com/questions/1673445/how-to-convert-unsigned-char-to-stdstring-in-c\" title=\"how to convert unsigned char to stdstring in c\">stackoverflow.com/questions/1673445/&hellip;</a> <a href=\"https://github.com/miguelbalboa/rfid/issues/63\" rel=\"nofollow noreferrer\">github.com/miguelbalboa/rfid/issues/63</a>"}, {"owner": {"reputation": 1999, "user_id": 4694757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UOLpM.png?s=128&g=1", "display_name": "i_thamary", "link": "https://stackoverflow.com/users/4694757/i-thamary"}, "edited": false, "score": 0, "creation_date": 1544033098, "post_id": 53637769, "comment_id": 94136111, "body": "what about changing the  converting to be  <code>String s= String((char*)mfrc.uid.uidByte);</code> or try to change <code>int</code> to be <code>char </code>"}, {"owner": {"reputation": 5397, "user_id": 2193020, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/aa10d01a3d48851073bd61877a56b5a7?s=128&d=identicon&r=PG", "display_name": "hnefatl", "link": "https://stackoverflow.com/users/2193020/hnefatl"}, "reply_to_user": {"reputation": 1999, "user_id": 4694757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UOLpM.png?s=128&g=1", "display_name": "i_thamary", "link": "https://stackoverflow.com/users/4694757/i-thamary"}, "edited": false, "score": 1, "creation_date": 1544035424, "post_id": 53637769, "comment_id": 94137199, "body": "@i_th Casting an integer value to a <code>char *</code> is an almost surefire way to get undefined behaviour. Casting eg. integer 10 to a pointer will give you a pointer to memory address 10: creating a string from this will most likely result in a segfault."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1544048715, "post_id": 53637769, "comment_id": 94142804, "body": "Note the <code>printf()</code> code is outputting each byte in hex format, but the <code>stringstream</code> code is outputting each byte in decimal format instead. If you want hex, use the <code>std::hex</code> stream manipulator. Also look at <code>std::setfill()</code> and <code>std::setw()</code>, too."}], "answers": [{"comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1544031740, "post_id": 53637901, "comment_id": 94135452, "body": "It might not answer the question. If it doesn&#39;t, I&#39;ll remove it and comment instead. In fact, I&#39;m confident hnefatl&#39;s comment should be an answer :D"}, {"owner": {"reputation": 5397, "user_id": 2193020, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/aa10d01a3d48851073bd61877a56b5a7?s=128&d=identicon&r=PG", "display_name": "hnefatl", "link": "https://stackoverflow.com/users/2193020/hnefatl"}, "edited": false, "score": 0, "creation_date": 1544031946, "post_id": 53637901, "comment_id": 94135556, "body": "Not sure if this is the root cause (<a href=\"https://repl.it/@hnefatl/SunnySatisfiedHashmaps\" rel=\"nofollow noreferrer\">tweaked example seems to work fine</a>), but definitely good advice nonetheless. I left my comment as a comment because I&#39;d be really surprised if it fixed things: one of the links implies that&#39;d mean the compiler OP&#39;s using is non-standards-compliant, which would be fishy :)"}, {"owner": {"reputation": 23, "user_id": 10381907, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156693027834889/picture?type=large", "display_name": "Tommy Normandin Racine", "link": "https://stackoverflow.com/users/10381907/tommy-normandin-racine"}, "edited": false, "score": 0, "creation_date": 1544032169, "post_id": 53637901, "comment_id": 94135661, "body": "Interesting, we are taught to always use namespace std at university, I shall remember that, Thank you alot for that info. The program works now(without freezing) and it actually output something just not sure what it is, It should output 35 9F 54 2B however it output 531598443.. I am fairly confident that the problem lies that the output is in HEX and it&#39;s trying to give me integer of what ASCII wise would be 5T+?"}, {"owner": {"reputation": 7363, "user_id": 1678770, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9afe9e6d4e0264da3d228c79162377f8?s=128&d=identicon&r=PG", "display_name": "Human-Compiler", "link": "https://stackoverflow.com/users/1678770/human-compiler"}, "reply_to_user": {"reputation": 23, "user_id": 10381907, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156693027834889/picture?type=large", "display_name": "Tommy Normandin Racine", "link": "https://stackoverflow.com/users/10381907/tommy-normandin-racine"}, "edited": false, "score": 1, "creation_date": 1544032733, "post_id": 53637901, "comment_id": 94135950, "body": "@TommyNormandinRacine By default, integers are converted to their decimal representation for streams. To convert to hex, you will want to use the stream manipulator <a href=\"https://en.cppreference.com/w/cpp/io/manip/hex\" rel=\"nofollow noreferrer\"><code>std::hex</code></a>"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 23, "user_id": 10381907, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156693027834889/picture?type=large", "display_name": "Tommy Normandin Racine", "link": "https://stackoverflow.com/users/10381907/tommy-normandin-racine"}, "edited": false, "score": 3, "creation_date": 1544032766, "post_id": 53637901, "comment_id": 94135963, "body": "@TommyNormandinRacine There are lot and lot of things you&#39;ll learn at university that you should be doubful about. Don&#39;t forget C++ is <i>hard</i> and requires <i>years of practice</i> to masterise. It is the perfect tool to shoot yourself in the foot. Your teachers lack that practice, which is fine: they&#39;re not programmers, they&#39;re <i>teachers</i>. Learn as much as you can with them, and learn from <a href=\"https://stackoverflow.com/a/388282/5470596\">good books</a> and good talks (search for the cppcon channel on youtube) and good questions on SO (just lurk) ;)"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1544033507, "post_id": 53637901, "comment_id": 94136297, "body": "Yeah, typing a korrecte english sentence is also hard apparently :S"}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": true, "score": 1, "last_activity_date": 1544031645, "creation_date": 1544031645, "answer_id": 53637901, "question_id": 53637769, "link": "https://stackoverflow.com/questions/53637769/uint8-t-to-string-leads-to-no-output-c-beginner-programer/53637901#53637901", "title": "uint8_t to String, leads to no output C++ (Beginner programer)", "body": "<p>You wrote:</p>\n\n<pre><code>stringstream list;\n</code></pre>\n\n<p>So I suspect you have an <code>using namespace std;</code> somewhere above. The thing is, <code>std::list</code> exists and is a type. In the remaining part of your program, when you write <code>list</code>, it might be <code>std::list</code> which is found instead. I don't know how it plays out, but I'm confident this is not what you think.</p>\n\n<p>This is why <a href=\"https://stackoverflow.com/q/1452721/5470596\"><code>using namespace std</code> is considered bad practice</a>. Dont.</p>\n"}], "owner": {"reputation": 23, "user_id": 10381907, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156693027834889/picture?type=large", "display_name": "Tommy Normandin Racine", "link": "https://stackoverflow.com/users/10381907/tommy-normandin-racine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 53637901, "answer_count": 1, "score": 2, "last_activity_date": 1544059059, "creation_date": 1544031138, "last_edit_date": 1544059059, "question_id": 53637769, "link": "https://stackoverflow.com/questions/53637769/uint8-t-to-string-leads-to-no-output-c-beginner-programer", "title": "uint8_t to String, leads to no output C++ (Beginner programer)", "body": "<p>I'm a beginner at programming and I'm trying to build a program for raspberry pi in C++, I started with a program that ouput the UID on the console which was this</p>\n\n<pre><code>for(byte i = 0; i &lt; mfrc.uid.size; ++i)\n{\n    if(mfrc.uid.uidByte[i] &lt; 0x10)\n    {\n        printf(\" 0\");\n        printf(\"%X\",mfrc.uid.uidByte[i]);\n    }\n    else\n    {\n        printf(\" \");\n        printf(\"%X\", mfrc.uid.uidByte[i]);\n    }\n}\n</code></pre>\n\n<p>now I wanted to change that to output a string which can be called by another program instead. So I changed the code to </p>\n\n<pre><code>stringstream list;\nfor(byte i = 0; i\u00a0&lt; mfrc.uid.size;++i)\n{\n    list &lt;&lt; (int)mfrc.uid.uidByte[i];\n}\nstring s = list.str();\ncout &lt;&lt; s;\n</code></pre>\n\n<p>it compiles fine however the program does not cout anything, perhaps I am taking a wrong approach, I've looked around stackoverflow for previously asked question but I can't seem to find something that I comprehend! haha, thanks for the help</p>\n"}, {"tags": ["c++", "function", "recursion", "iteration"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1544030850, "post_id": 53637670, "comment_id": 94135059, "body": "This <code>H(n)</code> is not how you call a function that takes two parameters and this <code>H1[n]</code> is also not how you call a function. Start by giving distinct names to variables and functions, your code is highly confusing"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1544030866, "post_id": 53637670, "comment_id": 94135065, "body": "<code>int *H1 = new int[n + 1];</code> -- 1) Memory leak.  2) Confusing naming variables the same as function names."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1544030911, "post_id": 53637670, "comment_id": 94135087, "body": "<a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\" title=\"the definitive c book guide and list\">stackoverflow.com/questions/388242/&hellip;</a>"}, {"owner": {"reputation": 13, "user_id": 10486445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aef53d4bbddccd6c666d2bf675f7ffd6?s=128&d=identicon&r=PG&f=1", "display_name": "Techtirium", "link": "https://stackoverflow.com/users/10486445/techtirium"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1544030961, "post_id": 53637670, "comment_id": 94135107, "body": "@user463035818, Yes it is confusing, I apologize for that as I am completely new to functions."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1544031018, "post_id": 53637670, "comment_id": 94135132, "body": "rome wasnt build in one day. Start with a function that prints its parameter on the screen or something as simple as that"}, {"owner": {"reputation": 13, "user_id": 10486445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aef53d4bbddccd6c666d2bf675f7ffd6?s=128&d=identicon&r=PG&f=1", "display_name": "Techtirium", "link": "https://stackoverflow.com/users/10486445/techtirium"}, "edited": false, "score": 0, "creation_date": 1544031215, "post_id": 53637670, "comment_id": 94135205, "body": "I already did that with fibonacci sequence , And there I used one parameter for <code>function f(x)</code> that is <code>f(int n){ }</code>, but here I am a bit confused with two parameters in function <code>H(int n, int x)</code> , where <code>n</code> is the <code>index</code> of <code>H</code> while <code>x</code> is an <code>integer</code>.@ user463035818"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1544031480, "post_id": 53637670, "comment_id": 94135339, "body": "then you should already know that <code>H[x]</code> is not calling a function called <code>H</code>. There are just too many syntax errors in your code and its not clear what the question is (&quot;please fix my code&quot; isnt really one)"}, {"owner": {"reputation": 13, "user_id": 10486445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aef53d4bbddccd6c666d2bf675f7ffd6?s=128&d=identicon&r=PG&f=1", "display_name": "Techtirium", "link": "https://stackoverflow.com/users/10486445/techtirium"}, "edited": false, "score": 0, "creation_date": 1544031749, "post_id": 53637670, "comment_id": 94135456, "body": "user463035818.click on the image , to see the conditions"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1544032076, "post_id": 53637670, "comment_id": 94135617, "body": "yes your are getting the concept wrong. If you have (maths notation) <code>f(n,x)</code> then this is not the same as <code>f(n) * x</code>"}, {"owner": {"reputation": 7130, "user_id": 10239789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YeHJm.png?s=128&g=1", "display_name": "TrebledJ", "link": "https://stackoverflow.com/users/10239789/trebledj"}, "edited": false, "score": 0, "creation_date": 1544032406, "post_id": 53637670, "comment_id": 94135798, "body": "Note that your conditions aren&#39;t consistent with the Tex in the image posted. Your conditions begin at <code>n = 1</code> while the Tex begins with <code>n = 0</code>. Please be accurate here."}, {"owner": {"reputation": 13, "user_id": 10486445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aef53d4bbddccd6c666d2bf675f7ffd6?s=128&d=identicon&r=PG&f=1", "display_name": "Techtirium", "link": "https://stackoverflow.com/users/10486445/techtirium"}, "edited": false, "score": 0, "creation_date": 1544032712, "post_id": 53637670, "comment_id": 94135933, "body": "In the picture conditions start with <code>n = 0</code>"}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1544034246, "post_id": 53637670, "comment_id": 94136650, "body": "@Techtirium I removed your transcription of the formula, since it was more confusing than anything else.  WIth the picture in the text, it is much more clearer.  I also took over some information of your comments to clarify the question.  I hope it&#39;s ok like that."}], "answers": [{"tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 1, "last_activity_date": 1544033070, "last_edit_date": 1544033070, "creation_date": 1544032102, "answer_id": 53638013, "question_id": 53637670, "link": "https://stackoverflow.com/questions/53637670/how-to-write-a-function-for-hermite-polynomials/53638013#53638013", "title": "How to write a function for Hermite polynomials?", "body": "<p>Yes, you need to translate your matematically indexed function into a function with 2 parameters.  </p>\n\n<p>The recursive version is almost ok, except for some shifts in the indexes: </p>\n\n<pre><code>int H(int n, int x)   // recursive version\n{\n    if (n &lt;= 0)      \n        return -1;\n    else if (n == 1) \n        return 1;\n    else if (n == 2) \n        return 2 * x;\n    else \n        return 2 * x * H(n-1, x) - 2 * n * H(n - 2, x); // shift n+1, n n-1 to n, n-1 n-2 \n}\n</code></pre>\n\n<p>Your iterative version needs rework, since you should write it as a loop,  if possible without cashing the values that you no longer need.  For example:  </p>\n\n<pre><code>int Hi(int n, int x) //iterative version\n{\n    if (n &lt;= 0)      \n        return -1;\n    else if (n == 1) \n        return 1;\n\n    int am2 = 1;      // start for for n-2\n    int am1 = 2*x;    // start for n-1\n    if (n == 2) \n        return am1;\n\n    int am; \n    for (int i=3; i&lt;=n; i++) {\n        am = 2*x*am1 -  2*i*am2;   // calculate Hn from Hn-1 and Hn-2\n        //prepare next interation\n        am2=am1; \n        am1=am;\n    }\n    return am; \n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/HKLy78\" rel=\"nofollow noreferrer\">Online demo</a> </p>\n"}, {"comments": [{"owner": {"reputation": 7130, "user_id": 10239789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YeHJm.png?s=128&g=1", "display_name": "TrebledJ", "link": "https://stackoverflow.com/users/10239789/trebledj"}, "edited": false, "score": 0, "creation_date": 1544032530, "post_id": 53638049, "comment_id": 94135847, "body": "<code>2*(n-1)*H(n-2, x)</code> :-)"}, {"owner": {"reputation": 7130, "user_id": 10239789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YeHJm.png?s=128&g=1", "display_name": "TrebledJ", "link": "https://stackoverflow.com/users/10239789/trebledj"}, "edited": false, "score": 0, "creation_date": 1544033013, "post_id": 53638049, "comment_id": 94136077, "body": "Originally, it&#39;s <code>H_{n+1}(x) = 2x H_n(x) - 2n H_{n - 1}(x)</code>. But we&#39;re shifting <code>n</code> down by 1... so that leads to <code>H_{n}(x) = 2x H_(n - 1)(x) - 2(n - 1) H_(n - 2)(x)</code>."}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": 0, "last_activity_date": 1544033056, "last_edit_date": 1544033056, "creation_date": 1544032300, "answer_id": 53638049, "question_id": 53637670, "link": "https://stackoverflow.com/questions/53637670/how-to-write-a-function-for-hermite-polynomials/53638049#53638049", "title": "How to write a function for Hermite polynomials?", "body": "<p>You wrote:</p>\n\n<pre><code>int H(int n, int x)   //function for recursion\n{\n    if (n &lt; 0) return -1;\n    else if (n == 0) return 1;\n    else if (n == 1) return 2 * x;\n    return 2 * x * H(n) * x - 2 * n * H(n - 1) * x;\n}\n</code></pre>\n\n<p>You're not far from a working program. Drop that <code>H1</code> function. Let's see:</p>\n\n<pre><code>int H(int n, int x)\n{\n    switch(n)\n    {\n    // H_0(x) = 1 \n    case 0: return 1;\n    // H_1(x) = 2x\n    case 1: return 2 * x;\n    // H_{n+1}(x) = 2x H_n(x) - 2n H_{n - 1}(x)\n    default:\n        return 2*x*H(n-1, x) - 2*(n-1)*H(n-2, x);\n    }\n}\n</code></pre>\n\n<p>The trick part is realizing than the <code>n</code> in <code>H_{n+1}(x) = 2x H_n(x) - 2n H_{n - 1}(x)</code> and in <code>return 2*x*H(n-1, x) - 2*(n-1)*H(n-2, x);</code>are not the same, they differ by one.</p>\n\n<p>Now, you only need to handle user I/O and calling your <code>H</code> function with user input.</p>\n"}], "owner": {"reputation": 13, "user_id": 10486445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aef53d4bbddccd6c666d2bf675f7ffd6?s=128&d=identicon&r=PG&f=1", "display_name": "Techtirium", "link": "https://stackoverflow.com/users/10486445/techtirium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 654, "favorite_count": 1, "accepted_answer_id": 53638013, "answer_count": 2, "score": 0, "last_activity_date": 1548318520, "creation_date": 1544030722, "last_edit_date": 1548318520, "question_id": 53637670, "link": "https://stackoverflow.com/questions/53637670/how-to-write-a-function-for-hermite-polynomials", "title": "How to write a function for Hermite polynomials?", "body": "<p>For 2 numbers <code>x</code> and <code>n</code> entered by the user, my code needs to find Hn(x) defined recursively by the following formulas:  </p>\n\n<p><a href=\"https://i.stack.imgur.com/CQVB6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CQVB6.png\" alt=\"Or click here\"></a></p>\n\n<p>I am trying to implement a recursive version and and iterative version of that function. But I think I am getting the wrong concept of it, since my code doesn't compile due to errors on H(n) and H[n]:</p>\n\n<pre><code>#include \"pch.h\"\n#include &lt;iostream&gt;\n\nint H(int n, int x)   //function for recursion\n{\nif (n &lt; 0) return -1;\nelse if (n == 0) return 1;\nelse if (n == 1) return 2 * x;\nreturn 2 * x * H(n) * x - 2 * n * H(n - 1) * x;\n}\n\nint H1(int n, int x) //function for Iterator\n{\nint *H1 = new int[n + 1];\n\nH[0] * x = 1;\nH[1] * x = 2 * x;\n\nfor (int i = 0; i &lt;= n; i++)\n{\n    H[i] * x = 2 * x * H[n] * x - 2 * n * H[n - 1] * x;\n\n}\nreturn H1(n) * x;\n}\n\nint main()\n{\nint n, x;\nstd::cout &lt;&lt; \"Enter the number n: \";\nstd::cin &gt;&gt; n;\nstd::cout &lt;&lt; \"Enter the number x: \";\nstd::cin &gt;&gt; x;\n\nstd::cout &lt;&lt; \"Rec = \" &lt;&lt; H[n] * x std::endl;\nstd::cout &lt;&lt; \"Iter = \" &lt;&lt; H1[n] * x std::endl;\n}\n</code></pre>\n\n<p>It is confusing, I apologize for that as I am completely new to functions. </p>\n\n<p>I already managed to do this with fibonacci sequence.  And there I used only one parameter for function <code>f(x)</code> that is <code>f(int n){... }</code>, but here I am a bit confused with two parameters in function <code>H(int n, int x)</code> , where <code>n</code> is the index of <code>H</code> while <code>x</code> is an integer.</p>\n"}, {"tags": ["c++", "dictionary", "comparison-operators"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 8, "creation_date": 1544030642, "post_id": 53637613, "comment_id": 94134955, "body": "Any reason you are not using <a href=\"https://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\"><code>std::array</code></a>?  It has all of the relational operators defined for you."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1544031091, "post_id": 53637613, "comment_id": 94135151, "body": "<code>n-value key map with double types</code> -- Using <code>doubles</code> in any way as key values is dodgy.  Doubles are not exact, and neither will be your keys.  Your program may run differently using the exact same data if the code is built using different options, or run on a different version of the compiler, etc."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1544031294, "post_id": 53637613, "comment_id": 94135242, "body": "@PaulMcKenzie double <i>are</i> exact for those who understand them."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1544031366, "post_id": 53637613, "comment_id": 94135275, "body": "@YSC Yes, but just to let the OP know some of the consequences of using <code>double</code> as a key."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1544031386, "post_id": 53637613, "comment_id": 94135288, "body": "@PaulMcKenzie this looks like memoising calls to a <code>double function(double, double)</code>, in which case exact matches are much more plausible"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1544031487, "post_id": 53637613, "comment_id": 94135342, "body": "Yes, but again, if the OP sees that a certain calculation is not being cached, it could be the <code>double</code> that is produced as the key isn&#39;t matching exactly with what is currently in the map."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1544031814, "post_id": 53637613, "comment_id": 94135487, "body": "@OP <i>where the parameters are exactly the same</i> -- Floating point will surprise you.  Values that seem to be the same sometimes are internally different.  Basically look out for that odd value that never seems to be cached."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1544031952, "post_id": 53637613, "comment_id": 94135561, "body": "@PaulMcKenzie I am well aware of that. I should have picked <code>int</code> for my example."}], "answers": [{"comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1544031234, "post_id": 53637722, "comment_id": 94135214, "body": "I was here to urge OP to use <code>std::array</code>. +1"}], "tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": false, "score": 8, "last_activity_date": 1544030950, "creation_date": 1544030950, "answer_id": 53637722, "question_id": 53637613, "link": "https://stackoverflow.com/questions/53637613/how-to-define-a-comparison-operator-less-than-on-array-of-doubles/53637722#53637722", "title": "how to define a comparison operator (less than) on array of doubles?", "body": "<p>You are looking for <a href=\"https://en.cppreference.com/w/cpp/algorithm/lexicographical_compare\" rel=\"noreferrer\"><code>std::lexicographical_compare</code></a></p>\n\n<pre><code>bool operator&lt;(const DoubleArray &amp;other) const\n{      \n    return std::lexicographical_compare(array, array + n, other.array, other.array + n);\n}\n</code></pre>\n\n<p>Alternatively, you can just define an alias to <code>std::array</code>, which already has all the comparison operators defined</p>\n\n<pre><code>template&lt;int n&gt;\nusing DoubleArray = std::array&lt;double, n&gt;;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 4, "last_activity_date": 1544031284, "creation_date": 1544031284, "answer_id": 53637798, "question_id": 53637613, "link": "https://stackoverflow.com/questions/53637613/how-to-define-a-comparison-operator-less-than-on-array-of-doubles/53637798#53637798", "title": "how to define a comparison operator (less than) on array of doubles?", "body": "<p>You can sidestep the issue by using <a href=\"https://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\"><code>std::array</code></a>.  Using an <a href=\"https://en.cppreference.com/w/cpp/language/type_alias\" rel=\"nofollow noreferrer\">alias declaration</a> your code could be simplified to</p>\n\n<pre><code>template &lt;std::size_t N&gt;\nusing DoubleArray = std::array&lt;double, N&gt;;\n\nint main()\n{\n   std::map&lt;DoubleArray&lt;2&gt;,double&gt; my_cache;\n   my_cache[{12, 2}] = 23;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 2530357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vson0.jpg?s=128&g=1", "display_name": "K. Kiryu", "link": "https://stackoverflow.com/users/2530357/k-kiryu"}, "is_accepted": false, "score": 2, "last_activity_date": 1544089423, "last_edit_date": 1544089423, "creation_date": 1544031437, "answer_id": 53637842, "question_id": 53637613, "link": "https://stackoverflow.com/questions/53637613/how-to-define-a-comparison-operator-less-than-on-array-of-doubles/53637842#53637842", "title": "how to define a comparison operator (less than) on array of doubles?", "body": "<blockquote>\n  <p>How to create a generic comparison operator (maybe using template recursion) ?</p>\n</blockquote>\n\n<p>You can try this method:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;utility&gt;     // std::index_sequence\n#include &lt;tuple&gt;       // std::tie\n\ntemplate &lt;int N&gt;\nstruct DoubleArray\n{\nprivate:\n    template &lt;size_t ... Is&gt;\n    bool opHelper(const DoubleArray&amp; rhs, std::index_sequence&lt;Is...&gt;) const\n    {\n        return std::tie(arr[Is]...) &lt; std::tie(rhs.arr[Is]...);\n    }\n\npublic:\n    double arr[N];\n\n    bool operator&lt;(const DoubleArray&amp; rhs) const\n    {\n        return opHelper(rhs, std::make_index_sequence&lt;N&gt;{});\n    }\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 573, "user_id": 7636018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IQbgw.jpg?s=128&g=1", "display_name": "Julien Villemure-Fr&#233;chette", "link": "https://stackoverflow.com/users/7636018/julien-villemure-fr%c3%a9chette"}, "is_accepted": false, "score": 2, "last_activity_date": 1544031791, "creation_date": 1544031791, "answer_id": 53637946, "question_id": 53637613, "link": "https://stackoverflow.com/questions/53637613/how-to-define-a-comparison-operator-less-than-on-array-of-doubles/53637946#53637946", "title": "how to define a comparison operator (less than) on array of doubles?", "body": "<p>Don't reinvent the wheel, use std::array. It already has an overloaded operator&lt;. Always consider using and combining what the standard library and other well known libraries offers before writing your own custom solution: <a href=\"http://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#sl1--use-libraries-wherever-possible\" rel=\"nofollow noreferrer\">Use libraries whenever possible</a>.</p>\n\n<p>You may then declare your map like this:</p>\n\n<pre><code>std::map&lt;std::array&lt;double, 2&gt;, double&gt; my_cache;\n</code></pre>\n"}], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 1, "accepted_answer_id": 53637798, "answer_count": 4, "score": 3, "last_activity_date": 1544089423, "creation_date": 1544030514, "last_edit_date": 1544031724, "question_id": 53637613, "link": "https://stackoverflow.com/questions/53637613/how-to-define-a-comparison-operator-less-than-on-array-of-doubles", "title": "how to define a comparison operator (less than) on array of doubles?", "body": "<p>I'm implementing a cache to save function calls.</p>\n\n<p>Let's say I have 2 <code>double</code>parameters to my function call.</p>\n\n<p>Those must be the key of some LRU cache or - to make it simpler - a C++ <code>std::map</code>.</p>\n\n<p>So I created a template class with the array inside (variable number of values)</p>\n\n<pre><code>template &lt;int n&gt;\n  class DoubleArray\n  {\n    public:   \n    double array[n];\n   };\n</code></pre>\n\n<p>When trying to use that as a key of my <code>std::map</code>, the compiler complained because it needed a <code>operator&lt;</code> for those.</p>\n\n<pre><code>.....\\include\\c++\\7.3.1\\bits\\stl_function.h:386:20: note:\n'const DoubleArray&lt;2&gt;' is not derived from 'const std::map&lt;_Key, _Tp, _Compare,\n_Alloc&gt;'\n       { return __x &lt; __y; }\n                ~~~~^~~~~\n</code></pre>\n\n<p>So I implemented a comparison operator (well, I though that hashing could do the trick but it doesn't seem so...) and it compiled:</p>\n\n<pre><code>#include &lt;map&gt;\n\ntemplate &lt;int n&gt;\n  class DoubleArray\n  {\n    public:   \n    double array[n];\n    bool operator&lt;(const DoubleArray &amp;other) const\n    {      \n      return (array[0] &lt; other.array[0]) || (array[0] == other.array[0] &amp;&amp; array[1] &lt; other.array[1]);\n    }\n\n  };\n\nint main()\n{\n   std::map&lt;DoubleArray&lt;2&gt;,double&gt; my_cache;\n   DoubleArray&lt;2&gt; params;\n   // clumsy way to initialize the array...\n   params.array[0] = 12;\n   params.array[1] = 2;\n   // put a value in cache\n   my_cache[params] = 23;\n}\n</code></pre>\n\n<p>Note that the comparison operator is really clumsy. What if I have 6 parameters (which is my real case).</p>\n\n<p>How to create a generic comparison operator (maybe using template recursion) ?</p>\n\n<p>In case this is a XY problem, is there a simpler way to create a n-value key map with <code>double</code> types?</p>\n\n<p>(note that I'm fully aware that using <code>double</code> values as keys looks bad, but my goal is to cache values on function calls where the parameters are exactly the same, those are not intended to be stored or such)</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1544030167, "post_id": 53637492, "comment_id": 94134727, "body": "It is best to use the natural <code>int</code> size of the machine unless you have good reason not to. I would say using different integer types for different quantities will make the code less readable, not more. Uh: the question was since edited."}, {"owner": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "edited": false, "score": 1, "creation_date": 1544030214, "post_id": 53637492, "comment_id": 94134747, "body": "Your system may be very bad/slow at manipulating, say, 16 bit quantities."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1544030356, "post_id": 53637492, "comment_id": 94134819, "body": "you will need more casting when you always use the most narrow type for each variable"}, {"owner": {"reputation": 103, "user_id": 9470762, "user_type": "registered", "profile_image": "https://graph.facebook.com/575185296170576/picture?type=large", "display_name": "Galan Lucian", "link": "https://stackoverflow.com/users/9470762/galan-lucian"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1544030497, "post_id": 53637492, "comment_id": 94134888, "body": "@WeatherVane Sorry for that, I don&#39;t know how I messed up that part when I wrote that those types simplify and improve readability, I edited it! Thanks for noticing, my bad!"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1544030523, "post_id": 53637492, "comment_id": 94134905, "body": "My rule of thumb: Use fixed width types when your code depends on the size of the type.  After that use the type who&#39;s minimum mandated value is enough for you."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1544030524, "post_id": 53637492, "comment_id": 94134908, "body": "@WeatherVane: it was a long time ago when <code>int</code> meant word size of the CPU. Most (all?) 64-bit compilers use 32-bit <code>int</code>, for example."}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1544030928, "post_id": 53637492, "comment_id": 94135091, "body": "In case you need a counter where you don&#39;t care if it overflows as 32 or 64 bit you might be better off using just <code>int</code> or <code>long</code> for best performance instead of saying int32_t (unnecessarily restricting yourself on 64 bit platform) or int64_t (being slow on 32 bit platform)."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 1, "creation_date": 1544030939, "post_id": 53637492, "comment_id": 94135097, "body": "My rule of thumb: I use <code>size_t</code> for all container size/index related stuff. And I use fixed width types everywhere else (with sorter alias, like <code>s32</code>, etc.)."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 1, "creation_date": 1544031029, "post_id": 53637492, "comment_id": 94135136, "body": "Inside of a function it doesn&#39;t really matter. Compilers will likely promote it to the CPU&#39;s wordsize &amp; work with that regardless of what you use. Might as well accept that and use <code>int&#47;long</code> to make it less surprising there. In interfaces where you might wish to communicate what range of values you accept &amp; in structs you expect to have a lot of, I think the minimal-width typedefs are a great idea. The fixed-width typedefs are theoretically less portable because the standard doesn&#39;t guarantee their existence, &amp; I&#39;d avoid the fast typedefs because different libcs might define them differently."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1544034939, "post_id": 53637492, "comment_id": 94136984, "body": "Your code might not compile for a 36-bit mainframe?"}], "answers": [{"tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": false, "score": 4, "last_activity_date": 1544031538, "creation_date": 1544031538, "answer_id": 53637872, "question_id": 53637492, "link": "https://stackoverflow.com/questions/53637492/are-there-any-non-readability-related-reasons-to-not-specifically-use-fixed-widt/53637872#53637872", "title": "Are there any non-readability related reasons to NOT specifically use fixed width integers every single time?", "body": "<p>Compatibility with other code, and not imposing arbitrary restrictions.</p>\n\n<p>A large portion of the integer variables you use in a typical C program are array indices, object counts, etc. Such values are inherently <em>not representable</em> as fixed-width integer types whose width is known at the time of writing the program; the possible range varies by implementation. (This is related to the fact that a given C implementation is not Turing-equivalent; only an infinite family of implementations, via the <a href=\"https://en.wikipedia.org/wiki/Transdichotomous_model\" rel=\"nofollow noreferrer\">Transdichotomous model</a> is). Cetainly you could <em>decide</em> that you only want to support up to 2^32 (for example) of a given thing, and thereby get by with using a fixed-width type, but it's anti-idiomatic, and such code won't be compatible with typical (including std lib) interfaces that use <code>size_t</code> and might be passing or accepting larger objects.</p>\n"}, {"tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": true, "score": 8, "last_activity_date": 1544035818, "last_edit_date": 1544035818, "creation_date": 1544035448, "answer_id": 53638821, "question_id": 53637492, "link": "https://stackoverflow.com/questions/53637492/are-there-any-non-readability-related-reasons-to-not-specifically-use-fixed-widt/53638821#53638821", "title": "Are there any non-readability related reasons to NOT specifically use fixed width integers every single time?", "body": "<p>Performance is another reason.</p>\n\n<p>Narrow operands require additional narrowing/widening instructions. This can't always be optimized away without side effects. And sometimes the optimizer just isn't smart enough and plays it safe.</p>\n\n<p>Take the following contrived example.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;chrono&gt;\n\nusing namespace std;\nusing namespace std::chrono_literals;\n\nint main()\n{\n    auto tm1 = chrono::high_resolution_clock::now();\n    unsigned int n = 0;\n    unsigned int x = 0;  // though, uint8_t would have been enough!\n    for (unsigned int i = 0; i &lt; 1000000000; i++) {\n        n += (x * i);\n        x = (n + 1) &amp; 0x7F;\n    }\n    auto tm2 = chrono::high_resolution_clock::now();\n    cout &lt;&lt; n &lt;&lt; \", \" &lt;&lt; (tm2 - tm1) / 1.0s &lt;&lt; \" s\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>If we change the type of <code>x</code> from <code>unsigned int</code> to <code>uint8_t</code>, the application becomes 15% slower (2s instead of 1.7s run time on x86-64 when compiled with GCC 7.2 <code>-O3</code> full optimization on).</p>\n\n<p>Assembly with a <a href=\"https://gcc.godbolt.org/z/4es8pl\" rel=\"noreferrer\">32-bit</a> <code>x</code>:</p>\n\n<pre><code>.L2:\n  imul eax, edx\n  inc edx\n  add ebx, eax\n  lea eax, [rbx+1]\n  and eax, 127\n  cmp edx, 1000000000\n  jne .L2\n</code></pre>\n\n<p>Assembly with an <a href=\"https://gcc.godbolt.org/z/UwuqO8\" rel=\"noreferrer\">8-bit</a> <code>x</code>:</p>\n\n<pre><code>.L2:\n  movzx eax, al    ; owww!\n  imul eax, edx\n  inc edx\n  add ebp, eax\n  lea eax, [rbp+1]\n  and eax, 127\n  cmp edx, 1000000000\n  jne .L2\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 9470762, "user_type": "registered", "profile_image": "https://graph.facebook.com/575185296170576/picture?type=large", "display_name": "Galan Lucian", "link": "https://stackoverflow.com/users/9470762/galan-lucian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 1, "accepted_answer_id": 53638821, "answer_count": 2, "score": 7, "last_activity_date": 1544035818, "creation_date": 1544030036, "last_edit_date": 1544030277, "question_id": 53637492, "link": "https://stackoverflow.com/questions/53637492/are-there-any-non-readability-related-reasons-to-not-specifically-use-fixed-widt", "title": "Are there any non-readability related reasons to NOT specifically use fixed width integers every single time?", "body": "<p>Let's say that we have <code>uint_least8_t var</code>, where, hypothetically speaking, <code>var</code> won't possibly ever exceed the value 255.\nI know that's not how programming works and \"possibly\" and \"ever\" are a blasphemy, but, aside from complicating the code and making it less readable, what makes always using fixed width integers a bad idea?</p>\n"}, {"tags": ["c++", "sockets", "c++11", "zeromq"], "owner": {"reputation": 264, "user_id": 3629327, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/FAW2a.jpg?s=128&g=1", "display_name": "Wilmort", "link": "https://stackoverflow.com/users/3629327/wilmort"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1544712405, "creation_date": 1544029396, "question_id": 53637306, "link": "https://stackoverflow.com/questions/53637306/do-zmq-router-and-zmq-dealer-need-delimiter-empty-string", "title": "Do ZMQ_ROUTER and ZMQ_DEALER need delimiter empty string?", "body": "<p>I have question about ZeroMQ Dealer and Router sockets. I have an architecture like this below: </p>\n\n<p><a href=\"https://i.stack.imgur.com/damQ3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/damQ3.png\" alt=\"enter image description here\"></a></p>\n\n<p>Dealer1 and Dealer2 has ids and I set it with this:</p>\n\n<p><code>m_socket-&gt;setsockopt(ZMQ_IDENTITY, socketId.data(), socketId.size());</code></p>\n\n<p>I am sending messages from Dealer1 socket to Dealer3 via Router socket. It is a zmq::proxy</p>\n\n<pre><code>zmq::context_t context(1);\nzmq::socket_t frontEnd(context, ZMQ_ROUTER);\nfrontEnd.bind(socketAddress);\nzmq::socket_t backend(context, ZMQ_DEALER);\nbackend.bind(\"inproc://mainSocket\");\nzmq::proxy(frontEnd, backend, nullptr);\n</code></pre>\n\n<p>When I send message to Dealer3 from Dealer1 like this, everything is okey:</p>\n\n<pre><code> std::string ReceiveReplyString()\n {\n    zmq::message_t message;\n    int ret = m_socket-&gt;recv(&amp;message);\n    if (ret)\n    {\n       return std::string(static_cast&lt;char*&gt;(message.data()), message.size());\n    }\n    else\n    {\n       throw zmq::error_t();\n    }    \n}\n\nconst std::string emptyString = \"\";\nzmq::message_t request(dataString.data(), dataString.size());\nint ret = m_socket-&gt;send(request);\nif (ret)\n{\n   m_replyString = ReceiveReplyString();\n   //Sending empty string as delimeter\n   zmq::message_t delimeter(emptyString.size());\n   memcpy(delimeter.data(), emptyString.data(), emptyString.size());\n   m_socket-&gt;send(delimeter);\n   }\n   else\n   {\n      throw zmq::error_t();\n   }\n}\n</code></pre>\n\n<p>I can send multiple messages but If I send messages without empty string after sending real message, I can not send or get any message after first one.</p>\n"}, {"tags": ["python", "c++", "boost-python"], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 6174980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4079693415729c8dea84a7b06b109ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pai", "link": "https://stackoverflow.com/users/6174980/alex-pai"}, "edited": false, "score": 0, "creation_date": 1544030192, "post_id": 53637318, "comment_id": 94134736, "body": "Thanks for the suggestions. The dilemma comes from the fact that I couldn&#39;t change much on the legacy C++ class definitions. Also, I am creating a python module for user who wants everything is there with one single module load. However, I couldn&#39;t understand your last point. The C++ equivalent to the aliasing in Python should be <code>typedef</code> or <code>using</code>. They work well in pure C++. But I still need <code>Bar</code> to be defined in the Example module."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "reply_to_user": {"reputation": 105, "user_id": 6174980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4079693415729c8dea84a7b06b109ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pai", "link": "https://stackoverflow.com/users/6174980/alex-pai"}, "edited": false, "score": 1, "creation_date": 1544117961, "post_id": 53637318, "comment_id": 94172174, "body": "Yes and no. Using a <code>typedef</code> or <code>using</code>, you create an alias. However, both the original name and the alias refer to the same type. What you want is a different type, even though it should behave like alike. In other words, you want equality but not identity. I&#39;ll try to illustrate this part with example code."}, {"owner": {"reputation": 105, "user_id": 6174980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4079693415729c8dea84a7b06b109ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pai", "link": "https://stackoverflow.com/users/6174980/alex-pai"}, "edited": false, "score": 0, "creation_date": 1544123163, "post_id": 53637318, "comment_id": 94174469, "body": "What I need was actually aliasing, i.e., refer to the same type. Your technique also works, but I am still expecting some other tricks to achieve it via boost with minimal coding complexity."}], "tags": [], "owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "is_accepted": false, "score": 2, "last_activity_date": 1544118311, "last_edit_date": 1544118311, "creation_date": 1544029439, "answer_id": 53637318, "question_id": 53637219, "link": "https://stackoverflow.com/questions/53637219/boost-python-typedef/53637318#53637318", "title": "Boost python typedef", "body": "<p>Since <code>typedef</code> only introduces an alias, your code just registers the same class under different names.</p>\n\n<p>Suggestions:</p>\n\n<ul>\n<li>Why would you want that anyway? Just register it once under its real name. As you mentioned, creating an alias in Python (again, why?) is easy.</li>\n<li>If you just declared a baseclass and derived both <code>Foo</code> and <code>Bar</code> from it, you would have different types and the warning would vanish, too.</li>\n<li>You could probably also write a C++ equivalent to the Python <code>Bar = Foo</code>, i.e. a simple assignment of an object to a name in the module namespace.</li>\n</ul>\n\n<p>Given the feedback below that it's required to support legacy code, here's what I would do:</p>\n\n<pre><code>// same as above\nstruct Foo { ... };\n\n// For legacy reasons, it is mandatory that Foo is exported\n// under two names. In order to introduce new C++ types, we\n// just derive from the original Foo. The approach using a\n// typedef doesn't work because it only creates an alias but\n// not an existing type.\nstruct FooType: Foo {};\nstruct BarType: Foo {};\n\nBOOST_PYTHON_MODULE(Example)\n{\n  class_&lt;FooType&gt;(\"Foo\")\n    .def(\"hi\", &amp;FooType::hi)\n  ;\n  class_&lt;BarType&gt;(\"Bar\")\n    .def(\"hi\", &amp;BarType::hi)\n  ;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105, "user_id": 6174980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4079693415729c8dea84a7b06b109ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pai", "link": "https://stackoverflow.com/users/6174980/alex-pai"}, "edited": false, "score": 0, "creation_date": 1544566036, "post_id": 53685393, "comment_id": 94319952, "body": "Wow. That&#39;s exactly what I am looking for. Thank you."}], "tags": [], "owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "is_accepted": true, "score": 3, "last_activity_date": 1544292057, "creation_date": 1544292057, "answer_id": 53685393, "question_id": 53637219, "link": "https://stackoverflow.com/questions/53637219/boost-python-typedef/53685393#53685393", "title": "Boost python typedef", "body": "<p>I'd go with the \"C++ equivalent to the Python <code>Bar = Foo</code>\" approach that Ulrich mentions.</p>\n\n<p>You can use <a href=\"https://www.boost.org/doc/libs/1_68_0/libs/python/doc/html/reference/high_level_components/boost_python_scope_hpp.html\" rel=\"nofollow noreferrer\"><code>boost::python::scope</code></a> to get access to the current module and its attributes.</p>\n\n<pre><code>#include &lt;boost/python.hpp&gt;\n#include &lt;iostream&gt;\n\nnamespace bp = boost::python;\n\nstruct Foo\n{\n    void hi() const { std::cout &lt;&lt; \"hi\" &lt;&lt; std::endl; }\n};\n\nBOOST_PYTHON_MODULE(Example)\n{\n    bp::class_&lt;Foo&gt;(\"Foo\")\n        .def(\"hi\", &amp;Foo::hi)\n        ;\n\n    bp::scope().attr(\"Bar\") = bp::scope().attr(\"Foo\");\n}\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 6174980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4079693415729c8dea84a7b06b109ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pai", "link": "https://stackoverflow.com/users/6174980/alex-pai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 1, "accepted_answer_id": 53685393, "answer_count": 2, "score": 2, "last_activity_date": 1544292057, "creation_date": 1544029108, "question_id": 53637219, "link": "https://stackoverflow.com/questions/53637219/boost-python-typedef", "title": "Boost python typedef", "body": "<p>I am trying to expose the C++ class with name aliasing to python using boost python. </p>\n\n<pre><code>struct Foo\n{\n  void hi() const { std::cout &lt;&lt; \"hi\" &lt;&lt; std::endl; }\n};\n\nBOOST_PYTHON_MODULE(Example)\n{\n  typedef Foo Bar;\n\n  class_&lt;Foo&gt;(\"Foo\")\n    .def(\"hi\", &amp;Foo::hi)\n  ;\n\n  class_&lt;Bar&gt;(\"Bar\")\n    .def(\"hi\", &amp;Bar::hi)\n  ;\n}\n</code></pre>\n\n<p>The code works as expected except the annoying RuntimeWarning.</p>\n\n<pre><code>RuntimeWarning: to-Python converter for Foo already registered; second conversion method ignore\n</code></pre>\n\n<p>Adding <code>Bar = Foo</code> in python also works. But I need to keep the definitions in the same module. Is there a better way to achieve this?</p>\n"}, {"tags": ["c++", "c", "gnu-indent"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 9, "creation_date": 1544026840, "post_id": 53636488, "comment_id": 94132755, "body": "In <code>int* a, b;</code> What type does the variable <code>b</code> has in your opinion?"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 3, "creation_date": 1544026848, "post_id": 53636488, "comment_id": 94132760, "body": "&quot;<code>*i</code> is of type <code>int</code>&quot; is correct. Also <code>int *i, j;</code> clearly shows that <code>j</code> is not a pointer whereas <code>int* i, j;</code> makes <code>j</code> look like a pointer. Anyways, consider using <code>clang-format</code>."}, {"owner": {"reputation": 2031, "user_id": 1114498, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/28c184063aa5fb8ab1303de158fa9bc8?s=128&d=identicon&r=PG", "display_name": "Necktwi", "link": "https://stackoverflow.com/users/1114498/necktwi"}, "edited": false, "score": 1, "creation_date": 1544027228, "post_id": 53636488, "comment_id": 94133010, "body": "i agree but what is the actual variable type being created? is it an <code>int*</code> or <code>int</code>?"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 6, "creation_date": 1544027254, "post_id": 53636488, "comment_id": 94133031, "body": "Is the question here &quot;How do I use gnu indent?&quot; or &quot;Which style is better?&quot;"}, {"owner": {"reputation": 2031, "user_id": 1114498, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/28c184063aa5fb8ab1303de158fa9bc8?s=128&d=identicon&r=PG", "display_name": "Necktwi", "link": "https://stackoverflow.com/users/1114498/necktwi"}, "edited": false, "score": 0, "creation_date": 1544027361, "post_id": 53636488, "comment_id": 94133101, "body": "question is about how to get the desired format. I have to put some additional lines to make stackoverflow happy"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1544027827, "post_id": 53636488, "comment_id": 94133382, "body": "Did you read the documentation to see if there&#39;s an option that controls it?"}, {"owner": {"reputation": 2031, "user_id": 1114498, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/28c184063aa5fb8ab1303de158fa9bc8?s=128&d=identicon&r=PG", "display_name": "Necktwi", "link": "https://stackoverflow.com/users/1114498/necktwi"}, "edited": false, "score": 0, "creation_date": 1544027869, "post_id": 53636488, "comment_id": 94133410, "body": "yeah I checked but couldn&#39;t find. what to look for to find it?"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 4, "creation_date": 1544027906, "post_id": 53636488, "comment_id": 94133425, "body": "This question is about getting <b>the result desired by the OP</b> from GNU indent. Please do not discuss whether that result is good or bad in your opinion."}, {"owner": {"reputation": 2031, "user_id": 1114498, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/28c184063aa5fb8ab1303de158fa9bc8?s=128&d=identicon&r=PG", "display_name": "Necktwi", "link": "https://stackoverflow.com/users/1114498/necktwi"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1544028118, "post_id": 53636488, "comment_id": 94133559, "body": "@shawn i&#39;ve searched the words <code>astrik</code>, <code>pointer</code> and <code>dereference</code> but none or found. please suggest me a keyword."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1544029887, "post_id": 53636488, "comment_id": 94134587, "body": "@AlgirdasPreid\u017eius How often do you write code like that? Still don&#39;t understand why people keep anchoring themselves to one edge case in this debate."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1544030007, "post_id": 53636488, "comment_id": 94134646, "body": "@LightnessRacesinOrbit I, personally, never. I only was giving a reason, why some write it like so, to the (now edited out) statement &quot;<i>I don&#39;t understand why many write as <code>int *i</code></i>&quot;."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1544030022, "post_id": 53636488, "comment_id": 94134654, "body": "@AlgirdasPreid\u017eius Okay"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1544031532, "post_id": 53636488, "comment_id": 94135366, "body": "fyi in <code>C++</code> it has <i>always</i> been recommended that you declare variables individually as and when you use them. Declaring multiple variables in one go has always been considered bad practice. Bunching all declarations together at the top of a function was due to <code>C</code> being limited in that way. <code>C++</code> never had that restriction. So please don&#39;t get in the habit of doing <code>int a, b, c;</code> as some suggest here."}], "answers": [{"comments": [{"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1544028343, "post_id": 53636966, "comment_id": 94133681, "body": "Should be a comment really, as it does not exactly answer the question..."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1544028375, "post_id": 53636966, "comment_id": 94133701, "body": "But this option is horrible clang-format does not make the difference between the * inside a ptr-declarator and the * of the indirection expression. I don&#39;t use clang format just for that!"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 2, "creation_date": 1544028397, "post_id": 53636966, "comment_id": 94133715, "body": "@DevSolar well, I think it does, as OP has somewhat like an XY problem. The tool chosen by OP doesn&#39;t have this functionality, but there is a replacement tool. I believe, it is a valid answer, which doesn&#39;t really fit into comment.,"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1544028466, "post_id": 53636966, "comment_id": 94133753, "body": "@Oliv it does not??? I can&#39;t believe it! I will test myself and will delete this answer if find it to be true."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 1, "creation_date": 1544028512, "post_id": 53636966, "comment_id": 94133778, "body": "Valid answers to the question &quot;how do I,,,?&quot; include &quot;you cannot&quot; \u2014unless incorrect."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1544028621, "post_id": 53636966, "comment_id": 94133841, "body": "It would be surprising for GNU indent to have that option <i>for C++</i>, seeing as its C++ support is very experimental and there are plenty of cases in C++ where you need a bunch of context to even decide whether something is a declaration or not. Templates + dependent vs non-dependent names for example."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1544029252, "post_id": 53636966, "comment_id": 94134186, "body": "I&#39;ll field AStyle as an answer then as well. ;-)"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1544029449, "post_id": 53636966, "comment_id": 94134310, "body": "@DevSolar and I believe, this is a valid answer to, which I upvoted :)"}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 2, "last_activity_date": 1544029480, "last_edit_date": 1544029480, "creation_date": 1544028294, "answer_id": 53636966, "question_id": 53636488, "link": "https://stackoverflow.com/questions/53636488/with-gnu-indent-how-to-make-int-to-int/53636966#53636966", "title": "with gnu indent how to make int * to int*", "body": "<p>I believe, gnu ident doesn't have this option. CLang format, on the other hand, seems to have it as <strong>PointerAlignment</strong> option, which can take following options:</p>\n\n<p>Possible values:\n<code>PAS_Left</code> (in configuration: Left) Align pointer to the left.</p>\n\n<pre><code>int* a;\n</code></pre>\n\n<p><code>PAS_Right</code> (in configuration: Right) Align pointer to the right.</p>\n\n<pre><code>int *a;\n</code></pre>\n\n<p><code>PAS_Middle</code> (in configuration: Middle) Align pointer in the middle.</p>\n\n<pre><code>int * a;\n</code></pre>\n\n<p>More details can be found here: <a href=\"https://clang.llvm.org/docs/ClangFormatStyleOptions.html\" rel=\"nofollow noreferrer\">https://clang.llvm.org/docs/ClangFormatStyleOptions.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "is_accepted": false, "score": 2, "last_activity_date": 1544079539, "last_edit_date": 1544079539, "creation_date": 1544029171, "answer_id": 53637234, "question_id": 53636488, "link": "https://stackoverflow.com/questions/53636488/with-gnu-indent-how-to-make-int-to-int/53637234#53637234", "title": "with gnu indent how to make int * to int*", "body": "<p>I did not find any corresponding option in the <a href=\"https://www.gnu.org/software/indent/manual/indent.html\" rel=\"nofollow noreferrer\">GNU indent manual</a>. An alternative would be to use <a href=\"http://astyle.sourceforge.net/\" rel=\"nofollow noreferrer\">AStyle</a>, which offers the <a href=\"http://astyle.sourceforge.net/astyle.html#_align-pointer\" rel=\"nofollow noreferrer\"><code>--align-pointer</code></a> option:</p>\n\n<p>With <code>--align-pointer=type</code> / <code>-k1</code>:</p>\n\n<pre><code>int* a;\n</code></pre>\n\n<p>With <code>--align-pointer=middle</code> / <code>-k2</code>:</p>\n\n<pre><code>int * a;\n</code></pre>\n\n<p>With <code>--align-pointer=name</code> / <code>-k3</code>:</p>\n\n<pre><code>int *a;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1544029276, "creation_date": 1544029276, "answer_id": 53637270, "question_id": 53636488, "link": "https://stackoverflow.com/questions/53636488/with-gnu-indent-how-to-make-int-to-int/53637270#53637270", "title": "with gnu indent how to make int * to int*", "body": "<blockquote>\n  <p>How can I go about doing that?</p>\n  \n  <p>If not possible how to at least make kernighan&amp;ritchie style</p>\n</blockquote>\n\n<p>The documentation for GNU indent does not clearly describe any option specifically affecting the whitespace around the asterisk in a pointer declaration, but it does have an umbrella option <code>-kr</code> for requesting K&amp;R style, and I find that that does cause <code>indent</code> to perform the formatting you request, snuggling up the asterisk next to the identifier.  Of course it has many other effects, as well, though these can be overridden by additional explicit options.</p>\n\n<p>The <code>-gnu</code> general style option, which is the default, <em>also</em> has this effect.  That makes it tricky to sort out which detail option controls this specific behavior, but certainly one answer to your question is that <code>indent</code> will convert your pointer declarations to the K&amp;R style you describe with no options at all.</p>\n\n<p>In fact, as far as I can tell, <code>indent</code> will perform that particular formatting regardless of what options you provide.  There does not seem to be any option to modulate that behavior.</p>\n"}], "owner": {"reputation": 2031, "user_id": 1114498, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/28c184063aa5fb8ab1303de158fa9bc8?s=128&d=identicon&r=PG", "display_name": "Necktwi", "link": "https://stackoverflow.com/users/1114498/necktwi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1544079539, "creation_date": 1544026705, "last_edit_date": 1544027689, "question_id": 53636488, "link": "https://stackoverflow.com/questions/53636488/with-gnu-indent-how-to-make-int-to-int", "title": "with gnu indent how to make int * to int*", "body": "<p>I want to change</p>\n\n<pre><code>int *i;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>int* i;\n</code></pre>\n\n<p>using gnu indent. How can I go about doing that?</p>\n\n<p>If not possible how to at least make\nkernighan&amp;ritchie style</p>\n\n<pre><code>int * i;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>int *i;\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1544026284, "post_id": 53636341, "comment_id": 94132450, "body": "<a href=\"https://stackoverflow.com/questions/10828937/how-to-make-cin-take-only-numbers\">Code explained here</a>.  Sounds like you could use a <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1544026380, "post_id": 53636341, "comment_id": 94132502, "body": "If input fails, the input is not removed from the buffers. The next time you attempt to read input, it will read the very same input that failed last iteration. You can <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/ignore\" rel=\"nofollow noreferrer\">ignore</a> the input until the end of the line to discard it."}], "owner": {"reputation": 3, "user_id": 10453116, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ky-3sP9B4HM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXjaIIPop-qfY1SegRvq44s3EXDyQ/mo/photo.jpg?sz=128", "display_name": "Jos&#233; Gon&#231;alves", "link": "https://stackoverflow.com/users/10453116/jos%c3%a9-gon%c3%a7alves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "closed_date": 1544039668, "answer_count": 0, "score": 0, "last_activity_date": 1544026167, "creation_date": 1544026167, "question_id": 53636341, "link": "https://stackoverflow.com/questions/53636341/using-a-string-character-double-instead-of-an-integer-will-make-the-program-loop", "closed_reason": "Duplicate", "title": "Using a String/Character/Double instead of an Integer will make the program loop", "body": "<p>I've been trying to learn by myself C++ (I have some knowledge of Portugol, a pseudo-code) and I reached a problem.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n\nint main(){\n\n//4.3\n\nstd::string funcionario[2];\nint horas[2], depen[2];\nconst double INSS=0.085, IRS=0.05;\n\nfor (int i=0 ; i&lt;2 ; i++) {\n   std::cout &lt;&lt; \"Indique o nome do \" &lt;&lt; i+1 &lt;&lt; \"\u00ba funcion\u00e1rio, o n\u00famero de \n horas e dependentes\"\n            &lt;&lt; '\\n' &lt;&lt; \"Funcion\u00e1rio_\" &lt;&lt; i+1 &lt;&lt;\": \";\n  std::cin &gt;&gt; funcionario[i];\n  std::cout &lt;&lt; \"Horas: \";\n  std::cin &gt;&gt; horas[i];\n\n    while (horas[i]&lt;0) {\n      std::cout &lt;&lt; \"Ups! Algo deu errado, tente novamente.\" &lt;&lt; '\\n' &lt;&lt; \n\"Horas: \";\n      std::cin &gt;&gt; horas[i];\n      }\n\n   std::cout &lt;&lt; \"Dependentes: \";\n   std::cin &gt;&gt; depen[i];\n    while (depen[i]&lt;0) {\n      std::cout &lt;&lt; \"Ups! Algo deu errado, tente novamente.\" &lt;&lt; '\\n' &lt;&lt; \n \"Dependentes: \";\n      std::cin &gt;&gt; depen[i];\n    }\n  std::cout &lt;&lt; '\\n' &lt;&lt; '\\n';\n}\nfor (int i=0; i&lt;2; i++) {\n  std::cout &lt;&lt; \"Funcion\u00e1rio \" &lt;&lt; funcionario[i] &lt;&lt; \": \" &lt;&lt; '\\n'\n            &lt;&lt; \"Sal\u00e1rio Bruto: \" &lt;&lt; horas[i]*12+depen[i]*40 &lt;&lt; \"\u20ac\" &lt;&lt; '\\n'\n            &lt;&lt; \"Sal\u00e1rio L\u00edquido: \" &lt;&lt; (horas[i]*12+depen[i]*40)- \n   ((horas[i]*12+depen[i]*40)*INSS + (horas[i]*12+depen[i]*40)*IRS)\n            &lt;&lt; \"\u20ac\" &lt;&lt; '\\n' &lt;&lt; \"Descontos-INSS: \"&lt;&lt; \n    (horas[i]*12+depen[i]*40)*INSS\n            &lt;&lt; \"\u20ac\" &lt;&lt; '\\n' &lt;&lt;'\\t' &lt;&lt; \"  IRS: \" &lt;&lt; \n    (horas[i]*12+depen[i]*40)*IRS &lt;&lt; \"\u20ac\";\n  std::cout &lt;&lt; '\\n' &lt;&lt; '\\n';\n\n}\n\n}\n</code></pre>\n\n<p>While trying the program I noticed if I wrote a string instead of an integer on \"std::cin >> horas[i];\" and \"std::cin >> depen[i];\" I will get a loop <a href=\"https://i.stack.imgur.com/IBTnc.png\" rel=\"nofollow noreferrer\">like this</a> or some weird values <a href=\"https://i.stack.imgur.com/8owMD.png\" rel=\"nofollow noreferrer\">like this</a>.</p>\n\n<p>I already tried:</p>\n\n<pre><code>#include&lt;limits&gt;\n\n...\n\nwhile (horas[i]&lt;0) {\n    while(!(cin &gt;&gt; horas[i])) {\n        cout &lt;&lt; \"Incorrect input. Please try again.\\n\";\n        cin.clear();\n        cin.ignore(numeric_limits&lt;streamsize&gt;::max(), '\\n');\n    }\n\n      std::cout &lt;&lt; \"Ups! Algo deu errado, tente novamente.\" &lt;&lt; '\\n' &lt;&lt; \n\"Horas: \";\n      std::cin &gt;&gt; horas[i];\n       }\n</code></pre>\n\n<p>But I have no idea how this works and how to use it, I just get compiling errors.</p>\n\n<p>How do I fix this?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "qt", "raspberry-pi", "live-streaming", "live-video"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10712426, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qe9Ul.jpg?s=128&g=1", "display_name": "Amin J", "link": "https://stackoverflow.com/users/10712426/amin-j"}, "edited": false, "score": 0, "creation_date": 1544029495, "post_id": 53636782, "comment_id": 94134337, "body": "thanks for the respond. then how can I set the live stream window on a QLable?"}], "tags": [], "owner": {"reputation": 1735, "user_id": 1707083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d10a00a81504b18d3d3723a4b7c252?s=128&d=identicon&r=PG", "display_name": "Samer", "link": "https://stackoverflow.com/users/1707083/samer"}, "is_accepted": false, "score": 0, "last_activity_date": 1544027664, "creation_date": 1544027664, "answer_id": 53636782, "question_id": 53636279, "link": "https://stackoverflow.com/questions/53636279/problem-on-displaying-live-video-in-qt-c-application/53636782#53636782", "title": "problem on displaying live video in qt c++ application", "body": "<p>It is pretty simple in opencv</p>\n\n<pre><code>#include &lt;opencv2/core/core.hpp&gt;\n#include &lt;opencv2/highgui/highgui.hpp&gt;\n#include &lt;iostream&gt;\n\nusing namespace cv;\nusing namespace std;\n\n int main( int argc, char** argv )\n {\n        VideoCapture cap(0); // open the default camera\n    if(!cap.isOpened())  // check if we succeeded\n        return -1;\n\n    Mat edges;\n    namedWindow(\"edges\",1);\n    for(;;)\n    {\n        Mat frame;\n\n        cap &gt;&gt; frame; // get a new frame from camera\n\n        imshow(\"edges\", frame);\n        if(waitKey(30) &gt;= 0) break;\n    }\nreturn 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3380, "user_id": 3308570, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Mzz9.jpg?s=128&g=1", "display_name": "JustWe", "link": "https://stackoverflow.com/users/3308570/justwe"}, "is_accepted": false, "score": 0, "last_activity_date": 1544489642, "last_edit_date": 1544489642, "creation_date": 1544177143, "answer_id": 53667277, "question_id": 53636279, "link": "https://stackoverflow.com/questions/53636279/problem-on-displaying-live-video-in-qt-c-application/53667277#53667277", "title": "problem on displaying live video in qt c++ application", "body": "<p>Stream the camera using <code>OpenCV</code>, and show it in <code>QLabel</code> is possible.\nWhen QCamera not working, and also use OpenCV in the project, could use <code>VideoCapture</code> to stream the video instead of QCamera.</p>\n\n<p>The problem can be decomposed into several steps. Basically, We need:</p>\n\n<ol>\n<li>Create a <code>QThread</code> for streaming(Don't let the GUI thread blocked).</li>\n<li>In the sub-thread, using <code>cv::VideoCapture</code> to capture the frame into a <code>cv::Mat</code>.</li>\n<li>Convert the <code>cv::Mat</code> to <code>QImage</code>(<a href=\"https://stackoverflow.com/questions/5026965/how-to-convert-an-opencv-cvmat-to-qimage\">how to convert an opencv cv::Mat to qimage</a>).</li>\n<li>Pass <code>QImage</code> frame from sub-thread to the main GUI thread.</li>\n<li>Paint the <code>QImage</code> on the <code>QLabel</code>.</li>\n</ol>\n\n<p>I put the complete demo code in <a href=\"https://github.com/arkceajin/QtDemos/tree/master/QtOpenCVCam\" rel=\"nofollow noreferrer\">Github</a>. it could paint the frame on the <code>QLabel</code> and QML <code>VideoOutput</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 10712426, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qe9Ul.jpg?s=128&g=1", "display_name": "Amin J", "link": "https://stackoverflow.com/users/10712426/amin-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 767, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1544489642, "creation_date": 1544025909, "last_edit_date": 1544027100, "question_id": 53636279, "link": "https://stackoverflow.com/questions/53636279/problem-on-displaying-live-video-in-qt-c-application", "title": "problem on displaying live video in qt c++ application", "body": "<p>I want to show a live stream of the camera connected to raspberry in qt application (OS Linux). After googling it, I found out I must display the video inside QLabel. When displaying an image there's no problem and everything works fine, but when I want to display the live stream inside QLabel, the live stream window opens separately (not inside QLabel). would you tell me how to solve this problem? here's my code :</p>\n\n<pre><code>void Dialog::on_Preview_clicked()\n{\n    command = \"raspistill\";\n    args&lt;&lt;\"-o\"&lt;&lt;\"/home/pi/Pictures/Preview/\"+Date1.currentDateTime().toString()+\".jpg\"&lt;&lt;\"-t\"&lt;&lt;QString::number(20000);\n    Pic.start(command,args,QIODevice::ReadOnly);\n    QPixmap pix(\"//home//pi//Pictures//Preview//test.jpg\");\n    ui-&gt;label_2-&gt;setPixmap(pix);\n    ui-&gt;label_2-&gt;setScaledContents(true);\n}\n</code></pre>\n\n<p>This code opens video capturing screen and captures an image after 20 seconds. the only problem is that the capture screen (which could be used as a live stream). isn't being displayed inside the \"Lable_2\". Is there anyway to do this without using OpenCV library? If not, tell me how to do it using OpenCV.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "encoding", "tar", "clion", "bzip2"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1544025727, "post_id": 53636186, "comment_id": 94132141, "body": "For 2. <a href=\"https://en.wikipedia.org/wiki/Version_control\" rel=\"nofollow noreferrer\">version control</a> helps. It has other neat advantages, so maybe look into git."}], "answers": [{"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 2, "last_activity_date": 1544025866, "creation_date": 1544025866, "answer_id": 53636263, "question_id": 53636186, "link": "https://stackoverflow.com/questions/53636186/how-can-i-fix-tar-bzip2-ruined-source-code-encoding/53636263#53636263", "title": "How can I fix tar-bzip2-ruined source code encoding?", "body": "<p>It happened because of the <code>f</code> option to <code>tar</code>, which specifies that the output file is <code>des.cpp</code>.</p>\n\n<p>You can't make sure it never happens again, but you can mitigate it by using <em>version control</em>, <em>backups</em>, and <a href=\"http://man7.org/linux/man-pages/man1/tar.1.html\" rel=\"nofollow noreferrer\"><em>reading manual pages</em></a> before using unknown commands.</p>\n\n<p>And unless you had a backup lying around (or already are using version control), then there's really nothing you can do about it.</p>\n"}], "owner": {"reputation": 3, "user_id": 9146717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uZMHn.png?s=128&g=1", "display_name": "abdelmak", "link": "https://stackoverflow.com/users/9146717/abdelmak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 53636263, "answer_count": 1, "score": 0, "last_activity_date": 1544025866, "creation_date": 1544025591, "question_id": 53636186, "link": "https://stackoverflow.com/questions/53636186/how-can-i-fix-tar-bzip2-ruined-source-code-encoding", "title": "How can I fix tar-bzip2-ruined source code encoding?", "body": "<p>I nearly completed a DES implementation for a school project when...</p>\n\n<p>I ruined my source code with tar &amp; bzip2.</p>\n\n<p>The command was:\n<code>tar cjvf des.cpp des.h main.cpp &gt; des_implementation.tar.bz2</code></p>\n\n<p>I tried to create a compressed archive to send to a friend. To my horror, when I opened the source code in CLion (des.cpp, des.h, and main.cpp), I found that des.cpp was completely ruined and CLion was displaying an error:  <code>File was loaded in the wrong encoding: 'US-ASCII'</code>.</p>\n\n<p>Here is a sample of the file's contents:\n<code>BZh91AY&amp;SY\u00a9fZ\ufffd\u00d7\u00ff\u00d0\u00de\u00b0\ufffd\u00c0Y\u00f7\u00ff\u00dd\u00bf\u00ef\u00df\u00ca\u00ff\u00ef\u00ff\u00ea\u0010\ufffd\ufffd\ufffdP\u00de\u00e1\u00c3\u00b3``\u00cd\u00ae:\u0010D4i\u00a24\u00d2z\u00a65=OP\u00de\u00a4i\u00e2S\u00da\u00a3@\u00f5\ufffd\u00e5</code></p>\n\n<p>I've also tried unzipping the zipped filed, but to no avail. I thought the command would create a separate .tar.bz file and leave the originals alone?</p>\n\n<p>Main questions:</p>\n\n<ol>\n<li>How did this happen?</li>\n<li>How can I make sure it never happens again?</li>\n<li>How can I fix this?</li>\n</ol>\n\n<p>I am flustered and desperate, any help would be appreciated.</p>\n"}, {"tags": ["c++", "performance", "opencv", "parallel-processing"], "comments": [{"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1544029028, "post_id": 53636159, "comment_id": 94134065, "body": "I don&#39;t believe the CUDA kernel you have could possibly compile correctly."}, {"owner": {"reputation": 141, "user_id": 521890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ca84bac577833b6d3068bb6b8d2c0fc?s=128&d=identicon&r=PG", "display_name": "Poko", "link": "https://stackoverflow.com/users/521890/poko"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1544453841, "post_id": 53636159, "comment_id": 94270927, "body": "How should I rewrite it to compile correctly?"}], "owner": {"reputation": 141, "user_id": 521890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ca84bac577833b6d3068bb6b8d2c0fc?s=128&d=identicon&r=PG", "display_name": "Poko", "link": "https://stackoverflow.com/users/521890/poko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 212, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544027986, "creation_date": 1544025493, "last_edit_date": 1544027986, "question_id": 53636159, "link": "https://stackoverflow.com/questions/53636159/speed-up-objectdetection-with-cuda", "title": "Speed up objectDetection with CUDA", "body": "<p>I'm trying to learn programming in CUDA. I've created a simple application that makes object detection in avi files with OpenCV, then tried to speed up the detection with CUDA. At this point I'm struggeling how to do it properly. So my plan would be to make the object detection run in different threads to speed up the application. Here's the basic code what I did so far:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include \"opencv2/objdetect.hpp\"\n#include \"opencv2/highgui.hpp\"\n#include \"opencv2/imgproc.hpp\"\n#include \"opencv2/cudaobjdetect.hpp\"\n#include \"opencv2/cudaimgproc.hpp\"\n#include \"opencv2/cudawarping.hpp\"\n#include \"arcos.h\"\n#include \"cuda.h\"\n#include \"cuda_runtime.h\"\n\nusing namespace std;\nusing namespace cv;\nusing namespace cv::cuda;\n\nvoid help()\n{\n    cout &lt;&lt; \"Usage: ./cascadeclassifier \\n\\t--cascade &lt;cascade_file&gt;\\n\\t(&lt;image&gt;|--video &lt;video&gt;|--camera &lt;camera_id&gt;)\\n\"\n        \"Using OpenCV version \" &lt;&lt; CV_VERSION &lt;&lt; endl &lt;&lt; endl;\n}\n\nvoid convertAndResize(const Mat&amp; src, Mat&amp; gray, Mat&amp; resized, double scale)\n{\n    if (src.channels() == 3)\n    {\n        cv::cvtColor(src, gray, COLOR_BGR2GRAY);\n    }\n    else\n    {\n        gray = src;\n    }\n\n    Size sz(cvRound(gray.cols * scale), cvRound(gray.rows * scale));\n\n    if (scale != 1)\n    {\n        cv::resize(gray, resized, sz);\n    }\n    else\n    {\n        resized = gray;\n    }\n}\n\nvoid convertAndResize(const GpuMat&amp; src, GpuMat&amp; gray, GpuMat&amp; resized, double scale)\n{\n    if (src.channels() == 3)\n    {\n        cv::cuda::cvtColor(src, gray, COLOR_BGR2GRAY);\n    }\n    else\n    {\n        gray = src;\n    }\n\n    Size sz(cvRound(gray.cols * scale), cvRound(gray.rows * scale));\n\n    if (scale != 1)\n    {\n        cv::cuda::resize(gray, resized, sz);\n    }\n    else\n    {\n        resized = gray;\n    }\n}\n\n\nvoid matPrint(Mat &amp;img, int lineOffsY, Scalar fontColor, const string &amp;ss)\n{\n    int fontFace = FONT_HERSHEY_DUPLEX;\n    double fontScale = 0.8;\n    int fontThickness = 2;\n    Size fontSize = cv::getTextSize(\"T[]\", fontFace, fontScale, fontThickness, 0);\n\n    Point org;\n    org.x = 1;\n    org.y = 3 * fontSize.height * (lineOffsY + 1) / 2;\n    putText(img, ss, org, fontFace, fontScale, Scalar(0, 0, 0), 5 * fontThickness / 2, 16);\n    putText(img, ss, org, fontFace, fontScale, fontColor, fontThickness, 16);\n}\n\n\nvoid displayState(Mat &amp;canvas, bool bHelp, bool bGpu, bool bLargestFace, bool bFilter, double fps)\n{\n    Scalar fontColorRed = Scalar(255, 0, 0);\n    Scalar fontColorNV = Scalar(118, 185, 0);\n\n    ostringstream ss;\n    ss &lt;&lt; \"FPS = \" &lt;&lt; setprecision(1) &lt;&lt; fixed &lt;&lt; fps;\n    matPrint(canvas, 0, fontColorRed, ss.str());\n    ss.str(\"\");\n    ss &lt;&lt; \"[\" &lt;&lt; canvas.cols &lt;&lt; \"x\" &lt;&lt; canvas.rows &lt;&lt; \"], \" &lt;&lt;\n        (bGpu ? \"GPU, \" : \"CPU, \") &lt;&lt;\n        (bLargestFace ? \"One, \" : \"Multi, \") &lt;&lt;\n        (bFilter ? \"Filter:ON\" : \"Filter:OFF\");\n    matPrint(canvas, 1, fontColorRed, ss.str());\n\n    // by Anatoly. MacOS fix. ostringstream(const string&amp;) is a private\n    // matPrint(canvas, 2, fontColorNV, ostringstream(\"Space - switch GPU / CPU\"));\n    if (bHelp)\n    {\n        matPrint(canvas, 2, fontColorNV, \"Space - switch GPU / CPU\");\n        matPrint(canvas, 3, fontColorNV, \"M - switch One / Multi\");\n        matPrint(canvas, 4, fontColorNV, \"F - toggle rectangles Filter\");\n        matPrint(canvas, 5, fontColorNV, \"H - toggle hotkeys help\");\n        matPrint(canvas, 6, fontColorNV, \"1/Q - increase/decrease scale\");\n        matPrint(canvas, 7, fontColorNV, \"R - rotate on/off\");\n    }\n    else\n    {\n        matPrint(canvas, 2, fontColorNV, \"H - toggle hotkeys help\");\n    }\n}\n\nvoid elforgat(Mat&amp; src, double fok)\n{\n    Point2f center(src.cols / 2.0f, src.rows / 2.0f);\n    Mat rot = cv::getRotationMatrix2D(center, fok, 1.0);\n    Mat f;\n    cv::warpAffine(src, f, rot, src.size());\n    src = f;\n}\nvoid elforgat(GpuMat&amp; src, double fok)\n{\n    Point2f center(src.cols / 2.0f, src.rows / 2.0f);\n    Mat rot = cv::getRotationMatrix2D(center, fok, 1.0);\n    GpuMat f;\n    cuda::warpAffine(src, f, rot, src.size());\n    src = f;\n}\n\n__global__ void detectLyme(cv::Ptr&lt;cv::cuda::CascadeClassifier&gt; &amp;cascade_gpu, bool findLargestObject, double scaleFactor, bool filterRects, cv::Size &amp;minSize, cv::Size &amp;maxSize, cv::cuda::GpuMat &amp;resized_gpu, cv::cuda::GpuMat &amp;facesBuf_gpu, std::vector&lt;cv::Rect&gt; &amp;faces)\n{\n    cascade_gpu-&gt;setFindLargestObject(findLargestObject);\n    cascade_gpu-&gt;setScaleFactor(1 / scaleFactor);\n    cascade_gpu-&gt;setMinNeighbors((filterRects || findLargestObject) ? 4 : 0);\n    cascade_gpu-&gt;setMinObjectSize(minSize);\n    cascade_gpu-&gt;setMaxObjectSize(maxSize);\n    cascade_gpu-&gt;detectMultiScale(resized_gpu, facesBuf_gpu);\n    cascade_gpu-&gt;convert(facesBuf_gpu, faces);\n}\n\nint main(int argc, const char *argv[])\n{\n    VideoCapture capture;\n    Mat image;\n\n    string inputName;\n    bool isInputImage = false;\n    bool isInputVideo = true;\n    bool isInputCamera = false;\n    Ptr&lt;cuda::CascadeClassifier&gt; cascade_gpu;\n    cv::CascadeClassifier cascade_cpu;\n    Mat frame, frame_cpu, gray_cpu, resized_cpu, frameDisp;\n    vector&lt;Rect&gt; faces;\n    GpuMat frame_gpu, gray_gpu, resized_gpu, facesBuf_gpu;\n    bool useGPU = true;\n    double scaleFactor = 0.9;\n    bool findLargestObject = false;\n    bool filterRects = true;\n    bool forgass = false;\n    bool helpScreen = false, run = true;\n    double fok = 0;\n    TickMeter tm;\n    Size minSize = Size(30, 30);\n    Size maxSize = Size(34, 34);\n    double detectionTime, fps;\n    char key;\n    string cascadeName = \"cascade.xml\";\n\n    inputName = \"D:\\\\cicc\\\\video\\\\085\\\\Teszt40\\\\Teszt_Teszt40_2018-10-09-17-09-25_free_1.avi\";\n\n    setlocale(LC_ALL, \"hun\");\n\n    if (getCudaEnabledDeviceCount() == 0)\n        return cerr &lt;&lt; \"No GPU found or the library is compiled without CUDA support\" &lt;&lt; endl, -1;\n\n    //cuda::printShortCudaDeviceInfo(cv::cuda::getDevice());\n    cuda::printCudaDeviceInfo(cv::cuda::getDevice());\n\n    cascade_gpu = cuda::CascadeClassifier::create(cascadeName);\n    cout &lt;&lt; \"name: \" &lt;&lt; cascade_gpu-&gt;getDefaultName() &lt;&lt; \" size \" &lt;&lt; cascade_gpu-&gt;getClassifierSize() &lt;&lt; endl;\n\n    if (!cascade_cpu.load(cascadeName))\n        return cerr &lt;&lt; \"ERROR: Could not load cascade classifier \\\"\" &lt;&lt; cascadeName &lt;&lt; \"\\\"\" &lt;&lt; endl, help(), -1;\n\n    if (isInputImage)\n    {\n        image = imread(inputName);\n        CV_Assert(!image.empty());\n    }\n    else if (isInputVideo)\n    {\n        capture.open(inputName);\n        CV_Assert(capture.isOpened());\n    }\n    else\n    {\n        capture.open(atoi(inputName.c_str()));\n        CV_Assert(capture.isOpened());\n    }\n    namedWindow(\"lajm-e\", 1);\n    while (run)\n    {\n        if (isInputCamera || isInputVideo)\n        {\n            capture &gt;&gt; frame;\n            if (frame.empty()) run = false;\n        }\n        if (run) // end ?\n        {\n            tm.reset();\n            if (useGPU)\n            {\n                tm.start();\n                frame_gpu.upload(image.empty() ? frame : image);\n                if (forgass) elforgat(frame_gpu, fok);\n                convertAndResize(frame_gpu, gray_gpu, resized_gpu, scaleFactor);\n                //detectLyme(cascade_gpu, findLargestObject, scaleFactor, filterRects, minSize, maxSize, resized_gpu, facesBuf_gpu, faces);\n                detectLyme&lt;&lt;&lt;1, 256&gt;&gt;&gt;(cascade_gpu, findLargestObject, scaleFactor, filterRects, minSize, maxSize, resized_gpu, facesBuf_gpu, faces);\n                tm.stop();\n                resized_gpu.download(resized_cpu);\n            }\n            else\n            {\n                tm.start();\n                (image.empty() ? frame : image).copyTo(frame_cpu);\n                convertAndResize(frame_cpu, gray_cpu, resized_cpu, scaleFactor);\n                if (forgass) elforgat(resized_cpu, fok);\n                cascade_cpu.detectMultiScale(resized_cpu, faces, 1.05,\n                    (filterRects || findLargestObject) ? 4 : 0,\n                    (findLargestObject ? CASCADE_FIND_BIGGEST_OBJECT : 0)\n                    | CASCADE_SCALE_IMAGE\n                    , minSize, maxSize);\n                tm.stop();\n            }\n            if (forgass) fok++;\n            for (size_t i = 0; i &lt; faces.size(); ++i)\n                rectangle(resized_cpu, faces[i], Scalar(255));\n\n            detectionTime = tm.getTimeMilli();\n            fps = 1000 / detectionTime;\n\n            //print detections to console\n            cout &lt;&lt; setfill(' ') &lt;&lt; setprecision(2);\n            cout &lt;&lt; setw(6) &lt;&lt; fixed &lt;&lt; fps &lt;&lt; \" FPS, \" &lt;&lt; faces.size() &lt;&lt; \" det\";\n            if ((filterRects || findLargestObject) &amp;&amp; !faces.empty())\n                for (size_t i = 0; i &lt; faces.size(); ++i)\n                    cout &lt;&lt; \", [\" &lt;&lt; setw(4) &lt;&lt; faces[i].x\n                    &lt;&lt; \", \" &lt;&lt; setw(4) &lt;&lt; faces[i].y\n                    &lt;&lt; \", \" &lt;&lt; setw(4) &lt;&lt; faces[i].width\n                    &lt;&lt; \", \" &lt;&lt; setw(4) &lt;&lt; faces[i].height &lt;&lt; \"]\";\n            cout &lt;&lt; endl;\n\n            cv::cvtColor(resized_cpu, frameDisp, COLOR_GRAY2BGR);\n            displayState(frameDisp, helpScreen, useGPU, findLargestObject, filterRects, fps);\n            imshow(\"lajm-e\", frameDisp);\n\n            key = (char)waitKey(1);\n\n            switch (key)\n            {\n            case 27:\n                run = false; break;\n            case ' ':\n                useGPU = !useGPU; break;\n            case 'm':   case 'M':\n                findLargestObject = !findLargestObject; break;\n            case 'f':   case 'F':\n                filterRects = !filterRects; break;\n            case '1':\n                scaleFactor *= 1.05; break;\n            case 'q':   case 'Q':\n                scaleFactor /= 1.05; break;\n            case 'h':   case 'H':\n                helpScreen = !helpScreen; break;\n            case 'r':   case 'R':\n                forgass = !forgass; break;\n            }\n        } // if run\n    } // while (run)\n    cout &lt;&lt; \"File v\ufffdge\" &lt;&lt; endl;\n    //if (key!=27) std::cin.get();\n    return 0;\n}\n</code></pre>\n\n<p>Could someone help me how should I optimize the code to speed it up pls?</p>\n"}, {"tags": ["c++", "linker", "g++", "qt5", "cross-compiling"], "answers": [{"tags": [], "owner": {"reputation": 115, "user_id": 3685378, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/97c9ff805f34ddca918c048eddea993f?s=128&d=identicon&r=PG&f=1", "display_name": "Schnappi", "link": "https://stackoverflow.com/users/3685378/schnappi"}, "is_accepted": true, "score": 0, "last_activity_date": 1545380469, "creation_date": 1545380469, "answer_id": 53881339, "question_id": 53636155, "link": "https://stackoverflow.com/questions/53636155/static-libstdc-when-cross-compiling-for-arm-while-using-qt5/53881339#53881339", "title": "Static libstdc++ when cross-compiling for ARM while using Qt5", "body": "<p>I have found a solution to my problem. I needed to explicitly list static version of standard library on the top of the lib list. It's very far from ideal solution, but now the bin got built as I intended.</p>\n\n<pre><code>if(${CMAKE_CXX_COMPILER} MATCHES \".*aarch64.*\")\nLIST(APPEND SAMPLE_LIBRARIES\n     /usr/lib/gcc-cross/aarch64-linux-gnu/7/libstdc++.a\n)\nendif()\n...\n#other libraries here\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 3685378, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/97c9ff805f34ddca918c048eddea993f?s=128&d=identicon&r=PG&f=1", "display_name": "Schnappi", "link": "https://stackoverflow.com/users/3685378/schnappi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 593, "favorite_count": 1, "accepted_answer_id": 53881339, "answer_count": 1, "score": 1, "last_activity_date": 1545380469, "creation_date": 1544025480, "last_edit_date": 1544086102, "question_id": 53636155, "link": "https://stackoverflow.com/questions/53636155/static-libstdc-when-cross-compiling-for-arm-while-using-qt5", "title": "Static libstdc++ when cross-compiling for ARM while using Qt5", "body": "<p>I have a ARM platform with an old libstdc++. I'm cross-compiling the application from other platform and I wanted to use more advanced features of C++ language so I'm linking my libstdc++ statically. I'm using Conan for package manager with plenty of other dynamic libraries and everything is running smoothly.</p>\n\n<p>Problem arises when I try to add a totally new component of the application, which has been written in Qt5. Suddenly the stringstream have stopped working - the app doesn't crash, but the operator&lt;&lt;(int) resets the good bit in the stream.</p>\n\n<p>'objdump -TC' on the executable shows that lot of the libstdc++ functions are now imported (linked dynamically) instead of linked statically.</p>\n\n<p>Example:</p>\n\n<pre><code>0000000000000000      DF *UND*  0000000000000000  Qt_5        std::ostream::operator&lt;&lt;(int)\n</code></pre>\n\n<p>Notice the version \"Qt_5\".</p>\n\n<p>I have also disassembled my executable to see that all calls to std::ostream::operator&lt;&lt;(int) are indeed calling imported symbol.</p>\n\n<p>When I have tried to resolve libstdc++ symbols manually before g++ linker with </p>\n\n<pre><code>/usr/bin/aarch64-linux-gnu-ld -r -o out.o main.cpp.o /usr/lib/gcc-cross/aarch64-linux-gnu/7/libstdc++.a\n</code></pre>\n\n<p>it worked as expected and there weren't any imported symbols related to ostream in the executable anymore and the stringstream works.</p>\n\n<p>Any ideas regarding my situation?</p>\n\n<p>Below is the command for linking executed by CLion. With this combination the application doesn't  work.</p>\n\n<pre><code>/usr/bin/aarch64-linux-gnu-g++-7  -fPIC -static-libstdc++ -Wall -Wextra -pedantic -Weffc++ -Wshadow -Wstrict-aliasing -Woverloaded-virtual -Wdelete-non-virtual-dtor -Wno-unused-function -Wno-missing-braces  -g -rdynamic  -L/enviro/rv-linux/lib-target -L/enviro/rv-linux/targetfs/lib/aarch64-linux-gnu -Wl,-rpath,$ORIGIN/lib -Wl,-rpath,/enviro/rv-linux/lib-target  CMakeFiles/wwrk_core.dir/src/main.cpp.o  -o bin/wwrk_core -Wl,-rpath,/usr/local/ukita-1.2/targets/aarch64-Linux/lib:/usr/local/cuda/targets/aarch64-linux/lib:/usr/local/cuda/targets/aarch64-linux/lib/stubs:/home/wwrk/.conan/data/mosquitto/1.4.15/bincrafters/stable/package/239078edbc0e8a96a9afdcfb7771317f2343a587/lib:/home/wwrk/.conan/data/OpenSSL/1.0.2o/conan/stable/package/7dd5184ee7a9467ffac8b88942d33774d1b75240/lib:/home/wwrk/.conan/data/Qt/5.11.2/bincrafters/stable/package/07bff7c90a07530ee2d9520bd150b7df4c4bcfd4/lib:/home/wwrk/.conan/data/Qt/5.11.2/bincrafters/stable/package/e7c3abf447189e454cc0dd043a04a91b61a54baf/lib:/usr/local/ukita/samples/3rdparty/linux-aarch64/special_Xlibs/lib: lib/libAnd_driver.a lib/libAndCore-dw.a /home/wwrk/.conan/data/OpenCV/3.4.0/wwrkauto/stable/package/2a79b1e5f5284318af316f0a3dad26795379cec1/lib/libopencv_dnn.a /home/wwrk/.conan/data/OpenCV/3.4.0/wwrkauto/stable/package/2a79b1e5f5284318af316f0a3dad26795379cec1/lib/libopencv_ml.a /home/wwrk/.conan/data/OpenCV/3.4.0/wwrkauto/stable/package/2a79b1e5f5284318af316f0a3dad26795379cec1/lib/libopencv_objdetect.a /home/wwrk/.conan/data/OpenCV/3.4.0/wwrkauto/stable/package/2a79b1e5f5284318af316f0a3dad26795379cec1/lib/libopencv_shape.a /home/wwrk/.conan/data/OpenCV/3.4.0/wwrkauto/stable/package/2a79b1e5f5284318af316f0a3dad26795379cec1/lib/libopencv_stitching.a /home/wwrk/.conan/data/OpenCV/3.4.0/wwrkauto/stable/package/2a79b1e5f5284318af316f0a3dad26795379cec1/lib/libopencv_superres.a /home/wwrk/.conan/data/OpenCV/3.4.0/wwrkauto/stable/package/2a79b1e5f5284318af316f0a3dad26795379cec1/lib/libopencv_videostab.a /home/wwrk/.conan/data/OpenCV/3.4.0/wwrkauto/stable/package/2a79b1e5f5284318af316f0a3dad26795379cec1/share/OpenCV/3rdparty/lib/liblibprotobuf.a /home/wwrk/.conan/data/OpenCV/3.4.0/wwrkauto/stable/package/2a79b1e5f5284318af316f0a3dad26795379cec1/lib/libopencv_calib3d.a /home/wwrk/.conan/data/OpenCV/3.4.0/wwrkauto/stable/package/2a79b1e5f5284318af316f0a3dad26795379cec1/lib/libopencv_features2d.a /home/wwrk/.conan/data/OpenCV/3.4.0/wwrkauto/stable/package/2a79b1e5f5284318af316f0a3dad26795379cec1/lib/libopencv_flann.a /home/wwrk/.conan/data/OpenCV/3.4.0/wwrkauto/stable/package/2a79b1e5f5284318af316f0a3dad26795379cec1/lib/libopencv_highgui.a -lgthread-2.0 /home/wwrk/.conan/data/OpenCV/3.4.0/wwrkauto/stable/package/2a79b1e5f5284318af316f0a3dad26795379cec1/lib/libopencv_photo.a /home/wwrk/.conan/data/OpenCV/3.4.0/wwrkauto/stable/package/2a79b1e5f5284318af316f0a3dad26795379cec1/lib/libopencv_video.a /home/wwrk/.conan/data/OpenCV/3.4.0/wwrkauto/stable/package/2a79b1e5f5284318af316f0a3dad26795379cec1/lib/libopencv_videoio.a /home/wwrk/.conan/data/OpenCV/3.4.0/wwrkauto/stable/package/2a79b1e5f5284318af316f0a3dad26795379cec1/lib/libopencv_imgcodecs.a /home/wwrk/.conan/data/OpenCV/3.4.0/wwrkauto/stable/package/2a79b1e5f5284318af316f0a3dad26795379cec1/share/OpenCV/3rdparty/lib/libIlmImf.a /home/wwrk/.conan/data/OpenCV/3.4.0/wwrkauto/stable/package/2a79b1e5f5284318af316f0a3dad26795379cec1/lib/libopencv_imgproc.a /home/wwrk/.conan/data/OpenCV/3.4.0/wwrkauto/stable/package/2a79b1e5f5284318af316f0a3dad26795379cec1/lib/libopencv_core.a -lgstbase-1.0 -lgstreamer-1.0 -lgobject-2.0 -lglib-2.0 -lgstvideo-1.0 -lgstapp-1.0 -lgstriff-1.0 -lgstpbutils-1.0 /home/wwrk/.conan/data/jasper/2.0.14/conan/stable/package/06e35b3c6107222c50e1c22eae68c58d483cba15/lib/libjasper.a /home/wwrk/.conan/data/libjpeg/9b/bincrafters/stable/package/e6d649ca4bea46777eed92a123bea4d2c1892ea8/lib/libjpeg.a /home/wwrk/.conan/data/libpng/1.6.34/bincrafters/stable/package/42e51281839943ca78313263055e6869dd2d2f9a/lib/libpng16.a /home/wwrk/.conan/data/libwebp/0.6.1/bincrafters/stable/package/b85d569a3b57b77ebc11d00bbbe398c7753b32be/lib/libwebpdemux.a /home/wwrk/.conan/data/libwebp/0.6.1/bincrafters/stable/package/b85d569a3b57b77ebc11d00bbbe398c7753b32be/lib/libwebp.a /home/wwrk/.conan/data/libwebp/0.6.1/bincrafters/stable/package/b85d569a3b57b77ebc11d00bbbe398c7753b32be/lib/libwebpdecoder.a -lusb-1.0 -ludev /usr/local/ukita-1.2/targets/aarch64-Linux/lib/libukita.so /usr/local/cuda/targets/aarch64-linux/lib/libcudart.so /enviro/rv-linux/targetfs/usr/lib/aarch64-linux-gnu/libgstsdp-1.0.so /enviro/rv-linux/targetfs/usr/lib/aarch64-linux-gnu/libgstvideo-1.0.so /enviro/rv-linux/targetfs/usr/lib/aarch64-linux-gnu/libgstapp-1.0.so /enviro/rv-linux/targetfs/usr/lib/aarch64-linux-gnu/libgstbase-1.0.so /enviro/rv-linux/targetfs/usr/lib/aarch64-linux-gnu/libgstnet-1.0.so /enviro/rv-linux/targetfs/usr/lib/aarch64-linux-gnu/libgstreamer-1.0.so /enviro/rv-linux/targetfs/usr/lib/aarch64-linux-gnu/libgio-2.0.so /enviro/rv-linux/targetfs/usr/lib/aarch64-linux-gnu/libgobject-2.0.so /enviro/rv-linux/targetfs/usr/lib/aarch64-linux-gnu/libglib-2.0.so /usr/local/cuda/targets/aarch64-linux/lib/stubs/libcublas.so -lstdc++fs -lcuda lib/libAndCore-core.a -lpthread -lrt /home/wwrk/.conan/data/mosquitto/1.4.15/bincrafters/stable/package/239078edbc0e8a96a9afdcfb7771317f2343a587/lib/libmosquitto.so /home/wwrk/.conan/data/mosquitto/1.4.15/bincrafters/stable/package/239078edbc0e8a96a9afdcfb7771317f2343a587/lib/libmosquittopp.so -ldl /home/wwrk/.conan/data/OpenSSL/1.0.2o/conan/stable/package/7dd5184ee7a9467ffac8b88942d33774d1b75240/lib/libssl.so /home/wwrk/.conan/data/OpenSSL/1.0.2o/conan/stable/package/7dd5184ee7a9467ffac8b88942d33774d1b75240/lib/libcrypto.so /home/wwrk/.conan/data/zlib/1.2.11/conan/stable/package/8fd38d381db52e2495321ce060b9f457656f6c8f/lib/libz.a /home/wwrk/.conan/data/c-ares/1.14.0/conan/stable/package/8fd38d381db52e2495321ce060b9f457656f6c8f/lib/libcares.a -lm /home/wwrk/.conan/data/yaml-cpp/0.6.2/bincrafters/stable/package/08f0f6b54224d0f59c7a23bfbaa25f463db315ae/lib/libyaml-cpp.a -latomic lib/libAndautoDashboard.a /home/wwrk/.conan/data/Qt/5.11.2/bincrafters/stable/package/e7c3abf447189e454cc0dd043a04a91b61a54baf/lib/libQt5Location.so.5.11.2 /home/wwrk/.conan/data/Qt/5.11.2/bincrafters/stable/package/e7c3abf447189e454cc0dd043a04a91b61a54baf/lib/libQt5PositioningQuick.so.5.11.2 /home/wwrk/.conan/data/Qt/5.11.2/bincrafters/stable/package/e7c3abf447189e454cc0dd043a04a91b61a54baf/lib/libQt5Positioning.so.5.11.2 /home/wwrk/.conan/data/Qt/5.11.2/bincrafters/stable/package/e7c3abf447189e454cc0dd043a04a91b61a54baf/lib/libQt53DQuick.so.5.11.2 /home/wwrk/.conan/data/Qt/5.11.2/bincrafters/stable/package/e7c3abf447189e454cc0dd043a04a91b61a54baf/lib/libQt5Quick.so.5.11.2 /home/wwrk/.conan/data/Qt/5.11.2/bincrafters/stable/package/e7c3abf447189e454cc0dd043a04a91b61a54baf/lib/libQt5Qml.so.5.11.2 /home/wwrk/.conan/data/Qt/5.11.2/bincrafters/stable/package/e7c3abf447189e454cc0dd043a04a91b61a54baf/lib/libQt53DExtras.so.5.11.2 /home/wwrk/.conan/data/Qt/5.11.2/bincrafters/stable/package/e7c3abf447189e454cc0dd043a04a91b61a54baf/lib/libQt53DInput.so.5.11.2 /home/wwrk/.conan/data/Qt/5.11.2/bincrafters/stable/package/e7c3abf447189e454cc0dd043a04a91b61a54baf/lib/libQt5Gamepad.so.5.11.2 /home/wwrk/.conan/data/Qt/5.11.2/bincrafters/stable/package/e7c3abf447189e454cc0dd043a04a91b61a54baf/lib/libQt53DLogic.so.5.11.2 /home/wwrk/.conan/data/Qt/5.11.2/bincrafters/stable/package/e7c3abf447189e454cc0dd043a04a91b61a54baf/lib/libQt53DAnimation.so.5.11.2 /home/wwrk/.conan/data/Qt/5.11.2/bincrafters/stable/package/e7c3abf447189e454cc0dd043a04a91b61a54baf/lib/libQt53DRender.so.5.11.2 /home/wwrk/.conan/data/Qt/5.11.2/bincrafters/stable/package/e7c3abf447189e454cc0dd043a04a91b61a54baf/lib/libQt53DCore.so.5.11.2 /home/wwrk/.conan/data/Qt/5.11.2/bincrafters/stable/package/07bff7c90a07530ee2d9520bd150b7df4c4bcfd4/lib/libQt5Network.so.5.11.2 /home/wwrk/.conan/data/Qt/5.11.2/bincrafters/stable/package/e7c3abf447189e454cc0dd043a04a91b61a54baf/lib/libQt5Widgets.so.5.11.2 /home/wwrk/.conan/data/Qt/5.11.2/bincrafters/stable/package/e7c3abf447189e454cc0dd043a04a91b61a54baf/lib/libQt5Gui.so.5.11.2 /home/wwrk/.conan/data/Qt/5.11.2/bincrafters/stable/package/07bff7c90a07530ee2d9520bd150b7df4c4bcfd4/lib/libQt5Core.so.5.11.2 -Wl,-Bstatic -lstdc++ -Wl,-Bdynamic -lX11 /home/wwrk/workdir/GST/libs/glfw/libglfw3.a -Wl,-Bstatic -lstdc++ -Wl,-Bdynamic -lX11 /home/wwrk/workdir/GST/libs/glfw/libglfw3.a /usr/local/ukita/samples/3rdparty/linux-aarch64/special_Xlibs/lib/libXcursor.so /usr/local/ukita/samples/3rdparty/linux-aarch64/special_Xlibs/lib/libXi.so /usr/local/ukita/samples/3rdparty/linux-aarch64/special_Xlibs/lib/libXrandr.so /usr/local/ukita/samples/3rdparty/linux-aarch64/special_Xlibs/lib/libXinerama.so /enviro/rv-linux/lib-target/libGLESv2.so.2 /enviro/rv-linux/targetfs/usr/lib/aarch64-linux-gnu/libdl.so -lEGL -lGLU \n</code></pre>\n\n<p>Thank you for answers.</p>\n"}, {"tags": ["c++", "arrays", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 6, "creation_date": 1544024964, "post_id": 53635975, "comment_id": 94131646, "body": "Everyone struggles with dynamic memory management. The trick is to not do it. Just use <code>std::array</code>, <code>std::vector</code> and if you have to <code>std::make_unique</code> to do it for you. If you never write <code>new</code> C++ becomes much easier."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1544024964, "post_id": 53635975, "comment_id": 94131647, "body": "If you use new, then you need to delete, just like if you malloc you need to free."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1544025529, "post_id": 53635975, "comment_id": 94132028, "body": "To reiterate and emphasize: never write <code>new</code> and <code>delete</code>. Ever. Just don&#39;t do it. Whoever taught you &quot;dynamic arrays&quot; did you a huge disservice. But if you, for some ungodly reason, must use <code>new</code>, your program has to execute exactly one <code>delete</code> for each <code>new</code> (and exactly one <code>delete[]</code> for each <code>new[]</code>)."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1544025903, "post_id": 53635975, "comment_id": 94132249, "body": "I remember BS saying in one of his talks: &quot;If you have a raw <code>new</code> in your code, you have a memory leak&quot; (refering to the fact that just matching the number of <code>new</code>s with the number of <code>delete</code>s isnt sufficient). Managing memory manually correctly is extremely difficult even for experienced ones. The trick is not to become a master in managing memory, but to become a master in not managing memory ;)"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1544026952, "post_id": 53635975, "comment_id": 94132820, "body": "@user463035818 There is a frustrating catch-22: One needs to grok manual memory management to fully understand just how bad idea it is to do so. If beginners aren&#39;t (eventually) taught to do it, some of them will inevitably think it&#39;s not so bad, since they don&#39;t know of all the traps yet."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1544027355, "post_id": 53635975, "comment_id": 94133096, "body": "@eerorika true, only because I had to learn the lesson the hard way, now I can truly appreciate every way of avoiding it ;)"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1544027448, "post_id": 53635975, "comment_id": 94133156, "body": "@eerorika the operative word is eventually."}, {"owner": {"reputation": 13, "user_id": 8947477, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zsQTAGFE4KE/AAAAAAAAAAI/AAAAAAAAIJk/gPpTBCjLmZ0/photo.jpg?sz=128", "display_name": "Sayed Abdullah Qutb", "link": "https://stackoverflow.com/users/8947477/sayed-abdullah-qutb"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1544127722, "post_id": 53635975, "comment_id": 94176450, "body": "@user463035818 Yeah I know, but we are forced to learn manual memory management in our course."}, {"owner": {"reputation": 13, "user_id": 8947477, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zsQTAGFE4KE/AAAAAAAAAAI/AAAAAAAAIJk/gPpTBCjLmZ0/photo.jpg?sz=128", "display_name": "Sayed Abdullah Qutb", "link": "https://stackoverflow.com/users/8947477/sayed-abdullah-qutb"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1544127802, "post_id": 53635975, "comment_id": 94176486, "body": "@n.m. Well I can&#39;t do anything but to learn it somehow. University rules, haha"}, {"owner": {"reputation": 13, "user_id": 8947477, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zsQTAGFE4KE/AAAAAAAAAAI/AAAAAAAAIJk/gPpTBCjLmZ0/photo.jpg?sz=128", "display_name": "Sayed Abdullah Qutb", "link": "https://stackoverflow.com/users/8947477/sayed-abdullah-qutb"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1544127822, "post_id": 53635975, "comment_id": 94176498, "body": "@MatthieuBrucher Thanks man, got it"}, {"owner": {"reputation": 13, "user_id": 8947477, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zsQTAGFE4KE/AAAAAAAAAAI/AAAAAAAAIJk/gPpTBCjLmZ0/photo.jpg?sz=128", "display_name": "Sayed Abdullah Qutb", "link": "https://stackoverflow.com/users/8947477/sayed-abdullah-qutb"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1544127861, "post_id": 53635975, "comment_id": 94176519, "body": "@nwp We are not allowed to use vector and array, thats why I need to do it the hard way. myself"}], "answers": [{"comments": [{"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 1, "creation_date": 1544025621, "post_id": 53636131, "comment_id": 94132079, "body": "Maybe mention stack memory and free store memory?"}, {"owner": {"reputation": 13, "user_id": 8947477, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zsQTAGFE4KE/AAAAAAAAAAI/AAAAAAAAIJk/gPpTBCjLmZ0/photo.jpg?sz=128", "display_name": "Sayed Abdullah Qutb", "link": "https://stackoverflow.com/users/8947477/sayed-abdullah-qutb"}, "edited": false, "score": 0, "creation_date": 1544127291, "post_id": 53636131, "comment_id": 94176235, "body": "Thanks alot, I got it now. I would surely try to avoid using <code>new</code> and <code>delete</code> but the thing is I have to learn it for my university lessons. Thanks again"}], "tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": true, "score": 1, "last_activity_date": 1544025395, "creation_date": 1544025395, "answer_id": 53636131, "question_id": 53635975, "link": "https://stackoverflow.com/questions/53635975/using-destructor-is-for-deleting-only-dynamically-allocated-arrays-or-all-arrays/53636131#53636131", "title": "Using destructor is for deleting only dynamically allocated arrays or all arrays?", "body": "<blockquote>\n  <p>But what if we have a normal array, do I need to include a delete statement in the destructor for this normal array too? or the program will do that automatically? for example, I have a normal array like this <code>int myArray[];</code> and in my destructor, should I include this: <code>delete[] myArray;</code> ?</p>\n</blockquote>\n\n<p>No. If you don't <code>new[]</code> an array, then you don't need to <code>delete[]</code> it. Everything else is done automatically. This is why using <code>std::array</code>, <code>std::vector</code> etc. is so great: There is no need to write <code>new[]</code> when you use them, so you don't have to worry that you maybe forgot a <code>delete[]</code>.</p>\n\n<blockquote>\n  <p><em>\"I know that when we have a pointer to an array, it means it is dynamically created\"</em></p>\n</blockquote>\n\n<p>That is not correct. You can take a pointer to basically anything, including stack variables. Dynamic allocation generally gives you back a pointer (which is probably where the confusion stems from) but not every pointer comes from dynamic allocation. Consider this:</p>\n\n<pre><code>void foo()\n{\n    int a;\n    int* b = &amp;a; // No dynamic allocation.\n}\n</code></pre>\n\n<p>Again, since there is no <code>new</code> here, there should be no <code>delete</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 8947477, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zsQTAGFE4KE/AAAAAAAAAAI/AAAAAAAAIJk/gPpTBCjLmZ0/photo.jpg?sz=128", "display_name": "Sayed Abdullah Qutb", "link": "https://stackoverflow.com/users/8947477/sayed-abdullah-qutb"}, "edited": false, "score": 0, "creation_date": 1544127371, "post_id": 53636252, "comment_id": 94176277, "body": "Thanks a lot, I got it completely now."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1544026507, "last_edit_date": 1544026507, "creation_date": 1544025820, "answer_id": 53636252, "question_id": 53635975, "link": "https://stackoverflow.com/questions/53635975/using-destructor-is-for-deleting-only-dynamically-allocated-arrays-or-all-arrays/53636252#53636252", "title": "Using destructor is for deleting only dynamically allocated arrays or all arrays?", "body": "<blockquote>\n  <p>I know that when we have a pointer to an array, it means it is dynamically created</p>\n</blockquote>\n\n<p>No. That induction is not correct. A pointer can also point to non-dynamically created arrays.</p>\n\n<blockquote>\n  <p>so I should delete it later in my destructor.</p>\n</blockquote>\n\n<p>If your class instance is responsible for destruction of that array then destructor is indeed one place where that should probably be done.</p>\n\n<blockquote>\n  <p>do I need to include a delete statement in the destructor for this normal array too? for example, I have a normal array like this int myArray[];</p>\n</blockquote>\n\n<p>No. Only objects created with <code>new</code> are destyroyed with <code>delete</code>. And only objects created with <code>new[]</code> are destroyed with <code>delete[]</code>. Not anything else.</p>\n\n<blockquote>\n  <p>or the program will do that automatically?</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<p>Objects with automatic storage duration are destroyed automatically at the end of the scope where they are declared. That is what the name of the storage class comes from. Objects with static storage duration are destroyed after <code>main</code> returns. Temporary objects are destroyed at the end of the full expression (unless their lifetime is extended by binding the object to a reference). Member variables are destroyed when the super (not meaning base class in this context) object is destroyed.</p>\n\n<p>Only dynamically created objects must be destroyed manually.</p>\n\n<hr>\n\n<p>While it is useful to learn how it is done, there is quite rarely need to do manual memory management in C++. The standard library provides containers that do the hard work for you. Instead of dynamically creating an array, one would typically use <code>std::vector</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 8947477, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zsQTAGFE4KE/AAAAAAAAAAI/AAAAAAAAIJk/gPpTBCjLmZ0/photo.jpg?sz=128", "display_name": "Sayed Abdullah Qutb", "link": "https://stackoverflow.com/users/8947477/sayed-abdullah-qutb"}, "edited": false, "score": 0, "creation_date": 1544127521, "post_id": 53641782, "comment_id": 94176350, "body": "Thanks, I got it now. I was confused with these. The thing is we are not allowed to use <code>std::vector</code> or <code>std::array</code> , so thats why I have to manually do it."}], "tags": [], "owner": {"reputation": 23, "user_id": 9807513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b23d7e2d3c4ef560e013909a6b363a5?s=128&d=identicon&r=PG&f=1", "display_name": "emesel", "link": "https://stackoverflow.com/users/9807513/emesel"}, "is_accepted": false, "score": 1, "last_activity_date": 1544049161, "creation_date": 1544049161, "answer_id": 53641782, "question_id": 53635975, "link": "https://stackoverflow.com/questions/53635975/using-destructor-is-for-deleting-only-dynamically-allocated-arrays-or-all-arrays/53641782#53641782", "title": "Using destructor is for deleting only dynamically allocated arrays or all arrays?", "body": "<p>Memory management isn't easy for anyone, especially to those who are new to C++. I recommend looking into the terms <code>stack</code> and <code>heap</code>, which should hopefully clarify some things up.</p>\n\n<blockquote>\n  <p>I know that when we have a pointer to an array, it means it is dynamically created, so I should delete it later in my destructor.</p>\n</blockquote>\n\n<p>This isn't exactly true, a pointer is just a variable that holds the address (where a variable lives) of something. You can make a pointer to any variable like this:</p>\n\n<pre><code>int a = 5;\nint *aPtr = &amp;a;\n</code></pre>\n\n<p>This doesn't mean that <code>a</code> or <code>aPtr</code> are dynamic.</p>\n\n<p>However a pointer made like this would be dynamic and needs to be deleted:</p>\n\n<pre><code>int *aPtr = new int(5);\n</code></pre>\n\n<p>The biggest difference here is the <code>new</code> keyword. <code>new</code> makes dynamic memory (what is put onto the heap). Every time you use the <code>new</code> keyword, you should use the <code>delete</code> keyword to match with it.</p>\n\n<blockquote>\n  <p>But what if we have a normal array, do I need to include a delete statement in the destructor for this normal array too? or the program will do that automatically? for example, I have a normal array like this <code>int myArray[];</code> and in my destructor, should I include this: <code>delete[] myArray;</code> ?</p>\n</blockquote>\n\n<p>No, you wouldn't need to call <code>delete[] myArray;</code> because this array would be made on the stack. What I mean by that is that when you return out of the function that made this array, the array would be cleaned out of memory.</p>\n\n<p>An alternative to manually managing memory is to use the <code>std::array</code>, <code>std::vector</code>, or even smart pointers such as <code>std::unique_ptr</code> or <code>std::shared_ptr</code> that clean themselves up  after the reference to it is gone.</p>\n\n<p>I hope this helps!</p>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 8947477, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zsQTAGFE4KE/AAAAAAAAAAI/AAAAAAAAIJk/gPpTBCjLmZ0/photo.jpg?sz=128", "display_name": "Sayed Abdullah Qutb", "link": "https://stackoverflow.com/users/8947477/sayed-abdullah-qutb"}, "is_accepted": false, "score": 0, "last_activity_date": 1544127645, "creation_date": 1544127645, "answer_id": 53659090, "question_id": 53635975, "link": "https://stackoverflow.com/questions/53635975/using-destructor-is-for-deleting-only-dynamically-allocated-arrays-or-all-arrays/53659090#53659090", "title": "Using destructor is for deleting only dynamically allocated arrays or all arrays?", "body": "<p>What I got from the answers is that I don't need to <code>delete</code> anything if <code>new</code> is not triggered. Same goes to <code>delete[]</code> and <code>new[]</code> . Normally created arrays like the one in my question <code>int myArray[]</code> is not dynamically created, so it does not need to be dynamically deleted in destructor, meaning, the compiler will do the deleting part for me. Thanks all</p>\n"}], "owner": {"reputation": 13, "user_id": 8947477, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zsQTAGFE4KE/AAAAAAAAAAI/AAAAAAAAIJk/gPpTBCjLmZ0/photo.jpg?sz=128", "display_name": "Sayed Abdullah Qutb", "link": "https://stackoverflow.com/users/8947477/sayed-abdullah-qutb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "accepted_answer_id": 53636131, "answer_count": 4, "score": 0, "last_activity_date": 1544127645, "creation_date": 1544024875, "question_id": 53635975, "link": "https://stackoverflow.com/questions/53635975/using-destructor-is-for-deleting-only-dynamically-allocated-arrays-or-all-arrays", "title": "Using destructor is for deleting only dynamically allocated arrays or all arrays?", "body": "<p>I am new to C++ so I am struggling alot with memory management.\nI know that when we have a pointer to an array, it means it is dynamically created, so I should delete it later in my destructor. But what if we have a normal array, do I need to include a delete statement in the destructor for this normal array too? or the program will do that automatically?\nfor example, I have a normal array like this\n<code>int myArray[];</code>\nand in my destructor, should I include this:\n<code>delete[] myArray;</code>\n?\nThanks in advance,</p>\n"}, {"tags": ["c++", "c", "gnu-indent"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 5, "creation_date": 1544023049, "post_id": 53635322, "comment_id": 94130468, "body": "Why would you want that?!"}, {"owner": {"reputation": 2031, "user_id": 1114498, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/28c184063aa5fb8ab1303de158fa9bc8?s=128&d=identicon&r=PG", "display_name": "Necktwi", "link": "https://stackoverflow.com/users/1114498/necktwi"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 1, "creation_date": 1544023948, "post_id": 53635322, "comment_id": 94131031, "body": "just to minimize the patch and also I like. English got the space between word and braces."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1544023960, "post_id": 53635322, "comment_id": 94131040, "body": "<i>Why</i> is actually important here.  There&#39;s nothing inherently wrong with such code formatting, but be aware that code comprehension by persons not familiar with your code depends on the viewer&#39;s brain deciphering patterns - human brains don&#39;t see details well, they see patterns, and they see and understand familiar patterns better.  Using a rare formatting style will make your code a bit less easy to understand for others, and will also make it a bit harder for you to understand formats you don&#39;t use often as you&#39;re not as familiar with the pattern."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1544025277, "post_id": 53635322, "comment_id": 94131870, "body": "Well, the language is called &quot;C&quot;, not &quot;English&quot;. ;) Applying rules of a natural language to some artificial language just feels so ... wrong."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 2, "creation_date": 1544025817, "post_id": 53635322, "comment_id": 94132195, "body": "Only one question per post, please.  It is considered especially rude around these parts to add questions or make other major revisions to a post that has already been answered; make a whole new post for follow-up questions. Also, please read the <code>indent</code> documentation carefully and only ask further questions about specific formatting knobs if you really can&#39;t find them in there.  We&#39;ve already done you one favor looking up <code>-pcs</code>."}, {"owner": {"reputation": 2031, "user_id": 1114498, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/28c184063aa5fb8ab1303de158fa9bc8?s=128&d=identicon&r=PG", "display_name": "Necktwi", "link": "https://stackoverflow.com/users/1114498/necktwi"}, "edited": false, "score": 0, "creation_date": 1544026021, "post_id": 53635322, "comment_id": 94132313, "body": "gnu documentation is a crap. I think they twist for business"}], "answers": [{"tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": false, "score": 1, "last_activity_date": 1544023286, "creation_date": 1544023286, "answer_id": 53635471, "question_id": 53635322, "link": "https://stackoverflow.com/questions/53635322/how-do-i-set-space-between-function-name-and-parenthesis-with-gnu-indent/53635471#53635471", "title": "how do I set space between function name and parenthesis with gnu indent?", "body": "<p>I believe the option you want is <code>-pcs</code> or, in long form, <code>--space-after-procedure-calls</code>.  The most convenient place to find this information is the <a href=\"https://www.gnu.org/software/indent/manual/html_node/indent_17.html#SEC17\" rel=\"nofollow noreferrer\">long list of options to GNU indent</a> from its official manual.</p>\n"}, {"comments": [{"owner": {"reputation": 2031, "user_id": 1114498, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/28c184063aa5fb8ab1303de158fa9bc8?s=128&d=identicon&r=PG", "display_name": "Necktwi", "link": "https://stackoverflow.com/users/1114498/necktwi"}, "edited": false, "score": 0, "creation_date": 1544025634, "post_id": 53635475, "comment_id": 94132086, "body": "how to make <code>int *i</code> to <code>int* i</code>? I have updated my question."}], "tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": false, "score": 1, "last_activity_date": 1544023294, "creation_date": 1544023294, "answer_id": 53635475, "question_id": 53635322, "link": "https://stackoverflow.com/questions/53635322/how-do-i-set-space-between-function-name-and-parenthesis-with-gnu-indent/53635475#53635475", "title": "how do I set space between function name and parenthesis with gnu indent?", "body": "<p><code>-pcs</code> is the switch that adds space after the name of a function. Thus <code>-kr -pcs</code> will do what you want.</p>\n"}], "owner": {"reputation": 2031, "user_id": 1114498, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/28c184063aa5fb8ab1303de158fa9bc8?s=128&d=identicon&r=PG", "display_name": "Necktwi", "link": "https://stackoverflow.com/users/1114498/necktwi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1544026261, "creation_date": 1544022722, "last_edit_date": 1544026261, "question_id": 53635322, "link": "https://stackoverflow.com/questions/53635322/how-do-i-set-space-between-function-name-and-parenthesis-with-gnu-indent", "title": "how do I set space between function name and parenthesis with gnu indent?", "body": "<p>With gnu-<code>indent</code> how to change</p>\n\n<pre><code>int i = fact(n);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>int i = fact (n);\n</code></pre>\n\n<p><code>-gnu</code> formats it so but I use <code>-kr</code>.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1544022630, "post_id": 53635279, "comment_id": 94130219, "body": "What are all those classes?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 6, "creation_date": 1544022639, "post_id": 53635279, "comment_id": 94130225, "body": "This is assignment, not construction.  Sounds like you could use a <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a>"}, {"owner": {"reputation": 1779, "user_id": 1065992, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sWiDT.png?s=128&g=1", "display_name": "Blood-HaZaRd", "link": "https://stackoverflow.com/users/1065992/blood-hazard"}, "edited": false, "score": 0, "creation_date": 1544022742, "post_id": 53635279, "comment_id": 94130293, "body": "copy constructor is in invoked when you declare an object and you intialize it with already an exiting object like <code>Obj B = A</code>with A an existing Obj var."}, {"owner": {"reputation": 1413, "user_id": 7847611, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/89fb99c1c25eefca878428573e0869fd?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre Baret", "link": "https://stackoverflow.com/users/7847611/pierre-baret"}, "edited": false, "score": 0, "creation_date": 1544022822, "post_id": 53635279, "comment_id": 94130337, "body": "Can&#39;t you define a copy constructor for someClass and try it by yourself?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 1413, "user_id": 7847611, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/89fb99c1c25eefca878428573e0869fd?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre Baret", "link": "https://stackoverflow.com/users/7847611/pierre-baret"}, "edited": false, "score": 0, "creation_date": 1544023094, "post_id": 53635279, "comment_id": 94130500, "body": "@PierreBaret Proof by trial is dubious in c++. If you&#39;re testing something you aren&#39;t sure about, you have to keep the possibility of UB in the back of your mind."}, {"owner": {"reputation": 1413, "user_id": 7847611, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/89fb99c1c25eefca878428573e0869fd?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre Baret", "link": "https://stackoverflow.com/users/7847611/pierre-baret"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1544023442, "post_id": 53635279, "comment_id": 94130714, "body": "@Fran&#231;oisAndrieux I mean that would be another (better?) question : is this situation an undefined behavior or not?"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1544026332, "post_id": 53635279, "comment_id": 94132473, "body": "Note that snippet implies you have a data member of <code>SomeClassB</code> whose name is the same as it&#39;s type (<code>someClassA someClassA;</code>), which will make it hard to use the <i>type</i> <code>someClassA</code> within the scope of <code>SomeClassB</code>. You should probably change the name of that data member."}, {"owner": {"reputation": 37, "user_id": 8360543, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dER0uccLvXY/AAAAAAAAAAI/AAAAAAAAAAA/Xiqw3ByHNYk/photo.jpg?sz=128", "display_name": "graziegrazie", "link": "https://stackoverflow.com/users/8360543/graziegrazie"}, "edited": false, "score": 0, "creation_date": 1545310918, "post_id": 53635279, "comment_id": 94585384, "body": "&gt;SergeyA Those are sample classes to show what I mean. Sorry for my poor explanation.  &gt;NathanOliver  Thank you for your answer. I&#39;m not familiar with C++. I&#39;ll check it.   &gt;Blood-HaZaRd Thank you for your detail answer. I understand it!"}], "answers": [{"comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1544023934, "post_id": 53635517, "comment_id": 94131021, "body": "Assignment will be invoked, but not necessarily copy assignment."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1544023954, "post_id": 53635517, "comment_id": 94131037, "body": "ah ok, sorry :)"}, {"owner": {"reputation": 37, "user_id": 8360543, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dER0uccLvXY/AAAAAAAAAAI/AAAAAAAAAAA/Xiqw3ByHNYk/photo.jpg?sz=128", "display_name": "graziegrazie", "link": "https://stackoverflow.com/users/8360543/graziegrazie"}, "edited": false, "score": 0, "creation_date": 1545311367, "post_id": 53635517, "comment_id": 94585568, "body": "&gt; eerorika Thank you for your answer. You resolved my question!"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 0, "last_activity_date": 1544023397, "creation_date": 1544023397, "answer_id": 53635517, "question_id": 53635279, "link": "https://stackoverflow.com/questions/53635279/if-pass-by-reference-object-is-substiuted-for-variable-in-function-does-it-call/53635517#53635517", "title": "If pass-by-reference object is substiuted for variable in function, does it call copy constructor?", "body": "<p>No, that is an assignment expression. Copy assignment operator will be called. Assuming <code>obj_b.someClassA</code> is of type <code>someClassA</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 8360543, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dER0uccLvXY/AAAAAAAAAAI/AAAAAAAAAAA/Xiqw3ByHNYk/photo.jpg?sz=128", "display_name": "graziegrazie", "link": "https://stackoverflow.com/users/8360543/graziegrazie"}, "edited": false, "score": 1, "creation_date": 1545311483, "post_id": 53635709, "comment_id": 94585625, "body": "&gt; KYL3R Thank you so much for your detail answer."}, {"owner": {"reputation": 2233, "user_id": 5967872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23a299a971540f5017d53071e2a9c3d4?s=128&d=identicon&r=PG&f=1", "display_name": "KYL3R", "link": "https://stackoverflow.com/users/5967872/kyl3r"}, "reply_to_user": {"reputation": 37, "user_id": 8360543, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dER0uccLvXY/AAAAAAAAAAI/AAAAAAAAAAA/Xiqw3ByHNYk/photo.jpg?sz=128", "display_name": "graziegrazie", "link": "https://stackoverflow.com/users/8360543/graziegrazie"}, "edited": false, "score": 0, "creation_date": 1545312565, "post_id": 53635709, "comment_id": 94586214, "body": "leave a like or accept the answer, please. If you need more details, don&#39;t hesitate to comment or extend your question post."}, {"owner": {"reputation": 37, "user_id": 8360543, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dER0uccLvXY/AAAAAAAAAAI/AAAAAAAAAAA/Xiqw3ByHNYk/photo.jpg?sz=128", "display_name": "graziegrazie", "link": "https://stackoverflow.com/users/8360543/graziegrazie"}, "edited": false, "score": 0, "creation_date": 1545321878, "post_id": 53635709, "comment_id": 94591528, "body": "Thank you for information. I accepted the answer. I&#39;m not used to use this site, so thank you."}], "tags": [], "owner": {"reputation": 2233, "user_id": 5967872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23a299a971540f5017d53071e2a9c3d4?s=128&d=identicon&r=PG&f=1", "display_name": "KYL3R", "link": "https://stackoverflow.com/users/5967872/kyl3r"}, "is_accepted": true, "score": 0, "last_activity_date": 1544023996, "creation_date": 1544023996, "answer_id": 53635709, "question_id": 53635279, "link": "https://stackoverflow.com/questions/53635279/if-pass-by-reference-object-is-substiuted-for-variable-in-function-does-it-call/53635709#53635709", "title": "If pass-by-reference object is substiuted for variable in function, does it call copy constructor?", "body": "<p><strong>In the line you commented</strong>, there is no difference when using <code>someClassA&amp;</code> (reference) or <code>someClassA</code> (copy)</p>\n\n<p>A reference is an <strong>alias</strong> [1] (another name) for the same variable. So you don't pass a pointer, and you don't copy the variable, but you send the reference-to-the-variable. You can use the reference just like the variable itself, because it IS actually referencing the original variable.</p>\n\n<p>The commented line isn't affected by this at all. However the copy constructor is called when you call:</p>\n\n<pre><code>obj_x = someClassA(obj_a); // here, obj_a is given to the (copy-)constructor of someClassA.\n</code></pre>\n\n<p>What you have is an assignment like @eerorika said.</p>\n\n<p>You <strong>can</strong> specify a custom assignment operator <code>operator=</code> and handle the action yourself.</p>\n\n<hr>\n\n<p>More info about references/aliases and how they differ from pointers:</p>\n\n<p>[1] <a href=\"https://stackoverflow.com/questions/21884825/reference-vs-pointer\">Reference vs. pointer</a></p>\n"}], "owner": {"reputation": 37, "user_id": 8360543, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dER0uccLvXY/AAAAAAAAAAI/AAAAAAAAAAA/Xiqw3ByHNYk/photo.jpg?sz=128", "display_name": "graziegrazie", "link": "https://stackoverflow.com/users/8360543/graziegrazie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 53635709, "answer_count": 2, "score": -2, "last_activity_date": 1544023996, "creation_date": 1544022586, "last_edit_date": 1544022908, "question_id": 53635279, "link": "https://stackoverflow.com/questions/53635279/if-pass-by-reference-object-is-substiuted-for-variable-in-function-does-it-call", "title": "If pass-by-reference object is substiuted for variable in function, does it call copy constructor?", "body": "<p>I'm wondering if copy constructor is called or not. If the answer is \"No\", I don't know what happens. Could you tell me if you know answer for my question?</p>\n\n<pre><code>void func1(someClassA&amp; obj_a)\n{\n    SomeClassB obj_b;\n    obj_b.someClassA = obj_a;    // this is the part I want to ask you!\n    obj_b.parameter  = something;\n\n    func2(obj_b);\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "approximate-nn-searching"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1544022004, "post_id": 53635066, "comment_id": 94129803, "body": "I don&#39;t understand.  There are already a plethora of examples and questions regarding reading into a 2d array.  Search the internet for &quot;C++ read file matrix&quot; or &quot;c++ read file 2D array&quot;."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1544022021, "post_id": 53635066, "comment_id": 94129817, "body": "Doing <code>while (myfile.good())</code> is almost the same as <code>while (!myfile.eof())</code>, and <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">you should not not do that</a>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1544022044, "post_id": 53635066, "comment_id": 94129825, "body": "Why do you want to do that? The 1D array is much better than any 2D shenanigans. Can&#39;t you just remap indexes for access to the 1D array that you&#39;ve already got?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1544022057, "post_id": 53635066, "comment_id": 94129827, "body": "@Someprogrammerdude In this case, it&#39;s fine. There is no &quot;work&quot; done after the final read is attempted, so the condition is evaluated at the right time. I do agree that re-arranging the loop could produce more idiomatic code."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1544022134, "post_id": 53635066, "comment_id": 94129887, "body": "Is the data in text format or binary format?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1544022405, "post_id": 53635066, "comment_id": 94130075, "body": "So there is no answer to give here. You are doing the right thing by returning a 1d array. Don&#39;t change that. It&#39;s better."}, {"owner": {"reputation": 69, "user_id": 10462205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9b81ce804c8fb28fbe083910583badd?s=128&d=identicon&r=PG&f=1", "display_name": "Hparsons28", "link": "https://stackoverflow.com/users/10462205/hparsons28"}, "edited": false, "score": 0, "creation_date": 1544022691, "post_id": 53635066, "comment_id": 94130260, "body": "Ok thanks, the reasons I was thinking of the 2d is because one of the demonstrators in our workshop at university told me I needed to put it into a 2D array rather than keep it in a 1D array."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1544022741, "post_id": 53635066, "comment_id": 94130292, "body": "It&#39;s very annoying when teachers are doing the wrong thing. They should go back to training themselves."}, {"owner": {"reputation": 1171, "user_id": 1172100, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1HGZk.jpg?s=128&g=1", "display_name": "aj.toulan", "link": "https://stackoverflow.com/users/1172100/aj-toulan"}, "edited": false, "score": 0, "creation_date": 1544022772, "post_id": 53635066, "comment_id": 94130307, "body": "It may be helpful to convert to a 2D array later, but not for easy of use, rather for processor pre-fetching optimization. If your data-set is a rather small size, say under 1,000 by 1,000 indexes I wouldn&#39;t worry about it. <a href=\"http://katecpp.github.io/cache-prefetching/\" rel=\"nofollow noreferrer\">katecpp.github.io/cache-prefetching</a>"}, {"owner": {"reputation": 69, "user_id": 10462205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9b81ce804c8fb28fbe083910583badd?s=128&d=identicon&r=PG&f=1", "display_name": "Hparsons28", "link": "https://stackoverflow.com/users/10462205/hparsons28"}, "edited": false, "score": 1, "creation_date": 1544022935, "post_id": 53635066, "comment_id": 94130405, "body": "Yes I agree Mattihieu. Its the reason ive began to use stackoverflow, because you can usually get better results and much more detailed answers."}, {"owner": {"reputation": 1171, "user_id": 1172100, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1HGZk.jpg?s=128&g=1", "display_name": "aj.toulan", "link": "https://stackoverflow.com/users/1172100/aj-toulan"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1544023042, "post_id": 53635066, "comment_id": 94130463, "body": "@MatthieuBrucher, it&#39;s possible there is a specific exercise they want the OP to go through so it becomes muscle memory. Learning best practice is easy in the field, but only if you have all the right tools at your disposal. I know it&#39;s frustrating to see bad practice exercises, but it&#39;s not the end all of their education."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 1171, "user_id": 1172100, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1HGZk.jpg?s=128&g=1", "display_name": "aj.toulan", "link": "https://stackoverflow.com/users/1172100/aj-toulan"}, "edited": false, "score": 1, "creation_date": 1544023087, "post_id": 53635066, "comment_id": 94130496, "body": "@aj it&#39;s always going to be better. You can add some cache line alignment to make it better, but 1d array is what you want for performance, not a 2d array because of the additional memory indirection. Even if it&#39;s looking at a 1d array."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 1171, "user_id": 1172100, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1HGZk.jpg?s=128&g=1", "display_name": "aj.toulan", "link": "https://stackoverflow.com/users/1172100/aj-toulan"}, "edited": false, "score": 0, "creation_date": 1544023172, "post_id": 53635066, "comment_id": 94130548, "body": "@aj I disagree. That&#39;s where they should be taught good practices. Using a 2d array instead of a 1d is not. There is ample proof of that."}, {"owner": {"reputation": 1171, "user_id": 1172100, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1HGZk.jpg?s=128&g=1", "display_name": "aj.toulan", "link": "https://stackoverflow.com/users/1172100/aj-toulan"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1544023212, "post_id": 53635066, "comment_id": 94130580, "body": "@MatthieuBrucher, but if you&#39;re creating the 1D array row by row and you access a column, you&#39;re going to prefetch a whole row. Is it not more performant to transpose the array?"}, {"owner": {"reputation": 1171, "user_id": 1172100, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1HGZk.jpg?s=128&g=1", "display_name": "aj.toulan", "link": "https://stackoverflow.com/users/1172100/aj-toulan"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1544023432, "post_id": 53635066, "comment_id": 94130705, "body": "@MatthieuBrucher, just to be clear, I was always taught to use a 1D array because it&#39;s faster, I&#39;m just curious as to what&#39;s the best thing to do in a variety of circumstances."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1544023465, "post_id": 53635066, "comment_id": 94130722, "body": "This is a different problem, that has nothing to do with the problem at hand. Using a 2d array doesn&#39;t solve the prefetch problem."}, {"owner": {"reputation": 1171, "user_id": 1172100, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1HGZk.jpg?s=128&g=1", "display_name": "aj.toulan", "link": "https://stackoverflow.com/users/1172100/aj-toulan"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1544023497, "post_id": 53635066, "comment_id": 94130747, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/184764/discussion-between-aj-toulan-and-matthieu-brucher\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 3, "last_activity_date": 1544022686, "creation_date": 1544022686, "answer_id": 53635308, "question_id": 53635066, "link": "https://stackoverflow.com/questions/53635066/populating-an-array-from-a-txt-file/53635308#53635308", "title": "Populating an array from a .txt file", "body": "<p>Here is a more compact version of reading in a 2D matrix:  </p>\n\n<pre><code>int quantity = sizeR * sizeC;\ndouble * matrix = new double [quantity];\ndouble value = 0.0;\ndouble * p_cell = matrix;\n//...\nwhile ((myfile &gt;&gt; value) &amp;&amp; (quantity &gt; 0))\n{\n  *p_cell++ = value;\n  --quantity;\n}\n</code></pre>\n\n<p>In the above code snippet, a pointer is used to point to the next slot or cell of the matrix (2D array).  The pointer is incremented after each read.  </p>\n\n<p>The <code>quantity</code> is decremented as a safety check to prevent buffer overrun.</p>\n"}, {"tags": [], "owner": {"reputation": 1474, "user_id": 3659011, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8aLi8.jpg?s=128&g=1", "display_name": "Adam Zahran", "link": "https://stackoverflow.com/users/3659011/adam-zahran"}, "is_accepted": false, "score": 0, "last_activity_date": 1544036036, "last_edit_date": 1544036036, "creation_date": 1544023273, "answer_id": 53635465, "question_id": 53635066, "link": "https://stackoverflow.com/questions/53635066/populating-an-array-from-a-txt-file/53635465#53635465", "title": "Populating an array from a .txt file", "body": "<p>Assuming every double returned represents a pixel. You can define a function that retrieves pixels like so:</p>\n\n<pre><code>double get_pixel(int x, int y, double* data, int sizeC)\n{\n    return data[x + y*sizeC];\n}\n</code></pre>\n\n<p>Where <code>sizeC</code> is the width of the image (number of columns).</p>\n\n<p>You can then use the function above to fill your 2D array like so:</p>\n\n<pre><code>for(int i = 0; i &lt; sizeC; i++)\n    for(int j = 0; j &lt; sizeR; j++)\n        my2Darray[i][j] = get_pixel(i, j, data, sizeC);\n</code></pre>\n\n<p>But then notice how unnecessary this is. You don't really need a 2D array :) keep it simple and efficient. </p>\n\n<p>The function above could be a part of a struct that represents the Image where you'd have sizeC, sizeR and data defined as members.</p>\n\n<pre><code>struct Image\n{\n    int sizeC;\n    int sizeR;\n    double* data;\n\n    get_pixel(int x, int y)\n    {\n        return data[x + y*sizeC];\n    }\n};\n</code></pre>\n\n<p>Then to access the image pixels you can simply do:</p>\n\n<pre><code>Image img;\n// read image data and stuff\ndouble p = img.get_pixel(4, 2);\n</code></pre>\n\n<p>You can even make it look prettier by overriding the operator() instead of get_pixel so retrieving the pixel would look something like:</p>\n\n<pre><code>double p = img(4, 2);\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 10462205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9b81ce804c8fb28fbe083910583badd?s=128&d=identicon&r=PG&f=1", "display_name": "Hparsons28", "link": "https://stackoverflow.com/users/10462205/hparsons28"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1544036036, "creation_date": 1544021844, "last_edit_date": 1544023027, "question_id": 53635066, "link": "https://stackoverflow.com/questions/53635066/populating-an-array-from-a-txt-file", "title": "Populating an array from a .txt file", "body": "<p>I'm trying to populate an array from a .txt that I am reading. I am using this code that I am using as a function to read the file:</p>\n\n<pre><code>double* read_text(const char *fileName, int sizeR, int sizeC)\n{\n    double* data = new double[sizeR*sizeC];\n    int i = 0;\n    ifstream myfile(fileName);\n    if (myfile.is_open())\n    {\n\n        while (myfile.good())\n        {\n            if (i &gt; sizeR*sizeC - 1) break;\n            myfile &gt;&gt; *(data + i);\n            //cout &lt;&lt; *(data + i) &lt;&lt; ' '; // Displays converted data.\n            i++;\n        }\n        myfile.close();\n    }\n\n    else cout &lt;&lt; \"Unable to open file\";\n    //cout &lt;&lt; i;\n\n    return data;\n}\n</code></pre>\n\n<p>Now when I read the file I am trying to take the elements from the 1D data array and store them into a 2D array. </p>\n\n<p>I've tried to create an array in a public class, however I have no idea on how to move the data that I am reading to a 2D array.</p>\n\n<p>I know it's not very clear but basically I'm doing the nearest neighbour search algorithm to compare 2 images. I have taken one image and converted it into the values using this bit of code above. However now I am trying to store the data that I am reading into a 2D public array?</p>\n"}, {"tags": ["c++", "delphi", "c++builder"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1544025122, "post_id": 53635025, "comment_id": 94131760, "body": "Your code does not match your json, and you did not show any attempt to actually update the contents of the array. What exactly are you trying to accomplish, and what exactly are you having trouble with?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1544041296, "post_id": 53635025, "comment_id": 94139699, "body": "Have you looked at <code>TJSONArray</code>&#39;s methods instead, like <code>Add()</code> and <code>AddElement()</code>? Or its <code>Items[]</code> property?"}, {"owner": {"reputation": 149, "user_id": 10548418, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002062306660/picture?type=large", "display_name": "Aziz", "link": "https://stackoverflow.com/users/10548418/aziz"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1544041966, "post_id": 53635025, "comment_id": 94140041, "body": "@RemyLebeau I want to update the tokens array, I did not tried Add or AddElement because it&#39;s method name suggests to Add,  but I want  to update with new tokens array, I need to Set a value, overwrite existing value"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1544042928, "post_id": 53635025, "comment_id": 94140465, "body": "that is actually quite difficult to do with an array of objects (it would be easier with an array of strings, for instance)."}], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 10548418, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002062306660/picture?type=large", "display_name": "Aziz", "link": "https://stackoverflow.com/users/10548418/aziz"}, "edited": false, "score": 0, "creation_date": 1544045434, "post_id": 53640496, "comment_id": 94141631, "body": "Ok, this makes sense, because I spent time playing this without finding a proper way to achive this. So I trust your experience and will accept your answer next days if no other answer will offer a better solution. But do you know if it is better if I replace entirely object like: {&quot;source&quot;:&quot;aaaa&quot;,&quot;cluster&quot;:&quot;1&quot;,&quot;tokens&quot;:[{},{}]}"}, {"owner": {"reputation": 149, "user_id": 10548418, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002062306660/picture?type=large", "display_name": "Aziz", "link": "https://stackoverflow.com/users/10548418/aziz"}, "edited": false, "score": 0, "creation_date": 1544045668, "post_id": 53640496, "comment_id": 94141732, "body": "Or maybe remove the object from root array, and then add updated one which have the tokens array updated.  I&#39;m not sure if this is doable using native way"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1544045939, "last_edit_date": 1544045939, "creation_date": 1544042854, "answer_id": 53640496, "question_id": 53635025, "link": "https://stackoverflow.com/questions/53635025/update-tjsonarray/53640496#53640496", "title": "Update TJSONArray", "body": "<p>Unfortunately, <code>TJSONArray</code> does not <em>natively</em> allow you to REPLACE existing elements with new values (Why? Who knows).  All you can do is ADD and REMOVE elements, and ENUMERATE elements.</p>\n\n<p>Since your array holds <code>TJSONObject</code> instances, to replace such an element with a new object, you will have to either:</p>\n\n<ol>\n<li><p>remove all of the elements from the array including and following the desired element index, then add a new object of the desired type, and then re-add the removed elements (in their previous order).</p></li>\n<li><p>construct a completely new <code>TJSONArray</code>, and then add objects to it as needed, copying values from the previous <code>TJSONArray</code> where needed.  You can then get the <code>TJSONPair</code> for the <code>tokens</code> field and set the new <code>TJSONArray</code> as its <code>JsonValue</code>.</p></li>\n</ol>\n\n<p>If this is not to your liking, then look for a 3rd party JSON library that supports the editing capabilities you are interested in.</p>\n"}], "owner": {"reputation": 149, "user_id": 10548418, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002062306660/picture?type=large", "display_name": "Aziz", "link": "https://stackoverflow.com/users/10548418/aziz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 53640496, "answer_count": 1, "score": -1, "last_activity_date": 1544045939, "creation_date": 1544021713, "last_edit_date": 1544024797, "question_id": 53635025, "link": "https://stackoverflow.com/questions/53635025/update-tjsonarray", "title": "Update TJSONArray", "body": "<p>How to correctly update json value?\nHere is what I tried, but without luck:</p>\n\n<pre><code>TJSONArray *Data;\nData = (TJSONArray*) TJSONObject::ParseJSONValue(TEncoding::ASCII-&gt;GetBytes(json),0);\nTJSONObject *obj = (TJSONObject*) Data-&gt;Get(0);\nTJSONArray *arr = (TJSONArray*) obj-&gt;Get(\"tokens\");\narr = (TJSONArray*) TJSONObject::ParseJSONValue(TEncoding::ASCII-&gt;GetBytes(arrjson),0);\n</code></pre>\n\n<p>Data:</p>\n\n<pre><code>[{\"source\":\"aaaa\",\"cluster\":\"1\",\"tokens\":[{},{}]}, {\"source\":\"bbbb\",\"cluster\":\"2\",\"tokens\":[{},{}]}] \n</code></pre>\n"}, {"tags": ["c++", "opengl", "png", "textures", "lighting"], "comments": [{"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 1, "creation_date": 1544022575, "post_id": 53634975, "comment_id": 94130178, "body": "Since you are using the old-school static pipileine, do you have lighting enabled?"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1544022988, "post_id": 53634975, "comment_id": 94130429, "body": "Try <code>glEnable(GL_COLOR_MATERIAL);</code> <code>glColorMaterial(GL_FRONT_AND_BACK, GL_AMBIENT_AND_DIFFUSE);</code>"}, {"owner": {"reputation": 50, "user_id": 8004877, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211381594368230/picture?type=large", "display_name": "Matteo Cultrera", "link": "https://stackoverflow.com/users/8004877/matteo-cultrera"}, "edited": false, "score": 0, "creation_date": 1544029519, "post_id": 53634975, "comment_id": 94134351, "body": "Yes, I enabled Lighting and my parameters are <code>glEnable(GL_LIGHTING);</code> and     <code>glEnable(GL_LIGHT0);    &#47;&#47; Uses default lighting parameters</code>"}, {"owner": {"reputation": 50, "user_id": 8004877, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211381594368230/picture?type=large", "display_name": "Matteo Cultrera", "link": "https://stackoverflow.com/users/8004877/matteo-cultrera"}, "edited": false, "score": 0, "creation_date": 1544029672, "post_id": 53634975, "comment_id": 94134459, "body": "Tried but didn&#39;t change"}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1544042483, "post_id": 53634975, "comment_id": 94140275, "body": "@MatteoCultrera Sorry, I guess I should have been clearer. I suspect that your problem comes from lighting being enabled. You should make sure that <code>GL_LIGHTING</code> is disabled while drawing your gui elements."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1544045758, "post_id": 53634975, "comment_id": 94141770, "body": "As you mention PNG in both your title and in your tags: are you sure it is <i>only</i> PNG files that suffer from this and not any other image type? If this happens with all images, please make sure to update your post."}], "answers": [{"comments": [{"owner": {"reputation": 50, "user_id": 8004877, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211381594368230/picture?type=large", "display_name": "Matteo Cultrera", "link": "https://stackoverflow.com/users/8004877/matteo-cultrera"}, "edited": false, "score": 1, "creation_date": 1544048992, "post_id": 53640908, "comment_id": 94142913, "body": "Thank you. I actually solved the problem disabling the lighting as you suggested. Yeah I know is not state of the art but I\u2019m working on a project for the university and the code was half written I was forced to just complete that I couldn\u2019t start the project as new. I\u2019m not satisfied of the result but I need it this way just for the project"}], "tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 1, "last_activity_date": 1544045332, "last_edit_date": 1544045332, "creation_date": 1544044738, "answer_id": 53640908, "question_id": 53634975, "link": "https://stackoverflow.com/questions/53634975/opengl-import-png-darker/53640908#53640908", "title": "OpenGL import PNG darker", "body": "<p>Note, that drawing by <code>glBegin</code>/<code>glEnd</code> sequences, the fixed function pipeline matrix stack and fixed function pipeline per vertex light model, is deprecated since decades.\nRead about <a href=\"https://www.khronos.org/opengl/wiki/Fixed_Function_Pipeline\" rel=\"nofollow noreferrer\">Fixed Function Pipeline</a> and see <a href=\"https://www.khronos.org/opengl/wiki/Vertex_Specification\" rel=\"nofollow noreferrer\">Vertex Specification</a> and <a href=\"https://www.khronos.org/opengl/wiki/Shader\" rel=\"nofollow noreferrer\">Shader</a> for a state of the art way of rendering.</p>\n\n<hr>\n\n<p>Anyway, the issue is that there is no proper light at your GUI. You have 2 possibilities, either you disable the light (<a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/glEnable.xml\" rel=\"nofollow noreferrer\"><code>glDisable(GL_LIGHTING)</code></a>), before drawing the GUI. Or make sure the light illuminates the GUI.</p>\n\n<p>To do so you have to ensure the the light source is in front of the GUI element, this means the light position has to be nearer to the camera then the GUI or even behind the camera.  </p>\n\n<p>But that is not enough, you also have to ensure that the GUI element reflects the light. Most important for the reflection of the light is the normal vector of the surface, because the standard OpenGL <a href=\"https://en.wikipedia.org/wiki/Blinn%E2%80%93Phong_shading_model\" rel=\"nofollow noreferrer\">Blinn-Phong</a> light model is calcualted like this:</p>\n\n<pre><code>Ka ... ambient material\nKd ... difusse material\nKs ... specular material\n\nLa ... ambient light\nLd ... diffuse light\nLs ... specular light\nsh ... shininess\n\nN  ... norlmal vector \nL  ... light vector (from the vertex position to the light) \nV  ... view vector (from the vertex position to the eye)\n\nId    = max(dot(N, L), 0.0);\n\nH     = normalize(V + L);\nNdotH = max(dot(N, H), 0.0);\nIs    = (sh + 2.0) * pow(NdotH, sh) / (2.0 * 3.14159265);\n\nfs    = Ka*La + Id*Kd*Ld + Is*Ks*Ls;\n</code></pre>\n\n<p>You don't set any normal vectors at all. Since OpenGL is a state engine, the normal vector which you have set last by <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/glNormal.xml\" rel=\"nofollow noreferrer\"><code>glNormal</code></a> is still valid. When the vertex coordinate is set by <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/glVertex.xml\" rel=\"nofollow noreferrer\"><code>glVertex</code></a>, then this normal vector is associated to. This may cause arbitrary results.</p>\n\n<p>Since the GUI geometry is drawn in the xy plane of the viewport and the view space z axis points out of the viewport (in a <a href=\"https://en.wikipedia.org/wiki/Right-hand_rule\" rel=\"nofollow noreferrer\">Right-handed</a> coordinate system), I recommend to define a normal vector, which is directed to the z axis:   </p>\n\n<pre><code>glBegin(GL_QUADS);\n\nglNormal3f(0.0, 0.0, 1.0);\n\nglTexCoord2f(0.0, 0.0); glVertex3f(x, y, 0.0f);\nglTexCoord2f(0.0, 1.0); glVertex3f(x, y + h, 0.0f);\nglTexCoord2f(1.0, 1.0); glVertex3f(x + w, y + h, 0.0f);\nglTexCoord2f(1.0, 0.0); glVertex3f(x + w, y, 0.0f);\nglEnd();\n</code></pre>\n\n<p>Of course the light position has to be proper set, to make this work. Note that the light position (<code>GL_POSITION</code>) and and spot direction (<code>GL_SPOT_DIRECTION</code>) is transformed by the current model view matrix, at the time they are set.</p>\n"}], "owner": {"reputation": 50, "user_id": 8004877, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211381594368230/picture?type=large", "display_name": "Matteo Cultrera", "link": "https://stackoverflow.com/users/8004877/matteo-cultrera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 53640908, "answer_count": 1, "score": 1, "last_activity_date": 1544045332, "creation_date": 1544021538, "question_id": 53634975, "link": "https://stackoverflow.com/questions/53634975/opengl-import-png-darker", "title": "OpenGL import PNG darker", "body": "<p>I'm doing a game in OpenGL for a project. I tried importing a PNG and then I use a glEnable2D function to be able to draw a GUI over my 3D game. the function is</p>\n\n<pre><code>void glEnable2D()\n{\n    int vPort[4];\n\n    glGetIntegerv(GL_VIEWPORT, vPort);\n\n    glMatrixMode(GL_PROJECTION);\n    glPushMatrix();\n    glLoadIdentity();\n\n    glOrtho(0, vPort[2], 0, vPort[3], -1, 1);\n    glMatrixMode(GL_MODELVIEW);\n    glPushMatrix();\n    glLoadIdentity();\n\n}\n</code></pre>\n\n<p>And it works. I then have a second function that is used to return to the 3D environment. Then I have this function that draws the quad with the texture and draws it to the screen (reading also alpha)</p>\n\n<pre><code>void drawImage(GLuint file, float x, float y, float w, float h, float angle)\n{\n//    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n//    glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_DECAL);\n//    glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_BLEND_SRC);\n\n    glEnable(GL_BLEND);\n    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);\n    glPushMatrix();\n    glTranslatef(x, y, 0.0);\n    glRotatef(angle, 0.0, 0.0, 1.0);\n\n    glBindTexture(GL_TEXTURE_2D, file);\n\n\n    glBegin(GL_QUADS);\n    glTexCoord2f(0.0, 0.0); glVertex3f(x, y, 0.0f);\n    glTexCoord2f(0.0, 1.0); glVertex3f(x, y + h, 0.0f);\n    glTexCoord2f(1.0, 1.0); glVertex3f(x + w, y + h, 0.0f);\n    glTexCoord2f(1.0, 0.0); glVertex3f(x + w, y, 0.0f);\n    glEnd();\n\n    glFlush();\n    glPopMatrix();\n}\n</code></pre>\n\n<p>If I run the function has a strange behaviour. It works with the alphas but keeps darken images as long as they are closer to the bottom-right corner\n<a href=\"https://i.stack.imgur.com/GIuNz.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GIuNz.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>If I not comment the line that sets the glTextEnvF it actually lights the things in the right way but doesn't read Alphas anymore. How can I make the function reading also the alpha channel without applying strange lighting?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2014, "user_id": 6397798, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/645e8642225ab706cb9b7ef8ff31364e?s=128&d=identicon&r=PG&f=1", "display_name": "bracco23", "link": "https://stackoverflow.com/users/6397798/bracco23"}, "edited": false, "score": 3, "creation_date": 1544021626, "post_id": 53634960, "comment_id": 94129530, "body": "How many instances you get if you simply try to look for &quot;long&quot; with a wholewords flag on?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1544021849, "post_id": 53634960, "comment_id": 94129708, "body": "Seems like a task for clang libtooling to ensure proper identification."}, {"owner": {"reputation": 21, "user_id": 5235279, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LgAWKEHLt5o/AAAAAAAAAAI/AAAAAAAAC58/i42p5KbCMOs/photo.jpg?sz=128", "display_name": "Grzesiek Mal", "link": "https://stackoverflow.com/users/5235279/grzesiek-mal"}, "reply_to_user": {"reputation": 2014, "user_id": 6397798, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/645e8642225ab706cb9b7ef8ff31364e?s=128&d=identicon&r=PG&f=1", "display_name": "bracco23", "link": "https://stackoverflow.com/users/6397798/bracco23"}, "edited": false, "score": 0, "creation_date": 1544022778, "post_id": 53634960, "comment_id": 94130311, "body": "@bracco23 Search of plain &quot;long&quot; gives ~7k hits."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 1, "creation_date": 1544023370, "post_id": 53634960, "comment_id": 94130661, "body": "To be more pedantic, as per standard, <code>uint32_t</code> and co. only exist if the underlying system supports them. <code>uint_least32_t</code> and co. on the other hand are fine."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1544023870, "post_id": 53634960, "comment_id": 94130964, "body": "why would you want to replace in code but not in comments? Contrived example, but you dont want something like <code>uint32_t x; &#47;&#47; this is a variable of type long</code>, no?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1544023928, "post_id": 53634960, "comment_id": 94131019, "body": "You have a lot of work ahead of you if the code was written using proper Hungarian Notation.  This is a case I use against Hungarian Notation."}, {"owner": {"reputation": 21, "user_id": 5235279, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LgAWKEHLt5o/AAAAAAAAAAI/AAAAAAAAC58/i42p5KbCMOs/photo.jpg?sz=128", "display_name": "Grzesiek Mal", "link": "https://stackoverflow.com/users/5235279/grzesiek-mal"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1544081263, "post_id": 53634960, "comment_id": 94151328, "body": "@user463035818 because I dont want comments like <code>&#47;&#47;username too uint32_t</code>"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1544091117, "post_id": 53634960, "comment_id": 94156294, "body": "@ThomasMatthews Many would argue that repeating the type in the variable name is all but proper hungarian notation. The prefix should express additional meaning, not redundant information."}], "answers": [{"tags": [], "owner": {"reputation": 2014, "user_id": 6397798, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/645e8642225ab706cb9b7ef8ff31364e?s=128&d=identicon&r=PG&f=1", "display_name": "bracco23", "link": "https://stackoverflow.com/users/6397798/bracco23"}, "is_accepted": false, "score": 0, "last_activity_date": 1544023341, "creation_date": 1544023341, "answer_id": 53635497, "question_id": 53634960, "link": "https://stackoverflow.com/questions/53634960/replacement-of-c-fundamental-type-in-large-codebase/53635497#53635497", "title": "Replacement of c++ fundamental type in large codebase", "body": "<p>You could risk a simple search and replace. </p>\n\n<p>In the right order, it should work: <code>unsigned long long</code>, then <code>long long</code>, then <code>unsigned long</code>, then <code>long</code>, with regex features to consider the presence of <code>int</code> if you feel like.</p>\n\n<p>Take into account that the only way to be sure of no mistakes is to use clang or another parser and parse the full code, which is a task way more difficult.</p>\n\n<p>An example of the regex you could use in a search and replace editor that supports them are:</p>\n\n<pre><code>unsigned long long( int)?\n(signed )?long long( int)?\nunsigned long( int)?\n(signed )?long( int)?\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5235279, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LgAWKEHLt5o/AAAAAAAAAAI/AAAAAAAAC58/i42p5KbCMOs/photo.jpg?sz=128", "display_name": "Grzesiek Mal", "link": "https://stackoverflow.com/users/5235279/grzesiek-mal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1544090280, "creation_date": 1544021493, "last_edit_date": 1544090280, "question_id": 53634960, "link": "https://stackoverflow.com/questions/53634960/replacement-of-c-fundamental-type-in-large-codebase", "title": "Replacement of c++ fundamental type in large codebase", "body": "<p>The project has ~1M lines of code. Because the size of 'long' type is not specified strictly and depends on the architecture, there is a need to replace it with uint32_t/int32_t. It applies also to all the variations like unsigned long, signed long int etc:\n<a href=\"https://en.cppreference.com/w/cpp/language/types\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/language/types</a></p>\n\n<p>I'm looking for a suggestion how to find/replace them all and not spoil the comments, variable names.. Perhaps it can be smart regex or python mako script?</p>\n"}, {"tags": ["c++", "ppl"], "comments": [{"owner": {"reputation": 1111, "user_id": 8527313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8815a9f0576bde3d9822a630bc01aec4?s=128&d=identicon&r=PG&f=1", "display_name": "Qubit", "link": "https://stackoverflow.com/users/8527313/qubit"}, "edited": false, "score": 0, "creation_date": 1544021958, "post_id": 53634904, "comment_id": 94129768, "body": "Out of curiosity, if detector is a simple class, why not create one for each image? It might not be optimal but if it&#39;s simple, and the process of detecting is much more time consuming, the impact will be minimal. Unless of course there is a reason you can&#39;t do that."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1544021961, "post_id": 53634904, "comment_id": 94129772, "body": "You could use some sort thread safe queue (PPL has a concurrent queue), and then in your lambda function <code>pop</code> the first detector out, call <code>detect</code>, and then push it pack into the queue when done.  This lets the thread use whatever detector is available."}, {"owner": {"reputation": 14960, "user_id": 3214872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/NJBvG.jpg?s=128&g=1", "display_name": "GPhilo", "link": "https://stackoverflow.com/users/3214872/gphilo"}, "reply_to_user": {"reputation": 1111, "user_id": 8527313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8815a9f0576bde3d9822a630bc01aec4?s=128&d=identicon&r=PG&f=1", "display_name": "Qubit", "link": "https://stackoverflow.com/users/8527313/qubit"}, "edited": false, "score": 0, "creation_date": 1544022261, "post_id": 53634904, "comment_id": 94129978, "body": "@Qubit I definitely misused the word &quot;simple&quot; there. No, the detector is quite massive, it just have a &quot;simple&quot; interface. The main problem there is GPU memory. I have N detectors, each allotted about N/4 GPU memory. The number of images can get too big for me to keep the same number of detectors and images while still having enough GPU memory to run detection."}, {"owner": {"reputation": 14960, "user_id": 3214872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/NJBvG.jpg?s=128&g=1", "display_name": "GPhilo", "link": "https://stackoverflow.com/users/3214872/gphilo"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1544022322, "post_id": 53634904, "comment_id": 94130011, "body": "@NathanOliver that&#39;s a good approach, I&#39;ll give it a shot"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1544022755, "post_id": 53634904, "comment_id": 94130300, "body": "@GPhilo Cool, let me know how it goes.  You&#39;ll probably want to store a smart pointer to the detector in the queue so you don&#39;t copy the detector."}, {"owner": {"reputation": 14960, "user_id": 3214872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/NJBvG.jpg?s=128&g=1", "display_name": "GPhilo", "link": "https://stackoverflow.com/users/3214872/gphilo"}, "edited": false, "score": 0, "creation_date": 1544023049, "post_id": 53634904, "comment_id": 94130467, "body": "Yeah I&#39;m already working with smart pointers in the vector actually, so that was the way I&#39;d go anyway"}], "answers": [{"tags": [], "owner": {"reputation": 14960, "user_id": 3214872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/NJBvG.jpg?s=128&g=1", "display_name": "GPhilo", "link": "https://stackoverflow.com/users/3214872/gphilo"}, "is_accepted": false, "score": 0, "last_activity_date": 1544025089, "creation_date": 1544025089, "answer_id": 53636050, "question_id": 53634904, "link": "https://stackoverflow.com/questions/53634904/how-to-reliably-pair-a-thread-to-an-object-instance-in-a-concurrencyparallel-f/53636050#53636050", "title": "How to reliably pair a thread to an object instance in a concurrency::parallel_for?", "body": "<p>Upon suggestion from @NathanOliver, I ended up using a <code>concurrent_queue</code> to solve the issue:</p>\n\n<pre><code>using namespace concurrency;\nCurrentScheduler::Create( SchedulerPolicy( 2, \nMinConcurrency, 1, MaxConcurrency, N ) );\nconcurrent_queue&lt;std::shared_ptr&lt;Detector&gt;&gt; detectors_queue;\nfor(auto&amp; det : obj-&gt;instances)\n{\n    detectors_queue.push(det);\n}\nparallel_for(0, M, [&amp;](int i)\n{\n    std::shared_ptr&lt;Detector&gt; thread_det = nullptr;\n    while(!detectors_queue.try_pop(thread_det))\n    {\n        wait(100);\n    }\n    thread_det-&gt;detect(images[i]);\n    detectors_queue.push(thread_det);\n});\nCurrentScheduler::Detach(); // clear scheduler\n</code></pre>\n"}], "owner": {"reputation": 14960, "user_id": 3214872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/NJBvG.jpg?s=128&g=1", "display_name": "GPhilo", "link": "https://stackoverflow.com/users/3214872/gphilo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544025089, "creation_date": 1544021340, "last_edit_date": 1544022281, "question_id": 53634904, "link": "https://stackoverflow.com/questions/53634904/how-to-reliably-pair-a-thread-to-an-object-instance-in-a-concurrencyparallel-f", "title": "How to reliably pair a thread to an object instance in a concurrency::parallel_for?", "body": "<p>I have a vector of M images that has to be processed in parallel by up to N threads, where N is a parameter set by the user. </p>\n\n<p>I also have a vector of N <code>Detector</code> instances that take care of the processing, but each instance must run in its own thread (i.e., if two threads call <code>detect()</code> on the same instance before the previous call ended, bad things will happen). </p>\n\n<p><code>Detector</code> is a self-contained class (that I can modify if necessary) with one <code>void Detector::detect(cv::Mat image)</code> method I call that alters the internal state of the detector for the duration of the (lengthy) detection process (hence the need to prevent parallel calls of <code>detect()</code> from different threads).</p>\n\n<p>I originally implemented this with OpenMP as:</p>\n\n<pre><code>#pragma omp parallel for num_threads(N)\nfor(int i=0; i&lt;M; i++)\n{\n    detectors[omp_get_thread_num()].detect(images[i]);\n}\n</code></pre>\n\n<p>However, since the detection can throw exceptions, I thought of using PPL's <code>parallel_for</code> instead, which comes with thread-originated-exception catching in the main thread.</p>\n\n<p>The problem is, I can't find an equivalent of <code>omp_get_thread_num</code> that I can use to map a <code>Detector</code> to a specific thread:</p>\n\n<pre><code>concurrency::CurrentScheduler::Create( concurrency::SchedulerPolicy( 2, \nconcurrency::MinConcurrency, 1, concurrency::MaxConcurrency, N ) );\nconcurrency::parallel_for(0, M, [&amp;](int i)\n{\n    detectors[?????].detect(images[i]);\n});\nconcurrency::CurrentScheduler::Detach(); // clear scheduler\n</code></pre>\n\n<p>How can I ensure that one thread always uses the same instance from the detectors pool?\nOr, if this is the wrong approach, how can I map the execution of <code>detect()</code> over the pool of detectors I already have?</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 739, "user_id": 8808047, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RNZnhl-JxaE/AAAAAAAAAAI/AAAAAAAAAD8/STLEovcCjNE/photo.jpg?sz=128", "display_name": "Skiller Dz", "link": "https://stackoverflow.com/users/8808047/skiller-dz"}, "edited": false, "score": 2, "creation_date": 1544021869, "post_id": 53634765, "comment_id": 94129722, "body": "i have a question , why are you trying to redefine STD ?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 739, "user_id": 8808047, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RNZnhl-JxaE/AAAAAAAAAAI/AAAAAAAAAD8/STLEovcCjNE/photo.jpg?sz=128", "display_name": "Skiller Dz", "link": "https://stackoverflow.com/users/8808047/skiller-dz"}, "edited": false, "score": 1, "creation_date": 1544022490, "post_id": 53634765, "comment_id": 94130123, "body": "@skillerdz that&#39;s how you redefine numerical limits for custom types."}, {"owner": {"reputation": 739, "user_id": 8808047, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RNZnhl-JxaE/AAAAAAAAAAI/AAAAAAAAAD8/STLEovcCjNE/photo.jpg?sz=128", "display_name": "Skiller Dz", "link": "https://stackoverflow.com/users/8808047/skiller-dz"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1544089776, "post_id": 53634765, "comment_id": 94155535, "body": "@MatthieuBrucher , you simply shoulld include &lt;limits&gt;"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1544090132, "post_id": 53634765, "comment_id": 94155756, "body": "Not for custom types <code>numeric_limits&lt;sep_float&lt;float&gt; &gt;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": true, "score": 0, "last_activity_date": 1544022621, "creation_date": 1544022621, "answer_id": 53635288, "question_id": 53634765, "link": "https://stackoverflow.com/questions/53634765/error-numeric-limits-is-not-a-class-template/53635288#53635288", "title": "error: \u2018numeric_limits\u2019 is not a class template", "body": "<p>The issue is that this header should be self sufficient and include the header that declares this type traits :</p>\n\n<pre><code>#include &lt;limits&gt;\n</code></pre>\n\n<p>Be aware that adding <code>using namespace std</code> is more than a bad practice in a header. Remove it. </p>\n"}], "owner": {"reputation": 3, "user_id": 10749958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba8bb03c334f37a4327d3072f9fd1469?s=128&d=identicon&r=PG&f=1", "display_name": "Lionel", "link": "https://stackoverflow.com/users/10749958/lionel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 294, "favorite_count": 0, "accepted_answer_id": 53635288, "answer_count": 1, "score": 0, "last_activity_date": 1544022621, "creation_date": 1544020858, "question_id": 53634765, "link": "https://stackoverflow.com/questions/53634765/error-numeric-limits-is-not-a-class-template", "title": "error: \u2018numeric_limits\u2019 is not a class template", "body": "<p>I want to compile a code and I get error messages. The first one:\n ../base/cmvs/../stann/sep_float.hpp:50:7: error: \u2018numeric_limits\u2019 is not a class template\n class numeric_limits ></p>\n\n<p>Here is the file:\n</p>\n\n<pre><code>using namespace std;\n\ntemplate&lt;typename T&gt;\nclass sep_float;\n\nnamespace std\n{\ntemplate&lt;&gt;\nclass numeric_limits&lt;sep_float&lt;float&gt; &gt;\n{\npublic:\n    static const bool is_specialized = true;\n    static float max() throw() {return numeric_limits&lt;float&gt;::max();}\n    static float min() throw() {return  -numeric_limits&lt;float&gt;::max();}\n };\n</code></pre>\n\n<p>This is not my own code and I am not so advanced in c++. Any idea of what I can do to fix it?</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 3, "last_activity_date": 1544020499, "creation_date": 1544020499, "answer_id": 53634661, "question_id": 53634582, "link": "https://stackoverflow.com/questions/53634582/i-have-written-this-program-for-infix-to-postfix-conversion/53634661#53634661", "title": "I have written this program for infix to postfix conversion", "body": "<p><a href=\"https://en.cppreference.com/w/cpp/io/c/fgets\" rel=\"nofollow noreferrer\"><code>std::fgets</code></a> does not discard the newline in the input stream like <code>getline</code> would.  That means <code>exp</code> contains <code>\"a+b-(c+d/e)\\n\"</code> and not <code>\"a+b-(c+d/e)\"</code>.  You either need to remove the newline from <code>exp</code>, switch to <code>cin.getline()</code>, or stop your processing loop when it hits the newline.</p>\n"}, {"tags": [], "owner": {"reputation": 1110, "user_id": 5778465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xnd4J.jpg?s=128&g=1", "display_name": "snake_style", "link": "https://stackoverflow.com/users/5778465/snake-style"}, "is_accepted": false, "score": 1, "last_activity_date": 1544021375, "last_edit_date": 1544021375, "creation_date": 1544020912, "answer_id": 53634782, "question_id": 53634582, "link": "https://stackoverflow.com/questions/53634582/i-have-written-this-program-for-infix-to-postfix-conversion/53634782#53634782", "title": "I have written this program for infix to postfix conversion", "body": "<p>Try to change <code>fgets</code> to <code>std::cin</code>. And use <code>std::string</code> instead of <code>char*</code>:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    string exp;\n    cout &lt;&lt; \"Enter expression: \";\n    std::cin &gt;&gt; exp;\n    auto t = exp.data();\n    char x;\n\n    for(auto &amp;ch: exp)\n    {\n        if(isalnum(ch))\n            cout &lt;&lt; ch;\n        else if(ch == '(')\n            push(ch);\n        else if(ch == ')')\n        {\n            while((x = pop()) != '(')\n                cout &lt;&lt; x;\n        }\n        else\n        {\n            if(priority(stk[top]) &gt;= priority(ch))\n                cout &lt;&lt; pop();\n            push(ch);\n        }\n    }\n    while(top != -1)\n        cout &lt;&lt; pop();\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "is_accepted": false, "score": 0, "last_activity_date": 1544021501, "creation_date": 1544021501, "answer_id": 53634966, "question_id": 53634582, "link": "https://stackoverflow.com/questions/53634582/i-have-written-this-program-for-infix-to-postfix-conversion/53634966#53634966", "title": "I have written this program for infix to postfix conversion", "body": "<p>In addition to the processing of <code>'\\n'</code> as mentioned by NathanOliver, your function <code>priority()</code> doesn't return a value when the user entered any other character not checked in the <code>if</code> statements, so the behavior might be undefined.</p>\n"}], "owner": {"reputation": 9, "user_id": 10749880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0491b6ab8cce1e886ea6954e757a74a5?s=128&d=identicon&r=PG&f=1", "display_name": "void", "link": "https://stackoverflow.com/users/10749880/void"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1544021501, "creation_date": 1544020260, "last_edit_date": 1544020547, "question_id": 53634582, "link": "https://stackoverflow.com/questions/53634582/i-have-written-this-program-for-infix-to-postfix-conversion", "title": "I have written this program for infix to postfix conversion", "body": "<pre><code>#include&lt;iostream&gt;\n#include&lt;stdio.h&gt; \n#define MAX 20\nusing namespace std;\n\nchar stk[MAX];\nint top=-1;\n\nvoid push(char c)\n{\n    if(top==MAX-1)\n        cout&lt;&lt;\"Overflow\";\n    else\n    {\n        stk[++top]=c;\n    }\n}\n\nchar pop()\n{\n    if(top==-1)\n    {\n        return '\\0';\n    }\n    else\n        return stk[top--];\n}\n\nint priority(char ch)\n{\n    if(ch=='(')\n        return 1;\n    if(ch=='+'||ch=='-')\n        return 2;\n    if(ch=='*'||ch=='/')\n        return 3;\n    if(ch=='^')\n        return 4;\n}\n\nint main()\n{\n    char exp[35],*t,x;\n    cout&lt;&lt;\"Enter expression: \";\n    fgets(exp,35,stdin);\n    t=exp;\n    while(*t)\n    {\n        if(isalnum(*t))\n            cout&lt;&lt;*t;\n        else if(*t=='(')\n            push(*t);\n        else if(*t==')')\n        {\n            while((x=pop())!='(')\n                cout&lt;&lt;x;\n        }\n        else\n        {\n            if(priority(stk[top])&gt;=priority(*t))\n                cout&lt;&lt;pop();\n            push(*t);\n        }\n        t++;\n    } \n    while(top!=-1)\n        cout&lt;&lt;pop();\n    return 0;\n}\n</code></pre>\n\n<p>The output for input: </p>\n\n<pre><code>a+b-(c+d/e) \n</code></pre>\n\n<p>is </p>\n\n<pre><code>ab+cde/+\n-\n</code></pre>\n\n<p>I don't understand why - is on a newline.\nI have just started learning c++ and I am trying to implement some programs I did in c using c++. The same code in c works fine. I think there are some holes in my basic c++ knowledge and I would like to fill them up.</p>\n"}, {"tags": ["c++", "qt", "kde", "recycle-bin"], "answers": [{"tags": [], "owner": {"reputation": 284, "user_id": 11562467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dVLZx.png?s=128&g=1", "display_name": "rjg", "link": "https://stackoverflow.com/users/11562467/rjg"}, "is_accepted": false, "score": 0, "last_activity_date": 1559667285, "creation_date": 1559667285, "answer_id": 56448272, "question_id": 53634524, "link": "https://stackoverflow.com/questions/53634524/kio-trash-drive-specific-trash-folder/56448272#56448272", "title": "KIO Trash drive specific trash folder", "body": "<p>You probably want to use <code>KIO::move</code> with the destination set to <code>trash:/</code>, at least that is the way <a href=\"https://github.com/KDE/kde-cli-tools/blob/73c7c8f093045c8306bb67921394ded86d1bee4c/kioclient/kioclient.cpp#L267-L279\" rel=\"nofollow noreferrer\"><code>kioclient</code></a> implements the move to trash functionality. This should use the drive/partition specific trash since it follows the <a href=\"https://specifications.freedesktop.org/trash-spec/trashspec-1.0.html\" rel=\"nofollow noreferrer\">FreeDesktop.org trash specification</a></p>\n"}], "owner": {"reputation": 2342, "user_id": 1080633, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/RieF7.jpg?s=128&g=1", "display_name": "fonZ", "link": "https://stackoverflow.com/users/1080633/fonz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1559667285, "creation_date": 1544020073, "last_edit_date": 1544021128, "question_id": 53634524, "link": "https://stackoverflow.com/questions/53634524/kio-trash-drive-specific-trash-folder", "title": "KIO Trash drive specific trash folder", "body": "<p>I'm using KIO to implement trash functionality. The problem is that the files are all put into a single trash that's on a local drive. The problem with this approach is that deleting files on network drives takes too much time due to network delays. I want to have a trash folder for every mount point, e.g. /mnt/parition1/.Trash/uid/..., /mnt/parition2/.Trash/uid/... etc. I have been looking through the KIO docs and source code, and I can find a TrashImpl.cpp where it seems that multiple mount points are supported. But then looking at the KIO::trash function, there is absolutely no way to set this up.</p>\n\n<p>So my question is, how can I make KIO::trash work such that it will trash on the partition instead to avoid costly network operations.</p>\n\n<p>Thanks in advance for the help.</p>\n"}, {"tags": ["c++", "function", "struct"], "answers": [{"comments": [{"owner": {"reputation": 66, "user_id": 10490860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/897259a45b38fe54b63860fca0d7cc40?s=128&d=identicon&r=PG&f=1", "display_name": "Shizu", "link": "https://stackoverflow.com/users/10490860/shizu"}, "edited": false, "score": 0, "creation_date": 1544020755, "post_id": 53634489, "comment_id": 94128922, "body": "Thank you so much! I always wonder when to use the &#39;&amp;&#39; and now I know."}, {"owner": {"reputation": 66, "user_id": 10490860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/897259a45b38fe54b63860fca0d7cc40?s=128&d=identicon&r=PG&f=1", "display_name": "Shizu", "link": "https://stackoverflow.com/users/10490860/shizu"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1544024467, "post_id": 53634489, "comment_id": 94131343, "body": "@SergeBallesta yeah I got what you meant. Thanks!"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2191247"}, "is_accepted": true, "score": 2, "last_activity_date": 1544020309, "last_edit_date": 1544020309, "creation_date": 1544019959, "answer_id": 53634489, "question_id": 53634427, "link": "https://stackoverflow.com/questions/53634427/how-to-pass-struct-as-parameter-to-other-function-for-input-then-output-back-at/53634489#53634489", "title": "How to pass struct as parameter to other function for input, then output back at the original function", "body": "<p>You probably want to pass a pointer or a reference, in this case recommend a reference because it means fewer changes to your code:</p>\n\n<pre><code>void getInfo(struct customer &amp;cust); //prototype\n</code></pre>\n\n<p>Remember to change your function parameter as well.</p>\n"}], "owner": {"reputation": 66, "user_id": 10490860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/897259a45b38fe54b63860fca0d7cc40?s=128&d=identicon&r=PG&f=1", "display_name": "Shizu", "link": "https://stackoverflow.com/users/10490860/shizu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 53634489, "answer_count": 1, "score": 0, "last_activity_date": 1544020309, "creation_date": 1544019748, "question_id": 53634427, "link": "https://stackoverflow.com/questions/53634427/how-to-pass-struct-as-parameter-to-other-function-for-input-then-output-back-at", "title": "How to pass struct as parameter to other function for input, then output back at the original function", "body": "<p>This is part of my project codes.</p>\n\n<p>About the struct customer that I did, from welcomeScreen function I call the getInfo function for user to input the details (as you can see) and then return back the value to welcomeScreen function for output.</p>\n\n<p>I can compile the codes, but the problem is there is no output for all the details after I input it (just blank)? Sorry if this is a dumb question cause im still a student.</p>\n\n<pre><code>struct customer\n{\n    string name;\n    string email;\n    int number;\n};\nvoid welcomeScreen(); //prototype\nvoid getInfo(struct customer cust); //prototype\n\nvoid welcomeScreen()\n{\n    struct customer cust; // struct declaration\n    const int SIZE=5;\n\n    system(\"CLS\");\n    cout &lt;&lt; setfill ('-') &lt;&lt; setw (55) &lt;&lt; \"-\" &lt;&lt; endl;\n    cout &lt;&lt; \"\\tWelcome to Computer Hardware Shop\" &lt;&lt; endl;\n    cout &lt;&lt; setfill ('-') &lt;&lt; setw (55) &lt;&lt; \"-\" &lt;&lt; endl;\n\n    cout &lt;&lt; endl &lt;&lt; \"Type of hardwares that we sell:\" &lt;&lt; endl;\n    string item[SIZE]={\"Monitor\",\"CPU\",\"RAM\",\"Solid-State Drive\",\"Graphic Card\"};\n    for(int i=0;i&lt;SIZE;i++)\n        cout &lt;&lt; \"\\t\" &lt;&lt; i+1 &lt;&lt; \". \" &lt;&lt; item[i] &lt;&lt; endl;\n\n    getInfo(cust);\n\n    cout &lt;&lt; endl;\n    cout &lt;&lt; fixed &lt;&lt; showpoint &lt;&lt; setprecision (2);\n    cout &lt;&lt; \"Name: \"&lt;&lt; cust.name &lt;&lt; endl; // struct output\n    cout &lt;&lt; \"Email: \"&lt;&lt; cust.email &lt;&lt; endl;\n    cout &lt;&lt; \"Phone Number: \" &lt;&lt; cust.number &lt;&lt; endl;\n    cout &lt;&lt; endl;\n}\n\nvoid getInfo(struct customer cust)\n{\n    cout &lt;&lt; endl &lt;&lt; \"Enter name: \";\n    cin &gt;&gt; cust.name;\n    cout &lt;&lt; \"Enter email: \";\n    cin &gt;&gt; cust.email;\n    cout &lt;&lt; \"Enter phone number: \";\n    cin &gt;&gt; cust.number; \n}\n</code></pre>\n"}, {"tags": ["c++", "powershell"], "comments": [{"owner": {"reputation": 33825, "user_id": 9898643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c9f303fda4c69e9c9ce6b84a6268402?s=128&d=identicon&r=PG&f=1", "display_name": "Theo", "link": "https://stackoverflow.com/users/9898643/theo"}, "edited": false, "score": 2, "creation_date": 1544019790, "post_id": 53634413, "comment_id": 94128207, "body": "Quote the <code>OutFile</code>: <code>system(&quot;powershell.exe -command Invoke-WebRequest http:&#47;&#47;example.com&#47;myEXE.exe -OutFile &#39;C:\\\\Program Files\\\\myEXE.exe&#39;&quot;);</code>"}, {"owner": {"reputation": 61, "user_id": 10749893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cf333266f35a373985641c9a3aba096?s=128&d=identicon&r=PG&f=1", "display_name": "Apex", "link": "https://stackoverflow.com/users/10749893/apex"}, "reply_to_user": {"reputation": 33825, "user_id": 9898643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c9f303fda4c69e9c9ce6b84a6268402?s=128&d=identicon&r=PG&f=1", "display_name": "Theo", "link": "https://stackoverflow.com/users/9898643/theo"}, "edited": false, "score": 0, "creation_date": 1544020439, "post_id": 53634413, "comment_id": 94128696, "body": "That worked, Thanks! I tried doing the same thing with system(&quot;&#39;C:\\\\Program Files\\\\myEXE.exe&#39;&quot;); to start the exe but it separates &quot;Program&quot; and &quot;Files&quot;, any idea how to make it work?"}, {"owner": {"reputation": 3088, "user_id": 10071078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5360c555c61b25fb6c3b5b1985af5f0f?s=128&d=identicon&r=PG&f=1", "display_name": "TobyU", "link": "https://stackoverflow.com/users/10071078/tobyu"}, "edited": false, "score": 0, "creation_date": 1544021643, "post_id": 53634413, "comment_id": 94129548, "body": "Windows can work with <code>PROGRA~1</code> to address <code>Program Files</code>. Therefore, <code>&#39;C:\\\\PROGRA~1\\\\myEXE.exe&#39;</code> should work"}, {"owner": {"reputation": 61, "user_id": 10749893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cf333266f35a373985641c9a3aba096?s=128&d=identicon&r=PG&f=1", "display_name": "Apex", "link": "https://stackoverflow.com/users/10749893/apex"}, "edited": false, "score": 0, "creation_date": 1544022619, "post_id": 53634413, "comment_id": 94130213, "body": "I am trying to do the same thing with %appdata% but cant make it work, and similar shortcut for it?"}, {"owner": {"reputation": 491, "user_id": 5778928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5484813233425f0aa63b8afb108c0203?s=128&d=identicon&r=PG&f=1", "display_name": "GSIO01", "link": "https://stackoverflow.com/users/5778928/gsio01"}, "edited": false, "score": 0, "creation_date": 1544023011, "post_id": 53634413, "comment_id": 94130444, "body": "The answer to <a href=\"https://stackoverflow.com/questions/3964124/how-to-get-the-appdata-folder-in-c\">this question</a> points you in the right direction how you can resolve special paths (such as <code>%appdata%</code>) under windows. Also the proper way to run other programs (including powershell) on windows is to use <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/processthreadsapi/nf-processthreadsapi-createprocessa\" rel=\"nofollow noreferrer\">CreateProcess</a>."}, {"owner": {"reputation": 61, "user_id": 10749893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cf333266f35a373985641c9a3aba096?s=128&d=identicon&r=PG&f=1", "display_name": "Apex", "link": "https://stackoverflow.com/users/10749893/apex"}, "edited": false, "score": 0, "creation_date": 1544024639, "post_id": 53634413, "comment_id": 94131451, "body": "I know this function and have used it before, but the return value of it makes it hard for me to combine with a system() string, and that&#39;s why I&#39;m trying to use %appdata% directly :/"}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 10749893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cf333266f35a373985641c9a3aba096?s=128&d=identicon&r=PG&f=1", "display_name": "Apex", "link": "https://stackoverflow.com/users/10749893/apex"}, "edited": false, "score": 0, "creation_date": 1544089170, "post_id": 53638591, "comment_id": 94155153, "body": "The powershell command already works with the solution suggested above, I tried your solution with my second command that doesn&#39;t work but it didn&#39;t even let me include the &lt;bits/stdc++.h&gt;... This is the command I need working:  system(&quot;&#39;C:\\\\Program Files\\\\myEXE.exe&#39;&quot;);"}], "tags": [], "owner": {"reputation": 484, "user_id": 5066497, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1ee3feec2dfd128f643a70b306bd7a85?s=128&d=identicon&r=PG&f=1", "display_name": "9301293", "link": "https://stackoverflow.com/users/5066497/9301293"}, "is_accepted": false, "score": 0, "last_activity_date": 1544034539, "creation_date": 1544034539, "answer_id": 53638591, "question_id": 53634413, "link": "https://stackoverflow.com/questions/53634413/system-command-with-spaces/53638591#53638591", "title": "system() command with spaces", "body": "<p>I believe that this should work:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;bits/stdc++.h&gt;\nint main(){\n    std::cout &lt;&lt; \"trying system command\" &lt;&lt; std::endl;\n    system(\"powershell.exe -command Invoke-WebRequest https://make.sure.valid.url.to.test.otherwise.will.fail.anyways -OutFile 'C:/Program` Files/myEXE.exe'\");\n}\n</code></pre>\n\n<p>The ` charachter should allow you to properly escape the space. </p>\n"}], "owner": {"reputation": 61, "user_id": 10749893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cf333266f35a373985641c9a3aba096?s=128&d=identicon&r=PG&f=1", "display_name": "Apex", "link": "https://stackoverflow.com/users/10749893/apex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544034539, "creation_date": 1544019660, "last_edit_date": 1544020071, "question_id": 53634413, "link": "https://stackoverflow.com/questions/53634413/system-command-with-spaces", "title": "system() command with spaces", "body": "<p>I'm trying to execute a PowerShell command via <code>system()</code> command, but encounter an exception because of the spaces in the string, I tried a few things but still got the same exception.</p>\n\n<p>Code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>system(\"powershell.exe -command Invoke-WebRequest http://example.com/myEXE.exe -OutFile C:\\\\Program Files\\\\myEXE.exe\");\n</code></pre>\n\n<p>And this is the exception I get:</p>\n\n<pre>\nInvoke-WebRequest : A positional parameter cannot be found that accepts\nargument 'Files\\myEXE.exe'.\nAt line:1 char:1\n+ Invoke-WebRequest http://example.com/myEXE.exe -OutFile C:\\Program File ...\n+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n    + CategoryInfo          : InvalidArgument: (:) [Invoke-WebRequest], ParameterBindingException\n    + FullyQualifiedErrorId : PositionalParameterNotFound,Microsoft.PowerShell.Commands.InvokeWebRequestCommand\n</pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1544021634, "post_id": 53634292, "comment_id": 94129539, "body": "I think your guess is correct. It&#39;s just a note about one possible reason for this kind of error. It doesn&#39;t mean your specific example fails because of this reason."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1544021721, "post_id": 53634292, "comment_id": 94129612, "body": "<code>std::declval&lt;pf&amp;&gt;()</code>, using an rvalue there seems wrong."}, {"owner": {"reputation": 407, "user_id": 5567621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hc8fe.jpg?s=128&g=1", "display_name": "Daniel Vlasenko", "link": "https://stackoverflow.com/users/5567621/daniel-vlasenko"}, "edited": false, "score": 0, "creation_date": 1544021722, "post_id": 53634292, "comment_id": 94129613, "body": "gcc says about dependent base because of ADL. It uses std::basic_string scope and its base scopes for lookup."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1544021971, "post_id": 53634292, "comment_id": 94129778, "body": "As an aside, if you put <code>fill</code> <i>before</i> the constructor, you get another interesting error: &quot;cannot call fill without object&quot;."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1544022012, "post_id": 53634292, "comment_id": 94129809, "body": "Are you sure your fix is correct? <a href=\"https://ideone.com/0BBmqz\" rel=\"nofollow noreferrer\">ideone.com/0BBmqz</a>"}, {"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 0, "creation_date": 1544022034, "post_id": 53634292, "comment_id": 94129819, "body": "Or just <code>noexcept(this-&gt;fill(this-&gt;pk_, pkn))</code> to avoid repeating yourself and just do the right thing."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 0, "creation_date": 1544022118, "post_id": 53634292, "comment_id": 94129878, "body": "@Oktalist this doesn&#39;t compile with gcc for the exact same reason the original code fails."}, {"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1544022191, "post_id": 53634292, "comment_id": 94129923, "body": "@n.m. works for me <a href=\"https://godbolt.org/z/H3r5Zh\" rel=\"nofollow noreferrer\">godbolt.org/z/H3r5Zh</a>"}, {"owner": {"reputation": 4396, "user_id": 2064196, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/YOB5j.jpg?s=128&g=1", "display_name": "Bulletmagnet", "link": "https://stackoverflow.com/users/2064196/bulletmagnet"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1544022366, "post_id": 53634292, "comment_id": 94130047, "body": "@Yakk-AdamNevraumont  <code>std::declval&lt;pf&gt;()</code> is an rvalue reference, but <code>std::declval&lt;pf&amp;&gt;()</code> is an lvalue reference (which is needed for the first argument of <code>fill</code>)."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 0, "creation_date": 1544022664, "post_id": 53634292, "comment_id": 94130241, "body": "@Oktalist doesn&#39;t work in a minimal example <a href=\"https://ideone.com/ZEiH7m\" rel=\"nofollow noreferrer\">ideone.com/ZEiH7m</a>."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1544022733, "post_id": 53634292, "comment_id": 94130287, "body": "@Bulletmagnet to be more clear: <code>std::declval&lt;pf&gt;().fill</code> seems wrong -- should be <code>std::declval&lt;pf&amp;&gt;().fill</code>"}, {"owner": {"reputation": 4396, "user_id": 2064196, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/YOB5j.jpg?s=128&g=1", "display_name": "Bulletmagnet", "link": "https://stackoverflow.com/users/2064196/bulletmagnet"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1544023301, "post_id": 53634292, "comment_id": 94130627, "body": "@Yakk-AdamNevraumont, Thanks, I meant to put in <code>std::declval&lt;pf&amp;&gt;()</code> but failed at copy-paste :("}], "answers": [{"tags": [], "owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "is_accepted": false, "score": 1, "last_activity_date": 1544037540, "last_edit_date": 1592644375, "creation_date": 1544037540, "answer_id": 53639308, "question_id": 53634292, "link": "https://stackoverflow.com/questions/53634292/why-does-gcc-speak-about-a-dependent-base/53639308#53639308", "title": "Why does GCC speak about a dependent base?", "body": "<p>At first glance, this seems like it could be more than one bug in GCC.</p>\n<p>(All standard quotes are from C++14, as you are compiling with <code>-std=c++14</code>. All bold is added.)</p>\n<blockquote>\n<p>[basic.scope.class]\u00b61</p>\n<p><strong>The potential scope of a name declared in a class consists</strong> [...] also of all function bodies, default arguments, <strong><em>exception-specifications</em></strong>, and <em>brace-or-equal-initializers</em> of non-static data members in that class (including such things in nested classes).</p>\n</blockquote>\n<p>So in the <code>noexcept</code> clause of a member function declaration, all members of the class are in scope regardless of the order in which they are declared.</p>\n<p>But this isn't enough to convince ourselves that your code is well-formed. We are in a class template, so next we need to consider two-phase lookup:</p>\n<blockquote>\n<p>[temp.dep]\u00b61</p>\n<p>In an expression of the form:</p>\n<blockquote>\n<p><em>postfix-expression</em> <code>(</code> <em>expression-listopt</em> <code>)</code></p>\n</blockquote>\n<p>where the <em>postfix-expression</em> is an <em>unqualified-id</em>, <strong>the <em>unqualified-id</em> denotes a <em>dependent name</em> if</strong></p>\n<ul>\n<li>(1.1) any of the expressions in the <em>expression-list</em> is a pack expansion,</li>\n<li>(1.2) <strong>any of the expressions in the <em>expression-list</em> is a type-dependent expression</strong>, or</li>\n<li>(1.3) if the <em>unqualified-id</em> is a <em>template-id</em> in which any of the template arguments depends on a template parameter.</li>\n</ul>\n<p>Such names are unbound and are looked up at the point of the template instantiation in both the context of the template definition and the context of the point of instantiation.</p>\n</blockquote>\n<p>Therefore <code>fill</code> is a dependent name in <code>fill(pk_, std::string{})</code> because <code>pk_</code> is type-dependent, so <code>fill</code> will be looked up when the template is instantiated, both in the context of the template itself and the point where it was instantiated. Due to ADL and the fact that one of the arguments is <code>std::string</code>, the <code>std</code> namespace is included in the lookup, leading to the messages about <code>std::fill</code>. But lookup should also find the member function <code>fill</code>, as previously discussed.</p>\n<p>Now we have convinced ourselves that the code is well-formed. We could simply file a bug and move on. But let's keep digging to see how well we understand what's happening.</p>\n<hr />\n<blockquote>\n<p>[temp.dep]\u00b63</p>\n<p>In the definition of a class or class template, <strong>if a base class depends on a <em>template-parameter</em>, the base class scope is not examined during unqualified name lookup</strong> either at the point of definition of the class template or member or during an instantiation of the class template or member.</p>\n</blockquote>\n<p>The error messages seem to indicate that GCC is (wrongly) considering the enclosing class of <code>fill</code> to be a dependent base of <code>fill</code>, and hence applying the wording of [temp.dep]\u00b63.</p>\n<p>The usual way to refer to names in dependent bases is to refer to them through a <em>qualified-id</em> (e.g. <code>pf::fill</code>) or a class member access expression (e.g. <code>this-&gt;fill</code>). So what happens when we try either of these approaches as a workaround?</p>\n<p>Writing <code>this-&gt;fill</code> seems to work in your example code, but as noted by @n.m. in the comments, this is brittle and doesn't work in a more minimal example, yielding the error &quot;invalid use of 'this' at top level&quot;.</p>\n<p>Writing <code>pf::fill</code> yields the error &quot;cannot call member function without object&quot;. This is probably for the same reason that <code>this-&gt;fill</code> failed: if <code>this</code> is invalid then it must also be invalid to transform an <em>id-expression</em> into a implicit member access expression.</p>\n<blockquote>\n<p>[expr.prim.general]/3</p>\n<p>If a declaration declares <strong>a member function</strong> or member function template <strong>of a class <code>X</code>, the expression <code>this</code> is</strong> a prvalue of type &quot;pointer to <em>cv-qualifier-seq</em> <code>X</code>&quot; <strong>between the optional <em>cv-qualifer-seq</em> and the end of the <em>function-definition</em></strong>, <em>member-declarator</em>, or <em>declarator</em>.</p>\n</blockquote>\n<p>So <code>this</code> is valid to appear in an <em>exception-specification</em> and GCC is wrong to reject it, and this looks on the face of it to be a bug separate from the one we already diagnosed. This last one is already known as <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=52869\" rel=\"nofollow noreferrer\">52869</a>, but the testcase submitted with the bugfix failed to exercise the case in which the <code>noexcept</code> appears before the declaration of the member function it refers to, as in your case. So it's unclear whether your first set of errors are really part of the same bug.</p>\n"}], "owner": {"reputation": 4396, "user_id": 2064196, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/YOB5j.jpg?s=128&g=1", "display_name": "Bulletmagnet", "link": "https://stackoverflow.com/users/2064196/bulletmagnet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544037540, "creation_date": 1544019264, "last_edit_date": 1544023179, "question_id": 53634292, "link": "https://stackoverflow.com/questions/53634292/why-does-gcc-speak-about-a-dependent-base", "title": "Why does GCC speak about a dependent base?", "body": "<p>This is a continuation of <a href=\"https://stackoverflow.com/questions/53633612/when-is-a-class-member-visible\">When is a class member visible?</a></p>\n\n<p>After making the class compile with GCC by moving the declaration of <code>pk_</code> to the beginning, I tried to use it:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;map&gt;\n#include &lt;type_traits&gt;\n\nusing from_type = std::map&lt;std::string, std::string&gt;;\n\ntemplate&lt;typename PK, size_t N&gt;\nstruct pf {\npublic:\n    PK pk_;\n\n    pf(from_type const&amp; a, std::string const&amp; pkn) noexcept(noexcept(fill(pk_, std::string{})))\n    : map_(a) // GCC 4.8 requires ()s for references\n    , pk_{ [&amp;]{ fill(pk_, pkn); return pk_; }() }\n    {\n    }\n\n    template&lt;typename prop_t&gt;\n    typename std::enable_if&lt;\n        std::is_integral&lt;typename std::decay&lt;prop_t&gt;::type&gt;::value,\n        pf&lt;PK, N&gt;&gt;::type const&amp;\n    fill(prop_t&amp; , std::string const&amp; , prop_t  = 0) const noexcept(false);\n\n    pf&lt;PK, N&gt; const&amp;\n    fill(std::string&amp; , std::string const&amp;) const noexcept;\nprotected:\n    from_type const&amp; map_;\n    uint32_t aieee;\n\n};\n\nstd::string k;\nfrom_type m;\n\nint i;\nstd::string s;\n\nstatic_assert(!noexcept(pf&lt;int        , 42&gt;{m, k}), \"int could throw\");\nstatic_assert( noexcept(pf&lt;std::string, 17&gt;{m, k}), \"string shouldn't throw\");\n</code></pre>\n\n<p>clang 4.0, 6.0 and trunk again compiled the program.</p>\n\n<p>GCC was still not happy:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ g++-99 -Wall -pedantic -Wextra -Wformat=2 -std=c++14 pf.cpp\npf.cpp: In instantiation of \u2018pf&lt;PK, N&gt;::pf(const from_type&amp;, const string&amp;) [with PK = int; long unsigned int N = 42; from_type = std::map&lt;std::__cxx11::basic_string&lt;char&gt;, std::__cxx11::basic_string&lt;char&gt; &gt;; std::string = std::__cxx11::basic_string&lt;char&gt;]\u2019:\npf.cpp:38:49:   required from here\npf.cpp:12:74: error: no matching function for call to \u2018fill(int&amp;, std::__cxx11::basic_string&lt;char&gt;)\u2019\n   12 |     pf(from_type const&amp; a, std::string const&amp; pkn) noexcept(noexcept(fill(pk_, std::string{})))\n      |                                                                      ~~~~^~~~~~~~~~~~~~~~~~~~\nIn file included from /usr/local/lib/gcc/x86_64-pc-linux-gnu/9.0.0/include/c++/bits/char_traits.h:39,\n                 from /usr/local/lib/gcc/x86_64-pc-linux-gnu/9.0.0/include/c++/string:40,\n                 from pf.cpp:1:\n/usr/local/lib/gcc/x86_64-pc-linux-gnu/9.0.0/include/c++/bits/stl_algobase.h:742:5: note: candidate: \u2018template&lt;class _ForwardIterator, class _Tp&gt; void std::fill(_ForwardIterator, _ForwardIterator, const _Tp&amp;)\u2019\n  742 |     fill(_ForwardIterator __first, _ForwardIterator __last, const _Tp&amp; __value)\n      |     ^~~~\n/usr/local/lib/gcc/x86_64-pc-linux-gnu/9.0.0/include/c++/bits/stl_algobase.h:742:5: note:   template argument deduction/substitution failed:\npf.cpp:12:74: note:   deduced conflicting types for parameter \u2018_ForwardIterator\u2019 (\u2018int\u2019 and \u2018std::__cxx11::basic_string&lt;char&gt;\u2019)\n   12 |     pf(from_type const&amp; a, std::string const&amp; pkn) noexcept(noexcept(fill(pk_, std::string{})))\n      |                                                                      ~~~~^~~~~~~~~~~~~~~~~~~~\npf.cpp: In instantiation of \u2018pf&lt;PK, N&gt;::pf(const from_type&amp;, const string&amp;) [with PK = std::__cxx11::basic_string&lt;char&gt;; long unsigned int N = 17; from_type = std::map&lt;std::__cxx11::basic_string&lt;char&gt;, std::__cxx11::basic_string&lt;char&gt; &gt;; std::string = std::__cxx11::basic_string&lt;char&gt;]\u2019:\npf.cpp:39:49:   required from here\npf.cpp:12:74: error: no matching function for call to \u2018fill(std::__cxx11::basic_string&lt;char&gt;&amp;, std::__cxx11::basic_string&lt;char&gt;)\u2019\nIn file included from /usr/local/lib/gcc/x86_64-pc-linux-gnu/9.0.0/include/c++/bits/char_traits.h:39,\n                 from /usr/local/lib/gcc/x86_64-pc-linux-gnu/9.0.0/include/c++/string:40,\n                 from pf.cpp:1:\n/usr/local/lib/gcc/x86_64-pc-linux-gnu/9.0.0/include/c++/bits/stl_algobase.h:742:5: note: candidate: \u2018template&lt;class _ForwardIterator, class _Tp&gt; void std::fill(_ForwardIterator, _ForwardIterator, const _Tp&amp;)\u2019\n  742 |     fill(_ForwardIterator __first, _ForwardIterator __last, const _Tp&amp; __value)\n      |     ^~~~\n/usr/local/lib/gcc/x86_64-pc-linux-gnu/9.0.0/include/c++/bits/stl_algobase.h:742:5: note:   template argument deduction/substitution failed:\npf.cpp:12:74: note:   candidate expects 3 arguments, 2 provided\n   12 |     pf(from_type const&amp; a, std::string const&amp; pkn) noexcept(noexcept(fill(pk_, std::string{})))\n      |                                                                      ~~~~^~~~~~~~~~~~~~~~~~~~\npf.cpp:39:16: error: static assertion failed: string shouldn't throw\n   39 | static_assert( noexcept(pf&lt;std::string, 17&gt;{m, k}), \"string shouldn't throw\");\n      |                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n</code></pre>\n\n<p>This was confusing (who said anything about iterators?) until I saw the answer to my first question. The compiler couldn't see the <code>fill</code> members, so it tried the only <code>fill</code> method available to it: the one from <code>&lt;algorithm&gt;</code>, which was accidentally included via </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>. /usr/local/lib/gcc/x86_64-pc-linux-gnu/9.0.0/include/c++/string\n.. /usr/local/lib/gcc/x86_64-pc-linux-gnu/9.0.0/include/c++/bits/char_traits.h\n... /usr/local/lib/gcc/x86_64-pc-linux-gnu/9.0.0/include/c++/bits/stl_algobase.h\n</code></pre>\n\n<p>So I renamed the <code>fill</code> members to <code>fillz</code> (including the one in the <code>noexcept</code> operator), which resulted in:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ g++-99 -Wall -pedantic -Wextra -Wformat=2 -std=c++14 pf.cpp\npf.cpp: In instantiation of \u2018pf&lt;PK, N&gt;::pf(const from_type&amp;, const string&amp;) [with PK = int; long unsigned int N = 42; from_type = std::map&lt;std::__cxx11::basic_string&lt;char&gt;, std::__cxx11::basic_string&lt;char&gt; &gt;; std::string = std::__cxx11::basic_string&lt;char&gt;]\u2019:\npf.cpp:38:49:   required from here\npf.cpp:12:75: error: \u2018fillz\u2019 was not declared in this scope, and no declarations were found by argument-dependent lookup at the point of instantiation [-fpermissive]\n   12 |     pf(from_type const&amp; a, std::string const&amp; pkn) noexcept(noexcept(fillz(pk_, std::string{})))\n      |                                                                      ~~~~~^~~~~~~~~~~~~~~~~~~~\npf.cpp:12:75: note: declarations in dependent base \u2018pf&lt;int, 42&gt;\u2019 are not found by unqualified lookup\npf.cpp:12:75: note: use \u2018pf::fillz\u2019 instead\npf.cpp:12:75: error: cannot call member function \u2018const typename std::enable_if&lt;std::is_integral&lt;typename std::decay&lt;prop_t&gt;::type&gt;::value, pf&lt;PK, N&gt; &gt;::type&amp; pf&lt;PK, N&gt;::fillz(prop_t&amp;, const string&amp;, prop_t) const [with prop_t = int; PK = int; long unsigned int N = 42; typename std::enable_if&lt;std::is_integral&lt;typename std::decay&lt;prop_t&gt;::type&gt;::value, pf&lt;PK, N&gt; &gt;::type = pf&lt;int, 42&gt;; std::string = std::__cxx11::basic_string&lt;char&gt;]\u2019 without object\npf.cpp: In instantiation of \u2018pf&lt;PK, N&gt;::pf(const from_type&amp;, const string&amp;) [with PK = std::__cxx11::basic_string&lt;char&gt;; long unsigned int N = 17; from_type = std::map&lt;std::__cxx11::basic_string&lt;char&gt;, std::__cxx11::basic_string&lt;char&gt; &gt;; std::string = std::__cxx11::basic_string&lt;char&gt;]\u2019:\npf.cpp:39:49:   required from here\npf.cpp:12:75: error: \u2018fillz\u2019 was not declared in this scope, and no declarations were found by argument-dependent lookup at the point of instantiation [-fpermissive]\npf.cpp:12:75: note: declarations in dependent base \u2018pf&lt;std::__cxx11::basic_string&lt;char&gt;, 17&gt;\u2019 are not found by unqualified lookup\npf.cpp:12:75: note: use \u2018pf::fillz\u2019 instead\npf.cpp:12:75: error: cannot call member function \u2018const pf&lt;PK, N&gt;&amp; pf&lt;PK, N&gt;::fillz(std::string&amp;, const string&amp;) const [with PK = std::__cxx11::basic_string&lt;char&gt;; long unsigned int N = 17; std::string = std::__cxx11::basic_string&lt;char&gt;]\u2019 without object\npf.cpp:39:16: error: static assertion failed: string shouldn't throw\n   39 | static_assert( noexcept(pf&lt;std::string, 17&gt;{m, k}), \"string shouldn't throw\");\n      |                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n</code></pre>\n\n<p>Obviously GCC can still not see the member (now named <code>fillz</code>), but why does it complain about dependent bases? Struct <code>pf</code> has nothing to do with inheritance. Could it be because this kind of visibility problem comes up most often with dependent bases?</p>\n\n<p>In the end, the correct usage turned out to be:</p>\n\n<pre><code>noexcept(noexcept(std::declval&lt;pf&amp;&gt;().fill(std::declval&lt;PK&amp;&gt;(), std::string{})))\n</code></pre>\n"}, {"tags": ["c++", "input"], "comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 4, "creation_date": 1544019873, "post_id": 53634281, "comment_id": 94128268, "body": "Welcome to Stack Overflow! Unfortunately your question only contains requirements: it is not showing any efforts from your side to solve this problem yourself.  Please <a href=\"https://stackoverflow.com/posts/53634281/edit\">edit</a> your question to show <a href=\"http://whathaveyoutried.com\" rel=\"nofollow noreferrer\">your attempt far</a>, and you&#39;ll be much more likely to receive answers that help you progress.  Show us your work so far as a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, the result you were expecting and the results you got, and we&#39;ll help you figure it out. It may help to re-read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1544020141, "post_id": 53634281, "comment_id": 94128456, "body": "Please show your code, we cannot know what you mean eg with &quot;... it redirects to the first switch case.&quot; without the code"}, {"owner": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "edited": false, "score": 0, "creation_date": 1544031069, "post_id": 53634281, "comment_id": 94135144, "body": "Note that still with the corrected version, the program will accept input like <code>M garbage</code>.  If you don&#39;t want that to be the case, you could look into using <code>std::getline</code> instead."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 10749879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d837c030eee3c9291ba6ccf7ab23c1db?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/10749879/j-doe"}, "edited": false, "score": 0, "creation_date": 1544029099, "post_id": 53636769, "comment_id": 94134107, "body": "Thanks for the tip, I didn&#39;t know that I could do that in switch."}, {"owner": {"reputation": 1544, "user_id": 4547341, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10153075541268624/picture?type=large", "display_name": "dquijada", "link": "https://stackoverflow.com/users/4547341/dquijada"}, "reply_to_user": {"reputation": 31, "user_id": 10749879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d837c030eee3c9291ba6ccf7ab23c1db?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/10749879/j-doe"}, "edited": false, "score": 0, "creation_date": 1544029347, "post_id": 53636769, "comment_id": 94134239, "body": "oh, btw, you can&#39;t use switch with string, my bad (haven&#39;t used c++ in a while), so you will have to use &quot;if/else&quot; blocks"}, {"owner": {"reputation": 31, "user_id": 10749879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d837c030eee3c9291ba6ccf7ab23c1db?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/10749879/j-doe"}, "edited": false, "score": 0, "creation_date": 1544029547, "post_id": 53636769, "comment_id": 94134372, "body": "Yeah I know that, thanks. If you look at the edit in my post I&#39;m having some difficulty with reading the input as a string too, unfortunately."}, {"owner": {"reputation": 1544, "user_id": 4547341, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10153075541268624/picture?type=large", "display_name": "dquijada", "link": "https://stackoverflow.com/users/4547341/dquijada"}, "reply_to_user": {"reputation": 31, "user_id": 10749879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d837c030eee3c9291ba6ccf7ab23c1db?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/10749879/j-doe"}, "edited": false, "score": 0, "creation_date": 1544029961, "post_id": 53636769, "comment_id": 94134621, "body": "It should work with the capitalized versions &quot;P&quot; and &quot;M&quot;. The problem is you are using <code>slction == &quot;M&quot; || &#39;m&#39;</code> and that means &quot;is slction equal to M&quot;? and when the program answers it&#39;s not, the next question is &quot;m?&quot;, and obviously that doesn&#39;t make a lot of sense. Try changing it to: <code>slction == &quot;M&quot; || slction == &quot;m&quot;</code>"}, {"owner": {"reputation": 31, "user_id": 10749879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d837c030eee3c9291ba6ccf7ab23c1db?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/10749879/j-doe"}, "edited": false, "score": 1, "creation_date": 1544030410, "post_id": 53636769, "comment_id": 94134843, "body": "Well, I had that wrong in my mind for so long, after correcting it like you said it works flawlessly, thanks."}], "tags": [], "owner": {"reputation": 1544, "user_id": 4547341, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10153075541268624/picture?type=large", "display_name": "dquijada", "link": "https://stackoverflow.com/users/4547341/dquijada"}, "is_accepted": true, "score": 1, "last_activity_date": 1544029381, "last_edit_date": 1544029381, "creation_date": 1544027611, "answer_id": 53636769, "question_id": 53634281, "link": "https://stackoverflow.com/questions/53634281/cinput-needs-to-be-a-single-character-but-it-accepts-multiple-characters-an/53636769#53636769", "title": "(c++)Input needs to be a single character, but it accepts multiple characters and checks the first letter", "body": "<p>One comment before I answer:</p>\n\n<p>Instead of</p>\n\n<pre><code>case 'M':\n  goto Morse;\n  break;\ncase 'm':\n  goto Morse;\n  break;\n</code></pre>\n\n<p>you could use</p>\n\n<pre><code>case 'M':\ncase 'm':\n  goto Morse;\n  break;\n</code></pre>\n\n<p><code>break</code> stops the block so as long as you don't use it you can nest one after another. You can even do stuff like:</p>\n\n<pre><code>case 'M':\n  cout &lt;&lt; \"CAPITALIZED\";\ncase 'm':\n  goto Morse;\n  break;\n</code></pre>\n\n<p>Now, to your question: you are reading a <code>char</code>, meaning it will only take the first letter you input. Use a string instead if you want to be able to read words too:</p>\n\n<pre><code>string slction;\ncin &gt;&gt; slction;\n</code></pre>\n\n<p>PD: remember to change the <code>case 'M'</code> and other options' quotes to double quotes (for strings)</p>\n\n<p>PD2: you can't use switch with strings, so you will have to use if/else blocks</p>\n"}, {"tags": [], "owner": {"reputation": 34, "user_id": 10512179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EjyfP.gif?s=128&g=1", "display_name": "Default", "link": "https://stackoverflow.com/users/10512179/default"}, "is_accepted": false, "score": 0, "last_activity_date": 1544032357, "creation_date": 1544032357, "answer_id": 53638066, "question_id": 53634281, "link": "https://stackoverflow.com/questions/53634281/cinput-needs-to-be-a-single-character-but-it-accepts-multiple-characters-an/53638066#53638066", "title": "(c++)Input needs to be a single character, but it accepts multiple characters and checks the first letter", "body": "<p>With what was said in the first answer, additionally you could use <code>#include &lt;cctype&gt;</code> toupper() function to remove extra cases. As well as validate your input with if statements. </p>\n\n<p>example validation function:</p>\n\n<pre><code>char isValid(char &amp;selection){\n\n    std::cin &gt;&gt; selection;\n    selection = toupper(selection); // ctype.h for toupper changes all to uppercase characters\n\n    //checks to see if more than 1 character is inputed\n    if (std::cin.get() != '\\n'){\n            std::cin.ignore(256, '\\n'); //ignores 256 chars until newline('\\n')\n            std::cin.clear(); // clears the input\n            selection = '\\0'; // sets selection to null\n    }\n    return selection;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/ndlASc\" rel=\"nofollow noreferrer\">DEMO</a></p>\n"}], "owner": {"reputation": 31, "user_id": 10749879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d837c030eee3c9291ba6ccf7ab23c1db?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/10749879/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 53636769, "answer_count": 2, "score": 1, "last_activity_date": 1544032357, "creation_date": 1544019227, "last_edit_date": 1544030552, "question_id": 53634281, "link": "https://stackoverflow.com/questions/53634281/cinput-needs-to-be-a-single-character-but-it-accepts-multiple-characters-an", "title": "(c++)Input needs to be a single character, but it accepts multiple characters and checks the first letter", "body": "<p>I'm having a problem with a program I've built.\nIt should take input from the user and check whether it's 'P' or 'M'.\nThe problem is that I only want it to work if you enter 'P' or 'M', as it is now it accepts as 'M' anything you type as long as it starts with an 'M' (eg. if you type \"morse\" it will accept it as 'M').\nI'm not a programmer and don't have much knowledge of c++, I just made it for fun. An example of how it is:</p>\n\n<pre><code>int main(){\n  std::cout &lt;&lt; \"Enter 'M' or 'P'\\n\";\n  char slction;\nInputrror:\n  std::cin &gt;&gt; slction;\n  switch (slction) {\n  case 'M':\n    goto Morse;\n    break;\n  case 'm':\n    goto Morse;\n    break;\n  case 'P':\n    goto Text;\n    break;\n  case 'p':\n    goto Text;\n    break;\n  default:\n    std::cout &lt;&lt; \"Please only enter 'M' or 'P'\\n;\n    goto Inputrror;\n    break;\n  }\nMorse:\n  std::cout &lt;&lt; \"Morse\\n;\"\n  return 1;\nText:\n  std::cout &lt;&lt; \"Text\\n;\"\n  return 1;\n}\n</code></pre>\n\n<p>EDIT: I tried to read the input as a string like it was suggested and it now works properly. The correct version:</p>\n\n<pre><code>int main() {\n  std::cout &lt;&lt; \"Enter 'M' or 'P'\\n\";\n  std::string slction;\n\nInputrror:\n  std::cin &gt;&gt; slction;\n  if (slction == \"M\" || slction == 'm') {\n    goto Morse;\n  }\n  else if (slction == \"P\" || slction == 'p') {\n    goto Text;\n  }\n  else {\n    std::cout &lt;&lt; \"Please only enter 'P' or 'M'\\n\";\n    goto Inputrror;\n  }\n\nMorse:\n  std::cout &lt;&lt; \"Morse\\n\";\n  return 1;\n\nText:\n  std::cout &lt;&lt; \"Text\\n\";\n  return 1;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "templates", "c++17", "constexpr"], "answers": [{"comments": [{"owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "edited": false, "score": 0, "creation_date": 1544019182, "post_id": 53634187, "comment_id": 94127818, "body": "so according to the standard the templated <code>Foo</code> shouldn&#39;t work either, yet the implementation allow it? I see"}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 0, "creation_date": 1544020068, "post_id": 53634187, "comment_id": 94128382, "body": "What?? This proposal is from 2013, quite old comparing to the current standard. Especially with <code>if constexpr</code> in C++17, this restriction will cause a lot of pain to metaprogramming. I mean, the simplest way to compute a type with static branching is to write a function with <code>auto</code> return then branching in the function body. If this proposal finally integrated into the standard, such static function must be moved to outside the template..."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 0, "creation_date": 1544020435, "post_id": 53634187, "comment_id": 94128689, "body": "@liliscent It&#39;s not a proposal, it&#39;s an open core language issue."}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 0, "creation_date": 1544020715, "post_id": 53634187, "comment_id": 94128892, "body": "@Barry Yeah, I meant this issue. Just there is a suggestion in the issue to forbid this kind of use in template. It will cause much inconvenience."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 0, "creation_date": 1544025133, "post_id": 53634187, "comment_id": 94131769, "body": "@liliscent: It actually won&#39;t change much. <code>if constexpr</code> means that you&#39;re inside of a function. And function definitions are considered to appear just after the class is complete, so you ought to be able to call <code>constexpr</code> members just fine."}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1544028295, "post_id": 53634187, "comment_id": 94133652, "body": "@Nicol For example, you can no longer interleave static function with <code>using</code> alias to store the type result, nor can you add nontrivial <code>static_assert</code> check in a natural location, which will at least make the code less readable. What is weird is that member function in template is instantiated on-demand, it\u2019s a different story with the non-template case, this core issue doesn\u2019t make sense to me."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1544018884, "creation_date": 1544018884, "answer_id": 53634187, "question_id": 53634141, "link": "https://stackoverflow.com/questions/53634141/how-does-providing-a-class-a-template-solve-invalid-constexpr-dependencies-c/53634187#53634187", "title": "How does providing a class a template solve invalid constexpr dependencies? C++", "body": "<p>This is <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#1626\" rel=\"nofollow noreferrer\">CWG 1626</a>:</p>\n\n<blockquote>\n  <p>The Standard should make clear that a <code>constexpr</code> member function cannot be used in a constant expression until its class is complete. For example:</p>\n\n<pre><code>template&lt;typename T&gt; struct C {\n  template&lt;typename T2&gt; static constexpr bool _S_chk() {\n    return false;\n  }\n  static const bool __value = _S_chk&lt;int&gt;();\n}; \n\nC&lt;double&gt; c;\n</code></pre>\n  \n  <p>Current implementations accept this, although they reject the corresponding non-template case:</p>\n\n<pre><code>struct C {\n  static constexpr bool _S_chk() { return false; }\n  static const bool __value = _S_chk();\n};\n\nC c; \n</code></pre>\n  \n  <p>Presumably the template case should be handled consistently with the non-template case.</p>\n</blockquote>\n"}], "owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 53634187, "answer_count": 1, "score": 0, "last_activity_date": 1544018884, "creation_date": 1544018694, "question_id": 53634141, "link": "https://stackoverflow.com/questions/53634141/how-does-providing-a-class-a-template-solve-invalid-constexpr-dependencies-c", "title": "How does providing a class a template solve invalid constexpr dependencies? C++", "body": "<p>classes seem to have a problem caling their constexpr member functions in another constexpr context. For example in this piece of code that I proposed <a href=\"https://stackoverflow.com/questions/53633322/static-constexpr-member-function-not-callable-inside-non-template-class-c\">in an earlier question</a> this behaviour can be seen:</p>\n\n<pre><code>struct Foo {\n    constexpr static bool TRUE() {\n        return true;\n    }\n    static_assert(Foo::TRUE(), \"\"); //ERROR\n};\n</code></pre>\n\n<p>As the <code>static_assert</code> depends on <code>Foo::TRUE()</code> compilation fails because <code>Foo::TRUE()</code> isn't fully resolved in this context yet.</p>\n\n<hr>\n\n<p>So how does adding a single template to <code>Foo</code> solve the whole issue?:</p>\n\n<pre><code>template&lt;int x&gt;\nstruct Foo {\n    constexpr static bool TRUE() {\n        return true;\n    }\n    static_assert(Foo::TRUE(), \"\"); //compiles fine\n};\n</code></pre>\n\n<p>After all these insights this code here shouldn't compile - yet it does. It doesn't seem to make sense, as there isn't any difference to the non-template version. </p>\n\n<p>Also there should always be equally many <code>TRUE()</code>-functions and <code>static_assert</code>-calls as there are <code>Foo&lt;&gt;</code> classes, so the same dependency problem should occur when compiling.</p>\n\n<hr>\n\n<p><em>I am using Visual Studio 17 Community Version 15.9.0 - thanks for any help!</em></p>\n"}, {"tags": ["c++", "memory-leaks", "memoryanalyzer"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 1, "creation_date": 1544018349, "post_id": 53633998, "comment_id": 94127309, "body": "Your runtime/OS is probably being clever and not actually allocating memory you requested but don&#39;t use. Try writing stuff into the memory."}, {"owner": {"reputation": 864, "user_id": 10320907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a781c80933f17fa87d97b70e3fca260?s=128&d=identicon&r=PG", "display_name": "tunglt", "link": "https://stackoverflow.com/users/10320907/tunglt"}, "edited": false, "score": 0, "creation_date": 1544019514, "post_id": 53633998, "comment_id": 94128020, "body": "Your compiler does the optimization and malloc calls were stripped out from the final code."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 864, "user_id": 10320907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a781c80933f17fa87d97b70e3fca260?s=128&d=identicon&r=PG", "display_name": "tunglt", "link": "https://stackoverflow.com/users/10320907/tunglt"}, "edited": false, "score": 0, "creation_date": 1544021010, "post_id": 53633998, "comment_id": 94129101, "body": "@TungLeThanh I am not entirely sure whether this is a valid optimization. You can, even at runtime, &quot;redirect&quot; <code>malloc</code> calls to your own function with side effects (e.g., by <code>LD_PRELOAD</code>), which compiler can&#39;t know at compile time. Related discussion: <a href=\"https://stackoverflow.com/q/53373421/580083\">stackoverflow.com/q/53373421/580083</a>"}, {"owner": {"reputation": 864, "user_id": 10320907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a781c80933f17fa87d97b70e3fca260?s=128&d=identicon&r=PG", "display_name": "tunglt", "link": "https://stackoverflow.com/users/10320907/tunglt"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1544021441, "post_id": 53633998, "comment_id": 94129411, "body": "@DanielLangr: I observed the behavior when compiling the given application with -O1 activated (by gcc)."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 864, "user_id": 10320907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a781c80933f17fa87d97b70e3fca260?s=128&d=identicon&r=PG", "display_name": "tunglt", "link": "https://stackoverflow.com/users/10320907/tunglt"}, "edited": false, "score": 0, "creation_date": 1544021613, "post_id": 53633998, "comment_id": 94129515, "body": "@TungLeThanh You are right, the rationale is that <code>malloc</code> is not an external function, but a library function with no side effects. Thus the compiler is allowed to optimize out its calls."}, {"owner": {"reputation": 864, "user_id": 10320907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a781c80933f17fa87d97b70e3fca260?s=128&d=identicon&r=PG", "display_name": "tunglt", "link": "https://stackoverflow.com/users/10320907/tunglt"}, "edited": false, "score": 0, "creation_date": 1544021646, "post_id": 53633998, "comment_id": 94129551, "body": "You can see the change in the memory comsumption if you change the memory request size to 1024*1024. In fact, glibc use about 128K (or 1M, depended on model) blocks for memory allocator. If your request size is too small, your application will use the avails memory until the 128K block is full."}], "answers": [{"tags": [], "owner": {"reputation": 1127, "user_id": 1796858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c1b4f442048641cf0656ab4cdc4b6ec?s=128&d=identicon&r=PG", "display_name": "Owl", "link": "https://stackoverflow.com/users/1796858/owl"}, "is_accepted": false, "score": 0, "last_activity_date": 1544024437, "last_edit_date": 1544024437, "creation_date": 1544023388, "answer_id": 53635514, "question_id": 53633998, "link": "https://stackoverflow.com/questions/53633998/memory-leak-analyse-with-top/53635514#53635514", "title": "memory leak analyse with top", "body": "<p>Try the following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(){\n  char* q;\n  for(int i=0; i&lt;10000; i++){\n    q = (char*)malloc(1024); \n    memset(q,0,1024);\n  }\n  getchar();\n  return 0;\n}\n</code></pre>\n\n<p>for different values in the for loop. </p>\n\n<p>The issue here is Linux doesn't necessary use memory even if it's allocated until it's actually populated. Therefore you need to write data to what you're allocating else it might not even register that that memory is in use. This is why some applications can allocate memory and it's fine, then even when they have allocated, when they come to use the memory, they can find that the memory isn't available.</p>\n\n<p>The memset will force writes of zeros into the allocated buffer, thereby causing the memory to be used and register as being used in top. Note that htop may be easier for you to use here.</p>\n\n<p>If you want to follow up further look into \"optimistic malloc\" which is a Linux characteristic, note that some other operating systems do not behave this way. </p>\n\n<p>Also it's worth pointing out that internally memory is allocated in contiguous chunks of a certain size. So allocating, say an additional 1KB may not register a size increase if the memory is allocated in minimal block size of say 4k. </p>\n"}, {"tags": [], "owner": {"reputation": 864, "user_id": 10320907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a781c80933f17fa87d97b70e3fca260?s=128&d=identicon&r=PG", "display_name": "tunglt", "link": "https://stackoverflow.com/users/10320907/tunglt"}, "is_accepted": false, "score": 1, "last_activity_date": 1544098648, "last_edit_date": 1544098648, "creation_date": 1544028140, "answer_id": 53636918, "question_id": 53633998, "link": "https://stackoverflow.com/questions/53633998/memory-leak-analyse-with-top/53636918#53636918", "title": "memory leak analyse with top", "body": "<p>From malloc man page :</p>\n\n<blockquote>\n  <blockquote>\n    <p>Normally, malloc() allocates memory from the heap, and adjusts the\n           size of the heap as required, using sbrk(2).  When allocating blocks\n           of memory larger than MMAP_THRESHOLD bytes, the glibc malloc()\n           implementation allocates the memory as a private anonymous mapping\n           using mmap(2).  MMAP_THRESHOLD is 128 kB by default, but is\n           adjustable using mallopt(3).  Prior to Linux 4.7 allocations\n           performed using mmap(2) were unaffected by the RLIMIT_DATA resource\n           limit; since Linux 4.7, this limit is also enforced for allocations\n           performed using mmap(2).</p>\n  </blockquote>\n</blockquote>\n\n<p>The memory pools are called arenas and the implementation is in arena.c. \nThe macro HEAP_MAX_SIZE define the maximum size of an arena and it is basically 1MB on 32-bit and 64MB on 64-bit:</p>\n\n<pre><code>HEAP_MAX_SIZE = (2 * DEFAULT_MMAP_THRESHOLD_MAX)\n32-bit [DEFAULT_MMAP_THRESHOLD_MAX = (512 * 1024)] = 1,048,576 (1MB)\n64-bit [DEFAULT_MMAP_THRESHOLD_MAX = (4 * 1024 * 1024 * sizeof(long))] = 67,108,864 (64MB)\n</code></pre>\n\n<p>Information from heap implementation (arena.c):</p>\n\n<blockquote>\n  <p>/* A heap is a single contiguous memory region holding (coalesceable) malloc_chunks.  It is allocated with mmap() and always starts at an address aligned to HEAP_MAX_SIZE.  */</p>\n</blockquote>\n\n<p><strong>EDIT:</strong> </p>\n\n<p>Heap allocation can be observed by using <strong>strace</strong>. In the first call to brk(), the main arena is allocated with 200K bytes (72K from libstdc++ with 128K top_pad ).</p>\n\n<pre><code>brk(NULL)                               = 0x556ecb423000 -&gt; current program break\nbrk(0x556ecb455000)                     = 0x556ecb455000 -&gt; resize the heap by moving brk 0x32000 bytes upward (main arena initialization with 200K). \nwrite(1, \"i = 0\\n\", 8)                = 8\n...\nwrite(1, \"i = 123\\n\", 8)                = 8     \nbrk(0x556ecb476000)                     = 0x556ecb476000 -&gt; resize the heap by moving brk 0x21000 bytes upward (growing heap 128K). \n...\nwrite(1, \"i = 252\\n\", 8)                = 8\nbrk(0x556ecb497000)                     = 0x556ecb497000 -&gt; resize the heap by moving brk 0x21000 bytes upward (growing heap 128K). \n</code></pre>\n\n<p>Your application used only 100K bytes of 128K available heap, so the memory consumption would not be observed by top or htop program.</p>\n\n<p>You can see the change in memory consumption easily if you force the glibc uses mmap() by requesting blocks larger than 128K or by increasing the number of blocks ( > 128 ).</p>\n"}, {"tags": [], "owner": {"reputation": 444, "user_id": 9865869, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-p2qxnOoReHw/AAAAAAAAAAI/AAAAAAAACOo/Ex_LUebVKPg/photo.jpg?sz=128", "display_name": "Tim Boddy", "link": "https://stackoverflow.com/users/9865869/tim-boddy"}, "is_accepted": false, "score": 0, "last_activity_date": 1544057026, "creation_date": 1544057026, "answer_id": 53642970, "question_id": 53633998, "link": "https://stackoverflow.com/questions/53633998/memory-leak-analyse-with-top/53642970#53642970", "title": "memory leak analyse with top", "body": "<p>If you want to understand the memory usage, don't use top.  Use the free open source program <a href=\"https://github.com/vmware/chap\" rel=\"nofollow noreferrer\">https://github.com/vmware/chap</a>  (disclaimer: I am the original developer).</p>\n\n<p>Just gather a live core before the program finishes, for example by running gcore, then type:</p>\n\n<p>chap <em>your-core-file-name</em></p>\n\n<p>Then you can do things like:</p>\n\n<p>count leaked\nlist leaked \ncount used\ncount free\n....</p>\n\n<p>Here is an example using your program, gathering the core after 30 seconds:</p>\n\n<pre><code>-bash-4.1$ ./q53633998 &amp;\n[1] 18014\n-bash-4.1$ sleep 30\ngcore 18014\n-bash-4.1$ gcore 18014\n0x00000030ed6aca20 in __nanosleep_nocancel () at ../sysdeps/unix/syscall-         template.S:82\n82      T_PSEUDO (SYSCALL_SYMBOL, SYSCALL_NAME, SYSCALL_NARGS)\nSaved corefile core.18014\n-bash-4.1$ ~/public_html/chap core.18014\nchap&gt; count used\n36 allocations use 0x9120 (37,152) bytes.\nchap&gt; count free\n1 allocations use 0x17db0 (97,712) bytes.\nchap&gt; count leaked\n35 allocations use 0x8d18 (36,120) bytes.\nchap&gt; count anchored\n1 allocations use 0x408 (1,032) bytes.\nchap&gt; list anchored\nUsed allocation at 19d4e40 of size 408\n\n1 allocations use 0x408 (1,032) bytes.\nchap&gt; explain 19d4e40\nAddress 19d4e40 is at offset 0 of\nan anchored allocation at 19d4e40 of size 408\nAllocation at 19d4e40 appears to be directly anchored from at least one stack.\nAddress 0x7ffc88570270 is on the live part of the stack for thread 1.\nStack address 7ffc88570270 references 19d4e40\n\nchap&gt; list leaked\nUsed allocation at 19cc010 of size 408\n\nUsed allocation at 19cc420 of size 408\n\nUsed allocation at 19cc830 of size 408\n\nUsed allocation at 19ccc40 of size 408\n\nUsed allocation at 19cd050 of size 408\n\nUsed allocation at 19cd460 of size 408\n\nUsed allocation at 19cd870 of size 408\n\nUsed allocation at 19cdc80 of size 408\n\nUsed allocation at 19ce090 of size 408\n\nUsed allocation at 19ce4a0 of size 408\n\nUsed allocation at 19ce8b0 of size 408\n\nUsed allocation at 19cecc0 of size 408\n\nUsed allocation at 19cf0d0 of size 408\n\nUsed allocation at 19cf4e0 of size 408\n\nUsed allocation at 19cf8f0 of size 408\n\nUsed allocation at 19cfd00 of size 408\n\nUsed allocation at 19d0110 of size 408\n\nUsed allocation at 19d0520 of size 408\n\nUsed allocation at 19d0930 of size 408\n\nUsed allocation at 19d0d40 of size 408\n\nUsed allocation at 19d1150 of size 408\n\nUsed allocation at 19d1560 of size 408\n\nUsed allocation at 19d1970 of size 408\n\nUsed allocation at 19d1d80 of size 408\n\nUsed allocation at 19d2190 of size 408\n\nUsed allocation at 19d25a0 of size 408\n\nUsed allocation at 19d29b0 of size 408\n\nUsed allocation at 19d2dc0 of size 408\n\nUsed allocation at 19d31d0 of size 408\n\nUsed allocation at 19d35e0 of size 408\n\nUsed allocation at 19d39f0 of size 408\n\nUsed allocation at 19d3e00 of size 408\n\nUsed allocation at 19d4210 of size 408\n\nUsed allocation at 19d4620 of size 408\n\nUsed allocation at 19d4a30 of size 408\n\n35 allocations use 0x8d18 (36,120) bytes.\nchap&gt; list free\nFree allocation at 19d5250 of size 17db0\n\n1 allocations use 0x17db0 (97,712) bytes.\nchap&gt;\n</code></pre>\n\n<p>That last \"free\" allocation is the tail of a block of memory that was allocated during the first malloc call and gradually carved up as subsequent malloc calls were made.</p>\n\n<p>Of course there are other tools out there (e.g. valgrind) that work differently by instrumenting the process but if you want a tool that can analyze memory usage of a process without changing the way the process is run, chap is a good choice.</p>\n"}], "owner": {"reputation": 959, "user_id": 3166532, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f116ebe7c11450f913285087ec9109d5?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/3166532/andre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1544098648, "creation_date": 1544018249, "question_id": 53633998, "link": "https://stackoverflow.com/questions/53633998/memory-leak-analyse-with-top", "title": "memory leak analyse with top", "body": "<p>I would like to use the tool \"top\" to analyze the memory consumption and possible memory leaks of a process.\nFor this I have written this program (program-name: memoryTest):</p>\n\n<pre><code>int main(){\nchar* q;\nfor(int i=0; i&lt;100; i++){\n    q = (char*) malloc(1024); \n    sleep(1);\n}\nreturn 0;   \n</code></pre>\n\n<p>}</p>\n\n<p>With top I can now watch this program,\nby filtering with the option \"o\" and the filter specification \"COMMAND = memoryTest\" after the said process, however I see no change in the memory consumption of the process.\nDo I have a stupid mistake here?</p>\n"}, {"tags": ["c++", "data-structures", "linked-list", "doubly-linked-list"], "comments": [{"owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "edited": false, "score": 0, "creation_date": 1544019176, "post_id": 53633982, "comment_id": 94127814, "body": "This code cannot be &quot;run&quot; Please include a complete example include a main function to show how you are using it."}, {"owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "edited": false, "score": 0, "creation_date": 1544019284, "post_id": 53633982, "comment_id": 94127881, "body": "Ideally make it so that the code can be pasted to <a href=\"https://wandbox.org/\" rel=\"nofollow noreferrer\">wandbox.org</a> and it will run and demostrate your error."}, {"owner": {"reputation": 5, "user_id": 10506477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eac7a294350df13ae9ed4fc183b946a?s=128&d=identicon&r=PG&f=1", "display_name": "mania", "link": "https://stackoverflow.com/users/10506477/mania"}, "reply_to_user": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "edited": false, "score": 0, "creation_date": 1544020148, "post_id": 53633982, "comment_id": 94128462, "body": "I just included the entire code including the main function @bradgonesurfing"}, {"owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "edited": false, "score": 0, "creation_date": 1544020380, "post_id": 53633982, "comment_id": 94128648, "body": "You could start by simplifying the code and starting with a few simple cases. For example I have done for you <a href=\"https://wandbox.org/permlink/N5MUzCDzEuGjNJoh\" rel=\"nofollow noreferrer\">wandbox.org/permlink/N5MUzCDzEuGjNJoh</a> which doesn&#39;t cause a segmentation fault. Then build up your test cases until you find the problem."}, {"owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "edited": false, "score": 0, "creation_date": 1544021149, "post_id": 53633982, "comment_id": 94129200, "body": "Ok. You now have a verifiable segmentation fault. See <a href=\"https://wandbox.org/permlink/9k91JSQuQm68Ujgm\" rel=\"nofollow noreferrer\">wandbox.org/permlink/9k91JSQuQm68Ujgm</a> Next time you know how to ask a question. ;)"}, {"owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "edited": false, "score": 0, "creation_date": 1544023942, "post_id": 53633982, "comment_id": 94131028, "body": "But please change your example so that it is not processing standard input. using scanf. Set up a fixed test case so that you can demonstrate to people here exactly what you are running."}, {"owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "edited": false, "score": 0, "creation_date": 1544025244, "post_id": 53633982, "comment_id": 94131842, "body": "And why are you mixing cin and scanf? Did you write this code?"}, {"owner": {"reputation": 5, "user_id": 10506477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eac7a294350df13ae9ed4fc183b946a?s=128&d=identicon&r=PG&f=1", "display_name": "mania", "link": "https://stackoverflow.com/users/10506477/mania"}, "reply_to_user": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "edited": false, "score": 0, "creation_date": 1544025460, "post_id": 53633982, "comment_id": 94131990, "body": "Yes it doesn&#39;t cause a segmentation fault until we don&#39;t include a function to print the linked list.When I included the printList function it again showed the segmentation fault.Here is the link for it-<a href=\"https://ide.geeksforgeeks.org/ZeqrQf9esb\" rel=\"nofollow noreferrer\">ide.geeksforgeeks.org/ZeqrQf9esb</a> @bradgonesurfing"}, {"owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "edited": false, "score": 0, "creation_date": 1544027263, "post_id": 53633982, "comment_id": 94133035, "body": "Thanks for the working test case. I have now resolved your problem in an answer"}, {"owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "edited": false, "score": 0, "creation_date": 1544027448, "post_id": 53633982, "comment_id": 94133158, "body": "I also rewrote your question as an example to you how you should write questions in the future if you want answers. I was being generous with my time today. Most people are not :)"}, {"owner": {"reputation": 5, "user_id": 10506477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eac7a294350df13ae9ed4fc183b946a?s=128&d=identicon&r=PG&f=1", "display_name": "mania", "link": "https://stackoverflow.com/users/10506477/mania"}, "reply_to_user": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "edited": false, "score": 0, "creation_date": 1544031255, "post_id": 53633982, "comment_id": 94135229, "body": "Thank you so much for your answer and also for editing the question.But still when I tried using your code to insert after the 1st position it&#39;s showing segmentation fault.It only inserts value at the head position.Here is the link where I tried working your code-(<a href=\"https://ide.geeksforgeeks.org/fZ2j3gMLaK\" rel=\"nofollow noreferrer\">ide.geeksforgeeks.org/fZ2j3gMLaK</a>) . And thanks for your valuable time :) @bradgonesurfing"}, {"owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "edited": false, "score": 0, "creation_date": 1544033069, "post_id": 53633982, "comment_id": 94136100, "body": "Just put printf everywhere until you find out exactly where it crashes. This only works on wandbox but not on geeksforgeeks. Geeksforgeeks doesn&#39;t output anything if there is an exception."}, {"owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "edited": false, "score": 0, "creation_date": 1544033114, "post_id": 53633982, "comment_id": 94136122, "body": "You could also use a proper IDE like visual studio to debug it. You need to put some self effort in."}, {"owner": {"reputation": 5, "user_id": 10506477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eac7a294350df13ae9ed4fc183b946a?s=128&d=identicon&r=PG&f=1", "display_name": "mania", "link": "https://stackoverflow.com/users/10506477/mania"}, "reply_to_user": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "edited": false, "score": 1, "creation_date": 1544075788, "post_id": 53633982, "comment_id": 94149411, "body": "Thanks a lot I successfully got the code run without any segmentation fault :) @bradgonesurfing"}, {"owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "edited": false, "score": 0, "creation_date": 1544079400, "post_id": 53633982, "comment_id": 94150642, "body": "Glad to be of help. Hopefully the most help I&#39;ve given is not the solution but the process to help you solve it quicker next time. good luck"}], "answers": [{"comments": [{"owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "edited": false, "score": 0, "creation_date": 1544022563, "post_id": 53634915, "comment_id": 94130171, "body": "I added your suggested fixes to <a href=\"https://wandbox.org/permlink/VW6no2mZsW1TVLZZ\" rel=\"nofollow noreferrer\">wandbox.org/permlink/VW6no2mZsW1TVLZZ</a> but there is still a segv"}, {"owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "reply_to_user": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "edited": false, "score": 0, "creation_date": 1544029295, "post_id": 53634915, "comment_id": 94134209, "body": "you need to think about what happens if you want to insert into position 0 (what does it come after?  How do your replace the head?)  Also, if you request to insert at the end, is temp null?  You might want to stop this loop if temp-&gt;next is null.  Then decide if it&#39;s an error if k &lt; pos."}], "tags": [], "owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "is_accepted": false, "score": 1, "last_activity_date": 1544021379, "creation_date": 1544021379, "answer_id": 53634915, "question_id": 53633982, "link": "https://stackoverflow.com/questions/53633982/what-causes-the-segmentation-fault-in-the-doubly-linked-list-code/53634915#53634915", "title": "What causes the segmentation fault in the doubly linked list code", "body": "<p>1) don't mix malloc and new in the same code.  You'll lose track of which nodes came from which allocator and if you free something that came from new, or delete something that came from malloc, you have a serious bug.</p>\n\n<p>2) while advancing \"k\" times... you forget to increment k so never stop advancing, and walk off your list.  That's a source of crashes:</p>\n\n<pre><code>    while(k&lt;pos)\n    {\n        temp=temp-&gt;next;\n    }\n</code></pre>\n\n<p>There may be more, but I stopped looking after seeing #2.</p>\n"}, {"tags": [], "owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "is_accepted": true, "score": 0, "last_activity_date": 1544027222, "creation_date": 1544027222, "answer_id": 53636637, "question_id": 53633982, "link": "https://stackoverflow.com/questions/53633982/what-causes-the-segmentation-fault-in-the-doubly-linked-list-code/53636637#53636637", "title": "What causes the segmentation fault in the doubly linked list code", "body": "<p>The fix is to initialize next and prev to be null. If you don't do this then they take random values. The important lines are</p>\n\n<pre><code>struct Node {\n    int data;\n    Node * next=nullptr;\n    Node * prev=nullptr;\n}; \n</code></pre>\n\n<p>See <a href=\"https://wandbox.org/permlink/qooehizoRifrvOVX\" rel=\"nofollow noreferrer\">https://wandbox.org/permlink/qooehizoRifrvOVX</a> for a working example. Full code below</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct Node {\n    int data;\n    Node * next=nullptr;\n    Node * prev=nullptr;\n};\n\nvoid addNode(struct Node **head_ref,int pos,int data)\n{\n    struct Node*nn=new Node;\n    int k=0;\n    nn-&gt;data=data;\n    if(*head_ref==nullptr)\n        *head_ref=nn;\n    else\n    {\n        struct Node*temp=*head_ref;\n\n        while(k&lt;pos)\n        {\n            temp=temp-&gt;next;\n        }\n\n        if(temp-&gt;next!=nullptr)\n        {\n\n            nn-&gt;prev=temp;\n            nn-&gt;next=temp-&gt;next;\n            temp-&gt;next=nn;\n            nn-&gt;next-&gt;prev=nn;\n\n\n        }\n        else\n        {\n            nn-&gt;next=nullptr;\n            nn-&gt;prev=temp;\n            temp-&gt;next=nn;\n        }\n    }\n}\n void printList(struct Node *Node)\n    {\n      struct Node *temp=Node;\n\n\n      //goto end\n      while(temp-&gt;next!=nullptr)\n      {\n        temp=temp-&gt;next;\n      }\n\n\n      //goto start\n      while(temp-&gt;prev!=nullptr)\n      {\n       temp = temp-&gt;prev;\n      }\n\n\n\n      //now print\n      while(temp!=nullptr)\n      {\n          printf(\"%d \",temp-&gt;data);\n          temp=temp-&gt;next;\n      }\n\n\n    }\n\nint main()\n{\n    Node * head; \n    addNode(&amp;head,0,10);\n    addNode(&amp;head,0,11);\n    addNode(&amp;head,0,12);\n\n    std::cerr &lt;&lt; head-&gt;data &lt;&lt; std::endl;\n    std::cerr &lt;&lt; head-&gt;next-&gt;data &lt;&lt; std::endl;\n    std::cerr &lt;&lt; head-&gt;next-&gt;next-&gt; data &lt;&lt; std::endl;  \n\n    printList(head);\n}\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 10506477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eac7a294350df13ae9ed4fc183b946a?s=128&d=identicon&r=PG&f=1", "display_name": "mania", "link": "https://stackoverflow.com/users/10506477/mania"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 53636637, "answer_count": 2, "score": 0, "last_activity_date": 1544027403, "creation_date": 1544018172, "last_edit_date": 1544027403, "question_id": 53633982, "link": "https://stackoverflow.com/questions/53633982/what-causes-the-segmentation-fault-in-the-doubly-linked-list-code", "title": "What causes the segmentation fault in the doubly linked list code", "body": "<p>When printList is called the following code causes a segmentation fault. Why is this?</p>\n\n<p>A working example of the failure is at <a href=\"https://ide.geeksforgeeks.org/ZeqrQf9esb\" rel=\"nofollow noreferrer\">https://ide.geeksforgeeks.org/ZeqrQf9esb</a></p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct Node {\n    int data;\n    Node * next;\n    Node * prev;\n};\n\nvoid addNode(struct Node **head_ref,int pos,int data)\n{\n    struct Node*nn=new Node;\n    int k=0;\n    nn-&gt;data=data;\n    if(*head_ref==nullptr)\n        *head_ref=nn;\n    else\n    {\n        struct Node*temp=*head_ref;\n\n        while(k&lt;pos)\n        {\n            temp=temp-&gt;next;\n        }\n\n        if(temp-&gt;next!=nullptr)\n        {\n\n            nn-&gt;prev=temp;\n            nn-&gt;next=temp-&gt;next;\n            temp-&gt;next=nn;\n            nn-&gt;next-&gt;prev=nn;\n\n\n        }\n        else\n        {\n            nn-&gt;next=nullptr;\n            nn-&gt;prev=temp;\n            temp-&gt;next=nn;\n        }\n    }\n}\n void printList(struct Node *Node)\n    {\n      struct Node *temp=Node;\n      //goto end\n      while(temp-&gt;next!=NULL)\n      {\n        temp=temp-&gt;next;\n      }\n      //goto start\n      while(temp-&gt;prev!=NULL)\n      {\n       temp = temp-&gt;prev;\n      }\n      //now print\n      while(temp!=NULL)\n      {\n          printf(\"%d \",temp-&gt;data);\n          temp=temp-&gt;next;\n      }\n\n    }\n\nint main()\n{\n    Node * head; \n    addNode(&amp;head,0,10);\n    addNode(&amp;head,0,11);\n    addNode(&amp;head,0,12);\n\n\n    std::cerr &lt;&lt; head-&gt;data &lt;&lt; std::endl;\n    std::cerr &lt;&lt; head-&gt;next-&gt;data &lt;&lt; std::endl;\n    std::cerr &lt;&lt; head-&gt;next-&gt;next-&gt; data &lt;&lt; std::endl;  \n      printList(head);\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "constexpr"], "comments": [{"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 5, "creation_date": 1544018069, "post_id": 53633779, "comment_id": 94127156, "body": "<code>sizeof(int)</code> is never actually &quot;called&quot;, so you might as well use that directly. Every compiler will directly replace that with the value in the resulting binary."}], "answers": [{"tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": false, "score": 0, "last_activity_date": 1544032824, "last_edit_date": 1544032824, "creation_date": 1544030233, "answer_id": 53637540, "question_id": 53633779, "link": "https://stackoverflow.com/questions/53633779/how-to-set-variable-value-at-compile-time-from-an-expression/53637540#53637540", "title": "How to set variable value at compile time from an expression?", "body": "<p>Your code can be simplified and the <code>#define</code> removed to give:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n#include &lt;iostream&gt;\n\nconstexpr auto foo = sizeof(int);\nint main() {\n    int size;\n    for(int i=0;i&lt;10;i++) {\n        size = foo;\n        std::cout&lt;&lt;size&lt;&lt;std::endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>If you look in the <a href=\"https://godbolt.org/z/4-6oZk\" rel=\"nofollow noreferrer\">disassembly</a> you might be able to see the compiler has hard coded <code>4</code> into your executable. Even without <code>constexpr</code>, <code>sizeof</code> is evaluated at compile time and not at runtime.</p>\n"}], "owner": {"reputation": 1340, "user_id": 3312772, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/72099df70072c33488c4d4f53cae8d97?s=128&d=identicon&r=PG&f=1", "display_name": "instance", "link": "https://stackoverflow.com/users/3312772/instance"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 212, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1544032824, "creation_date": 1544017499, "last_edit_date": 1544021647, "question_id": 53633779, "link": "https://stackoverflow.com/questions/53633779/how-to-set-variable-value-at-compile-time-from-an-expression", "title": "How to set variable value at compile time from an expression?", "body": "<p>I am trying to assign sizeof values of some data type to variables at compile time.</p>\n\n<p>I tried following code : </p>\n\n<pre><code>constexpr int foo_implementation () {\n        return sizeof(int);\n}\n#define foo std::integral_constant&lt;int, foo_implementation()&gt;::value\nint main() {\n    int size;\n    for(int i=0;i&lt;10;i++) {\n        size = foo;\n        std::cout&lt;&lt;size&lt;&lt;std::endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>When i dump the output of preprocessor, it just replace foo with complete statement, which is expected.</p>\n\n<p>My question is will compiler hardcode size to 4 (assuming size of int is 4) or will it call sizeof operator again and again.</p>\n\n<p>If not, how can i fix the value of size at compile time at size of int is know at compile time, to save extra instructions execution at runtime?</p>\n"}, {"tags": ["c++", "cmake", "linker-errors", "static-linking"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1544017114, "post_id": 53633553, "comment_id": 94126596, "body": "Order matters! If <code>lib_2</code> depends on <code>lib_1</code>, then <code>lib_2</code> must be <i>before</i> <code>lib_1</code> when linking."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 3, "creation_date": 1544017159, "post_id": 53633553, "comment_id": 94126631, "body": "&quot;do I really need to link against lib_1 in my application when already linking to lib_2 which itself is statically linking to lib_1?&quot; - Yes, you need. Unlike to <i>shared</i> libraries, <i>static</i> ones don&#39;t contain information about linked libraries."}, {"owner": {"reputation": 1729, "user_id": 356538, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/efb210bd3e28043c5fa2b2345db4a3ee?s=128&d=identicon&r=PG", "display_name": "madmax", "link": "https://stackoverflow.com/users/356538/madmax"}, "edited": false, "score": 0, "creation_date": 1544018062, "post_id": 53633553, "comment_id": 94127151, "body": "Omfg, didn&#39;t think about ordering them ... Thanks, it&#39;s working now..."}], "answers": [{"tags": [], "owner": {"reputation": 1729, "user_id": 356538, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/efb210bd3e28043c5fa2b2345db4a3ee?s=128&d=identicon&r=PG", "display_name": "madmax", "link": "https://stackoverflow.com/users/356538/madmax"}, "is_accepted": false, "score": 0, "last_activity_date": 1544018178, "creation_date": 1544018178, "answer_id": 53633985, "question_id": 53633553, "link": "https://stackoverflow.com/questions/53633553/library-linked-to-a-library-which-itself-is-linked-to-an-application-undefine/53633985#53633985", "title": "Library linked to a library which itself is linked to an application -&gt; undefined reference", "body": "<p>So as one can see in comments, the solution is to have the correct order of statically linked libraries: </p>\n\n<pre><code>add_executable(app my_source_files )\ntarget_link_libraries(app lib_2 lib_1)\n</code></pre>\n"}], "owner": {"reputation": 1729, "user_id": 356538, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/efb210bd3e28043c5fa2b2345db4a3ee?s=128&d=identicon&r=PG", "display_name": "madmax", "link": "https://stackoverflow.com/users/356538/madmax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544018178, "creation_date": 1544016820, "question_id": 53633553, "link": "https://stackoverflow.com/questions/53633553/library-linked-to-a-library-which-itself-is-linked-to-an-application-undefine", "title": "Library linked to a library which itself is linked to an application -&gt; undefined reference", "body": "<p>I am looking at my problem for hours and I am stuck...  </p>\n\n<p>I have a library <strong>lib_1</strong> with function <strong><code>getNumber()</code></strong>.<br>\nThen I have a library <strong>lib_2</strong> with function <strong><code>addNumbers()</code></strong>.<br>\n<code>addNumbers()</code> calls <code>getNumber()</code> from lib_1.  </p>\n\n<p>My CMakeLists.txt:  </p>\n\n<pre><code>add_library( lib_1 STATIC IMPORTED )\nset_target_properties(lib_1 PROPERTIES IMPORTED_LOCATION path_to_lib_1)\n\nadd_library( lib_2 STATIC lib2.cpp )\ntarget_link_libraries( lib_2 lib_1 )\ntarget_include_directories(lib_2 PUBLIC include )\n</code></pre>\n\n<p>lib_2 compiles just fine, also the unit tests which use <code>getNumber()</code> are working.  </p>\n\n<p>Then I want to link lib_2 to my application app.</p>\n\n<pre><code>add_library( lib_1 STATIC IMPORTED )\nset_target_properties(lib_1 PROPERTIES IMPORTED_LOCATION path_to_lib_1)\n\nadd_library( lib_2 STATIC IMPORTED )\nset_target_properties(lib_2 PROPERTIES IMPORTED_LOCATION path_to_lib_2)\n\nadd_executable(app my_source_files )\ntarget_link_libraries(app lib_1 lib_2)\n</code></pre>\n\n<p>When I compile my app I get this well known error:<br>\n<strong>In function <code>addNumbers()</code> from lib_2, undefined reference to <code>getNumber()</code></strong></p>\n\n<p>I really don't get it, why its an undefined reference??  </p>\n\n<p>And btw do I really need to link against lib_1 in my application when already linking to lib_2 which itself is statically linking to lib_1?</p>\n"}, {"tags": ["c++", "c", "ffmpeg"], "comments": [{"owner": {"reputation": 805, "user_id": 10424245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0504daecf094f9efeb1e1cf6d231588?s=128&d=identicon&r=PG&f=1", "display_name": "Loufi", "link": "https://stackoverflow.com/users/10424245/loufi"}, "edited": false, "score": 0, "creation_date": 1544016979, "post_id": 53633552, "comment_id": 94126511, "body": "Is it C or C++ ?"}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 1, "creation_date": 1544017406, "post_id": 53633552, "comment_id": 94126775, "body": "Run it in a debugger, break it when its paused and look at the callstack. Its fairly likely this&#39;ll tell you what is happening and how to solve it."}, {"owner": {"reputation": 96, "user_id": 2824379, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/556f8836d390d20a1c67a0f1a1171863?s=128&d=identicon&r=PG&f=1", "display_name": "comwizz2", "link": "https://stackoverflow.com/users/2824379/comwizz2"}, "reply_to_user": {"reputation": 805, "user_id": 10424245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0504daecf094f9efeb1e1cf6d231588?s=128&d=identicon&r=PG&f=1", "display_name": "Loufi", "link": "https://stackoverflow.com/users/10424245/loufi"}, "edited": false, "score": 0, "creation_date": 1544019580, "post_id": 53633552, "comment_id": 94128069, "body": "@Loufi Most of my code is C++"}, {"owner": {"reputation": 96, "user_id": 2824379, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/556f8836d390d20a1c67a0f1a1171863?s=128&d=identicon&r=PG&f=1", "display_name": "comwizz2", "link": "https://stackoverflow.com/users/2824379/comwizz2"}, "reply_to_user": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1544020643, "post_id": 53633552, "comment_id": 94128846, "body": "@MikeVine I added a stack trace, I&#39;m looking over it, but it looks like its just waiting on the data? The weirdness is only my app has these interrupts with the link. Vlc and ffplay don&#39;t seem to have this issue."}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1544025592, "post_id": 53633552, "comment_id": 94132062, "body": "Well that pretty much definitely blocked on a network read. Is the file local? If not how good is your connection to the remote? What kinda of playlist are you playing? Is there DRM enabled? Use a packet monitoring tool (or even task manager) to see how much bandwidth its using. It may be trying to donwload the whole file at once before processing or somehting."}, {"owner": {"reputation": 96, "user_id": 2824379, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/556f8836d390d20a1c67a0f1a1171863?s=128&d=identicon&r=PG&f=1", "display_name": "comwizz2", "link": "https://stackoverflow.com/users/2824379/comwizz2"}, "reply_to_user": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1544025930, "post_id": 53633552, "comment_id": 94132268, "body": "@MikeVine Its coming from YouTube as in directly from them on a 200M connection. As I mentioned only my player shows this issue, ffplay doesn&#39;t seem to and neither does playing the video through the browser and I think thats what has me the most confused."}, {"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1544030649, "post_id": 53633552, "comment_id": 94134963, "body": "Might be better to ask on their mailing list instead?"}, {"owner": {"reputation": 96, "user_id": 2824379, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/556f8836d390d20a1c67a0f1a1171863?s=128&d=identicon&r=PG&f=1", "display_name": "comwizz2", "link": "https://stackoverflow.com/users/2824379/comwizz2"}, "reply_to_user": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1544034546, "post_id": 53633552, "comment_id": 94136799, "body": "@Shark I did. Several days ago. I decided to cross post here since there were no responses there."}, {"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1544092187, "post_id": 53633552, "comment_id": 94156965, "body": "Good luck then :) best thing i can say is - cross reference the ffplay&#39;s code against your own, maybe you missed something or found a bug somewhere :/"}], "owner": {"reputation": 96, "user_id": 2824379, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/556f8836d390d20a1c67a0f1a1171863?s=128&d=identicon&r=PG&f=1", "display_name": "comwizz2", "link": "https://stackoverflow.com/users/2824379/comwizz2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544020562, "creation_date": 1544016818, "last_edit_date": 1544020562, "question_id": 53633552, "link": "https://stackoverflow.com/questions/53633552/ffmpeg-long-pause-in-av-read-frame", "title": "FFMPEG - Long pause in av_read_frame", "body": "<p>I am trying to write a service that converts a m3u8 link from youtube.</p>\n\n<p>I am loading the stream info then setting all but 1 video and 1 audio stream to AVDISCARD_ALL.</p>\n\n<p>Everything works fine except after several seconds of playing av_read_frame blocks for 30 seconds to a couple minutes.</p>\n\n<p>I'm not the best versed in ffmpeg so I'm not exactly sure what to do from here.\nExtracting one of these links into ffplay works fine it seems, but I don't see what they may be doing differently? I'm just hoping someone can point me in the right direction of anything to try.</p>\n\n<p>Attached is a callstack from when this is happening. I am not sure if anything here looks amiss.</p>\n\n<p><a href=\"https://i.stack.imgur.com/3WYI6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3WYI6.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "c++11"], "answers": [{"comments": [{"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 2, "creation_date": 1544017768, "post_id": 53633563, "comment_id": 94126972, "body": "I might have said something wrong here, but I don&#39;t see anything obvious, so I&#39;d be glad if the downvoter commented as well."}, {"owner": {"reputation": 299, "user_id": 3990838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ca850212cf1cdabbd83e1386ae41f1d?s=128&d=identicon&r=PG&f=1", "display_name": "pawel_j", "link": "https://stackoverflow.com/users/3990838/pawel-j"}, "edited": false, "score": 0, "creation_date": 1544018797, "post_id": 53633563, "comment_id": 94127563, "body": "I am not the downvoter, but probably you&#39;ve got a downvote because it&#39;s not working in C++11 (better auto functionalities are in c++14 I guess?). Also the version with typename Blah&lt;string,X&gt;::ctx_t&amp; does not look good."}, {"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "reply_to_user": {"reputation": 299, "user_id": 3990838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ca850212cf1cdabbd83e1386ae41f1d?s=128&d=identicon&r=PG&f=1", "display_name": "pawel_j", "link": "https://stackoverflow.com/users/3990838/pawel-j"}, "edited": false, "score": 1, "creation_date": 1544019338, "post_id": 53633563, "comment_id": 94127911, "body": "@pawel_j Weird, considering the latest standard is C++17. And I don&#39;t know what do you mean by <i>does not look good</i>, because, well, at least <a href=\"http://coliru.stacked-crooked.com/a/f845e583802d2d24\" rel=\"nofollow noreferrer\">it works</a>."}, {"owner": {"reputation": 407, "user_id": 5567621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hc8fe.jpg?s=128&g=1", "display_name": "Daniel Vlasenko", "link": "https://stackoverflow.com/users/5567621/daniel-vlasenko"}, "edited": false, "score": 0, "creation_date": 1544019607, "post_id": 53633563, "comment_id": 94128085, "body": "@BartekBanachewicz, question is marked with c++11 tag."}, {"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "reply_to_user": {"reputation": 407, "user_id": 5567621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hc8fe.jpg?s=128&g=1", "display_name": "Daniel Vlasenko", "link": "https://stackoverflow.com/users/5567621/daniel-vlasenko"}, "edited": false, "score": 0, "creation_date": 1544020391, "post_id": 53633563, "comment_id": 94128652, "body": "@DanielVlasenko Oops, I missed that part. Well, my answer covers both, anyway."}], "tags": [], "owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "is_accepted": false, "score": 0, "last_activity_date": 1544016857, "creation_date": 1544016857, "answer_id": 53633563, "question_id": 53633468, "link": "https://stackoverflow.com/questions/53633468/adding-another-parameter-to-the-class-renders-code-uncompilable/53633563#53633563", "title": "Adding another parameter to the class renders code uncompilable", "body": "<pre><code>BlahDescendant() {\n    this-&gt;registerHandler(\"ala\", [](auto&amp; m) {cout &lt;&lt; m[\"ala\"]; });\n}\n</code></pre>\n\n<p>When accessing a member of a base class of a template class, you need to use <code>this-&gt;</code> explicitly.</p>\n\n<p>If you want to type that lambda explicitly, you need <code>typename</code>, as the type is defined in the class template:</p>\n\n<pre><code>[](typename Blah&lt;string, X&gt;::ctx_t&amp; m) { ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 407, "user_id": 5567621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hc8fe.jpg?s=128&g=1", "display_name": "Daniel Vlasenko", "link": "https://stackoverflow.com/users/5567621/daniel-vlasenko"}, "is_accepted": true, "score": 2, "last_activity_date": 1544019948, "creation_date": 1544019948, "answer_id": 53634481, "question_id": 53633468, "link": "https://stackoverflow.com/questions/53633468/adding-another-parameter-to-the-class-renders-code-uncompilable/53634481#53634481", "title": "Adding another parameter to the class renders code uncompilable", "body": "<p>In the definition of a class template or a member of a class template, if a base class of the class template depends on a template-parameter, the base class scope is not examined during unqualified name lookup either at the point of definition of the class template or member or during an instantiation of the class template or member.</p>\n\n<p>So you need to tell compiler, that your type ctx_t is from Blah, so you need either</p>\n\n<pre><code>[](typename Blah&lt;string,X&gt;::ctx_t&amp; m) {cout &lt;&lt; m[\"ala\"]; }\n</code></pre>\n\n<p>or </p>\n\n<pre><code>template&lt;class X&gt;\nclass BlahDescendant : public Blah&lt;string, X&gt; {\npublic:\n    using ctx_t = typename Blah&lt;string,X&gt;::ctx_t;\n};\n</code></pre>\n\n<p>registerHandler is also non dependent name, so you need to make it dependent on BlahDescendant and Blah scopes using <strong>this</strong> explicitly </p>\n\n<pre><code>template&lt;class X&gt;\nclass BlahDescendant : public Blah&lt;string, X&gt; {\npublic:\n    using ctx_t = typename Blah&lt;string,X&gt;::ctx_t;\n    BlahDescendant() {\n         this-&gt;registerHandler(\"ala\", [](ctx_t&amp; m) {cout &lt;&lt; m[\"ala\"]; });\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 299, "user_id": 3990838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ca850212cf1cdabbd83e1386ae41f1d?s=128&d=identicon&r=PG&f=1", "display_name": "pawel_j", "link": "https://stackoverflow.com/users/3990838/pawel-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 53634481, "answer_count": 2, "score": 1, "last_activity_date": 1544019948, "creation_date": 1544016558, "last_edit_date": 1544016628, "question_id": 53633468, "link": "https://stackoverflow.com/questions/53633468/adding-another-parameter-to-the-class-renders-code-uncompilable", "title": "Adding another parameter to the class renders code uncompilable", "body": "<p>I created a class extending a map-of-handlers collection, that does some tasks, according to reflexive arguments (it's an attempt to make a reflection for c++). However when I parameterized it to be not bound to a specific implementation, the compiler refused to work, showing strange error. Long things short, this compiles:</p>\n\n<pre><code>using namespace std;\n\ntemplate&lt;class T&gt;\nclass Blah {\npublic:\n    using ctx_t = map&lt;T, string&gt;;\n\nprivate:\n    map&lt;string, function&lt;void(ctx_t&amp;)&gt;&gt; handlers;\n\nprotected:\n    void registerHandler(const string&amp; name, function&lt;void(ctx_t&amp;)&gt; fn) {\n        handlers[name] = fn;\n    }\n};\n\nclass BlahDescendant : public Blah&lt;string&gt; {\npublic:\n    BlahDescendant() {\n        registerHandler(\"ala\", [](ctx_t&amp; m) {cout &lt;&lt; m[\"ala\"]; });\n    }\n};\n\nint main() {\n    BlahDescendant desc;\n    return 0;\n}\n</code></pre>\n\n<p>But when parameterized, it refuses to compile, saying that </p>\n\n<pre><code>testfield.cpp:33:35: error: 'ctx_t' has not been declared\n</code></pre>\n\n<p>.</p>\n\n<pre><code>using namespace std;\n\ntemplate&lt;class T, class X&gt;\nclass Blah {\npublic:\n    using ctx_t = map&lt;T, X&gt;;\n\nprivate:\n    map&lt;string, function&lt;void(ctx_t&amp;)&gt;&gt; handlers;\n\nprotected:\n    void registerHandler(const string&amp; name, function&lt;void(ctx_t&amp;)&gt; fn) {\n        handlers[name] = fn;\n    }\n};\n\ntemplate&lt;class X&gt;\nclass BlahDescendant : public Blah&lt;string, X&gt; {\npublic:\n    BlahDescendant() {\n        registerHandler(\"ala\", [](ctx_t&amp; m) {cout &lt;&lt; m[\"ala\"]; });\n    }\n};\n\nint main() {\n    BlahDescendant&lt;string&gt; desc;\n    return 0;\n}\n</code></pre>\n\n<p>When trying to give map in lambdas there is different error reported:</p>\n\n<pre><code>error: 'registerHandler' was not declared in this scope, and no declarations were found by argument-dependent lookup at the point of instantiation [-fpermissive]\n     registerHandler(\"ala\", [](map&lt;string,X&gt;&amp; m) {cout &lt;&lt; m[\"ala\"]; });\n</code></pre>\n\n<p>Can anybody help?</p>\n"}, {"tags": ["c++", "visual-c++", "operator-overloading", "friend"], "comments": [{"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1544016531, "post_id": 53633387, "comment_id": 94126246, "body": "Why do you need it to be a <code>friend</code> function?"}, {"owner": {"reputation": 62, "user_id": 9563591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13716b953407eb28aee39301cd965479?s=128&d=identicon&r=PG&f=1", "display_name": "Hamza", "link": "https://stackoverflow.com/users/9563591/hamza"}, "reply_to_user": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1544016629, "post_id": 53633387, "comment_id": 94126305, "body": "i want to access the private members ."}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1544016664, "post_id": 53633387, "comment_id": 94126326, "body": "Let me rephrase that - why can&#39;t it be a member?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1544016671, "post_id": 53633387, "comment_id": 94126330, "body": "You should make it a member function: <a href=\"https://stackoverflow.com/questions/4421706/what-are-the-basic-rules-and-idioms-for-operator-overloading\" title=\"what are the basic rules and idioms for operator overloading\">stackoverflow.com/questions/4421706/&hellip;</a>"}, {"owner": {"reputation": 62, "user_id": 9563591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13716b953407eb28aee39301cd965479?s=128&d=identicon&r=PG&f=1", "display_name": "Hamza", "link": "https://stackoverflow.com/users/9563591/hamza"}, "edited": false, "score": 0, "creation_date": 1544016881, "post_id": 53633387, "comment_id": 94126453, "body": "yes it&#39;s working in member function ,  but what is the syntax for global post increment/decrement ??"}], "answers": [{"tags": [], "owner": {"reputation": 1110, "user_id": 5778465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xnd4J.jpg?s=128&g=1", "display_name": "snake_style", "link": "https://stackoverflow.com/users/5778465/snake-style"}, "is_accepted": true, "score": 0, "last_activity_date": 1544016776, "creation_date": 1544016776, "answer_id": 53633537, "question_id": 53633387, "link": "https://stackoverflow.com/questions/53633387/how-a-write-a-global-non-member-post-decremented-overloaded-operator/53633537#53633537", "title": "How a write a global non member post decremented overloaded operator?", "body": "<p>Try like this:</p>\n\n<pre><code>class type\n{\n// ...\n    // postfix operator--\n    friend type operator--(type &amp;t, int){type t1; /* some logics */ return t1;}\n};\n</code></pre>\n"}], "owner": {"reputation": 62, "user_id": 9563591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13716b953407eb28aee39301cd965479?s=128&d=identicon&r=PG&f=1", "display_name": "Hamza", "link": "https://stackoverflow.com/users/9563591/hamza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 53633537, "answer_count": 1, "score": 0, "last_activity_date": 1544189629, "creation_date": 1544016270, "last_edit_date": 1544189629, "question_id": 53633387, "link": "https://stackoverflow.com/questions/53633387/how-a-write-a-global-non-member-post-decremented-overloaded-operator", "title": "How a write a global non member post decremented overloaded operator?", "body": "<p>I am beginning to programming. I am stuck in this point so I hope you guys will help me.</p>\n\n<p>When we write a post decrement member function the syntax for that is </p>\n\n<pre><code>     type type::operator--(int){}\n</code></pre>\n\n<p>But I want this to be a friend function so how can i write it?</p>\n\n<p>This is for pre increment:</p>\n\n<pre><code>   friend Mystring &amp;operator--(  Mystring &amp;lhs);\n</code></pre>\n\n<p>What is the syntax for post incrementation?</p>\n"}, {"tags": ["c++", "templates", "c++17", "constexpr"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1544016261, "post_id": 53633322, "comment_id": 94126066, "body": "Gcc gives <a href=\"https://coliru.stacked-crooked.com/a/6c98acd61d66ec6d\" rel=\"nofollow noreferrer\">a somewhat better error message</a>."}, {"owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1544016378, "post_id": 53633322, "comment_id": 94126134, "body": "@nwp so how can you make it fully visible?"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1544016511, "post_id": 53633322, "comment_id": 94126233, "body": "What do you mean by &quot;make it visible&quot;? As far as I can tell the problem is that there is a circular definition. The <code>static_assert</code> depends on if <code>Foo::TRUE()</code> is <code>true</code> which depends on the <code>static_assert</code>."}, {"owner": {"reputation": 1568, "user_id": 5526072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588896494e8fd23bb0092474a5cf958d?s=128&d=identicon&r=PG", "display_name": "jwimberley", "link": "https://stackoverflow.com/users/5526072/jwimberley"}, "edited": false, "score": 0, "creation_date": 1544016549, "post_id": 53633322, "comment_id": 94126257, "body": "What if you put the static_assert in the constructor of the struct?"}, {"owner": {"reputation": 3280, "user_id": 3493289, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/08927897947ad3bae66cf2d02f587ffc?s=128&d=identicon&r=PG&f=1", "display_name": "MS Srikkanth", "link": "https://stackoverflow.com/users/3493289/ms-srikkanth"}, "edited": false, "score": 0, "creation_date": 1544016782, "post_id": 53633322, "comment_id": 94126395, "body": "I expect this to be a 2 pass compilation issue. The compiler runs through the entire class body once before it compiles the body of member functions/static functions. So at the time static_assert is reached, the function TRUE is still considered to not be fully defined which is why it returns an error"}, {"owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "reply_to_user": {"reputation": 1568, "user_id": 5526072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588896494e8fd23bb0092474a5cf958d?s=128&d=identicon&r=PG", "display_name": "jwimberley", "link": "https://stackoverflow.com/users/5526072/jwimberley"}, "edited": false, "score": 0, "creation_date": 1544016909, "post_id": 53633322, "comment_id": 94126474, "body": "@jwimberley that works, thanks.  Though I am still confused about how the template avoids the circulation."}, {"owner": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 0, "creation_date": 1544019049, "post_id": 53633322, "comment_id": 94127719, "body": "<a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#1626\" rel=\"nofollow noreferrer\">CWG 1626</a>"}], "owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "closed_date": 1544016484, "answer_count": 0, "score": 2, "last_activity_date": 1544016029, "creation_date": 1544016029, "question_id": 53633322, "link": "https://stackoverflow.com/questions/53633322/static-constexpr-member-function-not-callable-inside-non-template-class-c", "closed_reason": "Duplicate", "title": "static constexpr member function not callable inside non-template class C++", "body": "<p>Consider this non-templated class</p>\n\n<pre><code>struct Foo {\n    constexpr static bool TRUE() {\n        return true;\n    }\n};\n</code></pre>\n\n<p>Calling <code>Foo::TRUE()</code> from outside works fine:</p>\n\n<pre><code>int main() {\n    static_assert(Foo::TRUE(), \"\");\n}\n</code></pre>\n\n<p>but not when called from <code>Foo</code> itself:</p>\n\n<pre><code>struct Foo {\n    constexpr static bool TRUE() {\n        return true;\n    }\n    static_assert(Foo::TRUE(), \"\"); //ERROR\n};\n</code></pre>\n\n<blockquote>\n  <p>Error (active)    E0028   expression must have a constant value<br>\n  Error   C2131   expression did not evaluate to a constant   </p>\n</blockquote>\n\n<p>Even weirder is that this can be \"fixed\" by providing the class a template:</p>\n\n<pre><code>template&lt;int x&gt;\nstruct Foo {\n    constexpr static bool TRUE() {\n        return true;\n    }\n    static_assert(Foo::TRUE(), \"\"); //compiles fine\n};\n\nint main() {\n}\n</code></pre>\n\n<p>Even though <code>Foo::TRUE()</code> has nothing to do with <code>int x</code>.</p>\n\n<hr>\n\n<p>What's going on?</p>\n\n<hr>\n\n<p><em>I am using Visual Studio 17 Community Version 15.9.0 - thanks for any help</em></p>\n"}, {"tags": ["c++", "c", "arrays", "pointers", "types"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 2, "creation_date": 1544015521, "post_id": 53633122, "comment_id": 94125642, "body": "Maybe <a href=\"https://cdecl.org/?q=int+%2Ap%5B%5D\" rel=\"nofollow noreferrer\">this site</a> helps. The book is wrong by the way, <code>p</code> is not a pointer."}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1544016342, "post_id": 53633122, "comment_id": 94126119, "body": "@nwp: <code>p</code> is a pointer if this declaration occurs in a function parameter. But then the book is wrong in a different way; <code>p</code> is then a pointer to a pointer (which may be the first of an array of pointers)."}, {"owner": {"reputation": 97941, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1544017276, "post_id": 53633122, "comment_id": 94126693, "body": "When the <code>[]</code> are used as a function parameter, they are absolutely the same as a <code>*</code>: <code>void display_array(int *q[])</code> is the same as <code>void display_array(int **q)</code>; <code>int main(int argc, char **argv)</code> is the same as <code>int main(int argc, char *argv[])</code>; <code>void foo(int a[])</code> is the same as <code>void foo(int *a)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1544015673, "post_id": 53633168, "comment_id": 94125743, "body": "I&#39;m sorry but <a href=\"https://en.cppreference.com/w/cpp/language/array#Arrays_of_unknown_bound\" rel=\"nofollow noreferrer\">C++ has a dark corner to offer</a> yet again :)"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1544015870, "post_id": 53633168, "comment_id": 94125859, "body": "@Quentin The big point there is that unbounded arrays are <i>incomplete</i>. You can have <i>declarations</i> using them, but you can&#39;t <i>define</i> an array without the size."}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1544016603, "post_id": 53633168, "comment_id": 94126293, "body": "Re \u201cArrays must have a size\u201d: Well, maybe somewhere, but not necessarily inside a translation unit. You can even use the contents of an object with incomplete type: <code>extern int *p[]; int foo(void) { return *p[3]; }</code> is strictly conforming C and compiles without complaint."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 3, "last_activity_date": 1544019092, "last_edit_date": 1544019092, "creation_date": 1544015589, "answer_id": 53633168, "question_id": 53633122, "link": "https://stackoverflow.com/questions/53633122/eli5-what-is-the-data-type-of-int-p/53633168#53633168", "title": "ELI5: What is the data type of `int *p[]`", "body": "<blockquote>\n  <p>... pointer to an array of pointers to integers</p>\n</blockquote>\n\n<p>No it's not. <code>q</code> is the type <code>int *[]</code>. Which is an invalid (or possibly incomplete, depending on context) type in C++, and only valid in some places in C. Arrays must have a size.</p>\n\n<p>The type <code>int *[]</code> is an (unsized) array of pointers to <code>int</code>. It is itself not a pointer.</p>\n\n<hr>\n\n<p>The confusion probably comes from the fact that an array can <em>decay</em> to a pointer to its first element.</p>\n\n<p>For example, lets say we have this array:</p>\n\n<pre><code>int a[20];\n</code></pre>\n\n<p>When plain <code>a</code> is used, it decays to a pointer to its first element: <code>a</code> is equal to <code>&amp;a[0]</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1544018170, "post_id": 53633222, "comment_id": 94127202, "body": "What you are failing to mention is that you <i>can&#39;t</i> declare an array with empty size. Apart from a few special cases."}], "tags": [], "owner": {"reputation": 3183, "user_id": 3063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94037fcc56672e711673c00feba9d62a?s=128&d=identicon&r=PG", "display_name": "palotasb", "link": "https://stackoverflow.com/users/3063/palotasb"}, "is_accepted": true, "score": 3, "last_activity_date": 1544015731, "creation_date": 1544015731, "answer_id": 53633222, "question_id": 53633122, "link": "https://stackoverflow.com/questions/53633122/eli5-what-is-the-data-type-of-int-p/53633222#53633222", "title": "ELI5: What is the data type of `int *p[]`", "body": "<p>This is how it's built up:</p>\n\n<ul>\n<li><code>int</code> is the <em>type</em> \"int\".</li>\n<li><code>int*</code> is the <em>type</em> \"pointer to int\"</li>\n<li><code>int* []</code> is the <em>type</em> \"array (of unknown bound/length) of pointer to int\"</li>\n<li><code>int* p[]</code> is the <em>declaration</em> of a variable or parameter named <em>p</em> of the type above.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 97941, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": false, "score": 2, "last_activity_date": 1544015982, "creation_date": 1544015982, "answer_id": 53633303, "question_id": 53633122, "link": "https://stackoverflow.com/questions/53633122/eli5-what-is-the-data-type-of-int-p/53633303#53633303", "title": "ELI5: What is the data type of `int *p[]`", "body": "<pre><code>   int *p[]\n//      ^\n</code></pre>\n\n<p><strong>p</strong> is</p>\n\n<pre><code>   int *p[]\n//       ^^\n</code></pre>\n\n<p>p is <strong>an array of unspecified size</strong> <em>(possibly illegal, depends on context)</em></p>\n\n<pre><code>   int *p[]\n// ^^^^^\n</code></pre>\n\n<p>p is an array of unspecified size of <strong>pointers to int</strong></p>\n\n<p>Meaning each element of <code>p</code> is a pointer:</p>\n\n<pre><code>int foobar = 42;\np[0] = NULL;\np[1] = &amp;foobar;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1544024070, "post_id": 53634179, "comment_id": 94131118, "body": "@DavidBowling Sadly, it&#39;s a well-known term that was invented many decades ago. And yet here we are, still suffering from these books."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1544018863, "creation_date": 1544018863, "answer_id": 53634179, "question_id": 53633122, "link": "https://stackoverflow.com/questions/53633122/eli5-what-is-the-data-type-of-int-p/53634179#53634179", "title": "ELI5: What is the data type of `int *p[]`", "body": "<blockquote>\n  <p>I don't understand what the datatype of this is</p>\n</blockquote>\n\n<p>If it's any comfort, neither does the author of the book you are reading.</p>\n\n<blockquote>\n  <p>Remember, q is not a pointer to integers, but rather a pointer to an array of pointers to integers. </p>\n</blockquote>\n\n<p>This is <a href=\"http://catb.org/jargon/html/B/bullschildt.html\" rel=\"nofollow noreferrer\">bullschildt</a>. </p>\n\n<ul>\n<li><em>Before</em> adjustment of parameters, <code>q</code> is an array of pointers to integers.</li>\n<li><em>After</em> adjustment of parameters, <code>q</code> is a pointer to the first element of an array of pointers to integers. Equivalent to <code>int** q</code>, a pointer to pointer to an <code>int</code>.</li>\n</ul>\n\n<p>Nowhere is it \"a pointer to an array of pointers to integers\". That would have been  <code>int* (*q)[]</code>.</p>\n\n<p>I would advise to stop reading that book.</p>\n\n<p>The key here is that any array that is part of a parameter list of a function, gets adjusted (\"decays\") into a pointer to the first element. So it doesn't matter if you type <code>int* q[666]</code> or <code>int* q[]</code>, either will be silently replaced by the compiler with <code>int**</code> \"behind the lines\".</p>\n\n<p>This is actually the reason why we can write <code>[]</code> in a parameter list - normally an empty array would be an incomplete type that can't be used before completion elsewhere. But since parameters always get adjusted, they are never of array type, and it doesn't matter that the original type was incomplete.</p>\n"}], "owner": {"reputation": 113, "user_id": 5864207, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-e0tZi1RE1wY/AAAAAAAAAAI/AAAAAAAAA34/OyxqKUpcWPQ/photo.jpg?sz=128", "display_name": "Abhyas29", "link": "https://stackoverflow.com/users/5864207/abhyas29"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 53633222, "answer_count": 4, "score": 2, "last_activity_date": 1544019092, "creation_date": 1544015419, "last_edit_date": 1544016723, "question_id": 53633122, "link": "https://stackoverflow.com/questions/53633122/eli5-what-is-the-data-type-of-int-p", "title": "ELI5: What is the data type of `int *p[]`", "body": "<p>I don't understand what the datatype of this is. If its a pointer or an array. Please explain in simple terms. To quote what was in the book-</p>\n\n<blockquote>\n  <p>If you want to pass an array of pointers into a function, you can use the same method that you use to pass other arrays\u2014simply call the function with the array name without any indexes. For example, a function that can receive array x looks like this:</p>\n</blockquote>\n\n<pre><code>void display_array(int *q[])\n{\n  int t;\n  for(t=0; t&lt;10; t++)\n    printf(\"%d \", *q[t]);\n}\n</code></pre>\n\n<blockquote>\n  <p>Remember, q is not a pointer to integers, but rather a pointer to an array of pointers to\n  integers. Therefore you need to declare the parameter q as an array of integer pointers,\n  as just shown. You cannot declare q simply as an integer pointer because that is not\n  what it is.</p>\n</blockquote>\n\n<p>cite: C++: The Complete Reference, 4th Edition by Herbert Schildt, Page 122-123</p>\n"}, {"tags": ["c++", "qt", "serial-port"], "comments": [{"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1544015131, "post_id": 53632844, "comment_id": 94125392, "body": "Accumulation of values in <code>char</code> type will surly end with overflow."}, {"owner": {"reputation": 864, "user_id": 10320907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a781c80933f17fa87d97b70e3fca260?s=128&d=identicon&r=PG", "display_name": "tunglt", "link": "https://stackoverflow.com/users/10320907/tunglt"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1544015489, "post_id": 53632844, "comment_id": 94125628, "body": "@MarekR: for the accumulation, it seems that he wants to compute the checksum."}, {"owner": {"reputation": 864, "user_id": 10320907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a781c80933f17fa87d97b70e3fca260?s=128&d=identicon&r=PG", "display_name": "tunglt", "link": "https://stackoverflow.com/users/10320907/tunglt"}, "edited": false, "score": 0, "creation_date": 1544015826, "post_id": 53632844, "comment_id": 94125834, "body": "You should check if the len (file size ?)  and j at the beginning of the while loop or you will catch an undefined behavior if len &lt; j ( = 76 ). Note that DataBuf must be initialized before (e.g: DataBuf.resize(77) )."}, {"owner": {"reputation": 864, "user_id": 10320907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a781c80933f17fa87d97b70e3fca260?s=128&d=identicon&r=PG", "display_name": "tunglt", "link": "https://stackoverflow.com/users/10320907/tunglt"}, "edited": false, "score": 0, "creation_date": 1544016296, "post_id": 53632844, "comment_id": 94126086, "body": "If your protocole uses 16 bits checksum, you must store the sum result in DataBuf[1] and DataBuf[2], not only DataBuf[1]"}, {"owner": {"reputation": 99, "user_id": 5606642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sa6d9.jpg?s=128&g=1", "display_name": "\u5f20\u94c1\u7537", "link": "https://stackoverflow.com/users/5606642/%e5%bc%a0%e9%93%81%e7%94%b7"}, "edited": false, "score": 0, "creation_date": 1544074454, "post_id": 53632844, "comment_id": 94149087, "body": "QByteRef QByteArray::operator[](int i)"}, {"owner": {"reputation": 1, "user_id": 10749460, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xz4mHKo88uE/AAAAAAAAAAI/AAAAAAAADGQ/9kBiAPVzQMk/photo.jpg?sz=128", "display_name": "Yashraj Rai", "link": "https://stackoverflow.com/users/10749460/yashraj-rai"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1544106989, "post_id": 53632844, "comment_id": 94165866, "body": "@MarekR, as Tung Le Thanh mentioned, Databuf[1] is calculating the checksum."}, {"owner": {"reputation": 1, "user_id": 10749460, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xz4mHKo88uE/AAAAAAAAAAI/AAAAAAAADGQ/9kBiAPVzQMk/photo.jpg?sz=128", "display_name": "Yashraj Rai", "link": "https://stackoverflow.com/users/10749460/yashraj-rai"}, "edited": false, "score": 0, "creation_date": 1544107205, "post_id": 53632844, "comment_id": 94166000, "body": "One thing I found out was, the wrong checksum which was being calculated, was may be because the half of the message is at the end of the block and the next half is at the starting of the next block. But this makes things more complicated because, how is that message is being correctly written to Databuf[2+] but the checksum is not calculated."}, {"owner": {"reputation": 1, "user_id": 10749460, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xz4mHKo88uE/AAAAAAAAAAI/AAAAAAAADGQ/9kBiAPVzQMk/photo.jpg?sz=128", "display_name": "Yashraj Rai", "link": "https://stackoverflow.com/users/10749460/yashraj-rai"}, "reply_to_user": {"reputation": 864, "user_id": 10320907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a781c80933f17fa87d97b70e3fca260?s=128&d=identicon&r=PG", "display_name": "tunglt", "link": "https://stackoverflow.com/users/10320907/tunglt"}, "edited": false, "score": 0, "creation_date": 1544107486, "post_id": 53632844, "comment_id": 94166185, "body": "@TungLeThanh, Thanks for pointing it out, I will initialize DataBuf. And the checksum is 8bits, so Databuf[1] is enough."}, {"owner": {"reputation": 864, "user_id": 10320907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a781c80933f17fa87d97b70e3fca260?s=128&d=identicon&r=PG", "display_name": "tunglt", "link": "https://stackoverflow.com/users/10320907/tunglt"}, "edited": false, "score": 0, "creation_date": 1544116092, "post_id": 53632844, "comment_id": 94171198, "body": "For the checksum, I think it should work. Did you call <code>response = readAll();</code> somewhere?"}, {"owner": {"reputation": 1, "user_id": 10749460, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xz4mHKo88uE/AAAAAAAAAAI/AAAAAAAADGQ/9kBiAPVzQMk/photo.jpg?sz=128", "display_name": "Yashraj Rai", "link": "https://stackoverflow.com/users/10749460/yashraj-rai"}, "edited": false, "score": 0, "creation_date": 1544175461, "post_id": 53632844, "comment_id": 94191237, "body": "yes also thought, it should not make any difference. yes I used response = readAll(); it is called when wait(1) is executed."}], "owner": {"reputation": 1, "user_id": 10749460, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xz4mHKo88uE/AAAAAAAAAAI/AAAAAAAADGQ/9kBiAPVzQMk/photo.jpg?sz=128", "display_name": "Yashraj Rai", "link": "https://stackoverflow.com/users/10749460/yashraj-rai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544014495, "creation_date": 1544014495, "question_id": 53632844, "link": "https://stackoverflow.com/questions/53632844/qt-serial-port-communication-from-an-input-file-weird-behavior", "title": "Qt serial port communication from an input file; weird behavior", "body": "<p>I am working on programming a device using Qt C++ 5.3.2.\nThere is a weird behavior, which I am not able to understand.</p>\n\n<pre><code>QByteArray file_data;\n\nif (!file.atEnd()) {\n    file_data = file.readAll();\n}\n\nint i = 0, j = 0;\nint index = 0;\nQByteArray DataBuf;\n\nj = 76;\n\nwhile (true)\n\n{\n    DataBuf[0] = (j + 3);\n    DataBuf[1] = 0x24;\n    DataBuf[2] = 0x24;\n    for (i = 0; i &lt; j; ++i)\n    {\n        DataBuf[i + 3] = file_data[i + index];\n        DataBuf[1] = DataBuf[1] + file_data[i + index];   //Doubt here\n    }\n\n    response.clear();\n    serialPort-&gt;write(DataBuf, DataBuf[0]);\n\n    for (int i=0;i&lt;6;i++) {\n        if (serialPort-&gt;readBufferSize()&gt;=2) {\n            break;\n        }\n        wait(1);        //user defined function, is same as msleep(5)\n    }\n\n    qa = response.toLocal8Bit();\n\n    if (qa.toHex() != \"00cc\") return;\n\n    index += 76;\n\n    if (j == len) break;\n    if (len &gt; 76) len -= 76;\n    if (len &lt;= 76) j = len;\n}\n</code></pre>\n\n<p>This is the part of code which I am working on. The line mentioned as \" Doubt here\" does not work as expected.\nWhen I run this program the value at Databuf[1] does not match the sum of the total 76 bytes of data.\nThe data written in Databuf[2] to Databuf[78] is totally correct, but the addition is not.\nBut when I change the line from DataBuf[1] = DataBuf[1] + file_data[i + index]; to DataBuf[1] = DataBuf[1] + DataBuf[i + 3]; it works properly.</p>\n\n<p>What is happening here? Can anyone help please.</p>\n"}, {"tags": ["c++", "cmake"], "answers": [{"tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": true, "score": 1, "last_activity_date": 1544118134, "creation_date": 1544118134, "answer_id": 53656969, "question_id": 53632820, "link": "https://stackoverflow.com/questions/53632820/how-do-i-split-up-my-project-into-cmake-modules-that-can-find-eachother/53656969#53656969", "title": "How do I split up my project into CMake modules that can find eachother?", "body": "<p>If you have a <code>target_include_directories</code>, then the dependent targets for that target can have the includes as well, depending on the PUBLIC/PRIVATE setting.</p>\n\n<p>Same as <code>target_link_directories</code> which propagates the libraries to dependent targets.</p>\n\n<p>You never need the path to the libraries, as CMake <em>should</em> take care of that for you. If it doesn't, it's probably a bug.</p>\n"}], "owner": {"reputation": 2532, "user_id": 470687, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/846ce2e2699fb51f5d397eee0465d566?s=128&d=identicon&r=PG", "display_name": "sebf", "link": "https://stackoverflow.com/users/470687/sebf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "accepted_answer_id": 53656969, "answer_count": 1, "score": -1, "last_activity_date": 1544118134, "creation_date": 1544014417, "question_id": 53632820, "link": "https://stackoverflow.com/questions/53632820/how-do-i-split-up-my-project-into-cmake-modules-that-can-find-eachother", "title": "How do I split up my project into CMake modules that can find eachother?", "body": "<p>I have a project with components (e.g. Dependency) that are very modular,</p>\n\n<pre><code>Project\n-Dependency\n--Include\n--Src\n--CMakeLists.txt\n-Main\n--main.cpp\n--CMakeLists.txt\nCMakeLists.txt\n</code></pre>\n\n<p>Right now, I use <code>target_link_libraries()</code> and <code>include_directories()</code> in my main CMakeLists.txt with explicit relative paths to use them.</p>\n\n<p>I want to turn my dependencies into packages/modules/components/libraries/<strong>some-things</strong> that are self-contained, so I can remove the explicit paths.</p>\n\n<p>I don't want to install them. They will remain in the build tree. I want to, e.g. move the entire Dependency folder without breaking anything, or copy the folder into another project and have it work with just a <code>find_package()</code> call.</p>\n\n<p>--</p>\n\n<p>I have tried</p>\n\n<pre><code>target_include_directories(Dependency PUBLIC\n    $&lt;BUILD_INTERFACE:${PROJECT_SOURCE_DIR}/include&gt;\n    $&lt;INSTALL_INTERFACE:include&gt;)\ntarget_link_libraries(Dependency PUBLIC *Sub-dependencies*)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>export(TARGETS Dependency FILE \"${CMAKE_CURRENT_SOURCE_DIR}/cmake_modules/DependencyConfig.cmake\")\n</code></pre>\n\n<p>in the Dependency CMakeLists.txt, based on:</p>\n\n<p><a href=\"https://rix0r.nl/blog/2015/08/13/cmake-guide/\" rel=\"nofollow noreferrer\">https://rix0r.nl/blog/2015/08/13/cmake-guide/</a> &amp;\n<a href=\"https://pabloariasal.github.io/2018/02/19/its-time-to-do-cmake-right/\" rel=\"nofollow noreferrer\">https://pabloariasal.github.io/2018/02/19/its-time-to-do-cmake-right/</a></p>\n\n<p>But <code>find_package()</code> still fails.</p>\n\n<p>--</p>\n\n<p>How do I export an interface so that CMake can automatically configure dependencies between modules in the same build tree?</p>\n"}, {"tags": ["c++", "winapi", "networking"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1544014446, "post_id": 53632705, "comment_id": 94124982, "body": "If you want to know how <i>netsh</i> is implemented, run <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/dumpbin-options\" rel=\"nofollow noreferrer\">DUMPBIN</a> against the binary, listing its imports. That&#39;ll give you an idea of the APIs that tool uses to implement its functionality."}, {"owner": {"reputation": 1697, "user_id": 1055328, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/houqO.png?s=128&g=1", "display_name": "The Cookies Dog", "link": "https://stackoverflow.com/users/1055328/the-cookies-dog"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1544014482, "post_id": 53632705, "comment_id": 94125007, "body": "Thanks, never heard of that before, will look into that :)"}], "owner": {"reputation": 1697, "user_id": 1055328, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/houqO.png?s=128&g=1", "display_name": "The Cookies Dog", "link": "https://stackoverflow.com/users/1055328/the-cookies-dog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544014037, "creation_date": 1544014037, "question_id": 53632705, "link": "https://stackoverflow.com/questions/53632705/set-network-adapter-ip-dns-addresses-without-netsh-and-wmi", "title": "Set network adapter ip/dns addresses without netsh and WMI?", "body": "<p>I've been going through MSDN to determine how to set the ip/dns addresses of a network adapter without using netsh and WMI but I've not found anything. Does anyone know what kind of methods I would need to use for this?\nPreferably for IPv4 and IPv6.</p>\n"}, {"tags": ["c++", "language-lawyer", "c++17"], "comments": [{"owner": {"reputation": 16855, "user_id": 1502345, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1beba9dc5373529ea99d294b23118d1b?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Aidley", "link": "https://stackoverflow.com/users/1502345/jack-aidley"}, "edited": false, "score": 0, "creation_date": 1544017943, "post_id": 53632586, "comment_id": 94127076, "body": "Interestingly, if you go back to read earlier proposals on this - e.g. <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2235.pdf\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2235.pdf</a> - you find that the wording is as you suggest it should be."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 16855, "user_id": 1502345, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1beba9dc5373529ea99d294b23118d1b?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Aidley", "link": "https://stackoverflow.com/users/1502345/jack-aidley"}, "edited": false, "score": 0, "creation_date": 1544020295, "post_id": 53632586, "comment_id": 94128572, "body": "@JackAidley: woa, good find! I&#39;ll trace, maybe there are some discussion about this somewhere (for others, it is on page 13, bullet point 5)."}, {"owner": {"reputation": 16855, "user_id": 1502345, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1beba9dc5373529ea99d294b23118d1b?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Aidley", "link": "https://stackoverflow.com/users/1502345/jack-aidley"}, "edited": false, "score": 0, "creation_date": 1544021482, "post_id": 53632586, "comment_id": 94129432, "body": "The change in wording seems to arise from the fix to this defect report, but I can&#39;t figure out why: <a href=\"http://open-std.org/JTC1/SC22/WG21/docs/cwg_defects.html#1358\" rel=\"nofollow noreferrer\">open-std.org/JTC1/SC22/WG21/docs/cwg_defects.html#1358</a> - perhaps someone else can?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1544021950, "post_id": 53632586, "comment_id": 94129763, "body": "Hm, isn&#39;t the &quot;Additional note (January, 2013):&quot; exactly the topic of this question? So it seems the committee is aware?"}, {"owner": {"reputation": 3754, "user_id": 4732082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781cea048e688814961606ddf35c5881?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/4732082/anonymous"}, "edited": false, "score": 2, "creation_date": 1544061535, "post_id": 53632586, "comment_id": 94146124, "body": "Side note: there is now <a href=\"https://en.cppreference.com/w/cpp/language/consteval\" rel=\"nofollow noreferrer\">consteval</a> that behaves this way."}], "answers": [{"comments": [{"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1544017659, "post_id": 53633432, "comment_id": 94126913, "body": "There is no problem with marking a constructor of a template class with <code>constexpr</code>. The problem is, when this template is specialized, and the compiler knows that the constructor is not <code>constexpr</code>, then it shouldn&#39;t treat it as <code>constexpr</code>. But because of this rule, it still treat it as <code>constexpr</code>. And the failure will come late, when the constructor is actually used in a constant expression. But it could come sooner, when the &quot;fake&quot; <code>constexpr</code> constructor used in another <code>constexpr</code> constructor (if the <code>consexpr</code>-ness would be semantially removed)."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1544017669, "post_id": 53633432, "comment_id": 94126919, "body": "Or the failure doesn&#39;t come at all, when the constructor isn&#39;t used in a constant expression, so wrong code will be compiled (in the case of dynamic initialization instead of static)."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 3, "creation_date": 1544019225, "post_id": 53633432, "comment_id": 94127842, "body": "I think you misunderstand what <code>constexpr</code> means for functions. <code>constexpr</code> functions <i>can</i> be evaluated at compile time (for some set of arguments). They are not <i>guaranteed</i> to be for every choice of arguments. If you require a value to be initialized at compile-time, mark the value as <code>constexpr</code> (this will force the issue). Marking only the function just makes it legal to use the function in a constant expression, it doesn&#39;t require every invocation to be at compile-time."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1544019859, "post_id": 53633432, "comment_id": 94128251, "body": "Sure, but current compilers give error (even it is NDR), when the case is trivial, and an expression never gives a constexpr. But because of this rule (supposedly), they don&#39;t do this."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 1, "creation_date": 1544020299, "post_id": 53633432, "comment_id": 94128578, "body": "@geza Please show such a case. Note that functions marked <code>constexpr</code> violating the bullet points listed <a href=\"https://en.cppreference.com/w/cpp/language/constexpr\" rel=\"nofollow noreferrer\">here</a> must be diagnosed. A compiler <i>can</i> (but is <i>not required</i>) to additionally diagnose cases where no set of arguments could lead to compile-time evaluation (&quot;No diagnostic is required for a violation of this bullet.&quot;). Note that the keyword is used to make the compiler help you, not to make the compiler do something it otherwise would not."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1544020418, "post_id": 53633432, "comment_id": 94128678, "body": "Look at the code here: <a href=\"https://stackoverflow.com/questions/53632120/how-can-i-detect-that-a-constuctor-is-really-constexpr-so-i-can-utilize-static\" title=\"how can i detect that a constuctor is really constexpr so i can utilize static\">stackoverflow.com/questions/53632120/&hellip;</a>. Put a <code>NonConstexpr</code> member into <code>Foo</code>. Then it won&#39;t compile anymore (checked with gcc and clang)."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1544020554, "post_id": 53633432, "comment_id": 94128776, "body": "Check out the comments under the question: Jack Aidley found an older proposal, where it worked just like it would be logical (for me). But perhaps that proposal was very much different in other ways too. But anyways, they have changed this because of something."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1544020618, "post_id": 53633432, "comment_id": 94128826, "body": "I meant an example for the &quot;current compiler gives error when the case is trivial&quot;. What you linked is just a demonstration of everything said so far, and I&#39;m running out of ways to phrase it. Regarding &quot;why did they change it from the proposal&quot;, see the beginning of my answer for an educated guess. Or rather, let me ask you: If <code>constexpr</code> worked as you (and the original proposal) wanted it to, how many <code>std::pair</code> constructors would there have to be? How many of them would share identical code?"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1544020792, "post_id": 53633432, "comment_id": 94128957, "body": "That is an example of that. If you add a <code>NonConstexpr</code> member into <code>Foo</code>, it won&#39;t compile. Trivial example, <code>Foo</code> isn&#39;t put into a constant expression, yet it fails to compile, as <code>Foo</code>&#39;s constructor never can be part of a constant expression."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1544020819, "post_id": 53633432, "comment_id": 94128967, "body": "No change would be needed for <code>std::pair</code> at all."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 1, "creation_date": 1544020963, "post_id": 53633432, "comment_id": 94129074, "body": "@geza: Then it&#39;s not clear what you&#39;re even suggesting. If applying <code>constexpr</code> to a template class constructor which gets instantiated with a type where being <code>constexpr</code> is not possible results in a compile error, how do you make such a type conditionally <code>constexpr</code> without duplicating constructors and using SFINAE gymnastics?"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1544021188, "post_id": 53633432, "comment_id": 94129226, "body": "@NicolBolas: Hmm, maybe I don&#39;t see something trivial here. <code>constexpr</code> is written for the constructor of the template (just like now). But, if the specialization would result in a non-constexpr constructor, then the <code>constexpr</code> would be ignored. Just like if it wasn&#39;t written there. Just like this old proposal says. Do I overlook something here, which makes this non-viable?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1544021234, "post_id": 53633432, "comment_id": 94129257, "body": "@geza: If that&#39;s what you&#39;re asking for, how is that functionally different from what we have at present?"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1544021407, "post_id": 53633432, "comment_id": 94129380, "body": "@NicolBolas: It would mean that my current example would fail to compile, as current compilers diagnose trivial cases."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 1, "creation_date": 1544021494, "post_id": 53633432, "comment_id": 94129440, "body": "@geza: If &quot;my current example&quot; refers to the question you linked to, that <i>already</i> fails to compile. If that&#39;s not the case, then what is your current example?"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1544021652, "post_id": 53633432, "comment_id": 94129556, "body": "@NicolBolas: hmm, which compiler? For me, compiles. Both with gcc and clang."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1544022777, "post_id": 53633432, "comment_id": 94130309, "body": "@NicolBolas: gcc, clang, msvc compiles it, icc rejects: <a href=\"https://godbolt.org/z/ggGfya\" rel=\"nofollow noreferrer\">godbolt.org/z/ggGfya</a>"}], "tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": false, "score": 5, "last_activity_date": 1544021698, "last_edit_date": 1544021698, "creation_date": 1544016430, "answer_id": 53633432, "question_id": 53632586, "link": "https://stackoverflow.com/questions/53632586/constexpr-constructor-fails-to-satisfy-the-requirements-but-still-constexpr-wh/53633432#53633432", "title": "Constexpr constructor fails to satisfy the requirements, but still constexpr. Why?", "body": "<p>This rule allows you to write a templated constructor/function and mark it as <code>constexpr</code> even when it's not always <code>constexpr</code> (only at least sometimes).</p>\n\n<p>For example, <code>std::pair</code> has <a href=\"https://en.cppreference.com/w/cpp/utility/pair/pair\" rel=\"nofollow noreferrer\"><code>constexpr</code> constructors</a>, but it is of course usable outside of constant expressions.</p>\n\n<p>This is quite sensible, because otherwise you would have to duplicate all these functions (once with <code>constexpr</code> and once without), even if the code is exactly the same. Let's not even consider ambiguity.</p>\n\n<p>Since it is generally impossible to prove that a template cannot ever satisfy <code>constexpr</code>, no diagnostic is required for it (but it's ill-formed so compilers can complain to you if they can prove this for a given case).</p>\n\n<p>You are correct that this is not very useful if you want to specify \"this function shall <em>only</em> be usable in constant expression\", but that's not what this wording is aiming for.</p>\n\n<p>Edit: To clarify, <code>constexpr</code> <strong>for functions</strong> only means <em>\"legal to evaluate inside a constant expression\"</em> (more precise wording <a href=\"https://en.cppreference.com/w/cpp/language/constexpr\" rel=\"nofollow noreferrer\">here</a>), <strong>not</strong> <em>\"can only be evaluated at compile-time\"</em>. By contrast, <code>constexpr</code> variables must be initialized with a constant expression.</p>\n\n<hr>\n\n<p>Another edit: We have exact wording to discuss, thanks to @JackAidley!</p>\n\n<blockquote>\n  <p>If the instantiated template specialization of a constexpr function template would fail to satisfy the requirements for a constexpr function,\n  the <code>constexpr</code> specifier is ignored and the specialization is not a constexpr function.</p>\n</blockquote>\n\n<p>The problem with this is that \"there is at least one set of arguments for which the function can be constant-evaluated\" is part of the \"requirements for a constexpr function\". Therefore, compilers cannot implement this clause, since it is not possible to prove (in general) whether such a set exists for a given function (or a function template instantiation). You either have to muddy this requirement further or give up on this aspect. It seems the committee chose the latter.</p>\n"}, {"comments": [{"owner": {"reputation": 16855, "user_id": 1502345, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1beba9dc5373529ea99d294b23118d1b?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Aidley", "link": "https://stackoverflow.com/users/1502345/jack-aidley"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1544090734, "post_id": 53638414, "comment_id": 94156079, "body": "@T.C. I can&#39;t help but feel whoever decided that the initialisation of <code>static</code>s is not static initialisation and that the Static Initialisation Order Fiasco occurs only with dynamic initialisation and not static initialisation was having a little giggle to themselves at the time."}], "tags": [], "owner": {"reputation": 16855, "user_id": 1502345, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1beba9dc5373529ea99d294b23118d1b?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Aidley", "link": "https://stackoverflow.com/users/1502345/jack-aidley"}, "is_accepted": false, "score": 4, "last_activity_date": 1544090612, "last_edit_date": 1544090612, "creation_date": 1544033791, "answer_id": 53638414, "question_id": 53632586, "link": "https://stackoverflow.com/questions/53632586/constexpr-constructor-fails-to-satisfy-the-requirements-but-still-constexpr-wh/53638414#53638414", "title": "Constexpr constructor fails to satisfy the requirements, but still constexpr. Why?", "body": "<p>In <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2235.pdf\" rel=\"nofollow noreferrer\">earlier versions</a> of the suggestion for the change to the language, it operated as you suggest:</p>\n\n<blockquote>\n  <p>If the instantiated template specialization of a constexpr function\n  template would fail to satisfy the requirements for a constexpr\n  function,the <code>constexpr</code>specifier is ignored and the specialization is\n  not a constexpr function.</p>\n</blockquote>\n\n<p>But it was later changed. I was unable to track down any definitive answer to your question but I think that it is reasonable to believe that the answer is that <code>constexpr</code> make other semantic changes to the code and these are retained even though the function is no longer usable in other <code>constexpr</code> statements. If you look at <a href=\"http://open-std.org/JTC1/SC22/WG21/docs/cwg_defects.html#1358\" rel=\"nofollow noreferrer\">defect report 1358</a> which includes the change to the current wording, you can see an intermediate form of words that includes the a note about retaining <code>const</code> status regardless.</p>\n\n<p>I also think that while the retention of <code>constexpr</code> status is unintuitive, both of your arguments against it are wrong:</p>\n\n<ol>\n<li><p>Catching the <code>constexpr</code> when the template instantiation is made goes against how C++ templates usually work - you only get an error when you try and use the template in a way it cannot be used for that type; merely not being able to complete the entire signature is not an error. To introduce special case mechanics for <code>constexpr</code> would be unnecessarily confusing and limit usefulness since you'd now need to write different templates for <code>constexpr</code>able and un-<code>constexpr</code>able types.</p></li>\n<li><p><em>Because</em> it maintains the <code>constexpr</code> specifier the fallback isn't to general runtime dynamic initialisation but to dynamic initialisation at the time at which <code>static</code>s are initialised. Which may cause problems because of the Static Initialisation Order Fiasco but does at least happen before the <code>main()</code> function is entered.</p></li>\n</ol>\n"}], "owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 463, "favorite_count": 0, "answer_count": 2, "score": 7, "last_activity_date": 1544090612, "creation_date": 1544013637, "question_id": 53632586, "link": "https://stackoverflow.com/questions/53632586/constexpr-constructor-fails-to-satisfy-the-requirements-but-still-constexpr-wh", "title": "Constexpr constructor fails to satisfy the requirements, but still constexpr. Why?", "body": "<p>The standard says about template constexpr functions/constructors in <a href=\"http://eel.is/c++draft/dcl.constexpr#6\" rel=\"noreferrer\">dcl.constexpr/6</a>:</p>\n\n<blockquote>\n  <p>If the instantiated template specialization of a constexpr function template or member function of a class template would fail to satisfy the requirements for a constexpr function or constexpr constructor, that specialization is still a constexpr function or constexpr constructor, even though a call to such a function cannot appear in a constant expression. If no specialization of the template would satisfy the requirements for a constexpr function or constexpr constructor when considered as a non-template function or constructor, the template is ill-formed, no diagnostic required.</p>\n</blockquote>\n\n<p>The interesting part is:</p>\n\n<blockquote>\n  <p>fail to satisfy the requirements for a ... constexpr constructor, that specialization is still a ... constexpr constructor</p>\n</blockquote>\n\n<p>So, even if a constructor is marked with <code>constexpr</code>, it may not be used in a constant expression.</p>\n\n<p>Why does this rule exist? Why isn't <code>constexpr</code> removed, when a function doesn't satisfy the requirements?</p>\n\n<p>The current behavior is bad in two ways:</p>\n\n<ul>\n<li>the non-constexpr-ness isn't caught at the closest possible location, but at the actual constexpr expression, where it is used. So we have to find the offending part, where <code>constexpr</code> silently removed.</li>\n<li>an object, which is intended to be statically initialized (because it has a <code>constexpr</code> constructor), will be <a href=\"https://stackoverflow.com/questions/53632120/how-can-i-detect-that-a-constuctor-is-really-constexpr-so-i-can-utilize-static\">dynamically initialized</a> without any errors/warnings (because the constructor isn't \"really\" constexpr).</li>\n</ul>\n\n<p>Does this rule have some pros, which balances the cons of it?</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 8, "creation_date": 1544013562, "post_id": 53632535, "comment_id": 94124462, "body": "and then when it arrives at the 2nd 2, I want <code>offset = -16;</code>. WUT?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1544013616, "post_id": 53632535, "comment_id": 94124488, "body": "Keep the previous value in a separate variable. If it&#39;s different from the current value, then do whatever you need to do, and set the previous value variable to the current value."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1544013958, "post_id": 53632535, "comment_id": 94124684, "body": "best way to do it? no clue. One way to do it? Write a loop that does just what you explain in words. Its a bit foggy what you expect as answer..."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1544014569, "post_id": 53632535, "comment_id": 94125057, "body": "Sounds like a homework assignment.  The only thing I can think of that comes close is <a href=\"https://en.wikipedia.org/wiki/Run-length_encoding\" rel=\"nofollow noreferrer\">RLE</a>"}], "answers": [{"comments": [{"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 1, "creation_date": 1544014641, "post_id": 53632859, "comment_id": 94125104, "body": "How do you handle the case when <code>vec</code> is empty?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1544014679, "post_id": 53632859, "comment_id": 94125121, "body": "@Ayxan I dont, the initialization is hard coded, why should I handle something that cannot happen?"}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 1, "creation_date": 1544014776, "post_id": 53632859, "comment_id": 94125177, "body": "It surely won&#39;t stay hard coded and adding at least a small note would be useful IMO"}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 1, "last_activity_date": 1544014554, "creation_date": 1544014554, "answer_id": 53632859, "question_id": 53632535, "link": "https://stackoverflow.com/questions/53632535/change-certain-value-when-i-detect-change-in-vector/53632859#53632859", "title": "Change Certain Value When I Detect Change in Vector", "body": "<p>This is just what you explain in words translated to code:</p>\n\n<pre><code>vector&lt;int&gt; vec = {2, 2, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 5, 6, 6, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 9, 9, 9};\nint offset = 0;\nint current = vec[0];\nfor (unsigned i = 1; i&lt; vec.size(); ++i) {\n     if (vec[i] == current) offset -= 16;\n     else                   offset = 0;\n     current = vec[i];\n }\n</code></pre>\n\n<p>Though I dont really understand what this is supposed to be good for, or what you mean with \"best way\". However, the code was too much for a comment....</p>\n"}, {"tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": 0, "last_activity_date": 1544015828, "creation_date": 1544015828, "answer_id": 53633256, "question_id": 53632535, "link": "https://stackoverflow.com/questions/53632535/change-certain-value-when-i-detect-change-in-vector/53633256#53633256", "title": "Change Certain Value When I Detect Change in Vector", "body": "<p>It's unclear what you want to <em>do</em> with <code>offset</code> or where you want to obtain it. But if you're just looking for a way to output it on a per element basis you could hack <a href=\"https://en.cppreference.com/w/cpp/algorithm/adjacent_find\" rel=\"nofollow noreferrer\"><code>adjacent_find</code></a> or similar:</p>\n\n<pre><code>auto offset = 0;\n\ncout &lt;&lt; offset &lt;&lt; ' ';\nadjacent_find(cbegin(vec), cend(vec), [&amp;](const auto lhs, const auto rhs){\n    if(lhs == rhs) {\n        offset -= 16;\n    } else {\n        offset = 0;\n    }\n    cout &lt;&lt; offset &lt;&lt; ' ';\n    return false;\n});\n</code></pre>\n\n<p><a href=\"https://ideone.com/mp6nv7\" rel=\"nofollow noreferrer\"><kbd>Live Example</kbd></a></p>\n"}, {"comments": [{"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1544016993, "post_id": 53633264, "comment_id": 94126518, "body": "<code>for each (auto &amp;current in vec)</code> is that C# code in the middle of C++ code?"}, {"owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "reply_to_user": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1544021996, "post_id": 53633264, "comment_id": 94129799, "body": "@Ayxan no that is a ranged c++ loop with an auto reference. Should be part of c++11 ish."}, {"owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "reply_to_user": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1544022124, "post_id": 53633264, "comment_id": 94129881, "body": "@Ayxan ah - i see you corrected it. So the previous had the for each syntax - i think that is some experimental feature in visual studio and i did not notice while autocompleting my way to happyness."}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1544022144, "post_id": 53633264, "comment_id": 94129898, "body": "<code>each</code> is not valid c++, it won&#39;t compile that way"}, {"owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "reply_to_user": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1544022211, "post_id": 53633264, "comment_id": 94129936, "body": "@Ayxan I compiled and ran it on VS2017 before posting. I am pretty sure though you are right about that not beeing c++ there. has to be some compiler specific extension."}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 1, "creation_date": 1544022514, "post_id": 53633264, "comment_id": 94130135, "body": "Looks like yeah, that is the case. VS2017 output: <code>nonstandard extension &#39;for each&#39; used: replace with ranged-for statement</code>. minGW output: <code>error: expected &#39;(&#39; before &#39;each&#39;      for each (auto &amp;current in vec)</code>"}], "tags": [], "owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "is_accepted": false, "score": 1, "last_activity_date": 1544020198, "last_edit_date": 1544020198, "creation_date": 1544015848, "answer_id": 53633264, "question_id": 53632535, "link": "https://stackoverflow.com/questions/53632535/change-certain-value-when-i-detect-change-in-vector/53633264#53633264", "title": "Change Certain Value When I Detect Change in Vector", "body": "<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nint Test(const std::vector&lt;int&gt; &amp;vec)\n{\n    int offset = 0;\n    int previous = vec.size() &gt; 0 ? vec[0] : 0;\n    for (auto &amp;current : vec)\n    {\n        if (previous == current) offset -= 16;\n        else offset = 0;\n        previous = current;\n    }\n    return offset;\n}\n\n\nint main(int, char*[])\n{\n    std::cout &lt;&lt; \"None \" &lt;&lt; Test({}) &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"One \" &lt;&lt; Test({ 9 }) &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"Two Equal \" &lt;&lt; Test({ 9, 9 }) &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"Two Differnt \" &lt;&lt; Test({ 9, 8 }) &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"Many \" &lt;&lt; Test({ 2, 2, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 5, 6, 6, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 9, 9, 9 }) &lt;&lt; \"\\n\";\n    return 0;\n}\n</code></pre>\n\n<p>To find the best solution for you you should consider testing whatever solution you create so that you know it has the behavior you want. The output of this snippet can be inspected and you can check the individual tests with a debugger. Consider using a testing framework to preserve tests for the future. </p>\n"}, {"tags": [], "owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "is_accepted": false, "score": 0, "last_activity_date": 1544016123, "creation_date": 1544016123, "answer_id": 53633340, "question_id": 53632535, "link": "https://stackoverflow.com/questions/53632535/change-certain-value-when-i-detect-change-in-vector/53633340#53633340", "title": "Change Certain Value When I Detect Change in Vector", "body": "<p>Here's how I'd generalize this problem:</p>\n\n<ol>\n<li>Pass it to a function by reference</li>\n<li>Check if the vector is empty, if it is, throw an exception  </li>\n<li>Have a <code>for</code> loop, and declare <code>offset</code> <strong>outside</strong> it, so you can manually reset <code>offset</code> whenever you want.</li>\n</ol>\n\n<p>Example implementation:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;stdexcept&gt;\n\nvoid gen_offset(const std::vector&lt;int&gt;&amp; vec) {\n    if (vec.empty()) {\n        throw std::runtime_error(\"Vector is empty\");\n    }\n    int offset = 0;\n    int curr_val = vec[0];\n    for (size_t i = 1; i != vec.size(); ++i) {\n        if (vec[i] == curr_val) {\n            offset -= 16;\n        }\n        else {\n            std::cout &lt;&lt; curr_val &lt;&lt; \" =&gt; \" &lt;&lt; offset &lt;&lt; std::endl;\n            offset = 0;\n            curr_val = vec[i];\n        }\n    }\n}\n\nint main() {\n    std::vector&lt;int&gt; vec = {2, 2, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4,\n                       5, 6, 6, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 9, 9, 9};\n    gen_offset(vec);\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>2 =&gt; -16\n3 =&gt; -32\n4 =&gt; -96\n5 =&gt; 0\n6 =&gt; -16\n8 =&gt; -176\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 10422222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9a66ede9ebac7c16933020177bc488f?s=128&d=identicon&r=PG&f=1", "display_name": "SeePlusPlus", "link": "https://stackoverflow.com/users/10422222/seeplusplus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1544020198, "creation_date": 1544013464, "last_edit_date": 1544013572, "question_id": 53632535, "link": "https://stackoverflow.com/questions/53632535/change-certain-value-when-i-detect-change-in-vector", "title": "Change Certain Value When I Detect Change in Vector", "body": "<p>So, I have the following vector:</p>\n\n<pre><code>vector&lt;int&gt; vec = {2, 2, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 5, 6, 6, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 9, 9, 9};\n</code></pre>\n\n<p>I have a value offset which starts at 0:</p>\n\n<pre><code>int offset = 0;\n</code></pre>\n\n<p>I want to go through the array and change the offset value accordingly. \nFor example, if we started at the beginning (at the first 2), the I want</p>\n\n<pre><code>offset = 0;\n</code></pre>\n\n<p>And then, when it arrives at the second 2, I want</p>\n\n<pre><code>offset = -16;\n</code></pre>\n\n<p>But ONCE I see that the array value is no longer 2 (it changes), I want offset to reset to 0 (and then if it sees the next 3, it will become <code>offset = offset - 16</code>).</p>\n\n<p>I want to keep subtracting 16 from my offset value as long as the value in the vector doesn't change while I iterate over it. But once I detect a change, I want to reset offset.</p>\n\n<p>What is the best way to do this? </p>\n"}, {"tags": ["c++", "c++11", "boost-asio", "sigint"], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 0, "last_activity_date": 1544020427, "creation_date": 1544020427, "answer_id": 53634632, "question_id": 53632450, "link": "https://stackoverflow.com/questions/53632450/stopping-scheduled-task-with-sigint/53634632#53634632", "title": "Stopping scheduled task with SIGINT", "body": "<p>By all means, I'd suggest using <code>signal_set</code> <a href=\"https://www.boost.org/doc/libs/1_68_0/doc/html/boost_asio/reference/signal_set.html\" rel=\"nofollow noreferrer\">https://www.boost.org/doc/libs/1_68_0/doc/html/boost_asio/reference/signal_set.html</a></p>\n\n<p>Here are some examples: <a href=\"https://stackoverflow.com/search?q=user%3A85371+signal_set\">https://stackoverflow.com/search?q=user%3A85371+signal_set</a></p>\n\n<p>The best part is that is insulates you from some platform specific things and removes common pitfalls related to writing async-safe handlers.</p>\n"}], "owner": {"reputation": 969, "user_id": 2928544, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yeaGD.jpg?s=128&g=1", "display_name": "raidensan", "link": "https://stackoverflow.com/users/2928544/raidensan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544077214, "creation_date": 1544013210, "last_edit_date": 1544077214, "question_id": 53632450, "link": "https://stackoverflow.com/questions/53632450/stopping-scheduled-task-with-sigint", "title": "Stopping scheduled task with SIGINT", "body": "<p><strong>Background</strong> </p>\n\n<p>I am trying to stop periodic tasks when user interrupts process with SIGINT. I have based my periodic task scheduler on <a href=\"https://stackoverflow.com/a/40389021\">this answer</a>.</p>\n\n<p>To accomplish this I tried passing PeriodicScheduler instance pointer to my InterruptHandler and calling <code>ps-&gt;stop()</code>.</p>\n\n<p>Periodic Task Scheduler header:</p>\n\n<pre><code>#ifndef __PERIODICSCHEDULER_H__\n#define __PERIODICSCHEDULER_H__\n\n#include &lt;boost/asio.hpp&gt;\n#include &lt;boost/bind.hpp&gt;\n#include &lt;boost/noncopyable.hpp&gt;\n\nnamespace APP{\n    class PeriodicTask : boost::noncopyable {\n        public:\n            typedef std::function&lt;void()&gt; handler_fn;\n\n            PeriodicTask(boost::asio::io_service&amp; ioService\n                , std::string const&amp; name\n                , int interval\n                , handler_fn task);\n            void execute(boost::system::error_code const&amp; e);\n            void start();\n\n        private:\n            void start_wait();\n\n            boost::asio::io_service&amp; ioService;\n            boost::asio::deadline_timer timer;\n            handler_fn task;\n            std::string name;\n            int interval;\n\n    }; /* class PeriodicTask */\n\n    class PeriodicScheduler : boost::noncopyable\n    {\n        public:\n            template&lt;typename T, typename... Args&gt;\n            std::unique_ptr&lt;T&gt; make_unique(Args&amp;&amp;... args) {\n                return std::unique_ptr&lt;T&gt;(new T(std::forward&lt;Args&gt;(args)...));\n            }\n\n            void run();\n            void stop();\n            void addTask(std::string const&amp; name\n                                            , PeriodicTask::handler_fn const&amp; task\n                                            , int interval);\n\n        private:\n            boost::asio::io_service io_service;\n            std::vector&lt;std::unique_ptr&lt;PeriodicTask&gt;&gt; tasks;\n    }; /* PeriodicScheduler */\n} /* namespace Resto */\n\n#endif /* __PERIODICSCHEDULER_H__ */\n</code></pre>\n\n<p>Periodic Task Scheduler source:</p>\n\n<pre><code>#include &lt;boost/asio.hpp&gt;\n#include &lt;boost/bind.hpp&gt;\n#include &lt;boost/noncopyable.hpp&gt;\n\n#include \"periodicScheduler.h\"\n\nAPP::PeriodicTask::PeriodicTask(boost::asio::io_service&amp; ioService\n            , std::string const&amp; name\n            , int interval\n            , handler_fn task)\n            : ioService(ioService)\n            , interval(interval)\n            , task(task)\n            , name(name)\n            , timer(ioService){\n            // Schedule start to be ran by the io_service\n            ioService.post(boost::bind(&amp;PeriodicTask::start, this));\n        }\n\nvoid APP::PeriodicTask::execute(boost::system::error_code const&amp; e){\n    if (e != boost::asio::error::operation_aborted) {\n\n        task();\n\n        timer.expires_at(timer.expires_at() + boost::posix_time::seconds(interval));\n        start_wait();\n    }\n}\n\nvoid APP::PeriodicTask::start(){\n\n    // Uncomment if you want to call the handler on startup (i.e. at time 0)\n    // task();\n\n    timer.expires_from_now(boost::posix_time::seconds(interval));\n    start_wait();\n}\n\nvoid APP::PeriodicTask::start_wait(){\n    timer.async_wait(boost::bind(&amp;PeriodicTask::execute\n        , this\n        , boost::asio::placeholders::error));\n}\n\n\n\nvoid APP::PeriodicScheduler::run(){\n    io_service.run();\n}\n\nvoid APP::PeriodicScheduler::stop(){\n    io_service.stop();\n}\n\nvoid APP::PeriodicScheduler::addTask(std::string const&amp; name\n    , PeriodicTask::handler_fn const&amp; task\n    , int interval){\n    tasks.push_back(make_unique&lt;PeriodicTask&gt;(std::ref(io_service)\n        , name, interval, task));\n}\n</code></pre>\n\n<p>The following is InterruptHandler: </p>\n\n<pre><code>#include &lt;csignal&gt;\n#include &lt;condition_variable&gt;\n#include &lt;mutex&gt;\n#include &lt;iostream&gt;\n#include &lt;boost/asio.hpp&gt;\n\n#include \"periodicScheduler.h\"\n\nstatic std::condition_variable _condition;\nstatic std::mutex _mutex;\n\nnamespace APP {\n    class InterruptHandler {\n    public:\n        static void hookSIGINT() {\n            signal(SIGINT, handleUserInterrupt);        \n        }\n\n        static void handleUserInterrupt(int signal){\n            if (signal == SIGINT) {\n                std::cout &lt;&lt; \"SIGINT trapped ...\" &lt;&lt; '\\n';\n                _condition.notify_one();\n            }\n        }\n\n        static void waitForUserInterrupt(APP::PeriodicScheduler *ps) {\n            std::unique_lock&lt;std::mutex&gt; lock { _mutex };\n            _condition.wait(lock);\n            ps-&gt;stop();\n            std::cout &lt;&lt; \"user has signaled to interrup program...\" &lt;&lt; '\\n';\n            lock.unlock();\n        }\n    };\n}\n</code></pre>\n\n<p>My <code>main()</code></p>\n\n<pre><code>int main(int ac, const char * av[]) {\n\n    InterruptHandler::hookSIGINT();\n\n    APP::PeriodicScheduler ps;\n\n    APP::WorkerClass wc;\n\n    // WorkerClass::someTask and WorkerClass:someOtherTask are dummy functions only with sleep(5); inside them\n\n    ps.addTask(\"someTask\", boost::bind( &amp;APP::WorkerClass::someTask, wc ), 60);\n    ps.addTask(\"someOtherTask\", boost::bind( &amp;APP::WorkerClass::someOtherTask, wc ), 60);\n\n    ps.run();\n\n    InterruptHandler::waitForUserInterrupt(&amp;ps);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Issue</strong></p>\n\n<p>After running my app in terminal I pressed CTRL+C to trigger interrupt. I can see <code>SIGINT trapped ...</code> in the terminal but, application continues to run.</p>\n\n<p>If I comment out <code>ps.run();</code> statement, upon pressing CTRL+C I can see <code>SIGINT trapped ...</code> followed by <code>user has signaled to interrup program...</code> and application exits.</p>\n\n<p><strong>Questions</strong></p>\n\n<p>Is my approach correct? How can I effectively stop scheduled tasks and exit application?</p>\n\n<p>Did I miss something?</p>\n"}, {"tags": ["c++", "distribution", "sampling"], "comments": [{"owner": {"reputation": 5008, "user_id": 5762796, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3acb5c2021f4c279f29d61481b28e15?s=128&d=identicon&r=PG&f=1", "display_name": "Aleph0", "link": "https://stackoverflow.com/users/5762796/aleph0"}, "edited": false, "score": 0, "creation_date": 1544015623, "post_id": 53632441, "comment_id": 94125715, "body": "In think this article <a href=\"https://arxiv.org/abs/1603.06556\" rel=\"nofollow noreferrer\">arxiv.org/abs/1603.06556</a> might be helpful. At the bottom there is an interesting algorithm for sampling from such distribtutions. But I didn&#39;t found any library having your desired function, at least no C++ library."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10749157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306068148081dca1c4619c7e71121db1?s=128&d=identicon&r=PG&f=1", "display_name": "T.A.", "link": "https://stackoverflow.com/users/10749157/t-a"}, "edited": false, "score": 0, "creation_date": 1544023541, "post_id": 53634099, "comment_id": 94130768, "body": "Thank you for the suggestion. I was wondering if there was a way to avoid creating the discrete-distribution at each step. But it may not be that easy...."}, {"owner": {"reputation": 21, "user_id": 10749157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306068148081dca1c4619c7e71121db1?s=128&d=identicon&r=PG&f=1", "display_name": "T.A.", "link": "https://stackoverflow.com/users/10749157/t-a"}, "edited": false, "score": 0, "creation_date": 1544118602, "post_id": 53634099, "comment_id": 94172530, "body": "Great. I will have a look at it. Thanks a lot !"}, {"owner": {"reputation": 21, "user_id": 10749157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306068148081dca1c4619c7e71121db1?s=128&d=identicon&r=PG&f=1", "display_name": "T.A.", "link": "https://stackoverflow.com/users/10749157/t-a"}, "edited": false, "score": 0, "creation_date": 1544135442, "post_id": 53634099, "comment_id": 94179599, "body": "Thank your for the edit. I tried the code, but it does not sample a subset of the original vector. If I wrote the last element of the vector w as &#39;2&#39;, I do not get a sample of 2 elements.  I must say that the code is very complicated for a newbie like me. Could you help me with that? Cheers"}, {"owner": {"reputation": 21, "user_id": 10749157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306068148081dca1c4619c7e71121db1?s=128&d=identicon&r=PG&f=1", "display_name": "T.A.", "link": "https://stackoverflow.com/users/10749157/t-a"}, "edited": false, "score": 0, "creation_date": 1544135976, "post_id": 53634099, "comment_id": 94179806, "body": "Ok, I just figured out that I have to take the first elements of the vector samples. Is that it?"}, {"owner": {"reputation": 5008, "user_id": 5762796, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3acb5c2021f4c279f29d61481b28e15?s=128&d=identicon&r=PG&f=1", "display_name": "Aleph0", "link": "https://stackoverflow.com/users/5762796/aleph0"}, "reply_to_user": {"reputation": 21, "user_id": 10749157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306068148081dca1c4619c7e71121db1?s=128&d=identicon&r=PG&f=1", "display_name": "T.A.", "link": "https://stackoverflow.com/users/10749157/t-a"}, "edited": false, "score": 0, "creation_date": 1544162956, "post_id": 53634099, "comment_id": 94185987, "body": "You are right. If you change for example the last weight to a high value, say 100. Then you have a high chance, that the sample 9 is the first in the list. Maybe the code would be more readable, if I remove the STL functions?"}, {"owner": {"reputation": 21, "user_id": 10749157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306068148081dca1c4619c7e71121db1?s=128&d=identicon&r=PG&f=1", "display_name": "T.A.", "link": "https://stackoverflow.com/users/10749157/t-a"}, "edited": false, "score": 0, "creation_date": 1544172333, "post_id": 53634099, "comment_id": 94189683, "body": "It is very clear. And it does the job very well! Thank you for your help."}], "tags": [], "owner": {"reputation": 5008, "user_id": 5762796, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3acb5c2021f4c279f29d61481b28e15?s=128&d=identicon&r=PG&f=1", "display_name": "Aleph0", "link": "https://stackoverflow.com/users/5762796/aleph0"}, "is_accepted": false, "score": 2, "last_activity_date": 1544165962, "last_edit_date": 1544165962, "creation_date": 1544018542, "answer_id": 53634099, "question_id": 53632441, "link": "https://stackoverflow.com/questions/53632441/c-sampling-from-discrete-distribution-without-replacement/53634099#53634099", "title": "C++: Sampling from discrete distribution without replacement", "body": "<p>This solution might be a bit shorter. Unfortunately, it needs to create a <code>discrete_distribution&lt;&gt;</code> object in every step, which might be prohibitive when drawing a lot of samples.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;boost/random/discrete_distribution.hpp&gt;\n#include &lt;boost/random/mersenne_twister.hpp&gt;\n\nusing namespace boost::random;\n\nint main(int, char**) {\n    std::vector&lt;double&gt; w = { 2, 2, 1, 1, 2, 2, 1, 1, 2, 2 };\n    discrete_distribution&lt;&gt; dist(w);\n    int n = 10;\n    boost::random::mt19937 gen;\n    std::vector&lt;int&gt; samples;\n    for (auto i = 0; i &lt; n; i++) {\n        samples.push_back(dist(gen));\n        w[*samples.rbegin()] = 0;\n        dist = discrete_distribution&lt;&gt;(w);\n    }\n    for (auto iter : samples) {\n        std::cout &lt;&lt; iter &lt;&lt; \" \";\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Improved answer:</strong></p>\n\n<p>After carefully looking for a similar question on this site (<a href=\"https://stackoverflow.com/q/15113650/5762796\">Faster weighted sampling without replacement</a>), I found a stunningly simple algorithm  for weighted sampling without replacement, it is just a bit complicated to implement in C++. Note, that this is not the most efficient algorithm, but it seems to me the simplest one to implement. </p>\n\n<p>In <a href=\"https://doi.org/10.1016/j.ipl.2005.11.003\" rel=\"nofollow noreferrer\">https://doi.org/10.1016/j.ipl.2005.11.003</a> the method is described in detail.</p>\n\n<p>Especially, it is not efficient if the sample size is much smaller than the basic population.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iterator&gt;\n#include &lt;boost/random/uniform_01.hpp&gt;\n#include &lt;boost/random/mersenne_twister.hpp&gt;\n\nusing namespace boost::random;\n\nint main(int, char**) {\n    std::vector&lt;double&gt; w = { 2, 2, 1, 1, 2, 2, 1, 1, 2, 10 };\n    uniform_01&lt;&gt; dist;\n    boost::random::mt19937 gen;\n    std::vector&lt;double&gt; vals;\n    std::generate_n(std::back_inserter(vals), w.size(), [&amp;dist,&amp;gen]() { return dist(gen); });\n    std::transform(vals.begin(), vals.end(), w.begin(), vals.begin(), [&amp;](auto r, auto w) { return std::pow(r, 1. / w); });\n    std::vector&lt;std::pair&lt;double, int&gt;&gt; valIndices;\n    size_t index = 0;\n    std::transform(vals.begin(), vals.end(), std::back_inserter(valIndices), [&amp;index](auto v) { return std::pair&lt;double,size_t&gt;(v,index++); });\n    std::sort(valIndices.begin(), valIndices.end(), [](auto x, auto y) { return x.first &gt; y.first; });\n    std::vector&lt;int&gt; samples;\n    std::transform(valIndices.begin(), valIndices.end(), std::back_inserter(samples), [](auto v) { return v.second; });\n\n    for (auto iter : samples) {\n        std::cout &lt;&lt; iter &lt;&lt; \" \";\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Easier answer</strong></p>\n\n<p>I just removed some of the STL functions and replaced it with simple for loops.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iterator&gt;\n#include &lt;boost/random/uniform_01.hpp&gt;\n#include &lt;boost/random/mersenne_twister.hpp&gt;\n#include &lt;algorithm&gt;\n\nusing namespace boost::random;\n\nint main(int, char**) {\n    std::vector&lt;double&gt; w = { 2, 2, 1, 1, 2, 2, 1, 1, 2, 1000 };\n    uniform_01&lt;&gt; dist;\n    boost::random::mt19937 gen(342575235);\n    std::vector&lt;double&gt; vals;\n    for (auto iter : w) {\n        vals.push_back(std::pow(dist(gen), 1. / iter));\n    }\n    // Sorting vals, but retain the indices. \n    // There is unfortunately no easy way to do this with STL.\n    std::vector&lt;std::pair&lt;int, double&gt;&gt; valsWithIndices;\n    for (size_t iter = 0; iter &lt; vals.size(); iter++) {\n        valsWithIndices.emplace_back(iter, vals[iter]);\n    }\n    std::sort(valsWithIndices.begin(), valsWithIndices.end(), [](auto x, auto y) {return x.second &gt; y.second; });\n\n    std::vector&lt;size_t&gt; samples;\n    int sampleSize = 8;\n    for (auto iter = 0; iter &lt; sampleSize; iter++) {\n        samples.push_back(valsWithIndices[iter].first);\n    }\n    for (auto iter : samples) {\n        std::cout &lt;&lt; iter &lt;&lt; \" \";\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10749157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306068148081dca1c4619c7e71121db1?s=128&d=identicon&r=PG&f=1", "display_name": "T.A.", "link": "https://stackoverflow.com/users/10749157/t-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1112, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1544165962, "creation_date": 1544013190, "question_id": 53632441, "link": "https://stackoverflow.com/questions/53632441/c-sampling-from-discrete-distribution-without-replacement", "title": "C++: Sampling from discrete distribution without replacement", "body": "<p>I'd like to sample from a discrete distribution without replacement (i.e., without repetition). </p>\n\n<p>With the function <em>discrete_distribution</em>, it is possible to sample with replacement. And, with this function, I implemented sampling without replacement in a very rough way: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;random&gt;\n#include &lt;vector&gt;\n#include &lt;array&gt;\n\nint main()\n{\n    const int sampleSize = 8;   // Size of the sample\n    std::vector&lt;double&gt; weights = {2,2,1,1,2,2,1,1,2,2}; // 10 possible outcome with different weights\n\n    std::random_device rd;\n    std::mt19937 generator(rd());\n\n    /// WITH REPLACEMENT\n\n    std::discrete_distribution&lt;int&gt; distribution(weights.begin(), weights.end()); \n\n    std::array&lt;int, 10&gt; p ={};\n    for(int i=0; i&lt;sampleSize; ++i){\n        int number = distribution(generator);\n        ++p[number];\n    }\n\n    std::cout &lt;&lt; \"Discrete_distribution with replacement:\" &lt;&lt; std::endl;\n    for (int i=0; i&lt;10; ++i)\n    std::cout &lt;&lt; i &lt;&lt; \": \" &lt;&lt; std::string(p[i],'*') &lt;&lt; std::endl;\n\n\n    /// WITHOUT REPLACEMENT\n\n    p = {};\n    for(int i=0; i&lt;sampleSize; ++i){\n        std::discrete_distribution&lt;int&gt; distribution(weights.begin(), weights.end()); \n        int number = distribution(generator);\n        weights[number] = 0; // the weight associate to the sampled value is set to 0\n        ++p[number];\n    }\n\n    std::cout &lt;&lt; \"Discrete_distribution without replacement:\" &lt;&lt; std::endl;\n    for (int i=0; i&lt;10; ++i)\n    std::cout &lt;&lt; i &lt;&lt; \": \" &lt;&lt; std::string(p[i],'*') &lt;&lt; std::endl;\n\n\n    return 0;\n}\n</code></pre>\n\n<p>Have you ever coded such sampling without replacement? Probably in a more optimized way?</p>\n\n<p>Thank you.</p>\n\n<p>Cheers,</p>\n\n<p>T.A.</p>\n"}, {"tags": ["c++", "c++11", "vector", "stdvector", "stdmap"], "comments": [{"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1544013069, "post_id": 53632376, "comment_id": 94124148, "body": "Which C++ Standard? C++11?"}, {"owner": {"reputation": 4480, "user_id": 2261062, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15756b0278dbf58ae90d2ffe8accbb81?s=128&d=identicon&r=PG", "display_name": "Sembei Norimaki", "link": "https://stackoverflow.com/users/2261062/sembei-norimaki"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1544013128, "post_id": 53632376, "comment_id": 94124184, "body": "Yup, but if the solution is different for other standards I&#39;d appreciate for completness if you could also provide the differences, thanks"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 1, "creation_date": 1544013375, "post_id": 53632376, "comment_id": 94124337, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/33207232/emplace-back-not-working-with-stdvectorstdmapint-int\">emplace_back not working with std::vector&lt;std::map&lt;int, int&gt;&gt;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4480, "user_id": 2261062, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15756b0278dbf58ae90d2ffe8accbb81?s=128&d=identicon&r=PG", "display_name": "Sembei Norimaki", "link": "https://stackoverflow.com/users/2261062/sembei-norimaki"}, "edited": false, "score": 0, "creation_date": 1544013272, "post_id": 53632442, "comment_id": 94124278, "body": "Could you elaborate a bit? I don&#39;t want to initialize the vector with some edges, I just want inside a loop to be able to push an edge to the vector without having to declare an edge, just passing the two values."}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "reply_to_user": {"reputation": 4480, "user_id": 2261062, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15756b0278dbf58ae90d2ffe8accbb81?s=128&d=identicon&r=PG", "display_name": "Sembei Norimaki", "link": "https://stackoverflow.com/users/2261062/sembei-norimaki"}, "edited": false, "score": 1, "creation_date": 1544013319, "post_id": 53632442, "comment_id": 94124305, "body": "@SembeiNorimaki <code>push_back</code> is the same"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 4480, "user_id": 2261062, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15756b0278dbf58ae90d2ffe8accbb81?s=128&d=identicon&r=PG", "display_name": "Sembei Norimaki", "link": "https://stackoverflow.com/users/2261062/sembei-norimaki"}, "edited": false, "score": 5, "creation_date": 1544013614, "post_id": 53632442, "comment_id": 94124486, "body": "@SembeiNorimaki you cannot push an edge to the vector because you don&#39;t have a vector of edge. You can push a map with one edge."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 4480, "user_id": 2261062, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15756b0278dbf58ae90d2ffe8accbb81?s=128&d=identicon&r=PG", "display_name": "Sembei Norimaki", "link": "https://stackoverflow.com/users/2261062/sembei-norimaki"}, "edited": false, "score": 0, "creation_date": 1544013619, "post_id": 53632442, "comment_id": 94124492, "body": "@SembeiNorimaki <code>std::map</code> has a constructor with a parameter of type <code>std::initializer_list</code>. Since <code>std::vector::push_back</code> has a parameter of <code>std::map</code> type here, that constructor is used (that&#39;s the reason why <code>emplace_back</code> does not work)."}], "tags": [], "owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "is_accepted": true, "score": 4, "last_activity_date": 1544013298, "last_edit_date": 1544013298, "creation_date": 1544013192, "answer_id": 53632442, "question_id": 53632376, "link": "https://stackoverflow.com/questions/53632376/insert-stdmap-into-stdvector-directly/53632442#53632442", "title": "Insert std::map into std::vector directly", "body": "<p>You can list initialization:</p>\n\n<pre><code>nodes vec {\n    { {'a', 12}, {'b', 32} },\n    { {'c', 77} },\n};\n\nvec.push_back(\n        { {'d', 88}, {'e', 99} }\n        );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 3, "last_activity_date": 1544013862, "last_edit_date": 1544013862, "creation_date": 1544013254, "answer_id": 53632472, "question_id": 53632376, "link": "https://stackoverflow.com/questions/53632376/insert-stdmap-into-stdvector-directly/53632472#53632472", "title": "Insert std::map into std::vector directly", "body": "<p>Use an extended initializer list, like this:</p>\n\n<pre><code>n.push_back({ {'c', 2} });\n</code></pre>\n\n<p><kbd><a href=\"https://wandbox.org/permlink/DsKFHFG79REU04kU\" rel=\"nofollow noreferrer\">Live demo</a></kbd></p>\n\n<p>Requires C++11, or later.</p>\n"}, {"tags": [], "owner": {"reputation": 80, "user_id": 2011464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8b118503f2478e924ae3d571eb97979?s=128&d=identicon&r=PG", "display_name": "O Dundar", "link": "https://stackoverflow.com/users/2011464/o-dundar"}, "is_accepted": false, "score": 0, "last_activity_date": 1544014096, "creation_date": 1544014096, "answer_id": 53632721, "question_id": 53632376, "link": "https://stackoverflow.com/questions/53632376/insert-stdmap-into-stdvector-directly/53632721#53632721", "title": "Insert std::map into std::vector directly", "body": "<p>In your solution, you add <code>map</code> to vector instead of pairs. A method should iterate over each element to place it in vector. Therefore you can access to element with <code>n[0]['c']</code> etc.</p>\n\n<p>I thought, using <code>for_each</code> and a lambda expression with passing vector reference to create a one line solution to add pairs into vector.</p>\n\n<pre><code>#include &lt;algorithm&gt; \n\ntypedef map&lt;char, int&gt; edges;\n//change this to take pair\ntypedef vector&lt;pair&lt;char, int&gt;&gt; nodes;\n\nnodes n;\nedges e;        //declare an edge\n\n//map elements are pairs\nfor_each(e.begin(), e.end(), [&amp;n](pair&lt;char, int&gt; p) { n.push_back(p); });\n</code></pre>\n\n<p>I hope this explains a solution for you.</p>\n"}], "owner": {"reputation": 4480, "user_id": 2261062, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15756b0278dbf58ae90d2ffe8accbb81?s=128&d=identicon&r=PG", "display_name": "Sembei Norimaki", "link": "https://stackoverflow.com/users/2261062/sembei-norimaki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 1, "accepted_answer_id": 53632442, "answer_count": 3, "score": 3, "last_activity_date": 1544018154, "creation_date": 1544012971, "last_edit_date": 1544018154, "question_id": 53632376, "link": "https://stackoverflow.com/questions/53632376/insert-stdmap-into-stdvector-directly", "title": "Insert std::map into std::vector directly", "body": "<p>Sorry if the question is very trivial.</p>\n\n<p>I have a vector of maps:</p>\n\n<pre><code>typedef map&lt;char, int&gt; edges;\ntypedef vector&lt;edges&gt; nodes;\n\nnodes n;\n</code></pre>\n\n<p>Now let's say I want to push a toy edge. I tried different things and what I worked is</p>\n\n<pre><code>edges e;        //declare an edge\ne['c'] = 1;     //initialize it\nn.push_back(e);  //push it to the vector\n</code></pre>\n\n<p>How can I just push the pair of values of an edge ('c' and 2) without having to declare a variable and initialize it?</p>\n\n<p>Something like:</p>\n\n<pre><code>n.push_back(edges('c',2));\n</code></pre>\n\n<p>but compiler gives an error</p>\n\n<pre><code>error: no matching function for call to \u2018std::map&lt;char, int&gt;::map(char, int)\u2019\n</code></pre>\n"}, {"tags": ["c++", "delphi", "c++builder"], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1544041760, "last_edit_date": 1544041760, "creation_date": 1544026203, "answer_id": 53636354, "question_id": 53632256, "link": "https://stackoverflow.com/questions/53632256/e2108-improper-use-of-typedef-tjsonobject-error-when-using-getvalue-path-evalu/53636354#53636354", "title": "E2108 Improper use of typedef &#39;TJSONObject&#39; Error when using GetValue path evaluator", "body": "<p>The <code>tokens</code> field is an Array, not an Object.  So you need to request a <code>TJSONArray</code> from <code>GetValue&lt;T&gt;()</code> instead of a <code>TJSONObject</code>.</p>\n\n<p>But, more importantly, the type you request from <code>GetValue&lt;T&gt;()</code> needs to be a <em>pointer</em> type since you are requesting a JSON class type, and not a built-in type like an <code>int</code> or <code>String</code>.  Since you are requesting a <code>TJSONObject</code> instead of a <code>TJSONObject*</code>, that is why you are getting the error.</p>\n\n<p>Also, <code>GetValue&lt;T&gt;()</code> returns the <em>value</em> portion of a Pair, not the Pair itself.  So you need to assign the returned pointer to a <code>TJSONArray*</code> variable (<code>jpa</code> is a <code>TJSONPair*</code> instead).</p>\n\n<p>Try this:</p>\n\n<pre><code>TJSONArray *Data = ...;\n\nTJSONObject *obj;\nTJSONArray *arr;\n\nfor(int i = 0; i &lt; Data-&gt;Size(); i++)\n{\n    obj = (TJSONObject*) Data-&gt;Get(i);\n    arr = obj-&gt;GetValue&lt;TJSONArray*&gt;(\"tokens\");\n}\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>TJSONArray *Data = ...;\n\nTJSONArray *arr;\n\nfor(int i = 0; i &lt; Data-&gt;Size(); i++)\n{\n    arr = Data-&gt;GetValue&lt;TJSONArray*&gt;(\"$[\"+IntToStr(i)+\"].tokens\");\n}\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 10548418, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002062306660/picture?type=large", "display_name": "Aziz", "link": "https://stackoverflow.com/users/10548418/aziz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 53636354, "answer_count": 1, "score": 0, "last_activity_date": 1544063608, "creation_date": 1544012626, "last_edit_date": 1544063608, "question_id": 53632256, "link": "https://stackoverflow.com/questions/53632256/e2108-improper-use-of-typedef-tjsonobject-error-when-using-getvalue-path-evalu", "title": "E2108 Improper use of typedef &#39;TJSONObject&#39; Error when using GetValue path evaluator", "body": "<p>I cannot use path evaluator with GetValue.</p>\n\n<p>This is the situation:</p>\n\n<pre class=\"lang-json prettyprint-override\"><code>[{\"source\":\"aaaa\",\"cluster\":\"1\",\"tokens\":[{},{}]}, {\"source\":\"bbbb\",\"cluster\":\"2\",\"tokens\":[{},{}]}]    \n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>TJSONArray *Data = ...;\n\nTJSONObject *obj;\nTJSONPair *jpa;\n\nfor(int i=0; i&lt;Data-&gt;Size(); i++)\n{\n  obj = (TJSONObject*) Data-&gt;Get(i); \n  jpa = obj-&gt;GetValue&lt;TJSONObject&gt;(\"$.tokens\");\n}\n</code></pre>\n\n<p>I got an error, on this line:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>jpa = obj-&gt;GetValue&lt;TJSONObject&gt;(\"$[\"+IntToStr(i)+\"].tokens\");\n</code></pre>\n\n<blockquote>\n  <p>ERROR:\n  E2108 Improper use of typedef 'TJSONObject' </p>\n</blockquote>\n\n<p>How to use path evaluator correctly?</p>\n"}, {"tags": ["c++", "compiler-construction", "return", "llvm", "control-flow"], "comments": [{"owner": {"reputation": 21891, "user_id": 1243762, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b9b83cf6ca76699d7abfbba07f4675a3?s=128&d=identicon&r=PG&f=1", "display_name": "Guy Coder", "link": "https://stackoverflow.com/users/1243762/guy-coder"}, "edited": false, "score": 1, "creation_date": 1544015486, "post_id": 53632131, "comment_id": 94125624, "body": "Why no mention of type checking?"}, {"owner": {"reputation": 486, "user_id": 8039762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l1jNj.jpg?s=128&g=1", "display_name": "cgsdfc", "link": "https://stackoverflow.com/users/8039762/cgsdfc"}, "reply_to_user": {"reputation": 21891, "user_id": 1243762, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b9b83cf6ca76699d7abfbba07f4675a3?s=128&d=identicon&r=PG&f=1", "display_name": "Guy Coder", "link": "https://stackoverflow.com/users/1243762/guy-coder"}, "edited": false, "score": 0, "creation_date": 1544017402, "post_id": 53632131, "comment_id": 94126771, "body": "Sorry for missing type checking since I&#39;ve somehow done it. And I want to focus on the problem related with CFG. I will make it explicit in the question that type checking is out of concern for this question."}, {"owner": {"reputation": 989, "user_id": 5871748, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f1Ty1.png?s=128&g=1", "display_name": "Chirag Patel", "link": "https://stackoverflow.com/users/5871748/chirag-patel"}, "edited": false, "score": 0, "creation_date": 1544018291, "post_id": 53632131, "comment_id": 94127276, "body": "LLVM has unifyfunctionexitnodes pass which as name suggests unifies exit nodes :) not sure if it is the same thing you are looking for, it also has getReturnBlock function which may be helpful to you. see <a href=\"http://llvm.org/doxygen/structllvm_1_1UnifyFunctionExitNodes.html#a5cecc9622aa7c37d2d290c729594eaf6\" rel=\"nofollow noreferrer\">llvm.org/doxygen/&hellip;</a>"}, {"owner": {"reputation": 486, "user_id": 8039762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l1jNj.jpg?s=128&g=1", "display_name": "cgsdfc", "link": "https://stackoverflow.com/users/8039762/cgsdfc"}, "reply_to_user": {"reputation": 989, "user_id": 5871748, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f1Ty1.png?s=128&g=1", "display_name": "Chirag Patel", "link": "https://stackoverflow.com/users/5871748/chirag-patel"}, "edited": false, "score": 0, "creation_date": 1544019268, "post_id": 53632131, "comment_id": 94127868, "body": "@ChiragPatel, thanks for your suggestion. But that&#39;s not what I am looking for. I want to make sure the user code is well-formed. Malformed user code leads to malformed IR (some BB ends without a Terminator). I am new to <code>LLVM</code> and not sure if any pass of it accept malformed IR. Anyway, I came out of a solution and will post it later. Keep concerned!"}], "answers": [{"tags": [], "owner": {"reputation": 486, "user_id": 8039762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l1jNj.jpg?s=128&g=1", "display_name": "cgsdfc", "link": "https://stackoverflow.com/users/8039762/cgsdfc"}, "is_accepted": false, "score": 4, "last_activity_date": 1544022154, "last_edit_date": 1544022154, "creation_date": 1544020762, "answer_id": 53634733, "question_id": 53632131, "link": "https://stackoverflow.com/questions/53632131/compiler-how-to-check-a-user-function-returns-properly/53634733#53634733", "title": "Compiler: how to check a user function returns properly?", "body": "<p>The answer is simple. After all BB's of a function are emitted, loop over them and pick up those ends <strong>without</strong> a Terminator (see the llvm document for what is a Terminator Instruction). Assuming the emission of all kinds of control flow statements (While, For, etc.) follows the rule (One BB is ended by one and only one Terminator), the only possible explanation of these rule-breakers is that they miss a <code>Return</code> IR in the end. If the current function return <code>void</code>, append a <code>ReturnVoid</code> to them. Otherwise, this is an error, report it.</p>\n\n<p>The reasoning is largely correct as it rely on the well-formed property of LLVM's BB and it is easy to implement, cheap to run. Here is the code:</p>\n\n<pre><code>/// Generate body for a Function.\nvoid visitFuncDef(FuncDef *FD) {\n  // Unrelated code omitted...\n\n  /// Generate the body\n  for (Stmt *S : FD-&gt;stmts) {\n    visitStmt(S);\n  }\n\n  /// Check for well-formness of all BBs. In particular, look for\n  /// any unterminated BB and try to add a Return to it.\n  for (BasicBlock &amp;BB : *Fn) {\n    Instruction *Terminator = BB.getTerminator();\n    if (Terminator != nullptr) continue; /// Well-formed\n    if (Fn-&gt;getReturnType()-&gt;isVoidTy()) {\n      /// Make implicit return of void Function explicit.\n      Builder.SetInsertPoint(&amp;BB);\n      Builder.CreateRetVoid();\n    } else {\n      // How to attach source location?\n      EM.Error(\"control flow reaches end of non-void function\");\n      // No source location, make errors short\n      return;\n    }\n  }\n\n  /// Verify the function body\n  String ErrorMsg;\n  llvm::raw_string_ostream OS(ErrorMsg);\n  if (llvm::verifyFunction(*Fn, &amp;OS)) {\n    EM.Error(ErrorMsg);\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 486, "user_id": 8039762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l1jNj.jpg?s=128&g=1", "display_name": "cgsdfc", "link": "https://stackoverflow.com/users/8039762/cgsdfc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1595594685, "creation_date": 1544012145, "last_edit_date": 1595594685, "question_id": 53632131, "link": "https://stackoverflow.com/questions/53632131/compiler-how-to-check-a-user-function-returns-properly", "title": "Compiler: how to check a user function returns properly?", "body": "<p>I am writing a very simple compiler where users are allowed to define functions that return either <code>void</code>, <code>int</code> or <code>char</code>. However, users' function may be malformed. They may not return a value for a function that does not return <code>void</code>, or return a value for a function that returns <code>void</code> as declared. Currently my compiler is unable to detect this kind of errors and fails to generate proper code for function that returns <code>void</code> as this class of functions can return without a <code>return;</code> (they return implicitly). These two problems have cost me quite some time to phrase them out clearly. See the example code below:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>    // Problem A: detect implicit return.\n    void Foo(int Arg) {\n      if (Arg)\n        return;\n      else {\n        Arg = 1;\n        // Foo returns here! How can I know!\n      }\n    }\n\n    // Problem B: detect &quot;forgotten return&quot;.\n    int Bar(int Arg) {\n      if (Arg &gt; 1) {\n        return 1;\n      }\n      // this is an error: control flow reaches end at non-void function!\n      // How can I know!\n    }\n</code></pre>\n<p>I think the more general question may be: how can I tell the control flow reaches end at some point in a function? By saying <em>reach end</em> I mean the it reaches a point after which the function has no code to execute. If I can detect the end of control flow, I can look for a <code>return</code> at this point and either report an error if the function ought to return something or generate an explicit <code>return</code> for a <code>void</code> function. If I enumerate all such points of a function, I can ensure that the function is fully checked or complemented.</p>\n<p>I see this problem as a well-solved one in compiler engineering since modern C/C++ can do that pretty well. Is <code>LLVM</code> can offer any API to do this? Or is there simple algorithm to achieve this? Thanks very much.</p>\n<p><strong>Edit:</strong> I am currently using <code>LLVM</code> and have <code>BasicBlock</code> emitted already. I hope a guide in doing this in <code>LLVM</code> specifically.</p>\n<p><strong>Edit:</strong> In this question we assume that the return type declared in the function prototype <strong>always</strong> matches that of its <code>return</code> stmt. I primarily focus on the <strong>absence</strong> of a required <code>return</code>.</p>\n"}, {"tags": ["c++", "c++17"], "answers": [{"comments": [{"owner": {"reputation": 80, "user_id": 10729041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae020dc2b5c460a314269af0c0f0a5aa?s=128&d=identicon&r=PG&f=1", "display_name": "Fubert", "link": "https://stackoverflow.com/users/10729041/fubert"}, "reply_to_user": {"reputation": 3280, "user_id": 3493289, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/08927897947ad3bae66cf2d02f587ffc?s=128&d=identicon&r=PG&f=1", "display_name": "MS Srikkanth", "link": "https://stackoverflow.com/users/3493289/ms-srikkanth"}, "edited": false, "score": 0, "creation_date": 1544019240, "post_id": 53633840, "comment_id": 94127855, "body": "@Madhusudhan What does that look like?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 3280, "user_id": 3493289, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/08927897947ad3bae66cf2d02f587ffc?s=128&d=identicon&r=PG&f=1", "display_name": "MS Srikkanth", "link": "https://stackoverflow.com/users/3493289/ms-srikkanth"}, "edited": false, "score": 0, "creation_date": 1544020499, "post_id": 53633840, "comment_id": 94128741, "body": "@Madhusudhan Please show how you would expect this <code>static_assert</code> to look."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1544021123, "post_id": 53633840, "comment_id": 94129190, "body": "@geza: What does the triviality of the constructor have to do with it? He&#39;s using the default constructor you declared, which you marked <code>constexpr</code>. What part of that won&#39;t work?"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1544021229, "post_id": 53633840, "comment_id": 94129254, "body": "@NicolBolas: sorry, I meant destructor."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1544021246, "post_id": 53633840, "comment_id": 94129267, "body": "<code>Foo</code> has a non-trivial destructor, so this solution doesn&#39;t work unfortunately, because it will always fail, even if the type has a proper constexpr constructor."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 1, "creation_date": 1544021311, "post_id": 53633840, "comment_id": 94129313, "body": "@geza: If the type is not a literal type... what&#39;s the point of giving it a <code>constexpr</code> constructor? <code>constexpr</code> is <i>not</i> the same thing as &quot;do this at compile-time&quot;. You can only enforce compile-time execution if you use the object in a place that <i>requires</i> compile-time execution, like initializing a <code>constexpr</code> variable."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1544021531, "post_id": 53633840, "comment_id": 94129465, "body": "@NicolBolas: To make sure that a global variable gets statically initialized instead of dynamically. The standard guarantees this for (real) constexpr constructors, doesn&#39;t it (I&#39;m not 100% sure, but this should be true, as I interpret the standard)?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1544021625, "post_id": 53633840, "comment_id": 94129528, "body": "What is keeping you from making the global variable <code>constexpr</code>?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1544021670, "post_id": 53633840, "comment_id": 94129579, "body": "@geza: &quot;<i>The standard guarantees this for (real) constexpr constructors, doesn&#39;t it</i>&quot; No, it does not. It guarantees only that things which <i>have to be</i> executed at compile time will be executed at compile-time. A constructor that happens to be declared <code>constexpr</code> used to initialize a non-<code>constexpr</code> variables does not <i>have</i> to be executed at compile time in order for the code to work. Therefore, it&#39;s dealer&#39;s choice."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1544021687, "post_id": 53633840, "comment_id": 94129585, "body": "@MaxLanghof: The fact that the destructor is non-trivial, and therefore the type is not a literal type."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1544021808, "post_id": 53633840, "comment_id": 94129680, "body": "@NicolBolas: hmm. The doesn&#39;t the standard guarantee that the variable will be constant initialized, if it has a proper <code>constexpr</code> constructor? This would make my whole question invalid/unnecessary."}], "tags": [], "owner": {"reputation": 80, "user_id": 10729041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae020dc2b5c460a314269af0c0f0a5aa?s=128&d=identicon&r=PG&f=1", "display_name": "Fubert", "link": "https://stackoverflow.com/users/10729041/fubert"}, "is_accepted": false, "score": 1, "last_activity_date": 1544454251, "last_edit_date": 1544454251, "creation_date": 1544017706, "answer_id": 53633840, "question_id": 53632120, "link": "https://stackoverflow.com/questions/53632120/how-can-i-detect-that-a-constuctor-is-really-constexpr-so-i-can-utilize-static/53633840#53633840", "title": "How can I detect that a constuctor is really constexpr, so I can utilize static initialization?", "body": "<p>The only (current, toolchain-independent) way to prevent the compiler dropping the constexpr silently that I'm aware of, is to assign to a constexpr:   </p>\n\n<pre><code>struct NonConstexpr {\n    NonConstexpr() { }\n};\n\ntemplate &lt;typename T&gt;\nstruct Bar {\n    NonConstexpr nonConstexpr;\n\n    constexpr Bar() { }\n};\n\nstruct Foo {\n    Bar&lt;void&gt; bar;\n\n    constexpr Foo() { }\n};\n\nint main()\n{\n    constexpr auto f = Foo();\n    return 0;\n}\n</code></pre>\n\n<p>... will fail to compile with <code>constexpr constructor calls non-constexpr function \"Bar&lt;T&gt;::Bar() [with T=void]\"</code></p>\n"}, {"comments": [{"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1544032968, "post_id": 53638114, "comment_id": 94136050, "body": "Thanks very much, this is exactly what I need! It doesn&#39;t matter too much that only clang supports this, as one compiler is enough which checks this."}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 2, "last_activity_date": 1544032586, "creation_date": 1544032586, "answer_id": 53638114, "question_id": 53632120, "link": "https://stackoverflow.com/questions/53632120/how-can-i-detect-that-a-constuctor-is-really-constexpr-so-i-can-utilize-static/53638114#53638114", "title": "How can I detect that a constuctor is really constexpr, so I can utilize static initialization?", "body": "<p>If you are using Clang, use <code>[[clang::require_constant_initialization]]</code> on the variable. Otherwise, I don't know of a way. </p>\n\n<p>The committee is looking at standardizing this as a keyword.</p>\n"}], "owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 53638114, "answer_count": 2, "score": 1, "last_activity_date": 1544454251, "creation_date": 1544012116, "question_id": 53632120, "link": "https://stackoverflow.com/questions/53632120/how-can-i-detect-that-a-constuctor-is-really-constexpr-so-i-can-utilize-static", "title": "How can I detect that a constuctor is really constexpr, so I can utilize static initialization?", "body": "<p>Look at this code:</p>\n\n<pre><code>struct NonConstexpr {\n    NonConstexpr() { }\n};\n\ntemplate &lt;typename T&gt;\nstruct Bar {\n    NonConstexpr nonConstexpr;\n\n    constexpr Bar() { }\n};\n\nstruct Foo {\n    Bar&lt;void&gt; bar;\n\n    constexpr Foo() { }\n};\n</code></pre>\n\n<p>In this code, <code>Foo</code>'s constructor is tagged as <code>constexpr</code>, but it cannot appear in a constant expression, as it actually fails to satisfy the requirements of this. You can read the details of this in my <a href=\"https://stackoverflow.com/questions/53630837/is-this-a-bug-constexpr-constructor-silently-becomes-non-constexpr\">previous question</a>.</p>\n\n<p>My question is: can I detect somehow compile-time, that <code>Foo</code>'s constructor actually won't behave as <code>constexpr</code>?</p>\n\n<p>The reason I ask this, I'd like to detect that a global variable of <code>Foo</code> will be statically initialized or not (I'd like to put a <code>static_assert</code> on this, as my global <code>Foo</code> object must be initialized statically).</p>\n\n<p>Note, that the straightforward solution, to temporarily add <code>constexpr</code> to the variable doesn't work, as my <code>Foo</code> has a non-trivial destructor.</p>\n"}, {"tags": ["c++", "systemtime", "coledatetime"], "answers": [{"tags": [], "owner": {"reputation": 82, "user_id": 7896800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06e2fd47d94d628fdd4b34b0e312092?s=128&d=identicon&r=PG&f=1", "display_name": "Jack K", "link": "https://stackoverflow.com/users/7896800/jack-k"}, "is_accepted": true, "score": 2, "last_activity_date": 1544014032, "last_edit_date": 1544014032, "creation_date": 1544012729, "answer_id": 53632300, "question_id": 53631788, "link": "https://stackoverflow.com/questions/53631788/coledatetime-adding-an-hour-when-constructed-with-time-t/53632300#53632300", "title": "COleDateTime adding an hour when constructed with time_t", "body": "<p>Answered my own question: </p>\n\n<p><code>COleDateTime</code> <code>time_t</code> constructor uses <code>CTime</code> internally which, regardless of what the documentation for <code>COleDateTime</code> says, <em>does</em> take into account the environment variables for locale and timezone.</p>\n"}], "owner": {"reputation": 82, "user_id": 7896800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06e2fd47d94d628fdd4b34b0e312092?s=128&d=identicon&r=PG&f=1", "display_name": "Jack K", "link": "https://stackoverflow.com/users/7896800/jack-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 4, "accepted_answer_id": 53632300, "answer_count": 1, "score": 2, "last_activity_date": 1544014032, "creation_date": 1544011014, "question_id": 53631788, "link": "https://stackoverflow.com/questions/53631788/coledatetime-adding-an-hour-when-constructed-with-time-t", "title": "COleDateTime adding an hour when constructed with time_t", "body": "<p>I have a  <code>struct tm</code> object that is converted to UNIX time_t using <code>mktime</code>, that when passed into the constructor of <code>COleDateTime</code> seems to be adding an hour to account for daylight savings (UK time), even though the documentation for <code>COleDateTime</code> suggests that it ignores DST.</p>\n\n<p>If I create my time with <code>SYSTEMTIME</code> and pass that object to <code>COleDateTime</code> the problem disappears. Does anyone have any idea why this might be happening? This is from legacy code so changing everything to <code>SYSTEMTIME</code> may not be a solution.</p>\n\n<p>Here is my example code:</p>\n\n<pre><code>timeinfo.tm_year = 2018 - 1900;\ntimeinfo.tm_mon = 6 - 1;\ntimeinfo.tm_mday = 1;\ntimeinfo.tm_isdst = 0;\ntimeinfo.tm_hour = 10;\ntimeinfo.tm_min = 30;\ntimeinfo.tm_sec = 40;\n\nauto unix = mktime( &amp;timeinfo );\nprintf(\"UNIX time %lld\\n\", unix);\nCOleDateTime date(unix);\nprintf(\"COleDateTime: %f\\n\", date.m_dt);\nCString res = date.Format();\nprintf(\"Formatted: %ls\\n\", res.GetString());\n</code></pre>\n"}, {"tags": ["c++", "templates", "function-pointers", "type-erasure"], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 3, "last_activity_date": 1544012021, "last_edit_date": 1544012021, "creation_date": 1544011678, "answer_id": 53631974, "question_id": 53631688, "link": "https://stackoverflow.com/questions/53631688/type-erasure-with-function-pointers-does-not-work-with-gcc/53631974#53631974", "title": "Type erasure with function pointers does not work with GCC", "body": "<p>It's because you store a reference inside your object, but <code>&amp;A::PrintA</code> etc. are temporaries which are destroyed at the end of the full expression, and so the member reference is left dangling, and its use results in undefined behaviour.</p>\n\n<p>Simply store a copy of the member function pointer to fix it:</p>\n\n<pre><code>FUNC mFunc;\n</code></pre>\n\n<hr>\n\n<p>PS. When <code>mFuncs</code> is destroyed, the unique pointers delete child objects through a base pointer. The behaviour is undefined unless you declare <code>RunBase::~RunBase</code> virtual.</p>\n\n<hr>\n\n<blockquote>\n  <p>So, who is correct and who is wrong and why ?</p>\n</blockquote>\n\n<p>Your program is wrong; There is no correct behaviour for it.</p>\n"}], "owner": {"reputation": 329, "user_id": 3369759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/459838674b056fa08d42ace43cf35af3?s=128&d=identicon&r=PG&f=1", "display_name": "lightsunray", "link": "https://stackoverflow.com/users/3369759/lightsunray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 53631974, "answer_count": 1, "score": 2, "last_activity_date": 1544012021, "creation_date": 1544010722, "last_edit_date": 1544011044, "question_id": 53631688, "link": "https://stackoverflow.com/questions/53631688/type-erasure-with-function-pointers-does-not-work-with-gcc", "title": "Type erasure with function pointers does not work with GCC", "body": "<p>I am trying a sort of type-erasure with some function pointers and templates as given in the example below. What I find strange is with GCC i get wrong result where as with VS 2017, I get the expected one. So, who is correct and who is wrong and why ? </p>\n\n<p>Live example on COLIRU: <a href=\"http://coliru.stacked-crooked.com/a/225db5711c07c8b0\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/225db5711c07c8b0</a></p>\n\n<pre><code>struct A { void PrintA() { std::cout &lt;&lt; \"Event A\" &lt;&lt; std::endl; } };\nstruct B { void PrintB() { std::cout &lt;&lt; \"Event B\" &lt;&lt; std::endl; } };\nstruct C { void PrintC() { std::cout &lt;&lt; \"Event C\" &lt;&lt; std::endl; } };\n\nstruct RunBase\n{\n    virtual void operator()() = 0;\n};\n\n\ntemplate &lt;typename T&gt;\nstruct Run : public RunBase\n{\n    using FUNC = void (T::*)();\n    Run(T&amp; o, FUNC&amp;&amp; f) : mObj(o), mFunc(f) {}\n    void operator()() override { (mObj.*mFunc)(); }\n\n    T&amp; mObj;\n    FUNC&amp; mFunc;\n};\n\nint main()\n{\n    A a; \n    B b; \n    C c; \n\n    std::vector&lt;std::unique_ptr&lt;RunBase&gt; &gt; mFuncs;\n    mFuncs.push_back(std::make_unique&lt;Run&lt;A&gt; &gt;(a, &amp;A::PrintA));\n    mFuncs.push_back(std::make_unique&lt;Run&lt;B&gt; &gt;(b, &amp;B::PrintB));\n    mFuncs.push_back(std::make_unique&lt;Run&lt;C&gt; &gt;(c, &amp;C::PrintC));\n\n    for (auto&amp; i : mFuncs)\n        (*i)();\n\n  return 0;\n}\n</code></pre>\n\n<p>Expected result:</p>\n\n<pre><code>Event A\nEvent B\nEvent C\n</code></pre>\n\n<p>But GCC gives me:</p>\n\n<pre><code>Event C\nEvent C\nEvent C\n</code></pre>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 5, "creation_date": 1544010726, "post_id": 53631655, "comment_id": 94122768, "body": "You <code>delete</code> what you <code>new</code> - there is no <code>new</code> so you cannot use <code>delete</code>"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 7, "creation_date": 1544010726, "post_id": 53631655, "comment_id": 94122769, "body": "Use <code>std::string</code>."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 3, "creation_date": 1544010913, "post_id": 53631655, "comment_id": 94122894, "body": "Also don&#39;t ever cast away <code>const</code> - 99% of the time it&#39;s plain wrong (including here)"}], "answers": [{"tags": [], "owner": {"reputation": 62, "user_id": 9563591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13716b953407eb28aee39301cd965479?s=128&d=identicon&r=PG&f=1", "display_name": "Hamza", "link": "https://stackoverflow.com/users/9563591/hamza"}, "is_accepted": false, "score": 0, "last_activity_date": 1544011104, "creation_date": 1544011104, "answer_id": 53631814, "question_id": 53631655, "link": "https://stackoverflow.com/questions/53631655/c-text-argument-to-constructor/53631814#53631814", "title": "C++ text argument to constructor", "body": "<p>first you have to allocate space for a pointer to char using new .\nAnd in the destructor deallocate that space \" delete [] cont \" instead of \"delete cont\" . \nbut it will be a good choice to use std::string instead of char []</p>\n"}, {"tags": [], "owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "is_accepted": false, "score": 1, "last_activity_date": 1544011492, "creation_date": 1544011492, "answer_id": 53631918, "question_id": 53631655, "link": "https://stackoverflow.com/questions/53631655/c-text-argument-to-constructor/53631918#53631918", "title": "C++ text argument to constructor", "body": "<pre><code>this-&gt;cont = cont;\n</code></pre>\n\n<p>Is \"wrong\", as in, it doesn't actually copy the data; that's also why <code>delete</code> in your destructor if failing. Your answer mentions \"I have to have dynamic allocate.\", so I presume that's what you actually wanted. In this case, simply use <code>std::string</code>:</p>\n\n<pre><code>class Matrix {\nprivate:\n    int x;\n    std::string cont;           // &lt;--- changed type\npublic:\n    Matrix(){\n        cout &lt;&lt; \"aa\";\n    }\n    Matrix(const char *cont)\n    : cont(cont) {              // &lt;--- this actually copies\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 7327706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe1b3b5b266b65f36b4e7e78186eb3b5?s=128&d=identicon&r=PG&f=1", "display_name": "Arczi", "link": "https://stackoverflow.com/users/7327706/arczi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1544011492, "creation_date": 1544010622, "question_id": 53631655, "link": "https://stackoverflow.com/questions/53631655/c-text-argument-to-constructor", "title": "C++ text argument to constructor", "body": "<blockquote>\n  <p>cont = cont;</p>\n</blockquote>\n\n<p>I don't know how to convert  cont to cont type pointer.</p>\n\n<p>If I do like this : this->cont = (char*)cont;</p>\n\n<p>In deconstructor I have exception error.</p>\n\n<p>So is it good to convert const char to char* or I need to do better (but how?) ?</p>\n\n<p>And I have to have dynamic allocate.</p>\n\n<pre><code>#include \"pch.h\"\n#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n\nusing namespace std;\nclass Matrix {\nprivate:\n    int x;\n    char *cont;\npublic:\n    Matrix(){\n        cout &lt;&lt; \"aa\";\n    }\n    Matrix(const char *cont) {\n        this-&gt;cont = cont;\n    }\n    ~Matrix() {\n        delete cont;\n    }\n\n\n};\n\nint main()\n{\n    Matrix(\"__TEXT__\");\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "ssl", "embedded-linux"], "comments": [{"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1544010526, "post_id": 53631552, "comment_id": 94122654, "body": "From the docs, it looks like the <code>encrypted</code> signal hands you a <code>QNetworkReply</code>, which contains a <a href=\"http://doc.qt.io/qt-5/qnetworkreply.html#sslConfiguration\" rel=\"nofollow noreferrer\"><code>sslConfiguration</code></a>. I&#39;d guess this <a href=\"http://doc.qt.io/qt-5/qsslconfiguration.html\" rel=\"nofollow noreferrer\"><code>QSslConfiguration</code></a> should contain some information about certificates."}, {"owner": {"reputation": 1544, "user_id": 6475652, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/8d783a89da27c7d36c0935fc2af7b38e?s=128&d=identicon&r=PG&f=1", "display_name": "Fryz", "link": "https://stackoverflow.com/users/6475652/fryz"}, "reply_to_user": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1544017423, "post_id": 53631552, "comment_id": 94126790, "body": "<code>QNetworkReply</code> gives me the same list as above"}, {"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 1, "creation_date": 1544017629, "post_id": 53631552, "comment_id": 94126892, "body": "did you use <a href=\"http://doc.qt.io/qt-5/qsslconfiguration.html#peerCertificate\" rel=\"nofollow noreferrer\"><code>peerCertificate()</code></a>?"}, {"owner": {"reputation": 1544, "user_id": 6475652, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/8d783a89da27c7d36c0935fc2af7b38e?s=128&d=identicon&r=PG&f=1", "display_name": "Fryz", "link": "https://stackoverflow.com/users/6475652/fryz"}, "reply_to_user": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1544020740, "post_id": 53631552, "comment_id": 94128910, "body": "No i have used <code>caCertificates()</code>. So as you suggested, i have used <code>peerCertificate()</code> and also  <code>peerCertificateChain()</code> from the <code>QNetworkReply</code> and indeed i can see the list of <code>QSslCertificate</code> of the peer. From there, how can i retrieve the corresponding <code>.crt</code> or <code>.pem</code> files ?"}, {"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1544021525, "post_id": 53631552, "comment_id": 94129460, "body": "in the <a href=\"https://code.woboq.org/qt5/qtbase/src/network/ssl/qsslcertificate.cpp.html#_ZN15QSslCertificate8fromPathERK7QStringN4QSsl14EncodingFormatEN7QRegExp13PatternSyntaxE\" rel=\"nofollow noreferrer\">source</a>, it doesn&#39;t look like the path gets stored anywhere"}], "owner": {"reputation": 1544, "user_id": 6475652, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/8d783a89da27c7d36c0935fc2af7b38e?s=128&d=identicon&r=PG&f=1", "display_name": "Fryz", "link": "https://stackoverflow.com/users/6475652/fryz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 209, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1544020982, "creation_date": 1544010283, "last_edit_date": 1544020982, "question_id": 53631552, "link": "https://stackoverflow.com/questions/53631552/how-to-know-which-certificates-qnetworkaccessmanager-uses-during-an-ssl-tls-ha", "title": "How to know which certificate(s) QNetworkAccessManager uses during an SSL/TLS handshake?", "body": "<p>I am using the class <code>QNetworkAccessManager</code> to establish an HTTPS connexion with a remote server. The connexion works well but i will need to update the certificates eventually.</p>\n\n<p>I don't know much about SSL and i would like to clarify one point.</p>\n\n<p>According to <a href=\"http://doc.qt.io/qt-5/qnetworkaccessmanager.html#encrypted\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/qnetworkaccessmanager.html#encrypted</a>, the initial SSL handshake seems to works fine because the following slot connected to the <code>QNetworkAccessManager</code> signal <code>encrypted(QNetworkReply*)</code> is called :</p>\n\n<pre><code>void MyAccessManager::onEncrypted(QNetworkReply *rep)\n{\n    Q_UNUSED(rep)\n    qDebug() &lt;&lt; \"SSL/TLS handshake success\";\n}\n</code></pre>\n\n<p>This is an embedded Linux on which several <code>.crt</code> files are already installed in <code>/usr/share/ca-certificates/mozilla/</code> and a list of <code>.pem</code> files in <code>/etc/ssl/certs/</code></p>\n\n<p>My understanding is that Qt is able to locate those files automatically because when i get the <code>QSslConfiguration</code> from the <code>QNetworkRequest</code> i can see the list of <code>QSslCertificate</code> in use, for example with :</p>\n\n<pre><code>QSslConfiguration conf = myNetworkRequest.sslConfiguration();\n\nfor (int i = 0; i &lt; conf.caCertificates().size(); i++)\n    qDebug() &lt;&lt; conf.caCertificates().at(i).subjectInfo(QSslCertificate::Organization);\n</code></pre>\n\n<p>and the output i have is :</p>\n\n<pre><code>QDEBUG : (\"DigiCert Inc\")\nQDEBUG : (\"VeriSign, Inc.\")\nQDEBUG : (\"GlobalSign\")\n...\n</code></pre>\n\n<p>My question is how is it possible to see which of these certificates and files, were effectively used by <code>QSslSocket</code> for this specific connexion ?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "c++17"], "answers": [{"tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 4, "last_activity_date": 1544021761, "creation_date": 1544021761, "answer_id": 53635041, "question_id": 53631146, "link": "https://stackoverflow.com/questions/53631146/can-i-declare-a-type-nodiscard-with-using/53635041#53635041", "title": "Can I declare a type [[nodiscard]] with &#39;using&#39;?", "body": "<p><code>[[nodiscard]]</code> cannot be applied to aliases. <a href=\"https://timsong-cpp.github.io/cppwp/n4659/dcl.attr.nodiscard\" rel=\"nofollow noreferrer\">Only to:</a></p>\n\n<blockquote>\n  <p>The attribute-token nodiscard may be applied to the declarator-id in a <strong>function declaration</strong> or to the declaration of a <strong>class or enumeration</strong>.</p>\n</blockquote>\n\n<p>Emphasis added.</p>\n"}], "owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 53635041, "answer_count": 1, "score": 2, "last_activity_date": 1544086265, "creation_date": 1544008889, "last_edit_date": 1544086265, "question_id": 53631146, "link": "https://stackoverflow.com/questions/53631146/can-i-declare-a-type-nodiscard-with-using", "title": "Can I declare a type [[nodiscard]] with &#39;using&#39;?", "body": "<p>You can declare a class with the <code>[[nodiscard]]</code> attribute. It may be useful when you know from the semantics of this class that whenever it's returned from a function, it must be used for something. I have exactly this case, and it would be very convenient to tag the class with <code>[[nodiscard]]</code> instead of each individual function that returns it. However, there's one complication. This is the type that I need to make <code>[[nodiscard]]</code>:</p>\n\n<pre><code>using ConnectionStruct = std::pair&lt;std::shared_ptr&lt;CMutex&gt;, std::shared_ptr&lt;SignalFunction&gt;&gt;;\n</code></pre>\n\n<p>Is there a syntax to mark my <code>ConnectionStruct</code> as <code>[[nodiscard]]</code>?</p>\n"}, {"tags": ["c#", "c++", "com", "marshalling", "safearray"], "comments": [{"owner": {"reputation": 30926, "user_id": 767890, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/e169a8a6d170a77b83dd8244df5f6890?s=128&d=identicon&r=PG", "display_name": "InBetween", "link": "https://stackoverflow.com/users/767890/inbetween"}, "edited": false, "score": 0, "creation_date": 1544009607, "post_id": 53631069, "comment_id": 94122072, "body": "I think you can always import a <i>SafeArray</i> as a C-style array."}, {"owner": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 1, "creation_date": 1544010022, "post_id": 53631069, "comment_id": 94122352, "body": "It&#39;s marked as obsolete only if you compile on .NET Core. SafeArray only has a meaning on Windows so I guess it won&#39;t be obsolete for NET Framework before long (in fact, I&#39;m wondering why it&#39;s not obsolete on .NET Standard either...)"}], "owner": {"reputation": 90, "user_id": 924774, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/1EWD1.jpg?s=128&g=1", "display_name": "Zatkhahi", "link": "https://stackoverflow.com/users/924774/zatkhahi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 210, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544008673, "creation_date": 1544008673, "question_id": 53631069, "link": "https://stackoverflow.com/questions/53631069/why-unmanagedtype-safearray-is-obsolete", "title": "Why UnmanagedType.SafeArray is obsolete?", "body": "<p>I am using <strong>UnmanagedType.SafeArray</strong> in my code, for linking a C++ project to C#. but compiler report a warning:\nwarning CS0618: 'UnmanagedType.SafeArray' is obsolete: 'Marshalling as SafeArray may be unavailable in future releases.'</p>\n\n<p>What does it mean, does this type will be removed from marshaling in future or there is another equivalent for that?</p>\n"}, {"tags": ["c++", "c++11", "templates", "polymorphism", "operator-overloading"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1544008720, "post_id": 53631044, "comment_id": 94121522, "body": "where is the slicing in 2? Afaik, references dont slice only values do"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1544008771, "post_id": 53631044, "comment_id": 94121553, "body": "you want to have a single implementation for any <code>Derived</code>?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1544008971, "post_id": 53631044, "comment_id": 94121684, "body": "&quot;//will not compile, since obj is not a Class object anymore.&quot; of course the object is still of type <code>Class</code>, the only reason is see this wont compile is that the <code>operator&lt;&lt;</code> takes a <code>obj</code> as a const reference while <code>Base&lt;Class&gt;::f(obj);</code> expects a non-const. If you fix that I dont see the problem"}, {"owner": {"reputation": 316, "user_id": 5014179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40da5af8c5586b883ae742ed9af2732f?s=128&d=identicon&r=PG&f=1", "display_name": "Pellekrino", "link": "https://stackoverflow.com/users/5014179/pellekrino"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1544009014, "post_id": 53631044, "comment_id": 94121710, "body": "Sorry someone edited &quot;inherit from a Base class via CRTP&quot; while i was editting myself, so i overwrote it. I replaced his comment since. Interesting I didn&#39;t know this was a named pattern, i will search on this keyword then ;)"}, {"owner": {"reputation": 316, "user_id": 5014179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40da5af8c5586b883ae742ed9af2732f?s=128&d=identicon&r=PG&f=1", "display_name": "Pellekrino", "link": "https://stackoverflow.com/users/5014179/pellekrino"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1544009107, "post_id": 53631044, "comment_id": 94121761, "body": "sorry the const dropped when i wrote the code on so, let me fix."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1544009243, "post_id": 53631044, "comment_id": 94121853, "body": "now i dont see why 2 does not compile. You should provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and the error messages you get....or wait for someone more clever to see what I am missing, though I am pretty sure 2 is just fine"}, {"owner": {"reputation": 316, "user_id": 5014179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40da5af8c5586b883ae742ed9af2732f?s=128&d=identicon&r=PG&f=1", "display_name": "Pellekrino", "link": "https://stackoverflow.com/users/5014179/pellekrino"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1544009398, "post_id": 53631044, "comment_id": 94121949, "body": "no known conversion for argument 1 from \u2018const Base&lt;Derived&gt;\u2019 to \u2018const Derived&amp;\u2019"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1544009464, "post_id": 53631044, "comment_id": 94121996, "body": "the error message alone doesnt help, we need to see the code that causes the error. What you show is only the templates not how you use them"}, {"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 2, "creation_date": 1544009795, "post_id": 53631044, "comment_id": 94122190, "body": "What is <code>f</code> supposed to return? <a href=\"http://coliru.stacked-crooked.com/a/6ca18bb8f2416bba\" rel=\"nofollow noreferrer\">Here&#39;s a proper implementation of that operator that resolves <code>f</code> properly</a>, but it doesn&#39;t fix <code>f</code> being kinda ambiguous itself."}, {"owner": {"reputation": 316, "user_id": 5014179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40da5af8c5586b883ae742ed9af2732f?s=128&d=identicon&r=PG&f=1", "display_name": "Pellekrino", "link": "https://stackoverflow.com/users/5014179/pellekrino"}, "edited": false, "score": 0, "creation_date": 1544016250, "post_id": 53631044, "comment_id": 94126056, "body": "Yes f is actually more than 1 function which provides iterators to a map of other template classes. I prefered to simplify to keep it minimal. Your proposition looks quite promising, i had thought about using enable_if but was not sure about the syntax. I had to adapt it to C++11 since my cross compiler is not supporting beyond"}, {"owner": {"reputation": 316, "user_id": 5014179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40da5af8c5586b883ae742ed9af2732f?s=128&d=identicon&r=PG&f=1", "display_name": "Pellekrino", "link": "https://stackoverflow.com/users/5014179/pellekrino"}, "edited": false, "score": 0, "creation_date": 1544016256, "post_id": 53631044, "comment_id": 94126061, "body": "With a more concrete f function : <a href=\"http://coliru.stacked-crooked.com/a/318952e05bbb23a2\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/318952e05bbb23a2</a>"}, {"owner": {"reputation": 316, "user_id": 5014179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40da5af8c5586b883ae742ed9af2732f?s=128&d=identicon&r=PG&f=1", "display_name": "Pellekrino", "link": "https://stackoverflow.com/users/5014179/pellekrino"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1544016550, "post_id": 53631044, "comment_id": 94126260, "body": "and to answer to @user463035818 : <a href=\"http://coliru.stacked-crooked.com/a/735fb03af15a9b5f\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/735fb03af15a9b5f</a> this won&#39;t work."}, {"owner": {"reputation": 316, "user_id": 5014179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40da5af8c5586b883ae742ed9af2732f?s=128&d=identicon&r=PG&f=1", "display_name": "Pellekrino", "link": "https://stackoverflow.com/users/5014179/pellekrino"}, "reply_to_user": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1544017155, "post_id": 53631044, "comment_id": 94126626, "body": "@BartekBanachewicz : Could you post your answer so I could accept it. I would be also interested for a brief explanation or a link why compilers manage to solve the ambiguous overload, thanks to the enable_if ?"}, {"owner": {"reputation": 316, "user_id": 5014179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40da5af8c5586b883ae742ed9af2732f?s=128&d=identicon&r=PG&f=1", "display_name": "Pellekrino", "link": "https://stackoverflow.com/users/5014179/pellekrino"}, "edited": false, "score": 0, "creation_date": 1544088488, "post_id": 53631044, "comment_id": 94154821, "body": "Added links to coliru viewer with code and compile error. The ones i shared within the comments"}], "answers": [{"comments": [{"owner": {"reputation": 316, "user_id": 5014179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40da5af8c5586b883ae742ed9af2732f?s=128&d=identicon&r=PG&f=1", "display_name": "Pellekrino", "link": "https://stackoverflow.com/users/5014179/pellekrino"}, "edited": false, "score": 0, "creation_date": 1544017883, "post_id": 53633758, "comment_id": 94127043, "body": "1) ok and 3) was a typo in the question. For point 2) i understand that the compiler will solve template first with the ones with &#39;enable_if&#39; (SFINAE) ? Correct ?"}, {"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "reply_to_user": {"reputation": 316, "user_id": 5014179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40da5af8c5586b883ae742ed9af2732f?s=128&d=identicon&r=PG&f=1", "display_name": "Pellekrino", "link": "https://stackoverflow.com/users/5014179/pellekrino"}, "edited": false, "score": 0, "creation_date": 1544017976, "post_id": 53633758, "comment_id": 94127096, "body": "@Pellekrino Yes, this is SFINAE; the way this works is simply that for types other than the ones derived from Base, it will produce a type that will break that template, removing it from potential candidate set. You can read about <code>enable_if</code> specifically elsewhere, there&#39;s tons of materials on the web."}, {"owner": {"reputation": 316, "user_id": 5014179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40da5af8c5586b883ae742ed9af2732f?s=128&d=identicon&r=PG&f=1", "display_name": "Pellekrino", "link": "https://stackoverflow.com/users/5014179/pellekrino"}, "edited": false, "score": 0, "creation_date": 1544018371, "post_id": 53633758, "comment_id": 94127322, "body": "understood that it will break compilation for other types. my question is rather about the fact there was already the template prototype &quot;template &lt;typename Class&gt;std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Class&amp; obj);&quot; available. So now we have provided this prototype : template &lt;typename Class, typename = Void&gt; std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Class&amp; obj);"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1544025151, "post_id": 53633758, "comment_id": 94131785, "body": "Better to use <code>std::enable_if_t&lt;cond, int&gt; = 0</code> than <code>typename = std::enable_if_t&lt;cond&gt;</code>. that would allow other overloads."}, {"owner": {"reputation": 316, "user_id": 5014179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40da5af8c5586b883ae742ed9af2732f?s=128&d=identicon&r=PG&f=1", "display_name": "Pellekrino", "link": "https://stackoverflow.com/users/5014179/pellekrino"}, "edited": false, "score": 0, "creation_date": 1544087643, "post_id": 53633758, "comment_id": 94154357, "body": "enable_if_t is a helper only available with C++14."}], "tags": [], "owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "is_accepted": true, "score": 2, "last_activity_date": 1544017443, "creation_date": 1544017443, "answer_id": 53633758, "question_id": 53631044, "link": "https://stackoverflow.com/questions/53631044/overload-operator-for-a-derived-class-of-a-template-class/53633758#53633758", "title": "Overload Operator&lt;&lt; for a derived class of a template class", "body": "<p>The proper solution is a mix of code in your attempts 1 and 2.</p>\n\n<pre><code>template &lt;\n    typename Class,\n    typename = typename std::enable_if&lt; std::is_base_of&lt;Base&lt;Class&gt;, Class&gt;::value &gt;::type\n&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Class&amp; obj)\n{\n    os &lt;&lt; obj.name &lt;&lt; \"[ \";\n    os &lt;&lt; Base&lt;Class&gt;::f(obj);\n    os &lt;&lt; \" ]\";\n\n    return os;\n}\n</code></pre>\n\n<ul>\n<li>You need to take <code>Class&amp;</code> and not <code>Base&lt;Class&gt;&amp;</code>, because you (might)want to operate on the members of <code>Class</code>.</li>\n<li>However, <code>enable_if</code> is used so that the operator only works for types that are derived from <code>Base</code>; this prevents it creeping into other overloads (in general, overloads and templates mix poorly), as such a template overload could potentially match anything.</li>\n<li>We also explicitly need to pass the <code>Class</code> to the <code>Base</code> to get the proper <code>f</code>.</li>\n</ul>\n\n<hr>\n\n<p>Also, a small note; with a modern compiler, you can spell it a bit more nicely:</p>\n\n<pre><code>typename = std::enable_if_t&lt;std::is_base_of_v&lt;Base&lt;Class&gt;, Class&gt;&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 316, "user_id": 5014179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40da5af8c5586b883ae742ed9af2732f?s=128&d=identicon&r=PG&f=1", "display_name": "Pellekrino", "link": "https://stackoverflow.com/users/5014179/pellekrino"}, "edited": false, "score": 0, "creation_date": 1544087896, "post_id": 53638059, "comment_id": 94154482, "body": "Thanks! So the static_cast was also a good way to go. I was reading about static polymorp\u0125ism just now ;)"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 1, "last_activity_date": 1544094180, "last_edit_date": 1544094180, "creation_date": 1544032335, "answer_id": 53638059, "question_id": 53631044, "link": "https://stackoverflow.com/questions/53631044/overload-operator-for-a-derived-class-of-a-template-class/53638059#53638059", "title": "Overload Operator&lt;&lt; for a derived class of a template class", "body": "<p><a href=\"https://en.wikipedia.org/wiki/Curiously_recurring_template_pattern\" rel=\"nofollow noreferrer\">CRTP</a> generally uses <code>static_cast</code>:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Base\n{\nprotected:\n    explicit Base(std::string name) : name(std::move(name)){}\n\n    const T&amp; asDerived() const { return static_cast&lt;const T&amp;&gt;(*this); }\n    T&amp; asDerived() { return static_cast&lt;T&amp;&gt;(*this); }\n\npublic:\n    const std::string name;\n\n    static int f(const Base&lt;T&gt;&amp; instance){\n        return instance.asDerived().a;\n    }\n};\n</code></pre>\n\n<p>And so</p>\n\n<pre><code>template &lt;typename T&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Base&lt;T&gt;&amp; obj)\n{\n    os &lt;&lt; obj.name &lt;&lt; \"[ \";\n    os &lt;&lt; Base&lt;T&gt;::f(obj);\n    os &lt;&lt; \"]\";\n\n    return os;\n}\n</code></pre>\n\n<p>Note that <code>Base::f</code> would no longer need to be <code>static</code>:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Base\n{\n    // ...\n    int f() const { return asDerived().a; }\n    // ...\n};\ntemplate &lt;typename T&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Base&lt;T&gt;&amp; obj)\n{\n    return os &lt;&lt; obj.name &lt;&lt; \"[ \" &lt;&lt; obj.f() &lt;&lt; \"]\";\n}\n</code></pre>\n"}], "owner": {"reputation": 316, "user_id": 5014179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40da5af8c5586b883ae742ed9af2732f?s=128&d=identicon&r=PG&f=1", "display_name": "Pellekrino", "link": "https://stackoverflow.com/users/5014179/pellekrino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "closed_date": 1544032567, "accepted_answer_id": 53633758, "answer_count": 2, "score": -3, "last_activity_date": 1544094180, "creation_date": 1544008564, "last_edit_date": 1544088256, "question_id": 53631044, "link": "https://stackoverflow.com/questions/53631044/overload-operator-for-a-derived-class-of-a-template-class", "closed_reason": "Not suitable for this site", "title": "Overload Operator&lt;&lt; for a derived class of a template class", "body": "<p><strong><em>Some bits of context :</strong> I am writing a serialization library, and want to keep to a minimum the needed changes for the objects I want to serialize. I found some great examples, such as <a href=\"https://github.com/eliasdaler/MetaStuff\" rel=\"nofollow noreferrer\">MetaStuff</a>, but would like to implement it myself for template practice and customization.</em></p>\n\n<p><strong>My problem :</strong> </p>\n\n<p>I want to overload operator&lt;&lt; for my derived classes.\nThe derived classes inherit from a Base class which is a specialized template to themselves (via CRTP).\nSo far, member variable I want to output are public, so let's leave aside the need to declare friend the operator. </p>\n\n<pre><code>template&lt;typename Class&gt;\nClass Base {\n\nprotected:\n    Base(std::string name) : name(name){}\n\npublic:\n    const std::string name;\n\n    static int f(const Class&amp; instance){\n        return instance.a;\n    }\n};\n</code></pre>\n\n<p>(i simplified a lot to keep only essential elements)</p>\n\n<pre><code>struct Derived : public Base&lt;Derived&gt;{\n\n    Derived():Base&lt;Derived&gt;(\"Derived\"){}\n\n    int a;\n\n    static bool registerClass(){ return true; //called by Base&lt;Derived&gt; }\n};\n</code></pre>\n\n<p>I am running into 3 conflicting issues (depending on the solution i give a try) : </p>\n\n<p><strong>Issue 1: ambiguous template resolution</strong></p>\n\n<pre><code>template &lt;typename Class&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Class&amp; obj)\n{\n    os &lt;&lt; obj.name &lt;&lt; \"[ \";\n    os &lt;&lt; Base&lt;Class&gt;::f(obj);\n    os &lt;&lt; \"]\";\n\n    return os;\n};\n</code></pre>\n\n<p>Here I run into the ambiguous overload issue. The template function has exact same prototype as the generic one.\n<a href=\"http://coliru.stacked-crooked.com/a/08b3ba0b0dad3534\" rel=\"nofollow noreferrer\">Code &amp; Compile error</a></p>\n\n<p><strong>Issue 2 : Type Slicing</strong></p>\n\n<pre><code>template &lt;typename Class&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Base&lt;Class&gt;&amp; obj)\n{\n    os &lt;&lt; obj.name &lt;&lt; \"[ \";\n    os &lt;&lt; Base&lt;Class&gt;::f(obj); \n    //will not compile, since obj is not a Class object anymore.\n    os &lt;&lt; \"]\";\n\n    return os;\n};\n</code></pre>\n\n<p>As stated in the comment, object is sliced when passed to the function and I can't pass it then as argument to the static Base function f.\n<a href=\"http://coliru.stacked-crooked.com/a/735fb03af15a9b5f\" rel=\"nofollow noreferrer\">Code &amp; Compile error</a></p>\n\n<p><strong>Issue 3 : Function Template Specialization is incorrect</strong></p>\n\n<p>Partial specialization of template function is not possible, and overall function template specialization is to be avoided : compiler will always prefer Base template. (see this nice <a href=\"http://www.gotw.ca/publications/mill17.htm\" rel=\"nofollow noreferrer\">article</a>)</p>\n\n<p><strong>What is left ?</strong></p>\n\n<p>I am thinking about using solution 2 with static_cast but feel it would be ugly ? I gave a try to a few other solution, which were not worth mentioning. </p>\n\n<p>Has anyone more clues ?</p>\n\n<p>(Since i want modifications to Derived classes to be minimal, i don't want to add a virtual function or so on)</p>\n"}, {"tags": ["c++", "r", "static-libraries", "rcpp", ".a"], "comments": [{"owner": {"reputation": 24192, "user_id": 8416610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cmim3CrZ9Wo/AAAAAAAAAAI/AAAAAAAAAjs/hnKTOHALc6M/photo.jpg?sz=128", "display_name": "Ralf Stubner", "link": "https://stackoverflow.com/users/8416610/ralf-stubner"}, "edited": false, "score": 0, "creation_date": 1544014776, "post_id": 53631025, "comment_id": 94125178, "body": "What should a user of <code>libdai</code> be able to do? Use some R functions that are backed by C++ code from libDAI? Write new C++ code that uses libDAI?"}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1544016165, "post_id": 53631025, "comment_id": 94126011, "body": "In very short, this is a <i>hard</i> and open question.  When @coatless and I are both retired we will come back to this and write the paper about the (maybe five) different ways this can be tackled.  In short: it&#39;s not east, especially with an external library.  But a few CRAN packages do it: bundle the source, build a static library (which is an architecture-and-OS-dependent task) and then use it."}, {"owner": {"reputation": 90, "user_id": 7822504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11bfdce5f3a2d481a14fa469f61c10e?s=128&d=identicon&r=PG&f=1", "display_name": "happ", "link": "https://stackoverflow.com/users/7822504/happ"}, "reply_to_user": {"reputation": 24192, "user_id": 8416610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cmim3CrZ9Wo/AAAAAAAAAAI/AAAAAAAAAjs/hnKTOHALc6M/photo.jpg?sz=128", "display_name": "Ralf Stubner", "link": "https://stackoverflow.com/users/8416610/ralf-stubner"}, "edited": false, "score": 0, "creation_date": 1544016382, "post_id": 53631025, "comment_id": 94126137, "body": "@RalfStubner I want to write C++ functions that use the inference and em algorithms provided by the C++ libDAI library. The end user will only use my R functions."}, {"owner": {"reputation": 90, "user_id": 7822504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11bfdce5f3a2d481a14fa469f61c10e?s=128&d=identicon&r=PG&f=1", "display_name": "happ", "link": "https://stackoverflow.com/users/7822504/happ"}, "reply_to_user": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1544016789, "post_id": 53631025, "comment_id": 94126402, "body": "@DirkEddelbuettel thank you for your answer. However I should be able to somehow make use of libDAI? So it is not possible to pre-compile it, does this mean a user must set up gmb and boost and directly compile libDAI while compiling the R-package?"}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 2, "creation_date": 1544016969, "post_id": 53631025, "comment_id": 94126507, "body": "Assume eg CRAN has nothing (it may have libgmp though). You can get Boost <i>headers</i> from BH.  If you need Boost linking it is much harder.  Forgetting these two, you will have to shop libDAI sources <i>and create build instructions</i> for the three architectures so that your package can use it.  As I said: <i>hard</i>."}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 2, "creation_date": 1544017039, "post_id": 53631025, "comment_id": 94126548, "body": "So as a first proxy, maybe delegate out to the libDAI website, assume someone has it built (on Linux or macOS, say) and write a simpler &#39;RcppDAI&#39; package interfacing that.  You can share that via GitHub etc while you work out if/how to include libDAI."}], "answers": [{"comments": [{"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 1, "creation_date": 1544041090, "post_id": 53638867, "comment_id": 94139612, "body": "Pretty good answer. I would stress that &#39;Pre-building static libraries&#39; is mostly about macOS and Windows. Some packages actually build their own static libraries:  both <code>nloptr</code> and <code>RcppRedis</code> either use an installed library <i>or</i> build from source on demand if needed (respectively: <code>libnlopt</code> and <code>libhiredis</code>).  A few other packages just build the static library on demand.  That is probably the only route to take as <code>libDAI</code> is a wee bit obscure."}, {"owner": {"reputation": 90, "user_id": 7822504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11bfdce5f3a2d481a14fa469f61c10e?s=128&d=identicon&r=PG&f=1", "display_name": "happ", "link": "https://stackoverflow.com/users/7822504/happ"}, "edited": false, "score": 0, "creation_date": 1544624088, "post_id": 53638867, "comment_id": 94342235, "body": "Thank you very much for your detailed answer it helped me a lot. I have a question related to your suggestion for the library dependencies. Does this mean, that the user should be able to compile my package without the need to compile <code>gmp</code> and <code>boost</code> on his system (Windows and Linux)?"}, {"owner": {"reputation": 24192, "user_id": 8416610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cmim3CrZ9Wo/AAAAAAAAAAI/AAAAAAAAAjs/hnKTOHALc6M/photo.jpg?sz=128", "display_name": "Ralf Stubner", "link": "https://stackoverflow.com/users/8416610/ralf-stubner"}, "reply_to_user": {"reputation": 90, "user_id": 7822504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11bfdce5f3a2d481a14fa469f61c10e?s=128&d=identicon&r=PG&f=1", "display_name": "happ", "link": "https://stackoverflow.com/users/7822504/happ"}, "edited": false, "score": 0, "creation_date": 1544629781, "post_id": 53638867, "comment_id": 94345744, "body": "@J.Kr For compilation the <code>gmp</code> library and header files will be necessary. Since these are available on CTAN, though, Windows and Mac Users will be able to get <i>pre-build</i> packages from there. For <code>boost</code> I expect that the headers provided by <code>BH</code> are sufficient for compiling the package."}, {"owner": {"reputation": 90, "user_id": 7822504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11bfdce5f3a2d481a14fa469f61c10e?s=128&d=identicon&r=PG&f=1", "display_name": "happ", "link": "https://stackoverflow.com/users/7822504/happ"}, "edited": false, "score": 0, "creation_date": 1547128227, "post_id": 53638867, "comment_id": 95091339, "body": "@RalfStubner Thanks a lot for your help, I got the compilation running on Linux. However, the library requires gmpxx, It seems like this is not part of gmp. Additionally, I had a few other issues. I added an <i>Edit</i> to my initial question."}, {"owner": {"reputation": 24192, "user_id": 8416610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cmim3CrZ9Wo/AAAAAAAAAAI/AAAAAAAAAjs/hnKTOHALc6M/photo.jpg?sz=128", "display_name": "Ralf Stubner", "link": "https://stackoverflow.com/users/8416610/ralf-stubner"}, "reply_to_user": {"reputation": 90, "user_id": 7822504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11bfdce5f3a2d481a14fa469f61c10e?s=128&d=identicon&r=PG&f=1", "display_name": "happ", "link": "https://stackoverflow.com/users/7822504/happ"}, "edited": false, "score": 0, "creation_date": 1547134799, "post_id": 53638867, "comment_id": 95095507, "body": "@J.Kr At least on Debian et al. <code>gmpxx.h</code> is part of <code>libgmp-dev</code>. As for your other questions: It would be better to ask a new question for this, but be sure to (re)read the &quot;extending Rcpp&quot; vignette before hand. You can extend Rcpp without modifying third parts headers."}, {"owner": {"reputation": 1038, "user_id": 16168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c3097b49e68bbbcf8a41cd94ac50dbe?s=128&d=identicon&r=PG", "display_name": "DrYak", "link": "https://stackoverflow.com/users/16168/dryak"}, "edited": false, "score": 0, "creation_date": 1604084775, "post_id": 53638867, "comment_id": 114249475, "body": "Thanks for bringing this up. A colleague of my also would like to used libdai as part of an R package.  Is your package available somewhere? It would be very useful to us to see it in oder to get some inspiration. Thanks!"}, {"owner": {"reputation": 24192, "user_id": 8416610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cmim3CrZ9Wo/AAAAAAAAAAI/AAAAAAAAAjs/hnKTOHALc6M/photo.jpg?sz=128", "display_name": "Ralf Stubner", "link": "https://stackoverflow.com/users/8416610/ralf-stubner"}, "reply_to_user": {"reputation": 1038, "user_id": 16168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c3097b49e68bbbcf8a41cd94ac50dbe?s=128&d=identicon&r=PG", "display_name": "DrYak", "link": "https://stackoverflow.com/users/16168/dryak"}, "edited": false, "score": 0, "creation_date": 1604150898, "post_id": 53638867, "comment_id": 114262474, "body": "@DrYak Which package are you referring to?"}], "tags": [], "owner": {"reputation": 24192, "user_id": 8416610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cmim3CrZ9Wo/AAAAAAAAAAI/AAAAAAAAAjs/hnKTOHALc6M/photo.jpg?sz=128", "display_name": "Ralf Stubner", "link": "https://stackoverflow.com/users/8416610/ralf-stubner"}, "is_accepted": true, "score": 3, "last_activity_date": 1544035653, "creation_date": 1544035653, "answer_id": 53638867, "question_id": 53631025, "link": "https://stackoverflow.com/questions/53631025/rcpp-install-package-with-static-libraries-for-platform-independent-usage/53638867#53638867", "title": "Rcpp: Install package with static libraries for platform independent usage", "body": "<h1>How to link with a static library</h1>\n\n<p>You can either use <code>-L&lt;directory&gt; -l&lt;name&gt;</code> or <code>&lt;path&gt;</code>, i.e. in your case</p>\n\n<pre><code>PKG_LIBS = -L../lib -ldai\n</code></pre>\n\n<p>or</p>\n\n<pre><code>PKG_LIBS = ../lib/libdai.a\n</code></pre>\n\n<h1>Header placement</h1>\n\n<p>The headers for <code>libDAI</code> are only used internally. One cannot link to the functions declared in these headers. I would therefore not use <code>inst/include</code> for these headers.</p>\n\n<h1>Dependencies on CRAN</h1>\n\n<p>The gmp library seems to be available on the CRAN builders, c.f. <a href=\"https://github.com/cran/gmp\" rel=\"nofollow noreferrer\">https://github.com/cran/gmp</a> and <a href=\"https://cran.r-project.org/package=gmp\" rel=\"nofollow noreferrer\">https://cran.r-project.org/package=gmp</a>. It seems that libDAI requires <em>linking</em> to boost (program options), c.f. <a href=\"https://bitbucket.org/jorism/libdai/src/83bd24a4c5bf17b0592a7b5b21e26bf052881833/Makefile.LINUX?at=master&amp;fileviewer=file-view-default#Makefile.LINUX-49\" rel=\"nofollow noreferrer\">https://bitbucket.org/jorism/libdai/src/83bd24a4c5bf17b0592a7b5b21e26bf052881833/Makefile.LINUX?at=master&amp;fileviewer=file-view-default#Makefile.LINUX-49</a>. However, looking at the actual <code>Makefile</code> it seems this is only used for tests and utility programs. So you might get away with the boost <em>headers</em> provided by the BH package.</p>\n\n<h1>Pre-building static libraries</h1>\n\n<p>This is a common approach on Windows (c.f. <a href=\"https://github.com/rwinlib\" rel=\"nofollow noreferrer\">https://github.com/rwinlib</a>), but I find it unusual for Linux. The more common approach would be one of:</p>\n\n<ul>\n<li>include the sources in the package and compile during configure or package installation</li>\n<li>download the sources and compile during configure</li>\n<li>link with a system library (I haven't seen any for libDAI, though).</li>\n</ul>\n\n<p>For all three approaches there are numerous examples on CRAN and GitHub. It is difficult to make a recommendation, though. I probably would go for \"include the sources in the package\" and use the Makefile provided by upstream as a starting point for building the library.</p>\n"}], "owner": {"reputation": 90, "user_id": 7822504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11bfdce5f3a2d481a14fa469f61c10e?s=128&d=identicon&r=PG&f=1", "display_name": "happ", "link": "https://stackoverflow.com/users/7822504/happ"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 619, "favorite_count": 0, "accepted_answer_id": 53638867, "answer_count": 1, "score": 2, "last_activity_date": 1603790808, "creation_date": 1544008502, "last_edit_date": 1547461721, "question_id": 53631025, "link": "https://stackoverflow.com/questions/53631025/rcpp-install-package-with-static-libraries-for-platform-independent-usage", "title": "Rcpp: Install package with static libraries for platform independent usage", "body": "<p>I want to use the <a href=\"https://bitbucket.org/jorism/libdai\" rel=\"nofollow noreferrer\">libDAI C++</a> library within an R-package and want the package:</p>\n\n<ol>\n<li>to be usable on Linux and Windows</li>\n<li>save disc space (the external library has ~60 Mb)</li>\n<li>the end user does not need to install boost and gmp for compilation</li>\n</ol>\n\n<p>My current setup is:</p>\n\n<ul>\n<li>precompile libDAI\n\n<ul>\n<li>copy libdai.a to lib/ </li>\n<li>copy all  libDAI header files to inst/include</li>\n</ul></li>\n<li>add Makevar to src/</li>\n</ul>\n\n<p>Modify Makevar file:</p>\n\n<pre><code># include libraries\nPKG_CPPFLAGS =-I../inst/include/\nPKG_LIBS = -Llib -l../lib/libdai.a\n</code></pre>\n\n<p>My script for accessing the libDAI library is (test.cpp in src/):</p>\n\n<pre><code>#include &lt;dai/factorgraph.h&gt;\n#include &lt;Rcpp.h&gt;\n#include &lt;cmath&gt;\n\nusing namespace Rcpp;\nusing namespace std;\nusing namespace dai;\n\n//'\n//' Creates libDAI factor graph object\n//'\n//' @param factor_graph character definition of the factor graph\n//' @export\n// [[Rcpp::export]]\nvoid initialize_factor_graph(const char* factor_graph) {\n\n  // read the factor graph from the string\n  std::istringstream fgStream(factor_graph);\n  FactorGraph net;\n  net.ReadFromString( fgStream );\n\n  // Output some information about the factorgraph\n  cout &lt;&lt; \"Factor graph has \" &lt;&lt; net.nrVars() &lt;&lt; \" variables\" &lt;&lt; endl;\n  cout &lt;&lt; \"Factor graph has \" &lt;&lt; net.nrFactors() &lt;&lt; \" factors\" &lt;&lt; endl;\n\n}\n</code></pre>\n\n<p>running <code>Rscript -e \"Rcpp::compileAttributes('libdai')\"</code>, followed by <code>R CMD INSTALL libdai</code> returns the error:</p>\n\n<pre><code>Error: package or namespace load failed for 'libdai' in dyn.load(file, DLLpath = DLLpath, ...):\n unable to load shared object \n'/home/jk/libs/R/libdai/libs/libdai.so':\n  /home/jk/libs/R/libdai/libs/libdai.so: undefined symbol: _ZTVN3dai11FactorGraphE\nError: loading failed\n</code></pre>\n\n<p>So my questions are:</p>\n\n<ul>\n<li>What is wrong with my setup?</li>\n<li>what is the best procedure to share my final package on CRAN?</li>\n<li>What is the nicest setup for sharing the package?</li>\n</ul>\n\n<p>My question is closely related to <a href=\"https://stackoverflow.com/questions/12781518/linking-static-library-into-r\">this</a> and <a href=\"http://r.789695.n4.nabble.com/R-loadable-dll-with-minGW-compiled-linked-library-td3776733.html\" rel=\"nofollow noreferrer\">this</a> question and several other post related to referencing static libraries, however I was not able to solve my problem with these links.</p>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1544116022, "post_id": 53631012, "comment_id": 94171167, "body": "link really is create without error. but you can not open keys via this link due access denied error"}, {"owner": {"reputation": 61, "user_id": 5586727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c95c97aa701adfdf572447599e4657c?s=128&d=identicon&r=PG&f=1", "display_name": "99Boboster99", "link": "https://stackoverflow.com/users/5586727/99boboster99"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1544121831, "post_id": 53631012, "comment_id": 94173884, "body": "Exactly, everything looks good, up until you try do open the link. I can&#39;t find what &quot;special&quot; permissions these links are suppose to have. They are different from the &quot;normal&quot; links."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1544130262, "post_id": 53631012, "comment_id": 94177568, "body": "this is only for cross-hive links"}, {"owner": {"reputation": 61, "user_id": 5586727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c95c97aa701adfdf572447599e4657c?s=128&d=identicon&r=PG&f=1", "display_name": "99Boboster99", "link": "https://stackoverflow.com/users/5586727/99boboster99"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1544152174, "post_id": 53631012, "comment_id": 94183393, "body": "What would the security permissions be for cross linked hives?"}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 5586727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c95c97aa701adfdf572447599e4657c?s=128&d=identicon&r=PG&f=1", "display_name": "99Boboster99", "link": "https://stackoverflow.com/users/5586727/99boboster99"}, "edited": false, "score": 0, "creation_date": 1544066714, "post_id": 53643216, "comment_id": 94147276, "body": "Good suggestion, but using &quot;hkey_users\\&lt;AdminSID&gt;&quot; instead of &quot;hkey_current_user&quot; has the same results, access denied. Also, I am using a 64 bit application on Windows 7 x64 OS. There must be some special, undocumented privileges needed (higher than Admin) or this is just not possible. I&#39;ve tried a lot of privilege variations, but none of them allow access to the linked key. The funny thing is, is that the linked key is successfully created and the value of &quot;SymbolicLinkValue&quot; is successfully written to the key, it is just under some unknown privilege?"}, {"owner": {"reputation": 61, "user_id": 5586727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c95c97aa701adfdf572447599e4657c?s=128&d=identicon&r=PG&f=1", "display_name": "99Boboster99", "link": "https://stackoverflow.com/users/5586727/99boboster99"}, "edited": false, "score": 0, "creation_date": 1544095302, "post_id": 53643216, "comment_id": 94158770, "body": "Someone over at Cplusplus.com mentioned that this issue might be due to the fact that &quot;hkey_local_machine&quot; has a higher security privilege than &quot;hkey_current_user&quot;. I&#39;ve tried reassigning registry key privileges, but must not have had the correct permissions set. Does anyone know how to read the security descriptors of one key and apply them to another key? I am very sorry for double posting this question on another site, but I really need to figure this one out for a school project and I&#39;m at a dead end so far (with trust me, a lot of web search time behind me)."}, {"owner": {"reputation": 61, "user_id": 5586727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c95c97aa701adfdf572447599e4657c?s=128&d=identicon&r=PG&f=1", "display_name": "99Boboster99", "link": "https://stackoverflow.com/users/5586727/99boboster99"}, "edited": false, "score": 0, "creation_date": 1544104034, "post_id": 53643216, "comment_id": 94163917, "body": "Another limitation I just found, creating a registry symbolic link for this; hkey_users\\&lt;AdminSID&gt; and hkey_users\\&lt;a pre-loaded registry hive&gt;, doesn&#39;t work either (throws an error 5 - access denied error). And this is within the same hive (I believe)?"}], "tags": [], "owner": {"reputation": 1, "user_id": 10752292, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/6b806c0b13248d03dbca8a1e4d4b0cae?s=128&d=identicon&r=PG", "display_name": "dave", "link": "https://stackoverflow.com/users/10752292/dave"}, "is_accepted": false, "score": 0, "last_activity_date": 1544059061, "creation_date": 1544059061, "answer_id": 53643216, "question_id": 53631012, "link": "https://stackoverflow.com/questions/53631012/registry-symbolic-link-between-different-hives/53643216#53643216", "title": "Registry Symbolic Link between different hives", "body": "<p>My guess is that this is something to do with registry key redirection.  HKCU/Software is redirected; HKLM/Software is shared.</p>\n\n<p>So (hand-wave) if you're operating in a redirected key, you can't link to a shared key since it's in a different physical hive.</p>\n\n<p>Maybe.</p>\n\n<p>This all hinges on you running a 32-bit program on 64-bit Windows.</p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/windows/desktop/WinProg64/shared-registry-keys#redirected-shared-and-reflected-keys-under-wow64\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/desktop/WinProg64/shared-registry-keys#redirected-shared-and-reflected-keys-under-wow64</a></p>\n"}], "owner": {"reputation": 61, "user_id": 5586727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c95c97aa701adfdf572447599e4657c?s=128&d=identicon&r=PG&f=1", "display_name": "99Boboster99", "link": "https://stackoverflow.com/users/5586727/99boboster99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 738, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1544059061, "creation_date": 1544008472, "last_edit_date": 1544056655, "question_id": 53631012, "link": "https://stackoverflow.com/questions/53631012/registry-symbolic-link-between-different-hives", "title": "Registry Symbolic Link between different hives", "body": "<p>Can anyone explain why I can successfully create this registry symbolic link (using Win32 or Native API functions);</p>\n\n<blockquote>\n  <p>Link => \"hkey_local_machine\\software\\techinc\"</p>\n  \n  <p>Target => \"hkey_current_user\\software\\microsoft\"</p>\n</blockquote>\n\n<p>Yet, when I create this one, I get Error 5 (access denied);</p>\n\n<blockquote>\n  <p>Link => \"hkey_current_user\\software\\techinc\"</p>\n  \n  <p>Target => \"hkey_local_machine\\software\\microsoft\"</p>\n</blockquote>\n\n<p>I tried adding additional \"security descriptors\" as well, but it seems as though this is a hard Windows registry limitation.</p>\n\n<p>I'm currently using C++, but I am reading similar issues with other languages. Unfortunately, I have scoured the web and found NIL.</p>\n\n<p>What reinforces my theory that this is a hard limit, is that I can create this link without any errors;</p>\n\n<blockquote>\n  <p>Link => \"hkey_current_user\\software\\techinc\"</p>\n  \n  <p>Target => \"hkey_current_user\\software\\microsoft\"</p>\n</blockquote>\n\n<p>If someone could verify, that would be appreciated. Or maybe there is some \"special\" permissions, that I haven't tried yet, which are required to link between different hives.</p>\n"}, {"tags": ["c++", "leap-year"], "comments": [{"owner": {"reputation": 864, "user_id": 10320907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a781c80933f17fa87d97b70e3fca260?s=128&d=identicon&r=PG", "display_name": "tunglt", "link": "https://stackoverflow.com/users/10320907/tunglt"}, "edited": false, "score": 0, "creation_date": 1544008994, "post_id": 53630926, "comment_id": 94121700, "body": "it&#39;s because of your unconditional break inside the while loop that makes your program exit directly?"}], "answers": [{"comments": [{"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 1, "creation_date": 1544009911, "post_id": 53631168, "comment_id": 94122276, "body": "The input stream should be checked for error after trying to read the integer, and appropriate action taken. Not a bad answer otherwise."}, {"owner": {"reputation": 17, "user_id": 10581909, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tpSO0M1oq-E/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAYB3KRbEJL5LoV5Hr0OmyLzvkWCg/mo/photo.jpg?sz=128", "display_name": "Tsz Chun Leung", "link": "https://stackoverflow.com/users/10581909/tsz-chun-leung"}, "edited": false, "score": 0, "creation_date": 1544010020, "post_id": 53631168, "comment_id": 94122350, "body": "Thank you very much, Danny. May I ask why I need to delete the return 0? Also why you will add std:: before cout?  (p.s. This really clears all my doubts. Very logical and easy to understand.)"}, {"owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "reply_to_user": {"reputation": 17, "user_id": 10581909, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tpSO0M1oq-E/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAYB3KRbEJL5LoV5Hr0OmyLzvkWCg/mo/photo.jpg?sz=128", "display_name": "Tsz Chun Leung", "link": "https://stackoverflow.com/users/10581909/tsz-chun-leung"}, "edited": false, "score": 0, "creation_date": 1544010365, "post_id": 53631168, "comment_id": 94122561, "body": "@TszChunLeung <code>return 0;</code> Exits the program immediately. It should only be put at the very last line of the <code>main()</code> function. (unless you want to return earlier because there&#39;s a serious error)."}, {"owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "reply_to_user": {"reputation": 17, "user_id": 10581909, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tpSO0M1oq-E/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAYB3KRbEJL5LoV5Hr0OmyLzvkWCg/mo/photo.jpg?sz=128", "display_name": "Tsz Chun Leung", "link": "https://stackoverflow.com/users/10581909/tsz-chun-leung"}, "edited": false, "score": 0, "creation_date": 1544010495, "post_id": 53631168, "comment_id": 94122632, "body": "@TszChunLeung your <code>return 0;</code> Statement was at the end of the <i>while</i> loop but not of the main function. (notice how there&#39;s an extra <code>}</code> after <code>return 0;</code>)"}, {"owner": {"reputation": 17, "user_id": 10581909, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tpSO0M1oq-E/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAYB3KRbEJL5LoV5Hr0OmyLzvkWCg/mo/photo.jpg?sz=128", "display_name": "Tsz Chun Leung", "link": "https://stackoverflow.com/users/10581909/tsz-chun-leung"}, "edited": false, "score": 0, "creation_date": 1544010789, "post_id": 53631168, "comment_id": 94122814, "body": "@StackDanny Thank you very much. I really do."}, {"owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "reply_to_user": {"reputation": 17, "user_id": 10581909, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tpSO0M1oq-E/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAYB3KRbEJL5LoV5Hr0OmyLzvkWCg/mo/photo.jpg?sz=128", "display_name": "Tsz Chun Leung", "link": "https://stackoverflow.com/users/10581909/tsz-chun-leung"}, "edited": false, "score": 0, "creation_date": 1544010905, "post_id": 53631168, "comment_id": 94122887, "body": "@TszChunLeung also the <code>std::</code> makes it more clear <i>what</i> exactly you&#39;re using. There could be some serious issues with the code when it gets complicated if you always use all namespaces. It&#39;s good practise to just always write the namespaces. again, <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">here&#39;s</a> more on that :)"}, {"owner": {"reputation": 5200, "user_id": 733805, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/086a78b98e9d1fe37cd492dd25e42c34?s=128&d=identicon&r=PG", "display_name": "Kevin P. Rice", "link": "https://stackoverflow.com/users/733805/kevin-p-rice"}, "edited": false, "score": 0, "creation_date": 1544441205, "post_id": 53631168, "comment_id": 94263969, "body": "Simplest leap year test: <code>return ((year &amp; 3) == 0 &amp;&amp; ((year % 25) != 0 || (year &amp; 15) == 0)); &#47;&#47; returns true if leap year</code>"}], "tags": [], "owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "is_accepted": true, "score": 1, "last_activity_date": 1544010227, "last_edit_date": 1544010227, "creation_date": 1544008942, "answer_id": 53631168, "question_id": 53630926, "link": "https://stackoverflow.com/questions/53630926/c-program-for-checking-whether-the-input-is-a-leap-year/53631168#53631168", "title": "C++ program for checking whether the input is a leap year", "body": "<p>First of all, you (should) want a <code>while(true)</code> loop and not a <code>while(std::ostream)</code> loop.</p>\n\n<p>So replace</p>\n\n<pre><code>while (cout &lt;&lt; \"Enter a year (or negative number to quit): \")\n{\n</code></pre>\n\n<p>with</p>\n\n<pre><code>while (true)\n{\n    cout &lt;&lt; \"Enter a year (or negative number to quit): \";\n</code></pre>\n\n<p>As @paddy pointed out, you can check std::ostream`s return type to look for errors when printing out. But in this simple program I doubt it's necessary.</p>\n\n<p>Then you have the <code>break</code> outside your if statement, which will always break out of the program (no matter the Input). Replace</p>\n\n<pre><code>if (leap_year(year) == false &amp;&amp; year &lt;0 ) \n{\n    cout &lt;&lt; \"Bye!\" &lt;&lt; endl;\n}\nbreak;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>if (year &lt; 0)\n{\n    cout &lt;&lt; \"Bye!\" &lt;&lt; endl;\n    break;\n}\n</code></pre>\n\n<p>(there's no need to check if the negative input is a leap year. You can achieve entering only 1 <code>if</code>-statement with <a href=\"https://www.tutorialspoint.com/cplusplus/cpp_if_else_statement.htm\" rel=\"nofollow noreferrer\"><code>if-else</code> statments</a>, therefore you can also replace <code>if(leap_year(year) == false &amp;&amp; year &lt; 0)</code> with just <code>if (year &lt; 0)</code>; as I did.)</p>\n\n<p>When you apply this to all statements (not changing their internal logic) and remove the <code>return 0;</code> at the end of the loop, you get your desired program flow. Also removing <code>using namespace std;</code> is just better (read <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">here</a> why). You also don't Need to include <code>&lt;iomanip&gt;</code>, <code>&lt;cmath&gt;</code> nor <code>&lt;string&gt;</code>. Full Code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nbool leap_year(int year);\nint main() {\n    int year;\n    while (true) {\n        std::cout &lt;&lt; \"Enter a year (or negative number to quit): \";\n        std::cin &gt;&gt; year;\n        if (year &lt; 0) {\n            std::cout &lt;&lt; \"Bye!\" &lt;&lt; std::endl;\n            break;\n        }\n        else if (leap_year(year)) {\n            std::cout &lt;&lt; \"The year is a leap year.\" &lt;&lt; std::endl;\n        }\n        else {\n            std::cout &lt;&lt; \"The year is not a leap year.\" &lt;&lt; std::endl;\n        }\n    }\n}\nbool leap_year(int year){\n    bool is_leap_year = false;\n    if (year % 4 == 0){\n        is_leap_year = true;\n    }\n    if (year % 100 == 0){\n        is_leap_year = false;\n    }\n    if (year % 400 == 0){\n        is_leap_year = true;\n    }\n    return is_leap_year;\n}\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 10581909, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tpSO0M1oq-E/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAYB3KRbEJL5LoV5Hr0OmyLzvkWCg/mo/photo.jpg?sz=128", "display_name": "Tsz Chun Leung", "link": "https://stackoverflow.com/users/10581909/tsz-chun-leung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 866, "favorite_count": 1, "accepted_answer_id": 53631168, "answer_count": 1, "score": -2, "last_activity_date": 1544010611, "creation_date": 1544008214, "question_id": 53630926, "link": "https://stackoverflow.com/questions/53630926/c-program-for-checking-whether-the-input-is-a-leap-year", "title": "C++ program for checking whether the input is a leap year", "body": "<p>I am Tony and I am new to c++ programming. I would like to ask a question related to creating a program to check for leap year.</p>\n\n<p>In the following codes, I try to create a bool function to check whether the input is a leap year. If the input is negative, I will cout \"Bye!\" and stop the program immediately. If the input is positive, then I will check whether it is a leap year using the bool function I built until the input is a negative number then I will exit the program. </p>\n\n<p>However, I am not able to find what mistakes I have made and the current situation is, when I input a positive value, there is no result generated. Please help if you are available. Much thanks to you. : )    </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n#include &lt;string&gt;\n#include &lt;iomanip&gt;\n\nusing namespace std;\nbool leap_year(int year);\nint main()\n{\n    int year; \n    while (cout &lt;&lt; \"Enter a year (or negative number to quit): \")\n    {\n        cin &gt;&gt; year;\n        if (leap_year(year) == false &amp;&amp; year &lt;0 ) \n        {\n            cout &lt;&lt; \"Bye!\" &lt;&lt; endl;\n        }\n        break;\n        if (leap_year(year) == false &amp;&amp; year &gt;0 )\n        {\n            cout &lt;&lt; \"The year is not a leap year.\" &lt;&lt; endl;\n        }\n        if (leap_year(year) == true &amp;&amp; year &gt;0 ) \n        {\n            cout &lt;&lt; \"The year is a leap year.\" &lt;&lt; endl;\n        }\n        return 0;\n    }    \n}\n  bool leap_year(int year)\n{\n    bool is_leap_year = false;\n    if (year % 4 == 0)\n    {\n       is_leap_year = true;\n    }\n    if (year % 100 == 0)\n    {\n        is_leap_year = false;\n    }\n    if (year % 400 == 0)\n    {\n        is_leap_year = true;\n    }\n    return is_leap_year;\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "winapi", "audio"], "comments": [{"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1544008610, "post_id": 53630876, "comment_id": 94121457, "body": "<a href=\"https://stackoverflow.com/questions/2207961/why-mcisendstring-to-get-status-position-fails-in-my-code\">Take a look here</a>"}, {"owner": {"reputation": 67, "user_id": 10748234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a5fc401ccf5475729dd1b5b7fa01cfa?s=128&d=identicon&r=PG&f=1", "display_name": "emik_g", "link": "https://stackoverflow.com/users/10748234/emik-g"}, "reply_to_user": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1544009689, "post_id": 53630876, "comment_id": 94122125, "body": "I looked, but it for save position in one song(or other media)."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1544009908, "post_id": 53630876, "comment_id": 94122274, "body": "You should probably use wasapi instead, run a real audio thread."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1544010506, "post_id": 53630876, "comment_id": 94122639, "body": "What about using the <a href=\"https://docs.microsoft.com/en-gb/windows/desktop/Multimedia/the-notify-flag\" rel=\"nofollow noreferrer\">Notify flag</a>"}, {"owner": {"reputation": 67, "user_id": 10748234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a5fc401ccf5475729dd1b5b7fa01cfa?s=128&d=identicon&r=PG&f=1", "display_name": "emik_g", "link": "https://stackoverflow.com/users/10748234/emik-g"}, "edited": false, "score": 0, "creation_date": 1544010680, "post_id": 53630876, "comment_id": 94122742, "body": "Can you explain, what you mean, when say &quot;real audio thread&quot;. Link to guide or tutorial will be good."}, {"owner": {"reputation": 67, "user_id": 10748234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a5fc401ccf5475729dd1b5b7fa01cfa?s=128&d=identicon&r=PG&f=1", "display_name": "emik_g", "link": "https://stackoverflow.com/users/10748234/emik-g"}, "edited": false, "score": 0, "creation_date": 1544010828, "post_id": 53630876, "comment_id": 94122832, "body": "paddy, I read about it, but I can&#39;t understand how use it."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1544028479, "post_id": 53630876, "comment_id": 94133760, "body": "You need a message loop to handle <a href=\"https://docs.microsoft.com/en-gb/windows/desktop/Multimedia/mm-mcinotify\" rel=\"nofollow noreferrer\"><code>MM_MCINOTIFY</code></a> message."}, {"owner": {"reputation": 67, "user_id": 10748234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a5fc401ccf5475729dd1b5b7fa01cfa?s=128&d=identicon&r=PG&f=1", "display_name": "emik_g", "link": "https://stackoverflow.com/users/10748234/emik-g"}, "edited": false, "score": 0, "creation_date": 1544030566, "post_id": 53630876, "comment_id": 94134925, "body": "zett42, It is really can help me in this task. Can you write some example(or give link to guide or example). It is really will be good, because code better, than docs."}, {"owner": {"reputation": 8787, "user_id": 6601582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a2f69702729da5aaa628bc58811a7?s=128&d=identicon&r=PG&f=1", "display_name": "Rita Han", "link": "https://stackoverflow.com/users/6601582/rita-han"}, "edited": false, "score": 1, "creation_date": 1544085564, "post_id": 53630876, "comment_id": 94153238, "body": "@emik_g You can reference <a href=\"https://www.codeproject.com/Articles/14709/Playing-MP3s-using-MCI\" rel=\"nofollow noreferrer\">this</a> code sample."}], "owner": {"reputation": 67, "user_id": 10748234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a5fc401ccf5475729dd1b5b7fa01cfa?s=128&d=identicon&r=PG&f=1", "display_name": "emik_g", "link": "https://stackoverflow.com/users/10748234/emik-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 221, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544008040, "creation_date": 1544008040, "question_id": 53630876, "link": "https://stackoverflow.com/questions/53630876/play-music-in-c", "title": "Play music in c++", "body": "<p>I have some problem with playing mp3 file in c++(I apologize for my english, it isn't my first language). I use winapi in programm for playing music(I am using function mciSendStringW). My programm will be using 3 thread. Main thread, thread for input/output operation and one for playing music. I have two problem:</p>\n\n<ol>\n<li>I don't know, when music will be over(I don't know the song's size and length). I can use:</li>\n</ol>\n\n<p><code>mciSendStringW(LR\"(play SongPath1.mp3 wait)\", NULL, 0, NULL)</code></p>\n\n<p>But I have second problem</p>\n\n<ol start=\"2\">\n<li>I can't stop music, if I use:</li>\n</ol>\n\n<p><code>mciSendStringW(LR\"(play SongPath1.mp3 wait)\", NULL, 0, NULL);</code></p>\n\n<p>Because, programm will be stop in this line, untill song will be over. Example, user switch off music, but, i can't say tread stop music and i can't kill music-thread in another thread. But if I use</p>\n\n<pre><code>mciSendStringW(LR\"(play SongPath1.mp3)\", NULL, 0, NULL);\n</code></pre>\n\n<p>Whithout flag \"wait\" I can write something like that:</p>\n\n<pre><code>mciSendStringW(LR\"(play SongPath1.mp3 )\", NULL, 0, NULL);\nwhile(true){\n    g_song_mutex.lock();     /*global mutex for g_switch_off_music*/\n    if(g_switch_off_music) { /*global bool for switch off music*/\n        mciSendStringW(LR\"(stop SongPath1.mp3)\", NULL, 0, NULL);\n        return;\n    this_thread::sleep_for(chrono::milliseconds(300));\n    }\n    g_song_mutex.unlock();\n}\n</code></pre>\n\n<p>But I have more than one song and when first song is over, will be start secong. But i don't know, when song is over. And programm if I use:</p>\n\n<pre><code> mciSendStringW(LR\"(play SongPath1.mp3)\", NULL, 0, NULL);\n</code></pre>\n\n<p>Can't play second song(or repeat first), or if I use:</p>\n\n<p><code>mciSendStringW(LR\"(play SongPath1.mp3 wait)\", NULL, 0, NULL);</code></p>\n\n<p>Programm can't switch off song.</p>\n"}, {"tags": ["c++", "language-lawyer", "c++17"], "comments": [{"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1544009972, "post_id": 53630837, "comment_id": 94122317, "body": "GCC does not compile this code if <code>Bar</code> is not a template. Probably, a related question: <a href=\"https://stackoverflow.com/questions/46119548/constexpr-member-function-in-class-template\" title=\"constexpr member function in class template\">stackoverflow.com/questions/46119548/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1544009659, "post_id": 53631347, "comment_id": 94122106, "body": "Allows it to compile, yet the template is ill-formed NDR. Interesting."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1544009794, "post_id": 53631347, "comment_id": 94122189, "body": "&quot;even though a call to such a function cannot appear in a constant expression&quot;. Doesn&#39;t this mean that <code>Bar&lt;void&gt;</code>&#39;s constructor cannot appear in <code>Foo</code>&#39;s constructor (<code>Foo</code>&#39;s constructor is constexpr, and <code>Bar&lt;void&gt;</code>&#39;s isn&#39;t, so it cannot appear)?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1544010129, "post_id": 53631347, "comment_id": 94122414, "body": "@geza - The constructor is constexpr but not a constant expression (it&#39;s not an expression at all)."}, {"owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1544010221, "post_id": 53631347, "comment_id": 94122465, "body": "@geza: Agree with StoryTeller&#39;s interpretation. Constructor is not an expression."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1544010329, "post_id": 53631347, "comment_id": 94122535, "body": "@StoryTeller: okay, thanks, reading this quote several time + your comment, now I understand what&#39;s going on. But, now I fail to understand the logic behind this: &quot;fail to satisfy the requirements for a ... constexpr constructor, that specialization is still a ... constexpr constructor&quot;. What? Why?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1544010545, "post_id": 53631347, "comment_id": 94122672, "body": "@geza - Honestly, I&#39;m not sure why it&#39;s worded like that instead of silently removing the constexpr property."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1544010996, "post_id": 53631347, "comment_id": 94122933, "body": "Do you have a recommendation about my other question? How to detect whether <code>Foo</code> will be initialized statically? If not, maybe I remove that part of my question, and ask a new question."}, {"owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1544011485, "post_id": 53631347, "comment_id": 94123200, "body": "@geza: I think answering the other question might involve using helper classes, traits. etc. So better remove that part from this question and ask a new question."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1544012144, "post_id": 53631347, "comment_id": 94123597, "body": "FYI: <a href=\"https://stackoverflow.com/questions/53632120/how-can-i-detect-that-a-constuctor-is-really-constexpr-so-i-can-utilize-static\" title=\"how can i detect that a constuctor is really constexpr so i can utilize static\">stackoverflow.com/questions/53632120/&hellip;</a>"}], "tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": true, "score": 10, "last_activity_date": 1544071776, "last_edit_date": 1544071776, "creation_date": 1544009569, "answer_id": 53631347, "question_id": 53630837, "link": "https://stackoverflow.com/questions/53630837/is-this-a-bug-constexpr-constructor-silently-becomes-non-constexpr/53631347#53631347", "title": "Is this a bug? Constexpr constructor silently becomes non-constexpr", "body": "<blockquote>\n  <p>Is this a compiler bug, or some rule allows this code to compile?</p>\n</blockquote>\n\n<p>The rule that allows this to compile is:</p>\n\n<blockquote>\n  <p><strong>10.1.5 The constexpr speci\ufb01er [dcl.constexpr]</strong><br>\n  ...<br>\n  6. If the instantiated template specialization of a <code>constexpr</code> function template or member function of a class template would fail to satisfy the requirements for a <code>constexpr</code> function or <code>constexpr</code> constructor, that specialization is still a <code>constexpr</code> function or <code>constexpr</code> constructor, even though a call to such a function cannot appear in a constant expression. If no specialization of the template would satisfy the requirements for a <code>constexpr</code> function or <code>constexpr</code> constructor when considered as a non-template function or constructor, the template is ill-formed, no diagnostic required. </p>\n</blockquote>\n\n<p>The above quote is taken from CPP standard draft N4713.</p>\n\n<hr>\n\n<p>From the quote it may not be clear how <code>Bar&lt;void&gt;</code>'s constructor can appear in <code>Foo</code>'s constructor as <code>Foo</code>'s constructor is <code>constexpr</code>. But as noted in the comments, <code>constexpr</code> is not the same as constant expression. <code>Foo</code>'s constructor is is not an expression, much less a constant expression.</p>\n"}], "owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 467, "favorite_count": 3, "accepted_answer_id": 53631347, "answer_count": 1, "score": 17, "last_activity_date": 1550754335, "creation_date": 1544007925, "last_edit_date": 1550754335, "question_id": 53630837, "link": "https://stackoverflow.com/questions/53630837/is-this-a-bug-constexpr-constructor-silently-becomes-non-constexpr", "title": "Is this a bug? Constexpr constructor silently becomes non-constexpr", "body": "<p>Look at this code:</p>\n\n<pre><code>struct NonConstexpr {\n    NonConstexpr() { }\n};\n\ntemplate &lt;typename T&gt;\nstruct Bar {\n    NonConstexpr nonConstexpr;\n\n    constexpr Bar() { }\n};\n\nstruct Foo {\n    Bar&lt;void&gt; bar;\n\n    constexpr Foo() { }\n};\n</code></pre>\n\n<p><code>Foo</code> has a member, <code>Foo::bar::nonConstexpr</code>, which has a non-constexpr constructor. So, my expectation is that this should not compile. But it compiles with gcc, clang and msvc. Is this a compiler bug, or some rule allows this code to compile?</p>\n\n<p>If I add a <code>NonConstexpr</code> member into <code>Foo</code> directly, the code doesn't compile anymore.</p>\n\n<p>(I got this problem, because I've expected static initialization for a global <code>Foo</code> object, but it got dynamically initialized, and it caused a problem, because of \"static initialization order fiasco\")</p>\n"}, {"tags": ["c++", "qt", "qwizard"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1544559985, "post_id": 53630483, "comment_id": 94317414, "body": "some feedback??"}], "answers": [{"comments": [{"owner": {"reputation": 329, "user_id": 4620235, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1a75a15c9b2e10fc619d14ce765416c6?s=128&d=identicon&r=PG&f=1", "display_name": "eko", "link": "https://stackoverflow.com/users/4620235/eko"}, "edited": false, "score": 0, "creation_date": 1544623312, "post_id": 53633363, "comment_id": 94341797, "body": "Thank you! After quite a bit debugging (the real code is a bit more complicated than my example, and the wizard was originally created by someone else) I managed to find out that button layout had been set in one of the earlier views, and was not reset when changing view. Still accepting this answer, as it was an error on my part, and it should work by this example."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 0, "last_activity_date": 1544016186, "creation_date": 1544016186, "answer_id": 53633363, "question_id": 53630483, "link": "https://stackoverflow.com/questions/53630483/qwizard-back-button-missing/53633363#53633363", "title": "QWizard - back button missing", "body": "<p>Nobody can know what is wrong because you do not show your implementation so I will just provide a code that implements the scheme that shows:</p>\n\n<p><strong>wizard.h</strong></p>\n\n<pre><code>#ifndef WIZARD_H\n#define WIZARD_H\n\n#include &lt;QWizard&gt;\n\nclass QButtonGroup;\n\nclass Wizard : public QWizard\n{\n    Q_OBJECT\npublic:\n    enum { Start_Page,\n           Page_1,\n           Page_2, Page_3,\n           Page_4,\n           End_Page };\n    Wizard(QWidget *parent=nullptr);\n};\n\nclass StartPage: public QWizardPage\n{\n    Q_OBJECT\npublic:\n    StartPage(QWidget *parent=nullptr);\n    int nextId() const override;\nprivate:\n    QButtonGroup *group;\n};\n\nclass Page1: public QWizardPage\n{\n    Q_OBJECT\npublic:\n    Page1(QWidget *parent=nullptr);\n    int nextId() const override;\n};\n\nclass Page2: public QWizardPage\n{\n    Q_OBJECT\npublic:\n    Page2(QWidget *parent=nullptr);\n    int nextId() const override;\n};\n\nclass Page3: public QWizardPage\n{\n    Q_OBJECT\npublic:\n    Page3(QWidget *parent=nullptr);\n    int nextId() const override;\n};\n\nclass Page4: public QWizardPage\n{\n    Q_OBJECT\npublic:\n    Page4(QWidget *parent=nullptr);\n    int nextId() const override;\n};\n\nclass EndPage: public QWizardPage\n{\n    Q_OBJECT\npublic:\n    EndPage(QWidget *parent=nullptr);\n    int nextId() const override;\n};\n#endif // WIZARD_H\n</code></pre>\n\n<p><strong>wizard.cpp</strong></p>\n\n<pre><code>#include \"wizard.h\"\n\n#include &lt;QButtonGroup&gt;\n#include &lt;QLabel&gt;\n#include &lt;QRadioButton&gt;\n#include &lt;QVBoxLayout&gt;\n\nWizard::Wizard(QWidget *parent):\n    QWizard(parent)\n{\n    setPage(Start_Page, new StartPage);\n    setPage(Page_1, new Page1);\n    setPage(Page_2, new Page3);\n    setPage(Page_3, new Page3);\n    setPage(Page_4, new Page4);\n    setPage(End_Page, new EndPage);\n}\n\nStartPage::StartPage(QWidget *parent):\n    QWizardPage(parent)\n{\n    QVBoxLayout *lay = new QVBoxLayout(this);\n    lay-&gt;addWidget(new QLabel(\"Start Page\"));\n    group = new QButtonGroup(this);\n    for(const QString &amp; text: {\"Page1\", \"Page2\", \"Page4\"}){\n        QRadioButton *radio = new QRadioButton(text);\n        lay-&gt;addWidget(radio);\n        group-&gt;addButton(radio);\n    }\n    group-&gt;buttons().first()-&gt;setChecked(true);\n    lay-&gt;addStretch();\n}\n\nint StartPage::nextId() const\n{\n    if(group-&gt;checkedButton()-&gt;text() == \"Page1\")\n        return Wizard::Page_1;\n    else if(group-&gt;checkedButton()-&gt;text() == \"Page2\")\n        return Wizard::Page_2;\n    return Wizard::Page_4;\n}\n\nPage1::Page1(QWidget *parent):\n    QWizardPage(parent)\n{\n    QVBoxLayout *lay = new QVBoxLayout(this);\n    lay-&gt;addWidget(new QLabel(\"Page1\"));\n}\n\nint Page1::nextId() const\n{\n    return Wizard::End_Page;\n}\n\nPage2::Page2(QWidget *parent):\n    QWizardPage(parent)\n{\n    QVBoxLayout *lay = new QVBoxLayout(this);\n    lay-&gt;addWidget(new QLabel(\"Page2\"));\n}\n\nint Page2::nextId() const\n{\n    return Wizard::Page_3;\n}\n\nPage3::Page3(QWidget *parent):\n    QWizardPage(parent)\n{\n    QVBoxLayout *lay = new QVBoxLayout(this);\n    lay-&gt;addWidget(new QLabel(\"Page3\"));\n}\n\nint Page3::nextId() const\n{\n    return Wizard::End_Page;\n}\n\nPage4::Page4(QWidget *parent):\n    QWizardPage(parent)\n{\n    QVBoxLayout *lay = new QVBoxLayout(this);\n    lay-&gt;addWidget(new QLabel(\"Page4\"));\n}\n\nint Page4::nextId() const\n{\n    return Wizard::End_Page;\n}\n\nEndPage::EndPage(QWidget *parent):\n    QWizardPage(parent)\n{\n    QVBoxLayout *lay = new QVBoxLayout(this);\n    lay-&gt;addWidget(new QLabel(\"End Page\"));\n}\n\nint EndPage::nextId() const\n{\n    return -1;\n}\n</code></pre>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include \"wizard.h\"\n#include &lt;QApplication&gt;\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    Wizard w;\n    w.show();\n    return a.exec();\n}\n</code></pre>\n\n<p>The complete example can be found <a href=\"https://github.com/eyllanesc/stackoverflow/tree/master/questions/53630483\" rel=\"nofollow noreferrer\"><strong>here</strong></a>.</p>\n"}], "owner": {"reputation": 329, "user_id": 4620235, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1a75a15c9b2e10fc619d14ce765416c6?s=128&d=identicon&r=PG&f=1", "display_name": "eko", "link": "https://stackoverflow.com/users/4620235/eko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "accepted_answer_id": 53633363, "answer_count": 1, "score": 0, "last_activity_date": 1544016186, "creation_date": 1544006668, "question_id": 53630483, "link": "https://stackoverflow.com/questions/53630483/qwizard-back-button-missing", "title": "QWizard - back button missing", "body": "<p>I have a QWizard, which branches in a following way:</p>\n\n<pre><code>           ----- Page1 -----\n         /                   \\\nStartPage  - Page2 - Page3 -  EndPage\n         \\                   /\n           ----- Page4 -----\n</code></pre>\n\n<p>The problem is, the the end page only shows \"back\" button, when it's reached via StartPage -> page4 -> EndPage. Otherwise it only shows \"finish\" and \"cancel\". Does anyone have similar experiences, what could cause this? Here's how it's set up:</p>\n\n<pre><code>QWizard wizard;\nwizard.setPage(0, new StartPage(&amp;wizard));\nwizard.setPage(1, new Page1(&amp;wizard));\nwizard.setPage(2, new Page2(&amp;wizard));\nwizard.setPage(3, new Page3(&amp;wizard));\nwizard.setPage(4, new Page4(&amp;wizard));\nwizard.setPage(5, new EndPage(&amp;wizard));\n</code></pre>\n\n<p>For the pages, nextId() is reimplemented to return correct id. I'm confused why it works differently via different paths.</p>\n"}, {"tags": ["c++", "fortran", "vectorization"], "comments": [{"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 1, "creation_date": 1544009537, "post_id": 53630376, "comment_id": 94122037, "body": "It rather depends on why you want to compare it. For the case of  &quot;... compared to its non-vectorized version, the vectorized code achieves ...&quot;, you probably want as little difference outside vectorization"}, {"owner": {"reputation": 151, "user_id": 6583953, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6b5edf3de4f75192908578283e95cef4?s=128&d=identicon&r=PG&f=1", "display_name": "bestrong", "link": "https://stackoverflow.com/users/6583953/bestrong"}, "reply_to_user": {"reputation": 73919, "user_id": 44309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iL4TW.png?s=128&g=1", "display_name": "High Performance Mark", "link": "https://stackoverflow.com/users/44309/high-performance-mark"}, "edited": false, "score": 0, "creation_date": 1544010407, "post_id": 53630376, "comment_id": 94122587, "body": "@HighPerformanceMark: Thanks anyway :)"}, {"owner": {"reputation": 151, "user_id": 6583953, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6b5edf3de4f75192908578283e95cef4?s=128&d=identicon&r=PG&f=1", "display_name": "bestrong", "link": "https://stackoverflow.com/users/6583953/bestrong"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1544010417, "post_id": 53630376, "comment_id": 94122593, "body": "@Caleth: I just want to emphasize the benefit of vectorization. For example, if I&#39;m using single-precision arithmetic and run my code on an AVX machine (with a vector length of 8 for single-precision) so that max. theoretical speedup is 8x. For this reason, can I compare &#39;-O2&#39; with &#39;-O2 -no-vec&#39;? Thanks."}, {"owner": {"reputation": 151, "user_id": 6583953, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6b5edf3de4f75192908578283e95cef4?s=128&d=identicon&r=PG&f=1", "display_name": "bestrong", "link": "https://stackoverflow.com/users/6583953/bestrong"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1544010565, "post_id": 53630376, "comment_id": 94122684, "body": "@MatthieuBrucher: I see. So, the answer is: I shouldn&#39;t go for lower optimization and I should only set &#39;-no-vec&#39; for emphasizing the effect of vectorization for each optimization flag, right?"}, {"owner": {"reputation": 151, "user_id": 6583953, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6b5edf3de4f75192908578283e95cef4?s=128&d=identicon&r=PG&f=1", "display_name": "bestrong", "link": "https://stackoverflow.com/users/6583953/bestrong"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1544010765, "post_id": 53630376, "comment_id": 94122793, "body": "@MatthieuBrucher: Yes, please do it. I will vote it :)"}], "answers": [{"tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": true, "score": 2, "last_activity_date": 1544010863, "creation_date": 1544010863, "answer_id": 53631735, "question_id": 53630376, "link": "https://stackoverflow.com/questions/53630376/how-to-compare-vectorized-and-non-vectorized-codes/53631735#53631735", "title": "How to compare vectorized and non-vectorized codes", "body": "<p>Compiler optimization level encompass lots of individual optimizations, not just vectorization. It can be the math model, loop unrolling... </p>\n\n<p>The results will be different for all of these, so yes deactivate your compiler (unspecified...) vectorization routines to see the differences made by just the vectorization. </p>\n\n<p>You shouldn't go for lower optimization because of these other optimizations that are done that could add numerical differences on their own.</p>\n"}], "owner": {"reputation": 151, "user_id": 6583953, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6b5edf3de4f75192908578283e95cef4?s=128&d=identicon&r=PG&f=1", "display_name": "bestrong", "link": "https://stackoverflow.com/users/6583953/bestrong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 53631735, "answer_count": 1, "score": 1, "last_activity_date": 1544010863, "creation_date": 1544006316, "question_id": 53630376, "link": "https://stackoverflow.com/questions/53630376/how-to-compare-vectorized-and-non-vectorized-codes", "title": "How to compare vectorized and non-vectorized codes", "body": "<p>I am wondering how one should compare a vectorized code to its non-vectorized version? For example, I have a simple fortran code and I compile it with <code>-O2</code> to enable auto vectorization. Afterwards, I can see from the optimization report, that the loop was vectorized. Now, if I want to compare this vectorized code with its non-vectorized version, should I compile the same code with <code>-O2 -no-vec</code> or <code>-O1</code> or even <code>-O0</code>? Well, based on my experience, both <code>-O2 -no-vec</code> and <code>-O1</code> give no significant differences, although the former is always slightly better. However, if I compare <code>-O2</code> and <code>-O0</code>, the results differ significantly which are more than the number of vector widths; therefore, I am sure one should not compare these for emphasizing the benefits of vectorization. So, I would like only to know should I compare <code>-O2</code> with <code>-O2 -no-vec</code> or <code>-O1</code> since I read many journals which never explained this matter in detail but only stated for example \"... compared to its non-vectorized version, the vectorized code achieves ...\"  </p>\n"}, {"tags": ["c++", "arrays", "char"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 5, "creation_date": 1544006288, "post_id": 53630335, "comment_id": 94120048, "body": "Define &quot;100% safe&quot;."}, {"owner": {"reputation": 93, "user_id": 9783793, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Micha\u0142 P.", "link": "https://stackoverflow.com/users/9783793/micha%c5%82-p"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1544006421, "post_id": 53630335, "comment_id": 94120140, "body": "no memory leaks, memory violation, ub  basicly I wouldn&#39;t do: Foo* fooFunction(){  Foo foo{};  return &amp;foo; }"}], "answers": [{"comments": [{"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 2, "creation_date": 1544006620, "post_id": 53630420, "comment_id": 94120279, "body": "String literals are guaranteed to be ended with <code>&#39;\\0&#39;</code>. For example, given <code>auto foo = &quot;abc&quot;</code>, the type of <code>foo</code> is <code>const char[4]</code>"}, {"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 1, "creation_date": 1544006660, "post_id": 53630420, "comment_id": 94120303, "body": "The points you make, while valid, don&#39;t make much sense in this context. String literals always end with a null character, and string processing functions operating on c-strings never take the length, instead establishing it directly (or sometimes they just don&#39;t need it)."}, {"owner": {"reputation": 99, "user_id": 8319135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c92a5f668c2b1d4a474af36b5f08facd?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge Juan Torres Quiroga", "link": "https://stackoverflow.com/users/8319135/jorge-juan-torres-quiroga"}, "edited": false, "score": 0, "creation_date": 1544006676, "post_id": 53630420, "comment_id": 94120312, "body": "I know, but the caller of the function doesn&#39;t necessarily know this, all it sees is a pointer to memory"}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1544006693, "post_id": 53630420, "comment_id": 94120325, "body": "have you heard about <code>strlen()</code>?"}, {"owner": {"reputation": 99, "user_id": 8319135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c92a5f668c2b1d4a474af36b5f08facd?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge Juan Torres Quiroga", "link": "https://stackoverflow.com/users/8319135/jorge-juan-torres-quiroga"}, "edited": false, "score": 0, "creation_date": 1544006740, "post_id": 53630420, "comment_id": 94120349, "body": "Yes, and as far as I know if you provide it and array that is not NULL terminated, you&#39;ll get a segfault."}, {"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 6, "creation_date": 1544006758, "post_id": 53630420, "comment_id": 94120365, "body": "@JorgeJuanTorresQuiroga Pretty much everyone knows what to do with <code>const char*</code>. Consider e.g. <code>std::cout</code> <code>operator&lt;&lt;</code> overload. And speculating about what would this code do if it was different; well if it was different, it would behave differently. As is, it&#39;s fine."}, {"owner": {"reputation": 99, "user_id": 8319135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c92a5f668c2b1d4a474af36b5f08facd?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge Juan Torres Quiroga", "link": "https://stackoverflow.com/users/8319135/jorge-juan-torres-quiroga"}, "edited": false, "score": 0, "creation_date": 1544006894, "post_id": 53630420, "comment_id": 94120469, "body": "Ok, I was thinking in terms of plain C, nevermind and thanks for the hint!"}], "tags": [], "owner": {"reputation": 99, "user_id": 8319135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c92a5f668c2b1d4a474af36b5f08facd?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge Juan Torres Quiroga", "link": "https://stackoverflow.com/users/8319135/jorge-juan-torres-quiroga"}, "is_accepted": false, "score": 0, "last_activity_date": 1544006478, "creation_date": 1544006478, "answer_id": 53630420, "question_id": 53630335, "link": "https://stackoverflow.com/questions/53630335/returning-char-form-c-function/53630420#53630420", "title": "Returning char* form C++ function", "body": "<p>I'm not sure what you mean by \"100%\". The expression is correct, but keep in mind that the caller is going to need to know the length of the array the returned pointer points to. Either the function returns this value with some parameter or the caller checks the length, but in this case the function must guarantee that the array is NULL terminated.</p>\n"}, {"comments": [{"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1544006782, "post_id": 53630437, "comment_id": 94120382, "body": "This is correct, however we still need the definition of &quot;<i>100% correct</i>&quot;. I can&#39;t find the question right now, but there was a question here that asked about using <code>const char*</code> as keys in the map. The question asked about accessing the map values simply with <code>const char*</code> and asked whether it was always safe. <b>It is not</b>."}, {"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "reply_to_user": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 2, "creation_date": 1544006837, "post_id": 53630437, "comment_id": 94120425, "body": "@Fureeish Using <code>const char*</code> has nothing to do with returning it from a function, IMHO. That&#39;s a topic for, as you&#39;ve noted, a different question."}], "tags": [], "owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "is_accepted": true, "score": 6, "last_activity_date": 1544006525, "creation_date": 1544006525, "answer_id": 53630437, "question_id": 53630335, "link": "https://stackoverflow.com/questions/53630335/returning-char-form-c-function/53630437#53630437", "title": "Returning char* form C++ function", "body": "<p>This is perfectly acceptable from the language PoV.</p>\n\n<p>There's no memory leak of any kind because there are no allocations. The only value constructed is the resulting pointer of primitive type, initialized to point at the literal's location. The pointer returned by this function points to a valid location that can be read and used.</p>\n\n<p>In fact, this function could be marked <code>constexpr</code>, as the result can be determined at compile-time, and any program using it will work just as if it used the literal directly.</p>\n"}], "owner": {"reputation": 93, "user_id": 9783793, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Micha\u0142 P.", "link": "https://stackoverflow.com/users/9783793/micha%c5%82-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 53630437, "answer_count": 2, "score": 2, "last_activity_date": 1544008358, "creation_date": 1544006233, "question_id": 53630335, "link": "https://stackoverflow.com/questions/53630335/returning-char-form-c-function", "title": "Returning char* form C++ function", "body": "<p>I have a simple question but unfortunately I wasn't able to find the answear online.</p>\n\n<pre><code>const char* foo() const { return \"foo\"; }\n</code></pre>\n\n<p>Is this 100% safe ?</p>\n"}, {"tags": ["c++", "linux-kernel", "syslog"], "answers": [{"tags": [], "owner": {"reputation": 465, "user_id": 3077485, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/RIQ2i.jpg?s=128&g=1", "display_name": "Gilo", "link": "https://stackoverflow.com/users/3077485/gilo"}, "is_accepted": false, "score": 0, "last_activity_date": 1544948244, "creation_date": 1544948244, "answer_id": 53800539, "question_id": 53630302, "link": "https://stackoverflow.com/questions/53630302/metalog-all-logs-are-printed-with-kernel/53800539#53800539", "title": "Metalog all logs are printed with [kernel]", "body": "<p>My problem was that I started Metalog from another process, which pointed its stdout &amp; stderr to /dev/kmsg, Hence the forked process of Metalog did the same. That caused the logs to look like they are from the kernel.</p>\n"}], "owner": {"reputation": 465, "user_id": 3077485, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/RIQ2i.jpg?s=128&g=1", "display_name": "Gilo", "link": "https://stackoverflow.com/users/3077485/gilo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1544948244, "creation_date": 1544006131, "question_id": 53630302, "link": "https://stackoverflow.com/questions/53630302/metalog-all-logs-are-printed-with-kernel", "title": "Metalog all logs are printed with [kernel]", "body": "<p>I installed metalog my server and using C++ application to write logs.\nHere is how I print to system logging</p>\n\n<pre><code>openlog(facility.c_str(), LOG_CONS | LOG_PID | LOG_NDELAY | LOG_PERROR, LOG_LOCAL0);\n\nsyslog(LOG_INFO, \"%s\", stderr_msg.c_str());\n</code></pre>\n\n<p>All my logs are printed with the format: </p>\n\n<pre><code>&lt;date&gt; [kernel] &lt;log text message&gt;\n</code></pre>\n\n<p>for example</p>\n\n<pre><code>Dec 05 12:19:31 [kernel] this is an example of log\n</code></pre>\n\n<p>I want to change it that instead of [kernel], it will print the relevant module.\nOr at least my application name, but not 'kernel'.\nHow can I do it?</p>\n"}, {"tags": ["c++", "arrays", "numbers"], "comments": [{"owner": {"reputation": 2279, "user_id": 2767436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066110b639f57bb021509bfdc37461e0?s=128&d=identicon&r=PG&f=1", "display_name": "Rene", "link": "https://stackoverflow.com/users/2767436/rene"}, "edited": false, "score": 0, "creation_date": 1544009189, "post_id": 53630195, "comment_id": 94121815, "body": "Have you tried debugging your code? I.e., are you sure that <code>k</code> is incremented? and, like @Scott said, you should initialise <code>sum</code> to 0 every time before the inner loop."}], "answers": [{"tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": true, "score": 0, "last_activity_date": 1544005983, "creation_date": 1544005983, "answer_id": 53630251, "question_id": 53630195, "link": "https://stackoverflow.com/questions/53630195/abundant-numbers/53630251#53630251", "title": "Abundant numbers", "body": "<p>I think you'd want to re-initialize <code>sum</code> at the start of each iteration of the first/outer loop.</p>\n"}], "owner": {"reputation": 1, "user_id": 10549555, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-F8Iv7C4nNAc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC0_47ToKPJ99YLQngcwEcA5msNlA/mo/photo.jpg?sz=128", "display_name": "Naman Dubey", "link": "https://stackoverflow.com/users/10549555/naman-dubey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 53630251, "answer_count": 1, "score": -2, "last_activity_date": 1544134374, "creation_date": 1544005792, "last_edit_date": 1544134374, "question_id": 53630195, "link": "https://stackoverflow.com/questions/53630195/abundant-numbers", "title": "Abundant numbers", "body": "<p>I have been trying to generate all the abundant numbers. But I am getting a blank screen as output? I am putting all the numbers that are abundant in an array and then printing the array. But it's not showing anything? Why?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    int arr[28123];\n    int sum = 0,k=0;\n    for(int i = 1;i&lt;28123;i++){\n        for(int j= 1;j&lt;i;j++){\n            if(i%j==0){\n                sum = sum + j;\n                //cout&lt;&lt;sum&lt;&lt;endl;\n            }\n        }\n        if(sum == i){\n            arr[k] = i;\n            cout&lt;&lt;i&lt;&lt;endl;\n            k++;\n        }\n    }\n    for(int y = k;y&lt;28123;y++){\n        arr[y] = 0;\n    }\n    int n = sizeof(arr)/sizeof(arr[0]);\n    for(int h= 0;h&lt;k;h++){\n        cout &lt;&lt;arr[h]&lt;&lt; endl;\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "web-services", "c++11", "codeblocks"], "comments": [{"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1544006290, "post_id": 53630103, "comment_id": 94120050, "body": "The error feels quite self-explanatory: compiler couldn&#39;t find file <code>http_listener.h</code> in folder <code>cpprest</code> in any of known include locations. Where is your file located?"}, {"owner": {"reputation": 1796, "user_id": 6379197, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/ls3yu.png?s=128&g=1", "display_name": "A Stranger", "link": "https://stackoverflow.com/users/6379197/a-stranger"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1544006464, "post_id": 53630103, "comment_id": 94120170, "body": "I do not know how to link external header file with my project in codeblocks ."}], "answers": [{"tags": [], "owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "is_accepted": false, "score": 0, "last_activity_date": 1544010501, "last_edit_date": 1544010501, "creation_date": 1544010078, "answer_id": 53631481, "question_id": 53630103, "link": "https://stackoverflow.com/questions/53630103/creating-rest-client-in-c-codeblocks/53631481#53631481", "title": "creating rest client in c++ codeblocks?", "body": "<p>You have to add the path to your include files. E.g. the path to http_listener.h is </p>\n\n<pre><code>/a/b/cpprest/http_listener.h\n</code></pre>\n\n<p>In codeblocks open Project -> Build options... -> Search directories. In tabCompiler add </p>\n\n<pre><code>/a/b\n</code></pre>\n\n<p>Now the compiler will find your includes. Next you have to set the linker search paths in tab Linker if you get <code>undefined reference</code>.</p>\n"}], "owner": {"reputation": 1796, "user_id": 6379197, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/ls3yu.png?s=128&g=1", "display_name": "A Stranger", "link": "https://stackoverflow.com/users/6379197/a-stranger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 265, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544010501, "creation_date": 1544005534, "last_edit_date": 1544006478, "question_id": 53630103, "link": "https://stackoverflow.com/questions/53630103/creating-rest-client-in-c-codeblocks", "title": "creating rest client in c++ codeblocks?", "body": "<p>I am trying to create a rest-api client in c++ in codeblocks compiler . That is why , I am <a href=\"https://mariusbancila.ro/blog/2013/08/19/full-fledged-client-server-example-with-cpprest-sdk-110/\" rel=\"nofollow noreferrer\">following this tutorial : </a></p>\n\n<pre><code>#include &lt;cpprest/http_listener.h&gt;\n#include &lt;cpprest/json.h&gt;\n#pragma comment(lib, \"cpprest110_1_1\")\n\nusing namespace web;\nusing namespace web::http;\nusing namespace web::http::experimental::listener;\n\n#include &lt;iostream&gt;\n#include &lt;map&gt;\n#include &lt;set&gt;\n#include &lt;string&gt;\nusing namespace std;\n\n#define TRACE(msg)            wcout &lt;&lt; msg\n#define TRACE_ACTION(a, k, v) wcout &lt;&lt; a &lt;&lt; L\" (\" &lt;&lt; k &lt;&lt; L\", \" &lt;&lt; v &lt;&lt; L\")\\n\"\n\nmap&lt;utility::string_t, utility::string_t&gt; dictionary;\n\n/* handlers implementation */\n\nint main()\n{\n   http_listener listener(L\"http://localhost/restdemo\");\n\n   listener.support(methods::GET, handle_get);\n   listener.support(methods::POST, handle_post);\n   listener.support(methods::PUT, handle_put);\n   listener.support(methods::DEL, handle_del);\n\n   try\n   {\n      listener\n         .open()\n         .then([&amp;listener](){TRACE(L\"\\nstarting to listen\\n\");})\n         .wait();\n\n      while (true);\n   }\n   catch (exception const &amp; e)\n   {\n      wcout &lt;&lt; e.what() &lt;&lt; endl;\n   }\n\n   return 0;\n}\n</code></pre>\n\n<p>Now when I am going to rub the cpp file in codeblocks , then I am getting the following error : </p>\n\n<p><strong><code>fatal error: cpprest/http_listener.h: No such file or directory</code></strong> </p>\n\n<p>How can I solve this error ? Can you please give me any link from where I can the idea to create rest-api and rest-client in c++ in codeblocks ? </p>\n"}]